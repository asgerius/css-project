[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1547095983, "post_id": 54119408, "comment_id": 95076108, "body": "What is the actual heuristic for which records are valid?"}], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 157, "user_id": 4300830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-90J61yPpDps/AAAAAAAAAAI/AAAAAAAAAx8/3D6zT-UidAM/photo.jpg?sz=128", "display_name": "Ezio Auditore", "link": "https://stackoverflow.com/users/4300830/ezio-auditore"}, "edited": false, "score": 0, "creation_date": 1547131335, "post_id": 54119438, "comment_id": 95093309, "body": "Let me know! :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1547073540, "creation_date": 1547073540, "answer_id": 54119438, "question_id": 54119408, "link": "https://stackoverflow.com/questions/54119408/how-can-validate-condition-in-a-model/54119438#54119438", "title": "How can validate condition in a model?", "body": "<p>If I got it correctly you can't have more than one pair for a row. Try <code>scope</code></p>\n\n<pre><code>validates :open_course_id, :uniqueness =&gt; { :message =&gt; \"Already in use\", :scope =&gt; :mover_id }\n</code></pre>\n\n<p>or the other way around, it's up to you.</p>\n"}, {"tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1547102300, "creation_date": 1547102300, "answer_id": 54123132, "question_id": 54119408, "link": "https://stackoverflow.com/questions/54119408/how-can-validate-condition-in-a-model/54123132#54123132", "title": "How can validate condition in a model?", "body": "<p>Custom validation -</p>\n\n<pre><code>  class OpenCourseDeails &lt; ApplicationRecord\n\n      validate :record_present\n\n      def record_present\n        records = OpenCourseDeails.where(\"open_course_id = ? AND mover_id = ?\", self.open_course_id, self.mover_id)\n        if records.present?\n          errors.add(:record, \"Already present!\")\n        end\n      end\n\n  end\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 4300830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-90J61yPpDps/AAAAAAAAAAI/AAAAAAAAAx8/3D6zT-UidAM/photo.jpg?sz=128", "display_name": "Ezio Auditore", "link": "https://stackoverflow.com/users/4300830/ezio-auditore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54119438, "answer_count": 2, "score": 0, "last_activity_date": 1547102300, "creation_date": 1547073359, "question_id": 54119408, "link": "https://stackoverflow.com/questions/54119408/how-can-validate-condition-in-a-model", "title": "How can validate condition in a model?", "body": "<p>I'm having issue trying to create a validate condition to not allow to save records if it exists.</p>\n\n<p>table open_courses</p>\n\n<pre><code>|id|   |name|\n  1     Course 1\n  2     Course 2\n</code></pre>\n\n<p>table movers</p>\n\n<pre><code>|id|  |name|\n  1  mover 1\n  2  Mover 2\n</code></pre>\n\n<p>table open_course_deails</p>\n\n<pre><code>|id| |open_course_id|  |mover_id\n  1        1                1    #correct save\n  2        2                1    #correct save\n  3        1                2    #correct save\n  4        2                2    #correct save\n  5        1                1    #should not save the information\n  6        1                2    #should not save the information\n  7        2                1    #should not save the information\n  8        2                2    #should not save the information\n</code></pre>\n\n<p>Here is the controller.</p>\n\n<pre><code>def new\n  @open_course_detail= OpenCourseDetail.new\nend\n\ndef create\n  @open_course_detail.new(open_course_params)\n  if @open_course.save\n    redirect_to :index\n  end\nend\n</code></pre>\n\n<p>Here is the view.</p>\n\n<pre><code>&lt;%= form_for @open_course_detail do |f| %&gt;\n  &lt;%= f.text_field :open_course_id  %&gt;\n  &lt;%= f.text_field :mover_id  %&gt;  \n&lt;$ end %&gt;\n</code></pre>\n\n<p>Here is the model open_course_detail.rb</p>\n\n<pre><code>validates :open_course_id,:uniqueness =&gt; { message =&gt; \"Already in use\" }\n</code></pre>\n\n<p>Also I tried:</p>\n\n<pre><code> validates :mover_id,:uniqueness =&gt; { message =&gt; \"Already in use\" }\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1547073235, "post_id": 54119354, "comment_id": 95071326, "body": "Sorry, but, what do you mean with &quot;two last non-unique integers&quot;?"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1547073432, "post_id": 54119354, "comment_id": 95071379, "body": "Result shows last 3 integers from each array and you say you want 2 last integers? How many do you want?"}, {"owner": {"reputation": 194, "user_id": 7809709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ucGeK.jpg?s=128&g=1", "display_name": "Anton Semenichenko", "link": "https://stackoverflow.com/users/7809709/anton-semenichenko"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1547073460, "post_id": 54119354, "comment_id": 95071390, "body": "@SebastianPalma edited"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1547073520, "post_id": 54119354, "comment_id": 95071404, "body": "For clarity, what would <code>[1,2,3,4]</code>, <code>[1,3,2,3]</code>, <code>[]</code> and <code>[0]</code> return?"}, {"owner": {"reputation": 194, "user_id": 7809709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ucGeK.jpg?s=128&g=1", "display_name": "Anton Semenichenko", "link": "https://stackoverflow.com/users/7809709/anton-semenichenko"}, "reply_to_user": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1547073697, "post_id": 54119354, "comment_id": 95071455, "body": "@jedi was  edited"}, {"owner": {"reputation": 194, "user_id": 7809709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ucGeK.jpg?s=128&g=1", "display_name": "Anton Semenichenko", "link": "https://stackoverflow.com/users/7809709/anton-semenichenko"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1547073710, "post_id": 54119354, "comment_id": 95071459, "body": "@tadman was edited"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1547073793, "post_id": 54119354, "comment_id": 95071480, "body": "When describing problems like this it&#39;s worth describing what happens in edge cases, not ideal cases."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1547095683, "post_id": 54119354, "comment_id": 95076035, "body": "&quot;please advise on the best and elegant approach to the following task:&quot; \u2013 You do it by writing a program which does that. If you have a problem with your program, carefully read the documentation of all the methods, classes, modules, and libraries you are using, write tests for your programs, trace the execution with pen and paper, single-step it in a debugger, then sleep on it, start again from the beginning, sleep on it again, and <i>then and only then</i> narrow your problem down to a concise, focused, simple, short, reproducible <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and ask a specific, focused, narrow question on <a href=\"https://stackoverflow.com\">Stack Overflow</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1547095823, "post_id": 54119354, "comment_id": 95076068, "body": "Also, asking for &quot;best&quot; and &quot;elegant&quot; is highly subjective and opinion-based, which is off-topic on <a href=\"https://stackoverflow.com\">Stack Overflow</a> as per the <a href=\"https://stackoverflow.com/help/dont-ask\">help center</a>. You need to give an exact, precise, objectively measurable, unambiguous definition of what you mean by &quot;best&quot; and &quot;elegant&quot;."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1547096892, "post_id": 54119354, "comment_id": 95076322, "body": "Anton, I trust you don&#39;t mind my edit to your question. I believe my understanding of the question is correct in light of your comment on @tadman&#39;s answer, but if not, correct my edit or roll back to your original question. I did the edit because you were getting hammered with downvotes and a vote to close (probably because readers found your question unclear), yet it&#39;s not a bad question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1547097401, "post_id": 54119354, "comment_id": 95076453, "body": "Further to @J&#246;rg&#39;s comment about &quot;best&quot; and &quot;elegant&quot;, aside from the fact that they are subjective terms, it&#39;s not necessary, because many people here always strive to give the most elegant answer they can think of, regardless of whether they are asked to do so."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1547178045, "post_id": 54119354, "comment_id": 95111550, "body": "@CarySwoveland I seemed to have messed up your previous edit. Sorry. Thanks for the correction."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1547180703, "post_id": 54119354, "comment_id": 95112086, "body": "@sawa Not to worry. Your edit was an improvement, just a minor oversight."}, {"owner": {"reputation": 194, "user_id": 7809709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ucGeK.jpg?s=128&g=1", "display_name": "Anton Semenichenko", "link": "https://stackoverflow.com/users/7809709/anton-semenichenko"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1547469577, "post_id": 54119354, "comment_id": 95191607, "body": "@J&#246;rgWMittag I&#39;m afraid I&#39;ll get old and die sleeping on the paper. You have to admit and deal with the fact of newcomers seeking best and fastest solutions, as this is pure business initiative to produce kilotons of MVP projects hiring literally everyone. Sadly, a top notch professionals like you won&#39;t cover everything. If you&#39;ll notice a timeline and questions, I ask 1 question once per year. Thank you for your advice, I try to educate, read out and check docs constantly. I was seeking for help at night, being tired and asking for assistance, having few approaches in mind."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 194, "user_id": 7809709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ucGeK.jpg?s=128&g=1", "display_name": "Anton Semenichenko", "link": "https://stackoverflow.com/users/7809709/anton-semenichenko"}, "edited": false, "score": 1, "creation_date": 1547074130, "post_id": 54119466, "comment_id": 95071576, "body": "The <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> library has an incredible amount of tools, so take some time to look through what it offers. There&#39;s usually something for every occasion."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1547073767, "creation_date": 1547073767, "answer_id": 54119466, "question_id": 54119354, "link": "https://stackoverflow.com/questions/54119354/select-value-range-from-an-array-including-duplicates/54119466#54119466", "title": "Select value range from an array, including duplicates", "body": "<p>Here's a fairly inefficient approach that uses <a href=\"https://ruby-doc.org/core-2.5.1/Array.html#method-i-take_while\" rel=\"nofollow noreferrer\"><code>take_while</code></a>:</p>\n\n<pre><code>def last_non_dupe(array, count = 2)\n  result = [ ]\n  array.reverse.take_while do |n|\n    result &lt;&lt; n\n    result.uniq.length &lt;= count\n  end.reverse\nend\n</code></pre>\n\n<p>It can be improved on by using a <code>Set</code> which is automatically unique:</p>\n\n<pre><code>require 'set'\n\ndef last_non_dupe(array, count = 2)\n  result = Set.new\n  array.reverse.take_while do |n|\n    result &lt;&lt; n\n    result.length &lt;= count\n  end.reverse\nend\n</code></pre>\n\n<p>Where in either case you do:</p>\n\n<pre><code>last_non_dupe([6, 4, 3, 2, 2])\n# =&gt; [3, 2, 2]\n</code></pre>\n\n<p>The <code>count</code> argument can be changed as necessary for longer or shorter lists.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1547123872, "post_id": 54120161, "comment_id": 95088859, "body": "This is the best I can think of, too."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1547081754, "last_edit_date": 1547081754, "creation_date": 1547078055, "answer_id": 54120161, "question_id": 54119354, "link": "https://stackoverflow.com/questions/54119354/select-value-range-from-an-array-including-duplicates/54120161#54120161", "title": "Select value range from an array, including duplicates", "body": "<pre><code>def last_two_different(arr, count)\n  arr.reverse_each.\n      lazy.\n      chunk(&amp;:itself).\n      first(count).\n      flat_map(&amp;:last).\n      reverse\nend\n\nlast_two_different [6, 4, 3, 2, 2], 2  #=&gt; [3, 2, 2] \nlast_two_different [3, 4, 3, 3, 2], 2  #=&gt; [3, 3, 2]\nlast_two_different [3, 4, 3, 3, 2], 3  #=&gt; [4, 3, 3, 2] \nlast_two_different [3, 4, 3, 3, 2], 4  #=&gt; [3, 4, 3, 3, 2] \nlast_two_different [1, 2], 2           #=&gt; [1, 2]\nlast_two_different [1, 1], 2           #=&gt; [1, 1] \nlast_two_different [1], 2              #=&gt; [1] \nlast_two_different [], 2               #=&gt; [] \n</code></pre>\n\n<p>The steps are as follows.</p>\n\n<pre><code>arr = [6, 4, 3, 2, 2]\ncount = 2\n\nenum0 = arr.reverse_each\n  #=&gt; #&lt;Enumerator: [6, 4, 3, 2, 2]:reverse_each&gt; \n</code></pre>\n\n<p>We can convert this enumerator to an array to see the values it will generate.</p>\n\n<pre><code>enum0.to_a\n  #=&gt; [2, 2, 3, 4, 6] \n</code></pre>\n\n<p>First, suppose we wrote the following.</p>\n\n<pre><code>enum1 = enum0.chunk(&amp;:itself)\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator::Generator:0x00005c29be132b00&gt;:each&gt; \nenum1.to_a\n  #=&gt; [[2, [2, 2]], [3, [3]], [4, [4]], [6, [6]]] \n</code></pre>\n\n<p>We want the first <code>count #=&gt; 2</code> elements generated by <code>enum1</code>, from which we could extract the desired result. That tells us that we want a lazy enumerator.</p>\n\n<pre><code>enum2 = enum0.lazy\n  #=&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator: [6, 4, 3, 2, 2]:reverse_each&gt;&gt; \nenum3 = enum2.chunk(&amp;:itself)\n  #=&gt; #&lt;Enumerator::Lazy: #&lt;Enumerator:\n  #     #&lt;Enumerator::Generator:0x00005c29bdf48cb8&gt;:each&gt;&gt;\nenum3.to_a\n  #=&gt; [[2, [2, 2]], [3, [3]], [4, [4]], [6, [6]]] \n\na = enum3.first(count)\n  #=&gt; [[2, [2, 2]], [3, [3]]] \nb = a.flat_map(&amp;:last)\n  #=&gt; [2, 2, 3] \nb.reverse\n  #=&gt; [3, 2, 2] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1547124799, "creation_date": 1547124799, "answer_id": 54129160, "question_id": 54119354, "link": "https://stackoverflow.com/questions/54119354/select-value-range-from-an-array-including-duplicates/54129160#54129160", "title": "Select value range from an array, including duplicates", "body": "<p>Not sure about the efficiency, but here is another way to do it:</p>\n\n<pre><code>arr = [6, 4, 3, 2, 2]\nuniq = arr.uniq.last(2) # =&gt; [3, 2]\narr.select{|e| uniq.include?(e)} # =&gt; [3, 2, 2]\n</code></pre>\n"}], "owner": {"reputation": 194, "user_id": 7809709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ucGeK.jpg?s=128&g=1", "display_name": "Anton Semenichenko", "link": "https://stackoverflow.com/users/7809709/anton-semenichenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 54119466, "answer_count": 3, "score": -1, "last_activity_date": 1547141424, "creation_date": 1547073021, "last_edit_date": 1547141424, "question_id": 54119354, "link": "https://stackoverflow.com/questions/54119354/select-value-range-from-an-array-including-duplicates", "title": "Select value range from an array, including duplicates", "body": "<p>I am given an array <code>arr</code> of integers that is sorted in ascending or descending order. If <code>arr</code> contains at least two distinct elements, I need to find the longest <code>arr.last(n)</code> that has exactly two distinct elements (i.e., with the largest <code>n</code>). Otherwise, it should return <code>arr</code>. Some examples are:</p>\n\n<ul>\n<li><code>arr = [6, 4, 3, 2, 2]</code>, then <code>[3, 2, 2]</code> is to be returned</li>\n<li><code>arr = [6, 4, 3, 3, 2]</code>, then <code>[3, 3, 2]</code> is to be returned</li>\n<li><code>arr = [1]</code>, then <code>arr</code> is to be returned.</li>\n</ul>\n\n<p>I would be grateful for suggestions on how to compute the desired result.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "answers": [{"comments": [{"owner": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "edited": false, "score": 0, "creation_date": 1547654405, "post_id": 54208585, "comment_id": 95267486, "body": "I ended making a fresh copy of the project and reinstalled all my Gems and it worked afterwards. Thanks for the reply."}], "tags": [], "owner": {"reputation": 3656, "user_id": 1758000, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8da1c6e88a7581770d3e81088b7ba944?s=128&d=identicon&r=PG", "display_name": "Joe Czucha", "link": "https://stackoverflow.com/users/1758000/joe-czucha"}, "is_accepted": false, "score": 5, "last_activity_date": 1547597019, "creation_date": 1547597019, "answer_id": 54208585, "question_id": 54119226, "link": "https://stackoverflow.com/questions/54119226/unable-to-autoload-constant-activestorageblobanalyzable/54208585#54208585", "title": "Unable to autoload constant ActiveStorage::Blob::Analyzable", "body": "<p>Do you have <code>config.active_storage.service = :amazon</code> set in your <code>development.rb</code> by any chance? </p>\n\n<p>I was getting the above error and it ended up being because I had the above line but the AWS env vars weren't set.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12853698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDsBEQQrT-O2gvCOC5EVEmCCeZSr2iDVUcobgdr=k-s128", "display_name": "Max Brundige", "link": "https://stackoverflow.com/users/12853698/max-brundige"}, "is_accepted": false, "score": 1, "last_activity_date": 1581008822, "creation_date": 1581008822, "answer_id": 60100183, "question_id": 54119226, "link": "https://stackoverflow.com/questions/54119226/unable-to-autoload-constant-activestorageblobanalyzable/60100183#60100183", "title": "Unable to autoload constant ActiveStorage::Blob::Analyzable", "body": "<p>Make sure you check that all of the environment variables present:</p>\n\n<ul>\n<li>AWS access key</li>\n<li>AWS secret key</li>\n<li>Bucket Name</li>\n</ul>\n\n<p><strong>checking spelling of the environment variables to make sure they match your storage.yml configuration file</strong></p>\n"}], "owner": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1107, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1581008822, "creation_date": 1547072347, "question_id": 54119226, "link": "https://stackoverflow.com/questions/54119226/unable-to-autoload-constant-activestorageblobanalyzable", "title": "Unable to autoload constant ActiveStorage::Blob::Analyzable", "body": "<p>I looked at every possible solution regarding this error but nothing solved it.</p>\n\n<p>Every time I try to upload an image, I receive this error:</p>\n\n<p><code>Unable to autoload constant ActiveStorage::Blob::Analyzable, expected /usr/local/lib/ruby/gems/2.5.0/gems/activestorage-5.2.2/app/models/active_storage/blob/analyzable.rb to define it</code>.</p>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby '2.5.1'\n\ngem 'rails', '~&gt; 5.2.0'\ngem 'mysql2', '&gt;= 0.4.4', '&lt; 0.6.0'\ngem 'puma', '~&gt; 3.11'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'mini_racer', platforms: :ruby\n\ngem 'turbolinks', '~&gt; 5'\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 4.0'\n# Use ActiveModel has_secure_password\ngem 'bcrypt', '~&gt; 3.1.7'\n\n# Use ActiveStorage variant\n# gem 'mini_magick', '~&gt; 4.8'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# Reduces boot times through caching; required in config/boot.rb\n# Causing crashes. Removing for now\n# gem 'bootsnap', '&gt;= 1.1.0', require: false\n\n# Well maintained fork with several patches and compatability for Rails 5.x\n# If we need to we can fork this and take ownership of it. Much better than building from scratch.\n# gem 'casino', git: \"https://github.com/identification-io/CASino.git\", branch: \"master\"\ngem 'casino', git: \"https://github.com/webappsllc/CASino.git\", branch: \"master\"\n# gem 'casino', path: '/Users/justin/dev/oss/CASino'\ngem 'grape', '~&gt; 1.1.0' # Pinned\n\ngem 'wisper', '~&gt; 2.0'\ngem 'rack-cors', require: 'rack/cors'\n\n# Form Objects\ngem \"reform\", \"&gt;= 2.2.0\"\ngem \"reform-rails\"\ngem \"dry-validation\"\n\n# Free optimization\ngem 'fast_blank'\n\n# Hashids to obscure legacy_ids\ngem 'hashids'\n\n# Send Emails via Amazon SES\ngem 'aws-sdk-rails'\n\n# Upload Files via Amason S3\ngem \"aws-sdk-s3\", require: false\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n  gem 'guard-rspec', require: false\n  gem 'dotenv-rails', require: 'dotenv/rails-now'\n  gem 'spring-commands-rspec'\n  gem 'parallel_tests', group: [:development, :test]\nend\n\ngroup :development do\n  # Access an interactive console on exception pages or by calling 'console' anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\n  gem 'grape_on_rails_routes'\n  gem \"better_errors\"\n  gem \"binding_of_caller\"\n  gem \"letter_opener\"\n  gem 'letter_opener_web', '~&gt; 1.0'\nend\n\ngroup :test do\n  # Adds support for Capybara system testing and selenium driver\n  gem 'capybara', '&gt;= 2.15', '&lt; 4.0'\n  gem 'selenium-webdriver'\n  # Easy installation and use of chromedriver to run system tests with Chrome\n  gem 'chromedriver-helper'\n  gem 'factory_bot'\n  gem 'rspec'\n  gem 'rspec-rails'\n  gem 'database_cleaner'\n  gem 'faker'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\n# gem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>In <code>config/application.rb</code> I have <code>require 'active_storage/engine'</code> uncommented.</p>\n\n<p>In <code>config/environments/development.rb</code> I have <code>config.active_storage.service = :local</code> set up.</p>\n\n<p>I ran <code>rails active_storage:install</code> and <code>rails db:migrate</code>.</p>\n\n<p>The name of the model is <code>user_test</code></p>\n\n<pre><code>class UserTest &lt; ApplicationRecord\n  has_one_attached :image\nend\n</code></pre>\n\n<p><strong>I have this in app/controllers/user_tests_controller.rb</strong></p>\n\n<pre><code>def user_test_params\n  params.require(:user_test).permit(:title, :caption, :image)\nend \n</code></pre>\n\n<p>**config/storage.yml*</p>\n\n<pre><code>test:\n  service: Disk\n  root: &lt;%= Rails.root.join(\"tmp/storage\") %&gt;\n\nlocal:\n  service: Disk\n  root: &lt;%= Rails.root.join(\"storage\") %&gt;\n</code></pre>\n\n<p>I am really clueless as to why it isn't working.</p>\n"}, {"tags": ["ruby", "class", "object", "monkeypatching"], "comments": [{"owner": {"reputation": 4856, "user_id": 349333, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/25b78ea128b61107fc07250603c981e2?s=128&d=identicon&r=PG", "display_name": "Jochem Schulenklopper", "link": "https://stackoverflow.com/users/349333/jochem-schulenklopper"}, "edited": false, "score": 0, "creation_date": 1547068249, "post_id": 54118311, "comment_id": 95069323, "body": "Oh, I just discover that Ruby on Rails does something similar, adding <code>#in?</code> to <code>Object</code>. So, I&#39;m alone with this goal about striving for code to be close to a normal natural expression in English."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1547071268, "post_id": 54118311, "comment_id": 95070612, "body": "I would recommend as a minimum change calling the method <code>included_in?</code> this way there is a simple implication that the object being passed should implement include."}, {"owner": {"reputation": 4856, "user_id": 349333, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/25b78ea128b61107fc07250603c981e2?s=128&d=identicon&r=PG", "display_name": "Jochem Schulenklopper", "link": "https://stackoverflow.com/users/349333/jochem-schulenklopper"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1547118045, "post_id": 54118311, "comment_id": 95085703, "body": "@engineersmnky, I understand, and I like the consequential implication ... but it&#39;s just not how I verbalize the statement. In my head, I think &quot;is this value <i>in</i> this array?&quot; (and not &quot;is this value <i>included in</i> this array?&quot;) but YMMV."}], "answers": [{"comments": [{"owner": {"reputation": 4856, "user_id": 349333, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/25b78ea128b61107fc07250603c981e2?s=128&d=identicon&r=PG", "display_name": "Jochem Schulenklopper", "link": "https://stackoverflow.com/users/349333/jochem-schulenklopper"}, "edited": false, "score": 0, "creation_date": 1547069186, "post_id": 54118444, "comment_id": 95069715, "body": "Yeah, I saw that code snippet as well. At least using the same code (especially in handling an argument error - an object that doesn&#39;t respond to <code>include?</code>) conforms to a common-ish opinion."}, {"owner": {"reputation": 4856, "user_id": 349333, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/25b78ea128b61107fc07250603c981e2?s=128&d=identicon&r=PG", "display_name": "Jochem Schulenklopper", "link": "https://stackoverflow.com/users/349333/jochem-schulenklopper"}, "edited": false, "score": 0, "creation_date": 1547069457, "post_id": 54118444, "comment_id": 95069822, "body": "Oh, for a non-web application in Ruby - yes, it happens - I&#39;d not opt quickly for requiring Rails modules in my project. Then I&#39;d favor to just monkey patch <code>Object</code> myself (but using the similar code, decreasing the chance of confusion)."}], "tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": false, "score": 2, "last_activity_date": 1547068387, "creation_date": 1547068387, "answer_id": 54118444, "question_id": 54118311, "link": "https://stackoverflow.com/questions/54118311/is-it-a-bad-idea-to-monkey-patch-object-to-have-a-more-natural-way-for-testing-i/54118444#54118444", "title": "Is it a bad idea to monkey patch Object to have a more natural way for testing if an element is in an array?", "body": "<p>I would either require the appropriate Rails Active Support module (<a href=\"https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/object/inclusion.rb\" rel=\"nofollow noreferrer\">core_ext/object/inclusion.rb</a>) into your project, or if you are going to modify <code>Object</code> yourself, use the same source code as Rails' <a href=\"https://api.rubyonrails.org/\" rel=\"nofollow noreferrer\">Object#in?</a> method.</p>\n\n<pre><code># File activesupport/lib/active_support/core_ext/object/inclusion.rb, line 12\ndef in?(another_object)\n  another_object.include?(self)\nrescue NoMethodError\n  raise ArgumentError.new(\"The parameter passed to #in? must respond to #include?\")\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4856, "user_id": 349333, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/25b78ea128b61107fc07250603c981e2?s=128&d=identicon&r=PG", "display_name": "Jochem Schulenklopper", "link": "https://stackoverflow.com/users/349333/jochem-schulenklopper"}, "edited": false, "score": 0, "creation_date": 1547069590, "post_id": 54118521, "comment_id": 95069880, "body": "Accepting this answer, as it addresses (or at least: mentions) the point of a potential drawback of monkey patching, in the light of the original question."}], "tags": [], "owner": {"reputation": 401, "user_id": 2387016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TiJAT.jpg?s=128&g=1", "display_name": "Sean Kennedy", "link": "https://stackoverflow.com/users/2387016/sean-kennedy"}, "is_accepted": true, "score": 3, "last_activity_date": 1547068739, "creation_date": 1547068739, "answer_id": 54118521, "question_id": 54118311, "link": "https://stackoverflow.com/questions/54118311/is-it-a-bad-idea-to-monkey-patch-object-to-have-a-more-natural-way-for-testing-i/54118521#54118521", "title": "Is it a bad idea to monkey patch Object to have a more natural way for testing if an element is in an array?", "body": "<p>Ignoring the general arguments for/against monkey patching in Ruby, the code you describe is an example of a <em>convenience method</em> to help with your readability. Arguments against its inclusion also apply to the generic case as well, so there doesn't appear to be a specific drawback. Technically, this method is already included in the Ruby on Rails framework, so the authors shared your view in supporting it as a natural expression.</p>\n"}], "owner": {"reputation": 4856, "user_id": 349333, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/25b78ea128b61107fc07250603c981e2?s=128&d=identicon&r=PG", "display_name": "Jochem Schulenklopper", "link": "https://stackoverflow.com/users/349333/jochem-schulenklopper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 54118521, "answer_count": 2, "score": 1, "last_activity_date": 1547068739, "creation_date": 1547067715, "question_id": 54118311, "link": "https://stackoverflow.com/questions/54118311/is-it-a-bad-idea-to-monkey-patch-object-to-have-a-more-natural-way-for-testing-i", "title": "Is it a bad idea to monkey patch Object to have a more natural way for testing if an element is in an array?", "body": "<p>Bothered by that we could test in Ruby whether an array (or another Enumerable) contains a value with the <code>include?</code> method...</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>puts %w(one two three four).include?(\"two\")\n# =&gt; true\nputs %w(one two three four).include?(\"five\")\n# =&gt; false\n</code></pre>\n\n<p>... but not directly test whether a value is included in an array (semantically identical, but not part of the language)...</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>puts \"two\".in?( %w(one two three four) )\nputs \"five\".in?( %w(one two three four) )\n</code></pre>\n\n<p>I thought about monkey patching <code>Object</code> to have a handy <code>Object#in?</code> method, something similar to:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Object\n  def in?(array)\n    return false unless array.respond_to?(:include?)  # Or perhaps raise an error.\n    return array.include?(self)\n  end\nend\n</code></pre>\n\n<p>With that method definition on <code>Object</code>, things like</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>\"two\".in?( %w(one two three four) )\n# =&gt; true\n:nuts.in?( [:banana, :chocolate, :pie] )\n# =&gt; false\n</code></pre>\n\n<p>work nicely, and are very close to a normal sentence expressing that test.</p>\n\n<p>Frequently, I run into that <code>if element.in?(array)</code> is a subtly more natural expression than <code>if array.include?(element)</code>, especially if the array is included as a literal (instead of a variable reference).</p>\n\n<p>Question (while neglecting the general opinion on monkey patching): is this example of monkey patching a smart thing to do? What are specific drawbacks for having an <code>Object#in?</code> method, again not going into the generic pros and cons of monkey patching objects (in Ruby)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 78, "user_id": 726935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a123ed4916ad969ab3c12db891a97631?s=128&d=identicon&r=PG", "display_name": "RunsnbunsN", "link": "https://stackoverflow.com/users/726935/runsnbunsn"}, "edited": false, "score": 0, "creation_date": 1547063582, "post_id": 54117174, "comment_id": 95067368, "body": "have you tried: <code>send_data data.to_xml . . .</code>"}, {"owner": {"reputation": 61, "user_id": 4186487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f27f7e633b6dce45786e6943f65a0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby4Rails", "link": "https://stackoverflow.com/users/4186487/ruby4rails"}, "reply_to_user": {"reputation": 78, "user_id": 726935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a123ed4916ad969ab3c12db891a97631?s=128&d=identicon&r=PG", "display_name": "RunsnbunsN", "link": "https://stackoverflow.com/users/726935/runsnbunsn"}, "edited": false, "score": 0, "creation_date": 1547064219, "post_id": 54117174, "comment_id": 95067633, "body": "@RunsnbunsN Thanks for the reply. Yes I did and this is the output I got  undefined method `to_xml&#39; for #&lt;ActionView::OutputBuffer:0x00007f95faddcfb0&gt; Did you mean? to_yaml"}, {"owner": {"reputation": 436, "user_id": 2570423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zVptB.png?s=128&g=1", "display_name": "mehedi", "link": "https://stackoverflow.com/users/2570423/mehedi"}, "edited": false, "score": 0, "creation_date": 1547065880, "post_id": 54117174, "comment_id": 95068330, "body": "Where is your builder generated xml? You are sending a string representation of the view of <code>index</code> action. Could you please show your view file."}, {"owner": {"reputation": 61, "user_id": 4186487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f27f7e633b6dce45786e6943f65a0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby4Rails", "link": "https://stackoverflow.com/users/4186487/ruby4rails"}, "reply_to_user": {"reputation": 436, "user_id": 2570423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zVptB.png?s=128&g=1", "display_name": "mehedi", "link": "https://stackoverflow.com/users/2570423/mehedi"}, "edited": false, "score": 0, "creation_date": 1547069181, "post_id": 54117174, "comment_id": 95069709, "body": "@mehedi Added index.xml.builder view to the question"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4186487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f27f7e633b6dce45786e6943f65a0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby4Rails", "link": "https://stackoverflow.com/users/4186487/ruby4rails"}, "edited": false, "score": 0, "creation_date": 1547070547, "post_id": 54118771, "comment_id": 95070289, "body": "Thanks a lot. It works!!  Also instead of xml.applicant_info if i use as xml.applicant-info I&#39;m getting error as rails is treating hyphen as minus. but if i want it to be - in xml how to do that?"}, {"owner": {"reputation": 436, "user_id": 2570423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zVptB.png?s=128&g=1", "display_name": "mehedi", "link": "https://stackoverflow.com/users/2570423/mehedi"}, "reply_to_user": {"reputation": 61, "user_id": 4186487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f27f7e633b6dce45786e6943f65a0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby4Rails", "link": "https://stackoverflow.com/users/4186487/ruby4rails"}, "edited": false, "score": 0, "creation_date": 1547070849, "post_id": 54118771, "comment_id": 95070427, "body": "@Ruby4Rails <code>xml.tag!(&#39;applicant-info&#39;)</code>"}], "tags": [], "owner": {"reputation": 436, "user_id": 2570423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zVptB.png?s=128&g=1", "display_name": "mehedi", "link": "https://stackoverflow.com/users/2570423/mehedi"}, "is_accepted": true, "score": 2, "last_activity_date": 1547070032, "creation_date": 1547070032, "answer_id": 54118771, "question_id": 54117174, "link": "https://stackoverflow.com/questions/54117174/how-to-download-xml-file-generated-using-builder-to-save-as-an-xml-file-in-rails/54118771#54118771", "title": "How to download xml file generated using builder to save as an xml file in rails", "body": "<p>Rather than writing xml builder in your action view can you write that code in a private method in your action.</p>\n\n<pre><code>def index\n  @forms = Form.all\n  send_data build_xml.to_xml, :filename =&gt; \"xyz.xml\", :disposition =&gt; 'attachment'\nend \n\nprivate\n\ndef build_xml\n  Nokogiri::XML::Builder.new do |xml|\n    xml.root do\n      @forms.each do |form|\n        xml.admin do\n          xml.applicant_info do\n            xml.id form.form_id\n            xml.company_name form.company_name\n            xml.submission_description form.submission_description\n\n        form.applicants.each do |applicant|\n              xml.applicant_contacts do\n                xml.applicant_contact do\n                  xml.applicant_contact_name applicant.applicant_contact_name, :'applicant-contact-type' =&gt; applicant.applicant_contact_type \n                  xml.telephones do\n                    xml.telephone applicant.telephone, :'telephone-number-type' =&gt; applicant.telephone_number_type\n                  end \n                  xml.emails do\n                    xml.email applicant.email\n                  end \n                end\n              end\n            end\n          end\n          xml.application_set do\n            xml.application_containing_files form.application_containing_files\n            xml.application_information do\n              xml.application_number form.application_number, :'application-type' =&gt; form.application_type \n            end\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4186487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f27f7e633b6dce45786e6943f65a0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ruby4Rails", "link": "https://stackoverflow.com/users/4186487/ruby4rails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 1, "accepted_answer_id": 54118771, "answer_count": 1, "score": 1, "last_activity_date": 1547070032, "creation_date": 1547062737, "last_edit_date": 1547069157, "question_id": 54117174, "link": "https://stackoverflow.com/questions/54117174/how-to-download-xml-file-generated-using-builder-to-save-as-an-xml-file-in-rails", "title": "How to download xml file generated using builder to save as an xml file in rails", "body": "<p>I have tried by using following code in my index controller </p>\n\n<pre><code>    def index\n      @forms = Form.all\n      data = render_to_string( :action =&gt; :index )\n      send_data data, :filename =&gt; \"xyz.xml\", :disposition =&gt; 'attachment'\n    end \n</code></pre>\n\n<p>but it is saving object id's but not the xml output with values. </p>\n\n<p>I want to save the output which i can see in index.xml.builder in views</p>\n\n<p>This is index.xml.builder view</p>\n\n<pre><code>\n    xml.instruct! :xml, :version =&gt; \"1.0\", :encoding =&gt; 'UTF-8'\n\n    @forms.each do |form|\n      xml.admin do\n        xml.applicant_info do\n          xml.id form.form_id\n          xml.company_name form.company_name\n          xml.submission_description form.submission_description\n\n      form.applicants.each do |applicant|\n            xml.applicant_contacts do\n              xml.applicant_contact do\n                xml.applicant_contact_name applicant.applicant_contact_name, :'applicant-contact-type' =&gt; applicant.applicant_contact_type \n                xml.telephones do\n                  xml.telephone applicant.telephone, :'telephone-number-type' =&gt; applicant.telephone_number_type\n                end \n                xml.emails do\n                  xml.email applicant.email\n                end \n              end\n            end\n          end\n        end\n        xml.application_set do\n          xml.application_containing_files form.application_containing_files\n          xml.application_information do\n            xml.application_number form.application_number, :'application-type' =&gt; form.application_type \n          end\n        end\n      end\n    end\n  end\nend\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 5037, "user_id": 4231110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7525da44a40ab0d4e5e88a6e6d0b55de?s=128&d=identicon&r=PG", "display_name": "Justin Howard", "link": "https://stackoverflow.com/users/4231110/justin-howard"}, "edited": false, "score": 2, "creation_date": 1547061343, "post_id": 54116689, "comment_id": 95066426, "body": "Sorry, I&#39;m having trouble understanding your question. Would you try rewording or adding some examples of what you need?"}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1547063236, "creation_date": 1547063236, "answer_id": 54117278, "question_id": 54116689, "link": "https://stackoverflow.com/questions/54116689/set-instance-variable-equal-to-only-specific-model-parameters/54117278#54117278", "title": "set instance variable equal to only specific model parameters", "body": "<p>You <em>could</em> do something like: </p>\n\n<pre><code>def place\n  @place ||= Activity.find(params[:id])\n  @address_attributes = @place.attributes.slice('address_1', 'address_2', 'zip', 'state')\nend\n</code></pre>\n\n<p>In which case you'll have an instance variable that contains a hash of the specified  attributes that you might use something like: </p>\n\n<pre><code>@address_attributes['address_1']\n</code></pre>\n\n<p>Personally, I find typing the <code>''</code> around the key values annoying and prefer using symbols. In which case you might do something like:</p>\n\n<pre><code>def place\n  @place ||= Activity.find(params[:id])\n  @address_attributes = @place.attributes.with_indifferent_access.slice(:address_1, :address_2, :zip, :state)\nend\n</code></pre>\n\n<p>Which you would use something like:</p>\n\n<pre><code>@address_attributes[:address_1]\n</code></pre>\n\n<p>But, even the brackets and symbols are a little annoying. So, you might do something like: </p>\n\n<pre><code>def place\n  @place ||= Activity.find(params[:id])\n  @address_attributes = OpenStruct.new(@place.attributes.with_indifferent_access.slice(:address_1, :address_2, :zip, :state))\nend\n</code></pre>\n\n<p>Which you could then use something like: </p>\n\n<pre><code>@address_attributes.address_1\n</code></pre>\n\n<p>Now, personally, I don't like that long line in the <code>place</code> method, so I would be tempted to do something like:</p>\n\n<pre><code>def place\n  @place ||= Activity.find(params[:id])\n  @address_attributes = get_address_attributes\nend\n\nprivate\n\ndef get_address_attributes\n  OpenStruct.new(\n    @place.\n      attributes.\n      with_indifferent_access.\n      slice(\n        :address_1, \n        :address_2, \n        :zip, \n        :state\n      )\n  )\nend\n</code></pre>\n\n<p>Now, if this is all in a controller, and you're setting the <code>@address_attributes</code> variable just so that you can use it in a view, then maybe that's good enough. </p>\n\n<p>But, if you're using the <code>@address_attributes</code> variable elsewhere in the current instance, then you might consider doing something like: </p>\n\n<pre><code>attr_accessor *%w(\n  address_attributes\n).freeze\n\ndelegate *%w(\n  address_1\n  address_2\n  zip\n  state\n), to: :address_attributes, prefix: place\n\ndef place\n  @place ||= Activity.find(params[:id])\n  @address_attributes = get_address_attributes\nend\n\nprivate\n\ndef get_address_attributes\n  OpenStruct.new(\n    @place.\n      attributes.\n      with_indifferent_access.\n      slice(\n        :address_1, \n        :address_2, \n        :zip, \n        :state\n      )\n  )\nend\n</code></pre>\n\n<p>In which case, you could make calls like:</p>\n\n<pre><code>place_address_1\n</code></pre>\n\n<p>Which seems a lot nicer than something like:</p>\n\n<pre><code>@address_attributes['address_1']\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10850494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497c3c306745d650f26fdff8eee9cc43?s=128&d=identicon&r=PG&f=1", "display_name": "henrietta", "link": "https://stackoverflow.com/users/10850494/henrietta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1547063236, "creation_date": 1547060597, "last_edit_date": 1547061438, "question_id": 54116689, "link": "https://stackoverflow.com/questions/54116689/set-instance-variable-equal-to-only-specific-model-parameters", "title": "set instance variable equal to only specific model parameters", "body": "<pre><code>def place\n  @place = Activity.find(params[:id])\nend\n</code></pre>\n\n<p>How would I choose specific params? We have activity.address1,2, zip state etc and just need an instance variable we can use which is equal to just the address attributes. </p>\n"}, {"tags": ["ruby", "xcode", "homebrew"], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 6460765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce5618905736107fbc54af47a408a788?s=128&d=identicon&r=PG&f=1", "display_name": "Fredy Gonzalo Captuayo Novoa", "link": "https://stackoverflow.com/users/6460765/fredy-gonzalo-captuayo-novoa"}, "is_accepted": false, "score": 1, "last_activity_date": 1547963219, "last_edit_date": 1547963219, "creation_date": 1547916615, "answer_id": 54269282, "question_id": 54116553, "link": "https://stackoverflow.com/questions/54116553/cannot-install-home-brew-failed-to-connect-to-50-63-202-24-port-443/54269282#54269282", "title": "Cannot install Home-brew, Failed to connect to 50.63.202.24 port 443", "body": "<p>This problem was fixed when I removed Homebrew directory and installed again brew:</p>\n\n<ol>\n<li><code>ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)\"</code></li>\n<li><code>/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"</code></li>\n<li><code>brew update</code></li>\n<li><code>brew doctor</code></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 8008893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374f7be8579eb4d8db8191f3bcd1557b?s=128&d=identicon&r=PG&f=1", "display_name": "bomtailey", "link": "https://stackoverflow.com/users/8008893/bomtailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1547963219, "creation_date": 1547059933, "last_edit_date": 1547578531, "question_id": 54116553, "link": "https://stackoverflow.com/questions/54116553/cannot-install-home-brew-failed-to-connect-to-50-63-202-24-port-443", "title": "Cannot install Home-brew, Failed to connect to 50.63.202.24 port 443", "body": "<p>My attempts to update a pod fail because Cocoapod cannot connect to   50.63.202.24 port 443. </p>\n\n<p>fatal: unable to access '<a href=\"https://github.com/Homebrew/brew/\" rel=\"nofollow noreferrer\">https://github.com/Homebrew/brew/</a>': Failed to connect to 50.63.202.24 port 443: Operation timed out\nFailed during: git fetch origin master:refs/remotes/origin/master --tags --force</p>\n\n<p>I've seen many posts on this problem and unfortunately, the solutions often require access to git master which also fails. I'm not using any proxy and the firewall on my Mac is turned off. Pod updates used to function without a problem for me up until a few months ago.</p>\n\n<p>All the attempts I've made to solve this problem based on suggestions I've seen on the net usually require a similar access attempt which fails as above. As far as I can tell nothing is blocked on my Mac so I don't know where the breakdown is.  Can anyone suggest something to check? As I noted, I used to be able to do Github pod updates without a problem and now nothing works.</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 1536655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ada1a0fab0c1215199f103e3a3d7af6?s=128&d=identicon&r=PG", "display_name": "Patrick Kinsella", "link": "https://stackoverflow.com/users/1536655/patrick-kinsella"}, "edited": false, "score": 0, "creation_date": 1547059714, "post_id": 54116295, "comment_id": 95065752, "body": "Thanks Rajagopalan! This did exactly that. I&#39;m wondering, how come find_elements in the selenium documentation and in the rest of my code (which seems to be working ok) uses keys like &quot;:class&quot;, where your code uses &quot;css:&quot; with the &quot;:&quot; after &quot;css&quot;?  Also, will this work in the general case for any class? So, using &quot;css:&quot; I can put &quot;.[classname]&quot; and for each nested element a &quot;&gt;&quot;?"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 25, "user_id": 1536655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ada1a0fab0c1215199f103e3a3d7af6?s=128&d=identicon&r=PG", "display_name": "Patrick Kinsella", "link": "https://stackoverflow.com/users/1536655/patrick-kinsella"}, "edited": false, "score": 0, "creation_date": 1547060165, "post_id": 54116295, "comment_id": 95065929, "body": "Hi, <code>a: b</code> is a hash in ruby! find_element takes the hash input in my code and this<code>&gt;</code> denotes child element in css."}], "tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": true, "score": 2, "last_activity_date": 1547058780, "creation_date": 1547058780, "answer_id": 54116295, "question_id": 54115911, "link": "https://stackoverflow.com/questions/54115911/how-to-find-elements-in-nested-divs-with-selenium-webdriver/54116295#54116295", "title": "How to find elements in nested divs with Selenium WebDriver", "body": "<p>you can do something like this to print all the titles</p>\n\n<pre><code>require 'selenium-webdriver'\ndriver=Selenium::WebDriver.for :firefox\ndriver.manage.timeouts.implicit_wait = 20\ndriver.navigate.to('https://play.google.com/store/apps')\ndriver.find_elements(css: '.details &gt; .title').to_enum.with_index(1) do |element,index|\n  puts \"App #{index}: \" +element.attribute('title')\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 1536655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ada1a0fab0c1215199f103e3a3d7af6?s=128&d=identicon&r=PG", "display_name": "Patrick Kinsella", "link": "https://stackoverflow.com/users/1536655/patrick-kinsella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 54116295, "answer_count": 1, "score": 1, "last_activity_date": 1547058780, "creation_date": 1547056848, "question_id": 54115911, "link": "https://stackoverflow.com/questions/54115911/how-to-find-elements-in-nested-divs-with-selenium-webdriver", "title": "How to find elements in nested divs with Selenium WebDriver", "body": "<p>I'm trying to find apps on the Google Play store and having trouble locating elements that are nested inside other elements. I've seen some examples in Java and not sure I'm implementing the Ruby correctly. I want to select an outer div container, then select divs within that, until I get to the app title, and print it.</p>\n\n<p>I've read the documentation for Selenium WebDriver and tried to read some of the rubygem documentation, and also done Google searches for finding nested div elements with WebDriver. This is my first Selenium WebDriver project.</p>\n\n<pre><code>i = 0\n\napp_cards = driver.find_elements(:class_name, \"card-content\")\napp_details = app_cards.find_elements(:class_name, \"details\")\napp_titles = app_details.find_elements(:class_name, \"title\")\n\napp_titles.each do |app_title|\n    puts \"App #{i}: \" + app_title.attribute(\"title\")\n    i = i + 1\nend\n</code></pre>\n\n<p>I expected the script to print all the app results on a page of the Google Play store, and I get </p>\n\n<pre><code>main.rb:17:in `&lt;main&gt;': undefined method `find_elements' for #&lt;Array:0x00005594417b5f68&gt; (NoMethodError)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave", "dropzone.js", "cloudinary"], "comments": [{"owner": {"reputation": 1161, "user_id": 2056117, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93f3bba48b2683a41e9a2625934e6148?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/2056117/dan"}, "edited": false, "score": 1, "creation_date": 1547057376, "post_id": 54115865, "comment_id": 95064735, "body": "I believe it is preferable to include your code in the body of your question instead of uploading pictures of your code. It&#39;s likely someone will want to try your code but it&#39;s unlikely anyone is willing to retype it from your pictures."}, {"owner": {"reputation": 9, "user_id": 10367830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13cba2c103780e6191b914aa486ce6?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep Rao Rayapudi", "link": "https://stackoverflow.com/users/10367830/pradeep-rao-rayapudi"}, "reply_to_user": {"reputation": 1161, "user_id": 2056117, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93f3bba48b2683a41e9a2625934e6148?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/2056117/dan"}, "edited": false, "score": 1, "creation_date": 1547101024, "post_id": 54115865, "comment_id": 95077422, "body": "Yes Dan your right i will take care from next time."}], "answers": [{"comments": [{"owner": {"reputation": 1686, "user_id": 7264341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oz5dfb6ASr8/AAAAAAAAAAI/AAAAAAAAAC8/33rQJBMPZZI/photo.jpg?sz=128", "display_name": "Javier Men&#233;ndez Rizo", "link": "https://stackoverflow.com/users/7264341/javier-men%c3%a9ndez-rizo"}, "reply_to_user": {"reputation": 9, "user_id": 10367830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13cba2c103780e6191b914aa486ce6?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep Rao Rayapudi", "link": "https://stackoverflow.com/users/10367830/pradeep-rao-rayapudi"}, "edited": false, "score": 0, "creation_date": 1547127027, "post_id": 54116360, "comment_id": 95090650, "body": "On a default config for a rails app the logs are on log/production.log, log/development.log, log/test.log"}], "tags": [], "owner": {"reputation": 1686, "user_id": 7264341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oz5dfb6ASr8/AAAAAAAAAAI/AAAAAAAAAC8/33rQJBMPZZI/photo.jpg?sz=128", "display_name": "Javier Men&#233;ndez Rizo", "link": "https://stackoverflow.com/users/7264341/javier-men%c3%a9ndez-rizo"}, "is_accepted": false, "score": 0, "last_activity_date": 1547059035, "creation_date": 1547059035, "answer_id": 54116360, "question_id": 54115865, "link": "https://stackoverflow.com/questions/54115865/rails-roolback-transaction-when-trying-to-upload-images-using-carrierwave/54116360#54116360", "title": "Rails Roolback Transaction When trying to upload images using carrierwave", "body": "<p>Maybe you can add the initializer that I pointed out here  <a href=\"https://stackoverflow.com/questions/54056424/rails-5-carrierwave-gem-works-in-production-but-not-in-development/54056572#54056572\">Rails 5 CarrierWave Gem Works in Production But Not In Development</a> to be able to look the errors of carrierWave.</p>\n"}], "owner": {"reputation": 9, "user_id": 10367830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f13cba2c103780e6191b914aa486ce6?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep Rao Rayapudi", "link": "https://stackoverflow.com/users/10367830/pradeep-rao-rayapudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547059035, "creation_date": 1547056637, "question_id": 54115865, "link": "https://stackoverflow.com/questions/54115865/rails-roolback-transaction-when-trying-to-upload-images-using-carrierwave", "title": "Rails Roolback Transaction When trying to upload images using carrierwave", "body": "<p>I am trying to upload images (file) using <strong>carrierwave</strong> to <strong>cloudinary</strong> for selecting the images using <strong>dropzone_js</strong> gem rails. tried many times it seems everything is fine but file is not uploading to cloudinary but the associated post is posting fine.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8qMpW.png\" rel=\"nofollow noreferrer\">Logs</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/GQ3sN.png\" rel=\"nofollow noreferrer\">Controller file</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/m1Ztv.png\" rel=\"nofollow noreferrer\">Views file</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1547054071, "post_id": 54115060, "comment_id": 95063217, "body": "where does it fail or throw error ? Post what you got."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1547054090, "post_id": 54115060, "comment_id": 95063226, "body": "Can you say more about &quot;It&#39;s not working&quot;? Are you receiving errors? It might be helpful if you include in your question your console output for a transaction that is &quot;not working&quot;."}, {"owner": {"reputation": 27, "user_id": 10735674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/414ca17d7299a6b1d18f728fcc74a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "Djjhjuser10735674", "link": "https://stackoverflow.com/users/10735674/djjhjuser10735674"}, "edited": false, "score": 0, "creation_date": 1547054479, "post_id": 54115060, "comment_id": 95063421, "body": "the error i am getting is &quot;ActionView::Template::Error (undefined method `id&#39; for nil:NilClass):&quot;"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1547054822, "post_id": 54115060, "comment_id": 95063603, "body": "I suppose <code>@patient</code> is nil (when you&#39;re doing <code>link_to patient_add_provider_path</code>) which I guess means <code>@patient = current_user.current_role.roleable</code> is returning a nil value."}, {"owner": {"reputation": 27, "user_id": 10735674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/414ca17d7299a6b1d18f728fcc74a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "Djjhjuser10735674", "link": "https://stackoverflow.com/users/10735674/djjhjuser10735674"}, "edited": false, "score": 0, "creation_date": 1547056511, "post_id": 54115060, "comment_id": 95064401, "body": "yea i just figured that. But can&#39;t find why it&#39;s coming back nil"}], "owner": {"reputation": 27, "user_id": 10735674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/414ca17d7299a6b1d18f728fcc74a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "Djjhjuser10735674", "link": "https://stackoverflow.com/users/10735674/djjhjuser10735674"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547054668, "creation_date": 1547053310, "last_edit_date": 1547054668, "question_id": 54115060, "link": "https://stackoverflow.com/questions/54115060/adding-provider-to-patient", "title": "adding provider to patient", "body": "<p>I am trying to add providers to patients list. For example patients can have many providers. It's not working. My code may be wrong but any help will be appreciated.</p>\n\n<pre><code>&lt;% @providers.each do |provider| %&gt;\n        &lt;div class=\"item\" data-email=\"&lt;%=provider.role.user.email%&gt;\" data-name=\"&lt;%=provider.role.user.first_name%&gt; &lt;%=provider.role.user.last_name%&gt;\"&gt;\n            &lt;div class=\"d-inline-block\"&gt;\n                &lt;p class=\"name\"&gt;&lt;%= provider.role.user.first_name %&gt;&lt;%= \" \" + provider.role.user.middle_name if provider.role.user.middle_name %&gt;&lt;%= \" \" +  provider.role.user.last_name %&gt;&lt;/p&gt;\n                &lt;p class=\"name\"&gt;&lt;span&gt;Professional Title: &lt;/span&gt;&lt;%= provider.professional_title if provider.professional_title %&gt;&lt;/p&gt;\n            &lt;/div&gt;\n\n            &lt;div  class=\"d-inline-block float-right\"&gt;\n                &lt;%= link_to patient_add_provider_path(@patient, provider_join: @patient.id, provider_id: provider.id), method: :post, :data =&gt; {:confirm =&gt; 'Are you sure you want to add this site?'} do %&gt; ####THIS IS WHAT CURRENTLY IS NOT WORKING(link_to)\n             &lt;button class=\"btn-submit\"&gt;Add&lt;/button&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;&lt;!--item--&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here is a the method i have inside my patient_controller.rb file </p>\n\n<pre><code>def add_provider\n        flash[:modal]\n        @patient = current_user.current_role.roleable\n        @provider = Provider.find(params[:provider_id])\n        @provider_join = Provider_join.where(\n            :provider_id =&gt; params[:provider_id]).first_or_create do |provider_join| \n            provider_join.provider = params[:provider_id]\n        end\n        @provider_join.soft_delete = false\n        if @provider_join.save\n            flash[:success] = \"You have successfully added a physician to your list\"\n            redirect_back(fallback_location: root_path)\n        else\n        end\n    end\n</code></pre>\n\n<p>and here is my schema file</p>\n\n<pre><code>create_table \"provider_joins\", id: false, force: :cascade do |t|\n    t.bigint \"provider_id\"\n    t.bigint \"patient_id\"\n    t.boolean \"soft_delete\", default: false\n    t.index [\"patient_id\"], name: \"index_provider_joins_on_patient_id\"\n    t.index [\"provider_id\"], name: \"index_provider_joins_on_provider_id\"\n  end\n</code></pre>\n\n<p>and finally but not least here is the error i am receiving in the console</p>\n\n<pre><code>ActionView::Template::Error (undefined method `id' for nil:NilClass):\n     6:                         &lt;/div&gt;\n     7:\n     8:                         &lt;div  class=\"d-inline-block float-right\"&gt;\n     9:                                 &lt;%= link_to patient_add_provider_path(@patient, provider_join: @patient.id, provider_id: provider.id), method: :post, :data =&gt; {:confirm =&gt; 'Are you sure you want to add this Physician?'} do %&gt;\n    10:                          &lt;button class=\"btn-submit\"&gt;Add&lt;/button&gt;\n    11:                          &lt;% end %&gt;\n    12:\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails", "shoulda"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1547057790, "post_id": 54114452, "comment_id": 95064917, "body": "do the other optional specs pass?"}, {"owner": {"reputation": 51, "user_id": 8735863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LXO45V8LDiQ/AAAAAAAAAAI/AAAAAAAAADA/hAtnVspkzyE/photo.jpg?sz=128", "display_name": "meerkat", "link": "https://stackoverflow.com/users/8735863/meerkat"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1547105515, "post_id": 54114452, "comment_id": 95078984, "body": "@Anthony Yes it does that&#39;s why its confusing to me"}], "answers": [{"comments": [{"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 1, "creation_date": 1547070184, "post_id": 54115889, "comment_id": 95070131, "body": "Are you sure? I don&#39;t think <code>optional</code> method accepts any arguments either on master and 4.0.0 <a href=\"https://github.com/thoughtbot/shoulda-matchers/blob/master/lib/shoulda/matchers/active_record/association_matcher.rb#L1070\" rel=\"nofollow noreferrer\">github.com/thoughtbot/shoulda-matchers/blob/master/lib/shoul&zwnj;&#8203;da/&hellip;</a>  <a href=\"https://github.com/thoughtbot/shoulda-matchers/blob/v4.0.0.rc1/lib/shoulda/matchers/active_record/association_matcher.rb#L1070\" rel=\"nofollow noreferrer\">github.com/thoughtbot/shoulda-matchers/blob/v4.0.0.rc1/lib/&hellip;</a>"}, {"owner": {"reputation": 539, "user_id": 9006638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kV5us.jpg?s=128&g=1", "display_name": "Michael Arkhipov", "link": "https://stackoverflow.com/users/9006638/michael-arkhipov"}, "reply_to_user": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1547084396, "post_id": 54115889, "comment_id": 95073881, "body": "@jedi As you can see, I quoted the creator of the shoulda-matchers (@mcmire). And yes. I&#39;m sure those words correct. P.s. v4.0.0.rc1"}, {"owner": {"reputation": 51, "user_id": 8735863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LXO45V8LDiQ/AAAAAAAAAAI/AAAAAAAAADA/hAtnVspkzyE/photo.jpg?sz=128", "display_name": "meerkat", "link": "https://stackoverflow.com/users/8735863/meerkat"}, "edited": false, "score": 0, "creation_date": 1547105119, "post_id": 54115889, "comment_id": 95078813, "body": "@MichaelArkhipov I have the pre - release version but its not working on that. Also the belong_to round and belong_to company tests are running fine so I don&#39;t know whats wrong with the first one"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 1, "creation_date": 1563957930, "post_id": 54115889, "comment_id": 100869071, "body": "<code>optional</code> does not take an argument (anymore?) <a href=\"https://github.com/thoughtbot/shoulda-matchers/blob/master/lib/shoulda/matchers/active_record/association_matcher.rb#L304\" rel=\"nofollow noreferrer\">github.com/thoughtbot/shoulda-matchers/blob/master/lib/shoul&zwnj;&#8203;da/&hellip;</a>  so it is just <code>should belong_to(:something).optional</code>"}], "tags": [], "owner": {"reputation": 539, "user_id": 9006638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kV5us.jpg?s=128&g=1", "display_name": "Michael Arkhipov", "link": "https://stackoverflow.com/users/9006638/michael-arkhipov"}, "is_accepted": true, "score": 6, "last_activity_date": 1563989953, "last_edit_date": 1563989953, "creation_date": 1547056780, "answer_id": 54115889, "question_id": 54114452, "link": "https://stackoverflow.com/questions/54114452/shoulda-matchers-belong-to-optional-test/54115889#54115889", "title": "Shoulda-matchers belong_to optional test", "body": "<p>For the first, you should read <a href=\"https://github.com/thoughtbot/shoulda-matchers/issues/870\" rel=\"noreferrer\">this</a> conversation.</p>\n\n<blockquote>\n  <p><strong>@mcmire</strong> We have a pre-release version out now! Try v4.0.0.rc1 to get optional.</p>\n</blockquote>\n\n<p>And then, the expected code should look like this:</p>\n\n<pre><code>RSpec.describe Certificate, type: :model do\n  it { should belong_to(:user) } \n  it { should belong_to(:share_class).optional } \n  it { should belong_to(:round).optional } \n  it { should belong_to(:company).optional } \n  it { should have_many(:approvals) } \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7453, "user_id": 3563993, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6e213cbcdd4a7b892589300ac92a49ab?s=128&d=identicon&r=PG", "display_name": "shilovk", "link": "https://stackoverflow.com/users/3563993/shilovk"}, "is_accepted": false, "score": 1, "last_activity_date": 1587769491, "creation_date": 1587769491, "answer_id": 61418717, "question_id": 54114452, "link": "https://stackoverflow.com/questions/54114452/shoulda-matchers-belong-to-optional-test/61418717#61418717", "title": "Shoulda-matchers belong_to optional test", "body": "<pre><code>class Person &lt; ActiveRecord::Base\n  belongs_to :organization, optional: true\nend\n\n# RSpec\ndescribe Person\n  it { should belong_to(:organization).optional }\nend\n\n# Minitest (Shoulda)\nclass PersonTest &lt; ActiveSupport::TestCase\n  should belong_to(:organization).optional\nend\n</code></pre>\n\n<p><kbd><a href=\"https://www.rubydoc.info/github/thoughtbot/shoulda-matchers/Shoulda%2FMatchers%2FActiveRecord:belong_to\" rel=\"nofollow noreferrer\">Documentation</a></kbd></p>\n"}], "owner": {"reputation": 51, "user_id": 8735863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LXO45V8LDiQ/AAAAAAAAAAI/AAAAAAAAADA/hAtnVspkzyE/photo.jpg?sz=128", "display_name": "meerkat", "link": "https://stackoverflow.com/users/8735863/meerkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3787, "favorite_count": 0, "accepted_answer_id": 54115889, "answer_count": 2, "score": 3, "last_activity_date": 1587769491, "creation_date": 1547051213, "question_id": 54114452, "link": "https://stackoverflow.com/questions/54114452/shoulda-matchers-belong-to-optional-test", "title": "Shoulda-matchers belong_to optional test", "body": "<p>I have a model </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Certificate &lt; ApplicationRecord\n  notification_object\n  belongs_to :user\n  belongs_to :share_class, optional: true\n  belongs_to :round, optional: true\n  belongs_to :company, optional: true\n  has_many :approvals, as: :votable\nend\n</code></pre>\n\n<p>The spec for this model looks like this</p>\n\n<p>require 'rails_helper'</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>RSpec.describe Certificate, type: :model do\n  it { should belong_to(:user) } \n  it { should belong_to(:share_class).optional } \n  it { should belong_to(:round).optional } \n  it { should belong_to(:company).optional } \n  it { should have_many(:approvals) } \nend\n</code></pre>\n\n<p>But when I run this spec I get this error</p>\n\n<p>1) Certificate is expected to belong to share_class optional: true</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>     Failure/Error: it { should belong_to(:share_class).optional }\n       Expected Certificate to have a belongs_to association called share_class (the association should have been defined with`optional: true`, but was not)\n     # ./spec/models/certificate_spec.rb:5:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>I do not know why I'm getting this error.</p>\n"}, {"tags": ["ruby", "iframe", "cucumber", "watir", "page-object-gem"], "comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1547045705, "post_id": 54112627, "comment_id": 95057955, "body": "The convention to treat iframes like this in PO gem really doesn&#39;t make sense since watir does all of this automatically. Please turn on the selenium logger and re-run so I can see what it&#39;s trying to locate. Selenium::WebDriver.logger.level = :info"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1547046602, "post_id": 54112627, "comment_id": 95058555, "body": "What are the ids of the iframes? There seems to be a mismatch between the HTML/error and the page-object code provided. Your page-object code worked for me as long as the iframe ids were correct. Note that you probably want to use <code>text_field</code> instead of <code>element</code> so that you get the right getter/setter methods."}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1547047659, "post_id": 54112627, "comment_id": 95059203, "body": "@Justin Ko: thanky you for your hint with &quot;text_field&quot;. Unfortunately the same error message occured ...  The id&#39;s are: id1: &lt;&lt;iframe_id&gt;&gt; id2: &lt;&lt;iframe2_id&gt;&gt; Of course I used them correctly but just did not replaced them in the code fractal below ..."}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1547047731, "post_id": 54112627, "comment_id": 95059248, "body": "@titusfortner: where can I sent this?  (sorry, I am new to ruby, cucumber, po, ...)"}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1547048082, "post_id": 54112627, "comment_id": 95059473, "body": "@titusfortner: We are not using Selenium, but Watir, PageObject etc... and log is set like this (before I posted this question here):` @logger = Logging.logger(STDOUT) @logger.level = :info  Watir.logger.level = :debug`"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1547048219, "post_id": 54112627, "comment_id": 95059541, "body": "@Cybersphinx, Watir uses Selenium under the covers. You can put the logger line above the code that is failing to execute. Also, what version of Watir and Page-Object are you using? I seem to be missing something as I cannot get your exact error message."}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "edited": false, "score": 0, "creation_date": 1547048588, "post_id": 54112627, "comment_id": 95059798, "body": "Watir logger says: 2019-01-09 16:40:18 INFO Watir &lt;- <code>Verifying precondition #&lt;Watir::TextField: located: false; {:id=&gt;&quot;YPWNwIjOrg&quot;, :tag_name=&gt;&quot;iframe&quot;} --&gt; {:id=&gt;&quot;spreedly-number-frame-9437&quot;, :tag_name=&gt;&quot;iframe&quot;} --&gt; {:id=&gt;&quot;card_number&quot;, :tag_name=&gt;&quot;input&quot;}&gt;#wait_for_writable for send_keys</code> 2019-01-09 16:40:18 DEBUG Watir Converted {:id=&gt;&quot;YPWNwIjOrg&quot;, :tag_name=&gt;&quot;iframe&quot;} to [:xpath, &quot;.//*[local-name()=&#39;iframe&#39;][@id=&#39;YPWNwIjOrg&#39;]&quot;]"}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "edited": false, "score": 0, "creation_date": 1547048652, "post_id": 54112627, "comment_id": 95059851, "body": "2019-01-09 16:40:48 INFO Watir &lt;- <code>Completed #&lt;Watir::TextField: located: false; {:id=&gt;&quot;YPWNwIjOrg&quot;, :tag_name=&gt;&quot;iframe&quot;} --&gt; {:id=&gt;&quot;spreedly-number-frame-9437&quot;, :tag_name=&gt;&quot;iframe&quot;} --&gt; {:id=&gt;&quot;card_number&quot;, :tag_name=&gt;&quot;input&quot;}&gt;#send_keys</code>"}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1547049244, "post_id": 54112627, "comment_id": 95060251, "body": "@titusfortner: how can I check versions of Watir and PageObject?"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1547050505, "post_id": 54112627, "comment_id": 95061065, "body": "Look for the gemfile.lock file to see what versions are being used. Watir logs provide info about building the selector and some code flow, what I&#39;d really like to see are the commands being sent to the driver, which requires the selenium logging to be turned on. You can paste the code into a gist.github.com and reply with the link."}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1547134455, "post_id": 54112627, "comment_id": 95095287, "body": "@titusfortner: Versions are: watir (6.14.0, 6.12.0, 6.11.0) watir-webdriver (0.9.9) webdrivers (3.4.1, 3.3.2) page-object (2.2.4) page_navigation (0.10)"}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "edited": false, "score": 0, "creation_date": 1547134884, "post_id": 54112627, "comment_id": 95095557, "body": "Selenium output: 2019-01-10 16:39:46 INFO Selenium -&gt; POST session/a6bb2dc17962748306de2be601e8d87d/element 2019-01-10 16:39:46 INFO Selenium    &gt;&gt;&gt; <a href=\"http://127.0.0.1:9515/session/a6bb2dc17962748306de2be601e8d87d/element\" rel=\"nofollow noreferrer\">127.0.0.1:9515/session/a6bb2dc17962748306de2be601e8d87d/elem&zwnj;&#8203;ent</a> | {&quot;using&quot;:&quot;xpath&quot;,&quot;value&quot;:&quot;.//*[local-name()=&#39;iframe&#39;][@id=&#39;Y&zwnj;&#8203;PWNwIjOrg&#39;]&quot;}"}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "edited": false, "score": 0, "creation_date": 1547134888, "post_id": 54112627, "comment_id": 95095559, "body": "2019-01-10 16:39:46 INFO Selenium &lt;- {&quot;sessionId&quot;:&quot;a6bb2dc17962748306de2be601e8d87d&quot;,&quot;status&quot;:7,&quot;&zwnj;&#8203;value&quot;:{&quot;message&quot;:&quot;n&zwnj;&#8203;o such element: Unable to locate element: {\\&quot;method\\&quot;:\\&quot;xpath\\&quot;,\\&quot;selector\\&quot;:\\&quot;.//*[local-name()=&#39;ifra&zwnj;&#8203;me&#39;][@id=&#39;YPWNwIjOrg&zwnj;&#8203;&#39;]\\&quot;}\\n  (Session info: chrome=71.0.3578.98)\\n  (Driver info: chromedriver=2.41.578706 (5f725d1b4f0a4acbf5259df887244095596231db),platform=Mac OS X 10.14.2 x86_64)&quot;}}"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1547140731, "post_id": 54112627, "comment_id": 95099068, "body": "I don&#39;t think Page-Object waits properly here, so maybe double-check it isn&#39;t a timing issue - eg put a <code>sleep(30)</code> before trying to access the frame. Maybe also check to see what iframes do exist - eg do a <code>p browser.iframes.map(&amp;:id)</code>."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1547141903, "post_id": 54112627, "comment_id": 95099665, "body": "Regarding versions, please remove any watir-webdriver references from your gemfile, and ideally update to using latest watir (right now: 6.16.5). If you create a gist with all of the information, and then copy the gist link and paste it here. Pasting code in comments is difficult to read."}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1547143540, "post_id": 54112627, "comment_id": 95100491, "body": "@titusfortner: What exactly do I need to paste into gist? Selenium log output or the gem versions or both?"}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1547143678, "post_id": 54112627, "comment_id": 95100556, "body": "@JustinKo: Good hint (wait()) - I had it (7 seconds waiting). I checked, the iframe and element were present before the script went further, but the result is that what I reported unfortunately. I do not know how to handle with p browser.iframes.map(&amp;:id) Is that a line I can add before I try to access the element in my script?"}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1547143723, "post_id": 54112627, "comment_id": 95100578, "body": "@titusfortner &amp; JustinKo Thank you you guys for helping me!!!"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1547144496, "post_id": 54112627, "comment_id": 95100956, "body": "<code>p browser.iframes.map(&amp;:id)</code> will output the id attribute of each iframe on the page. Run it before the line you are having problems with. Your error message said the iframe couldn&#39;t be found, which makes me curious what does it see."}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1547191581, "post_id": 54112627, "comment_id": 95115156, "body": "@JustinKo: Thank you! You were right! The ids change all time. So I need to address them in a different way. Is it possible with &quot;index&quot;? There are 2 iframes nested. Can I use my code above (someone said this is not a popper way to address iframe elements ...)?"}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "edited": false, "score": 1, "creation_date": 1547195584, "post_id": 54112627, "comment_id": 95116750, "body": "Thank you very much! I found the solution: browser.iframe(:index =&gt; 0).iframe(:index =&gt; 0).text_field(:id =&gt; &quot;anything&quot;).send_keys &quot;Content&quot; worked!!! This did not work: browser.iframe(:index =&gt; 1).text_field(:id =&gt; &quot;card_number&quot;).send_keys"}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1547195607, "post_id": 54112627, "comment_id": 95116760, "body": "@JustinKo: Thank you very  much for your help!!"}, {"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1547195617, "post_id": 54112627, "comment_id": 95116764, "body": "@titusfortner: Thank you very  much for your help!!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "edited": false, "score": 0, "creation_date": 1551775707, "post_id": 54354235, "comment_id": 96753171, "body": "Unfortunately this does not work with &quot;element.&quot; in front, you need to use &quot;browser.&quot; instead as I mentioned before already."}], "tags": [], "owner": {"reputation": 21, "user_id": 3602380, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001894911532/picture?type=large", "display_name": "Vinicius Cosmi", "link": "https://stackoverflow.com/users/3602380/vinicius-cosmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1548359074, "creation_date": 1548359074, "answer_id": 54354235, "question_id": 54112627, "link": "https://stackoverflow.com/questions/54112627/cucumber-ruby-pageobject-access-input-form-element-in-an-iframe-iframe-wit/54354235#54354235", "title": "(Cucumber/ ruby/ PageObject) Access input (form) element in an iframe/iframe with PageObject", "body": "<p>You can use\nelement.iframe(id: \"idFrame\").iframe(id: \"idFrame2\").input(id: \"card_number\")</p>\n"}], "owner": {"reputation": 1, "user_id": 10890314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4HXYP.png?s=128&g=1", "display_name": "Cybersphinx", "link": "https://stackoverflow.com/users/10890314/cybersphinx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548359074, "creation_date": 1547044999, "last_edit_date": 1547055755, "question_id": 54112627, "link": "https://stackoverflow.com/questions/54112627/cucumber-ruby-pageobject-access-input-form-element-in-an-iframe-iframe-wit", "title": "(Cucumber/ ruby/ PageObject) Access input (form) element in an iframe/iframe with PageObject", "body": "<p>I need to access this element:</p>\n\n<pre><code>&lt;input type=\"tel\" pattern=\"[0-9 ]*\" name=\"card_number\" id=\"card_number\" autocomplete=\"off\" size=\"22\" class=\"input-outline-none\"&gt;\n</code></pre>\n\n<p>It is placed in a second iframe like this (I put it simple not to have it too complicated):</p>\n\n<pre><code>&lt;iframe scrolling=\"no\" data-aura-rendered-by=\"203:0\" id=\"&lt;&lt;iframe_id&gt;&gt;\" src=\"&lt;&lt;iframe_url&gt;&gt;\" width=\"100%\" height=\"95px\" frameborder=\"0\"&gt;\n#document\n &lt;!DOCTYPE html PUBLIC .....&gt;\n(...)\n&lt;iframe scrolling=\"no\" id=\"&lt;&lt;iframe2_id&gt;&gt;\" name=\"&lt;&lt;iframe2_name&gt;&gt;\" src=\"&lt;&lt;iframe2_url\"\" width=\"100%\" height=\"100%\" frameborder=\"0\"&gt;\n#document\n &lt;!DOCTYPE html PUBLIC .....&gt;\n(...)\n&lt;form accept-charset=\"UTF-8\" action=\"javascript:void(0);\" id=\"number-form\" onsubmit=\"return false;\"&gt;\n    &lt;label for=\"card_number\" class=\"visuallyhidden\" id=\"number_label\"&gt;Card Number&lt;/label&gt;\n    &lt;input type=\"tel\" pattern=\"[0-9 ]*\" name=\"card_number\" id=\"card_number\" autocomplete=\"off\" size=\"22\" class=\"input-outline-none\"&gt;\n    (...)\n  &lt;/form&gt;\n(...)\n&lt;/iframe&gt;\n\n&lt;/iframe&gt;\n</code></pre>\n\n<p>I tried to access it like this (using Ruby/ cucumber/ waitr/ PageObject):</p>\n\n<pre><code> in_iframe(:id =&gt; 'YPWNwIjOrg') do |outer_iframe|\n    in_iframe({:id =&gt; 'spreedly-number-frame-9437'}, outer_iframe) do |inner_iframe|\n      element(:cc_num, :id =&gt; \"card_number\", :frame =&gt; inner_iframe)\n    end\n  end\n</code></pre>\n\n<p>I get this error message:</p>\n\n<pre><code>with exception: timed out after 30 seconds, waiting for #&lt;Watir::IFrame: located: false; {:id=&gt;\"&lt;&lt;iframe_id&gt;&gt;\", :tag_name=&gt;\"iframe\"}&gt; to be located\nBrowser driver used: #&lt;Selenium::WebDriver::Chrome::Driver:0x00007fc1e33d7910&gt;\n</code></pre>\n\n<p>How to access it correctly?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1547045451, "post_id": 54112020, "comment_id": 95057765, "body": "is my answer good with your requirements ? if not, please complete your question"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1547047429, "post_id": 54112020, "comment_id": 95059061, "body": "&quot;Am I taking this the wrong way?&quot; - yes most likely. The idea is that an engine should encapsulate a reusable piece of functionality. While an engine may rely on the parent app for the actual implementation (like Devise for example) it should not generally have a  hard dependency on the parent application as that would make it really hard to test the engine in isolation or reuse it. This makes the whole process of extracting the functionality pointless."}, {"owner": {"reputation": 566, "user_id": 5883927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d707215203e361e3598351571149ff4d?s=128&d=identicon&r=PG", "display_name": "jean-baptiste", "link": "https://stackoverflow.com/users/5883927/jean-baptiste"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1547052373, "post_id": 54112020, "comment_id": 95062224, "body": "@max thanks for the feedback, I do agree that an engine should not have dependencies on the host app. This is why I chose to decorate the helper on the main app side, which is not a &quot;hard dependency&quot; I believe, more of a dependency injection provided by the main app to customize the engine&#39;s helper. The purpose here is to use the Concern methods do_this and do_that in the engine&#39;s view, as it shares a common partial with the main app (typically a top nav pane with links)."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1547052604, "post_id": 54112020, "comment_id": 95062357, "body": "So then basically what you really want to do is declare a module in your main app that extends the module from the engine and not vice versa. Note that you want to use extend and not include when you are adding methods to a module."}, {"owner": {"reputation": 566, "user_id": 5883927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d707215203e361e3598351571149ff4d?s=128&d=identicon&r=PG", "display_name": "jean-baptiste", "link": "https://stackoverflow.com/users/5883927/jean-baptiste"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1547053608, "post_id": 54112020, "comment_id": 95062954, "body": "@max I edited the question to clarify as I realize that my use of the decorator pattern was unclear. I did declare the decorated helper on the main app side, and methods declared directly there are available in the engine. What doesn&#39;t work for me is when I try to include an ActiveSupport::Concern module (also from the main app) in that decorated helper."}], "answers": [{"comments": [{"owner": {"reputation": 566, "user_id": 5883927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d707215203e361e3598351571149ff4d?s=128&d=identicon&r=PG", "display_name": "jean-baptiste", "link": "https://stackoverflow.com/users/5883927/jean-baptiste"}, "edited": false, "score": 1, "creation_date": 1547053000, "post_id": 54112533, "comment_id": 95062581, "body": "Hi @Xero, thanks for your answer. Unfortunately using a class is not an option here, since Rails requires helpers to be declared as modules in order to include them in the views context."}], "tags": [], "owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "is_accepted": false, "score": 0, "last_activity_date": 1547044706, "last_edit_date": 1592644375, "creation_date": 1547044706, "answer_id": 54112533, "question_id": 54112020, "link": "https://stackoverflow.com/questions/54112020/decorate-a-rails-engines-helper-to-include-a-concern-from-the-main-app/54112533#54112533", "title": "Decorate a Rails engine&#39;s helper to include a concern from the main app", "body": "<p>I renplaced MyHelper from module to class</p>\n<pre><code>module MyConcern\n  extend ActiveSupport::Concern\n\n  def do_this\n    &quot;do this&quot;\n  end\n\n  def do_that\n    &quot;do that&quot;\n  end\nend\n\nmodule MyEngine\n  class MyHelper\n    include ::MyConcern\n\n    def do_stuff\n      &quot;do stuff&quot;\n    end\n  end\nend\n</code></pre>\n<p>When calling :</p>\n<pre><code>MyEngine::MyHelper.new.do_stuff\nMyEngine::MyHelper.new.do_this\nMyEngine::MyHelper.new.do_that\n</code></pre>\n<p>The result will be :</p>\n<blockquote>\n<p>do stuff</p>\n<p>do this</p>\n<p>do that</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 566, "user_id": 5883927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d707215203e361e3598351571149ff4d?s=128&d=identicon&r=PG", "display_name": "jean-baptiste", "link": "https://stackoverflow.com/users/5883927/jean-baptiste"}, "edited": false, "score": 0, "creation_date": 1547054893, "post_id": 54115144, "comment_id": 95063642, "body": "Thanks for the detailed explanation. It is getting clearer, however it is not quite the same use case : my ActiveSupport::Concern module provides methods to generate navigation links. Those links are rendered in the &quot;top nav partial&quot;, both in the main app and in the engine views (the views know which partial to use with a config setting, as suggested). When I extend the engine helper and explicitly add methods to it, it does work. However, if I try to include another module (the nav links already declared in a concern), the methods are unavailable to the engine."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1547054104, "last_edit_date": 1547054104, "creation_date": 1547053622, "answer_id": 54115144, "question_id": 54112020, "link": "https://stackoverflow.com/questions/54112020/decorate-a-rails-engines-helper-to-include-a-concern-from-the-main-app/54115144#54115144", "title": "Decorate a Rails engine&#39;s helper to include a concern from the main app", "body": "<p>I think you may be reasoning about this backwards.</p>\n\n<p>If your engine provides:</p>\n\n<pre><code>module MyEngine\n  module MyHelper\n    def foo\n    end\n  end\nend\n</code></pre>\n\n<p>You can extend the method (you could call it decorate but i'm not sure if this is technically the decorator pattern) in your main app:</p>\n\n<pre><code>module MainApp\n  module MyHelper\n    extend ::MyEngine::MyHelper\n    def foo\n      super\n      do_something_else\n    end\n  end\nend\n</code></pre>\n\n<p>When using the module-mixin pattern (which is what ActiveSupport::Concern does) you extend modules with modules and include modules in classes. </p>\n\n<p>If you engine and main app \"share a partial\" - it should just be placed in the engine as Rails will first look for the view when rendering in the app/views directory of the application before looking for it the mounted engines. </p>\n\n<p>The main app can thus always override the functionality provided by the engine while the inverse is not true.</p>\n\n<p>If you want to make a method provided by an engine configurable a better idea is to use a Rails configuration setting (or a seperate module configuration) or just method arguments rather than some crazy circular dependency circus.</p>\n"}, {"tags": [], "owner": {"reputation": 566, "user_id": 5883927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d707215203e361e3598351571149ff4d?s=128&d=identicon&r=PG", "display_name": "jean-baptiste", "link": "https://stackoverflow.com/users/5883927/jean-baptiste"}, "is_accepted": true, "score": 0, "last_activity_date": 1599659761, "creation_date": 1599659761, "answer_id": 63813224, "question_id": 54112020, "link": "https://stackoverflow.com/questions/54112020/decorate-a-rails-engines-helper-to-include-a-concern-from-the-main-app/63813224#63813224", "title": "Decorate a Rails engine&#39;s helper to include a concern from the main app", "body": "<p>So I finally found a way to do this in a &quot;clean&quot; way, as mentioned in the following comment : <a href=\"https://groups.google.com/g/rubyonrails-core/c/PaABJDXnxyo/m/k-QUJEi9a9wJ\" rel=\"nofollow noreferrer\">https://groups.google.com/g/rubyonrails-core/c/PaABJDXnxyo/m/k-QUJEi9a9wJ</a></p>\n<p>The idea is to add an empty placeholder helper in the engine, for example :</p>\n<pre><code>module MyEngine\n  module ExtendableHelper\n  end\nend\n</code></pre>\n<p>And then override it in the main app, by adding methods or including concerns, other gems' helpers, etc...</p>\n<pre><code>module MyEngine\n  module ExtendableHelper\n    extend OtherGemFromMainApp::UsefulHelper\n    include MainAppConcern\n    \n    def other_useful_method\n      ...\n    end\n  end\nend\n</code></pre>\n<p>Thus the helper used by the engine is the one provided by the app, and the <em>UsefulHelper</em> methods can be called in the engine views.</p>\n"}], "owner": {"reputation": 566, "user_id": 5883927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d707215203e361e3598351571149ff4d?s=128&d=identicon&r=PG", "display_name": "jean-baptiste", "link": "https://stackoverflow.com/users/5883927/jean-baptiste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 63813224, "answer_count": 3, "score": 2, "last_activity_date": 1599659761, "creation_date": 1547042922, "last_edit_date": 1547053259, "question_id": 54112020, "link": "https://stackoverflow.com/questions/54112020/decorate-a-rails-engines-helper-to-include-a-concern-from-the-main-app", "title": "Decorate a Rails engine&#39;s helper to include a concern from the main app", "body": "<p>I would like to include an ActiveSupport::Concern from an app in an engine, by decorating one of the engine's helper modules.\nHere is the Helper from the engine:</p>\n\n<pre><code>module MyEngine\n  module MyHelper\n  end\nend\n</code></pre>\n\n<p>Here is the Concern from the main app :</p>\n\n<pre><code>module MyConcern\n  extend ActiveSupport::Concern\n\n  def do_this\n  end\n\n  def do_that\n  end\nend\n</code></pre>\n\n<p>Below is the decorated engine helper that needs to include the concern (for use in the engine views) - it is declared in the <strong>main app</strong>, using the decorator pattern described in the <a href=\"https://edgeguides.rubyonrails.org/engines.html#overriding-models-and-controllers\" rel=\"nofollow noreferrer\">Rails guides</a> :</p>\n\n<pre><code>module MyEngine\n  module MyHelper\n    include MyConcern\n\n    def do_stuff\n    end\n  end\nend\n</code></pre>\n\n<p>The decorated helper is properly loaded by the engine, but the engine views are only able to call \"do_stuff\". The methods from MyConcern are  unavailable, and I'm having a hard time figuring out why.\nI also tried to include the concern by embedding it in a MyEngine::MyHelper.module_eval call, but that didn't work either.</p>\n\n<p>Has anyone faced this kind of issue before ? Am I taking this the wrong way ?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "erb"], "answers": [{"comments": [{"owner": {"reputation": 2989, "user_id": 1009655, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/K3jdk.png?s=128&g=1", "display_name": "Frederik Spang", "link": "https://stackoverflow.com/users/1009655/frederik-spang"}, "edited": false, "score": 0, "creation_date": 1547044098, "post_id": 54111583, "comment_id": 95056819, "body": "For strings, using <code>&lt;%= @tag.inspect %&gt;</code> outputs <code>&quot;div&quot;</code> as well.. Although inspect will work for strings, integers and arrays, it will not work for Hashes. Although <code>.to_json</code> will in rails apps."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 2, "last_activity_date": 1547041554, "creation_date": 1547041554, "answer_id": 54111583, "question_id": 54111188, "link": "https://stackoverflow.com/questions/54111188/using-javascript-variables-to-store-ruby-output-from/54111583#54111583", "title": "Using Javascript variables to store Ruby Output from &lt;%= %&gt;", "body": "<p>If you have JS inside of ERB files, you need to ensure that the javacript code that is generated is correct.</p>\n\n<p>Let's assume that you have a string <code>\"div\"</code> stored in <code>@tag</code></p>\n\n<p>The first option:</p>\n\n<pre><code>tag_tracker = \"&lt;%= @tag %&gt;\";\nalert(tag_tracker);\n</code></pre>\n\n<p>will generate a correct JS with <code>div</code> wrapped in quotes.:</p>\n\n<pre><code>tag_tracker = \"div\";\nalert(tag_tracker);\n</code></pre>\n\n<p>The second one:</p>\n\n<pre><code>tag_tracker = &lt;%= @tag %&gt;;\nalert(tag_tracker);\n</code></pre>\n\n<p>will generate JS without quotes around the <code>div</code>:</p>\n\n<pre><code>tag_tracker = div;\nalert(tag_tracker);\n</code></pre>\n\n<p>and that is incorrect, because in this case <code>div</code> is interpreted as a variable, not as string.</p>\n"}], "owner": {"reputation": 45, "user_id": 10738860, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156709590752171/picture?type=large", "display_name": "Larry Law", "link": "https://stackoverflow.com/users/10738860/larry-law"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54111583, "answer_count": 1, "score": 1, "last_activity_date": 1547044466, "creation_date": 1547040227, "last_edit_date": 1547044466, "question_id": 54111188, "link": "https://stackoverflow.com/questions/54111188/using-javascript-variables-to-store-ruby-output-from", "title": "Using Javascript variables to store Ruby Output from &lt;%= %&gt;", "body": "<p><code>@tag</code> is a string.</p>\n\n<p>Why does this work:</p>\n\n<pre><code>tag_tracker = \"&lt;%= @tag %&gt;\";\nalert(tag_tracker);\n</code></pre>\n\n<p>But not this?</p>\n\n<pre><code>tag_tracker = &lt;%= @tag %&gt;; // Why is this not read as a string?\nalert(tag_tracker);\n</code></pre>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 4, "creation_date": 1547040002, "post_id": 54110986, "comment_id": 95054317, "body": "why don&#39;t you want to search via an <code>IN</code> clause? And <code>Band.joins(:genres).where(genres: { name: params[:q][:genrearray] })</code> does the same as your query, but is nicer"}, {"owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "edited": false, "score": 0, "creation_date": 1547040656, "post_id": 54110986, "comment_id": 95054734, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/28954500/activerecord-where-field-array-of-possible-values\">ActiveRecord where field = ? array of possible values</a>"}, {"owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "reply_to_user": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1547041460, "post_id": 54110986, "comment_id": 95055167, "body": "@davegson shouldn&#39;t that also work to search through the whole array? I have tried this also, but it works exactly the same as above, i.e. not giving me what I want. I understand it&#39;s tidier though!"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1547042133, "post_id": 54110986, "comment_id": 95055571, "body": "I would consider if using a bit of data normalization is a better solution. Create a table for genres and a select tag where the user can select genres. This will give you an array of ids instead and avoid a costly string comparison."}, {"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1547043001, "post_id": 54110986, "comment_id": 95056088, "body": "ok, you <i>do</i> want to use <code>IN</code> - I did not get that initially. The query I wrote does generate a <code>IN</code> query, given you pass it an array as a param. I assume the problem is there. What does <code>params[:q][:genrearray]</code> return?"}, {"owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "edited": false, "score": 0, "creation_date": 1547044224, "post_id": 54110986, "comment_id": 95056918, "body": "&#39;params[:q][:genrearray]&#39; returns an array in my console, for example [&quot;Rock&quot;, &quot;Blues&quot;]"}, {"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1547047780, "post_id": 54110986, "comment_id": 95059280, "body": "<code>Band.joins(:genres).where(genres: { name: params[:q][:genrearray] })</code> should work. What does <code>Band.joins(:genres).where(genres: { name: [&quot;Rock&quot;, &quot;Blues&quot;] }).to_sql</code> output?"}, {"owner": {"reputation": 3207, "user_id": 1127732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf50a128608800d7c43129ba90e7ae9?s=128&d=identicon&r=PG", "display_name": "khaled_gomaa", "link": "https://stackoverflow.com/users/1127732/khaled-gomaa"}, "edited": false, "score": 0, "creation_date": 1547049298, "post_id": 54110986, "comment_id": 95060299, "body": "actually put <code>Band.joins(:genres).where(&quot;genres.name IN (?)&quot;, params[:q][:genrearray]).to_sql</code> in the console please and past the output here as it doesn&#39;t look like a normal thing to me. In a new project, it doesn&#39;t do that for me."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1547063458, "post_id": 54110986, "comment_id": 95067324, "body": "I&#39;m a bit confused. You&#39;re doing <code>&quot;genres.name IN (?)&quot;</code> and it is giving you an ILIKE query or you <i>want</i> to do an ILIKE query against <code>&#39;%rock%&#39;</code> and <code>&#39;%blues%&#39;</code>?"}, {"owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "edited": false, "score": 0, "creation_date": 1547115207, "post_id": 54110986, "comment_id": 95083964, "body": "Inputting <code>Band.joins(:genres).where(&quot;genres.name IN (?)&quot;, params[:q][:genrearray]).to_sql</code> gives me <code>&quot;SELECT \\&quot;bands\\&quot;.* FROM \\&quot;bands\\&quot; INNER JOIN \\&quot;bands_genres\\&quot; ON \\&quot;bands_genres\\&quot;.\\&quot;band_id\\&quot; = \\&quot;bands\\&quot;.\\&quot;id\\&quot; INNER JOIN \\&quot;genres\\&quot; ON \\&quot;genres\\&quot;.\\&quot;id\\&quot; = \\&quot;bands_genres\\&quot;.\\&quot;genre_id\\&quot; WHERE (genres.name IN (&#39;Rock&#39;,&#39;Blues&#39;))&quot;</code> which is the query I want from the above code"}, {"owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1547115282, "post_id": 54110986, "comment_id": 95084007, "body": "@muistooshort I&#39;m doing <code>&quot;genres.name IN (?)&quot;</code> and it is giving me an ILIKE query, when I want an IN query"}, {"owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "reply_to_user": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 0, "creation_date": 1547115745, "post_id": 54110986, "comment_id": 95084304, "body": "@davegson <code>Band.joins(:genres).where(genres: { name: [&quot;Rock&quot;, &quot;Blues&quot;] }).to_sql</code> outputs <code>&quot;SELECT \\&quot;bands\\&quot;.* FROM \\&quot;bands\\&quot; INNER JOIN \\&quot;bands_genres\\&quot; ON \\&quot;bands_genres\\&quot;.\\&quot;band_id\\&quot; = \\&quot;bands\\&quot;.\\&quot;id\\&quot; INNER JOIN \\&quot;genres\\&quot; ON \\&quot;genres\\&quot;.\\&quot;id\\&quot; = \\&quot;bands_genres\\&quot;.\\&quot;genre_id\\&quot; WHERE \\&quot;bands\\&quot;.\\&quot;id\\&quot; IS NULL&quot;</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1547145055, "post_id": 54110986, "comment_id": 95101175, "body": "Sorry but I think you&#39;re looking at the wrong code and getting yourself confused. AR won&#39;t rewrite SQL like that. The <code>to_sql</code> output for <code>Band.joins(:genres).where(&quot;genres.name IN (?)&quot;, params[:q][:genrearray])</code> makes sense, the <code>to_sql</code> output for <code>Band.joins(:genres).where(genres: { name: [&quot;Rock&quot;, &quot;Blues&quot;] })</code> does not. Open a new Rails console, do <code>puts Band.joins(:genres).where(&quot;genres.name IN (?)&quot;, [&#39;Rock&#39;, &#39;Blues&#39;])</code> and <code>puts Band.joins(:genres).where(genres: { name: [&quot;Rock&quot;, &quot;Blues&quot;] }).to_sql</code> and paste it all into your question please."}, {"owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "edited": false, "score": 0, "creation_date": 1547203554, "post_id": 54110986, "comment_id": 95121039, "body": "Ok... I had inputted it while using the Pry console, my mistake. The first clause returns <code>SELECT &quot;bands&quot;.* FROM &quot;bands&quot; INNER JOIN &quot;bands_genres&quot; ON &quot;bands_genres&quot;.&quot;band_id&quot; = &quot;bands&quot;.&quot;id&quot; INNER JOIN &quot;genres&quot; ON &quot;genres&quot;.&quot;id&quot; = &quot;bands_genres&quot;.&quot;genre_id&quot; WHERE (genres.name IN (&#39;Rock&#39;,&#39;Blues&#39;))</code> then nil. The second clause returns <code>SELECT &quot;bands&quot;.* FROM &quot;bands&quot; INNER JOIN &quot;bands_genres&quot; ON &quot;bands_genres&quot;.&quot;band_id&quot; = &quot;bands&quot;.&quot;id&quot; INNER JOIN &quot;genres&quot; ON &quot;genres&quot;.&quot;id&quot; = &quot;bands_genres&quot;.&quot;genre_id&quot; WHERE &quot;bands&quot;.&quot;id&quot; IS NULL</code> then nil"}, {"owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "edited": false, "score": 0, "creation_date": 1547217498, "post_id": 54110986, "comment_id": 95128203, "body": "I have rewritten the code around my where clause with the help of a friend and I now have it working. I&#39;m not sure what the problem was, but it must&#39;ve been in the surrounding code as the clause is still the same but is working. Thanks for the help."}], "owner": {"reputation": 53, "user_id": 10528295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JsehK.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/10528295/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 318, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1547039582, "creation_date": 1547039582, "question_id": 54110986, "link": "https://stackoverflow.com/questions/54110986/how-to-select-in-array-of-strings-using-where-clause", "title": "How to select IN array of strings using where clause", "body": "<p>I am trying to search using an array of strings in my where clause.</p>\n\n<p>The array is generated by splitting the string contained within <em>param[:q][:genres_name_cont]</em> like this:</p>\n\n<pre><code>params[:q][:genrearray] = params[:q][:genres_name_cont].split\n</code></pre>\n\n<p>For example, if 'Rock Blues' is entered in the genre field, <em>params[:q][:genrearray] = [\"Rock\", \"Blues\"]</em>.</p>\n\n<p>Giving me the array which I then use in my where clause:</p>\n\n<pre><code>@bands = Band.joins(:genres).where(\"genres.name IN (?)\", params[:q][:genrearray])\n</code></pre>\n\n<p>However, the SQL generated doesn't seem to be searching through an array like I would expect:</p>\n\n<pre><code>SELECT DISTINCT \"bands\".* FROM \"bands\" LEFT OUTER JOIN \"bands_genres\" ON \"bands_genres\".\"band_id\" = \"bands\".\"id\" LEFT OUTER JOIN \"genres\" ON \"genres\".\"id\" = \"bands_genres\".\"genre_id\" WHERE \"genres\".\"name\" ILIKE '%Rock Blues%'\n</code></pre>\n\n<p>Rather than ' <em>ILIKE '%Rock Blues%'</em>' I would be expecting to see something like ' <em>IN ('Rock','Blues')</em>'</p>\n\n<p>Thanks in advance to anyone who can help.</p>\n"}, {"tags": ["ruby", "selenium-webdriver"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1547037349, "post_id": 54110216, "comment_id": 95052684, "body": "You want to continue to click the button one after another until you succeed to click a button without any error?"}, {"owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1547037571, "post_id": 54110216, "comment_id": 95052807, "body": "Yeah, thanks for translate what I&#39;m trying to ask @Rajagopalan hahahahahahaha"}, {"owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1547038484, "post_id": 54110216, "comment_id": 95053369, "body": "Added HTML for object."}, {"owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1547039228, "post_id": 54110216, "comment_id": 95053847, "body": "Thanks @Rajagopalan! Works perfectly! Did you know where I can find guides to learn those things? It&#39;s really hard to get more information about Ruby."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1547039364, "post_id": 54110216, "comment_id": 95053935, "body": "Learn WATIR here <a href=\"http://watir.com/guides/\" rel=\"nofollow noreferrer\">watir.com/guides</a> and for selenium Ruby Binding <a href=\"https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings</a> Remember the people who has Ruby Selenium Binding are the same people has the WATIR Binding, WATIR is the good wrapper around Ruby Selenium binding, there are plenty of other things which you might not know would be taken of by WATIR when you use WATIR."}], "answers": [{"tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": true, "score": 2, "last_activity_date": 1547038689, "creation_date": 1547038689, "answer_id": 54110726, "question_id": 54110216, "link": "https://stackoverflow.com/questions/54110216/continue-to-click-the-button-one-after-another-until-you-succeed-to-click-a-butt/54110726#54110726", "title": "Continue to click the button one after another until you succeed to click a button without any error (Ruby Selenium/Webdriver)", "body": "<pre><code>[\"04\", \"08\", \"10\", \"12\"].each do |num|\n  begin\n    browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl06_Detail10_ctl#{num}_btnCancelarOn\").click\n    el3 = browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl04_GECBtnExpandColumn\")\n    browser.action.double_click(el3).perform\n    break\n  rescue\n  end\nend\n</code></pre>\n\n<p>If you use WATIR which is wrapper around Ruby Selenium Binding then,</p>\n\n<pre><code>require 'watir'\nbrowser = Watir::Browser.new\n[\"04\", \"08\", \"10\", \"12\"].each do |num|\n  begin\n    browser.image(id: \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl06_Detail10_ctl#{num}_btnCancelarOn\").click\n    browser.image(id: \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl04_GECBtnExpandColumn\").double_click #hope this is image as well \n    break\n  rescue\n  end\nend\n</code></pre>\n\n<p>If you use watir, then waiting while finding an element is automatic, If you don't use watir, then you need to set implicit wait for find_element to wait for a given period of time.</p>\n"}], "owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54110726, "answer_count": 1, "score": -2, "last_activity_date": 1547042914, "creation_date": 1547036989, "last_edit_date": 1547042914, "question_id": 54110216, "link": "https://stackoverflow.com/questions/54110216/continue-to-click-the-button-one-after-another-until-you-succeed-to-click-a-butt", "title": "Continue to click the button one after another until you succeed to click a button without any error (Ruby Selenium/Webdriver)", "body": "<p>I was trying to make a click but only if the element is clickable, but I having a problem because the element clickable is random. The first button can be available on the first, second, third (he was clickable on third line as shown in <a href=\"https://imgur.com/uM7djir\" rel=\"nofollow noreferrer\">image</a>), and the fourth and fifth line can appear sometimes, so I need to Ruby try to click on <code>Cart_ctl00_ctl06_Detail10_ctl04_btnCancelOn</code>, if can't click pass to <code>Cart_ctl00_ctl06_Detail10_ctl08_btnCancelOn</code> and this goes on until the last line</p>\n\n<pre><code>...\nsleep 5\nwait = Selenium::WebDriver::Wait.new(:timeout =&gt; 40)\n    wait.until do\n    browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl06_Detail10_ctl04_btnCancelarOn\").click\n    el3 = browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl04_GECBtnExpandColumn\")\n    browser.action.double_click(el3).perform    \nrescue Selenium::WebDriver::Error::NoSuchElementError\n    browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl06_Detail10_ctl08_btnCancelarOn\").click\n    el5 = browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl04_GECBtnExpandColumn\")\n    browser.action.double_click(el5).perform\nrescue Selenium::WebDriver::Error::NoSuchElementError\n    browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl06_Detail10_ctl10_btnCancelarOn\").click\n    el6 = browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl04_GECBtnExpandColumn\")\n    browser.action.double_click(el6).perform\nrescue Selenium::WebDriver::Error::NoSuchElementError\n    browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl06_Detail10_ctl12_btnCancelarOn\").click\n    el7 = browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl04_GECBtnExpandColumn\")\n    browser.action.double_click(el7).perform\nrescue Selenium::WebDriver::Error::NoSuchElementError\nend\nbrowser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl06_Detail10_ctl06_btnCancelarOn\").click\nel8 = browser.find_element(:id, \"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl06_GECBtnExpandColumn\")\nbrowser.action.double_click(el8).perform        \n...\n</code></pre>\n\n<p>HTML from third line:</p>\n\n<pre><code>&lt;input type=\"image\" name=\"ctl00$ContentPlaceHolder1$ucCancBloqRem$gridListCartoes$ctl00$ctl06$Detail10$ctl08$btnCancelarOn\" id=\"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl06_Detail10_ctl08_btnCancelarOn\" title=\"Cancelar Cart\u00e3o\" src=\"../../../App_Themes/Con/Images/CancelarOn.png\" style=\"border-width:0px;\"&gt;\n</code></pre>\n\n<p>Error</p>\n\n<pre><code>C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/response.rb:69:in `assert_ok': unknown error: Element &lt;input type=\"image\" name=\"ctl00$ContentPlaceHolder1$ucCancBloqRem$gridListCartoes$ctl00$ctl06$Detail10$ctl08$btnCancelarOn\" id=\"ctl00_ContentPlaceHolder1_ucCancBloqRem_gridListCartoes_ctl00_ctl06_Detail10_ctl08_btnCancelarOn\" title=\"Cancelar Cart\u00e3o\" src=\"../../../App_Themes/Con/Images/CancelarOn.png\" style=\"border-width:0px;\"&gt; is not clickable at point (563, 150). Other element would receive the click: &lt;div class=\"raDiv\"&gt;...&lt;/div&gt; (Selenium::WebDriver::Error::UnknownError)\n  (Session info: chrome=71.0.3578.98)\n  (Driver info: chromedriver=2.44.609538 (b655c5a60b0b544917107a59d4153d4bf78e1b90),platform=Windows NT 6.1.7601 SP1 x86_64)\n    from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/response.rb:32:in `initialize'\n    from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/http/common.rb:84:in `new'\n    from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/http/common.rb:84:in `create_response'\n    from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/http/default.rb:104:in `request'\n    from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/http/common.rb:62:in `call'\n    from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/bridge.rb:166:in `execute'\n    from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/oss/bridge.rb:584:in `execute'\n    from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/oss/bridge.rb:326:in `click_element'\n    from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/element.rb:72:in `click'\n    from C:/test/driver_teste3.rb:48:in `rescue in block in &lt;main&gt;'\n    from C:/test/driver_teste3.rb:44:in `block in &lt;main&gt;'\n    from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/wait.rb:54:in `until'\n    from C:/test/driver_teste3.rb:43:in `&lt;main&gt;'\n[Finished in 55.0s with exit code 1]\n[shell_cmd: ruby \"C:\\test\\driver_teste3.rb\"]\n[dir: C:\\test]\n[path: C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\110\\Tools\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\120\\Tools\\Binn\\ManagementStudio\\;C:\\Program Files (x86)\\Microsoft SQL Server\\120\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\120\\Tools\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL Server\\120\\DTS\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\120\\DTS\\Binn\\;C:\\Ruby25-x64\\bin]\n</code></pre>\n"}, {"tags": ["ruby", "xml", "csv", "xml-parsing", "nokogiri"], "comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1547033694, "post_id": 54105157, "comment_id": 95050491, "body": "What have you tried? If you&#39;re running out of memory you might need SAX"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 9984998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28128a6ce51dc62002de13071aab7064?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Matuszewski", "link": "https://stackoverflow.com/users/9984998/jan-matuszewski"}, "is_accepted": false, "score": 1, "last_activity_date": 1547022265, "creation_date": 1547022265, "answer_id": 54105841, "question_id": 54105157, "link": "https://stackoverflow.com/questions/54105157/how-to-loop-xml-nodes-using-ruby/54105841#54105841", "title": "How to loop xml nodes using ruby", "body": "<p>Look at this question - <a href=\"https://stackoverflow.com/questions/11198239/parsing-xml-with-ruby\">Parsing XML with Ruby</a></p>\n\n<p>You may also use Ox gem which is not mentioned in above question - take a look here:\n<a href=\"https://github.com/ohler55/ox#parsing-xml-into-a-hash-fast\" rel=\"nofollow noreferrer\">https://github.com/ohler55/ox#parsing-xml-into-a-hash-fast</a></p>\n\n<p>Once you will have your <code>XML</code> converted to <code>Hash</code> you should easily convert it to <code>CSV</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 10069599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vPmWeMQ4jA0/AAAAAAAAAAI/AAAAAAAAAAc/5lJH-66sti8/photo.jpg?sz=128", "display_name": "TChaitanya Tatavolu", "link": "https://stackoverflow.com/users/10069599/tchaitanya-tatavolu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1547022691, "creation_date": 1547019135, "last_edit_date": 1547022691, "question_id": 54105157, "link": "https://stackoverflow.com/questions/54105157/how-to-loop-xml-nodes-using-ruby", "title": "How to loop xml nodes using ruby", "body": "<p>I have an XML file of 50MB. I need to parse it and convert to CSV.\nFollowing is the <code>XML File</code></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt;\n&lt;IAPDFirmStateReport GenOn=\"2019-01-02\"&gt;\n&lt;Firms&gt;\n&lt;Firm&gt;\n&lt;Info FirmCrdNb=\"146099\" BusNm=\"PRINCIPA FINANCIAL ADVISORS\" LegalNm=\"CHUNG, BUCK CHWEE\"/&gt;\n&lt;MainAddr Strt1=\"15111 WHITTIER BLVD\" Strt2=\"STE 420\" City=\"WHITTIER\" State=\"CA\" Cntry=\"United States\" PostlCd=\"90603\" PhNb=\"562-945-7888\" FaxNb=\"562-968-1885\"/&gt;\n&lt;MailingAddr/&gt;\n&lt;StateRgstn&gt;\n&lt;Rgltrs&gt;\n&lt;Rgltr Cd=\"CA\" St=\"APPROVED\" Dt=\"2008-03-13\"/&gt;\n&lt;/Rgltrs&gt;\n&lt;/StateRgstn&gt;\n&lt;ERA&gt;\n&lt;Rgltrs/&gt;\n&lt;/ERA&gt;\n&lt;/Firm&gt;\n&lt;Firm&gt;\n&lt;Info FirmCrdNb=\"170562\" SECNb=\"802-112318\" BusNm=\"ALUMNI VENTURES GROUP\" LegalNm=\"LAUNCH ANGELS MANAGEMENT COMPANY, LLC\"/&gt;\n&lt;MainAddr Strt1=\"788 ELM ST\" City=\"MANCHESTER\" State=\"NH\" Cntry=\"United States\" PostlCd=\"03101\" PhNb=\"603-518-8112\"/&gt;\n&lt;MailingAddr Strt1=\"889 ELM ST\" Strt2=\"3RD FLOOR\" City=\"MANCHESTER\" State=\"NH\" Cntry=\"United States\" PostlCd=\"03101\"/&gt;\n&lt;StateRgstn&gt;\n&lt;Rgltrs/&gt;\n&lt;/StateRgstn&gt;\n&lt;ERA&gt;\n&lt;Rgltrs&gt;\n&lt;Rgltr Cd=\"MA\" St=\"ACTIVE\" Dt=\"2014-02-24\"/&gt;\n&lt;Rgltr Cd=\"NH\" St=\"ACTIVE\" Dt=\"2018-07-23\"/&gt;\n&lt;/Rgltrs&gt;\n&lt;/ERA&gt;\n&lt;/Firm&gt;\n&lt;`/Frims&gt;`\n</code></pre>\n\n<p>------Almost having 90 Firm tags</p>\n\n<p>So, I need to parse it dynamically using ruby and convert it into CSV. How can I figure out this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 3, "creation_date": 1547018782, "post_id": 54104981, "comment_id": 95042301, "body": "What does <code>@credential.save</code> return? BTW your code is quite bad, you have validation logic in the controller."}, {"owner": {"reputation": 3465, "user_id": 5946118, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/CbjEl.jpg?s=128&g=1", "display_name": "Rajkaran Mishra", "link": "https://stackoverflow.com/users/5946118/rajkaran-mishra"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1547023036, "post_id": 54104981, "comment_id": 95044249, "body": "@credential.save does saves the record, even though error is getting set. I have updated the question with the error, also I was trying to put the validation code in model, but was not able to, can you help me out with this."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1547024279, "post_id": 54104981, "comment_id": 95044898, "body": "What does <code>@credential.save</code> return?"}], "answers": [{"tags": [], "owner": {"reputation": 209, "user_id": 6164286, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GdxIL2SItVU/AAAAAAAAAAI/AAAAAAAAAKY/6vaPPw0-Yfk/photo.jpg?sz=128", "display_name": "William Tran", "link": "https://stackoverflow.com/users/6164286/william-tran"}, "is_accepted": false, "score": -1, "last_activity_date": 1547031301, "creation_date": 1547031301, "answer_id": 54108512, "question_id": 54104981, "link": "https://stackoverflow.com/questions/54104981/rails-record-getting-saved-even-if-errors-got-set/54108512#54108512", "title": "Rails Record getting saved even if errors got set", "body": "<p>Check value of <code>credential_type</code>, maybe it wasn't set to <code>windows</code>, or <code>linux</code></p>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 8134743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eaac7938bf3d976f017901db8b1ac43?s=128&d=identicon&r=PG&f=1", "display_name": "Pengcheng Zhou", "link": "https://stackoverflow.com/users/8134743/pengcheng-zhou"}, "is_accepted": false, "score": 4, "last_activity_date": 1547052057, "creation_date": 1547052057, "answer_id": 54114711, "question_id": 54104981, "link": "https://stackoverflow.com/questions/54104981/rails-record-getting-saved-even-if-errors-got-set/54114711#54114711", "title": "Rails Record getting saved even if errors got set", "body": "<p>When Rails save a record, it invokes internal validate method, the method clears the error message you set before running model validation code. so adding error message outside validation can not prevent record from saving. In your case, write this </p>\n\n<pre><code>if @credential.errors.empty? &amp;&amp; @credential.save\n</code></pre>\n\n<p>But I strongly advise you write validation logic in validators</p>\n"}, {"tags": [], "owner": {"reputation": 20004, "user_id": 458137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/578d634d7ce34d89570ba1b85a4cf118?s=128&d=identicon&r=PG", "display_name": "megas", "link": "https://stackoverflow.com/users/458137/megas"}, "is_accepted": false, "score": 12, "last_activity_date": 1547325036, "last_edit_date": 1547325036, "creation_date": 1547324633, "answer_id": 54163550, "question_id": 54104981, "link": "https://stackoverflow.com/questions/54104981/rails-record-getting-saved-even-if-errors-got-set/54163550#54163550", "title": "Rails Record getting saved even if errors got set", "body": "<p>I think you expected <code>ActiveRecord</code> to not save record if you manually set up the error on it.</p>\n\n<p>But it's not. </p>\n\n<p><code>ActiveRecord</code> on <code>save</code> command starts its validations, when one of them is not fit then <code>AR</code> sets the error and return false on <code>save</code></p>\n\n<p>In your code there's no validation for <code>cert_file_path</code> field so it perfectly suits to be saved.</p>\n\n<p>The right way is to move the validation of <code>cert_file_path</code> from controller to <code>Credential</code>, on <code>save</code> event it will call that validation, if it is not fit a validation it will set the corresponding error up and return <code>false</code> on <code>save</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1686, "user_id": 7264341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oz5dfb6ASr8/AAAAAAAAAAI/AAAAAAAAAC8/33rQJBMPZZI/photo.jpg?sz=128", "display_name": "Javier Men&#233;ndez Rizo", "link": "https://stackoverflow.com/users/7264341/javier-men%c3%a9ndez-rizo"}, "is_accepted": false, "score": 12, "last_activity_date": 1547647294, "last_edit_date": 1547647294, "creation_date": 1547346455, "answer_id": 54165628, "question_id": 54104981, "link": "https://stackoverflow.com/questions/54104981/rails-record-getting-saved-even-if-errors-got-set/54165628#54165628", "title": "Rails Record getting saved even if errors got set", "body": "<p>You can create a <a href=\"https://guides.rubyonrails.org/active_record_validations.html#custom-methods\" rel=\"noreferrer\">custom validation method</a> to move that logic to your model, and create virtual attribute to get the access to the attachment object</p>\n\n<p><strong>Model</strong></p>\n\n<pre><code>class Credential &lt; ApplicationRecord\n  validate :password_or_certificate\n  enum credential_type: { windows: 1, linux: 2 }\n\n  # create a virtual attribute to store attachment\n  attr_accessor :attachment\n\n  # Custom validation method on ActiveRecord object creation\n  validate :create_certificate, on: :create\n\n  def create_certificate\n    if cert_file_path.present?\n      cert_error_msg = 'Certificate is not valid'\n      fm = FileMagic.new(FileMagic::MAGIC_MIME)\n      file_path = attachment.path\n      if fm.file(file_path) =~ /^text\\//\n        puts first_line = File.open(attachment.path) {|f| f.readline}\n        if first_line.include? '-----BEGIN RSA PRIVATE KEY-----'\n          File.open(cert_file_path, 'w') {|f| f.write(attachment.read)}\n        else\n          errors.add(:cert_file_path, cert_error_msg)\n        end\n      else\n        errors.add(:cert_file_path, cert_error_msg)\n      end\n    else\n      errors.add(:cert_file_path, cert_error_msg)\n    end\n  end\n\n  def password_or_certificate\n    unless user_pass.blank? ^ cert_file_path.blank?\n      errors.add(:base, \"Please provide a password or a certificate, not both.\")\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>def create\n  attachment = params[:credential][:cert_file_path]\n  cert_file_path = Rails.root.join('private', 'certificates', attachment.original_filename) if attachment.present?\n\n  @credential = Credential.new(credential_params)\n  @credential.cert_file_path = cert_file_path\n  @credential.attachment = attachment\n\n  respond_to do |format|\n    if @credential.save\n      format.html {redirect_to credentials_url, notice: 'Credential was successfully mapped.'}\n      format.js\n      format.json {render :show, status: :created, location: @credential}\n    else\n      format.html {render :new}\n      format.js\n      format.json {render json: @credential.errors, status: :unprocessable_entity}\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3465, "user_id": 5946118, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/CbjEl.jpg?s=128&g=1", "display_name": "Rajkaran Mishra", "link": "https://stackoverflow.com/users/5946118/rajkaran-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1537, "favorite_count": 1, "answer_count": 4, "score": 7, "last_activity_date": 1547647294, "creation_date": 1547018358, "last_edit_date": 1547322219, "question_id": 54104981, "link": "https://stackoverflow.com/questions/54104981/rails-record-getting-saved-even-if-errors-got-set", "title": "Rails Record getting saved even if errors got set", "body": "<p>Here is my credential model:</p>\n\n<pre><code>class Credential &lt; ApplicationRecord\n  validate :password_or_certificate\n  enum credential_type: { windows: 1, linux: 2 }\n\n  def password_or_certificate\n    unless user_pass.blank? ^ cert_file_path.blank?\n      errors.add(:base, \"Please provide a password or a certificate, not both.\")\n    end\n  end\nend\n</code></pre>\n\n<p>I am checking for the certificate in the controller and setting the error in controller like this:</p>\n\n<pre><code>def create\n    attachment = params[:credential][:cert_file_path]\n    cert_file_path = Rails.root.join('private', 'certificates', attachment.original_filename) if attachment.present?\n\n    @credential = Credential.new(credential_params)\n    @credential.cert_file_path = cert_file_path\n\n    if @credential.valid? &amp;&amp; cert_file_path.present?\n      cert_error_msg = 'Certificate is not valid'\n      fm = FileMagic.new(FileMagic::MAGIC_MIME)\n      file_path = attachment.path\n      if fm.file(file_path) =~ /^text\\//\n        puts first_line = File.open(attachment.path) { |f| f.readline }\n        if first_line.include? '-----BEGIN RSA PRIVATE KEY-----'\n          File.open(cert_file_path, 'w') { |f| f.write(attachment.read) }\n        else\n          @credential.errors.add(:cert_file_path, cert_error_msg)\n        end\n      else\n        @credential.errors.add(:cert_file_path, cert_error_msg)\n      end\n    end\n\n    respond_to do |format|\n      if @credential.save\n        format.html { redirect_to credentials_url, notice: 'Credential was successfully mapped.' }\n        format.js\n        format.json { render :show, status: :created, location: @credential }\n      else\n        format.html { render :new }\n        format.js\n        format.json { render json: @credential.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>Even though errors are getting set, the record is getting saved.</p>\n\n<pre><code>#&lt;ActiveModel::Errors:0x0000557781babde8 @base=#&lt;Credential id: nil, alias: \"My new credential\", user_name: \"raj\", encrypted_user_pass: \"\", encrypted_user_pass_iv: \"VrT0xsxYtf//cwVx\\n\", credential_type: \"linux\", created_at: nil, updated_at: nil, cert_file_path: \"/home/rmishra/awsapp/private/certificates/Ruby Enc...\", passphrase: \"\"&gt;, @messages={:cert_file_path=&gt;[\"Certificate is not valid\"]}, @details={:cert_file_path=&gt;[{:error=&gt;\"Certificate is not valid\"}]}&gt;\n</code></pre>\n\n<p>I know I can check for <code>@credential.errors.blank?</code> and then save it, can you guys help me out to put all these logic in my model. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot", "rspec-rails"], "answers": [{"tags": [], "owner": {"reputation": 2890, "user_id": 1237117, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/H7dfY.jpg?s=128&g=1", "display_name": "mridula", "link": "https://stackoverflow.com/users/1237117/mridula"}, "is_accepted": true, "score": 1, "last_activity_date": 1547021505, "creation_date": 1547021505, "answer_id": 54105679, "question_id": 54104931, "link": "https://stackoverflow.com/questions/54104931/how-to-test-before-action-of-applicationcontroller-in-rails-using-rspec/54105679#54105679", "title": "How to test before action of ApplicationController in rails using RSpec", "body": "<p>Create the <code>Company</code> record using <code>FactoryBot</code> before sending the request.</p>\n\n<p>In your spec/factories/companies.rb:</p>\n\n<pre><code>FactoryBot.define do\n  factory :company do\n    name 'My Company'\n    .\n    .\n  end\nend\n</code></pre>\n\n<p>In your spec/controllers/options_spec.rb</p>\n\n<pre><code>RSpec.describe OptionsController, type: :controller do\n\n  let(:my_company) { FactoryBot.create(:company) } \n\n  describe 'Options controller request specs' do\n    login_user\n      context 'GET #index' do \n        it 'should success and render to index page' do\n           contact = create(:option)\n           get :index, params: { company_id: my_company.id } #&lt;--- This will create the company record and pass its ID\n           assigns(:options).should eq([option])\n        end\n      end      \n    end\n  end\nend\n</code></pre>\n\n<p>So now, in your <code>initialize_fields</code>, you will find the company record in the database and will rid you of the error.</p>\n"}], "owner": {"reputation": 51, "user_id": 8735863, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LXO45V8LDiQ/AAAAAAAAAAI/AAAAAAAAADA/hAtnVspkzyE/photo.jpg?sz=128", "display_name": "meerkat", "link": "https://stackoverflow.com/users/8735863/meerkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1427, "favorite_count": 0, "accepted_answer_id": 54105679, "answer_count": 1, "score": 0, "last_activity_date": 1547021505, "creation_date": 1547018163, "question_id": 54104931, "link": "https://stackoverflow.com/questions/54104931/how-to-test-before-action-of-applicationcontroller-in-rails-using-rspec", "title": "How to test before action of ApplicationController in rails using RSpec", "body": "<p>My ApplicationController looks like this</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class ApplicationController &lt; ActionController::Base  \n  before_action :initialize_fields\n\n  protected\n\n  def initialize_fields\n    @company_id_super = nil\n    @show_company_super = 0\n    @round_id_super = nil\n    if(params[\"controller\"] == 'companies')\n      if(params[\"id\"].present?)\n        @company_id_super = params[\"id\"]\n      end\n    else\n      if(params[\"company_id\"].present?)\n        @company_id_super = params[\"company_id\"]\n      end\n    end\n    if(@company_id_super != nil)\n      @show_company_super = 1\n      @company_super = Company.find(@company_id_super)\n    else\n      @company_super = nil\n    end\n    if(params[\"controller\"] == 'home' || params[:controller] == 'votes')\n      @hide_side_bar = 1\n    else\n      @hide_side_bar = 0\n    end\n    if(params[\"controller\"] == 'rounds')\n      if(params[\"id\"].present?)\n        @round_id_super = params[\"id\"]\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>and one of my controller specs looks like this</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'rails_helper'\n\nRSpec.describe OptionsController, type: :controller do\n  describe 'Options controller request specs' do\n    login_user\n    context 'GET #index' do \n      it 'should success and render to index page' do\n        contact = create(:option)\n        get :index, params: { company_id: 1 }\n        assigns(:options).should eq([option])\n      end\n    end\n\n    context 'GET #show' do\n      let!(:option) { create :option }\n      it 'should success and render to edit page' do\n        get :show, params: { id: option.id, company_id: 1 }\n        expect(response).to render_template :edit\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Now the problem is when I run this spec I get the following error:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Failure/Error: @company_super = Company.find(@company_id_super)\n\nActiveRecord::RecordNotFound:\n  Couldn't find Company with 'id'=1\n# ./app/controllers/application_controller.rb:36:in `initialize_fields'\n</code></pre>\n\n<p>Now I know the problem is in the application controller but I do not know how to fix it. I just started learning tests, can anyone help me with it? Thanks !</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1547017974, "post_id": 54104773, "comment_id": 95041941, "body": "Indexes speed up the searching. So you can still search for specific record without them, but it&#39;s slower."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1547018040, "post_id": 54104773, "comment_id": 95041972, "body": "When looking at my join table in the database.  It has listing_id and category_id.  Do they just get automatically added?  and also - should i create any new migrations to help this?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1547018227, "post_id": 54104773, "comment_id": 95042070, "body": "Yes, the columns themselves are added automatically by <code>create_join_table</code> method, look here: <a href=\"https://www.rubydoc.info/github/rails/rails/ActiveRecord%2FConnectionAdapters%2FSchemaStatements:create_join_table\" rel=\"nofollow noreferrer\">rubydoc.info/github/rails/rails/&hellip;</a>  Yes, to add the indexes that you need, you should probably create another migration."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1547018602, "post_id": 54104773, "comment_id": 95042218, "body": "Hm... ok i will update.  I added the migration i need to do and confused on how i should go about choosing which one.  I&#39;m confused because they both seem the same essentially jjust in a different order.  and the link you send me doesn&#39;t show the same style of the use of the array"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1547018709, "post_id": 54104773, "comment_id": 95042272, "body": "It depends on by which column you&#39;re planning to search this table (or maybe both of them)."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1547018885, "post_id": 54104773, "comment_id": 95042344, "body": "It will be used for creating charges with something like @order.user.affiliate.commission ... that may be wrong - i haven&#39;t used a jointable for something like this yet but that&#39;s the idea and basically how i currently do it.  I just realized i need to allow affiliates to update commission based on each user (client) so i need a join table unless i do it through the users table but that didn&#39;t seem appropriate"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1547018986, "post_id": 54104773, "comment_id": 95042391, "body": "But then again, an affiliate will be able to update it based on their users - but this is found through the users table.  A user has_one :affiliate and affiliate belongs t user.  Whats your thoughts?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1547019376, "post_id": 54104773, "comment_id": 95042571, "body": "omg, well i had the wrong migration in the OP.  I updated it .  my bad"}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547049612, "post_id": 54113908, "comment_id": 95060509, "body": "Well, I read that you can&#39;t/shouldn&#39;t add columns to a jointable.  I previously wanted to join users and affiliates and have a commission attribute within that same table - but apparently, and i could be wrong, you can&#39;t do that.  As of now i just added the commission to the users table since commission will be dependent on a per user basis"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547050226, "post_id": 54113908, "comment_id": 95060893, "body": "You either really misread something or should be more critical of cr*p you read. There are tons of valid cases where you want to attach additional data to a join table. There is nothing magical about them, its just a table with two foreign key columns. And it can be done - just not with has_and_belongs_to_many."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547050354, "post_id": 54113908, "comment_id": 95060971, "body": "And adding the column to the users table is not the same thing at all. It will fix the value per user while the later is unique per combination."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547051402, "post_id": 54113908, "comment_id": 95061600, "body": "You were right i created the joined table with the commission.  But as for the users table doing it that way, I have an affilaite association already through an affiliate_id"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547052366, "post_id": 54113908, "comment_id": 95062219, "body": "wow im an idiot.  just read whta you wrote and i like it.  going to give it a try.  although, would this be much more beneficial than just having the commission in the users table and allowing an affiliate to update it that way? Will form input auotmatically generate records to the UserAffiliate table once submitted due to the associations? or is there controller needed?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547089730, "post_id": 54113908, "comment_id": 95074957, "body": "Hey so I am a bit perplexed on this.  How would i input information, update, etc. into the Tables Database for the UserAffiliate without specifying the use of a controller?   For example, 1, How would and affiliate_id and user_id become associated, just manually? and 2, when i have a User_id 1 associated with an Affiliate_id 1 in the UserAffiliate table, how would i then input and update the commission column in the Tables Database?  Just looking for a piece of example code if possible?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547094433, "post_id": 54113908, "comment_id": 95075840, "body": "This are quite a few quite involved topics that I can&#39;t explain in few sentences. You might want to start by reading the <a href=\"https://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">rails guides on associations</a> thoroughly to understand how they actually work and then move on to how nested attributes work in rails."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547097696, "post_id": 54113908, "comment_id": 95076527, "body": "TBH i was overthinking it.  I already know how to apply this.  Once i have the users model form with a nested UsersAffiliate model, i can just add the affiliate_id manually that way."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547176802, "post_id": 54113908, "comment_id": 95111282, "body": "I was trying this out today and using has_many in the users table didn&#39;t work and the server wouldn&#39;t start.  i&#39;m stuck rn:  any chance you can take a took here: <a href=\"https://stackoverflow.com/questions/54138629/unpermitted-parameter-with-has-many-and-belongs-to-param-through-param\" title=\"unpermitted parameter with has many and belongs to param through param\">stackoverflow.com/questions/54138629/&hellip;</a>"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1547049465, "creation_date": 1547049465, "answer_id": 54113908, "question_id": 54104773, "link": "https://stackoverflow.com/questions/54104773/how-did-my-old-create-joined-tables-work-with-no-indexes/54113908#54113908", "title": "How did my old create joined tables work with no indexes?", "body": "<blockquote>\n  <p>How is it operating with those index's never migrated and how needed\n  are they?</p>\n</blockquote>\n\n<p>All types of assocations in Rails will work without indices. The only thing that is required is that the correct tables and columns exist.</p>\n\n<p>Indices are however critical for performance as the size of your database grows. They also provide constraints such as uniqueness that ensure that <a href=\"https://robots.thoughtbot.com/the-perils-of-uniqueness-validations\" rel=\"nofollow noreferrer\">duplicate data cannot be inserted due to race conditions</a>.</p>\n\n<blockquote>\n  <p>Which index should i be choosing here?</p>\n</blockquote>\n\n<p>The whole reason that Rails generates two different indices is that you should choose the index that cooresponds to how you will most often be searching the table. If you are most often using <code>User.joins(:affilitates)</code> you would choose <code>t.index [:user_id, :affiliate_id]</code> for example.</p>\n\n<blockquote>\n  <p>How it should work is that an affiliate is able to manually submit a\n  \"commission\" to the table (which does need to be added to the\n  migration).</p>\n</blockquote>\n\n<p>The <code>create_join_table</code> macro creates a join table named for <code>has_and_belongs_to_many</code> assocations. </p>\n\n<p>The main problem with <code>has_and_belongs_to_many</code> assocations is that they are headless. There is no model and therefore no way to query the table directly or add additional metadata columns. </p>\n\n<p>What you instead want is a <code>has_many :through</code> association. </p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :user_affiliates\n  has_many :affiliates, through: :user_affiliates\nend\n\nclass Affiliate &lt; ApplicationRecord\n  has_many :user_affiliates\n  has_many :affiliates, through: :user_affiliates\nend\n\n# call this whatever you want\nclass UserAffiliate  &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :affilitate\nend\n</code></pre>\n\n<p>While <code>has_and_belongs_to_many</code> uses the table naming scheme <code>users_affilities</code> (<code>plural_plural</code>) you want to use <code>user_affilities</code> for a <code>has_many through:</code> association.</p>\n\n<p>You can fix this by:</p>\n\n<ol>\n<li>Just generating the table/model through the normal generator <code>rail g model user_affiliate</code>.</li>\n<li>If the table exists <a href=\"https://stackoverflow.com/questions/471416/how-do-you-write-a-migration-to-rename-an-activerecord-model-and-its-table-in-ra\">write a migration to rename the table</a>.</li>\n</ol>\n\n<blockquote>\n  <p>but if the commission is updated, it should take the place\n  of the column and not create a new row.</p>\n</blockquote>\n\n<p>You can solve this by:</p>\n\n<ol>\n<li>Add a unique compound index on the two columns <code>t.index [:user_id, :affiliate_id], unique: true</code>.</li>\n<li>Add a uniqueness validation in the join model. <code>validates_uniqueness_of :user_id, scope: :affiliate_id</code>.</li>\n<li>Use <code>.find_or_initialize_by</code> in your controller to update an existing row if it exists instead of creating a new row if one already exists.</li>\n</ol>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547596680, "creation_date": 1547017437, "last_edit_date": 1547596680, "question_id": 54104773, "link": "https://stackoverflow.com/questions/54104773/how-did-my-old-create-joined-tables-work-with-no-indexes", "title": "How did my old create joined tables work with no indexes?", "body": "<p>I previously created a joined table with the migration:</p>\n\n<pre><code>class CreateJoinTableCategoryListing &lt; ActiveRecord::Migration[5.2]\n  def change\n    create_join_table :categories, :listings do |t|\n      # t.index [:category_id, :listing_id]\n      # t.index [:listing_id, :category_id]\n    end\n  end\nend\n</code></pre>\n\n<p>I was looking back on this as i am going to be creating a new join tables.  But while looking at it i noticed i migrated with the t.index's still commented out and the joined tables still operate correctly.</p>\n\n<p>I read into this and i haven't found any posts about either someone doing the same or not needing them.</p>\n\n<p>How is it operating with those index's never migrated and how needed are they?</p>\n\n<p><strong>I am creating a new migration:</strong></p>\n\n<pre><code>class CreateJoinTable &lt; ActiveRecord::Migration[5.2]\n  def change\n    create_join_table :users, :affiliates do |t|\n      # t.index [:user_id, :affiliate_id]\n      # t.index [:affiliate_id, :user_id]\n    end\n  end\nend\n</code></pre>\n\n<p>Which index should i be choosing here?</p>\n\n<p>How it should work is that an affiliate is able to manually submit a \"commission\" to the table (which does need to be added to the migration), but if the commission is updated, it should take the place of the column and not create a new row.</p>\n\n<p>A user will have really nothing to do with this and will be mostly updated by the affiliate to update the commission rates they have on the user.</p>\n\n<p>Update:</p>\n\n<p>Is it even possible to add another field to the join table?</p>\n\n<p>I wanted to add a :commission to the table but i can't find any docs to do anything for that.  Should i just be  defining the commission rate within the users table and do away with the join table?</p>\n\n<p>UPDATE 2:</p>\n\n<p>Ended up scratching this idea and keeping my current method of doing it with the users and affiliates association only.  I did away with the UsersAffiliates idea as it's not needed for this case.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1547010518, "post_id": 54103160, "comment_id": 95039591, "body": "Did you notice ? missing required key <code>:id</code>"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1547016057, "post_id": 54103160, "comment_id": 95041170, "body": "No <code>:id</code> in your url params and whole product object is in <code>category_category_name</code> ."}, {"owner": {"reputation": 11, "user_id": 9347240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d179f26e0b9865cd08cd9a836e307135?s=128&d=identicon&r=PG", "display_name": "user9347240", "link": "https://stackoverflow.com/users/9347240/user9347240"}, "edited": false, "score": 0, "creation_date": 1547017244, "post_id": 54103160, "comment_id": 95041643, "body": "I found a solution that works by doing &#39;&lt;%= link_to &quot;Page&quot;, [@category, product] %&gt;&#39; I feel like this isn&#39;t the most rails way though"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1547018026, "post_id": 54103160, "comment_id": 95041967, "body": "Move <code>&lt;%= link_to &#39;Product page&#39;, category_product_path(product) %&gt;</code> to the view and check if it works there. Let us know."}, {"owner": {"reputation": 11, "user_id": 9347240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d179f26e0b9865cd08cd9a836e307135?s=128&d=identicon&r=PG", "display_name": "user9347240", "link": "https://stackoverflow.com/users/9347240/user9347240"}, "edited": false, "score": 0, "creation_date": 1547018575, "post_id": 54103160, "comment_id": 95042208, "body": "That line is in a partial view that is being rendered in the view. I tried moving it to the view but no luck. Got it working with &#39;&lt;%= link_to &#39;Product page&#39;, [@category, product] %&gt;&#39;"}], "owner": {"reputation": 11, "user_id": 9347240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d179f26e0b9865cd08cd9a836e307135?s=128&d=identicon&r=PG", "display_name": "user9347240", "link": "https://stackoverflow.com/users/9347240/user9347240"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547017688, "creation_date": 1547007359, "last_edit_date": 1547017688, "question_id": 54103160, "link": "https://stackoverflow.com/questions/54103160/why-am-i-getting-a-urlgenerationerror-with-missing-required-keys-id", "title": "Why am I getting a UrlGenerationError with missing required keys [:id]?", "body": "<p>I am trying to create a link to the <code>show</code> action for my nested-resource <code>product</code>. </p>\n\n<p>I have read other answers and it seems the accepted solution is to do something like </p>\n\n<pre><code>&lt;%= link_to 'Product Page', category_product_path(product) %&gt;\n</code></pre>\n\n<p>I am doing this and still getting the same error. I will post the error and the relevant code below. I would appreciate any and all feedback.</p>\n\n<p>The full error message given by the browser</p>\n\n<pre><code>ActionController::UrlGenerationError in Categories#show\nNo route matches {:action=&gt;\"show\", :category_category_name=&gt;#&lt;Product id: 2, product_name: \"Steak\", product_description: \"Pack of steaks\", product_price: 19, category_id: 2, created_at: \"2019-01-07 22:18:26\", updated_at: \"2019-01-07 22:18:26\"&gt;, :category_name=&gt;\"Meat\", :controller=&gt;\"products\"}, missing required keys: [:id]\n</code></pre>\n\n<p>From the view:</p>\n\n<pre><code>&lt;%= render @category.products %&gt;\n</code></pre>\n\n<p>From the partial:</p>\n\n<pre><code>&lt;%= link_to 'Product page', category_product_path(product) %&gt;\n</code></pre>\n\n<p>from 'rails routes':\n<a href=\"https://i.stack.imgur.com/6n4oJ.png\" rel=\"nofollow noreferrer\">relevant routes</a></p>\n\n<p>I am trying to render all products for the product's category in a table, and I am having trouble getting the link right. I would appreciate any help.</p>\n\n<p>EDIT:\nI found a solution by changing the link to</p>\n\n<pre><code>&lt;%= link_to 'Product Page', [@category, product] %&gt;\n</code></pre>\n\n<p>I feel like this is not the most rails way though, if somebody knows a better way I would love to know it.</p>\n"}, {"tags": ["ruby", "net-ssh"], "answers": [{"comments": [{"owner": {"reputation": 512, "user_id": 2875733, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/632666023/picture?type=large", "display_name": "Gavin Yap", "link": "https://stackoverflow.com/users/2875733/gavin-yap"}, "edited": false, "score": 0, "creation_date": 1547010563, "post_id": 54102948, "comment_id": 95039606, "body": "thanks but I re-edit my question to be clearer. your solution doesn&#39;t work since each methods ssh block runs different stuff. Also its not about making code DRY, its about reusing the SSH session for all 3 sessions"}], "tags": [], "owner": {"reputation": 449, "user_id": 10739704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmWze.jpg?s=128&g=1", "display_name": "nileshkumar", "link": "https://stackoverflow.com/users/10739704/nileshkumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1547006167, "last_edit_date": 1547006167, "creation_date": 1547005455, "answer_id": 54102948, "question_id": 54102781, "link": "https://stackoverflow.com/questions/54102781/ruby-netssh-reuse-session/54102948#54102948", "title": "Ruby Net::SSH reuse session", "body": "<p>Yes, definitely you can make it DRY.</p>\n\n<p>You can add one method which accept hostname for the Net::SSH connection as below:</p>\n\n<pre><code>def ssh_exec(hostname)\n\n  Net::SSH.start( hostname, 'user', :timeout =&gt; 5, :paranoid =&gt; false ) do |ssh|\n\n   ....\n  end\nend\n</code></pre>\n\n<p>Then you can call this method <code>ssh_exec()</code> with proper hostname wherever you need it...</p>\n"}, {"tags": [], "owner": {"reputation": 512, "user_id": 2875733, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/632666023/picture?type=large", "display_name": "Gavin Yap", "link": "https://stackoverflow.com/users/2875733/gavin-yap"}, "is_accepted": false, "score": 0, "last_activity_date": 1547018094, "creation_date": 1547018094, "answer_id": 54104914, "question_id": 54102781, "link": "https://stackoverflow.com/questions/54102781/ruby-netssh-reuse-session/54104914#54104914", "title": "Ruby Net::SSH reuse session", "body": "<p>The way to go in Net::SSH is to put </p>\n\n<pre><code>@ssh_session = Net::SSH.start( @host, nil, option={:config =&gt; true})\n</code></pre>\n\n<p>to a variable and then on each methods</p>\n\n<pre><code>def method_a\n    @ssh_session.exec!(\"Hello a\")\nend\n\ndef method_b\n     @ssh_session.exec!(\"Hello b\")\nend\ndef method_c\n     @ssh_session.exec!(\"Hello c\")\nend\n</code></pre>\n\n<p>And of course i place all the above in a class, so that I can initialize and start a ssh session and exec commands without re-establishing SSH.</p>\n"}, {"comments": [{"owner": {"reputation": 512, "user_id": 2875733, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/632666023/picture?type=large", "display_name": "Gavin Yap", "link": "https://stackoverflow.com/users/2875733/gavin-yap"}, "edited": false, "score": 0, "creation_date": 1547086022, "post_id": 54107344, "comment_id": 95074216, "body": "@ydanjiu, ur second method, in a class is what I&#39;ve already answered. but for the first method. the call calls all 3 methods which is not what I wanna achieve."}], "tags": [], "owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "is_accepted": false, "score": 0, "last_activity_date": 1547027962, "last_edit_date": 1547027962, "creation_date": 1547027660, "answer_id": 54107344, "question_id": 54102781, "link": "https://stackoverflow.com/questions/54102781/ruby-netssh-reuse-session/54107344#54107344", "title": "Ruby Net::SSH reuse session", "body": "<p>Outside a class, you can try:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\ndef call\n  Net::SSH.start(...) do |ssh|\n    method_a(ssh)\n    method_b(ssh)\n    method_c(ssh)\n  end\nend\n\ndef method_a(ssh)\n  ssh.exec(...) \nend\n\ndef method_b(ssh)\n   ssh.exec(...)\nend\n\ndef method_c(ssh)\n   ssh.exec(...)\nend\n</code></pre>\nIf it's in a class, you can define `attr_reader :ssh` and then initialize it thus:\n\n<pre class=\"lang-rb prettyprint-override\"><code>attr_reader :ssh\n\ndef initialize\n  @ssh ||= Net::SSH.start(...)\nend\n</code></pre>\n\n<p>With that, you can simply define</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def method_a\n  ssh.exec(...)\nend\n</code></pre>\n\n<p>Same applies for other methods. I hope this helps?</p>\n"}], "owner": {"reputation": 512, "user_id": 2875733, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/632666023/picture?type=large", "display_name": "Gavin Yap", "link": "https://stackoverflow.com/users/2875733/gavin-yap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1547027962, "creation_date": 1547003931, "last_edit_date": 1547018122, "question_id": 54102781, "link": "https://stackoverflow.com/questions/54102781/ruby-netssh-reuse-session", "title": "Ruby Net::SSH reuse session", "body": "<p>I have a few methods doing this:</p>\n\n<pre><code>def method_a\n    Net::SSH.start(...) do |ssh|\n    end\nend\n\ndef method_b\n    Net::SSH.start(...) do |ssh|\n    end\nend\ndef method_c\n    Net::SSH.start(...) do |ssh|\n    end\nend\n</code></pre>\n\n<p>Each methods call Net::SSH start which are individual SSH sessions, doing different things.</p>\n\n<p>Is there a way to reuse Net::SSH session so that all 3 methods utilize a single session?</p>\n\n<p>THanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547001781, "post_id": 54102549, "comment_id": 95037900, "body": "As i mentioned, I already have the override in place.  I want to avoid this because it becomes controller wide and I haven&#39;t figured out a way to limit it to only the orders_confirmation method"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547002023, "post_id": 54102549, "comment_id": 95037942, "body": "@uno Sorry, looked over that (on mobile); If you really needed to do this, I would recommend not using route helpers (order_order_confirmation_path) and just hardcoding it."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547003125, "post_id": 54102549, "comment_id": 95038121, "body": "Haha no problem.  I actually might have found a way and im just testing it out.  It was much simpler than i previously thought."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 0, "last_activity_date": 1547001446, "creation_date": 1547001446, "answer_id": 54102549, "question_id": 54102534, "link": "https://stackoverflow.com/questions/54102534/setting-up-route-for-method-to-find-using-token-and-not-id/54102549#54102549", "title": "Setting up route for method to find using token and not ID?", "body": "<p>In short, you'll want to <code>resources :orders, param: :order_token</code></p>\n\n<p>and then in your Order model</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n  def to_param\n    order_token\n  end\nend\n</code></pre>\n\n<p>this will have side effects throughout your app.</p>\n\n<p>Rails guides has more info on <a href=\"https://guides.rubyonrails.org/routing.html#overriding-named-route-parameters\" rel=\"nofollow noreferrer\">Overriding Named Route Parameters</a></p>\n"}, {"tags": [], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "is_accepted": true, "score": 0, "last_activity_date": 1547596731, "last_edit_date": 1547596731, "creation_date": 1547420479, "answer_id": 54174019, "question_id": 54102534, "link": "https://stackoverflow.com/questions/54102534/setting-up-route-for-method-to-find-using-token-and-not-id/54174019#54174019", "title": "Setting up route for method to find using token and not ID?", "body": "<p><strong>When using:</strong></p>\n\n<pre><code>  resources :orders, param: :order_token do\n      get 'order_confirmation', :on =&gt; :member\n  end\n</code></pre>\n\n<p>In my routes, I am able to go to the URL i want. Although, after an order is created, it still directs me to a route using the :id.</p>\n\n<p><strong>I then change my redirect to:</strong></p>\n\n<pre><code>redirect_to order_confirmation_order_path(@order.order_token)\n</code></pre>\n\n<p><strong>And it works.</strong></p>\n\n<p>I also removed my <code>to_param</code> override.</p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54174019, "answer_count": 2, "score": 0, "last_activity_date": 1547596731, "creation_date": 1547001305, "last_edit_date": 1547005669, "question_id": 54102534, "link": "https://stackoverflow.com/questions/54102534/setting-up-route-for-method-to-find-using-token-and-not-id", "title": "Setting up route for method to find using token and not ID?", "body": "<p>Issue: For when a user isn't signed in, they have no access to their Order Show page.  So I have created an order confirmations method in my OrdersController like so:</p>\n\n<pre><code>def order_confirmation\n    @order = Order.find_by(order_token: params[:order_token])\n  end\n</code></pre>\n\n<p>Now, as you see I am currently using a <code>order_token</code> <code>find_by</code> which uses a <code>to_param</code> override.</p>\n\n<p>I want to avoid using the override since it applies controller wide and I haven't figured out a way to not have it used only on the one method only. This messes up my associated models as you can see here: <a href=\"https://stackoverflow.com/questions/54101136/why-is-my-order-token-being-passed-as-my-order-id-when-submitting-a-form-file\">Why is my :order_token being passed as my :order_id when submitting a form file?</a></p>\n\n<p>How can I make it so my route:</p>\n\n<pre><code>resources :orders do\n      get 'order_confirmation', :on =&gt; :member\n  end\n</code></pre>\n\n<p>without the use of the <code>to_param</code> override uses a URL such as :</p>\n\n<pre><code>example.com/orders/:order_token/order_confirmation\n</code></pre>\n\n<p>?</p>\n\n<p><strong>Update and possible answer:</strong></p>\n\n<p>I will make this the answer rafter some further testing.</p>\n\n<p><strong>When using:</strong></p>\n\n<pre><code>  resources :orders, param: :order_token do\n      get 'order_confirmation', :on =&gt; :member\n  end\n</code></pre>\n\n<p>In my routes, I am able to go to the URL i want.  Although, after an order is created, it still directs me to a route using the :id.</p>\n\n<p><strong>I then change my redirect to:</strong></p>\n\n<pre><code>redirect_to order_confirmation_order_path(@order.order_token)\n</code></pre>\n\n<p>And it works.</p>\n\n<p>I also removed my <code>to_param</code> override.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 0, "creation_date": 1546994874, "post_id": 54101611, "comment_id": 95036462, "body": "can you paste what&#39;s in <code>RequestLog</code> and <code>User</code> models?"}, {"owner": {"reputation": 1, "user_id": 10024088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6db6648203b554e5e270044768e4ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/10024088/belal-kamara"}, "reply_to_user": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 0, "creation_date": 1546996574, "post_id": 54101611, "comment_id": 95036837, "body": "Added it with the last edit"}, {"owner": {"reputation": 2989, "user_id": 1009655, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/K3jdk.png?s=128&g=1", "display_name": "Frederik Spang", "link": "https://stackoverflow.com/users/1009655/frederik-spang"}, "edited": false, "score": 0, "creation_date": 1546996719, "post_id": 54101611, "comment_id": 95036864, "body": "Have you tried in a console: <code>RequestLog.usr_req_by(User.find(x))</code> where x is your user id (or just <code>User.last</code>) to narrow it down? Does the scope work? Does it select correct the RequestLog(s)?"}, {"owner": {"reputation": 1, "user_id": 10024088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6db6648203b554e5e270044768e4ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/10024088/belal-kamara"}, "reply_to_user": {"reputation": 2989, "user_id": 1009655, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/K3jdk.png?s=128&g=1", "display_name": "Frederik Spang", "link": "https://stackoverflow.com/users/1009655/frederik-spang"}, "edited": false, "score": 0, "creation_date": 1547000024, "post_id": 54101611, "comment_id": 95037588, "body": "@FrederikSpang Yes, it does work. It pulls up the request logs."}], "answers": [{"tags": [], "owner": {"reputation": 2989, "user_id": 1009655, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/K3jdk.png?s=128&g=1", "display_name": "Frederik Spang", "link": "https://stackoverflow.com/users/1009655/frederik-spang"}, "is_accepted": false, "score": 0, "last_activity_date": 1546997201, "creation_date": 1546997201, "answer_id": 54102064, "question_id": 54101611, "link": "https://stackoverflow.com/questions/54101611/ror-show-page-not-showing-users-name/54102064#54102064", "title": "RoR- Show page not showing user&#39;s name", "body": "<p>The collection iterated over, is a collection of <code>RequestLog</code>. So when you use <code>:name</code> in <code>options_from_collection_for_select</code>, it tries to call <code>.name</code> on a <code>RequestLog</code>. </p>\n\n<p>I suppose you want the users name there? If so, you can add a helper method to <code>RequestLog</code> </p>\n\n<pre><code>def user_name\n  return user.name\nend\n</code></pre>\n\n<p>and use :user_name in the view.</p>\n\n<p>Another option, is to pass an object, that responds to <code>.call</code> as a param, as so:</p>\n\n<pre><code>&lt;%= form_for :event_logs, url: event_logs_path do |f| %&gt;\n  &lt;%= f.select :user_id, options_from_collection_for_select(@user_event_log, :id, -&gt;(log){ log.user.name }) %&gt;\n  &lt;%= f.hidden_field :event_id, :value =&gt; @event.id %&gt;\n  &lt;%= f.submit 'Send', class: 'btn btn-success' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I haven't tried this out, but I did look at the source for <code>options_from_collection_for_select</code>, that uses <code>value_for_collection</code> under the hood; Defined as </p>\n\n<pre><code>def value_for_collection(item, value)\n  value.respond_to?(:call) ? value.call(item) : public_or_deprecated_send(item, value)\nend\n</code></pre>\n\n<p>(See <a href=\"https://github.com/rails/rails/blob/master/actionview/lib/action_view/helpers/form_options_helper.rb\" rel=\"nofollow noreferrer\">Rails Source Code</a> and <a href=\"https://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select\" rel=\"nofollow noreferrer\">apidock.com</a>)</p>\n"}], "owner": {"reputation": 1, "user_id": 10024088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6db6648203b554e5e270044768e4ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/10024088/belal-kamara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546997201, "creation_date": 1546993089, "last_edit_date": 1546996542, "question_id": 54101611, "link": "https://stackoverflow.com/questions/54101611/ror-show-page-not-showing-users-name", "title": "RoR- Show page not showing user&#39;s name", "body": "<p>I'm trying to bring a list of Users that a \"request\" has been accepted for a user to select from. I set up the collection and what is showing up on the view page is either the user id when I put <code>:user_id</code> or its shows <code>&lt;User:0x007fbdrf252a60&gt;</code> when i put in <code>user</code>. I tried putting in <code>:name</code> but it returns a \"undefined method name\" error. </p>\n\n<p>Currently my form looks like:</p>\n\n<pre><code>&lt;%= form_for :event_logs, url: event_logs_path do |f| %&gt;\n  &lt;%= f.select :user_id, options_from_collection_for_select(@user_event_log, :id, :name ) %&gt;\n  &lt;%= f.hidden_field :event_id, :value =&gt; @event.id %&gt;\n  &lt;%= f.submit 'Send', class: 'btn btn-success' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And in the controller for the show its:</p>\n\n<pre><code>@user_event_log = RequestLog.usr_req_by current_user\n</code></pre>\n\n<p>The <code>user_req_by</code> in the model is: <code>scope :usr_req_by, -&gt;(user) { where(user_id: user.id) }</code>  </p>\n\n<p>If more information is needed I'm more than happy to add it. Thank you</p>\n\n<p>User Model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :validatable\n\n  validates_presence_of :name\n  has_many  :request_logs, dependent: :destroy\n\n  acts_as_messageable\n\n  def first_name\n    self.name.split.first\n  end\n\n  def last_name\n    self.name.split.last\n  end\nend\n</code></pre>\n\n<p>Request Log Model:</p>\n\n<pre><code>class RequestLog &lt; ApplicationRecord\n\n  enum status: { accepted: 0, rejected: 1 }\n\n  belongs_to :user, optional: true\n  belongs_to :request, optional: true\n\n  validates :user_id, presence: true\n  validates :request_id, presence: true\n\n  scope :usr_req_by, -&gt;(user) { where(user_id: user.id) }\n\n  scope :req_itp, -&gt;(requests) { where(request_id: requests) }\n\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "coordinates", "spatial", "sketchup"], "answers": [{"tags": [], "owner": {"reputation": 178, "user_id": 8369150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0b31ad02ae16807ec68361b4ef77bd?s=128&d=identicon&r=PG", "display_name": "Halil Sahin", "link": "https://stackoverflow.com/users/8369150/halil-sahin"}, "is_accepted": false, "score": 0, "last_activity_date": 1552253960, "creation_date": 1552253960, "answer_id": 55092680, "question_id": 54100857, "link": "https://stackoverflow.com/questions/54100857/how-i-can-get-spatial-coordinate-of-a-group/55092680#55092680", "title": "How I can get spatial coordinate of a group?", "body": "<p><strong>I Solved my problem as that:</strong></p>\n\n<pre><code>def build_material()\n  n = 10\n  (0..n-1).each { |i|\n    (0..n-1).each { |j|\n      pts = []\n      pts[0] = [i*@s,j*@s,0]\n      pts[1] = [i*@s,j*@s+@w,0]\n      pts[2] = [i*@s+@w,j*@s+@w,0]\n      pts[3] = [i*@s+@w,j*@s,0]\n      entities2 = @ent.add_group\n      face = entities2.entities.add_face pts\n      face.back_material = [200,(255/(n)*j).round,(255/(n)*i).round]\n      face.pushpull -40\n      @dizi[i][j]=entities2\n  }\n    }\nend  \n\ndef scale_object()\n  (0..45).each { |k|\n    (0..9).each { |i|\n        (0..9).each { |j|\n\n          height = Math.cos(@beta*(((i)*(i+k))+((j)*(j+k))))*1.4\n          scale_transformation = Geom::Transformation.scaling(1,1,height)\n          @dizi[j][i].transformation =scale_transformation\n          @dizi[j][i].transform!(scale_transformation)\n\n\n          }\n         # $view.refresh\n\n\n          }\n\n          sleep 0.08\n          @view.refresh\n          }\nend\n\n\n\n\nbuild_material()\nscale_object()\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 8369150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee0b31ad02ae16807ec68361b4ef77bd?s=128&d=identicon&r=PG", "display_name": "Halil Sahin", "link": "https://stackoverflow.com/users/8369150/halil-sahin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552253960, "creation_date": 1546987857, "question_id": 54100857, "link": "https://stackoverflow.com/questions/54100857/how-i-can-get-spatial-coordinate-of-a-group", "title": "How I can get spatial coordinate of a group?", "body": "<p>There is  a video with an animation on youtube which one perfomed in Sketchup by Ruby.\n<a href=\"https://www.youtube.com/watch?v=42Vvj3d4OF8\" rel=\"nofollow noreferrer\">Here Link</a>!</p>\n\n<p>I want to do same animation and i used cosinus function. But unfortunately i have not any idea how a can get spatial coordinates of <code>$grp_main</code> for using in cosinus function.</p>\n\n<p><strong>Here my codes:</strong></p>\n\n<pre><code>$mod = Sketchup.active_model # Open model\n$ent = $mod.entities # All entities in model\n$sel = $mod.selection # Current selection\n$grp_main = $ent.add_group\n$view = $mod.active_view\n\n$s = 100.inch\n$w = 60.inch\n$beta = 0.0085\n\ndef build_material()\n  n = 10\n  (0..n-1).each { |i|\n    (0..n-1).each { |j|\n      pts = []\n      pts[0] = [i*$s,j*$s,0]\n      pts[1] = [i*$s,j*$s+$w,0]\n      pts[2] = [i*$s+$w,j*$s+$w,0]\n      pts[3] = [i*$s+$w,j*$s,0]\n      entities2 = $grp_main.entities\n      face = entities2.add_face pts\n      face.back_material = [200,(255/(n)*j).round,(255/(n)*i).round]\n      face.pushpull -40\n  }\n    }\nend  \n\ndef scale_object(x)\n  height = Math.cos($beta*((x*x + ((x+10)*(x+10))))) #I NEED HELP HERE\n  scale_transformation = Geom::Transformation.scaling(1,1,height)\n  $grp_main.transformation *= scale_transformation\n  $grp_main.transform!(scale_transformation);\nend\n\ndef repaint(n_times, delay)\n  for x in 0..n_times-1\n    scale_object(x);\n    $view.refresh\n    sleep delay;\n   end\nend\nbuild_material();\nrepaint(20,0.7);\n</code></pre>\n\n#\n\n<pre><code>height = Math.cos($beta*((x*x + ((x+10)*(x+10)))))\n</code></pre>\n\n<p><strong>In there i havent any idea how i can get x and y coordinates...</strong></p>\n"}, {"tags": ["ruby", "ssh", "scp", "net-ssh"], "answers": [{"comments": [{"owner": {"reputation": 920, "user_id": 6890234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-aKC2DR_lnUc/AAAAAAAAAAI/AAAAAAAAABE/2KLbaG2ZxVU/photo.jpg?sz=128", "display_name": "Nikhil Wagh", "link": "https://stackoverflow.com/users/6890234/nikhil-wagh"}, "edited": false, "score": 0, "creation_date": 1570777560, "post_id": 54098820, "comment_id": 103028373, "body": "Can I also delete the file from the remote server after it is downloaded?"}, {"owner": {"reputation": 1651, "user_id": 1096436, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/58e5b642022a7428edc71ee3f18d0524?s=128&d=identicon&r=PG", "display_name": "cmrichards", "link": "https://stackoverflow.com/users/1096436/cmrichards"}, "reply_to_user": {"reputation": 920, "user_id": 6890234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-aKC2DR_lnUc/AAAAAAAAAAI/AAAAAAAAABE/2KLbaG2ZxVU/photo.jpg?sz=128", "display_name": "Nikhil Wagh", "link": "https://stackoverflow.com/users/6890234/nikhil-wagh"}, "edited": false, "score": 0, "creation_date": 1570785078, "post_id": 54098820, "comment_id": 103031770, "body": "Using the SSH session this should be possible. Simply execute the &#39;rm&#39; command : &#39;rm /path/to/file&#39;"}, {"owner": {"reputation": 920, "user_id": 6890234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-aKC2DR_lnUc/AAAAAAAAAAI/AAAAAAAAABE/2KLbaG2ZxVU/photo.jpg?sz=128", "display_name": "Nikhil Wagh", "link": "https://stackoverflow.com/users/6890234/nikhil-wagh"}, "edited": false, "score": 0, "creation_date": 1570792165, "post_id": 54098820, "comment_id": 103035270, "body": "Won&#39;t this create the problem of deleting the file before it was even downloaded? Race condition."}, {"owner": {"reputation": 1651, "user_id": 1096436, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/58e5b642022a7428edc71ee3f18d0524?s=128&d=identicon&r=PG", "display_name": "cmrichards", "link": "https://stackoverflow.com/users/1096436/cmrichards"}, "reply_to_user": {"reputation": 920, "user_id": 6890234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-aKC2DR_lnUc/AAAAAAAAAAI/AAAAAAAAABE/2KLbaG2ZxVU/photo.jpg?sz=128", "display_name": "Nikhil Wagh", "link": "https://stackoverflow.com/users/6890234/nikhil-wagh"}, "edited": false, "score": 0, "creation_date": 1570792486, "post_id": 54098820, "comment_id": 103035443, "body": "I&#39;m not sure. You could always wait until the file has finished downloading before deleting it"}, {"owner": {"reputation": 920, "user_id": 6890234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-aKC2DR_lnUc/AAAAAAAAAAI/AAAAAAAAABE/2KLbaG2ZxVU/photo.jpg?sz=128", "display_name": "Nikhil Wagh", "link": "https://stackoverflow.com/users/6890234/nikhil-wagh"}, "edited": false, "score": 0, "creation_date": 1570795880, "post_id": 54098820, "comment_id": 103037175, "body": "In your code how would you know that the file is uploaded/downloaded? Is there something like <code>channel.on_download_complete</code>. PS I couldn&#39;t find it. I was doing 3 ssh sessions to manipulate file, download file and then delete the file."}, {"owner": {"reputation": 920, "user_id": 6890234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-aKC2DR_lnUc/AAAAAAAAAAI/AAAAAAAAABE/2KLbaG2ZxVU/photo.jpg?sz=128", "display_name": "Nikhil Wagh", "link": "https://stackoverflow.com/users/6890234/nikhil-wagh"}, "edited": false, "score": 0, "creation_date": 1570795984, "post_id": 54098820, "comment_id": 103037235, "body": "I could do this <code>ssh.scp.download!(&quot;&#47;remote&#47;path&quot;, &quot;&#47;local&#47;path&quot;) ssh.exec(&quot;some command&quot;)</code> But this blocks the flow. I had multiple files to be downloaded."}], "tags": [], "owner": {"reputation": 1651, "user_id": 1096436, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/58e5b642022a7428edc71ee3f18d0524?s=128&d=identicon&r=PG", "display_name": "cmrichards", "link": "https://stackoverflow.com/users/1096436/cmrichards"}, "is_accepted": true, "score": 6, "last_activity_date": 1546978872, "last_edit_date": 1546978872, "creation_date": 1546977143, "answer_id": 54098820, "question_id": 54098735, "link": "https://stackoverflow.com/questions/54098735/how-to-copy-files-using-netssh-in-ruby/54098820#54098820", "title": "How to copy files using Net::SSH in Ruby?", "body": "<p>Net::SCP allows you to easily grab a Net::SCP reference from an existing Net::SSH session:</p>\n\n<pre><code>require \"net/ssh\"\nrequire \"net/scp\"\nNet::SSH.start(\"remote.host\", \"username\", :password =&gt; \"passwd\") do |ssh|\n  ssh.scp.upload(\"/local/path\", \"/remote/path\")\n  ssh.exec(\"...insert commands...\")\nend\n</code></pre>\n\n<p>Read more here: <a href=\"http://net-ssh.github.io/net-scp/classes/Net/SCP.html\" rel=\"noreferrer\">http://net-ssh.github.io/net-scp/classes/Net/SCP.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 419, "user_id": 2759983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WNiot.jpg?s=128&g=1", "display_name": "MiggityMac", "link": "https://stackoverflow.com/users/2759983/miggitymac"}, "is_accepted": false, "score": 2, "last_activity_date": 1546977724, "creation_date": 1546977724, "answer_id": 54098937, "question_id": 54098735, "link": "https://stackoverflow.com/questions/54098735/how-to-copy-files-using-netssh-in-ruby/54098937#54098937", "title": "How to copy files using Net::SSH in Ruby?", "body": "<p>Have you considered Net::SFTP? Along with that and Tempfile, I am currently using it in a project to copy from local to remote. You can also do simple file modifications. If you were so inclined, you could use Stream.IO to edit the file even more.</p>\n\n<p><a href=\"https://github.com/net-ssh/net-sftp\" rel=\"nofollow noreferrer\">https://github.com/net-ssh/net-sftp</a></p>\n\n<p><a href=\"http://net-ssh.github.io/net-sftp/\" rel=\"nofollow noreferrer\">http://net-ssh.github.io/net-sftp/</a></p>\n"}], "owner": {"reputation": 502, "user_id": 2487509, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Oz6bq.jpg?s=128&g=1", "display_name": "Russell Fulton", "link": "https://stackoverflow.com/users/2487509/russell-fulton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 4, "accepted_answer_id": 54098820, "answer_count": 2, "score": 3, "last_activity_date": 1570790035, "creation_date": 1546976773, "last_edit_date": 1570790035, "question_id": 54098735, "link": "https://stackoverflow.com/questions/54098735/how-to-copy-files-using-netssh-in-ruby", "title": "How to copy files using Net::SSH in Ruby?", "body": "<p>So far as I can tell I need to use both Net::SCP and Net::SSH if I want to copy a file to a remote host and then manipulate it from the command line.</p>\n\n<p>It would be nice to set up one SSH session, do the copy and then use the same connection to unpack the file and install them.</p>\n\n<p>Am I missing something?</p>\n"}, {"tags": ["ruby", "regex", "linux", "bash", "grep"], "comments": [{"owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 3, "creation_date": 1546974383, "post_id": 54098116, "comment_id": 95029035, "body": "<code>grep -E &quot;arun1?&quot;</code> uses extended regex. <code>?</code> in BRE is just a literal <code>?</code>"}, {"owner": {"reputation": 10314, "user_id": 6124411, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4E3zE.jpg?s=128&g=1", "display_name": "cody", "link": "https://stackoverflow.com/users/6124411/cody"}, "edited": false, "score": 1, "creation_date": 1546974623, "post_id": 54098116, "comment_id": 95029157, "body": "The pertinent line from the man page: <code>In  basic regular expressions the metacharacters ?, +, {, |, (, and ) lose their special meaning; instead use the backslashed versions \\?, \\+, \\{, \\|, \\(, and \\).</code>"}, {"owner": {"reputation": 13949, "user_id": 1499296, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fbd251ed4408d2a4aa6dbc52bb7389b?s=128&d=identicon&r=PG&f=1", "display_name": "AKS", "link": "https://stackoverflow.com/users/1499296/aks"}, "reply_to_user": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1546974768, "post_id": 54098116, "comment_id": 95029232, "body": "Thanks @anubhava Is there any expression that can work for both Job1 and Job2 case?"}], "answers": [{"comments": [{"owner": {"reputation": 13949, "user_id": 1499296, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fbd251ed4408d2a4aa6dbc52bb7389b?s=128&d=identicon&r=PG&f=1", "display_name": "AKS", "link": "https://stackoverflow.com/users/1499296/aks"}, "edited": false, "score": 1, "creation_date": 1546975913, "post_id": 54098434, "comment_id": 95029788, "body": "Thanks @Tiw, I think I got the solution."}], "tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": true, "score": 2, "last_activity_date": 1546975884, "last_edit_date": 1546975884, "creation_date": 1546975554, "answer_id": 54098434, "question_id": 54098116, "link": "https://stackoverflow.com/questions/54098116/ruby-or-bash-or-grep-regex-is-not-working-for-i-e-0-or-1-occurrence-of-prev/54098434#54098434", "title": "Ruby or Bash or Grep regex is not working for &#39;?&#39; i.e. 0 or 1 occurrence of previous character", "body": "<p><code>egrep</code> is the same as <code>grep -E</code>, in your case, the <code>regex</code> used, need <code>-E</code> or <code>-P</code> to support <code>?</code>.  </p>\n\n<p>Search for different <code>regex</code> support please.  There're <code>POSIX</code>, <code>Extended</code>, and <code>Perl</code> etc.   </p>\n\n<p>Resources:<br>\n<a href=\"https://www.regular-expressions.info/posix.html\" rel=\"nofollow noreferrer\">POSIX Basic and Extended Regular Expressions</a><br>\n<a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">Perl regular expressions</a><br>\n<a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">Regular expression</a></p>\n"}, {"tags": [], "owner": {"reputation": 13949, "user_id": 1499296, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fbd251ed4408d2a4aa6dbc52bb7389b?s=128&d=identicon&r=PG&f=1", "display_name": "AKS", "link": "https://stackoverflow.com/users/1499296/aks"}, "is_accepted": false, "score": 0, "last_activity_date": 1547059821, "last_edit_date": 1547059821, "creation_date": 1547059508, "answer_id": 54116461, "question_id": 54098116, "link": "https://stackoverflow.com/questions/54098116/ruby-or-bash-or-grep-regex-is-not-working-for-i-e-0-or-1-occurrence-of-prev/54116461#54116461", "title": "Ruby or Bash or Grep regex is not working for &#39;?&#39; i.e. 0 or 1 occurrence of previous character", "body": "<p><strong>Final</strong> Solution:\nUsed this regex pattern: <code>${package_name}(?:-[0-9]*)?\\..*rpm</code>, example of code (in Ruby) is shown below.</p>\n\n<p>In Ruby: after you change to the directory where the rpms existed, I got this line to find the correct rpm name. <strong>NOTE:</strong> In Ruby, <code>::Dir.glob(\"&lt;pattern&gt;\",..)</code> is <a href=\"https://ruby-doc.org/core-1.9.3/Dir.html#method-c-glob\" rel=\"nofollow noreferrer\">not a real REGEX pattern</a>, it's just a SHELL glob pattern. </p>\n\n<pre><code>  wildcard = \"#{new_resource.session['package_name']}(?:-[0-9]*)?\\..*#{ext_type}\"\nrpmfullname = Dir[\"#{new_resource.session['package_name']}*.#{ext_type}\"].select { |f| f =~ /#{wildcard}/ }.sort.first\n</code></pre>\n\n<p>This website greatly helped.\n<a href=\"https://rubular.com/\" rel=\"nofollow noreferrer\">https://rubular.com/</a> \nwith example pattern being <code>myrpm(?:-[0-9]*)?\\..*rpm</code>: \nand test cases strings as:</p>\n\n<pre><code>myrpm.rpm\nmyrpm-extra.rpm\nmyrpm-1.0.0_112233.noarch.rpm\nmyrpm-11.0.0_112233.noarch.rpm\nmyrpm-111.0.0_112233.noarch.rpm\nmyrpm-1.0_112233.noarch.rpm\nmyrpm-extra-1.0.0_112233.noarch.rpm\nfoo.yum\nberayan.rpm\narun.yum\nToni.rpm\nmyrpm-1.0.0_112233.rpm\n</code></pre>\n"}], "owner": {"reputation": 13949, "user_id": 1499296, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8fbd251ed4408d2a4aa6dbc52bb7389b?s=128&d=identicon&r=PG&f=1", "display_name": "AKS", "link": "https://stackoverflow.com/users/1499296/aks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 1, "accepted_answer_id": 54098434, "answer_count": 2, "score": 0, "last_activity_date": 1547066623, "creation_date": 1546974268, "last_edit_date": 1547066623, "question_id": 54098116, "link": "https://stackoverflow.com/questions/54098116/ruby-or-bash-or-grep-regex-is-not-working-for-i-e-0-or-1-occurrence-of-prev", "title": "Ruby or Bash or Grep regex is not working for &#39;?&#39; i.e. 0 or 1 occurrence of previous character", "body": "<p><strong>Linux</strong> Red Hat Enterprise Linux Server release 6.9 (Santiago)</p>\n\n<p><strong>Issue:</strong><br/>\nI have 2 Jenkins jobs and they both which calls another common/reusable downstream job (that uses a regex to pick its rpm). Actual code is written in Ruby (where I was using <code>::Dir.glob(\"&lt;pattern&gt;\",'')</code> and it didn't work for picking the correct rpm name (without giving me any error), but here I'm just focusing on the regex part.</p>\n\n<p>In <strong>job1</strong>, in my workspace, I see <code>myrpm.rpm</code> and <code>myrpm-extra.rpm</code>.</p>\n\n<p>In <strong>job2</strong>, in my workspace, I see <code>myrpm-3.0.0.1027-2018_12_21_121519.noarch.rpm</code> and <code>myrpm-extra-3.0.0.1027-2018_12_21_121519.noarch.rpm</code> rpms which I'm getting after downloading these files from Artifactory via some AQL.</p>\n\n<p>Once rpms are downloaded from Aritfactory i.e. available in Jenkins workspace , then I use this common downstream job to pick a given rpm that I need by\nusing <code>\"${rpmname}*.rpm\"</code> regex. </p>\n\n<p>The issue is, when I'm passing <code>rpmname</code> parameter value as \"<strong>myrpm</strong>\", the logic is picking <code>myrpm-extra.rpm</code> (in <strong><em>Job1</em></strong>) or <code>myrpm-extra-3.0.0.1027-2018_12_21_121519.noarch.rpm</code> (<strong><em>Job2</em></strong>) instead of the correct one (non extra one), as <code>-</code> character's order comes first due to ASCII sequence.</p>\n\n<p>I tested the regex and seeing why in the last command I didn't see expected output. Isn't <code>1?</code> in the regex going to give us any lines which has <code>arun</code> with either <code>0 or 1</code> occurrence of character <code>1</code>?</p>\n\n<pre><code>[giga@linux-server giga]# echo -e \"arun\\narun1\\narun2\\narun11\" |grep \"arun\"\narun\narun1\narun2\narun11\n[giga@linux-server giga]#\n\n[giga@linux-server giga]# echo -e \"arun\\narun1\\narun2\\narun11\" |grep \"arun1\"\narun1\narun11\n[giga@linux-server giga]#\n\n[giga@linux-server giga]# echo -e \"arun\\narun1\\narun2\\narun11\" |grep \"arun1?\"\n[giga@linux-server giga]#\n</code></pre>\n\n<p><strong>Questions:</strong><br/>\n1. Why this works if I use <code>egrep</code>?<br/>\n2. Why it didn't work with <code>grep</code>, while <code>grep</code> man page / examples tells it supports it?<br/>\n3. What regex can I use so that if I pass <code>myrpm</code> as the job parameter's value, then it works in both Job1 and Job2 where rpm filename contains either the short and full rpm name.</p>\n\n<p>Here: <a href=\"https://www.cyberciti.biz/faq/grep-regular-expressions/\" rel=\"nofollow noreferrer\">https://www.cyberciti.biz/faq/grep-regular-expressions/</a> (search for <strong>grep Regular Expression Operator</strong>) and </p>\n\n<p><code>man grep</code> shows:</p>\n\n<pre><code>   Repetition\n       A regular expression may be followed by one of several repetition operators:\n       ---------------------------------------------------------------\n       ?      The preceding item is optional and matched at most once.\n       ---------------------------------------------------------------  \n       *      The preceding item will be matched zero or more times.\n       +      The preceding item will be matched one or more times.\n       {n}    The preceding item is matched exactly n times.\n       {n,}   The preceding item is matched n or more times.\n       {,m}   The preceding item is matched at most m times.  This is a GNU extension.\n       {n,m}  The preceding item is matched at least n times, but not more than m times.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "upstart"], "answers": [{"tags": [], "owner": {"reputation": 1096, "user_id": 1552416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ddbcb716e502278bfebe5c13f818f953?s=128&d=identicon&r=PG", "display_name": "Ryan Fisher", "link": "https://stackoverflow.com/users/1552416/ryan-fisher"}, "is_accepted": true, "score": 1, "last_activity_date": 1546974530, "creation_date": 1546974530, "answer_id": 54098170, "question_id": 54097411, "link": "https://stackoverflow.com/questions/54097411/why-is-my-rubygems-environment-different-when-using-setuid-from-an-upstart-scrip/54098170#54098170", "title": "Why is my RubyGems environment different when using setuid from an upstart script?", "body": "<p>The issue is that <code>$HOME</code> is not being set in the Upstart script ;)</p>\n\n<p>Add <code>env HOME=/home/www</code> to the upstart script and <code>gem env</code> will output the expected environment settings.</p>\n"}], "owner": {"reputation": 1096, "user_id": 1552416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ddbcb716e502278bfebe5c13f818f953?s=128&d=identicon&r=PG", "display_name": "Ryan Fisher", "link": "https://stackoverflow.com/users/1552416/ryan-fisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 54098170, "answer_count": 1, "score": 1, "last_activity_date": 1546974530, "creation_date": 1546971049, "question_id": 54097411, "link": "https://stackoverflow.com/questions/54097411/why-is-my-rubygems-environment-different-when-using-setuid-from-an-upstart-scrip", "title": "Why is my RubyGems environment different when using setuid from an upstart script?", "body": "<p>I'm having a problem where my RubyGems environment is wrong when starting a Rails application from Upstart on Ubuntu. In my Upstart script I use <code>setuid www</code>, then run a wrapper script which eventually starts Puma.</p>\n\n<p>From the command line, as user <code>www</code>, the output of <code>gem env</code> is what I expect:</p>\n\n<pre><code>  - GEM PATHS:\n     - /var/lib/gems/2.5.0\n     - /home/www/.gem/ruby/2.5.0\n     - /usr/share/rubygems-integration/2.5.0\n     - /usr/share/rubygems-integration/all\n</code></pre>\n\n<p>If I run <code>gem env</code> from the Upstart script, after setting <code>setuid www</code>, I get this:</p>\n\n<pre><code>  - GEM PATHS:\n    - /var/lib/gems/2.5.0\n    - /.gem/ruby/2.5.0\n    - /usr/share/ruby\n</code></pre>\n\n<p>This causes gems to be installed in the wrong place, or to not be found because they were installed with <code>--user-install</code> putting them in <code>/home/www/.gem/</code>.</p>\n\n<p>For now, I can explicitly set <code>$GEM_HOME</code> and <code>$GEM_PATH</code> but it would be cleaner to just rely on the default RubyGems environment for the <code>www</code> user.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "printing", "printers"], "answers": [{"tags": [], "owner": {"reputation": 1253, "user_id": 704515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f563d99bc6daa3bc4223274c7578f70?s=128&d=identicon&r=PG", "display_name": "Viktor Nonov", "link": "https://stackoverflow.com/users/704515/viktor-nonov"}, "is_accepted": true, "score": 0, "last_activity_date": 1546976286, "creation_date": 1546976286, "answer_id": 54098620, "question_id": 54097370, "link": "https://stackoverflow.com/questions/54097370/print-on-a-printer-file-in-rails/54098620#54098620", "title": "Print (on a printer) file in rails", "body": "<p>If you want to do this from a webpage - it's more of a Javascript task rather than Ruby/Rails one. You can do something like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n  var WinPrint = window.open('', '_blank', 'left=0,top=0,toolbar=0,scrollbars=0,status=0');\n  WinPrint.document.write('&lt;img src=\"&lt;%= resource.print_url %&gt;\" /&gt;');\n  WinPrint.document.close();\n  WinPrint.focus();\n  WinPrint.print();\n  WinPrint.close();\n&lt;/script&gt;\n</code></pre>\n\n<p>It creates and open new window with content that contains only the image that would like to print, then print the page (which you already noticed that invokes the dialog) and the closes that new window. (I don't think there's a way to skip the dialog opening though).</p>\n\n<p>You can check <a href=\"https://stackoverflow.com/questions/12997123/print-specific-part-of-webpage\">this</a> answer for more information and examples.</p>\n"}], "owner": {"reputation": 23, "user_id": 10885795, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KOh8PabCtIo/AAAAAAAAAAI/AAAAAAAAAAA/E7BJ03gffWE/photo.jpg?sz=128", "display_name": "Aladin Halil", "link": "https://stackoverflow.com/users/10885795/aladin-halil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 54098620, "answer_count": 1, "score": 0, "last_activity_date": 1546976286, "creation_date": 1546970860, "question_id": 54097370, "link": "https://stackoverflow.com/questions/54097370/print-on-a-printer-file-in-rails", "title": "Print (on a printer) file in rails", "body": "<p>is there any way of printing a file on a printer in rails? \nLet's assume I have a </p>\n\n<pre><code>  def print_url\n     \"/system/tickets/#{print_url_dir}/print.png\"\n  end\n</code></pre>\n\n<p>and I want to call it with</p>\n\n<pre><code>  resource.print_url\n</code></pre>\n\n<p>I tried already </p>\n\n<pre><code>  &lt;%= link_to 'Print', resource.print_url, :onclick =&gt; 'window.print();return false;'%&gt;\n</code></pre>\n\n<p>But that just opened the printer dialog for the site I am on.</p>\n\n<p>Sorry if it is a stupid question or I am missing something.</p>\n\n<p>Thanks and all the best!</p>\n"}, {"tags": ["ruby", "heroku"], "comments": [{"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 0, "creation_date": 1552036608, "post_id": 54097230, "comment_id": 96868346, "body": "You can downgrade heroku stack to solve this issue. Solution can be found here <a href=\"https://stackoverflow.com/questions/53354444/how-can-i-solve-this-trouble-to-deploy-a-rails-app-to-heroku?answertab=active#tab-top\" title=\"how can i solve this trouble to deploy a rails app to heroku\">stackoverflow.com/questions/53354444/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8587888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3862368cda579f9c82e3f00bdfe625?s=128&d=identicon&r=PG&f=1", "display_name": "LaToya Gibson", "link": "https://stackoverflow.com/users/8587888/latoya-gibson"}, "edited": false, "score": 1, "creation_date": 1547067019, "post_id": 54097384, "comment_id": 95068796, "body": "After playing with it for 3 days, I was able to deploy my app after changing the Gemfile from 2.3.7 to 2.5.3 as well as Gemfile.lock and .ruby-version."}], "tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": false, "score": 0, "last_activity_date": 1546970915, "creation_date": 1546970915, "answer_id": 54097384, "question_id": 54097230, "link": "https://stackoverflow.com/questions/54097230/hit-a-snag-on-step-4-7/54097384#54097384", "title": "Hit a snag on step 4.7", "body": "<p>Have you ever check those log/messages?<br>\nAs it stated, the error is because your requested ruby version's not supported by Heroku.<br>\nCheck thie link <a href=\"https://devcenter.heroku.com/articles/ruby-support#supported-runtimes\" rel=\"nofollow noreferrer\">given</a>.  </p>\n\n<p>Change your Gemfile, to use ruby <code>2.4.5</code> , <code>2.5.3</code> or <code>2.6.0</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8587888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe3862368cda579f9c82e3f00bdfe625?s=128&d=identicon&r=PG&f=1", "display_name": "LaToya Gibson", "link": "https://stackoverflow.com/users/8587888/latoya-gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1552036013, "creation_date": 1546970278, "last_edit_date": 1546970618, "question_id": 54097230, "link": "https://stackoverflow.com/questions/54097230/hit-a-snag-on-step-4-7", "title": "Hit a snag on step 4.7", "body": "<p>I have started learning to code through The Odin Project and has tried to get past Step 4.7 of Your First Rails App. Have tried everything, even upgrading and has asked others about the issue and I keep getting this error each time I have tried to deploy to Heroku.</p>\n\n<p>I have tried upgrading to the latest version of Ruby but I still haven't been able to progress. I have used tutorials and commands from other websites and from other developers as well.</p>\n\n<pre><code>remote:  !\nremote:  !     An error occurred while installing ruby-2.3.7\nremote:  !     \nremote:  !     This version of Ruby is not available on Heroku-18. The minimum supported version\nremote:  !     of Ruby on the Heroku-18 stack can found at:\nremote:  !     \nremote:  !     https://devcenter.heroku.com/articles/ruby-support#supported-runtimes\nremote:  !\nremote:  !     Push rejected, failed to compile Ruby app.\nremote: \nremote:  !     Push failed\nremote: Verifying deploy...\nremote: \n</code></pre>\n\n<p>Once able to deploy to Heroku, a link to the app should appear afterwards you would have to migrate the data base to Heroku before your app becomes available to view on web.</p>\n"}, {"tags": ["ruby", "jekyll", "liquid", "jekyll-extensions"], "comments": [{"owner": {"reputation": 1253, "user_id": 704515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f563d99bc6daa3bc4223274c7578f70?s=128&d=identicon&r=PG", "display_name": "Viktor Nonov", "link": "https://stackoverflow.com/users/704515/viktor-nonov"}, "edited": false, "score": 1, "creation_date": 1546972537, "post_id": 54097128, "comment_id": 95028150, "body": "The only thing that can think of is that you have space at the end of <code>@filename</code>, so you might need <code>@filename.strip</code>. Also it would be helpful if you can show all the invocations of <code>{% full_include %}</code>."}, {"owner": {"reputation": 825, "user_id": 713735, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e4b24d290836076bb32b6c55968f29bd?s=128&d=identicon&r=PG", "display_name": "Scott Severance", "link": "https://stackoverflow.com/users/713735/scott-severance"}, "reply_to_user": {"reputation": 1253, "user_id": 704515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f563d99bc6daa3bc4223274c7578f70?s=128&d=identicon&r=PG", "display_name": "Viktor Nonov", "link": "https://stackoverflow.com/users/704515/viktor-nonov"}, "edited": false, "score": 0, "creation_date": 1546973208, "post_id": 54097128, "comment_id": 95028441, "body": "@ViktorNonov: It turns out you were right. There was a space at the end of <code>@filename</code>. I discovered this right before I saw your comment. If you make it an answer, I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 1253, "user_id": 704515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f563d99bc6daa3bc4223274c7578f70?s=128&d=identicon&r=PG", "display_name": "Viktor Nonov", "link": "https://stackoverflow.com/users/704515/viktor-nonov"}, "is_accepted": true, "score": 2, "last_activity_date": 1546973420, "creation_date": 1546973420, "answer_id": 54097909, "question_id": 54097128, "link": "https://stackoverflow.com/questions/54097128/why-is-this-jekyll-plugin-throwing-an-exception/54097909#54097909", "title": "Why is this Jekyll plugin throwing an exception?", "body": "<p>The only thing that I can think of is that you have space at the end of @filename.</p>\n"}], "owner": {"reputation": 825, "user_id": 713735, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e4b24d290836076bb32b6c55968f29bd?s=128&d=identicon&r=PG", "display_name": "Scott Severance", "link": "https://stackoverflow.com/users/713735/scott-severance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 54097909, "answer_count": 1, "score": 1, "last_activity_date": 1546973420, "creation_date": 1546969812, "question_id": 54097128, "link": "https://stackoverflow.com/questions/54097128/why-is-this-jekyll-plugin-throwing-an-exception", "title": "Why is this Jekyll plugin throwing an exception?", "body": "<p>I have a Jekyll site in which I need to show the source of various files within the site. To that end, I tried to use <code>{% include filename %}</code> in my template. However, it turns out that the Liquid tag <code>include</code> will only accept paths under <code>_includes</code>. Initially, I symlinked my project root to a path under <code>_includes</code>. This works, but it makes building really slow as it takes Jekyll quite a while to work out that there are infinitely recursive symlinks in the project.</p>\n\n<p>Now, I've decided that a better approach is to write a plugin to make a <code>full_include</code> tag which will accept any path relative to the project base directory. Here's the code:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nmodule MyIncludes\n\n  class FullIncludeTag &lt; Liquid::Tag\n    def initialize(tag_name, filename, other)\n      super\n      $stderr.puts \"===DEBUG=== Plugin FullIncludeTag initialized. Arguments:\\n\\ttag_name:\\t#{tag_name}\\n\\tfilename:\\t#{filename}\\n\\tother:\\t#{other}\"\n      items = Dir.children(Dir.pwd)\n      unless items.include?('_config.yml') and items.include('_includes')\n        raise RuntimeError, \"The working directory doesn't appear to be Jekyll's base directory!\"\n      end\n      @filename = \"#{Dir.pwd}/#{filename}\"\n    end\n\n    def render(context)\n      $stderr.puts \"===DEBUG=== Plugin FullIncludeTag render beginning.\\n\\tcontext:\\t#{context}\\n\\tfilename:\\t#{@filename}\"\n\n      # The following two lines produce the exact same output the first time the plugin is called.\n      $stderr.puts \"#{Dir.pwd}/resume/portfolio_entries/raw/dice.py\"\n      $stderr.puts @filename\n\n#       File.open \"#{Dir.pwd}/resume/portfolio_entries/raw/dice.py\" do |f|\n#         return f.read\n#       end\n      File.open @filename do |f|\n        return f.read.chomp\n      end\n    end\n  end\nend\n\nLiquid::Template.register_tag('full_include', MyIncludes::FullIncludeTag)\n</code></pre>\n\n<p>My Ruby skills are incredibly rusty as it's been many years since I've written it, but I can't seem to find the problem here. Here's what's happening:</p>\n\n<ol>\n<li><p>With the code as presented, Jekyll produces the following output:</p>\n\n<pre><code>===DEBUG=== Plugin FullIncludeTag render beginning.\n        context:        #&lt;Liquid::Context:0x018ee008&gt;\n        filename:       /home/scott/Main Sync/websites/scottseverance.mss/resume/portfolio_entries/raw/dice.py \n/home/scott/Main Sync/websites/scottseverance.mss/resume/portfolio_entries/raw/dice.py\n/home/scott/Main Sync/websites/scottseverance.mss/resume/portfolio_entries/raw/dice.py \n  Liquid Exception: No such file or directory @ rb_sysopen - /home/scott/Main Sync/websites/scottseverance.mss/resume/portfolio_entries/raw/dice.py in resume/portfolio_entries/dice.html\njekyll 3.8.4 | Error:  No such file or directory @ rb_sysopen - /home/scott/Main Sync/websites/scottseverance.mss/resume/portfolio_entries/raw/dice.py \n</code></pre></li>\n<li><p>If I switch which <code>File.open</code> block is commented out, then the exceptions go away. Of course, since the path is hardcoded, I only get the correct content for the first use of <code>{% full_include %}</code>, but that's to be expected.</p></li>\n</ol>\n\n<p>Note in particular that the two <code>$stderr.puts</code> calls highlighted in the code comments produce identical output in either variation (at least for the liquid tag called with the hardcoded path). Therefore, I can think of no reason why one call would work and the other fail. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activemodel"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1546969925, "post_id": 54097105, "comment_id": 95026917, "body": "When you try to save a record all validators have to be valid - not only the validators on columns you actually changed. If this is not what you want then you will have to write your own custom validation that is able to handle complex conditions or edge-cases."}, {"owner": {"reputation": 129, "user_id": 4092209, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-wO-Ict-PhDw/AAAAAAAAAAI/AAAAAAAAAxE/v1lbYcZ86wM/photo.jpg?sz=128", "display_name": "Alexis", "link": "https://stackoverflow.com/users/4092209/alexis"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1546970091, "post_id": 54097105, "comment_id": 95027003, "body": "@spickermann so the only way to avoid this is to add <code>on: :create</code> ?"}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1546970117, "post_id": 54097105, "comment_id": 95027009, "body": "what @spickermann said, plus, if you don&#39;t want to run some validations when updating a record, then specify that in the validation with <code>on: :create</code>, for more information about that, just go to <a href=\"https://api.rubyonrails.org/classes/ActiveModel/Validations/ClassMethods.html#method-i-validates\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveModel/Validations/&hellip;</a>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 4, "creation_date": 1546970943, "post_id": 54097105, "comment_id": 95027402, "body": "Careful with <code>after: Date.yesterday</code> too. <code>Date.yesterday</code> will be evaluated when the class is being evaluated, not when the validation is being run. You might want <code>after:  -&gt;{ Date.yesterday }</code> to ensure that <code>Date.yesterday</code> is evaluated at the right time."}, {"owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "edited": false, "score": 0, "creation_date": 1546974933, "post_id": 54097105, "comment_id": 95029312, "body": "I need your server  log"}], "owner": {"reputation": 129, "user_id": 4092209, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-wO-Ict-PhDw/AAAAAAAAAAI/AAAAAAAAAxE/v1lbYcZ86wM/photo.jpg?sz=128", "display_name": "Alexis", "link": "https://stackoverflow.com/users/4092209/alexis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546969686, "creation_date": 1546969686, "question_id": 54097105, "link": "https://stackoverflow.com/questions/54097105/activemodel-validation-failed", "title": "ActiveModel - Validation failed", "body": "<p>I got an error <code>Validation failed</code> when I try to update a field and I'm not sure to understand how the <code>validates</code> works</p>\n\n<p>I have a <code>Booking</code> model defined as below: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Booking &lt; ApplicationRecord\n  include ActiveModel::Dirty\n\n  validates :requester_status,\n            inclusion: { in: %w[pending approved cancelled expired] }\n\n  validates :host_status,\n            inclusion: { in: %w[pending approved declined cancelled flexible_dates expired] }\n\n  validates :start_at, date: { after: Date.yesterday }, presence: true\n  validates :end_at, date: { after: :start_at }, presence: true\nend\n</code></pre>\n\n<p>I defined a function to update the <code>hosts_status</code> and <code>requester_status</code> as below: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def self.set_expired\n  pending_bookings = Booking.where(host_status: 'pending').where('end_at &lt; ?', Date.today)\n\n<pre><code>  pending_bookings.each do |pending_booking|\n    pending_booking.host_status = 'expired'\n    pending_booking.requester_status = 'expired'\n    pending_booking.save!\n  end\nend\n</code></pre>\n\n</code></pre>\n\n<p>I'm only updating <code>host_status</code> and <code>requester_status</code> and I got the error: \n<code>ActiveRecord::RecordInvalid: Validation failed: Start at must be after 2019-01-07</code> whereas this field is not updated. </p>\n\n<p>So I'm not sure to really understand what's happening</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 7, "user_id": 10880668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VWy-mH8yc_M/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZKS59n2CH0anSGD-2mdMbjOKRmtw/mo/photo.jpg?sz=128", "display_name": "johnny bravo", "link": "https://stackoverflow.com/users/10880668/johnny-bravo"}, "reply_to_user": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 0, "creation_date": 1546960193, "post_id": 54094477, "comment_id": 95021390, "body": "it is part of a bigger puppet deploy; this is just the part that is handling this  issue insert/delete is match"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1546960542, "post_id": 54094477, "comment_id": 95021629, "body": "we also need a desired output to help you."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 10880668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VWy-mH8yc_M/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZKS59n2CH0anSGD-2mdMbjOKRmtw/mo/photo.jpg?sz=128", "display_name": "johnny bravo", "link": "https://stackoverflow.com/users/10880668/johnny-bravo"}, "edited": false, "score": 1, "creation_date": 1547021116, "post_id": 54097124, "comment_id": 95043362, "body": "Thanks, I do appreciate both answers :)"}], "tags": [], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "is_accepted": false, "score": 0, "last_activity_date": 1546978073, "last_edit_date": 1546978073, "creation_date": 1546969798, "answer_id": 54097124, "question_id": 54094477, "link": "https://stackoverflow.com/questions/54094477/insert-delete-line-to-a-file-if-pattern-match/54097124#54097124", "title": "Insert/delete line to a file if pattern match", "body": "<p>I don't entirely follow what you're going for, or what is going wrong currently, but here are some things that <em>might</em> be your issue:</p>\n\n<p>In a ruby regex, ^ and $ match the start/end of the string, not the end of a line. You probably want to use \\A and \\Z instead, to match line endings.</p>\n\n<p>You're doing a mix of line-oriented processing and file-level processing. Maybe that works? But confusing. I'd stick with one or the other. I <em>think</em> you don't need to iterate over the lines at all. You can just test for:</p>\n\n<pre><code>f.match(/\\Aldap_filter_users\\Z/)\n</code></pre>\n\n<p>Also, \"f\" looks like a file handle. Try \"conf\" or something instead. (style)</p>\n\n<p>Do you want the lines with only \"#\" in the output?  If not, change this line:</p>\n\n<pre><code>conf.gsub!(/\\Aldap_filter_users\\s+=.*\\Z/, '#')  \n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>conf.gsub!(/\\Aldap_filter_users\\s+=.*\\Z/, '')  \n</code></pre>\n\n<p>And most of all, you're writing the whole file once for line of the file. You'll be left with whatever got written on the last pass through the file. This is most likely at least part of the problem you're seeing.</p>\n\n<p>Something like this might fix it, or at least make the issue easier to trace through. </p>\n\n<pre><code>users = %w/user1 user2 user3/\n\nif users.length == 1 \n  user_list = \"(#{users[0]})\"\nelse\n  user_list = '(|' + users.map{|u| \"(#{u})\"}.join + ')'\nend\n\nconf = File.open(\"ldap_config.conf\").read\n\nif conf.match(/\\Aldap_filter_users\\Z/)\n  conf.gsub!(/\\Aldap_filter_users\\s+=.*\\Z/, '#')  \nelsif line.match(/\\Aldap_filters =/)\n  conf.gsub!(/\\Aldap_filters = yes\\Z/, \"ldap_filters = yes\\n ldap_filter_users = #{user_list}\")        \nend\n\nFile.write(\"ldap_config.conf\", conf)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 10880668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VWy-mH8yc_M/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZKS59n2CH0anSGD-2mdMbjOKRmtw/mo/photo.jpg?sz=128", "display_name": "johnny bravo", "link": "https://stackoverflow.com/users/10880668/johnny-bravo"}, "edited": false, "score": 0, "creation_date": 1547021016, "post_id": 54097201, "comment_id": 95043313, "body": "Thanks @periswon ;  Now I&#39;ve understand the code better, but still have to say ruby documentation is quite week in describing better file content manipulation...."}], "tags": [], "owner": {"reputation": 486, "user_id": 6144460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6a3cdffe21fd594a0947298f0f4f1f8?s=128&d=identicon&r=PG", "display_name": "periswon", "link": "https://stackoverflow.com/users/6144460/periswon"}, "is_accepted": true, "score": 0, "last_activity_date": 1546970166, "creation_date": 1546970166, "answer_id": 54097201, "question_id": 54094477, "link": "https://stackoverflow.com/questions/54094477/insert-delete-line-to-a-file-if-pattern-match/54097201#54097201", "title": "Insert/delete line to a file if pattern match", "body": "<p>I think the crucial problem with your code is that it does a\nglobal replace and writes the output while it iterates through all lines.</p>\n\n<p>This should produce the desired output</p>\n\n<pre><code>users = %w/user1 user2 user3/\n_var = users.map { |u| \"(#{u})\" }.join\n_var = \"(|#{_var})\" if users.length &gt; 1\nf = File.open(\"ldap_config.conf\").read\n\nchanged = \n  if f.match(/ldap_filter_users/)\n    f.gsub!(/ldap_filter_users\\s+=.*$\\n/, '') \n  elsif f.match(/ldap_filters =/)\n    f.gsub!(/ldap_filters = yes/, \"ldap_filters = yes\\nldap_filter_users = #{_var}\")\n  end\n\nFile.write(\"ldap_config.conf\", f) if changed\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10880668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VWy-mH8yc_M/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZKS59n2CH0anSGD-2mdMbjOKRmtw/mo/photo.jpg?sz=128", "display_name": "johnny bravo", "link": "https://stackoverflow.com/users/10880668/johnny-bravo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 54097201, "answer_count": 2, "score": 0, "last_activity_date": 1546978073, "creation_date": 1546959652, "last_edit_date": 1546960969, "question_id": 54094477, "link": "https://stackoverflow.com/questions/54094477/insert-delete-line-to-a-file-if-pattern-match", "title": "Insert/delete line to a file if pattern match", "body": "<p>[this is a ruby problem]</p>\n\n<ul>\n<li>if line matching pattern exists => insert RIGHT after the a predefined variable(line)</li>\n<li>if line matching pattern exists AND also line that contains that predefined variable => delete this line</li>\n</ul>\n\n<p>Given file:\nldap_config.conf</p>\n\n<pre><code>line1\nline2\nline3\nline4\nldap_filters = yes\nline..M\nline..N\n</code></pre>\n\n<p>test_add_del.rb</p>\n\n<pre><code>users = %w/user1 user2 user3/\nusers.length == 1 ? _var = \u201c(#{users[0]})\u201d : _var = \u2018(|\u2019 + users.map{|u| \u201c(#{u})\u201d}.join + \u2018)\u2019\nf = File.open(\u201cldap_config.conf\u201d).read\n\nf.each_line do |line|\n    if  line.match(/ldap_filter_users/)\n            f.gsub!(/\\sldap_filter_users\\s+=.*$/, '#')\n            File.write(\"ldap_config.conf\", f)\n    elsif line.match(/ldap_filters =/)\n            f.gsub!(/ldap_filters = yes/, \"ldap_filters = yes\\n ldap_filter_users = \"+_var)\n            File.write(\"ldap_config.conf\", f)\n\n    end\nend\n</code></pre>\n\n<p>NOW:</p>\n\n<p>if I runt 1st time the script get this output =></p>\n\n<pre><code>line1\nline2\nline3\nline4\nldap_filters = yes\nldap_filter_users = (|(user1)(user2)(user3))\nline..M\nline..N\n</code></pre>\n\n<p>\u2026and if i runt it 2nd time get this output =></p>\n\n<pre><code>line1\nline2\nline3\nline4\nldap_filters = yes\n#\n#\nline..M\nline..N\n</code></pre>\n\n<p>As my ruby skills are quite low, a better example/explanation would be highly appreciate.</p>\n\n<p>P.S.</p>\n\n<p>as expected result:</p>\n\n<p>\u2026and if i runt it 2nd time should get this output =></p>\n\n<pre><code>line1\nline2\nline3\nline4\nldap_filters = yes\nline..M\nline..N\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "asset-pipeline", "assets"], "comments": [{"owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "edited": false, "score": 0, "creation_date": 1546964310, "post_id": 54094170, "comment_id": 95023957, "body": "please attach your database.yml file"}, {"owner": {"reputation": 920, "user_id": 3512189, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hXdNN.jpg?s=128&g=1", "display_name": "wasipeer", "link": "https://stackoverflow.com/users/3512189/wasipeer"}, "edited": false, "score": 0, "creation_date": 1547016305, "post_id": 54094170, "comment_id": 95041259, "body": "it seems like cat.jpeg is missing in assets."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6096243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac24bf612b9b35ab7dcb689a5016f317?s=128&d=identicon&r=PG&f=1", "display_name": "Niclaus Liu", "link": "https://stackoverflow.com/users/6096243/niclaus-liu"}, "edited": false, "score": 0, "creation_date": 1546962736, "post_id": 54094301, "comment_id": 95023026, "body": "I ran this command but got the error &quot;We&#39;re sorry, but something went wrong.&quot;"}, {"owner": {"reputation": 1, "user_id": 6096243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac24bf612b9b35ab7dcb689a5016f317?s=128&d=identicon&r=PG&f=1", "display_name": "Niclaus Liu", "link": "https://stackoverflow.com/users/6096243/niclaus-liu"}, "edited": false, "score": 0, "creation_date": 1547027137, "post_id": 54094301, "comment_id": 95046499, "body": "Problem solved...forgot to merge branch to master lol. Thanks so much!"}], "tags": [], "owner": {"reputation": 920, "user_id": 3512189, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hXdNN.jpg?s=128&g=1", "display_name": "wasipeer", "link": "https://stackoverflow.com/users/3512189/wasipeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1546959052, "creation_date": 1546959052, "answer_id": 54094301, "question_id": 54094170, "link": "https://stackoverflow.com/questions/54094170/rail-cannot-load-such-file-rack-handler-rails-env-production-loaderror/54094301#54094301", "title": "Rail &quot;cannot load such file -- rack/handler/rails__env=production (LoadError)&quot;", "body": "<p>correct command is following:</p>\n\n<pre><code>rails server -e production \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "is_accepted": false, "score": 0, "last_activity_date": 1546960572, "creation_date": 1546960572, "answer_id": 54094754, "question_id": 54094170, "link": "https://stackoverflow.com/questions/54094170/rail-cannot-load-such-file-rack-handler-rails-env-production-loaderror/54094754#54094754", "title": "Rail &quot;cannot load such file -- rack/handler/rails__env=production (LoadError)&quot;", "body": "<p>I guess this works too :</p>\n\n<pre><code>RAILS_ENV=production rails s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 7822790, "user_type": "registered", "profile_image": "https://graph.facebook.com/1502648623081290/picture?type=large", "display_name": "Dmitry Rocha", "link": "https://stackoverflow.com/users/7822790/dmitry-rocha"}, "is_accepted": false, "score": 0, "last_activity_date": 1546983957, "creation_date": 1546983957, "answer_id": 54100191, "question_id": 54094170, "link": "https://stackoverflow.com/questions/54094170/rail-cannot-load-such-file-rack-handler-rails-env-production-loaderror/54100191#54100191", "title": "Rail &quot;cannot load such file -- rack/handler/rails__env=production (LoadError)&quot;", "body": "<p>If you are running in your machine you should call something like:</p>\n\n<pre><code>bundle exec rails server -e production\n</code></pre>\n\n<p>In heroku you don't have to do anything. It will detect that you are running a Ruby on Rails application compile the assets and start it using the correct <code>rails server</code> command.</p>\n\n<p>Take a look at the logs in heroku:</p>\n\n<pre><code>heroku logs\n</code></pre>\n\n<p>The most common mistake is to forget to run the migrations, if there is the case run:</p>\n\n<pre><code>heroku run rake db:migrate\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6096243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac24bf612b9b35ab7dcb689a5016f317?s=128&d=identicon&r=PG&f=1", "display_name": "Niclaus Liu", "link": "https://stackoverflow.com/users/6096243/niclaus-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1387, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1547002890, "creation_date": 1546958574, "last_edit_date": 1547002890, "question_id": 54094170, "link": "https://stackoverflow.com/questions/54094170/rail-cannot-load-such-file-rack-handler-rails-env-production-loaderror", "title": "Rail &quot;cannot load such file -- rack/handler/rails__env=production (LoadError)&quot;", "body": "<p>I'm new to rails. My rails app works perfectly fine in development mode. But I got the error message in the title when I run \"rails server RAILS_ENV=production\". The app page also shows \"something went wrong\" when deployed on Heroku. I used CSS and added images for styling.</p>\n\n<p>I have run \"rake assets:precompile\" and \"RAILS_ENV=production bundle exec rake assets:precompile\", but that did not seem to change anything.</p>\n\n<p>I have also set the secret base key.</p>\n\n<p>I'm very confused now.</p>\n\n<p>Here is my database.yml file:</p>\n\n<pre><code># SQLite version 3.x\n#   gem install sqlite3\n#\n#   Ensure the SQLite 3 gem is defined in your Gemfile\n#   gem 'sqlite3'\n#\ndefault: &amp;default\n  adapter: sqlite3\n  pool: &lt;%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %&gt;\n  timeout: 5000\n\ndevelopment:\n  &lt;&lt;: *default\n  database: db/development.sqlite3\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  &lt;&lt;: *default\n  database: db/test.sqlite3\n\nproduction:\n  &lt;&lt;: *default\n  database: db/production.sqlite3\n</code></pre>\n\n<p>config/environments/production.rb file</p>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # Code is not reloaded between requests.\n  config.cache_classes = true\n\n  # Eager load code on boot. This eager loads most of Rails and\n  # your application in memory, allowing both threaded web servers\n  # and those relying on copy on write to perform better.\n  # Rake tasks automatically ignore this option for performance.\n  config.eager_load = true\n\n  # Full error reports are disabled and caching is turned on.\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n\n  # Attempt to read encrypted secrets from `config/secrets.yml.enc`.\n  # Requires an encryption key in `ENV[\"RAILS_MASTER_KEY\"]` or\n  # `config/secrets.yml.key`.\n  config.read_encrypted_secrets = true\n\n  # Disable serving static files from the `/public` folder by default since\n  # Apache or NGINX already handles this.\n  config.public_file_server.enabled = ENV['RAILS_SERVE_STATIC_FILES'].present?\n\n  # Compress JavaScripts and CSS.\n  config.assets.js_compressor = :uglifier\n  # config.assets.css_compressor = :sass\n\n  # Do not fallback to assets pipeline if a precompiled asset is missed.\n  config.assets.compile = false\n\n  # `config.assets.precompile` and `config.assets.version` have moved to config/initializers/assets.rb\n\n  # Enable serving of images, stylesheets, and JavaScripts from an asset server.\n  # config.action_controller.asset_host = 'http://assets.example.com'\n\n  # Specifies the header that your server uses for sending files.\n  # config.action_dispatch.x_sendfile_header = 'X-Sendfile' # for Apache\n  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for NGINX\n\n  # Mount Action Cable outside main process or domain\n  # config.action_cable.mount_path = nil\n  # config.action_cable.url = 'wss://example.com/cable'\n  # config.action_cable.allowed_request_origins = [ 'http://example.com', /http:\\/\\/example.*/ ]\n\n  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.\n  # config.force_ssl = true\n\n  # Use the lowest log level to ensure availability of diagnostic information\n  # when problems arise.\n  config.log_level = :debug\n\n  # Prepend all log lines with the following tags.\n  config.log_tags = [ :request_id ]\n\n  # Use a different cache store in production.\n  # config.cache_store = :mem_cache_store\n\n  # Use a real queuing backend for Active Job (and separate queues per environment)\n  # config.active_job.queue_adapter     = :resque\n  # config.active_job.queue_name_prefix = \"sample_app_#{Rails.env}\"\n  config.action_mailer.perform_caching = false\n\n  # Ignore bad email addresses and do not raise email delivery errors.\n  # Set this to true and configure the email server for immediate delivery to raise delivery errors.\n  # config.action_mailer.raise_delivery_errors = false\n\n  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n  # the I18n.default_locale when a translation cannot be found).\n  config.i18n.fallbacks = true\n\n  # Send deprecation notices to registered listeners.\n  config.active_support.deprecation = :notify\n\n  # Use default logging formatter so that PID and timestamp are not suppressed.\n  config.log_formatter = ::Logger::Formatter.new\n\n  # Use a different logger for distributed setups.\n  # require 'syslog/logger'\n  # config.logger = ActiveSupport::TaggedLogging.new(Syslog::Logger.new 'app-name')\n\n  if ENV[\"RAILS_LOG_TO_STDOUT\"].present?\n    logger           = ActiveSupport::Logger.new(STDOUT)\n    logger.formatter = config.log_formatter\n    config.logger    = ActiveSupport::TaggedLogging.new(logger)\n  end\n\n  # Do not dump schema after migrations.\n  config.active_record.dump_schema_after_migration = false\nend\n</code></pre>\n\n<p>production.log:</p>\n\n<pre><code>D, [2019-01-08T17:10:25.357047 #7073] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m\nD, [2019-01-08T17:10:25.363611 #7073] DEBUG -- :   [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE \"schema_migrations\" (\"version\" varchar NOT NULL PRIMARY KEY)[0m\nD, [2019-01-08T17:10:25.378994 #7073] DEBUG -- :   [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE \"ar_internal_metadata\" (\"key\" varchar NOT NULL PRIMARY KEY, \"value\" varchar, \"created_at\" datetime NOT NULL, \"updated_at\" datetime NOT NULL)[0m\nD, [2019-01-08T17:10:25.389773 #7073] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[34mSELECT \"schema_migrations\".\"version\" FROM \"schema_migrations\" ORDER BY \"schema_migrations\".\"version\" ASC[0m\nI, [2019-01-08T17:10:25.389869 #7073]  INFO -- : Migrating to CreateUsers (20190107033135)\nD, [2019-01-08T17:10:25.392644 #7073] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m\nD, [2019-01-08T17:10:25.394747 #7073] DEBUG -- :   [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE \"users\" (\"id\" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, \"name\" varchar, \"email\" varchar, \"created_at\" datetime NOT NULL, \"updated_at\" datetime NOT NULL)[0m\nD, [2019-01-08T17:10:25.398043 #7073] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO \"schema_migrations\" (\"version\") VALUES (?)[0m  [[\"version\", \"20190107033135\"]]\nD, [2019-01-08T17:10:25.409467 #7073] DEBUG -- :   [1m[35m (11.2ms)[0m  [1m[36mcommit transaction[0m\nI, [2019-01-08T17:10:25.409571 #7073]  INFO -- : Migrating to AddPasswordDigestToUsers (20190108070109)\nD, [2019-01-08T17:10:25.410533 #7073] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m\nD, [2019-01-08T17:10:25.412416 #7073] DEBUG -- :   [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE \"users\" ADD \"password_digest\" varchar[0m\nD, [2019-01-08T17:10:25.413900 #7073] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO \"schema_migrations\" (\"version\") VALUES (?)[0m  [[\"version\", \"20190108070109\"]]\nD, [2019-01-08T17:10:25.419022 #7073] DEBUG -- :   [1m[35m (4.8ms)[0m  [1m[36mcommit transaction[0m\nD, [2019-01-08T17:10:25.426027 #7073] DEBUG -- :   [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  \"ar_internal_metadata\".* FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = ? LIMIT ?[0m  [[\"key\", \"environment\"], [\"LIMIT\", 1]]\nD, [2019-01-08T17:10:25.438559 #7073] DEBUG -- :   [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m\nD, [2019-01-08T17:10:25.440730 #7073] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO \"ar_internal_metadata\" (\"key\", \"value\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)[0m  [[\"key\", \"environment\"], [\"value\", \"production\"], [\"created_at\", \"2019-01-08 09:10:25.438804\"], [\"updated_at\", \"2019-01-08 09:10:25.438804\"]]\nD, [2019-01-08T17:10:25.443677 #7073] DEBUG -- :   [1m[35m (2.8ms)[0m  [1m[36mcommit transaction[0m\nI, [2019-01-08T22:16:22.532530 #17657]  INFO -- : [c0464130-5e13-4634-8d0f-10cbcf05a7c9] Started GET \"/\" for 127.0.0.1 at 2019-01-08 22:16:22 +0800\nI, [2019-01-08T22:16:22.539041 #17657]  INFO -- : [c0464130-5e13-4634-8d0f-10cbcf05a7c9] Processing by StaticPagesController#home as HTML\nI, [2019-01-08T22:16:22.557513 #17657]  INFO -- : [c0464130-5e13-4634-8d0f-10cbcf05a7c9]   Rendering static_pages/home.html.erb within layouts/application\nI, [2019-01-08T22:16:22.562687 #17657]  INFO -- : [c0464130-5e13-4634-8d0f-10cbcf05a7c9]   Rendered static_pages/home.html.erb within layouts/application (5.0ms)\nI, [2019-01-08T22:16:22.562880 #17657]  INFO -- : [c0464130-5e13-4634-8d0f-10cbcf05a7c9] Completed 500 Internal Server Error in 24ms\nF, [2019-01-08T22:16:22.563908 #17657] FATAL -- : [c0464130-5e13-4634-8d0f-10cbcf05a7c9]   \nF, [2019-01-08T22:16:22.563949 #17657] FATAL -- : [c0464130-5e13-4634-8d0f-10cbcf05a7c9] ActionView::Template::Error (The asset \"cat.jpeg\" is not present in the asset pipeline.):\nF, [2019-01-08T22:16:22.564060 #17657] FATAL -- : [c0464130-5e13-4634-8d0f-10cbcf05a7c9]     10: &lt;/div&gt;\n[c0464130-5e13-4634-8d0f-10cbcf05a7c9]     11: \n[c0464130-5e13-4634-8d0f-10cbcf05a7c9]     12: &lt;div class=\"center\"&gt;\n[c0464130-5e13-4634-8d0f-10cbcf05a7c9]     13: &lt;%= link_to image_tag(\"cat.jpeg\", alt: \"Cat logo\"),\n[c0464130-5e13-4634-8d0f-10cbcf05a7c9]     14:     'http://rubyonrails.org' %&gt;\n[c0464130-5e13-4634-8d0f-10cbcf05a7c9]     15: &lt;/div&gt;\nF, [2019-01-08T22:16:22.564097 #17657] FATAL -- : [c0464130-5e13-4634-8d0f-10cbcf05a7c9]   \nF, [2019-01-08T22:16:22.564123 #17657] FATAL -- : [c0464130-5e13-4634-8d0f-10cbcf05a7c9] app/views/static_pages/home.html.erb:13:in `_app_views_static_pages_home_html_erb__3702704161608906257_47204760052880'\nI, [2019-01-08T22:16:23.922999 #17657]  INFO -- : [6e17805c-762e-46b7-9b5f-729658819f90] Started GET \"/\" for 127.0.0.1 at 2019-01-08 22:16:23 +0800\nI, [2019-01-08T22:16:23.923668 #17657]  INFO -- : [6e17805c-762e-46b7-9b5f-729658819f90] Processing by StaticPagesController#home as HTML\nI, [2019-01-08T22:16:23.924316 #17657]  INFO -- : [6e17805c-762e-46b7-9b5f-729658819f90]   Rendering static_pages/home.html.erb within layouts/application\nI, [2019-01-08T22:16:23.925411 #17657]  INFO -- : [6e17805c-762e-46b7-9b5f-729658819f90]   Rendered static_pages/home.html.erb within layouts/application (1.0ms)\nI, [2019-01-08T22:16:23.925590 #17657]  INFO -- : [6e17805c-762e-46b7-9b5f-729658819f90] Completed 500 Internal Server Error in 2ms\nF, [2019-01-08T22:16:23.931329 #17657] FATAL -- : [6e17805c-762e-46b7-9b5f-729658819f90]   \nF, [2019-01-08T22:16:23.931422 #17657] FATAL -- : [6e17805c-762e-46b7-9b5f-729658819f90] ActionView::Template::Error (The asset \"cat.jpeg\" is not present in the asset pipeline.):\nF, [2019-01-08T22:16:23.931555 #17657] FATAL -- : [6e17805c-762e-46b7-9b5f-729658819f90]     10: &lt;/div&gt;\n[6e17805c-762e-46b7-9b5f-729658819f90]     11: \n[6e17805c-762e-46b7-9b5f-729658819f90]     12: &lt;div class=\"center\"&gt;\n[6e17805c-762e-46b7-9b5f-729658819f90]     13: &lt;%= link_to image_tag(\"cat.jpeg\", alt: \"Cat logo\"),\n[6e17805c-762e-46b7-9b5f-729658819f90]     14:     'http://rubyonrails.org' %&gt;\n[6e17805c-762e-46b7-9b5f-729658819f90]     15: &lt;/div&gt;\nF, [2019-01-08T22:16:23.931581 #17657] FATAL -- : [6e17805c-762e-46b7-9b5f-729658819f90]   \nF, [2019-01-08T22:16:23.931605 #17657] FATAL -- : [6e17805c-762e-46b7-9b5f-729658819f90] app/views/static_pages/home.html.erb:13:in `_app_views_static_pages_home_html_erb__3702704161608906257_47204760052880'\nI, [2019-01-08T22:16:35.216117 #17657]  INFO -- : [ba2e99f7-7388-4d98-b3e8-24699961ce26] Started GET \"/\" for 127.0.0.1 at 2019-01-08 22:16:35 +0800\nI, [2019-01-08T22:16:35.216701 #17657]  INFO -- : [ba2e99f7-7388-4d98-b3e8-24699961ce26] Processing by StaticPagesController#home as HTML\nI, [2019-01-08T22:16:35.217283 #17657]  INFO -- : [ba2e99f7-7388-4d98-b3e8-24699961ce26]   Rendering static_pages/home.html.erb within layouts/application\nI, [2019-01-08T22:16:35.218220 #17657]  INFO -- : [ba2e99f7-7388-4d98-b3e8-24699961ce26]   Rendered static_pages/home.html.erb within layouts/application (0.9ms)\nI, [2019-01-08T22:16:35.218324 #17657]  INFO -- : [ba2e99f7-7388-4d98-b3e8-24699961ce26] Completed 500 Internal Server Error in 2ms\nF, [2019-01-08T22:16:35.221370 #17657] FATAL -- : [ba2e99f7-7388-4d98-b3e8-24699961ce26]   \nF, [2019-01-08T22:16:35.221453 #17657] FATAL -- : [ba2e99f7-7388-4d98-b3e8-24699961ce26] ActionView::Template::Error (The asset \"cat.jpeg\" is not present in the asset pipeline.):\nF, [2019-01-08T22:16:35.221604 #17657] FATAL -- : [ba2e99f7-7388-4d98-b3e8-24699961ce26]     10: &lt;/div&gt;\n[ba2e99f7-7388-4d98-b3e8-24699961ce26]     11: \n[ba2e99f7-7388-4d98-b3e8-24699961ce26]     12: &lt;div class=\"center\"&gt;\n[ba2e99f7-7388-4d98-b3e8-24699961ce26]     13: &lt;%= link_to image_tag(\"cat.jpeg\", alt: \"Cat logo\"),\n[ba2e99f7-7388-4d98-b3e8-24699961ce26]     14:     'http://rubyonrails.org' %&gt;\n[ba2e99f7-7388-4d98-b3e8-24699961ce26]     15: &lt;/div&gt;\nF, [2019-01-08T22:16:35.221634 #17657] FATAL -- : [ba2e99f7-7388-4d98-b3e8-24699961ce26]   \nF, [2019-01-08T22:16:35.221659 #17657] FATAL -- : [ba2e99f7-7388-4d98-b3e8-24699961ce26] app/views/static_pages/home.html.erb:13:in `_app_views_static_pages_home_html_erb__3702704161608906257_47204760052880'\nI, [2019-01-08T22:19:06.415479 #17772]  INFO -- : [e767e84b-ad18-4665-b34d-8fe6f06c1617] Started GET \"/\" for 127.0.0.1 at 2019-01-08 22:19:06 +0800\nI, [2019-01-08T22:19:06.464918 #17772]  INFO -- : [e767e84b-ad18-4665-b34d-8fe6f06c1617] Processing by StaticPagesController#home as HTML\nI, [2019-01-08T22:19:06.481732 #17772]  INFO -- : [e767e84b-ad18-4665-b34d-8fe6f06c1617]   Rendering static_pages/home.html.erb within layouts/application\nI, [2019-01-08T22:19:06.483232 #17772]  INFO -- : [e767e84b-ad18-4665-b34d-8fe6f06c1617]   Rendered static_pages/home.html.erb within layouts/application (1.4ms)\nI, [2019-01-08T22:19:06.487443 #17772]  INFO -- : [e767e84b-ad18-4665-b34d-8fe6f06c1617] Completed 500 Internal Server Error in 18ms\nF, [2019-01-08T22:19:06.489384 #17772] FATAL -- : [e767e84b-ad18-4665-b34d-8fe6f06c1617]   \nF, [2019-01-08T22:19:06.489432 #17772] FATAL -- : [e767e84b-ad18-4665-b34d-8fe6f06c1617] ActionView::Template::Error (The asset \"cat.jpeg\" is not present in the asset pipeline.):\nF, [2019-01-08T22:19:06.489538 #17772] FATAL -- : [e767e84b-ad18-4665-b34d-8fe6f06c1617]     10: &lt;/div&gt;\n[e767e84b-ad18-4665-b34d-8fe6f06c1617]     11: \n[e767e84b-ad18-4665-b34d-8fe6f06c1617]     12: &lt;div class=\"center\"&gt;\n[e767e84b-ad18-4665-b34d-8fe6f06c1617]     13: &lt;%= link_to image_tag(\"cat.jpeg\", alt: \"Cat logo\"),\n[e767e84b-ad18-4665-b34d-8fe6f06c1617]     14:     'http://rubyonrails.org' %&gt;\n[e767e84b-ad18-4665-b34d-8fe6f06c1617]     15: &lt;/div&gt;\nF, [2019-01-08T22:19:06.489562 #17772] FATAL -- : [e767e84b-ad18-4665-b34d-8fe6f06c1617]   \nF, [2019-01-08T22:19:06.489586 #17772] FATAL -- : [e767e84b-ad18-4665-b34d-8fe6f06c1617] app/views/static_pages/home.html.erb:13:in `_app_views_static_pages_home_html_erb___2313651232112027984_46983187185460'\nI, [2019-01-08T22:19:06.775918 #17772]  INFO -- : [3ff8acbe-1d21-4b7d-9931-5408bdace3a7] Started GET \"/favicon.ico\" for 127.0.0.1 at 2019-01-08 22:19:06 +0800\nF, [2019-01-08T22:19:06.776587 #17772] FATAL -- : [3ff8acbe-1d21-4b7d-9931-5408bdace3a7]   \nF, [2019-01-08T22:19:06.776629 #17772] FATAL -- : [3ff8acbe-1d21-4b7d-9931-5408bdace3a7] ActionController::RoutingError (No route matches [GET] \"/favicon.ico\"):\nF, [2019-01-08T22:19:06.776653 #17772] FATAL -- : [3ff8acbe-1d21-4b7d-9931-5408bdace3a7]   \nF, [2019-01-08T22:19:06.776684 #17772] FATAL -- : [3ff8acbe-1d21-4b7d-9931-5408bdace3a7] actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] rack (2.0.6) lib/rack/method_override.rb:22:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] rack (2.0.6) lib/rack/runtime.rb:22:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] rack (2.0.6) lib/rack/sendfile.rb:111:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] railties (5.1.6) lib/rails/engine.rb:522:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] puma (3.9.1) lib/puma/configuration.rb:224:in `call'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] puma (3.9.1) lib/puma/server.rb:602:in `handle_request'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] puma (3.9.1) lib/puma/server.rb:435:in `process_client'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] puma (3.9.1) lib/puma/server.rb:299:in `block in run'\n[3ff8acbe-1d21-4b7d-9931-5408bdace3a7] puma (3.9.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\nI, [2019-01-08T23:12:04.655503 #18495]  INFO -- : [858614f1-263c-4425-ad29-28216da4ba7c] Started GET \"/\" for 127.0.0.1 at 2019-01-08 23:12:04 +0800\nI, [2019-01-08T23:12:04.664984 #18495]  INFO -- : [858614f1-263c-4425-ad29-28216da4ba7c] Processing by StaticPagesController#home as HTML\nI, [2019-01-08T23:12:04.683226 #18495]  INFO -- : [858614f1-263c-4425-ad29-28216da4ba7c]   Rendering static_pages/home.html.erb within layouts/application\nI, [2019-01-08T23:12:04.685590 #18495]  INFO -- : [858614f1-263c-4425-ad29-28216da4ba7c]   Rendered static_pages/home.html.erb within layouts/application (2.1ms)\nI, [2019-01-08T23:12:04.689870 #18495]  INFO -- : [858614f1-263c-4425-ad29-28216da4ba7c] Completed 500 Internal Server Error in 25ms\nF, [2019-01-08T23:12:04.690919 #18495] FATAL -- : [858614f1-263c-4425-ad29-28216da4ba7c]   \nF, [2019-01-08T23:12:04.690961 #18495] FATAL -- : [858614f1-263c-4425-ad29-28216da4ba7c] ActionView::Template::Error (The asset \"cat.jpeg\" is not present in the asset pipeline.):\nF, [2019-01-08T23:12:04.691131 #18495] FATAL -- : [858614f1-263c-4425-ad29-28216da4ba7c]     10: &lt;/div&gt;\n[858614f1-263c-4425-ad29-28216da4ba7c]     11: \n[858614f1-263c-4425-ad29-28216da4ba7c]     12: &lt;div class=\"center\"&gt;\n[858614f1-263c-4425-ad29-28216da4ba7c]     13: &lt;%= link_to image_tag(\"cat.jpeg\", alt: \"Cat logo\"),\n[858614f1-263c-4425-ad29-28216da4ba7c]     14:     'http://rubyonrails.org' %&gt;\n[858614f1-263c-4425-ad29-28216da4ba7c]     15: &lt;/div&gt;\nF, [2019-01-08T23:12:04.691166 #18495] FATAL -- : [858614f1-263c-4425-ad29-28216da4ba7c]   \nF, [2019-01-08T23:12:04.691193 #18495] FATAL -- : [858614f1-263c-4425-ad29-28216da4ba7c] app/views/static_pages/home.html.erb:13:in `_app_views_static_pages_home_html_erb__2565625493209092932_47386803073300'\nI, [2019-01-08T23:12:05.013639 #18495]  INFO -- : [412499ac-0294-4208-8ef0-bcba8d7a7b2f] Started GET \"/favicon.ico\" for 127.0.0.1 at 2019-01-08 23:12:05 +0800\nF, [2019-01-08T23:12:05.014374 #18495] FATAL -- : [412499ac-0294-4208-8ef0-bcba8d7a7b2f]   \nF, [2019-01-08T23:12:05.014436 #18495] FATAL -- : [412499ac-0294-4208-8ef0-bcba8d7a7b2f] ActionController::RoutingError (No route matches [GET] \"/favicon.ico\"):\nF, [2019-01-08T23:12:05.014473 #18495] FATAL -- : [412499ac-0294-4208-8ef0-bcba8d7a7b2f]   \nF, [2019-01-08T23:12:05.014517 #18495] FATAL -- : [412499ac-0294-4208-8ef0-bcba8d7a7b2f] actionpack (5.1.6) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] actionpack (5.1.6) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] railties (5.1.6) lib/rails/rack/logger.rb:36:in `call_app'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] railties (5.1.6) lib/rails/rack/logger.rb:24:in `block in call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `block in tagged'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] activesupport (5.1.6) lib/active_support/tagged_logging.rb:26:in `tagged'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] activesupport (5.1.6) lib/active_support/tagged_logging.rb:69:in `tagged'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] railties (5.1.6) lib/rails/rack/logger.rb:24:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] actionpack (5.1.6) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] actionpack (5.1.6) lib/action_dispatch/middleware/request_id.rb:25:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] rack (2.0.6) lib/rack/method_override.rb:22:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] rack (2.0.6) lib/rack/runtime.rb:22:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] activesupport (5.1.6) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] actionpack (5.1.6) lib/action_dispatch/middleware/executor.rb:12:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] rack (2.0.6) lib/rack/sendfile.rb:111:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] railties (5.1.6) lib/rails/engine.rb:522:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] puma (3.9.1) lib/puma/configuration.rb:224:in `call'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] puma (3.9.1) lib/puma/server.rb:602:in `handle_request'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] puma (3.9.1) lib/puma/server.rb:435:in `process_client'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] puma (3.9.1) lib/puma/server.rb:299:in `block in run'\n[412499ac-0294-4208-8ef0-bcba8d7a7b2f] puma (3.9.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\nI, [2019-01-08T23:12:09.482461 #18495]  INFO -- : [5b65a6f0-4544-4092-a0f8-971e68a3a163] Started GET \"/\" for 127.0.0.1 at 2019-01-08 23:12:09 +0800\nI, [2019-01-08T23:12:09.483182 #18495]  INFO -- : [5b65a6f0-4544-4092-a0f8-971e68a3a163] Processing by StaticPagesController#home as HTML\nI, [2019-01-08T23:12:09.483849 #18495]  INFO -- : [5b65a6f0-4544-4092-a0f8-971e68a3a163]   Rendering static_pages/home.html.erb within layouts/application\nI, [2019-01-08T23:12:09.484923 #18495]  INFO -- : [5b65a6f0-4544-4092-a0f8-971e68a3a163]   Rendered static_pages/home.html.erb within layouts/application (1.0ms)\nI, [2019-01-08T23:12:09.485027 #18495]  INFO -- : [5b65a6f0-4544-4092-a0f8-971e68a3a163] Completed 500 Internal Server Error in 2ms\nF, [2019-01-08T23:12:09.486572 #18495] FATAL -- : [5b65a6f0-4544-4092-a0f8-971e68a3a163]   \nF, [2019-01-08T23:12:09.486679 #18495] FATAL -- : [5b65a6f0-4544-4092-a0f8-971e68a3a163] ActionView::Template::Error (The asset \"cat.jpeg\" is not present in the asset pipeline.):\nF, [2019-01-08T23:12:09.486855 #18495] FATAL -- : [5b65a6f0-4544-4092-a0f8-971e68a3a163]     10: &lt;/div&gt;\n[5b65a6f0-4544-4092-a0f8-971e68a3a163]     11: \n[5b65a6f0-4544-4092-a0f8-971e68a3a163]     12: &lt;div class=\"center\"&gt;\n[5b65a6f0-4544-4092-a0f8-971e68a3a163]     13: &lt;%= link_to image_tag(\"cat.jpeg\", alt: \"Cat logo\"),\n[5b65a6f0-4544-4092-a0f8-971e68a3a163]     14:     'http://rubyonrails.org' %&gt;\n[5b65a6f0-4544-4092-a0f8-971e68a3a163]     15: &lt;/div&gt;\nF, [2019-01-08T23:12:09.486881 #18495] FATAL -- : [5b65a6f0-4544-4092-a0f8-971e68a3a163]   \nF, [2019-01-08T23:12:09.486955 #18495] FATAL -- : [5b65a6f0-4544-4092-a0f8-971e68a3a163] app/views/static_pages/home.html.erb:13:in `_app_views_static_pages_home_html_erb__2565625493209092932_47386803073300'\nI, [2019-01-08T23:13:02.176411 #18521]  INFO -- : [7093aa4a-ce55-426e-be7c-db8144a4931b] Started GET \"/\" for 127.0.0.1 at 2019-01-08 23:13:02 +0800\nI, [2019-01-08T23:13:02.187432 #18521]  INFO -- : [7093aa4a-ce55-426e-be7c-db8144a4931b] Processing by StaticPagesController#home as HTML\nI, [2019-01-08T23:13:02.205465 #18521]  INFO -- : [7093aa4a-ce55-426e-be7c-db8144a4931b]   Rendering static_pages/home.html.erb within layouts/application\nI, [2019-01-08T23:13:02.209532 #18521]  INFO -- : [7093aa4a-ce55-426e-be7c-db8144a4931b]   Rendered static_pages/home.html.erb within layouts/application (3.9ms)\nI, [2019-01-08T23:13:02.209752 #18521]  INFO -- : [7093aa4a-ce55-426e-be7c-db8144a4931b] Completed 500 Internal Server Error in 22ms\nF, [2019-01-08T23:13:02.211944 #18521] FATAL -- : [7093aa4a-ce55-426e-be7c-db8144a4931b]   \nF, [2019-01-08T23:13:02.212100 #18521] FATAL -- : [7093aa4a-ce55-426e-be7c-db8144a4931b] ActionView::Template::Error (The asset \"cat.jpeg\" is not present in the asset pipeline.):\nF, [2019-01-08T23:13:02.212263 #18521] FATAL -- : [7093aa4a-ce55-426e-be7c-db8144a4931b]     10: &lt;/div&gt;\n[7093aa4a-ce55-426e-be7c-db8144a4931b]     11: \n[7093aa4a-ce55-426e-be7c-db8144a4931b]     12: &lt;div class=\"center\"&gt;\n[7093aa4a-ce55-426e-be7c-db8144a4931b]     13: &lt;%= link_to image_tag(\"cat.jpeg\", alt: \"Cat logo\"),\n[7093aa4a-ce55-426e-be7c-db8144a4931b]     14:     'http://rubyonrails.org' %&gt;\n[7093aa4a-ce55-426e-be7c-db8144a4931b]     15: &lt;/div&gt;\nF, [2019-01-08T23:13:02.214315 #18521] FATAL -- : [7093aa4a-ce55-426e-be7c-db8144a4931b]   \nF, [2019-01-08T23:13:02.214366 #18521] FATAL -- : [7093aa4a-ce55-426e-be7c-db8144a4931b] app/views/static_pages/home.html.erb:13:in `_app_views_static_pages_home_html_erb___1013939282347745016_47015315334380'\n</code></pre>\n\n<p>Thanks for any help/tips/suggestions!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "edited": false, "score": 0, "creation_date": 1546958343, "post_id": 54093994, "comment_id": 95020182, "body": "Can you please add the whole <code>params</code>? I think, the problem will be in <code>report_params</code> method, but I&#39;d like to be specific."}, {"owner": {"reputation": 181, "user_id": 5724906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ba2cda68a7916b7c97d60b52c1110ef?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/5724906/tomasz"}, "reply_to_user": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "edited": false, "score": 0, "creation_date": 1546958679, "post_id": 54093994, "comment_id": 95020397, "body": "I add whole params in first post"}], "answers": [{"tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1546959359, "last_edit_date": 1546959359, "creation_date": 1546958938, "answer_id": 54094275, "question_id": 54093994, "link": "https://stackoverflow.com/questions/54093994/action-controller-exception-undefined-method-merge-for-xxxstring/54094275#54094275", "title": "Action Controller exception undefined method `merge&#39; for xxx:String", "body": "<p><a href=\"https://github.com/rails/rails/blob/94b5cd3a20edadd6f6b8cf0bdf1a4d4919df86cb/actionpack/lib/action_controller/metal/strong_parameters.rb#L437\" rel=\"nofollow noreferrer\">ActionController::Parameters#require</a> returns the value of the required key in the params.  Usually this would be an object passed back from a form.  In <a href=\"https://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-permit\" rel=\"nofollow noreferrer\">this example</a> <code>require</code> would return <code>{name: \"Francesco\", age: 22, role: \"admin\"}</code> and merge would work.</p>\n\n<p>Your view is sending back parameters that Rails is formatting into <code>{post: 'string'}</code>.  We would need to see your view code to determine what exactly needs to change.</p>\n\n<p>Update: From the new code posted we can see that the parameter sent back is <code>\"post\"=&gt;\"1\"</code>.  Normally we would be expecting <code>post: {id: 1, ...}</code>.</p>\n\n<p>Update: The button in the view would need the <code>params</code> key updated to something ala <s><code>params: {post: {id: post.id}}</code></s> EDIT: I agree that <code>params: {report: { post_id: post}}</code> is a better format.</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 5724906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ba2cda68a7916b7c97d60b52c1110ef?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/5724906/tomasz"}, "edited": false, "score": 0, "creation_date": 1546959791, "post_id": 54094330, "comment_id": 95021133, "body": "When i change to <code>params.require(:report)...</code> I got ActiveModel::ForbiddenAttributesError"}], "tags": [], "owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "is_accepted": false, "score": 0, "last_activity_date": 1547036012, "last_edit_date": 1547036012, "creation_date": 1546959151, "answer_id": 54094330, "question_id": 54093994, "link": "https://stackoverflow.com/questions/54093994/action-controller-exception-undefined-method-merge-for-xxxstring/54094330#54094330", "title": "Action Controller exception undefined method `merge&#39; for xxx:String", "body": "<p>The problem seems to be in <code>report_params</code>. When you call <code>params.require(:post)</code>, it fetches :post from params -> the result is string. And you are calling <code>merge</code> on this string.</p>\n\n<p>I'd recommend change in view: </p>\n\n<pre><code>= button_to \"Report\", reports_path, method: :post, params: { report: { post_id: post} }\n</code></pre>\n\n<p>then in controller: </p>\n\n<pre><code>def report_params\n  params.require(:report).permit(:post_id).merge(reporting_user_id: current_author.id)\nend\n</code></pre>\n\n<p>Note, that I changed also the naming according to conventions: model_id for id of the model, model or model itself.</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 5724906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ba2cda68a7916b7c97d60b52c1110ef?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/5724906/tomasz"}, "edited": false, "score": 0, "creation_date": 1546960943, "post_id": 54094512, "comment_id": 95021903, "body": "Thanks. It&#39;s almost work but now i got error <code>can&#39;t write unknown attribute &#39;reporting_user_id&#39;</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 181, "user_id": 5724906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ba2cda68a7916b7c97d60b52c1110ef?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/5724906/tomasz"}, "edited": false, "score": 1, "creation_date": 1546961046, "post_id": 54094512, "comment_id": 95021972, "body": "You need to ensure that your reports table has a <code>reporting_user_id</code> and <code>post_id</code> columns. If you don&#39;t you need to add them through a migration."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1546961350, "last_edit_date": 1546961350, "creation_date": 1546959760, "answer_id": 54094512, "question_id": 54093994, "link": "https://stackoverflow.com/questions/54093994/action-controller-exception-undefined-method-merge-for-xxxstring/54094512#54094512", "title": "Action Controller exception undefined method `merge&#39; for xxx:String", "body": "<p>To start with you want to use <code>belongs_to</code> and not <code>has_one</code>.</p>\n\n<pre><code>class Report &lt; ApplicationRecord\n  belongs_to :reporting_user, class_name: 'Author'\n  belongs_to :post\nend\n</code></pre>\n\n<p>This correctly places the <code>post_id</code> foreign key column on <code>reports</code>. Using <code>has_one</code> places the fk column on <code>posts</code> which won't work.</p>\n\n<p>And a generally superior solution would be to make reports <a href=\"https://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow noreferrer\">a nested resource</a>:</p>\n\n<pre><code># /config/routes.rb\nresources :posts do\n  resources :reports, only: [:create]\nend\n\n# app/controller/reports_controller.rb\nclass ReportsController\n  before_action :set_post\n\n  # POST /posts/:post_id/reports\n  def create\n    @report = @post.reports.new(reporting_user: current_author)\n    if @report.save\n      flash[:notice] = 'Reported'\n    else\n      flash[:notice] = report.errors.full_messages.join('. ')\n    end\n    redirect_to @post\n  end\n\n  private\n\n  def set_post \n    @post = Post.find(params[:post_id])\n  end\nend\n</code></pre>\n\n<p>This lets you simplify the button to just:</p>\n\n<pre><code>= button_to \"Report\", post_reports_path(post), method: :post\n</code></pre>\n\n<p>Since the <code>post_id</code> is part of the path we don't need to send any additional params.</p>\n\n<p>If you do want to let the user pass additional info through a form in the future a better way to create/update resources with params and session data is by passing a block:</p>\n\n<pre><code>@report = @post.reports.new(report_params) do |r|\n  r.reporting_user = current_user\nend\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 5724906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4ba2cda68a7916b7c97d60b52c1110ef?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz", "link": "https://stackoverflow.com/users/5724906/tomasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 54094512, "answer_count": 3, "score": 1, "last_activity_date": 1547036012, "creation_date": 1546957982, "last_edit_date": 1546958617, "question_id": 54093994, "link": "https://stackoverflow.com/questions/54093994/action-controller-exception-undefined-method-merge-for-xxxstring", "title": "Action Controller exception undefined method `merge&#39; for xxx:String", "body": "<p>I'm doing simple Reddit like site. I'm trying to add button to reporting posts. I create <code>report</code> model, using <code>button_to</code> i try to post data to <code>report controller</code> to create it but i received  <code>NoMethodError in ReportsController#create undefined method merge' for \"post_id\":String</code></p>\n\n<p>model/report.rb</p>\n\n<pre><code>class Report &lt; ApplicationRecord\n  belongs_to :reporting_user, class_name: 'Author'\n  has_one :post\nend\n</code></pre>\n\n<p>report_controller.rb</p>\n\n<pre><code>class ReportsController &lt; ApplicationController\n  def create\n    report = Report.new(report_params)\n\n    flash[:notice] = if report.save\n                       'Raported'\n                     else\n                       report.errors.full_messages.join('. ')\n                     end\n  end\n\n  def report_params\n    params.require(:post).merge(reporting_user: current_author.id)\n  end\n\nend\n</code></pre>\n\n<p>and button in view</p>\n\n<pre><code>= button_to \"Report\", reports_path, method: :post, params: {post: post}\n</code></pre>\n\n<p>What cause that problem?</p>\n\n<p>edit:</p>\n\n<p>params</p>\n\n<p><code>=&gt; &lt;ActionController::Parameters {\"authenticity_token\"=&gt;\"sX0DQfM0rp97q8i16LGZfXPoSJNx15Hk4mmP35uFVh52bzVa30ei/Bxk/Bm40gnFmd2NvFEqj+Wze8ted66kig==\", \"post\"=&gt;\"1\", \"controller\"=&gt;\"reports\", \"action\"=&gt;\"create\"} permitted: false&gt;</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1546961935, "post_id": 54093670, "comment_id": 95022514, "body": "What do you mean by &quot;download an image from a URL&quot;? Do you mean that want the user to be able to download the image from your rails app or that you want your server to download an image from the internet and store it with paperclip? The tutorial you have linked is about the later."}, {"owner": {"reputation": 19, "user_id": 10427533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-94IWqhH1K7M/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWaFiUwt8NzcJGJtxAPqwuk9xGKmw/mo/photo.jpg?sz=128", "display_name": "Adarsh KL", "link": "https://stackoverflow.com/users/10427533/adarsh-kl"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1546963261, "post_id": 54093670, "comment_id": 95023319, "body": "Download from internet."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1546963457, "post_id": 54093670, "comment_id": 95023443, "body": "Its still not very clear how and where you want this to happen. If you can write a general outline in terms of &quot;When the user does X I expect Y to happen&quot; that will help us give you answers that are actually relevant."}, {"owner": {"reputation": 19, "user_id": 10427533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-94IWqhH1K7M/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWaFiUwt8NzcJGJtxAPqwuk9xGKmw/mo/photo.jpg?sz=128", "display_name": "Adarsh KL", "link": "https://stackoverflow.com/users/10427533/adarsh-kl"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1547010873, "post_id": 54093670, "comment_id": 95039697, "body": "i want to download image from internet, part 1 =i do upload image form computer and save to image table  it work properly, part 2 =now i want to download image form internet using same image model or using new model."}], "answers": [{"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1546962966, "post_id": 54093874, "comment_id": 95023144, "body": "What does the second arg do here? The <a href=\"https://www.rubydoc.info/github/thoughtbot/paperclip/Paperclip%2FAttachment:url\" rel=\"nofollow noreferrer\">docs</a> show this as being for an options hash?"}], "tags": [], "owner": {"reputation": 408, "user_id": 8051788, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/fYT2M.jpg?s=128&g=1", "display_name": "Akash Kinwad", "link": "https://stackoverflow.com/users/8051788/akash-kinwad"}, "is_accepted": false, "score": 0, "last_activity_date": 1546957550, "creation_date": 1546957550, "answer_id": 54093874, "question_id": 54093670, "link": "https://stackoverflow.com/questions/54093670/how-can-i-download-internet-image-from-a-url-using-paperclip-gem-in-rails/54093874#54093874", "title": "How can i download internet image from a URL using paperclip gem in rails?", "body": "<p>Try this,</p>\n\n<pre><code>&lt;%= link_to \"Download\", page.item_image.url(:original, false) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10427533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-94IWqhH1K7M/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWaFiUwt8NzcJGJtxAPqwuk9xGKmw/mo/photo.jpg?sz=128", "display_name": "Adarsh KL", "link": "https://stackoverflow.com/users/10427533/adarsh-kl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547013542, "creation_date": 1546956826, "last_edit_date": 1547013542, "question_id": 54093670, "link": "https://stackoverflow.com/questions/54093670/how-can-i-download-internet-image-from-a-url-using-paperclip-gem-in-rails", "title": "How can i download internet image from a URL using paperclip gem in rails?", "body": "<p>I'm new to rails,I want to download image from internet through url. </p>\n\n<p>i refer this tutorial <a href=\"https://mensfeld.pl/2013/12/rails-paperclip-open-uri-downloading-files-from-the-internet-and-saving-them-with-paperclip/\" rel=\"nofollow noreferrer\">link</a>  but i am confused, where i want add this code in controller or model or in view.\npls help me where i add code or better way.</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8720581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a46dbf8d74baf889f9056433606e38c4?s=128&d=identicon&r=PG&f=1", "display_name": "mangeshchef", "link": "https://stackoverflow.com/users/8720581/mangeshchef"}, "edited": false, "score": 0, "creation_date": 1547033375, "post_id": 54098929, "comment_id": 95050311, "body": "Thanks!, Yeah that would work for me, but I am expecting to achieve this with less complexity . Please suggest if there is anything which could be done here to stop the loop. Thanks"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1546977666, "creation_date": 1546977666, "answer_id": 54098929, "question_id": 54092910, "link": "https://stackoverflow.com/questions/54092910/how-to-break-or-stop-ruby-block-running-in-loop-cause-of-subscribes/54098929#54098929", "title": "How to break or stop ruby_block running in loop cause of &quot;subscribes&quot;", "body": "<p>Make a custom resource instead, you want more explicit control over things than the DSL will give you.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8720581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a46dbf8d74baf889f9056433606e38c4?s=128&d=identicon&r=PG&f=1", "display_name": "mangeshchef", "link": "https://stackoverflow.com/users/8720581/mangeshchef"}, "edited": false, "score": 0, "creation_date": 1547726868, "post_id": 54118904, "comment_id": 95295756, "body": "Thanks David M  service I am trying to start is not registered, I have to start it by going to a particular  location and use the shell command, thus opted for execute resource. and @coderanger, Yeah I have created a custom resource to achieve this  Thanks for your valuable inputs here folks :) I have cre"}], "tags": [], "owner": {"reputation": 4026, "user_id": 182811, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/96b3b4a6c0c2288b29164f36cd4fbfb7?s=128&d=identicon&r=PG", "display_name": "David M", "link": "https://stackoverflow.com/users/182811/david-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1547070693, "creation_date": 1547070693, "answer_id": 54118904, "question_id": 54092910, "link": "https://stackoverflow.com/questions/54092910/how-to-break-or-stop-ruby-block-running-in-loop-cause-of-subscribes/54118904#54118904", "title": "How to break or stop ruby_block running in loop cause of &quot;subscribes&quot;", "body": "<p>It looks as though you have a <code>ruby_block</code> resource that is both subscribing to and notifying the same <code>execute</code> resource, which is probably always the wrong thing to do.</p>\n\n<p>Why are you using <code>ruby_block</code> and <code>execute</code> resources instead of just a <code>service</code> resource?</p>\n\n<p>Your recipe looks more like you are thinking of Chef of something you tell to do things in a particular way. Instead, Chef recipes should be a description of a state you want to assert, and then let Chef figure out how to achieve that state. Tell Chef you want your service to be running, and worry about adding more detail if and only if that doesn't work. It is uncommon to need to provide that extra detail.</p>\n"}], "owner": {"reputation": 13, "user_id": 8720581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a46dbf8d74baf889f9056433606e38c4?s=128&d=identicon&r=PG&f=1", "display_name": "mangeshchef", "link": "https://stackoverflow.com/users/8720581/mangeshchef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 54098929, "answer_count": 2, "score": 1, "last_activity_date": 1547070693, "creation_date": 1546954228, "last_edit_date": 1592644375, "question_id": 54092910, "link": "https://stackoverflow.com/questions/54092910/how-to-break-or-stop-ruby-block-running-in-loop-cause-of-subscribes", "title": "How to break or stop ruby_block running in loop cause of &quot;subscribes&quot;", "body": "<p>Hi have a recipe where I am trying to check if a service is running and accessible.</p>\n<p>So I have a &quot;<strong>ruby_block</strong>&quot; which checks if service is running if not it &quot;<strong>notifies</strong>&quot; to &quot;<strong>execute</strong>&quot; block to start it, once execute block starts the service I need to again check if it running by calling &quot;ruby_block&quot; using &quot;<strong>subscribes</strong>&quot;\nBut when service fails to start &quot;<strong>ruby_block</strong>&quot; goes in unstoppable  loop.</p>\n<h1>Below is recipe which describes the workflow</h1>\n<pre><code>ruby_block 'check_if_Service_running' do\n\n  block do\n    # ...some logic to check service\n\n    # generates a return code 301 if successful or any other value if fails and \n    # assign it to an attribute check eg. value = return_code   \n  end\n\n  notifies :run, 'execute['start_service']', :immediately\n  subscribes :run,'execute[Start_Service]', :immediately\nend\n\nexecute 'Start_Service' do\n  #...code to start the service\n\n  \n  action :nothing\n\n  not_if { value == 301 }\nend\n</code></pre>\n<hr />\n<p>So in this case when Services fails to start even after execute block, ruby_block keeps on running and notify &quot;execute&quot; block and so on</p>\n<h1>note: when service starts successfully it does show expected behavior</h1>\n<p>But some times when service does not start it goes in loop</p>\n<p>Please help me here to stop &quot;ruby_block&quot; being going in loop cause of subscribes for more than 2 times and stop everything (loop) if service felt to start</p>\n<p>Any help will be appreciated!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546954290, "post_id": 54092719, "comment_id": 95017720, "body": "In your typicode link all of the <code>title</code> entries are missing the comma at the end of the line  <code>{</code>     <code>&quot;UserId&quot;: 1,</code>     <code>&quot;Id&quot;: 1,</code>     <code>&quot;Title&quot;: &quot;selected either the&quot;</code> &lt;- no comma     <code>&quot;Completed&quot; false</code>   <code>}</code> This will be cause an error if it is in the real data also. EDIT: Also missing commas between each object."}, {"owner": {"reputation": 57, "user_id": 9978135, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-v9ms10zxknY/AAAAAAAAAAI/AAAAAAAAAEY/sPn8sU4eOR0/photo.jpg?sz=128", "display_name": "Jacck Mark", "link": "https://stackoverflow.com/users/9978135/jacck-mark"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546955084, "post_id": 54092719, "comment_id": 95018189, "body": "I don&#39;t see a problem (maybe i am missing something) but when i try to grab the response this looks perfectly fine and also when i go to given link chrome is showing me regular JSONs, looking like that: [   {     &quot;userId&quot;: 1,     &quot;id&quot;: 1,     &quot;title&quot;: &quot;delectus aut autem&quot;,     &quot;completed&quot;: false   },....]"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546955738, "post_id": 54092719, "comment_id": 95018591, "body": "oh man, my bad.  I had translated the page without thinking and it messed up the formatting. :facepalm:"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 9978135, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-v9ms10zxknY/AAAAAAAAAAI/AAAAAAAAAEY/sPn8sU4eOR0/photo.jpg?sz=128", "display_name": "Jacck Mark", "link": "https://stackoverflow.com/users/9978135/jacck-mark"}, "edited": false, "score": 0, "creation_date": 1546954683, "post_id": 54092933, "comment_id": 95017942, "body": "Wow this works like a charm.Thank you for your help (i was trying to check this as the right answer but i dont have right amount of reputation points)."}, {"owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "reply_to_user": {"reputation": 57, "user_id": 9978135, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-v9ms10zxknY/AAAAAAAAAAI/AAAAAAAAAEY/sPn8sU4eOR0/photo.jpg?sz=128", "display_name": "Jacck Mark", "link": "https://stackoverflow.com/users/9978135/jacck-mark"}, "edited": false, "score": 1, "creation_date": 1546954911, "post_id": 54092933, "comment_id": 95018069, "body": "You are welcome. Hmm, you should be able to accept an answer whatever your reputation is. Try following this: <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>"}, {"owner": {"reputation": 57, "user_id": 9978135, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-v9ms10zxknY/AAAAAAAAAAI/AAAAAAAAAEY/sPn8sU4eOR0/photo.jpg?sz=128", "display_name": "Jacck Mark", "link": "https://stackoverflow.com/users/9978135/jacck-mark"}, "edited": false, "score": 1, "creation_date": 1546957427, "post_id": 54092933, "comment_id": 95019594, "body": "Done. Thank you"}], "tags": [], "owner": {"reputation": 6190, "user_id": 5029266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7d4922cf09a8b3d3195cd4d848091ba3?s=128&d=identicon&r=PG", "display_name": "EugZol", "link": "https://stackoverflow.com/users/5029266/eugzol"}, "is_accepted": true, "score": 2, "last_activity_date": 1546954293, "creation_date": 1546954293, "answer_id": 54092933, "question_id": 54092719, "link": "https://stackoverflow.com/questions/54092719/searching-filtering-json-array-with-key-value-condition/54092933#54092933", "title": "Searching (filtering) JSON array with &#39;key == value&#39; condition", "body": "<p>Here's working code snippet:</p>\n\n<pre><code>require 'httpclient'\nrequire 'json'\n\nclient = HTTPClient.new\nmethod = 'GET'\nurl = URI.parse 'https://jsonplaceholder.typicode.com/todos'\nres = client.request method, url\ndd = JSON.parse(res.body)\n\n# Use word['completed'] instead of word.completed here:\nputs dd.select { |word| !word['completed'] }\n\n# Use 'any?' array (Enumerable) method to check\n# if any member of the array satisfies given condition:\nputs dd.any? { |word| word['title'] == 'temporibus atque distinctio omnis eius impedit tempore molestias pariatur' }\n</code></pre>\n\n<p>Documentation for <code>#any?</code> could be found here: <a href=\"https://apidock.com/ruby/Enumerable/any%3F\" rel=\"nofollow noreferrer\">https://apidock.com/ruby/Enumerable/any%3F</a></p>\n"}], "owner": {"reputation": 57, "user_id": 9978135, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-v9ms10zxknY/AAAAAAAAAAI/AAAAAAAAAEY/sPn8sU4eOR0/photo.jpg?sz=128", "display_name": "Jacck Mark", "link": "https://stackoverflow.com/users/9978135/jacck-mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 1, "accepted_answer_id": 54092933, "answer_count": 1, "score": 3, "last_activity_date": 1546964039, "creation_date": 1546953608, "last_edit_date": 1546964039, "question_id": 54092719, "link": "https://stackoverflow.com/questions/54092719/searching-filtering-json-array-with-key-value-condition", "title": "Searching (filtering) JSON array with &#39;key == value&#39; condition", "body": "<p>I have problem with searching for specific objects in array in ruby.</p>\n\n<p>I've made a request to <code>https://jsonplaceholder.typicode.com/todos</code> from where I get result JSON. I am trying to convert it to array of objects and then search for occurrences (I know that I can make a request with parameters and it will resolve my problems, but I do not have access to the backend).</p>\n\n<p>I was trying to print objects in array containing some (specific) value in a termial and to get boolean value saying whether the string is present in array or not (I was also trying to find answer to my question on stack (this seems be the closest to my problem <a href=\"https://stackoverflow.com/questions/35105228/ruby-find-and-return-objects-in-an-array-based-on-an-attribute\">Ruby find and return objects in an array based on an attribute</a> but didn't help me much).</p>\n\n<pre><code>client = HTTPClient.new\nmethod = 'GET'\nurl = URI.parse 'https://jsonplaceholder.typicode.com/todos'\nres = client.request method, url\ndd = JSON.parse(res.body)\nputs dd.select { |word| word.completed == false }\nputs dd.include?('temporibus atque distinctio omnis eius impedit tempore molestias pariatur')\n</code></pre>\n\n<p><strong>Actual results</strong>:</p>\n\n<p>no result at all for <code>select</code> and <code>false</code> returned from <code>include?</code></p>\n\n<p><strong>Expected result</strong>:</p>\n\n<p><code>select</code> should put to terminal objects with <code>completed</code> equal <code>false</code>;</p>\n\n<p>and <code>include?</code> should return <code>true</code> if value provided as parameter is present in the array</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "reply_to_user": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 0, "creation_date": 1546950150, "post_id": 54091673, "comment_id": 95015523, "body": "its a string and should be any value from the hash"}, {"owner": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "edited": false, "score": 0, "creation_date": 1546950568, "post_id": 54091673, "comment_id": 95015721, "body": "I am very new to learning coding and ruby to be specific - its so much to learn but I am learning and I will get there eventually. :)"}], "answers": [{"comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546951480, "post_id": 54091737, "comment_id": 95016156, "body": "fixed the typo."}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 1, "creation_date": 1546952340, "post_id": 54091737, "comment_id": 95016567, "body": "This is going to run once for each key in <code>mtahash</code>.  For example, <code>current_line = &#39;n&#39;, current_station = &#39;8th&#39;  =&gt; got it \\n fish \\n fish</code>. Is this the intended functionality?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 1, "creation_date": 1546952599, "post_id": 54091737, "comment_id": 95016699, "body": "@Tom it&#39;s just as close to the original solution as possible."}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 1, "creation_date": 1546952697, "post_id": 54091737, "comment_id": 95016739, "body": "@mrzasa Was just curious what fahz would say he was looking for. Nothing against your answer."}, {"owner": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 1, "creation_date": 1546954860, "post_id": 54091737, "comment_id": 95018041, "body": "for now, yes it the one time thing to run @Tom"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1546954461, "last_edit_date": 1546954461, "creation_date": 1546950135, "answer_id": 54091737, "question_id": 54091673, "link": "https://stackoverflow.com/questions/54091673/iterating-over-a-hash-with-arrays-as-value/54091737#54091737", "title": "Iterating over a hash with arrays as value", "body": "<p>A <code>value</code> in this iteration is an array. You should be checking if it includes station name, not if it's equal to it. Also transform key to string with <code>key.to_s</code> (it's a symbol now):</p>\n\n<pre><code> mtahash.each do |key, value|\n   if key.to_s == current_line &amp;&amp; value.include?(current_station)\n     puts \"got it\"\n   else\n     puts \"fish\"\n   end\n end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "edited": false, "score": 0, "creation_date": 1546951313, "post_id": 54091863, "comment_id": 95016064, "body": "This is understandable line of code but still doesn;t work. The output is always fish 3 times no matter what input is"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "edited": false, "score": 0, "creation_date": 1546951643, "post_id": 54091863, "comment_id": 95016233, "body": "@fahz it is impossible what you said, check updated log in my answer"}, {"owner": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "edited": false, "score": 0, "creation_date": 1546953227, "post_id": 54091863, "comment_id": 95017057, "body": "it is not working for sure at my end .. doesn;t give any output except for fish :((((((("}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "edited": false, "score": 0, "creation_date": 1546954057, "post_id": 54091863, "comment_id": 95017571, "body": "@fahz because you did not provide what your hash have! e.g. <code>n</code> &amp; <code>23rdn</code>"}, {"owner": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "edited": false, "score": 0, "creation_date": 1546954950, "post_id": 54091863, "comment_id": 95018101, "body": "what does that mean? Hash is defined at the top already.. also I am trying the code without user input I am just hard coding it still it not working - what am i doing wrong?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "edited": false, "score": 0, "creation_date": 1546955055, "post_id": 54091863, "comment_id": 95018174, "body": "@fahz you need to post your <code>current_line</code>, <code>current_station</code> here"}, {"owner": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546955282, "post_id": 54091863, "comment_id": 95018307, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/186361/discussion-between-fahz-and-ray\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1546951617, "last_edit_date": 1546951617, "creation_date": 1546950627, "answer_id": 54091863, "question_id": 54091673, "link": "https://stackoverflow.com/questions/54091673/iterating-over-a-hash-with-arrays-as-value/54091863#54091863", "title": "Iterating over a hash with arrays as value", "body": "<p><code>each</code> will iterate for each key value (even if one match is found) but <code>detect</code> will stop once it got found match.</p>\n\n<p>I think keys for hash is unique so <code>detect</code> is better than using <code>each</code></p>\n\n<pre><code>mtahash.detect { |k, v| k.to_s == current_line &amp;&amp; v.include?(current_station) } ? 'got it' : 'fish'\n</code></pre>\n\n<p>Reduce iterations.</p>\n\n<pre><code> &gt; mtahash = {:n=&gt;[\"timesq\", \"34thn\", \"28thn\", \"23rdn\", \"Union_Square\", \"8th\"], :l=&gt;[\"8th\", \"6th\", \"Union_Square\", \"3rd\", \"1st\"], :s=&gt;[\"Grand Central\", \"33rds\", \"28th\", \"23rds\", \"Union Square\", \"Astor Place\"]} \n &gt;   current_line, current_station = 'l', '3rd'\n =&gt; [\"l\", \"3rd\"] \n\n &gt; mtahash.detect { |k, v| k.to_s == current_line &amp;&amp; v.include?(current_station) } ? 'got it' : 'fish'\n =&gt; \"got it\" \n\n &gt; current_line, current_station = 'l', '43rd'\n =&gt; [\"l\", \"43rd\"] \n\n &gt; mtahash.detect { |k, v| k.to_s == current_line &amp;&amp; v.include?(current_station) } ? 'got it' : 'fish'\n =&gt; \"fish\" \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1546953023, "last_edit_date": 1546953023, "creation_date": 1546952411, "answer_id": 54092363, "question_id": 54091673, "link": "https://stackoverflow.com/questions/54091673/iterating-over-a-hash-with-arrays-as-value/54092363#54092363", "title": "Iterating over a hash with arrays as value", "body": "<p>I'd suggest to convert <code>to_sym</code> (<a href=\"https://ruby-doc.org/core-2.5.1/String.html#method-i-to_sym\" rel=\"nofollow noreferrer\">String#to_sym</a>) the user input for current_line, since the hash keys are symbols.</p>\n\n<p>Then check if the hash has that key (<a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-has_key-3F\" rel=\"nofollow noreferrer\">Hash#has_key</a>).</p>\n\n<p>Finally access the hash by key and check if the array includes (<a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-include-3F\" rel=\"nofollow noreferrer\">Array#include</a>) the <code>current_station</code>, since values of the hash are arrays.</p>\n\n<p>This is just a snippet as example.</p>\n\n<pre><code>current_station = \"timesq\" # gets.chomp\ncurrent_line = \"n\".to_sym  # gets.chomp.to_sym &lt;--- note .to_sym\n\nif mtahash.has_key? current_line\n    if mtahash[current_line].include? current_station\n      then puts \"got it\"\n      else puts \"fish\"\n    end\n  else puts \"no line\"\nend\n</code></pre>\n\n<p><hr>\nEven better, invert the input sequence, check the <code>mtahash.has_key?</code> after the user enters the line, if true go asking for the station.</p>\n"}], "owner": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1547000826, "creation_date": 1546949893, "last_edit_date": 1547000826, "question_id": 54091673, "link": "https://stackoverflow.com/questions/54091673/iterating-over-a-hash-with-arrays-as-value", "title": "Iterating over a hash with arrays as value", "body": "<p>I am asking a user for key <code>currentline</code> and value <code>currentstation</code> in order to compare it against a hash, and display which line to travel.</p>\n\n<pre><code>mtahash = {\n  n: [\"timesq\", \"34thn\", \"28thn\", \"23rdn\", \"Union_Square\", \"8th\"],\n  l: [\"8th\", \"6th\", \"Union_Square\", \"3rd\", \"1st\"],\n  s: [\"Grand Central\", \"33rds\", \"28th\", \"23rds\", \"Union Square\", \"Astor Place\"]\n}\n\nputs \"Please enter your current station\"\ncurrent_station = gets.chomp\nputs \"Please enter your current line\"\ncurrent_line = gets.chomp\n\nmtahash.each do |key, value|\n  if key == current_line &amp;&amp; value == current_station\n    puts \"got it\"\n  else\n    puts \"fish\"\n  end\nend\n</code></pre>\n\n<p>My code outputs <code>fish</code> three times regardless of the input.</p>\n"}, {"tags": ["ruby", "bootstrap-4", "haml"], "comments": [{"owner": {"reputation": 3136, "user_id": 10283047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14d3424d98c68472d196cb5534c3f417?s=128&d=identicon&r=PG&f=1", "display_name": "misorude", "link": "https://stackoverflow.com/users/10283047/misorude"}, "edited": false, "score": 0, "creation_date": 1546947076, "post_id": 54090896, "comment_id": 95013990, "body": "Please go read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - code relevant to your problem belongs directly into your question <i>in text form</i>, not as an image <i>of</i> code. <a href=\"https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks\" title=\"how do i format my code blocks\">meta.stackoverflow.com/questions/251361/&hellip;</a>"}, {"owner": {"reputation": 8706, "user_id": 8798220, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xqpLhuyyjbc/AAAAAAAAAAI/AAAAAAAABMA/haAk1UYFMQA/photo.jpg?sz=128", "display_name": "Nisharg Shah", "link": "https://stackoverflow.com/users/8798220/nisharg-shah"}, "edited": false, "score": 0, "creation_date": 1546947222, "post_id": 54090896, "comment_id": 95014075, "body": "you can use <code>&lt;br&gt;</code> or <code>margin</code> for so space"}, {"owner": {"reputation": 2808, "user_id": 8476830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fdkes.png?s=128&g=1", "display_name": "Partho63", "link": "https://stackoverflow.com/users/8476830/partho63"}, "edited": false, "score": 0, "creation_date": 1546947674, "post_id": 54090896, "comment_id": 95014299, "body": "Provide your code so that we can help."}, {"owner": {"reputation": 49, "user_id": 5133822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bafe36f5efdbdf3331e5515f0f4ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "code_t", "link": "https://stackoverflow.com/users/5133822/code-t"}, "edited": false, "score": 0, "creation_date": 1546947754, "post_id": 54090896, "comment_id": 95014335, "body": "i have attached code snippet"}, {"owner": {"reputation": 181, "user_id": 9893192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WhdTM.jpg?s=128&g=1", "display_name": "Miaan", "link": "https://stackoverflow.com/users/9893192/miaan"}, "edited": false, "score": 0, "creation_date": 1546953649, "post_id": 54090896, "comment_id": 95017287, "body": "the &#39;form-control&#39; class should be added to all input fields. Labels and input should be grouped into DIV&#39;s with the &#39;form-group&#39; class on. Should help with your spacing problem and line break."}], "answers": [{"tags": [], "owner": {"reputation": 384, "user_id": 6677770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59abfb083505c0a6c4234f696a3aa9b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/6677770/anshul"}, "is_accepted": true, "score": 0, "last_activity_date": 1546948383, "creation_date": 1546948383, "answer_id": 54091273, "question_id": 54090896, "link": "https://stackoverflow.com/questions/54090896/space-between-label-and-form-element/54091273#54091273", "title": "Space between label and form element", "body": "<p>You are doing good. You need to just group your elements. Here I am going to write HTML code.</p>\n\n<pre><code>&lt;div class=\"col-lg-12 form-group\"&gt;\n  &lt;div class=\"col-lg-3 text-right\"&gt;\n    &lt;label class=\"\"&gt;small&lt;/label&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-5\"&gt;\n    &lt;input type=\"text\" class=\"form-control\"&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"col-lg-12 form-group\"&gt;\n  &lt;div class=\"col-lg-3 text-right\"&gt;\n    &lt;label class=\"\"&gt;long lebel text&lt;/label&gt;\n  &lt;/div&gt;\n  &lt;div class=\"col-lg-5\"&gt;\n    &lt;input type=\"text\" class=\"form-control\"&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>You need to set your label box and text box separate and push the label to the extreme right.  <a href=\"https://codepen.io/anshulsharma989/pen/qLKyJd\" rel=\"nofollow noreferrer\">You can check here</a>. Hope it will help you. :)</p>\n"}, {"tags": [], "owner": {"reputation": 97, "user_id": 6606954, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-XOJW8U-hEnk/AAAAAAAAAAI/AAAAAAAABvA/CRq-t8MGXYw/photo.jpg?sz=128", "display_name": "Mahfuzur Rahman", "link": "https://stackoverflow.com/users/6606954/mahfuzur-rahman"}, "is_accepted": false, "score": 0, "last_activity_date": 1546948750, "last_edit_date": 1546948750, "creation_date": 1546948420, "answer_id": 54091285, "question_id": 54090896, "link": "https://stackoverflow.com/questions/54090896/space-between-label-and-form-element/54091285#54091285", "title": "Space between label and form element", "body": "<p>you can use a specific column indent for your label:</p>\n\n<pre><code>&lt;div class=\"form-group form-inline\"&gt;                            \n    &lt;label class=\"col-md-2\" for=\"exampleInputEmail1\"&gt;Email address:&lt;/label&gt;\n        &lt;input type=\"email\" class=\"form-control\" id=\"exampleInputEmail1\" placeholder=\"Email\"&gt;\n\n\n &lt;/div&gt;\n    &lt;div class=\"form-group form-inline\"&gt;                            \n        &lt;label class=\"col-md-2\" for=\"idForTextfield\"&gt;A very long text for this label:&lt;/label&gt;\n            &lt;input type=\"text\" class=\"form-control\" id=\"idForTextfield\" placeholder=\"your text\"&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>also you can add some column indent for your text field so that it bounden with your limited space just add <code>col-md-2</code> in the class for <code>&lt;input&gt;</code> tag.\nSample here <a href=\"https://codepen.io/mahfuzmr/pen/pqKOyB\" rel=\"nofollow noreferrer\">Code sample</a>.</p>\n\n<p>Happy coding :)</p>\n"}], "owner": {"reputation": 49, "user_id": 5133822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bafe36f5efdbdf3331e5515f0f4ab0f?s=128&d=identicon&r=PG&f=1", "display_name": "code_t", "link": "https://stackoverflow.com/users/5133822/code-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1581345659, "accepted_answer_id": 54091273, "answer_count": 2, "score": -2, "last_activity_date": 1581309139, "creation_date": 1546946987, "last_edit_date": 1581309139, "question_id": 54090896, "link": "https://stackoverflow.com/questions/54090896/space-between-label-and-form-element", "closed_reason": "Not suitable for this site", "title": "Space between label and form element", "body": "<p>I am new to bootstrap and HTML and want to know how can I give same spacing between form label and the text field, throughout the form. I have attached code snippet as well as an output form.</p>\n\n<p>[code for the form][1][ Form output][2]</p>\n"}, {"tags": ["ruby", "regex", "cucumber", "optional-parameters", "optional-arguments"], "comments": [{"owner": {"reputation": 191, "user_id": 2878233, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Ok3Qo.jpg?s=128&g=1", "display_name": "laechoppe", "link": "https://stackoverflow.com/users/2878233/laechoppe"}, "edited": false, "score": 0, "creation_date": 1546947017, "post_id": 54090430, "comment_id": 95013949, "body": "Looks like it&#39;s not possible: <a href=\"https://groups.google.com/forum/#!topic/cukes/1w4h5Afz1Zs\" rel=\"nofollow noreferrer\">groups.google.com/forum/#!topic/cukes/1w4h5Afz1Zs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 2878233, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Ok3Qo.jpg?s=128&g=1", "display_name": "laechoppe", "link": "https://stackoverflow.com/users/2878233/laechoppe"}, "edited": false, "score": 0, "creation_date": 1546985103, "post_id": 54091304, "comment_id": 95033664, "body": "thanks, yes looked into such options... they still don&#39;t cover all cases... So I just rewrote the step"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1546948489, "creation_date": 1546948489, "answer_id": 54091304, "question_id": 54090430, "link": "https://stackoverflow.com/questions/54090430/pass-optional-table-parameter-to-a-cucumber-step-ruby/54091304#54091304", "title": "Pass optional table parameter to a cucumber step (ruby)", "body": "<p>I'm not sure if it will work in cucumber, but as it's just a ruby block you can try to use param with splat. A single param will hold the whole parameter list then:</p>\n\n<pre><code>Then(/^I '(eat|drink)' all food(?: except)?$/) do |*params|\n   # params is an array\n   action = params[0]\n   exceptions = params[1] # may be nil\n   #...\nend\n</code></pre>\n\n<p><a href=\"https://medium.freecodecamp.org/rubys-splat-and-double-splat-operators-ceb753329a78\" rel=\"nofollow noreferrer\">More on splats</a></p>\n"}], "owner": {"reputation": 191, "user_id": 2878233, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Ok3Qo.jpg?s=128&g=1", "display_name": "laechoppe", "link": "https://stackoverflow.com/users/2878233/laechoppe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 749, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546948489, "creation_date": 1546945445, "question_id": 54090430, "link": "https://stackoverflow.com/questions/54090430/pass-optional-table-parameter-to-a-cucumber-step-ruby", "title": "Pass optional table parameter to a cucumber step (ruby)", "body": "<p>I have a step that can be like this:</p>\n\n<pre><code>Then  I 'eat' all food except\n   | Bread |\n\nThen  I 'drink' all food except\n   | Bread |\n   | Milk  |\n\nThen  I 'eat' all food\n</code></pre>\n\n<p>I decided to put some of the arguments into the table, because otherwise it may be hard to read it.</p>\n\n<p>Step definition in Ruby is:</p>\n\n<pre><code>Then(/^I '(eat|drink)' all food(?: except)?$/) do |action, exceptions|\n  exceptions = exceptions.raw.flatten.map(&amp;:strip) unless exceptions.nil?\n\n  action == 'eat' ? method1(exceptions: exceptions) : method2(exceptions: exceptions)\n</code></pre>\n\n<p>It works fine, but not for the case when I don't pass the table argument (\"Then  I 'eat' all food\").\nIs it possible to make a table argument optional?</p>\n"}, {"tags": ["ruby", "local-variables"], "comments": [{"owner": {"reputation": 5647, "user_id": 1162143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rLSfS.jpg?s=128&g=1", "display_name": "Alexander Presber", "link": "https://stackoverflow.com/users/1162143/alexander-presber"}, "edited": false, "score": 1, "creation_date": 1546944952, "post_id": 54090261, "comment_id": 95012813, "body": "What is your question exactly? You expect the value of input to be <code>[&#39;new value&#39;]</code> both times?"}, {"owner": {"reputation": 157, "user_id": 8435162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac84b00c049dadefb287dbc164d2c86?s=128&d=identicon&r=PG&f=1", "display_name": "danieljacky", "link": "https://stackoverflow.com/users/8435162/danieljacky"}, "reply_to_user": {"reputation": 5647, "user_id": 1162143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rLSfS.jpg?s=128&g=1", "display_name": "Alexander Presber", "link": "https://stackoverflow.com/users/1162143/alexander-presber"}, "edited": false, "score": 0, "creation_date": 1546945129, "post_id": 54090261, "comment_id": 95012918, "body": "Why changes input_1 whereas input_2 doesn&#39;t change?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1546945242, "post_id": 54090261, "comment_id": 95012979, "body": "the concept is called &quot;mutability&quot;. <code>method_2</code> simply assignes a new variable with the same name as the other one."}], "answers": [{"comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 1, "creation_date": 1546959282, "post_id": 54090391, "comment_id": 95020773, "body": "Note that if the invocation were changed to <code>input_2 = method_2(input_2)</code>, the new reference generated by <code>method_2</code> would be assigned to <code>input_2</code> since Ruby methods return the result of their last evaluation."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 6, "last_activity_date": 1546945911, "last_edit_date": 1546945911, "creation_date": 1546945317, "answer_id": 54090391, "question_id": 54090261, "link": "https://stackoverflow.com/questions/54090261/ruby-array-manipulation-inside-method/54090391#54090391", "title": "Ruby array manipulation inside method", "body": "<p>With a bit of simplification we can say that a variable in Ruby is a reference to a value. In your case variable <code>a</code> holds a reference to an array.</p>\n\n<p><code>a &lt;&lt;</code> (<code>a.append</code>) mutates the <strong>value</strong> stored in variable <code>a</code>. The reference is not changed, but the value did. It's the case of <code>method_1</code></p>\n\n<pre><code>def method_1(a)\n    a &lt;&lt; \"new value\"\nend\n</code></pre>\n\n<p>Assignment <code>=</code> changes the reference stored in a variable - it starts to point to a different value. References are copied when passed to a method. Because of that when you call </p>\n\n<pre><code>def method_2(a)\n    a = [\"new value\"]\nend\ninput = []\nmethod_2(a)\n</code></pre>\n\n<p>You only change a reference stored in <code>a</code> that is local to the method, without any change to the reference stored in <code>input</code> nor to the value (and array of <code>[]</code>) that is pointed by this reference.</p>\n"}, {"tags": [], "owner": {"reputation": 5647, "user_id": 1162143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/rLSfS.jpg?s=128&g=1", "display_name": "Alexander Presber", "link": "https://stackoverflow.com/users/1162143/alexander-presber"}, "is_accepted": false, "score": 7, "last_activity_date": 1546946722, "last_edit_date": 1546946722, "creation_date": 1546945833, "answer_id": 54090545, "question_id": 54090261, "link": "https://stackoverflow.com/questions/54090261/ruby-array-manipulation-inside-method/54090545#54090545", "title": "Ruby array manipulation inside method", "body": "<p>It boils down to Ruby using \"pass-reference-by-value\".</p>\n\n<p>The exact case that you encounter is described in <a href=\"https://robertheaton.com/2014/07/22/is-ruby-pass-by-reference-or-pass-by-value/\" rel=\"nofollow noreferrer\">this excellent blog post</a>.</p>\n\n<h3>The gist:</h3>\n\n<p>In <code>method_1</code> you are changing the value of an object that two different variables (<code>input_1</code> and <code>a</code>) are both pointing to.</p>\n\n<p>In <code>method_2</code> you are reassigning a completely new object to one of the two variables (<code>a</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1546954269, "creation_date": 1546954269, "answer_id": 54092926, "question_id": 54090261, "link": "https://stackoverflow.com/questions/54090261/ruby-array-manipulation-inside-method/54092926#54092926", "title": "Ruby array manipulation inside method", "body": "<blockquote>\n  <p>Why <code>input_1</code> changes whereas <code>input_2</code> doesn't change?</p>\n</blockquote>\n\n<p>The <em>very simple</em> answer to this question is that your premise is wrong. <code>input_1</code> doesn't change. <em>The object that <code>input_1</code> references</em> changes, but that is something <em>completely different</em> from <code>input_1</code>. The name of a thing is <em>not</em> the same as the thing itself. (Outside of witchcraft.)</p>\n"}], "owner": {"reputation": 157, "user_id": 8435162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac84b00c049dadefb287dbc164d2c86?s=128&d=identicon&r=PG&f=1", "display_name": "danieljacky", "link": "https://stackoverflow.com/users/8435162/danieljacky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 54090391, "answer_count": 3, "score": 5, "last_activity_date": 1547019822, "creation_date": 1546944838, "last_edit_date": 1547019822, "question_id": 54090261, "link": "https://stackoverflow.com/questions/54090261/ruby-array-manipulation-inside-method", "title": "Ruby array manipulation inside method", "body": "<p>In the following, <code>input_1</code> changes:</p>\n\n<pre><code>def method_1(a)\n  a &lt;&lt; \"new value\"\nend\n\ninput_1 = []\nmethod_1(input_1)\ninput_1 #=&gt; [\"new value\"]\n</code></pre>\n\n<p>In the following, <code>input_2</code> does not change:</p>\n\n<pre><code>def method_2(a)\n  a = [\"new value\"]\nend\n\ninput_2 = []\nmethod_2(input_2)\ninput_2 #=&gt; []\n</code></pre>\n\n<p>Why does <code>input_1</code> change while <code>input_2</code> doesn't change?</p>\n"}, {"tags": ["ruby", "rvm", "gemfile"], "comments": [{"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1546944595, "post_id": 54090095, "comment_id": 95012601, "body": "If you go into the directory and execute the command rvm current, what do you get?"}, {"owner": {"reputation": 41, "user_id": 9562686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Egor", "link": "https://stackoverflow.com/users/9562686/egor"}, "reply_to_user": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1546944751, "post_id": 54090095, "comment_id": 95012690, "body": "I got ruby-2.3.0"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9562686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Egor", "link": "https://stackoverflow.com/users/9562686/egor"}, "edited": false, "score": 0, "creation_date": 1546944811, "post_id": 54090185, "comment_id": 95012733, "body": "I don&#39;t need to use 2.3.1, I need to use 2.3.0 that is why I deleted 2.3.1"}, {"owner": {"reputation": 41, "user_id": 9562686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Egor", "link": "https://stackoverflow.com/users/9562686/egor"}, "edited": false, "score": 0, "creation_date": 1546944978, "post_id": 54090185, "comment_id": 95012830, "body": "My Gemfile has ruby 2.3.0, that what I need for my purposes, I should not change Gemfile"}], "tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": false, "score": 0, "last_activity_date": 1546946381, "last_edit_date": 1546946381, "creation_date": 1546944522, "answer_id": 54090185, "question_id": 54090095, "link": "https://stackoverflow.com/questions/54090095/how-to-change-ruby-version-on-linux/54090185#54090185", "title": "How to change ruby version on linux", "body": "<p>After checked the errors on your updated screenshot, I think it's better just do this:</p>\n\n<pre><code>rm -r ~/.bundle\nbundle\nbundle install\n</code></pre>\n\n<p>Maybe just </p>\n\n<pre><code>rvm reinstall all\n</code></pre>\n\n<p>then try again.</p>\n\n<p>If permission error happens, run </p>\n\n<pre><code>rvm fix-permissions\n</code></pre>\n\n<p>And then do it again.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 3870339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w5QiK.png?s=128&g=1", "display_name": "Maciej Pk", "link": "https://stackoverflow.com/users/3870339/maciej-pk"}, "reply_to_user": {"reputation": 41, "user_id": 9562686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Egor", "link": "https://stackoverflow.com/users/9562686/egor"}, "edited": false, "score": 0, "creation_date": 1546944794, "post_id": 54090193, "comment_id": 95012721, "body": "how about <code>which rails</code> and <code>which ruby</code>?"}, {"owner": {"reputation": 125, "user_id": 3870339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w5QiK.png?s=128&g=1", "display_name": "Maciej Pk", "link": "https://stackoverflow.com/users/3870339/maciej-pk"}, "reply_to_user": {"reputation": 41, "user_id": 9562686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Egor", "link": "https://stackoverflow.com/users/9562686/egor"}, "edited": false, "score": 0, "creation_date": 1546944987, "post_id": 54090193, "comment_id": 95012834, "body": "looks like your <code>rails</code> is not linked to rvm and that&#39;s why you&#39;re facing this issue. Run <code>bundle install</code> inside project and try <code>which rails</code> again."}, {"owner": {"reputation": 125, "user_id": 3870339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w5QiK.png?s=128&g=1", "display_name": "Maciej Pk", "link": "https://stackoverflow.com/users/3870339/maciej-pk"}, "reply_to_user": {"reputation": 41, "user_id": 9562686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Egor", "link": "https://stackoverflow.com/users/9562686/egor"}, "edited": false, "score": 0, "creation_date": 1546945121, "post_id": 54090193, "comment_id": 95012911, "body": "Could you check <code>which gem</code> and <code>which bundle</code> after doing <code>gem install bundler</code>?"}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1546945310, "post_id": 54090193, "comment_id": 95013008, "body": "Have you installed ruby with sudo?"}, {"owner": {"reputation": 125, "user_id": 3870339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w5QiK.png?s=128&g=1", "display_name": "Maciej Pk", "link": "https://stackoverflow.com/users/3870339/maciej-pk"}, "edited": false, "score": 0, "creation_date": 1546945345, "post_id": 54090193, "comment_id": 95013035, "body": "try <code>bundle install</code> now inside the project"}, {"owner": {"reputation": 41, "user_id": 9562686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Egor", "link": "https://stackoverflow.com/users/9562686/egor"}, "reply_to_user": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1546945355, "post_id": 54090193, "comment_id": 95013043, "body": "@Shimu I installed ruby via rvm, without sudo"}, {"owner": {"reputation": 125, "user_id": 3870339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w5QiK.png?s=128&g=1", "display_name": "Maciej Pk", "link": "https://stackoverflow.com/users/3870339/maciej-pk"}, "edited": false, "score": 0, "creation_date": 1546945497, "post_id": 54090193, "comment_id": 95013126, "body": "I&#39;m not sure about security of this (it should be fine since it&#39;s not on a public server) but try <code>chmod -R 777 ~&#47;.bundle</code> (sudo if it fails) and then try <code>bundle install</code> again inside the project"}, {"owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "reply_to_user": {"reputation": 41, "user_id": 9562686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Egor", "link": "https://stackoverflow.com/users/9562686/egor"}, "edited": false, "score": 1, "creation_date": 1546946037, "post_id": 54090193, "comment_id": 95013427, "body": "@Egor  Then I would suggest you delete <code>.bundle</code> dir. And then <code>rvm reinstall all</code>."}], "tags": [], "owner": {"reputation": 125, "user_id": 3870339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w5QiK.png?s=128&g=1", "display_name": "Maciej Pk", "link": "https://stackoverflow.com/users/3870339/maciej-pk"}, "is_accepted": false, "score": 1, "last_activity_date": 1546944545, "creation_date": 1546944545, "answer_id": 54090193, "question_id": 54090095, "link": "https://stackoverflow.com/questions/54090095/how-to-change-ruby-version-on-linux/54090193#54090193", "title": "How to change ruby version on linux", "body": "<p>I haven't used rvm, but I'm using rbenv for version management.</p>\n\n<p>From what I've read, it works similarly, although the commands are a little bit different.</p>\n\n<p>Did command <code>rvm use ruby-2.3.0</code> inside the project folder generate a file called <code>.ruby_version</code>?</p>\n\n<p>It should list the current version of ruby used in this project</p>\n"}], "owner": {"reputation": 41, "user_id": 9562686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Egor", "link": "https://stackoverflow.com/users/9562686/egor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2030, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546946381, "creation_date": 1546944228, "last_edit_date": 1592644375, "question_id": 54090095, "link": "https://stackoverflow.com/questions/54090095/how-to-change-ruby-version-on-linux", "title": "How to change ruby version on linux", "body": "<p>I installed rvm on my Linux machine and download simple project from github. I tried to run rails s, but got a error with ruby version:</p>\n<p>I executed next commands:</p>\n<ul>\n<li>rvm install ruby-2.3.0</li>\n<li>rvm use ruby-2.3.0</li>\n<li>rvm use ruby-2.3.0 --default</li>\n</ul>\n<p>When I opened the project and ran rails s, I got this error</p>\n<p><a href=\"https://i.imgur.com/Dwvp8WF.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/Dwvp8WF.png</a></p>\n<h1>Update</h1>\n<p>My Gemfile has ruby 2.3.0</p>\n<p>Can't run bundle install because of this error <a href=\"https://imgur.com/a/UMcirdt\" rel=\"nofollow noreferrer\">https://imgur.com/a/UMcirdt</a>\nw</p>\n<p>which rails, which ruby: <a href=\"https://imgur.com/a/vycG8wG\" rel=\"nofollow noreferrer\">https://imgur.com/a/vycG8wG</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1546954335, "post_id": 54090011, "comment_id": 95017742, "body": "Hint: you say you are using &quot;the same syntax&quot; but you don&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1546944057, "creation_date": 1546944057, "answer_id": 54090041, "question_id": 54090011, "link": "https://stackoverflow.com/questions/54090011/new-hash-declaration-in-ruby-returning-syntax-errors-compared-to-command-line/54090041#54090041", "title": "new hash declaration in ruby returning syntax errors compared to command line", "body": "<p>No spaces before the <code>:</code>. Move from</p>\n\n<pre><code>mtahash = {\n  N : [\"timesq\", \"34thn\", \"28thn\", \"23rdn\", \"Union_Square\", \"8th\"],\n  L : [\"8th\", \"6th\", \"Union_Square\", \"3rd\", \"1st\"],\n  }\n</code></pre>\n\n<p>to</p>\n\n<pre><code>mtahash = {\n  N: [\"timesq\", \"34thn\", \"28thn\", \"23rdn\", \"Union_Square\", \"8th\"],\n  L: [\"8th\", \"6th\", \"Union_Square\", \"3rd\", \"1st\"],\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 0, "last_activity_date": 1546944084, "creation_date": 1546944084, "answer_id": 54090051, "question_id": 54090011, "link": "https://stackoverflow.com/questions/54090011/new-hash-declaration-in-ruby-returning-syntax-errors-compared-to-command-line/54090051#54090051", "title": "new hash declaration in ruby returning syntax errors compared to command line", "body": "<p>You put space between your key and colon, try without it:</p>\n\n<pre><code>N: [\"timesq\", \"34thn\", \"28thn\", \"23rdn\", \"Union_Square\", \"8th\"],\n</code></pre>\n\n<p>etc.</p>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 0, "last_activity_date": 1546944708, "last_edit_date": 1546944708, "creation_date": 1546944630, "answer_id": 54090221, "question_id": 54090011, "link": "https://stackoverflow.com/questions/54090011/new-hash-declaration-in-ruby-returning-syntax-errors-compared-to-command-line/54090221#54090221", "title": "new hash declaration in ruby returning syntax errors compared to command line", "body": "<p><code>{ a: 23 }</code> is shorthand for <code>{ :a =&gt; 23 }</code> just only for symbol keys. And you cannot put space so <code>a:</code> is valid but not <code>a :</code>.</p>\n\n<p>Also using the capitalised form for a symbol is not preferred (even if it works) as per ruby convention so use <code>:n</code> instead of <code>:N</code>.</p>\n"}], "owner": {"reputation": 61, "user_id": 10749016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/734e02b1a9cf8d51d3d53bdf2065ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "Afrahsh", "link": "https://stackoverflow.com/users/10749016/afrahsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54090221, "answer_count": 3, "score": 0, "last_activity_date": 1546944997, "creation_date": 1546943950, "last_edit_date": 1546944997, "question_id": 54090011, "link": "https://stackoverflow.com/questions/54090011/new-hash-declaration-in-ruby-returning-syntax-errors-compared-to-command-line", "title": "new hash declaration in ruby returning syntax errors compared to command line", "body": "<p>I am trying to declare the new hash in ruby having two keys and arrays as values to the respective keys. \nThe problem I dont understand is when I run it in pry i.e command line it doesn't give any syntax error compared to when I run a <code>.rb</code> file. My codes are below. </p>\n\n<pre><code>[1] pry(main)&gt; newhash = {\n[1] pry(main)*   N: [\"unsq\", \"34n\",\"28\"],\n[1] pry(main)*   L: [\"aston\", \"timesq\", \"place\"]\n[1] pry(main)* }\n =&gt; {:N=&gt;[\"unsq\", \"34n\", \"28\"], :L=&gt;[\"aston\", \"timesq\", \"place\"]}\n[2] pry(main)&gt; newhash[:N]\n =&gt; [\"unsq\", \"34n\", \"28\"]\n[3] pry(main)&gt; newhash[:N][1] #returns the correct values\n =&gt; \"34n\" #returns the correct values\n</code></pre>\n\n<p>When I declare a new hash in <code>.rb</code> file using same syntax, it returns the error,</p>\n\n<pre><code>mtahash = {\n  N : [\"timesq\", \"34thn\", \"28thn\", \"23rdn\", \"Union_Square\", \"8th\"],\n  L : [\"8th\", \"6th\", \"Union_Square\", \"3rd\", \"1st\"],\n  }\nputs mtahash[:N]\nputs mtahash[:N][4]\n</code></pre>\n\n<p>Run and threw error as,</p>\n\n<pre><code>MTA.rb:2: syntax error, unexpected ':', expecting =&gt;\n  N : [\"Times_Square\", \"34thn\", \"2...\n   ^\nMTA.rb:2: syntax error, unexpected ',', expecting end-of-input\n...23rdn\", \"Union_Square\", \"8th\"],\n...                              ^\nFarwas-MBP:day2 farwaabid$ ruby MTA.rb\nMTA.rb:2: syntax error, unexpected ':', expecting =&gt;\nN : [\"timesq\", \"34thn\", \"28thn\",...\n^\nMTA.rb:2: syntax error, unexpected ',', expecting end-of-input\n...23rdn\", \"Union_Square\", \"8th\"],\n...                              ^\n</code></pre>\n"}, {"tags": ["ruby", "sidekiq"], "comments": [{"owner": {"reputation": 106, "user_id": 5345794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J-vYOijXsyA/AAAAAAAAAAI/AAAAAAAAXMU/R06rKaWK_vA/photo.jpg?sz=128", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/5345794/guillaume"}, "edited": false, "score": 0, "creation_date": 1546980921, "post_id": 54089571, "comment_id": 95031928, "body": "Do you think you could generate your own id (with SecureRandom for instance) and store this in elastic search instead of the sidekiq job id ?"}, {"owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "reply_to_user": {"reputation": 106, "user_id": 5345794, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J-vYOijXsyA/AAAAAAAAAAI/AAAAAAAAXMU/R06rKaWK_vA/photo.jpg?sz=128", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/5345794/guillaume"}, "edited": false, "score": 0, "creation_date": 1547020991, "post_id": 54089571, "comment_id": 95043300, "body": "Yes, it sounds like <i>the</i> idea. I will try to make it this way"}], "answers": [{"comments": [{"owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "edited": false, "score": 0, "creation_date": 1546949460, "post_id": 54090107, "comment_id": 95015169, "body": "Thank you, it looks good, but it is not usable in my use case. Because I need to track status of the jobs in elasticsearch (followers), but if elastic is not accessible, and I reschedule the same worker again, I would lose the chain."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "edited": false, "score": 0, "creation_date": 1546954933, "post_id": 54090107, "comment_id": 95018088, "body": "Could you please update your question with a little more detail on this requirement? How are you tracking the job&#39;s status? (And why do you need to track its status?) I&#39;m not sure I follow what you&#39;re actually trying to achieve -- What is &quot;the chain&quot;, and why would you &quot;lose&quot; it?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "edited": false, "score": 0, "creation_date": 1546954966, "post_id": 54090107, "comment_id": 95018113, "body": "<i>Maybe</i> what you&#39;d like to do is implement something like <a href=\"https://edgeapi.rubyonrails.org/classes/ActiveJob/Core.html#method-i-deserialize\" rel=\"nofollow noreferrer\">this</a>, but decrement the <code>attempt_number</code> before failing?"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1546944269, "creation_date": 1546944269, "answer_id": 54090107, "question_id": 54089571, "link": "https://stackoverflow.com/questions/54089571/how-to-push-back-sidekiq-job-without-retry-in-middleware/54090107#54090107", "title": "How to push back sidekiq job without retry in middleware?", "body": "<p>The easiest way would be for the job to re-schedule itself, then exit. For example:</p>\n\n<pre><code>class MyJob &lt; ApplicationJob\n  queue_as :default\n\n  def perform(*args)\n    if ready_to_perform?\n      # Do stuff!\n    else\n      MyJob.perform_later(args)\n    end\n  end\nend\n</code></pre>\n\n<p>Use with caution. You probably don't want a job to be stuck re-scheduling itself forever!</p>\n\n<p>This isn't quite the same as \"retrying without incrementing the retry counter\" (which is a little more complicated to implement), but is sufficient for most use cases like this.</p>\n"}, {"comments": [{"owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "edited": false, "score": 0, "creation_date": 1546949444, "post_id": 54090160, "comment_id": 95015164, "body": "Thank you, it looks good, but it is not usable in my use case. Because I need to track status of the jobs in elasticsearch (followers), but if elastic is not accessible, and I reschedule the same worker again, I would lose the chain."}], "tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1546944423, "creation_date": 1546944423, "answer_id": 54090160, "question_id": 54089571, "link": "https://stackoverflow.com/questions/54089571/how-to-push-back-sidekiq-job-without-retry-in-middleware/54090160#54090160", "title": "How to push back sidekiq job without retry in middleware?", "body": "<p>This is not a working code but something like this could help you achieve want you want.</p>\n\n<p>You could define a middleware and add it to sidekiq as below </p>\n\n<pre><code>Sidekiq.configure_server do |config|\n  config.server_middleware do |chain|\n    chain.add Sidekiq::RetryMonitoringMiddleware\n  end\nend\n</code></pre>\n\n<p>Now, you can define in the middleware as mentioned below: </p>\n\n<pre><code>class Sidekiq::RetryMonitoringMiddleware\n  def call(worker, job_params, _queue)\n    #calling the worker perform method to add it to the queue\n    worker.perform(job_params['jid'], *job_params['args']) if should_retry?(job_params)\n  rescue StandardError =&gt; e\n    Rails.logger.error e\n  ensure\n    yield\n  end\n\n  private\n\n  def should_retry?(job)\n    # If worker is having a failure flag then only it should return a response\n    # Need to check in which key we get a failure message\n    (Integer(job['failure'])) == (1 || \"true\")\n  end\nend\n</code></pre>\n\n<p>Hope it helps!!</p>\n"}], "owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1546958005, "creation_date": 1546942466, "last_edit_date": 1546958005, "question_id": 54089571, "link": "https://stackoverflow.com/questions/54089571/how-to-push-back-sidekiq-job-without-retry-in-middleware", "title": "How to push back sidekiq job without retry in middleware?", "body": "<p>Is there a way how to push job back to queue from sidekiq server middleware? Or simply retry without counting it? </p>\n\n<p>UDPATE: My background: I need to track status of the jobs in elasticsearch (one job follows after another one), but if elastic is not accessible, and I reschedule the same worker again, I would lose the chain (jid changes). </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "haml"], "answers": [{"comments": [{"owner": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "edited": false, "score": 0, "creation_date": 1546943809, "post_id": 54089828, "comment_id": 95012219, "body": "Ok make sense but the first suggestion I have to make a new partial for it or I will change the file I shared first into that?  Like both your suggestions will be added to the same file?"}, {"owner": {"reputation": 1320, "user_id": 4531923, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/749da210afda1b309680b354f019849e?s=128&d=identicon&r=PG", "display_name": "Vincent Rolea", "link": "https://stackoverflow.com/users/4531923/vincent-rolea"}, "reply_to_user": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "edited": false, "score": 0, "creation_date": 1546944581, "post_id": 54089828, "comment_id": 95012593, "body": "The first suggestion is just and edit from the partial call in your <code>Index</code> at line 17, I&#39;ve abstracted the reste of the code"}, {"owner": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "edited": false, "score": 0, "creation_date": 1546944838, "post_id": 54089828, "comment_id": 95012746, "body": "Ok on this line  .badge.danger{ class: [entry[&quot;count&quot;].zero? &amp;&amp; &#39;empty&#39;] }= entry[&quot;count&quot;]  I get error now  undefined method `zero?&#39; for nil:NilClass"}], "tags": [], "owner": {"reputation": 1320, "user_id": 4531923, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/749da210afda1b309680b354f019849e?s=128&d=identicon&r=PG", "display_name": "Vincent Rolea", "link": "https://stackoverflow.com/users/4531923/vincent-rolea"}, "is_accepted": false, "score": 0, "last_activity_date": 1546943293, "creation_date": 1546943293, "answer_id": 54089828, "question_id": 54089449, "link": "https://stackoverflow.com/questions/54089449/how-to-refactor-in-partials-or-make-more-dry-the-code-of-a-haml-file-which-conta/54089828#54089828", "title": "How to refactor in partials or make more dry the code of a Haml file which contains tabs with common structure", "body": "<p>I'm not really experienced in HAML, but I think that what they meant by \"These tabs seem to have a lot in common to be extracted\" is that your are more or less writing the same code for different variables. </p>\n\n<p>What you could do, is pass a unique array variable to your tabs partial, for instance:</p>\n\n<pre><code>render(partial: 'shipment_tabs', \n  locals: { data: [\n    { name: \"Problems\", tab: \"problems\", count: @view_model.problem_shipments.try(:count) || 0 },\n    { name: \"Created\", tab: \"created\", count: shipments.try(:count) || 0 },\n    { name: \"RFQ\", tab: \"requests\", count: shipment_requests.try(:count) || 0 },\n    { name: \"Pickup request\", tab: \"pickups\", count: pickups.try(:count) || 0 }\n  ] }\n)\n</code></pre>\n\n<p>And in your partial just loop on this array</p>\n\n<pre><code>.dashboard_tabs\n  - data.each do |entry|\n    .dashboard_tab.active{ data: { tab: entry[\"tab\"] } }\n      %h2 #{entry[\"name\"]}\n      .badge.danger{ class: [entry[\"count\"].zero? &amp;&amp; 'empty'] }= entry[\"count\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "edited": false, "score": 0, "creation_date": 1546949230, "post_id": 54091124, "comment_id": 95015061, "body": "Good just to understand. The first of the above last 2 codes lines. The first is what I should define in my partials and the second I will put in my index?  Could you add the changes in my files so I can understand where I should do the change? I understood the first is for the partial and the second for the index is that correct?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1546949680, "post_id": 54091124, "comment_id": 95015276, "body": "<code>shipments.try(:count)</code> will create a N+1 query issue as <code>count</code> issues a <code>SELECT COUNT(*) FROM ...</code> query. You should instead use <code>.size</code> as it will use <code>.length</code> if the collection is already loaded or the counter cache. You can also use <code>any?</code> or <code>none?</code> that defer to <code>.size</code>."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1546949782, "post_id": 54091124, "comment_id": 95015326, "body": "Also using <code>.try</code> might not be needed either as you are dealing with an empty collection and not nil values (hopefully)."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "edited": false, "score": 0, "creation_date": 1546949801, "post_id": 54091124, "comment_id": 95015338, "body": "Hi @jakub you understood correctly (not sure how you could understand it otherwise?)"}, {"owner": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "edited": false, "score": 0, "creation_date": 1546949861, "post_id": 54091124, "comment_id": 95015374, "body": "Ok but on the first partial I get errors inline the code from editor as saying is not Haml formatted or else related to that"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "edited": false, "score": 0, "creation_date": 1546949970, "post_id": 54091124, "comment_id": 95015425, "body": "Hi @jakub this code is untested obviously. I am just giving a start-point."}, {"owner": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "edited": false, "score": 0, "creation_date": 1546950377, "post_id": 54091124, "comment_id": 95015632, "body": "I&#39;m unable to make it work unfortunately I never used Haml so cannot understand how should be changed :("}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1546952929, "post_id": 54091124, "comment_id": 95016890, "body": "Indentation is important, and that is probably what is causing the problem. Can you post your partial (or the view that is giving the error) and the error?"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1546953043, "post_id": 54091124, "comment_id": 95016954, "body": "Ow is it the index? Because in haml if a line is split over two lines, you have to add a <code>|</code> (pipe) add the end (I just formatted the code to be readable here --just place it on one line or add the <code>|</code> at the end). See reference: <a href=\"http://haml.info/docs/yardoc/file.REFERENCE.html#multiline\" rel=\"nofollow noreferrer\">haml.info/docs/yardoc/file.REFERENCE.html#multiline</a>"}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 1, "last_activity_date": 1546953092, "last_edit_date": 1546953092, "creation_date": 1546947824, "answer_id": 54091124, "question_id": 54089449, "link": "https://stackoverflow.com/questions/54089449/how-to-refactor-in-partials-or-make-more-dry-the-code-of-a-haml-file-which-conta/54091124#54091124", "title": "How to refactor in partials or make more dry the code of a Haml file which contains tabs with common structure", "body": "<p>If you define a partial <code>_dashboard_tab</code> as follows</p>\n\n<pre><code>.dashboard_tab{class: active ? 'active' : '', data: {tab: tab_name}\n  - shipments_count = shipments.try(:count) || 0\n  %h2= title \n  .badge{ class: [shipments_count.zero? &amp;&amp; 'empty'] }= shipments_count\n</code></pre>\n\n<p>you can then rewrite the original view as follows: </p>\n\n<pre><code>.dashboard_tabs\n  = render 'dashboard_tab', active: true, tab_name: 'problems', |\n                            title: 'Problems', shipments: problem_shipments\n  = render 'dashboard_tab', active: false, tab_name: 'created', | \n                            title: 'Created', shipments: shipments\n  = render 'dashboard_tab', active: false, tab_name: 'requests', |\n                            title: 'RFQ', shipments: shipment_requests\n  = render 'dashboard_tab', active: false, tab_name: 'requests', |\n                            title: 'RFQ', shipments: shipment_requests\n  = render 'dashboard_tab', active: false, tab_name: 'pickups', |\n                            title: 'Pickup request', shipments: pickups\n</code></pre>\n\n<p>This is a start. We now miss the <code>danger</code> class for the problems badge, and we repeat the <code>active</code> while we only want to first to be active (and the default is false). </p>\n\n<p>So we can optimise our partial a little more by adding an extra badge-class (and make it optional) and making the active state also optional. </p>\n\n<p>So we adapt the partial as follows: </p>\n\n<pre><code> - active = local_assigns.has_key?(:active) ? active : false \n - badge_class = local_assigns.has_key?(:badge_class) ? badge_class : ''\n .dashboard_tab{class: active ? 'active' : '', data: {tab: tab_name}\n   - shipments_count = shipments.try(:count) || 0\n   %h2= title \n   - badge_classes = [badge_class] \n   - badge_classes &lt;&lt; 'empty' if shipments_count.zero?\n   .badge{ class: badge_classes.join(\" \") }= shipments_count\n</code></pre>\n\n<p>and then we can write the original tab-list as follows: </p>\n\n<pre><code>.dashboard_tabs\n  = render 'dashboard_tab', active: true, badge_class: 'danger', tab_name: 'problems', |\n                            title: 'Problems', shipments: problem_shipments\n  = render 'dashboard_tab', tab_name: 'created',  title: 'Created', shipments: shipments,\n  = render 'dashboard_tab', tab_name: 'requests', title: 'RFQ', shipments: shipment_requests\n  = render 'dashboard_tab', tab_name: 'requests', title: 'RFQ', shipments: shipment_requests\n  = render 'dashboard_tab', tab_name: 'pickups',  title: 'Pickup request', shipments: pickups\n</code></pre>\n"}], "owner": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 54091124, "answer_count": 2, "score": 0, "last_activity_date": 1581309277, "creation_date": 1546942087, "last_edit_date": 1581309277, "question_id": 54089449, "link": "https://stackoverflow.com/questions/54089449/how-to-refactor-in-partials-or-make-more-dry-the-code-of-a-haml-file-which-conta", "title": "How to refactor in partials or make more dry the code of a Haml file which contains tabs with common structure", "body": "<p>I'm developing in a Ruby on Rails 4.2.10 project and I was asked to refactor a panel which contains tabs in a better way dividing into partials, all build in <code>Haml</code>. I did that but still, they said I need to do it better especially with this file:</p>\n\n<pre><code>.dashboard_tabs\n  .dashboard_tab.active{ data: { tab: 'problems' } }\n    - shipments_count = problem_shipments.try(:count) || 0\n    %h2 Problems\n    .badge.danger{ class: [shipments_count.zero? &amp;&amp; 'empty'] }= shipments_count\n\n  .dashboard_tab{ data: { tab: 'created' } }\n    - shipments_count = shipments.try(:count) || 0\n    %h2 Created\n    .badge{ class: [shipments_count.zero? &amp;&amp; 'empty'] }= shipments_count\n\n  .dashboard_tab{ data: { tab: 'requests' } }\n    - shipments_count = shipment_requests.try(:count) || 0\n    %h2 RFQ\n    .badge{ class: [shipments_count.zero? &amp;&amp; 'empty'] }= shipments_count\n\n  .dashboard_tab{ data: { tab: 'pickups' } }\n    - shipments_count = pickups.try(:count) || 0\n    %h2 Pickup request\n    .badge{ class: [shipments_count.zero? &amp;&amp; 'empty'] }= shipments_count\n</code></pre>\n\n<p>The comment was \"These tabs seem to have a lot in common to be extracted\" so I don't know how to make it drier as I've been asked.</p>\n\n<p>Hope to get some good suggestions fr it.</p>\n\n<p>Other files related to this are the next:</p>\n\n<p>Index</p>\n\n<pre><code>= react_component(\"CompanyDashboard\", Jbuilder.new { |json| json.initialDashboard @view_model.to_builder; json.initialCarrierOptions @carrier_list.to_builder; json.initialCustomerOptions @customer_list.to_builder; json.remoteDashboardDataURL companies_dashboard_data_path(format: \"json\"); json.remoteCarrierAutocompleteURL companies_autocomplete_carriers_path(format: \"json\"); json.remoteCustomerAutocompleteURL companies_autocomplete_customers_path(format: \"json\") }.target!)\n\n#dashboard_chart_container\n  .chart_labels\n  .loading_indicator{ :style =&gt; \"display: none\" }\n    .loading_indicator_wrapper\n      = image_tag(\"admin/loading_indicator.gif\")\n  %svg{ :id =&gt; \"dashboard_chart\", :width =&gt; \"100%\", :height =&gt; \"300\" }\n\n.dashboard_separator\n\n- problem_shipments = @view_model.problem_shipments\n- shipments         = @view_model.created_shipments\n- shipment_requests = @view_model.rfq_shipments\n- pickups           = @view_model.pickup_requests\n\n= render(partial: 'shipment_tabs', locals: { problem_shipments: @view_model.problem_shipments, shipments: shipments, shipment_requests: shipment_requests, pickups: pickups })\n\n/ Problems tab\n.dashboard_panel{ data: { tab: 'problems'} }\n  .dashboard_panel_body\n    - if problem_shipments.try(:any?)\n      %table\n        %tbody\n          = render(partial: \"shipment_row_for_panel\", collection: problem_shipments.limit(100), as: :shipment)\n    - else\n      .empty No problems at the moment\n\n/ Created tab\n.dashboard_panel.hidden{ data: { tab: 'created'} }\n  .dashboard_panel_body\n    - if shipments.any?\n      %table\n        %tbody\n          = render(partial: \"shipment_row_for_panel\", collection: shipments.limit(100), as: :shipment)\n    - else\n      .empty No requests at the moment\n\n/ RFQ tab\n.dashboard_panel.hidden{ data: { tab: 'requests'} }\n  .dashboard_panel_body\n    - if shipment_requests.any?\n      %table\n        %tbody\n          = render(partial: \"shipment_request_row_for_panel\", collection: shipment_requests.limit(100), as: :shipment_request)\n    - else\n      .empty No requests at the moment\n\n/ Pickup request tab\n.dashboard_panel.hidden{ data: { tab: 'pickups'} }\n  .dashboard_panel_body\n    - if pickups.any?\n      %table\n        %tbody\n          = render(partial: \"pickup_row_for_panel\", collection: pickups.limit(100), as: :pickup)\n    - else\n      .empty No requests at the moment\n</code></pre>\n\n<p>shipment partial</p>\n\n<pre><code>%tr\n  %td\n    = shipment.customer_name_for_company(company_id: current_company.id)\n  %td.id\n    = link_to(shipment.unique_shipment_id, companies_shipment_path(shipment))\n  %td.date\n    = shipment.shipping_date\n  %td\n    = shipment.carrier_product.suffixed_name\n  %td\n    = render(\"components/shared/contact\", contact: shipment.sender)\n  %td\n    = render(\"components/shared/contact\", contact: shipment.recipient)\n  %td.awb\n    = render(partial: \"components/shared/carrier_products/awb\", locals: { shipment: shipment })\n\n- if shipment.description.present?\n  %tr.description\n    %td{ :colspan =&gt; \"7\" }= shipment.description\n</code></pre>\n\n<p>Partial pickup</p>\n\n<pre><code>%tr\n  %td\n    = pickup.customer_name\n  %td.id\n    = link_to(pickup.unique_pickup_id, companies_pickup_path(pickup))\n  %td.date\n    = pickup.pickup_date\n  %td\n    = pickup.from_time\n  %td\n    = pickup.to_time\n  %td\n    = pickup.description\n</code></pre>\n\n<p>Partial shipment request</p>\n\n<pre><code>%tr\n  %td\n    = link_to(shipment_request.shipment.unique_shipment_id, companies_shipment_request_path(shipment_request))\n  %td\n    = shipment_request.shipment.shipping_date\n  %td\n    = \"#{shipment_request.shipment.sender.company_name},\"\n    %br/\n    = shipment_request.shipment.sender.country_name\n  %td\n    = \"#{shipment_request.shipment.recipient.company_name},\"\n    %br/\n    = shipment_request.shipment.recipient.country_name\n  %td\n    = suffixed_name(name: shipment_request.shipment.carrier_product.name, company: shipment_request.shipment.company)\n\n- if shipment_request.shipment.description.present?\n  %tr.description\n    %td{ :colspan =&gt; \"5\" }= shipment_request.shipment.description\n</code></pre>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1546954937, "post_id": 54089366, "comment_id": 95018093, "body": "can you provide the whole gemfile ?"}], "answers": [{"tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": false, "score": 2, "last_activity_date": 1546955563, "creation_date": 1546955563, "answer_id": 54093305, "question_id": 54089366, "link": "https://stackoverflow.com/questions/54089366/uninitialized-constant-syck-error-when-running-jekyll/54093305#54093305", "title": "uninitialized constant Syck error when running jekyll", "body": "<p>I guess that the few line relating to jekyll-1.3.0 tells us that there is a path problem somewhere.</p>\n\n<ul>\n<li><p>To update your gems with <code>bundle update</code></p></li>\n<li><p>and do a <a href=\"https://github.com/rbenv/rbenv#rbenv-rehash\" rel=\"nofollow noreferrer\">rehash</a> with <code>rbenv rehash</code> </p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 203, "user_id": 4851566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68998e20f52bb4dc774377c2bafd8bb3?s=128&d=identicon&r=PG", "display_name": "chemturion", "link": "https://stackoverflow.com/users/4851566/chemturion"}, "is_accepted": false, "score": 0, "last_activity_date": 1551293878, "creation_date": 1551293878, "answer_id": 54912643, "question_id": 54089366, "link": "https://stackoverflow.com/questions/54089366/uninitialized-constant-syck-error-when-running-jekyll/54912643#54912643", "title": "uninitialized constant Syck error when running jekyll", "body": "<p>It looks like you're using Jekyll version 1.3.0, which is about 5 years old at this point. Syck was removed from Ruby 2.0.0, so I think you'll need to use a newer version of Jekyll or use the Syck gem to bridge the gap. <a href=\"https://github.com/ruby/syck\" rel=\"nofollow noreferrer\">https://github.com/ruby/syck</a></p>\n"}], "owner": {"reputation": 18909, "user_id": 243755, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dd3b1dec4a32f39e9c1faa7362c18710?s=128&d=identicon&r=PG", "display_name": "zjffdu", "link": "https://stackoverflow.com/users/243755/zjffdu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551293878, "creation_date": 1546941820, "last_edit_date": 1546945055, "question_id": 54089366, "link": "https://stackoverflow.com/questions/54089366/uninitialized-constant-syck-error-when-running-jekyll", "title": "uninitialized constant Syck error when running jekyll", "body": "<p>Using <code>jekyll</code>, I get the following error when run command <code>bundle exec jekyll serve --watch</code>,</p>\n\n<pre><code>bundler: failed to load command: jekyll (/home/admin/.rbenv/versions/2.3.8/bin/jekyll)\nNameError: uninitialized constant Syck\n  /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/safe_yaml-0.9.7/lib/safe_yaml/syck_node_monkeypatch.rb:42:in `&lt;top (required)&gt;'\n  /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/safe_yaml-0.9.7/lib/safe_yaml.rb:200:in `require'\n  /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/safe_yaml-0.9.7/lib/safe_yaml.rb:200:in `&lt;module:YAML&gt;'\n  /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/safe_yaml-0.9.7/lib/safe_yaml.rb:132:in `&lt;top (required)&gt;'\n  /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/jekyll-1.3.0/lib/jekyll.rb:21:in `require'\n  /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/jekyll-1.3.0/lib/jekyll.rb:21:in `&lt;top (required)&gt;'\n  /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/jekyll-1.3.0/bin/jekyll:7:in `require'\n  /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/jekyll-1.3.0/bin/jekyll:7:in `&lt;top (required)&gt;'\n  /home/admin/.rbenv/versions/2.3.8/bin/jekyll:22:in `load'\n  /home/admin/.rbenv/versions/2.3.8/bin/jekyll:22:in `&lt;top (required)&gt;'\n/home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/commander-4.1.6/lib/commander/runner.rb:385:in `block in require_program': program version required (Commander::Runner::CommandError)\n    from /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/commander-4.1.6/lib/commander/runner.rb:384:in `each'\n    from /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/commander-4.1.6/lib/commander/runner.rb:384:in `require_program'\n    from /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/commander-4.1.6/lib/commander/runner.rb:52:in `run!'\n    from /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/commander-4.1.6/lib/commander/delegates.rb:8:in `run!'\n    from /home/admin/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/commander-4.1.6/lib/commander/import.rb:10:in `block in &lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundle", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "edited": false, "score": 4, "creation_date": 1546938692, "post_id": 54088452, "comment_id": 95009356, "body": "Tried it but still the same issue."}, {"owner": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "edited": false, "score": 1, "creation_date": 1546939690, "post_id": 54088452, "comment_id": 95009874, "body": "That did the trick wow!! You can update your answer and I&#39;ll accept it. Maybe you can provide some more info?"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "reply_to_user": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "edited": false, "score": 1, "creation_date": 1546940571, "post_id": 54088452, "comment_id": 95010325, "body": "Updated the answer!!"}, {"owner": {"reputation": 2500, "user_id": 1431800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef52069ce1a561e10feef902e0346ae2?s=128&d=identicon&r=PG&f=1", "display_name": "newdark-it", "link": "https://stackoverflow.com/users/1431800/newdark-it"}, "edited": false, "score": 0, "creation_date": 1553877854, "post_id": 54088452, "comment_id": 97563167, "body": "Great answer, did not expect it to be as simple as reverting the version but it is nice to know it was."}, {"owner": {"reputation": 961, "user_id": 1995204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a764c59fd22163d49597c987c7f05ad?s=128&d=identicon&r=PG", "display_name": "William Lahti", "link": "https://stackoverflow.com/users/1995204/william-lahti"}, "edited": false, "score": 1, "creation_date": 1554842241, "post_id": 54088452, "comment_id": 97897843, "body": "If you have just upgraded from Bundler 1.x to 2.x, see the answer from Holger Just related to BUNDLED WITH. No need to downgrade your bundler. Removing the lines or updating to your current version resolves."}], "tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": 89, "last_activity_date": 1546940558, "last_edit_date": 1546940558, "creation_date": 1546938506, "answer_id": 54088452, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun/54088452#54088452", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<p>As per the description mentioned in the post , before running the below mentioned command:</p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>in the script, you need to run the below command: </p>\n\n<pre><code>gem install bundler\n</code></pre>\n\n<p>So, the sequence of commands to work would be:</p>\n\n<pre><code>gem install bundler\nbundle install\n</code></pre>\n\n<p>Update the bundler command if if does not work to: </p>\n\n<pre><code> gem install bundler -v '1.17.3'\n</code></pre>\n\n<p>Reason for the break in functionalities in bundler 2.0 is given in below mentioned link:</p>\n\n<p><a href=\"https://bundler.io/blog/2019/01/04/an-update-on-the-bundler-2-release.html\" rel=\"noreferrer\">https://bundler.io/blog/2019/01/04/an-update-on-the-bundler-2-release.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 2429, "user_id": 467307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce4ab4bc069c60a3cf903ea065c1fb92?s=128&d=identicon&r=PG", "display_name": "Americo Savinon", "link": "https://stackoverflow.com/users/467307/americo-savinon"}, "edited": false, "score": 5, "creation_date": 1562167135, "post_id": 54088849, "comment_id": 100295229, "body": "IMO This should be the correct answer. Another option to add to this list of possible fixes is to delete <code>Gemfile.lock</code> and run bundle install again"}, {"owner": {"reputation": 8392, "user_id": 536984, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/535fad4c1bfbed6f16123ca4ada8b048?s=128&d=identicon&r=PG", "display_name": "Orlando", "link": "https://stackoverflow.com/users/536984/orlando"}, "edited": false, "score": 0, "creation_date": 1564673239, "post_id": 54088849, "comment_id": 101116890, "body": "Thanks for this answer, saved me a lot of trying."}, {"owner": {"reputation": 823, "user_id": 236719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab9270d01b5ff0263ffea992bc22480?s=128&d=identicon&r=PG", "display_name": "Alexej Kubarev", "link": "https://stackoverflow.com/users/236719/alexej-kubarev"}, "edited": false, "score": 0, "creation_date": 1578617497, "post_id": 54088849, "comment_id": 105506858, "body": "If one updates <code>rubygems</code> to newer version - it should solve the problem as well. <code>gem update --system</code> to upgrade to latest version ( or at least <code>gem update --system &#39;2.7.10&#39; to stay on 2.7.x version of RubyGems</code>."}, {"owner": {"reputation": 335, "user_id": 12549501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jrjZm.png?s=128&g=1", "display_name": "Tom Nguyen", "link": "https://stackoverflow.com/users/12549501/tom-nguyen"}, "edited": false, "score": 0, "creation_date": 1605267635, "post_id": 54088849, "comment_id": 114604880, "body": "The Bundler blog provides an one-line command to install the exact version of Bundler that RubyGems is looking for:  <code>shell gem install bundler -v &quot;$(grep -A 1 &quot;BUNDLED WITH&quot; Gemfile.lock | tail -n 1)&quot; </code>   You can read <a href=\"https://bundler.io/blog/2019/05/14/solutions-for-cant-find-gem-bundler-with-executable-bundle.html\" rel=\"nofollow noreferrer\">their article</a> for more information."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 150, "last_activity_date": 1546939969, "creation_date": 1546939969, "answer_id": 54088849, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun/54088849#54088849", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<p>Bundler version 2 introduced a new feature to automatically use the version of Bundler specified in the <code>Gemfile.lock</code> of your project. Thus, if you have an existing <code>Gemfile.lock</code> with a line like this at the bottom</p>\n\n<pre><code>BUNDLED WITH\n   1.17.3\n</code></pre>\n\n<p>Bundler will try to run with a Bundler version &lt; 2.0. Since you just have Bundler 2.0.1 (and Rubygems >= 2.7.0) installed, this fails with this rather unhelpful error message.</p>\n\n<p>To fix this, you could</p>\n\n<ul>\n<li>remove the lines from your <code>Gemfile.lock</code> and to use bundler 2.x everywhere from now on, or</li>\n<li>install a bundler 1.x version with <code>gem install bundler -v '&lt; 2.0'</code> to use the appropriate version as specified by your <code>Gemfile.lock</code>.</li>\n</ul>\n\n<p>More information about this can be found on the <a href=\"https://bundler.io/blog/2019/01/04/an-update-on-the-bundler-2-release.html\" rel=\"noreferrer\">Bundler blog</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 435, "user_id": 6733955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1257294547637551/picture?type=large", "display_name": "Dende", "link": "https://stackoverflow.com/users/6733955/dende"}, "is_accepted": false, "score": 4, "last_activity_date": 1546940172, "creation_date": 1546940172, "answer_id": 54088907, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun/54088907#54088907", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<p>I had the same problem recently. \nIn my case I have installed a version on bundler different from what is logged in the Gemfile.lock. Please check</p>\n"}, {"tags": [], "owner": {"reputation": 4810, "user_id": 2122783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd3f32b8947f32a7647d14565d3de65?s=128&d=identicon&r=PG", "display_name": "rusllonrails", "link": "https://stackoverflow.com/users/2122783/rusllonrails"}, "is_accepted": false, "score": 18, "last_activity_date": 1552153023, "last_edit_date": 1552153023, "creation_date": 1552146966, "answer_id": 55079133, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun/55079133#55079133", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<pre><code>gem install bundler -v '&lt; 2.0' \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10672, "user_id": 75801, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cef6e5e6c34c61b6da403216f033d3a9?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/75801/josh"}, "edited": false, "score": 1, "creation_date": 1582840006, "post_id": 55982169, "comment_id": 106925606, "body": "This solved the issue for me and also <a href=\"https://bundler.io/blog/2019/05/14/solutions-for-cant-find-gem-bundler-with-executable-bundle.html\" rel=\"nofollow noreferrer\">matches bundler&#39;s own docs</a>"}], "tags": [], "owner": {"reputation": 17551, "user_id": 1182464, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e569ac49e984e3a55ee167b14c11cf41?s=128&d=identicon&r=PG", "display_name": "estani", "link": "https://stackoverflow.com/users/1182464/estani"}, "is_accepted": false, "score": 43, "last_activity_date": 1556970231, "creation_date": 1556970231, "answer_id": 55982169, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun/55982169#55982169", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<p>I couldn\u2019t even do <code>bundle -v</code>. This sorted it out:</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>Got the info from here (similar problem): <a href=\"https://stackoverflow.com/questions/47026174/find-spec-for-exe-cant-find-gem-bundler-0-a-gemgemnotfoundexception\">find_spec_for_exe&#39;: can&#39;t find gem bundler (&gt;= 0.a) (Gem::GemNotFoundException)</a></p>\n\n<p>Probably some version mismatch between ruby + gem + bundler</p>\n"}, {"tags": [], "owner": {"reputation": 5796, "user_id": 272398, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/qYP2D.jpg?s=128&g=1", "display_name": "boddhisattva", "link": "https://stackoverflow.com/users/272398/boddhisattva"}, "is_accepted": false, "score": 1, "last_activity_date": 1565081882, "creation_date": 1565081882, "answer_id": 57372423, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun/57372423#57372423", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<p>I just faced the same error today. The bundler version which I had installed in my system previously was: 1.16.6</p>\n\n<p>Followed the instructions in the official bundler docs on <a href=\"https://bundler.io/v2.0/guides/bundler_2_upgrade.html\" rel=\"nofollow noreferrer\">How to Upgrade to Bundler 2</a> and the below two steps did the trick:</p>\n\n<ol>\n<li><code>gem install bundler</code> (Helps you get the latest version of bundler which as of today is 2.0.2)</li>\n<li><code>bundle update --bundler</code></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 754, "user_id": 2621740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a43db74c639c6f8550dc34bf78a36ab?s=128&d=identicon&r=PG", "display_name": "DiegoG", "link": "https://stackoverflow.com/users/2621740/diegog"}, "edited": false, "score": 0, "creation_date": 1568154640, "post_id": 57395152, "comment_id": 102182488, "body": "I solved it with answer, which is also on this site: <a href=\"https://bundler.io/blog/2019/05/14/solutions-for-cant-find-gem-bundler-with-executable-bundle.html\" rel=\"nofollow noreferrer\">bundler.io/blog/2019/05/14/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "is_accepted": false, "score": 3, "last_activity_date": 1565182989, "creation_date": 1565182989, "answer_id": 57395152, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun/57395152#57395152", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<p>I faced this same issue. The issue is caused by the fact that RubyGems cannot find an executable bundle for the bundler gem on the system</p>\n\n<p>To fix it, first run</p>\n\n<p><code>gem install bundler</code></p>\n\n<p>if you don't have bundler gem installed locally, then run</p>\n\n<p><code>gem update --system</code></p>\n\n<p>That's all</p>\n\n<p><strong>I hope this helps</strong></p>\n"}, {"tags": [], "owner": {"reputation": 5849, "user_id": 657703, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/208ba006821bf4ab078692204d23ceee?s=128&d=identicon&r=PG", "display_name": "\u042f\u0440\u043e\u0441\u043b\u0430\u0432 \u0420\u0430\u0445\u043c\u0430\u0442\u0443\u043b\u043b\u0438\u043d", "link": "https://stackoverflow.com/users/657703/%d0%af%d1%80%d0%be%d1%81%d0%bb%d0%b0%d0%b2-%d0%a0%d0%b0%d1%85%d0%bc%d0%b0%d1%82%d1%83%d0%bb%d0%bb%d0%b8%d0%bd"}, "is_accepted": false, "score": 1, "last_activity_date": 1572438692, "creation_date": 1572438692, "answer_id": 58625462, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun/58625462#58625462", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<p>I saw a similar error message for the travis bundle after upgrading mac os to Catalina.</p>\n\n<pre><code>Traceback (most recent call last):\n    2: from /usr/local/bin/travis:22:in `&lt;main&gt;'\n    1: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems.rb:263:in `bin_path'\n/usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems.rb:284:in `find_spec_for_exe': can't find gem travis (&gt;= 0.a) with executable travis (Gem::GemNotFoundException)\n</code></pre>\n\n<p>To resolve the issue, I reinstalled travis from source.</p>\n\n<pre><code>brew remove travis;\nbrew install -s travis\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3597, "user_id": 4291264, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cgB82.jpg?s=128&g=1", "display_name": "Manuel Schmitzberger", "link": "https://stackoverflow.com/users/4291264/manuel-schmitzberger"}, "is_accepted": false, "score": 2, "last_activity_date": 1578492224, "creation_date": 1578492224, "answer_id": 59647553, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun/59647553#59647553", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<p>You've to install the exact version of Bundler that RubyGems is looking for by running:</p>\n\n<pre><code>$ gem install bundler -v \"$(grep -A 1 \"BUNDLED WITH\" Gemfile.lock | tail -n 1)\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 7002304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YH0lc.jpg?s=128&g=1", "display_name": "Abdul Basit", "link": "https://stackoverflow.com/users/7002304/abdul-basit"}, "is_accepted": false, "score": 0, "last_activity_date": 1616666493, "creation_date": 1616666493, "answer_id": 66797080, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun/66797080#66797080", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<p>This may help solve the problem</p>\n<pre><code>bundle update --bundler\n</code></pre>\n"}], "owner": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43803, "favorite_count": 12, "accepted_answer_id": 54088849, "answer_count": 10, "score": 88, "last_activity_date": 1616666493, "creation_date": 1546936097, "last_edit_date": 1573730288, "question_id": 54087856, "link": "https://stackoverflow.com/questions/54087856/bundler-cant-find-gem-bundler-0-a-with-executable-bundle-gemgemnotfoun", "title": "Bundler: can&#39;t find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException) during bundle install with gem", "body": "<p>I'm executing the following script:</p>\n\n<pre><code>gem install rdoc --no-document\ngem install bundle\nbundle\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>+ gem install rdoc --no-document\nSuccessfully installed rdoc-6.1.1\n1 gem installed\n+ gem install bundle\nSuccessfully installed bundle-0.0.1\nParsing documentation for bundle-0.0.1\nDone installing documentation for bundle after 2 seconds\n1 gem installed\n1 gem installed\n+ bundle install\n/usr/lib/ruby/2.5.0/rubygems.rb:289:in `find_spec_for_exe': can't find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException)\n    from /usr/lib/ruby/2.5.0/rubygems.rb:308:in `activate_bin_path'\n    from /srv/myuser/.gem/ruby/2.5.0/bin/bundle:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>I've added <code>/srv/myuser/.gem/ruby/2.5.0/bin</code> to my path so I was able to install gems.</p>\n\n<p>the <code>gem env</code> shows</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.7.7\n  - RUBY VERSION: 2.5.1 (2018-03-29 patchlevel 57) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/2.5.0\n  - USER INSTALLATION DIRECTORY: /srv/myuser/.gem/ruby/2.5.0\n  - RUBY EXECUTABLE: /usr/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/bin\n  - SPEC CACHE DIRECTORY: /srv/myuser/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /usr/lib/ruby/gems/2.5.0\n     - /srv/myuser/.gem/ruby/2.5.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - \"gem\" =&gt; \"--user-install\"\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/sbin\n     - /usr/local/bin\n     - /usr/bin\n</code></pre>\n\n<p><code>gem list</code> shows the installed gems.\nI can also find bundle when I perform:</p>\n\n<pre><code>ls -ltrah /srv/myuser/.gem/ruby/2.5.0/bin\n</code></pre>\n\n<p>I've also tried to install bundler but that didn't also help.\nWhat am I doing wrong?</p>\n\n<p><code>gem which bundle</code> is showing nothing.<code>gem spec bundle</code> is showing it.</p>\n\n<p>Update: I tried to install bundler before running bundle but the same issue appears while:</p>\n\n<p><code>gem list bundle</code> shows</p>\n\n<pre><code>bundle (0.0.1)\nbundler (2.0.1)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rbenv"], "comments": [{"owner": {"reputation": 99, "user_id": 5968692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab32a7385b4f8f4d52a39c035fb469ad?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/5968692/vadym"}, "reply_to_user": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 0, "creation_date": 1546932315, "post_id": 54086963, "comment_id": 95006558, "body": "the next problem is with <code>rails s</code>"}, {"owner": {"reputation": 2470, "user_id": 1013142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd97eb9f014330c6063dfadb77bbd5de?s=128&d=identicon&r=PG", "display_name": "Sudipta Mondal", "link": "https://stackoverflow.com/users/1013142/sudipta-mondal"}, "edited": false, "score": 0, "creation_date": 1546932464, "post_id": 54086963, "comment_id": 95006619, "body": "Check the version mentioned in your Gemfile.lock"}, {"owner": {"reputation": 99, "user_id": 5968692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab32a7385b4f8f4d52a39c035fb469ad?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/5968692/vadym"}, "edited": false, "score": 0, "creation_date": 1546932624, "post_id": 54086963, "comment_id": 95006669, "body": "cannot find any ruby version in Gemfile.lock"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1546950814, "post_id": 54086963, "comment_id": 95015821, "body": "Do you have a <code>.ruby-version</code> file in your project @Vadym?"}, {"owner": {"reputation": 99, "user_id": 5968692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab32a7385b4f8f4d52a39c035fb469ad?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/5968692/vadym"}, "edited": false, "score": 0, "creation_date": 1546950968, "post_id": 54086963, "comment_id": 95015904, "body": "yes, it appeared after ruby reinstallation"}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 5968692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab32a7385b4f8f4d52a39c035fb469ad?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/5968692/vadym"}, "is_accepted": false, "score": 1, "last_activity_date": 1546934195, "last_edit_date": 1546934195, "creation_date": 1546933517, "answer_id": 54087270, "question_id": 54086963, "link": "https://stackoverflow.com/questions/54086963/how-to-fix-your-ruby-version-is-2-3-3-but-your-gemfile-specified-2-5-2/54087270#54087270", "title": "How to fix &#39;Your Ruby version is 2.3.3, but your Gemfile specified 2.5.2&#39;", "body": "<p>The problem was solved by,</p>\n\n<pre><code>rvm reinstall ruby-2.5.2\nrvm default use ruby-2.5.2\nbundle install\nbin/rails s\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5968692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab32a7385b4f8f4d52a39c035fb469ad?s=128&d=identicon&r=PG&f=1", "display_name": "Vadym", "link": "https://stackoverflow.com/users/5968692/vadym"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 876, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546934195, "creation_date": 1546932101, "last_edit_date": 1546932396, "question_id": 54086963, "link": "https://stackoverflow.com/questions/54086963/how-to-fix-your-ruby-version-is-2-3-3-but-your-gemfile-specified-2-5-2", "title": "How to fix &#39;Your Ruby version is 2.3.3, but your Gemfile specified 2.5.2&#39;", "body": "<p>I got an error: <code>Your Ruby version is 2.3.3, but your Gemfile specified 2.5.2</code> with running <code>bundle install</code>.</p>\n\n<p>Besides, <code>ruby -v</code> shows <code>ruby 2.5.2p104 (2018-10-18 revision 65133) [x86_64-linux]</code>.</p>\n\n<p>OS: Debian 9</p>\n\n<p>Problem with bundler was solved with: <a href=\"https://stackoverflow.com/questions/23039528/your-ruby-version-is-2-0-0-but-your-gemfile-specified-2-1-0\">Your Ruby version is 2.0.0, but your Gemfile specified 2.1.0</a></p>\n\n<p>But now there is the same error with <code>rails s</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1546932109, "post_id": 54086861, "comment_id": 95006464, "body": "Check in the server logs - which controller and action are you calling with AJAX?"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1546932233, "post_id": 54086861, "comment_id": 95006521, "body": "my log read &quot;Processing by Families::RegistrationsController#new as <i>/</i>&quot;"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1546932251, "post_id": 54086861, "comment_id": 95006533, "body": "thanks for the quick response btw @Vasilisa!"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 2, "creation_date": 1546932754, "post_id": 54086861, "comment_id": 95006715, "body": "It&#39;s not a good idea - add &#39;get cities for selected state&#39; functionality to default Devise controller. Result is unpredictable. Try to create new CitiesController, or maybe a new action <code>state_cities</code> in any existing suitable controller, add route to the action, move code and change url in ajax call to corresponding."}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1546933781, "post_id": 54086861, "comment_id": 95007114, "body": "THANK YOU &lt;3! I LOVE THIS COMMUNITY :D"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1546946198, "post_id": 54086861, "comment_id": 95013504, "body": "Does that comment solve your question?"}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1546947692, "post_id": 54091081, "comment_id": 95014308, "body": "Please note that this is a rough example of how the task can be accomplished - it is in no way a complete solution that you can copy-paste into your app."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1546951170, "last_edit_date": 1546951170, "creation_date": 1546947633, "answer_id": 54091081, "question_id": 54086861, "link": "https://stackoverflow.com/questions/54086861/using-js-erb-in-rails/54091081#54091081", "title": "Using js.erb in rails", "body": "<p>To solve this you should just setup a separate controller where you can fetch the data from asynchronously and alternatively there are also several free API's which can be used for geographical lookup such as <a href=\"https://developers.google.com/maps/documentation/geocoding/start?csw=1\" rel=\"nofollow noreferrer\">Googles Geocoding API</a> and <a href=\"https://www.geonames.org/\" rel=\"nofollow noreferrer\">Geonames</a>.</p>\n\n<p>To setup a separate controller you can do it by:</p>\n\n<pre><code># /config/routes.rb\nget '/states/:state_id/cities', to: 'cities#index'\n\n# /app/controllers/cities_controller.rb\nclass CitiesController &lt; ApplicationController\n  # GET\n  def index\n    @cities = CS.get(:us, params[:state_id]) \n    respond_to do |f|\n      f.json { render json: @cities }\n    end\n  end\nend\n</code></pre>\n\n<p>I would skip using a <code>.js.erb</code> template altogether and just return JSON data which you can use directly in your JS or with one of the many existing autocomplete solutions. <code>.js.erb</code> only makes sense for extensive HTML templating (like for example rendering an entire form) where you want to reuse your server side templates - it greatly increases the complexity and generally makes a mess of your javascript which is not worth it just to output a list of option tags.</p>\n\n<pre><code>// If you are using jQuery you might as well setup a delegated\n// handler that works with turbolinks, \n$(document).on('change', '#state-picker', function(){\n  $.getJSON(\"/states/\" + $(this).value() + \"/cities\", function(data){\n    // using a fragment avoids updating the DOM for every iteration.\n    var $frag = $('&lt;select&gt;');\n    $.each(data, function(city){\n      $frag.append$('&lt;option&gt;' + data + '&lt;/option&gt;');\n    });\n    $('#city-picker').empty()\n                  .append($('frag').children('option'));\n  });\n});\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546951170, "creation_date": 1546931629, "last_edit_date": 1546943551, "question_id": 54086861, "link": "https://stackoverflow.com/questions/54086861/using-js-erb-in-rails", "title": "Using js.erb in rails", "body": "<p>In Rails 5 app with <code>devise</code>, I need to use a <code>new.js.erb</code> file to update select tag in my registrations view and controller. I cant seem to figure out why my <code>new.js.erb</code> file isn't working.  </p>\n\n<p>I've tried to use <code>respond_to</code> in controller as below,</p>\n\n<p><strong>registrations-controller.rb</strong></p>\n\n<pre><code> def new\n   super \n   @cities = CS.get(:us,params[:state]) \n   respond_to do |format|\n     format.js { render '/new.js.erb' }# layout: false }          \n     format.html \n   end\n end\n</code></pre>\n\n<p><strong>new.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), :remote =&gt; true) do |f| %&gt;\n   &lt;div class=\"signup-input-container\"&gt;\n     &lt;div class=\"field\"&gt;\n        &lt;%= f.text_field :firstname, autofocus: true, autocomplete: \"firstname\", placeholder: \"First name\", class: \"signup-input-container--input\" %&gt;\n     &lt;/div&gt;\n     &lt;div class=\"field\"&gt;\n        &lt;%= f.select :state, options_for_select(CS.states(:us).map { |code, name| [name, code] }),{:prompt =&gt; \"State\"}, {:class =&gt; \"signup-input-container--input\", :id =&gt; \"state-picker\"} %&gt;\n     &lt;/div&gt;\n     &lt;div class=\"field\"&gt;\n        &lt;%= f.select :city, options_for_select([]),{}, {:class =&gt; \"signup-input-container--input\", :id =&gt; \"city-picker\"} %&gt; \n     &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>new.js.erb</strong></p>\n\n<pre><code>  var city = document.getElementById(\"city-picker\");\n\n  while (city.firstChild) city.removeChild(city.firstChild);\n\n  var placeholder = document.createElement(\"option\");\n  placeholder.text = \"Choose a city\";\n  placeholder.value = \"\";\n  city.appendChild(placeholder);\n\n &lt;% @cities.each do |c| %&gt;\n   city.options[city.options.length] = new Option('&lt;%= c %&gt;');\n &lt;% end %&gt;\n</code></pre>\n\n<p><strong>main.js</strong></p>\n\n<pre><code>  var state = document.getElementById(\"state-picker\");\n  state.addEventListener(\"change\", function() {\n     $.ajax({\n        url: \"/states?state=\" + state.value,\n        type: \"GET\"\n     })\n  })\n</code></pre>\n\n<p>I'm expecting this to create select tag options with my array of cities in my controller. Does anyone know how to get this to work?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "url-for"], "answers": [{"tags": [], "owner": {"reputation": 8357, "user_id": 47185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/47f28e60db02c75ca0fae638bb3e8304?s=128&d=identicon&r=PG", "display_name": "Tyler Rick", "link": "https://stackoverflow.com/users/47185/tyler-rick"}, "is_accepted": false, "score": 0, "last_activity_date": 1546931641, "creation_date": 1546931641, "answer_id": 54086863, "question_id": 54085688, "link": "https://stackoverflow.com/questions/54085688/how-to-pass-options-like-only-path-true-and-anchor-to-url-for-when-gener/54086863#54086863", "title": "How to pass options like `only_path: true` and `anchor:` to `url_for` when generating a route from an array or object (instead of from a hash)", "body": "<p>Here's one potential solution that shows kind of what I'm looking for:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>  def url_for(object = nil, **options)\n    full_url_for(object, **options)\n  end\n\n  def full_url_for(object = nil, **options)\n    path_or_url_for = -&gt;(*args) {\n      if options[:only_path]\n        _routes.path_for(*args)\n      else\n        _routes.url_for( *args)\n      end\n    }\n    polymorphic_path_or_url = -&gt;(*args) {\n      if options[:only_path]\n        polymorphic_path(*args)\n      else\n        polymorphic_url( *args)\n      end\n    }\n\n    case object\n    when nil, Hash, ActionController::Parameters\n      route_name = options.delete :use_route\n      merged_url_options = options.to_h.symbolize_keys.reverse_merge!(url_options)\n      path_or_url_for.(merged_url_options, route_name)\n    when String\n      object\n    when Symbol\n      HelperMethodBuilder.url.handle_string_call self, object\n    when Array\n      components = object.dup\n      polymorphic_path_or_url.(components, components.extract_options!)\n    when Class\n      HelperMethodBuilder.url.handle_class_call self, object\n    else\n      HelperMethodBuilder.url.handle_model_call self, object\n    end\n  end\n</code></pre>\n\n<p>(Compare to source of <a href=\"https://api.rubyonrails.org/classes/ActionDispatch/Routing/UrlFor.html#method-i-url_for\" rel=\"nofollow noreferrer\">original Rails version</a>)</p>\n\n<p>I haven't tried running the Rails test suite against this code yet, so it very well may have missed something, but it seems to work for my simple tests so far:</p>\n\n<pre><code>main &gt; app.url_for(controller: 'users', action: 'index')\n=&gt; \"http://example.com/users\"\n\nmain &gt; app.url_for(controller: 'users', action: 'index', only_path: true)\n=&gt; \"/users\"\n\nmain &gt; app.url_for [user, :notification_preferences]\n=&gt; \"http://example.com/users/4/notification_preferences\"\n\nmain &gt; app.url_for [user, :notification_preferences], only_path: true\n=&gt; \"/users/4/notification_preferences\"\n</code></pre>\n\n<p>Let me know if you find any bugs in this or have any improvements or can think of a cleaner way to accomplish this.</p>\n\n<p>Please do post any improved version you may have as an answer!</p>\n"}], "owner": {"reputation": 8357, "user_id": 47185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/47f28e60db02c75ca0fae638bb3e8304?s=128&d=identicon&r=PG", "display_name": "Tyler Rick", "link": "https://stackoverflow.com/users/47185/tyler-rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1546931683, "creation_date": 1546925282, "last_edit_date": 1546931683, "question_id": 54085688, "link": "https://stackoverflow.com/questions/54085688/how-to-pass-options-like-only-path-true-and-anchor-to-url-for-when-gener", "title": "How to pass options like `only_path: true` and `anchor:` to `url_for` when generating a route from an array or object (instead of from a hash)", "body": "<p>I'm trying to change a function \u2014 which currently only accepts a URL (path) <em>string</em> \u2014 to make it more flexible, so that it will also accept as input the same arguments that you can pass to <code>url_for</code>. The problem is, <code>url_for</code> returns a full URL including protocol/host, and I only want the path portion...</p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActionDispatch/Routing/UrlFor.html#method-i-url_for\" rel=\"nofollow noreferrer\"><code>url_for</code></a> has a lovely <code>only_path: true</code> option that makes it skip adding the protocol/host. This works great as long as you're passing it as part of a single hash to <code>url_for</code>:</p>\n\n<pre><code>main &gt; app.url_for(controller: 'users', action: 'index', only_path: true)\n=&gt; \"/users\"\n</code></pre>\n\n<p>But how do you pass options when you are passing an <em>array</em> or a <em>model object</em> to <code>url_for</code>?</p>\n\n<pre><code>main &gt; app.url_for(user, only_path: true)\nArgumentError: wrong number of arguments (given 2, expected 0..1)\nfrom /gems/actionpack-5.1.6/lib/action_dispatch/routing/url_for.rb:166:in `url_for'\n\nmain &gt; app.url_for([user, :notification_preferences], only_path: true)\nArgumentError: wrong number of arguments (given 2, expected 0..1)\n/actionpack-5.1.6/lib/action_dispatch/routing/url_for.rb:166:in `url_for'\n</code></pre>\n\n<p>You can't! Clearly, it's not even syntactically possible to pass an options hash if you're passing anything other than a hash, since <a href=\"https://api.rubyonrails.org/classes/ActionDispatch/Routing/UrlFor.html#method-i-url_for\" rel=\"nofollow noreferrer\">it</a>s arity is <code>0..1</code> and it only takes a single argument: <code>url_for(options = nil)</code>.</p>\n\n<hr>\n\n<p>So my question is, is there a Rails helper that takes the same options as <code>url_for</code> (including <code>anchor:</code>) but returns a path?</p>\n\n<p>I suppose it wouldn't be too hard to add one, like <a href=\"https://grosser.it/2009/08/26/path_for-rails-helper/\" rel=\"nofollow noreferrer\">this one</a>, that uses <code>URI.parse(path).path</code> (probably what I'll do for now)... but that seems inefficient, inelegant, and inconsistent.</p>\n\n<p><strong>Inefficient</strong> and <strong>inelegant</strong> because it generates a string containing extra unwanted information and then has to parse it, convert it to a structured data structure, and then convert it <em>back</em> to a string <em>without</em> the unwanted information.</p>\n\n<p><strong>Inconsistent</strong> because:</p>\n\n<ol>\n<li><p>Rails includes a <code>_path</code> variant for every <code>_url</code> route helper. Why doesn't it have a built-in \"path\" variant of <code>url_for</code> (or does it and it's called something else?)?</p></li>\n<li><p><em>Other</em> routing helpers that accept an object or array\u2014such as <code>polymorphic_path</code>\u2014 let you pass in options too:</p></li>\n</ol>\n\n<p>Example:</p>\n\n<pre><code>main &gt; app.polymorphic_url [user, :notification_preferences], anchor: 'foo'\n=&gt; \"http://example.com/users/4/notification_preferences#foo\"\n\nmain &gt; app.polymorphic_path [user, :notification_preferences], anchor: 'foo'\n=&gt; \"/users/4/notification_preferences#foo\"\n\nmain &gt; app.polymorphic_path user, anchor: 'foo'\n=&gt; \"/users/4#foo\"\n</code></pre>\n\n<p><code>ActionDispatch::Routing::RouteSet</code> actually has a <code>path_for</code>:</p>\n\n<pre><code>  # strategy for building urls to send to the client                        \n  PATH    = -&gt;(options) { ActionDispatch::Http::URL.path_for(options) }     \n  UNKNOWN = -&gt;(options) { ActionDispatch::Http::URL.url_for(options) }    \n\n  def path_for(options, route_name = nil)                                   \n    url_for(options, route_name, PATH)                                      \n  end                                                                       \n\n  # The +options+ argument must be a hash whose keys are *symbols*.         \n  def url_for(options, route_name = nil, url_strategy = UNKNOWN)            \n    options = default_url_options.merge options    \n    ...\n</code></pre>\n\n<p>\u2014 just not <code>ActionDispatch::Routing::UrlFor</code>, apparently. Anyway, <code>ActionDispatch::Routing::RouteSet#path_for</code> is buried too deep in internals to be helpful to me; I need a helper that is callable from the controller/view.</p>\n\n<p>So, what is a good solution for this that is elegant, consistent with other Rails routing helpers, and relatively efficient (no <code>URI.parse</code>)?</p>\n\n<hr>\n\n<p>Better yet, is there any reason the method signature of the built-in <code>url_for</code> couldn't simply be modified (in a future version of Rails, by submitting a pull request) to allow both a subject (model object, array, or hash) <em>and</em> any number of optional <code>options</code> to be passed in?</p>\n\n<p>Probably the original <code>url_for</code> was written before Ruby had keyword arguments. But nowadays, it's pretty trivial to do exactly that: accept an \"object\" plus any number of optional keyword options:</p>\n\n<pre><code>def url_for(object = nil, **options)\n  puts \"object: #{object.inspect}\"\n  puts \"options: #{options.inspect}\"\nend\n\nmain &gt; url_for ['user', :notification_preferences], anchor: 'anchor'\nobject: [\"user\", :notification_preferences]\noptions: {:anchor=&gt;\"anchor\"}\n=&gt; nil\n\nmain &gt; url_for ['user', :notification_preferences], only_path: true\nobject: [\"user\", :notification_preferences]\noptions: {:only_path=&gt;true}\n</code></pre>\n\n<p>Is there any reason we couldn't/shouldn't change <code>url_for</code>'s method signature to <code>url_for(object = nil, **options)</code>?</p>\n\n<p>How would you modify <code>url_for</code>/<code>full_url_for</code> such that it remained as backwards compatible as possible but also let you call it with an array + keyword options?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1546925680, "post_id": 54085236, "comment_id": 95004430, "body": "With guest users, why not automatically assign them a session id? That way you are not reliant on what is contained in the params hash."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546925936, "post_id": 54085236, "comment_id": 95004492, "body": "Can you correct grammar in your question &quot;How can I limit the to_param override to only be available for one method only?&quot;"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1546927515, "post_id": 54085236, "comment_id": 95004908, "body": "@BKSpurgeon Thats probably a better idea than my current remedy but I am also new to coding and haven&#39;t done much manual session coding - as in creating a sessions controller, or similar.  But wouldn&#39;t a session be limited to when a user deletes cookies? I do want users to be able to reference the page in the future if they need be."}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1546928886, "post_id": 54085236, "comment_id": 95005356, "body": "@uno yes if the user deletes their session cookies then they&#39;ll lose all their associated data. I don&#39;t recommend manually reimplementing logins by yourself - use an established and proven gem like <code>devise</code> - here is a read me on how to implement guest logins: <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Create-a-guest-user\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/&hellip;</a>"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1546928980, "post_id": 54085236, "comment_id": 95005386, "body": "also be aware that there is a character limit in the amount of data you can place in the URL to extract data into the params hash."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1546929058, "post_id": 54085236, "comment_id": 95005421, "body": "Thanks.  I actually am using Devise already.  I like the system I have but what I&#39;m looking to do is basically for aesthetics.  If a user is signed in an have access (using cancan), I think they should have the actual order :id in their URL - but if I don&#39;t find a way I&#39;ll just use a 28 digit token as the way to find the order."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1546957960, "post_id": 54085236, "comment_id": 95019934, "body": "You should note that replacing the ID with a token is really just security by obscurity and while it makes enumeration more difficult is not a replacement for properly authorizing resources."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1546980613, "post_id": 54085236, "comment_id": 95031802, "body": "Yes i know - but no information such as credit cards or addresses will ever be in the order confirmation and 2 i doubt anyone will go around trying to guess a 28 digit code to find other peoples orders just to see their name.  I may even create a second token for an order to have as order/:order_token/confirmation/:conf_token just to made things hard - and i believe shopify does that. or something very similar"}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1546929539, "post_id": 54086333, "comment_id": 95005583, "body": "Thanks for your answer.  What your saying is a bit over my head and/or just vague for my understanding in general.  I just updated my OP to include my routes.  Can you give me an example snippet code of what it would look like to accomplish this?  Essentially, I only want to have the SecureRandom in the URL for the order_confirmation method in the OrdersController."}], "tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1546933000, "last_edit_date": 1592644375, "creation_date": 1546929086, "answer_id": 54086333, "question_id": 54085236, "link": "https://stackoverflow.com/questions/54085236/how-to-use-to-param-on-only-one-method-or-disable-for-other-methods/54086333#54086333", "title": "How to use to_param on only one method - or disable for other methods?", "body": "<p><a href=\"https://guides.rubyonrails.org/routing.html#overriding-named-route-parameters\" rel=\"nofollow noreferrer\">Overriding Named Route Parameters</a></p>\n<p>You can use the <code>param</code> option when defining resources to override the default resource identifier.  In order to have a different identifier depending on the route you can use the <code>only</code> and <code>except</code> options to specify which routes to include or exclude respectively.</p>\n<p>You will need to create a <code>resources</code> block for each identifier.  You can then define which routes belong to which identifier.</p>\n<p>In order to update the <code>to_param</code> method for URL generation you will need to be able to tell what action you are in, and therefore which identifier to use.  There are many ways to do this.  You could add an <code>attr_writer :to_param_flag</code> to your User model and set it in a <code>before_action</code> callback on the controller. You could store the logged_in state on User.  And there are many other solutions you can experiment with to find what best suites your project.</p>\n<p><strong>Update:</strong></p>\n<p>You can define the route a couple of ways.  Since there is only one route, instead of using resources we can use match. In the <a href=\"https://api.rubyonrails.org/v5.2.2/classes/ActionDispatch/Routing/Mapper/Base.html#method-i-match\" rel=\"nofollow noreferrer\">match documentation</a>, and <a href=\"https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionpack/lib/action_dispatch/routing/mapper.rb#L469\" rel=\"nofollow noreferrer\"><code>ActionDispatch::Routing::Mapper::Base#match</code></a> usage and comments, we can see the the options (including <code>:param</code>) that we can use in <code>match</code>.</p>\n<p>Therefore we can do:</p>\n<pre><code>resources :orders do\n  match :order_confirmation, on: :member, param: :order_token, via: :get\nend\n</code></pre>\n<p>and since <a href=\"https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/actionpack/lib/action_dispatch/routing/mapper.rb#L417\" rel=\"nofollow noreferrer\"><code>get</code> is an alias for <code>match...via: :get</code></a> we can do:</p>\n<pre><code>resources :orders do\n  get :order_confirmation, on: :member, param: :order_token\nend\n</code></pre>\n<p>The routing will now be via <code>/orders/order_confirmation/:order_token</code> and the controller will have access to <code>params[:order_token]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "is_accepted": true, "score": 0, "last_activity_date": 1547420591, "creation_date": 1547420591, "answer_id": 54174036, "question_id": 54085236, "link": "https://stackoverflow.com/questions/54085236/how-to-use-to-param-on-only-one-method-or-disable-for-other-methods/54174036#54174036", "title": "How to use to_param on only one method - or disable for other methods?", "body": "<p>This is how I solved the to_param issue.  I just simply removed it and reorganized the routes for the specific member route.....</p>\n\n<p><strong>When using:</strong></p>\n\n<pre><code>  resources :orders, param: :order_token do\n      get 'order_confirmation', :on =&gt; :member\n  end\n</code></pre>\n\n<p>In my routes, I am able to go to the URL i want. Although, after an order is created, it still directs me to a route using the :id.</p>\n\n<p><strong>I then change my redirect to:</strong></p>\n\n<pre><code>redirect_to order_confirmation_order_path(@order.order_token)\n</code></pre>\n\n<p><strong>And it works.</strong></p>\n\n<p>I also removed my <code>to_param</code> override.</p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 54174036, "answer_count": 2, "score": 1, "last_activity_date": 1547420591, "creation_date": 1546921870, "last_edit_date": 1546929210, "question_id": 54085236, "link": "https://stackoverflow.com/questions/54085236/how-to-use-to-param-on-only-one-method-or-disable-for-other-methods", "title": "How to use to_param on only one method - or disable for other methods?", "body": "<p>I have created a <code>to_param</code> in my model so I can find orders by their tokens instead of user ID's in the URL. This is for guest users who are not signed in. I do this so other users won't be able to view other peoples orders or just anybody in general.</p>\n\n<p><strong>I have this in my model:</strong></p>\n\n<pre><code>validates :order_token, presence: true\nvalidates :order_token, uniqueness: true\nbefore_validation :generate_token, on: :create\n\ndef generate_token\n  begin\n    self.order_token = SecureRandom.urlsafe_base64(28, false)\n  end while self.class.find_by(order_token: order_token)\nend\n\ndef to_param\n  order_token\nend\n</code></pre>\n\n<p><strong>In my controller I use it with this:</strong></p>\n\n<pre><code>def order_confirmation\n  @order = Order.find_by(order_token: params[:order_token])\nend\n</code></pre>\n\n<p>Though, I want this <code>find</code> or <code>find_by</code> to be limited to only the <code>order_confirmation</code> method</p>\n\n<p>When users are signed in, I do want their actual order ID's in the URL (everything for signed in users is protected with cancancan gem). This way things are more convenient for them.</p>\n\n<p>How can I limit the <code>to_param</code> override to only be available for one method only?</p>\n\n<p>MY Routes:</p>\n\n<pre><code>resources :orders do\n      get 'order_confirmation', :on =&gt; :member\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1546915845, "post_id": 54084613, "comment_id": 95002386, "body": "your question is not clear. How is #1 different from #2? they are not."}, {"owner": {"reputation": 1331, "user_id": 6359753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/73961b0d8661795d0b3f8300b633124c?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Yang", "link": "https://stackoverflow.com/users/6359753/henry-yang"}, "reply_to_user": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1546917835, "post_id": 54084613, "comment_id": 95002769, "body": "Sorry I forgot to remove self in #2"}], "answers": [{"comments": [{"owner": {"reputation": 1331, "user_id": 6359753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/73961b0d8661795d0b3f8300b633124c?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Yang", "link": "https://stackoverflow.com/users/6359753/henry-yang"}, "edited": false, "score": 1, "creation_date": 1546917908, "post_id": 54084809, "comment_id": 95002784, "body": "I know this but I don&#39;t know why it work like this. I would like to understand how ruby handles context and self and arrive at this difference"}], "tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": false, "score": 0, "last_activity_date": 1546917595, "creation_date": 1546917595, "answer_id": 54084809, "question_id": 54084613, "link": "https://stackoverflow.com/questions/54084613/how-does-ruby-tell-the-difference-between-instance-method-and-class-method-defin/54084809#54084809", "title": "How does ruby tell the difference between instance method and class method definition?", "body": "<p>In a class if you define a method on self, it defines it on the class. E.g.</p>\n\n<pre><code>class User\n  def self.greeting\n    \"Hello User\"\n  end\nend\n</code></pre>\n\n<p>Then you can call</p>\n\n<pre><code>User.greeting\n# =&gt; \"Hello User\"\n</code></pre>\n\n<p>If you define a method without self, then that method is defined for objects of that class. E.g.:</p>\n\n<pre><code>class User\n  def greeting\n    \"Hello user\"\n  end\nend\n</code></pre>\n\n<p>Then you have to create a new user object to call <code>greeting</code>.</p>\n\n<pre><code>user = User.new\nuser.greeting\n# =&gt; \"Hello user\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1840, "user_id": 202224, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/EY43q.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/202224/david"}, "edited": false, "score": 0, "creation_date": 1546918751, "post_id": 54084853, "comment_id": 95002946, "body": "I&#39;ve updated my answer based on your other comments and change in title. Specifically this part:  It might be helpful to think about the <code>self</code> in your very first example as a different thing to the <code>self</code> in examples #1 and #2. It might be helpful to think of the <code>self</code> in #1 and #2 as <code>class</code>? They&#39;re the same word but what they are used for and change is not directly interchangeable."}], "tags": [], "owner": {"reputation": 1840, "user_id": 202224, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/EY43q.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/202224/david"}, "is_accepted": false, "score": 3, "last_activity_date": 1546919229, "last_edit_date": 1546919229, "creation_date": 1546918141, "answer_id": 54084853, "question_id": 54084613, "link": "https://stackoverflow.com/questions/54084613/how-does-ruby-tell-the-difference-between-instance-method-and-class-method-defin/54084853#54084853", "title": "How does ruby tell the difference between instance method and class method definition?", "body": "<p>The <code>self</code> is sometimes needed (otherwise it wouldn't exist at all). The first example you give is a case where it is redundant. Both of those method calls refer to the same method.</p>\n\n<p>There are times when it <em>is</em> needed to distinguish between two different behaviours.</p>\n\n<p>In your examples #1 and #2 the <code>self</code> is used to make sure the method is defined on the class, rather than being on instances of the class. The <code>self</code> isn't redundant in this case. This is the way that the Ruby interpreter knows where you want the method defined. It might be helpful to think about the <code>self</code> in your very first example as a different thing to the <code>self</code> in examples #1 and #2. It might be helpful to think of the <code>self</code> in #1 and #2 as \"<code>class</code>\"? They're the same keyword but how they are used is not directly interchangeable.</p>\n\n<p>Another example of where it isn't redundant:</p>\n\n<pre><code># user.rb\n\ndef method1\n  name = \"Henry\" # Sets a local variable called `name`\nend\n\ndef method2\n  self.name = \"Henry\" # Sets the user's `name` attribute\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1546927295, "last_edit_date": 1546927295, "creation_date": 1546919958, "answer_id": 54085032, "question_id": 54084613, "link": "https://stackoverflow.com/questions/54084613/how-does-ruby-tell-the-difference-between-instance-method-and-class-method-defin/54085032#54085032", "title": "How does ruby tell the difference between instance method and class method definition?", "body": "<p>In a <strong>method body</strong>, <code>self</code> refers to the <strong>receiver</strong>. In lines 3..4 of the following, once the receiver is determined to be a <code>User</code> instance (by the <code>def greeting</code> syntax), <code>self</code> refers to that instance.</p>\n\n<pre><code>class User\n  def greeting\n    puts \"Hi, #{name}\"      # method body\n    puts \"Hi, #{self.name}\" # method body\n  end\nend\n</code></pre>\n\n<p>In a <strong>class body</strong>, <code>self</code> refers to the <strong>class</strong>. In lines 2, 4, 8, 10 of the following, the class is <code>User</code>, so <code>def self.greeting</code> is the same as <code>def User.greeting</code>.</p>\n\n<pre><code>class User\n  def self.greeting # class body\n    # ...\n  end               # class body\nend\n\nclass User\n  def greeting      # class body\n    # ...\n  end               # class body\nend\n</code></pre>\n\n<hr>\n\n<p>But I actually think your real issue is not what <code>self</code> means, but rather what \"an omitted receiver\" means, in different contexts.</p>\n\n<p>In method-<strong>calling</strong> syntax, an omitted receiver stands for <code>self</code>. So the following two are the same:</p>\n\n<pre><code>name\nself.name\n</code></pre>\n\n<p>In method-<strong>defining</strong> syntax, an omitted receiver stands for \"any instance of the class\". So the following two are not the same:</p>\n\n<pre><code>def User.greeting; ... end\ndef greeting; ... end\n</code></pre>\n\n<p>When you define an instance method, there is no explicit way to express \"any instance of the class\", so actually omission is mandatory.</p>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1546926760, "creation_date": 1546926760, "answer_id": 54085891, "question_id": 54084613, "link": "https://stackoverflow.com/questions/54084613/how-does-ruby-tell-the-difference-between-instance-method-and-class-method-defin/54085891#54085891", "title": "How does ruby tell the difference between instance method and class method definition?", "body": "<p><code>self</code> is mandatory while defining class methods whereas without self keyword it will be treated as instance methods. <code>class &lt;&lt; self; end;</code> block also used to define numbers of class methods.</p>\n\n<p>These methods are loaded when your class is loaded and above will help to distinguish them.</p>\n\n<p>It will be simply like relating with <strong>real life example</strong>.</p>\n\n<p>You have number of accounts having authentication provided on your computer, valid person with right password can enter inside account. Once you enter inside account, you do not need to mention who you are! It always count you the one who entered.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1546975299, "last_edit_date": 1546975299, "creation_date": 1546929073, "answer_id": 54086331, "question_id": 54084613, "link": "https://stackoverflow.com/questions/54084613/how-does-ruby-tell-the-difference-between-instance-method-and-class-method-defin/54086331#54086331", "title": "How does ruby tell the difference between instance method and class method definition?", "body": "<p>Methods defined on a class are <em>instance methods</em>:</p>\n\n<pre><code>class Animal\n  def dog\n    \"woof\"\n  end\n\n  def cat\n    \"meow\"\n  end\nend\n</code></pre>\n\n<p>They are so-named because they respond to any instance of the class, meaning that their receiver must be an instance of the class:</p>\n\n<pre><code>Animal.instance_methods(false)\n  #=&gt; [:dog, :cat] \nanimal = Animal.new\n  #=&gt; #&lt;Animal:0x00005bfb0c55ae98&gt;  \nanimal.dog\n  #=&gt; \"woof\"\nAnimal.dog\n  #=&gt; NoMethodError (undefined method `dog' for Animal:Class)\n</code></pre>\n\n<p>To define a method whose receiver is a class (a <em>class method</em>) we define the method on the class's singleton class. For the class <code>Animal</code> we could write either of the following.</p>\n\n<pre><code>class Animal\n  class &lt;&lt; Animal\n    def pig(n)\n      \"#{n} little pigs\"\n    end\n  end\nend\n\nAnimal.methods(false)\n  #=&gt; [:pig] \nAnimal.pig(3)\n  #=&gt; \"3 little pigs\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Animal.define_singleton_method(:pig) do |n|\n  \"#{n} little pigs\"\nend\n\nAnimal.methods(false)\n  #=&gt; [:pig] \nAnimal.pig(3)\n  #=&gt; \"3 little pigs\"\n</code></pre>\n\n<p>The line <code>class &lt; Animal</code><sup>1</sup> changes the scope to <code>Animal</code>'s singleton class, causing the value of <code>self</code> to change to that class as well.</p>\n\n<p>So what does this have to do with the question, that is, defining methods <code>def self.my_method ...</code>? The short answer is that there is no need to define methods in that way. Please be patient--I'll get to that. </p>\n\n<p>Note that the method <code>pig</code>, defined on <code>Animal</code>'s singleton class, is inherited by the singleton class of subclasses of <code>Animal</code>:</p>\n\n<pre><code>class Swine &lt; Animal\nend\n\nSwine.instance_methods &amp; [:dog, :cat]\n  #=&gt; [:dog, :cat]\nSwine.methods &amp; [:pig]\n  #=&gt; [:pig] \n</code></pre>\n\n<p>We can also define methods on many <em>unique objects</em>. Consider <code>animal</code>, an instance of <code>Animal</code>:</p>\n\n<pre><code>animal.define_singleton_method(:rodent) do |n|\n  \"I'm rodent ##{n}\"\nend\n\nanimal.rodent(3241)\n  #=&gt; \"I'm rodent #3241\"\n</code></pre>\n\n<p><code>animal</code> is the only receiver to which this method will respond:</p>\n\n<pre><code>Animal.new.rodent(55)\n  #=&gt; #NoMethodError (undefined method `rodent' for\n  #     #&lt;Animal:0x00005bfb0c530670&gt;)\n</code></pre>\n\n<p>In fact, we can define methods on every object that has a singleton class, which is most objects:</p>\n\n<pre><code>str = \"cow\"\nstr.define_singleton_method(:greeting) { \"moo\" }\nstr.greeting\n  #=&gt; \"moo\"\n\narr = [1,2]\narr.define_singleton_method(:greeting) { \"I'm an array\" }\narr.greeting\n  #=&gt; \"I'm an array\"\n\nmodule M; end\nM.define_singleton_method(:greeting) { \"I'm a module\" }\nM.greeting\n  #=&gt; \"I'm a module\"\n\npiggy = Animal.method(:pig)\n  #=&gt; #&lt;Method: Animal.pig&gt; \npiggy.define_singleton_method(:greeting) { \n  \"I'm a singleton method\" }\npiggy.greeting\n  #=&gt; \"I'm a singleton method\"\n</code></pre>\n\n<p>We can do this with all Ruby objects that have a singleton class. That comprises all objects except those having <em>immediate values</em> (objects passed by value), which include <code>nil</code>, <code>true</code>, <code>false</code>, Integers, Symbols, and some Floats. In addition, objects that have been frozen (e.g., <code>\"Hi\".freeze</code>) do not have a singleton class.</p>\n\n<p>Suppose now we write</p>\n\n<pre><code>class Animal\n  def Animal.pig(n)\n    \"#{n} little pigs\"\n  end\nend\n</code></pre>\n\n<p>or (same thing)</p>\n\n<pre><code>class Animal\n  def self.pig(n)\n    \"#{n} little pigs\"\n  end\nend\n</code></pre>\n\n<p>(We're finally there!)</p>\n\n<p>What is this new way of defining a method? It is in fact just a shorthand way of defining a method on <code>Animal</code>'s singleton class. Think of it as merely <a href=\"https://medium.com/@Parmaviolet/trick-or-treat-ruby-s-syntactic-sugar-80c9d80a4c4b\" rel=\"nofollow noreferrer\">syntactic sugar</a>. Just as writing <code>2 + 2</code> instructs Ruby to execute <code>2.+(2)</code>, <code>Animal.</code> or <code>self.</code> in the first line of the method definition merely instructs Ruby to execute the following.</p>\n\n<pre><code>class Animal\n  class &lt;&lt; self\n    def pig(n)\n      \"#{n} little pigs\"\n    end\n  end\nend\n</code></pre>\n\n<p>In other words, the creation of class method by writing <code>def Animal.my_method...</code> or <code>def self.my_method...</code> is not needed at all; it is there merely as a convenience for Ruby coders.</p>\n\n<p><sup>1 That line would generally be written <code>class &lt;&lt; self</code>, which is acceptable as <code>self</code> equals <code>Animal</code> when the line is executed. Using <code>&lt;&lt; self</code> is merely a convenience should the class be renamed.</sup></p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1546955062, "creation_date": 1546955062, "answer_id": 54093158, "question_id": 54084613, "link": "https://stackoverflow.com/questions/54084613/how-does-ruby-tell-the-difference-between-instance-method-and-class-method-defin/54093158#54093158", "title": "How does ruby tell the difference between instance method and class method definition?", "body": "<p>First of all, it is important to understand that there is no such thing as <em>class method</em> or a <em>singleton method</em> in Ruby. There is only exactly one kind of methods: instance methods.</p>\n\n<p>The <em>real</em> question is: what <em>module</em> is the method defined in?</p>\n\n<p>[\"Singleton method\" and \"class method\" are simply shorthand names that we use for \"method that is defined in the singleton class\" and \"method that is defined in the singleton class of an object whose class is <code>Class</code>\".]</p>\n\n<p>There are two forms of method definitions in Ruby:</p>\n\n<pre><code>def some_expression.some_name; end\n</code></pre>\n\n<p>and </p>\n\n<pre><code>def some_name; end\n</code></pre>\n\n<p>The first one will first evaluate the expression <code>some_expression</code> and then define a method named <code>some_name</code> inside the <em>singleton class</em> of the resulting object.</p>\n\n<p>The second one will define a method named <code>some_name</code> in what is called the <em>default definee</em>. The default definee is <em>usually</em> the <em>closest lexically enclosing module definition</em>. For example, in this case:</p>\n\n<pre><code>module Foo\n  module Bar\n    def foo\n      def bar; end\n    end\n  end\nend\n\ninclude Foo::Bar\n\nfoo\n# At this point, `bar` will be defined, but where?\n</code></pre>\n\n<p>Here, <code>bar</code> will be defined as an instance method of <code>Foo::Bar</code>, because <code>bar</code> is the closest lexically enclosing module definition. There is another lexical definition that is even closer, namely the method definition of <code>foo</code>, but that is not a module definition.</p>\n\n<p>A little bit more puzzling:</p>\n\n<pre><code>Foo = Class.new do\n  def foo; end\nend\n</code></pre>\n\n<p>This will define <code>foo</code> as an instance method of <code>Foo</code>, even though <em>technically</em> this is not a module definition, it is \"just\" a block. However, that's why I wrote \"usually\" above: some methods can change the default definee, and <code>Class::new</code> is one of those methods (similar to how, e.g. <code>Object#instance_eval</code> changes the value of <code>self</code>).</p>\n\n<p>Another example:</p>\n\n<pre><code>def foo; end\n</code></pre>\n\n<p>In this case, <em>there is no</em> lexically enclosing module definition. At the top-level, the default definee is <code>Object</code> but with a twist: the default visibility is also <code>private</code>.</p>\n\n<p>All of this is explained in greater detail in the brilliant blog post <a href=\"https://blog.yugui.jp/entry/846\" rel=\"nofollow noreferrer\">Three implicit contexts in Ruby</a> by yugui.</p>\n\n<p>Now, the only thing missing is: what does the expression <code>self</code> evaluate to inside a module definition? Well, you can test it out if you want:</p>\n\n<pre><code>class Foo\n  p self\nend\n</code></pre>\n\n<p>The answer is that inside a module definition, <code>self</code> evaluates to the module being defined. (Kind of makes sense, does it?)</p>\n\n<p>Therefore, in </p>\n\n<pre><code>class Foo\n  def self.foo; end\nend\n</code></pre>\n\n<p><code>foo</code> is defined in the singleton class of <code>Foo</code>.</p>\n"}], "owner": {"reputation": 1331, "user_id": 6359753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/73961b0d8661795d0b3f8300b633124c?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Yang", "link": "https://stackoverflow.com/users/6359753/henry-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 54085032, "answer_count": 6, "score": 1, "last_activity_date": 1546975299, "creation_date": 1546915697, "last_edit_date": 1546917822, "question_id": 54084613, "link": "https://stackoverflow.com/questions/54084613/how-does-ruby-tell-the-difference-between-instance-method-and-class-method-defin", "title": "How does ruby tell the difference between instance method and class method definition?", "body": "<p>In normal ruby code, I can normally omit <code>self</code>:</p>\n\n<pre><code>class User\n  def greeting\n    # these 2 are the same:\n    puts \"Hi, #{name}\"\n    puts \"Hi, #{self.name}\"\n  end\nend\n</code></pre>\n\n<p>but why are these 2 different:</p>\n\n<pre><code># 1\nclass User\n  def self.greeting\n    # ...\n  end\nend\n\n# 2\nclass User\n  def greeting\n    # ...\n  end\nend\n</code></pre>\n\n<p>Why can't I just omit the <code>self</code>? What's the difference here to ruby code compiler's perspective?</p>\n\n<p>I know #1 is class method definition (Singleton method definition) and #2 is instance method definition. But how did ruby work with context and self to arrive at this difference in method definition?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "friendly-id"], "comments": [{"owner": {"reputation": 1121, "user_id": 4451733, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9c64bf16791f14a6f7f2b880b938978d?s=128&d=identicon&r=PG&f=1", "display_name": "Crashtor", "link": "https://stackoverflow.com/users/4451733/crashtor"}, "edited": false, "score": 0, "creation_date": 1546918729, "post_id": 54084274, "comment_id": 95002936, "body": "Why is the def set_listing method private?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 1121, "user_id": 4451733, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9c64bf16791f14a6f7f2b880b938978d?s=128&d=identicon&r=PG&f=1", "display_name": "Crashtor", "link": "https://stackoverflow.com/users/4451733/crashtor"}, "edited": false, "score": 0, "creation_date": 1546919421, "post_id": 54084274, "comment_id": 95003052, "body": "For 1, it&#39;s just standard for rails and how a scaffold creates it.  and 2 you just made me look it up and it seems because set_entercontrollernamehere will only ever interact with the said controller itself and no need to be public"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1546931808, "post_id": 54084274, "comment_id": 95006366, "body": "Are you sure, that slug was generated for Listing with id: 1? Did you check it in the console? Try to stop rails server and run <code>spring stop &amp;&amp; rails server</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1121, "user_id": 4451733, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9c64bf16791f14a6f7f2b880b938978d?s=128&d=identicon&r=PG&f=1", "display_name": "Crashtor", "link": "https://stackoverflow.com/users/4451733/crashtor"}, "edited": false, "score": 0, "creation_date": 1546955817, "post_id": 54084274, "comment_id": 95018630, "body": "@Crashtor every method in your controller which is not an action that corresponds to a route (such as callback methods) should be declared private."}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1553060568, "post_id": 54093316, "comment_id": 97240430, "body": "I know it&#39;s been a while but I have revisited this and this still won&#39;t work.  Please explain what you mean because what you have above is everything i tried from stated in my OP.  I tried adding friendly to both the set_listing and to the show, vice versa, with and without. I think the issue because of the <code>@order = @listing.orders.new()</code> situation and not even calling the @listing in the show."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1553066809, "post_id": 54093316, "comment_id": 97242698, "body": "\u201cIt does not work\u201d is not helpful. What is the exact error message?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1553108645, "post_id": 54093316, "comment_id": 97267840, "body": "There is no error messages.  Nothing gets inputted into the friendly_id schema, the route using the slug doesn&#39;t work."}, {"owner": {"reputation": 149, "user_id": 3537071, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/hjb9a.jpg?s=128&g=1", "display_name": "chrisgeeq", "link": "https://stackoverflow.com/users/3537071/chrisgeeq"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1609687863, "post_id": 54093316, "comment_id": 115894796, "body": "@uno are you sure you created a migration for the listing model? <code>rails g migration AddSlugToListings slug:uniq</code> It will be helpful to see the exact error log too."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1546955991, "last_edit_date": 1546955991, "creation_date": 1546955612, "answer_id": 54093316, "question_id": 54084274, "link": "https://stackoverflow.com/questions/54084274/rails-friendly-id-gem-friendly-url-not-working-for-1-model-but-working-for-oth/54093316#54093316", "title": "Rails: Friendly_id gem friendly url not working for 1 model, but working for other(s)?", "body": "<p>FriendlyId does not override the default <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find\" rel=\"nofollow noreferrer\"><code>.find</code></a> method on your model. Well at least not since version 5 was released way back in 2013.</p>\n\n<p>To lookup a record based on the id and slug column you need to explicitly call <code>.friendly.find</code>:</p>\n\n<pre><code>class ListingsController &lt; ApplicationController\n\n  before_action :set_listing, only: [:show, :edit, :update, :destroy]\n\n  # ...\n\n  def show\n    @order = @listing.orders.new()\n  end\n\n  # ...\n\n  private\n\n  def set_listing\n    @listing = Listing.friendly.find(params[:id])\n  end\n\n  # ...\nend\n</code></pre>\n\n<p>The reason you are currently getting an error is most likely that <code>before_action :set_listing</code> calls the <code>set_listing</code> method before the show action is called.</p>\n\n<pre><code>class ListingsController\n  before_action :set_listing, only: [:show, :edit, :update, :destroy]\n\n  def show\n    # this line is never reached - and should not really be needed anyways\n    @listing = Listing.friendly.find(params[:id])\n    @order = @listing.orders.new()\n  end\n\n  private\n\n  def set_listing\n    # will raise ActiveRecord::NotFoundError\n    @listing = Listing.find(params[:id])\n  end\nend\n</code></pre>\n\n<p>Since <code>Listing.find(params[:id])</code> will raise an <code>ActiveRecord::NotFoundError</code> you never reach the show action. The solution is just to fix the callback method in the first place.</p>\n"}, {"tags": [], "owner": {"reputation": 7944, "user_id": 10907864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGpcY.jpg?s=128&g=1", "display_name": "Promise Preston", "link": "https://stackoverflow.com/users/10907864/promise-preston"}, "is_accepted": false, "score": 0, "last_activity_date": 1615153522, "creation_date": 1615153522, "answer_id": 66521767, "question_id": 54084274, "link": "https://stackoverflow.com/questions/54084274/rails-friendly-id-gem-friendly-url-not-working-for-1-model-but-working-for-oth/66521767#66521767", "title": "Rails: Friendly_id gem friendly url not working for 1 model, but working for other(s)?", "body": "<p>I had this same challenge when working on a <strong>Rails 6</strong> application.</p>\n<p><strong>Here's how I solved it</strong>:</p>\n<p>By default <a href=\"https://github.com/norman/friendly_id\" rel=\"nofollow noreferrer\">Friendly_id</a> gem does not generate slugs for existing records in a Rails application. So if you have existing records for a model, slugs won't be generated for them. They will only be generated for newer records.</p>\n<p>To generate slugs for existing records, do the following. Say our model name is <code>Listing</code> and the column we want to use for the slug is <code>name</code>, just do the following:</p>\n<p>Start your rails console using:</p>\n<pre><code>rails console\n</code></pre>\n<p>and run the command below to generate slugs for existing records:</p>\n<pre><code>  Listing.find_each(&amp;:save)\n</code></pre>\n<p>Restart your rails server, and check again. You should see slugs now for all the records.</p>\n<p>That's all.</p>\n<p><strong>I hope this helps</strong></p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1615153544, "creation_date": 1546912286, "last_edit_date": 1615153544, "question_id": 54084274, "link": "https://stackoverflow.com/questions/54084274/rails-friendly-id-gem-friendly-url-not-working-for-1-model-but-working-for-oth", "title": "Rails: Friendly_id gem friendly url not working for 1 model, but working for other(s)?", "body": "<p><strong>Issue</strong>: I have installed the friendly_id gem, it is working how it supposed to for my Users table, but for my Listings model, the friendly URL to use a :name instead of :id isn't working.</p>\n\n<p><strong>Here's my Listings controller in a nutshell</strong>:</p>\n\n<pre><code>    def show\n        @order = @listing.orders.new()\n#as you can see, I have no need for a find because i noticed i didn't need it for the show page to show up correctly - idk\n    end\n\n    private\n\n    def set_listing\n          @listing = Listing.find(params[:id])\n    end\n</code></pre>\n\n<p>What's confusing to me is that I don't even need something like <code>@listing=Listing.find(params[:id]</code></p>\n\n<p><strong>I tried using this in the show</strong>: <code>@listing=Listing.friendly.find(params[:id]</code></p>\n\n<p>but it didn't make a difference.  I also tried changing the \"set_listing\" method to include the friendly snippet but that didn't help either - just a shot even though it shouldn't work.</p>\n\n<p><strong>I included this in the model - just like i did for my Users table</strong>:</p>\n\n<pre><code>extend FriendlyId\n  friendly_id :name, use: :slugged\n</code></pre>\n\n<p>For example, I have my listing, id: 1, name: Listing Test 1, slug: listing-test-1</p>\n\n<p>I go to domain.com/listings/listing-test-1 and I get</p>\n\n<p>Couldn't find Listing with 'id'=listing-test-1</p>\n\n<p>I did everything the same as I did with the Users table but it doesn't seem to work.  </p>\n\n<p><strong>Question</strong>: Is there something can be interfering with this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 100, "user_id": 10463251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff958d5dc3d428d04f1cce2f80433712?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin W.", "link": "https://stackoverflow.com/users/10463251/kevin-w"}, "edited": false, "score": 1, "creation_date": 1546911325, "post_id": 54083645, "comment_id": 95001576, "body": "I wonder if this could just be a timing difference in the two environments rather than an actual difference in locking behavior.  Is any pessimistic locking behavior even triggered without trying to write to the database?"}, {"owner": {"reputation": 441, "user_id": 3275798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5Ypg.jpg?s=128&g=1", "display_name": "cavin kwon", "link": "https://stackoverflow.com/users/3275798/cavin-kwon"}, "reply_to_user": {"reputation": 100, "user_id": 10463251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff958d5dc3d428d04f1cce2f80433712?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin W.", "link": "https://stackoverflow.com/users/10463251/kevin-w"}, "edited": false, "score": 0, "creation_date": 1546915630, "post_id": 54083645, "comment_id": 95002343, "body": "In the rails test, I changed the rails&#39;s use_transactional_fixtures configuration value to false. Then it works well. I do not know the meaning of the use_transactional_fixtures, so I need to learn. Thank you for your comment."}], "owner": {"reputation": 441, "user_id": 3275798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5Ypg.jpg?s=128&g=1", "display_name": "cavin kwon", "link": "https://stackoverflow.com/users/3275798/cavin-kwon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1546906303, "creation_date": 1546906303, "question_id": 54083645, "link": "https://stackoverflow.com/questions/54083645/rails-activerecord-pessimitic-locking-on-reading-different-records", "title": "Rails ActiveRecord pessimitic locking on reading different records", "body": "<p>To get a better understanding of pessimistic locking, I tried to run this code in my Rails application:</p>\n\n<pre><code>Thread.new do\n  geoge_order.with_lock do\n    puts \"[geoge] transaction start\"\n    sleep(1)\n    puts \"[geoge] transaction end\"\n  end\nend\n\nThread.new do\n  amanda_order.with_lock do\n    puts \"[amanda] transaction start\"\n    puts \"[amanda] transaction end\"\n  end\nend\n</code></pre>\n\n<p>I set a pessimistic lock on different order records, so I expected each order to be readable at the same time. And I got what I expected from the Rails console:</p>\n\n<pre><code>[geoge] transaction start\n[amanda] transaction start\n[amanda] transaction end\n[geoge] transaction end\n</code></pre>\n\n<p>However, when executed in the Rails test, a read lock occurs as if a lock were set on the same record : </p>\n\n<pre><code>[geoge] transaction start\n[geoge] transaction end\n[amanda] transaction start\n[amanda] transaction end\n</code></pre>\n\n<p>Why is the result on the rails console different from the result on the rails test? </p>\n\n<ul>\n<li>development environment : Ruby 2.6.0, Ruby on Rails 5.2.2, MySql 14.14, Test : Rspec, MiniTest</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1546906385, "post_id": 54083196, "comment_id": 95000530, "body": "What&#39;s going wrong then? You&#39;ve described what you&#39;ve done, but not what isn&#39;t working. Are you finding JavaScript errors? Server side errors? Do you get any errors at all?"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1546906544, "post_id": 54083196, "comment_id": 95000552, "body": "thanks for the quick reply @philnash I get no errors, when i select a state from the dropdown nothing populates in the cities select tag"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1546906611, "post_id": 54083196, "comment_id": 95000570, "body": "Does your JavaScript <code>change</code> event fire at all?"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1546908466, "post_id": 54083196, "comment_id": 95000944, "body": "yes it fires and shoots this in the console &quot;GET <a href=\"http://localhost:3000/states?country=UnitedStates&amp;state=Arizona\" rel=\"nofollow noreferrer\">localhost:3000/states?country=UnitedStates&amp;state=Arizona</a> 404 (Not Found)&quot;"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1546909330, "post_id": 54083196, "comment_id": 95001138, "body": "Ah, ok so we have a 404. What does <code>rails routes</code> say about where your endpoint to request states is? I see you&#39;re including it as part of the <code>new</code> action in the registrations controller? Is that the best place?"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1546909952, "post_id": 54083196, "comment_id": 95001264, "body": "i ran rails routes and this what i got  &quot;new_state GET    /states/new(.:format)                                                                    states#new&quot;"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1546910031, "post_id": 54083196, "comment_id": 95001284, "body": "i need to collect this info when a user is signing up thats why i have it in the registrations controller new action"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546916892, "post_id": 54084605, "comment_id": 95002587, "body": "I am still getting a 404 error, i think this is happening because of routes, i am very confused"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546916950, "post_id": 54084605, "comment_id": 95002597, "body": "What happens if you make a request directly to <code>&#47;states&#47;new?state=CA</code> (for example)?"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546917490, "post_id": 54084605, "comment_id": 95002702, "body": "ahhhh i got &quot;uninitialized constant StatesController&quot; i think my problem is trying to use this in the devise registrations controller"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546917731, "post_id": 54084605, "comment_id": 95002748, "body": "Right, this goes back to my question earlier about why you have this in the registrations controller. It may be that you need this data for registration, however it would make more sense to just call to a standalone <code>StatesController</code> to get the list of states. I&#39;d create a <code>StatesController</code> and move the action and the <code>.js.erb</code> view into it. I&#39;d probably also use the <code>index</code> action rather than new too."}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546918277, "post_id": 54084605, "comment_id": 95002852, "body": "i think im getting closer, i added  get &#39;states/&#39;, to: &#39;families/registrations#new&#39; to my routes im now getting a 500 error"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546919611, "post_id": 54084605, "comment_id": 95003088, "body": "Woo hoo! What was it?"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546919622, "post_id": 54084605, "comment_id": 95003090, "body": "devise_scope :user do       get &#39;states&#39;, to: &#39;users/registrations#city&#39;    end"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546919659, "post_id": 54084605, "comment_id": 95003101, "body": "Glad you&#39;re all sorted!"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546919973, "post_id": 54084605, "comment_id": 95003162, "body": "spoke to soon ! i got a successful request and im getting the right parameters but i am not recieving anything when this runs in my method CS.get(:us,params[state])"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546922275, "post_id": 54084605, "comment_id": 95003645, "body": "You might need to ensure that you&#39;re passing the state as a symbol. Try <code>CS.get(:us, params[:state].downcase.to_sym)</code>"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546922545, "post_id": 54084605, "comment_id": 95003714, "body": "i was hoping this would work but i got this error undefined method `downcase&#39; for nil:NilClass"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546922642, "post_id": 54084605, "comment_id": 95003746, "body": "Oh, so you&#39;re not receiving anything in the <code>params</code>? What do you get if you log the <code>params</code> object? What is the full URL that your JavaScript is requesting here?"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546922905, "post_id": 54084605, "comment_id": 95003790, "body": "i logged params.inspect and got &quot;&lt;ActionController::Parameters {&quot;state&quot;=&gt;&quot;Colorado&quot;, &quot;controller&quot;=&gt;&quot;families/registrations&quot;, &quot;action&quot;=&gt;&quot;new&quot;} permitted: false&gt; &quot;"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546923486, "post_id": 54084605, "comment_id": 95003920, "body": "In your comment above you wrote <code>CS.get(:us,params[state])</code>. <code>state</code> here is just <code>nil</code> so you are calling <code>params[nil]</code> which is also returning <code>nil</code>. Make sure you have a symbol or string in <code>CS.get(:us, params[&quot;state&quot;])</code>."}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546923940, "post_id": 54084605, "comment_id": 95004008, "body": "i had a symbol  that was just a typo above"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "edited": false, "score": 0, "creation_date": 1546923954, "post_id": 54084605, "comment_id": 95004012, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/186334/discussion-between-philnash-and-kevin-lopez\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": false, "score": 0, "last_activity_date": 1546915648, "creation_date": 1546915648, "answer_id": 54084605, "question_id": 54083196, "link": "https://stackoverflow.com/questions/54083196/using-the-city-state-gem-in-rails/54084605#54084605", "title": "using the city-state gem in rails", "body": "<p>From our discussion in the comments the issue appears to be that you are requesting the wrong URL for your cities.</p>\n\n<p>You have a route at <code>/states/new</code> but are making the request to <code>/states</code>. Try updating your <code>main.js</code> to:</p>\n\n<pre><code> document.addEventListener(\"turbolinks:load\", function(){\n  var state = document.getElementById(\"state-picker\");\n  state.addEventListener(\"change\", function() {\n    Rails.ajax({\n     url: \"/states/new?state=\" + state.value,\n     type: \"GET\"\n    })\n  })\n});\n</code></pre>\n\n<p>(I removed the country parameter in the URL because you don't seem to be using it, you say you only need this for the US anyway.)</p>\n\n<p>Let me know how you get on with that.</p>\n"}], "owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1167, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546915648, "creation_date": 1546902990, "question_id": 54083196, "link": "https://stackoverflow.com/questions/54083196/using-the-city-state-gem-in-rails", "title": "using the city-state gem in rails", "body": "<p>Hey guys im currently working on a devise sign up form, the end goal is  a user can select a state from the united states and a select tag below will populate with the correct cities in that state. im using the city-state gem. <a href=\"https://github.com/loureirorg/city-state\" rel=\"nofollow noreferrer\">https://github.com/loureirorg/city-state</a></p>\n\n<p>ive looked at other examples like this one <a href=\"https://forum.upcase.com/t/dependent-country-city-state/7038\" rel=\"nofollow noreferrer\">https://forum.upcase.com/t/dependent-country-city-state/7038</a> my code is below </p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>resources :states, only: :new \n</code></pre>\n\n<p><strong>registrations.new.html.erb</strong></p>\n\n<pre><code>   &lt;div class=\"field\"&gt;\n        &lt;%= f.select :state, options_for_select(CS.states(:us)), {:prompt =&gt; \"State\"}, {:class =&gt; \"signup-input-container--input\", :id =&gt; \"state-picker\"} %&gt;\n   &lt;/div&gt;\n   &lt;div class=\"field\"&gt;\n        &lt;%= f.select :city, options_for_select([]),{}, {:class =&gt; \"signup-input-container--input\", :id =&gt; \"city-picker\"} %&gt;\n   &lt;/div&gt;\n</code></pre>\n\n<p><strong>main.js</strong></p>\n\n<pre><code> document.addEventListener(\"turbolinks:load\", function(){\n  var state = document.getElementById(\"state-picker\");\n  state.addEventListener(\"change\", function() {\n    Rails.ajax({\n     url: \"/states?country=\" + \"United States\" + \"&amp;state=\" + \n     state.value,\n     type: \"GET\"\n    })\n  })\n});\n</code></pre>\n\n<p><strong>registrations-controller.erb</strong></p>\n\n<pre><code> def new\n  super\n  @cities = CS.get(:us, params[:state])\n end\n</code></pre>\n\n<p><strong>new.js.erb</strong></p>\n\n<pre><code>    var city = document.getElementById(\"city-picker\");\n\n    while (city.firstChild) city.removeChild(city.firstChild);\n\n    var placeholder = document.createElement(\"option\");\n    placeholder.text = \"Choose a city\";\n    placeholder.value = \"\";\n    city.appendChild(placeholder);\n\n   &lt;% @cities.each do |c| %&gt;\n     city.options[city.options.length] = new Option('&lt;%= c %&gt;');\n   &lt;% end %&gt;  \n</code></pre>\n\n<p>im trying to get this to work the way the example link shows. the only difference is that users will only choose states from the US and citys</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1546902652, "post_id": 54083124, "comment_id": 94999668, "body": "Could you paste rspec output with the failure message?"}, {"owner": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1546902981, "post_id": 54083124, "comment_id": 94999756, "body": "1) Array#my_each yields each element to the block      Failure/Error: expect do |block|        expected given block to yield successively with arguments, but yielded with unexpected arguments        expected: [&quot;el1&quot;, &quot;el2&quot;]             got: [[&quot;el1&quot;, &quot;el2&quot;]]      # ./spec/03_iteration_spec.rb:106:in `block (3 levels) in &lt;top (required)&gt;&#39;"}, {"owner": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1546902992, "post_id": 54083124, "comment_id": 94999762, "body": "Not sure how to do the formatting for comments : /"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "edited": false, "score": 0, "creation_date": 1546912897, "post_id": 54083268, "comment_id": 95001884, "body": "Damn, the way you explained it makes perfect sense. I guess it&#39;s just a matter of wrapping my mind around using procs in that fashion.. just weird for me to conceptualize since it adds a new dimension to it. I still don&#39;t really understand what the benefit of using blocks/procs are but I&#39;m sure I&#39;ll get there. Thanks for your explanation!"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 3, "last_activity_date": 1546904312, "last_edit_date": 1546904312, "creation_date": 1546903458, "answer_id": 54083268, "question_id": 54083124, "link": "https://stackoverflow.com/questions/54083124/block-proc-returning-array-within-an-array-explanation/54083268#54083268", "title": "Block/Proc Returning Array within an Array Explanation", "body": "<p>In the first part of your condition, you pass the whole array to the block:</p>\n\n<pre><code>if block_given?\n  proc.call(self)\nelse\n# ...\n</code></pre>\n\n<p>E.g. for an array of <code>[\"el1\", \"el2\"]</code> you do <code>proc.call([\"el1\", \"el2\"])</code>. What you expect in the test are two consecutive calls:</p>\n\n<pre><code>proc.call(\"el1\")\nproc.call(\"el2\")\n</code></pre>\n\n<p>To do that you need to use a loop also in the first part of the condition and pass there an array element, not the whole array:</p>\n\n<pre><code>if block_given?\n  for i in (0..self.length-1)\n     proc.call(self[i])\n  end\nelse\n  for i in (0..self.length-1)\n    puts self[i]\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1546955457, "post_id": 54083371, "comment_id": 95018413, "body": "<code>for</code> is simply syntactic sugar for <code>each</code>. This sounds like an assignment to <i>re-implement</i> <code>each</code>, not simply wrap it. Otherwise, you could even more simply write <code>def my_each(&amp;blk) each(&amp;blk) end</code> or even just <code>alias_method :my_each, :each</code>"}, {"owner": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "edited": false, "score": 0, "creation_date": 1546974955, "post_id": 54083371, "comment_id": 95029324, "body": "Yeah, J&#246;rg is right, this exercise was meant to re-implement a carbon copy of the &quot;each&quot; method. Sorry if that was unclear! J&#246;rg can you explain what you mean when you say &quot;wrapping it&quot;? One of our expectations for this exercise was not to use the &quot;each&quot; method in creating this (RSPEC #3), is that what you had (not) meant by that?"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1546904225, "creation_date": 1546904225, "answer_id": 54083371, "question_id": 54083124, "link": "https://stackoverflow.com/questions/54083124/block-proc-returning-array-within-an-array-explanation/54083371#54083371", "title": "Block/Proc Returning Array within an Array Explanation", "body": "<pre><code>  proc.call(self)\n</code></pre>\n\n<p>is the culprit. <code>self</code> is the whole array.</p>\n\n<p>Extend the Array class to include a method named my_each</p>\n\n<pre><code>class Array\n  def my_each\n  end\nend\n</code></pre>\n\n<p>that takes a block, </p>\n\n<pre><code>#every method in ruby accepts a block, it is just ignored when not used (yielded to). Do nothing.\n</code></pre>\n\n<p>calls the block on every element of the array,</p>\n\n<pre><code>class Array\n  def my_each\n    for element in self\n      yield element\n    end\n  end\nend\n</code></pre>\n\n<p>and then returns the original array.</p>\n\n<pre><code># \"for\" loops do this. Do nothing. It should pass.\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 1832897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f6f5aa662b2a12981cf0836693e634?s=128&d=identicon&r=PG", "display_name": "user1832897", "link": "https://stackoverflow.com/users/1832897/user1832897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 54083268, "answer_count": 2, "score": 0, "last_activity_date": 1546904312, "creation_date": 1546902399, "question_id": 54083124, "link": "https://stackoverflow.com/questions/54083124/block-proc-returning-array-within-an-array-explanation", "title": "Block/Proc Returning Array within an Array Explanation", "body": "<p>The prompt: \nExtend the Array class to include a method named <code>my_each</code> that takes a block, calls the block on every element of the array, and then returns the original array. </p>\n\n<pre><code>class Array\n  def my_each(&amp;prc)\n    if block_given?\n      proc.call(self)\n    else\n      for i in (0..self.length-1)\n        puts self[i]\n      end\n    end\n    self\n  end\nend\n</code></pre>\n\n<p>This is what I put together and I don't have a good understanding of how Blocks/Procs work within this context, but somehow I magically wrote the code that passed 3 of the 4 RSPEC tests. </p>\n\n<pre><code>  describe \"#my_each\" do\n    it \"calls the block passed to it\" do\n      expect do |block|\n        [\"test array\"].my_each(&amp;block)\n      end.to yield_control.once\n    end\n\n    it \"yields each element to the block\" do\n      expect do |block|\n        [\"el1\", \"el2\"].my_each(&amp;block)\n      end.to yield_successive_args(\"el1\", \"el2\")\n    end\n\n    it \"does NOT call the built-in #each method\" do\n      original_array = [\"original array\"]\n      expect(original_array).not_to receive(:each)\n      original_array.my_each {}\n    end\n\n    it \"is chainable and returns the original array\" do\n      original_array = [\"original array\"]\n      expect(original_array.my_each {}).to eq(original_array)\n    end\n  end\n</code></pre>\n\n<p>All of the above RSPEC tests passes with the exception of the second one, where my code returns [[\"el1\", \"el2\"]] when [\"el1\", \"el2\"] is expected. Can someone please give me an explanation of how or why I am receiving a nested array here? </p>\n\n<p>Can someone also give me an explanation of how the code is running as a block is passing through this method? I'm not sure if my \"else\" condition is actually even necessary in the context of the RSPEC tests. I'm generally confused by the concept of passing blocks through self-written methods and how they interact with the method itself.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 3, "creation_date": 1546902658, "post_id": 54082676, "comment_id": 94999672, "body": "What have you tried? or at least explain a little more what you already have (since you say you don&#39;t want to use the new and edit views you must have thought another action name, and maybe something on the controller and a start of the form)."}, {"owner": {"reputation": 2290, "user_id": 212019, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/df9bc83db354c9367ed89d1965a7abcb?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Sayer", "link": "https://stackoverflow.com/users/212019/grant-sayer"}, "edited": false, "score": 1, "creation_date": 1546920450, "post_id": 54082676, "comment_id": 95003243, "body": "Maybe if you can update your question with the model code showing the relationships that may help give some more information on the solving the problem.  Can you also indicate how you are wanting to have in the user interface in order to get the correct relations setup."}], "owner": {"reputation": 23, "user_id": 10881400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7921ea5d5abfe4e23e75e3c1a1333b6?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo Barroeta", "link": "https://stackoverflow.com/users/10881400/leonardo-barroeta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546908062, "creation_date": 1546899531, "last_edit_date": 1546908062, "question_id": 54082676, "link": "https://stackoverflow.com/questions/54082676/has-many-through-rails-5", "title": "Has_many through - Rails 5", "body": "<p>I\u2019m a rails newbie here and have this issue.</p>\n\n<p>I have 3 models: <code>Group</code>, <code>User</code>, <code>Subject</code>, between <code>Group</code> and <code>Subject</code> I have a <code>has_many</code> through relation called <code>GroupSubjects</code> it works fine, the next is <code>GroupUsers</code> with a <code>has_many</code> through relation and works fine too, as new at this (like 1 mint learning rails) I want to assign a subject, with another view, not the new or edit templates, and with this view, and make the relation between <code>Groups</code> and <code>Subjects</code>, I want to save the <code>user_id</code>, <code>group_id</code>, and <code>due date</code>, in the <code>GroupSubjects</code> table. </p>\n\n<p>I really need help, this has been a problem for at least 3 days.</p>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "authorization", "pundit"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1546963295, "post_id": 54082313, "comment_id": 95023340, "body": "Pretty much everything Pundit can do CanCanCan can also do and vice versa. The main difference is just that CanCanCan is built as a DSL and Pundit just uses OOP. CanCanCan is more approachable but tends to turn into a tangled mess when you need to handle more complex cases and the whole idea of jamming all your authorization logic into a single Ability class is not very good when comes to maintenance."}], "answers": [{"comments": [{"owner": {"reputation": 644, "user_id": 4404135, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8YXJfV2PyP8/AAAAAAAAAAI/AAAAAAAACIo/TqTVDxE-iAo/photo.jpg?sz=128", "display_name": "tgmerritt", "link": "https://stackoverflow.com/users/4404135/tgmerritt"}, "edited": false, "score": 1, "creation_date": 1546899320, "post_id": 54082339, "comment_id": 94998683, "body": "To add to this, next your users will likely want to manage multiple companies - so you could take the above and change the scope to a range like this <code>can :manage, Project, group: { id: user.group_ids }</code> <a href=\"https://github.com/CanCanCommunity/cancancan/wiki/Defining-Abilities\" rel=\"nofollow noreferrer\">github.com/CanCanCommunity/cancancan/wiki/Defining-Abilities</a>"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1546897639, "creation_date": 1546897639, "answer_id": 54082339, "question_id": 54082313, "link": "https://stackoverflow.com/questions/54082313/company-specific-user-permissions-in-a-rails-application/54082339#54082339", "title": "Company-specific user permissions in a rails application", "body": "<p>Yes it's possible with CanCanCan. You can scope your permissions to specific <code>company_id</code>. Assuming that <code>Admin</code> model has <code>company_id</code>, you can write:</p>\n\n<pre><code>can :manage, Company, :id =&gt; admin.company_id\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10807830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/718a0a629c403b87c375fb61712afc73?s=128&d=identicon&r=PG&f=1", "display_name": "pixelcandy", "link": "https://stackoverflow.com/users/10807830/pixelcandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546897639, "creation_date": 1546897468, "question_id": 54082313, "link": "https://stackoverflow.com/questions/54082313/company-specific-user-permissions-in-a-rails-application", "title": "Company-specific user permissions in a rails application", "body": "<p>My application uses Devise for authentication, CanCanCan for authorization, and RailsAdmin for admin. Currently there are users who are considered \"admins\" and they can access anything in the application, and there are a couple other types of users who are basically flavors of admins with slightly fewer privileges, all defined in the Ability.rb file. </p>\n\n<p>However, now I need to implement company-level permissions for users. Right now admins have access to <em>any</em> company in the application. Going forward, I need to add the ability for an owner of a company to add/invite a user to their company and give them certain permissions. That user can also potentially belong to other companies in the application with <em>different</em> permissions. </p>\n\n<p>Is this something CanCanCan \"can\" do? Or is this a job for Pundit? Something else entirely? </p>\n\n<p>All of the tutorials and documentation I see online for CCC and Pundit involve application-wide permissions. But I need more granular control.</p>\n\n<p>For example, my application has hundreds of companies. Each company has a user who is an \"owner\" and they login each day to look at their earnings information. That owner/user wants to invite Joe Smith to the application so they can also look at the data and make changes. But they don't want Joe Smith to be able to see certain types of data. So we restrict Joe Smith's access to certain data for that company.</p>\n\n<p>This is separate entirely from what I currently use CanCanCan for, which is to set access rights for admins so an admin user can see ANY company's information and make changes globally. </p>\n\n<p>I am curious to know if anyone has encountered this issue before and what they may have used to solve it. I greatly appreciate any advice/wisdom! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 1, "creation_date": 1546898557, "post_id": 54082173, "comment_id": 94998430, "body": "try changing <code>@post</code> to <code>post</code> in your form. From <code>simple_form_for(@post,...</code> to <code>simple_form_for(post,...</code>"}, {"owner": {"reputation": 498, "user_id": 10384879, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HTxyDEG1Qo/AAAAAAAAAAI/AAAAAAAAAeQ/9iMyCvOw2A4/photo.jpg?sz=128", "display_name": "giri dharan", "link": "https://stackoverflow.com/users/10384879/giri-dharan"}, "edited": false, "score": 0, "creation_date": 1546914203, "post_id": 54082173, "comment_id": 95002137, "body": "I need your folder structure"}, {"owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "edited": false, "score": 0, "creation_date": 1546914349, "post_id": 54082173, "comment_id": 95002161, "body": "Changing my code structure now. I will update soon."}], "answers": [{"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1547113446, "post_id": 54092137, "comment_id": 95082964, "body": "Did this help at all @ColePhiper?"}, {"owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "edited": false, "score": 0, "creation_date": 1547174425, "post_id": 54092137, "comment_id": 95110807, "body": "Sorry, I\u2019m unable to find the ID. Even though the form itself loads"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "edited": false, "score": 0, "creation_date": 1547197945, "post_id": 54092137, "comment_id": 95117887, "body": "Ah - think I&#39;ve got it @ColePhiper. I&#39;ve updated my answer with this - doesn&#39;t look like you were passing the ID to the url, presumably causing <code>@post = PostApplication.find(params[:id])</code> to fail? Please see my updated answer with a solution :)"}, {"owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "edited": false, "score": 0, "creation_date": 1547230660, "post_id": 54092137, "comment_id": 95135038, "body": "It began to work after I removed the local variable from the flash alert! Thanks"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "edited": false, "score": 0, "creation_date": 1547462304, "post_id": 54092137, "comment_id": 95188003, "body": "Great, glad to hear it @ColePhiper. If you&#39;re happy with the answer, please hit the tick to accept this, over on the left hand side :)"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 1, "last_activity_date": 1547197900, "last_edit_date": 1547197900, "creation_date": 1546951687, "answer_id": 54092137, "question_id": 54082173, "link": "https://stackoverflow.com/questions/54082173/how-can-i-render-a-partial-form-in-the-index-action-to-update-boolean-values-for/54092137#54092137", "title": "How can I render a partial form in the index action to update boolean values for records? Rails 5", "body": "<p>You can pass the variable directly to <code>render</code>, as per <a href=\"https://api.rubyonrails.org/classes/ActionView/PartialRenderer.html#class-ActionView::PartialRenderer-label-Rendering+the+default+case\" rel=\"nofollow noreferrer\">here</a>. In your case:</p>\n\n<pre><code>&lt;%= render 'applicant_status_update_form', post: post %&gt;\n</code></pre>\n\n<p>The following are <a href=\"https://api.rubyonrails.org/classes/ActionView/PartialRenderer.html#class-ActionView::PartialRenderer-label-The+-3Aas+and+-3Aobject+options\" rel=\"nofollow noreferrer\">also available</a>:</p>\n\n<pre><code>&lt;%= render 'applicant_status_update_form', object: post, as: 'post' %&gt;\n&lt;%= render 'applicant_status_update_form', locals: { post: post } %&gt;\n</code></pre>\n\n<p>All result in the same thing: making a <code>post</code> local variable available to your partial.</p>\n\n<p>From there, you'll need to switch <code>@post</code> to <code>post</code> in your partial, and everything should display as desired.</p>\n\n<p>Hope that helps - let me know how you get on.</p>\n\n<hr>\n\n<p><strong>Update based on your comment</strong></p>\n\n<p>If you're not finding the post by ID in your update action, I think I've seen the issue: you pass the url <code>admin_applicant_update_application_status_path</code> to the form without an ID. </p>\n\n<p>For a quick fix, you can use:</p>\n\n<pre><code>&lt;%= simple_form_for(post, :url =&gt; admin_applicant_update_application_status_path(id: post.id), :method =&gt; :post) do |f| %&gt;\n</code></pre>\n\n<p>Better will be to update your routes to take an ID in the <code>update_application_status</code> path. So, switch your <code>routes.rb</code> to use:</p>\n\n<pre><code>resources :admin_applicants, :only =&gt; [:index] do\n  post 'update_application_status/:id'\nend\n</code></pre>\n\n<p>And then your form to:</p>\n\n<pre><code>&lt;%= simple_form_for(post, :url =&gt; admin_applicant_update_application_status_path(post.id), :method =&gt; :post) do |f| %&gt;\n</code></pre>\n\n<p><a href=\"https://guides.rubyonrails.org/routing.html#non-resourceful-routes\" rel=\"nofollow noreferrer\">This section</a> of the docs covers the above, if you're interested in having a read.</p>\n\n<p>Hope that does it for ya!</p>\n"}], "owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547197900, "creation_date": 1546896625, "question_id": 54082173, "link": "https://stackoverflow.com/questions/54082173/how-can-i-render-a-partial-form-in-the-index-action-to-update-boolean-values-for", "title": "How can I render a partial form in the index action to update boolean values for records? Rails 5", "body": "<p>I'm trying to render a partial form inside of an each do block, to update its boolean and enum values. I cannot seem to pass the id for the record to the form itself. Its failing to recognize the form object.</p>\n\n<p>I'm using Rails 5.2 and latest Simple_Form. I rendered a partial in a bs 4 dropdown menu, which would only expose the boolean and enumerator attributes for the object.</p>\n\n<p>index.html.erb</p>\n\n<pre><code>&lt;% @posts.each.with_index(1) do |post, index| %&gt;\n  &lt;div class=\"card bg-light mb-3 posts-card-border-reset\" style=\"max-width: 20rem;\"&gt;\n  &lt;div class=\"card-header post-card-header\"&gt;&lt;span class=\"badge badge-purple\"&gt;App&lt;/span&gt; #&lt;%= index %&gt;\n  &lt;div class=\"dropdown dropleft\" style=\"float: right;\"&gt;\n    &lt;button class=\"bttn-material-circle bttn-sm bttn-default\" id=\"dropdown_post_1\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"&gt;\n      &lt;i class=\"fas fa-align-justify caret-color\"&gt;&lt;/i&gt;\n    &lt;/button&gt;\n    &lt;div class=\"dropdown-menu post-sub-menu-dropdown\" aria-labelledby=\"dropdown_post_1\"&gt;\n          &lt;%= render 'applicant_status_update_form', local: post %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"card-body\"&gt;\n  &lt;h5 class=\"card-title\"&gt;\n    &lt;i class=\"fas fa-user-tie\"&gt;&lt;/i&gt; &lt;%= post.user_first_name + \" \" + post.user_last_name %&gt;\n  &lt;/h5&gt;\n  &lt;p class=\"card-text\"&gt;&lt;i class=\"fas fa-at\"&gt;&lt;/i&gt; &lt;%= post.user.email %&gt;&lt;/p&gt;\n  &lt;/p&gt;\n\n  &lt;div class=\"post-card-divider\"&gt;&lt;/div&gt;\n  &lt;small class=\"text-muted\"&gt;\n    &lt;i class=\"far fa-clock\"&gt;&lt;/i&gt; &lt;%= post.created_at.strftime('%l:%M %p %m/%d/%Y') %&gt;&lt;/small&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>form</p>\n\n<pre><code>&lt;%= simple_form_for(@post, :url =&gt; admin_applicant_update_application_status_path, :method =&gt; :post) do |f| %&gt;\n &lt;div class=\"dropdown-item\"&gt;\n&lt;span class=\"dropdown-header\"&gt;&lt;%= f.input :is_post_reviewed, as: :boolean, boolean_style: :inline %&gt; &lt;small&gt;Mark As Reviewed&lt;/small&gt;&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;div class=\"dropdown-divider\"&gt;&lt;/div&gt;\n  &lt;div class=\"dropdown-item\"&gt;\n    &lt;ul class=\"list-group\"&gt;\n       &lt;li&gt;&lt;p class=\"font-weight-bold\"&gt;Application Status&lt;/p&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;div class=\"dropdown-item\"&gt;\n    &lt;span&gt;&lt;%= f.input :status, as: :radio_buttons %&gt;&lt;/span&gt;\n  &lt;/div&gt;\n  &lt;div class=\"dropdown-item\"&gt;\n    &lt;%= f.button :submit, \"Update Status\", class: 'bttn-simple bttn-md bttn-royal' %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>post_application.rb</p>\n\n<pre><code>class PostApplication &lt; ApplicationRecord\n  include Friendlyable\n  belongs_to :user\n\n  enum status: { pending: 'pending', accepted: 'accepted', denied: 'denied' }, _prefix: :status\nend\n</code></pre>\n\n<p>admin_applicants_controller</p>\n\n<pre><code>class AdminApplicantsController &lt; ApplicationController\n  before_action :authenticate_admin!\n\n  def index\n@posts = Kaminari.paginate_array(current_admin.posts.collect(&amp;:post_applications).flatten).page(params[:page]).per(15)\n  end\n\n  def update_application_status\n    @post = PostApplication.find(params[:id])\npermitted_columns = params.require(:post).permit(:is_application_reviewed, :status)\n    if @post.update_attributes(permitted_columns)\n      flash[:success] = \"#{@post.first_name}'s Application Status Updated!\"\n      redirect_to admin_applicants_path\n    else\n      flash[:danger] = \"#{@post.first_name}'s failed to update! Try again\"\n      redirect_to admin_applicants_path\n    end\n  end\nend\n</code></pre>\n\n<p>routes</p>\n\n<pre><code>  resources :admin_applicants, :only =&gt; [:index] do\n    post :update_application_status\n  end\n</code></pre>\n\n<p>The boolean/enum attributes should be changeable and the form should post with the updates applied.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 61, "user_id": 10383934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R9uYYKiU_Vc/AAAAAAAAAAI/AAAAAAAACSs/c-jYJYL8nEE/photo.jpg?sz=128", "display_name": "Nas Ah", "link": "https://stackoverflow.com/users/10383934/nas-ah"}, "edited": false, "score": 0, "creation_date": 1546895185, "post_id": 54081654, "comment_id": 94997047, "body": "the first one is part of the method name <code>zero?</code>, the latter is part of the syntax for ternary operator."}, {"owner": {"reputation": 61, "user_id": 10383934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R9uYYKiU_Vc/AAAAAAAAAAI/AAAAAAAACSs/c-jYJYL8nEE/photo.jpg?sz=128", "display_name": "Nas Ah", "link": "https://stackoverflow.com/users/10383934/nas-ah"}, "edited": false, "score": 0, "creation_date": 1546895667, "post_id": 54081654, "comment_id": 94997254, "body": "Thanks a lot i knew ternary but newer heard of method .zero? ,  i am new to programming, one last question what if we have two name strings and want the same way one random string from each name. for example     name1 = &quot;jordan&quot;  name2 = &quot;Ursus&quot;  and i want random output out of 4 combination. #1- upcase jordan    #2- downcase jordan   #3-upcase ursus   #4 downcase Ursus"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1546895863, "post_id": 54081654, "comment_id": 94997342, "body": "Good answer, but I think it would be strengthened by limiting it to #2."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 61, "user_id": 10383934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R9uYYKiU_Vc/AAAAAAAAAAI/AAAAAAAACSs/c-jYJYL8nEE/photo.jpg?sz=128", "display_name": "Nas Ah", "link": "https://stackoverflow.com/users/10383934/nas-ah"}, "edited": false, "score": 0, "creation_date": 1546895919, "post_id": 54081654, "comment_id": 94997370, "body": "@NasAh I provided a solution for your last comment"}, {"owner": {"reputation": 61, "user_id": 10383934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R9uYYKiU_Vc/AAAAAAAAAAI/AAAAAAAACSs/c-jYJYL8nEE/photo.jpg?sz=128", "display_name": "Nas Ah", "link": "https://stackoverflow.com/users/10383934/nas-ah"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546895995, "post_id": 54081654, "comment_id": 94997416, "body": "@CarySwoveland can you please explain a bit, which one would you prefer, what do you mean by #2"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546896185, "post_id": 54081654, "comment_id": 94997500, "body": "Sorry, I&#39;d like to see only wheat, no chaff. My preference would be to limit it to <code>def random_case(*names)</code> with <code>public_send</code> in the body, but hey, that&#39;s just me. I&#39;ll delete my comments after the dust settles."}, {"owner": {"reputation": 61, "user_id": 10383934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R9uYYKiU_Vc/AAAAAAAAAAI/AAAAAAAACSs/c-jYJYL8nEE/photo.jpg?sz=128", "display_name": "Nas Ah", "link": "https://stackoverflow.com/users/10383934/nas-ah"}, "edited": false, "score": 0, "creation_date": 1546896529, "post_id": 54081654, "comment_id": 94997614, "body": "@Ursus one small issue with your last code as it is returning both names together randomly i only want one random name out of those two either uppercase or lower case at a time. Any help please"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1546896628, "post_id": 54081654, "comment_id": 94997644, "body": "<code>names.sample.public_send([:upcase, :downcase].sample)</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1546896703, "post_id": 54081654, "comment_id": 94997676, "body": "The second form with <code>[:upcase, :downcase].sample</code> is great, but it&#39;d be better if you created a constant for that array to avoid re-creating it each time this method is run."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1546897007, "post_id": 54081654, "comment_id": 94997799, "body": "Yes @tadman. That&#39;s the way I&#39;d do it. But there is not context here. I hope the user can change it in his own code."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546897052, "post_id": 54081654, "comment_id": 94997818, "body": "Nas, do you mean the array will always contain two names and you want to randomly chose one to upcase and then downcase the other? Regardless, you need to edit the question to clarify it."}, {"owner": {"reputation": 61, "user_id": 10383934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R9uYYKiU_Vc/AAAAAAAAAAI/AAAAAAAACSs/c-jYJYL8nEE/photo.jpg?sz=128", "display_name": "Nas Ah", "link": "https://stackoverflow.com/users/10383934/nas-ah"}, "edited": false, "score": 0, "creation_date": 1546899333, "post_id": 54081654, "comment_id": 94998688, "body": "Array will contain two names, lets say [&quot;Cary&quot;, &quot;Ursus&quot;]  and the ouput i want would be randomly one of these 4 outcomes.  1- My name is CARY or My name is cary or My name is URSUS or My name is ursus."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1546899624, "post_id": 54081654, "comment_id": 94998791, "body": "I added that now"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1546907337, "post_id": 54081654, "comment_id": 95000706, "body": "Nas, OK, but you need to edit your question and add that. It&#39;s fundamental to the question yet not all readers read all comments. Note that choosing one of those four outcomes randomly is equivalent to randomly upcasing or downcasing each of the two words."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 7, "last_activity_date": 1546899616, "last_edit_date": 1546899616, "creation_date": 1546894094, "answer_id": 54081654, "question_id": 54081613, "link": "https://stackoverflow.com/questions/54081613/how-to-return-random-upcase-and-downcase-strings-from-a-lowercase-strings-array/54081654#54081654", "title": "how to return random upcase and downcase strings from a lowercase strings array", "body": "<p>What about this one? 0 for upcase, 1 for downcase</p>\n\n<pre><code>def random_case(name)\n  rand(2).zero? ? name.upcase : name.downcase\nend\n</code></pre>\n\n<p><code>rand(2)</code> returns <code>0</code> or <code>1</code>.</p>\n\n<p>If you want to take methods randomly from an array</p>\n\n<pre><code>def random_case(name)\n  name.public_send([:upcase, :downcase].sample)\nend\n</code></pre>\n\n<p>Multiple names as requested in comments</p>\n\n<pre><code>def random_case(*names)\n  names.map { |name| rand(2).zero? ? name.upcase : name.downcase }\nend\n</code></pre>\n\n<p>You can call this last one with</p>\n\n<pre><code>random_case(\"Ursus\", \"Cary\")\n</code></pre>\n\n<p>Last request in comments</p>\n\n<pre><code>def random_case(*names)\n  names.sample.public_send([:upcase, :downcase].sample)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1546918669, "creation_date": 1546918669, "answer_id": 54084895, "question_id": 54081613, "link": "https://stackoverflow.com/questions/54081613/how-to-return-random-upcase-and-downcase-strings-from-a-lowercase-strings-array/54084895#54084895", "title": "how to return random upcase and downcase strings from a lowercase strings array", "body": "<p>Just to have another option:</p>\n\n<pre><code>def random_case(*names)\n  name = names.sample.downcase\n  [true, false].sample ? name.upcase : name\nend\n</code></pre>\n\n<p>So</p>\n\n<pre><code>10.times do\n  p random_case('Kirk', 'Spock')\nend\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10383934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-R9uYYKiU_Vc/AAAAAAAAAAI/AAAAAAAACSs/c-jYJYL8nEE/photo.jpg?sz=128", "display_name": "Nas Ah", "link": "https://stackoverflow.com/users/10383934/nas-ah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1546961059, "creation_date": 1546893901, "last_edit_date": 1546961059, "question_id": 54081613, "link": "https://stackoverflow.com/questions/54081613/how-to-return-random-upcase-and-downcase-strings-from-a-lowercase-strings-array", "title": "how to return random upcase and downcase strings from a lowercase strings array", "body": "<p>Is there an efficient way to return a string either in uppercase or in lowercase randomly? I don't want to use <code>upcase</code> or <code>downcase</code> inside an array as follows. Also Array will contain two names, lets say [\"Cary\", \"Ursus\"] and the ouput i want would be randomly one of these 4 outcomes. 1- My name is CARY or My name is cary or My name is URSUS or My name is ursus.</p>\n\n<pre><code>def random_case(name)\n  name = [\"jordan\".upcase, \"jordan\".downcase]\n  name.sample\nend\n\nputs \"My name is #{random_case(name)}\"\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 1, "creation_date": 1546889330, "post_id": 54080519, "comment_id": 94994614, "body": "Yes, where did you get stuck?"}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 1, "creation_date": 1546889913, "post_id": 54080519, "comment_id": 94994868, "body": "For Twitter-style hashtags see the official twitter-text library also available in ruby <a href=\"https://github.com/twitter/twitter-text/tree/master/rb\" rel=\"nofollow noreferrer\">github.com/twitter/twitter-text/tree/master/rb</a> and reference <a href=\"https://stackoverflow.com/a/36902556/8291949\">stackoverflow.com/a/36902556/8291949</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7003, "user_id": 435682, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/71269686e0f757ddb4f73614f43ae445?s=128&d=identicon&r=PG", "display_name": "installero", "link": "https://stackoverflow.com/users/435682/installero"}, "is_accepted": true, "score": 5, "last_activity_date": 1546959577, "last_edit_date": 1546959577, "creation_date": 1546894315, "answer_id": 54081705, "question_id": 54080519, "link": "https://stackoverflow.com/questions/54080519/regular-expression-to-match-hashtags-in-both-english-and-chinese/54081705#54081705", "title": "Regular expression to match hashtags in both English and Chinese", "body": "<pre><code>string = \"\u6211\u6765\u81ea#\u4e2d\u56fd#\u3002 I'm from #China.\"        \nstring.scan(/#\\w+|#\\p{Han}+#/)\n=&gt; [\"#\u4e2d\u56fd#\", \"#China\"]\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7294579, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UTC5_Mci8yw/AAAAAAAAAAI/AAAAAAAAAAs/uaJfE77tYls/photo.jpg?sz=128", "display_name": "Fei Qu", "link": "https://stackoverflow.com/users/7294579/fei-qu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 54081705, "answer_count": 1, "score": 0, "last_activity_date": 1546959577, "creation_date": 1546888878, "last_edit_date": 1546928206, "question_id": 54080519, "link": "https://stackoverflow.com/questions/54080519/regular-expression-to-match-hashtags-in-both-english-and-chinese", "title": "Regular expression to match hashtags in both English and Chinese", "body": "<p>I'm trying to write a regex to extract hashtag content in both English and Chinese. Hashtags in Chinese are indicated differently from hashtags in English. Two hashtag symbols are used, and the content is put right in between them, such as <code>#\u4e2d\u56fd#</code>. Also, spaces are not used in Chinese. An example is</p>\n\n<pre><code>\u6211\u6765\u81ea#\u4e2d\u56fd#\u3002\n</code></pre>\n\n<p>The corresponding sentence in English is</p>\n\n<pre><code>I'm from #China.\n</code></pre>\n\n<p>Is it possible to write a single regex to extract hashtags in these two languages? If so, how?</p>\n"}, {"tags": ["ruby", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1546889867, "creation_date": 1546889867, "answer_id": 54080722, "question_id": 54080313, "link": "https://stackoverflow.com/questions/54080313/why-is-bundler-a-dependency-but-not-a-spec-in-gemfile-lock/54080722#54080722", "title": "Why is bundler a dependency but not a spec in Gemfile.lock?", "body": "<blockquote>\n  <p>If any of the needed gems are already installed, Bundler will use them. After installing any needed gems to your system, bundler writes a snapshot of all of the gems and versions that it installed to Gemfile.lock</p>\n</blockquote>\n\n<p><a href=\"https://bundler.io/rationale.html\" rel=\"nofollow noreferrer\">https://bundler.io/rationale.html</a></p>\n\n<p>It's <code>bundler</code> that creates <code>Gemfile.lock</code> and it's a list of all dependencies that are installed by <code>bunler</code>. As <code>bundler</code> does not install itself, it's not included. It makes it a special gem - the one that needs to be installed to bootstrap a ruby app.</p>\n"}], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 54080722, "answer_count": 1, "score": 1, "last_activity_date": 1546889867, "creation_date": 1546887925, "question_id": 54080313, "link": "https://stackoverflow.com/questions/54080313/why-is-bundler-a-dependency-but-not-a-spec-in-gemfile-lock", "title": "Why is bundler a dependency but not a spec in Gemfile.lock?", "body": "<p>I'm parsing Gemfile.lock to create a dependency graph. A sample of the file:</p>\n\n<pre><code>rack-ssl (1.3.4)\n    rack\nrack-test (0.6.3)\n    rack (&gt;= 1.0)\nrails (3.2.22.1)\n    actionmailer (= 3.2.22.1)\n    actionpack (= 3.2.22.1)\n    activerecord (= 3.2.22.1)\n    activeresource (= 3.2.22.1)\n    activesupport (= 3.2.22.1)\n    bundler (~&gt; 1.0)\n    railties (= 3.2.22.1)\nrack (1.4.7)\n</code></pre>\n\n<p>It is a list of specs (gems which need to be installed for this project), followed by an indented list of that spec's dependencies. Because every dependency needs to be installed, they are all listed as specs somewhere else in the file. (E.G. rack is listed as a spec in the bottom of the sample, but is a dependency for two other specs near the top)</p>\n\n<p>The one exception to this rule is <code>bundler</code>, which is listed as a dependency but not as a spec. Why is this? Is it because gems already installed on a system level aren't included in the Gemfile.lock? Or is this a special case because bundler is the gem that generates Gemfiles, so it doesn't include itself?</p>\n"}, {"tags": ["ruby", "puppet", "erb"], "comments": [{"owner": {"reputation": 761, "user_id": 2141283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd49290276526fcdef4db541e6762e?s=128&d=identicon&r=PG", "display_name": "nbrew", "link": "https://stackoverflow.com/users/2141283/nbrew"}, "edited": false, "score": 0, "creation_date": 1546901072, "post_id": 54080280, "comment_id": 94999239, "body": "I&#39;m not familiar with how your template is being parsed but is it possible that the <code>@repos.each</code> block is being run on all repos then, with the last assigned values, parsing the template? If you reverse the order of your :repos in <code>notes.pp</code> do both files then have <i>centos</i> info? Do you get access a variable containing the current $repo? HTH"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 10880668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VWy-mH8yc_M/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZKS59n2CH0anSGD-2mdMbjOKRmtw/mo/photo.jpg?sz=128", "display_name": "johnny bravo", "link": "https://stackoverflow.com/users/10880668/johnny-bravo"}, "edited": false, "score": 1, "creation_date": 1546940799, "post_id": 54083895, "comment_id": 95010459, "body": "Thanks Alex,   I do have now a better  understanding of  how to work with erb templates  !"}, {"owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "reply_to_user": {"reputation": 7, "user_id": 10880668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VWy-mH8yc_M/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZKS59n2CH0anSGD-2mdMbjOKRmtw/mo/photo.jpg?sz=128", "display_name": "johnny bravo", "link": "https://stackoverflow.com/users/10880668/johnny-bravo"}, "edited": false, "score": 0, "creation_date": 1546940931, "post_id": 54083895, "comment_id": 95010533, "body": "@johnnybravo, That&#39;s great and don&#39;t forget to accept the answer if you&#39;re satisfied that it fixed your issue."}], "tags": [], "owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "is_accepted": true, "score": 1, "last_activity_date": 1546908965, "last_edit_date": 1546908965, "creation_date": 1546908572, "answer_id": 54083895, "question_id": 54080280, "link": "https://stackoverflow.com/questions/54080280/puppet-erb-dynamic-content/54083895#54083895", "title": "puppet erb dynamic content", "body": "<p>The logic in your ERB template, as hinted at in a comment, is invalid.</p>\n\n<p>Because you loop through the <code>@repos</code> array and set <code>$x</code> and <code>$_repo</code> on each iteration, those variables always take their values from the last iteration of that loop. This is why you always end up with the same generated content.</p>\n\n<p>The template could be changed to this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;% if @repo == \"centos\"\n     x = \"/opt/repos/yum/\" + @repo\n     _repo = @repo\n   else\n     x = \"/opt/repos/\" + @repo\n     _repo = @repo\n   end -%&gt;\nAlias /&lt;%= _repo %&gt; &lt;%= x %&gt;\nDocumentRoot  &lt;%= x %&gt;\nIndexOptions NameWidth=* +SuppressDescription\n&lt;Directory &lt;%= x %&gt;&gt;\n    Options Indexes FollowSymLinks\n    AllowOverride All\n    Require all granted\n&lt;/Directory&gt;\n\nErrorLog logs/&lt;%= _repo %&gt;_repo1_error.log\nLogLevel warn\n\nCustomLog logs/&lt;%= _repo %&gt;_repo1_access.log combined\n</code></pre>\n\n<p>Notice that I also changed your variables <code>$x</code> and <code>$_repo</code> because the dollar sign denotes global variables in Ruby, and global variables are probably not what you want there.</p>\n\n<p>It would be better still if you moved the conditional logic from your ERB template into your Puppet manifest.</p>\n\n<p>Finally, you really need to fix up your indentation because it is very hard to read as you have it.</p>\n"}], "owner": {"reputation": 7, "user_id": 10880668, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VWy-mH8yc_M/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZKS59n2CH0anSGD-2mdMbjOKRmtw/mo/photo.jpg?sz=128", "display_name": "johnny bravo", "link": "https://stackoverflow.com/users/10880668/johnny-bravo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 54083895, "answer_count": 1, "score": 0, "last_activity_date": 1546908965, "creation_date": 1546887777, "last_edit_date": 1546899966, "question_id": 54080280, "link": "https://stackoverflow.com/questions/54080280/puppet-erb-dynamic-content", "title": "puppet erb dynamic content", "body": "<p>site.pp</p>\n\n<pre><code>class httpd_conf_files ($repos) {\n    ensure_packages(['httpd'], {'ensure' =&gt; 'present'})\n    $repos.each |String $repo| {\n    file {\"/etc/httpd/conf.d/${repo}_repo1.conf\":\n                                  ensure  =&gt; file,\n                                  mode    =&gt; '0644',\n                                      content =&gt; template('deploy/repos.erb'),\n          }\n      }\n}\n</code></pre>\n\n<p>nodes.pp</p>\n\n<pre><code>node 'repo-web-c010' {\n                  class { httpd_conf_files:\n                           repos =&gt; ['centos','ubuntu'],\n                  }\n}\n</code></pre>\n\n<p>However, both files centos_repo1.conf and ubuntu_repo1.conf have the same content.</p>\n\n<p>repos.erb</p>\n\n<pre><code>    &lt;% @repos.each do |rep|\n    if rep == \"centos\"\n        $x      = \"/opt/repos/yum/\"+rep\n                 $_repo  = rep\n         else\n                 $x      = \"/opt/repos/\"+rep\n                 $_repo  = rep\n         end\n\n    end -%&gt;\n    Alias /&lt;%=$_repo%&gt; &lt;%=$x%&gt;\n    DocumentRoot  &lt;%=$x%&gt;\n    IndexOptions NameWidth=* +SuppressDescription\n    &lt;Directory &lt;%=$x%&gt;&gt;\n        Options Indexes FollowSymLinks\n        AllowOverride All\n        Require all granted\n    &lt;/Directory&gt;\n\n    ErrorLog logs/&lt;%=$_repo%&gt;_repo1_error.log\n    LogLevel warn\n\n    CustomLog logs/&lt;%=$_repo%&gt;_repo1_access.log combined\n</code></pre>\n\n<p>Can someone enlighten me what's wrong?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1546885069, "post_id": 54079647, "comment_id": 94992804, "body": "<a href=\"https://words.steveklabnik.com/beware-subclassing-ruby-core-classes\" rel=\"nofollow noreferrer\">Beware subclassing Ruby core classes</a>."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1546928803, "post_id": 54079794, "comment_id": 95005337, "body": "The OP obviously does not &quot;want to return a new instance of <code>MyArray</code>&quot;."}], "tags": [], "owner": {"reputation": 4555, "user_id": 379439, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eff26034f6349f400f0fd0bc1f06c1af?s=128&d=identicon&r=PG", "display_name": "Just Jake", "link": "https://stackoverflow.com/users/379439/just-jake"}, "is_accepted": false, "score": 2, "last_activity_date": 1546885478, "creation_date": 1546885478, "answer_id": 54079794, "question_id": 54079647, "link": "https://stackoverflow.com/questions/54079647/modify-the-receiver-of-a-class-that-inherits-from-array/54079794#54079794", "title": "Modify the receiver of a class that inherits from `Array`", "body": "<p>You can write modified elements back to <code>self</code> using the regular subscript syntax if you want <code>#inc</code> to mutate the MyArray instance in-place:</p>\n\n<pre><code>class MyArray\n  def inc\n    self.each_with_index { |el, idx| self[idx] = el + 1 }\n    self\n  end\nend\n</code></pre>\n\n<p>If you want to return a new instance of <code>MyArray</code>, you should use <code>#map</code>, which returns a regular <code>Array</code>, so wrap it in your class's constructor:</p>\n\n<pre><code>class MyArray\n  def inc\n    self.class.new(self.map { |i| i + 1 })\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 96, "user_id": 7408598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6134d361550f3a22f21ae86e675382?s=128&d=identicon&r=PG&f=1", "display_name": "ItamarG", "link": "https://stackoverflow.com/users/7408598/itamarg"}, "edited": false, "score": 0, "creation_date": 1546930787, "post_id": 54086314, "comment_id": 95006028, "body": "can you add an explanation? I can see it works, but what <code>replace</code> does?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 96, "user_id": 7408598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6134d361550f3a22f21ae86e675382?s=128&d=identicon&r=PG&f=1", "display_name": "ItamarG", "link": "https://stackoverflow.com/users/7408598/itamarg"}, "edited": false, "score": 0, "creation_date": 1546930866, "post_id": 54086314, "comment_id": 95006050, "body": "It replaces the receiver&#39;s content with the given argument. When you are not sure, look at the document."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1546928965, "creation_date": 1546928965, "answer_id": 54086314, "question_id": 54079647, "link": "https://stackoverflow.com/questions/54079647/modify-the-receiver-of-a-class-that-inherits-from-array/54086314#54086314", "title": "Modify the receiver of a class that inherits from `Array`", "body": "<pre><code>class MyArray &lt; Array\n  def inc\n    each_index{|i| self[i] += 1}\n  end\nend\n\narr = MyArray.new([1, 2, 3, 4])\narr.inc # =&gt; [2, 3, 4, 5]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class MyArray &lt; Array\n  def inc\n    replace(map(&amp;:succ))\n  end\nend\n\narr = MyArray.new([1, 2, 3, 4])\narr.inc # =&gt; [2, 3, 4, 5]\n</code></pre>\n"}], "owner": {"reputation": 96, "user_id": 7408598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6134d361550f3a22f21ae86e675382?s=128&d=identicon&r=PG&f=1", "display_name": "ItamarG", "link": "https://stackoverflow.com/users/7408598/itamarg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 1, "accepted_answer_id": 54086314, "answer_count": 2, "score": 1, "last_activity_date": 1546928965, "creation_date": 1546884863, "last_edit_date": 1546928508, "question_id": 54079647, "link": "https://stackoverflow.com/questions/54079647/modify-the-receiver-of-a-class-that-inherits-from-array", "title": "Modify the receiver of a class that inherits from `Array`", "body": "<p>I have a class:</p>\n\n<pre><code>class MyArray &lt; Array; end\n</code></pre>\n\n<p>I want to define a method that will change an instance of <code>MyArray</code> such that:</p>\n\n<pre><code>arr = MyArray.new([1,2,3,4]) # =&gt; [1, 2, 3, 4]\narr.inc # =&gt; [2, 3, 4, 5]`\n</code></pre>\n\n<p>Can it be done? How so?</p>\n\n<p>I tried:</p>\n\n<pre><code>class MyArray &lt; Array\n  def inc\n    self.each { |i| i = i + 1 }\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1546884838, "post_id": 54079305, "comment_id": 94992715, "body": "In light of your edit I deleted my answer for now, but will  revisit the question after I return from an outing with Saffi, my faithful canine companion."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546885544, "post_id": 54079305, "comment_id": 94992982, "body": "I&#39;ve found this, which is tantalizingly close to what I want. <a href=\"http://wiseheartdesign.com/articles/2006/09/22/class-level-instance-variables/\" rel=\"nofollow noreferrer\">wiseheartdesign.com/articles/2006/09/22/&hellip;</a>, but it uses includes, rather than prepends. I need to prepend (well maybe not <i>need</i>, but I&#39;d like to) into Thor. I also can&#39;t access <code>subcommands</code> or the like until after they&#39;ve been initialized by other class level methods."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546887970, "post_id": 54079305, "comment_id": 94994010, "body": "Theoretically I thought I should be able to access any methods in <code>Thor</code>, but for some reason they don&#39;t seem to be the same &#39;context&#39; as the regular thor calls, resulting in empty arrays or hashes being returned. I did forget to mention that I don&#39;t really have trouble calling the methods on the object, but they&#39;re never populated, I&#39;m guessing due to that."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546891428, "post_id": 54079305, "comment_id": 94995503, "body": "With more research, I&#39;m actually able to access <code>Thor::Base</code> methods for some reason, but still not <code>Thor</code> class methods themselves."}], "answers": [{"comments": [{"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1546884311, "post_id": 54079427, "comment_id": 94992489, "body": "Yes, sorry, my example was a bit <i>too</i> simplified for my actual use case sadly. So, accessing in a static context of course works, but I&#39;m actually trying to prepend a module into a library to then access variables in this way."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1546884652, "post_id": 54079427, "comment_id": 94992630, "body": "I&#39;ve edited my question to be a bit more clear about what I&#39;m actually trying to do."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1546901884, "post_id": 54079427, "comment_id": 94999466, "body": "I seem to have made myself come across as an idiot. I understand all that, including the common misconception you stated. I&#39;ve updated my question with a fully working example showing what I believe the actual issue to be (something with prepending). Yes I did have a few typos in my first example where I was printing stuff, but it shouldn&#39;t have mattered since I was printing in both locations, it would have printed at some point. This new example fully illustrates the issue with proper output, replicating exactly the issue I&#39;m having."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1546901959, "post_id": 54079427, "comment_id": 94999487, "body": "And thank you for your time helping me with this. Bit frustrating is all. I believe the issue is that prepending essentially just adds a new class with methods to the bottom of the call stack, but what I don&#39;t know is what the solution to this problem is."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1547141899, "post_id": 54079427, "comment_id": 95099663, "body": "any clue on what I can do? I&#39;ve succeeded at getting this working with monkey patching the relevant class, but I&#39;d rather prepend it so I can pull it out into a library"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1547146019, "post_id": 54079427, "comment_id": 95101605, "body": "@snowe, sorry for not replying earlier. I&#39;ll have a look at this shortly."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1547153859, "post_id": 54079427, "comment_id": 95105109, "body": "No worries! just a small bump since I got it working with monkey patching. I&#39;d just thought maybe you could think of a nicer solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1547183173, "post_id": 54079427, "comment_id": 95112606, "body": "@snowe, I hope this most recent edit helps, but I confess I still don&#39;t understand the crux of your question."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1547241096, "post_id": 54079427, "comment_id": 95139155, "body": "Ok so it looks like what I <i>might</i> have been doing wrong (I don&#39;t have the old code to reference) was calling <code>superclass.arr</code> from within the prepended module. Instead I call just <code>arr</code> and it works! I&#39;ve marked your answer as the answer so thank you for all your help!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1547248838, "post_id": 54079427, "comment_id": 95141558, "body": "Glad to be of help."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1547183071, "last_edit_date": 1547183071, "creation_date": 1546883858, "answer_id": 54079427, "question_id": 54079305, "link": "https://stackoverflow.com/questions/54079305/getting-instance-variable-from-parent-metaclass/54079427#54079427", "title": "Getting &#39;instance&#39; variable from parent metaclass", "body": "<p>Here is your code, slightly modified.</p>\n\n<pre><code>class Parent\n  def self.create_singleton_variable\n    @arr = [1,2,3]\n  end \n  def self.arr\n    puts \"self = #{self} in the getter for @arr\"\n    @arr\n  end\nend\n\nclass Child &lt; Parent\n  def get\n    puts self.arr\n  end\n  def self.get \n    puts self.arr\n  end\nend\n</code></pre>\n\n<p>I have written <code>Parent</code> in the more conventional way. Except for the addition of the <code>puts</code> statement, it is equivalent to that contained in the question.</p>\n\n<p>First, a head-slapper: <a href=\"http://ruby-doc.org/core-2.5.1/Kernel.html#method-i-puts\" rel=\"nofollow noreferrer\">Kernel#puts</a>-anything returns <code>nil</code>. You need to remove <code>puts</code> from both methods:</p>\n\n<pre><code>class Child &lt; Parent\n  def get\n    self.arr\n  end\n  def self.get \n    self.arr\n  end\nend\n\nParent.create_singleton_variable\n  #=&gt; [1, 2, 3] \nChild.get.nil?\nself = Child in the getter for @arr\n  #=&gt; true\n</code></pre>\n\n<p>We see that within the getter <code>arr</code>, invoked by <code>Child</code>'s class method <code>get</code>, <code>self</code> equals <code>Child</code>, so the method looks for a class instance variable <code>@arr</code> of <code>Child</code> not of <code>Parent</code>. As no such instance variable has been initialized, <code>nil</code> is returned.</p>\n\n<p>You need the following.</p>\n\n<pre><code>class Parent\n  class &lt;&lt; self\n    def create_singleton_variable\n      @arr = [1,2,3]\n    end\n    def arr\n      puts \"self = #{self} in the getter for @arr\"\n      @arr\n    end\n  end\nend\n\nclass Child &lt; Parent\n  def get\n    self.class.superclass.arr\n  end\n  def self.get \n    superclass.arr\n  end\nend\n</code></pre>\n\n<p>The crucial difference to that given in the question is that <a href=\"http://ruby-doc.org/core-2.5.1/Class.html#method-i-superclass\" rel=\"nofollow noreferrer\">Class#superclass</a> changes the scope (i.e., <code>self</code>) to <code>Parent</code>.</p>\n\n<p>We see the desired result is obtained.</p>\n\n<pre><code>Child.get\nself = Parent in the getter for @arr\n  #=&gt; [1, 2, 3] \n\nChild.new.class.superclass.arr\nself = Parent in the getter for @arr\n  #=&gt; [1, 2, 3] \n</code></pre>\n\n<p>A common misconception is that the <code>Child</code> class method defined <code>def self.get; self.arr; end</code> invokes the getter <code>Parent::arr</code>, and therefore returns the value of <code>Parent</code>'s instance variable <code>@arr</code>. It is <code>Child::arr</code> that is invoked, however, that method having been inherited from <code>Parent</code>, and it is <code>Child</code>'s class instance variable <code>@arr</code> that is being retrieved, a subtle, but important, distinction.</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>The first observation is that <code>Parent</code> can be written in the more conventional (and completely equivalent) way.</p>\n\n<pre><code>class Parent\n  def self.create_singleton_variable\n    @arr = [1,2,3]\n    puts \"arr is initialized #{@arr}\"\n  end\n\n  def self.arr\n    puts \"arr is #{@arr.inspect}\"\n    @arr\n  end\nend\n</code></pre>\n\n<p>Regardless of how its written, <code>self</code> will equal <code>Parent</code> when either class method is involked on parent. The first, therefore, will create the class instance variables <code>@arr</code>.</p>\n\n<pre><code>Parent.methods(false)\n  #=&gt; [:create_singleton_variable, :arr] \nParent.instance_variables\n  #=&gt; []\nParent.ancestors\n  #=&gt; [Parent, Object, Kernel, BasicObject] \n</code></pre>\n\n<p>Now let's create a class variable for <code>Parent</code>.</p>\n\n<pre><code>Parent.create_singleton_variable\n  # arr is initialized [1, 2, 3]\nParent.instance_variables\n  #=&gt; [:@arr]\n</code></pre>\n\n<p>Now let me change the value of <code>@arr</code>.</p>\n\n<pre><code>Parent.instance_variable_set(:@arr, ['dog', 'cat'])\n  #=&gt; [\"dog\", \"cat\"]\nParent.arr\n  # arr is [\"dog\", \"cat\"]\n  #=&gt; [\"dog\", \"cat\"] \n</code></pre>\n\n<p>Next, create the class <code>Child</code>, but do not yet prepend the module.</p>\n\n<pre><code>class Child &lt; Parent\n  create_singleton_variable\n  arr\nend\narr is initialized [1, 2, 3]\narr is [1, 2, 3]\n\nChild.ancestors\n  #=&gt; [Child, Parent, Object, Kernel, BasicObject]\nChild.instance_variables\n  #=&gt; [:@arr] \nChild.instance_variable_get(:@arr)\n  #=&gt; [1, 2, 3] \n</code></pre>\n\n<p>There are no surprises. Next load the module.</p>\n\n<pre><code>module CompletionGeneration\n  def self.prepended(base)\n    base.singleton_class.prepend(ClassMethods)\n  end\n\n  module ClassMethods\n    def completion\n      puts \"self=#{self}\"\n      puts \"superclass=#{superclass}\"\n      puts \"self.class=#{self.class}\"\n      puts \"self.class.superclass == #{self.class.superclass}\" \n      puts \"superclass.arr == #{superclass.arr.inspect}\"\n      puts \"self.class.superclass.arr == #{self.class.superclass.arr}\" \n      rescue Exception =&gt; e\n        # do nothing, this is just so you can see arr is actually\n        # initialized in the context of the Child\n        puts \"Exception =&gt; e=#{e}\"\n    end\n  end\nend\n</code></pre>\n\n<p>(Note <code>self.</code> is not needed in <code>\"superclass.arr == #{superclass.arr.inspect}\"</code>) Now prepend this module to <code>Parent</code>.</p>\n\n<pre><code>Parent.prepend CompletionGeneration\n\nParent.ancestors\n  #=&gt; [CompletionGeneration, Parent, Object, Kernel, BasicObject] \nParent.methods.include?(:completion)\n  #=&gt; true \nChild.ancestors\n  #=&gt; [Child, CompletionGeneration, Parent, Object, Kernel, BasicObject] \nChild.methods.include?(:completion)\n  #=&gt; true \n</code></pre>\n\n<p>The callback modules method <code>CompletionGeneration::prepended</code> is fired with <code>base</code> equal to <code>Parent</code>, causing <code>Parent</code>'s singleton class to prepend <code>ClassMethods</code>, thereby adding the class method <code>Parent::completion</code>. Since <code>Parent</code> did not previously have a method by that name using <code>prepend</code> or <code>include</code> would have the same effect. Further, instead of <code>Parent.singleton_class.include ClassMethods</code>, one could have used the <code>included(base)</code> callback instead, and executed <code>Parent.extend ClassMethods</code>. Perhaps <code>prepend</code> is being used here for a general case where <code>Parent</code> may have a class method by that name.<sup>1</sup></p>\n\n<p>Now execute the following.</p>\n\n<pre><code>Child.completion\nself=Child\nsuperclass=Parent\nself.class=Class\nself.class.superclass == Module\narr is [\"dog\", \"cat\"]\nsuperclass.arr == [\"dog\", \"cat\"]\nException =&gt; e=undefined method `arr' for Module:Class\n</code></pre>\n\n<p>The exception was raised when</p>\n\n<pre><code>puts \"self.class.superclass.arr == #{self.class.superclass.arr}\"\n</code></pre>\n\n<p>was being executed. As that amounts to</p>\n\n<pre><code>puts \"self.class.superclass.arr == #{Module.arr}\"\n</code></pre>\n\n<p>but of course <code>Module</code> has no module method <code>arr</code>.</p>\n\n<p><sup>1 In view of <code>Child.ancestors</code>, prepending <code>Parent</code> with the module only causes <code>Parent</code>'s children to <code>include</code> (rather than <code>prepend</code>) the module; that is, if a child already has a method <code>completion</code> before the prepending, that method will not be preempted by the the module's method by the same name.</sup></p>\n"}], "owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 54079427, "answer_count": 1, "score": 1, "last_activity_date": 1547183071, "creation_date": 1546883200, "last_edit_date": 1546901771, "question_id": 54079305, "link": "https://stackoverflow.com/questions/54079305/getting-instance-variable-from-parent-metaclass", "title": "Getting &#39;instance&#39; variable from parent metaclass", "body": "<p>With the following code, in what way can I access <code>@arr</code> from <code>Child</code>?</p>\n\n<pre><code>class Parent\n    class &lt;&lt; self\n        def create_singleton_variable\n            @arr = [1,2,3]\n        end\n\n        def arr\n            @arr\n        end\n    end\nend\n\nclass Child &lt; Parent\n    def get\n        puts self.arr\n    end\n    def self.get \n        puts self.arr\n    end\nend\n\n\np \"class method call #{Child.get}\"\n#=&gt; \u279c ruby child.rb    \n#=&gt; \"class method call \"\n\nc = Child.new\np \"instance call #{c.get}\"\n#=&gt; \u279c ruby child.rb \n#=&gt; Traceback (most recent call last):\n#=&gt;        1: from child.rb:24:in `&lt;main&gt;'\n#=&gt; child.rb:15:in `get': undefined method `arr' for #&lt;Child:0x00007fe0eb02e7d8&gt; (NoMethodError)\n</code></pre>\n\n<p>I've tried many other ways as well, but don't feel the need to post them here. </p>\n\n<p>edit to the question, since it appears I do need a bit more context:</p>\n\n<p>I'm attempting to prepend a module into the <code>Thor</code> framework. I want to then access <a href=\"https://github.com/erikhuda/thor/blob/d3762d0b89a80da488285d640b052f5276fac6bb/lib/thor.rb#L221\" rel=\"nofollow noreferrer\">this bit of code</a></p>\n\n<pre><code>module ThorExtensions\n  module Thor\n    module CompletionGeneration\n      def self.prepended(base)\n        base.singleton_class.prepend(ClassMethods)\n      end\n\n      module ClassMethods\n        def completion\n          puts \"Start Completion\"\n          p self\n          p self.superclass\n          p self.class.superclass.subcommands\n          puts \"End Completion\"\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>results in </p>\n\n<pre><code>Start Completion\nDebug\nThor\nbundler: failed to load command: exe/pt (exe/pt)\nNoMethodError: undefined method `subcommands' for Module:Class\n  /Users/tyler.thrailkill/Documents/code/backend/pt-cli/lib/thor_extensions/completion_generation.rb:13:in `completion'\n  /Users/tyler.thrailkill/Documents/code/backend/pt-cli/lib/debug/debug.rb:24:in `&lt;class:Debug&gt;'\n  /Users/tyler.thrailkill/Documents/code/backend/pt-cli/lib/debug/debug.rb:4:in `&lt;top (required)&gt;'\n  /Users/tyler.thrailkill/Documents/code/backend/pt-cli/lib/pt.rb:5:in `require'\n  /Users/tyler.thrailkill/Documents/code/backend/pt-cli/lib/pt.rb:5:in `&lt;top (required)&gt;'\n  exe/pt:13:in `require'\n  exe/pt:13:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>which of course is not what I want. It appears that maybe my issue is with prepending?</p>\n\n<h3>Edit 2</h3>\n\n<p>I seem to have done a terrible job of explaining my issue with prepending. Here is a fully working example showing my issue. I believe this is due to how prepending something to a class essentially creates another Class in the call stack that is called first. My hope is that I'm actually still able to access this method somehow. </p>\n\n<pre><code>class Parent\n  class &lt;&lt; self\n    def create_singleton_variable\n      @arr = [1,2,3]\n      puts \"arr is initialized #{@arr}\"\n    end\n    # ... lots of code here. \n    def arr\n      puts \"arr is #{@arr.inspect}\"\n      @arr\n    end\n  end\nend\n\nmodule CompletionGeneration\n  def self.prepended(base)\n    base.singleton_class.prepend(ClassMethods)\n  end\n\n  module ClassMethods\n    def completion \n      puts \"self.superclass.arr == #{self.superclass.arr.inspect}\" # unable to access superclass arr\n      puts \"self.class.superclass.arr == #{self.class.superclass.arr}\" # likewise, unable to access Child's metaclass superclass \n    rescue Exception =&gt; e\n      # do nothing, this is just so you can see arr is actually initialized in the context of the Child\n      p e\n    end\n  end\nend\n\nParent.prepend CompletionGeneration\n\nclass Child &lt; Parent\n  create_singleton_variable\n  completion\n  arr\nend\n\nChild.new\n</code></pre>\n\n<p>results in the output</p>\n\n<pre><code>\u279c ruby child.rb\narr is initialized [1, 2, 3]\narr is nil\nself.superclass.arr == nil\n#&lt;NoMethodError: undefined method `arr' for Module:Class&gt;\narr is [1, 2, 3]\n</code></pre>\n\n<p>This code should be simply copy and pastable as is.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1546879823, "post_id": 54078283, "comment_id": 94990405, "body": "@ndnenkov thumps up, I was looking for that same solution."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1546966045, "post_id": 54078283, "comment_id": 95024920, "body": "Did this help at all @Anon?"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 7, "last_activity_date": 1546882297, "last_edit_date": 1546882297, "creation_date": 1546878821, "answer_id": 54078283, "question_id": 54078162, "link": "https://stackoverflow.com/questions/54078162/split-a-string-by-multiple-delimiters/54078283#54078283", "title": "Split a string by multiple delimiters", "body": "<p>Use a regex:</p>\n\n<pre><code>str = 'hello this is a hello, allright this is a hello.'\nstr.split(/[.,\\s]+/)\n# =&gt; [\"hello\", \"this\", \"is\", \"a\", \"hello\", \"allright\", \"this\", \"is\", \"a\", \"hello\"]\n</code></pre>\n\n<p>This allows you to split a string by any of the three delimiters you've requested.</p>\n\n<p>The stop and comma are self-explanatory, and the <code>\\s</code> refers to whitespace. The <code>+</code> means we match one or more of these, and means we avoid empty strings in the case of 2+ of these characters in sequence.</p>\n\n<p>You might find the explanation provided by Regex101 to be handy, available here: <a href=\"https://regex101.com/r/r4M7KQ/3\" rel=\"nofollow noreferrer\">https://regex101.com/r/r4M7KQ/3</a>.</p>\n\n<hr>\n\n<p>Edit: for bonus points, here's a nice way to get the word counts using <a href=\"https://ruby-doc.org/core-2.6/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\"><code>each_with_object</code></a> :)</p>\n\n<pre><code>str.split(/[.,\\s]+/).each_with_object(Hash.new(0)) { |word, counter| counter[word] += 1 }\n# =&gt; {\"hello\"=&gt;3, \"this\"=&gt;2, \"is\"=&gt;2, \"a\"=&gt;2, \"allright\"=&gt;1}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10880128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ogofH9N2Kmo/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca-MqjlETn6wolWkUnBkMR4CTuplQ/mo/photo.jpg?sz=128", "display_name": "Anon", "link": "https://stackoverflow.com/users/10880128/anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546930502, "creation_date": 1546878401, "last_edit_date": 1546929724, "question_id": 54078162, "link": "https://stackoverflow.com/questions/54078162/split-a-string-by-multiple-delimiters", "title": "Split a string by multiple delimiters", "body": "<p>I want to split a string by whitespaces, commas, and dots. Given this input :</p>\n\n<pre><code>\"hello this is a hello, allright this is a hello.\"\n</code></pre>\n\n<p>I want to output:</p>\n\n<pre><code>hello 3\na 2\nis 2\nthis 2\nallright 1\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>puts \"Enter string \"\ntext=gets.chomp\nfrequencies=Hash.new(0)\ndelimiters = [',', ' ', \".\"]\nwords = text.split(Regexp.union(delimiters))\nwords.each { |word| frequencies[word] +=1}\nfrequencies=frequencies.sort_by {|a,b| b}\nfrequencies.reverse!\nfrequencies.each { |wor,freq| puts \"#{wor} #{freq}\"}\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>hello 3\na 2\nis 2\nthis 2\nallright 1\n 1\n</code></pre>\n\n<p>I do not want the last line of the output. It considers the space as a \nword too. This may be because there were consecutive delimiters (<code>,</code>, <code>&amp;</code>, <code>\" \"</code>).</p>\n"}, {"tags": ["ruby", "capybara"], "comments": [{"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 1, "creation_date": 1546876486, "post_id": 54077195, "comment_id": 94988539, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12427913/iterating-through-items-in-capybara\">Iterating through items in Capybara</a>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1546883801, "post_id": 54077195, "comment_id": 94992271, "body": "What does clicking on each button do? Does it change the current page (thereby making the rest of the buttons stale) or does it just change the state of something on the current page?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10780701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-McGttYGZLwc/AAAAAAAAAAI/AAAAAAAABJE/H0F5fsiKKm8/photo.jpg?sz=128", "display_name": "Maycon Silva", "link": "https://stackoverflow.com/users/10780701/maycon-silva"}, "edited": false, "score": 0, "creation_date": 1546915466, "post_id": 54080549, "comment_id": 95002321, "body": "In my case, after clicking on the desired button, a modal is enabled in the front and the back screen with the other buttons that I want to click is disabled, being necessary to click on the button of the front screen and then to try to click the other buttons of the screen of after Because of this it is not iterating on all the buttons on the screen. I hope I was clear in the explanation."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1, "user_id": 10780701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-McGttYGZLwc/AAAAAAAAAAI/AAAAAAAABJE/H0F5fsiKKm8/photo.jpg?sz=128", "display_name": "Maycon Silva", "link": "https://stackoverflow.com/users/10780701/maycon-silva"}, "edited": false, "score": 0, "creation_date": 1546925000, "post_id": 54080549, "comment_id": 95004281, "body": "@MayconSilva you\u2019re going to need to provide actual details about what error the code I provided produces - just saying it doesn\u2019t work doesn\u2019t tell us anything"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1, "user_id": 10780701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-McGttYGZLwc/AAAAAAAAAAI/AAAAAAAABJE/H0F5fsiKKm8/photo.jpg?sz=128", "display_name": "Maycon Silva", "link": "https://stackoverflow.com/users/10780701/maycon-silva"}, "edited": false, "score": 0, "creation_date": 1546972584, "post_id": 54080549, "comment_id": 95028177, "body": "@MayconSilva Updated the answer with the questions you need to answer if clicking the button just cause the page to change, thereby making all current elements stale."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1546972544, "last_edit_date": 1546972544, "creation_date": 1546889032, "answer_id": 54080549, "question_id": 54077195, "link": "https://stackoverflow.com/questions/54077195/how-to-iterate-with-more-than-one-element-on-the-page/54080549#54080549", "title": "How to iterate with more than one element on the page", "body": "<p><code>all</code> returns an Array like Capybara::Result object. You can iterate through that using the standard ruby enumerable methods.</p>\n\n<pre><code>all(\"button[data-control-name='srp_profile_actions']\").each do |el|\n  el.click\n  find(\"section[class=modal]\") # Not sure what this is for - if it's an expectation/assertion it should be written as such\n  click_button(class: %w(button-primary-large ml1) \nend\n</code></pre>\n\n<p>That will work as long as clicking on the button doesn't cause the browser to move to another page.  </p>\n\n<p>If clicking does cause the browser to move to another page then all the rest of the elements in the Capybara::Result object will become stale (resulting in a stale element reference error on the next iteration) and you won't be able to iterate any more. If that is your case then details on what exactly you're doing will be necessary.  Questions like does the original button still exist on the page after clicking the <code>button-primary-large</code> button, or can you iterate by just clicking the first matching button over and over? If it does still exist is it changed in any way to indicate it's already been clicked, or is the number/order of buttons on the page guaranteed to be stable? It would probably help to understand if you posted a fragment of the HTML for the first and second iteration.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10780701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-McGttYGZLwc/AAAAAAAAAAI/AAAAAAAABJE/H0F5fsiKKm8/photo.jpg?sz=128", "display_name": "Maycon Silva", "link": "https://stackoverflow.com/users/10780701/maycon-silva"}, "edited": false, "score": 0, "creation_date": 1546962125, "post_id": 54095101, "comment_id": 95022628, "body": "I&#39;ve tried the syntax above, but it&#39;s not yet iterating with the buttons on the page. It clicks the first button but does not proceed with the iteration and displays the following error: stale element reference: &quot;element is not attached to the document page&quot;"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1546972248, "post_id": 54095101, "comment_id": 95028022, "body": "Update/edit your question rather than adding an answer with more questions in it."}], "tags": [], "owner": {"reputation": 1, "user_id": 10780701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-McGttYGZLwc/AAAAAAAAAAI/AAAAAAAABJE/H0F5fsiKKm8/photo.jpg?sz=128", "display_name": "Maycon Silva", "link": "https://stackoverflow.com/users/10780701/maycon-silva"}, "is_accepted": false, "score": 0, "last_activity_date": 1546961961, "creation_date": 1546961961, "answer_id": 54095101, "question_id": 54077195, "link": "https://stackoverflow.com/questions/54077195/how-to-iterate-with-more-than-one-element-on-the-page/54095101#54095101", "title": "How to iterate with more than one element on the page", "body": "<pre><code> def btnConectar()\n\n        page.all(\"button[data-control-name='srp_profile_actions']\").each do |el|\n\n        while page.has_css?(\"button[data-control-name='srp_profile_actions']\")  \n\n        el.click #Click the button\n        find(\"section[class=modal]\") #Modal mapping\n        click_button(class: %w(button-primary-large ml1)) #Click the button\n        sleep 3\n\n        end\n\n    end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10780701, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-McGttYGZLwc/AAAAAAAAAAI/AAAAAAAABJE/H0F5fsiKKm8/photo.jpg?sz=128", "display_name": "Maycon Silva", "link": "https://stackoverflow.com/users/10780701/maycon-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546972544, "creation_date": 1546874792, "last_edit_date": 1546930574, "question_id": 54077195, "link": "https://stackoverflow.com/questions/54077195/how-to-iterate-with-more-than-one-element-on-the-page", "title": "How to iterate with more than one element on the page", "body": "<p>I have several buttons to click on the same page. How do I iterate and click on each of them?</p>\n\n<pre><code>def btnConectar()\n\n\n   elements = all(\"button[data-control-name='srp_profile_actions']\").count \n\n    puts elements\n\n    first(\"button[data-control-name='srp_profile_actions']\").click \n    find(\"section[class=modal]\")\n    find(\"button[class='button-primary-large ml1']\").click\n\nend\n</code></pre>\n"}, {"tags": ["mysql", "sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 108986, "user_id": 511529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YNRmY.jpg?s=128&g=1", "display_name": "GolezTrol", "link": "https://stackoverflow.com/users/511529/goleztrol"}, "edited": false, "score": 1, "creation_date": 1546870151, "post_id": 54075791, "comment_id": 94984883, "body": "That query looks okay. I wouldn&#39;t use a subquery though, but just a simple join on the table directly, with a where clause specifying the date rage. I don&#39;t really understand your problem description, but I think it&#39;s related to the fact that you select <code>*</code>, which means all columns from both tables (the products table and the subquery/derived table. I would select only the exact columns you want. If you want a column from both tables with the same same name, you can provide an alias for that column (for instance <code>products.id as product_id, news.id as news_id</code>)."}, {"owner": {"reputation": 32469, "user_id": 1529673, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/O6MQS.jpg?s=128&g=1", "display_name": "Strawberry", "link": "https://stackoverflow.com/users/1529673/strawberry"}, "edited": false, "score": 2, "creation_date": 1546877160, "post_id": 54075791, "comment_id": 94988950, "body": "A great tip for a better life is NEVER use <code>SELECT *</code>"}], "answers": [{"comments": [{"owner": {"reputation": 818, "user_id": 2509777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyQvS.jpg?s=128&g=1", "display_name": "mlabarca", "link": "https://stackoverflow.com/users/2509777/mlabarca"}, "edited": false, "score": 0, "creation_date": 1546892366, "post_id": 54075986, "comment_id": 94995897, "body": "Thanks! I ended up using this as a base, ended up splitting the product_newsletters query and adding the extra select clause at the end so I can do a ruby <code>group_by</code> later. So at the end it is something like: <code>Product.joins(:newsletter_products).merge(newsletter_product&zwnj;&#8203;s).       select(&#39;products.*, newsletter_products.date AS newsletter_product_date&#39;)</code> This actually renders something similar to Gordon&#39;s generic sql answer, marking this as the accepted one but both are valid answers."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 3, "last_activity_date": 1546870259, "creation_date": 1546870259, "answer_id": 54075986, "question_id": 54075791, "link": "https://stackoverflow.com/questions/54075791/how-to-join-conditionally-and-get-data-from-the-join-table/54075986#54075986", "title": "How to join conditionally and get data from the join table?", "body": "<p>Following will provide you expected output,</p>\n\n<pre><code>Product.joins(:product_newsletters).where(product_newsletters: { date: ['19-01-2013'.to_datetime..'19-02-2013'.to_datetime] })\n</code></pre>\n\n<p>If 2 product_newsletters objects falls in range of date and both have same product_id, still for above query you will get <code>2 counts</code> for same product id. </p>\n"}, {"tags": [], "owner": {"reputation": 1106495, "user_id": 1144035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e514b017977ebf742a418cac697d8996?s=128&d=identicon&r=PG", "display_name": "Gordon Linoff", "link": "https://stackoverflow.com/users/1144035/gordon-linoff"}, "is_accepted": false, "score": 2, "last_activity_date": 1546870266, "creation_date": 1546870266, "answer_id": 54075987, "question_id": 54075791, "link": "https://stackoverflow.com/questions/54075791/how-to-join-conditionally-and-get-data-from-the-join-table/54075987#54075987", "title": "How to join conditionally and get data from the join table?", "body": "<p>You should write the query like this:</p>\n\n<pre><code>SELECT p.*, n.date AS newsletter_date\nFROM products p INNER JOIN \n     newsletter_products np\n     ON p.id = n.product_id\nWHERE np.date BETWEEN '2018-01-03' AND '2018-01-20';\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>Don't use <code>select *</code>.  You will get the newletter date twice.</li>\n<li>The subquery is unnecessary and might impede optimization.</li>\n<li>Use table aliases so the query is easier to write and to read.</li>\n<li>I don't like <code>between</code> with dates, but that is the logic you are doing.  It is safe when <code>date</code> has no time component.</li>\n</ul>\n"}], "owner": {"reputation": 818, "user_id": 2509777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EyQvS.jpg?s=128&g=1", "display_name": "mlabarca", "link": "https://stackoverflow.com/users/2509777/mlabarca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 54075986, "answer_count": 2, "score": 1, "last_activity_date": 1546877132, "creation_date": 1546869416, "last_edit_date": 1546877132, "question_id": 54075791, "link": "https://stackoverflow.com/questions/54075791/how-to-join-conditionally-and-get-data-from-the-join-table", "title": "How to join conditionally and get data from the join table?", "body": "<p>I have two tables, <code>Product</code> and <code>ProductNewsletter</code>. A product can have many <code>product_newsletters</code>, thus this in rails is a <code>has_many</code> relationship on the side of the products, and <code>belongs_to</code> on the product_newsletter side, with a product_id. The tables kind of look like this:</p>\n\n<pre><code>products\nid title... etc\n\nproduct_newsletters\nid product_id date\n</code></pre>\n\n<p>I'd like to get the products that have a product_newsletter in a range of dates, and also select the date from the found product_newsletter in the query. So if a product has two product_newsletter, with dates 11-03-2018, 20-03-2018 and 04-04-2018, querying with dates between 01-03-2018 and 30-01-03-2018 should display this product twice, once with 11-03-2018, and another with 20-03-2018. At first I tried this join with a subquery:</p>\n\n<pre><code>SELECT *\n     , news.date AS newsletter_date \n  FROM products \n  JOIN \n     ( SELECT newsletter_products.* \n         FROM newsletter_products \n        WHERE newsletters.date BETWEEN '2018-01-03' AND '2018-01-20'\n     ) news \n    ON  products.id = news.product_id\n</code></pre>\n\n<p>But this join results in product with an id that is the same of those newsletters in the subquery, not the ones in <code>product_id</code> as I expected from the subquery. I'm using ruby on rails and Mysql. My idea is to use the results of this query to simply do a ruby <code>products.group_by(&amp;:newsletter_date)</code> and end up with a nice hash with the dates as keys and products as values, without extra queries or filtering per each date, which is my current implementation.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pry"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 1, "last_activity_date": 1546867462, "creation_date": 1546867462, "answer_id": 54075289, "question_id": 54075179, "link": "https://stackoverflow.com/questions/54075179/access-prys-show-source-method-from-ruby-file/54075289#54075289", "title": "Access Pry&#39;s show-source method from Ruby file", "body": "<p>You can access source of a method without using <code>pry</code> with a <a href=\"https://ruby-doc.org/core-2.6/Object.html#method-i-method\" rel=\"nofollow noreferrer\">Object#method</a> and <code>Method#source_location</code> as described in this answer: <a href=\"https://stackoverflow.com/a/46966145/580346\">https://stackoverflow.com/a/46966145/580346</a> </p>\n"}, {"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1546875375, "post_id": 54077177, "comment_id": 94987938, "body": "Perfect - thanks @JohanWentholt. That fits what I&#39;m after perfectly. Appreciate the answer."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 2, "last_activity_date": 1546875101, "last_edit_date": 1546875101, "creation_date": 1546874722, "answer_id": 54077177, "question_id": 54075179, "link": "https://stackoverflow.com/questions/54075179/access-prys-show-source-method-from-ruby-file/54077177#54077177", "title": "Access Pry&#39;s show-source method from Ruby file", "body": "<p>Ruby has the build-in method <a href=\"http://ruby-doc.org/core-2.6/Method.html#method-i-source_location\" rel=\"nofollow noreferrer\"><em>Method#source_location</em></a> which can be used to find the location of the source. The <a href=\"https://rubygems.org/gems/method_source\" rel=\"nofollow noreferrer\"><em>method_source</em></a> gem builds upon this by extracting the source based upon the source location. However this doesn't work for methods defined in the interactive console. Methods must be defined in a file.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>require 'set'\nrequire 'method_source'\n\nset_square_bracket_method = Set.method(:[])\n\nputs set_square_bracket_method.source_location\n# /home/user/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/set.rb\n# 74\n#=&gt; nil\n\nputs set_square_bracket_method.source\n# def self.[](*ary)\n#   new(ary)\n# end\n#=&gt; nil\n</code></pre>\n\n<p>Keep in mind that all core Ruby methods are written in C and return <code>nil</code> as source location. <code>1.method(:+).source_location #=&gt; nil</code> The standard library is written in Ruby itself. Therefore the example above works for <em>Set</em> methods.</p>\n"}], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 54077177, "answer_count": 2, "score": 3, "last_activity_date": 1546875101, "creation_date": 1546867018, "question_id": 54075179, "link": "https://stackoverflow.com/questions/54075179/access-prys-show-source-method-from-ruby-file", "title": "Access Pry&#39;s show-source method from Ruby file", "body": "<p>Is it possible to access Pry's <code>show-source</code> method from within a Ruby file? If so, how is this done?</p>\n\n<p>For example, if I had this file:</p>\n\n<pre><code># testing.rb\n\nrequire 'pry' \n\ndef testing\n  puts 'hi'\nend\n\nputs show-source testing\n</code></pre>\n\n<p>And ran <code>ruby testing.rb</code>, I'd like the output:</p>\n\n<pre><code>Owner: testing.rb\nVisibility: public\nNumber of lines: 3\n\ndef testing\n  puts 'hi'\nend\n</code></pre>\n\n<p>To explain the rationale for this, I have a test stubbing a method, though the original seems to be getting called on occassion and I thought it would be handy to output the source of the call to see where it's coming from. I know there are simpler ways of doing this, though started down this rabbit hole and am interested in seeing whether this can be done :)</p>\n\n<p>Running the slightly head-twisting <code>show-source show-source</code> shows a few methods within the <code>Pry::Command::ShowSource</code> class, which inherits from <code>Pry::Command::ShowInfo</code>.</p>\n\n<p><code>Pry::Command::ShowSource</code> shows three methods: <code>options</code>, <code>process</code> and <code>content_for</code>, though I've not been able to successfully call any.</p>\n\n<p>My best assumption is the <code>content_for</code> method handles this, working with a code object assigned from the parent class (i.e. <code>Pry::CodeObject.lookup(obj_name, _pry_, :super =&gt; opts[:super])</code>), though I've not been able to crack this.</p>\n\n<p>Anyone have any ideas or examples of doing this?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 0, "creation_date": 1546863792, "post_id": 54074379, "comment_id": 94981476, "body": "this is will only work if &quot;find_something&quot; return false. Here it return nil"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "edited": false, "score": 5, "creation_date": 1546863838, "post_id": 54074379, "comment_id": 94981509, "body": "It&#39;s the same. nil is a falsey value."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1546866441, "post_id": 54074379, "comment_id": 94982839, "body": "It will work as long as <code>find_something</code> can&#39;t legitimately return <code>false</code> as a found item."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 2, "creation_date": 1546866485, "post_id": 54074379, "comment_id": 94982860, "body": "Sure, but that does not work even with the original code, the ternary operator."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1546866621, "post_id": 54074379, "comment_id": 94982932, "body": "Sure. I just thought it warranted a heads-up for OP."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 10, "last_activity_date": 1546863718, "creation_date": 1546863718, "answer_id": 54074379, "question_id": 54074357, "link": "https://stackoverflow.com/questions/54074357/better-ternary-condition/54074379#54074379", "title": "Better ternary condition", "body": "<p>Anything like this?</p>\n\n<pre><code>something = find_something(id) || create_something(foo)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1546872330, "post_id": 54074859, "comment_id": 94986164, "body": "Although this is a fine answer I suggest linking to <a href=\"https://api.rubyonrails.org/\" rel=\"nofollow noreferrer\">api.rubyonrails.org</a> since it is maintained by the official Ruby on Rails team. In this case <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-find_or_create_by\" rel=\"nofollow noreferrer\"><code>find_or_create_by</code></a>. For specific Rails versions use <a href=\"https://api.rubyonrails.org/v4.2.7/\" rel=\"nofollow noreferrer\">api.rubyonrails.org/v4.2.7</a> replacing the version with the version you want to use."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546875219, "post_id": 54074859, "comment_id": 94987856, "body": "Good advice, thanks @JohanWentholt. I&#39;ve updated my answer."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1546966015, "post_id": 54074859, "comment_id": 95024897, "body": "Did you take a look at this @Xero? Wondering whether it was useful in your scenario?"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 6, "last_activity_date": 1546875204, "last_edit_date": 1546875204, "creation_date": 1546865760, "answer_id": 54074859, "question_id": 54074357, "link": "https://stackoverflow.com/questions/54074357/better-ternary-condition/54074859#54074859", "title": "Better ternary condition", "body": "<p>There's not quite enough detail given to say this with confidence, though it might be this is a case for <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-find_or_create_by\" rel=\"nofollow noreferrer\"><code>find_or_create_by</code></a>.</p>\n\n<p>If this does suit, you would just do:</p>\n\n<pre><code>something = YourModel.find_or_create_by(id: id)\n</code></pre>\n\n<p>You can also provide a block to this, which is passed to the create method if no record is found. For example:</p>\n\n<pre><code>something = YourModel.find_or_create_by(id: id) do |instance|\n  # this block only gets executed on create\n  instance.some_new_attribute = 'goes here'\nend\n</code></pre>\n\n<p>Hope that's useful - let me know if it suits your use case.</p>\n"}], "owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 54074379, "answer_count": 2, "score": 3, "last_activity_date": 1547001766, "creation_date": 1546863634, "last_edit_date": 1547001766, "question_id": 54074357, "link": "https://stackoverflow.com/questions/54074357/better-ternary-condition", "title": "Better ternary condition", "body": "<p>Method <code>find_something</code> may return <code>nil</code>. In the following code,</p>\n\n<pre><code>something = find_something(id) ? find_something(id) : create_something(foo)\n</code></pre>\n\n<p><code>find_something(id)</code> is called twice. This is a smell that I want to avoid. Is there a way to avoid redundancy in this expression?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 443, "user_id": 3678149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YVIsD.jpg?s=128&g=1", "display_name": "kishore cheruku", "link": "https://stackoverflow.com/users/3678149/kishore-cheruku"}, "edited": false, "score": 0, "creation_date": 1546861166, "post_id": 54073542, "comment_id": 94980162, "body": "Of course , second option is best. Because if you download the file , then no need to depend on https always.  And if you use CDN , Network should be work , otherwise &quot;undefined Jquery &#39; problem will be raised."}], "answers": [{"tags": [], "owner": {"reputation": 3397, "user_id": 2563282, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/nCJrZ.jpg?s=128&g=1", "display_name": "G.B", "link": "https://stackoverflow.com/users/2563282/g-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1547231276, "last_edit_date": 1547231276, "creation_date": 1546860731, "answer_id": 54073597, "question_id": 54073542, "link": "https://stackoverflow.com/questions/54073542/which-way-is-faster-to-add-jquery-to-your-project/54073597#54073597", "title": "which way is faster to add jquery to your project", "body": "<p>Using <code>CDN</code>, it will be faster but will be slower for the first time(if not loaded already). Once <code>CDN</code> is loaded, it will always run faster.</p>\n\n<p>But there is a drawback of <code>CDN</code> if the <code>host</code> removes that file that will give raise to error of <code>JQuery not found</code>. To avoid that using gem or downloading is preferred.</p>\n\n<p>Conclusion: both ways have their <code>pros</code> and <code>cons</code> you have to pick one yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 4064096, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y9dKu0efYGc/AAAAAAAAAAI/AAAAAAAAAQc/DSY-0KlU_M4/photo.jpg?sz=128", "display_name": "Eugeniu T.", "link": "https://stackoverflow.com/users/4064096/eugeniu-t"}, "is_accepted": false, "score": 1, "last_activity_date": 1546972014, "last_edit_date": 1546972014, "creation_date": 1546869466, "answer_id": 54075804, "question_id": 54073542, "link": "https://stackoverflow.com/questions/54073542/which-way-is-faster-to-add-jquery-to-your-project/54075804#54075804", "title": "which way is faster to add jquery to your project", "body": "<p>In your gemfile:</p>\n\n<pre><code>#Rails jQuery \ngem 'jquery-rails'\n</code></pre>\n\n<p>In assets/javascriptapplication.js</p>\n\n<pre><code>//= require jquery3\n</code></pre>\n\n<p>or </p>\n\n<pre><code>//= require jquery2\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6900766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a799e40111e093f0e6a422ca2465df42?s=128&d=identicon&r=PG&f=1", "display_name": "Zeshan Butt", "link": "https://stackoverflow.com/users/6900766/zeshan-butt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1547231276, "creation_date": 1546860560, "last_edit_date": 1546865273, "question_id": 54073542, "link": "https://stackoverflow.com/questions/54073542/which-way-is-faster-to-add-jquery-to-your-project", "title": "which way is faster to add jquery to your project", "body": "<p>Which of the following way is faster and best to add jquery file,</p>\n\n<ol>\n<li><p>add jquery file into project with link like below,</p>\n\n<pre><code>src=\"https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js\"&gt;\n</code></pre></li>\n<li><p>download jquery file and then add that local file.</p></li>\n</ol>\n"}, {"tags": ["ruby", "linux", "shell", "rubygems"], "comments": [{"owner": {"reputation": 541, "user_id": 2075407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e389209455e700c93a96f9627b0e08f?s=128&d=identicon&r=PG", "display_name": "S.Spencer", "link": "https://stackoverflow.com/users/2075407/s-spencer"}, "edited": false, "score": 1, "creation_date": 1546884136, "post_id": 54073387, "comment_id": 94992414, "body": "If the only difference is shell vs script, is your script correct? Is your ruby/gem environment working with /bin/sh or perhaps /bin/bash, /bin/zsh"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546886218, "post_id": 54073387, "comment_id": 94993272, "body": "Can you post any script/code/profile that affects your PATH?"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 541, "user_id": 2075407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e389209455e700c93a96f9627b0e08f?s=128&d=identicon&r=PG", "display_name": "S.Spencer", "link": "https://stackoverflow.com/users/2075407/s-spencer"}, "edited": false, "score": 0, "creation_date": 1546886647, "post_id": 54073387, "comment_id": 94993460, "body": "I think @S.Spencer is right. You probably need to change <code>#!&#47;bin&#47;sh -e</code> to the actual shell that you use."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 8278545, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EjB7aqX2ruY/AAAAAAAAAAI/AAAAAAAAAV0/2i7xU15T37A/photo.jpg?sz=128", "display_name": "Neeraj Sharma", "link": "https://stackoverflow.com/users/8278545/neeraj-sharma"}, "edited": false, "score": 0, "creation_date": 1546925722, "post_id": 54083969, "comment_id": 95004441, "body": "i installed ruby 2.3.0 shown as output of command gem env. Yes os is linux, Debian Wheezy."}], "tags": [], "owner": {"reputation": 2050, "user_id": 4488070, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/343f7e053fbfad125f237b9178e5b688?s=128&d=identicon&r=PG&f=1", "display_name": "varro", "link": "https://stackoverflow.com/users/4488070/varro"}, "is_accepted": false, "score": 0, "last_activity_date": 1546909231, "creation_date": 1546909231, "answer_id": 54083969, "question_id": 54073387, "link": "https://stackoverflow.com/questions/54073387/gem-executables-will-not-run/54083969#54083969", "title": "gem executables will not run", "body": "<p>I'm answering your <em>primary</em> question only, regarding the message.  (Frankly, I don't know what's going on with your sh file, so I'm not going to address whatever other problems it causes.)</p>\n\n<p>The message is a warning to you that any executables that the gem installs are not in your path.  If the gem does not install <em>any</em> executables, then you can safely ignore the message.  If it <em>does</em> (or you are simply unsure), then modify the path accordingly.  How you do that depends on what shell you happen to be using.  Since you have tagged the question with 'linux', I will guess that you are using bash; if so, add to either your <code>~/.profile</code> or to <code>~/.bash_profile</code> an entry similar to:</p>\n\n<pre><code>PATH=\"$PATH:/root/.gem/ruby/1.9.1/bin\"\n</code></pre>\n\n<p>Now, at this point, I have to wonder - <em>are</em> you using ruby-1.9?  You know that ruby 1.9 is obsolete, right?  Actually, considering that you seem to be using Ruby 2.3.0, that's not likely.  What I would suggest is to (at least temporarily) adjust your PATH as above to avoid the warning.  I suspect you <em>will</em> still have problems, but then you can ask a new question without the WARNING that you have cited.</p>\n\n<p>One last point, ignore suggestions that you should change your shebang to be other than \"#!/bin/sh\"; that's <em>very</em> unlikely to help.</p>\n"}], "owner": {"reputation": 135, "user_id": 8278545, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EjB7aqX2ruY/AAAAAAAAAAI/AAAAAAAAAV0/2i7xU15T37A/photo.jpg?sz=128", "display_name": "Neeraj Sharma", "link": "https://stackoverflow.com/users/8278545/neeraj-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3809, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546909231, "creation_date": 1546860001, "last_edit_date": 1546861427, "question_id": 54073387, "link": "https://stackoverflow.com/questions/54073387/gem-executables-will-not-run", "title": "gem executables will not run", "body": "<p>Running gem install from shell script giving error even though I ruby version2.3.0 installed on my machine.</p>\n\n<p>I am trying to install a gem from sh file. sh file code is as below:</p>\n\n<pre><code>    cat &gt; /tmp/install_bandshell.sh &lt;&lt;EOF\n    #!/bin/sh -e\n    cd /tmp\n    git clone git://github.com/concerto/bandshell.git\n    cd bandshell\n    gem build bandshell.gemspec\n    gem install *.gem\n    cd /\n    rm -rf /tmp/bandshell\n    EOF\n    chmod +x /tmp/install_bandshell.sh\n    /tmp/install_bandshell.sh\n</code></pre>\n\n<p>But when I run this sh file get error WARNING: You don't have /root/.gem/ruby/1.9.1/bin in your PATH, gem executables will not run. ERROR: Error installing bandshell-1.7.2.gem: rack requires Ruby version >= 2.2.2.</p>\n\n<p>Even I install 2.3.0  gem env output</p>\n\n<pre><code>    RubyGems Environment:\n      - RUBYGEMS VERSION: 2.5.1\n      - RUBY VERSION: 2.3.0 (2015-12-25 patchlevel 0) [x86_64-linux]\n      - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/2.3.0/gems/\n      - USER INSTALLATION DIRECTORY: /root/.gem/ruby/2.3.0\n      - RUBY EXECUTABLE: /usr/local/bin/ruby\n      - EXECUTABLE DIRECTORY: /usr/local/lib/ruby/gems/2.3.0/gems/bin\n      - SPEC CACHE DIRECTORY: /root/.gem/specs\n      - SYSTEM CONFIGURATION DIRECTORY: /usr/local/etc\n      - RUBYGEMS PLATFORMS:\n        - ruby\n        - x86_64-linux\n      - GEM PATHS:\n         - /usr/local/lib/ruby/gems/2.3.0/gems/\n         - /root/.gem/ruby/2.3.0\n         - /usr/local/lib/ruby/gems/2.3.0\n      - GEM CONFIGURATION:\n         - :update_sources =&gt; true\n         - :verbose =&gt; true\n         - :backtrace =&gt; false\n         - :bulk_threshold =&gt; 1000\n      - REMOTE SOURCES:\n         - https://rubygems.org/\n      - SHELL PATH:\n         - /usr/local/sbin\n         - /usr/local/bin\n         - /usr/sbin\n         - /usr/bin\n         - /sbin\n         - /bin\n         - /usr/local/lib/ruby/gems/2.3.0/gems\n</code></pre>\n\n<p>From terminal, if I install this gem it works but from shell script giving above error. Please help me with this. Platform is Debian Wheezy.</p>\n"}, {"tags": ["ruby", "google-chrome", "html-table", "automation"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 3, "creation_date": 1546858242, "post_id": 54072812, "comment_id": 94978649, "body": "Could you show a bit more code? How do you want to interact with it? Why is it not visible on the page - not loaded, maybe selenium is on the wrong page?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1546859979, "post_id": 54072812, "comment_id": 94979547, "body": "What are you trying to accomplish? Clicking an invisible element is supposed to fail \u2013 imagine an actual user trying to click a table header when it&#39;s not there. That&#39;s hardly possible."}, {"owner": {"reputation": 1, "user_id": 10878607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cca5b7d9e76bcc4ad661045aae0f2f?s=128&d=identicon&r=PG&f=1", "display_name": "silvrbow", "link": "https://stackoverflow.com/users/10878607/silvrbow"}, "edited": false, "score": 0, "creation_date": 1546860156, "post_id": 54072812, "comment_id": 94979623, "body": "The purpose is to scroll to the element so that it is in view. Work around was to use a javascript call:  page.execute_script %{document.getElementById(&quot;my_id&quot;).scrollIntoView();}"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10878607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cca5b7d9e76bcc4ad661045aae0f2f?s=128&d=identicon&r=PG&f=1", "display_name": "silvrbow", "link": "https://stackoverflow.com/users/10878607/silvrbow"}, "is_accepted": false, "score": 0, "last_activity_date": 1546869988, "last_edit_date": 1546869988, "creation_date": 1546860428, "answer_id": 54073500, "question_id": 54072812, "link": "https://stackoverflow.com/questions/54072812/ruby-clicking-a-table-header-when-the-header-is-not-visible-on-the-page/54073500#54073500", "title": "Ruby clicking a table header when the header is not visible on the page", "body": "<p>Javascript call within Ruby used as a workaround:  </p>\n\n<pre><code>page.execute_script %{\n    document.getElementById(\"my_id\").scrollIntoView();\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10878607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37cca5b7d9e76bcc4ad661045aae0f2f?s=128&d=identicon&r=PG&f=1", "display_name": "silvrbow", "link": "https://stackoverflow.com/users/10878607/silvrbow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546869988, "creation_date": 1546857898, "last_edit_date": 1546860293, "question_id": 54072812, "link": "https://stackoverflow.com/questions/54072812/ruby-clicking-a-table-header-when-the-header-is-not-visible-on-the-page", "title": "Ruby clicking a table header when the header is not visible on the page", "body": "<p>I'm using ruby for automation testing purposes, playback using Chrome. I'm trying to click a table header when the header is not visible on the page (it's a typical HTML table, with THEAD, TR, TH etc.) However, when I try to interact with the element I get the below:</p>\n\n<pre><code>Selenium::WebDriver::Error::ElementNotVisibleError: element not interactable\n(Session info: chrome=71.0.3578.98)\n(Driver info: chromedriver=2.43.600233 \n(523efee95e3d68b8719b3a1c83051aa63aa6b10d),platform=Linux 4.15.0-43-generic x86_64)\n</code></pre>\n\n<p>What I need to do is to scroll to that element so that it is in view.</p>\n"}, {"tags": ["ruby", "ubuntu", "bundler", "rbenv", "windows-subsystem-for-linux"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 2, "creation_date": 1546855722, "post_id": 54072047, "comment_id": 94977261, "body": "Your should never ever use <code>sudo</code> in gem install command, you will probably break all your rbenv scripts."}, {"owner": {"reputation": 1106, "user_id": 5804723, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-1lpOcTCaD5Q/AAAAAAAAAAI/AAAAAAAAAG8/sakzu8LwR5g/photo.jpg?sz=128", "display_name": "Micha\u0142 Sadowski", "link": "https://stackoverflow.com/users/5804723/micha%c5%82-sadowski"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1546855864, "post_id": 54072047, "comment_id": 94977340, "body": "Before that I also tried without <code>sudo</code>. Let me reinstall rbenv and try again."}, {"owner": {"reputation": 1106, "user_id": 5804723, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-1lpOcTCaD5Q/AAAAAAAAAAI/AAAAAAAAAG8/sakzu8LwR5g/photo.jpg?sz=128", "display_name": "Micha\u0142 Sadowski", "link": "https://stackoverflow.com/users/5804723/micha%c5%82-sadowski"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1546858691, "post_id": 54072047, "comment_id": 94978884, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 it seems that it was partially this, partially because of ubuntu bundled ruby version which locked permissions to folders - and at the tip of the problem a mismatched version in my project&#39;s gemlock file."}], "answers": [{"comments": [{"owner": {"reputation": 1197, "user_id": 103304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56397a9a2163f7741573e43d317c2322?s=128&d=identicon&r=PG", "display_name": "boymc", "link": "https://stackoverflow.com/users/103304/boymc"}, "edited": false, "score": 0, "creation_date": 1548236663, "post_id": 54077431, "comment_id": 95467022, "body": "Argh, thank you! I had a similar problem after a ruby upgrade. Turns out the gemlock file with <code>bundler (&gt;= 1.3.0)</code> Removed the gemlock and re-tried <code>bundle install</code> all commenced working. Much appreciated!"}], "tags": [], "owner": {"reputation": 1106, "user_id": 5804723, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-1lpOcTCaD5Q/AAAAAAAAAAI/AAAAAAAAAG8/sakzu8LwR5g/photo.jpg?sz=128", "display_name": "Micha\u0142 Sadowski", "link": "https://stackoverflow.com/users/5804723/micha%c5%82-sadowski"}, "is_accepted": true, "score": 1, "last_activity_date": 1546875715, "creation_date": 1546875715, "answer_id": 54077431, "question_id": 54072047, "link": "https://stackoverflow.com/questions/54072047/bundler-doesnt-get-installed-properly/54077431#54077431", "title": "Bundler doesn&#39;t get installed properly", "body": "<p>It was a mix of issues.</p>\n\n<ol>\n<li>I shouldn't have used <code>sudo</code>, very plausible that it broke some paths</li>\n<li>I shouldn't have to use <code>sudo</code> in the first place - but installing ruby directly through <code>sudo apt install ruby-full</code> most likely set restrictive access to necessary folders</li>\n<li>After uninstalling system default ruby version and reinstalling rbenv I could call <code>bundler</code> without an error - just not in the right folder. Turned out that the issue was a <code>gemlock</code> file that had a bundled with field set to 1.x, caused by one old gemfile. After removing the gemlock file and that dependency - it went more or less smoothly.</li>\n</ol>\n"}], "owner": {"reputation": 1106, "user_id": 5804723, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-1lpOcTCaD5Q/AAAAAAAAAAI/AAAAAAAAAG8/sakzu8LwR5g/photo.jpg?sz=128", "display_name": "Micha\u0142 Sadowski", "link": "https://stackoverflow.com/users/5804723/micha%c5%82-sadowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 54077431, "answer_count": 1, "score": 0, "last_activity_date": 1546875715, "creation_date": 1546854933, "question_id": 54072047, "link": "https://stackoverflow.com/questions/54072047/bundler-doesnt-get-installed-properly", "title": "Bundler doesn&#39;t get installed properly", "body": "<p>I'm just so lost. I set up Ubuntu on Windows and installed rbenv using <code>curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-installer | bash</code>. Added relevant lines to my .zshrc file, installed necessary ruby version, so now <code>ruby -v</code> command shows <code>ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]</code> as it should. I ran <code>sudo gem install bundler</code> which printed nicely <code>Successfully installed bundler-2.0.1</code>. But when I run <code>bundler</code> command I get:</p>\n\n<pre><code>Traceback (most recent call last):\n        2: from /home/michal-sadowski/.rbenv/versions/2.5.3/bin/bundler:23:in `&lt;main&gt;'\n        1: from /home/michal-sadowski/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems.rb:308:in `activate_bin_path'\n/home/michal-sadowski/.rbenv/versions/2.5.3/lib/ruby/2.5.0/rubygems.rb:289:in `find_spec_for_exe': can't find gem bundler (&gt;= 0.a) with executable bundler (Gem::GemNotFoundException)\n</code></pre>\n\n<p>What can I do to get it run?</p>\n\n<p><code>which bundler</code> gives <code>/home/michal-sadowski/.rbenv/shims/bundler</code>\n<code>which ruby</code> gives <code>/home/michal-sadowski/.rbenv/shims/ruby</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "random"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 3, "creation_date": 1546850078, "post_id": 54070813, "comment_id": 94974419, "body": "It&#39;s not a good idea to display incremental id in such urls in any case. You can use friendly_id gem, generate uuid-like slug for orders and use it instead of id in urls. Or completely replace order id with uuid"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1546855111, "post_id": 54070813, "comment_id": 94976908, "body": "If the page is only accessible by &quot;guest&quot; users, then I question its purpose in the return journey... Why not make the page viewable <i>once</i>; provide the option to email a receipt of purchase; but don&#39;t allow a second view (or viewing after a short period of time) of the public URL containing order details? That seems like a much safer option to me."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1546855258, "post_id": 54070813, "comment_id": 94977002, "body": "For example, even if the URL is really obscure, you could leak private details of anyone accessing it on a public computer."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1546900955, "post_id": 54070813, "comment_id": 94999199, "body": "@Vasilisa What would be the benefit for using friendly_id vs creating a random token with SecureRandom and finding by token instead of id?  But I see what you&#39;re saying and it&#39;s making me think i should just use token (or slug if i use friendly_id gem) and then i wouldn&#39;t need to worry about access for the order id as the ID would be very random - then the url can be for example :  example.com/orders/1234123adsff-32451/order-confirmation"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1546901288, "post_id": 54070813, "comment_id": 94999296, "body": "@TomLord Sorry if I was vague in my explanation but the order_confirmation page can be seen by anyone, as of now, who creates an order.  If the user is signed in there will be a link for them to navigate to their dashboard.  The order confirmation page is somewhat needed to stick around for convenience.  Shopify has a similar system but i notice they have 2 id tokens for a link sort of like this: example.com/orders/23415dfgsd43/confirmation/324sadfq123a   --- i am wondering how they achieve this."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1546906005, "post_id": 54070813, "comment_id": 95000435, "body": "@Vasilisa after looking over the friendly_id documentation.  I don&#39;t see much about the UUID unique token.  I do see a few things on it but mostly in the case where there are two of the same entries in 1 model."}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1546901356, "post_id": 54072536, "comment_id": 94999321, "body": "The code was a random entry as if I used SecureRandom - it was an example.  But @vasilla may have put me on the right path.  Using SecureRandom will most likely solve my problem.  Although, I would like SecureRandom to be generated for both the order and the order_confirmation but i will need to toggle around to figure that out!"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1546904547, "post_id": 54072536, "comment_id": 95000116, "body": "I was thinking.  With this I could technically create 2 tokens on an order creation.  One for the Order (used as the ID), and one for the Confirmation.  And then create a URL for example, domain.com/orders/13523f3a534/order_confirmation/2352df23452 --- which would be domain.com/orders/:id_token/order_confirmation/:confirmation&zwnj;&#8203;_token ?"}], "tags": [], "owner": {"reputation": 7420, "user_id": 1081668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DdH12.png?s=128&g=1", "display_name": "Thanh", "link": "https://stackoverflow.com/users/1081668/thanh"}, "is_accepted": false, "score": 0, "last_activity_date": 1546856793, "creation_date": 1546856793, "answer_id": 54072536, "question_id": 54070813, "link": "https://stackoverflow.com/questions/54070813/creating-unique-token-for-link-that-can-only-be-accessed-with-the-said-link/54072536#54072536", "title": "Creating unique Token for link that can only be accessed with the said link?", "body": "<p>I assume that <code>79sa9182-sd9871234123456f</code> is code or something else you store somewhere.</p>\n\n<p>Then you need to modify your routes like this:</p>\n\n<pre><code>resources :orders do\n  get 'order_confirmation/:code' =&gt; 'orders#order_confirmation', :on =&gt; :member\nend\n</code></pre>\n\n<p>Then you can create a link to order confirmation page with your new path, for example:</p>\n\n<pre><code>your_new_path(id: &lt;order_id&gt;, code: &lt;your_code&gt;)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1546998973, "post_id": 54085888, "comment_id": 95037378, "body": "So, would this work well with tokens? Because i have implemented a token on order create, used to_param to over ID and now i&#39;m having issues elsewhere because of the override.  I want to be able to, as you&#39;re saying, find records with more than one column"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1547013938, "post_id": 54085888, "comment_id": 95040526, "body": "I ended up figuring my situation out.  thanks for the help tho.  i will create an answer son after some testing"}], "tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": false, "score": 0, "last_activity_date": 1546926726, "creation_date": 1546926726, "answer_id": 54085888, "question_id": 54070813, "link": "https://stackoverflow.com/questions/54070813/creating-unique-token-for-link-that-can-only-be-accessed-with-the-said-link/54085888#54085888", "title": "Creating unique Token for link that can only be accessed with the said link?", "body": "<p>The benefit for using friendly_id - all works out of the box. If you add <code>use: [:slugged, :finders]</code> to the model, you don't need to care what to use - id or slug. Both options work:</p>\n\n<pre><code>Order.find(1)\nOrder.find('my_first_order')\n</code></pre>\n\n<p>Generating uuids with friendly_id is not very common practice, I used it since we already had the gem in our project. It looks like: </p>\n\n<pre><code>class Order &lt; ApplicationRecord\n  extend FriendlyId\n  friendly_id :blank_string, use: [:slugged, :finders]\n\n  private\n\n  def blank_string\n    ''\n  end\nend\n</code></pre>\n\n<p>If you don't need slugs for other model it would be easier to add new <code>token</code> column to the orders table with a default value <code>default: 'uuid_generate_v4()'</code> and index on the column. Don't forget to enable extension 'uuid-ossp'.</p>\n\n<p>And here is a <a href=\"https://tomharrisonjr.com/uuid-or-guid-as-primary-keys-be-careful-7b2aa3dcb439\" rel=\"nofollow noreferrer\">good article</a> about pros and cons of uuids as primary keys. In short it says: \"Best of Both? Integers Internal, UUIDs External\"</p>\n"}, {"tags": [], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "is_accepted": true, "score": 0, "last_activity_date": 1547596861, "creation_date": 1547596861, "answer_id": 54208560, "question_id": 54070813, "link": "https://stackoverflow.com/questions/54070813/creating-unique-token-for-link-that-can-only-be-accessed-with-the-said-link/54208560#54208560", "title": "Creating unique Token for link that can only be accessed with the said link?", "body": "<p>This is how I solved the to_param issue. I just simply removed it and reorganized the routes for the specific member route.....</p>\n\n<p>When using:</p>\n\n<p><code>resources :orders, param: :order_token do\n      get 'order_confirmation', :on =&gt; :member\n  end</code></p>\n\n<p>In my routes, I am able to go to the URL i want. Although, after an order is created, it still directs me to a route using the :id.</p>\n\n<p>I then change my redirect to:</p>\n\n<p><code>redirect_to order_confirmation_order_path(@order.order_token)</code></p>\n\n<p>And it works.</p>\n\n<p>I also removed my <code>to_param</code> override.</p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 54208560, "answer_count": 3, "score": 0, "last_activity_date": 1547596861, "creation_date": 1546849696, "question_id": 54070813, "link": "https://stackoverflow.com/questions/54070813/creating-unique-token-for-link-that-can-only-be-accessed-with-the-said-link", "title": "Creating unique Token for link that can only be accessed with the said link?", "body": "<p><strong>Issue</strong>: I have an order confirmation page once orders are placed.  The route loks like this:</p>\n\n<pre><code>resources :orders do\n      get 'order_confirmation', :on =&gt; :member\n  end\n</code></pre>\n\n<p><strong>The link</strong>:</p>\n\n<pre><code>example.com/orders/1001/order_confirmation\n</code></pre>\n\n<p><strong>Instead</strong>, I would like to generate a unique link like this:</p>\n\n<pre><code>example.com/orders/1001/order_confirmation/79sa9182-sd9871234123456f\n</code></pre>\n\n<p>So if someone makes an order for order 1002, they can't go \"hey let me see what order 1001 made\".</p>\n\n<p>BTW, the <strong>order_confirmation</strong> is within the OrdersController <strong>like this</strong>:</p>\n\n<pre><code>  def order_confirmation\n    @order = Order.find(params[:id])\n  end\n</code></pre>\n\n<p>I do have security with this for users who are signed in with CanCanCan, but I made this order_confirmation page for people who do not create accounts and probably won't ever create an account.</p>\n\n<p><strong>How can I accomplish this so a link like:</strong></p>\n\n<pre><code>example.com/orders/1001/order_confirmation/79sa9182-sd9871234123456f\n</code></pre>\n\n<p><strong>Is generated for order confirmations, and links like this:</strong></p>\n\n<pre><code>example.com/orders/1001/order_confirmation/\n</code></pre>\n\n<p>cannot be accessed by anyone, even the purchaser?</p>\n\n<hr>\n\n<p>I did find this: <a href=\"https://stackoverflow.com/questions/25133637/protected-sharing-link-in-ruby-on-rails\">Protected sharing link in Ruby on Rails</a></p>\n\n<p>But I am not sure how I would apply this for the order confirmation page since it doesn't have it's own table or model.  It's already in the OrdersController</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer"], "comments": [{"owner": {"reputation": 920, "user_id": 3512189, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hXdNN.jpg?s=128&g=1", "display_name": "wasipeer", "link": "https://stackoverflow.com/users/3512189/wasipeer"}, "edited": false, "score": 0, "creation_date": 1546847853, "post_id": 54070433, "comment_id": 94973634, "body": "your email params is empty"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1546847921, "creation_date": 1546847921, "answer_id": 54070476, "question_id": 54070433, "link": "https://stackoverflow.com/questions/54070433/action-mailer-undefined-method-for-nilnilclass/54070476#54070476", "title": "Action Mailer &#39;undefined method `[]&#39; for nil:NilClass&#39;", "body": "<p>At the call to <code>mail</code>, in the <code>to</code> option, you're basically sending <code>params[:email][:email]</code>. I don't think that's what you want.</p>\n\n<pre><code>recipient = params[:email]\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>to: recipient[:email],\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 10735674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/414ca17d7299a6b1d18f728fcc74a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "Djjhjuser10735674", "link": "https://stackoverflow.com/users/10735674/djjhjuser10735674"}, "edited": false, "score": 0, "creation_date": 1546850262, "post_id": 54070521, "comment_id": 94974492, "body": "Thanks! That got the error to go away but it&#39;s not sending to the email i entered in. This is the output of what I am getting &#39;From: notgoingtosay@gmail.com To: email&#39; &lt;-----"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1546848148, "creation_date": 1546848148, "answer_id": 54070521, "question_id": 54070433, "link": "https://stackoverflow.com/questions/54070433/action-mailer-undefined-method-for-nilnilclass/54070521#54070521", "title": "Action Mailer &#39;undefined method `[]&#39; for nil:NilClass&#39;", "body": "<p>You have called <code>InviteMailer.provider_invite(recipient)</code> where recipient is <code>email</code> inside controller.</p>\n\n<p>You can change in controller,</p>\n\n<pre><code>InviteMailer.provider_invite(email: recipient)\n</code></pre>\n\n<p>and then,</p>\n\n<pre><code>class InviteMailer &lt; ApplicationMailer\n  def provider_invite(attr)\n    @recipient = attr[:email]\n    mail(\n      to: @recipient,\n      subject: I18n.t('provider_invite_subject')\n    )\n  end\nend\n</code></pre>\n\n<p>And error is due to your params o not have email key, so recipient is nil passed through controller</p>\n"}], "owner": {"reputation": 27, "user_id": 10735674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/414ca17d7299a6b1d18f728fcc74a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "Djjhjuser10735674", "link": "https://stackoverflow.com/users/10735674/djjhjuser10735674"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546848148, "creation_date": 1546847673, "question_id": 54070433, "link": "https://stackoverflow.com/questions/54070433/action-mailer-undefined-method-for-nilnilclass", "title": "Action Mailer &#39;undefined method `[]&#39; for nil:NilClass&#39;", "body": "<p>Im getting an error when trying to send an email. Not to sure why but here is my code in my controller and mailer</p>\n\n<p>Here is my controller code below</p>\n\n<pre><code>class Invitation::InvitesController &lt; ApplicationController\n\ndef invite_provider\n      @patient = Patient.find_by_id(invite_params[:invitable_id])\n      recipient = params[:email]\n      InviteMailer.provider_invite(recipient).deliver_now\n      flash[:success] = \"An email has been sent to\"\n      redirect_back(fallback_location: root_path)\n    end\n\nend\n</code></pre>\n\n<p>Here is my mailer code </p>\n\n<pre><code>class InviteMailer &lt; ApplicationMailer\ndef provider_invite(recipient)\n    @recipient = recipient\n    mail(\n      to: recipient[:email],\n      subject: I18n.t('provider_invite_subject')\n    )\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "csv", "import"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1546853411, "post_id": 54069905, "comment_id": 94975966, "body": "I cannot reproduce your problem. I created a test file with multiple empty lines at the beginning, in the middle, and at the end, and all of them show up as empty rows. There must be something that you are not telling us. What is <code>tempfile</code>? What version of Ruby and/or the CSV library are you using?"}, {"owner": {"reputation": 53, "user_id": 4255631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd560fd846007d76fc570720c9a1d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "DeeBee", "link": "https://stackoverflow.com/users/4255631/deebee"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1546930774, "post_id": 54069905, "comment_id": 95006025, "body": "See my update - the problem is now an Excel issue, not Ruby. Your feedback actually pushed me in a debug direction where I found the problem - thanks."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 4255631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd560fd846007d76fc570720c9a1d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "DeeBee", "link": "https://stackoverflow.com/users/4255631/deebee"}, "is_accepted": true, "score": 0, "last_activity_date": 1547100625, "creation_date": 1547100625, "answer_id": 54122814, "question_id": 54069905, "link": "https://stackoverflow.com/questions/54069905/how-to-read-blank-lines-in-csv-file-in-ruby/54122814#54122814", "title": "How to read blank lines in CSV file in Ruby", "body": "<p>OK, my question turned out to be a red herring. The actual problem was that I had an Excel file with blank lines at the start. When I saved as a CSV file from within Excel, the blank lines were being removed from the saved CSV file but the Excel view of the file, i.e. filename.csv, still showed the blank lines present. I only discovered this by re-opening the file in Excel or a text editor.</p>\n"}], "owner": {"reputation": 53, "user_id": 4255631, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cd560fd846007d76fc570720c9a1d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "DeeBee", "link": "https://stackoverflow.com/users/4255631/deebee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 54122814, "answer_count": 1, "score": -1, "last_activity_date": 1547100625, "creation_date": 1546845008, "last_edit_date": 1546930662, "question_id": 54069905, "link": "https://stackoverflow.com/questions/54069905/how-to-read-blank-lines-in-csv-file-in-ruby", "title": "How to read blank lines in CSV file in Ruby", "body": "<p>I am reading in a CSV file with Ruby and it works fine except if there are blank rows at the start. It seems to skip the blank lines and go straight to a line with content. I want to read the blank lines as I need to count the row numbers.</p>\n\n<p>I use this function, which works fine except for skipping the blank rows:</p>\n\n<pre><code>CSV.foreach(params[:file].tempfile, headers: false, :encoding =&gt; 'ISO-8859-1') do |row|\n</code></pre>\n\n<p>I have a user input which dictates the starting row to read in, so I need to count down each row until I reach the desired row to read.   I really do not want to tell the user to edit the csv file to make sure rows are not blank.</p>\n\n<p>UPDATE:</p>\n\n<p>OK, my question turned out to be a red herring. The actual problem was that I had an Excel file with blank lines at the start. When I saved as a CSV file from within Excel, the blank lines were being removed from the saved CSV file but the Excel view of the file, i.e. filename.csv, still showed the blank lines present. I only discovered this by re-opening the file in Excel or a text editor. (All posted comments helped give me the clues to find this).</p>\n\n<p>So ... now I have a new problem ... why does Excel remove blank rows when saving as CSV?</p>\n"}, {"tags": ["javascript", "ruby", "cryptography", "sha256", "hmac"], "comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1546957711, "post_id": 54069618, "comment_id": 95019781, "body": "Sorry, but this isn&#39;t a question. Try yourself and possibly post when you get stuck."}], "owner": {"reputation": 1521, "user_id": 2905222, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brandon", "link": "https://stackoverflow.com/users/2905222/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1546844870, "creation_date": 1546843520, "last_edit_date": 1546844870, "question_id": 54069618, "link": "https://stackoverflow.com/questions/54069618/hmac-sha256-convert-server-side-ruby-code-to-client-side-javascript-code", "title": "HMAC SHA256 - Convert Server Side Ruby Code to Client Side Javascript Code", "body": "<p>I would like to convert my existing Ruby function, which runs on a server, into Javascript code, which will run in the client browser.</p>\n\n<p>The function creates a SHA256 signature by importing an array of parameters and a key.</p>\n\n<p><strong>Here is the Ruby function:</strong></p>\n\n<pre><code>def params_with_signature(params, secret)\n  params = params.reject { |_k, v| v.nil? }\n  query_string = URI.encode_www_form(params)\n  signature = OpenSSL::HMAC.hexdigest(OpenSSL::Digest.new('sha256'), secret, query_string)\n  params = params.merge(signature: signature)\nend\n</code></pre>\n\n<p><strong>Here is the data being passed through the Ruby Function:</strong></p>\n\n<pre><code>secret = 'abcdef'\n\nparams = {\n  one: 'a',\n  two: 'b',\n  three: 'c'\n}\n\nputs params_with_signature(params, secret)\n</code></pre>\n\n<p>I've made some progress using standard sha256 (without HMAC) with the Forge project:</p>\n\n<pre><code>&lt;script src='https://cdn.jsdelivr.net/npm/node-forge@0.7.0/dist/forge.min.js'&gt;&lt;/script&gt;\n&lt;script&gt;\n  var string = 'The quick brown fox jumps over the lazy dog';\n  var md = forge.md.sha256.create();\n  md.update(string);\n  hashed_string = (md.digest().toHex());\n  console.log(hashed_string)\n&lt;/script&gt;\n</code></pre>\n\n<p>It does appear that they have an HMAC module, but I'm not familiar with Javascript enough to implement (<a href=\"https://github.com/digitalbazaar/forge#hmac\" rel=\"nofollow noreferrer\">https://github.com/digitalbazaar/forge#hmac</a>).</p>\n\n<p>The bottom line here is that I would like all of this to run on the client device. I would prefer not to do this with node.js because I know that also runs on a server.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1546843493, "post_id": 54069587, "comment_id": 94972186, "body": "Can you please post what error you are getting"}, {"owner": {"reputation": 75, "user_id": 7050383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-37dOOOZc8TE/AAAAAAAAAAI/AAAAAAAAaEU/Xe92SRFjjr8/photo.jpg?sz=128", "display_name": "Matheus Santos", "link": "https://stackoverflow.com/users/7050383/matheus-santos"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1546843675, "post_id": 54069587, "comment_id": 94972239, "body": "I am getting this error: NoMethodError at / undefined method `model_name&#39; for nil:NilClass"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1546844460, "post_id": 54069587, "comment_id": 94972468, "body": "Seems like <code>@visit</code> is somewhere <code>nil</code>. You best way to solve would be adding a debugger to it and check for the values"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546858933, "post_id": 54069587, "comment_id": 94979019, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11093848/rails-undefined-method-model-name-for-nilclassclass\">Rails undefined method `model_name&#39; for NilClass:Class</a>"}, {"owner": {"reputation": 75, "user_id": 7050383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-37dOOOZc8TE/AAAAAAAAAAI/AAAAAAAAaEU/Xe92SRFjjr8/photo.jpg?sz=128", "display_name": "Matheus Santos", "link": "https://stackoverflow.com/users/7050383/matheus-santos"}, "edited": false, "score": 0, "creation_date": 1546921872, "post_id": 54069587, "comment_id": 95003576, "body": "It is not a duplicate."}], "owner": {"reputation": 75, "user_id": 7050383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-37dOOOZc8TE/AAAAAAAAAAI/AAAAAAAAaEU/Xe92SRFjjr8/photo.jpg?sz=128", "display_name": "Matheus Santos", "link": "https://stackoverflow.com/users/7050383/matheus-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546921831, "creation_date": 1546843327, "last_edit_date": 1546921831, "question_id": 54069587, "link": "https://stackoverflow.com/questions/54069587/how-do-i-display-a-form-for-within-an-iterator-in-a-view-ruby-on-rails", "title": "How do I display a form_for within an iterator in a view? | ruby on rails", "body": "<p>I'm trying to display a form from another controller in a view within an iterator.</p>\n\n<p>Every time I try to run the code it gives me an error:\n'NoMethodError at /undefined method `model_name' for nil:NilClass'</p>\n\n<p>I tried displaying the form by rendering a partial with the form from another controller and I've also tried rendering a partial with the form within the same controller but both return an error. This is might be because it's within iterator for another collection? </p>\n\n<pre><code>&lt;% @services.each do |service| %&gt;\n\n  &lt;div class='service-info'&gt;\n    &lt;%= service.name %&gt;\n    &lt;%= service.description %&gt;\n  &lt;/div&gt;\n\n  &lt;%= simple_form_for(@visit) do |f| %&gt;\n    &lt;%= f.error_notification %&gt;\n    &lt;%= f.error_notification message: \n    f.object.errors[:base].to_sentence \n    if f.object.errors[:base].present? %&gt;\n\n    &lt;%= f.input :service %&gt;\n    &lt;%= f.input :visit_date %&gt;\n    &lt;%= f.input :note %&gt;\n\n    &lt;%= f.button :submit %&gt;\n  &lt;% end %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>I would like the 'visit' form to appear below each 'service' in the view.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 1, "last_activity_date": 1546844663, "creation_date": 1546844663, "answer_id": 54069841, "question_id": 54069409, "link": "https://stackoverflow.com/questions/54069409/ruby-rails-chain-unknown-number-of-method-calls/54069841#54069841", "title": "Ruby/Rails - Chain unknown number of method calls", "body": "<p>I created following query which will work on any model and associated chained query array. </p>\n\n<pre><code>def chain_queries_on(klass, arr)\n  arr.inject(klass) do |relation, query|\n    begin\n      relation.send(query[0], *query[1..-1])\n    rescue\n      break;\n    end\n  end\nend\n</code></pre>\n\n<p>I tested in local for following test,</p>\n\n<pre><code>arr = [['where', {id: [1,2]}], ['where', {first_name: 'Shobiz'}]]\n\nchain_queries_on(Article, arr)\n</code></pre>\n\n<p>Query fired is like below to return proper output,</p>\n\n<pre><code>Article Load (0.9ms)  SELECT `article`.* FROM `article` WHERE `article`.`id` IN (1, 2) AND `article`.`first_name` = 'Shobiz'  ORDER BY created_at desc\n</code></pre>\n\n<p><strong>Note-1:</strong> few noticeable cases </p>\n\n<ol>\n<li><p>for empty <code>arr</code>, it will return <code>class</code> we passed as first argument in method.</p></li>\n<li><p>It will return <code>nil</code> in case of error. Error can occur if we use <code>pluck</code> which will return array (output which is not chain-able) or if we do not pass class as first parameter etc.</p></li>\n</ol>\n\n<p>More modification can be done for improvement in above &amp; avoid edge cases.</p>\n\n<p><strong>Note-2:</strong> improvements</p>\n\n<p>You can define this method as a class method for <code>Object</code> class also with one argument (i.e. array) and call directly on class like,</p>\n\n<pre><code># renamed to make concise\nArticle.chain_queries(arr)\nUser.chain_queries(arr)\n</code></pre>\n\n<p>Inside method, use <code>self</code> instead of <code>klass</code></p>\n"}, {"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 2, "last_activity_date": 1546847752, "creation_date": 1546847752, "answer_id": 54070452, "question_id": 54069409, "link": "https://stackoverflow.com/questions/54069409/ruby-rails-chain-unknown-number-of-method-calls/54070452#54070452", "title": "Ruby/Rails - Chain unknown number of method calls", "body": "<p>One convenient way would be to use a hash instead of a 2D array.</p>\n\n<p>Something like this</p>\n\n<pre><code>query = {\n  join: [:comments],\n  where: {:author =&gt; 'Bob'}\n}\n</code></pre>\n\n<p>This approach is not much complex and You don't need to worry if the key is not provided or is empty</p>\n\n<pre><code>Article.joins(query[:join]).where(query[:where])\n#=&gt; \"SELECT  `articles`.* FROM `articles` INNER JOIN `comments` ON `comments`.`article_id` = `articles`.`id` WHERE `articles`.`author` = 'Bob'\"\n</code></pre>\n\n<p>If the keys are empty or not present at all</p>\n\n<pre><code>query = {\n  join: []\n}\n\nArticle.joins(query[:join]).where(query[:where])\n#=&gt; \"SELECT  `articles`.* FROM `articles`\"\n</code></pre>\n\n<p>Or nested </p>\n\n<pre><code>query = {\n  join: [:comments],\n  where: {:author =&gt; 'Bob', comments: {author: 'Joe'}}\n}\n#=&gt; \"SELECT  `articles`.* FROM `articles` INNER JOIN `comments` ON `comments`.`article_id` = `articles`.`id` WHERE `articles`.`author` = 'Bob' AND `comments`.`author` = 'Joe'\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1546930211, "creation_date": 1546930211, "answer_id": 54086572, "question_id": 54069409, "link": "https://stackoverflow.com/questions/54069409/ruby-rails-chain-unknown-number-of-method-calls/54086572#54086572", "title": "Ruby/Rails - Chain unknown number of method calls", "body": "<pre><code>arr.inject(Articles){|articles, args| articles.send(*args)}\n</code></pre>\n"}], "owner": {"reputation": 677, "user_id": 3692993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58980e773a17b1c4258c5c143bb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "TFrazee", "link": "https://stackoverflow.com/users/3692993/tfrazee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54069841, "answer_count": 3, "score": 3, "last_activity_date": 1546930211, "creation_date": 1546842254, "question_id": 54069409, "link": "https://stackoverflow.com/questions/54069409/ruby-rails-chain-unknown-number-of-method-calls", "title": "Ruby/Rails - Chain unknown number of method calls", "body": "<p>I would like to dynamically create (potentially complex) Active Record queries from a 2D array passed into a method as an argument.  In other words, I'd like to take this:</p>\n\n<pre><code>arr = [\n    ['join', :comments],\n    ['where', :author =&gt; 'Bob']\n]\n</code></pre>\n\n<p>And create the equivalent of this:</p>\n\n<pre><code>Articles.join(:comments).where(:author =&gt; 'Bob')\n</code></pre>\n\n<p>One way to do this is:</p>\n\n<pre><code>Articles.send(*arr[0]).send(*arr[1])\n</code></pre>\n\n<p>But what if <code>arr</code> contains 3 nested arrays, or 4, or 5? A very unrefined way would be to do this:</p>\n\n<pre><code>case arr.length\n    when 1\n        Articles.send(*arr[0])\n    when 2\n        Articles.send(*arr[0]).send(*arr[1])\n    when 3\n        Articles.send(*arr[0]).send(*arr[1]).send(*arr[2])\n    # etc.\nend\n</code></pre>\n\n<p>But is there a cleaner, more succinct way (without having to hit the database multiple times)? Perhaps some way to construct a chain of method calls before executing them?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 1463, "user_id": 1776255, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/caf8d27b5a86675785da57a67fe450b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1776255/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1546838347, "creation_date": 1546838347, "answer_id": 54068886, "question_id": 54068867, "link": "https://stackoverflow.com/questions/54068867/single-gem-method-to-write-array-of-arrays-as-csv/54068886#54068886", "title": "Single gem/method to write array of arrays as csv", "body": "<p>Have a look into these resources;</p>\n\n<p><a href=\"https://github.com/ruby/csv\" rel=\"nofollow noreferrer\">https://github.com/ruby/csv</a></p>\n\n<p><a href=\"https://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html</a></p>\n\n<p>Also, this;</p>\n\n<p><a href=\"https://github.com/tilo/smarter_csv/tree/1.2-stable\" rel=\"nofollow noreferrer\">https://github.com/tilo/smarter_csv/tree/1.2-stable</a></p>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 3, "last_activity_date": 1546839484, "last_edit_date": 1546839484, "creation_date": 1546838488, "answer_id": 54068904, "question_id": 54068867, "link": "https://stackoverflow.com/questions/54068867/single-gem-method-to-write-array-of-arrays-as-csv/54068904#54068904", "title": "Single gem/method to write array of arrays as csv", "body": "<p>First generate the csv content:</p>\n\n<pre><code>require 'csv'\n\narr = [['apple', 'mango'], ['lily', 'rose']]\n# =&gt; [[\"apple\", \"mango\"], [\"lily\", \"rose\"]] \n\ncsv_content = CSV.generate(headers: false) { |csv| arr.each { |row| csv &lt;&lt; row } }\n# =&gt; \"apple,mango\\nlily,rose\\n\"\n</code></pre>\n\n<p>Then simply write the content to csv with:</p>\n\n<pre><code>File.write(\"my.csv\", csv_content)\n</code></pre>\n"}], "owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 54068904, "answer_count": 2, "score": 1, "last_activity_date": 1546839484, "creation_date": 1546838124, "question_id": 54068867, "link": "https://stackoverflow.com/questions/54068867/single-gem-method-to-write-array-of-arrays-as-csv", "title": "Single gem/method to write array of arrays as csv", "body": "<p>I have an array of arrays, where each inner array is a row of data. </p>\n\n<p>I would like to write this as a .csv file. </p>\n\n<p>I am aware of functions in languages other than Ruby that can write a csv in one short function, e.g. R has <code>write.csv(object, \"filename.csv\")</code></p>\n\n<p>Is there anything comparable in ruby? </p>\n\n<p>Note: I have used <a href=\"https://stackoverflow.com/questions/4822422/output-array-to-csv-in-ruby\">this</a> method, however, I would like something (much) sharper if such a method exists</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1546834586, "post_id": 54068469, "comment_id": 94969936, "body": "Maybe you have the same modal ids inside partials? Also, move modals rendering to the end of your page, it is bad idea to render them in the middle of &lt;body&gt;, wrapped in other tags"}, {"owner": {"reputation": 27, "user_id": 10735674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/414ca17d7299a6b1d18f728fcc74a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "Djjhjuser10735674", "link": "https://stackoverflow.com/users/10735674/djjhjuser10735674"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1546835086, "post_id": 54068469, "comment_id": 94970036, "body": "No They have different ids. I also moved them to the end of the page and still the same results"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 1, "creation_date": 1546835280, "post_id": 54068469, "comment_id": 94970079, "body": "Do you open modals with some custom js? If yes, add it to the question. Also add modal&#39;s code. Do you have any errors in js console?"}, {"owner": {"reputation": 27, "user_id": 10735674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/414ca17d7299a6b1d18f728fcc74a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "Djjhjuser10735674", "link": "https://stackoverflow.com/users/10735674/djjhjuser10735674"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1546881615, "post_id": 54068469, "comment_id": 94991231, "body": "yes the modals are open with some custom js. I have listed both the modal codes above. I have no errors in the js console in the browser. @Vasilisa"}], "answers": [{"tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": false, "score": 1, "last_activity_date": 1546906949, "creation_date": 1546906949, "answer_id": 54083718, "question_id": 54068469, "link": "https://stackoverflow.com/questions/54068469/ruby-on-rails-rending-two-forms-inside-a-page/54083718#54083718", "title": "ruby on rails rending two forms inside a page", "body": "<p>In both of your JavaScript snippets I can see the line</p>\n\n<pre><code>$('#modal').show();\n</code></pre>\n\n<p>There is:</p>\n\n<pre><code>  $('#add-provider-modal').click(function(){\n    $('#modal').show()\n  })\n</code></pre>\n\n<p>and</p>\n\n<pre><code>  $('#add-site-modal').click(function(){\n    $('#modal').show()\n  })\n</code></pre>\n\n<p>So when you click your Add Provider Modal or Add Site Model buttons, the same model, with the id \"modal\", will show.</p>\n\n<p>In the code you have supplied I can't find an element with the ID of \"modal\" so it must lie within your partials that you have not provided. I would recommend changing the partials to give them different IDs for the different modals and then updating your click handlers to open the correct one at the correct time.</p>\n"}], "owner": {"reputation": 27, "user_id": 10735674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/414ca17d7299a6b1d18f728fcc74a4f5?s=128&d=identicon&r=PG&f=1", "display_name": "Djjhjuser10735674", "link": "https://stackoverflow.com/users/10735674/djjhjuser10735674"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546906949, "creation_date": 1546834248, "last_edit_date": 1546881570, "question_id": 54068469, "link": "https://stackoverflow.com/questions/54068469/ruby-on-rails-rending-two-forms-inside-a-page", "title": "ruby on rails rending two forms inside a page", "body": "<p>I have two modals on one page. When clicked on button <code>Add Providers</code> one modal should pop up for that. When I clicked on <code>Add Hospital</code> another modal should pop up. However, no matter which button I clicked on only the modal for 'Providers' showed up? No idea why.\nModal 1 is happening from the render partial <code>provider_access_modal</code> and the second is supposeed to happen at rendering the partial <code>sites_access_modal</code></p>\n\n<pre><code>    &lt;%= render :partial =&gt; 'provider_access_modal' %&gt; ##Modal 1\n    &lt;%= render :partial =&gt; 'shared/side_menu' %&gt;\n    &lt;div id=\"profiles\" class=\"container-main\"&gt;\n        &lt;%= render :partial =&gt; 'patients/top_bar' %&gt;\n        &lt;div class=\"top-space\"&gt;&lt;/div&gt;\n        &lt;div class=\"flash\"&gt;\n            &lt;%- flash.each do |name, msg| -%&gt;\n                &lt;%= content_tag :div, msg, :class =&gt; \"flash_#{name}\" if msg.is_a?(String) %&gt;\n            &lt;%- end -%&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"content-container your-sites\"&gt;\n            &lt;div class=\"header\"&gt;\n                &lt;div class=\"icon-circle\"&gt;&lt;div class=\"icon\"&gt;&lt;%= image_tag \"my-providers-2x.png\" %&gt;&lt;/div&gt;&lt;/div&gt;\n                &lt;div class=\"title\"&gt;Your Providers&lt;/div&gt;\n                &lt;div class=\"button-wrapper\"&gt;\n                    &lt;%= button_tag \"Add Provider\", class:\"add-button\", id: 'add-provider-modal' %&gt;\n                    &lt;div class=\"push\"&gt;&lt;/div&gt;\n                &lt;/div&gt;&lt;!--button-wrapper--&gt;\n            &lt;/div&gt;&lt;!--header--&gt;\n            &lt;div class=\"body\"&gt;\n                    &lt;div class=\"no-records\"&gt;\n                        &lt;%= image_tag \"icon-no-records\", class: \"image\" %&gt;\n                        &lt;div class=\"text\"&gt;You have no providers.&lt;/div&gt;\n                    &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n\n        &lt;%= render :partial =&gt; 'sites_access_modal' %&gt; ##Modal 2\n        &lt;div class=\"content-container your-sites\"&gt;\n            &lt;div class=\"header\"&gt;\n                &lt;div class=\"icon-circle\"&gt;&lt;div class=\"icon\"&gt;&lt;%= image_tag \"hospitalizations-icon-2x.png\" %&gt;&lt;/div&gt;&lt;/div&gt;\n                &lt;div class=\"title\"&gt;Your Hospitals&lt;/div&gt; \n                &lt;div class=\"button-wrapper\"&gt;\n\n                    &lt;%= button_tag \"Add Hospital\", class:\"add-button\", id: 'add-site-modal' %&gt;\n                    &lt;div class=\"push\"&gt;&lt;/div&gt;\n                &lt;/div&gt;&lt;!--button-wrapper--&gt;\n            &lt;/div&gt;&lt;!--header--&gt;\n            &lt;div class=\"body\"&gt;\n                &lt;% if @active_memberships.count &gt; 0 %&gt;\n                    &lt;table&gt;\n                      &lt;thead&gt;\n                        &lt;tr&gt;\n                          &lt;th&gt;Hospital Name&lt;/th&gt;\n                          &lt;th&gt;Actions&lt;/th&gt;\n                        &lt;/tr&gt;\n                      &lt;/thead&gt;\n                      &lt;tbody&gt;\n                        &lt;% @active_memberships.each do |membership| %&gt;\n                          &lt;tr&gt;\n                            &lt;td&gt;&lt;%= membership.site.name %&gt;&lt;/td&gt;\n                            &lt;td&gt;\n                                &lt;%= link_to patient_remove_membership_path(id: current_user.id, membership_id: membership.id), method: :put, :data =&gt; {:confirm =&gt; 'Are you sure you want to leave this site?'}, class: \"btn\" do %&gt;Leave Hospital&lt;% end %&gt;\n                            &lt;/td&gt;\n                          &lt;/tr&gt;\n                        &lt;% end %&gt;\n                      &lt;/tbody&gt;\n                    &lt;/table&gt;\n                &lt;% else %&gt;\n                    &lt;div class=\"no-records\"&gt;\n                        &lt;%= image_tag \"icon-no-records\", class: \"image\" %&gt;\n                        &lt;div class=\"text\"&gt;You have no sites.&lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;% end %&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n\n    &lt;/div&gt;\n</code></pre>\n\n<p>Here is my provider-select.js code</p>\n\n<pre><code>function providerSearch(input) {\n  if (input.val()) {\n    var params = {\n      \"provider_search\": {\n        \"query\": input.val()\n      }\n    }\n    $.post(\"/providers/search\", params, function(data, status) {\n      $(\".auto-complete-modal-list .content\").html(data)\n      if (data.length == 0) {\n        var notFound = $('&lt;div&gt;', {\n          'text': 'No provider found, please invite a provider below',\n          'class': 'item'\n        });\n        $(\".auto-complete-modal-list .content\").empty().append(notFound)\n      }\n    }, \"html\");\n  } else {\n    $(\".auto-complete-modal-list .content\").empty()\n  }\n}\n\nfunction providerSelection(event) {\n  let targetProvider = null;\n  if ($(event.target).is('button')) {\n    targetProvider = $(event.target);\n  }\n  if (targetProvider != null) {\n    let providerEmail = targetProvider.closest('.item').data(\"email\")\n    let providerName = targetProvider.closest('.item').data(\"name\")\n    $('#provider-selection .item').removeAttr('style').find('button').text(\"Select\");\n    targetProvider.text(\"Selected\")\n    targetProvider.closest('.item').css({\n      \"background-color\": \"rgb(86, 116, 204, .8)\"\n    })\n    $(\"#invite-label\").fadeOut(function() {\n      $(this).text(`You are inviting ${providerName} to sign this document`).fadeIn(100);\n    });\n    $('#invite_email').val(providerEmail)\n  }\n}\n$(document).on('turbolinks:load', function() {\n  $(\"#provider-select .input-search\").on(\"keyup\", function(e) {\n    providerSearch($(this));\n  });\n  $(\"#provider-selection\").on(\"click\", function(e) {\n    providerSelection(e);\n  });\n  $('#invite_email').blur(function() {\n    let cantFindText = \"Can't find your provider? Invite them via email below\"\n    if (!$.trim(this.value).length) {\n      if ($('label').text() != cantFindText) {\n        $(\"#invite-label\").fadeOut(function() {\n          $(this).text(cantFindText).fadeIn(40);\n        });\n      }\n    }\n  });\n  // for add provider access\n  $('#add-provider-modal').click(function(){\n    $('#modal').show()\n  })\n});\n</code></pre>\n\n<p>And then here is my site-select.js code</p>\n\n<pre><code>function siteSearch(input) {\n  if (input.val()) {\n    var params = {\n      \"sites_search\": {\n        \"query\": input.val()\n      }\n    }\n    $.post(\"/sites/search\", params, function(data, status) {\n      $(\".auto-complete-modal-list .content\").html(data)\n      if (data.length == 0) {\n        var notFound = $('&lt;div&gt;', {\n          'text': 'No sites found',\n          'class': 'item'\n        });\n        $(\".auto-complete-modal-list .content\").empty().append(notFound)\n      }\n    }, \"html\");\n  } else {\n    $(\".auto-complete-modal-list .content\").empty()\n  }\n}\n\nfunction siteSelection(event) {\n  let targetSite = null;\n  if ($(event.target).is('button')) {\n    targetSite = $(event.target);\n  }\n  if (targetSite != null) {\n    let siteId = targetSite.closest('.item').data(\"id\")\n    $('#site-selection .item').removeAttr('style').find('button').text(\"Add\");\n    targetSite.text(\"Added\")\n    targetSite.closest('.item').css({\n      \"background-color\": \"rgb(86, 116, 204, .8)\"\n    })\n }\n}\n$(document).on('turbolinks:load', function() {\n  $(\"#site-select .input-search\").on(\"keyup\", function(e) {\n    siteSearch($(this));\n  });\n  $(\"#site-selection\").on(\"click\", function(e) {\n    siteSelection(e);\n  });\n  $('#add-site-modal').click(function(){\n    $('#modal').show()\n  })\n});\n</code></pre>\n"}, {"tags": ["ruby", "glob"], "comments": [{"owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1546829765, "post_id": 54067828, "comment_id": 94969129, "body": "Guess still missing this function in ruby: <a href=\"https://bugs.ruby-lang.org/issues/8258\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/issues/8258</a> <a href=\"https://stackoverflow.com/questions/14127343/why-dir-glob-in-ruby-doesnt-see-files-in-folders-named-with-square-brackets\" title=\"why dir glob in ruby doesnt see files in folders named with square brackets\">stackoverflow.com/questions/14127343/&hellip;</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1546841646, "post_id": 54067828, "comment_id": 94971574, "body": "If you don&#39;t mind using Unix <code>find</code> tool ... <code>%x{find &quot;#{dir}&quot;}.split(&quot;\\n&quot;)</code> ... you can add <code>-type f</code> after the <code>#{dir}</code> to return only files"}], "answers": [{"tags": [], "owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "is_accepted": false, "score": 0, "last_activity_date": 1579739608, "creation_date": 1579739608, "answer_id": 59870138, "question_id": 54067828, "link": "https://stackoverflow.com/questions/54067828/list-all-paths-recursively-when-name-of-top-directory-may-contain-glob-character/59870138#59870138", "title": "List all paths recursively when name of top directory may contain glob characters", "body": "<p><a href=\"https://ruby-doc.org/stdlib-2.7.0/libdoc/pathname/rdoc/Pathname.html\" rel=\"nofollow noreferrer\"><code>Pathname</code></a> can do it:</p>\n\n<pre><code>require 'pathname'\n\ndir = '/tmp/test[folder]ing'\nPathname(dir).glob('**/*')\n</code></pre>\n"}], "owner": {"reputation": 4220, "user_id": 1661012, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/abc04c76810d98405fc0f27f96c6c5e5?s=128&d=identicon&r=PG", "display_name": "user137369", "link": "https://stackoverflow.com/users/1661012/user137369"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1579739608, "creation_date": 1546827203, "question_id": 54067828, "link": "https://stackoverflow.com/questions/54067828/list-all-paths-recursively-when-name-of-top-directory-may-contain-glob-character", "title": "List all paths recursively when name of top directory may contain glob characters", "body": "<p>In Ruby, we can recursively list all the contents of a directory like so:</p>\n\n<pre><code>dir = '/tmp'\nDir.glob(\"#{dir}/**/*\") # Works\n</code></pre>\n\n<p>However, this fails if the directory has glob characters in its name</p>\n\n<pre><code>dir = '/tmp/test[folder]ing'\nDir.glob(\"#{dir}/**/*\") # Does not work\n</code></pre>\n\n<p>One solution when we don\u2019t know the name of the directory that will be passed to our script (e.g. when it\u2019s given as an argument), is to preemptively escape problematic characters from its name</p>\n\n<pre><code>dir = '/tmp/test[folder]ing'\nescaped_dir = dir.gsub(/([\\*\\?\\[\\]{}\\\\])/, '\\\\\\\\\\1')\nDir.glob(\"#{escaped_dir}/**/*\") # Works\n</code></pre>\n\n<p>This works but it\u2019s a bit ugly, feels hacky, and requires keeping track of two variables for slightly different things (the unescaped name is useful for other operations).</p>\n\n<p>Are there other solutions to this same problem (that ideally wouldn\u2019t be too slow to run in comparison)?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1546848729, "post_id": 54067371, "comment_id": 94973929, "body": "Note that this is <i>exactly the same thing</i> as doing <code>hsh.each {|key, value|}</code> where <code>hsh</code> is some <code>Hash</code>, since <code>Hash#each</code>, like <i>all</i> implementations of <code>each</code> only ever <code>yield</code>s a single value per iteration, in this case a two-element <code>Array</code> whose first element is the key and second element is the value."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1546883161, "post_id": 54067371, "comment_id": 94991992, "body": "It&#39;s called <a href=\"https://docs.ruby-lang.org/en/2.1.0/syntax/assignment_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">&quot;array decomposition&quot;</a>. That <a href=\"https://docs.ruby-lang.org/en/2.1.0/syntax/assignment_rdoc.html\" rel=\"nofollow noreferrer\">entire doc</a> is well worth a read. In this case, when, say, <code>[3, 4]</code> is passed to the block, Ruby computes <code>a, b = [3, 4]</code>. Try that in IRB or PRY and you&#39;ll see <code>a</code> is set to <code>3</code> and <code>b</code> is set to <code>4</code>. If the block variables were written <code>|a, (b, c)|</code> and <code>[3, [4, 5]]</code> were passed to the block the calculation would be <code>a, (b, c) = [3, [4, 5]]</code>, which results in <code>a #=&gt; 3</code>, <code>b #=&gt; 4</code> and <code>c #=&gt; 5</code>."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1546855179, "post_id": 54067478, "comment_id": 94976950, "body": "<i>&quot;If the right-hand-side is an array and the left-hand-side has multiple variables, the array is splatted&quot;</i> \u2013 this isn&#39;t documented, is it?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1546856147, "post_id": 54067478, "comment_id": 94977496, "body": "@Stefan It probably is somewhere. I don&#39;t remember where I read about it first. Maybe not in those words; but there is a clear difference in semantics of <code>a = [1, 2]</code> and <code>a, b = [1, 2]</code> - the first assigns the array, the second assigns its elements."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1546856911, "post_id": 54067478, "comment_id": 94977943, "body": "<code>(a, b) = [1, 2]</code> is documented, but not the implicit form without parentheses. I&#39;ve opened a <a href=\"https://bugs.ruby-lang.org/issues/15514\" rel=\"nofollow noreferrer\">ticket</a>."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1546940777, "post_id": 54067478, "comment_id": 95010442, "body": "@Stefan I might miss something, but isn&#39;t at leat the deconstruction on assignment documented just above the section you linked to, i.e. <a href=\"http://ruby-doc.org/core-2.6/doc/syntax/assignment_rdoc.html#label-Multiple+Assignment\" rel=\"nofollow noreferrer\">here</a>?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1546940921, "post_id": 54067478, "comment_id": 95010525, "body": "@HolgerJust: No - <code>a, b = 1, 2</code> is documented there (with multiple lvalues being assigned multiple rvalues); but not <code>a, b = [1, 2]</code> (multiple lvalues being assigned a single array)."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 5, "last_activity_date": 1546824547, "last_edit_date": 1546824547, "creation_date": 1546823600, "answer_id": 54067478, "question_id": 54067371, "link": "https://stackoverflow.com/questions/54067371/how-does-ruby-array-count-handle-multiple-block-arguments/54067478#54067478", "title": "How does Ruby Array #count handle multiple block arguments", "body": "<p>Just like assignments, there's a (not-so-) secret shortcut. If the right-hand-side is an array and the left-hand-side has multiple variables, the array is splatted, so the following two lines are identical:</p>\n\n<pre><code>a, b, c = [1, 2, 3]\na, b, c = *[1, 2, 3]\n</code></pre>\n\n<p>While not the same thing, blocks have something in the same vein, when the yielded value is an array, and there are multiple parameters. Thus, these two blocks will act the same when you <code>yield [1, 2, 3]</code>:</p>\n\n<pre><code>do |a, b, c|\n  ...\nend\n\ndo |(a, b, c)|\n  ...\nend\n</code></pre>\n\n<p>So, in your case, the value gets deconstructed, as if you wrote this:</p>\n\n<pre><code>[[1,1], [2,2], [3,4]].count {|(a,b)| a != b} # =&gt; 1\n</code></pre>\n\n<p>If you had another value that you are passing along with the array, you would have to specify the structure explicitly, as the deconstruction of the array would not be automatic in the way we want:</p>\n\n<pre><code>[[1,1], [2,2], [3,4]].each.with_index.count {|e,i| i + 1 == e[1] }\n# automatic deconstruction of [[1,1],0]:\n# e=[1,1]; i=0\n\n[[1,1], [2,2], [3,4]].each.with_index.count {|(a,b),i| i + 1 == b }\n# automatic deconstruction of [[1,1],0], explicit deconstruction of [1,1]:\n# a=1; b=1; i=0\n\n[[1,1], [2,2], [3,4]].each.with_index.count {|a,b,i| i + 1 == b }\n# automatic deconstruction of [[1,1],0]\n# a=[1,1]; b=0; i=nil\n# NOT what we want\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1546860420, "post_id": 54070613, "comment_id": 94979751, "body": "Fun fact: YARV&#39;s <code>Hash#each</code> actually yields two values when the block takes multiple arguments (and an array otherwise). Probably for performance reasons to avoid the to-array/from-array conversion."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1546860833, "post_id": 54070613, "comment_id": 94979979, "body": "Ah, you&#39;re right, I remember that there was some discussion about checking the arity of the block. This is one of those cases where YARV makes some &quot;unfair&quot; optimizations that are not available to user code. If you wanted to do the same thing in user code, you would need to first convert the block to a proc so you can call <code>Proc#arity</code> or <code>Proc#parameters</code> on it, which would completely negate any performance advantage you would get from not constructing the array. Note, however, that there will also be another difference when you pass a lambda with <code>&amp;</code>, I think."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1546860871, "post_id": 54070613, "comment_id": 94980002, "body": "The whole parameter binding thing with regards to blocks, procs converted to blocks, and lambdas converted to blocks is a bit of a mess."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1546860992, "post_id": 54070613, "comment_id": 94980064, "body": "Note also that this is really a YARV-specific optimization. E.g. JRuby already optimizes away the array in all of the more general cases, i.e. destructuring assignment, multiple value return, block parameter binding, etc."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 4, "last_activity_date": 1546848605, "creation_date": 1546848605, "answer_id": 54070613, "question_id": 54067371, "link": "https://stackoverflow.com/questions/54067371/how-does-ruby-array-count-handle-multiple-block-arguments/54070613#54070613", "title": "How does Ruby Array #count handle multiple block arguments", "body": "<blockquote>\n  <p>I have looked at the documentation for Array.count and Enumerable.count and the only example given with a block uses a single block argument ...</p>\n</blockquote>\n\n<p>Ruby, like almost all mainstream programming languages, does not allow user code to change the fundamental semantics of the language. In other words, you won't find anything about block formal parameter binding semantics in the documentation of <code>Array#count</code>, because block formal parameter binding semantics are specified by the Ruby Language Specification and <code>Array#count</code> cannot possibly change that.</p>\n\n<blockquote>\n  <p>What I don't understand is how this is accomplished.</p>\n</blockquote>\n\n<p>This has nothing to do with <code>Array#count</code>. This is just standard block formal parameter binding semantics for block formal parameters.</p>\n\n<p>Formal parameter binding semantics for block formal parameters are different from formal parameter binding semantics for method formal parameters. In particular, they are much more flexible in how they handle mismatches between the number of formal parameters and actual arguments.</p>\n\n<ul>\n<li>If there is exactly one block formal parameter and you <code>yield</code> more than one block actual argument, the block formal parameter gets bound to an <code>Array</code> containing the block actual arguments.</li>\n<li><strong>If there are more than one block formal parameters and you <code>yield</code> exactly one block actual argument, and that one actual argument is an <code>Array</code>, then the block formal parameters get bound to the individual elements of the <code>Array</code>.</strong> (This is what you are seeing in your example.)</li>\n<li>If you <code>yield</code> more block actual arguments than the block has formal parameters, the extra actual arguments get ignored.</li>\n<li>If you pass fewer actual arguments than the block has formal parameters, then those extra formal parameters are defined but not bound, and evaluate to <code>nil</code> (just like defined but unitialized local variables).</li>\n</ul>\n\n<p>If you look closely, you can see that the formal parameter binding semantics for block formal parameters are much closer to assignment semantics, i.e. you can imagine an assignment with the block formal parameters on the left-hand side of the assignment operator and the block actual arguments on the right-hand side.</p>\n\n<p>If you have a block defined like this:</p>\n\n<pre><code>{|a, b, c|}\n</code></pre>\n\n<p>and are <code>yield</code>ing to it like this:</p>\n\n<pre><code>yield 1, 2, 3, 4\n</code></pre>\n\n<p>you can almost imagine the block formal parameter binding to work like this:</p>\n\n<pre><code>a, b, c = 1, 2, 3, 4\n</code></pre>\n\n<p>And if, as is the case in your question, you have a block defined like this:</p>\n\n<pre><code>{|a, b|}\n</code></pre>\n\n<p>and are <code>yield</code>ing to it like this:</p>\n\n<pre><code>yield [1, 2]\n</code></pre>\n\n<p>you can almost imagine the block formal parameter binding to work like this:</p>\n\n<pre><code>a, b = [1, 2]\n</code></pre>\n\n<p>Which of course, as you well know, will have this result:</p>\n\n<pre><code>a #=&gt; 1\nb #=&gt; 2\n</code></pre>\n\n<p>Fun fact: up to Ruby 1.8, block formal parameter binding <em>was</em> using <em>actual</em> assignment! You could, for example, define a constant, an instance variable, a class variable, a global variable, and even an attribute writer(!!!) as a formal parameter, and when you <code>yield</code>ed to that block, Ruby would <em>literally</em> perform the assignment:</p>\n\n<pre><code>class Foo\n  def bar=(value)\n    puts \"`#{__method__}` called with `#{value.inspect}`\"\n    @bar = value\n  end\n\n  attr_reader :bar\nend\n\ndef set_foo\n  yield 42\nend\n\nfoo = Foo.new\n\nset_foo {|foo.bar|}\n# `bar=` called with `42`\n\nfoo.bar\n#=&gt; 42\n</code></pre>\n\n<p>Pretty crazy, huh?</p>\n\n<p>The most widely-used application of these block formal parameter binding semantics is when using <code>Hash#each</code> (or any of the <code>Enumerable</code> methods with a <code>Hash</code> instance as the receiver). The <code>Hash#each</code> method <code>yield</code>s a single two-element <code>Array</code> containing the key and the value as an actual argument to the block, but we almost always treat it as if it were <code>yield</code>ing the key and value as separate actual arguments. Usually, we prefer writing </p>\n\n<pre><code>hsh.each do |k, v|\n  puts \"The key is #{k} and the value is #{v}\"\nend\n</code></pre>\n\n<p>over </p>\n\n<pre><code>hsh.each do |key_value_pair|\n  k, v = key_value_pair\n  puts \"The key is #{k} and the value is #{v}\"\nend\n</code></pre>\n\n<p>And that is <em>exactly</em> equivalent to what you are seeing in your question. I bet you have never asked yourself why you can pass a block with two block formal parameters to <code>Hash#each</code> even though it only <code>yield</code>s a single <code>Array</code>? Well, this case is <em>exactly the same</em>. You are passing a block with two block formal parameters to a method that <code>yield</code>s a single <code>Array</code> per iteration.</p>\n"}], "owner": {"reputation": 100, "user_id": 10463251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff958d5dc3d428d04f1cce2f80433712?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin W.", "link": "https://stackoverflow.com/users/10463251/kevin-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 54067478, "answer_count": 2, "score": 1, "last_activity_date": 1546930427, "creation_date": 1546822433, "last_edit_date": 1546930427, "question_id": 54067371, "link": "https://stackoverflow.com/questions/54067371/how-does-ruby-array-count-handle-multiple-block-arguments", "title": "How does Ruby Array #count handle multiple block arguments", "body": "<p>When I execute the following:</p>\n\n<pre><code>[[1,1], [2,2], [3,4]].count {|a,b| a != b} # =&gt; 1\n</code></pre>\n\n<p>the block arguments <code>a</code>, <code>b</code> are assigned to the first and the second values of each inner array respectively. I don't understand how this is accomplished.</p>\n\n<p>The only example given in the documentation for <code>Array#count</code> and <code>Enumerable#count</code> with a block uses a single block argument:</p>\n\n<pre><code>ary.count {|x| x % 2 == 0} # =&gt; 3\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 0, "creation_date": 1546824367, "post_id": 54067225, "comment_id": 94968209, "body": "yes, have a look at rails ujs <a href=\"https://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/working_with_javascript_in_rails.html</a>"}, {"owner": {"reputation": 1100, "user_id": 119041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/de94f318bb1f473331fe4b72c141eddb?s=128&d=identicon&r=PG", "display_name": "afilbert", "link": "https://stackoverflow.com/users/119041/afilbert"}, "edited": false, "score": 0, "creation_date": 1546831417, "post_id": 54067225, "comment_id": 94969378, "body": "Sounds like you wanna do some ajax goodness. I&#39;d encourage you to check out a front-end framework like Vue or maybe Ember, and then think about the browser-request NPM package. <a href=\"https://www.npmjs.com/package/browser-request\" rel=\"nofollow noreferrer\">npmjs.com/package/browser-request</a>"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546840228, "post_id": 54067225, "comment_id": 94971180, "body": "flagged because you need to read ajax and page chaching (too broad)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1546844223, "post_id": 54067225, "comment_id": 94972400, "body": "What do you want to achieve by only updating parts of the page? Do you aim for faster page loads? Is it worth it to have more complex code and fighting Rails conventions?"}], "owner": {"reputation": 21, "user_id": 7237898, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c809043b04e2ea5d549389cce53636c?s=128&d=identicon&r=PG&f=1", "display_name": "Chionn K", "link": "https://stackoverflow.com/users/7237898/chionn-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546820966, "creation_date": 1546820966, "question_id": 54067225, "link": "https://stackoverflow.com/questions/54067225/how-to-make-rails-reload-only-yield-part", "title": "How to make rails reload only yield part?", "body": "<p>I have a fixed header for every page on my rails app. Is there any way that when I click every link_to to whatever source only refresh the yield part?  </p>\n\n<pre><code>&lt;html&gt;\n  &lt;body&gt;\n  &lt;%= render 'layouts/header' %&gt;\n&lt;div class=\"row\"&gt;\n &lt;div&gt;\n   &lt;%= yield %&gt;\n &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>\n  </p>\n\n<p>The current code make each link refresh whole page including the header </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "simple-form", "collection-select"], "answers": [{"tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": true, "score": 0, "last_activity_date": 1546821003, "creation_date": 1546821003, "answer_id": 54067231, "question_id": 54067172, "link": "https://stackoverflow.com/questions/54067172/collection-select-does-not-respond-to-input-html-multiple-true/54067231#54067231", "title": "Collection_Select Does Not Respond to Input_HTML: {Multiple: True}", "body": "<p><code>.permit(....recipe_ids: [])</code></p>\n\n<p>You need to update the permitted parameters in your controller.  Now that you are sending multiple selections the parameter needs to be marked as expecting an array.</p>\n"}], "owner": {"reputation": 77, "user_id": 10304792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/390a35e9e2e8a287a260f9569e8a1483?s=128&d=identicon&r=PG&f=1", "display_name": "dsteinbr1", "link": "https://stackoverflow.com/users/10304792/dsteinbr1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 54067231, "answer_count": 1, "score": 1, "last_activity_date": 1546827067, "creation_date": 1546820458, "last_edit_date": 1546827067, "question_id": 54067172, "link": "https://stackoverflow.com/questions/54067172/collection-select-does-not-respond-to-input-html-multiple-true", "title": "Collection_Select Does Not Respond to Input_HTML: {Multiple: True}", "body": "<p>I am attempting to create a feature where users can add an existing record, <code>recipe</code>, to a collection of records, <code>menu</code>. I am using collection_select with a simple_form to allow users to select multiple records from a list however, the form is not responding to the <code>input_html: { multiple: true }</code> option, which should allow users to select multiple values. The form is as below, please let me know if any other code would be helpful for context.</p>\n\n<p>Form:</p>\n\n<pre><code>&lt;%= simple_form_for @menu, local: true do |f| %&gt;\n\n  &lt;%= f.label :title, :class =&gt; \"form-component-header\" %&gt;\n  &lt;%= f.text_field :title, :class =&gt; \"form-field\" %&gt;\n\n  &lt;%= f.label :recipe_ids %&gt;\n  &lt;%= f.collection_select :recipe_ids, f.object.user.recipes, :id, :title, input_html: { multiple: true } %&gt;\n\n  &lt;%= f.submit :class =&gt; \"form_button\" %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 3, "creation_date": 1546819325, "post_id": 54066875, "comment_id": 94967440, "body": "Welcome to stackoverflow. Rather than posting the raw rspec output you should post the source code for the three failing specs, the source code for the methods being tested, and the output + stack trace for the failures. You can print the backtrace with <code>rspec --backtrace</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1546820582, "post_id": 54066875, "comment_id": 94967608, "body": "It might be a ruby version issue. Normally you pass a block to <code>all?</code> e.g. <code>arr.all? { |el| el.is_a?(Array) }</code> or <code>arr.all? { |el| el =~ &#47;[01]&#47; }</code>. Possibly the shorthand versions you&#39;re using are supported with some ruby versions and not others. I&#39;d recommend using the block versions I mentioned. You can try running <code>ruby -v</code> locally and on Cloud 9 to see the difference."}, {"owner": {"reputation": 63, "user_id": 9640436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WiTE.jpg?s=128&g=1", "display_name": "tripolon", "link": "https://stackoverflow.com/users/9640436/tripolon"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546824488, "post_id": 54066875, "comment_id": 94968228, "body": "@anothermh - I&#39;ve added those except for the output + stack trace. In cloud9, I can&#39;t select the terminal text formatted as lines, so it&#39;s a (long) mess. Once I figure out how to get it formatted, I&#39;ll add it."}, {"owner": {"reputation": 63, "user_id": 9640436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WiTE.jpg?s=128&g=1", "display_name": "tripolon", "link": "https://stackoverflow.com/users/9640436/tripolon"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1546825188, "post_id": 54066875, "comment_id": 94968361, "body": "@max-pleaner: this just might be it. It was version 2.5.3 local, 2.4.1 in the cloud. The docs for all? for 2.4.1 show only blocks as arguments. Maybe write this as an answer?  Update: this was it! Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1546838262, "creation_date": 1546838262, "answer_id": 54068877, "question_id": 54066875, "link": "https://stackoverflow.com/questions/54066875/ruby-rspec-tests-fail-method-not-defined-but-pass-on-local-ide/54068877#54068877", "title": "Ruby - rspec tests fail (method not defined) but pass on local IDE", "body": "<p>The argument signatures</p>\n\n<pre><code>arr.all?(Integer)\narr.all?(/[01]/)\n</code></pre>\n\n<p>are only supported in Ruby 2.5. You can see this blog post which discusses it </p>\n\n<p><a href=\"https://blog.bigbinary.com/2018/01/02/ruby-2-5-enumerable-predicates-accept-pattern-argument.html\" rel=\"nofollow noreferrer\">https://blog.bigbinary.com/2018/01/02/ruby-2-5-enumerable-predicates-accept-pattern-argument.html</a></p>\n\n<p>In older versions of Ruby you must pass a block to <code>all?</code>, e.g.:</p>\n\n<pre><code>arr.all? { |el| el.is_a?(Integer) }\narr.all? { |el| el =~ /[01]/ }\n</code></pre>\n\n<p>From your comment it seems that your local Ruby environment and cloud 9 are running different versions. </p>\n"}], "owner": {"reputation": 63, "user_id": 9640436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WiTE.jpg?s=128&g=1", "display_name": "tripolon", "link": "https://stackoverflow.com/users/9640436/tripolon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 54068877, "answer_count": 1, "score": 1, "last_activity_date": 1546838262, "creation_date": 1546817479, "last_edit_date": 1546824478, "question_id": 54066875, "link": "https://stackoverflow.com/questions/54066875/ruby-rspec-tests-fail-method-not-defined-but-pass-on-local-ide", "title": "Ruby - rspec tests fail (method not defined) but pass on local IDE", "body": "<p>I've written some simple methods in ruby (not rails) and have tested them using regular rspec. They all pass on my system, but two of them fail in the course autograder AND if I run them on cloud9. How can that be? I've searched for any special issues with rspec on Windows, but there aren't any since at least ver 3.2.(I'm using 3.8)</p>\n\n<p>Here's the output within my IDE:</p>\n\n<pre><code>    $ rspec\n\nRuby intro part 1\n  #sum\n    should be defined\n    returns correct sum [20 points]\n    works on the empty array [10 points]\n  #max_2_sum\n    should be defined\n    returns the correct sum [7 points]\n    works even if 2 largest values are the same [3 points]\n    returns zero if array is empty [10 points]\n    returns value of the element if just one element [10 points]\n  #sum_to_n\n    should be defined\n    returns true when any two elements sum to the second argument [30 points]\n    returns false for any single element array [5 points]\n    returns false for an empty array [5 points]\n\n#hello\n  should be defined\n  The hello method returns the correct string [30 points]\n\n#starts_with_consonant?\n  should be defined\n  classifies true cases [10 points]\n  classifies false cases [10 points]\n  works on the empty string [5 points]\n  works on nonletters [5 points]\n\n#binary_multiple_of_4?\n  should be defined\n  classifies valid binary numbers [30 points]\n  rejects invalid binary numbers [10 points]\n\nBookInStock\n  should be defined\n  getters and setters\n    should set ISBN [10 points]\n    should set price [10 points]\n    should be able to change ISBN [10 points]\n    should be able to change price [10 points]\n  constructor\n    should reject invalid ISBN number [10 points]\n    should reject zero price [10 points]\n    should reject negative price [10 points]\n  #price_as_string\n    should be defined\n    should display 33.95 as \"$33.95\" [10 points]\n    should display 1.1 as $1.10 [10 points]\n    should display 20 as $20.00 [10 points]\n\nFinished in 0.03195 seconds (files took 0.30126 seconds to load)\n34 examples, 0 failures\n</code></pre>\n\n<p>Now from the grader...</p>\n\n<pre><code>Ruby intro part 1\n  #sum\n    should be defined\n    returns correct sum [20 points]\n    works on the empty array [10 points]\n  #max_2_sum\n    should be defined (FAILED - 1)\n    returns the correct sum [7 points] (FAILED - 2)\n    works even if 2 largest values are the same [3 points] (FAILED - 3)\n    returns zero if array is empty [10 points] (FAILED - 4)\n    returns value of the element if just one element [10 points] (FAILED - 5)\n  #sum_to_n\n    should be defined\n    returns true when any two elements sum to the second argument [30 points]\n    returns false for the single element array [5 points]\n    returns false for the empty array [5 points]\n\nFailures:\n\n  1) Ruby intro part 1 #max_2_sum should be defined\n     Failure/Error: expect { max_2_sum([1,2,3]) }.not_to raise_error\n\n       expected no Exception, got # with backtrace:\n\n  2) Ruby intro part 1 #max_2_sum returns the correct sum [7 points]\n     Failure/Error: raise 'NonInteger' if arr.all?(Integer) == false\n\n     ArgumentError:\n       wrong number of arguments (1 for 0)\n\n  3) Ruby intro part 1 #max_2_sum works even if 2 largest values are the same [3 points]\n     Failure/Error: raise 'NonInteger' if arr.all?(Integer) == false\n\n     ArgumentError:\n       wrong number of arguments (1 for 0)\n\n  4) Ruby intro part 1 #max_2_sum returns zero if array is empty [10 points]\n     Failure/Error: raise 'NonInteger' if arr.all?(Integer) == false\n\n     ArgumentError:\n       wrong number of arguments (1 for 0)\n\n  5) Ruby intro part 1 #max_2_sum returns value of the element if just one element [10 points]\n     Failure/Error: raise 'NonInteger' if arr.all?(Integer) == false\n\n     ArgumentError:\n       wrong number of arguments (1 for 0)\n\nFinished in 0.01805 seconds (files took 11744 minutes 10 seconds to load)\n12 examples, 5 failures\n\nFailed examples:\n\nrspec your_code.rb:157 # Ruby intro part 1 #max_2_sum should be defined\nrspec your_code.rb:160 # Ruby intro part 1 #max_2_sum returns the correct sum [7 points]\nrspec your_code.rb:164 # Ruby intro part 1 #max_2_sum works even if 2 largest values are the same [3 points]\nrspec your_code.rb:167 # Ruby intro part 1 #max_2_sum returns zero if array is empty [10 points]\nrspec your_code.rb:170 # Ruby intro part 1 #max_2_sum returns value of the element if just one element [10 points]\n\nBookInStock\n  should be defined\n  getters and setters\n    should set ISBN [10 points]\n    should set price [10 points]\n    should be able to change ISBN [10 points]\n    should be able to change price [10 points]\n  constructor\n    should reject invalid ISBN number [10 points]\n    should reject zero price [10 points]\n    should reject negative price [10 points]\n  #price_as_string\n    should be defined\n    should display 33.95 as \"$33.95\" [10 points]\n    should display 1.1 as $1.10 [10 points]\n    should display 20 as $20.00 [10 points]\n\nFinished in 0.00328 seconds (files took 11744 minutes 10 seconds to load)\n12 examples, 0 failures\n\n#hello\n  should be defined\n  The hello method returns the correct string [30 points]\n\n#starts_with_consonant?\n  should be defined\n  classifies true cases [10 points]\n  classifies false cases [10 points]\n  works on the empty string [5 points]\n  works on nonletters [5 points]\n\n#binary_multiple_of_4?\n  should be defined (FAILED - 1)\n  classifies valid binary numbers [30 points] (FAILED - 2)\n  rejects invalid binary numbers [10 points] (FAILED - 3)\n\nFailures:\n\n  1) #binary_multiple_of_4? should be defined\n     Failure/Error: expect { binary_multiple_of_4?(\"yes\") }.not_to raise_error()#::NoMethodError)\n\n       expected no Exception, got # with backtrace:\n\n  2) #binary_multiple_of_4? classifies valid binary numbers [30 points]\n     Failure/Error: return false unless s.chars.all?(/[01]/) #\n\n     ArgumentError:\n       wrong number of arguments (1 for 0)\n\n  3) #binary_multiple_of_4? rejects invalid binary numbers [10 points]\n     Failure/Error: return false unless s.chars.all?(/[01]/) #\n\n     ArgumentError:\n       wrong number of arguments (1 for 0)\n\nFinished in 0.00239 seconds (files took 11744 minutes 10 seconds to load)\n10 examples, 3 failures\n\nFailed examples:\n\nrspec your_code.rb:175 # #binary_multiple_of_4? should be defined\nrspec your_code.rb:178 # #binary_multiple_of_4? classifies valid binary numbers [30 points]\nrspec your_code.rb:186 # #binary_multiple_of_4? rejects invalid binary numbers [10 points]\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Here are the passing/failing methods:</p>\n\n<pre><code>def max_2_sum(arr)\n\n  # takes an array of integers as an argument and returns the sum of its two largest elements. \n  # For an empty array it should return zero. For an array with just one element, it should return that element.\n\n  raise 'NonInteger' if arr.all?(Integer) == false\n  return 0 if arr.empty?\n  return arr[0] if arr.length == 1\n  return sum(arr) if arr.length == 2\n  arr.sort!\n  sum(arr[-2..-1])\n\nend\n\ndef binary_multiple_of_4?(s) \n\n  if s.length == 1\n    return true if s == '0'\n    return false if s == '1'\n  else\n    return false unless s.chars.all?(/[01]/)\n    s[-1] == '0' &amp;&amp; s[-2] == '0'\n  end\n\nend\n</code></pre>\n\n<p>Here are the tests:</p>\n\n<pre><code>  describe '#max_2_sum' do\n    it 'should be defined' do\n      expect { max_2_sum([1, 2, 3]) }.not_to raise_error\n    end\n    it 'returns the correct sum [7 points]', points: 7 do\n      expect(max_2_sum([1, 2, 3, 4, 5])).to be_a_kind_of Integer\n      expect(max_2_sum([1, -2, -3, -4, -5])).to eq(-1)\n    end\n    it 'works even if 2 largest values are the same [3 points]', points: 3 do\n      expect(max_2_sum([1, 2, 3, 3])).to eq(6)\n    end\n    it 'returns zero if array is empty [10 points]', points: 10 do\n      expect(max_2_sum([])).to be_zero\n    end\n    it 'returns value of the element if just one element [10 points]', points: 10 do\n      expect(max_2_sum([3])).to eq(3)\n    end\n  end\n\ndescribe '#binary_multiple_of_4?' do\n  it 'should be defined' do\n    expect { binary_multiple_of_4?('yes') }.not_to raise_error#::NoMethodError)\n  end\n  it 'classifies valid binary numbers [30 points]' , points: 30 do\n    %w[1010101010100 0101010101010100 100 0].each do |string|\n      expect(binary_multiple_of_4?(string)).to be_truthy,  \"Incorrect results for input: \\\"#{string}\\\"\"\n    end\n    %w[101 1000000000001].each do |string|\n      expect(binary_multiple_of_4?(string)).not_to be_truthy,  \"Incorrect results for input: \\\"#{string}\\\"\"\n    end\n  end\n  it 'rejects invalid binary numbers [10 points]' , points: 10 do\n    expect(binary_multiple_of_4?('a100')).to be_falsy, \"'a100' is not a valid binary number!\"\n    expect(binary_multiple_of_4?('')).to be_falsy, 'The empty string is not a valid binary number!'\n  end\nend\n</code></pre>\n\n<p>Why would <code>s.chars.all?(/[01]/)</code>and <code>arr.all?(Integer)</code> lead to an ArgumentError in some environments but not others? The documentation isn't giving any answers. More importantly, how can I fix that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1366, "user_id": 1915916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab243027eafbd8c5a15633945c45d35?s=128&d=identicon&r=PG", "display_name": "TheAshwaniK", "link": "https://stackoverflow.com/users/1915916/theashwanik"}, "edited": false, "score": 0, "creation_date": 1546859991, "post_id": 54066859, "comment_id": 94979554, "body": ":O     Works perfectly. Many Thanks to you.  Only change was I think it should be Team.joins instead of Team.join"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 1366, "user_id": 1915916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab243027eafbd8c5a15633945c45d35?s=128&d=identicon&r=PG", "display_name": "TheAshwaniK", "link": "https://stackoverflow.com/users/1915916/theashwanik"}, "edited": false, "score": 0, "creation_date": 1546869793, "post_id": 54066859, "comment_id": 94984695, "body": "Edited the <code>joins</code> typo. Glad to hear everything worked!"}], "tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": true, "score": 3, "last_activity_date": 1546869680, "last_edit_date": 1546869680, "creation_date": 1546817298, "answer_id": 54066859, "question_id": 54066526, "link": "https://stackoverflow.com/questions/54066526/looping-through-the-teams-having-users-in-rails/54066859#54066859", "title": "Looping through the Teams having users in rails", "body": "<p><code>Team.joins(users: :steps).group(:id).order('SUM(stepcount) DESC').limit(5)</code></p>\n\n<p>If you want just the team id and stepcount sum then finish with <code>pluck('teams.id, SUM(stepcount)')</code></p>\n\n<p>This will separate out all <code>steps</code> into groups based on their team.  You then order the groups by the sum of the <code>stepcount</code> descending.  You can then grab the top 5 results to get the 5 teams with the highest overall stepcount.</p>\n\n<p>I'm pretty sure Rails is smart enough to parse <code>group(:id)</code> correctly, but if you get an 'ambiguous column name' error then update it to <code>group('teams.id')</code>.</p>\n"}], "owner": {"reputation": 1366, "user_id": 1915916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab243027eafbd8c5a15633945c45d35?s=128&d=identicon&r=PG", "display_name": "TheAshwaniK", "link": "https://stackoverflow.com/users/1915916/theashwanik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "accepted_answer_id": 54066859, "answer_count": 1, "score": 1, "last_activity_date": 1546869680, "creation_date": 1546813721, "question_id": 54066526, "link": "https://stackoverflow.com/questions/54066526/looping-through-the-teams-having-users-in-rails", "title": "Looping through the Teams having users in rails", "body": "<p>I searched through the site and could not find exactly what I am looking for.</p>\n\n<p>I was working on a quick small rails sample app in which I have <code>Teams</code> which have_many <code>Users</code> . Each users has_many records of steps and each step contains step counts and attached screenshot.</p>\n\n<p>I want to display top 5 groups with highest step counts (combined steps of all users in a group).</p>\n\n<p>This is just a hobby project and may be possible that it does not follow the right way, but the looping did not feel right to me, so just wanted to put it out there and see if there is a better way.</p>\n\n<p>This is what I have done.</p>\n\n<pre><code>    /app/controllers/concerns/application_helper.rb\n\n    module ApplicationHelper\n    def topfiveteams\n        @topfiveteamswithcount\n        @totalcount = 0\n        @all_teamshash = {}\n        Team.all.each do |team|   ---&gt; Loop 1\n                teamcount = 0\n                team.users.each do |user|  ---&gt; Loop 2\n                    userstepcount = 0\n                    user.steps.each do |step|  ---&gt; Loop 3\n                        userstepcount += step.stepcount\n                    end\n                teamcount += userstepcount\n                end\n                @all_teamshash[team.teamname] = teamcount\n        end\n\n        h = @all_teamshash.sort_by {|_key, value| value}.reverse.to_h\n        @topfiveteamswithcount = h.first(5).to_h\n\n    end\nend\n</code></pre>\n\n<p>Is there a cleaner way in RoR ?</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 5, "creation_date": 1546811960, "post_id": 54066259, "comment_id": 94965874, "body": "<code>gsub(&#47;(f)avorite&#47;i, &#39;\\1avourite&#39;)</code>?"}, {"owner": {"reputation": 191, "user_id": 2878233, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Ok3Qo.jpg?s=128&g=1", "display_name": "laechoppe", "link": "https://stackoverflow.com/users/2878233/laechoppe"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1546813007, "post_id": 54066259, "comment_id": 94966129, "body": "thanks, that works!"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1546832614, "post_id": 54066495, "comment_id": 94969593, "body": "What if the word is &quot;esthetics&quot; in the American spelling and &quot;aesthetics&quot; in the English spelling?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1546936680, "post_id": 54066495, "comment_id": 95008331, "body": "@sawa How can <code>&#47;\\b(f)avorite\\b&#47;i</code> match <code>aavorite</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1546940415, "post_id": 54066495, "comment_id": 95010237, "body": "@WiktorStribi\u017cew You were right. I somehow mistook your <code>()</code> for <code>()?</code>."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1546813457, "creation_date": 1546813457, "answer_id": 54066495, "question_id": 54066259, "link": "https://stackoverflow.com/questions/54066259/case-sensitive-replacement/54066495#54066495", "title": "Case-sensitive replacement", "body": "<p>You may capture the first letter and then use a <code>\\1</code> backreference to insert the captured one back:</p>\n\n<pre><code>element.gsub!(/(f)avorite/i, '\\1avourite')\n               ^^^            ^^\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/YiJMPW\" rel=\"nofollow noreferrer\">this Ruby demo</a>.</p>\n\n<p>The <code>(f)</code> capturing group, together with the <code>i</code> case insensitive modifier, will match <code>f</code> or <code>F</code>, and <code>\\1</code> in the replacement pattern will paste this letter back.</p>\n\n<p>Note that to replace whole words, you should use <a href=\"https://www.regular-expressions.info/wordboundaries.html\" rel=\"nofollow noreferrer\">word boundaries</a>:</p>\n\n<pre><code>element.gsub!(/\\b(f)avorite\\b/i, '\\1avourite')\n               ^^          ^^\n</code></pre>\n\n<p>Also, mind the single quotes used for the replacement string literal, if you use double quotation marks, you will need to double the backslash.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1546836039, "last_edit_date": 1546836039, "creation_date": 1546827583, "answer_id": 54067867, "question_id": 54066259, "link": "https://stackoverflow.com/questions/54066259/case-sensitive-replacement/54067867#54067867", "title": "Case-sensitive replacement", "body": "<pre><code>subs = {\n  'center'   =&gt;'centre',    'defense'   =&gt;'defense',\n  'behavour' =&gt;'behaviour', 'apologize' =&gt;'apologise',\n  'maneuver' =&gt;'manoeuvre', 'pediatric' =&gt;'paediatric',\n  'traveled' =&gt;'travelled', 'honor'     =&gt;'honour',\n  'favorite' =&gt;'favourite', 'esthetics'  =&gt;'aesthetics'\n}\n\nstr = \"My Favorite uncle, Max, an honorable gent, is \\\n       often the Center of attention at parties, mainly \\\n       because he has a great sense for Esthetics. \\\n       I apologize for my clumsy maneuver.\".squeeze(' ') \n\nstr.gsub(/\\b\\p{Alpha}+\\b/) do |word|\n  key = word.downcase\n  if subs.key?(key)\n    new_word = subs[key]\n    new_word.capitalize! if word.match?(/\\A\\p{Upper}/)\n    word = new_word\n  end\n  word\nend\n  #=&gt; \"My Favourite uncle, Max, an honorable gent, is \\ \n  #    often the Centre of attention at parties, mainly \\\n  #    because he has a great sense for Aesthetics. \\\n  #    I apologise for my clumsy manoeuvre.\"\n</code></pre>\n\n<p><code>\"honorable\"</code> is not modified because it is not a key in the hash <code>subs</code> (even though it contains the key <code>\"honor\"</code>). A fuller example might include that word as a key.</p>\n"}], "owner": {"reputation": 191, "user_id": 2878233, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Ok3Qo.jpg?s=128&g=1", "display_name": "laechoppe", "link": "https://stackoverflow.com/users/2878233/laechoppe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 54066495, "answer_count": 2, "score": 1, "last_activity_date": 1546931673, "creation_date": 1546811318, "last_edit_date": 1546931673, "question_id": 54066259, "link": "https://stackoverflow.com/questions/54066259/case-sensitive-replacement", "title": "Case-sensitive replacement", "body": "<p>I have a string that may include the word <code>\"favorite\"</code> (in American English) or the capitalised <code>\"Favorite\"</code>. I want to substitute them with the British spelling <code>\"favourite\"</code> or <code>\"Favourite\"</code> respectively without changing the capitalisation.</p>\n\n<p>I'm stuck with</p>\n\n<pre><code>element.gsub!(/Favorite/i, 'Favourite')\n</code></pre>\n\n<p>which will always capitalise the first letter. I don't want to make it too complicated or just repeat the substitution for the two cases. What is the best solution?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "command-line", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1546829820, "post_id": 54065145, "comment_id": 94969136, "body": "This looks like it could be related to the recent bundler update to 2.0; your error message is about bundler. Take a look here: <a href=\"https://stackoverflow.com/a/54068004/2892779\">stackoverflow.com/a/54068004/2892779</a>"}, {"owner": {"reputation": 161, "user_id": 10640827, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KOafxD5GbW8/AAAAAAAAAAI/AAAAAAAAAQY/bIHmXS-ROt0/photo.jpg?sz=128", "display_name": "kelly1025", "link": "https://stackoverflow.com/users/10640827/kelly1025"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1546920326, "post_id": 54065145, "comment_id": 95003222, "body": "I just tried uninstall and reinstalling v 1.17.3 like the link suggested but I am still having the same problem with mini racer. I had seen a post that I should update mini racer, but when I update mini racer I also update rails which wreaks chaos on everything else."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1546953875, "post_id": 54065145, "comment_id": 95017445, "body": "The mini racer error looks like it&#39;s due to missing dependencies. You might try installing GCC with Homebrew. <code>brew install gcc</code>. Then bundle install again. You do NOT want to <code>bundle update mini_racer</code>, that&#39;s what is trying to upgrade your rails"}], "answers": [{"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 1, "last_activity_date": 1546954281, "creation_date": 1546954281, "answer_id": 54092930, "question_id": 54065145, "link": "https://stackoverflow.com/questions/54065145/bundle-update-mini-racer-is-updating-rails-even-though-it-is-not-supposed-to/54092930#54092930", "title": "Bundle update mini_racer is updating rails even though it is not supposed to?", "body": "<p>Your first failure is due to a missing dependency with mini racer. The key in that error message is:</p>\n\n<pre><code>library not found for -lstdc++\n</code></pre>\n\n<p>You need to install gcc. If you're using Homebrew, you can run <code>brew install gcc</code></p>\n\n<p>The reason that rails was getting screwed up, is because when you ran the bundle update command it looks like it was updating everything, including dependencies. I believe there is a bundler flag to force it to only update the gems you selected, but that still won't help you because you're missing the dependencies needed by mini racer.</p>\n\n<p>After you install gcc, just run <code>bundle install</code>. That should install mini racer without error.</p>\n\n<p>The bundler error, as I noted, was due to a recent update to bundler. I've locked to 1.17.3 for the time being because I haven't had luck working around that error message. </p>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 10640827, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KOafxD5GbW8/AAAAAAAAAAI/AAAAAAAAAQY/bIHmXS-ROt0/photo.jpg?sz=128", "display_name": "kelly1025", "link": "https://stackoverflow.com/users/10640827/kelly1025"}, "is_accepted": false, "score": 0, "last_activity_date": 1548024527, "creation_date": 1548024527, "answer_id": 54281714, "question_id": 54065145, "link": "https://stackoverflow.com/questions/54065145/bundle-update-mini-racer-is-updating-rails-even-though-it-is-not-supposed-to/54281714#54281714", "title": "Bundle update mini_racer is updating rails even though it is not supposed to?", "body": "<p>Figured out a workaround.</p>\n\n<p>The issue was that heroku doesn't support bundler 2.0 and above, and if we updated mini_racer it was updating bundler so in order to make mini_racer and heroku happy, we updated mini_racer in the gemfile and specified the most recent version, and then we always use </p>\n\n<p><code>gem install bundler --version 1.16.4</code></p>\n\n<p>until heroku supports a more recent bundler version.</p>\n"}], "owner": {"reputation": 161, "user_id": 10640827, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KOafxD5GbW8/AAAAAAAAAAI/AAAAAAAAAQY/bIHmXS-ROt0/photo.jpg?sz=128", "display_name": "kelly1025", "link": "https://stackoverflow.com/users/10640827/kelly1025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1548024527, "creation_date": 1546803047, "question_id": 54065145, "link": "https://stackoverflow.com/questions/54065145/bundle-update-mini-racer-is-updating-rails-even-though-it-is-not-supposed-to", "title": "Bundle update mini_racer is updating rails even though it is not supposed to?", "body": "<p>I've had the same mini_racer update problem that others have had, but the common recommendations aren't working for me.</p>\n\n<p>Getting the following errors when running <code>bundle install</code> with mini_racer 0.2.0 in my gemfile...</p>\n\n<pre><code>2 warnings generated.\nlinking shared-object mini_racer_extension.bundle\nclang: warning: libstdc++ is deprecated; move to libc++ [- \nWdeprecated]\nld: library not found for -lstdc++\nclang: error: linker command failed with exit code 1 (use -v to see \ninvocation)\nmake: *** [mini_racer_extension.bundle] Error 1\n\nmake failed, exit code 2\n\nAn error occurred while installing mini_racer (0.2.0), and Bundler\ncannot continue.\nMake sure that `gem install mini_racer -v '0.2.0' --source\n'https://rubygems.org/'` succeeds before bundling.\n\nIn Gemfile:\nmini_racer\n</code></pre>\n\n<p>I am trying to just update mini_racer with </p>\n\n<p><code>bundle update mini_racer</code></p>\n\n<p>but then when I run bundle install, I'm getting a new (and more alarming) error...</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"bundler\":\nIn Gemfile:\nrails (~&gt; 5.1.4) was resolved to 5.1.6, which depends on\n  bundler (&gt;= 1.3.0)\n\nrender_async was resolved to 2.0.0, which depends on\n  bundler (~&gt; 1.8)\n\nCurrent Bundler version:\nbundler (2.0.1)\nThis Gemfile requires a different version of Bundler.\nPerhaps you need to update Bundler by running `gem install bundler`?\n\nCould not find gem 'bundler (~&gt; 1.8)', which is required by gem \n'rails (~&gt;\n5.1.4)', in any of the sources.\n</code></pre>\n\n<p>What should I be doing to update mini_racer without updating dependencies? (at least i think that is what is happening)</p>\n"}, {"tags": ["ruby", "string", "stdin"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546802587, "post_id": 54065016, "comment_id": 94963240, "body": "This is a limit of the TTY. More <a href=\"https://unix.stackexchange.com/q/204815/218427\">here</a>. It&#39;s fairly universal across TTYs, with varying limits depending on OS."}], "answers": [{"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 0, "last_activity_date": 1546835878, "creation_date": 1546835878, "answer_id": 54068604, "question_id": 54065016, "link": "https://stackoverflow.com/questions/54065016/how-to-read-a-really-long-string-from-stdin-in-ruby/54068604#54068604", "title": "How to read a really long string from STDIN in ruby?", "body": "<p>The Readline gem does not seem to have this limitation. In my testing, lines of well over 1400 characters caused no problem. This was also true of my version, mini_readline. I suspect that this is due to the fact that both of these gems operate the TTY in raw mode and do buffering, editing etc, in Ruby, not using the system buffering.</p>\n\n<p><a href=\"https://rubygems.org/gems/rb-readline\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/rb-readline</a></p>\n"}], "owner": {"reputation": 11240, "user_id": 732896, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/435a35abe1426a8ab00c31ae1fa8aaa3?s=128&d=identicon&r=PG", "display_name": "andersonvom", "link": "https://stackoverflow.com/users/732896/andersonvom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546835878, "creation_date": 1546802218, "question_id": 54065016, "link": "https://stackoverflow.com/questions/54065016/how-to-read-a-really-long-string-from-stdin-in-ruby", "title": "How to read a really long string from STDIN in ruby?", "body": "<p>I've been using <code>STDIN.gets</code> read strings from stdin in ruby, but I just noticed that these strings must be shorter than 1024 characters. None of the following methods will read strings longer than 1024 characters:</p>\n\n<pre><code>STDIN.gets\nSTDIN.gets(2000)\nSTDIN.read\nSTDIN.readline\n</code></pre>\n\n<p>In fact, the interpreter won't even allow the full 1024 characters to be sent, since it needs to add the line break, so a user can only type at most 1023 characters and press <code>return</code>.</p>\n\n<p>You could break the string into multiple lines and then remove the line breaks afterwards, but these strings are likely being copy/pasted, so it would not be feasible to do it, unless there's a way to make the interpreter do it automatically.</p>\n\n<p>How can I read a string that's longer than this 1024 limit?</p>\n"}, {"tags": ["ruby", "http"], "answers": [{"tags": [], "owner": {"reputation": 1253, "user_id": 704515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f563d99bc6daa3bc4223274c7578f70?s=128&d=identicon&r=PG", "display_name": "Viktor Nonov", "link": "https://stackoverflow.com/users/704515/viktor-nonov"}, "is_accepted": false, "score": 1, "last_activity_date": 1546803843, "creation_date": 1546803843, "answer_id": 54065257, "question_id": 54064829, "link": "https://stackoverflow.com/questions/54064829/ruby-http-request-freeze-with-ssl/54065257#54065257", "title": "ruby http request freeze with SSL", "body": "<p>It's possible that they block requests when some specific headers are missing, so you might want to set some of them:</p>\n\n<pre><code> HTTParty.get(url, { headers: {\n                       \"User-Agent\" =&gt; \"Mozilla/5.0 (iPhone; CPU iPhone OS 12_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) FxiOS/7.0.4 Mobile/16B91 Safari/605.1.15\",\n                       \"Accept-Language\" =&gt; \"en-US,en;q=0.9,bg;q=0.8\",\n                       \"Accept-Encoding\" =&gt; \"gzip, deflate, br\"\n                     }\n                   })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 1, "last_activity_date": 1546803851, "creation_date": 1546803851, "answer_id": 54065259, "question_id": 54064829, "link": "https://stackoverflow.com/questions/54064829/ruby-http-request-freeze-with-ssl/54065259#54065259", "title": "ruby http request freeze with SSL", "body": "<p>There is filtering being done on the server side for the Adidas URL, likely to prevent automated scraping. At a minimum you must specify additional headers to successfully make a connection.</p>\n\n<p>The following example successfully returns a response from the Adidas URL:</p>\n\n<pre><code>url = 'https://www.adidas.com.sg/dis/dw/image/v2/bcbs_prd/on/demandware.static/-/Sites-adidas-products/default/dw0eb054ad/zoom/G27805_01_standard.jpg'\n\nheaders = {\n  'Accept' =&gt; 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n  'Accept-Encoding' =&gt; 'br, gzip, deflate',\n  'Accept-Language' =&gt; 'en-us'\n}\n\nresponse = HTTParty.get(url, headers: headers)\n=&gt; #&lt;HTTParty::Response:0x7fcb02856298 parsed_response=\"\\xFF\\xD8\\xFF\\xE0\\x00\\x10JFIF ...\n</code></pre>\n\n<p>The three headers listed are the only headers required to get a response, but all three headers are required.</p>\n\n<p>You can see from the returned response that it is returning <a href=\"https://boonedocks.net/blog/2008/03/10/Determining-Image-File-Types-in-Ruby.html\" rel=\"nofollow noreferrer\">a JPEG</a>, so this example should work as requested.</p>\n"}], "owner": {"reputation": 107, "user_id": 1397675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b759c99b1991b3f6be602d7f29218cd?s=128&d=identicon&r=PG", "display_name": "Ivan Verevkin", "link": "https://stackoverflow.com/users/1397675/ivan-verevkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 54065259, "answer_count": 2, "score": 1, "last_activity_date": 1546803944, "creation_date": 1546800928, "last_edit_date": 1546803944, "question_id": 54064829, "link": "https://stackoverflow.com/questions/54064829/ruby-http-request-freeze-with-ssl", "title": "ruby http request freeze with SSL", "body": "<p>I'm trying to download images with ruby and found interesting issue</p>\n\n<p>Its part of my  code for downloading an image (HTTP request only):</p>\n\n<pre><code>HTTParty.get(url)\n</code></pre>\n\n<p>or with</p>\n\n<pre><code>Net::HTTP.new(URI.parse(url))\n</code></pre>\n\n<p>and when I'm trying to download an image from Nike</p>\n\n<pre><code>url = 'https://c.static-nike.com/a/images/t_PDP_1728_v1/f_auto,b_rgb:f5f5f5/bfau7aauvleh5puvuiqa/zoom-pegasus-turbo-mens-running-shoe-Z163c3.jpg'\n</code></pre>\n\n<p>it works well</p>\n\n<p>but for some reasons, it freezes when I'm opening Adidas:</p>\n\n<pre><code>url = 'https://www.adidas.com.sg/dis/dw/image/v2/bcbs_prd/on/demandware.static/-/Sites-adidas-products/default/dw0eb054ad/zoom/G27805_01_standard.jpg'\n</code></pre>\n\n<p>I have suck logs</p>\n\n<pre><code>    SSL established\n&lt;- \"GET /dis/dw/image/v2/bcbs_prd/on/demandware.static/-/Sites-adidas-products/default/dw0eb054ad/zoom/G27805_01_standard.jpg HTTP/1.1\\r\\nUser-Agent: Mozilla/5.0\\r\\nConnection: close\\r\\nHost: www.adidas.com.sg\\r\\n\\r\\n\"\n</code></pre>\n\n<p>tried to switch off SSL validation by </p>\n\n<pre><code> verify: false,\n</code></pre>\n\n<p>but it doesn't solve my pain \u00af\\_(\u30c4)_/\u00af</p>\n\n<p>However, it works well with <code>curl -O</code> for both URLs</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 1619869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/914f5809840154823f88fb4860e0e2e4?s=128&d=identicon&r=PG", "display_name": "Dan S.", "link": "https://stackoverflow.com/users/1619869/dan-s"}, "edited": false, "score": 0, "creation_date": 1546803022, "post_id": 54064651, "comment_id": 94963392, "body": "Why did the comparison work up until 0.56?  Thanks for the information.  I am just going to convert it before the comparison from now on."}], "tags": [], "owner": {"reputation": 61, "user_id": 9984998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28128a6ce51dc62002de13071aab7064?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Matuszewski", "link": "https://stackoverflow.com/users/9984998/jan-matuszewski"}, "is_accepted": true, "score": 1, "last_activity_date": 1546852868, "last_edit_date": 1546852868, "creation_date": 1546799639, "answer_id": 54064651, "question_id": 54063949, "link": "https://stackoverflow.com/questions/54063949/ruby-on-rails-decimal-comparison-stopped-working/54064651#54064651", "title": "Ruby on Rails decimal comparison stopped working", "body": "<p>It occurs because <code>state.database_version</code> is an instance of <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/bigdecimal/rdoc/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a> class. <a href=\"https://millarian.com/rails/precision-and-scale-for-ruby-on-rails-migrations/\" rel=\"nofollow noreferrer\">This article</a> explain why it is <code>BigDecimal</code>.</p>\n\n<p>Look at this example:</p>\n\n<pre><code>BigDecimal('0.56e0')\n=&gt; 0.56e0\nirb(main):008:0&gt; BigDecimal('0.56e0') == 0.56\n=&gt; false\nirb(main):009:0&gt; BigDecimal('0.56e0').to_f\n=&gt; 0.56\n</code></pre>\n\n<p>As you can see <code>0.56e0</code> after transformation to <code>float</code> type becomes 0.56 and your comparison returns true.</p>\n\n<p>Nate explained more briefly why it's happening <a href=\"https://stackoverflow.com/questions/54063949/ruby-on-rails-decimal-comparison-stopped-working/54064651?noredirect=1#comment94966085_54066214\">in this comment</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 1, "creation_date": 1546812819, "post_id": 54066214, "comment_id": 94966085, "body": "BigDecimal and Float are both Ruby core classes, not Rails. This problem actually has nothing to do with Rails. This is likely a floating point precision inconsistency. Floats are always dangerous to compare. The following question has some details about how floats are less precise than BigDecimals and in some cases you end up with nearly the same but not exactly the same number as you expected. <a href=\"https://stackoverflow.com/q/3039650/10068463\">stackoverflow.com/q/3039650/10068463</a>"}], "tags": [], "owner": {"reputation": 142, "user_id": 1619869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/914f5809840154823f88fb4860e0e2e4?s=128&d=identicon&r=PG", "display_name": "Dan S.", "link": "https://stackoverflow.com/users/1619869/dan-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1546810957, "creation_date": 1546810957, "answer_id": 54066214, "question_id": 54063949, "link": "https://stackoverflow.com/questions/54063949/ruby-on-rails-decimal-comparison-stopped-working/54066214#54066214", "title": "Ruby on Rails decimal comparison stopped working", "body": "<pre><code>irb(main):001:0&gt;  c = BigDecimal('0.56e0')\n=&gt; 0.56e0\nirb(main):002:0&gt; c == 0.56\n=&gt; false\nirb(main):003:0&gt;  c = BigDecimal('0.55e0')\n=&gt; 0.55e0\nirb(main):004:0&gt; c == 0.55\n=&gt; true\n</code></pre>\n\n<p>Works for 0.55 and not for 0.56  Rails bug?</p>\n"}], "owner": {"reputation": 142, "user_id": 1619869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/914f5809840154823f88fb4860e0e2e4?s=128&d=identicon&r=PG", "display_name": "Dan S.", "link": "https://stackoverflow.com/users/1619869/dan-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 54064651, "answer_count": 2, "score": 0, "last_activity_date": 1546852868, "creation_date": 1546794487, "question_id": 54063949, "link": "https://stackoverflow.com/questions/54063949/ruby-on-rails-decimal-comparison-stopped-working", "title": "Ruby on Rails decimal comparison stopped working", "body": "<p>I have been using a state object in the database that keeps track of what seed data has been loaded into it.  The structure of the table is:</p>\n\n<pre><code>create_table \"toolkit_states\", force: :cascade do |t|\n  t.boolean \"signups\", default: true\n  t.decimal \"database_version\", precision: 5, scale: 2\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\nend\n</code></pre>\n\n<p>The seeds.rb file checks the database_version and runs blocks of code and then sets the database_version after running the block.  It has worked fine from versions 0.1 up to 0.55.</p>\n\n<p>I added a new block of seed data.  To run that block the database_version is checked and it should be 0.56.  The following comparison does not work:</p>\n\n<pre><code>if state.database_version == 0.56\n</code></pre>\n\n<p>For some reason, the number 0.56 cannot be evaluated for equality with the value stored in the database.  It has worked on all the values up to 0.56.</p>\n\n<p>Here is a rails console session:</p>\n\n<pre><code>irb(main):001:0&gt; state = ToolkitState.first\nToolkitState Load (0.4ms)  SELECT  \"toolkit_states\".* FROM \"toolkit_states\" ORDER BY \"toolkit_states\".\"id\" ASC LIMIT $1  [[\"LIMIT\", 1]]\n=&gt; #&lt;ToolkitState id: 1, signups: false, database_version: 0.56e0, created_at: \"2018-12-27 17:04:50\", updated_at: \"2018-12-27 17:04:56\"&gt;\nirb(main):002:0&gt; state.database_version == 0.56\n=&gt; false\nirb(main):003:0&gt; state.database_version == 0.56e0\n=&gt; false\nirb(main):004:0&gt; state.database_version == 0.56.to_f\n=&gt; false\nirb(main):005:0&gt; state.database_version.to_f == 0.56\n=&gt; true\n</code></pre>\n\n<p>When I convert the value with a \"to_f\", the comparison works.  My problem is that it as worked well without this conversion up to the value, 0.56</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "ruby-thread"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1546793416, "post_id": 54063750, "comment_id": 94960601, "body": "\u201cWhat more elegant solution can be used?\u201d\u2014the language with native concurrency support, like <a href=\"https://stackoverflow.com/questions/tagged/erlang\">erlang</a> or even <a href=\"https://stackoverflow.com/questions/tagged/golang\">golang</a>."}, {"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1546852217, "post_id": 54063750, "comment_id": 94975344, "body": "have you considered sidekiq gem? you can change the number of processes and threads just through simple configurations. however, your code needs to be aync compatible. <a href=\"https://github.com/mperham/sidekiq/\" rel=\"nofollow noreferrer\">github.com/mperham/sidekiq</a>"}, {"owner": {"reputation": 361, "user_id": 4968403, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-tpcgZvb1Kg0/AAAAAAAAAAI/AAAAAAAAAAA/GTFUDUKoP7A/photo.jpg?sz=128", "display_name": "Kiran Patil", "link": "https://stackoverflow.com/users/4968403/kiran-patil"}, "edited": false, "score": 0, "creation_date": 1616592605, "post_id": 54063750, "comment_id": 118050336, "body": "Try using <a href=\"https://github.com/tidwall/tile38\" rel=\"nofollow noreferrer\">github.com/tidwall/tile38</a> to get nearest one. @ViT-Vetal- Could you please share your github repo ? I am curious to see how it works."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1546793784, "creation_date": 1546793784, "answer_id": 54063850, "question_id": 54063750, "link": "https://stackoverflow.com/questions/54063750/rails-threads-limit-in-production/54063850#54063850", "title": "Rails threads limit in production", "body": "<p>Usually this kind of tasks is referred as <em>having back pressure</em>. Maximum amount of threads on UNIX systems may vary from circa 10K to max allowed 500K.</p>\n\n<p>The most common way to handle back pressure is to plug in a fast queue in between (like <em>RabbitMQ</em> or something) and increase the amount of queue consumers as the load of requests to proceed increases.</p>\n\n<p>100/s is nothing, but if you plan to handle thousands of concurrent connections, I strongly encourage to rethink the language of choice twice. Rails is not a software created for this kind of task. Neither is Ruby.</p>\n"}], "owner": {"reputation": 2071, "user_id": 3194048, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/39799b49730aef68e1ba770dda9c6aae?s=128&d=identicon&r=PG&f=1", "display_name": "ViT-Vetal-", "link": "https://stackoverflow.com/users/3194048/vit-vetal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1546793784, "creation_date": 1546793145, "question_id": 54063750, "link": "https://stackoverflow.com/questions/54063750/rails-threads-limit-in-production", "title": "Rails threads limit in production", "body": "<p>I am working on uber like/cab booking app. I am using Action Cable for this purpose. After creation of new order server get list of 10 nearest drivers and send each in turn order details (with a pause of 40 seconds).</p>\n\n<pre><code>Thread.new do\n  nearest_drivers.each do |id|\n    order_data_for_driver = { ... }\n    ActionCable.server.broadcast(\"driver_#{id}\", order_data_for_driver)\n\n    sleep 40\n\n    Thread.exit if order.reload.canceled_by_user || order.trip\n  end\n\n  cancel_data = {canceled_by_timeout: true }\n  ActionCable.server.broadcast(\"order_#{order.id}\", cancel_data )\nend\n</code></pre>\n\n<p>Is there a limit to the number of threads that rails in production mode can run at the same time? For example, if 100 users will create new orders. What more elegant solution can be used?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1546793188, "post_id": 54063670, "comment_id": 94960514, "body": "FYI: terms <i>list</i> and <i>array</i> in Ruby are the exact synonyms."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1546793280, "post_id": 54063670, "comment_id": 94960552, "body": "<code>dates = 3.times.map { |i| &#39;01-01-2019&#39;.to_date +\u00a0i.months }</code> does what you assumingly need."}, {"owner": {"reputation": 136, "user_id": 2820764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfe5fccf788fcf7934467611cd2aa00?s=128&d=identicon&r=PG", "display_name": "Kandy", "link": "https://stackoverflow.com/users/2820764/kandy"}, "edited": false, "score": 1, "creation_date": 1546795592, "post_id": 54063670, "comment_id": 94961274, "body": "I tested your piece of code and it&#39;s working fine. [Fri, 01 Feb 2019, Fri, 01 Mar 2019, Mon, 01 Apr 2019]. Check if the moment you are formatting the result is okay."}, {"owner": {"reputation": 39, "user_id": 7973406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/61JBS.jpg?s=128&g=1", "display_name": "JohnMilo", "link": "https://stackoverflow.com/users/7973406/johnmilo"}, "edited": false, "score": 0, "creation_date": 1546795850, "post_id": 54063670, "comment_id": 94961365, "body": "Thank you Aleksei ant Tiw. So does that mean I can&#39;t use my other approach?"}, {"owner": {"reputation": 39, "user_id": 7973406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/61JBS.jpg?s=128&g=1", "display_name": "JohnMilo", "link": "https://stackoverflow.com/users/7973406/johnmilo"}, "reply_to_user": {"reputation": 136, "user_id": 2820764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acfe5fccf788fcf7934467611cd2aa00?s=128&d=identicon&r=PG", "display_name": "Kandy", "link": "https://stackoverflow.com/users/2820764/kandy"}, "edited": false, "score": 0, "creation_date": 1546796546, "post_id": 54063670, "comment_id": 94961589, "body": "@kandy. I&#39;ve tried it again. Same result. A list in console, and only one date if I raise dates.inspect in controller."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1546800244, "post_id": 54063670, "comment_id": 94962602, "body": "Tried in rails console, in browser and rails server log. It works fine."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "edited": false, "score": 1, "creation_date": 1546800340, "post_id": 54063670, "comment_id": 94962625, "body": "@Tiw, a small thing, but I think it&#39;s clearer to change <code>map</code>&#39;s receiver to, say, <code>(1..repeat)</code> or <code>1.upto(repeat)</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1546805364, "post_id": 54063670, "comment_id": 94964069, "body": "Here&#39;s a hint: in Ruby, the answer to <i>every</i> question of the form &quot;How do I <i>X</i> using loops&quot; is &quot;You don&#39;t, use <code>Enumerable</code> methods instead&quot;. If you <i>ever</i> find yourself writing a loop in Ruby, there&#39;s a 99.999% chance you are doing something wrong."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1546836126, "post_id": 54063670, "comment_id": 94970260, "body": "Are you raising an exception <i>inside</i> the loop? That way you&#39;d get the loop interrupted and only get the first one."}], "answers": [{"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1546849766, "last_edit_date": 1546849766, "creation_date": 1546801140, "answer_id": 54064858, "question_id": 54063670, "link": "https://stackoverflow.com/questions/54063670/how-to-push-items-to-ruby-array-using-loop/54064858#54064858", "title": "How to push items to ruby array using loop", "body": "<p>From your coding style it seems you're pretty new to Ruby. A more Ruby-like approach would be:</p>\n\n<pre><code>start_date = '01-01-2019'.to_date\nrepeat     = 3\n\ndates = 1.upto(repeat).map { |count| start_date + count.months }\n# or\ndates = (1..repeat).map { |count| start_date + count.months }\n</code></pre>\n\n<p>Then to print the dates array use:</p>\n\n<pre><code>puts dates\n</code></pre>\n\n<p>As far as I can tell, your provided code should work. Keep in mind that <a href=\"https://ruby-doc.org/core-2.6/IO.html#method-i-puts\" rel=\"nofollow noreferrer\"><code>puts</code></a> prints arrays across multiple lines. If you want to display the contents of the array on a single line use <a href=\"https://ruby-doc.org/core-2.6/Kernel.html#method-i-p\" rel=\"nofollow noreferrer\"><code>p</code></a> instead. The difference is that <code>puts</code> uses the <code>to_s</code> method while <code>p</code> uses the <code>inspect</code> method. Arrays passed to <code>puts</code> will be flattened and seen as multiple arguments instead. Every argument will get its own line.</p>\n\n<pre><code>puts [1, 2]\n# 1\n# 2\n#=&gt; nil\n\np [1, 2]\n# [1, 2]\n#=&gt; [1, 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 50, "user_id": 4615416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVBqh.jpg?s=128&g=1", "display_name": "Mayur Patil", "link": "https://stackoverflow.com/users/4615416/mayur-patil"}, "is_accepted": false, "score": 0, "last_activity_date": 1546834840, "creation_date": 1546834840, "answer_id": 54068511, "question_id": 54063670, "link": "https://stackoverflow.com/questions/54063670/how-to-push-items-to-ruby-array-using-loop/54068511#54068511", "title": "How to push items to ruby array using loop", "body": "<p>Replace <code>puts dates</code> by <code>puts \"#{dates}\"</code>.\nIt will print array as expected like  [01-02-2019, 01-03-2019, 01-04-2019].</p>\n"}], "owner": {"reputation": 39, "user_id": 7973406, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/61JBS.jpg?s=128&g=1", "display_name": "JohnMilo", "link": "https://stackoverflow.com/users/7973406/johnmilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 1, "accepted_answer_id": 54064858, "answer_count": 2, "score": 1, "last_activity_date": 1546849766, "creation_date": 1546792720, "question_id": 54063670, "link": "https://stackoverflow.com/questions/54063670/how-to-push-items-to-ruby-array-using-loop", "title": "How to push items to ruby array using loop", "body": "<p>I am trying to create an array of dates using loop. But the loop is only pushing one date and when I query an array I see it's not an array, rather a list. Help.</p>\n\n<pre><code>date1 = '01-01-2019'.to_date\ndates = []\ncount = 0\nrepeat = 3\n\nwhile (count &lt; repeat)\n count += 1\n date2 = date1 + count.month\n dates &lt;&lt; date2\n puts dates\nend\n</code></pre>\n\n<p>Expected results should be <strong>[01-02-2019, 01-03-2019, 01-04-2019]</strong>.</p>\n\n<p>However, if I use rails console, all I get are the dates in a list. If I <strong><em>raise dates.inspect</em></strong> in controller, I only get <strong>01-02-2019</strong>.</p>\n\n<p>How can I fix this? </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1546805499, "post_id": 54062844, "comment_id": 94964103, "body": "&quot;those won&#39;t work&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1546805566, "post_id": 54062844, "comment_id": 94964126, "body": "Also, another hint: it would be very helpful if you could explain what, <i>precisely</i> is unclear to you about the documentation of <code>Array#delete</code>. That way, the Ruby developers can improve the documentation so that future developers don&#39;t stumble over the same problems you did. Make the world a better place!"}], "answers": [{"tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": false, "score": 5, "last_activity_date": 1546787759, "creation_date": 1546787759, "answer_id": 54062905, "question_id": 54062844, "link": "https://stackoverflow.com/questions/54062844/how-can-i-delete-an-element-from-an-array-using-its-index/54062905#54062905", "title": "How can I delete an element from an array using its index?", "body": "<p>It's <a href=\"https://ruby-doc.org/core-2.5.3/Array.html#method-i-delete_at\" rel=\"noreferrer\"><code>delete_at</code></a> you needed:</p>\n\n<pre><code>array = [\"Dog\", \"Cat\", \"John Cena\"]\n#=&gt; [\"Dog\", \"Cat\", \"John Cena\"]\narray.delete_at(1)\n#=&gt; \"Cat\"\narray\n#=&gt; [\"Dog\", \"John Cena\"]\n</code></pre>\n\n<p>Please check the <a href=\"https://ruby-doc.org/core-2.5.3/\" rel=\"noreferrer\">doc</a> more often, you'll probably find the thing you needed most of the times.</p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 6501234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e980b8b7894381f8d85eb060b7b0cbf?s=128&d=identicon&r=PG", "display_name": "Corey Gibson", "link": "https://stackoverflow.com/users/6501234/corey-gibson"}, "is_accepted": false, "score": -1, "last_activity_date": 1546789322, "creation_date": 1546789322, "answer_id": 54063140, "question_id": 54062844, "link": "https://stackoverflow.com/questions/54062844/how-can-i-delete-an-element-from-an-array-using-its-index/54063140#54063140", "title": "How can I delete an element from an array using its index?", "body": "<p>As stated before you should be using Ruby Docs for help like this Ruby has amazing documentation and is a shame to waste the wealth of knowledge here.</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.1.0/Array.html#method-i-delete_at\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.1.0/Array.html#method-i-delete_at</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/c9wdT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c9wdT.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1546930719, "creation_date": 1546930719, "answer_id": 54086669, "question_id": 54062844, "link": "https://stackoverflow.com/questions/54062844/how-can-i-delete-an-element-from-an-array-using-its-index/54086669#54086669", "title": "How can I delete an element from an array using its index?", "body": "<p>Alternatively:</p>\n\n<pre><code>array = [\"Dog\", \"Cat\", \"John Cena\"]\narray[1, 1] = []\narray # =&gt; [\"Dog\", \"John Cena\"]\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10668927, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JROFNsMUrws/AAAAAAAAAAI/AAAAAAAAAN8/8D4Z8yqNvw4/photo.jpg?sz=128", "display_name": "Aleks", "link": "https://stackoverflow.com/users/10668927/aleks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1546930719, "creation_date": 1546787349, "last_edit_date": 1546930537, "question_id": 54062844, "link": "https://stackoverflow.com/questions/54062844/how-can-i-delete-an-element-from-an-array-using-its-index", "title": "How can I delete an element from an array using its index?", "body": "<p>Trying to delete from this array:</p>\n\n<pre><code>array = [\"Dog\", \"Cat\", \"John Cena\"]\n</code></pre>\n\n<p>But those won't work:</p>\n\n<pre><code>array.delete(1)\narray.delete([1])\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "heroku", "rvm"], "comments": [{"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "edited": false, "score": 0, "creation_date": 1546788523, "post_id": 54062702, "comment_id": 94959065, "body": "Modify ruby &quot;~&gt; 2.6.0&quot;, to ruby &quot;2.6.0&quot; and then bundle and try pushing again to heroku"}, {"owner": {"reputation": 633, "user_id": 2611472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/67a5db98d0cd9027b372cf17a3b6b19f?s=128&d=identicon&r=PG", "display_name": "westman2222", "link": "https://stackoverflow.com/users/2611472/westman2222"}, "reply_to_user": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "edited": false, "score": 0, "creation_date": 1546797346, "post_id": 54062702, "comment_id": 94961827, "body": "I am getting the same exact error, &quot;An error occurred while installing ruby-2.3.1&quot;"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "edited": false, "score": 0, "creation_date": 1546799536, "post_id": 54062702, "comment_id": 94962419, "body": "Check Gemfile.lock if it has been bundled with the correct ruby version as heroku detects from this file only. If not then delete this file and bundle again"}, {"owner": {"reputation": 633, "user_id": 2611472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/67a5db98d0cd9027b372cf17a3b6b19f?s=128&d=identicon&r=PG", "display_name": "westman2222", "link": "https://stackoverflow.com/users/2611472/westman2222"}, "reply_to_user": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "edited": false, "score": 0, "creation_date": 1546800140, "post_id": 54062702, "comment_id": 94962579, "body": "i deleted gemfile.lock, then ran bundle install - same error - sorry - I really appreciate your help....also in gemfile.lock I confirmed that there Ruby Version is 2.6.0, same as gemfile"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "edited": false, "score": 0, "creation_date": 1552036541, "post_id": 54062702, "comment_id": 96868312, "body": "You can downgrade heroku stack to solve this issue. Solution can be found here <a href=\"https://stackoverflow.com/questions/53354444/how-can-i-solve-this-trouble-to-deploy-a-rails-app-to-heroku?answertab=active#tab-top\" title=\"how can i solve this trouble to deploy a rails app to heroku\">stackoverflow.com/questions/53354444/&hellip;</a>"}], "owner": {"reputation": 633, "user_id": 2611472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/67a5db98d0cd9027b372cf17a3b6b19f?s=128&d=identicon&r=PG", "display_name": "westman2222", "link": "https://stackoverflow.com/users/2611472/westman2222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552035701, "creation_date": 1546786354, "last_edit_date": 1546797623, "question_id": 54062702, "link": "https://stackoverflow.com/questions/54062702/trouble-pushing-app-to-heroku-ruby-version-error-rvm", "title": "trouble pushing app to heroku, ruby version error - RVM", "body": "<p>remote:  !     An error occurred while installing ruby-2.3.1\nthis version of ruby is not available on heroku-18</p>\n\n<p>so, when I run Ruby -v, I get: \nruby 2.6.0p0 (2018-12-25 revision 66547) [x86_64-linux]</p>\n\n<p>and my gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby \"2.6.0\"\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.2.2'\n# Use sqlite3 as the database for Active Record\n\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.11'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'mini_racer', platforms: :ruby\n\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n\ngem 'bootsnap', '&gt;= 1.1.0', require: false\ngem 'bootstrap', '&gt;=4.0'\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n  gem 'sqlite3'\nend\n\ngroup :development do\n  # Access an interactive console on exception pages or by calling 'console' anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\n\nend\n\ngroup :test do\n  # Adds support for Capybara system testing and selenium driver\n  gem 'capybara', '&gt;= 2.15'\n  gem 'selenium-webdriver'\n  # Easy installation and use of chromedriver to run system tests with Chrome\n  gem 'chromedriver-helper'\nend\n\ngroup :production do\n  gem 'pg'\nend\n\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>Everything is running locally, what am I doing wrong? to note, i am using RVM - Is there anything special that i need to do to use RVM with heroku ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "graphql", "graphql-ruby"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1546788736, "last_edit_date": 1546788736, "creation_date": 1546788364, "answer_id": 54063000, "question_id": 54062534, "link": "https://stackoverflow.com/questions/54062534/disabling-graphql-introspection-requests-on-production/54063000#54063000", "title": "Disabling GraphQL introspection requests on production", "body": "<p>From the <a href=\"http://graphql-ruby.org/schema/introspection.html#introspection-entry-points\" rel=\"nofollow noreferrer\"><code>graphql-ruby</code> documentation</a>:</p>\n\n<blockquote>\n  <p>You can re-implement these fields or create new ones by creating a custom EntryPoints class in your introspection namespace:</p>\n\n<pre><code>module Introspection\n  class EntryPoints &lt; GraphQL::Introspection::EntryPoints\n    # ...\n  end\nend\n</code></pre>\n</blockquote>\n\n<p>That said, just introduce <code>def __schema</code> method redirecting to <code>404</code> or explicitly responding with <code>404</code>.</p>\n\n<hr>\n\n<p>FWIW, <a href=\"https://github.com/rmosolgo/graphql-ruby/blob/master/lib/graphql/introspection/entry_points.rb#L10-L15\" rel=\"nofollow noreferrer\">here is the original code</a> you are to overwrite.</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 6362538, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hyMfYVe51Qc/AAAAAAAAAAI/AAAAAAAAAFE/w-2O9bA7tj8/photo.jpg?sz=128", "display_name": "Yosuke Kurami", "link": "https://stackoverflow.com/users/6362538/yosuke-kurami"}, "is_accepted": false, "score": 2, "last_activity_date": 1563449614, "creation_date": 1563449614, "answer_id": 57093491, "question_id": 54062534, "link": "https://stackoverflow.com/questions/54062534/disabling-graphql-introspection-requests-on-production/57093491#57093491", "title": "Disabling GraphQL introspection requests on production", "body": "<p>graphql-ruby (>= 1.9.7) supports disable_introspection_entry_points .</p>\n\n<p>See <a href=\"https://github.com/rmosolgo/graphql-ruby/pull/2327\" rel=\"nofollow noreferrer\">https://github.com/rmosolgo/graphql-ruby/pull/2327</a> </p>\n"}, {"tags": [], "owner": {"reputation": 574, "user_id": 3858831, "user_type": "registered", "profile_image": "https://graph.facebook.com/1003480893/picture?type=large", "display_name": "Kiko Castro", "link": "https://stackoverflow.com/users/3858831/kiko-castro"}, "is_accepted": false, "score": 1, "last_activity_date": 1601990405, "last_edit_date": 1601990405, "creation_date": 1601983490, "answer_id": 64224801, "question_id": 54062534, "link": "https://stackoverflow.com/questions/54062534/disabling-graphql-introspection-requests-on-production/64224801#64224801", "title": "Disabling GraphQL introspection requests on production", "body": "<p>If someone is looking for a dynamic option, an approach might be to use a custom Analyzer.</p>\n<ol>\n<li>Pass a context variable such as authorize_introspection when calling your schema:</li>\n</ol>\n<pre><code>class GraphqlController &lt; ApplicationController\n\n  def execute\n    context = context.merge(authorize_introspection: admin?)\n\n    result = MySchema.execute(query, \n      variables: variables, \n      context: context, \n      operation_name: operation_name, \n      root_value: root_value\n    )\n    render json: result.to_json\n  end\n\n (...)\n</code></pre>\n<ol start=\"2\">\n<li>Then use it here</li>\n</ol>\n<pre><code>class QueryAnalyzer &lt; GraphQL::Analysis::AST::Analyzer\n\n  def on_leave_field(_node, _parent, visitor)\n    introspection_field_names = %w[__schema __type]\n    field_def = visitor.field_definition\n\n    if field_def.introspection? &amp;&amp; introspection_field_names.include?(field_def.graphql_name)\n      @introspection_present = true\n    end\n\n    super\n  end\n\n  def result\n    return if introspection?\n\n    GraphQL::AnalysisError.new('Not authorized to query schema internals')\n  end\n\n  private\n\n  def introspection?\n    @introspection_present &amp;&amp; introspection_authorized?\n  end\n\n  def introspection_authorized?\n    ENV['DISABLE_INTROSPECTION_ENTRY_POINTS'] != 'true' &amp;&amp; query.context[:authorize_introspection]\n  end\nend\n</code></pre>\n<ol start=\"3\">\n<li>Make the declaration on the schema</li>\n</ol>\n<pre><code>  class MySchema &lt; GraphQL::Schema\n\n    use GraphQL::Analysis::AST\n    query_analyzer QueryAnalyzer\n\n    (...)\n  end\n</code></pre>\n<p>source: <a href=\"https://github.com/rmosolgo/graphql-ruby/issues/1240#issuecomment-393936456\" rel=\"nofollow noreferrer\">https://github.com/rmosolgo/graphql-ruby/issues/1240#issuecomment-393936456</a></p>\n"}], "owner": {"reputation": 23, "user_id": 10669788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XReuj.png?s=128&g=1", "display_name": "SleepyShiba", "link": "https://stackoverflow.com/users/10669788/sleepyshiba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 54063000, "answer_count": 3, "score": 2, "last_activity_date": 1601990405, "creation_date": 1546785201, "last_edit_date": 1546785306, "question_id": 54062534, "link": "https://stackoverflow.com/questions/54062534/disabling-graphql-introspection-requests-on-production", "title": "Disabling GraphQL introspection requests on production", "body": "<p>For company policies reasons I must disable the introspection feature of <code>graphql-ruby</code> gem (making the <code>__schema</code> requests fail / return 404).</p>\n\n<p>How do I achieve this?</p>\n\n<p>The application is based on Ruby on Rails version 5.2.2 and the <code>graphql-ruby</code> gem version is 1.8.12.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "api", "render"], "comments": [{"owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "edited": false, "score": 0, "creation_date": 1546784558, "post_id": 54062410, "comment_id": 94957920, "body": "Did you just omit posting the surrounding <code>&lt;%= %&gt;</code> in your <code>.erb</code> file or did you forget them in the original, too?"}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "reply_to_user": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "edited": false, "score": 0, "creation_date": 1546785013, "post_id": 54062410, "comment_id": 94958075, "body": "Hi, i have made changes in question and remove unecessary code."}, {"owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "edited": false, "score": 0, "creation_date": 1546785633, "post_id": 54062410, "comment_id": 94958258, "body": "Try switching <code>&lt;%=</code> and <code>&lt;%</code> in your template. The former is used to actually render the result of the Ruby code into the template while the latter is for just running arbitrary code."}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "reply_to_user": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "edited": false, "score": 0, "creation_date": 1546785757, "post_id": 54062410, "comment_id": 94958288, "body": "giving blank page, i need response like above mentioned"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1546786154, "post_id": 54062610, "comment_id": 94958400, "body": "hi, there is no line break  all coming lsingle line,  <code>[{&quot;type&quot;:&quot;Post&quot;,&quot;content&quot;:&quot;ededed&quot;,&quot;user&quot;:{&quot;type&quot;:&quot;User&quot;,&quot;na&zwnj;&#8203;me&quot;:&quot;aaa@aaa.aaa&quot;},&quot;&zwnj;&#8203;comments&quot;:[]},{&quot;type&zwnj;&#8203;&quot;:&quot;Post&quot;,&quot;content&quot;:&quot;&zwnj;&#8203;123sss&quot;,&quot;user&quot;:{&quot;typ&zwnj;&#8203;e&quot;:&quot;User&quot;,&quot;name&quot;:&quot;ss&zwnj;&#8203;s@sss.sss&quot;},&quot;comment&zwnj;&#8203;s&quot;:[{&quot;type&quot;:&quot;Comment&zwnj;&#8203;&quot;,&quot;content&quot;:&quot;werfefd&zwnj;&#8203;&quot;,&quot;user&quot;:{&quot;type&quot;:&quot;Us&zwnj;&#8203;er&quot;,&quot;name&quot;:&quot;aaa@aaa.&zwnj;&#8203;aaa&quot;}}]},{&quot;type&quot;:&quot;Po&zwnj;&#8203;st&quot;,&quot;content&quot;:&quot;aesrd&zwnj;&#8203;tasdfdgfhjrdtuiuihkj&zwnj;&#8203;hgfd&quot;,&quot;user&quot;:{&quot;type&quot;&zwnj;&#8203;:&quot;User&quot;,&quot;name&quot;:&quot;aaa@&zwnj;&#8203;aaa.aaa&quot;},&quot;comments&quot;&zwnj;&#8203;:[{&quot;comments&quot;:[]}]</code>"}, {"owner": {"reputation": 1275, "user_id": 2903313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1623b00b100930ac65e69a8069cd28?s=128&d=identicon&r=PG", "display_name": "Roc Khalil", "link": "https://stackoverflow.com/users/2903313/roc-khalil"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1546786292, "post_id": 54062610, "comment_id": 94958461, "body": "@AnshulEnbake what ? what is intentinging ?"}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1546787408, "post_id": 54062610, "comment_id": 94958754, "body": "I meant the same line and thanks for the support. please guide how to make that structure @RocKhalil"}, {"owner": {"reputation": 1275, "user_id": 2903313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1623b00b100930ac65e69a8069cd28?s=128&d=identicon&r=PG", "display_name": "Roc Khalil", "link": "https://stackoverflow.com/users/2903313/roc-khalil"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1546787947, "post_id": 54062610, "comment_id": 94958892, "body": "@AnshulEnbake basically, JSON response should be as tiny as it can be; so this is the optimal solution. If you want to see it prettified, use any online tool to prettify it - I personally use <a href=\"http://jsonviewer.stack.hu\" rel=\"nofollow noreferrer\">jsonviewer.stack.hu</a>"}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1546838587, "post_id": 54062610, "comment_id": 94970772, "body": "Hi @RocKhalil how can i restrict json response data for only first 50 post."}, {"owner": {"reputation": 1275, "user_id": 2903313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1623b00b100930ac65e69a8069cd28?s=128&d=identicon&r=PG", "display_name": "Roc Khalil", "link": "https://stackoverflow.com/users/2903313/roc-khalil"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1546851011, "post_id": 54062610, "comment_id": 94974822, "body": "@AnshulEnbake you&#39;ll have to add a <code>limit</code> to your <code>@posts</code>; <code>@posts = Post.all.order(&quot;created_at DESC&quot;).limit(50)</code>; you can use pagination gems or create your own using <code>limit</code> and <code>offset</code>. btw, if you think my comments was valid, please mark it as the answer and upvote it :-) this is the basic usage of stackoverflow."}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1546862256, "post_id": 54062610, "comment_id": 94980711, "body": "Thanks, mate :) can&#39;t upvote as a newbie here. Stack overflow Declining my request for upvote."}, {"owner": {"reputation": 1275, "user_id": 2903313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1623b00b100930ac65e69a8069cd28?s=128&d=identicon&r=PG", "display_name": "Roc Khalil", "link": "https://stackoverflow.com/users/2903313/roc-khalil"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1546868987, "post_id": 54062610, "comment_id": 94984245, "body": "@AnshulEnbake haha no worries :-) glad I was able to help :-D"}], "tags": [], "owner": {"reputation": 1275, "user_id": 2903313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1623b00b100930ac65e69a8069cd28?s=128&d=identicon&r=PG", "display_name": "Roc Khalil", "link": "https://stackoverflow.com/users/2903313/roc-khalil"}, "is_accepted": true, "score": 0, "last_activity_date": 1546785722, "creation_date": 1546785722, "answer_id": 54062610, "question_id": 54062410, "link": "https://stackoverflow.com/questions/54062410/i-am-trying-to-get-a-custom-json-in-rails-app-to-fetch-nested-user-data-and-thei/54062610#54062610", "title": "I am trying to get a custom json in rails app to fetch nested user data and their post respectivelly but page is not displaying right content", "body": "<p>First, you'll need to override the <code>to_json</code> in your models:</p>\n\n<p><strong>app/models/post.rb</strong></p>\n\n<pre><code>def to_json\n  return {\n    type: 'Post',\n    content: self.content,\n    user: self.user ? self.user.to_json : nil,\n    comments: self.comments.map(&amp;:to_json)\n  }\nend\n</code></pre>\n\n<p><strong>app/models/user.rb</strong></p>\n\n<pre><code>def to_json\n  return {\n    type: 'User',\n    name: self.name\n  }\nend\n</code></pre>\n\n<p><strong>app/models/comment.rb</strong></p>\n\n<pre><code>def to_json\n  return {\n    type: 'Comment',\n    content: self.content,\n    user: self.user ? self.user.to_json : nil,\n  }\nend\n</code></pre>\n\n<p>Then in your controller, do something like:</p>\n\n<pre><code>def data\n    @posts = Post.all.order(\"created_at DESC\")\n    render json: @posts.map(&amp;:to_json), status: :ok\nend\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 54062610, "answer_count": 1, "score": 0, "last_activity_date": 1546785722, "creation_date": 1546784307, "last_edit_date": 1546784913, "question_id": 54062410, "link": "https://stackoverflow.com/questions/54062410/i-am-trying-to-get-a-custom-json-in-rails-app-to-fetch-nested-user-data-and-thei", "title": "I am trying to get a custom json in rails app to fetch nested user data and their post respectivelly but page is not displaying right content", "body": "<p>I have 3 model user, post and comment.\nthe user can have multiple post and comments.\nI need to produce the JSON for last 50 post only.\n I am not using rails convention, so i have to write that in neewsfeed_controller.\nThank for the support.</p>\n\n<p>class NewsfeedsController &lt; ApplicationController\n    respond_to :json</p>\n\n<pre><code>def build\n    @posts = Post.all.order(\"created_at DESC\")\n    render json: {:event =&gt; @posts}\nend\n\n\ndef data\n    @posts = Post.all.order(\"created_at DESC\")\n    render :partial =&gt; \"newsfeeds/data.json\"\nend\n\nprivate\n\ndef post_params\n    params.require(:post).permit(:content)\nend\n\ndef find_post\n    @post = Post.find(params[:id])\n\nend\n</code></pre>\n\n<p>end</p>\n\n<p>In View: data.json.erb</p>\n\n<pre><code> &lt;%= res = {\n  :posts =&gt; @posts.map do |post|\n\n  end\n} %&gt;\n\n&lt;% res.to_json.html_safe %&gt;\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>get 'build' =&gt; 'newsfeeds#build'\nget 'data' =&gt; 'newsfeeds#data', :defaults =&gt; { :format =&gt; 'json' }\n</code></pre>\n\n<p>Form build i am getting data.\nbut i want custom json format from <code>data.json</code>,</p>\n\n<h1>Response Format which i want :</h1>\n\n<pre><code>[\n  {\n    \"type\": \"Post\",\n    \"content\": \"First post\",\n    \"user\": {\n      \"type\": \"User\",\n      \"name\": \"Luke\"\n    },\n    \"comments\": [\n      {\n        \"type\": \"Comment\",\n        \"user\": {\n          \"type\": \"User\",\n          \"name\": \"Leia\"\n        },\n        \"content\": \"First comment\"\n      },\n      {\n        \"type\": \"Comment\",\n        \"user\": {\n          \"type\": \"User\",\n          \"name\": \"Han\"\n        },\n        \"content\": \"Second comment\"\n      },\n    ]\n  },\n  {\n    \"type\": \"Post\",\n    \"content\": \"Second post\",\n    \"user\": {\n      \"type\": \"User\",\n      \"name\": \"Darth Vader\"\n    },\n    \"comments\": [\n      {\n        \"type\": \"Comment\",\n        \"user\": {\n          \"type\": \"User\",\n          \"name\": \"Boba Fett\"\n        },\n        \"content\": \"Third comment\"\n      },\n      {\n        \"type\": \"Comment\",\n        \"user\": {\n          \"type\": \"User\",\n          \"name\": \"Jabba\"\n        },\n        \"content\": \"Fourth comment\"\n      },\n    ]\n  }\n]\n</code></pre>\n\n<p>Please guide.</p>\n\n<p>Currently, I am not able to get that format.</p>\n"}]