[{"tags": ["ruby-on-rails", "ruby", "ssl", "heroku", "lets-encrypt"], "comments": [{"owner": {"reputation": 4818, "user_id": 2538729, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zqfA1.jpg?s=128&g=1", "display_name": "Penkey Suresh", "link": "https://stackoverflow.com/users/2538729/penkey-suresh"}, "edited": false, "score": 0, "creation_date": 1477377077, "post_id": 39885361, "comment_id": 67728161, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/39907302/rails-5-heroku-with-lets-encrypt-ssl-trouble-getting-setup-configured\">Rails 5, Heroku with Let&#39;s Encrypt SSL - trouble getting setup configured</a>"}], "answers": [{"comments": [{"owner": {"reputation": 246, "user_id": 3088386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8615d029fa9e00334dc2b9d8655369a6?s=128&d=identicon&r=PG&f=1", "display_name": "pedantech", "link": "https://stackoverflow.com/users/3088386/pedantech"}, "edited": false, "score": 0, "creation_date": 1484254610, "post_id": 39885689, "comment_id": 70447002, "body": "The documentation was fixed on <a href=\"https://github.com/lgromanowski/letsencrypt-plugin/wiki/Installation-guide/_compare/9fc8d63550c216004ce26aa9454fb03157de4963...8df4f339829a4b4701a47b822190afe80d384762\" rel=\"nofollow noreferrer\">Oct 12, 2016</a>"}], "tags": [], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "is_accepted": false, "score": 1, "last_activity_date": 1475713719, "creation_date": 1475713719, "answer_id": 39885689, "question_id": 39885361, "link": "https://stackoverflow.com/questions/39885361/rails-5-letsencrypt-with-heroku/39885689#39885689", "title": "Rails 5: Letsencrypt with heroku", "body": "<p>For others using the same gem, the issue is that the template set out in the installation docs using single ' quotation marks for the inner and outer content. You need to switch the outer quotation marks for double \" quotation marks. </p>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477378874, "creation_date": 1475711221, "last_edit_date": 1477378874, "question_id": 39885361, "link": "https://stackoverflow.com/questions/39885361/rails-5-letsencrypt-with-heroku", "title": "Rails 5: Letsencrypt with heroku", "body": "<p>I'm trying to figure out how to add lets encrypt SSL to my Rails 5 app on heroku.</p>\n\n<p>I'm trying to use gem 'letsencrypt_plugin'</p>\n\n<p>I'm getting stuck on Step 3 of these instructions: <a href=\"https://github.com/lgromanowski/letsencrypt-plugin/wiki/Installation-guide\" rel=\"nofollow\">https://github.com/lgromanowski/letsencrypt-plugin/wiki/Installation-guide</a></p>\n\n<p>When I try to rake db:migrate, I get an error that says:</p>\n\n<pre><code>rake aborted!\nPsych::SyntaxError: (/Users/ooo/config/letsencrypt_plugin.yml): did not find expected key while parsing a block mapping at line 2 column 3\n</code></pre>\n\n<p>Line 2 of my config/letsencrypt_plugin.yml has:</p>\n\n<pre><code>endpoint: 'https://acme-v01.api.letsencrypt.org/'\n</code></pre>\n\n<p>I don't know if this setting is a template, that I'm supposed to change to something specific to my app (if it is, then what should it be changed to???).</p>\n\n<p>Can anyone see what's going wrong?</p>\n\n<p>This is a different problem to the identified duplicate. The problem specifically identifies an issue with the installation guide.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 1, "creation_date": 1475710943, "post_id": 39885319, "comment_id": 67057332, "body": "Please provide your controller code"}, {"owner": {"reputation": 99, "user_id": 6237078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa2ac8af2f24eff905ec4f947fdf145c?s=128&d=identicon&r=PG&f=1", "display_name": "tutoto", "link": "https://stackoverflow.com/users/6237078/tutoto"}, "reply_to_user": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475711656, "post_id": 39885319, "comment_id": 67057520, "body": "Done, but I think there is no special info inside"}, {"owner": {"reputation": 99, "user_id": 6237078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa2ac8af2f24eff905ec4f947fdf145c?s=128&d=identicon&r=PG&f=1", "display_name": "tutoto", "link": "https://stackoverflow.com/users/6237078/tutoto"}, "reply_to_user": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475712768, "post_id": 39885319, "comment_id": 67057761, "body": "@MoatazZaitoun This can work if :pin_maker it&#39;s an integer ? If the user want to save many artist ?"}, {"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475713244, "post_id": 39885319, "comment_id": 67057881, "body": "I don&#39;t know, try replace <code>params.require(:pin).permit(:title, :description, :image, :pin_maker)</code> with <code>params.require(:pin).permit(:title, :description, :image, :pin_makers =&gt; [])</code>"}, {"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475713468, "post_id": 39885319, "comment_id": 67057947, "body": "The thing you cant isolate a block of code from it&#39;s context, Some times you need to review the whole three Model, View and Controller to debug"}, {"owner": {"reputation": 99, "user_id": 6237078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa2ac8af2f24eff905ec4f947fdf145c?s=128&d=identicon&r=PG&f=1", "display_name": "tutoto", "link": "https://stackoverflow.com/users/6237078/tutoto"}, "reply_to_user": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475713552, "post_id": 39885319, "comment_id": 67057971, "body": "Tanks @MoatazZaitoun, well I finally found the problem, it&#39;s about the multiple selection. Because if I do the action deleting , { }, {:multiple =&gt; true}, it&#39;s working. So can I save diffrents id in a unique integer or should I create a new table for that ?"}, {"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "reply_to_user": {"reputation": 99, "user_id": 6237078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa2ac8af2f24eff905ec4f947fdf145c?s=128&d=identicon&r=PG&f=1", "display_name": "tutoto", "link": "https://stackoverflow.com/users/6237078/tutoto"}, "edited": false, "score": 0, "creation_date": 1475713644, "post_id": 39885319, "comment_id": 67057993, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/125042/discussion-between-moataz-zaitoun-and-tutoto\">continue this discussion in chat</a>."}], "owner": {"reputation": 99, "user_id": 6237078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa2ac8af2f24eff905ec4f947fdf145c?s=128&d=identicon&r=PG&f=1", "display_name": "tutoto", "link": "https://stackoverflow.com/users/6237078/tutoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475712963, "creation_date": 1475710801, "last_edit_date": 1475712963, "question_id": 39885319, "link": "https://stackoverflow.com/questions/39885319/collection-select-is-not-saving-the-data", "title": "Collection_select is not saving the data", "body": "<p>I encounter some problems in a simple action that I want to execute. \nTo explain the context, I'm creating new Pin where we can tag the artist of the painting (:pin_maker) from User table. The only condition is that the User is an artist\nCurrently, all seems good, but when I run the create function, it's not saving my Artist selection(or :pin maker)</p>\n\n<p>My code :</p>\n\n<p>The scope for te Artist =</p>\n\n<pre><code>scope :artist, -&gt; { where(artist: true) }\n</code></pre>\n\n<p>new pin(views) =</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n&lt;%= f.collection_select(:pin_maker, @users, :id, :pseudo, { }, {:multiple =&gt; true}) %&gt;\n</code></pre>\n\n<p></p>\n\n<p>controller pin =</p>\n\n<pre><code>    class PinsController &lt; ApplicationController\n  before_action :authenticate_user!\n  before_action :find_pin, only: [:show, :edit, :update, :destroy, :upvote, :downvote]\n\n  def index \n    @pins = Pin.all.order(\"created_at DESC\")\n  end \n\n  def show \n  end \n\n\n\n  def new\n   @pin = Pin.new\n   @users = User.all.artist\n  end\n\n  def create \n    @pin = current_user.pins.build(pin_params)\n    if @pin.save \n      redirect_to @pin, notice: \"successfully created!\"\n    else \n      render 'new'\n    end\n  end \n\n  def edit \n\n  end \n\n  def update \n    if @pin.update(pin_params)\n      redirect_to @pin, notice: \"successfully updated !\"\n    else \n      render 'edit'\n    end\n  end \n\n  def destroy\n    @pin.destroy\n    redirect_to root_path\n  end \n\n  def upvote \n    @pin.upvote_from current_user\n    redirect_to :back\n  end \n\n  def downvote\n    @pin.downvote_from current_user\n    redirect_to :back\n  end \n\n  private\n\n\n\n  def pin_params\n    params.require(:pin).permit(:title, :description, :image, :pin_maker)\n  end \n\n  def find_pin\n    @pin = Pin.find(params[:id])\n  end \n\nend\n</code></pre>\n\n<p>So if you ave any idea of what I should change to fix that, I'm here !</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3710, "user_id": 6523193, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V6rGA.jpg?s=128&g=1", "display_name": "Luka Kerr", "link": "https://stackoverflow.com/users/6523193/luka-kerr"}, "edited": false, "score": 0, "creation_date": 1475710634, "post_id": 39885288, "comment_id": 67057257, "body": "What was the actual command you tried to run? was it <code>rails console</code> ?"}, {"owner": {"reputation": 155, "user_id": 6913577, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2884638b689c74ea77cc1b1943b9adac?s=128&d=identicon&r=PG&f=1", "display_name": "Parker Harris", "link": "https://stackoverflow.com/users/6913577/parker-harris"}, "reply_to_user": {"reputation": 3710, "user_id": 6523193, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/V6rGA.jpg?s=128&g=1", "display_name": "Luka Kerr", "link": "https://stackoverflow.com/users/6523193/luka-kerr"}, "edited": false, "score": 0, "creation_date": 1475711831, "post_id": 39885288, "comment_id": 67057565, "body": "yes @LukaKerr\u0394 it was."}], "answers": [{"tags": [], "owner": {"reputation": 4667, "user_id": 268673, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/33abb5182937ebcc3765f224aa74c16d?s=128&d=identicon&r=PG", "display_name": "AndreDurao", "link": "https://stackoverflow.com/users/268673/andredurao"}, "is_accepted": false, "score": 1, "last_activity_date": 1475715472, "creation_date": 1475715472, "answer_id": 39885885, "question_id": 39885288, "link": "https://stackoverflow.com/questions/39885288/unable-to-execute-rails-console-command-ruby/39885885#39885885", "title": "Unable to Execute Rails console command Ruby", "body": "<p>There's something wrong with your <code>rvm</code>, it doesn't seems to be related with rails. Please verify if it's installed properly.</p>\n\n<p>Ensure that you've checked the rvm prerequisites on <a href=\"https://rvm.io/rvm/prerequisites\" rel=\"nofollow\">https://rvm.io/rvm/prerequisites</a></p>\n\n<p>and that your install is working properly, e.g. </p>\n\n<p>(from: <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow\">https://rvm.io/rvm/install</a>)\n<em>If installation and configuration were successful, RVM should now load whenever you open a new shell. This can be tested by executing the following command which should output rvm is a function as shown below.</em></p>\n\n<pre><code>$ type rvm | head -n 1\nrvm is a function\n</code></pre>\n\n<p>Check on your mac if <code>readline</code> has been properly compiled, or try to do a clean install ruby-2.3.0 again</p>\n\n<p>You can check on RVM regarding the package and autolibs on: <a href=\"https://rvm.io/packages/readline\" rel=\"nofollow\">https://rvm.io/packages/readline</a></p>\n"}, {"comments": [{"owner": {"reputation": 584, "user_id": 1026043, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fce6707e7ce87f5b890f4f492737014?s=128&d=identicon&r=PG", "display_name": "maml", "link": "https://stackoverflow.com/users/1026043/maml"}, "edited": false, "score": 1, "creation_date": 1476802214, "post_id": 39886129, "comment_id": 67494273, "body": "This is odd, same thing started happening to me outta nowhere this morning. Same version of Ruby (2.3.1) and using rbenv."}, {"owner": {"reputation": 50428, "user_id": 950427, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/hq0mB.jpg?s=128&g=1", "display_name": "Jared Burrows", "link": "https://stackoverflow.com/users/950427/jared-burrows"}, "edited": false, "score": 0, "creation_date": 1512231275, "post_id": 39886129, "comment_id": 82178108, "body": "Be prepared to wait a while if you run <code>brew cleanup --prune=30</code>."}], "tags": [], "owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "is_accepted": true, "score": 16, "last_activity_date": 1475717491, "creation_date": 1475717491, "answer_id": 39886129, "question_id": 39885288, "link": "https://stackoverflow.com/questions/39885288/unable-to-execute-rails-console-command-ruby/39886129#39886129", "title": "Unable to Execute Rails console command Ruby", "body": "<p>Might not be related, but I had the same thing happen to me today.</p>\n\n<p>I had a fully-functioning Ruby 2.3.1 working fine this morning. In my case, Ruby was compiled and installed by ruby-build and managed by rbenv.</p>\n\n<p>At one point today I updated Homebrew with</p>\n\n<pre><code>brew cleanup --prune=30\nbrew update\nbrew upgrade\n</code></pre>\n\n<p>One of the formulae upgraded was readline 7.0:</p>\n\n<pre><code>$ brew info readline\n...\n/usr/local/Cellar/readline/7.0 (45 files, 2M)\n  Poured from bottle on 2016-10-05 at 08:09:22\n</code></pre>\n\n<p>Shortly afterwords I found that my readline support for Ruby had become completely broken. I saw errors just like yours:</p>\n\n<pre><code>/Users/mbrictson/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/pry-0.10.4/lib/pry/config/default.rb:151:in `require': dlopen(/Users/mbrictson/.rbenv/versions/2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle, 9): Library not loaded: /usr/local/opt/readline/lib/libreadline.6.dylib (LoadError)\n  Referenced from: /Users/mbrictson/.rbenv/versions/2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle\n  Reason: image not found - /Users/mbrictson/.rbenv/versions/2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle\n  from /Users/mbrictson/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/pry-0.10.4/lib/pry/config/default.rb:151:in `lazy_readline'\n</code></pre>\n\n<p>The solution was to completely delete my Ruby installation and recompile it:</p>\n\n<pre><code>rm -rf ~/.rbenv/versions/2.3.1\nrbenv install 2.3.1\n</code></pre>\n\n<p>I know you are using rvm and not rbenv, but perhaps the solution in your case is similar: delete your Ruby installation and re-install it using rvm.</p>\n"}, {"tags": [], "owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "is_accepted": false, "score": 0, "last_activity_date": 1475776229, "creation_date": 1475776229, "answer_id": 39902582, "question_id": 39885288, "link": "https://stackoverflow.com/questions/39885288/unable-to-execute-rails-console-command-ruby/39902582#39902582", "title": "Unable to Execute Rails console command Ruby", "body": "<p>Same thing happened to me when I unwittingly ran <code>rvm requirements</code> after installing ruby 2.3.1.</p>\n\n<pre><code>rvm uninstall 2.3.1\nrvm   install 2.3.1\n</code></pre>\n\n<p>Above fixed it.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 1038090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xg2at.jpg?s=128&g=1", "display_name": "DSmith", "link": "https://stackoverflow.com/users/1038090/dsmith"}, "is_accepted": false, "score": 1, "last_activity_date": 1478535132, "creation_date": 1478535132, "answer_id": 40469640, "question_id": 39885288, "link": "https://stackoverflow.com/questions/39885288/unable-to-execute-rails-console-command-ruby/40469640#40469640", "title": "Unable to Execute Rails console command Ruby", "body": "<p>I had similar issue.  My Ruby was installed using HomeBrew.  In my case I needed to uninstall Ruby; install/link libyaml; and then reinstall ruby.</p>\n\n<pre><code>brew uninstall ruby\nbrew link libyaml\nbrew install ruby\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 3149786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac19af15a812022daf57059b90aba8ee?s=128&d=identicon&r=PG&f=1", "display_name": "Kitebuggy", "link": "https://stackoverflow.com/users/3149786/kitebuggy"}, "edited": false, "score": 1, "creation_date": 1608557583, "post_id": 41316685, "comment_id": 115612319, "body": "Thank you.  This saved me today +1"}], "tags": [], "owner": {"reputation": 231, "user_id": 6200880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c7046956a4f4855ccbed7472b79ac6?s=128&d=identicon&r=PG&f=1", "display_name": "sjgallen", "link": "https://stackoverflow.com/users/6200880/sjgallen"}, "is_accepted": false, "score": 11, "last_activity_date": 1482611832, "creation_date": 1482611832, "answer_id": 41316685, "question_id": 39885288, "link": "https://stackoverflow.com/questions/39885288/unable-to-execute-rails-console-command-ruby/41316685#41316685", "title": "Unable to Execute Rails console command Ruby", "body": "<p>A really fast and quick solution is to add rb-readline to your Gemfile. \n(In case the other solutions don't work and you want to move on until you have time to address the issue. I know it this is not ideal but it is a working solution.)</p>\n\n<p>In the GemFile: </p>\n\n<p><code>group :development do\n  gem 'rb-readline'\n end\n</code></p>\n\n<p>Now, just bundle install.  I found this solution on Option 4 at \n(<a href=\"https://github.com/guard/guard/wiki/Add-Readline-support-to-Ruby-on-Mac-OS-X\" rel=\"noreferrer\">https://github.com/guard/guard/wiki/Add-Readline-support-to-Ruby-on-Mac-OS-X</a>)\nI hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 6462315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4634ac1e08f316ef52695bad07444bc9?s=128&d=identicon&r=PG&f=1", "display_name": "samcervantes", "link": "https://stackoverflow.com/users/6462315/samcervantes"}, "is_accepted": false, "score": 0, "last_activity_date": 1514341781, "creation_date": 1514341781, "answer_id": 47985629, "question_id": 39885288, "link": "https://stackoverflow.com/questions/39885288/unable-to-execute-rails-console-command-ruby/47985629#47985629", "title": "Unable to Execute Rails console command Ruby", "body": "<p>Running this from the command line worked for me:</p>\n\n<pre><code>ln -s /usr/local/opt/readline/lib/libreadline.7.0.dylib /usr/local/opt/readline/lib/libreadline.6.dylib\n</code></pre>\n\n<p>from <a href=\"https://gist.github.com/zulhfreelancer/47efc39584cb9f006da43c41c014e03a\" rel=\"nofollow noreferrer\">github</a></p>\n"}], "owner": {"reputation": 155, "user_id": 6913577, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2884638b689c74ea77cc1b1943b9adac?s=128&d=identicon&r=PG&f=1", "display_name": "Parker Harris", "link": "https://stackoverflow.com/users/6913577/parker-harris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3324, "favorite_count": 1, "accepted_answer_id": 39886129, "answer_count": 6, "score": 11, "last_activity_date": 1514341781, "creation_date": 1475710533, "question_id": 39885288, "link": "https://stackoverflow.com/questions/39885288/unable-to-execute-rails-console-command-ruby", "title": "Unable to Execute Rails console command Ruby", "body": "<pre><code>/Users/parkerharris/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/irb/completion.rb:10:in `require': dlopen(/Users/parkerharris/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle, 9): Library not loaded: /usr/local/opt/readline/lib/libreadline.6.dylib (LoadError)\n  Referenced from: /Users/parkerharris/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle\n  Reason: image not found - /Users/parkerharris/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle\n    from /Users/parkerharris/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/irb/completion.rb:10:in `&lt;top (required)&gt;'\n    from /Users/parkerharris/.rvm/gems/ruby-2.3.0/gems/railties-5.0.0.1/lib/rails/commands/console.rb:3:in `require'\n    from /Users/parkerharris/.rvm/gems/ruby-2.3.0/gems/railties-5.0.0.1/lib/rails/commands/console.rb:3:in `&lt;top (required)&gt;'\n    from /Users/parkerharris/.rvm/gems/ruby-2.3.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:138:in `require'\n    from /Users/parkerharris/.rvm/gems/ruby-2.3.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:138:in `require_command!'\n    from /Users/parkerharris/.rvm/gems/ruby-2.3.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:68:in `console'\n    from /Users/parkerharris/.rvm/gems/ruby-2.3.0/gems/railties-5.0.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from /Users/parkerharris/.rvm/gems/ruby-2.3.0/gems/railties-5.0.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>This is my error screen after trying to execute the command. I've tried to uninstall and reinstall readline and that did not help. I am just learning rails and do not 100% know what I am doing (just following a guide) so this type of error is past my understanding. Thanks!</p>\n"}, {"tags": ["ruby", "selenium", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 5077888, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc4cee6732757f8cebd112275d377569?s=128&d=identicon&r=PG", "display_name": "priorww1", "link": "https://stackoverflow.com/users/5077888/priorww1"}, "edited": false, "score": 0, "creation_date": 1475756949, "post_id": 39885645, "comment_id": 67077585, "body": "I see the concept here. In your example, it makes sense because you&#39;re passing a finite integer into a variable then performing an expectation on that variable. However, I&#39;m a little confused how I can pass the entire contents of a page (the one I&#39;m checking for the word &#39;Search&#39;) into a variable, which I would then theoretically check for that string."}, {"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 1, "creation_date": 1475789755, "post_id": 39885645, "comment_id": 67097437, "body": "You can pass any object to <code>let</code>, it doesn&#39;t have to be a literal."}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 0, "last_activity_date": 1475792739, "last_edit_date": 1475792739, "creation_date": 1475713266, "answer_id": 39885645, "question_id": 39885201, "link": "https://stackoverflow.com/questions/39885201/error-in-ruby-rspec-webdriver-expected-respond-to-has-content/39885645#39885645", "title": "Error in Ruby/RSpec/WebDriver &gt; expected respond to &#39;has_content?&#39;", "body": "<p>This is happening because the <code>@browser</code> instance variable is not available to the <code>it</code> statement.  Notice that your error message doesn't have a reference to the object that it is performing an expectation on (i.e.  <code>expected  to respond to 'has_content?'</code>.</p>\n\n<p>Here's a contrived demonstration that shows it fail:</p>\n\n<pre><code>require 'rspec'\n\n@x = 1\n\ndescribe 'One' do\n  it 'should print 1' do\n    expect(@x).to eq 1\n  end\nend\n\nFailures:\n\n  1) One should print 1\n     Failure/Error: expect(@x).to eq 1\n\n       expected: 1\n            got: nil\n</code></pre>\n\n<p>And--by moving the instance variable into the <code>it</code> statement to available--the example passes:</p>\n\n<pre><code>require 'rspec'\n\ndescribe 'One' do\n  it 'should print 1' do\n    @x = 1\n    expect(@x).to eq 1\n  end\nend\n\n1 example, 0 failures\n</code></pre>\n\n<p>And--if you use <a href=\"http://www.rubydoc.info/gems/rspec-core/RSpec/Core/MemoizedHelpers/ClassMethods#let-instance_method\" rel=\"nofollow\"><code>let</code></a>--you can created a memoized variable that can be shared across examples:</p>\n\n<pre><code>require 'rspec'\n\ndescribe 'One' do\n\n  let(:x) { 1 }\n\n  it 'should print 1' do\n    expect(x).to eq 1\n  end\n\n  it 'should print 2' do\n    expect(x+1).to eq 2\n  end  \n\nend\n</code></pre>\n\n<p>Based on your example code, you could use a <code>before</code> block for setup and then use <a href=\"http://www.rubydoc.info/gems/rspec-core/RSpec/Core/MemoizedHelpers#subject-instance_method\" rel=\"nofollow\"><code>subject</code></a>, which is probably more appropriate than <code>let</code> (NOTE: snippet below is untested, and the difference between <code>let</code> and <code>subject</code> is covered in other SO answers, various blog posts, and rdoc):</p>\n\n<pre><code>describe 'ErrorCheck' do\n\n  before :all do\n    @browser = Selenium::WebDriver.for :firefox\n    @browser.get \"http://www.google.com\"\n  end\n\n  subject(:browser) {@browser}       # or let(:browser) {@browser}\n\n  it 'should log in to Trialnet' do\n    expect(@browser).to have_content('Search')\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 5077888, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cc4cee6732757f8cebd112275d377569?s=128&d=identicon&r=PG", "display_name": "priorww1", "link": "https://stackoverflow.com/users/5077888/priorww1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 530, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475792739, "creation_date": 1475709885, "question_id": 39885201, "link": "https://stackoverflow.com/questions/39885201/error-in-ruby-rspec-webdriver-expected-respond-to-has-content", "title": "Error in Ruby/RSpec/WebDriver &gt; expected respond to &#39;has_content?&#39;", "body": "<p>Can anyone explain this error?</p>\n\n<p>My <code>spec_helper.rb</code> requires <code>capybara</code>, <code>rspec</code>, and <code>selenium-webdriver</code>.</p>\n\n<p>My <code>test_spec.rb</code> file contains the following:</p>\n\n<pre><code>require_relative 'spec_helper'\n\n@browser = Selenium::WebDriver.for :firefox\n@browser.get \"http://www.google.com\"\n\ndescribe 'ErrorCheck' do\n  it 'should log in to Trialnet' do\n    expect(@browser).to have_content('Search')\n  end\nend\n</code></pre>\n\n<p>My error:</p>\n\n<pre><code>expected  to respond to `has_content?`\n./spec/webdriver3_spec.rb:9:in `block (2 levels) in &lt;top (required)&gt;'\n-e:1:in `load'\n-e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any idea why this expectation is failing? Is it returning a Boolean without the proper syntax to accept it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "string", "split"], "comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1475709216, "post_id": 39884969, "comment_id": 67056913, "body": "I just tried you code and it works ok for me. Can you provide more details about your code. A small correction: In your expected result the <code>&#39;Msci Spain&#39;</code>-value is missing."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475710652, "post_id": 39884969, "comment_id": 67057262, "body": "Please be more diligent with your formatting. It helps us help you, and others understand what you&#39;re asking."}, {"owner": {"reputation": 9, "user_id": 6295348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209457423783125/picture?type=large", "display_name": "Andrea D&#39;Allura", "link": "https://stackoverflow.com/users/6295348/andrea-dallura"}, "reply_to_user": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1475713503, "post_id": 39884969, "comment_id": 67057957, "body": "Yes @knut, sorry, I forgot <code>&#39;Msci Spain&#39;</code> in the expected result. I edited to correct it, thanks. Thanks @the Tin Man for correcting my post to improve formatting, I&#39;m rather new on StackOverflow."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475714104, "post_id": 39884969, "comment_id": 67058101, "body": "Will the format/order of values in <code>@array_output</code> ever vary or are those fields fixed?"}, {"owner": {"reputation": 9, "user_id": 6295348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209457423783125/picture?type=large", "display_name": "Andrea D&#39;Allura", "link": "https://stackoverflow.com/users/6295348/andrea-dallura"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475715997, "post_id": 39884969, "comment_id": 67058449, "body": "@the Tin Man I edited the question to include such information, thanks for your comment."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6295348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209457423783125/picture?type=large", "display_name": "Andrea D&#39;Allura", "link": "https://stackoverflow.com/users/6295348/andrea-dallura"}, "edited": false, "score": 0, "creation_date": 1475712389, "post_id": 39885145, "comment_id": 67057690, "body": "Quotes missing are also ok. I tried this one but it fill the array only in the index 0. So <code>@array_output[0]</code> gives me 5 but <code>@array_output[1]</code> or other indexes give me nothing. I also used <code>@array_output = Array.new</code> because I feared <code>@array_output</code> was a variable and not an array but nothing change."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 9, "user_id": 6295348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209457423783125/picture?type=large", "display_name": "Andrea D&#39;Allura", "link": "https://stackoverflow.com/users/6295348/andrea-dallura"}, "edited": false, "score": 0, "creation_date": 1475713590, "post_id": 39885145, "comment_id": 67057981, "body": "That&#39;s weird. Maybe there&#39;s something wrong in other places, for example, the 2 <code>@array_output</code> actually are not the same object."}, {"owner": {"reputation": 9, "user_id": 6295348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209457423783125/picture?type=large", "display_name": "Andrea D&#39;Allura", "link": "https://stackoverflow.com/users/6295348/andrea-dallura"}, "edited": false, "score": 0, "creation_date": 1475715077, "post_id": 39885145, "comment_id": 67058287, "body": "If I use <code>split()</code> it fills the array more than in the 0 index (tough incorrectly splitting between words too). Maybe there&#39;s something wrong in parse_line arguments?"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1475710682, "last_edit_date": 1475710682, "creation_date": 1475709564, "answer_id": 39885145, "question_id": 39884969, "link": "https://stackoverflow.com/questions/39884969/how-to-split-a-string-by-whitespaces-except-between-words-using-a-regexp/39885145#39885145", "title": "How to split a string by whitespaces except between words using a regexp", "body": "<p>I just tried with <code>CSV</code> and it worked except the quotes are missing. If it's okay to you then</p>\n\n<pre><code>require 'csv'\n\n@output = \"5 490 'Msci Italy' 'Msci Germany' 'Msci France' 'Msci Spain' 'Msci Emu' '05/01/2007' '12/01/2007' '19/01/2007' '26/01/2007' '02/02/2007' 0.2000 0.1996 0.1994 0.2001 0.1983\"\n\n@array_output = CSV.parse_line(@output, col_sep: \" \", quote_char: \"'\")\n#=&gt; [\"5\", \"490\", \"Msci Italy\", \"Msci Germany\", \"Msci France\", \"Msci Spain\", \"Msci Emu\", \"05/01/2007\", \"12/01/2007\", \"19/01/2007\", \"26/01/2007\", \"02/02/2007\", \"0.2000\", \"0.1996\", \"0.1994\", \"0.2001\", \"0.1983\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475713965, "post_id": 39885379, "comment_id": 67058068, "body": "Nowhere in your question did you say that. When asking, we expect you to provide everything we need to know. &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. If the data is variable, then you&#39;re best off using CSV and changing your separator to spaces, and accept the fact you won&#39;t get the wrapping single-quotes."}, {"owner": {"reputation": 9, "user_id": 6295348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209457423783125/picture?type=large", "display_name": "Andrea D&#39;Allura", "link": "https://stackoverflow.com/users/6295348/andrea-dallura"}, "edited": false, "score": 0, "creation_date": 1475715467, "post_id": 39885379, "comment_id": 67058354, "body": "To clarify for readers: I deleted my previous comment where I stated I couldn&#39;t accept fixed solution because I saw a new edit on the answer that seemed to represent a more flexible solution. In the meantime the user replied to my deleted comment."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 9, "user_id": 6295348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209457423783125/picture?type=large", "display_name": "Andrea D&#39;Allura", "link": "https://stackoverflow.com/users/6295348/andrea-dallura"}, "edited": false, "score": 0, "creation_date": 1475770062, "post_id": 39885379, "comment_id": 67087122, "body": "If the order/format of the output string is always the same, then the above solutions will work. Length of fields won&#39;t matter, only that they occur in the specified order. After asking a question it&#39;s important to wait several hours at a minimum. SO is a global site so you want to allow time for those around the world to offer help and formulate their answers. It takes time to write a detailed/educational answer and there often are multiple edits in the process."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": -1, "last_activity_date": 1475713457, "last_edit_date": 1475713457, "creation_date": 1475711385, "answer_id": 39885379, "question_id": 39884969, "link": "https://stackoverflow.com/questions/39884969/how-to-split-a-string-by-whitespaces-except-between-words-using-a-regexp/39885379#39885379", "title": "How to split a string by whitespaces except between words using a regexp", "body": "<p>First off, <code>split</code> isn't the right tool, and defining a pattern for <code>split</code> to use that could result in the right output would be a nightmare. Instead, here's how I'd go about breaking it down:</p>\n\n<pre><code>regex = /\n(\\d+)\n\\s+\n(\\d+)\n\\s+\n('[^']+')\n\\s+\n('[^']+')\n\\s+\n('[^']+')\n\\s+\n('[^']+')\n\\s+\n('[^']+')\n\\s+\n('[^']+')\n\\s+\n('[^']+')\n\\s+\n('[^']+')\n\\s+\n('[^']+')\n\\s+\n('[^']+')\n\\s+\n([\\d.]+)\n\\s+\n([\\d.]+)\n\\s+\n([\\d.]+)\n\\s+\n([\\d.]+)\n\\s+\n([\\d.]+)\n/x\nmat = regex.match(\"5 490 'Msci Italy' 'Msci Germany' 'Msci France' 'Msci Spain' 'Msci Emu' '05/01/2007' '12/01/2007' '19/01/2007' '26/01/2007' '02/02/2007' 0.2000 0.1996 0.1994 0.2001 0.1983\")\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>require 'ap'\n\nap mat.captures \n\n# &gt;&gt; [\n# &gt;&gt;   [ 0] \"5\",\n# &gt;&gt;   [ 1] \"490\",\n# &gt;&gt;   [ 2] \"'Msci Italy'\",\n# &gt;&gt;   [ 3] \"'Msci Germany'\",\n# &gt;&gt;   [ 4] \"'Msci France'\",\n# &gt;&gt;   [ 5] \"'Msci Spain'\",\n# &gt;&gt;   [ 6] \"'Msci Emu'\",\n# &gt;&gt;   [ 7] \"'05/01/2007'\",\n# &gt;&gt;   [ 8] \"'12/01/2007'\",\n# &gt;&gt;   [ 9] \"'19/01/2007'\",\n# &gt;&gt;   [10] \"'26/01/2007'\",\n# &gt;&gt;   [11] \"'02/02/2007'\",\n# &gt;&gt;   [12] \"0.2000\",\n# &gt;&gt;   [13] \"0.1996\",\n# &gt;&gt;   [14] \"0.1994\",\n# &gt;&gt;   [15] \"0.2001\",\n# &gt;&gt;   [16] \"0.1983\"\n# &gt;&gt; ]\n</code></pre>\n\n<p>Doing a bit of rearranging for readability:</p>\n\n<pre><code>regex = /\n(\\d+) \\s+\n\n(\\d+) \\s+\n\n('[^']+') \\s+\n('[^']+') \\s+\n('[^']+') \\s+\n('[^']+') \\s+\n('[^']+') \\s+\n\n('[^']+') \\s+\n('[^']+') \\s+\n('[^']+') \\s+\n('[^']+') \\s+\n('[^']+') \\s+\n\n([\\d.]+) \\s+\n([\\d.]+) \\s+\n([\\d.]+) \\s+\n([\\d.]+) \\s+\n([\\d.]+)\n/x\nmat = regex.match(\"5 490 'Msci Italy' 'Msci Germany' 'Msci France' 'Msci Spain' 'Msci Emu' '05/01/2007' '12/01/2007' '19/01/2007' '26/01/2007' '02/02/2007' 0.2000 0.1996 0.1994 0.2001 0.1983\")\n\nrequire 'ap'\n\nap mat.captures \n</code></pre>\n\n<p>We still get:</p>\n\n<pre><code># &gt;&gt; [\n# &gt;&gt;   [ 0] \"5\",\n# &gt;&gt;   [ 1] \"490\",\n# &gt;&gt;   [ 2] \"'Msci Italy'\",\n# &gt;&gt;   [ 3] \"'Msci Germany'\",\n# &gt;&gt;   [ 4] \"'Msci France'\",\n# &gt;&gt;   [ 5] \"'Msci Spain'\",\n# &gt;&gt;   [ 6] \"'Msci Emu'\",\n# &gt;&gt;   [ 7] \"'05/01/2007'\",\n# &gt;&gt;   [ 8] \"'12/01/2007'\",\n# &gt;&gt;   [ 9] \"'19/01/2007'\",\n# &gt;&gt;   [10] \"'26/01/2007'\",\n# &gt;&gt;   [11] \"'02/02/2007'\",\n# &gt;&gt;   [12] \"0.2000\",\n# &gt;&gt;   [13] \"0.1996\",\n# &gt;&gt;   [14] \"0.1994\",\n# &gt;&gt;   [15] \"0.2001\",\n# &gt;&gt;   [16] \"0.1983\"\n# &gt;&gt; ]\n</code></pre>\n\n<p>Even that is a bit messy, so you'll find in complex patterns, or code that needs to be easily maintained and understandable, that they've broken the pattern generation down into small steps and let the language handle building the complex pattern, something like this:</p>\n\n<pre><code>SINGLE_QUOTED_PATTERN = \"('[^']+')\"\nINTEGER_PATTERN = '(\\d+)'\nFLOAT_PATTERN = '([\\d.]+)'\nWHITE_SPACE_PATTERN = '\\s+'\n\nREGEX_STRING = [\n  [INTEGER_PATTERN] * 2,\n  [SINGLE_QUOTED_PATTERN] * 10,\n  [FLOAT_PATTERN] * 5\n].flatten.join(WHITE_SPACE_PATTERN) \n\nREGEX = /#{REGEX_STRING}/\n# =&gt; /(\\d+)\\s+(\\d+)\\s+('[^']+')\\s+('[^']+')\\s+('[^']+')\\s+('[^']+')\\s+('[^']+')\\s+('[^']+')\\s+('[^']+')\\s+('[^']+')\\s+('[^']+')\\s+('[^']+')\\s+([\\d.]+)\\s+([\\d.]+)\\s+([\\d.]+)\\s+([\\d.]+)\\s+([\\d.]+)/\n\ndata = \"5 490 'Msci Italy' 'Msci Germany' 'Msci France' 'Msci Spain' 'Msci Emu' '05/01/2007' '12/01/2007' '19/01/2007' '26/01/2007' '02/02/2007' 0.2000 0.1996 0.1994 0.2001 0.1983\"\n\nmat = REGEX.match(data)\n</code></pre>\n\n<p>Which, again, results in:</p>\n\n<pre><code>require 'ap'\n\nap mat.captures \n\n# &gt;&gt; [\n# &gt;&gt;   [ 0] \"5\",\n# &gt;&gt;   [ 1] \"490\",\n# &gt;&gt;   [ 2] \"'Msci Italy'\",\n# &gt;&gt;   [ 3] \"'Msci Germany'\",\n# &gt;&gt;   [ 4] \"'Msci France'\",\n# &gt;&gt;   [ 5] \"'Msci Spain'\",\n# &gt;&gt;   [ 6] \"'Msci Emu'\",\n# &gt;&gt;   [ 7] \"'05/01/2007'\",\n# &gt;&gt;   [ 8] \"'12/01/2007'\",\n# &gt;&gt;   [ 9] \"'19/01/2007'\",\n# &gt;&gt;   [10] \"'26/01/2007'\",\n# &gt;&gt;   [11] \"'02/02/2007'\",\n# &gt;&gt;   [12] \"0.2000\",\n# &gt;&gt;   [13] \"0.1996\",\n# &gt;&gt;   [14] \"0.1994\",\n# &gt;&gt;   [15] \"0.2001\",\n# &gt;&gt;   [16] \"0.1983\"\n# &gt;&gt; ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6709, "user_id": 3640161, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/065307b80129366f064b9b99811658aa?s=128&d=identicon&r=PG", "display_name": "Tiago Lopo", "link": "https://stackoverflow.com/users/3640161/tiago-lopo"}, "is_accepted": false, "score": 0, "last_activity_date": 1476559373, "last_edit_date": 1476559373, "creation_date": 1476558668, "answer_id": 40063161, "question_id": 39884969, "link": "https://stackoverflow.com/questions/39884969/how-to-split-a-string-by-whitespaces-except-between-words-using-a-regexp/40063161#40063161", "title": "How to split a string by whitespaces except between words using a regexp", "body": "<p>You can make use of Negative Look Behind and Negative Look Ahead: </p>\n\n<p><code>/(?&lt;![a-zA-z])\\s+(?![a-zA-z])/</code></p>\n\n<pre><code>output = \"5 490 'Msci Italy' 'Msci Germany' 'Msci France' 'Msci Spain' 'Msci Emu' '05/01/2007' '12/01/2007' '19/01/2007' '26/01/2007' '02/02/2007' 0.2000 0.1996 0.1994 0.2001 0.1983\"\n\noutput.split(/(?&lt;![a-zA-z])\\s+(?![a-zA-z])/).each { |e| puts e }\n</code></pre>\n\n<p>Ouput: </p>\n\n<pre><code>5\n490\n'Msci Italy'\n'Msci Germany'\n'Msci France'\n'Msci Spain'\n'Msci Emu'\n'05/01/2007'\n'12/01/2007'\n'19/01/2007'\n'26/01/2007'\n'02/02/2007'\n0.2000\n0.1996\n0.1994\n0.2001\n0.1983\n</code></pre>\n\n<p>Let's break down this Regex: </p>\n\n<p><code>(?&lt;![a-zA-z])</code> That's the negative look behind</p>\n\n<p><code>\\s+</code> One or more white spaces</p>\n\n<p><code>(?![a-zA-z])</code> Tha's the negative look ahead</p>\n"}], "owner": {"reputation": 9, "user_id": 6295348, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209457423783125/picture?type=large", "display_name": "Andrea D&#39;Allura", "link": "https://stackoverflow.com/users/6295348/andrea-dallura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1476559373, "creation_date": 1475708449, "last_edit_date": 1475715915, "question_id": 39884969, "link": "https://stackoverflow.com/questions/39884969/how-to-split-a-string-by-whitespaces-except-between-words-using-a-regexp", "title": "How to split a string by whitespaces except between words using a regexp", "body": "<p>I'm using <code>split</code> to separate this string:</p>\n\n<pre><code>@output = \"5 490 'Msci Italy' 'Msci Germany' 'Msci France' 'Msci Spain' 'Msci Emu' '05/01/2007' '12/01/2007' '19/01/2007' '26/01/2007' '02/02/2007' 0.2000 0.1996 0.1994 0.2001 0.1983\"\n</code></pre>\n\n<p>I want to obtain an array in this form:</p>\n\n<pre><code>@array_output = [\"5\", \"490\", \"'Msci Italy'\", \"'Msci Germany'\", \"'Msci France'\", \"'Msci Spain'\", \"'Msci Emu'\", \"'05/01/2007'\", \"'12/01/2007'\", \"'19/01/2007'\", \"'26/01/2007'\", \"'02/02/2007'\", \"0.2000\", \"0.1996\", \"0.1994\", \"0.2001\", \"0.1983\"]\n</code></pre>\n\n<p>I tried using:</p>\n\n<pre><code>@array_output = @output.split(/\\s(?!\\w)|\\s(?=\\d)/)\n</code></pre>\n\n<p>This works on Rubular but when I try to  print <code>&lt;%= @array_output[0] %&gt;</code>, or any other index, into a html.erb page in Rails then I obtain nothing.</p>\n\n<p>The <code>@output</code> string could have different lenght, this is only a small sample to show all possible formats. Order of formats is always the same tough.</p>\n\n<p>I initialized <code>@array_output</code> using <code>@array_output = Array.new</code> but it doesn't affect the result.</p>\n\n<p>I also tried <code>scan</code> instead of <code>split</code> but nothing changed too.</p>\n\n<p>What's wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "algolia"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475714299, "post_id": 39884959, "comment_id": 67058149, "body": "Welcome to Stack Overflow. While the error and the pry output is good, we need to see the minimum script that reproduces the problem. See &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 1186842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53556fbad6ff78c5ea07afa5c2a59f2?s=128&d=identicon&r=PG", "display_name": "user1186842", "link": "https://stackoverflow.com/users/1186842/user1186842"}, "edited": false, "score": 1, "creation_date": 1475755009, "post_id": 39885298, "comment_id": 67076281, "body": "Thanks Redox.  That&#39;s correct - I&#39;m trying to use the Rails integration and I did actually configure it with  <code>AlgoliaSearch.configuration = { application_id: &#39;xxx&#39;, api_key: &#39;xxx&#39; }</code>  in the initialiser file. So I&#39;m baffled as to why the Algolia API still failed to initialise. It&#39;s only failing locally as it initialised properly in my staging environment.  FYI - The Algolia error was noticed in the Sidekiq output."}, {"owner": {"reputation": 4269, "user_id": 2950067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae00b72eace77983bdf57476141340dc?s=128&d=identicon&r=PG", "display_name": "redox", "link": "https://stackoverflow.com/users/2950067/redox"}, "reply_to_user": {"reputation": 63, "user_id": 1186842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53556fbad6ff78c5ea07afa5c2a59f2?s=128&d=identicon&r=PG", "display_name": "user1186842", "link": "https://stackoverflow.com/users/1186842/user1186842"}, "edited": false, "score": 0, "creation_date": 1475773391, "post_id": 39885298, "comment_id": 67089007, "body": "Weird :/ Do you think your Sidekiq worker is not loading the full environment , avoiding the configuration to be set on time?"}, {"owner": {"reputation": 4269, "user_id": 2950067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae00b72eace77983bdf57476141340dc?s=128&d=identicon&r=PG", "display_name": "redox", "link": "https://stackoverflow.com/users/2950067/redox"}, "reply_to_user": {"reputation": 63, "user_id": 1186842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53556fbad6ff78c5ea07afa5c2a59f2?s=128&d=identicon&r=PG", "display_name": "user1186842", "link": "https://stackoverflow.com/users/1186842/user1186842"}, "edited": false, "score": 0, "creation_date": 1475773420, "post_id": 39885298, "comment_id": 67089022, "body": "Also, did you put that <code>AlgoliaSearch.configuration</code> in the a <code>config&#47;initializers&#47;algolia.rb</code> file?"}, {"owner": {"reputation": 63, "user_id": 1186842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53556fbad6ff78c5ea07afa5c2a59f2?s=128&d=identicon&r=PG", "display_name": "user1186842", "link": "https://stackoverflow.com/users/1186842/user1186842"}, "edited": false, "score": 1, "creation_date": 1475806541, "post_id": 39885298, "comment_id": 67101788, "body": "Redox, you&#39;re brilliant! My Sidekiq was not loading the full environment. Had to restart my terminal window and voila! Thanks for your help."}, {"owner": {"reputation": 1725, "user_id": 4738391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nCUGI.jpg?s=128&g=1", "display_name": "Zia Ul Rehman Mughal", "link": "https://stackoverflow.com/users/4738391/zia-ul-rehman-mughal"}, "edited": false, "score": 1, "creation_date": 1486988263, "post_id": 39885298, "comment_id": 71568920, "body": "It says on github: &quot;Create a new file config/initializers/algoliasearch.rb&quot; i tried this and algolia.rb both names, but still i am unable to get it configured in my console."}], "tags": [], "owner": {"reputation": 4269, "user_id": 2950067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae00b72eace77983bdf57476141340dc?s=128&d=identicon&r=PG", "display_name": "redox", "link": "https://stackoverflow.com/users/2950067/redox"}, "is_accepted": true, "score": 4, "last_activity_date": 1475710618, "creation_date": 1475710618, "answer_id": 39885298, "question_id": 39884959, "link": "https://stackoverflow.com/questions/39884959/algolia-search-unable-to-reindex-locally/39885298#39885298", "title": "Algolia search - Unable to reindex locally", "body": "<p>That's probably because you're <a href=\"https://github.com/algolia/algoliasearch-client-ruby/blob/6ea198bf5241eb4cdf30c4d97c104f0401cac9b7/lib/algolia/client.rb#L658\" rel=\"nofollow\">mixing up the 2 ways</a> to use the underlying Ruby API client. There are 2 ways to use the Algolia Ruby API client:</p>\n\n<ul>\n<li>with the singleton design pattern (1 global API client);</li>\n<li>or with regular N client instances.</li>\n</ul>\n\n<p>Looks like here you're trying to use the <strong>Rails</strong> integration which assume you have initialised the underlying API client globally (using the singleton design pattern).</p>\n\n<p>Using the Rails integration, rather than calling <code>Algolia::Client.new</code> you should use:</p>\n\n<pre><code>AlgoliaSearch.configuration = { application_id: 'xxx', api_key: 'xxx' }\n# this will call Algolia.init\n</code></pre>\n\n<p>You can find more documentation <a href=\"https://github.com/algolia/algoliasearch-rails#configuration\" rel=\"nofollow\">on GitHub</a>.</p>\n\n<hr>\n\n<p>If you want to use the underlying Ruby API client, without the Rails integration; you can choose between:</p>\n\n<p>Using the raw Ruby API client, the singleton way:</p>\n\n<pre><code>Algolia.init application_id: 'xxx', api_key: 'xxx'\nindex = Algolia::Index.new('myindex') # it will use the API client initialised globally\nindex.add_objects(...)\n</code></pre>\n\n<p>Using the raw Ruby API client, the N instances way:</p>\n\n<pre><code>client = Algolia::Client.new application_id: 'xxx', api_key: 'xxx'\nindex = client.init_index('myindex')\nindex.add_objects(...)\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 1186842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53556fbad6ff78c5ea07afa5c2a59f2?s=128&d=identicon&r=PG", "display_name": "user1186842", "link": "https://stackoverflow.com/users/1186842/user1186842"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 39885298, "answer_count": 1, "score": 1, "last_activity_date": 1475714216, "creation_date": 1475708375, "last_edit_date": 1475714216, "question_id": 39884959, "link": "https://stackoverflow.com/questions/39884959/algolia-search-unable-to-reindex-locally", "title": "Algolia search - Unable to reindex locally", "body": "<p>I'm using Algolia for the first time and trying to get reindexing to work locally but it's throwing the error below:</p>\n\n<pre><code>Algolia::AlgoliaError: API not initialized\n\n2016-09-30T06:18:00.071Z 50262 TID-oxqk9ev1w WARN: {\"class\":\"Search::SomeWorker\",\"args\":[2,false],\"retry\":5,\"queue\":\"default\",\"jid\":\"1519b78812e13d6df5fdb6a9\",\"created_at\":1475216280.067702,\"enqueued_at\":1475216280.067759,**\"error_message\":\"API not initialized\",\"error_class\":\"Algolia::AlgoliaError\"**,\"failed_at\":1475216280.0707068,\"retry_count\":0}\n**2016-09-30T06:18:00.071Z 50262 TID-oxqk9ev1w WARN: Algolia::AlgoliaError: API not initialized**\n2016-09-30T06:18:00.071Z 50262 TID-oxqk9ev1w WARN: /Users/xxx/.rvm/gems/ruby-2.3.1@foro/gems/algoliasearch-1.11.0/lib/algolia/client.rb:657:in `client'\n/Users/xxx/.rvm/gems/ruby-2.3.1@foro/gems/algoliasearch-1.11.0/lib/algolia/index.rb:11:in `initialize'\n/Users/xxx/.rvm/gems/ruby-2.3.1@foro/gems/algoliasearch-rails-1.15.0/lib/algoliasearch-rails.rb:229:in `new'\n/Users/xxx/.rvm/gems/ruby-2.3.1@foro/gems/algoliasearch-rails-1.15.0/lib/algoliasearch-rails.rb:229:in `initialize'\n/Users/xxx/.rvm/gems/ruby-2.3.1@foro/gems/algoliasearch-rails-1.15.0/lib/algoliasearch-rails.rb:647:in `new'\n/Users/xxx/.rvm/gems/ruby-2.3.1@foro/gems/algoliasearch-rails-1.15.0/lib/algoliasearch-rails.rb:647:in `algolia_ensure_init'\n/Users/xxx/.rvm/gems/ruby-2.3.1@foro/gems/algoliasearch-rails-1.15.0/lib/algoliasearch-rails.rb:492:in `block in algolia_index!'\n/Users/xxx/.rvm/gems/ruby-2.3.1@foro/gems/algoliasearch-rails-1.15.0/lib/algoliasearch-rails.rb:489:in `each'\n/Users/xxx/.rvm/gems/ruby-2.3.1@foro/gems/algoliasearch-rails-1.15.0/lib/algoliasearch-rails.rb:489:in `algolia_index!'\n/Users/xxx/.rvm/gems/ruby-2.3.1@foro/gems/algoliasearch-rails-1.15.0/lib/algoliasearch-rails.rb:792:in `algolia_index!'\n</code></pre>\n\n<p>I had no trouble connecting to the Algolia client as shown below:</p>\n\n<pre><code>[1] pry(main)&gt; Algolia::Client.new(application_id: xxx, api_key: xxx)\n=&gt; #&lt;Algolia::Client:0x007fe100329f40\n @api_key=\"xxx\",\n @application_id=\"xxx\",\n @batch_timeout=120,\n @connect_timeout=2,\n @headers=\n  {\"X-Algolia-API-Key\"=&gt;\"xxx\",\n   \"X-Algolia-Application-Id\"=&gt;\"xxx\",\n   \"Content-Type\"=&gt;\"application/json; charset=utf-8\",\n   \"User-Agent\"=&gt;\"Algolia for Ruby 1.11.0\"},\n @hosts=[\"xxx.algolia.net\", \"xxx-1.algolianet.com\", \"xxx-3.algolianet.com\", \"xxx-2.algolianet.com\"],\n @receive_timeout=30,\n @search_hosts=[\"xxx-dsn.algolia.net\", \"xxx-2.algolianet.com\", \"xxx-1.algolianet.com\", \"xxx-3.algolianet.com\"],\n @search_timeout=5,\n @send_timeout=30,\n @ssl=true,\n @ssl_version=nil&gt;\n</code></pre>\n\n<p>Any help would be great.</p>\n"}, {"tags": ["ruby", "heroku", "imagemagick"], "answers": [{"tags": [], "owner": {"reputation": 7856, "user_id": 79068, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/FNeR0.png?s=128&g=1", "display_name": "Ben Hull", "link": "https://stackoverflow.com/users/79068/ben-hull"}, "is_accepted": true, "score": 0, "last_activity_date": 1475708935, "creation_date": 1475708935, "answer_id": 39885045, "question_id": 39884723, "link": "https://stackoverflow.com/questions/39884723/can-i-use-custom-colour-profiles-with-imagemagick-on-heroku/39885045#39885045", "title": "Can I use custom colour profiles with ImageMagick on Heroku?", "body": "<p>So - after a whole day of tinkering, I found the answer myself 34 minutes after posting on SO.</p>\n\n<p>Removing the ImageMagick buildpack and using Heroku's built in version fixes the problem. Looks like it might have been a gap or a bug in the vendored imagemagick build.</p>\n"}], "owner": {"reputation": 7856, "user_id": 79068, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/FNeR0.png?s=128&g=1", "display_name": "Ben Hull", "link": "https://stackoverflow.com/users/79068/ben-hull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 39885045, "answer_count": 1, "score": 1, "last_activity_date": 1475708935, "creation_date": 1475706756, "question_id": 39884723, "link": "https://stackoverflow.com/questions/39884723/can-i-use-custom-colour-profiles-with-imagemagick-on-heroku", "title": "Can I use custom colour profiles with ImageMagick on Heroku?", "body": "<p>I'm having trouble preparing RGB previews of primarily-CMYK PDFs with Imagemagick on Heroku. I'm using IM's <code>convert</code> command, and the image (of the first page of the source PDF) is extracted fine, and saved fine, but the colour conversion is terrible.</p>\n\n<p>On my dev machine, the colour is really saturated and horrible. On Heroku, I get a very odd black-and-white image - almost like only one of the colour channels has been brought over.</p>\n\n<p>I've worked out that this can be fixed by providing colour profiles for the conversion. I've found open-source colour profiles, added them to my project, and this works fine on my dev machine. On Heroku, the convert command can't find the colour profiles.</p>\n\n<p>This is the <code>convert</code> command:</p>\n\n<p><code>convert /tmp/(sourcefilename)[0] -quality 80 -strip -profile /app/lib/assets/color_profiles/ISOcoated_v2_bas.ICC -profile /app/lib/assets/color_profiles/sRGBColorSpaceProfile.icm -colorspace sRGB -strip /tmp/(outputfilename).jpg</code></p>\n\n<p>And this is how I'm determining the path to the profile files:</p>\n\n<p><code>\"#{Rack::Directory.new('').root}/lib/assets/color_profiles\"</code></p>\n\n<p>I'm using Ruby/Rack/Dragonfly and the <a href=\"https://github.com/ello/heroku-buildpack-imagemagick\" rel=\"nofollow\">https://github.com/ello/heroku-buildpack-imagemagick</a> build pack for Heroku. </p>\n\n<p>Presumably this is because <code>convert</code> on Heroku is run from a different location to the app, so the path doesn't resolve correctly.</p>\n\n<p>So - am I doing this right? Is it even possible to give <code>convert</code> a path to a file inside my app? Or is this something I need to do at build time?</p>\n"}, {"tags": ["ruby", "macos", "command-line", "sass", "compass"], "comments": [{"owner": {"reputation": 993, "user_id": 1872510, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/5SpB0.jpg?s=128&g=1", "display_name": "JohnRobertPett", "link": "https://stackoverflow.com/users/1872510/johnrobertpett"}, "edited": false, "score": 0, "creation_date": 1475844560, "post_id": 39884645, "comment_id": 67119282, "body": "I have the same problem, did you solve?"}, {"owner": {"reputation": 1225, "user_id": 3654415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bfc9af1d8379b4dd53dc472e282ba701?s=128&d=identicon&r=PG", "display_name": "DanMad", "link": "https://stackoverflow.com/users/3654415/danmad"}, "reply_to_user": {"reputation": 993, "user_id": 1872510, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/5SpB0.jpg?s=128&g=1", "display_name": "JohnRobertPett", "link": "https://stackoverflow.com/users/1872510/johnrobertpett"}, "edited": false, "score": 0, "creation_date": 1475875483, "post_id": 39884645, "comment_id": 67135655, "body": "Not as yet. I was waiting for more of a response."}], "answers": [{"comments": [{"owner": {"reputation": 1225, "user_id": 3654415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bfc9af1d8379b4dd53dc472e282ba701?s=128&d=identicon&r=PG", "display_name": "DanMad", "link": "https://stackoverflow.com/users/3654415/danmad"}, "edited": false, "score": 0, "creation_date": 1475966911, "post_id": 39927417, "comment_id": 67157943, "body": "Sounds interesting. I will give this a try. May I ask what &quot;devel headers&quot; are?"}, {"owner": {"reputation": 36, "user_id": 6939651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db65e030f4ae90c63eb8e73a73f7a41?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro Gattuso", "link": "https://stackoverflow.com/users/6939651/sandro-gattuso"}, "reply_to_user": {"reputation": 1225, "user_id": 3654415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bfc9af1d8379b4dd53dc472e282ba701?s=128&d=identicon&r=PG", "display_name": "DanMad", "link": "https://stackoverflow.com/users/3654415/danmad"}, "edited": false, "score": 0, "creation_date": 1475978031, "post_id": 39927417, "comment_id": 67159916, "body": "Long story short, they are packages/libraries required to compile the new gem you&#39;re trying to install. This is usually done to maintain the application distributed lighter. In this other post there&#39;s a good explanation of *-devel packages <a href=\"http://stackoverflow.com/questions/2358801/what-are-devel-packages\">link</a>. It&#39;s referring to C instead of Ruby (there are differences between the 2 languages) but if you abstract from the technical implementation the concept is similar"}, {"owner": {"reputation": 1225, "user_id": 3654415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bfc9af1d8379b4dd53dc472e282ba701?s=128&d=identicon&r=PG", "display_name": "DanMad", "link": "https://stackoverflow.com/users/3654415/danmad"}, "edited": false, "score": 0, "creation_date": 1476148722, "post_id": 39927417, "comment_id": 67217660, "body": "Thank you @Sandro Gattuso. I installed XCode 8.0 and created a dummy project, then ran <code>gem install compass</code> with no luck. But running <code>sudo gem install compass</code> solved my problem and I was able to successfully install Compass."}, {"owner": {"reputation": 1225, "user_id": 3654415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bfc9af1d8379b4dd53dc472e282ba701?s=128&d=identicon&r=PG", "display_name": "DanMad", "link": "https://stackoverflow.com/users/3654415/danmad"}, "edited": false, "score": 0, "creation_date": 1476832913, "post_id": 39927417, "comment_id": 67510406, "body": "Hi @Sandro, could I have just downloaded X-Code Command Line Tools to solve this? I took it to mean download the 4.5GB version of X-Code on the App Store. This happened to work fine. But did you just mean the CLI tools?"}, {"owner": {"reputation": 36, "user_id": 6939651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db65e030f4ae90c63eb8e73a73f7a41?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro Gattuso", "link": "https://stackoverflow.com/users/6939651/sandro-gattuso"}, "reply_to_user": {"reputation": 1225, "user_id": 3654415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bfc9af1d8379b4dd53dc472e282ba701?s=128&d=identicon&r=PG", "display_name": "DanMad", "link": "https://stackoverflow.com/users/3654415/danmad"}, "edited": false, "score": 0, "creation_date": 1477094386, "post_id": 39927417, "comment_id": 67641462, "body": "@DanMad, in my case I was fine to install Xcode anyway because I needed it for development purposes. I suggested that because it worked for me and I thought it would have been the easiest solution, however it could be that CLI tools would have addressed the same (likely the base libraries are the same)"}], "tags": [], "owner": {"reputation": 36, "user_id": 6939651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4db65e030f4ae90c63eb8e73a73f7a41?s=128&d=identicon&r=PG&f=1", "display_name": "Sandro Gattuso", "link": "https://stackoverflow.com/users/6939651/sandro-gattuso"}, "is_accepted": true, "score": 2, "last_activity_date": 1475886075, "creation_date": 1475886075, "answer_id": 39927417, "question_id": 39884645, "link": "https://stackoverflow.com/questions/39884645/installing-compass-on-mac-os-x-10-12-sierra/39927417#39927417", "title": "Installing Compass on Mac OS X 10.12 Sierra", "body": "<p>It looks like you missing the devel headers.\nI had a similar issue with another gem (ffi) and I solved it installing XCode (v. 8.0).\nOnce downloaded make sure to open Xcode, some components are only installed after the first time you open it. After that try again to run <code>gem install</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8227337, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PH6yBdrkig0/AAAAAAAAAAI/AAAAAAAAAy4/BIYvntZ6uEo/photo.jpg?sz=128", "display_name": "Jared Brandon", "link": "https://stackoverflow.com/users/8227337/jared-brandon"}, "is_accepted": false, "score": 0, "last_activity_date": 1498667297, "creation_date": 1498667297, "answer_id": 44808022, "question_id": 39884645, "link": "https://stackoverflow.com/questions/39884645/installing-compass-on-mac-os-x-10-12-sierra/44808022#44808022", "title": "Installing Compass on Mac OS X 10.12 Sierra", "body": "<p>I installed Homebrew as part of one solution I was trying, which installs the Xcode Command Line tools. (I had intended to use Homebrew to install Ruby and Compass in a different directory because I was initially getting permissions errors when using <code>$ sudo gem install compass</code>.) Once I installed Homebrew, I was able to use <code>$ gem install compass</code> successfully.</p>\n"}], "owner": {"reputation": 1225, "user_id": 3654415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bfc9af1d8379b4dd53dc472e282ba701?s=128&d=identicon&r=PG", "display_name": "DanMad", "link": "https://stackoverflow.com/users/3654415/danmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3602, "favorite_count": 2, "accepted_answer_id": 39927417, "answer_count": 2, "score": 0, "last_activity_date": 1498667297, "creation_date": 1475706276, "last_edit_date": 1475707102, "question_id": 39884645, "link": "https://stackoverflow.com/questions/39884645/installing-compass-on-mac-os-x-10-12-sierra", "title": "Installing Compass on Mac OS X 10.12 Sierra", "body": "<p>I am working on two separate machines; one that has Compass installed on it from when the machine was running OS X Yosemite (happy with this one); and one that I am trying to install Compass on that is currently running OS X Sierra (Not so happy about this one).</p>\n\n<p>I had some trouble back in the day with <code>gem install compass</code> while running Yosemite and after searching Stack it seemed that the issue was a user could no longer write to the specified directory they were trying to when running this command. Some suggested using running <code>sudo gem install compass</code> (and this is how I got my first machine running Compass).</p>\n\n<p>With this second machine I run <code>sudo gem install compass</code> and received the following error:</p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing compass:\n    ERROR: Failed to build gem native extension.\n\n    /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb\nmkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/include/ruby.h\n\n\nGem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/ffi-1.9.14 for inspection.\nResults logged to /Library/Ruby/Gems/2.0.0/gems/ffi-1.9.14/ext/ffi_c/gem_make.out\n</code></pre>\n\n<p>I am not very familiar with CLI. Why am I unable to install Compass on Mac OS X Sierra 10.12?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 5760378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2a272332b1d8dfea01eaa73b2960256?s=128&d=identicon&r=PG&f=1", "display_name": "swellactually", "link": "https://stackoverflow.com/users/5760378/swellactually"}, "edited": false, "score": 0, "creation_date": 1475707296, "post_id": 39884686, "comment_id": 67056404, "body": "Thanks - the first point didn&#39;t work for me, but the 2nd point did. Thank you!"}, {"owner": {"reputation": 653, "user_id": 4070935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1a233885d9f083a4c4d9aca93073b7?s=128&d=identicon&r=PG", "display_name": "RoM4iK", "link": "https://stackoverflow.com/users/4070935/rom4ik"}, "reply_to_user": {"reputation": 149, "user_id": 5760378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2a272332b1d8dfea01eaa73b2960256?s=128&d=identicon&r=PG&f=1", "display_name": "swellactually", "link": "https://stackoverflow.com/users/5760378/swellactually"}, "edited": false, "score": 0, "creation_date": 1475708419, "post_id": 39884686, "comment_id": 67056718, "body": "Strange, because i tested only first point, but anyway behavior is similar :)"}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 2, "creation_date": 1513818472, "post_id": 39884686, "comment_id": 82801078, "body": "Expect other gotchas with rendering html views from an API app if the html endpoint ever makes use of sessions or cookies (e.g. like with devise), as these are stripped out with API only rails."}], "tags": [], "owner": {"reputation": 653, "user_id": 4070935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd1a233885d9f083a4c4d9aca93073b7?s=128&d=identicon&r=PG", "display_name": "RoM4iK", "link": "https://stackoverflow.com/users/4070935/rom4ik"}, "is_accepted": true, "score": 29, "last_activity_date": 1475706522, "creation_date": 1475706522, "answer_id": 39884686, "question_id": 39884515, "link": "https://stackoverflow.com/questions/39884515/render-a-view-in-rails-5-api/39884686#39884686", "title": "Render a view in Rails 5 API", "body": "<p>You don't need to uncomment <code>config.api_only = true</code> for this purpose, just inherit your controller from <code>ActionController::Base</code>, or do it in your <code>ApplicationController</code> (default for common rails generation).</p>\n\n<p>Code:</p>\n\n<ol>\n<li>For this controller only <code>YourController &lt; ActionController::Base</code></li>\n<li>For all apllication <code>ApplicationController &lt; ActionController::Base</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 8318666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acad6efaeb538a5d11303207179e5bee?s=128&d=identicon&r=PG&f=1", "display_name": "noobyz", "link": "https://stackoverflow.com/users/8318666/noobyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1589524708, "last_edit_date": 1592644375, "creation_date": 1589524708, "answer_id": 61813202, "question_id": 39884515, "link": "https://stackoverflow.com/questions/39884515/render-a-view-in-rails-5-api/61813202#61813202", "title": "Render a view in Rails 5 API", "body": "<p>this is from the ActionController::Metal docs <a href=\"https://apidock.com/rails/ActionController/Metal\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionController/Metal</a></p>\n<p>it says:</p>\n<blockquote>\n<p>ActionController::Metal by default provides no utilities for rendering &gt;views, partials, or other responses aside from explicitly calling of &gt;response_body=, content_type=, and status=. To add the render helpers &gt;you\u2019re used to having in a normal controller, you can do the following:</p>\n<pre><code>class HelloController &lt; ActionController::Metal\n include AbstractController::Rendering\n include ActionView::Layouts\n append_view_path &quot;#{Rails.root}/app/views&quot;\n\n  def index\n   render &quot;hello/index&quot;\n  end\nend\n</code></pre>\n</blockquote>\n<p>So I've tried it myself and adding just by adding the two modules actually work just fine when using it for ActionController::API</p>\n"}], "owner": {"reputation": 149, "user_id": 5760378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2a272332b1d8dfea01eaa73b2960256?s=128&d=identicon&r=PG&f=1", "display_name": "swellactually", "link": "https://stackoverflow.com/users/5760378/swellactually"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5784, "favorite_count": 4, "accepted_answer_id": 39884686, "answer_count": 2, "score": 12, "last_activity_date": 1589524708, "creation_date": 1475705505, "question_id": 39884515, "link": "https://stackoverflow.com/questions/39884515/render-a-view-in-rails-5-api", "title": "Render a view in Rails 5 API", "body": "<p>I generated an API-only rails app with Rails 5 via <code>rails new &lt;application-name&gt; --api</code>. I've decided I want to include a view for testing some things and am having issues getting a view to load. </p>\n\n<p>I created a users/index.html.erb file with some text and my controller is now simply <code>def index; end</code> but there is nothing appearing when I hit the /users URL. I also tried commenting out the <code># config.api_only = true</code> in config/application.rb but that didn't affect anything. Any suggestions on how to proceed? </p>\n"}, {"tags": ["ruby", "swift"], "comments": [{"owner": {"reputation": 8216, "user_id": 4569307, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/QZ5S5.jpg?s=128&g=1", "display_name": "BaseZen", "link": "https://stackoverflow.com/users/4569307/basezen"}, "edited": false, "score": 9, "creation_date": 1475705682, "post_id": 39884507, "comment_id": 67055921, "body": "Seems very little to gain over <code>arr.filter { !(rejectConditional) }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "is_accepted": true, "score": 4, "last_activity_date": 1475719041, "last_edit_date": 1475719041, "creation_date": 1475718648, "answer_id": 39886282, "question_id": 39884507, "link": "https://stackoverflow.com/questions/39884507/does-swift-has-a-function-like-array-reject-in-ruby/39886282#39886282", "title": "Does Swift has a function like `array.reject` in Ruby?", "body": "<pre><code>extension Array {\n    func reject(_ isRejected: (Element) -&gt; Bool) -&gt; [Element] {\n        return self.filter{ !isRejected($0) }\n    }\n}\n</code></pre>\n\n<p>Now it does.</p>\n\n<p>Even better, you can generalize to any <code>Sequence</code>, and even handle throwing predicates:</p>\n\n<pre><code>extension Sequence {\n    func reject(_ isRejected: (Self.Iterator.Element) throws -&gt; Bool) rethrows -&gt; [Self.Iterator.Element] {\n        return try self.filter{ !(try isRejected($0))}\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3347, "user_id": 881846, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Plm5g.jpg?s=128&g=1", "display_name": "RandyTek", "link": "https://stackoverflow.com/users/881846/randytek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 39886282, "answer_count": 1, "score": -1, "last_activity_date": 1475719041, "creation_date": 1475705473, "question_id": 39884507, "link": "https://stackoverflow.com/questions/39884507/does-swift-has-a-function-like-array-reject-in-ruby", "title": "Does Swift has a function like `array.reject` in Ruby?", "body": "<p>Ruby has a very elegant <code>reject</code> function for array:</p>\n\n<pre><code>arr = [1, 2, 3, 4, 5, 6]\narr.reject { |a| a &lt; 3 }     #=&gt; [3, 4, 5, 6]\n</code></pre>\n\n<p>I know swift has a <code>filter</code> function. I wonder if Swift has a similar one to <code>reject</code>.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1475703769, "post_id": 39884047, "comment_id": 67055250, "body": "something simpler is to declare your animals array empty like <code>animals = []</code>, and then add elements one by one like: <code>animals &lt;&lt; &quot;#{cats.count} Cats&quot; if cats.count &gt; 0</code>. It all depends on how your implementation is done, so, this might work or not for you."}], "answers": [{"comments": [{"owner": {"reputation": 1743, "user_id": 3689085, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cODh0.jpg?s=128&g=1", "display_name": "NothingToSeeHere", "link": "https://stackoverflow.com/users/3689085/nothingtoseehere"}, "edited": false, "score": 0, "creation_date": 1475704297, "post_id": 39884118, "comment_id": 67055463, "body": "I&#39;m torn between these two answers.  As you are both right.  Plus your english join is right on."}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 2, "last_activity_date": 1475703424, "creation_date": 1475703424, "answer_id": 39884118, "question_id": 39884047, "link": "https://stackoverflow.com/questions/39884047/finding-blank-arrays-within-ruby-arrays-rails-4/39884118#39884118", "title": "Finding blank arrays within ruby arrays Rails 4", "body": "<p>To get <code>\"5 Dogs, 4 Birds\"</code>, you can do</p>\n\n<pre><code>sentence = animals.each.map{ |r| /^0\\s/.match(r) ? nil : r  }.compact.join(\", \") \n</code></pre>\n\n<p>The regex matches anything that starts with <code>0</code> and a space. If there is a match, return nil, or return the original string. The <code>compact</code> method removes <code>nil</code> elements from the array, and finally you join the elements. </p>\n\n<p>If you want <code>5 Dogs &amp; 4 Birds</code>, you can define a method that performs that function.</p>\n\n<pre><code>def english_join(array)\n  return array.to_s if array.nil? or array.length &lt;= 1\n  array[0..-2].join(\", \") + \" &amp; \" + array[-1]\nend \n</code></pre>\n\n<p>Then you can do </p>\n\n<pre><code>sentence = english_join(animals.each.map{ |r| /^0\\s/.match(r) ? nil : r  }.compact)\n</code></pre>\n\n<p>If you have 0 cats, 5 dogs, and 4 birds, this returns <code>5 Dogs &amp; 4 Birds</code>. </p>\n\n<p>If you have 2 cats, 5 dogs, and 4 birds, this returns <code>2 Cats, 5 Dogs &amp; 4 Birds</code></p>\n"}, {"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 3, "creation_date": 1475704098, "post_id": 39884215, "comment_id": 67055393, "body": "FYI: <code>[Cat, Bird, Dog].map { |c| [c.class.name.pluralize, c.count].select { |a,b| b &gt; 0 }.map(&amp;:join).join(&quot;,&quot;)</code>. This is overly clever but parts of it are definitely worth employing to shorten the creation of the hash."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475704367, "post_id": 39884215, "comment_id": 67055485, "body": "perhaps use <code>zero?</code> here."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475704915, "post_id": 39884215, "comment_id": 67055656, "body": "@sagarpandya82 Oh I didn&#39;t know that there&#39;s the method <code>Numeric#zero?</code>. It does make the code a bit cleaner. Thanks."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1475705075, "post_id": 39884215, "comment_id": 67055720, "body": "@meagar That&#39;s an interesting one liner. I didn&#39;t do this because I thought maybe the local variable <code>cats</code> and <code>dogs</code> and <code>birds</code> have other uses in OP&#39;s program."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 3, "last_activity_date": 1475704931, "last_edit_date": 1475704931, "creation_date": 1475703898, "answer_id": 39884215, "question_id": 39884047, "link": "https://stackoverflow.com/questions/39884047/finding-blank-arrays-within-ruby-arrays-rails-4/39884215#39884215", "title": "Finding blank arrays within ruby arrays Rails 4", "body": "<p>Yes, you need a hash.</p>\n\n<pre><code>cats = Cat.all \ndogs = Dog.all\nbirds = Bird.all\n\nanimals = {\n  cats: cats.count,\n  dogs: dogs.count,\n  birds: birds.count\n}\n\nsentence = animals.reject{|k, v| v.zero?}\n                  .map{|k, v| \"#{v} #{k.to_s.capitalize}\"}\n                  .join(', ')\n</code></pre>\n\n<p>My suggestion: keep data as data till the last moment, so that you can have maximum flexibility to display it in various ways. I feel that the <code>animals</code> in your code thinks rendering too soon.</p>\n"}], "owner": {"reputation": 1743, "user_id": 3689085, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/cODh0.jpg?s=128&g=1", "display_name": "NothingToSeeHere", "link": "https://stackoverflow.com/users/3689085/nothingtoseehere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 39884215, "answer_count": 2, "score": 0, "last_activity_date": 1475704931, "creation_date": 1475703126, "last_edit_date": 1475703737, "question_id": 39884047, "link": "https://stackoverflow.com/questions/39884047/finding-blank-arrays-within-ruby-arrays-rails-4", "title": "Finding blank arrays within ruby arrays Rails 4", "body": "<p>I am trying build a sentence out of 3 arrays with the count of each array.</p>\n\n<pre><code>cats = Cat.all \ndogs = Dog.all\nbirds = Bird.all \n\nanimals = [\"#{cats.count} Cats\", \"#{dogs.count} Dogs\", \"#{birds.count} Birds\"]\n\nsentence = animals.each.map{ |r| r  }.join(\",  \") \n</code></pre>\n\n<p>Right now, this works, but if I have no cats sentence outputs to </p>\n\n<pre><code>\"O Cats, 5 Dogs, 4 Birds\"\n</code></pre>\n\n<p>and I'ld like it to just say:</p>\n\n<pre><code>\"5 Dogs &amp; 4 Birds\"\n</code></pre>\n\n<p>or, at the very least:</p>\n\n<pre><code>\"5 Dogs, 4 Birds\"\n</code></pre>\n\n<p>I feel like I might need to use an array of hashes, but I'm a bit lost.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "forms", "radio-button"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1475702996, "post_id": 39883953, "comment_id": 67054916, "body": "Hi and welcome to Stack Overflow. have a look in your server logs (either <code>log.development.log</code> or in your terminal window) and look at the lines that get printed just as you submit the form. They will usually display the full set of <code>params</code> that come through when you hit submit. Edit your question and post what you see there so we can see it and it will help us to debug your problem (don&#39;t post it in the comments here as the formatting is dreadful and hard to read) :)"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1475703070, "post_id": 39883953, "comment_id": 67054946, "body": "Note: at present my best guess is that the radio-buttons are simply named incorrectly... you are using <code>radio_button_tag</code> instead of <code>f.radio_button</code> which means they probably won&#39;t be nested under <code>applicant</code> the way they should... we can confirm this by looking at what comes through in the <code>params</code>"}, {"owner": {"reputation": 106, "user_id": 6400350, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iUjoHttz398/AAAAAAAAAAI/AAAAAAAAAB0/u0Ru7NggwkM/photo.jpg?sz=128", "display_name": "DanTheMann", "link": "https://stackoverflow.com/users/6400350/danthemann"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1475705072, "post_id": 39883953, "comment_id": 67055718, "body": "I got it to work! i just needed to change radio_button_tag to f.radio_button thanks for that!"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1475705413, "post_id": 39883953, "comment_id": 67055829, "body": "Cool, I&#39;ll make that an answer then :)"}], "answers": [{"tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": false, "score": 1, "last_activity_date": 1475705475, "creation_date": 1475705475, "answer_id": 39884509, "question_id": 39883953, "link": "https://stackoverflow.com/questions/39883953/how-do-you-input-the-value-of-a-radio-button-form-with-multiple-input-values-as/39884509#39884509", "title": "How do you input the value of a radio button form with multiple input values as a string and input to the database in Ruby on Rails?", "body": "<p>I think that your radio-buttons are simply named incorrectly... you are using <code>radio_button_tag</code> instead of <code>f.radio_button</code> which means they probably won't be nested under <code>applicant</code> the way they should (and that your permit/require method is expecting).</p>\n\n<p>You can confirm this by looking at what comes through as <code>params</code> in your server logs.</p>\n"}], "owner": {"reputation": 106, "user_id": 6400350, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iUjoHttz398/AAAAAAAAAAI/AAAAAAAAAB0/u0Ru7NggwkM/photo.jpg?sz=128", "display_name": "DanTheMann", "link": "https://stackoverflow.com/users/6400350/danthemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475705475, "creation_date": 1475702774, "last_edit_date": 1475704819, "question_id": 39883953, "link": "https://stackoverflow.com/questions/39883953/how-do-you-input-the-value-of-a-radio-button-form-with-multiple-input-values-as", "title": "How do you input the value of a radio button form with multiple input values as a string and input to the database in Ruby on Rails?", "body": "<p>So basically, i have this application form for A website and am trying to add radio buttons so people can select the correct answer from the given selection of options. I would also like to be able to input the value of the form into the database as a string, as say \"HOME OWNER\".</p>\n\n<pre><code>&lt;%= form_for @applicant do |f| %&gt;\n</code></pre>\n\n<p>The top \"email\" field works great. All actions are in place in the applicants_controller and the database is set up which means i can save the output from the email form field into the database. But the radio buttons don't work. Here below is in my views/applicants/new.html.erb</p>\n\n<pre><code> &lt;%= f.label :email %&gt;\n &lt;%= f.email_field :email, class: 'form-control' %&gt;\n\n   &lt;%= radio_button_tag(:property_relationship, \"Home-Owner\") %&gt;\n   &lt;%= label_tag(:Home_owner, \"Home Owner\") %&gt;\n\n   &lt;%= radio_button_tag(:property_relationship, \"Private-Tennant\") %&gt;\n   &lt;%= label_tag(:private_tennant, \"Private Tennant\") %&gt;\n\n   &lt;%= radio_button_tag(:property_relationship, \"Landlord\") %&gt;\n   &lt;%= label_tag(:landlord, \"Landlord\") %&gt;\n\n   &lt;%= radio_button_tag(:property_relationship, \"Council-Tennant\") %&gt;\n   &lt;%= label_tag(:council_tenant, \"Council Tennant\") %&gt;\n\n   &lt;%= f.submit 'Submit', class: 'btn btn-default' %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>The below line is in my routes.rb file which makes the routing happen</p>\n\n<pre><code>resources :applicants\n</code></pre>\n\n<p>This is my applicants_controller.rb file</p>\n\n<pre><code>class ApplicantsController &lt; ApplicationController\n  def new\n    @applicant = Applicant.new\n  end\n\n  def create\n      @applicant = Applicant.new(applicant_params)\n\n      if @applicant.save\n\n          flash[:success] = 'Form submitted'\n          redirect_to apply_path\n      else\n          flash[:danger] = 'Error occured, message has not been sent'\n          redirect_to apply_path\n      end\n  end\n\n  private\n\n      def applicant_params\n          params.require(:applicant).permit(:property_relationship, :email)\n      end\n\n\nend\n</code></pre>\n\n<p>And my database schema.. the radio buttons in my form are to enter the \"property_relationship\" info from the form into the database. Is it maybe that it should be t.somethingelse instead of t.string?</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20160928204355) do\n\n  create_table \"applicants\", force: :cascade do |t|\n\n   t.string   \"property_relationship\"\n   t.string   \"email\"\n   t.datetime \"created_at\",                null: false\n   t.datetime \"updated_at\",                null: false\n  end\n</code></pre>\n\n<p>I also have another table in the schema which is for a contact - which is below. But this shouldn't interfere as the form_for is for @applicant.</p>\n\n<pre><code>  create_table \"contacts\", force: :cascade do |t|\n\n    t.string   \"name\"\n    t.string   \"email\"\n    t.text     \"comments\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\nend\n</code></pre>\n\n<p>This is the log/development.log file</p>\n\n<pre><code>Started POST \"/applicants\" for 88.106.10.152 at 2016-10-05 21:49:59 +0000\nProcessing by ApplicantsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"UBXlJ5gzz+BEYk+SDgzSlR8AVctsLJkyKW51NhGbjTLf2tFzzuUvhJ5ahn2R/kCWBZVNRnl5DebP4GG0QxNKwA==\", \"property_relationship\"=&gt;\"Home-Owner\", \"applicant\"=&gt;{\"email\"=&gt;\"daniel@example.com\"}, \"commit\"=&gt;\"Submit\"}\n   (0.1ms)  begin transaction\n  SQL (0.7ms)  INSERT INTO \"applicants\" (\"email\", \"created_at\", \"updated_at\") VALUES (?, ?, ?)  [[\"email\", \"daniel@example.com\"], [\"created_at\", \"2016-10-05 21:49:59.209017\"], [\"updated_at\", \"2016-10-05 21:49:59.209017\"]]\n   (15.7ms)  commit transaction\nRedirected to https://boilerleadgen-danthedangerman.c9users.io/apply\nCompleted 302 Found in 25ms (ActiveRecord: 16.5ms)\n\n\nStarted GET \"/apply\" for 88.106.10.152 at 2016-10-05 21:49:59 +0000\nProcessing by ApplicantsController#new as HTML\n  Rendered applicants/new.html.erb within layouts/application (1.9ms)\nCompleted 200 OK in 89ms (Views: 87.7ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>And here is the rails console using Applicant.all command. As you can see the value for property_relationship in nil but actually should be the value i entered (home owner)</p>\n\n<pre><code>(user_application) $ rails c\nLoading development environment (Rails 4.2.5)\n2.3.0 :001 &gt; Applicant.all\n  Applicant Load (3.4ms)  SELECT \"applicants\".* FROM \"applicants\"\n =&gt; #&lt;ActiveRecord::Relation #&lt;Applicant id: 8, email: \"daniel@example.com\", property_relationship: nil, created_at: \"2016-10-05 21:48:17\", updated_at: \"2016-10-05 21:48:17\"&gt;\n</code></pre>\n\n<p>I am really stuck here and am also new to Rails so all help is much appreciated.\nOnce again, what i'm trying to do is save the output of the radio buttons into the database as a string.</p>\n\n<p>Thank you for reading</p>\n"}, {"tags": ["ruby", "video", "metadata", "mediainfo"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "is_accepted": false, "score": 0, "last_activity_date": 1479540627, "last_edit_date": 1479540627, "creation_date": 1475859049, "answer_id": 39922337, "question_id": 39883905, "link": "https://stackoverflow.com/questions/39883905/ruby-mediainfo-find-unique-properites/39922337#39922337", "title": "Ruby mediainfo find unique properites", "body": "<p>I figured it out. I was creating new hashes outside of the loop. A new hash needed to be created for each iteration so that it could then be added to the video_info array. Then I needed to remove the bang operator when I called uniq on video_info at the end of the script. Here's my final code:</p>\n\n<pre><code>require 'json'\n\n#developed by Maile Thiesen\n#!/usr/bin/ruby\n\nlibrary_path = ARGV[0]\n\nfiles_list = Dir.glob(\"#{library_path}/**/*\")\ntotal_capture_scatch_and_exports_size = 0\ncounter = 0\n\nvideo_info = []\n\nfiles_list.each do |filepath|\nfilename = File.basename(filepath.to_s)\n  codecs = {}\n  filepath.chomp!\n  folders_to_scan = [\"/capture scratch/\", \"/capturescratch/\", \"/capture-scratch/\", \"/capture_scratch/\", \"exports\", \"export\"]\n\n  file_size = File.size(filepath)\n  file_extension = File.extname(filepath)\n  if \n      folders_to_scan.any? { |folder| filepath.downcase.include? folder }\n\n      if \n          File.file?(filepath) &amp;&amp; filename[0] != \".\" &amp;&amp; file_extension != \".TIFF\" &amp;&amp; file_extension != \".TIF\" &amp;&amp; file_extension != \".tif\" &amp;&amp; file_extension != \".tiff\" &amp;&amp; file_extension != \".jpg\" &amp;&amp; file_extension != \".jpeg\" &amp;&amp; file_extension != \".JPG\" &amp;&amp; file_extension != \".JPEG\"\n              duration = %x[mediainfo --Inform=\"General;%Duration/String3%\" '#{filepath}'].chomp!\n              format = %x[mediainfo --Inform=\"General;%Format%\" '#{filepath}'].chomp!\n              commercial_name = %x[mediainfo --Inform=\"General;%Format_Commercial_IfAny%\" '#{filepath}'].chomp!\n              format_profile = %x[mediainfo --Inform=\"General;%Format_Profile%\" '#{filepath}'].chomp!\n              writing_library = %x[mediainfo --Inform=\"General;%Encoded_Library%\" '#{filepath}'].chomp!\n\n              codecs[:format] = format\n              codecs[:commercial_name] = commercial_name\n              codecs[:format_profile] = format_profile\n              codecs[:writing_library] = writing_library\n            codecs[:file_extension] = file_extension    \n            total_capture_scatch_and_exports_size += file_size\n\n            counter += 1\n            video_info &lt;&lt; codecs\n      end    \n\n  end\n\nend\nputs \"THE UNIQUE CODECS ARE: #{JSON.pretty_generate(video_info.uniq)}\"\nputs \"THE TOTAL FILESIZE IS : #{total_capture_scatch_and_exports_size/(1000**3).to_f} GB\"\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1479540627, "creation_date": 1475702563, "last_edit_date": 1479540550, "question_id": 39883905, "link": "https://stackoverflow.com/questions/39883905/ruby-mediainfo-find-unique-properites", "title": "Ruby mediainfo find unique properites", "body": "<p>I'm trying to scan a large hard drive (think 17TBs) to find a storage estimate for video files within specific folders. In addition, I am trying to find specific unique properties of the video files. The purpose of this is to make a case for a digital asset management system that can support the video files that we have going back to 2009. I'm using mediainfo to inspect each video.</p>\n\n<p>I have the file size/storage count working, but i'm having trouble adding the hashes of video properties to an array in my loop. My goal is for media info to look at the specific properties of each video, put them into a hash and add that hash to an array. Then, once I have collected all the hashes of video properties, I would call uniq! on the array so that it would show me the unique video properties. </p>\n\n<p>The output of my code currently returns the video properties for the last video over and over again. I can't see what I'm doing wrong. Any advice?</p>\n\n<pre><code>require 'yaml'\n\n#!/usr/bin/ruby\n\nlibrary_path = ARGV[0]\n\nfiles_list = Dir.glob(\"#{library_path}/**/*\")\ntotal_capture_scatch_and_exports_size = 0\n\nvideo_audit = Hash.new()\nvideo_info = []\ncodecs = Hash.new()\n\n\n\n\nfiles_list.each do |filepath|\nfilename = File.basename(filepath.to_s)\n  filepath.chomp!\n  puts filename\n  folders_to_scan = [\"/capture scratch/\", \"/capturescratch/\", \"/capture-scratch/\", \"/capture_scratch/\", \"exports\", \"export\"]\n\n  file_size = File.size(filepath)\n  file_extension = File.extname(filepath)\n  if \n    folders_to_scan.any? { |folder| filepath.downcase.include? folder }\n\n      if \n        File.file?(filepath) &amp;&amp; filename[0] != \".\" &amp;&amp; file_extension != \".TIFF\" &amp;&amp; file_extension != \".TIF\" &amp;&amp; file_extension != \".tif\" &amp;&amp; file_extension != \".tiff\" &amp;&amp; file_extension != \".jpg\" &amp;&amp; file_extension != \".jpeg\" &amp;&amp; file_extension != \".JPG\" &amp;&amp; file_extension != \".JPEG\"\n            duration = %x[mediainfo --Inform=\"General;%Duration/String3%\" '#{filepath}'].chomp!\n            format = %x[mediainfo --Inform=\"General;%Format%\" '#{filepath}'].chomp!\n            commercial_name = %x[mediainfo --Inform=\"General;%Format_Commercial_IfAny%\" '#{filepath}'].chomp!\n            format_profile = %x[mediainfo --Inform=\"General;%Format_Profile%\" '#{filepath}'].chomp!\n            writing_library = %x[mediainfo --Inform=\"General;%Encoded_Library%\" '#{filepath}'].chomp!\n\n\n            video_audit[:filepath] = filepath\n            video_audit[:filename] = filename   \n            video_audit[:duration] = duration\n            video_audit[:file_size] = file_size\n            video_audit[:format] = format\n            video_audit[:commercial_name] = commercial_name\n            video_audit[:format_profile] = format_profile\n            video_audit[:writing_library] = writing_library\n            video_audit[:file_extension] = file_extension\n\n            codecs[:filename] = filename\n            codecs[:format] = format\n            codecs[:commercial_name] = commercial_name\n            codecs[:format_profile] = format_profile\n            codecs[:writing_library] = writing_library\n            codecs[:file_extension] = file_extension    \n      end   \n\n  end\n  puts video_audit.to_yaml\n  puts codecs\n  video_info &lt;&lt; codecs\n  total_capture_scatch_and_exports_size += file_size\n\nend\nputs \"THE VIDEO INFO IS=======&gt;&gt;&gt;&gt; #{video_info}\"\nputs \"THE UNIQUE CODECS ARE: #{video_info.uniq!}\"\n#1000**3 is for gigabytes (this is how finder on OSX calculates storage on the Drobo Harddrives)use 1024**3 ofr gibibytes\nputs \"The total filesize is : #{total_capture_scatch_and_exports_size/(1000**3).to_f} GB\"\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "selenium-webdriver"], "comments": [{"owner": {"reputation": 1512, "user_id": 1843781, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/aJlkW.png?s=128&g=1", "display_name": "alexwc_", "link": "https://stackoverflow.com/users/1843781/alexwc"}, "edited": false, "score": 0, "creation_date": 1475718256, "post_id": 39883722, "comment_id": 67058994, "body": "you should post your code in the question so we can see what the issue is AND be able to copy and edit said code."}, {"owner": {"reputation": 11, "user_id": 5930553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6844637a0b48eea16d4be257e3f65c2?s=128&d=identicon&r=PG&f=1", "display_name": "Karma", "link": "https://stackoverflow.com/users/5930553/karma"}, "reply_to_user": {"reputation": 1512, "user_id": 1843781, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/aJlkW.png?s=128&g=1", "display_name": "alexwc_", "link": "https://stackoverflow.com/users/1843781/alexwc"}, "edited": false, "score": 0, "creation_date": 1475768743, "post_id": 39883722, "comment_id": 67086329, "body": "Hello Alex, If you click on the Code snippet and Debug message Link above You can see the code and the debug point where it fails. copy pasting the code below. def print_js_errors_on_current_page     @browser = driver     log = @browser.driver.manage.logs.get(:browser)     errors = log.select{ |entry| entry.level.eql? &#39;SEVERE&#39; }     if errors.count &gt; 0       javascript_errors = errors.map(&amp;:message).join(&quot;\\n&quot;)       raise javascript_errors     end   end"}, {"owner": {"reputation": 1512, "user_id": 1843781, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/aJlkW.png?s=128&g=1", "display_name": "alexwc_", "link": "https://stackoverflow.com/users/1843781/alexwc"}, "edited": false, "score": 0, "creation_date": 1475768891, "post_id": 39883722, "comment_id": 67086403, "body": "It&#39;s not for my convenience, it&#39;s part of <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 1512, "user_id": 1843781, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/aJlkW.png?s=128&g=1", "display_name": "alexwc_", "link": "https://stackoverflow.com/users/1843781/alexwc"}, "edited": false, "score": 0, "creation_date": 1475775928, "post_id": 39883722, "comment_id": 67090357, "body": "code goes in the question. I&#39;ll edit if for you..."}, {"owner": {"reputation": 11, "user_id": 5930553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6844637a0b48eea16d4be257e3f65c2?s=128&d=identicon&r=PG&f=1", "display_name": "Karma", "link": "https://stackoverflow.com/users/5930553/karma"}, "reply_to_user": {"reputation": 1512, "user_id": 1843781, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/aJlkW.png?s=128&g=1", "display_name": "alexwc_", "link": "https://stackoverflow.com/users/1843781/alexwc"}, "edited": false, "score": 0, "creation_date": 1475884977, "post_id": 39883722, "comment_id": 67138110, "body": "Thanks a bunch @alex. very very kind of you. I apologize for making you do my cleanup. my next posts will be more meaningful. I promise. Now I understand how this should be done. thanks again."}], "owner": {"reputation": 11, "user_id": 5930553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6844637a0b48eea16d4be257e3f65c2?s=128&d=identicon&r=PG&f=1", "display_name": "Karma", "link": "https://stackoverflow.com/users/5930553/karma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 445, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475782629, "creation_date": 1475701813, "last_edit_date": 1475782629, "question_id": 39883722, "link": "https://stackoverflow.com/questions/39883722/undefined-method-logs-for-seleniumwebdriveroptions", "title": "&quot;undefined method `logs&#39; for &lt;Selenium::WebDriver::Options.&quot;", "body": "<p>As a part of my Ruby-watir-selenium-Firefox automation, I am trying to capture Javascript errors generated by a page, and using the code below, a popular code that seems to work for many. When I run the test, it fails with an error \"undefined method `logs' for Selenium::WebDriver::Options.\"\nIs 'logs' method not supported by selenium driver anymore ? Any info will be appreciated. My first post so please pardon any mistakes. \n<a href=\"https://i.stack.imgur.com/Kd4NG.png\" rel=\"nofollow noreferrer\">Code Snippet and Debug message</a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>def print_js_errors_on_current_page\r\n  @ browser = driver\r\n  log = @browser.driver.manage.logs.get(: browser)\r\n  errors = log.select { | entry | entry.level.eql ? 'SEVERE'}\r\nif errors.count &gt; 0\r\n  javascript_errors = errors.map( &amp; : message).join(\"\\n\")   raise javascript_errors\r\n  end \r\n end</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><a href=\"https://i.stack.imgur.com/Kd4NG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kd4NG.png\" alt=\"code and error log\"></a></p>\n"}, {"tags": ["ruby", "algorithm"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1475701249, "post_id": 39883483, "comment_id": 67054167, "body": "<code>4! = 4*3*2*</code> or <code>2*3*4</code>. The author of this code decided to start at <code>4</code> (the argument <code>n</code>) and work down."}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1475733445, "post_id": 39883483, "comment_id": 67063282, "body": "(Without code comments, nobody knows just why result is not initialised to <code>n</code>, followed by decrementing <code>n</code> and multiplying it into the result while <code>1 &lt; n</code>.)"}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475702585, "post_id": 39883585, "comment_id": 67054725, "body": "I see how 0! is set to 1 in your code but  why does 0! equal 1 anyway?"}, {"owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475703019, "post_id": 39883585, "comment_id": 67054927, "body": "@sagarpandya82 That&#39;s how the factorial function is defined in math. <a href=\"https://en.wikipedia.org/wiki/Factorial#Definition\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Factorial#Definition</a>"}, {"owner": {"reputation": 6562, "user_id": 6147506, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d56adcbeaf6f32b652e0f6ff47ecad3e?s=128&d=identicon&r=PG&f=1", "display_name": "nhouser9", "link": "https://stackoverflow.com/users/6147506/nhouser9"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475703436, "post_id": 39883585, "comment_id": 67055108, "body": "@sagarpandya82 That&#39;s an interesting question actually, but not one I know the answer to. I do know that mathematicians decided to define it that way, I just don&#39;t know why."}], "tags": [], "owner": {"reputation": 6562, "user_id": 6147506, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d56adcbeaf6f32b652e0f6ff47ecad3e?s=128&d=identicon&r=PG&f=1", "display_name": "nhouser9", "link": "https://stackoverflow.com/users/6147506/nhouser9"}, "is_accepted": true, "score": 4, "last_activity_date": 1475701634, "last_edit_date": 1475701634, "creation_date": 1475701255, "answer_id": 39883585, "question_id": 39883483, "link": "https://stackoverflow.com/questions/39883483/why-in-this-factorial-code-no-recursion-the-step-is-1-instead-of-1/39883585#39883585", "title": "Why in this factorial code (no recursion) the step is -1 instead of +1?", "body": "<p>It calculates <code>n=0</code> because <code>result</code> is set to <code>1</code> by default. When <code>n</code> is <code>0</code>, the loop will not run (because <code>n</code> is not <code>&gt; 0</code>), so the default value of <code>result</code> (which is <code>1</code>) will be returned.</p>\n\n<p>It subtracts one each time so that it can count downward over all the numbers, so </p>\n\n<blockquote>\n  <p>5! = 5 * 4 * 3 * 2 * 1</p>\n</blockquote>\n\n<p>If it added one each time it would be </p>\n\n<blockquote>\n  <p>5! = 5 * 6 * 7 * 8...</p>\n</blockquote>\n\n<p>and so on. So not only would it be wrong but it would also be an infinite loop.</p>\n"}, {"tags": [], "owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "is_accepted": false, "score": 3, "last_activity_date": 1475701269, "creation_date": 1475701269, "answer_id": 39883591, "question_id": 39883483, "link": "https://stackoverflow.com/questions/39883483/why-in-this-factorial-code-no-recursion-the-step-is-1-instead-of-1/39883591#39883591", "title": "Why in this factorial code (no recursion) the step is -1 instead of +1?", "body": "<p>The step is -1 so that you multiply together all the values of n * (n -1) * (n - 2) * ... * 1.  Since the multiplication starts at n and goes down, you want the step to be negative. (Alternatively, you <em>could</em> start at 1 and go up to n. In that case you would want the step to be +1. That's just not how this implementation works.)</p>\n\n<p>The program still works for an input of 0 because the default is set to <code>result = 1</code> before the while loop. The body of the loop is skipped in that case.</p>\n"}, {"tags": [], "owner": {"reputation": 375, "user_id": 6749771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea02bd8831bb86044f3928b472d2a65e?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm G", "link": "https://stackoverflow.com/users/6749771/malcolm-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1475701452, "creation_date": 1475701452, "answer_id": 39883646, "question_id": 39883483, "link": "https://stackoverflow.com/questions/39883483/why-in-this-factorial-code-no-recursion-the-step-is-1-instead-of-1/39883646#39883646", "title": "Why in this factorial code (no recursion) the step is -1 instead of +1?", "body": "<p>The reason the step is -1 and not +1 is because the while loop is going <code>while n &gt; 0</code>. So if you were to do <code>n += 1</code>, you would have an infinite loop on your hands. </p>\n\n<p>If you were to set up a for loop with an iterator, you could start the iterator and go until <code>iterator &lt;= n</code>. In that case, you would want to do <code>iterator += 1</code>. But in this situation, we just need to multiply all the values from 1-n together, which is not sensitive to order. Because of that, it is simpler and less code to start at <code>n</code> and decrement it until it reaches zero. That is the reason for <code>n -= 1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 2, "last_activity_date": 1475704260, "last_edit_date": 1475704260, "creation_date": 1475702638, "answer_id": 39883922, "question_id": 39883483, "link": "https://stackoverflow.com/questions/39883483/why-in-this-factorial-code-no-recursion-the-step-is-1-instead-of-1/39883922#39883922", "title": "Why in this factorial code (no recursion) the step is -1 instead of +1?", "body": "<p><code>1 * 2 * 3 == 3 * 2 * 1</code>, so arithmetically it doesn't matter whether you work your way up or down.  However, decrementing the argument <code>n</code> allows it to be used directly in calculating <code>result</code>, as opposed to basing the calculation on an additional separate variable which gets incremented until it hits <code>n</code>.</p>\n\n<p>That said, it's still not a very ruby way of doing things.  I'd probably go with something like:</p>\n\n<pre><code>def factorial(n)\n  n == 0 ? 1 : (1..n).inject(:*)\nend\n</code></pre>\n\n<p>You also asked how your implementation calculates <code>factorial(0)</code> as 1.  If <code>n == 0</code> the <code>while n &gt; 0</code> loop is never activated, so from your initialization <code>result = 1</code> you skip down to the <code>return</code> statement.</p>\n"}], "owner": {"reputation": 330, "user_id": 6717444, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZOPFn.jpg?s=128&g=1", "display_name": "Evanto", "link": "https://stackoverflow.com/users/6717444/evanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 1, "accepted_answer_id": 39883585, "answer_count": 4, "score": 3, "last_activity_date": 1475704260, "creation_date": 1475700890, "last_edit_date": 1475701747, "question_id": 39883483, "link": "https://stackoverflow.com/questions/39883483/why-in-this-factorial-code-no-recursion-the-step-is-1-instead-of-1", "title": "Why in this factorial code (no recursion) the step is -1 instead of +1?", "body": "<p>Why in this code for calculating factorial the step is -1, not +1?\nHow it calculates n = 0, if in the program we have only n &lt; 0 and n > 0?</p>\n\n<pre><code>def factorial(n)\n  if n &lt; 0\n    return nil\n  end\n\n  result = 1\n  while n &gt; 0\n    result = result * n\n\n    n -= 1\n  end\n\n  return result\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "edited": false, "score": 0, "creation_date": 1475714928, "post_id": 39883459, "comment_id": 67058256, "body": "why not use the <code>smarter_csv</code> gem?"}, {"owner": {"reputation": 1071, "user_id": 1093111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42808d0742af6ac66f05e593b1e06067?s=128&d=identicon&r=PG", "display_name": "user1093111", "link": "https://stackoverflow.com/users/1093111/user1093111"}, "reply_to_user": {"reputation": 31555, "user_id": 677684, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a785c03c08d7de6a15aaea326835cd6?s=128&d=identicon&r=PG", "display_name": "Tilo", "link": "https://stackoverflow.com/users/677684/tilo"}, "edited": false, "score": 0, "creation_date": 1475719914, "post_id": 39883459, "comment_id": 67059384, "body": "Could. Never heard of it before though"}], "answers": [{"comments": [{"owner": {"reputation": 1071, "user_id": 1093111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42808d0742af6ac66f05e593b1e06067?s=128&d=identicon&r=PG", "display_name": "user1093111", "link": "https://stackoverflow.com/users/1093111/user1093111"}, "edited": false, "score": 0, "creation_date": 1475701154, "post_id": 39883519, "comment_id": 67054133, "body": "Getting this error: payrolls.rb:31:in <code>&lt;main&gt;&#39;: undefined method </code>[]&#39; for nil:NilClass (NoMethodError). Seems to be related to the fact there is not a payroll in the 202122 season"}], "tags": [], "owner": {"reputation": 14662, "user_id": 3092298, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70530902b2446a5eccb717b2d21506fb?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Burghardt", "link": "https://stackoverflow.com/users/3092298/greg-burghardt"}, "is_accepted": false, "score": 0, "last_activity_date": 1475701000, "creation_date": 1475701000, "answer_id": 39883519, "question_id": 39883459, "link": "https://stackoverflow.com/questions/39883459/ruby-parse-csv-to-usable-hash/39883519#39883519", "title": "Ruby parse csv to usable hash", "body": "<p>Use a string instead of a symbol:</p>\n\n<pre><code>payrolls[\"Cleveland Cavaliers\"][\"201617\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1071, "user_id": 1093111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42808d0742af6ac66f05e593b1e06067?s=128&d=identicon&r=PG", "display_name": "user1093111", "link": "https://stackoverflow.com/users/1093111/user1093111"}, "edited": false, "score": 0, "creation_date": 1475701319, "post_id": 39883570, "comment_id": 67054197, "body": "Getting this error: payrolls.rb:31:in &lt;main&gt;&#39;: undefined method []&#39; for nil:NilClass (NoMethodError). Seems to be related to the fact there is not a payroll in the 202122 season"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1071, "user_id": 1093111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42808d0742af6ac66f05e593b1e06067?s=128&d=identicon&r=PG", "display_name": "user1093111", "link": "https://stackoverflow.com/users/1093111/user1093111"}, "edited": false, "score": 0, "creation_date": 1475701422, "post_id": 39883570, "comment_id": 67054254, "body": "@user1093111 did you even tried what&#39;s in my answer?"}, {"owner": {"reputation": 1071, "user_id": 1093111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42808d0742af6ac66f05e593b1e06067?s=128&d=identicon&r=PG", "display_name": "user1093111", "link": "https://stackoverflow.com/users/1093111/user1093111"}, "edited": false, "score": 0, "creation_date": 1475701462, "post_id": 39883570, "comment_id": 67054272, "body": "ah, sorry didn&#39;t see the hash"}, {"owner": {"reputation": 1071, "user_id": 1093111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42808d0742af6ac66f05e593b1e06067?s=128&d=identicon&r=PG", "display_name": "user1093111", "link": "https://stackoverflow.com/users/1093111/user1093111"}, "edited": false, "score": 0, "creation_date": 1475701596, "post_id": 39883570, "comment_id": 67054332, "body": "Nevermind,  I has puts outside the method. I just needed to return the hash and then puts"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1071, "user_id": 1093111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42808d0742af6ac66f05e593b1e06067?s=128&d=identicon&r=PG", "display_name": "user1093111", "link": "https://stackoverflow.com/users/1093111/user1093111"}, "edited": false, "score": 0, "creation_date": 1475701678, "post_id": 39883570, "comment_id": 67054360, "body": "@user1093111 I do not understand your last comment, would you please rephrase it?"}, {"owner": {"reputation": 1071, "user_id": 1093111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42808d0742af6ac66f05e593b1e06067?s=128&d=identicon&r=PG", "display_name": "user1093111", "link": "https://stackoverflow.com/users/1093111/user1093111"}, "edited": false, "score": 0, "creation_date": 1475701791, "post_id": 39883570, "comment_id": 67054403, "body": "It&#39;s fixed. In my code not shown, I wasn&#39;t returning my hash, so I was &quot;puts&quot;ing outside of the method."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 0, "last_activity_date": 1475702040, "last_edit_date": 1475702040, "creation_date": 1475701200, "answer_id": 39883570, "question_id": 39883459, "link": "https://stackoverflow.com/questions/39883459/ruby-parse-csv-to-usable-hash/39883570#39883570", "title": "Ruby parse csv to usable hash", "body": "<ol>\n<li><p>Your code has a syntax error which I fixed: you didn't have the second to last <code>}</code>:</p>\n\n<pre><code>hash = {    \n\"Cleveland Cavaliers\"=&gt;{:team=&gt;\"Cleveland Cavaliers\", :\"201617\"=&gt;\"$123590274\", :\"201718\"=&gt;\"$118585590\", :\"201819\"=&gt;\"$111958508\", :\"201920\"=&gt;\"$65464580\", :\"202021\"=&gt;nil, :\"202122\"=&gt;nil}, \n\"Los Angeles Clippers\"=&gt;{:team=&gt;\"Los Angeles Clippers\", :\"201617\"=&gt;\"$118663837\", :\"201718\"=&gt;\"$111415942\", :\"201819\"=&gt;\"$59741545\", :\"201920\"=&gt;\"$2500725\", :\"202021\"=&gt;nil, :\"202122\"=&gt;nil}\n}\n</code></pre></li>\n<li><p>You should access the hash by the key. Neither <code>Cleveland Cavaliers</code> nor <code>:201617</code> are valid objects, thus you get the error.</p></li>\n</ol>\n\n<p>The key you are looking at is <code>:\"201617\"</code>:</p>\n\n<pre><code>hash[\"Cleveland Cavaliers\"][:\"201617\"]\n#=&gt; \"$123590274\"\n</code></pre>\n"}], "owner": {"reputation": 1071, "user_id": 1093111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42808d0742af6ac66f05e593b1e06067?s=128&d=identicon&r=PG", "display_name": "user1093111", "link": "https://stackoverflow.com/users/1093111/user1093111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 39883570, "answer_count": 2, "score": 0, "last_activity_date": 1475702040, "creation_date": 1475700813, "question_id": 39883459, "link": "https://stackoverflow.com/questions/39883459/ruby-parse-csv-to-usable-hash", "title": "Ruby parse csv to usable hash", "body": "<p>I'm making a graph of NBA team payrolls.  I have this csv:  <a href=\"http://www.basketball-reference.com/contracts/\" rel=\"nofollow\">http://www.basketball-reference.com/contracts/</a></p>\n\n<pre><code>Rk,Team,2016-17,2017-18,2018-19,2019-20,2020-21,2021-22\n1,Cleveland Cavaliers,$123590274,$118585590,$111958508,$65464580,,\n2,Los Angeles Clippers,$118663837,$111415942,$59741545,$2500725,,\n3,Portland Trail Blazers,$115817639,$138409348,$121862764,$118747593,$62965110,\n4,Dallas Mavericks,$112488859,$94965622,$62766454,$35361887,,\n5,Memphis Grizzlies,$114096737,$97742075,$88773581,$86212960,$34504132,\n6,San Antonio Spurs,$110631827,$96744068,$56909494,$25990334,,\n7,Detroit Pistons,$110492645,$103423474,$97903566,$62944822,$28751775,\n8,Orlando Magic,$110283846,$74591158,$60217493,$43122365,$17000000,\n9,Toronto Raptors,$109253824,$102105184,$84967199,$51464677,$27739975,\n10,Washington Wizards,$107257619,$99510391,$103018516,$49454077,$28751775,\n11,Miami Heat,$105296376,$95803765,$94126541,$65558388,,\n12,Golden State Warriors,$104677735,$66269011,$40907537,$20844187,,\n13,New York Knicks,$104501658,$77290233,$78325386,$41195895,,\n14,Milwaukee Bucks,$103338094,$112928334,$89209363,$76367783,$29393637,$1865547\n15,Los Angeles Lakers,$102354756,$84416158,$62677311,$56232985,,\n16,New Orleans Pelicans,$102177578,$78434268,$67966414,$65355463,$28751775,\n17,Charlotte Hornets,$101879187,$91900885,$74203714,$53571467,$27130434,\n18,Atlanta Hawks,$101793777,$70277529,$46071092,$25355630,,\n19,Sacramento Kings,$99168232,$84890581,$27219195,$8350732,,\n20,Houston Rockets,$97639130,$97370875,$73164132,$68025858,,\n21,Chicago Bulls,$96908430,$81438211,$42663896,$24345313,,\n22,Oklahoma City Thunder,$96181060,$68581249,$68960837,$8863055,,\n23,Boston Celtics,$95289212,$77610987,$50413474,$45792877,,\n24,Indiana Pacers,$91950761,$80519787,$62913923,,,\n25,Minnesota Timberwolves,$84638527,$68085957,$37620814,$5348007,,\n26,Utah Jazz,$84386693,$71138358,$17001288,,,\n27,Phoenix Suns,$84297090,$71123131,$66028579,$26744625,,\n28,Denver Nuggets,$79627212,$81852764,$49452791,$10497490,,\n29,Brooklyn Nets,$78769729,$60910873,$25603813,$9344638,,\n30,Philadelphia 76ers,$75336267,$50155264,$26385506,$14125600,,\n</code></pre>\n\n<p>In ruby I wrote:</p>\n\n<pre><code>def payrolls\n\npayrolls = {}\n\nCSV.foreach(\"payrolls.csv\", :headers =&gt; true, :header_converters =&gt; :symbol, :converters =&gt; :all) do |row|\n  payrolls[row.fields[1]] = Hash[row.headers[1..-1].zip(row.fields[1..-1])]\nend\n\n puts payrolls.inspect\n\nend\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>{    \n\"Cleveland Cavaliers\"=&gt;{:team=&gt;\"Cleveland Cavaliers\", :\"201617\"=&gt;\"$123590274\", :\"201718\"=&gt;\"$118585590\", :\"201819\"=&gt;\"$111958508\", :\"201920\"=&gt;\"$65464580\", :\"202021\"=&gt;nil, :\"202122\"=&gt;nil}, \n\"Los Angeles Clippers\"=&gt;{:team=&gt;\"Los Angeles Clippers\", :\"201617\"=&gt;\"$118663837\", :\"201718\"=&gt;\"$111415942\", :\"201819\"=&gt;\"$59741545\", :\"201920\"=&gt;\"$2500725\", :\"202021\"=&gt;nil, :\"202122\"=&gt;nil\n}\n</code></pre>\n\n<p>Which is fairly usable. However, since the years heading is a number, when I use </p>\n\n<pre><code>payrolls[Cleveland Cavaliers][:201617]\n</code></pre>\n\n<p>I'm getting this error:</p>\n\n<pre><code>payrolls.rb:31: syntax error, unexpected tINTEGER, expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END\n  puts payrolls[\"Cleveland Cavaliers\"][:201617]\n</code></pre>\n\n<p>Thus, what is the best way to get the salary data for the graph? </p>\n"}, {"tags": ["ruby", "polymorphism"], "comments": [{"owner": {"reputation": 1227, "user_id": 1843385, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/93e35de60e9b0cc8917999a0a8de1496?s=128&d=identicon&r=PG", "display_name": "Arnaldo Ignacio Gaspar V&#233;jar", "link": "https://stackoverflow.com/users/1843385/arnaldo-ignacio-gaspar-v%c3%a9jar"}, "edited": false, "score": 1, "creation_date": 1475698060, "post_id": 39882757, "comment_id": 67052563, "body": "And what do you have in User class ??. Have you defined the relation reservation in the User class.?"}, {"owner": {"reputation": 435, "user_id": 5136223, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Wl5tRylDc9g/AAAAAAAAAAI/AAAAAAAABJQ/ayueeKi75iw/photo.jpg?sz=128", "display_name": "Fernando Maymone", "link": "https://stackoverflow.com/users/5136223/fernando-maymone"}, "reply_to_user": {"reputation": 1227, "user_id": 1843385, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/93e35de60e9b0cc8917999a0a8de1496?s=128&d=identicon&r=PG", "display_name": "Arnaldo Ignacio Gaspar V&#233;jar", "link": "https://stackoverflow.com/users/1843385/arnaldo-ignacio-gaspar-v%c3%a9jar"}, "edited": false, "score": 0, "creation_date": 1475702260, "post_id": 39882757, "comment_id": 67054583, "body": "class User &lt; ActiveRecord::Base                       has_many :rooms   has_many :reservations   has_many :reviews   has_many :authorizations   has_many :documents     has_many :menus"}, {"owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "edited": false, "score": 0, "creation_date": 1475718024, "post_id": 39882757, "comment_id": 67058950, "body": "Did you create actual database table and run migration?"}, {"owner": {"reputation": 435, "user_id": 5136223, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Wl5tRylDc9g/AAAAAAAAAAI/AAAAAAAABJQ/ayueeKi75iw/photo.jpg?sz=128", "display_name": "Fernando Maymone", "link": "https://stackoverflow.com/users/5136223/fernando-maymone"}, "edited": false, "score": 0, "creation_date": 1475718517, "post_id": 39882757, "comment_id": 67059049, "body": "class ChangingReservationToPolymorphic &lt; ActiveRecord::Migration       def change         add_column :reservations, :reservable_id, :integer         add_column :reservations, :reservable_type, :string              add_index :reservations, :reservable_id         add_index :reservations, :reservable_type              end     end"}], "owner": {"reputation": 435, "user_id": 5136223, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Wl5tRylDc9g/AAAAAAAAAAI/AAAAAAAABJQ/ayueeKi75iw/photo.jpg?sz=128", "display_name": "Fernando Maymone", "link": "https://stackoverflow.com/users/5136223/fernando-maymone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475698685, "creation_date": 1475697891, "last_edit_date": 1475698685, "question_id": 39882757, "link": "https://stackoverflow.com/questions/39882757/polymorphism-error-in-my-model", "title": "Polymorphism error in my model", "body": "<p>I'm trying to make a polymorphic model for my reservations. </p>\n\n<p>A reservation can be from a USER to a ROOM, or from a USER to a MENU. </p>\n\n<p>Those are my classes and migrations. </p>\n\n<pre><code>class Room &lt; ActiveRecord::Base\nbelongs_to :user\nhas_many :reservations, as: reservable\n\n\nclass Menu &lt; ActiveRecord::Base\n belongs_to :user\n has_many :reservations, as: reservable\n\nclass Reservation &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :reservable, polymorphic: true\nend\n</code></pre>\n\n<p>In my controller I'm trying to access my reservations thru:</p>\n\n<pre><code>def your_trips\n    @trips = current_user.reservations\nend\n</code></pre>\n\n<p>But I'm getting the error:</p>\n\n<pre><code>NameError in PagesController#home\nundefined local variable or method `reservable' for #           &lt;Class:0x000000054c8308&gt; Did you mean? reset_table_name\n\nExtracted source (around line #4):\nRails.root: /home/ubuntu/workspace\n\nApplication Trace | Framework Trace | Full Trace\napp/models/room.rb:4:in `&lt;class:Room&gt;'\napp/models/room.rb:1:in `&lt;top (required)&gt;'\napp/controllers/pages_controller.rb:3:in `home'\n</code></pre>\n\n<p>Does anyone have ideas why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-api"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6791544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24310eacb415d8384efd5b12d171e1be?s=128&d=identicon&r=PG&f=1", "display_name": "HotDudeSmith", "link": "https://stackoverflow.com/users/6791544/hotdudesmith"}, "edited": false, "score": 0, "creation_date": 1475703868, "post_id": 39882965, "comment_id": 67055292, "body": "I updated my posted. Please have a look at it again. Thanks!"}], "tags": [], "owner": {"reputation": 1227, "user_id": 1843385, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/93e35de60e9b0cc8917999a0a8de1496?s=128&d=identicon&r=PG", "display_name": "Arnaldo Ignacio Gaspar V&#233;jar", "link": "https://stackoverflow.com/users/1843385/arnaldo-ignacio-gaspar-v%c3%a9jar"}, "is_accepted": false, "score": 0, "last_activity_date": 1475698727, "creation_date": 1475698727, "answer_id": 39882965, "question_id": 39882719, "link": "https://stackoverflow.com/questions/39882719/rails-api-render-json-seems-broken-it-keeps-return-html/39882965#39882965", "title": "Rails API - render JSON seems broken it keeps return HTML", "body": "<p>Use <code>User.where(id: params[:id]).first</code> instead <code>User.exists?()</code>. Is the same query and it going to be cached by Active Record.</p>\n\n<p>Also, i think that you <code>before_action</code> method is the guilty. Try with this</p>\n\n<p><code>\nprotected \ndef set_user\n   @user ||= User.where(id: params[:id]).first\nend\n...\n</code></p>\n\n<p>And in your controller</p>\n\n<p><code>\n   def show\n        if @user.present?\n          render json: @user\n        else \n          render json: { code: 12, title: \"User doesn't exist\", status: 404 }, status: :not_found\n      end\n</code></p>\n"}], "owner": {"reputation": 73, "user_id": 6791544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24310eacb415d8384efd5b12d171e1be?s=128&d=identicon&r=PG&f=1", "display_name": "HotDudeSmith", "link": "https://stackoverflow.com/users/6791544/hotdudesmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 931, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475703808, "creation_date": 1475697732, "last_edit_date": 1475703808, "question_id": 39882719, "link": "https://stackoverflow.com/questions/39882719/rails-api-render-json-seems-broken-it-keeps-return-html", "title": "Rails API - render JSON seems broken it keeps return HTML", "body": "<p>I am new to build Rails API from scratch (only API not web app) so I can build iOS app to connect to API. What I have an issue on my Rails API project doesn't allow me to have return JSON results, it always return HTML. Any idea what is wrong? Any suggestion appreciated. Thanks!</p>\n\n<p>What I want to have like this:</p>\n\n<pre><code>{\"code\":12,\"title\":\"User doesn't exist\",\"status\":404}\n</code></pre>\n\n<p><br>\nThis is what I got (it returns in red header in HTML page):</p>\n\n<pre><code>ActiveRecord::RecordNotFound in Api::V1::UsersController#show\nCouldn't find User with 'id'=5\n</code></pre>\n\n<hr>\n\n<p>Take a look at my scripts:</p>\n\n<p><strong>routes.rb</strong> (require JSON format):</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  namespace :api, defaults: { format: :json } do \n    namespace :v1 do\n      resources :entries, except: [:new, :edit]\n      resources :users, except: [:new, :edit]\n    end\n  end\n\nend\n</code></pre>\n\n<p><strong>../app/controllers/api/v1/users_controller.rb</strong></p>\n\n<pre><code>module Api\n  module V1\n    class UsersController &lt; ApplicationController\n\n      before_action :set_user, only: [:show, :update, :destroy]\n\n      def show\n        if User.exists?(params[:id])\n          @user = User.find(params[:id])\n          render json: @user\n        else \n          render json: { code: 12, title: \"User doesn't exist\", status: 404 }, status: :not_found\n      end \n .\n .\n .\n</code></pre>\n\n<h3>Note: It is very strange how this <em>show</em> method above acting weird. Part 1 is working well to return JSON results but Part 2 returns HTML instead JSON results.</h3>\n\n<p>Part 1: <code>render json: @user</code></p>\n\n<p>Part 2:  <code>render json: { code: 12, title: \"User doesn't exist\", status: 404 }, status: :not_found</code></p>\n\n<p><br></p>\n\n<p><strong>../app/controllers/api/v1/application_controller.rb</strong></p>\n\n<pre><code>class ApplicationController &lt; ActionController::API\n\nrescue_from ActionController::ParameterMissing, with: :render_bad_request  \nrescue_from ActiveRecord::RecordNotSaved, :with =&gt; :access_denied\n\n  def render_bad_request(e)\n    render json: params, status: :bad_request\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "lambda", "closures", "capture"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1475698482, "post_id": 39882131, "comment_id": 67052794, "body": "The same thing happens in JavaScript for the same reasons, it is just a matter of when <code>val</code> is evaluated. Try <code>v = 6; f = -&gt; { puts v }; f.call; v = 11; f.call</code> for another illustration."}, {"owner": {"reputation": 6709, "user_id": 3640161, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/065307b80129366f064b9b99811658aa?s=128&d=identicon&r=PG", "display_name": "Tiago Lopo", "link": "https://stackoverflow.com/users/3640161/tiago-lopo"}, "edited": false, "score": 0, "creation_date": 1475698920, "post_id": 39882131, "comment_id": 67053022, "body": "<code>val</code> is a reference, closures do remember  the  scope they are in but  do not create snapshots of it. It would be a bad idea memory wise"}, {"owner": {"reputation": 39, "user_id": 6928229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fa5e95c1602095055b1b80168fd8ba?s=128&d=identicon&r=PG&f=1", "display_name": "Wladimir Mutel", "link": "https://stackoverflow.com/users/6928229/wladimir-mutel"}, "edited": false, "score": 0, "creation_date": 1475699855, "post_id": 39882131, "comment_id": 67053522, "body": "in Perl :  `    use strict;     use warnings;      my @vals = &#39;a&#39;..&#39;z&#39;;     my @subs = ();      while (@vals) {      my $val = shift @vals;      push @subs, sub { print &quot;$val\\n&quot;; };     }     $_-&gt;() for @subs; `  prints from &#39;a&#39; to &#39;z&#39; as it would be expected&lt;br&gt; how could this be explained ?"}, {"owner": {"reputation": 39, "user_id": 6928229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fa5e95c1602095055b1b80168fd8ba?s=128&d=identicon&r=PG&f=1", "display_name": "Wladimir Mutel", "link": "https://stackoverflow.com/users/6928229/wladimir-mutel"}, "edited": false, "score": 1, "creation_date": 1475737139, "post_id": 39882131, "comment_id": 67065018, "body": "finally made this work by using loop : `     closures = [] ;     vals = (&#39;a&#39;..&#39;z&#39;).to_a ;     loop do      break if vals.empty? ;      val = vals.shift() ;      closures &lt;&lt; lambda { puts val }     end ;     closures.each { |l| l.call() } `"}, {"owner": {"reputation": 6709, "user_id": 3640161, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/065307b80129366f064b9b99811658aa?s=128&d=identicon&r=PG", "display_name": "Tiago Lopo", "link": "https://stackoverflow.com/users/3640161/tiago-lopo"}, "edited": false, "score": 0, "creation_date": 1475737408, "post_id": 39882131, "comment_id": 67065176, "body": "That&#39;s so weird :)"}], "answers": [{"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1475696311, "creation_date": 1475696311, "answer_id": 39882300, "question_id": 39882131, "link": "https://stackoverflow.com/questions/39882131/ruby-lambda-capture-a-weird-effect-and-workaround/39882300#39882300", "title": "ruby lambda capture : a weird effect and workaround", "body": "<p>I believe what is happening here is in the first case</p>\n\n<pre><code>closures = []\nvals = ('a'..'z').to_a\nuntil vals.empty?\n val = vals.shift()\n closures &lt;&lt; lambda { puts val }\nend\nclosures.each { |l| l.call() }\n</code></pre>\n\n<p>Every time you push <code>lambda { puts val }</code> into <code>closures</code>, you are simply pushing in a method that does not remember the current value of <code>val</code>. So, if we add the line <code>puts val</code> at the end of the <code>until</code> loop, <code>val = 'z'</code>, so when you call each lambda in the closure, you are calling <code>puts val</code>, with the current value of <code>val</code>. </p>\n\n<p>In the second case, </p>\n\n<pre><code>def closure(val)\n lambda {puts val}\nend\n\nclosures = []\nvals = ('a'..'z').to_a\nuntil vals.empty?\n val = vals.shift()\n closures &lt;&lt; closure(val)\nend\nclosures.each { |l| l.call() }\n</code></pre>\n\n<p>When you push <code>closure(val)</code> into closures, ruby is able to remember the current value of the argument, so you are pushing <code>closure('a')</code>, <code>closure('b')</code>, etc. Now, when you call each <code>l</code> in <code>closures</code>, you are able to print out a to z. </p>\n"}, {"tags": [], "owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "is_accepted": false, "score": 2, "last_activity_date": 1475713472, "creation_date": 1475713472, "answer_id": 39885663, "question_id": 39882131, "link": "https://stackoverflow.com/questions/39882131/ruby-lambda-capture-a-weird-effect-and-workaround/39885663#39885663", "title": "ruby lambda capture : a weird effect and workaround", "body": "<p>Variables are captured by reference in Ruby, not by value (the same thing is true in Python, JavaScript, and many other languages). Furthermore, the scope of <code>val</code> is the function scope, not scoped to the inside of the loop, so you don't get a new variable <code>val</code> in each iteration of the loop -- it's the same variable <code>val</code>; you are just assigning another value to it in each iteration.</p>\n\n<p>In each iteration of the loop, a closure is created that references the variable <code>val</code> -- the exact same variable <code>val</code>. Thus, when the closures are evaluated later, they all read the same value -- the value of the (single) variable <code>val</code> at that point.</p>\n\n<p>When you pass it to a method and create the closure inside the method, it's different because the variable that the closure captures is the <code>val</code> in the body of the method <code>closure</code>, scoped to that method. Each time you call the method <code>closure</code>, you get a new variable <code>val</code>, whose value is the value passed in, and it is never altered thereafter (nothing in <code>closure</code> assigns to it). So when the value is read by the closure later, it is still the value passed in to the call of <code>closure</code> when the closure was created.</p>\n"}], "owner": {"reputation": 39, "user_id": 6928229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54fa5e95c1602095055b1b80168fd8ba?s=128&d=identicon&r=PG&f=1", "display_name": "Wladimir Mutel", "link": "https://stackoverflow.com/users/6928229/wladimir-mutel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 3, "answer_count": 2, "score": 3, "last_activity_date": 1475713472, "creation_date": 1475695629, "last_edit_date": 1475700406, "question_id": 39882131, "link": "https://stackoverflow.com/questions/39882131/ruby-lambda-capture-a-weird-effect-and-workaround", "title": "ruby lambda capture : a weird effect and workaround", "body": "<pre><code>closures = []\nvals = ('a'..'z').to_a\nuntil vals.empty?\n val = vals.shift()\n closures &lt;&lt; lambda { puts val }\nend\nclosures.each { |l| l.call() }\n</code></pre>\n\n<p>this Ruby code prints 'z' for every call which is a bit surprising</p>\n\n<pre><code>def closure(val)\n lambda {puts val}\nend\n\nclosures = []\nvals = ('a'..'z').to_a\nuntil vals.empty?\n val = vals.shift()\n closures &lt;&lt; closure(val)\nend\nclosures.each { |l| l.call() }\n</code></pre>\n\n<p>this prints 'a' to 'z' as it would be expected.</p>\n\n<p>so what I see here is certain misbehavior in Ruby lambdas capturing their parameters at the moment of their creation<br>\ncan please anyone explain this effect by citing Ruby specification ? (my Ruby is 2.2.5p319/Cygwin)<br>\nshould this be reported as a bug in Ruby bug tracker ?<br>\nor it is an expected behavior ?<br>\nor it has already been fixed in some further version of Ruby ?<br></p>\n\n<p>thanks in advance for your replies</p>\n\n<p>UPDATE. Here is the same code ported to Perl. Surprisingly, but it works as expected:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @vals = 'a'..'z';\nmy @subs = (); \n\nwhile (@vals) { \n    my $val = shift @vals; \n    push @subs, sub { print \"$val\\n\"; }; \n} \n\n$_-&gt;() for @subs;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1475700478, "post_id": 39881590, "comment_id": 67053829, "body": "It might be useful to explain how to solve the problem (namely: initialize the variable outside of the block scope)."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1475700585, "post_id": 39881590, "comment_id": 67053881, "body": "@Jordan I was going to write about it, but I thought the whole thing about scope makes it intuitive. I&#39;ll edit the answer. Thx!"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 5, "last_activity_date": 1475700879, "last_edit_date": 1475700879, "creation_date": 1475693432, "answer_id": 39881590, "question_id": 39881455, "link": "https://stackoverflow.com/questions/39881455/confused-between-instance-variable-and-local-variable/39881590#39881590", "title": "confused between instance variable and local variable", "body": "<p>In your first example you created a <strong>local</strong> variable <code>updated</code>, that is only accessible within the scope of the block it is defined in. Meaning, it is available only within <code>Prime.each(number) do end</code> block.</p>\n\n<p>In your second example you created <strong>instance variable</strong> <code>@updated</code>. </p>\n\n<blockquote>\n  <p>without creating a class how my instance variable ( @updated) is\n  working</p>\n</blockquote>\n\n<p>It is because in Ruby everything occurs in the context of some object. Even though you did not created a class, you are being in the top-level context, in the context of object <code>main</code>.</p>\n\n<p>Thus, any instance variables defined within top-level are instance variables of this object <code>main</code>.</p>\n\n<p>So going back to your issue, to overcome it you'll want to just define the <code>updated</code> local variable outside the <code>Prime.each(number) do end</code> block:</p>\n\n<pre><code>def prime_large(number)\n  arr_prime = []\n  updated   = nil # initialize local varialbe\n  Prime.each(number) do |x|\n    new_arr_prime = arr_prime.push(x.to_s)\n    updated = new_arr_prime.select { |y| y.reverse == y } # assign new value\n  end\n  p updated.max \nend\np prime_large(1000)\n</code></pre>\n\n<p>To test it you can open irb or pry and check it yourself:</p>\n\n<pre><code>self               # the object in the context of which you are currently\n#=&gt; main\nself.class         # main is an instance of class Object, any methods defined\n                   # within main are added to Object class as instance methods\n#=&gt; Object\ninstance_variables # list of it's instance variables, none yet created\n#=&gt; []\n@variable = 1      # create and instance variable\n#=&gt; 1\ninstance_variables # now created variable occurs in the list of current object's instance variables\n#=&gt; [:@variable]\ndef hello; :hello end # define method\n#=&gt; :hello\nself.class.public_instance_methods(false) # list instance methods defined in Object\n#=&gt; [:hello]\n</code></pre>\n\n<p>What you now want to read about is lexical scopes in Ruby.</p>\n"}], "owner": {"reputation": 567, "user_id": 4038819, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/24159fc54ff9f0df8d995d304474d2c0?s=128&d=identicon&r=PG&f=1", "display_name": "robert williams", "link": "https://stackoverflow.com/users/4038819/robert-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 39881590, "answer_count": 1, "score": 4, "last_activity_date": 1475700879, "creation_date": 1475692866, "last_edit_date": 1475693751, "question_id": 39881455, "link": "https://stackoverflow.com/questions/39881455/confused-between-instance-variable-and-local-variable", "title": "confused between instance variable and local variable", "body": "<p>I recently started learning ruby and i am confused between instance variable and local variable and class variable. so , i recently written code which will find the largest palindrome in 1000 prime numbers. \ncode is:</p>\n\n<pre><code>def prime_large(number)\n  arr_prime = []\n  Prime.each(number) do |x|\n    new_arr_prime = arr_prime.push(x.to_s)\n    updated = new_arr_prime.select { |y| y.reverse == y }\n  end\n  p updated.max \nend\np prime_large(1000)\n</code></pre>\n\n<p>error i got is:</p>\n\n<pre><code>undefined local variable or method `updated' for main:Object (NameError)\n</code></pre>\n\n<p>I know that updated is a local variable of prime so i can't access it outside it but i changed the code by replacing it with @updated as below:</p>\n\n<pre><code>def prime_large(number)\n  arr_prime = []\n  Prime.each(number) do |x|\n    new_arr_prime = arr_prime.push(x.to_s)\n    @updated = new_arr_prime.select { |y| y.reverse == y }\n  end\n  p @updated.max \nend\np prime_large(1000)\n</code></pre>\n\n<p>after changing it , i got the output:</p>\n\n<pre><code>\"929\"\n\"929\"\n</code></pre>\n\n<p>in my code , without creating a class how  my instance variable ( @updated) is working . i am confused between local and instance variable . can anyone please explain me the differences and how they work ?</p>\n"}, {"tags": ["java", "ruby-on-rails", "ruby", "jruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1475692220, "post_id": 39881176, "comment_id": 67049269, "body": "Your question is unclear. What does it mean to &quot;implement a program on a website&quot;? Are you talking about writing a Java program in a web-based text editor written in Ruby? If that is your question, then yes, you can do that. You can write Java code in any text editor, it doesn&#39;t matter what language the editor is written in and whether it is web-based or a native desktop app."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1475693923, "post_id": 39881176, "comment_id": 67050276, "body": "&quot;Currently a Java Programmer...&quot; means what, exactly? You&#39;re a programmer. You can program. Just because you&#39;re unfamiliar with Ruby doesn&#39;t mean you can&#39;t figure it out. If you want to develop using Java because that&#39;s your core strength, by all means use Java and a <a href=\"http://stackoverflow.com/questions/6147398/java-web-framework-similar-with-ruby-on-rails-paradigm\">similar framework</a>, but if you&#39;re intending to use Ruby, <b>use Ruby</b>."}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 3384245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f88a72d6aa24304504478bce8873951c?s=128&d=identicon&r=PG&f=1", "display_name": "Tom N.", "link": "https://stackoverflow.com/users/3384245/tom-n"}, "is_accepted": false, "score": 2, "last_activity_date": 1475692582, "creation_date": 1475692582, "answer_id": 39881388, "question_id": 39881176, "link": "https://stackoverflow.com/questions/39881176/implementing-a-java-application-in-ruby/39881388#39881388", "title": "Implementing a Java Application in Ruby", "body": "<p>JRuby allows you to call Java from Ruby as well: <a href=\"https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby\" rel=\"nofollow\">https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby</a></p>\n\n<p>Before going this route, if you prefer to write your web application in Java (you mentioned that you are more comfortable with Java), why not use <a href=\"https://projects.spring.io/spring-boot/\" rel=\"nofollow\">Spring Boot</a>? Spring Boot lets you develop with minimal setup like Ruby on Rails.</p>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1475755047, "creation_date": 1475755047, "answer_id": 39895379, "question_id": 39881176, "link": "https://stackoverflow.com/questions/39881176/implementing-a-java-application-in-ruby/39895379#39895379", "title": "Implementing a Java Application in Ruby", "body": "<p>You can go the jRuby way and mix Ruby and Java and yes it wors in both directions.\nSee this wiki for examples and how to.</p>\n\n<p><a href=\"https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby\" rel=\"nofollow\">CallingJavaFromJRuby</a></p>\n\n<p>In theory you can call a java Jar and catch the results in Ruby but for a website I advise against it.</p>\n\n<p>You could present the Java functionality as a webservice but you could program the whole thing in Java or Ruby also.</p>\n"}], "owner": {"reputation": 21, "user_id": 6928071, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7c90bb5aecf1d49b433d9d483d1e722a?s=128&d=identicon&r=PG&f=1", "display_name": "S Mittal", "link": "https://stackoverflow.com/users/6928071/s-mittal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1475755047, "creation_date": 1475691785, "question_id": 39881176, "link": "https://stackoverflow.com/questions/39881176/implementing-a-java-application-in-ruby", "title": "Implementing a Java Application in Ruby", "body": "<p>Is it possible to implement a program written in Java on a website coded using Ruby? Currently developing a website where data from a form must be taken in, parsed, and used to fill out objects in the application. Currently a Java Programmer which is why using Java to develop the application would be much easier. However, Ruby is similar enough that it will work if need be.</p>\n\n<p>I know that there are applications such as JRuby that allow Ruby to be used in Java. Is the reverse true, and if so, how does it work?</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1475699176, "post_id": 39880828, "comment_id": 67053170, "body": "It&#39;s perhaps worthwhile noting that, if <code>a</code> is your array, <code>eval &quot;{ #{a.gsub(&#47;\\w+&#47;,&#39;:\\1&#39;) } }&quot; #=&gt; {:a=&gt;2, :b=&gt;3, :c=&gt;4, :d=&gt;5}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475691394, "post_id": 39881061, "comment_id": 67048813, "body": "actually thought that some regex will work nicer here"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1475694955, "post_id": 39881061, "comment_id": 67050843, "body": "While <code>scan</code> is a great tool, it also assumes your data is pristine. Any junk in the input is ignored, which might be desired behaviour or a real problem. Just a caveat."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1475695576, "post_id": 39881061, "comment_id": 67051215, "body": "@tadman Certainly. This is true of all of the solutions posted here\u2014and really any solution that we could come up with, given the scant information provided by the OP. My solution, for example, may fail if there&#39;s unexpected whitespace on either side of the <code>=</code>; solutions using <code>split</code> may fail with unexpected trailing or duplicate delimiters."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 7, "last_activity_date": 1475691398, "last_edit_date": 1475691398, "creation_date": 1475691346, "answer_id": 39881061, "question_id": 39880828, "link": "https://stackoverflow.com/questions/39880828/convert-string-into-hashes-of-symbol-and-integer-in-ruby/39881061#39881061", "title": "Convert string into Hashes of symbol and integer in Ruby", "body": "<p>I would probably do it this way:</p>\n\n<pre><code>str = \"a=2, b=3, c=4, d=5\"\nstr.scan(/(\\w+)=(\\d+)/).map {|k,v| [ k.to_sym, v.to_i ] }.to_h\n</code></pre>\n\n<p>The <code>scan</code> just extracts each key-value pair, and the rest ought to be self-explanatory.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1475695031, "post_id": 39881390, "comment_id": 67050889, "body": "No need for the <code>syms = </code> part since this is a one-liner."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1475697174, "last_edit_date": 1475697174, "creation_date": 1475692582, "answer_id": 39881390, "question_id": 39880828, "link": "https://stackoverflow.com/questions/39880828/convert-string-into-hashes-of-symbol-and-integer-in-ruby/39881390#39881390", "title": "Convert string into Hashes of symbol and integer in Ruby", "body": "<p>You were so close! The following will fix/extend your attempt slightly:</p>\n\n<pre><code>a = \"a=2, b=3, c=4, d=5\"\n\ndef hash_it(str)\n  str.split(\", \").map{|s| s.split(\"=\")}.map{|n| [n[0].to_sym, n[1].to_i]}.to_h\nend\n\nhash_it(a) #=&gt; {:a=&gt;2, :b=&gt;3, :c=&gt;4, :d=&gt;5}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1475694991, "post_id": 39881683, "comment_id": 67050869, "body": "The blind <code>rescue</code> statement here is really bad form, it suppresses errors and doesn&#39;t provide a whole lot of help. What exceptions are you expecting that code to generate?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1475695679, "post_id": 39881683, "comment_id": 67051259, "body": "What is <code>&quot;#{oper1}&quot;</code>? Are you trying to anticipate non-string arguments? If not, this is totally pointless and you should just use <code>oper1</code>. If so, why not just do <code>oper1.to_s</code>?"}], "tags": [], "owner": {"reputation": 228, "user_id": 4891793, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153039879553600/picture?type=large", "display_name": "som4ik", "link": "https://stackoverflow.com/users/4891793/som4ik"}, "is_accepted": false, "score": 0, "last_activity_date": 1475697887, "last_edit_date": 1475697887, "creation_date": 1475693815, "answer_id": 39881683, "question_id": 39880828, "link": "https://stackoverflow.com/questions/39880828/convert-string-into-hashes-of-symbol-and-integer-in-ruby/39881683#39881683", "title": "Convert string into Hashes of symbol and integer in Ruby", "body": "<p>try this </p>\n\n<pre><code>String.class_eval do \n  def hashing\n      self.split(\"#{oper1}\").map{|s| [ s.split(\"#{oper2}\")[0].strip.to_sym,s.split(\"#{oper2}\")[1].to_i]}.to_h\n  end\nend\n</code></pre>\n\n<p>\"YOUR STRING\".hashing\nand if you want it to user \", =\" as default and others in another places do this </p>\n\n<pre><code>String.class_eval do \n  def hashing(oper1= ',', oper2= '=')\n     self.split(oper1.to_s).map{|s| [ s.split(oper2.to_s)[0].strip.to_sym,s.split(oper2.to_s)[1].to_i]}.to_h\n  end\nend\n\n\"YOUR STRING \".hashing\n#or \n\"ANOTHER SRTING\".hashing(\"|\", \"!\") # for another split operators.\n</code></pre>\n\n<p>hope it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475699524, "post_id": 39882626, "comment_id": 67053351, "body": "I believe the OP would like the values of the hash to be numbers."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1475699607, "post_id": 39882626, "comment_id": 67053388, "body": "Thanks, @sagarpandya82. Will fix."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1475699679, "last_edit_date": 1475699679, "creation_date": 1475697387, "answer_id": 39882626, "question_id": 39880828, "link": "https://stackoverflow.com/questions/39880828/convert-string-into-hashes-of-symbol-and-integer-in-ruby/39882626#39882626", "title": "Convert string into Hashes of symbol and integer in Ruby", "body": "<pre><code>def hashify(str)\n  str.strip.split(/\\s*(?:=|,\\s)\\s*/).each_slice(2).map { |k,v| [k.to_sym, v.to_i] }.to_h\nend\n\nstr = \" a = 2, b=3 , c= 4, d =5 \"\nhashify str\n  #=&gt; {:a=&gt;\"2\", :b=&gt;\"3\", :c=&gt;\"4\", :d=&gt;\"5\"}\n</code></pre>\n\n<p>The <code>split</code> operation reads, \"split on an equals sign or a comma followed by a space, together with any surrounding whitespace\".</p>\n\n<p>The steps are as follows.</p>\n\n<pre><code>s = str.strip\n  #=&gt; \"a = 2, b=3 , c= 4, d =5\"\na = s.split(/\\s*(?:=|,\\s)\\s*/)\n  #=&gt; [\"a\", \"2\", \"b\", \"3\", \"c\", \"4\", \"d\", \"5\"] \ne = a.each_slice(2)\n  #=&gt; #&lt;Enumerator: [\"a\", \"2\", \"b\", \"3\", \"c\", \"4\", \"d\", \"5\"]:each_slice(2)&gt; \n</code></pre>\n\n<p>We can see the values that will generated by this enumerator by converting it to an array.</p>\n\n<pre><code>e.to_a\n  #=&gt; [[\"a\", \"2\"], [\"b\", \"3\"], [\"c\", \"4\"], [\"d\", \"5\"]] \n</code></pre>\n\n<p>Continuing,</p>\n\n<pre><code>f = e.map { |k,v| [k.to_sym, v.to_i] }\n  #=&gt; [[:a, 2], [:b, 3], [:c, 4], [:d, 5]] \nf.to_h\n  #=&gt; {:a=&gt;2, :b=&gt;3, :c=&gt;4, :d=&gt;5}\n</code></pre>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 39881061, "answer_count": 4, "score": 2, "last_activity_date": 1475699679, "creation_date": 1475690542, "question_id": 39880828, "link": "https://stackoverflow.com/questions/39880828/convert-string-into-hashes-of-symbol-and-integer-in-ruby", "title": "Convert string into Hashes of symbol and integer in Ruby", "body": "<p>I want to convert any given string of this format: <code>a = \"a=2, b=3, c=4, d=5\"</code> into hash of symbol (key) and integer (value).</p>\n\n<p>Expected input is <code>{:a=&gt;2, :b=&gt;3, :c=&gt;4, :d=&gt;5}</code> in this case.</p>\n\n<p>This is what I have:</p>\n\n<pre><code>def hash_it(str)\n  str.split(\", \").map{|s| s.split(\"=\")}.to_h\nend\n</code></pre>\n\n<p><code>hash_it(str)</code> returns <code>{\"a\"=&gt;\"2\", \"b\"=&gt;\"3\", \"c\"=&gt;\"4\", \"d\"=&gt;\"5\"}</code>. Close, but not quite. I am not sure how to turn the key into symbol and value into integer. I can convert them separately:</p>\n\n<pre><code>str.split(\", \").map{|s| s.split(\"=\")}.map{|n| n[0].to_sym}\n#=&gt; [:a, :b, :c, :d]\nstr.split(\", \").map{|s| s.split(\"=\")}.map{|n| n[1].to_i}\n#=&gt; [2, 3, 4, 5]\n</code></pre>\n\n<p>But I can't put them together for the intended purpose. </p>\n\n<p>How can I convert any given string in the format <code>\"a=2, b=3, c=4, d=5\"</code> into a hash of symbol-inter key-value <code>{:a=&gt;2, :b=&gt;3, :c=&gt;4, :d=&gt;5}</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 3086892, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/819508974/picture?type=large", "display_name": "nickmc01", "link": "https://stackoverflow.com/users/3086892/nickmc01"}, "is_accepted": false, "score": 1, "last_activity_date": 1475691689, "creation_date": 1475691689, "answer_id": 39881148, "question_id": 39880724, "link": "https://stackoverflow.com/questions/39880724/activeadmin-display-parent-name-in-column/39881148#39881148", "title": "ActiveAdmin: Display Parent name in column", "body": "<p>I figured this out but wanted to share what I found out. When using a self referencing column, you can use model.model to display the parent child relationship. Below was the change I made to make this work:</p>\n\n<pre><code>ActiveAdmin.register Category do\n    permit_params :name, :category_id\n\n    index do\n        column :name\n        column \"Parent Category\", (:category_id) do |category| \n            category.category_id? ? category.category : 'Parent'\n        end\n        actions\n    end\nend\n</code></pre>\n\n<p>As you can see, using the category.category in the code block allowed the parent to be displayed. Hope this helps someone in the future.</p>\n"}], "owner": {"reputation": 91, "user_id": 3086892, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/819508974/picture?type=large", "display_name": "nickmc01", "link": "https://stackoverflow.com/users/3086892/nickmc01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475691689, "creation_date": 1475690143, "question_id": 39880724, "link": "https://stackoverflow.com/questions/39880724/activeadmin-display-parent-name-in-column", "title": "ActiveAdmin: Display Parent name in column", "body": "<p>So the basics is that I currently has a self referencing model called categories show below</p>\n\n<pre><code>class Category &lt; ApplicationRecord\n    belongs_to :category\n    has_many :children, -&gt; { order(:name) }, :dependent =&gt; :destroy, :class_name =&gt; 'Category'\n\n    validates :name, presence: true\nend\n</code></pre>\n\n<p>Here is the ActiveAdmin class for Category</p>\n\n<pre><code>ActiveAdmin.register Category do\n    permit_params :name, :category_id\n\n    index do\n        column :name\n        column(:category_id) do |category| \n            category.category_id? ? category.category_id : 'Parent'\n        end\n        actions\n    end\nend\n</code></pre>\n\n<p>What I am trying to do is to check if the category is a subcategory, if it is display the parent name, if is not display 'Parent'. I have the code for displaying parent working as you see above.</p>\n\n<p>If I do not use the code block and just use the following:</p>\n\n<pre><code>column :category_id\n</code></pre>\n\n<p>Then It will show the parent name. But here is what I see when I use category.category_id inside the codeblock</p>\n\n<p><a href=\"https://i.stack.imgur.com/SFT00.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SFT00.png\" alt=\"Category Table displaying numeric for parent category\"></a></p>\n\n<p>Maybe I am missing something but any help is greatly appreciated.</p>\n"}, {"tags": ["ruby", "delayed-job", "roo"], "answers": [{"tags": [], "owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1475690278, "creation_date": 1475690278, "answer_id": 39880762, "question_id": 39880666, "link": "https://stackoverflow.com/questions/39880666/ruby-delayed-job-roo-undefined-method-name-for-nilnilclass/39880762#39880762", "title": "Ruby, delayed_job, Roo - undefined method `name&#39; for nil:NilClass", "body": "<p>Try Following.put <code>delay</code> at the end</p>\n\n<pre><code>def upload\n  @file = params[:file_xlsx]\n  Category.upload_process(@file, params[:id]).delay\n  redirect_to action: \"show\", id: params[:id]\nend\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 2565160, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/626960417/picture?type=large", "display_name": "N Javier Romero", "link": "https://stackoverflow.com/users/2565160/n-javier-romero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475690914, "creation_date": 1475689934, "last_edit_date": 1475690914, "question_id": 39880666, "link": "https://stackoverflow.com/questions/39880666/ruby-delayed-job-roo-undefined-method-name-for-nilnilclass", "title": "Ruby, delayed_job, Roo - undefined method `name&#39; for nil:NilClass", "body": "<p>In my controller</p>\n\n<pre><code>  def upload\n    @file = params[:file_xlsx]\n    Category.delay.upload_process(@file.tempfile, params[:id])\n    redirect_to action: \"show\", id: params[:id]\n  end\n</code></pre>\n\n<p>On My Model</p>\n\n<pre><code>  def self.upload_process(file, id)\n\n    xlsx = Roo::Excelx.new(file)\n    .........\n  end\n</code></pre>\n\n<p>The error:</p>\n\n<p>undefined method `name' for nil:NilClass</p>\n\n<p>Works perfect without \"delayed_job\", but does not work with \"delayed_job\", what can be wrong?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1475689671, "post_id": 39880569, "comment_id": 67047861, "body": "Were you trying to report this to the Rails devs, or were you looking to see if you had missed something instead?  Looks like a bug report to me."}, {"owner": {"reputation": 1624, "user_id": 400461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ffa5e1a9980ad0cd80ed05a7c3f0a0?s=128&d=identicon&r=PG", "display_name": "Christian Bankester", "link": "https://stackoverflow.com/users/400461/christian-bankester"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1475690573, "post_id": 39880569, "comment_id": 67048348, "body": "@Makoto Just looking to see if I had missed something. It&#39;s very possible that there&#39;s something that&#39;s just logically incorrect with the data flow that I&#39;m just overlooking."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1475692392, "post_id": 39880569, "comment_id": 67049384, "body": "if youre going to submit a ticket to rails, you need to package your code into a reproducible executable. This would involve writing test cases, which might help you solve your problem anyway."}], "owner": {"reputation": 1624, "user_id": 400461, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ffa5e1a9980ad0cd80ed05a7c3f0a0?s=128&d=identicon&r=PG", "display_name": "Christian Bankester", "link": "https://stackoverflow.com/users/400461/christian-bankester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475689594, "creation_date": 1475689594, "question_id": 39880569, "link": "https://stackoverflow.com/questions/39880569/rails-5-passes-wrong-argument-into-has-many-through-scope", "title": "Rails 5 passes wrong argument into has_many :through scope", "body": "<p>Suppose we have the following (albeit complicated) setup:</p>\n\n<pre><code>class Company &lt; ActiveRecord::Base\n  has_many :homes, inverse_of: :company\n  has_many :item_company_items, class_name: 'CompanyItem', inverse_of: :item_company, foreign_key: :item_company_id\n  has_many :home_company_items, class_name: 'CompanyItem', inverse_of: :home_company, foreign_key: :home_company_id\n  has_many :replacement_items, through: :item_company_items, source: :replacement_items, inverse_of: :responsible_company\nend\n\nclass Home &lt; ActiveRecord::Base\n  belongs_to :company, inverse_of: :homes\n  has_many :company_items, through: :company, source: :home_company_items, inverse_of: :homes\n  has_many :replacement_items, inverse_of: :home\nend\n\nclass CompanyItem &lt; ActiveRecord::Base\n  belongs_to :item, inverse_of: :company_items\n  belongs_to :item_company, class_name: 'Company', inverse_of: :item_company_items, foreign_key: :item_company_id\n  belongs_to :home_company, class_name: 'Company', inverse_of: :home_company_items, foreign_key: :home_company_id\n  has_many :homes, through: :home_company, source: :homes, inverse_of: :company_items\n  has_many :replacement_items, -&gt; company_item {\n    where item_id: company_item.item_id\n  }, through: :homes, source: :replacement_items, inverse_of: :company_item\nend\n\nclass Item &lt; ActiveRecord::Base\n  has_many :replacement_items, inverse_of: :item\n  has_many :company_items, inverse_of: :item\nend\n\nclass ReplacementItem &lt; ActiveRecord::Base\n  belongs_to :item, inverse_of: :replacement_items\n  belongs_to :home, inverse_of: :replacement_items\n  has_one :company_item, -&gt; rep { where item_id: rep.item_id }, through: :home, source: :company_items, inverse_of: :replacement_items\n  has_one :responsible_company, through: :company_item, source: :item_company, inverse_of: :replacement_items\nend\n</code></pre>\n\n<p>So, in effect, <code>Item</code>s have many <code>CompanyItem</code>s which represent the <code>Company</code> that is responsible (<code>CompanyItem#item_company</code>) for <code>ReplacementItem</code>s belonging to that <code>Item</code> when the <code>ReplacementItem</code> is for a <code>Home</code> belonging to the <code>Company</code> specified by the <code>CompanyItem</code> (<code>CompanyItem#home_company</code>).</p>\n\n<p>Very circuitous, but it's exactly what we need.</p>\n\n<p>Now, as we can see, on the <code>ReplacementItem</code> model, the <code>has_one :company_item, through: :home</code> relationship uses a scope to select the specific <code>CompanyItem</code> belonging to the <code>home</code> that matches the <code>item_id</code>. This makes sense sence just doing <code>replacement_item.home.company_items</code> would give us all of <code>homes</code> company items, when we really just need the one that matches the given <code>ReplacementItem</code>. Calling the <code>ReplacementItem#company_item</code> method works flawlessly and gives us exactly what we want.</p>\n\n<p>Likewise, the <code>CompanyItem</code> model has <code>has_many :replacement_items, through: :homes</code>, using the exact same scope to get just the replacement items that match the given <code>CompanyItem</code>. In this instance, however, we get an error when calling <code>CompanyItem#replacement_items</code>:</p>\n\n<pre><code>NoMethodError: undefined method `item_id' for #&lt;Company id: 2&gt;\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activemodel/lib/active_model/attribute_methods.rb:434:in `method_missing'\n    bug.rb:59:in `block in &lt;class:CompanyItem&gt;'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/association_scope.rb:161:in `instance_exec'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/association_scope.rb:161:in `eval_scope'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/association_scope.rb:139:in `block in add_constraints'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/association_scope.rb:138:in `each'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/association_scope.rb:138:in `add_constraints'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/association_scope.rb:28:in `scope'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/association_scope.rb:5:in `scope'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/association.rb:97:in `association_scope'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/association.rb:86:in `scope'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/collection_association.rb:327:in `scope'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/collection_proxy.rb:36:in `initialize'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/relation/delegation.rb:101:in `new'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/relation/delegation.rb:101:in `create'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/collection_association.rb:46:in `reader'\n    /Users/cbankester/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-bf5876af099f/activerecord/lib/active_record/associations/builder/association.rb:111:in `replacement_items'\n    bug.rb:85:in `test_hmt_with_conditions'\n</code></pre>\n\n<p>This looks like a Rails bug to me. There's absolutely no way a <code>Company</code> object should be passed in to the <code>has_many :replacement_items</code> scope defined on the <code>CompanyItem</code> model. Before bugging the Rails team, though, I am hoping someone here has seen a similar problem or can point out the fault in my code.</p>\n\n<p>See my gist here for a runnable, failing test: <a href=\"https://gist.github.com/cmbankester/64ef4eb125bf90dbe0274fab8e5427f1\" rel=\"nofollow\">https://gist.github.com/cmbankester/64ef4eb125bf90dbe0274fab8e5427f1</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-applications", "filterrific"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1475689368, "post_id": 39880443, "comment_id": 67047721, "body": "You can&#39;t send things from views back into the controller. Once the controller has done its thing it hands off rendering to the view and that&#39;s a one-way street. You can only propagate changes in a drop-down to another instance of the controller via AJAX calls for form submissions."}], "answers": [{"tags": [], "owner": {"reputation": 1779, "user_id": 3102718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c06b4a732dc2ee775f93135d1592f?s=128&d=identicon&r=PG", "display_name": "Alex Avoiants", "link": "https://stackoverflow.com/users/3102718/alex-avoiants"}, "is_accepted": false, "score": 0, "last_activity_date": 1475925105, "creation_date": 1475925105, "answer_id": 39931662, "question_id": 39880443, "link": "https://stackoverflow.com/questions/39880443/how-do-i-access-filterrific-scope-variables-directly-in-ruby-on-rails/39931662#39931662", "title": "How do I access filterrific scope variables directly in Ruby on Rails?", "body": "<p>After form was submitted you can get selected option in controller from <code>params</code>, something like: </p>\n\n<pre><code>params[:filterrific][:departments]\n</code></pre>\n\n<p>In any case try inspect <code>params</code> in controller to investigate:</p>\n\n<pre><code>puts params.inspect\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6927836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7859e41ad3f11e866e465119f198a184?s=128&d=identicon&r=PG&f=1", "display_name": "Mandolon", "link": "https://stackoverflow.com/users/6927836/mandolon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475925105, "creation_date": 1475689123, "last_edit_date": 1475783920, "question_id": 39880443, "link": "https://stackoverflow.com/questions/39880443/how-do-i-access-filterrific-scope-variables-directly-in-ruby-on-rails", "title": "How do I access filterrific scope variables directly in Ruby on Rails?", "body": "<p>I'm using Ruby on Rails and I'm trying to access a filterrific scope variable from a 'select' drop down in the view for use in the controller.</p>\n\n<p>Basically, my code looks like this.</p>\n\n<pre><code>&lt;%= form_for_filterrific @filter do |c| %&gt;\n    &lt;%= c.select(:departments, @filter.select_options[:docs], {}, {style: \"width: 140px;\"} ) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Is there a way for me to get the currently selected <code>doc</code> option from the drop down and send it to a controller?</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 636, "user_id": 1253311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21acab710c6e17104c2af7bf8390a9d5?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1253311/matt"}, "is_accepted": false, "score": 5, "last_activity_date": 1475689631, "creation_date": 1475689631, "answer_id": 39880581, "question_id": 39880439, "link": "https://stackoverflow.com/questions/39880439/what-does-no-implicit-conversion-of-regexp-into-string-typeerror-mean/39880581#39880581", "title": "What does &#39;no implicit conversion of Regexp into String (TypeError)&#39; mean?", "body": "<p><code>include?</code> expects a string as documented <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-include-3F\" rel=\"noreferrer\">here</a>. It seems like you were looking for <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-match\" rel=\"noreferrer\"><code>match</code></a>. </p>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 4, "last_activity_date": 1475692224, "creation_date": 1475692224, "answer_id": 39881289, "question_id": 39880439, "link": "https://stackoverflow.com/questions/39880439/what-does-no-implicit-conversion-of-regexp-into-string-typeerror-mean/39881289#39881289", "title": "What does &#39;no implicit conversion of Regexp into String (TypeError)&#39; mean?", "body": "<p>Matt's answer is good, but it's worth noting that there's some nuance here. Firstly, with the Regexp you have, you're going to match any string that contains any digit:</p>\n\n<pre><code>class String\n  def digit?\n    match(/[0-9]/) \n  end\nend\n\n\"foo1bar\".digit? # =&gt; #&lt;MatchData \"1\"&gt;\n</code></pre>\n\n<p>If you want to match a single digit you'll want to use anchors\u2014<code>\\A</code> and <code>\\z</code> for the start and end of the string, respectively\u2014and while we're at it, you might as well use <code>\\d</code> instead of <code>[0-9]</code>, ergo <code>/\\A\\d\\z/</code>. If you want to match one or more digits, use the <code>+</code> quantifier: <code>/\\A\\d+\\z/</code>.</p>\n\n<p>Finally, <code>match</code> might be overkill here. I suggest using the <code>=~</code> operator:</p>\n\n<pre><code>class String\n  def digit?\n    self =~ /\\A\\d\\z/\n  end\n\n  def digits?\n    self =~ /\\A\\d+\\z/\n  end\nend\n\n\"foo123bar\".digit?  # =&gt; nil\n\"1\".digit?          # =&gt; 0\n\"123\".digit?        # =&gt; nil\n\n\"foo123bar\".digits? # =&gt; nil\n\"1\".digits?         # =&gt; 0\n\"123\".digits?       # =&gt; 0\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 6758433, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10154048264753472/picture?type=large", "display_name": "Jack Kelly", "link": "https://stackoverflow.com/users/6758433/jack-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5295, "favorite_count": 0, "accepted_answer_id": 39881289, "answer_count": 2, "score": 1, "last_activity_date": 1475692224, "creation_date": 1475689109, "question_id": 39880439, "link": "https://stackoverflow.com/questions/39880439/what-does-no-implicit-conversion-of-regexp-into-string-typeerror-mean", "title": "What does &#39;no implicit conversion of Regexp into String (TypeError)&#39; mean?", "body": "<pre><code>class String\n  def digit?\n    self.include?(/[0-9]/) \n  end\nend\n\nTest.assert_equals \"\".digit?, false\nTest.assert_equals \"7\".digit?, true\nTest.assert_equals \" \".digit?, false\n</code></pre>\n\n<p>I have been playing around with regular expressions. Can you tell me how I have made an error? I have tried explicitly converting it to a string but it doesn't work nor do I see why I should have to. Could anyone enlighten me? Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "time", "format", "duration"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1475690074, "last_edit_date": 1475690074, "creation_date": 1475685159, "answer_id": 39879377, "question_id": 39879309, "link": "https://stackoverflow.com/questions/39879309/how-do-i-write-my-time-conversion-function-to-account-for-places-after-the-decim/39879377#39879377", "title": "How do I write my time conversion function to account for places after the decimal point?", "body": "<p>Just convert it to Float while processing instead of Integer:</p>\n\n<pre><code>  def duration_in_milliseconds(input)\n    if input\n      input.split(':').map(&amp;:to_f).inject(0) { |a, b| a * 60 + b } * 1000\n    else\n      0\n    end\n  end\n\nduration_in_milliseconds('19:14')\n#=&gt; 1154000.0\nduration_in_milliseconds('19:14.1')\n#=&gt; 1154100.0\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6447029"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 39879377, "answer_count": 1, "score": 1, "last_activity_date": 1475690074, "creation_date": 1475684956, "last_edit_date": 1475685647, "question_id": 39879309, "link": "https://stackoverflow.com/questions/39879309/how-do-i-write-my-time-conversion-function-to-account-for-places-after-the-decim", "title": "How do I write my time conversion function to account for places after the decimal point?", "body": "<p>I\u2019m using Rails 4.2.7.  I have this function for converting a string (meant to represent a time duration) into milliseconds \u2026</p>\n\n<pre><code>  def duration_in_milliseconds(input)\n    if input\n      input.split(':').map(&amp;:to_i).inject(0) { |a, b| a * 60 + b } * 1000\n    else\n      0\n    end\n  end\n</code></pre>\n\n<p>Problem is, the above doesn\u2019t take account over if there are tenths of a second (a decimal place). So passing this argument \u201c19:14.1\u201d gets the same result as passing this argument \u201c19:14\u201d.  How can I make adjustments to the above so that it will account for the part of the duration after the decimal place?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475685692, "post_id": 39879276, "comment_id": 67045696, "body": "There are already good blog posts about this for instance <a href=\"https://mattbrictson.com/dynamic-rails-error-pages\" rel=\"nofollow noreferrer\">mattbrictson.com/dynamic-rails-error-pages</a>"}, {"owner": {"reputation": 412, "user_id": 1337348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fc986e3c93129ff588d1dfcf8a1ab75a?s=128&d=identicon&r=PG&f=1", "display_name": "Jocko", "link": "https://stackoverflow.com/users/1337348/jocko"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475694305, "post_id": 39879276, "comment_id": 67050515, "body": "I have already read that one.  Like I said, I have done many searches on the topic.  All of them describe how to set it up, which I have already done.  The issue is the 301 and how to change it to a 302 so that it doesn&#39;t get cached."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475701882, "post_id": 39879276, "comment_id": 67054438, "body": "I can&#39;t reproduce your error. I did follow the steps described within the blog post and the error view is rendered instantly when the error occours without any redirect."}, {"owner": {"reputation": 412, "user_id": 1337348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fc986e3c93129ff588d1dfcf8a1ab75a?s=128&d=identicon&r=PG&f=1", "display_name": "Jocko", "link": "https://stackoverflow.com/users/1337348/jocko"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475702740, "post_id": 39879276, "comment_id": 67054799, "body": "Please read the post, it&#39;s not an error. I need the redirect to be a 302 which is a temporary redirect, not a 301 which is permanent, and gets cached. If you look in your dev console it will show you the kind of redirect.  You need to make sure your preserve your console log, so it will not clear between requests.   Look at the page request that is generating the error, and you will see that it was redirected as 301.  I need to know how to change this to 302."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475734805, "post_id": 39879276, "comment_id": 67063866, "body": "I did look at my network traffic within firefox and into my logfile. When this error occours Rails directly renders the error action. For instance you call <code>&#47;foo&#47;bar</code> and <code>bar</code> does not exists Rails does not a redirect to a 404 action it renders directly <code>ErrorsController#not_found</code> no redirect to <code>&#47;404</code> happens. So this redirect is in my point of view no Rails internal action. You create it by your own."}, {"owner": {"reputation": 412, "user_id": 1337348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fc986e3c93129ff588d1dfcf8a1ab75a?s=128&d=identicon&r=PG&f=1", "display_name": "Jocko", "link": "https://stackoverflow.com/users/1337348/jocko"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475773971, "post_id": 39879276, "comment_id": 67089286, "body": "For whatever reason, mine is redirecting."}], "answers": [{"tags": [], "owner": {"reputation": 412, "user_id": 1337348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fc986e3c93129ff588d1dfcf8a1ab75a?s=128&d=identicon&r=PG&f=1", "display_name": "Jocko", "link": "https://stackoverflow.com/users/1337348/jocko"}, "is_accepted": true, "score": 0, "last_activity_date": 1475794280, "last_edit_date": 1475794280, "creation_date": 1475774488, "answer_id": 39902130, "question_id": 39879276, "link": "https://stackoverflow.com/questions/39879276/rails-error-page-using-301-redirect-chrome-doesnt-play-well/39902130#39902130", "title": "Rails Error Page using 301 Redirect - Chrome Doesn&#39;t Play Well", "body": "<p>So I figured out what went wrong.  Based on the comments from @slowjack2k, I realized that rails was redirecting in my situation, vs just rendering the error page in place of the page that caused the problem.  I looked at my routes, and realized that the error routes were inside of a :locale scope, so they were being routed as:</p>\n\n<pre><code>/en/500\n/en/404\n</code></pre>\n\n<p>Rails has a requirement that they be routed from the root path.  So I moved them out of the locale scope, and now it's not redirecting anymore, it's just rendering the 500 in place of the requested page.</p>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 4838119, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-R2kB1nqiE10/AAAAAAAAAAI/AAAAAAAAINs/HQc6by5fArM/photo.jpg?sz=128", "display_name": "Webb Lu", "link": "https://stackoverflow.com/users/4838119/webb-lu"}, "is_accepted": false, "score": 0, "last_activity_date": 1592895845, "creation_date": 1592895845, "answer_id": 62529099, "question_id": 39879276, "link": "https://stackoverflow.com/questions/39879276/rails-error-page-using-301-redirect-chrome-doesnt-play-well/62529099#62529099", "title": "Rails Error Page using 301 Redirect - Chrome Doesn&#39;t Play Well", "body": "<p>We have a similar but a bit different bug is that our 500 Error is constantly being cached via 301 permanent redirect to 500.html, turns out is that we do the redirection incorrectly</p>\n<p><a href=\"https://i.stack.imgur.com/5X0Tw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5X0Tw.png\" alt=\"enter image description here\" /></a></p>\n<p>after change our route.rb from</p>\n<pre><code>get '/500', to: redirect('/500.html')\n</code></pre>\n<p>to</p>\n<pre><code>get '/500', to: redirect('/500.html', status: 302)\n</code></pre>\n"}], "owner": {"reputation": 412, "user_id": 1337348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fc986e3c93129ff588d1dfcf8a1ab75a?s=128&d=identicon&r=PG&f=1", "display_name": "Jocko", "link": "https://stackoverflow.com/users/1337348/jocko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 39902130, "answer_count": 2, "score": 1, "last_activity_date": 1592895845, "creation_date": 1475684830, "question_id": 39879276, "link": "https://stackoverflow.com/questions/39879276/rails-error-page-using-301-redirect-chrome-doesnt-play-well", "title": "Rails Error Page using 301 Redirect - Chrome Doesn&#39;t Play Well", "body": "<p>I have my Rails environment configured to generate a dynamic error page based on an error code generated while browsing the site.</p>\n\n<p>Currently I handle 404, 422 and 500 error codes through one page.   The issue is that when a 500 error is generated, Rails is automatically applying the 301 redirect.   This is problematic because error pages are not intended to be permanent, and Chrome is caching them.   This results in the user getting the 500 page, even after the error has been fixed.</p>\n\n<p>I have done every Google search I can, and it appears that no one has had this specific issue (Note: I don't actually believe that).</p>\n\n<p>Here's how my routes are configured:</p>\n\n<pre><code># routing error pages\n%w( 404 422 500 ).each do |code|\n  get code, to: \"errors#show\", code: code\nend\n</code></pre>\n\n<p>And here's my controller code (Note: pieces omitted for brevity):</p>\n\n<pre><code>if status_code == '404'\n  Rails.logger.warn \"Invalid endpoint request: #{request.original_fullpath}\"\nelsif status_code == '500'\n\n  Rails.logger.warn \"The 500 page was rendered.  Please check the logs prior to this message for stack trace and reporting.\"\n\n  ...\n\nend\n\nrespond_to do |format|\n  format.html { render status_code.to_s, status: status_code }\n  format.json { render json: status_code.to_s, status: status_code }\nend\n</code></pre>\n\n<p>I have a page that generates an exception to test this calle <code>oh_noes</code>, this is the request redirect:</p>\n\n<pre><code>Request URL:http://192.168.42.42:3000/en/oh_noes\nRequest Method:GET\nStatus Code:301 Moved Permanently\nRemote Address:192.168.42.42:3000\n</code></pre>\n\n<p>Thanks in advance for any help you can provide.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler", "gem-bundler"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 1, "creation_date": 1475688339, "post_id": 39879138, "comment_id": 67047117, "body": "It looks like you&#39;re using Ruby 1.9.3 and Rails 5 is not compatible with such an old version of Ruby."}, {"owner": {"reputation": 780, "user_id": 3281728, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/676698176/picture?type=large", "display_name": "mydoglixu", "link": "https://stackoverflow.com/users/3281728/mydoglixu"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1475688669, "post_id": 39879138, "comment_id": 67047316, "body": "ah! I&#39;ll check on that!"}], "owner": {"reputation": 780, "user_id": 3281728, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/676698176/picture?type=large", "display_name": "mydoglixu", "link": "https://stackoverflow.com/users/3281728/mydoglixu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 772, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475684395, "creation_date": 1475684395, "question_id": 39879138, "link": "https://stackoverflow.com/questions/39879138/could-not-find-activesupport-5-0-0-1-in-any-of-the-sources-bundlergemnotfound", "title": "Could not find activesupport-5.0.0.1 in any of the sources (Bundler::GemNotFound)", "body": "<p>I have done the 'bundle install' as the error message suggests, then I verified activesupport is installed using 'bundle show activesupport' which it is. Then I verified ruby is using the correct version that it was installed to, which it is. Now I'm at a loss and I keep getting the error message.</p>\n\n<p>Here's the dev server:\n<a href=\"http://ec2-52-34-168-122.us-west-2.compute.amazonaws.com/\" rel=\"nofollow\">http://ec2-52-34-168-122.us-west-2.compute.amazonaws.com/</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": true, "score": 6, "last_activity_date": 1475684965, "last_edit_date": 1475684965, "creation_date": 1475683504, "answer_id": 39878864, "question_id": 39878414, "link": "https://stackoverflow.com/questions/39878414/add-icon-to-input-submit-button/39878864#39878864", "title": "Add icon to input submit button", "body": "<p>Try this</p>\n\n<pre><code>&lt;%= button_tag(type: \"submit\", class: \"new_post_submit\") do %&gt;\n  &lt;span&gt;&lt;i class=\"glyphicon glyphicon-pencil\"&gt;&lt;/i&gt; Post&lt;/span&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>This generates html similar to </p>\n\n<pre><code>&lt;button type=\"submit\" class=\"new_post_submit\"&gt;\n  &lt;span&gt;&lt;i class=\"glyphicon glyphicon-plus\"&gt;&lt;/i&gt; Post&lt;/span&gt;\n&lt;/button&gt;\n</code></pre>\n\n<p>Let me know if this works. </p>\n"}], "owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2438, "favorite_count": 1, "accepted_answer_id": 39878864, "answer_count": 1, "score": 1, "last_activity_date": 1475684965, "creation_date": 1475682160, "question_id": 39878414, "link": "https://stackoverflow.com/questions/39878414/add-icon-to-input-submit-button", "title": "Add icon to input submit button", "body": "<p>The goal is to display an icon and text inside of a submit button.</p>\n\n<hr>\n\n<p>Here's what I tried at first; and failed.</p>\n\n<pre><code>&lt;%= f.submit \"Post\", class: \"new_post_submit\" do %&gt;\n  &lt;i class=\"glyphicon glyphicon-pencil\"&gt;&lt;/i&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>After some time tinkering, I ended up with this. Still, it doesn't work so I think it's time to ask the community. This doesn't cause any errors, but instead of saying \"(icon) Post\", the button displays the default text: \"Create post\"</p>\n\n<pre><code>&lt;%= f.submit class: \"new_post_submit\" do %&gt;\n  &lt;span&gt;&lt;i class=\"glyphicon glyphicon-pencil\"&gt;&lt;/i&gt; Post&lt;/span&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "bundler", "rbenv"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5923137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f877ef5bd6b8dd80e0215609df41918e?s=128&d=identicon&r=PG&f=1", "display_name": "kn0t", "link": "https://stackoverflow.com/users/5923137/kn0t"}, "is_accepted": false, "score": 0, "last_activity_date": 1475708250, "creation_date": 1475708250, "answer_id": 39884944, "question_id": 39877970, "link": "https://stackoverflow.com/questions/39877970/gems-not-being-installed-to-correct-directory-using-rbenv/39884944#39884944", "title": "Gems not being installed to correct directory using rbenv", "body": "<p>I had a similar issue and it was because i had rvm installed with rbenv. i had to uninstall rvm and uninstall ruby then reinstalled ruby and rails entirely. not sure if you have rvm. but i hope this helps or gives you a clue.</p>\n"}, {"tags": [], "owner": {"reputation": 343, "user_id": 5455624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-iuVUWcI6cMQ/AAAAAAAAAAI/AAAAAAAAACI/pX2kx_Vq7CQ/photo.jpg?sz=128", "display_name": "Derek Povah", "link": "https://stackoverflow.com/users/5455624/derek-povah"}, "is_accepted": false, "score": 1, "last_activity_date": 1479428061, "creation_date": 1479428061, "answer_id": 40667342, "question_id": 39877970, "link": "https://stackoverflow.com/questions/39877970/gems-not-being-installed-to-correct-directory-using-rbenv/40667342#40667342", "title": "Gems not being installed to correct directory using rbenv", "body": "<p>Uninstalling and reinstalling ruby 2.3.1 worked for me:</p>\n\n<pre><code>\u2192 rbenv uninstall 2.3.1\n\u2192 rbenv install 2.3.1\n\u2192 rbenv global 2.3.1 #or rbenv local 2.3.1\n\u2192 rbenv rehash\n</code></pre>\n\n<p>rbenv doesn't have a fancy reinstall command like rvm.</p>\n"}], "owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479428061, "creation_date": 1475680906, "last_edit_date": 1495542633, "question_id": 39877970, "link": "https://stackoverflow.com/questions/39877970/gems-not-being-installed-to-correct-directory-using-rbenv", "title": "Gems not being installed to correct directory using rbenv", "body": "<p>When I try to run <code>rails console</code> it blows up and gives me this error:</p>\n\n<pre><code>  Referenced from: /Users/masonry/.rbenv/versions/2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle\n  Reason: image not found - /Users/masonry/.rbenv/versions/2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle\n</code></pre>\n\n<p>Unfortunately, <a href=\"https://stackoverflow.com/a/25810042/5381605\">reinstalling and relinking readline</a> with homebrew does not do the trick for me.</p>\n\n<p>I've tried including <code>rb-readline</code> in my Gemfile but still not working.  </p>\n\n<p>The only way to fix this problem is to completely nuke ruby and reinstall... which takes a long time and is tedious.</p>\n\n<p>I have a suspicion that the source of this problem may be that my gems are being installed to an incorrect directory.  Here's where they are being installed:</p>\n\n<pre><code>\u2192 gem env home\n/Users/masonry/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0\n</code></pre>\n\n<p>I am using ruby 2.3.1, so why do I have <code>lib/gems/2.3.0</code>? Maybe that's the problem here?</p>\n"}, {"tags": ["ruby", "sass", "rvm", "compass-sass"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 4020207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "a-windett", "link": "https://stackoverflow.com/users/4020207/a-windett"}, "is_accepted": false, "score": 0, "last_activity_date": 1475681383, "creation_date": 1475681383, "answer_id": 39878122, "question_id": 39877695, "link": "https://stackoverflow.com/questions/39877695/cant-run-compass-after-installing-rvm/39878122#39878122", "title": "can&#39;t run compass after installing rvm", "body": "<p>have tried reinstalling sass and compass ? Sorry for the probably obvious answer</p>\n"}, {"tags": [], "owner": {"reputation": 6320, "user_id": 1814446, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wS47p.gif?s=128&g=1", "display_name": "Holly", "link": "https://stackoverflow.com/users/1814446/holly"}, "is_accepted": false, "score": 1, "last_activity_date": 1475681707, "creation_date": 1475681707, "answer_id": 39878244, "question_id": 39877695, "link": "https://stackoverflow.com/questions/39877695/cant-run-compass-after-installing-rvm/39878244#39878244", "title": "can&#39;t run compass after installing rvm", "body": "<p>In the end I just set RVM to use the system Ruby and Compass worked again, the command is:</p>\n\n<pre><code>rvm use system\n</code></pre>\n"}], "owner": {"reputation": 6320, "user_id": 1814446, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wS47p.gif?s=128&g=1", "display_name": "Holly", "link": "https://stackoverflow.com/users/1814446/holly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475681707, "creation_date": 1475680098, "question_id": 39877695, "link": "https://stackoverflow.com/questions/39877695/cant-run-compass-after-installing-rvm", "title": "can&#39;t run compass after installing rvm", "body": "<p>I installed RVM yesterday and now I can't run Compass, I get the following error.</p>\n\n<pre><code>compass watch skin/frontend/default/default/\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'compass' (&gt;= 0) among 13 total gem(s) (Gem::LoadError)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'\n    from /usr/local/bin/compass:22:in `&lt;main&gt;'\n</code></pre>\n\n<p>I guess I need to update my compass and/or sass config?  But I'm not sure how.</p>\n\n<pre><code>$ which -a gem\n/Users/holy/.rvm/rubies/ruby-2.3.0/bin/gem\n/usr/bin/gem\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "devise"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475680478, "post_id": 39877687, "comment_id": 67042289, "body": "what if you have your super_admin creation in <code>let</code> block?  <code>let(:super_admin) { FactoryGirl.create(:super_admin) } before { login_as(super_admin, scope: :super_admin) }</code>"}, {"owner": {"reputation": 85, "user_id": 1596316, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/312362d5084bc9e56d77383d2a1c5f3e?s=128&d=identicon&r=PG", "display_name": "Jarfis", "link": "https://stackoverflow.com/users/1596316/jarfis"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1475685251, "post_id": 39877687, "comment_id": 67045405, "body": "no dice, results are the same"}, {"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "edited": false, "score": 0, "creation_date": 1475687441, "post_id": 39877687, "comment_id": 67046635, "body": "Can you show the RSpec failure(s)?"}, {"owner": {"reputation": 85, "user_id": 1596316, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/312362d5084bc9e56d77383d2a1c5f3e?s=128&d=identicon&r=PG", "display_name": "Jarfis", "link": "https://stackoverflow.com/users/1596316/jarfis"}, "edited": false, "score": 0, "creation_date": 1475690869, "post_id": 39877687, "comment_id": 67048527, "body": "<code>Failure&#47;Error: expect(whatever).to eq(whatever)  expected: whatever             got: not_whatever              (compared using ==)</code>.  using binding.pry I can see the super_admin is being created, if I manually use login_as in binding.pry it shows that there is already <code>#&lt;Proc:memory address@&#47;path_to&#47;.rvm&#47;gems&#47;ruby-2.3.0&#47;gems&#47;warden-1.2.6&#47;lib&#47;&zwnj;&#8203;warden&#47;test&#47;helpers.&zwnj;&#8203;rb:18&gt;</code> and it&#39;s creating another one, other debug code I added indicates that the super_admin authentication is failing"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1516460963, "post_id": 39877687, "comment_id": 83701949, "body": "I have exactly the same issue. login_as(user) does not login the user in. I have set up the config as per documentation. Did you find any solution to this problem?"}], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 1596316, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/312362d5084bc9e56d77383d2a1c5f3e?s=128&d=identicon&r=PG", "display_name": "Jarfis", "link": "https://stackoverflow.com/users/1596316/jarfis"}, "is_accepted": true, "score": 0, "last_activity_date": 1475766071, "creation_date": 1475766071, "answer_id": 39899426, "question_id": 39877687, "link": "https://stackoverflow.com/questions/39877687/rspec-devise-login-as-does-not-work-on-the-first-test/39899426#39899426", "title": "Rspec - Devise login_as does not work on the first test", "body": "<p>So, it looks like <code>login_as</code> doesn't play well with controller specs (I'm assuming), when I switched <code>login_as super_admin, scope: :super_admin</code> with <code>sign_in super_admin</code> everything started working</p>\n"}], "owner": {"reputation": 85, "user_id": 1596316, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/312362d5084bc9e56d77383d2a1c5f3e?s=128&d=identicon&r=PG", "display_name": "Jarfis", "link": "https://stackoverflow.com/users/1596316/jarfis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 1, "accepted_answer_id": 39899426, "answer_count": 1, "score": 0, "last_activity_date": 1475766071, "creation_date": 1475680072, "last_edit_date": 1495541211, "question_id": 39877687, "link": "https://stackoverflow.com/questions/39877687/rspec-devise-login-as-does-not-work-on-the-first-test", "title": "Rspec - Devise login_as does not work on the first test", "body": "<p>I have a controller spec that needs a super admin to be logged in to work</p>\n\n<p>I followed <a href=\"https://github.com/plataformatec/devise/wiki/How-To%3a-Test-with-Capybara\" rel=\"nofollow noreferrer\">this</a> guide to and wrote the (paraphrased) following in my tests</p>\n\n<pre><code>before(:each) do\n  super_admin = FactoryGirl.create(:super_admin)\n  login_as super_admin, scope: :super_admin\nend\n\nit \"does whatever\" do\n  get :whatever\n\n  expect(whatever).to eq(whatever)\nend\n\nit \"does something else\" do\n  get :something_else\n\n  expect(something_else).to (something_else)\nend\n</code></pre>\n\n<p>My problem is that the login is only working for tests past the first, debugging revealed that it was failing authentication, if I use before(:each) to login, and is failing every test except the first when i use before(:all)</p>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/23808963/login-as-with-rspec-fails-first-test\">login_as with rspec fails first test</a> where the asker appears to be having a similar problem, but the only answer doesn't help me</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 1389, "user_id": 4133078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P24yz.jpg?s=128&g=1", "display_name": "Cody Gustafson", "link": "https://stackoverflow.com/users/4133078/cody-gustafson"}, "is_accepted": false, "score": 2, "last_activity_date": 1519221408, "last_edit_date": 1519221408, "creation_date": 1519219161, "answer_id": 48907036, "question_id": 39877678, "link": "https://stackoverflow.com/questions/39877678/filter-by-method-on-model-in-activeadmin-with-parameters-passed-in/48907036#48907036", "title": "Filter by method on model in ActiveAdmin with parameters passed in", "body": "<p>It looks like ActiveAdmin has a built in method to create a date picker within a view. Those docs can be found <a href=\"https://activeadmin.info/5-forms.html#datepicker\" rel=\"nofollow noreferrer\">here</a>. The example shows it being used with some random parameters, you will want to modify those for your use case. </p>\n\n<pre><code>form do |f|\n  f.input :from, as: :datepicker,\n    datepicker_options: {\n    min_date: \"2013-10-8\",\n    max_date: \"+3D\"\n  }\n\n  f.input :until, as: :datepicker,\n    datepicker_options: {\n    min_date: 3.days.ago.to_date,\n    max_date: \"+1W +5D\"\n   }\nend\n</code></pre>\n"}], "owner": {"reputation": 1334, "user_id": 1247016, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/13c670b504764bf69df5208d3746b8b5?s=128&d=identicon&r=PG", "display_name": "Vincent", "link": "https://stackoverflow.com/users/1247016/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 0, "answer_count": 1, "score": 11, "last_activity_date": 1519221408, "creation_date": 1475680056, "question_id": 39877678, "link": "https://stackoverflow.com/questions/39877678/filter-by-method-on-model-in-activeadmin-with-parameters-passed-in", "title": "Filter by method on model in ActiveAdmin with parameters passed in", "body": "<p>Using Rails 4.2.1 and Active Admin 1.0.0.pre2</p>\n\n<p>I have an Apartment model which has many Occupancies. I want admins to be able to see whether an apartment in index overlaps with dates passed in as params. I have a method on Apartment</p>\n\n<pre><code> def available_during(start_date, end_date)\n   return !self.occupancies.any? { |occ| occ.date_range_overlap(Date.parse(start_date), Date.parse(end_date)) }\n end\n</code></pre>\n\n<p>Which returns true if the apartment has any occupancies that overlap with two given dates. The method <code>date_range_overlap</code> on occupancy is pretty self explanatory. I can't seem to figure out how to make ActiveAdmin's DSL to filter by that method or even make a form to input random params.</p>\n\n<p>I was able to put a column that shows the boolean return value of the available_during method in the index. </p>\n\n<pre><code>if params[:from] &amp;&amp; params[:until]\n  column \"available?\" do |apt|\n    apt.available_during(params[:from], params[:until])\n  end\nend\n</code></pre>\n\n<p>But I can only seem to get this to work by manually inputting the from and until params in the url. </p>\n\n<p>How might I place an arbitrary search form to send the user to the right params? Or better yet, make a filter in that sidebar that uses that method? </p>\n"}, {"tags": ["ruby", "factory-bot"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1475679420, "post_id": 39877384, "comment_id": 67041511, "body": "Is it the case that the model <code>has_many :questions</code>?"}, {"owner": {"reputation": 997, "user_id": 1121816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5dfd82b65753dcfb923efd14ca1f29c1?s=128&d=identicon&r=PG&f=1", "display_name": "zmorris", "link": "https://stackoverflow.com/users/1121816/zmorris"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1475679511, "post_id": 39877384, "comment_id": 67041570, "body": "in this case, no, only one question inside that array... this is for an automated test, in the application there could be multiple questions"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1475679608, "post_id": 39877384, "comment_id": 67041637, "body": "You may have misunderstood my question.  The style of factory that you&#39;re using implies that this is backed by a specific ActiveRecord model.  My question then would be, is it the case that this particular model support multiple questions in it (even if the test only calls for one right now)?"}, {"owner": {"reputation": 997, "user_id": 1121816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5dfd82b65753dcfb923efd14ca1f29c1?s=128&d=identicon&r=PG&f=1", "display_name": "zmorris", "link": "https://stackoverflow.com/users/1121816/zmorris"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1475679759, "post_id": 39877384, "comment_id": 67041764, "body": "I&#39;m sorry, I am not quite following... am fairly new to Ruby &amp; FactoryGirl. I set up my factory by saying <code>FactoryGirl.define do</code> above where my example starts. The <code>Example</code> model only contains <code>attr_accessor :questions, :answer</code>"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1475679826, "post_id": 39877384, "comment_id": 67041812, "body": "Would you add your model to the question?"}, {"owner": {"reputation": 997, "user_id": 1121816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5dfd82b65753dcfb923efd14ca1f29c1?s=128&d=identicon&r=PG&f=1", "display_name": "zmorris", "link": "https://stackoverflow.com/users/1121816/zmorris"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1475681225, "post_id": 39877384, "comment_id": 67042761, "body": "I added the model."}, {"owner": {"reputation": 997, "user_id": 1121816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5dfd82b65753dcfb923efd14ca1f29c1?s=128&d=identicon&r=PG&f=1", "display_name": "zmorris", "link": "https://stackoverflow.com/users/1121816/zmorris"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1475681701, "post_id": 39877384, "comment_id": 67043078, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/125009/discussion-between-zmorris-and-makoto\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 997, "user_id": 1121816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5dfd82b65753dcfb923efd14ca1f29c1?s=128&d=identicon&r=PG&f=1", "display_name": "zmorris", "link": "https://stackoverflow.com/users/1121816/zmorris"}, "is_accepted": false, "score": 0, "last_activity_date": 1476976425, "creation_date": 1476976425, "answer_id": 40158312, "question_id": 39877384, "link": "https://stackoverflow.com/questions/39877384/how-to-set-values-in-factorygirl-for-nested-structure/40158312#40158312", "title": "How to set values in FactoryGirl for nested structure", "body": "<p>I figured this out. With FactoryGirl, when setting an attribute dynamically, you must wrap the attribute in { }. Since this is an array, with a hash inside, the curly braces need to be on the outside of the entire array.</p>\n\n<pre><code>factory :example_factory do\n  transient do\n     ans ''\n  end\n\n  user 'TEST'\n  id 'blah'\nend\n\ntrait :example_trait do\nquestions --&gt; {[\n                {\n                 question: \"blah\",\n                 answer: ans\n                },\n              ]} &lt;--\nend\n</code></pre>\n"}], "owner": {"reputation": 997, "user_id": 1121816, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5dfd82b65753dcfb923efd14ca1f29c1?s=128&d=identicon&r=PG&f=1", "display_name": "zmorris", "link": "https://stackoverflow.com/users/1121816/zmorris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476976425, "creation_date": 1475679325, "last_edit_date": 1475681180, "question_id": 39877384, "link": "https://stackoverflow.com/questions/39877384/how-to-set-values-in-factorygirl-for-nested-structure", "title": "How to set values in FactoryGirl for nested structure", "body": "<p>I'm using Factory Girl with traits, and trying to figure out how to set the 'answer' value below:</p>\n\n<pre><code>factory :example_factory do\n    user 'TEST'\n    id 'blah'\nend\n\ntrait :example_trait do\nquestions [\n              {\n                  question: \"blah\",\n                  answer: \"#{answer}\"\n              },\n          ]\nend\n</code></pre>\n\n<p>I've tried the following, but keep running into \"ArgumentError: trait not registered: answer\".</p>\n\n<pre><code>FactoryGirl.build(:example, :example_trait, answer: 'custom')\n</code></pre>\n\n<p>Also tried adding <code>transient { answer ' ' }</code> to the trait.</p>\n\n<p>Also tried adding <code>attr_accessor</code> fields to the <code>Example</code> class.</p>\n\n<pre><code>class Example\n    attr_accessor :questions, :answer\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "coordinates"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1475681440, "post_id": 39876343, "comment_id": 67042904, "body": "I added an answer with a oneliner, if you are still curious."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1475685787, "post_id": 39876343, "comment_id": 67045745, "body": "Great! Awesome :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 4, "last_activity_date": 1475777378, "last_edit_date": 1475777378, "creation_date": 1475676788, "answer_id": 39876343, "question_id": 39876158, "link": "https://stackoverflow.com/questions/39876158/sorting-a-2d-array-according-to-coordinates-and-value/39876343#39876343", "title": "Sorting a 2D array according to coordinates and value", "body": "<p>Could something like this be useful?</p>\n\n<pre><code>result = []\narray.each_with_index do |subarray, x|\n  subarray.each_with_index do |elem, y|\n    result &lt;&lt; [x, y, elem]\n  end\nend\nirb(main):043:0&gt; result\n=&gt; [[0, 0, \"2\"], [0, 1, \"3\"], [0, 2, \"5\"], [0, 3, \"5\"], [1, 0, \"8\"], [1, 1, \"7\"], [1, 2, \"5\"], [1, 3, \"0\"], [2, 0, \"1\"], [2, 1, \"3\"], [2, 2, \"7\"], [2, 3, \"8\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1475681413, "creation_date": 1475681413, "answer_id": 39878135, "question_id": 39876158, "link": "https://stackoverflow.com/questions/39876158/sorting-a-2d-array-according-to-coordinates-and-value/39878135#39878135", "title": "Sorting a 2D array according to coordinates and value", "body": "<p>Oneliner, though:</p>\n\n<pre><code>array.map(&amp;:each_with_index)\n     .flat_map.with_index { |e, i| e.map { |e, j| [i, j, e] }  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1475767925, "last_edit_date": 1475767925, "creation_date": 1475700846, "answer_id": 39883474, "question_id": 39876158, "link": "https://stackoverflow.com/questions/39876158/sorting-a-2d-array-according-to-coordinates-and-value/39883474#39883474", "title": "Sorting a 2D array according to coordinates and value", "body": "<p>Here are a couple of compact ways of doing that. I assume that, as in the example, the arrays that are the elements of <code>array</code> are all the same size.</p>\n\n<p><strong>Convert to a matrix to use <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/matrix/rdoc/Matrix.html\" rel=\"nofollow\">Matrix</a> methods</strong></p>\n\n<pre><code>require 'matrix'\n\nMatrix[*array].each_with_index.map { |n,i,j| [i,j,n] }\n  #=&gt; [[0, 0, \"2\"], [0, 1, \"3\"], [0, 2, \"5\"], [0, 3, \"5\"],\n  #    [1, 0, \"8\"], [1, 1, \"7\"], [1, 2, \"5\"], [1, 3, \"0\"],\n  #    [2, 0, \"1\"], [2, 1, \"3\"], [2, 2, \"7\"], [2, 3, \"8\"]]\n</code></pre>\n\n<p>If the order of the offsets is not important, one can simplify to the following.</p>\n\n<pre><code>Matrix[*array].each_with_index.to_a\n  #=&gt; [[\"2\", 0, 0], [\"3\", 0, 1], [\"5\", 0, 2], [\"5\", 0, 3],\n  #    [\"8\", 1, 0], [\"7\", 1, 1], [\"5\", 1, 2], [\"0\", 1, 3],\n  #    [\"1\", 2, 0], [\"3\", 2, 1], [\"7\", 2, 2], [\"8\", 2, 3]] \n</code></pre>\n\n<p><strong>Flatten and map using <a href=\"http://ruby-doc.org//core-2.3.0/Fixnum.html#method-i-divmod\" rel=\"nofollow\">Fixnum#divmod</a></strong> </p>\n\n<pre><code>ncols = array.first.size\narray.flatten.map.with_index { |n,i| [*i.divmod(ncols), n] }\n  #=&gt; [[0, 0, \"2\"], [0, 1, \"3\"], [0, 2, \"5\"], [0, 3, \"5\"],\n  #    [1, 0, \"8\"], [1, 1, \"7\"], [1, 2, \"5\"], [1, 3, \"0\"],\n  #    [2, 0, \"1\"], [2, 1, \"3\"], [2, 2, \"7\"], [2, 3, \"8\"]]\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 6841985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9a030937ed8f1eadefe5c2fd96f951?s=128&d=identicon&r=PG&f=1", "display_name": "A.Lapanen", "link": "https://stackoverflow.com/users/6841985/a-lapanen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1475777378, "creation_date": 1475676322, "question_id": 39876158, "link": "https://stackoverflow.com/questions/39876158/sorting-a-2d-array-according-to-coordinates-and-value", "title": "Sorting a 2D array according to coordinates and value", "body": "<p>I have an array that resembles this:</p>\n\n<pre><code>array = [[\"2\",\"3\",\"5\",\"5\"],[\"8\",\"7\",\"5\",\"0\"],[\"1\",\"3\",\"7\",\"8\"]]\n</code></pre>\n\n<p>The indices and subindices should resemble coordinates in an (y,x) format, i.e. the very first value \"2\" has the coordinates (0,0), and respectively the first \"8\" should have the coordinates (1,0). I am trying to input this into a new array that would have the coordinates followed by the value, i.e. first input to the new array would be 0,0,\"2\". How should I go about this? Many thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "exceptionhandler"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475675719, "post_id": 39875665, "comment_id": 67038463, "body": "Did you have a look into your log file what the error is? Maybe it&#39;s an error this gem can&#39;t handle."}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1475675792, "post_id": 39875665, "comment_id": 67038523, "body": "you do have <code>config.consider_all_requests_local = true</code> in your <code>config&#47;development.rb</code>, right? PS: I&#39;m assuming you&#39;re testing this on dev env."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1475675888, "post_id": 39875665, "comment_id": 67038604, "body": "@AlexandreAngelim yes."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475675963, "post_id": 39875665, "comment_id": 67038671, "body": "@slowjack2k looks like it&#39;s attempting to use my default layout <code>application.html.erb</code>, instead of <code>exception.html.erb</code>: <code>Completed 500 Internal Server Error in 299ms Error during failsafe response: undefined method </code>each&#39; for nil:NilClass   /Users/godzilla74/Coding/neo-api/app/views/layouts/_navigati&zwnj;&#8203;on.html.erb:38:in <code>_app_views_layouts__navigation_html_erb__2393319544277720129&zwnj;&#8203;_70250216188520&#39;</code>"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475676252, "post_id": 39875665, "comment_id": 67038917, "body": "So is the orignal error maybe not 500 . You did define the layout only for 500."}, {"owner": {"reputation": 3685, "user_id": 868273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5f15d325ebd0a236f9a4a2a5d2501c96?s=128&d=identicon&r=PG", "display_name": "okliv", "link": "https://stackoverflow.com/users/868273/okliv"}, "edited": false, "score": 2, "creation_date": 1489421357, "post_id": 39875665, "comment_id": 72652058, "body": "you should change <code>&#39;500&#39; =&gt; &#39;exception&#39;</code> to <code>500 =&gt; &#39;exception&#39;</code> (the key 500 - is Integer not String)"}], "answers": [{"tags": [], "owner": {"reputation": 723, "user_id": 2609509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IstCH.jpg?s=128&g=1", "display_name": "Marcelo Austria", "link": "https://stackoverflow.com/users/2609509/marcelo-austria"}, "is_accepted": false, "score": 0, "last_activity_date": 1548837308, "creation_date": 1548837308, "answer_id": 54436306, "question_id": 39875665, "link": "https://stackoverflow.com/questions/39875665/rails-exception-handler-gem/54436306#54436306", "title": "Rails exception_handler gem", "body": "<p>In version exception_handler 0.8.0.0 the config/application.rb </p>\n\n<pre><code>config.exception_handler = {\ndev: nil, # allows you to turn ExceptionHandler \"on\" in development\ndb:nil, # allocates a \"table name\" into which exceptions are saved (defaults to nil)\nemail: \"\", # sends exception emails to a listed email (string // \"you@email.com\")\n\n  # Custom Exceptions\n  custom_exceptions: {\n    #'ActionController::RoutingError' =&gt; :not_found # =&gt; example\n  },\n\n  # On default 5xx error page, social media links included\n  social: {        \n    facebook: nil, # Facebook page name   \n    twitter:  nil, # Twitter handle  \n    youtube:  nil, # Youtube channel name / ID\n    linkedin: nil, # LinkedIn name\n    fusion:   nil  # FL Fusion handle\n  },  \n\n  # This is an entirely NEW structure for the \"layouts\" area\n  # You're able to define layouts, notifications etc \u21b4\n\n  # All keys interpolated as strings, so you can use symbols, strings or integers where necessary\n  exceptions: {\n\n    :all =&gt; {\n      layout: \"exception\", # define layout\n      notification: true # (false by default)\n  # action: ____, (this is general)\n  # background: (can define custom background for exceptions layout if required)\n    },\n    404 =&gt; {\n      layout: \"exception\", # define layout\n      notification: true # (false by default)\n  # action: ____, (this is general)\n  # background: (can define custom background for exceptions layout if required)\n    },    \n    500 =&gt; {\n      layout: \"exception\", # define layout\n      notification: true # (false by default)\n  # action: ____, (this is general)\n  # background: (can define custom background for exceptions layout if required)\n    }\n\n    # This is the old structure\n    # Still works but will be deprecated in future versions\n\n    # 501 =&gt; \"exception\",\n    # 502 =&gt; \"exception\",\n    # 503 =&gt; \"exception\",\n    # 504 =&gt; \"exception\",\n    # 505 =&gt; \"exception\",\n    # 507 =&gt; \"exception\",\n    # 510 =&gt; \"exception\"\n\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1232, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1590828705, "creation_date": 1475675011, "last_edit_date": 1592644375, "question_id": 39875665, "link": "https://stackoverflow.com/questions/39875665/rails-exception-handler-gem", "title": "Rails exception_handler gem", "body": "<p>I've installed Rails <a href=\"https://github.com/richpeck/exception_handler\" rel=\"nofollow noreferrer\">exception_handler</a> and tried following the instructions to setup custom error handling, however I'm still getting the standard 500 error message that the gem creates:</p>\n<blockquote>\n<p>500 Internal Server Error</p>\n<p>If you are the administrator of this\nwebsite, then please read this web application's log file and/or the\nweb server's log file to find out what went wrong.</p>\n</blockquote>\n<p>Here's what I added to <code>config/application.rb</code>:</p>\n<pre><code>class Application &lt; Rails::Application\n  config.exception_handler = {\n      dev: true,\n      layouts: {\n        '500' =&gt; 'exception'\n      }\n  }\nend\n</code></pre>\n<p>I created an exception layout at <code>layouts/exception.html.erb</code>:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;&lt;%= &quot;Error - #{@exception.status} Error&quot; %&gt;&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n\n    &lt;div class=&quot;container&quot;&gt;\n      &lt;%= yield %&gt;\n    &lt;/div&gt;\n\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>And generated the default exception views with: <code>rails generate exception_handler:views</code></p>\n<pre><code>&lt;div class=&quot;error&quot;&gt;\n    &lt;% if /^(5[0-9]{2})$/ =~ @exception.status.to_s %&gt;\n\n        &lt;!--Message --&gt;\n        &lt;%= content_tag :div, class: &quot;message&quot; do %&gt;\n            &lt;%= content_tag :div, class: &quot;title&quot; do %&gt;\n                &lt;span&gt;&lt;%= &quot;#{@exception.status} Error - #{details[:name]}&quot; %&gt;&lt;/span&gt;\n                &lt;%= link_to image_tag(&quot;exception_handler/close.png&quot;), main_app.root_url, title: &quot;Close (Go back home)&quot;, class: &quot;close&quot; %&gt;\n            &lt;% end %&gt;\n\n            &lt;%= content_tag :div, class: &quot;details&quot; do %&gt;\n                &lt;%= image_tag &quot;exception_handler/alert.png&quot;, title: &quot;#{@exception.status} Error&quot; %&gt;\n                &lt;div class=&quot;status&quot;&gt;&lt;%= @exception.status %&gt; Error&lt;/div&gt;\n            &lt;% end %&gt;\n\n            &lt;%= content_tag :div, class: &quot;info&quot; do %&gt;\n                &lt;span&gt;&lt;%= details[:description] %&gt;&lt;/span&gt;\n                &lt;div class=&quot;notification&quot;&gt;\n                    &lt;%= link_to image_tag(&quot;exception_handler/home.png&quot;, title: &quot;Go Back Home&quot;), main_app.root_url, class: &quot;home&quot; %&gt;\n                    &lt;div class=&quot;version&quot;&gt;v&lt;%= Rails.version %&gt;&lt;/div&gt;\n                    &lt;strong&gt;Our developers have been notified - we're working on it!&lt;/strong&gt;\n                &lt;/div&gt;\n            &lt;% end %&gt;\n            \n        &lt;% end %&gt;\n\n    &lt;% else %&gt;\n\n        &lt;%= content_tag :div, details[:description], class: &quot;message&quot; %&gt;\n            \n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n<p>I've tried restarting my rails server just to make sure the changes are taking effect, but it still doesn't work.  What have I missed?</p>\n"}, {"tags": ["ruby", "require", "rdoc"], "comments": [{"owner": {"reputation": 1178, "user_id": 2772562, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1544504978/picture?type=large", "display_name": "Goko Gorgiovski", "link": "https://stackoverflow.com/users/2772562/goko-gorgiovski"}, "edited": false, "score": 0, "creation_date": 1475677527, "post_id": 39875498, "comment_id": 67039908, "body": "Try to delete your Gemfile.lock file and run bundle"}, {"owner": {"reputation": 43, "user_id": 6615871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c959c71ebe3a87795232a3594921984?s=128&d=identicon&r=PG&f=1", "display_name": "Sophie", "link": "https://stackoverflow.com/users/6615871/sophie"}, "reply_to_user": {"reputation": 1178, "user_id": 2772562, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1544504978/picture?type=large", "display_name": "Goko Gorgiovski", "link": "https://stackoverflow.com/users/2772562/goko-gorgiovski"}, "edited": false, "score": 0, "creation_date": 1475680202, "post_id": 39875498, "comment_id": 67042110, "body": "Thanks @GokoGorgiovski , just tried this and am still getting an error. The only difference is it is now reporting                           kernel_require.rb:126:in `require&#39;: cannot load such file -- rdoc/usage (LoadError)"}], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 2, "last_activity_date": 1475682574, "creation_date": 1475682574, "answer_id": 39878545, "question_id": 39875498, "link": "https://stackoverflow.com/questions/39875498/require-cannot-load-such-file-rdoc-usage-loaderror/39878545#39878545", "title": "`require&#39;: cannot load such file -- rdoc/usage (LoadError)", "body": "<p>The old <code>rdoc/usage</code> module was removed from rdoc quite some time ago, namely in Ruby 1.9.1 (when rdoc was still part of the Ruby core language). See <a href=\"https://bugs.ruby-lang.org/issues/2713\" rel=\"nofollow\">https://bugs.ruby-lang.org/issues/2713</a> for a discussion or the <a href=\"https://svn.ruby-lang.org/cgi-bin/viewvc.cgi?revision=14994&amp;view=revision\" rel=\"nofollow\">SVN commit</a>.</p>\n\n<p>Thus, with recent Rubies, there is no way to use this module anymore. You should update your code to use alternatives to generate documentation.</p>\n"}], "owner": {"reputation": 43, "user_id": 6615871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c959c71ebe3a87795232a3594921984?s=128&d=identicon&r=PG&f=1", "display_name": "Sophie", "link": "https://stackoverflow.com/users/6615871/sophie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1451, "favorite_count": 0, "accepted_answer_id": 39878545, "answer_count": 1, "score": 4, "last_activity_date": 1475682574, "creation_date": 1475674534, "question_id": 39875498, "link": "https://stackoverflow.com/questions/39875498/require-cannot-load-such-file-rdoc-usage-loaderror", "title": "`require&#39;: cannot load such file -- rdoc/usage (LoadError)", "body": "<p>I'm getting this error when running my script:</p>\n\n<pre><code>`require': cannot load such file -- rdoc/usage (LoadError)\n</code></pre>\n\n<p>from</p>\n\n<pre><code>/Users/S/.rvm/rubies/ruby-2.2.2/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- rdoc/usage (LoadError)\nfrom /Users/S/.rvm/rubies/ruby-2.2.2/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom pdf.rb:34:in `&lt;main&gt;'\n</code></pre>\n\n<p>I have rdoc in my Gemfile</p>\n\n<pre><code>gem 'rdoc', '~&gt; 4.2.2'\n</code></pre>\n\n<p>and I have also tried without specifying version. In my script I've required gems and rdoc/usage:</p>\n\n<pre><code>require 'rubygems'\nrequire 'rdoc/usage'\n</code></pre>\n\n<p>I have run gem install rdoc</p>\n\n<pre><code>Depending on your version of ruby, you may need to install ruby rdoc/ri data:\n\n&lt;= 1.8.6 : unsupported\n = 1.8.7 : gem install rdoc-data; rdoc-data --install\n = 1.9.1 : gem install rdoc-data; rdoc-data --install\n&gt;= 1.9.2 : nothing to do! Yay!\nSuccessfully installed rdoc-4.2.2\n</code></pre>\n\n<p>and as I'm running ruby 2.2.2 should not need to install ruby roc/ri data. (I tried at a loss and as expected no effect). </p>\n\n<p>Any help would be greatly appreciated, thanks. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": true, "score": 0, "last_activity_date": 1475675012, "creation_date": 1475675012, "answer_id": 39875664, "question_id": 39875301, "link": "https://stackoverflow.com/questions/39875301/non-specific-mvc-framework-ruby-gems-and-example-code-to-rails-framework/39875664#39875664", "title": "Non specific MVC framework ruby gems and example code to Rails framework", "body": "<p><code>require 'block_io'</code> can go into <code>Gemfile</code> like <code>gem 'block_io'</code>. Rails/bundler will require it automaticaly for you as long as the gem name is also the file name you want to require from this gem. </p>\n\n<p><code>BlockIo.set_options :api_key=&gt; 'API KEY', :pin =&gt; 'SECRET PIN', :version =&gt; 2</code> can be put into an initilizer like <code>config/initializers/block_io.rb</code>. This way <code>set_options</code> is called only once when Rails starts a server or console or runner.</p>\n\n<p>Put it like this into the file <code>config/initializers/block_io.rb</code></p>\n\n<p><code>BlockIo.set_options :api_key=&gt; ENV['BLOCK_IO_API_KEY'], :pin =&gt; ENV['BLOCK_IO_PIN'], :version =&gt; 2</code> </p>\n\n<p>With the environment variables in use you don't commit any secret into your repo.</p>\n\n<p>Now you should be able to call <code>BlockIo.get_my_address</code> within any action.</p>\n"}], "owner": {"reputation": 87, "user_id": 6822555, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/802243dada912aa76272576de57e9e51?s=128&d=identicon&r=PG&f=1", "display_name": "Morez SA", "link": "https://stackoverflow.com/users/6822555/morez-sa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 39875664, "answer_count": 1, "score": 0, "last_activity_date": 1475675012, "creation_date": 1475674091, "question_id": 39875301, "link": "https://stackoverflow.com/questions/39875301/non-specific-mvc-framework-ruby-gems-and-example-code-to-rails-framework", "title": "Non specific MVC framework ruby gems and example code to Rails framework", "body": "<p>I have been learning Ruby on Rails, but I still have issues when it comes to Ruby gems with examples that are irb based and not Rails or Sinatra framework based. I am trying to implement the Block.io Bitcoin API functionality. But the code I find is Ruby only, so I am not sure where to create a config file for the API Key and also whether I need to create a controller to make this work in the views for Rails.</p>\n\n<p>The gem and examples are on: <a href=\"https://github.com/BlockIo/gem-block-io\" rel=\"nofollow\">https://github.com/BlockIo/gem-block-io</a></p>\n\n<p>I installed this gem via bundle install on Rails</p>\n\n<pre><code>gem install block_io -v=1.0.6\n</code></pre>\n\n<p>The Ruby example show the following:</p>\n\n<pre><code>&gt;&gt; require 'block_io'\n&gt;&gt; BlockIo.set_options :api_key=&gt; 'API KEY', :pin =&gt; 'SECRET PIN', :version =&gt; 2\n</code></pre>\n\n<p>In Rails which config file would I enter the above api_key and pin?</p>\n\n<p>In the example they show the code to get your address as follows:</p>\n\n<pre><code>BlockIo.get_my_address\n</code></pre>\n\n<p>Do I need to create a function in a controller such as:</p>\n\n<pre><code>def address\n @my_address = BlockIo.get_my_addresses\nend\n</code></pre>\n\n<p>and in the view use:</p>\n\n<pre><code>&lt;%= @my_address %&gt;\n</code></pre>\n\n<p>I need some guidance with regards to the above, any comment or assistance will be greatly appreciated.</p>\n"}, {"tags": ["ruby", "geo"], "comments": [{"owner": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "edited": false, "score": 0, "creation_date": 1475673929, "post_id": 39875154, "comment_id": 67037014, "body": "How have you calculated the value of long?"}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "reply_to_user": {"reputation": 1983, "user_id": 2830652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/99L9k.png?s=128&g=1", "display_name": "sokkyoku", "link": "https://stackoverflow.com/users/2830652/sokkyoku"}, "edited": false, "score": 0, "creation_date": 1475674060, "post_id": 39875154, "comment_id": 67037110, "body": "It comes from the database"}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1475674542, "post_id": 39875154, "comment_id": 67037497, "body": "Which version of Ruby you are using?"}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1475674744, "post_id": 39875154, "comment_id": 67037667, "body": "I am using Ruby 2.3.0"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 3, "creation_date": 1475675670, "post_id": 39875154, "comment_id": 67038420, "body": "This is an artefact of the way floating point math works about everywhere. The exact same effect can be shown in e.g. Python and Javascript. Smaller numbers can be represented with higher precision than larger numbers."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1475683371, "post_id": 39875154, "comment_id": 67044160, "body": "Note that the discrepancy is at the scale of <a href=\"https://en.wikipedia.org/wiki/Micrometre\" rel=\"nofollow noreferrer\">microns</a> (assuming these are terrestrial coordinates)"}], "answers": [{"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 3, "creation_date": 1475674371, "post_id": 39875406, "comment_id": 67037362, "body": "This is not a &quot;more precise&quot; result, this is a <i>less</i> precise result. It would be more precise if it added <code>0000</code> onto the end, adding <code>6857</code> just makes the result <i>wrong</i> by a small margin."}, {"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1475674755, "post_id": 39875406, "comment_id": 67037674, "body": "converting <code>long.floor</code> Fixnum value seems irrelevant to me, since the <code>long</code> itself is floating point already. I find no suprise in float%fixnum resulting in a float. I suppose we simply see float&#39;s imprecions. See i.e. <code>0.0126760222489 % 1.0</code> and <code>1.0126760222489 % 1.0</code>"}], "tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": false, "score": 3, "last_activity_date": 1475709340, "last_edit_date": 1475709340, "creation_date": 1475674324, "answer_id": 39875406, "question_id": 39875154, "link": "https://stackoverflow.com/questions/39875154/why-is-ruby-adding-precision-digits-when-calculating-a-mod/39875406#39875406", "title": "Why is Ruby adding precision/digits when calculating a mod?", "body": "<p>It seems that it has nothing to do with Ruby itself, but:</p>\n\n<blockquote>\n  <p>floating point numbers that in general suffer from this type of rounding error, because they\u2019re limited to x number of bytes, and, in general, cannot store decimal number perfectly.</p>\n</blockquote>\n\n<p><a href=\"https://github.com/rdp/ruby_tutorials_core/wiki/ruby-talk-faq#floats_imprecise\" rel=\"nofollow\"><strong>Documentation</strong></a></p>\n\n<p>From the docs above one can also get a couple of options for getting around the native float behaviour. Documentation above can be considered as an official one as it is provided by <a href=\"http://ruby-doc.org/core-2.1.2/Float.html\" rel=\"nofollow\">ruby-doc.org</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1475676183, "post_id": 39875942, "comment_id": 67038863, "body": "Great, thanks for answering despite the fact that it&#39;s been asked ( and answered) before"}], "tags": [], "owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "is_accepted": true, "score": 2, "last_activity_date": 1475675700, "creation_date": 1475675700, "answer_id": 39875942, "question_id": 39875154, "link": "https://stackoverflow.com/questions/39875154/why-is-ruby-adding-precision-digits-when-calculating-a-mod/39875942#39875942", "title": "Why is Ruby adding precision/digits when calculating a mod?", "body": "<p>I suppose we simply see float's imprecions. See i.e. <code>0.0126760222489 % 1.0</code> and <code>1.0126760222489 % 1.0</code>. You'd think the result should be the same, but no - IEEE754 floats/doubles don't guarantee perfect results, and by default these are used in Ruby for storing floating point values.</p>\n\n<p>It's even somewhat shown <a href=\"https://ruby-doc.org/core-2.3.1/Float.html#method-i-modulo\" rel=\"nofollow\">in the docs</a></p>\n\n<pre><code>6543.21.modulo(137)      #=&gt; 104.21\n6543.21.modulo(137.24)   #=&gt; 92.9299999999996\n</code></pre>\n\n<p>you can see that the second result has a small error. Actually, on Ruby 2.3.1 I ran the first line and got:</p>\n\n<pre><code>pry(main)&gt; 6543.21.modulo(137)\n=&gt; 104.21000000000004\n</code></pre>\n\n<p>It's not necessarily related to modulo, and not always visible:</p>\n\n<pre><code>[30] pry(main)&gt; 10.0126760222489 - 0.0\n=&gt; 10.0126760222489\n[31] pry(main)&gt; 10.0126760222489 - 1.0\n=&gt; 9.0126760222489\n[32] pry(main)&gt; 10.0126760222489 - 2.0\n=&gt; 8.0126760222489\n[33] pry(main)&gt; 10.0126760222489 - 3.0\n=&gt; 7.0126760222489\n[34] pry(main)&gt; 10.0126760222489 - 4.0\n=&gt; 6.0126760222489\n[35] pry(main)&gt; 10.0126760222489 - 5.0\n=&gt; 5.0126760222489\n[36] pry(main)&gt; 10.0126760222489 - 6.0\n=&gt; 4.0126760222489\n[37] pry(main)&gt; 10.0126760222489 - 7.0\n=&gt; 3.0126760222489004\n</code></pre>\n\n<p>Every piece of software that uses standard floats needs to account for these small errors. If you cannot handle that for some reason, then you could use <code>bigdecimal</code> (should be already included in your Ruby), fixed-point, or some similar numeric library</p>\n\n<pre><code>require 'bigdecimal'\n\nBigDecimal('6543.21').modulo(137).to_s\n=&gt; \"0.10421E3\"\n\nBigDecimal('6543.21').modulo(137).to_f\n=&gt; 104.21\n</code></pre>\n\n<p>Keep in mind that 'bigdecimal' may be slower and may use more memory.</p>\n"}], "owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "closed_date": 1475679866, "accepted_answer_id": 39875942, "answer_count": 2, "score": 4, "last_activity_date": 1475709340, "creation_date": 1475673680, "last_edit_date": 1475674264, "question_id": 39875154, "link": "https://stackoverflow.com/questions/39875154/why-is-ruby-adding-precision-digits-when-calculating-a-mod", "closed_reason": "Duplicate", "title": "Why is Ruby adding precision/digits when calculating a mod?", "body": "<p>I need to make some calculations with coordinates and came across\nthis (at least for me) weird behaviour. \nCan someone explain why this happens?</p>\n\n<pre><code>$ long\n=&gt; 49.0126760222489\n$ long % long.floor\n=&gt; 0.012676022248896857\n</code></pre>\n\n<p>I was expecting the last line to evaluate to just the digits after the period, from <code>long</code>, but instead there is an additional <code>6857</code> tacked onto the end.</p>\n\n<p>Why is it adding digits? </p>\n\n<p>Where is the information coming from? </p>\n"}, {"tags": ["ruby", "sass", "drupal-7", "gulp", "zen"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475675340, "post_id": 39874921, "comment_id": 67038162, "body": "This issue is within your ruby code. I think you should post more of the stacktrace and a little bit of your ruby code where this exception occours."}, {"owner": {"reputation": 327, "user_id": 4959692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ir1W2.jpg?s=128&g=1", "display_name": "nizz0k", "link": "https://stackoverflow.com/users/4959692/nizz0k"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475675823, "post_id": 39874921, "comment_id": 67038548, "body": "so, the trace super long, to the point where I can&#39;t grab it all from the terminal."}, {"owner": {"reputation": 2475, "user_id": 1298944, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/717c09c121dd66d83aa8b729f4b92973?s=128&d=identicon&r=PG", "display_name": "Scott Bartell", "link": "https://stackoverflow.com/users/1298944/scott-bartell"}, "edited": false, "score": 0, "creation_date": 1476250140, "post_id": 39874921, "comment_id": 67260417, "body": "What does your Gemfile/Gemspec look like?"}, {"owner": {"reputation": 327, "user_id": 4959692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ir1W2.jpg?s=128&g=1", "display_name": "nizz0k", "link": "https://stackoverflow.com/users/4959692/nizz0k"}, "edited": false, "score": 0, "creation_date": 1476303084, "post_id": 39874921, "comment_id": 67293004, "body": "Hi Scott, there&#39;s the gem file, what do you mean by gem spec"}, {"owner": {"reputation": 961, "user_id": 1970395, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/532e88dd0ea3dcf306461b36084fc8a0?s=128&d=identicon&r=PG", "display_name": "pzaj", "link": "https://stackoverflow.com/users/1970395/pzaj"}, "edited": false, "score": 0, "creation_date": 1483021189, "post_id": 39874921, "comment_id": 69964887, "body": "Yeah, I&#39;m having exactly same error. I&#39;m using gulp-compass to compile sass stylesheets built with the use of zen-grids. Did you perhaps solved the issue yourself?"}, {"owner": {"reputation": 327, "user_id": 4959692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ir1W2.jpg?s=128&g=1", "display_name": "nizz0k", "link": "https://stackoverflow.com/users/4959692/nizz0k"}, "edited": false, "score": 0, "creation_date": 1483364587, "post_id": 39874921, "comment_id": 70061346, "body": "Hi, not exactly for myself, but from my research, I think you should be able to get by with libsass and using the node-compass-mixins extension. That should get you compass and sass working without ruby."}], "owner": {"reputation": 327, "user_id": 4959692, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ir1W2.jpg?s=128&g=1", "display_name": "nizz0k", "link": "https://stackoverflow.com/users/4959692/nizz0k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1476302843, "creation_date": 1475673065, "last_edit_date": 1476302843, "question_id": 39874921, "link": "https://stackoverflow.com/questions/39874921/nameerror-uninitialized-constant-innatemiddlewarecompiler-using-compass-sass", "title": "NameError: uninitialized constant Innate::MiddlewareCompiler, using Compass/Sass", "body": "<p>I'm trying to use sass to do some css updates on a site with a zen theme. I've installed all the latest gem on an ubuntu dev machine. I get the following error with the <code>compass watch</code> command:</p>\n\n<pre><code>NameError on line [\"7\"] of /var/lib/gems/2.3.0/gems/ramaze-2012.04.14/lib/ramaze/middleware_compiler.rb: uninitialized constant Innate::MiddlewareCompiler\nDid you mean?  Innate::MIDDLEWARE\n</code></pre>\n\n<p>I'm not sure how to resolve this, or really what's causing it, and how do I get it to choose the right option. From my research, I have found that this seems to be a common issue withthe RAMAZE gem. They have some upgrading instructions, but none of them make any sense to me as I'm not sure where or how to specify the innate version, or how to make it pick the correct function. <a href=\"http://ramaze.net/documentation/file.upgrading.html\" rel=\"nofollow\">http://ramaze.net/documentation/file.upgrading.html</a>. </p>\n\n<p>Here's the trace from the compass watch command:</p>\n\n<pre><code>/var/lib/gems/2.3.0/gems/ramaze-2012.04.14/lib/ramaze/middleware_compiler.rb:1:in `&lt;top (required)&gt;'\n  /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n  /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n  /var/lib/gems/2.3.0/gems/ramaze-2012.04.14/lib/ramaze.rb:40:in `&lt;module:Ramaze&gt;'\n  /var/lib/gems/2.3.0/gems/ramaze-2012.04.14/lib/ramaze.rb:12:in `&lt;top (required)&gt;'\n  /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n  /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n  /var/lib/gems/2.3.0/gems/zen-0.4.3/lib/zen.rb:2:in `&lt;top (required)&gt;'\n  /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:127:in `require'\n  /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:127:in `rescue in require'\n  /usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:40:in `require'\n  /var/lib/gems/2.3.0/gems/compass-core-1.0.3/lib/compass/configuration/data.rb:179:in `require'\n  /var/www/html/phisigmarho.org/sites/all/themes/psrmodern/config.rb:30:in `get_binding'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/configuration/serialization.rb:24:in `eval'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/configuration/serialization.rb:24:in `parse_string'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/configuration/serialization.rb:15:in `block in _parse'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/configuration/serialization.rb:14:in `open'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/configuration/serialization.rb:14:in `_parse'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/configuration/file_data.rb:7:in `block in new_from_file'\n  /var/lib/gems/2.3.0/gems/compass-core-1.0.3/lib/compass/configuration/inheritance.rb:207:in `with_defaults'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/configuration/file_data.rb:6:in `new_from_file'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/configuration/helpers.rb:19:in `configuration_for'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/configuration/helpers.rb:69:in `add_project_configuration'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/commands/project_base.rb:37:in `add_project_configuration'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/commands/project_base.rb:25:in `configure!'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/commands/project_base.rb:15:in `initialize'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/commands/update_project.rb:41:in `initialize'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/exec/sub_command_ui.rb:42:in `new'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/exec/sub_command_ui.rb:42:in `perform!'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/lib/compass/exec/sub_command_ui.rb:15:in `run!'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/bin/compass:30:in `block in &lt;top (required)&gt;'\n  /var/lib/gems/2.3.0/gems/compass-1.0.3/bin/compass:44:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>Here's my gemlist, basically whatever gets sucked in from <code>gem install compass</code></p>\n\n<pre><code>bcrypt (3.1.11)\nbcrypt-ruby (3.1.5, 3.0.1)\nbigdecimal (1.2.8)\nbundler (1.13.2)\nchunky_png (1.3.7)\ncompass (1.0.3)\ncompass-core (1.0.3)\ncompass-import-once (1.0.5)\ndid_you_mean (1.0.2, 1.0.0)\ndiff-lcs (1.2.5, 1.1.3)\nffi (1.9.14)\ninnate (2015.10.28)\nio-console (0.4.6, 0.4.5)\njson (2.0.2, 1.8.3)\nloofah (2.0.3, 1.2.1)\nmini_portile2 (2.1.0)\nminitest (5.9.1, 5.8.4)\nmulti_json (1.12.1)\nnet-telnet (0.1.1)\nnokogiri (1.6.8.1)\npower_assert (0.3.1, 0.2.7)\npsych (2.1.1, 2.0.17)\nrack (2.0.1, 1.6.4)\nrake (11.3.0, 10.5.0, 0.9.2.2)\nramaze (2012.12.08, 2012.04.14)\nramaze-asset (0.2.3)\nrb-fsevent (0.9.7)\nrb-inotify (0.9.7)\nrdoc (4.2.2, 4.2.1)\nsass (3.4.22)\nsass-globbing (1.1.5)\nsequel (4.39.0, 3.35.0)\nshebang (0.1)\ntest-unit (3.2.1, 3.1.7)\nzen (0.4.3)\nzen-grids (2.0.3)\n</code></pre>\n\n<p>I'm beginning to suspect that maybe rolling back to an earlier version of compass, but I don't that that will resolve whatever dependency conflict this is triggering.</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1475680996, "post_id": 39874886, "comment_id": 67042623, "body": "can you provide a small sample of the csv file you are working with? So I can try to reproduce your code and see what&#39;s happening"}, {"owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1475681998, "post_id": 39874886, "comment_id": 67043254, "body": "Sure, I&#39;ve edited my post :)"}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1475683739, "post_id": 39878608, "comment_id": 67044398, "body": "Thank you very very much, your modifications are getting me closer to full understanding of a problem. There&#39;s one more thing, I wanted to run program like this: ruby csv_call_parser.rb calls.csv, so I can get my results like this: CSVCallParser.new(ARGV[0]).run or CSVCallParser.new(File.read(ARGV[0]).run, but none of this work"}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "reply_to_user": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1475684831, "post_id": 39878608, "comment_id": 67045126, "body": "See my update. What I did seems to be similar to what you have in your comment, but I was able to print out the hash array to the terminal."}, {"owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1475685974, "post_id": 39878608, "comment_id": 67045842, "body": "Thank you very much, you have no idea how you helped me! So the main problem was using name and title? Using them as name_title[0] and [1] made all the difference?"}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": true, "score": 2, "last_activity_date": 1475685663, "last_edit_date": 1475685663, "creation_date": 1475682747, "answer_id": 39878608, "question_id": 39874886, "link": "https://stackoverflow.com/questions/39874886/ruby-reading-from-csv-and-creating-objects-out-of-it/39878608#39878608", "title": "Ruby - reading from .csv and creating objects out of it", "body": "<p>I noticed a few things that isn't going as expected. In the <code>parse_call</code> method,</p>\n\n<pre><code>def parse_call(raw_call) \n  NAMES.each_with_object({}) do |name, title, memo|\n    memo[name] = raw_call[title.to_s]\n  end\nend\n</code></pre>\n\n<p>I tried to print <code>name</code>, <code>title</code>, and <code>memo</code>. I expected to get <code>:a</code>, <code>:date</code>, and <code>{}</code>, but what I actually got was <code>[:a,:date]</code>,<code>{}</code>, and <code>nil</code>. </p>\n\n<p>Also, <code>raw_call</code> headers are <code>:a,:b,:c...</code>, not <code>:date, :service...</code>, so you should be using <code>raw_call[name]</code>, and converting that to string will not help, since the key is a symbol in the <code>raw_call</code>.</p>\n\n<p>So I modified the function to </p>\n\n<pre><code>def parse_call(raw_call) \n  NAMES.each_with_object({}) do |name_title, memo|\n    memo[name_title[1]] = raw_call[name_title[0]]\n  end\nend\n</code></pre>\n\n<p><code>name_title[1]</code> returns the title (<code>:date</code>, <code>:service</code>, etc)</p>\n\n<p><code>name_title[0]</code> returns the name (<code>:a</code>, <code>:b</code>, etc)</p>\n\n<p>Also, in this method</p>\n\n<pre><code>def run\n  parse do |raw_call| \n    parse_call(raw_call)\n  end\nend\n</code></pre>\n\n<p>You are not returning any results you get, so you are getting <code>nil</code>, </p>\n\n<p>So, I changed it to </p>\n\n<pre><code>  def run\n    res = []\n    parse do |raw_call| \n      res &lt;&lt; parse_call(raw_call)\n    end\n    res \n  end\n</code></pre>\n\n<p>Now, if I output the line </p>\n\n<pre><code>p CSVCallParser.new(File.read(\"file1.csv\")).run\n</code></pre>\n\n<p>I get (I added two more lines to the csv sample)</p>\n\n<pre><code>[{:date=&gt;\"01.09.2016 08:49\", :service=&gt;\"International\", :phone_number=&gt;\"48627843111\", :duration=&gt;\"0:29\", :unit=&gt;\"\", :cost=&gt;\"0,00\"},\n {:date=&gt;\"02.09.2016 08:49\", :service=&gt;\"International\", :phone_number=&gt;\"48622454111\", :duration=&gt;\"1:29\", :unit=&gt;\"\", :cost=&gt;\"0,00\"}, \n {:date=&gt;\"03.09.2016 08:49\", :service=&gt;\"Domestic\", :phone_number=&gt;\"48627843111\", :duration=&gt;\"0:29\", :unit=&gt;\"\", :cost=&gt;\"0,00\"}]\n</code></pre>\n\n<p>If you want to run this program from the terminal like so</p>\n\n<pre><code>ruby csv_call_parser.rb calls.csv\n</code></pre>\n\n<p>(In this case, <code>calls.csv</code> is passed in as an argument to <code>ARGV</code>)</p>\n\n<p>You can do so by modifying the last line of the ruby file.</p>\n\n<pre><code>p CSVCallParser.new(File.read(ARGV[0])).run\n</code></pre>\n\n<p>This will also return the array with hashes like before. </p>\n"}], "owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "accepted_answer_id": 39878608, "answer_count": 1, "score": 1, "last_activity_date": 1475685663, "creation_date": 1475672971, "last_edit_date": 1475681981, "question_id": 39874886, "link": "https://stackoverflow.com/questions/39874886/ruby-reading-from-csv-and-creating-objects-out-of-it", "title": "Ruby - reading from .csv and creating objects out of it", "body": "<p>I have .csv file with rows of which every row represents one call with certain duration, number etc. I need to create array of Call objects - every Call.new expects Hash of parameters, so it's easy - it just takes rows from CSV. But for some reason it doesn't work - when I invoke <code>Call.new(raw_call)</code> it's <code>nil</code>.\nIt's also impossible for me to see any output - I placed <code>puts</code> in various places in code (inside blocks etc) and it simply doesn't show anything. I obviously have another class - <code>Call</code>, which holds initialize for Call etc.</p>\n\n<pre><code>require 'csv'\nclass CSVCallParser\n  attr_accessor :io\n\n  def initialize(io)\n    self.io = io\n  end\n\n  NAMES = {\n    a: :date,\n    b: :service,\n    c: :phone_number,\n    d: :duration,\n    e: :unit,\n    f: :cost\n  }\n\n  def run\n    parse do |raw_call| \n    parse_call(raw_call)\n    end\n  end\n\n  private\n\n  def parse_call(raw_call) \n    NAMES.each_with_object({}) do |name, title, memo|\n      memo[name] = raw_call[title.to_s]\n    end\n  end\n\n  def parse(&amp;block) \n    CSV.parse(io, headers: true, header_converters: :symbol, &amp;block)\n  end\n\nend\n\nCSVCallParser.new(ARGV[0]).run\n</code></pre>\n\n<p>Small sample of my .csv file: headers and one row:</p>\n\n<pre><code>\"a\",\"b\",\"c\",\"d\",\"e\",\"f\"\n\"01.09.2016 08:49\",\"International\",\"48627843111\",\"0:29\",\"\",\"0,00\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "helper", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 2, "creation_date": 1475673135, "post_id": 39874415, "comment_id": 67036342, "body": "<code>include ActionView::Helpers::NumberHelper</code> in your application_helper.rb ?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1475673223, "post_id": 39874415, "comment_id": 67036420, "body": "Try <code>helper.number_with_precision(overall_rating, :precision =&gt; 2)</code>"}, {"owner": {"reputation": 4659, "user_id": 3164751, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jLKLy.jpg?s=128&g=1", "display_name": "Amrinder Singh", "link": "https://stackoverflow.com/users/3164751/amrinder-singh"}, "reply_to_user": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1475673857, "post_id": 39874415, "comment_id": 67036958, "body": "@\u5b59\u609f\u7a7a i wish if you have posted this as an Answer, so that i could accept this, anyways thanks alot :)"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1475674164, "post_id": 39874415, "comment_id": 67037182, "body": "@\u5b59\u609f\u7a7a Please post the answer"}], "answers": [{"tags": [], "owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "is_accepted": false, "score": 2, "last_activity_date": 1475673734, "last_edit_date": 1475673734, "creation_date": 1475673199, "answer_id": 39874966, "question_id": 39874415, "link": "https://stackoverflow.com/questions/39874415/not-able-to-use-number-with-precision-in-applicationhelpers-method-in-rails-5/39874966#39874966", "title": "Not able to use &quot;number_with_precision&quot; in ApplicationHelper&#39;s method in Rails 5.0", "body": "<p>Try Following</p>\n\n<pre><code>module ApplicationHelper\ninclude ActionView::Helpers::NumberHelper\n    def employer_overall_rating(overall_rating)\n      @overall_rating = number_with_precision(overall_rating, :precision =&gt; 2)\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "is_accepted": false, "score": 4, "last_activity_date": 1475674150, "creation_date": 1475674150, "answer_id": 39875324, "question_id": 39874415, "link": "https://stackoverflow.com/questions/39874415/not-able-to-use-number-with-precision-in-applicationhelpers-method-in-rails-5/39875324#39875324", "title": "Not able to use &quot;number_with_precision&quot; in ApplicationHelper&#39;s method in Rails 5.0", "body": "<p>If you don't want to clutter the namespace with number helpers, one way of doing that is calling the helper through <code>ActionController::Base.helpers</code>.</p>\n\n<pre><code>def employer_overall_rating(overall_rating)\n  @overall_rating = ActionController::Base.helpers.number_with_precision(overall_rating, :precision =&gt; 2)\nend\n</code></pre>\n\n<p>Naturally that would be simplified by:</p>\n\n<pre><code>def helpers\n  ActionController::Base.helpers\nend\n</code></pre>\n\n<p>Then you could do just <code>helpers.number_with_precision</code></p>\n\n<p>Another way is to include <code>ActionView::Helpers::NumberHelper</code></p>\n"}, {"tags": [], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "is_accepted": true, "score": 9, "last_activity_date": 1475674423, "creation_date": 1475674423, "answer_id": 39875446, "question_id": 39874415, "link": "https://stackoverflow.com/questions/39874415/not-able-to-use-number-with-precision-in-applicationhelpers-method-in-rails-5/39875446#39875446", "title": "Not able to use &quot;number_with_precision&quot; in ApplicationHelper&#39;s method in Rails 5.0", "body": "<p><code>include ActionView::Helpers::NumberHelper</code> in your application_helper.rb</p>\n"}], "owner": {"reputation": 4659, "user_id": 3164751, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jLKLy.jpg?s=128&g=1", "display_name": "Amrinder Singh", "link": "https://stackoverflow.com/users/3164751/amrinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3722, "favorite_count": 3, "accepted_answer_id": 39875446, "answer_count": 3, "score": 3, "last_activity_date": 1541371779, "creation_date": 1475671701, "last_edit_date": 1541371779, "question_id": 39874415, "link": "https://stackoverflow.com/questions/39874415/not-able-to-use-number-with-precision-in-applicationhelpers-method-in-rails-5", "title": "Not able to use &quot;number_with_precision&quot; in ApplicationHelper&#39;s method in Rails 5.0", "body": "<p>I am using \"number_with_precision\" method in Rails View, it is working fine there, for example:</p>\n\n<p><strong>In Rails View:</strong> (works fine)</p>\n\n<pre><code>&lt;%= number_with_precision(job.company.rating, :precision =&gt; 2) %&gt;\n</code></pre>\n\n<p>But when I try to do the same in ApplicationHelper's method then it gives me the following error:</p>\n\n<blockquote>\n  <p>undefined method `number_with_precision' rails</p>\n</blockquote>\n\n<p>Here is what I have tried:</p>\n\n<p><strong>In Rails ApplicationHelper:</strong> (gives error)</p>\n\n<pre><code>module ApplicationHelper\n\n  def employer_overall_rating(overall_rating)\n      @overall_rating = number_with_precision(overall_rating, :precision =&gt; 2)\n  end\n\nend\n</code></pre>\n\n<p>How can I use the same in ApplicationHelper?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1475670823, "post_id": 39873966, "comment_id": 67034679, "body": "You want users to be able to dictate how many connections they make to one or more databases?  Also, when you say parallelism do you mean concurrency?"}, {"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 1, "creation_date": 1475672865, "post_id": 39873966, "comment_id": 67036144, "body": "Can you explain more about what you are trying to do."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475700192, "post_id": 39873966, "comment_id": 67053691, "body": "I sure hope you put in limits otherwise a malicious, or ignorant, user could take you down."}], "answers": [{"tags": [], "owner": {"reputation": 1178, "user_id": 2772562, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1544504978/picture?type=large", "display_name": "Goko Gorgiovski", "link": "https://stackoverflow.com/users/2772562/goko-gorgiovski"}, "is_accepted": false, "score": 1, "last_activity_date": 1475676827, "creation_date": 1475676827, "answer_id": 39876354, "question_id": 39873966, "link": "https://stackoverflow.com/questions/39873966/ruby-on-rails-multiple-database-connections/39876354#39876354", "title": "Ruby on Rails - multiple database connections", "body": "<p>For my application I use this gem</p>\n\n<p><a href=\"https://github.com/thiagopradi/octopus\" rel=\"nofollow\">https://github.com/thiagopradi/octopus</a></p>\n\n<p>have good documentation and examples.</p>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1475757558, "last_edit_date": 1495541408, "creation_date": 1475756420, "answer_id": 39895841, "question_id": 39873966, "link": "https://stackoverflow.com/questions/39873966/ruby-on-rails-multiple-database-connections/39895841#39895841", "title": "Ruby on Rails - multiple database connections", "body": "<p>Assuming you want to use activerecord you can go two ways:</p>\n\n<ul>\n<li>dynamic class creation: see <a href=\"https://stackoverflow.com/questions/19319138/dynamically-create-a-class-inherited-from-activerecord\">Dynamically create a class inherited from ActiveRecord?</a></li>\n<li>define multiple classes and use the one needed, if they are in different schemes you need to specify the connection into the model itself, only feasable if the number of tables/models is not too high\nsee my answer at <a href=\"https://stackoverflow.com/questions/39862704/connecting-to-two-different-database-in-ruby-at-runtime/39863010#39863010\">Connecting to two different database in ruby at runtime</a></li>\n</ul>\n\n<p>Here an example how to use such a model, the class_name parameter is the name of the model to be used. It's from a Sinatra app but I'm sure you'll be able to adapt it for Rails. It's a backend for a ExtJs javascript app using multiple models expecting JSON as result.</p>\n\n<pre><code> # controller\n\n%w(create read update destroy).each do |action|\n  [:get, :post].each do |method|\n      send(method, \"/path/#{action}\") do\n        response.headers['Access-Control-Allow-Origin'] = '*'\n        content_type :json\n        if params[:store]\n          store = Object.const_get(params[:store]) \n        else\n          store = Signal\n        end\n        resp = send(action, store, params)\n        jsonp(resp)\n      end\n  end\nend\n\n# in helper.rb\n\ndef read (class_name, params)\n  params = params.symbolize_keys\n  default = {store: 'Signaal', limit: 10, sort: 'id', order: 'ASC', start: 0, user: '0'}\n  params = default.merge params\n  generic_data_getter(class_name, params, params[:start], params[:limit], params[:sort], params[:dir])\nend\n\ndef generic_data_getter (class_name, params, start=0, limit=10, sort='id', dir='ASC')\n  selection = build_selection(class_name, params)\n  data = class_name.where(selection).offset(start).limit(limit).order(\"#{sort} #{dir}\")\n  {:success =&gt; true, :totalCount =&gt; data.except(:offset, :limit, :order).count, :result =&gt; data.as_json}\nend\n</code></pre>\n\n<p>If not or for simple predefined searches or speed you can connect and disconnect as a connection is needed. Here an example for Oracle.</p>\n\n<pre><code>require 'oci8'\nCONN = OCI8.new('scheme','password','dbserver')\nsql = '....'\nCONN.exec(sql) {|record|puts record.join(',')}\nCONN.logoff\n</code></pre>\n\n<p>Be aware of malicius use like code injection.</p>\n"}, {"tags": [], "owner": {"reputation": 1420, "user_id": 1436610, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Ow8Cb.jpg?s=128&g=1", "display_name": "Coding active", "link": "https://stackoverflow.com/users/1436610/coding-active"}, "is_accepted": true, "score": 2, "last_activity_date": 1476091026, "creation_date": 1476091026, "answer_id": 39954991, "question_id": 39873966, "link": "https://stackoverflow.com/questions/39873966/ruby-on-rails-multiple-database-connections/39954991#39954991", "title": "Ruby on Rails - multiple database connections", "body": "<p>After researching for a bit, turns out there's a much simpler approach using ActiveRecord Connection pool. </p>\n\n<ol>\n<li>Setup a relationship between users and the database connections, in this case user 1 .. n connections.</li>\n<li><p>Make sure the model record can individually connect using </p>\n\n<pre><code>obj = ActiveRecord::Base.establish_connection(...spec...) \n\nobj.connection.exec_query(\"Select * from users\") \n# the response is in the form of ActiveResult, which allows flexible operations around the result. \n</code></pre></li>\n<li><p>Close the connection once done with the database. </p></li>\n</ol>\n\n<p>References:</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionHandler.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionHandler.html</a></p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html</a></p>\n"}], "owner": {"reputation": 1420, "user_id": 1436610, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Ow8Cb.jpg?s=128&g=1", "display_name": "Coding active", "link": "https://stackoverflow.com/users/1436610/coding-active"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2316, "favorite_count": 0, "accepted_answer_id": 39954991, "answer_count": 3, "score": 0, "last_activity_date": 1476091026, "creation_date": 1475670467, "question_id": 39873966, "link": "https://stackoverflow.com/questions/39873966/ruby-on-rails-multiple-database-connections", "title": "Ruby on Rails - multiple database connections", "body": "<p>I'm developing an application where it lets users to establish many number of database connections with a has-many relationship between user and connections. The connections are passive until the user manually connects each. The motive is to perform queries on them, parallely. </p>\n\n<p>I don't find good tutorials related to this, can you help me with some tips on how to accomplish this ? </p>\n"}, {"tags": ["ruby", "capybara"], "comments": [{"owner": {"reputation": 415, "user_id": 3328921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9386ab49bea2f95ab84eb048aee4863a?s=128&d=identicon&r=PG&f=1", "display_name": "archon92", "link": "https://stackoverflow.com/users/3328921/archon92"}, "edited": false, "score": 0, "creation_date": 1475762191, "post_id": 39873369, "comment_id": 67081497, "body": "I think this is an issue with the firefox version you are using and selenium version.Can you post the gem versions of selenium you are using and also the firefox version.                                                                                    Try using firefox 46.0.1 it works for me  with Selenium 2.53"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4875036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defbf427645dbd7dccf63d5791817bef?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo Santos", "link": "https://stackoverflow.com/users/4875036/rodrigo-santos"}, "edited": false, "score": 0, "creation_date": 1475677624, "post_id": 39873831, "comment_id": 67039988, "body": "but if i wanna use without watir...how can i do ?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1475683635, "post_id": 39873831, "comment_id": 67044333, "body": "This answer is wrong on a number of counts. 1 - the question asks about using Capybara, &quot;switch to watir&quot; is not an answer to that.  2- rescue and retry is a bad solution to pretty much any issue in testing since it means your tests are non determinant.  3. install AdBlock - What would that have to do with with an element being covered on the page?  4. button(text: &#39;Add&#39;)  - there are no elements in the OPs html that would match that."}, {"owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "reply_to_user": {"reputation": 11, "user_id": 4875036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defbf427645dbd7dccf63d5791817bef?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo Santos", "link": "https://stackoverflow.com/users/4875036/rodrigo-santos"}, "edited": false, "score": 0, "creation_date": 1475684974, "post_id": 39873831, "comment_id": 67045218, "body": "@RodrigoSantos just do not use watir, implement other points."}], "tags": [], "owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "is_accepted": false, "score": 0, "last_activity_date": 1475670116, "creation_date": 1475670116, "answer_id": 39873831, "question_id": 39873369, "link": "https://stackoverflow.com/questions/39873369/capybara-selenium-element-is-not-clickable-at-point-388-3833312988281-8-33/39873831#39873831", "title": "Capybara + Selenium - Element is not clickable at point (388.3833312988281, 8.333328247070312). Other element would receive the click", "body": "<p>This issue usually appear when the DOM either is not ready or is changing.</p>\n\n<p>So you should wait until the page become stable, all async scripts are finished, images loaded and so on. Ads also could be an issue, as they could change the page.</p>\n\n<p>Please have a look here for waiting (by the way, I'd recommend to use watir webdriver on top of Selenium):\n<a href=\"http://watir.github.io/docs/waiting/\" rel=\"nofollow\">http://watir.github.io/docs/waiting/</a></p>\n\n<p>Here are steps for reducing probability of this issue:</p>\n\n<ul>\n<li>wrap this code in rescue block and retry when it happens</li>\n<li>disable images loading</li>\n<li>install AdBlock or similar extension</li>\n<li>use <code>wait_</code> helpers in Watir</li>\n<li>try to avoid using complicated css selectors. Use something like <code>button(text: 'Add')</code> instead</li>\n<li>if you use it, try to select an element as close to click action in your code as it possible</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1475683668, "last_edit_date": 1495541963, "creation_date": 1475683205, "answer_id": 39878770, "question_id": 39873369, "link": "https://stackoverflow.com/questions/39873369/capybara-selenium-element-is-not-clickable-at-point-388-3833312988281-8-33/39878770#39878770", "title": "Capybara + Selenium - Element is not clickable at point (388.3833312988281, 8.333328247070312). Other element would receive the click", "body": "<p>I'm not sure I understand your \"not webdriver\" comment, since the only way to use selenium with Capybara is via the selenium-webdriver gem.  </p>\n\n<p>Judging by the y position of the error you're getting (8.333328247070312) it's likely that the button you're trying to click is behind a fixed header.  This is either because you haven't clicked an element necessary to make the button slide out from behind the header or because the page was longer than the screen and selenium-webdriver scrolled the page until the element was at the top (which ends up behind your header).  If you don't have a fixed footer on the page then you can change selenium-webdriver, via the <code>elementScrollBehavior</code> property, to scroll elements to the bottom instead of the top - see <a href=\"https://stackoverflow.com/questions/36439701/selenium-webdriver-how-do-i-set-capabilities-elementscrollbehavior-to-1-for-a\">Selenium WebDriver : How do I set capabilities elementScrollBehavior to 1 for a FireFox configuration in rails?</a>\n. If that doesn't work for you then you can use <code>execute_script</code> and JS to scroll the page so the element moves out from under the header</p>\n"}], "owner": {"reputation": 11, "user_id": 4875036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defbf427645dbd7dccf63d5791817bef?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo Santos", "link": "https://stackoverflow.com/users/4875036/rodrigo-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 610, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1475683668, "creation_date": 1475668793, "last_edit_date": 1475669597, "question_id": 39873369, "link": "https://stackoverflow.com/questions/39873369/capybara-selenium-element-is-not-clickable-at-point-388-3833312988281-8-33", "title": "Capybara + Selenium - Element is not clickable at point (388.3833312988281, 8.333328247070312). Other element would receive the click", "body": "<p>Im having a problem with a button.\nEvery time i tried to click, i receive this message</p>\n\n<p>\" Element is not clickable at point (388.3833312988281, 8.333328247070312). Other element would receive the click. \"</p>\n\n<p>Im using Firefox, and Capybara + ruby, and selenium ( not webdriver )</p>\n\n<p>Heres the code of the button</p>\n\n<p>I want to click on the Add button</p>\n\n<p>What can i do ?</p>\n\n<pre><code>&lt;div class=\"box08-2 collapseBoxContent\" style=\"margin-top: 0px\"&gt;\n  &lt;div id=\"wt32_Huge_WebbBaseTheme_wt11_block_wtMainContent_wtMainContent_wtItemsWB_Huge_WebbBaseTheme_wt31_block_wt8_wtCollapsibleContentPH\" style=\"margin-top: 0px\"&gt;\n     &lt;div id=\"wt32_Huge_WebbBaseTheme_wt11_block_wtMainContent_wtMainContent_wtItemsWB_Huge_WebbBaseTheme_wt31_block_wt8_wtCollapsibleContentPH_wtContent\" style=\"margin-top: 0px\"&gt;\n       &lt;div id=\"wt32_Huge_WebbBaseTheme_wt11_block_wtMainContent_wtMainContent_wtItemsWB_Huge_WebbBaseTheme_wt31_block_wt8_wtCollapsibleContentPH_wtContent_wtCtnBody\" data-webbtests=\"CompraWeb.Request_Edit.ItemsWB.divCtnBody\"&gt;\n         &lt;div class=\"btn04 btn04v5 box20v10\"&gt;\n           &lt;div id=\"wt32_Huge_WebbBaseTheme_wt11_block_wtMainContent_wtMainContent_wtItemsWB_Huge_WebbBaseTheme_wt31_block_wt8_wtCollapsibleContentPH_wtContent_RichWidgets_wt42_block_wtDropDownButtonRoot\" class=\"Menu_DropDownButton OSInline\"&gt;\n             &lt;div id=\"wt32_Huge_WebbBaseTheme_wt11_block_wtMainContent_wtMainContent_wtItemsWB_Huge_WebbBaseTheme_wt31_block_wt8_wtCollapsibleContentPH_wtContent_RichWidgets_wt42_block_wtDropDownButtonElement\" class=\"Menu_TopMenu\"&gt;\n              &lt;div id=\"wt32_Huge_WebbBaseTheme_wt11_block_wtMainContent_wtMainContent_wtItemsWB_Huge_WebbBaseTheme_wt31_block_wt8_wtCollapsibleContentPH_wtContent_RichWidgets_wt42_block_wtMenuItem\"&gt;\n                  &lt;span data-webbtests=\"CompraWeb.Request_Edit.ResumeRequestItemsWB.lblActions\"&gt;Add&lt;/span&gt;\n</code></pre>\n"}, {"tags": ["ruby", "hash", "fetch"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475700402, "post_id": 39873252, "comment_id": 67053791, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Also &quot;<a href=\"http://meta.stackoverflow.com/a/261593/128421\">How much research effort is expected of Stack Overflow users?</a>&quot; is applicable. We want to know what sort of effort you&#39;ve put into solving the problem. Did you search sites and not find answers? If so, where and how did those pages fail to answer the question? Did you write code? If not, why? If so, where is the minimal example demonstrating the problem? Without that it looks like you want us to write the code for you."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1475669222, "last_edit_date": 1475669222, "creation_date": 1475668830, "answer_id": 39873384, "question_id": 39873252, "link": "https://stackoverflow.com/questions/39873252/fetch-keys-of-existing-hash-and-give-them-default-values/39873384#39873384", "title": "Fetch keys of existing hash and give them default values", "body": "<pre><code>stub = hash.each_with_object({}) do |(_, v), memo|\n  memo.merge!(v)\nend.map { |k, v| [k, 0] } # or end.keys.product([0]).to_h\n   .to_h\n#\u21d2\u00a0{\"April\"=&gt;0, \"May\"=&gt;0, \"June\"=&gt;0, \"July\"=&gt;0, \"August\"=&gt;0, \"September\"=&gt;0}\n\nhash.map { |k, v| [k, stub.merge(v)] }.to_h\n#\u21d2 desired result\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1475701692, "last_edit_date": 1475701692, "creation_date": 1475700835, "answer_id": 39883471, "question_id": 39873252, "link": "https://stackoverflow.com/questions/39873252/fetch-keys-of-existing-hash-and-give-them-default-values/39883471#39883471", "title": "Fetch keys of existing hash and give them default values", "body": "<p>The trick is to remember that hashes will overwrite existing keys, so start with the default and overlay them with the ones you want to keep:</p>\n\n<pre><code>DEFAULTS = {\n  \"April\" =&gt; 0,\n  \"May\" =&gt; 0,\n  \"June\" =&gt; 0,\n  \"July\" =&gt; 0,\n  \"August\" =&gt; 0,\n  \"September\" =&gt; 0\n}\n\ndata = {\n  \"April_data\" =&gt; {\n    \"April\" =&gt; 10,\n    \"May\" =&gt; 8,\n    \"June\" =&gt; 7,\n    \"July\" =&gt; 7,\n    \"August\" =&gt; 5,\n    \"September\" =&gt; 2\n  },\n  \"May_data\" =&gt; {\n    \"May\" =&gt; 4,\n    \"June\" =&gt; 3,\n    \"July\" =&gt; 2,\n    \"August\" =&gt; 2,\n    \"September\" =&gt; 0\n  },\n  \"June_data\" =&gt; {\n    \"June\" =&gt; 12,\n    \"July\" =&gt; 12,\n    \"August\" =&gt; 8,\n    \"September\" =&gt; 2\n  }\n}\n\ndata.each do |k, v|\n  data[k] = DEFAULTS.merge(v)\nend\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>require 'ap'\nap data\n\n# &gt;&gt; {\n# &gt;&gt;   \"April_data\" =&gt; {\n# &gt;&gt;     \"April\"     =&gt; 10,\n# &gt;&gt;     \"May\"       =&gt; 8,\n# &gt;&gt;     \"June\"      =&gt; 7,\n# &gt;&gt;     \"July\"      =&gt; 7,\n# &gt;&gt;     \"August\"    =&gt; 5,\n# &gt;&gt;     \"September\" =&gt; 2\n# &gt;&gt;   },\n# &gt;&gt;   \"May_data\"   =&gt; {\n# &gt;&gt;     \"April\"     =&gt; 0,\n# &gt;&gt;     \"May\"       =&gt; 4,\n# &gt;&gt;     \"June\"      =&gt; 3,\n# &gt;&gt;     \"July\"      =&gt; 2,\n# &gt;&gt;     \"August\"    =&gt; 2,\n# &gt;&gt;     \"September\" =&gt; 0\n# &gt;&gt;   },\n# &gt;&gt;   \"June_data\"  =&gt; {\n# &gt;&gt;     \"April\"     =&gt; 0,\n# &gt;&gt;     \"May\"       =&gt; 0,\n# &gt;&gt;     \"June\"      =&gt; 12,\n# &gt;&gt;     \"July\"      =&gt; 12,\n# &gt;&gt;     \"August\"    =&gt; 8,\n# &gt;&gt;     \"September\" =&gt; 2\n# &gt;&gt;   }\n# &gt;&gt; }\n</code></pre>\n\n<p>If you're not sure what the keys should be, or, if you're like me and are lazy and want to let Ruby define the defaults for you, you can scan the sub-hashes and let Ruby figure it out:</p>\n\n<pre><code>DEFAULTS = data.flat_map{ |k, v| v.keys}.uniq.map{ |k| [k, 0] }.to_h\n# =&gt; {\"April\"=&gt;0, \"May\"=&gt;0, \"June\"=&gt;0, \"July\"=&gt;0, \"August\"=&gt;0, \"September\"=&gt;0}\n</code></pre>\n\n<p>Here's what that's doing:</p>\n\n<pre><code>DEFAULTS = data\n          .flat_map{ |k, v| v.keys} # =&gt; [\"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"May\", \"June\", \"July\", \"August\", \"September\", \"June\", \"July\", \"August\", \"September\"]\n          .uniq # =&gt; [\"April\", \"May\", \"June\", \"July\", \"August\", \"September\"]\n          .map{ |k| [k, 0] } # =&gt; [[\"April\", 0], [\"May\", 0], [\"June\", 0], [\"July\", 0], [\"August\", 0], [\"September\", 0]]\n          .to_h\n# =&gt; {\"April\"=&gt;0, \"May\"=&gt;0, \"June\"=&gt;0, \"July\"=&gt;0, \"August\"=&gt;0, \"September\"=&gt;0}\n</code></pre>\n\n<p>Alternately, but not necessarily faster or more concise:</p>\n\n<pre><code>DEFAULTS = data.values # =&gt; [{\"April\"=&gt;10, \"May\"=&gt;8, \"June\"=&gt;7, \"July\"=&gt;7, \"August\"=&gt;5, \"September\"=&gt;2}, {\"May\"=&gt;4, \"June\"=&gt;3, \"July\"=&gt;2, \"August\"=&gt;2, \"September\"=&gt;0}, {\"June\"=&gt;12, \"July\"=&gt;12, \"August\"=&gt;8, \"September\"=&gt;2}]\n               .flat_map(&amp;:keys) # =&gt; [\"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"May\", \"June\", \"July\", \"August\", \"September\", \"June\", \"July\", \"August\", \"September\"]\n               .uniq # =&gt; [\"April\", \"May\", \"June\", \"July\", \"August\", \"September\"]\n               .map{ |k| [k, 0] }.to_h  # =&gt; {\"April\"=&gt;0, \"May\"=&gt;0, \"June\"=&gt;0, \"July\"=&gt;0, \"August\"=&gt;0, \"September\"=&gt;0}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 1266743, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/12272ffa28df10e934f41c1e05d1d20b?s=128&d=identicon&r=PG", "display_name": "gastngouron", "link": "https://stackoverflow.com/users/1266743/gastngouron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 39873384, "answer_count": 2, "score": -1, "last_activity_date": 1475701692, "creation_date": 1475668454, "question_id": 39873252, "link": "https://stackoverflow.com/questions/39873252/fetch-keys-of-existing-hash-and-give-them-default-values", "title": "Fetch keys of existing hash and give them default values", "body": "<p>Given an existing hash such as:</p>\n\n<pre><code>{\n  \"April_data\" : {\n    \"April\" : 10,\n    \"May\" : 8,\n    \"June\" : 7,\n    \"July\" : 7,\n    \"August\" : 5,\n    \"September\" : 2\n  },\n  \"May_data\" : {\n    \"May\" : 4,\n    \"June\" : 3,\n    \"July\" : 2,\n    \"August\" : 2,\n    \"September\" : 0\n  },\n  \"June_data\" : {\n    \"June\" : 12,\n    \"July\" : 12,\n    \"August\" : 8,\n    \"September\" : 2\n  }\n}\n</code></pre>\n\n<p>How can I proceed in order to preserve all the keys contained in 'April_data' in other months and assign default values such as '0'? So the result would look like:</p>\n\n<pre><code>{\n  \"April_data\" : {\n    \"April\" : 10,\n    \"May\" : 8,\n    \"June\" : 7,\n    \"July\" : 7,\n    \"August\" : 5,\n    \"September\" : 2\n  },\n  \"May_data\" : {\n    \"April\": 0,\n    \"May\" : 4,\n    \"June\" : 3,\n    \"July\" : 2,\n    \"August\" : 2,\n    \"September\" : 0\n  },\n  \"June_data\" : {\n    \"April\": 0,\n    \"May\": 0,\n    \"June\" : 12,\n    \"July\" : 12,\n    \"August\" : 8,\n    \"September\" : 2\n  }\n}\n</code></pre>\n\n<p>Any help apreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "grape", "grape-api"], "owner": {"reputation": 4631, "user_id": 1080046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/trbrs.png?s=128&g=1", "display_name": "Eki Eqbal", "link": "https://stackoverflow.com/users/1080046/eki-eqbal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1475680632, "creation_date": 1475667683, "last_edit_date": 1475680632, "question_id": 39873018, "link": "https://stackoverflow.com/questions/39873018/how-to-include-subdirectories-to-autoload-for-grape-api", "title": "How to include subdirectories to autoload for Grape API?", "body": "<p>I'm using Grape to build an API for a Rails project (I'm mounting the grape project in rails <code>routes.rb</code> something like <code>mount Backend::Base =&gt; '/'</code>).</p>\n\n<p>The files structure is something like:</p>\n\n<p><code>\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 api\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 backend\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 base.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 v1\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 alerts.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u251c\u2500\u2500 test\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 index.rb\n</code></p>\n\n<p>My <code>application.rb</code> includes: </p>\n\n<pre><code>config.paths.add \"app/api\", glob: \"**/*.rb\"\n\nconfig.paths.add File.join('app', 'api'), glob: File.join('**', '*.rb')\nconfig.autoload_paths += Dir[Rails.root.join('app', 'api', '*')]\n</code></pre>\n\n<p>For <code>base.rb</code>:</p>\n\n<pre><code>module Backend\n  class Base &lt; Grape::API\n\n    format :json\n    prefix :api\n\n    mount CanopyBackend::V1::Alerts\n    mount CanopyBackend::V1::Test::Index\n\n  end\nend\n</code></pre>\n\n<p>My <code>alerts.rb</code>:</p>\n\n<pre><code>module Backend\n  module V1\n    class Alerts &lt; Grape::API\n      include Backend::V1::Defaults\n\n      resource :alerts do\n        get do\n          \"alerts\"\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>And <code>test/index.rb</code>:</p>\n\n<pre><code>module Backend\n  module V1\n    module Test\n      class Index &lt; Grape::API\n        include Backend::V1::Defaults\n\n        resource :index do\n          get do\n            \"index\"\n          end\n        end\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>Now it seems I can access <code>GET api/v1/alerts</code> but <strong>not</strong> <code>api/v1/test/index</code> somehow. </p>\n\n<p>I tried to modify <code>config.autoload_paths += Dir[Rails.root.join('app', 'api', '*')]</code> in <code>application.rb</code> to make it <code>config.autoload_paths += Dir[Rails.root.join('app', 'api', '/**/')]</code> but without any luck. </p>\n\n<p>Any help? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1475667377, "post_id": 39872271, "comment_id": 67032375, "body": "Can you post your method under test too? At a first glance of your spec I would suggest that you break down your original method into smaller pieces and test them."}], "answers": [{"comments": [{"owner": {"reputation": 11597, "user_id": 473467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2270d703967bfebb9cb555f85b3bb56b?s=128&d=identicon&r=PG", "display_name": "awendt", "link": "https://stackoverflow.com/users/473467/awendt"}, "edited": false, "score": 0, "creation_date": 1475670219, "post_id": 39873164, "comment_id": 67034262, "body": "&quot;Weak&quot; assertions allow you to have a shared setup and use it selectively. If you add more users, the assertions won&#39;t fail because it will still &quot;contain that specific user.&quot;"}, {"owner": {"reputation": 1529, "user_id": 6816469, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54907491c4c3e4fe42864f16ad2d4599?s=128&d=identicon&r=PG&f=1", "display_name": "tonicsoft", "link": "https://stackoverflow.com/users/6816469/tonicsoft"}, "reply_to_user": {"reputation": 11597, "user_id": 473467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2270d703967bfebb9cb555f85b3bb56b?s=128&d=identicon&r=PG", "display_name": "awendt", "link": "https://stackoverflow.com/users/473467/awendt"}, "edited": false, "score": 0, "creation_date": 1475678987, "post_id": 39873164, "comment_id": 67041116, "body": "Selective set up is a bad idea as it hides what set up is relevant for which test. Any shared set up code should be essential set up for all the tests that use it. You should not add to the shared set up code to serve one additional test, because over time the purpose of each test becomes muddy. That&#39;s the beauty of repeating yourself in tests - each test remains easily readable and unchanged over time."}], "tags": [], "owner": {"reputation": 1529, "user_id": 6816469, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/54907491c4c3e4fe42864f16ad2d4599?s=128&d=identicon&r=PG&f=1", "display_name": "tonicsoft", "link": "https://stackoverflow.com/users/6816469/tonicsoft"}, "is_accepted": false, "score": 1, "last_activity_date": 1475668141, "creation_date": 1475668141, "answer_id": 39873164, "question_id": 39872271, "link": "https://stackoverflow.com/questions/39872271/how-to-test-a-method-that-filters-on-several-conditions/39873164#39873164", "title": "How to test a method that filters on several conditions?", "body": "<p>Deciding between Option 1 and 2 can be tricky, but Option 3 is without a doubt the worst option. Unit Tests serve two purposes* - they drive clean code design and they document what the code does for the developers of the future. As you have correctly pointed out, having \"one huge test\" leaves developers in the dark as to why the method behaves as it does, and therefore destroys half of the benefit of the tests. Furthermore, these kinds of tests are not the sort of tests that drive out clean code design, so you are probably loosing that benefit too.</p>\n\n<p>Whether Option 1 or 2 is better depends on your situation. Repetitive set up code is not necessarily a problem (research DAMP vs DRY with respect to TDD) and if it is a problem it could be improved by extracting common set up code so it can be shared between test cases (although this can be a smell if taken too far). In any case, I don't see how Option 2 solves the issue of repetitive set up code - the only difference between the two options is how you make the assertions.</p>\n\n<p>The issue of \"stock\" vs \"weak\" assertions is a common theme (research strict mocks vs loose mocks) and is the main difference between Option 1 and 2. The problem with Option 1 is that making 1 change to production code can result in having to change the assertions for every single test case. For this reason I would advise having a couple of tests that assert on the whole array (to test ordering and completeness etc) but for most tests to be as specific as possible and only test include/excludes. This allows the test to clearly document which types of set ups result in which output values, rather than every test having a long list of assertions, only one of which is interesting to the current test case.</p>\n\n<p>The guiding principal is, don't test the same thing twice. If, by asserting every element in every test, you feel like you are testing the same thing twice then it's probably not the right way to go.</p>\n\n<p>* OK, sometimes they catch bugs too, but on their own they don't tell you that your system works and is bug free. That is the purpose of other forms of testing that test your entire system. Green unit tests do not give you enough confidence to release to production.</p>\n"}], "owner": {"reputation": 11597, "user_id": 473467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2270d703967bfebb9cb555f85b3bb56b?s=128&d=identicon&r=PG", "display_name": "awendt", "link": "https://stackoverflow.com/users/473467/awendt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475668141, "creation_date": 1475665485, "question_id": 39872271, "link": "https://stackoverflow.com/questions/39872271/how-to-test-a-method-that-filters-on-several-conditions", "title": "How to test a method that filters on several conditions?", "body": "<p>I'd like to improve specs for a convenience method that returns an array of users whose purchases are due tomorrow and will be paid using a certain payment method (ignoring other payment methods).</p>\n\n<p>The specs are something along the lines of:</p>\n\n<pre><code>it \"doesn't return users without purchases being due tomorrow\" do\n  # create user and associated records that don't fit the time condition\n  expect(subject).to eq([])\nend\n\ncontext \"with users who have purchases due tomorrow\" do\n\n  it \"returns users with $CERTAIN_PAYMENT_METHOD\" do\n    # create different users with different payment methods,\n    # all matching the time condition.\n\n    expect(subject).to eq([user_1, user_2])\n  end\n\n\n  it \"doesn't return users without $CERTAIN_PAYMENT_METHOD\" do\n    # create user with credit card,\n    # matching the time condition.\n\n    expect(subject).to eq([])\n  end\n\nend\n</code></pre>\n\n<p>I see three possible approaches here:</p>\n\n<ol>\n<li>Approach used above: Set up arbitrary combinations of records, and expect things specific to a single condition, always asserting the whole array. The setup can be long and repetitive.</li>\n<li>Set up arbitrary combinations, and expect things to be included/excluded in the returned array. These \"soft expectations\" are great to read but can be very error-prone.</li>\n<li>Set up (nearly) all combinations of records, and have a single expectation. This creates no overlap but also leaves developers in the dark as to <em>why</em> this method returns this specific array.</li>\n</ol>\n\n<p>All approaches have their drawbacks, and I'm wondering if there's a best practice how to test methods like these?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash", "shell"], "answers": [{"tags": [], "owner": {"reputation": 569, "user_id": 5268327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsYqc.jpg?s=128&g=1", "display_name": "Asad Ali", "link": "https://stackoverflow.com/users/5268327/asad-ali"}, "is_accepted": true, "score": 1, "last_activity_date": 1475665290, "creation_date": 1475665290, "answer_id": 39872214, "question_id": 39871463, "link": "https://stackoverflow.com/questions/39871463/how-to-call-multiple-bash-command-and-ssh-in-ruby/39872214#39872214", "title": "How to call multiple bash command and ssh in Ruby?", "body": "<p>I would recommend to view this <a href=\"http://www.heatware.net/ruby-rails/how-to-ssh-to-server-ruby-part-i/\" rel=\"nofollow\">tutorial</a> for ssh with ruby. then make a shell script and move it to server and then execute like a single command.</p>\n\n<p>create a single shell script file for example <code>script1</code> and then execute it at once instead of executing each command individually. </p>\n\n<p><strong>open file</strong> script1 using any editor. </p>\n\n<p><strong>copy all</strong> commands to <code>script1</code> (each command in new line).</p>\n\n<p><code>script1</code> file should look like this</p>\n\n<pre><code>#!/bin/bash\n\nssh example@example\nsource ~/.profile\ncd to/some/folder\n</code></pre>\n\n<p><strong>save file</strong></p>\n\n<p><strong>make this file executable</strong> using <code>chmod +x script</code></p>\n\n<p><strong>execute</strong> it in ruby like this <code>[backtick]./script1[backtick]</code></p>\n\n<p><strong>note:</strong> copy <code>script1</code> to usr/bin to avoid \"./\" and then try command only <code>script1</code>.</p>\n\n<p><strong>Reference</strong> for passing arguments in shell script is <a href=\"http://linuxcommand.org/wss0130.php\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 325, "user_id": 6725709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/494822cbe2c48506e972cd483144862f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey C", "link": "https://stackoverflow.com/users/6725709/jeffrey-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 39872214, "answer_count": 1, "score": 0, "last_activity_date": 1475665290, "creation_date": 1475663131, "last_edit_date": 1475663979, "question_id": 39871463, "link": "https://stackoverflow.com/questions/39871463/how-to-call-multiple-bash-command-and-ssh-in-ruby", "title": "How to call multiple bash command and ssh in Ruby?", "body": "<p>I want to do the following commands in ruby.</p>\n\n<ol>\n<li>ssh into another computer using <code>ssh example@example</code> </li>\n<li>set source file <code>source ~/.profile</code></li>\n<li><code>cd to/some/folder</code></li>\n<li>call my shell script with parameters, a json formatted string ,<code>./my_script.sh my_hash.to_json</code></li>\n</ol>\n\n<p>However I am facing these problems:\nI call them in one line using backticks, it works, but it is a very bad practice in my opinion because it is not readable nor it is maintainable.</p>\n\n<p>On the other hand, when I call <code>my_hash.to_json</code>, the resulted string has non-escaped double quotes, How do I escape them?</p>\n"}, {"tags": ["ruby", "shoes"], "comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1476622587, "post_id": 39871055, "comment_id": 67414292, "body": "have you tried my solution yet ?"}, {"owner": {"reputation": 101, "user_id": 4561531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/robsz.jpg?s=128&g=1", "display_name": "Shirley Temple", "link": "https://stackoverflow.com/users/4561531/shirley-temple"}, "edited": false, "score": 0, "creation_date": 1607831151, "post_id": 39871055, "comment_id": 115394871, "body": "Looks like &quot;farts&quot; is the keyword here"}], "answers": [{"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1475672935, "last_edit_date": 1475672935, "creation_date": 1475665429, "answer_id": 39872261, "question_id": 39871055, "link": "https://stackoverflow.com/questions/39871055/my-classes-cant-use-shoes-methods-like-para/39872261#39872261", "title": "My classes can&#39;t use Shoes methods like para", "body": "<p>I'm glad to see a question about shoes, it's been a long time.\nYou'r new on SO so first: your question is way too elaborated, too much to read and far too little information to help you.\nYou need to provide piecess of code that give error or don't do what you expect, things we can take over and try. This means extracting from your code tests or pieces of code that run by themself and show the problem.</p>\n\n<p>We also need to know which Ruby version and which version and color of shoes you are using. The example I'll be using is green shoes.</p>\n\n<p>I'm sure the following isn't exactly what you were after but I've made a sample based on your description of an Array that needs to be listed both by puts and para.</p>\n\n<p>Change the question or make a new one if this is not what you are after.</p>\n\n<pre><code>require 'green_shoes'\n\ns = Struct.new(:topic, :score)\ns1 = s.new(\"test1\", 1)\ns2 = s.new(\"test2\", 2)\nA = [s1, s2]\n\nclass Array\n  def putsdata(shoes = nil)\n    if shoes.class == Shoes::App\n      self.each do |ea|\n        shoes.para \"#{ea.topic}: #{ea.score}\"\n      end\n    else\n      self.each do |ea|\n        puts \"#{ea.topic}: #{ea.score}\"\n      end\n    end\n  end\nend\n\nA.putsdata\n\n# gives in the console\n# test1: 1\n# test2: 2\n\nShoes.app do\n  A.putsdata(self)\nend\n\n# gives in a graphic window\n# test1: 1\n# test2: 2\n</code></pre>\n\n<p>The puts also works in the shoes block, but of course the result doesn't come in the graphic window but on the console where you started, after the first list.</p>\n"}], "owner": {"reputation": 33, "user_id": 4780522, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/99a0c311c382e691c10774b270e43745?s=128&d=identicon&r=PG&f=1", "display_name": "Unmutual", "link": "https://stackoverflow.com/users/4780522/unmutual"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475672935, "creation_date": 1475661864, "question_id": 39871055, "link": "https://stackoverflow.com/questions/39871055/my-classes-cant-use-shoes-methods-like-para", "title": "My classes can&#39;t use Shoes methods like para", "body": "<p>Tldr: how do I 'include Shoes methods' into the Array class and classes ive created, with minimal code, without totally restructuring everything?</p>\n\n<p>I've written a functioning program in Ruby, and now I want to make a Shoes app from it.</p>\n\n<p>I'm having the problem described at the beginning of the manual - Shoes.app is a sort of block in itself, so self always refers to it, and Shoes methods like \"para\" aren't necessarily going to be available everywhere the way \"puts\" is in Ruby. But I'm not smart enough to fix it (I've only just got my head around using self and return in pure Ruby, bear with me)</p>\n\n<p>For example, I've created a new method for Array: putdata, which loops through a student's test score array displaying each automatically as a list:</p>\n\n<pre><code>self.each do |ea|\n    puts/para \"#{ea.topic}: #{ea.score}\"\nend\n</code></pre>\n\n<p>Works in ruby. Doesn't work in Shoes: Array class doesn't have access to the method para. I've tried:</p>\n\n<ul>\n<li>making Array &lt; Shoes (it really doesn't like that)</li>\n<li>adding stack.app do...end at various places in the program (no impact)</li>\n<li>trying to call Shoes::para instead of para (farts)</li>\n<li>I've tried using require 'file with all my classes and methods in.rb' instead of the same code in the file (reports no method for class)</li>\n<li>tried requiring my code directly before calling a method, to ensure my code is in the scope of Shoes (reports no method for class)</li>\n<li>making my custom classes (Course and Student) &lt; Shoes, so it'd have access to its methods (causes a runtime error)</li>\n</ul>\n\n<p>I've got it to function by:\n1.  Removing this bit of code from the Array class, and making it a floating/generic method rather than an Array method\n2.  Private method error --> then rephrasing it so instead of an Array method (array.putdata) it's a generic method which takes an array as an argument (putdata(array))</p>\n\n<p>But I really, really don't want to go through my code and individually un-organise it like this. </p>\n\n<p>It's my first 1000 line program, with 42 methods, and I worked hard on making it as maintainable and neat as possible, with everything tucked away in classes or methods for easy upkeep. I got it from everything in massive, step-by-step generic methods down to lots of snappy ones, which seemed a bit more like how OOP is meant to go. Now the only way I can see to make this work is to UN-OOP it, and have no class methods or anything.</p>\n\n<p>I was hoping I could Shoes the program fairly seamlessly from this tidy, functional back-end: the Ruby program has lots of \"if string == \"SAVE\", save(student); else...\", so I was hoping to straightforwardly pop in \"button.click {save(student)}\" with the same back code.</p>\n\n#\n\n<p>Is there something fundamental I'm missing to let me do this? And can I fix the para problem easily, seeing as all my classes contain ways of displaying their own data? I'd like to copypasta \"include 'Shoes methods'\" at the top of each class and be done.  </p>\n\n<p>Or do I need to be writing with the GUI in mind from the start in future? </p>\n\n<p>(Info about my program:</p>\n\n<p>Layout is a series of pages, linked from a sidebar, using index with linked pages as copied straight from the Nobody Knows Shoes book, or the class-book sample.</p>\n\n<p>Students can input their new levels, and view a readout of their current progress. </p>\n\n<p>There are generic methods for major \"parts\" of the program, which have things like the title of the page and some instructions, and which then call on student objects or Module methods to do the things as instructed by the user. </p>\n\n<p>Higher up: student is a custom class, with methods like \"save\", \"display flattened data \", \"add one to your level IF this ELSE don't\", and associated bits of data, like an array with all their course objects in.</p>\n\n<p>Each course is also a custom class (\"Module\"), which has the score, the module name etc as variables, and some tiny methods like display formatted name, or add one to this module.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rubymine", "folding"], "comments": [{"owner": {"reputation": 4296, "user_id": 590767, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/06cd6c7f24b9efbc08294c99662cbbfd?s=128&d=identicon&r=PG", "display_name": "fatuhoku", "link": "https://stackoverflow.com/users/590767/fatuhoku"}, "edited": false, "score": 0, "creation_date": 1476893051, "post_id": 39871037, "comment_id": 67542607, "body": "What text editor are you using? If using Rubymine, this functionality is built into the editor."}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "reply_to_user": {"reputation": 4296, "user_id": 590767, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/06cd6c7f24b9efbc08294c99662cbbfd?s=128&d=identicon&r=PG", "display_name": "fatuhoku", "link": "https://stackoverflow.com/users/590767/fatuhoku"}, "edited": false, "score": 0, "creation_date": 1476897507, "post_id": 39871037, "comment_id": 67545117, "body": "Thank you for the response however, although the functionality exists it only folds methods or custom blocks. I just cannot seem to get the custom blocks to work in the way I want"}], "answers": [{"comments": [{"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1476904874, "post_id": 40139817, "comment_id": 67549536, "body": "Sadly that won&#39;t work as typically <code>it do blocks</code> can be at any level, due to the nature of nesting <code>context</code> blocks."}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1476905026, "post_id": 40139817, "comment_id": 67549605, "body": "i have a feeling that what I&#39;m asking for is simply not possible :/"}], "tags": [], "owner": {"reputation": 35, "user_id": 4805539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad60c0cef2e110bef0c2e51e139f37f6?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Huynh", "link": "https://stackoverflow.com/users/4805539/arthur-huynh"}, "is_accepted": false, "score": 0, "last_activity_date": 1476904735, "creation_date": 1476904735, "answer_id": 40139817, "question_id": 39871037, "link": "https://stackoverflow.com/questions/39871037/rubymine-code-folding-all-rspec-examples/40139817#40139817", "title": "Rubymine - code folding ALL rspec examples", "body": "<p>Try going under Code > Folding > Expand All to Level > 3\u2325\u2318* in the menus. That should fold/expand to what you want.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lXKaP.png\" rel=\"nofollow\">Code folding menu in RubyMine</a></p>\n\n<p>More here: <a href=\"https://www.jetbrains.com/help/ruby/2016.2/code-folding.html#folding_menu\" rel=\"nofollow\">https://www.jetbrains.com/help/ruby/2016.2/code-folding.html#folding_menu</a></p>\n"}], "owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1476904735, "creation_date": 1475661811, "last_edit_date": 1476897677, "question_id": 39871037, "link": "https://stackoverflow.com/questions/39871037/rubymine-code-folding-all-rspec-examples", "title": "Rubymine - code folding ALL rspec examples", "body": "<p>Does anyone know if it's possible to code fold all rspec examples either automatically on opening a spec file or preferably by key binding from within Rubymine.</p>\n\n<p>For a spec with lots of examples it would be very handy to just collapse all examples to get an overview of the complete spec for a model, controller, etc. This would make it far easier to review and check for any missing edge conditions for example.</p>\n\n<p>What I would like is for the it block to code fold so that they result in something like...</p>\n\n<pre><code>it 'should test something' do ... end\n</code></pre>\n\n<p>... without having to manually code fold every individual example.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6925507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4009bf6b3752794da180b7ad05d992?s=128&d=identicon&r=PG&f=1", "display_name": "Clarkekee", "link": "https://stackoverflow.com/users/6925507/clarkekee"}, "edited": false, "score": 0, "creation_date": 1475664479, "post_id": 39871193, "comment_id": 67030389, "body": "Thank you so much for the formula, i&#39;m a little new to Ruby so could you explain your code?"}], "tags": [], "owner": {"reputation": 512, "user_id": 2256108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f57478b0873b01beb669da634396b159?s=128&d=identicon&r=PG", "display_name": "XQY", "link": "https://stackoverflow.com/users/2256108/xqy"}, "is_accepted": false, "score": 1, "last_activity_date": 1475662642, "last_edit_date": 1475662642, "creation_date": 1475662314, "answer_id": 39871193, "question_id": 39870933, "link": "https://stackoverflow.com/questions/39870933/how-do-i-group-arrays-by-the-first-2-values-and-sum-their-corresponding-number-i/39871193#39871193", "title": "How do I group arrays by the first 2 values and sum their corresponding number in ruby?", "body": "<p>An approach using <code>group_by</code></p>\n\n<pre><code>inputs.group_by{|x| [x[0], x[1]]}.map{|k, v| [*k, v.map{|z| z[2]}.inject(:+)] }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6925507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4009bf6b3752794da180b7ad05d992?s=128&d=identicon&r=PG&f=1", "display_name": "Clarkekee", "link": "https://stackoverflow.com/users/6925507/clarkekee"}, "edited": false, "score": 0, "creation_date": 1475664506, "post_id": 39871265, "comment_id": 67030408, "body": "Thanks so much for the help, i&#39;m a little new to Ruby so could you explain your code?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1, "user_id": 6925507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4009bf6b3752794da180b7ad05d992?s=128&d=identicon&r=PG&f=1", "display_name": "Clarkekee", "link": "https://stackoverflow.com/users/6925507/clarkekee"}, "edited": false, "score": 1, "creation_date": 1475665625, "post_id": 39871265, "comment_id": 67031168, "body": "I put links to the documentation, though I don\u2019t see what you expect me to explain? Try to execute the code above in console step by step, see what it resulted in and understand how it works. It worth 100 plain English explanations."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1475665530, "last_edit_date": 1475665530, "creation_date": 1475662510, "answer_id": 39871265, "question_id": 39870933, "link": "https://stackoverflow.com/questions/39870933/how-do-i-group-arrays-by-the-first-2-values-and-sum-their-corresponding-number-i/39871265#39871265", "title": "How do I group arrays by the first 2 values and sum their corresponding number in ruby?", "body": "<pre><code>input.group_by { |e| e.take(2) }\n     .map { |k, vals| [*k, vals.map(&amp;:last).reduce(:+)] }\n#\u21d2\u00a0[[0, 0, 15], [1, 0, 12], [1, 2, 11]]\n</code></pre>\n\n<p>or </p>\n\n<pre><code>input.group_by { |e| e.take(2) }\n     .map { |k, vals| [k, vals.map(&amp;:last).reduce(:+)] }.to_h\n#\u21d2\u00a0{[0, 0]=&gt;15, [1, 0]=&gt;12, [1, 2]=&gt;11}\n</code></pre>\n\n<p>Used here:</p>\n\n<ul>\n<li><a href=\"https://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-group_by\" rel=\"nofollow\"><code>Enumerable#group_by</code></a></li>\n<li><a href=\"https://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>Enumerable#map</code></a></li>\n<li><a href=\"https://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-reduce\" rel=\"nofollow\"><code>Enumerable#reduce</code></a></li>\n<li><a href=\"https://ruby-doc.org/core-2.3.0/Array.html#method-i-to_h\" rel=\"nofollow\"><code>Array#to_h</code></a></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 6925507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c4009bf6b3752794da180b7ad05d992?s=128&d=identicon&r=PG&f=1", "display_name": "Clarkekee", "link": "https://stackoverflow.com/users/6925507/clarkekee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1475665530, "creation_date": 1475661536, "last_edit_date": 1495542794, "question_id": 39870933, "link": "https://stackoverflow.com/questions/39870933/how-do-i-group-arrays-by-the-first-2-values-and-sum-their-corresponding-number-i", "title": "How do I group arrays by the first 2 values and sum their corresponding number in ruby?", "body": "<p>I came across this question <a href=\"https://stackoverflow.com/questions/21506965/how-to-group-and-sum-arrays-in-ruby\">How to group and sum arrays in Ruby?</a> and was wondering how to apply it to my current problem at hand. </p>\n\n<p>I have a multidimensional array with values as follows:</p>\n\n<pre><code>[[0,0,5],\n[0,0,10],\n[1,0,4],\n[1,0,8],\n[1,2,5],\n[1,2,6]]\n</code></pre>\n\n<p>and I need to sum the 3rd value in each sub-array according to the 1st and 2nd values to get this output:</p>\n\n<pre><code>[[0,0,15], [1,0,12], [1,2,11]]\n</code></pre>\n\n<p>Any idea how to get this done? Thanks for the help!</p>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6017068, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YjbI8zRdBA4/AAAAAAAAAAI/AAAAAAAAAEs/GRtbSQu73kE/photo.jpg?sz=128", "display_name": "Dmitriy Polovinkin", "link": "https://stackoverflow.com/users/6017068/dmitriy-polovinkin"}, "edited": false, "score": 0, "creation_date": 1475670399, "post_id": 39873165, "comment_id": 67034381, "body": "No, i need modify recieved post request to &quot;/send&quot;, add some fields, and send it to walletone.com"}, {"owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "reply_to_user": {"reputation": 23, "user_id": 6017068, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YjbI8zRdBA4/AAAAAAAAAAI/AAAAAAAAAEs/GRtbSQu73kE/photo.jpg?sz=128", "display_name": "Dmitriy Polovinkin", "link": "https://stackoverflow.com/users/6017068/dmitriy-polovinkin"}, "edited": false, "score": 0, "creation_date": 1475672910, "post_id": 39873165, "comment_id": 67036184, "body": "Does the response not have a redirect location?"}, {"owner": {"reputation": 23, "user_id": 6017068, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YjbI8zRdBA4/AAAAAAAAAAI/AAAAAAAAAEs/GRtbSQu73kE/photo.jpg?sz=128", "display_name": "Dmitriy Polovinkin", "link": "https://stackoverflow.com/users/6017068/dmitriy-polovinkin"}, "edited": false, "score": 0, "creation_date": 1475674179, "post_id": 39873165, "comment_id": 67037192, "body": "what for this location? i have <code>uri</code>"}, {"owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "reply_to_user": {"reputation": 23, "user_id": 6017068, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YjbI8zRdBA4/AAAAAAAAAAI/AAAAAAAAAEs/GRtbSQu73kE/photo.jpg?sz=128", "display_name": "Dmitriy Polovinkin", "link": "https://stackoverflow.com/users/6017068/dmitriy-polovinkin"}, "edited": false, "score": 0, "creation_date": 1475676085, "post_id": 39873165, "comment_id": 67038782, "body": "No, the response you get from the <code>post_form</code> method. What status code do you get? 200 OK or 302 redirect etc..."}, {"owner": {"reputation": 23, "user_id": 6017068, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YjbI8zRdBA4/AAAAAAAAAAI/AAAAAAAAAEs/GRtbSQu73kE/photo.jpg?sz=128", "display_name": "Dmitriy Polovinkin", "link": "https://stackoverflow.com/users/6017068/dmitriy-polovinkin"}, "edited": false, "score": 0, "creation_date": 1475677482, "post_id": 39873165, "comment_id": 67039860, "body": "wow, now <code>response.body</code> is: <code>&lt;html&gt;&lt;head&gt;&lt;title&gt;Object moved&lt;&#47;title&gt;&lt;&#47;head&gt;&lt;body&gt; &lt;h2&gt;Object moved to &lt;a href=&quot;&#47;checkout&#47;checkout&#47;Index?i=334742142681&amp;amp;m=19155429&zwnj;&#8203;4939&quot;&gt;here&lt;&#47;a&gt;.&lt;&#47;h2&gt; &lt;&#47;body&gt;&lt;&#47;html&gt;</code>"}, {"owner": {"reputation": 23, "user_id": 6017068, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YjbI8zRdBA4/AAAAAAAAAAI/AAAAAAAAAEs/GRtbSQu73kE/photo.jpg?sz=128", "display_name": "Dmitriy Polovinkin", "link": "https://stackoverflow.com/users/6017068/dmitriy-polovinkin"}, "edited": false, "score": 0, "creation_date": 1475679778, "post_id": 39873165, "comment_id": 67041779, "body": "with <code>redirect &quot;https:&#47;&#47;wl.walletone.com&#47;checkout&#47;checkout&#47;Index&quot;, 307</code>? no it did not work, because <code>Object moved to &lt;a......</code>"}, {"owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "reply_to_user": {"reputation": 23, "user_id": 6017068, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YjbI8zRdBA4/AAAAAAAAAAI/AAAAAAAAAEs/GRtbSQu73kE/photo.jpg?sz=128", "display_name": "Dmitriy Polovinkin", "link": "https://stackoverflow.com/users/6017068/dmitriy-polovinkin"}, "edited": false, "score": 0, "creation_date": 1475681005, "post_id": 39873165, "comment_id": 67042631, "body": "Oops, sorry. Check now."}, {"owner": {"reputation": 23, "user_id": 6017068, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YjbI8zRdBA4/AAAAAAAAAAI/AAAAAAAAAEs/GRtbSQu73kE/photo.jpg?sz=128", "display_name": "Dmitriy Polovinkin", "link": "https://stackoverflow.com/users/6017068/dmitriy-polovinkin"}, "edited": false, "score": 0, "creation_date": 1475681499, "post_id": 39873165, "comment_id": 67042943, "body": "woohoo! it works! with litlle change: <code>redirect &quot;https:&#47;&#47;wl.walletone.com&quot;+response[&#39;location&#39;], 302</code>. Thank you very much rohit89!"}], "tags": [], "owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "is_accepted": true, "score": 1, "last_activity_date": 1475680984, "last_edit_date": 1475680984, "creation_date": 1475668141, "answer_id": 39873165, "question_id": 39870871, "link": "https://stackoverflow.com/questions/39870871/how-send-post-request-and-open-url-in-ruby-sinatra/39873165#39873165", "title": "how send post request and open url in Ruby Sinatra", "body": "<p>If you want to directly pass along a POST request and redirect to it, you can do</p>\n\n<pre><code>post '/send' do\n  redirect &lt;your_url&gt;, 307\nend\n</code></pre>\n\n<p><code>307</code> is the HTTP status code to not modify the request method.</p>\n\n<p>Handle a redirect response like this:</p>\n\n<pre><code>post '/send' do\n  # post form\n  redirect response['location'], 302\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6017068, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YjbI8zRdBA4/AAAAAAAAAAI/AAAAAAAAAEs/GRtbSQu73kE/photo.jpg?sz=128", "display_name": "Dmitriy Polovinkin", "link": "https://stackoverflow.com/users/6017068/dmitriy-polovinkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "accepted_answer_id": 39873165, "answer_count": 1, "score": 2, "last_activity_date": 1475680984, "creation_date": 1475661341, "last_edit_date": 1475661696, "question_id": 39870871, "link": "https://stackoverflow.com/questions/39870871/how-send-post-request-and-open-url-in-ruby-sinatra", "title": "how send post request and open url in Ruby Sinatra", "body": "<p>i am sending a post request,\nand need to get result like with html form, \nwhere we going to some url after doing request</p>\n\n<pre><code>&lt;form action=\"url\" method=\"post\"&gt;\n</code></pre>\n\n<p>i tried this:</p>\n\n<pre><code>return response.body()\n</code></pre>\n\n<p>and i get only body of html page, \nbut i need to redirect to this page.\nwhat right way to go to needed URL?</p>\n\n<p>here my code for post request:</p>\n\n<pre><code>    post '/send' do\n            uri = URI.parse(\"https://wl.walletone.com/checkout/checkout/Index\")\n            response = Net::HTTP.post_form(uri, {\n                \"WMI_MERCHANT_ID\" =&gt; \"xxx\",\n                \"WMI_PAYMENT_AMOUNT\" =&gt; \"10.00\",\n                \"WMI_CURRENCY_ID\" =&gt; \"643\"\n            })\n    end\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1475661912, "post_id": 39870613, "comment_id": 67028850, "body": "What values does <code>@challenges</code> in <code>duels&#47;user_challenges.js.erb</code> holds?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1475664397, "post_id": 39870613, "comment_id": 67030327, "body": "@Pavan I updated question."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1475664709, "post_id": 39870613, "comment_id": 67030539, "body": "What does the error says?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1475665084, "post_id": 39870613, "comment_id": 67030811, "body": "Also try changing <code>name: $(&#39;#change-challenge-options&#39;).prop(&#39;value&#39;)</code> to <code>name: $(&quot;#change-challenge-options option:selected&quot;).text()</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1475665345, "post_id": 39870613, "comment_id": 67030983, "body": "And also you are sending <b><i>name</i></b> not <b><i>id</i></b>. So change <code>@user = User.find(params[:id])</code> to <code>@user = User.find_by_name(params[:name])</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1475668623, "post_id": 39870613, "comment_id": 67033177, "body": "@Pavan the popup alert says <code>Exception:[object Object]</code>. You make great points. I updated my code with your suggestions, but nothing changed. How would you write the <code>&lt;script&gt;</code>? How would you start the code chunk, i.e. with <code>$(document).ready(function()</code> and/or <code>$( &quot;#change-challenge-options&quot; ).change(function()</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1475668973, "post_id": 39870613, "comment_id": 67033402, "body": "Ah! There it is!. You should put <code>$(&#39;#change-challenge-options&#39;).change(function() {</code> under the <code>$(document).ready(function(){</code>. And the entire Ajax code should come under the <code>$(&#39;#change-challenge-options&#39;).change(function() {</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1475673418, "post_id": 39870613, "comment_id": 67036592, "body": "@Pavan that&#39;s what I had though, sorry it wasn&#39;t clear in the question. I had commented it out. I said if I use <code>$(&#39;#change-challenge-options&#39;).change(function() </code> then <code>console.log(&quot;Fired!&quot;);</code> doesn&#39;t fire and neither does the AJAX :/"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1476100330, "creation_date": 1475660670, "last_edit_date": 1476100330, "question_id": 39870613, "link": "https://stackoverflow.com/questions/39870613/how-to-successfully-call-ajax-to-update-collection-select", "title": "How to successfully call AJAX to update collection_select?", "body": "<p>The idea is that the <code>challenges</code> in <code>collection_select</code> should change based upon who the user is in <code>select</code>.</p>\n\n<p>How can we fix the <code>&lt;script&gt;</code> so that just the user's challenges are listed?</p>\n\n<p><strong>duels/_dueler_fields.html.erb</strong></p>\n\n<pre><code>&lt;%= f.select :user_id, User.order(:name).map { |user| [user.full_name, user.id] }, include_blank: true, id: \"change-challenge-options\" %&gt;\n\n  will\n\n&lt;%= render partial: 'user_challenges', locals: { challenges: Challenge.order(:created_at) } %&gt;\n\n&lt;script&gt;\n    $(document).ready(function(){\n     # $( \"#change-challenge-options\" ).change(function() { // Doesn't fire if I put this line back in\n      console.log(\"Fired!\"); # Is firing\n      $.ajax({\n        url: '&lt;%= user_challenges_path %&gt;',\n        type: 'GET',\n        data: {name: $('#change-challenge-options').prop('value')},\n       success:function(result)\n       {\n        alert('Successfully called');\n       },\n       error:function(exception){alert('Exeption:'+exception);} # But error is raising\n      })\n     # })\n    })\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>duels/_user_challenges.html.erb</strong></p>\n\n<pre><code>&lt;div id=\"dropdown-no-2\"&gt;\n  &lt;%= collection_select(:dueler, :challenge_id, challenges, :id, :full_challenge, include_blank: true) %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>duels/user_challenges.js.erb</strong></p>\n\n<pre><code>$(\"#dropdown-no-2\").html('&lt;%=j render :partial =&gt; \"user_challenges\", locals: {challenges: @challenges} %&gt;'); \n</code></pre>\n\n<p><strong>duels_controller</strong></p>\n\n<pre><code>def user_challenges # Not sure if I should put @user &amp; @challenges here or under def new\n  @user = User.find(params[:id])\n  @challenges = @user.challenges.order(:created_at)\nend\n\ndef new\n  @user = User.find(params[:id])\n  @challenges = @user.challenges.order(:created_at)\n  @duel = Duel.new\n  @duel.duelers &lt;&lt; Dueler.new(user_id: current_user.id, user_name: current_user.name, user_last_name: current_user.last_name)\nrespond_with(@duel)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "edited": false, "score": 0, "creation_date": 1475660924, "post_id": 39870549, "comment_id": 67028148, "body": "Thanks for taking the time to help!  A) For <code>sign_out_via</code> what exactly should I type?  <code>sign_out_via = :delete </code>  right...?  B) By convention should I run <code>Rails g controller User</code> or <code>Rails g controller Users</code>? Haha sorry I&#39;m a newb and forget =(!"}, {"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "edited": false, "score": 0, "creation_date": 1475662060, "post_id": 39870549, "comment_id": 67028941, "body": "I did your suggestion of running <code>rails g controller Users</code> and then added this destroy method into the controller because I got an error saying I have no destroy method.   <a href=\"https://gist.github.com/PrimeTimeTran/2ba75b382a8153ef04bc766658ac39bb\" rel=\"nofollow noreferrer\">gist.github.com/PrimeTimeTran/2ba75b382a8153ef04bc766658ac39&zwnj;&#8203;bb</a>  Still doesn&#39;t delete(although I just copy and pasted the method from another App I made where destroy works.  Should I code it differently since this is a session instead of an instance of a model?"}, {"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "edited": false, "score": 0, "creation_date": 1475684826, "post_id": 39870549, "comment_id": 67045123, "body": "I redid your steps again and I realized I made an error and you were right Pavan. I simply named it wrong. After doing <code>rails g controller Users</code> and adjusting my <b>devise.rb</b> file from <code>config.sign_out_via = :delete</code> to <code>config.sign_out_via = :get</code> to match the method parameter it worked.   Thanks for the help!"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1475661210, "last_edit_date": 1475661210, "creation_date": 1475660494, "answer_id": 39870549, "question_id": 39870403, "link": "https://stackoverflow.com/questions/39870403/rails-devise-gem-sign-out-fails-to-sign-out/39870549#39870549", "title": "Rails Devise Gem &quot;Sign_Out&quot; Fails to sign out", "body": "<blockquote>\n  <p>undefined method `sign_out_via_get_because_of=' for Devise:Module<br>\n  (NoMethodError)</p>\n</blockquote>\n\n<p>There is no <code>sign_out_via_get_because_of</code> helper for devise. There is only <code>sign_out_via</code></p>\n\n<blockquote>\n  <p>uninitialized constant UsersController</p>\n</blockquote>\n\n<p>You don't have <code>users_controller.rb</code> under <code>app/controllers</code>, so is the error.</p>\n\n<pre><code>#app/controllers/users_controller.rb\n\nclass UsersController &lt; ApplicationController\nend\n</code></pre>\n\n<blockquote>\n  <p>For \"sign_out_via\" what exactly should I type?</p>\n</blockquote>\n\n<p>It depends on the <code>method</code> parameter in your <code>link_to</code>. If it is <code>:method =&gt; :delete</code> then <code>config.sign_out_via = :delete</code> else <code>config.sign_out_via = :get</code>.</p>\n\n<blockquote>\n  <p>By convention should I run Rails g controller User or Rails g\n  controller Users?</p>\n</blockquote>\n\n<p>You should run <code>rails g controller Users</code></p>\n"}], "owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "accepted_answer_id": 39870549, "answer_count": 1, "score": 0, "last_activity_date": 1475661210, "creation_date": 1475660117, "last_edit_date": 1495542794, "question_id": 39870403, "link": "https://stackoverflow.com/questions/39870403/rails-devise-gem-sign-out-fails-to-sign-out", "title": "Rails Devise Gem &quot;Sign_Out&quot; Fails to sign out", "body": "<p><strong>Error Message</strong></p>\n\n<pre><code>Rails Server\nProcessing by Devise::SessionsController#destroy as HTML\n  User Load (0.5ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1      ORDER BY \"users\".\"id\" ASC LIMIT 1  [[\"id\", 1]]\nCan't verify CSRF token authenticity\n   (0.4ms)  BEGIN\n   (0.1ms)  COMMIT\n</code></pre>\n\n<p>I read <a href=\"https://stackoverflow.com/questions/6567863/no-route-matches-get-users-sign-out://\">this article</a> thoroughly, my question is not a repeat because <strong>I researched!</strong></p>\n\n<p><strong>I tried Cramheads suggestion:</strong>\n<em>Added this to routes.rb</em></p>\n\n<pre><code>devise_for :users do\n  get '/users/sign_out' =&gt; 'devise/sessions#destroy'\nend\n</code></pre>\n\n<p><strong>I tried itkevins suggestion:</strong> <em>changed devise.rb's default from</em></p>\n\n<pre><code>config.sign_out_via = :delete\n    to\nconfig.sign_out_via = :get\n</code></pre>\n\n<p><em>this resulted in a routing error:</em></p>\n\n<pre><code>uninitialized constant UsersController\n</code></pre>\n\n<p><strong>I tried Rickys suggestion:</strong> <em>changed devise.rb</em></p>\n\n<pre><code>config.sign_out_via_get_becuase_of = :ie\n</code></pre>\n\n<p><em>this resulted in a method error:</em></p>\n\n<pre><code>undefined method `sign_out_via_get_because_of=' for Devise:Module           (NoMethodError)\n</code></pre>\n\n<p><strong>I tried Olives suggestion:</strong> <em>adjusted the code slightly</em></p>\n\n<pre><code>link_to :logout, destroy_user_session_path, :method =&gt; :delete \n    replacing \nlink_to \"Sign out\", destroy_user_session_path, :method =&gt; :delete\n</code></pre>\n\n<p><strong>I tried Victor Martins suggestion:</strong> <em>Already had this in application.js</em></p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n</code></pre>\n\n<p><strong>I tried Rezas suggestion:</strong> <em>In routes.rb</em></p>\n\n<pre><code>devise_for :users\n\ndevise_scope :user do  \n   get '/users/sign_out' =&gt; 'devise/sessions#destroy'     \nend\n</code></pre>\n\n<p><strong>I followed DuyKhoas suggestion as well:</strong>\n    <em>I included javascript</em> </p>\n\n<pre><code>&lt;%= javascript_include_tag(:application) %&gt;\n</code></pre>\n\n<p><em>I already had this so this wasn\u2019t helpful either.</em></p>\n\n<p>All the other suggestions were repeats of the already suggested fixes.</p>\n\n<p>HELP PLEASE! t.T</p>\n\n<p>You can look at the <a href=\"https://github.com/PrimeTimeTran/blog\" rel=\"nofollow noreferrer\">Github Repo here</a>.</p>\n"}, {"tags": ["ruby", "anagram"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1485107340, "post_id": 39869703, "comment_id": 70776503, "body": "Annoy your teacher! <code>result = words.group_by{|word| word.chars.sort.join}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1475658746, "post_id": 39869800, "comment_id": 67026621, "body": "Also this can be made more explicit with something like <code>result[key] ||= []; result[key].push(word)</code>"}, {"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 2, "creation_date": 1475658888, "post_id": 39869800, "comment_id": 67026720, "body": "You can predefine the hash like <code>Hash.new{|k, v| k[v] = []}</code>"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 2, "last_activity_date": 1475658917, "last_edit_date": 1475658917, "creation_date": 1475658550, "answer_id": 39869800, "question_id": 39869703, "link": "https://stackoverflow.com/questions/39869703/ruby-anagram-codes/39869800#39869800", "title": "Ruby - Anagram Codes", "body": "<p>It basically ensures that you are operating on valid array.</p>\n\n<p>When you start with empty hash <code>{}</code>, the value of <code>result[key]</code> will be <code>nil</code> for any given key - as the key still does not exist in that hash.</p>\n\n<pre><code>01:  if result.has_key?(key)\n02:    result[key].push(word)\n03:  else\n04:    result[key] = [word]\n05:  end\n</code></pre>\n\n<p>So, line 01 checks whether a key is already present in <code>result</code> hash - if it is, then, one can access it using expression <code>result[key]</code>, and assuming its an array, push another word into that array.</p>\n\n<p>If key still does not exist in <code>result</code> hash, then, line 04 sets it up by assigning a value which is a single element array <code>[word]</code>.</p>\n\n<hr>\n\n<p>If you are more familiar with Ruby, then, one could write something like below and avoid whole <code>if-else</code> dance:</p>\n\n<pre><code>words.each do |word|\n  key = word.split('').sort.join\n  result[key] ||= []\n  result[key] &lt;&lt; word\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "is_accepted": false, "score": 0, "last_activity_date": 1475658681, "creation_date": 1475658681, "answer_id": 39869849, "question_id": 39869703, "link": "https://stackoverflow.com/questions/39869703/ruby-anagram-codes/39869849#39869849", "title": "Ruby - Anagram Codes", "body": "<p>The program computes a key for each word by sorting its letters (<code>key = word.split('').sort.join</code>). If two or more words are anagrams of each other, they will have the same key.</p>\n\n<p>For example, the key of the words <code>neon</code> and <code>none</code> is <code>enno</code>.</p>\n\n<p>Then, the words are added in the <code>result</code> hash. This hash has as keys the anagram keys discussed above. The values of the hash are arrays of words (strings).</p>\n\n<p>Here's the rest of the (important) code annotated:</p>\n\n<pre><code># If there is an entry in the hash for the current anagram key \nif result.has_key?(key)\n  # Then add the current word in the array, together with all the\n  # other anagrams that are already there (because they share the\n  # same key)\n  result[key].push(word)\nelse\n  # If the key has not yet been created, then create it and assign\n  # as a value a new array that only contains the current word.\n  result[key] = [word]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": true, "score": 2, "last_activity_date": 1475660762, "creation_date": 1475660762, "answer_id": 39870655, "question_id": 39869703, "link": "https://stackoverflow.com/questions/39869703/ruby-anagram-codes/39870655#39870655", "title": "Ruby - Anagram Codes", "body": "<p>See the explanation inline comment:</p>\n\n<pre><code>words.each do |word| #=&gt;  iterate each word in words array. \"word\" variable will have value at a particular iteration\n  key = word\n  .split('') #=&gt; splits word, if word is 'demo' on iteration then it will be: `['d', 'e', 'm', 'o']`\n  .sort #=&gt; sorts the splitted array, i.e. the array above will be: `['e', 'd', 'm', 'o']`\n  .join #=&gt; joins the array sorted in above operation, it will be: 'edmo'. Since this is last operation, it will be returned and saved in `key` variable\n  if result.has_key?(key) #=&gt; Check whether result(Hash) already has key: `edmo`, returns true if present\n    result[key].push(word) #=&gt; result['edmo'] will give an array value, which can push word in that array\n  else #=&gt; false when key is not present in result Hash.\n    result[key] = [word] #=&gt; then add key with an array such as: `result['edmo] = ['demo']`\n  end\nend\n</code></pre>\n\n<p>However, you can do the same in idiomatic way:</p>\n\n<pre><code>result = Hash.new{|h, k| h[k] =[] } #=&gt; if key does not exist then the default value will be an array.\n</code></pre>\n\n<p>So, the above code will become:</p>\n\n<pre><code>words.each do |word|\n  key = word.split('').sort.join\n  result[key] &lt;&lt; word # no need to validate whether we have key in Hash or not\nend\n</code></pre>\n\n<p>But, there's a problem with this approach of keeping value as an array. You will have duplicate data in your key if you have duplicate words in our words array. Problem can be solved by just changing array to set:</p>\n\n<pre><code>require 'set'\nresult = Hash.new{|h, k| h[k] = Set.new }\n</code></pre>\n\n<p>Now, we're all good.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6925364"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1701, "favorite_count": 0, "accepted_answer_id": 39870655, "answer_count": 3, "score": 5, "last_activity_date": 1485103432, "creation_date": 1475658277, "last_edit_date": 1485103432, "question_id": 39869703, "link": "https://stackoverflow.com/questions/39869703/ruby-anagram-codes", "title": "Ruby - Anagram Codes", "body": "<p>We have an array of words here:</p>\n\n<pre><code>words =  ['demo', 'none', 'tied', 'evil', 'dome', 'mode', 'live',\n          'fowl', 'veil', 'wolf', 'diet', 'vile', 'edit', 'tide',\n          'flow', 'neon']\n</code></pre>\n\n<p>My teacher wrote a program that prints out groups of words that are anagrams. Anagrams are words that have the same exact letters in them but in a different order. The output should look something like this:</p>\n\n<pre><code>[\"demo\", \"dome\", \"mode\"]\n[\"neon\", \"none\"]\n(etc)\n</code></pre>\n\n<p>And here's the solution my teacher showed us:</p>\n\n<pre><code>result = {}\n\nwords.each do |word|\n  key = word.split('').sort.join\n  if result.has_key?(key)\n    result[key].push(word)\n  else\n    result[key] = [word]\n  end\nend\n\nresult.each do |k, v|\n  puts \"------\"\n  p v\nend\n</code></pre>\n\n<p>I am bit confused how this program works such as when this part was set up <code>result[key].push(word)</code> and the part where it says <code>result[key] = [word]</code> I know this might be an off question a bit but can anyone one there can explain the solution line by line in a layman's term or in a way a dummy like me would understand.</p>\n\n<p>PS. Sorry newbie here. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "slim-lang"], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 3934708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SVvjw.jpg?s=128&g=1", "display_name": "Sergey Pedan", "link": "https://stackoverflow.com/users/3934708/sergey-pedan"}, "is_accepted": true, "score": 2, "last_activity_date": 1478286181, "creation_date": 1478286181, "answer_id": 40430069, "question_id": 39869051, "link": "https://stackoverflow.com/questions/39869051/slim-rails-gem-crush-on-start-register-config-processor-wrong-number-of-argum/40430069#40430069", "title": "slim-rails gem crush on start `register_config_processor&#39;: wrong number of arguments", "body": "<p>Works if the gem is plugged in directly from GitHub:</p>\n\n<pre><code>gem 'slim-rails', github: 'slim-template/slim-rails'\n</code></pre>\n\n<p>Problem addressed: incompatibility of <code>gem 'slim-rails'</code> with Sprockets 4. (If you're using Rails 5 but Sprockets 3, this solution may not help.)</p>\n\n<p>The <code>slim-rails</code> team have solved it in <a href=\"https://github.com/slim-template/slim-rails/commit/2b69604d381bc921623149953efaca81fe84992d\" rel=\"nofollow noreferrer\">this commit</a>, but for me it still crashes when I plug the gem from <a href=\"http://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a> \u2014\u00a0but works well when using the GitHub version.</p>\n"}], "owner": {"reputation": 91, "user_id": 3246623, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/af3b74b6e68554facb164ce883277068?s=128&d=identicon&r=PG&f=1", "display_name": "rado", "link": "https://stackoverflow.com/users/3246623/rado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 40430069, "answer_count": 1, "score": 2, "last_activity_date": 1478286181, "creation_date": 1475656435, "last_edit_date": 1475658379, "question_id": 39869051, "link": "https://stackoverflow.com/questions/39869051/slim-rails-gem-crush-on-start-register-config-processor-wrong-number-of-argum", "title": "slim-rails gem crush on start `register_config_processor&#39;: wrong number of arguments", "body": "<p>when I'm adding <code>slim-rails</code> to <code>Gemfile</code> and starting my app, it crashes with such error:</p>\n\n<pre><code>/Users/rado/.rbenv/versions/2.3.1/gemsets/project/gems/sprockets-4.0.0.beta2/lib/sprockets/processing.rb:211:in `register_config_processor': wrong number of arguments (given 4, expected 2..3) (ArgumentError)\n  from /Users/rado/.rbenv/versions/2.3.1/gemsets/project/gems/sprockets-4.0.0.beta2/lib/sprockets/processing.rb:53:in `register_preprocessor'\n  from /Users/rado/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/slim-rails-3.1.1/lib/slim-rails/register_engine.rb:33:in `block in _register_engine'\n  from /Users/rado/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/sprockets-rails-3.1.1/lib/sprockets/railtie.rb:178:in `block in build_environment'\n  from /Users/rado/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/sprockets-rails-3.1.1/lib/sprockets/railtie.rb:177:in `each'\n  from /Users/rado/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/sprockets-rails-3.1.1/lib/sprockets/railtie.rb:177:in `build_environment'\n</code></pre>\n\n<p>My <code>rails version</code> is <code>5.0.0.1</code>\nAnybody knows how to fix this?</p>\n"}, {"tags": ["ruby", "if-statement", "hash", "push", "block"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6186484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c36052662da35e05e95bc3cdc65eb8?s=128&d=identicon&r=PG&f=1", "display_name": "dsto", "link": "https://stackoverflow.com/users/6186484/dsto"}, "edited": false, "score": 0, "creation_date": 1475660861, "post_id": 39869187, "comment_id": 67028095, "body": "What an unbelievably fantastic answer.  You&#39;ve explained everything so well that even a rookie like me can&#39;t fail to understand any part of it!  Thank you so much!"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 2, "last_activity_date": 1475657849, "last_edit_date": 1475657849, "creation_date": 1475656825, "answer_id": 39869187, "question_id": 39868984, "link": "https://stackoverflow.com/questions/39868984/ruby-trouble-with-if-hash-block-or-push/39869187#39869187", "title": "Ruby trouble with if, hash, block, or push", "body": "<p>Problem is the way you are constructing your <code>hash</code> object, and assuming that default value of empty array will be automatically assigned to a key on first access.</p>\n\n<p>As the <a href=\"https://ruby-doc.org/core-2.2.3/Hash.html#method-c-new\" rel=\"nofollow\">documentation</a> mentions,</p>\n\n<blockquote>\n  <p>If obj is specified, this single object will be used for all default\n  values</p>\n</blockquote>\n\n<p>In your case, the statement like below</p>\n\n<pre><code>hash['left'+l.to_s] &lt;&lt; e\n</code></pre>\n\n<p>is effectively below code:</p>\n\n<pre><code>an_array = hash['left'+l.to_s]\nan_array &lt;&lt; e\n</code></pre>\n\n<p>This is not what you might have intended. You need to explicitly update the key's value in hash.</p>\n\n<p>As you update a temporary array, its value is never inserted into hash.\nYou should be doing:</p>\n\n<pre><code>hash['left'+l.to_s] = hash['left'+l.to_s] &lt;&lt; e\n</code></pre>\n\n<hr>\n\n<p>Or Alternatively, you can use constructor like below and you should get desired output with rest of code unchanged.</p>\n\n<pre><code>hash = Hash.new {|hash, key| hash[key] = [] }\n</code></pre>\n\n<p>Here, whenever a key is accessed for first time and it has no value associated with it, then the block <code>{|hash, key| hash[key] = [] }</code> will be executed - which basically assign an empty array value for that key.</p>\n\n<hr>\n\n<p>Or you could use simple hash initialiser <code>{}</code> and handle <code>nil</code> values, as shown below:</p>\n\n<pre><code>source = [5,0,1,2,3,4,6,7,8,9]\n\nhash = {}\nl = 0\n\nhash['pivot' + l.to_s] = source[0]\n\nsource.each_with_index do |e, i|\n    if i &gt; 0\n        if e &lt;= hash['pivot' + l.to_s]\n            hash['left'+l.to_s] = (hash['left'+l.to_s] || []) &lt;&lt; e\n        else\n            hash['right'+l.to_s] = (hash['right'+l.to_s] || []) &lt;&lt; e\n        end\n    end\nend\n\nprint hash\n#=&gt; {\"pivot0\"=&gt;5, \"left0\"=&gt;[0, 1, 2, 3, 4], \"right0\"=&gt;[6, 7, 8, 9]}\n</code></pre>\n\n<p>Expression like <code>(hash['left'+l.to_s] || [])</code> returns first operand if its not <code>nil</code>, else returns the value of second operand, which in this case happens to be an empty array.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1475658479, "creation_date": 1475658479, "answer_id": 39869771, "question_id": 39868984, "link": "https://stackoverflow.com/questions/39868984/ruby-trouble-with-if-hash-block-or-push/39869771#39869771", "title": "Ruby trouble with if, hash, block, or push", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>src = [5,0,1,2,3,4,6,7,8,9]\n%i(pivot left right).zip(\n  [pivot = src.first, *src.partition { |e| e &lt;= pivot }]\n).to_h\n#\u21d2 \"{:pivot=&gt;5, :left=&gt;[5, 0, 1, 2, 3, 4], :right=&gt;[6, 7, 8, 9]}\"\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6186484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c36052662da35e05e95bc3cdc65eb8?s=128&d=identicon&r=PG&f=1", "display_name": "dsto", "link": "https://stackoverflow.com/users/6186484/dsto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1475658479, "creation_date": 1475656204, "question_id": 39868984, "link": "https://stackoverflow.com/questions/39868984/ruby-trouble-with-if-hash-block-or-push", "title": "Ruby trouble with if, hash, block, or push", "body": "<p>What I expect my code to do:\nprint out </p>\n\n<pre><code>{ \"pivot0\"=&gt;5, \"left0\"=&gt;[5,0,1,2,3,4], \"right0\"=&gt;[6,7,8,9] }\n</code></pre>\n\n<p>What my code does: print out <code>{ \"pivot0\"=&gt;5}</code></p>\n\n<p>I've used print to try to debug. Both <code>hash[\"left0\"]</code> and <code>hash[\"right0\"]</code> return [0,1,2,3,4,6,7,8,9]. Yet neither keys are showing up at all inside hash.  And even if they did show up, they don't have the right numbers in them.  What am I not understanding?  As you can tell by the title, I don't even know what is causing the problem.  Trying to write similar code with any one of those factors removed (if, hash, block, or push) seems to give me expected results, so I'm thoroughly confused.</p>\n\n<pre><code>source = [5,0,1,2,3,4,6,7,8,9]\n\nhash = Hash.new([])\n\nl=0\n\nhash['pivot' + l.to_s] = source[0]\n\nsource.each_with_index do |e, i|\n    if i &gt; 0\n        if e &lt;= hash['pivot' + l.to_s]\n            puts \"hit left on #{e}\"\n            hash['left'+l.to_s] &lt;&lt; e\n        else\n          puts \"hit right on #{e}\"\n            hash['right'+l.to_s] &lt;&lt; e\n        end\n    end\n\nend\n\nprint hash\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1475654988, "post_id": 39867538, "comment_id": 67024404, "body": "How exactly you&#39;re seeing this error? when you run specs?"}, {"owner": {"reputation": 4627, "user_id": 280833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1SBUi.jpg?s=128&g=1", "display_name": "Jason Yost", "link": "https://stackoverflow.com/users/280833/jason-yost"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1475678236, "post_id": 39867538, "comment_id": 67040446, "body": "Yes when the spec is run, it renders the view and this error is received."}], "answers": [{"tags": [], "owner": {"reputation": 4627, "user_id": 280833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1SBUi.jpg?s=128&g=1", "display_name": "Jason Yost", "link": "https://stackoverflow.com/users/280833/jason-yost"}, "is_accepted": false, "score": 3, "last_activity_date": 1477105336, "creation_date": 1477105336, "answer_id": 40187902, "question_id": 39867538, "link": "https://stackoverflow.com/questions/39867538/rspec-3-view-spec-undefined-method-for-custom-helper/40187902#40187902", "title": "Rspec 3 view spec undefined method for custom helper", "body": "<p>A custom helper can be included in a view spec with <code>helper(&lt;module&gt;)</code></p>\n\n<p>In the view spec in my case:</p>\n\n<pre><code>RSpec.describe 'media_items/new', type: :view do\n    helper(MediaHelper)\nend\n</code></pre>\n\n<p>When <code>render</code> is called in the spec, it correctly renders the view with <code>&lt;= custom_form_for(media) do |f| %&gt;</code></p>\n"}], "owner": {"reputation": 4627, "user_id": 280833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1SBUi.jpg?s=128&g=1", "display_name": "Jason Yost", "link": "https://stackoverflow.com/users/280833/jason-yost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1477105336, "creation_date": 1475651393, "question_id": 39867538, "link": "https://stackoverflow.com/questions/39867538/rspec-3-view-spec-undefined-method-for-custom-helper", "title": "Rspec 3 view spec undefined method for custom helper", "body": "<p>I have a custom form builder method in a helper module.</p>\n\n<pre><code>module MediaHelper\n  class CustomFormBuilder &lt; ActionView::Helpers::FormBuilder\n    ... \n  end\n\n def custom_form_for(data, *args, &amp;proc)\n  options = args.extract_options!\n  form_for(data, *(args &lt;&lt; options.merge(builder:\n  MediaHelper::CustomFormBuilder)), &amp;proc)\n end\nend\n</code></pre>\n\n<p>This works in the view with <code>&lt;= custom_form_for(media) do |f| %&gt;</code></p>\n\n<p>However it breaks the view spec in RSpec 3, and I receive the error message</p>\n\n<p><code>ActionView::Template::Error: undefined method custom_form_for' for #&lt;#&lt;Class:0x007fea32454ce0&gt;:0x007fea34064f98&gt;</code></p>\n\n<p>on render</p>\n\n<p>Is it possible to include the helper?</p>\n"}, {"tags": ["mysql", "ruby", "database", "ruby-on-rails-5", "rails-migrations"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6924636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015e4f129062c61f08f5e6b764945b1?s=128&d=identicon&r=PG&f=1", "display_name": "parapapao", "link": "https://stackoverflow.com/users/6924636/parapapao"}, "edited": false, "score": 0, "creation_date": 1475650238, "post_id": 39867111, "comment_id": 67021727, "body": "Thanks Piotor! So in altering the database itself, I should do it using the migration file? Is it possible to alter the a table using the existing migration file?"}, {"owner": {"reputation": 905, "user_id": 5119244, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203221141608724/picture?type=large", "display_name": "Argonus", "link": "https://stackoverflow.com/users/5119244/argonus"}, "reply_to_user": {"reputation": 5, "user_id": 6924636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015e4f129062c61f08f5e6b764945b1?s=128&d=identicon&r=PG&f=1", "display_name": "parapapao", "link": "https://stackoverflow.com/users/6924636/parapapao"}, "edited": false, "score": 0, "creation_date": 1475650517, "post_id": 39867111, "comment_id": 67021875, "body": "If you wrote migration file and ran rake db:migrate its better to write another migration. You don;t have to, but it is much cleaner. If you want to run all migrations again you can do <code>rake db:drop db:create db:migrate</code>. For editing last migration you can use rollback, but it all is in guide."}], "tags": [], "owner": {"reputation": 905, "user_id": 5119244, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203221141608724/picture?type=large", "display_name": "Argonus", "link": "https://stackoverflow.com/users/5119244/argonus"}, "is_accepted": true, "score": 1, "last_activity_date": 1475649959, "creation_date": 1475649959, "answer_id": 39867111, "question_id": 39866979, "link": "https://stackoverflow.com/questions/39866979/rails-dbmigrate-doesnt-work-after-altering-the-database-manually/39867111#39867111", "title": "rails db:migrate doesn&#39;t work after altering the database manually", "body": "<p>Its because <code>rake db:migrate</code> is running only migrations for the current env that have not run yet. So if you run db:migrate and then manually delete table form DB, your app does not know that.</p>\n\n<p><a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html\" rel=\"nofollow\">MIgration Guides</a></p>\n"}], "owner": {"reputation": 5, "user_id": 6924636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015e4f129062c61f08f5e6b764945b1?s=128&d=identicon&r=PG&f=1", "display_name": "parapapao", "link": "https://stackoverflow.com/users/6924636/parapapao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 39867111, "answer_count": 1, "score": 0, "last_activity_date": 1475649959, "creation_date": 1475649449, "question_id": 39866979, "link": "https://stackoverflow.com/questions/39866979/rails-dbmigrate-doesnt-work-after-altering-the-database-manually", "title": "rails db:migrate doesn&#39;t work after altering the database manually", "body": "<p>I am still new to rails and I have some questions regarding rails migration.</p>\n\n<p>I am using rails 5, windows 8. I generated a model and wrote some code which creates a table with columns. Then I deleted that table from my development db (MySQL) and tried to execute db:migrate again to see if it would create the table and columns written in the migration file. After executing db:migrate, it didn't show any messages in the terminal and it did not create the table and the columns. </p>\n\n<p>Based from my observation, deleting the version of my migration file from schema_migrations and running db:migrate once again, it worked and created the table and columns. </p>\n\n<p>I would like to ask the pros of rails development on why is this happening and what should I do when I start to develop a large database model.</p>\n\n<p>I would also like some suggestions about great resource materials for learning ruby on rails.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "xcode", "nokogiri"], "comments": [{"owner": {"reputation": 34778, "user_id": 382906, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c054847fb6fd89d40f3f4ad44d6daaf1?s=128&d=identicon&r=PG", "display_name": "locoboy", "link": "https://stackoverflow.com/users/382906/locoboy"}, "edited": false, "score": 0, "creation_date": 1475648219, "post_id": 39866392, "comment_id": 67020788, "body": "just tried <code>brew uninstall xz</code> and it worked. Not sure why this was the case though."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475699379, "post_id": 39866392, "comment_id": 67053270, "body": "Did you accept the user TOS for Xcode? <a href=\"http://apple.stackexchange.com/q/175069/1153\">apple.stackexchange.com/q/175069/1153</a>"}], "owner": {"reputation": 34778, "user_id": 382906, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c054847fb6fd89d40f3f4ad44d6daaf1?s=128&d=identicon&r=PG", "display_name": "locoboy", "link": "https://stackoverflow.com/users/382906/locoboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475699344, "creation_date": 1475647094, "last_edit_date": 1495540856, "question_id": 39866392, "link": "https://stackoverflow.com/questions/39866392/el-capitan-mac-osx-doesnt-bundle-nokogiri", "title": "El Capitan Mac OSX doesn&#39;t bundle nokogiri", "body": "<p>I'm trying to run <code>gem install nokogiri</code> on 10.11 OSX and getting the following error. Note I just updated to the newest XCode version 8.0: </p>\n\n<pre><code>checking if the C compiler accepts ... yes\nchecking if the C compiler accepts -Wno-error=unused-command-line-argument-hard-error-in-future... no\nBuilding nokogiri using packaged libraries.\nUsing mini_portile version 2.1.0\nchecking for iconv.h... yes\nchecking for gzdopen() in -lz... yes\nchecking for iconv... yes\n</code></pre>\n\n<p>I've tried everything that was listed here but wasn't able to figure it out: <a href=\"https://stackoverflow.com/questions/34651519/error-while-installing-nokogiri-1-6-7-on-el-capitan\">Error while installing Nokogiri (1.6.7) on El Capitan</a></p>\n"}, {"tags": ["ruby", "rspec", "fileutils"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1475647344, "post_id": 39866336, "comment_id": 67020439, "body": "You might want to use <a href=\"https://github.com/fakefs/fakefs\" rel=\"nofollow noreferrer\">github.com/fakefs/fakefs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1578, "user_id": 6003161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4baeef3d0ff8d4dec06271c9b0125922?s=128&d=identicon&r=PG&f=1", "display_name": "Pants", "link": "https://stackoverflow.com/users/6003161/pants"}, "edited": false, "score": 0, "creation_date": 1618591867, "post_id": 39866541, "comment_id": 118657232, "body": "&quot;mocking what you own&quot; is not always possible. Why should I let a vendor library (or standard library) for that matter do a long process instead of just mocking its return value for faster spec result?"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 1578, "user_id": 6003161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4baeef3d0ff8d4dec06271c9b0125922?s=128&d=identicon&r=PG&f=1", "display_name": "Pants", "link": "https://stackoverflow.com/users/6003161/pants"}, "edited": false, "score": 0, "creation_date": 1618606957, "post_id": 39866541, "comment_id": 118662606, "body": "Your code should call this method at least once , in a test, or you will not see  when this method changes it&#39;s behavior. Further more you can reconsider your design and decouple your code from such vendor libraries. When you mock this method directly you have a lot of assumptions in mind."}], "tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": true, "score": 0, "last_activity_date": 1475647738, "creation_date": 1475647738, "answer_id": 39866541, "question_id": 39866336, "link": "https://stackoverflow.com/questions/39866336/how-to-mock-or-stub-chmod-method-under-fileutils-class-in-ruby/39866541#39866541", "title": "How to mock or stub chmod method under FileUtils class in ruby", "body": "<p>One rule for mocking you have to consider is \"mock only what you own\". File and FileUtils you don't own. If you realy want to do it you can try gem <code>fakefs</code>. I would recommend another approch:</p>\n\n<pre><code>class YourClass\n   attr_accessor :file_class, :file_utils_class\n\n   def file_class\n      @file_class ||= File\n   end\n\n   def file_utils_class\n     @file_utils_class ||= FileUtils\n   end\n\n   def create_file(file)\n     unless file_class.exist?(file)\n       file_utils_class.mkdir_p(file_class.dirname(file), :mode =&gt; 0755)\n       file_utils_class.touch file\n       file_utils_class.chmod(0644, file)\n     end\n   end\n end\n</code></pre>\n\n<p>This way you can inject an object during test that behaves like you want.</p>\n"}], "owner": {"reputation": 329, "user_id": 4306259, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7XNPPvPxz2s/AAAAAAAAAAI/AAAAAAAAEqY/4-9oOk2h3fo/photo.jpg=k-s128", "display_name": "redwolfgang20", "link": "https://stackoverflow.com/users/4306259/redwolfgang20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 39866541, "answer_count": 1, "score": 0, "last_activity_date": 1475647738, "creation_date": 1475646824, "question_id": 39866336, "link": "https://stackoverflow.com/questions/39866336/how-to-mock-or-stub-chmod-method-under-fileutils-class-in-ruby", "title": "How to mock or stub chmod method under FileUtils class in ruby", "body": "<p>Hi guys I really need help on how to stub or mock a <strong>chmod</strong> method under FileUtils class in ruby.</p>\n\n<p>Currently I have this code.</p>\n\n<pre><code>def create_file(file)\n    unless File.exist?(file)\n        FileUtils.mkdir_p(File.dirname(file), :mode =&gt; 0755)\n        FileUtils.touch file\n        FileUtils.chmod(0644, file)\n    end\nend\n</code></pre>\n\n<p>where <strong>file</strong> located under <strong>/usr/local/something_folder/filePath.fileExtension</strong></p>\n\n<p>And this is the equivalent test code I've created for that code above.</p>\n\n<pre><code>File.stub(:dirname).and_return('fileFullPath')\nFileUtils.stub(:mkdir_p).and_return('fileFullPath')\nFileUtils.stub(:touch).and_return('fileFullPath')\nFileUtils.stub(:chmod).and_return('fileFullPath')\n</code></pre>\n\n<p>The problem here is the permission under <strong>/usr/local</strong> file path that's why I'm going to stub or mock that method call.</p>\n\n<p>I would be glad and thankful if you can help me with this problem.</p>\n\n<p>Happy coding guys :)</p>\n"}, {"tags": ["ruby", "rspec", "rubygems"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1475671900, "post_id": 39865921, "comment_id": 67035445, "body": "Did you require the gem in the code that executes the test?"}], "owner": {"reputation": 21, "user_id": 2140359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df83f400fedd680e42a3b8ff6505b92?s=128&d=identicon&r=PG", "display_name": "izalmul", "link": "https://stackoverflow.com/users/2140359/izalmul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475644671, "creation_date": 1475644671, "question_id": 39865921, "link": "https://stackoverflow.com/questions/39865921/gems-missing-error-when-running-rspec-programatically-but-working-fine-directly", "title": "Gems missing error when running rspec programatically but working fine directly with rspec command", "body": "<p>When i run rspec programatically (RSpec::Core::Runner.run(['spec/apis/my_spec.rb']) )i am getting gems missing error.</p>\n\n<pre><code>    /usr/local/lib/ruby/site_ruby/2.1.0/rubygems/dependency.rb:308:in `to_specs': Could not find 'em-synchrony' (&gt;= 1.0.0) among 175 total gem(s) (Gem::MissingSpecError)\nChecked in 'GEM_PATH=/root/.gem/ruby/2.1.0:/usr/local/lib/ruby/gems/2.1.0:/usr/local/bundle', execute `gem env` for more information\n</code></pre>\n\n<p>But its working fine when i run the specs using rspec command.</p>\n\n<p>rspec --pattern spec/apis/my_spec.rb --format nested</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1669, "user_id": 6652664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhfUI.jpg?s=128&g=1", "display_name": "sinsuren", "link": "https://stackoverflow.com/users/6652664/sinsuren"}, "is_accepted": true, "score": 4, "last_activity_date": 1475749852, "last_edit_date": 1495540840, "creation_date": 1475644425, "answer_id": 39865878, "question_id": 39865750, "link": "https://stackoverflow.com/questions/39865750/how-to-concatenate-values-inside-two-arrays-in-ruby/39865878#39865878", "title": "How to concatenate values inside two arrays in Ruby", "body": "<p>This is one of the thing you could do.</p>\n\n<pre><code>[[4,5,6], [10,25,16]].transpose.map {|x| x.reduce(:+)}\n</code></pre>\n\n<p>Even <code>inject</code> would also do the same.</p>\n\n<pre><code>[[10,20,30],[24,52,62]].transpose.map {|a| a.inject(:+)}\n</code></pre>\n\n<p>and to have more understanding. Please have a look at <a href=\"https://stackoverflow.com/questions/2682411/ruby-sum-corresponding-members-of-two-arrays\">ruby: sum corresponding members of two or more arrays</a></p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1475647204, "post_id": 39865882, "comment_id": 67020381, "body": "For a fixed number of arguments I&#39;d use <code>a.zip(b).map { |i, j| i + j }</code> instead of <code>reduce</code>."}], "tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 7, "last_activity_date": 1475644457, "creation_date": 1475644457, "answer_id": 39865882, "question_id": 39865750, "link": "https://stackoverflow.com/questions/39865750/how-to-concatenate-values-inside-two-arrays-in-ruby/39865882#39865882", "title": "How to concatenate values inside two arrays in Ruby", "body": "<p>You could <code>zip</code> and then use <code>reduce</code>:</p>\n\n<pre><code>p a.zip(b).map{|v| v.reduce(:+) }\n#=&gt; [1, 5, 7, 7, 7]\n</code></pre>\n\n<p>Or, if you're sure that array <code>a</code> and <code>b</code> will always be of equal length:</p>\n\n<pre><code>p a.map.with_index { |v, i| v + b[i] }\n#=&gt; [1, 5, 7, 7, 7]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1475644781, "creation_date": 1475644781, "answer_id": 39865938, "question_id": 39865750, "link": "https://stackoverflow.com/questions/39865750/how-to-concatenate-values-inside-two-arrays-in-ruby/39865938#39865938", "title": "How to concatenate values inside two arrays in Ruby", "body": "<pre><code>a.each_index.map { |i| a[i]+b[i] }\n  # =&gt; [1, 5, 7, 7, 7]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 4, "last_activity_date": 1475654086, "last_edit_date": 1475654086, "creation_date": 1475646010, "answer_id": 39866178, "question_id": 39865750, "link": "https://stackoverflow.com/questions/39865750/how-to-concatenate-values-inside-two-arrays-in-ruby/39866178#39866178", "title": "How to concatenate values inside two arrays in Ruby", "body": "<p>All bases seem to be covered by other answers. These are submitted for interest only:</p>\n\n<pre><code>c = b.cycle\n#=&gt; #&lt;Enumerator: [0, 5, 5, 6, 1]:cycle&gt; \na.map { |e| e + c.next }                                                         \n#=&gt; [1, 5, 7, 7, 7]\n</code></pre>\n\n<p>And another way:</p>\n\n<pre><code>a.map { |e| e + b.rotate!.last }\n#=&gt; [1, 5, 7, 7, 7] \n</code></pre>\n\n<hr>\n\n<p><strong>BENCHMARKS</strong></p>\n\n<p>Benchmarks (which I am not doing myself any favours by showing) for larger arrays.</p>\n\n<pre><code>require 'fruity'\n\na = (1..10_000).to_a.shuffle\nb = a.shuffle\n\ncompare do\n  sagar     { ar = a.dup; br = b.dup; c = br.cycle; ar.map { |e| e + c.next } }\n  sagar_2   { ar = a.dup; br = b.dup; ar.map { |e| e + br.rotate!.last } }\n  cary      { ar = a.dup; br = b.dup; ar.each_index.map { |i| ar[i]+br[i] } }\n  surya     { ar = a.dup; br = b.dup; ar.zip(br).map{|v| v.reduce(:+) } }\n  surya_2   { ar = a.dup; br = b.dup; ar.map.with_index { |v, i| v + br[i] } }\n  sinsuren  { ar = a.dup; br = b.dup; [ar, br].transpose.map {|x| x.reduce(:+)} }\n  flamine   { ar = a.dup; br = b.dup; ar.map{|i| br.shift.to_i + i }}\n  stefan    { ar = a.dup; br = b.dup; ar.zip(br).map { |i, j| i + j }}\nend\n\n#Running each test once. Test will take about 3 seconds.\n#flamine is similar to surya_2\n#surya_2 is similar to stefan\n#stefan is similar to cary\n#cary is faster than sinsuren by 3x \u00b1 1.0\n#sinsuren is similar to surya\n#surya is faster than sagar by 2x \u00b1 0.1\n#sagar is faster than sagar_2 by 15x \u00b1 1.0\n</code></pre>\n\n<p>Ran this a few times, sometimes flamine is outright fastest: <code>flamine is faster than surya_2 by 10.000000000000009% \u00b1 10.0%</code>. The caveat being that flamine's technique modifies <code>b</code> to an empty array.</p>\n"}, {"tags": [], "owner": {"reputation": 459, "user_id": 3355599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FD36Q.jpg?s=128&g=1", "display_name": "Flamine", "link": "https://stackoverflow.com/users/3355599/flamine"}, "is_accepted": false, "score": 1, "last_activity_date": 1475650218, "creation_date": 1475650218, "answer_id": 39867184, "question_id": 39865750, "link": "https://stackoverflow.com/questions/39865750/how-to-concatenate-values-inside-two-arrays-in-ruby/39867184#39867184", "title": "How to concatenate values inside two arrays in Ruby", "body": "<p>I like this variant, but its work correctly only if a.size >= b.size</p>\n\n<pre><code>a.map{|i| b.shift.to_i + i }\n</code></pre>\n"}], "owner": {"reputation": 20898, "user_id": 11194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ee76d05f9b62656b9eeaa81fe4619db?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/11194/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 39865878, "answer_count": 5, "score": 2, "last_activity_date": 1475749852, "creation_date": 1475643572, "question_id": 39865750, "link": "https://stackoverflow.com/questions/39865750/how-to-concatenate-values-inside-two-arrays-in-ruby", "title": "How to concatenate values inside two arrays in Ruby", "body": "<p>Say I have the following two arrays:</p>\n\n<pre><code>a = [1, 0, 2, 1, 6]\nb = [0, 5, 5, 6, 1]\n</code></pre>\n\n<p>I want to create (or modify a or b) an array with the <em>values</em> inside each relative index of the array to be added together, like:</p>\n\n<pre><code>[1, 5, 7, 7, 7]\n</code></pre>\n\n<p>Is there a elegant (and fast) way to do this <strong>without</strong> looping over every index in the first array and adding from the second. I have a feeling that map/reduce/inject might be a way to go here, but these methods have always seemed a bit \"magical\" to me and I never really understood them.</p>\n"}, {"tags": ["ruby", "class", "initialization"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6706328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m9uPk_m75-g/AAAAAAAAAAI/AAAAAAAAALQ/czGKLL7o9HM/photo.jpg?sz=128", "display_name": "Anjali Kumar", "link": "https://stackoverflow.com/users/6706328/anjali-kumar"}, "edited": false, "score": 0, "creation_date": 1475642881, "post_id": 39865467, "comment_id": 67018890, "body": "and what is do |student|? I&#39;m sorry i just started learning ruby. Im so confused"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1, "user_id": 6706328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m9uPk_m75-g/AAAAAAAAAAI/AAAAAAAAALQ/czGKLL7o9HM/photo.jpg?sz=128", "display_name": "Anjali Kumar", "link": "https://stackoverflow.com/users/6706328/anjali-kumar"}, "edited": false, "score": 0, "creation_date": 1475644447, "post_id": 39865467, "comment_id": 67019406, "body": "Read through the Enumerable documentation I&#39;ve linked to. It explains with many, many examples. The <code>do |...|</code> notation is how you call a block, akin to <code>function(...) {  }</code> in JavaScript."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1, "user_id": 6706328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m9uPk_m75-g/AAAAAAAAAAI/AAAAAAAAALQ/czGKLL7o9HM/photo.jpg?sz=128", "display_name": "Anjali Kumar", "link": "https://stackoverflow.com/users/6706328/anjali-kumar"}, "edited": false, "score": 1, "creation_date": 1475645200, "post_id": 39865467, "comment_id": 67019682, "body": "The block technique can be very unusual at first, but it&#39;s really the backbone of most Ruby code. Spend some time experimenting with how it works and what its limitations are."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1475641803, "creation_date": 1475641803, "answer_id": 39865467, "question_id": 39865434, "link": "https://stackoverflow.com/questions/39865434/ruby-object-initialization/39865467#39865467", "title": "Ruby object initialization", "body": "<p>You shouldn't define lists like that inside a method. Either you should pass them in, or you should have them defined in another class or module.</p>\n\n<p>For example:</p>\n\n<pre><code>students = [\n    {:firstname =&gt; \"John\", :lastname =&gt; \"LastnameJohn\",  :phonenumber =&gt; 123456789},\n    {:firstname =&gt; \"Ken\", :lastname =&gt; \"Lastnameken\",  :phonenumber =&gt; 456734244},\n    {:firstname =&gt; \"Marisa\", :lastname =&gt; \"lastnamemarisa\",  :phonenumber =&gt; 443234567},\n    {:firstname =&gt; \"Ken\", :lastname =&gt; \"Kenlastname\",  :phonenumber =&gt; 456734244}\n]\n\nclass Student\n  def initialize(list)\n    @list = list\n  end\n\n  def search(name)\n    @list.select do |student|\n      student[:firstname] == name\n    end.each do |student|\n      puts student.inspect\n    end\n  end\nend\n\na = Student.new(students)\na.search(\"John\")\n</code></pre>\n\n<p>This uses the <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html\" rel=\"nofollow\">Enumerable</a> method <code>select</code> to filter out the rows you're interested in rather than your original code.</p>\n"}, {"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1475647656, "creation_date": 1475647656, "answer_id": 39866525, "question_id": 39865434, "link": "https://stackoverflow.com/questions/39865434/ruby-object-initialization/39866525#39866525", "title": "Ruby object initialization", "body": "<p>Your program is correct. I don't get any error message when I run it. However, since <code>students</code> never changes its value, I would define it as a constant member of the class:</p>\n\n<pre><code>class Student\n\n  STUDENTS = [ .... ]\n\n  def search(name)\n      .... # do something with STUDENTS\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6706328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m9uPk_m75-g/AAAAAAAAAAI/AAAAAAAAALQ/czGKLL7o9HM/photo.jpg?sz=128", "display_name": "Anjali Kumar", "link": "https://stackoverflow.com/users/6706328/anjali-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1475647656, "creation_date": 1475641574, "question_id": 39865434, "link": "https://stackoverflow.com/questions/39865434/ruby-object-initialization", "title": "Ruby object initialization", "body": "<p>So i wrote this code and it works when i put student outside the class and pass the parameter students to search. But when i try to run it like this it says that students is undefined. I feel like I'm supposed to use the initialize method but i am not able to figure out how to use it in this situation</p>\n\n<pre><code>class Student\n\ndef search(name)\ni = 0;\n\n  students = [\n\n   {:firstname =&gt; \"John\", :lastname =&gt; \"LastnameJohn\",  :phonenumber =&gt; 123456789},\n\n   {:firstname =&gt; \"Ken\", :lastname =&gt; \"Lastnameken\",  :phonenumber =&gt; 456734244},\n\n   {:firstname =&gt; \"Marisa\", :lastname =&gt; \"lastnamemarisa\",  :phonenumber =&gt; 443234567},\n   {:firstname =&gt; \"Ken\", :lastname =&gt; \"Kenlastname\",  :phonenumber =&gt; 456734244}\n  ]\n\n  while i &lt; students.length\n    if(students[i][:firstname] == name)\n      puts students[i]\n    end\n    i = i + 1;\n  end\n end\nend\n\na = Student.new\na.search(\"John\")\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 761, "user_id": 4884692, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/118303f1846a2bdfa10163cf0a3492b5?s=128&d=identicon&r=PG&f=1", "display_name": "pronoob", "link": "https://stackoverflow.com/users/4884692/pronoob"}, "edited": false, "score": 0, "creation_date": 1475651989, "post_id": 39865763, "comment_id": 67022719, "body": "Great this works perfectly. Thanks for the additional info"}], "tags": [], "owner": {"reputation": 528, "user_id": 1366959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/106fefecb62554d83f10864b7b1c76b8?s=128&d=identicon&r=PG", "display_name": "nqngo", "link": "https://stackoverflow.com/users/1366959/nqngo"}, "is_accepted": true, "score": 1, "last_activity_date": 1475643614, "creation_date": 1475643614, "answer_id": 39865763, "question_id": 39865297, "link": "https://stackoverflow.com/questions/39865297/call-javascript-function-from-ruby-on-rails-model/39865763#39865763", "title": "Call JavaScript function from Ruby on Rails model", "body": "<p>The simplest solution to execute most common Javascript code is using <a href=\"https://github.com/rails/execjs\" rel=\"nofollow\">ExecJS</a> gem. If you are using the Rails standard gem bundle then <code>ExecJS</code> is already included with <code>Rails Coffeescript</code>. A short example:</p>\n\n<pre><code>require \"execjs\"\nExecJS.eval \"'red yellow blue'.split(' ')\"\n# =&gt; [\"red\", \"yellow\", \"blue\"]\n</code></pre>\n\n<p>The above solution is only good if you are running a prototype. In production, you would want to somehow run the user code in sandbox and preferably on the whole different server. You would also need to ensure the code won't take 100% resource of your server while executing and screen the code to ensure it won't do anything malicious.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 2870282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qXh8Y.jpg?s=128&g=1", "display_name": "Sapna Prajapati", "link": "https://stackoverflow.com/users/2870282/sapna-prajapati"}, "is_accepted": false, "score": 0, "last_activity_date": 1475648889, "creation_date": 1475648889, "answer_id": 39866837, "question_id": 39865297, "link": "https://stackoverflow.com/questions/39865297/call-javascript-function-from-ruby-on-rails-model/39866837#39866837", "title": "Call JavaScript function from Ruby on Rails model", "body": "<p>You can call javascript function in Helper class and then include that helper inside your model where you need it.</p>\n"}], "owner": {"reputation": 761, "user_id": 4884692, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/118303f1846a2bdfa10163cf0a3492b5?s=128&d=identicon&r=PG&f=1", "display_name": "pronoob", "link": "https://stackoverflow.com/users/4884692/pronoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2287, "favorite_count": 0, "accepted_answer_id": 39865763, "answer_count": 2, "score": 2, "last_activity_date": 1475648889, "creation_date": 1475640568, "question_id": 39865297, "link": "https://stackoverflow.com/questions/39865297/call-javascript-function-from-ruby-on-rails-model", "title": "Call JavaScript function from Ruby on Rails model", "body": "<p>I have built a Rails app that has an API that returns a JSON object. I want to allow users to write their own scripts and store them. These scripts will then be executed when the user makes an API call to the app and injected as part of the response.</p>\n\n<p>An example would be when a user calls my API, their javascript would be called and whatever is returned from their script would be saved as a string and used by one of my models and used as part of the JSON object - not the full response.</p>\n\n<p>I want to know how to call a javascript function from a rails model, save the output of the javascript as a string in Ruby, and then be able to process whatever is returned before making the API response.</p>\n\n<p>The current answers seem to only be related to the controllers and rendering as JS, but I would like to execute the script from the model.</p>\n\n<p>It should be something like:</p>\n\n<pre><code>string = execute_javascript(\"return 'hello world';\")\n</code></pre>\n\n<p>This is more related to pure Ruby than Rails as I am just wanting to call it from a standard Ruby class and save the output as a string. I also need to consider the security implications of doing this, but first would like to know how to do it</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1475639520, "post_id": 39865130, "comment_id": 67018033, "body": "Can you have a look at your server logs (either <code>log.development.log</code> or in your terminal window) and give us a few more lines on either side of the error that you&#39;re seeing? (It will help us pinpoint exactly where the error is coming from). Edit your question and add the data that, don&#39;t add it to comments because code-formatting is dreadful and makes it unreadable :)"}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1475639643, "post_id": 39865130, "comment_id": 67018065, "body": "Let us know how you&#39;re running that API. Are you doing it via browser address bar or are you clicking a link?"}, {"owner": {"reputation": 609, "user_id": 2654306, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ad8490d05c0467bcf7201b23f0f7fe6b?s=128&d=identicon&r=PG", "display_name": "kartik", "link": "https://stackoverflow.com/users/2654306/kartik"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1475639754, "post_id": 39865130, "comment_id": 67018089, "body": "@MarsAtomic I am running API on the browser bar. <a href=\"http://localhost:3000/roadRatings\" rel=\"nofollow noreferrer\">localhost:3000/roadRatings</a>"}, {"owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "edited": false, "score": 0, "creation_date": 1475642740, "post_id": 39865130, "comment_id": 67018838, "body": "@kartik Can you try hitting the endpoint with curl? <code>curl -X GET -H &quot;Content-Type: application&#47;json&quot; http:&#47;&#47;localhost:3000&#47;roadRatings</code>. May we also see your routes."}, {"owner": {"reputation": 609, "user_id": 2654306, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ad8490d05c0467bcf7201b23f0f7fe6b?s=128&d=identicon&r=PG", "display_name": "kartik", "link": "https://stackoverflow.com/users/2654306/kartik"}, "reply_to_user": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "edited": false, "score": 0, "creation_date": 1475644102, "post_id": 39865130, "comment_id": 67019285, "body": "@TylerFerraro Just posted the Routes in the question."}, {"owner": {"reputation": 609, "user_id": 2654306, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ad8490d05c0467bcf7201b23f0f7fe6b?s=128&d=identicon&r=PG", "display_name": "kartik", "link": "https://stackoverflow.com/users/2654306/kartik"}, "reply_to_user": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "edited": false, "score": 0, "creation_date": 1475644208, "post_id": 39865130, "comment_id": 67019317, "body": "@TylerFerraro The curl returns the HTML of the same error the browser shows"}, {"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475644680, "post_id": 39865130, "comment_id": 67019480, "body": "@kartik Please provide index view"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1475644771, "post_id": 39865130, "comment_id": 67019516, "body": "pls paste the complete model code."}, {"owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "edited": false, "score": 0, "creation_date": 1475646479, "post_id": 39865130, "comment_id": 67020125, "body": "@kartik did you overwrite the initialize method or modify the attribute setters/getters in your model? Please post your model code."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1475653046, "post_id": 39865130, "comment_id": 67023287, "body": "are you sure you&#39;re not calling <code>fetch_value</code> anywhere? Search your whole directory for the string."}], "owner": {"reputation": 609, "user_id": 2654306, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ad8490d05c0467bcf7201b23f0f7fe6b?s=128&d=identicon&r=PG", "display_name": "kartik", "link": "https://stackoverflow.com/users/2654306/kartik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 508, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475644056, "creation_date": 1475639370, "last_edit_date": 1475644056, "question_id": 39865130, "link": "https://stackoverflow.com/questions/39865130/nomethoderror-undefined-method-fetch-value-for-nilnilclass-in-rails", "title": "NoMethodError (undefined method `fetch_value&#39; for nil:NilClass) in RAILS", "body": "<p><strong>Table Name in SQL : road_ratings</strong></p>\n\n<p><strong>Route:</strong></p>\n\n<p><code>get '/roadRatings', to: \"road_ratings#index\"</code></p>\n\n<p><strong>Controller: road_ratings_controller.rb</strong></p>\n\n<pre><code>class RoadRatingsController &lt; ApplicationController\n\n    def index\n        @data = RoadRating.all\n        render json: @data\n    end\n\nend\n</code></pre>\n\n<p><strong>Model: road_rating.rb</strong></p>\n\n<pre><code>class RoadRating &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>Upon running the above API, I get the error in rails server logs</p>\n\n<pre><code>NoMethodError (undefined method `fetch_value' for nil:NilClass):\n</code></pre>\n\n<p>And following error on browser</p>\n\n<p><code>NoMethodError in RoadRatingsController#index</code></p>\n\n<p>However when I run the query <code>SELECT</code>road_ratings<code>.* FROM</code>road_ratings<code>LIMIT 1</code> generated in rails logs on SQL, I get the correct result</p>\n\n<p><strong>Rails Logs:</strong></p>\n\n<pre><code>Started GET \"/roadRatings\" for ::1 at 2016-10-04 23:55:57 -0400\nProcessing by RoadRatingsController#index as HTML\n  RoadRating Load (0.4ms)  SELECT  `road_ratings`.* FROM `road_ratings` LIMIT 1\nCompleted 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms)\n\nNoMethodError (undefined method `fetch_value' for nil:NilClass):\n  app/controllers/road_ratings_controller.rb:4:in `index'\n\n\n  Rendered /Library/Ruby/Gems/2.0.0/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.6ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/actionpack-4.2.6/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (23.1ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.3.0/lib/web_console/templates/_markup.html.erb (0.8ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.3.0/lib/web_console/templates/_inner_console_markup.html.erb within layouts/inlined_string (0.3ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.3.0/lib/web_console/templates/_prompt_box_markup.html.erb within layouts/inlined_string (0.3ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.3.0/lib/web_console/templates/style.css.erb within layouts/inlined_string (0.4ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.3.0/lib/web_console/templates/console.js.erb within layouts/javascript (16.7ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.3.0/lib/web_console/templates/main.js.erb within layouts/javascript (0.3ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.3.0/lib/web_console/templates/error_page.js.erb within layouts/javascript (0.7ms)\n  Rendered /Library/Ruby/Gems/2.0.0/gems/web-console-2.3.0/lib/web_console/templates/index.html.erb (39.4ms)\n</code></pre>\n\n<p>Rake Routes:</p>\n\n<pre><code>Kartiks-MacBook-Air:Mayor_project kartik$ rake routes\n     Prefix Verb URI Pattern            Controller#Action\n            GET  /                      home#default\n    streets GET  /streets(.:format)     streets#index\n            GET  /street/:id(.:format)  streets#show\n   potholes GET  /potholes(.:format)    potholes#index\nroadRatings GET  /roadRatings(.:format) road_ratings#index\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 4377, "user_id": 1154018, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b815b5d6f9f344aad0c020e6782fb919?s=128&d=identicon&r=PG", "display_name": "jimcgh", "link": "https://stackoverflow.com/users/1154018/jimcgh"}, "edited": false, "score": 0, "creation_date": 1475640444, "post_id": 39865071, "comment_id": 67018264, "body": "Finally this is fixed for me. For anyone else facing the same issue, what worked for me is <a href=\"https://github.com/tenex/rails-assets/issues/239#issuecomment-87108900\" rel=\"nofollow noreferrer\">github.com/tenex/rails-assets/issues/239#issuecomment-871089&zwnj;&#8203;00</a> ."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6872206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d3be449cac6f2f988344f341129dcf2?s=128&d=identicon&r=PG", "display_name": "Rhyan Vargas", "link": "https://stackoverflow.com/users/6872206/rhyan-vargas"}, "is_accepted": false, "score": 1, "last_activity_date": 1475649165, "creation_date": 1475649165, "answer_id": 39866914, "question_id": 39865071, "link": "https://stackoverflow.com/questions/39865071/ssl-certificate-verify-failed-error-when-trying-to-install-gems/39866914#39866914", "title": "SSL certificate verify failed error when trying to install gems", "body": "<p>I had this same problem, the only way it work for me is to download the most updated rubygem from official website, then running the following command:</p>\n\n<ol>\n<li>Download gem from <a href=\"https://rubygems.org/pages/download#formats\" rel=\"nofollow\">rubygems</a> </li>\n<li>Unpack rubygem zip file into any directory </li>\n<li><code>cd</code> into the unpacked rubygem folder </li>\n<li>Install with: <code>ruby setup.rb</code> (you may need admin/root privilege)</li>\n<li>Enter <code>sudo gem update --system</code> (to test you have most updated rubygem)</li>\n</ol>\n\n<p>...After last step, it responded with <code>Latest version currently installed. Aborting</code> yay! Hope this helps :)</p>\n"}], "owner": {"reputation": 4377, "user_id": 1154018, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b815b5d6f9f344aad0c020e6782fb919?s=128&d=identicon&r=PG", "display_name": "jimcgh", "link": "https://stackoverflow.com/users/1154018/jimcgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1060, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1475649165, "creation_date": 1475638919, "question_id": 39865071, "link": "https://stackoverflow.com/questions/39865071/ssl-certificate-verify-failed-error-when-trying-to-install-gems", "title": "SSL certificate verify failed error when trying to install gems", "body": "<p>Im on OSX 10.10.5 and using RVM and ruby version 2.3.1. When i run <code>gem install &lt;gem_name&gt;</code> i get the following error</p>\n\n<blockquote>\n  <p>Unable to download data from <a href=\"https://rubygems.org/\" rel=\"nofollow\">https://rubygems.org/</a> - SSL_connect\n  returned=1 errno=0 state=error: certificate verify failed\n  (<a href=\"https://api.rubygems.org/specs.4.8.gz\" rel=\"nofollow\">https://api.rubygems.org/specs.4.8.gz</a>)</p>\n</blockquote>\n\n<p>I tried with different versions of ruby but still get the same error. When i run the following command</p>\n\n<pre><code>rvm osx-ssl-certs status all\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Certificates for /etc/openssl/cert.pem: Up to date.\nCertificates for /usr/local/etc/openssl/cert.pem: Up to date.\n</code></pre>\n\n<p>I have done <code>rvm osx-ssl-certs update all</code> again but still the error persists. Also trying to do <code>gem update --system</code> gives the same error. </p>\n\n<p>The output of <code>ruby -ropenssl -e 'p OpenSSL::OPENSSL_VERSION'</code> is <code>\"OpenSSL 1.0.2h  3 May 2016\"</code></p>\n\n<p>Any way to fix this  ?</p>\n\n<p>Thank You</p>\n"}, {"tags": ["arrays", "ruby", "class", "scope", "block"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1475639213, "creation_date": 1475639213, "answer_id": 39865113, "question_id": 39865044, "link": "https://stackoverflow.com/questions/39865044/ruby-scope-issues-with-yield-and-classes/39865113#39865113", "title": "Ruby scope issues with yield and classes", "body": "<p>Since you've defined it in the <code>Array</code> context, you need to call it that way as well:</p>\n\n<pre><code>[1,2,3,4].my_each do |i|\n  puts i\nend\n</code></pre>\n\n<p>That calls the <code>my_each</code> method defined on an Array instance. You even have this later in your code, but the earlier error blocked it.</p>\n\n<p>If you got that second error it's because you tried:</p>\n\n<pre><code>Array.my_each([1,2,3,4])\n</code></pre>\n\n<p>That's not correct, you'd need to define a class method with the <code>self.</code> prefix if you wanted that to work.</p>\n"}, {"comments": [{"owner": {"reputation": 1443, "user_id": 4064922, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-2_1oNmjkoec/AAAAAAAAAAI/AAAAAAAAAXE/OTUcRfaAZeM/photo.jpg?sz=128", "display_name": "Aboozar Rajabi", "link": "https://stackoverflow.com/users/4064922/aboozar-rajabi"}, "edited": false, "score": 0, "creation_date": 1478969776, "post_id": 39865118, "comment_id": 68367386, "body": "Is it possible to use map in this form in a scope? I have a array of arrays, and want to work with in a scope."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1443, "user_id": 4064922, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-2_1oNmjkoec/AAAAAAAAAAI/AAAAAAAAAXE/OTUcRfaAZeM/photo.jpg?sz=128", "display_name": "Aboozar Rajabi", "link": "https://stackoverflow.com/users/4064922/aboozar-rajabi"}, "edited": false, "score": 0, "creation_date": 1478975630, "post_id": 39865118, "comment_id": 68369304, "body": "@AboozarRajabi, can you give me an example?"}, {"owner": {"reputation": 1443, "user_id": 4064922, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-2_1oNmjkoec/AAAAAAAAAAI/AAAAAAAAAXE/OTUcRfaAZeM/photo.jpg?sz=128", "display_name": "Aboozar Rajabi", "link": "https://stackoverflow.com/users/4064922/aboozar-rajabi"}, "edited": false, "score": 0, "creation_date": 1478976132, "post_id": 39865118, "comment_id": 68369451, "body": "I have an array stored in a field like this: [[&quot;2&quot;,&quot;3&quot;],[&quot;4&quot;,&quot;1&quot;]], suppose that the first elements are user ids (2 , 4), and the second ones are number of their siblings, I want to search for a specific id to see if it&#39;s in the array or not, and if it&#39;s in the array, what&#39;s the second element related to this id?!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1443, "user_id": 4064922, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-2_1oNmjkoec/AAAAAAAAAAI/AAAAAAAAAXE/OTUcRfaAZeM/photo.jpg?sz=128", "display_name": "Aboozar Rajabi", "link": "https://stackoverflow.com/users/4064922/aboozar-rajabi"}, "edited": false, "score": 0, "creation_date": 1479007598, "post_id": 39865118, "comment_id": 68376625, "body": "@AboozarRajabi, that doesn&#39;t seem to have much to do with this question, but if <code>arr = [[&quot;2&quot;,&quot;3&quot;],[&quot;4&quot;,&quot;1&quot;]]</code> and <code>target_id=&quot;4&quot;</code>, that would just be <code>_, sibs = arr.find { |id,_| id==target_id };  sibs</code>. If <code>arr</code> does not have an element <code>[id, sibs]</code> for which <code>id==target_id</code>, <code>sibs</code> will equal <code>nil</code>."}, {"owner": {"reputation": 1443, "user_id": 4064922, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-2_1oNmjkoec/AAAAAAAAAAI/AAAAAAAAAXE/OTUcRfaAZeM/photo.jpg?sz=128", "display_name": "Aboozar Rajabi", "link": "https://stackoverflow.com/users/4064922/aboozar-rajabi"}, "edited": false, "score": 0, "creation_date": 1479294962, "post_id": 39865118, "comment_id": 68494062, "body": "See this question plz: <a href=\"http://stackoverflow.com/questions/40614678/rails-how-to-use-scope-to-find-an-element-in-array-of-arrays\" title=\"rails how to use scope to find an element in array of arrays\">stackoverflow.com/questions/40614678/&hellip;</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1443, "user_id": 4064922, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-2_1oNmjkoec/AAAAAAAAAAI/AAAAAAAAAXE/OTUcRfaAZeM/photo.jpg?sz=128", "display_name": "Aboozar Rajabi", "link": "https://stackoverflow.com/users/4064922/aboozar-rajabi"}, "edited": false, "score": 0, "creation_date": 1479317908, "post_id": 39865118, "comment_id": 68509615, "body": "@Aboozar, sorry but I don&#39;t know Rails."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1478975216, "last_edit_date": 1478975216, "creation_date": 1475639263, "answer_id": 39865118, "question_id": 39865044, "link": "https://stackoverflow.com/questions/39865044/ruby-scope-issues-with-yield-and-classes/39865118#39865118", "title": "Ruby scope issues with yield and classes", "body": "<pre><code>class Array\n  def my_each\n    to_enum\n  end\nend\n\nenum = [1,2,3,4].my_each \n  #=&gt; #&lt;Enumerator: [1, 2, 3, 4]:each&gt; \nenum.to_a\n  #=&gt; [1, 2, 3, 4] \nenum.map { |n| n*2 }\n  #=&gt; [2, 4, 6, 8]\nenum.next\n  #=&gt; 1 \nenum.next\n  #=&gt; 2 \nenum.next\n  #=&gt; 3 \nenum.next\n  #=&gt; 4 \nenum.next\n  #=&gt; StopIteration: iteration reached an end\n</code></pre>\n\n<p></p>\n\n<pre><code>Array.instance_method(:to_enum).owner\n  #=&gt; Kernel \n</code></pre>\n\n<p>but <code>Kernel</code>'s instance methods are documented in <code>Object</code>, so see  <a href=\"http://ruby-doc.org/core-2.3.0/Object.html#method-i-to_enum\" rel=\"nofollow noreferrer\">Object#to_enum</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1475664281, "creation_date": 1475664281, "answer_id": 39871865, "question_id": 39865044, "link": "https://stackoverflow.com/questions/39865044/ruby-scope-issues-with-yield-and-classes/39871865#39871865", "title": "Ruby scope issues with yield and classes", "body": "<p>This has nothing to do with scope, blocks, or <code>yield</code>. You have defined your method in the <code>Array</code> class, which means that it is available for all <code>Array</code>s, but you aren't calling it on an <code>Array</code>, you are calling it on <code>main</code>, which is a direct instance of <code>Object</code>, not <code>Array</code>.</p>\n\n<blockquote>\n  <p>I tried moving the block inside the Array class under the method but then got the following:</p>\n\n<pre><code>\"Undefined method my_each for Array Class\"\n</code></pre>\n</blockquote>\n\n<p>In that case, you are calling it on <code>Array</code>, which is a direct instance of <code>Class</code> and also not an <code>Array</code>.</p>\n\n<blockquote>\n  <p>My block and method have the same name</p>\n</blockquote>\n\n<p>Blocks don't have names.</p>\n\n<pre><code>[1,2,3,4].my_each\n</code></pre>\n\n<p>Here, you are calling the method on an <code>Array</code>, but your method requires a block, which you forgot to pass. Therefore, you will get a different error message.</p>\n"}, {"tags": [], "owner": {"reputation": 228, "user_id": 4891793, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153039879553600/picture?type=large", "display_name": "som4ik", "link": "https://stackoverflow.com/users/4891793/som4ik"}, "is_accepted": false, "score": 0, "last_activity_date": 1475690858, "last_edit_date": 1495535430, "creation_date": 1475690858, "answer_id": 39880915, "question_id": 39865044, "link": "https://stackoverflow.com/questions/39865044/ruby-scope-issues-with-yield-and-classes/39880915#39880915", "title": "Ruby scope issues with yield and classes", "body": "<p>i guess the best way is to do this: </p>\n\n<pre><code>Array.class_eval do\n  def my_each\n    # do here what ever you want \n    #( you can us self if you want to handle the current object)\n  end\nend\n\n[1,3,3,4].my_each\n</code></pre>\n\n<p>or use <a href=\"https://stackoverflow.com/questions/26169538/trying-to-write-my-own-all-method-in-ruby\">this</a> reference for best answer. hope i it will help you</p>\n"}], "owner": {"reputation": 219, "user_id": 4744594, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42e4a92b61881cac95df5f9d764abcce?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4744594/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1478975216, "creation_date": 1475638739, "question_id": 39865044, "link": "https://stackoverflow.com/questions/39865044/ruby-scope-issues-with-yield-and-classes", "title": "Ruby scope issues with yield and classes", "body": "<p>I am trying to create my own each method for the array class. Code is as follows:</p>\n\n<pre><code>class Array\n\n  def my_each\n    i = 0\n    while i &lt; self.length\n      yield(self[i])\n      i += 1\n    end\n    self\n  end\nend\n\nmy_each {|i| puts i}\n\n\n\n[1,2,3,4].my_each\n</code></pre>\n\n<p>This seems to me like it should work correctly. However, I am getting the message </p>\n\n<pre><code>\"Undefined method my_each for main: Object\"\n</code></pre>\n\n<p>I tried moving the block inside the Array class under the method but then got the following:</p>\n\n<pre><code>\"Undefined method my_each for Array Class\"\n</code></pre>\n\n<p>My block and method have the same name so it seems to me like this would be an issue of scope. How exactly do blocks behave with method is being defined within a class? Is it advisable to do something like this or simply include the block directly inside my method?</p>\n"}, {"tags": ["ruby", "regex", "rspec"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1475635602, "post_id": 39864608, "comment_id": 67017075, "body": "is <code>NewsletterImage</code> the folder name you want to extract?"}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1475635765, "post_id": 39864608, "comment_id": 67017105, "body": "The folder name will be <code>NewsletterImage_abc</code>, <code>NewsletterImage_def</code>or ` <code>NewsletterImage_xyz</code>. I need to get all of them."}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1475636141, "post_id": 39864608, "comment_id": 67017195, "body": "try <code>&#47;NewsletterImage_.+&#47;</code> as your regex."}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1475636150, "post_id": 39864608, "comment_id": 67017197, "body": "I found out <code>Dir[&quot;#{Rails.root}&#47;public&#47;NewsletterImage*&quot;]</code> will work, but why others fail?"}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1475636336, "post_id": 39864608, "comment_id": 67017237, "body": "I am not sure this it correct to type, but <code>Dir[&quot;#{Rails.root}&#47;public&#47;&#47;NewsletterImage_.+&#47;&quot;] </code> return empty array."}], "answers": [{"comments": [{"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1475647245, "post_id": 39865085, "comment_id": 67020397, "body": "So <code>.*</code> accidentally  matches both regular expression. Thanks, I will try <code>grep</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1475649019, "post_id": 39865085, "comment_id": 67021130, "body": "Yeah, <code>.*</code> in wildcards means &quot;a dot followed by zero or more of any character&quot; while <code>.*</code> in a regular expression means &quot;zero or more of any character&quot;. The confusion is understandable."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1475639025, "creation_date": 1475639025, "answer_id": 39865085, "question_id": 39864608, "link": "https://stackoverflow.com/questions/39864608/rails-write-regular-expression-to-get-folder-name/39865085#39865085", "title": "Rails write regular expression to get folder name", "body": "<p><a href=\"https://ruby-doc.org/core-2.2.0/Dir.html#method-c-5B-5D\" rel=\"nofollow\"><code>Dir[]</code></a> doesn't take a regular expression, it takes a shell wildcard expression. These might look superficially similar, especially with <code>.*</code> being a common feature in both, but they're not the same.</p>\n\n<p>If you want to use a regular expression you have to fetch all entries and then filter them with something like <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-grep\" rel=\"nofollow\"><code>grep</code></a>.</p>\n"}], "owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 39865085, "answer_count": 1, "score": 1, "last_activity_date": 1475639025, "creation_date": 1475635210, "last_edit_date": 1475635927, "question_id": 39864608, "link": "https://stackoverflow.com/questions/39864608/rails-write-regular-expression-to-get-folder-name", "title": "Rails write regular expression to get folder name", "body": "<p>This is a simple question, I want to clean up carrierwave picture after the Rspec test.</p>\n\n<p>The picture file is in <code>public/NewsletterImage_809abef471699025f5bb396d04dfd4f0\"</code>, the string behind <code>NewsletterImage</code> will be a random string.</p>\n\n<p>I want to get the folder name by <code>regular expression</code>, but it didn't work.</p>\n\n<p>I've tried this</p>\n\n<pre><code>Dir[\"#{Rails.root}/public/^NewsletterImage\"]\n=&gt; []\nDir[\"#{Rails.root}/public/NewsletterImage.*\"]\n=&gt; []\n</code></pre>\n\n<p>I am confused, because I use <a href=\"http://rubular.com/r/sdD1ztrymX\" rel=\"nofollow\">Rubular</a> and it can extract these names.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "carrierwave", "multifile-uploader"], "comments": [{"owner": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 0, "creation_date": 1475638072, "post_id": 39864358, "comment_id": 67017676, "body": "If you can afford it - buy Rails in Acition 4 - turn to page 299 - they handle this exact problem two ways - you can do it as a fixed number of attachments alloed and screen for them not being used OR you can use fancy jquery and AJAX to allow them to add as many attachments as they want."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1475653322, "post_id": 39864358, "comment_id": 67023452, "body": "including your code snippets is important; but for the sake of a Rails question on StackOverflow it&#39;s best to include only the relevant portions. You haven&#39;t given much space to describing where the problem lies (or an error)."}], "owner": {"reputation": 17, "user_id": 6796020, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-gE777472W04/AAAAAAAAAAI/AAAAAAAAAHI/xkjRXNrLEdo/photo.jpg?sz=128", "display_name": "Mike Stamb", "link": "https://stackoverflow.com/users/6796020/mike-stamb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475639742, "creation_date": 1475633030, "last_edit_date": 1475639742, "question_id": 39864358, "link": "https://stackoverflow.com/questions/39864358/rails-4-multiple-image-uploading", "title": "rails 4 multiple image uploading", "body": "<p>Currently the admin can create an assignment with only one image being uploaded. I am trying to let the admin upload multiple files/images for users to see on the assignment show page. I've seen other ways of achieving this but I cannot find a way to implement it into my application without breaking it.</p>\n\n<p><strong>controller: assignments_controller.rb</strong></p>\n\n<pre><code>class AssignmentsController &lt; ApplicationController\n  before_action :authenticate_user!\n  before_filter :admin_access, only: [:new, :create, :edit, :update, :destroy]\n\n\n    def index\n     @assignments = Assignment.all.order(\"created_at DESC\")\n    end\n\n\n   def show\n     @assignment = Assignment.find(params[:id])\n   end\n\n   def new\n     @assignment = Assignment.new\n   end  \n\n   def create\n     @assignment = current_user.assignments.build\n     @assignment.name = params[:assignment][:name]\n     @assignment.description = params[:assignment][:description]\n     @assignment.picture = params[:assignment][:picture]\n\n\n     if @assignment.save\n       flash[:notice] = \"Assignment was saved successfully.\"\n       redirect_to @assignment\n     else\n       flash.now[:alert] = \"Error creating assignment. Please make sure there is a name and description.\"\n       render :new\n     end\n   end\n\n     def edit\n     @assignment = Assignment.find(params[:id])\n     end\n\n      def update\n     @assignment = Assignment.find(params[:id])\n\n     @assignment.name = params[:assignment][:name]\n     @assignment.description = params[:assignment][:description]\n     @assignment.picture = params[:assignment][:picture]\n\n     if @assignment.save\n        flash[:notice] = \"Assignment was updated successfully.\"\n       redirect_to @assignment\n     else\n       flash.now[:alert] = \"Error saving assignment. Please try again.\"\n       render :edit\n     end\n      end\n\n   def destroy\n     @assignment = Assignment.find(params[:id])\n\n     if @assignment.destroy\n       flash[:notice] = \"\\\"#{@assignment.name}\\\" was deleted successfully.\"\n       redirect_to action: :index\n     else\n       flash.now[:alert] = \"There was an error deleting the assignment.\"\n       render :show\n     end\n   end\n\n     private \n\n     def assignment_params\n         params.require(:assignment).permit(:name, :description, :picture)\n     end\nend\n</code></pre>\n\n<p><strong>model: assignment.rb</strong></p>\n\n<pre><code>class Assignment &lt; ActiveRecord::Base\n        has_many :submits, dependent: :destroy\n        belongs_to :user\n        validates :name, length: { minimum: 1, maximum:120 }\n        validates :description, length: { minimum: 1 }\n        mount_uploader :picture, AssignmentpicUploader\nend\n</code></pre>\n\n<p><em>The submits model/controller submit the students work to the admin</em></p>\n\n<p><strong>controller: submits</strong></p>\n\n<pre><code>class SubmitsController &lt; ApplicationController\n  before_action :authenticate_user!\n  load_and_authorize_resource param_method: :my_sanitizer\n  load_and_authorize_resource :through =&gt; :current_user\n\n\n  def index\n      @submits = Submit.all.order(\"created_at DESC\")\n  end\n\n   def show\n     @submit = Submit.find(params[:id])\n   end\n\n   def new\n      @submit = current_user.submits.build\n   end\n\n   def create\n      @submit = current_user.submits.build(submit_params)\n\n      if @submit.save\n         redirect_to submits_path, notice: \"The assignment #{@submit.name} has been uploaded.\"\n      else\n         render \"new\"\n      end\n\n   end\n\n   def destroy\n      @submit = Submit.find(params[:id])\n      @submit.destroy\n      redirect_to submits_path, notice:  \"The assignment #{@submit.name} has been deleted.\"\n   end\n\n   private\n      def submit_params\n      params.require(:submit).permit(:name, :attachment)\n      end\n\nend\n</code></pre>\n\n<p><strong>model: submit.rb</strong></p>\n\n<pre><code>class Submit &lt; ActiveRecord::Base\n    belongs_to :assignment\n    belongs_to :user\n    validates :name, presence: true # Make sure the owner's name is present.\n    mount_uploader :attachment, AttachmentUploader # Tells rails to use this uploader for this model.\nend\n</code></pre>\n\n<p><strong>uploader: assignmentpic_uploader.rb</strong></p>\n\n<pre><code># encoding: utf-8\n\nclass AssignmentpicUploader &lt; CarrierWave::Uploader::Base\n\n\n  include CarrierWave::MiniMagick\n\n\n   storage :file\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  # Create different versions of your uploaded files:\n  version :large do\n     process :resize_to_fit =&gt; [500, 700]\n  end\n\n  # Add a white list of extensions which are allowed to be uploaded.\n   def extension_white_list\n     %w(jpg jpeg gif png)\n   end\n\nend\n</code></pre>\n\n<p><strong>views/assignments:</strong></p>\n\n<p>edit.html.erb</p>\n\n<pre><code>&lt;h1&gt;Edit Assignment&lt;/h1&gt;\n\n &lt;div class=\"row\"&gt;\n   &lt;div class=\"col-md-4\"&gt;\n     &lt;p&gt;Guidelines for topics:&lt;/p&gt;\n     &lt;ul&gt;\n       &lt;li&gt;Make sure the topic is appropriate.&lt;/li&gt;\n       &lt;li&gt;Never insult dogs.&lt;/li&gt;\n       &lt;li&gt;Smile when you type.&lt;/li&gt;\n     &lt;/ul&gt;\n   &lt;/div&gt;\n   &lt;div class=\"col-md-8\"&gt;\n     &lt;%= form_for @assignment do |f| %&gt;\n       &lt;div class=\"form-group\"&gt;\n         &lt;%= f.label :name %&gt;\n         &lt;%= f.text_field :name, class: 'form-control', placeholder: \"Enter assignment name\" %&gt;\n       &lt;/div&gt;\n       &lt;div class=\"form-group\"&gt;\n         &lt;%= f.label :description %&gt;\n         &lt;%= f.text_area :description, rows: 8, class: 'form-control', placeholder: \"Enter assignment description\" %&gt;\n       &lt;/div&gt;\n       &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :picture %&gt;\n      &lt;%= f.file_field :picture %&gt;\n      &lt;/div&gt;\n      &lt;br /&gt;\n       &lt;%= f.submit \"Save\", class: 'button' %&gt;\n     &lt;% end %&gt;\n   &lt;/div&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>index.html.erb</p>\n\n<pre><code>  &lt;div class=\"col-lg-12 text-center\"&gt;\n&lt;h1&gt;Assignments \n\n    &lt;% if current_user.admin %&gt;\n     &lt;%= link_to \"New Assignment\", new_assignment_path, class: 'btn btn-success' %&gt;\n     &lt;% end %&gt;\n        &lt;hr&gt;\n&lt;/h1&gt;\n  &lt;/div&gt;\n\n &lt;div class=\"row\"&gt;\n   &lt;div class=\"col-md-10\"&gt;\n &lt;!-- #7 --&gt;\n     &lt;% @assignments.each do |assignment| %&gt;\n       &lt;div class=\"media\"&gt;\n         &lt;div class=\"media-body\"&gt;\n           &lt;h3 class=\"media-heading\"&gt;\n &lt;!-- #8 &lt;--&gt; \n             &lt;%= link_to assignment.name, assignment %&gt;\n           &lt;/h3&gt;\n                                   &lt;!-- Date/Time --&gt;\n        &lt;p&gt;&lt;span class=\"glyphicon glyphicon-time\"&gt;&lt;/span&gt; \n        &lt;%= time_ago_in_words(assignment.created_at) %&gt; ago\n        &lt;/p&gt;\n           &lt;small&gt;\n             &lt;%= assignment.description %&gt;\n           &lt;/small&gt;\n         &lt;/div&gt;\n       &lt;/div&gt;\n       &lt;hr&gt;\n     &lt;% end %&gt;\n   &lt;/div&gt;\n   &lt;br&gt;\n\n   &lt;/div&gt;\n</code></pre>\n\n<p>new.html.erb</p>\n\n<pre><code>&lt;h1&gt;New Assignment&lt;/h1&gt;\n\n &lt;div class=\"row\"&gt;\n   &lt;div class=\"col-md-4\"&gt;\n     &lt;p&gt;Guidelines for topics:&lt;/p&gt;\n     &lt;ul&gt;\n       &lt;li&gt;Make sure the topic is appropriate.&lt;/li&gt;\n       &lt;li&gt;Never insult dogs.&lt;/li&gt;\n       &lt;li&gt;Smile when you type.&lt;/li&gt;\n     &lt;/ul&gt;\n   &lt;/div&gt;\n   &lt;div class=\"col-md-8\"&gt;\n     &lt;%= form_for @assignment do |f| %&gt;\n       &lt;div class=\"form-group\"&gt;\n         &lt;%= f.label :name %&gt;\n         &lt;%= f.text_field :name, class: 'form-control', placeholder: \"Enter assignment name\" %&gt;\n       &lt;/div&gt;\n       &lt;div class=\"form-group\"&gt;\n         &lt;%= f.label :description %&gt;\n         &lt;%= f.text_area :description, rows: 8, class: 'form-control', placeholder: \"Enter assignment description\" %&gt;\n       &lt;/div&gt;\n       &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :picture %&gt;\n      &lt;%= f.file_field :picture %&gt;\n      &lt;/div&gt;\n      &lt;br /&gt;\n       &lt;%= f.submit \"Save\", class: 'button' %&gt;\n     &lt;% end %&gt;\n   &lt;/div&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>show.html.erb</p>\n\n<pre><code> &lt;h1&gt;&lt;%= @assignment.name %&gt;\n\n &lt;% if current_user.admin %&gt;\n    &lt;%= link_to \"Edit Assignment\", edit_assignment_path, class: 'btn btn-success btn-sm round' %&gt;\n    &lt;%= link_to \"Delete Assignment\", @assignment, method: :delete, class: 'btn btn-danger btn-sm round ', data: { confirm: 'Are you sure you want to delete this assignment?' } %&gt;\n&lt;% end %&gt;\n &lt;/h1&gt;\n &lt;div class=\"row\"&gt;\n   &lt;div class=\"col-md-8\"&gt;\n     &lt;p class=\"lead\"&gt;&lt;%= @assignment.description %&gt;&lt;/p&gt;\n &lt;!-- #10 --&gt;\n     &lt;% @assignment.submits.each do |submit| %&gt;\n       &lt;div class=\"media\"&gt;\n         &lt;div class=\"media-body\"&gt;\n           &lt;h4 class=\"media-heading\"&gt;\n             &lt;%= link_to submit.name, submit %&gt;\n           &lt;/h4&gt;\n         &lt;/div&gt;\n       &lt;/div&gt;\n     &lt;% end %&gt;\n   &lt;/div&gt;\n\n\n   &lt;div id=\"img\"&gt;\n    &lt;%= image_tag @assignment.picture.url(:large) %&gt;\n  &lt;/div&gt;\n\n  &lt;/br&gt;\n   &lt;div class=\"col-md-4\"&gt;\n     &lt;%= link_to \"Submit Assignment\", new_submit_path(@assignment), class: 'button' %&gt;\n   &lt;/div&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p><strong>views/submits:</strong></p>\n\n<p>index.html.erb</p>\n\n<pre><code>&lt;div class=\"col-lg-12 text-center\"&gt;\n   &lt;h1&gt;Student Work&lt;/h1&gt;\n   &lt;hr&gt;\n&lt;/div&gt;\n\n &lt;% if current_user.admin %&gt;\n&lt;small&gt;Hold \"CTRL\" + \"F\" to search for assignment or student name.&lt;/small&gt;\n &lt;% end %&gt;\n&lt;br /&gt;\n&lt;br /&gt;\n\n&lt;table class = \"table table-bordered table-striped\"&gt;\n   &lt;thead&gt;\n      &lt;tr&gt;\n         &lt;th&gt;Name&lt;/th&gt;\n         &lt;th&gt;View Assignments&lt;/th&gt;\n         &lt;th&gt;Delete&lt;/th&gt;\n      &lt;/tr&gt;\n   &lt;/thead&gt;\n\n   &lt;tbody&gt;\n      &lt;% @submits.each do |submit| %&gt;\n\n         &lt;tr&gt;\n            &lt;% if can? :destroy, submit %&gt;\n            &lt;td&gt;&lt;%= submit.name %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= link_to \"View Assignment\", submit.attachment_url %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= button_to \"Delete\",  submit, method: :delete, class: \"button\", data: { confirm: \"Are you sure that you wish to delete #{submit.name}?\" } %&gt;&lt;/td&gt;\n            &lt;% end %&gt;\n         &lt;/tr&gt;\n\n      &lt;% end %&gt;\n   &lt;/tbody&gt;\n\n&lt;/table&gt;\n</code></pre>\n\n<p>new.html.erb</p>\n\n<pre><code>&lt;div class=\"text-center\"&gt;\n&lt;h1&gt;Submit Assignment&lt;/h1&gt;\n&lt;/div&gt;\n&lt;hr&gt;\n\n&lt;% if !@submit.errors.empty? %&gt;\n   &lt;div class = \"alert alert-error\"&gt;\n\n      &lt;ul&gt;\n         &lt;% @submit.errors.full_messages.each do |msg| %&gt;\n            &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n         &lt;% end %&gt;\n      &lt;/ul&gt;\n\n   &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;div class = \"well\"&gt;\n   &lt;%= form_for @submit, html: { multipart: true } do |f| %&gt;\n      &lt;%= f.label :name %&gt;\n      &lt;%= f.text_field :name %&gt;\n      &lt;br /&gt;\n      &lt;%= f.label :attachment %&gt;\n      &lt;%= f.file_field :attachment %&gt;\n      &lt;br /&gt;\n      &lt;%= f.submit \"Save\", class: \"button\" %&gt;\n   &lt;% end %&gt;\n   &lt;/div&gt;\n\n   &lt;p&gt;Please include \"ASSIGNMENT NAME - YOUR NAME\" in the field above&lt;/p&gt;\n\n   &lt;br /&gt;\n   &lt;p&gt; Example:&lt;/p&gt;\n\n   &lt;small&gt; assignment 1 - Bob Smith&lt;/small&gt;\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code># encoding: UTF-8\n# This file is auto-generated from the current state of the database. Instead\n# of editing this file, please use the migrations feature of Active Record to\n# incrementally modify your database, and then regenerate this schema definition.\n#\n# Note that this schema.rb definition is the authoritative source for your\n# database schema. If you need to create the application database on another\n# system, you should be using db:schema:load, not running all the migrations\n# from scratch. The latter is a flawed and unsustainable approach (the more migrations\n# you'll amass, the slower it'll run and the greater likelihood for issues).\n#\n# It's strongly recommended that you check this file into your version control system.\n\nActiveRecord::Schema.define(version: 20160930021506) do\n\n  create_table \"articles\", force: :cascade do |t|\n    t.string   \"title\"\n    t.text     \"body\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer  \"user_id\"\n  end\n\n  create_table \"assignments\", force: :cascade do |t|\n    t.string   \"name\"\n    t.text     \"description\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n    t.integer  \"user_id\"\n    t.string   \"picture\"\n  end\n\n  add_index \"assignments\", [\"user_id\"], name: \"index_assignments_on_user_id\"\n\n  create_table \"clients\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"email\"\n    t.text     \"message\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.string   \"phone\"\n  end\n\n  create_table \"comments\", force: :cascade do |t|\n    t.text     \"body\"\n    t.integer  \"user_id\"\n    t.integer  \"article_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  add_index \"comments\", [\"article_id\"], name: \"index_comments_on_article_id\"\n  add_index \"comments\", [\"user_id\"], name: \"index_comments_on_user_id\"\n\n  create_table \"contacts\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"email\"\n    t.text     \"message\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"submits\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"attachment\"\n    t.integer  \"assignment_id\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\",    null: false\n    t.datetime \"updated_at\",    null: false\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"username\",               default: \"\",    null: false\n    t.string   \"email\",                  default: \"\",    null: false\n    t.string   \"encrypted_password\",     default: \"\",    null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,     null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.string   \"confirmation_token\"\n    t.datetime \"confirmed_at\"\n    t.datetime \"confirmation_sent_at\"\n    t.string   \"unconfirmed_email\"\n    t.datetime \"created_at\",                             null: false\n    t.datetime \"updated_at\",                             null: false\n    t.boolean  \"admin\",                  default: false\n    t.string   \"firstname\"\n    t.string   \"lastname\"\n  end\n\n  add_index \"users\", [\"confirmation_token\"], name: \"index_users_on_confirmation_token\", unique: true\n  add_index \"users\", [\"email\"], name: \"index_users_on_email\", unique: true\n  add_index \"users\", [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n\nend\n</code></pre>\n\n<p>sorry if this is too much or too little information.\nThank you in advance too all the wonderful people here willing to lend a helping hand.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 0, "creation_date": 1475632041, "post_id": 39864123, "comment_id": 67016331, "body": "Find all the working hours of the vendor - get the current hour - loop through the records until you come upon the current hour being between the open and close time of a records - if you don&#39;t get a positive return - the vendor is closed (i had a wacky idea involving converting all the entries into an array of numbers that the vendor is open but that makes no sense) - quick question - day of the week doesn&#39;t matter?"}, {"owner": {"reputation": 483, "user_id": 1301037, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2eb1b2da59467d61d074f16e20a93af7?s=128&d=identicon&r=PG", "display_name": "user1301037", "link": "https://stackoverflow.com/users/1301037/user1301037"}, "reply_to_user": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 0, "creation_date": 1475633468, "post_id": 39864123, "comment_id": 67016630, "body": "Yes, the day of week is the day on integer data table (0 to 6).  I thought to do something like that, but before loop through the records until you come upon the current day of week and after the current time.  But i&#39;m a pretty new to ROR/ruby. I&#39;m not figured out how can i do that.  Something like   Time.current.wday == working_hour.day   open_time &lt; Time.current &amp;&amp; Time.current &gt; close.time"}, {"owner": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 0, "creation_date": 1475633606, "post_id": 39864123, "comment_id": 67016658, "body": "Actually - I&#39;d review the rails guide on queries <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">here</a>.  Really I think you just want a simple query that checks for the vendor open on that day and if any of those records has the hour"}], "answers": [{"comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1475633906, "post_id": 39864418, "comment_id": 67016732, "body": "You don&#39;t need to explicitly return <code>true</code> and <code>false</code>"}, {"owner": {"reputation": 483, "user_id": 1301037, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2eb1b2da59467d61d074f16e20a93af7?s=128&d=identicon&r=PG", "display_name": "user1301037", "link": "https://stackoverflow.com/users/1301037/user1301037"}, "edited": false, "score": 0, "creation_date": 1475634247, "post_id": 39864418, "comment_id": 67016801, "body": "The Time.current does not return the Time zone? (config.time_zone is set)"}, {"owner": {"reputation": 483, "user_id": 1301037, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2eb1b2da59467d61d074f16e20a93af7?s=128&d=identicon&r=PG", "display_name": "user1301037", "link": "https://stackoverflow.com/users/1301037/user1301037"}, "edited": false, "score": 0, "creation_date": 1475634506, "post_id": 39864418, "comment_id": 67016854, "body": "Yes.  How can I call the method in rails console to test it?"}, {"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475634562, "post_id": 39864418, "comment_id": 67016862, "body": "maybe <code>Merchant.first.open?</code>"}, {"owner": {"reputation": 483, "user_id": 1301037, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2eb1b2da59467d61d074f16e20a93af7?s=128&d=identicon&r=PG", "display_name": "user1301037", "link": "https://stackoverflow.com/users/1301037/user1301037"}, "edited": false, "score": 0, "creation_date": 1475634736, "post_id": 39864418, "comment_id": 67016890, "body": "I receive the following error NoMethodError: undefined method `open?&#39; for #&lt;Merchant:0x000000039d2f80&gt;"}, {"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "reply_to_user": {"reputation": 483, "user_id": 1301037, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2eb1b2da59467d61d074f16e20a93af7?s=128&d=identicon&r=PG", "display_name": "user1301037", "link": "https://stackoverflow.com/users/1301037/user1301037"}, "edited": false, "score": 0, "creation_date": 1475637163, "post_id": 39864418, "comment_id": 67017470, "body": "@user1301037 Please check the updated answer, We should&#39;ve lost the <code>self.</code> part, If it works I think the day check part would be easy, Isn&#39;t it?"}, {"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "reply_to_user": {"reputation": 483, "user_id": 1301037, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2eb1b2da59467d61d074f16e20a93af7?s=128&d=identicon&r=PG", "display_name": "user1301037", "link": "https://stackoverflow.com/users/1301037/user1301037"}, "edited": false, "score": 0, "creation_date": 1475638321, "post_id": 39864418, "comment_id": 67017753, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/124955/discussion-between-moataz-zaitoun-and-user1301037\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "is_accepted": true, "score": 1, "last_activity_date": 1475637044, "last_edit_date": 1475637044, "creation_date": 1475633587, "answer_id": 39864418, "question_id": 39864123, "link": "https://stackoverflow.com/questions/39864123/rails-method-to-return-if-a-merchant-is-open/39864418#39864418", "title": "Rails - Method to return if a merchant is open", "body": "<p><strong>Update</strong>\nWe've should've lost the <code>self.</code> part</p>\n\n<p>try to add this to your merchant model</p>\n\n<pre><code>def open?\n    self.working_hours.any? { |wh|\n        (wh.open_time.hour..wh.close_time.hour).cover?(Time.current.hour)\n    }\nend\n</code></pre>\n"}], "owner": {"reputation": 483, "user_id": 1301037, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2eb1b2da59467d61d074f16e20a93af7?s=128&d=identicon&r=PG", "display_name": "user1301037", "link": "https://stackoverflow.com/users/1301037/user1301037"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 39864418, "answer_count": 1, "score": 0, "last_activity_date": 1475649399, "creation_date": 1475631007, "last_edit_date": 1475649399, "question_id": 39864123, "link": "https://stackoverflow.com/questions/39864123/rails-method-to-return-if-a-merchant-is-open", "title": "Rails - Method to return if a merchant is open", "body": "<p>I have a Merchant model. The model accepts_nested_attributes for the Working Hour model.</p>\n\n<p>Merchant Model</p>\n\n<pre><code>class Merchant &lt; ApplicationRecord\n  has_many   :working_hours, inverse_of: :merchant, dependent: :destroy\n  accepts_nested_attributes_for :working_hours, reject_if: :all_blank, allow_destroy: true\nend\n</code></pre>\n\n<p>Working Hour model</p>\n\n<pre><code>class WorkingHour &lt; ApplicationRecord\n  belongs_to :merchant \nend\n</code></pre>\n\n<p>The working_hours table has:</p>\n\n<pre><code>class CreateWorkingHours &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :working_hours do |t|\n      t.integer :day\n      t.time :open_time\n      t.time :close_time\n      t.references :merchant, foreign_key: true\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>The merchants can have more than one working_hour block by day\n ex: 8:00 to 12:00 / 15:00 to 18:00.</p>\n\n<p>I want to create a method to return if the merchant are opened or closed. How can I do that?</p>\n"}, {"tags": ["ruby", "libgit2", "rugged"], "comments": [{"owner": {"reputation": 5909, "user_id": 500207, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsvTT.jpg?s=128&g=1", "display_name": "Ahmed Fasih", "link": "https://stackoverflow.com/users/500207/ahmed-fasih"}, "edited": false, "score": 0, "creation_date": 1530245499, "post_id": 39864095, "comment_id": 89176302, "body": "Status of flash card app? \ud83d\ude07"}], "answers": [{"comments": [{"owner": {"reputation": 726, "user_id": 5699135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELexL.png?s=128&g=1", "display_name": "birdoftheday", "link": "https://stackoverflow.com/users/5699135/birdoftheday"}, "edited": false, "score": 0, "creation_date": 1475669645, "post_id": 39864196, "comment_id": 67033879, "body": "Thanks. I don&#39;t really understand <code>Backend</code> though. Why do I need one?"}, {"owner": {"reputation": 107, "user_id": 2371391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68776565f2616c2ece2be936c89855e5?s=128&d=identicon&r=PG", "display_name": "rpepato", "link": "https://stackoverflow.com/users/2371391/rpepato"}, "reply_to_user": {"reputation": 726, "user_id": 5699135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELexL.png?s=128&g=1", "display_name": "birdoftheday", "link": "https://stackoverflow.com/users/5699135/birdoftheday"}, "edited": false, "score": 0, "creation_date": 1475686540, "post_id": 39864196, "comment_id": 67046157, "body": "A backend int he context of libgit2 is just a storage mechanism for your repo. It could be in-memory storage, disk storage, database storage, cache storage, etc. You can find a detailed explanation about backends in libgit2 <a href=\"http://blog.deveo.com/your-git-repository-in-a-database-pluggable-backends-in-libgit2/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 6709, "user_id": 3640161, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/065307b80129366f064b9b99811658aa?s=128&d=identicon&r=PG", "display_name": "Tiago Lopo", "link": "https://stackoverflow.com/users/3640161/tiago-lopo"}, "edited": false, "score": 0, "creation_date": 1481725021, "post_id": 39864196, "comment_id": 69492045, "body": "@rpepato Do you know if that works for <code>clone_at</code>? I can&#39;t find in the documentation"}, {"owner": {"reputation": 107, "user_id": 2371391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68776565f2616c2ece2be936c89855e5?s=128&d=identicon&r=PG", "display_name": "rpepato", "link": "https://stackoverflow.com/users/2371391/rpepato"}, "reply_to_user": {"reputation": 6709, "user_id": 3640161, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/065307b80129366f064b9b99811658aa?s=128&d=identicon&r=PG", "display_name": "Tiago Lopo", "link": "https://stackoverflow.com/users/3640161/tiago-lopo"}, "edited": false, "score": 0, "creation_date": 1482852377, "post_id": 39864196, "comment_id": 69897322, "body": "@Tiago I didn&#39;t test it but it looks so. Check the example in this <a href=\"http://www.rubydoc.info/github/libgit2/rugged/Rugged%2FRepository.clone_at\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 2447, "user_id": 468618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32701e4c5c6d91bbbb092077f8bdd2f8?s=128&d=identicon&r=PG", "display_name": "Brian Morearty", "link": "https://stackoverflow.com/users/468618/brian-morearty"}, "edited": false, "score": 2, "creation_date": 1525789718, "post_id": 39864196, "comment_id": 87489375, "body": "The <code>rugged</code> code example does not seem to work. As of Rugged 0.27.0, the README says you can create an in-memory repo using that code but the gem doesn&#39;t provide a <code>Rugged::InMemory</code> class."}], "tags": [], "owner": {"reputation": 107, "user_id": 2371391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68776565f2616c2ece2be936c89855e5?s=128&d=identicon&r=PG", "display_name": "rpepato", "link": "https://stackoverflow.com/users/2371391/rpepato"}, "is_accepted": true, "score": 7, "last_activity_date": 1475631704, "creation_date": 1475631704, "answer_id": 39864196, "question_id": 39864095, "link": "https://stackoverflow.com/questions/39864095/how-to-create-a-git-repository-in-memory/39864196#39864196", "title": "How to create a git repository in memory?", "body": "<p>Take a look at libgit2. It supports the in-memory git repository scenario and also has bindings to many languages:</p>\n\n<p><a href=\"https://libgit2.github.com\" rel=\"noreferrer\">https://libgit2.github.com</a></p>\n\n<p>For example, by using <a href=\"https://github.com/libgit2/rugged\" rel=\"noreferrer\">rugged</a>, the ruby binding for libgit2, you could do things like this:</p>\n\n<pre><code>a_backend = Rugged::InMemory::Backend.new(opt1: 'setting', opt2: 'setting')\n\nrepo = Rugged::Repository.init_at('repo_name', :bare, backend: a_backend)\n</code></pre>\n"}], "owner": {"reputation": 726, "user_id": 5699135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELexL.png?s=128&g=1", "display_name": "birdoftheday", "link": "https://stackoverflow.com/users/5699135/birdoftheday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2040, "favorite_count": 0, "accepted_answer_id": 39864196, "answer_count": 1, "score": 5, "last_activity_date": 1475631704, "creation_date": 1475630784, "question_id": 39864095, "link": "https://stackoverflow.com/questions/39864095/how-to-create-a-git-repository-in-memory", "title": "How to create a git repository in memory?", "body": "<p>I am currently working on a flashcard application where decks created by the user act as Git repositories. When a card is created in the app, a new file is committed to the repository, when a card is changed, the file is changed, and when a card is deleted--well, you get the point.</p>\n\n<p>The file format that the application saves to is a gzipped Git repository, so at no point will I ever need to write the repository to disk. How can I best handle treating decks as a Git repository in this way?</p>\n"}, {"tags": ["ruby", "session", "websocket", "sinatra"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1475653594, "post_id": 39863472, "comment_id": 67023599, "body": "this isn&#39;t really a solution, but I&#39;ve found that <a href=\"https://github.com/nakajima/rack-flash\" rel=\"nofollow noreferrer\">rack-flash</a> can be used for session. The flash key-vals are by default saved for a single request only, but you can make it persistent by setting the key to its existing value on each request."}, {"owner": {"reputation": 322, "user_id": 2067375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd805bbb6862aa2fc7166a3372119e0c?s=128&d=identicon&r=PG", "display_name": "Rada Bogdan", "link": "https://stackoverflow.com/users/2067375/rada-bogdan"}, "edited": false, "score": 0, "creation_date": 1476733257, "post_id": 39863472, "comment_id": 67461419, "body": "Have you tried using Rack::Session::Cookie? Example here: <a href=\"http://www.sinatrarb.com/faq.html#sessions\" rel=\"nofollow noreferrer\">sinatrarb.com/faq.html#sessions</a> . That should help you."}], "owner": {"reputation": 43, "user_id": 6150636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e911bf3794077f36e29a412bf909ef2?s=128&d=identicon&r=PG&f=1", "display_name": "ninetailschris", "link": "https://stackoverflow.com/users/6150636/ninetailschris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1475625504, "creation_date": 1475625504, "question_id": 39863472, "link": "https://stackoverflow.com/questions/39863472/sinatra-session", "title": "Sinatra Session", "body": "<pre><code>get '/' do\nif !request.websocket?\n  erb :index\nelse\nrequest.websocket do |ws|\n  ws.onopen do\n     content_type :json  \n    u = User.first(:username =&gt; session[:username])   \n      ws.send({:msg =&gt; \"start\", :player_id =&gt; u.id.to_s,})\n\n    settings.sockets &lt;&lt; ws\n  end\n  ws.onmessage do |msg|\n    EM.next_tick { settings.sockets.each{|s| s.send(msg) } }\n  end\n  ws.onclose do\n    warn(\"websocket closed\")\n    settings.sockets.delete(ws)\n  end\nend\nend\nend\n</code></pre>\n\n<p>In my web-socket handshake I can't seem to get the user session to work.Sessions work everywhere but during a web-socket request. It comes up empty every time.</p>\n\n<p>In my app the session setup.</p>\n\n<pre><code>enable :sessions\nset(:session_fail, '/login')\nset(:session_secret, 'secretsession')\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 1, "creation_date": 1475623973, "post_id": 39863242, "comment_id": 67014569, "body": "I have a question unrelated - but I&#39;ve been thinking of this since I read your first post - how do you plan to handle, say, Nancy, will you take the N for nitrogen or the Na for Sodium - that&#39;s but one example - but I&#39;m curious how you plan to deal with it - and using your example - how do you choose to use helium for he instead of hydrogen for h?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "reply_to_user": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 0, "creation_date": 1475624192, "post_id": 39863242, "comment_id": 67014617, "body": "I edited my post while you were asking I believe... It will need to loop and search for the symbols with 3 chars, then 2 chars, the 1 char"}, {"owner": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 0, "creation_date": 1475624454, "post_id": 39863242, "comment_id": 67014674, "body": "Well i&#39;m weird - so i&#39;d convert the input string to an array - i&#39;d reverse the order - then i&#39;d write some sort of recrusive loop (i&#39;m not good at those things) that starts with three, and if it works, pops all three off - (or you can use slice - i&#39;m just bad at slice) and if it doesn&#39;t work - check two - check one - and then default - probably run a case statement with complexity?  I can see how to do it in my brain but i can&#39;t code it :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "reply_to_user": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 0, "creation_date": 1475624522, "post_id": 39863242, "comment_id": 67014694, "body": "I have the idea too but I  can&#39;t find the code yet"}, {"owner": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 0, "creation_date": 1475624643, "post_id": 39863242, "comment_id": 67014723, "body": "You won&#39;t &#39;find&#39; the code - you&#39;ll have to write it - it&#39;s pretty basic ruby stuff once you break it down - just write your pseudo code out"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "reply_to_user": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 0, "creation_date": 1475624715, "post_id": 39863242, "comment_id": 67014744, "body": "I meant i can&#39;t figure out how to write it... it&#39;s blurry in my head..."}, {"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475625535, "post_id": 39863242, "comment_id": 67014961, "body": "@Nelly-Johan I think It&#39;s better to have an <b>Elements</b> model, This way you could run simple queries like <code>Element.find_by name: &#39;hydrogen&#39;</code>,and also a <b>Name</b> model which every name has_many elements :through :elmenents_combination"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "edited": false, "score": 0, "creation_date": 1475625837, "post_id": 39863242, "comment_id": 67015031, "body": "okay... sounds intersting, but can i put this json file somewhere in the model? how do I had it to the database?"}, {"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475626475, "post_id": 39863242, "comment_id": 67015159, "body": "@Nelly-Johan No you will simply create a new database table called elements each elements has name and symbol, number, etc... then you use <code>seed.rb</code> to seed your table with the periodic table data. you can use <code>rails generate scaffold Element name:string { other attributes goes here } </code> then migrate  using <code>rake db:migrate</code> and you can use this railsCast <a href=\"http://railscasts.com/episodes/179-seed-data\" rel=\"nofollow noreferrer\">railscasts.com/episodes/179-seed-data</a> to know more about how to seed data to data base, also using a gem like carrierwave you can attach a photo to every Element to use it later for display"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "edited": false, "score": 0, "creation_date": 1475627430, "post_id": 39863242, "comment_id": 67015383, "body": "if I do this (maybe it&#39;s wrong) <code>rails generate scaffold Element symbol:string { name:string, number:integer, small:string, molar:integer }</code>  I have this error zsh: parse error near `}&#39;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "edited": false, "score": 0, "creation_date": 1475627651, "post_id": 39863242, "comment_id": 67015438, "body": "I don&#39;t need carreirwave as I am not using any image (actually)... the attached picture is a screenshot of what i want (I will create div to display the matching symbols with the different elements_ number/small/molar_)"}, {"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475627801, "post_id": 39863242, "comment_id": 67015464, "body": "@Nelly-Johan dont use the curly bracket {}, I was using them to indicate the part you should write, you should read the section about scaffolding in this guide: <a href=\"http://guides.rubyonrails.org/command_line.html#rails-generate\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/command_line.html#rails-generate</a> , Also about the image; Image should be part of the element model"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "reply_to_user": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 0, "creation_date": 1475659866, "post_id": 39863242, "comment_id": 67027405, "body": "@MoatazZaitoun thank u , I think there is a misunderstood, I don&#39;t want to use images. No images match to any symbol. Everything is text or integer that will come in a div to represent the symbol. For exemple if my word is &quot;bacon&quot; it  contains <b>&quot;Ba&quot;</b> , <b>&quot;Co&quot;</b> and <b>&quot;N&quot;</b>. So a div with: <code>number =&gt; 56, small=&gt; &quot;Ba&quot;, molar: 137.327</code> ,  <code>number =&gt; 27, small=&gt; Co&quot;, molar: 58.933193</code> ,  <code>number =&gt; 7, small=&gt; &quot;N&quot;, molar: 14.0067</code> will be displayed inline"}], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 5306391, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-QqS8n4PQZSw/AAAAAAAAAAI/AAAAAAAABgo/YnozuUmsWWc/photo.jpg?sz=128", "display_name": "Moataz Zaitoun", "link": "https://stackoverflow.com/users/5306391/moataz-zaitoun"}, "edited": false, "score": 3, "creation_date": 1475625746, "post_id": 39863357, "comment_id": 67015002, "body": "@vivek Those are not answers, I know you cannot comment and so you use answers, But please consider delete them. As they cannot be marked as Correct. and to give the question a chance to be answered"}], "tags": [], "owner": {"reputation": 326, "user_id": 6923290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LWhqI.jpg?s=128&g=1", "display_name": "vivek", "link": "https://stackoverflow.com/users/6923290/vivek"}, "is_accepted": false, "score": 0, "last_activity_date": 1475752024, "last_edit_date": 1475752024, "creation_date": 1475624528, "answer_id": 39863357, "question_id": 39863242, "link": "https://stackoverflow.com/questions/39863242/how-to-extract-some-specific-values-from-json/39863357#39863357", "title": "How to extract some specific values from json", "body": "<p>Correct Json Format </p>\n\n<pre><code>[{\n\"symbols\":{\n  \"h\":{\n     \"name\": \"Hydrogen\",\n     \"number\": 1,\n     \"small\": \"H\",\n     \"molar\": 1.0079\n       },\n  \"he\":{\n     \"name\": \"Helium\",\n     \"number\": 2,\n     \"small\": \"He\",\n     \"molar\": 4.002602\n        },\n  \"b\": {\n     \"name\": \"Boron\",\n     \"number\": 5,\n     \"small\": \"B\",\n     \"molar\": 10.811\n       },\n  \"c\": {\n    \"name\": \"Carbon\",\n    \"number\": 6,\n    \"small\": \"C\",\n    \"molar\": 12.0107\n       },\n  \"n\": {\n     \"name\": \"Nitrogen\",\n     \"number\": 7,\n     \"small\": \"N\",\n     \"molar\": 14.0067\n       }\n  }\n}]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6124553"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475752024, "creation_date": 1475623748, "last_edit_date": 1475624076, "question_id": 39863242, "link": "https://stackoverflow.com/questions/39863242/how-to-extract-some-specific-values-from-json", "title": "How to extract some specific values from json", "body": "<p>I am still trying to create an app where the user could transform his name or a word with chemical elements (like breaking bad logo). </p>\n\n<p>The user will enter a word in a text field and when he'll submit it will return him the word with the corresponding chemical symbols if they match, or it will display the \"raw\" letters if they don't match.</p>\n\n<p>ex: If no symbol matches I am keepking the initial entry so it could be: hello => <strong>He</strong> ll <strong>O</strong> (bold char represent the existing chemical symbols)</p>\n\n<p><em>I know this could be done in js, but the challenge is ROR (btw I don't know any js...)</em></p>\n\n<p>In an earlier question I had just a hash like:</p>\n\n<pre><code>     symbols =\n      {\"cr\" =&gt; \"Cr\",\n      \"sb\" =&gt; \"Sb\",\n      \"ag\" =&gt; \"Ag\",\n      \"ar\" =&gt; \"Ar\",\n      \"as\" =&gt; \"As\",\n      \"at\" =&gt; \"At\",\n      \"n\"  =&gt; \"N\",\n      \"ba\" =&gt; \"Ba\",\n      \"bk\" =&gt; \"Bk\"}\n</code></pre>\n\n<p>and I was using <code>name.downcase.gsub!(Regexp.union(symbols.keys), symbols)</code>to transform the user entry. Actually I need more datas... that's why I chosen the json file.</p>\n\n<p>Like on this picture i will need to use:</p>\n\n<ul>\n<li><strong>\"number\"</strong></li>\n<li><strong>\"small\"</strong></li>\n<li><strong>\"molar\"</strong></li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/fhhom.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fhhom.png\" alt=\"enter image description here\"></a></p>\n\n<p>(and the <strong>\"name\"</strong> will appear in a caption below)</p>\n\n<p>I have organized a <strong>.json</strong> file with all the symbols I may need in the app and stored it in my <code>config/periodic_table.json</code> (pasted just a sample cause it's very long).</p>\n\n<h3>1\u00b0) If a user enter \"hello\" how do I loop to search for the \"he\" hash and print the \"name\",\"number\", \"small\" and the \"molar\"</h3>\n\n<h3>2\u00b0) I will use the json as a database (I will use heroku to deploy) so do I have anything to transform for using json and pg together?</h3>\n\n<pre><code>[ \"symbols\"\n\n        {\n           \"h\": {\n                \"name\": \"Hydrogen\",\n                \"number\": 1,\n                \"small\": \"H\",\n                \"molar\": 1.00794\n            },\n            \"he\": {\n                \"name\": \"Helium\",\n                \"number\": 2,\n                \"small\": \"He\",\n                \"molar\": 4.002602\n            },\n          \"b\":  {\n                \"name\": \"Boron\",\n                \"number\": 5,\n                \"small\": \"B\",\n                \"molar\": 10.811\n            },\n            \"c\": {\n                \"name\": \"Carbon\",\n                \"number\": 6,\n                \"small\": \"C\",\n                \"molar\": 12.0107\n            },\n            \"n\": {\n                \"name\": \"Nitrogen\",\n                \"number\": 7,\n                \"small\": \"N\",\n                \"molar\": 14.0067\n            }\n    }\n]\n</code></pre>\n\n<h3>I will need to loop first with the symbols that contain 3 chars, then 2 then 1... shall i change anythin in the json, like an harray for the hashes that contains 3 chars, another for 2 chars , and for 1char?</h3>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "edited": false, "score": 0, "creation_date": 1475623593, "post_id": 39863070, "comment_id": 67014484, "body": "Personally, I would just rename the private method to <code>init_errors</code> or something like that as it seems like the simplest thing to do. Is there a reason you don&#39;t want to rename the private method?   Also, say if we were to have both <code>attr_reader :errors</code> and the private method called <code>errors</code>, then inside the class <code>Foo</code> <code>errors</code> is ambiguous, it could refer to both the private method or the non private method <code>errors</code> as <code>attr_reader</code> just defines method <code>errors</code> on the class as I understand it."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1475625333, "post_id": 39863070, "comment_id": 67014907, "body": "No, there will be no ambiguity. Later method definitions simply overwrite earlier ones. The <code>attr_reader</code> line in the OP&#39;s code is completely superfluous, the method is overwritten 5 lines later anyway."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1525343689, "post_id": 39863070, "comment_id": 87323354, "body": "Just drop the <code>attr_reader</code> and move the memoizing method to public."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1525343856, "post_id": 50152858, "comment_id": 87323455, "body": "While this makes the original &quot;broken&quot; code work, it does so by adding even more complexity and confusion. It&#39;s a wrong way to solve this. The proper way would be to get rid of that weird convention of &quot;we have an attr_reader and also a regular reader, which don&#39;t interact the way we imagined&quot;"}, {"owner": {"reputation": 151, "user_id": 4616147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sAbMa.jpg?s=128&g=1", "display_name": "Tim Heilman", "link": "https://stackoverflow.com/users/4616147/tim-heilman"}, "edited": false, "score": 0, "creation_date": 1577473288, "post_id": 50152858, "comment_id": 105182363, "body": "Agreed: method_missing, as metaprogramming, has an extremely high cognitive load, and so should be reserved for solutions that deliver enormous value and quickly become established conventions that legitimize the use of such heavy artillery.  That is not the case here, so avoid method_missing."}], "tags": [], "owner": {"reputation": 2247, "user_id": 6633748, "user_type": "registered", "profile_image": "https://graph.facebook.com/561963530595563/picture?type=large", "display_name": "Sining  Liu", "link": "https://stackoverflow.com/users/6633748/sining-liu"}, "is_accepted": false, "score": 0, "last_activity_date": 1525344702, "last_edit_date": 1525344702, "creation_date": 1525343547, "answer_id": 50152858, "question_id": 39863070, "link": "https://stackoverflow.com/questions/39863070/using-attr-reader-with-a-private-method-of-the-same-instance-var-name/50152858#50152858", "title": "Using attr_reader with a private method of the same instance var name", "body": "<p>If you truly want to keep the reader method private, you may use <code>method_missing</code> to redirect the calls to <code>errors</code> inside your class. For example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Foo\n  attr_reader :errors\n\n  # Add method_missing here\n  def method_missing(method_name, *args, &amp;block)\n    if method_name.to_s == 'errors'\n      errors\n    else\n      super\n    end\n  end\n\n  private\n\n  # memoized method\n  def errors\n    @errors ||= []\n  end\nend\n\nf = Foo.new\n\nputs f.errors.to_s # =&gt; []\n</code></pre>\n\n<p>However, as @SergioTulentsev posted in comments, this could add complexity to your code, especially when the class is already very big.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 4616147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sAbMa.jpg?s=128&g=1", "display_name": "Tim Heilman", "link": "https://stackoverflow.com/users/4616147/tim-heilman"}, "is_accepted": false, "score": 1, "last_activity_date": 1577473141, "creation_date": 1577473141, "answer_id": 59504968, "question_id": 39863070, "link": "https://stackoverflow.com/questions/39863070/using-attr-reader-with-a-private-method-of-the-same-instance-var-name/59504968#59504968", "title": "Using attr_reader with a private method of the same instance var name", "body": "<p>I believe the intent expressed by your initial code is best satisfied by: not-using the attr_reader but instead exposing the memoized method at the public level of encapsulation.</p>\n\n<p>(By the way, instead the protected memoized method eclipses the definition of the attr_reader, so the intent of the code -- public non-memoized access but private memoized access -- isn't actually satisfied.)</p>\n\n<p>Consider two alternatives regarding the intent:</p>\n\n<ol>\n<li>Public access always occurs after some private access of the :errors reader.</li>\n<li>Public access does not always occur after some private access of the :errors reader.</li>\n</ol>\n\n<p>In case 1, there is no logical change by exposing the memoized method and discarding the attr_reader; the intent is still achieved.\nIn case 2, the only logical change relative to the intent, caused by exposing the memoized method and removing the attr_reader, is that public access prior to private access now will memoize and return an empty array rather than returning nil.</p>\n\n<p>If you're expecting case 2, it's very unlikely you're depending on the non-memoization during public access prior to private access, so instead you may be relying on a nil response.  This is a code smell (per <em>Clean Code</em> by Robert Martin): it's best, if possible, never to pass nor return nil.</p>\n\n<p>Instead, if case 2 is an issue, the best subsequent change is to make that code that depends on nil being returned for public access prior to private access INSTEAD depend on an empty array being returned for public access prior to private access, in the same way that public access <em>after</em> private access would. If this is not possible or undesirable, please clarify further.</p>\n"}], "owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577473141, "creation_date": 1475622229, "last_edit_date": 1475622719, "question_id": 39863070, "link": "https://stackoverflow.com/questions/39863070/using-attr-reader-with-a-private-method-of-the-same-instance-var-name", "title": "Using attr_reader with a private method of the same instance var name", "body": "<p>I just encountered a use case where we have a class with an instance variable <code>@errors</code> that is memorized via private method of the same name.</p>\n\n<pre><code>class Foo\n  attr_reader :errors\n\n  private\n\n  # memoized method\n  def errors\n    @errors ||= []\n  end\nend\n\nf = Foo.new\n\n# private method `errors' called for #&lt;Foo:...\nf.errors\n</code></pre>\n\n<p>What is the solution here? Use <code>#instance_variable_get</code> or rename the attribute or method?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1475620392, "post_id": 39862704, "comment_id": 67013553, "body": "do you have an app running in each environment? why not write your API to post to the different apps depending on said parameter?"}, {"owner": {"reputation": 99, "user_id": 4508553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/92945a47bbf4da0e370485508844d61d?s=128&d=identicon&r=PG&f=1", "display_name": "NooB8374", "link": "https://stackoverflow.com/users/4508553/noob8374"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1475620479, "post_id": 39862704, "comment_id": 67013583, "body": "No. App is running in only one environment. I want to push it first to development environment and test it out. And then call it for production database."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1475621648, "post_id": 39862704, "comment_id": 67014009, "body": "You don&#39;t. Configuration in rails is usually read when the rails server boots. While you can have <a href=\"http://stackoverflow.com/questions/6122508/connecting-rails-3-1-with-multiple-databases\">multiple database connections</a> - what you most likely want is a staging environment (which mirrors the production environment) which is usually done by creating a separate rails app and by using <code>ENV[&#39;DATABASE_URL&#39;]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": true, "score": 2, "last_activity_date": 1538063002, "last_edit_date": 1538063002, "creation_date": 1475621846, "answer_id": 39863010, "question_id": 39862704, "link": "https://stackoverflow.com/questions/39862704/connecting-to-two-different-database-in-ruby-at-runtime/39863010#39863010", "title": "Connecting to two different database in ruby at runtime", "body": "<p>You could use two models for the same table, one connected to the production database and the other connected to the development database.</p>\n\n<p>Lets say your connection parameters are in the variables <code>$production</code> and <code>$development</code>.</p>\n\n<p>You would also have to adapt your code to know which model to use.</p>\n\n<pre><code>class Table1 &lt; ActiveRecord::Base  \n establish_connection($production)\n self.table_name = 'table1' \nend\n\nclass Table1test &lt; ActiveRecord::Base  \n establish_connection($development)\n self.table_name = 'table1' \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 228, "user_id": 4891793, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153039879553600/picture?type=large", "display_name": "som4ik", "link": "https://stackoverflow.com/users/4891793/som4ik"}, "is_accepted": false, "score": 3, "last_activity_date": 1475691371, "creation_date": 1475691371, "answer_id": 39881070, "question_id": 39862704, "link": "https://stackoverflow.com/questions/39862704/connecting-to-two-different-database-in-ruby-at-runtime/39881070#39881070", "title": "Connecting to two different database in ruby at runtime", "body": "<p>Go with this one. [ActiveRecord Firebird Adapter][1]</p>\n\n<p>[1]: <a href=\"https://github.com/rowland/activerecord-fb-adapter\" rel=\"nofollow\">https://github.com/rowland/activerecord-fb-adapter</a> i used it to connect my local rails app with other production server database, don't forget to add models that will help you to access the database through rails app.\ngoodluck, hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1178, "user_id": 2772562, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1544504978/picture?type=large", "display_name": "Goko Gorgiovski", "link": "https://stackoverflow.com/users/2772562/goko-gorgiovski"}, "is_accepted": false, "score": 1, "last_activity_date": 1475843092, "creation_date": 1475843092, "answer_id": 39917260, "question_id": 39862704, "link": "https://stackoverflow.com/questions/39862704/connecting-to-two-different-database-in-ruby-at-runtime/39917260#39917260", "title": "Connecting to two different database in ruby at runtime", "body": "<p>For my application I use this gem</p>\n\n<p><a href=\"https://github.com/thiagopradi/octopus\" rel=\"nofollow\">https://github.com/thiagopradi/octopus</a></p>\n\n<p>have good documentation and examples.</p>\n\n<p>If you use <code>establish_connection</code> you will have problems with connections.</p>\n"}], "owner": {"reputation": 99, "user_id": 4508553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/92945a47bbf4da0e370485508844d61d?s=128&d=identicon&r=PG&f=1", "display_name": "NooB8374", "link": "https://stackoverflow.com/users/4508553/noob8374"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 39863010, "answer_count": 3, "score": 1, "last_activity_date": 1539089107, "creation_date": 1475619946, "last_edit_date": 1539089107, "question_id": 39862704, "link": "https://stackoverflow.com/questions/39862704/connecting-to-two-different-database-in-ruby-at-runtime", "title": "Connecting to two different database in ruby at runtime", "body": "<p>I have a database being hosted in development environment and production environment. I am writing an API which based on a parameter in request will write to table in either development or production DB. I have put both entries in by <code>database.yml</code> file :</p>\n\n<pre><code>development:   \n  adapter: mysql2   \n  database: db1  \n  username: root  \n  password:  \n  timeout: 5000   \n  host: a.b.c.d   \n  pool: 5  \n  port: 1234\n\nproduction: \n  adapter: mysql2 \n  database: db1 \n  username: root  \n  password:  \n  timeout: 5000  \n  host: a.b.c.e  \n  pool: 5  \n  port: 1234\n</code></pre>\n\n<p>This is my active record :</p>\n\n<pre><code>class table1 &lt; ActiveRecord::Base  \n  self.table_name = 'table1' \nend\n</code></pre>\n\n<p>How do i write to different environments based on a request parameter ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 5139378, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DpDLd.jpg?s=128&g=1", "display_name": "Joel Scalera", "link": "https://stackoverflow.com/users/5139378/joel-scalera"}, "is_accepted": false, "score": 0, "last_activity_date": 1475687310, "creation_date": 1475687310, "answer_id": 39879960, "question_id": 39862539, "link": "https://stackoverflow.com/questions/39862539/how-to-add-separate-rails-model-into-an-active-admin-form/39879960#39879960", "title": "How to add separate rails model into an active_admin form?", "body": "<p>The answer was simple. I was getting an error for</p>\n\n<pre><code>f.input :category, :as =&gt; :select, :collection =&gt; [MainTopic.all]\n</code></pre>\n\n<p>I needed to remove the [] around MainTopic.all.</p>\n"}], "owner": {"reputation": 73, "user_id": 5139378, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/DpDLd.jpg?s=128&g=1", "display_name": "Joel Scalera", "link": "https://stackoverflow.com/users/5139378/joel-scalera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1475687310, "creation_date": 1475619011, "last_edit_date": 1475622575, "question_id": 39862539, "link": "https://stackoverflow.com/questions/39862539/how-to-add-separate-rails-model-into-an-active-admin-form", "title": "How to add separate rails model into an active_admin form?", "body": "<p>I have an active_admin form for ProspectReview as so:</p>\n\n<pre><code>ActiveAdmin.register ProspectReview do\n\n  permit_params :domain, :media_type, :is_prospect, :category, :corrected_domain, :source, :share, :collection, :api_lookup_at\n\n  form do |f|\n    f.inputs \"ProspectReview\" do\n      f.input :domain\n      f.input :media_type, :as =&gt; :select, :collection =&gt; [\"website\",\"facebook\",\"twitter\",\"blogspot\",\"tumblr\",\"instagram\",\"klout\",\"pinterest\",\"google+\",\"linkedin\",\"youtube\",\"blog\",\"mobile app\",\"lookbook\",\"bloglovin\"]\n      f.input :is_prospect, :as =&gt; :select, :collection =&gt; [\"yes\", \"no\"]\n      f.input :category, :as =&gt; :select, :collection =&gt; []\n      f.input :corrected_domain\n      f.input :source\n      f.input :share\n    end\n    f.actions\n  end\n\nend\n</code></pre>\n\n<p>I have a table called main_topics with an attribute of name:</p>\n\n<pre><code>create_table \"main_topics\", force: :cascade do |t|\n  t.string   \"name\", limit: 255\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\nend\n</code></pre>\n\n<p>My goal is to add the attribute name from <strong>main_topics</strong> into the <strong>ProspectReview ActivAdmin</strong> form where the category selection dropdown is:</p>\n\n<pre><code>f.input :category, :as =&gt; :select, :collection =&gt; []\n</code></pre>\n\n<p>That way anytime the table <strong>main_topics</strong> is updated with a new row. Whatever is in the name column will populate inside the dropdown selection.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1475615934, "post_id": 39861871, "comment_id": 67011774, "body": "Make sure to add the new attributes to the <code>permit_params</code> array of allowed attributes in that model&#39;s active admin config."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1475616127, "post_id": 39861871, "comment_id": 67011873, "body": "@infused so add it in the model?  In this case, my model is <code>Company</code>... so add it to <code>models&#47;company.rb</code> ?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1475617334, "post_id": 39861871, "comment_id": 67012457, "body": "The <code>admin&#47;company.rb</code> has its own allowed attributes that need to be updated."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1475617760, "post_id": 39861871, "comment_id": 67012663, "body": "From what I can tell, Rails_admin doesn&#39;t follow the same hierarchy as ActiveAdmin.  So I don&#39;t have a <code>config&#47;initializers&#47;rails_admin&#47;XXXX.rb</code> file for my model."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1475618233, "post_id": 39861871, "comment_id": 67012833, "body": "To further support my assumption... <a href=\"https://github.com/sferik/rails_admin/wiki/Mass-assignments-protection\" rel=\"nofollow noreferrer\">github.com/sferik/rails_admin/wiki/Mass-assignments-protecti&zwnj;&#8203;on</a>"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1475615700, "creation_date": 1475615700, "question_id": 39861871, "link": "https://stackoverflow.com/questions/39861871/rails-admin-record-not-found-during-edit", "title": "Rails Admin &#39;Record Not Found&#39; during edit", "body": "<p>Trying to edit a record in Rails_Admin and for various fields I'm getting a 'Record Not Found' message.</p>\n\n<p><a href=\"https://i.stack.imgur.com/hMcim.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hMcim.png\" alt=\"enter image description here\"></a></p>\n\n<p>It looks like it gets committed in the log, but that's not the case, it's more like a 'rollback' action... which isn't logged.</p>\n\n<p>Is there something else that I need to add to the rails_admin config file to allow additional fields?  My config file is the standard one from running <code>rails g rails_admin:install</code> with a few model exemptions added.</p>\n\n<p>It seems the fields that I'm having an issue updating through rails_admin were added through migrations <strong>after</strong> installing rails_admin (Not sure if that matters or not).</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 1650, "user_id": 2884005, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9hQM5.jpg?s=128&g=1", "display_name": "Wim Mertens", "link": "https://stackoverflow.com/users/2884005/wim-mertens"}, "edited": false, "score": 0, "creation_date": 1475614986, "post_id": 39861671, "comment_id": 67011317, "body": "place the image in the same folder as the html page"}, {"owner": {"reputation": 583, "user_id": 6114993, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c41844ba1526acb0ecf3072a35ec2d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Learn AspNet", "link": "https://stackoverflow.com/users/6114993/learn-aspnet"}, "edited": false, "score": 2, "creation_date": 1475615002, "post_id": 39861671, "comment_id": 67011322, "body": "background: url(&#39;../images/oops.jpg&#39;) no-repeat center center fixed;"}, {"owner": {"reputation": 2244, "user_id": 3711213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ddce440a771246719f9dcbd3b5479547?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3711213/franco"}, "edited": false, "score": 0, "creation_date": 1475615219, "post_id": 39861671, "comment_id": 67011426, "body": "As long as I know, I maybe be wrong, if you use &#39;cover&#39; you should use background-image i.p.o. background"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "reply_to_user": {"reputation": 11125, "user_id": 1387174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c4cb458658b24227da74b4dea41075?s=128&d=identicon&r=PG", "display_name": "Serlite", "link": "https://stackoverflow.com/users/1387174/serlite"}, "edited": false, "score": 0, "creation_date": 1475615229, "post_id": 39861671, "comment_id": 67011431, "body": "@Serlite the CSS is in the HTML file."}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "reply_to_user": {"reputation": 2244, "user_id": 3711213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ddce440a771246719f9dcbd3b5479547?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3711213/franco"}, "edited": false, "score": 0, "creation_date": 1475615278, "post_id": 39861671, "comment_id": 67011460, "body": "@Franco I have tried using background-image, but it is still not working. What is the suggestion for the full line and I can try"}, {"owner": {"reputation": 2244, "user_id": 3711213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ddce440a771246719f9dcbd3b5479547?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3711213/franco"}, "edited": false, "score": 0, "creation_date": 1475615422, "post_id": 39861671, "comment_id": 67011524, "body": "You need first to be sure that your image path is correct. Can you tell me where your image is?"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "reply_to_user": {"reputation": 2244, "user_id": 3711213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ddce440a771246719f9dcbd3b5479547?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3711213/franco"}, "edited": false, "score": 0, "creation_date": 1475615692, "post_id": 39861671, "comment_id": 67011660, "body": "@Franco  the image path, from the very highest level, is: app/assets/images/oops.jpg    its a rails app"}, {"owner": {"reputation": 2244, "user_id": 3711213, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ddce440a771246719f9dcbd3b5479547?s=128&d=identicon&r=PG&f=1", "display_name": "Franco", "link": "https://stackoverflow.com/users/3711213/franco"}, "edited": false, "score": 0, "creation_date": 1475616138, "post_id": 39861671, "comment_id": 67011881, "body": "If this code is in the app directory you would try &#39;assets/images/oops.jpg&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 6923222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea8af62f9d780319fbc6449b0f04eff5?s=128&d=identicon&r=PG&f=1", "display_name": "jacksonR", "link": "https://stackoverflow.com/users/6923222/jacksonr"}, "is_accepted": false, "score": 1, "last_activity_date": 1475660095, "last_edit_date": 1475660095, "creation_date": 1475615222, "answer_id": 39861755, "question_id": 39861671, "link": "https://stackoverflow.com/questions/39861671/404-image-is-not-showing/39861755#39861755", "title": "404 image is not showing", "body": "<p>Try image path as <strong>\"/assets/oops.jpg\"</strong> or <strong>\"../images/oops.jpg\"</strong> this one too in another case .\nAssuming that you are using  ruby on rails app from your path that you have mentioned.\nhope this will work for you.</p>\n"}, {"comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475615580, "post_id": 39861756, "comment_id": 67011608, "body": "This returns a 440 not found"}, {"owner": {"reputation": 1650, "user_id": 2884005, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9hQM5.jpg?s=128&g=1", "display_name": "Wim Mertens", "link": "https://stackoverflow.com/users/2884005/wim-mertens"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 1, "creation_date": 1475615654, "post_id": 39861756, "comment_id": 67011638, "body": "can you test in the browser with the full url to see if the image is loading: <a href=\"http://www.example.com/app/assets/images/oops.jpg\" rel=\"nofollow noreferrer\">example.com/app/assets/images/oops.jpg</a>"}, {"owner": {"reputation": 1650, "user_id": 2884005, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9hQM5.jpg?s=128&g=1", "display_name": "Wim Mertens", "link": "https://stackoverflow.com/users/2884005/wim-mertens"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475615725, "post_id": 39861756, "comment_id": 67011679, "body": "Or place the image in the root, and change the path to the image to url(/oops.jpg)"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475615836, "post_id": 39861756, "comment_id": 67011722, "body": "Interesting, it does not appear when I go to the equivalent of example.com/app/assets/images/oops.jpg. But I clearly see it in my repo. Thoughts on why this is?"}, {"owner": {"reputation": 1650, "user_id": 2884005, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9hQM5.jpg?s=128&g=1", "display_name": "Wim Mertens", "link": "https://stackoverflow.com/users/2884005/wim-mertens"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 1, "creation_date": 1475615925, "post_id": 39861756, "comment_id": 67011768, "body": "did you upload your image to the server? Also, you might want to give the body a width and a height of 100% as well because it doesn&#39;t have any content"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475616041, "post_id": 39861756, "comment_id": 67011824, "body": "Yes, rails automatically complies assets, and I see it compiling the image when I push. I will try adding a width and height and see if it helps, but there is an error in my browser&#39;s console saying 404 not found for the image"}, {"owner": {"reputation": 1650, "user_id": 2884005, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9hQM5.jpg?s=128&g=1", "display_name": "Wim Mertens", "link": "https://stackoverflow.com/users/2884005/wim-mertens"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475616190, "post_id": 39861756, "comment_id": 67011910, "body": "If the image returns a 404 when you check in the browser, then there might be an issue with the compiling rather than the css path. Try uploading the image manually to the server."}, {"owner": {"reputation": 1650, "user_id": 2884005, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9hQM5.jpg?s=128&g=1", "display_name": "Wim Mertens", "link": "https://stackoverflow.com/users/2884005/wim-mertens"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475616427, "post_id": 39861756, "comment_id": 67012026, "body": "And you&#39;re sure the name of the image (and extension) is correct?"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475616734, "post_id": 39861756, "comment_id": 67012173, "body": "I added a screenshot"}, {"owner": {"reputation": 1650, "user_id": 2884005, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9hQM5.jpg?s=128&g=1", "display_name": "Wim Mertens", "link": "https://stackoverflow.com/users/2884005/wim-mertens"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475616867, "post_id": 39861756, "comment_id": 67012246, "body": "Is app a folder on the server as well, or is assets in the root? If so then try this path: /assets/images/oops.jpg Make sure to test in the browser first to see if the image shows up"}, {"owner": {"reputation": 1650, "user_id": 2884005, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9hQM5.jpg?s=128&g=1", "display_name": "Wim Mertens", "link": "https://stackoverflow.com/users/2884005/wim-mertens"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 1, "creation_date": 1475617070, "post_id": 39861756, "comment_id": 67012342, "body": "Here&#39;s a post that&#39;s related, maybe this is the issue: <a href=\"http://stackoverflow.com/questions/15354539/heroku-does-not-compile-files-under-assets-pipelines-in-rails-4\" title=\"heroku does not compile files under assets pipelines in rails 4\">stackoverflow.com/questions/15354539/&hellip;</a>"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475617728, "post_id": 39861756, "comment_id": 67012650, "body": "Thanks! I saw that post previous to posting this. I have those gems set up. Also, I have several other images throughout the app, which work fine. I&#39;m wondering if this is different since the rails 404.html page is in /public, instead of in views?"}, {"owner": {"reputation": 1650, "user_id": 2884005, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9hQM5.jpg?s=128&g=1", "display_name": "Wim Mertens", "link": "https://stackoverflow.com/users/2884005/wim-mertens"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475617931, "post_id": 39861756, "comment_id": 67012722, "body": "I&#39;m not too familiar with Ruby, maybe best to add Ruby tags to your question rather than css. My best bet however would be to place the image in the root and change the css path to the image to url(/oops.jpg)"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475618107, "post_id": 39861756, "comment_id": 67012788, "body": "okay, I&#39;ll keep working on that, and add ruby to the question. Thank you so much for your help!"}], "tags": [], "owner": {"reputation": 1650, "user_id": 2884005, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9hQM5.jpg?s=128&g=1", "display_name": "Wim Mertens", "link": "https://stackoverflow.com/users/2884005/wim-mertens"}, "is_accepted": false, "score": 1, "last_activity_date": 1475615223, "creation_date": 1475615223, "answer_id": 39861756, "question_id": 39861671, "link": "https://stackoverflow.com/questions/39861671/404-image-is-not-showing/39861756#39861756", "title": "404 image is not showing", "body": "<p>If your image is <code>app/assets/images/oops.jpg</code></p>\n\n<p>then your path to the image needs to be:</p>\n\n<pre><code>body {\n  background: url('/app/assets/images/oops.jpg') no-repeat center center fixed;\n-webkit-background-size: cover;\n-moz-background-size: cover;\n-o-background-size: cover;\nbackground-size: cover;\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475615346, "post_id": 39861768, "comment_id": 67011489, "body": "I tried this and still got a 404 not found in browser console"}, {"owner": {"reputation": 583, "user_id": 6114993, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c41844ba1526acb0ecf3072a35ec2d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Learn AspNet", "link": "https://stackoverflow.com/users/6114993/learn-aspnet"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1475615409, "post_id": 39861768, "comment_id": 67011519, "body": "background: url(&#39;/app/assets/images/oops.jpg&#39;) no-repeat center center fixed; Try this"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475619732, "post_id": 39861768, "comment_id": 67013353, "body": "When answering you should explain why your solution is useful and how it works. Tossing out code doesn&#39;t educate, which is the goal. It&#39;s akin to handing someone a fish or teaching them to fish."}], "tags": [], "owner": {"reputation": 583, "user_id": 6114993, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c41844ba1526acb0ecf3072a35ec2d7c?s=128&d=identicon&r=PG&f=1", "display_name": "Learn AspNet", "link": "https://stackoverflow.com/users/6114993/learn-aspnet"}, "is_accepted": false, "score": 1, "last_activity_date": 1475619681, "last_edit_date": 1475619681, "creation_date": 1475615285, "answer_id": 39861768, "question_id": 39861671, "link": "https://stackoverflow.com/questions/39861671/404-image-is-not-showing/39861768#39861768", "title": "404 image is not showing", "body": "<pre><code>background: url('../images/oops.jpg') no-repeat center center fixed;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1504182232, "post_id": 45980181, "comment_id": 78921958, "body": "Welcome to Stack Overflow! Thank you for this code snippet, which may provide some immediate help.  A proper explanation <a href=\"//meta.stackexchange.com/q/114762\">would greatly improve</a> its educational value by showing <i>why</i> this is a good solution to the problem, and would make it more useful to future readers with similar, but not identical, questions.  Please <a href=\"https://stackoverflow.com/posts/45980181/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 13, "user_id": 8515318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1cyQskF2A8k/AAAAAAAAAAI/AAAAAAAAADg/L55YyT3rHXs/photo.jpg?sz=128", "display_name": "Zuma", "link": "https://stackoverflow.com/users/8515318/zuma"}, "is_accepted": false, "score": 0, "last_activity_date": 1504178193, "creation_date": 1504178193, "answer_id": 45980181, "question_id": 39861671, "link": "https://stackoverflow.com/questions/39861671/404-image-is-not-showing/45980181#45980181", "title": "404 image is not showing", "body": "<p><strong>instead ... \nuse this</strong></p>\n\n<pre><code>body {\nbackground: url('../images/oops.jpg');  \n\nbackground-repeat: no-repeat;\n\nbackground-size: 100% 100% ;\n}\n</code></pre>\n"}], "owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1504178193, "creation_date": 1475614887, "last_edit_date": 1480156351, "question_id": 39861671, "link": "https://stackoverflow.com/questions/39861671/404-image-is-not-showing", "title": "404 image is not showing", "body": "<p>I have an image: <strong>app/assets/images/oops.jpg</strong></p>\n\n<p>In <strong>404.html</strong> I have:</p>\n\n<pre><code>&lt;html&gt;\n\n&lt;head&gt;\n\n  &lt;title&gt;Oops! Where are we?&lt;/title&gt;\n  &lt;meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"&gt;\n  &lt;style&gt;\n  body {\n  background: url('oops.jpg') no-repeat center center fixed;\n    -webkit-background-size: cover;\n    -moz-background-size: cover;\n    -o-background-size: cover;\n    background-size: cover;\n  }\n  &lt;/style&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I confirmed that the image is indeed in production on <strong>Heroku</strong>, but the browser can not find the image. </p>\n\n<p>Here is an image of my files.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4uk4q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4uk4q.png\" alt=\"enter image description here\"></a></p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "controller", "event-handling"], "comments": [{"owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "edited": false, "score": 0, "creation_date": 1475616216, "post_id": 39861519, "comment_id": 67011919, "body": "hmm, when you say &quot;all values to the handle_method&quot;, do you mean like individual methods to handle various events? If that&#39;s the case, then I don&#39;t understand what&#39;s stopping you from making the individual &quot;handler_methods&quot;."}, {"owner": {"reputation": 437, "user_id": 4643020, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10152761017948295/picture?type=large", "display_name": "Michael Lombardo", "link": "https://stackoverflow.com/users/4643020/michael-lombardo"}, "reply_to_user": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "edited": false, "score": 0, "creation_date": 1475616520, "post_id": 39861519, "comment_id": 67012078, "body": "yes! like this <code>def call(event)</code> is suppose to receive the event and then inside i use the event value which is the specific event that was just sent as a webhook"}], "answers": [{"comments": [{"owner": {"reputation": 437, "user_id": 4643020, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10152761017948295/picture?type=large", "display_name": "Michael Lombardo", "link": "https://stackoverflow.com/users/4643020/michael-lombardo"}, "edited": false, "score": 0, "creation_date": 1475622057, "post_id": 39862433, "comment_id": 67014118, "body": "Yea that was my initial thought until a guy on there support side said its a good idea to just call all of the events into one, but yea ill just do it this way. also you&#39;re creating separate controllers for each one? is that alot of controllers? or can i have multiple classes in a controller?"}, {"owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "reply_to_user": {"reputation": 437, "user_id": 4643020, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10152761017948295/picture?type=large", "display_name": "Michael Lombardo", "link": "https://stackoverflow.com/users/4643020/michael-lombardo"}, "edited": false, "score": 0, "creation_date": 1475622631, "post_id": 39862433, "comment_id": 67014252, "body": "@MichaelLombardo Sorry, these aren&#39;t rails controllers. These are just plain ruby classes which have a method <code>call</code> and take <code>event</code> as an argument. I have edited my answer to not use the word controller as it&#39;s bit confusing. All the controller level handling is done in the gem and the gem only uses one controller see <a href=\"https://github.com/integrallis/stripe_event/blob/master/app/controllers/stripe_event/webhook_controller.rb\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 437, "user_id": 4643020, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10152761017948295/picture?type=large", "display_name": "Michael Lombardo", "link": "https://stackoverflow.com/users/4643020/michael-lombardo"}, "edited": false, "score": 0, "creation_date": 1475624003, "post_id": 39862433, "comment_id": 67014573, "body": "Im getting an error /Users/michael/Desktop/projects/ScribeOwl/config/initializer&zwnj;&#8203;s/stripe.rb:13:in `block in &lt;top (required)&gt;&#39;: uninitialized constant ChargeSucceeded"}], "tags": [], "owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "is_accepted": true, "score": 1, "last_activity_date": 1475622521, "last_edit_date": 1475622521, "creation_date": 1475618388, "answer_id": 39862433, "question_id": 39861519, "link": "https://stackoverflow.com/questions/39861519/how-to-call-handler-methods-in-an-initializer-creating-webhooks/39862433#39862433", "title": "How to call handler methods in an initializer? creating webhooks", "body": "<p>I wanted to put this in comments but it's too big for a comment. After quickly reading the documentation <a href=\"https://github.com/integrallis/stripe_event#usage\" rel=\"nofollow\">here</a>, I have written down below of my understanding of how to use the <code>stripe_event</code> gem.</p>\n\n<p>So, <code>initializers/stripe.rb</code> you need something like the code block below. All you need to do is call <code>events.subscribe</code> in the configure block with the name of the event and an instance of class which would handle that event. You don't need to handle all the events using just one object. </p>\n\n<pre><code>StripeEvent.configure do |events|\n    events.subscribe 'charge.succeeded', ChargeSucceeded.new\n    event.subscribe 'customer.created', CustomerCreated.new\n    event.subscribe 'account.application.deauthorized', Deauthorised.new\nend\n</code></pre>\n\n<p>Then the classes which handle the events would look something like this:</p>\n\n<pre><code>class ChargeSucceeded\n  def call(event)\n    #Code to handle event 'charge.succeeded'\n  end\nend\n\nclass CustomerCreated\n  def call(event)\n    #Code to handle event 'customer.created'\n  end\nend\n\nclass Deauthorised\n  def call(event)\n    #Code to handle event 'account.application.deauthorized'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 437, "user_id": 4643020, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10152761017948295/picture?type=large", "display_name": "Michael Lombardo", "link": "https://stackoverflow.com/users/4643020/michael-lombardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 39862433, "answer_count": 1, "score": 0, "last_activity_date": 1475622521, "creation_date": 1475614217, "last_edit_date": 1475615520, "question_id": 39861519, "link": "https://stackoverflow.com/questions/39861519/how-to-call-handler-methods-in-an-initializer-creating-webhooks", "title": "How to call handler methods in an initializer? creating webhooks", "body": "<p>I want to receive stripe web-hooks live and in order to do that I have to use an initializer. Using Stripe_events gem.  Im not too familiar with initializers, but I'm here to learn!  </p>\n\n<p>-I want my <code>event</code>(webhook) to get called with the handler_method. </p>\n\n<p>My initializers/stripe.rb  </p>\n\n<pre class=\"lang-rails prettyprint-override\"><code>Rails.configuration.stripe = {\n  :publishable_key =&gt; ENV['STRIPE_PUBLISHABLE_KEY'],\n  :secret_key =&gt; ENV['STRIPE_SECRET_KEY']\n\n}\n\nStripe.api_key = Rails.configuration.stripe[:secret_key]\n\n\nStripeEvent.configure do |events|\n    events.subscribe 'charge.succeeded', ReservationsController.new\n    events.all = AllEvents.new\n\n\n\nend\n</code></pre>\n\n<p>As you can see I set events.all = AllEvents.new<br>\nI want to call all of the events into this one stripe_handler. Based on what the event.type is Ex.<code>'charge.succeeded'</code></p>\n\n<pre><code>if event.type == 'charge.succeeded' \n\netc........\n\nend\n</code></pre>\n\n<p>in app/stripe_handlers/all_events.rb</p>\n\n<pre class=\"lang-rails prettyprint-override\"><code>class AllEvents\n  def call(event)\n\n    if event.type == 'charge.succeeded'\n\n        reservation = Reservation.find_by_transaction_id(event.object.id)\n        reservation.update_attributes pay_completed: true\n\n        # reservation = Reservation.find_by_transaction_id\n    elsif event.type == 'customer.created'\n\n\n    elsif event.type == 'account.application.deauthorized'\n\n            # look out for account.updated and check if the account ID is unknown\n\n  end\nend\nend\n</code></pre>\n\n<p>All in all, I want to send the events.all values to the handler_methods where I can make actions for each webhook.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "homebrew", "activesupport"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 1, "creation_date": 1475612007, "post_id": 39860936, "comment_id": 67009870, "body": "The error message is telling you to run <code>brew link autoconf</code> before it can upgrade automake.  Did you do that?"}, {"owner": {"reputation": 4750, "user_id": 2650407, "user_type": "registered", "accept_rate": 91, "profile_image": "https://graph.facebook.com/1172460015/picture?type=large", "display_name": "Tom Hammond", "link": "https://stackoverflow.com/users/2650407/tom-hammond"}, "edited": false, "score": 0, "creation_date": 1475612596, "post_id": 39860936, "comment_id": 67010149, "body": "can you just try rvm install 2.3.1? I feel like I installed that version that way a few months ago"}, {"owner": {"reputation": 163, "user_id": 4203814, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-NmsXU-R8K-I/AAAAAAAAAAI/AAAAAAAAADM/GQgTUr9mChg/photo.jpg?sz=128", "display_name": "Steven Ossorio", "link": "https://stackoverflow.com/users/4203814/steven-ossorio"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1475612709, "post_id": 39860936, "comment_id": 67010201, "body": "@infused you got that right. After I ran &quot;brew link autoconf&quot; everything has been installing smoothly. I was even able to install 2.3.1 finally. Thank you. Can&#39;t believe I missed that small part."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1475620627, "last_edit_date": 1475620627, "creation_date": 1475620243, "answer_id": 39862755, "question_id": 39860936, "link": "https://stackoverflow.com/questions/39860936/cant-update-ruby-resulting-in-rails-error/39862755#39862755", "title": "Can&#39;t update Ruby resulting in Rails error", "body": "<blockquote>\n  <p>sudo gem install rails</p>\n</blockquote>\n\n<p>Rule #1 when working with RVM (or rbenv) is do NOT use <code>sudo</code> except for multi-user installs (which are not encouraged by the maintainers).</p>\n\n<p>By default, RVM and rbenv manage Rubies installed using them in a separate folder in your home directory where you already have full privileges to install/update/remove Rubies or gems. Use whichever manager you want to install/remove Ruby and set it as a default, then use <code>gem install ...</code> to install gems.</p>\n\n<p>Using <code>sudo</code> changes your effective user to the sysadmin, which has a different idea where the RVM/rbenv managed Rubies and the associated gems live.</p>\n\n<p>After issuing <code>rvm install ruby-2.3.1</code> you should do</p>\n\n<pre><code>rvm use 2.3.1 --default\n</code></pre>\n\n<p>to tell RVM which Ruby you want to use.</p>\n\n<p><code>rvm info</code> will tell you what RVM knows about its world.</p>\n\n<p>The error you get is probably because your vendor-installed version of Rails is out of date, and <code>sudo</code> is the root-cause of that occurring. Try <code>gem install rails</code> and you should be OK.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6505787, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZX0CvnpcFvk/AAAAAAAAAAI/AAAAAAAAAM8/c3s4HsRDhU4/photo.jpg?sz=128", "display_name": "Ferm&#237;n Alejandro Moreno C.", "link": "https://stackoverflow.com/users/6505787/ferm%c3%adn-alejandro-moreno-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1475620929, "creation_date": 1475620929, "answer_id": 39862870, "question_id": 39860936, "link": "https://stackoverflow.com/questions/39860936/cant-update-ruby-resulting-in-rails-error/39862870#39862870", "title": "Can&#39;t update Ruby resulting in Rails error", "body": "<p>First upgrade ruby with <code>rvm upgrade 2.1.2 2.3.1</code>\nThat should do the trick if you have rvm installed correctly. Once it's done you can install rails with <code>sudo gem install rails</code></p>\n"}], "owner": {"reputation": 163, "user_id": 4203814, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-NmsXU-R8K-I/AAAAAAAAAAI/AAAAAAAAADM/GQgTUr9mChg/photo.jpg?sz=128", "display_name": "Steven Ossorio", "link": "https://stackoverflow.com/users/4203814/steven-ossorio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475620929, "creation_date": 1475611791, "last_edit_date": 1475620062, "question_id": 39860936, "link": "https://stackoverflow.com/questions/39860936/cant-update-ruby-resulting-in-rails-error", "title": "Can&#39;t update Ruby resulting in Rails error", "body": "<p>I checked the list for   <a href=\"http://railsapps.github.io/installrubyonrails-mac.html\" rel=\"nofollow\">http://railsapps.github.io/installrubyonrails-mac.html</a>  trying to reinstall Rails and have been trying to update it for the last 2+ hours. </p>\n\n<p>This is what I get at the terminal:</p>\n\n<pre><code>Stevens-MBP:Desktop Steven$ rvm install ruby-2.3.1\nSearching for binary rubies, this might take some time.\nNo binary rubies available for: osx/10.11/x86_64/ruby-2.3.1.\nContinuing with compilation. Please read 'rvm help mount' to get more    information on binary rubies.\nChecking requirements for osx.\n==&gt; Upgrading 1 outdated package, with result:\nautomake 1.15\nError: You must `brew link autoconf` before automake can be installed\nRequirements installation failed with status: 1.\n</code></pre>\n\n<p>Here is additional information:</p>\n\n<pre><code>Stevens-MBP:Desktop Steven$ rails -v\nRails is not currently installed on this system. To get the latest version,  simply type:\n\n$ sudo gem install rails\n\nYou can then rerun your \"rails\" command.\nStevens-MBP:Desktop Steven$ ruby -v\nruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-darwin14.0]\nStevens-MBP:Desktop Steven$ \n</code></pre>\n\n<p>When I type <code>sudo gem install rails</code> I get:</p>\n\n<pre><code>ERROR:  Error installing rails:\n activesupport requires Ruby version &gt;= 2.2.2.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475620908, "post_id": 39860892, "comment_id": 67013750, "body": "We&#39;d like to see your attempt to solve this. Without that evidence of effort it looks like you want us to do the work you&#39;re supposed to have done. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"http://meta.stackoverflow.com/a/261593/128421\">How much research effort is expected of Stack Overflow users?</a>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": false, "score": 0, "last_activity_date": 1475612327, "creation_date": 1475612327, "answer_id": 39861053, "question_id": 39860892, "link": "https://stackoverflow.com/questions/39860892/simplest-way-to-sum-2d-array-elements-based-on-duplicates/39861053#39861053", "title": "Simplest way to sum 2D array elements based on duplicates?", "body": "<p>Try following with <code>inject</code> method:</p>\n\n<pre><code>data = [[\"oct 1\", 4], [\"oct 2\", 5], [\"oct 3\", 9], [\"oct 1\", 2]]\ndata.inject({}) { |sum, (n, t)| sum[n] ||= 0; sum[n] += t; sum }.to_a\n=&gt; [[\"oct 1\", 6], [\"oct 2\", 5], [\"oct 3\", 9]]\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6483984"}, "edited": false, "score": 0, "creation_date": 1475676356, "post_id": 39861139, "comment_id": 67038980, "body": "Thanks, great answer. As for my code formatting, I&#39;m new to the site so I thought just a pseudo implementation would be OK, my bad!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6483984"}, "edited": false, "score": 0, "creation_date": 1477600804, "post_id": 39861139, "comment_id": 67846091, "body": "Any tips on how to generalize this onto for example a 4D array?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1477601625, "post_id": 39861139, "comment_id": 67846485, "body": "That would depend on what the array would look like. For example, would the same key be present at different &quot;levels&quot;? Best to post a separate question (with an example)."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1475616160, "last_edit_date": 1475616160, "creation_date": 1475612672, "answer_id": 39861139, "question_id": 39860892, "link": "https://stackoverflow.com/questions/39860892/simplest-way-to-sum-2d-array-elements-based-on-duplicates/39861139#39861139", "title": "Simplest way to sum 2D array elements based on duplicates?", "body": "<p>Here are a couple of ways of doing that, my preference being the first.</p>\n\n<p><strong>Use a <em>counting hash</em></strong></p>\n\n<p><em>Code</em></p>\n\n<pre><code>def combine(data)\n  data.each_with_object(Hash.new(0)) { |(date, val), h| h[date] += val }.to_a\nend\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-c-new\" rel=\"nofollow\">Hash::new</a>, the discussion of the default value in particular.</p>\n\n<p><em>Example</em></p>\n\n<pre><code>data = [['oct 1', 4], ['oct 2', 5], ['oct 3', 9], ['oct 1', 2]]\ncombine data \n  #=&gt; [[\"oct 1\", 6], [\"oct 2\", 5], [\"oct 3\", 9]]\n</code></pre>\n\n<p><em>Explanation</em></p>\n\n<pre><code>enum = data.each_with_object(Hash.new(0))\n  #=&gt; #&lt;Enumerator: [[\"oct 1\", 4], [\"oct 2\", 5], [\"oct 3\", 9],\n  #                  [\"oct 1\", 2]]:each_with_object({})&gt; \n</code></pre>\n\n<p>We can see the values generated by this enumerator by converting it to an array.</p>\n\n<pre><code>enum.to_a\n  #=&gt; [[[\"oct 1\", 4], {}], [[\"oct 2\", 5], {}], [[\"oct 3\", 9], {}],\n  #    [[\"oct 1\", 2], {}]]\n</code></pre>\n\n<p>The first value of <code>enum</code> is passed to the block and the values of the block variables are computed, using <em>disambiguation</em> and <em>parallel assignment</em>.</p>\n\n<pre><code>(date, val), h = enum.next\n  #=&gt; [[\"oct 1\", 4], {}] \ndate\n  #=&gt; \"oct 1\"      \nval\n  #=&gt; 4\n\nh[date] += val\n  #=&gt; h[date] = h[date] + val\n  #=&gt; h[\"oct 1\"] = h[\"oct 1\"] + 4\n  #=&gt; h[\"oct 1\"] = 0 + 4 (no key \"oct 1\" so default value of `0` used)\n  #=&gt; h[\"oct 1\"] = 4 \n</code></pre>\n\n<p>Now,</p>\n\n<pre><code>h #=&gt; {\"oct 1\"=&gt;4} \n</code></pre>\n\n<p>The remaining three values of <code>enum</code> are passed to the block and the block calculations are performed.</p>\n\n<pre><code>(date, val), h = enum.next\n  #=&gt; [[\"oct 2\", 5], {\"oct 1\"=&gt;4}]\nh[date] += val \n  #=&gt; 5 (the default value of `0` is again used)\nh #=&gt; {\"oct 1\"=&gt;4, \"oct 2\"=&gt;5} \n\n(date, val), h = enum.next\n  #=&gt; [[\"oct 3\", 9], {\"oct 1\"=&gt;4, \"oct 2\"=&gt;5}] \nh[date] += val\n  #=&gt; 9 (the default value of `0` is again used)\nh #=&gt; {\"oct 1\"=&gt;4, \"oct 2\"=&gt;5, \"oct 3\"=&gt;9} \n\n(date, val), h = enum.next\n  #=&gt; [[\"oct 1\", 2], {\"oct 1\"=&gt;4, \"oct 2\"=&gt;5, \"oct 3\"=&gt;9}] \nh[date] += val\n  #=&gt; 6 \nh #=&gt; {\"oct 1\"=&gt;6, \"oct 2\"=&gt;5, \"oct 3\"=&gt;9} \n</code></pre>\n\n<p>In the last calculation, the default value was not used because the hash <code>h</code> already had a key <code>\"oct 1\"</code>:</p>\n\n<pre><code>h[date] += val\n  #=&gt; h[date] = h[date] + val\n  #=&gt; h[\"oct 1\"] = h[\"oct 1\"] + 2\n  #=&gt; h[\"oct 1\"] = 4 + 2\n</code></pre>\n\n<p>Lastly,</p>\n\n<pre><code>h.to_a\n  #=&gt; [[\"oct 1\", 6], [\"oct 2\", 5], [\"oct 3\", 9]]\n</code></pre>\n\n<p><strong>Use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-group_by\" rel=\"nofollow\">Enumerable#group_by</a></strong></p>\n\n<p><em>Code</em></p>\n\n<pre><code>def combine(data) \n  data.group_by(&amp;:first).map { |date, vals| [date, vals.map(&amp;:last).reduce(:+)] }\nend\n</code></pre>\n\n<p><em>Example</em></p>\n\n<pre><code>combine data \n  #=&gt; [[\"oct 1\", 6], [\"oct 2\", 5], [\"oct 3\", 9]]\n</code></pre>\n\n<p><em>Explanation</em></p>\n\n<p>The steps:</p>\n\n<pre><code>h = data.group_by(&amp;:first)\n  #=&gt; {\"oct 1\"=&gt;[[\"oct 1\", 4], [\"oct 1\", 2]],\n  #    \"oct 2\"=&gt;[[\"oct 2\", 5]], \"oct 3\"=&gt;[[\"oct 3\", 9]]} \n</code></pre>\n\n<p>The first key-value pair of <code>h</code> is passed to the block:</p>\n\n<pre><code>date, vals = h.first\n  #=&gt; [\"oct 1\", [[\"oct 1\", 4], [\"oct 1\", 2]]] \ndate\n  #=&gt; \"oct 1\" \nvals\n  #=&gt; [[\"oct 1\", 4], [\"oct 1\", 2]] \n</code></pre>\n\n<p>and the block calculation is performed.</p>\n\n<pre><code>a = vals.map(&amp;:last)\n  #=&gt; [4, 2] \nt = a.reduce(:+)\n  #=&gt; 6 \n</code></pre>\n\n<p>So the first key-value pair of <code>h</code> is mapped to</p>\n\n<pre><code>[date, t]\n  #=&gt; [\"oct 1\", 6]\n</code></pre>\n\n<p>The remaining calculations are similar.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6483984"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 39861139, "answer_count": 2, "score": -2, "last_activity_date": 1475631308, "creation_date": 1475611614, "last_edit_date": 1475631308, "question_id": 39860892, "link": "https://stackoverflow.com/questions/39860892/simplest-way-to-sum-2d-array-elements-based-on-duplicates", "title": "Simplest way to sum 2D array elements based on duplicates?", "body": "<p>So say I have a 2D array. Maybe something like:</p>\n\n<pre><code>data = [['oct 1', 4], ['oct 2', 5], ['oct 3', 9], ['oct 1', 2]]\n</code></pre>\n\n<p>And I want to get a new array out of this, that removes the duplicate values (eg. oct 1), but sums the corresponding values. </p>\n\n<p>So I would end up with:</p>\n\n<pre><code>data = (['oct 1', 6], ['oct 2', 5], ['oct 3', 9])\n</code></pre>\n\n<p>I can think of a few ways to do this but they seem pretty inefficent and usually there's always some crazy ruby code that can do anything in a few lines, any suggestions? </p>\n"}, {"tags": ["ruby", "time", "formatting", "leading-zero"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1475648951, "post_id": 39860678, "comment_id": 67021105, "body": "Is <code>time_in_ms</code> a method or should it be an argument? If not, it&#39;s an uninitialized local variable, which will raise an exception."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6447029"}, "edited": false, "score": 0, "creation_date": 1475611917, "post_id": 39860885, "comment_id": 67009832, "body": "NOr does it work if time_in_ms = 60000 (1 minute).  The output is &quot;01:00&quot;"}], "tags": [], "owner": {"reputation": 1185, "user_id": 2099148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d451ee2c3307e3419d6a3b2cc2d2c31d?s=128&d=identicon&r=PG", "display_name": "M_G", "link": "https://stackoverflow.com/users/2099148/m-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1475611970, "last_edit_date": 1475611970, "creation_date": 1475611601, "answer_id": 39860885, "question_id": 39860678, "link": "https://stackoverflow.com/questions/39860678/how-do-i-eliminate-leading-zeroes-from-my-time-conversion-function/39860885#39860885", "title": "How do I eliminate leading zeroes from my time conversion function?", "body": "<p>You could use a regex pattern to remove the leading zeroes</p>\n\n<pre><code>def time_formatted\n    Time.at(time_in_ms/1000).utc.strftime(\"%H:%M:%S\").sub(/^(0+:?)*/, '')\nend\n</code></pre>\n\n<p><a href=\"http://rubular.com/r/NbSnQE9wDu\" rel=\"nofollow\">http://rubular.com/r/NbSnQE9wDu</a></p>\n"}, {"comments": [{"owner": {"reputation": 1185, "user_id": 2099148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d451ee2c3307e3419d6a3b2cc2d2c31d?s=128&d=identicon&r=PG", "display_name": "M_G", "link": "https://stackoverflow.com/users/2099148/m-g"}, "edited": false, "score": 1, "creation_date": 1475615245, "post_id": 39860927, "comment_id": 67011437, "body": "0* at the end of the regex is superfluous"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1475648592, "post_id": 39860927, "comment_id": 67020966, "body": "An edge case: <code>&quot;00:00:00&quot;.sub &#47;^(0*:?)*&#47;, &#39;&#39; #=&gt; &quot;&quot;</code>, but it should return <code>&quot;0&quot;</code>."}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": true, "score": 0, "last_activity_date": 1475615315, "last_edit_date": 1475615315, "creation_date": 1475611744, "answer_id": 39860927, "question_id": 39860678, "link": "https://stackoverflow.com/questions/39860678/how-do-i-eliminate-leading-zeroes-from-my-time-conversion-function/39860927#39860927", "title": "How do I eliminate leading zeroes from my time conversion function?", "body": "<p>say you have </p>\n\n<pre><code>time = \"00:37:25\"\n</code></pre>\n\n<p>You can use regex to remove the leading zeroes</p>\n\n<pre><code>regex = /^(0*:?)*/\n</code></pre>\n\n<p>Then you can run <code>sub!</code></p>\n\n<pre><code>str.sub!(regex, '') #=&gt; 35:25\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1475648411, "last_edit_date": 1475648411, "creation_date": 1475616914, "answer_id": 39862144, "question_id": 39860678, "link": "https://stackoverflow.com/questions/39860678/how-do-i-eliminate-leading-zeroes-from-my-time-conversion-function/39862144#39862144", "title": "How do I eliminate leading zeroes from my time conversion function?", "body": "<pre><code>r = /\n    \\A      # match beginning of string\n    (?:00:) # match string '00:' in a non-capture group\n    *       # perform above non-capture group match zero or more times, greedily\n    0?      # optionally match a zero\n    \\K      # discard all matches so far\n    .+      # match rest of string\n    /x      # free-spacing regex definition mode\n\n\"00:00:00\"[r] #=&gt; \"0\" \n\"00:00:01\"[r] #=&gt; \"1\" \n\"00:00:21\"[r] #=&gt; \"21\" \n\"00:02:11\"[r] #=&gt; \"2:11\" \n\"00:12:11\"[r] #=&gt; \"12:11\" \n\"02:13:14\"[r] #=&gt; \"2:13:14\" \n\"12:13:14\"[r] #=&gt; \"12:13:14\" \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6447029"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 39860927, "answer_count": 3, "score": 0, "last_activity_date": 1475648411, "creation_date": 1475610760, "question_id": 39860678, "link": "https://stackoverflow.com/questions/39860678/how-do-i-eliminate-leading-zeroes-from-my-time-conversion-function", "title": "How do I eliminate leading zeroes from my time conversion function?", "body": "<p>I'm using Rails 4.2.7.  I have this function for converting time in milliseconds to a readable string</p>\n\n<pre><code>  def time_formatted\n    Time.at(time_in_ms/1000).utc.strftime(\"%H:%M:%S\")\n  end\n</code></pre>\n\n<p>My question is, if I have something less than an hour, the function returns \u201c00:37:25\u201d or if I have something less than 10 minutes, the function returns \u201c00:07:52\u201d.    How do I eliminate leading zeroes from my function?</p>\n"}, {"tags": ["ruby", "string", "file", "parsing", "variables"], "comments": [{"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1475610468, "post_id": 39860218, "comment_id": 67009150, "body": "So your class is having all the instance variables defined for all the 200 files"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4690547, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206257770063864/picture?type=large", "display_name": "Jordan Kostov", "link": "https://stackoverflow.com/users/4690547/jordan-kostov"}, "edited": false, "score": 0, "creation_date": 1475611281, "post_id": 39860752, "comment_id": 67009537, "body": "Thanks a lot, that will do! Here is another way with Sub I just found!  @text.sub! &#39;#{@number}&#39;, &quot;#{@number}&quot; @text.sub! &#39;#{@damage}&#39;, &quot;#{@damage}&quot;"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1475611793, "last_edit_date": 1475611793, "creation_date": 1475611048, "answer_id": 39860752, "question_id": 39860218, "link": "https://stackoverflow.com/questions/39860218/can-you-use-a-part-of-string-read-from-text-as-a-variable-in-ruby/39860752#39860752", "title": "Can you use a part of string, read from text, as a variable in Ruby?", "body": "<pre><code>@text = \"This is what's in my file. Put #{@number} mines with #{@damage} damage. How now, brown cow?\"\n</code></pre>\n\n<p></p>\n\n<pre><code>@number = 3\n@damage = 5\nregex = /Put #{@number} mines with #{@damage} damage./\n@text[regex]\n  #=&gt; \"Put 3 mines with 5 damage.\"\n</code></pre>\n\n<p>beginning at offset</p>\n\n<pre><code>$~.offset(0).first\n  #=&gt; 27\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4690547, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206257770063864/picture?type=large", "display_name": "Jordan Kostov", "link": "https://stackoverflow.com/users/4690547/jordan-kostov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 39860752, "answer_count": 1, "score": 1, "last_activity_date": 1475611793, "creation_date": 1475609067, "question_id": 39860218, "link": "https://stackoverflow.com/questions/39860218/can-you-use-a-part-of-string-read-from-text-as-a-variable-in-ruby", "title": "Can you use a part of string, read from text, as a variable in Ruby?", "body": "<p>I am trying to parse some text from files (about 200 files) into an app but I want some of the text to get result from variables. Here is an example.\nI got a file called \"Description.txt\".</p>\n\n<p>The text in the file is this one \"Put #{@number} mines with #{@damage} damage.\"</p>\n\n<pre><code>@number = 3\n@damage = 5\n@text = File.read(\"Description.txt\")\n\n####When I print the variable I want to get this\necho @text\n\n\"Put 3 mines with 5 damage.\"\n</code></pre>\n\n<p>Is it possible?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1475611462, "post_id": 39860208, "comment_id": 67009629, "body": "can you provide more details on what you are looking for? I&#39;m not sure I get it. Like a pseudo code version of what you want and a desired result."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475618123, "post_id": 39860208, "comment_id": 67012795, "body": "Your question is premature. You need to try, and when you can&#39;t try further show us a minimal example of your effort with an explanation of why it doesn&#39;t do what you want. Asking us how to do it is asking for a tutorial. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;, along with &quot;<a href=\"http://meta.stackoverflow.com/a/261593/128421\">How much research effort is expected of Stack Overflow users?</a>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1475618227, "post_id": 39861172, "comment_id": 67012830, "body": "Tossing out an answer when you&#39;re not sure what is being asked wastes your time. Instead ask for clarification then answer."}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1475612781, "creation_date": 1475612781, "answer_id": 39861172, "question_id": 39860208, "link": "https://stackoverflow.com/questions/39860208/map-implementation-ruby-retrieve-values-of-key/39861172#39861172", "title": "Map Implementation Ruby retrieve values of key", "body": "<p>I'm afread I misunderstand your question, if not correct please elaborate more and show us what you mean by time</p>\n\n<p>First a hash of hashes</p>\n\n<pre><code>T = {0 =&gt; {A: 0}, 1 =&gt; {A: 1}, 2 =&gt; {A: 1}, 3 =&gt; {A: 3}}\nT[0] # {:A=&gt;0}\n</code></pre>\n\n<p>Then a method to get the value given the time and key</p>\n\n<pre><code>def get(key, time)\n  T[time][key]\nend\n\nget(:A, 1) # 1\n</code></pre>\n\n<p>Is that what you want ?</p>\n"}], "owner": {"reputation": 1, "user_id": 6765922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f7a45d011b7e96881d87b9cf67a830?s=128&d=identicon&r=PG&f=1", "display_name": "manyo", "link": "https://stackoverflow.com/users/6765922/manyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1475612781, "creation_date": 1475609040, "question_id": 39860208, "link": "https://stackoverflow.com/questions/39860208/map-implementation-ruby-retrieve-values-of-key", "title": "Map Implementation Ruby retrieve values of key", "body": "<p>How would I write a map implementation with a get function that lets me retrieve the value of a key at a particular time. t:0 A =1 t:2 A = 2 get(A, t:1) -> 1 get(A, t:3) -> 2 </p>\n\n<p>I know that this will involve a hash somewhere but I can figure out how to implement it.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 6888969, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad17c6acb0d182f7576fd0dbb030177b?s=128&d=identicon&r=PG&f=1", "display_name": "AbUndZu", "link": "https://stackoverflow.com/users/6888969/abundzu"}, "edited": false, "score": 0, "creation_date": 1475609325, "post_id": 39860242, "comment_id": 67008510, "body": "funny question, but &quot;is equivalent to&quot; means the top instructions are the same than bot, or are you talking about bottom instructions (as === - is equivalent)? edit: i checked it, thanks"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1475621540, "last_edit_date": 1475621540, "creation_date": 1475609148, "answer_id": 39860242, "question_id": 39860081, "link": "https://stackoverflow.com/questions/39860081/what-types-of-instructions-can-i-put-under-case-when-statements/39860242#39860242", "title": "what types of instructions can i put under (case) when statements?", "body": "<pre><code>case x\nwhen y\n  puts \"y\"\nwhen z\n  puts \"z\"\nend\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>if y === x\n  puts \"y\"\nelsif z === x\n  puts \"z\"\nend\n</code></pre>\n\n<p>For example</p>\n\n<pre><code>case \"hello\"\nwhen Array\n  puts \"Array\"\nwhen String\n  puts \"String\"\nend\n  #=&gt; \"String\"\n\nx = \"hello\"\nif Array === x\n  puts \"Array\"\nelsif String === x\n  puts \"String\"\nend\n  #=&gt; \"String\"\n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>Array.method(:===).owner \n  #=&gt; Module \nString.method(:===).owner \n  #=&gt; Module \n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.3.0/Module.html#method-i-3D-3D-3D\" rel=\"nofollow\">Module#===</a>.</p>\n\n<p>So when you write</p>\n\n<pre><code>case massIndex\nwhen &gt;= 30.0\n  \"obese\"\n...\n</code></pre>\n\n<p>Ruby attempts to evaluate</p>\n\n<pre><code>(&gt;= 30.0) === massIndex\n</code></pre>\n\n<p>causing her to raise a syntax error.</p>\n\n<p>Here's another example that illustrates the usefulness of the method <code>===</code>.</p>\n\n<pre><code>case \"spiggot\"\nwhen /cat/ then \"cat\"\nwhen /dog/ then \"dog\"\nwhen /pig/ then \"pig\"\nend\n  #=&gt; pig\n</code></pre>\n\n<p>Since</p>\n\n<pre><code>/cat/.method(:===).owner\n  #=&gt; Regexp \n</code></pre>\n\n<p>see <a href=\"http://ruby-doc.org/core-2.3.0/Regexp.html#method-i-3D-3D-3D\" rel=\"nofollow\">Regexp#===</a>.</p>\n\n<p><a href=\"http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/\" rel=\"nofollow\">Here</a> is an excellent article about the <code>case</code> statement. </p>\n"}, {"tags": [], "owner": {"reputation": 2062, "user_id": 627098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70c108c0bd4596404d4bfb01d8688b74?s=128&d=identicon&r=PG", "display_name": "kwicher", "link": "https://stackoverflow.com/users/627098/kwicher"}, "is_accepted": false, "score": 2, "last_activity_date": 1475609328, "creation_date": 1475609328, "answer_id": 39860295, "question_id": 39860081, "link": "https://stackoverflow.com/questions/39860081/what-types-of-instructions-can-i-put-under-case-when-statements/39860295#39860295", "title": "what types of instructions can i put under (case) when statements?", "body": "<pre><code>   case \n    when massIndex &gt;= 30.0\n     \"obese\"\n    [some instructions like this]\n    else\n     \"error\"\n   end\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 6888969, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad17c6acb0d182f7576fd0dbb030177b?s=128&d=identicon&r=PG&f=1", "display_name": "AbUndZu", "link": "https://stackoverflow.com/users/6888969/abundzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 39860242, "answer_count": 2, "score": 2, "last_activity_date": 1475621540, "creation_date": 1475608590, "last_edit_date": 1475617161, "question_id": 39860081, "link": "https://stackoverflow.com/questions/39860081/what-types-of-instructions-can-i-put-under-case-when-statements", "title": "what types of instructions can i put under (case) when statements?", "body": "<p>What types of instructions can I put under when?  Some of my code works under if/else, but does not work under case when.</p>\n\n<p>For example</p>\n\n<pre><code>def categories(massIndex)\n  case massIndex\n  when &gt;= 30.0\n    \"obese\"\n    #[some instructions like this]\n  else\n    \"error\"\n  end\nend\n</code></pre>\n\n<p>I always see error like this:</p>\n\n<pre><code>bmi.rb:8: syntax error, unexpected &gt;=\nwhen &gt;= 30.0\n</code></pre>\n\n<p>But when i do it with if/else, it works:</p>\n\n<pre><code>def categories(massIndex)\n  if massIndex &gt;= 25\n    \"something\"\n  else\n    \"error\"\n  end\nend\n</code></pre>\n\n<p>Can I fix it still using case, or must I use the if/else? </p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "edited": false, "score": 0, "creation_date": 1475689282, "post_id": 39860080, "comment_id": 67047656, "body": "I keep getting an error that there&#39;s no user with id=&quot;delete&quot;......i dont understand"}], "tags": [], "owner": {"reputation": 6100, "user_id": 3704297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GjB9f.jpg?s=128&g=1", "display_name": "omikes", "link": "https://stackoverflow.com/users/3704297/omikes"}, "is_accepted": false, "score": 1, "last_activity_date": 1475608587, "creation_date": 1475608587, "answer_id": 39860080, "question_id": 39859967, "link": "https://stackoverflow.com/questions/39859967/rails-delete-nested-attribute-while-updating-entry/39860080#39860080", "title": "Rails: Delete nested attribute while updating entry", "body": "<p>You could use Jquery to call a function in Ruby to do it for you: </p>\n\n<p>Javascript:</p>\n\n<pre><code>$.get( \"delete\", { id: id_to_delete } )\n  .done(function( deleted ) {\n    alert( \"Deleted: \" + deleted.id );\n  });\n</code></pre>\n\n<p>Route (route.rb):</p>\n\n<pre><code>get 'delete', to: 'application_controller#delete'\n</code></pre>\n\n<p>Application Controller (application_controller.rb):</p>\n\n<pre><code>def delete\n    id = params[:id].to_i\n    to_delete = Hobby.find(id).destroy\n    render json: {id: id}\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "is_accepted": false, "score": 1, "last_activity_date": 1475608665, "creation_date": 1475608665, "answer_id": 39860103, "question_id": 39859967, "link": "https://stackoverflow.com/questions/39859967/rails-delete-nested-attribute-while-updating-entry/39860103#39860103", "title": "Rails: Delete nested attribute while updating entry", "body": "<p>Add a listener on click of the <code>remove</code> button for each activity and make an ajax request to your backend api which handles it. It will look something like below:</p>\n\n<pre><code>$('.activities').each(function(activity) {\n  $(activity).click(function(event) {\n    $.ajax\n      url: 'activity/:id',\n      method: delete,\n      success: function(data) { REMOVE ELEMENT IN HERE }\n      error: alert('this didnt work');\n  })\n})\n</code></pre>\n"}], "owner": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1475689636, "creation_date": 1475608146, "last_edit_date": 1475689636, "question_id": 39859967, "link": "https://stackoverflow.com/questions/39859967/rails-delete-nested-attribute-while-updating-entry", "title": "Rails: Delete nested attribute while updating entry", "body": "<p>I have a form with nested attributes, where you can dynamically add and remove attributes (the form lets you click \"add hobby\" and \"remove hobby\" links...a user has hobbies, and when entering his profile he can add one, two, five, or fifty hobbies). </p>\n\n<p>With the help of the <a href=\"https://github.com/ryanb/nested_form\" rel=\"nofollow\">nested form gem</a> this works completely fine. However, I also provide the ability to UPDATE a user's profile.</p>\n\n<p>When doing this, a user can click the dynamic \"remove\" link to take off a hobby. However, this doesn't delete the \"hobby\" from the database, like I want it to. So I'm trying to write Jquery or Javascript or something that deletes the object from the database, if it exists.</p>\n\n<p>This is what the code looks like:</p>\n\n<pre><code>  ...\n  ...\n  &lt;%= f.fields_for :hobbys, :wrapper =&gt; false do |hobby| %&gt;\n    &lt;tr class=\"fields\"&gt;\n      &lt;td&gt; &lt;%= user.text_field :hobby %&gt; &lt;/td&gt;\n      &lt;td&gt; &lt;%= user.link_to_remove \"Remove\" %&gt; &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n&lt;p&gt;&lt;%= f.link_to_add \"Add hobby\", :hobbys, :data =&gt; { :target =&gt; \"#hobbys\" } %&gt;&lt;/p&gt;\n\n&lt;script&gt;  \n  $(document).on('nested:fieldRemoved', function(event){\n  var field = event.field; \n  /* ??? Delete field somehow ??? */\n  })\n&lt;/script&gt;\n</code></pre>\n\n<p>Is there any way to do this? I really don't know how to go about it....it doesn't seem like Jquery can delete off a database...</p>\n\n<p>UPDATE</p>\n\n<p>here's my best attempt so far...</p>\n\n<pre><code>   ...\n  ...\n  &lt;%= f.fields_for :hobbys, :wrapper =&gt; false do |hobby| %&gt;\n    &lt;tr class=\"fields\"&gt;\n      &lt;td&gt; &lt;%= user.text_field :hobby %&gt; &lt;/td&gt;\n      &lt;td&gt; &lt;%= user.link_to_remove \"Remove\" %&gt; &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n&lt;p&gt;&lt;%= f.link_to_add \"Add hobby\", :hobbys, :data =&gt; { :target =&gt; \"#hobbys\" } %&gt;&lt;/p&gt;\n&lt;script&gt;  \n  $(document).on('nested:fieldRemoved', function(event){\n    $.get(\"delete\", { id: 2 })\n    alert( \"Deleted: \");\n })\n&lt;/script&gt;\n</code></pre>\n\n<p>I'm just trying to get this damn thing to work, by hardcoding an id as the argument (since I can't yet easily extract it). But it keeps using the string \"delete\" as the id of the user.....huh??</p>\n\n<p>Here's the log output:</p>\n\n<pre><code>Started GET \"/users/delete?id=2\" for 127.0.0.1 at 2016-10-05 08:35:15 -0400\nProcessing by UsersController#show as */*\n  Parameters: {\"id\"=&gt;\"delete\"}\n  Current user: anonymous\nCompleted 404 Not Found in 19.5ms\n\nActiveRecord::RecordNotFound (Couldn't find User with id=delete):\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "vps"], "comments": [{"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1475606986, "post_id": 39859448, "comment_id": 67007217, "body": "Have you migrated the database?"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "reply_to_user": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1475607075, "post_id": 39859448, "comment_id": 67007276, "body": "Yes it happend automaticaly in the Deploy with Capistrano"}, {"owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 1, "creation_date": 1475608321, "post_id": 39859448, "comment_id": 67007934, "body": "i think <code>&lt;%= link_to category_path (category) do %&gt;</code> should be <code>&lt;%= link_to category_path (category.id) do %&gt;</code>"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "reply_to_user": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1475608522, "post_id": 39859448, "comment_id": 67008057, "body": "ok, @SantoshSharma I tried that on the <code>localhost</code> but it gives error there, do you think it would work on the VPS?"}, {"owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1475608621, "post_id": 39859448, "comment_id": 67008107, "body": "@Slowboy. i am not sure about that."}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "reply_to_user": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1475609152, "post_id": 39859448, "comment_id": 67008415, "body": "I&#39;ll check it out after lunch, then I&#39;ll deploy again.. I&#180;ll let you know @SantoshSharma"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "reply_to_user": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "edited": false, "score": 0, "creation_date": 1475610864, "post_id": 39859448, "comment_id": 67009335, "body": "@SantoshSharma it didn&#39;t work when I deployed again, now I get this error <code>ActionView::Template::Error (undefined method </code>id&#39; for 9:Fixnum Did you mean?  i):`  it&#180;s the same error I get in the <code>localhost:3000</code> after using <code>&lt;%= link_to category_path (category.id) do %&gt;</code>"}, {"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "edited": false, "score": 0, "creation_date": 1475610889, "post_id": 39859448, "comment_id": 67009350, "body": "Yes, it is possible. It&#39;s complaining you&#39;re giving it a nil object."}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "reply_to_user": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "edited": false, "score": 0, "creation_date": 1475611010, "post_id": 39859448, "comment_id": 67009404, "body": "@eeeeeean Sorry what is possible?  what Santosh suggested? or because I destroyed categories with ID 1-8 on the VPS?"}, {"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "edited": false, "score": 1, "creation_date": 1475611723, "post_id": 39859448, "comment_id": 67009742, "body": "Because you destroyed the categories. On your VPS console, see if you have any lingering products that don&#39;t have corresponding categories. If so, you&#39;ll need to clear them out. Product.where(category_id: [*1..8]) will show them."}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "reply_to_user": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "edited": false, "score": 0, "creation_date": 1475611926, "post_id": 39859448, "comment_id": 67009834, "body": "Good guess @eeeeeean but when I run <code>Product.where(category_id: [*1..8]) </code> I get <code>Product Load (0.9ms)  SELECT &quot;products&quot;.* FROM &quot;products&quot; WHERE &quot;products&quot;.&quot;category_id&quot; IN (1, 2, 3, 4, 5, 6, 7, 8) =&gt; #&lt;ActiveRecord::Relation []&gt;</code>"}, {"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "edited": false, "score": 0, "creation_date": 1475620622, "post_id": 39859448, "comment_id": 67013634, "body": "It still looks like your have a product that points to a deleted category. My first step would be to rule that out."}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1475621761, "post_id": 39859448, "comment_id": 67014043, "body": "Oh I thought the [ ] ment this relation was empty"}, {"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1475624005, "post_id": 39859448, "comment_id": 67014574, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/124947/discussion-between-eeeeeean-and-slowboy\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1475624959, "post_id": 39863400, "comment_id": 67014806, "body": "Thank you for this great answer, It really helped me.  There was this one product without a category that crashed the App.."}], "tags": [], "owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "is_accepted": true, "score": 1, "last_activity_date": 1475624866, "creation_date": 1475624866, "answer_id": 39863400, "question_id": 39859448, "link": "https://stackoverflow.com/questions/39859448/actionviewtemplateerror-no-route-matches-action-show-controller-ca/39863400#39863400", "title": "ActionView::Template::Error (No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;categories&quot;, :id=&gt;nil} missing required keys: [:id]):", "body": "<p>It still looks like you have a Product objects with a category_id, but maybe that Category object is gone.</p>\n\n<p>I'd rule that out by looking for a Product that has a nil category. There is definitely a more elegant way to write this, but it looks like you don't have too many objects in your database right now, so this might work:</p>\n\n<p>In your VCS console:</p>\n\n<pre><code>Product.all.map { |p| {p.id =&gt; p.category} }\n</code></pre>\n\n<p>That will show you the Product's id, if any, and whether it points to a Category or to nil.</p>\n"}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2578, "favorite_count": 0, "accepted_answer_id": 39863400, "answer_count": 1, "score": 0, "last_activity_date": 1475624866, "creation_date": 1475606193, "last_edit_date": 1475617821, "question_id": 39859448, "link": "https://stackoverflow.com/questions/39859448/actionviewtemplateerror-no-route-matches-action-show-controller-ca", "title": "ActionView::Template::Error (No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;categories&quot;, :id=&gt;nil} missing required keys: [:id]):", "body": "<p>I know there are lots of posts here about similar issues, but none of them are helping me.</p>\n\n<p>My app is working great on <code>localhost</code> after deploying it using <code>Capistrano/passenger</code> to  <code>production mode</code> on a VPS I'm getting this error.  I haven't changed anything in the code, controllers or routes... so I'm without a clue why I'm getting this error.</p>\n\n<p>Can anyone help me with this???</p>\n\n<p>** EDIT ** </p>\n\n<p>Is it possible that this error is happening because I <code>destroyed</code> categories with ID 1-8 on the <code>VPS</code>.</p>\n\n<p>If I log into <code>rails console</code>this is the items in the <code>category</code> </p>\n\n<pre><code> Category Load (0.6ms)  SELECT \"categories\".* FROM \"categories\"\n =&gt; #&lt;ActiveRecord::Relation [#&lt;Category id: 9, name: \"Beauty &amp; Fragrance\",  created_at: \"2016-09-30 10:43:54\", updated_at: \"2016-10-04 16:35:41\"&gt;, # &lt;Category id: 10, name: \"Jewellery\", created_at: \"2016-10-04 16:36:40\",  updated_at: \"2016-10-04 16:36:40\"&gt;, #&lt;Category id: 11, name: \"Home Decor\",  created_at: \"2016-10-04 16:37:13\", updated_at: \"2016-10-04 16:37:13\"&gt;, # &lt;Category id: 12, name: \"Giftwrap and Cards\", created_at: \"2016-10-04 16:37:42\",  updated_at: \"2016-10-04 16:37:42\"&gt;]&gt;\n</code></pre>\n\n<p>So is it possible that the code in the index is looking for category item with ID from 1 to ....?</p>\n\n<p>** Update **</p>\n\n<p>when I run <code>Product.where(category_id: [*1..8])</code> I get <code>Product Load (0.9ms) SELECT \"products\".* FROM \"products\" WHERE \"products\".\"category_id\" IN (1, 2, 3, 4, 5, 6, 7, 8) =&gt; #&lt;ActiveRecord::Relation []&gt;</code></p>\n\n<p>So that is most likely not why this error is showing</p>\n\n<p>this is from the <code>production.log</code></p>\n\n<pre><code>ActionView::Template::Error (No route matches {:action=&gt;\"show\", :controller=&gt;\"categories\", :id=&gt;nil} missing required keys: [:id]):\n23:                                         &lt;% if index == 0 %&gt;\n24:                                         &lt;div class=\"col-lg-4 col-sm-6 col-xs-12 center-block \" &gt;\n25:                                 \n26:                                                 &lt;%= link_to category_path (category) do %&gt;\n27:                                                         &lt;%= image_tag product.image.url(:medium), class: \"img-responsive\" %&gt;\n28:                                                 &lt;% end %&gt;\n29:                                 &lt;div class=\"caption\"&gt;\napp/views/pages/index.html.erb:26:in `block (3 levels) in _app_views_pages_index_html_erb___619502042981659248_47242510413860'\napp/views/pages/index.html.erb:22:in `each'\napp/views/pages/index.html.erb:22:in `each_with_index'\napp/views/pages/index.html.erb:22:in `block (2 levels) in _app_views_pages_index_html_erb___619502042981659248_47242510413860'\napp/views/pages/index.html.erb:20:in `each'\napp/views/pages/index.html.erb:20:in `block in _app_views_pages_index_html_erb___619502042981659248_47242510413860'\napp/views/pages/index.html.erb:18:in `each'\napp/views/pages/index.html.erb:18:in `each_slice'\napp/views/pages/index.html.erb:18:in `_app_views_pages_index_html_erb___619502042981659248_47242510413860'\n</code></pre>\n\n<p>Here is the index method from the `pages_controller.rb</p>\n\n<pre><code> def index\n   @products = Product.all.order(created_at: :desc).group_by(&amp;:category_id)\n    @images  = [\"1.jpg\", \"2.jpg\", \"3.jpg\", \"4.jpg\", \"5.jpg\", \"6.jpg\", \"7.jpg\", \"8.jpg\", \"9.jpg\", \"10.jpg\"]\n    @random_no = rand(10)\n    @random_image = @images[@random_no]\nend\n</code></pre>\n\n<p>Here is the <code>categories_controller.rb</code></p>\n\n<pre><code>class CategoriesController &lt; ApplicationController\n  before_action :set_category, only: [:show, :edit, :update, :destroy]\ndef index\n  @categories = Category.all\nend\n\ndef show\n   @products = @category.products\n   @images  = [\"1.jpg\", \"2.jpg\", \"3.jpg\", \"4.jpg\", \"5.jpg\"]\n   @random_no = rand(5)\n   @random_image = @images[@random_no]\nend\n\nprivate\n  def set_category\n    @category = Category.includes(:products).find(params[:id])\n  end\n\n  def category_params\n    params.require(:category).permit(:name)\n  end\n\nend\n</code></pre>\n\n<p>Here is the <code>pages/index.html.erb</code></p>\n\n<pre><code>&lt;div class=\"container-fluid\"&gt;\n\n\n    &lt;% @products.each_slice(3) do |products_group| %&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;% products_group.each do |category, products| %&gt;\n\n            &lt;% products.each_with_index do |product, index| %&gt;\n                &lt;% if index == 0 %&gt;\n                    &lt;div class=\"col-lg-4 col-sm-6 col-xs-12 center-block \" &gt;\n\n                    &lt;%= link_to category_path (category) do %&gt;\n                        &lt;%= image_tag product.image.url(:medium), class: \"img-responsive\" %&gt;\n                    &lt;% end %&gt;\n            &lt;div class=\"caption\"&gt;\n                &lt;p class=\"category-name\" &gt;&lt;%= product.category.name %&gt;&lt;/p&gt;\n             &lt;/div&gt; \n            &lt;% end %&gt;\n            &lt;% end %&gt;\n            &lt;/div&gt; \n        &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n\n &lt;/div&gt;\n</code></pre>\n\n<p>and here is the <code>config/routes.rb</code></p>\n\n<pre><code>Rails.application.routes.draw do\n\n get 'products/search' =&gt; 'products#search', as: 'search_products'\n post 'emaillist/subscribe' =&gt; 'emaillist#subscribe'\n resources :categories\n resources :labels\n resources :products do\n   resources :product_items\n end\n\n resources :carts \n\n resources :orders\n\n devise_for :admin_users, ActiveAdmin::Devise.config\n ActiveAdmin.routes(self)\n\n resources :contacts, only: [:new, :create]\n\n  root 'pages#index'\n\n\n get 'about' =&gt; 'pages#about'\n\n get 'location' =&gt; 'pages#location'\n\n get  'help' =&gt; 'pages#help'\n\nend\n</code></pre>\n\n<p>here is the <code>category</code>part of the rake routes</p>\n\n<pre><code>     categories GET        /categories(.:format)                                   categories#index\n                           POST       /categories(.:format)                                   categories#create\n              new_category GET        /categories/new(.:format)                              categories#new\n             edit_category GET        /categories/:id/edit(.:format)                         categories#edit\n                  category GET        /categories/:id(.:format)                              categories#show\n                           PATCH      /categories/:id(.:format)                              categories#update\n                           PUT        /categories/:id(.:format)                              categories#update\n                           DELETE     /categories/:id(.:format)                              categories#destroy\n</code></pre>\n\n<p>As I said before this is working perfectly in the localhost and I'm totally blank about why it's not working the same on the VPS</p>\n"}, {"tags": ["ruby", "rspec", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 408, "user_id": 6829425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7px6.jpg?s=128&g=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6829425/sid"}, "edited": false, "score": 0, "creation_date": 1475613673, "post_id": 39859291, "comment_id": 67010711, "body": "Have you looked at: <a href=\"http://stackoverflow.com/questions/8801845/how-to-make-capybara-check-for-visibility-after-some-js-has-run\" title=\"how to make capybara check for visibility after some js has run\">stackoverflow.com/questions/8801845/&hellip;</a> ? Note the :js =&gt; true setting"}, {"owner": {"reputation": 35, "user_id": 6392184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3a08ff2f4b4d6758a1ef0476873a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/6392184/pradeep"}, "reply_to_user": {"reputation": 408, "user_id": 6829425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7px6.jpg?s=128&g=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6829425/sid"}, "edited": false, "score": 0, "creation_date": 1475615886, "post_id": 39859291, "comment_id": 67011746, "body": "Yes, i did. But its not helpful"}, {"owner": {"reputation": 408, "user_id": 6829425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7px6.jpg?s=128&g=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6829425/sid"}, "edited": false, "score": 0, "creation_date": 1475616394, "post_id": 39859291, "comment_id": 67012004, "body": "Can you post the error log?"}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 4, "last_activity_date": 1475616623, "creation_date": 1475616623, "answer_id": 39862079, "question_id": 39859291, "link": "https://stackoverflow.com/questions/39859291/how-to-add-a-wait-method-to-wait-until-a-specific-element-is-loaded-in-rubycucu/39862079#39862079", "title": "How to add a wait method to wait until a specific element is loaded in ruby+Cucumber2.0", "body": "<p>Capybaras find methods will wait up to Capybara.default_max_wait_time seconds for a matching element to appear.  If they are not waiting long enough either increase that setting or override it for a specific find with the :wait option like</p>\n\n<pre><code>page.find :css, 'CSS selector for the element', wait: 10\n</code></pre>\n\n<p>which will wait up to 10 seconds for the element to exist.  In your example you're passing a CSS selector of 'giftingNoButton' which isn't really valid unless you're using custom elements. You probably want '#giftingNoButton' (find id matching) or '.giftingNoButton' (class matching)</p>\n"}], "owner": {"reputation": 35, "user_id": 6392184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3a08ff2f4b4d6758a1ef0476873a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/6392184/pradeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5239, "favorite_count": 0, "accepted_answer_id": 39862079, "answer_count": 1, "score": 1, "last_activity_date": 1475616623, "creation_date": 1475605567, "last_edit_date": 1475608678, "question_id": 39859291, "link": "https://stackoverflow.com/questions/39859291/how-to-add-a-wait-method-to-wait-until-a-specific-element-is-loaded-in-rubycucu", "title": "How to add a wait method to wait until a specific element is loaded in ruby+Cucumber2.0", "body": "<p>I have a problem while testing my cases on browser stack. The problem am facing is inconsistently reproduced. </p>\n\n<p>To make my code wait until an element is loaded am using as below:</p>\n\n<pre><code>gift_no_btn1 = Capybara.find('giftingNoButton')\ngift_no_btn1.click\n</code></pre>\n\n<p>The problem here is that the screen is stuck in the other module where my intended element is not loaded and hence my script fails. I have read that find() method is replaced of wait_untill method in Capybara 2.0.</p>\n"}, {"tags": ["html", "ruby", "markdown", "jekyll", "liquid"], "comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1475663011, "post_id": 39858593, "comment_id": 67029484, "body": "You can markdownify, but you can&#39;t liquidify. Your problem is elsewhere but without complete code, it&#39;s hard to spot it. Any code repository ?"}, {"owner": {"reputation": 75, "user_id": 4724426, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dhXqz9m51f8/AAAAAAAAAAI/AAAAAAAAADk/2WiWxuTp-kY/photo.jpg?sz=128", "display_name": "sonirico", "link": "https://stackoverflow.com/users/4724426/sonirico"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1475665687, "post_id": 39858593, "comment_id": 67031204, "body": "@DavidJacquel Yes, although set up an environment might be tedious right now. I have two repos, one for the theme, an another for the web implementation. In the later I have added the gem locally. I am editing the question to link to both anyway."}], "answers": [{"comments": [{"owner": {"reputation": 365, "user_id": 4027249, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-n-2AI6PN5NI/AAAAAAAAAAI/AAAAAAAAADc/CzqPBYgnJSk/photo.jpg?sz=128", "display_name": "theJoi", "link": "https://stackoverflow.com/users/4027249/thejoi"}, "edited": false, "score": 1, "creation_date": 1482856199, "post_id": 39894417, "comment_id": 69899059, "body": "I think you&#39;re supposed to use .output instead of .content (source: <a href=\"http://jekyllrb.com/docs/collections/#documents\" rel=\"nofollow noreferrer\">jekyllrb.com/docs/collections/#documents</a>). However, for my situation it didn&#39;t work because I was trying to include information from a collection in a post and the posts and pages are rendered prior to the collection. So I used .content with your plugin and it worked perfectly. Thanks!"}], "tags": [], "owner": {"reputation": 75, "user_id": 4724426, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dhXqz9m51f8/AAAAAAAAAAI/AAAAAAAAADk/2WiWxuTp-kY/photo.jpg?sz=128", "display_name": "sonirico", "link": "https://stackoverflow.com/users/4724426/sonirico"}, "is_accepted": false, "score": 3, "last_activity_date": 1475849998, "last_edit_date": 1475849998, "creation_date": 1475752244, "answer_id": 39894417, "question_id": 39858593, "link": "https://stackoverflow.com/questions/39858593/how-to-manually-process-liquid-tags-in-jekyll/39894417#39894417", "title": "how to manually process Liquid tags in Jekyll", "body": "<p>Well, despite I still don't know whether the issue is in my code, I am posting how I managed to solve it. Basically I created a filter tag called <code>liquefy</code>  which has been put in a <code>.gem</code> and whose main task is taking a text with markdown or/and liquid syntax as an argument which will be parsed and rendered.</p>\n\n<ul>\n<li><strong>Repo</strong>: <a href=\"https://github.com/sonirico/liquefy\" rel=\"nofollow\">https://github.com/sonirico/liquefy</a></li>\n<li><strong>Gem</strong>: <a href=\"https://rubygems.org/gems/liquefy\" rel=\"nofollow\">https://rubygems.org/gems/liquefy</a></li>\n</ul>\n"}], "owner": {"reputation": 75, "user_id": 4724426, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dhXqz9m51f8/AAAAAAAAAAI/AAAAAAAAADk/2WiWxuTp-kY/photo.jpg?sz=128", "display_name": "sonirico", "link": "https://stackoverflow.com/users/4724426/sonirico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1475849998, "creation_date": 1475602902, "last_edit_date": 1475665998, "question_id": 39858593, "link": "https://stackoverflow.com/questions/39858593/how-to-manually-process-liquid-tags-in-jekyll", "title": "how to manually process Liquid tags in Jekyll", "body": "<p>I am creating a Jekyll theme where all user pages that implement the 'indexable' attribute in the front matter are rendered in the main landing page. So I have the 'frontpage layout:</p>\n\n<pre><code>---\nlayout: root\n---\n\n{% assign custom_pages = site.pages | where: 'indexable', true | sort: 'priority' | reverse %}\n\n{% include header.html %}\n\n{% for c_page in custom_pages %}\n&lt;div class=\"container {{ c_page.class | default: '' }}\" &gt;\n    {{ c_page.content }}\n&lt;/div&gt;\n{% endfor %}\n\n\n{% include footer.html %}\n{% include javascripts.html %}\n</code></pre>\n\n<p>A sample page that will be processed: </p>\n\n<pre><code>---\nlayout: page\ntitle: Us\npermalink: /us/\nindexable: true\npriority: 10\nclass: us-page\n---\n\n&lt;div class=\"row\"&gt;\n    {% for member in site.data.members %}\n    &lt;div class=\"col-sm-6\"&gt;\n        &lt;div class=\"card card-block\"&gt;\n            &lt;img src=\"{{ member.gravatar }}?s=256\" alt=\"Avatar\"&gt;\n            &lt;h4 class=\"card-title text-xs-center\"&gt;{{ member.name }}&lt;/h4&gt;\n            &lt;p class=\"card-text\"&gt;{{ member.description | markdownify }}&lt;/p&gt;\n            &lt;p class=\"card-text\"&gt;\n                {% for tag in member.expertise_areas %}\n                    &lt;span&gt;{{ tag }}&lt;/span&gt;\n                {% endfor %}\n            &lt;/p&gt;\n            &lt;a href=\"{{ member.blog }}\" class=\"btn btn-primary\" role=\"button\" &gt;Mi blog&lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    {% endfor %}\n&lt;/div&gt;\n</code></pre>\n\n<p>However the liquid tags are appearing unprocessed, like the same output  <code>{% raw %}</code> would produce. Is there a way through I could do <code>{{ c_page.content | magic_here }}</code> in order to manually get rendered those tags? </p>\n\n<p><strong>EDIT</strong>. Screenshot:\n<a href=\"https://i.stack.imgur.com/f4KPW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f4KPW.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>EDIT2</strong></p>\n\n<ul>\n<li><p><a href=\"https://github.com/sonirico/geekyll\" rel=\"nofollow noreferrer\">Theme repository</a></p></li>\n<li><p><a href=\"https://github.com/katodia/katodia.com\" rel=\"nofollow noreferrer\">Web implementation</a></p></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1475606333, "post_id": 39858371, "comment_id": 67006851, "body": "Have you tried <code>has_many :skills, -&gt; { uniq }, through: :skills_users</code>?"}, {"owner": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "reply_to_user": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1475606604, "post_id": 39858371, "comment_id": 67006998, "body": "Is working only if you remove the validation <code>validates :user, uniqueness: { scope: :skill }</code>"}, {"owner": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "reply_to_user": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1475607879, "post_id": 39858371, "comment_id": 67007709, "body": "The main problem is this hide the truth.... Records are recorded on database, just not given through this special DISTINCT scope, isn&#39;t what I want."}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1475608265, "post_id": 39858371, "comment_id": 67007900, "body": "Have you tried removing <code>validate: true</code> and using <code>validates_associated :skills</code> on User?"}, {"owner": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "edited": false, "score": 0, "creation_date": 1475608516, "post_id": 39858371, "comment_id": 67008054, "body": "No because I use it on User and you can&#39;t use it on both side <a href=\"http://api.rubyonrails.org/v4.2.6/classes/ActiveRecord/Validations/ClassMethods.html\" rel=\"nofollow noreferrer\">WARNING: This validation must not be used on both ends of an association. Doing so will lead to a circular dependency and cause infinite recursion.</a>"}, {"owner": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "edited": false, "score": 0, "creation_date": 1475608675, "post_id": 39858371, "comment_id": 67008145, "body": "Oh sorry I read to fast <code>validate: true</code> and <code>validates_associated </code> are the same thing"}, {"owner": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "edited": false, "score": 0, "creation_date": 1475608779, "post_id": 39858371, "comment_id": 67008196, "body": "And to be honest isn&#39;t really the problem here."}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1475618680, "post_id": 39858371, "comment_id": 67013005, "body": "@JoelAZEMAR It&#39;s just that I&#39;ve never seen validation errors raising errors like that without the explicit use of bang(!). I&#39;ve also never used <code>validate: true</code>, but have used <code>validates_associated</code> on <code>has_many</code> associations before and never had that side effect. My first guess was those methods were implemented differently, but I really didn&#39;t go into it."}, {"owner": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "reply_to_user": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1475656395, "post_id": 39858371, "comment_id": 67025126, "body": "@AlexandreAngelim I play with a sample code and I can confirm you is exactly the same result. Here the problem is a bit more complex because ActiveRecord::Associations::CollectionProxy#&lt;&lt; method tigger directly the record on database, and I guess is calling save! behind the scene..."}], "answers": [{"comments": [{"owner": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "edited": false, "score": 0, "creation_date": 1475656470, "post_id": 39866660, "comment_id": 67025165, "body": "Hi, I&#39;ve already a constraint in database and is my concern, because without validation I obtain  <code>ActiveRecord::RecordNotUnique:        PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint</code> so the second part is what I try to do in a nicer manner than add a basic condition like <code>john.skills &lt;&lt; tidy unless john.skills.include?(tidy)</code>"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "edited": false, "score": 0, "creation_date": 1476368504, "post_id": 39866660, "comment_id": 67324308, "body": "I don&#39;t think that messing with associations is any nicer or more readable for a one off problem."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1475648193, "creation_date": 1475648193, "answer_id": 39866660, "question_id": 39858371, "link": "https://stackoverflow.com/questions/39858371/prevent-from-raising-activerecordrecordinvalid-or-adding-twice-on-has-many-ass/39866660#39866660", "title": "Prevent from raising ActiveRecord::RecordInvalid or adding twice on has_many association", "body": "<p>Perhaps i'm not understanding the problem but here is what I'd do:</p>\n\n<ul>\n<li>Add a constraint on the DB level to make sure the data is clean, no matter how things are implemented</li>\n<li>Make sure that skill is not added multiple times (on the client)</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "edited": false, "score": 0, "creation_date": 1475756211, "post_id": 39881370, "comment_id": 67077037, "body": "Isn&#39;t what I want. I want the <code>has_many</code> relation. I know HBTM behave differently"}], "tags": [], "owner": {"reputation": 228, "user_id": 4891793, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153039879553600/picture?type=large", "display_name": "som4ik", "link": "https://stackoverflow.com/users/4891793/som4ik"}, "is_accepted": false, "score": 0, "last_activity_date": 1475692501, "creation_date": 1475692501, "answer_id": 39881370, "question_id": 39858371, "link": "https://stackoverflow.com/questions/39858371/prevent-from-raising-activerecordrecordinvalid-or-adding-twice-on-has-many-ass/39881370#39881370", "title": "Prevent from raising ActiveRecord::RecordInvalid or adding twice on has_many association", "body": "<p>Can you show me the migration that created your SkillsUser table.\nthe better if you show me the indexes of SkillsUser table that you have.\ni usually use has_and_belongs_to_many instead of has_many - through.\ntry to add this migration </p>\n\n<pre><code>$ rails g migration add_id_to_skills_users id:primary_key\n# change the has_many - through TO has_and_belongs_to_many\n</code></pre>\n\n<p>no need for validations if you have double index \"skills_users\".\nhope it helps you.</p>\n"}], "owner": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 524, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1475692501, "creation_date": 1475602133, "last_edit_date": 1475666395, "question_id": 39858371, "link": "https://stackoverflow.com/questions/39858371/prevent-from-raising-activerecordrecordinvalid-or-adding-twice-on-has-many-ass", "title": "Prevent from raising ActiveRecord::RecordInvalid or adding twice on has_many association", "body": "<p>I want to change has_many association behaviour</p>\n\n<p>considering this basic data model </p>\n\n<pre><code>class Skill &lt; ActiveRecord::Base\n  has_many :users, through: :skills_users\n  has_many :skills_users\nend\n\nclass User &lt; ActiveRecord::Base\n  has_many :skills, through: :skills_users, validate: true\n  has_many :skills_users\nend\n\nclass SkillsUser &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :skill\n\n  validates :user, :skill, presence: true\nend\n</code></pre>\n\n<p>For adding a new skill we can easily do that :</p>\n\n<pre><code>john = User.create(name: 'John Doe')\ntidy = Skill.create(name: 'Tidy')\n\njohn.skills &lt;&lt; tidy\n</code></pre>\n\n<p>but if you do this twice we obtain a duplicate skill for this user</p>\n\n<p>An possibility to prevent that is to check before adding </p>\n\n<pre><code>john.skills &lt;&lt; tidy unless john.skills.include?(tidy)\n</code></pre>\n\n<p>But this is quite mean... </p>\n\n<p>We can as well change <a href=\"https://github.com/rails/rails/blob/33a7eedc01a54c685723ad5a7795e332a5132ca1/activerecord/lib/active_record/associations/collection_proxy.rb#L1057\" rel=\"nofollow\">ActiveRecord::Associations::CollectionProxy#&lt;&lt;</a> behaviour like </p>\n\n<pre><code>module InvalidModelIgnoredSilently\n  def &lt;&lt;(*records)\n    super(records.to_a.keep_if { |r| !!include?(r) })\n  end\nend \nActiveRecord::Associations::CollectionProxy.send :prepend, InvalidModelIgnoredSilently\n</code></pre>\n\n<p>to force <code>CollectionProxy</code> to ignore transparently adding duplicate records.</p>\n\n<p>But I'm not happy with that.</p>\n\n<p>We can add a validation on extra validation on <code>SkillsUser</code></p>\n\n<pre><code>class SkillsUser &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :skill\n\n  validates :user, :skill, presence: true\n  validates :user, uniqueness: { scope: :skill }\nend\n</code></pre>\n\n<p>but in this case adding twice will raise up <code>ActiveRecord::RecordInvalid</code> and again we have to check before adding </p>\n\n<p>or make a uglier hack on <code>CollectionProxy</code></p>\n\n<pre><code>module InvalidModelIgnoredSilently\n\n  def &lt;&lt;(*records)\n    super(valid_records(records))\n  end\n\n  private\n\n  def valid_records(records)\n    records.with_object([]).each do |record, _valid_records|\n      begin\n        proxy_association.dup.concat(record)\n        _valid_records &lt;&lt; record\n      rescue ActiveRecord::RecordInvalid\n      end\n    end\n  end\nend\nActiveRecord::Associations::CollectionProxy.send :prepend, InvalidModelIgnoredSilently\n</code></pre>\n\n<p>But I'm still not happy with that. </p>\n\n<p>To me the ideal and maybe missing methods on CollectionProxy are : </p>\n\n<pre><code>john.skills.push(tidy)\n=&gt; false\n</code></pre>\n\n<p>and </p>\n\n<pre><code>john.skills.push!(tidy)\n=&gt; ActiveRecord::RecordInvalid\n</code></pre>\n\n<p>Any idea how I can do that nicely?</p>\n\n<p>-- EDIT --</p>\n\n<p>A way I found to avoid throwing Exception is throwing an Exception! </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :skills, through: :skills_users, before_add: :check_presence\n  has_many :skills_users\n\n  private\n\n  def check_presence(skill)\n    raise ActiveRecord::Rollback if skills.include?(skill)\n  end\nend\n</code></pre>\n\n<p>Isn't based on validations, neither a generic solution, but can help... </p>\n"}, {"tags": ["ruby", "class", "oop", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "edited": false, "score": 0, "creation_date": 1475604679, "post_id": 39858821, "comment_id": 67005960, "body": "I thought about making a hash.. But the thing is that, I wanted to make my app modular.. Like as in, I want the person who&#39;s writing a new &quot;module&quot; to define what the main app to look for... So I wanted to create an array of objects or something and if the main app matches the URL with the specified string/regex in the module then execute that."}, {"owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "edited": false, "score": 0, "creation_date": 1475607666, "post_id": 39858821, "comment_id": 67007598, "body": "Thanks for the update.. Just to clear a couple of things up, can you tell me where things go? Like, does the <code>module Plugin</code> go in the <code>main.rb</code> and <code>class PluginImpl</code> goes in the &quot;module&quot; like <code>gitlab.rb</code>? And if I already have  <code>module Main</code> in the <code>main.rb</code> this would be fine to include it there under it? Please excuse those beginner questions, I&#39;m new to Ruby and I&#39;m just trying to understand it better.. Thanks!"}, {"owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "edited": false, "score": 0, "creation_date": 1475614399, "post_id": 39858821, "comment_id": 67011044, "body": "Hmmm.. This looks like a great answer but pretty complicated for a beginner in Ruby like myself.. I&#39;ll mark it as the answer, but I&#39;ll have to try to get it to work some how.. Maybe an array pattern would be a bit easier.."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "edited": false, "score": 1, "creation_date": 1475638644, "post_id": 39858821, "comment_id": 67017831, "body": "Sorry for the delay: I do have a sleep sometimes. <code>Plugin</code> is the default interface and it\u2019s code goes anywhere onto the path. Under \u201cMain\u201d is fine. <code>PluginImpl</code> is <code>Gitlab</code>, <code>Github</code>, whatever you want to be \u201cpluggable.\u201d <code>HASH</code> constant might reside, for instance, in your <code>Main</code> class."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1475638784, "last_edit_date": 1475638784, "creation_date": 1475603784, "answer_id": 39858821, "question_id": 39858201, "link": "https://stackoverflow.com/questions/39858201/loop-through-variables-in-different-classes-to-match-string-in-ruby/39858821#39858821", "title": "Loop through variables in different classes to match string in Ruby", "body": "<p>Make a hash <code>{ Regexp \u21d2 Class }</code>:</p>\n\n<pre><code>HASH = {\n  /git.company.com/ =&gt; Gitlab,\n  /github.com/ =&gt; Github\n}\n</code></pre>\n\n<p>and then do:</p>\n\n<pre><code>handler = HASH.detect { |k, _| k =~ url }.last.new\n</code></pre>\n\n<p>The above will give you an instance of the class you wanted.</p>\n\n<p><em>Sidenotes:</em></p>\n\n<ul>\n<li><code>is_verbose = params[:v].to_s</code> always results in <code>is_verbose</code> set to <code>truthy</code> value, check for <code>params[:v].to_s == \"true\"</code></li>\n<li><code>is_verbose = true</code> is an assignment, you wanted to use just <code>unless is_verbose</code>.</li>\n</ul>\n\n<hr>\n\n<p>To make it runtime-resolving, force the plugins to a) <code>include Plugin</code> and b) declare <code>resolve</code> method. <code>Plugin</code> module should define a callback hook:</p>\n\n<pre><code>module Plugin\n  def self.included(base)\n    Registry::HASH[-&gt; { base.resolve }] = base\n  end\nend\n</code></pre>\n\n<p><code>resolve</code> method should return a regexp, the lambda is here to make it  resolved on parsing stage:</p>\n\n<pre><code>class PluginImpl\n  include Plugin\n  def resolve\n    /git.company.com/\n  end\nend\n</code></pre>\n\n<p>And then match when needed:</p>\n\n<pre><code>handler = HASH.detect { |k, _| k.() =~ url }.last.new\n</code></pre>\n\n<p>Other way round would be to use <a href=\"http://ruby-doc.org/core-2.3.0/ObjectSpace.html\" rel=\"nofollow\"><code>ObjectSpace</code></a> to detect classes, including the module, or declare the <a href=\"http://ruby-doc.org/core-2.3.0/TracePoint.html\" rel=\"nofollow\"><code>TracePoint</code></a> on <code>base</code> in <code>included</code> callback to provide a direct map, but all this is overcomplicating.</p>\n"}], "owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 39858821, "answer_count": 1, "score": 0, "last_activity_date": 1475826499, "creation_date": 1475601489, "last_edit_date": 1475826499, "question_id": 39858201, "link": "https://stackoverflow.com/questions/39858201/loop-through-variables-in-different-classes-to-match-string-in-ruby", "title": "Loop through variables in different classes to match string in Ruby", "body": "<p>I have a ruby (sinatra) app that I am working on, and my input is a url and if verbose or not (true or false), so basically like this:</p>\n\n<p>The url would look like this: <code>http://localhost:4567/git.company.com&amp;v=false</code> for example.</p>\n\n<p>And the code to fetch those is this:</p>\n\n<pre><code>get '/:url' do |tool_url|\n    url = params[:url].to_s\n    is_verbose = params[:v].to_s\n</code></pre>\n\n<p>I have different classes separated in different files and I'm including them into my main script like this:</p>\n\n<pre><code>Dir[\"#{File.dirname(__FILE__)}/lib/*.rb\"].each { |f| require(f) }\n</code></pre>\n\n<p>(And a sample file would be something like this), <code>gitlab.rb</code>:</p>\n\n<pre><code>class Gitlab\n  $gitlab_token = 'TOKEN_GOES_HERE'\n  def initialize(url, v)\n    @@regex =~ /git.company.com/\n    @@gitlab_url = url\n    @@is_verbose = v\n  end\n\n  def check_gitlab(gitlab_url, is_verbose)\n    _gitlab_overall = '/health_check.json?token=#{gitlab_token}'\n    _gitlab_cache = '/health_check/cache.json?token=#{gitlab_token}'\n    _gitlab_database = '/health_check/database.json?token=#{gitlab_token}'\n    _gitlab_migrations = '/health_check/migrations.json?token=#{gitlab_token}'\n    unless is_verbose = true\n      CheckString.check_string_from_page('https://' + gitlab_url + gitlab_overall, 'success')\n    else\n\n    end\n  end\nend\n</code></pre>\n\n<p>Now, I want to be able to dynamically know which \"class\" to use to do a certain job based on the URL that's entered by the user, so my idea was to iterate through those classes looking for a particular variable to match with the input.</p>\n\n<p>I need guidance in this because I've been stuck on this for quite some time now; I've tried so many things that I can think of, but none worked.</p>\n\n<p>Disclaimer: Please bear with me here, because I'm very new to Ruby and I'm not that great in OOP languages (haven't really practiced them that much).</p>\n\n<p>EDIT: I'm open to any suggestion, like if there's a different logic that's better than this, please do let me know.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "xmlhttprequest"], "comments": [{"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1475600864, "post_id": 39857924, "comment_id": 67004035, "body": "can you plz clarify your question further"}], "answers": [{"tags": [], "owner": {"reputation": 2405, "user_id": 135845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agZcF.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/135845/eric"}, "is_accepted": true, "score": 2, "last_activity_date": 1475604114, "creation_date": 1475604114, "answer_id": 39858915, "question_id": 39857924, "link": "https://stackoverflow.com/questions/39857924/ror-check-if-url-is-ajax/39858915#39858915", "title": "Ror - Check if URL is AJAX", "body": "<p>Add a guard to whatever this code does with <code>unless request.xhr?</code></p>\n"}], "owner": {"reputation": 8066, "user_id": 4272549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1hvwh.jpg?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4272549/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 39858915, "answer_count": 1, "score": 0, "last_activity_date": 1475604114, "creation_date": 1475600399, "question_id": 39857924, "link": "https://stackoverflow.com/questions/39857924/ror-check-if-url-is-ajax", "title": "Ror - Check if URL is AJAX", "body": "<p>I'm trying to blacklist URL's that are AJAX for a login redirect.  I have the following code:</p>\n\n<pre><code>request.fullpath =~ /\\A\\/(login|sso_login|sign_out|auth)/\n</code></pre>\n\n<p>How can I use <code>xhr?</code> to request the fullpath <b>only</b> if the URL is not <code>xhr?</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "is_accepted": true, "score": 0, "last_activity_date": 1475605212, "creation_date": 1475605212, "answer_id": 39859211, "question_id": 39857841, "link": "https://stackoverflow.com/questions/39857841/request-fullpath-unless-url-contains-json/39859211#39859211", "title": "Request.fullpath unless URL contains .json", "body": "<p>I guess you can check if !request.xhr?</p>\n"}], "owner": {"reputation": 8066, "user_id": 4272549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1hvwh.jpg?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4272549/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 39859211, "answer_count": 1, "score": 0, "last_activity_date": 1475605212, "creation_date": 1475600050, "question_id": 39857841, "link": "https://stackoverflow.com/questions/39857841/request-fullpath-unless-url-contains-json", "title": "Request.fullpath unless URL contains .json", "body": "<p>I have a RoR snippet that does the following:</p>\n\n<pre><code>request.fullpath =~ /\\A\\/(login|sso_login|sign_out|auth)/\n</code></pre>\n\n<p>This stores the URL unless it is one of the blacklisted URL's.  How can I make this also ignore anything that contains .json?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "acts-as-ferret"], "comments": [{"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1475600747, "post_id": 39857775, "comment_id": 67003970, "body": "should work just fine"}, {"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 1, "creation_date": 1475606482, "post_id": 39857775, "comment_id": 67006938, "body": "This question isn&#39;t structured in a way that we can provide you with much help. Did you try this code out before asking the question? Are you running into errors when you do?"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 0, "last_activity_date": 1479108031, "creation_date": 1479108031, "answer_id": 40583659, "question_id": 39857775, "link": "https://stackoverflow.com/questions/39857775/condition-on-model-on-class-macros/40583659#40583659", "title": "condition on model on class macros", "body": "<p>Yes, it will work because it is a perfectly valid Ruby code.</p>\n"}], "owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 40583659, "answer_count": 1, "score": 1, "last_activity_date": 1479108031, "creation_date": 1475599819, "last_edit_date": 1479108015, "question_id": 39857775, "link": "https://stackoverflow.com/questions/39857775/condition-on-model-on-class-macros", "title": "condition on model on class macros", "body": "<p>It's possible to put conditions on models like:</p>\n\n<pre><code>class MyPeppers &lt; ActiveRecord::Base\n   acts_as_a_ferret() if Rails.env.production?\nend\n</code></pre>\n\n<p>It's valid ruby code but I wonder if that should work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "controller", "routing"], "comments": [{"owner": {"reputation": 596, "user_id": 1924951, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b81cae1fb43808ac23a2188258ca9e4?s=128&d=identicon&r=PG", "display_name": "Robert Pankowecki", "link": "https://stackoverflow.com/users/1924951/robert-pankowecki"}, "edited": false, "score": 1, "creation_date": 1475682105, "post_id": 39857724, "comment_id": 67043325, "body": "How did the constraints solution described in <a href=\"http://blog.arkency.com/2014/01/short-urls-for-every-route-in-your-rails-app/\" rel=\"nofollow noreferrer\">blog.arkency.com/2014/01/&hellip;</a> not worked?"}, {"owner": {"reputation": 668, "user_id": 5079884, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4h-ZQ3LGtmY/AAAAAAAAAAI/AAAAAAAAABY/lzw-Y0PNcI4/photo.jpg?sz=128", "display_name": "Simon Somlai", "link": "https://stackoverflow.com/users/5079884/simon-somlai"}, "reply_to_user": {"reputation": 596, "user_id": 1924951, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b81cae1fb43808ac23a2188258ca9e4?s=128&d=identicon&r=PG", "display_name": "Robert Pankowecki", "link": "https://stackoverflow.com/users/1924951/robert-pankowecki"}, "edited": false, "score": 0, "creation_date": 1475775713, "post_id": 39857724, "comment_id": 67090236, "body": "The error was on my side, I&#39;ve actually been able to solve the problem using your solution!"}, {"owner": {"reputation": 596, "user_id": 1924951, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b81cae1fb43808ac23a2188258ca9e4?s=128&d=identicon&r=PG", "display_name": "Robert Pankowecki", "link": "https://stackoverflow.com/users/1924951/robert-pankowecki"}, "edited": false, "score": 0, "creation_date": 1475830842, "post_id": 39857724, "comment_id": 67110980, "body": "Glad to hear it. Have a nice day!"}], "answers": [{"tags": [], "owner": {"reputation": 668, "user_id": 5079884, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4h-ZQ3LGtmY/AAAAAAAAAAI/AAAAAAAAABY/lzw-Y0PNcI4/photo.jpg?sz=128", "display_name": "Simon Somlai", "link": "https://stackoverflow.com/users/5079884/simon-somlai"}, "is_accepted": true, "score": 0, "last_activity_date": 1475847959, "creation_date": 1475847959, "answer_id": 39918807, "question_id": 39857724, "link": "https://stackoverflow.com/questions/39857724/how-to-remove-controller-names-from-multiple-rails-routes/39918807#39918807", "title": "How To Remove Controller Names From Multiple Rails Routes?", "body": "<p>I improved the solution, but it still doesn't feel 100% rails-y. But, here's what I did to get; </p>\n\n<ul>\n<li>/page-title <strong>(pages#show)</strong> </li>\n<li>en/this-is-the-article <strong>(articles#show, en\nlocale)</strong> </li>\n<li>nl/dit-is-de-titel <strong>(articles#show, nl locale)</strong></li>\n</ul>\n\n<p>Note: I've swapped out the id for articles and pages with the title attribute (using the friendly_id gem). The articles are also in two languages (therefore I check for both slugs)</p>\n\n<p><strong>Routing.rb</strong> (modified from blog.arkency.com/2014/01/short-urls-for-every-route-in-your-rails-app</p>\n\n<pre><code> resources :users, :projects, :testimonials, :articles, :pages\n  class ArticleUrlConstrainer\n    def matches?(request)\n      id = request.path.gsub(\"/\", \"\")[2..-1]\n      @article = Article.where(slug_nl: id).first || Article.where(slug_en: id).first\n      if I18n.locale == :en\n        @article = Article.find_by(slug_en: id) || Article.find_by(slug_nl: id)\n      else\n        @article = Article.find_by(slug_nl: id) || Article.find_by(slug_en: id)\n      end\n    end\n  end\n\n  constraints(ArticleUrlConstrainer.new) do\n    match '/:id', :via =&gt; [:get], to: \"articles#show\"\n  end\n\n  class PageUrlConstrainer\n    def matches?(request)\n      id = request.path.gsub(\"/\", \"\")[2..-1]\n      @page = Page.friendly.find(id)\n    end\n  end\n\n  constraints(PageUrlConstrainer.new) do\n    match '/:id', :via =&gt; [:get], to: \"pages#show\"\n  end\n\n  resources :articles, :only =&gt; [:show], :path =&gt; '', as: \"articles_show\"\n  resources :pages, :only =&gt; [:show], :path =&gt; '', as: \"pages_show\"\n</code></pre>\n\n<p><strong>Final</strong></p>\n\n<ul>\n<li><a href=\"http://www.truetech.be/nl/10-essentiele-elementen-van-een-goede-website\" rel=\"nofollow\">http://www.truetech.be/nl/10-essentiele-elementen-van-een-goede-website</a> <strong>(article#show, nl locale)</strong></li>\n<li><a href=\"http://www.truetech.be/nl/webdesign-lier\" rel=\"nofollow\">http://www.truetech.be/nl/webdesign-lier</a> <strong>(page#show)</strong></li>\n</ul>\n"}], "owner": {"reputation": 668, "user_id": 5079884, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4h-ZQ3LGtmY/AAAAAAAAAAI/AAAAAAAAABY/lzw-Y0PNcI4/photo.jpg?sz=128", "display_name": "Simon Somlai", "link": "https://stackoverflow.com/users/5079884/simon-somlai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 39918807, "answer_count": 1, "score": 0, "last_activity_date": 1475847959, "creation_date": 1475599602, "last_edit_date": 1495540101, "question_id": 39857724, "link": "https://stackoverflow.com/questions/39857724/how-to-remove-controller-names-from-multiple-rails-routes", "title": "How To Remove Controller Names From Multiple Rails Routes?", "body": "<p>I have two models in my app: <strong>articles</strong> and <strong>pages</strong>. I'd like the url to look like this;</p>\n\n<pre><code>www.mysite.com/this-is-the-title-of-the-article  (articles#show)\nwww.mysite.com/about-me (pages#show)\n</code></pre>\n\n<p>A bit similar to regular wordpress routes, but with rails this seems like a big hassle. I've found a working solution, but it could probably be improved upon. Here's what I got; </p>\n\n<p><strong>Inside routes.rb;</strong></p>\n\n<pre><code>  resources :articles, :pages\n  # this redirects /:id requests to my StaticPagesController\n  match ':id' =&gt; 'static_pages#redirect', :via =&gt; [:get]\n  resources :articles, :only =&gt; [:show], :path =&gt; '', as: \"articles_show\"\n  resources :pages, :only =&gt; [:show], :path =&gt; '', as: \"pages_show\"\n</code></pre>\n\n<p><strong>Inside StaticPagesController;</strong></p>\n\n<pre><code> # Basically, it checks if there's a page or article with the given id and renders the corresponding show. Else it shows the 404 \n    def redirect\n        @article = Article.where(slug_nl: params[:id]).first || Article.where(slug_en: params[:id]).first\n        @page = Page.where(slug: params[:id]).first\n        if !@page.nil?\n          @page = Page.friendly.find(params[:id])\n          render(:template =&gt; 'pages/show')\n        elsif !@article.nil?\n          @article = Article.friendly.find(params[:id])\n          @relatedarticles = Article.where(category: @article.category).uniq.limit(6).where.not(id: @article)\n          render(:template =&gt; 'articles/show')\n        else\n          render(:template =&gt; 'common/404', :status =&gt; 404)\n        end\n      end\n</code></pre>\n\n<p><strong>Note:</strong> I've swapped out the id for articles and pages with the title attribute (using the friendly_id gem). The articles are also in two languages (therefore I check for both slugs) </p>\n\n<p>Any idea's? I've already tried some of these; </p>\n\n<ul>\n<li><a href=\"http://blog.arkency.com/2014/01/short-urls-for-every-route-in-your-rails-app/\" rel=\"nofollow noreferrer\">http://blog.arkency.com/2014/01/short-urls-for-every-route-in-your-rails-app/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/6369476/how-to-remove-controller-names-from-rails-routes\">How to remove controller names from rails routes?</a></li>\n<li><a href=\"http://base0.net/posts/two-ways-for-rails-multiple-model-url-aliases/\" rel=\"nofollow noreferrer\">http://base0.net/posts/two-ways-for-rails-multiple-model-url-aliases/</a></li>\n</ul>\n\n<p>But they didn't quite did the trick so far. Thanks :) \u2665 </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer", "vps"], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1475599607, "post_id": 39857668, "comment_id": 67003333, "body": "Ok thank you..thats exactly what I was looking for.   So would I then put IP address like this <code>{ host: &#39;123.123.123.123&#39;, port: ???? }</code> What about the port? can it remains the same?"}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 1, "creation_date": 1475599778, "post_id": 39857668, "comment_id": 67003433, "body": "why would have a port on a production setup, it should default to 80 if its being exposed to users else go ahead with port"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1475599888, "post_id": 39857668, "comment_id": 67003494, "body": "of course, silly me :)  do I then set the host like <code>{ host: &#39;123.123.123.123&#39; }</code>?"}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 1, "creation_date": 1475599957, "post_id": 39857668, "comment_id": 67003532, "body": "yes, it will work like this <a href=\"http://123.123.123.123/forgot_password?email=&quot;fd@ds.com\" rel=\"nofollow noreferrer\">123.123.123.123/forgot_password?email=&quot;fd@ds.com</a>&quot;"}], "tags": [], "owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "is_accepted": true, "score": 2, "last_activity_date": 1475599386, "creation_date": 1475599386, "answer_id": 39857668, "question_id": 39857364, "link": "https://stackoverflow.com/questions/39857364/using-host-localhost-port-3000-in-actionmailer-in-production-rb-for-dep/39857668#39857668", "title": "Using { host: &#39;localhost&#39;, port: 3000 } in ActionMailer in Production.rb for deployment to VPS?", "body": "<pre><code>config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n</code></pre>\n\n<p>Once you have configured this and you use these settings to send the mail via gmail server. The default url will be used as the domain name of website/application like say for forgot password to users.</p>\n\n<pre><code>  http://localhost:3000/forgot_password?email=\"fd@ds.com\"\n</code></pre>\n\n<p>You should be changing this to the domain name or the ip where the application code is hosted. localhost is used only for development setups.</p>\n"}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 39857668, "answer_count": 1, "score": 0, "last_activity_date": 1475599386, "creation_date": 1475598249, "last_edit_date": 1475599120, "question_id": 39857364, "link": "https://stackoverflow.com/questions/39857364/using-host-localhost-port-3000-in-actionmailer-in-production-rb-for-dep", "title": "Using { host: &#39;localhost&#39;, port: 3000 } in ActionMailer in Production.rb for deployment to VPS?", "body": "<p>This is the first time I'm working with actionmailer in production.</p>\n\n<p>Earlier I deployed an App to a VPS server. I haven't assigned a domain to it yet so it is only an IP address.</p>\n\n<p>I configured the action mailer settings, but I'm curious about this line:\n<code>config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }</code>can I use the Ip address of the server instead of <code>{ host: 'localhost', port: 3000 }</code>or does the server act as a localhost after the app is deployed with this setting?</p>\n\n<p>Here is the setup code in the <code>production.rb</code></p>\n\n<pre><code>config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\nconfig.action_mailer.perform_deliveries = true\nconfig.action_mailer.raise_delivery_errors = true\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = {\n  address: ENV[\"SMTP_ADDRESS\"],\n  user_name: ENV[\"SMTP_USER\"],\n  password: ENV[\"SMTP_PASSWORD\"],\n  domain: \"gmail.com\",\n  port: 587,\n  authentication: :login,\n  enable_starttls_auto: true\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "homebrew"], "comments": [{"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 1, "creation_date": 1475597376, "post_id": 39857035, "comment_id": 67002106, "body": "You should install RVM, which allows you to use multiple versions of rails. Also, in the future, don&#39;t post pictures. Cut and paste the text instead -- it&#39;s not that much to ask in exchange for free help."}, {"owner": {"reputation": 3, "user_id": 6167163, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5IHgeSvRdC8/AAAAAAAAAAI/AAAAAAAAADk/ly5o8Y3xqeM/photo.jpg?sz=128", "display_name": "Alex Lopez", "link": "https://stackoverflow.com/users/6167163/alex-lopez"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1475597765, "post_id": 39857035, "comment_id": 67002328, "body": "sorry, I&#39;m still learning how to use the website and wasn&#39;t aware of the etiquette"}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1475597918, "post_id": 39857035, "comment_id": 67002429, "body": "have you installed rails in your setup, post the commands you have already executed. execute, $gem install rails and post the o/p here or atleast the success or failure"}, {"owner": {"reputation": 3, "user_id": 6167163, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5IHgeSvRdC8/AAAAAAAAAAI/AAAAAAAAADk/ly5o8Y3xqeM/photo.jpg?sz=128", "display_name": "Alex Lopez", "link": "https://stackoverflow.com/users/6167163/alex-lopez"}, "edited": false, "score": 0, "creation_date": 1475598027, "post_id": 39857035, "comment_id": 67002507, "body": "$ rails --version      Rails 5 requires Ruby 2.2.2 or newer.      You&#39;re running       ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin14]      Please upgrade to Ruby 2.2.2 or newer to continue.   $ brew install --update ruby Warning: ruby-2.3.1_2 already installed  $ ruby --version ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin14]  $ gem install rails Fetching: activesupport-5.0.0.1.gem (100%) ERROR:  Error installing rails: \tactivesupport requires Ruby version &gt;= 2.2.2."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1475601680, "post_id": 39857035, "comment_id": 67004453, "body": "Your image of text <a href=\"//meta.unix.stackexchange.com/q/4086\">isn&#39;t very helpful</a>.  It can&#39;t be copied into an editor, and it doesn&#39;t index very well, meaning that other users with the same problem are less likely to find the answer here.  Please <a href=\"https://stackoverflow.com/posts/39857035/edit\">edit</a> your post to incorporate the relevant text directly (preferably using copy+paste to avoid transcription errors)."}], "answers": [{"tags": [], "owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "is_accepted": true, "score": 2, "last_activity_date": 1475599007, "creation_date": 1475599007, "answer_id": 39857564, "question_id": 39857035, "link": "https://stackoverflow.com/questions/39857035/rails-isnt-seeing-proper-dir-of-ruby/39857564#39857564", "title": "rails isnt seeing proper dir of ruby", "body": "<p>The issue is the ruby version available when rails installation starts is still 2.2.1. \nEven if you upgrade the ruby version, just check the ruby version</p>\n\n<pre><code>  $ ruby -v\n</code></pre>\n\n<p>It should still show older one.</p>\n\n<p>You should be using ruby version manager(rvm) to manage different versions of ruby. Using this you can change the default version of ruby so that latest version of rails can be installed properly. In case you want to install some other rails version say 4.2 which is compatible with version of ruby available as default in your system, </p>\n\n<pre><code>      $ gem install rails -v=4.2\n</code></pre>\n\n<p>This should install the rails successfully.</p>\n\n<p>Now for better management and as a good practise,\nInstall rvm, </p>\n\n<pre><code>  $ \\curl -sSL https://get.rvm.io | bash -s stable\n</code></pre>\n\n<p>Now install the version of ruby as required using</p>\n\n<pre><code> $ rvm install 2.3.1\n</code></pre>\n\n<p>Next it make this version as default</p>\n\n<pre><code> $ rvm use 2.3.1 --default\n</code></pre>\n\n<p>just in case you need this version only for a specific project, just use</p>\n\n<pre><code>$ rvm use 2.3.1\n</code></pre>\n\n<p>Now check </p>\n\n<pre><code>     $ ruby -v\n     --2.3.1\n</code></pre>\n\n<p>Fire the rails gem installation now to install.</p>\n\n<pre><code>     $ gem install rails\n</code></pre>\n\n<p>This should help</p>\n"}], "owner": {"reputation": 3, "user_id": 6167163, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5IHgeSvRdC8/AAAAAAAAAAI/AAAAAAAAADk/ly5o8Y3xqeM/photo.jpg?sz=128", "display_name": "Alex Lopez", "link": "https://stackoverflow.com/users/6167163/alex-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 39857564, "answer_count": 1, "score": 0, "last_activity_date": 1475599077, "creation_date": 1475597197, "last_edit_date": 1475599077, "question_id": 39857035, "link": "https://stackoverflow.com/questions/39857035/rails-isnt-seeing-proper-dir-of-ruby", "title": "rails isnt seeing proper dir of ruby", "body": "<p>I'm not sure whats wrong but take a look at the picture it says everything i know about the problem</p>\n\n<p><a href=\"https://i.stack.imgur.com/j88fk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j88fk.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>  $ gem install rails \n    Fetching: activesupport-5.0.0.1.gem (100%) ERROR:     \n    Error installing rails: activesupport requires Ruby version &gt;= 2.2.2\n</code></pre>\n"}]