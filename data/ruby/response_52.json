[{"tags": ["ruby-on-rails", "ruby", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1452124500, "post_id": 34645037, "comment_id": 57035998, "body": "Haha, our answers are upside down. Beauty of multi-threading :-) You get the cookies for speed ;)"}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": true, "score": 1, "last_activity_date": 1452124527, "last_edit_date": 1452124527, "creation_date": 1452124191, "answer_id": 34645037, "question_id": 34644993, "link": "https://stackoverflow.com/questions/34644993/could-not-find-nokogiri-1-6-7-1-in-any-of-the-sources/34645037#34645037", "title": "Could not find nokogiri-1.6.7.1 in any of the sources", "body": "<p>Try running that command without <code>sudo</code>.  Since <code>sudo</code> runs the command as the root user, it changes your environment and probably makes it so that you are using the wrong version of Ruby, or the version of Ruby you are using cannot see the gems you have installed.</p>\n\n<p><strong>Edit:</strong> As Eric Platon points out, try adding <code>bundle exec</code> at the beginning of that command to make sure bundler is loaded and that the right version of Rails will be used.</p>\n"}, {"comments": [{"owner": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "edited": false, "score": 0, "creation_date": 1452125351, "post_id": 34645063, "comment_id": 57036234, "body": "Thanks, Eric! So follow up questions if you don&#39;t mind? I&#39;m green, but I am really trying to learn this. So if I pick this up right, every user on my computer has a different environment and anytime I use sudo it impacts my mac system wide? also, I did &#39;gem pristine --all&#39; and then &#39;bundle --path&#39; and then the original command I was having problems with worked.  BUT I still had to use sudo to force it to work, and this isn&#39;t the only time where I have entered a command and it didn&#39;t work unless I used sudo (other scaffolds, for instance).  How do I get around sudo? new user profile on my mac?"}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "reply_to_user": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "edited": false, "score": 0, "creation_date": 1452125725, "post_id": 34645063, "comment_id": 57036344, "body": "That is another question. On SO, I think it should be either another question (so that other people can search), or linked to another question (I am confident there are plenty similar questions here). I have a few minutes to move to a chat space, if necessary, but the basic thing is <code>sudo</code> depends on how you installed Ruby in the first place. It seems you have installed it in a folder where gems cannot be installed or run without root-level access. This is a <i>bad</i> installation that will make your Ruby life quite miserable. How about <code>RVM</code> or <code>rbenv</code> to manage Ruby installs?"}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "reply_to_user": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "edited": false, "score": 1, "creation_date": 1452125841, "post_id": 34645063, "comment_id": 57036374, "body": "If one of these answers does solve your problem, please mark one as the answer. David&#39;s answer was faster and more concise, so I vote for it. Note that our answers are upside down, so I think the &quot;right&quot; one should be the one that addresses the actual problem first :-)"}, {"owner": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "edited": false, "score": 0, "creation_date": 1452126115, "post_id": 34645063, "comment_id": 57036435, "body": "Thanks Eric.  Honestly, I thought I was using RVM to manage my Ruby install! But apparently not.  I&#39;m going to read up and figure out what I did wrong from the get go=)"}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "reply_to_user": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "edited": false, "score": 0, "creation_date": 1452126230, "post_id": 34645063, "comment_id": 57036464, "body": "RVM can be installed as <code>root</code>... Perhaps that is the reason for you to need <code>sudo</code> each time. On a dev machine, it is usually recommended to install it for your user only."}], "tags": [], "owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "is_accepted": false, "score": 2, "last_activity_date": 1452124308, "creation_date": 1452124308, "answer_id": 34645063, "question_id": 34644993, "link": "https://stackoverflow.com/questions/34644993/could-not-find-nokogiri-1-6-7-1-in-any-of-the-sources/34645063#34645063", "title": "Could not find nokogiri-1.6.7.1 in any of the sources", "body": "<p>Bundler is a tool that makes sure the runtime environment uses the right library and versions. Usually, we prepend commands to do Ruby developments, including Rails:</p>\n\n<pre><code>bundle exec rails generate controller StaticPages home help\n</code></pre>\n\n<p><code>bundle exec</code> takes a command and its parameters, and run it into the environment defined in the <code>Gemfile</code>, found in the same folder.</p>\n\n<p>And as @David Grayson mentioned, <code>sudo</code> changes the environment. For security and packaging of your code, it is better to run as your current user (and to avoid the wrath of the deployment team).</p>\n"}], "owner": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1561, "favorite_count": 0, "accepted_answer_id": 34645037, "answer_count": 2, "score": 2, "last_activity_date": 1452124527, "creation_date": 1452123965, "question_id": 34644993, "link": "https://stackoverflow.com/questions/34644993/could-not-find-nokogiri-1-6-7-1-in-any-of-the-sources", "title": "Could not find nokogiri-1.6.7.1 in any of the sources", "body": "<p>So I'm a newb (hey at least i found stack overflow right?) and I'm using Michael Hartl's Ruby on Rails Tut. Chapter three has me input:</p>\n\n<pre><code>sudo rails generate controller StaticPages home help\n</code></pre>\n\n<p>and I get back:</p>\n\n<pre><code>Could not find nokogiri-1.6.7.1 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>When I look at the bundle installer it definitely lists nokogiri 1.6.7.1\nAND when I input:</p>\n\n<pre><code>bundle show nokogiri\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>/Users/user/.rvm/gems/ruby-2.2.3@rails3tutorial2ndEd/gems/nokogiri-1.6.7.1\n</code></pre>\n\n<p>I'm using rails v 4.2.5 on my macbook pro os x el capitan v 10.11.1</p>\n\n<p>ANY HELP is supremely appreciated.  Maybe I can pay it forward a year or two from now!  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash", "cron", "whenever"], "answers": [{"comments": [{"owner": {"reputation": 1103, "user_id": 354164, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ee3236365cc26de65364d4ad6f0d32ef?s=128&d=identicon&r=PG", "display_name": "imalik8088", "link": "https://stackoverflow.com/users/354164/imalik8088"}, "edited": false, "score": 0, "creation_date": 1452590832, "post_id": 34645587, "comment_id": 57225297, "body": "And how about rbenv in production. because im using rbenv in production."}, {"owner": {"reputation": 476, "user_id": 5569392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d6669e4b55c5495e9728ca0341827ed?s=128&d=identicon&r=PG&f=1", "display_name": "Yevgeniy Goyfman", "link": "https://stackoverflow.com/users/5569392/yevgeniy-goyfman"}, "reply_to_user": {"reputation": 1103, "user_id": 354164, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ee3236365cc26de65364d4ad6f0d32ef?s=128&d=identicon&r=PG", "display_name": "imalik8088", "link": "https://stackoverflow.com/users/354164/imalik8088"}, "edited": false, "score": 0, "creation_date": 1452610304, "post_id": 34645587, "comment_id": 57239183, "body": "The error output you posted suggests that <code>rvm</code> is being used.  You should try not to use different tools between your environments.  Anyhow, for <code>rbenv</code> see this answer:  <a href=\"http://stackoverflow.com/questions/8434922/ruby-script-using-rbenv-in-cron\" title=\"ruby script using rbenv in cron\">stackoverflow.com/questions/8434922/&hellip;</a>"}], "tags": [], "owner": {"reputation": 476, "user_id": 5569392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d6669e4b55c5495e9728ca0341827ed?s=128&d=identicon&r=PG&f=1", "display_name": "Yevgeniy Goyfman", "link": "https://stackoverflow.com/users/5569392/yevgeniy-goyfman"}, "is_accepted": false, "score": 1, "last_activity_date": 1452127840, "creation_date": 1452127840, "answer_id": 34645587, "question_id": 34644929, "link": "https://stackoverflow.com/questions/34644929/whenever-gem-in-rails-is-not-running/34645587#34645587", "title": "Whenever gem in rails is not running", "body": "<p>You need to tell cron to load rvm environment.  See details here: </p>\n\n<p><a href=\"https://rvm.io/deployment/cron\" rel=\"nofollow\">https://rvm.io/deployment/cron</a></p>\n"}], "owner": {"reputation": 1103, "user_id": 354164, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ee3236365cc26de65364d4ad6f0d32ef?s=128&d=identicon&r=PG", "display_name": "imalik8088", "link": "https://stackoverflow.com/users/354164/imalik8088"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1452127840, "creation_date": 1452123557, "question_id": 34644929, "link": "https://stackoverflow.com/questions/34644929/whenever-gem-in-rails-is-not-running", "title": "Whenever gem in rails is not running", "body": "<p>I have a cron job for emailing the users in the system and it doesn't want to run. I'm getting the following error message in the log:</p>\n\n<pre><code>rake aborted!\nDon't know how to build task 'cron:deliver_email'\n/Users/ghost/.rvm/gems/ruby-2.2.1@maalify/bin/ruby_executable_hooks:15:in `eval'\n/Users/ghost/.rvm/gems/ruby-2.2.1@maalify/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>my schedule.rb is looking like that</p>\n\n<pre><code>set :environment, \"development\"\nset :whenever_command, \"bundle exec whenever\"\nset :output, {:error =&gt; \"log/cron_error_log.log\", :standard =&gt; \"log/cron_log.log\"}\n\n\nevery 1.minute do\n  command \"gem install rake\"\n  rake 'cron:deliver_email'\nend\n</code></pre>\n\n<p>The stated rake task (<code>rake 'cron:deliver_email'</code>) is running correctly if I'm it from the command line with rake cron:deliver_email</p>\n\n<p>I've added whenever to my Gemfile with the not require statement (:require => false). </p>\n\n<p>thats how my cron job is looking like</p>\n\n<pre><code>\u25b6 whenever \n* * * * * /bin/bash -l -c 'gem install rake &gt;&gt; log/cron_log.log 2&gt;&gt; log/cron_error_log.log'\n\n* * * * * /bin/bash -l -c 'cd /Users/ghost/code/IdeaProjects/maalify &amp;&amp; RAILS_ENV=development bundle exec rake cron:deliver_email --silent &gt;&gt; log/cron_log.log 2&gt;&gt; log/cron_error_log.log'\n\n## [message] Above is your schedule file converted to cron syntax; your crontab file was not updated.\n## [message] Run `whenever --help' for more options.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "parameters"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 1, "creation_date": 1452122186, "post_id": 34644585, "comment_id": 57035172, "body": "You&#39;ve only shown the <code>#new</code> method in your controller. Please also show the <code>#create</code> method, which is where the <code>Procedure</code> record will actually be persisted."}], "answers": [{"tags": [], "owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "is_accepted": true, "score": 1, "last_activity_date": 1452124261, "creation_date": 1452124261, "answer_id": 34645054, "question_id": 34644585, "link": "https://stackoverflow.com/questions/34644585/how-can-i-pass-an-id-of-one-object-to-the-controller-of-another-object/34645054#34645054", "title": "How can I pass an id of one object to the controller of another object?", "body": "<p>If group_id is required, make it part of the url and won't need it in the form view.  You'll have group_id in the params: <code>params[:group_id]</code> is what the controller should expect.</p>\n\n<pre><code>resources :groups, only: [:new, :create, :show, :destroy] do\n  resources :procedures\nend\n</code></pre>\n\n<p>In your controller, do this:</p>\n\n<pre><code>def new\n  @group = Group.find(params[:group_id])\n  @procedure = @group.procedures.new\nend\n</code></pre>\n\n<p>And you'd link to the new page like this</p>\n\n<pre><code>&lt;%= link_to 'Create a Procedure', new_group_procedure_path(@group), class: 'btn btn-default btn-small' %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 223, "user_id": 5095926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1148514948495506/picture?type=large", "display_name": "Babbz77", "link": "https://stackoverflow.com/users/5095926/babbz77"}, "edited": false, "score": 0, "creation_date": 1452284707, "post_id": 34653782, "comment_id": 57117309, "body": "So the solution worked but now when I&#39;m trying to submit my form I get a No route matches [POST] &quot;/groups/14/procedures/new&quot;. Not sure why this is because shouldn&#39;t resources automatically create a post route?"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 223, "user_id": 5095926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1148514948495506/picture?type=large", "display_name": "Babbz77", "link": "https://stackoverflow.com/users/5095926/babbz77"}, "edited": false, "score": 0, "creation_date": 1452285052, "post_id": 34653782, "comment_id": 57117508, "body": "It&#39;s because you&#39;re passing a <code>POST</code> request to your <code>new</code> action, it should be <code>GET</code>"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 0, "last_activity_date": 1452165443, "creation_date": 1452165443, "answer_id": 34653782, "question_id": 34644585, "link": "https://stackoverflow.com/questions/34644585/how-can-i-pass-an-id-of-one-object-to-the-controller-of-another-object/34653782#34653782", "title": "How can I pass an id of one object to the controller of another object?", "body": "<p>To further add to <code>Swards</code> answer, you're looking at <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow\">nested resources</a>...</p>\n\n<pre><code>#config/routes.rb\nresources :groups, except: [:edit, :update] do\n   resources :procedures #-&gt; url.com/groups/:group_id/procedures/new\nend\n</code></pre>\n\n<p>--</p>\n\n<p>When you send a request to your server, you're requesting a \"resource\".</p>\n\n<p>As defined by the <a href=\"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol\" rel=\"nofollow\">HTTP spec</a>, </p>\n\n<blockquote>\n  <p>The client submits an HTTP request message to the server. The server, which <strong>provides resources such as HTML files</strong> and other content, or performs other functions on behalf of the client</p>\n</blockquote>\n\n<p>This is why the Rails routes have <code>resources</code> directives.</p>\n\n<p>In your case, the resources you're requesting need to be dependent on another \"parent\" resource, hence you'd use the \"nested\" pattern. This provides a parameter of the \"parent\" var in your dependent controller:</p>\n\n<pre><code>#app/controllers/procedures_controller.rb\nclass ProceduresController &lt; ApplicationController\n   before_action :set_group\n\n   def new\n      @procedure = @group.procedures.new\n   end\n\n   private\n\n   def set_group\n      @group = Group.find params[:group_id]\n   end\nend  \n</code></pre>\n\n<p>--</p>\n\n<p>Your linking method would work from <code>Swards</code> recommendation; you may also benefit from <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Routing/PolymorphicRoutes.html\" rel=\"nofollow\"><code>polymorphic_path</code></a>:</p>\n\n<pre><code>&lt;%= link_to 'Create a Procedure', new_polymorphic_path([@group, :procedure]), class: 'btn btn-default btn-small' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 5095926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1148514948495506/picture?type=large", "display_name": "Babbz77", "link": "https://stackoverflow.com/users/5095926/babbz77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 34645054, "answer_count": 2, "score": 1, "last_activity_date": 1452165443, "creation_date": 1452121753, "last_edit_date": 1452125050, "question_id": 34644585, "link": "https://stackoverflow.com/questions/34644585/how-can-i-pass-an-id-of-one-object-to-the-controller-of-another-object", "title": "How can I pass an id of one object to the controller of another object?", "body": "<p>I know this has been asked but no solution has worked.</p>\n\n<p>I'm trying to pass a group id to a procedure controller so I may make that procedure belong to that group.</p>\n\n<p>Group Show View:</p>\n\n<pre><code>  &lt;%= link_to 'Create a Procedure', new_procedure_path(:group =&gt; @group.id), class: 'btn btn-default btn-small' %&gt;\n</code></pre>\n\n<p>Procedure controller:</p>\n\n<pre><code>  def new\n    @procedure = Procedure.new\n    @group = Group.find(params[:group])\n</code></pre>\n\n<p>Routes :</p>\n\n<pre><code>  resources :groups, only: [:new, :create, :show, :destroy]\n  resources :procedures\n</code></pre>\n"}, {"tags": ["javascript", "ruby"], "comments": [{"owner": {"reputation": 609, "user_id": 278360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a21cad1de31b41e1f15b3de61b91227?s=128&d=identicon&r=PG", "display_name": "jmbarbier", "link": "https://stackoverflow.com/users/278360/jmbarbier"}, "edited": false, "score": 1, "creation_date": 1452121194, "post_id": 34644357, "comment_id": 57034791, "body": "Do you want only line breaks on dots as in your sample, or something more elaborated ?"}, {"owner": {"reputation": 5139, "user_id": 1735262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Reinstate Monica -- notmaynard", "link": "https://stackoverflow.com/users/1735262/reinstate-monica-notmaynard"}, "edited": false, "score": 0, "creation_date": 1452122278, "post_id": 34644357, "comment_id": 57035214, "body": "If you&#39;re just looking to add line breaks after punctuation, something like <code>gsub(&#47;([.?!] )&#47;, &quot;\\\\1\\n&quot;)</code> should do it (though it will also break at abbreviations; left as an excercise)."}], "answers": [{"tags": [], "owner": {"reputation": 609, "user_id": 278360, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a21cad1de31b41e1f15b3de61b91227?s=128&d=identicon&r=PG", "display_name": "jmbarbier", "link": "https://stackoverflow.com/users/278360/jmbarbier"}, "is_accepted": false, "score": 0, "last_activity_date": 1452123015, "creation_date": 1452123015, "answer_id": 34644834, "question_id": 34644357, "link": "https://stackoverflow.com/questions/34644357/how-to-intelligently-add-line-breaks-to-large-blocks-of-text-with-javascript-or/34644834#34644834", "title": "How to Intelligently add line breaks to large blocks of text with Javascript or Ruby", "body": "<p>If you just want line breaks at dots, you can use (for js) :</p>\n\n<pre><code>mybigline.split(\". \").join(\"\\n\\n\");\n</code></pre>\n\n<p>If you also want to format each line up to maxlen charts, breaking at words, you can also break each paragraph at a word boundary, something like :</p>\n\n<pre><code>var maxlen = 20;\nvar line = \"vlaze lkdf lskdjf sldfsldfk sldkjf sldsd qsdkj qlskdj qlsdkj qlsdkj qlsdkj qlsdkj sldkfjsldfj fkj sldkfj s. qsldkjqsdlj. skdjhqksdjhqskjdq sd.\";\n\n// split into lines at dots\nvar par = line.split(\". \");\nvar out = []\nfor (i in par) {\n  // each line into words\n  var pline = par[i].split(\" \");\n  var curline = \"\";\n  for (j in pline) {\n    // add words to output up to maxlength\n    var curch = pline[j];\n    if(curline.length + curch.length &lt; maclent) {\n      curline += curch + (pline.length==1?\"\":\" \");\n    } else {\n      out.push(curline);\n      curline = curch + (pline.length==1?\"\":\" \");    \n    }\n  }\n  out.push(curline);\n  out.push(\"\\n\");\n}\nres = out.join(\"\\n\");\nalert(res);\n</code></pre>\n\n<p><a href=\"https://jsfiddle.net/37Lbj701/\" rel=\"nofollow\">https://jsfiddle.net/37Lbj701/</a></p>\n"}], "owner": {"reputation": 4896, "user_id": 3068360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1As83.jpg?s=128&g=1", "display_name": "Weston Ganger", "link": "https://stackoverflow.com/users/3068360/weston-ganger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452123015, "creation_date": 1452120596, "question_id": 34644357, "link": "https://stackoverflow.com/questions/34644357/how-to-intelligently-add-line-breaks-to-large-blocks-of-text-with-javascript-or", "title": "How to Intelligently add line breaks to large blocks of text with Javascript or Ruby", "body": "<p>I am looking for a library or algorithm that can take my long block of text that has no line breaks and split it into paragraphs that mostly make sense to human readability.</p>\n\n<p>Ex.</p>\n\n<pre><code>I am looking for a library or algorithm that can take my long block of text that has no line breaks and split it into paragraphs that mostly make sense to human readability. On a different note, there is something else.\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>I am looking for a library or algorithm that can take my long block of text that has no line breaks and split it into paragraphs that mostly make sense to human readability.\n\nOn a different note, there is something else.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "development-environment"], "comments": [{"owner": {"reputation": 995, "user_id": 2576714, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RcYff.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/2576714/tim"}, "edited": false, "score": 1, "creation_date": 1452120304, "post_id": 34644160, "comment_id": 57034438, "body": "This may be nothing, but paths with spaces in them have caused much pain historically with rails..  I notice your path has your name with a space.. <a href=\"https://gist.github.com/KelseyDH/11198922\" rel=\"nofollow noreferrer\">gist.github.com/KelseyDH/11198922</a>"}], "answers": [{"tags": [], "owner": {"reputation": 120, "user_id": 5741549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049cfda05105eac2d53838866876e153?s=128&d=identicon&r=PG", "display_name": "Jamie Pirie", "link": "https://stackoverflow.com/users/5741549/jamie-pirie"}, "is_accepted": false, "score": 1, "last_activity_date": 1452121709, "last_edit_date": 1452121709, "creation_date": 1452120492, "answer_id": 34644331, "question_id": 34644160, "link": "https://stackoverflow.com/questions/34644160/rails-dev-environment-on-windows-10-nameerror-gemrequire-errors/34644331#34644331", "title": "Rails Dev Environment on Windows 10 :: NameError &amp; GemRequire errors", "body": "<p>It sounds like the gem 'responders' isn't installed correctly. Try running 'gem list' and see if you've got it installed. If it's not, then try running 'gem install responders' and try again.</p>\n\n<p>P.S. I wanted to comment (not answer) but I don't have the required reputation yet.</p>\n\n<p>P.P.S. I've also had issues in the past with certain gems and the x64 version of ruby so perhaps it could also be down to that. Apologies that this response is rather vague.</p>\n"}], "owner": {"reputation": 1119, "user_id": 618599, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3769b3d6f37b535432ce4a3683ac7e1a?s=128&d=identicon&r=PG", "display_name": "Isaac Lewis", "link": "https://stackoverflow.com/users/618599/isaac-lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452121709, "creation_date": 1452119701, "question_id": 34644160, "link": "https://stackoverflow.com/questions/34644160/rails-dev-environment-on-windows-10-nameerror-gemrequire-errors", "title": "Rails Dev Environment on Windows 10 :: NameError &amp; GemRequire errors", "body": "<p>I am installing a new Windows 10 environment to continue developing an already-existing Rails API. After <code>bundle install</code>, I need to setup the db. Here's the command I am running, and the output with the errors. I am not a Rails developer, and simply need to run this API to start hacking on the Client JavaScript. Where should I start looking to fix this?</p>\n\n<p><code>$ rake db:setup --trace</code></p>\n\n<pre><code>rake aborted!\nBundler::GemRequireError: There was an error while trying to load the gem 'responders'.\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:80:in `rescue in block (2 levels) in require'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:76:in `block (2 levels) in require'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `each'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `block in require'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `each'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `require'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler.rb:99:in `require'\nC:/msys64/home/Isaac Lewis/vibragenix-api/config/application.rb:7:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nC:/msys64/home/Isaac Lewis/vibragenix-api/Rakefile:4:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/rake_module.rb:28:in `load'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/rake_module.rb:28:in `load_rakefile'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:689:in `raw_load_rakefile'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:94:in `block in load_rakefile'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:176:in `standard_exception_handling'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:93:in `load_rakefile'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:77:in `block in run'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:176:in `standard_exception_handling'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:75:in `run'\nC:/Ruby22-x64/bin/rake:33:in `&lt;main&gt;'\nNameError: uninitialized constant ActionView::Helpers::ActiveModelHelper\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionview-4.2.1/lib/action_view/helpers.rb:40:in `&lt;module:Helpers&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionview-4.2.1/lib/action_view/helpers.rb:4:in `&lt;module:ActionView&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionview-4.2.1/lib/action_view/helpers.rb:3:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionview-4.2.1/lib/action_view/base.rb:5:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionview-4.2.1/lib/action_view/view_paths.rb:1:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-4.2.1/lib/abstract_controller/rendering.rb:4:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-4.2.1/lib/action_controller/base.rb:204:in `&lt;class:Base&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-4.2.1/lib/action_controller/base.rb:164:in `&lt;module:ActionController&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-4.2.1/lib/action_controller/base.rb:5:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/responders-2.1.0/lib/responders/controller_method.rb:37:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/responders-2.1.0/lib/responders.rb:15:in `&lt;module:Responders&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/responders-2.1.0/lib/responders.rb:9:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:77:in `require'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:77:in `block (2 levels) in require'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `each'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:72:in `block in require'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `each'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:61:in `require'\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler.rb:99:in `require'\nC:/msys64/home/Isaac Lewis/vibragenix-api/config/application.rb:7:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\nC:/msys64/home/Isaac Lewis/vibragenix-api/Rakefile:4:in `&lt;top (required)&gt;'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/rake_module.rb:28:in `load'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/rake_module.rb:28:in `load_rakefile'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:689:in `raw_load_rakefile'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:94:in `block in load_rakefile'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:176:in `standard_exception_handling'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:93:in `load_rakefile'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:77:in `block in run'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:176:in `standard_exception_handling'\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/application.rb:75:in `run'\nC:/Ruby22-x64/bin/rake:33:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "middleman", "contentful"], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 659711, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3d324ad469d750c1e78a565f2af4cc2c?s=128&d=identicon&r=PG", "display_name": "morrisbret", "link": "https://stackoverflow.com/users/659711/morrisbret"}, "edited": false, "score": 0, "creation_date": 1452122048, "post_id": 34644223, "comment_id": 57035123, "body": "Thanks David but I tried this as well and it didn&#39;t make a difference. :-/. It seems like no matter what, data.blog.posts is an object rather than an array. So there really is no order."}, {"owner": {"reputation": 334, "user_id": 5439158, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1iztlFARX3s/AAAAAAAAAAI/AAAAAAAABLM/iVNkWGjfUno/photo.jpg?sz=128", "display_name": "David Litvak", "link": "https://stackoverflow.com/users/5439158/david-litvak"}, "reply_to_user": {"reputation": 189, "user_id": 659711, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3d324ad469d750c1e78a565f2af4cc2c?s=128&d=identicon&r=PG", "display_name": "morrisbret", "link": "https://stackoverflow.com/users/659711/morrisbret"}, "edited": false, "score": 0, "creation_date": 1452123299, "post_id": 34644223, "comment_id": 57035591, "body": "Can you create an issue in <a href=\"https://www.github.com/contentful/contentful_middleman\" rel=\"nofollow noreferrer\">github.com/contentful/contentful_middleman</a> so that I can follow up better?"}, {"owner": {"reputation": 189, "user_id": 659711, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3d324ad469d750c1e78a565f2af4cc2c?s=128&d=identicon&r=PG", "display_name": "morrisbret", "link": "https://stackoverflow.com/users/659711/morrisbret"}, "edited": false, "score": 0, "creation_date": 1452123710, "post_id": 34644223, "comment_id": 57035741, "body": "I actually already have: <a href=\"https://github.com/contentful/contentful_middleman/issues/68\" rel=\"nofollow noreferrer\">github.com/contentful/contentful_middleman/issues/68</a>. My guess is I&#39;m lacking some very basic understanding of MIddleman."}], "tags": [], "owner": {"reputation": 334, "user_id": 5439158, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1iztlFARX3s/AAAAAAAAAAI/AAAAAAAABLM/iVNkWGjfUno/photo.jpg?sz=128", "display_name": "David Litvak", "link": "https://stackoverflow.com/users/5439158/david-litvak"}, "is_accepted": false, "score": 0, "last_activity_date": 1452120001, "creation_date": 1452120001, "answer_id": 34644223, "question_id": 34643793, "link": "https://stackoverflow.com/questions/34643793/ordering-data-w-middleman-and-contentful/34644223#34644223", "title": "Ordering data w/ Middleman and Contentful", "body": "<p>By default, Contentful does not provide any particular order for your entries.</p>\n\n<p>You can specify order in the <code>cda_query</code> configuration parameter. You can find more information on this section of the <code>contentful_middleman</code> documentation: <a href=\"https://github.com/contentful/contentful_middleman#configuration\" rel=\"nofollow\">https://github.com/contentful/contentful_middleman#configuration</a></p>\n\n<p>Therefore your configuration block should like like the following:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>activate :contentful do |f|\n  f.space = { blog: 'xxxxxxxx' }\n  f.access_token = 'xxxxxxxxxxxxxxxxx'\n  f.content_types = { posts: 'xxxxxxxx'}\n  f.cda_query = { order: 'sys.createdAt' }\nend\n</code></pre>\n\n<p>For more information on all the ordering possibilities, you can take a look at the Contentful Delivery API documentation: <a href=\"https://www.contentful.com/developers/docs/references/content-delivery-api/#/reference/search-parameters/order\" rel=\"nofollow\">https://www.contentful.com/developers/docs/references/content-delivery-api/#/reference/search-parameters/order</a></p>\n\n<p>Hope you find this useful</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 659711, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3d324ad469d750c1e78a565f2af4cc2c?s=128&d=identicon&r=PG", "display_name": "morrisbret", "link": "https://stackoverflow.com/users/659711/morrisbret"}, "is_accepted": true, "score": -1, "last_activity_date": 1452553806, "creation_date": 1452553806, "answer_id": 34732850, "question_id": 34643793, "link": "https://stackoverflow.com/questions/34643793/ordering-data-w-middleman-and-contentful/34732850#34732850", "title": "Ordering data w/ Middleman and Contentful", "body": "<p>This question has essentially been answered here. <a href=\"https://github.com/contentful/contentful_middleman/issues/68#issuecomment-170520254\" rel=\"nofollow\">https://github.com/contentful/contentful_middleman/issues/68#issuecomment-170520254</a>.</p>\n"}], "owner": {"reputation": 189, "user_id": 659711, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3d324ad469d750c1e78a565f2af4cc2c?s=128&d=identicon&r=PG", "display_name": "morrisbret", "link": "https://stackoverflow.com/users/659711/morrisbret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 34732850, "answer_count": 2, "score": 0, "last_activity_date": 1452553806, "creation_date": 1452118248, "question_id": 34643793, "link": "https://stackoverflow.com/questions/34643793/ordering-data-w-middleman-and-contentful", "title": "Ordering data w/ Middleman and Contentful", "body": "<p>I feel like I'm taking crazy pills here! I've looked all over the internet and cannot find a solution...</p>\n\n<p><strong>The problem:</strong></p>\n\n<p>I am using contentful and <a href=\"https://github.com/contentful/contentful_middleman\" rel=\"nofollow\">middleman-contentful</a> to essentially create a blog. The content type I am interested in displaying and ordering is called \"post\". So far I have managed to pull all my posts into /data/blog/posts using the following configuration:</p>\n\n<pre><code>activate :contentful do |f|\n    f.space = { blog: 'xxxxxxxx' }\n    f.access_token = 'xxxxxxxxxxxxxxxxx'\n    f.content_types = { posts: 'xxxxxxxx'}\nend\n</code></pre>\n\n<p><em>note: I intentionally left out the IDs and tokens</em></p>\n\n<p>The problem is when I attempt to output those posts in my .erb file using the following:</p>\n\n<pre><code>&lt;% data.blog.posts.each do |id, post| %&gt;\n&lt;h1&gt;&lt;%= post.title %&gt;&lt;/h1&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This results in a list of post tiles (as expected) but there appears to be no order to the output. I would expect the output to be ordered by creation date by default. How can one go about adding this order or any other order for that matter?</p>\n\n<p>PS, one of the problems seems to be that data.blog.posts is an object with post IDs as keys. That seems problematic. Thanks for your help! I'm just getting started with middleman so forgive my ignorance!</p>\n"}, {"tags": ["ruby", "oop"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 2931106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6065d471362a67b2fde70d43dcff9cff?s=128&d=identicon&r=PG&f=1", "display_name": "mmcdevi1", "link": "https://stackoverflow.com/users/2931106/mmcdevi1"}, "edited": false, "score": 0, "creation_date": 1452184459, "post_id": 34643966, "comment_id": 57066055, "body": "Great, thank you for your response. I will go ahead and keep the Word class. Makes more sense."}], "tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1452120321, "last_edit_date": 1452120321, "creation_date": 1452118884, "answer_id": 34643966, "question_id": 34643707, "link": "https://stackoverflow.com/questions/34643707/ruby-oop-class-responsibilities/34643966#34643966", "title": "Ruby OOP Class Responsibilities", "body": "<p>In general it depends.</p>\n\n<p>For this specific case I think most people would agree that splitting the structure between Word and the Game is a good idea.  </p>\n\n<p>Word is a nice small testable piece, and so it does deserve its own class. </p>\n\n<p>It also could be reusable in a number of games that need a random word. </p>\n\n<p>I think this becomes clearer if you rewrite word so it has an initialize method.  Then the game is simply calling Word.new(...) to get a new random word.</p>\n\n<p>Imagine if there was a gem called \"words\" that already did all this.  You would be happy add the gem and say done deal.  Well that is an easy way to tell you have made a good division of labor, even no such gem exists.</p>\n\n<p>By the way once you think this should be a separate class, you might want to check to see if somebody already did it for you.  In this case there is a gem random-word.   </p>\n\n<p>What would the parameters be to words initialize?  Well the length of the word, skill level, etc etc.</p>\n\n<pre><code>class Word\n  def self.words\n    @words ||= File.readlines(\"../words.txt\")\n  end\n\n  def initialize(min_length, max_length)\n    Word.words.select do |word| \n      word.length &gt; length &amp;&amp; word.length &lt; max_length \n    end.sample\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 4616147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sAbMa.jpg?s=128&g=1", "display_name": "Tim Heilman", "link": "https://stackoverflow.com/users/4616147/tim-heilman"}, "is_accepted": false, "score": 1, "last_activity_date": 1553030677, "last_edit_date": 1553030677, "creation_date": 1553029317, "answer_id": 55249923, "question_id": 34643707, "link": "https://stackoverflow.com/questions/34643707/ruby-oop-class-responsibilities/55249923#55249923", "title": "Ruby OOP Class Responsibilities", "body": "<p>Sandi Metz has a great example of how to answer this question in <a href=\"https://www.poodr.com\" rel=\"nofollow noreferrer\"><em>Practical Object Oriented Design in Ruby</em>.</a>  Sadly, since it is copyrighted I can't link directly to the passage.</p>\n\n<p>In her example, although a bicycle seems like a good candidate for a class due to its obvious existence in the problem domain, at the point in the development of her application that she needs to compute a gear ratio, she realizes that the inputs to that calculation are all related only to gears: the number of teeth on each of two instances of Gear, and thus places the functionality on Gear, deferring the creation of the Bicycle class until a later time.</p>\n\n<p>So the general answer is: look to the input values for the required computation and place that computation's definition on the class with the greatest number of those input values as fields already.</p>\n\n<p>In your specific case:</p>\n\n<blockquote>\n  <p>is it the Game classes responsibility to generate the random word or use the Word class?</p>\n</blockquote>\n\n<p>Well first off, it seems like your Word class is more of a WordList class, although depending on your future direction, it could remain a Word class but in embodiment of the <a href=\"https://en.wikipedia.org/wiki/Composite_pattern\" rel=\"nofollow noreferrer\">composite pattern</a> .  If you do keep it as a WordList class, it has no instance methods, so discussing responsibilities of the class becomes very difficult.  Effectively the class <em>itself</em> has methods, but the class is always expected to be at \"singleton instantiation scope\" or a constant.  Ruby class names are constants, so defining methods only at the level of constants is effectively procedural, not object-oriented, code.</p>\n\n<p>To make WordList object-oriented, you can pass an IO instance (File is a subclass, but why depend on a subclass whose additionally defined methods are not needed by your code?) to WordList#initialize , potentially providing singleton access with a </p>\n\n<pre><code>def self.singleton_instance\n  @singleton_instance ||= new(File.open(\"../words.txt\"))\nend\n</code></pre>\n\n<p>This allows other clients to reuse the WordList class in other contexts by providing any kind of IO, including a <a href=\"http://ruby-doc.org/stdlib-2.4.3/libdoc/stringio/rdoc/StringIO.html\" rel=\"nofollow noreferrer\">StringIO</a>, and separates and makes explicit that loading the default, singleton WordList is only one way this class expects to be used, requires the constant-scope level file from the parent directory, and allows the instance-level behavior of a WordList to be defined.</p>\n\n<p>So far it looks like that instance-level behavior you need is a random selection from all the words.  Getting back to Sandi Metz's advice, WordList <strong>does</strong> seem like a good place to put the computation of the random selection, because WordList will have a field:</p>\n\n<pre><code>attr_reader :words\n\ndef initialize(io)\n  @words = io.readlines\nend\n</code></pre>\n\n<p>and it's exactly the <strong>words</strong> field that the filtration is to be performed upon, so this class is a good candidate for that functionality:</p>\n\n<pre><code>def random # notice no self. prefix\n  words.select { |word| word.length &gt; 4 &amp;&amp; word.length &lt; 13 }.sample\nend\n</code></pre>\n\n<p>and later, to actually-use,</p>\n\n<pre><code>@random_word = Hangman::WordList.singleton_instance.random\n</code></pre>\n\n<p>This also gives you a place to swap-out the singleton instance for a different one if you need to later, without changing the WordList class.  That should score points for complying with the <a href=\"https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle\" rel=\"nofollow noreferrer\">Open Closed Principle</a> too.</p>\n\n<p>(An aside: it seems that \"random\" may be a poor choice for method name -- it's not <em>just</em> random, but also constrained to a length of between 4 and 13 exclusive.  Perhaps \"random_suitable_length_word\"?)</p>\n"}], "owner": {"reputation": 21, "user_id": 2931106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6065d471362a67b2fde70d43dcff9cff?s=128&d=identicon&r=PG&f=1", "display_name": "mmcdevi1", "link": "https://stackoverflow.com/users/2931106/mmcdevi1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1553030677, "creation_date": 1452117956, "question_id": 34643707, "link": "https://stackoverflow.com/questions/34643707/ruby-oop-class-responsibilities", "title": "Ruby OOP Class Responsibilities", "body": "<p>I am still trying in wrap my head around OOP in Ruby. Let's say I'm trying to create a simple Hangman game and I want to select a random word from a text file. So far I have 2 examples in the codeblock. The first example shows a Word and Game class, where the Word class generates a random word and the Game class calls the Word class in the initialize method. The second example has only a Game class where the Game class itself generates the random word. My question is, is it the Game classes responsibility to generate the random word or use the Word class? </p>\n\n<pre><code># First Example\nmodule Hangman\n\n  class Word\n    def self.words\n      File.readlines(\"../words.txt\")\n    end\n\n    def self.random\n      words.select { |word| word.length &gt; 4 &amp;&amp; word.length &lt; 13 }.sample\n    end\n  end\n\n  class Game\n    attr_reader :random_word\n\n    def initialize\n      @random_word = Hangman::Word.random\n    end\n  end\n\nend\n\n# Second Example\nmodule Hangman\n\n  class Game\n    attr_reader :words, :random_word\n\n    def initialize\n      @words = File.readlines(\"../words.txt\")\n      @random_word = @words.select { |word| word.length &gt; 4 &amp;&amp; word.length &lt; 13 }.sample\n    end\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4130766, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FoR8nSXYJIM/AAAAAAAAAAI/AAAAAAAAAFQ/Mzj_xp-nxYs/photo.jpg?sz=128", "display_name": "H&#233;ctor Mon&#225;rrez", "link": "https://stackoverflow.com/users/4130766/h%c3%a9ctor-mon%c3%a1rrez"}, "edited": false, "score": 0, "creation_date": 1452133410, "post_id": 34643777, "comment_id": 57038440, "body": "this works only with that condition, but how do i add the created_at between ? and ? condition? Thanks! @court3nay"}, {"owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "reply_to_user": {"reputation": 1, "user_id": 4130766, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FoR8nSXYJIM/AAAAAAAAAAI/AAAAAAAAAFQ/Mzj_xp-nxYs/photo.jpg?sz=128", "display_name": "H&#233;ctor Mon&#225;rrez", "link": "https://stackoverflow.com/users/4130766/h%c3%a9ctor-mon%c3%a1rrez"}, "edited": false, "score": 0, "creation_date": 1452138869, "post_id": 34643777, "comment_id": 57039779, "body": "You can add more &#39;where&#39; conditions with a <code>..</code> operator -- read up on activerecord! Here&#39;s a previous answer; <a href=\"http://stackoverflow.com/questions/2381718/rails-activerecord-date-between\" title=\"rails activerecord date between\">stackoverflow.com/questions/2381718/&hellip;</a>"}, {"owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "reply_to_user": {"reputation": 1, "user_id": 4130766, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FoR8nSXYJIM/AAAAAAAAAAI/AAAAAAAAAFQ/Mzj_xp-nxYs/photo.jpg?sz=128", "display_name": "H&#233;ctor Mon&#225;rrez", "link": "https://stackoverflow.com/users/4130766/h%c3%a9ctor-mon%c3%a1rrez"}, "edited": false, "score": 0, "creation_date": 1452138976, "post_id": 34643777, "comment_id": 57039812, "body": "you can chain those &#39;where&#39;s together or put both conditions in there, where(usario_id: 1, created_at: [1.month.ago..1.day.ago])"}], "tags": [], "owner": {"reputation": 977, "user_id": 4142552, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Puiw1rqSrjE/AAAAAAAAAAI/AAAAAAAAASA/2u6qPeqLeYY/photo.jpg?sz=128", "display_name": "court3nay", "link": "https://stackoverflow.com/users/4142552/court3nay"}, "is_accepted": false, "score": 0, "last_activity_date": 1452118181, "creation_date": 1452118181, "answer_id": 34643777, "question_id": 34643643, "link": "https://stackoverflow.com/questions/34643643/multiple-sum-method-in-one-query-rails/34643777#34643777", "title": "Multiple sum method in one query rails", "body": "<p>Your rails solution is off the mark; try this to get a quick sum of one field: </p>\n\n<p><code>&lt;%= Av.where(usario_id: 1).sum(:bmx) %&gt;</code></p>\n\n<p>This will require one statement per sum. That should get you out of this hole! Then, optimize; to get multiple sums it may be best to use AS (<code>select sum(bmx) AS sum_bmx, sum(yy) AS sum_yy</code>) and do @result['sum_bmx']</p>\n\n<p>Also, subselects don't optimize well; stay away from them, just pre-calculate that number in a separate query.</p>\n\n<p>Make sense?</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4130766, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FoR8nSXYJIM/AAAAAAAAAAI/AAAAAAAAAFQ/Mzj_xp-nxYs/photo.jpg?sz=128", "display_name": "H&#233;ctor Mon&#225;rrez", "link": "https://stackoverflow.com/users/4130766/h%c3%a9ctor-mon%c3%a1rrez"}, "edited": false, "score": 0, "creation_date": 1452133212, "post_id": 34643790, "comment_id": 57038382, "body": "this gives me a nil value, just like running it from the find_by_sql query @dsounded"}, {"owner": {"reputation": 628, "user_id": 4255944, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c75ab63b854066c9a244530676657025?s=128&d=identicon&r=PG&f=1", "display_name": "dsounded", "link": "https://stackoverflow.com/users/4255944/dsounded"}, "reply_to_user": {"reputation": 1, "user_id": 4130766, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FoR8nSXYJIM/AAAAAAAAAAI/AAAAAAAAAFQ/Mzj_xp-nxYs/photo.jpg?sz=128", "display_name": "H&#233;ctor Mon&#225;rrez", "link": "https://stackoverflow.com/users/4130766/h%c3%a9ctor-mon%c3%a1rrez"}, "edited": false, "score": 0, "creation_date": 1452152010, "post_id": 34643790, "comment_id": 57044493, "body": "@H&#233;ctorMon&#225;rrez since it doesn&#39;t throw an error that table really consists those rows, if return is nil, probably you are trying to sum not number values ? In that case you should use count instead of sum"}], "tags": [], "owner": {"reputation": 628, "user_id": 4255944, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c75ab63b854066c9a244530676657025?s=128&d=identicon&r=PG&f=1", "display_name": "dsounded", "link": "https://stackoverflow.com/users/4255944/dsounded"}, "is_accepted": false, "score": 0, "last_activity_date": 1452118232, "creation_date": 1452118232, "answer_id": 34643790, "question_id": 34643643, "link": "https://stackoverflow.com/questions/34643643/multiple-sum-method-in-one-query-rails/34643790#34643790", "title": "Multiple sum method in one query rails", "body": "<p>You can make it like this:</p>\n\n<pre><code>   @er = Av.select('sum(bmx) as sum_bmx, sum(bbjoi) as sum_bbjoi) ...').first\n</code></pre>\n\n<p>And then </p>\n\n<pre><code>   @er.sum_bmx\n</code></pre>\n\n<p>etc</p>\n"}], "owner": {"reputation": 1, "user_id": 4130766, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FoR8nSXYJIM/AAAAAAAAAAI/AAAAAAAAAFQ/Mzj_xp-nxYs/photo.jpg?sz=128", "display_name": "H&#233;ctor Mon&#225;rrez", "link": "https://stackoverflow.com/users/4130766/h%c3%a9ctor-mon%c3%a1rrez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452118232, "creation_date": 1452117652, "question_id": 34643643, "link": "https://stackoverflow.com/questions/34643643/multiple-sum-method-in-one-query-rails", "title": "Multiple sum method in one query rails", "body": "<p>I am trying to get a table that adds all of the values gotten from the query my query on sql looks like this: </p>\n\n<pre><code>SELECT sum(bmx), sum(amex), sum(bbjio), sum(bancomer), sum(santander), sum(pesos), sum(dolares), sum(gastos),sum(venta_tot) \nFROM avm.avs\nWHERE usuario_id = 2;\n</code></pre>\n\n<p>this works perfectly on mysql, the problem is translating it to rails. I did something like this: </p>\n\n<pre><code>@er = Av.find_by_sql([\"SELECT * FROM avm.avs where created_at between ? and ? and usuario_id in(select id from avm.usuarios where tienda = ?)\",@startd, @endd, @nom])\n</code></pre>\n\n<p>and on my views retrieve the values with the sum method:</p>\n\n<pre><code>&lt;h2&gt;Bancos&lt;/h2&gt;&lt;hr&gt;\n        &lt;h4&gt;Banamex&lt;/h4&gt;&lt;%= @er.sum(:bmx) %&gt;\n        &lt;h4&gt;BanBajio&lt;/h4&gt;&lt;%= @er.sum(:bbjio) %&gt;\n        &lt;h4&gt;Santander&lt;/h4&gt;&lt;%= @er.sum(:santander) %&gt;\n</code></pre>\n\n<p>Also tried with the loop <code>&lt;% @er.each do |t| %&gt;</code> but didnt work either.</p>\n\n<p>Any ideas here? </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "mechanize"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1452120289, "post_id": 34643214, "comment_id": 57034428, "body": "It&#39;s difficult to tell exactly what you&#39;re asking. Mechanize relies on Nokogiri, which <i>can</i> modify the HTML, but Mechanize might not be able to recognize that change without reparsing. But, more important, the server-side will not be able to accept the changed form unless it&#39;s been written to handle unexpected/arbitrary submit field names. I&#39;d highly recommend learning more about how web-servers and form-processing works."}], "answers": [{"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 0, "last_activity_date": 1452132278, "creation_date": 1452132278, "answer_id": 34646226, "question_id": 34643214, "link": "https://stackoverflow.com/questions/34643214/ruby-mechanize-create-custom-submit-button/34646226#34646226", "title": "Ruby Mechanize - create custom &quot;Submit&quot; button", "body": "<p>Yes but it's probably easier to just do:</p>\n\n<pre><code>form['custom_name'] = value\n</code></pre>\n\n<p>And then submit it.</p>\n"}], "owner": {"reputation": 13, "user_id": 4528461, "user_type": "registered", "profile_image": "https://graph.facebook.com/1573461439561757/picture?type=large", "display_name": "Jo&#227;o Carlos Melati F", "link": "https://stackoverflow.com/users/4528461/jo%c3%a3o-carlos-melati-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452132278, "creation_date": 1452116026, "question_id": 34643214, "link": "https://stackoverflow.com/questions/34643214/ruby-mechanize-create-custom-submit-button", "title": "Ruby Mechanize - create custom &quot;Submit&quot; button", "body": "<p>Would it be possible to create a new \"submit\" button inside an existing form, with a custom \"name\" attribute and then submit it?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "angularjs"], "comments": [{"owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "edited": false, "score": 0, "creation_date": 1452114791, "post_id": 34642776, "comment_id": 57031629, "body": "You can&#39;t call server-side functions from client side code. (Allowing this would be a serious security vulnerability.) Use an AJAX request instead."}, {"owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "reply_to_user": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "edited": false, "score": 0, "creation_date": 1452117479, "post_id": 34642776, "comment_id": 57033077, "body": "Then why am I able to call the other functions? in the <code>tasks_controller.rb</code> file (i.e. <code>tasks.create</code>, <code>tasks.up_completion</code>, <code>tasks.down_completion</code> (not shown), etc.?"}, {"owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "edited": false, "score": 0, "creation_date": 1452118096, "post_id": 34642776, "comment_id": 57033397, "body": "Touch&#233;. I&#39;m not actually familiar with Angular, but my guess is it has something to do with <code>create</code>, <code>show</code>, <code>update</code>, and <code>destroy</code> being mapped to standard REST routes in Rails by default. If that is indeed the cause, then <code>up_completion</code> and <code>down_completion</code> shouldn&#39;t work either, just <code>create</code>, <code>show</code>, <code>update</code>, and <code>destroy</code>. Regardless, you aren&#39;t calling those methods directly. Somewhere along the line, AJAX is almost certainly involved (or maybe websockets. Like I said, I&#39;m not actually familiar with Angular), it&#39;s just being handled automatically by Angular. Just an observation."}, {"owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "reply_to_user": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "edited": false, "score": 0, "creation_date": 1452118360, "post_id": 34642776, "comment_id": 57033522, "body": "I agree that I&#39;m probably not calling them directly (I&#39;m still new to backend processes), I just can&#39;t seem to figure out why every function other than <code>moveOrder</code> works"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1452160068, "post_id": 34642776, "comment_id": 57048874, "body": "@JeremyThomas - You are not calling those functions. What you do is you are calling javascript function, which makes an AJAX call to your API server. Most likely you are using <code>angular-rails-resource</code> which automatically creates those functions for you to handle all CRUD operations (so methods like show or index are available), but you need to add all your custom methods manually. Your <code>task</code> factory is crucial here.  Please refer to the documentation of whatever library you use."}], "answers": [{"comments": [{"owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "edited": false, "score": 0, "creation_date": 1452173625, "post_id": 34650756, "comment_id": 57058065, "body": "my apologies for not including my <code>app.js</code> file.  I&#39;ve added it above"}, {"owner": {"reputation": 1721, "user_id": 676366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rzzUN.jpg?s=128&g=1", "display_name": "taglia", "link": "https://stackoverflow.com/users/676366/taglia"}, "reply_to_user": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "edited": false, "score": 0, "creation_date": 1452177142, "post_id": 34650756, "comment_id": 57060651, "body": "Sorry I assumed you were using $resource\u2026 That said, where do you define task_id and pos in your rails controller, in the moveOrder action? Shouldn&#39;t you get them from the request&#39;s parameters?"}, {"owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "edited": false, "score": 0, "creation_date": 1452178249, "post_id": 34650756, "comment_id": 57061468, "body": "Yes, which I cannot seem to get working.  I&#39;m fooling around with <code>$resource</code> now and hopefully I&#39;ll figure it out.  Would the missing params cause the function to not be found?"}, {"owner": {"reputation": 1721, "user_id": 676366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rzzUN.jpg?s=128&g=1", "display_name": "taglia", "link": "https://stackoverflow.com/users/676366/taglia"}, "reply_to_user": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "edited": false, "score": 0, "creation_date": 1452178781, "post_id": 34650756, "comment_id": 57061840, "body": "Not the missing params, but a server error (http status 500) potentially yes. You can check the server log to see what is happening."}], "tags": [], "owner": {"reputation": 1721, "user_id": 676366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rzzUN.jpg?s=128&g=1", "display_name": "taglia", "link": "https://stackoverflow.com/users/676366/taglia"}, "is_accepted": false, "score": 0, "last_activity_date": 1452156548, "creation_date": 1452156548, "answer_id": 34650756, "question_id": 34642776, "link": "https://stackoverflow.com/questions/34642776/angular-rails-angular-cannot-find-controller-function/34650756#34650756", "title": "Angular + Rails: Angular cannot find controller function", "body": "<p>You should check the documentation for <a href=\"https://docs.angularjs.org/api/ngResource/service/$resource\" rel=\"nofollow\"><code>$resource</code></a>. RESTful routes are provided (thus <code>create</code>, <code>get</code>, etc. will work), but you need to explicitly define additional actions, which you will map to the routes corresponding to the controller actions. You would do something like this:</p>\n\n<pre><code>app.factory('Tasks', ['$resource', function($resource) {\nreturn $resource('/tasks/:id', null,\n  {\n    'moveOrder': { method:'POST', url: 'route_to_your_action' },\n    'otherAction': { url: 'route_to_your_action' }\n  });\n}]);\n</code></pre>\n"}], "owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1452173674, "creation_date": 1452114555, "last_edit_date": 1452173674, "question_id": 34642776, "link": "https://stackoverflow.com/questions/34642776/angular-rails-angular-cannot-find-controller-function", "title": "Angular + Rails: Angular cannot find controller function", "body": "<p><strong>Problem:</strong> I wrote an Angular / Rails app and when I attempt to access a Rails controller function from the Angular controller, I get an error: <code>Uncaught TypeError: tasks.moveOrder is not a function</code>, but all other functions on that page are available</p>\n\n<p><strong>tasks_controller.rb</strong></p>\n\n<pre><code>def index\n    respond_with Task.all\nend\n\ndef create\n    respond_with Task.create(task_params)\nend\n\ndef destroy\n    task = Task.find(params[:id])\n    task.destroy\n\n    respond_with task\nend\n\ndef show\n    respond_with Task.find(params[:id])\nend\n\ndef moveOrder # This is the function that cannot be found\n    task = Task.find(task_id)\n    task.position = pos\n\n    respond_with task\nend\n\ndef up_completion\n    task = Task.find(params[:id])\n    task.increment!(:completion)\n\n    respond_with task\nend\n\ndef down_completion\n    task = Task.find(params[:id])\n    task.decrement!(:completion)\n\n    respond_with task\nend\n\nprivate\ndef task_params\n    params.require(:task).permit(:title, :completion, :importance, :steps, :clicked, :position)\nend\n</code></pre>\n\n<p>Each of these functions have routes and each function is called through my angular controller:</p>\n\n<p><strong>MainCtrl.js</strong></p>\n\n<pre><code>.controller('MainCtrl', [\n'$scope',\n'tasks',\nfunction($scope, tasks){\n\n    $scope.tasks = tasks.tasks;\n    $scope.items = ['one', 'two', 'three'];\n\n    $scope.addTask = function() {\n        var taskPosition = tasks.tasks.length + 1;\n        if(!$scope.title || $scope.title === '') { return; }\n        tasks.create({ // This call to the .rb file works!\n            title: $scope.title, \n            importance: $scope.importance,\n            completion: 0,  \n            steps: $scope.steps,\n            clicked: false,\n            position: taskPosition // puts position as field in db (needs to be updated when dragged)\n        });\n        $scope.title = '';\n        $scope.importance = '';\n        $scope.steps = '';\n    };\n\n    $scope.moveTask = function(start_pos, end_pos) {\n        $.get( \"http://localhost:3000/tasks.json\" )\n        .done(function( data ) {\n                var task_id = data[start_pos].id;\n                tasks.moveOrder(task_id, end_pos) // This call to the .rb file fails!\n        });\n    };\n\n    ...\n</code></pre>\n\n<p><strong>app.js</strong></p>\n\n<pre><code>.config([\n'$stateProvider',\n'$urlRouterProvider',\nfunction($stateProvider, $urlRouterProvider) {\n\n  $stateProvider\n\n    .state('home', {\n      url: '/home',\n      templateUrl: 'home/_home.html',\n      controller: 'MainCtrl',\n            resolve: {\n                taskPromise: ['tasks', function(tasks){\n                    return tasks.getAll();\n                }]\n            }\n    })\n\n        .state('tasks', {\n            url: '/tasks/{id}',\n            templateUrl: 'tasks/_tasks.html',\n            controller: 'TasksCtrl'\n        });\n\n  $urlRouterProvider.otherwise('home');\n}]);\n</code></pre>\n\n<p>Is the function call failing because I wrote something incorrectly or is there some other issue altogether?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 3050, "user_id": 1810434, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/498Wj.png?s=128&g=1", "display_name": "Joe Essey", "link": "https://stackoverflow.com/users/1810434/joe-essey"}, "edited": false, "score": 3, "creation_date": 1452114684, "post_id": 34642684, "comment_id": 57031573, "body": "<code>render</code> requires ActionView::PartialRenderer: <a href=\"http://api.rubyonrails.org/classes/ActionView/PartialRenderer.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/PartialRenderer.html</a>.  In order to include that, you should write a ruby script which includes that package.  I&#39;m not sure if that will fully solve your problem but should get you started."}, {"owner": {"reputation": 13, "user_id": 5754341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e4bbdfe30ce4bcd8466cc73e21d271?s=128&d=identicon&r=PG&f=1", "display_name": "Muunda", "link": "https://stackoverflow.com/users/5754341/muunda"}, "reply_to_user": {"reputation": 3050, "user_id": 1810434, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/498Wj.png?s=128&g=1", "display_name": "Joe Essey", "link": "https://stackoverflow.com/users/1810434/joe-essey"}, "edited": false, "score": 0, "creation_date": 1452117205, "post_id": 34642684, "comment_id": 57032941, "body": "Ok, I am very new to ruby, so how would I include that package?"}, {"owner": {"reputation": 3050, "user_id": 1810434, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/498Wj.png?s=128&g=1", "display_name": "Joe Essey", "link": "https://stackoverflow.com/users/1810434/joe-essey"}, "edited": false, "score": 0, "creation_date": 1452117462, "post_id": 34642684, "comment_id": 57033072, "body": "I would take an hour and learn how to run Ruby scripts and how to include packages (&quot;gems&quot;) within them.  Basically you&#39;re going to have a <code>run.rb</code> file that has <code>require</code> statements at the top, one of which will require <code>erb</code>.  Within that file you&#39;ll write the code necessary to render the erb in to a new file... or check this out: <a href=\"http://www.stuartellis.eu/articles/erb/\" rel=\"nofollow noreferrer\">stuartellis.eu/articles/erb</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1242, "user_id": 3252252, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/4V81y.jpg?s=128&g=1", "display_name": "Jesuspc", "link": "https://stackoverflow.com/users/3252252/jesuspc"}, "is_accepted": true, "score": 0, "last_activity_date": 1452125860, "creation_date": 1452125860, "answer_id": 34645303, "question_id": 34642684, "link": "https://stackoverflow.com/questions/34642684/erb-partials-to-create-static-html-with-command-line/34645303#34645303", "title": "ERB partials to create static html with command line", "body": "<p>What about this script:</p>\n\n<pre><code>require 'erb'\n\ndef render(filename)\n  ERB.new(File.read \"#{filename}.html.erb\").result(binding)\nend\n\nFile.open('new-test.html', 'w') do |file|\n  file.write render('test')\nend\n</code></pre>\n\n<p>It will read your test.html.erb, interpolate the ruby code properly including the calls to our custom render (so no need for any external library to handle that), and output a new-test.html file. You can run it by:</p>\n\n<pre><code>ruby script_name.rb\n</code></pre>\n\n<p>Notice how we need to provide a binding object to ERB. It is what defines the context of evaluation of the interpolated ruby in the template. Here we are providing the binding of the script itself, that's why we have access to the render method inside the erb template.</p>\n"}], "owner": {"reputation": 13, "user_id": 5754341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e4bbdfe30ce4bcd8466cc73e21d271?s=128&d=identicon&r=PG&f=1", "display_name": "Muunda", "link": "https://stackoverflow.com/users/5754341/muunda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 34645303, "answer_count": 1, "score": 1, "last_activity_date": 1452125860, "creation_date": 1452114099, "question_id": 34642684, "link": "https://stackoverflow.com/questions/34642684/erb-partials-to-create-static-html-with-command-line", "title": "ERB partials to create static html with command line", "body": "<p>I am trying make a very basic ERB to make an html file from multiple smaller html files. I read that I can use </p>\n\n<pre><code>&lt;%= h(render \"filename\") %&gt;\n</code></pre>\n\n<p>To add a the contents file called _filename.html.erb to the document. When I try to generate a file in command line using </p>\n\n<pre><code>erb test.html.erb &gt; new-test.html\n</code></pre>\n\n<p>It get the error</p>\n\n<pre><code>test.html.erb:9:in `&lt;main&gt;': undefined method `render' for main:Object (NoMethodError)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/erb.rb:849:in `eval'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/erb.rb:849:in `result'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/erb.rb:831:in `run'\n    from /usr/bin/erb:133:in `run'\n    from /usr/bin/erb:154:in `&lt;main&gt;'\n</code></pre>\n\n<p>Am I doing something wrong or do I need to run it as a web app for \"render\" to work? </p>\n\n<p>test.html.erb code for reference:</p>\n\n<pre><code>    &lt;html lang=\"en\"&gt;\n     &lt;body&gt;\n\n       &lt;%= h(render \"me\") %&gt;\n\n     &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2250, "user_id": 5180707, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/21cd167a116deb23358c244a0e471a3d?s=128&d=identicon&r=PG&f=1", "display_name": "Billy Logan", "link": "https://stackoverflow.com/users/5180707/billy-logan"}, "edited": false, "score": 0, "creation_date": 1452114457, "post_id": 34642706, "comment_id": 57031461, "body": "It is working! Thanks a ton! By the way, maybe you&#39;d probably know where I can read about this?"}, {"owner": {"reputation": 628, "user_id": 4255944, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c75ab63b854066c9a244530676657025?s=128&d=identicon&r=PG&f=1", "display_name": "dsounded", "link": "https://stackoverflow.com/users/4255944/dsounded"}, "reply_to_user": {"reputation": 2250, "user_id": 5180707, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/21cd167a116deb23358c244a0e471a3d?s=128&d=identicon&r=PG&f=1", "display_name": "Billy Logan", "link": "https://stackoverflow.com/users/5180707/billy-logan"}, "edited": false, "score": 0, "creation_date": 1452114539, "post_id": 34642706, "comment_id": 57031499, "body": "you can find a lot of the core methods here <a href=\"http://ruby-doc.org/core-2.2.0/Array.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Array.html</a>  You can find last which is equal to first but takes exactly last number of elements  And take method which is equal to first"}, {"owner": {"reputation": 2250, "user_id": 5180707, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/21cd167a116deb23358c244a0e471a3d?s=128&d=identicon&r=PG&f=1", "display_name": "Billy Logan", "link": "https://stackoverflow.com/users/5180707/billy-logan"}, "edited": false, "score": 0, "creation_date": 1452114952, "post_id": 34642706, "comment_id": 57031711, "body": "But sad thing is that this refuses to work in Rails view."}, {"owner": {"reputation": 628, "user_id": 4255944, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c75ab63b854066c9a244530676657025?s=128&d=identicon&r=PG&f=1", "display_name": "dsounded", "link": "https://stackoverflow.com/users/4255944/dsounded"}, "reply_to_user": {"reputation": 2250, "user_id": 5180707, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/21cd167a116deb23358c244a0e471a3d?s=128&d=identicon&r=PG&f=1", "display_name": "Billy Logan", "link": "https://stackoverflow.com/users/5180707/billy-logan"}, "edited": false, "score": 0, "creation_date": 1452115193, "post_id": 34642706, "comment_id": 57031854, "body": "@BillyLogan Are you sure ? Could you provide full code example ?"}], "tags": [], "owner": {"reputation": 628, "user_id": 4255944, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c75ab63b854066c9a244530676657025?s=128&d=identicon&r=PG&f=1", "display_name": "dsounded", "link": "https://stackoverflow.com/users/4255944/dsounded"}, "is_accepted": true, "score": 2, "last_activity_date": 1452115764, "last_edit_date": 1452115764, "creation_date": 1452114207, "answer_id": 34642706, "question_id": 34642673, "link": "https://stackoverflow.com/questions/34642673/how-to-list-certain-amount-of-items-in-collection/34642706#34642706", "title": "How to list certain amount of items in collection?", "body": "<p>Try </p>\n\n<pre><code>    collection.first(5).each do |variable|\n</code></pre>\n\n<p>In Rails AR collection:</p>\n\n<pre><code>    Article.first(5)\n</code></pre>\n\n<p>and then you can just go through whole collection, because it will consist 5 records.</p>\n"}], "owner": {"reputation": 2250, "user_id": 5180707, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/21cd167a116deb23358c244a0e471a3d?s=128&d=identicon&r=PG&f=1", "display_name": "Billy Logan", "link": "https://stackoverflow.com/users/5180707/billy-logan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 34642706, "answer_count": 1, "score": 1, "last_activity_date": 1452115993, "creation_date": 1452114032, "last_edit_date": 1452115993, "question_id": 34642673, "link": "https://stackoverflow.com/questions/34642673/how-to-list-certain-amount-of-items-in-collection", "title": "How to list certain amount of items in collection?", "body": "<p>Basically things go that way</p>\n\n<pre><code>collection.each do |variable|\n   code\nend\n</code></pre>\n\n<p>But what do I do if I want to output, for example, only first five items out of my collection?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 8143, "user_id": 537943, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/910d6caf7e77a69b61fbf0b4e0d32532?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/537943/tom"}, "edited": false, "score": 0, "creation_date": 1452261441, "post_id": 34642661, "comment_id": 57102649, "body": "I get undefined method `pages&#39; for #&lt;Listing::ActiveRecord_Associations_CollectionProx"}, {"owner": {"reputation": 11736, "user_id": 610351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f4ee98206d84b25a83228e285c678f0?s=128&d=identicon&r=PG", "display_name": "Geoffroy", "link": "https://stackoverflow.com/users/610351/geoffroy"}, "reply_to_user": {"reputation": 8143, "user_id": 537943, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/910d6caf7e77a69b61fbf0b4e0d32532?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/537943/tom"}, "edited": false, "score": 0, "creation_date": 1452275737, "post_id": 34642661, "comment_id": 57112464, "body": "I just used your example (<code>listings.pages</code>), but if listings is a collection, then iterate over it and for each listing get the distinct authors of the pages."}], "tags": [], "owner": {"reputation": 11736, "user_id": 610351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f4ee98206d84b25a83228e285c678f0?s=128&d=identicon&r=PG", "display_name": "Geoffroy", "link": "https://stackoverflow.com/users/610351/geoffroy"}, "is_accepted": false, "score": 4, "last_activity_date": 1452113975, "creation_date": 1452113975, "answer_id": 34642661, "question_id": 34642605, "link": "https://stackoverflow.com/questions/34642605/rails-get-unique-columns-parent/34642661#34642661", "title": "Rails - get unique column&#39;s &quot;parent&quot;", "body": "<p>Have you tried:</p>\n\n<pre><code>listings.pages.distinct(:author)\n</code></pre>\n\n<p>It returns a list of all distinct author for the current selection, i.e. pages that are in your listing.</p>\n"}, {"tags": [], "owner": {"reputation": 3331, "user_id": 994210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32122073312c9c8b4c6a05f4c1257516?s=128&d=identicon&r=PG", "display_name": "Tom L", "link": "https://stackoverflow.com/users/994210/tom-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1452114793, "creation_date": 1452114793, "answer_id": 34642847, "question_id": 34642605, "link": "https://stackoverflow.com/questions/34642605/rails-get-unique-columns-parent/34642847#34642847", "title": "Rails - get unique column&#39;s &quot;parent&quot;", "body": "<p>I'm making a few assumptions because it's not clear from your description:</p>\n\n<pre><code>Listing \n  belongs_to :page\n\nPage\n  belongs_to :author\n  has_many :listings\n\nAuthor\n  has_many :pages\n  has_many :listings, through: :pages\n</code></pre>\n\n<p>If that is correct then you could do something like:</p>\n\n<pre><code>listing_ids = Listing.where(\"some condition is met\").pluck(:id)\nAuthor.includes(:listings).where(listings: { id: listing_ids) })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1452117301, "creation_date": 1452117301, "answer_id": 34643563, "question_id": 34642605, "link": "https://stackoverflow.com/questions/34642605/rails-get-unique-columns-parent/34643563#34643563", "title": "Rails - get unique column&#39;s &quot;parent&quot;", "body": "<p>Flip your thinking around.  Start with Author.</p>\n\n<p>This will generate all the authors of all the pages that are in the specific listings.  If listing is a collection, you'll need to do something like this.</p>\n\n<pre><code>Author.joins(:pages =&gt; :listings).where('listings condition')\n</code></pre>\n\n<p>The join will ensure you only get authors that have a page in that particular listing (or listings)</p>\n"}], "owner": {"reputation": 8143, "user_id": 537943, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/910d6caf7e77a69b61fbf0b4e0d32532?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/537943/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 34642847, "answer_count": 3, "score": 0, "last_activity_date": 1452117301, "creation_date": 1452113814, "question_id": 34642605, "link": "https://stackoverflow.com/questions/34642605/rails-get-unique-columns-parent", "title": "Rails - get unique column&#39;s &quot;parent&quot;", "body": "<p>It's a bit tricky to phrase the question but say I have an array of Objects named <code>Listing</code> that contains the columns:</p>\n\n<pre><code>irb(main):003:0&gt; Listing.column_names\n=&gt; [\"id\", \"content\", \"created_at\", \"updated_at\", \"page_id\"]\n</code></pre>\n\n<p>And the Object <code>Page</code> which belongs_to another Object <code>Author</code>, and I want to populate all the unique Authors of all the Listings.</p>\n\n<p>So something like:</p>\n\n<pre><code>listings.pages.where(|p| p.Author is unique)\n</code></pre>\n\n<p>But I want to get the Authors not the Pages. Is there a quick way to map this? what am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 321, "user_id": 1179316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b1m1d.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1179316/chris"}, "edited": false, "score": 0, "creation_date": 1452112947, "post_id": 34642347, "comment_id": 57030674, "body": "You are calling the signout via GET, but based on rake routes it only supports DELETE"}, {"owner": {"reputation": 321, "user_id": 1179316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b1m1d.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1179316/chris"}, "edited": false, "score": 0, "creation_date": 1452113110, "post_id": 34642347, "comment_id": 57030765, "body": "See this for reference <a href=\"http://stackoverflow.com/questions/6557311/no-route-matches-users-sign-out-devise-rails-3\" title=\"no route matches users sign out devise rails 3\">stackoverflow.com/questions/6557311/&hellip;</a>"}, {"owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "reply_to_user": {"reputation": 321, "user_id": 1179316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b1m1d.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1179316/chris"}, "edited": false, "score": 0, "creation_date": 1452113114, "post_id": 34642347, "comment_id": 57030767, "body": "i have this in my view <code>&lt;li&gt;&lt;%= link_to &quot;Log Out&quot;, destroy_retailer_session_path,method: :delete%&gt;&lt;&#47;li&gt;</code>"}, {"owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "edited": false, "score": 0, "creation_date": 1452113392, "post_id": 34642347, "comment_id": 57030909, "body": "First verify you are requiring rails_ujs in your application.js file .  Is your link_to is in a hidden or not created panel called by javascript?  For instance, if you have a hidden fly-out panel someone clicks on which unhides it or renders it - then click log ?"}, {"owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1452113594, "post_id": 34642347, "comment_id": 57031004, "body": "Whoa this worked. THANKS."}, {"owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "edited": false, "score": 0, "creation_date": 1452113839, "post_id": 34642347, "comment_id": 57031139, "body": "heh, glad you got it - should be jquery_ujs, not rails ujs.  but you seem to have resolved that."}, {"owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1452114041, "post_id": 34642347, "comment_id": 57031259, "body": "Yes it was jquery ujs. You are awesome."}], "answers": [{"comments": [{"owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1452113132, "post_id": 34642395, "comment_id": 57030778, "body": "this is how my views look <code>&lt;li&gt;&lt;%= link_to &quot;Log Out&quot;, destroy_retailer_session_path,method: :delete%&gt;&lt;&#47;li&gt;</code>"}, {"owner": {"reputation": 628, "user_id": 4255944, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c75ab63b854066c9a244530676657025?s=128&d=identicon&r=PG&f=1", "display_name": "dsounded", "link": "https://stackoverflow.com/users/4255944/dsounded"}, "reply_to_user": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1452113423, "post_id": 34642395, "comment_id": 57030919, "body": "@suyesh Do you really click on that link ? Where is this link situated ?"}, {"owner": {"reputation": 628, "user_id": 4255944, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c75ab63b854066c9a244530676657025?s=128&d=identicon&r=PG&f=1", "display_name": "dsounded", "link": "https://stackoverflow.com/users/4255944/dsounded"}, "reply_to_user": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1452113672, "post_id": 34642395, "comment_id": 57031046, "body": "@suyesh Could you inspect in HTML ? Do you see this in built html         data-method=&quot;delete&quot; ?"}], "tags": [], "owner": {"reputation": 628, "user_id": 4255944, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c75ab63b854066c9a244530676657025?s=128&d=identicon&r=PG&f=1", "display_name": "dsounded", "link": "https://stackoverflow.com/users/4255944/dsounded"}, "is_accepted": false, "score": 1, "last_activity_date": 1452113049, "creation_date": 1452113049, "answer_id": 34642395, "question_id": 34642347, "link": "https://stackoverflow.com/questions/34642347/getting-devise-sign-out-error/34642395#34642395", "title": "Getting devise sign_out error", "body": "<p>You need to add </p>\n\n<pre><code>   method: :delete\n</code></pre>\n\n<p>to your Sign-out link_to to perform DELETE HTTP request instead of default GET</p>\n"}], "owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452113049, "creation_date": 1452112834, "question_id": 34642347, "link": "https://stackoverflow.com/questions/34642347/getting-devise-sign-out-error", "title": "Getting devise sign_out error", "body": "<p>The error i am getting </p>\n\n<pre><code>No route matches [GET] \"/retailers/sign_out\"\n</code></pre>\n\n<p>my routes file </p>\n\n<pre><code>  devise_for :retailers\n  devise_for :suppliers\n  devise_for :admins, skip: [:registration]\n</code></pre>\n\n<p>And the rake routes</p>\n\n<pre><code>destroy_retailer_session_path   DELETE  /retailers/sign_out(.:format) devise/sessions#destroy\n</code></pre>\n\n<p>Why can't i sign out? </p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 3719034, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eb93ec3606471888fd1deefbf5db4363?s=128&d=identicon&r=PG", "display_name": "stephen", "link": "https://stackoverflow.com/users/3719034/stephen"}, "is_accepted": false, "score": 1, "last_activity_date": 1452694703, "last_edit_date": 1495540361, "creation_date": 1452111766, "answer_id": 34642051, "question_id": 34642050, "link": "https://stackoverflow.com/questions/34642050/cloud-9-c9-rails-unable-to-connect-to-mysql/34642051#34642051", "title": "Cloud 9 / c9 - Rails unable to connect to mysql", "body": "<p>Looking at config/database.yml</p>\n\n<pre><code>development:\n  &lt;&lt;: *default\n  database: my_rails_app_development\n</code></pre>\n\n<p>This needs to be changed to</p>\n\n<pre><code>development:\n  adapter: mysql2\n  encoding: utf8\n  database: c9\n  username: &lt;%=ENV['C9_USER']%&gt;\n  host: &lt;%=ENV['IP']%&gt;\n</code></pre>\n\n<p>This gets your c9 username, and hostname (in this case 0.0.0.0) for you and inserts the values so you don't need to go figuring them out yourself. Now, when you restart the server, you get:</p>\n\n<pre><code>Can't connect to MySQL server on '0.0.0.0' (111)\n</code></pre>\n\n<p>Stop the server. Run: <code>mysql-ctl start</code> And now restart the server (<code>rails s -b $IP -p $PORT</code>)</p>\n\n<p>If this still doesn't work, try: <code>sudo service mysqld start</code> or <code>sudo service mysql start</code></p>\n\n<p>Credit to: \n<a href=\"https://stackoverflow.com/questions/23460519/cloud-9-ide-cant-connect-to-database\">Cloud 9 IDE can&#39;t connect to database</a>\n<a href=\"https://stackoverflow.com/questions/19653670/mysql-cant-connect-to-local-server-through-socket-on-amazon-ec2\">Mysql can&#39;t connect to local server through socket on Amazon EC2</a>\n<a href=\"https://docs.c9.io/docs/running-a-rails-app\" rel=\"nofollow noreferrer\">https://docs.c9.io/docs/running-a-rails-app</a></p>\n"}, {"comments": [{"owner": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "edited": false, "score": 0, "creation_date": 1455615282, "post_id": 35426693, "comment_id": 58556013, "body": "This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post - you can always comment on your own posts, and once you have sufficient <a href=\"http://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"http://stackoverflow.com/help/privileges/comment\">comment on any post</a>. - <a href=\"/review/low-quality-posts/11282336\">From Review</a>"}, {"owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "reply_to_user": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "edited": false, "score": 1, "creation_date": 1455667289, "post_id": 35426693, "comment_id": 58588806, "body": "@Yasky How does this not attempt to provide an answer? It might be completely wrong, <a href=\"http://meta.stackoverflow.com/q/287563/1849664\">but that doesn&#39;t mean we should abuse the review queues to delete it.</a>"}, {"owner": {"reputation": 21, "user_id": 2072386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/149ef00f7ce851cf60110058f1b31081?s=128&d=identicon&r=PG", "display_name": "Ephraim", "link": "https://stackoverflow.com/users/2072386/ephraim"}, "edited": false, "score": 1, "creation_date": 1455689012, "post_id": 35426693, "comment_id": 58595405, "body": "You could be right Yasky. My answer applies to the following error.        Can&#39;t connect to MySQL server on &#39;0.0.0.0&#39; (111)"}], "tags": [], "owner": {"reputation": 21, "user_id": 2072386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/149ef00f7ce851cf60110058f1b31081?s=128&d=identicon&r=PG", "display_name": "Ephraim", "link": "https://stackoverflow.com/users/2072386/ephraim"}, "is_accepted": false, "score": 0, "last_activity_date": 1455609034, "creation_date": 1455609034, "answer_id": 35426693, "question_id": 34642050, "link": "https://stackoverflow.com/questions/34642050/cloud-9-c9-rails-unable-to-connect-to-mysql/35426693#35426693", "title": "Cloud 9 / c9 - Rails unable to connect to mysql", "body": "<p>I tried </p>\n\n<pre><code>mysql-ctl restart\n</code></pre>\n\n<p>on my terminal and it worked.</p>\n"}], "owner": {"reputation": 193, "user_id": 3719034, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eb93ec3606471888fd1deefbf5db4363?s=128&d=identicon&r=PG", "display_name": "stephen", "link": "https://stackoverflow.com/users/3719034/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1889, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1455609034, "creation_date": 1452111766, "question_id": 34642050, "link": "https://stackoverflow.com/questions/34642050/cloud-9-c9-rails-unable-to-connect-to-mysql", "title": "Cloud 9 / c9 - Rails unable to connect to mysql", "body": "<p>I'm a beginner using the Lynda tutorial for Ruby on Rails, but trying to go through it on c9. I've just installed Rails and mysql, and when I try to run the rails server (<code>rails s -b $IP -p $PORT</code>), it produces errors when I go to <a href=\"https://my_rails_app-username.c9users.io/\" rel=\"nofollow\">https://my_rails_app-username.c9users.io/</a>:</p>\n\n<pre><code>Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 4309756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-BJfAsBF1WbQ/AAAAAAAAAAI/AAAAAAAAASQ/nnuRxKvHaxs/photo.jpg?sz=128", "display_name": "kodabear", "link": "https://stackoverflow.com/users/4309756/kodabear"}, "edited": false, "score": 1, "creation_date": 1452114457, "post_id": 34642484, "comment_id": 57031457, "body": "current get code  get %r{/towns/name/(.+).(xml|json)} do |name, format|             t = Town.filter(:name =&gt; name)             if t == nil                 not_found             else                 serialize(t, format)             end         end"}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "reply_to_user": {"reputation": 340, "user_id": 4309756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-BJfAsBF1WbQ/AAAAAAAAAAI/AAAAAAAAASQ/nnuRxKvHaxs/photo.jpg?sz=128", "display_name": "kodabear", "link": "https://stackoverflow.com/users/4309756/kodabear"}, "edited": false, "score": 1, "creation_date": 1452116863, "post_id": 34642484, "comment_id": 57032743, "body": "That won&#39;t work. That route only responds when you make a get request to <code>&#47;towns&#47;name&#47;x.json</code> for example."}], "tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": true, "score": 3, "last_activity_date": 1452113349, "creation_date": 1452113349, "answer_id": 34642484, "question_id": 34641980, "link": "https://stackoverflow.com/questions/34641980/sinatra-get-http-1-1-404-error/34642484#34642484", "title": "sinatra &quot;GET / HTTP/1.1&quot; 404 error", "body": "<p>For a <code>get</code> to <code>/</code>, you need to define route</p>\n\n<pre><code>get '/' do\n  'Hello world!'\nend\n</code></pre>\n\n<p>Replace <code>hello world</code> with any code you need to run when you open page <a href=\"http://localhost:9292/\" rel=\"nofollow\">http://localhost:9292/</a></p>\n"}], "owner": {"reputation": 340, "user_id": 4309756, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-BJfAsBF1WbQ/AAAAAAAAAAI/AAAAAAAAASQ/nnuRxKvHaxs/photo.jpg?sz=128", "display_name": "kodabear", "link": "https://stackoverflow.com/users/4309756/kodabear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 1, "accepted_answer_id": 34642484, "answer_count": 1, "score": 0, "last_activity_date": 1452113349, "creation_date": 1452111500, "last_edit_date": 1452112566, "question_id": 34641980, "link": "https://stackoverflow.com/questions/34641980/sinatra-get-http-1-1-404-error", "title": "sinatra &quot;GET / HTTP/1.1&quot; 404 error", "body": "<p>I am trying to run an sinatra app. But the only page I am getting is \"This is not the page you're looking for.\" Maybe I am not doing the URL right. Any help would be great.</p>\n\n<p><a href=\"http://localhost:9292/\" rel=\"nofollow\">http://localhost:9292/</a></p>\n\n<p><strong>service.rb file</strong></p>\n\n<pre><code>  public\n    helpers do\n        def serialize(data, format)\n            if format.upcase == \"XML\"\n                classname = data.class.name.split('::').last.downcase\n                if classname.upcase == \"ARRAY\"\n                    classname = data.first.class.name.split('::').last.downcase\n                    data.to_xml(:root_name =&gt; classname, :array_root_name =&gt; classname + \"s\")\n                else\n                    data.to_xml(:root_name =&gt; classname)\n                end\n            elsif format.upcase == \"JSON\"\n                data.to_json\n            else\n                classname = data.class.name.split('::').last.downcase\n            end\n        end\n    end\n</code></pre>\n\n<p><strong>Config.ru file</strong></p>\n\n<pre><code>require 'rubygems'\nrequire 'sinatra'\nrequire './service'\n   require 'pry'\n\n\n    root_dir = File.dirname(__FILE__)\n\n   set :environment, :production\n    set :root, root_dir\n    set :app_file, File.join(root_dir, './service.rb')\n\n\n      FileUtils.mkdir_p 'log' unless File.exists?('log')\n        log = File.new(\"log/sinatra.log\", \"a\")\n      $stdout.reopen(log)\n\n     DB = Sequel.connect(\n:adapter =&gt; 'mysql',\n:host =&gt; 'localhost',\n:database =&gt; 'database',\n:user =&gt; 'user',\n:password =&gt; 'password')\n   IllyriadApi::Service.setDatabase(DB)\n\n  def app\nIllyriadApi::Service\n  end\n\n  map '/' do\nrun IllyriadApi::Service\n end\n</code></pre>\n\n<p>C:\\Users\\dakota\\Desktop\\IllyriadAp>rackup config.ru</p>\n\n<p>[2016-01-06 12:06:24] INFO  WEBrick 1.3.1</p>\n\n<p>[2016-01-06 12:06:24] INFO  ruby 2.2.3 (2015-08-18) [i386-mingw32]</p>\n\n<p>[2016-01-06 12:06:24] INFO  WEBrick::HTTPServer#start: pid=1196 port=9292</p>\n\n<p>::1 - - [06/Jan/2016:12:06:33 -0800] \"GET / HTTP/1.1\" 404 40 0.1130</p>\n\n<p><a href=\"https://github.com/kodabear4511/IllyriadApi/tree/master\" rel=\"nofollow\">Link to the full source of the code just in case</a></p>\n\n<p><strong>alliance database</strong>\n1 \"id\"  H? \"ticker\" Harmless? \"name\"    2010-02-25 \"founded_at\"  14:18:07   10 \"founded_by_player_id\"   14646 \"capital_town_id\"     43 \"member_count\"   8651950 \"total_population\" 0.000    \"tax_rate\" 2012-10-14 18:48:43 \"tax_rate_last_changed_at\"   2012-01-19 17:42:55 \"capital_town_last_moved_at\"</p>\n\n<p><strong>alliance_roles database</strong></p>\n\n<p>1 \"id\"      Founder \"name\"  1 [->]  \"alliance_id\" 1 \"hierarchy_id\"</p>\n\n<p><strong>towns database</strong>\n1 \"id\"  2016-01-05 00:03:31 \"data_timestamp\"    1 \"town_id\" Stormont \"name\" 383 \"location_x\" -1815 \"location_y\" 2010-02-21  22:08:02 \"founded_at\"   1 \"owner_id\"    12941 \"population\"  1 \"is_capital\"  1 \"is_alliance_capital\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "rvm", "root"], "comments": [{"owner": {"reputation": 13, "user_id": 5373513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4de52400dcefc35acfb0744fd76c16?s=128&d=identicon&r=PG&f=1", "display_name": "lyndonJ", "link": "https://stackoverflow.com/users/5373513/lyndonj"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1452111513, "post_id": 34641898, "comment_id": 57029858, "body": "@fedorqui Using curl and RVM"}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1452111564, "post_id": 34641898, "comment_id": 57029891, "body": "Can you specify the exact commands? Have you try with the <code>sudo apt-get...</code> I mentioned above?"}, {"owner": {"reputation": 13, "user_id": 5373513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4de52400dcefc35acfb0744fd76c16?s=128&d=identicon&r=PG&f=1", "display_name": "lyndonJ", "link": "https://stackoverflow.com/users/5373513/lyndonj"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1452111617, "post_id": 34641898, "comment_id": 57029940, "body": "@fedorqui sudo apt-get install give me an older version.  I wanted the most up to date version of Ruby and Rails hence the reason for RVM"}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1452111680, "post_id": 34641898, "comment_id": 57029978, "body": "What do you get if you say <code>which ruby</code>? Also <code>ruby --version</code> or similar to know what is the installed version, because it clearly conflicts with the one <code>rails</code> expects you to have."}, {"owner": {"reputation": 13, "user_id": 5373513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4de52400dcefc35acfb0744fd76c16?s=128&d=identicon&r=PG&f=1", "display_name": "lyndonJ", "link": "https://stackoverflow.com/users/5373513/lyndonj"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1452111691, "post_id": 34641898, "comment_id": 57029981, "body": "I already have the most up to date versions on my machine. I can only access it using root login."}, {"owner": {"reputation": 13, "user_id": 5373513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4de52400dcefc35acfb0744fd76c16?s=128&d=identicon&r=PG&f=1", "display_name": "lyndonJ", "link": "https://stackoverflow.com/users/5373513/lyndonj"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1452111849, "post_id": 34641898, "comment_id": 57030085, "body": "which ruby    /usr/local/rvm/rubies/ruby-2.3.0/bin/ruby"}, {"owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "edited": false, "score": 0, "creation_date": 1452111883, "post_id": 34641898, "comment_id": 57030105, "body": "rvm adds a line to your bashrc or profile telling the logged in envronment where to find rvm-centric packages. Should look something like this: [[ -s &quot;$HOME/.rvm/scripts/rvm&quot; ]] - but instead of home will have your root path.  Do you ahve that in your users .bash_profile?"}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "reply_to_user": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "edited": false, "score": 0, "creation_date": 1452111982, "post_id": 34641898, "comment_id": 57030163, "body": "As @trh says, try to logout and log in again after adding this line into <code>.bash_profile</code>."}, {"owner": {"reputation": 13, "user_id": 5373513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4de52400dcefc35acfb0744fd76c16?s=128&d=identicon&r=PG&f=1", "display_name": "lyndonJ", "link": "https://stackoverflow.com/users/5373513/lyndonj"}, "edited": false, "score": 0, "creation_date": 1452112122, "post_id": 34641898, "comment_id": 57030234, "body": "<code>ruby --version ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux] </code>"}, {"owner": {"reputation": 13, "user_id": 5373513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4de52400dcefc35acfb0744fd76c16?s=128&d=identicon&r=PG&f=1", "display_name": "lyndonJ", "link": "https://stackoverflow.com/users/5373513/lyndonj"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1452115533, "post_id": 34641898, "comment_id": 57032035, "body": "@fedorqui @trh sorry, couldn&#39;t work out how to edit <code>.bash_profile</code> Found it easier to reinstall. Thanks much"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5373513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4de52400dcefc35acfb0744fd76c16?s=128&d=identicon&r=PG&f=1", "display_name": "lyndonJ", "link": "https://stackoverflow.com/users/5373513/lyndonj"}, "edited": false, "score": 0, "creation_date": 1452114849, "post_id": 34642533, "comment_id": 57031660, "body": "Thanks @neallred Re-installed as normal user"}], "tags": [], "owner": {"reputation": 618, "user_id": 5753978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z0bHl.jpg?s=128&g=1", "display_name": "neallred", "link": "https://stackoverflow.com/users/5753978/neallred"}, "is_accepted": true, "score": 1, "last_activity_date": 1452113555, "last_edit_date": 1492086165, "creation_date": 1452113555, "answer_id": 34642533, "question_id": 34641898, "link": "https://stackoverflow.com/questions/34641898/linux-running-root-installed-program-as-non-root/34642533#34642533", "title": "Linux - running root installed program as non-root", "body": "<p>Is there a reason you especially need a work-around? If not, it would probably be easiest to re-install using sudo. The reason is that when logged in as root, programs install only for root user. When using sudo, they install for all users.</p>\n\n<p>To avoid using apt-get, you could try using <code>sudo curl</code></p>\n\n<p>See here for more information:\n<a href=\"https://askubuntu.com/questions/258057/installed-application-as-root-unable-to-use-by-other-user\">https://askubuntu.com/questions/258057/installed-application-as-root-unable-to-use-by-other-user</a></p>\n"}], "owner": {"reputation": 13, "user_id": 5373513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4de52400dcefc35acfb0744fd76c16?s=128&d=identicon&r=PG&f=1", "display_name": "lyndonJ", "link": "https://stackoverflow.com/users/5373513/lyndonj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 793, "favorite_count": 0, "accepted_answer_id": 34642533, "answer_count": 1, "score": 1, "last_activity_date": 1452113555, "creation_date": 1452111194, "question_id": 34641898, "link": "https://stackoverflow.com/questions/34641898/linux-running-root-installed-program-as-non-root", "title": "Linux - running root installed program as non-root", "body": "<p>I installed RVM, then Ruby 2.3.0 and Rails 4.2.5 as super-user. I can access the program as root but not as a normal user.</p>\n\n<pre><code># rails -v \nRails 4.2.5\n\n$ rails -v\n/usr/bin/env: ruby1.9.1: No such file or directory\n</code></pre>\n\n<p>Would I need to delete and reinstall the program or is there a workaround?  Sorry this is a newbie question I know but I'm lost.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 1126, "user_id": 2847322, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PFcQc.jpg?s=128&g=1", "display_name": "Carlos Morales", "link": "https://stackoverflow.com/users/2847322/carlos-morales"}, "edited": false, "score": 0, "creation_date": 1452111459, "post_id": 34641852, "comment_id": 57029826, "body": "I assume rest of the code will remain same, I just suggested change to iterator part"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 1126, "user_id": 2847322, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PFcQc.jpg?s=128&g=1", "display_name": "Carlos Morales", "link": "https://stackoverflow.com/users/2847322/carlos-morales"}, "edited": false, "score": 0, "creation_date": 1452111977, "post_id": 34641852, "comment_id": 57030160, "body": "Even without using <code>all</code>, it should have worked.  I have tried locally in rails console - <code>customer.contacts</code> will give you all contacts of a customer.  Using <code>all</code> makes a DB query - which may not be needed."}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 1, "last_activity_date": 1452111562, "last_edit_date": 1452111562, "creation_date": 1452111003, "answer_id": 34641852, "question_id": 34641755, "link": "https://stackoverflow.com/questions/34641755/how-can-show-value-through-association/34641852#34641852", "title": "How can show value through association?", "body": "<p>Something like below can work</p>\n\n<pre><code>&lt;% customer.contacts.all {|c| c.phone.present?}.each do |contact| %&gt;\n</code></pre>\n\n<p>Full snippet    </p>\n\n<pre><code>&lt;% @customers.each do |customer| %&gt;\n  &lt;%= customer.name %&gt;\n  &lt;% customer.contacts.all {|c| c.phone.present?}.each do |contact| %&gt;\n    &lt;%= contact.name %&gt;\n    &lt;%= contact.phone %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1126, "user_id": 2847322, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PFcQc.jpg?s=128&g=1", "display_name": "Carlos Morales", "link": "https://stackoverflow.com/users/2847322/carlos-morales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 1, "accepted_answer_id": 34641852, "answer_count": 1, "score": 0, "last_activity_date": 1452111562, "creation_date": 1452110603, "question_id": 34641755, "link": "https://stackoverflow.com/questions/34641755/how-can-show-value-through-association", "title": "How can show value through association?", "body": "<p>I'm trying to show a phone number when customer contact has it</p>\n\n<p>Table:</p>\n\n<pre><code>|customers|\n  |id|  |name|\n   1    Zidane\n   2    Mourinho\n   3    Guardiola\n   4    Ferguson\n\n|contacts|\n  |id|  |customer_id| |name|          |phone|\n    1         1        Muller    \n    2         1        Alaba          9872147  \n    3         2        Aubameyang     2323234\n    4         3        Dante   \n    5         3        Robben    \n    6         3        Lewandoski     2343256\n    7         4        Ribery \n</code></pre>\n\n<p>Controller: </p>\n\n<pre><code>def index\n  @customers = Customer.all\nend\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class Customer &lt; ActiveRecord::Base\n  has_many :contacts\nend\n\nclass Contact &lt; ActiveRecord::Base\n  belongs_to :customer\nend\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;% @customers.each do |customer| %&gt;\n  &lt;%= customer.name %&gt;\n  &lt;% customer.contacts(:conditions=&gt;['phone&gt;0']).each do |contact| %&gt;\n    &lt;%= contact.name %&gt;\n    &lt;%= contact.phone %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Also tried:</p>\n\n<pre><code>&lt;% @customers.each do |customer| %&gt;\n  &lt;%= customer.name %&gt;\n  &lt;% customer.contacts.each do |contact| %&gt;\n    &lt;%= contact.name %&gt;\n    &lt;%= contact.phone(:all,:conditions=&gt;['phone&gt;0']). %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Also tried but is only getting the first contact:</p>\n\n<pre><code>&lt;%= customer.contacts.first(1).map { |c| c.phone } %&gt;\n</code></pre>\n\n<p>Also tried but is only getting the last contact:</p>\n\n<pre><code>&lt;%= customer.contacts.last(1).map { |c| c.phone } %&gt;\n</code></pre>\n\n<p>I want this as result:</p>\n\n<pre><code>|customer|  |name_contact| |phone|\nZidane        Alaba         9872147\nCR7           Aubameyang    2323234\nGuardiola     Lewandoski    2343256\nFerguson      Ribery\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "sqlite", "gemfile"], "comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 1, "creation_date": 1452105984, "post_id": 34640431, "comment_id": 57026337, "body": "You can&#39;t use SQLite on Heroku. See <a href=\"https://simonecarletti.com/blog/2016/01/post-heroku-sqlite/\" rel=\"nofollow noreferrer\">simonecarletti.com/blog/2016/01/post-heroku-sqlite</a> <a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails4#write-your-app\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/&hellip;</a> <a href=\"http://stackoverflow.com/a/3897593/123527\">stackoverflow.com/a/3897593/123527</a>"}], "answers": [{"tags": [], "owner": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "is_accepted": false, "score": 0, "last_activity_date": 1452112549, "creation_date": 1452112549, "answer_id": 34642285, "question_id": 34640431, "link": "https://stackoverflow.com/questions/34640431/heroku-gemfile-error-when-trying-to-open-and-edit-my-site-locally/34642285#34642285", "title": "Heroku gemfile error when trying to open and edit my site locally", "body": "<p>Switch to Postgresql. SQLite is not supported. </p>\n"}, {"tags": [], "owner": {"reputation": 677, "user_id": 2388312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a807505b345882a16108f736f669cf9a?s=128&d=identicon&r=PG", "display_name": "Farrukh Abdulkadyrov", "link": "https://stackoverflow.com/users/2388312/farrukh-abdulkadyrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1452116234, "creation_date": 1452116234, "answer_id": 34643271, "question_id": 34640431, "link": "https://stackoverflow.com/questions/34640431/heroku-gemfile-error-when-trying-to-open-and-edit-my-site-locally/34643271#34643271", "title": "Heroku gemfile error when trying to open and edit my site locally", "body": "<p>Try running <code>bundle install</code> locally and then push to Heroku</p>\n"}], "owner": {"reputation": 1, "user_id": 5753830, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206236057005104/picture?type=large", "display_name": "Annie Aitken", "link": "https://stackoverflow.com/users/5753830/annie-aitken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452116234, "creation_date": 1452105824, "last_edit_date": 1452108033, "question_id": 34640431, "link": "https://stackoverflow.com/questions/34640431/heroku-gemfile-error-when-trying-to-open-and-edit-my-site-locally", "title": "Heroku gemfile error when trying to open and edit my site locally", "body": "<p>I am building a site using Heroku using a tutorial in my online class. I keep getting this error when attempting to open it locally:</p>\n\n<pre><code>Specified 'sqlite3' for database adapter, but the gem is not loaded. Add `gem 'sqlite3'` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord).\n</code></pre>\n\n<p>Here is my gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.5'\n# Use sqlite3 as the database for Active Record\n# gem 'sqlite3'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\n\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n  gem 'sqlite3'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n\ngroup :production do\n    gem 'rails_12factor'\n    gem 'pg'\nend\n</code></pre>\n\n<p>This is the full gem::LoadError:</p>\n\n<pre><code>require path_to_adapter\nrescue Gem::LoadError =&gt; e\nraise Gem::LoadError, \"Specified '#{spec[:adapter]}' for database adapter, but the gem is not loaded. Add `gem '#{e.name}'` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord).\"\nrescue LoadError =&gt; e\nraise LoadError, \"Could not load '#{path_to_adapter}'. Make sure that the adapter in config/database.yml is valid. If you use an adapter other than 'mysql', 'mysql2', 'postgresql' or 'sqlite3' add the necessary adapter gem to the Gemfile.\", e.backtrace\n          end\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1452105903, "post_id": 34640418, "comment_id": 57026273, "body": "I have provided a block, it still returns an enumerator"}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452106689, "post_id": 34640418, "comment_id": 57026790, "body": "Then it probably wasn&#39;t the select method? But rather had to do with the p method?"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452106803, "post_id": 34640418, "comment_id": 57026848, "body": "It seems like that from other answer"}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": 0, "last_activity_date": 1452105792, "last_edit_date": 1592644375, "creation_date": 1452105792, "answer_id": 34640418, "question_id": 34640365, "link": "https://stackoverflow.com/questions/34640365/different-behavior-with-map-select-etc-when-using-do-end-blocks/34640418#34640418", "title": "Different behavior with map, select, etc. when using do...end blocks", "body": "<p>According to the official documentation website</p>\n<blockquote>\n<p>Returns a new hash consisting of entries for which the block returns true.</p>\n<p>If no block is given, an enumerator is returned instead.</p>\n</blockquote>\n<p>Here is the code of the method in C</p>\n<pre><code>rb_hash_select(VALUE hash)\n{\n    VALUE result;\n\n    RETURN_SIZED_ENUMERATOR(hash, 0, 0, hash_enum_size);\n    result = rb_hash_new();\n    if (!RHASH_EMPTY_P(hash)) {\n        rb_hash_foreach(hash, select_i, result);\n    }\n    return result;\n}\n</code></pre>\n<p><a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-select\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.3.0/Hash.html#method-i-select</a></p>\n"}, {"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452106024, "post_id": 34640423, "comment_id": 57026365, "body": "Whats the way out, I need to put  parenthesis around it to resolve the precedence."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452106095, "post_id": 34640423, "comment_id": 57026411, "body": "It is completely up to you. And, yes, parenthesis will work."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452107059, "post_id": 34640423, "comment_id": 57026992, "body": "It may not be operator precedence, may be how parameters to function call are interpreted.  Is it more likely that evaluation happened as <code>p(h.inspect) do..end</code>  instead of <code>(p h.select) do ...end</code>?"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1452106042, "last_edit_date": 1452106042, "creation_date": 1452105806, "answer_id": 34640423, "question_id": 34640365, "link": "https://stackoverflow.com/questions/34640365/different-behavior-with-map-select-etc-when-using-do-end-blocks/34640423#34640423", "title": "Different behavior with map, select, etc. when using do...end blocks", "body": "<p>Operator precedence matters.</p>\n\n<pre><code>p h.select do |k, v| true end\n</code></pre>\n\n<p>is in fact executed as:</p>\n\n<pre><code>(p h.select) do |k, v| true end\n</code></pre>\n\n<p>while </p>\n\n<pre><code>p h.select { |k, v| true }\n</code></pre>\n\n<p>is treated as:</p>\n\n<pre><code>p (h.select { |k, v| true })\n</code></pre>\n\n<p><code>Enumerable#select</code>, called without a block, returns an enumerator.</p>\n"}, {"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452107539, "post_id": 34640846, "comment_id": 57027306, "body": "Any idea why would <code>do...end</code> and <code>{...}</code> both are not treated as blocks to <code>p</code> as shown in first case of your answer"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452107914, "post_id": 34640846, "comment_id": 57027551, "body": "Don&#39;t worry,  I got answer about it from another <a href=\"http://stackoverflow.com/questions/5587264/do-end-vs-curly-braces-for-blocks-in-ruby\">SO thread</a>."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1452108135, "post_id": 34640846, "comment_id": 57027687, "body": "I can&#39;t explain it except to say that it&#39;s how the parser works. There may be some technical reason, but I suspect it was simply a design choice. There&#39;s a good use case for each style, but it&#39;s unfortunate that it catches people off guard sometimes."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 2, "last_activity_date": 1452107398, "creation_date": 1452107398, "answer_id": 34640846, "question_id": 34640365, "link": "https://stackoverflow.com/questions/34640365/different-behavior-with-map-select-etc-when-using-do-end-blocks/34640846#34640846", "title": "Different behavior with map, select, etc. when using do...end blocks", "body": "<p>I think @mudasobwa's answer is essentially correct, but I wanted to clarify what's actually happening with regard to precedence.</p>\n\n<p>When you do this:</p>\n\n<pre><code>p h.select do |k, v| \n  true \nend\n</code></pre>\n\n<p>...you're actually doing this:</p>\n\n<pre><code>p(h.select) do |k, v| \n  true \nend\n</code></pre>\n\n<p>In other words, you're passing the result of <code>h.select</code> (with no arguments, which returns an Enumerator) as an argument to <code>p</code> and you're also passing a block argument to <code>p</code>. <code>p</code> apparently silently ignores the block argument.</p>\n\n<p>Conversely, when you do this:</p>\n\n<pre><code>p h.select {|k, v| true }\n</code></pre>\n\n<p>...you're actually doing this:</p>\n\n<pre><code>p(h.select {|k, v| true })\n</code></pre>\n\n<p>That is, you're passing the result of <code>h.select { |k, v| true }</code> to <code>p</code>, which gives you the result you expect.</p>\n\n<p>If you want to use the <code>do...end</code> syntax and get the result you want, you have to wrap the whole thing in parentheses:</p>\n\n<pre><code>p(h.select do |k, v| \n  true \nend)\n</code></pre>\n\n<p>It's not pretty, but it works.</p>\n"}], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "closed_date": 1452107776, "accepted_answer_id": 34640423, "answer_count": 3, "score": 3, "last_activity_date": 1452107398, "creation_date": 1452105647, "question_id": 34640365, "link": "https://stackoverflow.com/questions/34640365/different-behavior-with-map-select-etc-when-using-do-end-blocks", "closed_reason": "Duplicate", "title": "Different behavior with map, select, etc. when using do...end blocks", "body": "<p>I noticed following difference in behavior when I use <code>map</code>, <code>select</code>, and other <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html\" rel=\"nofollow\"><code>Enumerable</code></a> methods.</p>\n\n<p>Let's assume we have a hash like below:</p>\n\n<pre><code>h = {a: 1}\n</code></pre>\n\n<p>Below code prints the output of <code>select</code> as expected.</p>\n\n<pre><code>p h.select { |k, v| true }\n#=&gt; {:a=&gt;1}\n</code></pre>\n\n<p>However, below code shows that output is an <code>Enumerator</code>, even when a block has been provided.</p>\n\n<pre><code>p h.select do |k, v| \n  true \nend\n#=&gt; #&lt;Enumerator: {:a=&gt;1}:select&gt;\n</code></pre>\n\n<p>Any idea why this difference of behavior?  I run into this issue often as I keep using inspect <code>p</code> while working, and this behavior derails my thought process quite often.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "comments": [{"owner": {"reputation": 1242, "user_id": 3252252, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/4V81y.jpg?s=128&g=1", "display_name": "Jesuspc", "link": "https://stackoverflow.com/users/3252252/jesuspc"}, "edited": false, "score": 2, "creation_date": 1452111110, "post_id": 34640341, "comment_id": 57029602, "body": "By the way, your self.process method from the third option may be more idiomatic if instead of Post.all your simply use all. Post.all is confusing because it looks like you are querying all the posts (global scope) when in fact what is happening is that it queries for all elements in the given scope."}, {"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "reply_to_user": {"reputation": 1242, "user_id": 3252252, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/4V81y.jpg?s=128&g=1", "display_name": "Jesuspc", "link": "https://stackoverflow.com/users/3252252/jesuspc"}, "edited": false, "score": 0, "creation_date": 1452112570, "post_id": 34640341, "comment_id": 57030484, "body": "@Jesuspc, good point. I&#39;ve added the note in the question."}], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "edited": false, "score": 0, "creation_date": 1452108849, "post_id": 34641212, "comment_id": 57028142, "body": "As the user of the &#39;language&#39;, you don&#39;t have to deal with the complexities of Method 3. Under the hood, there are many complex things going on in the code that you posted. So far as you are dealing with abstractions, and you have a clean interface to work with, the underlying framework complexities should not be a deterrent in your decision to use one technique over the other. The things that I (had to) explain have been implemented in the framework just so that we can use the niceties it brings to us as Rails programmers."}, {"owner": {"reputation": 994, "user_id": 4084391, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6mN6X.png?s=128&g=1", "display_name": "Daniel Batalla", "link": "https://stackoverflow.com/users/4084391/daniel-batalla"}, "reply_to_user": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "edited": false, "score": 0, "creation_date": 1452110140, "post_id": 34641212, "comment_id": 57028978, "body": "@NayaBonbo In my (humble) point of view, the underlying framework complexities SHOULD be a deterrent in your decision. I write code so that other developers can read and familiarize quickly. Using niceties in my code does not help matters."}, {"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "edited": false, "score": 0, "creation_date": 1452111629, "post_id": 34641212, "comment_id": 57029949, "body": "But doesn&#39;t that mean one can&#39;t use advanced framework or language features just because it makes the code difficult to understand for other developers who don&#39;t know the language as much as you do? I get what you are trying to say though. I guess moderation is the key and probably one shouldn&#39;t use arcane features which are beyond the understanding of 90% developers."}], "tags": [], "owner": {"reputation": 994, "user_id": 4084391, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6mN6X.png?s=128&g=1", "display_name": "Daniel Batalla", "link": "https://stackoverflow.com/users/4084391/daniel-batalla"}, "is_accepted": false, "score": 1, "last_activity_date": 1452108514, "creation_date": 1452108514, "answer_id": 34641212, "question_id": 34640341, "link": "https://stackoverflow.com/questions/34640341/best-code-structure-for-rails-associations/34641212#34641212", "title": "Best code structure for Rails associations", "body": "<p>Personally, I think that <strong>Method 1</strong> is the cleanest one. It will be very clean and understandable write something like this:</p>\n\n<pre><code>Class User &lt; ActiveRecord::Base\n  has_many :posts\n\n  def process_posts\n    posts.each do |post|\n     post.process\n    end\n  end\nend\n</code></pre>\n\n<p>And put all the logic of <code>process</code> method in <code>Post</code> model (with an instance variable):</p>\n\n<pre><code>Class Post &lt; ActiveRecord::Base\n  belongs_to :user\n\n  def process\n     # Logic of your Post process\n  end\nend\n</code></pre>\n\n<p>That way, the very logic of a <code>Post</code> process belong to <code>Post</code> class. Even if your <code>User</code> model will have many \"process\" functions, these will be very basic and small. That seems very clean to me, as a developer.</p>\n\n<p><strong>Method 3</strong> has many technical implications that are pretty complex and unintuitive (yourself had to clarify your question).</p>\n\n<p>NOTE: If you want better performance, maybe you should use <code>eager loading</code> to reduce <code>ActiveRecord</code> calls, but that is out of the scope of this question.</p>\n"}, {"comments": [{"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "edited": false, "score": 0, "creation_date": 1452109660, "post_id": 34641265, "comment_id": 57028684, "body": "+1 Thanks for your overview. I sure got illuminated today with the <i>Single responsibility principle</i> and the <i>lay of demeter</i> ;) Your answer jives well with what Jordan wrote. A separate class makes sense depending on the business logic of what the <code>process</code> method does."}], "tags": [], "owner": {"reputation": 1242, "user_id": 3252252, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/4V81y.jpg?s=128&g=1", "display_name": "Jesuspc", "link": "https://stackoverflow.com/users/3252252/jesuspc"}, "is_accepted": false, "score": 0, "last_activity_date": 1452110851, "last_edit_date": 1452110851, "creation_date": 1452108726, "answer_id": 34641265, "question_id": 34640341, "link": "https://stackoverflow.com/questions/34640341/best-code-structure-for-rails-associations/34641265#34641265", "title": "Best code structure for Rails associations", "body": "<p>First of all excuse me for the opinionated answer.</p>\n\n<p>ActiveRecord models are a controversial matter. Its essence is against the <em>Single responsibility principle</em> since they handle both database interaction via class methods and domain objects (which use to implement their own behaviour) via its instances. At the same time they also break the <em>Liskov Substitution Principle</em> because the models are not sub cases of ActiveRecord::Base and implement their own set of methods. And finally the ActiveRecord paradigm often leads to code that breaks the <em>Law of Demeter</em>, as in your proposal for the third method:</p>\n\n<pre><code>User.find(1).posts.process\n</code></pre>\n\n<p>Thus, there is a trend that in order to reduce coupling would recommend to use ActiveRecord objects only to interact with the database and therefore no behaviour should be added to them (in your case the <strong>process</strong> method). Under my point of view that is the lesser evil, even though it is still not a perfect solution. </p>\n\n<p>So if I were to implement what you describe I would have a ProcessablePostsCollection object (where the name Processable can be customised to better describe what the processing is about, or even neglected completely so you would simple have a PostsCollection class) that would probably be a wrapper over a list of posts using SimpleDelegator and would have a method <strong>process</strong>.</p>\n\n<pre><code>class ProcessablePostsCollection &lt; SimpleDelegator\n  def self.from_collection(collection)\n    new collection\n  end\n\n  def initialize(source)\n    super source\n  end\n\n  def process\n    # code of whatever 'process' does to posts\n  end\nend\n</code></pre>\n\n<p>And the usage would be something like:</p>\n\n<pre><code>ProcessablePostsCollection.from_collection(User.find(1).posts).process\n</code></pre>\n\n<p>even though the <strong>from_collection</strong> and the call to <strong>process</strong> should happen in different clases.</p>\n\n<p>Also, in case you have a big posts table it would probably be wise to process stuff in batches. For that your <strong>process</strong> method could call <strong>find_in_batches</strong> on your posts ActiveRecord::Relation.</p>\n\n<p>But as always it depends on your needs. If you are simply building a prototype is perfectly fine to let your models grow fat, and if you are building an enormous application Rails itself is probably not going to be the best choice since discourages some OOP best practises with things such as ActiveRecord models. </p>\n"}, {"comments": [{"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "edited": false, "score": 0, "creation_date": 1452109075, "post_id": 34641320, "comment_id": 57028284, "body": "+1 I agree. I mentioned <code>(very light and quick) processing</code> in the question to indicate that maybe the few lines of code might not warrant a new class altogether. Nevertheless, good that you pointed out the Fourth method."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1452109092, "last_edit_date": 1452109092, "creation_date": 1452108928, "answer_id": 34641320, "question_id": 34640341, "link": "https://stackoverflow.com/questions/34640341/best-code-structure-for-rails-associations/34641320#34641320", "title": "Best code structure for Rails associations", "body": "<p>There's a fourth option. Move this logic out of the model entirely:</p>\n\n<pre><code>class PostProcessor\n  def initialize(posts)\n    @posts = posts\n  end\n\n  def process\n    @posts.each do |post|\n      # ...\n    end\n  end\nend\n\nPostProcessor.new(User.find(1).posts).process\n</code></pre>\n\n<p>This is sometimes called the Service Object pattern. A very nice bonus of this approach is that it makes writing tests for this logic really simple. Here's a great blog post on this and other ways to refactor \"fat\" models: <a href=\"http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/\" rel=\"nofollow\">http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/</a></p>\n"}, {"comments": [{"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "edited": false, "score": 0, "creation_date": 1452187433, "post_id": 34644430, "comment_id": 57068158, "body": "+1 This is the &#39;Rails way&#39; of extending the functionality of the association. Thanks for showing the exact code to do it. This will be helpful for people who want stick to the prescribed way for doing such a thing in Rails. My concern in using extensions is that the user class will get cluttered with the logic of various disparate classes (in case we need to have extensions for many associated classes). For a one off extension which has a few lines of implementation, this totally works. Interestingly the calling syntax in this method is same as what I have in Method 3 - <code>@user.posts.process</code>."}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 1, "last_activity_date": 1452120946, "creation_date": 1452120946, "answer_id": 34644430, "question_id": 34640341, "link": "https://stackoverflow.com/questions/34640341/best-code-structure-for-rails-associations/34644430#34644430", "title": "Best code structure for Rails associations", "body": "<p>You shouldn't be putting this in the <code>User</code> model - put it in <code>Post</code> (unless - of course - the scope of <code>process</code> involves the <code>User</code> model directly) :</p>\n\n<pre><code>#app/models/post.rb\nclass Post &lt; ActiveRecord::Base\n    def process\n       return false if post.published?\n       # do something\n    end\nend\n</code></pre>\n\n<p>Then you can use an ActiveRecord Association Extension to add the functionality to the <code>User</code> model:</p>\n\n<pre><code>#app/models/user.rb\nclass User &lt; ActiveRecord::Base\n   has_many :posts do\n      def process\n          proxy_association.target.each do |post|\n             post.process\n          end\n      end\n   end\nend\n</code></pre>\n\n<p>This will allow you to call...</p>\n\n<pre><code>@user = User.find 1\n@user.posts.process\n</code></pre>\n"}], "owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 1, "accepted_answer_id": 34641320, "answer_count": 4, "score": 4, "last_activity_date": 1452120946, "creation_date": 1452105525, "last_edit_date": 1495540354, "question_id": 34640341, "link": "https://stackoverflow.com/questions/34640341/best-code-structure-for-rails-associations", "title": "Best code structure for Rails associations", "body": "<h3>The Stage</h3>\n\n<p>Lets talk about the most common type of association we encounter.</p>\n\n<p>I have a User which <code>:has_many</code> Post(s)</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :posts\nend\n\nclass Post &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<h3>Problem Statement</h3>\n\n<p>I want to do some (very light and quick) processing on all the posts of a user. I am looking for the best way to structure my code to achieve it. Below are a couple of ways and why they work or don't work.</p>\n\n<h3>Method 1</h3>\n\n<p>Do it in the <code>User</code> class itself.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :posts\n\n  def process_posts\n    posts.each do |post|\n      # code of whatever 'process' does to posts of this user\n    end\n  end\nend\n</code></pre>\n\n<p>Post class remains the same:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p>The method is called as:</p>\n\n<pre><code>User.find(1).process_posts\n</code></pre>\n\n<p><strong>Why doesn't this look the best way to do it</strong></p>\n\n<p>The logic of doing something with the posts of the user should really belong to the Post class. In a real world scenario, a user might also have <code>:has_many</code> relations with a lot of other classes e.g. <code>orders</code>, <code>comments</code>, <code>children</code> etc. </p>\n\n<p>If we start adding similar <code>process_orders</code>, <code>process_comments</code>, <code>process_children</code> (yikes) methods to the User class, it'll result in one giant file with lots of code much of which could (and should) be distributed to where it belongs i.e. the target associations.</p>\n\n<h3>Method 2</h3>\n\n<p>Proxy Associations and Scopes</p>\n\n<p>Both of these constructs require addition of methods/code to the User class which again makes it bloated. I'd rather have <strong>all</strong> implementation shifted to the target classes.</p>\n\n<h3>Method 3</h3>\n\n<p>Class Method on target Class</p>\n\n<p>Create class methods in the target class and call those methods on the User object.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :comments\n  # all target specific code in target classes\nend\n\nclass Post &lt; ActiveRecord::Base\n  belongs_to :user\n\n  # Class method\n  def self.process\n    Post.all.each do |post|  # see Note 2 below\n      # code of whatever 'process' does to posts of this user\n    end\n  end\nend\n</code></pre>\n\n<p>The method is called as:</p>\n\n<pre><code>User.find(1).posts.process   # See Note 1 below\n</code></pre>\n\n<p>Now, this looks and feels better than Method 1 and 2 because:</p>\n\n<ul>\n<li>User model remains clutter free.</li>\n<li>The process function is called <code>process</code> instead of <code>process_posts</code>. Now we can have a <code>process</code> for other classes as well and invoke them as: <code>User.find(1).orders.process</code> etc. instead of <code>User.find(1).process_orders</code> (Method 1).</li>\n</ul>\n\n<p><strong>Note 1:</strong></p>\n\n<p>Yes you can call a class method like this on a association. <a href=\"https://stackoverflow.com/questions/21681107/how-activerecordrelation-object-can-call-class-methods\">Read why here</a>. TL;DR is that <code>User.find(1).posts</code> returns a CollectionProxy object which has access to class methods of the target (Post) class. It also conveniently passes a <code>scope_attributes</code> which stores the user_id of the user which called <code>posts.process</code>. This comes handy. See Note 2 below.</p>\n\n<p><strong>Note 2:</strong></p>\n\n<p>For people not sure whats going on when we do a <code>Post.all.each</code> in the class method, it returns all the posts of the <strong>user this method was called on</strong> as against all the posts in the database.</p>\n\n<p>So when called as <code>User.find(99).posts.process</code>, <code>Post.all</code> executes: </p>\n\n<pre><code>SELECT \"notes\".* FROM \"posts\" WHERE \"posts\".\"user_id\" = $1  [[\"user_id\", 99]]\n</code></pre>\n\n<p>which are all the posts for User ID: 99.</p>\n\n<p>Per @Jesuspc's comment below, <code>Post.all.each</code> can be succinctly written as <code>all.each</code>. Its more idiomatic and doesn't make it look like we are querying all posts in the database.</p>\n\n<h3>The Answer I am looking for</h3>\n\n<ul>\n<li>Explains what is the best way to handle such associations. How do people do it normally? and if there are any obvious design flaws in Method 3.</li>\n</ul>\n"}, {"tags": ["ruby", "vagrant", "vagrantfile"], "comments": [{"owner": {"reputation": 1862, "user_id": 5721508, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K96d4k4SZro/AAAAAAAAAAI/AAAAAAAAAhE/mzgiGnLhPSU/photo.jpg?sz=128", "display_name": "Patrick Lee", "link": "https://stackoverflow.com/users/5721508/patrick-lee"}, "edited": false, "score": 0, "creation_date": 1452105362, "post_id": 34640195, "comment_id": 57025938, "body": "So you want to get the Vagrant version programmatically from the host or the guest? And which OS are you using? If this is possible, it may be OS-specific. Your question is tagged as <code>ruby</code>, so does that mean you want to use the Vagrant version in a Ruby script?"}, {"owner": {"reputation": 63, "user_id": 2835777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1c13eec602fe8c40b7df16bd3f447205?s=128&d=identicon&r=PG&f=1", "display_name": "David English", "link": "https://stackoverflow.com/users/2835777/david-english"}, "reply_to_user": {"reputation": 1862, "user_id": 5721508, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K96d4k4SZro/AAAAAAAAAAI/AAAAAAAAAhE/mzgiGnLhPSU/photo.jpg?sz=128", "display_name": "Patrick Lee", "link": "https://stackoverflow.com/users/5721508/patrick-lee"}, "edited": false, "score": 0, "creation_date": 1452105564, "post_id": 34640195, "comment_id": 57026069, "body": "It would be for both Ubuntu and Mac OS and yes, the goal is to use the vagrant version in a Ruby script."}, {"owner": {"reputation": 1862, "user_id": 5721508, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K96d4k4SZro/AAAAAAAAAAI/AAAAAAAAAhE/mzgiGnLhPSU/photo.jpg?sz=128", "display_name": "Patrick Lee", "link": "https://stackoverflow.com/users/5721508/patrick-lee"}, "edited": false, "score": 0, "creation_date": 1452106103, "post_id": 34640195, "comment_id": 57026417, "body": "OK, this is a really interesting use case. My Ruby experience is pretty limited, but I&#39;ll keep an eye on this because I&#39;m curious to know if there&#39;s an answer."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1452108377, "post_id": 34640195, "comment_id": 57027821, "body": "Welcome to Stack Overflow. When asking a question like this, we expect you to show us your effort: Where you searched and why those didn&#39;t answer the question. Or, show us your code written to solve this. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, and <a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 3, "last_activity_date": 1452107476, "creation_date": 1452107476, "answer_id": 34640874, "question_id": 34640195, "link": "https://stackoverflow.com/questions/34640195/programmatically-get-the-version-of-vagrant/34640874#34640874", "title": "Programmatically get the version of Vagrant", "body": "<p>As Vagrant is no longer served as RubyGem now (from v1.1), you'll need a new gem called <code>vagrant-wrapper</code>.\nIt's a Ruby wrapper around New Vagrant installations. You can control vagrant with it from Ruby.</p>\n\n<p>For version this:</p>\n\n<pre><code>require 'vagrant-wrapper'\nVagrantWrapper.new.vagrant_version\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 2835777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1c13eec602fe8c40b7df16bd3f447205?s=128&d=identicon&r=PG&f=1", "display_name": "David English", "link": "https://stackoverflow.com/users/2835777/david-english"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 34640874, "answer_count": 1, "score": 2, "last_activity_date": 1452107476, "creation_date": 1452105028, "last_edit_date": 1452105971, "question_id": 34640195, "link": "https://stackoverflow.com/questions/34640195/programmatically-get-the-version-of-vagrant", "title": "Programmatically get the version of Vagrant", "body": "<p>Is there a programmatic way to get the version of the locally installed Vagrant without using the terminal commands? (ie. Not parsing the answer from the output of <code>`vagrant -v`</code>)</p>\n"}, {"tags": ["ruby", "linux", "libgosu"], "comments": [{"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 1, "creation_date": 1452104539, "post_id": 34639903, "comment_id": 57025423, "body": "please clean up your code... just add four spaces to beginning of every code line so SO can format it as code."}], "answers": [{"comments": [{"owner": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "edited": false, "score": 0, "creation_date": 1452158015, "post_id": 34639947, "comment_id": 57047477, "body": "I am running ruby command in the same directory as the image file."}], "tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1452104186, "creation_date": 1452104186, "answer_id": 34639947, "question_id": 34639903, "link": "https://stackoverflow.com/questions/34639903/usr-local-lib-ruby-gems-2-2-0-gems-gosu-0-10-4-lib-gosu-patches-rb37in-initi/34639947#34639947", "title": "/usr/local/lib/ruby/gems/2.2.0/gems/gosu-0.10.4/lib/gosu/patches.rb:37:in `initialize&#39;: Cannot open file ./media/image.jpg (RuntimeError) in gosu", "body": "<p>It can't find ./media/image.jpg   are you sure it is there, and can be opened, and is the current directory \".\" what you think it is?</p>\n"}], "owner": {"reputation": 496, "user_id": 5716507, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b1d3a546a8c1e6e1b52cd5f375474a5?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Shah", "link": "https://stackoverflow.com/users/5716507/saurabh-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1486643636, "creation_date": 1452104014, "last_edit_date": 1486643636, "question_id": 34639903, "link": "https://stackoverflow.com/questions/34639903/usr-local-lib-ruby-gems-2-2-0-gems-gosu-0-10-4-lib-gosu-patches-rb37in-initi", "title": "/usr/local/lib/ruby/gems/2.2.0/gems/gosu-0.10.4/lib/gosu/patches.rb:37:in `initialize&#39;: Cannot open file ./media/image.jpg (RuntimeError) in gosu", "body": "<p>I have this code which is not giving the desired output and shows the above error.</p>\n\n<pre><code>require  'gosu'\n\n def media_path(file)\n   File.join(File.dirname(File.dirname(\n    __FILE__)),'media', file)\n end\n\n\n#def media_path(file); File.expand_path \"media/#{file}\", File.dirname(__FILE__)\n# end\n\n\n class Explosion\n   FRAME_DELAY = 10 # ms\n   SPRITE = media_path('space.png')\n\n   def self.load_animation(window)\n     Gosu::Image.load_tiles(\n       window, SPRITE, 128, 128, false)\n   end\n\n   def initialize(animation, x, y)\n     @animation = animation\n     @x, @y = x, y\n     @current_frame = 0\n   end\n\n   def update\n     @current_frame += 1 if frame_expired?\n   end\n\n   def draw\n     return if done?\n     image = current_frame\n     image.draw(\n       @x - image.width / 2.0,\n       @y - image.height / 2.0,\n       0)\n   end\n def done?\n     @done ||= @current_frame == @animation.size\n   end\n\n   private\n\n   def current_frame\n     @animation[@current_frame % @animation.size]\n   end\n\n   def frame_expired?\n     now = Gosu.milliseconds\n     @last_frame ||= now\n     if (now - @last_frame) &gt; FRAME_DELAY\n       @last_frame = now\n     end\n   end\n end\n\n class GameWindow &lt; Gosu::Window\n   BACKGROUND = media_path('image.jpg')\n\n   def initialize(width=800, height=600, fullscreen=false)\n     super\n     self.caption = 'Hello Animation'\n     @background = Gosu::Image.new(\n       self, BACKGROUND, false)\n     @animation = Explosion.load_animation(self)\n     @explosions = []\n   end\n\n   def update\n@explosions.reject!(&amp;:done?)\n     @explosions.map(&amp;:update)\n   end\n\n   def button_down(id)\n     close if id == Gosu::KbEscape\n     if id == Gosu::MsLeft\n       @explosions.push(\n         Explosion.new(\n           @animation, mouse_x, mouse_y))\n     end\n   end\n\n   def needs_cursor?\n     true\n   end\n\n   def needs_redraw?\n     !@scene_ready || @explosions.any?\n  end\n\n   def draw\n     @scene_ready ||= true\n     @background.draw(0, 0, 0)\n     @explosions.map(&amp;:draw)\n  end\n end\n\n window = GameWindow.new\n window.show\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "erb"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1452102384, "post_id": 34639266, "comment_id": 57024188, "body": "I think it is great, particularly for building apps that work with or without js, and with a minimum of duplication. Having access to all of your objects and partials and whatnot make life much easier."}], "answers": [{"comments": [{"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 0, "creation_date": 1516723845, "post_id": 34639431, "comment_id": 83801048, "body": "Not just awkward. Dynamic JavaScript is known to be a source of security weakness."}], "tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": true, "score": 3, "last_activity_date": 1452102445, "creation_date": 1452102445, "answer_id": 34639431, "question_id": 34639266, "link": "https://stackoverflow.com/questions/34639266/why-js-erb-is-so-bad/34639431#34639431", "title": "Why JS.ERB is so bad?", "body": "<p>The worst thing about this is that javascript is supposed to be client side language and building it server side seems at least awkward.</p>\n\n<p>Apart from that, you will get a major performance hit if you are not able to precompile your assets - every request for javascript file in production server has to get through your rails application to render erb correctly. (If your .js.erb files depends on variable, request related values). If you avoid js.erb files and have .js files only, those files are completely static and can be served directly by the server without touching your application at all.</p>\n\n<p>There are naturally couple of exceptions - I personally allow myself to use erbized javascript files to avoid hardcoding urls or other application constants. For me, the rule of thumb is - if erbization doesn't stop you from precompiling and will make your code cleaner and more resilient, just go for it.</p>\n\n<p>Naturally there are some reasons not to do the above as well - in the ideal world I would love my server side application to be pure API consumed by another, pure static js application. Using erbized javascript is an extra obstacle from splitting your app in half when it grow too much.</p>\n"}, {"comments": [{"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 1, "creation_date": 1452102736, "post_id": 34639507, "comment_id": 57024400, "body": "I have to say I agree with the exception BroiSatse mentions in his answer.  We do use erb for that limited case, but really we are just extending ruby with the addition of the &lt;% ... %&gt; syntax."}], "tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1452102940, "last_edit_date": 1452102940, "creation_date": 1452102632, "answer_id": 34639507, "question_id": 34639266, "link": "https://stackoverflow.com/questions/34639266/why-js-erb-is-so-bad/34639507#34639507", "title": "Why JS.ERB is so bad?", "body": "<p><em>Warning - Highly Opinionated answer to follow.  Moderators will probably delete!</em></p>\n\n<p>I can't agree more, in fact I am a bit of a nut about this, and have been using <a href=\"http://reactrb.org\" rel=\"nofollow\">react.rb</a> to get all of our views into straight ruby, no JS, ERB, at all.</p>\n\n<p>My specific reason beyond what you mention is this:  The mental power it takes to constantly shift between different languages is huge, and largely taken for granted by developers.  We just don't notice how much energy its taking.  In otherwords we have become like frogs in the pot of water, and we keep making our programming lives more complex with all these languages and sublanguages (we were programming in 5 different languages in one site) and while you get used to it, once you stop, and stick to one language (ruby in our case) you just say whew!</p>\n\n<p>While I have no specific study to prove this, I think its just a form of multitasking which is a known evil. i.e. <a href=\"https://www.psychologytoday.com/blog/brain-wise/201209/the-true-cost-multi-tasking\" rel=\"nofollow\">https://www.psychologytoday.com/blog/brain-wise/201209/the-true-cost-multi-tasking</a></p>\n"}, {"comments": [{"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 0, "creation_date": 1452103161, "post_id": 34639571, "comment_id": 57024635, "body": "linuxdan - no that&#39;s not what happens, the overall code file is javascript but it has mixed in small bits of ruby that control the generation of the javascript.  For example you might have a ruby loop that iterates through items in the db, generating some inline json constants."}, {"owner": {"reputation": 3369, "user_id": 1541854, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2f434fccfd82712f9904d3c66bb6bf20?s=128&d=identicon&r=PG", "display_name": "linuxdan", "link": "https://stackoverflow.com/users/1541854/linuxdan"}, "reply_to_user": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 2, "creation_date": 1452103282, "post_id": 34639571, "comment_id": 57024713, "body": "That&#39;s what I call code generation."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1452107821, "post_id": 34639571, "comment_id": 57027492, "body": "&quot;Whenever someone resorts to using one (more familiar) language to generate another (less familiar) language, I would question the quality of the generated code.&quot; You mean like using an ORM to write SQL? Or say a C++ compiler to write assembler? Or maybe CoffeeScript/TypeScript to write JavaScript?"}], "tags": [], "owner": {"reputation": 3369, "user_id": 1541854, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2f434fccfd82712f9904d3c66bb6bf20?s=128&d=identicon&r=PG", "display_name": "linuxdan", "link": "https://stackoverflow.com/users/1541854/linuxdan"}, "is_accepted": false, "score": 2, "last_activity_date": 1452102855, "creation_date": 1452102855, "answer_id": 34639571, "question_id": 34639266, "link": "https://stackoverflow.com/questions/34639266/why-js-erb-is-so-bad/34639571#34639571", "title": "Why JS.ERB is so bad?", "body": "<p>js.erb is generation of javascript with ruby, right? To me this has an obvious \"code smell\", of code generation.  Whenever someone resorts to using one (more familiar) language to generate another (less familiar) language, I would question the quality of the generated code. In this case a javascript guru would probably look a the generated code and be thinking \"WTF?, why would someone do __ this way?\". There are probably going to be a lot of things that work, but are not how an experienced javascript developer would do it. This can lead to performance issues, maintainability issues, and just plain bad code. </p>\n\n<p>Just my opinion. </p>\n"}], "owner": {"reputation": 1106, "user_id": 1311732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83e0ca4e73f2305ece2c629dd4bba53f?s=128&d=identicon&r=PG", "display_name": "Franz&#233; Jr.", "link": "https://stackoverflow.com/users/1311732/franz%c3%a9-jr"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2229, "favorite_count": 1, "closed_date": 1452103597, "accepted_answer_id": 34639431, "answer_count": 3, "score": 0, "last_activity_date": 1452103933, "creation_date": 1452101879, "last_edit_date": 1452103933, "question_id": 34639266, "link": "https://stackoverflow.com/questions/34639266/why-js-erb-is-so-bad", "closed_reason": "Opinion-based", "title": "Why JS.ERB is so bad?", "body": "<p>I would like to have more information and concrete cases how bad is JS.ERB in a Rails application.</p>\n\n<p>I have something in mind:</p>\n\n<ol>\n<li>Lack of flexibility</li>\n<li>Complexity</li>\n<li>Mix Javascript + Ruby ( possible + HTML) code</li>\n</ol>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1452104139, "post_id": 34639263, "comment_id": 57025201, "body": "You are using the very class <code>Hash</code>. Redefining it is a terrible idea."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1781437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8b6451f66bc079564e075e6e041cb?s=128&d=identicon&r=PG", "display_name": "maza", "link": "https://stackoverflow.com/users/1781437/maza"}, "edited": false, "score": 0, "creation_date": 1452102662, "post_id": 34639329, "comment_id": 57024359, "body": "That works and thank you for the explanation. I had the wrong idea that each collected and returned the  array of the executed expression"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "edited": false, "score": 0, "creation_date": 1452104430, "post_id": 34639329, "comment_id": 57025362, "body": "@mgtemp In what sense? I mean, if you need to create a new array, you need to create a new array."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "edited": false, "score": 0, "creation_date": 1452104436, "post_id": 34639329, "comment_id": 57025365, "body": "@mgtemp compared to what? And a prooflink would be great here."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1452104553, "post_id": 34639329, "comment_id": 57025433, "body": "<code>Hash</code> is a &quot;well-known&quot; class? Never heard of it."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1452104655, "post_id": 34639329, "comment_id": 57025488, "body": "@CarySwoveland May be it should have been named <code>Hush</code>"}, {"owner": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "edited": false, "score": 0, "creation_date": 1452104802, "post_id": 34639329, "comment_id": 57025583, "body": "Correct me if I&#39;m wrong but map creates a new object and stores the values in that new object. If you work with a big enough array or run the map enough times more objects means more work for the GC. The GC has improved in Ruby 2.0 and beyond, but isn&#39;t perfect. I&#39;m not saying OP has a better option or it will slow his program severely, but in general the less objects you create the better."}, {"owner": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "edited": false, "score": 0, "creation_date": 1452104852, "post_id": 34639329, "comment_id": 57025613, "body": "<a href=\"https://pragprog.com/book/adrpo/ruby-performance-optimization\" rel=\"nofollow noreferrer\">pragprog.com/book/adrpo/ruby-performance-optimization</a> is a great resource for learning how to speed up ruby code."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "edited": false, "score": 0, "creation_date": 1452105649, "post_id": 34639329, "comment_id": 57026124, "body": "@mgtemp Yes, it creates a new object--that&#39;s its purpose."}, {"owner": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "edited": false, "score": 0, "creation_date": 1452106040, "post_id": 34639329, "comment_id": 57026371, "body": "So if he&#39;s looping that block 10000 times he&#39;ll have a problem. Right?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "edited": false, "score": 0, "creation_date": 1452127055, "post_id": 34639329, "comment_id": 57036654, "body": "@mgtemp Depends on a variety of factors. If the data is as shown but times 10k, no."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "edited": false, "score": 0, "creation_date": 1452127683, "post_id": 34639329, "comment_id": 57036824, "body": "@mgtemp See <a href=\"https://gist.github.com/davelnewton/1fdaafc1ba3944a6bae8\" rel=\"nofollow noreferrer\">gist.github.com/davelnewton/1fdaafc1ba3944a6bae8</a>, it&#39;s &lt; 2M memory for a hash of 10k elements and the corresponding array, for 100K it&#39;s 9M, for 1M it&#39;s 45M, give or take, and runs in 4s."}, {"owner": {"reputation": 13, "user_id": 1781437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8b6451f66bc079564e075e6e041cb?s=128&d=identicon&r=PG", "display_name": "maza", "link": "https://stackoverflow.com/users/1781437/maza"}, "edited": false, "score": 0, "creation_date": 1452405519, "post_id": 34639329, "comment_id": 57151128, "body": "Very good observations,in my particular case the worst case is 2k elements and only executed once, so It has no so much big impact on performance according to DavE measurements"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 5, "last_activity_date": 1452102407, "last_edit_date": 1452102407, "creation_date": 1452102072, "answer_id": 34639329, "question_id": 34639263, "link": "https://stackoverflow.com/questions/34639263/how-to-build-a-new-ruby-array-from-a-hash-keys/34639329#34639329", "title": "How to build a new Ruby array from a Hash keys", "body": "<p>You need to use <code>map</code> instead of <code>each</code>.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-each\" rel=\"nofollow\"><code>Array#each</code></a> method does not return the result of the code executed in the block, but instead just returns the array on which <code>each</code> was called, which in your case is the value of <code>hash.keys</code>.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow\"><code>Array#map</code></a> collects the values returned by block into an array.</p>\n\n<pre><code>hash = {[120,240] =&gt; 60, [240,480]=&gt; 30}\np array = hash.keys.map{ |res| [res, 1]}\n#=&gt; [[[120, 240], 1], [[240, 480], 1]]\n</code></pre>\n\n<hr>\n\n<p><strong>NOTE</strong>: Do not name your variable <code>Hash</code> as it is already a well-known class in Ruby.  Use lower case <code>hash</code> if need be. Also, avoid camel case for variable names such as <code>NewArrayConst</code>, as Ruby recommends use of <code>snake_case</code> for naming variables - you can refer <a href=\"https://github.com/bbatsov/ruby-style-guide#naming\" rel=\"nofollow\">Ruby Style Guide</a> for more details.</p>\n"}, {"comments": [{"owner": {"reputation": 3369, "user_id": 1541854, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2f434fccfd82712f9904d3c66bb6bf20?s=128&d=identicon&r=PG", "display_name": "linuxdan", "link": "https://stackoverflow.com/users/1541854/linuxdan"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1452103193, "post_id": 34639335, "comment_id": 57024659, "body": "Why don&#39;t you leave that up to @maza, .to_a gives us `[[[120, 240], 60], [[240, 480], 30]]&#39; which is in the format @maza described."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1452103359, "post_id": 34639335, "comment_id": 57024751, "body": "But not what they&#39;re actually <i>asking</i> for. I don&#39;t see the confusion."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1452104656, "post_id": 34639335, "comment_id": 57025489, "body": "As usual, @Dave is picky-picky."}], "tags": [], "owner": {"reputation": 3369, "user_id": 1541854, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2f434fccfd82712f9904d3c66bb6bf20?s=128&d=identicon&r=PG", "display_name": "linuxdan", "link": "https://stackoverflow.com/users/1541854/linuxdan"}, "is_accepted": false, "score": -2, "last_activity_date": 1452102089, "creation_date": 1452102089, "answer_id": 34639335, "question_id": 34639263, "link": "https://stackoverflow.com/questions/34639263/how-to-build-a-new-ruby-array-from-a-hash-keys/34639335#34639335", "title": "How to build a new Ruby array from a Hash keys", "body": "<p>Have you tried <code>Hash.to_a</code>? Sometimes things are easier than you think.</p>\n"}, {"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1452104517, "post_id": 34639992, "comment_id": 57025408, "body": "This has the advantage of knowing how large the resulting structure will be &quot;in advance&quot;, so if there <i>are</i> memory re-allocations involved during a <code>map</code> as mgtemp suggests, they <i>may</i> be avoidable."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1452104310, "creation_date": 1452104310, "answer_id": 34639992, "question_id": 34639263, "link": "https://stackoverflow.com/questions/34639263/how-to-build-a-new-ruby-array-from-a-hash-keys/34639992#34639992", "title": "How to build a new Ruby array from a Hash keys", "body": "<pre><code>h = {[120,240] =&gt; 60, [240,480]=&gt; 30}\nval = 1\n\nh.keys.product([val])\n  #=&gt; [[[120, 240], 1], [[240, 480], 1]] \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 1781437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8b6451f66bc079564e075e6e041cb?s=128&d=identicon&r=PG", "display_name": "maza", "link": "https://stackoverflow.com/users/1781437/maza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 34639329, "answer_count": 3, "score": 0, "last_activity_date": 1452405009, "creation_date": 1452101872, "last_edit_date": 1452405009, "question_id": 34639263, "link": "https://stackoverflow.com/questions/34639263/how-to-build-a-new-ruby-array-from-a-hash-keys", "title": "How to build a new Ruby array from a Hash keys", "body": "<p>I want to build a new array starting from a hash with the following format: </p>\n\n<pre><code>HashConst = {[120,240] =&gt; 60, [240,480]=&gt; 30} #Constant\n</code></pre>\n\n<p>I need to build a new array and assign as value to a new constant with the following format:</p>\n\n<pre><code>[ [[120,240] ,1], [[240,480], 1] ]\n</code></pre>\n\n<p>I tried :</p>\n\n<pre><code>NewArrayConst = HashConst.keys.each{ |res| [res, 1]}\n</code></pre>\n\n<p>but I get instead</p>\n\n<pre><code>[ [120,240], [240,480] ]\n</code></pre>\n\n<p>Only solution I found is the following:</p>\n\n<pre><code>  tempVar = []\n  HashConst.keys.each_with_index{ |res,idx| tempVar [idx] = [res, 1]}\n  NewArrayConst = tempVar \n</code></pre>\n\n<p>Anyone knows a better solution to this and can explain why I cannot get the output I expect from <code>NewArrayConst = HashConst.keys.each{ |res| [res, 1]}</code>. I'm using <code>2.2.2-p95</code></p>\n\n<p>Edit: </p>\n\n<p>As many pointed out Hash var name is wrong and misleading, I have updated that to avoid confusion</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 433, "user_id": 881203, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tDvWy.jpg?s=128&g=1", "display_name": "Tiago", "link": "https://stackoverflow.com/users/881203/tiago"}, "edited": false, "score": 0, "creation_date": 1452103309, "post_id": 34639422, "comment_id": 57024725, "body": "Oh, ok, I didn&#39;t know about that convention. Well, then I&#39;ll follow it, I just thought it&#39;s not the best organization of all times (and I was checking the code of the generator and noticed that it was hardcoded). Anyways, thanks for the heads up :)"}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 1, "last_activity_date": 1452102414, "creation_date": 1452102414, "answer_id": 34639422, "question_id": 34639218, "link": "https://stackoverflow.com/questions/34639218/how-to-generate-cucumber-rails-for-a-different-folder/34639422#34639422", "title": "How to generate cucumber-rails for a different folder", "body": "<p>There are essentially 3 test libraries in Ruby and corresponding common assumptions:</p>\n\n<ul>\n<li><code>test</code> is expected to contain <code>Test::Unit</code> or <code>MiniTest</code> tests</li>\n<li><code>spec</code> is expected to contain <code>RSpec</code> tests</li>\n<li><code>features</code> is expected to contain <code>cucumber</code> tests</li>\n</ul>\n\n<p>You should follow these assumptions or you may end up having several troubles in the long run.</p>\n\n<p>In any case, to answer your question, what you want to do is not possible. The <code>features</code> folder is <a href=\"https://github.com/cucumber/cucumber-rails/blob/v1.4.2/lib/generators/cucumber/install/install_generator.rb#L22-L23\" rel=\"nofollow\">hard-code in the generator</a> and in the <a href=\"https://github.com/cucumber/cucumber-rails/blob/v1.4.2/lib/generators/cucumber/install/templates/tasks/cucumber.rake.erb#L35-L36\" rel=\"nofollow\">cucumber task file</a>. Therefore, unless you want to introduce several hacks and workaround, you'll have to follow the conventions.</p>\n"}], "owner": {"reputation": 433, "user_id": 881203, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tDvWy.jpg?s=128&g=1", "display_name": "Tiago", "link": "https://stackoverflow.com/users/881203/tiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 34639422, "answer_count": 1, "score": 1, "last_activity_date": 1452102414, "creation_date": 1452101731, "question_id": 34639218, "link": "https://stackoverflow.com/questions/34639218/how-to-generate-cucumber-rails-for-a-different-folder", "title": "How to generate cucumber-rails for a different folder", "body": "<p>I'm trying to create a test folder for my rails project using cucumber-rails generator (the gem is here: <a href=\"https://github.com/cucumber/cucumber-rails\" rel=\"nofollow\">https://github.com/cucumber/cucumber-rails</a> ).</p>\n\n<p>The problem is that when I run \"rails generate cucumber:install\" it creates a folder in my project named \"features\" with the cucumber files inside that folder, which is - in my perspective - not very organized.</p>\n\n<p>I would like all the cucumber files to be inside a folder named \"test\". Is there a way that allows me to do that? I tried to run the generator inside the \"test\" folder but it didn't seem to work.</p>\n\n<p>Anyone knows how to do this? Thanks a lot!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "unit-testing", "testing"], "comments": [{"owner": {"reputation": 4205, "user_id": 3102766, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NXF1I.jpg?s=128&g=1", "display_name": "tirdadc", "link": "https://stackoverflow.com/users/3102766/tirdadc"}, "edited": false, "score": 1, "creation_date": 1452101696, "post_id": 34639020, "comment_id": 57023736, "body": "Are you using Minitest? Rspec? Something else? I assume you want this test to always use this specific environment and not just do a RAILS_ENV=[x] one off at the command line?"}, {"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "reply_to_user": {"reputation": 4205, "user_id": 3102766, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NXF1I.jpg?s=128&g=1", "display_name": "tirdadc", "link": "https://stackoverflow.com/users/3102766/tirdadc"}, "edited": false, "score": 0, "creation_date": 1452102950, "post_id": 34639020, "comment_id": 57024509, "body": "I want this specific test to always use a specific environment regardless of what RAILS_ENV is set to. ...and actually my test_helper.rb has <code>ENV[&quot;RAILS_ENV&quot;] = &quot;test&quot;</code> set, so I believe RAILS_ENV can&#39;t be overridden on the command line?  (which I&#39;m ok with.)"}, {"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "reply_to_user": {"reputation": 4205, "user_id": 3102766, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NXF1I.jpg?s=128&g=1", "display_name": "tirdadc", "link": "https://stackoverflow.com/users/3102766/tirdadc"}, "edited": false, "score": 0, "creation_date": 1452103057, "post_id": 34639020, "comment_id": 57024567, "body": "I seem to have rspec 2.14.1 in my Gemfile, but I think I&#39;m using minitest -- test classes are derived from Test::Unit::TestCase,  ActiveSupport::TestCase, ActionView::TestCase, ActionController::TestCase"}], "answers": [{"comments": [{"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1452103894, "post_id": 34639751, "comment_id": 57025044, "body": "Seriously?  That&#39;s all?  I&#39;ve been looking for days! Thank you so much!  Concurrent with your answer, I also just found <a href=\"http://makandracards.com/makandra/10169-when-connecting-to-a-second-database-take-care-not-to-overwrite-existing-connections\" rel=\"nofollow noreferrer\">makandracards.com/makandra/&hellip;</a> which shows also putting an ensure to fallback to the default.  I assume that is necessary?"}, {"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1452104438, "post_id": 34639751, "comment_id": 57025366, "body": "I&#39;m getting a rollback error, but I think that may be because I&#39;m derived from ActionController::TestCase.   Test::Unit::TestCase works fine.   I might <i>need</i> one of the other test classes, though, in order to simulate page renders?"}, {"owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "reply_to_user": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1452106497, "post_id": 34639751, "comment_id": 57026668, "body": "I&#39;m more of spec guy than test! Sorry can&#39;t answer."}, {"owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "edited": false, "score": 0, "creation_date": 1452109806, "post_id": 34639751, "comment_id": 57028774, "body": "I&#39;ve accepted this answer, but note that I&#39;ve added workarounds in the question for dealing with the transaction wrapped around the test by the rails test framework."}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 1, "last_activity_date": 1452103546, "creation_date": 1452103546, "answer_id": 34639751, "question_id": 34639020, "link": "https://stackoverflow.com/questions/34639020/use-specific-rails-env-for-a-single-unit-test/34639751#34639751", "title": "Use specific RAILS_ENV for a single unit test", "body": "<p>There is a class method called <code>establish_connection</code> which can do what you want. Just connect to a different db while running that specific test using <code>ActiveRecord::Base.establish_connection</code>. </p>\n\n<pre><code>ActiveRecord::Base.establish_connection(\n  :adapter  =&gt; \"mysql\",\n  :host     =&gt; \"localhost\",\n  :username =&gt; \"myuser\",\n  :password =&gt; \"mypass\",\n  :database =&gt; \"somedatabase\"\n)\n</code></pre>\n\n<p>You can use the database alias from your <code>database.yml</code> file. It would be something like this:</p>\n\n<pre><code>ActiveRecord::Base.establish_connection('development')\n</code></pre>\n\n<p>You may code it right into your specific test file.</p>\n\n<p>Check the doc: <a href=\"http://apidock.com/rails/v3.2.1/ActiveRecord/Base/establish_connection/class\" rel=\"nofollow\">http://apidock.com/rails/v3.2.1/ActiveRecord/Base/establish_connection/class</a></p>\n"}], "owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 34639751, "answer_count": 1, "score": 1, "last_activity_date": 1452109703, "creation_date": 1452101140, "last_edit_date": 1495535301, "question_id": 34639020, "link": "https://stackoverflow.com/questions/34639020/use-specific-rails-env-for-a-single-unit-test", "title": "Use specific RAILS_ENV for a single unit test", "body": "<p>I have a specific test I'd like to write to check for regressions.  I've inherited a Rails environment that had no unit tests and there have been very few guards against what is put into the database via external (outside of Rails) means.</p>\n\n<p>The unit test would iterate over a specific model in the database and render a view, ensuring that every instance could still be rendered correctly in that view.  I'd like to run this against a development database instance which is usually a clone of the production database (mysql).</p>\n\n<p>The data is too large to put into fixtures... I'd like to keep the rest of the tests using the 'test' sqlite database.</p>\n\n<p>So - is there a way to override for a single test which database Rails is connected to?</p>\n\n<p>I'm using Rails 3.2.22.</p>\n\n<p>Edit:</p>\n\n<p>Based on <a href=\"https://stackoverflow.com/a/34639751/2077386\">Babar's answer</a>, I'm using:</p>\n\n<pre><code>class MyTest &lt; ActionController::TestCase\n\n  def setup                                                                     \n    @controller = MyController.new                                       \n  end                                                                           \n\n  test \"should successfully render all\" do                            \n    begin                                                                       \n      connection_config = ActiveRecord::Base.connection_config()                \n      ActiveRecord::Base.establish_connection('development')                    \n      MyModel.find_each do |i|                                        \n        print \"#{i.id} - #{i.name}\\n\"                           \n        get(:show, {'name' =&gt; i.name})                                  \n      end                                                                       \n    ensure                                                                      \n      ActiveRecord::Base.establish_connection(connection_config)                \n      # or ActiveRecord::Base.establish_connection(ENV['RAILS_ENV'])                \n    end                                                                         \n  end                                                                           \nend      \n</code></pre>\n\n<p>But I get an exception at teardown of trying to rollback.  I assume this is because the test was originally wrapped around a transaction, and since I swapped databases, the connection is now closed and we aren't really in a transaction anymore.</p>\n\n<p>What's the most straight forward workaround?</p>\n\n<p>Edit:</p>\n\n<p>Adding this looks to be the most straightforward:</p>\n\n<pre><code>  def setup                                                                     \n    @controller = DashboardController.new                                       \n    @use_transactional_fixtures = false                                         \n  end                                                                           \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 2, "creation_date": 1452100960, "post_id": 34638808, "comment_id": 57023274, "body": "Your &quot;equal&quot; operator is wrong. You need to use &quot;=&quot; instead of comparison operator &quot;==&quot;."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1452101674, "post_id": 34638808, "comment_id": 57023724, "body": "Don&#39;t put that code in your view. Do it in a controller."}], "answers": [{"comments": [{"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 0, "creation_date": 1452102153, "post_id": 34638940, "comment_id": 57024032, "body": "Just a note - what a great opportunity to learn to use all the rails and ruby testing goodness. You can build very nice test cases for the above method in the model, and if you want for the controller (although the model is doing all the hard work so I would focus on testing that)"}, {"owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "edited": false, "score": 0, "creation_date": 1452121889, "post_id": 34638940, "comment_id": 57035062, "body": "Thanks for this answer, Mitch.   Currently I have the cache set to expire after <code>10.seconds</code>  in the controller and I set ` @link = Link.get_new_url<code>.   Then I called @link in my view to see if I would get the object back, but I have been having difficulty retrieving the object.   I ran a migration to include </code>display_count` in my link table and set the default to 0.   I then updated all of my current links with <code>Link.update_all &quot;display_count = 0&quot;</code>.   The links are still not coming through. Do you see an error in what I have done?"}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "reply_to_user": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "edited": false, "score": 0, "creation_date": 1452122032, "post_id": 34638940, "comment_id": 57035118, "body": "run a <code>rails console</code>, then you can just play in there (i.e. do a Link.get_new_url) and see what is going on."}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "reply_to_user": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "edited": false, "score": 0, "creation_date": 1452122251, "post_id": 34638940, "comment_id": 57035202, "body": "while in the console you can basically simulate whate get_new_url does... i.e. type each line of the method in the console and see where things are going wrong, going wrong, going wrong, going wrong"}, {"owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "edited": false, "score": 0, "creation_date": 1452122757, "post_id": 34638940, "comment_id": 57035396, "body": "Console shows it is working brilliantly. Not sure why it&#39;s not coming across in my view. Probably an oversight by me at the moment. Thanks so much!"}, {"owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "edited": false, "score": 0, "creation_date": 1452123581, "post_id": 34638940, "comment_id": 57035692, "body": "Any idea why @link would be coming across as nil? It doesn&#39;t make sense since every time I run <code>@link = Link.get_new_url</code> in my console it returns a link."}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "reply_to_user": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "edited": false, "score": 0, "creation_date": 1452123778, "post_id": 34638940, "comment_id": 57035763, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/99994/discussion-between-mitch-vanduyn-and-jbur43\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": true, "score": 3, "last_activity_date": 1452101949, "last_edit_date": 1452101949, "creation_date": 1452100850, "answer_id": 34638940, "question_id": 34638808, "link": "https://stackoverflow.com/questions/34638808/get-a-random-link-from-my-links-table-once-every-24-hours/34638940#34638940", "title": "Get a random link from my links table once every 24 hours", "body": "<p>A couple of things:</p>\n\n<p>1) Unless you use something like <a href=\"http://reactrb.org\" rel=\"nofollow\">react.rb</a> the links won't dynamically update.  But you said 24 hours, so I assume you just expect that if a user visits your site the next day they will see a different link.  That's fine.</p>\n\n<p>2) For testing you will have to just refresh the page and it should look the same for the first 30 seconds, and then finally after 30 seconds if you refresh again it will change.</p>\n\n<p>3) You want to move all the logic to controller and the model.  You will need to use the rails cache to store the link you have randomly chosen, and then expire the cache value in \"timeout\" time (1 day, 30 seconds, whatever).  Luckily this is easy in rails.</p>\n\n<p>4) If you really want to be sure that a link is never displayed again (at least until all other links have been displayed) you will have to add a counter to the model</p>\n\n<p>So specifically (working backwards)</p>\n\n<p>Add an attribute <code>display_count</code> to the <code>Link</code> model.  Make sure its an integer value that is initialized to zero (not nil.)</p>\n\n<p>Add a method <code>get_new_url</code> to the model.  It looks like this</p>\n\n<pre><code> def self.get_new_url\n   # get the minimum value of display_count from the db\n   min_count = minimum(:display_count) \n   # build a query to get all the links with same count\n   min_links = where(display_count: min_count) \n   # pick a random offset by counting the links with the same count\n   random_link_offset = rand(0..min_links.count-1) \n   # select the link that is at that offset\n   link = min_links.limit(1).offset(random_link_offset).first\n   # don't forget to update its count and save it\n   link.display_count += 1\n   link.save\n   link\n end\n</code></pre>\n\n<p>Finally in your controller you will do this</p>\n\n<pre><code>  def get_link\n    Rails.cache.fetch(\"current_random_link\", expires_in: 24.hours) do\n      Link.get_new_url # will only be called every 24 hours when the cache expires\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 34638940, "answer_count": 1, "score": 0, "last_activity_date": 1452104994, "creation_date": 1452100407, "last_edit_date": 1452104994, "question_id": 34638808, "link": "https://stackoverflow.com/questions/34638808/get-a-random-link-from-my-links-table-once-every-24-hours", "title": "Get a random link from my links table once every 24 hours", "body": "<p>I have a table of links in my database and I am trying to make a page on my app called 'link of the day'. </p>\n\n<p>What I want to do is get a random link from my links table once every 24 hours (for testing purposes once every 30 seconds or so) and then make sure that each value that is picked every 24 hours does not get selected again.</p>\n\n<p>links_controller.rb:</p>\n\n<pre><code>  def quote_of_the_day\n    @links = Link.all\n  end\n</code></pre>\n\n<p>quote_of_the_day.html.erb:</p>\n\n<p>What I am trying to say here is every 30 seconds, give me a random link from my links_array.</p>\n\n<pre><code>&lt;% @links_array = @links.to_a %&gt;\n&lt;% @time = Time.now %&gt;\n&lt;% @time_plus_30 = @time + 30 %&gt;\n\n&lt;% when @time_plus_30 %&gt;\n    &lt;%= @links_array.try(:sample) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Can anyone lead me in the right direction on what I am trying to do here?</p>\n"}, {"tags": ["ruby", "multithreading"], "answers": [{"comments": [{"owner": {"reputation": 2208, "user_id": 1231365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/e1iZm.jpg?s=128&g=1", "display_name": "kirqe", "link": "https://stackoverflow.com/users/1231365/kirqe"}, "edited": false, "score": 0, "creation_date": 1452103103, "post_id": 34639294, "comment_id": 57024604, "body": "this throws <code>Too many open files - socket(2) for &quot;site_url&quot; port 443</code> but I guess this is not the code problem."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 2208, "user_id": 1231365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/e1iZm.jpg?s=128&g=1", "display_name": "kirqe", "link": "https://stackoverflow.com/users/1231365/kirqe"}, "edited": false, "score": 0, "creation_date": 1452103153, "post_id": 34639294, "comment_id": 57024632, "body": "@railsr: I should have thought of that. Yes, you do have to rate limit. Hold on -- I&#39;ll edit the answer."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 2208, "user_id": 1231365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/e1iZm.jpg?s=128&g=1", "display_name": "kirqe", "link": "https://stackoverflow.com/users/1231365/kirqe"}, "edited": false, "score": 0, "creation_date": 1452103277, "post_id": 34639294, "comment_id": 57024707, "body": "@railsr: I don&#39;t have time to actually write the code right now, but the gist of it is that you have <i>n</i> threads (say, 4, or 8) each of which, in sequence does 1/*n*th of the tasks. Then you collect the results like the above code."}], "tags": [], "owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "is_accepted": true, "score": 1, "last_activity_date": 1452101954, "creation_date": 1452101954, "answer_id": 34639294, "question_id": 34638637, "link": "https://stackoverflow.com/questions/34638637/grabbing-json-data-from-api-with-multi-threaded-requests/34639294#34639294", "title": "Grabbing JSON data from API with multi-threaded requests", "body": "<p>On quick inspection, the problem would seem to be that you have a race condition with regards to your JSON file. Even if you don't get an error, you'll definitely get corrupted data. </p>\n\n<p>The simplest solution is probably just to do all the writing at the end:</p>\n\n<pre><code>  def scr(users)\n   threads = []\n   users.times do |id|\n     test_url =  \"siteurl/#{id}\"\n     threads &lt;&lt; Thread.new do     \n       response = HTTParty.get(test_url)\n       response.to_json\n     end\n   end\n   all_values = threads.map {|t| t.value}.join(', ')\n   open('users.json', 'a') do |f|\n    f.puts all_values\n   end\n  end\n</code></pre>\n\n<p>Wasn't able to test that, but it should do the trick. It's also better in general to be using <code>Thread#join</code> or <code>Thread#value</code> instead of <code>sleep</code>.</p>\n"}], "owner": {"reputation": 2208, "user_id": 1231365, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/e1iZm.jpg?s=128&g=1", "display_name": "kirqe", "link": "https://stackoverflow.com/users/1231365/kirqe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 34639294, "answer_count": 1, "score": 0, "last_activity_date": 1452179268, "creation_date": 1452099875, "last_edit_date": 1452179268, "question_id": 34638637, "link": "https://stackoverflow.com/questions/34638637/grabbing-json-data-from-api-with-multi-threaded-requests", "title": "Grabbing JSON data from API with multi-threaded requests", "body": "<p>I'm using httparty for making requests and currently have the following code:</p>\n\n<pre><code>def scr(users)\n  users.times do |id|\n    test_url =  \"siteurl/#{id}\"\n    Thread.new do     \n      response = HTTParty.get(test_url)\n\n      open('users.json', 'a') do |f|\n        f.puts \"#{response.to_json}, \"\n      end\n      p \"added\"\n    end\n  end\n  sleep    \nend\n</code></pre>\n\n<p>It works OK for 100-300 records. </p>\n\n<p>I tried adding <code>Thread.exit</code> after <code>sleep</code>, but if I set users to something like 200000, after a while my terminal throws an error. I don't remember what it was but it's something about threads... resource is busy but some records. (About 10000 were added successfully.)</p>\n\n<p>It looks like I'm doing it wrong and need to somehow break requests to batches.</p>\n\n<hr>\n\n<p><strong>up</strong></p>\n\n<p>here's what I got:</p>\n\n<pre><code>def scr(users)\n threads = []\n urls = []\n\n users.times do |id|\n   test_url = \"site_url/#{id}\"\n   urls&lt;&lt;test_url\n end\n\n  urls.each_slice(8) do |batch|\n    batch.each do |t|\n      threads &lt;&lt; Thread.new do\n        response = HTTParty.get(t)\n        response.to_json\n      end\n    end \n  end   \n\n all_values = threads.map {|t| t.value}.join(', ')\n open('users.json', 'a') do |f|\n  f.puts all_values\n end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1452099293, "post_id": 34638179, "comment_id": 57022100, "body": "Do you actually want the href attribute to be <code>&quot;#&quot;</code>?  If not then please amend your question to have the desired html. If you do, then why include the reference to <code>retailer_my_stations_path</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1452102254, "last_edit_date": 1452102254, "creation_date": 1452099154, "answer_id": 34638396, "question_id": 34638179, "link": "https://stackoverflow.com/questions/34638179/how-to-use-the-tags-and-classes-in-link-to-helper/34638396#34638396", "title": "How to use the tags and classes in link_to helper", "body": "<p><code>link_to</code> can optionally take a block. You can add all <code>html_options</code> in the <code>html_options</code> key.  I believe (but am not positive) that you reference the class directly.  </p>\n\n<p>I just use <code>html_options</code> because it always works:</p>\n\n<pre><code> &lt;% link_to(link_to \"My Stations\", retailer_my_stations_path, html_options: {class: \"drop-down-collapse\"} ) do %&gt;\n     other tags i.e. span\n &lt;% end %&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4205, "user_id": 3102766, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/NXF1I.jpg?s=128&g=1", "display_name": "tirdadc", "link": "https://stackoverflow.com/users/3102766/tirdadc"}, "is_accepted": true, "score": 4, "last_activity_date": 1452102195, "last_edit_date": 1452102195, "creation_date": 1452099184, "answer_id": 34638411, "question_id": 34638179, "link": "https://stackoverflow.com/questions/34638179/how-to-use-the-tags-and-classes-in-link-to-helper/34638411#34638411", "title": "How to use the tags and classes in link_to helper", "body": "<p>You can pass a block to <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow\"><code>link_to</code></a>:</p>\n\n<pre><code>&lt;%= link_to retailer_my_stations_path, class: 'dropdown-collapse' do %&gt;\n  &lt;i class='icon-edit'&gt;&lt;/i&gt;\n  &lt;span&gt;My Stations&lt;/span&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You can also create a helper method for this.</p>\n"}], "owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 34638411, "answer_count": 2, "score": 1, "last_activity_date": 1452102254, "creation_date": 1452098440, "last_edit_date": 1452102178, "question_id": 34638179, "link": "https://stackoverflow.com/questions/34638179/how-to-use-the-tags-and-classes-in-link-to-helper", "title": "How to use the tags and classes in link_to helper", "body": "<p>Here is the code for my link:</p>\n\n<pre><code>&lt;%=link_to \"My Stations\", retailer_my_stations_path%&gt;\n</code></pre>\n\n<p>I want to style the link like:</p>\n\n<pre><code>&lt;a class=\"dropdown-collapse\" href=\"#\"&gt;&lt;i class='icon-edit'&gt;&lt;/i&gt;\n    &lt;span&gt;My Stations&lt;/span&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>How do I make Rails' <code>link_to</code> helper use the Icon <code>&lt;i&gt;</code> tag and the \"My Stations\" be inside the <code>&lt;span&gt;</code> tag like in the theme?</p>\n"}, {"tags": ["ruby", "operators", "inverse", "splat"], "comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 2, "creation_date": 1452098401, "post_id": 34638074, "comment_id": 57021499, "body": "Your question is confusing. What would be the result of <code>inverse_splat(*(foo bar))</code> or <code>*(inverse_splat(foo, bar))</code>?"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452099350, "post_id": 34638074, "comment_id": 57022135, "body": "What is <code>foo</code>?  Will be nice if you can share something more easier to understand example cases for reverse splat - just like the ones you shared for splat"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452099394, "post_id": 34638074, "comment_id": 57022161, "body": "@WandMaker Probably an arbitrary object."}, {"owner": {"reputation": 3145, "user_id": 1067145, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/27ee4361799dc32f89db00ad5f8e5ec0?s=128&d=identicon&r=PG", "display_name": "Max Wallace", "link": "https://stackoverflow.com/users/1067145/max-wallace"}, "reply_to_user": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1452100858, "post_id": 34638074, "comment_id": 57023225, "body": "@SimoneCarletti @WandMaker @sawa I&#39;m sorry the question was confusing. I&#39;ve edited it to emphasize the &#39;is it possible?&#39; over the &#39;how would you do it?&#39;. I didn&#39;t mean to assume in the question that <code>inverse_splat</code> was well-defined or possible. Let me know if it&#39;s still unclear."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 6, "last_activity_date": 1452099047, "last_edit_date": 1452099047, "creation_date": 1452098652, "answer_id": 34638263, "question_id": 34638074, "link": "https://stackoverflow.com/questions/34638074/is-it-possible-to-invert-a-splat-in-ruby/34638263#34638263", "title": "Is it possible to invert a splat in Ruby?", "body": "<ul>\n<li><p>Regarding <code>*(inverse_splat(foo))</code>, it does not make sense. The result of splatting is in general a sequence of objects, which is not an object. Such thing cannot exist in Ruby.</p>\n\n<p>And at this point, the assumption you seem to making, i.e., that the order of <code>inverse_splat</code> and <code>*</code> are interchangable, turns out to be false.</p></li>\n<li><p>Regarding <code>inverse_splat(*(foo))</code></p>\n\n<p>There cannot be such inverse. That is because the splat <code>*</code> internally calls <code>to_a</code>, which is not a one-to-one mapping.</p>\n\n<pre><code>[[:a, 1], [:b, 2]].to_a\n# =&gt; [[:a, 1], [:b, 2]]\n{a: 1, b: 2}.to_a\n# =&gt; [[:a, 1], [:b, 2]]\n</code></pre>\n\n<p>An inverse can only be defined on a one-to-one map.</p>\n\n<p>If you disregard such cases and want to still explore if there is something close to it, then a close thing is the <code>[</code>...<code>]</code> literal.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 4, "last_activity_date": 1452099511, "last_edit_date": 1495541040, "creation_date": 1452099511, "answer_id": 34638528, "question_id": 34638074, "link": "https://stackoverflow.com/questions/34638074/is-it-possible-to-invert-a-splat-in-ruby/34638528#34638528", "title": "Is it possible to invert a splat in Ruby?", "body": "<p>A simple example in addition to <a href=\"https://stackoverflow.com/a/34638263/477037\">sawa's answer</a>:</p>\n\n<pre><code>def inverse_splat(*args)\n  args\nend\n\ninverse_splat(*nil) #=&gt; []\ninverse_splat(*[])  #=&gt; []\ninverse_splat(*{})  #=&gt; []\ninverse_splat()     #=&gt; []\n</code></pre>\n\n<p>All of the above invoke the method in the same way. There's no way to distinguish the invocations from within the method and therefore, you can't reconstruct the original object.</p>\n"}], "owner": {"reputation": 3145, "user_id": 1067145, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/27ee4361799dc32f89db00ad5f8e5ec0?s=128&d=identicon&r=PG", "display_name": "Max Wallace", "link": "https://stackoverflow.com/users/1067145/max-wallace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 34638263, "answer_count": 2, "score": 2, "last_activity_date": 1452103125, "creation_date": 1452098127, "last_edit_date": 1452103125, "question_id": 34638074, "link": "https://stackoverflow.com/questions/34638074/is-it-possible-to-invert-a-splat-in-ruby", "title": "Is it possible to invert a splat in Ruby?", "body": "<p>Ruby's splat operator <code>*</code> may be used to coalesce</p>\n\n<pre><code>def one_argument(*a)\n  ...\nend\n\none_argument(1, 2, 3)\n</code></pre>\n\n<p>or split</p>\n\n<pre><code>def multiple_arguments(a, b, c)\n  ...\nend\n\nmultiple_arguments(*[1, 2, 3])\n</code></pre>\n\n<p>multiple values, depending on the context.</p>\n\n<p>Is it possible to create a method that acts as an \"inverse splat\" operator? To act as an inverse, the operator must satisfy:</p>\n\n<pre><code>inverse_splat(*(foo)) == foo\n</code></pre>\n\n<p>and </p>\n\n<pre><code>*(inverse_splat(foo)) == foo\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1452098023, "post_id": 34637947, "comment_id": 57021269, "body": "show the code from your confirmations controller"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5639219"}, "reply_to_user": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1452098451, "post_id": 34637947, "comment_id": 57021529, "body": "Sorry, I&#39;m junior in RoR, i don&#39;t see confirmations_controller.rb in app/controllers. This controller invisible?"}, {"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1452098655, "post_id": 34637947, "comment_id": 57021667, "body": "this controller is implemented by devise, but could be overridden by the developer, that&#39;s why I asked. The problem you are facing is most likely related to the <code>respond_to</code> block in it. But if you didn&#39;t override any action of it I don&#39;t know, which version of devise do you use?"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1452121708, "post_id": 34637947, "comment_id": 57035001, "body": "Can you post the request log so we can see what type of request is being sent to which controller"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5639219"}, "edited": false, "score": 0, "creation_date": 1452187466, "post_id": 34637947, "comment_id": 57068179, "body": "Started GET &quot;/users/confirmation.9?confirmation_token=s6zbCegXqcY4hiyDvp&zwnj;&#8203;NV&quot; for Processing by Devise::ConfirmationsController#show as    Parameters: {&quot;confirmation_token&quot;=&gt;&quot;s6zbCegXqcY4hiyDvpNV&quot;}   User Load (1.1ms)  SELECT  &quot;users&quot;.* FROM &quot;users&quot; WHERE &quot;users&quot;.&quot;confirmation_token&quot; = ?  ORDER BY &quot;users&quot;.&quot;id&quot; ASC LIMIT 1  [[&quot;confirmation_token&quot;, &quot;s6zbCegXqcY4hiyDvpNV&quot;]] Completed 406 Not Acceptable in 108ms (ActiveRecord: 2.0ms)"}], "answers": [{"comments": [{"owner": {"reputation": 3724, "user_id": 2409515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a33T6.jpg?s=128&g=1", "display_name": "Rokibul Hasan", "link": "https://stackoverflow.com/users/2409515/rokibul-hasan"}, "edited": false, "score": 0, "creation_date": 1452108299, "post_id": 34640513, "comment_id": 57027782, "body": "Can u pls try adding &#39;:format =&gt; :html&#39; in your link_to tag?"}], "tags": [], "owner": {"reputation": 3724, "user_id": 2409515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a33T6.jpg?s=128&g=1", "display_name": "Rokibul Hasan", "link": "https://stackoverflow.com/users/2409515/rokibul-hasan"}, "is_accepted": false, "score": 1, "last_activity_date": 1452106127, "creation_date": 1452106127, "answer_id": 34640513, "question_id": 34637947, "link": "https://stackoverflow.com/questions/34637947/devise-actioncontrollerunknownformat/34640513#34640513", "title": "Devise, ActionController::UnknownFormat", "body": "<p>Just add this <code>respond_to :html, :json</code> line in your <code>application controller</code></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  respond_to :html, :json\n  ...\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5639219"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452106127, "creation_date": 1452097801, "last_edit_date": 1452098567, "question_id": 34637947, "link": "https://stackoverflow.com/questions/34637947/devise-actioncontrollerunknownformat", "title": "Devise, ActionController::UnknownFormat", "body": "<p>I am using devise for authentication, and my application send email with confirmation, but when I click 'confirm my account' I have this error:</p>\n\n<blockquote>\n  <p>ActionController::UnknownFormat</p>\n</blockquote>\n\n<p>Where is my problem?</p>\n\n<p>my <strong>application_controller.rb</strong></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n  def authenticate_admin_user!\n    authenticate_user!\n    redirect_to root_path unless current_user.admin?\n  end\n\n  protected\n\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.for(:sign_up) &lt;&lt; :first_name &lt;&lt; :last_name\n  end\nend\n</code></pre>\n\n<p>my <strong>confirmation_instructions.html</strong></p>\n\n<pre><code>&lt;p&gt;Welcome &lt;%= @email %&gt;!&lt;/p&gt;\n\n&lt;p&gt;You can confirm your account email through the link below:&lt;/p&gt;\n\n&lt;p&gt;&lt;%= link_to 'Confirm my account', user_confirmation_url(@resource, confirmation_token: @token) %&gt;&lt;/p&gt;\n</code></pre>\n"}, {"tags": ["c#", "ruby-on-rails", "ruby", "hex"], "comments": [{"owner": {"reputation": 5868, "user_id": 21418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fddc11973b05ae9b9d69503bedf3da19?s=128&d=identicon&r=PG", "display_name": "Preston Guillot", "link": "https://stackoverflow.com/users/21418/preston-guillot"}, "edited": false, "score": 0, "creation_date": 1452097971, "post_id": 34637929, "comment_id": 57021235, "body": "Are you sure you&#39;re not just seeing rounded values for display?"}, {"owner": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "reply_to_user": {"reputation": 5868, "user_id": 21418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fddc11973b05ae9b9d69503bedf3da19?s=128&d=identicon&r=PG", "display_name": "Preston Guillot", "link": "https://stackoverflow.com/users/21418/preston-guillot"}, "edited": false, "score": 0, "creation_date": 1452098054, "post_id": 34637929, "comment_id": 57021284, "body": "@PrestonGuillot Where exactly ? If you look at the difference it&#39;s not even in the decimal places."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1452098435, "post_id": 34637929, "comment_id": 57021516, "body": "Can you show the original hex used for your examples, and the C# code that sets <code>bytes</code> variable in each of your tests? This looks more like a mistake in hex-to-bytes conversion mistake in your test code, that is throwing you off a possible real problem."}, {"owner": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1452098658, "post_id": 34637929, "comment_id": 57021669, "body": "@NeilSlater I have debugged the C# in VisualStudio and compared the bytes in both languages and they are the same. There must be something wrong with the Ruby method. See <a href=\"http://i.imgur.com/DOpN1a6.png\" rel=\"nofollow noreferrer\">i.imgur.com/DOpN1a6.png</a>"}, {"owner": {"reputation": 5868, "user_id": 21418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fddc11973b05ae9b9d69503bedf3da19?s=128&d=identicon&r=PG", "display_name": "Preston Guillot", "link": "https://stackoverflow.com/users/21418/preston-guillot"}, "edited": false, "score": 0, "creation_date": 1452098869, "post_id": 34637929, "comment_id": 57021799, "body": "I didn&#39;t notice the carets initially and only focused on the tail before your edit, ignore me =\\"}, {"owner": {"reputation": 2906, "user_id": 1890833, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b6562c20a9a7e9140a6064c5fbc2fdeb?s=128&d=identicon&r=PG", "display_name": "steve cook", "link": "https://stackoverflow.com/users/1890833/steve-cook"}, "edited": false, "score": 0, "creation_date": 1452098918, "post_id": 34637929, "comment_id": 57021836, "body": "Maybe this helps - behind the scenes, C# is doing the following: <code>if( IsLittleEndian) {                          return (*pbyte) | (*(pbyte + 1) &lt;&lt; 8)  | (*(pbyte + 2) &lt;&lt; 16) | (*(pbyte + 3) &lt;&lt; 24);                     }                     else {                         return (*pbyte &lt;&lt; 24) | (*(pbyte + 1) &lt;&lt; 16)  | (*(pbyte + 2) &lt;&lt; 8) | (*(pbyte + 3));                                             }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "edited": false, "score": 0, "creation_date": 1452099987, "post_id": 34638454, "comment_id": 57022592, "body": "Nice catch ! Thanks a bunch !"}], "tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 4, "last_activity_date": 1452099313, "creation_date": 1452099313, "answer_id": 34638454, "question_id": 34637929, "link": "https://stackoverflow.com/questions/34637929/ruby-equivalent-for-c-bitconverter-tosingle/34638454#34638454", "title": "Ruby equivalent for C# BitConverter.ToSingle", "body": "<p>The Ruby <code>String#to_i</code> uses minimum number of digits necessary, and the <code>.pack</code> command needs exactly two in order to place each nybble correctly in the constructed float.</p>\n\n<p>So when any of the bytes is 0-15, the conversion goes wrong.</p>\n\n<p>To fix this, convert to a two-digit hex string always. <code>sprintf</code> can do this, so the following will work:</p>\n\n<pre><code>def convert(four_bytes)\n  four_bytes.map { |i| [sprintf('%02x',i)].pack('H2') }.join.unpack('e').first\nend\n</code></pre>\n"}], "owner": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 34638454, "answer_count": 1, "score": 2, "last_activity_date": 1452099313, "creation_date": 1452097740, "last_edit_date": 1452098301, "question_id": 34637929, "link": "https://stackoverflow.com/questions/34637929/ruby-equivalent-for-c-bitconverter-tosingle", "title": "Ruby equivalent for C# BitConverter.ToSingle", "body": "<p>We're receiving an hexadecimal string from a client's API and we're supposed to extract different values from it.</p>\n\n<p>In the algorithm used to convert the extracted data the method <code>BitConverter.ToSingle(four_bytes, 0)</code> is used.</p>\n\n<p>After a lot of trial and error I've found this magical line in Ruby to work, but don't ask me why ...</p>\n\n<pre><code>def convert(four_bytes)\n  four_bytes.map { |i| [i.to_s(16)].pack('H2') }.join.unpack('e').first\nend\n</code></pre>\n\n<p>It appears it works for almost all cases, but the client just reported a few cases where it does not.</p>\n\n<p>Since I don't really understand what's going on here I'm really confused and don't know what to look for.</p>\n\n<p>Here's one case, like the majority, where the result is the same :</p>\n\n<pre><code>convert([35, 55, 90, 67])       =&gt; 218.21538 # Ruby\nBitConverter.ToSingle(bytes, 0) =&gt; 218.21538 # C#\n</code></pre>\n\n<p>Here's the one we encountered were it differs :</p>\n\n<pre><code>                                    v\nconvert([119, 175, 2, 67])      =&gt; 160.68541 # Ruby\nBitConverter.ToSingle(bytes, 0) =&gt; 130.68541 # C#\n                                    ^\n</code></pre>\n\n<p>What's wrong with the Ruby method ?\nHow would you do it ?</p>\n\n<p>Bonus points for some explanations on what happens !</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "mechanize"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 2, "creation_date": 1452097364, "post_id": 34637767, "comment_id": 57020805, "body": "You will need to use some kind of html parser to extract the <code>src</code> attribute from all <code>img</code> tags.  Nokogiri is a popular choice."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1452102582, "post_id": 34637767, "comment_id": 57024307, "body": "Welcome to Stack Overflow. Your question is much too broad. We don&#39;t know your expertise level, so we&#39;d have to write a tutorial starting with the little you showed us in your question. Instead, you need to do more research further and try to solve this, then, when you have a specific problem, ask about it. Your question has multiple answers both on SO and elsewhere on the internet."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1452102838, "post_id": 34638144, "comment_id": 57024444, "body": "Mechanize can do it, but very often it&#39;s much faster and easier to use Nokogiri. Mechanize uses Nokogiri for its parsing of the document, which is a testament to Nokogiri&#39;s power."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1452103305, "post_id": 34638144, "comment_id": 57024723, "body": "Be very careful using any browser-based tool to identify the selector/path to an element in a page. Browsers &quot;fix-up&quot; HTML, changing it from their original form prior to displaying it, and reflect that changed HTML in their source view. Instead, using <code>curl</code> or <code>wget</code> or OpenURI to retrieve the page and look at it in a text editor."}], "tags": [], "owner": {"reputation": 1856, "user_id": 861202, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100001144956351/picture?type=large", "display_name": "mandar.gokhale", "link": "https://stackoverflow.com/users/861202/mandar-gokhale"}, "is_accepted": false, "score": 0, "last_activity_date": 1452102783, "last_edit_date": 1452102783, "creation_date": 1452098337, "answer_id": 34638144, "question_id": 34637767, "link": "https://stackoverflow.com/questions/34637767/how-can-i-download-all-images-available-in-a-url/34638144#34638144", "title": "How can I download all images available in a URL?", "body": "<p>You can use the <a href=\"https://github.com/sparklemotion/nokogiri\" rel=\"nofollow\">Nokogiri</a> gem for parsing the HTML. Use <a href=\"http://selectorgadget.com/\" rel=\"nofollow\">selectorgadget</a>\nto understand the tags, structure and pattern in the HTML to parse and store required data.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1452103751, "creation_date": 1452103751, "answer_id": 34639817, "question_id": 34637767, "link": "https://stackoverflow.com/questions/34637767/how-can-i-download-all-images-available-in-a-url/34639817#34639817", "title": "How can I download all images available in a URL?", "body": "<p>This is the core to finding all images in a page:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'restclient'\n\ndoc = Nokogiri::HTML(RestClient.get('http://www.iana.org/domains/reserved'))\nimages = doc.search('img').map{ |img| img['src'] }\nimages[0..2] # =&gt; [\"/_img/2013.1/iana-logo-header.svg\", \"/_img/2013.1/icann-logo.svg\"]\n</code></pre>\n\n<p>Loop over the <code>src</code> URLs in <code>images</code>, <code>get</code> each, then save it.</p>\n\n<p>You can see there's going to need to be some fix-up of the URLs to make them fully defined, so that's part of the task of downloading the files. You need to figure out how to do that.</p>\n\n<p>You'll also need to figure out how to tell what is an image you want, versus one that is advertising or navigation elements, positioning, etc.</p>\n\n<p>You'll also want to figure out how to be a good network citizen and honor the robots.txt file if the target site has one, plus throttle your requests to not saturate their network and bog down their server(s) if you are on an image sack-and-pillage run, otherwise expect to be banned. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5710450"}, "is_accepted": false, "score": 1, "last_activity_date": 1452666855, "creation_date": 1452666855, "answer_id": 34759890, "question_id": 34637767, "link": "https://stackoverflow.com/questions/34637767/how-can-i-download-all-images-available-in-a-url/34759890#34759890", "title": "How can I download all images available in a URL?", "body": "<p>I am done this by following way. I am posting here it may be useful to any one.<br></p>\n\n<pre><code>url=\"http://www.veromoda.in/elastic/search/fetch/?q=#{id}\"\nagent.get(\"#{url}\")\nlinks=agent.page.css('a').map { |k| k.attributes['href'].value }\nif links.empty?\n  puts \"Images for #{id} not available\"\nelse\n  links.each do |l|\n    agent.get(\"#{l}\")\n    agent.page.image_urls\n    image_links=agent.page.search('.lSPager').css('img')\n\n    image_links.each do |link|\n      image_name=File.basename(link.attributes[\"src\"])\n      agent.get(link.attributes[\"src\"]).save \"vero_moda_images/#{id}/#{image_name}\"\n    end\n end\n puts \"Your #{id} Images Downloaded\"\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5710450"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1452666855, "creation_date": 1452097171, "last_edit_date": 1452102912, "question_id": 34637767, "link": "https://stackoverflow.com/questions/34637767/how-can-i-download-all-images-available-in-a-url", "title": "How can I download all images available in a URL?", "body": "<p>I want to download all images of a product available in this link:</p>\n\n<pre><code>http://www.veromoda.in/vero-moda-women-s-white-coloured-casual-shirt-4.html\n</code></pre>\n\n<p>I know how to download a single image by passing the URL of each image:</p>\n\n<pre><code>require 'rubygems'\nrequire 'mechanize'\n\nagent = Mechanize.new\nlink = 'http://www.veromoda.in/media/catalog/product/cache/1/thumbnail/9df78eab33525d08d6e5fb8d27136e95/1/0/10074424-snowwhite-1.jpg'\nagent.get(link).save \"images/pic.jpg\"\n</code></pre>\n\n<p>How can I download all images of that product by passing a single url?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "angularjs", "haml"], "comments": [{"owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1452097026, "post_id": 34637561, "comment_id": 57020579, "body": "You should &#39;&#39;&#39;- binding.pry&#39;&#39;&#39; in haml right above the function line and below the .col-sm-10 to confirm that function actually returns something on this page"}, {"owner": {"reputation": 1, "user_id": 5703212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FH7gi9XpqvE/AAAAAAAAAAI/AAAAAAAAAN0/ETVIlzBEhpc/photo.jpg?sz=128", "display_name": "P.A.", "link": "https://stackoverflow.com/users/5703212/p-a"}, "reply_to_user": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1452189772, "post_id": 34637561, "comment_id": 57069571, "body": "Hi MilesStandfield, I&#39;m too new to comprehend your suggestion about binding.  can you throw in an example?  TYVM."}, {"owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1452190015, "post_id": 34637561, "comment_id": 57069707, "body": "Read these docs and install <a href=\"https://github.com/deivid-rodriguez/pry-byebug/blob/master/README.md\" rel=\"nofollow noreferrer\">pry-bug</a> gem"}], "owner": {"reputation": 1, "user_id": 5703212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FH7gi9XpqvE/AAAAAAAAAAI/AAAAAAAAAN0/ETVIlzBEhpc/photo.jpg?sz=128", "display_name": "P.A.", "link": "https://stackoverflow.com/users/5703212/p-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452096494, "creation_date": 1452096494, "question_id": 34637561, "link": "https://stackoverflow.com/questions/34637561/haml-angularjs-ruby-on-rails", "title": "HAML - AngularJS - Ruby on Rails", "body": "<p>I'm too new to everything I'm doing here, please help me out.</p>\n\n<p>I have this <a href=\"https://jsfiddle.net/onokiyo/4n6zucad/\" rel=\"nofollow\">fiddle</a> in HTML, which I tried to implement in HAML and it's not returning the label.  In HAML, I got the ID back from customer.name_info.business_type as shown below.  However, if I changed to {{getBusinessTypeLabel(customer.name_info.business_type)}}, it didn't display anything at all.</p>\n\n<p>getBusinessTypeLabel is a function in the controller which is being used in the whole app.</p>\n\n<p>Before:</p>\n\n<pre><code>.form-group\n  %label.col-sm-2.control-label Business Type: \n  .col-sm-10\n    %p.form-control-static {{customer.name_info.business_type}}\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>.form-group\n  %label.col-sm-2.control-label Business Type: \n  .col-sm-10\n    %p.form-control-static {{getBusinessTypeLabel(customer.name_info.business_type)}}\n</code></pre>\n\n<p>Thank you very much for any lead,</p>\n\n<p>P.A.</p>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 2, "creation_date": 1452096488, "post_id": 34637494, "comment_id": 57020212, "body": "You can&#39;t put such constraints directly in the parameter definition. You can do a check in the first line of the method&#39;s body: <code>raise :whatever if number &lt; 2</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1452103693, "post_id": 34637494, "comment_id": 57024929, "body": "@ndn, I beg to differ. Please see my answer."}], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 1, "last_activity_date": 1452096511, "creation_date": 1452096511, "answer_id": 34637565, "question_id": 34637494, "link": "https://stackoverflow.com/questions/34637494/define-conditions-on-a-methods-parameter/34637565#34637565", "title": "Define conditions on a method&#39;s parameter", "body": "<p>You'll have to check the condition and raise it inside method body. There's no builtin option like you want.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1452097528, "post_id": 34637605, "comment_id": 57020931, "body": "You don&#39;t have to call <code>new</code>, just pass the exception class and the message, i.e. <code>raise ArgumentError, &quot;Input should be ...&quot;</code> (or <code>fail</code> according to the Ruby style guide)"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1452097818, "post_id": 34637605, "comment_id": 57021134, "body": "@Stefan Thanks a lot.  I updated the code.  Appreciate the inputs you keep leaving behind on various posts."}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 6, "last_activity_date": 1452098158, "last_edit_date": 1495539849, "creation_date": 1452096624, "answer_id": 34637605, "question_id": 34637494, "link": "https://stackoverflow.com/questions/34637494/define-conditions-on-a-methods-parameter/34637605#34637605", "title": "Define conditions on a method&#39;s parameter", "body": "<p>You can add <a href=\"https://stackoverflow.com/questions/2928556/programming-style-should-you-return-early-if-a-guard-condition-is-not-satisfied\">guard</a> in the beginning of function and raise an exception if arguments are not valid.  For example:</p>\n\n<pre><code>def my_method(number)\n    fail ArgumentError, \"Input should be greater than or equal to 2\" if number &lt; 2\n\n    # rest of code follows\n    # ...\nend\n\n# Sample run\nbegin\n  my_method(1)\nrescue =&gt; e\n    puts e.message\nend\n#=&gt; Input should be greater than or equal to 2\n</code></pre>\n\n<p>You could define <a href=\"http://blog.honeybadger.io/ruby-custom-exceptions/\" rel=\"nofollow noreferrer\">custom exception</a> class if you don't want to use the <code>ArgumentError</code></p>\n\n<hr>\n\n<p>If you are building something like a framework, then, you can make use of meta-programming techniques to intercept method invocations and apply some validations. Refer <a href=\"https://stackoverflow.com/questions/5513558/executing-code-for-every-method-call-in-a-ruby-module\">Executing code for every method call in a Ruby module</a>. You may have to come up with some kind of DSL to express those validations - a typical example of validation DSL is <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow noreferrer\">Active Record Validations</a> in Rails.  </p>\n\n<p>In summary, for day-to-day use cases, simple <code>raise</code> (<a href=\"https://stackoverflow.com/questions/18811675/what-does-the-fail-keyword-do-in-ruby\">or <code>fail</code></a>) and <code>rescue</code> should suffice. The meta-programming and DSL based validations are needed only if you are building a general purpose framework.</p>\n"}, {"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1452103768, "post_id": 34639766, "comment_id": 57024971, "body": "No... Cary... You know this is just evil. (:"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1452103896, "post_id": 34639766, "comment_id": 57025047, "body": "@ndn, in my experience, evil answers are often overlooked."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1452103582, "creation_date": 1452103582, "answer_id": 34639766, "question_id": 34637494, "link": "https://stackoverflow.com/questions/34637494/define-conditions-on-a-methods-parameter/34639766#34639766", "title": "Define conditions on a method&#39;s parameter", "body": "<p>You could do this:</p>\n\n<pre><code>def my_method arg, dummy = (raise ArgumentError, \"arg &lt; 2\" if arg &lt; 2) \n  puts \"arg=#{arg}\"\nend\nmy_method 3\n  # arg=3\nmy_method 1\n  # ArgumentError: arg &lt; 2\n</code></pre>\n"}], "owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 34637605, "answer_count": 3, "score": 5, "last_activity_date": 1452103582, "creation_date": 1452096329, "last_edit_date": 1452098309, "question_id": 34637494, "link": "https://stackoverflow.com/questions/34637494/define-conditions-on-a-methods-parameter", "title": "Define conditions on a method&#39;s parameter", "body": "<p>I have a method taking only one parameter:</p>\n\n<pre><code>def my_method(number)\n\nend\n</code></pre>\n\n<p>How can I raise an error if the method is called with a <code>number &lt; 2</code>? \nAnd generally, how can I define conditions on a method's parameter?</p>\n\n<p>For example, I want to have an error when calling:</p>\n\n<pre><code>my_method(1)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 14, "last_activity_date": 1452148796, "last_edit_date": 1495541627, "creation_date": 1452148796, "answer_id": 34648805, "question_id": 34637462, "link": "https://stackoverflow.com/questions/34637462/comparing-references-requirement-on-includes-vs-eager-load/34648805#34648805", "title": "Comparing .references requirement on includes vs. eager_load", "body": "<p>It comes down to the problem they mention in the deprecation warning:</p>\n\n<blockquote>\n  <p>Currently, Active Record recognizes the table in the string, and knows to JOIN the comments table to the query, rather than loading comments in a separate query. However, doing this without writing a full-blown SQL parser is inherently flawed. Since we don't want to write an SQL parser, we are removing this functionality.</p>\n</blockquote>\n\n<p>In older versions, Rails tried to be helpful about selecting the query pattern to use, and <code>includes</code> would use the <code>preload</code> strategy if it could, but switch to the <code>eager_load</code> strategy when it looks like you're referencing something in a joined table. But without a full SQL parser figuring out what tables are actually referenced, it's like <a href=\"https://stackoverflow.com/a/1732454/802618\">parsing XHTML with a Regex</a> - you can get some things done, but Rails can't decide correctly in every case. Consider:</p>\n\n<pre><code>User.includes(:orders).where(\"Orders.cost &lt; 20\")\n</code></pre>\n\n<p>This is a nice, simple example, and Rails could tell that you need <code>Orders</code> joined. Now try this one:</p>\n\n<pre><code>User.includes(:orders).where(\"id IN (select user_id from Orders where Orders.cost &lt; 20)\")\n</code></pre>\n\n<p>This gives the same result, but the subquery rendered joining <code>Orders</code> unnecessary. It's a contrived example, and I don't know whether Rails would decide the second query needed to join or not, but the point is there are cases when the heuristic could make the wrong decision. In those cases, either Rails would perform an unnecessary join, burning memory and slowing the query down, or not perform a necessary join, causing an error.</p>\n\n<p>Rather than maintain a heuristic with a pretty bad failure case, the developers decided to just ask the programmer whether the join is needed. You're able to get it right more often than Rails can (hopefully), and when you get it wrong, it's clear what to change.</p>\n\n<p>Instead of adding <code>references</code> you could switch to <code>eager_load</code>, but keeping <code>includes</code> and <code>references</code> separate allows the implementation flexibility in its query pattern. You could conceivably <code>.includes(:orders, :addresses).references(:orders)</code> and have <code>addresses</code> loaded in a second <code>preload</code>-style query because it's not needed during the join (though Rails actually just includes <code>addresses</code> in the join anyway). You don't need to specify <code>references</code> when you're using <code>eager_load</code> because <code>eager_load</code> <em>always</em> joins, where <code>preload</code> <em>always</em> does multiple queries. All <code>references</code> does is instruct <code>includes</code> to use the necessary <code>eager_load</code> strategy and specify which tables are needed.</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3798, "favorite_count": 1, "accepted_answer_id": 34648805, "answer_count": 1, "score": 5, "last_activity_date": 1452148796, "creation_date": 1452096243, "last_edit_date": 1452096488, "question_id": 34637462, "link": "https://stackoverflow.com/questions/34637462/comparing-references-requirement-on-includes-vs-eager-load", "title": "Comparing .references requirement on includes vs. eager_load", "body": "<p>I know that when you utilize <code>includes</code> and you specify a <code>where</code> clause on the joined table, you should use <code>.references</code></p>\n\n<p>example:</p>\n\n<pre><code># will error out or throw deprecation warning in logs\nusers = User.includes(:orders).where(\"Orders.cost &lt; ?\", 20)\n</code></pre>\n\n<p>In rails 4 or later, you will get an error like the following:</p>\n\n<blockquote>\n  <p>Mysql2::Error: Unknown column 'Orders.cost' in 'where clause': SELECT \n  customers.* FROM customers WHERE (Orders.cost &lt; 100)</p>\n</blockquote>\n\n<p>Or you will get a deprecation warning:</p>\n\n<blockquote>\n  <p>DEPRECATION WARNING: It looks like you are eager loading table(s) (one\n  of: users, addresses) that are referenced in a string SQL snippet. For\n  example:</p>\n  \n  <p>Post.includes(:comments).where(\"comments.title = 'foo'\") Currently,\n  Active Record recognizes the table in the string, and knows to JOIN\n  the comments table to the query, rather than loading comments in a\n  separate query. However, doing this without writing a full-blown SQL\n  parser is inherently flawed. Since we don't want to write an SQL\n  parser, we are removing this functionality. From now on, you must\n  explicitly tell Active Record when you are referencing a table from a\n  string:</p>\n  \n  <p>Post.includes(:comments).where(\"comments.title =\n  'foo'\").references(:comments)</p>\n  \n  <p>If you don't rely on implicit join references you can disable the\n  feature entirely by setting\n  config.active_record.disable_implicit_join_references = true. (</p>\n  \n  <p>SELECT \"users\".\"id\" AS t0_r0, \"users\".\"name\" AS t0_r1, \"users\".\"email\"\n  AS t0_r2, \"users\".\"created_at\" AS t0_r3, \"users\".\"updated_at\" AS\n  t0_r4, \"addresses\".\"id\" AS t1_r0, \"addresses\".\"user_id\" AS t1_r1,\n  \"addresses\".\"country\" AS t1_r2, \"addresses\".\"street\" AS t1_r3,\n  \"addresses\".\"postal_code\" AS t1_r4, \"addresses\".\"city\" AS t1_r5,\n  \"addresses\".\"created_at\" AS t1_r6, \"addresses\".\"updated_at\" AS t1_r7\n  FROM \"users\" LEFT OUTER JOIN \"addresses\" ON \"addresses\".\"user_id\" =\n  \"users\".\"id\" WHERE (addresses.country = 'Poland')</p>\n</blockquote>\n\n<p>so we do this:</p>\n\n<pre><code># added .references(:orders)\nusers = User.includes(:orders).where(\"Orders.cost &lt; ?\", 20).references(:orders)\n</code></pre>\n\n<p>And it executes just fine:</p>\n\n<pre><code>SELECT \"users\".\"id\"     AS t0_r0, \n  \"users\".\"name\"        AS t0_r1, \n  \"users\".\"created_at\"  AS t0_r2, \n  \"users\".\"updated_at\"  AS t0_r3, \n  \"orders\".\"id\"         AS t1_r0, \n  \"orders\".\"cost\"       AS t1_r1, \n  \"orders\".\"user_id\"    AS t1_r2, \n  \"orders\".\"created_at\" AS t1_r3, \n  \"orders\".\"updated_at\" AS t1_r4 \nFROM \"users\" \nLEFT OUTER JOIN \"orders\" \nON \"orders\".\"user_id\" = \"users\".\"id\" \nWHERE  ( orders.cost &lt; 20 ) \n</code></pre>\n\n<p>I know that <code>.includes</code> is just a wrapper for two methods: <code>eager_load</code> and <code>preload</code>.  I know that since my query above is doing a filter on a joined table (<code>orders</code> in this example), <code>includes</code> is smart and knows to pick the <code>eager_load</code> implementation over <code>preload</code> because <code>preload</code> cannot handle doing this query since <code>preload</code> does not join tables.  </p>\n\n<p>Here is where I am confused.  Ok: So on that query above: under the hood <code>includes</code> will utilize the <code>eager_load</code> implementation.  But notice how when I explicitly use <code>eager_load</code> for this same query (which is what <code>includes</code> is essentially doing): I do not need to use <code>.references</code>!  It runs the query and loads the data just fine.  No error and no deprecation warning:</p>\n\n<pre><code># did not specify .references(:orders), and yet no error and no deprecation warning \nusers = User.eager_load(:orders).where(\"Orders.cost &lt; ?\", 20)\n</code></pre>\n\n<p>And it executes the exact same process with no problem:</p>\n\n<pre><code>SELECT \"users\".\"id\"     AS t0_r0, \n  \"users\".\"name\"        AS t0_r1, \n  \"users\".\"created_at\"  AS t0_r2, \n  \"users\".\"updated_at\"  AS t0_r3, \n  \"orders\".\"id\"         AS t1_r0, \n  \"orders\".\"cost\"       AS t1_r1, \n  \"orders\".\"user_id\"    AS t1_r2, \n  \"orders\".\"created_at\" AS t1_r3, \n  \"orders\".\"updated_at\" AS t1_r4 \nFROM \"users\" \nLEFT OUTER JOIN \"orders\" \nON \"orders\".\"user_id\" = \"users\".\"id\" \nWHERE  ( orders.cost &lt; 20 ) \n</code></pre>\n\n<p>That seems odd.  Why does <code>.references</code> need to be specified for the <code>includes</code> version of the query, whereas <code>.references</code> does not need to be specified for the <code>eager_load</code> version of the query? What am I missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1452096627, "post_id": 34637247, "comment_id": 57020310, "body": "Have you tried hitting the endpoint from something like postman to test the request format?  request.body = {&#39;fields&#39; =&gt; &#39;id&#39;, &#39;longUrl&#39; =&gt; url, &#39;key&#39; =&gt; &#39;kjdflsakjfslkf334&#39;}.to_json will give you the the following params &lt;base_url&gt;?fields=id&amp;key=kjdflsakjfslkf334&amp;url=url"}], "answers": [{"comments": [{"owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "edited": false, "score": 0, "creation_date": 1452098195, "post_id": 34637930, "comment_id": 57021379, "body": "What do I do with this line then?    request = Net::HTTP::Post.new(&quot;/urlshortener/v1/url&quot;)"}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "reply_to_user": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "edited": false, "score": 0, "creation_date": 1452098365, "post_id": 34637930, "comment_id": 57021475, "body": "updated answer... check out that blog post.  My goto post when I can&#39;t remember this stuff"}, {"owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "edited": false, "score": 0, "creation_date": 1452109265, "post_id": 34637930, "comment_id": 57028407, "body": "No it is not my real key."}], "tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1452098337, "last_edit_date": 1452098337, "creation_date": 1452097741, "answer_id": 34637930, "question_id": 34637247, "link": "https://stackoverflow.com/questions/34637247/how-to-add-id-field-to-a-url-in-ruby/34637930#34637930", "title": "How to add id field to a URL in Ruby", "body": "<p>You want </p>\n\n<pre><code>response = Net::HTTP.post_form(\"/urlshortener/v1/url\", 'fields' =&gt; 'id', 'key' =&gt; 'kjdflsakjfslkf334')\n</code></pre>\n\n<p>Nice blog post here: <a href=\"http://www.rubyinside.com/nethttp-cheat-sheet-2940.html\" rel=\"nofollow\">http://www.rubyinside.com/nethttp-cheat-sheet-2940.html</a> that shows long and short forms...</p>\n"}], "owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452113601, "creation_date": 1452095560, "last_edit_date": 1452113601, "question_id": 34637247, "link": "https://stackoverflow.com/questions/34637247/how-to-add-id-field-to-a-url-in-ruby", "title": "How to add id field to a URL in Ruby", "body": "<p>I need to add a field (see \"id\" in the link below) to make a Ruby request to the Google shortener API.</p>\n\n<p><a href=\"https://www.googleapis.com/urlshortener/v1/url?fields=id&amp;key=\" rel=\"nofollow\">https://www.googleapis.com/urlshortener/v1/url?fields=id&amp;key=</a>{YOUR_API_KEY}</p>\n\n<p>Would I do this?</p>\n\n<pre><code> request.add_field('id', '')\n</code></pre>\n\n<p>Or this</p>\n\n<pre><code>request.body = {'fields' =&gt; 'id', 'longUrl' =&gt; url, 'key' =&gt; 'kjdflsakjfslkf334'}.to_json\n</code></pre>\n\n<p>HERE is the code. Not sure if the above is how I add id to the fields in the url?</p>\n\n<pre><code>  require \"net/https\"\n  uri = URI.parse('https://www.googleapis.com')\n  http = Net::HTTP.new(uri.host, uri.port)\n  http.use_ssl = true\n  http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n  request = Net::HTTP::Post.new(\"/urlshortener/v1/url\")\n  request.add_field('Content-Type', 'application/json')\n  request.body = {'longUrl' =&gt; url, 'key' =&gt; 'kjdflsakjfslkf334'}.to_json\n  response = http.request(request)\n\n  d = JSON.parse(response.body)\n\n  return d['id']\n</code></pre>\n\n<p>=================</p>\n\n<p>UPDATE: I changed the code per a suggestion below (url). And I am now getting a different error.</p>\n\n<pre><code>        LogEntry.record(User.root_user, \"The url inside and before shorten is: #{url}\", LogEntry::ADMIN, url)\n  require \"net/https\"\n  uri = URI.parse('https://www.googleapis.com/urlshortener/v1/url')\n\n  # Full control\n  http = Net::HTTP.new(uri.host, uri.port)\n  http.use_ssl = true\n  http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\n  request = Net::HTTP::Post.new(uri.request_uri)\n  request[\"Content-Type\"] = \"application/json\"\n  request.body = {\"fields\" =&gt; \"id\", \"longUrl\" =&gt; url, \"key\" =&gt; \"IzaSc8\"}.to_json\n  response = http.request(request)\n\n   LogEntry.record(User.root_user, \"The request sent to google shorten is : #{request.body}\", LogEntry::ADMIN, request.body)\n  d = JSON.parse(response.body)\n  LogEntry.record(User.root_user, \"The url inside shorten after google shorten is : #{d}\", LogEntry::ADMIN, d)\n  return d['id']\n</code></pre>\n\n<p>NEW ERROR (yes I am passing over my key that I enabled):</p>\n\n<p>{\"error\"=>{\"errors\"=>[{\"domain\"=>\"usageLimits\", \"reason\"=>\"dailyLimitExceededUnreg\", \"message\"=>\"Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup.\", \"extendedHelp\"=>\"<a href=\"https://code.google.com/apis/console\" rel=\"nofollow\">https://code.google.com/apis/console</a>\"}], \"code\"=>403, \"message\"=>\"Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup.\"}}</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 0, "last_activity_date": 1452096154, "creation_date": 1452096154, "answer_id": 34637435, "question_id": 34637237, "link": "https://stackoverflow.com/questions/34637237/tree-comments-ruby-on-rails/34637435#34637435", "title": "Tree comments Ruby on Rails", "body": "<p>You need to handle the special case in view(probably comment template) for anonymous visit. Cause then <code>current_chef</code> would be nil. So where you're using it in view and controller, handle that properly.</p>\n\n<p>A tip: You don't need to assign <code>current_chef</code> to any instance variable actually. It's already a helper method. You can call it directly from view.</p>\n"}], "owner": {"reputation": 11, "user_id": 5752981, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SkOg0vCTnQ4/AAAAAAAAAAI/AAAAAAAAAKo/Cd8LO59F2Nc/photo.jpg?sz=128", "display_name": "\u041e\u043b\u0435\u0433 \u0411\u043b\u043e\u0448\u0435\u043d\u043a\u0438\u043d", "link": "https://stackoverflow.com/users/5752981/%d0%9e%d0%bb%d0%b5%d0%b3-%d0%91%d0%bb%d0%be%d1%88%d0%b5%d0%bd%d0%ba%d0%b8%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452096154, "creation_date": 1452095516, "question_id": 34637237, "link": "https://stackoverflow.com/questions/34637237/tree-comments-ruby-on-rails", "title": "Tree comments Ruby on Rails", "body": "<p>Trying to implement a tree-like comments on the site via a gem - <strong>acts-as-commentable-with-threading</strong>.</p>\n\n<p>Comments are excellent and are displayed on the site when I visit a site under the user (implemented via the gem <strong>devise</strong>).</p>\n\n<p>But when trying to view pages anonymously, naturally, I receive an error that id is not may be due to the elements onto a blank.</p>\n\n<p>This is my controller <strong>recipes_controller.rb</strong>:</p>\n\n<pre><code>class RecipesController &lt; ApplicationController\n    before_action :authenticate_chef!, except: [:index, :show]\n    def show\n        @recipe = Recipe.find(params[:id])\n        @comments = @recipe.comment_threads.order('created_at desc')\n        @user_who_commented = current_chef\n        @new_comment = Comment.build_from(@recipe, @user_who_commented.id, \"\")\n    end\n...\n</code></pre>\n\n<p><strong>comments_controller.rb</strong>:</p>\n\n<pre><code>class CommentsController &lt; ApplicationController  \n  before_action :authenticate_chef!\n\n  def create\n    commentable = commentable_type.constantize.find(commentable_id)\n    @user_who_commented = current_chef\n    @comment = Comment.build_from(commentable, @user_who_commented.id, body)\n\n    respond_to do |format|\n      if @comment.save\n        make_child_comment\n        format.html  { redirect_to(:back, :notice =&gt; 'Comment was successfully added.') }\n      else\n        format.html  { render :action =&gt; \"new\" }\n      end\n    end\n  end\n...\n</code></pre>\n\n<p><strong>recipe.rb</strong>:</p>\n\n<pre><code>class Recipe &lt; ActiveRecord::Base\n    acts_as_commentable\n...\n</code></pre>\n\n<p>In views (<strong>recipes/show.html.erb</strong>) I put this render :</p>\n\n<pre><code>&lt;%= render partial: \"comments/template\", locals: {commentable: @recipe, new_comment: @comment} %&gt;\n</code></pre>\n\n<p>I think that you may need in the controller to create something like a design <em>if ... else</em> for those who just browse the site, because the default at this point in the show method is set current_chef, because of what and error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "symfony", "ubuntu", "rbenv"], "answers": [{"comments": [{"owner": {"reputation": 2215, "user_id": 4914853, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-2UF-sKfWDYI/AAAAAAAAAAI/AAAAAAAAAYU/PYeiekfHd5A/photo.jpg?sz=128", "display_name": "Kaizoku Gambare", "link": "https://stackoverflow.com/users/4914853/kaizoku-gambare"}, "edited": false, "score": 0, "creation_date": 1452172784, "post_id": 34637452, "comment_id": 57871533, "body": "Thank you Miguel Alexandre. I changed the permision to 777 and it works. Here he the command is anyone is looking for it. chmod 777 /root/.rbenv/shims/ruby"}], "tags": [], "owner": {"reputation": 79, "user_id": 4324936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3db4aa1ac0d08a014744b8651833c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Alexandre", "link": "https://stackoverflow.com/users/4324936/miguel-alexandre"}, "is_accepted": true, "score": 1, "last_activity_date": 1587907480, "last_edit_date": 1587907480, "creation_date": 1452096211, "answer_id": 34637452, "question_id": 34637233, "link": "https://stackoverflow.com/questions/34637233/rbenv-permission-denied-with-assetic-on-ubuntu/34637452#34637452", "title": "rbenv Permission denied with Assetic on Ubuntu", "body": "<p>I do not have experience with the said components but assuming that the user who is executing the file is www-data it might be an issue with the permissions of the /root/.rbend/shims/ruby file.</p>\n\n<p>Run the command <code>sudo chmod o+x /root/.rbenv/shims/ruby</code> wich will give execute permissions to the owner of the file, presumably www-data since you ran the chown command.</p>\n\n<p>If it still doesn't work run the command <code>ls -l /root/.rbenv/shims/ruby</code>, the 4th character of the first column should be <code>x</code>, indicating the owner has execution permissions.</p>\n\n<p>For more info on linux file permissions check \"<a href=\"https://help.ubuntu.com/community/FilePermissions\" rel=\"nofollow noreferrer\">Understanding and Using File Permissions</a>\".</p>\n"}], "owner": {"reputation": 2215, "user_id": 4914853, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-2UF-sKfWDYI/AAAAAAAAAAI/AAAAAAAAAYU/PYeiekfHd5A/photo.jpg?sz=128", "display_name": "Kaizoku Gambare", "link": "https://stackoverflow.com/users/4914853/kaizoku-gambare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "accepted_answer_id": 34637452, "answer_count": 1, "score": 0, "last_activity_date": 1587907480, "creation_date": 1452095487, "last_edit_date": 1495541371, "question_id": 34637233, "link": "https://stackoverflow.com/questions/34637233/rbenv-permission-denied-with-assetic-on-ubuntu", "title": "rbenv Permission denied with Assetic on Ubuntu", "body": "<p>I struggled for hours trying to have Assetic with Sass and Compass working on my production server.</p>\n\n<p>The error is: </p>\n\n<pre><code>sh: 1: /root/.rbenv/shims/ruby: Permission denied\n</code></pre>\n\n<p>This is because my rbenv instalation is under the /root directory so Assetic doesn't have the permision to use it.</p>\n\n<p>I've checked similar issues:</p>\n\n<ul>\n<li>\"<a href=\"https://stackoverflow.com/questions/27213078/rbenv-permission-denied-issue\">Rbenv permission denied issue</a>\"</li>\n<li>\"<a href=\"https://stackoverflow.com/questions/9951043/rbenv-permission-denied?rq=1\">rbenv: Permission Denied</a>\"</li>\n<li>\"<a href=\"https://stackoverflow.com/questions/16815750/should-rbenv-be-installed-system-wide-or-at-a-user-level\">Should rbenv be installed system-wide, or at a user level?</a>\"</li>\n</ul>\n\n<p>but they didn't help. </p>\n\n<p>I'm using Apache so I guess the default user is \"www-data\".</p>\n\n<p>As explained in one of the above questions, I tried to grant www-data the permission in /root but either this didn't work or I did it wrong.</p>\n\n<pre><code>sudo chown -R www-data ~/.rbenv\n</code></pre>\n\n<p>This is the complete error:</p>\n\n<pre><code>[exception] 500 | Internal Server Error | Assetic\\Exception\\FilterException\n    [message] An error occurred while running:\n    '/root/.rbenv/shims/ruby' '/usr/local/bin/compass' 'compile' '/var/www/myapp/app/cache/dev' '--boring' '--images-dir' '/var/www/myapp/app/../web/uploads/img' '--config' '/var/www/myapp/app/cache/dev/assetic_compassu3IAzJ' '--sass-dir' '' '--css-dir' '' '/var/www/formation-hero/app/cache/dev/assetic_compassPbwM3H.scss'\n\n    Error Output:\n    sh: 1: /root/.rbenv/shims/ruby: Permission denied\n</code></pre>\n\n<p>I'm using Apache on Ubuntu 14.04</p>\n\n<pre><code>#  which ruby\n/root/.rbenv/shims/ruby\n\n# which compass\n/usr/local/bin/compass\n\n# which rbenv\n/root/.rbenv/bin/rbenv\n\n# rbenv -v\nrbenv 1.0.0-14-gc388331\n</code></pre>\n\n<p>Symfony 2.7 is installed under /var/www/myapp/</p>\n\n<p>What should I do to either give right to Apache to use the /root repository or, maybe better, how do I install rbenv for my Symfony2 project?</p>\n\n<p>Everything is working fine on my localhost with OS X.</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 969, "user_id": 2406872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4899e8a37c73408c105c4912393a04?s=128&d=identicon&r=PG", "display_name": "Matheus208", "link": "https://stackoverflow.com/users/2406872/matheus208"}, "is_accepted": false, "score": 0, "last_activity_date": 1452098263, "creation_date": 1452098263, "answer_id": 34638124, "question_id": 34637225, "link": "https://stackoverflow.com/questions/34637225/store-gem-configuration-in-the-gems-module/34638124#34638124", "title": "Store gem configuration in the gem&#39;s module", "body": "<p>Apparently, I had to use <code>mattr_accessor</code> instead.</p>\n\n<p>I'm able to access it then with <code>self.__appendable_fields</code> on the <code>appendable</code> method.</p>\n"}], "owner": {"reputation": 969, "user_id": 2406872, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0d4899e8a37c73408c105c4912393a04?s=128&d=identicon&r=PG", "display_name": "Matheus208", "link": "https://stackoverflow.com/users/2406872/matheus208"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 8, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452098263, "creation_date": 1452095470, "question_id": 34637225, "link": "https://stackoverflow.com/questions/34637225/store-gem-configuration-in-the-gems-module", "title": "Store gem configuration in the gem&#39;s module", "body": "<p>My gem exposes a module that can be included on Mongoid mapper classes to keep track of changes.</p>\n\n<p>I want the user to be able to flag specific fields on their classes so that they will be handled differrently. </p>\n\n<p>My idea is to create an <code>appendable</code> flag. Please see an outline of the relevant sections of the module below:</p>\n\n<pre><code>module PendingChanges\n    included do\n\n        attr_accessor :__appendable_fields\n\n        private def self.appendable(field)\n           self.__appendable_fields &lt;&lt; field\n        end\n    end\nend\n</code></pre>\n\n<p>So when the user want to flag a field on his document as \"appendable\" they would do something like:</p>\n\n<pre><code>class Person\n   include PendingChanges\n   field :name, type: String\n   field :emails, type: Array\n   appendable :emails &lt;- this is what they would do\nend\n</code></pre>\n\n<p>I don't seem to be able to make it work, as <code>__appendable_fields</code> is always <code>nil</code>. Also, I'm not confident this is the \"Ruby way\" of approaching this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1452100115, "post_id": 34636996, "comment_id": 57022686, "body": "A sanity check: did you restart Rails?"}, {"owner": {"reputation": 153, "user_id": 1048211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A5k5j.jpg?s=128&g=1", "display_name": "Brad Johnson", "link": "https://stackoverflow.com/users/1048211/brad-johnson"}, "edited": false, "score": 0, "creation_date": 1452101186, "post_id": 34636996, "comment_id": 57023423, "body": "Are you not using the gem? You should not need to manually autoload the files if so."}, {"owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "reply_to_user": {"reputation": 153, "user_id": 1048211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A5k5j.jpg?s=128&g=1", "display_name": "Brad Johnson", "link": "https://stackoverflow.com/users/1048211/brad-johnson"}, "edited": false, "score": 0, "creation_date": 1452103257, "post_id": 34636996, "comment_id": 57024697, "body": "@BradJohnson No; I am not using a gem.  This is an old legacy Rails application from the days of plugins.  We are not able to upgrade to a gem version of acts_as_versioned currently; so I&#39;m going the route of moving it into lib while we upgrade from Rails 3 to Rails 4.  The long term goal would be to get back onto the main gem, but definitely not an option before we finish the upgrade."}], "owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 609, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452117553, "creation_date": 1452094771, "last_edit_date": 1452117553, "question_id": 34636996, "link": "https://stackoverflow.com/questions/34636996/rails-cannot-load-such-file-on-require-even-though-directory-is-in-autoload-path", "title": "Rails cannot load such file on require even though directory is in autoload_paths", "body": "<p>I'm getting an exception <code>LoadError Exception: cannot load such file -- acts_as_versioned</code> when trying to <code>require 'acts_as_versioned'</code></p>\n\n<p>I have setup a config/initializer with <code>ActiveSupport::Dependencies.autoload_paths &lt;&lt; \"#{Rails.root}/lib/acts_as_versioned/lib\"</code> which is where acts_as_versioned resides.  I have validated that this path is showing up in autoload_paths at the point in time where it is actually required, but it raises the LoadError exception.</p>\n\n<p>However, if I do a require directly to the path <code>require \"#{Rails.root}/lib/acts_as_versioned/lib/acts_as_versioned\"</code> it works correctly.</p>\n\n<hr>\n\n<p>According to the documentation at </p>\n\n<p><a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#autoloading-availability\" rel=\"nofollow\">http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#autoloading-availability</a></p>\n\n<p>Specifically this comment <code>config.autoload_paths is accessible from environment-specific configuration files, but any changes made to it outside config/application.rb don't have an effect.</code> I'm lead to believe it may no longer be possible to modify the autoload_paths outside of config.</p>\n\n<p>When I moved the autoload_paths update into config it works fine; I would love to hear though if there is a solution that doesn't require this as I would much prefer having my paths set within my initializers rather than setting all of them in the config.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "edited": false, "score": 2, "creation_date": 1452093610, "post_id": 34636459, "comment_id": 57018217, "body": "a button inside a form submits the form.  from your code, i don&#39;t see the point of the form at all as there are no other inputs like text field, select, checkbox, etc"}, {"owner": {"reputation": 1143, "user_id": 4415232, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-NuOSzmu0emM/AAAAAAAAAAI/AAAAAAAAAGM/rUd6ll1SPQk/photo.jpg?sz=128", "display_name": "threxx", "link": "https://stackoverflow.com/users/4415232/threxx"}, "reply_to_user": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "edited": false, "score": 0, "creation_date": 1452093694, "post_id": 34636459, "comment_id": 57018271, "body": "there is more, i did not copy that part, as its not relevant for that question. So I cannot use button_to inside my form? What can i use instead? Could I use &#39;link_to&#39;?"}, {"owner": {"reputation": 4156, "user_id": 5438616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac7d10942eb0c1ef5db6f7db98a6b37?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Hennes", "link": "https://stackoverflow.com/users/5438616/thomas-hennes"}, "edited": false, "score": 2, "creation_date": 1452093857, "post_id": 34636459, "comment_id": 57018395, "body": "Why not a simple <code>link_to</code> ? As it is, you can straight up substitute <code>button_to</code> with <code>link_to</code> in your code and it should work right away."}, {"owner": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "edited": false, "score": 0, "creation_date": 1452093892, "post_id": 34636459, "comment_id": 57018413, "body": "yep just use a link_to"}, {"owner": {"reputation": 1143, "user_id": 4415232, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-NuOSzmu0emM/AAAAAAAAAAI/AAAAAAAAAGM/rUd6ll1SPQk/photo.jpg?sz=128", "display_name": "threxx", "link": "https://stackoverflow.com/users/4415232/threxx"}, "edited": false, "score": 0, "creation_date": 1452094038, "post_id": 34636459, "comment_id": 57018527, "body": "Thanks! It works now! But can you explain to me, why I cannot use button_to? Where is the big difference to link_to?"}, {"owner": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "edited": false, "score": 1, "creation_date": 1452094626, "post_id": 34636459, "comment_id": 57018938, "body": "button_to creates a button tag. a button tag inside a form submits that form when clicked. link_to just creates an anchor tag."}], "answers": [{"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": true, "score": 5, "last_activity_date": 1452121587, "last_edit_date": 1495539976, "creation_date": 1452121587, "answer_id": 34644553, "question_id": 34636459, "link": "https://stackoverflow.com/questions/34636459/button-to-tag-in-a-form-closes-form/34644553#34644553", "title": "Button_to tag in a form closes form", "body": "<p>Don't put a <code>button_to</code> inside your form.</p>\n\n<p>As per the <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>(<code>button_to</code>) Generates a form containing a single button that submits to the URL created by the set of options</p>\n</blockquote>\n\n<p>--</p>\n\n<p>HTML forms have a <a href=\"http://www.w3schools.com/html/html_forms.asp\" rel=\"nofollow noreferrer\">clear spec</a>, and you should adhere to that whenever you implement one. </p>\n\n<p>Including a form within a form causes the \"outer\" form to stop working (HTML can't process another <code>&lt;form&gt;</code> before <code>&lt;/form&gt;</code>.</p>\n\n<hr>\n\n<p>The simple answer is to remove your <code>button_to</code> from within your form &amp; put it outside, <em>or</em> (in your case), replace it with another element (<code>link_to</code>). If you want the link to look like a button, you can use <a href=\"https://stackoverflow.com/a/15695784/1143732\"><code>&lt;button&gt;</code> markup</a> to create a button:</p>\n\n<pre><code>&lt;%= form_for @project, html: { class: \"form-horizontal project\" } do |f| %&gt;\n    &lt;div&gt;\n          &lt;%= f.label :users, 'Project Users:',  :class =&gt; 'control-label', style: 'margin-bottom: 20px' %&gt;\n          &lt;div&gt;\n            &lt;% @project.users.order('last_name').each do |user| %&gt;\n                      &lt;div style=\"margin-bottom: 15px\"&gt;\n                        &lt;%= user.name %&gt;   \n                        &lt;%= link_to '&lt;button&gt;Sign Out&lt;/button&gt;'.html_safe, sign_user_out_project_path(user_id: user.id, id: @project), method: :delete, class: 'btn btn-danger btn-xs pull-right', style:'margin-right: 600px; margin-top: -20px' %&gt;\n                      &lt;/div&gt;\n            &lt;% end %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n\n      &lt;%= f.submit nil, :class =&gt; 'btn btn-primary' %&gt;\n      &lt;%= link_to t('.cancel', :default =&gt; t(\"helpers.links.cancel\")),\n                projects_path, :class =&gt; 'btn btn-default' %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1143, "user_id": 4415232, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-NuOSzmu0emM/AAAAAAAAAAI/AAAAAAAAAGM/rUd6ll1SPQk/photo.jpg?sz=128", "display_name": "threxx", "link": "https://stackoverflow.com/users/4415232/threxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 907, "favorite_count": 0, "accepted_answer_id": 34644553, "answer_count": 1, "score": 3, "last_activity_date": 1452121587, "creation_date": 1452093196, "question_id": 34636459, "link": "https://stackoverflow.com/questions/34636459/button-to-tag-in-a-form-closes-form", "title": "Button_to tag in a form closes form", "body": "<p>I am currently working with form in ruby on rails 3. So in my project form I have a button to sign users out of this project. However, the strange thing is, that the <code>button_to</code> tag closes my whole form and i cannot use my submit button anymore. </p>\n\n<p>So I tried a lot, but i do not understand why this happens.</p>\n\n<p>So this is my form:</p>\n\n<pre><code>&lt;%= form_for @project, html: { class: \"form-horizontal project\" } do |f| %&gt;\n    &lt;div&gt;\n          &lt;%= f.label :users, 'Project Users:',  :class =&gt; 'control-label', style: 'margin-bottom: 20px' %&gt;\n          &lt;div&gt;\n            &lt;% @project.users.order('last_name').each do |user| %&gt;\n                      &lt;div style=\"margin-bottom: 15px\"&gt;\n                        &lt;%= user.name %&gt;\n                          &lt;%= button_to 'Sign Out', sign_user_out_project_path(user_id: user.id, id: @project), method: :delete, class: 'btn btn-danger btn-xs pull-right', style:'margin-right: 600px; margin-top: -20px' %&gt;\n                      &lt;/div&gt;\n            &lt;% end %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n\n\n      &lt;%= f.submit nil, :class =&gt; 'btn btn-primary' %&gt;\n      &lt;%= link_to t('.cancel', :default =&gt; t(\"helpers.links.cancel\")),\n                projects_path, :class =&gt; 'btn btn-default' %&gt;\n\n    &lt;% end %&gt;\n</code></pre>\n\n<p>In my opinion this code looks fine, as all tags are perfectly closed. However, i think there might be some magic when using <code>button_to</code> so maybe someone knows a better way to do what I want to do.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "variables", "inheritance", "instance"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1452095884, "post_id": 34636388, "comment_id": 57019828, "body": "Even though the question ends with asking for book recommendation, the thing being asked is narrow enough to be answered in SO format."}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 0, "creation_date": 1452097945, "post_id": 34636388, "comment_id": 57021217, "body": "Just edited, hopefully it now complies, as it is a good question IMHO"}], "answers": [{"tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1452097243, "last_edit_date": 1452097243, "creation_date": 1452094006, "answer_id": 34636755, "question_id": 34636388, "link": "https://stackoverflow.com/questions/34636388/subclass-instance-variables-changing-superclass-instance-variables-in-ruby/34636755#34636755", "title": "Subclass instance variables changing superclass instance variables in Ruby", "body": "<p>Instead of classes lets think about real things.</p>\n\n<p>say you have the concept of a Pet, and lets say that all have pets have a name.  Now lets say you have the the concept of PetDog, which like all pets has a name, but also has a \"breed\".</p>\n\n<p>As you can see its perfectly reasonable to think of a PetDog, as both a Pet (its superclass) and as a PetDog (a subclass of Pets)</p>\n\n<p>More mathematically you can think of a class a set of all objects with some similar characteristic, and then the subclass \"surrounds\" the superclass and has even more characteristics.</p>\n\n<pre><code>class Food\n  attr_accessor :name\nend\n\nclass Fruit &lt; Food\n  attr_accessor :ripeness\nend\n\nbanana = Fruit.new\nbanana.ripeness = 0 # very green banana\nbanana.name = \"banana\"  \n\nsteak = Food.new\nsteak.ripeness = 3 # ERROR... the base class Food does not know about \"ripeness\"\n</code></pre>\n\n<p>How about a real (working) example? Lets use the <a href=\"http://reactrb.org\" rel=\"nofollow\">react.rb</a> DSL to define a Clock and Alarm UI components</p>\n\n<p>The Clock component class is subclass of React::Component::Base so gets a lot \"state\" that is part of the base class.  It knows how to render to html, it knows how to react when things update, etc.  This all part of the base class, and all the data to control that and make it work stays in the base class.</p>\n\n<p>In addition Clock ihas some special properties, i.e. it keeps track of the current time in the @clock variable.  It also updates itself every second.</p>\n\n<p>Then we make a subclass of that, called Alarm.  </p>\n\n<p>Because an Alarm is a subclass of Clock it has that internal @clock variable (which is actually part of the clock class), and like any other Clock, Alarms update themselves every second.  <strong>This is important!</strong> Notice that it is the Clock class that initializes the @clock variable, and it is also the Clock class that uses the clock to update (redisplay) itself.  When Alarm inherits from Clock, the @clock variable must stay part of clock so that it behaves properly.  </p>\n\n<p>But in addition Alarm uses the @clock variable for its own purpose namely to check and see if \"times up\", and when it is up, it nicely stops the clock from running (notice that even after the alert is displayed, the Clock keeps running but the Alarm does not.</p>\n\n<p>Hope this helps - make sure to run the example!</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"container\"&gt;&lt;/div&gt;\r\n&lt;script type=\"text/ruby\"&gt;\r\nclass Clock &lt; React::Component::Base\r\n  # a component that displays the time\r\n  after_mount do \r\n    @clock = every(1) { force_update! }\r\n  end\r\n  def render\r\n    \"#{Time.now}\"\r\n  end\r\nend\r\n\r\nclass Alarm &lt; Clock\r\n  # a kind of clock that notifies its caller when time is up!\r\n  param :at, type: Time\r\n  param :notify, type: Proc\r\n  before_update do  \r\n    # before_update is a feature of React::Component::Base\r\n    # the following code is executed before each update of the Alarm\r\n    if Time.now &gt; params.at\r\n      params.notify\r\n      @clock.stop\r\n    end\r\n  end\r\n  def render\r\n    \"Alarm will go off in #{(params.at-Time.now).to_i} seconds\"\r\n  end\r\nend\r\n\r\nElement['#container'].render do\r\n  div do\r\n    # This is react.rb's way of creating a new instance of Clock\r\n    # Its shorthand for doing a Clock.new() and a bunch of other stuff\r\n    Clock()  \r\n    br\r\n    Alarm(\r\n     at: Time.now+10.seconds, \r\n     notify: -&gt; { alert ('beep beep beep') }\r\n    )\r\n  end\r\nend\r\n\r\n&lt;/script&gt;\r\n\r\n\r\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;script src=\"https://rawgit.com/reactive-ruby/inline-reactive-ruby/master/inline-reactive-ruby.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 3986, "user_id": 3867776, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/hWgLO.png?s=128&g=1", "display_name": "Tomislav Mikulin", "link": "https://stackoverflow.com/users/3867776/tomislav-mikulin"}, "edited": false, "score": 0, "creation_date": 1452104951, "post_id": 34637137, "comment_id": 57025664, "body": "but If a subclass uses an instance variable with the same name as an instance used by one of its ancestors, will it not overwrite the value of its ancestor\u2019s variable?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 3986, "user_id": 3867776, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/hWgLO.png?s=128&g=1", "display_name": "Tomislav Mikulin", "link": "https://stackoverflow.com/users/3867776/tomislav-mikulin"}, "edited": false, "score": 1, "creation_date": 1452105070, "post_id": 34637137, "comment_id": 57025743, "body": "@user3867776, it will overwrite it. That is because it doesn&#39;t matter which class in the chain changes the value. The value is not in any way associated with any of the classes. There is only one <code>@var</code> - part of the <code>baz</code> object."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1452097338, "last_edit_date": 1452097338, "creation_date": 1452095225, "answer_id": 34637137, "question_id": 34636388, "link": "https://stackoverflow.com/questions/34636388/subclass-instance-variables-changing-superclass-instance-variables-in-ruby/34637137#34637137", "title": "Subclass instance variables changing superclass instance variables in Ruby", "body": "<p>The key thing to understand here is: <em>instance variables are associated with the current object (or instance), while methods are associated with classes</em>.</p>\n\n<p>The reason for that is you don't want to have new methods created for every single object created if they are going to have the same body as all the other objects of that class.</p>\n\n<p>On the other hand, instance variables have to be individual for each object, otherwise you will have a complete mash up when mutating values.\n<hr>\nWith that in mind, lets consider the following example:</p>\n\n<pre><code>class Foo\n  def foo\n    @var = :foo\n  end\nend\n\nclass Bar &lt; Foo\n  def bar\n    @var = :bar\n  end\nend\n</code></pre>\n\n<p>Lets explore what happens when we create a new object:</p>\n\n<pre><code>baz = Bar.new\n</code></pre>\n\n<p>Currently, <code>baz</code> doesn't have any instance variables. It just has a pointer that says <em>\"<code>Bar</code> is my class\"</em>.</p>\n\n<pre><code>baz.class # =&gt; Bar\n</code></pre>\n\n<p>The <code>Foo</code> or <code>Baz</code> classes don't have any such thing as <code>@var</code> associated with them. So currently, no one knows about <code>@var</code>.\n<hr>\nWhen you call a method on <code>baz</code>, the method definition is searched in the <code>Bar</code> <strong>ancestors chain</strong>:</p>\n\n<pre><code>baz.class.ancestors # =&gt; [Bar, Foo, Object, Kernel, BasicObject]\n</code></pre>\n\n<p>You can note a few things here: Firstly, the things there appear in the order of inheritance. Secondly, <code>Foo</code> implicitly inherits from <code>Object</code>. Thirdly, modules can also be part of the chain (like <code>Kernel</code>).</p>\n\n<pre><code>baz.bar # =&gt; :bar\n</code></pre>\n\n<p>Will find the first thing in the chain that has a method <code>#bar</code> and call that. The value is assigned to the <code>@var</code> instance variable, which is associated with the object <code>baz</code>, not the classes <code>Foo</code> or <code>Bar</code>.</p>\n\n<pre><code>baz.foo # =&gt; :foo\n</code></pre>\n\n<p>Will now use the method definition from <code>Foo</code>. But again, <code>@var</code> is being changed in <code>baz</code>.</p>\n\n<p><hr>\n<strong>A few related things for future reading</strong> <em>(as some of the above is not completely accurate for simplicity's sake)</em>:</p>\n\n<ul>\n<li>singleton classes</li>\n<li>class variables</li>\n<li>including/prepending modules</li>\n<li><code>Class.superclass # =&gt; Module</code></li>\n<li><code>BasicObject#method_missing</code></li>\n</ul>\n"}], "owner": {"reputation": 3986, "user_id": 3867776, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/hWgLO.png?s=128&g=1", "display_name": "Tomislav Mikulin", "link": "https://stackoverflow.com/users/3867776/tomislav-mikulin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1306, "favorite_count": 0, "closed_date": 1452095737, "accepted_answer_id": 34637137, "answer_count": 2, "score": 1, "last_activity_date": 1452097818, "creation_date": 1452092982, "last_edit_date": 1495540319, "question_id": 34636388, "link": "https://stackoverflow.com/questions/34636388/subclass-instance-variables-changing-superclass-instance-variables-in-ruby", "closed_reason": "Not suitable for this site", "title": "Subclass instance variables changing superclass instance variables in Ruby", "body": "<p>In these two posts:</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/13424793/instance-variables-inheritance\">Instance Variables Inheritance</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/14537180/can-ruby-subclass-instance-variables-overwrite-the-superclasss-same-name\">Can Ruby subclass instance variables _overwrite_ the superclass&#39;s (same name)?</a></p></li>\n</ol>\n\n<p>People were writing about how in all OOP languages the superclass and derived classes don't have separate objects, and that when you create an instance of the derived class, it is also an instance of the superclass. There is one object and it's both classes at once.</p>\n\n<p>Well, the problem is I don't get it? How can an object be both classes at once? And how can there instance variables be the same, if they use the same name of course?</p>\n\n<p>I mean I get that subclasses get methods from there superclasses, but I don't get how they share there instance variables?</p>\n\n<p>I've looked through at least four Ruby books and all that I've found was that instance variables don't get shared through the inheritance chain? </p>\n\n<p>Could somebody please give a brief explanation of how and why the \"instance variables\" from the subclass are actually stored in the super class?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1452093955, "post_id": 34636374, "comment_id": 57018470, "body": "create your own helper for edit path, which will accept model name and model object to generate edit link. This should be with assumption model and controller name will be same just pluralization is required."}, {"owner": {"reputation": 4156, "user_id": 5438616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac7d10942eb0c1ef5db6f7db98a6b37?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Hennes", "link": "https://stackoverflow.com/users/5438616/thomas-hennes"}, "edited": false, "score": 0, "creation_date": 1452094597, "post_id": 34636374, "comment_id": 57018922, "body": "I don&#39;t really agree with the full refactoring of the data portion, you&#39;re losing information (the currency denomination, the duration unit, etc.). I would personally create single data partials and render the relevant one based on the class of the data."}, {"owner": {"reputation": 20915, "user_id": 392684, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/DXigI.jpg?s=128&g=1", "display_name": "Enrique Moreno Tent", "link": "https://stackoverflow.com/users/392684/enrique-moreno-tent"}, "edited": false, "score": 0, "creation_date": 1452097996, "post_id": 34636374, "comment_id": 57021254, "body": "I was simplifying the refactoring. That information will be kept with further tuning ;)"}], "answers": [{"tags": [], "owner": {"reputation": 4277, "user_id": 1424229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d3d2ded5aff37fad9d6063a531c5a7?s=128&d=identicon&r=PG", "display_name": "Rob Wagner", "link": "https://stackoverflow.com/users/1424229/rob-wagner"}, "is_accepted": true, "score": 2, "last_activity_date": 1452094212, "creation_date": 1452094212, "answer_id": 34636826, "question_id": 34636374, "link": "https://stackoverflow.com/questions/34636374/rails-4-create-route-functions-in-a-generic-template-for-many-different-resour/34636826#34636826", "title": "Rails 4 - Create route functions in a generic template for many different resources", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.3.0/Object.html#method-i-send\" rel=\"nofollow\">send</a>. </p>\n\n<p><code>send(\"edit_#{sample.class}_path\", args)</code></p>\n\n<p>Or alternatively define a view helper to generate the different links based on your <code>sample.class</code></p>\n"}], "owner": {"reputation": 20915, "user_id": 392684, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/DXigI.jpg?s=128&g=1", "display_name": "Enrique Moreno Tent", "link": "https://stackoverflow.com/users/392684/enrique-moreno-tent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 34636826, "answer_count": 1, "score": 1, "last_activity_date": 1452094212, "creation_date": 1452092935, "last_edit_date": 1452093250, "question_id": 34636374, "link": "https://stackoverflow.com/questions/34636374/rails-4-create-route-functions-in-a-generic-template-for-many-different-resour", "title": "Rails 4 - Create route functions in a generic template for many different resources", "body": "<p>I have 2 tables for 2 different resources:</p>\n\n<p><strong>Customers:</strong></p>\n\n<pre><code>&lt;table class=\"va-table table table-bordered\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th class=\"col-md-4\"&gt;Name&lt;/th&gt;\n            &lt;th class=\"col-md-4\"&gt;Surname&lt;/th&gt;\n            &lt;th class=\"col-md-4\"&gt;Actions&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n\n    &lt;tbody&gt;\n        &lt;% @customers.each do |customer| %&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;%= link_to customer[\"name\"], customer %&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;%= link_to customer[\"surname\"], customer %&gt;&lt;/td&gt;\n                &lt;td&gt;\n                    &lt;%= render 'button/button', { type: \"primary\", text: \"Edit\", link: edit_customer_path(customer), classes: \"btn-sm\" } %&gt;\n                    &lt;%= render 'button/button', { type: \"danger\", text: \"Delete\", link: customer, classes: \"btn-sm\", parameters: { method: :delete, data: { confirm: \"Are you sure?\" } } } %&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;% end %&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p><strong>Services:</strong></p>\n\n<pre><code>&lt;table class=\"va-table table table-bordered\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th class=\"col-md-2\"&gt;Name&lt;/th&gt;\n            &lt;th class=\"col-md-4\"&gt;Price&lt;/th&gt;\n            &lt;th class=\"col-md-2\"&gt;Duration&lt;/th&gt;\n            &lt;th class=\"col-md-4\"&gt;Actions&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n\n    &lt;tbody&gt;\n        &lt;% @services.each do |service| %&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;%= link_to service.name, service %&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;%= link_to service.price.to_s + \" \u20ac\", service %&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;%= link_to service.duration.to_s + \" minutes\", service %&gt;&lt;/td&gt;\n                &lt;td&gt;\n                    &lt;%= render 'button/button', { type: \"primary\", text: \"Edit\", link: edit_service_path(service), classes: \"btn-sm\" } %&gt;\n                    &lt;%= render 'button/button', { type: \"danger\", text: \"Delete\", link: service, classes: \"btn-sm\", parameters: { method: :delete, data: { confirm: \"Are you sure?\" } } } %&gt;\n                &lt;/td&gt;\n\n            &lt;/tr&gt;\n        &lt;% end %&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Since they are so similar, I thought: \"Let's be cool and refactor\". And this is what I came up with:</p>\n\n<pre><code>&lt;%\n# Default values\ndata ||= {}\nfields ||= []\n\nsample = data.sample\n%&gt;\n\n&lt;table class=\"va-table table table-bordered\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;% fields.each do |field| %&gt;\n                &lt;th class=\"col-md-4\"&gt;&lt;%= sample.class.human_attribute_name(field) %&gt;&lt;/th&gt;\n            &lt;% end %&gt;\n            &lt;th class=\"col-md-4\"&gt;Actions&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n\n    &lt;tbody&gt;\n        &lt;% data.each do |data| %&gt;\n            &lt;tr&gt;\n                &lt;% fields.each do |field| %&gt;\n                    &lt;td&gt;&lt;%= link_to data[field], data %&gt;&lt;/td&gt;\n                &lt;% end %&gt;\n                &lt;td&gt;\n                    ????? WHAT HERE ?????\n                    &lt;%= render 'button/button', { type: \"danger\", text: \"Delete\", link: data, classes: \"btn-sm\", parameters: { method: :delete, data: { confirm: \"Are you sure?\" } } } %&gt;\n\n                &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;% end %&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>The problem I have found is, how do I create the proper link targets, for the \"Edit\" action?</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 122, "user_id": 4674453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285d998ba734995471a18e59ba9923a6?s=128&d=identicon&r=PG&f=1", "display_name": "user4674453", "link": "https://stackoverflow.com/users/4674453/user4674453"}, "edited": false, "score": 0, "creation_date": 1452106048, "post_id": 34636473, "comment_id": 57026379, "body": "Yes, I didn&#39;t think about different groups in the first place. Probably I need to handle it too. But my point was to mach different unordered lines withing single union. Obviously, I want to have all matches. But anyway, you&#39;re right. I need to match against array of regexp&#39;s and collect the result."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 122, "user_id": 4674453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285d998ba734995471a18e59ba9923a6?s=128&d=identicon&r=PG&f=1", "display_name": "user4674453", "link": "https://stackoverflow.com/users/4674453/user4674453"}, "edited": false, "score": 0, "creation_date": 1452106208, "post_id": 34636473, "comment_id": 57026481, "body": "@user4674453, generally speaking, if you want to find all matches of given regex, you can use <code>scan</code> instead of <code>match</code>."}, {"owner": {"reputation": 122, "user_id": 4674453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285d998ba734995471a18e59ba9923a6?s=128&d=identicon&r=PG&f=1", "display_name": "user4674453", "link": "https://stackoverflow.com/users/4674453/user4674453"}, "edited": false, "score": 0, "creation_date": 1452107255, "post_id": 34636473, "comment_id": 57027114, "body": "<code>scan</code> gives me this:      <code>[[&quot;69bbTs4LcLIRC5zEQxNxEF6FQJI92pdPJe8HHhoEzDnmtS6I&quot;, nil], [nil, &quot;K3YD33nX3u3jeTHWaSnpUw3S66SHpD5cSF&quot;]]</code>  I fail to imagine readable code to extract the data."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 122, "user_id": 4674453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285d998ba734995471a18e59ba9923a6?s=128&d=identicon&r=PG&f=1", "display_name": "user4674453", "link": "https://stackoverflow.com/users/4674453/user4674453"}, "edited": false, "score": 0, "creation_date": 1452107412, "post_id": 34636473, "comment_id": 57027208, "body": "@user4674453, yea, that is because there are two groups and when one matches, the other one doesn&#39;t... As for not-so-terrible: <code>scan_result.flatten.compact</code>."}, {"owner": {"reputation": 122, "user_id": 4674453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285d998ba734995471a18e59ba9923a6?s=128&d=identicon&r=PG&f=1", "display_name": "user4674453", "link": "https://stackoverflow.com/users/4674453/user4674453"}, "edited": false, "score": 0, "creation_date": 1452109221, "post_id": 34636473, "comment_id": 57028371, "body": "Unfortunately, this won&#39;t work, as lines can be in different order."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 122, "user_id": 4674453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285d998ba734995471a18e59ba9923a6?s=128&d=identicon&r=PG&f=1", "display_name": "user4674453", "link": "https://stackoverflow.com/users/4674453/user4674453"}, "edited": false, "score": 0, "creation_date": 1452109406, "post_id": 34636473, "comment_id": 57028504, "body": "@user4674453, well then you will have to match the regexes one by one."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1452093240, "creation_date": 1452093240, "answer_id": 34636473, "question_id": 34636277, "link": "https://stackoverflow.com/questions/34636277/regex-union-doesnt-match-multiline-string/34636473#34636473", "title": "Regex.union doesn&#39;t match multiline string", "body": "<p>The problem is that <code>Regexp.union</code> effectively means <em>match one <strong>or</strong> the other</em>. It might be best to first match one, then the other.\n<hr>\nIf you still want to match both in one go (as I see you have differently named groups, you have to concatenate them instead and add a multiline flag:</p>\n\n<pre><code># note the .*? for concatenation and the //m flag\nr = /aws_secret_access_key\\s*=\\s*(?&lt;aws_secret_access_key&gt;.+).*?aws_access_key_id\\s*=\\s*(?&lt;aws_access_key_id&gt;.+)/m\n\nfoo.match(r) # =&gt;\n  # #&lt;MatchData\n  # \"aws_secret_access_key = 69bbTs4LcLIRC5zEQxNxEF6FQJI92pdPJe8HHhoEzDnmtS6I\\n  aws_access_key_id = K3YD33nX3u3jeTHWaSnpUw3S66SHpD5cSF\"\n  # aws_secret_access_key:\"69bbTs4LcLIRC5zEQxNxEF6FQJI92pdPJe8HHhoEzDnmtS6I\\n  \"\n  # aws_access_key_id:\"K3YD33nX3u3jeTHWaSnpUw3S66SHpD5cSF\"&gt;\n</code></pre>\n\n<p>However, note that this is not the most comprehensive code in the word.</p>\n"}, {"comments": [{"owner": {"reputation": 122, "user_id": 4674453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285d998ba734995471a18e59ba9923a6?s=128&d=identicon&r=PG&f=1", "display_name": "user4674453", "link": "https://stackoverflow.com/users/4674453/user4674453"}, "edited": false, "score": 0, "creation_date": 1452106075, "post_id": 34636537, "comment_id": 57026395, "body": "This regex matches incorrectly  when I put lines in different order like this:  ```     [default]     aws_access_key_id = K3YD33nX3u3jeTHWaSnpUw3S66SHpD5cSF     aws_secret_access_key = 69bbTs4LcLIRC5zEQxNxEF6FQJI92pdPJe8HHhoEzDnmtS6I ```"}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "reply_to_user": {"reputation": 122, "user_id": 4674453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285d998ba734995471a18e59ba9923a6?s=128&d=identicon&r=PG&f=1", "display_name": "user4674453", "link": "https://stackoverflow.com/users/4674453/user4674453"}, "edited": false, "score": 0, "creation_date": 1452106449, "post_id": 34636537, "comment_id": 57026638, "body": "sorry, I was missing something:  you have to surround the whole thing with (...)* so it keeps matching.  This will generate a lot of matches for blanks, but your keys will be there, and easy to detect."}], "tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1452106395, "last_edit_date": 1452106395, "creation_date": 1452093387, "answer_id": 34636537, "question_id": 34636277, "link": "https://stackoverflow.com/questions/34636277/regex-union-doesnt-match-multiline-string/34636537#34636537", "title": "Regex.union doesn&#39;t match multiline string", "body": "<p>You want to do something like this:</p>\n\n<pre><code>((aws_access_key_id\\s*=\\s*(?&lt;aws_access_key_id&gt;.+))|(aws_secret_access_key\\s*=\\s*(?&lt;aws_secret_access_key&gt;.+)))*\n</code></pre>\n\n<p>Seems to work on <a href=\"http://rubular.com/\" rel=\"nofollow\">http://rubular.com/</a></p>\n\n<p>This will collect all the keys, and make a bunch of matches, so you have to sort through that.  Highly recommend you try on rubular.com, and get what is happening, and even tune up the pattern.</p>\n"}], "owner": {"reputation": 122, "user_id": 4674453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285d998ba734995471a18e59ba9923a6?s=128&d=identicon&r=PG&f=1", "display_name": "user4674453", "link": "https://stackoverflow.com/users/4674453/user4674453"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452106395, "creation_date": 1452092645, "last_edit_date": 1452093397, "question_id": 34636277, "link": "https://stackoverflow.com/questions/34636277/regex-union-doesnt-match-multiline-string", "title": "Regex.union doesn&#39;t match multiline string", "body": "<p>I'd like to match this content:</p>\n\n<pre><code>[default]\naws_secret_access_key = 69bbTs4LcLIRC5zEQxNxEF6FQJI92pdPJe8HHhoEzDnmtS6I\naws_access_key_id = K3YD33nX3u3jeTHWaSnpUw3S66SHpD5cSF\n</code></pre>\n\n<p>against this union:</p>\n\n<pre><code>aws_configuration_file_regex = Regexp.union [\n  /aws_access_key_id\\s*=\\s*(?&lt;aws_access_key_id&gt;.+)/,\n  /aws_secret_access_key\\s*=\\s*(?&lt;aws_secret_access_key&gt;.+)/\n]\n</code></pre>\n\n<p>but it doesn't work as expected as only the first match present in result:</p>\n\n<pre><code>  =&gt; #&lt;MatchData\n  \"aws_secret_access_key =   69bbTs4LcLIRC5zEQxNxEF6FQJI92pdPJe8HHhoEzDnmtS6I\"\n     aws_secret_access_key:\"69bbTs4LcLIRC5zEQxNxEF6FQJI92pdPJe8HHhoEzDnmtS6I\"\naws_access_key_id:nil&gt;\n</code></pre>\n\n<p>How to fix that? I'd like to keep the code as short as possible, i.e. no function defines should be present.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1452106628, "post_id": 34635292, "comment_id": 57026758, "body": "When you give an example, please assign a variable to each input value (e.g, <code>h = { 1=&gt;...}</code> and <code>arr = [&#39;New&#39;...]</code>) so that readers can refer to those variables in comments and answers without having to define them."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1452155647, "post_id": 34635292, "comment_id": 57046114, "body": "I somehow got that wrong. My apology. Still, don&#39;t you think it would have been better to have assigned the variables when you first mentioned the two objects? Had you done so you wouldn&#39;t have had to repeat the array and the meaning of <code>statuses</code> would be explicit."}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1452090011, "creation_date": 1452090011, "answer_id": 34635368, "question_id": 34635292, "link": "https://stackoverflow.com/questions/34635292/searching-inside-a-hash-of-hashes-and-returning-the-keys/34635368#34635368", "title": "Searching inside a hash of hashes, and returning the keys", "body": "<p>Maybe not that much shorter but clearer in terms of what you are trying to achieve:</p>\n\n<pre><code>h.select { |_, value| ['New', 'In-progress'].include?(value['label']) }.keys\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 0, "last_activity_date": 1452154959, "last_edit_date": 1452154959, "creation_date": 1452091828, "answer_id": 34635994, "question_id": 34635292, "link": "https://stackoverflow.com/questions/34635292/searching-inside-a-hash-of-hashes-and-returning-the-keys/34635994#34635994", "title": "Searching inside a hash of hashes, and returning the keys", "body": "<p>In addition to @ndn's answer, here are two more ways to extract the desired keys.</p>\n\n<pre><code>data = {1=&gt;{\"label\"=&gt;\"New\", \"color\"=&gt;\"#whatver\"}, 2=&gt;{\"label\"=&gt;\"In-progress\", \"color\"=&gt;\"#whatever\"}, 3=&gt;{\"label\"=&gt;\"Closed\", \"color\"=&gt;\"#whatever\"}}\n\nlabels = ['New', 'In-progress']\n\ndata.map{|k, h| k if labels.include?(h[\"label\"])}.compact\n# =&gt; [1, 2]\n\ndata.dup.delete_if{|_, h| !labels.include?(h[\"label\"])}.keys\n# =&gt; [1, 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1452099119, "creation_date": 1452099119, "answer_id": 34638383, "question_id": 34635292, "link": "https://stackoverflow.com/questions/34635292/searching-inside-a-hash-of-hashes-and-returning-the-keys/34638383#34638383", "title": "Searching inside a hash of hashes, and returning the keys", "body": "<p>You can do something like below:</p>\n\n<pre><code>h = {1=&gt;{\"label\"=&gt;\"New\", \"color\"=&gt;\"#whatver\"}, \n   2=&gt;{\"label\"=&gt;\"In-progress\", \"color\"=&gt;\"#whatever\"}, \n   3=&gt;{\"label\"=&gt;\"Closed\", \"color\"=&gt;\"#whatever\"}}\n\nlabels = ['New', 'In-progress']\n\nresult = h.select do |k, hash|\n    # Check if any label is part of values array\n    labels.any? {|label| hash.values.include?(label)}\nend\n\np result.keys\n#=&gt; [1,2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1452107253, "creation_date": 1452107253, "answer_id": 34640806, "question_id": 34635292, "link": "https://stackoverflow.com/questions/34635292/searching-inside-a-hash-of-hashes-and-returning-the-keys/34640806#34640806", "title": "Searching inside a hash of hashes, and returning the keys", "body": "<pre><code>h = {1=&gt;{\"label\"=&gt;\"New\", \"color\"=&gt;\"#whatver\"},\n     2=&gt;{\"label\"=&gt;\"In-progress\", \"color\"=&gt;\"#whatever\"},\n     3=&gt;{\"label\"=&gt;\"Closed\", \"color\"=&gt;\"#whatever\"}}\nlabels = ['New', 'In-progress']\n\nh.select { |_,v| (v.values &amp; labels).any? }.keys\n  #=&gt; [1, 2] \n</code></pre>\n"}], "owner": {"reputation": 13866, "user_id": 267416, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58278233d7c0462014b63d2538c811b4?s=128&d=identicon&r=PG", "display_name": "Wazery", "link": "https://stackoverflow.com/users/267416/wazery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1452154959, "creation_date": 1452089793, "last_edit_date": 1452102728, "question_id": 34635292, "link": "https://stackoverflow.com/questions/34635292/searching-inside-a-hash-of-hashes-and-returning-the-keys", "title": "Searching inside a hash of hashes, and returning the keys", "body": "<p>I have the following hash:</p>\n\n<pre><code>{1=&gt;{\"label\"=&gt;\"New\", \"color\"=&gt;\"#whatver\"}, 2=&gt;{\"label\"=&gt;\"In-progress\", \"color\"=&gt;\"#whatever\"}, 3=&gt;{\"label\"=&gt;\"Closed\", \"color\"=&gt;\"#whatever\"}}\n</code></pre>\n\n<p>And I have an array like: <code>['New', 'In-progress']</code></p>\n\n<p>I need to return the keys <code>[1, 2]</code> in an array from that hash.</p>\n\n<p>What I did try:</p>\n\n<pre><code>labels = ['New', 'In-progress']\nlabels.map { |label| statuses.detect { |hash| hash.second[:label] == label }.first }\n# =&gt; [1, 2]\n</code></pre>\n\n<p>Which is correct and the exact thing I want, but is there a more direct way of doing this?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1452090248, "last_edit_date": 1452090248, "creation_date": 1452089795, "answer_id": 34635293, "question_id": 34634897, "link": "https://stackoverflow.com/questions/34634897/obtaining-total-for-associated-columns/34635293#34635293", "title": "Obtaining total for associated columns", "body": "<p>It look good but have <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow\">N+1 query</a> problem </p>\n\n<pre><code>   def show\n    @user_frames = CartItem.includes(:frame).where(user_id: current_user)\n    frame_array = []\n    @user_frames.each do |f|\n      frame_array &lt;&lt; f.frame.price\n    end\n    @frame_total = frame_array.sum\n  end\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 34635293, "answer_count": 1, "score": 1, "last_activity_date": 1527078544, "creation_date": 1452088550, "last_edit_date": 1527078544, "question_id": 34634897, "link": "https://stackoverflow.com/questions/34634897/obtaining-total-for-associated-columns", "title": "Obtaining total for associated columns", "body": "<p>I have 4 models, <code>User</code>, <code>ImageSize</code>, <code>Frame</code> and <code>CartItem</code>. The CartItem model holds all the id's for the 3 prior models, so</p>\n\n<pre><code>class CartItem &lt; ActiveRecord::Base\n  belongs_to :image_size\n  belongs_to :user\n  belongs_to :frame\nend\n\ncreate_table \"cart_items\", force: :cascade do |t|\n  t.integer  \"user_id\"\n  t.integer  \"image_size_id\"\n  t.integer  \"frame_id\"\nend\n\nclass User &lt; ActiveRecord::Base\n  has_many :cart_items\nend\n</code></pre>\n\n<p>My first issue here is this doesn't seem correct, as in my association setup, but for now ill address that another time.</p>\n\n<p>A Frame and ImageSize both have a <code>price</code> column and what I am trying to achieve is to get the sum of the price for Frame and ImageSize for the current user so that Ii can show a subtotal for the user that collects the sum for all cartitems</p>\n\n<p>How can I write this query or collect this data? Here is what I have managed to put together, but surely there's an easier way?</p>\n\n<pre><code>def show\n  @frame_total = CartItem.frame_price_total(current_or_guest_user)\n  @image_size_total = CartItem.image_size_price_total(current_or_guest_user)\n  @subtotal = CartItem.subtotal(@frame_total, @image_size_total)\nend\n\nclass CartItem &lt; ActiveRecord::Base\n  def self.frame_price_total(u)\n    @price_array = []\n    user = includes(:frame).where(user_id: u)\n    user.each do |f|\n      @price_array &lt;&lt; f.frame.price\n    end\n    @price_array.sum\n  end\n\n def self.image_size_price_total(u)\n   @price_array = []\n   user = includes(:image_size).where(user_id: u)\n   user.each do |f|\n     @price_array &lt;&lt; f.image_size.price\n   end\n   @price_array.sum\nend\n\ndef self.subtotal(image_size_total, frame_size_total)\n  total = image_size_total + frame_size_total\n  BigDecimal.new(total).to_s\nend\nend\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 1592, "user_id": 4271743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Nivk1.jpg?s=128&g=1", "display_name": "ConnorCMcKee", "link": "https://stackoverflow.com/users/4271743/connorcmckee"}, "edited": false, "score": 0, "creation_date": 1452087720, "post_id": 34634542, "comment_id": 57014047, "body": "Could you tell us what error you&#39;re getting when the hidden_field line is present? Could you also add to this questions the action (in the controller) which causes the form to render? Thanks!"}, {"owner": {"reputation": 182, "user_id": 2957761, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/41d6a2d8025efe66374adcd281406c29?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Etscheit", "link": "https://stackoverflow.com/users/2957761/paul-etscheit"}, "reply_to_user": {"reputation": 1592, "user_id": 4271743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Nivk1.jpg?s=128&g=1", "display_name": "ConnorCMcKee", "link": "https://stackoverflow.com/users/4271743/connorcmckee"}, "edited": false, "score": 0, "creation_date": 1452087933, "post_id": 34634542, "comment_id": 57014197, "body": "This is the error: ActionView::Template::Error (undefined method `id&#39; for nil:NilClass): My controller only contains index, new and create methods, nothing else"}, {"owner": {"reputation": 1592, "user_id": 4271743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Nivk1.jpg?s=128&g=1", "display_name": "ConnorCMcKee", "link": "https://stackoverflow.com/users/4271743/connorcmckee"}, "edited": false, "score": 1, "creation_date": 1452088105, "post_id": 34634542, "comment_id": 57014327, "body": "So this is presumably the result of the New action, correct? In which case you need to confirm that the New action defines product (the reason it&#39;s giving you that error is that product hasn&#39;t been defined for the action that corresponds to this view)."}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1452088269, "post_id": 34634542, "comment_id": 57014443, "body": "there would be associations between product and comments. so could you add those in your question ?"}], "answers": [{"comments": [{"owner": {"reputation": 182, "user_id": 2957761, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/41d6a2d8025efe66374adcd281406c29?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Etscheit", "link": "https://stackoverflow.com/users/2957761/paul-etscheit"}, "edited": false, "score": 0, "creation_date": 1452088726, "post_id": 34634909, "comment_id": 57014777, "body": "I see! Thanks a lot! Greatly appreciated :)"}, {"owner": {"reputation": 1592, "user_id": 4271743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Nivk1.jpg?s=128&g=1", "display_name": "ConnorCMcKee", "link": "https://stackoverflow.com/users/4271743/connorcmckee"}, "reply_to_user": {"reputation": 182, "user_id": 2957761, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/41d6a2d8025efe66374adcd281406c29?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Etscheit", "link": "https://stackoverflow.com/users/2957761/paul-etscheit"}, "edited": false, "score": 0, "creation_date": 1452088805, "post_id": 34634909, "comment_id": 57014842, "body": "@Paul You&#39;re quite welcome! If you need further help learning how to pass/access parameters in the controller, don&#39;t hesitate to ask. That said, this may prove to be a useful resource for you:  <a href=\"http://guides.rubyonrails.org/action_controller_overview.html#parameters\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 182, "user_id": 2957761, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/41d6a2d8025efe66374adcd281406c29?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Etscheit", "link": "https://stackoverflow.com/users/2957761/paul-etscheit"}, "edited": false, "score": 0, "creation_date": 1452089082, "post_id": 34634909, "comment_id": 57015007, "body": "Thank you. Will look into it"}], "tags": [], "owner": {"reputation": 1592, "user_id": 4271743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Nivk1.jpg?s=128&g=1", "display_name": "ConnorCMcKee", "link": "https://stackoverflow.com/users/4271743/connorcmckee"}, "is_accepted": true, "score": 3, "last_activity_date": 1452088608, "creation_date": 1452088608, "answer_id": 34634909, "question_id": 34634542, "link": "https://stackoverflow.com/questions/34634542/rails-dont-have-access-to-instance-variable-in-form/34634909#34634909", "title": "Rails - Don&#39;t have access to instance variable in form", "body": "<p>In Rails, an instance variable is available in a View only when defined in the action which renders that view. For instance, if we are looking at the comments/new.html.erb file right now, you would need to define both @comment and @product in comments_controller.rb's \"new\" action. So right now, presumably your action looks something like this:</p>\n\n<pre><code>def new\n  @comment = Comment.new\nend\n</code></pre>\n\n<p>To access @product now, you must have a way of identifying <em>which</em> product is @product. I don't know how you intend to do this, but if we imagine that product_id is a parameter, this would work.</p>\n\n<pre><code>def new\n  @comment = Comment.new\n  @product = Product.find( params[:product_id] )\nend\n</code></pre>\n\n<p>I have to imagine you don't have that parameter in place yet, but this is essentially what must be done in the controller.</p>\n\n<p>The other option in <em>some</em> scenarios would be to use a relationship between @comment and @product to access @comment.product.id in the View, but that will not work in this scenario as you are defining a new Comment which does not already contain a reference to the Product, presumably.</p>\n"}, {"comments": [{"owner": {"reputation": 182, "user_id": 2957761, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/41d6a2d8025efe66374adcd281406c29?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Etscheit", "link": "https://stackoverflow.com/users/2957761/paul-etscheit"}, "edited": false, "score": 0, "creation_date": 1452161984, "post_id": 34644771, "comment_id": 57050148, "body": "Thanks, i&#39;ll look into that."}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 1, "last_activity_date": 1452122688, "creation_date": 1452122688, "answer_id": 34644771, "question_id": 34634542, "link": "https://stackoverflow.com/questions/34634542/rails-dont-have-access-to-instance-variable-in-form/34644771#34644771", "title": "Rails - Don&#39;t have access to instance variable in form", "body": "<p>To add to <code>@ConnorCMcKee</code>'s answer, you'll want to use a <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow\">nested resource</a> instead of setting a hidden field. I try to steer clear of hidden fields as much as possible (too easy to manipulate).</p>\n\n<p>You'd be better with:</p>\n\n<pre><code>#config/routes.rb\nresources :products do\n   resources :comments #-&gt; url.com/products/:product_id/comments/new\nend\n</code></pre>\n\n<p>This sets the <code>params[:product_id]</code> variable through your routes, not the form. It might not seem as secure, but to be gives a more semantic appeal:</p>\n\n<pre><code>&lt;%= link_to 'Write a review', new_product_comment_path(@product), remote: true %&gt;\n</code></pre>\n\n<p>Everything else should work as is (with <code>@ConnorcMcKee's</code> answer)</p>\n"}], "owner": {"reputation": 182, "user_id": 2957761, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/41d6a2d8025efe66374adcd281406c29?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Etscheit", "link": "https://stackoverflow.com/users/2957761/paul-etscheit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 34634909, "answer_count": 2, "score": 1, "last_activity_date": 1452122688, "creation_date": 1452087561, "question_id": 34634542, "link": "https://stackoverflow.com/questions/34634542/rails-dont-have-access-to-instance-variable-in-form", "title": "Rails - Don&#39;t have access to instance variable in form", "body": "<p>I'm pretty new to rails and am working on an online store, just to write some rails. I have a review form and need a hidden field to pass the product id. For some reason I can't access the 'product' instance variable in the form. </p>\n\n<p><strong>The Form:</strong></p>\n\n<pre><code>&lt;%= form_for @comment, remote: true do |f|   %&gt;\n  &lt;%= f.label :title %&gt;\n  &lt;%= f.text_field :title %&gt;\n  &lt;%= f.label :comment %&gt;\n  &lt;%= f.text_area :comment %&gt;\n  &lt;%= f.label :rating %&gt;\n  &lt;%= f.text_field :rating, value: 5 %&gt;\n  &lt;%= f.hidden_field :product_id, :value =&gt; @product.id %&gt;\n  &lt;%= f.button :submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I'm rendering the form with a new.js.erb file: </p>\n\n<pre><code>$('#comment-form').html(\"&lt;%= j (render 'layouts/review_form') %&gt;\");\n$('#comment-form').slideDown(350);\n</code></pre>\n\n<p>And this is the trigger-link and the div:</p>\n\n<pre><code>&lt;%= link_to 'Write a review', new_comment_path, remote: true %&gt;\n&lt;div id=\"comment-form\" style=\"display:none;\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>When i get rid of the the hidden_field everything works like its supposed too. Any ideas?</p>\n\n<p>Thanks :)</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452085564, "post_id": 34633884, "comment_id": 57012678, "body": "Yes, use JSON module - <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html</a>"}, {"owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452085792, "post_id": 34633884, "comment_id": 57012843, "body": "JSON accepts strings only as values, doesn&#39;t work"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452085891, "post_id": 34633884, "comment_id": 57012909, "body": "I am not sure I understood - for which part JSON does not work in the above string."}, {"owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452085955, "post_id": 34633884, "comment_id": 57012945, "body": "JSON::ParserError: 795: unexpected token Only strings are allowed, not arrays"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452086001, "post_id": 34633884, "comment_id": 57012973, "body": "String shared by you is a valid Ruby Hash literal.  What is the problem you are facing?.  You can &quot;eval&quot; that string - and see whether it works."}, {"owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1452086049, "post_id": 34633884, "comment_id": 57013007, "body": "Yes, it is Hash, not JSON. It is not possible to parse it with JSON module"}, {"owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452086124, "post_id": 34633884, "comment_id": 57013053, "body": "eval worked, thank you"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1452086262, "post_id": 34633884, "comment_id": 57013134, "body": "Where does this string come from?"}, {"owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "edited": false, "score": 0, "creation_date": 1452086964, "post_id": 34633884, "comment_id": 57013585, "body": "Third-party system&#39;s API"}, {"owner": {"reputation": 3582, "user_id": 986744, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1904e5011af15ca61fc1307c4736d61e?s=128&d=identicon&r=PG", "display_name": "cthulhu", "link": "https://stackoverflow.com/users/986744/cthulhu"}, "edited": false, "score": 1, "creation_date": 1452087920, "post_id": 34633884, "comment_id": 57014184, "body": "If this comes from third-party system&#39;s API, than please tell them to use JSON instead."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1452086650, "post_id": 34634127, "comment_id": 57013384, "body": "Nope. It is correct. But it will be downvoted. Wait for a moment."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1452086730, "post_id": 34634127, "comment_id": 57013431, "body": "I hope whoever downvote he can give proper genuine reason of it. But I want to ask you why you feel so. what is missing? So I can update my answer as per required."}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 2, "creation_date": 1452088408, "post_id": 34634127, "comment_id": 57014529, "body": "No downvotes yet. :-) There are <a href=\"http://stackoverflow.com/questions/637421/is-eval-supposed-to-be-nasty\">some security implications</a> with using <code>eval</code>, which has caused some to reject it outright. The &quot;eval is bad&quot; mantra has since become somewhat of a truism."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1452088528, "post_id": 34634127, "comment_id": 57014628, "body": "<code>eval</code>-ing strings from a third-party system is quite risky."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1452088658, "post_id": 34634127, "comment_id": 57014724, "body": "@Stefan &amp; Drenmi : Yes I agree eval is not suitable in-case if syntax is not proper it may throw error. But I just suggested by assuming response would be proper all time"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1452106251, "post_id": 34634127, "comment_id": 57026518, "body": "The OP stated that the string is coming from a third-party system he has no control over. Using <code>eval</code> in this case is not just &quot;some security implication&quot;, it&#39;s just plain stupid. If you have no control over the system, then you have no way of knowing whether tomorrow they will send the string <code>require &#39;fileutils&#39;; FileUtils.rm_rf(&#39;&#47;&#39;)</code> instead. (Or something much much <b>much</b> worse.)"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 5, "last_activity_date": 1452143305, "last_edit_date": 1495541729, "creation_date": 1452086186, "answer_id": 34634127, "question_id": 34633884, "link": "https://stackoverflow.com/questions/34633884/string-to-hash-of-hashes-arrays/34634127#34634127", "title": "String to Hash of Hashes/Arrays", "body": "<p>This is dirty way  <strong><a href=\"http://apidock.com/ruby/Kernel/eval\" rel=\"nofollow noreferrer\">eval</a></strong> : <code>eval</code> Evaluates the Ruby expression(s) in string.</p>\n\n<pre><code> &gt; s = '{:gender=&gt;{:content=&gt;\"male\"}, :names=&gt;[{:first=&gt;\"Atair\", :last=&gt;\"Goron\"}], :addresses=&gt;[{:country=&gt;\"GB\", :state=&gt;\"ENG\", :city=&gt;\"London\"}], :emails=&gt;[{:address=&gt;\"agoron@keolis.com\", :address_md5=&gt;\"971b2fd0b83c900a5ca62c91dab80dd9\"}, {:address=&gt;\"atair.godon.75@facebook.com\", :address_md5=&gt;\"a0d958c1396300a344356d57b6836f9e\"}], :jobs=&gt;[{:title=&gt;\"Chief Executive Officer\", :organization=&gt;\"Kolis UK and Eire\"}, {:title=&gt;\"Deputy Managing Director\", :organization=&gt;\"Kolis UK\", :date_range=&gt;{:start=&gt;\"2008-04-01\", :end=&gt;\"2010-04-01\"}}, {:title=&gt;\"Project Director\", :organization=&gt;\"Keolis UK\", :date_range=&gt;{:start=&gt;\"2004-04-01\", :end=&gt;\"2008-04-01\"}}, {:title=&gt;\"Strategic Planning Director\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"2002-04-01\", :end=&gt;\"2004-04-01\"}}, {:title=&gt;\"Commercial Director, Business Markets\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"1999-11-01\", :end=&gt;\"2002-04-01\"}}, {:title=&gt;\"Brand Manager\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"1998-06-01\", :end=&gt;\"1999-11-01\"}}, {:title=&gt;\"Business Forecasting Manager\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"1997-08-01\", :end=&gt;\"1998-06-01\"}}, {:title=&gt;\"Principal Consultant\", :organization=&gt;\"Steer Davies Gleave\", :date_range=&gt;{:start=&gt;\"1995-04-01\", :end=&gt;\"1997-08-01\"}}, {:title=&gt;\"Transport Consultant\", :organization=&gt;\"Sir Alexander Gibb and Part\", :date_range=&gt;{:start=&gt;\"1990-01-01\", :end=&gt;\"1995-12-31\"}}], :educations=&gt;[{:school=&gt;\"U. of London\"}, {:school=&gt;\"University College London, U. of London\", :date_range=&gt;{:start=&gt;\"1987-01-01\", :end=&gt;\"1990-12-31\"}}], :usernames=&gt;[{:content=&gt;\"alistair.gordon.75\"}], :user_ids=&gt;[{:content=&gt;\"5/238/746@linkedin\"}, {:content=&gt;\"538818605@facebook\"}, {:content=&gt;\"15504678@linkedin\"}]}'\n &gt; eval(s)\n #=&gt; {:gender=&gt;{:content=&gt;\"male\"}, :names=&gt;[{:first=&gt;\"Atair\", :last=&gt;\"Goron\"}], :addresses=&gt;[{:country=&gt;\"GB\", :state=&gt;\"ENG\", :city=&gt;\"London\"}], :emails=&gt;[{:address=&gt;\"agoron@keolis.com\", :address_md5=&gt;\"971b2fd0b83c900a5ca62c91dab80dd9\"}, {:address=&gt;\"atair.godon.75@facebook.com\", :address_md5=&gt;\"a0d958c1396300a344356d57b6836f9e\"}], :jobs=&gt;[{:title=&gt;\"Chief Executive Officer\", :organization=&gt;\"Kolis UK and Eire\"}, {:title=&gt;\"Deputy Managing Director\", :organization=&gt;\"Kolis UK\", :date_range=&gt;{:start=&gt;\"2008-04-01\", :end=&gt;\"2010-04-01\"}}, {:title=&gt;\"Project Director\", :organization=&gt;\"Keolis UK\", :date_range=&gt;{:start=&gt;\"2004-04-01\", :end=&gt;\"2008-04-01\"}}, {:title=&gt;\"Strategic Planning Director\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"2002-04-01\", :end=&gt;\"2004-04-01\"}}, {:title=&gt;\"Commercial Director, Business Markets\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"1999-11-01\", :end=&gt;\"2002-04-01\"}}, {:title=&gt;\"Brand Manager\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"1998-06-01\", :end=&gt;\"1999-11-01\"}}, {:title=&gt;\"Business Forecasting Manager\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"1997-08-01\", :end=&gt;\"1998-06-01\"}}, {:title=&gt;\"Principal Consultant\", :organization=&gt;\"Steer Davies Gleave\", :date_range=&gt;{:start=&gt;\"1995-04-01\", :end=&gt;\"1997-08-01\"}}, {:title=&gt;\"Transport Consultant\", :organization=&gt;\"Sir Alexander Gibb and Part\", :date_range=&gt;{:start=&gt;\"1990-01-01\", :end=&gt;\"1995-12-31\"}}], :educations=&gt;[{:school=&gt;\"U. of London\"}, {:school=&gt;\"University College London, U. of London\", :date_range=&gt;{:start=&gt;\"1987-01-01\", :end=&gt;\"1990-12-31\"}}], :usernames=&gt;[{:content=&gt;\"alistair.gordon.75\"}], :user_ids=&gt;[{:content=&gt;\"5/238/746@linkedin\"}, {:content=&gt;\"538818605@facebook\"}, {:content=&gt;\"15504678@linkedin\"}]} \n</code></pre>\n\n<h2><a href=\"https://repl.it/Bbz0/0\" rel=\"nofollow noreferrer\">DEMO</a></h2>\n\n<p><strong>Note:</strong> as Drenmi commented I also agree with There are <strong><a href=\"https://stackoverflow.com/questions/637421/is-eval-supposed-to-be-nasty\">some security implications</a></strong> with using <code>eval</code> if possible avoid use of <code>eval</code> . I suggest if possible retrieved response in <code>json</code> instead of string.  It executes whatever it is passed, you must be <strong>110%</strong> sure (as in, at least no user input anywhere along the way) it would contain only properly formed hashes or unexpected bugs/horrible creatures from outer space might start popping up.</p>\n"}, {"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1452088982, "post_id": 34635005, "comment_id": 57014950, "body": "hey I didn&#39;t think of this. You rocks man. \\m/ This should be the accepted as answered. ;) 1+"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 11, "last_activity_date": 1452088908, "creation_date": 1452088908, "answer_id": 34635005, "question_id": 34633884, "link": "https://stackoverflow.com/questions/34633884/string-to-hash-of-hashes-arrays/34635005#34635005", "title": "String to Hash of Hashes/Arrays", "body": "<p>You could try to convert the format to JSON by replacing <code>:key=&gt;</code> with <code>\"key\":</code>:</p>\n\n<pre><code>str.gsub!(/:(\\w+)=&gt;/, '\"\\1\":')\n#=&gt; \"{\\\"gender\\\":{\\\"content\\\":\\\"male\\\"}, \\\"names\\\":[{\\\"first\\\":\\\"Atair\\\", ...\n</code></pre>\n\n<p>And parse it as usual:</p>\n\n<pre><code>require 'json'\nJSON.parse(str, symbolize_names: true)\n#=&gt; {:gender=&gt;{:content=&gt;\"male\"}, :names=&gt;[{:first=&gt;\"Atair\", ...\n</code></pre>\n"}], "owner": {"reputation": 2055, "user_id": 2716092, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/93305428cde3eb1e7c3eed694e5a23c7?s=128&d=identicon&r=PG", "display_name": "Mikhail Chuprynski", "link": "https://stackoverflow.com/users/2716092/mikhail-chuprynski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 34634127, "answer_count": 2, "score": 2, "last_activity_date": 1452143305, "creation_date": 1452085449, "last_edit_date": 1452086348, "question_id": 34633884, "link": "https://stackoverflow.com/questions/34633884/string-to-hash-of-hashes-arrays", "title": "String to Hash of Hashes/Arrays", "body": "<p>I have this string which I need to convert to to a Hash :</p>\n\n<pre><code>str = '{:gender=&gt;{:content=&gt;\"male\"}, :names=&gt;[{:first=&gt;\"Atair\", :last=&gt;\"Goron\"}], :addresses=&gt;[{:country=&gt;\"GB\", :state=&gt;\"ENG\", :city=&gt;\"London\"}], :emails=&gt;[{:address=&gt;\"agoron@keolis.com\", :address_md5=&gt;\"971b2fd0b83c900a5ca62c91dab80dd9\"}, {:address=&gt;\"atair.godon.75@facebook.com\", :address_md5=&gt;\"a0d958c1396300a344356d57b6836f9e\"}], :jobs=&gt;[{:title=&gt;\"Chief Executive Officer\", :organization=&gt;\"Kolis UK and Eire\"}, {:title=&gt;\"Deputy Managing Director\", :organization=&gt;\"Kolis UK\", :date_range=&gt;{:start=&gt;\"2008-04-01\", :end=&gt;\"2010-04-01\"}}, {:title=&gt;\"Project Director\", :organization=&gt;\"Keolis UK\", :date_range=&gt;{:start=&gt;\"2004-04-01\", :end=&gt;\"2008-04-01\"}}, {:title=&gt;\"Strategic Planning Director\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"2002-04-01\", :end=&gt;\"2004-04-01\"}}, {:title=&gt;\"Commercial Director, Business Markets\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"1999-11-01\", :end=&gt;\"2002-04-01\"}}, {:title=&gt;\"Brand Manager\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"1998-06-01\", :end=&gt;\"1999-11-01\"}}, {:title=&gt;\"Business Forecasting Manager\", :organization=&gt;\"Eurostar\", :date_range=&gt;{:start=&gt;\"1997-08-01\", :end=&gt;\"1998-06-01\"}}, {:title=&gt;\"Principal Consultant\", :organization=&gt;\"Steer Davies Gleave\", :date_range=&gt;{:start=&gt;\"1995-04-01\", :end=&gt;\"1997-08-01\"}}, {:title=&gt;\"Transport Consultant\", :organization=&gt;\"Sir Alexander Gibb and Part\", :date_range=&gt;{:start=&gt;\"1990-01-01\", :end=&gt;\"1995-12-31\"}}], :educations=&gt;[{:school=&gt;\"U. of London\"}, {:school=&gt;\"University College London, U. of London\", :date_range=&gt;{:start=&gt;\"1987-01-01\", :end=&gt;\"1990-12-31\"}}], :usernames=&gt;[{:content=&gt;\"alistair.gordon.75\"}], :user_ids=&gt;[{:content=&gt;\"5/238/746@linkedin\"}, {:content=&gt;\"538818605@facebook\"}, {:content=&gt;\"15504678@linkedin\"}]}'\n</code></pre>\n\n<p>I have floating number of keys, each key value can be either a string, array, hash or hash of hashes</p>\n\n<p>Is there way to convert it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "haml", "railstutorial.org"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 3553788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dAkqg.jpg?s=128&g=1", "display_name": "Matthew Jaeger", "link": "https://stackoverflow.com/users/3553788/matthew-jaeger"}, "edited": false, "score": 0, "creation_date": 1452092127, "post_id": 34635166, "comment_id": 57017173, "body": "nope, changing that didn&#39;t help and the brackets for methods in ruby are optional so render &#39;users/unfollow&#39; == render(&#39;users/unfollow&#39;)"}, {"owner": {"reputation": 569, "user_id": 3770055, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f6dae6771242b5d2dfc9f692a71cc0f5?s=128&d=identicon&r=PG&f=1", "display_name": "Zoinks10", "link": "https://stackoverflow.com/users/3770055/zoinks10"}, "reply_to_user": {"reputation": 49, "user_id": 3553788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dAkqg.jpg?s=128&g=1", "display_name": "Matthew Jaeger", "link": "https://stackoverflow.com/users/3553788/matthew-jaeger"}, "edited": false, "score": 0, "creation_date": 1452128056, "post_id": 34635166, "comment_id": 57036909, "body": "Is the follow_form div closed out with a &lt;/div&gt; correctly? Sometimes I&#39;ve had similar behaviour when I&#39;ve not quite setup the DOM correctly."}, {"owner": {"reputation": 49, "user_id": 3553788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dAkqg.jpg?s=128&g=1", "display_name": "Matthew Jaeger", "link": "https://stackoverflow.com/users/3553788/matthew-jaeger"}, "edited": false, "score": 0, "creation_date": 1452186291, "post_id": 34635166, "comment_id": 57067384, "body": "yup thx a lot ! that was the problem, i put that renders out of a div"}], "tags": [], "owner": {"reputation": 569, "user_id": 3770055, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f6dae6771242b5d2dfc9f692a71cc0f5?s=128&d=identicon&r=PG&f=1", "display_name": "Zoinks10", "link": "https://stackoverflow.com/users/3770055/zoinks10"}, "is_accepted": true, "score": 0, "last_activity_date": 1452089357, "creation_date": 1452089357, "answer_id": 34635166, "question_id": 34633575, "link": "https://stackoverflow.com/questions/34633575/ajax-escape-javascript-method-does-not-delete-previous-rendered-partial-in-rails/34635166#34635166", "title": "Ajax escape_javascript method does not delete previous rendered partial in Rails", "body": "<p>According to the <a href=\"https://www.railstutorial.org/book/following_users\" rel=\"nofollow\">chapter where this feature is described</a> you aren't quite using the right syntax for the render call. It should be:</p>\n\n<pre><code>$(\"#follow_form\").html(\"&lt;%= escape_javascript(render('users/unfollow')) %&gt;\");\n$(\"#followers\").html('&lt;%= @user.followers.count %&gt;');\n</code></pre>\n\n<p>Note the extra brackets after the render call that wraps around 'users/unfollow' - the same is true for your other call:</p>\n\n<pre><code>$(\"#follow_form\").html(\"&lt;%= escape_javascript(render('users/follow')) %&gt;\");\n$(\"#followers\").html('&lt;%= @user.followers.count %&gt;');  \n</code></pre>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 49, "user_id": 3553788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dAkqg.jpg?s=128&g=1", "display_name": "Matthew Jaeger", "link": "https://stackoverflow.com/users/3553788/matthew-jaeger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "accepted_answer_id": 34635166, "answer_count": 1, "score": 0, "last_activity_date": 1452089357, "creation_date": 1452084536, "last_edit_date": 1452088217, "question_id": 34633575, "link": "https://stackoverflow.com/questions/34633575/ajax-escape-javascript-method-does-not-delete-previous-rendered-partial-in-rails", "title": "Ajax escape_javascript method does not delete previous rendered partial in Rails", "body": "<p>I'm new in Ruby on Rails so I decided to do railstutorial.org's tutorial. I stuck on chapter 12, listing 12.37-38. I converted all html.erb files into html.haml (in chapter 7). I want Ajax to replace partials after clicking Follow/Unfollow button but right now when I click e.g. Follow button, Unfollow button is appearing above Follow and this Follow button is not disappearing. </p>\n\n<p>Sth like that: <a href=\"http://i.imgur.com/RjwTsUU.png\" rel=\"nofollow\">http://i.imgur.com/RjwTsUU.png</a>. </p>\n\n<p>After that when I'm clicking on upper button it successfully replaces rendering of Follow/Unfollow partials but the button above(in this case Follow) will be visible until page is refreshed. What I am doing wrong?</p>\n\n<p>destroy.js.erb:</p>\n\n<pre><code>$(\"#follow_form\").html(\"&lt;%= escape_javascript(render 'users/follow' ) %&gt;\");\n$(\"#followers\").html('&lt;%= @user.followers.count %&gt;');\n</code></pre>\n\n<p>create.js.erb:</p>\n\n<pre><code>$(\"#follow_form\").html(\"&lt;%= escape_javascript(render 'users/unfollow' ) %&gt;\");\n$(\"#followers\").html('&lt;%= @user.followers.count %&gt;');\n</code></pre>\n\n<p>show.html.haml:</p>\n\n<pre><code>- provide(:title, @user.name)\n.row\n  %aside.col-md-4\n    %section.user_info\n      %h1 \n        = gravatar_for @user\n        = @user.name\n    %section.stats\n      = render 'shared/stats'\n  .col-md-8\n    = render 'follow_form' if logged_in?\n    - if @user.microposts.any?\n      %h3 \n        Microposts (#{@user.microposts.count})\n      %ol.microposts\n        = render @microposts\n      = will_paginate @microposts\n</code></pre>\n\n<p>follow_form partial:</p>\n\n<pre><code>- unless current_user?(@user)\n  %div#follow_form\n  - if current_user.following?(@user)\n    = render 'unfollow'\n  - else\n    = render 'follow'\n</code></pre>\n\n<p>unfollow partial:</p>\n\n<pre><code>= form_for(current_user.active_relationships.find_by(followed_id: @user.id), html: { method: :delete}, remote: true) do |f| \n  = f.submit \"Unfollow\", class: \"btn\"\n</code></pre>\n\n<p>follow partial:</p>\n\n<pre><code>= form_for(current_user.active_relationships.build, remote: true) do |f| \n  %div\n    = hidden_field_tag :followed_id, @user.id\n  = f.submit \"Follow\", class: \"btn btn-primary\"\n</code></pre>\n\n<p>relationships_controller.rb:</p>\n\n<pre><code>class RelationshipsController &lt; ApplicationController\n  before_action :logged_in_user\n\n  def create\n    @user = User.find(params[:followed_id])\n    current_user.follow(@user)\n    respond_to do |format|\n      format.html { redirect_to @user }\n      format.js\n    end \n  end \n\n  def destroy\n    @user = Relationship.find(params[:id]).followed\n    current_user.unfollow(@user)\n    respond_to do |format|\n      format.html { redirect_to @user }\n      format.js\n    end \n  end \nend\n</code></pre>\n"}, {"tags": ["ruby", "apache", "rest", "server", "sinatra"], "comments": [{"owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 0, "creation_date": 1452081031, "post_id": 34631278, "comment_id": 57009859, "body": "Have you tried starting the sinatra app with -o 0.0.0.0 (like ruby test.rb -o 0.0.0.0) ? This would bind it to the machine&#39;s IP address, and should allow access via &lt;ip&gt;:4567"}], "answers": [{"tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": true, "score": 2, "last_activity_date": 1452098656, "creation_date": 1452098656, "answer_id": 34638265, "question_id": 34631278, "link": "https://stackoverflow.com/questions/34631278/how-do-i-go-about-setting-up-my-sinatra-rest-api-on-a-server/34638265#34638265", "title": "How do I go about setting up my Sinatra REST API on a server?", "body": "<blockquote>\n  <p>bit of research lead me to discovering I need Passenger and an Apache HTTP Server to be setup, and not with simple instructions.</p>\n</blockquote>\n\n<p>Ignore that for now. Take baby steps first. You should be able to run your Sinatra app from the command line on the DigitalOcean droplet, and then access it via <code>droplet.ip.address:4567</code>. If that doesn't work something very fundamental is wrong.</p>\n\n<p>When you start your app, you will see what address and port the app is listening on. Make sure it's <code>0.0.0.0</code> and 4567. If it's <code>127.0.0.1</code> or <code>localhost</code> that means it will only service requests originating from the same machine</p>\n\n<p>After you get this working, next step is to make your Sinatra app into a service. Essentially this means the app runs in the background, and auto-starts when the system reboots. Look into <a href=\"http://supervisord.org/\" rel=\"nofollow\">Supervisor</a> which is very simple configuration to get this running.</p>\n\n<p>Later you can install Apache or Nginx to put in front of your Sinatra app. These are proxies which simply forward requests from port 80 (default HTTP port) to your sinatra app, but can do additional things such as add SSL support, load balancing, custom error pages etc. - all of which you do not need right now.</p>\n"}], "owner": {"reputation": 6963, "user_id": 2876236, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9716bf63b6c9bc35262fa084f1c90ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2876236/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 34638265, "answer_count": 1, "score": 2, "last_activity_date": 1452098656, "creation_date": 1452077473, "question_id": 34631278, "link": "https://stackoverflow.com/questions/34631278/how-do-i-go-about-setting-up-my-sinatra-rest-api-on-a-server", "title": "How do I go about setting up my Sinatra REST API on a server?", "body": "<p>I'm an iOS developer primarily. In building my current app, I needed a server that would have a REST API with a couple of GET requests. I spent a little time learning Ruby, and landed on using Sinatra, a simple web framework. I can run my server script, and access it from a browser at <code>localhost:4567</code>, with a request then being <code>localhost:4567/hello</code>, as an example.</p>\n\n<p>Here's where I feel out of my depth. I setup an Ubuntu droplet at DigitalOcean, and felt my way around to setting up all necessary tools via command line, until I could again run my server, now on this droplet.</p>\n\n<p>The problem then is that I couldn't then access my server via <code>droplet.ip.address:4567</code>, and a bit of research lead me to discovering I need Passenger and an Apache HTTP Server to be setup, and <a href=\"https://www.digitalocean.com/community/tutorials/how-to-deploy-sinatra-based-ruby-web-applications-on-ubuntu-13\" rel=\"nofollow\">not with simple instructions</a>.</p>\n\n<p>I'm way in over my head here, and I don't feel comfortable. There must be a better way for me to take my small group of ruby files and run this on a server, than me doing this. But I have no idea what I'm doing.</p>\n\n<p>Any help or advice would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "actionmailer", "premailer"], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 2531612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21b76014033c1fd46126bb5ffcf27087?s=128&d=identicon&r=PG", "display_name": "theJoker", "link": "https://stackoverflow.com/users/2531612/thejoker"}, "is_accepted": true, "score": 0, "last_activity_date": 1452082144, "creation_date": 1452082144, "answer_id": 34632807, "question_id": 34631123, "link": "https://stackoverflow.com/questions/34631123/not-able-to-load-images-in-mails-using-premailer-rails/34632807#34632807", "title": "not able to load images in mails using premailer-rails", "body": "<p>The Real Problem was that gmail servers were not taking the http request and hence images were not rendering correctly. </p>\n\n<p>I added the SSL certificates locally so that I can access https:\\localhost:3000 and solved my problem.</p>\n"}], "owner": {"reputation": 55, "user_id": 2531612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21b76014033c1fd46126bb5ffcf27087?s=128&d=identicon&r=PG", "display_name": "theJoker", "link": "https://stackoverflow.com/users/2531612/thejoker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 34632807, "answer_count": 1, "score": 0, "last_activity_date": 1452082144, "creation_date": 1452077003, "question_id": 34631123, "link": "https://stackoverflow.com/questions/34631123/not-able-to-load-images-in-mails-using-premailer-rails", "title": "not able to load images in mails using premailer-rails", "body": "<p>I am using premailer-rails latest version gem to send HTML mail , but it is not able to load the images from  my localhost. </p>\n\n<p>I already added : config.action_mailer.asset_host     = '<a href=\"http://localhost:3000/\" rel=\"nofollow\">http://localhost:3000/</a>' in my ENV files. </p>\n\n<p>Please suggest if anything is missing.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1452077296, "post_id": 34630930, "comment_id": 57007608, "body": "Have you tried the <a href=\"https://developer.mozilla.org/en/docs/Web/CSS/%3Aempty\" rel=\"nofollow noreferrer\"><code>:empty</code> pseudo class</a>? <code>doc.css(&#39;:empty&#39;)</code> should work."}], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 0, "last_activity_date": 1452793877, "last_edit_date": 1452793877, "creation_date": 1452791023, "answer_id": 34795455, "question_id": 34630930, "link": "https://stackoverflow.com/questions/34630930/how-to-find-empty-closing-tags-in-nokogiri/34795455#34795455", "title": "How to find empty closing tags in Nokogiri?", "body": "<p>This is a great place for a recursive traversal. Starting at the document root, you can walk children depth-first, cleaning them as you go. If a child has no content, remove it.</p>\n\n<pre><code>def clean(node)\n  node.children.each do |child|\n    clean(child)\n    child.remove if child.content.gsub(/\\s+/, '').empty?\n  end\nend\n</code></pre>\n\n<p>You get your wish for part (2) by cleaning the child before removing it - that ensures <code>&lt;Review1&gt;</code> is found and removed before <code>&lt;Reviews&gt;</code> is considered. If you didn't want to remove now-empty parents, you would swap those lines.</p>\n\n<p>Because your document is formatted for humans to read, lots of nodes contain text nodes with whitespace in them, so the <code>gsub</code> cleans that out before considering emptiness.</p>\n\n<p>On your input, this ends up with:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;Authors&gt;\n  &lt;Name&gt;A Name&lt;/Name&gt;\n  &lt;Titles&gt;\n    &lt;Title1&gt;A Book&lt;/Title1&gt;\n  &lt;/Titles&gt;\n&lt;/Authors&gt;\n</code></pre>\n"}], "owner": {"reputation": 406, "user_id": 4482286, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sl_16MRc3EQ/AAAAAAAAAAI/AAAAAAAAAJ4/OjoaYnwT9HU/photo.jpg?sz=128", "display_name": "RossMc", "link": "https://stackoverflow.com/users/4482286/rossmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "accepted_answer_id": 34795455, "answer_count": 1, "score": 0, "last_activity_date": 1452793877, "creation_date": 1452076403, "last_edit_date": 1452723223, "question_id": 34630930, "link": "https://stackoverflow.com/questions/34630930/how-to-find-empty-closing-tags-in-nokogiri", "title": "How to find empty closing tags in Nokogiri?", "body": "<p>I have a few questions relating to Nokogiri in Ruby.</p>\n\n<p>I have an Nokogiri XML document which contains some empty closing tags. Some of these can be nested several levels deep.</p>\n\n<p>For example;</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Authors&gt;\n     &lt;Name&gt;A Name&lt;/Name&gt;\n     &lt;Titles&gt;\n          &lt;Title1&gt;A Book&lt;/Title1&gt;\n          &lt;Title2/&gt;\n     &lt;/Titles&gt;\n     &lt;Reviews&gt;\n          &lt;Review1/&gt;\n     &lt;/Reviews&gt;\n &lt;/Authors&gt;\n</code></pre>\n\n<ol>\n<li><p>Does anyone know a simple way to be able to find these nested empty tags? Or can anyone help with the simplest way to navigate the document to find these elements?</p></li>\n<li><p>Also, in the case of the <code>&lt;Review&gt;</code> tags, when I find and remove <code>&lt;Review1/&gt;</code>, is there a simple way to check that there are no other siblings and remove the parent tags, which will now contain no other elements?</p></li>\n</ol>\n"}, {"tags": ["ruby", "orm", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "edited": false, "score": 0, "creation_date": 1452221329, "post_id": 34661902, "comment_id": 57083203, "body": "Jeremy, that&#39;s what I ended up doing (many-to-many with a composite primary key). Unfortunately, can&#39;t change the existing schema."}, {"owner": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "edited": false, "score": 1, "creation_date": 1452221716, "post_id": 34661902, "comment_id": 57083292, "body": "On a side note, I must thank you for creating your gem of a gem, but even more so, for your time, effort and commitment to your product. You&#39;re always quick to reply to all Sequel-related questions (this is the 3rd time you&#39;ve personally answered one of mine on SO, and a few times before on the mailing list). I just want you to know that your support and commitment does not go unappreciated, and many developers I know (myself included) swear by Sequel over ActiveRecord or DataMapper. Keep up the amazing work, we are all thankful to you for it!"}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1452189133, "creation_date": 1452189133, "answer_id": 34661902, "question_id": 34630581, "link": "https://stackoverflow.com/questions/34630581/possible-to-use-one-to-many-through-associations-in-sequel-orm/34661902#34661902", "title": "Possible to use `one_to_many_through` associations in Sequel ORM?", "body": "<p>With your current schema, you just want to use a many_to_many association to files:</p>\n\n<pre><code>Client.many_to_many :files\nInvoice.many_to_many :files\n</code></pre>\n\n<p>To make sure each file can only have a single client/invoice, you can make file_id the primary key of clients_files and files_invoices (a plain unique constraint/index would also work).  Then you can use one_through_one:</p>\n\n<pre><code>File.one_through_one :client\nFile.one_through_one :invoice\n</code></pre>\n\n<p>Note that this still allows a File to be associated to both a client and an invoice.  If you want to prevent that, you need to change your schema. You could move the client_id and invoice_id foreign keys to the files table (or use a single join table with both keys), and have a check constraint that checks that only one of them is set.</p>\n\n<p>Note that the main reason to avoid polymorphic keys (in addition to complexity), is that it allows the database to enforce referential integrity.  With your current join tables, you aren't creating foreign keys, just integer fields, so you aren't enforcing referential integrity.</p>\n"}], "owner": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "accepted_answer_id": 34661902, "answer_count": 1, "score": 2, "last_activity_date": 1452189133, "creation_date": 1452075348, "question_id": 34630581, "link": "https://stackoverflow.com/questions/34630581/possible-to-use-one-to-many-through-associations-in-sequel-orm", "title": "Possible to use `one_to_many_through` associations in Sequel ORM?", "body": "<p>I have a case where one model is related 2 other ones. I am trying to correctly setup the model relationships between these 3 models.</p>\n\n<p>A simplified example... The first 2 tables are <code>clients</code> and <code>invoices</code>:</p>\n\n<pre><code>db.create_table(:clients) do\n    primary_key :id\n    String :name\nend\n\ndb.create_table(:invoices) do\n    primary_key :id\n    String :description\n    Integer :balance\nend\n</code></pre>\n\n<p>A third table, called <code>files</code>, contains records for files which can be related to either <code>clients</code> or <code>invoices</code>:</p>\n\n<pre><code>db.create_table(:files) do\n    primary_key :id\n    String :name\n    String :path\n    String :type # [image, pdf, word, excel]\nend\n</code></pre>\n\n<p>There are 2 joiner tables to connect <code>files</code> to <code>clients</code> and <code>invoices</code>:</p>\n\n<pre><code>db.create_table(:clients_files) do\n    Integer :client_id\n    Integer :file_id\nend\n\ndb.create_table(:files_invoices) do\n    Integer :invoice_id\n    Integer :file_id\nend\n</code></pre>\n\n<p>The question is, how to correctly set up the relationships in the models, such that each <code>client</code> and <code>invoice</code> can have one or more related <code>files</code>?</p>\n\n<p>I <em>can</em> accomplish this using <code>many_to_many</code> and <code>has_many :through</code> associations, however, this doesn't seem to be the right approach, because a given <code>file</code> can belong to only one <code>customer</code> or <code>invoice</code>, not to many.</p>\n\n<p>I can also do this using polymorphism, but the <a href=\"http://sequel.jeremyevans.net/rdoc/files/doc/advanced_associations_rdoc.html#label-Polymorphic+Associations\" rel=\"nofollow\">documentation discourages this approach</a>: </p>\n\n<blockquote>\n  <p>Sequel discourages the use of polymorphic associations, which is the\n  reason they are not supported by default. All polymorphic associations\n  can be made non-polymorphic by using additional tables and/or columns\n  instead of having a column containing the associated class name as a\n  string.</p>\n  \n  <p>Polymorphic associations break referential integrity and are\n  significantly more complex than non-polymorphic associations, so their\n  use is not recommended unless you are stuck with an existing design\n  that uses them.</p>\n</blockquote>\n\n<p>The more correct association would be <code>one_to_many_through</code> or <code>many_to_one_through</code>, but I can't find the right way to do this. Is there a vanilla Sequel way to achieve this, or is there a model plugin that provides this functionality?  </p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 2, "creation_date": 1452073717, "post_id": 34629968, "comment_id": 57005328, "body": "You need to add some more information.  Eg, did you successfully upgrade MYSQL?  Did you restart MYSQL after upgrading it?  Is your rails server running?  Can your rails server connect to mysql?  (Test this in the console)"}, {"owner": {"reputation": 83063, "user_id": 2310830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6rM1.png?s=128&g=1", "display_name": "RiggsFolly", "link": "https://stackoverflow.com/users/2310830/riggsfolly"}, "edited": false, "score": 0, "creation_date": 1452073860, "post_id": 34629968, "comment_id": 57005415, "body": "Welcome to SO. Please read <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask a good question</a> And <a href=\"http://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">the perfect question</a>"}, {"owner": {"reputation": 165, "user_id": 4608351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ca15ba43fede05475e652e101c3a72?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Cindy", "link": "https://stackoverflow.com/users/4608351/nguyen-cindy"}, "edited": false, "score": 0, "creation_date": 1452074068, "post_id": 34629968, "comment_id": 57005555, "body": "Sorry, my question is, when I stop mysql server and start rails server I can not access any url. I know this error is <code>Can&#39;t connect to local MySQL server... </code>. But I want to know why it have an error? Although this url do not need to query to Mysql server."}], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 2, "last_activity_date": 1452074783, "creation_date": 1452074783, "answer_id": 34630383, "question_id": 34629968, "link": "https://stackoverflow.com/questions/34629968/can-not-access-server-when-stop-mysql/34630383#34630383", "title": "Can not access server when stop mysql", "body": "<p>By default, Rails tries to connect to the database server when it boots. Therefore, if you stop your database server, you can't start your Rails application.</p>\n\n<p>As long as ActiveRecord is loaded or used, that's the default behavior.</p>\n"}], "owner": {"reputation": 165, "user_id": 4608351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ca15ba43fede05475e652e101c3a72?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Cindy", "link": "https://stackoverflow.com/users/4608351/nguyen-cindy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1452074783, "creation_date": 1452073565, "last_edit_date": 1452074363, "question_id": 34629968, "link": "https://stackoverflow.com/questions/34629968/can-not-access-server-when-stop-mysql", "title": "Can not access server when stop mysql", "body": "<p>I have used mysql as adapter of rails application. I want to upgrade mysql server so I stop and upgrade it. Why I do not access any url while upgrade it? Although this url can not need to query to Mysql server?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"reputation": 1967, "user_id": 4124416, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JPPQT.png?s=128&g=1", "display_name": "turkenh", "link": "https://stackoverflow.com/users/4124416/turkenh"}, "edited": false, "score": 0, "creation_date": 1452076473, "post_id": 34629784, "comment_id": 57007059, "body": "Which &quot;system&quot; do you mean ? Server, Node or Workstation ? On server checked, and it returned Chef: 11.18.12. Then I run &quot;sudo apt-get install chef&quot; and now it is returning Chef:12.6.0. But the problem still persists."}, {"owner": {"reputation": 1967, "user_id": 4124416, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JPPQT.png?s=128&g=1", "display_name": "turkenh", "link": "https://stackoverflow.com/users/4124416/turkenh"}, "edited": false, "score": 0, "creation_date": 1452081754, "post_id": 34629784, "comment_id": 57010255, "body": "On both node and server, there was a previous installation of Chef-solo, with version 11.x. I uninstalled them and installed latest Chef package with apt-get. But still getting same errors. I think, node or server, still uses an old version of something ..."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1452073089, "creation_date": 1452073089, "answer_id": 34629784, "question_id": 34629419, "link": "https://stackoverflow.com/questions/34629419/chef-server-12-and-client-12-error-503-service-unavailable/34629784#34629784", "title": "Chef server 12 and Client 12 - Error 503: Service unavailable", "body": "<p>You probably have an old version of <code>knife</code> on your system. Run <code>knife --version</code> to confirm, you should see that it will be an older 11.x version. Track down where that copy is coming from (<code>which knife</code> or <code>type -a knife</code>) and remove it. This usually means uninstalling the gem from a pre-existing Ruby environment like RVM.</p>\n"}, {"tags": [], "owner": {"reputation": 1967, "user_id": 4124416, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JPPQT.png?s=128&g=1", "display_name": "turkenh", "link": "https://stackoverflow.com/users/4124416/turkenh"}, "is_accepted": true, "score": 2, "last_activity_date": 1452797727, "creation_date": 1452797727, "answer_id": 34797520, "question_id": 34629419, "link": "https://stackoverflow.com/questions/34629419/chef-server-12-and-client-12-error-503-service-unavailable/34797520#34797520", "title": "Chef server 12 and Client 12 - Error 503: Service unavailable", "body": "<p>I finally figured out the issue. \nI am behind a corporate proxy and the error I got \"503: Service Unavailable\" is not something coming from Chef Server, rather it is coming from the proxy server :(\nAnyway, using \"no_proxy\" option and adding Chef Server's fqdn solved the issue. \nYes, this still does not answer the question how it works with chef client v11.x, but I am sure that this solved the issue :)</p>\n"}], "owner": {"reputation": 1967, "user_id": 4124416, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JPPQT.png?s=128&g=1", "display_name": "turkenh", "link": "https://stackoverflow.com/users/4124416/turkenh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2691, "favorite_count": 1, "accepted_answer_id": 34797520, "answer_count": 2, "score": 0, "last_activity_date": 1452797727, "creation_date": 1452071910, "question_id": 34629419, "link": "https://stackoverflow.com/questions/34629419/chef-server-12-and-client-12-error-503-service-unavailable", "title": "Chef server 12 and Client 12 - Error 503: Service unavailable", "body": "<p>I have a standalone Chef server hosted on a Ubuntu 14.04 machine. Installed the server by following <a href=\"https://learn.chef.io/install-and-manage-your-own-chef-server/linux/\" rel=\"nofollow\">https://learn.chef.io/install-and-manage-your-own-chef-server/linux/</a> by using latest versions.</p>\n\n<p>When I tried to bootstrap a node, it installs client version 11.x and works. But most of the cookbooks in the market is not compatible to client 11 and requires client 12.x. </p>\n\n<p>So, I supplied client version 12.x as parameter to my bootstrap command, which installs client version 12.x to the node to bootstrap. But this time I got HTTP 503 - 503 \"Service Unavailable\" error and not able to complete bootstrapping.</p>\n\n<p>My Workstation (Mac 10.11.1)</p>\n\n<pre><code>$chef --version\nChef Development Kit Version: 0.10.0\nchef-client version: 12.5.1\nberks version: 4.0.1\nkitchen version: 1.4.2\n</code></pre>\n\n<p>My Server (Ubuntu 14.04.2)</p>\n\n<pre><code>$ dpkg --status chef\nPackage: chef\nStatus: install ok installed\nPriority: extra\nSection: misc\nInstalled-Size: 107919\nMaintainer: Chef Software, Inc. &lt;maintainers@chef.io&gt;\nArchitecture: amd64\nVersion: 11.18.12-1\nDescription: The full stack of chef\nLicense: unknown\nVendor: Omnibus &lt;omnibus@getchef.com&gt;\nHomepage: https://www.getchef.com\n$ dpkg --status chef-server-core\nPackage: chef-server-core\nStatus: install ok installed\nPriority: extra\nSection: misc\nInstalled-Size: 1190291\nMaintainer: Chef Software, Inc.\nArchitecture: amd64\nVersion: 12.3.1-1\nReplaces: private-chef\nConflicts: private-chef\nDescription: The full stack of chef-server\nLicense: unknown\nVendor: Omnibus &lt;omnibus@getchef.com&gt;\nHomepage: https://www.chef.io\n</code></pre>\n\n<p>Node (Ubuntu 14.04.2)</p>\n\n<pre><code>$ chef-client -v\nChef: 12.6.0\n</code></pre>\n\n<p>Here is the error:</p>\n\n<pre><code>Connecting to &lt;nodes_ip&gt;\n10.97.151.49 -----&gt; Existing Chef installation detected\n10.97.151.49 Starting the first Chef Client run...\n10.97.151.49 Starting Chef Client, version 12.6.0\n10.97.151.49 Creating a new client identity for web_app_ubuntu using the validator key.\n10.97.151.49 [2015-12-25T14:50:47+00:00] WARN: Failed to register new client, 4 tries remaining\n10.97.151.49 [2015-12-25T14:50:47+00:00] WARN: Response: HTTP 503 - 503 \"Service Unavailable\"\n10.97.151.49 [2015-12-25T14:52:26+00:00] WARN: Failed to register new client, 3 tries remaining\n10.97.151.49 [2015-12-25T14:52:26+00:00] WARN: Response: HTTP 503 - 503 \"Service Unavailable\"\n10.97.151.49 [2015-12-25T14:54:15+00:00] WARN: Failed to register new client, 2 tries remaining\n10.97.151.49 [2015-12-25T14:54:15+00:00] WARN: Response: HTTP 503 - 503 \"Service Unavailable\"\n10.97.151.49 [2015-12-25T14:56:01+00:00] WARN: Failed to register new client, 1 tries remaining\n10.97.151.49 [2015-12-25T14:56:01+00:00] WARN: Response: HTTP 503 - 503 \"Service Unavailable\"\n10.97.151.49 [2015-12-25T14:57:48+00:00] WARN: Failed to register new client, 0 tries remaining\n10.97.151.49 [2015-12-25T14:57:48+00:00] WARN: Response: HTTP 503 - 503 \"Service Unavailable\"\n10.97.151.49\n10.97.151.49 Running handlers:\n10.97.151.49 [2015-12-25T14:59:36+00:00] ERROR: Running exception handlers\n10.97.151.49 Running handlers complete\n10.97.151.49 [2015-12-25T14:59:36+00:00] ERROR: Exception handlers complete\n10.97.151.49 Chef Client failed. 0 resources updated in 10 minutes 38 seconds\n10.97.151.49 [2015-12-25T14:59:36+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out\n10.97.151.49 [2015-12-25T14:59:36+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\n10.97.151.49 [2015-12-25T14:59:36+00:00] ERROR: undefined method `closed?' for nil:NilClass\n10.97.151.49 [2015-12-25T14:59:36+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\n</code></pre>\n\n<p>Finally the stack trace at /var/chef/cache/chef-stacktrace.out</p>\n\n<pre><code>Generated at 2015-12-25 16:02:37 +0000\nNoMethodError: undefined method `closed?' for nil:NilClass\n/opt/chef/embedded/lib/ruby/2.1.0/net/http/response.rb:325:in `stream_check'\n/opt/chef/embedded/lib/ruby/2.1.0/net/http/response.rb:199:in `read_body'\n/opt/chef/embedded/lib/ruby/2.1.0/net/http/response.rb:226:in `body'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/formatters/error_inspectors/registration_error_inspector.rb:139:in `rescue in format_rest_error'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/formatters/error_inspectors/registration_error_inspector.rb:137:in `format_rest_error'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/formatters/error_inspectors/registration_error_inspector.rb:108:in `humanize_http_exception'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/formatters/error_inspectors/registration_error_inspector.rb:27:in `add_explanation'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/formatters/error_mapper.rb:32:in `registration_failed'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/formatters/base.rb:114:in `registration_failed'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/event_dispatch/dispatcher.rb:43:in `call'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/event_dispatch/dispatcher.rb:43:in `block in call_subscribers'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/event_dispatch/dispatcher.rb:34:in `each'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/event_dispatch/dispatcher.rb:34:in `call_subscribers'\n(eval):2:in `registration_failed'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/client.rb:623:in `rescue in register'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/client.rb:603:in `register'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/client.rb:255:in `run'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/application.rb:261:in `block in fork_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/application.rb:249:in `fork'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/application.rb:249:in `fork_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/application.rb:215:in `block in run_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/local_mode.rb:44:in `with_server_connectivity'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/application.rb:203:in `run_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/application/client.rb:413:in `block in interval_run_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/application/client.rb:403:in `loop'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/application/client.rb:403:in `interval_run_chef_client'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/application/client.rb:393:in `run_application'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/lib/chef/application.rb:58:in `run'\n/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/chef-12.6.0/bin/chef-client:26:in `&lt;top (required)=\"\"&gt;'\n/usr/bin/chef-client:54:in `load'\n/usr/bin/chef-client:54:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1432, "user_id": 1306187, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7023dcf81c08dc35951f338aee158095?s=128&d=identicon&r=PG", "display_name": "Jaehyun Shin", "link": "https://stackoverflow.com/users/1306187/jaehyun-shin"}, "edited": false, "score": 2, "creation_date": 1452071282, "post_id": 34629173, "comment_id": 57003783, "body": "Just use day as parameter like <code>project&#47;days?day=1</code>"}, {"owner": {"reputation": 329, "user_id": 4112224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-hFw5rXmfl5Q/AAAAAAAAAAI/AAAAAAAAADk/xZAkY0JoWwE/photo.jpg?sz=128", "display_name": "Peter Nguyen", "link": "https://stackoverflow.com/users/4112224/peter-nguyen"}, "reply_to_user": {"reputation": 1432, "user_id": 1306187, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7023dcf81c08dc35951f338aee158095?s=128&d=identicon&r=PG", "display_name": "Jaehyun Shin", "link": "https://stackoverflow.com/users/1306187/jaehyun-shin"}, "edited": false, "score": 0, "creation_date": 1452072528, "post_id": 34629173, "comment_id": 57004530, "body": "Thank you, but I still want to have the url: <code>projects&#47;day-1</code>  for SEO sake and for other reasons. How about reducing code in index.html.erb?"}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 4112224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-hFw5rXmfl5Q/AAAAAAAAAAI/AAAAAAAAADk/xZAkY0JoWwE/photo.jpg?sz=128", "display_name": "Peter Nguyen", "link": "https://stackoverflow.com/users/4112224/peter-nguyen"}, "edited": false, "score": 0, "creation_date": 1452073318, "post_id": 34629765, "comment_id": 57005070, "body": "Thank you so much! Exellent code! You saved me 1,000 lines of code! :-))"}], "tags": [], "owner": {"reputation": 1432, "user_id": 1306187, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7023dcf81c08dc35951f338aee158095?s=128&d=identicon&r=PG", "display_name": "Jaehyun Shin", "link": "https://stackoverflow.com/users/1306187/jaehyun-shin"}, "is_accepted": true, "score": 2, "last_activity_date": 1452072996, "creation_date": 1452072996, "answer_id": 34629765, "question_id": 34629173, "link": "https://stackoverflow.com/questions/34629173/how-to-reduce-rails-code-efficiently/34629765#34629765", "title": "How to reduce rails code efficiently?", "body": "<p>routes</p>\n\n<pre><code>match 'projects/days/(:day)' =&gt; \"projects#day\", :via =&gt; [:get], as: \"day\"\n</code></pre>\n\n<p>views</p>\n\n<pre><code>day.html.erb\n\n&lt;% if current_user.speed? || current_user.admin? %&gt;\n  \"Display Day #{@day}\"\n&lt;% else %&gt;\n&lt;% unless current_user.day_count.nil? %&gt;\n  &lt;% if (Time.now.to_date - current_user.day_count.to_date).to_i + 1 &gt;= @day %&gt;\n    \"Display Day #{@day}\"\n  &lt;% else %&gt;\n    \"This project cannot open now. Please wait until day#{@day}!\"\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n  \n\n<p>controller</p>\n\n<pre><code>def day\n  @total_days = 5\n  @day = params[:day]\nend\n</code></pre>\n\n<p>index.html</p>\n\n<pre><code>&lt;% if current_user.speed? || current_user.admin? %&gt;\n  &lt;div class=\"day_tracking\"&gt;\n    &lt;% @total_days.each do |day| %&gt;\n    &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;&lt;%= day %&gt;&lt;/p&gt;&lt;/div&gt;\n  &lt;/div&gt;\n&lt;% else %&gt;\n  &lt;% unless current_user.day_count.nil? %&gt;\n    &lt;div class=\"day_tracking\"&gt;\n      &lt;% @total_days.each do |day| %&gt;\n        &lt;% if (Time.now.to_date - current_user.day_count.to_date).to_i + 1 &gt;= day %&gt;\n          &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;&lt;%= day %&gt;&lt;/p&gt;&lt;/div&gt;\n        &lt;% else %&gt;\n          &lt;div class=\"day_left\"&gt;&lt;span&gt;\u2718&lt;/span&gt;&lt;p&gt;&lt;%= day %&gt;&lt;/p&gt;&lt;/div&gt;\n        &lt;% end %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;  \n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You can like this. There are more refactoring point, It is just concept.</p>\n"}, {"comments": [{"owner": {"reputation": 329, "user_id": 4112224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-hFw5rXmfl5Q/AAAAAAAAAAI/AAAAAAAAADk/xZAkY0JoWwE/photo.jpg?sz=128", "display_name": "Peter Nguyen", "link": "https://stackoverflow.com/users/4112224/peter-nguyen"}, "edited": false, "score": 0, "creation_date": 1452075717, "post_id": 34630159, "comment_id": 57006575, "body": "Thank you, your code is concise. I&#39;ll implement it!"}], "tags": [], "owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "is_accepted": false, "score": 0, "last_activity_date": 1452074121, "creation_date": 1452074121, "answer_id": 34630159, "question_id": 34629173, "link": "https://stackoverflow.com/questions/34629173/how-to-reduce-rails-code-efficiently/34630159#34630159", "title": "How to reduce rails code efficiently?", "body": "<p>It can be easily re-factored. One of the main tenets of Ruby is the DRY principle and your design goes against it.</p>\n\n<p>Change your route according to this.</p>\n\n<pre><code>match 'projects/:days' =&gt; \"projects#show_project\", :via =&gt; [:get]\n</code></pre>\n\n<p>In your controller you should have this.</p>\n\n<pre><code>def show_project\nend\n</code></pre>\n\n<p>Transfer the business logic to the project model.</p>\n\n<pre><code>def has_access?(no_of_days)\n  return true if current_user.speed? || current_user.admin?\n  unless current_user.day_count.nil?\n    if (Time.now.to_date - current_user.day_count.to_date).to_i + 1 &gt;= no_of_days\n      true\n    else \n      false\n  end\nend\n</code></pre>\n\n<p>Now in your view its as simple as.</p>\n\n<pre><code> &lt;% if @project.has_access?(params[:days]) %&gt;\n   \"Display Day #{params[:days]}\"\n &lt;% else %&gt;\n   \"This project cannot open now. Please wait until day#{params[:days]}!\"\n &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 4112224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh5.googleusercontent.com/-hFw5rXmfl5Q/AAAAAAAAAAI/AAAAAAAAADk/xZAkY0JoWwE/photo.jpg?sz=128", "display_name": "Peter Nguyen", "link": "https://stackoverflow.com/users/4112224/peter-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 34629765, "answer_count": 2, "score": 1, "last_activity_date": 1452074121, "creation_date": 1452071011, "question_id": 34629173, "link": "https://stackoverflow.com/questions/34629173/how-to-reduce-rails-code-efficiently", "title": "How to reduce rails code efficiently?", "body": "<p>In Projects controller I have 5 methods:</p>\n\n<pre><code>def day1\nend\n\ndef day2\nend\n\ndef day3\nend\n\ndef day4\nend\n\ndef day5\nend\n</code></pre>\n\n<p>In the views I have:</p>\n\n<pre><code>day1.html.erb\nday2.html.erb\nday3.html.erb\nday4.html.erb\nday5.html.erb\n</code></pre>\n\n<p>In each individual view, I have a block of code similar to this:</p>\n\n<p>In day1.html.erb:</p>\n\n<pre><code>&lt;% if current_user.speed? || current_user.admin? %&gt;\n  \"Display Day 1\"\n&lt;% else %&gt;\n  &lt;% unless current_user.day_count.nil? %&gt;\n    &lt;% if (Time.now.to_date - current_user.day_count.to_date).to_i + 1 &gt;= 1 %&gt;\n      \"Display Day 1\"\n    &lt;% else %&gt;\n      \"This project cannot open now. Please wait until day1!\"\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In day2.html.erb:</p>\n\n<pre><code>&lt;% if current_user.speed? || current_user.admin? %&gt;\n  \"Display Day 2\"\n&lt;% else %&gt;\n  &lt;% unless current_user.day_count.nil? %&gt;\n    &lt;% if (Time.now.to_date - current_user.day_count.to_date).to_i + 1 &gt;= 2 %&gt;\n      \"Display Day 2\"\n    &lt;% else %&gt;\n      \"This project cannot open now. Please wait until day2!\"\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>and so on, so on... until day 5.</p>\n\n<p>In the routes.rb:</p>\n\n<pre><code>match 'projects/day-1' =&gt; \"projects#day1\", :via =&gt; [:get], as: \"day1\"\nmatch 'projects/day-2' =&gt; \"projects#day2\", :via =&gt; [:get], as: \"day2\"\nmatch 'projects/day-3' =&gt; \"projects#day3\", :via =&gt; [:get], as: \"day3\"\nmatch 'projects/day-4' =&gt; \"projects#day4\", :via =&gt; [:get], as: \"day4\"\nmatch 'projects/day-5' =&gt; \"projects#day5\", :via =&gt; [:get], as: \"day5\"\n</code></pre>\n\n<p>And in index.html.erb views I have:</p>\n\n<pre><code>&lt;% if current_user.speed? || current_user.admin? %&gt;\n  &lt;div class=\"day_tracking\"&gt;\n    &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;1&lt;/p&gt;&lt;/div&gt;\n    &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;2&lt;/p&gt;&lt;/div&gt;\n    &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;3&lt;/p&gt;&lt;/div&gt;\n    &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;4&lt;/p&gt;&lt;/div&gt;\n    &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;5&lt;/p&gt;&lt;/div&gt;\n  &lt;/div&gt;\n&lt;% else %&gt;\n  &lt;% unless current_user.day_count.nil? %&gt;\n    &lt;div class=\"day_tracking\"&gt;\n      &lt;% if (Time.now.to_date - current_user.day_count.to_date).to_i + 1 &gt;= 1 %&gt;\n        &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;1&lt;/p&gt;&lt;/div&gt;\n      &lt;% else %&gt;\n        &lt;div class=\"day_left\"&gt;&lt;span&gt;\u2718&lt;/span&gt;&lt;p&gt;1&lt;/p&gt;&lt;/div&gt;\n      &lt;% end %&gt;\n\n      &lt;% if (Time.now.to_date - current_user.day_count.to_date).to_i + 1 &gt;= 2 %&gt;\n        &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;2&lt;/p&gt;&lt;/div&gt;\n      &lt;% else %&gt;\n        &lt;div class=\"day_left\"&gt;&lt;span&gt;\u2718&lt;/span&gt;&lt;p&gt;2&lt;/p&gt;&lt;/div&gt;\n      &lt;% end %&gt;\n\n      &lt;% if (Time.now.to_date - current_user.day_count.to_date).to_i + 1 &gt;= 3 %&gt;\n        &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;3&lt;/p&gt;&lt;/div&gt;\n      &lt;% else %&gt;\n        &lt;div class=\"day_left\"&gt;&lt;span&gt;\u2718&lt;/span&gt;&lt;p&gt;3&lt;/p&gt;&lt;/div&gt;\n      &lt;% end %&gt;\n\n      &lt;% if (Time.now.to_date - current_user.day_count.to_date).to_i + 1 &gt;= 4 %&gt;\n        &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;4&lt;/p&gt;&lt;/div&gt;\n      &lt;% else %&gt;\n        &lt;div class=\"day_left\"&gt;&lt;span&gt;\u2718&lt;/span&gt;&lt;p&gt;4&lt;/p&gt;&lt;/div&gt;\n      &lt;% end %&gt;\n\n      &lt;% if (Time.now.to_date - current_user.day_count.to_date).to_i + 1 &gt;= 5 %&gt;\n        &lt;div class=\"day_passed\"&gt;&lt;span&gt;\u2714&lt;/span&gt;&lt;p&gt;5&lt;/p&gt;&lt;/div&gt;\n      &lt;% else %&gt;\n        &lt;div class=\"day_left\"&gt;&lt;span&gt;\u2718&lt;/span&gt;&lt;p&gt;5&lt;/p&gt;&lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>What the code does is very simple. First, I check to see if the current_user is an admin or a speed user or not. If he is, then display:</p>\n\n<pre><code>\u27141 \u27142 \u27143 \u27144 \u27145 \n( It means he can see all the projects )\n</code></pre>\n\n<p>Else, If the current_user is not a speed user or an admin, then display:</p>\n\n<pre><code>\u27141 \u27182 \u27183 \u27184 \u27185 \n( It means he can only see the number of projects \nequivalent to his day_count ---- in case day_count not nil!)\n</code></pre>\n\n<p>For Example: </p>\n\n<ul>\n<li><p>If the current_user have day_count = 1, then he can only see project 1:</p>\n\n<p>\u27141 \u27182 \u27183 \u27184 \u27185</p></li>\n<li><p>If the curent_user have day_count = 2, then he can only see project 1 and 2:</p>\n\n<p>\u27141 \u27142 \u27183 \u27184 \u27185</p></li>\n</ul>\n\n<p>... And so on, so on....</p>\n\n<p>The code is simple, but quite repetitive. I know it's a bad way of coding , but still cannot figure out how to reduce it efficiently and effectively. If I have more than 30 days, the code can go on, go on to more than 2,000 lines of code and probably will make the program become slow down!</p>\n\n<p>Can anyone help me fix this? Thanks in advance.</p>\n"}, {"tags": ["ruby", "json", "web-services", "logging", "thin"], "answers": [{"comments": [{"owner": {"reputation": 8546, "user_id": 71062, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6dc7e281ace4555f3a8f5a85d4d4f849?s=128&d=identicon&r=PG", "display_name": "aidan", "link": "https://stackoverflow.com/users/71062/aidan"}, "edited": false, "score": 3, "creation_date": 1515543152, "post_id": 34630030, "comment_id": 83337163, "body": "Don&#39;t try to do the serialisation yourself. Double quotes in the message will break the encoding. Use <code>{timestamp: datetime, message: msg}.to_json</code> instead. You&#39;ll need to include the <code>JSON</code> gem of course."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 8, "last_activity_date": 1515565842, "last_edit_date": 1515565842, "creation_date": 1452073748, "answer_id": 34630030, "question_id": 34629172, "link": "https://stackoverflow.com/questions/34629172/how-can-i-log-system-status-in-json-format-using-ruby/34630030#34630030", "title": "how can i log system status in JSON format using ruby", "body": "<p>Use custom <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/logger/rdoc/Logger.html#attribute-i-formatter\" rel=\"nofollow noreferrer\"><code>Logger::Formatter</code></a>:</p>\n\n<pre><code>require 'logger'\nlogger = Logger.new(STDOUT) # or retrieve the default application logger\nlogger.formatter = proc do |severity, datetime, progname, msg|\n  %Q|{timestamp: \"#{datetime.to_s}\", message: \"#{msg}\"}\\n|\nend\nlogger.info \"Hello, world!\"\n#\u21d2 {timestamp: \"2016-01-06 10:48:13 +0100\", message: \"Hello, world!\"}\n</code></pre>\n\n<p>Whether you expect messages to have a double quote, it might be better to delegate jsoning to an expert (credits @aidan):</p>\n\n<pre><code>require 'json'\nrequire 'logger'\nlogger = Logger.new(STDOUT) # or retrieve the default application logger\nlogger.formatter = proc do |severity, datetime, progname, msg|\n  JSON.dump(timestamp: \"#{datetime.to_s}\", message: msg)\nend\nlogger.info \"Hello, world!\"\n#\u21d2 {timestamp: \"2016-01-06 10:48:13 +0100\", message: \"Hello, world!\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 4397770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdbe8f2a413718106203ef84b1f20ac?s=128&d=identicon&r=PG&f=1", "display_name": "chad", "link": "https://stackoverflow.com/users/4397770/chad"}, "is_accepted": false, "score": 1, "last_activity_date": 1473321436, "creation_date": 1473321436, "answer_id": 39385515, "question_id": 34629172, "link": "https://stackoverflow.com/questions/34629172/how-can-i-log-system-status-in-json-format-using-ruby/39385515#39385515", "title": "how can i log system status in JSON format using ruby", "body": "<p>gem <code>log_formatter</code> is your choice, as the formatter group, now support json formatter for ruby and log4r.</p>\n\n<p>simple to get stated for ruby.</p>\n\n<pre><code>gem 'log_formatter'\n\nrequire 'log_formatter'\nrequire 'log_formatter/ruby_json_formatter'\n\nlogger.debug({data: \"test data\", author: 'chad'})\n</code></pre>\n\n<p>result</p>\n\n<pre><code>{\n  \"source\": \"examples\",\n  \"data\": \"test data\",\n  \"author\": \"chad\",\n  \"log_level\": \"DEBUG\",\n  \"log_type\": null,\n  \"log_app\": \"app\",\n  \"log_timestamp\": \"2016-08-25T15:34:25+08:00\"\n}\n</code></pre>\n\n<p>for log4r:</p>\n\n<pre><code>require 'log4r'\nrequire 'log_formatter'\nrequire 'log_formatter/log4r_json_formatter'\n\nlogger = Log4r::Logger.new('Log4RTest')\noutputter = Log4r::StdoutOutputter.new(\n  \"console\",\n  :formatter =&gt; Log4r::JSONFormatter::Base.new\n)\nlogger.add(outputter)\n\nlogger.debug( {data: \"test data\", author: 'chad'} )\n</code></pre>\n\n<p>Advance usage: <a href=\"https://github.com/chadlwm/log_formatter\" rel=\"nofollow\">README</a></p>\n\n<p>Full Example Code: <a href=\"https://github.com/chadlwm/log_formatter/tree/master/examples\" rel=\"nofollow\">examples</a></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 8776689, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nEaV7sQC-g8/AAAAAAAAAAI/AAAAAAAAARg/FKszDMQmMfs/photo.jpg?sz=128", "display_name": "Brian Warsing", "link": "https://stackoverflow.com/users/8776689/brian-warsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1579202036, "creation_date": 1579202036, "answer_id": 59776369, "question_id": 34629172, "link": "https://stackoverflow.com/questions/34629172/how-can-i-log-system-status-in-json-format-using-ruby/59776369#59776369", "title": "how can i log system status in JSON format using ruby", "body": "<p>per comments above with @aidan 's recommendation:</p>\n\n<pre><code>require 'json'\nrequire 'logger'\n$stdout.sync = true\nlogger = Logger.new(STDOUT)\nlogger.formatter = proc do |severity, datetime, progname, msg|\n  {\n    level: severity,\n    timestamp: datetime.to_s,\n    app: progname,\n    message: msg\n  }.to_json + $/  \nend\n</code></pre>\n\n<p>Notable additions: </p>\n\n<ol>\n<li><code>$stdout.sync</code> -- not strictly required in every case and possibly undesirable in others</li>\n<li>the <code>$/</code> or <code>\"\\n\"</code> (newline). Without this, logging will work in native Docker, but probably not in Kubernetes (<code>kubectl logs ...</code>).</li>\n</ol>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 317, "user_id": 3155940, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/o2DAT.png?s=128&g=1", "display_name": "Grin like a Cheshire cat", "link": "https://stackoverflow.com/users/3155940/grin-like-a-cheshire-cat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3099, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1579202036, "creation_date": 1452071011, "question_id": 34629172, "link": "https://stackoverflow.com/questions/34629172/how-can-i-log-system-status-in-json-format-using-ruby", "title": "how can i log system status in JSON format using ruby", "body": "<p>I have a ruby script where I am logging system status using GET method , the output which is returned in logs is something like this :</p>\n\n<pre><code>1.2.3.111 - - [00/Jan/2016:08:21:24 +0000] \"GET /service/sys/status HTTP/1.1\" 200 15 0.0006 \n</code></pre>\n\n<p>I want to log these in JSON format .\nIs there any way this is can be done, though i got know this can be somehow done with <strong>thin</strong> webserver but i have no idea how to do that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "gemfile", "gemfile.lock"], "answers": [{"tags": [], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "is_accepted": true, "score": 25, "last_activity_date": 1452070754, "creation_date": 1452070754, "answer_id": 34629091, "question_id": 34628944, "link": "https://stackoverflow.com/questions/34628944/already-activated-spring-1-4-0-but-gemfile-requires-spring-1-3-3error/34629091#34629091", "title": "already activated spring 1.4.0, but Gemfile requires spring 1.3.3[error]", "body": "<p>I fixed it using this.</p>\n\n<pre><code>bundle update spring\n</code></pre>\n"}], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5119, "favorite_count": 5, "accepted_answer_id": 34629091, "answer_count": 1, "score": 22, "last_activity_date": 1553773316, "creation_date": 1452070309, "last_edit_date": 1553773316, "question_id": 34628944, "link": "https://stackoverflow.com/questions/34628944/already-activated-spring-1-4-0-but-gemfile-requires-spring-1-3-3error", "title": "already activated spring 1.4.0, but Gemfile requires spring 1.3.3[error]", "body": "<p>My server is running fine but when I try to enter console by rails c, I got the following error.</p>\n\n<pre><code>/home/munam/.rvm/gems/ruby-2.2.0@jugojuice/gems/bundler-1.10.6/lib/bundler/runtime.rb:34:in `block in setup': You have already activated spring 1.4.0, but your Gemfile requires spring 1.3.3. Prepending `bundle exec` to your command may solve this. (Gem::LoadError)\n    from /home/munam/.rvm/gems/ruby-2.2.0@jugojuice/gems/bundler-1.10.6/lib/bundler/runtime.rb:19:in `setup'\n    from /home/munam/.rvm/gems/ruby-2.2.0@jugojuice/gems/bundler-1.10.6/lib/bundler.rb:127:in `setup'\n    from /home/munam/.rvm/gems/ruby-2.2.0@jugojuice/gems/bundler-1.10.6/lib/bundler/setup.rb:8:in `&lt;top (required)&gt;'\n    from /home/munam/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /home/munam/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /home/munam/.rvm/gems/ruby-2.2.0@jugojuice/gems/spring-1.4.0/lib/spring/commands.rb:33:in `&lt;module:Spring&gt;'\n    from /home/munam/.rvm/gems/ruby-2.2.0@jugojuice/gems/spring-1.4.0/lib/spring/commands.rb:4:in `&lt;top (required)&gt;'\n    from /home/munam/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /home/munam/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /home/munam/.rvm/gems/ruby-2.2.0@jugojuice/gems/spring-1.4.0/lib/spring/server.rb:9:in `&lt;top (required)&gt;'\n    from /home/munam/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:128:in `require'\n    from /home/munam/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:128:in `rescue in require'\n    from /home/munam/.rvm/rubies/ruby-2.2.0/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:39:in `require'\n</code></pre>\n\n<p>My Gemfile.lock is as below</p>\n\n<pre><code>GIT\n  remote: git://github.com/rails-api/active_model_serializers.git\n  revision: 1f08865a10bb06648efc170768c8c9937d441f45\n  specs:\n    active_model_serializers (0.10.0.rc3)\n      actionpack (&gt;= 4.0)\n      activemodel (&gt;= 4.0)\n      railties (&gt;= 4.0)\n\nGIT\n  remote: https://github.com/enriclluelles/route_translator.git\n  revision: f00b4688542689fcb99f3792d2e691e9a3c474f1\n  specs:\n    route_translator (4.0.0)\n      actionpack (&gt;= 3.0, &lt; 5.0)\n      activesupport (&gt;= 3.0, &lt; 5.0)\n\nGEM\n  remote: https://rubygems.org/\n  specs:\n    actionmailer (4.2.0)\n      actionpack (= 4.2.0)\n      actionview (= 4.2.0)\n      activejob (= 4.2.0)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n    actionpack (4.2.0)\n      actionview (= 4.2.0)\n      activesupport (= 4.2.0)\n      rack (~&gt; 1.6.0)\n      rack-test (~&gt; 0.6.2)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.1)\n    actionview (4.2.0)\n      activesupport (= 4.2.0)\n      builder (~&gt; 3.1)\n      erubis (~&gt; 2.7.0)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.1)\n    activejob (4.2.0)\n      activesupport (= 4.2.0)\n      globalid (&gt;= 0.3.0)\n    activemodel (4.2.0)\n      activesupport (= 4.2.0)\n      builder (~&gt; 3.1)\n    activerecord (4.2.0)\n      activemodel (= 4.2.0)\n      activesupport (= 4.2.0)\n      arel (~&gt; 6.0)\n    activesupport (4.2.0)\n      i18n (~&gt; 0.7)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      minitest (~&gt; 5.1)\n      thread_safe (~&gt; 0.3, &gt;= 0.3.4)\n      tzinfo (~&gt; 1.1)\n    acts_as_list (0.7.2)\n      activerecord (&gt;= 3.0)\n    addressable (2.3.7)\n    arel (6.0.0)\n    autoprefixer-rails (5.1.7.1)\n      execjs\n      json\n    awesome_nested_set (3.0.2)\n      activerecord (&gt;= 4.0.0, &lt; 5)\n    aws-sdk (1.6.3)\n      httparty (~&gt; 0.7)\n      json (~&gt; 1.4)\n      nokogiri (&gt;= 1.4.4)\n      uuidtools (~&gt; 2.1)\n    bcrypt (3.1.10)\n    better_errors (2.1.1)\n      coderay (&gt;= 1.0.0)\n      erubis (&gt;= 2.6.6)\n      rack (&gt;= 0.9.0)\n    binding_of_caller (0.7.2)\n      debug_inspector (&gt;= 0.0.1)\n    blazing (0.4.1)\n      activesupport\n      grit\n      i18n\n      logging\n      thor\n    blazing-foreman (0.1.1)\n      activesupport\n      blazing (&gt;= 0.2.9)\n      foreman\n    blazing-rails (0.1.4)\n      blazing (&gt;= 0.2.9)\n      httparty\n    blazing-upstart (0.1.0)\n      activesupport\n      blazing (&gt;= 0.2.9)\n    bootstrap-kaminari-views (0.0.5)\n      kaminari (&gt;= 0.13)\n      rails (&gt;= 3.1)\n    bootstrap-sass (3.3.4.1)\n      autoprefixer-rails (&gt;= 5.0.0.1)\n      sass (&gt;= 3.2.19)\n    bootstrap3-datetimepicker-rails (4.7.14)\n      momentjs-rails (&gt;= 2.8.1)\n    bootswatch-rails (3.2.4)\n      railties (&gt;= 3.1)\n    breakpoint (2.5.0)\n      sass (~&gt; 3.3)\n      sassy-maps (&lt; 1.0.0)\n    buftok (0.2.0)\n    builder (3.2.2)\n    cancancan (1.10.1)\n    capybara (2.4.4)\n      mime-types (&gt;= 1.16)\n      nokogiri (&gt;= 1.3.3)\n      rack (&gt;= 1.0.0)\n      rack-test (&gt;= 0.5.4)\n      xpath (~&gt; 2.0)\n    celluloid (0.16.0)\n      timers (~&gt; 4.0.0)\n    childprocess (0.5.5)\n      ffi (~&gt; 1.0, &gt;= 1.0.11)\n    chunky_png (1.3.4)\n    ckeditor (4.1.1)\n      cocaine\n      orm_adapter (~&gt; 0.5.0)\n    climate_control (0.0.3)\n      activesupport (&gt;= 3.0)\n    cocaine (0.5.7)\n      climate_control (&gt;= 0.0.3, &lt; 1.0)\n    coderay (1.1.0)\n    coffee-rails (4.1.0)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 4.0.0, &lt; 5.0)\n    coffee-script (2.3.0)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.9.1)\n    compass (1.0.3)\n      chunky_png (~&gt; 1.2)\n      compass-core (~&gt; 1.0.2)\n      compass-import-once (~&gt; 1.0.5)\n      rb-fsevent (&gt;= 0.9.3)\n      rb-inotify (&gt;= 0.9)\n      sass (&gt;= 3.3.13, &lt; 3.5)\n    compass-core (1.0.3)\n      multi_json (~&gt; 1.0)\n      sass (&gt;= 3.3.0, &lt; 3.5)\n    compass-import-once (1.0.5)\n      sass (&gt;= 3.2, &lt; 3.5)\n    compass-rails (2.0.4)\n      compass (~&gt; 1.0.0)\n      sass-rails (&lt;= 5.0.1)\n      sprockets (&lt; 2.13)\n    crass (1.0.1)\n    dalli (2.7.2)\n    database_cleaner (1.4.1)\n    debug_inspector (0.0.2)\n    devise (3.4.1)\n      bcrypt (~&gt; 3.0)\n      orm_adapter (~&gt; 0.1)\n      railties (&gt;= 3.2.6, &lt; 5)\n      responders\n      thread_safe (~&gt; 0.1)\n      warden (~&gt; 1.2.3)\n    diff-lcs (1.2.5)\n    docile (1.1.5)\n    dotenv (2.0.0)\n    em-websocket (0.5.1)\n      eventmachine (&gt;= 0.12.9)\n      http_parser.rb (~&gt; 0.6.0)\n    equalizer (0.0.9)\n    erubis (2.7.0)\n    eventmachine (1.0.7)\n    execjs (2.4.0)\n    factory_girl (4.5.0)\n      activesupport (&gt;= 3.0.0)\n    factory_girl_rails (4.5.0)\n      factory_girl (~&gt; 4.5.0)\n      railties (&gt;= 3.0.0)\n    faraday (0.9.1)\n      multipart-post (&gt;= 1.2, &lt; 3)\n    faraday_middleware (0.9.2)\n      faraday (&gt;= 0.7.4, &lt; 0.10)\n    ffi (1.9.6)\n    font-awesome-rails (4.3.0.0)\n      railties (&gt;= 3.2, &lt; 5.0)\n    foreman (0.63.0)\n      dotenv (&gt;= 0.7)\n      thor (&gt;= 0.13.6)\n    formatador (0.2.5)\n    friendly_id (5.1.0)\n      activerecord (&gt;= 4.0.0)\n    friendly_id-globalize (1.0.0.alpha1)\n      friendly_id (&gt;= 5.0.0.beta4, &lt; 6.0)\n    geocoder (1.2.8)\n    get_process_mem (0.2.0)\n    git-deploy (0.5.4)\n      net-scp\n      net-ssh\n      thor\n    globalid (0.3.3)\n      activesupport (&gt;= 4.1.0)\n    globalize (5.0.1)\n      activemodel (&gt;= 4.2.0, &lt; 4.3)\n      activerecord (&gt;= 4.2.0, &lt; 4.3)\n    globalize-accessors (0.2.0)\n      globalize (~&gt; 5.0.0)\n    globalize-versioning (0.1.0)\n      activemodel (&gt;= 3.2.0, &lt; 5)\n      activerecord (&gt;= 3.2.0, &lt; 5)\n      globalize (&gt;= 3.0.4, &lt; 6)\n      paper_trail (~&gt; 3.0.0)\n    gmaps4rails (2.1.2)\n    grit (2.5.0)\n      diff-lcs (~&gt; 1.1)\n      mime-types (~&gt; 1.15)\n      posix-spawn (~&gt; 0.3.6)\n    guard (2.12.4)\n      formatador (&gt;= 0.2.4)\n      listen (~&gt; 2.7)\n      lumberjack (~&gt; 1.0)\n      nenv (~&gt; 0.1)\n      notiffany (~&gt; 0.0)\n      pry (&gt;= 0.9.12)\n      shellany (~&gt; 0.0)\n      thor (&gt;= 0.18.1)\n    guard-compat (1.2.1)\n    guard-livereload (2.4.0)\n      em-websocket (~&gt; 0.5)\n      guard (~&gt; 2.8)\n      multi_json (~&gt; 1.8)\n    guard-rspec (4.5.0)\n      guard (~&gt; 2.1)\n      guard-compat (~&gt; 1.1)\n      rspec (&gt;= 2.99.0, &lt; 4.0)\n    haml (4.0.6)\n      tilt\n    haml-rails (0.9.0)\n      actionpack (&gt;= 4.0.1)\n      activesupport (&gt;= 4.0.1)\n      haml (&gt;= 4.0.6, &lt; 5.0)\n      html2haml (&gt;= 1.0.1)\n      railties (&gt;= 4.0.1)\n    has_draft (1.3.0)\n      activerecord (&gt;= 3.0.0)\n      activesupport (&gt;= 3.0.0)\n    hashie (3.4.3)\n    hike (1.2.3)\n    hitimes (1.2.2)\n    html2haml (2.0.0)\n      erubis (~&gt; 2.7.0)\n      haml (~&gt; 4.0.0)\n      nokogiri (~&gt; 1.6.0)\n      ruby_parser (~&gt; 3.5)\n    http (0.6.3)\n      http_parser.rb (~&gt; 0.6.0)\n    http_parser.rb (0.6.0)\n    http_signatures (0.2.2)\n    httparty (0.13.3)\n      json (~&gt; 1.8)\n      multi_xml (&gt;= 0.5.2)\n    i18n (0.7.0)\n    instagram (1.1.6)\n      faraday (&gt;= 0.7, &lt; 0.10)\n      faraday_middleware (&gt;= 0.8, &lt; 0.10)\n      hashie (&gt;= 0.4.0)\n      multi_json (~&gt; 1.0, &gt;= 1.0.3)\n    jbuilder (2.2.11)\n      activesupport (&gt;= 3.0.0, &lt; 5)\n      multi_json (~&gt; 1.2)\n    jquery-rails (4.0.3)\n      rails-dom-testing (~&gt; 1.0)\n      railties (&gt;= 4.2.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    jquery-ui-rails (5.0.3)\n      railties (&gt;= 3.2.16)\n    jquery-validation-rails (1.13.1)\n      railties (&gt;= 3.2, &lt; 5.0)\n      thor (~&gt; 0.14)\n    json (1.8.2)\n    jwt (1.5.2)\n    kaminari (0.16.3)\n      actionpack (&gt;= 3.0.0)\n      activesupport (&gt;= 3.0.0)\n    kgio (2.9.3)\n    launchy (2.4.3)\n      addressable (~&gt; 2.3)\n    libv8 (3.16.14.7)\n    listen (2.9.0)\n      celluloid (&gt;= 0.15.2)\n      rb-fsevent (&gt;= 0.9.3)\n      rb-inotify (&gt;= 0.9)\n    little-plugger (1.1.3)\n    logging (1.8.2)\n      little-plugger (&gt;= 1.1.3)\n      multi_json (&gt;= 1.8.4)\n    loofah (2.0.1)\n      nokogiri (&gt;= 1.5.9)\n    lumberjack (1.0.9)\n    mail (2.6.3)\n      mime-types (&gt;= 1.16, &lt; 3)\n    memoizable (0.4.2)\n      thread_safe (~&gt; 0.3, &gt;= 0.3.1)\n    method_source (0.8.2)\n    mime-types (1.25.1)\n    mini_portile (0.6.2)\n    minitest (5.5.1)\n    momentjs-rails (2.10.2)\n      railties (&gt;= 3.1)\n    multi_json (1.11.0)\n    multi_xml (0.5.5)\n    multipart-post (2.0.0)\n    naught (1.0.0)\n    nenv (0.2.0)\n    net-scp (1.2.1)\n      net-ssh (&gt;= 2.6.5)\n    net-ssh (2.9.2)\n    nokogiri (1.6.6.2)\n      mini_portile (~&gt; 0.6.0)\n    nokogumbo (1.2.0)\n      nokogiri\n    notiffany (0.0.6)\n      nenv (~&gt; 0.1)\n      shellany (~&gt; 0.0)\n    oauth2 (1.0.0)\n      faraday (&gt;= 0.8, &lt; 0.10)\n      jwt (~&gt; 1.0)\n      multi_json (~&gt; 1.3)\n      multi_xml (~&gt; 0.5)\n      rack (~&gt; 1.2)\n    omniauth (1.2.2)\n      hashie (&gt;= 1.2, &lt; 4)\n      rack (~&gt; 1.0)\n    omniauth-facebook (3.0.0)\n      omniauth-oauth2 (~&gt; 1.2)\n    omniauth-oauth2 (1.4.0)\n      oauth2 (~&gt; 1.0)\n      omniauth (~&gt; 1.2)\n    orm_adapter (0.5.0)\n    paper_trail (3.0.7)\n      activerecord (&gt;= 3.0, &lt; 5.0)\n      activesupport (&gt;= 3.0, &lt; 5.0)\n    paperclip (4.2.1)\n      activemodel (&gt;= 3.0.0)\n      activesupport (&gt;= 3.0.0)\n      cocaine (~&gt; 0.5.3)\n      mime-types\n    pg (0.18.1)\n    posix-spawn (0.3.10)\n    pr_geohash (1.0.0)\n    pry (0.10.1)\n      coderay (~&gt; 1.1.0)\n      method_source (~&gt; 0.8.1)\n      slop (~&gt; 3.4)\n    pry-rails (0.3.4)\n      pry (&gt;= 0.9.10)\n    quiet_assets (1.1.0)\n      railties (&gt;= 3.1, &lt; 5.0)\n    rack (1.6.0)\n    rack-livereload (0.3.15)\n      rack\n    rack-rewrite (1.5.1)\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rails (4.2.0)\n      actionmailer (= 4.2.0)\n      actionpack (= 4.2.0)\n      actionview (= 4.2.0)\n      activejob (= 4.2.0)\n      activemodel (= 4.2.0)\n      activerecord (= 4.2.0)\n      activesupport (= 4.2.0)\n      bundler (&gt;= 1.3.0, &lt; 2.0)\n      railties (= 4.2.0)\n      sprockets-rails\n    rails-deprecated_sanitizer (1.0.3)\n      activesupport (&gt;= 4.2.0.alpha)\n    rails-dom-testing (1.0.5)\n      activesupport (&gt;= 4.2.0.beta, &lt; 5.0)\n      nokogiri (~&gt; 1.6.0)\n      rails-deprecated_sanitizer (&gt;= 1.0.1)\n    rails-html-sanitizer (1.0.2)\n      loofah (~&gt; 2.0)\n    rails_12factor (0.0.3)\n      rails_serve_static_assets\n      rails_stdout_logging\n    rails_serve_static_assets (0.0.4)\n    rails_stdout_logging (0.0.3)\n    railties (4.2.0)\n      actionpack (= 4.2.0)\n      activesupport (= 4.2.0)\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    raindrops (0.13.0)\n    rake (10.4.2)\n    rb-fsevent (0.9.4)\n    rb-inotify (0.9.5)\n      ffi (&gt;= 0.5.0)\n    rdoc (4.2.0)\n      json (~&gt; 1.4)\n    ref (1.0.5)\n    responders (2.1.0)\n      railties (&gt;= 4.2.0, &lt; 5)\n    rsolr (1.0.12)\n      builder (&gt;= 2.1.2)\n    rspec (3.2.0)\n      rspec-core (~&gt; 3.2.0)\n      rspec-expectations (~&gt; 3.2.0)\n      rspec-mocks (~&gt; 3.2.0)\n    rspec-core (3.2.2)\n      rspec-support (~&gt; 3.2.0)\n    rspec-expectations (3.2.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.2.0)\n    rspec-mocks (3.2.1)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.2.0)\n    rspec-rails (3.2.1)\n      actionpack (&gt;= 3.0, &lt; 4.3)\n      activesupport (&gt;= 3.0, &lt; 4.3)\n      railties (&gt;= 3.0, &lt; 4.3)\n      rspec-core (~&gt; 3.2.0)\n      rspec-expectations (~&gt; 3.2.0)\n      rspec-mocks (~&gt; 3.2.0)\n      rspec-support (~&gt; 3.2.0)\n    rspec-support (3.2.2)\n    ruby_parser (3.6.5)\n      sexp_processor (~&gt; 4.1)\n    rubyzip (1.1.7)\n    sanitize (3.1.2)\n      crass (~&gt; 1.0.1)\n      nokogiri (&gt;= 1.4.4)\n      nokogumbo (= 1.2.0)\n    sass (3.4.13)\n    sass-rails (5.0.1)\n      railties (&gt;= 4.0.0, &lt; 5.0)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (~&gt; 1.1)\n    sassy-maps (0.4.0)\n      sass (~&gt; 3.3)\n    sdoc (0.4.1)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      rdoc (~&gt; 4.0)\n    selenium-webdriver (2.45.0)\n      childprocess (~&gt; 0.5)\n      multi_json (~&gt; 1.0)\n      rubyzip (~&gt; 1.0)\n      websocket (~&gt; 1.0)\n    sexp_processor (4.5.0)\n    shellany (0.0.1)\n    shoulda-matchers (2.8.0)\n      activesupport (&gt;= 3.0.0)\n    simple_form (3.1.0)\n      actionpack (~&gt; 4.0)\n      activemodel (~&gt; 4.0)\n    simple_oauth (0.3.1)\n    simplecov (0.9.2)\n      docile (~&gt; 1.1.0)\n      multi_json (~&gt; 1.0)\n      simplecov-html (~&gt; 0.9.0)\n    simplecov-html (0.9.0)\n    slop (3.6.0)\n    spring (1.3.3)\n    sprockets (2.12.3)\n      hike (~&gt; 1.2)\n      multi_json (~&gt; 1.0)\n      rack (~&gt; 1.0)\n      tilt (~&gt; 1.1, != 1.3.0)\n    sprockets-rails (2.2.4)\n      actionpack (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n    stream-ruby (2.2.3)\n      http_signatures (~&gt; 0)\n      httparty (~&gt; 0)\n    stream_rails (2.3.1)\n      actionpack (&gt;= 3.0.0)\n      activerecord (&gt;= 3.0.0)\n      railties (&gt;= 3.0.0)\n      stream-ruby (~&gt; 2.2.3)\n    sunspot (2.2.0)\n      pr_geohash (~&gt; 1.0)\n      rsolr (~&gt; 1.0.7)\n    sunspot_rails (2.2.0)\n      nokogiri\n      rails (&gt;= 3)\n      sunspot (= 2.2.0)\n    sunspot_solr (2.2.0)\n    susy (2.2.2)\n      sass (&gt;= 3.3.0, &lt; 3.5)\n    therubyracer (0.12.1)\n      libv8 (~&gt; 3.16.14.0)\n      ref\n    thor (0.19.1)\n    thread_safe (0.3.5)\n    tilt (1.4.1)\n    timecop (0.7.3)\n    timers (4.0.1)\n      hitimes\n    truncate_html (0.9.3)\n    turbolinks (2.5.3)\n      coffee-rails\n    twitter (5.14.0)\n      addressable (~&gt; 2.3)\n      buftok (~&gt; 0.2.0)\n      equalizer (~&gt; 0.0.9)\n      faraday (~&gt; 0.9.0)\n      http (~&gt; 0.6.0)\n      http_parser.rb (~&gt; 0.6.0)\n      json (~&gt; 1.8)\n      memoizable (~&gt; 0.4.0)\n      naught (~&gt; 1.0)\n      simple_oauth (~&gt; 0.3.0)\n    twitter-text (1.11.0)\n      unf (~&gt; 0.1.0)\n    tzinfo (1.2.2)\n      thread_safe (~&gt; 0.1)\n    uglifier (2.7.1)\n      execjs (&gt;= 0.3.0)\n      json (&gt;= 1.8.0)\n    unf (0.1.4)\n      unf_ext\n    unf_ext (0.0.6)\n    unicorn (4.8.3)\n      kgio (~&gt; 2.6)\n      rack\n      raindrops (~&gt; 0.7)\n    unicorn-worker-killer (0.4.3)\n      get_process_mem (~&gt; 0)\n      unicorn (~&gt; 4)\n    uuidtools (2.1.5)\n    validates_email_format_of (1.6.2)\n      i18n\n    warden (1.2.3)\n      rack (&gt;= 1.0)\n    websocket (1.2.1)\n    xpath (2.0.0)\n      nokogiri (~&gt; 1.3)\n    xray-rails (0.1.16)\n      coffee-rails\n      rails (&gt;= 3.1.0)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  active_model_serializers!\n  acts_as_list\n  awesome_nested_set\n  aws-sdk (= 1.6.3)\n  better_errors\n  binding_of_caller\n  blazing\n  blazing-foreman\n  blazing-rails\n  blazing-upstart\n  bootstrap-kaminari-views\n  bootstrap-sass (~&gt; 3.3.4)\n  bootstrap3-datetimepicker-rails (~&gt; 4.7.14)\n  bootswatch-rails\n  breakpoint\n  cancancan\n  capybara\n  ckeditor\n  coffee-rails (~&gt; 4.1.0)\n  compass\n  compass-rails\n  dalli\n  database_cleaner\n  devise\n  execjs\n  factory_girl_rails\n  font-awesome-rails\n  foreman (~&gt; 0.63.0)\n  friendly_id\n  friendly_id-globalize\n  geocoder\n  git-deploy\n  globalize (~&gt; 5.0.0)\n  globalize-accessors\n  globalize-versioning\n  gmaps4rails\n  guard\n  guard-livereload\n  guard-rspec\n  haml-rails\n  has_draft\n  instagram\n  jbuilder (~&gt; 2.0)\n  jquery-rails\n  jquery-ui-rails\n  jquery-validation-rails\n  kaminari\n  launchy\n  momentjs-rails (&gt;= 2.9.0)\n  omniauth-facebook\n  paper_trail (~&gt; 3.0.5)\n  paperclip\n  pg\n  pry-rails\n  quiet_assets\n  rack-livereload\n  rack-rewrite\n  rails (= 4.2.0)\n  rails_12factor\n  rails_serve_static_assets\n  rails_stdout_logging\n  rb-fsevent\n  route_translator!\n  rspec\n  rspec-rails\n  sanitize\n  sass-rails (~&gt; 5.0)\n  sdoc (~&gt; 0.4.0)\n  selenium-webdriver\n  shoulda-matchers\n  simple_form\n  simplecov\n  spring\n  stream_rails\n  sunspot_rails\n  sunspot_solr\n  susy\n  therubyracer\n  timecop\n  truncate_html\n  turbolinks\n  twitter\n  twitter-text\n  uglifier (&gt;= 1.3.0)\n  unicorn\n  unicorn-worker-killer\n  validates_email_format_of\n  xray-rails\n\nBUNDLED WITH\n   1.10.6\n</code></pre>\n\n<p>From the error, it shows spring 1.3.3 only. What do I need to change so that the issue is fixed. I am using ruby 2.2.0 and rails 4.2.0 </p>\n\n<p>Please suggest what needs to be done to fix this issue</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 2, "creation_date": 1452069552, "post_id": 34628638, "comment_id": 57002814, "body": "Assuming this is to be used for a URL ... you could just leave the space in. Browsers will do this conversion for you before submitting the request. Otherwise - the solution from MilesStanfield is most appropriate."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1452069607, "post_id": 34628638, "comment_id": 57002836, "body": "Rails usually handles this conversion. What are you trying to do?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1452073033, "post_id": 34628638, "comment_id": 57004873, "body": "Yes on browser its work...Issue which I face is that this is ans API and on mobile video this doesn&#39;t work because of spaces..."}], "answers": [{"tags": [], "owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "is_accepted": true, "score": 19, "last_activity_date": 1452069537, "creation_date": 1452069537, "answer_id": 34628737, "question_id": 34628638, "link": "https://stackoverflow.com/questions/34628638/how-to-replace-space-with-20-in-rails/34628737#34628737", "title": "How to replace space with %20 in rails", "body": "<pre><code>require 'uri'\nURI.encode(\"green books\")\n# =&gt; \"green%20books\"\n</code></pre>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2687, "favorite_count": 0, "closed_date": 1452072281, "accepted_answer_id": 34628737, "answer_count": 1, "score": 5, "last_activity_date": 1452143259, "creation_date": 1452069075, "last_edit_date": 1452143259, "question_id": 34628638, "link": "https://stackoverflow.com/questions/34628638/how-to-replace-space-with-20-in-rails", "closed_reason": "Duplicate", "title": "How to replace space with %20 in rails", "body": "<p>What I do</p>\n\n<pre><code>str= \"  John   Smith Beer \"\nstr.tr(\" \", \"%20\")\n\"%%John%%%Smith%Beer%\"\n</code></pre>\n\n<p>It doesn't replace it with \"%20\".\nHow to fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf"], "answers": [{"tags": [], "owner": {"reputation": 1432, "user_id": 1306187, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7023dcf81c08dc35951f338aee158095?s=128&d=identicon&r=PG", "display_name": "Jaehyun Shin", "link": "https://stackoverflow.com/users/1306187/jaehyun-shin"}, "is_accepted": false, "score": 0, "last_activity_date": 1452068986, "creation_date": 1452068986, "answer_id": 34628620, "question_id": 34628403, "link": "https://stackoverflow.com/questions/34628403/ruby-gem-to-resize-pdfs/34628620#34628620", "title": "Ruby gem to resize PDFs?", "body": "<p>Use <a href=\"http://www.imagemagick.org/script/index.php\" rel=\"nofollow\">imagemagick</a>,<br>\nthen use ruby system call method.</p>\n\n<p>something like,   </p>\n\n<pre><code> system(\"convert original.pdf -resize \"{width}x{height}\" resized.pdf\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "is_accepted": false, "score": 0, "last_activity_date": 1452070397, "creation_date": 1452070397, "answer_id": 34628977, "question_id": 34628403, "link": "https://stackoverflow.com/questions/34628403/ruby-gem-to-resize-pdfs/34628977#34628977", "title": "Ruby gem to resize PDFs?", "body": "<p>The rmagick gem is one way to go.  It uses the imagemagick binary in the background and therefore you have to install it before you can use the ruby gem.  I use it everyday for work.  </p>\n\n<p>There are also other variants as well.  For example the mini_magick gem boosts better memory management and also supports ImageMagick or GraphicsMagick.</p>\n\n<p><a href=\"https://rmagick.github.io/\" rel=\"nofollow\">https://rmagick.github.io/</a></p>\n\n<p><a href=\"https://github.com/minimagick/minimagick\" rel=\"nofollow\">https://github.com/minimagick/minimagick</a></p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5213183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b75be809d118a8a7ed6091fde795b508?s=128&d=identicon&r=PG&f=1", "display_name": "K Martinez", "link": "https://stackoverflow.com/users/5213183/k-martinez"}, "edited": false, "score": 1, "creation_date": 1452190041, "post_id": 34650844, "comment_id": 57069725, "body": "Actually, this is correct! Didn&#39;t realize there was such settings in shipcloud. Thank you for saving me some headaches/extra work!"}], "tags": [], "owner": {"reputation": 21, "user_id": 1293382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AKM0u.jpg?s=128&g=1", "display_name": "acgreen", "link": "https://stackoverflow.com/users/1293382/acgreen"}, "is_accepted": false, "score": 0, "last_activity_date": 1452156828, "creation_date": 1452156828, "answer_id": 34650844, "question_id": 34628403, "link": "https://stackoverflow.com/questions/34628403/ruby-gem-to-resize-pdfs/34650844#34650844", "title": "Ruby gem to resize PDFs?", "body": "<p>what's the size of the shipping label you're currently getting? For a few carriers you can change the size from within your shipcloud backoffice. The shipping labels are all in standard sizes so be aware that when resizing them you could end up with a label that won't be accepted by the carrier.</p>\n"}], "owner": {"reputation": 11, "user_id": 5213183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b75be809d118a8a7ed6091fde795b508?s=128&d=identicon&r=PG&f=1", "display_name": "K Martinez", "link": "https://stackoverflow.com/users/5213183/k-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1452156828, "creation_date": 1452067997, "question_id": 34628403, "link": "https://stackoverflow.com/questions/34628403/ruby-gem-to-resize-pdfs", "title": "Ruby gem to resize PDFs?", "body": "<p>I have a Shipcloud.io implementation in my Rails app. A successful API call generates a shipping label in PDF format. I then need to convert the given PDF to another size (DIN A5 format, specifically). How can this be done in Rails? I checked out the wicked_pdf gem but it seems that only generates html to pdf. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1452072927, "post_id": 34628349, "comment_id": 57004786, "body": "The inner assignment (<code>@config = </code>) is redundant."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1452100491, "post_id": 34628349, "comment_id": 57022950, "body": "<code>@config = return some value</code> does not seem like valid ruby - if you can please fix your code, that will help."}], "answers": [{"comments": [{"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1452068939, "post_id": 34628594, "comment_id": 57002466, "body": "That&#39;s not true - both blocks of code are identical."}, {"owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "reply_to_user": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1452069182, "post_id": 34628594, "comment_id": 57002625, "body": "Maybe I am missing something here, but the <code>begin</code> &amp; <code>rescue</code> keywords are for handling exceptions.   If either <code>config_exists?</code> or <code>some_value</code> raise an exception, how would it be handled in the second case?"}, {"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1452069243, "post_id": 34628594, "comment_id": 57002660, "body": "You&#39;re missing the fact that <code>def</code> is functionally equivalent to <code>begin</code> in terms of exception handling. Also, since neither of these examples include a <code>rescue</code> block - nothing good will happen if an exception is raised."}, {"owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "edited": false, "score": 0, "creation_date": 1452069336, "post_id": 34628594, "comment_id": 57002710, "body": "I suppose his example lacked the <code>rescue</code>.  I just assumed it was intended.  Otherwise there is no need for the <code>begin</code> and <code>end</code>.  Maybe that is the point you are making."}, {"owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "edited": false, "score": 0, "creation_date": 1452069588, "post_id": 34628594, "comment_id": 57002826, "body": "Jon, you are of course correct.  I just made an assumption about intent.  I guess the fact that it made no sense to me personally to have a <code>begin</code> without a <code>rescue</code>, put me off track.  That is why i included the <code>rescue</code> in my example.  As a side note, is there any good reason to use a <code>begin</code> without a <code>rescue</code>?  maybe there is a use case I am not aware of?"}, {"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 1, "creation_date": 1452070276, "post_id": 34628594, "comment_id": 57003193, "body": "You might use it in a loop <code>begin ... end while conditional</code>"}, {"owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "edited": false, "score": 0, "creation_date": 1452070762, "post_id": 34628594, "comment_id": 57003491, "body": "Good point. I was aware of, but have never used that construct.  Actually completely slipped my mind.  You get into habits I guess.  Maybe I will find a place to use it this week.  Thanks Jon."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1452072693, "post_id": 34628594, "comment_id": 57004634, "body": "@AndrewGriffith <code>my_var = begin v1 = 6 ; v2 = 7 ; v1 * v2 ; end</code> to assign 42 to <code>my_var</code>."}], "tags": [], "owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "is_accepted": false, "score": -1, "last_activity_date": 1452068968, "last_edit_date": 1452068968, "creation_date": 1452068883, "answer_id": 34628594, "question_id": 34628349, "link": "https://stackoverflow.com/questions/34628349/what-is-use-of-begin-end-block-in-ruby/34628594#34628594", "title": "What is use of ||= begin....end block in Ruby?", "body": "<p>The only thing that will happen differently is if an exception is raised.  For instance, let's say there is a problem in the <code>config_exists?</code> method call.  If it raises an exception in the first example your <code>@config</code> var will be set to <code>{}</code>.  In the second example if the same thing happens your program will crash.</p>\n\n<p>As a side note, there is no need for the <code>return</code> keyword here. In fact the example should read as follows.  This is assuming that I understand the intent.</p>\n\n<pre><code>def config\n  @config ||= \n    begin\n      if config_exists?    \n        some_value\n      else\n        {}\n      end\n    rescue\n      {}\n    end\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>def config\n  @config ||= method\nend\n\ndef method\n  if config_exists?\n    some_value\n  else\n    {}\n  end\nend\n</code></pre>\n\n<p>Both examples are exactly the same, except if an exception is raised <code>@config</code> will still be set to = <code>some_value</code> in the first example.</p>\n\n<p>Also, it should be noted that nothing will happen if <code>@config</code> already has a value.  The <code>||=</code> operators is the same as:</p>\n\n<pre><code>@config = some_value if @config.nil?\n</code></pre>\n\n<p>Only set the variable to this value if it is currently nil.</p>\n\n<p>Hope this is helpful and that I am understanding your question correctly.</p>\n"}, {"tags": [], "owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "is_accepted": true, "score": 17, "last_activity_date": 1452069218, "creation_date": 1452069218, "answer_id": 34628670, "question_id": 34628349, "link": "https://stackoverflow.com/questions/34628349/what-is-use-of-begin-end-block-in-ruby/34628670#34628670", "title": "What is use of ||= begin....end block in Ruby?", "body": "<p>First of all, you need to be aware that a defined method inherently includes the functionality of a <code>begin ... end</code> block.</p>\n\n<p>In the context of exception handling, <code>def method_name ... end</code> is functionally equivalent to <code>begin ... end</code>. Both can include <code>rescue</code> statements for example.</p>\n\n<p>The two blocks of code you have shared are actually identical, and there is no benefit in one over the other ... unless your <code>method</code> is needed in more than one place. In that case, you DRY up your code by putting the logic into a single method and calling it from multiple other places.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 9, "last_activity_date": 1452076010, "creation_date": 1452076010, "answer_id": 34630789, "question_id": 34628349, "link": "https://stackoverflow.com/questions/34628349/what-is-use-of-begin-end-block-in-ruby/34630789#34630789", "title": "What is use of ||= begin....end block in Ruby?", "body": "<p>In your case, you can even omit the <code>begin ... end</code> block:</p>\n\n<pre><code>@config ||=\n  if config_exists?  \n    return_some_value\n  else\n    {}\n  end\n</code></pre>\n\n<p>or, using the <a href=\"http://ruby-doc.org/core-2.3.0/doc/syntax/control_expressions_rdoc.html#label-Ternary+if\" rel=\"noreferrer\">ternary if</a>:</p>\n\n<pre><code>@config ||= config_exists? ? return_some_value : {}\n</code></pre>\n\n<blockquote>\n  <p>Does it make any difference in output?</p>\n</blockquote>\n\n<p>It <em>could</em> make a difference, because unlike <code>def ... end</code>, an <code>begin ... end</code> block doesn't create a new variable scope.</p>\n\n<p>Here's a contrived example:</p>\n\n<pre><code>def foo\n  a = 456  # doesn't affect the other a\nend\n\na = 123\nb = foo\n\np a: a, b: b #=&gt; {:a=&gt;123, :b=&gt;456}\n</code></pre>\n\n<p>Versus:</p>\n\n<pre><code>a = 123\nb = begin\n  a = 456  # overwrites a\nend\n\np a: a, b: b #=&gt; {:a=&gt;456, :b=&gt;456}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1087, "user_id": 1687259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q6V34.jpg?s=128&g=1", "display_name": "galva", "link": "https://stackoverflow.com/users/1687259/galva"}, "edited": false, "score": 1, "creation_date": 1572518997, "post_id": 43634646, "comment_id": 103588828, "body": "1. It would be more accurate to say that <code>@variable ||= code</code> lets you cache a resource-intensive computation. 2.  <code>begin ... end</code>, however, lets you cache the result of an expression that is made up of multiple statements (&quot;multi-line statements&quot;."}, {"owner": {"reputation": 1087, "user_id": 1687259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q6V34.jpg?s=128&g=1", "display_name": "galva", "link": "https://stackoverflow.com/users/1687259/galva"}, "edited": false, "score": 0, "creation_date": 1572519081, "post_id": 43634646, "comment_id": 103588864, "body": "I can remove my comments if you want to edit your answer."}], "tags": [], "owner": {"reputation": 302, "user_id": 3476715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fbb398b5801ea1209385207d33c6269?s=128&d=identicon&r=PG", "display_name": "shanecav", "link": "https://stackoverflow.com/users/3476715/shanecav"}, "is_accepted": false, "score": 6, "last_activity_date": 1493210789, "creation_date": 1493210789, "answer_id": 43634646, "question_id": 34628349, "link": "https://stackoverflow.com/questions/34628349/what-is-use-of-begin-end-block-in-ruby/43634646#43634646", "title": "What is use of ||= begin....end block in Ruby?", "body": "<p>Using <code>||= begin...end</code> allows you to <a href=\"https://stackoverflow.com/questions/6184869/what-is-the-difference-between-memoization-and-dynamic-programming\">memoize</a> the result of whatever is run in the <code>begin...end</code>. This is useful for caching the result of resource-intensive computation.</p>\n"}], "owner": {"reputation": 238, "user_id": 804549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e48bf91619a1ccfa441abc94f3ef621?s=128&d=identicon&r=PG", "display_name": "Twinkalkumar Savani", "link": "https://stackoverflow.com/users/804549/twinkalkumar-savani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12029, "favorite_count": 5, "accepted_answer_id": 34628670, "answer_count": 4, "score": 13, "last_activity_date": 1494366417, "creation_date": 1452067725, "last_edit_date": 1494366417, "question_id": 34628349, "link": "https://stackoverflow.com/questions/34628349/what-is-use-of-begin-end-block-in-ruby", "title": "What is use of ||= begin....end block in Ruby?", "body": "<p>What is difference in these two code snippets:</p>\n\n<pre><code>   def config\n    @config ||= begin\n      if config_exists?  \n        @config = return some value\n      else\n        {}\n      end\n    end\n  end\n</code></pre>\n\n<p>and</p>\n\n<pre><code>  def config\n    @config ||= method\n  end\n\n  def method\n    if config_exists?\n      return some value\n    else\n      {}\n    end\n  end\n</code></pre>\n\n<p>I'm confused with the \"<code>begin</code> ... <code>end</code>\" block. Does it make any difference in the output? If not, then what is use of the <code>begin</code> ... <code>end</code> block here?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1452066699, "post_id": 34628048, "comment_id": 57001416, "body": "What do you mean by <b>which isn&#39;t as direct as having multiple ids assigned to a single row</b>?"}, {"owner": {"reputation": 146, "user_id": 2865269, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5c1c1fe05baa3fb44a7fee5b78be019?s=128&d=identicon&r=PG&f=1", "display_name": "Binyuan Sun", "link": "https://stackoverflow.com/users/2865269/binyuan-sun"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1452067044, "post_id": 34628048, "comment_id": 57001549, "body": "Hmm.. I don&#39;t know how to explain but I have seen some tables in some forum&#39;s database where a forum row could contain multiples subforum&#39;s id separated by a comma. Maybe it was pretty outdated and the best way now is to have a third table containing the linkage between the two row..."}], "answers": [{"comments": [{"owner": {"reputation": 146, "user_id": 2865269, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5c1c1fe05baa3fb44a7fee5b78be019?s=128&d=identicon&r=PG&f=1", "display_name": "Binyuan Sun", "link": "https://stackoverflow.com/users/2865269/binyuan-sun"}, "edited": false, "score": 0, "creation_date": 1452068962, "post_id": 34628369, "comment_id": 57002481, "body": "I see.. Thanks for your answer!"}], "tags": [], "owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "is_accepted": true, "score": 0, "last_activity_date": 1452067814, "creation_date": 1452067814, "answer_id": 34628369, "question_id": 34628048, "link": "https://stackoverflow.com/questions/34628048/rails-linking-multiples-rows-id-in-a-table-to-a-single-row-in-another-table-sql/34628369#34628369", "title": "Rails linking multiples row&#39;s id in a table to a single row in another table SQL", "body": "<p>If you don't want to have to do crazy joins later you would probably want to have a join table.  Yes the third table is a good idea here.</p>\n\n<pre><code>class Entry &lt; ActiveRecord::Base\n  has_many :calendars, through: :scheduling\nend\n\nclass Calendar &lt; ActiveRecord::Base\n  has_many :entries, through: scheduling\nend\n\nclass Scheduling &lt; ActiveRecord::Base\n  belongs_to :entry\n  belongs_to :calendar\nend\n</code></pre>\n\n<p>Then tables look like this:</p>\n\n<pre><code>entires\n  id:integer\n  description:string\n\ncalendars\n  id:integer\n\nschedulings\n  id:integer\n  calendar_id:integer\n  entry_id:integer\n</code></pre>\n\n<p>And your ActiveRecord queries look like this:</p>\n\n<pre><code>Calendar.find(3).entries.ids  #=&gt; [1, 2, 3]\nEntry.find(1).calendars.ids   #=&gt; [1, 3]\n</code></pre>\n\n<p>The rails guide also provide a great example:</p>\n\n<p><a href=\"http://guides.rubyonrails.org/association_basics.html#choosing-between-has-many-through-and-has-and-belongs-to-many\" rel=\"nofollow\">http://guides.rubyonrails.org/association_basics.html#choosing-between-has-many-through-and-has-and-belongs-to-many</a></p>\n"}], "owner": {"reputation": 146, "user_id": 2865269, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e5c1c1fe05baa3fb44a7fee5b78be019?s=128&d=identicon&r=PG&f=1", "display_name": "Binyuan Sun", "link": "https://stackoverflow.com/users/2865269/binyuan-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 34628369, "answer_count": 1, "score": -1, "last_activity_date": 1452067814, "creation_date": 1452066517, "question_id": 34628048, "link": "https://stackoverflow.com/questions/34628048/rails-linking-multiples-rows-id-in-a-table-to-a-single-row-in-another-table-sql", "title": "Rails linking multiples row&#39;s id in a table to a single row in another table SQL", "body": "<p>I'm making a calendar app in which the user can create multiple calendar and add multiple entries to each different calendar in Rails. For instance, I have the following table</p>\n\n<p>Entry</p>\n\n<pre><code>id          description\n----------------------------------------------------\n1           go shopping\n2           go to cinema\n3           do homework\n</code></pre>\n\n<p>Calendar</p>\n\n<pre><code>id    entry_id      \n----------------\n1     1, 3\n2     2\n3     1, 2, 3\n</code></pre>\n\n<p>What would be the association/solution if I want to get all the entries from a row (in array?) in the calendar and how do would I add a new entry to the row? (I looked at the has_and_belongs_to_many association but it seems to require a third table which isn't as direct as having multiple ids assigned to a single row...)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 1, "creation_date": 1452063745, "post_id": 34627385, "comment_id": 57000211, "body": "Try <code>bundle install --binstubs</code> then generate the controller"}, {"owner": {"reputation": 4994, "user_id": 3210476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MOPpj.jpg?s=128&g=1", "display_name": "Shubham Kanodia", "link": "https://stackoverflow.com/users/3210476/shubham-kanodia"}, "reply_to_user": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1452064385, "post_id": 34627385, "comment_id": 57000447, "body": "@RAJ I get <code>Unknown switches &#39;--binstub&#39;</code> when i run it"}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1452064877, "post_id": 34627385, "comment_id": 57000656, "body": "Does your project specify a Ruby version in a <code>.ruby-version</code> file, or in the <code>Gemfile</code>?"}, {"owner": {"reputation": 4994, "user_id": 3210476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MOPpj.jpg?s=128&g=1", "display_name": "Shubham Kanodia", "link": "https://stackoverflow.com/users/3210476/shubham-kanodia"}, "reply_to_user": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1452065438, "post_id": 34627385, "comment_id": 57000874, "body": "@Drenmi I seem to have a <code>.rubyversion</code> file in my project folder with value <code>2.3.0</code>. I don&#39;t remember which command I executed for that though."}, {"owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 0, "creation_date": 1452072470, "post_id": 34627385, "comment_id": 57004495, "body": "@user3210476 - from the error <code>Unknown switches &#39;--binstub&#39;</code> it seems that you missed the &#39;s&#39; at the commandline (bundle install --binstub<b>s</b>)"}, {"owner": {"reputation": 4994, "user_id": 3210476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MOPpj.jpg?s=128&g=1", "display_name": "Shubham Kanodia", "link": "https://stackoverflow.com/users/3210476/shubham-kanodia"}, "reply_to_user": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 0, "creation_date": 1452104352, "post_id": 34627385, "comment_id": 57025319, "body": "@UriAgassi My bad... it works now... But why did i need to do it? And do I have to do it every time I create a project?"}, {"owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 0, "creation_date": 1452154306, "post_id": 34627385, "comment_id": 57045516, "body": "<a href=\"https://github.com/rbenv/rbenv/wiki/Understanding-binstubs\" rel=\"nofollow noreferrer\">github.com/rbenv/rbenv/wiki/Understanding-binstubs</a>"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 5761468, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CbXPouK0I6Y/AAAAAAAAAAI/AAAAAAAAAB4/E4m6ddnhs-o/photo.jpg?sz=128", "display_name": "rentalname", "link": "https://stackoverflow.com/users/5761468/rentalname"}, "is_accepted": false, "score": 4, "last_activity_date": 1452238538, "creation_date": 1452238538, "answer_id": 34671714, "question_id": 34627385, "link": "https://stackoverflow.com/questions/34627385/require-cannot-load-such-file-bundler-setup-loaderror/34671714#34671714", "title": "`require&#39;: cannot load such file -- bundler/setup (LoadError)", "body": "<p>maybe fix <code>bundle exec rake rails:update:bin</code></p>\n"}], "owner": {"reputation": 4994, "user_id": 3210476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MOPpj.jpg?s=128&g=1", "display_name": "Shubham Kanodia", "link": "https://stackoverflow.com/users/3210476/shubham-kanodia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3241, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1452238538, "creation_date": 1452063605, "question_id": 34627385, "link": "https://stackoverflow.com/questions/34627385/require-cannot-load-such-file-bundler-setup-loaderror", "title": "`require&#39;: cannot load such file -- bundler/setup (LoadError)", "body": "<p>I am getting started with ruby on rails, but facing a lot of issues setting up a new blog from ruby tutorials. </p>\n\n<p>I had installed ruby 2.3.0 using <code>rubyenv</code> on my Mac El Capitan. But soon after I ran into namespace conflicts and errors. I solved them one by one but now when I run</p>\n\n<p><code>bin/rails generate controller welcome index</code></p>\n\n<p>on the new blog, I get -</p>\n\n<pre><code>/Library/Ruby/Site/2.0.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- bundler/setup (LoadError)\n</code></pre>\n\n<p>Why does it show 2.0.0 when I've installed 2.3.0?</p>\n\n<p>Stuff I've tried:</p>\n\n<p><code>$ sudo  gem update --system</code>   </p>\n\n<p><code>$ export PATH=\"$HOME/.rbenv/shims:$PATH\"</code></p>\n\n<p><code>$ echo $GEM_HOME</code>\n<code>&lt;returns blank&gt;</code></p>\n\n<p><code>$which -a ruby</code>                                             </p>\n\n<pre><code>/Users/shubhamkanodia/.rbenv/shims/ruby\n/usr/bin/ruby\n</code></pre>\n\n<p><code>rbenv versions</code>                                      </p>\n\n<pre><code>  system\n* 2.3.0 (set by /Users/shubhamkanodia/.rbenv/version)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1452062815, "post_id": 34626985, "comment_id": 56999824, "body": "Showing us the failing migration might ..uhhhm.. help to diagnose."}, {"owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1452063771, "post_id": 34626985, "comment_id": 57000219, "body": "def self.down     remove_column :tags, :taggings_count   end"}, {"owner": {"reputation": 1600, "user_id": 3715103, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/53104fc50d5c6ba9c2819d5c33631380?s=128&d=identicon&r=PG&f=1", "display_name": "Prasanna Sundar", "link": "https://stackoverflow.com/users/3715103/prasanna-sundar"}, "edited": false, "score": 1, "creation_date": 1452065470, "post_id": 34626985, "comment_id": 57000886, "body": "If your DB is on developement, try <code>rake db:migrate:reset</code> which will rollback all migrations and start migrating from the beginning, so that you have a clean DB without any data!"}], "answers": [{"comments": [{"owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "edited": false, "score": 0, "creation_date": 1452065443, "post_id": 34627709, "comment_id": 57000877, "body": "I need to start it from 20151018064458 and there are more migrations after.  Is rollback any different than down?"}, {"owner": {"reputation": 3765, "user_id": 2089267, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/44215d587ff1f8bc581d4098bfec2154?s=128&d=identicon&r=PG&f=1", "display_name": "NeoVe", "link": "https://stackoverflow.com/users/2089267/neove"}, "reply_to_user": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "edited": false, "score": 0, "creation_date": 1452066164, "post_id": 34627709, "comment_id": 57001163, "body": "Hi, more or less: <b>db:migrate:down</b> rolls back one specific migration <b>db:rollback</b> rolls back the last migration , generally you use rollback, since it clears tables and drop them if necessary, migrate:down , instead, could leave some garbage on your db, give them both a try though"}], "tags": [], "owner": {"reputation": 3765, "user_id": 2089267, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/44215d587ff1f8bc581d4098bfec2154?s=128&d=identicon&r=PG&f=1", "display_name": "NeoVe", "link": "https://stackoverflow.com/users/2089267/neove"}, "is_accepted": false, "score": 0, "last_activity_date": 1452064970, "creation_date": 1452064970, "answer_id": 34627709, "question_id": 34626985, "link": "https://stackoverflow.com/questions/34626985/what-do-you-do-when-a-migration-wont-migrate-down/34627709#34627709", "title": "What do you do when a migration won&#39;t migrate down?", "body": "<p>You can try like this:</p>\n\n<p><code>rake db:rollback</code> will get you back one step</p>\n\n<p>then</p>\n\n<pre><code>rake db:rollback STEP=n\n</code></pre>\n\n<p>Will roll you back <code>n</code> migrations where <code>n</code> is the number of recent migrations you want to rollback.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452064970, "creation_date": 1452061818, "question_id": 34626985, "link": "https://stackoverflow.com/questions/34626985/what-do-you-do-when-a-migration-wont-migrate-down", "title": "What do you do when a migration won&#39;t migrate down?", "body": "<p>I decided not to use the gem <a href=\"https://github.com/mbleigh/acts-as-taggable-on\" rel=\"nofollow\">'acts_as_taggable_on'</a> but I'm having trouble undoing the migrations for some reason.  There are 5:</p>\n\n<pre><code>   ** ^ more migrations ^ **\n   up     20151018064454  Acts as taggable on migration.acts as taggable on engine\n   up     20151018064455  Add missing unique indices.acts as taggable on engine\n   up     20151018064456  Add taggings counter cache to tags.acts as taggable on engine\n  down    20151018064457  Add missing taggable index.acts as taggable on engine\n  down    20151018064458  Change collation for tag names.acts as taggable on engine\n  ** v more migrations v **\n</code></pre>\n\n<p>When I run <code>rake db:migrate:down VERSION=20151018064456</code> I get errors:</p>\n\n<blockquote>\n  <p>PG::UndefinedColumn: ERROR:  column \"taggings_count\" of relation \"tags\" does not exist</p>\n  \n  <p>ActiveRecord::StatementInvalid: PG::UndefinedColumn: ERROR:  column \"taggings_count\" of relation \"tags\" does not exist\n  : ALTER TABLE \"tags\" DROP \"taggings_count\"</p>\n  \n  <p>PG::UndefinedColumn: ERROR:  column \"taggings_count\" of relation\n  \"tags\" does not exist</p>\n</blockquote>\n\n<p>I'm running them one at a time from latest to earliest.  If these don't run, what should I do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 1196, "user_id": 454360, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cf21cecc8224e5ba0f4b37d071688e1?s=128&d=identicon&r=PG&f=1", "display_name": "brahmana", "link": "https://stackoverflow.com/users/454360/brahmana"}, "edited": false, "score": 0, "creation_date": 1452457635, "post_id": 34626430, "comment_id": 57166906, "body": "@Drenmi, &amp; Simone Carletti : Added a note about why this is not a duplicate."}], "answers": [{"comments": [{"owner": {"reputation": 1196, "user_id": 454360, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cf21cecc8224e5ba0f4b37d071688e1?s=128&d=identicon&r=PG&f=1", "display_name": "brahmana", "link": "https://stackoverflow.com/users/454360/brahmana"}, "edited": false, "score": 0, "creation_date": 1452457379, "post_id": 34626567, "comment_id": 57166802, "body": "How would I do the same with the ActionMailer views? I typically call the <code>mail</code> method which I believe does the view rendering, that too both <code>HTML</code> and <code>Text</code> views. How can I achieve the same with this <code>inline</code> rendering?"}, {"owner": {"reputation": 898, "user_id": 1274305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf00efa53c513b3ed5c0c42e709d82d9?s=128&d=identicon&r=PG", "display_name": "crackedmind", "link": "https://stackoverflow.com/users/1274305/crackedmind"}, "reply_to_user": {"reputation": 1196, "user_id": 454360, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cf21cecc8224e5ba0f4b37d071688e1?s=128&d=identicon&r=PG&f=1", "display_name": "brahmana", "link": "https://stackoverflow.com/users/454360/brahmana"}, "edited": false, "score": 0, "creation_date": 1452500835, "post_id": 34626567, "comment_id": 57179686, "body": "mail {|format| format.html {render inline: string_template} }"}], "tags": [], "owner": {"reputation": 898, "user_id": 1274305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf00efa53c513b3ed5c0c42e709d82d9?s=128&d=identicon&r=PG", "display_name": "crackedmind", "link": "https://stackoverflow.com/users/1274305/crackedmind"}, "is_accepted": true, "score": 6, "last_activity_date": 1452783866, "last_edit_date": 1452783866, "creation_date": 1452059869, "answer_id": 34626567, "question_id": 34626430, "link": "https://stackoverflow.com/questions/34626430/load-the-rails-view-template-from-a-string-instead-of-a-file/34626567#34626567", "title": "Load the Rails view template from a string instead of a file", "body": "<p>Sure. This is simple</p>\n\n<p><a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-render\" rel=\"nofollow\"><code>render inline: string_template</code></a></p>\n\n<p>For mail views:</p>\n\n<pre><code>mail do |format| \n    format.html { render inline: string_template}\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1452067786, "post_id": 34627667, "comment_id": 57001899, "body": "Why the extra call to erb?"}], "tags": [], "owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "is_accepted": false, "score": 1, "last_activity_date": 1452064819, "creation_date": 1452064819, "answer_id": 34627667, "question_id": 34626430, "link": "https://stackoverflow.com/questions/34626430/load-the-rails-view-template-from-a-string-instead-of-a-file/34627667#34627667", "title": "Load the Rails view template from a string instead of a file", "body": "<p>I would get my sting/template from the database, then render it inline with ERB.  This allows you to set instance variables and pass them to ERB via your local binding.  To me this is the most flexible approach.</p>\n\n<pre><code>def my_action\n  template_from_database = \"&lt;h1&gt;Hello &lt;%= @instance_var %&gt;&lt;/h1&gt;\"\n  @instance_var = 'World'\n\n  render inline: ERB.new(template_from_database).result(binding)\nend\n</code></pre>\n"}], "owner": {"reputation": 1196, "user_id": 454360, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6cf21cecc8224e5ba0f4b37d071688e1?s=128&d=identicon&r=PG&f=1", "display_name": "brahmana", "link": "https://stackoverflow.com/users/454360/brahmana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1191, "favorite_count": 0, "closed_date": 1452075605, "accepted_answer_id": 34626567, "answer_count": 2, "score": 0, "last_activity_date": 1452783866, "creation_date": 1452059149, "last_edit_date": 1495542682, "question_id": 34626430, "link": "https://stackoverflow.com/questions/34626430/load-the-rails-view-template-from-a-string-instead-of-a-file", "closed_reason": "Duplicate", "title": "Load the Rails view template from a string instead of a file", "body": "<p>I have a typical mailer setup in my Rails app with two views (.text.erb and .html.erb) for each method of the mailer class. These views are in the app/views/ directory and they are being properly rendered.</p>\n\n<p>Now instead of rendering views which are in files in the app/views/* directory can I render a view whose markup template is in a string variable?</p>\n\n<p>The template to be used varies based on the user and is picked from the DB. How can I render this ERB template which is in a string instead of rendering a template file in the views directory?</p>\n\n<p>A very similar question, but from the Django world is this : <a href=\"https://stackoverflow.com/questions/2167269/load-template-from-a-string-instead-of-from-a-file\">Load template from a string instead of from a file</a></p>\n\n<p>Please note : I do not want to capture the output of a rendered view as a string. There are several questions on SO about that.</p>\n\n<p>Note to those who marked this as duplicate : This is not about controller views, but about mailer views. There are be two views for each mailer method and both views need to be rendered and then sent as appropriate contents in the email.</p>\n"}, {"tags": ["ruby", "command-line-interface"], "comments": [{"owner": {"reputation": 492, "user_id": 756369, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/MFp2Q.jpg?s=128&g=1", "display_name": "jsookiki", "link": "https://stackoverflow.com/users/756369/jsookiki"}, "edited": false, "score": 0, "creation_date": 1452059389, "post_id": 34626386, "comment_id": 56998534, "body": "You could use the command <code>irb</code> to open a ruby console. Inside the ruby console, you could <code>require</code> all your files.  Then you could run your functions in the console."}, {"owner": {"reputation": 53, "user_id": 2377626, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bKUEV.jpg?s=128&g=1", "display_name": "TraaidMark", "link": "https://stackoverflow.com/users/2377626/traaidmark"}, "reply_to_user": {"reputation": 492, "user_id": 756369, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/MFp2Q.jpg?s=128&g=1", "display_name": "jsookiki", "link": "https://stackoverflow.com/users/756369/jsookiki"}, "edited": false, "score": 0, "creation_date": 1452059894, "post_id": 34626386, "comment_id": 56998724, "body": "Okay, will google around to try this out. Sorry, VERY new to Ruby, and generally still a bit of a n00b at programming (designer)"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 2377626, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bKUEV.jpg?s=128&g=1", "display_name": "TraaidMark", "link": "https://stackoverflow.com/users/2377626/traaidmark"}, "edited": false, "score": 0, "creation_date": 1452059833, "post_id": 34626484, "comment_id": 56998696, "body": "Thanks for the response. I did item 2, and it worked, but I get the following error:  Rincewind:~ traaidmark$ konstruct Could not locate Gemfile or .bundle/ directory"}], "tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 0, "last_activity_date": 1452059415, "creation_date": 1452059415, "answer_id": 34626484, "question_id": 34626386, "link": "https://stackoverflow.com/questions/34626386/how-can-i-test-my-ruby-cli-app-while-still-in-development/34626484#34626484", "title": "How can I test my Ruby CLI app while still in development?", "body": "<p>Two simple way:\n1. Make <code>bin/konstruct</code> executable. So you can run it without <code>bundle exec</code>. Then link it in any directory in your <code>$PATH</code> with <code>ln -s</code>. (For Unix based systems)\n2. Create a alias in your shell. something like this:</p>\n\n<pre><code>alias konstruct=\"bundle exec /FULL/PATH/TO/bin/konstruct\"\n</code></pre>\n\n<p>(Also for Unix based systems)</p>\n"}], "owner": {"reputation": 53, "user_id": 2377626, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bKUEV.jpg?s=128&g=1", "display_name": "TraaidMark", "link": "https://stackoverflow.com/users/2377626/traaidmark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452059415, "creation_date": 1452058951, "question_id": 34626386, "link": "https://stackoverflow.com/questions/34626386/how-can-i-test-my-ruby-cli-app-while-still-in-development", "title": "How can I test my Ruby CLI app while still in development?", "body": "<p>Morning guys, </p>\n\n<p>I am writing a small Ruby CLI app for myself, and I have run into a small issue that I hope you guys can help with. Apologies if this is a stupid question, I am very new to Ruby.</p>\n\n<p>I am using <a href=\"https://github.com/davetron5000/gli\" rel=\"nofollow\">https://github.com/davetron5000/gli</a> as a foundation to build my my app since they make it easy to have all my commands and whatnot.</p>\n\n<p>Question is, while I develop the app, I can run it using <code>bundle exec bin/konstruct</code>, but that only works from the folder where the code lies.</p>\n\n<p>I want to run the app from a test folder so I can see whether the code I'm adding is doing what it should (make files, remove files, see if directory is empty, etc).</p>\n\n<p>When I played around with NodeJS, I could link the app, and it would work anywhere. Is there something like that for Ruby apps that are still in development?</p>\n"}, {"tags": ["ruby", "amazon-web-services", "aws-lambda"], "answers": [{"comments": [{"owner": {"reputation": 34195, "user_id": 4807, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7453d8a240de4b8d26869aa92743bb8e?s=128&d=identicon&r=PG", "display_name": "iMack", "link": "https://stackoverflow.com/users/4807/imack"}, "edited": false, "score": 0, "creation_date": 1452098977, "post_id": 34626871, "comment_id": 57021883, "body": "It returns 200 regardless of wether it failed or not and the function_error only says that it&#39;s been handled."}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "reply_to_user": {"reputation": 34195, "user_id": 4807, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7453d8a240de4b8d26869aa92743bb8e?s=128&d=identicon&r=PG", "display_name": "iMack", "link": "https://stackoverflow.com/users/4807/imack"}, "edited": false, "score": 0, "creation_date": 1452099864, "post_id": 34626871, "comment_id": 57022500, "body": "<code>Handled</code> and <code>Unhandled</code> would both mean there was an error, but you&#39;ll likely need to parse the payload if you need specifics."}], "tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": false, "score": 1, "last_activity_date": 1452061368, "creation_date": 1452061368, "answer_id": 34626871, "question_id": 34626323, "link": "https://stackoverflow.com/questions/34626323/how-to-know-if-context-fail-when-invoking-aws-lambda-function-from-ruby-sdk/34626871#34626871", "title": "How to know if context.fail when invoking AWS Lambda function from Ruby SDK?", "body": "<p>The <a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/Lambda/Types/InvocationResponse.html\" rel=\"nofollow\">response object</a> should include both a response code (<code>#status_code</code>) and an error string (<code>#function_error</code>). You can use either of these to detect an error:</p>\n\n<p>Using <code>#function_error</code>:</p>\n\n<pre><code>unless resp.function_error.empty?\n  # An error occured\nend\n</code></pre>\n\n<p>Using <code>#status_code</code>:</p>\n\n<pre><code>unless resp.status_code.between?(200, 299)\n  # An error occured\nend\n</code></pre>\n\n<p>(Note that the documentation only specifies success as being \"within the 200 range.\")</p>\n\n<p>There's no <code>#successful?</code> method in the documentation, so not sure where that is coming from.</p>\n"}, {"tags": [], "owner": {"reputation": 34195, "user_id": 4807, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7453d8a240de4b8d26869aa92743bb8e?s=128&d=identicon&r=PG", "display_name": "iMack", "link": "https://stackoverflow.com/users/4807/imack"}, "is_accepted": false, "score": 0, "last_activity_date": 1452108357, "last_edit_date": 1452108357, "creation_date": 1452099122, "answer_id": 34638384, "question_id": 34626323, "link": "https://stackoverflow.com/questions/34626323/how-to-know-if-context-fail-when-invoking-aws-lambda-function-from-ruby-sdk/34638384#34638384", "title": "How to know if context.fail when invoking AWS Lambda function from Ruby SDK?", "body": "<p>It appears as though parsing the <code>resp.payload</code> is the best course of action, if there is an error, the only key in that response dictionary will be <code>errorMessage</code>. 200 is returns so long as the function was invoked, and it's better to deal with the cases by looking at the returned result passed to a <code>context.fail</code>.</p>\n"}], "owner": {"reputation": 34195, "user_id": 4807, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7453d8a240de4b8d26869aa92743bb8e?s=128&d=identicon&r=PG", "display_name": "iMack", "link": "https://stackoverflow.com/users/4807/imack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1452108357, "creation_date": 1452058654, "question_id": 34626323, "link": "https://stackoverflow.com/questions/34626323/how-to-know-if-context-fail-when-invoking-aws-lambda-function-from-ruby-sdk", "title": "How to know if context.fail when invoking AWS Lambda function from Ruby SDK?", "body": "<p>When invoking an Amazon Web Service Lambda function from the ruby SDK is there any way of determining if the function encountered a context.fail?</p>\n\n<p>ie. if I invoke an AWS Lambda function like this in the ruby sdk:</p>\n\n<pre><code>    resp = LAMBDA.invoke({\n                  function_name: \"cropSomeStuff\", \n                  invocation_type: \"RequestResponse\", \n                  log_type: \"Tail\", # accepts None, Tail\n                  payload: payload.to_json\n              })\n</code></pre>\n\n<p>and the function encounters a <code>context.fail(err)</code></p>\n\n<p><code>resp.successful?</code> still return true. I can look at the logs with <code>Base64.decode64(resp.log_result)</code>, however, I don't see an easy way to programmatically tell the function invocation failed at the ruby level.</p>\n"}, {"tags": ["ruby", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 4218742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a81b8f60bcdb73eab3b82a63fa6d900?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/4218742/david"}, "edited": false, "score": 0, "creation_date": 1452155941, "post_id": 34626491, "comment_id": 57046276, "body": "Thank you, that helped a lot. I&#39;m 4 points less to be able to upvote aparently    but i wont miss it :)"}, {"owner": {"reputation": 1370, "user_id": 1939905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2EG59.png?s=128&g=1", "display_name": "overallduka", "link": "https://stackoverflow.com/users/1939905/overallduka"}, "edited": false, "score": 0, "creation_date": 1569331721, "post_id": 34626491, "comment_id": 102557160, "body": "Thank you too, this helps me a lot =)."}], "tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": true, "score": 5, "last_activity_date": 1452059437, "last_edit_date": 1495535311, "creation_date": 1452059437, "answer_id": 34626491, "question_id": 34626038, "link": "https://stackoverflow.com/questions/34626038/what-is-the-upper-limit-on-the-number-of-sidekiq-workers-we-can-have/34626491#34626491", "title": "What is the upper limit on the number of Sidekiq workers we can have?", "body": "<blockquote>\n  <p>What is the upper limit on the number of sidekiqs to run?</p>\n</blockquote>\n\n<p>You will want a <em>max</em> of one Sidekiq per processor core. If you have a dual-core processor, then 2 Sidekiqs. However, if your server is also doing other stuff such as running a webserver, you will want to leave some cores available for that.</p>\n\n<blockquote>\n  <p>how will I be able to match the number of users logged in with the number of concurrent workers?</p>\n</blockquote>\n\n<p>With Sidekiq, you pre-emptively create your threads. You essentially have a thread-pool of X idle threads which are ready to deploy at any moment should a huge surge of jobs come in. You will need to create as many threads as the max number of jobs you think you will have at any time. However going over 50 threads per core is not a good idea for performance reasons (the amount of time switching between a huge number of threads <a href=\"https://stackoverflow.com/a/34582442/276949\">significantly cuts into the CPU time</a> allocated for the threads to do actual work).</p>\n\n<blockquote>\n  <p>Is there a technology stack I can use to launch these workers? Something like unicorn to have a pool of workers? Can i even use unicorn with sidekiq ?</p>\n</blockquote>\n\n<p>You can't use Unicorn for this. You need some process supervisor to <a href=\"https://github.com/mperham/sidekiq/wiki/Deployment#daemonization\" rel=\"nofollow noreferrer\">handle starting/restarting</a> of Sidekiq. Their wiki recommends Upstart or systemd, but I've found that <a href=\"http://supervisord.org/\" rel=\"nofollow noreferrer\">Supervisor</a> works incredibly well, and is really easy to set-up.</p>\n"}], "owner": {"reputation": 88, "user_id": 4218742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a81b8f60bcdb73eab3b82a63fa6d900?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/4218742/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 34626491, "answer_count": 1, "score": 1, "last_activity_date": 1452059437, "creation_date": 1452057061, "question_id": 34626038, "link": "https://stackoverflow.com/questions/34626038/what-is-the-upper-limit-on-the-number-of-sidekiq-workers-we-can-have", "title": "What is the upper limit on the number of Sidekiq workers we can have?", "body": "<p>I am new to sidekiq, my requirement is that there can be as many high priority jobs as the number of users logged into the system. Lets sat each user is expecting a notification soon as his job is processed.</p>\n\n<p>I have one sidekiq daemon running with concurrency of 50 so at a time I can have just 50 jobs processing? I have read that the <a href=\"https://github.com/mperham/sidekiq/wiki/Deployment\" rel=\"nofollow\">wiki</a> states we should have multiple sidekiqs running. </p>\n\n<ol>\n<li>What is the upper limit on the number of sidekiqs to run? </li>\n<li>how will I be able to match the number of users logged in with the number of concurrent workers? </li>\n<li>Is there a technology stack I can use to launch these workers? Something like unicorn to have a pool of workers? Can i even use unicorn with sidekiq ?</li>\n</ol>\n"}, {"tags": ["jquery", "html", "ruby-on-rails", "ruby", "ajax"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5399649, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/UY3XU.png?s=128&g=1", "display_name": "kambo_trick3y", "link": "https://stackoverflow.com/users/5399649/kambo-trick3y"}, "edited": false, "score": 0, "creation_date": 1452100419, "post_id": 34629418, "comment_id": 57022907, "body": "That&#39;s correct Andrew, I&#39;ve been taking a look on youtube and it seems faye can accomplish what I needed. My app is sorta going to go like this:  <a href=\"https://www.youtube.com/watch?v=QSjpv86vNAM\" rel=\"nofollow noreferrer\">youtube.com/watch?v=QSjpv86vNAM</a>  Except instead of squares, they will be table circles. Regardless, I have a sense of direction now and I&#39;ll see if I can figure this gem out, thanks a bunch!"}], "tags": [], "owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "is_accepted": false, "score": 1, "last_activity_date": 1452142491, "last_edit_date": 1452142491, "creation_date": 1452071907, "answer_id": 34629418, "question_id": 34625997, "link": "https://stackoverflow.com/questions/34625997/how-do-i-get-this-ajax-request-to-work-in-my-ruby-on-rails-table-reservation-app/34629418#34629418", "title": "How do I get this AJAX request to work in my Ruby on Rails Table Reservation App?", "body": "<p>It sounds like you are trying to update a Owners' browser when the User makes a reservation.</p>\n\n<p>If this is the case, you will have to use AJAX/JS, but that is not all.  You will need a pub sub system as well.</p>\n\n<p>ActionCable is the new Rails 5 way of doing this, but it is brand new and just merged into Rails.  There is also a gem called faye that has been around for quite a while that can do the job.</p>\n\n<p>Here are some links to get you started:</p>\n\n<p><a href=\"https://github.com/rails/rails/tree/master/actioncable\" rel=\"nofollow\">https://github.com/rails/rails/tree/master/actioncable</a></p>\n\n<p><a href=\"https://github.com/faye/faye\" rel=\"nofollow\">https://github.com/faye/faye</a></p>\n\n<p><a href=\"https://github.com/jamesotron/faye-rails\" rel=\"nofollow\">https://github.com/jamesotron/faye-rails</a></p>\n\n<p>I hope I understand your goal and that you find this helpful.  If not, comment and I will try and improve my answer.</p>\n"}], "owner": {"reputation": 53, "user_id": 5399649, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/UY3XU.png?s=128&g=1", "display_name": "kambo_trick3y", "link": "https://stackoverflow.com/users/5399649/kambo-trick3y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1452142491, "creation_date": 1452056813, "question_id": 34625997, "link": "https://stackoverflow.com/questions/34625997/how-do-i-get-this-ajax-request-to-work-in-my-ruby-on-rails-table-reservation-app", "title": "How do I get this AJAX request to work in my Ruby on Rails Table Reservation App?", "body": "<p>Okay guys, lengthy question, but going to try and keep this as condensed as possible.</p>\n\n<p>I have a table reservation app I'm trying to create, looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dQT6o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dQT6o.png\" alt=\"Table Reservation App\"></a></p>\n\n<p><strong>When you click on any of the booths or the tables in the map, the \"Table ID\" field fills up with the number of the table you just selected (i.e table number \"A1\", etc). Afterwards, once you hit \"Create a Reservation\" the table then turns yellow to signify that the User who is currently signed in is now reserving the table.</strong></p>\n\n<p>The app works fine, I was able to get the table to highlight in yellow (to show a successful reservation) and to get the User's email to become associated with the table upon making a reservation. There's a problem though.</p>\n\n<p><strong>There are two types accounts, \"Users\" (the customer), and \"Owners\" (the actual owner of the restaurant you are currently trying to make a reservation for). On the Users side, they can see the table reserved, but I want the OWNER to also see that the User made the reservation as well (I want it to update dynamically, the moment the User creates the reservation and the table highlights in yellow to show that the reservation is good to go, so will the Owner).</strong></p>\n\n<p>I was told AJAX was the way to go for this, but I have never used AJAX before in  my life, and the tutorials I am looking at also aren't quite tailored to the project I am making as well, this is kind of unique. </p>\n\n<p>Here is my code so far and here's what I have tried so far.</p>\n\n<p><strong>This is the Reservations / Index.html.erb file</strong></p>\n\n<pre><code>&lt;div class=\"house\"&gt;\n\n    &lt;%= image_tag(\"restaurant-floor.jpg\", class: \"floor\") %&gt;\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"top-right-booth-empty\") %&gt;\n\n    &lt;%= image_tag(\"toprightbooth.png\", class: \"top-right-booth\") %&gt;\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"top-left-booth-empty\") %&gt;\n\n    &lt;%= image_tag(\"northleft.png\", class: \"top-left-booth\") %&gt;\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"diagonal-upper-left-booth-empty\") %&gt;\n\n    &lt;%= image_tag(\"upperleftbooth.png\", class: \"diagonal-upper-left-booth\") %&gt;\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"left-booth-empty\") %&gt;\n\n    &lt;%= image_tag(\"leftbooth.png\", class: \"left-booth\") %&gt;\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"diagonal-bottom-left-booth-empty\") %&gt;\n\n    &lt;%= image_tag(\"bottomleftbooth.png\", class: \"diagonal-bottom-left-booth\") %&gt;\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"bottom-left-booth-empty\") %&gt;\n\n    &lt;%= image_tag(\"bottomleft.png\", class: \"bottom-left-booth\") %&gt;\n\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"bottom-right-booth-empty\") %&gt;\n\n    &lt;%= image_tag(\"bottomrightbooth.png\", class: \"bottom-right-booth\") %&gt;\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"round-table-left-bottom-empty\") %&gt;\n\n    &lt;%= image_tag(\"roundtable.png\", class: \"round-table-left-bottom\") %&gt;\n\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"round-table-left-top-empty\") %&gt;\n\n    &lt;%= image_tag(\"roundtable.png\", class: \"round-table-left-top\") %&gt;\n\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"round-table-middle-top-left-empty\") %&gt; \n\n    &lt;%= image_tag(\"roundtable.png\", class: \"round-table-middle-top-left\") %&gt;\n\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"round-table-middle-top-middle-empty\") %&gt; \n\n    &lt;%= image_tag(\"roundtable.png\", class: \"round-table-middle-top-middle\") %&gt;\n\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"round-table-middle-top-right-empty\") %&gt; \n\n    &lt;%= image_tag(\"roundtable.png\", class: \"round-table-middle-top-right\") %&gt;\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"round-table-middle-bottom-left-empty\") %&gt; \n\n    &lt;%= image_tag(\"roundtable.png\", class: \"round-table-middle-bottom-left\") %&gt;\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"round-table-middle-bottom-middle-empty\") %&gt; \n\n    &lt;%= image_tag(\"roundtable.png\", class: \"round-table-middle-bottom-middle\") %&gt;\n\n    &lt;%= content_tag(:div, nil, remote: true, class: \"round-table-middle-bottom-right-empty\") %&gt; \n\n    &lt;%= image_tag(\"roundtable.png\", class: \"round-table-middle-bottom-right\") %&gt;\n\n\n    &lt;%= render 'reservation_form' %&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>This is the reservations form:</strong></p>\n\n<pre><code>&lt;%= form_for @reservation, remote: true do |f| %&gt;\n    &lt;%= f.label :num_of_people, \"Number of Guests\"%&gt;\n  &lt;%= f.number_field :num_of_people %&gt;\n  &lt;br /&gt;\n  &lt;br /&gt;\n  &lt;%= f.label :reservation_time, \"Reservation Time\" %&gt;\n  &lt;%= f.time_field :reservation_time %&gt;\n  &lt;br /&gt;\n  &lt;br /&gt;\n  &lt;%= f.label :table_id, \"Table ID\"%&gt;\n&lt;%= f.text_field :table_id, value: \"\" %&gt;\n  &lt;br /&gt;\n  &lt;br /&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>This is the CSS</strong></p>\n\n<pre><code>.navbar-nav img{\n    margin-top: 3%;\n    width: 27%;\n}\n\n.wrapper{\n    margin-top: 50px;\n}\n\n#signup-popup {\n    border: 1px solid red;\n    width: 35%;\n    margin: auto;\n    height: 600px;\n    text-align: center;\n    vertical-align: middle;\n    display: none;\n}\n\n#signin-popup {\n    border: 1px solid red;\n    width: 35%;\n    margin: auto;\n    height: 600px;\n    text-align: center;\n    vertical-align: middle;\n    display: none;\n}\n\n#signin-popup p{\n    margin-top: 10%;\n}\n\n#signin-popup img{\n    width: 30%;\n    top:0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n\n#signup-popup p{\n    margin-top: 10%;\n}\n\n#signup-popup img{\n    width: 30%;\n    top:0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n\n#flash{\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    margin: 0 auto;\n    text-align: center;\n    z-index: 100;\n    width: 100%;\n    border: 1px solid red;\n    display: none;\n}\n\n\n.navbar-default{\n    padding-right: 15%;\n    padding-left: 15%;\n    position: fixed;\n    z-index: 9999;\n    width: 100%;\n    top: 0;\n}\n\n\n.banner{\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n    width: 66%;\n    height: 65vh;\n}\n\n.floor{\n    margin-top: 124px;\n    width: 1100px;\n    margin-left: 300px;\n}\n\n.top-right-booth{\n    position: absolute;\n    top: 229px;\n    left: 614px;\n    width: 100px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.top-right-booth-empty{\n    position: absolute;\n    top: 229px;\n    left: 614px;\n    width: 100px;\n    height: 90px;\n    cursor: pointer;\n    cursor: hand;\n}\n\n\n.top-left-booth{\n    position: absolute;\n    top: 238px;\n    left: 452px;\n    width: 100px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n\n}\n\n.top-left-booth-empty{\n    position: absolute;\n    top: 238px;\n    left: 452px;\n    width: 100px;\n    height: 90px;\n    cursor: pointer;\n    cursor: hand;\n\n}\n\n.diagonal-upper-left-booth{\n    position: absolute;\n    top: 265px;\n    left: 338px;\n    width: 100px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.diagonal-upper-left-booth-empty{\n    position: absolute;\n    top: 265px;\n    left: 338px;\n    width: 100px;\n    height: 90px;\n    cursor: pointer;\n    cursor: hand;\n\n}\n\n.left-booth{\n    position: absolute;\n    top: 401px;\n    left: 307px;\n    width: 80px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.left-booth-empty{\n    position: absolute;\n    top: 401px;\n    left: 307px;\n    width: 80px;\n    height: 90px;\n    cursor: pointer;\n    cursor: hand;\n\n}\n\n.diagonal-bottom-left-booth{\n    position: absolute;\n    top: 522px;\n    left: 338px;\n    width: 100px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.diagonal-bottom-left-booth-empty{\n    position: absolute;\n    top: 528px;\n    left: 338px;\n    width: 100px;\n    height: 90px;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.bottom-left-booth{\n    position: absolute;\n    top: 566px;\n    left: 454px;\n    width: 100px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.bottom-left-booth-empty{\n    position: absolute;\n    top: 566px;\n    left: 454px;\n    width: 100px;\n    height: 90px;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.bottom-right-booth{\n    position: absolute;\n    top: 578px;\n    left: 615px;\n    width: 100px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.bottom-right-booth-empty{\n    position: absolute;\n    top: 578px;\n    left: 615px;\n    width: 100px;\n    height: 90px;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.round-table-left-bottom{\n    position: absolute;\n    top: 465px;\n    left: 446px;\n    width: 80px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.round-table-left-bottom-empty{\n    position: absolute;\n    top: 465px;\n    left: 446px;\n    width: 80px;\n    height: 80px;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.round-table-left-top{\n    position: absolute;\n    top: 366px;\n    left: 446px;\n    width: 80px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.round-table-left-top-empty{\n    position: absolute;\n    top: 366px;\n    left: 446px;\n    width: 80px;\n    height: 80px;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.round-table-middle-top-left{\n    position: absolute;\n    top: 350px;\n    left: 700px;\n    width: 80px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.round-table-middle-top-left-empty{\n    position: absolute;\n    top: 350px;\n    left: 700px;\n    width: 80px;\n    height: 80px;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.round-table-middle-top-middle{\n    position: absolute;\n    top: 350px;\n    left: 805px;\n    width: 80px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.round-table-middle-top-middle-empty{\n    position: absolute;\n    top: 350px;\n    left: 805px;\n    width: 80px;\n    height: 80px;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.round-table-middle-top-right{\n    position: absolute;\n    top: 350px;\n    left: 920px;\n    width: 80px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.round-table-middle-top-right-empty{\n    position: absolute;\n    top: 350px;\n    left: 920px;\n    width: 80px;\n    height: 80px;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.round-table-middle-bottom-left{\n    position: absolute;\n    top: 450px;\n    left: 700px;\n    width: 80px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.round-table-middle-bottom-left-empty{\n    position: absolute;\n    top: 450px;\n    left: 700px;\n    width: 80px;\n    height: 80px;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.round-table-middle-bottom-middle{\n    position: absolute;\n    top: 450px;\n    left: 807px;\n    width: 80px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.round-table-middle-bottom-middle-empty{\n    position: absolute;\n    top: 450px;\n    left: 807px;\n    width: 80px;\n    height: 80px;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.round-table-middle-bottom-right{\n    position: absolute;\n    top: 450px;\n    left: 920px;\n    width: 80px;\n    display: none;\n    cursor: pointer;\n    cursor: hand;   \n}\n\n.round-table-middle-bottom-right-empty{\n    position: absolute;\n    top: 450px;\n    left: 920px;\n    width: 80px;\n    height: 80px;\n    cursor: pointer;\n    cursor: hand;\n}\n\n#new_reservation{\n    text-align: center;\n    padding: 5px;\n    margin: 2%;\n    width: 40%;\n    margin: 0 auto;\n}\n\n#myform {\n    text-align: center;\n    padding: 5px;\n    border: 1px solid red;\n    margin: 2%;\n    width: 40%;\n    margin: 0 auto;\n}\n.qty {\n    width: 40px;\n    height: 25px;\n    text-align: center;\n}\ninput.qtyplus { width:25px; height:25px;}\ninput.qtyminus { width:25px; height:25px;}\n</code></pre>\n\n<p><strong>This is the JS File:</strong></p>\n\n<pre><code>$(document).ready(function() {\n    $(\"#flash\").fadeOut(1800);\n    $(\".signup\").on(\"click\",function() {\n        $(\"#signup-popup\").show();\n    });\n    $(\".signin\").on(\"click\",function() {\n        $(\"#signin-popup\").show();\n    });\n\n    $(\".top-right-booth-empty\").on(\"click\",function() {\n        $(\".top-right-booth\").show();\n        $(\".top-right-booth\").on(\"click\",function() {\n            $(\".top-right-booth\").hide();\n        });\n    });\n\n\n    $(\".top-left-booth-empty\").on(\"click\",function() {\n        $(\".top-left-booth\").show();\n        $(\".top-left-booth\").on(\"click\",function() {\n            $(\".top-left-booth\").hide();\n        });\n    });\n\n    $(\".diagonal-upper-left-booth-empty\").on(\"click\",function() {\n        $(\".diagonal-upper-left-booth\").show();\n        $(\".diagonal-upper-left-booth\").on(\"click\",function() {\n            $(\".diagonal-upper-left-booth\").hide();\n        });\n    });     \n\n    $(\".left-booth-empty\").on(\"click\",function() {\n        $(\".left-booth\").show();\n        $(\".left-booth\").on(\"click\",function() {\n            $(\".left-booth\").hide();\n        });\n    });\n\n    $(\".diagonal-bottom-left-booth-empty\").on(\"click\",function() {\n        $(\".diagonal-bottom-left-booth\").show();\n        $(\".diagonal-bottom-left-booth\").on(\"click\",function() {\n            $(\".diagonal-bottom-left-booth\").hide();\n        });\n    });\n\n    $(\".bottom-left-booth-empty\").on(\"click\",function() {\n        $(\".bottom-left-booth\").show();\n        $(\".bottom-left-booth\").on(\"click\",function() {\n            $(\".bottom-left-booth\").hide();\n        });\n    });\n\n    $(\".bottom-right-booth-empty\").on(\"click\",function() {\n        $(\".bottom-right-booth\").show();\n        $(\".bottom-right-booth\").on(\"click\",function() {\n            $(\".bottom-right-booth\").hide();\n        });\n    });\n\n    $(\".round-table-left-bottom-empty\").on(\"click\",function() {\n        $(\".round-table-left-bottom\").show();\n        $(\".round-table-left-bottom\").on(\"click\",function() {\n            $(\".round-table-left-bottom\").hide();\n        }); \n    });\n\n    $(\".round-table-left-top-empty\").on(\"click\",function() {\n        $(\".round-table-left-top\").show();\n        $(\".round-table-left-top\").on(\"click\",function() {\n            $(\".round-table-left-top\").hide();\n        }); \n    });\n\n    $(\".round-table-middle-top-left-empty\").on(\"click\",function() {\n        $(\".round-table-middle-top-left\").show();\n        $(\".round-table-middle-top-left\").on(\"click\",function() {\n            $(\".round-table-middle-top-left\").hide();\n        }); \n    });\n\n    $(\".round-table-middle-top-middle-empty\").on(\"click\",function() {\n        $(\".round-table-middle-top-middle\").show();\n        $(\".round-table-middle-top-middle\").on(\"click\",function() {\n            $(\".round-table-middle-top-middle\").hide();\n        }); \n    });\n\n    $(\".round-table-middle-top-right-empty\").on(\"click\",function() {\n        $(\".round-table-middle-top-right\").show();\n        $(\".round-table-middle-top-right\").on(\"click\",function() {\n            $(\".round-table-middle-top-right\").hide();\n        }); \n    });\n\n    $(\".round-table-middle-bottom-left-empty\").on(\"click\",function() {\n        $(\".round-table-middle-bottom-left\").show();\n        $(\".round-table-middle-bottom-left\").on(\"click\",function() {\n            $(\".round-table-middle-bottom-left\").hide();\n        }); \n    }); \n\n    $(\".round-table-middle-bottom-middle-empty\").on(\"click\",function() {\n        $(\".round-table-middle-bottom-middle\").show();\n        $(\".round-table-middle-bottom-middle\").on(\"click\",function() {\n            $(\".round-table-middle-bottom-middle\").hide();\n        }); \n    });\n\n    $(\".round-table-middle-bottom-right-empty\").on(\"click\",function() {\n        $(\".round-table-middle-bottom-right\").show();\n        $(\".round-table-middle-bottom-right\").on(\"click\",function() {\n            $(\".round-table-middle-bottom-right\").hide();\n        });         \n    });\n\n    $(\".top-right-booth-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"A1\");   \n    });\n\n    $(\".top-left-booth-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"A2\");   \n    });\n\n    $(\".diagonal-upper-left-booth-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"A3\");   \n    });\n\n    $(\".left-booth-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"A4\");   \n    });\n\n    $(\".diagonal-bottom-left-booth-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"A5\");   \n    });\n\n    $(\".bottom-left-booth-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"A6\");   \n    });\n\n    $(\".bottom-right-booth-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"A7\");   \n    });\n\n    $(\".round-table-left-bottom-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"B1\");   \n    });\n\n    $(\".round-table-left-top-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"B2\");   \n    }); \n\n    $(\".round-table-middle-top-left-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"B3\");   \n    }); \n\n    $(\".round-table-middle-top-middle-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"B4\");   \n    }); \n\n    $(\".round-table-middle-top-right-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"B5\");   \n    }); \n\n    $(\".round-table-middle-bottom-left-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"B6\");   \n    }); \n\n    $(\".round-table-middle-bottom-middle-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"B7\");   \n    }); \n\n    $(\".round-table-middle-bottom-right-empty\").on(\"click\",function() {\n        $(\"#reservation_table_id\").val(\"B8\");   \n    });     \n\n});\n</code></pre>\n\n<p><strong>And this is the Reservations Controller</strong></p>\n\n<pre><code>class ReservationsController &lt; ApplicationController\n  def index\n    @reservation = Reservation.new\n  end\n\n\n  def create\n    @reservation = Reservation.new(reservation_params.merge(email: current_user.email, user_id: current_user.id))\n    # @reservation.table \n    @reservation.save\n\n    respond_to do |format|\n      format.html { redirect_to reservations_path }\n      format.js # render reservations/create.js.erb\n    end\n  end\n\n  private\n\n  def reservation_params\n    params.require(:reservation).permit(:num_of_people, :reservation_time, :table_id, :email, :user_id)\n  end\nend\n</code></pre>\n\n<p><strong>I was trying to follow some tutorials so I created a create.js.erb file in the reservations folder and added this code:</strong></p>\n\n<pre><code>$('').append(@reservations)\n</code></pre>\n\n<p>However, I realized something, I have no idea what to put for the single quotes after the dollar sign. I've seen this done for blog comments and the like, but my project is different. For my project, you have to click on a div element (which could be ANY of those possible 15 tables on that table map), which is then anchored to a value located in the Table ID form field. Does anyone have any idea of how I would go about doing this or even yet, if I do manage to get on the right track, how I would even check to see if AJAX is remotely working?</p>\n"}, {"tags": ["arrays", "ruby", "dictionary", "nested"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1452054429, "post_id": 34625605, "comment_id": 56997000, "body": "What is <code>i</code>? ..............."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1452054469, "post_id": 34625605, "comment_id": 56997008, "body": "@sawa: I believe it is supposed to be the index of the <code>map</code> in the following line... a bit of time travel..."}, {"owner": {"reputation": 1, "user_id": 5689107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2pUQ7.jpg?s=128&g=1", "display_name": "Brendan Arthur Ring", "link": "https://stackoverflow.com/users/5689107/brendan-arthur-ring"}, "edited": false, "score": 0, "creation_date": 1452054734, "post_id": 34625605, "comment_id": 56997082, "body": "Have seen i used as a counter variable in other examples.  In this case would like arr&#39;s index to count up along with the number of times arr2 is mapped to arr3."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1452068020, "post_id": 34625605, "comment_id": 57002011, "body": "Brendan, I see you&#39;ve received 4 votes to close. That&#39;s too bad, as there are some interesting answers. I hope you will edit to clarify the question. Those who have answered have all made the same assumption about what you want. If they are correct, I suggest you just show your given inputs and desired output. <code>arr2</code> is expecially a problem, since <code>i</code> is not defined. This often happens, incidentally, when someone posts a question and then walks away."}, {"owner": {"reputation": 1, "user_id": 5689107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2pUQ7.jpg?s=128&g=1", "display_name": "Brendan Arthur Ring", "link": "https://stackoverflow.com/users/5689107/brendan-arthur-ring"}, "edited": false, "score": 0, "creation_date": 1452090137, "post_id": 34625605, "comment_id": 57015757, "body": "Sorry, I haven&#39;t walked away.  This is the second time to post a question here on stack overflow.  So I apologize for not knowing the rules of conduct.  Haven&#39;t meant to offend.  And greatly appreciate everyone&#39;s answers."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1452134754, "post_id": 34625605, "comment_id": 57038792, "body": "I&#39;m perplexed why you won&#39;t clarify your question with an edit. For information on how SO works, <a href=\"http://stackoverflow.com/help\">this</a> is a good starting point."}], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1452058835, "post_id": 34625671, "comment_id": 56998328, "body": "cool solution. I suggest if you replace <code>3</code> with <code>x</code> it looks more similar to OP&#39;s requirement"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1452054661, "creation_date": 1452054661, "answer_id": 34625671, "question_id": 34625605, "link": "https://stackoverflow.com/questions/34625605/map-array-iterate-nested-array/34625671#34625671", "title": "Map array, iterate nested array", "body": "<pre><code>(\"a\"...\"z\").first(3).map{|chr| [1, 2, chr, 4]}.join\n# =&gt; \"12a412b412c4\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1452058545, "post_id": 34625675, "comment_id": 56998234, "body": "@mudasobwa: Good point; I ignored that <code>join</code> flattens the list."}, {"owner": {"reputation": 1, "user_id": 5689107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2pUQ7.jpg?s=128&g=1", "display_name": "Brendan Arthur Ring", "link": "https://stackoverflow.com/users/5689107/brendan-arthur-ring"}, "edited": false, "score": 0, "creation_date": 1452089713, "post_id": 34625675, "comment_id": 57015469, "body": "What does the &amp; do in line 4?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 1, "user_id": 5689107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2pUQ7.jpg?s=128&g=1", "display_name": "Brendan Arthur Ring", "link": "https://stackoverflow.com/users/5689107/brendan-arthur-ring"}, "edited": false, "score": 0, "creation_date": 1452089810, "post_id": 34625675, "comment_id": 57015539, "body": "Promotes the <code>Proc</code> created by <code>lambda</code> into a block."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 3, "last_activity_date": 1452058560, "last_edit_date": 1452058560, "creation_date": 1452054699, "answer_id": 34625675, "question_id": 34625605, "link": "https://stackoverflow.com/questions/34625605/map-array-iterate-nested-array/34625675#34625675", "title": "Map array, iterate nested array", "body": "<p>I am not sure what you are doing, so sticking as close to to your original code:</p>\n\n<pre><code>x = 3\narr = (\"a\"..\"z\").to_a\narr2_generator = lambda { |i| [1, 2, arr[i], 4] }\narr3 = x.times.map(&amp;arr2_generator)\nputs arr3.join\n</code></pre>\n\n<p>There is no way to use <code>i</code> before you actually define it, and no way to define it statically because it changes from one instance to another - i.e. there is no way to write <code>arr2</code> such that it would change later. Instead, we use a lambda expression, that will accept an <code>i</code> and give <code>[1, 2, arr[i], 4]</code>.</p>\n\n<p>Finally, if you just print the array, you will get one element per row; so I use <code>join</code> to smush everything into one string.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1452067710, "last_edit_date": 1452067710, "creation_date": 1452066986, "answer_id": 34628164, "question_id": 34625605, "link": "https://stackoverflow.com/questions/34625605/map-array-iterate-nested-array/34628164#34628164", "title": "Map array, iterate nested array", "body": "<pre><code>enum = ('a'..'z').to_enum\n3.times.map { [1,2,enum.next,4] }.join\n  #=&gt; \"12a412b412c4\" \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1452069168, "creation_date": 1452069168, "answer_id": 34628658, "question_id": 34625605, "link": "https://stackoverflow.com/questions/34625605/map-array-iterate-nested-array/34628658#34628658", "title": "Map array, iterate nested array", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-c-new\" rel=\"nofollow\"><code>Array::new</code></a> with a block:</p>\n\n<pre><code>x = 3\narr = (\"a\"..\"z\").to_a\nArray.new(x) { |i| [1, 2, arr[i], 4] }.join\n#=&gt; \"12a412b412c4\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5689107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2pUQ7.jpg?s=128&g=1", "display_name": "Brendan Arthur Ring", "link": "https://stackoverflow.com/users/5689107/brendan-arthur-ring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1452491240, "answer_count": 4, "score": -2, "last_activity_date": 1452069168, "creation_date": 1452054213, "last_edit_date": 1452054507, "question_id": 34625605, "link": "https://stackoverflow.com/questions/34625605/map-array-iterate-nested-array", "closed_reason": "Needs details or clarity", "title": "Map array, iterate nested array", "body": "<p>Please refer to the following code:</p>\n\n<pre><code>x = 3\narr = (\"a\"..\"z\").to_a\narr2 = [1, 2, arr[ i ], 4]\narr3 = arr2.map * x\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>arr3 # =&gt; 12a412b412c4\n</code></pre>\n\n<p>What is the best practice to achieve this output?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 816, "user_id": 1547669, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a15cfaaad27177e7a8a161a0403d8ab1?s=128&d=identicon&r=PG", "display_name": "JohnSalzarulo", "link": "https://stackoverflow.com/users/1547669/johnsalzarulo"}, "edited": false, "score": 0, "creation_date": 1452053209, "post_id": 34625324, "comment_id": 56996628, "body": "Paperclip is fantastic. Highly recommend."}], "tags": [], "owner": {"reputation": 1100, "user_id": 1415546, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/092770076bb0cf421bacba912565331d?s=128&d=identicon&r=PG", "display_name": "NateSHolland", "link": "https://stackoverflow.com/users/1415546/natesholland"}, "is_accepted": false, "score": 1, "last_activity_date": 1452052254, "creation_date": 1452052254, "answer_id": 34625324, "question_id": 34625062, "link": "https://stackoverflow.com/questions/34625062/read-data-image-upload-from-web-and-save-them-in-a-database/34625324#34625324", "title": "Read data image, upload from web and save them in a database", "body": "<p>I would recommend that you use a gem like carrierwave: <a href=\"https://github.com/carrierwaveuploader/carrierwave\" rel=\"nofollow\">https://github.com/carrierwaveuploader/carrierwave</a></p>\n\n<p>You really should not save a picture into a database. Instead you should store the image on some sort of other datastore and put a pointer to it in your database. Carrierwave makes this very easy and has different adapters to store the images on your local filesystem, S3, SFTP, or NFS.</p>\n\n<p>Thoughtbot's Paperclip is another good alternative: <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow\">https://github.com/thoughtbot/paperclip</a></p>\n"}], "owner": {"reputation": 97, "user_id": 5023958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53f7148b3f29b618caadcd5c4043ecb1?s=128&d=identicon&r=PG&f=1", "display_name": "vance", "link": "https://stackoverflow.com/users/5023958/vance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452052254, "creation_date": 1452050277, "question_id": 34625062, "link": "https://stackoverflow.com/questions/34625062/read-data-image-upload-from-web-and-save-them-in-a-database", "title": "Read data image, upload from web and save them in a database", "body": "<p>I'm newest in ruby on rails developpement and i would like what is the best way to save an pictures/image from the controller of my web page. I try with something like this:</p>\n\n<pre><code>@fin = File.open(params[:photos] , \"rb\")\n@img = @fin.read\n</code></pre>\n\n<p>I think you have understand my reasoning. At the end I want to be able to save my picture into my database. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2637, "user_id": 3223249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hri7E.jpg?s=128&g=1", "display_name": "Inpego", "link": "https://stackoverflow.com/users/3223249/inpego"}, "is_accepted": true, "score": 2, "last_activity_date": 1452050819, "creation_date": 1452050819, "answer_id": 34625127, "question_id": 34624896, "link": "https://stackoverflow.com/questions/34624896/how-to-display-form-elements-when-using-shallow-nesting-in-rails/34625127#34625127", "title": "How to display form elements when using shallow nesting in rails?", "body": "<p>Just check <code>params[:application_id]</code>:</p>\n\n<pre><code>&lt;%= render 'menu' if params[:application_id].blank? %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1880, "user_id": 5508939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fCMtP.jpg?s=128&g=1", "display_name": "Yang", "link": "https://stackoverflow.com/users/5508939/yang"}, "is_accepted": false, "score": 2, "last_activity_date": 1452057896, "creation_date": 1452057896, "answer_id": 34626179, "question_id": 34624896, "link": "https://stackoverflow.com/questions/34624896/how-to-display-form-elements-when-using-shallow-nesting-in-rails/34626179#34626179", "title": "How to display form elements when using shallow nesting in rails?", "body": "<p>I think you can check if the parameter <code>application_id</code> is <code>nil</code> and set it in a hidden field if it is not <code>nil</code> coming from option #1.</p>\n\n<p>Code example: </p>\n\n<pre><code>&lt;%if params[:application_id].nil? %&gt;\n  display your dropdown here\n&lt;%else%&gt;\n  &lt;%= f.hidden_field :application_id, :value =&gt; params[:application_id] %&gt;\n&lt;%end%&gt;\n</code></pre>\n"}], "owner": {"reputation": 9140, "user_id": 1007727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cb37f072befac0347afe7b51050e23e?s=128&d=identicon&r=PG", "display_name": "Deano", "link": "https://stackoverflow.com/users/1007727/deano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34625127, "answer_count": 2, "score": 1, "last_activity_date": 1452057896, "creation_date": 1452049192, "question_id": 34624896, "link": "https://stackoverflow.com/questions/34624896/how-to-display-form-elements-when-using-shallow-nesting-in-rails", "title": "How to display form elements when using shallow nesting in rails?", "body": "<p>I'm using shallow nesting in Rails, similar to the example <a href=\"http://www.xyzpub.com/en/ruby-on-rails/4.0/routes_resources.html#routes_nested_resources\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>My routes.rb is configured with:</p>\n\n<pre><code>  resources :applications do\n    resources :domains, shallow: true\n  end\n</code></pre>\n\n<p>I have used rails scaffold to generate both models and associations, in order to add new domain to application, I can get there via </p>\n\n<p><strong><em>option #1</em></strong> </p>\n\n<pre><code>   /domains/new\n</code></pre>\n\n<p><strong><em>option #2</em></strong> via its parent resource</p>\n\n<pre><code>   /applications/:application_id/domains/new\n</code></pre>\n\n<p>Currently the form displays drop down to associate domain with its parent upon creation. </p>\n\n<p><a href=\"https://i.stack.imgur.com/DFVh2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DFVh2.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I hide this dropdown menu option if user get to the form via option 2 and display if if user get to the form via option 1? </p>\n\n<p>Your thoughts is highly appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "multi-tenant"], "comments": [{"owner": {"reputation": 329, "user_id": 2434248, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/879c00aa9ad2936f978e11eee7e4aede?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/2434248/vijay"}, "edited": false, "score": 0, "creation_date": 1459541966, "post_id": 34624857, "comment_id": 60349551, "body": "Update: Been doing this in a low traffic site and haven&#39;t seen any issues to date."}], "answers": [{"tags": [], "owner": {"reputation": 329, "user_id": 2434248, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/879c00aa9ad2936f978e11eee7e4aede?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/2434248/vijay"}, "is_accepted": true, "score": 0, "last_activity_date": 1460157622, "creation_date": 1460157622, "answer_id": 36510833, "question_id": 34624857, "link": "https://stackoverflow.com/questions/34624857/multi-tenant-and-use-of-ruby-delegate-vs-nosql-for-tenant-context/36510833#36510833", "title": "multi-tenant and use of ruby delegate vs NoSQL for tenant context", "body": "<p>I've run this successfully on a low traffic site.  The rails back end handles this pretty well in outputting to json.</p>\n\n<p>Realized its better to use the tenant version as the foreign key and delegate master attributes to tenant.  Looks something like this:</p>\n\n<pre><code>Class EquipmentList &lt; ActiveRecord::Base\n  attr_accessible :name, :category_id\n\n  has_one :tenant_equipment_list\n\n\n\nend\n\nClass TenantEquipmentList &lt; ActiveRecord::Base\n  attr_accessible :alt_name, :group, :sku, :est_price, :equipment_list_id\n\n  belongs_to :equipment_list\n\n  delegate :name, to: tenant_equipment_list #prefix: true if you want\n\n  default_scope { where(tenant_id: Tenant.current_id) }\nend\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 2434248, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/879c00aa9ad2936f978e11eee7e4aede?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/2434248/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 36510833, "answer_count": 1, "score": 1, "last_activity_date": 1460157622, "creation_date": 1452048948, "question_id": 34624857, "link": "https://stackoverflow.com/questions/34624857/multi-tenant-and-use-of-ruby-delegate-vs-nosql-for-tenant-context", "title": "multi-tenant and use of ruby delegate vs NoSQL for tenant context", "body": "<p>I have a multi-tenant app (rails backend) and I need to mix a tenant-agnostic pre-populated list of items with tenant specific attributes. </p>\n\n<p>Was wondering if I anyone has used delegate to get this done and had ok performance vs. venturing out of Postgres into MongoDB</p>\n\n<p>example models:</p>\n\n<pre><code>Class EquipmentList &lt; ActiveRecord::Base\n  attr_accessible :name, :category_id\n\n  has_one :tenant_equipment_list\n\n  delegate :alt_name, to: tenant_equipment_list\n\nend\n\nClass TenantEquipmentList &lt; ActiveRecord::Base\n  attr_accessible :alt_name, :group, :sku, :est_price, :equipment_list_id\n\n  belongs_to :equipment_list\n\n  default_scope { where(tenant_id: Tenant.current_id) }\nend\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1452106576, "post_id": 34628082, "comment_id": 57026722, "body": "Thank you for responding.  I removed the <code>:format =&gt; html</code> from the view, also removed a <code>post</code> route I&#39;d erroneously added to the routes.  Here&#39;s the routing: <code>GET      &#47;cpe_course_description_live(.:format)              cpe_events#cpe_course_description_live</code>  I&#39;m now, again, getting <code>:format =&gt; 15</code>, 15 being the id.  The params being passed are: <code>{&quot;controller&quot;=&gt;&quot;cpe_events&quot;, &quot;action&quot;=&gt;&quot;cpe_course_description_live&quot;, &quot;format&quot;=&gt;&quot;15&quot;}</code>  I believe my route should be similar to a <code>show</code> route<code>, e.g., </code>/cpe_course_description/:id(.:format)`, however, I don&#39;t know why that&#39;s not being generated."}, {"owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1452108147, "post_id": 34628082, "comment_id": 57027693, "body": "Here&#39;s the controller code for the originating view: <code>def cpe_events_list     @cpe_events = CpeEvent.where(:submitted_by == &#39;sponsor&#39;) .where(&#39;class_date &gt;= ?&#39;, Date.today) end</code>   If the issue is that I have a collection rather than an object, how do I resolve it.  Thanks again, Doug"}, {"owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "reply_to_user": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1452142740, "post_id": 34628082, "comment_id": 57040828, "body": "<code>get &#39;&#47;cpe_events&#47;:id&#47;description_live(.:format)&#39;, to: &#39;cpe_events#cpe_course_description_live&#39;, as: &#39;cpe_course_description_live&#39;</code>"}, {"owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "reply_to_user": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1452143037, "post_id": 34628082, "comment_id": 57040916, "body": "I would use the above route to get what you want.  the path starts with your plural model name.  Then the required <code>:id</code>, followed by the action name.  And lastly the optional <code>(.:format)</code>.  The <code>()</code> indicate that a param is optional.  The <code>:id</code> is not optional.  So when you do <code>cpe_course_descroption_live_path(15)</code>  the 15 will end up in the <code>params[:id]</code> in your controller."}, {"owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1452185561, "post_id": 34628082, "comment_id": 57066868, "body": "That worked.  Thank you!  Please edit your original answer and I&#39;ll accept it so that you get credit.  Also, are there any readings other than RailsGuides: Rails Routing from the Outside In that you would recommend I spend time with?  Thanks again, Doug"}, {"owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "reply_to_user": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1452196449, "post_id": 34628082, "comment_id": 57073392, "body": "The rails guides are good, but I learn better via screencasts.  Ryan Bates ran Railscast for a long time and put out some really good basic content.  It is a bit outdated but a great place to start.  There are only a few changes from Rails 3 to Rails 4.  <a href=\"http://railscasts.com/episodes/231-routing-walkthrough\" rel=\"nofollow noreferrer\">railscasts.com/episodes/231-routing-walkthrough</a> &amp; <a href=\"http://railscasts.com/episodes/232-routing-walkthrough-part-2\" rel=\"nofollow noreferrer\">railscasts.com/episodes/232-routing-walkthrough-part-2</a> would be a good place to start.  Then check the guides if you have any issues.  This cheat sheet is also a nice quick overview and is up to date <a href=\"http://ricostacruz.com/cheatsheets/rails-routes.html\" rel=\"nofollow noreferrer\">ricostacruz.com/cheatsheets/rails-routes.html</a>"}, {"owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 0, "creation_date": 1452201717, "post_id": 34628082, "comment_id": 57076490, "body": "I haven&#39;t seen the cheatsheet referenced before.  I really appreciate all your help.  I tried every angle I could think of, never suspecting routing.  I&#39;ve given you credit for the answer.  Best, Doug"}], "tags": [], "owner": {"reputation": 179, "user_id": 4110929, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jg_E7NwwMY8/AAAAAAAAAAI/AAAAAAAAAyI/fmYzIosrFA4/photo.jpg?sz=128", "display_name": "Andrew Griffith", "link": "https://stackoverflow.com/users/4110929/andrew-griffith"}, "is_accepted": true, "score": 1, "last_activity_date": 1452195769, "last_edit_date": 1452195769, "creation_date": 1452066692, "answer_id": 34628082, "question_id": 34624849, "link": "https://stackoverflow.com/questions/34624849/link-from-table-row-to-new-view-generating-format-id-of-clicked-row-why-rai/34628082#34628082", "title": "link from table row to new view generating :format =&gt; id of clicked row Why? Rails", "body": "<p>It is a bit hard to tell for sure, but I would assume this is because of our routes.  It appears that the route you are using is not a member route, but a collection instead.  That is most likely why you are getting your id after the \".\" in the url where the format type would normally show up.  </p>\n\n<p>You should never need to provide the \"html\" format as it is the default.  If you post the appropriate routes from your routes.rb file I am sure this will show the problem</p>\n\n<p>You can also see the url being produced from your <code>cpe_course_description_live_path</code> method by running the following from your console.</p>\n\n<pre><code>$ ~/code/my_app/rake routes | grep cpe_course_description_live\n</code></pre>\n\n<p>EDIT:  After some research we figured out that there was an issue with a custom route.  The route should have looked like this:</p>\n\n<pre><code>get '/cpe_events/:id/description_live(.:format)', to: 'cpe_events#cpe_course_description_live', as: 'cpe_course_description_live'\n</code></pre>\n\n<p>This allowed for the <code>:id</code> to be added to the params hash in the controller and accessed via <code>params[:id]</code>.  This is essentially the difference between a collection route and a member route.  In this cause we need the id of the member.</p>\n"}], "owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 34628082, "answer_count": 1, "score": 0, "last_activity_date": 1452195769, "creation_date": 1452048824, "last_edit_date": 1495540746, "question_id": 34624849, "link": "https://stackoverflow.com/questions/34624849/link-from-table-row-to-new-view-generating-format-id-of-clicked-row-why-rai", "title": "link from table row to new view generating :format =&gt; id of clicked row Why? Rails", "body": "<p>I am following the example of SO # 9945620, <a href=\"https://stackoverflow.com/questions/9945620/making-a-table-row-into-a-link-in-rails\">Making a table row into a link in Rails</a>  The params being sent to the controller are <code>{\"controller\"=&gt;\"cpe_events\", \"action\"=&gt;\"cpe_course_description_live\", \"format\"=&gt;\"15\"}</code> I assume the <code>format</code> is automatically being generated by rails.  I don't, however, understand why it's adopting the row / record's <code>id</code> and why the cpe_events <code>params</code> or <code>id</code> aren't being passed. </p>\n\n<p>EDIT: I should probably note that the table is rendered using Bootstrap, <code>class=\"span12 table table-hover table-striped table-bordered\"</code>, since it's also written in jQuery.</p>\n\n<p>Full code below the following notes.</p>\n\n<p>Here's the data-link that's throwing the error:\n      <code>&lt;tr data-link=\"&lt;%= cpe_course_description_live_path(cpe_event) %&gt;\" &gt;</code>\nThat format is used in the referenced example.  The link in the network section of my console reads <code>cpe_course_description_live_path.15</code>  However, the controller, <code>@cpe_event = CpeEvent.find(params[:id])</code>, can't read the <code>id</code></p>\n\n<p>If I change it to:\n    <code>&lt;tr data-link=\"&lt;%= cpe_course_description_live_path(cpe_event, :format =&gt; 'html') %&gt;\" &gt;</code>\nit correctly sends the format.  The params are now <code>{\"controller\"=&gt;\"cpe_events\", \"action\"=&gt;\"cpe_course_description_live\", \"format\"=&gt;\"html\"}</code> and the network section of the console reads <code>cpe_course_description_live_path.html</code></p>\n\n<p>Bottom-line: Not passing the params or id to the controller.</p>\n\n<p>Here's the view / table code:</p>\n\n<pre><code>&lt;% @cpe_events.each do |cpe_event| %&gt;\n    &lt;tr data-link=\"&lt;%= cpe_course_description_live_path(cpe_event, :format =&gt; 'html') %&gt;\" &gt;\n       &lt;td&gt;&lt;%= cpe_event.id %&gt;&lt;/td&gt;\n       .....\n</code></pre>\n\n<p>Here's the jQuery:</p>\n\n<pre><code>$(document).ready(function() {\n  $(\"tr\").click(function() {\n   window.location = $(this).data(\"link\");    \n  })\n})\n</code></pre>\n\n<p>Here's the controller:</p>\n\n<pre><code>def cpe_course_description_live\n  @cpe_event = CpeEvent.find(params[:id])\n  @user = current_user\n  redirect_to cpe_course_description_live_path(cpe_event)\nend\n</code></pre>\n\n<p>Any help pointing me in the right direction would be appreciated.  Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-many", "belongs-to"], "answers": [{"comments": [{"owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "edited": false, "score": 0, "creation_date": 1452049821, "post_id": 34624868, "comment_id": 56995770, "body": "ah, sorry I can&#39;t understand your explanation. Can you show me some example?"}], "tags": [], "owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "is_accepted": false, "score": 1, "last_activity_date": 1452049046, "creation_date": 1452049046, "answer_id": 34624868, "question_id": 34624754, "link": "https://stackoverflow.com/questions/34624754/how-it-works-belongs-to-user-dependent-destroy/34624868#34624868", "title": "How it works - `belongs_to :user, dependent: :destroy`", "body": "<p>It instantiates an instance of all of the users then sends the message destroy to each.  Results in normal destruction lifecycle for the users that are destroyed this way.  </p>\n"}, {"tags": [], "owner": {"reputation": 816, "user_id": 1547669, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a15cfaaad27177e7a8a161a0403d8ab1?s=128&d=identicon&r=PG", "display_name": "JohnSalzarulo", "link": "https://stackoverflow.com/users/1547669/johnsalzarulo"}, "is_accepted": true, "score": 36, "last_activity_date": 1452052230, "creation_date": 1452052230, "answer_id": 34625321, "question_id": 34624754, "link": "https://stackoverflow.com/questions/34624754/how-it-works-belongs-to-user-dependent-destroy/34625321#34625321", "title": "How it works - `belongs_to :user, dependent: :destroy`", "body": "<pre><code>\"has_many\" \n</code></pre>\n\n<p>A teacher \"has_many\" students. Every student has only one teacher, but every teacher has many students. This means that there is a foreign key, or teacher_id on the student referencing to what teacher they belong to. </p>\n\n<pre><code>\"belongs_to\" \n</code></pre>\n\n<p>A student \"belongs_to\" a teacher. Every teacher has many students, but every student has only one teacher. Again, there is the foreign key on the student referencing to what teacher they belong. </p>\n\n<p>Let's work this out an using this student / teacher concept. </p>\n\n<p><strong>Teacher Model</strong> </p>\n\n<pre><code>class Teacher &lt; ActiveRecord::Base\n  has_many :students, dependent: :destroy\nend\n</code></pre>\n\n<p><strong>Student Model</strong> </p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\n    belongs_to :teacher \nend \n</code></pre>\n\n<p><strong>Assuming these models then</strong></p>\n\n<pre><code>Teacher.destroy \n</code></pre>\n\n<p>Will delete the instantiated teacher and all the students that were associated to that teacher. </p>\n\n<p>For example</p>\n\n<pre><code>Teacher.find(345).destroy \n</code></pre>\n\n<p>Would destroy the record of the teacher with the ID of 345 and destroy all the associated students with that teacher. </p>\n\n<p>Now to the heart of the question, what happens when my models look like this? </p>\n\n<p><strong>Teacher Model</strong></p>\n\n<pre><code>class Teacher &lt; ActiveRecord::Base\n  has_many :students, dependent: :destroy\nend\n</code></pre>\n\n<p><strong>Student Model</strong></p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\n    belongs_to :teacher, dependent: :destroy\nend \n</code></pre>\n\n<p><strong>If I were to call</strong></p>\n\n<pre><code>Student.destroy\n</code></pre>\n\n<p>This would destroy the instantiated student and that student's associated teacher. However to my knowledge (and according to the docs) this would not destroy any other students related to that teacher, leaving them 'orphaned'. </p>\n\n<p><strong>Here is a quote from the Ruby docs on this</strong> <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to\" rel=\"noreferrer\">1</a></p>\n\n<blockquote>\n  <p>If set to :destroy, the associated object is destroyed when this object is. This option should not be specified when belongs_to is used in conjunction with a has_many relationship on another class because of the potential to leave orphaned records behind.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7139433, "user_type": "registered", "profile_image": "https://graph.facebook.com/1145800322155923/picture?type=large", "display_name": "Tr\u1ea7n Ti\u1ebfn Th&#224;nh", "link": "https://stackoverflow.com/users/7139433/tr%e1%ba%a7n-ti%e1%ba%bfn-th%c3%a0nh"}, "is_accepted": false, "score": 0, "last_activity_date": 1538645387, "creation_date": 1538645387, "answer_id": 52643414, "question_id": 34624754, "link": "https://stackoverflow.com/questions/34624754/how-it-works-belongs-to-user-dependent-destroy/52643414#52643414", "title": "How it works - `belongs_to :user, dependent: :destroy`", "body": "<p>I have try set dependent: :destroy into belongs_to. Example</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  has_many :comments, dependent: :destroy\nend\n\nclass Comment &lt; ActiveRecord::Base\n  belongs_to :post, dependent: :destroy\nend\n</code></pre>\n\n<p>In a console, if comment has been destroy, post will be destroy\nBut I think you shouldn't set belongs_to + dependent: :destroy together</p>\n\n<p>In fact, example on facebook, when 1 comment of 1 post has been deleted, this post will not be deleted</p>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16152, "favorite_count": 4, "accepted_answer_id": 34625321, "answer_count": 3, "score": 12, "last_activity_date": 1538645387, "creation_date": 1452048080, "last_edit_date": 1452054458, "question_id": 34624754, "link": "https://stackoverflow.com/questions/34624754/how-it-works-belongs-to-user-dependent-destroy", "title": "How it works - `belongs_to :user, dependent: :destroy`", "body": "<p>I know how to work <code>has_many :posts, dependent: :destroy</code>. If <code>User</code> or something that <code>has_many</code> posts is destroyed, all belonging posts are also destroyed.</p>\n\n<p>But what happens when <code>Post</code> model <code>belongs_to :user, dependent: :destroy</code>?\nI found the option in Rails Guide, but I couldn't find out how to work it.</p>\n\n<p><a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"noreferrer\">http://guides.rubyonrails.org/association_basics.html</a></p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1452048679, "post_id": 34624713, "comment_id": 56995468, "body": "You need to explain what you know about the string. Will it always contain <code>&quot; [info]: &quot;</code> between the two fields of interest? Will the non-date you want to capture always be at the end of the string? If the string contains multiple substrings that meet the conditions, do you want to extract them all? Please clarify by editing the question."}, {"owner": {"reputation": 106, "user_id": 1932914, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/002e7312eb086a7e86ab1da1bfe2103c?s=128&d=identicon&r=PG", "display_name": "user1932914", "link": "https://stackoverflow.com/users/1932914/user1932914"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1452052618, "post_id": 34624713, "comment_id": 56996474, "body": "Yes, The fields will always be like the one as shown in example...Thanks"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1452056455, "post_id": 34624713, "comment_id": 56997565, "body": "I wish to offer a couple of suggestions for how you might have improved your question. (Don&#39;t change it now, however.) Firstly, I&#39;m sure you know how to read a text file into a string, so best to frame the question around the string and make no reference to where it came from. Secondly, your example&#39;s data should always be valid Ruby objects, with the value of each object held by a variable you define; for example, <code>str = &quot;Nov 13...adap_tdagt&quot;</code>. That way, readers can refer to those variables (here <code>str</code>) in comments and answers without having to define them."}], "answers": [{"tags": [], "owner": {"reputation": 2637, "user_id": 3223249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hri7E.jpg?s=128&g=1", "display_name": "Inpego", "link": "https://stackoverflow.com/users/3223249/inpego"}, "is_accepted": false, "score": 3, "last_activity_date": 1452050249, "creation_date": 1452050249, "answer_id": 34625058, "question_id": 34624713, "link": "https://stackoverflow.com/questions/34624713/extracting-specific-fields-from-data-in-ruby/34625058#34625058", "title": "Extracting specific fields from Data in Ruby", "body": "<p>You must escape <code>+</code> sign for date:</p>\n\n<pre><code>line =~ /.*(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2} \\+\\d{4}).+([a-z]{3}-[a-f0-9]{40})/\nputs $1 # 2015-11-13 01:46:57 +0000\nputs $2 # qas-296d1fa95fd0ac5a84ea73234c0c48d64f6ea22d\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1452064403, "last_edit_date": 1452064403, "creation_date": 1452055608, "answer_id": 34625799, "question_id": 34624713, "link": "https://stackoverflow.com/questions/34624713/extracting-specific-fields-from-data-in-ruby/34625799#34625799", "title": "Extracting specific fields from Data in Ruby", "body": "<pre><code>str = \"Nov 13 01:46:57 10.232.47.76 qas-adaptiveip-10-232-47-76 2015-11-13 01:46:57 +0000 [info]: qas-296d1fa95fd0ac5a84ea73234c0c48d64f6ea22d has been deregistered adap_tdagt\"\n</code></pre>\n\n<p>As the problem with your code has been identified, I would like to suggest another way to extract the desired information from each line:</p>\n\n<pre><code>r = /\n    (?:                # begin a non-capture group\n      \\d{4}-\\d{2}-\\d{2}\\s\\d{2}:\\d{2}:\\d{2}\\s\\+\\d{4} # match date string\n    )                  # end non-capture group\n    |                  # or\n    (?:                # begin a non-capture group\n      (?&lt;=\\[info\\]:\\s) # match \"[info:] \" in a positive lookbehind\n      \\S+              # match &gt;= 1 characters other than whitespace\n    )                  # end non-capture group\n    /x                 # extended/free-spacing regex definition mode\n\nstr.scan(r)\n  #=&gt; [\"2015-11-13 01:46:57 +0000\", \"qas-296d1fa95fd0ac5a84ea73234c0c48d64f6ea22d\"] \n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 1932914, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/002e7312eb086a7e86ab1da1bfe2103c?s=128&d=identicon&r=PG", "display_name": "user1932914", "link": "https://stackoverflow.com/users/1932914/user1932914"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1454048361, "creation_date": 1452047778, "last_edit_date": 1454048361, "question_id": 34624713, "link": "https://stackoverflow.com/questions/34624713/extracting-specific-fields-from-data-in-ruby", "title": "Extracting specific fields from Data in Ruby", "body": "<p>This is the Ruby program in which I have to extract specific fields using Regular expression from the data in a file.\nThe data in the file is in the following format:</p>\n\n<p>Nov 13 01:46:57 10.232.47.76 qas-adaptiveip-10-232-47-76 2015-11-13 01:46:57 +0000 [info]: qas-296d1fa95fd0ac5a84ea73234c0c48d64f6ea22d has been deregistered adap_tdagt</p>\n\n<p>I need to extract the following values \n1)2015-11-13 01:46:57 +0000\n2)qas-296d1fa95fd0ac5a84ea73234c0c48d64f6ea22d</p>\n\n<p>I have written the code but it's not working properly. Can someone please help me out with this problem.</p>\n\n<pre><code>  class Task5\n  def initialize\n  #   @f=File.open('C:/Users/aroraku/Desktop,boc-adap_td-agent.log-2.log',r)\n  @count=0\n  end\n\n  def check_line(line)\n      if(line=~/deregistered adap_tdagt$/)\n           line=~ (/.*(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2} +\\d{4})/)\n               puts \"#{$1}\"\n      end\n  end\n\n  def file_read\n     open(\"boc-adap_td-agent.log-2.log\") { |f|\n          while line=f.gets do\n             check_line(line)\n          end\n     }\n    # return @count\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "clojure", "riemann"], "answers": [{"tags": [], "owner": {"reputation": 87536, "user_id": 90801, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6acc4764438b6f3e80e9645ec8259353?s=128&d=identicon&r=PG", "display_name": "Arthur Ulfeldt", "link": "https://stackoverflow.com/users/90801/arthur-ulfeldt"}, "is_accepted": true, "score": 4, "last_activity_date": 1452060179, "last_edit_date": 1452060179, "creation_date": 1452049146, "answer_id": 34624888, "question_id": 34624665, "link": "https://stackoverflow.com/questions/34624665/couldnt-start-riemann-health/34624888#34624888", "title": "Couldn&#39;t start riemann health", "body": "<p>I'm assuming that you are running Riemann and riemann-dash on the same computer and not using docker for either of these:</p>\n\n<p>Riemann listens to </p>\n\n<ul>\n<li>port 5555 udp for events</li>\n<li>port 5555 tcp for events</li>\n<li>port 5556 tcp for queries</li>\n</ul>\n\n<p>so there are several combinations of possible problems:</p>\n\n<ul>\n<li>riemann is not running at all</li>\n<li>riemann started up, and then fell over and died.<br>\nthis happens when it has no config file for instance. </li>\n<li>riemann is not listening on 5555 tcp</li>\n<li>riemann is not listening on 5555 udp</li>\n<li>riemann is listening to the incorrect interface (aka \"bind address\")\nIf riemann where configured to listen to 1.2.3.4:5555 then it would not respond to connections from localhost (127.0.0.1)</li>\n<li>the connection is being blocked by some firewall (no, don't turn your firewall off)</li>\n<li>riemann is listening on udp and you are sending tcp (or the other way around)</li>\n</ul>\n\n<p>once you have convinced yourself that the riemann process is still running run </p>\n\n<pre><code>sudo netstat -nlp | grep 5555 \n</code></pre>\n\n<p>and be sure you can see that riemann is infact listening to port 5555 both tcp and udp. Then install netcat and make sure you can connect to those ports with </p>\n\n<pre><code>nc -v localhost:5555\n</code></pre>\n\n<p>and </p>\n\n<pre><code>nc -uvv localhost:5555\nasdfasfd\n</code></pre>\n\n<p>(yes you need to type some gobbeldy to get the second example to actually send a packet.</p>\n\n<p>If you still havent got a connection install etherial or tcpdump and start sniffing. </p>\n\n<p>If you are running docker, and using riemann in UDP then there are a whole other set of things to check.</p>\n"}], "owner": {"reputation": 341, "user_id": 4439408, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/T43dm.jpg?s=128&g=1", "display_name": "free\u65a9", "link": "https://stackoverflow.com/users/4439408/free%e6%96%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 34624888, "answer_count": 1, "score": 2, "last_activity_date": 1452060179, "creation_date": 1452047418, "last_edit_date": 1592644375, "question_id": 34624665, "link": "https://stackoverflow.com/questions/34624665/couldnt-start-riemann-health", "title": "Couldn&#39;t start riemann health", "body": "<p>I'm new to Riemann and also new to ruby and Clojure as well.</p>\n<p>When I implementation of the riemann command\uff1a</p>\n<blockquote>\n<p>riemann-health</p>\n</blockquote>\n<p>The error message is</p>\n<pre><code>Riemann::Client::TcpSocket::Error Could not connect to 127.0.0.1:5555:Errno::ECONNREFUSED: Connection refused - connect(2)\n/var/lib/gems/1.9.1/gems/riemann-client-0.2.5/lib/riemann/client/tcp_socket.rb:233:in `connect_nonblock'\n</code></pre>\n<p>My develop environment is:</p>\n<blockquote>\n<p>Ubuntu 14.04.2 LTS</p>\n<p>riemann version is 0.2.10.</p>\n<p>java version &quot;1.8.0_45&quot;</p>\n<p>ruby 1.9.3p484</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "vim"], "comments": [{"owner": {"reputation": 1100, "user_id": 1415546, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/092770076bb0cf421bacba912565331d?s=128&d=identicon&r=PG", "display_name": "NateSHolland", "link": "https://stackoverflow.com/users/1415546/natesholland"}, "edited": false, "score": 0, "creation_date": 1452051701, "post_id": 34624486, "comment_id": 56996235, "body": "Are you using spring or jruby?"}, {"owner": {"reputation": 7454, "user_id": 1377943, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4i1Qa.jpg?s=128&g=1", "display_name": "Paritosh Piplewar", "link": "https://stackoverflow.com/users/1377943/paritosh-piplewar"}, "edited": false, "score": 0, "creation_date": 1452751558, "post_id": 34624486, "comment_id": 57309761, "body": "show the <code>--trace</code> command."}, {"owner": {"reputation": 6088, "user_id": 1983072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/974c4e106b996fff51c25171e439b7b8?s=128&d=identicon&r=PG", "display_name": "bbozo", "link": "https://stackoverflow.com/users/1983072/bbozo"}, "edited": false, "score": 0, "creation_date": 1453101475, "post_id": 34624486, "comment_id": 57438184, "body": "My hunch tells me it&#39;s related to a gem with native extensions, how many of those do you have? :)"}, {"owner": {"reputation": 707, "user_id": 1305200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlCXw.jpg?s=128&g=1", "display_name": "Dieter Pisarewski", "link": "https://stackoverflow.com/users/1305200/dieter-pisarewski"}, "edited": false, "score": 0, "creation_date": 1453250689, "post_id": 34624486, "comment_id": 57517562, "body": "Try to find <code>Signal.trap</code> in the whole codebase. If the signal handler was declared in ruby code, you&#39;ll find a <code>Signal.trap(&quot;TERM&quot;)</code> statement."}, {"owner": {"reputation": 309, "user_id": 2008989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7bfdbac84c28521d1a7665d1856abac6?s=128&d=identicon&r=PG", "display_name": "zach", "link": "https://stackoverflow.com/users/2008989/zach"}, "edited": false, "score": 0, "creation_date": 1453251566, "post_id": 34624486, "comment_id": 57517837, "body": "I did find something, but commenting it out did not resolve.   Signal.trap &#39;TERM&#39; do     puts &#39;Unicorn master intercepting TERM and sending myself QUIT instead&#39;     Process.kill &#39;QUIT&#39;, Process.pid   end"}, {"owner": {"reputation": 309, "user_id": 2008989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7bfdbac84c28521d1a7665d1856abac6?s=128&d=identicon&r=PG", "display_name": "zach", "link": "https://stackoverflow.com/users/2008989/zach"}, "edited": false, "score": 0, "creation_date": 1453251612, "post_id": 34624486, "comment_id": 57517850, "body": "Going to grep through the gems as well."}, {"owner": {"reputation": 707, "user_id": 1305200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlCXw.jpg?s=128&g=1", "display_name": "Dieter Pisarewski", "link": "https://stackoverflow.com/users/1305200/dieter-pisarewski"}, "edited": false, "score": 0, "creation_date": 1453293151, "post_id": 34624486, "comment_id": 57536566, "body": "Sorry, my bad, Ctrl + C should send SIGINT, not SIGTERM. <code>Signal.trap(&quot;INT&quot;)</code>"}, {"owner": {"reputation": 309, "user_id": 2008989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7bfdbac84c28521d1a7665d1856abac6?s=128&d=identicon&r=PG", "display_name": "zach", "link": "https://stackoverflow.com/users/2008989/zach"}, "edited": false, "score": 0, "creation_date": 1453333147, "post_id": 34624486, "comment_id": 57561042, "body": "No trapping of SIGINT either. I also confirmed that the issue does not happen on a brand new blank project so it&#39;s not environment related but specific to this codebase / Gemfile."}], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 2008989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7bfdbac84c28521d1a7665d1856abac6?s=128&d=identicon&r=PG", "display_name": "zach", "link": "https://stackoverflow.com/users/2008989/zach"}, "edited": false, "score": 0, "creation_date": 1453086355, "post_id": 34838345, "comment_id": 57433651, "body": "No dice here. Same behavior. Just wondering...what benefit do you see using puma over webrick in dev? (We&#39;re using Nginx in production)."}], "tags": [], "owner": {"reputation": 130, "user_id": 3740903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e594820adcb7bff2bc08f54a27849026?s=128&d=identicon&r=PG", "display_name": "codeurge", "link": "https://stackoverflow.com/users/3740903/codeurge"}, "is_accepted": false, "score": 2, "last_activity_date": 1453034047, "creation_date": 1453034047, "answer_id": 34838345, "question_id": 34624486, "link": "https://stackoverflow.com/questions/34624486/rails-wont-exit-on-first-ctrl-c/34838345#34838345", "title": "Rails won&#39;t exit on first CTRL-C", "body": "<p>I suspect this isn't as much an answer as a suggestion, but I started using Puma by default in my projects a while back, and given that Rails 5 is moving to Puma by default it may not be a bad suggestion.</p>\n\n<p>I use a similar environment, OS X 10.11.2, iTerm 2, tmux, etc. I can't recall when or what prompted it, but at some point my WEBrick projects started behaving this same way, and I started moving them to Puma where possible which didn't seem to show the same behavior.</p>\n\n<p>I know that doesn't really give a clear answer as to what's causing the issue, but also, I too know it's not system performance related.</p>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 2008989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7bfdbac84c28521d1a7665d1856abac6?s=128&d=identicon&r=PG", "display_name": "zach", "link": "https://stackoverflow.com/users/2008989/zach"}, "edited": false, "score": 0, "creation_date": 1453246797, "post_id": 34887702, "comment_id": 57516338, "body": "The issue happens with Puma as well. I&#39;m not so much looking for a workaround (It&#39;s very easy to hit CTRL-C twice) as the underlying cause of the issue."}], "tags": [], "owner": {"reputation": 754, "user_id": 1593469, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/35806359347f2187a1db2cdd6976248c?s=128&d=identicon&r=PG", "display_name": "Jesse Whitham", "link": "https://stackoverflow.com/users/1593469/jesse-whitham"}, "is_accepted": false, "score": 3, "last_activity_date": 1453240567, "last_edit_date": 1495541248, "creation_date": 1453240567, "answer_id": 34887702, "question_id": 34624486, "link": "https://stackoverflow.com/questions/34624486/rails-wont-exit-on-first-ctrl-c/34887702#34887702", "title": "Rails won&#39;t exit on first CTRL-C", "body": "<p>Honestly Webrick 1.3.1 was released in December 28, 2011 I would suggest moving away from this see <a href=\"https://stackoverflow.com/questions/10859671/webrick-as-production-server-vs-thin-or-unicorn\">webrick answer</a> for the reasons.</p>\n\n<p>As you have said that it happens in rails consoles and other tasks (You should really put this in the question as it helps with debugging) I would suggest it is a gem that is causing this (You should update your rails version anyway) but I would suggest using: </p>\n\n<blockquote>\n  <p>Ctrl-D </p>\n</blockquote>\n\n<p>This should exit you straight away</p>\n"}], "owner": {"reputation": 309, "user_id": 2008989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7bfdbac84c28521d1a7665d1856abac6?s=128&d=identicon&r=PG", "display_name": "zach", "link": "https://stackoverflow.com/users/2008989/zach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "answer_count": 2, "score": 10, "last_activity_date": 1453240567, "creation_date": 1452045776, "last_edit_date": 1452731640, "question_id": 34624486, "link": "https://stackoverflow.com/questions/34624486/rails-wont-exit-on-first-ctrl-c", "title": "Rails won&#39;t exit on first CTRL-C", "body": "<p>No Rails command will exit on the first CTRL-C. So rails s or rails c require me to hit control CTRL-C a second time and commands that previously wouldn't have required a CTRL-C at all such as rake routes / db:migrate now require me to press it.</p>\n\n<p>The issue is not happening for any of my teammates. I'm on OSX using iTerm2. There are no instances of 'rescue Exception' in the app. </p>\n\n<p>I've just reinstalled mysql using brew and the issue is still present. Rails version 4.0.5 and sql server version 5.6.27. Any idea where the issue might be?</p>\n\n<pre><code>[2016-01-13 16:18:33] INFO  WEBrick 1.3.1\n[2016-01-13 16:18:33] INFO  ruby 2.1.2 (2014-05-08) [x86_64-darwin13.0]\n[2016-01-13 16:18:33] INFO  WEBrick::HTTPServer#start: pid=2329 port=3000\n^C[2016-01-13 16:18:54] INFO  going to shutdown ...\n[2016-01-13 16:18:54] INFO  WEBrick::HTTPServer#start done.\nExiting\n^C\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 2637, "user_id": 3223249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hri7E.jpg?s=128&g=1", "display_name": "Inpego", "link": "https://stackoverflow.com/users/3223249/inpego"}, "is_accepted": false, "score": 2, "last_activity_date": 1452047084, "creation_date": 1452047084, "answer_id": 34624627, "question_id": 34624417, "link": "https://stackoverflow.com/questions/34624417/pass-select-tag-value-to-load-query-in-the-same-view-rails/34624627#34624627", "title": "Pass select_tag value to load query in the same view rails", "body": "<p>Use <code>form_tag</code>:</p>\n\n<pre><code>&lt;%= form_tag action: rel do %&gt;\n  &lt;%= select_tag :nom, options_from_collection_for_select(Usuario.all, :id, :tienda), prompt: \"Seleccionar tienda\" %&gt;\n  &lt;br&gt;\n  &lt;%= link_to(\"Cargar\", '#', onclick: 'this.parentNode.submit(); return false') %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Hint: replace <code>find_by_sql</code> by <code>Arel</code>:</p>\n\n<pre><code>@tie = Av.where(\"usuario_id IN (#{Usuario.select('id').where('tienda = ?', @nom).to_sql})\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4130766, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FoR8nSXYJIM/AAAAAAAAAAI/AAAAAAAAAFQ/Mzj_xp-nxYs/photo.jpg?sz=128", "display_name": "H&#233;ctor Mon&#225;rrez", "link": "https://stackoverflow.com/users/4130766/h%c3%a9ctor-mon%c3%a1rrez"}, "edited": false, "score": 0, "creation_date": 1452048387, "post_id": 34624655, "comment_id": 56995386, "body": "the problem was that i was not using a form_tag. Thank you very much! This works!!"}], "tags": [], "owner": {"reputation": 1721, "user_id": 676366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rzzUN.jpg?s=128&g=1", "display_name": "taglia", "link": "https://stackoverflow.com/users/676366/taglia"}, "is_accepted": false, "score": 1, "last_activity_date": 1452047316, "creation_date": 1452047316, "answer_id": 34624655, "question_id": 34624417, "link": "https://stackoverflow.com/questions/34624417/pass-select-tag-value-to-load-query-in-the-same-view-rails/34624655#34624655", "title": "Pass select_tag value to load query in the same view rails", "body": "<p>I think you should put the <code>select_tag</code> in a <code>form_tag</code> block, and use <code>submit_tag</code> instead of <code>link_to</code>. If you just use a link no parameters will be passed to the controller (hence you get nil).</p>\n\n<p>Something like:</p>\n\n<pre><code>&lt;%= form_tag action: 'rel' do %&gt;\n    &lt;%= select_tag :nom, options_from_collection_for_select(Usuario.all, :id, :tienda), prompt: \"Seleccionar tienda\" %&gt;\n    &lt;%= submit_tag 'Cargar' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Just be mindful that this approach is not safe as there is no authenticity token verification.</p>\n"}], "owner": {"reputation": 1, "user_id": 4130766, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FoR8nSXYJIM/AAAAAAAAAAI/AAAAAAAAAFQ/Mzj_xp-nxYs/photo.jpg?sz=128", "display_name": "H&#233;ctor Mon&#225;rrez", "link": "https://stackoverflow.com/users/4130766/h%c3%a9ctor-mon%c3%a1rrez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452047316, "creation_date": 1452045324, "question_id": 34624417, "link": "https://stackoverflow.com/questions/34624417/pass-select-tag-value-to-load-query-in-the-same-view-rails", "title": "Pass select_tag value to load query in the same view rails", "body": "<p>I know this question has been answered before, but none of the methods had worked for me. </p>\n\n<p>I have a view with a select_tag that loads options from my database.<br> <code>&lt;%= select_tag :nom, options_from_collection_for_select(Usuario.all, :id, :tienda), prompt: \"Seleccionar tienda\" %&gt;</code></p>\n\n<p>then, I use a link_to <code>&lt;%= link_to(\"Cargar\", :action =&gt; 'rel') %&gt;&lt;br&gt;</code>to load the query on my controller </p>\n\n<pre><code>def rel\n@nom = params[:nom]\n@tie = Av.find_by_sql([\"SELECT * FROM avm.avs where usuario_id in(select id from avm.usuarios where tienda = ?)\", @nom])\nrender('rel')\n</code></pre>\n\n<p>The problem is that when I select any value on my select_tag it does not pass that value and sets the value to nil...</p>\n\n<p>I also used a collection_select and doesn't work either. <code>&lt;%= collection_select(:tienda, :tienda, Usuario.all, :id, :tienda)%&gt;</code></p>\n\n<p>I really broke my head off trying to figure out why. Thanks in advance! </p>\n"}, {"tags": ["ruby", "rspec", "sidekiq", "airbrake"], "answers": [{"comments": [{"owner": {"reputation": 4504, "user_id": 3681199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/70b2072de3d0d43e1af48fd2d416157f?s=128&d=identicon&r=PG&f=1", "display_name": "Nona", "link": "https://stackoverflow.com/users/3681199/nona"}, "edited": false, "score": 0, "creation_date": 1452041233, "post_id": 34623790, "comment_id": 56993336, "body": "So that is by design then?  You wouldn&#39;t want to stub out the perform method in a fake test?"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1452042290, "post_id": 34623790, "comment_id": 56993648, "body": "Calling <code>perform</code> directly will not queue a job whether in a test or in production.  It&#39;s just a method call and will run immediately.  <code>perform_async</code> will queue a job. When a worker picks up that job from the queue it will run the <code>perform</code> method."}], "tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": false, "score": 2, "last_activity_date": 1452040621, "creation_date": 1452040621, "answer_id": 34623790, "question_id": 34623695, "link": "https://stackoverflow.com/questions/34623695/why-is-this-sidekiq-fake-test-not-increasing-the-size-of-the-jobs-array/34623790#34623790", "title": "Why is this Sidekiq fake test not increasing the size of the jobs array?", "body": "<p>Because it's calling the perform method directly and not Sidekiq's API.</p>\n\n<p>Try <code>NotificationWorker.perform_async(message)</code></p>\n"}], "owner": {"reputation": 4504, "user_id": 3681199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/70b2072de3d0d43e1af48fd2d416157f?s=128&d=identicon&r=PG&f=1", "display_name": "Nona", "link": "https://stackoverflow.com/users/3681199/nona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452040621, "creation_date": 1452039988, "question_id": 34623695, "link": "https://stackoverflow.com/questions/34623695/why-is-this-sidekiq-fake-test-not-increasing-the-size-of-the-jobs-array", "title": "Why is this Sidekiq fake test not increasing the size of the jobs array?", "body": "<p>I have the following test setup for a sidekiq test using the fake testing in <a href=\"https://github.com/mperham/sidekiq/wiki/Testing\" rel=\"nofollow\">https://github.com/mperham/sidekiq/wiki/Testing</a>. </p>\n\n<p><strong>spec_helper.rb</strong></p>\n\n<pre><code>require 'sidekiq/testing'\nSidekiq::Testing.fake!\n\n# See http://rubydoc.info/gems/rspec-core/RSpec/Core/Configuration\nRSpec.configure do |config|\n  config.before(:suite) do\n    FactoryGirl.reload\n    FactoryGirl.define do\n      to_create { |instance| instance.save }\n    end\n    DatabaseCleaner.strategy = :transaction\n    DatabaseCleaner.clean_with(:truncation)\n    Airbrake.configure do |c|\n      c.project_id = ENV['AIRBRAKE_PROJECT_ID']\n      c.project_key = ENV['AIRBRAKE_PROJECT_KEY']\n    end\n  end\n\n  config.before(:each, job: true) do\n    Sidekiq::Worker.clear_all #make sure jobs don't linger between tests\n  end\n\n  config.around(:each) do |example|\n    DatabaseCleaner.cleaning do\n      example.run\n    end\n  end\n\n  config.include FactoryGirl::Syntax::Methods\nend\n</code></pre>\n\n<p><strong>notification_spec.rb</strong></p>\n\n<pre><code>require 'spec_helper'\n\nRSpec.describe NotificationWorker do\n  it \"perform should call Airbrake#notify\", job: true do\n    notification_worker = NotificationWorker.new\n    message = \"This is your error message\"\n    expect { notification_worker.perform(message) }.to change(NotificationWorker.jobs, :size).by(1)\n  end\nend\n</code></pre>\n\n<p><strong>notification_worker.rb</strong></p>\n\n<pre><code>class NotificationWorker\n  include Sidekiq::Worker\n  sidekiq_options queue: :high\n\n  def perform(message)\n    Airbrake.notify(message)\n  end\nend\n</code></pre>\n\n<p>Yet, why do I receive the following error message:</p>\n\n<pre><code>Failure/Error: expect { notification_worker.perform(message) }.to change(NotificationWorker.jobs, :size).by(1)\n       expected #size to have changed by 1, but was changed by 0\n</code></pre>\n\n<p>It seems as if the jobs array should be incremented by 1.  What is going on?  Is it a threading issue caused by the interaction between RSpec and Database Cleaner?</p>\n"}, {"tags": ["ruby", "rspec", "sidekiq", "airbrake"], "answers": [{"tags": [], "owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "is_accepted": false, "score": 1, "last_activity_date": 1456158291, "creation_date": 1456158291, "answer_id": 35558722, "question_id": 34623599, "link": "https://stackoverflow.com/questions/34623599/why-cant-rspec-find-the-airbrake-env-keys-in-a-test-involving-sidekiq-when-i-sp/35558722#35558722", "title": "Why can&#39;t RSpec find the Airbrake env keys in a test involving Sidekiq when I specify environment?", "body": "<p>When you say <code>Airbrake.configure(:test)</code>, it does not mean \"configure Airbrake for the <code>test</code> <code>RAILS_ENV</code>\". Rather <code>:test</code> creates a non-default <a href=\"https://github.com/airbrake/airbrake-ruby#creating-a-named-notifier\" rel=\"nofollow\">named notifier</a>. Then you can send specific notifications to that notifier by saying <code>Airbrake.notify(\"oops\", {time: Time.now}, :test)</code>. But that is not about development/test/production, it is about categorizing your notifications.</p>\n\n<p>So the problem is that you have configured a notifier named <code>test</code>, but you have not yet configured one named <code>default</code>, and <code>default</code> is what Airbrake wants to use when you don't tell it otherwise. That's why your spec passes when you say simply <code>Airbrake.configure { ... }</code>.</p>\n"}], "owner": {"reputation": 4504, "user_id": 3681199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/70b2072de3d0d43e1af48fd2d416157f?s=128&d=identicon&r=PG&f=1", "display_name": "Nona", "link": "https://stackoverflow.com/users/3681199/nona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1456158291, "creation_date": 1452039367, "last_edit_date": 1452040125, "question_id": 34623599, "link": "https://stackoverflow.com/questions/34623599/why-cant-rspec-find-the-airbrake-env-keys-in-a-test-involving-sidekiq-when-i-sp", "title": "Why can&#39;t RSpec find the Airbrake env keys in a test involving Sidekiq when I specify environment?", "body": "<p>Here is my setup: </p>\n\n<p><strong>airbrake.rb</strong></p>\n\n<pre><code>require 'airbrake'\n\nAirbrake.configure do |c|\n  c.ignore_environments = [:test, :development]\n  c.project_id = ENV['PROJECT_ID']\n  c.project_key = ENV['PROJECT_KEY']\nend\n\nuse Airbrake::Rack::Middleware\n</code></pre>\n\n<p><strong>spec_helper.rb</strong></p>\n\n<pre><code>RSpec.configure do |config|\n  config.before(:suite) do\n    FactoryGirl.reload\n    FactoryGirl.define do\n      to_create { |instance| instance.save }\n    end\n    DatabaseCleaner.strategy = :transaction\n    DatabaseCleaner.clean_with(:truncation)\n    Airbrake.configure(:test) do |c|\n      c.project_id = ENV['PROJECT_ID']\n      c.project_key = ENV['PROJECT_KEY']\n    end\n  end\n\n  config.around(:each) do |example|\n    DatabaseCleaner.cleaning do\n      example.run\n    end\n  end\n\n  config.include FactoryGirl::Syntax::Methods\nend\n</code></pre>\n\n<p><strong>worker_test_spec.rb</strong></p>\n\n<pre><code>require 'spec_helper'\n\nRSpec.describe NotificationWorker do\n  it \"perform should call Airbrake#notify\" do\n    anotification_worker = LNotificationWorker.new\n    airbrake_notification_worker.perform(\"some error message\"))\n    expect(Airbrake).to receive(:notify).with(\"some error message\")\n  end\nend\n</code></pre>\n\n<p>I call Airbrake#notify in other (non-Sidekiq) tests, and they find the appropriate ENV variables just fine.</p>\n\n<p>Yet if I run the above Sidekiq test with the above setup, I get the following error:</p>\n\n<pre><code>Airbrake::Error:\n       the 'default' notifier isn't configured\n</code></pre>\n\n<p>But if I change the Airbrake config in spec_helper.rb to:</p>\n\n<pre><code>Airbrake.configure do |c|\n  c.project_id = ENV['PROJECT_ID']\n  c.project_key = ENV['PROJECT_KEY']\nend\n</code></pre>\n\n<p>the ENV keys are able to be found in the tests.  Why is this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "answers": [{"comments": [{"owner": {"reputation": 6763, "user_id": 332429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d626ab3c1bc061f64f009a90f976534?s=128&d=identicon&r=PG", "display_name": "Ricardo Valeriano", "link": "https://stackoverflow.com/users/332429/ricardo-valeriano"}, "edited": false, "score": 0, "creation_date": 1452037573, "post_id": 34623274, "comment_id": 56992183, "body": "Appears to me that this is a good way to go because it will show to the future you (the one who have written the code) and for the possible code maintainers that stumble upon the code, a &quot;right&quot; place to put the analytic logic. I&#39;m NOT advocating against put some logic on your Active Record model (Comment in this case), I&#39;m just suggesting that this is a specific logic that would benefit from a proper place to grow."}, {"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "edited": false, "score": 0, "creation_date": 1452052944, "post_id": 34623274, "comment_id": 56996556, "body": "Is there a way to get the ID of the associated object other than <code>post_id = self.new.post_id</code> ? This is just a sample code. The real code doesn&#39;t do any sentiment analysis. There is a very small processing done on all the comments of a post, hence doesn&#39;t warrant a new class. Again we don&#39;t even need the post ID to iterate over the comments. This question is for curiosity of how can we get the associated object&#39;s id when a static method is called in this way"}], "tags": [], "owner": {"reputation": 6763, "user_id": 332429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d626ab3c1bc061f64f009a90f976534?s=128&d=identicon&r=PG", "display_name": "Ricardo Valeriano", "link": "https://stackoverflow.com/users/332429/ricardo-valeriano"}, "is_accepted": false, "score": 3, "last_activity_date": 1452037406, "creation_date": 1452037406, "answer_id": 34623274, "question_id": 34623164, "link": "https://stackoverflow.com/questions/34623164/calling-class-method-via-rails-activerecord-association/34623274#34623274", "title": "Calling Class method via Rails ActiveRecord Association", "body": "<p>The sentiment analysis is an important business logic of yours, and maybe it will grow a lot, so I think is better to put it in it's own class.</p>\n\n<p>If you do so, you will be capable of just pass a post to the Analyzer (for example):</p>\n\n<pre><code># app/models/analyzer.rb\nclass Analyzer\n  def initialize(post)\n    @post = post\n  end\n\n  def sentiment\n    @post.comments.each do |comment|\n      do_something_with comment\n      # ... more real stuff here\n    end\n  end\n\n  def some_other_analysis\n  end\n\n  private\n  def do_something_with(comment)\n    # ...\n  end\nend\n</code></pre>\n\n<p>Now you would be able to rewrite your example:</p>\n\n<pre><code>Analyzer.new(Post.find(1)).sentiment\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "edited": false, "score": 0, "creation_date": 1452099017, "post_id": 34628548, "comment_id": 57021916, "body": "This is the exact answer I was looking for. A replacement of <code>post_id = self.new.post_id</code> which (as you suggested): <code>post_id=Comment.scope_attributes[&quot;post_id&quot;]</code>.  So far as why am I doing it, it might come handy in cases where you want to do some processing of all the comments for a post and would like to call <code>post.find(1).comments.process_comments</code>. This <code>process_comments</code> can be a class method for <code>Comment</code>. Though not necessary, but possibly I&#39;d want to know which &quot;owner&quot; called this association - and this is where the question comes in."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 4, "last_activity_date": 1452068681, "creation_date": 1452068681, "answer_id": 34628548, "question_id": 34623164, "link": "https://stackoverflow.com/questions/34623164/calling-class-method-via-rails-activerecord-association/34628548#34628548", "title": "Calling Class method via Rails ActiveRecord Association", "body": "<p>To answer your question directly,</p>\n\n<pre><code>Comment.scope_attributes\n</code></pre>\n\n<p>Will return a hash of those attributes the current scope on Comment would set. You can test the effect an association has on this like so </p>\n\n<p>I'm not sure I'd use this though - it seems a little odd to have a class method that can only be invoked on scopes of a particular form.</p>\n"}], "owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "accepted_answer_id": 34628548, "answer_count": 2, "score": 3, "last_activity_date": 1452068681, "creation_date": 1452036757, "question_id": 34623164, "link": "https://stackoverflow.com/questions/34623164/calling-class-method-via-rails-activerecord-association", "title": "Calling Class method via Rails ActiveRecord Association", "body": "<p>I have two classes as:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  has_many :comments\nend\n\nclass Comment &lt; ActiveRecord::Base\n  belongs_to :post\n\n  # Class method\n  # does some analysis on all the comments of a given post  \n  def self.do_sentiment_analysis\n     post_id = self.new.post_id  # Is there a better way to get post_id?\n\n     # real code that does something follows\n\n  end\n\nend\n\n\n# Class method is called on a post object like this:\nPost.find(1).comments.do_sentiment_analysis\n</code></pre>\n\n<p>The question is whether there is a better way to know the id of the association object (post) on which the class method is called. One way (which is used above) is: <code>post_id = self.new.post_id</code>. \nI bet there is a cleaner way where I don't have to create an object just to get the <code>post_id</code>.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4", "amazon-web-services", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1452043229, "post_id": 34623252, "comment_id": 56993937, "body": "yep. the &quot;little lock&quot; near the link tells us that the file is not public -&gt; Access Denied"}], "tags": [], "owner": {"reputation": 10917, "user_id": 5451492, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14ea33b371d1388017d643f0332785c0?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo M", "link": "https://stackoverflow.com/users/5451492/rodrigo-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1452037277, "creation_date": 1452037277, "answer_id": 34623252, "question_id": 34623010, "link": "https://stackoverflow.com/questions/34623010/amazon-aws-images-are-not-showing/34623252#34623252", "title": "Amazon AWS Images are not showing?", "body": "<p>When I open <a href=\"https://s3.amazonaws.com/skilllzy/134H.jpg\" rel=\"nofollow\">https://s3.amazonaws.com/skilllzy/134H.jpg</a> in my browser, I get:</p>\n\n<pre><code>&lt;Error&gt;\n&lt;Code&gt;AccessDenied&lt;/Code&gt;\n&lt;Message&gt;Access Denied&lt;/Message&gt;\n&lt;RequestId&gt;CA4454AACA61F45E&lt;/RequestId&gt;\n&lt;HostId&gt;\n5fAq4OGDrjMUD9b012vBi495TizgPsrkHQh3ZFZYdzcv2LJLuY48F/Ug1KzEQV5iArlt0DY1Ixg=\n&lt;/HostId&gt;\n&lt;/Error&gt;\n</code></pre>\n\n<p>This indicates either a) you have not configured the bucket as a static website or b) you do not have the correct permissions on that bucket to allow public accesss.</p>\n\n<p>Please review <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html\" rel=\"nofollow\">Hosting a Static Website on Amazon S3</a> and <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteAccessPermissionsReqd.html\" rel=\"nofollow\">Permissions Required for Website Access</a> to make sure you have properly configured the bucket for public http access.</p>\n"}], "owner": {"reputation": 331, "user_id": 5178670, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7594cbf58dd69f7cf17a1a9241be9965?s=128&d=identicon&r=PG&f=1", "display_name": "AHmed", "link": "https://stackoverflow.com/users/5178670/ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1544, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1494971330, "creation_date": 1452035845, "last_edit_date": 1494971330, "question_id": 34623010, "link": "https://stackoverflow.com/questions/34623010/amazon-aws-images-are-not-showing", "title": "Amazon AWS Images are not showing?", "body": "<p>I am trying to add images to work in my app. I have installed the Amazon AWS SDK gem and setup the environments variables but when i create an image tag the image is not showing in Heroku. Heres my code</p>\n\n<p>[![enter image description here][1]][1]</p>\n"}, {"tags": ["ruby", "ssh"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 5, "creation_date": 1452035900, "post_id": 34622878, "comment_id": 56991588, "body": "You execute your <code>sudo cancel #{id}</code> locally. You probably want to execute it on the remote server using your SSH connection instead."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 1, "creation_date": 1452053272, "post_id": 34622878, "comment_id": 56996650, "body": "You should give another argument to the  <code>kill_jobs</code> method so that it will run on the SSH connection.."}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1452084012, "post_id": 34622878, "comment_id": 57011609, "body": "@HolgerJust Could you make an answer on how I would do that please?"}], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 2, "last_activity_date": 1452101730, "creation_date": 1452101730, "answer_id": 34639216, "question_id": 34622878, "link": "https://stackoverflow.com/questions/34622878/print-job-programming-not-cancelling/34639216#34639216", "title": "Print job programming not cancelling", "body": "<p>As pointed in comments to question, <code>cancel</code> command is issued on local server and not on the remote server.  You need to pass <code>ssh</code> object to <code>kill_jobs</code> and execute the command on <code>ssh</code> connection.</p>\n\n<p><strong>Step 1</strong>:  Pass <code>ssh</code> to <code>kill_que</code> method.</p>\n\n<pre><code>   if input == \"YES\"\n     kill_que(ssh, check_jobs, res)  # *** Pass ssh object\n</code></pre>\n\n<p><strong>Step 2</strong>: Update <code>kill_que</code> method to use <code>ssh</code> object</p>\n\n<pre><code>def kill_que(ssh, check_jobs, res)\n   puts \"Loading jobs into kill que..\"\n   column = 0\n   job_ids = res.lines.map { |job| job.split(/\\s+/)[0] }.each do |task_id|\n     kill_jobs(ssh, task_id)  # *** Pass ssh to kill_jobs\n   end\nend\n</code></pre>\n\n<p><strong>Step 3</strong>: Use <code>ssh</code> in <code>kill_jobs</code></p>\n\n<pre><code>def kill_jobs(ssh, task_id)\n    id_to_strip = task_id.gsub(/\\-/,\" \")\n    column = 1\n    stripping_id = id_to_strip.lines.map { |task| task.split(/\\s+/)[1] }.each do |id|\n      id.strip\n      puts \"Cancelling job: #{id}\"\n      ssh.exec!(\"sudo cancel #{id}\")  # *** Issue this command via ssh\n      # puts id\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 34639216, "answer_count": 1, "score": 2, "last_activity_date": 1452101730, "creation_date": 1452035171, "last_edit_date": 1452097393, "question_id": 34622878, "link": "https://stackoverflow.com/questions/34622878/print-job-programming-not-cancelling", "title": "Print job programming not cancelling", "body": "<p>I've created a program with will scan through a server specified by the user and output the list of print jobs on that server, from there it will output all jobs older then 2016, and <code>gsub</code> down to the job ID number.</p>\n\n<p>Then what it's suppose to do is cancel the job, but what it's doing is saying: </p>\n\n<pre><code>Cancelling job: 829116\ncancel: cancel-job failed: Job #829116 does not exist!\nCancelling job: 795259\ncancel: cancel-job failed: Job #795259 does not exist!\nCancelling job: 795260\ncancel: cancel-job failed: Job #795260 does not exist!\nCancelling job: 797216\ncancel: cancel-job failed: Job #797216 does not exist!\nCancelling job: 797217\ncancel: cancel-job failed: Job #797217 does not exist!\n</code></pre>\n\n<p>When it does exist, if I go to the specific server and run a <code>prt_jobs</code> the job pops up.. example:</p>\n\n<pre><code>#On the server I ran prt_jobs\ncdprt11-829116          dij             244736   Mon Aug 24 06:07:12 2015\nclosing_2-795259        dlc             228352   Tue Jul 28 13:43:08 2015\nclosing_2-795260        dlc             228352   Tue Jul 28 13:44:05 2015\nclosing_2-797216        tkb             286720   Wed Jul 29 13:56:27 2015\nclosing_2-797217        tkb             250880   Wed Jul 29 13:56:41 2015\n</code></pre>\n\n<p>Can anyone tell me why it's not cancelling the jobs specified?</p>\n\n<p>Source:</p>\n\n<pre><code>#!/usr/local/bin/ruby\n\nrequire 'rubygems'\nrequire 'net/ssh'\nrequire 'etc'\n\nclass PrintJobs\n\n HOST = ARGV[0]\n USERNAME = Etc.getlogin\n PASSWORD = nil\n\n def scan_for_jobs\n   check_jobs = Net::SSH.start(HOST, USERNAME, :password =&gt; PASSWORD) do |ssh|\n     cmd = \"prt_jobs\"\n     info = ssh.exec!(cmd)\n     if info == nil\n       puts \"No print jobs on server #{HOST}\"\n     else\n       res = info.split(\"\\n\").reject {|line| line.match(/\\s+2016/s+/)}.join(\"\\n\")\n       puts res\n       print \"Process into kill que: \"\n       input = STDIN.gets.chomp.upcase\n       if input == \"YES\"\n         kill_que(check_jobs, res)\n       else\n         exit 1\n       end\n     end\n   end\n end\n\n def kill_que(check_jobs, res)\n   puts \"Loading jobs into kill que..\"\n   column = 0\n   job_ids = res.lines.map { |job| job.split(/\\s+/)[0] }.each do |task_id|\n     kill_jobs(task_id)\n   end\n end\n\n def kill_jobs(task_id)\n    id_to_strip = task_id.gsub(/\\-/,\" \")\n    column = 1\n    stripping_id = id_to_strip.lines.map { |task| task.split(/\\s+/)[1] }.each do |id|\n      id.strip\n      puts \"Cancelling job: #{id}\"\n      `sudo cancel #{id}`\n      # puts id\n    end\n  end\nend\n\ntest = PrintJobs.new\ntest.scan_for_jobs\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "edited": false, "score": 2, "creation_date": 1452033273, "post_id": 34622000, "comment_id": 56990503, "body": "render &#39;new_comment&#39;, but the template name is &#39;_new_comments&#39; (plural)"}, {"owner": {"reputation": 11, "user_id": 5724237, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9734b5348683c9e6ae89978c4b218342?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Mayle", "link": "https://stackoverflow.com/users/5724237/daniel-mayle"}, "reply_to_user": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "edited": false, "score": 0, "creation_date": 1452118805, "post_id": 34622000, "comment_id": 57033741, "body": "Thanks for the suggestion. I changed the name of the comment.erb and new_comment.erb pages. However the comments and rating section is still no showing up."}, {"owner": {"reputation": 11, "user_id": 5724237, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9734b5348683c9e6ae89978c4b218342?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Mayle", "link": "https://stackoverflow.com/users/5724237/daniel-mayle"}, "reply_to_user": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "edited": false, "score": 0, "creation_date": 1452143563, "post_id": 34622000, "comment_id": 57041077, "body": "I figured out the issue after reading your advice again. I forgot to render _product. Thanks for the help."}], "owner": {"reputation": 11, "user_id": 5724237, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9734b5348683c9e6ae89978c4b218342?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Mayle", "link": "https://stackoverflow.com/users/5724237/daniel-mayle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1452118733, "creation_date": 1452031199, "last_edit_date": 1452118733, "question_id": 34622000, "link": "https://stackoverflow.com/questions/34622000/comments-and-rating-section-no-longer-showing-up", "title": "Comments and Rating section no longer showing up;", "body": "<p>I am working on creating a test shoe store website for one of my classes. I had previously added a comment section and rating system for new shoes. For some reason the comment and rating section is no longer viewable.</p>\n\n<p>Here is my product show page</p>\n\n<pre><code>   &lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n    &lt;div class=\"show-buttons\" id=\"show1\"&gt;\n    &lt;%= link_to 'Edit', edit_product_path(@product), class: \"btn btn-    success btn-xs\"  %&gt; |\n\n    &lt;%= link_to 'Back', products_path, class: \"btn btn-primary btn-xs\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"pay button\"&gt;\n  &lt;%= form_tag \"/payments/create\" do %&gt;\n  &lt;%= render partial: \"shared/stripe_checkout_button\" %&gt;\n  &lt;%= hidden_field_tag(:product_id, @product.id) %&gt;\n&lt;/div&gt;\n&lt;p&gt;\n  &lt;strong&gt;Name:&lt;/strong&gt;\n  &lt;%= @product.name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Description:&lt;/strong&gt;\n  &lt;%= @product.description %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Image url:&lt;/strong&gt;\n  &lt;%= @product.image_url %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;Average Rating: \n  &lt;div class=\"rated\" data-score=\"&lt;%= @product.average_rating %&gt;\"&gt;&lt;/div&gt; \n&lt;/p&gt;\n\n&lt;%= render 'new_comment' %&gt;\n    &lt;%= render 'comment' %&gt;\n    &lt;%= will_paginate @comments %&gt;  \n\n&lt;/div&gt;\n\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here is my _comment.html.erb</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"product-reviews\"&gt;\n        &lt;% @comments.each do |comment| %&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;hr&gt;\n          &lt;p&gt;&lt;%= comment.user.first_name %&gt; &lt;small&gt;&lt;em&gt;&lt;%= \"# {time_ago_in_words(comment.created_at)} ago\" %&gt;&lt;/em&gt;&lt;/small&gt;&lt;/p&gt;\n        &lt;% if signed_in? &amp;&amp; current_user.admin? %&gt;\n            &lt;%= link_to ('&lt;span class=\"glyphicon glyphicon-remove\"&gt;  &lt;/span&gt;').html_safe, product_comment_path(@product, comment), method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n        &lt;% end %&gt;   \n        &lt;div class=\"rated\" data-score=\"&lt;%= comment.rating %&gt;\"&gt;&lt;/div&gt;\n        &lt;p&gt;&lt;%= \"Rating: #{comment.rating}/5\" %&gt;&lt;/p&gt;\n        &lt;p&gt;&lt;%= comment.body %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>My _new_comment.html.erb </p>\n\n<pre><code>&lt;% if signed_in? %&gt;\n  &lt;h4&gt;Add a review:&lt;/h4&gt;\n  &lt;%= form_for([@product, @product.comments.build]) do |f| %&gt;\n    &lt;p&gt;\n  &lt;%= f.label :body, \"Comments\" %&gt;&lt;br&gt;\n  &lt;%= f.text_area :body %&gt;\n&lt;/p&gt;\n&lt;p&gt;\n &lt;%= f.label :rating %&gt;&lt;br&gt;\n  &lt;div class= \"rating\"&gt;&lt;/div&gt;\n&lt;/p&gt;\n&lt;%= f.submit \"Submit\", class: \"btn btn-default\" %&gt;    \n&lt;/p&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And finally my product.html.erb</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-4\"&gt;\n\n     &lt;div class=\"productbox\"&gt;\n\n        &lt;div class=\"imgthumb img-responsive\"&gt;\n          &lt;%= image_tag(product.image_url, :class =&gt; 'list_image') %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"caption\"&gt;\n          &lt;h3&gt;&lt;%= product.name %&gt;&lt;/h3&gt;   \n        &lt;/div&gt;\n\n      &lt;/div&gt;&lt;!--end productbox--&gt;\n      &lt;/div&gt;&lt;!--end columns--&gt;\n\n         &lt;div class=\"col-md-8\" id=\"descriptionp\"&gt;\n          &lt;p&gt;&lt;%= product.description %&gt;&lt;br&gt;&lt;br&gt;\n          &lt;%= product.color %&gt;&lt;br&gt;&lt;br&gt;\n          \u20ac&lt;%= product.price %&gt;&lt;br&gt;&lt;br&gt;\n          &lt;%= link_to 'More Info', product %&gt;&lt;br&gt;&lt;br&gt;\n\n          &lt;% if signed_in? &amp;&amp; current_user.admin? %&gt;\n          &lt;%= link_to 'Edit', edit_product_path(product) %&gt; | \n          &lt;%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n          &lt;% end %&gt;\n         &lt;/p&gt;\n         &lt;/div&gt;    \n  &lt;/div&gt;&lt;!--/row--&gt;  \n&lt;/div&gt;&lt;!--/container --&gt;\n&lt;hr&gt;\n</code></pre>\n\n<p>Any assistance on why I can no longer view my comments or rating page would be greatly appreciated.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax", "partials"], "comments": [{"owner": {"reputation": 1170, "user_id": 3587075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2N7Vf.png?s=128&g=1", "display_name": "Cristiano Mendon&#231;a", "link": "https://stackoverflow.com/users/3587075/cristiano-mendon%c3%a7a"}, "edited": false, "score": 0, "creation_date": 1452030557, "post_id": 34621566, "comment_id": 56989268, "body": "Sometimes browser stumbles with string marks in JS responses. If using Chrome open your terminal, go to Network tab and create your comment. You&#39;ll see what server is returning and whether browser is stumbling with that."}, {"owner": {"reputation": 551, "user_id": 4613575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94ee57c5cea9f3b94b68b7e5cf76369e?s=128&d=identicon&r=PG&f=1", "display_name": "hackrnaut", "link": "https://stackoverflow.com/users/4613575/hackrnaut"}, "reply_to_user": {"reputation": 1170, "user_id": 3587075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2N7Vf.png?s=128&g=1", "display_name": "Cristiano Mendon&#231;a", "link": "https://stackoverflow.com/users/3587075/cristiano-mendon%c3%a7a"}, "edited": false, "score": 0, "creation_date": 1452030879, "post_id": 34621566, "comment_id": 56989445, "body": "$(&#39;#win_com&#39;).html&quot;&quot;;   This is what I get in response, but I&#39;m not sure what to make of it?"}, {"owner": {"reputation": 1170, "user_id": 3587075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2N7Vf.png?s=128&g=1", "display_name": "Cristiano Mendon&#231;a", "link": "https://stackoverflow.com/users/3587075/cristiano-mendon%c3%a7a"}, "edited": false, "score": 0, "creation_date": 1452031097, "post_id": 34621566, "comment_id": 56989541, "body": "Try invoke it this way: $(&#39;#win_com&#39;).html(&quot;&lt;%= j render(partial:&#39;/windows/comment&#39;, collection: @comments)%&gt;&quot;);"}, {"owner": {"reputation": 551, "user_id": 4613575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94ee57c5cea9f3b94b68b7e5cf76369e?s=128&d=identicon&r=PG&f=1", "display_name": "hackrnaut", "link": "https://stackoverflow.com/users/4613575/hackrnaut"}, "reply_to_user": {"reputation": 1170, "user_id": 3587075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2N7Vf.png?s=128&g=1", "display_name": "Cristiano Mendon&#231;a", "link": "https://stackoverflow.com/users/3587075/cristiano-mendon%c3%a7a"}, "edited": false, "score": 0, "creation_date": 1452031272, "post_id": 34621566, "comment_id": 56989634, "body": "Thank you, I just realized I forgot the parenthesis, however, now all the previous comments disappear and  nothing shows in the comments section until I refresh. I am getting a similar response in the network tab: $(&#39;#win_com&#39;).html(&quot;&quot;);"}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 0, "creation_date": 1452031412, "post_id": 34621566, "comment_id": 56989694, "body": "Based on what your are doing may I suggest you look into react.rb <a href=\"http://reactrb.org\" rel=\"nofollow noreferrer\">reactrb.org</a> .  This could simplify your life.  I apologize if this is slightly off point, but it a similar suggestion really helped us out a year ago!"}, {"owner": {"reputation": 1170, "user_id": 3587075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2N7Vf.png?s=128&g=1", "display_name": "Cristiano Mendon&#231;a", "link": "https://stackoverflow.com/users/3587075/cristiano-mendon%c3%a7a"}, "edited": false, "score": 2, "creation_date": 1452031484, "post_id": 34621566, "comment_id": 56989720, "body": "html function will set the content of #win_com with blank (since nothing is being passed as parameter). You may have to use &#39;append&#39; function."}, {"owner": {"reputation": 1170, "user_id": 3587075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2N7Vf.png?s=128&g=1", "display_name": "Cristiano Mendon&#231;a", "link": "https://stackoverflow.com/users/3587075/cristiano-mendon%c3%a7a"}, "edited": false, "score": 0, "creation_date": 1452031658, "post_id": 34621566, "comment_id": 56989795, "body": "Debug your code and check what is being returned by &lt;%= j render(partial:&#39;/windows/comment&#39;, collection: @comments)%&gt;"}, {"owner": {"reputation": 551, "user_id": 4613575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94ee57c5cea9f3b94b68b7e5cf76369e?s=128&d=identicon&r=PG&f=1", "display_name": "hackrnaut", "link": "https://stackoverflow.com/users/4613575/hackrnaut"}, "edited": false, "score": 0, "creation_date": 1452032109, "post_id": 34621566, "comment_id": 56989991, "body": "How do I specifically check what that section of the code is returning? From what it looks like, it seems as though it is returning nothing. What do you mean by &#39;nothing is being passed as parameter&#39;? Parameter to where?"}], "answers": [{"tags": [], "owner": {"reputation": 192, "user_id": 1031654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/30731fd7af857d675772b8520f227c8c?s=128&d=identicon&r=PG", "display_name": "Reyko", "link": "https://stackoverflow.com/users/1031654/reyko"}, "is_accepted": false, "score": 0, "last_activity_date": 1452032420, "creation_date": 1452032420, "answer_id": 34622249, "question_id": 34621566, "link": "https://stackoverflow.com/questions/34621566/why-is-my-partial-not-rails-rendering-properly/34622249#34622249", "title": "Why is my partial not rails rendering properly?", "body": "<p>.html() will replace all the contents of the target DOM element instead use .append()</p>\n\n<p>Replace this:</p>\n\n<pre><code>$('#win_com').html( \"&lt;%= j(render(partial:'/windows/comment', collection: @comments)) %&gt;\" );\n</code></pre>\n\n<p>With that:</p>\n\n<pre><code>$('#win_com').append( \"&lt;%= j(render(partial:'/windows/comment', collection: @comments)) %&gt;\" );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 551, "user_id": 4613575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94ee57c5cea9f3b94b68b7e5cf76369e?s=128&d=identicon&r=PG&f=1", "display_name": "hackrnaut", "link": "https://stackoverflow.com/users/4613575/hackrnaut"}, "edited": false, "score": 0, "creation_date": 1452032894, "post_id": 34622333, "comment_id": 56990324, "body": "Yes, I just figured this out from some comments a user left a little bit ago. Thank you for getting back to me, I appreciate it."}], "tags": [], "owner": {"reputation": 739, "user_id": 3283179, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/sSL4e.jpg?s=128&g=1", "display_name": "qubit", "link": "https://stackoverflow.com/users/3283179/qubit"}, "is_accepted": true, "score": 1, "last_activity_date": 1452032698, "creation_date": 1452032698, "answer_id": 34622333, "question_id": 34621566, "link": "https://stackoverflow.com/questions/34621566/why-is-my-partial-not-rails-rendering-properly/34622333#34622333", "title": "Why is my partial not rails rendering properly?", "body": "<p>You are missing the @comments instance variable in your controller action create. Rails cannot magically know what it is unless you specify it. Your could change your create action to something like this. </p>\n\n<pre><code>def create\n    @window = Window.find(params[:window_id])\n    @comment = @window.comments.build(comment_params)\n    @comment.user_id = current_user.id\n\n    if @comment.save\n        @comments = @post.comments //given that this is defined. \n        respond_to do |format|\n            format.html { redirect_to post_path(@post) }\n            format.js \n        end\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 4613575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/94ee57c5cea9f3b94b68b7e5cf76369e?s=128&d=identicon&r=PG&f=1", "display_name": "hackrnaut", "link": "https://stackoverflow.com/users/4613575/hackrnaut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 34622333, "answer_count": 2, "score": 0, "last_activity_date": 1452032698, "creation_date": 1452029426, "last_edit_date": 1452031123, "question_id": 34621566, "link": "https://stackoverflow.com/questions/34621566/why-is-my-partial-not-rails-rendering-properly", "title": "Why is my partial not rails rendering properly?", "body": "<p>I want to add comments without having to refresh the page in my app.  However, my partial does no load properly with the JS functionality I am implementing. </p>\n\n<p>I am getting no errors in my log or console, and the comment shows once I refresh the page, but it does not happen without a refresh. </p>\n\n<p>Also, when I just write JS to append the last comment to the win_com id, the code works. I'd like the HTML to dynamically show the current state of the comment partial via JS rather than just append the last comment. Any help would be appreciated! Here's my code:</p>\n\n<p>comments_controller.rb:</p>\n\n<pre><code>def create\n    @window = Window.find(params[:window_id])\n    @comment = @window.comments.build(comment_params)\n    @comment.user_id = current_user.id\n\n    if @comment.save\n        respond_to do |format|\n            format.html { redirect_to post_path(@post) }\n            format.js \n        end\n    end\nend\n</code></pre>\n\n<p>views/windows/show.html.erb: (part of a larger view)</p>\n\n<pre><code>&lt;div class=\"row col-md-7\" id=\"win_com\"&gt;\n    &lt;h4&gt;User Comments&lt;/h4&gt;\n    &lt;%= render partial: '/windows/comment', collection: @comments %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>views/windows/_comment.html.erb:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;div class=\"row col-md-7\"&gt;\n        &lt;p&gt;&lt;%= comment.body %&gt;&lt;/p&gt; \n        &lt;p&gt;&lt;%= link_to \"Delete\", [comment.window, comment], method: :delete,\n                                                            data: {confirm: \"Are you sure?\"} %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>views/comments/create.js.erb:</p>\n\n<pre><code>$('#win_com').html(\"&lt;%= j render(partial:'/windows/comment', collection: @comments)%&gt;\");\n</code></pre>\n\n<p>application.js:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require bootstrap-sprockets\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>Maybe some key lines from my sever log?:</p>\n\n<pre><code>Rendered windows/_comment.html.erb (0.0ms)\nRendered comments/create.js.erb (1.8ms)\n</code></pre>\n"}, {"tags": ["ruby", "attributes"], "comments": [{"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 2, "creation_date": 1452028963, "post_id": 34621353, "comment_id": 56988557, "body": "i dont quite understand your second example. So your saying that you should be able to set arbitrary instance variables whenever you want without using accessor or declaring the variable in the constructor? that doesnt sound like a very good idea."}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 0, "creation_date": 1452030458, "post_id": 34621353, "comment_id": 56989225, "body": "I really commend you an excellent question.  I added a counter example for your reading pleasure :-)"}, {"owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "reply_to_user": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 0, "creation_date": 1452031387, "post_id": 34621353, "comment_id": 56989681, "body": "Thanks @MitchVanDuyn. It didn&#39;t occur to me that if Ruby allows arbitary creation from the outside, <i>anyone</i> can change the code outside-in. It makes sense!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1452039760, "post_id": 34621353, "comment_id": 56992912, "body": "The class method <a href=\"http://ruby-doc.org/core-2.0.0/Module.html#method-i-attr_accessor\" rel=\"nofollow noreferrer\">Module#attr_accessor</a> is provided simply as a convenience. <code>attr_accessor :a</code> creates &quot;getter&quot; and &quot;setter&quot; methods for the instance variable <code>@a</code>: <code>def a; @a; end</code> and <code>def a=(other); a=other; end</code>, saving you the trouble of doing so."}], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1452034179, "post_id": 34621421, "comment_id": 56990922, "body": "Instead of your <code>OpenKimono</code> class, in real code you should use the <a href=\"http://ruby-doc.org/stdlib/libdoc/ostruct/rdoc/OpenStruct.html\" rel=\"nofollow noreferrer\"><code>OpenStruct</code> class from the Ruby standard library</a> which does almost the same but provides a couple of additional access capabilities, e.g. hash-like accessors."}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1452034727, "post_id": 34621421, "comment_id": 56991171, "body": "true enough, I just invented a class to make the point that it can be done, without any magic, just using ruby&#39;s meta programming capability."}], "tags": [], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1452031019, "last_edit_date": 1452031019, "creation_date": 1452028799, "answer_id": 34621421, "question_id": 34621353, "link": "https://stackoverflow.com/questions/34621353/why-do-we-need-attr-accessor/34621421#34621421", "title": "Why do we need attr_accessor?", "body": "<p>Because it makes the code easier to maintain.  </p>\n\n<p>This way its clear from reading the class code what you expect to have happen, and that you expect other classes to access these variables.</p>\n\n<p>Without this outside code could simply access your internal variables, and then if you refactor your code and remove or rename such a variable the outside code breaks.</p>\n\n<p>Thus the accessor methods make it clear you intend for other classes to access these methods</p>\n\n<p>FYI:  Ruby is very powerful, and if you want you can go ahead and make it work the way you want.  I don't recommend this but am pointing it out so you will understand that its a explicit choice being made for the good of keeping your code readable.   But if you want to see how you could do this read on, and try running the code...</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script type=\"text/ruby\"&gt;\r\n\r\ndef puts(s)  # ignore this method, just dumps to the display\r\n  Element['#output'].html = Element['#output'].html + s.to_s + \"&lt;br/&gt;\"\r\nend\r\n\r\nclass OpenKimono\r\n  def method_missing(name, *args)\r\n    if name =~ /=$/\r\n      instance_variable_set(\"@#{name[0..-2]}\".to_sym, args[0])\r\n    else\r\n      instance_variable_get(\"@#{name}\")\r\n    end\r\n  end\r\nend\r\n\r\nclass MyClass &lt; OpenKimono\r\nend\r\n\r\nfoo = MyClass.new\r\n\r\nfoo.bar = 12\r\n\r\nputs \"foo.bar just set to 12, it now = #{foo.bar}\"\r\n\r\nfoo.baz = 13\r\n\r\nputs \"foo.baz just set to 13, it now = #{foo.baz}\"\r\n\r\nputs \"foo.manchu has never been set... what does it equal? #{foo.manchu}\"\r\n\r\n&lt;/script&gt;\r\n\r\n\r\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://rawgit.com/reactive-ruby/inline-reactive-ruby/master/inline-reactive-ruby.js\"&gt;&lt;/script&gt;\r\n&lt;div id=\"output\" style=\"font-family: courier\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 7206, "user_id": 153886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3494c51ae32711dc7428334ef1cafa02?s=128&d=identicon&r=PG", "display_name": "Julik", "link": "https://stackoverflow.com/users/153886/julik"}, "is_accepted": false, "score": 3, "last_activity_date": 1452096468, "last_edit_date": 1452096468, "creation_date": 1452030521, "answer_id": 34621823, "question_id": 34621353, "link": "https://stackoverflow.com/questions/34621353/why-do-we-need-attr-accessor/34621823#34621823", "title": "Why do we need attr_accessor?", "body": "<p>In many OO languages you have a single table shared between the object's <em>methods</em> and the object's <em>properties</em>. In Ruby, all the object's consumer should be concerned with are the object's <em>methods</em>. If you have this in JS:</p>\n\n<pre><code>Tank:\n   weight: 123\n   moveForward: function()...\n</code></pre>\n\n<p>in Ruby you would have:</p>\n\n<pre><code>Tank:\n  ivars:\n     @weight = 123\n  methods:\n     weight: return @weight # or other implementation, or a proxy...\n     move_forward...\n</code></pre>\n\n<p>The reason for having two distinct tables is allowing the object to decide how to store data and whether to store it, instead of having it's properties poked from outside. This allows for one extremely important advantage: <a href=\"https://en.wikipedia.org/wiki/Uniform_access_principle\" rel=\"nofollow\">UAP</a> is maintained. That is, from the outside you work with the object's methods (sending it messages) regardless of whether those are properties or methods.</p>\n\n<p>It is a wonderful feature that many other object-oriented languages either disregard in the name of optimisation (avoid indirection) or by negligence/ignorance (python is a prime example). I've written a little article on the subject here: <a href=\"http://live.julik.nl/2012/08/messages-versus-slots\" rel=\"nofollow\">http://live.julik.nl/2012/08/messages-versus-slots</a></p>\n\n<p>To answer the last part of your question:</p>\n\n<blockquote>\n  <p>Why do we need to set up reader and writer in the Class instead of the following code and save a few lines?</p>\n</blockquote>\n\n<p>To prevent situations that you have <em>all the time</em> in JavaScript where you address a method or a property on an object only to find <code>undefined</code> in it's place, which will blow up your application many lines (or executio seconds) out of where you access the property.</p>\n\n<p>In Ruby you will get an exception if you do, and it will save you from yourself thousands of times, trust me. As a matter of fact, you <em>can</em> create an object that will accept any getter/setter messages, and such object already exists - it's an OpenStruct. It's use normally not a good practice because of speed concerns.</p>\n\n<pre><code>[1] pry(main)&gt; require 'ostruct'\n=&gt; true\n[2] pry(main)&gt; s = OpenStruct.new\n=&gt; #&lt;OpenStruct&gt;\n[3] pry(main)&gt; s.foo = 1\n=&gt; 1\n[4] pry(main)&gt; s.bar = 2\n=&gt; 2\n[5] pry(main)&gt; s.foo\n=&gt; 1\n[6] pry(main)&gt; s.bar\n=&gt; 2\n[7] pry(main)&gt; s.x\n=&gt; nil\n</code></pre>\n\n<p>An additional benefit from using the attribute method generators is that most Ruby documentation engines (both RDoc and YARD) will look for those to document your object methods quicker.</p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 4, "last_activity_date": 1452032522, "creation_date": 1452032522, "answer_id": 34622284, "question_id": 34621353, "link": "https://stackoverflow.com/questions/34621353/why-do-we-need-attr-accessor/34622284#34622284", "title": "Why do we need attr_accessor?", "body": "<p>OpenStruct behaves like OP's second snippet:</p>\n\n<pre><code>require 'ostruct'\n\nbob = OpenStruct.new\nbob.age = 99\np bob.age # =&gt; 99\n</code></pre>\n\n<p>So there is a choice.</p>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1266, "favorite_count": 0, "accepted_answer_id": 34621421, "answer_count": 3, "score": 1, "last_activity_date": 1452096468, "creation_date": 1452028524, "last_edit_date": 1495535301, "question_id": 34621353, "link": "https://stackoverflow.com/questions/34621353/why-do-we-need-attr-accessor", "title": "Why do we need attr_accessor?", "body": "<p>I fail to understand why we needed the attr_reader and attr_writer, or attr_accessor to be declared in a class. I read both <a href=\"https://stackoverflow.com/questions/4370960/what-is-attr-accessor-in-ruby\">this</a> and <a href=\"https://stackoverflow.com/questions/5046831/why-use-rubys-attr-accessor-attr-reader-and-attr-writer\">this</a> posts, but those posts explain mainly how they work, not as much as why they are there. </p>\n\n<p>In case of </p>\n\n<pre><code>class Person\n  attr_accessor :age\nend\n\nbob = Person.new\nbob.age = 99\nbob.age\n</code></pre>\n\n<p>It seems a little redundant having to tell Ruby to write and read age, while not being able to write and read instance variable outside the class automatically. Why do we need to set up reader and writer in the Class instead of the following code and save a few lines?</p>\n\n<pre><code>class Person\nend\n\nbob = Person.new\nbob.age = 99\nbob.age \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "activerecord", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 4, "last_activity_date": 1452027079, "creation_date": 1452027079, "answer_id": 34621018, "question_id": 34620912, "link": "https://stackoverflow.com/questions/34620912/rails-model-attribute-a-datetime-has-different-value-depending-on-how-its-call/34621018#34621018", "title": "Rails model attribute (a DateTime) has different value depending on how its called", "body": "<p>This is because a date/time value is stored in the database as UTC and the default implementation of <code>inspect</code> for an ActiveRecord model doesn't apply any timezone conversion.</p>\n\n<p>However, when you access the date/time value, Rails will apply the current timezone settings.</p>\n\n<p>You can do the math. Since your timezone is UTC-5, both datetime represent the same object</p>\n\n<pre><code>2016-01-09 00:00:00 UTC\nFri, 08 Jan 2016 19:00:00 EST -05:00\n</code></pre>\n\n<p>As a proof, you can call</p>\n\n<pre><code>Ride.find(1803).start_time.utc\n</code></pre>\n\n<p>and you will get the date/time as UTC, that will probably be the same value you see when you print out the full record representation.</p>\n"}], "owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 34621018, "answer_count": 1, "score": -1, "last_activity_date": 1452027537, "creation_date": 1452026707, "question_id": 34620912, "link": "https://stackoverflow.com/questions/34620912/rails-model-attribute-a-datetime-has-different-value-depending-on-how-its-call", "title": "Rails model attribute (a DateTime) has different value depending on how its called", "body": "<p>I am using Rails 4.2 and Ruby 2.2.0.  I have a model called Ride that has a DateTime attribute called start_time.  When I call <code>Ride.find(1803)</code>, The start_time is shown as January 9th.  But when I call <code>Ride.find(1803).start_time</code>, It returns a start_time on January 9th.  How is this possible and how do I fix it?  Here's the full code I ran in the console:</p>\n\n<pre><code>irb(main):028:0&gt; Ride.find(1803)\n=&gt; #&lt;Ride id: 1803, start_time: \"2016-01-09 00:00:00\", end_time: nil, created_at: \"2016-01-05 16:55:44\", updated_at: \"2016-01-05 20:35:38\", user_id: 29, ride_type: nil, horse_id: nil, notes: \"\", available_to_ride_additional_horses: nil, admin_approved: false, weekday: nil, unavailable_to_ride: false, time_range_dropdown: \"Morning\", rider_name: \"Matti Fisher\", rider_last_name: \"Fisher\", rider_first_name: \"Matti\", edited_at: nil, requested_time: \"2016-01-09 19:30:00\"&gt;\nirb(main):029:0&gt; Ride.find(1803).start_time\n=&gt; Fri, 08 Jan 2016 19:00:00 EST -05:00\n</code></pre>\n"}, {"tags": ["ruby", "irb", "refinements"], "comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1452025730, "post_id": 34620550, "comment_id": 56986896, "body": "Looks like a version problem, I got <code>(irb):2: warning: Refinements are experimental, and the behavior may change in future versions of Ruby!</code>. I&#39;m using <code>irb 0.9.6(09&#47;06&#47;30)</code> and <code>ruby20</code>"}, {"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "reply_to_user": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1452025854, "post_id": 34620550, "comment_id": 56986956, "body": "@hek2mgl I&#39;m using the latest version of Ruby/IRB. Refinements aren&#39;t experimental any more; that language has been removed from all the docs."}, {"owner": {"reputation": 1242, "user_id": 3252252, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/4V81y.jpg?s=128&g=1", "display_name": "Jesuspc", "link": "https://stackoverflow.com/users/3252252/jesuspc"}, "edited": false, "score": 1, "creation_date": 1452035233, "post_id": 34620550, "comment_id": 56991358, "body": "It looks like a bug in irb to me. It works fine with pry. Also the error message does not have sense since we are calling using precisely on the top level."}, {"owner": {"reputation": 60090, "user_id": 188031, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/p2YIF.jpg?s=128&g=1", "display_name": "tokland", "link": "https://stackoverflow.com/users/188031/tokland"}, "edited": false, "score": 1, "creation_date": 1461970385, "post_id": 34620550, "comment_id": 61455868, "body": "Check <a href=\"https://bugs.ruby-lang.org/issues/9580\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/issues/9580</a>"}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 7, "last_activity_date": 1452062588, "creation_date": 1452062588, "answer_id": 34627153, "question_id": 34620550, "link": "https://stackoverflow.com/questions/34620550/why-did-i-get-main-using-is-permitted-only-at-toplevel-when-i-used-a-refinemen/34627153#34627153", "title": "Why did I get &quot;main.using is permitted only at toplevel&quot; when I used a Refinement in IRB?", "body": "<p>It's either a bug or a misfeature of IRb. It is well-known that due to the pretty hackish way IRb is implemented, it does not behave correctly for all corner-cases.</p>\n\n<p>The incompatibility probably everybody knows is that in Ruby, methods defined at the top-level become <code>private</code> instance methods of <code>Object</code>, whereas in IRb, they become <code>public</code> instance methods of <code>Object</code>. Another obvious behavioral difference is that in IRb, <code>require_relative</code> doesn't work, because it searches relative to the current file, but in IRb, there <em>is no</em> current file.</p>\n\n<p>There are also some differences in what syntax gets accepted, I believe, and something to do with local variables and when exactly they are and aren't defined.</p>\n\n<p>So, it is not inconceivable that there might also be some behavioral differences wrt. Refinements. In fact, I myself have encountered that error message, and running the exact same code outside IRb, either with <code>ruby -e</code>, from a file, or from a different REPL, always made it go away.</p>\n"}], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1088, "favorite_count": 0, "accepted_answer_id": 34627153, "answer_count": 1, "score": 6, "last_activity_date": 1549751045, "creation_date": 1452025284, "last_edit_date": 1549751045, "question_id": 34620550, "link": "https://stackoverflow.com/questions/34620550/why-did-i-get-main-using-is-permitted-only-at-toplevel-when-i-used-a-refinemen", "title": "Why did I get &quot;main.using is permitted only at toplevel&quot; when I used a Refinement in IRB?", "body": "<p>I tried to use a Refinement in IRB (v0.9.6, Ruby 2.3.0):</p>\n\n<pre><code>module Foo\n  refine Object do\n    def foo() \"foo\" end\n  end\nend\n\nusing Foo # =&gt; RuntimeError: main.using is permitted only at toplevel\n</code></pre>\n\n<p>This is basically <a href=\"http://ruby-doc.org/core/doc/syntax/refinements_rdoc.html\" rel=\"noreferrer\">the exact setup from the documentation</a> (which results in the same error).</p>\n\n<p>What went wrong? How do I fix this?</p>\n"}, {"tags": ["ruby", "hash", "dig", "ruby-2.3", "safe-navigation-operator"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 4, "creation_date": 1452026898, "post_id": 34620469, "comment_id": 56987484, "body": "For what it&#39;s worth, this has been discussed here (and rejected by Matz (for the time being): <a href=\"https://bugs.ruby-lang.org/issues/11747\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/issues/11747</a>"}, {"owner": {"reputation": 9737, "user_id": 2422778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUihh.jpg?s=128&g=1", "display_name": "Mike Szyndel", "link": "https://stackoverflow.com/users/2422778/mike-szyndel"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1538648853, "post_id": 34620469, "comment_id": 92220979, "body": "@JordanRunning and yet it works in Ruby 2.5!"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 9737, "user_id": 2422778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUihh.jpg?s=128&g=1", "display_name": "Mike Szyndel", "link": "https://stackoverflow.com/users/2422778/mike-szyndel"}, "edited": false, "score": 0, "creation_date": 1538762392, "post_id": 34620469, "comment_id": 92271803, "body": "@MikeSzyndel What, specifically, works in Ruby 2.5? There&#39;s still no <code>Hash</code>/<code>Array#bury</code> or equivalent method."}, {"owner": {"reputation": 9737, "user_id": 2422778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUihh.jpg?s=128&g=1", "display_name": "Mike Szyndel", "link": "https://stackoverflow.com/users/2422778/mike-szyndel"}, "edited": false, "score": 0, "creation_date": 1538850207, "post_id": 34620469, "comment_id": 92292305, "body": "I just successfully used <code>h.dig(:data, :user)&amp;.store(:value, &quot;Bob&quot;)</code> to edit a complicated Hash (parsed JSON file). No bury, but this method is clean and useful enough for my liking :)"}], "answers": [{"comments": [{"owner": {"reputation": 3822, "user_id": 477068, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/8rhcs.jpg?s=128&g=1", "display_name": "sbs", "link": "https://stackoverflow.com/users/477068/sbs"}, "edited": false, "score": 1, "creation_date": 1452031717, "post_id": 34621043, "comment_id": 56989815, "body": "Unfortunately, the hash was from somewhere else. But thanks for the snippet!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 6, "creation_date": 1452035334, "post_id": 34621043, "comment_id": 56991387, "body": "You can also set the default proc for existing hashes: <code>hsh.default_proc = proc { |h,k| h[k] = Hash.new(&amp;h.default_proc) }</code>"}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 13, "last_activity_date": 1484629972, "last_edit_date": 1484629972, "creation_date": 1452027184, "answer_id": 34621043, "question_id": 34620469, "link": "https://stackoverflow.com/questions/34620469/safely-assign-value-to-nested-hash-using-hashdig-or-lonely-operator/34621043#34621043", "title": "Safely assign value to nested hash using Hash#dig or Lonely operator(&amp;.)", "body": "<p>It's not without its caveats (and doesn't work if you're receiving the hash from elsewhere), but a common solution is this:</p>\n\n<pre><code>hash = Hash.new {|h,k| h[k] = h.class.new(&amp;h.default_proc) }\n\nhash[:data][:user][:value] = \"Bob\"\np hash\n# =&gt; { :data =&gt; { :user =&gt; { :value =&gt; \"Bob\" } } }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 428, "user_id": 1770783, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c38aabdd985c51ea633d42a293bc2c46?s=128&d=identicon&r=PG", "display_name": "corg", "link": "https://stackoverflow.com/users/1770783/corg"}, "is_accepted": false, "score": 1, "last_activity_date": 1547106755, "last_edit_date": 1547106755, "creation_date": 1547100155, "answer_id": 54122742, "question_id": 34620469, "link": "https://stackoverflow.com/questions/34620469/safely-assign-value-to-nested-hash-using-hashdig-or-lonely-operator/54122742#54122742", "title": "Safely assign value to nested hash using Hash#dig or Lonely operator(&amp;.)", "body": "<p>I found a simple solution to set the value of a nested hash, even if a parent key is missing, even if the hash already exists. Given:</p>\n\n<pre><code>x = { gojira: { guitar: { joe: 'charvel' } } }\n</code></pre>\n\n<p>Suppose you wanted to include mario's drum to result in:</p>\n\n<pre><code>x = { gojira: { guitar: { joe: 'charvel' }, drum: { mario: 'tama' } } }\n</code></pre>\n\n<p>I ended up monkey-patching Hash:</p>\n\n<pre><code>class Hash\n\n    # ensures nested hash from keys, and sets final key to value\n    # keys: Array of Symbol|String\n    # value: any\n    def nested_set(keys, value)\n      raise \"DEBUG: nested_set keys must be an Array\" unless keys.is_a?(Array)\n\n      final_key = keys.pop\n      return unless valid_key?(final_key)\n      position = self\n      for key in keys\n        return unless valid_key?(key)\n        position[key] = {} unless position[key].is_a?(Hash)\n        position = position[key]\n      end\n      position[final_key] = value\n    end\n\n    private\n\n      # returns true if key is valid\n      def valid_key?(key)\n        return true if key.is_a?(Symbol) || key.is_a?(String)\n        raise \"DEBUG: nested_set invalid key: #{key} (#{key.class})\"\n      end\nend\n</code></pre>\n\n<p>usage:</p>\n\n<pre><code>x.nested_set([:instrument, :drum, :mario], 'tama')\n</code></pre>\n\n<p>usage for your example:</p>\n\n<pre><code>h.nested_set([:data, :user, :value], 'Bob')\n</code></pre>\n\n<p>any caveats i missed? any better way to write the code without sacrificing readability?</p>\n"}, {"tags": [], "owner": {"reputation": 419, "user_id": 4352306, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Hh7mG.jpg?s=128&g=1", "display_name": "rellampec", "link": "https://stackoverflow.com/users/4352306/rellampec"}, "is_accepted": false, "score": 2, "last_activity_date": 1556428061, "creation_date": 1556428061, "answer_id": 55887188, "question_id": 34620469, "link": "https://stackoverflow.com/questions/34620469/safely-assign-value-to-nested-hash-using-hashdig-or-lonely-operator/55887188#55887188", "title": "Safely assign value to nested hash using Hash#dig or Lonely operator(&amp;.)", "body": "<p>interesting one:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def dig_set(obj, keys, value)\n  if keys.length == 1\n    obj[keys.first] = value\n  else\n    dig_set(obj[keys.first], keys.slice(1..-1), value)\n  end\nend\n</code></pre>\n\n<p>will raise an exception anyways if there's no <code>[]</code> or <code>[]=</code> methods.</p>\n"}, {"tags": [], "owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "is_accepted": false, "score": 6, "last_activity_date": 1587731891, "last_edit_date": 1587731891, "creation_date": 1587731588, "answer_id": 61408456, "question_id": 34620469, "link": "https://stackoverflow.com/questions/34620469/safely-assign-value-to-nested-hash-using-hashdig-or-lonely-operator/61408456#61408456", "title": "Safely assign value to nested hash using Hash#dig or Lonely operator(&amp;.)", "body": "<p>And building on @rellampec's answer, ones that does not throw errors:</p>\n\n<pre><code>def dig_set(obj, keys, value)\n  key = keys.first\n  if keys.length == 1\n    obj[key] = value\n  else\n    obj[key] = {} unless obj[key]\n    dig_set(obj[key], keys.slice(1..-1), value)\n  end\nend\n\nobj = {d: 'hey'}\ndig_set(obj, [:a, :b, :c], 'val')\nobj #=&gt; {d: 'hey', a: {b: {c: 'val'}}} \n</code></pre>\n"}], "owner": {"reputation": 3822, "user_id": 477068, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/8rhcs.jpg?s=128&g=1", "display_name": "sbs", "link": "https://stackoverflow.com/users/477068/sbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5095, "favorite_count": 5, "answer_count": 4, "score": 21, "last_activity_date": 1587731891, "creation_date": 1452024990, "question_id": 34620469, "link": "https://stackoverflow.com/questions/34620469/safely-assign-value-to-nested-hash-using-hashdig-or-lonely-operator", "title": "Safely assign value to nested hash using Hash#dig or Lonely operator(&amp;.)", "body": "<pre><code>h = {\n  data: {\n    user: {\n      value: \"John Doe\" \n    }\n  }\n}\n</code></pre>\n\n<p>To assign value to the nested hash, we can use</p>\n\n<pre><code>h[:data][:user][:value] = \"Bob\"\n</code></pre>\n\n<p>However if any part in the middle is missing, it will cause error.</p>\n\n<p>Something like </p>\n\n<pre><code>h.dig(:data, :user, :value) = \"Bob\"\n</code></pre>\n\n<p>won't work, since there's no <code>Hash#dig=</code> available yet.</p>\n\n<p>To safely assign value, we can do</p>\n\n<pre><code>h.dig(:data, :user)&amp;.[]=(:value, \"Bob\")    # or equivalently\nh.dig(:data, :user)&amp;.store(:value, \"Bob\")\n</code></pre>\n\n<p>But is there better way to do that? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1452025563, "post_id": 34620321, "comment_id": 56986822, "body": "what is the desired output?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1452027346, "post_id": 34620321, "comment_id": 56987730, "body": "FWIW <code>gsub</code> instead would save you from having to do <code>split</code> and then <code>join</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3894, "user_id": 1121568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc13eedc2642303b1a2251a4da7f157e?s=128&d=identicon&r=PG", "display_name": "Steven Schobert", "link": "https://stackoverflow.com/users/1121568/steven-schobert"}, "is_accepted": false, "score": 2, "last_activity_date": 1452030448, "last_edit_date": 1452030448, "creation_date": 1452026401, "answer_id": 34620828, "question_id": 34620321, "link": "https://stackoverflow.com/questions/34620321/ruby-map-function-for-pig-latin/34620828#34620828", "title": "Ruby map function for &quot;pig latin&quot;", "body": "<p>The output you are seeing has 2 different causes:</p>\n\n<p>1) In Ruby, <code>Array.map</code> returns a <strong>new</strong> array. It does not modify the array its iterating over. This is causing some of your modifications to the array to be lost.</p>\n\n<p>From the <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow\">Ruby docs</a>:</p>\n\n<blockquote>\n  <p>Invokes the given block once for each element of self.\n  Creates a new array containing the values returned by the block.</p>\n</blockquote>\n\n<p>You should either assign the result to a new variable, or use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-map-21\" rel=\"nofollow\"><code>Array.map!</code></a> instead, which <strong>will</strong> modify the contents of the array.</p>\n\n<pre><code>array = string.split(\" \")\n\nmapped = array.map do |word| \n  # ...\nend\n\nmapped.join(\" \")\n</code></pre>\n\n<p>2) Although some of your modifications are being lost due to using <code>map</code>, you are making modifications to some strings in your array, which is why you are seeing <code>eat ie</code>, and not <code>eat pie</code> (missing a <code>p</code>).</p>\n\n<p>To illustrate this problem, look a the follow code:</p>\n\n<pre><code>word = \"pie\"\nword[0] = \"\"\n\nputs word #=&gt; \"ie\"\n</code></pre>\n\n<p>In Ruby, when you access the first character in a string (by using <code>[0]</code>), and assign a value to it, Ruby <strong>mutates</strong> that string, and does not return a new copy.</p>\n\n<p>You should create a new string, instead of changing characters directly:</p>\n\n<pre><code>array.map do |word|\n  new_word = word.slice(1, word.length)\nend \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "is_accepted": false, "score": 1, "last_activity_date": 1452027414, "creation_date": 1452027414, "answer_id": 34621108, "question_id": 34620321, "link": "https://stackoverflow.com/questions/34620321/ruby-map-function-for-pig-latin/34621108#34621108", "title": "Ruby map function for &quot;pig latin&quot;", "body": "<p><code>array.map</code> does is not intended to mutate the array, so what you want to do is either <code>newarray = array.map { ... }</code> or <code>array.map! do ... end</code>.</p>\n\n<p>Inside the loop, each <code>word</code> is a string object, that you are mutating by calling <code>word[0] = \"\"</code>. By calling <code>word = word + \"ay\"</code> you are discarding the reference of the original string, but not overwriting it. It happens though that <code>word = word + \"ay\"</code> is the last statement executed in the block so it counts as return value for the block.</p>\n\n<p>I bet you are still confused because overall is not that simple so you might probably want to read something about <em>mutable</em> and <em>immutable</em> objects and <em>functional</em> and <em>imperative</em> programming.</p>\n"}, {"comments": [{"owner": {"reputation": 120, "user_id": 5741549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049cfda05105eac2d53838866876e153?s=128&d=identicon&r=PG", "display_name": "Jamie Pirie", "link": "https://stackoverflow.com/users/5741549/jamie-pirie"}, "reply_to_user": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 1, "creation_date": 1452032110, "post_id": 34621981, "comment_id": 56989992, "body": "It&#39;s not intended to be a full or complete solution, more of a guide for the OP in shortening their work by highlighting other ways of handling it."}], "tags": [], "owner": {"reputation": 120, "user_id": 5741549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049cfda05105eac2d53838866876e153?s=128&d=identicon&r=PG", "display_name": "Jamie Pirie", "link": "https://stackoverflow.com/users/5741549/jamie-pirie"}, "is_accepted": true, "score": 2, "last_activity_date": 1452031138, "creation_date": 1452031138, "answer_id": 34621981, "question_id": 34620321, "link": "https://stackoverflow.com/questions/34620321/ruby-map-function-for-pig-latin/34621981#34621981", "title": "Ruby map function for &quot;pig latin&quot;", "body": "<p>Agree with the other answers supplied, here's a slightly less verbose version of your code in case it helps you.</p>\n\n<pre><code>input = 'pig latin is awesome'\n\narr = input.split(' ').map do |wrd|\n    if %w(a e i o u).include? wrd[0]\n      wrd + 'ay'\n    elsif %w(a i o u).include? wrd[1]\n      wrd[1..-1] + wrd[0] + 'ay'\n    elsif %w(a i o u).include? wrd[2]\n      wrd[2..-1] + wrd[0] + wrd[1] + 'ay'\n    else\n      wrd[3..-1] + wrd[0] + wrd[1] + wrd[2] + 'ay'\n    end\nend.join(' ')\n\nputs arr\n</code></pre>\n"}], "owner": {"reputation": 760, "user_id": 5368448, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0a99517c180eaf6b58e59246fc27b3d?s=128&d=identicon&r=PG&f=1", "display_name": "Marc Fletcher", "link": "https://stackoverflow.com/users/5368448/marc-fletcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 34621981, "answer_count": 3, "score": 2, "last_activity_date": 1452031138, "creation_date": 1452024361, "last_edit_date": 1452028904, "question_id": 34620321, "link": "https://stackoverflow.com/questions/34620321/ruby-map-function-for-pig-latin", "title": "Ruby map function for &quot;pig latin&quot;", "body": "<p>I am attempting to write a ruby function that takes in a string of words and turns it into <strong><a href=\"https://en.wikipedia.org/wiki/Pig_Latin\" rel=\"nofollow\">Pig Latin</a></strong>. I am breaking the string into an array, and attempting to iterate over each element. When \"eat pie\" is put in, the result is \"eat ie\", but I am unsure why.</p>\n\n<pre><code>string = \"eat pie\"    \narray = string.split(\" \")\n\narray.map do |word| \n\n if word[0].chr == \"a\" || word[0].chr == \"e\" || word[0].chr == \"i\" || word[0].chr == \"o\" || word[0].chr == \"u\"\n\n   word = word + \"ay\"\n\n elsif word[1].chr == \"a\" || word[1].chr == \"i\" || word[1].chr == \"o\" || word[1].chr == \"u\"\n  temp = word[0]\n  word[0] = \"\"\n  word = word + temp\n  word = word + \"ay\"\n\nelsif word[2].chr == \"a\" || word[2].chr == \"i\" || word[2].chr == \"o\" || word[2].chr == \"u\"\n  temp = word[0] + word[1]\n  word[0] = \"\"\n  word[0] = \"\"\n  word = word + temp \n  word = word + \"ay\"\n\nelse ## three consonants\n  temp = word[0] + word[1] + word[2]\n  word[0] = \"\"\n  word[0] = \"\"\n  word[0] = \"\"\n  word = word + temp \n  word = word + \"ay\"\n\n end ## end of if statement\n\nend ## end of iteration \n\nputs array.join(\" \")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "resources", "nested", "destroy"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 4373100, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001975740210/picture?type=large", "display_name": "Pratyush", "link": "https://stackoverflow.com/users/4373100/pratyush"}, "edited": false, "score": 0, "creation_date": 1452152287, "post_id": 34620299, "comment_id": 57044613, "body": "That gave the same error : No route matches [DELETE] &quot;/forums/25/comment.16&quot;.     I used this as a temporary fix :     - del_path = &quot;/forums/&quot; + @forum.id.to_s + &quot;/comments/&quot; + c.id.to_s     = link_to &quot;&quot;, del_path, method: :delete, class: &quot;fa fa-scissors &quot;.    Any guess why forum_comment_path is giving me wrong address  &quot;/forums/25/comment.16&quot;"}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 1, "last_activity_date": 1452038112, "last_edit_date": 1452038112, "creation_date": 1452024271, "answer_id": 34620299, "question_id": 34620172, "link": "https://stackoverflow.com/questions/34620172/rails-link-to-giving-an-incorrect-path-to-delete-a-nested-resource/34620299#34620299", "title": "Rails &#39;link_to&#39; giving an incorrect path to delete a Nested Resource", "body": "<p>You need to use the <code>forum_comment_path</code> helper:</p>\n\n<pre><code>= link_to \"Delete\", forum_comment_path(@forum, c), method: :delete\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4373100, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001975740210/picture?type=large", "display_name": "Pratyush", "link": "https://stackoverflow.com/users/4373100/pratyush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452038112, "creation_date": 1452023750, "question_id": 34620172, "link": "https://stackoverflow.com/questions/34620172/rails-link-to-giving-an-incorrect-path-to-delete-a-nested-resource", "title": "Rails &#39;link_to&#39; giving an incorrect path to delete a Nested Resource", "body": "<p>I made a simple blog application in rails and when I tried giving a link to delete a Comment rails gave me incorrect link</p>\n\n<pre><code>&lt;a data-method=\"delete\" href=\"/forums/27/comment.7\" rel=\"nofollow\"&gt;Delete&lt;/a&gt;\n</code></pre>\n\n<p>This gave me an error </p>\n\n<pre><code>No route matches [DELETE] \"/forums/27/comment.7\"\n</code></pre>\n\n<p>but when I changed it to </p>\n\n<pre><code>&lt;a data-method=\"delete\" href=\"/forums/27/**comments/7**\" rel=\"nofollow\"&gt;Delete&lt;/a&gt;\n</code></pre>\n\n<p>by chrome's Inspect it deleted my comment. \nSo how to generate a correct Link ?</p>\n\n<p>Controller </p>\n\n<pre><code>def destroy\n  @comment.destroy\n  redirect_to :back\nend\n\nprivate\n\n  def find_forum \n    @forum = Forum.find(params[:forum_id])\n  end\n\n  def set_comment\n    @comment = Comment.find(params[:id])\n  end\n</code></pre>\n\n<p>show.html.haml</p>\n\n<pre><code>- @forum.comments.each do |c|\n  = c.user.firstname\n  = c.comment\n  - if user_signed_in?\n    - if c.user == current_user\n      = link_to \"Delete\", [@forum, c], method: :delete\n</code></pre>\n\n<p>Routes</p>\n\n<pre><code>                  Prefix Verb   URI Pattern                                   Controller#Action\n              forum_like PUT    /forums/:forum_id/like(.:format)              forums#like\n            forum_unlike PUT    /forums/:forum_id/unlike(.:format)            forums#unlike\n           forum_comment PUT    /forums/:forum_id/comment(.:format)           forums#comment\n          forum_comments GET    /forums/:forum_id/comments(.:format)          comments#index\n                         POST   /forums/:forum_id/comments(.:format)          comments#create\n       new_forum_comment GET    /forums/:forum_id/comments/new(.:format)      comments#new\n      edit_forum_comment GET    /forums/:forum_id/comments/:id/edit(.:format) comments#edit\n                         GET    /forums/:forum_id/comments/:id(.:format)      comments#show\n                         PATCH  /forums/:forum_id/comments/:id(.:format)      comments#update\n                         PUT    /forums/:forum_id/comments/:id(.:format)      comments#update\n                         DELETE /forums/:forum_id/comments/:id(.:format)      comments#destroy\n                  forums GET    /forums(.:format)                             forums#index\n                         POST   /forums(.:format)                             forums#create\n               new_forum GET    /forums/new(.:format)                         forums#new\n              edit_forum GET    /forums/:id/edit(.:format)                    forums#edit\n                   forum GET    /forums/:id(.:format)                         forums#show\n                         PATCH  /forums/:id(.:format)                         forums#update\n                         PUT    /forums/:id(.:format)                         forums#update\n                         DELETE /forums/:id(.:format)                         forums#destroy\n        new_user_session GET    /users/sign_in(.:format)                      devise/sessions#new\n            user_session POST   /users/sign_in(.:format)                      devise/sessions#create\n    destroy_user_session DELETE /users/sign_out(.:format)                     devise/sessions#destroy\n           user_password POST   /users/password(.:format)                     devise/passwords#create\n       new_user_password GET    /users/password/new(.:format)                 devise/passwords#new\n      edit_user_password GET    /users/password/edit(.:format)                devise/passwords#edit\n                         PATCH  /users/password(.:format)                     devise/passwords#update\n                         PUT    /users/password(.:format)                     devise/passwords#update\ncancel_user_registration GET    /users/cancel(.:format)                       registrations#cancel\n       user_registration POST   /users(.:format)                              registrations#create\n   new_user_registration GET    /users/sign_up(.:format)                      registrations#new\n  edit_user_registration GET    /users/edit(.:format)                         registrations#edit\n                         PATCH  /users(.:format)                              registrations#update\n                         PUT    /users(.:format)                              registrations#update\n                         DELETE /users(.:format)                              registrations#destroy\n                    root GET    /                                             forums#index\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1452027659, "post_id": 34620044, "comment_id": 56987879, "body": "When asking a question we expect to see an example of your effort, either by showing us where you&#39;ve looked and tried and why those didn&#39;t help, or the minimum example of what you&#39;ve written and an explanation of why it isn&#39;t working, along with the minimum necessary supporting input data and expected output. See &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. You&#39;re asking us to write a tutorial about how to do this, and we have no idea what you know or have tried, resulting in a poorly defined and broad question."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1452027925, "post_id": 34620044, "comment_id": 56988035, "body": "How are we supposed to determine whether to split 100 elements into four or three arrays?"}], "answers": [{"comments": [{"owner": {"reputation": 1293, "user_id": 737303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4fd5b7a456eb2b3096d6167f40e3278?s=128&d=identicon&r=PG", "display_name": "nitrogen", "link": "https://stackoverflow.com/users/737303/nitrogen"}, "edited": false, "score": 0, "creation_date": 1595441151, "post_id": 34620393, "comment_id": 111478731, "body": "This will get you N arrays, but it doesn&#39;t group contiguous values if that matters to you, e.g. if you wanted the first example to return <code>[[1,2,3,4,5], [6,7,8,9,10]]</code>."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 7, "last_activity_date": 1452024649, "creation_date": 1452024649, "answer_id": 34620393, "question_id": 34620044, "link": "https://stackoverflow.com/questions/34620044/how-to-split-an-array-into-n-equal-or-close-to-equal-arrays/34620393#34620393", "title": "How to split an array into n equal or close to equal arrays?", "body": "<pre><code>a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\na.group_by.with_index{|_, i| i % 2}.values\n# =&gt; [[1, 3, 5, 7, 9], [2, 4, 6, 8, 10]]\n\na.group_by.with_index{|_, i| i % 3}.values\n# =&gt; [[1, 4, 7, 10], [2, 5, 8], [3, 6, 9]]\n\na.group_by.with_index{|_, i| i % 4}.values\n# =&gt; [[1, 5, 9], [2, 6, 10], [3, 7], [4, 8]]\n\na.group_by.with_index{|_, i| i % 5}.values\n# =&gt; [[1, 6], [2, 7], [3, 8], [4, 9], [5, 10]]\n\na.group_by.with_index{|_, i| i % 6}.values\n# =&gt; [[1, 7], [2, 8], [3, 9], [4, 10], [5], [6]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 194, "user_id": 9225626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c51004185fdb639a683476958a07422?s=128&d=identicon&r=PG&f=1", "display_name": "kli", "link": "https://stackoverflow.com/users/9225626/kli"}, "is_accepted": false, "score": 0, "last_activity_date": 1579420410, "last_edit_date": 1579420410, "creation_date": 1579420065, "answer_id": 59808166, "question_id": 34620044, "link": "https://stackoverflow.com/questions/34620044/how-to-split-an-array-into-n-equal-or-close-to-equal-arrays/59808166#59808166", "title": "How to split an array into n equal or close to equal arrays?", "body": "<p>@sawa's answer does a great job.</p>\n\n<p>But I wrote my own function for the <strong>uniform</strong> distribution, which the <code>group_by</code> does not give.</p>\n\n<p>My simple function distributes the elements of an array <strong>evenly</strong>:</p>\n\n<pre><code>def split_array_to_parts(array, parts_number)\n  part_size = array.size * 1.0 / parts_number\n  partitioned_elements_count = 0\n\n  parts = []\n  parts_number.times do |index|\n    part_length = (part_size * (index+1)).round - partitioned_elements_count\n    parts &lt;&lt; array.slice(partitioned_elements_count, part_length)\n    partitioned_elements_count += part_length\n  end\n\n  parts\nend\n</code></pre>\n\n<p>Let's test them both:</p>\n\n<pre><code>begin\n  [11,15,17,21,23].each do |count|\n    array = Array.new(count, 0)\n    result_array_1 = array.group_by.with_index{|_, i| i % 10}.values\n    result_array_2 = split_array_to_parts(array, 10)\n    res.map { |inner_array|\n      print \"#{inner_array.count} \"\n    }\n    print \"\\n\"\n  end\nend\n</code></pre>\n\n<p>result_array_1 (<code>group_by.with_index</code>):</p>\n\n<pre><code>2 1 1 1 1 1 1 1 1 1 \n2 2 2 2 2 1 1 1 1 1 \n2 2 2 2 2 2 2 1 1 1 \n3 2 2 2 2 2 2 2 2 2 \n3 3 3 2 2 2 2 2 2 2\n</code></pre>\n\n<p>result_array_2 ( my function <code>split_array_to_parts</code>):</p>\n\n<pre><code>1 1 1 1 2 1 1 1 1 1 \n2 1 2 1 2 1 2 1 2 1 \n2 1 2 2 2 1 2 2 1 2 \n2 2 2 2 3 2 2 2 2 2 \n2 3 2 2 3 2 2 2 3 2\n</code></pre>\n\n<p>You are welcome to check and compare the similar solutions:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2699584/how-to-split-chunk-a-ruby-array-into-parts-of-x-elements\">How to split (chunk) a Ruby array into parts of X elements? - duplicate</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/12374645/splitting-an-array-into-equal-parts-in-ruby\">Splitting an array into equal parts in ruby - duplicate</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1230279/how-to-chunk-an-array-in-ruby\">How to chunk an array in Ruby</a></p>\n"}, {"tags": [], "owner": {"reputation": 1293, "user_id": 737303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4fd5b7a456eb2b3096d6167f40e3278?s=128&d=identicon&r=PG", "display_name": "nitrogen", "link": "https://stackoverflow.com/users/737303/nitrogen"}, "is_accepted": false, "score": 1, "last_activity_date": 1595442706, "last_edit_date": 1595442706, "creation_date": 1595442027, "answer_id": 63040779, "question_id": 34620044, "link": "https://stackoverflow.com/questions/34620044/how-to-split-an-array-into-n-equal-or-close-to-equal-arrays/63040779#63040779", "title": "How to split an array into n equal or close to equal arrays?", "body": "<p>The current top answer by @sawa is useful if you don't need to preserve contiguity of elements.  Here's a solution if contiguity matters.</p>\n<p>As it happens this problem is vaguely similar to line drawing algorithms and linear interpolation.  We basically want to scale original indices to a new range of indices.  In other words, <strong>we are drawing a line with slope <code>new_count / old_count</code></strong>, starting from the origin.</p>\n<p>If it doesn't matter where the larger groups lie in the sequence, and if you don't need empty groups at the end when there aren't enough items, then you can do something simple with Ruby's <a href=\"https://ruby-doc.org/core-2.7.1/Enumerable.html#method-i-chunk\" rel=\"nofollow noreferrer\"><code>Enumerable#chunk</code></a> method:</p>\n<pre class=\"lang-rb prettyprint-override\"><code># This can be copy/pasted into Pry (thus the `self.`)\ndef self.groups(enum, numgroups)\n  enum.chunk.with_index { |_, idx|\n    (idx * numgroups / enum.count)\n  }.map(&amp;:last)\nend\n</code></pre>\n<p>The <code>#chunk</code> method returns indices with the chunks, thus the <code>.map(&amp;:last)</code> gives us just our groups.  This is not the most efficient approach if speed matters, but it gets the job done.</p>\n<p>Some example runs:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>group2(1..13, 7)\n# =&gt; [[1, 2], [3, 4], [5, 6], [7, 8], [9, 10], [11, 12], [13]]\n\ngroup2(1..13, 3)\n# =&gt; [[1, 2, 3, 4, 5], [6, 7, 8, 9], [10, 11, 12, 13]]\n\ngroup2(1..100, 7).to_a\n# =&gt; [[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],\n [16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29],\n [30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43],\n [44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58],\n [59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72],\n [73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86],\n [87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]]\n</code></pre>\n<p>You might have noticed that the longer and shorter chunks are intermixed.  One could design a version that computes lengths first, sorts them, and then returns chunks of those sorted sizes.</p>\n"}], "owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 897, "favorite_count": 0, "accepted_answer_id": 34620393, "answer_count": 3, "score": 2, "last_activity_date": 1595442706, "creation_date": 1452023303, "last_edit_date": 1452027841, "question_id": 34620044, "link": "https://stackoverflow.com/questions/34620044/how-to-split-an-array-into-n-equal-or-close-to-equal-arrays", "title": "How to split an array into n equal or close to equal arrays?", "body": "<p>I have a large array that I would like to split evenly into <em>n</em> arrays.</p>\n\n<ul>\n<li>I have an array of 100 elements. I would like to split it evenly into 4 arrays. This would give me 4 arrays of 25 elements each.</li>\n<li>I have an array of 100 elements. I would like to split it evenly into 3 arrays. Since I cannot evenly split it into the sub-arrays, then I want something like 2 arrays of 33 elements and one array of 34 elements.</li>\n<li>I have an array of 2 elements. I would like to split it evenly into 4 arrays. Since I cannot split it evenly and some arrays will be empty, then I want something like 2 arrays of 1 element and 2 empty arrays.</li>\n</ul>\n\n<p>I tried using <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-each_slice\" rel=\"nofollow\"><code>each_slice</code></a>, but that only slices the array into small parts based on the number argument passed to it. </p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 0, "creation_date": 1452024470, "post_id": 34619952, "comment_id": 56986271, "body": "hmm... so it looks like that will return an array of  hashes rather than an array of tags"}, {"owner": {"reputation": 3832, "user_id": 136508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391f9b787cdc12aa2c179713f5103e3a?s=128&d=identicon&r=PG", "display_name": "ilan berci", "link": "https://stackoverflow.com/users/136508/ilan-berci"}, "reply_to_user": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 0, "creation_date": 1452024919, "post_id": 34619952, "comment_id": 56986517, "body": "It&#39;s going to return what you requested.. an array of hashes"}], "tags": [], "owner": {"reputation": 3832, "user_id": 136508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391f9b787cdc12aa2c179713f5103e3a?s=128&d=identicon&r=PG", "display_name": "ilan berci", "link": "https://stackoverflow.com/users/136508/ilan-berci"}, "is_accepted": false, "score": 2, "last_activity_date": 1452022944, "creation_date": 1452022944, "answer_id": 34619952, "question_id": 34619886, "link": "https://stackoverflow.com/questions/34619886/iterate-through-array-adjust-a-virtual-attribute-and-return-array-with-adjusted/34619952#34619952", "title": "iterate through array, adjust a virtual attribute and return array with adjusted value", "body": "<pre><code>t.map do |tmp|\n  tmp.attributes.merge(is_enabled_on_item: current_tag_ids.include?(tmp.tagid))\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 629, "user_id": 1795600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0F3Z1.png?s=128&g=1", "display_name": "stefkin", "link": "https://stackoverflow.com/users/1795600/stefkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1452032278, "creation_date": 1452032278, "answer_id": 34622217, "question_id": 34619886, "link": "https://stackoverflow.com/questions/34619886/iterate-through-array-adjust-a-virtual-attribute-and-return-array-with-adjusted/34622217#34622217", "title": "iterate through array, adjust a virtual attribute and return array with adjusted value", "body": "<p>Your take on collect is almost right, try this:</p>\n\n<pre><code>t.collect { |tmp| tmp.is_enabled_on_item=current_tag_ids.include?(tmp.tagid); tmp }\n</code></pre>\n\n<p>Note that assignment returns assigned value, while you have to return tags in block in order to collect tags.</p>\n\n<p>It would be nice to move one step forward and use more canonical method and argument names:</p>\n\n<pre><code>tags.map { |tag| tag.is_enabled_on_item=current_tag_ids.include?(tag.tagid); tag }\n</code></pre>\n"}], "owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1452032278, "creation_date": 1452022667, "last_edit_date": 1452025563, "question_id": 34619886, "link": "https://stackoverflow.com/questions/34619886/iterate-through-array-adjust-a-virtual-attribute-and-return-array-with-adjusted", "title": "iterate through array, adjust a virtual attribute and return array with adjusted value", "body": "<p>I have a rails class called a tag:</p>\n\n<pre><code>class Tag &lt; ActiveRecord::Base\n  attr_accessor :is_enabled_on_item # a virtual attribute for ouptutting json\n</code></pre>\n\n<p>and I want to adjust the is_enabled_on_item like the following:</p>\n\n<pre><code>t.each { |tmp| tmp.is_enabled_on_item=true if current_tag_ids.include?(tmp.tagid) }\n</code></pre>\n\n<p>to get like:</p>\n\n<pre><code>[\n   {\n      tagid:1,\n      phrase: \"blue\",\n      is_enabled_on_item: true \n   },\n   {\n      tagid:2,\n      phrase: \"yellow\",\n      is_enabled_on_item: false \n   }\n]\n</code></pre>\n\n<p>I tried collect </p>\n\n<pre><code>t.collect { |tmp| tmp.is_enabled_on_item=true if current_tag_ids.include?(tmp.tagid) }\n</code></pre>\n\n<p>but itreturns <code>[true, false]</code>. How would I achieve what I want? </p>\n\n<h3>edit #1</h3>\n\n<p>I'd want it to return an array of tags. </p>\n\n<p>Something like this would work but the intermediary <code>arr</code> seems unnecessary:</p>\n\n<pre><code>arr=[]\nt.each do |tmp| \n  tmp.is_enabled_on_item=current_tag_ids.include?(tmp.tagid)\n  arr &lt;&lt; tmp\nend  \narr\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "e-commerce", "spree"], "answers": [{"tags": [], "owner": {"reputation": 1242, "user_id": 3252252, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/4V81y.jpg?s=128&g=1", "display_name": "Jesuspc", "link": "https://stackoverflow.com/users/3252252/jesuspc"}, "is_accepted": false, "score": 0, "last_activity_date": 1452036199, "last_edit_date": 1452036199, "creation_date": 1452035870, "answer_id": 34623015, "question_id": 34618958, "link": "https://stackoverflow.com/questions/34618958/ecommerce-spree-print-count-of-products-with-completed-orders-on-index-page/34623015#34623015", "title": "Ecommerce (Spree) print count of products with completed orders on Index page. (postgres)", "body": "<p>That should give you a count of line items associated at the same time with a product with the given id and an order with 'complete' state.</p>\n\n<pre><code>LineItem.joins(:product, :order).where(orders: { state: 'complete' }).where(products: { id: your_product_id }).count\n</code></pre>\n\n<p>No need to iterate! Just a database query (using ActiveRecord), which also is extremely more efficient than iteration.</p>\n\n<p>I assumed your tables are called orders, products (used in the where clauses) and the associations on the LineItem ActiveRecord object are called order, product (used in the join). Otherwise simply replace those values with the appropriate ones.</p>\n"}], "owner": {"reputation": 61, "user_id": 3247042, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7ecad1739764e8847e5ae5cb2fdf5b85?s=128&d=identicon&r=PG&f=1", "display_name": "user3247042", "link": "https://stackoverflow.com/users/3247042/user3247042"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452036199, "creation_date": 1452019177, "question_id": 34618958, "link": "https://stackoverflow.com/questions/34618958/ecommerce-spree-print-count-of-products-with-completed-orders-on-index-page", "title": "Ecommerce (Spree) print count of products with completed orders on Index page. (postgres)", "body": "<p>On our product gallery page, I'd really like to query the database to find how many of each product has been purchased, and print that number on the page (for admin users only).  I feel like I have all the pieces, I just don't know how to put it together to work.  </p>\n\n<p>There is a Products table that is referenced to print out all the products. \nThere is an LineItems table (Spree::LineItems >> Spree::Orders) where the product can be called/identified by:</p>\n\n<pre><code>@line_items.each do |line_item|\n    line_item.product.id\nend\n</code></pre>\n\n<p>&amp; this is what defines an order as complete in relation to that line_item:</p>\n\n<pre><code>@line_item.order.state == \"complete\"\n</code></pre>\n\n<p>So...I'd like to see if @product.id and @line_item.product.id match (where the @line_item.order.state == \"complete\") and count how many.  </p>\n\n<p>Basically, we iterate each product on the gallery page, so I want to see for each <em>product</em> how many times it appears as a <em>line_item</em> in an <em>order</em> where the <em>order.state is complete</em></p>\n\n<p>I'm no engineer (as you can obviously tell), but I feel like I'm making this more complicated than it needs to be.  Help?</p>\n\n<p>We're using a Postgres database.  Thanks in advance!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "rvm", "ruby-2.3"], "comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1452019195, "post_id": 34618782, "comment_id": 56983294, "body": "Just a sanity check: did you <code>bundle</code> after upgrading Ruby?"}], "answers": [{"comments": [{"owner": {"reputation": 96, "user_id": 2238167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61788e0dcfdc5f2b4d0c578ed3d73c?s=128&d=identicon&r=PG", "display_name": "medright", "link": "https://stackoverflow.com/users/2238167/medright"}, "edited": false, "score": 0, "creation_date": 1452019942, "post_id": 34619025, "comment_id": 56983684, "body": "Thank you very much Simone! The last two commands fixed the issue.. as I had previously had 2.2 versions of ruby installed with rails 4.2.5 apps running rake with no problems did I miss something in the upgrade to 2.3? I&#39;m fairly new to programming and not really sure where I might have gone wrong here.."}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 96, "user_id": 2238167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61788e0dcfdc5f2b4d0c578ed3d73c?s=128&d=identicon&r=PG", "display_name": "medright", "link": "https://stackoverflow.com/users/2238167/medright"}, "edited": false, "score": 0, "creation_date": 1452020015, "post_id": 34619025, "comment_id": 56983729, "body": "By default, <code>rake</code> is not installed in the global gemset (as in general you don&#39;t install gems in the global gemset). You may had it in a previous setup for some reason, and you didn&#39;t notice it hence you assumed it was the default behavior."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 1, "last_activity_date": 1452019375, "creation_date": 1452019375, "answer_id": 34619025, "question_id": 34618782, "link": "https://stackoverflow.com/questions/34618782/migrating-database-fails-after-upgrading-to-ruby-2-3-0/34619025#34619025", "title": "Migrating database fails after upgrading to Ruby 2.3.0", "body": "<p>If you haven't done it yet, make sure you have all the dependencies installed.</p>\n\n<pre><code>$ bundle\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$ bundle install\n</code></pre>\n\n<p>It's likely you don't have <code>rake</code> installed in the global RVM gemset. In any case, given you are within a Rails project, you should use <code>bundler</code> to execute the command.</p>\n\n<pre><code>$ bundle exec rake db:migrate\n</code></pre>\n\n<p>Otherwise, make sure to install rake globally</p>\n\n<pre><code>$ rvm gemset use global\n$ gem install rake\n</code></pre>\n\n<p>However, the correct way is to execute the command via Bundler.</p>\n"}], "owner": {"reputation": 96, "user_id": 2238167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b61788e0dcfdc5f2b4d0c578ed3d73c?s=128&d=identicon&r=PG", "display_name": "medright", "link": "https://stackoverflow.com/users/2238167/medright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 34619025, "answer_count": 1, "score": 1, "last_activity_date": 1452020038, "creation_date": 1452018586, "last_edit_date": 1452020038, "question_id": 34618782, "link": "https://stackoverflow.com/questions/34618782/migrating-database-fails-after-upgrading-to-ruby-2-3-0", "title": "Migrating database fails after upgrading to Ruby 2.3.0", "body": "<p>I've updated to Ruby 2.3.0 and I'm having some issues when creating a new Rails app. After creating a simple new test app and scaffolding a resource, when trying to execute <code>rake db:migrate</code> I'm getting the following load error:</p>\n\n<pre><code>    MacBook-Pro:log medright1$ rake db:migrate\n/Users/medright1/.rvm/rubies/ruby-2.3.0/lib/ruby/gems/2.3.0/gems/rake-10.4.2/bin/rake:31:in `require': cannot load such file -- rake (LoadError)\n    from /Users/medright1/.rvm/rubies/ruby-2.3.0/lib/ruby/gems/2.3.0/gems/rake-10.4.2/bin/rake:31:in `&lt;top (required)&gt;'\n    from /Users/medright1/.rvm/gems/ruby-2.3.0/bin/rake:23:in `load'\n    from /Users/medright1/.rvm/gems/ruby-2.3.0/bin/rake:23:in `&lt;main&gt;'\n    from /Users/medright1/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\n    from /Users/medright1/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\nMacBook-Pro:log medright1$\n</code></pre>\n\n<p>Any help sorting this would be great!</p>\n"}, {"tags": ["ruby", "linux", "selenium", "debian", "chromium"], "comments": [{"owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 0, "creation_date": 1452081548, "post_id": 34618595, "comment_id": 57010137, "body": "There isn&#39;t a specific driver for Chromium on *nix systems. So you need to use :chrome as the driver, in place of :ChromeDriver. Try Selenium::WebDriver.for :chrome."}, {"owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "reply_to_user": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 0, "creation_date": 1452200143, "post_id": 34618595, "comment_id": 57075619, "body": "I got this error: <code>&#47;var&#47;lib&#47;gems&#47;2.1.0&#47;gems&#47;selenium-webdriver-2.48.1&#47;lib&#47;selen&zwnj;&#8203;ium&#47;webdriver&#47;chrome&zwnj;&#8203;&#47;service.rb:37:in executable_path&#39;: Unable to find the chromedriver executable. Please download the server from http:&#47;&#47;chromedriver.storage.googleapis.com&#47;index.html and place it somewhere on your PATH. More info at https:&#47;&#47;github.com&#47;SeleniumHQ&#47;selenium&#47;wiki&#47;ChromeDriver. (Selenium::WebDriver::Error::WebDriverError)</code>. I went to &#39;<a href=\"http://chromedriver.storage.googleapis.com/index.html\" rel=\"nofollow noreferrer\">chromedriver.storage.googleapis.com/index.html</a>&#39; and put <code>chromedriver</code> from v2.20 in <code>&#47;usr&#47;local&#47;bin</code>. Still got the same error."}, {"owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 1, "creation_date": 1452254525, "post_id": 34618595, "comment_id": 57098070, "body": "Ok, thats at least gives more details. Try using this gem to setup your chromedriver : <a href=\"https://github.com/flavorjones/chromedriver-helper\" rel=\"nofollow noreferrer\">github.com/flavorjones/chromedriver-helper</a>"}, {"owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "reply_to_user": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 0, "creation_date": 1452452048, "post_id": 34618595, "comment_id": 57165028, "body": "@Sam That worked! You can post your solution as an answer if you want me to mark it."}], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "is_accepted": true, "score": 2, "last_activity_date": 1524384845, "last_edit_date": 1524384845, "creation_date": 1452471779, "answer_id": 34712416, "question_id": 34618595, "link": "https://stackoverflow.com/questions/34618595/how-do-i-use-ruby-gem-selenium-webdriver-with-chromium/34712416#34712416", "title": "How do I use Ruby gem selenium-webdriver with Chromium?", "body": "<p>There isn't a specific driver for Chromium on *nix systems. So you need to use <code>:chrome</code> as the driver, in place of <code>:ChromeDriver</code>, e.g.,  <code>Selenium::WebDriver.for :chrome</code></p>\n\n<p>Also, use this gem for a hassel free setup of chromedriver on your execution system: <a href=\"https://github.com/flavorjones/chromedriver-helper\" rel=\"nofollow noreferrer\">https://github.com/flavorjones/chromedriver-helper</a></p>\n"}], "owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1378, "favorite_count": 0, "accepted_answer_id": 34712416, "answer_count": 1, "score": 1, "last_activity_date": 1524384845, "creation_date": 1452017930, "question_id": 34618595, "link": "https://stackoverflow.com/questions/34618595/how-do-i-use-ruby-gem-selenium-webdriver-with-chromium", "title": "How do I use Ruby gem selenium-webdriver with Chromium?", "body": "<p>I'm on Debian 8.2 \"Jessie\" with Ruby 2.1.5.</p>\n\n<p>In <code>test.rb</code>, I have <code>require selenium-webdriver</code>, but when I run <code>Selenium::WebDriver.for :ChromeDriver</code> I get this error:</p>\n\n<pre><code>/var/lib/gems/2.1.0/gems/selenium-webdriver-2.48.1/lib/selenium/webdriver/common/driver.rb:72:in `for': unknown driver: :ChromeDriver (ArgumentError)\n</code></pre>\n\n<p>I don't have Chrome, but do have Cromium. How do I get Selenium to cooperate?</p>\n"}, {"tags": ["ruby", "hash", "dig", "ruby-2.3"], "comments": [{"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1452017510, "post_id": 34618329, "comment_id": 56982391, "body": "Is there a way to calculate this number?"}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 2, "creation_date": 1452017772, "post_id": 34618329, "comment_id": 56982523, "body": "you pretty much have to know the keys beforehand when using <code>Hash#dig</code>."}], "answers": [{"comments": [{"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1452019340, "post_id": 34618859, "comment_id": 56983362, "body": "why not just <code>h[:users].values.first[:name]</code>"}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1452019518, "post_id": 34618859, "comment_id": 56983455, "body": "If <code>h[:users]</code> does not respond to <code>#values</code>, or <code>h[:users].values</code> does not respond to <code>#first</code>, or <code>h[:users].values.first</code> does not respond to <code>#[]</code>, your application blows up. You get the idea. :-) Both <code>#dig</code> and the safe navigation (lonely) operator were implemented in 2.3 to avoid this."}, {"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 2, "creation_date": 1452021088, "post_id": 34618859, "comment_id": 56984353, "body": "legit, but ugly af :)"}], "tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": true, "score": 2, "last_activity_date": 1452053889, "last_edit_date": 1452053889, "creation_date": 1452018806, "answer_id": 34618859, "question_id": 34618329, "link": "https://stackoverflow.com/questions/34618329/extract-hash-values-using-hashdig/34618859#34618859", "title": "Extract Hash values using Hash#dig", "body": "<p>You can, of course, pass an expression as an argument to <code>#dig</code>:</p>\n\n<pre><code>h.dig(:users, h.dig(:users)&amp;.keys&amp;.first, :name)\n#=&gt; John\n</code></pre>\n\n<p>Extract the key if you want more legibility, at the cost of lines of code:</p>\n\n<pre><code>first_user_id = h.dig(:users)&amp;.keys&amp;.first\nh.dig(:users, first_user_id, :name)\n#=&gt; John\n</code></pre>\n\n<p>Another option would be to chain your <code>#dig</code> method calls. This is shorter, but a bit less legible.</p>\n\n<pre><code>h.dig(:users)&amp;.values&amp;.dig(0, :name)\n#=&gt; John\n</code></pre>\n\n<p>I'm afraid there is no \"neater\" way of doing this while still having safe navigation.</p>\n"}], "owner": {"reputation": 3822, "user_id": 477068, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/8rhcs.jpg?s=128&g=1", "display_name": "sbs", "link": "https://stackoverflow.com/users/477068/sbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "accepted_answer_id": 34618859, "answer_count": 1, "score": 0, "last_activity_date": 1452053889, "creation_date": 1452017003, "last_edit_date": 1452023265, "question_id": 34618329, "link": "https://stackoverflow.com/questions/34618329/extract-hash-values-using-hashdig", "title": "Extract Hash values using Hash#dig", "body": "<pre><code>h = {\n  users: {\n    u_548912: {\n      name: \"John\",\n      age: 30\n    },\n    u_598715: {\n      name: \"Doe\",\n      age: 30\n    }\n  }\n}\n</code></pre>\n\n<p>Given a hash like above, say I want to get user <em>John</em>, I can do</p>\n\n<pre><code>h[:users].values.first[:name]    # =&gt; \"John\"\n</code></pre>\n\n<p>In Ruby 2.3 use <code>Hash#dig</code> can do the same thing:</p>\n\n<pre><code>h.dig(:users, :u_548912, :name)  # =&gt; \"John\"\n</code></pre>\n\n<p>But given that the <code>u_548912</code> is just a random number(no way to know it before hand), is there a way to get the information still using <code>Hash#dig</code>? </p>\n"}]