[{"tags": ["ruby", "loops"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1571871294, "post_id": 58531912, "comment_id": 103387602, "body": "Welcome to SO! Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;. We need to know what you tried. That way we can directly address any problems in your code. As written it looks like you haven&#39;t tried anything and want us to write it for you, which is not the way that Stack Overflow works."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1571873601, "creation_date": 1571873601, "answer_id": 58532227, "question_id": 58531912, "link": "https://stackoverflow.com/questions/58531912/adding-user-input-into-hash/58532227#58532227", "title": "adding user input into hash", "body": "<pre><code>n = 3 # number of persons\nquestions = [\"who?: \", \"what?: \", \"where?: \"]\n</code></pre>\n\n<p>If \"person 1\" answers \"1\", \"2\", \"3\" to \"who?: \", \"what?: \", \"where?: \", \"person2\" answers \"4\", \"5\", \"5\" to the same questions and \"person3\" answers \"2\", \"6\", \"9\",\nthen:</p>\n\n<pre><code>(1..n).each_with_object({}) do |person,h|\n  puts \"Person #{person}, please answer the following questions\"\n  h[\"person#{person}\"] = questions.map { |q| print q; gets.to_i }\nend\n  #=&gt; {\"person1\"=&gt;[1, 2, 3], \"person2\"=&gt;[4, 5, 5], \"person3\"=&gt;[2, 6, 9]}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11919877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8a23b540e00ccda6f53f7e941a357f?s=128&d=identicon&r=PG&f=1", "display_name": "M_com", "link": "https://stackoverflow.com/users/11919877/m-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1571873601, "creation_date": 1571871019, "question_id": 58531912, "link": "https://stackoverflow.com/questions/58531912/adding-user-input-into-hash", "title": "adding user input into hash", "body": "<p>I want to ask three different users, three questions. I want to add their responses to an array which will be the value pair of a hash. I'm looking for something like this.</p>\n\n<pre><code>myhash={ \"person1\"=&gt;[1, 2, 3], \"person2\"=&gt;[4, 5, 5], \"person3\"=&gt;[2, 6, \n9]}\n</code></pre>\n\n<p>ps. the numbers are inputs from the users. </p>\n\n<p>can someone help me, im new to this:/</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 3, "creation_date": 1571865399, "post_id": 58531019, "comment_id": 103385999, "body": "Can you post some valid ruby code? If you copy the code you posted, paste it in REPL for example, it won&#39;t run. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a> would be even better."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1571866193, "post_id": 58531019, "comment_id": 103386251, "body": "Welcome to SO! Please use the formatting tools to correctly format the code, variables in your question. Doing so helps us better understand what you&#39;re doing. &quot;<a href=\"https://stackoverflow.com/help/formatting\">How do I format my posts...</a>&quot; will help. Also please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 2837, "user_id": 6245337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VoQ5.jpg?s=128&g=1", "display_name": "Ana Mar&#237;a Mart&#237;nez G&#243;mez", "link": "https://stackoverflow.com/users/6245337/ana-mar%c3%ada-mart%c3%adnez-g%c3%b3mez"}, "is_accepted": false, "score": 2, "last_activity_date": 1571870783, "last_edit_date": 1571870783, "creation_date": 1571869760, "answer_id": 58531757, "question_id": 58531019, "link": "https://stackoverflow.com/questions/58531019/pulling-out-values-from-element-of-array/58531757#58531757", "title": "Pulling out values from element of array", "body": "<p>What you posted is the string representation of a Hash.</p>\n\n<p>This Hash has a key <code>:close_price</code>, whose value you can access in this way:</p>\n\n<pre><code>your_hash[:close_price] #=&gt; 0.23996e3\n</code></pre>\n\n<p>The hash also has a key <code>:contract</code> whose value is an instance of the class <code>IB::Stock</code>. To access this object:</p>\n\n<pre><code>ib_stock_instance = your_hash[:contract]\nib_stock_instance.class #=&gt; IB::Stock\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2665710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba2b86ed59fac997a2939ef64e862f40?s=128&d=identicon&r=PG", "display_name": "user2665710", "link": "https://stackoverflow.com/users/2665710/user2665710"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1571870783, "creation_date": 1571864951, "last_edit_date": 1571866856, "question_id": 58531019, "link": "https://stackoverflow.com/questions/58531019/pulling-out-values-from-element-of-array", "title": "Pulling out values from element of array", "body": "<p>I have a hash that is generated by IB-ruby and looks like this:</p>\n\n<pre><code>{:contract=&gt;#&lt;IB::Stock:0x0000560721a1aee0 @attributes={:symbol=&gt;\"AAPL\", :currency=&gt;\"USD\", :sec_type=&gt;\"STK\", :created_at=&gt;2019-10-23 23:03:35 +0200, :con_id=&gt;0, :right=&gt;\"\", :include_expired=&gt;false, :exchange=&gt;\"SMART\"}&gt;, :last_price=&gt;0.24308e3, :high=&gt;0.24324e3, :low=&gt;0.24122e3, :close_price=&gt;0.23996e3, :open_tick=&gt;0.2421e3, :bid_price=&gt;0.2431e3, :ask_price=&gt;0.24319e3}\n</code></pre>\n\n<p>How do I pull out the symbol <code>(\"AAPL\")</code> and the closing_price <code>(0.23996e3)</code> for further processing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 725, "user_id": 9774506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Falko", "link": "https://stackoverflow.com/users/9774506/falko"}, "edited": false, "score": 0, "creation_date": 1571867756, "post_id": 58531303, "comment_id": 103386730, "body": "Hey, I can see what you&#39;re doing and it makes sense. Just to clarify, each change request can have either a &#39;ten minute reminder&#39; and or a &#39;one hour reminder&#39;"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 725, "user_id": 9774506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Falko", "link": "https://stackoverflow.com/users/9774506/falko"}, "edited": false, "score": 1, "creation_date": 1571868169, "post_id": 58531303, "comment_id": 103386857, "body": "Are you saying that <code>ten_minute_reminder</code> and <code>one_hour_reminder</code> are somehow derived from the <code>@price_change</code>? If so, how does a <code>priceChangeRequest</code> &quot;have&quot; these reminders? BTW, <code>priceChangeRequest</code> is a unconventional class name. As is <code>priceReminderWorker</code>. The conventional forms would be <code>PriceChangeRequest</code> and <code>PriceReminderWorker</code>."}, {"owner": {"reputation": 725, "user_id": 9774506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Falko", "link": "https://stackoverflow.com/users/9774506/falko"}, "edited": false, "score": 0, "creation_date": 1571868357, "post_id": 58531303, "comment_id": 103386898, "body": "Yes exactly, so this is what a price change looks like:  <code>#&lt;PriceChangeRequest id: 45, user_id: 456, *********, ten_minutes_before_reminder: true, one_hour_after_reminder: false&gt;,</code>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 725, "user_id": 9774506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Falko", "link": "https://stackoverflow.com/users/9774506/falko"}, "edited": false, "score": 1, "creation_date": 1571868420, "post_id": 58531303, "comment_id": 103386918, "body": "Also, is the <code>user</code> that you&#39;re passing in associated with the <code>PriceChangeRequest</code>? If so, how? And what about <code>data</code>? Where does that come from?"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1571870226, "last_edit_date": 1571870226, "creation_date": 1571866603, "answer_id": 58531303, "question_id": 58530919, "link": "https://stackoverflow.com/questions/58530919/best-way-to-process-data-in-a-rails-service/58531303#58531303", "title": "Best way to process data in a Rails service", "body": "<p>If you <strong>really</strong> want to stick with your current <code>PriceChangeRequest</code> structure, then I think I would do: </p>\n\n<pre><code>class PriceReminderWorker\n  include Sidekiq::Worker\n  sidekiq_options queue: 'price_reminders', retry: true\n\n  attr_accessor *%w( price_change_id user data ).freeze\n\n  def perform(price_change_id, reminder, user, data)\n    @price_change_id  = price_change_id\n    @user             = user\n    @data             = data \n\n    %i(\n      ten_minutes_before\n      one_hour_after\n    ).each do |time_sym|\n      send(\"send_#{time_sym}_reminder\") if price_change_request.send(\"#{time_sym}_reminder\")\n    end if price_change_request\n\n  end\n\nprivate \n\n  def user_hash\n    {\n      to:               Phonelib.parse(user.mobile_number).full_e164,\n      company_id:       user&amp;.company&amp;.id,\n      user_name:        user.first_name,\n      admin_user_name:  data[:from_admin_user],\n      body:             Sms::Message::priceChangeMessage.new(data).build\n    }\n  end\n\n  def send_ten_minutes_before_reminder\n    reminderMailer.notify(user, data).deliver_later unless price_change.cancelled_at\n  end\n\n  def send_one_hour_after_reminder\n    Sms::priceChangeSms.new(user_hash).submit unless price_change.cancelled_at\n  end\n\n  def price_change_request\n    @price_change_request ||= PriceChangeRequest.find(price_change_id)\n  end\n\nend\n</code></pre>\n\n<p>But, I think it's not a great idea to have a bunch of <code>booleans</code> like <code>ten_minutes_before_reminder</code> and <code>one_hour_after_reminder</code> on your <code>PriceChangeRequest</code> class. Especially if you start to have many reminder types. You'll likely end up with sparsely populated boolean fields which isn't that great. And, you'll have to run new migrations every time you want to add a new reminder type. Blah, blah, blah.</p>\n\n<p>If I were you, I think I would be tempted to have a <code>ReminderTime</code> class something like: </p>\n\n<pre><code># == Schema Information\n#\n# Table name: reminder_times\n#\n#  id           :bigint           not null, primary key\n#  system_name  :string           not null\n#  created_at   :datetime         not null\n#  updated_at   :datetime         not null\n#\nclass ReminderTime &lt; ApplicationRecord\n  validates :system_name, presence: true\n  has_many :price_change_request_reminder_times\n  has_many :price_change_requests, through: :price_change_request_reminder_times\nend\n</code></pre>\n\n<p>And a <code>PriceChangeRequestReminderTime</code> something like: </p>\n\n<pre><code># == Schema Information\n#\n# Table name: price_change_request_reminder_times\n#\n#  id                       :bigint           not null, primary key\n#  reminder_time_id         :integer          not null\n#  price_change_request_id  :integer          not null\n#  created_at               :datetime         not null\n#  updated_at               :datetime         not null\n#\nclass PriceChangeRequestReminderTime &lt; ApplicationRecord\n  belongs_to :reminder_time\n  belongs_to :price_change_request\nend\n</code></pre>\n\n<p>Then, in your <code>PriceChangeRequest</code>, do something like: </p>\n\n<pre><code>class PriceChangeRequest &lt; ApplicationRecord\n  has_many :price_change_request_reminder_times\n  has_many :reminder_times, through: :price_change_request_reminder_times\n\n  def set_reminder_times(*time_syms)\n    time_syms.each do |time_sym|\n      reminder_times &lt;&lt; ReminderTime.find_or_create_by!(system_name: time_sym)\n    end\n  end\n\n  def remove_reminder_times(*type_syms)\n    price_change_request_reminder_times.\n      where(reminder_time: ReminderTime.find_by(system_name: type_syms)).\n      destroy_all\n  end\n\n  def reminder_time_names\n    reminder_times.pluck(:system_name)\n  end\n\nend\n</code></pre>\n\n<p>To set reminder times, you would do something like: </p>\n\n<pre><code>@price_change_request.set_reminder_times :ten_minutes_before \n</code></pre>\n\n<p>Or </p>\n\n<pre><code>@price_change_request.set_reminder_times :ten_minutes_before, :one_hour_after\n</code></pre>\n\n<p>To remove reminder times, you would do something like: </p>\n\n<pre><code>@price_change_request.remove_reminder_times :ten_minutes_before\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>@price_change_request.remove_reminder_times :one_hour_after, :ten_minutes_before\n</code></pre>\n\n<p>...so that you could do something like: </p>\n\n<pre><code>class PriceReminderWorker\n  include Sidekiq::Worker\n  sidekiq_options queue: 'price_reminders', retry: true\n\n  attr_accessor *%w( \n    price_change_id \n    user \n    data \n  ).freeze\n\n  delegate *%w(\n    reminder_time_names\n  ), to: :price_change_request\n\n  def perform(price_change_id, reminder, user, data)\n    @price_change_id  = price_change_id\n    @user             = user\n    @data             = data \n    reminder_time_names.each do |reminder_time_name|\n      send(\"send_#{reminder_time_name}_reminder\")\n    end if price_change_request\n  end\n\nprivate \n\n  def user_hash\n    {\n      to:               Phonelib.parse(user.mobile_number).full_e164,\n      company_id:       user&amp;.company&amp;.id,\n      user_name:        user.first_name,\n      admin_user_name:  data[:from_admin_user],\n      body:             Sms::Message::priceChangeMessage.new(data).build\n    }\n  end\n\n  def send_ten_minutes_before_reminder\n    reminderMailer.notify(user, data).deliver_later unless price_change.cancelled_at\n  end\n\n  def send_one_hour_after_reminder\n    Sms::priceChangeSms.new(user_hash).submit unless price_change.cancelled_at\n  end\n\n  def price_change_request\n    @price_change_request ||= PriceChangeRequest.find(price_change_id)\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 725, "user_id": 9774506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Falko", "link": "https://stackoverflow.com/users/9774506/falko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 58531303, "answer_count": 1, "score": 0, "last_activity_date": 1571870226, "creation_date": 1571864433, "last_edit_date": 1571868440, "question_id": 58530919, "link": "https://stackoverflow.com/questions/58530919/best-way-to-process-data-in-a-rails-service", "title": "Best way to process data in a Rails service", "body": "<p>I have a reminder service which takes some 'changes requests' and then sends them to a worker queue to perform at a later date.\nEach 'change request' can either have a 'ten minute before' reminder and or a 'one hour after reminder'. It will also have different types of reminders in the future.</p>\n\n<p>I'm looking for the most polished ruby kind way of processing and sending each of the reminders to the worker lots of if statements doesn't feel right but I may be wrong!</p>\n\n<pre><code>class ReminderService\n\n  # @data\n  # ten_minute_before: data[:ten_minutes_before_reminder] bool,\n  # one_hour_after: data[:one_hour_after_reminder] bool,\n  # user: user,\n  # price_change_ids: data[:change_requests],\n  # user_hash: user_hash(user)\n\n  attr_accessor :data, :user\n\n  def initialize(user, data)\n    {data[:price_change_ids]}\n    @user = user\n    @data = data\n  end\n\n  def run\n    change_requests\n  end\n\n  def send\n    reminderWorker.perform_at(action_reminder_at, price_change_id, reminder_type, user, user_hash)\n  end\n\n  def change_requests\n    data[:price_change_ids]\n  end\n\n  def user_hash\n    data[:user_hash]\n  end\n\n  def action_reminder_at\n    DateTime.parse(price_change_at) - 11.minutes\n  end\n\n  def price_change_id\n    data[:price_change_ids].first.id\n  end\n\n  def price_change_at\n    data[:user_hash][:price_change_at_time]\n  end\nend\n</code></pre>\n\n<p>Worker service:</p>\n\n<pre><code>class PriceReminderWorker\n  include Sidekiq::Worker\n\n  sidekiq_options queue: 'price_reminders', retry: true\n\n  def perform(price_change_id, reminder, user, data)\n    id = price_change_id\n    price_change = priceChangeRequest.find(id)\n\n    if reminder[:ten_minutes_before]\n      reminderMailer.notify(user, data).deliver_later unless price_change.cancelled_at\n    end\n\n    if reminder[:one_hour_after]\n      Sms::priceChangeSms.new(build_hash(user)).submit unless price_change.cancelled_at\n    end\n  end\n\n  def build_hash(user)\n    {\n        to: Phonelib.parse(user.mobile_number).full_e164,\n        company_id: user&amp;.company&amp;.id,\n        user_name: user.first_name,\n        admin_user_name: data[:from_admin_user],\n        body: Sms::Message::priceChangeMessage.new(data).build\n    }\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1571860320, "post_id": 58529599, "comment_id": 103384014, "body": "It&#39;s worth noting that slapping <code>gsub</code> on a URL is probably wildly misguided. In this example if <code>123</code> coincidentally appeared somewhere else, anywhere else, in the URL then this would mangle that value as well. It&#39;s probably better to use the <a href=\"https://ruby-doc.org/stdlib-2.6.4/libdoc/uri/rdoc/URI.html\" rel=\"nofollow noreferrer\">URI module</a> to manipulate parameters directly and do any re-writing in a more precise way."}], "tags": [], "owner": {"reputation": 3259, "user_id": 2424975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/jDtKZ.jpg?s=128&g=1", "display_name": "Cereal", "link": "https://stackoverflow.com/users/2424975/cereal"}, "is_accepted": true, "score": 4, "last_activity_date": 1571861738, "last_edit_date": 1571861738, "creation_date": 1571858013, "answer_id": 58529599, "question_id": 58529512, "link": "https://stackoverflow.com/questions/58529512/what-is-ruby-doing-with-gsub-here/58529599#58529599", "title": "What is Ruby doing with gsub here?", "body": "<p><code>gsub</code> does a global substitute on a string. If I had to guess, the URL might be in the form of </p>\n\n<p><code>http://somewebsite.com?member_id=123</code></p>\n\n<p>If so, the code has the following effect:</p>\n\n<pre><code>url.gsub \"member_id\", \"member_id__hashed\"\n#\u00a0=&gt; \"http://somewebsite.com?member_id__hashed=123\"\n</code></pre>\n\n<p>Assuming <code>member_id = \"123\"</code>, and <code>member_id_hashed</code> is some hashed version of the id, then the second line would replace \"123\" with the hashed version.</p>\n\n<pre><code>url.gsub member_id, member_id_hashed\n#\u00a0=&gt; \"http://somewebsite.com?member_id__hashed=abc\"\n</code></pre>\n\n<p>So you're going from <code>http://somewebsite.com?member_id=123</code> to <code>http://somewebsite.com?member_id__hashed=abc</code></p>\n\n<p>Documentation: <a href=\"https://ruby-doc.org/core-2.6/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.6/String.html#method-i-gsub</a></p>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 1, "last_activity_date": 1571858755, "last_edit_date": 1571858755, "creation_date": 1571858446, "answer_id": 58529697, "question_id": 58529512, "link": "https://stackoverflow.com/questions/58529512/what-is-ruby-doing-with-gsub-here/58529697#58529697", "title": "What is Ruby doing with gsub here?", "body": "<blockquote>\n  <p>I'm assuming that the url at the end is Ruby's equivalent to <code>return url;</code></p>\n</blockquote>\n\n<p>If that code is part of a method or block, indeed, the line <code>url</code> is the value returned by the method. This is because by default a <a href=\"https://ruby-doc.org/core-2.6.1/doc/syntax/methods_rdoc.html\" rel=\"nofollow noreferrer\">method</a> in Ruby <a href=\"https://ruby-doc.org/core-2.6.1/doc/syntax/methods_rdoc.html#label-Return+Values\" rel=\"nofollow noreferrer\">returns the value of the last expression that was evaluated</a> in the method. The keyword <code>return</code> can be used (as in many other languages) to produce an early return of a method, with or without a return value.</p>\n\n<hr>\n\n<blockquote>\n  <p>that's the wrong syntax, right? shouldn't it be</p>\n  \n  <p><code>url = url.gsub(var1, var2)</code>?</p>\n</blockquote>\n\n<p>The arguments used to invoke a method in Ruby may stay in parentheses but they may, as well, be listed after the method name, without parentheses.</p>\n\n<p>Both:</p>\n\n<pre><code>url = url.gsub var1, var2\n</code></pre>\n\n<p>and</p>\n\n<pre><code>url = url.gsub(var1, var2)\n</code></pre>\n\n<p>are correct and they produce the same result.</p>\n\n<p>The convention in Ruby is to not put parentheses around method arguments but this is not always possible. One such case is when one of the arguments is a call of another method with arguments.<br>\nThe parentheses are then used to make everything clear both for the interpreter and the readers of the code.</p>\n\n<hr>\n\n<blockquote>\n  <p>If it is correct, why are they calling it twice, once with quotes and once without?</p>\n</blockquote>\n\n<p>There are two calls of the same method, with different arguments:</p>\n\n<pre><code>url = url.gsub \"member_id\", \"member_id__hashed\"\n</code></pre>\n\n<p>The arguments of <code>url.gsub</code> are the literal strings <code>\"member_id\"</code> and <code>\"member_id__hashed\"</code>.</p>\n\n<pre><code>url = url.gsub member_id, member_id_hashed\n</code></pre>\n\n<p>This time the arguments are the variables <code>member_id</code> and <code>member_id_hashed</code>.</p>\n\n<p>This works the same in JavaScript and many other languages that use double quotes to enclose the string literals.</p>\n\n<hr>\n\n<p><a href=\"https://ruby-doc.org/core-2.6.1/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><code>String#gsub</code></a> is a method of class <a href=\"https://ruby-doc.org/core-2.6.1/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a> that does <em>search &amp; replace</em> in a string and returns a new string. It's name is short of \"global substitute\" (it replaces all occurrences). To replace only the first occurrence use <a href=\"https://ruby-doc.org/core-2.6.1/String.html#method-i-sub\" rel=\"nofollow noreferrer\"><code>String#sub</code></a>.</p>\n"}], "owner": {"reputation": 103, "user_id": 10213048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kIGhQ.png?s=128&g=1", "display_name": "ChrisP", "link": "https://stackoverflow.com/users/10213048/chrisp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 58529599, "answer_count": 2, "score": 2, "last_activity_date": 1571866479, "creation_date": 1571857530, "last_edit_date": 1571866479, "question_id": 58529512, "link": "https://stackoverflow.com/questions/58529512/what-is-ruby-doing-with-gsub-here", "title": "What is Ruby doing with gsub here?", "body": "<p>I'm working on converting code from Ruby to Node.js. I came across these lines at the end of a function and I'm curious what the original developers were trying to accomplish:</p>\n\n<pre><code>  url = url.gsub \"member_id\", \"member_id__hashed\"\n  url = url.gsub member_id, member_id_hashed\n\n  url\n</code></pre>\n\n<p>I'm assuming that <code>url</code> at the end is Ruby's equivalent to <code>return url;</code>\nas for the lines with <code>gsub</code>, from what I've found online that's the wrong syntax, right? Shouldn't it be:</p>\n\n<p><code>url = url.gsub(var1, var2)</code>?</p>\n\n<p>If it is correct, why are they calling it twice, once with quotes and once without?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest", "fixtures"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5848410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1263733e32f04be85bcce32a4e79af94?s=128&d=identicon&r=PG", "display_name": "CaptainAwesomeDi", "link": "https://stackoverflow.com/users/5848410/captainawesomedi"}, "is_accepted": true, "score": 1, "last_activity_date": 1571864858, "creation_date": 1571864858, "answer_id": 58530999, "question_id": 58528761, "link": "https://stackoverflow.com/questions/58528761/rails-minitest-has-many-and-belongs-to-model-test-activerecordunknownprimaryke/58530999#58530999", "title": "Rails Minitest Has Many And Belongs To Model Test ActiveRecord::UnknownPrimaryKey Error", "body": "<p>I just realized how bad this is.</p>\n\n<p>I could just not use the fixture to fix the problem.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require \"test_helper\"\nUserMessageTest &lt; AcitveSupport::TestCase\n  def setup\n   @user_message = UserMessage.new(user_id: User.first.id,\n                                   message_id: Message.first.id)\n\n  end\n\n  test \"could save successfully\" do\n   assert @user_message.save\n  end\nend\n</code></pre>\n\n<p>And the test passes!</p>\n"}], "owner": {"reputation": 11, "user_id": 5848410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1263733e32f04be85bcce32a4e79af94?s=128&d=identicon&r=PG", "display_name": "CaptainAwesomeDi", "link": "https://stackoverflow.com/users/5848410/captainawesomedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 58530999, "answer_count": 1, "score": 0, "last_activity_date": 1571867056, "creation_date": 1571854301, "last_edit_date": 1571867056, "question_id": 58528761, "link": "https://stackoverflow.com/questions/58528761/rails-minitest-has-many-and-belongs-to-model-test-activerecordunknownprimaryke", "title": "Rails Minitest Has Many And Belongs To Model Test ActiveRecord::UnknownPrimaryKey Error", "body": "<p>When I try to run minitest with simpleCov, I want the join table model <code>UserMessages</code> to be covered.</p>\n\n<p>I have setup fixture, to run test and keep getting an <code>ActiveRecord::UnknownPrimaryKey</code> error. This is expected since I don't have a primary key on the UserMessage table.</p>\n\n<p>Is there a way to bypass this error and also have coverage on the UserMessage model?</p>\n\n<p>MODELS:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class User &lt; ApplicationRecord\n  has_and_belongs_to_many :messages, join_table \"users_messages\"\nend\n\nclass Message &lt; ApplicaitonRecord\n  has_and_belongs_to_many :users, join_table: \"users_messages\"\nend\n\nclass UserMessage &lt;ApplicationRecord\n  self.table_name = \"users_messsages\"\n  belongs_to :user\n  belongs_to :messages\nend\n</code></pre>\n\n<p>FIXTURES:</p>\n\n<p>User:</p>\n\n<pre><code>default:\n  name: test\n</code></pre>\n\n<p>Message:</p>\n\n<pre><code>default:\n  message: hello world!\n  users:\n   - default\n</code></pre>\n\n<p>UserMessage:</p>\n\n<pre><code>default:\n  user: default\n  message: default\n</code></pre>\n\n<p>TEST:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require \"test_helpers\"\nclass UserMessageTest &lt; ActiveSupport::TestCase\n def setup\n  @user_message = user_message(:default) # The error happens here: ActiveRecord::UnknownPrimaryKey:\\ \n                                         # Unknown primary key for table users_messages in model \\      \n                                         # UserMessage\n end\n\n test \"is valid\" do\n  assert @user_message.valid?, \"Should be valid\"\n end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "require"], "answers": [{"comments": [{"owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "edited": false, "score": 0, "creation_date": 1585701204, "post_id": 60958241, "comment_id": 107853590, "body": "Your answer indeed clarifies some issues, but not all (or most) of them. See my updated question (after hr). And yes, receiver is what becomes <code>self</code> when you call a method."}], "tags": [], "owner": {"reputation": 51, "user_id": 6008847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZoGNJqPwbuw/AAAAAAAAAAI/AAAAAAAADOg/WJq3L4YYxho/photo.jpg?sz=128", "display_name": "Gimmy", "link": "https://stackoverflow.com/users/6008847/gimmy"}, "is_accepted": false, "score": 1, "last_activity_date": 1585685120, "last_edit_date": 1585685120, "creation_date": 1585682341, "answer_id": 60958241, "question_id": 58528539, "link": "https://stackoverflow.com/questions/58528539/whats-the-difference-between-kernel-require-and-kernel-gem-original-require/60958241#60958241", "title": "What&#39;s the difference between Kernel.require and Kernel.gem_original_require?", "body": "<p>I think you'll find part of the answer here: <a href=\"https://stackoverflow.com/a/57236134/6008847\">https://stackoverflow.com/a/57236134/6008847</a></p>\n\n<p>Rubygems code replaces the included version of <code>require</code>. </p>\n\n<p>When you call <code>Kernel.require</code> you get the original require method.</p>\n\n<p>When you cal <code>require</code> you get the method from Rubygems (the receiver will be the context from where you call <code>require</code>).</p>\n\n<p><code>gem_original_require</code> is an alias for the original <code>require</code> method: <a href=\"https://github.com/ruby/ruby/blob/v2_6_3/lib/rubygems/core_ext/kernel_require.rb#L16\" rel=\"nofollow noreferrer\">https://github.com/ruby/ruby/blob/v2_6_3/lib/rubygems/core_ext/kernel_require.rb#L16</a></p>\n"}], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1585701125, "creation_date": 1571853399, "last_edit_date": 1585701125, "question_id": 58528539, "link": "https://stackoverflow.com/questions/58528539/whats-the-difference-between-kernel-require-and-kernel-gem-original-require", "title": "What&#39;s the difference between Kernel.require and Kernel.gem_original_require?", "body": "<p>Consider the following script:</p>\n\n<pre><code>module Kernel\n  unless defined?(gem_original_require_2)\n    alias gem_original_require_2 require\n    private :gem_original_require_2\n  end\n\n  def require(path)\n      return gem_original_require_2(path)\n  end\nend\n\np method(:require)                  # #&lt;Method: main.require&gt;\np method(:require).owner            # Kernel\np method(:require).receiver         # main\np method(:require).source_location  # [\"1.rb\", 7]\n\nputs '-' * 10\np Kernel.method(:require)                  # #&lt;Method: Kernel.require&gt;\np Kernel.method(:require).owner            # #&lt;Class:Kernel&gt;\np Kernel.method(:require).receiver         # Kernel\np Kernel.method(:require).source_location  # nil\n\nputs '-' * 10\np Kernel.method(:gem_original_require)                  # #&lt;Method: Kernel.gem_original_require(require)&gt;\np Kernel.method(:gem_original_require).owner            # Kernel\np Kernel.method(:gem_original_require).receiver         # Kernel\np Kernel.method(:gem_original_require).source_location  # nil\n\nputs '-' * 10\np Kernel.method(:gem_original_require_2)                  # #&lt;Method: Kernel.gem_original_require_2(require)&gt;\np Kernel.method(:gem_original_require_2).owner            # Kernel\np Kernel.method(:gem_original_require_2).receiver         # Kernel\np Kernel.method(:gem_original_require_2).source_location  # [\"/home/yuri/.rubies/ruby-2.6.3/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb\", 34]\n</code></pre>\n\n<p>I've got a lot of questions about the output. Why is <code>Kernel</code> sometimes a class, sometimes a module? Why do they have different receivers? Does <code>receiver</code> become <code>self</code> when method gets called?</p>\n\n<p>But more importantly, are <code>Kernel.require</code> and <code>Kernel.gem_original_require</code> the same method? Is there another place where <code>Kernel.require</code> <a href=\"https://github.com/rubygems/rubygems/blob/v3.0.6/lib/rubygems/core_ext/kernel_require.rb#L34\" rel=\"nofollow noreferrer\">gets overridden</a>? If you can answer the rest of the questions, that would be awesome.</p>\n\n<hr>\n\n<p>Let me put it another way. Let's try to reproduce this issue with run-of-the-mill classes and methods. As stated in the <a href=\"https://stackoverflow.com/a/57236134/52499\">other question</a> defining a method on <code>Kernel</code> creates 2 methods (instance and singleton). So:</p>\n\n<pre><code>class MyKernel\n  # original require\n  def require; puts 'require'; end\n  def self.require; puts 'require'; end\n\n  # copy original require\n  alias gem_original_require require\n  class &lt;&lt; self\n    alias gem_original_require require\n  end\nend\n\nmain = MyKernel.new\n</code></pre>\n\n<p><code>Kernel</code> is in fact a module, but supposedly that doesn't matter here.</p>\n\n<pre><code>p MyKernel.method(:require)\n  == MyKernel.method(:gem_original_require)\n  # true\n\np main.method(:require)\n  == main.method(:gem_original_require)\n  # true\n\np main.method(:require)\n  == MyKernel.method(:require)\n  # false\n</code></pre>\n\n<p>So, supposedly to compare methods you've got to access them both either via a class, or via an instance. Let's override <code>require</code>:</p>\n\n<pre><code>class MyKernel\n  # override one of the original require's\n  def require; puts 'require'; end\nend\n</code></pre>\n\n<p>Now we've got 3 <code>require</code>s:</p>\n\n<pre><code>main.require (original)\nMyKernel.require\nmain.require\n</code></pre>\n\n<p>and 2 <code>gem_original_require</code>s:</p>\n\n<pre><code>main.gem_original_require\nMyKernel.gem_original_require\n</code></pre>\n\n<p>We can compare like with like (instance methods with instance methods, singleton with singleton). But we no longer have access to the original <code>main.require</code>, so that leaves only singleton methods. And the following still holds:</p>\n\n<pre><code>p MyKernel.method(:require)\n  == MyKernel.method(:gem_original_require)\n  # true\n</code></pre>\n\n<p>But not in case of the real <code>require</code>:</p>\n\n<pre><code>p Kernel.method(:require)\n  == Kernel.method(:gem_original_require)\n  # false\n</code></pre>\n"}, {"tags": ["ruby", "timezone"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 2, "creation_date": 1571858914, "post_id": 58528499, "comment_id": 103383460, "body": "Just ignore the accepted answer in the linked question but use the highest-voted answer instead. tl;dr: set the <code>TZ</code> environment variable to override the system-provided timezone for the current process."}], "answers": [{"comments": [{"owner": {"reputation": 23653, "user_id": 507721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/44a20d8ea4197f1fc5022894c053f174?s=128&d=identicon&r=PG", "display_name": "JellicleCat", "link": "https://stackoverflow.com/users/507721/jelliclecat"}, "edited": false, "score": 0, "creation_date": 1571854974, "post_id": 58528829, "comment_id": 103381877, "body": "Thanks. I have read the README, but I don&#39;t see a way to specify a system timezone. The only approach I see is to edit each of my specs to explicitly convert times from one  zone to another. Am I missing something?"}], "tags": [], "owner": {"reputation": 21, "user_id": 12264762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea08b466a2b0b55921f38373912ea3c?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Weed", "link": "https://stackoverflow.com/users/12264762/zachary-weed"}, "is_accepted": false, "score": 1, "last_activity_date": 1571854588, "creation_date": 1571854588, "answer_id": 58528829, "question_id": 58528499, "link": "https://stackoverflow.com/questions/58528499/ruby-set-time-zone-without-rails/58528829#58528829", "title": "Ruby set time zone *without Rails*", "body": "<p>Not in STDLIB but you could use the <code>TZInfo</code> gem to accomplish this. They have a well written README. </p>\n"}], "owner": {"reputation": 23653, "user_id": 507721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/44a20d8ea4197f1fc5022894c053f174?s=128&d=identicon&r=PG", "display_name": "JellicleCat", "link": "https://stackoverflow.com/users/507721/jelliclecat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1571858852, "answer_count": 1, "score": 0, "last_activity_date": 1571854588, "creation_date": 1571853230, "question_id": 58528499, "link": "https://stackoverflow.com/questions/58528499/ruby-set-time-zone-without-rails", "closed_reason": "Duplicate", "title": "Ruby set time zone *without Rails*", "body": "<p>Is there any way for me to tell Ruby to use a certain time zone as if it were the local time zone?</p>\n\n<p>TMI:</p>\n\n<p>I realize that in Rails there is a lot of support for time zones, but I've just been put on a project which uses Ruby without Rails, and I need to fix a time zone in order to support some existing Rspec tests.</p>\n\n<p>Among these tests are some calls to an FTP servIs there er with <code>Net::FTP</code>. The returned mtime is getting cast into my development machine's local time, breaking a number of existing specs.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1571852917, "post_id": 58528289, "comment_id": 103380987, "body": "<code>String#to_i</code> returns 0 if the string does not start with a digit."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6636659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08844a92885136e85a3b44a8c2d0aae?s=128&d=identicon&r=PG&f=1", "display_name": "stephan", "link": "https://stackoverflow.com/users/6636659/stephan"}, "edited": false, "score": 0, "creation_date": 1571950185, "post_id": 58528441, "comment_id": 103418839, "body": "Ruby amateur here. I tend to consider regexp a tool of last resort because (in sql at least) it is more expensive than other matching options. Unfortunately I&#39;m too new to ruby - not sure if that was supposed to be a full example, or... but if I replace my first if with that, I get a &quot;warning: regular expression has &#39;]&#39; without escape: /.*dbhome.*\\z])"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 45, "user_id": 6636659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08844a92885136e85a3b44a8c2d0aae?s=128&d=identicon&r=PG&f=1", "display_name": "stephan", "link": "https://stackoverflow.com/users/6636659/stephan"}, "edited": false, "score": 0, "creation_date": 1571954621, "post_id": 58528441, "comment_id": 103420255, "body": "@stephan, that&#39;s the proper way to think of regular expressions. See <a href=\"https://stackoverflow.com/a/4687005/128421\">stackoverflow.com/a/4687005/128421</a> for some experiments I did with different versions of Ruby and variations on how to search text. Regex are extremely powerful and when used carefully can reduce the code written greatly. Used improperly they can introduce bugs that can reduce a program to a crawl or break it, both in ways that are extremely hard to debug. Most people look at them like some magical panacea or a hammer to hit everything with when learning. They&#39;re just another tool in the toolbox to be used surgically."}], "tags": [], "owner": {"reputation": 21, "user_id": 12264762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea08b466a2b0b55921f38373912ea3c?s=128&d=identicon&r=PG&f=1", "display_name": "Zachary Weed", "link": "https://stackoverflow.com/users/12264762/zachary-weed"}, "is_accepted": false, "score": 1, "last_activity_date": 1571854488, "last_edit_date": 1571854488, "creation_date": 1571853012, "answer_id": 58528441, "question_id": 58528289, "link": "https://stackoverflow.com/questions/58528289/how-to-verify-that-the-last-character-in-a-string-is-a-number/58528441#58528441", "title": "How to verify that the last character in a string is a number", "body": "<p>You could use a regular expression to make matching a tad bit easier</p>\n\n<p><code>if !!(db_home[/.*dbhome.*\\z]) ..</code></p>\n"}, {"tags": [], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "is_accepted": false, "score": 0, "last_activity_date": 1571853647, "creation_date": 1571853647, "answer_id": 58528599, "question_id": 58528289, "link": "https://stackoverflow.com/questions/58528289/how-to-verify-that-the-last-character-in-a-string-is-a-number/58528599#58528599", "title": "How to verify that the last character in a string is a number", "body": "<p>You could use regex's</p>\n\n<pre><code>/[0-9]$/.match(\"How3\").nil?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1571856886, "creation_date": 1571856886, "answer_id": 58529378, "question_id": 58528289, "link": "https://stackoverflow.com/questions/58528289/how-to-verify-that-the-last-character-in-a-string-is-a-number/58529378#58529378", "title": "How to verify that the last character in a string is a number", "body": "<blockquote>\n  <p>I need to check if the last character in a string is a digit, and if\n  so, increment it.</p>\n</blockquote>\n\n<p>This is one option:</p>\n\n<pre><code>s = 'string9'\n\ns[-1].then { |last| last.to_i.to_s == last ? [s[0..-2], last.to_i+1].join : s }\n\n#=&gt; \"string10\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1571869606, "post_id": 58530997, "comment_id": 103387224, "body": "&quot;/u01/app/11.2.0/dbhome9&quot;.succ #=&gt; &quot;/u01/app/11.2.0/dbhomf0&quot; , but &quot;/u01/app/11.2.0/dbhome_9&quot;.succ #=&gt; &quot;/u01/app/11.2.0/dbhome_10&quot; . Rather surprised myself."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1571869848, "post_id": 58530997, "comment_id": 103387282, "body": "@steenslag, the doc <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-succ\" rel=\"nofollow noreferrer\">String#succ</a> confirms the first&#39;s behavior, but not the second&#39;s. I&#39;m always hesitant to suggest that some behaviour is a Ruby bug, but I can&#39;t explain it. This is unrelated to my answer. Right?"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1571870005, "post_id": 58530997, "comment_id": 103387312, "body": "I think it is just Ruby trying to be nice. And I discovered it while trying to improve on your answer; it is not meant as criticism."}, {"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 0, "creation_date": 1571901983, "post_id": 58530997, "comment_id": 103395070, "body": "Very interesting. Perhaps there&#39;s a clue here in the doc: &quot;Incrementing nonalphanumerics uses the underlying character set&#39;s collating sequence.  If the increment generates a \u201ccarry,&#39;&#39; the character to the left of it is incremented. This process repeats until there is no carry, adding an additional character if necessary.&quot;? If there is &quot;no carry&quot; in a nonalphanumeric character set&#39;s collating sequence, then perhaps alphanumeric characters to the right of it are incremented as necessary. I find that <code>&#39;*z9&#39;.succ</code> returns <code>&#39;*aa0&#39;</code>, for example, while <code>&#39;*&#39;.succ</code> returns <code>&#39;+&#39;</code>. (cont)"}, {"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 0, "creation_date": 1571902498, "post_id": 58530997, "comment_id": 103395295, "body": "I also find that <code>&#39;*z9*</code>.succ` returns <code>&#39;*aa0*</code>, among other tests. So, it looks like if there is a combination of nonalphanumeric and alphanumeric characters, <code>succ</code> will increment the rightmost sequence of alphanumeric characters not interrupted by any nonalphanumeric characters, while if there are no alphanumeric characters, <code>succ</code> will increment the <code>ord</code> value of the rightmost nonalphanumeric character and return the resulting character."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 0, "creation_date": 1572070384, "post_id": 58530997, "comment_id": 103454644, "body": "@BobRodes, I&#39;m too sleepy to get my head around that right now, but will have another look at it tomorrow (Saturday)."}, {"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 0, "creation_date": 1572243381, "post_id": 58530997, "comment_id": 103486448, "body": "@CarySwoveland Just a hypothesis as to why it seems more like a feature than a bug to me. But I&#39;d say that the important thing is testing how <code>succ</code> works if you need to use it! :) I never tried doing all that stuff with it before."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 0, "creation_date": 1572245167, "post_id": 58530997, "comment_id": 103486846, "body": "@BobRodes, yes, that seems to be the case. <code>s = &#39;a8&#39;</code> seems to be treated as <code>ss = &#39;ay&#39;: s = s.succ #=&gt; &quot;a9&quot;; s.succ #&quot;b0&quot;</code>, whereas <code>ss  = ss.succ #=&gt; &quot;az&quot; ; ss.succ #=&gt; &quot;ba&quot;</code>. That is, the <code>&#39;8&#39;</code> is treated just as a letter. By contrast, if the trailing digits are preceded by certain other characters (e.g., and underscore or space), <code>succ</code> causes the digits to increase by one even if it means adding another digit (e.g., <code>s = &quot;a_9&quot;; s.succ #=&gt; &quot;a_10&quot;</code>). Let&#39;s try another <code>s = &#39;@9&#39;; s.succ #=&gt; &quot;@10&quot;</code>. Note <code>255.chr.succ.ord  #=&gt; 1</code>."}, {"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 0, "creation_date": 1572396462, "post_id": 58530997, "comment_id": 103543948, "body": "That last note is interesting, and something not to do."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1571864854, "creation_date": 1571864854, "answer_id": 58530997, "question_id": 58528289, "link": "https://stackoverflow.com/questions/58528289/how-to-verify-that-the-last-character-in-a-string-is-a-number/58530997#58530997", "title": "How to verify that the last character in a string is a number", "body": "<pre><code>'/u01/app/11.2.0/dbhome'.sub(/\\d\\z/) { |s| s.succ }\n  #=&gt; \"/u01/app/11.2.0/dbhome\"\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>'/u01/app/11.2.0/dbhome9'.sub(/\\d\\z/) { |s| s.succ }\n  #=&gt; \"/u01/app/11.2.0/dbhome10\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 6636659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08844a92885136e85a3b44a8c2d0aae?s=128&d=identicon&r=PG&f=1", "display_name": "stephan", "link": "https://stackoverflow.com/users/6636659/stephan"}, "edited": false, "score": 0, "creation_date": 1571951652, "post_id": 58531669, "comment_id": 103419404, "body": "I didn&#39;t get the first option to work - it complained that &quot;then&quot; was an undefined method for string. But the &quot;more traditional&quot; option seems to be working perfectly. Obviously I&#39;ve got lots to learn still. Thanks!"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 45, "user_id": 6636659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08844a92885136e85a3b44a8c2d0aae?s=128&d=identicon&r=PG&f=1", "display_name": "stephan", "link": "https://stackoverflow.com/users/6636659/stephan"}, "edited": false, "score": 0, "creation_date": 1571952730, "post_id": 58531669, "comment_id": 103419724, "body": "Your Ruby is &lt; v2.6 as that&#39;s when that functionality was introduced."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1571952811, "last_edit_date": 1571952811, "creation_date": 1571869194, "answer_id": 58531669, "question_id": 58528289, "link": "https://stackoverflow.com/questions/58528289/how-to-verify-that-the-last-character-in-a-string-is-a-number/58531669#58531669", "title": "How to verify that the last character in a string is a number", "body": "<p>This is a starting point if you're running Ruby v2.6+:</p>\n\n<pre><code>fname = 'filename1'\n\nfname[/\\d+$/].then { |digits|\n  fname[/\\d+$/] = digits.to_i.next.to_s if digits\n}\n\nfname # =&gt; \"filename2\"\n</code></pre>\n\n<p>And it's safe if the filename doesn't end with a digit:</p>\n\n<pre><code>fname = 'filename'\n\nfname[/\\d+$/].then { |digits|\n  fname[/\\d+$/] = digits.to_i.next.to_s if digits\n}\n\nfname # =&gt; \"filename\"\n</code></pre>\n\n<p>I'm not sure if I like doing it that way better than the more traditional way which works with much older Rubies:</p>\n\n<pre><code>digits = fname[/\\d+$/]\nfname[/\\d+$/] = digits.to_i.next.to_s if digits\n</code></pre>\n\n<p>except for the fact that <code>digits</code> gets stuck into the variable space after only being used once. There's probably worse things that happen in my code though.</p>\n\n<p>This is taking advantage of String's <a href=\"https://ruby-doc.org/core-2.6/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>[]</code></a> and <a href=\"https://ruby-doc.org/core-2.6/String.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\"><code>[]=</code></a> methods.</p>\n"}], "owner": {"reputation": 45, "user_id": 6636659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08844a92885136e85a3b44a8c2d0aae?s=128&d=identicon&r=PG&f=1", "display_name": "stephan", "link": "https://stackoverflow.com/users/6636659/stephan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1571952811, "creation_date": 1571852380, "last_edit_date": 1571868260, "question_id": 58528289, "link": "https://stackoverflow.com/questions/58528289/how-to-verify-that-the-last-character-in-a-string-is-a-number", "title": "How to verify that the last character in a string is a number", "body": "<p>I need to check if the last character in a string is a digit, and if so, increment it.</p>\n\n<p>I have a directory structure of <code>/u01/app/oracle/...</code> and that's where it goes off the rails. Sometimes it ends with the version number, sometimes it ends with <code>dbhome_1</code> (or <code>2</code>, or <code>3</code>), and sometimes, I have to assume, it will take some other form. If it ends with <code>dbhome_X</code>, I need to parse that and bump that final digit, if it is a digit.</p>\n\n<p>I use <code>split</code> to split the directory structure on '/', and use <code>include?</code> to check if the final element is something like \"dbhome\". As long as my directory structure ends with <code>dbhome_X</code> it seems to work. As I was testing, though, I tried a path that ended with <code>dbhome</code>, and found that my check for the last character being a digit didn't work.</p>\n\n<pre><code>db_home = '/u01/app/oracle/product/11.2.0/dbhome'\n\nif db_home.split('/')[-1].include?('dbhome')\n  homedir=db_home.split('/')[-1]\n  if homedir[-1].to_i.is_a? Numeric\n    homedir=homedir[0...-1]+(homedir[-1].to_i+1).to_s\n    new_path=\"/\"+db_home.split('/')[1...-1].join(\"/\")+\"/\"+homedir.to_s\n  end\nelse\n  new_path=db_home+\"/dbhome_1\"\nend\n\nputs new_path\n</code></pre>\n\n<p>I did not expect the output to be <code>/u01/app/oracle/11.2.0/product/dbhom1</code> - it seems to have fallen into the <code>if</code> block that added <code>1</code> to the final character.</p>\n\n<p>If I set the initial path to <code>/u01/app/.../dbhome_1</code>, I get the expected <code>/u01/app/.../dbhome_2</code> as the output.</p>\n"}, {"tags": ["ruby", "bundler", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571851245, "post_id": 58528007, "comment_id": 103380297, "body": "Please read: <b>&quot;Either installing with <code>--full-index</code> or running <code>bundle update rubocop</code> should fix the problem.&quot;</b> \ud83d\udc40"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571851323, "post_id": 58528007, "comment_id": 103380339, "body": "--full-index  does not fix it, trying bundle update rubocop now but bundle update always causes me headaches"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571851418, "post_id": 58528007, "comment_id": 103380379, "body": "It&#39;s usually fine, but if you get into a jam, give us the specifics and be sure to tell us what you&#39;ve tried and what happened. Did <code>--full-index</code> have any effect at all?"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1571852719, "post_id": 58528007, "comment_id": 103380896, "body": "I&#39;m not alone in the fact that full-index doesn&#39;t help at all, see <a href=\"https://makandracards.com/makandra/51932-bundler-error-downloading-gem-revealed-dependencies-not-in-the-api\" rel=\"nofollow noreferrer\">makandracards.com/makandra/&hellip;</a>"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571852781, "post_id": 58528007, "comment_id": 103380928, "body": "full transcript: <a href=\"https://travis-ci.org/oystersauce8/create-rails-app/builds/601931882?utm_medium=notification&amp;utm_source=email\" rel=\"nofollow noreferrer\">travis-ci.org/oystersauce8/create-rails-app/builds/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571852901, "post_id": 58528007, "comment_id": 103380978, "body": "One thing to try is to delete <code>Gemfile.lock</code> and do a <code>bundle install</code> to regenerate it. Bundler may be stuck in an inconsistent state."}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571854239, "post_id": 58528007, "comment_id": 103381535, "body": "now its saying Either installing with <code>--full-index</code> or running <code>bundle update capybara</code> should"}, {"owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571854756, "post_id": 58528007, "comment_id": 103381786, "body": "The --deployment flag requires a Gemfile.lock. Please make sure you have checked your Gemfile.lock into version control before deploying."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1571857189, "post_id": 58528007, "comment_id": 103382806, "body": "What I mean is on your dev machine remove the <code>.lock</code> file, <code>bundle install</code>, and if that install is happy, then put that back in your repo and push it to your CI platform."}], "answers": [{"tags": [], "owner": {"reputation": 659, "user_id": 2695716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/51Wgc.jpg?s=128&g=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/2695716/dennis"}, "is_accepted": false, "score": 1, "last_activity_date": 1571861736, "creation_date": 1571861736, "answer_id": 58530391, "question_id": 58528007, "link": "https://stackoverflow.com/questions/58528007/how-fix-error-rubocop-revealed-dependencies-not-in-the-api/58530391#58530391", "title": "how fix error? &#39; ....rubocop- ... revealed dependencies not in the API ...&quot;", "body": "<p>First off, try to remove your Gemfile.lock and run <code>bundle</code> again. If that doesn't work, <code>bundle update &lt;gem name&gt;</code> might fix the problem. As a last resort, open the Gemfile.lock and add the dependencies manually. Manually look for failing gem and add its dependencies underneath.</p>\n"}, {"tags": [], "owner": {"reputation": 194, "user_id": 9225626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c51004185fdb639a683476958a07422?s=128&d=identicon&r=PG&f=1", "display_name": "kli", "link": "https://stackoverflow.com/users/9225626/kli"}, "is_accepted": false, "score": 0, "last_activity_date": 1595252588, "creation_date": 1595252588, "answer_id": 62996727, "question_id": 58528007, "link": "https://stackoverflow.com/questions/58528007/how-fix-error-rubocop-revealed-dependencies-not-in-the-api/62996727#62996727", "title": "how fix error? &#39; ....rubocop- ... revealed dependencies not in the API ...&quot;", "body": "<p>Upon @Dennis answer I found the best explanation <a href=\"https://makandracards.com/makandra/51932-bundler-error-downloading-gem-revealed-dependencies-not-in-the-api\" rel=\"nofollow noreferrer\">here</a> by @Dominik Sch\u00f6ler.\nSee it below:</p>\n<p>The error message looks like this:</p>\n<pre><code>Downloading example-gem-1.2.3 revealed dependencies not in the API or the lockfile (other-gem (&lt; 3)).\nEither installing with `--full-index` or running `bundle update example-gem` should fix the problem.\n</code></pre>\n<p>However, <code>bundle install --full-index</code> did not any better for me, and <code>bundle update</code> is not always a viable solution.</p>\n<p>Easiest solution:\nIn <code>Gemfile.lock</code> add the dependencies manually by looking for example-gem and adding its dependencies underneath. You may even copy them from the error message.</p>\n<p>...</p>\n<pre><code>GEM\n  specs:\n    ...\n    example-gem (1.2.3)\n      other-gem (&lt; 3)\n    ...\n\nDEPENDENCIES\n</code></pre>\n<p>Now <code>bundle install</code> should succeed. If it doesn't, you have probably screwed its syntax. Check your <code>Gemfile.lock</code> again.</p>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1266, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1595252588, "creation_date": 1571851192, "question_id": 58528007, "link": "https://stackoverflow.com/questions/58528007/how-fix-error-rubocop-revealed-dependencies-not-in-the-api", "title": "how fix error? &#39; ....rubocop- ... revealed dependencies not in the API ...&quot;", "body": "<p>how do I fix this error?</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>+bundle install --jobs 3 --full-index --retry 3 --deployment\nWarning: the running version of Bundler (1.17.2) is older than the version that created the lockfile (1.17.3). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\nFetching source index from https://rubygems.org/\nFetching https://github.com/QueueClassic/queue_classic.git\nFetching https://github.com/matthewd/websocket-client-simple.git\nFetching rake 13.0.0\nInstalling rake 13.0.0\nFetching concurrent-ruby 1.1.5\nFetching minitest 5.12.2\nInstalling minitest 5.12.2\nInstalling concurrent-ruby 1.1.5\nFetching thread_safe 0.3.6\nInstalling thread_safe 0.3.6\nFetching zeitwerk 2.2.0\nFetching builder 3.2.3\nInstalling zeitwerk 2.2.0\nInstalling builder 3.2.3\nFetching erubi 1.9.0\nFetching mini_portile2 2.4.0\nInstalling erubi 1.9.0\nFetching crass 1.0.4\nInstalling mini_portile2 2.4.0\nFetching rack 2.0.7\nInstalling crass 1.0.4\nFetching nio4r 2.5.2\nInstalling rack 2.0.7\nInstalling nio4r 2.5.2 with native extensions\nFetching websocket-extensions 0.1.4\nInstalling websocket-extensions 0.1.4\nFetching mimemagic 0.3.3\nInstalling mimemagic 0.3.3\nFetching mini_mime 1.0.2\nInstalling mini_mime 1.0.2\nFetching public_suffix 4.0.1\nInstalling public_suffix 4.0.1\nFetching amq-protocol 2.3.0\nInstalling amq-protocol 2.3.0\nFetching ansi 1.5.0\nInstalling ansi 1.5.0\nFetching ast 2.4.0\nInstalling ast 2.4.0\nFetching aws-eventstream 1.0.3\nInstalling aws-eventstream 1.0.3\nFetching aws-partitions 1.221.0\nInstalling aws-partitions 1.221.0\nFetching jmespath 1.4.0\nInstalling jmespath 1.4.0\nFetching multipart-post 2.1.1\nInstalling multipart-post 2.1.1\nFetching beaneater 1.0.0\nInstalling beaneater 1.0.0\nFetching dante 0.2.0\nInstalling dante 0.2.0\nFetching bcrypt 3.1.13\nInstalling bcrypt 3.1.13 with native extensions\nFetching benchmark-ips 2.7.2\nInstalling benchmark-ips 2.7.2\nFetching blade-qunit_adapter 2.0.1\nInstalling blade-qunit_adapter 2.0.1\nFetching coffee-script-source 1.12.2\nInstalling coffee-script-source 1.12.2\nFetching execjs 2.7.0\nInstalling execjs 2.7.0\nFetching curses 1.0.2\nInstalling curses 1.0.2 with native extensions\nFetching eventmachine 1.2.7\nInstalling eventmachine 1.2.7 with native extensions\nFetching cookiejar 0.3.3\nInstalling cookiejar 0.3.3\nFetching http_parser.rb 0.6.0\nInstalling http_parser.rb 0.6.0 with native extensions\nFetching multi_json 1.13.1\nInstalling multi_json 1.13.1\nFetching daemons 1.3.1\nInstalling daemons 1.3.1\nFetching thor 0.20.3\nInstalling thor 0.20.3\nFetching useragent 0.16.10\nInstalling useragent 0.16.10\nFetching childprocess 3.0.0\nInstalling childprocess 3.0.0\nFetching rubyzip 2.0.0\nInstalling rubyzip 2.0.0\nFetching msgpack 1.3.1\nInstalling msgpack 1.3.1 with native extensions\nUsing bundler 1.17.2\nFetching byebug 11.0.1\nInstalling byebug 11.0.1 with native extensions\nFetching regexp_parser 1.3.0\nInstalling regexp_parser 1.3.0\nFetching connection_pool 2.2.2\nInstalling connection_pool 2.2.2\nFetching safe_yaml 1.0.5\nInstalling safe_yaml 1.0.5\nFetching dalli 2.7.10\nInstalling dalli 2.7.10\nFetching declarative 0.0.10\nInstalling declarative 0.0.10\nFetching declarative-option 0.1.0\nInstalling declarative-option 0.1.0\nFetching digest-crc 0.4.1\nInstalling digest-crc 0.4.1\nFetching event_emitter 0.2.6\nInstalling event_emitter 0.2.6\nFetching ffi 1.11.1\nInstalling ffi 1.11.1 with native extensions\nFetching raabro 1.1.6\nInstalling raabro 1.1.6\nFetching jwt 2.2.1\nInstalling jwt 2.2.1\nFetching memoist 0.16.0\nInstalling memoist 0.16.0\nFetching os 1.0.1\nInstalling os 1.0.1\nFetching httpclient 2.8.3\nInstalling httpclient 2.8.3\nFetching uber 0.1.0\nInstalling uber 0.1.0\nFetching retriable 3.1.2\nInstalling retriable 3.1.2\nFetching hashdiff 1.0.0\nInstalling hashdiff 1.0.0\nFetching hiredis 0.6.3\nInstalling hiredis 0.6.3 with native extensions\nFetching mini_magick 4.9.5\nInstalling mini_magick 4.9.5\nFetching jaro_winkler 1.5.3\nInstalling jaro_winkler 1.5.3 with native extensions\nFetching json 2.2.0\nInstalling json 2.2.0 with native extensions\nFetching mustache 1.1.0\nInstalling mustache 1.1.0\nFetching libxml-ruby 3.1.0\nInstalling libxml-ruby 3.1.0 with native extensions\nFetching rb-fsevent 0.10.3\nInstalling rb-fsevent 0.10.3\nFetching ruby_dep 1.5.0\nInstalling ruby_dep 1.5.0\nFetching method_source 0.9.2\nInstalling method_source 0.9.2\nFetching path_expander 1.1.0\nInstalling path_expander 1.1.0\nFetching ruby-progressbar 1.10.1\nInstalling ruby-progressbar 1.10.1\nFetching mono_logger 1.1.0\nInstalling mono_logger 1.1.0\nFetching mustermann 1.0.3\nInstalling mustermann 1.0.3\nFetching mysql2 0.5.2\nInstalling mysql2 0.5.2 with native extensions\nFetching parallel 1.18.0\nInstalling parallel 1.18.0\nFetching pg 1.1.4\nUsing psych 3.1.0\nFetching que 0.14.3\nInstalling pg 1.1.4 with native extensions\nInstalling que 0.14.3\nFetching racc 1.4.15\nInstalling racc 1.4.15 with native extensions\nFetching rainbow 3.0.0\nInstalling rainbow 3.0.0\nFetching rdoc 6.2.0\nInstalling rdoc 6.2.0\nFetching redcarpet 3.2.3\nInstalling redcarpet 3.2.3 with native extensions\nFetching redis 4.1.3\nInstalling redis 4.1.3\nFetching tilt 2.0.10\nInstalling tilt 2.0.10\nFetching unicode-display_width 1.5.0\nInstalling unicode-display_width 1.5.0\nFetching sequel 5.25.0\nInstalling sequel 5.25.0\nFetching sigdump 0.2.4\nInstalling sigdump 0.2.4\nFetching sprockets-export 1.0.0\nInstalling sprockets-export 1.0.0\nFetching sqlite3 1.4.1\nInstalling sqlite3 1.4.1 with native extensions\nFetching stackprof 0.2.13\nInstalling stackprof 0.2.13 with native extensions\nFetching turbolinks-source 5.2.0\nInstalling turbolinks-source 5.2.0\nFetching websocket 1.2.8\nInstalling websocket 1.2.8\nFetching minitest-server 1.0.5\nInstalling minitest-server 1.0.5\nFetching minitest-retry 0.1.9\nInstalling minitest-retry 0.1.9\nFetching i18n 1.6.0\nInstalling i18n 1.6.0\nFetching sucker_punch 2.1.2\nInstalling sucker_punch 2.1.2\nFetching tzinfo 1.2.5\nInstalling tzinfo 1.2.5\nFetching nokogiri 1.10.4\nInstalling nokogiri 1.10.4 with native extensions\nFetching rack-test 1.1.0\nInstalling rack-test 1.1.0\nFetching sprockets 4.0.0\nInstalling sprockets 4.0.0\nFetching rack-cache 1.9.0\nInstalling rack-cache 1.9.0\nFetching rack-protection 2.0.7\nInstalling rack-protection 2.0.7\nFetching rack-proxy 0.6.5\nInstalling rack-proxy 0.6.5\nFetching vegas 0.1.11\nInstalling vegas 0.1.11\nFetching websocket-driver 0.7.1\nInstalling websocket-driver 0.7.1 with native extensions\nFetching marcel 0.3.3\nInstalling marcel 0.3.3\nFetching mail 2.7.1\nInstalling mail 2.7.1\nFetching addressable 2.7.0\nFetching bunny 2.14.3\nInstalling addressable 2.7.0\nFetching parser 2.6.5.0\nInstalling bunny 2.14.3\nInstalling parser 2.6.5.0\nFetching aws-sigv4 1.1.0\nInstalling aws-sigv4 1.1.0\nFetching faraday 0.17.0\nFetching backburner 1.5.0\nInstalling faraday 0.17.0\nFetching puma 4.2.1\nInstalling backburner 1.5.0\nFetching coffee-script 2.4.1\nInstalling puma 4.2.1 with native extensions\nInstalling coffee-script 2.4.1\nFetching uglifier 4.2.0\nInstalling uglifier 4.2.0\nFetching selenium-webdriver 3.142.6\nInstalling selenium-webdriver 3.142.6\nFetching em-socksify 0.3.2\nInstalling em-socksify 0.3.2\nFetching thin 1.7.2\nInstalling thin 1.7.2 with native extensions\nFetching bootsnap 1.4.5\nInstalling bootsnap 1.4.5 with native extensions\nFetching crack 0.4.3\nInstalling crack 0.4.3\nFetching representable 3.0.4\nInstalling representable 3.0.4\nFetching ruby-vips 2.0.15\nFetching rb-inotify 0.10.0\nInstalling ruby-vips 2.0.15\nInstalling rb-inotify 0.10.0\nFetching sassc 2.0.1\nFetching minitest-reporters 1.4.0\nInstalling sassc 2.0.1 with native extensions\nInstalling minitest-reporters 1.4.0\nUsing queue_classic 4.0.0.pre.alpha1 from https://github.com/QueueClassic/queue_classic.git (at master@4260d89)\nFetching sdoc 1.0.0\nInstalling sdoc 1.0.0\nFetching redis-namespace 1.6.0\nInstalling redis-namespace 1.6.0\nFetching serverengine 2.0.7\nInstalling serverengine 2.0.7\nFetching turbolinks 5.2.1\nInstalling turbolinks 5.2.1\nUsing websocket-client-simple 0.3.0 from https://github.com/matthewd/websocket-client-simple.git (at close-race@e161305)\nFetching minitest-bisect 1.5.1\nUsing activesupport 6.0.0 from source at `.`\nFetching et-orbi 1.2.2\nInstalling minitest-bisect 1.5.1\nInstalling et-orbi 1.2.2\nFetching sinatra 2.0.7\nFetching sidekiq 6.0.1\nInstalling sidekiq 6.0.1\nInstalling sinatra 2.0.7\nFetching loofah 2.3.0\nFetching xpath 3.2.0\nInstalling loofah 2.3.0\nFetching kindlerb 1.2.0\nInstalling xpath 3.2.0\nFetching w3c_validators 1.3.4\nInstalling kindlerb 1.2.0\nFetching faye-websocket 0.10.9\nInstalling w3c_validators 1.3.4\nInstalling faye-websocket 0.10.9\nFetching aws-sdk-core 3.68.1\nFetching rubocop 0.75.0\nInstalling aws-sdk-core 3.68.1\nFetching faraday_middleware 0.12.2\nInstalling faraday_middleware 0.12.2\nFetching signet 0.11.0\nFetching google-cloud-env 1.2.1\nInstalling signet 0.11.0\nInstalling google-cloud-env 1.2.1\nFetching blade-sauce_labs_plugin 0.7.3\nFetching qunit-selenium 0.0.4\nInstalling qunit-selenium 0.0.4\nFetching webdrivers 4.1.3\nInstalling webdrivers 4.1.3\nFetching em-http-request 1.1.5\nInstalling em-http-request 1.1.5\nFetching webmock 3.7.6\nInstalling webmock 3.7.6\nInstalling blade-sauce_labs_plugin 0.7.3\nFetching listen 3.1.5\nInstalling listen 3.1.5\nFetching image_processing 1.9.3\nInstalling image_processing 1.9.3\nFetching sneakers 2.11.0\nInstalling sneakers 2.11.0\nFetching rails-dom-testing 2.0.3\nInstalling rails-dom-testing 2.0.3\nFetching globalid 0.4.2\nInstalling globalid 0.4.2\nUsing activemodel 6.0.0 from source at `.`\nFetching delayed_job 4.1.8\nInstalling delayed_job 4.1.8\nFetching fugit 1.3.3\nInstalling fugit 1.3.3\nFetching resque 1.27.4\nFetching rails-html-sanitizer 1.3.0\nInstalling resque 1.27.4\nInstalling rails-html-sanitizer 1.3.0\nFetching capybara 3.29.0\nDownloading rubocop-0.75.0 revealed dependencies not in the API or the lockfile\n(parser (&gt;= 2.6)).\nEither installing with `--full-index` or running `bundle update rubocop` should\nfix the problem.\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571851367, "post_id": 58527843, "comment_id": 103380363, "body": "Can you be a little more specific about your input format? Just the next line or until another delimiter? As a note <code>&#47;file_names*&#47;</code> matches <code>&quot;file_name&quot;</code>, <code>&quot;some kind of file_name&quot;</code> and <code>&quot;file_namessssssssssss&quot;</code>."}, {"owner": {"reputation": 842, "user_id": 5440125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5368403fa6c1aa62270f86373269777f?s=128&d=identicon&r=PG&f=1", "display_name": "zengod", "link": "https://stackoverflow.com/users/5440125/zengod"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571851622, "post_id": 58527843, "comment_id": 103380472, "body": "You&#39;re right. It should be /^file_names*/ instead. Check out my edit for an elaboration."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571852135, "post_id": 58527843, "comment_id": 103380678, "body": "In Ruby it&#39;s actually <code>&#47;\\Afile_names&#47;</code> where <code>\\A</code> anchors to the beginning of string, <code>^</code> at the beginning of a line. <code>*</code> means &quot;zero or more of character&quot; which doesn&#39;t appear to be what you mean. You seem to be using it as &quot;more stuff&quot;, which it isn&#39;t."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571852535, "post_id": 58527843, "comment_id": 103380811, "body": "Another thing to node here is that <code>file_names = [&quot;&quot;]</code> initializes your array with an empty string already in it. That&#39;s probably a mistake, as it should be an empty array: <code>file_names = [ ]</code>. You can append as necessary without the empty string."}, {"owner": {"reputation": 842, "user_id": 5440125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5368403fa6c1aa62270f86373269777f?s=128&d=identicon&r=PG&f=1", "display_name": "zengod", "link": "https://stackoverflow.com/users/5440125/zengod"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571852833, "post_id": 58527843, "comment_id": 103380948, "body": "@tadman. It&#39;s not. file_names indexing in the text starts from 1"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1571852958, "post_id": 58527843, "comment_id": 103381009, "body": "Everything in Ruby, like most programming languages, indexes from zero. You should just accept that and either add or subtract one as necessary when manipulating that array. Sticking in a placeholder causes all kinds of trouble from an architectural perspective."}, {"owner": {"reputation": 842, "user_id": 5440125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5368403fa6c1aa62270f86373269777f?s=128&d=identicon&r=PG&f=1", "display_name": "zengod", "link": "https://stackoverflow.com/users/5440125/zengod"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1571853030, "post_id": 58527843, "comment_id": 103381035, "body": "No it doesn&#39;t. It works for what I&#39;m doing."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571865978, "post_id": 58527843, "comment_id": 103386177, "body": "What does &quot;...and put them into the files_names array index according to the file_names index in the text.&quot; mean? When giving an example you need to show the desired return value (as a Ruby object)."}], "answers": [{"tags": [], "owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "is_accepted": true, "score": 1, "last_activity_date": 1571867656, "last_edit_date": 1571867656, "creation_date": 1571851674, "answer_id": 58528123, "question_id": 58527843, "link": "https://stackoverflow.com/questions/58527843/how-to-get-a-block-at-an-offset-in-the-io-foreach-loop-in-ruby/58528123#58528123", "title": "How to get a block at an offset in the IO.foreach loop in ruby?", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\"><code>#each_cons</code></a> to get the value of the next 4 rows from the text file:</p>\n\n<pre><code>files = IO.foreach(\"text.txt\").each_cons(5).with_object([]) do |block, o|\n  if block[0] =~ /file_names.*/\n    o &lt;&lt; block[1..4].map{|e| e.split(':')[1]}\n  end\nend\n\nputs files\n#=&gt; \"vector\"                                                                                                \n#    1                                                                                                       \n#    0x00000000                                                                                              \n#    0x00000000                                                                                              \n#    \"stl_bvector.h\"                                                                                         \n#    2                                                                                                       \n#    0x00000000                                                                                              \n#    0x00000000 \n</code></pre>\n\n<p>Keep in mind that the <code>files</code> array contains subarrays of 4 elements. If the <code>:</code> symbol occurs later in the lines, you could replace the third line of my code with this:</p>\n\n<pre><code>o &lt;&lt; block[1..4].map{ |e| e.partition(':').last.strip}\n</code></pre>\n\n<p>I also added <code>#strip</code> in case you want to remove the whitespaces around the values. With this line changed, the actual array will look something like this:</p>\n\n<pre><code>p files\n#=&gt;[[\"\\\"vector\\\"\", \"1\", \"0x00000000\", \"0x00000000\"], [\"\\\"stl_bvector.h\\\"\", \"2\", \"0x00000000\", \"0x00000000\"]]\n</code></pre>\n\n<p>(the values don't contain the <code>\\</code> escape character, that's just the way <code>#p</code> shows it).</p>\n\n<p>Another option, if you know the pattern <code>1 filename, 4 values</code> will be persistent through the entire text file and the textfile always starts with a filename, you can replace <code>#each_cons</code> with <a href=\"https://apidock.com/ruby/Enumerable/each_slice\" rel=\"nofollow noreferrer\"><code>#each_slice</code></a> and remove the regex completely, this will also speed up the entire process:</p>\n\n<pre><code>IO.foreach(\"text.txt\").each_slice(5).with_object([]) do |block, o|\n  o &lt;&lt; block[1..4].map{ |e| e.partition(':').last.strip }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571867937, "post_id": 58528312, "comment_id": 103386787, "body": "I suggest using<code>IO::foreach</code>, which, without a block, returns an enumerator, to avoid the creation of a temporary array."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571868369, "post_id": 58528312, "comment_id": 103386902, "body": "@CarySwoveland There&#39;s also <code>File.each_line</code> which might read better."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571868653, "post_id": 58528312, "comment_id": 103386981, "body": "I&#39;m not aware of <code>File.each_line</code>. A Rail&#39;s method?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571868740, "post_id": 58528312, "comment_id": 103387005, "body": "@CarySwoveland It&#39;s actually <a href=\"https://ruby-doc.org/core-2.6.5/IO.html#method-i-each_line\" rel=\"nofollow noreferrer\"><code>IO#each_line</code></a> which <code>File</code> inherits from. It may in fact be related to <code>foreach</code>, but that method is just awkwardly named."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1571869142, "post_id": 58528312, "comment_id": 103387095, "body": "I had looked in <code>IO</code>, but for a class method, not an instance method. You&#39;d have to write something like <code>f = File.new(&quot;testfile&quot;); f.each_line {...}; f.close</code>."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1571852480, "creation_date": 1571852480, "answer_id": 58528312, "question_id": 58527843, "link": "https://stackoverflow.com/questions/58527843/how-to-get-a-block-at-an-offset-in-the-io-foreach-loop-in-ruby/58528312#58528312", "title": "How to get a block at an offset in the IO.foreach loop in ruby?", "body": "<p>It's actually pretty easy to carve up a series of lines based on a pattern using <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-slice_before\" rel=\"nofollow noreferrer\"><code>slice_before</code></a>:</p>\n\n<pre><code>File.readlines(\"data.txt\").slice_before(/\\Afile_names/)\n</code></pre>\n\n<p>Now you have an array of arrays that looks like:</p>\n\n<pre><code>[\n  [\n    \"file_names[174]:\\n\",\n    \"           name: \\\"vector\\\"\\n\",\n    \"      dir_index: 1\\n\",\n    \"       mod_time: 0x00000000\\n\",\n    \"         length: 0x00000000\\n\"\n  ],\n  [\n    \"file_names[175]:\\n\",\n    \"           name: \\\"stl_bvector.h\\\"\\n\",\n    \"      dir_index: 2\\n\",\n    \"       mod_time: 0x00000000\\n\",\n    \"         length: 0x00000000\"\n  ]\n]\n</code></pre>\n\n<p>Each of these groups could be transformed further, like for example into a Ruby Hash using those keys.</p>\n"}], "owner": {"reputation": 842, "user_id": 5440125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5368403fa6c1aa62270f86373269777f?s=128&d=identicon&r=PG&f=1", "display_name": "zengod", "link": "https://stackoverflow.com/users/5440125/zengod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 58528123, "answer_count": 2, "score": 2, "last_activity_date": 1571867656, "creation_date": 1571850471, "last_edit_date": 1571851762, "question_id": 58527843, "link": "https://stackoverflow.com/questions/58527843/how-to-get-a-block-at-an-offset-in-the-io-foreach-loop-in-ruby", "title": "How to get a block at an offset in the IO.foreach loop in ruby?", "body": "<p>I'm using the IO.foreach loop to find a string using regular expressions. I want to append the next block (next line) to the file_names list. How can I do that?</p>\n\n<pre><code>file_names = [\"\"]                                                                                                                                                                                                                           \nIO.foreach(\"a.txt\") { |block|                                                                                                                         \n  if block =~ /^file_names*/                                                                                              \n    dir = # get the next block                                                                                                                                                                                           \n    file_names.append(dir)                                                                                      \n  end                                                                                                                    \n\n}     \n\n</code></pre>\n\n<hr>\n\n<p>Actually my input looks like this:</p>\n\n<pre><code>file_names[174]:                                                                                                         \n           name: \"vector\"                                                                                                \n      dir_index: 1                                                                                                       \n       mod_time: 0x00000000                                                                                              \n         length: 0x00000000                                                                                              \nfile_names[175]:                                                                                                         \n           name: \"stl_bvector.h\"                                                                                         \n      dir_index: 2                                                                                                       \n       mod_time: 0x00000000                                                                                              \n         length: 0x00000000    \n</code></pre>\n\n<p>I have a list of file_names, and I want to capture each of the name, dir_index, mod_time and length properties and put them into the files_names array index according to the file_names index in the text. </p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571849445, "post_id": 58527529, "comment_id": 103379522, "body": "What&#39;s the definition of <code>nonempty</code>? You could add your models (and migrations), and the RDBMS you&#39;re using."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 4493735, "user_type": "registered", "profile_image": "https://graph.facebook.com/1507607355/picture?type=large", "display_name": "Mike Ross", "link": "https://stackoverflow.com/users/4493735/mike-ross"}, "is_accepted": false, "score": 2, "last_activity_date": 1571869292, "last_edit_date": 1571869292, "creation_date": 1571854418, "answer_id": 58528788, "question_id": 58527529, "link": "https://stackoverflow.com/questions/58527529/activerecord-query-with-condition-of-last-element-in-association/58528788#58528788", "title": "ActiveRecord - Query with Condition of Last Element in Association", "body": "<p>I was able to figure it out - here is the working query:</p>\n\n<pre><code>pull_requests\n  .joins(:releases).distinct\n  .group('releases.ended_at, pull_requests.id, releases.id')\n  .having('releases.ended_at IN (SELECT MAX(releases.ended_at))')\n  .where('releases.is_rollback = true')\n</code></pre>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 53, "user_id": 4493735, "user_type": "registered", "profile_image": "https://graph.facebook.com/1507607355/picture?type=large", "display_name": "Mike Ross", "link": "https://stackoverflow.com/users/4493735/mike-ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571869292, "creation_date": 1571848967, "last_edit_date": 1571850113, "question_id": 58527529, "link": "https://stackoverflow.com/questions/58527529/activerecord-query-with-condition-of-last-element-in-association", "title": "ActiveRecord - Query with Condition of Last Element in Association", "body": "<p>Trying to do a sort of complex query in ActiveRecord right now. Not sure if it's possible to do entirely in ActiveRecord (i.e. without just filtering intermediate results in Rails). I'd like to do as much manipulation as possible in the database.</p>\n\n<p>I have a <code>PullRequest</code> and <code>Release</code> model with a many-many relationship. There exist fields on the <code>Release</code> model <code>is_rollback</code>(boolean) and <code>ended_at</code> (datetime). I am trying to find all <code>pull_requests</code> for which their <code>releases</code> association 1) is nonempty and 2) ends with a <code>release</code> that has <code>is_rollback = true</code> when the <code>releases</code> are ordered by <code>ended_at</code>.</p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>PullRequest\n  .joins(:releases) # filter pull requests with empty release associations\n  .having('releases.is_rollback = true AND releases.ended_at = MAX(releases.ended_at)') # where latest release is a rollback\n  .group('pull_requests.id, releases.ended_at, releases.is_rollback') # necessary with 'having'\n</code></pre>\n\n<p>The <code>having</code> clause is not working as expected though and the query is still returning pull requests whose latest release is not a rollback. Not hugely experienced with complex SQL queries so any help is appreciated. I'm using Rails 4, PostgreSQL db.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "amazon-s3"], "answers": [{"tags": [], "owner": {"reputation": 4695, "user_id": 2010395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c21eeefdd026a25479f662be94e0460c?s=128&d=identicon&r=PG", "display_name": "Serhii Nadolynskyi", "link": "https://stackoverflow.com/users/2010395/serhii-nadolynskyi"}, "is_accepted": false, "score": 2, "last_activity_date": 1571851256, "last_edit_date": 1571851256, "creation_date": 1571850120, "answer_id": 58527772, "question_id": 58527496, "link": "https://stackoverflow.com/questions/58527496/how-encoded-filename-in-s3-presigned-url-in-ruby/58527772#58527772", "title": "How encoded filename in S3 Presigned url in ruby", "body": "<p>To cast your filename to url-safe form you may use 2 options:</p>\n\n<ul>\n<li>If you are using Rails you may try to use <code>.parameterize</code> method. See\n<a href=\"https://apidock.com/rails/String/parameterize\" rel=\"nofollow noreferrer\">https://apidock.com/rails/String/parameterize</a> </li>\n<li><p>If you are using plain Ruby:</p>\n\n<blockquote>\n  <p>filename.gsub(%r{\\s}, '_').gsub(%r{[^a-zA-Z0-9-.]+}, '')</p>\n</blockquote>\n\n<p>Sample: </p>\n\n<blockquote>\n  <p>'asf asfa 1-240((($@))!@.jpeg'.gsub(%r{\\s}, '_').gsub(%r{[^a-zA-Z0-9-.]+}, '')\n  => \"asfasfa1-240.jpeg\"</p>\n</blockquote>\n\n<p>Both approaches should throw away any spaces and special characters.</p></li>\n</ul>\n"}], "owner": {"reputation": 2138, "user_id": 1377879, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/88ed0b98e028557cf987548411d8138c?s=128&d=identicon&r=PG", "display_name": "Bolo", "link": "https://stackoverflow.com/users/1377879/bolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571851256, "creation_date": 1571848834, "last_edit_date": 1571849621, "question_id": 58527496, "link": "https://stackoverflow.com/questions/58527496/how-encoded-filename-in-s3-presigned-url-in-ruby", "title": "How encoded filename in S3 Presigned url in ruby", "body": "<p>in S3 presigned url how I can encoded the string $filename</p>\n\n<pre><code>s3.bucket(ENV.fetch('S3_BUCKET_NAME')).presigned_post(\n  key: \"uploads/#{Time.now.to_i}/${filename}\",\n  allow_any: ['authenticity_token'],\n  acl:'public-read',\n  metadata: {\n    'original-filename' =&gt; '${filename}'\n  },\n  success_action_status: \"201\"\n)\n</code></pre>\n\n<p>sometime the filename include some special char or spaces. I would like to avoid them in the key</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "grape"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1571845357, "post_id": 58526458, "comment_id": 103377551, "body": "Well, you can do it exactly as shown in your code. Do you experience any problem with it?"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1571845440, "post_id": 58526458, "comment_id": 103377594, "body": "@HolgerJust This code will throw an error if <code>params[:filters]</code> is <code>nil</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1571845386, "creation_date": 1571845386, "answer_id": 58526576, "question_id": 58526458, "link": "https://stackoverflow.com/questions/58526458/ruby-dont-do-actions-for-nil-class-in-if-block/58526576#58526576", "title": "Ruby don&#39;t do actions for nil class in if block", "body": "<p>Try changing</p>\n\n<pre><code>if params[:filters][:company_name]\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if params[:filters] &amp;&amp; params[:filters][:company_name]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 4, "last_activity_date": 1571862497, "last_edit_date": 1571862497, "creation_date": 1571848188, "answer_id": 58527319, "question_id": 58526458, "link": "https://stackoverflow.com/questions/58526458/ruby-dont-do-actions-for-nil-class-in-if-block/58527319#58527319", "title": "Ruby don&#39;t do actions for nil class in if block", "body": "<p>I'm <em>assuming</em> your problem is that the code \"blows up\" if <code>params[:filters]</code> is <code>nil</code>. (You get an error: \"undefined method <code>:[]</code> for <code>nil:NilClass</code>\".)</p>\n\n<p>There are multiple ways to handle this, but probably the most concise is to use <a href=\"https://apidock.com/ruby/Hash/dig\" rel=\"nofollow noreferrer\"><code>Hash#dig</code></a>:</p>\n\n<pre><code>if params.dig(:filters, :company_name)\n  # ...\nend\n</code></pre>\n\n<p>This won't fail if <code>params[:filters] == nil</code>. From the above linked documentation (emphasis is mine):</p>\n\n<blockquote>\n  <p>Extracts the nested value specified by the sequence of key objects by calling dig at each step, <strong>returning nil if any intermediate step is nil</strong>.</p>\n</blockquote>\n"}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1571895906, "accepted_answer_id": 58527319, "answer_count": 2, "score": 0, "last_activity_date": 1571896352, "creation_date": 1571844933, "last_edit_date": 1571896352, "question_id": 58526458, "link": "https://stackoverflow.com/questions/58526458/ruby-dont-do-actions-for-nil-class-in-if-block", "closed_reason": "Duplicate", "title": "Ruby don&#39;t do actions for nil class in if block", "body": "<p>How to achieve sth like if <code>params[:filters][:company_name]</code> is present (not nil) then do below actions but if it's nil - skip and do the rest of the code below/outside of this if ?</p>\n\n<pre><code>if params[:filters][:company_name]\n  contains = Process\n             .where(\n               'company_name LIKE ?', \"#{params[:filters][:company_name].downcase}%\"\n             )\nend\n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-elastic-beanstalk", "amazon-cloudwatch"], "answers": [{"tags": [], "owner": {"reputation": 6161, "user_id": 1028039, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6db3ab85fc4196cfaddf4ef52c14ba55?s=128&d=identicon&r=PG", "display_name": "micah", "link": "https://stackoverflow.com/users/1028039/micah"}, "is_accepted": true, "score": 1, "last_activity_date": 1572627160, "creation_date": 1572627160, "answer_id": 58662958, "question_id": 58526425, "link": "https://stackoverflow.com/questions/58526425/elasticbeanstalk-execution-expired-when-configuring-logstreaming/58662958#58662958", "title": "ElasticBeanstalk Execution Expired When Configuring LogStreaming", "body": "<p>We found the issue was with VPC Endpoints and the use of Private DNS. We disable Private DNS on the in-region logs endpoint and resolved the issue.</p>\n"}], "owner": {"reputation": 6161, "user_id": 1028039, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6db3ab85fc4196cfaddf4ef52c14ba55?s=128&d=identicon&r=PG", "display_name": "micah", "link": "https://stackoverflow.com/users/1028039/micah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 58662958, "answer_count": 1, "score": 2, "last_activity_date": 1572627160, "creation_date": 1571844831, "question_id": 58526425, "link": "https://stackoverflow.com/questions/58526425/elasticbeanstalk-execution-expired-when-configuring-logstreaming", "title": "ElasticBeanstalk Execution Expired When Configuring LogStreaming", "body": "<p>I'm getting an error I've never encountered before. I have a multi-region stackset that builds an ElasticBeanstalk application in two regions (us-east-1 and eu-west-1). The configurations are exactly the same except for VPC specific configurations like subnets.</p>\n\n<p>After rebuilding both eb environments, my us-east-1 environment was unable to successfully deploy.</p>\n\n<p>The logs show that one of the hooks are not completing. That hook is-</p>\n\n<blockquote>\n  <p>/opt/elasticbeanstalk/addons/logstreaming/hooks/config/10-config.sh</p>\n</blockquote>\n\n<p>The contents of the hook look like-</p>\n\n<pre><code>#!/bin/bash -e\n#==============================================================================\n# Copyright 2014 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n#\n# Licensed under the Amazon Software License (the \"License\"). You may not use\n# this file except in compliance with the License. A copy of the License is\n# located at\n#\n#       http://aws.amazon.com/asl/\n#\n# or in the \"license\" file accompanying this file. This file is distributed on\n# an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n# implied. See the License for the specific language governing permissions\n# and limitations under the License.\n#==============================================================================\n\nsource /opt/elasticbeanstalk/lib/ruby/profile.sh\n\nBASEDIR=$(dirname $0)\nruby $BASEDIR/../logstreaming_config.rb\n</code></pre>\n\n<p>There isn't much going on in here other than setting up some common ruby env vars in <code>profile.sh</code> and then calling out to <code>logstreaming_config.rb</code>. Following that file, the contents are-</p>\n\n<pre><code>#!/opt/elasticbeanstalk/lib/ruby/bin/ruby\n\n#==============================================================================\n# Copyright 2014 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n#\n# Licensed under the Amazon Software License (the \"License\"). You may not use\n# this file except in compliance with the License. A copy of the License is\n# located at\n#\n#       https://aws.amazon.com/asl/\n#\n# or in the \"license\" file accompanying this file. This file is distributed on\n# an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or\n# implied. See the License for the specific language governing permissions\n# and limitations under the License.\n#==============================================================================\nrequire 'elasticbeanstalk/log-streaming-config-manager'\n\nif __FILE__ == $0\n  begin\n    log_streaming_config_manager = ElasticBeanstalk::LogStreamingConfigManager.new\n    log_streaming_config_manager.config_cwl_agent\n  rescue Exception =&gt; ex\n    puts ex.message\n    exit(1)\n  end\nend\n</code></pre>\n\n<p>The troubling line here is the one where <code>config_cwl_agent</code> is called. The code for this can be found at <code>/opt/elasticbeanstalk/lib/ruby/lib/ruby/gems/2.2.0/gems/beanstalk-core-2.12/lib/elasticbeanstalk/log-streaming-config-manager.rb</code> on the aws box. Which is a largish file so I won't add it here.</p>\n\n<p>Adding logging throughout, I narrow it down to-</p>\n\n<pre><code>cloudwatch_logs.create_log_stream({\n  log_group_name: \"#{log_group_name}\",\n  log_stream_name: \"#{instance_id}\"\n})\n</code></pre>\n\n<p>I haven't drilled any deeper. It managed to create the logstreams themselves at some point, but it never gets over this line since. The only exception that's thrown is one that reads-</p>\n\n<blockquote>\n  <p>execution expired</p>\n</blockquote>\n\n<p>After ~60s.</p>\n\n<p>I could try rebuilding the environment with a new log_group_name and see if it's resolved. Fortunately this is only happening in a dev environment, so it would be nice to know how to resolve this issue in its current state if I saw this happening in a production environment. Spinning up a new stackset with entirely new eb environments over multiple regions takes a considerable amount of time.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4253, "user_id": 812660, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dNqSt.png?s=128&g=1", "display_name": "Mark Locklear", "link": "https://stackoverflow.com/users/812660/mark-locklear"}, "edited": false, "score": 1, "creation_date": 1571844829, "post_id": 58526394, "comment_id": 103377276, "body": "I feel something like <code>full_names.uniq.map(&amp;:first_name) { |n| full_names.count(n) }.max</code> is a first step, but that gives me a block/arg error."}], "answers": [{"comments": [{"owner": {"reputation": 4253, "user_id": 812660, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dNqSt.png?s=128&g=1", "display_name": "Mark Locklear", "link": "https://stackoverflow.com/users/812660/mark-locklear"}, "edited": false, "score": 1, "creation_date": 1571846568, "post_id": 58526753, "comment_id": 103378160, "body": "Nice work ggorlen! I&#39;m adding a solution I came up with in the meantime below."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1571847601, "post_id": 58526753, "comment_id": 103378675, "body": "I personally don&#39;t like the <code>[0...n]</code> syntax after a block and would rather do <code>.first(n)</code> or <code>.take(n)</code> the line below, this is just personal preference though."}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1571848159, "post_id": 58526753, "comment_id": 103378925, "body": "Yeah, that&#39;s certainly valid. Without doubt <code>.first</code> is more semantically meaningful. I&#39;m coming from Python where slices are pretty much everywhere, so seeing the <code>[]</code>s tends to click more instantly for me than parsing an English word in my brain, but I think your suggestion is more idiomatic in Ruby."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1571853090, "post_id": 58526753, "comment_id": 103381060, "body": "As an aside <code>max_by(n, &amp;:last)</code> can replace <code>.sort_by{|k, v| -v}.first(n)</code> in the first example. <code>Enumerable#max_by</code> takes accepts an argument for the maximum number of results."}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1571857186, "post_id": 58526753, "comment_id": 103382805, "body": "@engineersmnky Thanks--whenever I answer a Ruby question, there&#39;s always some better function folks tell me about!"}], "tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 1, "last_activity_date": 1571857425, "last_edit_date": 1571857425, "creation_date": 1571845955, "answer_id": 58526753, "question_id": 58526394, "link": "https://stackoverflow.com/questions/58526394/find-n-number-of-common-attributes-in-an-array-of-structs/58526753#58526753", "title": "Find N number of common attributes in an array of structs", "body": "<p>You can use  <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\"><code>group_by</code></a> to create a hash mapping each first name to an array of all of its occurrences in the array, <a href=\"https://ruby-doc.org/core-2.4.0/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\"><code>transform_values</code></a> to turn each value array of strings into a count, then <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-max_by\" rel=\"nofollow noreferrer\"><code>max_by</code></a> to extract the largest <code>n</code> counts.</p>\n\n<pre><code>Name = Struct.new(:first_name, :last_name) do\n  def greeting\n    \"Hello #{first_name}!\"\n  end\nend\n\nfull_names = [\n  Name.new(\"a\", \"b\"),\n  Name.new(\"b\", \"c\"),\n  Name.new(\"d\", \"c\"),\n  Name.new(\"c\", \"d\"),\n  Name.new(\"d\", \"c\"),\n  Name.new(\"b\", \"b\"),\n  Name.new(\"b\", \"e\")\n]\nn = 2\n\np full_names\n  .group_by(&amp;:first_name)\n  .transform_values(&amp;:size)\n  .max_by(n, &amp;:last)\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[[\"b\", 3], [\"d\", 2]]\n</code></pre>\n\n<p>If you only want the first names and not the counts, append <code>.map(&amp;:first)</code> to the chain.</p>\n"}, {"tags": [], "owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "is_accepted": false, "score": 0, "last_activity_date": 1571846507, "creation_date": 1571846507, "answer_id": 58526913, "question_id": 58526394, "link": "https://stackoverflow.com/questions/58526394/find-n-number-of-common-attributes-in-an-array-of-structs/58526913#58526913", "title": "Find N number of common attributes in an array of structs", "body": "<p>Using the same example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Name = Struct.new(:first_name, :last_name) do\n  def greeting\n    \"Hello #{first_name}!\"\n  end\nend\n\nfull_names = [\n  Name.new(\"a\", \"b\"),\n  Name.new(\"b\", \"c\"),\n  Name.new(\"d\", \"c\"),\n  Name.new(\"c\", \"d\"),\n  Name.new(\"d\", \"c\"),\n  Name.new(\"b\", \"b\"),\n  Name.new(\"b\", \"e\")\n]\n</code></pre>\n\n<p>We can use <code>inject</code> to create a Hash with <code>first_name =&gt; frequency</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>first_names = full_names.map(&amp;:first_name)\nfirst_names #[\"a\", \"b\", \"d\", \"c\", \"d\", \"b\", \"b\"]\nhash_of_frequency = first_names.inject(Hash.new(0)) { |h,v| h[v] += 1; h }\nhash_of_frequency # [[\"b\", 3], [\"d\", 2], [\"a\", 1], [\"c\", 1]]\n</code></pre>\n\n<p>Now we just execute a <code>sort_by</code> and get your results:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>hash_of_frequency.sort_by{|k, v| -v}.first(number_desired)\n</code></pre>\n\n<p>The result is the same, but I've preferred to use <code>inject</code></p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1571853208, "post_id": 58527036, "comment_id": 103381109, "body": "As an aside <code>max_by(10, &amp;:last)</code> can replace <code>.sort_by {|_key, value| value}.last(10)</code>. Enumerable#max_by takes accepts an argument for the maximum number of results."}], "tags": [], "owner": {"reputation": 4253, "user_id": 812660, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dNqSt.png?s=128&g=1", "display_name": "Mark Locklear", "link": "https://stackoverflow.com/users/812660/mark-locklear"}, "is_accepted": true, "score": 0, "last_activity_date": 1571846901, "creation_date": 1571846901, "answer_id": 58527036, "question_id": 58526394, "link": "https://stackoverflow.com/questions/58526394/find-n-number-of-common-attributes-in-an-array-of-structs/58527036#58527036", "title": "Find N number of common attributes in an array of structs", "body": "<p>Here was a solution I came up with based on Sophie's answer <a href=\"https://stackoverflow.com/questions/412169/ruby-how-to-find-item-in-array-which-has-the-most-occurrences/7782599\">HERE</a>.</p>\n\n<p>First, this gives me a hash of first names and the number of occurrences of each:</p>\n\n<pre><code>freq_of_first_names = full_names.map(&amp;:first_name).inject(Hash.new(0)) { |h,v| h[v] += 1; h }\n =&gt; \"Haley\"=&gt;122, \"Auer\"=&gt;119, \"Lakin\"=&gt;96, \"Macejkovic\"=&gt;98...\n</code></pre>\n\n<p>Now I can sort this with the <code>.sort_by</code> method, and also adding the <code>.last</code> method along with the number of records I want returned (in this case 10).</p>\n\n<pre><code>freq_of_first_names.sort_by {|_key, value| value}.last(10)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1571867616, "creation_date": 1571867616, "answer_id": 58531466, "question_id": 58526394, "link": "https://stackoverflow.com/questions/58526394/find-n-number-of-common-attributes-in-an-array-of-structs/58531466#58531466", "title": "Find N number of common attributes in an array of structs", "body": "<pre><code>full_names = [\n  Name.new(\"Bob\", \"Feller\"),\n  Name.new(\"Hank\", \"Jones\"),\n  Name.new(\"Annie\", \"Oakley\"),\n  Name.new(\"Cher\", \"\"),\n  Name.new(\"Annie\", \"Hall\"),\n  Name.new(\"Melba\", \"Toast\"),\n  Name.new(\"Bob\", \"Dylan\"),\n  Name.new(\"Hank\", \"Wiliams\"),\n  Name.new(\"Bob\", \"Marley\")\n]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>nbr_most_common = 3\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>full_names.each_with_object(Hash.new(0)) { |i,h| h[i[:first_name]] += 1 }.\n           max_by(nbr_most_common, &amp;:last).\n           map(&amp;:first)\n  #=&gt; [\"Bob\", \"Hank\", \"Annie\"]\n</code></pre>\n\n<p>If you wish to also display the frequency, change the last line to <code>to_h</code>:</p>\n\n<pre><code>full_names.each_with_object(Hash.new(0)) { |i,h| h[i[:first_name]] += 1 }.\n           max_by(nbr_most_common, &amp;:last).\n           to_h\n   #=&gt; {\"Bob\"=&gt;3, \"Hank\"=&gt;2, \"Annie\"=&gt;2} \n</code></pre>\n\n<p>See the version of <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash::new</a> that creates a <em>default value</em> (here zero) and <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Enumerable#max_by</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 441, "user_id": 3275798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5Ypg.jpg?s=128&g=1", "display_name": "cavin kwon", "link": "https://stackoverflow.com/users/3275798/cavin-kwon"}, "is_accepted": false, "score": 1, "last_activity_date": 1571960320, "last_edit_date": 1571960320, "creation_date": 1571957170, "answer_id": 58550079, "question_id": 58526394, "link": "https://stackoverflow.com/questions/58526394/find-n-number-of-common-attributes-in-an-array-of-structs/58550079#58550079", "title": "Find N number of common attributes in an array of structs", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.7.0.preview1/Enumerable.html#method-i-tally\" rel=\"nofollow noreferrer\">Enumerable#tally</a> in 2.7</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Name = Struct.new(:first_name, :last_name) do\n  def greeting\n    \"Hello #{first_name}!\"\n  end\nend\n\nfull_names = [\n  Name.new(\"Yui\", \"Yoko\"),\n  Name.new(\"Bob\", \"Feller\"),\n  Name.new(\"Hank\", \"Jones\"),\n  Name.new(\"Annie\", \"Oakley\"),\n  Name.new(\"Cher\", \"\"),\n  Name.new(\"Annie\", \"Hall\"),\n  Name.new(\"Melba\", \"Toast\"),\n  Name.new(\"Bob\", \"Dylan\"),\n  Name.new(\"Hank\", \"Wiliams\"),\n  Name.new(\"Bob\", \"Marley\")\n]\n\nfull_names.map(&amp;:first_name).tally.max_by(3, &amp;:last) \n#=&gt; [[\"Bob\", 3], [\"Annie\", 2], [\"Hank\", 2]]\n</code></pre>\n"}], "owner": {"reputation": 4253, "user_id": 812660, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dNqSt.png?s=128&g=1", "display_name": "Mark Locklear", "link": "https://stackoverflow.com/users/812660/mark-locklear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58527036, "answer_count": 5, "score": 2, "last_activity_date": 1571960320, "creation_date": 1571844741, "question_id": 58526394, "link": "https://stackoverflow.com/questions/58526394/find-n-number-of-common-attributes-in-an-array-of-structs", "title": "Find N number of common attributes in an array of structs", "body": "<p>I have the following struct:</p>\n\n<pre><code>Name = Struct.new(:first_name, :last_name) do\n  def greeting\n    \"Hello #{first_name}!\"\n  end\nend\n</code></pre>\n\n<p>I am adding these objects to an array like this:</p>\n\n<pre><code>full_names &lt;&lt; Name.new(first_name, last_name)\n</code></pre>\n\n<p>Now, I'd like to find the N most common first names.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1571844114, "post_id": 58526144, "comment_id": 103376904, "body": "Please see the <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a> page. We can&#39;t see the data--start by breaking down the problem into discrete steps and sanity-check your assumptions by running in the REPL. TL;DR: <code>name</code> is <code>nil</code>, figure out why."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 2, "creation_date": 1571844430, "post_id": 58526144, "comment_id": 103377067, "body": "Unrelated to your question, but I would strongly urge you to write to a different file than the one you just read from.  If you&#39;ve been trying to debug this for a while, you may have destroyed your input file at some point."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1571844924, "post_id": 58526144, "comment_id": 103377319, "body": "Try <code>name = people.find { |person| person[0] =~ &#47;Name&#47; } || []</code>"}, {"owner": {"reputation": 1, "user_id": 12263936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JzA8BfubSq4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdwLveBKT7YcSDJP23OcXfWLaIqcw/photo.jpg?sz=128", "display_name": "forMadEline", "link": "https://stackoverflow.com/users/12263936/formadeline"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1571846767, "post_id": 58526144, "comment_id": 103378259, "body": "@pjs, it works for me. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12263936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JzA8BfubSq4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdwLveBKT7YcSDJP23OcXfWLaIqcw/photo.jpg?sz=128", "display_name": "forMadEline", "link": "https://stackoverflow.com/users/12263936/formadeline"}, "edited": false, "score": 0, "creation_date": 1571847178, "post_id": 58526973, "comment_id": 103378470, "body": "so I change this <code>attr_one = people.find { |person| person[0] =~ &#47;attr_one&#47; }</code> on this <code>attr_one = people.find { |person| person[0] =~ &#47;attr_one&#47; } || = []</code> and this work"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 1, "user_id": 12263936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JzA8BfubSq4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdwLveBKT7YcSDJP23OcXfWLaIqcw/photo.jpg?sz=128", "display_name": "forMadEline", "link": "https://stackoverflow.com/users/12263936/formadeline"}, "edited": false, "score": 0, "creation_date": 1571848313, "post_id": 58526973, "comment_id": 103379003, "body": "@forMadEline Yes, because <code>variable = statement_1 || statement_2</code> assigns the return value of <code>statement_1</code> to <code>variable</code> if it&#39;s truthy or the return value of <code>statement_2</code> if <code>statement_1</code> was falsy (which <code>nil</code>) is."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1571846715, "creation_date": 1571846715, "answer_id": 58526973, "question_id": 58526144, "link": "https://stackoverflow.com/questions/58526144/another-one-undefined-method-for-nilnilclass-error/58526973#58526973", "title": "Another one &quot;undefined method `[]=&#39; for nil:NilClass&quot; error", "body": "<p>The issue is that <code>find</code> returns <code>nil</code> because the block never returns a truthy value.</p>\n\n<pre><code>attr_one = people.find { |person| person[0] =~ /attr_one/ }\n</code></pre>\n\n<p>This results in the when the following line is called.</p>\n\n<pre><code>attr_one[0] = \"attr_one_new\"\n</code></pre>\n\n<p>Because <code>nil</code> doesn't have the <code>[]=</code> setter.</p>\n\n<p>The takeaway here is that <code>find</code> can return <code>nil</code> values.</p>\n\n<p>The <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-find\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n\n<blockquote>\n  <h3>find(ifnone = nil) { |obj| block } \u2192 obj or nil</h3>\n  \n  <h3>find(ifnone = nil) \u2192 an_enumerator</h3>\n  \n  <p>Passes each entry in <em>enum</em> to <em>block</em>. Returns the first for which <em>block</em>\n  is not false. If no object matches, calls <em>ifnone</em> and returns its\n  result when it is specified, or returns <code>nil</code> otherwise.</p>\n  \n  <p>If no block is given, an enumerator is returned instead.</p>\n\n<pre><code>(1..100).detect  #=&gt; #&lt;Enumerator: 1..100:detect&gt;\n(1..100).find    #=&gt; #&lt;Enumerator: 1..100:find&gt;\n\n(1..10).detect   { |i| i % 5 == 0 and i % 7 == 0 }   #=&gt; nil\n(1..10).find     { |i| i % 5 == 0 and i % 7 == 0 }   #=&gt; nil\n(1..100).detect  { |i| i % 5 == 0 and i % 7 == 0 }   #=&gt; 35\n(1..100).find    { |i| i % 5 == 0 and i % 7 == 0 }   #=&gt; 35\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 12263936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JzA8BfubSq4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdwLveBKT7YcSDJP23OcXfWLaIqcw/photo.jpg?sz=128", "display_name": "forMadEline", "link": "https://stackoverflow.com/users/12263936/formadeline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1571846715, "creation_date": 1571843934, "last_edit_date": 1571845743, "question_id": 58526144, "link": "https://stackoverflow.com/questions/58526144/another-one-undefined-method-for-nilnilclass-error", "title": "Another one &quot;undefined method `[]=&#39; for nil:NilClass&quot; error", "body": "<p>what's wrong with this code?</p>\n\n<p>I have a .txt file wich consist some attributes like that:</p>\n\n<pre><code>attr_one, att2, attr3, attr4\nattr_one, att2, attr3, attr4\nattr_one, att2, attr3, attr4\n</code></pre>\n\n<p>I want to change \"attr1\" to \"attr_one\"</p>\n\n<pre><code>require \"csv\"\npeople = CSV.read(\"text.txt\")\nattr_one = people.find { |person| person[0] =~ /attr_one/ }\nattr_one[0] = \"attr_one_new\"\n\nCSV.open(\"text.txt\", \"w\") do |csv|\n    people.each do |person|\n        csv &lt;&lt; person\n    end\nend\n</code></pre>\n\n<p>and how change this to start preceding code work?</p>\n\n<pre><code>attr_one[0]...\n</code></pre>\n\n<p>It's example from one reference manual.</p>\n\n<p>Output of this code should be array like that:</p>\n\n<pre><code>attr_one, att2, attr3, attr4\nattr_one_new, att2, attr3, attr4\nattr_one, att2, attr3, attr4\n</code></pre>\n\n<p>Where is mistake?</p>\n"}, {"tags": ["ruby", "bash", "environment-variables", "erb"], "answers": [{"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1571843372, "creation_date": 1571843372, "answer_id": 58525968, "question_id": 58525790, "link": "https://stackoverflow.com/questions/58525790/how-to-access-an-environment-variable-thats-a-bash-array-from-a-ruby-erb-script/58525968#58525968", "title": "How to access an environment variable that&#39;s a bash array from a Ruby ERB script?", "body": "<p>You can write it as,</p>\n\n<pre><code>MR_BASH_ARRAY:\n  '1': 'Value-1'\n  '2': 'Value-2'\n  '3': 'Value-3'\n</code></pre>\n\n<p>And get your array as <code>ENV['MR_BASH_ARRAY'].values</code></p>\n"}], "owner": {"reputation": 23176, "user_id": 18149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5e10278b9b6a518d5835f658704d85f?s=128&d=identicon&r=PG", "display_name": "leeand00", "link": "https://stackoverflow.com/users/18149/leeand00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571843372, "creation_date": 1571842855, "question_id": 58525790, "link": "https://stackoverflow.com/questions/58525790/how-to-access-an-environment-variable-thats-a-bash-array-from-a-ruby-erb-script", "title": "How to access an environment variable that&#39;s a bash array from a Ruby ERB script?", "body": "<p>How does one loop through an environment variable that is a bash array in a Ruby ERB?  </p>\n\n<p>I'm aware that this can be done with arguments anyway</p>\n\n<pre><code> &lt;%= @args[x] %&gt;\n</code></pre>\n\n<p>And you can get to Environment Variables this way:</p>\n\n<pre><code> &lt;%= ENV[\"PATH\"] %&gt;\n</code></pre>\n\n<p>But how do you get to an array?</p>\n\n<pre><code> &lt;%= ENV[\"MR_BASH_ARRAY\"] %&gt;\n</code></pre>\n\n<p>and then loop it around...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "grape"], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571842660, "creation_date": 1571842660, "question_id": 58525734, "link": "https://stackoverflow.com/questions/58525734/dynamic-search-filter-in-rails-grape-to-show-blank-page", "title": "Dynamic search filter in Rails/Grape to show blank page", "body": "<p>In my app after pressing the filter button a search field appears - searching companies by company name. Everything works well but I'm just wondering how to implement scenario where user enters company name which doesn't exists in db and in the response gets blank page instead of list of all companies which is right now. Can I handle this through the backend side?</p>\n\n<pre><code>get do\n  collection = Process.all.order(id: :asc) if params[:sort].blank?\n\n  if params[:filters]\n    contains = Process\n               .where(\n                 'company_name LIKE ?', \"#{params[:filters][:company_name].downcase}%\"\n               )\n  end\n\n  scoped_collection = if contains.present?\n                        scope_admin_resource(contains)\n                      else\n                        scope_admin_resource(collection)\n                      end\n  admin_serialize paginate(filter(sort(scoped_collection))) # this comes from some gem, it's not important\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 176, "user_id": 2949062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/816ec4bd94021c26bc81ca1ef7472416?s=128&d=identicon&r=PG&f=1", "display_name": "johnny243", "link": "https://stackoverflow.com/users/2949062/johnny243"}, "is_accepted": false, "score": 0, "last_activity_date": 1573696276, "creation_date": 1573696276, "answer_id": 58848230, "question_id": 58525004, "link": "https://stackoverflow.com/questions/58525004/issues-when-adding-devise-jwt-to-a-existente-user-model-in-rails/58848230#58848230", "title": "Issues when adding devise-jwt to a existente User model in Rails", "body": "<p>Change your <code>User</code> model to the following:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable, :confirmable,\n        :recoverable, :rememberable, :trackable, :validatable, :omniauthable,\n        :jwt_authenticatable, jwt_revocation_strategy: JWTBlacklist, omniauth_providers: [:facebook]\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 5136223, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-Wl5tRylDc9g/AAAAAAAAAAI/AAAAAAAABJQ/ayueeKi75iw/photo.jpg?sz=128", "display_name": "Fernando Maymone", "link": "https://stackoverflow.com/users/5136223/fernando-maymone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1573696276, "creation_date": 1571840453, "question_id": 58525004, "link": "https://stackoverflow.com/questions/58525004/issues-when-adding-devise-jwt-to-a-existente-user-model-in-rails", "title": "Issues when adding devise-jwt to a existente User model in Rails", "body": "<p>Im trying to add the devise-jwt to an existent app I have. Im adding API endpoints now, and want to use the same Model I have already</p>\n\n<p>I added the gem devise-jwt following this article here: <a href=\"https://medium.com/@mazik.wyry/rails-5-api-jwt-setup-in-minutes-using-devise-71670fd4ed03\" rel=\"nofollow noreferrer\">https://medium.com/@mazik.wyry/rails-5-api-jwt-setup-in-minutes-using-devise-71670fd4ed03</a></p>\n\n<p>I had configured my devise.rb file with: </p>\n\n<pre><code>config.jwt do |jwt|\n  jwt.secret = ENV['DEVISE_JWT_SECRET_KEY']\n  jwt.dispatch_requests = [\n    ['POST', %r{^/login$}]\n  ]\n  jwt.revocation_requests = [\n    ['DELETE', %r{^/logout$}]\n  ]\n  jwt.expiration_time = 1.day.to_i\nend\n</code></pre>\n\n<p>Had created my jwt_blacklist.rb and migrations for it: </p>\n\n<pre><code>class CreateJwtBlacklist &lt; ActiveRecord::Migration[6.0]\n  def change\n    create_table :jwt_blacklist do |t|\n      t.string :jti, null: false\n    end\n    add_index :jwt_blacklist, :jti\n  end\nend\n\nclass JWTBlacklist &lt; ApplicationRecord\n  include Devise::JWT::RevocationStrategies::Blacklist\n\n  self.table_name = 'jwt_blacklist'\nend\n</code></pre>\n\n<p>When I try to add those lines to my user.rb </p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable, :confirmable,\n        :recoverable, :rememberable, :trackable, :validatable, :omniauthable, omniauth_providers: [:facebook],\n        :jwt_authenticatable,\n        jwt_revocation_strategy: JWTBlacklist\n</code></pre>\n\n<p>And when I try to start my server im getting: </p>\n\n<pre><code>/Users/fmaymone/.rvm/gems/ruby-2.6.3/gems/activesupport- \n6.0.0/lib/active_support/dependencies.rb:511:in `load': /booksculp/app/models/user.rb:6: \nsyntax error, unexpected ',', expecting =&gt; (SyntaxError)\n    :jwt_authenticatable ,\n</code></pre>\n\n<p>Someone knows what Im doing wrong here? </p>\n\n<p>thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1571840396, "post_id": 58524654, "comment_id": 103374821, "body": "<code>&lt;&lt;-eos</code> \u2192 <code>&lt;&lt;-html</code>"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1571840745, "post_id": 58524654, "comment_id": 103375043, "body": "@AlekseiMatiushkin ahh is it better to use <code>html</code> (or more specific jargon?). Because I just always use <code>eos</code> for multiline-strings all-the-time :) or does the name have an actual effect or something?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1571840795, "post_id": 58524654, "comment_id": 103375081, "body": "It\u2019s how editors guess the desired syntax highlighting for heredocs in general."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1571840900, "post_id": 58524654, "comment_id": 103375136, "body": "@AlekseiMatiushkin ahh I didn&#39;t know that! Thanks! Cool! :) It looks much better now only except the first line <code>body</code>. I&#39;ll post screenshots before and after. Thanks!"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1571841557, "post_id": 58524654, "comment_id": 103375520, "body": "@AlekseiMatiushkin Thanks! And oh correction from my last comment, the first line: &quot;body&quot; was still breaking syntax highlighting but only when I used <code>&lt;&lt;-html2</code> inside <code>&lt;&lt;-html</code>. Didn&#39;t know I could nest them with same name (<code>&lt;&lt;-html</code>) (as screenshot above), so after I did, all was correctly highlighting now! :) Still looks a bit ugly, but a lot better!!!"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1571842650, "post_id": 58524654, "comment_id": 103376111, "body": "@AlekseiMatiushkin oh! When I closed the <code>.rb</code> file in Atom, and reopened it again, the syntax highlighting still breaks (I&#39;ll upload another screenshot)! xD But thanks a lot! This should be fine for now."}], "answers": [{"tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": false, "score": 0, "last_activity_date": 1573727872, "last_edit_date": 1573727872, "creation_date": 1572956614, "answer_id": 58711307, "question_id": 58524654, "link": "https://stackoverflow.com/questions/58524654/how-to-use-multiline-string-here-doc-with-interpolation-using-enumerable-or-loop/58711307#58711307", "title": "How to use multiline-string here-doc with interpolation using enumerable or loop blocks", "body": "<p>Won't mark this solved as this isn't a direct answer to my question, but is a direct solution to my problem, as I still wasn't able to solve this in pure here-doc, but that I was able to solve my problem upon a realisation that I can also use ERB inline with here-doc string. But, if it helps anyone, here:</p>\n\n<pre><code>require 'erb'\n\ngreetings = ['Hello World', 'Hello Earth', 'Hello Mars']\n\nbody = ERB.new(\n  &lt;&lt;-html\n  &lt;html&gt;\n    &lt;body&gt;\n      &lt;ul&gt;\n        &lt;% greetings.each do |greeting| %&gt;\n          &lt;li&gt;&lt;%= greeting %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/body&gt;\n  &lt;/html&gt;\n  html\n).result(binding)\n\nputs body\n#  &lt;html&gt;\n#    &lt;body&gt;\n#      &lt;ul&gt;\n#        \n#          &lt;li&gt;Hello World&lt;/li&gt;\n#        \n#          &lt;li&gt;Hello Earth&lt;/li&gt;\n#        \n#          &lt;li&gt;Hello Mars&lt;/li&gt;\n#        \n#      &lt;/ul&gt;\n#    &lt;/body&gt;\n#  &lt;/html&gt;\n</code></pre>\n\n<p><em>P.S. To be able to indent code without affecting the here-doc string, and if you are using Ruby >= 2.3, it's better to use the squiggly-heredoc literal: <a href=\"https://ruby-doc.org/core-2.3.0/doc/syntax/literals_rdoc.html\" rel=\"nofollow noreferrer\"><code>&lt;&lt;~</code></a>. However, if you're using Ruby &lt; 2.3 but are using Rails, you can use the <a href=\"https://apidock.com/rails/String/strip_heredoc\" rel=\"nofollow noreferrer\"><code>.strip_heredoc</code></a> instead.</em></p>\n"}], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 394, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573727872, "creation_date": 1571839363, "last_edit_date": 1571842789, "question_id": 58524654, "link": "https://stackoverflow.com/questions/58524654/how-to-use-multiline-string-here-doc-with-interpolation-using-enumerable-or-loop", "title": "How to use multiline-string here-doc with interpolation using enumerable or loop blocks", "body": "<p>I want to simulate the usage of ERB templates using blocks into multiline-heredoc in Ruby:</p>\n\n<h2>Example:</h2>\n\n<h3>From:</h3>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;html&gt;\n  &lt;body&gt;\n    &lt;ul&gt;\n      &lt;% @greetings.each do |greeting| %&gt;\n        &lt;li&gt;&lt;%= greeting %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n    &lt;/ul&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<h3>Into:</h3>\n\n<pre><code>greetings = ['Hello World', 'Hello Earth', 'Hello Mars']\n\nbody = (\n  &lt;&lt;-eos\n  &lt;html&gt;\n    &lt;body&gt;\n      &lt;ul&gt;\n        #{\n        greetings.map do |greeting|\n          &lt;&lt;-eos2\n          &lt;li&gt;#{greeting}&lt;/li&gt;\n          eos2\n        end.join\n        }\n      &lt;/ul&gt;\n    &lt;/body&gt;\n  &lt;/html&gt;\n  eos\n)\n\n</code></pre>\n\n<p>^ The above seems to work, but it breaks the syntax highlighting in Atom, and looks very messy to me. Perhaps there's an easier way I hope?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>puts body\n#  &lt;html&gt;\n#    &lt;body&gt;\n#      &lt;ul&gt;\n#        &lt;li&gt;Hello World&lt;/li&gt;\n#&lt;li&gt;Hello Earth&lt;/li&gt;\n#&lt;li&gt;Hello Mars&lt;/li&gt;\n#\n#      &lt;/ul&gt;\n#    &lt;/body&gt;\n#  &lt;/html&gt;\n</code></pre>\n\n<h3>Background:</h3>\n\n<ul>\n<li>I am writing inline into the <code>.rb</code> file multiline-string of \"example\" html values using <code>factory_bot</code></li>\n</ul>\n\n<h3>Other Attempt:</h3>\n\n<p>Tried below, but I'm getting syntax errors:</p>\n\n<pre><code>greetings = ['Hello World', 'Hello Earth', 'Hello Mars']\n\nbody = (\n  &lt;&lt;-eos\n  &lt;html&gt;\n    &lt;body&gt;\n      &lt;ul&gt;\n        #{greetings.each do |greeting|}\n          &lt;li&gt;#{greeting}&lt;/li&gt;\n        #{end}\n      &lt;/ul&gt;\n    &lt;/body&gt;\n  &lt;/html&gt;\n  eos\n)\n</code></pre>\n\n<p><em>P.S. I am aware that I can move the whole thing into an <code>.erb</code> file, but I am more curious to know if there's a way to do it inline, i.e. (for very short strings that need not be moved into a separate <code>.erb</code></em></p>\n\n<h2>Update:</h2>\n\n<p>Thanks to @AlekseiMatiushkin, I resolved the syntax highlighting, I'll still open this question up, just in case anyone finds a simpler way, to do the looping:</p>\n\n<h3>Before:</h3>\n\n<p><a href=\"https://i.stack.imgur.com/mj2D8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mj2D8.png\" alt=\"enter image description here\"></a></p>\n\n<h3>After:</h3>\n\n<p><a href=\"https://i.stack.imgur.com/4MLE5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4MLE5.png\" alt=\"enter image description here\"></a></p>\n\n<p>^ also, I thought that I had to use <code>&lt;&lt;-html2</code> inside the <code>&lt;&lt;-html</code> block, because I thought it would break it, but seems like nested <code>&lt;&lt;-html</code> still worked, so, good! :)</p>\n\n<h2>Update:</h2>\n\n<p>Unfortunately, reopening the file caused the syntax highlighting to break again. But, I guess, this should be fine for now :)</p>\n\n<p><a href=\"https://i.stack.imgur.com/DuqEM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DuqEM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1571835490, "post_id": 58522930, "comment_id": 103371778, "body": "This is typo mistake or ignorance."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6249508, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157114836095643/picture?type=large", "display_name": "Bj Petrie", "link": "https://stackoverflow.com/users/6249508/bj-petrie"}, "edited": false, "score": 0, "creation_date": 1571836219, "post_id": 58523103, "comment_id": 103372228, "body": "This makes sense. I&#39;ve updated my code, but my table is still blank. Any further suggestions?"}, {"owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "reply_to_user": {"reputation": 3, "user_id": 6249508, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157114836095643/picture?type=large", "display_name": "Bj Petrie", "link": "https://stackoverflow.com/users/6249508/bj-petrie"}, "edited": false, "score": 0, "creation_date": 1571836620, "post_id": 58523103, "comment_id": 103372522, "body": "How are platoon fields recorded in the database? Just a letter? Try to <code>@b_platoon = @users.where(platoon: &#39;B&#39;)</code>"}], "tags": [], "owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "is_accepted": true, "score": 0, "last_activity_date": 1571834859, "last_edit_date": 1571834859, "creation_date": 1571834467, "answer_id": 58523103, "question_id": 58522930, "link": "https://stackoverflow.com/questions/58522930/action-controllers-and-filtering/58523103#58523103", "title": "Action Controllers and filtering", "body": "<p>Use <code>b_platoon.your_field</code> instead <code>user.your_field</code>   </p>\n\n<pre><code>&lt;% @b_platoon.each do |b_platoon| %&gt;\n   &lt;tr&gt;\n      &lt;td&gt;&lt;%= b_platoon.name %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= b_platoon.reg_number %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= b_platoon.phone %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= b_platoon.alt_phone %&gt;&lt;/td&gt;\n   &lt;/tr&gt; \n&lt;% end %&gt;\n</code></pre>\n\n<p>You must call methods on <em>enumerator</em> in a <code>.each</code></p>\n"}], "owner": {"reputation": 3, "user_id": 6249508, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157114836095643/picture?type=large", "display_name": "Bj Petrie", "link": "https://stackoverflow.com/users/6249508/bj-petrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 58523103, "answer_count": 1, "score": 0, "last_activity_date": 1571836625, "creation_date": 1571833860, "last_edit_date": 1571836625, "question_id": 58522930, "link": "https://stackoverflow.com/questions/58522930/action-controllers-and-filtering", "title": "Action Controllers and filtering", "body": "<p>I'm developing an app where an admin can see a group of users in HTML tables that are filtered by \":platoon => A,B,C,D\"</p>\n\n<p>All users are stored in a \"users model\" and I'm trying to have multiple HTML tables on one page showing only the users associated to that platoon.</p>\n\n<p>UsersController:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def index\n    @users = User.all\n    @a_platoon = @users.where(:platoon =&gt; @A)\n    @b_platoon = @users.where(:platoon =&gt; @B)\n    @c_platoon = @users.where(:platoon =&gt; @C)\n    @d_platoon = @users.where(:platoon =&gt; @D)\n  end\nend\n</code></pre>\n\n<p>and in my index.html.erb:</p>\n\n<pre><code>&lt;thead&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Name&lt;/th&gt;\n    &lt;th&gt;Reg Number&lt;/th&gt;\n    &lt;th&gt;Phone&lt;/th&gt;\n    &lt;th&gt;Alt Phone&lt;/th&gt;\n    &lt;th colspan=\"7\"&gt;&lt;/th&gt;\n  &lt;/tr&gt;\n&lt;/thead&gt;\n\n&lt;tbody&gt;\n  &lt;% @b_platoon.each do |b_platoon| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= b_platoon.name %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= b_platoon.reg_number %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= b_platoon.phone %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= b_platoon.alt_phone %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>The goal here is to display all the users associated with b_platoon.</p>\n\n<p>I'm not getting any errors, but my table just displays blank. I believe my problem lies in the controller methods but I'm not skilled enough to find it and I struggled with finding helpful documentation.</p>\n\n<p>If it may help, heres my schema for my \"Users\" model:</p>\n\n<pre><code>create_table \"users\", force: :cascade do |t|\n  t.string \"email\", default: \"\", null: false\n  t.string \"encrypted_password\", default: \"\", null: false\n  t.string \"reset_password_token\"\n  t.datetime \"reset_password_sent_at\"\n  t.datetime \"remember_created_at\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.string \"name\"\n  t.integer \"reg_number\"\n  t.string \"platoon\"\n  t.string \"phone\"\n  t.string \"alt_phone\"\n  t.boolean \"admin\", default: false\n  t.index [\"email\"], name: \"index_users_on_email\", unique: true\n  t.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\nend\n</code></pre>\n"}, {"tags": ["ruby", "activesupport"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1571832196, "post_id": 58522384, "comment_id": 103369957, "body": "Ruby is pass-by-value/copy. But in case of complex objects, the original value and its copy are references to an object somewhere else."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1571832283, "post_id": 58522384, "comment_id": 103370011, "body": "The rule of thumb is <b>never ever</b> use mutating methods."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1571832342, "post_id": 58522384, "comment_id": 103370042, "body": "@AlekseiMatiushkin: sometimes you have to, for performance reasons. But yes, this is a good default rule"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1571832567, "post_id": 58522384, "comment_id": 103370161, "body": "@SergioTulentsev Not with you, why? In general."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1571832652, "post_id": 58522384, "comment_id": 103370225, "body": "BTW, is <code>Hash#except!</code> valid <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a>? What version?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1571832891, "post_id": 58522384, "comment_id": 103370372, "body": "@AlekseiMatiushkin: here you go: <a href=\"https://pastebin.com/c84na4FS\" rel=\"nofollow noreferrer\">pastebin.com/c84na4FS</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1571833440, "post_id": 58522384, "comment_id": 103370669, "body": "(it gets worse with bigger strings)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1571834006, "post_id": 58522384, "comment_id": 103370978, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/201318/discussion-between-aleksei-matiushkin-and-sergio-tulentsev\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1571832221, "post_id": 58522420, "comment_id": 103369974, "body": "Or simply don&#39;t use mutating <code>except!</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1571832370, "post_id": 58522420, "comment_id": 103370063, "body": "Here <code>@name.dup</code> would be enough."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1571832464, "post_id": 58522420, "comment_id": 103370101, "body": "@AlekseiMatiushkin: until someone decides to mangle the values :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1571832542, "post_id": 58522420, "comment_id": 103370145, "body": "@SergioTulentsev \u201chere\u201d is a keyword. I apparently know how <code>dup</code> works :-P"}], "tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": false, "score": 0, "last_activity_date": 1571832104, "creation_date": 1571832104, "answer_id": 58522420, "question_id": 58522384, "link": "https://stackoverflow.com/questions/58522384/instance-variables-assign-value-by-reference-in-ruby/58522420#58522420", "title": "Instance variables assign value by reference in ruby", "body": "<p>You need to <code>deep copy</code>. Try this:</p>\n\n<pre><code>name = Marshal.load(Marshal.dump(@name))\n\nname.except!(:a)\np name\n#=&gt; { :b =&gt; \"sdfsd\" }\np @name\n#=&gt; { :a =&gt; \"sfgs\", :b =&gt; \"sdfsd\" }\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12042238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YhpxvAbMGJk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcl5eOkRMLg8Ws-pk27rP5NaFzYbA/photo.jpg?sz=128", "display_name": "Mr Movies Tamil", "link": "https://stackoverflow.com/users/12042238/mr-movies-tamil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571833824, "creation_date": 1571831942, "last_edit_date": 1571833824, "question_id": 58522384, "link": "https://stackoverflow.com/questions/58522384/instance-variables-assign-value-by-reference-in-ruby", "title": "Instance variables assign value by reference in ruby", "body": "<p>I have a doubt that in ruby whether all the objects in ruby pass or assign value by reference. Because when I tried to assign a instance variable to local. Changes made to local affects in instance variable too.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>@name = {:a=&gt; 'sfgs', :b=&gt; 'sdfsd'}\nname = @name\nname.except!(:a) \n</code></pre>\n\n<p>when I print @name the :a key-value pair has been deleted. If so, any other way to prevent this. i.e Copying instance variable without reference.</p>\n"}, {"tags": ["ruby", "macos", "sass", "rvm", "compass"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9675324, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m7q8TWrb3hg/AAAAAAAAAAI/AAAAAAAAANk/Bqt0O_bFLPM/photo.jpg?sz=128", "display_name": "Alessandro Casazza", "link": "https://stackoverflow.com/users/9675324/alessandro-casazza"}, "reply_to_user": {"reputation": 523, "user_id": 3298024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJC6k.png?s=128&g=1", "display_name": "Oleksa O.", "link": "https://stackoverflow.com/users/3298024/oleksa-o"}, "edited": false, "score": 0, "creation_date": 1572359367, "post_id": 58525248, "comment_id": 103529550, "body": "\ud83d\ude1eDo you have fix it?"}, {"owner": {"reputation": 523, "user_id": 3298024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJC6k.png?s=128&g=1", "display_name": "Oleksa O.", "link": "https://stackoverflow.com/users/3298024/oleksa-o"}, "edited": false, "score": 0, "creation_date": 1572363299, "post_id": 58525248, "comment_id": 103531866, "body": "yep, see the solution below"}], "tags": [], "owner": {"reputation": 1, "user_id": 9675324, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m7q8TWrb3hg/AAAAAAAAAAI/AAAAAAAAANk/Bqt0O_bFLPM/photo.jpg?sz=128", "display_name": "Alessandro Casazza", "link": "https://stackoverflow.com/users/9675324/alessandro-casazza"}, "is_accepted": false, "score": 0, "last_activity_date": 1571841247, "creation_date": 1571841247, "answer_id": 58525248, "question_id": 58521363, "link": "https://stackoverflow.com/questions/58521363/getting-error-on-compass-compile-after-upgrading-to-catalina/58525248#58525248", "title": "Getting Error on &quot;compass compile&quot; after upgrading to Catalina", "body": "<p>I had the similar problem, you can try to launch\n<code>xcode-select --install</code>\nand after add</p>\n\n<pre><code>export CPATH=\"/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include\"\nexport SDKROOT=\"/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk\"\n</code></pre>\n\n<p>to your <code>.bash_profile</code></p>\n"}, {"tags": [], "owner": {"reputation": 523, "user_id": 3298024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJC6k.png?s=128&g=1", "display_name": "Oleksa O.", "link": "https://stackoverflow.com/users/3298024/oleksa-o"}, "is_accepted": true, "score": 0, "last_activity_date": 1571909077, "last_edit_date": 1571909077, "creation_date": 1571849434, "answer_id": 58527624, "question_id": 58521363, "link": "https://stackoverflow.com/questions/58521363/getting-error-on-compass-compile-after-upgrading-to-catalina/58527624#58527624", "title": "Getting Error on &quot;compass compile&quot; after upgrading to Catalina", "body": "<p>The problem was solved by importing the entire compass library into my project from the following Compass' repository: <a href=\"https://github.com/Compass/compass\" rel=\"nofollow noreferrer\">https://github.com/Compass/compass</a>\nThe library is located here: <a href=\"https://github.com/Compass/compass/tree/stable/core/stylesheets\" rel=\"nofollow noreferrer\">https://github.com/Compass/compass/tree/stable/core/stylesheets</a></p>\n"}], "owner": {"reputation": 523, "user_id": 3298024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VJC6k.png?s=128&g=1", "display_name": "Oleksa O.", "link": "https://stackoverflow.com/users/3298024/oleksa-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 58527624, "answer_count": 2, "score": 0, "last_activity_date": 1571909077, "creation_date": 1571828450, "question_id": 58521363, "link": "https://stackoverflow.com/questions/58521363/getting-error-on-compass-compile-after-upgrading-to-catalina", "title": "Getting Error on &quot;compass compile&quot; after upgrading to Catalina", "body": "<p>Looking for the solution, since I'm now out of ideas how to fix that.\nBefore I upgraded my Mac OS X to Catalina everything was fine.</p>\n\n<p>What I tried already:</p>\n\n<ul>\n<li>removed ruby <code>sudo rvm implode</code> and all the relations</li>\n<li>reinstalled <code>rvm</code></li>\n<li>reinstalled sass</li>\n<li>reinstalled compass</li>\n</ul>\n\n<p>Any input would be much appreciated.\nHere is the full backtrace after running the command <code>compass compile</code>:</p>\n\n<pre><code>Errno::EROFS on line [\"239\"] of /Users/admin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/fileutils.rb: Read-only file system @ dir_s_mkdir - /c\n  /Users/admin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/fileutils.rb:239:in `fu_mkdir'\n  /Users/admin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/fileutils.rb:217:in `block (2 levels) in mkdir_p'\n  /Users/admin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/fileutils.rb:215:in `reverse_each'\n  /Users/admin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/fileutils.rb:215:in `block in mkdir_p'\n  /Users/admin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/fileutils.rb:200:in `each'\n  /Users/admin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/fileutils.rb:200:in `mkdir_p'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/cache_stores/filesystem.rb:38:in `_store'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/cache_stores/base.rb:51:in `store'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/cache_stores/chain.rb:19:in `block in store'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/cache_stores/chain.rb:19:in `each'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/cache_stores/chain.rb:19:in `store'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/engine.rb:420:in `_to_tree'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/engine.rb:315:in `to_tree'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/plugin/staleness_checker.rb:184:in `tree'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/plugin/staleness_checker.rb:174:in `compute_dependencies'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/plugin/staleness_checker.rb:149:in `dependencies'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/plugin/staleness_checker.rb:125:in `dependencies_stale?'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/plugin/staleness_checker.rb:166:in `block in dependency_updated?'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/plugin/staleness_checker.rb:81:in `stylesheet_modified_since?'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/plugin/staleness_checker.rb:69:in `stylesheet_needs_update?'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/plugin/compiler.rb:211:in `block in update_stylesheets'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/plugin/compiler.rb:209:in `each'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/sass-3.4.25/lib/sass/plugin/compiler.rb:209:in `update_stylesheets'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/compass-1.0.3/lib/compass/sass_compiler.rb:40:in `compile!'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/compass-1.0.3/lib/compass/commands/update_project.rb:49:in `perform'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/compass-1.0.3/lib/compass/commands/base.rb:18:in `execute'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/compass-1.0.3/lib/compass/commands/project_base.rb:19:in `execute'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/compass-1.0.3/lib/compass/exec/sub_command_ui.rb:43:in `perform!'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/compass-1.0.3/lib/compass/exec/sub_command_ui.rb:15:in `run!'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/compass-1.0.3/bin/compass:30:in `block in &lt;top (required)&gt;'\n  /Users/admin/.rvm/gems/ruby-2.6.3/gems/compass-1.0.3/bin/compass:44:in `&lt;top (required)&gt;'\n  /Users/admin/.rvm/gems/ruby-2.6.3/bin/compass:23:in `load'\n  /Users/admin/.rvm/gems/ruby-2.6.3/bin/compass:23:in `&lt;main&gt;'\n  /Users/admin/.rvm/gems/ruby-2.6.3/bin/ruby_executable_hooks:24:in `eval'\n  /Users/admin/.rvm/gems/ruby-2.6.3/bin/ruby_executable_hooks:24:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1571827065, "post_id": 58520813, "comment_id": 103367186, "body": "If your hashes are big and you need both lookups to be fast and you&#39;ll be doing a lot of them, create two hashes."}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1571827089, "post_id": 58520813, "comment_id": 103367197, "body": "Only 400 total entries"}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571827336, "post_id": 58520813, "comment_id": 103367327, "body": "@SebastianPalma, I explained in the edit why my question is different."}], "answers": [{"comments": [{"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1571827051, "post_id": 58520923, "comment_id": 103367179, "body": "What about the complexity?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 1, "creation_date": 1571827178, "post_id": 58520923, "comment_id": 103367242, "body": "@Bhawan: it&#39;s exactly what you think it&#39;d be :) Definitely no O(1) here."}, {"owner": {"reputation": 1534, "user_id": 4453714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fv4Fb.jpg?s=128&g=1", "display_name": "Yurii Verbytskyi", "link": "https://stackoverflow.com/users/4453714/yurii-verbytskyi"}, "edited": false, "score": 0, "creation_date": 1571827287, "post_id": 58520923, "comment_id": 103367289, "body": "&gt; I may be provided with an array of values or array of keys instead. Solution is depend on what you have to find in this case"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1571827386, "post_id": 58520923, "comment_id": 103367352, "body": "@Bhawan If your search by value, is single time then this is most preffered way."}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1571827523, "post_id": 58520923, "comment_id": 103367411, "body": "@SergioTulentsev, it is less than O(n) ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1571827550, "post_id": 58520923, "comment_id": 103367424, "body": "@Bhawan: no, it&#39;s not. How can it?"}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1571827799, "post_id": 58520923, "comment_id": 103367577, "body": "@SergioTulentsev, I agree. My bad."}], "tags": [], "owner": {"reputation": 1534, "user_id": 4453714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fv4Fb.jpg?s=128&g=1", "display_name": "Yurii Verbytskyi", "link": "https://stackoverflow.com/users/4453714/yurii-verbytskyi"}, "is_accepted": false, "score": 3, "last_activity_date": 1571827097, "last_edit_date": 1571827097, "creation_date": 1571826941, "answer_id": 58520923, "question_id": 58520813, "link": "https://stackoverflow.com/questions/58520813/two-way-lookup-of-id-vs-name-ruby/58520923#58520923", "title": "Two way lookup of id vs name ruby", "body": "<p>You can get your key this way:\n<code>hash.key(value) =&gt; key</code>\n<a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-key\" rel=\"nofollow noreferrer\">Hash#key</a></p>\n\n<pre><code>h = { 1 =&gt; 'ABC', 3 =&gt; 'DEF' }\nputs h.key('DEF')\n#=&gt; 3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1571827180, "post_id": 58520954, "comment_id": 103367245, "body": "It is creating a new hash internally."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1571827297, "post_id": 58520954, "comment_id": 103367295, "body": "@Bhawan Yes, if your &#39;reverse lookup&#39; is getting used no. of times then you should prefer to use this solution which will initially take time to reverse &amp; later you can search many keys by value."}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1571827639, "post_id": 58520954, "comment_id": 103367477, "body": "I need to do the reverse lookup the same number of times as the forward one. So, I am accepting this answer as the best one."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1571845979, "post_id": 58520954, "comment_id": 103377859, "body": "<code>h.values_at(*ar_of_keys)</code> for getting multiple values"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 3, "last_activity_date": 1571827022, "creation_date": 1571827022, "answer_id": 58520954, "question_id": 58520813, "link": "https://stackoverflow.com/questions/58520813/two-way-lookup-of-id-vs-name-ruby/58520954#58520954", "title": "Two way lookup of id vs name ruby", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-1.9.3/Hash.html#method-i-invert\" rel=\"nofollow noreferrer\">Hash#invert</a> as below,</p>\n\n<pre><code>reversed_h = h.invert\n\nreversed_h['DEF']\n# =&gt; 3\n</code></pre>\n"}], "owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 58520954, "answer_count": 2, "score": 3, "last_activity_date": 1571829146, "creation_date": 1571826573, "last_edit_date": 1571829146, "question_id": 58520813, "link": "https://stackoverflow.com/questions/58520813/two-way-lookup-of-id-vs-name-ruby", "title": "Two way lookup of id vs name ruby", "body": "<p>I have a hash in which <code>id</code> is the key and <code>name</code> is the value. Both <code>id and value are unique</code>. </p>\n\n<p>Something like this:</p>\n\n<pre><code>h[1] = \"ABC\"\nh[3] = \"DEF\"\n</code></pre>\n\n<p>So, if I am given the key of 1, I can easily return a value \"ABC\".</p>\n\n<p>I need to do a <code>reverse lookup</code> as well, which means if I am given a value of \"DEF\", I should return 3.</p>\n\n<p>Also, instead of a single value or single key to do the lookup,  <br>\nI may be provided with an array of values or array of keys instead. </p>\n\n<p>Should I implement two hashes, one for each, or is there any other way in ruby or rails to achieve that?</p>\n\n<p><strong>Edit:</strong> This question is <strong>not related to finding a key by its value</strong> in a hash. It is related to doing a two way lookup not in O(n) time with a better method other than creating two separate hashes. </p>\n"}, {"tags": ["ruby", "typhoeus"], "answers": [{"tags": [], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "is_accepted": true, "score": 2, "last_activity_date": 1571827641, "creation_date": 1571827641, "answer_id": 58521128, "question_id": 58520336, "link": "https://stackoverflow.com/questions/58520336/is-http-2-supported-in-typhoeus/58521128#58521128", "title": "Is HTTP/2 supported in Typhoeus", "body": "<p>Yes, it's supported, according to <a href=\"https://github.com/typhoeus/typhoeus/issues/628#issuecomment-496976697\" rel=\"nofollow noreferrer\">https://github.com/typhoeus/typhoeus/issues/628#issuecomment-496976697</a> you can create an HTTP2 request with:</p>\n\n<p><code>response = Typhoeus.get(\"https://nghttp2.org\", http_version: :httpv2_0, verbose: true)</code></p>\n\n<p>and you can check the HTTP version with:\n<code>response.http_version</code>\n<code>=&gt; \"2\"</code></p>\n\n<p>Remember that Typhoeus use libcurl and it has support for HTTP/2, but the underlying cUrl version needs to have support compiled in, so you use an old version, your results may vary.</p>\n"}], "owner": {"reputation": 443, "user_id": 4288922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxPcM.jpg?s=128&g=1", "display_name": "Aleks Boev", "link": "https://stackoverflow.com/users/4288922/aleks-boev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 58521128, "answer_count": 1, "score": 1, "last_activity_date": 1571827641, "creation_date": 1571824965, "question_id": 58520336, "link": "https://stackoverflow.com/questions/58520336/is-http-2-supported-in-typhoeus", "title": "Is HTTP/2 supported in Typhoeus", "body": "<p>I cannot find any information about support HTTP/2 features in Typhoeus gem. Is this fully compatible or not?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571820943, "post_id": 58519029, "comment_id": 103363952, "body": "Add the whole server logs at the moment of doing the request. Also, check <code>RecoedNotFound </code> as is misspelled (must be <code>RecordNotFound</code>)."}, {"owner": {"reputation": 53, "user_id": 12261013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47d3c4afed1098afa6db1509eca1871?s=128&d=identicon&r=PG&f=1", "display_name": "sinzanmono46", "link": "https://stackoverflow.com/users/12261013/sinzanmono46"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571823080, "post_id": 58519029, "comment_id": 103365093, "body": "@SebastianPalma You were right about the spellmiss. Thank you very much.But still got an error. I changed my question to the appear error. I really appreciate it if you could look through it."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571823973, "post_id": 58519029, "comment_id": 103365613, "body": "Are you sure you have a LineItem with id 2?"}, {"owner": {"reputation": 53, "user_id": 12261013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47d3c4afed1098afa6db1509eca1871?s=128&d=identicon&r=PG&f=1", "display_name": "sinzanmono46", "link": "https://stackoverflow.com/users/12261013/sinzanmono46"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571824568, "post_id": 58519029, "comment_id": 103365931, "body": "@SebastianPalma When I used binding.pry, <code>@line_item</code> was nil. so I think that I don&#39;t have it. But don&#39;t know how to fix it."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571824842, "post_id": 58519029, "comment_id": 103366068, "body": "The error is <code>RecordNotFound</code>, so if you create a record (making sure it has an id 2) there won&#39;t be error"}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1571828247, "post_id": 58519029, "comment_id": 103367791, "body": "Earlier in the log you have a routing issue (probably your form declaration is wrong), thus your controller isn&#39;t actually being called and won&#39;t be creating the line_item. I&#39;m guessing you are doing a form submission followed by a GET (irrespective of whether or not the form submission worked) and it&#39;s that GET that is giving you the misleading &#39;record not found&#39; error."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 12261013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47d3c4afed1098afa6db1509eca1871?s=128&d=identicon&r=PG&f=1", "display_name": "sinzanmono46", "link": "https://stackoverflow.com/users/12261013/sinzanmono46"}, "edited": false, "score": 0, "creation_date": 1571823445, "post_id": 58519209, "comment_id": 103365322, "body": "Thank you for your advise.You were right about the spellmiss. But also got another error....   I edited to the new appearing error. Could you please tell me the reason of this error?"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 0, "last_activity_date": 1571821469, "creation_date": 1571821469, "answer_id": 58519209, "question_id": 58519029, "link": "https://stackoverflow.com/questions/58519029/how-to-access-to-a-shopcart-couldnt-find-lineitem-with-id-2/58519209#58519209", "title": "How to access to a shopcart. Couldn&#39;t find LineItem with &#39;id&#39;=2", "body": "<p>You have a typo:</p>\n\n<pre><code>rescue ActiveRecord::RecoedNotFound\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>rescue ActiveRecord::RecordNotFound\n</code></pre>\n\n<p>Changing that will mean the rescue block gets hit, creates the card, and assigns it to your session. On another note, it's probably to just do:</p>\n\n<pre><code>module CurrentCart\n  private\n  def set_cart\n    if session[:cart_id] &amp;&amp; Cart.exists?(session[:card_id]\n      @cart = Cart.find(session[:cart_id])\n    else\n      @cart = Cart.create\n      session[:cart_id] = @cart.id\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 12261013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47d3c4afed1098afa6db1509eca1871?s=128&d=identicon&r=PG&f=1", "display_name": "sinzanmono46", "link": "https://stackoverflow.com/users/12261013/sinzanmono46"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 58519209, "answer_count": 1, "score": 0, "last_activity_date": 1571824255, "creation_date": 1571820825, "last_edit_date": 1592644375, "question_id": 58519029, "link": "https://stackoverflow.com/questions/58519029/how-to-access-to-a-shopcart-couldnt-find-lineitem-with-id-2", "title": "How to access to a shopcart. Couldn&#39;t find LineItem with &#39;id&#39;=2", "body": "<p>I'm making a Ecommerce site with rails.Trying to create a shopingcart.</p>\n<p>When I added ,</p>\n<p>include CurrentCart</p>\n<p>before_action :set_cart</p>\n<p>to my application_controller.rb , I got this error.\nI checked with the binding.pry, and the @line_item was nil.</p>\n<p>I really appreciate it if you could give me a hint to solve this problem.\nSorry for the long codes.</p>\n<h2>Error message</h2>\n<pre><code>ActiveRecord::RecordNotFound at /line_items/2\nCouldn't find LineItem with 'id'=2\n</code></pre>\n<h1>line_items.controller</h1>\n<pre><code>class LineItemsController &lt; ApplicationController\n include CurrentCart\n before_action :set_line_item, only: [:show, :edit, :update, :destroy]\n before_action :set_cart, only: [:create]\n\n \n def index\n   @line_items = LineItem.all\n end\n\n def show\n end\n\n def new\n   @line_item = LineItem.new\n end\n\n def edit\n end\n\n  def create\n   item = Item.find(params[:item_id])\n   @line_item = @cart.add_item(item)\n\n   respond_to do |format|\n     if @line_item.save\n       format.html { redirect_to @line_item.cart, notice: '\u30ab\u30b4\u306b\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f' }\n       format.json { render :show, status: :created, location: @line_item }\n     else\n       format.html { render :new }\n       format.json { render json: @line_item.errors, status: :unprocessable_entity }\n     end\n   end\n end\n\n def update\n   respond_to do |format|\n     if @line_item.update(line_item_params)\n       format.html { redirect_to @line_item, notice: 'Line item was successfully updated.' }\n       format.json { render :show, status: :ok, location: @line_item }\n     else\n       format.html { render :edit }\n       format.json { render json: @line_item.errors, status: :unprocessable_entity }\n     end\n   end\n end\n\n \n def destroy\n   @cart = Cart.find(session[:cart_id])\n   @line_item.destroy\n   respond_to do |format|\n     format.html { redirect_to cart_path(@cart), notice: 'Line item was successfully destroyed.' }\n     format.json { head :no_content }\n   end\n end\n\n private\n   def set_line_item    \n     @line_item = LineItem.find(params[:id]) #says that I have a problem here!\n   end\n\n   def line_item_params\n     params.require(:line_item).permit(:item_id)\n   end\nend\n\n</code></pre>\n<h1>current_cart.rb</h1>\n<pre><code>module CurrentCart\n  private\n  def set_cart\n    @cart = Cart.find(session[:cart_id])  \n  rescue ActiveRecord::RecoedNotFound\n    @cart = Cart.create\n    session[:cart_id] = @cart.id\n  end\nend\n\n</code></pre>\n<h1>items_controller</h1>\n<pre><code>class ItemsController &lt; ApplicationController\n  before_action :set_item, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n\n  def index\n    @items = Item.all.order(&quot;created_at desc&quot;)\n  end\n\n  def show\n  end\n\n  def new\n    @item = current_user.items.build\n  end\n\n  def edit\n  end\n\n \n  def create\n    @item = current_user.items.build(item_params)\n\n    respond_to do |format|\n      if @item.save\n        format.html { redirect_to @item, notice: 'Item was successfully created.' }\n        format.json { render :show, status: :created, location: @item }\n      else\n        format.html { render :new }\n        format.json { render json: @item.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @item.update(item_params)\n        format.html { redirect_to @item, notice: 'Item was successfully updated.' }\n        format.json { render :show, status: :ok, location: @item }\n      else\n        format.html { render :edit }\n        format.json { render json: @item.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @item.destroy\n    respond_to do |format|\n      format.html { redirect_to items_url, notice: 'Item was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    def set_item\n      @item = Item.find(params[:id])\n    end\n\n    def item_params\n      params.require(:item).permit(:brand, :model, :description, :condition, :finish, :title, :price, :image)\n    end\nend\n\n</code></pre>\n<h1>application.controller</h1>\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  include CurrentCart\n  before_action :set_cart\n \nend\n\n</code></pre>\n<h1>routes</h1>\n<pre><code>Rails.application.routes.draw do\n  resources :line_items\n  resources :carts\n  resources :items\n  devise_for :users, controllers:{\n  registrations: 'registrations'\n  }\n  root 'items#index'\n  devise_scope :user do\n    get '/users/sign_out' =&gt; 'devise/sessions#destroy'\n  end\nend\n\n</code></pre>\n<h1>Server log</h1>\n<pre><code>Started POST &quot;/line_items/2?item_id=2&quot; for ::1 at 2019-10-23 18:04:28 +0900\n   (0.4ms)  SET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483\n   (0.3ms)  SELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC\n  \nActionController::RoutingError (No route matches [POST] &quot;/line_items/2&quot;):\n  \nactionpack (6.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'\nweb-console (4.0.1) lib/web_console/middleware.rb:132:in `call_app'\nweb-console (4.0.1) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (4.0.1) lib/web_console/middleware.rb:17:in `catch'\nweb-console (4.0.1) lib/web_console/middleware.rb:17:in `call'\nactionpack (6.0.0) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'\nrailties (6.0.0) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (6.0.0) lib/rails/rack/logger.rb:26:in `block in call'\nactivesupport (6.0.0) lib/active_support/tagged_logging.rb:80:in `block in tagged'\nactivesupport (6.0.0) lib/active_support/tagged_logging.rb:28:in `tagged'\nactivesupport (6.0.0) lib/active_support/tagged_logging.rb:80:in `tagged'\nrailties (6.0.0) lib/rails/rack/logger.rb:26:in `call'\nsprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (6.0.0) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'\nactionpack (6.0.0) lib/action_dispatch/middleware/request_id.rb:27:in `call'\nrack (2.0.7) lib/rack/method_override.rb:22:in `call'\nrack (2.0.7) lib/rack/runtime.rb:22:in `call'\nactivesupport (6.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'\nactionpack (6.0.0) lib/action_dispatch/middleware/executor.rb:14:in `call'\nactionpack (6.0.0) lib/action_dispatch/middleware/static.rb:126:in `call'\nrack (2.0.7) lib/rack/sendfile.rb:111:in `call'\nactionpack (6.0.0) lib/action_dispatch/middleware/host_authorization.rb:83:in `call'\nwebpacker (4.0.7) lib/webpacker/dev_server_proxy.rb:29:in `perform_request'\nrack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'\nrailties (6.0.0) lib/rails/engine.rb:526:in `call'\npuma (3.12.1) lib/puma/configuration.rb:227:in `call'\npuma (3.12.1) lib/puma/server.rb:660:in `handle_request'\npuma (3.12.1) lib/puma/server.rb:474:in `process_client'\npuma (3.12.1) lib/puma/server.rb:334:in `block in run'\npuma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'\nStarted GET &quot;/line_items/2?item_id=2&quot; for ::1 at 2019-10-23 18:04:52 +0900\nProcessing by LineItemsController#show as HTML\n  Parameters: {&quot;item_id&quot;=&gt;&quot;2&quot;, &quot;id&quot;=&gt;&quot;2&quot;}\n  LineItem Load (0.4ms)  SELECT `line_items`.* FROM `line_items` WHERE `line_items`.`id` = 2 LIMIT 1\n  \u21b3 app/controllers/line_items_controller.rb:61:in `set_line_item'\nCompleted 404 Not Found in 87ms (ActiveRecord: 3.5ms | Allocations: 20765)\n\n\n\nActiveRecord::RecordNotFound - Couldn't find LineItem with 'id'=2:\n  app/controllers/line_items_controller.rb:61:in `set_line_item'\n\nStarted POST &quot;/__better_errors/691901ca03d27e6b/variables&quot; for ::1 at 2019-10-23 18:04:53 +0900\n\n\n</code></pre>\n"}, {"tags": ["ruby", "puppet"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 2, "creation_date": 1571820350, "post_id": 58518571, "comment_id": 103363652, "body": "Have you checked out the readme file in the directory?"}, {"owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "edited": false, "score": 0, "creation_date": 1571823289, "post_id": 58518571, "comment_id": 103365218, "body": "The document is buggy here. You have to build <code>facter</code> from scratch like any other normal C++ lib."}], "owner": {"reputation": 3843, "user_id": 7693832, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/2c0da9e13f9bb292355a6d48bd9300f6?s=128&d=identicon&r=PG&f=1", "display_name": "244boy", "link": "https://stackoverflow.com/users/7693832/244boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571819104, "creation_date": 1571819104, "last_edit_date": 1592644375, "question_id": 58518571, "link": "https://stackoverflow.com/questions/58518571/there-is-no-install-rb-file-in-the-decompressed-facter-directory", "title": "There is no ` install.rb ` file in the decompressed facter directory", "body": "<p>I follow the <a href=\"https://puppet.com/docs/puppet/3.8/install_tarball.html#step-2-download-puppet-and-its-dependencies\" rel=\"nofollow noreferrer\">document</a>:</p>\n<blockquote>\n<p>Unarchive the Facter, Hiera, and Puppet tarballs, then navigate to each resulting directory and run:</p>\n<blockquote>\n<p>sudo ruby install.rb</p>\n</blockquote>\n</blockquote>\n<p>I download this <a href=\"https://downloads.puppetlabs.com/facter/facter-3.9.6.tar.gz\" rel=\"nofollow noreferrer\">facter file tar.gz</a>, and decompress it:</p>\n<pre><code>[root@localhost facter-3.9.6]# ll\ntotal 56\ndrwxr-xr-x. 2 22002 624 4096 Apr 13  2018 cmake\n-rw-r--r--. 1 22002 624 6961 Apr 13  2018 CMakeLists.txt\n-rw-r--r--. 1 22002 624 4434 Apr 13  2018 CONTRIBUTING.md\ndrwxr-xr-x. 2 22002 624   43 Apr 13  2018 exe\ndrwxr-xr-x. 5 22002 624   96 Apr 13  2018 ext\n-rw-r--r--. 1 22002 624 5070 Apr 13  2018 Extensibility.md\ndrwxr-xr-x. 9 22002 624 4096 Apr 13  2018 lib\n-rw-r--r--. 1 22002 624  694 Apr 13  2018 LICENSE\ndrwxr-xr-x. 2 22002 624   44 Apr 13  2018 locales\n-rw-r--r--. 1 22002 624  745 Apr 13  2018 MAINTAINERS\ndrwxr-xr-x. 3 22002 624   17 Apr 13  2018 man\n-rw-r--r--. 1 22002 624 1404 Apr 13  2018 Rakefile\n-rw-r--r--. 1 22002 624 9197 Apr 13  2018 README.md\ndrwxr-xr-x. 2 22002 624   46 Apr 13  2018 scripts\n</code></pre>\n<p>But how can I install it?</p>\n<p>I can not install like <code>sudo ruby install.rb</code>, because there is no <code>install.rb</code> under the decompressed directory.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5", "soft-delete"], "answers": [{"tags": [], "owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "is_accepted": true, "score": 1, "last_activity_date": 1571826092, "creation_date": 1571826092, "answer_id": 58520682, "question_id": 58518107, "link": "https://stackoverflow.com/questions/58518107/soft-delete-has-and-belongs-to-many-association-using-discard-gem/58520682#58520682", "title": "Soft Delete has_and_belongs_to_many association using discard gem", "body": "<p>I don't think there's any gem that can soft delete a <code>has_and_belongs_to_many</code> relationship. The best way forward would probably be to refactor your relationship and make it explicit with <code>has_many :through</code>. This allows you to customize the relationship, e.g. with soft delete. The change is pretty straightforward:</p>\n\n<ol>\n<li>Create a migration to rename the join table.</li>\n<li>Create a new model and match the name of the table.</li>\n<li>Change <code>has_and_belongs_to_many</code> to <code>has_many :through</code>.</li>\n</ol>\n\n<p>You can then go ahead and follow discard's instructions to enable soft delete.</p>\n\n<p>Generally speaking, I would avoid <code>has_and_belongs_to_many</code> as much as possible. Sooner or later, I've always had to customize the join model and had to refactor the code. <code>has_many :through</code> is just slightly more work to set up initially, but it's so much more flexible down the road that it's worth the effort.</p>\n"}, {"tags": [], "owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "is_accepted": false, "score": 0, "last_activity_date": 1571898428, "creation_date": 1571898428, "answer_id": 58535344, "question_id": 58518107, "link": "https://stackoverflow.com/questions/58518107/soft-delete-has-and-belongs-to-many-association-using-discard-gem/58535344#58535344", "title": "Soft Delete has_and_belongs_to_many association using discard gem", "body": "<p>You can take a look at <a href=\"https://github.com/rubysherpas/paranoia\" rel=\"nofollow noreferrer\">paranoia</a> gem. This gem helps you to implement the soft delete functionality. If you don't want to use the gem then you can implement it manually.</p>\n\n<p>If you want to integrate manually the changes are simple:</p>\n\n<ul>\n<li><p>First, you need to add migration to add the column <code>deleted_at</code> as a <code>datetime</code> data field type.</p></li>\n<li><p>Then you can write scope to filter out the data the same as <code>paranoia</code> gem do e.g. <code>with_deleted</code> where you can check the <code>deleted_at IS NULL</code></p></li>\n<li><p>Whenever you delete any record you can set the <code>deleted_at</code>.</p></li>\n</ul>\n\n<p>I found one reference on StackOverflow you can refer it <a href=\"https://stackoverflow.com/questions/41188533/how-to-use-paranoia-gem-in-many-to-many-association/41188873\">How to use paranoia gem in many to many association</a> </p>\n\n<p>hope it will help you</p>\n"}], "owner": {"reputation": 973, "user_id": 1659370, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6d120a0452ccef4756d5e1af5ae01383?s=128&d=identicon&r=PG", "display_name": "kashif", "link": "https://stackoverflow.com/users/1659370/kashif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 58520682, "answer_count": 2, "score": 1, "last_activity_date": 1571898428, "creation_date": 1571817347, "last_edit_date": 1571818270, "question_id": 58518107, "link": "https://stackoverflow.com/questions/58518107/soft-delete-has-and-belongs-to-many-association-using-discard-gem", "title": "Soft Delete has_and_belongs_to_many association using discard gem", "body": "<p>What is the best way to soft delete <strong>has_and_belongs_to_many</strong> associations using <strong>Discard</strong> Gem.\nWith this association, there is a join table in database but without actual Ruby on Rails Model.</p>\n\n<p>I'll try to explain via an example, lets say there are 2 models:</p>\n\n<pre><code>class Participant &lt; ApplicationRecord\n  has_and_belongs_to_many :company_employees\nend\n\n\nclass CompanyEmployee &lt; ApplicationRecord\n  has_and_belongs_to_many :participants\nend\n</code></pre>\n\n<blockquote>\n  <p>This will create company_employees_participants middle/join table in database BUT without any model in Ruby on Rails. Where i can make settings for discard gem ?</p>\n</blockquote>\n\n<p>Any idea how i can solve this requirement where we need to have soft delete in joined tables using has_and_belongs_to_many assocaition in discard gem ?</p>\n\n<p>discard gem: <a href=\"https://github.com/jhawthorn/discard\" rel=\"nofollow noreferrer\">https://github.com/jhawthorn/discard</a></p>\n\n<p>I'm using \n<strong>ruby 2.5.3, Rails 5.1.6, discard(1.0.0)</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "debugging"], "comments": [{"owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "edited": false, "score": 0, "creation_date": 1571816093, "post_id": 58517088, "comment_id": 103361580, "body": "You can go through application server logs. Maybe <code>grep</code> appropriately"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1571819188, "post_id": 58517088, "comment_id": 103363074, "body": "If you&#39;re looking for a quick hint and vaguely what&#39;s being rendered, then you can look at the log. But beyond that, there&#39;s not much more you can do besides <code>grep</code> (search for clues), learn how the application has been architectured through experience, or simply read the code and trace it through."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1571819243, "post_id": 58517088, "comment_id": 103363106, "body": "I mean... <i>&quot;Something that just prints out the methods and the views being rendered&quot;</i> -- this is literally what the log does. If it&#39;s logging insufficient information for you, then you can try tweaking the settings."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1571819332, "post_id": 58517088, "comment_id": 103363137, "body": "You can also look into using third party tools such as <a href=\"https://newrelic.com/\" rel=\"nofollow noreferrer\">newrelic</a>, but to be honest StackOverflow isn&#39;t an appropriate forum for promoting third party software like this."}], "owner": {"reputation": 1, "user_id": 5832628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86f09af03643ee0bd7706d23feaa470?s=128&d=identicon&r=PG&f=1", "display_name": "amrta", "link": "https://stackoverflow.com/users/5832628/amrta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571813820, "creation_date": 1571813820, "question_id": 58517088, "link": "https://stackoverflow.com/questions/58517088/how-do-i-keep-track-of-the-endpoints-being-hit-for-a-request", "title": "How do I keep track of the endpoints being hit for a request?", "body": "<p>I am a newbie Web/Rails developer. The codebase(uses multiple docker containers) that I have been provided with is quite vast and when I am assigned issues to solve, it is difficult to understand exactly which end points are being hit with every request.  Is there a simpler way to do this ? Something that just prints out the methods and the views being rendered</p>\n\n<p>I generally skim through the docker logs/rails log to get an idea but it can be very time consuming.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571821702, "post_id": 58516210, "comment_id": 103364365, "body": "It&#39;s a bit unfortunate that in your example, <code>30</code> is both, the day of the month and the increment value for <code>step</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571822259, "post_id": 58516210, "comment_id": 103364653, "body": "BTW it&#39;s not just February. Note that most of the other dates are off, too. You can&#39;t move from month to month by adding 30 days because only 4 out of the 12 months have exactly 30 days."}], "answers": [{"comments": [{"owner": {"reputation": 430, "user_id": 2055246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b3488166020a66fdc17ebe912a18a20?s=128&d=identicon&r=PG", "display_name": "eXa", "link": "https://stackoverflow.com/users/2055246/exa"}, "edited": false, "score": 0, "creation_date": 1571867265, "post_id": 58516513, "comment_id": 103386580, "body": "This is perfect, thank you!  Yeah I had found <code>.next_month</code> but after the 28th of Feb it would switch to 28 everywhere."}, {"owner": {"reputation": 430, "user_id": 2055246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b3488166020a66fdc17ebe912a18a20?s=128&d=identicon&r=PG", "display_name": "eXa", "link": "https://stackoverflow.com/users/2055246/exa"}, "edited": false, "score": 0, "creation_date": 1571878343, "post_id": 58516513, "comment_id": 103388874, "body": "Any suggestion on how to calculate the number of month between two dates? &quot;Best&quot; I&#39;ve found is using <code>30.4375</code> and the number of days doing a count on the range which will have precision issues."}, {"owner": {"reputation": 579, "user_id": 4251975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e702c6ee92d30ba83aea6f0b064a084?s=128&d=identicon&r=PG", "display_name": "Yurii", "link": "https://stackoverflow.com/users/4251975/yurii"}, "reply_to_user": {"reputation": 430, "user_id": 2055246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b3488166020a66fdc17ebe912a18a20?s=128&d=identicon&r=PG", "display_name": "eXa", "link": "https://stackoverflow.com/users/2055246/exa"}, "edited": false, "score": 1, "creation_date": 1571882733, "post_id": 58516513, "comment_id": 103389642, "body": "for number of months you can adjust this snippet: <code>date1 = Date.parse(&#39;2019-10-24&#39;); date2 = Date.parse(&#39;2019-11-25&#39;); (date2.year * 12 + date2.month) - (date1.year * 12 + date1.month)</code>. Borrowed from [Find number of months between two Dates in Ruby on Rails ](<a href=\"https://stackoverflow.com/questions/9428605/find-number-of-months-between-two-dates-in-ruby-on-rails\" title=\"find number of months between two dates in ruby on rails\">stackoverflow.com/questions/9428605/&hellip;</a>)"}], "tags": [], "owner": {"reputation": 579, "user_id": 4251975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e702c6ee92d30ba83aea6f0b064a084?s=128&d=identicon&r=PG", "display_name": "Yurii", "link": "https://stackoverflow.com/users/4251975/yurii"}, "is_accepted": true, "score": 4, "last_activity_date": 1571811198, "creation_date": 1571811198, "answer_id": 58516513, "question_id": 58516210, "link": "https://stackoverflow.com/questions/58516210/how-to-build-a-monthly-range-that-takes-in-account-the-number-of-days-of-each-mo/58516513#58516513", "title": "How to build a monthly range that takes in account the number of days of each month?", "body": "<p>I think you can use either active support:</p>\n\n<pre><code>require 'active_support/time'\nstart_date = Date.parse('2019-10-31')\n12.times.map { |i| start_date + i.month }\n\n=&gt; [\n Thu, 31 Oct 2019,\n Sat, 30 Nov 2019,\n Tue, 31 Dec 2019,\n Fri, 31 Jan 2020,\n Sat, 29 Feb 2020,\n Tue, 31 Mar 2020,\n Thu, 30 Apr 2020,\n Sun, 31 May 2020,\n Tue, 30 Jun 2020,\n Fri, 31 Jul 2020,\n Mon, 31 Aug 2020,\n Wed, 30 Sep 2020\n]\n\n</code></pre>\n\n<p>or adjust: #next_month:</p>\n\n<pre><code>require 'date'\nDate.parse('2019-10-31').next_month # =&gt; Sat, 30 Nov 2019\n</code></pre>\n"}], "owner": {"reputation": 430, "user_id": 2055246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b3488166020a66fdc17ebe912a18a20?s=128&d=identicon&r=PG", "display_name": "eXa", "link": "https://stackoverflow.com/users/2055246/exa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 58516513, "answer_count": 1, "score": -2, "last_activity_date": 1571821327, "creation_date": 1571809650, "last_edit_date": 1571821327, "question_id": 58516210, "link": "https://stackoverflow.com/questions/58516210/how-to-build-a-monthly-range-that-takes-in-account-the-number-of-days-of-each-mo", "title": "How to build a monthly range that takes in account the number of days of each month?", "body": "<p>I have a range with a <code>start_date</code>, <code>end_date</code> and I want to get the same day of each month for the whole range, so here starting on the 30th of January I should get the 30th of each month:</p>\n\n<pre><code>start_date = Date.new(2019, 1, 30)\nend_date = Date.new(2019, 12, 30)\n\nrange = (start_date...end_date)\ndates = range.step(30).map(&amp;:to_date)\n\ndates\n#=&gt; [Wed, 30 Jan 2019,\n#    Fri, 01 Mar 2019,\n#    Sun, 31 Mar 2019,\n#    Tue, 30 Apr 2019,\n#    Thu, 30 May 2019,\n#    Sat, 29 Jun 2019,\n#    Mon, 29 Jul 2019,\n#    Wed, 28 Aug 2019,\n#    Fri, 27 Sep 2019,\n#    Sun, 27 Oct 2019,\n#    Tue, 26 Nov 2019,\n#    Thu, 26 Dec 2019]\n</code></pre>\n\n<p>I was using something like this for <code>weeks</code> but with months when you get to February for example it of course fails, so I would have to adjust to 28th.</p>\n\n<p>I know I could loop and look at the month and do adjustments based on the <code>start_date</code> but it feels like a bad idea.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 11561383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae67afdfe746f2ba43e416c589062ee8?s=128&d=identicon&r=PG&f=1", "display_name": "Soran", "link": "https://stackoverflow.com/users/11561383/soran"}, "edited": false, "score": 0, "creation_date": 1571807727, "post_id": 58515881, "comment_id": 103358215, "body": "But you need to use ARGV"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 9, "user_id": 11561383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae67afdfe746f2ba43e416c589062ee8?s=128&d=identicon&r=PG&f=1", "display_name": "Soran", "link": "https://stackoverflow.com/users/11561383/soran"}, "edited": false, "score": 0, "creation_date": 1571807780, "post_id": 58515881, "comment_id": 103358234, "body": "Your use of <code>ARGV</code> was correct, I did not think I need to comment on that. Your error is just missing the <code>elsif n == 0; 1</code> in <code>factorial</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571823188, "post_id": 58515881, "comment_id": 103365158, "body": "<i>&quot;Your base case returns the result of puts&quot;</i> \u2013 <code>n &lt; 0</code> handles invalid arguments. The base case is simply missing."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1571823237, "post_id": 58515881, "comment_id": 103365187, "body": "@Stefan: In absence of the correct base case, the <code>n &lt; 0</code> case de facto becomes a new (and incorrect) base case (though the <i>intent</i> is as you say, the code says otherwise)."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571824007, "post_id": 58515881, "comment_id": 103365630, "body": "If you say it that way it becomes much clearer. The sentence I quoted sounds (to me) as if the return value were wrong and needed to be fixed, like <i>&quot;your base case returns the wrong value&quot;</i>. Hence my comment."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571824087, "post_id": 58515881, "comment_id": 103365675, "body": "@Stefan: I trust you, if you can think of a better phrasing feel free to edit it in."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1571807586, "creation_date": 1571807586, "answer_id": 58515881, "question_id": 58515829, "link": "https://stackoverflow.com/questions/58515829/getting-zero-and-not-the-expected-output-in-recursive-factorial/58515881#58515881", "title": "Getting zero and not the expected output in recursive factorial?", "body": "<p>Recursive functions need a valid base case and a recursive case. Your base case returns the result of <code>puts</code>, which is <code>nil</code>. Thus, <code>factorial(5)</code> is <code>5 * factorial(4)</code>. Skipping a few steps, <code>factorial(1)</code> is <code>1 * factorial(0)</code>, which leads to <code>0 * factorial(-1)</code>. This will first display your error \"Wrong argument\"; then the program will try to evaluate <code>0 * nil</code>, and fail because multiplication with <code>nil</code> is not a thing.</p>\n\n<p>The factorial needs to return <code>1</code> (without a recursive call) when <code>n</code> is <code>0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "is_accepted": false, "score": -1, "last_activity_date": 1571815520, "creation_date": 1571815520, "answer_id": 58517569, "question_id": 58515829, "link": "https://stackoverflow.com/questions/58515829/getting-zero-and-not-the-expected-output-in-recursive-factorial/58517569#58517569", "title": "Getting zero and not the expected output in recursive factorial?", "body": "<p>Another way to consider.. An accumulator in the parameters. </p>\n\n<pre><code>def factorial_aux(n, acc)\n\n    if n &lt; 1\n        acc\n    else\n        factorial_aux(n - 1, acc * n)\n    end\n\nend\n\ndef factorial(n)\n\n    #do some param checks here...\n\n    factorial_aux(n, 1)\n\nend\n\nif __FILE__ == $0\n\n    p factorial(10)\n\nend\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11561383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae67afdfe746f2ba43e416c589062ee8?s=128&d=identicon&r=PG&f=1", "display_name": "Soran", "link": "https://stackoverflow.com/users/11561383/soran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58515881, "answer_count": 2, "score": 0, "last_activity_date": 1571815520, "creation_date": 1571807250, "question_id": 58515829, "link": "https://stackoverflow.com/questions/58515829/getting-zero-and-not-the-expected-output-in-recursive-factorial", "title": "Getting zero and not the expected output in recursive factorial?", "body": "<p>Not getting the expected output, only get 0 when I enter any value 5 or 6 or 7. I need to use ARGV to enter the value in the terminal. Need a single argument with a value 0 or higher. For testing Try 5 as an argument and get the expected output 120</p>\n\n<pre><code>def factorial(n)\n  if n &lt; 0\n      puts \"Wrong argument - need a single argument with a value 0 or more \"\n  else\n      n * factorial(n-1)\n  end\nend\n\ndef main \n    puts factorial(ARGV[0].to_i)\n  end                                                                     \nmain\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sass", "ruby-on-rails-6"], "answers": [{"comments": [{"owner": {"reputation": 2379, "user_id": 115462, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/9e7f68f8cf444a3a919a247e562bc464?s=128&d=identicon&r=PG", "display_name": "jsharpe", "link": "https://stackoverflow.com/users/115462/jsharpe"}, "edited": false, "score": 0, "creation_date": 1571898685, "post_id": 58515028, "comment_id": 103393588, "body": "prepend_host prepends the protocol and hostname to the string.  I updated the original post to hopefully make that a bit more clear.  In my case, I use it to include a CDN hostname in the url"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "reply_to_user": {"reputation": 2379, "user_id": 115462, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/9e7f68f8cf444a3a919a247e562bc464?s=128&d=identicon&r=PG", "display_name": "jsharpe", "link": "https://stackoverflow.com/users/115462/jsharpe"}, "edited": false, "score": 0, "creation_date": 1571920281, "post_id": 58515028, "comment_id": 103404538, "body": "then I guess you only need to concatenate two strings (or replace the original host if the string has that) to replace that method call, not sure though"}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 0, "last_activity_date": 1571801234, "creation_date": 1571801234, "answer_id": 58515028, "question_id": 58514216, "link": "https://stackoverflow.com/questions/58514216/how-to-migrate-ruby-sass-custom-functions-to-sassc/58515028#58515028", "title": "how to migrate ruby-sass custom functions to sassc?", "body": "<p>For the <code>assert_type</code> function, you can try something from here <a href=\"https://github.com/sass/sassc-ruby/blob/61a02d1d88b489f83b5b3d0da48a9b62f210691b/lib/sassc/script/value_conversion.rb\" rel=\"nofollow noreferrer\">https://github.com/sass/sassc-ruby/blob/61a02d1d88b489f83b5b3d0da48a9b62f210691b/lib/sassc/script/value_conversion.rb</a></p>\n\n<pre><code>SassC::Native.value_get_tag(string) == :sass_string\n</code></pre>\n\n<p>You could try to replicate the assert_type function if you want to raise an error too, check this <a href=\"https://github.com/sass/ruby-sass/blob/1ed4e31033dd0bff4da27d1f21c531e1fdaccaab/lib/sass/script/functions.rb#L533\" rel=\"nofollow noreferrer\">https://github.com/sass/ruby-sass/blob/1ed4e31033dd0bff4da27d1f21c531e1fdaccaab/lib/sass/script/functions.rb#L533</a></p>\n\n<p>I can't find that <code>prepend_host</code> method on ruby-sass codebase. I'm not sure what it actually do to suggest a replacement.</p>\n"}], "owner": {"reputation": 2379, "user_id": 115462, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/9e7f68f8cf444a3a919a247e562bc464?s=128&d=identicon&r=PG", "display_name": "jsharpe", "link": "https://stackoverflow.com/users/115462/jsharpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571898554, "creation_date": 1571793980, "last_edit_date": 1571898554, "question_id": 58514216, "link": "https://stackoverflow.com/questions/58514216/how-to-migrate-ruby-sass-custom-functions-to-sassc", "title": "how to migrate ruby-sass custom functions to sassc?", "body": "<p>How do I migrate this ruby sass custom function to SassC? In a rails project, I just included this module in my application.rb and the likes of <code>my-method</code> would be available in my sass files.</p>\n\n<p>The <a href=\"http://sass.logdown.com/posts/7828841\" rel=\"nofollow noreferrer\">ruby sass EOL blog post</a> suggests I should just sub \"SassC\" for \"Sass\" but that doesn't work. Digging in I don't see any of these methods (<code>assert_type</code> or <code>prepend_host</code>) defined in SassC either.</p>\n\n<p>Thanks!</p>\n\n<pre><code>module Sass::Script::Functions\n\n  def my_method(string)\n    assert_type string, :String\n\n    prepend_host('https://cdn.host.com', string)\n  end\n  declare :my_method, [:string]\nend\n</code></pre>\n\n<p>Other blog post describing the implementation:\n<a href=\"http://www.seancolombo.com/2010/07/28/how-to-make-and-use-a-custom-sass-function/\" rel=\"nofollow noreferrer\">http://www.seancolombo.com/2010/07/28/how-to-make-and-use-a-custom-sass-function/</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "email-attachments", "mail-gem"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1571788193, "post_id": 58513186, "comment_id": 103354545, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;. We need minimal code from you to test for the problem. That also means the minimal input data and the expected output. Without that you&#39;re asking us to devise a test suite for you, which may, or may not solve the problem you&#39;re having. In other words we&#39;ll be guessing and wasting our time, so we need you to help us help you by narrowing down the situation."}], "answers": [{"tags": [], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "is_accepted": true, "score": 3, "last_activity_date": 1571792935, "last_edit_date": 1571792935, "creation_date": 1571792456, "answer_id": 58514072, "question_id": 58513186, "link": "https://stackoverflow.com/questions/58513186/how-to-find-the-original-email-in-a-forward-using-the-mail-gem/58514072#58514072", "title": "How to find the original email in a forward using the Mail gem", "body": "<p>Here's what I have done in the past, which just recursively looks for the largest HTML body. This will probably break with multi-level forwards but in our case it only needs to be 1 forward level deep and so far works great.</p>\n\n<p>It's unfortunate the state of Stack Overflow these days thanks to stupid votes to close on every single question, that IMO is legitimate. Do people really expect you to dump 5000 lines of HTML into your question, its quite obvious what you're asking \ud83d\ude44 </p>\n\n<pre><code>module EmailProcessor\n  class Parser\n    def initialize(email)\n      @email = email\n      raise 'must be initialized with type InboundEmail' unless @email.instance_of?(InboundEmail)\n    end\n\n    def execute\n      mail = Mail.read_from_string(@email.postmark_raw['RawEmail'])\n      html = find_original_html(mail)\n    end\n\n    private\n\n    def find_original_html(mail)\n      bodies = recurse_parts(mail.parts)\n      sorted = bodies.sort_by{|b| -b.size}\n      puts \"PARSED #{sorted.size} BODIES: #{sorted.map{|b| b.size}}\"\n      sorted.first\n    end\n\n    def recurse_parts(parts)\n      bodies = []\n      parts.each do |part|\n        if part.multipart?\n          bodies += recurse_parts(part.parts)\n        elsif part.content_type =~ /text\\/html/\n          bodies &lt;&lt; part.body.decoded\n        end\n      end\n      bodies\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "accepted_answer_id": 58514072, "answer_count": 1, "score": 0, "last_activity_date": 1571792935, "creation_date": 1571784009, "last_edit_date": 1571788047, "question_id": 58513186, "link": "https://stackoverflow.com/questions/58513186/how-to-find-the-original-email-in-a-forward-using-the-mail-gem", "title": "How to find the original email in a forward using the Mail gem", "body": "<p>How do I use the Mail gem for Ruby to extract the <strong>original message</strong> HTML content/text content from a <em>forwarded</em> email?</p>\n\n<p>So far all the examples I see are related to extracting content from replies (not forwards), which is made a lot easier because you can just key in on <code>--reply above this line--</code> in the message.</p>\n\n<p>But in my case, I\u2019m having people forward me confirmation emails, such as how TripIt parses flight itineraries from many different airline emails.</p>\n\n<p>The problem is there is a complex hierarchy of \u201cparts\u201d, as well as parts containing other parts, and I am trying to come up with a foolproof way to find the original HTML source so I can parse it, and extract information from a forwarded email raw source.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>m = Mail.read('raw.txt')\n\nm.parts\nm.parts.first.parts\nm.parts.last.parts.first.parts # never ending....\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1571785740, "post_id": 58512720, "comment_id": 103354019, "body": "I have never seen Ruby files with a tilde in the filename so this is a learning experience for me. I&#39;d be really interested in knowing how you came to this practice."}, {"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571787579, "post_id": 58512720, "comment_id": 103354411, "body": "Any naming convention can be used instead, tilde is convenient because it is an allowed character and is clearly different from any characters typically used in regular ruby source files, so I know that those tilde files define some aspect of a class. I use it a lot, and to me a few related files placed in the same directory is more convenient than a main file and a subdirectory with its inner modules."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 3, "creation_date": 1571789002, "post_id": 58512720, "comment_id": 103354689, "body": "I&#39;d recommend not using <code>~</code> in a filename. The convention is either <code>-</code> or <code>_</code>. Because some characters have special meaning in a shell (<code>~</code> included) we avoid them. Yeah, it&#39;s possible to use <code>%</code>, <code>|</code>, all sorts of characters, but in consideration to any others who might use the file on a different system the question becomes &quot;should we?&quot; Just because we can? <a href=\"https://unix.stackexchange.com/q/7351\">unix.stackexchange.com/q/7351</a> has some interesting thoughts."}], "answers": [{"comments": [{"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "edited": false, "score": 0, "creation_date": 1571787729, "post_id": 58513488, "comment_id": 103354439, "body": "Sure, I know that it&#39;s possible to opt out of Zeitwerk, and that&#39;s what I&#39;m doing for now. <code>include</code> can not be used because (a) those files don&#39;t define any modules, they reopen the class instead and (b) even if they do define a module Zeitwerk will search for a nested module in a subdirectory, custom naming schemes are not supported."}], "tags": [], "owner": {"reputation": 96, "user_id": 8261793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d6e1a4f65680569815043e1405cd26?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Blicharski", "link": "https://stackoverflow.com/users/8261793/kevin-blicharski"}, "is_accepted": false, "score": 2, "last_activity_date": 1571786530, "creation_date": 1571786530, "answer_id": 58513488, "question_id": 58512720, "link": "https://stackoverflow.com/questions/58512720/zeitwerk-require-dependency-and-splitting-ruby-classes-into-a-few-files/58513488#58513488", "title": "Zeitwerk, require_dependency and splitting Ruby classes into a few files", "body": "<p>You can opt out of using Zeitwerk by setting <code>config.autoload = :classic</code> in your <code>application.rb</code> file. If you want to continue using Zeitwerk, then why not replace the <code>require_dependency</code> calls with <code>include</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "edited": false, "score": 0, "creation_date": 1579010705, "post_id": 59724188, "comment_id": 105619412, "body": "Thanks a lot Xavier \u2014 I&#39;ve got the idea."}], "tags": [], "owner": {"reputation": 82, "user_id": 8362448, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FaOvnNFLfgY/AAAAAAAAAAI/AAAAAAAAAhg/dCurNQvp3fo/photo.jpg?sz=128", "display_name": "Xavier Noria", "link": "https://stackoverflow.com/users/8362448/xavier-noria"}, "is_accepted": true, "score": 5, "last_activity_date": 1578949771, "creation_date": 1578949771, "answer_id": 59724188, "question_id": 58512720, "link": "https://stackoverflow.com/questions/58512720/zeitwerk-require-dependency-and-splitting-ruby-classes-into-a-few-files/59724188#59724188", "title": "Zeitwerk, require_dependency and splitting Ruby classes into a few files", "body": "<p>Technically I believe that is possible, though this way to split code is not conventional and the solution includes more vinegar than sugar :).</p>\n\n<p>First, you need to tell Zeitwerk to <a href=\"https://github.com/fxn/zeitwerk#ignoring-parts-of-the-project\" rel=\"noreferrer\">ignore those files</a>. For example, in an initializer you can do this:</p>\n\n<pre><code># ignore accepts a glob pattern.\nRails.autoloaders.main.ignore(\"god~*\")\n</code></pre>\n\n<p>Second, you need to <code>load</code> the files, so that reloading interprets them again:</p>\n\n<pre><code>class God &lt; ApplicationRecord\n  load \"#{__dir__}/god~callbacks.rb\"\n  ...\nend\n</code></pre>\n\n<p>I assume those files are not loaded in other places, so idempotence does not matter. If it matters, then you need some extra vinegar.</p>\n\n<p>The solution above is untested, but you see the idea.</p>\n\n<p>It is an unusual way to split code, you know that, normally you use modules and the name of the module reflects what the code is organizing, which is what the file names are doing. I'd recommend going with modules. But if you want to keep that style, in principle you can, though the solution is a bit forced.</p>\n"}], "owner": {"reputation": 5419, "user_id": 887640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w4OsI.png?s=128&g=1", "display_name": "Dmitry Sokurenko", "link": "https://stackoverflow.com/users/887640/dmitry-sokurenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 1, "accepted_answer_id": 59724188, "answer_count": 2, "score": 3, "last_activity_date": 1578949771, "creation_date": 1571780835, "last_edit_date": 1571788414, "question_id": 58512720, "link": "https://stackoverflow.com/questions/58512720/zeitwerk-require-dependency-and-splitting-ruby-classes-into-a-few-files", "title": "Zeitwerk, require_dependency and splitting Ruby classes into a few files", "body": "<p>Before Rails 6 there was a simple way to split any Ruby class into multiple files without introducing any additional modules or concerns. It was quite useful for those God classes which happened to be a bit too large to be kept in one file:</p>\n\n<pre><code># god.rb\nclass God &lt; ApplicationRecord\n  require_dependency 'god~callbacks'\n  require_dependency 'god~scopes'\n  require_dependency 'god~search'\n  require_dependency 'god~something_else'\n  require_dependency 'god~and_more'\n  require_dependency 'god~and_even_more'\n  ...\nend\n\n# god~callbacks.rb\nclass God\n  before_save :nullify_blanks\n  before_save :nullify_unrelated_attrs\n  ...\nend\n</code></pre>\n\n<p>and the file structure has looked like this:</p>\n\n<pre><code>models/\n  god.rb\n  god~callbacks.rb\n  god~scopes.rb\n  god~search.rb\n  ...\n</code></pre>\n\n<p>And that has worked great \u2014\u00a0anytime you change anything in any of those files the changes were correctly reloaded.</p>\n\n<p>Since Rails 6 a new class loader is used \u2014\u00a0the Zeitwerk. And that's great but seems that it doesn't work with <code>require_dependency</code>, at least when that method is used in such a non-typical way.</p>\n\n<p>So the question is,\u00a0is it possible to split a class definition into a few files and keep the auto-reloading working with Zeitwerk. And the goal is to split a class without introducing any inner modules/concerns. </p>\n\n<p>And please, no need to comment on whether a 1000-line long class is a good design practice or not, that's not the point of the question.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "api"], "comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1571782286, "post_id": 58512573, "comment_id": 103353168, "body": "<code>@albums = Album.where(user: User.current)</code> ( <code>User.current</code> or whatever you do to find the user that&#39;s currently logged in) in your controller instead of <code>@albums = Album.all</code>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1571783090, "post_id": 58512573, "comment_id": 103353360, "body": "@Viktor - unfortunately, what the OP didn&#39;t state is that they are working with arrays received from external APIs, not ActiveRecord objects."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1571783190, "post_id": 58512573, "comment_id": 103353390, "body": "I missed out the controller code, added @Viktor"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1571783218, "post_id": 58512573, "comment_id": 103353397, "body": "@jvillian ^^ please see above"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "edited": false, "score": 0, "creation_date": 1571783120, "post_id": 58512972, "comment_id": 103353365, "body": "I&#39;ve added the controller code to the question, but I shall try your solution."}], "tags": [], "owner": {"reputation": 96, "user_id": 10801025, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-a3BQbmHOOZs/AAAAAAAAAAI/AAAAAAAAAzY/rndLZeWE5qI/photo.jpg?sz=128", "display_name": "Lucas Vieira", "link": "https://stackoverflow.com/users/10801025/lucas-vieira"}, "is_accepted": false, "score": 0, "last_activity_date": 1571782589, "creation_date": 1571782589, "answer_id": 58512972, "question_id": 58512573, "link": "https://stackoverflow.com/questions/58512573/show-records-only-belonging-to-that-user-ruby-on-rails/58512972#58512972", "title": "Show records only belonging to that user ruby on rails", "body": "<p>On your controller's action responsible for showing that page you should do something like</p>\n\n<pre><code>@albums = Album.where(user_id: @user.id)\n</code></pre>\n\n<p>So that when you call @albums on your view, it will only contain documents pre-loaded in the controller.</p>\n\n<p>Or, if you're using something like <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">CanCan</a> to manage permissions, you should be able to do something like that:</p>\n\n<pre><code>can :read, Album, user_id: user.id\n</code></pre>\n\n<p>So you would be giving <strong>read</strong> permissions to the user to see only albums that belongs to him.  </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "edited": false, "score": 0, "creation_date": 1571783574, "post_id": 58513083, "comment_id": 103353489, "body": "Oh OK, that&#39;s pretty straight forward, massively overthinking it then. Pagination does seem to break, however, <code>undefined method </code>total_pages&#39; for []:Array`"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1571783664, "post_id": 58513083, "comment_id": 103353516, "body": "Try moving <code>.select</code> up a line."}, {"owner": {"reputation": 1911, "user_id": 3163663, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/dfc7587fd73f2efa19d6f1f9611b70ba?s=128&d=identicon&r=PG", "display_name": "Jason FB", "link": "https://stackoverflow.com/users/3163663/jason-fb"}, "edited": false, "score": 0, "creation_date": 1571783849, "post_id": 58513083, "comment_id": 103353569, "body": "what <code>. paginate</code> gem are you using \u2014 the typical ones are <code>kaminari</code> and <code>will_paginate</code>. Generally speaking what you are trying to do doesn&#39;t scale, because paginate is actually an Active Relation object, and so pagination is passed as a query restriction to the underlying active record SQL call"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1571783652, "last_edit_date": 1571783652, "creation_date": 1571783236, "answer_id": 58513083, "question_id": 58512573, "link": "https://stackoverflow.com/questions/58512573/show-records-only-belonging-to-that-user-ruby-on-rails/58513083#58513083", "title": "Show records only belonging to that user ruby on rails", "body": "<p>Use <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-select\" rel=\"nofollow noreferrer\">.select</a> to, um, well, <em>select</em> only those albums where the album's <code>'userId'</code> matches <code>@user['id']</code>:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def show\n    @user = HTTParty.get('https://jsonplaceholder.typicode.com/users/' + params[:id], :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n\n    @albums = HTTParty\n      .get(\n        'https://jsonplaceholder.typicode.com/albums', \n        :headers =&gt; {'Content-Type' =&gt; 'application/json'}\n      )\n      .select{|a| a['userId'] == @user['id']}\n      .paginate(:page =&gt; params[:page], :per_page =&gt; 6)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1911, "user_id": 3163663, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/dfc7587fd73f2efa19d6f1f9611b70ba?s=128&d=identicon&r=PG", "display_name": "Jason FB", "link": "https://stackoverflow.com/users/3163663/jason-fb"}, "is_accepted": false, "score": 0, "last_activity_date": 1571783917, "creation_date": 1571783917, "answer_id": 58513170, "question_id": 58512573, "link": "https://stackoverflow.com/questions/58512573/show-records-only-belonging-to-that-user-ruby-on-rails/58513170#58513170", "title": "Show records only belonging to that user ruby on rails", "body": "<p>the other person's API should be doing the pagination for you. It will almost certainly not scale the way you are attempting to do it. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 58513083, "answer_count": 3, "score": 0, "last_activity_date": 1571783917, "creation_date": 1571779812, "last_edit_date": 1571783080, "question_id": 58512573, "link": "https://stackoverflow.com/questions/58512573/show-records-only-belonging-to-that-user-ruby-on-rails", "title": "Show records only belonging to that user ruby on rails", "body": "<p>I have the following code</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;div class=\"container mt-4\"&gt;\n  &lt;div class=\"card\"&gt;\n    &lt;div class=\"card-header\"&gt;\n      &lt;h5&gt;Name: &lt;%= @user['name'] %&gt; | Username: &lt;%= @user['username'] %&gt;&lt;/h5&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"card-body\"&gt;\n      &lt;h5 class=\"card-title\"&gt;User details&lt;/h5&gt;\n\n      &lt;ul class=\"card-text\"&gt;\n        &lt;li&gt;ID: &lt;%= @user['id'] %&gt;&lt;/li&gt;\n        &lt;li&gt;Name: &lt;%= @user['name'] %&gt;&lt;/li&gt;\n        &lt;li&gt;E-mail: &lt;%= @user['email'] %&gt;&lt;/li&gt;\n      &lt;/ul&gt;\n\n      &lt;ul&gt;\n        &lt;h5&gt;Address&lt;/h5&gt;\n        &lt;li&gt;Street: &lt;%= @user['address']['street'] %&gt;&lt;/li&gt;\n        &lt;li&gt;Suite: &lt;%= @user['address']['suite'] %&gt;&lt;/li&gt;\n        &lt;li&gt;City: &lt;%= @user['address']['city'] %&gt;&lt;/li&gt;\n        &lt;li&gt;Zipcode: &lt;%= @user['address']['zipcode'] %&gt;&lt;/li&gt;\n        &lt;li&gt;Geo Lat: &lt;%= @user['address']['geo']['lat'] %&gt;&lt;/li&gt;\n        &lt;li&gt;Geo Lng: &lt;%= @user['address']['geo']['lng'] %&gt;&lt;/li&gt;\n      &lt;/ul&gt;\n\n      &lt;ul&gt;\n        &lt;li&gt;Phone Number: &lt;%= @user['phone'] %&gt;&lt;/li&gt;\n        &lt;li&gt;Website: &lt;%= @user['website'] %&gt;&lt;/li&gt;\n      &lt;/ul&gt;\n\n      &lt;ul&gt;\n        &lt;h5&gt;Company details&lt;/h5&gt;\n        &lt;li&gt;Company name: &lt;%= @user['company']['name'] %&gt;&lt;/li&gt;\n        &lt;li&gt;Company catchphrase: &lt;%= @user['company']['catchPhrase'] %&gt;&lt;/li&gt;\n        &lt;li&gt;Company bs: &lt;%= @user['company']['bs'] %&gt;&lt;/li&gt;\n      &lt;/ul&gt;\n\n      &lt;h5 class=\"card-title\"&gt;User Albums&lt;/h5&gt;\n\n      &lt;div class=\"row\"&gt;\n        &lt;% @albums.each do |album| %&gt;\n          &lt;div class=\"col-md-4 mb-4\"&gt;\n            &lt;h5 class=\"card-title\"&gt;\n              &lt;%= album['title'] %&gt;\n            &lt;/h5&gt;\n\n            &lt;%= link_to \"View Album\", album_path(album['id']), class: \"btn btn-primary\" %&gt;\n          &lt;/div&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n\n      &lt;%= will_paginate @albums, renderer: WillPaginate::ActionView::BootstrapLinkRenderer, class: 'margin-auto' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>users_controller.rb</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class UsersController &lt; ApplicationController\n  def show\n    @user = HTTParty.get('https://jsonplaceholder.typicode.com/users/' + params[:id], :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n\n    @albums = HTTParty\n      .get('https://jsonplaceholder.typicode.com/albums', :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n      .paginate(:page =&gt; params[:page], :per_page =&gt; 6)\n  end\nend\n</code></pre>\n\n<p>All of my data is coming from an external API.</p>\n\n<p>Where I'm running through <code>each</code> album I need to only show the albums belonging to that user because currently, I'm looping through all albums regardless of whether they belong to that user or not.</p>\n\n<p>An album has a userId.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "json", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 0, "last_activity_date": 1571777322, "creation_date": 1571777322, "answer_id": 58512121, "question_id": 58511862, "link": "https://stackoverflow.com/questions/58511862/display-nested-json-in-ruby-on-rails/58512121#58512121", "title": "display nested JSON in ruby on rails", "body": "<p>You'll want that to be: </p>\n\n<pre><code>&lt;li&gt;Street: &lt;%= @users.find{|u| u['id'] == @album['userId']}.try(:[],'address').try(:[],'street') || 'not available' %&gt;&lt;/li&gt;\n</code></pre>\n\n<p>For a multi-level <code>try</code>, you might want to look into <code>dig</code>.</p>\n\n<p>Also, if the iteration is as in your previous questions, then <code>@album</code> may need to be <code>album</code>. If this is in a different context than your previous questions, then kindly disregard.</p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 8261793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67d6e1a4f65680569815043e1405cd26?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Blicharski", "link": "https://stackoverflow.com/users/8261793/kevin-blicharski"}, "is_accepted": false, "score": 0, "last_activity_date": 1571777763, "creation_date": 1571777763, "answer_id": 58512210, "question_id": 58511862, "link": "https://stackoverflow.com/questions/58511862/display-nested-json-in-ruby-on-rails/58512210#58512210", "title": "display nested JSON in ruby on rails", "body": "<p>This is where <code>dig</code> is useful:</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.3.0_preview1/Hash.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.3.0_preview1/Hash.html</a></p>\n\n<pre><code>&lt;li&gt;Street: &lt;%= @users.find{|u| u['id'] == @album['userId']}.dig(:address, :street)  || 'not available' %&gt;&lt;/li&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58512121, "answer_count": 2, "score": 0, "last_activity_date": 1571777763, "creation_date": 1571776213, "question_id": 58511862, "link": "https://stackoverflow.com/questions/58511862/display-nested-json-in-ruby-on-rails", "title": "display nested JSON in ruby on rails", "body": "<p>I believe this is going to be an easy fix but everything I'm trying isn't working.</p>\n\n<p>I'm getting data from an external API and I'm looking at display the data after matching the ids.</p>\n\n<p>The data is JSON and has some nested content.</p>\n\n<p>I've tried the following</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;li&gt;Street: &lt;%= @users.find{|u| u['id'] == @album['userId']}.try(:[],'address''street') || 'not available' %&gt;&lt;/li&gt;\n</code></pre>\n\n<p>The data is structured like so</p>\n\n<pre><code>{\n  {\n    \"id\": 1,\n    \"name\": \"Leanne Graham\",\n    \"username\": \"Bret\",\n    \"email\": \"Sincere@april.biz\",\n    \"address\": {\n      \"street\": \"Kulas Light\",\n      \"suite\": \"Apt. 556\",\n      \"city\": \"Gwenborough\",\n      \"zipcode\": \"92998-3874\",\n      \"geo\": {\n        \"lat\": \"-37.3159\",\n        \"lng\": \"81.1496\"\n      }\n    },\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "macos-catalina"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571785819, "post_id": 58511829, "comment_id": 103354034, "body": "I&#39;m going to guess it&#39;s because Catalina doesn&#39;t support 32-bit applications anymore."}, {"owner": {"reputation": 31, "user_id": 6273491, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oOI28B7R9YQ/AAAAAAAAAAI/AAAAAAAAADA/Gn-M5XG-594/photo.jpg?sz=128", "display_name": "Serj Petrenko", "link": "https://stackoverflow.com/users/6273491/serj-petrenko"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1571813092, "post_id": 58511829, "comment_id": 103360072, "body": "@anothermh As I understood it&#39;s not only because Catalina doesn&#39;t support 32-bit applications anymore, on Mojave I had the same issue and it was solved by installing this package <code>&#47;Library&#47;Developer&#47;CommandLineTools&#47;Packages&#47;macOS_SDK_heade&zwnj;&#8203;rs_for_macOS_10.14.p&zwnj;&#8203;kg</code>."}, {"owner": {"reputation": 31, "user_id": 6273491, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oOI28B7R9YQ/AAAAAAAAAAI/AAAAAAAAADA/Gn-M5XG-594/photo.jpg?sz=128", "display_name": "Serj Petrenko", "link": "https://stackoverflow.com/users/6273491/serj-petrenko"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571813149, "post_id": 58511829, "comment_id": 103360101, "body": "Apparently the root of the issue on OS Mojave was that somewhere in this process (bundler? scrypt?) there was an expectation that header files could be found in <code>&#47;usr&#47;include</code>. The latest version of XCode does not place header files in that location, because OS Catalina Apple decided to remove <code>&#47;usr&#47;include</code>."}, {"owner": {"reputation": 31, "user_id": 6273491, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oOI28B7R9YQ/AAAAAAAAAAI/AAAAAAAAADA/Gn-M5XG-594/photo.jpg?sz=128", "display_name": "Serj Petrenko", "link": "https://stackoverflow.com/users/6273491/serj-petrenko"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571831802, "post_id": 58511829, "comment_id": 103369752, "body": "As a quick fix, I copied to my computer gem <code>casein</code> that use gem <code>scrypt</code> inside then updated version of <code>scrypt</code> to <code>3.0.6</code> and added in Gemfile of the main project path to folder with gem."}], "owner": {"reputation": 31, "user_id": 6273491, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-oOI28B7R9YQ/AAAAAAAAAAI/AAAAAAAAADA/Gn-M5XG-594/photo.jpg?sz=128", "display_name": "Serj Petrenko", "link": "https://stackoverflow.com/users/6273491/serj-petrenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 616, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1588085035, "creation_date": 1571776090, "last_edit_date": 1571831861, "question_id": 58511829, "link": "https://stackoverflow.com/questions/58511829/i386-arch-error-installing-old-scrypt-gem-version-with-os-catalina-10-15", "title": "i386 arch error installing old scrypt gem version with OS Catalina 10.15", "body": "<p>I'm trying to install an old gem version for an old project after a fresh install of OS X 10.15 Catalina and XCode Command Line Tools and Xcode 11.0. The gem I'm trying to install is <code>scrypt</code>, version <code>1.2.1</code>, which is a dependency of authlogic.</p>\n\n<p><code>gem install scrypt -v '1.2.1'</code></p>\n\n<p>This gem is used under the hood of another gem <code>casein</code>. So I can't update scrypt directly inside my Gemfile.</p>\n\n<p>Returns the following error:</p>\n\n<pre><code>Building native extensions. This could take a while...\nERROR:  Error installing scrypt:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Users/sergiypetrenko/.rvm/gems/ruby-2.3.8/gems/scrypt-1.2.1/ext/scrypt\n/Users/sergiypetrenko/.rvm/rubies/ruby-2.3.8/bin/ruby -rrubygems /Users/sergiypetrenko/.rvm/gems/ruby-2.3.8/gems/rake-13.0.0/exe/rake RUBYARCHDIR\\=/Users/sergiypetrenko/.rvm/gems/ruby-2.3.8/extensions/x86_64-darwin-19/2.3.0/scrypt-1.2.1 RUBYLIBDIR\\=/Users/sergiypetrenko/.rvm/gems/ruby-2.3.8/extensions/x86_64-darwin-19/2.3.0/scrypt-1.2.1\nmkdir -p x86_64-darwin\ngcc -fexceptions -O -fno-omit-frame-pointer -fno-strict-aliasing -Wall -msse -msse2 -arch x86_64 -arch i386   -o x86_64-darwin/crypto_scrypt-sse.o -c ./crypto_scrypt-sse.c\ngcc -fexceptions -O -fno-omit-frame-pointer -fno-strict-aliasing -Wall -msse -msse2 -arch x86_64 -arch i386   -o x86_64-darwin/memlimit.o -c ./memlimit.c\ngcc -fexceptions -O -fno-omit-frame-pointer -fno-strict-aliasing -Wall -msse -msse2 -arch x86_64 -arch i386   -o x86_64-darwin/scrypt_calibrate.o -gcc -fexceptions -O -fno-omit-frame-pointer -fno-strict-aliasing -Wall -msse -msse2 -arch x86_64 -arch i386   -o x86_64-darwin/sha256.o -c ./sha256.c\ngcc -bundle -o x86_64-darwin/libscrypt_ext.bundle x86_64-darwin/crypto_scrypt-sse.o x86_64-darwin/memlimit.o x86_64-darwin/scrypt_calibrate.o x86_64-darwin/scrypt_ext.o x86_64-darwin/scryptenc_cpuperf.o x86_64-darwin/sha256.o -fexceptions -arch x86_64 -arch i386\nld: warning: The i386 architecture is deprecated for macOS (remove from the Xcode build setting: ARCHS)\nld: warning: ignoring file /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib/libSystem.tbd, missing required architecture i386 in file /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/lib/libSystem.tbd\nUndefined symbols for architecture i386:\n  \"___error\", referenced from:\n      _crypto_scrypt in crypto_scrypt-sse.o\n      _memtouse in memlimit.o\n  \"___stack_chk_fail\", referenced from:\n      _scrypt_SHA256_Transform in sha256.o\n      _scrypt_SHA256_Final in sha256.o\n      _HMAC_scrypt_SHA256_Init in sha256.o\n      _HMAC_scrypt_SHA256_Final in sha256.o\n      _PBKDF2_scrypt_SHA256 in sha256.o\n  \"___stack_chk_guard\", referenced from:\n      _scrypt_SHA256_Transform in sha256.o\n      _scrypt_SHA256_Final in sha256.o\n      _HMAC_scrypt_SHA256_Init in sha256.o\n      _HMAC_scrypt_SHA256_Final in sha256.o\n      _PBKDF2_scrypt_SHA256 in sha256.o\n  \"_free\", referenced from:\n      _crypto_scrypt in crypto_scrypt-sse.o\n  \"_getrlimit$UNIX2003\", referenced from:\n      _memtouse in memlimit.o\n  \"_gettimeofday\", referenced from:\n      _scryptenc_cpuperf in scryptenc_cpuperf.o\n  \"_malloc\", referenced from:\n      _crypto_scrypt in crypto_scrypt-sse.o\n  \"_memcpy\", referenced from:\n      _scrypt_SHA256_Update in sha256.o\n      _PBKDF2_scrypt_SHA256 in sha256.o\n  \"_mmap$UNIX2003\", referenced from:\n      _crypto_scrypt in crypto_scrypt-sse.o\n  \"_munmap$UNIX2003\", referenced from:\n      _crypto_scrypt in crypto_scrypt-sse.o\n  \"_sysconf\", referenced from:\n      _memtouse in memlimit.o\nld: symbol(s) not found for architecture i386\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nrake aborted!\nCommand failed with status (1): [gcc -bundle -o x86_64-darwin/libscrypt_ext...]\n/Users/sergiypetrenko/.rvm/gems/ruby-2.3.8/gems/ffi-compiler-1.0.1/lib/ffi-compiler/compile_task.rb:153:in `block in define_task!'\n/Users/sergiypetrenko/.rvm/gems/ruby-2.3.8/gems/rake-13.0.0/exe/rake:27:in `&lt;main&gt;'\nTasks: TOP =&gt; default =&gt; x86_64-darwin/libscrypt_ext.bundle\n(See full trace by running task with --trace)\n\nrake failed, exit code 1\n</code></pre>\n\n<p>The main solution on OS X 10.14 Mojave for me was to install this package <code>/Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg</code> . But for now Apple decided to remove /usr/include in Catalina. The reason is Xcode now supports multiple SDKs and multiple installations of Xcode.</p>\n\n<p>Reference to similar issues:\n<a href=\"https://stackoverflow.com/questions/53528115/i386-arch-error-installing-old-scrypt-gem-version-with-os-x-mojave\">Installing old scrypt gem on OS Mojave</a></p>\n\n<p><a href=\"https://superuser.com/questions/1488979/macos-catalina-cannot-find-usr-include-file?newreg=6255f38b65c54cd4afbb4cf70a80ec9e\">MacOS Catalina cannot find /usr/include file</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "erb"], "answers": [{"comments": [{"owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "edited": false, "score": 0, "creation_date": 1571833082, "post_id": 58522125, "comment_id": 103370477, "body": "Great answer! Thanks."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 5, "last_activity_date": 1571832393, "last_edit_date": 1571832393, "creation_date": 1571831078, "answer_id": 58522125, "question_id": 58511033, "link": "https://stackoverflow.com/questions/58511033/block-given-always-returns-true-in-erb-templates/58522125#58522125", "title": "block_given? always returns true in erb templates", "body": "<p>Because all Rails templates support <code>content_for :xyz</code>, which is triggered by <code>yield :xyz</code>, it means all templates are always wrapped in a block that is prepared to fetch this <code>content_for</code> data. </p>\n\n<p>Because this pre-programmed block is always there, in order to accommodate <code>content_for</code>, it means <code>block_given?</code> will always return true.</p>\n\n<p>I think this may actually be a small oversight in the Rails view design. It would be nice if we'd have a separate method to detect if a partial was supplied a block. </p>\n\n<p>One idea for workaround:</p>\n\n<pre><code>&lt;% if (block = yield).empty? %&gt;\n  &lt;h1&gt;Goodbye world&lt;/h1&gt;\n&lt;% else %&gt;\n  &lt;%= block %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15480, "user_id": 229688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FVcL0.jpg?s=128&g=1", "display_name": "Arnaud", "link": "https://stackoverflow.com/users/229688/arnaud"}, "is_accepted": false, "score": 0, "last_activity_date": 1616168705, "creation_date": 1616168705, "answer_id": 66711345, "question_id": 58511033, "link": "https://stackoverflow.com/questions/58511033/block-given-always-returns-true-in-erb-templates/66711345#66711345", "title": "block_given? always returns true in erb templates", "body": "<p>While being clever and a generic solution, I'm not a fan of the <code>(block = yield).empty?</code> in that particular instance.</p>\n<p>In my use case and this one, where the default content is so simple, I prefer this approach:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= yield.presence || content_tag(:h1, &quot;Goodby world&quot;) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 1, "accepted_answer_id": 58522125, "answer_count": 2, "score": 6, "last_activity_date": 1616168705, "creation_date": 1571772270, "last_edit_date": 1571811828, "question_id": 58511033, "link": "https://stackoverflow.com/questions/58511033/block-given-always-returns-true-in-erb-templates", "title": "block_given? always returns true in erb templates", "body": "<p>In Rails 5.2.3, I need to render a partial which takes an optional block.</p>\n\n<pre><code># users/_user.html.erb\n...\n&lt;% if block_given? %&gt;\n  &lt;%= yield %&gt;\n&lt;% else %&gt;\n  &lt;h1&gt;Goodbye world&lt;/h1&gt;\n&lt;% end %&gt;\n...\n\n</code></pre>\n\n<p>However <code>block_given?</code> returns true regardless of which version I choose to go with:</p>\n\n<pre><code>\n&lt;%# Version 1 - block_given? returns true %&gt;\n&lt;%= render partial: \"users/_user\" do %&gt;\n  &lt;h1&gt;hello world&lt;/h1&gt;\n&lt;% end %&gt;\n\n&lt;%# Version 2 - block_given? also returns true %&gt;\n&lt;%= render partial: \"users/_user\" %&gt;\n\n</code></pre>\n\n<p>What's going on here and why is this happening? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api"], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 0, "last_activity_date": 1571772189, "creation_date": 1571772189, "answer_id": 58511012, "question_id": 58510838, "link": "https://stackoverflow.com/questions/58510838/display-other-data-within-each-ruby-on-rails/58511012#58511012", "title": "display other data within `each` ruby on rails", "body": "<p>First, I'm going to assume that <code>@user</code> is actually an <code>array</code> of <code>users</code>. If that's true, you might want to do: </p>\n\n<pre><code>require 'will_paginate/array'\n\nclass AlbumsController &lt; ApplicationController\n  def index\n    @albums = HTTParty.get('https://jsonplaceholder.typicode.com/albums', :headers =&gt; {'Content-Type' =&gt; 'application/json'}).paginate(:page =&gt; params[:page], :per_page =&gt; 10)\n    @users = HTTParty.get('https://jsonplaceholder.typicode.com/users', :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n  end\nend\n</code></pre>\n\n<p>Then, you should be able to do: </p>\n\n<pre><code>&lt;main role=\"main\" class=\"flex-shrink-0\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;h1 class=\"mt-5\"&gt;Albums&lt;/h1&gt;\n    &lt;p class=\"lead\"&gt;Here we show all albums and it's details&lt;/p&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;% @albums.each do |album| %&gt;\n        &lt;div class=\"col-md-4\"&gt;\n          &lt;%# image_tag(@albumImage ['thumbnailUrl']) %&gt;\n          &lt;h5 class=\"card-title\"&gt;\n            &lt;%= album['title'] %&gt;\n          &lt;/h5&gt;\n\n          &lt;p&gt;By: &lt;%= @users.find{|u| u['id'] == album['userId']}.try(:[],'name') || 'not available' %&gt;&lt;p&gt;\n          &lt;%= link_to \"View Album\", album_path(album['id']), class: \"btn btn-primary\" %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;%= will_paginate @albums, renderer: WillPaginate::ActionView::BootstrapLinkRenderer, class: 'margin-auto' %&gt;\n&lt;/main&gt;\n</code></pre>\n\n<p>This: </p>\n\n<pre><code>@users.find{|u| u['id'] == album['userId']}\n</code></pre>\n\n<p>...will iterate the <code>@users</code> array and find the <code>user</code> that has the <code>id</code> that matches <code>album['userId']</code>.</p>\n\n<p>This: </p>\n\n<pre><code>.try(:[],'name')\n</code></pre>\n\n<p>...will attempt to get the <code>name</code> attribute from the found <code>user</code> but will not throw and error if a <code>user</code> was not found.</p>\n\n<p>And this: </p>\n\n<pre><code>|| 'not available'\n</code></pre>\n\n<p>...will display 'not available' if the <code>user</code> didn't have a <code>name</code> or if a <code>user</code> wasn't found.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 58511012, "answer_count": 1, "score": 1, "last_activity_date": 1571772189, "creation_date": 1571771333, "question_id": 58510838, "link": "https://stackoverflow.com/questions/58510838/display-other-data-within-each-ruby-on-rails", "title": "display other data within `each` ruby on rails", "body": "<p>I have an application where I'm displaying albums and users</p>\n\n<p>I'm currently outputting the albums,</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;main role=\"main\" class=\"flex-shrink-0\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;h1 class=\"mt-5\"&gt;Albums&lt;/h1&gt;\n    &lt;p class=\"lead\"&gt;Here we show all albums and it's details&lt;/p&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;% @albums.each do |album| %&gt;\n        &lt;div class=\"col-md-4\"&gt;\n          &lt;%# image_tag(@albumImage ['thumbnailUrl']) %&gt;\n          &lt;h5 class=\"card-title\"&gt;\n            &lt;%= album['title'] %&gt;\n          &lt;/h5&gt;\n\n          &lt;p&gt;By: &lt;%= album['userId'] %&gt;&lt;p&gt;\n          &lt;%= link_to \"View Album\", album_path(album['id']), class: \"btn btn-primary\" %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;%= will_paginate @albums, renderer: WillPaginate::ActionView::BootstrapLinkRenderer, class: 'margin-auto' %&gt;\n&lt;/main&gt;\n</code></pre>\n\n<p>But I want to get the user so I can display the album creators name, currently, I'm displaying the album users id</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;p&gt;By: &lt;%= album['userId'] %&gt;&lt;p&gt;\n</code></pre>\n\n<p>Ideally, I would like to do something like this</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;p&gt;By: &lt;%= album.user['name'] %&gt;&lt;p&gt;\n</code></pre>\n\n<p>All of the data is coming from an external API, in the controller I have</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'will_paginate/array'\n\nclass AlbumsController &lt; ApplicationController\n  def index\n    @albums = HTTParty.get('https://jsonplaceholder.typicode.com/albums', :headers =&gt; {'Content-Type' =&gt; 'application/json'}).paginate(:page =&gt; params[:page], :per_page =&gt; 10)\n    @user = HTTParty.get('https://jsonplaceholder.typicode.com/users', :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n  end\nend\n</code></pre>\n\n<p>Not sure how best to approach this.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "rails-activerecord", "paper-trail-gem"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1571956944, "post_id": 58510622, "comment_id": 103420865, "body": "I think your review of the PT-AT source is correct. There seems to be no PT-AT feature that does what you want, as of today, 2019-10-24."}, {"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1571957010, "post_id": 58510622, "comment_id": 103420879, "body": "Maybe you can use a temporary variable <code>x</code> to remember the user&#39;s groups and when the <code>reify</code> is done, set <code>user.user_groups = x</code>?"}, {"owner": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "reply_to_user": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1572016313, "post_id": 58510622, "comment_id": 103441395, "body": "@JaredBeck ah ok. Yeah that&#39;s essentially what I ended up doing to get around it but I&#39;ll leave this question open. Sounds like it might end up being more of a feature request."}], "owner": {"reputation": 346, "user_id": 3309030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d247d24813a45f6a1240b835b4125bab?s=128&d=identicon&r=PG", "display_name": "kaydanzie", "link": "https://stackoverflow.com/users/3309030/kaydanzie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1571770175, "creation_date": 1571770175, "question_id": 58510622, "link": "https://stackoverflow.com/questions/58510622/reify-only-one-has-many-through-association-with-papertrail", "title": "Reify only one has_many :through association with PaperTrail?", "body": "<p>I'm using the <a href=\"https://github.com/westonganger/paper_trail-association_tracking\" rel=\"noreferrer\">paper_trail-association_tracking gem</a> to save PaperTrail versions for AR associations. I have a model, let's call it User, that has many Groups and has many Skills. Both of these associations have join tables (<code>user_groups</code> and <code>user_skills</code>). So my User model has two <code>has_many :through</code> associations. All of the models (User, Group, Skill, UserSkill, UserGroup) have PaperTrail enabled on them.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class User &lt; ApplicationRecord\n  has_paper_trail\n\n  has_many :groups, through: user_groups\n  has_many :user_groups\n\n  has_many :skills, through: user_skills\n  has_many :user_skills\nend\n</code></pre>\n\n<p>Say I want to <code>reify</code> an earlier version of the User model, along with their Skills (<code>user_skills</code> records), but not revert to an earlier version of the user's Groups (<code>user_groups</code>). The code looks something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>me = User.find(1)\nolder_me = me.versions.last.reify(has_many: true)\nolder_me.save\n</code></pre>\n\n<p>This will reify both UserGroups and UserSkills for this User, but I want it to reify just UserSkills. It seems the gem will reify all associations automatically, based on this <a href=\"https://github.com/westonganger/paper_trail-association_tracking/blob/6a1cd2f1db58383d5b84477bb3ae2ac1a1acbc15/lib/paper_trail_association_tracking/reifier.rb#L27\" rel=\"noreferrer\">source code</a> I looked through.</p>\n\n<p>So is there a way to specify which association I want to be reified? Or is it not best practices to do this? For my use case, I can't see a problem with this unless the user itself was actually deleted or something like that.</p>\n\n<p>Sorry my models here sound kinda weird, I tried to use something generic and simplified, my real use case and models are a bit complex but this question demonstrates the bottom line of my issue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571770517, "post_id": 58510555, "comment_id": 103348876, "body": "Read up on autoloading: <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants_classic_mode.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4373, "user_id": 1810460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daef67cac318d3e35f84bc3f315bcfc?s=128&d=identicon&r=PG", "display_name": "Hamms", "link": "https://stackoverflow.com/users/1810460/hamms"}, "is_accepted": true, "score": 1, "last_activity_date": 1571770522, "creation_date": 1571770522, "answer_id": 58510685, "question_id": 58510555, "link": "https://stackoverflow.com/questions/58510555/how-can-i-require-a-model-and-use-it/58510685#58510685", "title": "How can I require a model and use it", "body": "<p>Rails has some autoloading logic, documented <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Quoting from that document:</p>\n\n<blockquote>\n  <p>By default, the autoload paths of an application consist of all the subdirectories of app that exist when the application boots ---except for assets, javascripts, views,--- plus the autoload paths of engines it might depend on.</p>\n</blockquote>\n\n<p>Speaking to your example, you can trust not only that the contents of <code>models/user.rb</code> are available in <code>jobs/cronjob.rb</code> but also vice versa.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12212177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58510685, "answer_count": 1, "score": 0, "last_activity_date": 1571770522, "creation_date": 1571769883, "question_id": 58510555, "link": "https://stackoverflow.com/questions/58510555/how-can-i-require-a-model-and-use-it", "title": "How can I require a model and use it", "body": "<p>I would like to know how can I require a model of my rails project and use it.</p>\n\n<p>Let's say I have the following structure:</p>\n\n<pre><code>app/\n  constrollers/\n    users.rb\n  models/\n    users.rb\n</code></pre>\n\n<p>By default I can use the <code>user</code> model in the <code>user</code> controller without having to require it. How is that possible? And, what If I want to require it in other file:</p>\n\n<pre><code>app/\n  constrollers/\n    user.rb\n  models/\n    user.rb\n  jobs/\n    cronjob.rb # I want to require models/user.rb from here and use it.\n</code></pre>\n\n<p>How can I do it?</p>\n"}, {"tags": ["json", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571777010, "post_id": 58510878, "comment_id": 103351509, "body": "<code>A.reduce(&amp;:zip)</code>: I&#39;ll remember that."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 4, "last_activity_date": 1571771578, "creation_date": 1571771578, "answer_id": 58510878, "question_id": 58510282, "link": "https://stackoverflow.com/questions/58510282/hash-to-json-with-out-nested-arrays-in-json/58510878#58510878", "title": "hash to json with out nested arrays in json", "body": "<p>You can try reducing <code>A</code> by zipping each of its elements.</p>\n\n<p>Then iterate over each array of arrays using <code>each_with_object</code>, for each element, yield its first element as <code>key</code>, the second as <code>f2</code> and the second/last element within the array as <code>factor</code>.</p>\n\n<p>Assign the custom hash to the <code>key</code> (<code>A1</code>, <code>A2</code>, <code>A3</code>).</p>\n\n<p>After that you can store it and use like <code>{ obj: result }</code>.</p>\n\n<pre><code>A.reduce(&amp;:zip).each_with_object({}) do |((key, f2), factor), hash|\n  hash[key] = { f2: f2, xfactor: factor }\nend\n#\u00a0{\"A1\"=&gt;{:f2=&gt;\"A1_xfactor\", :xfactor=&gt;\"A1_pull\"},\n#  \"A2\"=&gt;{:f2=&gt;\"A2_xfactor\", :xfactor=&gt;\"A2_pull\"},\n#  \"A3\"=&gt;{:f2=&gt;\"A3_xfactor\", :xfactor=&gt;\"A3_pull\"}}\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 2128294, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eaf09133be0fd5503ff299082b470134?s=128&d=identicon&r=PG", "display_name": "Chucks", "link": "https://stackoverflow.com/users/2128294/chucks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58510878, "answer_count": 1, "score": 3, "last_activity_date": 1571776583, "creation_date": 1571768667, "question_id": 58510282, "link": "https://stackoverflow.com/questions/58510282/hash-to-json-with-out-nested-arrays-in-json", "title": "hash to json with out nested arrays in json", "body": "<p>I am generating a hash out of three arrays and next trying to construct a json. I succeeded by json object has array.</p>\n\n<pre><code>require 'json'\nA = [['A1', 'A2', 'A3'], [ \"A1_xfactor\", \"A2_xfactor\", \"A3_xfactor\"], [\"A1_pull\", \"A2_pull\", \"A3_pull\"]]\n\nkl = { 'obj' =&gt; A[0].zip(A[1],A[2]).map { |k, v,l|  { 'f1' =&gt; k, 'f2' =&gt; v, 'xfactor' =&gt; l} }}.to_json\n\n\nputs kl\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>  {\n    \"obj\": [{\n        \"f1\": \"A1\",\n        \"f2\": \"A1_xfactor\",\n        \"xfactor\": \"A1_pull\"\n    }, {\n        \"f1\": \"A2\",\n        \"f2\": \"A2_xfactor\",\n        \"xfactor\": \"A2_pull\"\n    }, {\n        \"f1\": \"A3\",\n        \"f2\": \"A3_xfactor\",\n        \"xfactor\": \"A3_pull\"\n    }]\n}\n</code></pre>\n\n<p>Instead of array, I would like have it without an array and F1 has to come out as a separate object.</p>\n\n<pre><code>{\n    \"obj\": {\n        \"A1\": {\n            \"f2\": \"A1_xfactor\",\n            \"xfactor\": \"A1_pull\"\n        },\n        \"A2\": {\n            \"f2\": \"A2_xfactor\",\n            \"xfactor\": \"A2_pull\"\n        },\n        \"A3\": {\n            \"f2\": \"A3_xfactor\",\n            \"xfactor\": \"A3_pull\"\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["ruby", "postgresql", "parameters"], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 5278451, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cd1b123925364fb6e037f64c355c0ef?s=128&d=identicon&r=PG&f=1", "display_name": "John Coolidge", "link": "https://stackoverflow.com/users/5278451/john-coolidge"}, "edited": false, "score": 0, "creation_date": 1571768754, "post_id": 58510191, "comment_id": 103348232, "body": "That worked perfectly! I hadn&#39;t considered that another method would work in place of CURRENT_DATE. I assumed one was, in this case, just as bad as another. Thanks very much!"}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 1, "last_activity_date": 1571768287, "creation_date": 1571768287, "answer_id": 58510191, "question_id": 58509796, "link": "https://stackoverflow.com/questions/58509796/how-can-i-use-a-psql-timestamp-function-as-a-parameter-in-ruby/58510191#58510191", "title": "How can I use a PSQL timestamp function as a parameter in Ruby?", "body": "<p>Your problem is that the <code>$1</code> placeholder's value will be the <em>string</em> <code>'CURRENT_DATE'</code>, not the literal value <code>CURRENT_DATE</code>. The result is that you're effectively saying <code>'CURRENT_DATE'::date</code> and that doesn't work:</p>\n\n<pre><code>psql&gt; select 'current_date'::date;\nERROR:  date/time value \"current\" is no longer supported\nLINE 1: select 'current_date'::date;\n               ^\n</code></pre>\n\n<p>You need to either get the literal value <code>current_date</code> into the query or find a string that properly casts to a date. The easiest thing would be to use <code>'now'</code> since that casts nicely:</p>\n\n<pre><code>psql&gt; select 'now'::date;\n    date    \n------------\n 2019-10-22\n(1 row)\n</code></pre>\n\n<p>A quick change to the method's date argument's default value should be good enough:</p>\n\n<pre><code>def tasks_completed_for_date(date = 'now')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1571769079, "creation_date": 1571769079, "answer_id": 58510373, "question_id": 58509796, "link": "https://stackoverflow.com/questions/58509796/how-can-i-use-a-psql-timestamp-function-as-a-parameter-in-ruby/58510373#58510373", "title": "How can I use a PSQL timestamp function as a parameter in Ruby?", "body": "<p>You can replace <code>$1</code> with one of these methods:</p>\n\n<pre><code>DATE 'today'\nDATE 'now'\n</code></pre>\n\n<p>Also you can use:</p>\n\n<pre><code>TIMESTAMP 'today'\n</code></pre>\n\n<p>So for example call method as <code>tasks_completed_for_date('today')</code></p>\n"}], "owner": {"reputation": 155, "user_id": 5278451, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7cd1b123925364fb6e037f64c355c0ef?s=128&d=identicon&r=PG&f=1", "display_name": "John Coolidge", "link": "https://stackoverflow.com/users/5278451/john-coolidge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 58510191, "answer_count": 2, "score": 0, "last_activity_date": 1571769079, "creation_date": 1571766530, "question_id": 58509796, "link": "https://stackoverflow.com/questions/58509796/how-can-i-use-a-psql-timestamp-function-as-a-parameter-in-ruby", "title": "How can I use a PSQL timestamp function as a parameter in Ruby?", "body": "<p>I am using a Ruby method to access task information from a Postgres database.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def query(statement, *params)\n    @logger.info(\"#{statement}: #{params}\")\n    @db.exec_params(statement, params)\nend\n\ndef tasks_completed_for_date(date=\"CURRENT_DATE\")   \n    sql = &lt;&lt;~SQL\n      SELECT tasks.name AS task_name,\n             timetable.start_at AS start_at,\n             timetable.end_at AS end_at,\n             timetable.duration AS duration,\n             timetable.start_at::date AS task_date\n        FROM tasks\n        JOIN timetable ON tasks.id = timetable.task_id\n        WHERE timetable.start_at::date = $1\n          AND timetable.duration IS NOT NULL\n        ORDER BY tasks.name ASC;\n    SQL\n\n    result = query(sql, date)\n\n    if result.ntuples &gt; 0\n      result.map do |tuple|\n        {\n          task_name: tuple['task_name'],\n          start_at: tuple['start_at'].slice(11, 5),\n          end_at: tuple['end_at'].slice(11, 5),\n          total_time: tuple['duration'].slice(0, 5),\n          task_date: tuple['task_date'].slice(5, 5)\n        }\n      end\n    end\n  end\n</code></pre>\n\n<p>I want the default value to of the query to be whatever the current date is. I thought the best way to do this was to set the default parameter in the method called <code>tasks_completed_for_date</code> to the string <code>CURRENT_DATE</code>. This string would be interpreted by PSQL as the method <code>CURRENT_DATE</code> and return data based on that date. Instead I receive the following error:</p>\n\n<p>ERROR: date/time value \"current\" is no longer supported</p>\n\n<p>I am not using 'current' at all and I know that whatever it is, it's obsolete. Is there a way to pass a PSQL method to the query (in place of $1) as I am trying here that doesn't result in an error?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "haml"], "comments": [{"owner": {"reputation": 11, "user_id": 12154538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGloQ7SClcs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduaPP0_AUkcIn7OEP7pHft-vr4CQ/photo.jpg?sz=128", "display_name": "Haroon Hanzii", "link": "https://stackoverflow.com/users/12154538/haroon-hanzii"}, "edited": false, "score": 0, "creation_date": 1571764425, "post_id": 58509298, "comment_id": 103346368, "body": "Can anybody Help me out with this?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1571865505, "post_id": 58509298, "comment_id": 103386036, "body": "Welcome to SO! Help on SO can take a while. The members are all over the world and they don&#39;t continuously monitor various interests so it can take a week. Remember, we don&#39;t get paid so you&#39;re relying on us to help in our spare time. While you&#39;re waiting please fix the grammar in your question as it is important on SO; It&#39;s not a message board, it&#39;s more like an online encyclopedia so capitalization and punctuation matter. &quot;i&quot; -&gt; &quot;I&quot;, &quot;id&#39;s, what&quot; -&gt; &quot;id&#39;s. What&quot;, &quot;That&#39;s my View&quot; -&gt; &quot;This is my view&quot; etc. While it might seem fussy or silly it affects people&#39;s willingness to help."}], "owner": {"reputation": 11, "user_id": 12154538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PGloQ7SClcs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduaPP0_AUkcIn7OEP7pHft-vr4CQ/photo.jpg?sz=128", "display_name": "Haroon Hanzii", "link": "https://stackoverflow.com/users/12154538/haroon-hanzii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 15, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1581307007, "creation_date": 1571764395, "last_edit_date": 1581307007, "question_id": 58509298, "link": "https://stackoverflow.com/questions/58509298/on-click-of-button-i-want-the-selected-field-id-to-be-passed-to-the-given-path", "title": "on click of button i want the selected field id to be passed to the given path", "body": "<p>i have a loop in which i have select options with dynamic id's, what i want is that on selection of option of specific id select menu option that id of that option should pass through button to controller.</p>\n\n<p>This is What I've done:</p>\n\n<pre><code>    .container_fluid2\n  %table#myTable.table.table-striped.my-4.w-50.table_prop\n    %thead\n      %tr.style_bg\n        %th{:onclick =&gt; \"sortTable(0)\",\"data-priority\" =&gt; \"0\"} Requested User\n        %th{:onclick =&gt; \"sortTable(0)\",\"data-priority\" =&gt; \"0\"} Institution\n        %th{:onclick =&gt; \"sortTable(0)\",\"data-priority\" =&gt; \"0\"} Role Selection\n        %th{:onclick =&gt; \"sortTable(0)\",\"data-priority\" =&gt; \"0\"} Actions\n    %tbody\n      - @InstitutionUserRole.each do |q|\n        %tr{id: \"InstitutionUserRole_#{q.id}\"}\n          %td.color_tr\n            = q.user.email\n          %td.color_tr\n            = q.institution.name\n          %td.color_tr\n            %select.select2.role_select{:id =&gt; \"my-dropdown_#{q.user.id}\"}\n              %option{:value =&gt; \"1\"} Curbside Admin\n              %option{:value =&gt; \"2\"} Institution Authorized Member\n              %option{:value =&gt; \"3\"} Institution Editorial Manager\n              %option{:value =&gt; \"4\"} Institution Administration Manager\n              %option{:value =&gt; \"4\"} Institution Operations Manager\n              %option{:value =&gt; \"5\"} Institution Editorial &amp; Operations Manager\n              %option{:value =&gt; \"6\"} Institution Administration &amp; Operations Manager\n              %option{:value =&gt; \"7\"} Institution Workgroup Member\n              %option{:value =&gt; \"8\"} Institution Workgroup Admin\n              %option{:value =&gt; \"10\"} Institution Content Authorized Member\n              %option{:value =&gt; \"11\"} External Contributor\n              %option{:value =&gt; \"12\"} External Reviewer\n              %option{:value =&gt; \"13\"} Curbside Content Manager\n          %td.color_tr\n            %button.w3-btn.w3-white.w3-border.w3-round-large{:id =&gt; \"go-btn_#{q.user.id}\",:onclick =&gt; \"location.href='#{admin_role_selection_path(id: q.user.id,)}';\", :type =&gt; \"button\"} Approve\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jGwQy.png\" rel=\"nofollow noreferrer\">That's my View</a></p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 2, "creation_date": 1571763839, "post_id": 58509044, "comment_id": 103346096, "body": "For those of us who don&#39;t &quot;do&quot; SQL but who might be able to sort out your ActiveRecord query, it might be helpful if you (1) show your models with the relevant associations and attributes, and (2) describe in plain English what it is you&#39;re trying to do."}], "answers": [{"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 0, "last_activity_date": 1571842133, "creation_date": 1571842133, "answer_id": 58525553, "question_id": 58509044, "link": "https://stackoverflow.com/questions/58509044/convert-sql-queries-to-activerecord-query/58525553#58525553", "title": "Convert SQL queries to Activerecord query", "body": "<p>Have a look at <a href=\"https://scuttle.io\" rel=\"nofollow noreferrer\">https://scuttle.io</a> to get started:</p>\n\n<pre><code>Keyword.select(\n  [\n    Keyword.arel_table[:keyword], MinimumRanking.arel_table[:min_position]\n  ]\n).where(\n  Arel::Nodes::Between.new(\n    :created_at, (\n      Arel::Nodes::Group.new(LITERAL&lt;'2019-10-15 07:00:00'&gt;)\n    ).and(Arel::Nodes::Group.new(LITERAL&lt;'#{date}'&gt;))\n  )\n).joins(\n  Keyword.arel_table.join(Ranking.arel_table).on(\n    MinimumRanking.arel_table[:keyword_id].eq(Keyword.arel_table[:id])\n  ).join_sources\n)\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5332292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda236fd943ecb4a8d6feab04234ed16?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/5332292/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571842133, "creation_date": 1571763355, "question_id": 58509044, "link": "https://stackoverflow.com/questions/58509044/convert-sql-queries-to-activerecord-query", "title": "Convert SQL queries to Activerecord query", "body": "<p>How to convert this into active records queries?</p>\n\n<pre><code>@test = @keyword_list.find_by_sql(\"\n  SELECT keywords.keyword, minimum_ranking.min_position from keywords\n  JOIN (select keyword_id, min(position) as min_position from rankings group by keyword_id) minimum_ranking\n  on minimum_ranking.keyword_id = keywords.id\n  where created_at between ('2019-10-15 07:00:00') AND ('#{date}')\n\")\n</code></pre>\n\n<p>Not only that before these code, i already have 2 layer of association </p>\n\n<pre><code>   @project = Project.find(params[:id])\n   @keywords = @project.keywords\n   @pagy, @keyword_list = pagy(@keywords.includes(:rankings).order(current_ranking: :asc), items: 50)\n</code></pre>\n\n<p>At the moment i been running loop and .where on the views, which making loading the page extremely slow. i am trying to tackle this issue by making a single sql queries in the controller, managed to wrote it in sql but can't figure out to do it in Active Record.</p>\n"}, {"tags": ["javascript", "jquery", "html", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 10969761, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IUSpBPwSJKo/AAAAAAAAAAI/AAAAAAAAFAU/CnuBD572QDg/photo.jpg?sz=128", "display_name": "Jordan Lagan", "link": "https://stackoverflow.com/users/10969761/jordan-lagan"}, "edited": false, "score": 0, "creation_date": 1571766793, "post_id": 58509340, "comment_id": 103347385, "body": "Thanks for your response @KABHIRAM. I&#39;m well aware of partials. That html code IS actually a partial that is called from the main view of the page. The issue is when the new conversion tracker icon is clicked which is a javascript event. How can I render a partial from there and make sure the indexes are correct?"}], "tags": [], "owner": {"reputation": 116, "user_id": 6691223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ef89550223e5564242bbba6744e698?s=128&d=identicon&r=PG&f=1", "display_name": "K ABHIRAM", "link": "https://stackoverflow.com/users/6691223/k-abhiram"}, "is_accepted": false, "score": 0, "last_activity_date": 1571764591, "creation_date": 1571764591, "answer_id": 58509340, "question_id": 58508779, "link": "https://stackoverflow.com/questions/58508779/how-can-i-make-a-form-with-a-user-defined-number-of-fields-ruby-on-rails/58509340#58509340", "title": "How can I make a form with a user defined number of fields? - Ruby on Rails", "body": "<p>To replicate a similar type of form on other pages, use <strong>partials</strong>.\nKeep what ever you feel redundant in the partial file and use it whenever you want.\nFor better understanding of partials follow official documentation\n<a href=\"https://guides.rubyonrails.org/layouts_and_rendering.html#using-partials\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/layouts_and_rendering.html#using-partials</a></p>\n"}], "owner": {"reputation": 142, "user_id": 10969761, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IUSpBPwSJKo/AAAAAAAAAAI/AAAAAAAAFAU/CnuBD572QDg/photo.jpg?sz=128", "display_name": "Jordan Lagan", "link": "https://stackoverflow.com/users/10969761/jordan-lagan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571764591, "creation_date": 1571762284, "question_id": 58508779, "link": "https://stackoverflow.com/questions/58508779/how-can-i-make-a-form-with-a-user-defined-number-of-fields-ruby-on-rails", "title": "How can I make a form with a user defined number of fields? - Ruby on Rails", "body": "<p>I'm making a ruby on rails app with a settings page where a user can enter two fields, a name and value field which will be translated upon form submit to the key and value of a hash. </p>\n\n<p>The only complicated aspect is that the user needs to be able to add additional \"rows\" to this form. The form on the page currently looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3TxWR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3TxWR.png\" alt=\"enter image description here\"></a></p>\n\n<p>So as you can see, clicking on the 'plus' icon will create another 'Conversion Action' and clicking on the 'minus' icon will remove a row from the field. The user should be able to add as many Conversion Actions as they wish. </p>\n\n<p>It's pretty standard to load this hash from the database and populate the form with existing values, but I'm not satisfied with my current way of adding additional form fields to the form.</p>\n\n<p>This is the code for the HTML form in use on the page:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;%= parent_form.fields_for :conversion_trackers_to_pull do |form| %&gt;\n  &lt;div id=\"conversion-trackers-to-pull\"&gt;\n    &lt;% section.conversion_trackers_to_pull.each_with_index do |(conversion_tracker_name, conversion_tracker_id), index| %&gt;\n      &lt;div class=\"mb-2\"&gt;\n        &lt;%= form.fields_for \"conversion_tracker_#{index}\".to_sym do |conversion_tracker| %&gt;\n          &lt;%= conversion_tracker.label :conversion_action, \"Conversion Action #{index+1}: \" %&gt;\n          &lt;%= conversion_tracker.text_field :name, value: conversion_tracker_name, placeholder: \"Name\" %&gt;\n          &lt;%= conversion_tracker.text_field :id, value: conversion_tracker_id, placeholder: \"ID\" %&gt;\n        &lt;% end %&gt;\n        &lt;%= button_tag '&lt;i class=\"fas fa-minus-circle\"&gt;&lt;/i&gt;'.html_safe, type: \"button\", class: \"remove-conversion-tracker\" %&gt;\n        &lt;span class=\"index d-none\"&gt;&lt;%= index + 1 %&gt;&lt;/span&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n  &lt;i class=\"far fa-plus-square\" id=\"&lt;%= \"#{section_name}\" %&gt;-new-conversion-tracker\"&gt;&lt;/i&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And this is the JQuery code being used on the plus button click event:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>$('#search-new-conversion-tracker').on('click', function() {\n      var index = parseFloat(($('#search-conversion-trackers-to-pull').find('.index').last().text()));\n      if (!index) {\n        index = 0;\n      }\n      $(this).prev('#conversion-trackers-to-pull').append(\n       '&lt;div class=\"mb-2\"&gt;' +\n          '&lt;label for=\"_search_section_config_conversion_trackers_to_pull_conversion_tracker_' + index + '_conversion_action\"&gt;Conversion Action ' + (index+1) + ': &lt;/label&gt;&amp;nbsp;' +\n          '&lt;input type=\"text\" name=\"[search_section_config][conversion_trackers_to_pull][conversion_tracker_' + index + '][name]\" id=\"_search_section_config_conversion_trackers_to_pull_conversion_tracker_' + index + '_name\" placeholder=\"Name\"&gt;&amp;nbsp;' +\n          '&lt;input type=\"text\" name=\"[search_section_config][conversion_trackers_to_pull][conversion_tracker_' + index + '][id]\" id=\"_search_section_config_conversion_trackers_to_pull_conversion_tracker_' + index + '_id\" placeholder=\"ID\"&gt;&amp;nbsp;' +\n          '&lt;button name=\"button\" type=\"button\" class=\"remove-conversion-tracker\"&gt;&lt;i class=\"fas fa-minus-circle\"&gt;&lt;/i&gt;&lt;/button&gt;' +\n          '&lt;span class=\"index d-none\"&gt;' + (index + 1) + '&lt;/span&gt;' +\n       '&lt;/div&gt;'\n      );\n      bindRemoveConversionTracker();\n    });\n</code></pre>\n\n<p>So this solution does work, albeit it's very clunky. I know a rails helper would probably be doing this exact same thing under the hood, but I need to replicate a similar type of form on other pages and I feel like there should be a cleaner way than to just repeat the code I've already got.</p>\n\n<p>Does anyone have experience making this kind of form in Ruby on Rails? What technique did you use? Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1571762262, "post_id": 58508588, "comment_id": 103345365, "body": "What version of Ruby and Rails you are on?"}, {"owner": {"reputation": 94, "user_id": 10286245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QrL6X.jpg?s=128&g=1", "display_name": "F. Vandroy", "link": "https://stackoverflow.com/users/10286245/f-vandroy"}, "reply_to_user": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1571762744, "post_id": 58508588, "comment_id": 103345596, "body": "&quot;ruby -v&quot; give :  ruby 2.6.4p104 (2019-08-28 revision 67798) [x64-mingw32]"}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1571762789, "post_id": 58508588, "comment_id": 103345613, "body": "And Rails version?"}, {"owner": {"reputation": 94, "user_id": 10286245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QrL6X.jpg?s=128&g=1", "display_name": "F. Vandroy", "link": "https://stackoverflow.com/users/10286245/f-vandroy"}, "reply_to_user": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1571763877, "post_id": 58508588, "comment_id": 103346120, "body": "My version is : Rails 6.0.0"}, {"owner": {"reputation": 795, "user_id": 3662748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8acc15309c4109ea00f420a59be35a47?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/3662748/sam"}, "edited": false, "score": 0, "creation_date": 1571765110, "post_id": 58508588, "comment_id": 103346673, "body": "check the error message ` mysql2 requires Ruby version &gt;= 2.0, &lt; 2.6. The current ruby version is 2.6.4.104`, try to use a Ruby version &gt;= 2.0, &lt; 2.6"}, {"owner": {"reputation": 94, "user_id": 10286245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QrL6X.jpg?s=128&g=1", "display_name": "F. Vandroy", "link": "https://stackoverflow.com/users/10286245/f-vandroy"}, "edited": false, "score": 0, "creation_date": 1571765169, "post_id": 58508588, "comment_id": 103346693, "body": "<a href=\"https://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">rubyinstaller.org/downloads</a>  There is not ruby version in this link..."}, {"owner": {"reputation": 9504, "user_id": 371037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544250e2df65ec0db1d866bade4cbdbd?s=128&d=identicon&r=PG", "display_name": "jason.rickman", "link": "https://stackoverflow.com/users/371037/jason-rickman"}, "edited": false, "score": 0, "creation_date": 1574452837, "post_id": 58508588, "comment_id": 104252292, "body": "Relevant github issue: <a href=\"https://github.com/brianmario/mysql2/issues/1021\" rel=\"nofollow noreferrer\">github.com/brianmario/mysql2/issues/1021</a>. This has been a known issue since January, but a new mysql2 version has not been released yet."}, {"owner": {"reputation": 1818, "user_id": 1682353, "user_type": "registered", "accept_rate": 10, "profile_image": "https://graph.facebook.com/10155468468865860/picture?type=large", "display_name": "user123456", "link": "https://stackoverflow.com/users/1682353/user123456"}, "reply_to_user": {"reputation": 9504, "user_id": 371037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544250e2df65ec0db1d866bade4cbdbd?s=128&d=identicon&r=PG", "display_name": "jason.rickman", "link": "https://stackoverflow.com/users/371037/jason-rickman"}, "edited": false, "score": 0, "creation_date": 1574454480, "post_id": 58508588, "comment_id": 104253013, "body": "@jason.rickman any work around"}, {"owner": {"reputation": 9504, "user_id": 371037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/544250e2df65ec0db1d866bade4cbdbd?s=128&d=identicon&r=PG", "display_name": "jason.rickman", "link": "https://stackoverflow.com/users/371037/jason-rickman"}, "edited": false, "score": 0, "creation_date": 1574694772, "post_id": 58508588, "comment_id": 104312766, "body": "I&#39;m not aware of any workaround"}], "answers": [{"tags": [], "owner": {"reputation": 5190, "user_id": 799342, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/85678d5ccd74f961ed1ae74186fb0076?s=128&d=identicon&r=PG", "display_name": "Hary", "link": "https://stackoverflow.com/users/799342/hary"}, "is_accepted": false, "score": 0, "last_activity_date": 1595512940, "creation_date": 1595512940, "answer_id": 63056126, "question_id": 58508588, "link": "https://stackoverflow.com/questions/58508588/how-to-install-mysql2-with-new-ruby-version/63056126#63056126", "title": "How to install mysql2 with new Ruby Version?", "body": "<p>Download the gem <a href=\"https://rubygems.org/downloads/mysql2-0.5.2.gem\" rel=\"nofollow noreferrer\">file</a> manually and installing works</p>\n<pre><code>gem i mysql2-0.5.2.gem\nTemporarily enhancing PATH for MSYS/MINGW...\nInstalling required msys2 packages: mingw-w64-x86_64-libmariadbclient\nBuilding native extensions. This could take a while...\nSuccessfully installed mysql2-0.5.2\nParsing documentation for mysql2-0.5.2\nInstalling ri documentation for mysql2-0.5.2\nDone installing documentation for mysql2 after 1 seconds\n1 gem installed\n</code></pre>\n<p>Source: <a href=\"https://github.com/brianmario/mysql2/issues/1021\" rel=\"nofollow noreferrer\">https://github.com/brianmario/mysql2/issues/1021</a></p>\n"}], "owner": {"reputation": 94, "user_id": 10286245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QrL6X.jpg?s=128&g=1", "display_name": "F. Vandroy", "link": "https://stackoverflow.com/users/10286245/f-vandroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1119, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1595512940, "creation_date": 1571761572, "last_edit_date": 1571762769, "question_id": 58508588, "link": "https://stackoverflow.com/questions/58508588/how-to-install-mysql2-with-new-ruby-version", "title": "How to install mysql2 with new Ruby Version?", "body": "<p>I have built an application a few month ago. I downloaded it from Github and I tried to launch it with <code>rails s</code> but I got this error :</p>\n\n<blockquote>\n  <p>'require': cannot load such file -- mysql2/2.6/mysql2</p>\n</blockquote>\n\n<p>I tried to install it with <code>gem install mysql2</code></p>\n\n<p>But I get this error :</p>\n\n<blockquote>\n  <p>The last version of mysql2 (>= 0) to support your Ruby &amp; RubyGems was\n  0.5.2. Try installing it with <code>gem install mysql2 -v 0.5.2</code>\n          mysql2 requires Ruby version >= 2.0, &lt; 2.6. The current ruby version is 2.6.4.104.</p>\n</blockquote>\n\n<p>When i tried to do the command suggested with <code>-v 0.5.2</code> I got the same error.</p>\n\n<p>Does anyone have a solution?</p>\n\n<p>I am on Windows and I don't have <code>rbenv</code> installed.</p>\n\n<p>My Ruby version : ruby 2.6.4p104 (2019-08-28 revision 67798) [x64-mingw32]</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "yarnpkg"], "answers": [{"comments": [{"owner": {"reputation": 1832, "user_id": 4441547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-_a7aQ1gNiFY/AAAAAAAAAAI/AAAAAAAAABw/2usMjLqKwgI/photo.jpg?sz=128", "display_name": "Aaron Franke", "link": "https://stackoverflow.com/users/4441547/aaron-franke"}, "edited": false, "score": 1, "creation_date": 1571758070, "post_id": 58507489, "comment_id": 103343204, "body": "Ruby told me that I needed to run &quot;yarn install --check-files&quot; and it said that --check-files was an unknown argument when I did. I don&#39;t know what&#39;s correct, I just know that I can&#39;t run my Rails app without running this command apparently."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 1832, "user_id": 4441547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-_a7aQ1gNiFY/AAAAAAAAAAI/AAAAAAAAABw/2usMjLqKwgI/photo.jpg?sz=128", "display_name": "Aaron Franke", "link": "https://stackoverflow.com/users/4441547/aaron-franke"}, "edited": false, "score": 4, "creation_date": 1571758608, "post_id": 58507489, "comment_id": 103343495, "body": "You should remove the <code>yarn</code> gem and install <code>yarn</code> using npm instead."}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 2, "last_activity_date": 1571757602, "creation_date": 1571757602, "answer_id": 58507489, "question_id": 58507190, "link": "https://stackoverflow.com/questions/58507190/how-do-i-use-optimist-in-ruby/58507489#58507489", "title": "How do I use optimist in Ruby?", "body": "<p>The gem <code>yarn</code> depends on trollop which is renamed to <code>optimist</code>. The error is just a deprecation warning so everything will continue to work. </p>\n\n<p>If you want to remove the error, one should update the <code>yarn</code> gem to use <code>optimist</code>. However, since the <code>yarn</code> gem is so old (2011), and there is a npm/js library called yarn which is used to install npm packages: are you sure you need to use the <code>yarn</code> gem at all? </p>\n"}], "owner": {"reputation": 1832, "user_id": 4441547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-_a7aQ1gNiFY/AAAAAAAAAAI/AAAAAAAAABw/2usMjLqKwgI/photo.jpg?sz=128", "display_name": "Aaron Franke", "link": "https://stackoverflow.com/users/4441547/aaron-franke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2137, "favorite_count": 1, "accepted_answer_id": 58507489, "answer_count": 1, "score": 3, "last_activity_date": 1581496104, "creation_date": 1571756678, "last_edit_date": 1581496104, "question_id": 58507190, "link": "https://stackoverflow.com/questions/58507190/how-do-i-use-optimist-in-ruby", "title": "How do I use optimist in Ruby?", "body": "<p>Whenever I run <code>yarn</code>, I get a warning that this gem has been deprecated and that I should switch to optimist as soon as possible:</p>\n\n<pre><code>$ yarn\n[DEPRECATION] This gem has been renamed to optimist and will no longer be supported. Please switch to optimist as soon as possible.\n</code></pre>\n\n<p>Because of this, I ran <code>gem install optimist</code> to install optimist, but I have no idea how to use it. If I simply try to run the command <code>optimist</code>, it doesn't do anything:</p>\n\n<pre><code>$ optimist\n\nCommand 'optimist' not found, did you mean:\n</code></pre>\n\n<p>How do I use optimist? Specifically, how do I use it to replace yarn, since it will no longer be supported in the future?</p>\n"}, {"tags": ["ruby", "pry", "byebug"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571763881, "post_id": 58506691, "comment_id": 103346124, "body": "I don&#39;t think so. Can you explain in greater detail what you mean by walking the stack with pry? That generally requires another gem, so if you can provide more information about the libraries you&#39;re using and the specific actions you&#39;re taking it&#39;ll help."}], "answers": [{"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 1, "last_activity_date": 1571774803, "creation_date": 1571774803, "answer_id": 58511574, "question_id": 58506691, "link": "https://stackoverflow.com/questions/58506691/adding-blackboxed-libraries-to-pry-debugging/58511574#58511574", "title": "Adding blackboxed libraries to Pry debugging", "body": "<p>The requested functionality does not exist in pry-byebug. You can add your +1 (or write some code) on the following <a href=\"https://github.com/deivid-rodriguez/byebug/issues/47\" rel=\"nofollow noreferrer\">GitHub issue for pry-byebug</a>:</p>\n\n<blockquote>\n  <p>My question/suggestion is that if there's a way to filter or skip over external library, or a setting to step into the next line that belongs to a script within the current application. For example, step into a method call will skip over any Rails's internal script or any currently-used gem and stop at the next line of the file that's inside the application.</p>\n</blockquote>\n\n<p>As well as <a href=\"https://github.com/deivid-rodriguez/pry-byebug/issues/215\" rel=\"nofollow noreferrer\">this GitHub issue</a>:</p>\n\n<blockquote>\n  <p>I think it would be super useful to have a command that lets you run until you hit the next line of non-Rails/non-gem code.</p>\n</blockquote>\n\n<p>As the original issue has been open for nearly six years, I think your best bet will be to help build the feature vs. adding a +1 on the existing issues.</p>\n\n<p>The author of pry-byebug also offers <a href=\"https://stackoverflow.com/a/28963429/3784008\">this workaround</a> in another SO answer to a very similar question:</p>\n\n<blockquote>\n  <p>you need to manually set breakpoints to jump from controller to view and the other way around</p>\n</blockquote>\n"}], "owner": {"reputation": 123, "user_id": 1238368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f190364f004d8ed6af502c9aebe944bc?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Tremblay", "link": "https://stackoverflow.com/users/1238368/j%c3%a9r%c3%b4me-tremblay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 58511574, "answer_count": 1, "score": 0, "last_activity_date": 1571774803, "creation_date": 1571755006, "last_edit_date": 1571766995, "question_id": 58506691, "link": "https://stackoverflow.com/questions/58506691/adding-blackboxed-libraries-to-pry-debugging", "title": "Adding blackboxed libraries to Pry debugging", "body": "<p>Is it possible to \"blackbox\" libraries when using Pry?</p>\n\n<p>I like to walk the stack when I hit a breakpoint, but I really don't care about active-record transactions management and such. In fact, it even makes walking the stack completely useless sometimes.</p>\n\n<p>In javascript, it's easy to add scripts to an ignore list and they are just skipped during debugging. Is there a way to achieve a similar behavior with Pry?</p>\n\n<p><strong>Additionnal details</strong></p>\n\n<p>What i mean by stack walk, is using \"up\" to move to the calling source code line which moves the source code marker to the previous stack frame.</p>\n\n<p>I want to ignore frames that are outside my own code, like ActiveRecord and most third-party gems. I don't mind using either a blacklist or a whitelist.</p>\n\n<p>Bundle gives me these gem versions:</p>\n\n<pre><code>Using byebug 9.0.6\nUsing pry 0.12.2\nUsing pry-byebug 3.4.3\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 12259015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2540e0b81a0b6a3fef15459c4fd93b76?s=128&d=identicon&r=PG&f=1", "display_name": "chilliphili", "link": "https://stackoverflow.com/users/12259015/chilliphili"}, "is_accepted": true, "score": 0, "last_activity_date": 1571769290, "creation_date": 1571769290, "answer_id": 58510419, "question_id": 58506322, "link": "https://stackoverflow.com/questions/58506322/sasscsyntaxerror-error-invalid-css-after-media-screen-expected-was/58510419#58510419", "title": "SassC::SyntaxError: Error: Invalid CSS after &quot;@media screen&quot;: expected &quot;{&quot;, was &quot;(min-width: 768px) &quot;", "body": "<p>Looking at the error output you provided the issue is with line:</p>\n\n<p><code>@media screen (min-width: 768px) and (max-width: 992px) {</code></p>\n\n<p>It looks like the syntax is indeed incorrect and the line is missing an <strong>and</strong> after screen, try:</p>\n\n<p><code>@media screen and (min-width: 768px) and (max-width: 992px)</code></p>\n\n<p>Reference: <a href=\"https://www.w3schools.com/css/css3_mediaqueries_ex.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/css/css3_mediaqueries_ex.asp</a></p>\n\n<p>Checking the source code for Bootstrap 3.3.6 where this line is generated (<a href=\"https://github.com/twbs/bootstrap/blob/v3.3.6/less/responsive-utilities.less#L92\" rel=\"nofollow noreferrer\">LESS source code</a> or <a href=\"https://github.com/twbs/bootstrap-sass/blob/5d6b2ebba0c2a5885ce2f0e01e9218db3d3b5e47/assets/stylesheets/bootstrap/_responsive-utilities.scss#L89\" rel=\"nofollow noreferrer\">SASS source code</a>) there's no <strong>screen</strong>, so it should be:</p>\n\n<p><code>@media (min-width: 768px) and (max-width: 992px)</code></p>\n\n<p>It would be worth checking the source of Bootstrap 3.3.6 in your project and try replacing it with <a href=\"https://github.com/twbs/bootstrap/blob/v3.3.6/dist/css/bootstrap.css\" rel=\"nofollow noreferrer\">the official source CSS</a> to see if that resolves this issue for you.</p>\n"}], "owner": {"reputation": 905, "user_id": 1699730, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tHYaE.jpg?s=128&g=1", "display_name": "Pandurang Waghulde", "link": "https://stackoverflow.com/users/1699730/pandurang-waghulde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 58510419, "answer_count": 1, "score": 0, "last_activity_date": 1571769290, "creation_date": 1571753864, "question_id": 58506322, "link": "https://stackoverflow.com/questions/58506322/sasscsyntaxerror-error-invalid-css-after-media-screen-expected-was", "title": "SassC::SyntaxError: Error: Invalid CSS after &quot;@media screen&quot;: expected &quot;{&quot;, was &quot;(min-width: 768px) &quot;", "body": "<p>I am getting following error during asset precompiling. I am using Rails 5 and bootstrap 3.3.6 </p>\n\n<p>Looks like it is showing syntax error for code in bootstrap css. </p>\n\n<p>After running <code>RAILS_ENV=production rake assets:precompile</code></p>\n\n<pre><code>rake aborted!\nSassC::SyntaxError: Error: Invalid CSS after \"@media screen\": expected \"{\", was \"(min-width: 768px) \"\n        on line 16668:8 of stdin\n&gt;&gt; @media screen (min-width: 768px) and (max-width: 992px) {\n\n   -------^\nstdin:16668\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sassc-2.2.0/lib/sassc/engine.rb:49:in `render'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sassc-rails-2.1.2/lib/sassc/rails/compressor.rb:29:in `call'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/sass_compressor.rb:28:in `call'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/processor_utils.rb:75:in `call_processor'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/processor_utils.rb:56:in `reverse_each'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/processor_utils.rb:56:in `call_processors'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/loader.rb:134:in `load_from_unloaded'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/loader.rb:60:in `block in load'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/loader.rb:317:in `fetch_asset_from_dependency_cache'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/loader.rb:44:in `load'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/cached_environment.rb:20:in `block in initialize'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/cached_environment.rb:47:in `load'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/base.rb:66:in `find_asset'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/base.rb:73:in `find_all_linked_assets'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/manifest.rb:142:in `block in find'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/legacy.rb:114:in `block (2 levels) in logical_paths'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/path_utils.rb:228:in `block in stat_tree'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/path_utils.rb:212:in `block in stat_directory'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/path_utils.rb:209:in `each'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/path_utils.rb:209:in `stat_directory'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/path_utils.rb:227:in `stat_tree'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/legacy.rb:105:in `each'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/legacy.rb:105:in `block in logical_paths'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/legacy.rb:104:in `each'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/legacy.rb:104:in `logical_paths'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/manifest.rb:140:in `find'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/sprockets/manifest.rb:186:in `compile'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-rails-3.2.1/lib/sprockets/rails/task.rb:68:in `block (3 levels) in define'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-3.7.2/lib/rake/sprocketstask.rb:147:in `with_logger'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/sprockets-rails-3.2.1/lib/sprockets/rails/task.rb:67:in `block (2 levels) in define'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/gems/rake-12.3.3/exe/rake:27:in `&lt;top (required)&gt;'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/bin/ruby_executable_hooks:15:in `eval'\n/Users/pandurang/.rvm/gems/ruby-2.3.1@selectpicz/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\nTasks: TOP =&gt; assets:precompile\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I am not able to precompile assets. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571753323, "post_id": 58505458, "comment_id": 103340477, "body": "<i>&quot;dictionary &quot;@messages&quot; of Communication class&quot;</i> \u2013 the dictionary belongs to <i>instances</i> of <code>Communication</code>, not the class itself. And each instance will have its own. If you want a &quot;global&quot; dictionary, you have to define it on the <i>class</i> level or use a singleton class."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 5, "last_activity_date": 1571751255, "creation_date": 1571751255, "answer_id": 58505540, "question_id": 58505458, "link": "https://stackoverflow.com/questions/58505458/how-to-use-an-attribute-inside-an-inner-class/58505540#58505540", "title": "How to use an attribute inside an inner class?", "body": "<blockquote>\n  <p>Would I be able to insert the values into <code>@messages</code> from the <code>Message</code> constructor?</p>\n</blockquote>\n\n<p>Nope. Don't be fooled by the nesting. <code>Communication::Message</code> is its own standalone class. When you create an instance of it, you do <strong>not</strong> get an instance of <code>Communication</code> as a bonus.</p>\n\n<p>For almost all practical purposes, treat them as if they were not nested. Nesting affects constant lookup path, but that's pretty much it.</p>\n"}, {"comments": [{"owner": {"reputation": 374, "user_id": 5195976, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f71b0d4a72d7ebe9fa64f58b218d0bf?s=128&d=identicon&r=PG&f=1", "display_name": "mareiou", "link": "https://stackoverflow.com/users/5195976/mareiou"}, "edited": false, "score": 0, "creation_date": 1571752680, "post_id": 58505638, "comment_id": 103340089, "body": "@krmckone it still makes sens to have Message as inner class correct? there is no chance to create a Message object without a Communication existing one."}, {"owner": {"reputation": 175, "user_id": 12238521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8973288c73d093449946af4d2544c52e?s=128&d=identicon&r=PG&f=1", "display_name": "krmckone", "link": "https://stackoverflow.com/users/12238521/krmckone"}, "reply_to_user": {"reputation": 374, "user_id": 5195976, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f71b0d4a72d7ebe9fa64f58b218d0bf?s=128&d=identicon&r=PG&f=1", "display_name": "mareiou", "link": "https://stackoverflow.com/users/5195976/mareiou"}, "edited": false, "score": 0, "creation_date": 1571752908, "post_id": 58505638, "comment_id": 103340233, "body": "@mareiou Right, I just didn&#39;t have it in the original snippet. It&#39;s back in now."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 374, "user_id": 5195976, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f71b0d4a72d7ebe9fa64f58b218d0bf?s=128&d=identicon&r=PG&f=1", "display_name": "mareiou", "link": "https://stackoverflow.com/users/5195976/mareiou"}, "edited": false, "score": 0, "creation_date": 1571767245, "post_id": 58505638, "comment_id": 103347582, "body": "@mareiou: <i>There is no nested class</i>. Ruby doesn&#39;t have nested classes."}], "tags": [], "owner": {"reputation": 175, "user_id": 12238521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8973288c73d093449946af4d2544c52e?s=128&d=identicon&r=PG&f=1", "display_name": "krmckone", "link": "https://stackoverflow.com/users/12238521/krmckone"}, "is_accepted": false, "score": 1, "last_activity_date": 1571752858, "last_edit_date": 1571752858, "creation_date": 1571751612, "answer_id": 58505638, "question_id": 58505458, "link": "https://stackoverflow.com/questions/58505458/how-to-use-an-attribute-inside-an-inner-class/58505638#58505638", "title": "How to use an attribute inside an inner class?", "body": "<p>A solution that you might consider is to encapsulate message creation as a method in Communication.</p>\n\n<pre><code>class Communication\n  def initialize\n    @messages = {:tx =&gt; [], :rx =&gt; []}\n  end\n\n  class Message\n    def initialize (direction, name)\n      # Initialize the message\n    end\n  end\n\n  def create_message(direction, name)\n    if direction == \"TX\"\n        @messages[:tx] &lt;&lt; name #@messages dictionary is attribute from Communication class\n      else\n        @messages[:rx] &lt;&lt; name #@messages dictionary is attribute from Communication class\n    end\n    return Message.new(direction, name)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 374, "user_id": 5195976, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f71b0d4a72d7ebe9fa64f58b218d0bf?s=128&d=identicon&r=PG&f=1", "display_name": "mareiou", "link": "https://stackoverflow.com/users/5195976/mareiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571752858, "creation_date": 1571751023, "question_id": 58505458, "link": "https://stackoverflow.com/questions/58505458/how-to-use-an-attribute-inside-an-inner-class", "title": "How to use an attribute inside an inner class?", "body": "<p>I have the following code:</p>\n\n<pre><code>class Communication\n  def initialize\n    @messages = {:tx =&gt; [], :rx =&gt; []}\n  end\n\n  class Message\n    def initialize (direction, name)\n      if direction == \"TX\"\n        @messages[:tx] &lt;&lt; name #@messages dictionary is attribute from Communication class\n      else\n        @messages[:rx] &lt;&lt; name #@messages dictionary is attribute from Communication class\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Every time I create a new Message object, I want the constructor to see the direction provided and insert it into it's correct key of dictionary \"@messages\" of Communication class. I am not sure how the class Message will distinguish @messages inside its constructor as its own attribute or an attribute from upper level class Communication. Would I be able to insert the values into @messages from the Message constructor? Or do I need to do it from the Communication class level?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "httparty"], "comments": [{"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "edited": false, "score": 0, "creation_date": 1571751184, "post_id": 58505323, "comment_id": 103339184, "body": "can you please elaborate more didn&#39;t get what is your question"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "reply_to_user": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "edited": false, "score": 0, "creation_date": 1571751320, "post_id": 58505323, "comment_id": 103339255, "body": "I&#39;m not sure how more I could elaborate, I&#39;m trying to add the user information into the <code>each</code> statement in the index <code>&lt;p&gt;By: &lt;%= album.user[&#39;userId&#39;] %&gt;&lt;p&gt;</code>"}, {"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "edited": false, "score": 0, "creation_date": 1571752823, "post_id": 58505323, "comment_id": 103340189, "body": "If I get correctly you can directly do it like this way <code>album.user.id</code> you will get the id of that user"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "edited": false, "score": 0, "creation_date": 1571753740, "post_id": 58506119, "comment_id": 103340738, "body": "Where does the first block of code go? How would I go about combine the response there separate urls?"}, {"owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "edited": false, "score": 0, "creation_date": 1571754962, "post_id": 58506119, "comment_id": 103341479, "body": "@B.J.B Please find the updated answer.  If API is maintained by you then you can customize your API response by combining the back end data query"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "edited": false, "score": 0, "creation_date": 1571755338, "post_id": 58506119, "comment_id": 103341706, "body": "All requests are coming from <code>https:&#47;&#47;jsonplaceholder.typicode.com</code>but I&#39;ll take a look at the updated response"}, {"owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "edited": false, "score": 0, "creation_date": 1571755539, "post_id": 58506119, "comment_id": 103341835, "body": "If you don&#39;t have permission to customize then please go for above answer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "edited": false, "score": 0, "creation_date": 1571755747, "post_id": 58506119, "comment_id": 103341958, "body": "I&#39;m getting a syntax error <a href=\"https://i.gyazo.com/82000ff3dca3f517f8cd853952938018.png\" rel=\"nofollow noreferrer\">i.gyazo.com/82000ff3dca3f517f8cd853952938018.png</a>"}, {"owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "edited": false, "score": 0, "creation_date": 1571756355, "post_id": 58506119, "comment_id": 103342310, "body": "Updated the answer @B.J.B"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "edited": false, "score": 0, "creation_date": 1571756721, "post_id": 58506119, "comment_id": 103342507, "body": "OK now I&#39;m getting <a href=\"https://i.gyazo.com/09172ffcde8b2d0a6ab27b1dec38cccd.png\" rel=\"nofollow noreferrer\">i.gyazo.com/09172ffcde8b2d0a6ab27b1dec38cccd.png</a>"}, {"owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "edited": false, "score": 0, "creation_date": 1571757007, "post_id": 58506119, "comment_id": 103342640, "body": "Please debug it, we can\u2019t answer every issue here."}], "tags": [], "owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1571758379, "last_edit_date": 1571758379, "creation_date": 1571753098, "answer_id": 58506119, "question_id": 58505323, "link": "https://stackoverflow.com/questions/58505323/how-to-pass-user-information-into-each-statement-rails/58506119#58506119", "title": "How to pass user information into each statement rails", "body": "<p>You can merge the user details to the album by looping through or please update your API get response combining both user and album.</p>\n\n<p>For now,</p>\n\n<pre><code>class AlbumsController &lt; ApplicationController\n   def index\n      @albums = HTTParty.get('https://jsonplaceholder.typicode.com/albums', :headers =&gt; {'Content-Type' =&gt; 'application/json'}).paginate(:page =&gt; params[:page], :per_page =&gt; 10)\n\n      @user = HTTParty.get('https://jsonplaceholder.typicode.com/users', :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n\n      @albums.each do |album|\n        user = @users.first{|u| u if u.id == album.userId }\n        album.merge!({name: user.name, email: user.email})  if user.present?\n      end\n  end\nend\n</code></pre>\n\n<p>Based on this you can display correct user info based your condition I have added if user email is present check,  </p>\n\n<pre><code>&lt;% @albums.each do |album| %&gt;\n    &lt;% if album[\"email\"].present? %&gt;\n        &lt;div class=\"col-md-4\"&gt;\n          &lt;%# image_tag(@albumImage ['thumbnailUrl']) %&gt;\n          &lt;h5 class=\"card-title\"&gt;\n            &lt;%= album['title'] %&gt;\n          &lt;/h5&gt;\n\n          &lt;p&gt;By: &lt;%= album.user['userId'] %&gt;&lt;p&gt;\n          &lt;%= link_to \"View Album\", album_path(album['id']), class: \"btn btn-primary\" %&gt;\n        &lt;/div&gt;\n     &lt;% end %&gt;\n &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571758379, "creation_date": 1571750574, "question_id": 58505323, "link": "https://stackoverflow.com/questions/58505323/how-to-pass-user-information-into-each-statement-rails", "title": "How to pass user information into each statement rails", "body": "<p>So I'm currently trying to pass user information into an <code>each</code> statement within rails so I can display the album users info</p>\n\n<p>Here's what I have so far</p>\n\n<p>index.html.erb</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;main role=\"main\" class=\"flex-shrink-0\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;h1 class=\"mt-5\"&gt;Albums&lt;/h1&gt;\n    &lt;p class=\"lead\"&gt;Here we show all albums and it's details&lt;/p&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;% @albums.each do |album| %&gt;\n        &lt;div class=\"col-md-4\"&gt;\n          &lt;%# image_tag(@albumImage ['thumbnailUrl']) %&gt;\n          &lt;h5 class=\"card-title\"&gt;\n            &lt;%= album['title'] %&gt;\n          &lt;/h5&gt;\n\n          &lt;p&gt;By: &lt;%= album.user['userId'] %&gt;&lt;p&gt;\n          &lt;%= link_to \"View Album\", album_path(album['id']), class: \"btn btn-primary\" %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;%= will_paginate @albums, renderer: WillPaginate::ActionView::BootstrapLinkRenderer, class: 'margin-auto' %&gt;\n&lt;/main&gt;\n</code></pre>\n\n<p>album.rb</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Album &lt; ApplicationRecord\n  include HTTParty\n\n  belongs_to :user\nend\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :albums\nend\n</code></pre>\n\n<p>album_controller.rb</p>\n\n<pre><code>require 'will_paginate/array'\n\nclass AlbumsController &lt; ApplicationController\n  def index\n    @albums = HTTParty\n      .get('https://jsonplaceholder.typicode.com/albums', :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n      .paginate(:page =&gt; params[:page], :per_page =&gt; 10)\n\n    @user = HTTParty\n      .get('https://jsonplaceholder.typicode.com/users/' + params[:id], :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n  end\n\n  def show\n    @album = HTTParty\n      .get('https://jsonplaceholder.typicode.com/albums/' + params[:id], :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n\n    @albumPhotos = HTTParty\n      .get('https://jsonplaceholder.typicode.com/photos?album=' + params[:id], :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n      .paginate(:page =&gt; params[:page], :per_page =&gt; 10)\n\n    @user = HTTParty\n      .get('https://jsonplaceholder.typicode.com/users/' + params[:id], :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n  end\nend\n</code></pre>\n\n<p>I'm grabbing all info from API's, no database data. Obviously, I'm trying to grab the user data to place it into the <code>each</code> but I also want to make sure that the <code>userID</code> matches in the album show as well so it displays the right user information</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "answers": [{"tags": [], "owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "is_accepted": true, "score": 5, "last_activity_date": 1571743632, "last_edit_date": 1571743632, "creation_date": 1571742994, "answer_id": 58503064, "question_id": 58502741, "link": "https://stackoverflow.com/questions/58502741/idiomatic-csv-export-in-rails/58503064#58503064", "title": "Idiomatic CSV export in Rails", "body": "<p>You can deliver different formats of a view from a single controller action.</p>\n\n<pre><code>class SubmissionsController &lt; ApplicationController\n  def index\n    @submissions = Submission.submissions_for(user: current_user)\n\n    respond_to do |format|\n      format.html\n      format.csv { send_data @submissions.to_csv, filename: \"users-#{Date.today}.csv\" }\n  end\nend\n</code></pre>\n\n<p>Then if you do the request with <code>.csv</code> it will deliver the csv instead of the view.</p>\n\n<p>To get the right url use the url_helper as follows:</p>\n\n<pre><code>link_to 'CSV Export', submissions_path(format: :csv)\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58503064, "answer_count": 1, "score": 2, "last_activity_date": 1571743632, "creation_date": 1571741968, "question_id": 58502741, "link": "https://stackoverflow.com/questions/58502741/idiomatic-csv-export-in-rails", "title": "Idiomatic CSV export in Rails", "body": "<p>I have an index view of <code>submissions</code> and in the view I have <code>@submissions</code> the controller looks like this:</p>\n\n<h3>Submissions Controller</h3>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def index \n  @submissions = Submission.submissions_for(user: current_user)\nend\n</code></pre>\n\n<p>From the view I want to essentially click a button and pass in that list of <code>submissions</code></p>\n\n<p>I've thought of adding a new route like so:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= link_to \"Export\", export_submissions_path(submissions: @submissions) %&gt;\n</code></pre>\n\n<p>But that doesn't feel quite right because I need to stay on the index page. So when the user clicks the <code>export</code> button they stay on the <code>index</code> page but a CSV of the current data gets created. So, this questions is \"how to create a CSV\" it's more how do I stay on the index page and send a request to the server to send a CSV?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1571739769, "post_id": 58501767, "comment_id": 103332893, "body": "You can replace <code>locolhost&#47;users</code> with <code>locolhost&#47;username</code> but it is impossible to replace member route to collection route. Perhaps, you can do  <code>locolhost&#47;users&#47;22</code> with <code>locolhost&#47;username&#47;22</code>"}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1571744178, "post_id": 58501767, "comment_id": 103335171, "body": "btw: Don&#39;t get discouraged by the downvotes, your question was not quite clear, that&#39;s why I edited the question, keep it up, but you could try to work on the language of the question a bit more! Good luck!"}], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1571739814, "post_id": 58502131, "comment_id": 103332920, "body": "Can you provide routes defined by <code>rake routes | grep user</code> ?"}], "tags": [], "owner": {"reputation": 807, "user_id": 1688322, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/cZ6Ai.jpg?s=128&g=1", "display_name": "Robin van Dijk", "link": "https://stackoverflow.com/users/1688322/robin-van-dijk"}, "is_accepted": false, "score": 1, "last_activity_date": 1571740135, "last_edit_date": 1571740135, "creation_date": 1571739757, "answer_id": 58502131, "question_id": 58501767, "link": "https://stackoverflow.com/questions/58501767/how-to-configure-routes-for-user/58502131#58502131", "title": "How to configure routes for user", "body": "<p>You can add a <code>param</code> option to the routes.</p>\n\n<pre><code>resources :users, param: :name, only: %i(show edit update) do\n  member do\n    get :follows\n    get :statistic\n    get :my_topics, path: :topics\n  end\nend\n</code></pre>\n\n<p>Using <code>rake routes | grep user</code> will result in the following.</p>\n\n<pre><code>  follows_user GET      /users/:name/follows(.:format)     users#follows\nstatistic_user GET      /users/:name/statistic(.:format)   users#statistics\nmy_topics_user GET      /users/:name/topics(.:format)      users#my_topics\n     edit_user GET      /users/:name/edit(.:format)        users#edit\n          user GET      /users/:name(.:format)             users#show\n               PATCH    /users/:name(.:format)             users#update\n               PUT      /users/:name(.:format)             users#update\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9877, "user_id": 92096, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0383770fd6f592f2219026793be13d3d?s=128&d=identicon&r=PG", "display_name": "pdu", "link": "https://stackoverflow.com/users/92096/pdu"}, "is_accepted": false, "score": 1, "last_activity_date": 1571744977, "creation_date": 1571744977, "answer_id": 58503642, "question_id": 58501767, "link": "https://stackoverflow.com/questions/58501767/how-to-configure-routes-for-user/58503642#58503642", "title": "How to configure routes for user", "body": "<p>Just to extend on nice the answer from Robert: Another way would be to use a gem that is dedicated to do exactly this. One of the many options could be <a href=\"https://github.com/norman/friendly_id\" rel=\"nofollow noreferrer\">https://github.com/norman/friendly_id</a>.</p>\n\n<p>The gist of it is that you add a field to your user model (here, <code>slug</code>, that holds the url segment) which you generate in your model. For fetching records, a method is used that takes either the id as before, or the slug.</p>\n\n<p>In your case, this might be an overkill unless you consider to have the same url requirement for other routes and models.</p>\n\n<p>Side note: I have no affiliation with this project, I just used it a few times before.</p>\n"}], "owner": {"reputation": 31, "user_id": 12185687, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aAWaccjj0qI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reSMFGUvuUSy6V7XPp5n-pMWd9WtQ/photo.jpg?sz=128", "display_name": "duong tang", "link": "https://stackoverflow.com/users/12185687/duong-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571744977, "creation_date": 1571738558, "last_edit_date": 1571743478, "question_id": 58501767, "link": "https://stackoverflow.com/questions/58501767/how-to-configure-routes-for-user", "title": "How to configure routes for user", "body": "<p>I want the <code>users#show</code> action to be available under the attribute username instead of the user_id.</p>\n\n<p>So if I go to a user, I want the url to show something like <code>users/some_username</code> instead of <code>users/22</code></p>\n\n<p>My Routes:</p>\n\n<pre><code>resources :users, only: %i(show edit update) do\n      member do\n        get :follows\n        get :statistic\n        get :my_topics, path: :topics\n      end\n    end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1571739185, "post_id": 58501684, "comment_id": 103332562, "body": "What do you mean by &#39;this isn&#39;t working&#39; ? Is it giving enexpected behaviour or  throwing error, if yes update question with error log"}, {"owner": {"reputation": 414, "user_id": 8818882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/drZy3.jpg?s=128&g=1", "display_name": "Theo Cerutti", "link": "https://stackoverflow.com/users/8818882/theo-cerutti"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1571740188, "post_id": 58501684, "comment_id": 103333133, "body": "Oh yes sorry, I just want to know why the first example is not the same thing than the second.."}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1571747150, "creation_date": 1571747150, "answer_id": 58504261, "question_id": 58501684, "link": "https://stackoverflow.com/questions/58501684/ruby-inherit-class-in-the-same-module-in-2-separates-files/58504261#58504261", "title": "Ruby Inherit Class in the same module in 2 separates files", "body": "<p>I don't know what you mean by</p>\n\n<blockquote>\n  <p>I tested and it's not [the same]</p>\n</blockquote>\n\n<p>Because you didn't explain what unexpected result/difference you are seeing.</p>\n\n<p><em>However...</em></p>\n\n<p>Generally speaking, both versions of that code should behave exactly the same. There is only one subtle difference.</p>\n\n<p>In this version:</p>\n\n<pre><code>module Module\n  class B &lt; A\n  end\nend\n</code></pre>\n\n<p>The class <code>A</code> will first try to resolve as <code>Module::A</code>, and then (if such a class is not found) it will try to resolve as <code>::A</code> (i.e. a top-level class).</p>\n\n<p>Therefore the behaviour will be different only if <code>Module::A</code> does not exist/has not been loaded, and <code>::A</code> does exist and has been loaded.</p>\n"}], "owner": {"reputation": 414, "user_id": 8818882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/drZy3.jpg?s=128&g=1", "display_name": "Theo Cerutti", "link": "https://stackoverflow.com/users/8818882/theo-cerutti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 58504261, "answer_count": 1, "score": 0, "last_activity_date": 1571747150, "creation_date": 1571738250, "last_edit_date": 1571740112, "question_id": 58501684, "link": "https://stackoverflow.com/questions/58501684/ruby-inherit-class-in-the-same-module-in-2-separates-files", "title": "Ruby Inherit Class in the same module in 2 separates files", "body": "<p>I would like to inherit a class the same module but in two separates files.</p>\n\n<pre><code># file1.rb\nmodule Module\n  class A\n  end\nend\n</code></pre>\n\n<p>I try something and this works:</p>\n\n<pre><code># file2.rb\nclass Module::B &lt; Module::A\nend\n</code></pre>\n\n<p>But it looks like weird.. no ?</p>\n\n<p>Is this is the same as the example above ? I tested and it's not.. Why ?</p>\n\n<pre><code># file2.rb\nmodule Module\n  class B &lt; A\n  end\nend\n</code></pre>\n\n<p>Thanks !</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571736288, "post_id": 58500749, "comment_id": 103330899, "body": "There are 3 lines containing various <code>id=value</code> pairs. What&#39;s the expected result?"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1571736528, "post_id": 58500749, "comment_id": 103331019, "body": "Your current code will return only a single instance of role, for the entire array. You might as well do <code>role = &#39;admin&#39; if roles.last = ...</code> but I doubt that&#39;s what you&#39;re looking for here. What should the method return for the array you provided ?"}, {"owner": {"reputation": 2627, "user_id": 1119043, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7141e066d691d7f18765c1ea6389b18?s=128&d=identicon&r=PG", "display_name": "belgoros", "link": "https://stackoverflow.com/users/1119043/belgoros"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571736752, "post_id": 58500749, "comment_id": 103331133, "body": "@Stefan, the expected result is not <code>id</code> but the matched result for <code>id=Admin</code>. If it is matched, I have to return &#39;admin&#39;, if <code>id=custom</code> matches, I have to assign <code>user</code> to the <code>role</code> variable."}, {"owner": {"reputation": 2627, "user_id": 1119043, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7141e066d691d7f18765c1ea6389b18?s=128&d=identicon&r=PG", "display_name": "belgoros", "link": "https://stackoverflow.com/users/1119043/belgoros"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1571736825, "post_id": 58500749, "comment_id": 103331169, "body": "@\u0412\u0438\u043a\u0442\u043e\u0440: All the roles are unique in the provided array.  I have to match <code>id={some role value}</code> and assign the corresponding value to the <code>role</code> variable."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571737085, "post_id": 58500749, "comment_id": 103331312, "body": "@belgoros but both match. Your data contains both, <code>id=Admin</code> and <code>id=custom</code>. The provided example code would set <code>role</code> to <code>&#39;user&#39;</code>. Do you just want the last match?"}, {"owner": {"reputation": 2627, "user_id": 1119043, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7141e066d691d7f18765c1ea6389b18?s=128&d=identicon&r=PG", "display_name": "belgoros", "link": "https://stackoverflow.com/users/1119043/belgoros"}, "edited": false, "score": 0, "creation_date": 1571737088, "post_id": 58500749, "comment_id": 103331313, "body": "I could also use a shorter version: <code>roles.map{|role| role.match(&#47;id=Admin&#47;)}.compact.first[0]</code>, but this will only work for <code>Admin</code>, so I didn&#39;t remove if/else conditions in case if there are more roles to match. Do you see?"}, {"owner": {"reputation": 2627, "user_id": 1119043, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7141e066d691d7f18765c1ea6389b18?s=128&d=identicon&r=PG", "display_name": "belgoros", "link": "https://stackoverflow.com/users/1119043/belgoros"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571737267, "post_id": 58500749, "comment_id": 103331427, "body": "@Stefan: sorry, I updated the above example, - there will be no cases of double entries (like <code>Admin</code> and <code>Custom</code>). Only 3 of the roles should be extracted."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1571818650, "last_edit_date": 1571818650, "creation_date": 1571738750, "answer_id": 58501824, "question_id": 58500749, "link": "https://stackoverflow.com/questions/58500749/how-to-assign-a-value-to-a-variable-depending-on-array-processing-result/58501824#58501824", "title": "How to assign a value to a variable depending on array processing result", "body": "<p>You could define a <a href=\"https://ruby-doc.org/core-2.6.5/Regexp.html\" rel=\"nofollow noreferrer\">regular expression</a> to match several roles at once. Here's a simple one:</p>\n\n<pre><code>/id=(Admin|National|Local)/\n</code></pre>\n\n<p>The parentheses act as a capturing group for the role name. You might want to add anchors, e.g. to only match the first <code>id=value</code> pair in each line. Or to ensure that you match the whole value instead of just the beginning if these can be ambiguous.</p>\n\n<p>The pattern can then be passed to <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-grep\" rel=\"nofollow noreferrer\"><code>grep</code></a> which returns the matching lines:</p>\n\n<pre><code>roles.grep(/id=(Admin|National|Local)/)\n#=&gt; [\"id=Admin,id=YOYO,id=custom\"]\n</code></pre>\n\n<p>Passing a block to <code>grep</code> allows us to transform the match: (<a href=\"https://ruby-doc.org/core-2.6.5/Regexp.html#class-Regexp-label-Special+global+variables\" rel=\"nofollow noreferrer\"><code>$1</code></a> refers to the first capture group)</p>\n\n<pre><code>roles.grep(/id=(Admin|National|Local)/) { $1.downcase }\n#=&gt; [\"admin\"]\n</code></pre>\n\n<p>To get the <a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-first\" rel=\"nofollow noreferrer\"><code>first</code></a> role:</p>\n\n<pre><code>roles.grep(/id=(Admin|National|Local)/) { $1.downcase }.first\n#=&gt; \"admin\"\n</code></pre>\n\n<p>If your array is large you can use a <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-lazy\" rel=\"nofollow noreferrer\"><code>lazy</code></a> enumerator which will stop traversing after the first match:</p>\n\n<pre><code>roles.lazy.grep(/id=(Admin|National|Local)/) { $1.downcase }.first\n#=&gt; \"admin\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2627, "user_id": 1119043, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7141e066d691d7f18765c1ea6389b18?s=128&d=identicon&r=PG", "display_name": "belgoros", "link": "https://stackoverflow.com/users/1119043/belgoros"}, "edited": false, "score": 0, "creation_date": 1571752006, "post_id": 58505351, "comment_id": 103339622, "body": "thank you very much, - nice catch about the regex value. Sure it&#39;s more complicated compared to @Stefan&#39;s one :)"}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 2, "last_activity_date": 1571833909, "last_edit_date": 1571833909, "creation_date": 1571750643, "answer_id": 58505351, "question_id": 58500749, "link": "https://stackoverflow.com/questions/58500749/how-to-assign-a-value-to-a-variable-depending-on-array-processing-result/58505351#58505351", "title": "How to assign a value to a variable depending on array processing result", "body": "<p>Well the obvious way I think would be to simply parse the whole roles array:</p>\n\n<pre><code>roles = [\n  \"id=Accountant,id=TOTO,id=client\",\n  \"id=Admin,id=YOYO,id=custom\",\n  \"id=CDI,id=SC\"\n]\n\nuser_roles = roles.join(',').split(',').map { |r| r.split('=', 2).last.downcase }\n</code></pre>\n\n<p>Where <code>user_roles</code> becomes:</p>\n\n<pre><code>[\"accountant\", \"toto\", \"client\", \"admin\", \"yoyo\", \"custom\", \"cdi\", \"sc\"]\n</code></pre>\n\n<p>Now you can simply do something like: </p>\n\n<pre><code>user_roles.include?('admin')\n</code></pre>\n\n<p>Or to find any of the \"admin\", \"national\", \"local\" occurences:</p>\n\n<pre><code># array1 AND array2, finds the elements that occur in both:\n&gt; %w(admin national local) &amp; user_roles\n=&gt; [\"admin\"]\n</code></pre>\n\n<p>Or perhaps to just find out if the user has any of those roles:</p>\n\n<pre><code># When there are no matching elements, it will return an empty array\n&gt; (%w(admin national local) &amp; user_roles).empty?\n=&gt; false \n&gt; ([\"megaboss\", \"superadmin\"] &amp; user_roles).empty?\n=&gt; true \n</code></pre>\n\n<p>And here it is in a more complete example with constants and methods and all!</p>\n\n<pre><code>SUPERVISOR_ROLES = %w(admin national local)\n\ndef is_supervisor?(roles)\n  !(SUPERVISOR_ROLES &amp; roles).empty?\nend\n\ndef parse_roles(raw_array)\n  raw_array.flat_map { |r| r.split(',').map { |r| r.split('=', 2).last.downcase } }\nend\n\nroles = [\n   \"id=Accountant,id=TOTO,id=client\",\n   \"id=Admin,id=YOYO,id=custom\",\n   \"id=CDI,id=SC\"\n ]\n\nraise \"you no boss :(\" unless is_supervisor?(parse_roles(roles))\n</code></pre>\n\n<p>This of course may be inefficient if the data set is large, but a bit cleaner and maybe even safer than performing such a regex, for example someone could create a role called <code>AdminHack</code> which would still be matched by the <code>/id=Admin/</code> regex and by writing such a general role parser may become useful along the way if you want to check for other roles for other purposes.</p>\n\n<p>(And yes, obviously this solution creates a hefty amount of intermediary arrays and other insta-discarded objects and has plenty of room for optimization)</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1571768472, "creation_date": 1571768472, "answer_id": 58510238, "question_id": 58500749, "link": "https://stackoverflow.com/questions/58500749/how-to-assign-a-value-to-a-variable-depending-on-array-processing-result/58510238#58510238", "title": "How to assign a value to a variable depending on array processing result", "body": "<p>If we wish to find a particular spy from a group of cells we could merely round up all the spies from all the cells and examine them sequentially until the culpit is found.</p>\n\n<p>Here the equivalent is to <code>join</code> the strings from the given array to form a single string and then search that string for the given substring:</p>\n\n<pre><code>str = roles.join(' ').downcase\n  #=&gt; \"id=accountant,id=toto,id=client id=admin,id=yoyo,id=custom id=cdi,id=sc\"\n</code></pre>\n\n<p><code>join</code>'s argument could be a space, newline, comma or any of several other strings (I've used a space).</p>\n\n<p>We then simply look for a match, using the method <a href=\"https://ruby-doc.org/core-2.6.3/String.html\" rel=\"nofollow noreferrer\">String#[]</a> and the regular expression:</p>\n\n<pre><code>r = /\n    (?&lt;=id=)                 # match 'id=' in a positive lookbehind\n    (?:admin|national|local) # match 'admin', 'national' or 'local'\n    (?!\\w)                   # do not match a word character (negative lookahead)\n    /x                       # free-spacing regex definition mode\n</code></pre>\n\n<p>In normal (not free-spacing mode) this is:</p>\n\n<pre><code>/(?&lt;=id=)(?:admin|national|local)(?!\\w)/\n</code></pre>\n\n<p><code>'id='</code>, being in a positive lookbehind, is not included in the match. The negative lookahead, <code>(?!\\w)</code>, ensures that the match is not immediately followed by a word character. That prevents a match, for example, on the word 'administration'.</p>\n\n<p>We now simply extract the match, if there is one:</p>\n\n<pre><code>str[r] #=&gt; \"admin\"\n</code></pre>\n\n<p>Had there not been a match, <code>nil</code> would have been returned.</p>\n\n<p>We could have instead downcased at the end:</p>\n\n<pre><code>str = roles.join(' ')\nstr[/(?&lt;=id=)([aA]dmin|[nN]ational|[lL]ocal)(?!\\w)/i].downcase\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1571793376, "last_edit_date": 1571793376, "creation_date": 1571791126, "answer_id": 58513952, "question_id": 58500749, "link": "https://stackoverflow.com/questions/58500749/how-to-assign-a-value-to-a-variable-depending-on-array-processing-result/58513952#58513952", "title": "How to assign a value to a variable depending on array processing result", "body": "<p>I like Stefen's answer, but didn't like that it could run a long time grabbing <code>id</code> values before exiting the <code>grep</code> if the list of roles was really big. I also didn't like the pattern because it wasn't anchored to the beginning of the search string, forcing the engine to do more work.</p>\n\n<p>I'd rather see the code stop at the first hit so this was a first attempt:</p>\n\n<pre><code>roles = [\n  \"id=Accountant,id=TOTO,id=client\",\n  \"id=Admin,id=YOYO,id=custom\",\n  \"id=CDI,id=SC\"\n]\n\nfound_role = nil\nroles.each do |i|\n  r = i[/^id=(Admin|National|Local)/]\n  if r\n    found_role = r.downcase \n    break\n  end\nend\nfound_role # =&gt; \"id=admin\"\n</code></pre>\n\n<p>Thinking about that kept nagging at me as being too verbose, so this popped out:</p>\n\n<pre><code>roles = [\n  \"id=Accountant,id=TOTO,id=client\",\n  \"id=Admin,id=YOYO,id=custom\",\n  \"id=CDI,id=SC\"\n]\n\nroles.find { |i| i[/^id=(Admin|National|Local)/] }.downcase[/^(id=\\w+),/, 1]\n# =&gt; \"id=admin\"\n</code></pre>\n\n<p>Breaking it down, here are the high spots:</p>\n\n<ul>\n<li><code>i[/^id=(Admin|National|Local)/]</code> returns the matching string <code>\"id=Admin...\"</code> and exits the loop.</li>\n<li><code>downcase[/^(id=\\w+),/, 1]</code> grabs the first pair and returns it.</li>\n</ul>\n\n<p>Then, being as anal as I am, I figured <code>downcase</code> would be doing too much work too so this happened:</p>\n\n<pre><code>roles.find { |i| i[/^id=(Admin|National|Local)/] }[/^(id=\\w+),/, 1].downcase\n</code></pre>\n\n<p>It's pretty cryptic Ruby, and we're not really supposed to write code this way, but I used to write C and Perl so it seems reasonable to me. </p>\n\n<p>And the interesting part:</p>\n\n<pre><code>require 'fruity'\n\nroles = [\n  \"id=Accountant,id=TOTO,id=client\",\n  \"id=Admin,id=YOYO,id=custom\",\n  \"id=CDI,id=SC\"\n]\n\ncompare do\n  numero_uno {\n    found_role = nil\n    roles.each do |i|\n      r = i[/^id=(Admin|National|Local)/]\n      if r\n        found_role = r.downcase \n        break\n      end\n    end\n    found_role\n  }\n\n  numero_dos { roles.find { |i| i[/^id=(Admin|National|Local)/] }.downcase[/^(id=\\w+),/, 1] }\n\n  numero_tres { roles.find { |i| i[/^id=(Admin|National|Local)/] }[/^(id=\\w+),/, 1].downcase }\nend\n\n# &gt;&gt; Running each test 2048 times. Test will take about 1 second.\n# &gt;&gt; numero_uno is similar to numero_tres\n# &gt;&gt; numero_tres is faster than numero_dos by 10.000000000000009% \u00b1 10.0%\n</code></pre>\n"}], "owner": {"reputation": 2627, "user_id": 1119043, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7141e066d691d7f18765c1ea6389b18?s=128&d=identicon&r=PG", "display_name": "belgoros", "link": "https://stackoverflow.com/users/1119043/belgoros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1571833909, "creation_date": 1571735264, "last_edit_date": 1571789581, "question_id": 58500749, "link": "https://stackoverflow.com/questions/58500749/how-to-assign-a-value-to-a-variable-depending-on-array-processing-result", "title": "How to assign a value to a variable depending on array processing result", "body": "<p>Is there is a better solution for such a trivial task?</p>\n\n<p>Given an array of strings as follows:</p>\n\n<pre><code>roles = [\n    \"id=Accountant,id=TOTO,id=client\",\n    \"id=Admin,id=YOYO,id=custom\",\n    \"id=CDI,id=SC\"\n    ]\n</code></pre>\n\n<p>To extract a role value based on its <code>id</code> value I'm using the following regex expression to match it:</p>\n\n<pre><code>r =~ /id=Admin/\n</code></pre>\n\n<p>The dumb simple solution would be just to iterate on the <code>roles</code> array, assign the matched value and return it as follows:</p>\n\n<pre><code>role = nil\nroles.each do |r|\n role = 'admin' if r =~ /id=Admin/\n role = 'national' if r =~ /id=National/\nrole = 'local' if r =~ /id=Local/\nend\n\nrole\n</code></pre>\n\n<p>Is there a better solution? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.2"], "answers": [{"comments": [{"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1571736189, "post_id": 58500767, "comment_id": 103330836, "body": "I am getting an error Could not log &quot;unpermitted_parameters.action_controller&quot; event. NameError: uninitialized constant RED"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1571740202, "post_id": 58500767, "comment_id": 103333142, "body": "@AniketShivamTiwari Yes I guess you have to define constant RED as defined in that existing file."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1571735334, "creation_date": 1571735334, "answer_id": 58500767, "question_id": 58500563, "link": "https://stackoverflow.com/questions/58500563/monkey-patch-unpermitted-parameters-in-actioncontroller/58500767#58500767", "title": "Monkey patch unpermitted_parameters in actioncontroller", "body": "<p>I suggest to keep your code under <code>config/initializers</code> folder as <code>.rb</code> file which will open class and override as per your code.</p>\n\n<p>Also, Have a look on <a href=\"http://www.justinweiss.com/articles/3-ways-to-monkey-patch-without-making-a-mess/\" rel=\"nofollow noreferrer\">3 ways to monkey patch</a></p>\n"}, {"tags": [], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "is_accepted": true, "score": 0, "last_activity_date": 1574399979, "creation_date": 1574399979, "answer_id": 58987971, "question_id": 58500563, "link": "https://stackoverflow.com/questions/58500563/monkey-patch-unpermitted-parameters-in-actioncontroller/58987971#58987971", "title": "Monkey patch unpermitted_parameters in actioncontroller", "body": "<p>Finally, I found the solution </p>\n\n<pre><code>\"Unpermitted parameter#{'s' if unpermitted_keys.size &gt; 1}: #{unpermitted_keys.map { |e| \":#{e}\" }.join(\", \")}\".green\n</code></pre>\n\n<p>The keyword green is given by colorize gem</p>\n"}], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 58987971, "answer_count": 2, "score": 1, "last_activity_date": 1574399979, "creation_date": 1571734680, "last_edit_date": 1571827849, "question_id": 58500563, "link": "https://stackoverflow.com/questions/58500563/monkey-patch-unpermitted-parameters-in-actioncontroller", "title": "Monkey patch unpermitted_parameters in actioncontroller", "body": "<p>I was going through one of the <a href=\"https://github.com/rails/rails/pull/34617/files\" rel=\"nofollow noreferrer\">PR</a> in rails 6  where they have added a color property to the unpermitted parameter. I found it quite imperative for my application because we usually have a very long log. I thought to include the same functionality in my Rails 5 application</p>\n\n<p>I created an ext folder inside my app and there added the below code</p>\n\n<p>And in initializers folder </p>\n\n<pre><code>require \"#{Rails.root}/app/ext/action_controller_override.rb\"\n</code></pre>\n\n<p>file_name: <strong>action_controller_override.rb</strong></p>\n\n<pre><code>ActionController::LogSubscriber.class_eval do\n\n  def unpermitted_parameters(event)\n      debug do\n        unpermitted_keys = event.payload[:keys]\n        color(\"Unpermitted parameter#{'s' if unpermitted_keys.size &gt; 1}: #{unpermitted_keys.map { |e| \":#{e}\" }.join(\", \")}\", RED)\n      end\n    end\n\nend\n</code></pre>\n\n<p>But the above code giving me error. </p>\n\n<p>Could not log <strong>unpermitted_parameters.action_controller event. NameError: uninitialized constant RED</strong> </p>\n\n<p>So, can anyone shed a light on it and tell me where I am going wrong</p>\n"}, {"tags": ["ruby", "ruby-2.6"], "comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1571732561, "post_id": 58499763, "comment_id": 103328687, "body": "Can you post valid Ruby code? When you copy the code you&#39;ve posted and try to run it, it will throw an error. Can you also include an example and the desired result from that example after calling the method you need ?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571733946, "post_id": 58499763, "comment_id": 103329529, "body": "You have two <code>hidden:</code> keys in your hash \u2013 is that a typo?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571734104, "post_id": 58499763, "comment_id": 103329598, "body": "Where does that <code>if hidden = &#39;&#39;</code> / <code>if hidden = &#39;true&#39;</code> in your output come from? And why do you expect the output to leave out a field although you explicitly specify it in the return value of <code>map</code>?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1571734402, "post_id": 58499763, "comment_id": 103329766, "body": "What does &quot;Conditions aren&#39;t working inside a block&quot; mean? A block is just arbitrary normal standard Ruby code, there is nothing special about it. Why would conditions not work in it? Try, e.g. <code>(0..).each do |n| p n if n.even? end</code>"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 6378273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsko5.png?s=128&g=1", "display_name": "QWD666", "link": "https://stackoverflow.com/users/6378273/qwd666"}, "edited": false, "score": 0, "creation_date": 1571733802, "post_id": 58500132, "comment_id": 103329425, "body": "Well, I thought there were elegant solutions, but apparently will have to do through reject"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 129, "user_id": 6378273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsko5.png?s=128&g=1", "display_name": "QWD666", "link": "https://stackoverflow.com/users/6378273/qwd666"}, "edited": false, "score": 0, "creation_date": 1571734096, "post_id": 58500132, "comment_id": 103329596, "body": "I think the first is the least ugly but yeah, you would expect Rails to offer something nicer"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571735209, "post_id": 58500132, "comment_id": 103330263, "body": "In your 2nd example, <code>hash_with_nils</code> is actually an array (of hashes). You&#39;d have to call <code>reject</code> on the inner hash, i.e. that within <code>map</code>. But there&#39;s no advantage over <code>compact</code> in this case."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571735583, "post_id": 58500132, "comment_id": 103330477, "body": "And there&#39;s a minor difference between the first and last example: <code>compact</code> only removes <code>nil</code> values whereas <code>if field.hidden</code> would also omit <code>false</code> values. You&#39;d have to explicitly test for <code>if field.hidden.nil?</code> to make them equivalent."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 3, "last_activity_date": 1571754615, "last_edit_date": 1571754615, "creation_date": 1571733236, "answer_id": 58500132, "question_id": 58499763, "link": "https://stackoverflow.com/questions/58499763/map-with-conditions/58500132#58500132", "title": "Map with conditions", "body": "<p>A quick and dirty fix is to just compact the hash after:</p>\n\n<pre><code>account_info.fields.map do |field|\n  {\n    id: field.id,\n    hidden: field.hidden\n    size: field.size\n  }.compact!\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>account_info.fields.map do |field|\n  {\n    id: field.id,\n    hidden: field.hidden\n    size: field.size\n  }.reject{|k,v| v.nil?}\nend\n</code></pre>\n\n<p>Or finally without assigning any nil values in the first place:</p>\n\n<pre><code>account_info.fields.map do |field|\n  h = Hash.new\n  h[:id] = field.id if !field.id.nil?\n  h[:hidden] = field.hidden if !field.hidden.nil?\n  h[:size] = field.size if !field.size.nil?\n  h\nend\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 6378273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nsko5.png?s=128&g=1", "display_name": "QWD666", "link": "https://stackoverflow.com/users/6378273/qwd666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58500132, "answer_count": 1, "score": 0, "last_activity_date": 1571819544, "creation_date": 1571731905, "last_edit_date": 1571819544, "question_id": 58499763, "link": "https://stackoverflow.com/questions/58499763/map-with-conditions", "title": "Map with conditions", "body": "<p>How can I use <code>#map</code> to hide an attribute if it's <code>nil</code>?</p>\n\n<p>Conditions aren't working inside a block, so I tried this:</p>\n\n<pre><code>account_info = some_db_request\naccount_info.fields.map do |field|\n                    {\n                        id: field.id,\n                        hidden: field.hidden\n                        size: field.size\n                    }\naccount_info\n=&gt; \"{\\\"email\\\":\\\"admin@test.com\\\",\\\"name\\\":\\\"admin@test.com\\\",\\\"roles\\\":[\\\"admin\\\",\\\"user\\\"],\\\"fields\\\":[{:id=&gt;3, :hidden=&gt;\"\",size=&gt;80},{:id=&gt;3, :hidden=&gt;\"true\",size=&gt;80}],\\\"redirect_to\\\":[]}\"\nthen I convert output in json\n\n</code></pre>\n\n<p>I expected:</p>\n\n<pre><code>\"fields\": [\n        {\n            \"id\": 3, # if hidden = ''\n            \"size\": 90\n        },\n        {\n            \"id\": 4,\n            \"hidden\": \"true\", if hidden = 'true'\n            \"size\": 190\n        }]\n</code></pre>\n\n<p>But got:</p>\n\n<pre><code>\"fields\": [\n        {\n            \"id\": 3,\n            \"hidden\" = ''\n            \"size\": 90\n        },\n        {\n            \"id\": 4,\n            \"hidden\": \"true\" if hidden = 'true'\n            \"size\": 190\n        }]\n</code></pre>\n\n<p>How can I get the expected output?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571726591, "post_id": 58498262, "comment_id": 103325852, "body": "Why do you have to check if the keys are present?"}, {"owner": {"reputation": 19, "user_id": 7558228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad52c045a6c0425c1de5b72ae056a6b6?s=128&d=identicon&r=PG&f=1", "display_name": "Hemaraj", "link": "https://stackoverflow.com/users/7558228/hemaraj"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571727034, "post_id": 58498262, "comment_id": 103326084, "body": "what if a key is not present and delete action on that particular key is called"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1571729052, "post_id": 58498262, "comment_id": 103327014, "body": "@Hermaraj : From the Ruby docs for <i>Hash#delete</i> : <i>Deletes and returns a key-value pair from hsh whose key is equal to key. If the key is not found, returns the default value.</i> hence, I would simply drop the test."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1571730803, "post_id": 58498732, "comment_id": 103327769, "body": "Or <code>except!</code> to modify the hash in-place."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 2, "last_activity_date": 1571727756, "creation_date": 1571727756, "answer_id": 58498732, "question_id": 58498262, "link": "https://stackoverflow.com/questions/58498262/ruby-check-multiple-keys-in-hash-and-delete-it/58498732#58498732", "title": "Ruby: Check multiple keys in hash and delete it", "body": "<p>You can go following way,</p>\n\n<pre><code>hash = { foo: :foo, bar: :bar, meh: :meh }\noutput = hash.except(:meh, :bar)\n# =&gt; {:foo=&gt;:foo}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7558228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad52c045a6c0425c1de5b72ae056a6b6?s=128&d=identicon&r=PG&f=1", "display_name": "Hemaraj", "link": "https://stackoverflow.com/users/7558228/hemaraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571727756, "creation_date": 1571725792, "question_id": 58498262, "link": "https://stackoverflow.com/questions/58498262/ruby-check-multiple-keys-in-hash-and-delete-it", "title": "Ruby: Check multiple keys in hash and delete it", "body": "<p>I need to check if the given both keys is present in hash. Checking is not the problem here but one of the keys may not be present and can return false. I need to delete only the keys that are present.</p>\n\n<pre><code>if model_changes.has_key?(name)\n   model_changes.delete(name)\nend  \n\nif model_changes.has_key?(id)\n   model_changes.delete(id)\nend\n</code></pre>\n\n<p>Instead of writing in two separate conditions is it possible to combine and delete the present key</p>\n"}, {"tags": ["ruby", "rubygems", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1571725689, "post_id": 58497621, "comment_id": 103325446, "body": "Did you try just wrapping each call in <code>Thread.new</code>?"}, {"owner": {"reputation": 13, "user_id": 10075576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8XstMzOczJU/AAAAAAAAAAI/AAAAAAAAB9M/FeVfW2EfsB0/photo.jpg?sz=128", "display_name": "Paras Asati", "link": "https://stackoverflow.com/users/10075576/paras-asati"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1571726026, "post_id": 58497621, "comment_id": 103325609, "body": "yeah, added Thread.new in all calls and used join. Server got hanged up"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1571726079, "post_id": 58497621, "comment_id": 103325632, "body": "Why do you need to join the threads?"}, {"owner": {"reputation": 13, "user_id": 10075576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8XstMzOczJU/AAAAAAAAAAI/AAAAAAAAB9M/FeVfW2EfsB0/photo.jpg?sz=128", "display_name": "Paras Asati", "link": "https://stackoverflow.com/users/10075576/paras-asati"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1571726819, "post_id": 58497621, "comment_id": 103325962, "body": "What should I do then? I need to add response from multiple calls"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571732476, "post_id": 58497621, "comment_id": 103328644, "body": "You might have to warp your code in <code>Rails.application.executor.wrap { ... }</code>, see <a href=\"https://guides.rubyonrails.org/threading_and_code_execution.html\" rel=\"nofollow noreferrer\">Threading and Code Execution in Rails</a>"}], "owner": {"reputation": 13, "user_id": 10075576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8XstMzOczJU/AAAAAAAAAAI/AAAAAAAAB9M/FeVfW2EfsB0/photo.jpg?sz=128", "display_name": "Paras Asati", "link": "https://stackoverflow.com/users/10075576/paras-asati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571722576, "creation_date": 1571722268, "last_edit_date": 1571722576, "question_id": 58497621, "link": "https://stackoverflow.com/questions/58497621/is-there-any-way-to-make-several-big-methods-calls-in-parallel-within-one-method", "title": "Is there any way to make several big methods calls in parallel within one method? While trying to use, thread my dev server hangs up", "body": "<pre><code>def call\n  a_call\n  b_call\n  c_call\nend\n\ndef a_call\n  does_something\nend\n\ndef b_call\n  does_something\nend\n\ndef c_call\n  does_something\nend\n</code></pre>\n\n<p>Call all these methods at once so that response time is less.</p>\n\n<p>Tried it using Thread dev server but it hangs up. Concurrent-ruby is not descriptive enough to use.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara", "rake"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11574344, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--G9v64P3_bg/AAAAAAAAAAI/AAAAAAAAASM/xZUEFXwoeqg/photo.jpg?sz=128", "display_name": "Nicholas Yamamoto", "link": "https://stackoverflow.com/users/11574344/nicholas-yamamoto"}, "edited": false, "score": 0, "creation_date": 1571791443, "post_id": 58499809, "comment_id": 103355088, "body": "Thank you! This worked like a charm. Or a &quot;Gem&quot;, I should say."}], "tags": [], "owner": {"reputation": 169, "user_id": 11011462, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3I4ihnxZA_I/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPCM3jbu0ohJootHnhnHUJiHYQieg/mo/photo.jpg?sz=128", "display_name": "max.ivanch", "link": "https://stackoverflow.com/users/11011462/max-ivanch"}, "is_accepted": true, "score": 1, "last_activity_date": 1571732026, "creation_date": 1571732026, "answer_id": 58499809, "question_id": 58497190, "link": "https://stackoverflow.com/questions/58497190/how-to-find-a-string-in-a-directory-of-files-using-grep-and-glob/58499809#58499809", "title": "How to Find a String in a Directory of Files Using grep and glob?", "body": "<p>Your code looks almost good except .each missing</p>\n\n<p>i did my test and it works fine. </p>\n\n<pre><code>Dir.glob('spec/features/*.rb').each do |f|\n        puts 'haha' if File.readlines(f).any?{|line| line.include?('capybara')}\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11574344, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--G9v64P3_bg/AAAAAAAAAAI/AAAAAAAAASM/xZUEFXwoeqg/photo.jpg?sz=128", "display_name": "Nicholas Yamamoto", "link": "https://stackoverflow.com/users/11574344/nicholas-yamamoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 2, "accepted_answer_id": 58499809, "answer_count": 1, "score": 0, "last_activity_date": 1571732026, "creation_date": 1571719359, "question_id": 58497190, "link": "https://stackoverflow.com/questions/58497190/how-to-find-a-string-in-a-directory-of-files-using-grep-and-glob", "title": "How to Find a String in a Directory of Files Using grep and glob?", "body": "<p>So I've been messing with this for the last hour and a half or so and just can not figure out how to do this.</p>\n\n<p>In my Ruby test.rake file, which gets called from another project after a Snapshot Gem is created, I need to check to see if a dependency for Capybara exists in the Rakefile for the other project, since we have since deprecated Capybara and are replacing it with something else.</p>\n\n<p>So, I included a simple check to see if the project contains Feature/Capybara tests, and if so, to scan through each spec test and see if it has dependency for Capybara in it, and if so log a warning to tell the user that Capybara has been deprecated.</p>\n\n<p>My problem is, I can not get this to work at all. When I attach this to a Jenkins job and run it, I keep getting the unexpected Print statement in the else clause.</p>\n\n<p>Am I missing something here? From what I understand, my code is doing the following things:</p>\n\n<ol>\n<li>Checking if the spec/features directory exists</li>\n<li>Using glob to select all of the files in the directory that end with .rb (Spec tests), with each file instance being assigned to <strong>file</strong></li>\n<li>Take the current instance of <strong>file</strong>, read each line of it, and use grep to find any instances of the word \"capybara\" in them, and print out the right message if found.</li>\n<li>Else, if the word is NOT found, print the error message in the else clause.</li>\n</ol>\n\n<p>I'm somewhat new to Ruby so I feel like maybe I am missing something with the syntax, but other than that I'm stumped! Any help would be greatly appreciated! Here is what the code and the Rakefile I am trying to parse through look like:</p>\n\n<p><strong>test.rake:</strong></p>\n\n<pre><code>  if Dir.exist?('spec/features')\n      path = 'spec/features/'\n      Dir.glob(path + '*.rb') {|file|\n        if File.readlines(file).grep(/capybara/).any?\n          print \"The capybara dependency has been found!\"\n        else\n          print \"SOMETHING WENT WRONG\"\n        end\n      }\n  end\n</code></pre>\n\n<p><strong>Rakefile</strong>:</p>\n\n<pre><code>#!/usr/bin/env rake\n# frozen_string_literal: true\n\nrequire 'roll_out/rake_tasks'\nrequire 'roll_out/security'\nrequire 'roll_out/jira'\nrequire 'REDACTED/philter/lint_results'\nrequire 'roll_out/capybara'\n\nload 'REDACTED/tasks/REDACTED.rake'\n</code></pre>\n"}, {"tags": ["ruby", "hash", "default"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571851865, "post_id": 58496258, "comment_id": 103380561, "body": "You should edit your question to clarify, so the hold may be removed. Something like the following (my understanding) may be clearer:  &quot;I wish to create a method <code>temp</code> that has one argument,  a hash <code>h</code>. The method must modify <code>h</code> in such a way that: <code>h[:puppy] #=&gt;  4</code> if <code>h</code> does not have a key <code>:puppy</code> and <code>h[:cat] #=&gt;  6</code> if <code>h</code> does not have a key <code>:cat</code>. Beyond that, <code>h</code> is to have the same key-value pairs as before.&quot;. I have assumed you want to mutate (&quot;modify&quot;) the hash <code>h</code>, as opposed to returning a new hash with the desired properties. There&#39;s no need for the first two sentences."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571852477, "post_id": 58496258, "comment_id": 103380790, "body": "&quot;functions&quot; in other languages are called &quot;methods&quot; in Ruby. In spelling &quot;receive&quot; the <a href=\"https://en.wikipedia.org/wiki/I_before_E_except_after_C\" rel=\"nofollow noreferrer\">rule</a> is: &quot;I before E except after C, as opposed to I before and after C and no E&quot;."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571861408, "post_id": 58496258, "comment_id": 103384456, "body": "Try this: <code>def temp(h); h.default_proc =  -&gt;(h,k) { case k when :puppy then 4 when :cat then 6; else nil end }; h; end</code>. If <code>g = temp( a: 1, puppy: &#39;woof&#39;)</code>, then  <code>g[:a] #=&gt; 1;  g[:puppy] #=&gt; &quot;woof&quot;; g[:cat] #=&gt; 6</code>."}], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 2, "last_activity_date": 1571711619, "last_edit_date": 1571711619, "creation_date": 1571711270, "answer_id": 58496334, "question_id": 58496258, "link": "https://stackoverflow.com/questions/58496258/return-a-default-value-of-a-hash/58496334#58496334", "title": "Return a default value of a hash", "body": "<p>Assuming this question is about default values, you're after either <code>default</code> or <code>default_proc</code>. You can make a new hash and give it a default proc via <code>Hash.new</code>.</p>\n\n<pre><code>def temp(h)\n  Hash.new do |hash, key|\n    if key == :puppy\n      h.fetch(:puppy, 4)\n    elsif key == :cat\n      h.fetch(:cat, 6)\n    else\n      h[key]\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 0, "last_activity_date": 1571712972, "last_edit_date": 1571712972, "creation_date": 1571711546, "answer_id": 58496364, "question_id": 58496258, "link": "https://stackoverflow.com/questions/58496258/return-a-default-value-of-a-hash/58496364#58496364", "title": "Return a default value of a hash", "body": "<p>Your question is a little confusing.</p>\n\n<pre><code>If the hash doesn't have the key :puppy return 4 as value.\nIf the hash doesn't have the key :cat return 6 as value.\n</code></pre>\n\n<p>I think you want a function that returns a version of the passed-in hash that defaults the keys <code>:puppy</code> and <code>:cat</code> to 4 and 6, respectively, assuming they aren't already in the passed-in hash. This should work:</p>\n\n<pre><code>def temp(source)\n  return Hash.new do |h, k|\n    case k \n      when :puppy then 4\n      when :cat then 6\n    end\n  end.merge(source)\nend\n</code></pre>\n\n<p>Here's how this works. </p>\n\n<p>We're defining a method that takes as its one parameter a basis hash (which I called <code>source</code>).</p>\n\n<p>When you create a hash with <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Hash.new</code></a> and pass in a block of code, that block becomes the hash's \"default proc\". It will be called whenever a key that is not present in the hash is looked up, and its return value will appear to be the value stored at that key. When such a lookup happens, the block is passed two arguments: the hash itself and the key being requested. Here, I named those <code>h</code> and <code>k</code>. In the body, we check to see if <code>k</code> is either <code>:puppy</code> or <code>:cat</code> and return the appropriate value (4 or 6) if so. (If <code>k</code> is not either of those values, the <code>case</code> statement will automatically return <code>nil</code>.)</p>\n\n<p>That creates a hash with the right default proc, but the hash is empty. We then populate it by calling <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>Hash#merge</code></a> on it with the passed-in source hash as argument; that will copy all of the keys from <code>source</code> into the new hash. The <code>merge</code> method call conveniently returns the hash it was called on, so we just return that result to the caller of our method.</p>\n\n<p>Examples:</p>\n\n<pre><code>irb(main):001:0&gt; h1 = temp( { a: 1, b: 2, c: 3 } )\n=&gt; {:a=&gt;1, :b=&gt;2, :c=&gt;3}\nirb(main):002:0&gt; h1[:a]\n=&gt; 1\nirb(main):003:0&gt; h1[:d]\n=&gt; nil\nirb(main):004:0&gt; h1[:cat]\n=&gt; 6\nirb(main):005:0&gt; h1[:puppy]\n=&gt; 4\n\nirb(main):006:0&gt; h2 = temp( { a: 1, cat: :dog } )\n=&gt; {:a=&gt;1, :cat=&gt;:dog}\nirb(main):007:0&gt; h2[:a]\n=&gt; 1\nirb(main):008:0&gt; h2[:b]\n=&gt; nil\nirb(main):009:0&gt; h2[:cat]\n=&gt; :dog\nirb(main):010:0&gt; h2[:puppy]\n=&gt; 4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 12254704, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157148996201693/picture?type=large", "display_name": "Diana Duarte Salinas", "link": "https://stackoverflow.com/users/12254704/diana-duarte-salinas"}, "edited": false, "score": 0, "creation_date": 1571741898, "post_id": 58497178, "comment_id": 103333952, "body": "Thank you, Aleksei. I still don&#39;t know a lot of Ruby. ^^"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1571795145, "post_id": 58497178, "comment_id": 103355778, "body": "This overwrites the previous values if they are nil or false. That is not the same behaviour as supplying a default. The question specifically says &quot;if the hash does not have the key&quot;, which is not at all the behaviour of ||=."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1571842646, "post_id": 58497178, "comment_id": 103376106, "body": "Yeah, it would be more accurate to do <code>h[:puppy] = h.fetch(:puppy, 4)</code> etc."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1571843554, "post_id": 58497178, "comment_id": 103376598, "body": "@MarkReed or <code>h[:puppy] = 4 unless h.key?(:puppy)</code>, but this would be the next step. It\u2019s better to learn step by step and people asking questions like this probably do not need all these details at the moment."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1571719247, "creation_date": 1571719247, "answer_id": 58497178, "question_id": 58496258, "link": "https://stackoverflow.com/questions/58496258/return-a-default-value-of-a-hash/58497178#58497178", "title": "Return a default value of a hash", "body": "<p>While <code>Hash#default_proc</code> is the right way to go, both answers here are overcomplicated for this particular task. The following is probably what you actually need here.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def temp(h)\n  h[:puppy] ||= 4\n  h[:cat] ||= 6\n  h\nend\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12254704, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157148996201693/picture?type=large", "display_name": "Diana Duarte Salinas", "link": "https://stackoverflow.com/users/12254704/diana-duarte-salinas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "closed_date": 1571795156, "answer_count": 3, "score": -1, "last_activity_date": 1571719247, "creation_date": 1571710571, "question_id": 58496258, "link": "https://stackoverflow.com/questions/58496258/return-a-default-value-of-a-hash", "closed_reason": "Needs details or clarity", "title": "Return a default value of a hash", "body": "<p>I need help. I am doing a basic exercise in Ruby, but right now I don't understand defult that much.\nI need to write a function called temp that reicive one argument (a hash). The function must return the same hash but with the next changes:</p>\n\n<ul>\n<li>If the hash doesn't have the key :puppy return 4 as value.</li>\n<li>If the hash doesn't have the key :cat return 6 as value.</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "string", "parsing"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571710947, "post_id": 58495834, "comment_id": 103322109, "body": "Yes, that&#39;s exactly what will happen given the code you&#39;ve shown and the input you receive. <a href=\"https://stackoverflow.com/help/how-to-ask\">Do you have a question?</a>"}, {"owner": {"reputation": 3, "user_id": 11211082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c869d375fcf211f9d5cd240e261c6437?s=128&d=identicon&r=PG&f=1", "display_name": "JESUSCHRIST3000ADHD", "link": "https://stackoverflow.com/users/11211082/jesuschrist3000adhd"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571715643, "post_id": 58495834, "comment_id": 103322834, "body": "I&#39;d like to know if there&#39;s some sort of check (possibly regex?) I can include to make sure the input strings that get fed into <code>JSON.parse()</code> are all valid JSON objects without causing any sort of performance issues \u2013 I&#39;d like to pass every JSON object that the API emits into JSON.parse() without having to skip any due to the API sending them not separated by commas if possible."}, {"owner": {"reputation": 3, "user_id": 11211082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c869d375fcf211f9d5cd240e261c6437?s=128&d=identicon&r=PG&f=1", "display_name": "JESUSCHRIST3000ADHD", "link": "https://stackoverflow.com/users/11211082/jesuschrist3000adhd"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571715951, "post_id": 58495834, "comment_id": 103322889, "body": "Would it be best to add that comment into the original post? I&#39;m somewhat new to asking questions here and assumed that &quot;I get this error&quot; implies that I don&#39;t want the error to show up."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571721470, "post_id": 58495834, "comment_id": 103324062, "body": "Yes, your question should include a question. Don&#39;t expect us to guess at your question. You could have been asking &quot;Is this what should happen?&quot; or &quot;How do I fix the remote API?&quot; or &quot;How do I ignore malformed records?&quot; or &quot;How do I accept the first record and skip the second record?&quot; or any number of other things. Please read the article I linked."}], "answers": [{"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 0, "last_activity_date": 1571723735, "creation_date": 1571723735, "answer_id": 58497850, "question_id": 58495834, "link": "https://stackoverflow.com/questions/58495834/listening-to-http-json-stream-triggers-jsonparsererror/58497850#58497850", "title": "Listening to HTTP Json stream triggers JSON:ParserError", "body": "<p>If the malformed records are always <strong>exactly</strong> as you have described here, then a simple if naive solution might be:</p>\n\n<pre><code>piece = &lt;&lt;EOF\n{\"uuid\": \"ea065b39-68d7-4abb-bb44-04f3006ad2bb\", \"content\": \"Impedit aut amet ea quisquam culpa saepe.\", \"created_at\": \"2019-10-13T02:16:53\", \"amount\": 654, \"variety\": \"OMR\", \"author\": {\"uuid\": \"910e81b1-afd1-4a04-9fc5-ff644abc5a96\", \"first_name\": \"Jenny\", \"last_name\": \"Person\"}}\n{\"uuid\": \"f2981a04-4699-476e-86ed-d83999428045\", \"description\": \"Debitis libero voluptas quidem deleniti facilis.\", \"created_at\": \"2019-10-05T22:17:09\", \"amount\": 6381, \"variety\": \"BRL\", \"author\": {\"uuid\": \"a73e2de8-abf2-4e99-8e3b-e3fb72d0b3ba\", \"first_name\": \"Jacob\", \"last_name\": \"Human\"}}\nEOF\n\npiece = piece.gsub(\"\\n\", '').gsub(/}{/, '},{').prepend('[').concat(']')\nparsed = JSON.parse(piece)\nparsed.each do |parsed_piece|\n  # do something to validate and save parsed piece\nend\n</code></pre>\n\n<p>This will work for any number of records that are sent at once by removing newlines, separating the records with commas, turning the whole string into a JSON array, parsing the JSON array, and then iterating over the array elements.</p>\n\n<p>You can probably <a href=\"https://stackoverflow.com/q/18089562/3784008\">get clever with <code>.split()</code> or <code>.scan()</code></a> to look for <code>}{</code> and chunk the string into an array based on that element, then run <code>JSON.parse</code> on each array element, and <em>then</em> iterate over the array to do some validation and saving, for example:</p>\n\n<pre><code>pieces = piece.gsub(\"\\n\", '').split(/(}{)/)\nnew_pieces = []\npieces.each_with_index do |piece, index|\n  if pieces.length == 1\n    new_pieces &lt;&lt; piece\n  elsif index.zero?\n    new_pieces &lt;&lt; \"#{piece}#{pieces[index + 1][0]}\"\n  elsif index.even?\n    new_piece = \"#{pieces[index - 1][1]}#{piece}\"\n    new_piece = \"#{new_piece}#{pieces[index - 1][0]}\" unless index == pieces.length - 1\n    new_pieces &lt;&lt; new_piece\n  end\nend\nnew_pieces.map { |piece| JSON.parse(piece) }\n</code></pre>\n\n<p>And you can probably make that block a little simpler with some of the aforementioned cleverness.</p>\n"}], "owner": {"reputation": 3, "user_id": 11211082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c869d375fcf211f9d5cd240e261c6437?s=128&d=identicon&r=PG&f=1", "display_name": "JESUSCHRIST3000ADHD", "link": "https://stackoverflow.com/users/11211082/jesuschrist3000adhd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58497850, "answer_count": 1, "score": 0, "last_activity_date": 1571732238, "creation_date": 1571705774, "last_edit_date": 1571732238, "question_id": 58495834, "link": "https://stackoverflow.com/questions/58495834/listening-to-http-json-stream-triggers-jsonparsererror", "title": "Listening to HTTP Json stream triggers JSON:ParserError", "body": "<p>My Rails project is listening to a text/json type HTTP stream \u2013 It normally works fine until about an hour in, and then the API seems to send two objects at once and it triggers a <code>JSON::ParserError</code>, most likely due to the API (I have no control over it) sending two JSON objects at once without a comma.</p>\n\n<p>I'd like to know if there's some sort of check (possibly regex?) I can include to make sure the input strings that get fed into JSON.parse() are all valid JSON objects without causing any sort of performance issues \u2013 I'd like to pass every JSON object that the API emits into JSON.parse() without having to skip any due to the API sending them not separated by commas if possible.</p>\n\n<p>My code for the rails job that performs the parsing and saves the parsed json object as an ActiveRecord object (Variable names have been changed from the originals and I might have used ruby keywords or something so I apologize if I made it confusing.)</p>\n\n<pre><code>  def perform(*args)\n    # Do something later\n    puts \"Listener Started!\"\n\n    response = HTTP.get(\"https://example.com/stream\")\n    response.body.each do |piece|\n      parsed = piece &amp;&amp; piece.length &gt;= 2 ? JSON.parse(piece) : nil\n      if parsed\n        thing = Thing.find_or_create_by(id: parsed[\"uuid\"]) do |thing|\n          thing.content = parsed[\"content\"]\n          thing.created_at = parsed[\"created_at\"]\n          thing.amount = parsed[\"amount\"]\n          thing.variety = parsed[\"variety\"]\n        end\n        expense.employee = Author.find_or_create_by(id: parsed[\"author\"][\"uuid\"]) do |author|\n          author.first_name = parsed[\"author\"][\"first_name\"]\n          author.last_name = parsed[\"author\"][\"last_name\"]\n        end\n        thing.save\n      end\n    end\n  end\n</code></pre>\n\n<p>This is the error I'm receiving:</p>\n\n<pre><code>Error performing ListenForExpenseJob (Job ID: 4b275dc3-4234-4249-8dc5-186ac02fc424) from Async(default) in 2826495.7ms:\n\nJSON::ParserError (784: unexpected token at \n'{\"uuid\": \"ea065b39-68d7-4abb-bb44-04f3006ad2bb\", \"content\": \"Impedit aut amet ea quisquam culpa saepe.\", \"created_at\": \"2019-10-13T02:16:53\", \"amount\": 654, \"variety\": \"OMR\", \"author\": {\"uuid\": \"910e81b1-afd1-4a04-9fc5-ff644abc5a96\", \"first_name\": \"Jenny\", \"last_name\": \"Person\"}}\n{\"uuid\": \"f2981a04-4699-476e-86ed-d83999428045\", \"description\": \"Debitis libero voluptas quidem deleniti facilis.\", \"created_at\": \"2019-10-05T22:17:09\", \"amount\": 6381, \"variety\": \"BRL\", \"author\": {\"uuid\": \"a73e2de8-abf2-4e99-8e3b-e3fb72d0b3ba\", \"first_name\": \"Jacob\", \"last_name\": \"Human\"}}\n'):\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571692573, "post_id": 58494209, "comment_id": 103318290, "body": "There are many differences between the Rails version 3, 4 and 5. Please use the specific tag."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1571699631, "post_id": 58494209, "comment_id": 103320142, "body": "This doesn&#39;t provide an answer, but the code used seems a bit strange .If <code>model.legal_storages</code> isn&#39;t already loaded I would go for a direct query instead. <code>model.legal_storages.where(document_type =&gt; true).last</code> If <code>model.legal_storages</code> is loaded I would use the square bracket notation to make sure only attributes can be invoked. <code>model.legal_storages.select{|storage| storage[document_type] }.last</code>"}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 3, "creation_date": 1571693614, "post_id": 58494305, "comment_id": 103318615, "body": "A true masterpiece of ASCII art."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1571695280, "post_id": 58494305, "comment_id": 103319053, "body": "@max, I&#39;ll start the bidding at $50,000."}, {"owner": {"reputation": 55, "user_id": 11896746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/596186715598a7f6ec103fa0e51d5b68?s=128&d=identicon&r=PG&f=1", "display_name": "john bowlee", "link": "https://stackoverflow.com/users/11896746/john-bowlee"}, "edited": false, "score": 0, "creation_date": 1571695929, "post_id": 58494305, "comment_id": 103319208, "body": "Thank you for your respose but what does storage.send(document_type) do in this case? It stores the records in an array in case the condition is true?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 55, "user_id": 11896746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/596186715598a7f6ec103fa0e51d5b68?s=128&d=identicon&r=PG&f=1", "display_name": "john bowlee", "link": "https://stackoverflow.com/users/11896746/john-bowlee"}, "edited": false, "score": 0, "creation_date": 1571699842, "post_id": 58494305, "comment_id": 103320205, "body": "@johnbowlee It invokes the method name, stored in the <code>document_type</code> variable on <code>storage</code>. <code>foo.send(&quot;bar&quot;)</code> is similar to <code>foo.bar</code> but negates <i>private</i> and <i>protected</i> access."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 55, "user_id": 11896746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/596186715598a7f6ec103fa0e51d5b68?s=128&d=identicon&r=PG&f=1", "display_name": "john bowlee", "link": "https://stackoverflow.com/users/11896746/john-bowlee"}, "edited": false, "score": 0, "creation_date": 1571723504, "post_id": 58494305, "comment_id": 103324635, "body": "<code>storage.send(document_type)</code> is the same to do <code>method_name = :succ; 1.send(method_name) # =&gt; 2</code>. <code>send</code> receives a method name (document_type), and then that method is invoked in the receiver (storage) @johnbowlee."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 4, "last_activity_date": 1571695572, "last_edit_date": 1571695572, "creation_date": 1571692940, "answer_id": 58494305, "question_id": 58494209, "link": "https://stackoverflow.com/questions/58494209/select-query-in-ruby-on-rails/58494305#58494305", "title": "Select query in Ruby on Rails", "body": "<pre><code>model.legal_storages.select { |storage| storage.send(document_type) == true }.last - From the result of the last operation, select only the last element.\n             |         |                                  |\n             |         |                                   --------------------- For each element in model.legal_stores invoke\n             |         |                                                         the method that is held by the variable document_type\n             |         |                                                         and check if it's equal to true.\n             |         |\n             |          --------- Over the result of the last method,\n             |                    call select to filter those elements where\n             |                    condition in the block evaluates to true.\n             |\n              ------------------- Invoke the method legal_stores in model.\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 11896746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/596186715598a7f6ec103fa0e51d5b68?s=128&d=identicon&r=PG&f=1", "display_name": "john bowlee", "link": "https://stackoverflow.com/users/11896746/john-bowlee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571695572, "creation_date": 1571692373, "last_edit_date": 1571694655, "question_id": 58494209, "link": "https://stackoverflow.com/questions/58494209/select-query-in-ruby-on-rails", "title": "Select query in Ruby on Rails", "body": "<p>I am new to ruby on rails but I am not finding the meaning of this line of code. I saw in the documentation of rails that select will build an array of objects from the database for the scope, converting them into an array and iterating through them using Array#select. Anyway I can\u2019t understand the result of this line of code and on what it consists.</p>\n\n<pre><code>model.legal_storages.select{|storage| storage.send(document_type)==true}.last\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "httparty"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1571692322, "post_id": 58493785, "comment_id": 103318222, "body": "It&#39;s not necessary or desirable that you put in tags or headers such as &quot;UPDATE 1&quot;. SO has a revision tracking system so we can see if something has changed. Instead, simply incorporate any updates or changes into the question&#39;s text as if you&#39;d had it there originally. It helps maintain the readability."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "edited": false, "score": 0, "creation_date": 1571692009, "post_id": 58493922, "comment_id": 103318109, "body": "Yeah, I&#39;m really really rusty with rails haha so getting back into it. I tried your solution, I&#39;m getting <code>&#47;albums.1</code> not getting a slash but a dot"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1571692774, "post_id": 58493922, "comment_id": 103318347, "body": "@B.J.B try the above routes helper - i have edited the answer"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1571693040, "post_id": 58493922, "comment_id": 103318438, "body": "actually you&#39;ll have to paste in your existing routes. or you can just write <code>resources :albums</code> in your <code>routes.rb</code> file it may create some extra routes, but that should work."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "edited": false, "score": 0, "creation_date": 1571693780, "post_id": 58493922, "comment_id": 103318664, "body": "I&#39;m still getting a dot unfortunately"}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1571694335, "post_id": 58493922, "comment_id": 103318813, "body": "oops i made a mistake. Use <code>album_path</code> SINGULAR. i&#39;ll update the answer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "edited": false, "score": 0, "creation_date": 1571694634, "post_id": 58493922, "comment_id": 103318885, "body": "Ohh gotcha. Thanks :)"}], "tags": [], "owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "is_accepted": true, "score": 1, "last_activity_date": 1571694373, "last_edit_date": 1571694373, "creation_date": 1571690878, "answer_id": 58493922, "question_id": 58493785, "link": "https://stackoverflow.com/questions/58493785/httparty-cannot-get-id-of-album/58493922#58493922", "title": "HTTParty cannot get id of album", "body": "<p>That should be easy.</p>\n\n<p>This is how you get the album id:</p>\n\n<pre><code>album['id']\n</code></pre>\n\n<p>And you can use the ID to get the link:</p>\n\n<pre><code>&lt;%= link_to \"View Album\", album_path(album['id']), class: \"btn btn-primary\" %&gt;\n</code></pre>\n\n<h2>Warning: Path must be singular! album_path</h2>\n\n<pre><code># add to your routes.rb\nresources :albums\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8331511"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58493922, "answer_count": 1, "score": 1, "last_activity_date": 1571694373, "creation_date": 1571690211, "last_edit_date": 1571691926, "question_id": 58493785, "link": "https://stackoverflow.com/questions/58493785/httparty-cannot-get-id-of-album", "title": "HTTParty cannot get id of album", "body": "<p>I'm building a rails app and I'm trying to grab some data from an API.</p>\n\n<p>This is my controller</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'will_paginate/array'\n\nclass AlbumsController &lt; ApplicationController\n  def index\n    @albums = HTTParty\n      .get('https://jsonplaceholder.typicode.com/albums', :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n      .paginate(:page =&gt; params[:page], :per_page =&gt; 10)\n  end\n\n  def show\n  end\nend\n</code></pre>\n\n<p>and this is my index view</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;main role=\"main\" class=\"flex-shrink-0\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;h1 class=\"mt-5\"&gt;Albums&lt;/h1&gt;\n    &lt;p class=\"lead\"&gt;Here we show all albums and it's details&lt;/p&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;% @albums.each do |album| %&gt;\n        &lt;div class=\"col-md-4\"&gt;\n          &lt;h5 class=\"card-title\"&gt;\n            &lt;%= album['title'] %&gt;\n          &lt;/h5&gt;\n\n          &lt;p&gt;User_id: &lt;%= album['user_id'] %&gt; | id: &lt;%= album['id'] %&gt;&lt;p&gt;\n          &lt;%= link_to \"View Album\", album, class: \"btn btn-primary\" %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;%= will_paginate @albums, renderer: WillPaginate::ActionView::BootstrapLinkRenderer, class: 'margin-auto' %&gt;\n&lt;/main&gt;\n</code></pre>\n\n<p>The issue here is the link, I have <code>resources :albums</code> in the routes file.</p>\n\n<pre><code>                               albums GET    /albums(.:format)                                                                        albums#index\n                                      POST   /albums(.:format)                                                                        albums#create\n                            new_album GET    /albums/new(.:format)                                                                    albums#new\n                           edit_album GET    /albums/:id/edit(.:format)                                                               albums#edit\n                                album GET    /albums/:id(.:format)                                                                    albums#show\n                                      PATCH  /albums/:id(.:format)                                                                    albums#update\n                                      PUT    /albums/:id(.:format)                                                                    albums#update\n                                      DELETE /albums/:id(.:format)                                                                    albums#destroy\n                           users_show GET    /users/show(.:format)                                                                    users#show\n                                 root GET    /                                                                                        albums#index\n</code></pre>\n\n<p>However, when I hover over the button it is linking to the following</p>\n\n<p><img src=\"https://i.gyazo.com/2d98acd4abf2f84937e0ab564ceb8992.png\" alt=\"image\"></p>\n\n<p>How do I go about only linking to the ID i.e. localhost:3000/albums/2</p>\n\n<p>UPDATE 1</p>\n\n<p>routes.rb</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.application.routes.draw do\n  resources :albums\n  get 'users/show'\n\n  root 'albums#index'\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1571687162, "post_id": 58493120, "comment_id": 103316233, "body": "Which line is the error pointing to?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12055711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXcErDlu_XE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf9fg7osqxqpM8HxDqX5dG7epjgYg/photo.jpg?sz=128", "display_name": "Niraj ", "link": "https://stackoverflow.com/users/12055711/niraj"}, "edited": false, "score": 0, "creation_date": 1571688668, "post_id": 58493217, "comment_id": 103316800, "body": "I tried it and yet got this error: challange3.rb:68:in <code>&lt;main&gt;&#39;: undefined method </code>total_&#39; for main:Object (NoMethodError)."}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "reply_to_user": {"reputation": 3, "user_id": 12055711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXcErDlu_XE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf9fg7osqxqpM8HxDqX5dG7epjgYg/photo.jpg?sz=128", "display_name": "Niraj ", "link": "https://stackoverflow.com/users/12055711/niraj"}, "edited": false, "score": 0, "creation_date": 1571689054, "post_id": 58493217, "comment_id": 103316967, "body": "You have a space between <code>total_</code> and <code>profit</code>.  Removing the space should fix that error"}, {"owner": {"reputation": 3, "user_id": 12055711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXcErDlu_XE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf9fg7osqxqpM8HxDqX5dG7epjgYg/photo.jpg?sz=128", "display_name": "Niraj ", "link": "https://stackoverflow.com/users/12055711/niraj"}, "edited": false, "score": 0, "creation_date": 1571689719, "post_id": 58493217, "comment_id": 103317247, "body": "Thanks so much. Seems like its working now. I am novice to the coding. I dont know how I can i improve myself?"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 3, "user_id": 12055711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXcErDlu_XE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf9fg7osqxqpM8HxDqX5dG7epjgYg/photo.jpg?sz=128", "display_name": "Niraj ", "link": "https://stackoverflow.com/users/12055711/niraj"}, "edited": false, "score": 0, "creation_date": 1571703622, "post_id": 58493217, "comment_id": 103320982, "body": "@Niraj I recommend that you <a href=\"https://stackoverflow.com/help/someone-answers\">click the grey checkmark next to this post so it turns green</a>."}], "tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": true, "score": 2, "last_activity_date": 1571687483, "creation_date": 1571687483, "answer_id": 58493217, "question_id": 58493120, "link": "https://stackoverflow.com/questions/58493120/bartender-challange-error-ocde-challange3-rb64in-main-undefined-method/58493217#58493217", "title": "Bartender Challange, Error ocde : challange3.rb:64:in `&lt;main&gt;&#39;: undefined method `+&#39; for nil:NilClass (NoMethodError)", "body": "<p>This error is occurring because you are trying to add to a variable that is currently <code>nil</code> when you are calculating <code>total_profit</code>.  To fix this error, initialize <code>cocktail_profit</code>, <code>water_profit</code>, and <code>beer_profit</code> to 0 before your <code>while</code> loop. </p>\n\n<pre><code>cocktail_profit = 0.0\nwater_profit = 0.0\nbeer_profit = 0.0\n\nwhile are_you_ordering == \"yes\" \n    ...\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12055711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXcErDlu_XE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf9fg7osqxqpM8HxDqX5dG7epjgYg/photo.jpg?sz=128", "display_name": "Niraj ", "link": "https://stackoverflow.com/users/12055711/niraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58493217, "answer_count": 1, "score": 0, "last_activity_date": 1571688045, "creation_date": 1571686955, "last_edit_date": 1592644375, "question_id": 58493120, "link": "https://stackoverflow.com/questions/58493120/bartender-challange-error-ocde-challange3-rb64in-main-undefined-method", "title": "Bartender Challange, Error ocde : challange3.rb:64:in `&lt;main&gt;&#39;: undefined method `+&#39; for nil:NilClass (NoMethodError)", "body": "<p>I was trying to solve this challange which is quite basic. Everything else works well until I start adding the total profit for the order and I receive the error : &quot;challange3.rb:64:in <code>&lt;main&gt;': undefined method </code>+' for nil:NilClass (NoMethodError)&quot;.</p>\nChallenge 3: Bartender challenge\n<p>You are working at a bar where you have a current backlog of drinks to make:</p>\n<p>3 cocktails,\n2 waters and\n6 beers\nwrite a program that asks the customer for their order.</p>\n<p>if they order a cocktail, add one to the number of cocktails you need to make.\nif they order a water, add one to the number of waters you need to make.\nif they order a beer, add one to the number of beers you need to pour.\nprint the final drinks order so you know what to make.\ncocktails sell for $22, and cost $8 to make.\nbeer sell for $12, and cost $3 to pour.\nwater sell for $6, and cost $0.15 to make.\nprint out the total profit for the orders you have.</p>\n<p>Here is my code</p>\n<pre><code>backlog_cocktails = 3\nbacklog_waters = 2\nbacklog_beers = 6\n\ncocktail_cost = 8\nwater_cost = 0.15\nbeer_cost = 3\n\ncocktail_selling_price = 22\nwater_selling_price = 6\nbeer_selling_price = 12\n\ntotal_profit = &quot; &quot;\np &quot;Are you ordering?&quot;\nare_you_ordering  = gets.chomp      \n\nwhile are_you_ordering == &quot;yes&quot; \n    puts &quot;We have Cocktails, Waters and beers for order.&quot;\n    puts &quot;What orders do you want to make?&quot;\n    customer_order = gets.chomp\n\n    if customer_order == &quot;cocktail&quot;\n        backlog_cocktails += 1 \n        cocktail_profit = (cocktail_selling_price - cocktail_cost) * backlog_cocktails\n    \n\n    elsif customer_order == &quot;water&quot;\n        backlog_waters += 1\n        water_profit = (water_selling_price - water_cost) * backlog_waters\n        \n        \n\n    else customer_order == &quot;beer&quot;\n         backlog_beers += 1\n        beer_profit = (beer_selling_price - beer_cost) * backlog_beers\n    \n    end\n    p &quot;We got cocktail: #{backlog_cocktails}, water: #{backlog_waters} and beer: #{backlog_beers} to make.&quot;\n    puts &quot;Do you want to make more order?&quot;\n\n    are_you_ordering = gets.chomp \n    \n    total_ profit = cocktail_profit + water_profit + beer_profit\n    p total_profit\n    \nend\n</code></pre>\n"}, {"tags": ["ruby", "httparty"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571678923, "post_id": 58491347, "comment_id": 103312750, "body": "Perhaps you need to move the <code>to_json</code> after the closing <code>{}</code>."}, {"owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571679081, "post_id": 58491347, "comment_id": 103312822, "body": "@Sebastian Palma same error."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1571679272, "post_id": 58491347, "comment_id": 103312927, "body": "You missed some commas in <code>&#39;option_id&#39; =&gt; &#39;1&#39;</code> and closing the <code>body</code> hash."}, {"owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571680082, "post_id": 58491347, "comment_id": 103313272, "body": "Thanks @Sebastian Palma, I dnt see that commas even reading a lot. Sorry for that hahahah"}], "answers": [{"comments": [{"owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "edited": false, "score": 0, "creation_date": 1571680025, "post_id": 58491459, "comment_id": 103313250, "body": "OMG I don&#39;t see the commas even reading and reading a lot of times, thanks Anothermh. I&#39;m feel so dumb now hahahaah."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "edited": false, "score": 0, "creation_date": 1571682051, "post_id": 58491459, "comment_id": 103314124, "body": "Downvoted for being correct and for posting the answer before the comment pointing out the same thing."}], "tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 1, "last_activity_date": 1571679229, "creation_date": 1571679229, "answer_id": 58491459, "question_id": 58491347, "link": "https://stackoverflow.com/questions/58491347/syntax-error-in-body-using-httparty-ruby-httparty/58491459#58491459", "title": "Syntax error in body using HTTParty (Ruby/HTTParty)", "body": "<p>You're missing commas after <code>:'option_id' =&gt; '1'</code> and after <code>}.to_json,</code>:</p>\n\n<pre><code>{\n  :body =&gt; {\n    :'option_id' =&gt; '1',\n    :'address' =&gt; {\n      :'address_id' =&gt; '3',\n      :'street_name' =&gt; '#{street}',\n      :'alias' =&gt; 'Address',\n      :'address_number' =&gt; '#{n}',\n      :'additional_information' =&gt; 'New',\n      :'reference_point' =&gt; 'New',\n      :'city' =&gt; 'NY',\n      :'country_code' =&gt; 55,\n      :'district' =&gt; 'New',\n      :'postal_code' =&gt; '#{new_zip}',\n      :'state' =&gt; 'NY',\n      :'default' =&gt; true,\n      :'address_name' =&gt; 'string',\n    }\n  }.to_json,\n  :headers =&gt; {\n    :'Content-Type' =&gt; 'application/x-www-form-urlencoded',\n    :'charset' =&gt; 'utf-8',\n    :'Host' =&gt; 'reservedurl.com',\n    :'Accept-Encoding' =&gt; 'gzip, deflate',\n    :'Accept' =&gt; '*/*',\n    :'Postman-Token' =&gt; 'token'\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1571862241, "accepted_answer_id": 58491459, "answer_count": 1, "score": 0, "last_activity_date": 1571679229, "creation_date": 1571678753, "question_id": 58491347, "link": "https://stackoverflow.com/questions/58491347/syntax-error-in-body-using-httparty-ruby-httparty", "closed_reason": "Not suitable for this site", "title": "Syntax error in body using HTTParty (Ruby/HTTParty)", "body": "<p>I'm just get a error and really don't know how to solve this.</p>\n\n<p>What I'm trying:</p>\n\n<pre><code>class Addresses\ninclude HTTParty\nbase_uri \"https://reservedurl.com/\"\n\ndef self.api_search\n    search = get('members/api/default/member/addresses')\nend\n\ndef self.api_change_address(street, new_zip, n)\n    change_address = patch('members/api/default/member', {\n        :body =&gt; {\n          :'option_id' =&gt; '1'\n          :'address' =&gt; {\n            :'address_id' =&gt; '3',\n            :'street_name' =&gt; '#{street}',\n            :'alias' =&gt; 'Address',\n            :'address_number' =&gt; '#{n}',\n            :'additional_information' =&gt; 'New',\n            :'reference_point' =&gt; 'New',\n            :'city' =&gt; 'NY',\n            :'country_code' =&gt; 55,\n            :'district' =&gt; 'New',\n            :'postal_code' =&gt; '#{new_zip}',\n            :'state' =&gt; 'NY',\n            :'default' =&gt; true,\n            :'address_name' =&gt; 'string',\n          }\n        }.to_json\n        :headers =&gt; {\n          :'Content-Type' =&gt; 'application/x-www-form-urlencoded',\n          :'charset' =&gt; 'utf-8',\n          :'Host' =&gt; 'reservedurl.com',\n          :'Accept-Encoding' =&gt; 'gzip, deflate',\n          :'Accept' =&gt; '*/*',\n          :'Postman-Token' =&gt; 'token'\n        }\n      })\nend\n</code></pre>\n\n<p>API body:</p>\n\n<pre><code>{\n  \"option_id\": \"1\",\n    \"address\": {\n    \"address_id\": \"token\",\n    \"street_name\": \"Jack, St\",\n    \"alias\": \"Address\",\n    \"address_number\": \"213\",\n    \"additional_information\": \"New\",\n    \"reference_point\": \"New\",\n    \"city\": \"DC\",\n    \"country_code\": 55,\n    \"district\": \"WS\",\n    \"postal_code\": \"0453401\",\n    \"state\": \"WS\",\n    \"default\": true,\n    \"address_name\": \"string\"\n  }\n}\n</code></pre>\n\n<p>And I got this error:</p>\n\n<pre><code>    *** WARNING: You must use ANSICON 1.31 or higher (https://github.com/adoxa/ansicon/) to get coloured output on Windows\nc:/features/support/this_page.rb:13: syntax error, unexpected tSYMBEG, expecting '}'\n              :'address' =&gt; {\n              ^~\nc:/features/support/this_page.rb:13: syntax error, unexpected =&gt;, expecting end     \n              :'address' =&gt; {\n                         ^~\nc:/features/support/this_page.rb:28: syntax error, unexpected '}', expecting end    \n            }.to_json\n            ^\nc:/features/support/this_page.rb:29: syntax error, unexpected =&gt;, expecting end\n            :headers =&gt; {\n                     ^~\nc:/features/support/this_page.rb:37: syntax error, unexpected '}', expecting end\n          })\n          ^ (SyntaxError)\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2/lib/cucumber/glue/registry_and_more.rb:107:in `load'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2/lib/cucumber/glue/registry_and_more.rb:107:in `load_code_file'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2/lib/cucumber/runtime/support_code.rb:144:in `load_file'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2/lib/cucumber/runtime/support_code.rb:85:in `block in load_files!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2/lib/cucumber/runtime/support_code.rb:84:in `each'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2/lib/cucumber/runtime/support_code.rb:84:in `load_files!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2/lib/cucumber/runtime.rb:272:in `load_step_definitions'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2/lib/cucumber/runtime.rb:68:in `run!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2/lib/cucumber/cli/main.rb:34:in `execute!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2/bin/cucumber:9:in `&lt;top (required)&gt;'\nC:/Ruby26-x64/bin/cucumber:23:in `load'\nC:/Ruby26-x64/bin/cucumber:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>I really don't see why HTTParty don't allow me to use this body. What I understand? The error is the bracket itself, but I'm trying to pass exactly how the API was. If I remove the bracket in address line the body don't will be read for my API.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571692726, "post_id": 58490995, "comment_id": 103318336, "body": "Are you given the key sequence <code>&quot;hash2&quot;</code>, <code>&quot;hash3&quot;</code>, <code>&quot;k3&quot;</code>? If not, are you asking if <i>any</i> nested hash in <code>hash1</code> has a value equal to a given value? Please clarify by editing."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1571692830, "post_id": 58490995, "comment_id": 103318377, "body": "We&#39;d like to see what you tried. SO isn&#39;t a &quot;give me code&quot; site, it&#39;s a &quot;help me fix my code&quot; site. Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571693156, "post_id": 58491016, "comment_id": 103318474, "body": "We can&#39;t tell from the question if <code>dig</code> is necessary. It could be that <code>hash1[&quot;hash2&quot;][&quot;hash3&quot;][&quot;k3&quot;]</code> is known to provide the desired value. In fact, one cannot tell from the question if any of the keys are even known."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 4, "last_activity_date": 1571677379, "creation_date": 1571677379, "answer_id": 58491016, "question_id": 58490995, "link": "https://stackoverflow.com/questions/58490995/how-to-query-on-nested-hash3d-level-for-a-column-to-be-certain-valuein-rails/58491016#58491016", "title": "How to query on nested hash(3d level) for a column to be certain value?(in rails console)", "body": "<p><a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\"><code>Hash#dig</code></a> works for these cases:</p>\n\n<pre><code>{\"k1\" =&gt; \"v1\" , \"hash2\" =&gt; {\"k2\" =&gt; \"v2\", \"hash3\" =&gt; { \"k3\" =&gt;\"v3\"}}}.dig('hash2', 'hash3', 'k3') \n# 'k3'\n</code></pre>\n\n<blockquote>\n  <p>It extracts the nested value specified by the sequence of key objects by \n  calling dig at each step, returning nil if any intermediate step is\n  nil.</p>\n</blockquote>\n\n<p>It doesn't matter if it's the Rails console or any other, as long as the Ruby version doesn't change and you're using the very same <code>Hash#dig</code> method.</p>\n"}], "owner": {"reputation": 21, "user_id": 9994963, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-G63nN0zwOyg/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3ihUB4pdkB6L3Wf7MmhUi_S9-DYQ/mo/photo.jpg?sz=128", "display_name": "Kailash 1999", "link": "https://stackoverflow.com/users/9994963/kailash-1999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58491016, "answer_count": 1, "score": 1, "last_activity_date": 1571677379, "creation_date": 1571677268, "question_id": 58490995, "link": "https://stackoverflow.com/questions/58490995/how-to-query-on-nested-hash3d-level-for-a-column-to-be-certain-valuein-rails", "title": "How to query on nested hash(3d level) for a column to be certain value?(in rails console)", "body": "<pre><code>hash1 = {\"k1\" =&gt; \"v1\" , \"hash2\" =&gt; {\"k2\" =&gt; \"v2\", \"hash3\" =&gt; { \"k3\" =&gt;\"v3\"}}}\n</code></pre>\n\n<p>How to I query on value of v3 to be certain value in rails console?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 834, "user_id": 3588645, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PqWVv.jpg?s=128&g=1", "display_name": "Paul Danelli", "link": "https://stackoverflow.com/users/3588645/paul-danelli"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571733164, "post_id": 58490421, "comment_id": 103329026, "body": "@anothermh I&#39;m utilising ActiveRecord Single Table Inheritance so using the <code>type</code> column is normal behaviour."}], "answers": [{"tags": [], "owner": {"reputation": 834, "user_id": 3588645, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PqWVv.jpg?s=128&g=1", "display_name": "Paul Danelli", "link": "https://stackoverflow.com/users/3588645/paul-danelli"}, "is_accepted": true, "score": 7, "last_activity_date": 1571994960, "creation_date": 1571994960, "answer_id": 58555576, "question_id": 58490421, "link": "https://stackoverflow.com/questions/58490421/activestorage-not-persisting-blob-to-attachment-after-rails-6-0-upgrade/58555576#58555576", "title": "ActiveStorage not persisting blob to attachment after Rails 6.0 upgrade", "body": "<p>After a bunch of playing around I worked out that the Active Storage relationships were not being updated unless the model was altered in some way, for example, touching the <code>updated_at</code> timestamp, or another editing another field - I think this is a Rails bug.</p>\n\n<p>By Adding <code>&lt;%= f.hidden_field :updated_at, value: DateTime.current %&gt;</code> in my forms, I was able to force Active Storage to persist the file. </p>\n\n<p>Hope this helps someone else. </p>\n"}], "owner": {"reputation": 834, "user_id": 3588645, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PqWVv.jpg?s=128&g=1", "display_name": "Paul Danelli", "link": "https://stackoverflow.com/users/3588645/paul-danelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2792, "favorite_count": 0, "accepted_answer_id": 58555576, "answer_count": 1, "score": 4, "last_activity_date": 1574398224, "creation_date": 1571675072, "last_edit_date": 1571733326, "question_id": 58490421, "link": "https://stackoverflow.com/questions/58490421/activestorage-not-persisting-blob-to-attachment-after-rails-6-0-upgrade", "title": "ActiveStorage not persisting blob to attachment after Rails 6.0 upgrade", "body": "<p>I have an issue with ActiveStorage that seems to have occured because of the Rails 6.0 upgrade (from 5.2.x). </p>\n\n<p>I have a custom admin interface where Pages have Fields, and each Field has an STI <code>type</code> to create complex page layouts. The <code>Image</code> type that uses Active Storage (it was Paperclip but was migrated after Rails 5.2 shipped) to store an image via a simple upload modal - no complicated direct upload JS. </p>\n\n<p>The class structure looks as follows (I've removed extra code for brevity): </p>\n\n<pre><code>\nclass Page &lt; ApplicationRecord\n    has_many :fields, dependent: :destroy\n    accepts_nested_attributes_for :fields, allow_destroy: true\nend\n\nclass Field &lt; ApplicationRecord\n    belongs_to :page\nend\n\nmodule Fields\n    class Image &lt; Content::Field\n        has_one_attached :image\n        accepts_nested_attributes_for :image_attachment, allow_destroy: true\n    end\nend\n</code></pre>\n\n<p>When the page is updated, it's through nested form attributes with a simple call to <code>@page.update(permitted_params)</code>. </p>\n\n<p>The <code>permitted_params</code> (minus unimportant params), looks like this... </p>\n\n<pre><code>{\n    \"fields_attributes\"=&gt; {\n        \"0\"=&gt; {\n            \"type\"=&gt;\"Fields::Image\", \n            \"image\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x00007ff36cdd9908 @tempfile=#&lt;Tempfile:/var/folders/_t/clkdb5ms365617_039m7y7sc0000gn/T/RackMultipart20191021-38488-4kyp8k.jpg&gt;, @original_filename=\"image.jpg\", @content_type=\"image/jpeg\", @headers=\"Content-Disposition: form-data; name=\\\"content_page[fields_attributes][0][image]\\\"; filename=\\\"image.jpg\\\"\\r\\nContent-Type: image/jpeg\\r\\n\"&gt;, \n            \"id\"=&gt;\"8059\"\n        } \n    } \n} \n</code></pre>\n\n<p>To maintain the ActiveStorage 5.2 behaviour of updating a collection, rather than overwriting it, I have the following in my <code>application.rb</code>: </p>\n\n<p><code>config.active_storage.replace_on_assign_to_many = false</code></p>\n\n<p>However, because the fields relationship is a <code>has_one_attached</code>, this should not affect it. </p>\n\n<p>From the logs, no upload starts and no updates are made to the Active Storage tables, but one update is written to the <code>Page</code> table: </p>\n\n<p><code>Content::Page Update (5.2ms)  UPDATE `pages` SET `pages`.`updated_at` = '2019-10-21 13:58:18' WHERE `pages`.`id` = 105 /*application:myapp,controller:pages,action:update*/</code></p>\n\n<p>Thats it though, nothing else. </p>\n\n<p>However, if I <code>byebug</code> in the update method and then perform the update manually: </p>\n\n<pre><code>$ img = Fields::Image.new(image: permitted_params.dig(\"fields_attributes\", \"0\", \"image\"))\n#&lt;Content::Fields::Image id: nil, type: \"Content::Fields::Image\"&gt;\n$ img.valid?\n# true\n$ img.save\n\n   (4.6ms)  BEGIN \n  Field Load (1.5ms)  SELECT `fields`.* FROM `fields` WHERE `fields`.`page_id` IS NULL AND (`fields`.`position` IS NOT NULL) ORDER BY `fields`.`position` DESC LIMIT 1 \n  Fields::Image Create (1.7ms)  INSERT INTO `fields` (`type`) VALUES ('Fields::Image') \n  ActiveStorage::Blob Load (1.6ms)  SELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 8062 AND `active_storage_attachments`.`record_type` = 'Fields::Image' AND `active_storage_attachments`.`name` = 'image' ORDER BY `active_storage_attachments`.`position` ASC LIMIT 1 \n  ActiveStorage::Attachment Load (1.6ms)  SELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 8062 AND `active_storage_attachments`.`record_type` = 'Fields::Image' AND `active_storage_attachments`.`name` = 'image' ORDER BY `active_storage_attachments`.`position` ASC LIMIT 1 \n  ActiveStorage::Blob Create (2.7ms)  INSERT INTO `active_storage_blobs` (`key`, `filename`) VALUES ('mnf9brbh9e1kyriummf11kpd7t6q', 'image.jpg') \n  ActiveStorage::Attachment Load (2.0ms)  SELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_type` = 'Fields::Image' AND `active_storage_attachments`.`name` = 'image' AND `active_storage_attachments`.`record_id` = 8062 AND (`active_storage_attachments`.`position` IS NOT NULL) ORDER BY `active_storage_attachments`.`position` DESC LIMIT 1 \n  ActiveStorage::Attachment Create (4.1ms)  INSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`) VALUES ('image', 'Fields::Image') \n  Fields::Image Update (2.3ms)  UPDATE `fields` SET `fields`.`updated_at` = '2019-10-21 14:24:06' WHERE `fields`.`id` = 8062 \n   (2.0ms)  COMMIT \n  FlatDisk Storage (5.3ms) Uploaded file to key: mnf9brbh9e1kyriummf11kpd7t6q (checksum: ms9Zu1oagR5kGjcci1YfhQ==)\n[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 034d495a-01c1-4935-a873-b07fcec35f47) to Sidekiq(active_storage_analysis) with arguments: #&lt;GlobalID:0x00007ff36c2e2090 @uri=#&lt;URI::GID gid://dswt/ActiveStorage::Blob/52786&gt;&gt;\n\n# true\n</code></pre>\n\n<p>So this leads me to think it might be something to do with the nested params, but I cannot see an issue with these, so I'm stumped as to what might be going on. </p>\n\n<p>Image uploads function normally elsewhere on the site, its just in this one place that they are not working as expected. </p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>Thank you, Paul.</p>\n\n<p>EDIT: </p>\n\n<p>I've narrowed it down to ActiveStorage not updating the image association unless a field on the model (<code>updated_at</code> or whatever column lives on the table) is updated as well. This seems to trigger ActiveRecord to persist the  instance, which triggers ActiveStorage to upload the file. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 6, "creation_date": 1571665630, "post_id": 58487518, "comment_id": 103305985, "body": "I would&#39;nt use migrations to move the data, its not at all what they are intended to do. Instead use <code>pg_dump</code> and <code>pg_restore</code>."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1571668220, "post_id": 58487518, "comment_id": 103307376, "body": "I also don&#39;t see the point in using yaml_db unless you are changing from something else than postgres. The PG tools are superior and do dumps as SQL instead of dumping SQL to another format only to convert it back which is really ineffective."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 3, "creation_date": 1571672933, "post_id": 58487518, "comment_id": 103309961, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/876522/creating-a-copy-of-a-database-in-postgresql\">Creating a copy of a database in PostgreSQL</a>"}], "owner": {"reputation": 9, "user_id": 7026641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4722aaac55f8335c96576dbe59614b7c?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/7026641/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571665012, "creation_date": 1571665012, "question_id": 58487518, "link": "https://stackoverflow.com/questions/58487518/how-to-start-new-rails-project-with-existing-database", "title": "How to start new Rails project with existing database?", "body": "<p>I would like to start new Rails(v 6.0) project with an existing postgresql database on local machine.</p>\n\n<p>In order to move the data I used gem 'yaml_db' which dumped data from the existing db into data.yml. I created two migrations: one to load schema a second to load data from data.yml file. The second one is failing to migrate, because of foreign key constraints errors. I followed the steps in this article: <a href=\"https://medium.com/@kitsched/starting-a-ruby-on-rails-project-from-existing-data-7dda5044c85f\" rel=\"nofollow noreferrer\">https://medium.com/@kitsched/starting-a-ruby-on-rails-project-from-existing-data-7dda5044c85f</a></p>\n\n<p>Is there some easier way to accomplish this? After I manage to load the data, can I just copy the model files from old Rails(v 4.0) application?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sphinx", "thinking-sphinx"], "answers": [{"tags": [], "owner": {"reputation": 15586, "user_id": 54500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gg5v8.jpg?s=128&g=1", "display_name": "pat", "link": "https://stackoverflow.com/users/54500/pat"}, "is_accepted": true, "score": 1, "last_activity_date": 1571660524, "creation_date": 1571660524, "answer_id": 58486211, "question_id": 58485901, "link": "https://stackoverflow.com/questions/58485901/how-to-search-data-on-created-at-less-than-in-thinking-sphinx/58486211#58486211", "title": "How to search data on created at less than in thinking sphinx", "body": "<p>It is possible, but it's not entirely obvious.</p>\n\n<p>What you'll need to do is add an extra column in the SELECT clause, and then filter by that. Something along the lines of:</p>\n\n<pre><code>Model.search \"pancakes\",\n  :select =&gt; \"*, IF(created_at &gt; #{1.year.ago.to_i}, 1, 0) AS time_match\",\n  :with   =&gt; {:time_match =&gt; 1}\n</code></pre>\n\n<p>You will need to have <code>created_at</code> as an attribute in your index file for this to work.</p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 58486211, "answer_count": 1, "score": 0, "last_activity_date": 1571660524, "creation_date": 1571659319, "question_id": 58485901, "link": "https://stackoverflow.com/questions/58485901/how-to-search-data-on-created-at-less-than-in-thinking-sphinx", "title": "How to search data on created at less than in thinking sphinx", "body": "<p>Using <code>thinking_sphinx</code> to fetch data from records. It working fine but facing an issue that not find any to get records on date comparison like created_at greater than or less than. I check their official documentation also <a href=\"https://freelancing-gods.com/thinking-sphinx/v4/\" rel=\"nofollow noreferrer\">Thinking Sphinx</a></p>\n\n<p>Is thinking sphinx provide that way? If yes then can we do that</p>\n"}, {"tags": ["ruby", "email", "gmail", "sinatra", "pony"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1571673124, "post_id": 58485268, "comment_id": 103310053, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/23137012/535-5-7-8-username-and-password-not-accepted\">535-5.7.8 Username and Password not accepted</a>"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571673437, "post_id": 58485268, "comment_id": 103310213, "body": "Note that the very first tip under <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> is <i>Search, research, and keep track of what you find</i>, and that there are <a href=\"https://stackoverflow.com/search?q=535-5.7.8+Username+and+Password+not+accepted\">222 search results</a> for &quot;535-5.7.8 Username and Password not accepted&quot;."}], "owner": {"reputation": 117, "user_id": 10709454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d496bb8450ca5d216f12de3223951?s=128&d=identicon&r=PG&f=1", "display_name": "Denis L", "link": "https://stackoverflow.com/users/10709454/denis-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571678318, "creation_date": 1571656971, "last_edit_date": 1571678318, "question_id": 58485268, "link": "https://stackoverflow.com/questions/58485268/netsmtpauthenticationerror-at-contacts-535-5-7-8-username-and-password-not-ac", "title": "Net::SMTPAuthenticationError at /contacts 535-5.7.8 Username and Password not accepted Sinatra Ruby", "body": "<p>When I send a simple form with Sinatra's help, it shows this error:</p>\n\n<p>Net::SMTPAuthenticationError at /contacts 535-5.7.8 Username and Password not accepted Ruby Sinatra</p>\n\n<p>What versions of the programs:</p>\n\n<ul>\n<li>OS: Windows 7/64</li>\n<li>Ruby version: ruby 2.6.3p62 (2019-04-16 revision 67580) [x64-mingw32]</li>\n</ul>\n\n<p>Gems included by the bundle:</p>\n\n<ul>\n<li>backports (3.15.0)</li>\n<li>bundler (2.0.2)</li>\n<li>mail (2.7.1)</li>\n<li>mini_mime (1.0.2)</li>\n<li>multi_json (1.14.1)</li>\n<li>pony (1.13.1)</li>\n<li>rack (1.5.2)</li>\n<li>rack-protection (1.5.1)</li>\n<li>rack-test (1.1.0)</li>\n<li>sinatra (1.4.4)</li>\n<li>sinatra-contrib (1.4.7)</li>\n<li>tilt (1.4.1)</li>\n</ul>\n\n<p>And here is my code in sinatra's app.rb:</p>\n\n<pre><code># app.rb\nrequire 'rubygems'\nrequire 'sinatra'\nrequire 'sinatra/reloader'\nrequire \"pony\"\n\nget '/' do\n    erb \"Hello! &lt;a href=\\\"https://github.com/bootstrap-ruby/sinatra-bootstrap\\\"&gt;Original&lt;/a&gt; pattern has been modified for &lt;a href=\\\"http://rubyschool.us/\\\"&gt;Ruby School&lt;/a&gt;\"           \nend\n\nget \"/contacts\" do\n    erb :contacts\nend\n\npost \"/contacts\" do\n    login   = params[:login]\n    message = params[:message]\n\nPony.mail({\n  :to =&gt; '***1***@gmail.com',    # real mail 1\n  :from =&gt; '***2***@gmail.com',  # real mail 2\n  :via =&gt; :smtp,\n  :subject =&gt; \"New message from user: #{login}\",\n  :body =&gt; \"#{message}\",\n\n  :via_options =&gt; {\n    :address              =&gt; 'smtp.gmail.com',\n    :port                 =&gt; '587',\n    :enable_starttls_auto =&gt; true,\n    :user_name            =&gt; '***2***@gmail.com', # real mail 2\n    :password             =&gt; '**********',\n    :authentication       =&gt; :plain, # :plain, :login, :cram_md5, no auth by default\n    :domain               =&gt; \"gmail.com\" # the HELO domain provided by the client to the server\n    # :openssl_verify_mode =&gt; 'none' \n  }\n})\n  erb :contacts\nend\n</code></pre>\n\n<p>And here is my code in sinatra's contacts.erb:</p>\n\n<pre><code>&lt;body&gt;\n&lt;h2&gt; Feedback &lt;/h2&gt;\n\n&lt;form action=\"/contacts\" method=\"POST\"&gt;\n&lt;div class=\"form-group\"&gt;\n  &lt;label&gt;Your name:&lt;/label&gt;\n  &lt;input name=\"username\" type=\"text\" class=\"form-control\" placeholder=\"Your name\"&gt;\n  &lt;label for=\"comment\"&gt;Text of the appeal:&lt;/label&gt;\n  &lt;textarea name=\"message\" class=\"form-control\" rows=\"5\" placeholder=\"Text of the appeal\"&gt;&lt;/textarea&gt;\n&lt;/div&gt;\n&lt;button type=\"submit\" class=\"btn btn-primary\"&gt;Send:&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Backtrace: </p>\n\n<pre><code> C:/Ruby26-x64/lib/ruby/2.6.0/net/smtp.rb in check_auth_response\n\n            raise SMTPAuthenticationError, res.message\n\nC:/Ruby26-x64/lib/ruby/2.6.0/net/smtp.rb in auth_plain\n\n          check_auth_response res\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "parsing", "xml-parsing"], "comments": [{"owner": {"reputation": 229, "user_id": 2530407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c0cd4007f109d473c295009a2651f45?s=128&d=identicon&r=PG", "display_name": "jmoon90", "link": "https://stackoverflow.com/users/2530407/jmoon90"}, "edited": false, "score": 0, "creation_date": 1571855887, "post_id": 58483943, "comment_id": 103382249, "body": "not sure why it&#39;s being down voted (:"}], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 2530407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c0cd4007f109d473c295009a2651f45?s=128&d=identicon&r=PG", "display_name": "jmoon90", "link": "https://stackoverflow.com/users/2530407/jmoon90"}, "edited": false, "score": 0, "creation_date": 1571690628, "post_id": 58484504, "comment_id": 103317615, "body": "Nice. I didn&#39;t realize Nokogiri was able to do that. I tried using it, but with similar effect as open-uri. Thank you! I marked your answer as correct!"}, {"owner": {"reputation": 229, "user_id": 2530407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c0cd4007f109d473c295009a2651f45?s=128&d=identicon&r=PG", "display_name": "jmoon90", "link": "https://stackoverflow.com/users/2530407/jmoon90"}, "edited": false, "score": 0, "creation_date": 1571764022, "post_id": 58484504, "comment_id": 103346189, "body": "how would you deal with the message body stuff that&#39;s in Divs <code>&lt;div&gt;Loom in workplace communication. Founded in 2016, Loom has raised $15 million from top-tier investors including Kleiner Perkins, General Catalyst and Slack Fund.&lt;&#47;div&gt;</code> and <code>&lt;strong&gt;As a Technical Support Engineer, you  will\u2026&lt;&#47;strong&gt;\\n&lt;&#47;div&gt;&lt;ul&gt;\\n&lt;li&gt;Help customers through email to ensure they are successful with our product&lt;&#47;li&gt;</code>"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 229, "user_id": 2530407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c0cd4007f109d473c295009a2651f45?s=128&d=identicon&r=PG", "display_name": "jmoon90", "link": "https://stackoverflow.com/users/2530407/jmoon90"}, "edited": false, "score": 0, "creation_date": 1571797101, "post_id": 58484504, "comment_id": 103356156, "body": "Define &quot;deal with&quot;. If you have a pattern you can identify, get the text content using Nokogiri, then apply regexp. If you don&#39;t have a string pattern but do have a syntactic pattern, NLTK to parse the sentence, then extract the relevant parts of speech. If you can&#39;t identify any pattern but you have a large corpus of similar texts, you could use deep learning. If you have none of those, hire a human."}, {"owner": {"reputation": 229, "user_id": 2530407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c0cd4007f109d473c295009a2651f45?s=128&d=identicon&r=PG", "display_name": "jmoon90", "link": "https://stackoverflow.com/users/2530407/jmoon90"}, "edited": false, "score": 0, "creation_date": 1571818435, "post_id": 58484504, "comment_id": 103362708, "body": "Not having any pattern is actually the problem. Seems like an API issue."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1571654180, "creation_date": 1571654180, "answer_id": 58484504, "question_id": 58483943, "link": "https://stackoverflow.com/questions/58483943/parsing-a-xml-string-with-no-sense-of-keys/58484504#58484504", "title": "Parsing a XML string with no sense of keys", "body": "<p>Don't treat it as a string, treat it as an HTML document. Then you can employ the full power of CSS or XPath selectors (or even manual traversal using Ruby methods).</p>\n\n<pre><code>require 'nokogiri'\ndoc = Nokogiri::HTML.fragment(str)\n\n# img src\ndoc.at_css('img')[\"src\"]\n# =&gt; \"https://we-work-remotely.imgix.net/logos/0015/9022/logo.gif?ixlib=rails-2.1.3&amp;w=50&amp;h=50&amp;dpr=2&amp;fit=fill&amp;auto=compress\"\n\n# headquarters\ndoc.at_xpath('.//strong[contains(text(), \"Headquarters\")]/following-sibling::text()').text.strip\n# =&gt; \"San Francisco\"\n</code></pre>\n"}], "owner": {"reputation": 229, "user_id": 2530407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c0cd4007f109d473c295009a2651f45?s=128&d=identicon&r=PG", "display_name": "jmoon90", "link": "https://stackoverflow.com/users/2530407/jmoon90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 58484504, "answer_count": 1, "score": -2, "last_activity_date": 1571693246, "creation_date": 1571652095, "last_edit_date": 1571693246, "question_id": 58483943, "link": "https://stackoverflow.com/questions/58483943/parsing-a-xml-string-with-no-sense-of-keys", "title": "Parsing a XML string with no sense of keys", "body": "<p>I'm using OpenUri and RSS in Rails 5.2.3 and Ruby 2.6.1 to do this. </p>\n\n<p>I'm trying to parse <a href=\"https://weworkremotely.com/categories/remote-product-jobs.rss\" rel=\"nofollow noreferrer\">WeWorkRemotely's</a> RSS feed, however, they have one field description that contains all the information in a string. For example, when I parse it in Rails it returns:</p>\n\n<pre><code>\"&lt;img src=\\\"https://we-work-remotely.imgix.net/logos/0015/9022/logo.gif?ixlib=rails-2.1.3&amp;w=50&amp;h=50&amp;dpr=2&amp;fit=fill&amp;auto=compress\\\" alt=\\\"Logo.gif?ixlib=rails 2.1\\\" /&gt;\\n\\n&lt;p&gt;\\n  &lt;strong&gt;Headquarters:&lt;/strong&gt; San Francisco \\n    &lt;br /&gt;&lt;strong&gt;URL:&lt;/strong&gt; &lt;a href=\\\"http://www.loom.com\\\"&gt;http://www.loom.com&lt;/a&gt;\\n&lt;/p&gt;\\n\\n&lt;h1&gt;&lt;strong&gt;About Loom&lt;/strong&gt;&lt;/h1&gt;&lt;div&gt;Loom is a new kind of work communication tool, already helping over a million people get their message across through instantly shareable videos. Our users work at companies like HubSpot, Square, Uber, GrubHub and LinkedIn. Our mission is to be the global leader in human workplace communication. Founded in 2016, Loom has raised $15 million from top-tier investors including Kleiner Perkins, General Catalyst and Slack Fund.&lt;/div&gt;&lt;h1&gt;&lt;strong&gt;The Role&lt;/strong&gt;&lt;/h1&gt;&lt;div&gt;As a Technical Support Engineer, you will be a key part of Loom's support experience at scale and provide timely and effective resolution to customer issues by applying your technical and troubleshooting skills.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We are looking for support champions who are genuinely happy to help others. If this sounds like you, you came to the right place!&lt;br&gt;&lt;br&gt;&lt;strong&gt;As a Technical Support Engineer, you\u00a0 will\u2026&lt;/strong&gt;\\n&lt;/div&gt;&lt;ul&gt;\\n&lt;li&gt;Help customers through email to ensure they are successful with our product&lt;/li&gt;\\n&lt;li&gt;Leverage effective troubleshooting to quickly identify the source of customer issues and provide a prompt and appropriate solution&lt;/li&gt;\\n&lt;li&gt;Troubleshoot, investigate, and create detailed bug reports for our Engineering team&lt;/li&gt;\\n&lt;li&gt;Jump on ad-hoc calls with customers to troubleshoot issues live, as necessary&lt;/li&gt;\\n&lt;li&gt;Identify bugs, test, report, and working with our Engineering team to assist with a fix&lt;/li&gt;\\n&lt;li&gt;Actively collect insights from customers and focus on closing the communication loop by providing product feedback to the team&lt;/li&gt;\\n&lt;li&gt;Provide timely updates to the Support and Engineering Managers regarding new trends in issues&lt;/li&gt;\\n&lt;li&gt;Develop and document best practices to enhance SL2 troubleshooting processes&lt;/li&gt;\\n&lt;li&gt;Create technical documentation such as FAQs, guides, knowledge-base articles and how-to\u2019s for Loom customers&lt;/li&gt;\\n&lt;li&gt;Help the Engineering team develop tools to help our Support team work quickly and efficiently&lt;/li&gt;\\n&lt;li&gt;Dive into the codebase and gaining domain knowledge of different parts of Loom&lt;/li&gt;\\n&lt;li&gt;Make efficient changes to the codebase to solve small and quick tasks/issues&lt;/li&gt;\\n&lt;/ul&gt;&lt;div&gt;\\n&lt;br&gt;&lt;strong&gt;You could be a good fit if you have..&lt;/strong&gt;\\n&lt;/div&gt;&lt;ul&gt;\\n&lt;li&gt;Previous experience delivering excellent support experiences with respect, empathy and understanding&lt;/li&gt;\\n&lt;li&gt;A minimum of 4+ years of Technical Support and Customer Support experience&lt;/li&gt;\\n&lt;li&gt;Gained experience/proficiency in Saas solutions and electron apps (CSS, JavaScript, HTML) or have earned a degree in a technical field like computer science&lt;/li&gt;\\n&lt;li&gt;Technical understanding and ability to troubleshoot and resolve technical problems on your own&lt;/li&gt;\\n&lt;li&gt;The ability to handle high volume of support conversations&lt;/li&gt;\\n&lt;li&gt;Excellent written and spoken English&lt;/li&gt;\\n&lt;li&gt;Are available to work in the Central or Pacific Time Zone and on a full-time schedule that may span weekends and may include holidays as our customers need us&lt;/li&gt;\\n&lt;/ul&gt;&lt;div&gt;\\n&lt;br&gt;&lt;strong&gt;A bonus if you have experience with...&lt;/strong&gt;\\n&lt;/div&gt;&lt;ul&gt;\\n&lt;li&gt;Installation, configuration, and troubleshooting of Windows and Mac&lt;/li&gt;\\n&lt;li&gt;Troubleshooting protocols like HTTP, HTTPS, WebSockets, DNS&lt;/li&gt;\\n&lt;li&gt;Understanding of TCP/IP and ARP to run packet traces and troubleshoot network issues&lt;/li&gt;\\n&lt;li&gt;Any of these certifications: Cisco CCNA, Microsoft Certified Solutions Expert (MCSE), Apple Certified System Administrator, CompTIAA+, CompTIA Network+&lt;/li&gt;\\n&lt;/ul&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;strong&gt;Perks at Loom&lt;/strong&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;* Competitive compensation and equity package&lt;/div&gt;&lt;div&gt;* Medical, dental, and vision coverage (US-based team), healthcare reimbursement (non-US based team)&lt;/div&gt;&lt;div&gt;* Unlimited PTO&lt;/div&gt;&lt;div&gt;* Remote-first team&lt;/div&gt;&lt;div&gt;* Paid parental leave&lt;/div&gt;&lt;div&gt;* Yearly off-site retreats (this year we went to Costa Rica for a week!)&lt;/div&gt;&lt;div&gt;* Learning &amp;amp; Development reimbursement&lt;/div&gt;&lt;div&gt;* Wellness reimbursement&lt;/div&gt;&lt;div&gt;\u00a0&lt;/div&gt;&lt;div&gt;&lt;strong&gt;SF office perks&lt;/strong&gt;&lt;/div&gt;&lt;div&gt;* Remote weeks every other month&lt;/div&gt;&lt;div&gt;* Daily in-office lunch, unlimited snacks &amp;amp; drinks&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;strong&gt;Remote-specific perks&lt;/strong&gt;&lt;/div&gt;&lt;div&gt;* Home office &amp;amp; technology stipends&lt;/div&gt;&lt;div&gt;* New Hire Onboarding in SF&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;strong&gt;Loom is an equal opportunity employer.&lt;/strong&gt;&lt;/div&gt;&lt;div&gt;We are actively seeking to create a diverse work environment because teams are stronger with different perspectives and experiences.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;We value a diverse workplace and encourage women, people of color, LGBTQIA individuals, people with disabilities, members of ethnic minorities, foreign-born residents, older members of society, and others from minority groups and diverse backgrounds to apply. We do not discriminate on the basis of race, gender, religion, color, national origin, sexual orientation, age, marital status, veteran status, or disability status. All employees and contractors of Loom are responsible for maintaining a work culture free from discrimination and harassment by treating others with kindness and respect.&lt;/div&gt;\\n\\n&lt;p&gt;&lt;strong&gt;To apply:&lt;/strong&gt; &lt;a href=\\\"https://jobs.lever.co/useloom/15398ec6-b2c1-4f95-9ef5-8fa2a62c1bed?lever-origin=applied&amp;amp;lever-source%5B%5D=WeWorkRemotely\\\"&gt;https://jobs.lever.co/useloom/15398ec6-b2c1-4f95-9ef5-8fa2a62c1bed?lever-origin=applied&amp;amp;lever-source%5B%5D=WeWorkRemotely&lt;/a&gt;&lt;/p&gt;\\n\"\n</code></pre>\n\n<p>What would be the best way for me to actually grab data from this block? Even if I try to pick things up like <code>img src</code>, <code>head quarters</code>, or <code>a href</code> links, it's a big string where I can't easily split that makes sense.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1571683105, "post_id": 58483615, "comment_id": 103314576, "body": "Your criterion is something one normally sees at <a href=\"https://codegolf.stackexchange.com/\">Code Golf</a>."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 5, "creation_date": 1571652371, "post_id": 58483958, "comment_id": 103299211, "body": "<i>&quot;Rubyists basically pretend for does not exist&quot;</i> \u2013 what is that <code>for</code> you&#39;re talking about?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571691882, "post_id": 58483958, "comment_id": 103318068, "body": "@Stefan, what is the source for those enlightened words? A wise old man from the east (of Delmenhorst)?"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 5, "last_activity_date": 1571652915, "last_edit_date": 1571652915, "creation_date": 1571652140, "answer_id": 58483958, "question_id": 58483615, "link": "https://stackoverflow.com/questions/58483615/easiest-way-to-populate-an-array-with-user-input-with-the-least-amount-of-lines/58483958#58483958", "title": "Easiest way to populate an array with user input/ with the least amount of lines of code", "body": "<p>Minimum number of lines? One. Once you have <code>max</code>:</p>\n\n<pre><code>array = max.times.map { gets.chomp.then { |l| case l when /^\\d+$/ then l.to_i when /^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$/ then l.to_f else l end } }\n</code></pre>\n\n<p>This is even shorter (though some people will object):</p>\n\n<pre><code>array = max.times.map { gets.chomp.then { |l| Integer(l) rescue Float(l) rescue l } }\n</code></pre>\n\n<p>It would be more readable to write it in several lines though.</p>\n\n<p>Note also that Rubyists basically pretend <code>for</code> does not exist in the language, and will typically replace it with <code>Enumerable#each</code>, <code>Integer#times</code> and similar.</p>\n\n<hr>\n\n<p>This is not quite the same as what you have; my code makes it impossible to have a string that would be a valid number, like e.g. <code>\"2.0\"</code>. Your code is not too bad if you want that functionality (and obsession with number of lines is generally misguided). Things I would change:</p>\n\n<ul>\n<li><p>Loop. <code>array = max.times.map do ... end</code> over <code>for</code> any time. (This also makes explicit assignment to <code>array[i]</code> unnecessary.)</p></li>\n<li><p><code>\"float\".start_with?(data_type.downcase)</code> instead of <code>%W[Float FLOAT float f F].include?(data_type)</code>, so you don't need to worry about listing all the variations.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571653562, "post_id": 58484137, "comment_id": 103299748, "body": "It might not be obvious how to implement a working <code>else</code> part along with <code>max.times.map</code> \u2013 maybe you should add it to your answer."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 3, "creation_date": 1571654409, "post_id": 58484137, "comment_id": 103300123, "body": "Hint: <code>else redo</code> (<code>redo</code> is so underrated...)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1571656207, "post_id": 58484137, "comment_id": 103300947, "body": "Yep, was thinking about that myself. Added it to the answer."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 2, "last_activity_date": 1571656184, "last_edit_date": 1571656184, "creation_date": 1571652852, "answer_id": 58484137, "question_id": 58483615, "link": "https://stackoverflow.com/questions/58483615/easiest-way-to-populate-an-array-with-user-input-with-the-least-amount-of-lines/58484137#58484137", "title": "Easiest way to populate an array with user input/ with the least amount of lines of code", "body": "<p>Without changing any behaviour apart from accepting <code>string</code>, <code>int</code> and <code>float</code> as case insensitive (eg. <code>stRinG</code> now also works) you could do something like this.</p>\n\n<pre><code>puts \"how many elements?\"\nmax = gets.to_i\n\narray = max.times.map do\n  puts \"are you entering in a string, an int or a float?\"\n\n  case gets\n  when /\\A(string|s)\\Z/i\n    puts \"enter in a string\"\n    gets.chomp\n  when /\\A(int|i)\\Z/i\n    puts \"enter an int\"\n    gets.to_i\n  when /\\A(float|f)\\Z/i\n    puts \"enter a float\"\n    gets.to_f\n  end\nend\n\nprint array\n</code></pre>\n\n<p><strong>Note:</strong> You might want to add an <em>else</em> inside the <em>case</em>-statement, to handle the scenario that the user doesn't enter <code>string</code>, <code>int</code> or <code>float</code>. Currently It will result in a <code>nil</code> value in the array.</p>\n\n<p>You might want to implement this in the following manner:</p>\n\n<pre><code>case gets\nwhen # ...\n  #...\nelse\n  redo\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1571659677, "creation_date": 1571659677, "answer_id": 58485997, "question_id": 58483615, "link": "https://stackoverflow.com/questions/58483615/easiest-way-to-populate-an-array-with-user-input-with-the-least-amount-of-lines/58485997#58485997", "title": "Easiest way to populate an array with user input/ with the least amount of lines of code", "body": "<p>Using a <code>Hash</code> as an helper:</p>\n\n<pre><code>datatypes = { i: { convert: 'to_i', text: 'an integer' }, f: { convert: 'to_f', text: 'a float' } }\ndatatypes.default = { convert: 'to_s', text: 'a string' }\n\narray = max.times.map do\n  puts \"Are you entering in an (i)nt, a (f)loat or a string (default)?\"\n  data_type = gets[0].downcase.to_sym # you can improve this part\n  puts \"enter in #{datatypes[data_type][:text]}\"\n  gets.chomp.send(datatypes[data_type][:convert])\nend\n\np array\np array.map &amp;:class\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1571691240, "last_edit_date": 1592644375, "creation_date": 1571690550, "answer_id": 58493858, "question_id": 58483615, "link": "https://stackoverflow.com/questions/58483615/easiest-way-to-populate-an-array-with-user-input-with-the-least-amount-of-lines/58493858#58493858", "title": "Easiest way to populate an array with user input/ with the least amount of lines of code", "body": "<p>OK, I'll bite.</p>\n<pre><code>p Array.new(puts(&quot;How many elements?&quot;) || gets.to_i) {\n  puts(&quot;Are you entering in a string, an int or a float?&quot;) ||\n  case(gets.chomp)\n  when &quot;string&quot;, &quot;S&quot; then (puts(&quot;Enter a string&quot;)   || gets.chomp)\n  when &quot;int&quot;, &quot;INT&quot;  then (puts(&quot;Enter an integer&quot;) || gets.to_i)\n  when &quot;float&quot;, &quot;F&quot;  then (puts(&quot;Enter a float&quot;)    || gets.to_f)\n  end\n}\n</code></pre>\n<p>The following dialog:</p>\n<pre><code>How many elements?: 3\n\nAre you entering in a string, an int or a float?: int\nEnter an integer: 5\n\nAre you entering in a string, an int or a float?: S    \nEnter a string: hi\n\nAre you entering in a string, an int or a float?: F\nEnter a float: 3.4\n</code></pre>\n<p>results in the following to be displayed (and returned):</p>\n<pre><code>[5, &quot;hi&quot;, 3.4]\n</code></pre>\n<p>I used <code>p</code> rather than <code>puts</code> (which would display the elements of this array one per line) to make clear that it's an array that's being displayed. Note that each <code>puts</code> in the snipped returns <code>nil</code>, so <code>nil || x #=&gt; x</code>.</p>\n<p>This snippet has eight lines, but it can be reduced to one by removing the newlines:</p>\n<h1><p></p></h1>\n<pre><code>p Array.new(puts(&quot;How many elements?&quot;) || gets.to_i) { puts(&quot;Are you entering in a string, an int or a float?&quot;) || case(gets.chomp) when &quot;string&quot;, &quot;S&quot; then  (puts(&quot;Enter a string&quot;) || gets.chomp) when &quot;int&quot;, &quot;INT&quot;  then (puts(&quot;Enter an integer&quot;) || gets.to_i) when &quot;float&quot;, &quot;F&quot; then (puts(&quot;Enter a float&quot;) || gets.to_f) end }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1571704127, "creation_date": 1571704127, "answer_id": 58495651, "question_id": 58483615, "link": "https://stackoverflow.com/questions/58483615/easiest-way-to-populate-an-array-with-user-input-with-the-least-amount-of-lines/58495651#58495651", "title": "Easiest way to populate an array with user input/ with the least amount of lines of code", "body": "<blockquote>\n  <p>So far, I made some code that worked using a for loop, but I wanted to know if there was a way to optimize it and have the least amount of lines of code.</p>\n</blockquote>\n\n<p>In Ruby, newlines are never required, so \"the least amount of lines of code\" for <em>any</em> problem in Ruby is <em>always</em> 1: </p>\n\n<pre><code>puts \"how many elements?\"; max = gets.to_i; array = []; for i in 0..max - 1 do puts \"are you entering in a string, an int or a float?\"; data_type = gets.chomp; if %W[string STRING String s S].include?(data_type) then puts \"enter in a string\"; array[i] = gets.chomp elsif %W[int INT Int i I].include?(data_type) then puts \"enter an int\"; array[i] = gets.to_i elsif %W[Float FLOAT float f F].include?(data_type) then puts \"enter a float\"; array[i] = gets.to_f end end; print array\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 12157205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c76545be1ba71a1805d484bde098255?s=128&d=identicon&r=PG&f=1", "display_name": "CodeDependency", "link": "https://stackoverflow.com/users/12157205/codedependency"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1571704127, "creation_date": 1571650832, "last_edit_date": 1571651732, "question_id": 58483615, "link": "https://stackoverflow.com/questions/58483615/easiest-way-to-populate-an-array-with-user-input-with-the-least-amount-of-lines", "title": "Easiest way to populate an array with user input/ with the least amount of lines of code", "body": "<p>What is the easiest way of creating an array of x amount of elements comprised of mixed data types (ie, array with strings, ints and floats) from user input</p>\n\n<p>So far, I made some code that worked using a for loop, but I wanted to know if there was a way to optimize it and have the least amount of lines of code.</p>\n\n<pre><code>puts \"how many elements?\"\n\nmax = gets.to_i\narray = []\n\nfor i in 0..max - 1\n  puts \"are you entering in a string, an int or a float?\"\n  data_type = gets.chomp\n\n  if %W[string STRING String s S].include?(data_type)\n    puts \"enter in a string\"\n    array[i] = gets.chomp\n  elsif %W[int INT Int i I].include?(data_type)\n    puts \"enter an int\"\n    array[i] = gets.to_i\n  elsif %W[Float FLOAT float f F].include?(data_type)\n    puts \"enter a float\"\n    array[i] = gets.to_f\n  end\nend\n\nprint array\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1571661222, "post_id": 58483431, "comment_id": 103303495, "body": "Hi, are you using Rails 6? If not, what version of Rails are you using?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1571668710, "post_id": 58483431, "comment_id": 103307648, "body": "@mayorsanmayor  &#39;rails&#39;, &#39;~&gt; 5.2.2&#39;, &#39;&gt;= 5.2.2.1&#39;"}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1571725475, "post_id": 58483431, "comment_id": 103325361, "body": "Every time you make changes in the assets.rb file you need to restart your server, the only reason why this will not work is if your js file is not in the assets.rb file and if you added it, you probably forgot to restart your server. Can you confirm this is the case? See this ans - <a href=\"https://stackoverflow.com/questions/45237486/the-asset-application-js-is-not-present-in-the-asset-pipeline\" title=\"the asset application js is not present in the asset pipeline\">stackoverflow.com/questions/45237486/&hellip;</a>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1571800214, "post_id": 58483431, "comment_id": 103356721, "body": "@mayorsanmayor doesn&#39;t adding it to my assets folder pre-compile it?"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 848, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571650541, "creation_date": 1571650110, "last_edit_date": 1571650541, "question_id": 58483431, "link": "https://stackoverflow.com/questions/58483431/js-is-not-present-in-the-asset-pipeline", "title": "&quot;.js is not present in the asset pipeline&quot;", "body": "<p>I know this is a very repeated question but I have done everything by the books, read a bunch of SO posts and none have helped so far.......</p>\n\n<p>assets.rb</p>\n\n<pre><code>Rails.application.config.assets.version = '1.0'\n\nRails.application.config.assets.paths &lt;&lt; Rails.root.join('node_modules')\n</code></pre>\n\n<p>application.js:</p>\n\n<pre><code>//= require rails-ujs\n//= require activestorage\n//= require jquery3\n//= require popper\n//= require bootstrap-sprockets\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>production.rb:</p>\n\n<pre><code>...\nconfig.assets.js_compressor = Uglifier.new(harmony: true)\nconfig.assets.compile = false\n...\n</code></pre>\n\n<p>gems ( i assume can possible affect this):</p>\n\n<pre><code>gem 'webpacker'\ngem 'react-rails'\ngem 'bootstrap', '~&gt; 4.3.1'\ngem 'jquery-rails'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.2'\ngem 'turbolinks', '~&gt; 5'\ngem 'jbuilder', '~&gt; 2.5'\n</code></pre>\n\n<p>application.rb:</p>\n\n<pre><code>require_relative 'boot'\n\nrequire 'csv'\nrequire 'rails/all'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule Shopify14\n  class Application &lt; Rails::Application\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.2\n    config.serve_static_assets = true\n    # config.active_job.queue_adapter = :sidekiq\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration can go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded after loading\n    # the framework and any gems in your application.\n  end\nend\n</code></pre>\n\n<p>I tried adding <code>application.js</code> to the assets.rb file. (Even though it's already included), but that didn't work.</p>\n\n<p>None of my app/assets/javascript/{} files will work with:</p>\n\n<p><code>&lt;%= javascript_include_tag \"javascript.js\" %&gt;</code> without the asset pipeline error message in the console.</p>\n\n<p>I am using heroku</p>\n\n<p>Is there something I am missing?</p>\n\n<p>I would rather not directly add these files to the assets.rb file because these are mostly page specific js files i want to use.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "rubygems", "mysql-error-1064"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1571649873, "post_id": 58483146, "comment_id": 103297978, "body": "Have you installed MySQL? The error message says it&#39;s not installed."}, {"owner": {"reputation": 17, "user_id": 12250354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cJxE.jpg?s=128&g=1", "display_name": "Gigi", "link": "https://stackoverflow.com/users/12250354/gigi"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1571650219, "post_id": 58483146, "comment_id": 103298161, "body": "Yes, I installed both MySQL and MySQL Connector C. I also tried to install another version of mysql gem (the 0.5.2) but the problem is the same."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1571656028, "post_id": 58483146, "comment_id": 103300874, "body": "<a href=\"https://github.com/rails/rails/commit/d9601fd622a08b8ef5346c10f00fb13328d34d76#diff-1b086e9c0c1a6b852fda7b3542d6957b\" rel=\"nofollow noreferrer\">This</a> may help you, check."}, {"owner": {"reputation": 17, "user_id": 12250354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cJxE.jpg?s=128&g=1", "display_name": "Gigi", "link": "https://stackoverflow.com/users/12250354/gigi"}, "edited": false, "score": 0, "creation_date": 1571661023, "post_id": 58483146, "comment_id": 103303386, "body": "Thanks for answer, I&#39;ve also tried to set a specific range of versions, but the problem was the same when I launch the bundle install."}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1571661309, "post_id": 58483146, "comment_id": 103303547, "body": "looks like mysql is not running on your windows. try to check and ensure mysql is running on your computer."}, {"owner": {"reputation": 17, "user_id": 12250354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cJxE.jpg?s=128&g=1", "display_name": "Gigi", "link": "https://stackoverflow.com/users/12250354/gigi"}, "edited": false, "score": 0, "creation_date": 1571661673, "post_id": 58483146, "comment_id": 103303741, "body": "Indeed, but I checked on MySQL workbench and I&#39;m able to run the server and create a database, so I suppose that MySQL is working well."}], "answers": [{"tags": [], "owner": {"reputation": 167, "user_id": 4958091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10153267965890351/picture?type=large", "display_name": "Sherif Elkassaby", "link": "https://stackoverflow.com/users/4958091/sherif-elkassaby"}, "is_accepted": false, "score": 2, "last_activity_date": 1571651676, "creation_date": 1571651676, "answer_id": 58483840, "question_id": 58483146, "link": "https://stackoverflow.com/questions/58483146/error-bundle-install-failed-for-mysql-gem/58483840#58483840", "title": "Error: bundle install failed for mysql gem", "body": "<p>It is complaining about missing mysql client \nTry this command</p>\n\n<blockquote>\n  <p>sudo apt-get install libmysqlclient-dev</p>\n</blockquote>\n\n<p>and then restart your mysql then try to bundle</p>\n\n<p>More: If you are installing a new app from scratch please follow this link\n<a href=\"https://gorails.com/setup/ubuntu/18.04#mysql\" rel=\"nofollow noreferrer\">https://gorails.com/setup/ubuntu/18.04#mysql</a></p>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 12250354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cJxE.jpg?s=128&g=1", "display_name": "Gigi", "link": "https://stackoverflow.com/users/12250354/gigi"}, "is_accepted": false, "score": 0, "last_activity_date": 1571660927, "creation_date": 1571660927, "answer_id": 58486323, "question_id": 58483146, "link": "https://stackoverflow.com/questions/58483146/error-bundle-install-failed-for-mysql-gem/58486323#58486323", "title": "Error: bundle install failed for mysql gem", "body": "<p><a href=\"https://stackoverflow.com/users/4958091/sherif-elkassaby\">Sherif Elkassaby</a> Thaks for yor answer. Sorry I didn't specify that I'm using Windows and moreover I have installed the gem with the option --with-mysqlclientlib.\nIn my mkmf.log file there are some errors:</p>\n\n<pre><code>have_func: checking for rb_absint_size()... -------------------- yes\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Ruby25-x64/include/ruby-2.5.0/x64-mingw32 -IC:/Ruby25-x64/include/ruby-2.5.0/ruby/backward -IC:/Ruby25-x64/include/ruby-2.5.0 -I. -I/usr/local/opt/openssl/include -D_FORTIFY_SOURCE=2 -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math conftest.c  -L. -LC:/Ruby25-x64/lib -L/usr/local/opt/openssl/lib -L. -pipe -s     -lx64-msvcrt-ruby250  -lgmp -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: #include &lt;winsock2.h&gt;\n4: #include &lt;windows.h&gt;\n5: int main(int argc, char **argv)\n6: {\n7:   return 0;\n8: }\n/* end */\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Ruby25-x64/include/ruby-2.5.0/x64-mingw32 -IC:/Ruby25-x64/include/ruby-2.5.0/ruby/backward -IC:/Ruby25-x64/include/ruby-2.5.0 -I. -I/usr/local/opt/openssl/include -D_FORTIFY_SOURCE=2 -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math conftest.c  -L. -LC:/Ruby25-x64/lib -L/usr/local/opt/openssl/lib -L. -pipe -s     -lx64-msvcrt-ruby250  -lgmp -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;winsock2.h&gt;\n 4: #include &lt;windows.h&gt;\n 5: \n 6: /*top*/\n 7: extern int t(void);\n 8: int main(int argc, char **argv)\n 9: {\n10:   if (argc &gt; 1000000) {\n11:     printf(\"%p\", &amp;t);\n12:   }\n13: \n14:   return 0;\n15: }\n16: int t(void) { void ((*volatile p)()); p = (void ((*)()))rb_absint_size; return !p; }\n/* end */\n\n--------------------\n\nhave_func: checking for rb_absint_singlebit_p()... -------------------- yes\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Ruby25-x64/include/ruby-2.5.0/x64-mingw32 -IC:/Ruby25-x64/include/ruby-2.5.0/ruby/backward -IC:/Ruby25-x64/include/ruby-2.5.0 -I. -I/usr/local/opt/openssl/include -D_FORTIFY_SOURCE=2 -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math conftest.c  -L. -LC:/Ruby25-x64/lib -L/usr/local/opt/openssl/lib -L. -pipe -s     -lx64-msvcrt-ruby250  -lgmp -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;winsock2.h&gt;\n 4: #include &lt;windows.h&gt;\n 5: \n 6: /*top*/\n 7: extern int t(void);\n 8: int main(int argc, char **argv)\n 9: {\n10:   if (argc &gt; 1000000) {\n11:     printf(\"%p\", &amp;t);\n12:   }\n13: \n14:   return 0;\n15: }\n16: int t(void) { void ((*volatile p)()); p = (void ((*)()))rb_absint_singlebit_p; return !p; }\n/* end */\n\n--------------------\n\nhave_func: checking for rb_wait_for_single_fd()... -------------------- yes\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Ruby25-x64/include/ruby-2.5.0/x64-mingw32 -IC:/Ruby25-x64/include/ruby-2.5.0/ruby/backward -IC:/Ruby25-x64/include/ruby-2.5.0 -I. -I/usr/local/opt/openssl/include -D_FORTIFY_SOURCE=2 -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math conftest.c  -L. -LC:/Ruby25-x64/lib -L/usr/local/opt/openssl/lib -L. -pipe -s     -lx64-msvcrt-ruby250  -lgmp -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nconftest.c: In function 't':\nconftest.c:16:57: error: 'rb_wait_for_single_fd' undeclared (first use in this function)\n   16 | int t(void) { void ((*volatile p)()); p = (void ((*)()))rb_wait_for_single_fd; return !p; }\n      |                                                         ^~~~~~~~~~~~~~~~~~~~~\nconftest.c:16:57: note: each undeclared identifier is reported only once for each function it appears in\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;winsock2.h&gt;\n 4: #include &lt;windows.h&gt;\n 5: \n 6: /*top*/\n 7: extern int t(void);\n 8: int main(int argc, char **argv)\n 9: {\n10:   if (argc &gt; 1000000) {\n11:     printf(\"%p\", &amp;t);\n12:   }\n13: \n14:   return 0;\n15: }\n16: int t(void) { void ((*volatile p)()); p = (void ((*)()))rb_wait_for_single_fd; return !p; }\n/* end */\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Ruby25-x64/include/ruby-2.5.0/x64-mingw32 -IC:/Ruby25-x64/include/ruby-2.5.0/ruby/backward -IC:/Ruby25-x64/include/ruby-2.5.0 -I. -I/usr/local/opt/openssl/include -D_FORTIFY_SOURCE=2 -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math conftest.c  -L. -LC:/Ruby25-x64/lib -L/usr/local/opt/openssl/lib -L. -pipe -s     -lx64-msvcrt-ruby250  -lgmp -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;winsock2.h&gt;\n 4: #include &lt;windows.h&gt;\n 5: \n 6: /*top*/\n 7: extern int t(void);\n 8: int main(int argc, char **argv)\n 9: {\n10:   if (argc &gt; 1000000) {\n11:     printf(\"%p\", &amp;t);\n12:   }\n13: \n14:   return 0;\n15: }\n16: extern void rb_wait_for_single_fd();\n17: int t(void) { rb_wait_for_single_fd(); return 0; }\n/* end */\n\n--------------------\n\nfind_library: checking for -lmysqlclient... -------------------- no\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Ruby25-x64/include/ruby-2.5.0/x64-mingw32 -IC:/Ruby25-x64/include/ruby-2.5.0/ruby/backward -IC:/Ruby25-x64/include/ruby-2.5.0 -I. -I/usr/local/include -I/usr/local/opt/openssl/include -D_FORTIFY_SOURCE=2 -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math conftest.c  -L. -LC:/Ruby25-x64/lib -L/usr/local/lib -L/usr/local/opt/openssl/lib -L. -pipe -s     -lx64-msvcrt-ruby250 -lmysqlclient  -lgmp -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nC:/Ruby25-x64/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/9.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lmysqlclient\ncollect2.exe: error: ld returned 1 exit status\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;winsock2.h&gt;\n 4: #include &lt;windows.h&gt;\n 5: \n 6: /*top*/\n 7: extern int t(void);\n 8: int main(int argc, char **argv)\n 9: {\n10:   if (argc &gt; 1000000) {\n11:     printf(\"%p\", &amp;t);\n12:   }\n13: \n14:   return 0;\n15: }\n16: \n17: int t(void) { ; return 0; }\n/* end */\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Ruby25-x64/include/ruby-2.5.0/x64-mingw32 -IC:/Ruby25-x64/include/ruby-2.5.0/ruby/backward -IC:/Ruby25-x64/include/ruby-2.5.0 -I. -I/usr/local/include -I/usr/local/opt/openssl/include -D_FORTIFY_SOURCE=2 -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math conftest.c  -L. -LC:/Ruby25-x64/lib -L/usr/local/lib -L/usr/local/opt/openssl/lib -L. -pipe -s     -lx64-msvcrt-ruby250 -lmysqlclient  -lgmp -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nC:/Ruby25-x64/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/9.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lmysqlclient\ncollect2.exe: error: ld returned 1 exit status\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;winsock2.h&gt;\n 4: #include &lt;windows.h&gt;\n 5: \n 6: /*top*/\n 7: extern int t(void);\n 8: int main(int argc, char **argv)\n 9: {\n10:   if (argc &gt; 1000000) {\n11:     printf(\"%p\", &amp;t);\n12:   }\n13: \n14:   return 0;\n15: }\n16: \n17: int t(void) { ; return 0; }\n/* end */\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Ruby25-x64/include/ruby-2.5.0/x64-mingw32 -IC:/Ruby25-x64/include/ruby-2.5.0/ruby/backward -IC:/Ruby25-x64/include/ruby-2.5.0 -I. -I/usr/local/include -I/usr/local/opt/openssl/include -D_FORTIFY_SOURCE=2 -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math conftest.c  -L. -LC:/Ruby25-x64/lib -L/usr/local/lib -L/usr/local/opt/openssl/lib -L/usr/local/lib/mysql -L. -pipe -s     -lx64-msvcrt-ruby250 -lmysqlclient  -lgmp -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nC:/Ruby25-x64/msys64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/9.1.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lmysqlclient\ncollect2.exe: error: ld returned 1 exit status\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;winsock2.h&gt;\n 4: #include &lt;windows.h&gt;\n 5: \n 6: /*top*/\n 7: extern int t(void);\n 8: int main(int argc, char **argv)\n 9: {\n10:   if (argc &gt; 1000000) {\n11:     printf(\"%p\", &amp;t);\n12:   }\n13: \n14:   return 0;\n15: }\n16: \n17: int t(void) { ; return 0; }\n/* end */\n\n--------------------\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 12250354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cJxE.jpg?s=128&g=1", "display_name": "Gigi", "link": "https://stackoverflow.com/users/12250354/gigi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571660927, "creation_date": 1571649126, "question_id": 58483146, "link": "https://stackoverflow.com/questions/58483146/error-bundle-install-failed-for-mysql-gem", "title": "Error: bundle install failed for mysql gem", "body": "<p>Sorry in advance for my bad English.\nI'm trying to install mysql in RoR, but when I try I have this error:</p>\n\n<pre><code>Installing mysql2 0.4.10 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory:\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/mysql2-0.4.10/ext/mysql2\nC:/Ruby25-x64/bin/ruby.exe -r ./siteconf20191021-9148-s1v8ez.rb extconf.rb\n--with-opt-dir=/usr/local/opt/openssl\nchecking for rb_absint_size()... yes\nchecking for rb_absint_singlebit_p()... yes\nchecking for ruby/thread.h... yes\nchecking for rb_thread_call_without_gvl() in ruby/thread.h... yes\nchecking for rb_thread_blocking_region()... no\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_hash_dup()... yes\nchecking for rb_intern3()... yes\nchecking for rb_big_cmp()... yes\nchecking for mysql_query() in -lmysqlclient... no\n-----\nmysql client is missing. Check your installation of MySQL or Connector/C, and\ntry again.\n-----\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby25-x64/bin/$(RUBY_BASE_NAME)\n        --with-mysql-dir\n        --without-mysql-dir\n        --with-mysql-include\n        --without-mysql-include=${mysql-dir}/include\n        --with-mysql-lib\n        --without-mysql-lib=${mysql-dir}/lib\n        --with-mysql-config\n        --without-mysql-config\n        --with-mysql-dir\n        --without-mysql-dir\n        --with-mysql-include\n        --without-mysql-include=${mysql-dir}/include\n        --with-mysql-lib\n        --without-mysql-lib=${mysql-dir}/lib\n        --with-mysqlclientlib\n        --without-mysqlclientlib\n\nTo see why this extension failed to compile, please check the mkmf.log which can\nbe found here:\n\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/extensions/x64-mingw32/2.5.0/mysql2-0.4.10/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/mysql2-0.4.10 for inspection.\nResults logged to\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/extensions/x64-mingw32/2.5.0/mysql2-0.4.10/gem_make.out\n\nAn error occurred while installing mysql2 (0.4.10), and Bundler cannot continue.\nMake sure that `gem install mysql2 -v '0.4.10' --source 'https://rubygems.org/'`\nsucceeds before bundling.\n\nIn Gemfile:\n  mysql2\n</code></pre>\n\n<p>I have already seen all the old posts here and I try to fix some problems but it didn't work.\nI've installed ruby 2.5 and Rails 5. I'm trying to install gem mysql2 -v '4.0.10'.\nCan you help me, please?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1571645240, "post_id": 58482018, "comment_id": 103295866, "body": "Seems like <code>ApiBucket.bucket.object(id).get.body</code> makes the S3 request. You should probably stub that one."}, {"owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571646686, "post_id": 58482018, "comment_id": 103296462, "body": "I don&#39;t need to right? Whatever be it&#39;s response I am anyways stubbing <code>Zlib::GzipReader</code>. So how does it matter?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571650153, "post_id": 58482018, "comment_id": 103298128, "body": "Ruby still evaluates <code>ApiBucket.bucket.object(id).get.body</code> and passes its return value to <code>Zlib::GzipReader.new</code>. It then invokes that object&#39;s <code>read</code> method which returns the stubbed response. So stubbing <code>Zlib::GzipReader#read</code> doesn&#39;t prevent <code>ApiBucket</code> from fetching the raw data from S3."}, {"owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571651662, "post_id": 58482018, "comment_id": 103298840, "body": "Instead of doing that, wrote a private controller and then stubbed that function"}, {"owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1571656405, "post_id": 58482018, "comment_id": 103301044, "body": "Checkout AWS SDK doc <a href=\"https://aws.amazon.com/blogs/developer/advanced-client-stubbing-in-the-aws-sdk-for-ruby-version-3/\" rel=\"nofollow noreferrer\">aws.amazon.com/blogs/developer/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "is_accepted": true, "score": 3, "last_activity_date": 1571651595, "creation_date": 1571651595, "answer_id": 58483816, "question_id": 58482018, "link": "https://stackoverflow.com/questions/58482018/stub-or-mock-instance-method-rspec/58483816#58483816", "title": "Stub or mock instance method rspec", "body": "<p>Instead of stubbing <code>Zlib::GzipReader</code> or the <code>S3 Bucket</code>. One simple and easy way to handle such cases would be to create a new private function in the controller and then stub the controller function.</p>\n\n<p>In the controller side:</p>\n\n<pre><code>def show\n  render json: s3_response\nend\n\nprivate:\n\ndef s3_response\n   Zlib::GzipReader.new(ApiBucket.bucket.object(id).get.body).read\nend\n</code></pre>\n\n<p>The spec will be:</p>\n\n<pre><code>   describe '#GET show' do\n  let!(:resource) { create(:resource) }\n\n  before do\n    json_data = Api::V2::Presenter.consume_as_json(resource)\n    ResourceController.any_instance.stub(:s3_response).and_return(json_data)\n  end\n\n  it 'should return the resource in page format' do\n    get :show, format: :json, params: { id: resource.uuid }\n    response_body_json = JSON.parse(response.body)\n    json_data = Api::V2::Presenter.consume_as_json(\n        Api::V2::Presenter.new(resource).page,\n        true\n      )\n    expect(response_body_json).to eql(JSON.parse(json_data))\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 58483816, "answer_count": 1, "score": 1, "last_activity_date": 1571651638, "creation_date": 1571644488, "last_edit_date": 1571651638, "question_id": 58482018, "link": "https://stackoverflow.com/questions/58482018/stub-or-mock-instance-method-rspec", "title": "Stub or mock instance method rspec", "body": "<p>The below function is a controller action and gets the data to be served from an AWS S3 bucket.</p>\n\n<pre><code>def show\n    s3_response = Zlib::GzipReader.new(ApiBucket.bucket.object(id).get.body).read\n  render json: s3_response\nend\n</code></pre>\n\n<p>I am writing a spec for this method. I need to stub/mock such that <code>s3_response</code> doesn't actually request from s3. Here is what I tried. This doesn't work though. Please help.</p>\n\n<pre><code>describe '#GET show' do\n  let!(:resource) { create(:resource) }\n\n  before do\n    json_data = Api::V2::Presenter.consume_as_json(resource)\n    allow_any_instance_of(Zlib::GzipReader).to receive(:read).and_return(json_data)\n  end\n\n  it 'should return the resource in page format' do\n    get :show, format: :json, params: { id: resource.uuid }\n    response_body_json = JSON.parse(response.body)\n    json_data = Api::V2::Presenter.consume_as_json(\n        Api::V2::ResourcePresenter.new(resource).page,\n        true\n      )\n    expect(response_body_json).to eql(JSON.parse(json_data))\n  end\nend\n</code></pre>\n\n<p>I am getting this error <code>Zlib::GzipFile::Error: not in gzip format</code></p>\n"}, {"tags": ["ruby", "io-redirection"], "answers": [{"comments": [{"owner": {"reputation": 4824, "user_id": 869936, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7147d5843128c21bfc84eccd8aa60ed5?s=128&d=identicon&r=PG", "display_name": "kraftydevil", "link": "https://stackoverflow.com/users/869936/kraftydevil"}, "edited": false, "score": 1, "creation_date": 1571637654, "post_id": 58480271, "comment_id": 103292951, "body": "I&#39;ve actually used Open3 before but wasn&#39;t trying it because I thought the <code>-e</code> switches were necessary and I wasn&#39;t sure how to work that in. You showed me I can just pass the script directly to Open3.capture3 without any manipulation or flags. I don&#39;t know if it&#39;ll cause trouble for other cases, but I can confirm it works when creating a multiline email using a HEREDOC \ud83d\udc4d"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 4824, "user_id": 869936, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7147d5843128c21bfc84eccd8aa60ed5?s=128&d=identicon&r=PG", "display_name": "kraftydevil", "link": "https://stackoverflow.com/users/869936/kraftydevil"}, "edited": false, "score": 1, "creation_date": 1571640503, "post_id": 58480271, "comment_id": 103293926, "body": "If you need to, you could use your <code>*script.split(&#47;\\n&#47;).map { |line| [&#39;-e&#39;, line] }.flatten</code> trick with <code>Open3.capture3</code> with <code>Open3.capture3(&#39;osascript&#39;, *script.split(&#47;\\n&#47;).flat_map { |line| [&#39;-e&#39;, line] }</code>)`."}, {"owner": {"reputation": 4824, "user_id": 869936, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7147d5843128c21bfc84eccd8aa60ed5?s=128&d=identicon&r=PG", "display_name": "kraftydevil", "link": "https://stackoverflow.com/users/869936/kraftydevil"}, "edited": false, "score": 1, "creation_date": 1573357190, "post_id": 58480271, "comment_id": 103854036, "body": "it finally failed and guess who wasn&#39;t checking the status or std_err? --&gt; ME. Now I have to wait until it fails again to see why. I should have listened to that conscience you were talking about :D. Others take heed!"}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 3, "last_activity_date": 1571635918, "creation_date": 1571635918, "answer_id": 58480271, "question_id": 58479938, "link": "https://stackoverflow.com/questions/58479938/how-to-ignore-output-for-a-parameterized-ruby-system-call/58480271#58480271", "title": "How to ignore output for a parameterized Ruby system call", "body": "<p>This would be easier if you switched from <code>Kernel#system</code> to <a href=\"https://ruby-doc.org/stdlib/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow noreferrer\"><code>Open3</code></a>. The methods in Open3 give you convenient control over stdin, stdout, and stderr without having to mess around, you could even feed your script into <code>osascript</code> through stdin rather than splitting it apart and using multiple <code>-e</code> switches.</p>\n\n<p>Something like this perhaps:</p>\n\n<pre><code>out, error, status = Open3.capture3('osascript', stdin_data: script)\n</code></pre>\n\n<p>And if you want to ignore stdout and stderr, use placeholder variables:</p>\n\n<pre><code>_, _, status = Open3.capture3('osascript', stdin_data: script)\n*_, status = Open3.capture3('osascript', stdin_data: script)\n</code></pre>\n\n<p>And if you don't care about stdout, stderr, or the status:</p>\n\n<pre><code>Open3.capture3('osascript', stdin_data: script)\n</code></pre>\n\n<p>But your conscience should tell you to at least check the status.</p>\n"}, {"comments": [{"owner": {"reputation": 4824, "user_id": 869936, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7147d5843128c21bfc84eccd8aa60ed5?s=128&d=identicon&r=PG", "display_name": "kraftydevil", "link": "https://stackoverflow.com/users/869936/kraftydevil"}, "edited": false, "score": 0, "creation_date": 1571646313, "post_id": 58481562, "comment_id": 103296293, "body": "Unfortunately I couldn&#39;t use this because part of my issue was how to pass the manipulation being done and using <code>*script.split(&#47;\\n&#47;).map { |line| [&#39;-e&#39;, line] }.flatten</code> as input. The syntax was tripping me up every time I tried to put everything in one string (corresponds to your &#39;...&#39;). I&#39;m halfway doing it in my last attempt in my post, just not with the redirection parameters that you included. Good to know though"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1571643997, "last_edit_date": 1571643997, "creation_date": 1571642635, "answer_id": 58481562, "question_id": 58479938, "link": "https://stackoverflow.com/questions/58479938/how-to-ignore-output-for-a-parameterized-ruby-system-call/58481562#58481562", "title": "How to ignore output for a parameterized Ruby system call", "body": "<p>The available options for <code>system</code>, <code>exec</code> and <code>spawn</code> are documented in <a href=\"https://ruby-doc.org/core-2.6.5/Kernel.html#method-i-spawn\" rel=\"nofollow noreferrer\"><code>Kernel#spawn</code></a>, including those for redirection. To redirect stdout to <code>/dev/null</code> you'd use:</p>\n\n<pre><code>system('...', out: '/dev/null')\n</code></pre>\n\n<p>Or via <a href=\"https://ruby-doc.org/core-2.6.5/File/Constants.html#NULL\" rel=\"nofollow noreferrer\"><code>File::NULL</code></a>:</p>\n\n<pre><code>system('...', out: File::NULL)\n</code></pre>\n"}], "owner": {"reputation": 4824, "user_id": 869936, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7147d5843128c21bfc84eccd8aa60ed5?s=128&d=identicon&r=PG", "display_name": "kraftydevil", "link": "https://stackoverflow.com/users/869936/kraftydevil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 58480271, "answer_count": 2, "score": 1, "last_activity_date": 1571643997, "creation_date": 1571633344, "last_edit_date": 1592644375, "question_id": 58479938, "link": "https://stackoverflow.com/questions/58479938/how-to-ignore-output-for-a-parameterized-ruby-system-call", "title": "How to ignore output for a parameterized Ruby system call", "body": "<p>I found <a href=\"https://porkrind.org/missives/calling-applescript-from-ruby/\" rel=\"nofollow noreferrer\">some code</a> that allows me to run an Applescript from Ruby via system calls:</p>\n<pre><code>system 'osascript', *script.split(/\\n/).map { |line| ['-e', line] }.flatten\n</code></pre>\n<p>It works great, but it's not exactly what I need.</p>\n<p>I want to modify the system call so that standard output is ignored.</p>\n<p>I started by adding <code>1&gt;/dev/null</code> parameter:</p>\n<pre><code>system 'osascript', *script.split(/\\n/).map { |line| ['-e', line] }.flatten, &quot;1&gt;/dev/null&quot;\n</code></pre>\n<p>This didn't work as the third parameter appears to be ignored.</p>\n<p>Then I removed the parameterized call and used string interpolation:</p>\n<pre><code>system &quot;osascript #{*script.split(/\\n/).map { |line| ['-e', line] }.flatten} 1&gt;/dev/null&quot;\n</code></pre>\n<p>which produced a syntax error.</p>\n<p>Then I tried various attempts at moving things around, which mostly produced other syntax errors.</p>\n<p>What's the correct syntax for ignoring system output in this case?</p>\n"}, {"tags": ["ruby", "task", "rake", "rakefile"], "answers": [{"comments": [{"owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "edited": false, "score": 0, "creation_date": 1571635446, "post_id": 58479635, "comment_id": 103292332, "body": "Nice! I didn&#39;t know I could create tasks inside the <code>#each</code> block. Also adding arguments to <code>:find</code> was very helpful."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 3, "last_activity_date": 1571630532, "creation_date": 1571630532, "answer_id": 58479635, "question_id": 58478950, "link": "https://stackoverflow.com/questions/58478950/remove-duplication-from-rake-tasks/58479635#58479635", "title": "Remove duplication from rake tasks", "body": "<p>Rake tasks can take arguments, so instead of relying on an instance variable you can pass the tags in:</p>\n\n<pre><code>TAGS = ['OPTIMIZE', 'TODO', 'FIXME']\n\ntask :find, [:tags] do |task, args|\n  # command lines can't pass an array, afaik; so if we pass the\n  # tags in, we'll need them as a space separated list\n  tags = if args[:tags]\n           args[:tags].split(' ')\n         else\n           TAGS\n         end\n\n  puts \"finding all tags marked: #{tags.inspect}\"\nend\n</code></pre>\n\n<p>and then on the command line:</p>\n\n<pre><code>% rake find[TODO OPTIMIZE] # may need escaped: rake find\\[TODO\\ OPTIMIZE\\]\nfinding all tags marked: [\"TODO\", \"OPTIMIZE\"]\n% rake find                  \nfinding all tags marked: [\"OPTIMIZE\", \"TODO\", \"FIXME\"]\n</code></pre>\n\n<p>and then, if you still want named tasks as aliases, passing certain arguments, you can pass them in through <code>invoke</code>:</p>\n\n<pre><code>TAGS.each do |tag|\n  task tag.downcase.to_sym do\n    Rake::Task[\"find\"].invoke(tag)\n  end\nend\n</code></pre>\n\n<p>and calling them:</p>\n\n<pre><code>% rake todo\nfinding all tags marked: [\"TODO\"]\n% rake fixme   \nfinding all tags marked: [\"FIXME\"]\n% rake optimize\nfinding all tags marked: [\"OPTIMIZE\"]\n</code></pre>\n"}], "owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58479635, "answer_count": 1, "score": 1, "last_activity_date": 1571630532, "creation_date": 1571623420, "question_id": 58478950, "link": "https://stackoverflow.com/questions/58478950/remove-duplication-from-rake-tasks", "title": "Remove duplication from rake tasks", "body": "<p>I have three rake tasks that modify an instance variable and then call the task <code>:find</code>, This is the Rakefile:</p>\n\n<pre><code>@tags = ['OPTIMIZE', 'TODO', 'FIXME']\n\ntask :optimize do\n   @tags = ['OPTIMIZE']\n   Rake::Task[\"find\"].invoke\nend\n\ntask :todo do\n   @tags = ['TODO']\n   Rake::Task[\"find\"].invoke\nend\n\ntask :fixme do\n   @tags = ['FIXME']\n   Rake::Task[\"find\"].invoke\nend\n\ntask :find do\n   # finds words depending on @tags\nend\n</code></pre>\n\n<p>I would like to remove duplication from the Rakefile and make it more concise. How can I simplify (or combine) the :optimize, :todo, :fixme tasks in this Rakefile?</p>\n"}, {"tags": ["arrays", "regex", "ruby", "parsing", "iterator"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1571641757, "post_id": 58478366, "comment_id": 103294401, "body": "<i>&quot;Why can&#39;t I use the Match method on an array?&quot;</i> \u2013 because <code>Array</code> doesn&#39;t have a <code>match</code> method. Neither does <code>Enumerator</code> (the result of <code>Array#each</code>). Among Ruby&#39;s core classes, only <code>Symbol</code>, <code>String</code> and <code>Regexp</code> respond to <code>match</code>. And none of them takes an array as its argument."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 12248587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f602892ad3235fdc6c09c7b96295e6?s=128&d=identicon&r=PG&f=1", "display_name": "NHyder", "link": "https://stackoverflow.com/users/12248587/nhyder"}, "edited": false, "score": 0, "creation_date": 1571618763, "post_id": 58478428, "comment_id": 103289374, "body": "So after that using ``` matches = lines.map{...} ``` I would need to figure out how to put that information into my three hashes right? Because the MatchData is saved in the matches variable. Or would it be better to have three different match variables with different regular expressions to then put into the hashes?"}, {"owner": {"reputation": 541, "user_id": 12244608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP6EG.jpg?s=128&g=1", "display_name": "TedTran2019", "link": "https://stackoverflow.com/users/12244608/tedtran2019"}, "reply_to_user": {"reputation": 39, "user_id": 12248587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f602892ad3235fdc6c09c7b96295e6?s=128&d=identicon&r=PG&f=1", "display_name": "NHyder", "link": "https://stackoverflow.com/users/12248587/nhyder"}, "edited": false, "score": 0, "creation_date": 1571618846, "post_id": 58478428, "comment_id": 103289385, "body": "Yeah! That&#39;s pretty much it. Ask more questions if you need more help! I&#39;m not particularly sure of what you&#39;re trying to accomplish, though. What kind of information are you trying to parse into 3 different hashes?"}, {"owner": {"reputation": 39, "user_id": 12248587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f602892ad3235fdc6c09c7b96295e6?s=128&d=identicon&r=PG&f=1", "display_name": "NHyder", "link": "https://stackoverflow.com/users/12248587/nhyder"}, "edited": false, "score": 0, "creation_date": 1571619166, "post_id": 58478428, "comment_id": 103289424, "body": "So the basis is that I am trying to sort the IP, the URL, and the HTTP codes into their respective hashes and count the number for each. The other problem that I have is getting the arrays data into the hash. I don&#39;t think the inject command would work in this case because its a different type of data."}, {"owner": {"reputation": 541, "user_id": 12244608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP6EG.jpg?s=128&g=1", "display_name": "TedTran2019", "link": "https://stackoverflow.com/users/12244608/tedtran2019"}, "reply_to_user": {"reputation": 39, "user_id": 12248587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f602892ad3235fdc6c09c7b96295e6?s=128&d=identicon&r=PG&f=1", "display_name": "NHyder", "link": "https://stackoverflow.com/users/12248587/nhyder"}, "edited": false, "score": 0, "creation_date": 1571619519, "post_id": 58478428, "comment_id": 103289474, "body": "Can I see an example of the &#39;access_log&#39; file you&#39;re slurping? Sorry if my responses are slow, I&#39;m studying right now and I take breaks every 30 minutes."}, {"owner": {"reputation": 39, "user_id": 12248587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f602892ad3235fdc6c09c7b96295e6?s=128&d=identicon&r=PG&f=1", "display_name": "NHyder", "link": "https://stackoverflow.com/users/12248587/nhyder"}, "edited": false, "score": 0, "creation_date": 1571619730, "post_id": 58478428, "comment_id": 103289513, "body": "One line of the data looks like this:  192.168.1.142 - - [30/Sep/2016:16:18:23 -0400] &quot;GET / HTTP/1.1&quot; 403 4897 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:49.0) Gecko/20100101 Firefox/49.0&quot;"}, {"owner": {"reputation": 541, "user_id": 12244608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP6EG.jpg?s=128&g=1", "display_name": "TedTran2019", "link": "https://stackoverflow.com/users/12244608/tedtran2019"}, "reply_to_user": {"reputation": 39, "user_id": 12248587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f602892ad3235fdc6c09c7b96295e6?s=128&d=identicon&r=PG&f=1", "display_name": "NHyder", "link": "https://stackoverflow.com/users/12248587/nhyder"}, "edited": false, "score": 0, "creation_date": 1571621471, "post_id": 58478428, "comment_id": 103289776, "body": "Oh man, that&#39;s rough. Is there an example of a URL In that line? Are all of the lines in the same format? Are you allowed to use gems?"}, {"owner": {"reputation": 39, "user_id": 12248587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f602892ad3235fdc6c09c7b96295e6?s=128&d=identicon&r=PG&f=1", "display_name": "NHyder", "link": "https://stackoverflow.com/users/12248587/nhyder"}, "edited": false, "score": 0, "creation_date": 1571622061, "post_id": 58478428, "comment_id": 103289882, "body": "That was a poor example, That one did not have a URL attached to it. All of the lines are in the same format luckily. I do not know what a gem is (very new to programing).  Better Example:  192.168.1.142 - - [30/Sep/2016:16:18:24 -0400] &quot;GET /noindex/css/fonts/Bold/OpenSans-Bold.woff HTTP/1.1&quot; 404 239 &quot;<a href=\"http://optiplex360/noindex/css/open-sans.css\" rel=\"nofollow noreferrer\">optiplex360/noindex/css/open-sans.css</a>&quot; &quot;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:49.0) Gecko/20100101 Firefox/49.0&quot;"}], "tags": [], "owner": {"reputation": 541, "user_id": 12244608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP6EG.jpg?s=128&g=1", "display_name": "TedTran2019", "link": "https://stackoverflow.com/users/12244608/tedtran2019"}, "is_accepted": true, "score": 3, "last_activity_date": 1571618050, "last_edit_date": 1571618050, "creation_date": 1571617725, "answer_id": 58478428, "question_id": 58478366, "link": "https://stackoverflow.com/questions/58478366/why-cant-i-use-the-match-method-on-an-array-in-ruby/58478428#58478428", "title": "Why can&#39;t I use the Match method on an array in ruby?", "body": "<p>So, what's happening is that what readlines does is it slurps the entire text file.</p>\n\n<p>So you have an array with the content of the textfile separated by a newline(and the newline is kept in every string in the array). </p>\n\n<p>After that, you're doing lines.each, which brings out an enumerator. Then you're calling .match on the enumerator instead of the string itself</p>\n\n<p>The proper way to do this would be</p>\n\n<pre><code>lines.each { |line| line.match(/^([:\\d\\.]+) .*\\[.*\\].*\\\"[A-Z]+ *(.+) HTTP/) }\n</code></pre>\n\n<p>However, the above actually won't do anything because all you're doing is iterating against each element and checking if it matches the REGEX.If you want it to actually do something, try...</p>\n\n<pre><code>  matches = lines.map { |line| line.match(/^([:\\d\\.]+) .*\\[.*\\].*\\\"[A-Z]+ *(.+) HTTP/) }\n</code></pre>\n\n<p>Remember that the match method only works on strings. If match matches something, it returns an object of the class MatchData, else if it doesn't match anything-- nil. </p>\n"}], "owner": {"reputation": 39, "user_id": 12248587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f602892ad3235fdc6c09c7b96295e6?s=128&d=identicon&r=PG&f=1", "display_name": "NHyder", "link": "https://stackoverflow.com/users/12248587/nhyder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 58478428, "answer_count": 1, "score": 1, "last_activity_date": 1571618050, "creation_date": 1571616910, "last_edit_date": 1571617865, "question_id": 58478366, "link": "https://stackoverflow.com/questions/58478366/why-cant-i-use-the-match-method-on-an-array-in-ruby", "title": "Why can&#39;t I use the Match method on an array in ruby?", "body": "<p>I need to iterate and parse 108 lines from a file and then sort them into 3 different hashes. (In one iterator.) (In Ruby)</p>\n\n<p>I have the file loaded into the program and into the array I need to parse. When I try to make the iterator anyway I try to use the Regex Match command I get an error abut the unknown method. Is as simple that I can't use that method on a array?</p>\n\n<pre><code>lines = File.readlines('access_log')\n\nlines.each.match(/^([:\\d\\.]+) .*\\[.*\\].*\\\"[A-Z]+ *(.+) HTTP/)\n</code></pre>\n\n<p>This and every other way I have tried to use the match method it hasn't worked. \nThis also doesn't anything for the hash, as I haven't done that yet.</p>\n\n<pre><code>/^([:\\d\\.]+) .*\\[.*\\].*\\\"[A-Z]+ *(.+) HTTP/.match(lines)\n</code></pre>\n\n<p>Have also tried this, but the error output appears that you cant run it on only the array. I beilive this is where I would need to tie the iterator in, but I'm stumped.</p>\n"}, {"tags": ["ruby", "http"], "answers": [{"tags": [], "owner": {"reputation": 541, "user_id": 12244608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP6EG.jpg?s=128&g=1", "display_name": "TedTran2019", "link": "https://stackoverflow.com/users/12244608/tedtran2019"}, "is_accepted": false, "score": 1, "last_activity_date": 1571618481, "creation_date": 1571618481, "answer_id": 58478511, "question_id": 58478331, "link": "https://stackoverflow.com/questions/58478331/meaning-of-readbody-when-when-working-with-ruby-http-responses/58478511#58478511", "title": "meaning of &#39;readbody&#39; when when working with ruby http responses", "body": "<p>I'm going to take a shot and guess that it means that they were able to read the body of the HTTP request. </p>\n\n<p>There's the source code of the #read_body method in the link you provided.</p>\n\n<p><a href=\"https://github.com/ruby/ruby/blob/fe8cc13685a847f5b4b687d9edb88f5bee58fd70/lib/net/http/response.rb#L19\" rel=\"nofollow noreferrer\">https://github.com/ruby/ruby/blob/fe8cc13685a847f5b4b687d9edb88f5bee58fd70/lib/net/http/response.rb#L19</a></p>\n\n<p><a href=\"https://apidock.com/ruby/Net/HTTPResponse/read_body\" rel=\"nofollow noreferrer\">https://apidock.com/ruby/Net/HTTPResponse/read_body</a></p>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571618481, "creation_date": 1571616538, "question_id": 58478331, "link": "https://stackoverflow.com/questions/58478331/meaning-of-readbody-when-when-working-with-ruby-http-responses", "title": "meaning of &#39;readbody&#39; when when working with ruby http responses", "body": "<p>What is <code>readbody</code> supposed to mean/indicate?</p>\n\n<pre><code>\"#&lt;Net::HTTPOK 200 OK readbody=true&gt; \"\n\n\"#&lt;Net::HTTPUnauthorized 401 Unauthorized readbody=true&gt;\"\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/30698704/rubys-body-permitted-method-giving-nomethoderror\">source</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 93, "user_id": 1509089, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7149dfb87c431b32c449adaf0f4da892?s=128&d=identicon&r=PG", "display_name": "Patrick A.", "link": "https://stackoverflow.com/users/1509089/patrick-a"}, "edited": false, "score": 0, "creation_date": 1571606511, "post_id": 58476999, "comment_id": 103287333, "body": "UPDATE:  Also experincing issues where my <code>def update</code> won&#39;t work with this code:  `   def update     @post = Post.find(params[:id])      respond_to do |format|       if @post.update_attributes(params[:post])         format.html { redirect_to @post, :notice =&gt; &#39;Post was successfully updated.&#39; }         format.json { head :no_content }       else         format.html { render :action =&gt; &quot;edit&quot; }         format.json { render :json =&gt; @post.errors, :status =&gt; :unprocessable_entity }       end     end   end `"}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 4, "creation_date": 1571604584, "post_id": 58477126, "comment_id": 103286897, "body": "<code>constraints: { id: &#47;\\d+&#47; }</code> on the <code>get &#39;&#47;:id&#39;</code> is another option if the IDs are numeric and the static pages aren&#39;t."}, {"owner": {"reputation": 93, "user_id": 1509089, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7149dfb87c431b32c449adaf0f4da892?s=128&d=identicon&r=PG", "display_name": "Patrick A.", "link": "https://stackoverflow.com/users/1509089/patrick-a"}, "edited": false, "score": 0, "creation_date": 1571606393, "post_id": 58477126, "comment_id": 103287300, "body": "Hey guys, using this code, I also have a problem where my edit functionality isn&#39;t updating the content. Any help there?"}, {"owner": {"reputation": 93, "user_id": 1509089, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7149dfb87c431b32c449adaf0f4da892?s=128&d=identicon&r=PG", "display_name": "Patrick A.", "link": "https://stackoverflow.com/users/1509089/patrick-a"}, "edited": false, "score": 0, "creation_date": 1571606606, "post_id": 58477126, "comment_id": 103287359, "body": "I&#39;ve updated this post to include my code if you can help me out!"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 1, "creation_date": 1571607676, "post_id": 58477126, "comment_id": 103287588, "body": "seems like update is not present in your routing : <code>resources :posts, only: [:index, :create, :edit, :new, :destroy]</code>"}], "tags": [], "owner": {"reputation": 86, "user_id": 11556213, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YTvLwfDcW7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdtZfstr1I4eZ-zQSaUZCu5sdAFhA/mo/photo.jpg?sz=128", "display_name": "Chris Selmer", "link": "https://stackoverflow.com/users/11556213/chris-selmer"}, "is_accepted": true, "score": 7, "last_activity_date": 1571604033, "creation_date": 1571604033, "answer_id": 58477126, "question_id": 58476999, "link": "https://stackoverflow.com/questions/58476999/rails-routing-clash-when-rendering-static-pages/58477126#58477126", "title": "Rails Routing Clash When Rendering Static Pages", "body": "<p>Rails matches routes from top to bottom order, so the higher to the top, the higher priority. See <a href=\"https://guides.rubyonrails.org/routing.html\" rel=\"noreferrer\">Rails Routing from the Outside In</a>. If you move these routes</p>\n\n<pre><code>  match '/privacy' =&gt; 'static#privacy'\n  match '/terms' =&gt; 'static#terms'\n</code></pre>\n\n<p>above these routes, then the static routes will have priority over the blog posts and should render correctly.</p>\n\n<pre><code>  resources :posts, only: [:index, :create, :edit, :new, :destroy]\n  get '/:id' =&gt; 'posts#show', :as =&gt; 'custom_url'\n  match '/posts/:id' =&gt; redirect('/%{id}', status: 301)\n</code></pre>\n\n<p>Note, this means if you have any blog post ids that clash with static page routes, the static pages will match and be displayed.</p>\n"}, {"tags": [], "owner": {"reputation": 1659, "user_id": 5090346, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/HXbu3.png?s=128&g=1", "display_name": "Brainmaniac", "link": "https://stackoverflow.com/users/5090346/brainmaniac"}, "is_accepted": false, "score": 0, "last_activity_date": 1571608394, "creation_date": 1571608394, "answer_id": 58477643, "question_id": 58476999, "link": "https://stackoverflow.com/questions/58476999/rails-routing-clash-when-rendering-static-pages/58477643#58477643", "title": "Rails Routing Clash When Rendering Static Pages", "body": "<p>To avoid the scenario you are describing you should NOT match out and by-pass  <code>/posts/</code> with the redirect. That breaks rails pattern of hierarchy and order and will potentially make your code messier than it need to. @Chris Selemers answer is correct but as he points out there are potential (if very limited) risks with that approach.</p>\n\n<pre><code>get '/posts/:id' =&gt; 'posts#show', :as =&gt; 'custom_url'\n</code></pre>\n\n<p>Or better yet simply do:</p>\n\n<pre><code>resources :posts\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 1509089, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7149dfb87c431b32c449adaf0f4da892?s=128&d=identicon&r=PG", "display_name": "Patrick A.", "link": "https://stackoverflow.com/users/1509089/patrick-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58477126, "answer_count": 2, "score": 3, "last_activity_date": 1571608394, "creation_date": 1571603095, "last_edit_date": 1571606577, "question_id": 58476999, "link": "https://stackoverflow.com/questions/58476999/rails-routing-clash-when-rendering-static-pages", "title": "Rails Routing Clash When Rendering Static Pages", "body": "<p>I have a routing clash. After moving all of my blog posts from <code>/posts/:id</code> to <code>/:id</code> (which is great), I now have an issue where my static pages don't contain an ID, so they aren't rendering. I don't want to have to process them through my posts controller.</p>\n\n<p>Here's what I currently have in my routes.rb file:</p>\n\n<pre><code>  resources :posts, only: [:index, :create, :edit, :new, :destroy]\n  get '/:id' =&gt; 'posts#show', :as =&gt; 'custom_url'\n  match '/posts/:id' =&gt; redirect('/%{id}', status: 301)\n</code></pre>\n\n<p>But then these now don't work...</p>\n\n<pre><code>  match '/privacy' =&gt; 'static#privacy'\n  match '/terms' =&gt; 'static#terms'\n</code></pre>\n\n<p>I have a controller called static_controller.rb which I can use if I need to. How can I jump over the <code>/:id</code> match.</p>\n\n<p><strong><em>UPDATE:</em></strong></p>\n\n<p>Also experiencing issues where my def update isn't updating my content.</p>\n\n<pre><code>  def update\n    @post = Post.find(params[:id])\n\n    respond_to do |format|\n      if @post.update_attributes(params[:post])\n        format.html { redirect_to @post, :notice =&gt; 'Post was successfully updated.' }\n        format.json { head :no_content }\n      else\n        format.html { render :action =&gt; \"edit\" }\n        format.json { render :json =&gt; @post.errors, :status =&gt; :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "brakeman"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1571601167, "post_id": 58475685, "comment_id": 103286102, "body": "I would worry more about <code>unless (rem_cust = RemCust.find_by_acc_id(curr_acc.id))</code>. That means the next line should only run  if the return value is falsy. That means its a guaranteed NoMethod error since only nil and false are falsy. Assignment in conditions is also super icky."}, {"owner": {"reputation": 1487, "user_id": 3575018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/iHBDs.jpg?s=128&g=1", "display_name": "thebenman", "link": "https://stackoverflow.com/users/3575018/thebenman"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1571616937, "post_id": 58475685, "comment_id": 103289093, "body": "that wasn&#39;t the full code I have added the relevant sections"}], "owner": {"reputation": 1487, "user_id": 3575018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/iHBDs.jpg?s=128&g=1", "display_name": "thebenman", "link": "https://stackoverflow.com/users/3575018/thebenman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571615477, "creation_date": 1571593978, "last_edit_date": 1571615477, "question_id": 58475685, "link": "https://stackoverflow.com/questions/58475685/brakeman-is-throwing-unescaped-model-attribute", "title": "brakeman is throwing Unescaped model attribute", "body": "<p>I have a code in a erb file like this</p>\n\n<pre><code>&lt;% unless (rem_cust = RemCust.find_by_acc_id(curr_acc.id)) %&gt;\n&lt;% else %&gt;\n&lt;p&gt;&lt;%= t(\"translate\", :del =&gt; formated_date(2.days.since(rem_cust.created_at), {:format =&gt; :short_day_with_week, :include_year =&gt; true})).html_safe %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>When I run brakeman I get a warning like \"Unescaped model attribute\" and the type is \"Cross-Site Scripting\".</p>\n\n<p>I tried to add <code>ERB::Util.html_escape(rem_cust.created_at)</code> but that didn't make the warning go away. I believe it must have something to do with the earlier line. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-6"], "answers": [{"tags": [], "owner": {"reputation": 2258, "user_id": 5750078, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/d1UkN.jpg?s=128&g=1", "display_name": "Loaderon", "link": "https://stackoverflow.com/users/5750078/loaderon"}, "is_accepted": false, "score": 0, "last_activity_date": 1589716208, "creation_date": 1589716208, "answer_id": 61851307, "question_id": 58474991, "link": "https://stackoverflow.com/questions/58474991/application-responder-loaderror-rails-6/61851307#61851307", "title": "application_responder (LoadError) Rails 6", "body": "<p>Responders is a ruby gem that provides \"A set of responders modules to dry up your Rails app\". You have to follow it's installation guide: <a href=\"https://github.com/heartcombo/responders\" rel=\"nofollow noreferrer\">https://github.com/heartcombo/responders</a>. Particularly, I think you are missing to run following command after bundle install:</p>\n\n<pre><code>rails g responders:install\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6829602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ae079692c821ee8ada7b3b3d043a02a?s=128&d=identicon&r=PG&f=1", "display_name": "Dhara Thacker", "link": "https://stackoverflow.com/users/6829602/dhara-thacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1589716208, "creation_date": 1571589010, "question_id": 58474991, "link": "https://stackoverflow.com/questions/58474991/application-responder-loaderror-rails-6", "title": "application_responder (LoadError) Rails 6", "body": "<p>Getting <code>cannot load such file -- application_responder (LoadError)</code> with rails 6. I have commented this line in boot.rb <code>require 'bootsnap/setup'</code>.  Have also added this line in application.rb <code>config.autoload = :classic</code>. Still, no luck. </p>\n\n<p>Any help ??</p>\n"}, {"tags": ["ruby", "standards", "conventions"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1571588776, "post_id": 58474307, "comment_id": 103282954, "body": "i don&#39;t think the second or third are valid Ruby, unless there&#39;s some feature I don&#39;t&#39; know about."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1571602427, "post_id": 58474307, "comment_id": 103286424, "body": "Parentheses should be used when they are necessary, when you&#39;re not certain they can be omitted and when, even though you know they&#39;re not needed, you want to improve readability. The only downside to using unneeded parentheses is that a fellow Rubyist with a particular personality trait may raise an eyebrow when examining your code."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1571693482, "post_id": 58474307, "comment_id": 103318568, "body": "I recommend using parenthesis always because then it&#39;s obvious what your intention is, and the language can&#39;t trip up making a bad guess."}], "answers": [{"tags": [], "owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "is_accepted": false, "score": 1, "last_activity_date": 1571602781, "last_edit_date": 1571602781, "creation_date": 1571584584, "answer_id": 58474374, "question_id": 58474307, "link": "https://stackoverflow.com/questions/58474307/ruby-when-i-should-use-parenthesis-or-not-when-calling-a-function-method/58474374#58474374", "title": "Ruby - when I should use parenthesis or not when calling a function/method", "body": "<p>In Ruby it is usually optional.</p>\n\n<p>Ruby tends towards minimalism so they are often avoided.</p>\n\n<p>Sometimes they are required such as in rspec expect where</p>\n\n<pre><code>expect a.to be true\n</code></pre>\n\n<p>has to be</p>\n\n<pre><code>expect(a).to be true\n</code></pre>\n\n<p>Using no parens or empty parens when calling a method that has a parameter results in <code>ArgumentError</code> unless you a default for the param, i.e.</p>\n\n<pre><code>def a(x=1)\n</code></pre>\n\n<p>The other consideration is when you want to call a method on the result of something, when you'll need want that method to clearly be on the final result, i.e.</p>\n\n<pre><code>\"br\" + \"own\".upcase \n\nbrOWN\n</code></pre>\n\n<p>However</p>\n\n<pre><code>(\"br\" + \"own\").upcase\n\nBROWN\n</code></pre>\n\n<p>Finally, as I'm talking about clarity, sometimes it may be better to have them, even when not strictly needed.  This is generally in compound expressions, rather than relying on operator precedence, etc.  Or if you want an expression that specifically does not get executed by standard operator precedence and you want your own grouping and order of operations, for example:</p>\n\n<pre><code>irb(main):007:0&gt; 5 + 6 * 2\n=&gt; 17\nirb(main):008:0&gt; (5 + 6) * 2\n=&gt; 22\n</code></pre>\n\n<p>As Nick indicated, the one complication is <code>super</code> where <code>super</code> or <code>super()</code> pass on parms but <code>super(a,b)</code> calls <code>super</code> with... <code>a</code>,<code>b</code> as params</p>\n"}, {"comments": [{"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 1, "creation_date": 1571592138, "post_id": 58474397, "comment_id": 103283916, "body": "While your rule is overall a good one (when in doubt, use parentheses), I&#39;ll remind you that a common exception to it is that parentheses are typically omitted for the <code>puts</code> and <code>print</code> method calls."}], "tags": [], "owner": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "is_accepted": false, "score": 0, "last_activity_date": 1571585221, "last_edit_date": 1571585221, "creation_date": 1571584767, "answer_id": 58474397, "question_id": 58474307, "link": "https://stackoverflow.com/questions/58474307/ruby-when-i-should-use-parenthesis-or-not-when-calling-a-function-method/58474397#58474397", "title": "Ruby - when I should use parenthesis or not when calling a function/method", "body": "<p><a href=\"https://rubystyle.guide/#method-invocation-parens\" rel=\"nofollow noreferrer\">Yes there is</a></p>\n\n<p>I suppose you are looking for community guidelines since there is not style guides from Ruby core team.</p>\n\n<p>Well, whenever you call a method you should use parenthesis, otherwise it becomes unclear</p>\n\n<pre><code># bad\nx = Math.sin y\n# good\nx = Math.sin(y)\n\n# bad\narray.delete e\n# good\narray.delete(e)\n\n# bad\ntemperance = Person.new 'Temperance', 30\n# good\ntemperance = Person.new('Temperance', 30)\n</code></pre>\n\n<p>However it is recommended to skip them when there is no arguments.</p>\n\n<p>Be careful with <code>super</code> and <code>super()</code> they are different!</p>\n\n<p>The only exception to my mind is some kind of custom DSL, there must be some rules or preferences for DSL itself e.g.</p>\n\n<pre><code>validates :name, presence: true\n</code></pre>\n\n<p>It is also true for methods with keyword arguments:</p>\n\n<pre><code>attr_reader :name, :age\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "is_accepted": true, "score": 1, "last_activity_date": 1571593385, "last_edit_date": 1571593385, "creation_date": 1571591936, "answer_id": 58475406, "question_id": 58474307, "link": "https://stackoverflow.com/questions/58474307/ruby-when-i-should-use-parenthesis-or-not-when-calling-a-function-method/58475406#58475406", "title": "Ruby - when I should use parenthesis or not when calling a function/method", "body": "<p>There isn't an official standard for Ruby code best practices. However, a set of preferred styles has evolved in the Ruby community. It's a good idea to follow those preferred styles, just because it makes your code more easily readable by other Ruby programmers.</p>\n\n<p>Nick Roz has given you a link to the style guide. I would also recommend that you consider installing and using <a href=\"https://rubocop.readthedocs.io/en/latest/installation/\" rel=\"nofollow noreferrer\">rubocop</a>. It will give you feedback on when and when not to parenthesize arguments, many other formatting matters such as proper indenting, and which of the often several different syntax options to choose in a particular situation.</p>\n\n<p>To answer your specific question about whether or not to use parentheses for method arguments, the answer is yes, in general. Exceptions are, as the guide says, \"methods that have 'keyword' status in Ruby.\" An example is <code>puts</code> (actually the <code>Kernel.puts</code> method). Most people don't use parentheses here, but the guide states that they are optional. </p>\n\n<p>Another example, as Nick has said (although \"methods with keyword arguments\" isn't quite correct; in that case the arguments are symbols that represent methods rather than keywords), is <code>attr_accessor</code>, which is actually <code>Module.attr_accessor</code>.</p>\n\n<p>So, as a general rule, if it looks like a \"command\" (a \"keyword,\" if you will), but is actually a method, omit the parentheses. Otherwise, use them. And if you're not sure of the difference, get in the habit of using rubocop.</p>\n"}, {"tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 0, "last_activity_date": 1571620768, "creation_date": 1571620768, "answer_id": 58478689, "question_id": 58474307, "link": "https://stackoverflow.com/questions/58474307/ruby-when-i-should-use-parenthesis-or-not-when-calling-a-function-method/58478689#58478689", "title": "Ruby - when I should use parenthesis or not when calling a function/method", "body": "<p>According to <a href=\"https://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/methods.html\" rel=\"nofollow noreferrer\">Matz</a>:</p>\n\n<blockquote>\n  <p>If arguments are given to a method, they are generally surrounded by\n  parentheses,</p>\n\n<pre><code>object.method(arg1, arg2)\n</code></pre>\n  \n  <p>but they can be omitted if doing so does not cause ambiguity.</p>\n\n<pre><code>object.method arg1, arg2\n</code></pre>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12212177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "accepted_answer_id": 58475406, "answer_count": 4, "score": 0, "last_activity_date": 1571620768, "creation_date": 1571584027, "last_edit_date": 1571584672, "question_id": 58474307, "link": "https://stackoverflow.com/questions/58474307/ruby-when-i-should-use-parenthesis-or-not-when-calling-a-function-method", "title": "Ruby - when I should use parenthesis or not when calling a function/method", "body": "<p>Is there a clear standard or guide to use or not use parenthesis when calling a function/method?</p>\n\n<p>For example, the following code:</p>\n\n<pre><code>class List &lt; Jets::Stack\n  sqs_queue(:dead_letter)\nend\n</code></pre>\n\n<p>Should I or shouldn't I use parenthesis? Other example:</p>\n\n<pre><code>class ExampleJob &lt; ApplicationJob\n  def sqs_event ref(:dead_letter)\n  end\nend\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>class ExampleJob &lt; ApplicationJob\n  def sqs_event ref :dead_letter\n  end\nend\n</code></pre>\n\n<p>Is there a official guideline I can follow?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1571584017, "post_id": 58474151, "comment_id": 103281742, "body": "You&#39;re assuming that Ruby generates static versions of each of the module functions - this is not the case."}, {"owner": {"reputation": 129, "user_id": 4092209, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-wO-Ict-PhDw/AAAAAAAAAAI/AAAAAAAAAxE/v1lbYcZ86wM/photo.jpg?sz=128", "display_name": "Alexis", "link": "https://stackoverflow.com/users/4092209/alexis"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1571585025, "post_id": 58474151, "comment_id": 103281978, "body": "@maxpleaner thanks for your answer but i&#39;m sure to get exactly what you mean"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1571599639, "post_id": 58474151, "comment_id": 103285768, "body": "The use of the term &quot;helper&quot; here is inappropriate. In Rails helpers are modules that are used in the controller and view layer but almost never in the model layer. A module used to DRY models is called a <code>concern</code> and is usually named after what features it actually brings to the table like for example <code>Commentable</code>."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1571598663, "post_id": 58474466, "comment_id": 103285508, "body": "The term &quot;static methods&quot; is not really a good fit for Ruby. Ruby has class and module methods and the only real difference between them and &quot;regular&quot; instance methods is that they are attached to a instance of the Class or Module class. It does not have a <code>static</code> keyword like Java or PHP."}], "tags": [], "owner": {"reputation": 573, "user_id": 1390780, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/aENWq.jpg?s=128&g=1", "display_name": "Kote", "link": "https://stackoverflow.com/users/1390780/kote"}, "is_accepted": true, "score": 1, "last_activity_date": 1571585969, "last_edit_date": 1571585969, "creation_date": 1571585247, "answer_id": 58474466, "question_id": 58474151, "link": "https://stackoverflow.com/questions/58474151/rspec-helpers-method-on-model-undefined-method/58474466#58474466", "title": "rspec: Helpers Method on Model undefined method", "body": "<p>You are using Mixin here. </p>\n\n<blockquote>\n  <p>A mixin can basically be thought of as a set of code that can be added\n  to one or more classes to add additional capabilities without using\n  inheritance. In Ruby, a mixin is code wrapped up in a module that a\n  class can include or extend</p>\n</blockquote>\n\n<p>You do not access helper methods like the static methods but you call them directly, in your example you should call <code>slack_notify</code> directly without having module name before.\nWhen you include two modules which have the same method name then the last one overrides the previous one.\nIf you do not want it to be overriden then you have to define in the module like that:</p>\n\n<pre><code>def BookingsHelper.slack_notify\n  // your code\nend\n</code></pre>\n\n<p>and </p>\n\n<pre><code>def PaymentsHelper.slack_notify\n  // your code\nend\n</code></pre>\n\n<p>see the example about <code>sin</code> and <code>cos</code> here: <a href=\"https://www.tutorialspoint.com/ruby/ruby_modules.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/ruby/ruby_modules.htm</a></p>\n\n<p>Read more about mixins and you will have better understanding of what is going on here.</p>\n"}], "owner": {"reputation": 129, "user_id": 4092209, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-wO-Ict-PhDw/AAAAAAAAAAI/AAAAAAAAAxE/v1lbYcZ86wM/photo.jpg?sz=128", "display_name": "Alexis", "link": "https://stackoverflow.com/users/4092209/alexis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 58474466, "answer_count": 1, "score": 0, "last_activity_date": 1571585969, "creation_date": 1571582879, "question_id": 58474151, "link": "https://stackoverflow.com/questions/58474151/rspec-helpers-method-on-model-undefined-method", "title": "rspec: Helpers Method on Model undefined method", "body": "<p>I'm getting an issue with helpers method included in my model. </p>\n\n<p>I include my helpers as follow: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Booking &lt; ApplicationRecord\n  include BookingsHelper\n  include PaymentsHelper\n</code></pre>\n\n<p>Both of <code>BookingsHelper</code> and <code>PaymentsHelper</code> have <code>slack_notify</code> function. \nSo in order to call the good <code>slack_notify</code> function I call this function as below: </p>\n\n<pre><code>BookingsHelper.slack_notify(self)\nPaymentsHelper.slack_notify(requester.email, 'danger', 'booking:proceed_payment', e.message)\n</code></pre>\n\n<p>When I run my test (with rspec) I got:</p>\n\n<pre><code>     Failure/Error: BookingsHelper.slack_notify(self)\n\n     NoMethodError:\n       undefined method `slack_notify' for BookingsHelper:Module\n</code></pre>\n\n<p>And I noticed if I change: <code>BookingsHelper.slack_notify(self)</code> by <code>slack_notify(self)</code> it works but call the <code>slack_notify</code> in <code>PaymentsHelper</code> so I don't really understand what's happening. And if I remove the <code>PaymentHelper</code> it call the good one</p>\n\n<p>If someone could highlight me on this behavior, I would be really interested to understand whats going on</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571581636, "post_id": 58473935, "comment_id": 103281066, "body": "How do you <i>dynamically generat that hash</i>?"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1571581672, "post_id": 58473935, "comment_id": 103281085, "body": "If <code>null</code> is undefined, then clearly you do <i>not</i> have that hash. You might have a block of JSON looking like that. Is that it?"}, {"owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "edited": false, "score": 0, "creation_date": 1571581680, "post_id": 58473935, "comment_id": 103281090, "body": "I get it from the api response"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571581819, "post_id": 58473935, "comment_id": 103281134, "body": "But it can&#39;t be just <code>null</code>, because it would be an undefined local variable, or does it?. What&#39;s the code previous to that?"}, {"owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571582020, "post_id": 58473935, "comment_id": 103281192, "body": "@SebastianPalma I updated one of my api response data in the question"}, {"owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "edited": false, "score": 0, "creation_date": 1571582113, "post_id": 58473935, "comment_id": 103281219, "body": "There are multi-fields with <code>null </code>as a value; when I assign this data to a variable, I get an exception"}, {"owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571582326, "post_id": 58473935, "comment_id": 103281279, "body": "@SebastianPalma it considers the null as a variable; you can try here <a href=\"https://repl.it/repls/CrowdedRichSoftwareengineer\" rel=\"nofollow noreferrer\">repl.it/repls/CrowdedRichSoftwareengineer</a>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571582784, "post_id": 58473935, "comment_id": 103281414, "body": "What are you using to parse the response?"}, {"owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "edited": false, "score": 0, "creation_date": 1571582876, "post_id": 58473935, "comment_id": 103281442, "body": "It fails before parsing; if you check the above repl link, it explains my issue"}, {"owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1571583403, "post_id": 58473935, "comment_id": 103281584, "body": "@SebastianPalma if I do JSON.parse(...), the null value is converted into nil; but, I have to read the Hash even before parsing it. In this case, it throws exception"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1571583866, "post_id": 58473935, "comment_id": 103281702, "body": "@PrashanthSams not all Json hashes are valid Ruby hashes. This one is not valid Ruby, because of <code>null</code>. So you <i>need</i> to Json parse it."}, {"owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1571584179, "post_id": 58473935, "comment_id": 103281782, "body": "@maxpleaner I am actually passing the non-parsed Json as a parameter; so, it fails in the call itself. like custom_json(non_json_parsed_hash, param2)"}, {"owner": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "edited": false, "score": 0, "creation_date": 1571585461, "post_id": 58473935, "comment_id": 103282090, "body": "Have a look at <a href=\"https://stackoverflow.com/questions/3552328/nil-to-json-cannot-be-parsed-back-to-nil\" title=\"nil to json cannot be parsed back to nil\">stackoverflow.com/questions/3552328/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "is_accepted": true, "score": 4, "last_activity_date": 1571585982, "creation_date": 1571585982, "answer_id": 58474580, "question_id": 58473935, "link": "https://stackoverflow.com/questions/58473935/how-to-read-a-hash-with-null-as-a-value-in-ruby/58474580#58474580", "title": "How to read a Hash with null as a value in Ruby?", "body": "<p>Don't try to copy and paste this JSON directly in Ruby if you do something like that. JSON is a string, so wrap it using <code>%{}</code> so as to avoid double quotes escaping:</p>\n\n<pre><code>[4] pry(main)&gt; s = %{ # press enter\n[4] pry(main)* {\n[4] pry(main)*    \"data\":{\n[4] pry(main)*       \"type\":\"user\",\n... # all the contents goes here\n... # press enter\n[4] pry(main)* } # this is the closing bracket\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>require 'json' # if needed\n[11] pry(main)&gt; JSON.parse s\n=&gt; {\"data\"=&gt;\n  {\"type\"=&gt;\"user\",\n   \"id\"=&gt;\"33896\",\n   \"attributes\"=&gt;\n    {\"name\"=&gt;\"James Guy\",\n     \"br\"=&gt;\"Test Account\",\n     \"phone\"=&gt;\"97...0716\",\n     \"secondary_phone\"=&gt;\"\",\n     \"is_active\"=&gt;true,\n     \"preferredLanguage\"=&gt;\"en\",\n     \"is_cli\"=&gt;true,\n     \"did_number\"=&gt;\"971...007\",\n     \"roles\"=&gt;\"Admin, Agent\",\n     \"last_connection\"=&gt;\"17/10/2019 10:23\",\n     \"position\"=&gt;\"\"},\n   \"links\"=&gt;\n    {\"photo\"=&gt;\"https://.../desktop\",\n     \"edit\"=&gt;\"https://.../users/33896/edit/\",\n     \"toggle_active\"=&gt;\"https://.../users/33896/toggle_active\",\n     \"link_a\"=&gt;nil,\n     \"a_mobile\"=&gt;nil,\n     \"a_landLine\"=&gt;nil,\n     \"una\"=&gt;nil}}}\n</code></pre>\n\n<p>There is no such keyword as <code>null</code> in Ruby. Every <code>null</code> becomes <code>nil</code></p>\n"}], "owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 1, "accepted_answer_id": 58474580, "answer_count": 1, "score": -1, "last_activity_date": 1571585982, "creation_date": 1571581302, "last_edit_date": 1571581995, "question_id": 58473935, "link": "https://stackoverflow.com/questions/58473935/how-to-read-a-hash-with-null-as-a-value-in-ruby", "title": "How to read a Hash with null as a value in Ruby?", "body": "<p>Here is what I have: (dynamically generated Hash)</p>\n\n<pre><code>actual = { \"posts\": [ { \"id\": 3, \"title\": \"Post 3\" } ], \"profile\": { \"name\": \"\" }, \"nulldata\": { \"res\": null } }\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>undefined local variable or method `null' for main:Object\n</code></pre>\n\n<p>What I need:</p>\n\n<ul>\n<li>To somehow read the above hash (first option)</li>\n<li>or to replace the value, <code>null</code> which will be appearing in multi key-pair locations (second option)</li>\n</ul>\n\n<p>sample api response with null value</p>\n\n<pre><code>{\n   \"data\":{\n      \"type\":\"user\",\n      \"id\":\"33896\",\n      \"attributes\":{\n         \"name\":\"James Guy\",\n         \"br\":\"Test Account\",\n         \"phone\":\"97...0716\",\n         \"secondary_phone\":\"\",\n         \"is_active\":true,\n         \"preferredLanguage\":\"en\",\n         \"is_cli\":true,\n         \"did_number\":\"971...007\",\n         \"roles\":\"Admin, Agent\",\n         \"last_connection\":\"17/10/2019 10:23\",\n         \"position\":\"\"\n      },\n      \"links\":{\n         \"photo\":\"https://.../desktop\",\n         \"edit\":\"https://.../users/33896/edit/\",\n         \"toggle_active\":\"https://.../users/33896/toggle_active\",\n         \"link_a\":null,\n         \"a_mobile\":null,\n         \"a_landLine\":null,\n         \"una\":null\n      }\n   }\n}\n</code></pre>\n"}, {"tags": ["ruby", "repr"], "answers": [{"comments": [{"owner": {"reputation": 1533, "user_id": 1800838, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JJEuD.jpg?s=128&g=1", "display_name": "HippoMan", "link": "https://stackoverflow.com/users/1800838/hippoman"}, "edited": false, "score": 0, "creation_date": 1571585401, "post_id": 58473996, "comment_id": 103282075, "body": "<code>pry</code> looks quite useful. It offers a lot more than what I am asking for here, but that&#39;s fine. :)"}], "tags": [], "owner": {"reputation": 184, "user_id": 351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5409cd6ece6474f12ab1cfb0cc0770?s=128&d=identicon&r=PG", "display_name": "jeremy04", "link": "https://stackoverflow.com/users/351007/jeremy04"}, "is_accepted": false, "score": 1, "last_activity_date": 1571581742, "creation_date": 1571581742, "answer_id": 58473996, "question_id": 58473520, "link": "https://stackoverflow.com/questions/58473520/ruby-equivalent-of-pythons-repr/58473996#58473996", "title": "Ruby equivalent of Python&#39;s `repr()`?", "body": "<p><code>inspect</code> is the closest equivalent to <code>repr</code> in Ruby, but it does not show public methods.</p>\n\n<p>If you're looking for a tool instead: <code>pry</code> \n<a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">https://github.com/pry/pry</a></p>\n\n<p>The <code>ls</code> command does exactly what you want.\nYou can also integrate pry into your irb / rails console as well.</p>\n\n<p>Alternatively, you could monkey patch <code>class Object</code> with your method, but I feel like that's way too extreme of a choice, quite a few drawbacks.</p>\n"}, {"comments": [{"owner": {"reputation": 1533, "user_id": 1800838, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JJEuD.jpg?s=128&g=1", "display_name": "HippoMan", "link": "https://stackoverflow.com/users/1800838/hippoman"}, "edited": false, "score": 0, "creation_date": 1571584927, "post_id": 58474140, "comment_id": 103281964, "body": "Thank you, but <code>inspect</code> doesn&#39;t show the names of the methods."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 1533, "user_id": 1800838, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JJEuD.jpg?s=128&g=1", "display_name": "HippoMan", "link": "https://stackoverflow.com/users/1800838/hippoman"}, "edited": false, "score": 0, "creation_date": 1571585000, "post_id": 58474140, "comment_id": 103281976, "body": "Yes, like I said, there is no equivalent in Ruby."}, {"owner": {"reputation": 1533, "user_id": 1800838, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JJEuD.jpg?s=128&g=1", "display_name": "HippoMan", "link": "https://stackoverflow.com/users/1800838/hippoman"}, "edited": false, "score": 0, "creation_date": 1571585327, "post_id": 58474140, "comment_id": 103282058, "body": "I know, and no criticism was intended for what you shared. I&#39;m just clarifying, in light of what you explained, why <code>inspect</code> isn&#39;t enough for me."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1571582771, "creation_date": 1571582771, "answer_id": 58474140, "question_id": 58473520, "link": "https://stackoverflow.com/questions/58473520/ruby-equivalent-of-pythons-repr/58474140#58474140", "title": "Ruby equivalent of Python&#39;s `repr()`?", "body": "<p>There is no equivalent of Python's <code>__repr__</code> in Ruby. At first glance, the closest thing may <em>appear</em> to be <code>#inspect</code>, because of these similarities:</p>\n\n<blockquote>\n  <p><a href=\"https://docs.python.org/3/reference/datamodel.html?highlight=__repr__#object.__repr__\" rel=\"nofollow noreferrer\">This is typically used for debugging, [\u2026]</a></p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p><a href=\"https://ruby-doc.org/core/Object.html#method-i-inspect\" rel=\"nofollow noreferrer\">Returns a string containing a human-readable representation of <em>obj</em>.</a></p>\n</blockquote>\n\n<p>But, there's an important difference:</p>\n\n<blockquote>\n  <p>If at all possible, this should look like a valid Python expression that could be used to recreate an object with the same value (given an appropriate environment).</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p><a href=\"https://docs.python.org/3/library/functions.html#repr\" rel=\"nofollow noreferrer\">For many types, this function makes an attempt to return a string that would yield an object with the same value when passed to <code>eval()</code></a></p>\n</blockquote>\n\n<p>Ruby's <code>#inspect</code> focuses on being <em>human-readable</em>, whereas Python's <code>__repr__</code> tries to be \"<code>eval()</code>-round-trippable\" (i.e. <code>eval(repr(e)) == e</code>), in other words, it should be <em>machine-readable</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 1533, "user_id": 1800838, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JJEuD.jpg?s=128&g=1", "display_name": "HippoMan", "link": "https://stackoverflow.com/users/1800838/hippoman"}, "is_accepted": true, "score": 3, "last_activity_date": 1572325498, "last_edit_date": 1572325498, "creation_date": 1571586140, "answer_id": 58474603, "question_id": 58473520, "link": "https://stackoverflow.com/questions/58473520/ruby-equivalent-of-pythons-repr/58474603#58474603", "title": "Ruby equivalent of Python&#39;s `repr()`?", "body": "<p>Based on the helpful comments from <code>jeremy04</code> and <code>J\u00f6rg W Mittag</code>, I realize that there is nothing in Ruby which corresponds to <code>repr</code>, and that I can't make use of a simple <code>repr</code>-like method in all class instances without monkey-patching <code>class Object</code> itself. However, I realize that if I just make <code>repr</code> a standalone function, I can get the same functionality without monkey-patching and by doing <code>repr(obj)</code> instead of <code>obj.repr</code> whenever I want this info for a given object. The following stand-alone function works ...</p>\n\n<pre><code>def repr(obj)\n  attrhash = {}\n  obj.instance_variables.sort.each {\n    |v|\n    attrhash[v] = instance_variable_get(v)\n  }\n  {\n    :string     =&gt; obj.inspect,\n    :methods    =&gt; obj.class.instance_methods.sort,\n    :attributes =&gt; attrhash\n  }\nend\n</code></pre>\n\n<p>I have this function return a hash instead of a string so that I can do things like this:</p>\n\n<p><code>repr(obj)[:attributes]</code>.</p>\n\n<p>I can always do <code>repr(obj).to_s</code> if I want a string.</p>\n\n<p>Also, I could make this into a class. I'll leave that as an exercise for the reader. :)</p>\n"}], "owner": {"reputation": 1533, "user_id": 1800838, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JJEuD.jpg?s=128&g=1", "display_name": "HippoMan", "link": "https://stackoverflow.com/users/1800838/hippoman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 58474603, "answer_count": 3, "score": 0, "last_activity_date": 1572325498, "creation_date": 1571578343, "question_id": 58473520, "link": "https://stackoverflow.com/questions/58473520/ruby-equivalent-of-pythons-repr", "title": "Ruby equivalent of Python&#39;s `repr()`?", "body": "<p>Is there a Ruby equivalent of Python's <code>repr</code> method? I want to get a string representation of any given ruby object which lists all the attributes, their values, and all the methods.</p>\n\n<p>I defined the following method, but I'm wondering if there is a more canonical way of doing this ...</p>\n\n<pre><code>def repr\n  attrhash = {}\n  instance_variables.sort.each {\n    |v|\n    attrhash[v] = instance_variable_get(v)\n  }\n  [ self, self.class.instance_methods.sort, attrhash ].to_s\nend\n</code></pre>\n\n<p>Ideally, I'd like to not have to include this method into each and every class for which I want its <code>repr</code>-like data, and I'm wondering if there is a standard ruby mechanism to get this info for any given object.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activemodel"], "comments": [{"owner": {"reputation": 1023, "user_id": 3552298, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8540fb02a16712af1b873b8bd8b6b318?s=128&d=identicon&r=PG&f=1", "display_name": "sureshprasanna70", "link": "https://stackoverflow.com/users/3552298/sureshprasanna70"}, "edited": false, "score": 0, "creation_date": 1571578865, "post_id": 58473502, "comment_id": 103280312, "body": "Show us your rails logs while inserting a new car. The logs can be found at <code>log&#47;development.log</code>."}, {"owner": {"reputation": 97, "user_id": 5537357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ee3ca95cdd0adf63bf19a96cdaa59fe?s=128&d=identicon&r=PG&f=1", "display_name": "mizenetofa1989", "link": "https://stackoverflow.com/users/5537357/mizenetofa1989"}, "reply_to_user": {"reputation": 1023, "user_id": 3552298, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8540fb02a16712af1b873b8bd8b6b318?s=128&d=identicon&r=PG&f=1", "display_name": "sureshprasanna70", "link": "https://stackoverflow.com/users/3552298/sureshprasanna70"}, "edited": false, "score": 0, "creation_date": 1571579308, "post_id": 58473502, "comment_id": 103280441, "body": "@sureshprasanna70 is this the relevant part?  Started POST &quot;/cars&quot; for ::1 at 2019-10-20 16:46:15 +0300 Processing by CarsController#create as HTML   Parameters: {&quot;authenticity_token&quot;=&gt;&quot;MZYIt+YOELCPSFbZZmammwr7LrdMWQfzlge3&zwnj;&#8203;k/h8UftwBjqgzHHH9VqH&zwnj;&#8203;BFHAiwXi2Ej2Y4jM2xhC&zwnj;&#8203;/V7sil773Q==&quot;, &quot;car&quot;=&gt;{&quot;title&quot;=&gt;&quot;car3&quot;, &quot;description&quot;=&gt;&quot;123123&quot;, &quot;img&quot;=&gt;&quot;123&quot;}, &quot;commit&quot;=&gt;&quot;Save Car&quot;} Redirected to <a href=\"http://localhost:3000/cars\" rel=\"nofollow noreferrer\">localhost:3000/cars</a> Completed 302 Found in 5ms (ActiveRecord: 0.0ms | Allocations: 1322"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5537357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ee3ca95cdd0adf63bf19a96cdaa59fe?s=128&d=identicon&r=PG&f=1", "display_name": "mizenetofa1989", "link": "https://stackoverflow.com/users/5537357/mizenetofa1989"}, "edited": false, "score": 0, "creation_date": 1571837918, "post_id": 58473984, "comment_id": 103373301, "body": "Works like a charm. Thanks! Just two last questions: 1) Why current_user.cars.new(car_params) and not: current_user.Car.new(car_params)? Why no capital Car was needed, like in Car.find? 2) why cars? as I understand, cars is a refrens to the table, and not the car model itself."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 97, "user_id": 5537357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ee3ca95cdd0adf63bf19a96cdaa59fe?s=128&d=identicon&r=PG&f=1", "display_name": "mizenetofa1989", "link": "https://stackoverflow.com/users/5537357/mizenetofa1989"}, "edited": false, "score": 1, "creation_date": 1571846178, "post_id": 58473984, "comment_id": 103377956, "body": "See updated answer with responses to your questions."}, {"owner": {"reputation": 97, "user_id": 5537357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ee3ca95cdd0adf63bf19a96cdaa59fe?s=128&d=identicon&r=PG&f=1", "display_name": "mizenetofa1989", "link": "https://stackoverflow.com/users/5537357/mizenetofa1989"}, "edited": false, "score": 0, "creation_date": 1571846565, "post_id": 58473984, "comment_id": 103378159, "body": "Thanks again. You are a life saver"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 0, "last_activity_date": 1571846166, "last_edit_date": 1571846166, "creation_date": 1571581643, "answer_id": 58473984, "question_id": 58473502, "link": "https://stackoverflow.com/questions/58473502/rails-is-not-inserting-recoreds-into-database/58473984#58473984", "title": "Rails is not inserting recoreds into database", "body": "<p>Looks like you're on rails 6. So, by default, when a <code>Car belongs_to :user</code>, then <code>user_id</code> on <code>@car</code> is required. But, in your <code>create</code> action, you're never setting <code>user_id</code> on <code>@car</code>, so <code>@car</code> is not saving. </p>\n\n<p>If you think a save is supposed to be working and it's not, you can always do <code>save!</code> instead of <code>save</code>. The banged version of the method will raise an error if the save is unsuccessful.</p>\n\n<p>Anyway, I think the <code>create</code> action in your <code>CarsController</code> ought to look something more like:</p>\n\n<pre><code>class CarsController &lt; ApplicationController\n\n  def index\n    @cars = Car.all\n  end\n\n  def new\n    @car = Car.new\n  end\n\n  def show\n    @car = Car.find(params[:id])\n  end\n\n  def create\n    @car = current_user.cars.new(car_params)\n    if @car.save\n      redirect_to @car\n    else\n      # do something else\n    end\n  end\n\n  private\n\n  def car_params\n    params.require(:car).permit(:title, :description, :img)\n  end\n\nend\n</code></pre>\n\n<p>By doing <code>current_user.cars.new</code>, <code>user_id</code> is automatically set on the new <code>Car</code> and you should be able to save.</p>\n\n<p>In response to your questions in comments:</p>\n\n<blockquote>\n  <p>Why current_user.cars.new(car_params) and not: current_user.Car.new(car_params)? Why no capital Car was needed, like in Car.find?</p>\n</blockquote>\n\n<p><code>Car</code> is a class. <code>Car.new</code> calls the <code>new</code> method on the <code>Car</code> class. <code>Car.find</code> calls the <code>find</code> method on the <code>Car</code> class. <code>Car</code> is <em>not</em> a method on <code>current_user</code>. Therefore, <code>current_user.Car</code> makes no sense and should throw an error.</p>\n\n<p><code>cars</code> (when used like <code>current_user.cars</code>) is a method on the <code>current_user</code> instance of <code>User</code>. The <code>.cars</code> method is created when you do <code>User has_many :cars</code>. You can see a listing of all the methods created by <code>has_many</code> in the <a href=\"https://guides.rubyonrails.org/association_basics.html#methods-added-by-has-many\" rel=\"nofollow noreferrer\">Methods Added by has_many</a> section of the <a href=\"https://edgeguides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">Active Record Associations</a> guide. </p>\n\n<p><code>current_user.cars</code> returns an <code>ActiveRecord_Relation</code>. When you do <code>current_user.cars.new</code>, you're calling the <code>new</code> method on the <code>ActiveRecord_Relation</code> returned by <code>current_user.cars</code>. This <code>new</code> method returns an instance of <code>Car</code> that <em>already has user_id set</em>, which is the point of the whole thing. So:</p>\n\n<ol>\n<li><code>Car.new</code> returns a new <code>Car</code> <strong>without</strong> <code>user_id</code> set,</li>\n<li><code>current_user.cars.new</code> returns a new <code>Car</code> <strong>with</strong> <code>user_id</code> set.</li>\n</ol>\n\n<blockquote>\n  <p>why cars? as I understand, cars is a refrens to the table, and not the car model itself.</p>\n</blockquote>\n\n<p>No. As stated above, and in this context, <code>cars</code> is a method on <code>current_user</code> that is created when you do <code>User has_many :cars</code> and that returns a <code>ActiveRecord_Relation</code> representing all of the <code>Car</code> instances that have a <code>user_id</code> that matches <code>current_user.id</code>.</p>\n"}], "owner": {"reputation": 97, "user_id": 5537357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3ee3ca95cdd0adf63bf19a96cdaa59fe?s=128&d=identicon&r=PG&f=1", "display_name": "mizenetofa1989", "link": "https://stackoverflow.com/users/5537357/mizenetofa1989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "accepted_answer_id": 58473984, "answer_count": 1, "score": 0, "last_activity_date": 1571846166, "creation_date": 1571578237, "last_edit_date": 1571631491, "question_id": 58473502, "link": "https://stackoverflow.com/questions/58473502/rails-is-not-inserting-recoreds-into-database", "title": "Rails is not inserting recoreds into database", "body": "<p>I am new to Rails, and I'm having trouble with inserting new records into the database using my Car model.</p>\n\n<p>The application is as follow:\nI have build the articles basic tutorial application as defined in the Rails official website, until section 5.9</p>\n\n<p>I added user authentication useing devise, and I wanted to add a model -cars - that has assosiation with the user. user has_many cars, and a car belongs_to a user.\nThis is the user.rb model file:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n # Include default devise modules. Others available are:\n # :confirmable, :lockable, :timeoutable, :trackable and :omniauthable\n devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :validatable\n has_many :cars\nend\n</code></pre>\n\n<p>The cars.rb file is:</p>\n\n<pre><code>class Car &lt; ApplicationRecord\nbelongs_to :user\nend\n</code></pre>\n\n<p>The cars table is structed like so:</p>\n\n<pre><code>class CreateCars &lt; ActiveRecord::Migration[6.0]\n  def change\n    create_table :cars do |t|\n      t.string :title\n      t.text :description\n      t.string :img\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>I added user assosiation with:</p>\n\n<pre><code>class AddUserIdToCars &lt; ActiveRecord::Migration[6.0]\n  def change\n    add_column :cars, :user_id, :integer\n  end\nend\n</code></pre>\n\n<p>Now, when I use rails console I see that the cars table and user table are created, and creating users works fine.</p>\n\n<p>Alse, when I try to create a new car, I'm redirected back to my car list, and nothing is loaded, and when I check the console I see that the cars table is empty.</p>\n\n<p>the cars controller is:</p>\n\n<pre><code>class CarsController &lt; ApplicationController\n    def index\n        @cars = Car.all\n    end\n    def new\n    end\n    def show\n        @car = Car.find(params[:id])\n    end\n    def create\n        # render plain: params[:car].inspect\n        @car = Car.new(car_params)\n        @car.save\n        redirect_to @car\n    end\n    private\n    def car_params\n        params.require(:car).permit(:title, :description, :img)\n    end\nend\n</code></pre>\n\n<p>the cars/new view is:</p>\n\n<pre><code>&lt;h1&gt;Add new car&lt;/h1&gt;\n\n&lt;%= form_with scope: :car,\nurl: cars_path,\nlocal: true do |form| %&gt;\n  &lt;p&gt;\n    &lt;%= form.label :title %&gt;&lt;br&gt;\n    &lt;%= form.text_field :title %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= form.label :description %&gt;&lt;br&gt;\n    &lt;%= form.text_area :description %&gt;\n  &lt;/p&gt;\n\n    &lt;p&gt;\n    &lt;%= form.label :img %&gt;&lt;br&gt;\n    &lt;%= form.text_area :img %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n&lt;%= link_to 'Back', cars_path %&gt;\n</code></pre>\n\n<p>and the cars index view is:</p>\n\n<pre><code>&lt;h1&gt;Listing cars&lt;/h1&gt;\n\n&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Title&lt;/th&gt;\n    &lt;th&gt;description&lt;/th&gt;\n    &lt;th&gt;Img&lt;/th&gt;\n  &lt;/tr&gt;\n\n  &lt;% @cars.each do |car| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= car.title %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= car.description %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= car.img %&gt;&lt;/td&gt;\n\n      &lt;td&gt;\n      &lt;%= link_to 'Show', car_path(car) %&gt;\n      &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n\n&lt;%= link_to 'New Car', new_car_path %&gt;\n</code></pre>\n\n<p>when I post a new car or go to index page, there is no error, and the very same structure in the article section (that I created with the rails official tutorial) works fine.</p>\n\n<p>When I navigate to path/cars or when I submit a new car I see an empty table.\nWhen I try to use show, by navigating to cars/:id, there is an error that no car with this id exist - another testemony that no records are inserted.</p>\n\n<p>I'm very new to Rails, so I'm sorry if there is not enough info/I shared to much info. If more info is needed please tell me.</p>\n\n<p>I have seen most questions with similar topics, and didn't find any relavent answer there. I saw this, among others:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5332408/insert-into-rails-database\">Insert into Rails Database</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/28121885/rails-4-not-inserting-values-into-database\">Rails 4 not inserting values into database</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2525139/ruby-on-rails-not-adding-record-to-database\">Ruby on Rails not adding record to database</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/40167081/rails-5-activerecord-not-creating-record\">Rails 5: ActiveRecord not creating record</a></p>\n\n<p>This is the rails log for create cars</p>\n\n<pre><code>Started POST \"/cars\" for ::1 at 2019-10-20 16:46:15 +0300 Processing by CarsController#create as HTML Parameters: {\"authenticity_token\"=&gt;\"MZYIt+YOELCPSFbZZmammwr7LrdMWQfzlge3k/h8UftwBjqgzHHH9VqHBFHAiwXi2Ej2Y4jM2xhC/V7sil773Q==\", \"car\"=&gt;{\"title\"=&gt;\"car3\", \"description\"=&gt;\"123123\", \"img\"=&gt;\"123\"}, \"commit\"=&gt;\"Save Car\"} Redirected to localhost:3000/cars Completed 302 Found in 5ms (ActiveRecord: 0.0ms | Allocations: 1322\n</code></pre>\n\n<p>Why no car is being inserted while an article does, even tough the functions and erb files are practicaly the same?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mailer"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571675268, "post_id": 58472827, "comment_id": 103311088, "body": "Welcome to stackoverflow. I recommend reading <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>. I&#39;m guessing that if you reduce your example significantly that you&#39;ll solve this issue on your own, and if not it&#39;ll make it a lot easier for others to help you solve it. And please, always include a stack trace when you get an error."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1571675342, "post_id": 58472827, "comment_id": 103311123, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50130822/undefined-method-model-name-for-nilnilclass\">undefined method &#39;model_name&#39; for nil:NilClass</a>"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1571862511, "post_id": 58472827, "comment_id": 103384897, "body": "Looks like your <code>Positionupdate</code> is a module, not a class. In this case it can&#39;t be instantiated. Please, add code of <code>Positionupdate</code> to the question"}], "owner": {"reputation": 27, "user_id": 12246547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/862ed79dbd927b37c555a087ba609010?s=128&d=identicon&r=PG&f=1", "display_name": "skosman", "link": "https://stackoverflow.com/users/12246547/skosman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571682195, "creation_date": 1571573108, "last_edit_date": 1571682195, "question_id": 58472827, "link": "https://stackoverflow.com/questions/58472827/creating-a-simple-form-which-will-be-automatically-send-by-mailer-in-rails", "title": "creating a simple_form which will be automatically send by mailer in rails", "body": "<p>i am getting this error:</p>\n\n<p>undefined method `new' for Positionupdate:Module\nExtracted source (around line #13):</p>\n\n<pre><code> def create\n    @positionupdate = Positionupdate.new(positionupdate_params)\n    if @positionupdate.save\n      PositionupdatesMailer.general_message(@positionupdate).deliver\n    else\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "jsonserializer"], "answers": [{"tags": [], "owner": {"reputation": 641, "user_id": 5199542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc4bf213725a3737f165cd15af26331c?s=128&d=identicon&r=PG", "display_name": "Xiting", "link": "https://stackoverflow.com/users/5199542/xiting"}, "is_accepted": true, "score": 4, "last_activity_date": 1571575078, "creation_date": 1571575078, "answer_id": 58473049, "question_id": 58472642, "link": "https://stackoverflow.com/questions/58472642/resolve-n-1-in-case-of-instance-dependent-scope/58473049#58473049", "title": "Resolve N + 1 in case of instance dependent scope", "body": "<p>Many thanks to <a href=\"https://stackoverflow.com/users/10828860/igor-khodyrev\">@igor-khodyrev</a></p>\n\n<p>He advised me to use composite keys and it works!\nSo, solution:</p>\n\n<p>Add the gem to Gemfile </p>\n\n<pre><code>gem 'composite_primary_keys', '=11'\n</code></pre>\n\n<p>and change association in A model to this</p>\n\n<pre><code>  has_one :c, foreign_key: [:p_id, :feature], primary_key: [:p_id, :feature]\n\n</code></pre>\n\n<p>N + 1 Resolved: </p>\n\n<pre><code>irb(main):005:0&gt; PSerializer.new(P.includes({ as: :c }).first, { include: [:as, :'as.c'] }).serialized_json\n  P Load (0.2ms)  SELECT  \"ps\".* FROM \"ps\" ORDER BY \"ps\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n  A Load (0.1ms)  SELECT \"as\".* FROM \"as\" WHERE \"as\".\"p_id\" = ?  [[\"p_id\", 1]]\n  C Load (0.1ms)  SELECT \"cs\".* FROM \"cs\" WHERE (\"cs\".\"p_id\" = 1 AND \"cs\".\"feature\" = 'feature-0' OR \"cs\".\"p_id\" = 1 AND \"cs\".\"feature\" = 'feature-1' OR \"cs\".\"p_id\" = 1 AND \"cs\".\"feature\" = 'feature-2' OR \"cs\".\"p_id\" = 1 AND \"cs\".\"feature\" = 'feature-3' OR \"cs\".\"p_id\" = 1 AND \"cs\".\"feature\" = 'feature-kek')\n=&gt; \"{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"p\\\",\\\"relationships\\\":{\\\"as\\\":{\\\"data\\\":[{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"a\\\"},{\\\"id\\\":\\\"2\\\",\\\"type\\\":\\\"a\\\"},{\\\"id\\\":\\\"3\\\",\\\"type\\\":\\\"a\\\"},{\\\"id\\\":\\\"4\\\",\\\"type\\\":\\\"a\\\"},{\\\"id\\\":\\\"5\\\",\\\"type\\\":\\\"a\\\"}]}}},\\\"included\\\":[{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"a\\\",\\\"relationships\\\":{\\\"p\\\":{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"p\\\"}},\\\"c\\\":{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"c\\\"}}}},{\\\"id\\\":\\\"2\\\",\\\"type\\\":\\\"a\\\",\\\"relationships\\\":{\\\"p\\\":{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"p\\\"}},\\\"c\\\":{\\\"data\\\":{\\\"id\\\":\\\"2\\\",\\\"type\\\":\\\"c\\\"}}}},{\\\"id\\\":\\\"3\\\",\\\"type\\\":\\\"a\\\",\\\"relationships\\\":{\\\"p\\\":{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"p\\\"}},\\\"c\\\":{\\\"data\\\":{\\\"id\\\":\\\"3\\\",\\\"type\\\":\\\"c\\\"}}}},{\\\"id\\\":\\\"4\\\",\\\"type\\\":\\\"a\\\",\\\"relationships\\\":{\\\"p\\\":{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"p\\\"}},\\\"c\\\":{\\\"data\\\":{\\\"id\\\":\\\"4\\\",\\\"type\\\":\\\"c\\\"}}}},{\\\"id\\\":\\\"5\\\",\\\"type\\\":\\\"a\\\",\\\"relationships\\\":{\\\"p\\\":{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"p\\\"}},\\\"c\\\":{\\\"data\\\":null}}},{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"c\\\",\\\"relationships\\\":{\\\"p\\\":{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"p\\\"}}}},{\\\"id\\\":\\\"2\\\",\\\"type\\\":\\\"c\\\",\\\"relationships\\\":{\\\"p\\\":{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"p\\\"}}}},{\\\"id\\\":\\\"3\\\",\\\"type\\\":\\\"c\\\",\\\"relationships\\\":{\\\"p\\\":{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"p\\\"}}}},{\\\"id\\\":\\\"4\\\",\\\"type\\\":\\\"c\\\",\\\"relationships\\\":{\\\"p\\\":{\\\"data\\\":{\\\"id\\\":\\\"1\\\",\\\"type\\\":\\\"p\\\"}}}}]}\"\n</code></pre>\n\n<p>I also added solution PR to my repo.\n<a href=\"https://github.com/X1ting/reproduce_preload_bug/pull/1\" rel=\"nofollow noreferrer\">https://github.com/X1ting/reproduce_preload_bug/pull/1</a></p>\n"}], "owner": {"reputation": 641, "user_id": 5199542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc4bf213725a3737f165cd15af26331c?s=128&d=identicon&r=PG", "display_name": "Xiting", "link": "https://stackoverflow.com/users/5199542/xiting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 58473049, "answer_count": 1, "score": 4, "last_activity_date": 1571575078, "creation_date": 1571571673, "question_id": 58472642, "link": "https://stackoverflow.com/questions/58472642/resolve-n-1-in-case-of-instance-dependent-scope", "title": "Resolve N + 1 in case of instance dependent scope", "body": "<p>So, I have trouble with</p>\n\n<pre><code>Preloading instance dependent scopes are not supported.\n</code></pre>\n\n<p>I have three models</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class P &lt; ApplicationRecord\n  has_many :as\n  has_many :cs\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class C &lt; ApplicationRecord\n  belongs_to :p\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class A &lt; ApplicationRecord\n  belongs_to :p\n  has_one :c, -&gt; (a) { where(feature: a.feature) }, through: :p, source: :cs\nend\n</code></pre>\n\n<p>And i have three fast_jsonapi serializers</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class PSerializer\n  include FastJsonapi::ObjectSerializer\n  has_many :as\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class CSerializer\n  include FastJsonapi::ObjectSerializer\n  belongs_to :p\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class ASerializer\n  include FastJsonapi::ObjectSerializer\n  belongs_to :p\n  has_one :c\nend\n</code></pre>\n\n<p>And this one seed file</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>p_model = P.create(title: 'PTitle')\n4.times do |i|\n  A.create(title: \"aTitle-#{i}\", feature: \"feature-#{i}\", p: p_model)\n  C.create(title: \"cTitle-#{i}\", feature: \"feature-#{i}\", p: p_model)\nend\n</code></pre>\n\n<p>I want to render P with his A and A\u2019s C\u2019s\nBut when i try to do </p>\n\n<pre><code>PSerializer.new(P.first, { include: [:as, :'as.c'] }).serialized_json\n</code></pre>\n\n<p>i got </p>\n\n<pre><code>  P Load (0.1ms)  SELECT  \"ps\".* FROM \"ps\" ORDER BY \"ps\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n   (0.1ms)  SELECT \"as\".\"id\" FROM \"as\" WHERE \"as\".\"p_id\" = ?  [[\"p_id\", 1]]\n  A Load (0.1ms)  SELECT \"as\".* FROM \"as\" WHERE \"as\".\"p_id\" = ?  [[\"p_id\", 1]]\n  C Load (0.2ms)  SELECT  \"cs\".* FROM \"cs\" INNER JOIN \"ps\" ON \"cs\".\"p_id\" = \"ps\".\"id\" WHERE \"ps\".\"id\" = ? AND \"cs\".\"feature\" = ? LIMIT ?  [[\"id\", 1], [\"feature\", \"feature-0\"], [\"LIMIT\", 1]]\n  C Load (0.1ms)  SELECT  \"cs\".* FROM \"cs\" INNER JOIN \"ps\" ON \"cs\".\"p_id\" = \"ps\".\"id\" WHERE \"ps\".\"id\" = ? AND \"cs\".\"feature\" = ? LIMIT ?  [[\"id\", 1], [\"feature\", \"feature-1\"], [\"LIMIT\", 1]]\n  C Load (0.1ms)  SELECT  \"cs\".* FROM \"cs\" INNER JOIN \"ps\" ON \"cs\".\"p_id\" = \"ps\".\"id\" WHERE \"ps\".\"id\" = ? AND \"cs\".\"feature\" = ? LIMIT ?  [[\"id\", 1], [\"feature\", \"feature-2\"], [\"LIMIT\", 1]]\n  C Load (0.1ms)  SELECT  \"cs\".* FROM \"cs\" INNER JOIN \"ps\" ON \"cs\".\"p_id\" = \"ps\".\"id\" WHERE \"ps\".\"id\" = ? AND \"cs\".\"feature\" = ? LIMIT ?  [[\"id\", 1], [\"feature\", \"feature-3\"], [\"LIMIT\", 1]]\n</code></pre>\n\n<p>So, looks like N + 1. But i know what i can use includes to resolve it.</p>\n\n<pre><code>PSerializer.new(P.includes({ as: :c }).first, { include: [:as, :'as.c'] }).serialized_json\n</code></pre>\n\n<p>Oops: </p>\n\n<pre><code>irb(main):010:0&gt; PSerializer.new(P.includes({ as: :c }).first, { include: [:as, :'as.c'] }).serialized_json\n  P Load (0.1ms)  SELECT  \"ps\".* FROM \"ps\" ORDER BY \"ps\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n  A Load (0.1ms)  SELECT \"as\".* FROM \"as\" WHERE \"as\".\"p_id\" = ?  [[\"p_id\", 1]]\nTraceback (most recent call last):\n        1: from (irb):10\nArgumentError (The association scope 'c' is instance dependent (the scope block takes an argument). Preloading instance dependent scopes is not supported.)\n</code></pre>\n\n<p>I can try with left_joins</p>\n\n<pre><code>irb(main):011:0&gt; PSerializer.new(P.left_joins({ as: :c }).first, { include: [:as, :'as.c'] }).serialized_json\nTraceback (most recent call last):\n        1: from (irb):11\nArgumentError (The association scope 'c' is instance dependent (the scope block takes an argument). Preloading instance dependent scopes is not supported.)\n</code></pre>\n\n<p>Actually the same.\nHow I can resolve this N + 1 issue?</p>\n\n<p>I created rails repo with these models, so you can try it by self.\n<a href=\"https://github.com/X1ting/reproduce_preload_bug\" rel=\"nofollow noreferrer\">https://github.com/X1ting/reproduce_preload_bug</a>\nRails 5.2.3\nRuby 2.5.1</p>\n"}, {"tags": ["ruby", "tk"], "comments": [{"owner": {"reputation": 1626, "user_id": 1136063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8d63377824449cc8627aae609579f50?s=128&d=identicon&r=PG", "display_name": "MarkDBlackwell", "link": "https://stackoverflow.com/users/1136063/markdblackwell"}, "edited": false, "score": 0, "creation_date": 1571951298, "post_id": 58471892, "comment_id": 103419266, "body": "Please post your <i>entire</i> Ruby program. As it is, I get &#39;uninitialized constant TkButton&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 1626, "user_id": 1136063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8d63377824449cc8627aae609579f50?s=128&d=identicon&r=PG", "display_name": "MarkDBlackwell", "link": "https://stackoverflow.com/users/1136063/markdblackwell"}, "is_accepted": false, "score": 0, "last_activity_date": 1571956922, "creation_date": 1571956922, "answer_id": 58550049, "question_id": 58471892, "link": "https://stackoverflow.com/questions/58471892/change-label-text-from-within-command-proc/58550049#58550049", "title": "Change label text from within command proc", "body": "<p>The problematic context (where it's unable to reference the label variable) isn't the command proc. Instead, unexpectedly, it's the entire code block passed to <code>TkButton.new</code>.</p>\n\n<p>Generally speaking, the best way around this problem is to avoid passing a code block to  <code>TkButton.new</code> in the first place\u2014as follows:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>b = TkButton.new(root)\nb.text \"GET\"\n#command proc { p txthost.value; p txtpath.value;exit }\nb.command proc{\n  rc.get_method(txthost.value, txtpath.value)\n  txtcode.value = rc.code\n  txthtml.value = rc.html\n  codelabel.text = txtcode.value #label text updated here\n}\nb.pack('side'=&gt;'bottom', 'padx'=&gt;10, 'pady'=&gt;10)\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 8633966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/494679358e68b624fbc62c01595566c7?s=128&d=identicon&r=PG&f=1", "display_name": "cswannabe", "link": "https://stackoverflow.com/users/8633966/cswannabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571956922, "creation_date": 1571565609, "question_id": 58471892, "link": "https://stackoverflow.com/questions/58471892/change-label-text-from-within-command-proc", "title": "Change label text from within command proc", "body": "<p>I have already created a TkLabel beforehand and now I want to update its text variable inside a command proc. The only problem is that <code>NameError: unknown option 'codelabel' for #&lt;Tk::Button:0x00000000050797e8 @path=\".w00003\"&gt; (deleted widget?)</code>.</p>\n\n<p>It seems it is unable to reference the label variable from within the command proc. \nIs this the right way to assign?</p>\n\n<pre><code>TkButton.new(root){\n    text \"GET\"\n    #command proc { p txthost.value; p txtpath.value;exit }\n    command proc{\n            rc.get_method(txthost.value,txtpath.value);\n            txtcode.value=rc.code;\n            txthtml.value=rc.html;\n            codelabel.text=txtcode.value  #label text updated here\n        }\n    pack('side'=&gt;'bottom', 'padx'=&gt;10, 'pady'=&gt;10)\n}\n</code></pre>\n\n<p>Any advice?\nForgive me, for the question, I am new to Ruby.</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 1, "creation_date": 1571565364, "post_id": 58471843, "comment_id": 103277066, "body": "Did you try <code>^0*</code> to match 0 or more times a zero."}], "answers": [{"tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": false, "score": 1, "last_activity_date": 1571590246, "last_edit_date": 1571590246, "creation_date": 1571565992, "answer_id": 58471933, "question_id": 58471843, "link": "https://stackoverflow.com/questions/58471843/empty-answer-if-an-initial-zero-is-not-found/58471933#58471933", "title": "Empty answer if an initial zero is not found", "body": "<p><code>sub!</code> does keep the string intact if there\u2019s no match. It just <em>returns</em> <code>nil</code>. If you don\u2019t need to do the operation in place, use the non-mutating <code>String#sub</code>:</p>\n\n<pre><code>puts string[0..3].sub(/^0+/, \"\")\n</code></pre>\n\n<p>If you do want the replacement done in place, you\u2019ll be holding onto the string in practice, and it\u2019ll work fine:</p>\n\n<pre><code>s = string[0..3]\ns.sub!(/^0+/, \"\")\nputs s\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.6.1/String.html#method-i-sub-21\" rel=\"nofollow noreferrer\">Relevant documentation for <code>sub!</code></a>:</p>\n\n<blockquote>\n  <h3>sub!(pattern, replacement) \u2192 str or nil<br>sub!(pattern) {|match| block } \u2192 str or nil</h3>\n  \n  <p>Performs the same substitution as <code>#sub</code> in-place.</p>\n  \n  <p>Returns <code>str</code> if a substitution was performed or <code>nil</code> if no substitution was performed.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": false, "score": 0, "last_activity_date": 1571566849, "creation_date": 1571566849, "answer_id": 58472021, "question_id": 58471843, "link": "https://stackoverflow.com/questions/58471843/empty-answer-if-an-initial-zero-is-not-found/58472021#58472021", "title": "Empty answer if an initial zero is not found", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.5.1/Regexp.html#method-i-match\" rel=\"nofollow noreferrer\">match</a> method instead of sub!</p>\n\n<pre><code>match(/[^0]\\d+/)\n\nstring = \"0067 more text\"\nputs string[0..3].match(/[^0]\\d+/)\n#=&gt; 67\n\nstring = \"6776 more text\"\nputs string[0..3].match(/[^0]\\d+/)\n#=&gt; 6776\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10612930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eJ6ySgRTqUo/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAl2wKAl3YRi_P96QZAT_fYpinZkA/mo/photo.jpg?sz=128", "display_name": "Ekonomism", "link": "https://stackoverflow.com/users/10612930/ekonomism"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571590246, "creation_date": 1571565242, "last_edit_date": 1571565609, "question_id": 58471843, "link": "https://stackoverflow.com/questions/58471843/empty-answer-if-an-initial-zero-is-not-found", "title": "Empty answer if an initial zero is not found", "body": "<p>When I run a regex trying to remove an initial zero from a number as in the example I get the correct answer if there is a zero before the number. However, if there are no zeroes I get an empty string.</p>\n\n<p>This is not the expected result for me, but might be the way things work.</p>\n\n<p>I would like to have an expression that keeps the string intact if there are no initial zeroes.</p>\n\n<p>This is MRI Ruby 2.6.1</p>\n\n<p>Example 1</p>\n\n<pre><code>string = \"0067 more text\"\nputs string[0..3].sub!(/^0+/, \"\")\n#=&gt; 67\n</code></pre>\n\n<p>Example 2</p>\n\n<pre><code>string = \"6776 more text\"\nputs string[0..3].sub!(/^0+/, \"\")\n#=&gt; 'empty string'\n</code></pre>\n\n<p>In Example 2 I would like it to keep the string intact. I wouldn't a priori expect the expression to delete the string. But if it is the correct behaviour I need a way to make it keep the original string intact.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 2, "last_activity_date": 1571675695, "creation_date": 1571675695, "answer_id": 58490588, "question_id": 58470922, "link": "https://stackoverflow.com/questions/58470922/how-to-ignore-rspecexamplegroupsemptycontentvalidation-error-on-compiling-a/58490588#58490588", "title": "How to ignore RSpec::ExampleGroups::EmptyContentValidation error on compiling a null value in JSON?", "body": "<p>That isn't JSON, that's a Ruby hash. And in Ruby there is no <code>null</code>, instead you use <code>nil</code>. You can confirm all of this by pasting into your REPL:</p>\n\n<pre><code>actual =\n        {\n            \"posts\": [\n                {\n                    \"id\": 3,\n                    \"title\": \"Post 3\"\n                }\n            ],\n            \"profile\": {\n                \"name\": \"\"\n            },\n            \"nulldata\": {\n                \"res\": null\n            }\n        }\n</code></pre>\n\n<p>This will return:</p>\n\n<pre><code>NameError: undefined local variable or method `null' for main:Object\n</code></pre>\n\n<p>Now change it to <code>nil</code>:</p>\n\n<pre><code>actual =\n        {\n            \"posts\": [\n                {\n                    \"id\": 3,\n                    \"title\": \"Post 3\"\n                }\n            ],\n            \"profile\": {\n                \"name\": \"\"\n            },\n            \"nulldata\": {\n                \"res\": nil\n            }\n        }\n</code></pre>\n\n<p>This will return:</p>\n\n<pre><code>=&gt; {\n       :posts =&gt; [\n        [0] {\n               :id =&gt; 3,\n            :title =&gt; \"Post 3\"\n        }\n    ],\n     :profile =&gt; {\n        :name =&gt; \"\"\n    },\n    :nulldata =&gt; {\n        :res =&gt; nil\n    }\n}\n</code></pre>\n\n<p>And you can even confirm that it's not JSON (which is a <code>String</code>) but is instead a <code>Hash</code>:</p>\n\n<pre><code>actual.class\n=&gt; Hash &lt; Object\n</code></pre>\n"}], "owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 58490588, "answer_count": 1, "score": 0, "last_activity_date": 1571675695, "creation_date": 1571556706, "question_id": 58470922, "link": "https://stackoverflow.com/questions/58470922/how-to-ignore-rspecexamplegroupsemptycontentvalidation-error-on-compiling-a", "title": "How to ignore RSpec::ExampleGroups::EmptyContentValidation error on compiling a null value in JSON?", "body": "<p>Here is what I get:</p>\n\n<pre><code>*** NameError Exception: undefined local variable or method `null' for #&lt;RSpec::ExampleGroups::EmptyContentValidation:0x00007fdd2d2775d8&gt;\n\n</code></pre>\n\n<p>Here is what I have as code:</p>\n\n<pre><code>actual =\n        {\n            \"posts\": [\n                {\n                    \"id\": 3,\n                    \"title\": \"Post 3\"\n                }\n            ],\n            \"profile\": {\n                \"name\": \"\"\n            },\n            \"nulldata\": {\n                \"res\": null\n            }\n        }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MTRUx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MTRUx.png\" alt=\"enter image description here\"></a></p>\n\n<ol>\n<li>Not sure why <code>RSpec::ExampleGroups::EmptyContentValidation</code> is\nthrown when the above json snippet is compiled</li>\n<li>How to get rid of this error message (or to turn off this error which is not relevant)</li>\n</ol>\n"}, {"tags": ["arrays", "ruby", "math", "duplicates", "subtraction"], "comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 2, "creation_date": 1571526035, "post_id": 58468629, "comment_id": 103271702, "body": "<code>c = a.map.with_index {|e,i| e - b[i]}</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1571532588, "post_id": 58468629, "comment_id": 103272564, "body": "...or <code>a.each_index.map { |i| a[i]-b[i] }</code> or <code>a.zip(b).map { |x,y| x-y }</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "edited": false, "score": 0, "creation_date": 1571530947, "post_id": 58468993, "comment_id": 103272343, "body": "@CarySwoveland Thank you again for helping me to make my answer better."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1571532054, "post_id": 58468993, "comment_id": 103272483, "body": "That is my advice. It\u2019s common for SO members to not know when to stop when writing answers. Many an excellent answer has been made worse by the addition of peripheral bumf, imo. Note you have <code>vector_c.to_a</code>, but <code>c = b - a</code>. <code>(a-b).to_a #=&gt; [2, 2, 1, 4]</code> would commonly be written here to show the result of the calculation. Also, nothing is added by assignIng the result to a variable."}, {"owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571532522, "post_id": 58468993, "comment_id": 103272554, "body": "@CarySwoveland Done. I have removed &#39;dynamic build&#39; from the answer."}], "tags": [], "owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "is_accepted": false, "score": 2, "last_activity_date": 1571532392, "last_edit_date": 1571532392, "creation_date": 1571529653, "answer_id": 58468993, "question_id": 58468629, "link": "https://stackoverflow.com/questions/58468629/do-math-across-two-arrays/58468993#58468993", "title": "Do math across two arrays", "body": "<p>There are multiple ways to do it in Ruby. Some examples:</p>\n\n<ol>\n<li>The most straightforward approach:</li>\n</ol>\n\n<pre><code>a = [3.0, 4.0, 3.0, 5.0]\n\nb = [1.0, 2.0, 2.0, 1.0]\n\nlength = 4\n\nc = Array.new(length, 0.0) # Where 0.0 is default array value.\n\nlength.times do |i|\n  c[i] = a[i] - b[i]\nend\n</code></pre>\n\n<ol start=\"2\">\n<li>Using <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/matrix/rdoc/Vector.html\" rel=\"nofollow noreferrer\"><code>Vector</code></a> class from Ruby standard library:</li>\n</ol>\n\n<pre><code>require 'matrix'\n\na = Vector[3.0, 4.0, 3.0, 5.0]\n\nb = Vector[1.0, 2.0, 2.0, 1.0]\n\n(a - b).to_a\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1571552548, "creation_date": 1571552548, "answer_id": 58470540, "question_id": 58468629, "link": "https://stackoverflow.com/questions/58468629/do-math-across-two-arrays/58470540#58470540", "title": "Do math across two arrays", "body": "<p>I would use <a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-zip\" rel=\"nofollow noreferrer\"><code>Array#zip</code></a> and then <a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>Array#map</code></a>:</p>\n\n<pre><code> a = [3,4,3,5]\n b = [1,2,2,1]\n\n c = a.zip(b).map { |a, b| a - b }\n #=&gt; [2, 2, 1, 4]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1571560620, "creation_date": 1571560620, "answer_id": 58471288, "question_id": 58468629, "link": "https://stackoverflow.com/questions/58468629/do-math-across-two-arrays/58471288#58471288", "title": "Do math across two arrays", "body": "<p>Using <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\"><code>Enumerable#inject</code></a>. </p>\n\n<pre><code>a = [3, 4, 3, 5]\nb = [1, 2, 2, 1]\n\n\u0441 = a.zip(b).map { |i| i.inject(&amp;:-) }\n# =&gt; [2, 2, 1, 4]\n</code></pre>\n\n<p>I like <code>:-)</code> symbols there :-)</p>\n"}], "owner": {"reputation": 17, "user_id": 12244722, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDa5qGpoodk-Hcpzv68lT2jkYHSIwmDW3zT0wPmKw=k-s128", "display_name": "Aubrey Thompson", "link": "https://stackoverflow.com/users/12244722/aubrey-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1571560620, "creation_date": 1571525131, "question_id": 58468629, "link": "https://stackoverflow.com/questions/58468629/do-math-across-two-arrays", "title": "Do math across two arrays", "body": "<p>I need to subtract one array from another, by index: \na = [3,4,3,5]\nb = [1,2,2,1]</p>\n\n<p>c = [2,2,1,4]</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1571550620, "post_id": 58468406, "comment_id": 103274606, "body": "Just a side note, I think you meant <code>while f == 0</code> (note the double equals) ... otherwise this will run forever. Anyway, Ruby doesn&#39;t have goto."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1571564338, "post_id": 58468406, "comment_id": 103276843, "body": "I do not understand your question. When you skip the <code>f = 1</code> line it would basically jump back to the line in question and repeat the block. Can you please elaborate?"}, {"owner": {"reputation": 27, "user_id": 11582737, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nj7eyjxT6g8/AAAAAAAAAAI/AAAAAAAAAAg/jBWOSwVtMAw/photo.jpg?sz=128", "display_name": "Karol Mazurek", "link": "https://stackoverflow.com/users/11582737/karol-mazurek"}, "edited": false, "score": 0, "creation_date": 1571565103, "post_id": 58468406, "comment_id": 103277015, "body": "Hello, i did some changes, now it&#39;s should be clear for you."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1571584147, "creation_date": 1571584147, "answer_id": 58474319, "question_id": 58468406, "link": "https://stackoverflow.com/questions/58468406/back-to-the-designated-point-with-anchor/58474319#58474319", "title": "Back to the designated point with anchor", "body": "<p>One way to do this is with a loop:</p>\n\n<pre><code>loop do\n  # ...some code\n  f = 0\n  while f == 0\n    ... some code\n    f = 1\n  end\n  break unless some_condition\nend\n</code></pre>\n\n<p>So, the loop will continue <em>unless</em> the condition is met.</p>\n"}], "owner": {"reputation": 27, "user_id": 11582737, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nj7eyjxT6g8/AAAAAAAAAAI/AAAAAAAAAAg/jBWOSwVtMAw/photo.jpg?sz=128", "display_name": "Karol Mazurek", "link": "https://stackoverflow.com/users/11582737/karol-mazurek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 58474319, "answer_count": 1, "score": 0, "last_activity_date": 1571584147, "creation_date": 1571522765, "last_edit_date": 1571564936, "question_id": 58468406, "link": "https://stackoverflow.com/questions/58468406/back-to-the-designated-point-with-anchor", "title": "Back to the designated point with anchor", "body": "<p>How can i do stuff like that in ruby:</p>\n\n<pre><code>#  =&gt; ANCHOR GO BACK HERE\n...some code\nf = 0\nwhile f == 0\n ... some code\nf = 1\nend\n# if [condition] =&gt; ANCHOR FROM HERE\n</code></pre>\n\n<p>It's sth like goto in pascal i belive, but i'm not sure.\nI want to go back to the \"Anchor\" in code when certain condition happen.\nCould somebody help me with that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1740, "user_id": 6365534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/B2d3m.png?s=128&g=1", "display_name": "qarthandso", "link": "https://stackoverflow.com/users/6365534/qarthandso"}, "edited": false, "score": 0, "creation_date": 1571498804, "post_id": 58464878, "comment_id": 103265283, "body": "Added an update to the question if you wouldn&#39;t mind taking a look at it! Wanted to know basically if I&#39;m able to use <code>extend</code> instead of <code>include</code> with the given explanation you provided. I understand it&#39;s a little contrived since the methods coming over would be coming over as class methods anyway. Thus, maybe the update to my question has no bearing, just want to be sure."}, {"owner": {"reputation": 1740, "user_id": 6365534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/B2d3m.png?s=128&g=1", "display_name": "qarthandso", "link": "https://stackoverflow.com/users/6365534/qarthandso"}, "edited": false, "score": 0, "creation_date": 1571498891, "post_id": 58464878, "comment_id": 103265312, "body": "Part of the reason I&#39;m asking the above question is, <code>forwardable</code> recommends to include it by way of the <code>extend</code> keyword, but the line in the source code that I linked to has a class method defined with the <code>class &lt;&lt; self</code> manner. This is primarily why I&#39;m asking. If I&#39;m to use <code>forwardable</code> via <code>extend</code>, but <code>forwardable</code> has this <code>class &lt;&lt; self</code> method in it, am I getting access to that method in any way?"}, {"owner": {"reputation": 1740, "user_id": 6365534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/B2d3m.png?s=128&g=1", "display_name": "qarthandso", "link": "https://stackoverflow.com/users/6365534/qarthandso"}, "edited": false, "score": 0, "creation_date": 1571500400, "post_id": 58464878, "comment_id": 103265623, "body": "Thank you greatly for the link. Appreciate the help!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571508273, "post_id": 58464878, "comment_id": 103267727, "body": "Good answer. You said, &quot;Since you&#39;ve defined a class method on the <code>Direction</code> module, <code>include</code> or <code>extend</code> will not inherit the class method of that module.&quot; While that is perfectly correct, it may raise a question in qarthandso&#39;s mind: &quot;If class methods cannot be inherited by the class, is there any point including them in the module?&quot; You might address that, possibly referencing the <code>Math</code> module, which contains nothing but class (really module) methods. Also, I think, &quot;If you want to use inheritance with class methods from a module...&quot; could be better worded."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1571583961, "post_id": 58464878, "comment_id": 103281729, "body": "@cary please feel free to help me on rewording this?"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 3, "last_activity_date": 1571499727, "last_edit_date": 1571499727, "creation_date": 1571496630, "answer_id": 58464878, "question_id": 58464637, "link": "https://stackoverflow.com/questions/58464637/ruby-include-extend-module-a-class-method-beginner/58464878#58464878", "title": "Ruby include/extend Module: a class method - Beginner", "body": "<p>When you define a method with <code>class &lt;&lt; self</code> you are defining a class method. It's the same as defining the methed like this:</p>\n\n<pre><code>class Foo\n  def self.foo\n    puts 'foo'\n  end\n  # the above definition is the same as doing:\n  class &lt;&lt; self\n    def foo\n      puts 'foo'\n    end\n  end\nend\n</code></pre>\n\n<p>The above shows 2 ways of defining class methods which are called directly on the class and not on instances of the class.  You might use the 2nd syntax if you want to define only class methods or several of them inside of the <code>class &lt;&lt; self</code> block.  But either style has the same result.</p>\n\n<p>Since you've defined a class method on the <code>Direction</code> module, <code>include</code> or <code>extend</code> will not inherit the class method of that module.  This is the expected behavior.  </p>\n\n<p>If you want to use inheritance with class methods from a module, you should do it like this which is explained further down in the article you've linked</p>\n\n<pre><code>module Direction\n  def self.included(base)\n    base.extend(ClassMethods)\n  end\n\n  module ClassMethods\n    def stop\n      puts 'stopping!'\n    end\n  end\n\n  def straight\n    puts \"going straight!\"\n  end\n\n  def turn\n    puts \"turning!\"\n  end\nend\n\nclass Car\n  include Direction\nend\n</code></pre>\n\n<p>Now calling class methods on <code>Car</code> will inherit as defined in the <code>Direction</code> class.</p>\n\n<pre><code>Car.stop\nstopping!\n=&gt;nil # calling a method will return nil unless the method returns a value.\n</code></pre>\n\n<p>However always be careful using inheritance of any kind as Ruby is a dynamic language.  So if you do the above code and then later redefine this method:</p>\n\n<pre><code>module Direction\n  module ClassMethods\n    def stop\n      puts 'go!'\n    end\n  end\nend\n</code></pre>\n\n<p>Guess what will happen if you do this:</p>\n\n<pre><code>Car.stop\n</code></pre>\n\n<p>Since the method was defined inside <code>Direction</code> module, when the method gets called on <code>Car</code> it will be calling the method from the <code>Direction</code> module.</p>\n\n<pre><code>Car.stop\ngo!\n=&gt;nil\n</code></pre>\n\n<p>Updated based on comments:</p>\n\n<p>If you prefer to use <code>extend</code> vs <code>include</code> you would need to do this instead:</p>\n\n<pre><code>module Direction\n  def self.extended(base)\n    base.extend(ClassMethods)\n  end\n\n  module ClassMethods\n    def stop\n      puts 'stopping!'\n    end\n  end\nend\n\nclass Car\n  extend Direction\nend\n</code></pre>\n\n<p>In this example, all the methods which were inherited from the module are \"copied\" to the class extending them.  This avoids the problem of possible result of redefining the module method which I warned about when using <code>include</code> previously in my answer. </p>\n\n<p>But you may want to look at answers to <a href=\"https://stackoverflow.com/questions/156362/what-is-the-difference-between-include-and-extend-in-ruby\">this question</a> for ideas about when and why to use either case.</p>\n"}], "owner": {"reputation": 1740, "user_id": 6365534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/B2d3m.png?s=128&g=1", "display_name": "qarthandso", "link": "https://stackoverflow.com/users/6365534/qarthandso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571499727, "creation_date": 1571494960, "last_edit_date": 1571498749, "question_id": 58464637, "link": "https://stackoverflow.com/questions/58464637/ruby-include-extend-module-a-class-method-beginner", "title": "Ruby include/extend Module: a class method - Beginner", "body": "<p>I've been reading <a href=\"http://www.railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/\" rel=\"nofollow noreferrer\">this article</a> on the difference between <code>include</code> &amp; <code>extend</code> in ruby.</p>\n\n<p>If I have this module, I understand how the first and second methods of the module will be used in the class. What I don't understand is how the <code>class &lt;&lt; self</code> will be used by <code>include</code> or <code>extend</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Direction\n  def straight\n    puts \"going straight!\"\n  end\n\n  def turn\n    puts \"turning!\"\n  end\n\n  class &lt;&lt; self\n    def stop\n      puts \"stopping!\"\n    end\n  end\nend\n\n# This will work because `include` brings them in as instance methods\nclass Car\n  include Direction\nend\n\nCar.new.straight\nCar.new.turn\n\n# ---------------------\n# Now this will also work because `extend` brings them in as class methods\nclass Car\n  extend Direction\nend\n\nCar.straight\nCar.turn\n\n# ---------------------\n</code></pre>\n\n<hr>\n\n<p>Now, the issue is, doing <code>Car.stop</code> or <code>Car.new.stop</code> will <strong>always</strong> result in an error:</p>\n\n<pre><code>/Users/&lt;name&gt;/Projects/ruby-testing/main.rb:34:in `&lt;main&gt;': undefined method `stop' for Car:Class (NoMethodError)\n</code></pre>\n\n<p>Why are class methods not carried over via <code>include</code> and <code>extend</code>? </p>\n\n<hr>\n\n<p>I started thinking about this because of my research into the [<code>forwardable</code> source code at line 119].(<a href=\"https://github.com/ruby/ruby/blob/master/lib/forwardable.rb#L119\" rel=\"nofollow noreferrer\">https://github.com/ruby/ruby/blob/master/lib/forwardable.rb#L119</a>)</p>\n\n<p>Thank you for any help you may have!</p>\n\n<hr>\n\n<p><strong>Update from Answer Below</strong></p>\n\n<p>The following was an example given:</p>\n\n<pre><code>module Direction\n  def self.included(base)\n    base.extend(ClassMethods)\n  end\n\n  module ClassMethods\n    def stop\n      puts 'stopping!'\n    end\n  end\n\n  def straight\n    puts \"going straight!\"\n  end\n\n  def turn\n    puts \"turning!\"\n  end\nend\n\nclass Car\n  include Direction\nend\n</code></pre>\n\n<p>This I understand now, and I understand how I can implement class methods from a module into a class using <code>def self.included(base)</code>. My question is, if we used <code>extend</code> inside of <code>Car</code> instead of <code>include</code>, would we still be able to get at those class methods using <code>def self.included(base)</code>?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "edited": false, "score": 0, "creation_date": 1571493427, "post_id": 58464294, "comment_id": 103263944, "body": "You forgot the trailing } and the assignment operator =."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1571497144, "post_id": 58464294, "comment_id": 103264874, "body": "Off-topic because : &quot;This question was caused by a problem that can no longer be reproduced or a simple typographical error. While similar questions may be on-topic here, this one was resolved in a manner unlikely to help future readers. This can often be avoided by identifying and closely inspecting the shortest program necessary to reproduce the problem before posting.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "is_accepted": false, "score": 1, "last_activity_date": 1571493469, "creation_date": 1571493469, "answer_id": 58464435, "question_id": 58464294, "link": "https://stackoverflow.com/questions/58464294/i-keep-on-getting-an-error-relating-to-my-hash/58464435#58464435", "title": "I keep on getting an error relating to my hash", "body": "<p>Try this:</p>\n\n<pre><code>name_hash = {15 =&gt; \"Michael\", 13 =&gt;\"Christopher\",114 =&gt;\"Ryan\"}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12243214, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cUYSme6xeeo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf5vqPodgXCQ0NrhAEc7wrWxorsMg/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/12243214/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571499324, "creation_date": 1571492508, "last_edit_date": 1571499324, "question_id": 58464294, "link": "https://stackoverflow.com/questions/58464294/i-keep-on-getting-an-error-relating-to-my-hash", "title": "I keep on getting an error relating to my hash", "body": "<p>I made a hash on <strong>Repl.it</strong>, and I've tried everything but I keep getting the same error.</p>\n\n<p>I've done more research on hashes and I've learnt a lot. I'm fourteen and I've already run into a mojor problem on ruby 2.5.5.</p>\n\n<p>This is the hash I made  </p>\n\n<pre><code>name_hash {15 =&gt; \"Michael\", 13 =&gt;\"Christopher\",114 =&gt;\"Ryan\" \n</code></pre>\n\n<p>The expected result is to have no errors but I just come back with this error</p>\n\n<pre><code>(repl):9: syntax error, unexpected =&gt;, expecting '}'\nname_hash {15 =&gt; \"Michael\", 13 =&gt;\"Christopher...\n              ^~\n(repl):9: syntax error, unexpected ',', expecting end-of-input\nname_hash {15 =&gt; \"Michael\", 13 =&gt;\"Christopher\",114 =&gt;\"Ry...\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1571504930, "post_id": 58464042, "comment_id": 103266835, "body": "They do entirely different things so it is a little unclear what you&#39;re asking. <code>*values</code> puts all the trailing arguments into an array called <code>values</code> so you can say <code>m(x, 1, 2, 3, 4)</code>. <code>options = { }</code> just means that the second argument is optional and defaults to an empty hash so you can say <code>m(x)</code> or <code>m(x, a: 11)</code> (but you can also cause problems with things like <code>m(x, 42)</code>). You also forget <code>def m(x, **opts)</code> which is sort of a tighter version of <code>options = { }</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "is_accepted": false, "score": 2, "last_activity_date": 1571491909, "creation_date": 1571491909, "answer_id": 58464208, "question_id": 58464042, "link": "https://stackoverflow.com/questions/58464042/when-do-you-prefer-asterisk-param-over-options-hash-in-ruby-method-signature/58464208#58464208", "title": "when do you prefer asterisk param over options hash in ruby method signature", "body": "<p>I use the asterisk parameter when I need to get a bunch of something, like a bunch of numbers or a bunch of strings.</p>\n\n<p>I pass or accept a hash when I need a collection of values that are differentiated by identifying keys.</p>\n"}], "owner": {"reputation": 4855, "user_id": 3618156, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b3e1907a7f15ed006abc8ad406cf40fe?s=128&d=identicon&r=PG&f=1", "display_name": "american-ninja-warrior", "link": "https://stackoverflow.com/users/3618156/american-ninja-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1571491909, "creation_date": 1571490724, "question_id": 58464042, "link": "https://stackoverflow.com/questions/58464042/when-do-you-prefer-asterisk-param-over-options-hash-in-ruby-method-signature", "title": "when do you prefer asterisk param over options hash in ruby method signature", "body": "<p>When is it more appropriate to write a ruby method signature like this</p>\n\n<pre><code>def truncate(text, *values)\n</code></pre>\n\n<p>over</p>\n\n<pre><code>def truncate(text, options = {})\n</code></pre>\n\n<p>Both seem to been common at <a href=\"https://github.com/rails/rails/blob/66cabeda2c46c582d19738e1318be8d59584cc5b/actionview/lib/action_view/helpers/text_helper.rb\" rel=\"nofollow noreferrer\">rails</a></p>\n"}, {"tags": ["ruby", "web-scraping", "uri"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1571491727, "post_id": 58463839, "comment_id": 103263589, "body": "This might help: <a href=\"https://stackoverflow.com/questions/50157965/uriinvalidurierror-uri-must-be-ascii-only\" title=\"uriinvalidurierror uri must be ascii only\">stackoverflow.com/questions/50157965/&hellip;</a>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1571491768, "post_id": 58463839, "comment_id": 103263600, "body": "<a href=\"https://stackoverflow.com/questions/46849219/ruby-uriinvalidurierror-uri-must-be-ascii-only\" title=\"ruby uriinvalidurierror uri must be ascii only\">stackoverflow.com/questions/46849219/&hellip;</a>"}, {"owner": {"reputation": 353, "user_id": 10641015, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rb6K-6eC5TI/AAAAAAAAAAI/AAAAAAAAAGw/E-daD0VOiz0/photo.jpg?sz=128", "display_name": "jadejoe", "link": "https://stackoverflow.com/users/10641015/jadejoe"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1571641042, "post_id": 58463839, "comment_id": 103294124, "body": "thanks, but i already seen this topics bad fix this issue"}], "owner": {"reputation": 353, "user_id": 10641015, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rb6K-6eC5TI/AAAAAAAAAAI/AAAAAAAAAGw/E-daD0VOiz0/photo.jpg?sz=128", "display_name": "jadejoe", "link": "https://stackoverflow.com/users/10641015/jadejoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1159, "favorite_count": 0, "closed_date": 1571499464, "answer_count": 0, "score": 0, "last_activity_date": 1571490628, "creation_date": 1571489245, "last_edit_date": 1571490628, "question_id": 58463839, "link": "https://stackoverflow.com/questions/58463839/uri-must-be-ascii-only", "closed_reason": "Duplicate", "title": "URI must be ascii only", "body": "<p>I'm creating a scraping program using Ruby</p>\n\n<p>I will ask a question because a program that used to work without problems has stopped working.</p>\n\n<p>When reading Japanese\nThe error that appears is the title error</p>\n\n<pre><code>`split': URI must be ascii only \"https://www.google.com/complete/search?h1=ja&amp;output=toolbar&amp;q=\\u4FDD\\u967A\" (URI::InvalidURIError)\n</code></pre>\n\n<p>as a place to wake up</p>\n\n<pre><code>doc = REXML::Document.new(open(url).read.encode(\"UTF-8\"))\n</code></pre>\n\n<p>here is the code</p>\n\n<p>I think it is necessary to change the URI encoding to ASCII.\nI don\u2019t know the best way to do it.</p>\n\n<p>info</p>\n\n<pre><code>$ ruby -v\nruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin18]\n</code></pre>\n\n<p>Thanks</p>\n"}]