[{"tags": ["html", "ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 1, "creation_date": 1553124912, "post_id": 55271551, "comment_id": 97274538, "body": "what is the version of your bootstrap (3 or 4)"}, {"owner": {"reputation": 60000, "user_id": 382818, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0c5167a4e5d39de902fcc44c2b8af197?s=128&d=identicon&r=PG", "display_name": "Zabba", "link": "https://stackoverflow.com/users/382818/zabba"}, "edited": false, "score": 0, "creation_date": 1553125187, "post_id": 55271551, "comment_id": 97274613, "body": "Your text isn&#39;t centered. But your column is. Works as it should.."}, {"owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "reply_to_user": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1553125221, "post_id": 55271551, "comment_id": 97274628, "body": "@widjajayd v4.3.1"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "edited": false, "score": 0, "creation_date": 1553126313, "post_id": 55271731, "comment_id": 97274913, "body": "Appreciate the help, but that hasn&#39;t centered it either. I read that article, but didn&#39;t seem to help"}], "tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 2, "last_activity_date": 1553125381, "creation_date": 1553125381, "answer_id": 55271731, "question_id": 55271551, "link": "https://stackoverflow.com/questions/55271551/bootstrap-grid-offset-not-centering/55271731#55271731", "title": "Bootstrap grid offset not centering", "body": "<p>just change col-md-offset-4 to offset-md-4 since bootstrap 4 change this </p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-4 offset-md-4\"&gt;\n</code></pre>\n\n<p>here is <a href=\"https://getbootstrap.com/docs/4.0/layout/grid/#offsetting-columns\" rel=\"nofollow noreferrer\">reference for this</a></p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 1540208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2QDv1.jpg?s=128&g=1", "display_name": "kaushikv", "link": "https://stackoverflow.com/users/1540208/kaushikv"}, "is_accepted": false, "score": 2, "last_activity_date": 1553127507, "creation_date": 1553127507, "answer_id": 55271996, "question_id": 55271551, "link": "https://stackoverflow.com/questions/55271551/bootstrap-grid-offset-not-centering/55271996#55271996", "title": "Bootstrap grid offset not centering", "body": "<pre><code>&lt;div class=\"row\"&gt;\n   &lt;div class=\"col-md-4 text-center\"&gt;\n</code></pre>\n\n<p>Try this. That is what I use most times. </p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1553127666, "creation_date": 1553127666, "answer_id": 55272013, "question_id": 55271551, "link": "https://stackoverflow.com/questions/55271551/bootstrap-grid-offset-not-centering/55272013#55272013", "title": "Bootstrap grid offset not centering", "body": "<p>No idea what happened.\nI removed the breaks between some of the code, and it worked.\nI put the line breaks back, and it still worked. I have no idea. Maybe my browser was having problems? Literally no idea, but it's working now</p>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 9522666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzlNl.jpg?s=128&g=1", "display_name": "Praneeth Madush", "link": "https://stackoverflow.com/users/9522666/praneeth-madush"}, "is_accepted": false, "score": 1, "last_activity_date": 1553130353, "creation_date": 1553130353, "answer_id": 55272336, "question_id": 55271551, "link": "https://stackoverflow.com/questions/55271551/bootstrap-grid-offset-not-centering/55272336#55272336", "title": "Bootstrap grid offset not centering", "body": "<p>You must change this part as bellow.</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-4 offset-md-4\"&gt;\n</code></pre>\n\n<p>just change this part. </p>\n"}], "owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 55272013, "answer_count": 4, "score": 0, "last_activity_date": 1553130353, "creation_date": 1553124109, "question_id": 55271551, "link": "https://stackoverflow.com/questions/55271551/bootstrap-grid-offset-not-centering", "title": "Bootstrap grid offset not centering", "body": "<p>Trying to center my sign up page, but my <code>class=\"col-md-4 col-md-offset-4\"</code> isn't working.\nI know there's other means to centering the text, but I just want to know what I've done wrong in my code, so I can know to avoid it in the future.</p>\n\n<p>My <code>HTML</code> is:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n &lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-4 col-md-offset-4\"&gt;\n   &lt;div class=\"well\"&gt;\n            &lt;h2&gt;Sign up&lt;/h2&gt;\n\n    &lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n      &lt;%= devise_error_messages! %&gt;\n\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :email %&gt;&lt;br /&gt;\n        &lt;%= f.email_field :email, autofocus: true %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :password %&gt;\n        &lt;% if @minimum_password_length %&gt;\n        &lt;em&gt;(&lt;%= @minimum_password_length %&gt; characters minimum)&lt;/em&gt;\n        &lt;% end %&gt;&lt;br /&gt;\n        &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n        &lt;%= f.password_field :password_confirmation, autocomplete: \"off\" %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"actions\"&gt;\n        &lt;%= f.submit \"Sign up\" %&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n\n    &lt;%= render \"devise/shared/links\" %&gt;\n   &lt;/div&gt;\n  &lt;/div&gt;\n &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I've read other posts, and their answers are just that they forgot a container tag or something. Can't find any answer in the bootstrap documentation either. I'm assuming it's something small I'm overlooking.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1553128164, "post_id": 55271544, "comment_id": 97275341, "body": "did you define permitted_params in your controller?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1553128215, "post_id": 55271544, "comment_id": 97275351, "body": "Yes, currently have <code>params.require(:user_product).permit(:product_id, {product_ids: []})</code>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1553128288, "post_id": 55271544, "comment_id": 97275366, "body": "and when i submit the form i get thsi output <code>...&quot;user_product&quot;=&gt;{&quot;product_id&quot;=&gt;[&quot;&quot;, &quot;1&quot;]},</code>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1553128554, "post_id": 55271544, "comment_id": 97275422, "body": "Using the select helper: <code>&lt;%= form.collection_select :product_id, Product.all, :id, :sku %&gt;</code> gives me: <code>...&quot;user_product&quot;=&gt;{&quot;product_id&quot;=&gt;&quot;1&quot;}, ...</code>"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1553128798, "post_id": 55271544, "comment_id": 97275471, "body": "but OP is using <code>collection_check_boxes</code> not <code>collection_select</code>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1553128876, "post_id": 55271544, "comment_id": 97275480, "body": "Hm, so i took out the @product in the create and it worked..... the product.id saved to the database.  must be something with the checkboxes that interfered ?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1553128891, "post_id": 55271544, "comment_id": 97275482, "body": "@lacostenycoder I am the OP :D"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1553128938, "post_id": 55271544, "comment_id": 97275494, "body": "checkboxes passes an array of ids, select passes just 1"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1553129064, "post_id": 55271544, "comment_id": 97275520, "body": "Yep, looks like that was my mistake.  Thanks.  You mentioning the array stuff made me realize i should try using a select helper instead since I only wanted 1 to pass through anyways"}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1553127909, "post_id": 55271951, "comment_id": 97275286, "body": "It&#39;s supposed to be only one product that will go through at any time. so technically, it should be a select  instead of checkboxes.  but I tried your code <code>ArgumentError (wrong number of arguments (given 1, expected 0)):</code> with the following passing through: <code>..., &quot;user_product&quot;=&gt;{&quot;product_id&quot;=&gt;[&quot;&quot;, &quot;1&quot;]}, &quot;commit&quot;=&gt;&quot;Create User product&quot;}</code>"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1553129361, "last_edit_date": 1553129361, "creation_date": 1553127064, "answer_id": 55271951, "question_id": 55271544, "link": "https://stackoverflow.com/questions/55271544/passing-id-through-form-collection-check-boxes-from-associated-model/55271951#55271951", "title": "Passing ID through form.collection_check_boxes from associated model", "body": "<p><code>collection_check_boxes</code> passes an array of ids. If you need only one, try <code>collection_select</code> instead.</p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553129361, "creation_date": 1553124093, "question_id": 55271544, "link": "https://stackoverflow.com/questions/55271544/passing-id-through-form-collection-check-boxes-from-associated-model", "title": "Passing ID through form.collection_check_boxes from associated model", "body": "<p><strong>Issue:</strong> The Product model ID will not enter the UserProduct model.</p>\n\n<p><strong>Controller:</strong></p>\n\n<p><strong>UserProduct Create:</strong></p>\n\n<pre><code>def create\n    @user_product = UserProduct.new(user_product_params)\n    @product = Product.find(params[:product_id])\n    @user_product.product_id = @product.id\n.......\n</code></pre>\n\n<p><strong>Form:</strong></p>\n\n<pre><code>&lt;%= form.collection_check_boxes(:product_id, Product.all, :id, :sku) do |c| %&gt;\n  &lt;%= c.label class:\"form-check-inline\" do %&gt;\n    &lt;%= c.check_box + c.text %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This shows the Products :sku on the front end, but the ID isn't passing through.</p>\n\n<p><strong>The error on input is the following:</strong></p>\n\n<p><code>Couldn't find Product without an ID</code></p>\n\n<p><strong>Models:</strong></p>\n\n<p><strong>UserProduct:</strong></p>\n\n<pre><code>  has_and_belongs_to_many :products\n</code></pre>\n\n<p><strong>Product:</strong></p>\n\n<pre><code>....\n  has_and_belongs_to_many :user_products\n....\n</code></pre>\n\n<p>This can't be a nested resource, to my understanding, because the UserProduct model is supposed to pick products from the Product model to then attach to the UserProducts.  So basically, there is a list of products available on the App, and then the User can choose from those products to enter in their UserProduct model.</p>\n\n<p>Anything wrong with my code? How can I pass through the ID from the drop down menu on selection?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 3, "last_activity_date": 1553157850, "last_edit_date": 1553157850, "creation_date": 1553122380, "answer_id": 55271321, "question_id": 55271257, "link": "https://stackoverflow.com/questions/55271257/sort-a-array-of-string-by-the-reverse-value/55271321#55271321", "title": "Sort a array of string by the reverse value", "body": "<p>Would this work for you?</p>\n\n<pre><code>domains.\n  map{|d| d.split(\".\")}.\n  sort_by(&amp;:reverse).\n  map{|d| d.join(\".\") }\n</code></pre>\n\n<p>Edit: or indeed</p>\n\n<pre><code>domains.sort_by{|x| x.split(\".\").reverse}\n</code></pre>\n\n<p>Just to add, I think that something like this deserves to be a value object, as these are not simply strings and they have their own attributes and special behaviour (such as this sort).</p>\n\n<p>For example:</p>\n\n<pre><code>class Domain\n  include Comparable\n\n  def initialize(string)\n    @string = string\n  end\n\n  def to_s\n    @string\n  end\n\n  def elements\n    @string.split(\".\")\n  end\n\n  protected def &lt;=&gt;(other)\n    elements.reverse &lt;=&gt; other.elements.reverse\n  end\n\n  def tld\n    elements.last\n  end\nend\n</code></pre>\n\n<p>So you can then:</p>\n\n<pre><code>domains = [\n  Domain.new('api.test.google.com'),\n  Domain.new('dev.blue.google.com'),\n  Domain.new('dev.test.google.com'),\n  Domain.new('a.blue.google.com'),\n]\n\ndomains.map(&amp;:to_s)\n =&gt; [\"api.test.google.com\", \"dev.blue.google.com\", \"dev.test.google.com\", \"a.blue.google.com\"] \n\ndomains.sort.map(&amp;:to_s)\n =&gt; [\"a.blue.google.com\", \"dev.blue.google.com\", \"api.test.google.com\", \"dev.test.google.com\"] \n</code></pre>\n\n<p>You can also add in any other behaviour you like, such as a method for returning the top level domain.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1553129225, "post_id": 55271328, "comment_id": 97275557, "body": "...or <code>domains.sort_by(&amp;:reverse)</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1553130149, "post_id": 55271328, "comment_id": 97275742, "body": "It&#39;s just a coincidence that reversing the strings for sorting works with these domains. Try to sort <code>[&#39;az.com&#39;, &#39;by.com&#39;, &#39;cx.com&#39;]</code>. It also doesn&#39;t take the hierarchy into account."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 3, "last_activity_date": 1553191422, "last_edit_date": 1553191422, "creation_date": 1553122460, "answer_id": 55271328, "question_id": 55271257, "link": "https://stackoverflow.com/questions/55271257/sort-a-array-of-string-by-the-reverse-value/55271328#55271328", "title": "Sort a array of string by the reverse value", "body": "<p>If all you want to do is sort by the reversed value use <code>sort_by</code>:</p>\n\n<pre><code>domains = [\n  'api.test.google.com',\n  'dev.blue.google.com',\n  'dev.test.google.com',\n  'a.blue.google.com'\n]\n\ndomains.sort_by { |domain| domain.reverse }\n\n#=&gt; [\"a.blue.google.com\", \"dev.blue.google.com\", \"api.test.google.com\", \"dev.test.google.com\"]\n</code></pre>\n\n<p>If you are concerned with keeping the strings between the dots in the original order you can use:</p>\n\n<pre><code>domains.sort_by { |domain| domain.split('.').reverse }\n\n#=&gt; [\"a.blue.google.com\", \"dev.blue.google.com\", \"api.test.google.com\", \"dev.test.google.com\"]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 2699750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/419f731b1ad246dea43da674aef11ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier", "link": "https://stackoverflow.com/users/2699750/olivier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553191422, "creation_date": 1553121983, "question_id": 55271257, "link": "https://stackoverflow.com/questions/55271257/sort-a-array-of-string-by-the-reverse-value", "title": "Sort a array of string by the reverse value", "body": "<p>Right now I've produced the following code to sort a list of domains </p>\n\n<pre><code>domains = [\n  'api.test.google.com',\n  'dev.blue.google.com',\n  'dev.test.google.com',\n  'a.blue.google.com'\n]\n\nfiltered = []\n\ndomains.each { |domain| filtered.push domain.reverse! }\ndomains.sort!\ndomains.each { |domain| filtered.push domain.reverse! }\n</code></pre>\n\n<p>The output of this code will be:</p>\n\n<pre><code>[\"a.blue.google.com\", \"dev.blue.google.com\", \"api.test.google.com\", \"dev.test.google.com\"]\n</code></pre>\n\n<p>I'm trying to find a way to make this more elegant as it does not look like the most optimal solution to solve this problem but I'm having issues figuring out what is.</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["ruby", "rubygems", "fedora", "stdint", "narray"], "answers": [{"tags": [], "owner": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "is_accepted": false, "score": 0, "last_activity_date": 1553204645, "creation_date": 1553204645, "answer_id": 55289708, "question_id": 55270299, "link": "https://stackoverflow.com/questions/55270299/how-to-configure-fedora-29-to-use-ruby-number-theory-gem/55289708#55289708", "title": "How to configure Fedora 29 to use ruby &#39;number-theory&#39; gem?", "body": "<p>Looking in the <code>mkmf.log</code> file, it appeared the system was lacking <code>redhat-hardened-cc1</code>, so a simple <code>sudo dnf install redhat-rpm-config</code> fixed that.</p>\n"}], "owner": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553204645, "creation_date": 1553116466, "question_id": 55270299, "link": "https://stackoverflow.com/questions/55270299/how-to-configure-fedora-29-to-use-ruby-number-theory-gem", "title": "How to configure Fedora 29 to use ruby &#39;number-theory&#39; gem?", "body": "<p>So basically <a href=\"https://github.com/dannysiu392005/ruby-number-theory\" rel=\"nofollow noreferrer\">RubyNumberTheory</a> require the NArray gem, and it seems it requires some native compilation tools and probably some additional configuration. So on a Fedora 29, here is what was tried</p>\n\n<pre><code>$ gem install narray \nBuilding native extensions. This could take a while...\nERROR:  Error installing narray:\n    ERROR: Failed to build gem native extension.\n[\u2026]\nchecking for stdint.h... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n</code></pre>\n\n<p>I did installed a few packages, through dnf like <code>gcc ruby-devel rubygems</code> and <code>group install \"C Development Tools and Libraries\"</code>and even some more unexpected <code>arm-none-eabi-newlib</code>. Actually, the header seems well installed on the system </p>\n\n<pre><code>$ whereis stdint.h\nstdint: /usr/include/stdint.h\n</code></pre>\n\n<p>Even with environment variable set as following:</p>\n\n<pre><code>export LIBRARY_PATH=/usr/include\nexport LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib:/usr/include\n</code></pre>\n\n<p>The gem still won't install, telling stdint.h wasn't found. What else could be attempted?</p>\n"}, {"tags": ["ruby", "sorting", "hash"], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 351, "user_id": 11196706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f06fbb48577defe7d7b222b6a05a98f?s=128&d=identicon&r=PG&f=1", "display_name": "juemura7", "link": "https://stackoverflow.com/users/11196706/juemura7"}, "edited": false, "score": 0, "creation_date": 1553113824, "post_id": 55269427, "comment_id": 97270424, "body": "My pleasure :) try a method call at a time and see what returns"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 351, "user_id": 11196706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f06fbb48577defe7d7b222b6a05a98f?s=128&d=identicon&r=PG&f=1", "display_name": "juemura7", "link": "https://stackoverflow.com/users/11196706/juemura7"}, "edited": false, "score": 0, "creation_date": 1553151892, "post_id": 55269427, "comment_id": 97280770, "body": "@jordantomiko accept this answer if he answers your question. There is a hollow tic at the left top which you need to click to accept the answer."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1553113037, "last_edit_date": 1553113037, "creation_date": 1553112722, "answer_id": 55269427, "question_id": 55269343, "link": "https://stackoverflow.com/questions/55269343/ruby-sorting-hashes-into-descending-order-by-value/55269427#55269427", "title": "Ruby - sorting hashes into descending order by value", "body": "<p>You are kinda mixing the sort and filtering out phases. My solution</p>\n\n<ol>\n<li>Filter results with <code>value &gt;= 60</code></li>\n<li>Sort for values (descending, <code>-v</code>)</li>\n<li><p>Extract the first element for every array (the language name)</p>\n\n<pre><code>def my_languages(results)\n  results.select { |k, v| v &gt;= 60 }.sort_by { |(k,v)| -v }.map(&amp;:first)\nend\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1553114885, "last_edit_date": 1553114885, "creation_date": 1553113422, "answer_id": 55269587, "question_id": 55269343, "link": "https://stackoverflow.com/questions/55269343/ruby-sorting-hashes-into-descending-order-by-value/55269587#55269587", "title": "Ruby - sorting hashes into descending order by value", "body": "<pre><code>h = { \"Java\" =&gt; 10, \"Ruby\" =&gt; 80, \"Python\" =&gt; 65 }\n\nh.select { |_,v| v &gt;= 60 }.\n  keys.\n  sort_by { |k| -h[k] }\n  #=&gt; [\"Ruby\", \"Python\"] \n</code></pre>\n\n<p>The steps are as follows.</p>\n\n<pre><code>g = h.select { |_,v| v &gt;= 60 }\n  #=&gt; {\"Ruby\"=&gt;80, \"Python\"=&gt;65} \na = g.keys\n  #=&gt; [\"Ruby\", \"Python\"] \na.sort_by { |k| -h[k] }\n  #=&gt; [\"Ruby\", \"Python\"] \n</code></pre>\n\n<p>If you don't care for <code>-h[k]</code> two alternative follow.</p>\n\n<pre><code>h.select { |_,v| v &gt;= 60 }.\n  keys.\n  sort_by { |k| h[k] }.\n  reverse\n</code></pre>\n\n<p>and</p>\n\n<pre><code>a = h.select { |_,v| v &gt;= 60 }.\n      keys\na.max_by(a.size) { |k| h[k] }\n</code></pre>\n\n<p>I doubt that one would notice any significant difference in performance among the three.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-max_by\" rel=\"nofollow noreferrer\">Enumerable#max_by</a>, <code>min_by</code>, <code>max</code> and <code>min</code> have been permitted to have an optional argument since Ruby v2.2.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 5561584, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/78348ff335fd54f82d1e15d201c8843f?s=128&d=identicon&r=PG", "display_name": "wbucko", "link": "https://stackoverflow.com/users/5561584/wbucko"}, "is_accepted": false, "score": 0, "last_activity_date": 1553182296, "creation_date": 1553182296, "answer_id": 55283995, "question_id": 55269343, "link": "https://stackoverflow.com/questions/55269343/ruby-sorting-hashes-into-descending-order-by-value/55283995#55283995", "title": "Ruby - sorting hashes into descending order by value", "body": "<p>To make it faster I would check minimum value when mapping:</p>\n\n<pre><code>hash = {\"Hindi\" =&gt; 60, \"Dutch\" =&gt; 93, \"Greek\" =&gt; 71}\n\nhash.sort.map { |arr| arr[0] if arr[1] &gt;= 60 }.compact\n\n# or imo cleaner\n\nhash.sort.select { |a| a[1] &gt;= 60 }.map(&amp;:first)\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 11196706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f06fbb48577defe7d7b222b6a05a98f?s=128&d=identicon&r=PG&f=1", "display_name": "juemura7", "link": "https://stackoverflow.com/users/11196706/juemura7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 55269427, "answer_count": 3, "score": 0, "last_activity_date": 1618317178, "creation_date": 1553112376, "question_id": 55269343, "link": "https://stackoverflow.com/questions/55269343/ruby-sorting-hashes-into-descending-order-by-value", "title": "Ruby - sorting hashes into descending order by value", "body": "<p>I'm trying to solve the following: </p>\n\n<p>\"You are given a dictionary/hash/object containing some languages and your test results in the given languages. Return the list of languages where your test score is at least 60, in descending order of the results.</p>\n\n<p>Examples: \n{\"Java\" => 10, \"Ruby\" => 80, \"Python\" => 65}  --> [\"Ruby\", \"Python\"]</p>\n\n<p>{\"Hindi\" => 60, \"Dutch\" => 93, \"Greek\" => 71} --> [\"Dutch\", \"Greek\", \"Hindi\"]</p>\n\n<p>{\"C++\" => 50, \"ASM\" => 10, \"Haskell\" => 20}   --> []</p>\n\n<p>I am having trouble sorting into descending order by results. Here is what I have so far</p>\n\n<pre><code>def my_languages(results)\narray = []\nresults.each { |a,b| \nresults.values.sort.reverse\nif b.to_i &gt;= 60\narray &lt;&lt; a\nend\n}\nreturn array\nend\n</code></pre>\n\n<p>Not the most elegant solution but I am a complete Ruby newbie (and Stack Overflow newbie too - sorry!) Any advice would be much appreciated!</p>\n"}, {"tags": ["ruby", "hex", "data-conversion", "french", "ruby-smpp"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1553112699, "post_id": 55268545, "comment_id": 97269850, "body": "What tells you it&#39;s UTF-16BE encoded (from someone who knows nothing of encoding)?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1553126878, "post_id": 55268545, "comment_id": 97275056, "body": "@CarySwoveland (1) because the values looked like <i>words</i> (0x00E0, 0x00E2, ...), i.e. 16-bit values, and (2) because 0xE0 (224) is the codepoint for <code>&#224;</code> in Unicode."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1553150368, "post_id": 55268545, "comment_id": 97280251, "body": "I see there&#39;s a lazy-person&#39;s way of answering my question: <code>Encoding.list.find { |e|  str.encode(&#39;UTF-8&#39;, e) == &quot;&#224;&#226;&#225;&#232;&#234;&#233;&#231;&quot; rescue nil } #=&gt; #&lt;Encoding:UTF-16BE&gt;</code>. See <a href=\"https://ruby-doc.org/core-2.2.0/Encoding.html\" rel=\"nofollow noreferrer\">Encoding#list</a>. Note: <code>Encoding.list.size #=&gt; 101</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1553159108, "post_id": 55268545, "comment_id": 97283875, "body": "@CarySwoveland I know that way ... quicker, easier, more seductive :-)"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1553109174, "creation_date": 1553109174, "answer_id": 55268545, "question_id": 55268427, "link": "https://stackoverflow.com/questions/55268427/ruby-hex-to-string-conversion-involving-french-characters/55268545#55268545", "title": "Ruby hex to string conversion involving French characters", "body": "<p>Looks like your string is UTF-16BE encoded:</p>\n\n<pre><code>str = \"\\u0000\\xE0\\u0000\\xE2\\u0000\\xE1\\u0000\\xE8\\u0000\\xEA\\u0000\\xE9\\u0000\\xE7\"\n\nstr.encode('UTF-8', 'UTF-16BE')\n#=&gt; \"\u00e0\u00e2\u00e1\u00e8\u00ea\u00e9\u00e7\"\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 4521541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ebcf80d30f790087dc59eae4d73b478?s=128&d=identicon&r=PG&f=1", "display_name": "jl118", "link": "https://stackoverflow.com/users/4521541/jl118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 55268545, "answer_count": 1, "score": 0, "last_activity_date": 1553109174, "creation_date": 1553108794, "question_id": 55268427, "link": "https://stackoverflow.com/questions/55268427/ruby-hex-to-string-conversion-involving-french-characters", "title": "Ruby hex to string conversion involving French characters", "body": "<p>This is related to ruby gem ruby-smpp, which I'm using for my project. </p>\n\n<p>I have a string of bytes <code>\\u0000\\xE0\\u0000\\xE2\\u0000\\xE1\\u0000\\xE8\\u0000\\xEA\\u0000\\xE9\\u0000\\xE7</code>. It represents the body of a message in French received (i.e. MO, or mobile-originating) message. The actual content of this message is <code>\u00e0\u00e2\u00e1\u00e8\u00ea\u00e9\u00e7</code>. Just wondering how to convert <code>\\u0000\\xE0\\u0000\\xE2\\u0000\\xE1\\u0000\\xE8\\u0000\\xEA\\u0000\\xE9\\u0000\\xE7</code> to <code>\u00e0\u00e2\u00e1\u00e8\u00ea\u00e9\u00e7</code> in Ruby. </p>\n\n<p>I've tried </p>\n\n<pre><code>[\"\\u0000\\xE0\\u0000\\xE2\\u0000\\xE1\\u0000\\xE8\\u0000\\xEA\\u0000\\xE9\\u0000\\xE7\"].pack('H*')\n\n=&gt; \"\\x00\\x02\\x01\\b\\n\\t\\a\"\n</code></pre>\n\n<p>and </p>\n\n<pre><code>['E0','E2','E1','E8', 'EA', 'E9', 'E7'].pack('H*')\n=&gt; \"\\xE0\"\n</code></pre>\n\n<p>Both are wrong.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "factory-bot"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1553160322, "post_id": 55268328, "comment_id": 97284451, "body": "Would it be sufficient to write: <code>FactoryBot.build(:user, [:active, :inactive].sample)</code>?"}, {"owner": {"reputation": 129, "user_id": 6586613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rqbx.jpg?s=128&g=1", "display_name": "Hugo Barthelemy", "link": "https://stackoverflow.com/users/6586613/hugo-barthelemy"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1553161332, "post_id": 55268328, "comment_id": 97284978, "body": "It works but you have to think about it every time you use the factory."}], "answers": [{"tags": [], "owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "is_accepted": false, "score": 0, "last_activity_date": 1553161801, "creation_date": 1553161801, "answer_id": 55277645, "question_id": 55268328, "link": "https://stackoverflow.com/questions/55268328/random-trait-with-factorybot/55277645#55277645", "title": "Random trait with FactoryBot", "body": "<p>Working on an eventual answer, I came across the fact that a <code>trait</code> execute only once the block it is given. I'll share the sample of code I was on for the time being, although if you test it, you will only have active users or inactive users, but not both.</p>\n\n<hr>\n\n<p>You could export the logic of your traits in two lambdas and then choose one by random:</p>\n\n<pre><code>trait_active = lambda do |context|\n    context.active { true }\n    #...\nend\ntrait_inactive = lambda do |context|\n    context.active { false }\n    # ...\nend\n\nFactoryBot.define do\n    factory :user do\n        trait :active do\n            trait_active.call(self)\n        end\n        trait :inactive do\n            trait_inactive.call(self)\n        end\n        trait :schrodinger do\n            [trait_active, trait_inactive].sample.call(self)\n        end\n    end\nend\n</code></pre>\n\n<p>The <code>context</code> attribute in the lambda is quite important here, you can see more\nabout that <a href=\"https://stackoverflow.com/a/7730767/6320039\">in this answer</a>.</p>\n"}], "owner": {"reputation": 129, "user_id": 6586613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rqbx.jpg?s=128&g=1", "display_name": "Hugo Barthelemy", "link": "https://stackoverflow.com/users/6586613/hugo-barthelemy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1553161801, "creation_date": 1553108395, "last_edit_date": 1553161548, "question_id": 55268328, "link": "https://stackoverflow.com/questions/55268328/random-trait-with-factorybot", "title": "Random trait with FactoryBot", "body": "<p>I would like to use FactoryBot to return trait randomly like that:</p>\n\n<pre><code>FactoryBot.define do\n  factory :user do\n\n    [:active, inactive].sample\n\n    trait :active do\n      active { true }\n      ...\n    end\n    trait :inactive do\n      active { false }\n      ...\n    end\n  end\nend\n</code></pre>\n\n<p>To do that:</p>\n\n<pre><code>(1..5).map{ |e| FactoryBot.build(:user) }.map(&amp;:active?)\n=&gt; [true, false, false, true, false]\n</code></pre>\n\n<p>Actually is like that:</p>\n\n<pre><code>FactoryBot.define do\n  factory :user do\n    active                    { [true, false].Sample }\n    name                      { \"name-#{SecureRandom.uuid}\" }\n    birthday                  { active == true ? rand(18..99).years.ago - rand(0..365).days.ago : nil }\n    preferred_contact_method  { active == true ? %w(phone email).sample : nil }\n    activated_at              { active == true ? rand(1..200).days.ago : nil }\n    contact_phone_number      { preferred_contact_method == \"phone\" ? \"+33XXXXXXXXX\" : nil }\n    contact_email             { preferred_contact_method == \"email\" ? \"toto@tati.com\" : nil }\n  end\nend\n</code></pre>\n\n<p>Is it possible to do that?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1553107937, "post_id": 55268109, "comment_id": 97267511, "body": "What are you trying to accomplish with the <code>[6,8,15]</code> syntax?"}, {"owner": {"reputation": 158, "user_id": 2334324, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/73d4019af69d424c0586a4e9c1cd8cec?s=128&d=identicon&r=PG", "display_name": "Mike D", "link": "https://stackoverflow.com/users/2334324/mike-d"}, "reply_to_user": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1553107986, "post_id": 55268109, "comment_id": 97267542, "body": "I&#39;m attempting to print any word. Let&#39;s say I wanted to print &quot;CHEESE&quot;"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1553108342, "post_id": 55268109, "comment_id": 97267696, "body": "It would be helpful if you could explain what, <i>precisely</i>, is unclear to you in the documentation of <code>Array#[]</code>. That way, the Ruby developers can improve the documentation so that future developers do not stumble on the same roadblocks that you did."}], "answers": [{"comments": [{"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1553108329, "post_id": 55268264, "comment_id": 97267693, "body": "I was going to suggest <code>[6,8,15].map{|i| alphabet[i]}.join</code>, but the <code>values_at</code> syntax is cleaner."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 4, "last_activity_date": 1553108179, "creation_date": 1553108179, "answer_id": 55268264, "question_id": 55268109, "link": "https://stackoverflow.com/questions/55268109/how-to-print-positions-in-array-index-in-ruby/55268264#55268264", "title": "How to print positions in array index in Ruby", "body": "<p><a href=\"http://ruby-doc.org/core-2.6.2/Array.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>Array#[]</code></a> is quite versatile. You can pass an index:</p>\n\n<pre><code>alphabet[6] #=&gt; \"G\"\n</code></pre>\n\n<p>an index and a length:</p>\n\n<pre><code>alphabet[6, 2] #=&gt; [\"G\", \"H\"]\n</code></pre>\n\n<p>or a range:</p>\n\n<pre><code>alphabet[6..8] #=&gt; [\"G\", \"H\", \"I\"]\n</code></pre>\n\n<p>If you want to fetch the values for multiple indices, there's <a href=\"http://ruby-doc.org/core-2.6.2/Array.html#method-i-values_at\" rel=\"nofollow noreferrer\"><code>values_at</code></a>:</p>\n\n<pre><code>alphabet.values_at(6, 8, 15)\n#=&gt; [\"G\", \"I\", \"P\"]\n</code></pre>\n\n<p>which also supports ranges:</p>\n\n<pre><code>alphabet.values_at(6..8, 15)\n#=&gt; [\"G\", \"H\", \"I\", \"P\"]\n</code></pre>\n\n<p>or repeating the same index:</p>\n\n<pre><code>alphabet.values_at(2, 7, 4, 4, 18, 4)\n#=&gt; [\"C\", \"H\", \"E\", \"E\", \"S\", \"E\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": true, "score": 3, "last_activity_date": 1553108510, "last_edit_date": 1553108510, "creation_date": 1553108186, "answer_id": 55268265, "question_id": 55268109, "link": "https://stackoverflow.com/questions/55268109/how-to-print-positions-in-array-index-in-ruby/55268265#55268265", "title": "How to print positions in array index in Ruby", "body": "<p>You can use <code>#values_at</code> to get the array's values at multiple indexes:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>alphabet = ('A'..'Z').to_a\nalphabet.values_at(2, 7, 4, 4, 18, 4).join\n\n#=&gt; \"CHEESE\"\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 158, "user_id": 2334324, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/73d4019af69d424c0586a4e9c1cd8cec?s=128&d=identicon&r=PG", "display_name": "Mike D", "link": "https://stackoverflow.com/users/2334324/mike-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 55268265, "answer_count": 2, "score": 0, "last_activity_date": 1553108510, "creation_date": 1553107621, "question_id": 55268109, "link": "https://stackoverflow.com/questions/55268109/how-to-print-positions-in-array-index-in-ruby", "title": "How to print positions in array index in Ruby", "body": "<p>I'm trying to assign a number to each letter of the alphabet and print strings using the numbers 0 through 25. </p>\n\n<p>Creating array: <code>alphabet = ('A'..'Z').to_a</code></p>\n\n<p>Printing array: <code>puts alphabet[6,8].join</code> gives me an output of <code>GHIJKLMN</code>, which is not what I was expecting. Expectation is for it to print: <code>GI</code></p>\n\n<p>Additionally, if I try: <code>puts alphabet[6,8,15].join</code> I get the following error: <code>wrong number of arguments (given 3, expected 1..2) (ArgumentError)</code></p>\n\n<p>I am using Ruby 2.3.1. What am I doing wrong?</p>\n"}, {"tags": ["swift", "ruby", "push-notification", "openssl", "apple-push-notifications"], "comments": [{"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 2, "creation_date": 1553103763, "post_id": 55266994, "comment_id": 97265392, "body": "The [swift] tag is for questions about the Swift programming language, not to \u201cattract Swift/iOS developers.\u201d"}], "answers": [{"tags": [], "owner": {"reputation": 28757, "user_id": 1066828, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8785d8636d0dc68405fee1e9aa41728a?s=128&d=identicon&r=PG", "display_name": "Fahim Parkar", "link": "https://stackoverflow.com/users/1066828/fahim-parkar"}, "is_accepted": true, "score": 2, "last_activity_date": 1553515822, "creation_date": 1553515822, "answer_id": 55337496, "question_id": 55266994, "link": "https://stackoverflow.com/questions/55266994/openssl-pkcs12-export-return-me-error-as-unable-to-load-certificates/55337496#55337496", "title": "openssl pkcs12 -export return me error as unable to load certificates", "body": "<p>Finally I found a solution.</p>\n\n<pre><code>openssl pkcs12 -export -in aps_development_identity.pem -inkey private_key_noenc.pem -name \"aps_development_identity\" -out aps_development_identity.p12\n</code></pre>\n\n<p>Just remove <code>-certfile CertificateSigningRequest.certSigningRequest</code> from last statement &amp; you are done.</p>\n"}, {"tags": [], "owner": {"reputation": 2619, "user_id": 119741, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d22ec8e3f4ca03090d3f3367ea30a734?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/119741/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1600620652, "creation_date": 1600620652, "answer_id": 63981437, "question_id": 55266994, "link": "https://stackoverflow.com/questions/55266994/openssl-pkcs12-export-return-me-error-as-unable-to-load-certificates/63981437#63981437", "title": "openssl pkcs12 -export return me error as unable to load certificates", "body": "<p>I got this error because there were spaces in my cer file that I coped and pasted from a website. When I retired with a file with no spaces it worked.</p>\n"}], "owner": {"reputation": 28757, "user_id": 1066828, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/8785d8636d0dc68405fee1e9aa41728a?s=128&d=identicon&r=PG", "display_name": "Fahim Parkar", "link": "https://stackoverflow.com/users/1066828/fahim-parkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3832, "favorite_count": 1, "accepted_answer_id": 55337496, "answer_count": 2, "score": 0, "last_activity_date": 1600620652, "creation_date": 1553103379, "last_edit_date": 1553506137, "question_id": 55266994, "link": "https://stackoverflow.com/questions/55266994/openssl-pkcs12-export-return-me-error-as-unable-to-load-certificates", "title": "openssl pkcs12 -export return me error as unable to load certificates", "body": "<p>Till date I used to follow below steps to create p12 file for push.</p>\n\n<pre><code>openssl x509 -in aps_development.cer -inform DER -out aps_development_identity.pem -outform PEM}\nopenssl pkcs12 -nocerts -out private_development_key.pem -in Certificates.p12\nopenssl rsa -out private_key_noenc.pem -in private_development_key.pem\nopenssl pkcs12 -export -in aps_development_identity.pem -inkey private_key_noenc.pem -certfile CertificateSigningRequest.certSigningRequest -name \"aps_development_identity\" -out aps_development_identity.p12\n</code></pre>\n\n<p>Note : I already have <code>aps_development.cer</code>, <code>Certificates.p12</code>, <code>CertificateSigningRequest.certSigningRequest</code> in my folder.</p>\n\n<p>However today I got error on executing last statement in terminal.</p>\n\n<p>After executing last sentence, I get error as below.</p>\n\n<pre><code>openssl pkcs12 -export -in aps_development_identity.pem -inkey private_key_noenc.pem -certfile CertificateSigningRequest.certSigningRequest -name \"aps_development_identity\" -out aps_development_identity.p12\n\nunable to load certificates --&gt; this is what I get in response\n</code></pre>\n\n<p>Till now I didn't get any error like this.</p>\n\n<p><strong><em>Any idea what I am missing.</em></strong></p>\n\n<p>I am tagging Swift as iOS developer might have faced this issue. So I just added Swift tag to bring them into this question.</p>\n\n<hr>\n\n<p>I just figured that this is happening due to I update the Ruby for pods.</p>\n\n<p>Any there anything updated in Ruby for this export?</p>\n"}, {"tags": ["ruby", "rubygems", "rubocop"], "answers": [{"tags": [], "owner": {"reputation": 3571, "user_id": 185310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/063c98fb1df33c7a4ea70a7d829f83c6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike K.", "link": "https://stackoverflow.com/users/185310/mike-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1553104928, "creation_date": 1553104928, "answer_id": 55267413, "question_id": 55266291, "link": "https://stackoverflow.com/questions/55266291/rubocop-installing-error-failed-to-build-gems/55267413#55267413", "title": "Rubocop installing error: Failed to build gems", "body": "<p>You need to install development headers for ruby 2.5, you don't have a development environment installed:</p>\n\n<p><code>sudo apt-get install ruby2.5-dev</code></p>\n\n<p>May also be called <code>-devel</code> depending on your packaging system.</p>\n"}], "owner": {"reputation": 185, "user_id": 9392631, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lRtgnHBjHoE/AAAAAAAAAAI/AAAAAAAAAB4/xMNhJB7V2oo/photo.jpg?sz=128", "display_name": "Estudeiro", "link": "https://stackoverflow.com/users/9392631/estudeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 55267413, "answer_count": 1, "score": 1, "last_activity_date": 1553104928, "creation_date": 1553101107, "question_id": 55266291, "link": "https://stackoverflow.com/questions/55266291/rubocop-installing-error-failed-to-build-gems", "title": "Rubocop installing error: Failed to build gems", "body": "<p>I'm currently having this problem when i try to install Rubocop(I can't install nokigiri either):</p>\n\n<pre><code>~$ sudo gem install rubocop\n\nBuilding native extensions. This could take a while...\nERROR:  Error installing rubocop:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /var/lib/gems/2.5.0/gems/jaro_winkler-1.5.2/ext/jaro_winkler\n/usr/bin/ruby2.5 -r ./siteconf20190320-24856-1cn9xqz.rb extconf.rb\nmkmf.rb can't find header files for ruby at /usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.5.0/gems/jaro_winkler-1.5.2 for inspection.\nResults logged to /var/lib/gems/2.5.0/extensions/x86_64-linux/2.5.0/jaro_winkler-1.5.2/gem_make.out\n</code></pre>\n\n<p>I've tried others solutions, but none worked.\nAnyone knows why i'm getting this error ?</p>\n\n<p>Thx</p>\n"}, {"tags": ["ruby", "fedena"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1553100971, "post_id": 55265974, "comment_id": 97263800, "body": "You&#39;ve installed a 32-bit ruby on a 64-bit machine. That&#39;s probably the first problem. Beyond that, ruby 1.8.7 is <b>OLD</b> and hasn&#39;t been supported in years ... I&#39;d wager  you may encounter a bunch more errors trying to run this on a modern Windows 10 operating system. If you really want to run this old project, you might be better off using a VM/container with a compatible old operating system."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1553101569, "post_id": 55265974, "comment_id": 97264157, "body": "I wonder why did you choose a version of Ruby that was retired almost <a href=\"https://www.ruby-lang.org/en/news/2013/06/30/we-retire-1-8-7/\" rel=\"nofollow noreferrer\">six years ago</a>? Why not a version that is up-to-date and maintained?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1553102218, "post_id": 55265974, "comment_id": 97264579, "body": "@spickermann Because they are trying to run an old project called <a href=\"https://projectfedena.org/install\" rel=\"nofollow noreferrer\"><code>fedena</code></a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1553107476, "post_id": 55265974, "comment_id": 97267287, "body": "Someone needs to update Fedena. That&#39;s getting dangerously out of date."}, {"owner": {"reputation": 15, "user_id": 9068800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0ff4d7db0196d8629db9eebd4a73f3d?s=128&d=identicon&r=PG", "display_name": "Emmanu", "link": "https://stackoverflow.com/users/9068800/emmanu"}, "edited": false, "score": 0, "creation_date": 1553130113, "post_id": 55265974, "comment_id": 97275735, "body": "Better to find another program to install. I give up. Thanks for the comments"}], "answers": [{"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": true, "score": 3, "last_activity_date": 1553103160, "last_edit_date": 1553103160, "creation_date": 1553101306, "answer_id": 55266373, "question_id": 55265974, "link": "https://stackoverflow.com/questions/55265974/ruby-1-8-7-rubyopt-runtimeerror/55266373#55266373", "title": "ruby 1.8.7 RUBYOPT (RuntimeError)", "body": "<p>My ancient manuals indicate that <code>-E</code> wasn't added until Ruby 1.9, hence the error message.  Source: page 38 of \"The Ruby Programming Language (Covers Ruby 1.8 and 1.9)\" (2008) by Flanagan &amp; Matsumoto.</p>\n"}], "owner": {"reputation": 15, "user_id": 9068800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0ff4d7db0196d8629db9eebd4a73f3d?s=128&d=identicon&r=PG", "display_name": "Emmanu", "link": "https://stackoverflow.com/users/9068800/emmanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 55266373, "answer_count": 1, "score": 0, "last_activity_date": 1553103160, "creation_date": 1553100087, "question_id": 55265974, "link": "https://stackoverflow.com/questions/55265974/ruby-1-8-7-rubyopt-runtimeerror", "title": "ruby 1.8.7 RUBYOPT (RuntimeError)", "body": "<p>Just installed ruby 1.8.7 in my win10 pc 64bit. When I open the cmd with ruby appear this error:</p>\n\n<pre><code>ruby 1.8.7 (2013-06-27 patchlevel 374) [i386-mingw32]\nruby.exe: illegal switch in RUBYOPT: -E (RuntimeError)\n</code></pre>\n\n<p>Installed in C:\\Ruby187</p>\n\n<p>How can I solve it? I need this version of ruby to install Fedena.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "production"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1553097002, "post_id": 55264313, "comment_id": 97261220, "body": "Your application crashes (throws an exception.)"}, {"owner": {"reputation": 128, "user_id": 7364356, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211349994530574/picture?type=large", "display_name": "Ivan Matas", "link": "https://stackoverflow.com/users/7364356/ivan-matas"}, "edited": false, "score": 0, "creation_date": 1553097016, "post_id": 55264313, "comment_id": 97277089, "body": "Have you tried <code>heroku restart</code> ? Also you could find more information here: <a href=\"https://stackoverflow.com/questions/13496827/heroku-deployment-error-h10-app-crashed\" title=\"heroku deployment error h10 app crashed\">stackoverflow.com/questions/13496827/&hellip;</a>"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1553097371, "post_id": 55264313, "comment_id": 97277090, "body": "yes i have done heroku restart a dozen times"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1553097487, "post_id": 55264313, "comment_id": 97277091, "body": "i checked on the link u sent and i tried the heroku  run rails console, and found an issue =&gt;  <code>rescue in spec&#39;: Specified &#39;sqlite3&#39; for database adapter, but the gem is not loaded. Add </code>gem &#39;sqlite3&#39;` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord). (Gem::LoadError)"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1553097544, "post_id": 55264313, "comment_id": 97277092, "body": "but i have the gem in my gem file. =&gt; this is it. and have bundle installed  =&gt; # Use sqlite3 as the database for Active Record group :development do \tgem &#39;sqlite3&#39; end gem &#39;jquery-rails&#39; group :production do   gem &#39;pg&#39;   gem &#39;rails_12factor&#39; end"}, {"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1553122332, "post_id": 55264313, "comment_id": 97273777, "body": "Please, provide your Gemfile"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "reply_to_user": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1553158124, "post_id": 55264313, "comment_id": 97283381, "body": "@NikitaMisharin   Gemfile =&gt; gem &#39;rails&#39;, &#39;~&gt; 5.1.6&#39;, &#39;&gt;= 5.1.6.2&#39; gem &#39;puma&#39;, &#39;~&gt; 3.7&#39; gem &#39;sass-rails&#39;, &#39;~&gt; 5.0&#39; gem &#39;uglifier&#39;, &#39;&gt;= 1.3.0&#39; gem &#39;coffee-rails&#39;, &#39;~&gt; 4.2&#39; gem &#39;turbolinks&#39;, &#39;~&gt; 5&#39; gem &#39;jbuilder&#39;, &#39;~&gt; 2.5&#39; group :development, :test do   gem &#39;byebug&#39;, platforms: [:mri, :mingw, :x64_mingw]   gem &#39;capybara&#39;, &#39;~&gt; 2.13&#39;   gem &#39;selenium-webdriver&#39; end"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1553158138, "post_id": 55264313, "comment_id": 97283392, "body": "group :development do   gem &#39;web-console&#39;, &#39;&gt;= 3.3.0&#39; end  gem &#39;tzinfo-data&#39;, platforms: [:mingw, :mswin, :x64_mingw, :jruby] group :development do \tgem &#39;sqlite3&#39; end  gem &#39;jquery-rails&#39; group :production do   gem &#39;pg&#39;   gem &#39;rails_12factor&#39; end"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1553098254, "post_id": 55265284, "comment_id": 97262089, "body": "$ heroku local [WARN] ENOENT: no such file or directory, open &#39;Procfile&#39; [OKAY] package.json file found - trying &#39;npm start&#39; [WARN] ENOENT: no such file or directory, open &#39;Procfile&#39; [OKAY] package.json file found - trying &#39;npm start&#39; 4:09:20 PM web.1 |  npm [DONE] Killing all processes with signal  SIGINT 4:09:20 PM web.1 |   ERR! missing script: start 4:09:20 PM web.1 |  npm ERR! A complete log of this run can be found in: 4:09:20 PM web.1 |  npm ERR!     C:\\Users\\User\\AppData\\Roaming\\npm-cache_logs\\2019-03-20T16_0&zwnj;&#8203;9_20_215Z-debug.log 4:09:20 PM web.1 Exited with exit code null"}, {"owner": {"reputation": 11, "user_id": 11177351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2eff2939880d2a2e025ad0ff9eaf72?s=128&d=identicon&r=PG&f=1", "display_name": "Michael C", "link": "https://stackoverflow.com/users/11177351/michael-c"}, "reply_to_user": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1553098855, "post_id": 55265284, "comment_id": 97262519, "body": "What&#39;s in your Procfile?"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1553099202, "post_id": 55265284, "comment_id": 97262749, "body": "@Micheal Callahan please i think i can&#39;t find the procfile in my app"}, {"owner": {"reputation": 11, "user_id": 11177351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2eff2939880d2a2e025ad0ff9eaf72?s=128&d=identicon&r=PG&f=1", "display_name": "Michael C", "link": "https://stackoverflow.com/users/11177351/michael-c"}, "reply_to_user": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1553102305, "post_id": 55265284, "comment_id": 97264620, "body": "It is in the root of your project, if you don&#39;t have one you&#39;ll have to create one. There is documentation at Heroku&#39;s Dev Center"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1553160625, "post_id": 55265284, "comment_id": 97284607, "body": "$heroku local 9:17:01 AM web.1 |  *** SIGUSR2 not implemented, signal based restart unavailable! 9:17:01 AM web.1 |  *** SIGUSR1 not implemented, signal based restart unavailable! 9:17:01 AM web.1 |  *** SIGHUP not implemented, signal based logs reopening unavailable! 9:17:01 AM web.1 |  Puma starting in single mode... 9:17:01 AM web.1 |  * Version 3.12.1 (ruby 2.3.3-p222), codename: Llamas in Pajamas 9:17:01 AM web.1 |  * Min threads: 5, max threads: 5 9:17:01 AM web.1 |  * Environment: development 9:17:05 AM web.1 |  * Listening on tcp://0.0.0.0:5000 9:17:05 AM web.1 |  Use Ctrl-C to stop"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1553162631, "post_id": 55265284, "comment_id": 97285704, "body": "Can someone please help me understand this?? i run                               $heroku ps Free dyno hours quota remaining this month: 945h 29m (94%) Free dyno usage for this app: 0h 4m (0%) For more information on dyno sleeping and how to upgrade, see: <a href=\"https://devcenter.heroku.com/articles/dyno-sleeping\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/dyno-sleeping</a>  === web (Free): bin/rails server -p $PORT -e $RAILS_ENV (1) web.1: crashed 2019/03/21 09:36:31 +0000 (~ 12m ago)"}], "tags": [], "owner": {"reputation": 11, "user_id": 11177351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be2eff2939880d2a2e025ad0ff9eaf72?s=128&d=identicon&r=PG&f=1", "display_name": "Michael C", "link": "https://stackoverflow.com/users/11177351/michael-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1553097934, "creation_date": 1553097934, "answer_id": 55265284, "question_id": 55264313, "link": "https://stackoverflow.com/questions/55264313/application-error-on-deployed-app-on-heroku/55265284#55265284", "title": "Application error on deployed app on heroku", "body": "<p>Try to run <code>heroku local</code> or <code>heroku run rails c</code>. The first command will try to run the server locally and the second will run the rails console on your heroku server. Both of them should crash because of the error that is causing your heroku app to fail to launch, but they should provide a more detailed explanation as to the cause. I have seen this error a couple times before and one time it was because I wasn't autoloading classes correctly, i.e <code>require 'devise</code> in <code>application.rb</code> and the other time it was because there was an error in a controller class name.</p>\n"}], "owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553450699, "creation_date": 1553095207, "question_id": 55264313, "link": "https://stackoverflow.com/questions/55264313/application-error-on-deployed-app-on-heroku", "title": "Application error on deployed app on heroku", "body": "<p>please help, i have no idea. I am getting this from my heroku logs.</p>\n\n<p>i am on ruby 2.3\nrails 5.1</p>\n\n<pre><code>2019-03-20T15:05:15.000000+00:00 app[api]: Build succeeded\n2019-03-20T15:05:53.943996+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=aqueous-reef-51265.herokuapp.com request_id=5c0b7d49-b20e-4469-a483-88093fd77f5e fwd=\"41.66.199.69\" dyno= connect= service= status=503 bytes= protocol=https\n2019-03-20T15:05:54.781463+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=aqueous-reef-51265.herokuapp.com request_id=de8a1df2-fc24-4e69-8b36-7cb1e92a73da fwd=\"41.66.199.69\" dyno= connect= service= status=503 bytes= protocol=https\n2019-03-20T15:05:58.794279+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=aqueous-reef-51265.herokuapp.com request_id=d53446ea-a1bd-474e-ad6c-ddf62b74689f fwd=\"41.66.199.69\" dyno= connect= service= status=503 bytes= protocol=https\n2019-03-20T15:05:59.021626+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=aqueous-reef-51265.herokuapp.com request_id=63bd925f-fc04-4169-94ce-d08afd620a57 fwd=\"41.66.199.69\" dyno= connect= service= status=503 bytes= protocol=https\n^CTerminate batch job (Y/N)? y\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1553088212, "post_id": 55261721, "comment_id": 97254895, "body": "What&#39;s your generated HTML? Maybe it&#39;s as simple as removing spaces around <code>=</code> in <code>style = &quot;color: green;&quot;</code>? BTW <code>ONLINE</code> for a column name goes against convention and I would personally not do this."}, {"owner": {"reputation": 97, "user_id": 11167484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AM-yop2gwj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdu0X6rBdmTknbmKIgFY5W7nJDKOQ/mo/photo.jpg?sz=128", "display_name": "Jordans", "link": "https://stackoverflow.com/users/11167484/jordans"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1553088374, "post_id": 55261721, "comment_id": 97254993, "body": "Il add the generated html now, and yeah I plan to refractor my columns once I go to production. For the style I tested it without the if statement and the field changes to Green"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1553088860, "post_id": 55261721, "comment_id": 97255314, "body": "What does <code>@book.ONLINE</code> return? Can you check it in the console?"}, {"owner": {"reputation": 97, "user_id": 11167484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AM-yop2gwj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdu0X6rBdmTknbmKIgFY5W7nJDKOQ/mo/photo.jpg?sz=128", "display_name": "Jordans", "link": "https://stackoverflow.com/users/11167484/jordans"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1553088987, "post_id": 55261721, "comment_id": 97255397, "body": "So when I check the console I get :                                                                           &gt;&gt;  @book.ONLINE =&gt; &quot;YES&quot;"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1553089027, "post_id": 55261721, "comment_id": 97255418, "body": "I suggest to not use inline style but a CSS class instead."}, {"owner": {"reputation": 97, "user_id": 11167484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AM-yop2gwj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdu0X6rBdmTknbmKIgFY5W7nJDKOQ/mo/photo.jpg?sz=128", "display_name": "Jordans", "link": "https://stackoverflow.com/users/11167484/jordans"}, "edited": false, "score": 0, "creation_date": 1553089222, "post_id": 55261721, "comment_id": 97255547, "body": "If I were to use a CSS class instead how would I fit it into the code I have?"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "edited": false, "score": 1, "creation_date": 1553089968, "post_id": 55261721, "comment_id": 97256077, "body": "Looks like condition does not trigger, what is value of <code>@book.ONLINE.inspect</code> and <code>@book.ONLINE.class.name</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1553090995, "post_id": 55261721, "comment_id": 97256809, "body": "My advise: stick to conventions, i.e. (a) don&#39;t use all-caps method names and (b) don&#39;t use strings as a replacement for booleans. Make that <code>online?</code> and have it return <code>true</code> or <code>false</code> \u2013 it will make your debugging life much easier. Plus, <code>&lt;% if @book.online? %&gt;</code> is much more succinct."}, {"owner": {"reputation": 97, "user_id": 11167484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AM-yop2gwj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdu0X6rBdmTknbmKIgFY5W7nJDKOQ/mo/photo.jpg?sz=128", "display_name": "Jordans", "link": "https://stackoverflow.com/users/11167484/jordans"}, "edited": false, "score": 1, "creation_date": 1553092085, "post_id": 55261721, "comment_id": 97257572, "body": "Thanks for the suggestions guys i took everything on board I ran a migration to change the field name as suggested by Marek and Stefan and the code works as expected now (Not really sure why this is the case). Thanks Stefan for pointing that out, that is a much cleaner way of doing it. Thanks everyone!"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 4783474, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2lkm56VLRMk/AAAAAAAAAAI/AAAAAAAAAgo/Rg9io6HSsw0/photo.jpg?sz=128", "display_name": "Tibor Kreiter", "link": "https://stackoverflow.com/users/4783474/tibor-kreiter"}, "is_accepted": false, "score": 0, "last_activity_date": 1553183749, "creation_date": 1553183749, "answer_id": 55284464, "question_id": 55261721, "link": "https://stackoverflow.com/questions/55261721/change-text-colour-based-on-a-instance-variable-value-in-view/55284464#55284464", "title": "Change text colour based on a instance variable value in view", "body": "<p>try this:</p>\n\n<pre><code>&lt;% if @book.online =='YES' %&gt;\n&lt;li&gt;&lt;p style=\"color: green;\"&gt;Book Online : &lt;%= @book.online %&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;% else %&gt;\n&lt;li&gt;&lt;p style=\"color: red;\"&gt;Book Online : &lt;%= @book.online %&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 11167484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AM-yop2gwj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdu0X6rBdmTknbmKIgFY5W7nJDKOQ/mo/photo.jpg?sz=128", "display_name": "Jordans", "link": "https://stackoverflow.com/users/11167484/jordans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553183749, "creation_date": 1553088028, "last_edit_date": 1553091322, "question_id": 55261721, "link": "https://stackoverflow.com/questions/55261721/change-text-colour-based-on-a-instance-variable-value-in-view", "title": "Change text colour based on a instance variable value in view", "body": "<p>I am trying to change the colour of a paragraph tag based on the value of an instance variable within my html.erb file. Problem I am having is that the colour of the text does not change and I am completely at a loss as to why this is the case, any help would be greatly appreciated!</p>\n\n<p><strong>show.html.erb</strong></p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;% if @book.ONLINE == 'YES' %&gt;\n  &lt;li&gt;&lt;p style=\"color: green;\"&gt;Book Online : &lt;%= @book.ONLINE %&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;% else %&gt;\n   &lt;li&gt;&lt;p&gt;Book Online : &lt;%= @book.ONLINE %&gt;&lt;/p&gt;&lt;/li&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>html output</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;ul class=\"container details\"&gt;\n   &lt;!-- Book Status --&gt;\n   &lt;li&gt;&lt;p&gt;Book Online : YES&lt;/p&gt;&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>Note : When I take the <code>if</code> statement out the text changes to green</p>\n\n<p>When I check the console I get</p>\n\n<pre><code>@book.ONLINE #=&gt; \"YES\"\n</code></pre>\n"}, {"tags": ["ruby", "oauth-2.0", "bing", "bing-api"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1553088224, "post_id": 55261620, "comment_id": 97254900, "body": "Are you following <a href=\"https://docs.microsoft.com/en-us/azure/cognitive-services/bing-web-search/quickstarts/ruby\" rel=\"nofollow noreferrer\">this</a> documentation? Which part is not working?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1553089143, "post_id": 55261620, "comment_id": 97255490, "body": "Please share your code and elaborate on <i>can&#39;t get past the first step</i>. Is there an error, what does the error message say? What is your problem exactly?"}, {"owner": {"reputation": 1353, "user_id": 256234, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9c877363185e5f88c09aa28140c1a770?s=128&d=identicon&r=PG", "display_name": "JoshL", "link": "https://stackoverflow.com/users/256234/joshl"}, "edited": false, "score": 0, "creation_date": 1553100758, "post_id": 55261620, "comment_id": 97263660, "body": "Sorry everyone - I wasn&#39;t clear.  I am looking for help with the Bing ADS Api 2.0.  <a href=\"https://docs.microsoft.com/en-us/bingads/guides/get-started?view=bingads-12\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/bingads/guides/&hellip;</a>  If anyone has any code samples, please let me know"}], "answers": [{"comments": [{"owner": {"reputation": 1353, "user_id": 256234, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9c877363185e5f88c09aa28140c1a770?s=128&d=identicon&r=PG", "display_name": "JoshL", "link": "https://stackoverflow.com/users/256234/joshl"}, "edited": false, "score": 0, "creation_date": 1553100775, "post_id": 55262909, "comment_id": 97263672, "body": "Sorry I meant Bing Ads API 2.0 not the Bing API"}], "tags": [], "owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "is_accepted": false, "score": 1, "last_activity_date": 1553091372, "creation_date": 1553091372, "answer_id": 55262909, "question_id": 55261620, "link": "https://stackoverflow.com/questions/55261620/any-examples-of-using-ruby-and-the-bing-ads-api-v2-0/55262909#55262909", "title": "Any examples of using Ruby and the Bing Ads API v2.0?", "body": "<p>Maybe your <code>accessKey</code> is wrong? Alternatively you could do something like:</p>\n\n<pre><code>require 'open-uri'\nrequire 'nokogiri'\n\npage = Nokogiri::HTML(open(\"https://www.bing.com/search?q=#{query}\").read)\npage.css('... a ...').each do |link|\n  puts link[\"href\"]\n  puts link.text\nend\n</code></pre>\n\n<p>For instance, please not that while simple, open-uri is not safe when dealing with user input.</p>\n"}], "owner": {"reputation": 1353, "user_id": 256234, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9c877363185e5f88c09aa28140c1a770?s=128&d=identicon&r=PG", "display_name": "JoshL", "link": "https://stackoverflow.com/users/256234/joshl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1572382878, "answer_count": 1, "score": 0, "last_activity_date": 1553101102, "creation_date": 1553087714, "last_edit_date": 1553100797, "question_id": 55261620, "link": "https://stackoverflow.com/questions/55261620/any-examples-of-using-ruby-and-the-bing-ads-api-v2-0", "closed_reason": "Not suitable for this site", "title": "Any examples of using Ruby and the Bing Ads API v2.0?", "body": "<p>I'm trying to decode the ridiculously awful documentation for everything from Auth to making requests with the Bing Ads API v2.0 and getting no where.  None of the Oauth 2.0 requests resolve so I can't get past the first step.</p>\n\n<p>Does ANYONE have any example code or guidance?  All I'm trying to do is make a simple reporting query to pull my daily spends!</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "tags", "aws-sdk", "vpc"], "owner": {"reputation": 57, "user_id": 10711591, "user_type": "registered", "profile_image": "https://graph.facebook.com/1033039915/picture?type=large", "display_name": "Igor Igorito", "link": "https://stackoverflow.com/users/10711591/igor-igorito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1553088494, "creation_date": 1553085528, "last_edit_date": 1553088494, "question_id": 55260987, "link": "https://stackoverflow.com/questions/55260987/ruby-how-to-tag-existing-aws-vpc", "title": "Ruby: how to tag existing AWS VPC", "body": "<p>I need to tag existing AWS VPC with custom tag for some purpose.</p>\n\n<p>I found out how to tag VPC when creating it, but nothing about tagging existing VPC.</p>\n\n<p>Objects that I have at disposal in existing code are EC2, RDS and autoscaling groups (and their attributes of course), so instead tagging all instances and RDSs, I would like to tag their VPC.</p>\n\n<p>edit: got it, here it is if someone needs it, I filter VPCs by environment tag ('tag:environment') and environment_filter_list contains full name of environment(s) e.g. dev01-eu-west-1</p>\n\n<pre><code>ec2 = Aws::EC2::Client.new(region: 'eu-west-1', retry_limit: 10, retry_jitter: :full, retry_base_delay: 5)\n\nvpc_response = ec2.describe_vpcs(filters:[{ name: 'tag:environment', values: environment_filter_list }])\n\nvpc_id = vpc_response.data.vpcs[0].vpc_id\n\n#when you have multiple environments in filter list, you should instead of previous line iterate like this and put tag for each vpc id in vpc_hash:\n    #vpc_hash = {}\n    #vpc_response.data.vpcs.each do |vpc|\n      #vpc_name = name_from_tag(vpc)\n      #vpc_hash[vpc.vpc_id] = vpc_name if vpc_name\n    #end\n\nresp = ec2.create_tags({\n  resources: [\n    vpc_id,\n  ],\n  tags: [\n    {\n      key: \"StopDate\",\n      value: \"20190321\",\n    },\n  ],\n})\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "smtp", "sendgrid"], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1553085699, "post_id": 55260529, "comment_id": 97253365, "body": "Interesting, thanks for pointing out that I should move verification to my model. As for the payload, etc. I don&#39;t quite understand what you mean by that. I&#39;m not sure how to even format or implement the code from their API. Unless it really is just copy and paste, but I doubt that."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "edited": false, "score": 0, "creation_date": 1553086340, "post_id": 55260529, "comment_id": 97253770, "body": "Will advice you to go through the api examples to know how you can make it work in your use case. Can&#39;t help by spoonfeeding the entire answer. First step may be to play with api examples"}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": false, "score": 0, "last_activity_date": 1553084038, "creation_date": 1553084038, "answer_id": 55260529, "question_id": 55260182, "link": "https://stackoverflow.com/questions/55260182/how-to-automatically-add-newsletter-signups-to-your-contacts/55260529#55260529", "title": "How to automatically add newsletter signups to your contacts", "body": "<p>You should use ActiveRecord's <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow noreferrer\"><code>after_create</code></a> hook do achieve this. These hooks/callbacks are called on different events. The method you specify in <code>after_create</code> will be called when a new record is successfully created.</p>\n\n<p>It can look like this:</p>\n\n<pre><code>class Newsletter &lt; ApplicationRecord\n  after_create :send_newsletter\n  after_create :add_to_sendgrid\n\n  def send_newsletter\n    send_verification_email # remove from controller\n  end\n\n  def add_to_sendgrid\n    # Create the payload and send the request to sendgrid from here\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553086923, "creation_date": 1553082908, "last_edit_date": 1553086923, "question_id": 55260182, "link": "https://stackoverflow.com/questions/55260182/how-to-automatically-add-newsletter-signups-to-your-contacts", "title": "How to automatically add newsletter signups to your contacts", "body": "<p>After reading the <a href=\"https://sendgrid.com/docs/API_Reference/Web_API_v3/Marketing_Campaigns/contactdb.html#Add-Single-Recipient-POST\" rel=\"nofollow noreferrer\">SendGrid API</a>, <strong>I don't know where to put the code</strong> they provide to actually add the newsletter signups to the online contacts list automatically, instead of manually copying each one from my DB.</p>\n\n<blockquote>\n  <p><strong>Add Single Recipient [POST]</strong></p>\n  \n  <p><em>Request</em></p>\n  \n  <p><code>POST https://api.sendgrid.com/v3/contactdb/recipients HTTP/1.1</code></p>\n  \n  <p><em>Request Body</em></p>\n</blockquote>\n\n<pre><code>[\n  {\n    \"email\": \"example@example.com\",\n    \"last_name\": \"Jones\",\n     \"pet\": \"Fluffy\",\n    \"age\": 25\n  }\n]\n</code></pre>\n\n<p>I have a Model called <code>Newsletter</code> and I am able to get users added to my app's DB and a verification email sent/confirmed via:</p>\n\n<pre><code>&lt;%= simple_form_for @newsletter, url: newsWelcome_path do |f| %&gt;\n  &lt;%= f.input :name, label: false, placeholder: \"First Name\", class: \"form-control\" %&gt;\n  &lt;%= f.input :email, label: false, placeholder: \"Email Address\", class: \"form-control\" %&gt;\n  &lt;%= f.button :submit, \"Sign up!\", class: \"submit btn btn-block btn-info\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here is the newsletterController:</p>\n\n<pre><code>def new\n  @newsletter = Newsletter.new\n  set_meta_tags noindex: true\nend\n\ndef create\n  @newsletter = Newsletter.new(news_params)\n  if @newsletter.save\n    @newsletter.send_verification_email\n    flash[:info] = \"Please check your email for verification, Thanks!\"\n    redirect_to newsWelcome_path\n  else\n    flash[:warning] = \"Oops! We couldn't send the verifiaction email, please try again!\"\n    redirect_back fallback_location: root_path\n  end\nend\n\n...\n\nprivate\n\n  def news_params\n    params.require(:newsletter).permit(:name, :email)\n  end\n</code></pre>\n\n<p><strong>Do I need to put this in my environment files, newsletterController, Model, or what?</strong></p>\n\n<p>I have read <a href=\"https://stackoverflow.com/questions/34513857/rails-how-to-add-contacts-to-sendgrid-marketing-campaigns-via-api\">this question</a> but it still leaves me with the question of where this all goes.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ldap"], "comments": [{"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 0, "creation_date": 1553100467, "post_id": 55257515, "comment_id": 97263482, "body": "As you are new to Ruby the two things that helped me the most were <code>binding.pry</code> and <code>inspect</code>. You can do <code>puts result.inspect</code> and it will give you a dump of information on result. <code>binding.pry</code> will let you enter your code anywhere you put it, you will need to have <code>pry</code> installed as well. IMO you should always use <code>pry</code> over the default ruby console. <a href=\"https://pryrepl.org/\" rel=\"nofollow noreferrer\">pryrepl.org</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1553091636, "creation_date": 1553091636, "answer_id": 55263008, "question_id": 55257515, "link": "https://stackoverflow.com/questions/55257515/why-ldap-bind-is-failing-on-server/55263008#55263008", "title": "Why ldap bind is failing on server?", "body": "<p>Maybe that account is not authorized? Sounds like the problem is in the binding configuration: <code>base =&gt; \"OU=Users,OU=XX,DC=XX,DC=XX,DC=XX\"</code></p>\n\n<p>More information from other users who encountered this error:</p>\n\n<ul>\n<li><a href=\"https://gitlab.com/gitlab-org/gitlab-ce/issues/21937\" rel=\"nofollow noreferrer\">https://gitlab.com/gitlab-org/gitlab-ce/issues/21937</a></li>\n<li><a href=\"https://stackoverflow.com/questions/35631524/ldap-groups-authentication-fails-invalid-binding-information\">LDAP groups authentication fails: Invalid Binding Information</a></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 1722974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66a8863b1429d3113c1051cfd4049f3?s=128&d=identicon&r=PG", "display_name": "Remi Pou", "link": "https://stackoverflow.com/users/1722974/remi-pou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553155662, "creation_date": 1553074319, "last_edit_date": 1553155662, "question_id": 55257515, "link": "https://stackoverflow.com/questions/55257515/why-ldap-bind-is-failing-on-server", "title": "Why ldap bind is failing on server?", "body": "<p>I'm authenticating against LDAP server in my rails application,\nthe code below is working locally but not on the server.</p>\n\n<p>On the server it throws <code>Net::LDAP::BindingInformationInvalidError (Invalid binding information)</code> when trying to login in the app but <strong>works through the console</strong></p>\n\n<p>I'm pretty new to Ruby and can't figure out the proper way to debug it... I know the LDAP configuration is right because i can authenticate and bind from the console or on my local development environment.. I tried to pass <code>:verbose =&gt; true</code> to the LDAP constructor but without effect...</p>\n\n<pre><code>require 'net/ldap'\nrequire 'devise/strategies/authenticatable'\n\nmodule Devise\n  module Strategies\n    class LdapAuthenticatable &lt; Authenticatable\n      def authenticate!\n        if params[:user]\n          ldap = Net::LDAP.new :host =&gt; 'XX.XX.XX.XX',\n            :port =&gt; 636,\n            :connect_timeout =&gt; 5,\n            :base =&gt; 'CN=Configuration,DC=internal,DC=XX,DC=XX',\n            :encryption =&gt; {\n                :method =&gt; :simple_tls\n            },\n            :auth =&gt; {\n              :method =&gt; :simple,\n              :username =&gt; ENV['LDAP_USER'],\n              :password =&gt; ENV['LDAP_PASSWORD']\n            }\n\n          result = ldap.bind_as(:base =&gt; \"OU=Users,OU=XX,DC=XX,DC=XX,DC=XX\",\n                              :filter =&gt; \"(userPrincipalName=#{email})\",\n                              :password =&gt; password,\n          )\n\n          if result\n            user = User.find_by(email: email)\n            success!(user)\n          else\n            return fail(:invalid_login)\n          end\n        end\n      end\n\n      def email\n        params[:user][:email]\n      end\n\n      def password\n        params[:user][:password]\n      end\n\n    end\n  end\nend\n\nWarden::Strategies.add(:ldap_authenticatable, Devise::Strategies::LdapAuthenticatable)\n</code></pre>\n\n<hr>\n\n<h2>SOLVED</h2>\n\n<p>turned out it was the ENV variables that were not read.</p>\n"}, {"tags": ["arrays", "ruby", "sorting"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1553074753, "post_id": 55257371, "comment_id": 97246625, "body": "It is not space operator, it&#39;s spaceship operator. Space does not look like <code>&lt;=&gt;</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1553074999, "post_id": 55257371, "comment_id": 97246783, "body": "&quot;[W]hen the space operator returns 0, every element would stay in the original position&quot;--What does this follow from?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1553076960, "post_id": 55257371, "comment_id": 97248051, "body": "You could&#39;ve used <code>0</code> instead of <code>1 &lt;=&gt; 1</code>, so this is not because of the spaceship operator."}, {"owner": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1553137151, "post_id": 55257371, "comment_id": 97277241, "body": "@sawa Because I think Ruby would swap the elements when 1 is returned as the result of spaceship operator. That&#39;s why I think Ruby would leave element alone when it sees 0 or -1. Is my concept correct?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "edited": false, "score": 0, "creation_date": 1553138018, "post_id": 55257604, "comment_id": 97277443, "body": "That makes me be confused again. If the comparison is 0, how to make the array be the same when two objects regarded as the same? (when two objects are regarded as the same object by some attribute)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "edited": false, "score": 0, "creation_date": 1553178651, "post_id": 55257604, "comment_id": 97295329, "body": "@Wilson.Wang there is already another question asking how to make the sort stable. I closed this question as a duplicate."}, {"owner": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "edited": false, "score": 0, "creation_date": 1553223631, "post_id": 55257604, "comment_id": 97313344, "body": "Got it. Thanks for the updating and that question also helps me. Many thanks."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 9, "last_activity_date": 1553074599, "creation_date": 1553074599, "answer_id": 55257604, "question_id": 55257371, "link": "https://stackoverflow.com/questions/55257371/custom-sort-using-spaceship-operator-in-ruby/55257604#55257604", "title": "Custom sort using spaceship operator in ruby", "body": "<p>Your assumption about how the sorting works is incorrect. As per <a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-sort\" rel=\"noreferrer\">the documentation</a> <code>#sort</code> is not stable:</p>\n\n<blockquote>\n  <p>The result is not guaranteed to be stable. When the comparison of two elements returns 0, the order of the elements is unpredictable.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "edited": false, "score": 0, "creation_date": 1553223883, "post_id": 55257656, "comment_id": 97313391, "body": "Thanks for your answer, now I know that making the comparison always returning 0 value would result in unpredictable result, and there should always be something to compared. Thanks."}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 4, "last_activity_date": 1553076491, "last_edit_date": 1553076491, "creation_date": 1553074774, "answer_id": 55257656, "question_id": 55257371, "link": "https://stackoverflow.com/questions/55257371/custom-sort-using-spaceship-operator-in-ruby/55257656#55257656", "title": "Custom sort using spaceship operator in ruby", "body": "<p>How it works</p>\n\n<pre><code>myArray = [2, 1, 7, 9, 3, 8, 0]\n\nmyArray.sort { |a, b| a &lt;=&gt; b }\n#=&gt; [0, 1, 2, 3, 7, 8, 9]\n\nmyArray.sort { |a, b| b &lt;=&gt; a }\n#=&gt; [9, 8, 7, 3, 2, 1, 0]\n</code></pre>\n\n<p>If result of comparsion is always <code>0</code> it's impossible to sort elements. That is quite logical.</p>\n\n<p>However, the documentation explicitly states that the order of the elements is <strong>unpredictable</strong> in this case. That's why the result is different from the old array.</p>\n\n<p>However, I replicated your situation in Ruby 2.5.1 and it returns old array</p>\n\n<pre><code>myArray = [2, 1, 7, 9, 3, 8, 0]\nmyArray.sort { |a, b| 1 &lt;=&gt; 1 }\n#=&gt; [2, 1, 7, 9, 3, 8, 0]\n</code></pre>\n\n<p>There's also a misunderstanding in your code. You wrote</p>\n\n<pre><code>myArray #=&gt; [9, 1, 7, 2, 3, 8, 0]\n</code></pre>\n\n<p>But in fact <code>Array#sort</code> doesn't change array, only <code>Array#sort!</code> does it.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "edited": false, "score": 0, "creation_date": 1553142048, "post_id": 55258389, "comment_id": 97278245, "body": "Thanks for the answer.  And I&#39;ve updated my question, looking forward to any advise. Thank you."}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "edited": false, "score": 0, "creation_date": 1553161484, "post_id": 55258389, "comment_id": 97285072, "body": "@Wilson.Wang see updated answer"}, {"owner": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "edited": false, "score": 0, "creation_date": 1553167081, "post_id": 55258389, "comment_id": 97288211, "body": "Thank you for your detailed explanation, and that makes me learn more idea. However I found something that I am still not clear:"}, {"owner": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "edited": false, "score": 0, "creation_date": 1553167323, "post_id": 55258389, "comment_id": 97288350, "body": "In Method2,  if a.status == b.status, it will compare the created_time, and that&#39;s where I am stuck now. Because I thought myObjects was sorted already by created_time, I place x&lt;=&gt;y (x and y depends on object&#39;s status, so  x equals to y )in my code, indicating two statuses are identical, and that seems to be the problem that cause the unexpected result? When encountering same status, is it necessary to compare another thing(like created_time in your example) instead of just using two identical integer which returns 0 as the result?"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "edited": false, "score": 0, "creation_date": 1553169851, "post_id": 55258389, "comment_id": 97289736, "body": "@Wilson.Wang yes, when sorting - you may think of previous array state as random and describe your desired end state"}, {"owner": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "edited": false, "score": 0, "creation_date": 1553223552, "post_id": 55258389, "comment_id": 97313328, "body": "Got it. Very appreciate your detailed explanation and your help!"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 7, "last_activity_date": 1553161441, "last_edit_date": 1553161441, "creation_date": 1553077199, "answer_id": 55258389, "question_id": 55257371, "link": "https://stackoverflow.com/questions/55257371/custom-sort-using-spaceship-operator-in-ruby/55258389#55258389", "title": "Custom sort using spaceship operator in ruby", "body": "<p><code>Array#sort</code> uses Quicksort algorithm, which is not stable and can produce this behaviour when elements are \"equal\".</p>\n\n<p>Reason is in choosing and moving <em>pivot</em> element at every step, ruby implementation seems to choose pivot at middle for this case (but it can be chosen differently).</p>\n\n<p>This is what happens in your example:</p>\n\n<ol>\n<li>pivot is chosen at element <code>9</code> at middle of array</li>\n<li>now algorithm ensures that items on left of pivot are less than it and items on the right are greater or equal, because all are \"equal\" - this makes everything to be in <em>right</em> part</li>\n<li>now recursively repeat for <em>left</em>(this is always empty in this case) and <em>right</em> partitions</li>\n<li>result is <code>sorted_left + [pivot] + sorted_right</code>, left is empty thus pivot is moved</li>\n</ol>\n\n<p><a href=\"https://ruby-doc.com/core/Array.html#method-i-sort\" rel=\"nofollow noreferrer\">Ruby core documentation</a> mentions this:</p>\n\n<blockquote>\n  <p>When the comparison of two elements returns 0, the order of the elements is unpredictable.</p>\n</blockquote>\n\n<p>Also spaceship operator <code>&lt;=&gt;</code> does not play any role here, you could just call <code>myArray.sort{0}</code> for the same effect.</p>\n\n<h2>Update:</h2>\n\n<p>From updated question it's clear that you want to sort by two attributes, this can be done several ways:</p>\n\n<p>Method1: you can invent a metric/key that takes both values into account and sort by it:</p>\n\n<pre><code> status_order = { 'success' =&gt; 1, 'failed' =&gt; 2, 'pending' =&gt; 3 }\n myObjects.sort_by{|o| \"#{status_order[o.status]}_#{o.created_time}\" }\n</code></pre>\n\n<p>This is not very optimal in terms of extreme performance, but is shorter.</p>\n\n<p>Method2: implicit composite key by writing comparison rule like this:</p>\n\n<pre><code>status_order = { 'success' =&gt; 1, 'failed' =&gt; 2, 'pending' =&gt; 3 }\nstatus_order.default = 0\n\nmyObjects.sort{|a,b|\n  if a.status == b.status\n    a.created_time &lt;=&gt; b.created_time\n  else\n    status_order[a.status] &lt;=&gt; status_order[b.status]\n  end\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7755445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed9cf66c432290fb2974942e4399002?s=128&d=identicon&r=PG&f=1", "display_name": "Wilson.Wang", "link": "https://stackoverflow.com/users/7755445/wilson-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "closed_date": 1553178609, "accepted_answer_id": 55258389, "answer_count": 3, "score": 4, "last_activity_date": 1553161441, "creation_date": 1553073884, "last_edit_date": 1553141322, "question_id": 55257371, "link": "https://stackoverflow.com/questions/55257371/custom-sort-using-spaceship-operator-in-ruby", "closed_reason": "Duplicate", "title": "Custom sort using spaceship operator in ruby", "body": "<p>I am implementing a custom sort. There is the spaceship operator <code>&lt;=&gt;</code> to deal with sorting an array:</p>\n\n<pre><code>myArray.sort { |a, b| a &lt;=&gt; b }\n</code></pre>\n\n<ul>\n<li><code>a &lt;=&gt; b</code> returns <code>1</code> when <code>b</code> is larger than <code>a</code>, and the two elements are swapped.</li>\n<li><code>a &lt;=&gt; b</code> returns <code>0</code> when <code>a</code> equals to <code>b</code>, and the two elements stay in the original position.</li>\n<li><code>a &lt;=&gt; b</code> returns <code>-1</code> when <code>a</code> is less than <code>b</code>, and the two element stay in the original position.</li>\n</ul>\n\n<p>So I tested with an example:</p>\n\n<pre><code>myArray = [2, 1, 7, 9, 3, 8, 0]\nmyArray.sort { |a, b| 1 &lt;=&gt; 1 } # making it always return 0\n#=&gt; [9, 1, 7, 2, 3, 8, 0]\n</code></pre>\n\n<p>The result is not what I expect. In my expectation, when the spaceship operator returns <code>0</code>, every element would stay in the original position. Since the spaceship operator always returns <code>0</code> in the example above, the array should remain as is. However, the result is different from the original array.</p>\n\n<p>Is there something I misunderstand?</p>\n\n<p><strong>Updated:</strong></p>\n\n<p>Following was the idea where my question above came from.\nOriginally I was trying to order objects by their attributes(Let's assume the attribute is <code>status</code>). </p>\n\n<p>For example</p>\n\n<pre><code>myObjects = [obj1, obj2,..., objn] # the objects are ordered by create_time already\n\nmyObjects.sort{|a,b|\n    case a.status\n        when 'failed'\n            x = 1\n        when 'success'\n            x = 0\n        when 'pending'\n            x = -1\n     end\n\n     case b.status\n        when 'failed'\n            y = 1\n        when 'success'\n            y = 0\n        when 'pending'\n            y = -1\n     end\n\n     x &lt;=&gt; y  # compare two objects (a and b) by the status \n}\n</code></pre>\n\n<p><code>myObjects</code> is ordered by <code>created_time</code> already, but I want to sort it again by each object's <code>status</code>.</p>\n\n<p>For instance, </p>\n\n<p>Two objects with the same <code>created time</code>(only taking hours and minutes into consideration here, just ignoring seconds) will be sorted again by their status, making objects with <code>failed</code> status be put at the end of the array.</p>\n\n<p>The <code>x</code> and <code>y</code> value in the code above will depend on the object's status,\nand <code>x</code> <code>y</code> are compared to decide the order. If the statuses of two objects are equal (<code>x == y</code>), the elements should stay in the same position because they are sorted by <code>created_time</code> already, no needs to sort them again.</p>\n\n<p>When the status of two objects are both <code>success</code>, <code>x &lt;=&gt; y</code> will return <code>0</code>. \nBut according to some comments, the comparison value <code>0</code> returned by the spaceship operator seems to output unpredictable order.\nWhat if <code>myObjects</code> contains elements all with the <strong>same status</strong>? It would cause the spaceship operator returns 0 all the time since <code>x == y</code>.</p>\n\n<p>In my expectation, <code>myObjects</code> should remain the same order since the statuses are all the same, how should I correct when using the spaceship operator in my case?</p>\n\n<p>Many thanks to everyone's help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1553070098, "post_id": 55255973, "comment_id": 97244145, "body": "Have you checked that your config/environment/development.rb doesn&#39;t override the <code>active_job.queue_adapter</code>?"}, {"owner": {"reputation": 505, "user_id": 9182617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KUJN.png?s=128&g=1", "display_name": "Whooper", "link": "https://stackoverflow.com/users/9182617/whooper"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1553070682, "post_id": 55255973, "comment_id": 97244416, "body": "That was exactly the problem! Thanks! :) On a side note, while I was trying to explore for solutions earlier, I tried to set up a sidekiq:worker via <code>rails generate sidekiq:worker random_vehicle_generator</code>. I just used the same code for the perform and when I tried it, the jobs get queued properly. I am just quite curious why that worked despite having the overridden queue_adapter in my <code>development.rb</code>."}], "answers": [{"tags": [], "owner": {"reputation": 505, "user_id": 9182617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KUJN.png?s=128&g=1", "display_name": "Whooper", "link": "https://stackoverflow.com/users/9182617/whooper"}, "is_accepted": true, "score": 1, "last_activity_date": 1553070820, "creation_date": 1553070820, "answer_id": 55256466, "question_id": 55255973, "link": "https://stackoverflow.com/questions/55255973/job-in-rails-is-being-executed-inline-despite-setting-queue-adapter-to-sidekiq/55256466#55256466", "title": "Job in rails is being executed :inline despite setting queue_adapter to :sidekiq", "body": "<p>It turned out that my <code>active_job.queue_adapter</code> has been overridden by my <code>config/environment/development.rb</code> as pointed out above by @max pleaner. I just removed the <code>active_job.queue_adapter = :inline</code> and it fixed my problem! :)</p>\n"}], "owner": {"reputation": 505, "user_id": 9182617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KUJN.png?s=128&g=1", "display_name": "Whooper", "link": "https://stackoverflow.com/users/9182617/whooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 55256466, "answer_count": 1, "score": 1, "last_activity_date": 1553070820, "creation_date": 1553068784, "question_id": 55255973, "link": "https://stackoverflow.com/questions/55255973/job-in-rails-is-being-executed-inline-despite-setting-queue-adapter-to-sidekiq", "title": "Job in rails is being executed :inline despite setting queue_adapter to :sidekiq", "body": "<p>I was exploring different tutorials on how to set-up and use sidekiq to execute process in the background. I decided to follow <a href=\"https://www.driftingruby.com/episodes/sidekiq-basics#show_notes\" rel=\"nofollow noreferrer\">this tutorial</a> and follow everything exactly. However, when I start trying to execute the job, nothing is being added in my sidekiq queue and the job executes inline.</p>\n\n<p>Like in the tutorial, I was expecting that every time I try to execute the job, it should reflect in my sidekiq however when I do that, it stays like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dQ8MY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dQ8MY.png\" alt=\"enter image description here\"></a></p>\n\n<p>while my rails server executes the job itself\n<a href=\"https://i.stack.imgur.com/D6vrQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D6vrQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here are the codes in the necessary files needed as shown in the tutorial:</p>\n\n<p>My Gemfile:</p>\n\n<pre><code># Gemfile.rb\n\nsource 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby '2.6.0'\n\ngem 'rails', '~&gt; 5.2.2'\ngem 'sqlite3'\ngem 'puma', '~&gt; 3.11'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.2'\ngem 'turbolinks', '~&gt; 5'\ngem 'jbuilder', '~&gt; 2.5'\ngem 'semantic-ui-sass', github: 'doabit/semantic-ui-sass'\ngem 'slim-rails'\ngem 'chartkick'\ngem 'groupdate'\ngem 'faker', :git =&gt; 'https://github.com/stympy/faker.git', :branch =&gt; 'master'\n\ngem 'rest-client'\ngem 'devise', '~&gt; 4.6', '&gt;= 4.6.1'\ngem 'sidekiq'\ngem 'bootsnap', '&gt;= 1.1.0', require: false\n\ngroup :development, :test do\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\nend\n\ngroup :development do\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\ngroup :test do\n  gem 'capybara', '&gt;= 2.15'\n  gem 'selenium-webdriver'\n  gem 'chromedriver-helper'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n\n</code></pre>\n\n<p>My job:</p>\n\n<pre><code>#generate_random_vehicle_job.rb\n\nclass GenerateRandomVehicleJob &lt; ApplicationJob\n  queue_as :default\n\n  def perform(*args)\n    detected_vehicle = DetectedVehicle.new\n    detected_vehicle.detection_time = Faker::Date.between(30.days.ago, Date.today)\n    detected_vehicle.license_plate_text = Faker::Vehicle.license_plate\n    detected_vehicle.camera_id = rand(1..Camera.count)\n    #detected_vehicle = DetectedVehicle.create(detection_time: date, camera_id: camera_id, license_plate_text: license_plate)\n    detected_vehicle.license_plate_image.attach(io: File.open(Rails.root.join('public', 'sample_plate.png')), filename: 'sample_plate.png', content_type: 'image/png')\n    detected_vehicle.vehicle_image.attach(io: File.open(Rails.root.join('public', 'sample_vehicle.jpg')), filename: 'sample_vehicle.jpg', content_type: 'image/jpeg')\n    detected_vehicle.video_footage_snippet.attach(io: File.open(Rails.root.join('public', 'sample_video.mp4')), filename: 'sample_video.mp4', content_type: 'video/mp4')\n    sleep 2\n  end\nend\n</code></pre>\n\n<p>My application.rb:</p>\n\n<pre><code># config/application.rb\nrequire_relative 'boot'\n\nrequire 'rails/all'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule CatchAllApp\n  class Application &lt; Rails::Application\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.2\n    config.active_job.queue_adapter = :sidekiq \n\n    # No need to run sidekiq and redis server in development\n    #config.active_job.queue_adapter = Rails.env.production? ? :sidekiq : :async\n\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration can go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded after loading\n    # the framework and any gems in your application.\n  end\nend\n</code></pre>\n\n<p>My sidekiq.rb</p>\n\n<pre><code># config/initializers/sidekiq.rb\n\nSidekiq.configure_server do |config|\n    config.redis = { url: 'redis://localhost:6379/0' }\nend\n\nSidekiq.configure_client do |config|\n    config.redis = { url: 'redis://localhost:6379/0' }\nend\n</code></pre>\n\n<p>And finally, my controller:</p>\n\n<pre><code>  def create_random_vehicle\n    GenerateRandomVehicleJob.perform_later\n    redirect_to root_path\n  end\n</code></pre>\n\n<p>I am sure that my redis-server, rails server, and sidekiq are all up and running properly.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "hash"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1553071895, "post_id": 55255383, "comment_id": 97245010, "body": "Please show what you have already tried. SO is not a service to write the code for you for free."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1553072110, "post_id": 55255383, "comment_id": 97245125, "body": "Also, it\u2019s unclear why the expected output has the date <code>Jan 1, 2019</code>, where hours come from. Also, your input is an invalid ruby."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1553072384, "post_id": 55255383, "comment_id": 97245259, "body": "@AlekseiMatiushkin I have updated the question. Kindly take a look. Jan 1, 2019 is a static date value."}], "answers": [{"comments": [{"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1553076177, "post_id": 55257414, "comment_id": 97247582, "body": "Which variable has the final result? I don&#39;t see an expected output when I print input variable?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 1, "creation_date": 1553076373, "post_id": 55257414, "comment_id": 97247693, "body": "The result was returned by a clause I posted. I expected you to be able to assign it to the variable yourself. I have updated the answer."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1553076601, "post_id": 55257414, "comment_id": 97247846, "body": "I am able to get the result now."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1553076863, "last_edit_date": 1553076863, "creation_date": 1553074016, "answer_id": 55257414, "question_id": 55255383, "link": "https://stackoverflow.com/questions/55255383/transformation-on-hash-to-csv-in-custom-format-in-ruby-on-rails/55257414#55257414", "title": "Transformation on hash to csv in custom format in Ruby on Rails", "body": "<p>First transform your input:</p>\n\n<pre><code>result =\n  input.group_by do |hash|\n    hash[\"Date Hour\"].split.last\n  end.values.map do |arr|\n    arr.each_with_object({}) do |h, acc|\n      acc[\"Date\"] ||= \"2019-01-01\"\n      acc[\"Date Hour\"] ||= h[\"Date Hour\"].split.last\n      acc[Date.iso8601(h[\"Date\"]).strftime('%b-%d')] = h[\"Price\"]\n    end\n  end\n\n#\u21d2 [{\"Date\"=&gt;\"2019-01-01\", \"Date Hour\"=&gt;\"00:00\", \"Mar-18\"=&gt;\"14\", \"Mar-19\"=&gt;\"16\"},\n#   {\"Date\"=&gt;\"2019-01-01\", \"Date Hour\"=&gt;\"01:00\", \"Mar-18\"=&gt;\"13\", \"Mar-19\"=&gt;\"10\"},\n#   {\"Date\"=&gt;\"2019-01-01\", \"Date Hour\"=&gt;\"02:00\", \"Mar-18\"=&gt;\"14\", \"Mar-19\"=&gt;\"11\"},\n#   {\"Date\"=&gt;\"2019-01-01\", \"Date Hour\"=&gt;\"03:00\", \"Mar-18\"=&gt;\"19\", \"Mar-19\"=&gt;\"14\"},\n#   {\"Date\"=&gt;\"2019-01-01\", \"Date Hour\"=&gt;\"04:00\", \"Mar-18\"=&gt;\"28\", \"Mar-19\"=&gt;\"26\"},\n#   {\"Date\"=&gt;\"2019-01-01\", \"Date Hour\"=&gt;\"05:00\", \"Mar-18\"=&gt;\"24\", \"Mar-19\"=&gt;\"22\"},\n#   {\"Date\"=&gt;\"2019-01-01\", \"Date Hour\"=&gt;\"06:00\", \"Mar-18\"=&gt;\"21\", \"Mar-19\"=&gt;\"25\"}]\n</code></pre>\n\n<p>Now just spit it out to CSV.</p>\n\n<hr>\n\n<p>Shameless plug: one might use <a href=\"https://github.com/am-kantox/see_as_vee\" rel=\"nofollow noreferrer\"><code>SeeAsVee</code></a> gem to produce a CSV file out of an array of hashes:</p>\n\n<pre><code>require 'see_as_vee'\nSeeAsVee.csv result\n#\u21d2 #&lt;File:/tmp/am/see_as_vee20190320-10403-ub0p5y.csv&gt;\n</code></pre>\n"}], "owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 55257414, "answer_count": 1, "score": 1, "last_activity_date": 1553076863, "creation_date": 1553066337, "last_edit_date": 1553072336, "question_id": 55255383, "link": "https://stackoverflow.com/questions/55255383/transformation-on-hash-to-csv-in-custom-format-in-ruby-on-rails", "title": "Transformation on hash to csv in custom format in Ruby on Rails", "body": "<p>I want to convert hash to csv with custom format in Ruby on Rails.</p>\n\n<p>Input hash:</p>\n\n<pre><code> [{\"Date\"=&gt;\"2019-03-18\", \"Date Hour\"=&gt;\"2019-03-18 00:00\", \"Price\"=&gt;\"14\"}, {\"Date\"=&gt;\"2019-03-18\", \"Date Hour\"=&gt;\"2019-03-18 01:00\", \"Price\"=&gt;\"13\"}, {\"Date\"=&gt;\"2019-03-18\", \"Date Hour\"=&gt;\"2019-03-18 02:00\", \"Price\"=&gt;\"14\"}, {\"Date\"=&gt;\"2019-03-18\", \"Date Hour\"=&gt;\"2019-03-18 03:00\", \"Price\"=&gt;\"19\"}, {\"Date\"=&gt;\"2019-03-18\", \"Date Hour\"=&gt;\"2019-03-18 04:00\", \"Price\"=&gt;\"28\"}, {\"Date\"=&gt;\"2019-03-18\", \"Date Hour\"=&gt;\"2019-03-18 05:00\", \"Price\"=&gt;\"24\"}, {\"Date\"=&gt;\"2019-03-18\", \"Date Hour\"=&gt;\"2019-03-18 06:00\", \"Price\"=&gt;\"21\"}, \n {\"Date\"=&gt;\"2019-03-19\", \"Date Hour\"=&gt;\"2019-03-19 00:00\", \"Price\"=&gt;\"16\"}, {\"Date\"=&gt;\"2019-03-19\", \"Date Hour\"=&gt;\"2019-03-19 01:00\", \"Price\"=&gt;\"10\"}, {\"Date\"=&gt;\"2019-03-19\", \"Date Hour\"=&gt;\"2019-03-19 02:00\", \"Price\"=&gt;\"11\"}, {\"Date\"=&gt;\"2019-03-19\", \"Date Hour\"=&gt;\"2019-03-19 03:00\", \"Price\"=&gt;\"14\"}, {\"Date\"=&gt;\"2019-03-19\", \"Date Hour\"=&gt;\"2019-03-19 04:00\", \"Price\"=&gt;\"26\"}, {\"Date\"=&gt;\"2019-03-19\", \"Date Hour\"=&gt;\"2019-03-19 05:00\", \"Price\"=&gt;\"22\"},\n{\"Date\"=&gt;\"2019-03-19\", \"Date Hour\"=&gt;\"2019-03-19 06:00\", \"Price\"=&gt;\"25\"}\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>Date,Date Hour,Mar-18,Mar-19\n2019-01-01,00:00,14,16\n2019-01-01,01:00,13,10\n2019-01-01,02:00,14,11\n2019-01-01,03:00,19,14\n2019-01-01,04:00,28,26\n2019-01-01,05:00,24,22\n2019-01-01,06:00,21,25\n</code></pre>\n\n<p>Currently input hash has 2 dates, it may contains multiple date values. Based on the above input, I want to build the csv with above expected output?</p>\n\n<p>How can I get the above expected output?</p>\n\n<p>Update: Here is my code. But my code only works for single day of data. How can I enhance it if its for multiple days of data in input csv?</p>\n\n<pre><code># Convert csv to hash\n rows = CSV.parse(response, headers: true).map(&amp;:to_h)\n\n# Add transformation in hash\n    rows.each do |hash|\n      # Remove Hour from Date Hour values\n      hash[\"Date Hour\"] = hash[\"Date Hour\"].gsub!(hash[\"Date\"], \"\").strip\n      # Replace Price column name with date value (e.g Mar-19)\n      hash[Date.parse(hash[\"Date\"]).strftime(\"%b-%d\")] = hash.delete(\"Price\")\n      # Set static Date\n      hash[\"Date\"] = \"2019-01-01\"\n    end\n\n# Convert hash to csv\n\n    # Extract column names from first row of data\n    column_names = rows.first.keys\n    # Generate CSV after transformation of csv\n    csv_response = CSV.generate do |csv|\n      csv &lt;&lt; column_names\n      rows.each do |row|\n        # Extract values for row of data\n        csv &lt;&lt; row.values_at(*column_names)\n      end\n    end\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "rails-activestorage"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1553065593, "post_id": 55254969, "comment_id": 97242231, "body": "You will still need the original file if you want to render different sizes for example when you slightly change your layout later on."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1553065946, "post_id": 55254969, "comment_id": 97242370, "body": "I think the idea is it caches each size you need. If you want to replace the image on S3 you&#39;d probably have to write your own code for that."}], "answers": [{"tags": [], "owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "is_accepted": false, "score": 1, "last_activity_date": 1553133155, "last_edit_date": 1553133155, "creation_date": 1553092438, "answer_id": 55263286, "question_id": 55254969, "link": "https://stackoverflow.com/questions/55254969/rails-active-storage-variant-generates-an-additional-file/55263286#55263286", "title": "Rails: Active Storage variant generates an additional file", "body": "<p>If you want to replace the originals with the variants, I think the best way is to resize the image before it's uploaded.</p>\n\n<p>e.g. Using <code>params[:user][:avatar]</code> to find the path of the temp file, run ffmpeg on it (there are gems for it) and then upload the result.</p>\n\n<p>Alternatively you could do processing on the image in job after it's uploaded:</p>\n\n<ul>\n<li>In your model that has image (<code>User</code>), add an <code>after_create :resize_image</code></li>\n<li>Then a <code>resize_image</code> method with <code>ImagesJob.resize(self).perform_later</code></li>\n<li>Then in your ImagesJob class (<code>resize(user)</code> method), you would:\n\n<ul>\n<li>Generate the variant: <code>url = user.avatar.variant(resize: \"100x100\").url</code> (Rails's generated URL, not the S3 one)</li>\n<li>Fetch the image: <code>image = open(url).read</code> (<code>require 'open-uri'</code> needed)</li>\n<li>Find the variant's S3 URL, delete it, find the original image url, delete it (you need to go throught the <code>ActiveStorage::Blob</code> (<code>active_storage_blobs</code> table) for that.</li>\n<li>Upload <code>image</code> as the new image <code>user.avatar.attach(StringIO.new(image)); user.save</code></li>\n</ul></li>\n</ul>\n\n<p>(Not tested but probably quite close)</p>\n"}], "owner": {"reputation": 21, "user_id": 10773439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fea698d92e0b8f7ccdb1dc8c10598cd?s=128&d=identicon&r=PG&f=1", "display_name": "Murgiuf", "link": "https://stackoverflow.com/users/10773439/murgiuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1577, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553237970, "creation_date": 1553064486, "last_edit_date": 1553237970, "question_id": 55254969, "link": "https://stackoverflow.com/questions/55254969/rails-active-storage-variant-generates-an-additional-file", "title": "Rails: Active Storage variant generates an additional file", "body": "<p>So after reading the official documentations, I'm using the Active Storage variant this way</p>\n\n<pre><code>&lt;%= image_tag user.avatar.variant(resize: \"100x100\") %&gt;\n</code></pre>\n\n<p>The problem is that when I look at my S3 storage I notice that I have the original file (for example a size 22kb) and the variant file which contains a 2kb file (the resized one).</p>\n\n<p>I know in the documentation says:</p>\n\n<blockquote>\n  <p>..\"When the browser hits the variant URL, Active Storage will lazily\n  transform the original blob into the specified format and redirect to\n  its new service location.\"</p>\n</blockquote>\n\n<p>But is there a way to prevent Active Storage to generate an additional variant file? Like making the variant one, the original. So instead of 24kb of resurces in the S3 I have only 2kb.</p>\n\n<p>Much thanks!</p>\n\n<p>EDIT:</p>\n\n<p>I manage to solve the issue applying some answers, If anyone comes accross this:</p>\n\n<pre><code>def resize_avatar2\n\n  avatar_f = avatar.last\n  if avatar_f.nil?\n    return\n  end\n\n  resized_image = MiniMagick::Image.read(avatar_f.download)\n  resized_image = resize_with_crop(resized_image, 300, 300)\n  v_filename = avatar_f.filename\n  v_content_type = avatar_f.content_type\n  avatar.all.each { |imagen| imagen.purge }\n\n  avatar.attach(\n    io: File.open(resized_image.path),\n    filename: v_filename,\n    content_type: v_content_type)\nend\n</code></pre>\n\n<p>Create a helper, include it with this methods:</p>\n\n<pre><code>    def resize_with_nocrop(image, w, h)\n\n    w_original = image[:width].to_f\n    h_original = image[:height].to_f\n\n    if (w_original*h != h_original * w)\n      if w_original*h &gt;= h_original * w\n        # long width\n        w_result = w\n        h_result = w_result * (h_original / w_original)\n      elsif w_original*h &lt;= h_original * w\n        # long height\n        h_result = h\n        w_result = h_result * (w_original / h_original)\n      end\n    else\n       # good proportions\n       h_result = h\n       w_result = w\n    end\n\n    #\n    image.resize(\"#{w_result}x#{h_result}\")\n    return image\n  end\n\n  def resize_with_crop(img, w, h, options = {})\n  gravity = options[:gravity] || :center\n\n  w_original, h_original = [img[:width].to_f, img[:height].to_f]\n\n  op_resize = ''\n\n  # check proportions\n  if w_original * h &lt; h_original * w\n    op_resize = \"#{w.to_i}x\"\n    w_result = w\n    h_result = (h_original * w / w_original)\n  else\n    op_resize = \"x#{h.to_i}\"\n    w_result = (w_original * h / h_original)\n    h_result = h\n  end\n\n  w_offset, h_offset = crop_offsets_by_gravity(gravity, [w_result, h_result], [ w, h])\n\n  img.combine_options do |i|\n    i.resize(op_resize)\n    i.gravity(gravity)\n    i.crop \"#{w.to_i}x#{h.to_i}+#{w_offset}+#{h_offset}!\"\n  end\n\n  img\nend\n\nGRAVITY_TYPES = [ :north_west, :north, :north_east, :east, :south_east, :south, :south_west, :west, :center ]\ndef crop_offsets_by_gravity(gravity, original_dimensions, cropped_dimensions)\n  raise(ArgumentError, \"Gravity must be one of #{GRAVITY_TYPES.inspect}\") unless GRAVITY_TYPES.include?(gravity.to_sym)\n  raise(ArgumentError, \"Original dimensions must be supplied as a [ width, height ] array\") unless original_dimensions.kind_of?(Enumerable) &amp;&amp; original_dimensions.size == 2\n  raise(ArgumentError, \"Cropped dimensions must be supplied as a [ width, height ] array\") unless cropped_dimensions.kind_of?(Enumerable) &amp;&amp; cropped_dimensions.size == 2\n\n  original_width, original_height = original_dimensions\n  cropped_width, cropped_height = cropped_dimensions\n\n  vertical_offset = case gravity\n    when :north_west, :north, :north_east then 0\n    when :center, :east, :west then [ ((original_height - cropped_height) / 2.0).to_i, 0 ].min\n    when :south_west, :south, :south_east then (original_height - cropped_height).to_i\n  end\n\n  horizontal_offset = case gravity\n    when :north_west, :west, :south_west then 0\n    when :center, :north, :south then [ ((original_width - cropped_width) / 2.0).to_i, 0 ].min\n    when :north_east, :east, :south_east then (original_width - cropped_width).to_i\n  end\n\n  return [ horizontal_offset, vertical_offset ]\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "sonarqube"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1553070192, "post_id": 55254476, "comment_id": 97244192, "body": "Do you have code to generate the report? You can call whatever code you want from tests."}, {"owner": {"reputation": 1, "user_id": 8096453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebafd96da03fc7b909c28fd8494b5c32?s=128&d=identicon&r=PG&f=1", "display_name": "Narayan Hasyagar", "link": "https://stackoverflow.com/users/8096453/narayan-hasyagar"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1553073441, "post_id": 55254476, "comment_id": 97245864, "body": "Yes ,I have a sample ruby file containing test cases and i have successfully generated code coverage report for the program using Simplecov was accepted by sonar but i don&#39;t seem to find anything similar to that for the unit test execution report needed for sonar.I hope that was the question that you asked."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1553106105, "post_id": 55254476, "comment_id": 97266558, "body": "I have no idea what is the format Sonar needs. I added the Sonarkube tag to the question. If you know where there are docs for it, it would be useful to link them in the question."}, {"owner": {"reputation": 1, "user_id": 8096453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebafd96da03fc7b909c28fd8494b5c32?s=128&d=identicon&r=PG&f=1", "display_name": "Narayan Hasyagar", "link": "https://stackoverflow.com/users/8096453/narayan-hasyagar"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1553146143, "post_id": 55254476, "comment_id": 97279090, "body": "<a href=\"https://docs.sonarqube.org/latest/analysis/generic-test/\" rel=\"nofollow noreferrer\">docs.sonarqube.org/latest/analysis/generic-test</a> This is the link for the format the sonar will accept , listed under generic execution."}], "owner": {"reputation": 1, "user_id": 8096453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebafd96da03fc7b909c28fd8494b5c32?s=128&d=identicon&r=PG&f=1", "display_name": "Narayan Hasyagar", "link": "https://stackoverflow.com/users/8096453/narayan-hasyagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553106048, "creation_date": 1553061839, "last_edit_date": 1553106048, "question_id": 55254476, "link": "https://stackoverflow.com/questions/55254476/is-there-a-way-to-generate-sonar-generic-test-execution-report-from-ruby-rspec-u", "title": "Is there a way to generate sonar generic test execution report from Ruby Rspec unit test execution result on my local machine for a ruby project?", "body": "<p>Since Sonarqube doesn't support ruby test execution report by default, i need a way to manually generate the generic test execution report that Sonarqube will accept, on my local machine during execution of the rspec unit tests.   The xml report can be given as input during the execution of sonar-scanner .</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "friendly-id"], "comments": [{"owner": {"reputation": 482, "user_id": 3609100, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6fte8.png?s=128&g=1", "display_name": "Krzysztof Witczak", "link": "https://stackoverflow.com/users/3609100/krzysztof-witczak"}, "edited": false, "score": 0, "creation_date": 1553069461, "post_id": 55254299, "comment_id": 97243865, "body": "1. Restart the server, 2. Open <code>rails c</code> and see if you can get this item with <code>Listing.friendly.find(&#39;listing-test-1&#39;)</code>"}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1553078925, "post_id": 55254299, "comment_id": 97249198, "body": "Do you have <code>set_listing</code> in a <code>before_action</code> ?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 482, "user_id": 3609100, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/6fte8.png?s=128&g=1", "display_name": "Krzysztof Witczak", "link": "https://stackoverflow.com/users/3609100/krzysztof-witczak"}, "edited": false, "score": 0, "creation_date": 1553108669, "post_id": 55254299, "comment_id": 97267848, "body": "@KrzysztofWitczak yes, i did that and it does work that way."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1553108694, "post_id": 55254299, "comment_id": 97267858, "body": "@MikeHeft Yes, I tried removing that as well and then i get an error about the <code>@order = @listing.orders.new()</code> line"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1553108805, "post_id": 55254299, "comment_id": 97267911, "body": "I noticed after the migration is creates a friednly_id schema.  Nothing is being inputted into this schema, is it supposed to?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1553113086, "post_id": 55254299, "comment_id": 97270063, "body": "The only way I have it working is to do <code>@listing = Listing.find_by(name: params[:name])</code> in the show...but with that, whats the point of friendly_id ? Not sure what the issue is here.   any inputs?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1553113428, "post_id": 55254299, "comment_id": 97270226, "body": "It also works with: <code>@listing = Listing.friendly.find(params[:name])</code> but then nothing is validated through the <code>:id</code> which sort of defeats using friendly id"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1553149692, "post_id": 55254299, "comment_id": 97280031, "body": "Any follow up on this? What could possibly be interfering with this working? error: <code>ActiveRecord::RecordNotFound (Couldn&#39;t find Listing with &#39;id&#39;=listing-test-1):</code>"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1553060894, "creation_date": 1553060894, "question_id": 55254299, "link": "https://stackoverflow.com/questions/55254299/friendly-id-not-working-as-expected-for-models-show-any-ways-around-this", "title": "Friendly ID not working as expected for models Show. Any ways around this?", "body": "<p><strong>Issue:</strong> I have installed the friendly_id gem, it is working how it supposed to for my Users table, but for my Listings model, the friendly URL to use a :name instead of :id isn't working.</p>\n\n<p>Here's my Listings controller in a nutshell:</p>\n\n<pre><code>    def show\n        @order = @listing.orders.new()\n#as you can see, I have no need for a find because i noticed i didn't need it for the show page to show up correctly - idk\n    end\n\n    private\n\n    def set_listing\n          @listing = Listing.find(params[:id])\n    end\n</code></pre>\n\n<p>Tried using <code>Listing.friendly.find(params[:id])</code> in the set listing as well, and in the <code>def show</code>.</p>\n\n<p>What's confusing to me is that I don't even need something like <code>@listing=Listing.find(params[:id])</code></p>\n\n<p>I tried using this in the show: <code>@listing=Listing.friendly.find(params[:id]</code></p>\n\n<p>but it didn't make a difference. I also tried changing the \"set_listing\" method to include the friendly snippet but that didn't help either - just a shot even though it shouldn't work.</p>\n\n<p>I included this in the model - just like i did for my Users table:</p>\n\n<pre><code>extend FriendlyId\nfriendly_id :name, use: :slugged\n</code></pre>\n\n<p>For example, I have my listing, id: 1, name: Listing Test 1, slug: listing-test-1</p>\n\n<p>I go to domain.com/listings/listing-test-1 and I get</p>\n\n<p>Couldn't find Listing with 'id'=listing-test-1</p>\n\n<p>I did everything the same as I did with the Users table but it doesn't seem to work.</p>\n\n<p><strong>Question:</strong> Is the fact that I don't call the @listing in the show the issue? If so, is there other ways around this?\n It is important that I call the name instead of the ID</p>\n"}, {"tags": ["ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1553060649, "post_id": 55253539, "comment_id": 97240456, "body": "This code loads the whole CSV into memory, which is unacceptable in many use-cases. One should never load the whole file while streaming is an option."}, {"owner": {"reputation": 2328, "user_id": 3340588, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Pd3kv.jpg?s=128&g=1", "display_name": "knh190", "link": "https://stackoverflow.com/users/3340588/knh190"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1553062230, "post_id": 55253539, "comment_id": 97240965, "body": "@AlekseiMatiushkin you&#39;re right, your solution is better."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1553062383, "post_id": 55253539, "comment_id": 97241016, "body": "It might be achieved with <code>CSV</code> as well, you just don\u2019t need to load the whole file into memory (that said, get rid of <code>transpose</code>.) Read headers, change them, and pass everything else through."}], "tags": [], "owner": {"reputation": 2328, "user_id": 3340588, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Pd3kv.jpg?s=128&g=1", "display_name": "knh190", "link": "https://stackoverflow.com/users/3340588/knh190"}, "is_accepted": false, "score": 0, "last_activity_date": 1553055546, "creation_date": 1553055546, "answer_id": 55253539, "question_id": 55253339, "link": "https://stackoverflow.com/questions/55253339/how-do-i-map-one-csv-to-another-with-ruby/55253539#55253539", "title": "how do I map one csv to another with ruby", "body": "<p>If you want to substitute CSV column names, here it is:</p>\n\n<pre><code>require 'csv'\n\n# [[\"one\", \"two\", \"three\"], [\"1\", \"2\", \"3\"], [\"4\", \"5\", \"6\"]]\ncsv = CSV.read('data.csv')\n\n# new keys\nks = ['k1', 'k2', 'k3']\n\n# [[\"k1\", \"k2\", \"k3\"], [\"1\", \"2\", \"3\"], [\"4\", \"5\", \"6\"]]\nk = csv.transpose.each_with_index.map do |x,i|\n  x[0] = ks[i]\n  x\nend.transpose\n\n# write new file\nCSV.open(\"myfile.csv\", \"w\") do |csv|\n  k.each do |row|\n    csv &lt;&lt; row\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1553061375, "creation_date": 1553061375, "answer_id": 55254385, "question_id": 55253339, "link": "https://stackoverflow.com/questions/55253339/how-do-i-map-one-csv-to-another-with-ruby/55254385#55254385", "title": "how do I map one csv to another with ruby", "body": "<p>People tend to overcomplicate things. You don\u2019t need any CSV processing at all to substitute headers.</p>\n\n<pre><code>$ cat /tmp/src.csv\none,two,three\n1,2,3\n4,5,6\n</code></pre>\n\n<p>Let\u2019s substitute the headers and <em>stream</em> everything else untouched.</p>\n\n<pre><code>subst = {\"one\" =&gt; \"ONE\", \"two\" =&gt; \"TWO\", \"three\" =&gt; \"THREE\"}\nsrc, dest = %w[/tmp/src.csv /tmp/dest.csv].map { |f| File.new f, \"a+\" }\nheaders = src.readline() # read just headers\ndest.write(headers.gsub(/\\b(#{Regexp.union(subst.keys)})\\b/, )) # write headers\nIO.copy_stream(src, dest, -1, headers.length) # stream the rest\n[src, dest].each(&amp;:close)\n</code></pre>\n\n<p>Check it:</p>\n\n<pre><code>$ cat /tmp/dest.csv\nONE,TWO,THREE\n1,2,3\n4,5,6\n</code></pre>\n"}], "owner": {"reputation": 3657, "user_id": 339427, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ya18f.jpg?s=128&g=1", "display_name": "mattwallace", "link": "https://stackoverflow.com/users/339427/mattwallace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553061375, "creation_date": 1553054043, "question_id": 55253339, "link": "https://stackoverflow.com/questions/55253339/how-do-i-map-one-csv-to-another-with-ruby", "title": "how do I map one csv to another with ruby", "body": "<p>I have two csv's with different headers.</p>\n\n<p>lets say csv 1 has headers one, two, three, four and I want to create a csv with headers five, six, seven, eight. </p>\n\n<p>I'm having a hard time writing the code to open the first CSV and then creating the second CSV. </p>\n\n<p>Here is the current code that I have. </p>\n\n<pre><code>require 'csv'\n\nwmj_headers = [\n  \"Project Number\", \n  \"Task ID\",    \n  \"Task Name\",\n  \"Status Comment\", \n  \"Act Complete\", \n  \"Plan Complete\", \n  \"Description\"]\n\njir_headers_hash = {\n  \"Summary\" =&gt; \"Task Name\",\n  \"Issue key\" =&gt; \"Status Comment\",\n  \"Resolved\" =&gt; \"Act Complete\",\n  \"Due date\" =&gt; \"Plan Complete\",\n  \"Description\" =&gt; \"Description\"\n}\nputs \"Enter path to a directory of .csv files\"\ndir_path = gets.chomp\ncsv_file_names = Dir[\"#{dir_path}*.csv\"]\n\ncsv_file_names.each do |f_path|\n  base_name = File.basename(f_path, '.csv')\n  wmj_name = \"#{base_name}_wmj.csv\"\n\n  arr = []\n  mycount = 0\n  CSV.open(wmj_name, \"wb\") do |row| \n    row &lt;&lt; wmj_headers \n\n\n    CSV.foreach(f_path, :headers =&gt; true) do |r|\n      r.headers.each do |value|\n        if jir_headers_hash[value].nil? == false\n          arr &lt;&lt; r[value]\n        end\n      end\n    end \n    row &lt;&lt; arr\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services", "aws-lambda"], "answers": [{"tags": [], "owner": {"reputation": 8058, "user_id": 401096, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aqDc7.jpg?s=128&g=1", "display_name": "bwest", "link": "https://stackoverflow.com/users/401096/bwest"}, "is_accepted": false, "score": 3, "last_activity_date": 1553053452, "last_edit_date": 1553053452, "creation_date": 1553053072, "answer_id": 55253206, "question_id": 55253085, "link": "https://stackoverflow.com/questions/55253085/how-to-install-use-ruby-gems-in-an-aws-lambda-function/55253206#55253206", "title": "How to install/use ruby gems in an AWS Lambda function?", "body": "<p>Install the gems into the project folder by using the <code>--path</code> flag when running <code>bundle install</code>. Then include the installed dependencies in your .zip.source bundle. There are <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/ruby-package.html\" rel=\"nofollow noreferrer\">docs on creating a Ruby bundle</a>.</p>\n\n<p>Another option would be to create a <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html\" rel=\"nofollow noreferrer\">lambda layer</a>, which can make your deploys faster (smaller zip file) and be used to organize your code.</p>\n"}], "owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1751, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1553053452, "creation_date": 1553052056, "question_id": 55253085, "link": "https://stackoverflow.com/questions/55253085/how-to-install-use-ruby-gems-in-an-aws-lambda-function", "title": "How to install/use ruby gems in an AWS Lambda function?", "body": "<p>AWS Lambda has support for ruby 2.5, and it's straight forward to run a simple ruby script in this environment</p>\n\n<p>However, suppose your script requires some gems, how do you install and use gems in lambda?</p>\n"}, {"tags": ["ruby", "clone"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 4, "creation_date": 1553051447, "post_id": 55252912, "comment_id": 97238273, "body": "Use <code>reject</code> instead. The <code>!</code> (bang) refers to destructive methods."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 6, "creation_date": 1553052661, "post_id": 55252912, "comment_id": 97238529, "body": "<code>new = array</code> does not make a copy of the array. It makes a copy of the <i>reference</i> to the array. There is still only one array. I suggest you run both snippets through <a href=\"http://pythontutor.com/ruby.html\" rel=\"nofollow noreferrer\">this visualizer</a>, which should show you what is happening."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1553052721, "post_id": 55252912, "comment_id": 97238547, "body": "@Sabastian has answered your question, but here are a couple more points. You don&#39;t need a variable <code>new</code> and you don&#39;t need <code>new</code> by itself as the last line. All you need for the body of the method is this: <code>array.reject {|i| i &lt;= array.min}</code>. As that&#39;s the last statement of method it&#39;s return value becomes the return value of the method. As <code>array.min</code> is within the block it is execute <code>array.size</code> times, which is inefficient.  Also, <code>&lt;=</code> is the same as <code>==</code> and the former is confusing. Instead, write <code>n = array.min</code> followed by <code>array.reject {|i| i == n }</code>"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1553059713, "post_id": 55252912, "comment_id": 97240196, "body": "maybe have a look here for  more insight <a href=\"https://stackoverflow.com/questions/1872110/is-ruby-pass-by-reference-or-by-value\" title=\"is ruby pass by reference or by value\">stackoverflow.com/questions/1872110/&hellip;</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1553065734, "post_id": 55252912, "comment_id": 97242291, "body": "@CarySwoveland Sebastian hasn&#39;t answered the question. Amadan has."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1553091652, "post_id": 55252912, "comment_id": 97257282, "body": "@sawa, yes. By way of explanation, I started writing my comment before Amadan posted his comment and was focused on the somewhat extraneous points I made."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1553102306, "post_id": 55252912, "comment_id": 97264621, "body": "One could write <code>def remove_smallest(array); array - [array.min]; end</code>. Like <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-reject\" rel=\"nofollow noreferrer\">Array#reject</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-2D\" rel=\"nofollow noreferrer\">Array#-</a> is order-preserving."}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 10565289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744372365672405/picture?type=large", "display_name": "Richard Jarram", "link": "https://stackoverflow.com/users/10565289/richard-jarram"}, "edited": false, "score": 0, "creation_date": 1553096973, "post_id": 55256834, "comment_id": 97261198, "body": "thank you for the comprehensive answer -- that thanks goes to everyone who commented above too!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1553110346, "post_id": 55256834, "comment_id": 97268700, "body": "@CarySwoveland I&#39;ve made this a community wiki, feel free to edit :-)"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 10, "last_activity_date": 1553110381, "last_edit_date": 1553110381, "creation_date": 1553072132, "answer_id": 55256834, "question_id": 55252912, "link": "https://stackoverflow.com/questions/55252912/why-does-ruby-mutate-my-array-when-i-do-not-ask-it-to/55256834#55256834", "title": "Why does ruby mutate my array when I do not ask it to?", "body": "<blockquote>\n  <p>[...] will mutate the original input even if I perform all operations on a copy of the original array.</p>\n</blockquote>\n\n<p>You don't perform the operations on a copy. When doing</p>\n\n<pre><code>new = array\n</code></pre>\n\n<p>it doesn't result in a copy operation. Instead, the assignment makes <code>new</code> simply refer to the same object <code>array</code> is referring to. It therefore doesn't matter if you invoke <code>new.reject!</code> or <code>array.reject!</code> because <code>reject!</code> is sent to the same receiver.</p>\n\n<blockquote>\n  <p>Why is an explicit <code>.clone</code> method needed to avoid this mutation?</p>\n</blockquote>\n\n<p>Because <a href=\"http://ruby-doc.org/core-2.6.2/Object.html#method-i-clone\" rel=\"nofollow noreferrer\"><code>clone</code></a> performs the copy operation you've assumed for <code>=</code>. From the docs:</p>\n\n<blockquote>\n  <p>Produces a shallow copy of <em>obj</em> [...]</p>\n</blockquote>\n\n<p>Another way to avoid this mutation is to use a non-mutating method instead:</p>\n\n<pre><code>def remove_smallest(array)\n  array.reject {|i| i &lt;= array.min }\nend\n</code></pre>\n\n<p>or \u2013 to avoid re-calculating the minimum on each step:</p>\n\n<pre><code>def remove_smallest(array)\n  min = array.min\n  array.reject {|i| i &lt;= min }\nend\n</code></pre>\n\n<p>You can also use <code>==</code> instead of <code>&lt;=</code> because <code>min</code> is already the smallest possible value.</p>\n\n<p>Alternatively, there's <a href=\"http://ruby-doc.org/core-2.6.2/Array.html#method-i-2D\" rel=\"nofollow noreferrer\"><code>Array#-</code></a>:</p>\n\n<pre><code>def remove_smallest(array)\n  array - [array.min]\nend\n</code></pre>\n"}], "owner": {"reputation": 535, "user_id": 10565289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744372365672405/picture?type=large", "display_name": "Richard Jarram", "link": "https://stackoverflow.com/users/10565289/richard-jarram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1553110381, "creation_date": 1553050769, "last_edit_date": 1553075244, "question_id": 55252912, "link": "https://stackoverflow.com/questions/55252912/why-does-ruby-mutate-my-array-when-i-do-not-ask-it-to", "title": "Why does ruby mutate my array when I do not ask it to?", "body": "<p>There are two methods below; both are the same except one <code>clone</code>s the input whereas the other does not.</p>\n\n<p><strong>Method 1</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>arr = [1,2,3,1,2,3]\n\ndef remove_smallest(array)\n  new = array\n  new.reject! {|i| i &lt;= new.min}\n  new\nend\n\nremove_smallest(arr)\n#=&gt; [2,3,2,3]\narr\n#=&gt; [2,3,2,3]\n</code></pre>\n\n<p><strong>Method 2</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>arr = [1,2,3,1,2,3]\n\ndef remove_smallest(array)\n  new = array.clone\n  new.reject! {|i| i &lt;= new.min}\n  new\nend\n\nremove_smallest(arr)\n#=&gt; [2,3,2,3]\narr\n#=&gt; [1,2,3,1,2,3]\n\n</code></pre>\n\n<p>Without the <code>clone</code>, the method will mutate the original input even if I perform all operations on a copy of the original array.</p>\n\n<p>Why is an explicit <code>clone</code> method needed to avoid this mutation?</p>\n"}, {"tags": ["javascript", "ruby", "sass", "mouseevent", "haml"], "answers": [{"tags": [], "owner": {"reputation": 647, "user_id": 4967628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aedf0e8c0465876329f2cdf2ab194a38?s=128&d=identicon&r=PG&f=1", "display_name": "scott6", "link": "https://stackoverflow.com/users/4967628/scott6"}, "is_accepted": true, "score": 1, "last_activity_date": 1553048749, "creation_date": 1553048749, "answer_id": 55252670, "question_id": 55251905, "link": "https://stackoverflow.com/questions/55251905/changing-between-2-background-colours-on-mouse-y-adapting-p-to-that-new-colo/55252670#55252670", "title": "Changing between 2 background colours on mouse Y + adapting &lt;p&gt; to that new colour", "body": "<p>you can play with JS + CSS. The following code can be your starting point :).</p>\n\n<p>btw i'm adapting code from your link <a href=\"https://codepen.io/erutuf/pen/NJLwqV\" rel=\"nofollow noreferrer\">https://codepen.io/erutuf/pen/NJLwqV</a> </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>document.addEventListener(\"DOMContentLoaded\", function(){\r\n    let banner = document.getElementById(\"banner-wrapper\");\r\n    let devLayer = banner.querySelector(\".dev\");\r\n    let delta = 0;\r\n    // play with div's height\r\n    banner.addEventListener(\"mousemove\", function(e){\r\n        delta = (e.clientY - window.innerHeight / 2) * 0.5;\r\n        devLayer.style.height = e.clientY + delta + \"px\";\r\n    });\r\n})</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"banner-wrapper\" id=\"banner-wrapper\"&gt;\r\n  &lt;div class=\"banner design\"&gt;\r\n    &lt;div class=\"banner-content\"&gt;BANNER TEXT&lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"banner dev\"&gt;\r\n    &lt;div class=\"banner-content\"&gt;&lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;style type=\"text/css\"&gt;\r\nbody {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\nbody .banner-wrapper {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 200px;\r\n  overflow: hidden;\r\n  background: red;\r\n}\r\nbody .banner {\r\n  position: absolute;\r\n  overflow: hidden;\r\n}\r\nbody .banner.dev {\r\n  width: 100%;\r\n  /* play with responsiveness here. note that 0.1 is more responsive than 0.5. more info : https://www.w3schools.com/css/css3_transitions.asp */\r\n  -webkit-transition: height 0.2s linear;\r\n  transition: height 0.2s ease;\r\n}\r\nbody .banner.dev .banner-content {\r\n  background: black;\r\n}\r\nbody .banner .banner-content {\r\n  height: 400px;\r\n}\r\nbody .banner img {\r\n  width: 100%;\r\n}\r\n.banner.design {\r\n    margin-top: -25px;\r\n    height: 50px;\r\n    top: 50%;\r\n    font-size: 50px;\r\n\t/* set color &amp; mix-blend-mode for text color vs background color effect. more info : https://css-tricks.com/methods-contrasting-text-backgrounds/ */\r\n    mix-blend-mode: difference;\r\n    color: #fff;\r\n    z-index: 1;\r\n    margin-left: -175px;\r\n    left: 50%;\r\n    width: 350px;\r\n}\r\n\r\n&lt;/style&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 73, "user_id": 5268971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59635aba476698eb900ca9d7ac1e2c0d?s=128&d=identicon&r=PG&f=1", "display_name": "erutuf", "link": "https://stackoverflow.com/users/5268971/erutuf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 55252670, "answer_count": 1, "score": 0, "last_activity_date": 1581308938, "creation_date": 1553041853, "last_edit_date": 1581308938, "question_id": 55251905, "link": "https://stackoverflow.com/questions/55251905/changing-between-2-background-colours-on-mouse-y-adapting-p-to-that-new-colo", "title": "Changing between 2 background colours on mouse Y + adapting &lt;p&gt; to that new colour", "body": "<p>I found a piece of code that almost does what I want except I want it to be horizontal / based on mouse Y instead of X. Now I understand that in the js X will be changed to Y, but I struggle with rotating the divs.</p>\n\n<p>Also, if I want to put some text over it, how would I do so that the background change affects the text colour (so if the text is black and half of the background is black, to make sure once when the black background overlays the text, text colour changes to another or gets inverted for example?</p>\n\n<p>Also also, I tried to figure out in js which part dictates the responsiveness of the mouse movement, i.e., how would you do so that the colour shifting is not lagging after the mouse but I couldn't figure out?</p>\n\n<p><a href=\"https://codepen.io/erutuf/pen/NJLwqV\" rel=\"nofollow noreferrer\">https://codepen.io/erutuf/pen/NJLwqV</a></p>\n\n<p>haml</p>\n\n<pre><code>    #banner-wrapper.banner-wrapper\n  .banner.design\n    .banner-content\n\n  .banner.dev\n    .banner-content\n</code></pre>\n\n<p>scss</p>\n\n<pre><code>   body {\n  margin: 0;\n  padding: 0;\n\n  .banner-wrapper {\n    position: relative;\n    width: 100%;\n    height: 400px;\n    overflow: hidden; background:red;\n  }\n\n  .banner {\n    position: absolute;\n    overflow: hidden;\n\n    &amp;.dev {\n      margin-left: -500px;\n      width: calc(50vw + 500px);\n      .banner-content {\n        margin-left: 500px; background:black;\n      }\n    }\n    .banner-content {\n      height: 400px;\n    }\n    img {\n      width: 100vw;\n    }\n  }\n}\n</code></pre>\n\n<p>js</p>\n\n<pre><code>document.addEventListener('DOMContentLoaded', function(){\n    let banner = document.getElementById('banner-wrapper');\n    let devLayer = banner.querySelector('.dev');\n    let delta = 0;\n\n    banner.addEventListener('mousemove', function(e){\n        delta = (e.clientX - window.innerWidth / 2) * 0.5;\n        devLayer.style.width = e.clientX + 500 + delta + 'px';\n    });\n})\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "coffeescript", "haml", "form-for"], "comments": [{"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1553042061, "post_id": 55251658, "comment_id": 97236352, "body": "for this problem, I think you need upload the content of your config/routes.rb and your controller for this view"}, {"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 0, "creation_date": 1553042292, "post_id": 55251658, "comment_id": 97236424, "body": "if it&#39;s in partial maybe try to define the local variable. In main view: <code>= render partial: &#39;my_partial&#39;, locals: { current_client: current_client }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1957, "user_id": 816534, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/70bacfa0a93dfc516f0e328c8baf7010?s=128&d=identicon&r=PG", "display_name": "gdurelle", "link": "https://stackoverflow.com/users/816534/gdurelle"}, "is_accepted": false, "score": 0, "last_activity_date": 1553069183, "creation_date": 1553069183, "answer_id": 55256077, "question_id": 55251658, "link": "https://stackoverflow.com/questions/55251658/undefined-method-client-path/55256077#55256077", "title": "undefined method `client_path&#39;", "body": "<p>You pass an object <code>current_client</code> to <strong>simple_form</strong>.\nIt thus infer the route with this object's name convention, which will be client_path like it would be user_path for current_user.</p>\n\n<p>Does this route exists ?\nIf not and it is another one, you need to give simple_form the url for the form to be submited : </p>\n\n<pre><code>= simple_form_for current_client, url: loremipsum_path, remote: true do |f| \n</code></pre>\n\n<p>In Ruby on Rails, everything is based on conventions. Mostly naming conventions. That's how the ORM works, but also the routes, controller/views link, etc.\nIf you do not give options, the helpers/engine/librairies will infer based on naming they have on hand.</p>\n"}], "owner": {"reputation": 10157, "user_id": 53491, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c79083b696c8a63b10dc59b286a24ef6?s=128&d=identicon&r=PG", "display_name": "Brian Postow", "link": "https://stackoverflow.com/users/53491/brian-postow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581308948, "creation_date": 1553039772, "last_edit_date": 1581308948, "question_id": 55251658, "link": "https://stackoverflow.com/questions/55251658/undefined-method-client-path", "title": "undefined method `client_path&#39;", "body": "<p>I have a partial (haml) in my Rails program. In the partial, I'm trying to put a form_for block. however, it's giving me <code>undefined method</code>client_path'`</p>\n\n<p>The form looks like:</p>\n\n<pre><code>    = simple_form_for current_client, remote: true do |f|\n      = f.label 'checkbox'\n      = f.check_box :show_help_slide_show, autofocus: true\n      = f.submit\n</code></pre>\n\n<p>current_client exists, and is a client object, I've checked. </p>\n\n<p>I've used both current_client, @current_client, client, and @client. none work. (client doesn't seem to be defined).</p>\n\n<p>As you can see from what I've tried, I'm a fairly novice Ruby programmer (but very experienced otherwise) I don't understand how data gets passed around within a ruby program I guess...</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1553041043, "post_id": 55251617, "comment_id": 97236136, "body": "<code>text.gsub(Regexp.union(dates.keys), dates)</code> should work."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "edited": false, "score": 0, "creation_date": 1553299927, "post_id": 55251873, "comment_id": 97346681, "body": "Thank you a lot Cary! So much useful information! Appreciated."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1553303301, "last_edit_date": 1553303301, "creation_date": 1553041527, "answer_id": 55251873, "question_id": 55251617, "link": "https://stackoverflow.com/questions/55251617/replacing-text-in-a-file-from-the-content-of-a-hash/55251873#55251873", "title": "Replacing text in a file from the content of a hash", "body": "<pre><code>FILE_IN  = 'foo.txt'\nFILE_OUT = 'bar.txt'\n</code></pre>\n\n<p>Let's first construct the file.</p>\n\n<pre><code>File.write(FILE_IN, \"January 1987\\nOctober 1988\\nMay 1975\\n\")\n  #=&gt; 35\n</code></pre>\n\n<p>It's convenient to use <code>String#gsub</code> with a regular expression to perform the substitutions. The following regular expression is what we want.</p>\n\n<pre><code>r = Regexp.union(dates.keys)\n  #=&gt;  /January|February|March|April|May|June|July|August|September|October|November|December/\n</code></pre>\n\n<p>Assuming the file it not huge we can <em>slurp</em> its contents into a string, use <code>gsub</code> to make the replacements then write the modified string to the output file:</p>\n\n<pre><code>File.write(FILE_OUT, File.read(FILE_IN).gsub(r, dates))\n  #=&gt; 22\n</code></pre>\n\n<p>We can see this worked by examining the contents of the output file.</p>\n\n<pre><code>puts File.read(FILE_OUT)\n1 1987\n10 1988\n5 1975\n</code></pre>\n\n<p>The uses the form of <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> that employs a hash (<code>dates</code>) to perform the substitutions. Also see <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-read\" rel=\"nofollow noreferrer\">IO::read</a> and <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-write\" rel=\"nofollow noreferrer\">IO::write</a>. <code>IO</code> methods are commonly used with <code>File</code> as the receiver. That's OK because <code>File</code> is a subclass of <code>IO</code> (<code>File.superclass #=&gt; IO</code>) and therefore inherits the latter's methods.</p>\n\n<p>See also <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html#method-c-union\" rel=\"nofollow noreferrer\">Regexp::union</a>.</p>\n\n<p>The steps are as follows:</p>\n\n<pre><code>s = File.read(FILE_IN)\n  #=&gt; \"January 1987\\nOctober 1988\\nMay 1975\\n\" \nt = s.gsub(r, dates)\n  #=&gt; \"1 1987\\n10 1988\\n5 1975\\n\" \nFile.write(FILE_OUT, t\n</code></pre>\n\n<p>If the file is extremely large you will want to perform the substitutions line by line. You can do that as follows.</p>\n\n<pre><code>f = open(FILE_OUT, \"w\")\nFile.foreach(FILE_IN) { |line| f.puts(line.gsub(r, dates)) }\nf.close\n\nputs File.read(FILE_OUT)\n1 1987\n10 1988\n5 1975\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/File.html#method-c-open\" rel=\"nofollow noreferrer\">File::open</a>, <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-i-puts\" rel=\"nofollow noreferrer\">IO#puts</a> <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-i-close\" rel=\"nofollow noreferrer\">IO#close</a> and <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-foreach\" rel=\"nofollow noreferrer\">IO::foreach</a>.</p>\n\n<p>Note that you could construct your hash <code>dates</code> as follows:</p>\n\n<pre><code>require 'date'\n\nDate::MONTHNAMES.each_with_index.drop(1).to_h\n  #=&gt; {\"January\"=&gt;1, \"February\"=&gt;2, ... , \"December\"=&gt;12}\n</code></pre>\n\n<p>You may think this is a lot of trouble when you can just write <code>dates</code> out, but it does guard against spelling and other errors which could be troublesome to debug.</p>\n"}, {"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 1, "last_activity_date": 1553043541, "last_edit_date": 1553043541, "creation_date": 1553041905, "answer_id": 55251916, "question_id": 55251617, "link": "https://stackoverflow.com/questions/55251617/replacing-text-in-a-file-from-the-content-of-a-hash/55251916#55251916", "title": "Replacing text in a file from the content of a hash", "body": "<p>Here's one approach: use a regex alternation construct (the pipe <code>|</code>) and the word-boundary <code>\\b</code> to avoid matching e.g. <code>Maybe</code>, and pass the hash into <code>gsub</code>:</p>\n\n<pre><code>dates = {\n  'January' =&gt; 1, \n  'February' =&gt; 2, \n  'March'  =&gt; 3, \n  'April' =&gt; 4, \n  'May' =&gt; 5, \n  'June' =&gt; 6, \n  'July' =&gt; 7, \n  'August' =&gt; 8, \n  'September' =&gt; 9, \n  'October' =&gt; 10, \n  'November' =&gt; 11, \n  'December' =&gt; 12\n}\n\nfile_names = ['foo.txt', 'bar.txt']\n\nfile_names.each do |file_name|\n  text = File.read(file_name)\n  new_content = text.gsub(/\\b(#{dates.keys.join \"|\"})\\b/, dates)\n  File.write(file_name, new_content) # the file will be overwritten\nend \n</code></pre>\n\n<p>However, when working with dates in Ruby, the <code>date</code> library offers an array of date names in <code>Date::MONTHNAMES</code> you can use to build your hash:</p>\n\n<pre><code>require 'date'\n\nfile_names = ['foo.txt', 'bar.txt']\nmonths = Hash[Date::MONTHNAMES.drop(1).zip 1..12]\npattern = /\\b(#{months.keys.join \"|\"})\\b/\n\nfile_names.each do |file_name|\n  text = File.read(file_name)\n  new_content = text.gsub(pattern, months)\n  File.write(file_name, new_content)\nend \n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1553075781, "accepted_answer_id": 55251873, "answer_count": 2, "score": 0, "last_activity_date": 1553303301, "creation_date": 1553039500, "question_id": 55251617, "link": "https://stackoverflow.com/questions/55251617/replacing-text-in-a-file-from-the-content-of-a-hash", "closed_reason": "Needs details or clarity", "title": "Replacing text in a file from the content of a hash", "body": "<p>I have a .TXT populated with the following lines:</p>\n\n<p><code>January 1987</code></p>\n\n<p><code>October 1988</code></p>\n\n<p><code>May 1975</code></p>\n\n<p>and so on. I just want to replace the name of the month by the number format, for example <code>January</code> would be replaced by <code>1</code>; <code>February</code> by <code>2</code> and the like. For this aim, I've created a <code>hash</code> and a this code so far:</p>\n\n<pre><code>dates = {'January' =&gt; 1, 'February' =&gt; 2, 'March'  =&gt; 3, 'April' =&gt; 4, 'May' =&gt; 5, 'June' =&gt; 6, 'July' =&gt; 7, 'August' =&gt; 8, 'September' =&gt; 9, 'October' =&gt; 10, 'November' =&gt; 11, 'December' =&gt; 12} #My beatiful hash!\n\nfile_names = ['foo.txt', 'bar.txt'] #The name of the file may change, but extension will always be a .TXT file. \n\nfile_names.each do |file_name|\n  text = File.read(file_name)\n  new_contents = text.gsub(/\"THE KEY OF MY HASH\"/, \"THE VALUE OF MY HASH\") #Here is where I need help\n\n\nputs new_contents\n\n\nFile.open(file_name, \"w\") {|file| file.puts new_contents } #Will this overwrite the file, or generate a new one?\nend \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook"], "comments": [{"owner": {"reputation": 4782, "user_id": 101130, "user_type": "registered", "profile_image": "https://graph.facebook.com/690267162/picture?type=large", "display_name": "WizKid", "link": "https://stackoverflow.com/users/101130/wizkid"}, "edited": false, "score": 0, "creation_date": 1553039722, "post_id": 55251602, "comment_id": 97235839, "body": "You have to ask for the fields you want"}, {"owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "reply_to_user": {"reputation": 4782, "user_id": 101130, "user_type": "registered", "profile_image": "https://graph.facebook.com/690267162/picture?type=large", "display_name": "WizKid", "link": "https://stackoverflow.com/users/101130/wizkid"}, "edited": false, "score": 0, "creation_date": 1553059462, "post_id": 55251602, "comment_id": 97240116, "body": "Can you give an example?"}, {"owner": {"reputation": 5091, "user_id": 10955263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac8352744d1489964dc9ea418be332ed?s=128&d=identicon&r=PG&f=1", "display_name": "04FS", "link": "https://stackoverflow.com/users/10955263/04fs"}, "edited": false, "score": 0, "creation_date": 1553066445, "post_id": 55251602, "comment_id": 97242559, "body": "Specifying the info_fields should already do that. (If you made this /me request you mentioned at the end yourself, outside of omniauth, you need to specify them via the <code>fields</code> parameter.)"}], "owner": {"reputation": 613, "user_id": 5032873, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/MSWnq.jpg?s=128&g=1", "display_name": "mike927", "link": "https://stackoverflow.com/users/5032873/mike927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553039432, "creation_date": 1553039432, "question_id": 55251602, "link": "https://stackoverflow.com/questions/55251602/rails-facebook-unable-to-fetch-additional-user-information", "title": "Rails Facebook - unable to fetch additional user information", "body": "<p>my goal is to fetch user localisation.\nI use:</p>\n\n<pre><code>gem 'koala'\ngem 'omniauth-facebook'\n</code></pre>\n\n<p>This is my devise.rb config</p>\n\n<pre><code>  config.omniauth :facebook, ENV['FB_APP_ID'], ENV['FB_APP_SECRET'],\n                  scope: ['email', 'user_location'],\n                  callback_url: ENV['FB_CALLBACK_URL'],\n                  info_fields: 'email, first_name, last_name, name, location'\n</code></pre>\n\n<p>In my <code>OmniauthCallbacksController</code> controller in <code>facebook</code> method, I want to create a user and assign localisation to him.</p>\n\n<pre><code>  @user = User.from_omniauth(request.env['omniauth.auth'])\n  @oauth = Koala::Facebook::OAuth.new(ENV['FB_APP_ID'], ENV['FB_APP_SECRET'], ENV['FB_CALLBACK_URL'])\n  @graph = Koala::Facebook::API.new(@user.omni_auth_settings.first.access_token)\n</code></pre>\n\n<p>Unfortunately facebook API still returns only the following data:</p>\n\n<pre><code>=&gt; {\"provider\"=&gt;\"facebook\",\n \"uid\"=&gt;\"1091157110258285\",\n \"info\"=&gt;\n  {\"email\"=&gt;\"wfhllalscu_1552944302@tfbneew.net\",\n   \"name\"=&gt;\"Emma Alcdgiehdgbgb Fergiesen\",\n   \"first_name\"=&gt;\"Emma\",\n   \"last_name\"=&gt;\"Fergiesen\",\n   \"image\"=&gt;\"http://graph.facebook.com/v2.10/1091157110258285/picture\"},\n \"credentials\"=&gt;\n  {\"token\"=&gt;\n    \"EAAEobjagyisBAFKrkigZA4p09xvxVOKK41LbPEHKFASCGrz0f5ZCIgwwdjBq1UPf5jvkmdzjhnytZAKVwDb4MrrzWvkC0y1LLJ8RZCpKcA4tTHty3pGxjFvoKzqb5RLYUvSP1Y5GL0A09ZClM5FsEX464sVnmKXXi6Bg4F0qbAYikFFNFQifsQ\",\n   \"expires_at\"=&gt;1558216434,\n   \"expires\"=&gt;true},\n \"extra\"=&gt;\n  {\"raw_info\"=&gt;{\"email\"=&gt;\"wfhllalscu_1552944302@tfbnw.net\", \"first_name\"=&gt;\"Emma\", \"last_name\"=&gt;\"Fergiesen\", \"name\"=&gt;\"Emma Alcdgiehdgbgb Fergiesen\", \"id\"=&gt;\"1091157110258285\"}}}\n</code></pre>\n\n<p>When I request directly <code>/me</code> still I do not receive birthday and localisation.</p>\n\n<pre><code>[6] pry(#&lt;Users::OmniauthCallbacksController&gt;)&gt; @graph.get_object(\"me\")\n=&gt; {\"name\"=&gt;\"Emma Alcdgiehdgbgb Fergiesen\", \"id\"=&gt;\"1091157110258285\"}\n</code></pre>\n\n<p>Privileges are granted for these users. I have no idea why I cannot fetch those data.\nAny ideas?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 7, "user_id": 11227932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d06051ead74f508d9e4a1b7c7ed9e7?s=128&d=identicon&r=PG&f=1", "display_name": "C_B", "link": "https://stackoverflow.com/users/11227932/c-b"}, "edited": false, "score": 0, "creation_date": 1553034459, "post_id": 55250861, "comment_id": 97234305, "body": "undefined method `each&#39; for 5658845:Integer Error that keeps occuring"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1553037913, "post_id": 55250861, "comment_id": 97235335, "body": "You&#39;ll want to confirm <code>gets.chomp</code> is the string representation of a natural number (non-negative integer). If, for example, <code>gets =&gt; &quot;cat\\n&quot;</code>, <code>my_account = gets.to_i #=&gt; 0</code> and you will merrily check to see if <code>accounts</code> contains a zero. See <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-to_i\" rel=\"nofollow noreferrer\">String#to_i</a> to understand why <code>&quot;cats\\n&quot;.to_i #=&gt; 0</code>. You can check that with a regular expression. If it should be a natural number, <code>gets.chomp =~ &#47;\\D&#47;</code> is <code>true</code> if <code>gets.chomp</code> contains a character other than a digit, so you want <code>!(gets.chomp =~ &#47;\\D&#47;)</code> or <code>gets.chomp !~ &#47;\\D&#47;)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1553034572, "creation_date": 1553034572, "answer_id": 55250906, "question_id": 55250861, "link": "https://stackoverflow.com/questions/55250861/ruby-true-false-array/55250906#55250906", "title": "Ruby True/False Array", "body": "<p>This line is wrong</p>\n\n<pre><code>for v in (my_account)\n</code></pre>\n\n<p>it should be</p>\n\n<pre><code>for v in accounts\n</code></pre>\n\n<p>You want to go through the numbers in <code>accounts</code> array, not <code>my_account</code>, that's just a single number</p>\n"}, {"comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1553035682, "post_id": 55250914, "comment_id": 97234703, "body": "Why do you need a comma after the last element of the array?"}], "tags": [], "owner": {"reputation": 1, "user_id": 5092948, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zi78P.jpg?s=128&g=1", "display_name": "DrissTM", "link": "https://stackoverflow.com/users/5092948/drisstm"}, "is_accepted": false, "score": 0, "last_activity_date": 1553034660, "creation_date": 1553034660, "answer_id": 55250914, "question_id": 55250861, "link": "https://stackoverflow.com/questions/55250861/ruby-true-false-array/55250914#55250914", "title": "Ruby True/False Array", "body": "<p>You should try:</p>\n\n<pre><code>accounts = [5658845, 4520125, 7895122, 8777541, 8451277, 1302850, 8080152, 4562555, 5552012, 5050552, 7825877, 1250255,\n       1005231, 6545231, 3852085, 7576651, 7881200, 4581002,]\nputs \"What is your account number?\"\nmy_account = gets.to_i\nif accounts.include?(my_account)\n  puts \"Welcome to your account\"\nelse\n  # do whatever you need to do\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1553061874, "post_id": 55250924, "comment_id": 97240842, "body": "Well, in the worst case <code>Array#include?</code> would also walk through the whole array :)"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1553035260, "last_edit_date": 1553035260, "creation_date": 1553034706, "answer_id": 55250924, "question_id": 55250861, "link": "https://stackoverflow.com/questions/55250861/ruby-true-false-array/55250924#55250924", "title": "Ruby True/False Array", "body": "<p>You should use <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-include-3F\" rel=\"nofollow noreferrer\"><code>Array#include?</code></a></p>\n\n<pre><code>accounts = [5658845, 4520125, 7895122, 8777541, 8451277, 1302850, 8080152, 4562555, 5552012, 5050552, 7825877, 1250255, 1005231, 6545231, 3852085, 7576651, 7881200, 581002]\nputs 'What is your account number?'\nmy_account = gets.to_i\n\nif accounts.include?  my_account\n  puts 'Welcome to your account'\nelse\n  puts 'It is not you account'\nend\n</code></pre>\n\n<p>Using <code>for</code> with <code>puts</code> you will enumerate all items in your array.</p>\n\n<p>For example:</p>\n\n<pre><code>accounts = [1, 2, 3]\nputs \"What is your account number?\"\nmy_account = gets.to_i\n\nfor v in accounts\n  if v == my_account\n    puts \"Welcome to your account #{v}\"\n  else\n    puts \"#{v} is not your account\"\n  end\nend\n\n# What is your account number?\n# 2\n# 1 is not your account\n# Welcome to your account 2\n# 3 is not your account\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11227932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d06051ead74f508d9e4a1b7c7ed9e7?s=128&d=identicon&r=PG&f=1", "display_name": "C_B", "link": "https://stackoverflow.com/users/11227932/c-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1553086342, "answer_count": 3, "score": -6, "last_activity_date": 1553035260, "creation_date": 1553034282, "last_edit_date": 1553034362, "question_id": 55250861, "link": "https://stackoverflow.com/questions/55250861/ruby-true-false-array", "closed_reason": "Needs details or clarity", "title": "Ruby True/False Array", "body": "<p>The attached code needs to be able to check if the inputed number is in the array and then run if true and if false a message returned.</p>\n\n<pre><code>accounts = [5658845, 4520125, 7895122, 8777541, 8451277, 1302850, 8080152, 4562555, 5552012, 5050552, 7825877, 1250255,\n       1005231, 6545231, 3852085, 7576651, 7881200, 4581002,]\nputs \"What is your account number?\"\nmy_account = gets.to_i\nfor v in (my_account)\n  if v ==(my_account) \n    puts \"Welcome to your account\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1553033939, "post_id": 55250260, "comment_id": 97234130, "body": "Even if that block were executed, it&#39;d crash. Strings don&#39;t have [public] method <code>puts</code>."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1553032154, "creation_date": 1553032154, "answer_id": 55250494, "question_id": 55250260, "link": "https://stackoverflow.com/questions/55250260/each-loop-not-executing/55250494#55250494", "title": ".each loop not executing", "body": "<p>Because you're creating a new file and that's empty, so no lines, no blocks executed. If you want to enter into the loop, that file should contain some lines and you need to open it in append mode</p>\n\n<pre><code>File.open(input, \"a+\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 2, "creation_date": 1553079662, "post_id": 55250547, "comment_id": 97249611, "body": "Worth mentioning to <code>ensure</code> the file is closed after processing if using this approach."}], "tags": [], "owner": {"reputation": 5410, "user_id": 41688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b1ed0d2cd5db2f9ea46b8c38b5c4f7?s=128&d=identicon&r=PG", "display_name": "BryanH", "link": "https://stackoverflow.com/users/41688/bryanh"}, "is_accepted": false, "score": 0, "last_activity_date": 1553092035, "last_edit_date": 1553092035, "creation_date": 1553032455, "answer_id": 55250547, "question_id": 55250260, "link": "https://stackoverflow.com/questions/55250260/each-loop-not-executing/55250547#55250547", "title": ".each loop not executing", "body": "<p>A couple of problems here. </p>\n\n<p>One, you're using the filename variable <code>File.open(input...</code> also as a variable for what the user enters (<code>input = gets.chomp</code>). Don't do that.</p>\n\n<p>Secondly, when you open an existing file for writing with <code>w+</code> you truncate it to zero length. Your loop is actually a block at that point. If you were reading, that would be a different story.</p>\n\n<p>Try opening the file and assigning it to a variable:</p>\n\n<pre><code>f = File.new(input,  \"w+\")\n</code></pre>\n\n<p>Then run a loop (<code>begin...end while</code>) that gets input and writes it to <code>f</code> as follows:</p>\n\n<pre><code>userstuff = gets.chomp\nf.write(userstuff)\n</code></pre>\n\n<p>Don't forget to close the file when you are finished writing to it:</p>\n\n<pre><code>f.close\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17497, "user_id": 23915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e935da7b67c03dd56f385b031f485c?s=128&d=identicon&r=PG", "display_name": "Unixmonkey", "link": "https://stackoverflow.com/users/23915/unixmonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1553032924, "creation_date": 1553032924, "answer_id": 55250637, "question_id": 55250260, "link": "https://stackoverflow.com/questions/55250260/each-loop-not-executing/55250637#55250637", "title": ".each loop not executing", "body": "<p>It looks to me like what you are trying to accomplish is writing to the file. Here's a lightly modified version that echo's what you have written and adds it as a new line in the file:</p>\n\n<pre><code>input = 'test.txt'\nFile.open(input, \"w+\") do |file| # File open returns the file, not it's lines\n  loop do\n    puts \"Enter line content, or \\\"-EOF-\\\" to stop inputting.\"\n    input = gets # no chomp here, because we probably want that in the file\n    if input.chomp == \"-EOF-\" # chomp here to compare with `\"-EOF-\"` instead of \"-EOF-\\n\"\n      break\n    else\n      file &lt;&lt; input # this writes your input line to the file\n      puts input\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1553079802, "last_edit_date": 1553079802, "creation_date": 1553079411, "answer_id": 55259113, "question_id": 55250260, "link": "https://stackoverflow.com/questions/55250260/each-loop-not-executing/55259113#55259113", "title": ".each loop not executing", "body": "<blockquote>\n  <p>It creates the file, but it doesn't do anything else that's specified. Why is that?</p>\n</blockquote>\n\n<p>Because you call <code>File.open(...).each</code> instead of just <code>File.open(...)</code> \u2013 you want to open the file, not traverse its content.</p>\n\n<p>That aside, you don't have to invent your own <a href=\"https://en.wikipedia.org/wiki/End-of-file\" rel=\"nofollow noreferrer\">EOF</a> handling. Hitting <kbd>Ctrl</kbd>-<kbd>D</kbd> will generate an EOF indicator which in turn results in <a href=\"http://ruby-doc.org/core-2.6.2/Kernel.html#method-i-gets\" rel=\"nofollow noreferrer\"><code>gets</code></a> returning <code>nil</code>.</p>\n\n<p>This allows you to have a simple loop:</p>\n\n<pre><code>File.open(input, 'w+') do |file|\n  puts 'Enter lines, or hit \"Ctrl-D\" to stop inputting.'\n  while line = gets\n    file.puts line\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10665476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c4f7dbb56d9dcd2f72ff0a82ab21956?s=128&d=identicon&r=PG&f=1", "display_name": "Wesley Lance", "link": "https://stackoverflow.com/users/10665476/wesley-lance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 55259113, "answer_count": 4, "score": 0, "last_activity_date": 1553092035, "creation_date": 1553030891, "last_edit_date": 1553066036, "question_id": 55250260, "link": "https://stackoverflow.com/questions/55250260/each-loop-not-executing", "title": ".each loop not executing", "body": "<p>I have this snippet of code:</p>\n\n<pre><code>File.open(input, \"w+\").each do |line|\n   puts \"Enter line content, or \\\"-EOF-\\\" to stop inputting.\"\n   input = gets.chomp\n   if input == \"-EOF-\"\n        break\n   else\n       line.puts input\n   end\nend\n</code></pre>\n\n<p>It creates the file, but it doesn't do anything else that's specified. Why is that?</p>\n"}, {"tags": ["python", "ruby", "api", "http", "rest-client"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1553033108, "post_id": 55250037, "comment_id": 97233853, "body": "Please do not post images of plaintext. <a href=\"https://meta.stackoverflow.com/a/285557/3784008\">Images of plaintext are not appropriate on StackOverflow</a>. You have access to the plaintext; please copy and paste it into your question."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1553034382, "post_id": 55250037, "comment_id": 97234277, "body": "Have you looked to see if any new firewalls/firewall rules have been enabled? I&#39;ve seen some in the past that were as simple as checking for the USER_AGENT, which a browser would report as a browser. Some libraries report as something other than a browser (or nothing at all). I&#39;d try passing along a browser-looking USER_AGENT in your request just to see"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1553054826, "post_id": 55250037, "comment_id": 97239019, "body": "I recommend trying to make it work with Postman, because it has a  command to export the query to many different libraries."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1553092424, "post_id": 55250037, "comment_id": 97257830, "body": "Postman is a good idea. Similarly you could try using curl from the command line. There&#39;s really nothing special about Ruby&#39;s HTTP lib. If basic attempts with it are not working, chances are your working examples (browser, urllib2) are doing some extra magic to make the connection happen."}, {"owner": {"reputation": 55, "user_id": 7277967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/189289b374215c55fdd6034b24539515?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/7277967/ram"}, "edited": false, "score": 0, "creation_date": 1553096625, "post_id": 55250037, "comment_id": 97260953, "body": "Thanks guys for suggestions. I tried passing user agent but no luck. Postman and curl are working fine. I also copied code from Postman and executed it but doesn&#39;t work. Its weird one. Debugging further"}, {"owner": {"reputation": 55, "user_id": 7277967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/189289b374215c55fdd6034b24539515?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/7277967/ram"}, "edited": false, "score": 0, "creation_date": 1553176175, "post_id": 55250037, "comment_id": 97293647, "body": "Looks like IPv6 proxies were introduced last week, which is blocking the calls made by libraries. Did some research on how browser makes calls. Looks like browsers will try to connect over IPv6, but if they don&#39;t get a working connection within 300 milliseconds they will try to connect over IPv4. I&#39;m seeing how to force rest-client library to connect over IPv4 instead of IPv6. Any ideas?"}], "owner": {"reputation": 55, "user_id": 7277967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/189289b374215c55fdd6034b24539515?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/7277967/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553029784, "creation_date": 1553029784, "question_id": 55250037, "link": "https://stackoverflow.com/questions/55250037/http-calls-fail-only-on-internal-corp-network-using-rest-client", "title": "HTTP calls fail only on internal corp network using rest-client", "body": "<p>HTTP calls fail on internal corp network using rest-client. I tried using other Ruby library like Net::HTTP etc but it fails too. This issue started happening a week back. It was working fine for a year. I tried using python libraries(requests, urllib2). It didn't work on requests but strangely worked on urllib2. Not really sure what is happening behind. All HTTP calls work fine from browser when headers are passed, its just the libraries</p>\n\n<p>Please find below the sample code that fails</p>\n\n<p><code>def get_data\n    Yajl::Parser.parse(RestClient::Resource.new(\"url\", @header).get)\nend</code></p>\n\n<p>Please find below the error that rest-client library throws</p>\n\n<p><a href=\"https://i.stack.imgur.com/P7JjU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P7JjU.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 505, "user_id": 5909738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNscA.jpg?s=128&g=1", "display_name": "Tashows", "link": "https://stackoverflow.com/users/5909738/tashows"}, "edited": false, "score": 0, "creation_date": 1553033918, "post_id": 55249916, "comment_id": 97234121, "body": "Since you only want each term title to be unique why don&#39;t you deal with this at the time of creation with a uniqueness validation on title? You can even supply your users with a message that the term is already accepted or pending for approval. Seems messy to keep multiple records you don&#39;t need and then have them lying around and not display them to admins so it looks cleaner."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1553031078, "creation_date": 1553031078, "answer_id": 55250291, "question_id": 55249916, "link": "https://stackoverflow.com/questions/55249916/rails-filtering-two-arrays-based-on-an-attribute/55250291#55250291", "title": "Rails - Filtering two arrays based on an attribute", "body": "<p>Try this one</p>\n\n<pre><code>accepted_terms_titles = @accepted.map { |t| t[:title] }\n@pending.reject! { |t| accepted_terms_titles.include?(t[:title]) }\n</code></pre>\n\n<ol>\n<li>Collect all the titles for accepted terms</li>\n<li>Filter out in the <code>@pending</code> array the terms whose title is included in the <code>accepted_terms_titles</code> array</li>\n</ol>\n"}], "owner": {"reputation": 323, "user_id": 6942847, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lntXq.jpg?s=128&g=1", "display_name": "mxvx", "link": "https://stackoverflow.com/users/6942847/mxvx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 55250291, "answer_count": 1, "score": 0, "last_activity_date": 1553031078, "creation_date": 1553029298, "question_id": 55249916, "link": "https://stackoverflow.com/questions/55249916/rails-filtering-two-arrays-based-on-an-attribute", "title": "Rails - Filtering two arrays based on an attribute", "body": "<p>I have a Term model which includes attributes :title (which is simply a title), as well as :accepted, and :pending (which are boolean values to tell if a Term has been approved by a moderator). On my index page, the Terms are split up by their :accepted attribute and stored in arrays called @accepted and @pending.</p>\n\n<p>There can be multiple Terms with the same :title, however, only one of these can be accepted. </p>\n\n<p>What I am unsuccessfully trying to do is filter the two arrays by the :title attribute so that if a term appears in the @approved array, it doesn't appear in the @pending array.</p>\n\n<p>So if I have:</p>\n\n<pre><code>@accepted = [{title: \"TERM1\", accepted: true, pending: false}]\n@pending  = [{title: \"TERM1\", accepted: false, pending: true}, {title: \"TERM2\", accepted: false, pending: true}, {title: \"TERM2\", accepted: false , pending: true}]\n</code></pre>\n\n<p>After filtering, @pending will contain only the second and third objects (i.e. all that do not have the title \"TERM1\").</p>\n\n<p>How would I perform this filter?</p>\n"}, {"tags": ["ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1553055037, "post_id": 55248787, "comment_id": 97239057, "body": "In your paste, all the hosts are the same though."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8697281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1nGsn.jpg?s=128&g=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/8697281/diego"}, "is_accepted": true, "score": 0, "last_activity_date": 1553111605, "creation_date": 1553111605, "answer_id": 55269135, "question_id": 55248787, "link": "https://stackoverflow.com/questions/55248787/how-to-connect-2-different-hosts-in-mongodb/55269135#55269135", "title": "How to connect 2 different hosts in mongodb", "body": "<p>I found the answer. \nFirst I have to create a new client at same level of default, I called it \"secondary\" with the info of database and host. </p>\n\n<pre><code>development:\n  clients:\n    default:\n      database: my_db\n      hosts:\n        - development-shard.mongodb.net:27017\n        - development-shard.mongodb.net:27017\n        - development-shard.mongodb.net:27017\n      options:\n        user: my_user\n        password: my_pass\n        auth_source: admin\n        ssl: true\n    secondary:\n      database: testDb\n      hosts:\n       - localhost:27017\n</code></pre>\n\n<p>Second. In the model I had to add the collection, the database and the client that will use </p>\n\n<pre><code>class Movies\n  include Mongoid::Document\n  include Mongoid::Attributes::Dynamic\n  store_in collection: \"movies\", database: \"testDb\", client: \"secondary\"\n\n  field :name, type: String\n  field :year, type: Integer\n  field :director, type: String\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8697281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1nGsn.jpg?s=128&g=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/8697281/diego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 55269135, "answer_count": 1, "score": 0, "last_activity_date": 1553111605, "creation_date": 1553024069, "question_id": 55248787, "link": "https://stackoverflow.com/questions/55248787/how-to-connect-2-different-hosts-in-mongodb", "title": "How to connect 2 different hosts in mongodb", "body": "<p>I have a service in ruby and I trying to connect with two different hosts with two different databases</p>\n\n<p>I'm trying something like this</p>\n\n<p>mongoid.yml </p>\n\n<pre><code>development:\n  clients:\n    default:\n      database: cpeTracking\n      hosts:\n       - development-shard.mongodb.net:27017\n       - development-shard.mongodb.net:27017\n       - development-shard.mongodb.net:27017\n      options:\n        user: my_user\n        password: my_password\n        auth_source: admin\n        ssl: true\n      database: testDb\n        hosts:\n        - localhost:27017\n</code></pre>\n\n<p>And my model </p>\n\n<pre><code>class Movies\n  include Mongoid::Document\n  include Mongoid::Attributes::Dynamic\n  store_in database: \"testDb\"\n\n  field :name, type: String\n  field :year, type: Integer\n  field :director, type: String\nend\n</code></pre>\n\n<p>When I run the service, only connect with the first host. \nI also tried this solution \n<a href=\"https://stackoverflow.com/questions/16400458/connecting-to-two-databases-mongoid\">Connecting to two databases Mongoid</a> but didn't work </p>\n"}, {"tags": ["ruby", "selenium", "angular-ui-grid"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 11639836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c92d5f8aa91027a6f9f996e35132669c?s=128&d=identicon&r=PG&f=1", "display_name": "Reshmy", "link": "https://stackoverflow.com/users/11639836/reshmy"}, "is_accepted": true, "score": 0, "last_activity_date": 1560399008, "creation_date": 1560399008, "answer_id": 56573266, "question_id": 55248415, "link": "https://stackoverflow.com/questions/55248415/angular-ui-grid-verifying-sorted-data-using-ruby-selenium/56573266#56573266", "title": "angular ui grid verifying sorted data using ruby selenium", "body": "<p>From your description what I understand is all 1000 rows will be stored in page source during page load. And on demand any 20 rows will be loaded from page source as user scrolls down or scrolls up in the page section. In this case, the best option will be to collect data from the source and store all of it to an array as per need. Which can be done as</p>\n\n<pre><code>browser.execute_script(\"return angular.element(\"your element.functionWhichloadsallRows)\").collect{|e| e.values}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 3239569, "user_type": "registered", "profile_image": "https://graph.facebook.com/1364335977/picture?type=large", "display_name": "Yadu", "link": "https://stackoverflow.com/users/3239569/yadu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 56573266, "answer_count": 1, "score": 0, "last_activity_date": 1560399008, "creation_date": 1553022578, "question_id": 55248415, "link": "https://stackoverflow.com/questions/55248415/angular-ui-grid-verifying-sorted-data-using-ruby-selenium", "title": "angular ui grid verifying sorted data using ruby selenium", "body": "<p>I have an angular webpage. One of the page sections (an angular ui grid) contains nearly 1000 rows of data. Each row has 7 columns. (There is no table tag available anywhere in the HTML the grid is made using nested divs) \nAt a time only 20 rows will be shown in the page section. Now using ruby and selenium I need to verify whether data displayed in 7th column is sorted in ascending order or not. I tried to do this by reading the contents of the \nangular ui grid to an array of arrays. But at any point of time when I fetch the elements data for only 20 rows are getting stored. After loading this page I tried again by doing a horizontal scroll and fetching the data. \nBut still I get only 20 rows of data everytime I try. I believe only the data for the visible rows at the point of execution is only getting fetched. And I think the data is loaded dynamically to 20 rows on demand which \nare visible in the section.</p>\n\n<p>Now what is the best logic I could use to verify whether data displayed in 7th column or any other column is sorted in ascending order or not !</p>\n"}, {"tags": ["arrays", "ruby", "loops"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1553021710, "post_id": 55248167, "comment_id": 97229004, "body": "What is <code>number</code> here? It&#39;s not shown."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1553021806, "post_id": 55248167, "comment_id": 97229061, "body": "What if <code>number</code> isn&#39;t an element of the array? You&#39;re going to get an error."}, {"owner": {"reputation": 39, "user_id": 10881592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03322d123b1ac3ec7d760135ccedcae?s=128&d=identicon&r=PG&f=1", "display_name": "susu", "link": "https://stackoverflow.com/users/10881592/susu"}, "edited": false, "score": 0, "creation_date": 1553021848, "post_id": 55248167, "comment_id": 97229084, "body": "sorry corrected"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1553076063, "post_id": 55248167, "comment_id": 97247508, "body": "What is <code>arrs</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10881592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03322d123b1ac3ec7d760135ccedcae?s=128&d=identicon&r=PG&f=1", "display_name": "susu", "link": "https://stackoverflow.com/users/10881592/susu"}, "edited": false, "score": 0, "creation_date": 1553022795, "post_id": 55248380, "comment_id": 97229582, "body": "Yes! thank you and is there a way I can tell it to go the other way around?  4, 3 , 2 ,1 then back to 4? or would you recommend I have a separate array for that?"}, {"owner": {"reputation": 39, "user_id": 10881592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03322d123b1ac3ec7d760135ccedcae?s=128&d=identicon&r=PG&f=1", "display_name": "susu", "link": "https://stackoverflow.com/users/10881592/susu"}, "edited": false, "score": 0, "creation_date": 1553023241, "post_id": 55248380, "comment_id": 97229774, "body": "actually this only works on numbers, maybe it is not what I am looking for"}, {"owner": {"reputation": 4797, "user_id": 177154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f719bc9e36272f09feca03728b4a160c?s=128&d=identicon&r=PG", "display_name": "draganstankovic", "link": "https://stackoverflow.com/users/177154/draganstankovic"}, "reply_to_user": {"reputation": 39, "user_id": 10881592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03322d123b1ac3ec7d760135ccedcae?s=128&d=identicon&r=PG&f=1", "display_name": "susu", "link": "https://stackoverflow.com/users/10881592/susu"}, "edited": false, "score": 1, "creation_date": 1553023619, "post_id": 55248380, "comment_id": 97229921, "body": "<code>def backward(number); forward(-number); end</code> This works no matter the content of the array."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553029298, "post_id": 55248380, "comment_id": 97232501, "body": "@draganstankovic I believe this comment &quot;actually this only works on numbers, maybe it is not what I am looking for&quot; is referring to the fact that the OP cannot call <code>forward(&#39;a&#39;)</code> because this will raise an <code>TypeError no implicit conversion of String into Integer</code> because <code>&#39;a&#39; % 4</code> will use <code>String#%</code> instead thus returning a <code>String</code>"}, {"owner": {"reputation": 4797, "user_id": 177154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f719bc9e36272f09feca03728b4a160c?s=128&d=identicon&r=PG", "display_name": "draganstankovic", "link": "https://stackoverflow.com/users/177154/draganstankovic"}, "edited": false, "score": 0, "creation_date": 1553041213, "post_id": 55248380, "comment_id": 97236168, "body": "I see the update to the question now. Was busy meantime but it seems like others covered it :)"}], "tags": [], "owner": {"reputation": 4797, "user_id": 177154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f719bc9e36272f09feca03728b4a160c?s=128&d=identicon&r=PG", "display_name": "draganstankovic", "link": "https://stackoverflow.com/users/177154/draganstankovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1553022427, "creation_date": 1553022427, "answer_id": 55248380, "question_id": 55248167, "link": "https://stackoverflow.com/questions/55248167/loop-around-an-array-forward-and-backward/55248380#55248380", "title": "Loop around an array forward and backward", "body": "<p>Like this?</p>\n\n<pre><code>def forward(number)\n  arr = [1, 2, 3, 4]\n  return arr[number % arr.size]\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1553023745, "post_id": 55248573, "comment_id": 97229977, "body": "This does however simply return the element itself. <code>arr[i % arr.length]</code> should be <code>arr[(i + 1) % arr.length]</code> for the other direction simply use <code>i - 1</code> the rest can stay the same."}], "tags": [], "owner": {"reputation": 2056, "user_id": 1838300, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/852556ae4382295d360e311debc5038a?s=128&d=identicon&r=PG", "display_name": "Sajad Rastegar", "link": "https://stackoverflow.com/users/1838300/sajad-rastegar"}, "is_accepted": false, "score": 2, "last_activity_date": 1553023888, "last_edit_date": 1553023888, "creation_date": 1553023271, "answer_id": 55248573, "question_id": 55248167, "link": "https://stackoverflow.com/questions/55248167/loop-around-an-array-forward-and-backward/55248573#55248573", "title": "Loop around an array forward and backward", "body": "<pre><code>def forward(letter)\n  arr = ['a','b','c','d']\n  i = arr.find_index(letter)\n  arr[(i + 1) % arr.length]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1553026329, "last_edit_date": 1553026329, "creation_date": 1553025984, "answer_id": 55249196, "question_id": 55248167, "link": "https://stackoverflow.com/questions/55248167/loop-around-an-array-forward-and-backward/55249196#55249196", "title": "Loop around an array forward and backward", "body": "<p>Instead of searching through the array every time, you could use a hash:</p>\n\n<pre><code>def forward(letter)\n  {'a'=&gt;'b', 'b'=&gt;'c', 'c'=&gt;'d', 'd'=&gt;'a'}[letter]\nend\n\nforward('d') #=&gt; \"a\"\nforward('b') #=&gt; \"c\"\n</code></pre>\n\n<p>You can easily build such hash from an array using <a href=\"http://ruby-doc.org/core-2.6.2/Array.html#method-i-zip\" rel=\"nofollow noreferrer\"><code>zip</code></a> and <a href=\"http://ruby-doc.org/core-2.6.2/Array.html#method-i-rotate\" rel=\"nofollow noreferrer\"><code>rotate</code></a>:</p>\n\n<pre><code>arr = %w[a b c d]\n#=&gt; [\"a\", \"b\", \"c\", \"d\"]\n\nhash = arr.zip(arr.rotate).to_h\n#=&gt; {\"a\"=&gt;\"b\", \"b\"=&gt;\"c\", \"c\"=&gt;\"d\", \"d\"=&gt;\"a\"}\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.6.2/Hash.html#method-i-invert\" rel=\"nofollow noreferrer\"><code>invert</code></a> the hash to move backward:</p>\n\n<pre><code>hash.invert\n#=&gt; {\"b\"=&gt;\"a\", \"c\"=&gt;\"b\", \"d\"=&gt;\"c\", \"a\"=&gt;\"d\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1553029565, "post_id": 55249734, "comment_id": 97232604, "body": "<code>enum.each_cons(2).find {|a,_| a == letter}.last</code> is nice too and avoids the <code>loop</code> and <code>break</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553068091, "post_id": 55249734, "comment_id": 97243252, "body": "@engineersmnky Great idea to use <code>each_cons</code> and using <code>find</code> is more semantic."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1553116962, "post_id": 55249734, "comment_id": 97271962, "body": "Yeah if you wanted to go in both directions then <code>each_cons(3)</code> and check the middle as a pivot."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1553028439, "creation_date": 1553028439, "answer_id": 55249734, "question_id": 55248167, "link": "https://stackoverflow.com/questions/55248167/loop-around-an-array-forward-and-backward/55249734#55249734", "title": "Loop around an array forward and backward", "body": "<p>An alternative way to do this is with a cycle-enumerator and a loop. </p>\n\n<pre><code>def forward letter\n  enum = ['a', 'b', 'c', 'd'].cycle\n  loop {\n    n = enum.next\n    break enum.peek if n == letter\n  }\nend\n\nforward 'a' #=&gt; 'b'\nforward 'b' #=&gt; 'c'\nforward 'c' #=&gt; 'd'\nforward 'd' #=&gt; 'a'\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10881592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03322d123b1ac3ec7d760135ccedcae?s=128&d=identicon&r=PG&f=1", "display_name": "susu", "link": "https://stackoverflow.com/users/10881592/susu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 55249196, "answer_count": 4, "score": -2, "last_activity_date": 1553198981, "creation_date": 1553021588, "last_edit_date": 1553198981, "question_id": 55248167, "link": "https://stackoverflow.com/questions/55248167/loop-around-an-array-forward-and-backward", "title": "Loop around an array forward and backward", "body": "<p>This is my function to loop forward from a given index. I am looking for a behaviour to go from 1 to 2 to 3 to 4, then go back to 1 and repeat.</p>\n\n<pre><code>def forward(letter)\n  arr = ['a', 'b', 'c', 'd']\n  if arr.find_index(letter) &lt; 3\n    arr[arr.find_index(letter) + 1]\n  elsif arr.find_index(letter) == 3\n    arr[0]\n  end\nend\n\nforward('d') # =&gt; 'a'\nforward('b') # =&gt; 'c'\n</code></pre>\n\n<p>and I have the counterpart to loop backwards.</p>\n\n<p>Is there a better way of doing this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paper-trail-gem"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1553214163, "post_id": 55247970, "comment_id": 97311318, "body": "Looking at the code provided so far, I don&#39;t see anything wrong. If you can reproduce this using <a href=\"https://github.com/paper-trail-gem/paper_trail/blob/master/.github/ISSUE_TEMPLATE/bug_report.md\" rel=\"nofollow noreferrer\">this script</a> then you may have found a bug. We are temporarily not accepting issues, but if you can reproduce this using the script, please open a PR."}, {"owner": {"reputation": 919, "user_id": 327500, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Vj0JFoLh794/AAAAAAAAAAI/AAAAAAAAACQ/9vPzxJEVcGI/photo.jpg?sz=128", "display_name": "Giang Nguyen", "link": "https://stackoverflow.com/users/327500/giang-nguyen"}, "reply_to_user": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1564122808, "post_id": 55247970, "comment_id": 100933738, "body": "@JaredBeck: I got the same issue today. I noticed the meta value is 1 step behind the current state of the record."}, {"owner": {"reputation": 53, "user_id": 3272873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yOU4t.jpg?s=128&g=1", "display_name": "EdWarD", "link": "https://stackoverflow.com/users/3272873/edward"}, "reply_to_user": {"reputation": 919, "user_id": 327500, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Vj0JFoLh794/AAAAAAAAAAI/AAAAAAAAACQ/9vPzxJEVcGI/photo.jpg?sz=128", "display_name": "Giang Nguyen", "link": "https://stackoverflow.com/users/327500/giang-nguyen"}, "edited": false, "score": 1, "creation_date": 1566845410, "post_id": 55247970, "comment_id": 101775549, "body": "@GiangNguyen i had to pull the gem code and modify it for my needs and point the app to that gem code insteed of the public one. The gem is not updating the data with the new data, as you say it stay 1 step behind"}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 2434248, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/879c00aa9ad2936f978e11eee7e4aede?s=128&d=identicon&r=PG", "display_name": "Vijay", "link": "https://stackoverflow.com/users/2434248/vijay"}, "edited": false, "score": 0, "creation_date": 1589436370, "post_id": 60439197, "comment_id": 109294436, "body": "For posterity, i was experiencing a similar problem with API and session controller not storing the user. This solved it!"}], "tags": [], "owner": {"reputation": 21, "user_id": 4953334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22015d2ad4eff50acff33acbc0c81e4e?s=128&d=identicon&r=PG&f=1", "display_name": "TomMix", "link": "https://stackoverflow.com/users/4953334/tommix"}, "is_accepted": false, "score": 1, "last_activity_date": 1582826386, "creation_date": 1582826386, "answer_id": 60439197, "question_id": 55247970, "link": "https://stackoverflow.com/questions/55247970/papertrail-not-updating-the-meta-fields-when-update-model/60439197#60439197", "title": "PaperTrail not updating the meta fields when update model", "body": "<p>PaperTrail version persists the previous state, not the new state of the record, so this is intended behavior. You can use proc to retrieve fresh data (or just any data PaperTrail would omit) from the record</p>\n\n<pre><code>meta: {\n  date: proc { |record| record.date }\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 3272873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yOU4t.jpg?s=128&g=1", "display_name": "EdWarD", "link": "https://stackoverflow.com/users/3272873/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1582826386, "creation_date": 1553020822, "last_edit_date": 1553213641, "question_id": 55247970, "link": "https://stackoverflow.com/questions/55247970/papertrail-not-updating-the-meta-fields-when-update-model", "title": "PaperTrail not updating the meta fields when update model", "body": "<p>I'm using paper_trail in my rails app. I'm defining a <code>:meta</code> to store some data for each model. Inside that meta there is an attribute <code>:date</code> that takes the value of the date on the model. Now when i create a new record for a model it stores in the <code>versions</code> table the data correctly, but if I modify that record when I save it, it also create a new record in versions for the event update, but the date attribute is not modified in the versions table even when that attribute was modified on the model.</p>\n\n<p>How can i modify the config for paper_trail so that the attribute is modified when the model modifies it?</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>has_paper_trail class_name: 'HistoryElement',\n  on: [:create, :update, :destroy],\n  meta: {\n    patient_id: :patient_id, \n    instance_id: :instance_id, \n    status: :status, \n    date: :inicio, \n    item_type_id: HistoryElement::EVENT_TYPES[:dialysis_session]\n  }\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1553020984, "post_id": 55247644, "comment_id": 97228664, "body": "<code>arr[0...min_index] + arr[min_index + 1..-1]</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1553021233, "post_id": 55247644, "comment_id": 97228791, "body": "Does the order matter? If not, <code>arr.sort.drop(1)</code> can deal with it."}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 10565289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744372365672405/picture?type=large", "display_name": "Richard Jarram", "link": "https://stackoverflow.com/users/10565289/richard-jarram"}, "edited": false, "score": 0, "creation_date": 1553021779, "post_id": 55247874, "comment_id": 97229042, "body": "Would upvote your response but I don&#39;t have enough kudos to do so! Thanks for taking the time to reply.  I also found a good solution on Code Kata ``` arr.reject.with_index { |_,i| i == arr.index(arr.min) } ```  Courtesy of &#39;Instu&#39;: <a href=\"https://www.codewars.com/users/Insti\" rel=\"nofollow noreferrer\">codewars.com/users/Insti</a>"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "reply_to_user": {"reputation": 535, "user_id": 10565289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744372365672405/picture?type=large", "display_name": "Richard Jarram", "link": "https://stackoverflow.com/users/10565289/richard-jarram"}, "edited": false, "score": 1, "creation_date": 1553022718, "post_id": 55247874, "comment_id": 97229543, "body": "Thanks! The issue with that solution is that the nested <code>.index</code>/<code>.min</code> calls wreck the time complexity (O(n^2)), but nice to take a look nonetheless."}], "tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 3, "last_activity_date": 1553020934, "last_edit_date": 1553020934, "creation_date": 1553020448, "answer_id": 55247874, "question_id": 55247644, "link": "https://stackoverflow.com/questions/55247644/how-to-remove-a-single-value-from-an-array-in-ruby/55247874#55247874", "title": "How to remove a single value from an array in Ruby?", "body": "<p>On first blush, here are a couple of options:</p>\n\n<pre><code>arr.delete_at(arr.index(arr.min))\n# or less readable but still valid\narr.delete_at arr.index arr.min    \n</code></pre>\n\n\n\n<pre><code>arr.delete_at(arr.each_with_index.min[1])\n# or\narr.delete_at(arr.each_with_index.min.pop)\n# or\narr.delete_at(arr.each_with_index.min.last)\n</code></pre>\n\n<p>The first is less code and more readable but makes two passes through the list instead of one. I have doubts as to whether any other construct will surpass option #1 in elegance, as ugly as it may (or may not?) be.</p>\n\n<p>Note that both choices crash on an empty array. Here's a safer version:</p>\n\n<pre><code>arr.delete_at arr.index(arr.min) || 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1553021141, "creation_date": 1553021141, "answer_id": 55248055, "question_id": 55247644, "link": "https://stackoverflow.com/questions/55247644/how-to-remove-a-single-value-from-an-array-in-ruby/55248055#55248055", "title": "How to remove a single value from an array in Ruby?", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>[1,2,3,1,2,3].tap { |a| a.delete_at a.each_with_index.min.last }\n#\u21d2 [2, 3, 1, 2, 3]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1553025073, "post_id": 55248270, "comment_id": 97230609, "body": "This codes removes occurrences of the minimum value from the beginning, e.g. <code>[1,1,2]</code> turns into <code>[2]</code> whereas <code>[2,1,1]</code> remains unchanged."}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 1, "last_activity_date": 1553021927, "creation_date": 1553021927, "answer_id": 55248270, "question_id": 55247644, "link": "https://stackoverflow.com/questions/55247644/how-to-remove-a-single-value-from-an-array-in-ruby/55248270#55248270", "title": "How to remove a single value from an array in Ruby?", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-drop_while\" rel=\"nofollow noreferrer\"><code>Enumerable#drop_while</code></a> for this purpose</p>\n\n<pre><code>arr = [1,2,3,1,2,3]\narr.drop_while { |i| i == arr.min }\n#=&gt; [2, 3, 1, 2, 3]\n</code></pre>\n"}], "owner": {"reputation": 535, "user_id": 10565289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744372365672405/picture?type=large", "display_name": "Richard Jarram", "link": "https://stackoverflow.com/users/10565289/richard-jarram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1553021927, "creation_date": 1553019651, "question_id": 55247644, "link": "https://stackoverflow.com/questions/55247644/how-to-remove-a-single-value-from-an-array-in-ruby", "title": "How to remove a single value from an array in Ruby?", "body": "<p>I want to remove the first instance of the lowest value in the array. </p>\n\n<pre><code>arr = [1,2,3,1,2,3]\narr.reject {|i| i == arr.min}\n#=&gt; [2,3,2,3]\n</code></pre>\n\n<p>But my code removes all instances of the lowest value in the array. I want a result such that:</p>\n\n<pre><code>[...]\n#=&gt; [2,3,1,2,3]\n</code></pre>\n\n<p>What's the most elegant solution to this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 2, "creation_date": 1553018792, "post_id": 55247195, "comment_id": 97227582, "body": "Wouldn&#39;t the errors be on the comment object?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1553020643, "post_id": 55247195, "comment_id": 97228513, "body": "I think errors are lost when you redirect, but you can use <code>flash</code> in that case - see <a href=\"https://guides.rubyonrails.org/action_controller_overview.html#the-flash\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/8252783/passing-error-messages-through-flash\" title=\"passing error messages through flash\">stackoverflow.com/questions/8252783/&hellip;</a>"}, {"owner": {"reputation": 5407, "user_id": 482255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/48fd95a45ad39216322b1b577104b8e1?s=128&d=identicon&r=PG", "display_name": "Msencenb", "link": "https://stackoverflow.com/users/482255/msencenb"}, "edited": false, "score": 0, "creation_date": 1553021127, "post_id": 55247195, "comment_id": 97228729, "body": "max is correct, when doing an if check on @comment.save most standard rails controllers will call render, rather than redirect."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7066548, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5b5716d58941db8d352cd643c24272a?s=128&d=identicon&r=PG&f=1", "display_name": "bardamu", "link": "https://stackoverflow.com/users/7066548/bardamu"}, "edited": false, "score": 0, "creation_date": 1553025382, "post_id": 55248557, "comment_id": 97230768, "body": "2 &gt; i get &quot;undefined method `errors&#39; for nil:NilClass&quot;, because of &quot;form_with(model: [ @book, @book.comments.build ]&quot; line"}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1553023217, "creation_date": 1553023217, "answer_id": 55248557, "question_id": 55247195, "link": "https://stackoverflow.com/questions/55247195/displaying-validation-erors-in-views/55248557#55248557", "title": "Displaying validation erors in views", "body": "<p>1 > comments_controller.rb</p>\n\n<pre><code>  def create\n    @book = Book.find(params[:book_id])\n    @comment = @book.comments.create(comment_params)\n    @comment.user = current_user\n    if @comment.save\n      redirect_to book_path(@book)\n    else\n      redirect_back(fallback_location: book_path(@book))\n    end\n  end\n</code></pre>\n\n<p>2 > Replace <code>@book</code> to <code>@comment</code> as @comment object contains validations erros </p>\n\n<pre><code>  - if  @comment.errors.any?\n    %h2\n      = pluralize(@comment.errors.count, \"error\")\n      prohibited this article from being saved:\n    %ul\n      - @comment.errors.full_messages.each do |msg|\n        %li= msg\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7066548, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5b5716d58941db8d352cd643c24272a?s=128&d=identicon&r=PG&f=1", "display_name": "bardamu", "link": "https://stackoverflow.com/users/7066548/bardamu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553023217, "creation_date": 1553018001, "question_id": 55247195, "link": "https://stackoverflow.com/questions/55247195/displaying-validation-erors-in-views", "title": "Displaying validation erors in views", "body": "<p>I want to add comments to books (comments belongs to books), so I added this form to show page of books:</p>\n\n<pre><code>%h3 Add a comment:\n= form_with(model: [ @book, @book.comments.build ], local: true) do |form|\n  %p\n    = form.text_area :content\n  %p\n    = form.submit \"Add a comment\"\n</code></pre>\n\n<p>It works, but I need to display model validation error for empty comments. I tried with: </p>\n\n<pre><code>  - if  @book.errors.any?\n    %h2\n      = pluralize(@book.errors.count, \"error\")\n      prohibited this article from being saved:\n    %ul\n      - @book.errors.full_messages.each do |msg|\n        %li= msg\n</code></pre>\n\n<p>(after \"form_with\" line), but nothing is happen. I think that @book.errors is wrong, but have no idea how to replace it. </p>\n\n<p>Create method of my comments controller:</p>\n\n<pre><code>  def create\n    @book = Book.find(params[:book_id])\n    @comment = @book.comments.create(comment_params)\n    @comment.user = current_user\n    if @comment.save\n    redirect_to book_path(@book)\n   end\n  end\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 1, "creation_date": 1553017036, "post_id": 55246812, "comment_id": 97226670, "body": "Hey @C_B - thanks for posting. It would be great if you could show the code you&#39;ve written so far. SO is designed to help overcome specific issues and having your workings to date really helps. There&#39;s a great guide on writing a good question <a href=\"https://stackoverflow.com/help/how-to-ask\">here</a> that&#39;s well worth a read :) That said, here are the docs for <a href=\"https://ruby-doc.org/core-2.6.2/Array.html#method-i-3C-3C\" rel=\"nofollow noreferrer\"><code>&lt;&lt;</code></a> and <a href=\"https://ruby-doc.org/core-2.6.2/Array.html#method-i-push\" rel=\"nofollow noreferrer\"><code>push</code></a> which should help get you started."}, {"owner": {"reputation": 7, "user_id": 11227932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d06051ead74f508d9e4a1b7c7ed9e7?s=128&d=identicon&r=PG&f=1", "display_name": "C_B", "link": "https://stackoverflow.com/users/11227932/c-b"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1553017415, "post_id": 55246812, "comment_id": 97226885, "body": "Here is the small amount I have so far from messing around with it."}, {"owner": {"reputation": 7, "user_id": 11227932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d06051ead74f508d9e4a1b7c7ed9e7?s=128&d=identicon&r=PG&f=1", "display_name": "C_B", "link": "https://stackoverflow.com/users/11227932/c-b"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1553017421, "post_id": 55246812, "comment_id": 97226887, "body": "def get_rainfall(a, b)      rain_array = []     rain_array.push(a =&gt; b)     puts rain_array end  get_rainfall(&#39;january&#39;, 300)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1553017645, "post_id": 55246812, "comment_id": 97226998, "body": "@C_B There is no issue addressing questions the comments, however if something provides additional clarification or info about the question itself it&#39;s better suited to <a href=\"https://stackoverflow.com/posts/55246812/edit\">update the question</a> and notify the user that asked for the clarification that you&#39;ve updated the question and provided the additional info."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1553018303, "post_id": 55246812, "comment_id": 97227330, "body": "Is there anything specific you have an issue with? Does the code behave different than expected? Don&#39;t you know how to ask the user for input? etc."}, {"owner": {"reputation": 706, "user_id": 167233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e326007182b2b41b557a3f035ff318ce?s=128&d=identicon&r=PG", "display_name": "Slabgorb", "link": "https://stackoverflow.com/users/167233/slabgorb"}, "edited": false, "score": 0, "creation_date": 1553018341, "post_id": 55246812, "comment_id": 97227353, "body": "@C_B the code you have written keeps resetting the array to an empty array before appending the new data and returning it, so you will always get back what you put in. You may need a class to keep state in, or possibly a global variable."}, {"owner": {"reputation": 7, "user_id": 11227932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d06051ead74f508d9e4a1b7c7ed9e7?s=128&d=identicon&r=PG&f=1", "display_name": "C_B", "link": "https://stackoverflow.com/users/11227932/c-b"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1553018445, "post_id": 55246812, "comment_id": 97227396, "body": "@3limin4t0r I honestly do not understand how to ask the user to put inputs into an arrary and then all the mathematical functions at the end. For those functions do I have to do them to the array itself or ask for indexs."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1553018734, "post_id": 55246812, "comment_id": 97227554, "body": "I&#39;ve added and answer, along with an update that gets the input from the user @C_B. Hope it&#39;s helpful. If you&#39;re still struggling, there&#39;s a great resource <a href=\"https://www.codecademy.com/catalog/language/ruby\" rel=\"nofollow noreferrer\">here</a> which is worth running through and I&#39;m sure will help a lot."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11227932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d06051ead74f508d9e4a1b7c7ed9e7?s=128&d=identicon&r=PG&f=1", "display_name": "C_B", "link": "https://stackoverflow.com/users/11227932/c-b"}, "edited": false, "score": 0, "creation_date": 1553018712, "post_id": 55247283, "comment_id": 97227542, "body": "that help a lot. Is there a simpler way to ask the user for an input though or will it still need to be stored to do the equations at the n end of the problem?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 7, "user_id": 11227932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d06051ead74f508d9e4a1b7c7ed9e7?s=128&d=identicon&r=PG&f=1", "display_name": "C_B", "link": "https://stackoverflow.com/users/11227932/c-b"}, "edited": false, "score": 0, "creation_date": 1553018887, "post_id": 55247283, "comment_id": 97227622, "body": "There are many, many ways :) If you&#39;re using a very simple approach, this will work, though you could also accept input as a file, 12 values split on a single input etc. I&#39;d suggest having a play with the short course I commented on your question, though hope this helps getting started! With this, if you run the method once for each month, you&#39;ll have a hash of data you can use to perform the calculations. (E.G. <code>hash.values.sum &#47; hash.values.length</code>)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 7, "user_id": 11227932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d06051ead74f508d9e4a1b7c7ed9e7?s=128&d=identicon&r=PG&f=1", "display_name": "C_B", "link": "https://stackoverflow.com/users/11227932/c-b"}, "edited": false, "score": 0, "creation_date": 1553019193, "post_id": 55247283, "comment_id": 97227768, "body": "@C_B If you&#39;re always asking the users for an integer you could use <code>gets.to_i</code>. This also converts the value from a <a href=\"http://ruby-doc.org/core-2.6.2/String.html\" rel=\"nofollow noreferrer\"><i>String</i></a> into an <a href=\"http://ruby-doc.org/core-2.6.2/Integer.html\" rel=\"nofollow noreferrer\"><i>Integer</i></a>. Keep in mind that the <a href=\"http://ruby-doc.org/core-2.6.2/String.html#method-i-to_i\" rel=\"nofollow noreferrer\"><code>to_i</code></a> method does use <code>0</code> if no number is detected."}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 1, "last_activity_date": 1553018357, "creation_date": 1553018357, "answer_id": 55247283, "question_id": 55246812, "link": "https://stackoverflow.com/questions/55246812/having-issues-adding-an-input-to-an-array/55247283#55247283", "title": "having issues adding an input to an array", "body": "<p>Thanks for updating the question C_B.</p>\n\n<p>I think the slight issue you're having here is between hashes and arrays.</p>\n\n<p>Your current method results in the following:</p>\n\n<pre><code>#=&gt; [{\"january\"=&gt;300}, {\"february\"=&gt;...}]\n</code></pre>\n\n<p>This happens because when you call <code>rain_array.push(a =&gt; b)</code>, you're pushing a hash to the array each time in <code>a =&gt; b</code>.</p>\n\n<p>It seems to me you'd be better suited storing the whole things as a hash, perhaps:</p>\n\n<pre><code>hash = {}\n\ndef get_rainfall(hash, key, value)\n  hash[key] = value\n  puts hash\nend\n\nget_rainfall(hash, 'january', 300)\n# {\"january\"=&gt;300}\n\nget_rainfall(hash, 'february', 200)\n#{\"january\"=&gt;300, \"february\"=&gt;200}\n</code></pre>\n\n<p>Hash you add more entries, they will be stored under the month as the key, with the rainfall as the value.</p>\n\n<p>Alternatively, you could also push an array of arrays - to tweak your current method:</p>\n\n<pre><code>rain_array = []\n\ndef get_rainfall(array, a, b)\n  array.push([a, b])\n  puts array\nend\n\nget_rainfall(rain_array, 'january', 300)\n# january\n# 300\n\nget_rainfall(rain_array, 'february', 200)\n# january\n# 300\n# february\n# 200\n</code></pre>\n\n<p>You'll notice I'm pulling the declaration of the array or hash to store the values outside of the method; without this, you'll lose access to it as soon as the method has run.</p>\n\n<p>Hope that helps - happy to expand if you've any questions or queries. Let me know how you get on.</p>\n\n<hr>\n\n<p>One more update based on a further comment about getting user input. Try the following to get you started:</p>\n\n<pre><code>hash = {}\n\ndef get_rainfall(hash, month)\n  puts \"Please enter value for #{month}\"\n  hash[month] = gets.chomp\n  puts hash\nend\n\n\nget_rainfall(hash, 'january')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1553022119, "creation_date": 1553022119, "answer_id": 55248311, "question_id": 55246812, "link": "https://stackoverflow.com/questions/55246812/having-issues-adding-an-input-to-an-array/55248311#55248311", "title": "having issues adding an input to an array", "body": "<p>I'll write my answer in simple script form to not over complicate what is being asked here.</p>\n\n<p>The minimal approach is to not worry about month names for now and simply collect a list (array) of 12 values to do the calculations with.</p>\n\n<pre><code>rainfall = 1.upto(12).map do |month_nr|\n\n  # `print` and `puts` are practically the same with the only difference being\n  # that `puts` adds a newline character to the string if it doesn't have one\n\n  # output the question to the user\n  print \"enter the rainfall for month #{month_nr}: \"\n  # get the input from the user and convert it into an integer\n  gets.to_i # output the rainfall\nend\n\nputs \"the total rainfall is: #{rainfall.sum}\"\nputs \"the average rainfall is: #{rainfall.sum / rainfall.size}\"\nputs \"the highest rainfall is: #{rainfall.max}\"\nputs \"the lowest rainfall is: #{rainfall.min}\"\n</code></pre>\n\n<p>If you care about month names you can do the following:</p>\n\n<pre><code># create an array of all months\nmonths = %w[January February March April May June July August September October November December]\n# ask the user for each moth the amount of rainfall\nrainfall = months.map do |month_name|\n  print \"enter the rainfall for month #{month_name}: \"\n  [month_name, gets.to_i] # output both the month name and the rainfall provided\nend\n\n# convert [['January', 123], ['February', 456], ...]\n# to { 'January' =&gt; 123, 'February' =&gt; 456, ... }\nrainfall = rainfall.to_h\n\nputs \"the total rainfall is: #{rainfall.values.sum}\"\nputs \"the average rainfall is: #{rainfall.values.sum / rainfall.size}\"\n# search the key with the highest value\nputs \"the month with the highest rainfall is: #{rainfall.key(rainfall.values.max)}\"\n# search the key with the lowest value\nputs \"the month with the lowest rainfall is: #{rainfall.key(rainfall.values.min)}\"\n</code></pre>\n\n<p>If anything is unclear have a look at the reference of the thing it is you have difficulty with. If it's still unclear ask away in the comments.</p>\n\n<p><strong>references:</strong></p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/doc/syntax/literals_rdoc.html#label-Strings\" rel=\"nofollow noreferrer\">String interpolation</a> (<code>\"1 + 1 = #{1 + 1}\"</code>)</li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Integer.html#method-i-upto\" rel=\"nofollow noreferrer\"><code>Integer#upto</code></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\"><code>Enumerable#map</code></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Kernel.html#method-i-print\" rel=\"nofollow noreferrer\"><code>Kernel#print</code></a> output to standard output without appending newline</li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Kernel.html#method-i-gets\" rel=\"nofollow noreferrer\"><code>Kernel#gets</code></a> read from standard input</li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/String.html#method-i-to_i\" rel=\"nofollow noreferrer\"><code>String#to_i</code></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Kernel.html#method-i-puts\" rel=\"nofollow noreferrer\"><code>Kernel#puts</code></a> output to standard output while appending a newline character (unless already present)</li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Array.html#method-i-sum\" rel=\"nofollow noreferrer\"><code>Array#sum</code></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Array.html#method-i-size\" rel=\"nofollow noreferrer\"><code>Array#size</code></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Array.html#method-i-max\" rel=\"nofollow noreferrer\"><code>Array#max</code></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Array.html#method-i-min\" rel=\"nofollow noreferrer\"><code>Array#min</code></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/doc/syntax/literals_rdoc.html#label-Percent+Strings\" rel=\"nofollow noreferrer\"><code>%w</code></a> array of strings</li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\"><code>Array#to_h</code></a> convert array to a hash</li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Hash.html#method-i-values\" rel=\"nofollow noreferrer\"><code>Hash#values</code></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.6.2/Hash.html#method-i-key\" rel=\"nofollow noreferrer\"><code>Hash#key</code></a></li>\n</ul>\n"}], "owner": {"reputation": 7, "user_id": 11227932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9d06051ead74f508d9e4a1b7c7ed9e7?s=128&d=identicon&r=PG&f=1", "display_name": "C_B", "link": "https://stackoverflow.com/users/11227932/c-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1553022119, "creation_date": 1553016481, "last_edit_date": 1553017870, "question_id": 55246812, "link": "https://stackoverflow.com/questions/55246812/having-issues-adding-an-input-to-an-array", "title": "having issues adding an input to an array", "body": "<p>I have a problem that I think is asking me to have a user enter a input into a array. I am having difficulties understanding this and any help would be appreciated.</p>\n\n<p>The problem is as follows:</p>\n\n<p>Design a program that lets the user enter the total rainfall for each of 12 months into an array. The program should calculate and display the total rainfall for the year, the average monthly rainfall, and the months with the highest and lowest amounts.</p>\n\n<p>Here is what I have wrote so far:</p>\n\n<pre><code>def get_rainfall(a, b)\n  rain_array = []\n  rain_array.push(a =&gt; b)\n  puts rain_array\nend\n\nget_rainfall('january', 300)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "sidekiq", "linode"], "comments": [{"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1553027666, "post_id": 55246533, "comment_id": 97231772, "body": "Did you start the Sidekiq process?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1553028585, "post_id": 55246533, "comment_id": 97232207, "body": "@MikePerham yes its running"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1553028616, "post_id": 55246533, "comment_id": 97232219, "body": "otherwise it cant run on console"}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1553098155, "post_id": 55246533, "comment_id": 97262044, "body": "The console is the client, pushing the job to Redis.  The job won&#39;t execute unless you are running a server process with <code>bundle exec sidekiq</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3032, "user_id": 88406, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b8df8cd7729e9e503186b061265583d8?s=128&d=identicon&r=PG", "display_name": "squarism", "link": "https://stackoverflow.com/users/88406/squarism"}, "is_accepted": false, "score": 0, "last_activity_date": 1553015959, "creation_date": 1553015959, "answer_id": 55246671, "question_id": 55246533, "link": "https://stackoverflow.com/questions/55246533/sidekiq-working-from-console-but-not-working-from-app/55246671#55246671", "title": "Sidekiq working from console but not working from app", "body": "<ol>\n<li><p>Rails console in production mode so that the environments are different?  The configs might be different between dev and prod.</p></li>\n<li><p>You see workers listening in sidekiq admin?</p></li>\n<li><p>You can inspect the <code>sidekiq_options</code> to help debug.  I don't have a shell but if you can rails console in, try inspecting your ActivationWorker and see if you have that hash of options.  Maybe it's pushing somewhere weird that workers aren't seeing?</p></li>\n</ol>\n\n<p>No logs means it's going to stdout.  You can specify a file with <code>-L</code>.\n<a href=\"https://github.com/mperham/sidekiq/wiki/Logging\" rel=\"nofollow noreferrer\">https://github.com/mperham/sidekiq/wiki/Logging</a></p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1553015959, "creation_date": 1553015408, "question_id": 55246533, "link": "https://stackoverflow.com/questions/55246533/sidekiq-working-from-console-but-not-working-from-app", "title": "Sidekiq working from console but not working from app", "body": "<p>When I run sidekiq from rails console </p>\n\n<p><code>ActivationWorker.perform_async(832181)</code></p>\n\n<p>it works fine, but when I do hit from app nothing executes and not a get any logs also in <code>log/sidekiq.log</code></p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "hash"], "comments": [{"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1553078407, "post_id": 55246299, "comment_id": 97248895, "body": "It is hard to say what is the issue because we do not have access to the Treble API documentation. Can you please share it with us?"}], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": false, "score": 0, "last_activity_date": 1553089360, "creation_date": 1553089360, "answer_id": 55262153, "question_id": 55246299, "link": "https://stackoverflow.com/questions/55246299/error-sending-post-in-rails-and-httpparty-semantic-error-my-request/55262153#55262153", "title": "Error SENDING POST in rails and HTTPPARTY semantic error my request", "body": "<p>The problem is caused by <code>to_json</code> called in the wrong place. </p>\n\n<p>The whole request body should be sent as a JSON. In your code, you call <code>to_json</code> for a hash that is later pushed into <code>@body[\"users\"]</code> array.</p>\n\n<p>Please remove <code>to_json</code> from <code>send_venue_notification</code> and call it for the <code>@body</code> when sending the request:</p>\n\n<pre><code>HTTParty.post(\"http://api.treble.ai/api/poll/49/deploy\", headers: @headers, body: @body.to_json)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11095681, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHwFGrXaiq8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO60tdEXpajqmx4jRd85TrcTV56BA/mo/photo.jpg?sz=128", "display_name": "Javier Andr&#233;s Burgos Rold&#225;n", "link": "https://stackoverflow.com/users/11095681/javier-andr%c3%a9s-burgos-rold%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553114045, "creation_date": 1553014541, "last_edit_date": 1553114045, "question_id": 55246299, "link": "https://stackoverflow.com/questions/55246299/error-sending-post-in-rails-and-httpparty-semantic-error-my-request", "title": "Error SENDING POST in rails and HTTPPARTY semantic error my request", "body": "<p>this is my error when I lanunched my method {\"errors\"=>{\"users\"=>[\"Missing data for required field.\"]}, \"msg\"=>\"The request was well-formed but was unable to be followed due to semantic errors.\"}</p>\n\n<pre><code>class BookingNotifier\ninclude HTTParty\ndef initialize(booking_id)\n  @booking = Booking.find booking_id\n  @venue = @booking.event.service.venue\n  @body = { \"users\" =&gt; [] }\n  @headers = {\n      \"Accept\" =&gt; \"application/json\",\n      \"Authorization\" =&gt; \"ENV_KEY\",\n      \"Content-Type\" =&gt; \"application/json\"\n  }\nend\n\ndef send_venue_notification\n  venues_objects = []\n    if @venue.notifications_enabled\n      venues_objects &lt;&lt; { \"cellphone\" =&gt; @booking.event.service.venue.phone,\n                          \"country_code\" =&gt; \"+57\",\n                          \"user_session_keys\" =&gt; [{ \"key\" =&gt; \"Nombre\",   \"value\" =&gt; @booking.profile.name },\n                                                  { \"key\" =&gt; \"Centro\",   \"value\" =&gt; @booking.event.service.venue.name },\n                                                  { \"key\" =&gt; \"Cupos\",    \"value\" =&gt;  @booking.quantity },\n                                                  { \"key\" =&gt; \"Horarios\", \"value\" =&gt; @booking.time.strftime(\"%I:%M %p el %d/%m/%Y\") }] }.to_json\n      @body[\"users\"] = venues_objects\n      make_request_venue\n    end\nend\n\ndef make_request_venue\n  HTTParty.post(\"http://api.treble.ai/api/poll/49/deploy\", headers: @header, body: @body)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 1, "creation_date": 1553014917, "post_id": 55246087, "comment_id": 97225576, "body": "a single sql <code>UPDATE</code> is not possible because you&#39;re updating different <code>google_events</code> with different values. The only thing that comes to my mind is to wrap your code in an <code>ActiveRecord::Base.transaction do</code> block which will wrap all your updates in a <code>begin&#47;commit</code> statement."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1553020785, "post_id": 55246087, "comment_id": 97228567, "body": "I&#39;ve used <a href=\"https://github.com/zdennis/activerecord-import\" rel=\"nofollow noreferrer\">activerecord-import</a> with <code>on_duplicate_key_ignore</code>.With the built in Rails methods it&#39;s not otherwise possible unless you manually construct the SQL."}], "owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 700, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553013926, "creation_date": 1553013926, "question_id": 55246087, "link": "https://stackoverflow.com/questions/55246087/mass-assign-attributes-and-save-records-in-rails-5", "title": "Mass assign attributes and save records in Rails 5", "body": "<p>I have a Google Calendar Integration and I need ti update all the Google Calendar Events in my own database when a user refreshes their calendar.</p>\n\n<p>I want to assign the <code>start</code> and <code>end</code> attribute and then save all the events at the same time.</p>\n\n<p>The relationship is:</p>\n\n<pre><code>User has_many CalendarEvents\n</code></pre>\n\n<p>My method is:</p>\n\n<pre><code>def handle_calendar_update(cal_events)\n  cal_events.items.each do |e|\n    next if e.try(:end).nil? || e.try(:start).nil?\n\n    params = persistable_params(e)\n    google_event = user.calendar_events.where(google_id: params[:google_id])\n    if google_event.empty?\n      create_google_event(params)\n    else\n      event = google_event.first\n      @current_google_events.delete(event.id)\n\n      #THIS IS WHERE I UPDATE EXISTING RECORD\n      update_google_event(event, params)\n    end\n  end\n  user.save!\nend\n\ndef update_google_event(google_event, params)\n  google_event.assign_attributes(start: params[:start], end: params[:end])\nend\n</code></pre>\n\n<p>But the above doesn't save the records. It works if I replace <code>assign_attributes</code> with <code>update</code> but I don't want to hit the database to save every calendar event individually.</p>\n\n<p>Is there a way I can mass update the values and commit them at the same time?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1476, "user_id": 867439, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e11e4c7aaa8c21a640dcb5dfc7b6c950?s=128&d=identicon&r=PG", "display_name": "Mark Kenny", "link": "https://stackoverflow.com/users/867439/mark-kenny"}, "edited": false, "score": 0, "creation_date": 1553012899, "post_id": 55245581, "comment_id": 97224442, "body": "My issue with Date.io8601 is that I can only check &quot;yyyy-mm-dd&quot;.  I potentially have dates coming in as &quot;19/03/2019&quot;, &quot;19th March 2019&quot;, &quot;19-3-2019&quot; and so on.  Is there a way to check validity for all types?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1476, "user_id": 867439, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e11e4c7aaa8c21a640dcb5dfc7b6c950?s=128&d=identicon&r=PG", "display_name": "Mark Kenny", "link": "https://stackoverflow.com/users/867439/mark-kenny"}, "edited": false, "score": 1, "creation_date": 1553016219, "post_id": 55245581, "comment_id": 97226238, "body": "Then use <code>Date#_parse</code> as proposed by @Stefan and ensure all <code>:year</code>, <code>:month</code> and <code>:day</code> are there."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1476, "user_id": 867439, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e11e4c7aaa8c21a640dcb5dfc7b6c950?s=128&d=identicon&r=PG", "display_name": "Mark Kenny", "link": "https://stackoverflow.com/users/867439/mark-kenny"}, "edited": false, "score": 0, "creation_date": 1553016451, "post_id": 55245581, "comment_id": 97226368, "body": "@Mark, as Aleksei (aka &#39;mudsie&#39;) says, Ruby cannot tell you whether a string represents a date. That&#39;s some you must do. The most sure-fire way is to compile that list and then write something like <code>d = (Date.strptime(&#39;19&#47;03&#47;2019&#39;, &#39;%d&#47;%m&#47;%Y&#39;)  rescue nil) || (Date.strptime(&#39;19-3-2019&#39;, &#39;%d-%-m-%Y&#39;)  rescue nil) || ...</code>. See <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/date/rdoc/Date.html#method-c-strptime\" rel=\"nofollow noreferrer\">Date::strptime</a> and <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/date/rdoc/Date.html#method-i-strftime\" rel=\"nofollow noreferrer\">Date#strftime</a> for formatting directives."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1553017010, "post_id": 55245581, "comment_id": 97226661, "body": "Aleksei, that&#39;s an interesting idea (your comment), but what about <code>Date._parse(&#39;1 2 2019&#39;) =&gt; {:mon=&gt;20, :mday=&gt;19}</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1553017140, "post_id": 55245581, "comment_id": 97226725, "body": "@CarySwoveland I doubt <code>&#39;1 2 2019&#39;</code> should be treated as a valid input, but if it should one might do <code>Date._parse(&#39;1 2 2019&#39;.tr(&#39; &#39;, &#39;-&#39;))</code> which is relatively safe."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1553021651, "post_id": 55245581, "comment_id": 97228977, "body": "What is <code>01&#47;02&#47;03</code>? Is that <code>YY&#47;MM&#47;DD</code> or <code>DD&#47;MM&#47;YY</code> or <code>MM&#47;DD&#47;YY</code>? These omnivorous consumers take a wild guess without coaching and may be wrong."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1553026051, "post_id": 55245581, "comment_id": 97231087, "body": "@tadman, methinks that requires the OP to make an assumption or enforce a rule."}, {"owner": {"reputation": 1476, "user_id": 867439, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e11e4c7aaa8c21a640dcb5dfc7b6c950?s=128&d=identicon&r=PG", "display_name": "Mark Kenny", "link": "https://stackoverflow.com/users/867439/mark-kenny"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1553076230, "post_id": 55245581, "comment_id": 97247612, "body": "I agree @CarySwoveland, I think I&#39;ll have to assume formats and not leave it so open."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1553012283, "creation_date": 1553012283, "answer_id": 55245581, "question_id": 55245432, "link": "https://stackoverflow.com/questions/55245432/how-is-date-parse123-456-789-fri-03-may-2019/55245581#55245581", "title": "How is : Date.parse(&quot;123 456 789&quot;) == Fri, 03 May 2019?", "body": "<p>The documentation on <a href=\"https://ruby-doc.org/stdlib/libdoc/date/rdoc/Date.html#method-c-parse\" rel=\"nofollow noreferrer\"><code>Date#parse</code></a> explicitly states:</p>\n\n<blockquote>\n  <p>This method does not function as a validator.</p>\n</blockquote>\n\n<p>That means, this method is omnivorous, it\u2019ll produce a date from whatever input. You need to use <a href=\"https://ruby-doc.org/stdlib/libdoc/date/rdoc/Date.html#method-c-iso8601\" rel=\"nofollow noreferrer\"><code>Date#iso8601</code></a> instead:</p>\n\n<pre><code>main &gt; Date.iso8601(\"2019-03-19\")\n#\u21d2 #&lt;Date: 2019-03-19 ((2458562j,0s,0n),+0s,2299161j)&gt;\nmain &gt; Date.iso8601(\"123 456 789\")\n#\u21d2\u00a0ArgumentError: invalid date\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1553016813, "post_id": 55245595, "comment_id": 97226575, "body": "<code>Date::parse</code> is especially useful for extracting hidden date information in strings: <code>Date._parse(&quot;When should &#39;can&#39; be used instead of &#39;may&#39;?&quot;) #=&gt; {:mon=&gt;5} </code>. :-)"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 6, "last_activity_date": 1553012773, "last_edit_date": 1553012773, "creation_date": 1553012316, "answer_id": 55245595, "question_id": 55245432, "link": "https://stackoverflow.com/questions/55245432/how-is-date-parse123-456-789-fri-03-may-2019/55245595#55245595", "title": "How is : Date.parse(&quot;123 456 789&quot;) == Fri, 03 May 2019?", "body": "<blockquote>\n  <p>How is : Date.parse(\u201c123 456 789\u201d) == Fri, 03 May 2019?</p>\n</blockquote>\n\n<p><a href=\"http://ruby-doc.org/stdlib-2.6.2/libdoc/date/rdoc/Date.html#method-c-_parse\" rel=\"noreferrer\"><code>Date._parse</code></a> (with an underscore) returns the raw data:</p>\n\n<pre><code>Date._parse('123 456 789')\n#=&gt; {:yday=&gt;123}\n</code></pre>\n\n<p>Ruby treats <code>123</code> as the day of the year and the 123rd day of the current year is May 3.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1553034733, "post_id": 55250915, "comment_id": 97234382, "body": "I cannot help but wonder if there is a gem that does this and more."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1553034668, "last_edit_date": 1592644375, "creation_date": 1553034668, "answer_id": 55250915, "question_id": 55245432, "link": "https://stackoverflow.com/questions/55245432/how-is-date-parse123-456-789-fri-03-may-2019/55250915#55250915", "title": "How is : Date.parse(&quot;123 456 789&quot;) == Fri, 03 May 2019?", "body": "<p>You (and possibly others) might find the following method useful. I've made the following assumptions:</p>\n<ul>\n<li>years must be four digits;</li>\n<li>invalid commas can be disregarded and removed (e.g., &quot;Jan, 3 2019&quot;); and</li>\n<li>the day of the week can be disregarded and removed, even if it is invalid for the date.</li>\n</ul>\n<h1><p></p></h1>\n<pre><code>MON_NAMES = Date::MONTHNAMES.drop(1).concat(Date::ABBR_MONTHNAMES.drop(1))\n  #=&gt; [&quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;,\n  #    &quot;July&quot;, &quot;August&quot;, &quot;September&quot;, &quot;October&quot;, &quot;November&quot;, &quot;December&quot;,\n  #    &quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;,\n  #    &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;] \nMON_REGEX = /\\b#{Regexp.union(MON_NAMES)}\\b(?!\\A)/\n  # =&gt; /\\b(?-mix:January|February|...|December|Jan|Feb|...|Dec)\\b(?!\\A)/ \nMONTH_STR_TO_NBR = MON_NAMES.each_with_index.map { |mon,i| [mon, &quot; #{1 + (i%12)} &quot;] }.to_h \n  #=&gt; {&quot;January&quot;=&gt;&quot; 1 &quot;, &quot;February&quot;=&gt;&quot; 2 &quot;, ... , &quot;December&quot;=&gt;&quot; 12 &quot;,\n  #    &quot;Jan&quot;=&gt;&quot; 1 &quot;, &quot;Feb&quot;=&gt;&quot; 2 &quot;, ... , &quot;Dec&quot;=&gt;&quot; 12 &quot;} \nDAY_REGEX = /\\b#{Regexp.union(Date::DAYNAMES + Date::ABBR_DAYNAMES)}\\b,?/\n  #=&gt; /\\b(?-mix:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sun|Mon|Tue|Wed|Thu|Fri|Sat)\\b,?/\n</code></pre>\n<h1><p></p></h1>\n<pre><code>def my_parse(date_str, locale = :US)\n  a = date_str.gsub(MON_REGEX, MONTH_STR_TO_NBR).\n               gsub(DAY_REGEX, '').\n               gsub(/(?&lt;!\\p{Alpha})(?:st|rd|th|,)(?!\\p{Alpha})/, '').\n               gsub(/[-\\/]/, ' ').\n               strip.\n               split\n  return nil if a.size != 3 || a.any? { |s| s.match?(/\\D/) }\n  yr_idx = a.index { |s| s.size == 4 }\n  return nil if yr_idx.nil? || yr_idx == 1\n  yr = a.delete_at(yr_idx)\n  return nil unless a.all? { |s| [1,2].include? s.size }\n  if yr_idx == 0\n    mon, day = a\n  else\n    mon, day = locale == :US ? a : a.reverse\n  end\n  begin\n    Date.strptime(&quot;%s %s %s&quot; % [mon, day, yr], '%m %d %Y')\n  rescue ArgumentError\n    nil\n  end\nend      \n</code></pre>\n<h1><p></p></h1>\n<pre><code>my_parse(&quot;Tue, 12th January 2019&quot;)      #=&gt; #&lt;Date: 2019-01-12 (...)&gt; \nmy_parse(&quot;Tue, 12th January 2019&quot;, :UK) #=&gt; #&lt;Date: 2019-12-01 (...)&gt; \nmy_parse(&quot;12/4/2019&quot;, :US)              #=&gt; #&lt;Date: 2019-04-12 (...)&gt;\nmy_parse(&quot;12/4/2019&quot;, :UK)              #=&gt; #&lt;Date: 2019-12-04 (...)&gt;\nmy_parse(&quot;Jan 12, 2019&quot;)                #=&gt; #&lt;Date: 2019-12-01 (...)&gt;\nmy_parse(&quot;2019 Jan 23rd&quot;)               #=&gt; #&lt;Date: 2019-01-23 (...)&gt; \nmy_parse(&quot;Jan 2019 4&quot;)                  #=&gt; nil \nmy_parse(&quot;1/2019/4&quot;)                    #=&gt; nil \nmy_parse(&quot;1/2019/4&quot;)                    #=&gt; nil    \nmy_parse(&quot;Jen 12, 2019&quot;)                #=&gt; nil \nmy_parse(&quot;3 Jan 12, 2019&quot;)              #=&gt; nil \n</code></pre>\n<p>I would encourage readers to identify any other assumptions required that I have not mentioned. This could of course be modified as needed. One change that could be made fairly easily would be to confirm that the day of week, if present, is correct for the given date.</p>\n"}], "owner": {"reputation": 1476, "user_id": 867439, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e11e4c7aaa8c21a640dcb5dfc7b6c950?s=128&d=identicon&r=PG", "display_name": "Mark Kenny", "link": "https://stackoverflow.com/users/867439/mark-kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 55245581, "answer_count": 3, "score": 4, "last_activity_date": 1553034668, "creation_date": 1553011798, "question_id": 55245432, "link": "https://stackoverflow.com/questions/55245432/how-is-date-parse123-456-789-fri-03-may-2019", "title": "How is : Date.parse(&quot;123 456 789&quot;) == Fri, 03 May 2019?", "body": "<p>The title pretty much says it all.  I'm trying to assess the validity of dates from a CSV import but if someone chooses a telephone number column for date of birth the Date parsing still passes</p>\n"}, {"tags": ["ruby", "slim"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1553011539, "post_id": 55245222, "comment_id": 97223627, "body": "Did you consider just putting parentheses after the if around the condition?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1553013674, "post_id": 55245222, "comment_id": 97224916, "body": "can you post the full backtrace errors?"}, {"owner": {"reputation": 860, "user_id": 5144469, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-_ZOgSDGQAuI/AAAAAAAAAAI/AAAAAAAAAE4/_Vbo9WVoh78/photo.jpg?sz=128", "display_name": "Andrew Torr", "link": "https://stackoverflow.com/users/5144469/andrew-torr"}, "edited": false, "score": 0, "creation_date": 1553020938, "post_id": 55245222, "comment_id": 97228645, "body": "Same thing happens when I add parentheses. And I would post them if I knew how. The exact error is &quot;undefined method `&gt;&#39; for nil:NilClass&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 860, "user_id": 5144469, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-_ZOgSDGQAuI/AAAAAAAAAAI/AAAAAAAAAE4/_Vbo9WVoh78/photo.jpg?sz=128", "display_name": "Andrew Torr", "link": "https://stackoverflow.com/users/5144469/andrew-torr"}, "edited": false, "score": 0, "creation_date": 1553021301, "post_id": 55246373, "comment_id": 97228829, "body": "This helped me figure it out - apparently if I put the number first, i.e. &quot;50 &lt; match_percent&quot;, it works the way I expected"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 860, "user_id": 5144469, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-_ZOgSDGQAuI/AAAAAAAAAAI/AAAAAAAAAE4/_Vbo9WVoh78/photo.jpg?sz=128", "display_name": "Andrew Torr", "link": "https://stackoverflow.com/users/5144469/andrew-torr"}, "edited": false, "score": 0, "creation_date": 1553033238, "post_id": 55246373, "comment_id": 97233899, "body": "@AndrewTorr glad it helped. However, I&#39;m curious what is the value of  <code>match_percent</code> in your errored code. Because it&#39;s just ruby and shouldn&#39;t matter the order or the operator of <code>&lt;</code> or <code>&gt;</code>"}, {"owner": {"reputation": 860, "user_id": 5144469, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-_ZOgSDGQAuI/AAAAAAAAAAI/AAAAAAAAAE4/_Vbo9WVoh78/photo.jpg?sz=128", "display_name": "Andrew Torr", "link": "https://stackoverflow.com/users/5144469/andrew-torr"}, "edited": false, "score": 0, "creation_date": 1553095911, "post_id": 55246373, "comment_id": 97260449, "body": "Turns out it was possible for match_percent to be nil, so I had to add a check for that as well. When it&#39;s guaranteed to be a number, I don&#39;t get the syntax error. However, it ended up being simpler to just define a ruby function that takes the match percent as an argument and returns the class name anyway"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1553034067, "last_edit_date": 1553034067, "creation_date": 1553014832, "answer_id": 55246373, "question_id": 55245222, "link": "https://stackoverflow.com/questions/55245222/comparing-numbers-in-slim/55246373#55246373", "title": "Comparing numbers in Slim", "body": "<p>Without seeing your backtrace errors, this is hard to debug but it should work.</p>\n\n<h3>test.slim</h3>\n\n<pre><code>doctype html\nhtml\n  head\n    title Slim Examples\n    meta name=\"keywords\" content=\"template language\"\n    javascript:\n      alert('Slim supports embedded javascript!')\n\n  body\n    h1 Markup examples\n\n    #content\n      p This example shows you how a basic Slim file looks.\n\n    - if 1 &lt; 2 \n        p 1 is less than 2 \n    - else\n      p No items found. Please add some inventory.\n        Thank you!\n\n    div id=\"footer\"\n      | Copyright &amp;copy; #{`Time`} #{'me'}\n</code></pre>\n\n<p>Run this from command line with no errors</p>\n\n<pre><code>slimrb test.slim\n#=&gt;\n&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;Slim Examples&lt;/title&gt;&lt;meta \ncontent=\"template language\" name=\"keywords\" /&gt;&lt;script&gt;alert('Slim \nsupports embedded javascript!')&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Markup \nexamples&lt;/h1&gt;&lt;div id=\"content\"&gt;&lt;p&gt;This example shows you how a basic \nSlim file looks.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;1 is less than 2 &lt;/p&gt;&lt;div \nid=\"footer\"&gt;Copyright &amp;copy;  me&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<h3>UPDATE</h3>\n\n<p>Based on your comment above:</p>\n\n<pre><code>undefined method `&gt;' for nil:NilClass\n</code></pre>\n\n<p>means whatever is called on the left side of <code>&gt;</code> in ruby is returning nil. So your bug is simply that. So in your example you could fix this with string interpolation. </p>\n\n<pre><code>- if \"#{match_percent.to_i}\" &gt; 50\n  span.classOne\n  | #{match_percent} %\n- else\n  span.classTwo\n  | #{match_percent} %\n</code></pre>\n\n<p>This way if <code>match_percent</code> is nil, your if statement still works.</p>\n"}], "owner": {"reputation": 860, "user_id": 5144469, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-_ZOgSDGQAuI/AAAAAAAAAAI/AAAAAAAAAE4/_Vbo9WVoh78/photo.jpg?sz=128", "display_name": "Andrew Torr", "link": "https://stackoverflow.com/users/5144469/andrew-torr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 55246373, "answer_count": 1, "score": 1, "last_activity_date": 1553034067, "creation_date": 1553011164, "question_id": 55245222, "link": "https://stackoverflow.com/questions/55245222/comparing-numbers-in-slim", "title": "Comparing numbers in Slim", "body": "<p>In Slim, how can you compare numbers?</p>\n\n<p>I want something along the lines of:</p>\n\n<pre><code>- if match_percent &gt; 50\n  span.classOne\n  | #{match_percent} %\n- else\n  span.classTwo\n  | #{match_percent} %\n</code></pre>\n\n<p>But the \">\" is regarded as a syntax error. Is this even possible? The documentation for Slim is absolutely terrible. I can't find any information about this anywhere</p>\n"}, {"tags": ["ruby", "eventmachine", "actioncable"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553010263, "post_id": 55244431, "comment_id": 97222777, "body": "What is your question? Can you explain it in words rather than cause us to have to decipher your code/pseudo code combination to determine your intention?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1553020957, "post_id": 55244431, "comment_id": 97228654, "body": "What exactly is not working with your code? The general approach looks fine to me."}, {"owner": {"reputation": 61, "user_id": 11205329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n0uHP.jpg?s=128&g=1", "display_name": "magynhard", "link": "https://stackoverflow.com/users/11205329/magynhard"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553065784, "post_id": 55244431, "comment_id": 97242309, "body": "@engineersmnky - i didn&#39;t figure out, how to interact with the EventMachine to get values from it and how to perform actions inside it from outside.So my pseudo code looks logical fine, but i didn&#39;t find a way to achieve this solution."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1554316857, "post_id": 55244431, "comment_id": 97710625, "body": "Why ActionCable? It seems to me that the overhead isn&#39;t something you need. You&#39;re customizing you messages anyway, might as well use raw WebSocket messages with your own simple JSON based protocol. This will also remove all the &quot;magic&quot; bits and make the communication easier to &quot;grok&quot;. If you need Pub/Sub, consider using the iodine client/server (note: I&#39;m biased)."}], "owner": {"reputation": 61, "user_id": 11205329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n0uHP.jpg?s=128&g=1", "display_name": "magynhard", "link": "https://stackoverflow.com/users/11205329/magynhard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1553066093, "creation_date": 1553008840, "last_edit_date": 1553066093, "question_id": 55244431, "link": "https://stackoverflow.com/questions/55244431/use-an-actioncableclient-connection-for-logging-and-receiving-data-alongside-the", "title": "Use an ActionCableClient connection for logging and receiving data alongside the main application", "body": "<p>when I start my application, I want ActionCable to transfer the logging to the server with a constant connection.</p>\n\n<p>With this connection i want to interact with - sending actions and reading received messages on demand.</p>\n\n<p>Since I have hardly dealt with EventMachine so far and found nothing on the Internet about my problem, here my question.</p>\n\n<p>I will describe my problem/solution with a mix of real ruby and ruby pseudo code.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'action_cable_client'\n\nmy_thread = Thread.new do\n  EventMachine.run do\n    @@message_storage = []\n    uri = \"ws://127.0.0.1:3000/cable\"\n    client = ActionCableClient.new(uri, 'LoggingChannel')\n\n    client.connected do\n      puts 'successfully connected.'\n    end\n\n    client.disconnected do\n      puts 'disconnected.'\n    end\n\n    client.received do |message|\n      puts \"Got a message: #{message}\"\n      @@message_storage += [message]\n    end\n  end\nend\n\n# here is my main app loop\n\nsome_actions()\n\nif error\n  my_thread.client.perform('error', {message: 'error 123 occured'})\nend\n\nif warning\n  my_thread.client.perform('info', {message: 'some information for you'})\nend\n\nputs \"Currently there are #{my_thread.@@message_storage.size} messages in storage\"\n\n</code></pre>\n\n<p>Is there a solution?</p>\n\n<p><strong>Additional information, my intention:</strong></p>\n\n<p>I didn't figure out (so there is only pseudo code for it, that logically looks fine)</p>\n\n<ul>\n<li>how i can interact with the ActionCable inside the EventMachine to perform a task in it from outside</li>\n<li>how i can access a value inside the EventMachine/ActionCable from outside</li>\n</ul>\n"}, {"tags": ["ruby", "rake", "rakefile"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1553008661, "creation_date": 1553008661, "answer_id": 55244366, "question_id": 55244332, "link": "https://stackoverflow.com/questions/55244332/rakefile-task-does-not-accept-second-parameters/55244366#55244366", "title": "rakefile task does not accept second parameters", "body": "<p>The parameters should be separated by commas <strong>without spaces</strong>:</p>\n\n<pre><code>task1[TARGET_1,5]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1553011753, "creation_date": 1553011753, "answer_id": 55245420, "question_id": 55244332, "link": "https://stackoverflow.com/questions/55244332/rakefile-task-does-not-accept-second-parameters/55245420#55245420", "title": "rakefile task does not accept second parameters", "body": "<p>Command line arguments are separated by spaces and rake treats each argument as a separate task. This would run tasks <code>foo</code> and <code>bar</code>:</p>\n\n<pre><code>rake foo bar\n</code></pre>\n\n<p>If you have:</p>\n\n<pre><code>rake task1[TARGET_1, 5]\n</code></pre>\n\n<p>then rake gets two arguments: <code>task1[TARGET_1,</code> and <code>5]</code>. Trying to parse these strings results in an error.</p>\n\n<p>To get the correct result, you can remove the space, escape the space, or put the argument in quotes:</p>\n\n<pre><code>rake task1[TARGET_1,5]\nrake task1[TARGET_1,\\ 5]\nrake \"task1[TARGET_1, 5]\"\n</code></pre>\n\n<p>Note that this behavior isn't rake specific, that's how command line arguments work in general.</p>\n"}], "owner": {"reputation": 59, "user_id": 7364533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5fcb00352996cac0a9a8e9a9a8b2e2?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/7364533/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1553011753, "creation_date": 1553008568, "last_edit_date": 1553008617, "question_id": 55244332, "link": "https://stackoverflow.com/questions/55244332/rakefile-task-does-not-accept-second-parameters", "title": "rakefile task does not accept second parameters", "body": "<p>I have piece of code from my rakefile. Few tasks have to have multiple parameters. </p>\n\n<pre><code>desc 'confidential'\n  task :task1, [:targetPrj, :arg1] do |t,args|\n  args.with_defaults(:arg1 =&gt; \"0\")\n  TARGET_PROJECT = args[:targetPrj]\n  TEST_SW = args[:emcTest]\n  makeApp(t)\nend\n</code></pre>\n\n<p>If I call <code>rake task1[TARGET _1]</code> everything is OK, but if I add second parameter rake <code>task1[TARGET _1, 5]</code> then I get:</p>\n\n<pre><code>Rake aborted!\nDon't know how to build task task1[TARGET_1, '\n</code></pre>\n\n<p>I really do not know what is wrong?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1553008504, "post_id": 55244298, "comment_id": 97221599, "body": "Prepend <code>bundle exec</code> like: <code>bundle exec rails c</code>."}, {"owner": {"reputation": 266, "user_id": 5779471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664d4fd2113141c6c85e7b9c3052b1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Miro", "link": "https://stackoverflow.com/users/5779471/miro"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1553008576, "post_id": 55244298, "comment_id": 97221651, "body": "@AlekseiMatiushkin I tried this and I got:  &gt; /home/mirek/.rvm/gems/ruby-2.4.0/gems/railties-5.2.2.1/lib/r&zwnj;&#8203;ails/railtie/configu&zwnj;&#8203;ration.rb:97:in <code>method_missing&#39;: undefined method </code>active_storage&#39; for #&lt;Rails::Application::Configuration:0x00563f8c7bcd58&gt; (NoMethodError)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1553008806, "post_id": 55244298, "comment_id": 97221794, "body": "Does your <code>Gemfile</code> has <code>gem &#39;rails&#39;, &#39;~&gt; 5.2.2&#39;</code> line? Have you run <code>bundle install</code> after <code>Gemfile</code> was updated?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1553008911, "post_id": 55244298, "comment_id": 97221856, "body": "@Miro is <code>active_storage</code> required in your application.rb file? If not and you need it then add <code>require &#39;active_storage&#47;engine&#39;</code>. If you do not need active storage then comment out the line in question from your environment files (other files may need changes as well) <a href=\"https://stackoverflow.com/questions/49813214/disable-active-storage-in-rails-5-2\">See Here</a>"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1553009218, "post_id": 55244298, "comment_id": 97222069, "body": "Double check active_storage installation <a href=\"https://github.com/rails/rails/tree/master/activestorage#installation\" rel=\"nofollow noreferrer\">github.com/rails/rails/tree/master/activestorage#installatio&zwnj;&#8203;n</a> and that the gem is properly installed by bundler."}, {"owner": {"reputation": 266, "user_id": 5779471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664d4fd2113141c6c85e7b9c3052b1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Miro", "link": "https://stackoverflow.com/users/5779471/miro"}, "edited": false, "score": 0, "creation_date": 1553009789, "post_id": 55244298, "comment_id": 97222452, "body": "Still not working after all your answers."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553010968, "post_id": 55244298, "comment_id": 97223230, "body": "@Miro you are going to have to be more specific. The error you are receiving means that the <code>ActiveStorage::Engine</code> is not loaded can you confirm whether or not you need <code>ActiveStorage</code> and if you do can you confirm that your application.rb file includes the line I mentioned?"}, {"owner": {"reputation": 266, "user_id": 5779471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664d4fd2113141c6c85e7b9c3052b1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Miro", "link": "https://stackoverflow.com/users/5779471/miro"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553028132, "post_id": 55244298, "comment_id": 97231994, "body": "@engineersmnky I tried to do this with line <code>require &#39;active_storage&#47;engine&#39;</code> but it doesn&#39;t help. Actually I think that I don&#39;t need <code>ActiveStorage</code>"}, {"owner": {"reputation": 266, "user_id": 5779471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664d4fd2113141c6c85e7b9c3052b1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Miro", "link": "https://stackoverflow.com/users/5779471/miro"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553028715, "post_id": 55244298, "comment_id": 97232266, "body": "@engineersmnky I don&#39;t have this line right now but still the same :)"}, {"owner": {"reputation": 266, "user_id": 5779471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664d4fd2113141c6c85e7b9c3052b1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Miro", "link": "https://stackoverflow.com/users/5779471/miro"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553029820, "post_id": 55244298, "comment_id": 97232698, "body": "@engineersmnky All my files: application.rb, development.rb, production.rb and test.rb are free of active_storage lines."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553030101, "post_id": 55244298, "comment_id": 97232783, "body": "Post the whole stack trace then."}, {"owner": {"reputation": 266, "user_id": 5779471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664d4fd2113141c6c85e7b9c3052b1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Miro", "link": "https://stackoverflow.com/users/5779471/miro"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553030880, "post_id": 55244298, "comment_id": 97233071, "body": "@engineersmnky I think that it is deeper problem because I cant&#39;s work with other RoR projects on my computer."}, {"owner": {"reputation": 266, "user_id": 5779471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664d4fd2113141c6c85e7b9c3052b1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Miro", "link": "https://stackoverflow.com/users/5779471/miro"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1553030995, "post_id": 55244298, "comment_id": 97233113, "body": "@engineersmnky When I comment lines <code>config.active_record.migration_error = :page_load</code>, <code>config.active_record.migration_error = :page_load</code> and <code>config.active_record.verbose_query_logs = true</code> I can run Rails server with no errors but other Rails commands like <code>rails db:schema:dump</code> still don&#39;t work and give en error: <code>rails aborted! Don&#39;t know how to build task &#39;db:schema:dump&#39; (See the list of available tasks with </code>rake --tasks<code>)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 266, "user_id": 5779471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664d4fd2113141c6c85e7b9c3052b1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Miro", "link": "https://stackoverflow.com/users/5779471/miro"}, "edited": false, "score": 0, "creation_date": 1554127706, "post_id": 55290081, "comment_id": 97627204, "body": "I reinstalled Ubuntu 18.04 and I configured the whole environment and now everything works fine."}], "tags": [], "owner": {"reputation": 49, "user_id": 9453964, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bgOHwpKb7LM/AAAAAAAAAAI/AAAAAAAACrg/bo62ScuklrI/photo.jpg?sz=128", "display_name": "Jennifer Mansker-Bickel", "link": "https://stackoverflow.com/users/9453964/jennifer-mansker-bickel"}, "is_accepted": false, "score": 0, "last_activity_date": 1553206616, "creation_date": 1553206616, "answer_id": 55290081, "question_id": 55244298, "link": "https://stackoverflow.com/questions/55244298/rails-doesnt-work-correctly-after-update/55290081#55290081", "title": "Rails doesn&#39;t work correctly after update", "body": "<p>It started after an update? Are you working in a linux environment? Check your file permissions and owner:group values, they may have changed after your update and you may need to switch to root to set them back to a usable state. Obvious? Maybe, but this has caught me out too many times lately!</p>\n"}], "owner": {"reputation": 266, "user_id": 5779471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664d4fd2113141c6c85e7b9c3052b1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Miro", "link": "https://stackoverflow.com/users/5779471/miro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553206616, "creation_date": 1553008444, "question_id": 55244298, "link": "https://stackoverflow.com/questions/55244298/rails-doesnt-work-correctly-after-update", "title": "Rails doesn&#39;t work correctly after update", "body": "<p>I have a problem with Rails, which may seem trivial to you, but I will describe below what is going on.</p>\n\n<p>A set that I use everyday:</p>\n\n<ul>\n<li>Ubuntu 18.04 </li>\n<li>ruby-2.4.0</li>\n<li>Rails 5.2.1 (few days ago was and update to 5.2.2.1)</li>\n</ul>\n\n<p>I had a problem with mysql for a few days, but I solved it and it works. I noticed that all projects stopped working for me at the local. When I try to run a project that was written in Rails 5.2.1, I get this error:</p>\n\n<blockquote>\n  <p>/home/mirek/.rvm/gems/ruby-2.4.0/gems/railties-5.2.1/lib/rails/railtie/configuration.rb:97:in method_missing': undefined methodactive_storage' for #Rails::Application::Configuration:0x00564a221eeae8 (NoMethodError)</p>\n</blockquote>\n\n<p>The commands like <strong>rails s</strong> or <strong>rails c</strong> don't work and <strong>rails -T</strong> displays a very narrow list of available commands to use.</p>\n\n<p>When I try to use <strong>rails db:schema:dump</strong> I get:</p>\n\n<blockquote>\n  <p>rails aborted! Don\u2019t know how to build task 'db:schema:dump'</p>\n</blockquote>\n\n<p>I also checked if other similar versions of Rails would also appear same error and it is the same. I'm looking for a solution in Google but still the same.</p>\n\n<p>Can anyone help me with this?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "is_accepted": false, "score": 0, "last_activity_date": 1553123287, "creation_date": 1553123287, "answer_id": 55271442, "question_id": 55244039, "link": "https://stackoverflow.com/questions/55244039/comparing-versions-in-ruby-with-develop-snapshot/55271442#55271442", "title": "Comparing versions in Ruby with develop-SNAPSHOT", "body": "<p>According to <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/rubygems/rdoc/Gem/Version.html\" rel=\"nofollow noreferrer\">doc</a>:</p>\n\n<blockquote>\n  <p>A version string should normally be a series of numbers separated by periods. Each part (digits separated by periods) is considered its own number, and these are used for sorting. So for instance, 3.10 sorts higher than 3.2 because ten is greater than two.</p>\n</blockquote>\n\n<p>So your version strings (<code>'develop-SNAPSHOT-1529333073'</code> and <code>'develop-SNAPSHOT'</code>) are both in wrong format.</p>\n\n<p>You should change format of your version string, e.g. to just <code>'1529333073'</code> without prefix and everything will be OK.</p>\n\n<p>If you want to have prefix in your version strings, you need remove it before using <code>Gem::Version.new()</code>.<br>\nFor example, the code below will work as you expected:</p>\n\n<pre><code>Gem::Version.new('develop-SNAPSHOT-1529333073'.sub(/develop-SNAPSHOT-?/, '')) &gt; \n   Gem::Version.new('develop-SNAPSHOT'.sub(/develop-SNAPSHOT-?/, ''))\n\n=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 685, "user_id": 4101942, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/16682f96abc82b25c2f9cb55341a4725?s=128&d=identicon&r=PG&f=1", "display_name": "thewire247", "link": "https://stackoverflow.com/users/4101942/thewire247"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553123287, "creation_date": 1553007730, "question_id": 55244039, "link": "https://stackoverflow.com/questions/55244039/comparing-versions-in-ruby-with-develop-snapshot", "title": "Comparing versions in Ruby with develop-SNAPSHOT", "body": "<p>I am looking to compare package versions in ruby. Some of my package names are develop-SNAPSHOT.</p>\n\n<p>When using something like</p>\n\n<pre><code>Gem::Version.new('develop-SNAPSHOT-1529333073') &gt; Gem::Version.new('develop-SNAPSHOT') \n</code></pre>\n\n<p>I get the response</p>\n\n<pre><code>ArgumentError: Malformed version number string develop-SNAPSHOT-1529333073\n</code></pre>\n\n<p>In python I would use packaging.version.parse() to compare similar strings to this and it would work fine with that, is there anything equivalent in Ruby?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "edited": false, "score": 1, "creation_date": 1553006635, "post_id": 55243471, "comment_id": 97220311, "body": "Great question. These are always such tough things to figure out in languages and have such satisfying &quot;ah ha!&quot; moments when you figure out what&#39;s happening :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1553008757, "post_id": 55243471, "comment_id": 97221757, "body": "To get the expected result use <code>numbers.map {|number| number &lt; 2 }.uniq</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1553076815, "post_id": 55243471, "comment_id": 97247977, "body": "What is <code>p</code> in the block doing?"}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 9747910, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Justin Duncan", "link": "https://stackoverflow.com/users/9747910/justin-duncan"}, "edited": false, "score": 0, "creation_date": 1553006908, "post_id": 55243521, "comment_id": 97220486, "body": "The true/false would come from the map. I do understand what uniq returns. I am not understanding why if I swap <code>uniq</code> and <code>map</code> why uniq will do it&#39;s thing and pass the result forward to map but the opposite is not true."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1553007729, "post_id": 55243521, "comment_id": 97221073, "body": "<a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\"><code>Enumerable#map</code></a> returns an <a href=\"https://ruby-doc.org/core/Enumerator.html\" rel=\"nofollow noreferrer\"><code>Enumerator</code></a> <b>instance</b>, not an <code>Enumerable</code>. This is usually a result of call to <a href=\"https://ruby-doc.org/core/Object.html#method-i-enum_for\" rel=\"nofollow noreferrer\"><code>Object#enum_for</code></a>: <code>def my_each; return enum_for(:each) unless block_given?; ... end</code>."}], "tags": [], "owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "is_accepted": false, "score": 3, "last_activity_date": 1553006583, "last_edit_date": 1553006583, "creation_date": 1553006201, "answer_id": 55243521, "question_id": 55243471, "link": "https://stackoverflow.com/questions/55243471/why-does-uniq-return-original-value-of-array-after-map-in-ruby/55243521#55243521", "title": "Why does uniq return original value of array after map in Ruby?", "body": "<p>You're not actually doing anything with the map call, your function is roughly equivalent to this:</p>\n\n<pre><code>[1,2,2,3,4].uniq {|number| p number &lt; 2 }\n</code></pre>\n\n<p>Methods like <code>map</code> return an <code>Enumerable</code> type, and you are then calling <code>uniq</code> on that <code>Enumerable</code>. From the <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\">Ruby docs</a>:</p>\n\n<blockquote>\n  <p>If no block is given, an Enumerator is returned instead.</p>\n</blockquote>\n\n<p>Effectively your map is a no-op. </p>\n\n<p>I think you're also misunderstanding the <code>uniq</code> method. <code>Uniq</code> is going to filter out any elements from an array that aren't unique (eg: <code>[1, 1, 2, 3, 3, 4, 5].uniq == [1, 2, 3, 4, 5]</code>), not return whether the element is unique (true or false) in the array.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1553006578, "post_id": 55243589, "comment_id": 97220275, "body": "Maybe add a little context to this answer. You are not wrong, although the result will differ for the proposed intention, you have just not explained anything right now. Remember this is a teachable moment for the OP so offer some insight"}, {"owner": {"reputation": 88, "user_id": 9747910, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Justin Duncan", "link": "https://stackoverflow.com/users/9747910/justin-duncan"}, "edited": false, "score": 0, "creation_date": 1553006672, "post_id": 55243589, "comment_id": 97220327, "body": "This makes me wonder why uniq can be pass forward values but map will not?"}, {"owner": {"reputation": 187, "user_id": 5872997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A7X5TdH9uoc/AAAAAAAAAAI/AAAAAAAAAEM/JA2VfopILws/photo.jpg?sz=128", "display_name": "Slava Zharkov", "link": "https://stackoverflow.com/users/5872997/slava-zharkov"}, "reply_to_user": {"reputation": 88, "user_id": 9747910, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Justin Duncan", "link": "https://stackoverflow.com/users/9747910/justin-duncan"}, "edited": false, "score": 0, "creation_date": 1553007933, "post_id": 55243589, "comment_id": 97221216, "body": "@JustinDuncan Please, read documentation for uniq method <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-uniq\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6.1/Array.html#method-i-uniq</a> <code>ruby numbers.map.uniq {|number| p number &lt; 2 } </code> equivalent to <code>ruby numbers.uniq {|number| p number &lt; 2 } </code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1553008187, "post_id": 55243589, "comment_id": 97221377, "body": "@AlekseiMatiushkin you got there first"}], "tags": [], "owner": {"reputation": 187, "user_id": 5872997, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A7X5TdH9uoc/AAAAAAAAAAI/AAAAAAAAAEM/JA2VfopILws/photo.jpg?sz=128", "display_name": "Slava Zharkov", "link": "https://stackoverflow.com/users/5872997/slava-zharkov"}, "is_accepted": false, "score": -1, "last_activity_date": 1553079624, "last_edit_date": 1553079624, "creation_date": 1553006398, "answer_id": 55243589, "question_id": 55243471, "link": "https://stackoverflow.com/questions/55243471/why-does-uniq-return-original-value-of-array-after-map-in-ruby/55243589#55243589", "title": "Why does uniq return original value of array after map in Ruby?", "body": "<pre class=\"lang-rb prettyprint-override\"><code>numbers.uniq.map { |number| number &lt; 2 }\n</code></pre>\n\n<p><br/></p>\n\n<h2>uniq method</h2>\n\n<blockquote>\n  <p>uniq \u2192 new_ary click to toggle source uniq {|item| ...} \u2192 new_ary\n  Returns a new array by removing duplicate values in self.</p>\n  \n  <p>If a block is given, it will use the return value of the block for\n  comparison.\n  It compares values using their hash and eql? methods for efficiency.\n  self is traversed in order, and the first occurrence is kept.</p>\n  \n  <p>a = [ \"a\", \"a\", \"b\", \"b\", \"c\" ]</p>\n  \n  <p>a.uniq   # => [\"a\", \"b\", \"c\"]</p>\n  \n  <p>b = [[\"student\",\"sam\"], [\"student\",\"george\"], [\"teacher\",\"matz\"]]</p>\n  \n  <p>b.uniq {|s| s.first}   # => [[\"student\", \"sam\"], [\"teacher\", \"matz\"]]</p>\n</blockquote>\n\n<p>You can read more about uniq method <a href=\"http://ruby-doc.org/core-2.6.1/Array.html#method-i-uniq\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1553009018, "last_edit_date": 1553009018, "creation_date": 1553008080, "answer_id": 55244170, "question_id": 55243471, "link": "https://stackoverflow.com/questions/55243471/why-does-uniq-return-original-value-of-array-after-map-in-ruby/55244170#55244170", "title": "Why does uniq return original value of array after map in Ruby?", "body": "<p><a href=\"https://ruby-doc.org/core/Array.html#method-i-uniq\" rel=\"nofollow noreferrer\"><code>Array#uniq</code></a> accepts a block, defining <em>the condition on what should be treated <code>uniq</code></em>.</p>\n\n<pre><code>main &gt; numbers = [1,2,2,3,4].map\n#\u21d2 #&lt;Enumerator: ...&gt;\nmain &gt; numbers.uniq\n#\u21d2 [1, 2, 3, 4]\n\n# effectively the same as\nmain &gt; numbers.to_a.uniq\n#\u21d2 [1, 2, 3, 4]\n\nmain &gt; numbers.uniq { |number| number.odd? }\n#\u21d2 [1, 2]\n</code></pre>\n\n<p>The latter returns one odd and one non-odd (even) element. In your case it returns 1 element that is less than 2 and one element that is greater or equal to two.</p>\n\n<hr>\n\n<p>Note, that <code>map</code> enumerator is effectively there:</p>\n\n<pre><code>numbers.each &amp;Math.method(:sqrt)\n#\u21d2 [1.0, 1.4142135623730951, 1.4142135623730951,\n#        1.7320508075688772, 2.0]\n</code></pre>\n"}], "owner": {"reputation": 88, "user_id": 9747910, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Justin Duncan", "link": "https://stackoverflow.com/users/9747910/justin-duncan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 55244170, "answer_count": 3, "score": 1, "last_activity_date": 1553134088, "creation_date": 1553006074, "last_edit_date": 1553134088, "question_id": 55243471, "link": "https://stackoverflow.com/questions/55243471/why-does-uniq-return-original-value-of-array-after-map-in-ruby", "title": "Why does uniq return original value of array after map in Ruby?", "body": "<p>I tried the following code:</p>\n\n<pre><code>numbers = [1,2,2,3,4]\nnumbers.map.uniq {|number| number &lt; 2 }\n</code></pre>\n\n<p>My understanding is that the return value of <code>map</code> is passed to <code>uniq</code>. I expected:</p>\n\n<pre><code>[true, false]\n</code></pre>\n\n<p>Instead, I received:</p>\n\n<pre><code>[1, 2]\n</code></pre>\n\n<p>It seems that <code>uniq</code> maintains a reference to the original array.</p>\n\n<p>Could someone provide insight into this behaviour?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "serialization", "attributes"], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": false, "score": 0, "last_activity_date": 1553005262, "creation_date": 1553005262, "answer_id": 55243189, "question_id": 55242904, "link": "https://stackoverflow.com/questions/55242904/how-to-remove-multiple-attributes-from-a-json-using-ruby/55243189#55243189", "title": "How to remove multiple attributes from a json using ruby", "body": "<p>I think that the easiest solution would be to:</p>\n\n<ol>\n<li><p>convert JSON into hash (<code>JSON.parse(input)</code>)</p></li>\n<li><p>use <a href=\"https://stackoverflow.com/a/47318853/2039726\">this answer</a> to extend the functionality of Hash (save it in <code>config/initializers/except_nested.rb</code>)</p></li>\n<li><p>on the hash from 1st step, call:</p>\n\n<p><code>without_passthrough = your_hash.except_nested('passthrough_fields')</code></p></li>\n<li><p>covert hash to JSON (<code>without_passthrough.to_json</code>)</p></li>\n</ol>\n\n<p>Please keep in mind that it will work for <code>passthrough_fields</code> that is nested directly in hashes. In your JSON, you have the following part:</p>\n\n<pre><code>\"uris\" =&gt; [\n  {\n    \"type\"=&gt;\"latest\",\n    \"label\"=&gt;\"Latest\",\n    \"uri\"=&gt;\"/v2/programmes/playable?container=p06qbzmj&amp;sort=sequential&amp;type=episode\",\n\"passthrough_fields\"=&gt;{}\n  }\n]\n</code></pre>\n\n<p>In this case, the <code>passthrough_fields</code> will not be removed. You have to find a more sophisticated solution :)</p>\n"}, {"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1553094047, "post_id": 55243676, "comment_id": 97259107, "body": "Did this help at all @NipunTanay? Believe it does all you&#39;re after - let me know how you get on with it."}, {"owner": {"reputation": 49, "user_id": 5706450, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-tnI0j-lzzW0/AAAAAAAAAAI/AAAAAAAAAGc/FugDed2H1JI/photo.jpg?sz=128", "display_name": "Nipun Tanay", "link": "https://stackoverflow.com/users/5706450/nipun-tanay"}, "edited": false, "score": 1, "creation_date": 1555069398, "post_id": 55243676, "comment_id": 97990327, "body": "It worked like a charm @SRack. Thanks a lot for it."}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 1, "last_activity_date": 1553011793, "last_edit_date": 1553011793, "creation_date": 1553006693, "answer_id": 55243676, "question_id": 55242904, "link": "https://stackoverflow.com/questions/55242904/how-to-remove-multiple-attributes-from-a-json-using-ruby/55243676#55243676", "title": "How to remove multiple attributes from a json using ruby", "body": "<p>You can do this recursively to tackle nested occurances of <code>passthrough_fields</code>, whether they're found in an array or a sub hash. Inline comments to explain things a little as it goes:</p>\n\n<pre><code>hash = JSON.parse(input) #\u00a0convert the JSON to a hash\n\ndef remove_recursively(hash, *to_remove)\n  hash.each do |key, val|\n    hash.except!(*to_remove) # the heavy lifting: remove all keys that match `to_remove`\n\n    remove_recursively(val, *to_remove) if val.is_a? Hash #\u00a0if a nested hash, run this method on it\n\n    if val.is_a? Array # if a nested array, loop through this checking for hashes to run this method on\n      val.each { |el| remove_recursively(el, *to_remove) if el.is_a? Hash } \n    end\n  end\nend\n\nremove_recursively(hash, 'passthrough_fields')\n</code></pre>\n\n<p>To demonstrate, with a  simplified example:</p>\n\n<pre><code>hash =  { \n          \"test\" =&gt; { \"passthrough_fields\" =&gt; [1, 2, 3], \"wow\" =&gt; '123' }, \n          \"passthrough_fields\" =&gt; [4, 5, 6],\n          \"array_values\" =&gt; [{ \"to_stay\" =&gt; \"I am\", \"passthrough_fields\" =&gt; [7, 8, 9]}]\n        }\n\nremove_recursively(hash, 'passthrough_fields')\n#=&gt; {\"test\"=&gt;{\"wow\"=&gt;\"123\"}, \"array_values\"=&gt;[{\"to_stay\"=&gt;\"I am\"}]}\n\nremove_recursively(hash, 'passthrough_fields', 'wow', 'to_stay')\n#=&gt; {\"test\"=&gt;{}, \"array_values\"=&gt;[{}]}\n</code></pre>\n\n<p>This will tackle any arrays, and will dig for nested hashes however deep it needs to go.</p>\n\n<p>It takes any number of fields to remove, in this case a single <code>'passthrough_fields'</code>.</p>\n\n<p>Hope this helps, let me know how you get on.</p>\n"}, {"tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": false, "score": 0, "last_activity_date": 1553007107, "last_edit_date": 1553007107, "creation_date": 1553006753, "answer_id": 55243695, "question_id": 55242904, "link": "https://stackoverflow.com/questions/55242904/how-to-remove-multiple-attributes-from-a-json-using-ruby/55243695#55243695", "title": "How to remove multiple attributes from a json using ruby", "body": "<p>You can do something like this:</p>\n\n<pre><code>def nested_except(hash, except_key)\n  sanitized_hash = {}\n  hash.each do |key, value|\n    next if key == except_key\n    sanitized_hash[key] = value.is_a?(Hash) ? nested_except(value, except_key) : value\n  end\n  sanitized_hash\nend\n\njson = JSON.parse(json_string)\nsanitized = nested_except(json, 'passthrough_fields')\n</code></pre>\n\n<p>See example:</p>\n\n<pre><code>json = { :a =&gt; 1, :b =&gt; 2, :c =&gt; { :a =&gt; 1, :b =&gt; { :a =&gt; 1 } } }\nnested_except(json, :a)\n# =&gt; {:b=&gt;2, :c=&gt;{:b=&gt;{}}}\n</code></pre>\n\n<p>This helper can easily be converted to support multiple keys to except, simply by <code>except_keys = Array.wrap(except_key)</code> and <code>next if except_keys.include?(key)</code> </p>\n"}], "owner": {"reputation": 49, "user_id": 5706450, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-tnI0j-lzzW0/AAAAAAAAAAI/AAAAAAAAAGc/FugDed2H1JI/photo.jpg?sz=128", "display_name": "Nipun Tanay", "link": "https://stackoverflow.com/users/5706450/nipun-tanay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 55243676, "answer_count": 3, "score": 1, "last_activity_date": 1553011793, "creation_date": 1553004352, "last_edit_date": 1553006031, "question_id": 55242904, "link": "https://stackoverflow.com/questions/55242904/how-to-remove-multiple-attributes-from-a-json-using-ruby", "title": "How to remove multiple attributes from a json using ruby", "body": "<p>I have a json object. It has multiple fields \"passthrough_fields\" which is unnecessary for me and I want to remove them. Is there a way to get all those attributes filtered out?\nJSON:</p>\n\n<pre><code>{\n\"type\": \"playable_item\",\n\"id\": \"p06s0lq7\",\n\"urn\": \"urn:bbc:radio:episode:p06s0mk3\",\n\"network\": {\n    \"id\": \"bbc_radio_five_live\",\n    \"key\": \"5live\",\n    \"short_title\": \"Radio 5 live\",\n    \"logo_url\": \"https://sounds.files.bbci.co.uk/v2/networks/bbc_radio_five_live/{type}_{size}.{format}\",\n    \"passthrough_fields\": {}\n},\n\"titles\": {\n    \"primary\": \"Replay\",\n    \"secondary\": \"Bill Shankly\",\n    \"tertiary\": null,\n    \"passthrough_fields\": {}\n},\n\"synopses\": {\n    \"short\": \"Bill Shankly with Sue MacGregor in 1979 - five years after he resigned as Liverpool boss.\",\n    \"medium\": null,\n    \"long\": \"Bill Shankly in conversation with Sue MacGregor in 1979, five years after he resigned as Liverpool manager.\",\n    \"passthrough_fields\": {}\n},\n\"image_url\": \"https://ichef.bbci.co.uk/images/ic/{recipe}/p06qbz1x.jpg\",\n\"duration\": {\n    \"value\": 1774,\n    \"label\": \"29 mins\",\n    \"passthrough_fields\": {}\n},\n\"progress\": null,\n\"container\": {\n    \"type\": \"series\",\n    \"id\": \"p06qbzmj\",\n    \"urn\": \"urn:bbc:radio:series:p06qbzmj\",\n    \"title\": \"Replay\",\n    \"synopses\": {\n        \"short\": \"Colin Murray unearths classic sports commentaries and interviews from the BBC archives.\",\n        \"medium\": \"Colin Murray looks back at 90 years of sport on the BBC by unearthing classic commentaries and interviews from the BBC archives.\",\n        \"long\": null,\n        \"passthrough_fields\": {}\n    },\n    \"activities\": [],\n    \"passthrough_fields\": {}\n},\n\"availability\": {\n    \"from\": \"2018-11-16T16:18:54Z\",\n    \"to\": null,\n    \"label\": \"Available for over a year\",\n    \"passthrough_fields\": {}\n},\n\"guidance\": {\n    \"competition_warning\": false,\n    \"warnings\": null,\n    \"passthrough_fields\": {}\n},\n\"activities\": [],\n\"uris\": [\n    {\n        \"type\": \"latest\",\n        \"label\": \"Latest\",\n        \"uri\": \"/v2/programmes/playable?container=p06qbzmj&amp;sort=sequential&amp;type=episode\",\n        \"passthrough_fields\": {}\n    }\n],\n\"passthrough_fields\": {}\n}\n</code></pre>\n\n<p>Is there a way I can remove all those fields and store the updated json in a new variable?</p>\n"}, {"tags": ["ruby", "sketchup"], "answers": [{"comments": [{"owner": {"reputation": 6322, "user_id": 1392235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c11ab2312c3c59df33b8b9ec0fb2ba2?s=128&d=identicon&r=PG", "display_name": "Davesexcel", "link": "https://stackoverflow.com/users/1392235/davesexcel"}, "edited": false, "score": 0, "creation_date": 1553081314, "post_id": 55245891, "comment_id": 97250595, "body": "Thanks, when I go to the materials folder, it&#39;s empty"}, {"owner": {"reputation": 2208, "user_id": 6584878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef2518f750afd08b60ab22d5ec9ddb8?s=128&d=identicon&r=PG&f=1", "display_name": "avariant", "link": "https://stackoverflow.com/users/6584878/avariant"}, "reply_to_user": {"reputation": 6322, "user_id": 1392235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c11ab2312c3c59df33b8b9ec0fb2ba2?s=128&d=identicon&r=PG", "display_name": "Davesexcel", "link": "https://stackoverflow.com/users/1392235/davesexcel"}, "edited": false, "score": 0, "creation_date": 1553092845, "post_id": 55245891, "comment_id": 97258185, "body": "If you are looking for the default location where SketchUp stores it&#39;s built in materials, that&#39;s C:\\Users\\All Users\\SketchUp\\SketchUp 2017\\SketchUp\\Materials (or whatever your version of SketchUp that you are using).  Note, though, that the materials are stored in .skm format which is actually just a zip file."}, {"owner": {"reputation": 2208, "user_id": 6584878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef2518f750afd08b60ab22d5ec9ddb8?s=128&d=identicon&r=PG&f=1", "display_name": "avariant", "link": "https://stackoverflow.com/users/6584878/avariant"}, "reply_to_user": {"reputation": 6322, "user_id": 1392235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c11ab2312c3c59df33b8b9ec0fb2ba2?s=128&d=identicon&r=PG", "display_name": "Davesexcel", "link": "https://stackoverflow.com/users/1392235/davesexcel"}, "edited": false, "score": 1, "creation_date": 1553092899, "post_id": 55245891, "comment_id": 97258235, "body": "Your material texture doesn&#39;t have to come from there though.  You can use any image file on your drive"}], "tags": [], "owner": {"reputation": 2208, "user_id": 6584878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef2518f750afd08b60ab22d5ec9ddb8?s=128&d=identicon&r=PG&f=1", "display_name": "avariant", "link": "https://stackoverflow.com/users/6584878/avariant"}, "is_accepted": true, "score": 1, "last_activity_date": 1553013336, "creation_date": 1553013336, "answer_id": 55245891, "question_id": 55242831, "link": "https://stackoverflow.com/questions/55242831/sketchup-ruby-add-texture-to-face/55245891#55245891", "title": "Sketchup Ruby, add texture to Face", "body": "<p>The element that you want is <code>Texture</code>.  This is the class object that exposes information about image textures (such as width and height, average color, etc.).</p>\n\n<p>The easiest way to set a texture is directly on the material.</p>\n\n<pre><code>newface.material = Sketchup::Color.new clr\nnewface.material.texture = \"C:\\\\MyMaterialDirectory\\\\MyMaterial.jpg\"\n</code></pre>\n\n<p>Obviously the file will need to be a valid image and in the appropriate directory.</p>\n\n<p><a href=\"https://ruby.sketchup.com/Sketchup/Texture.html\" rel=\"nofollow noreferrer\">https://ruby.sketchup.com/Sketchup/Texture.html</a></p>\n"}], "owner": {"reputation": 6322, "user_id": 1392235, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c11ab2312c3c59df33b8b9ec0fb2ba2?s=128&d=identicon&r=PG", "display_name": "Davesexcel", "link": "https://stackoverflow.com/users/1392235/davesexcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "accepted_answer_id": 55245891, "answer_count": 1, "score": 0, "last_activity_date": 1553013336, "creation_date": 1553004116, "last_edit_date": 1553004523, "question_id": 55242831, "link": "https://stackoverflow.com/questions/55242831/sketchup-ruby-add-texture-to-face", "title": "Sketchup Ruby, add texture to Face", "body": "<p>I am using this, to add draw a box, then coloring the box.</p>\n\n<pre><code>l=96\nw=60\nh=60\nclr='Gray'\nent = Sketchup.active_model.entities\n\n#---------Clear All\nSketchup.active_model.entities.clear!       \n#----------------\nmodel = Sketchup.active_model\n\nmodel.start_operation \"Create Box\"\n#-----------------------------------------------------------------------------      \n\nentities = model.active_entities\ngroup = entities.add_group\nentities = group.entities\ngroup.name = \"Box\"\n@pt0 = [0, 0, 0]\n@pt1 = [0, l*12, 0]\n@pt2 = [w*12.0, l*12, 0]\n@pt3 = [w*12, 0, 0]\n\nnewface = entities.add_face(@pt0, @pt1, @pt2, @pt3)\nnewface.material = Sketchup::Color.new clr\nnewface.reverse!\nnewface.pushpull h*12\n</code></pre>\n\n<p>I would also like to add a texture but can't find how to do that.</p>\n\n<p>Like \"Metal Corrugated Shiny\" but have not been able to find out how to do that.</p>\n\n<p>Does anybody know how to add the texture with ruby?</p>\n\n<p><a href=\"https://i.stack.imgur.com/4s3NP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4s3NP.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1553005316, "post_id": 55242790, "comment_id": 97219440, "body": "Please edit your question to include the code you&#39;ve written so far."}, {"owner": {"reputation": 63, "user_id": 7802297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-45YakKNZATw/AAAAAAAAAAI/AAAAAAAAAJM/6m6ox3Vrtgo/photo.jpg?sz=128", "display_name": "Ashima Sood", "link": "https://stackoverflow.com/users/7802297/ashima-sood"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1553006816, "post_id": 55242790, "comment_id": 97220414, "body": "I&#39;ve tried multiple things, so just wanted a small script to verify ssl certificate in ruby."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1553006982, "post_id": 55242790, "comment_id": 97220542, "body": "It\u2019s great that you tried some things. Please show your work. If we know what you\u2019ve tried we can help you understand why it didn\u2019t work and how to make it work, rather than writing the code for you."}, {"owner": {"reputation": 63, "user_id": 7802297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-45YakKNZATw/AAAAAAAAAAI/AAAAAAAAAJM/6m6ox3Vrtgo/photo.jpg?sz=128", "display_name": "Ashima Sood", "link": "https://stackoverflow.com/users/7802297/ashima-sood"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1553018875, "post_id": 55242790, "comment_id": 97227615, "body": "added! I need to add parameters to the url and then validate it through ssl cert"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1553019036, "post_id": 55242790, "comment_id": 97227683, "body": "I&#39;ve edited your title to be more on-point, but if this isn&#39;t the intention of your question please clarify further."}, {"owner": {"reputation": 63, "user_id": 7802297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-45YakKNZATw/AAAAAAAAAAI/AAAAAAAAAJM/6m6ox3Vrtgo/photo.jpg?sz=128", "display_name": "Ashima Sood", "link": "https://stackoverflow.com/users/7802297/ashima-sood"}, "edited": false, "score": 0, "creation_date": 1553020802, "post_id": 55242790, "comment_id": 97228572, "body": "I need to write a ruby script which uses an http get request to validate an ssl certificate. The request must contain -&gt; url and parameter"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 7802297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-45YakKNZATw/AAAAAAAAAAI/AAAAAAAAAJM/6m6ox3Vrtgo/photo.jpg?sz=128", "display_name": "Ashima Sood", "link": "https://stackoverflow.com/users/7802297/ashima-sood"}, "is_accepted": true, "score": 1, "last_activity_date": 1553169679, "creation_date": 1553169679, "answer_id": 55279992, "question_id": 55242790, "link": "https://stackoverflow.com/questions/55242790/verify-self-signed-tls-certificate-for-https-in-ruby/55279992#55279992", "title": "Verify self-signed TLS certificate for HTTPS in Ruby", "body": "<p>This worked for me.  </p>\n\n<pre><code>require 'net/http'\nrequire 'net/https'\nrequire 'openssl'\nrequire 'uri'\nrequire 'json'\n\n\nContentURI = URI.parse(\"example.com\")\n@cert_raw = File.read('cert.pem')\nTestDataPath = '.'\n\nreq = Net::HTTP::Get.new(ContentURI.path)\nhttps = Net::HTTP.new(ContentURI.host, ContentURI.port)\nhttps.use_ssl = true\nhttps.cert = OpenSSL::X509::Certificate.new(@cert_raw)\nhttps.key = OpenSSL::PKey::RSA.new(@cert_raw)\nhttps.verify_mode = OpenSSL::SSL::VERIFY_PEER\nresp = https.start { |cx| cx.request(req) }\np resp\np resp.body\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7802297, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-45YakKNZATw/AAAAAAAAAAI/AAAAAAAAAJM/6m6ox3Vrtgo/photo.jpg?sz=128", "display_name": "Ashima Sood", "link": "https://stackoverflow.com/users/7802297/ashima-sood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "accepted_answer_id": 55279992, "answer_count": 1, "score": 2, "last_activity_date": 1553169679, "creation_date": 1553004014, "last_edit_date": 1553018955, "question_id": 55242790, "link": "https://stackoverflow.com/questions/55242790/verify-self-signed-tls-certificate-for-https-in-ruby", "title": "Verify self-signed TLS certificate for HTTPS in Ruby", "body": "<p>How do I use SSL certificate verification in GET Request in RUBY (using password parameter in URL)? -> </p>\n\n<pre><code>require 'net/https'\nrequire 'uri'\n\nuri = URI.parse(ARGV[0] || 'https://example.com?password=my_password')\n\nhttp = Net::HTTP.new(uri.host, uri.port)\n\nif uri.scheme == \"https\" \n\n    http.use_ssl = true\n    http.verify_mode = OpenSSL::SSL::VERIFY_PEER\n    http.ca_file=File.join(File.dirname(__FILE__),\n             \"/Users/me/Desktop/demp.pem\")\nend\n\nhttp.start do\n    http.request_get(uri.path) do |res|\n\nprint res.body\n\nend\n\nend\n</code></pre>\n\n<p>--> output </p>\n\n<p>SSL_connect returned=1 errno=0 state=error: certificate verify failed (self signed certificate in certificate chain) (OpenSSL::SSL::SSLError)</p>\n"}, {"tags": ["regex", "ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1553000105, "post_id": 55241549, "comment_id": 97215903, "body": "<code>&#47;\\b#{input}.*?\\b&#47;</code> looks more natural; <code>\\w</code> is kinda redundant."}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 2, "last_activity_date": 1553000204, "last_edit_date": 1553000204, "creation_date": 1552999987, "answer_id": 55241549, "question_id": 55241391, "link": "https://stackoverflow.com/questions/55241391/scan-text-file-for-words-with-specific-characters/55241549#55241549", "title": "Scan text file for words with specific characters", "body": "<p>Try using this regex: <code>.scan(/\\b#{input}.*?\\b/)</code>.</p>\n\n<p><code>String#scan</code> returns matched substrings so you need whole words to match.</p>\n"}], "owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 55241549, "answer_count": 1, "score": -1, "last_activity_date": 1585040381, "creation_date": 1552999516, "last_edit_date": 1585040381, "question_id": 55241391, "link": "https://stackoverflow.com/questions/55241391/scan-text-file-for-words-with-specific-characters", "title": "Scan text file for words with specific characters", "body": "<p>I tried to scan a text file for words that start with text such as <code>\"aa123 \"</code>, <code>\"aa2545646\"</code>, <code>\"aa31151\"</code>. <code>\"aa\"</code> is common for all words, and I want to get the words that start with <code>\"aa\"</code>. How can I do this?</p>\n\n<p>I have tried this code:</p>\n\n<pre><code>input = \"aa\"\ndata = File.read(filepath).scan /\\b#{input}/\n</code></pre>\n\n<p><strong>Updated:</strong></p>\n\n<p>Now I need to get the words that start with <code>\"bb\"</code> and also starts with <code>\"aa\"</code> in single file how can I do this??</p>\n\n<p>I have tried this code:</p>\n\n<pre><code> input = \"aa|bb\"\n data = File.read(filepath).scan /\\b#{input}.*?\\b/\n</code></pre>\n"}, {"tags": ["ruby", "winapi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1553007123, "post_id": 55240893, "comment_id": 97220640, "body": "Which screen, there can be more than one"}, {"owner": {"reputation": 1, "user_id": 11226134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OfmfQCT2jE0/AAAAAAAAAAI/AAAAAAAAABs/t4Jwj580mBY/photo.jpg?sz=128", "display_name": "Kaividian", "link": "https://stackoverflow.com/users/11226134/kaividian"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1553029462, "post_id": 55240893, "comment_id": 97232565, "body": "My understanding is that as long as that first paramerer in the call to the Win32API is nil/null, Windows will return the settings for the screen that the application is running in. Unfortunaetly, you cant pass a nil value as a parameter in ruby when something else is required so I had to get creative. I think my solution for nil works. Someone with more experience may tell me otherwise."}], "answers": [{"tags": [], "owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "is_accepted": false, "score": 1, "last_activity_date": 1553238097, "creation_date": 1553238097, "answer_id": 55294441, "question_id": 55240893, "link": "https://stackoverflow.com/questions/55240893/how-to-get-windows-screen-orientation-with-ruby-and-win32api/55294441#55294441", "title": "How to get Windows screen orientation with Ruby and Win32API", "body": "<p>In C++ the code will like this:</p>\n\n<pre><code>DEVMODE devMode;\nRtlSecureZeroMemory(&amp;devMode, sizeof(DEVMODE));\ndevMode.dmSize = sizeof(DEVMODE);\ndevMode.dmFields = DM_DISPLAYORIENTATION;\n\nBOOL result = EnumDisplaySettingsEx(NULL, ENUM_CURRENT_SETTINGS, &amp;devMode, EDS_RAWMODE);\nif (result)\n{\n    DWORD displayOrient = devMode.dmDisplayOrientation; // Get display device orientation\n}\n</code></pre>\n\n<p>And </p>\n\n<blockquote>\n  <p>To determine whether the display orientation is portrait or landscape\n  orientation, check the ratio of dmPelsWidth to dmPelsHeight.</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 11226134, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OfmfQCT2jE0/AAAAAAAAAAI/AAAAAAAAABs/t4Jwj580mBY/photo.jpg?sz=128", "display_name": "Kaividian", "link": "https://stackoverflow.com/users/11226134/kaividian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553238097, "creation_date": 1552997782, "last_edit_date": 1553039192, "question_id": 55240893, "link": "https://stackoverflow.com/questions/55240893/how-to-get-windows-screen-orientation-with-ruby-and-win32api", "title": "How to get Windows screen orientation with Ruby and Win32API", "body": "<p>I'm trying to get the Windows screen orientation to put an easter egg of sorts into a game that will occur when the display is upside down.</p>\n\n<p>I know Fiddle exists, but that's not the question I've asked. If it can't be done in Win32API, just tell me that and I'll just ditch this minor feature.</p>\n\n<p>Also, disclaimer, Ruby isn't the most familiar language to me, but I enjoy learning and overcoming challenges, so bring it on.</p>\n\n<pre><code>  class DisplayData &lt; Struct.new(:dmFields)\n    def initialize(dmFields=1); super end\n  end\n\n  def Win32API.orientation\n    data = DisplayData.new()\n    getDisplaySettings = Win32API.new('user32','EnumDisplaySettingsEx','%w(P I P)', 'l')\n    getDisplaySettings.call(\"\", -1, (data.object_id &lt;&lt; 1))\n    return data.dmFields\n  end\n</code></pre>\n\n<p>I feel like I'm close, I just get the feeling I've missed something big or haven't understood something important properly.</p>\n\n<p>Edit 1: The upside down screen to detect should be the one that the application is running in. If I've understood this correctly, parsing the nil value will return the screen settings for the screen that the application is running on.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1553002019, "post_id": 55240856, "comment_id": 97217269, "body": "You could add a field <code>default_city_area</code> to the <code>User</code> model, then store the selected value in that field and use it as the default value for your form next time."}], "answers": [{"tags": [], "owner": {"reputation": 384, "user_id": 9105286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aabf797e6f398fdb0e3f4d4ad36c8ea?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S Dujota", "link": "https://stackoverflow.com/users/9105286/denis-s-dujota"}, "is_accepted": false, "score": 0, "last_activity_date": 1553011118, "last_edit_date": 1553011118, "creation_date": 1553010778, "answer_id": 55245090, "question_id": 55240856, "link": "https://stackoverflow.com/questions/55240856/how-do-i-create-a-drop-down-in-a-rails-form-where-the-user-can-change-the-defaul/55245090#55245090", "title": "How do I create a drop down in a Rails form where the user can change the default value?", "body": "<p>@Steve</p>\n\n<p>I will make a couple of assumptions. </p>\n\n<p>1.) you know how to create forms within the rails templating engine. \n2.) you understand how to create a dropdown menu using the Simple Form gem</p>\n\n<p>So you have a couple of options based on what you actually want to accomplish. Based on what you are briefly describing, it sounds like you have some kind of an e-commerce/checkout situation that you want auto-completion to make it easier for a user.</p>\n\n<p>there are a couple of approaches to storing this data. </p>\n\n<p>Saving the user Data.</p>\n\n<p>1.) Save it right on the user model under district_of_last_order</p>\n\n<p>2.) Save it right on the order model that a user <code>has_many</code> orders. Then you can pull the first order's city district and select that</p>\n\n<p>Personally I would lean on #2 as you probably want to be able to tightly couple the order with the user and saving that information twice is redundant since you can always do something like <code>current_user.orders.first.district</code> or whatever, </p>\n\n<p>in your ERB where you build the form you can then do something along these lines:</p>\n\n<pre><code>&lt;%= simple_form_for(@order) do |f| %&gt;\n\n... other input fields \n\n&lt;% if current_user.orders.first %&gt;\n  &lt;%= f.input as: :select selected: current_user.orders.first.district %&gt;\n&lt;% else %&gt;\n  &lt;%= ... your regular dropdown menu here without the default  %&gt;\n&lt;% end %&gt;\n\n\n... rest of your form\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 9453964, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bgOHwpKb7LM/AAAAAAAAAAI/AAAAAAAACrg/bo62ScuklrI/photo.jpg?sz=128", "display_name": "Jennifer Mansker-Bickel", "link": "https://stackoverflow.com/users/9453964/jennifer-mansker-bickel"}, "is_accepted": false, "score": 0, "last_activity_date": 1553206840, "creation_date": 1553206840, "answer_id": 55290111, "question_id": 55240856, "link": "https://stackoverflow.com/questions/55240856/how-do-i-create-a-drop-down-in-a-rails-form-where-the-user-can-change-the-defaul/55290111#55290111", "title": "How do I create a drop down in a Rails form where the user can change the default value?", "body": "<p>If you have the option of using gems, I have had good results with select2-rails.</p>\n"}], "owner": {"reputation": 168, "user_id": 11058389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8db7ac2b919eb66c430dfaaab7fdcf?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/11058389/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553206840, "creation_date": 1552997684, "question_id": 55240856, "link": "https://stackoverflow.com/questions/55240856/how-do-i-create-a-drop-down-in-a-rails-form-where-the-user-can-change-the-defaul", "title": "How do I create a drop down in a Rails form where the user can change the default value?", "body": "<p>I'd like to have a drop down in my Rails form where users can select an area of a city, e.g. \"Marchmont\", \"New Town\", \"Baberton\" etc, when adding an order. I'd like that once they have made a selection, this will then be the default selection for the following times they use the form to add an order (so that they don't have to keep selecting it) but also that they can change their selection at any time. Hope that makes sense. I'm using the Simple Form gem. Thanks in advance! :) </p>\n"}, {"tags": ["ruby", "metaprogramming"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1552998026, "post_id": 55240204, "comment_id": 97214560, "body": "It might be misleading that <code>Notifier</code> is still prepended. You could also use the more common <code>include Notifier</code> (along with <code>self.included</code>). It might also make sense to have a single anonymous module for overriding methods instead of creating a new module for each <code>emit_after</code> call."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1552999692, "post_id": 55240204, "comment_id": 97215627, "body": "@Stefan accumulating methods to pack them into the single module would require <a href=\"https://ruby-doc.org/core/TracePoint.html#method-c-new\" rel=\"nofollow noreferrer\"><code>TracePoint#new(:end)</code></a> and thus will be overcomplicating the answer. I tried to apply as few modifications to the original code as possible."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1553000177, "post_id": 55240204, "comment_id": 97215958, "body": "You just have to remember the anonymous module you are prepending and send <code>define_method</code> to that module."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1553000347, "post_id": 55240204, "comment_id": 97216078, "body": "@Stefan Oh, adding methods to the <i>already</i> prepended module has an effect on the prepending target as well; thanks, I didn\u2019t know."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1553001438, "post_id": 55240204, "comment_id": 97216871, "body": "Yes, if you define the methods directly on the prepended module. Including other modules into the prepended module on the other hand would not work, i.e. you can add methods, but you can&#39;t alter the ancestor chain afterwards."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1553001626, "post_id": 55240204, "comment_id": 97216988, "body": "@Stefan \u201cyou can&#39;t alter the ancestor chain afterwards\u201d\u2014that I knew and that\u2019s exactly why I mistakenly supposed it does not work with an explicit method definitions either."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1552999722, "last_edit_date": 1552999722, "creation_date": 1552995650, "answer_id": 55240204, "question_id": 55240007, "link": "https://stackoverflow.com/questions/55240007/ruby-2-6-how-can-i-dynamically-override-instance-methods-when-prepending-a-modu/55240204#55240204", "title": "Ruby 2.6: How can I dynamically override instance methods when prepending a module?", "body": "<p>Prepend to the currently opened class:</p>\n\n<pre><code>module Notifier\n  def self.prepended(host_class)\n    host_class.extend(ClassMethods)\n  end\n\n  module ClassMethods\n    def emit_after(*methods)\n    # \u21d3\u21d3\u21d3\u21d3\u21d3\u21d3\u21d3 HERE  \n      prepend(Module.new do\n        methods.each do |method|\n          define_method(method) do |thing, block = nil|\n            super(thing).tap { block.() if block }\n          end\n        end\n      end)\n    end\n  end\nend\n\nclass Player\n  prepend Notifier\n  attr_reader :inventory\n\n  emit_after :take\n\n  def take(thing)\n    puts \"foo\"\n  end\nend\n\nPlayer.new.take :foo, -&gt; { puts \"Taking apple\" }\n#\u21d2 foo\n#  Taking apple\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1552998431, "post_id": 55240799, "comment_id": 97214831, "body": "This is how I would do this in the real life, yes."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1552999064, "post_id": 55240799, "comment_id": 97215224, "body": "<i>&quot;no &quot;useless&quot; Notifier there&quot;</i> \u2013 maybe <code>prepend Notifier[:take]</code> is a bit misleading in that regard. It looks as if you are prepending <code>Notifier</code>, whereas you actually prepend the anonymous module returned by <code>[]</code>. Your <code>Notifier</code> is actually just a container for the <code>[]</code> method, nothing more, nothing less. It doesn&#39;t appear in <code>Player</code>&#39;s ancestors chain."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1553000531, "post_id": 55240799, "comment_id": 97216206, "body": "@Stefan indeed. I should stop trying to give answers on Ruby, I seem to forget the language basics :)"}, {"owner": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1553002613, "post_id": 55240799, "comment_id": 97217639, "body": "@Stefan &quot;maybe prepend Notifier[:take] is a bit misleading in that regard&quot;. Is it really? Imo this trick may be misleading only when you see it for the first time, but in general, it&#39;s more straightforward and predictable (in terms of resulting ancestors&#39; chain) than playing with hooks."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1553003257, "post_id": 55240799, "comment_id": 97218057, "body": "<i>&quot;Imo&quot;</i> \u2190 lol, I read &quot;lmao&quot; :-) With <i>misleading</i> I just mean that it looks as if you are prepending (some kind of) <code>Notifier</code>, but instead an unrelated anonymous module is prepended. I would expect <code>prepend Notifier[:take]</code> to result in <code>Player.ancestors</code> containing (some kind of) <code>Notifier</code>, that&#39;s all."}], "tags": [], "owner": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "is_accepted": false, "score": 3, "last_activity_date": 1552997496, "creation_date": 1552997496, "answer_id": 55240799, "question_id": 55240007, "link": "https://stackoverflow.com/questions/55240007/ruby-2-6-how-can-i-dynamically-override-instance-methods-when-prepending-a-modu/55240799#55240799", "title": "Ruby 2.6: How can I dynamically override instance methods when prepending a module?", "body": "<p>What about this solution:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Notifier\n  def self.[](*methods)\n    Module.new do\n      methods.each do |method|\n        define_method(method) do |thing, &amp;block|\n          super(thing)\n          block.call if block\n        end\n      end\n    end\n  end\nend\n\nclass Player\n  prepend Notifier[:take]\n\n  def take(thing)\n    puts \"I'm explicitly defined\"\n  end\nend\n\nPlayer.new.take(:foo) { puts \"I'm magically prepended\" }\n# =&gt; I'm explicitly defined\n# =&gt; I'm magically prepended\n</code></pre>\n\n<p>It's quite similar to the solution from Aleksei Matiushkin, but the ancestors' chain is a bit cleaner (no \"useless\" Notifier there)</p>\n"}, {"comments": [{"owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "edited": false, "score": 0, "creation_date": 1553011764, "post_id": 55245275, "comment_id": 97223789, "body": "I&#39;ve just tried this in pry but it doesn&#39;t look like the method is being overridden."}, {"owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "edited": false, "score": 0, "creation_date": 1553018874, "post_id": 55245275, "comment_id": 97227614, "body": "Ah yes, I see that you&#39;ve used <code>&amp;</code> before the block argument so that you don&#39;t have to use shabby lambda."}, {"owner": {"reputation": 390, "user_id": 1019332, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/32dd216575bff960f3ea3fb02e1c5d67?s=128&d=identicon&r=PG", "display_name": "Jamesst20", "link": "https://stackoverflow.com/users/1019332/jamesst20"}, "edited": false, "score": 0, "creation_date": 1576851788, "post_id": 55245275, "comment_id": 105039646, "body": "Thank you so much ! It is exactly what I was looking for ! I wasn&#39;t confident because of the comments but it definitely works ! (in Rails 4 at least)"}], "tags": [], "owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "is_accepted": false, "score": 4, "last_activity_date": 1553012289, "last_edit_date": 1553012289, "creation_date": 1553011321, "answer_id": 55245275, "question_id": 55240007, "link": "https://stackoverflow.com/questions/55240007/ruby-2-6-how-can-i-dynamically-override-instance-methods-when-prepending-a-modu/55245275#55245275", "title": "Ruby 2.6: How can I dynamically override instance methods when prepending a module?", "body": "<p><code>@Konstantin Strukov</code>'s solution is good but maybe a little confusing. So, I suggest another solution, which is more like the original one.</p>\n\n<p>Your first goal is to add a <strong>class method</strong> (<code>emit_after</code>) to your class. To do that you should use <code>extend</code> method without any hooks such as <code>self.prepended()</code>, <code>self.included()</code> or <code>self.extended()</code>. </p>\n\n<p><code>prepend</code>, as well as <code>include</code>, are used to add or override <strong>instance methods</strong>. But that is your second goal and it happens when you call <code>emit_after</code>. So you shouldn't use <code>prepend</code> or <code>include</code> when extending your class.</p>\n\n<pre><code>module Notifier\n  def emit_after(*methods)\n    prepend(Module.new do\n      methods.each do |method|\n        define_method(method) do |thing, &amp;block|\n          super(thing)\n          block.call if block\n        end\n      end\n    end)\n  end\nend\n\nclass Player\n  extend Notifier\n\n  emit_after :take\n\n  def take(thing)\n    puts thing\n  end\nend\n\nPlayer.new.take(\"foo\") { puts \"bar\" }  \n# foo\n# bar\n# =&gt; nil\n</code></pre>\n\n<p>Now it is obvious that you call <code>extend Notifier</code> in order to add the <code>emit_after</code> class method and all the magic is hidden in the method.</p>\n"}], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1553012289, "creation_date": 1552995010, "last_edit_date": 1552995535, "question_id": 55240007, "link": "https://stackoverflow.com/questions/55240007/ruby-2-6-how-can-i-dynamically-override-instance-methods-when-prepending-a-modu", "title": "Ruby 2.6: How can I dynamically override instance methods when prepending a module?", "body": "<p>I have a module called <code>Notifier</code>.</p>\n\n<pre><code>module Notifier\n  def self.prepended(host_class)\n    host_class.extend(ClassMethods)\n  end\n\n  module ClassMethods\n    def emit_after(*methods)\n      methods.each do |method|\n        define_method(method) do |thing, block|\n          r = super(thing)\n          block.call\n          r\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>It exposes a class method <code>emit_after</code>. I use it like so:</p>\n\n<pre><code>class Player\n  prepend Notifier\n  attr_reader :inventory\n\n  emit_after :take\n\n  def take(thing)\n    # ...\n  end\nend\n</code></pre>\n\n<p>The intention is that by calling <code>emit_after :take</code>, the module overrides <code>#take</code> with its own method.</p>\n\n<p>But the instance method isn't being overridden.</p>\n\n<p>I <em>can</em> however, override it explicitly without using <code>ClassMethods</code></p>\n\n<pre><code>module Notifier\n  def self.prepended(host_class)\n    define_method(:take) do |thing, block|\n      r = super(thing)\n      block.call\n      r\n    end\n  end\n\nclass Player\n  prepend Notifier\n  attr_reader :inventory\n\n  def take(thing)\n    # ...\n  end\nend\n\n#&gt; @player.take @apple, -&gt; { puts \"Taking apple\" }\n#Taking apple\n#=&gt; #&lt;Inventory:0x00007fe35f608a98...\n</code></pre>\n\n<p>I know that <code>ClassMethods#emit_after</code> is called so I assume that the method is being defined but it just never gets called.</p>\n\n<p>I want to create the methods dynamically. How can I ensure that the generate method overrides my instance method? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1552994813, "post_id": 55239173, "comment_id": 97212384, "body": "Could you update with the HTML generated by both the failing <code>image_tag</code> and working <code>link_to</code> please?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1552995859, "post_id": 55239173, "comment_id": 97213068, "body": "Where and how is <code>mini_image</code> defined? It obviously already returns the code for an <code>img</code> otherwise our first example cannot work. Is it a helper method?"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 1, "creation_date": 1553002424, "post_id": 55239173, "comment_id": 97217517, "body": "First code can&#39;t work because of syntax error. Look at <code>)</code>"}, {"owner": {"reputation": 75, "user_id": 9326999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bfc4b0f12f6a76a7cd56c7fc4cb7a7?s=128&d=identicon&r=PG&f=1", "display_name": "synopsa", "link": "https://stackoverflow.com/users/9326999/synopsa"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1553072340, "post_id": 55239173, "comment_id": 97245232, "body": "@spickermann It is a helper method. I thought that &quot;mini_image&quot; comes from image.rb(Paperclip) :) thanks"}], "owner": {"reputation": 75, "user_id": 9326999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bfc4b0f12f6a76a7cd56c7fc4cb7a7?s=128&d=identicon&r=PG&f=1", "display_name": "synopsa", "link": "https://stackoverflow.com/users/9326999/synopsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552992850, "creation_date": 1552992543, "last_edit_date": 1552992850, "question_id": 55239173, "link": "https://stackoverflow.com/questions/55239173/why-image-tag-doesnt-show-image-while-link-to-shows", "title": "Why image_tag doesn&#39;t show image while link_to shows?", "body": "<p>I want to display image in my cart via paperclip gem but it won't works with image_tag while with link_to work fine </p>\n\n<p>This works:</p>\n\n<pre><code>&lt;% simple_current_order.line_items.all.each do |line_item| %&gt;\n  &lt;%= link_to mini_image(line_item.variant)), product_path(line_item) %&gt; \n&lt;% end %&gt;\n</code></pre>\n\n<p>While this not </p>\n\n<pre><code>    &lt;% simple_current_order.line_items.all.each do |line_item| %&gt;\n      &lt;%= image_tag mini_image(line_item.variant) %&gt; \n    &lt;% end %&gt;\n</code></pre>\n\n<p>image.rb model</p>\n\n<pre><code>module Spree\n  class Image &lt; Asset\n    validate :no_attachment_errors\n\n    has_attached_file :attachment,\n                      styles: { mini: '48x48&gt;', small: '100x100&gt;', product: '240x240&gt;', large: '600x600&gt;' },\n                      default_style: :product,\n                      url: '/spree/products/:id/:style/:basename.:extension',\n                      path: ':rails_root/public/spree/products/:id/:style/:basename.:extension',\n                      convert_options: { all: '-strip -auto-orient -colorspace sRGB' }\n    validates_attachment :attachment,\n                         :presence =&gt; true,\n                         :content_type =&gt; { :content_type =&gt; %w(image/jpeg image/jpg image/png image/gif) }\n\n    # save the w,h of the original image (from which others can be calculated)\n    # we need to look at the write-queue for images which have not been saved yet\n    after_post_process :find_dimensions\n\n    #used by admin products autocomplete\n    def mini_url\n      attachment.url(:mini, false)\n    end\n\n    def find_dimensions\n      temporary = attachment.queued_for_write[:original]\n      filename = temporary.path unless temporary.nil?\n      filename = attachment.path if filename.blank?\n      geometry = Paperclip::Geometry.from_file(filename)\n      self.attachment_width  = geometry.width\n      self.attachment_height = geometry.height\n    end\n\n    # if there are errors from the plugin, then add a more meaningful message\n    def no_attachment_errors\n      unless attachment.errors.empty?\n        # uncomment this to get rid of the less-than-useful interim messages\n        # errors.clear\n        errors.add :attachment, \"Paperclip returned errors for file '#{attachment_file_name}' - check ImageMagick installation or image source file.\"\n        false\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>It can't find image with image tag, anyone know why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1552992527, "post_id": 55239143, "comment_id": 97211073, "body": "Check out <code>pry</code> and <code>byebug</code> - well known debuggers in Ruby world."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1553106525, "post_id": 55239143, "comment_id": 97266754, "body": "May be, you are not calling the action at all. Call <code>subject</code> in the first line of your <code>it</code> block and then check <code>expect(assigns(:org_data)).not_to be_nil</code>. Note: You cannot access the instance variable set in controller by simply doing <code>@org_data</code> in RSpecs. Use <a href=\"https://stackoverflow.com/questions/16133166/what-does-assigns-mean-in-rspec\"><code>assigns</code></a> for it."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11225696, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ppcy7f_lCGE/AAAAAAAAAAI/AAAAAAAABXE/JgkPUM2jMfM/photo.jpg?sz=128", "display_name": "Ashwini Ramesh", "link": "https://stackoverflow.com/users/11225696/ashwini-ramesh"}, "edited": false, "score": 0, "creation_date": 1552995073, "post_id": 55239722, "comment_id": 97212563, "body": "DashboardsController github_leader_board with session Checks for the variable      Failure/Error: expect(assigns(:org_data)).not_to be_nil         expected: not nil             got: nil  This is the error i&#39;m getting"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 3, "user_id": 11225696, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ppcy7f_lCGE/AAAAAAAAAAI/AAAAAAAABXE/JgkPUM2jMfM/photo.jpg?sz=128", "display_name": "Ashwini Ramesh", "link": "https://stackoverflow.com/users/11225696/ashwini-ramesh"}, "edited": false, "score": 0, "creation_date": 1553021219, "post_id": 55239722, "comment_id": 97228777, "body": "@AshwiniRamesh you need to change the <code>describe</code> line to pass your actual controller class and not a string, this is how rspec knows it&#39;s a &quot;controller spec&quot;"}], "tags": [], "owner": {"reputation": 51, "user_id": 2578370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b00aec293b6faefe2c73c551ceae77dc?s=128&d=identicon&r=PG", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/2578370/rodrigo"}, "is_accepted": true, "score": 2, "last_activity_date": 1553021074, "last_edit_date": 1553021074, "creation_date": 1552994149, "answer_id": 55239722, "question_id": 55239143, "link": "https://stackoverflow.com/questions/55239143/how-to-know-the-flow-of-the-controller-method-using-rspec/55239722#55239722", "title": "How to know the flow of the controller method using Rspec", "body": "<p>I believe you could use a test of the type controller, instead of instantiating your controller and then use the RSpec method <code>assigns</code> (<a href=\"https://relishapp.com/rspec/rspec-rails/docs/controller-specs\" rel=\"nofollow noreferrer\">docs</a>) to test your instance variables, something like this:</p>\n\n<pre><code>RSpec.describe DashboardsController, :type =&gt; :controller do\n   context \"with session\" do\n      # ...\n      it \"executes other functions\" do\n        expect(assigns(:org_data)).not_to be_nil\n      end\n    end\nend\n</code></pre>\n\n<p><a href=\"https://relishapp.com/rspec/rspec-rails/docs/controller-specs\" rel=\"nofollow noreferrer\">https://relishapp.com/rspec/rspec-rails/docs/controller-specs</a></p>\n\n<p>Also, if you want to check the flow, and debug your code, you can use the gems <code>pry</code>, <code>pry-rails</code> and <code>pry-nav</code> as @Marek Lipka stated.</p>\n"}], "owner": {"reputation": 3, "user_id": 11225696, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ppcy7f_lCGE/AAAAAAAAAAI/AAAAAAAABXE/JgkPUM2jMfM/photo.jpg?sz=128", "display_name": "Ashwini Ramesh", "link": "https://stackoverflow.com/users/11225696/ashwini-ramesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 55239722, "answer_count": 1, "score": 0, "last_activity_date": 1553021074, "creation_date": 1552992412, "question_id": 55239143, "link": "https://stackoverflow.com/questions/55239143/how-to-know-the-flow-of-the-controller-method-using-rspec", "title": "How to know the flow of the controller method using Rspec", "body": "<p>I have two dependent drop down.One gives me orgname and other drop down populates on selecting a orgname, That is teamname.<br>\nThis is my github_leader_board_spec.rb</p>\n\n<pre><code>describe \"github_leader_board\" do\n    before do\n      @obj = DashboardsController.new\n    end\n    context \"with session\" do\n\n      subject { get :github_leader_board, :params =&gt; { :orgname =&gt; \"test\", :teamname=&gt; \"team\"}}\n      it \"returns http success\" do\n        expect(response).to have_http_status(:success)\n      end\n      it \"executes other functions\" do\n        expect(@org_data).not_to be_nil\n        expect(@obj.get_team_api(\"DevCenter\")).not_to be_nil\n      end\n    end\n  end\n</code></pre>\n\n<p>This is my controller method</p>\n\n<pre><code>def github_leader_board\n        myhash = {}\n        @points_hash = {}\n        member_data = []\n        @org_data = get_org_api\n        @orgs = get_names(org_data)\n        team_data = get_team_api(params[:orgname])\n        @teams = get_names(team_data)\n        teamid = get_team_id(team_data)\n        @teams.each_with_index {|k,i|myhash[k] = teamid[i]}\n        myhash.each do |key,value|\n            if key == params[:teamname]\n                member_data = get_members(\"#{value}\")\n            end\n        end\n        @memberids = get_names(member_data)\n        member_names = get_member_names(@memberids)\n        review_comments = get_reviewcoments(@memberids)\n        reactions = points(@memberids)\n        points = [review_comments, reactions].transpose.map {|x| x.reduce(:+)}\n        member_names.each_with_index {|k,i|@points_hash[k] = points[i]}\n\n    end\n</code></pre>\n\n<p>If i run my spec file it says, undefined @org_data. The function inside the github_leader_board controller is not calling the get_org_api and storing the value to the @org_data variable.\nCan anybody suggest what is wrong with the code and how can i improve it. As i'm new to ror.\nAny help would be appreciated.\nThank you. </p>\n"}, {"tags": ["ruby", "sass", "homebrew"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1552982812, "post_id": 55236065, "comment_id": 97205445, "body": "Do you use any ruby version manager like <code>rvm</code> / <code>rbenv</code>? Does your Gemfile specifies ruby version? Do you run sass as <code>bundle exec ...</code>?"}, {"owner": {"reputation": 51, "user_id": 4101123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1030587408/picture?type=large", "display_name": "Samuel Larcher", "link": "https://stackoverflow.com/users/4101123/samuel-larcher"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1552983421, "post_id": 55236065, "comment_id": 97205766, "body": "Hi Aleksei - no I don&#39;t run rvm / rbenv. Is that recommended? . I believe sass is installed via exec. Running sass -v I get: Ruby Sass 3.5.6"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1552983715, "post_id": 55236065, "comment_id": 97205898, "body": "Yes, it is highly recommended. Also, I have no idea about how MacOS messes with different rubies; I have only heard it\u2019s not robust enough to use the system one."}, {"owner": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "edited": false, "score": 0, "creation_date": 1552984267, "post_id": 55236065, "comment_id": 97206206, "body": "/usr/local/opt/ruby/bin is not in your /private/etc/paths, is it posible the reason? <a href=\"https://gist.github.com/Overbryd/1669348\" rel=\"nofollow noreferrer\">gist.github.com/Overbryd/1669348</a>"}, {"owner": {"reputation": 51, "user_id": 4101123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1030587408/picture?type=large", "display_name": "Samuel Larcher", "link": "https://stackoverflow.com/users/4101123/samuel-larcher"}, "reply_to_user": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "edited": false, "score": 0, "creation_date": 1552988620, "post_id": 55236065, "comment_id": 97208686, "body": "Thx @PanKe - I tried to add /usr/local/opt/ruby/bin to the /private/etc/paths but without any effect. When I run sass after that I get still the same error message (ffi gem missing).  /usr/local/opt/ruby/bin /usr/local/bin /usr/bin /bin /usr/sbin /sbin"}, {"owner": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "edited": false, "score": 0, "creation_date": 1552988877, "post_id": 55236065, "comment_id": 97208856, "body": "@SamuelLarcher :thinking: did you launch a new terminal to try?"}, {"owner": {"reputation": 51, "user_id": 4101123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1030587408/picture?type=large", "display_name": "Samuel Larcher", "link": "https://stackoverflow.com/users/4101123/samuel-larcher"}, "edited": false, "score": 0, "creation_date": 1552988935, "post_id": 55236065, "comment_id": 97208886, "body": "I am open to just run down the path to add the missing ffi gem to the system 2.3.0 ruby installation - which seems overall the easier path, however I can&#39;t seems to make any modifications to the system ruby dir even as sudo as it bounces back with permissions denied."}, {"owner": {"reputation": 51, "user_id": 4101123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1030587408/picture?type=large", "display_name": "Samuel Larcher", "link": "https://stackoverflow.com/users/4101123/samuel-larcher"}, "reply_to_user": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "edited": false, "score": 0, "creation_date": 1552989024, "post_id": 55236065, "comment_id": 97208934, "body": "@PanKe : I tried in new terminal, I quit terminal and restarted terminal, I restarted computer - no effect."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1552989134, "post_id": 55236065, "comment_id": 97209005, "body": "@SamuelLarcher just install ruby via <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\"><code>rbenv</code></a>. Its quick and will save a lot of time"}, {"owner": {"reputation": 51, "user_id": 4101123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1030587408/picture?type=large", "display_name": "Samuel Larcher", "link": "https://stackoverflow.com/users/4101123/samuel-larcher"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1552989320, "post_id": 55236065, "comment_id": 97209127, "body": "@MartinZinovsky : ok i give it a try. Do I need to get rid of the homebrew version before trying rbenv?"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1552989351, "post_id": 55236065, "comment_id": 97209157, "body": "@SamuelLarcher I guess. Better to clean that up"}, {"owner": {"reputation": 51, "user_id": 4101123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1030587408/picture?type=large", "display_name": "Samuel Larcher", "link": "https://stackoverflow.com/users/4101123/samuel-larcher"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1552992270, "post_id": 55236065, "comment_id": 97210929, "body": "@MartinZinovsky : no success. See above edited my initial question/entry."}], "owner": {"reputation": 51, "user_id": 4101123, "user_type": "registered", "profile_image": "https://graph.facebook.com/1030587408/picture?type=large", "display_name": "Samuel Larcher", "link": "https://stackoverflow.com/users/4101123/samuel-larcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 563, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1552993289, "creation_date": 1552982585, "last_edit_date": 1552993289, "question_id": 55236065, "link": "https://stackoverflow.com/questions/55236065/cant-seem-to-run-ruby-2-6-0-homebrew-version-always-references-back-to-system", "title": "Can&#39;t seem to run ruby 2.6.0 homebrew version - always references back to system ruby 2.3.0", "body": "<p>This is the situation: I am running mac OS Mojave 10.14.3 - It seems system is running ruby v2.3.0 and installed homebrew ruby 2.6.x when I try to run sass I get the following error:</p>\n\n<pre><code>&gt; Sass is watching for changes. Press Ctrl-C to stop.\nGem::MissingSpecError: Could not find 'ffi' (&gt;= 0.5.0, &lt; 2) among 20 total gem(s)\nChecked in 'GEM_PATH=/Users/samuellarcher/.gem/ruby/2.3.0:/Library/Ruby/Gems/2.3.0:/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/gems/2.3.0', execute `gem env` for more information\n</code></pre>\n\n<p>Running gem env returns:</p>\n\n<pre><code>&gt; RubyGems Environment:\n  - RUBYGEMS VERSION: 3.0.3\n  - RUBY VERSION: 2.6.2 (2019-03-13 patchlevel 47) [x86_64-darwin18]\n  - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/2.6.0\n  - USER INSTALLATION DIRECTORY: /Users/samuellarcher/.gem/ruby/2.6.0\n  - RUBY EXECUTABLE: /usr/local/opt/ruby/bin/ruby\n  - GIT EXECUTABLE: /usr/bin/git\n  - EXECUTABLE DIRECTORY: /usr/local/lib/ruby/gems/2.6.0/bin\n  - SPEC CACHE DIRECTORY: /Users/samuellarcher/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /usr/local/Cellar/ruby/2.6.2/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-darwin-18\n  - GEM PATHS:\n     - /usr/local/lib/ruby/gems/2.6.0\n     - /Users/samuellarcher/.gem/ruby/2.6.0\n     - /usr/local/Cellar/ruby/2.6.2/lib/ruby/gems/2.6.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/opt/ruby/bin\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n</code></pre>\n\n<p>Now, when i do a:</p>\n\n<pre><code>whereis ruby\n</code></pre>\n\n<p>it returns:</p>\n\n<pre><code>/usr/bin/ruby\n</code></pre>\n\n<p>and</p>\n\n<pre><code>echo $PATH\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>/usr/local/opt/ruby/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\n</code></pre>\n\n<p>on top of that, the path priority under /private/etc/paths is set to:</p>\n\n<pre><code>/usr/local/bin\n/usr/bin\n/bin\n/usr/sbin\n/sbin\n</code></pre>\n\n<p>which seems correct to me. The .bash_profile file contains:</p>\n\n<pre><code>export PATH=\"/usr/local/opt/ruby/bin:$PATH\"\nexport LDFLAGS=\"-L/usr/local/opt/ruby/lib\"\nexport CPPFLAGS=\"-I/usr/local/opt/ruby/include\"\n</code></pre>\n\n<p>Checking gem directories:</p>\n\n<pre><code>ls /usr/local/lib/ruby/gems/2.6.0/gems/\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>ffi-1.10.0      rb-fsevent-0.10.3   rb-inotify-0.10.0   sass-3.7.3      sass-listen-4.0.0   test-unit-3.3.0\n</code></pre>\n\n<p>with the missing ffi gem we are after.</p>\n\n<pre><code>ls .gem/ruby/2.3.0/cache/\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>CFPropertyList-3.0.0.gem        faraday-cookie_jar-0.0.6.gem        mini_magick-4.5.1.gem           simctl-1.6.5.gem\naddressable-2.6.0.gem           faraday_middleware-0.13.1.gem       multi_json-1.13.1.gem           slack-notifier-2.3.2.gem\natomos-0.1.3.gem            fastimage-2.1.5.gem         multi_xml-0.6.0.gem         terminal-notifier-1.8.0.gem\nbabosa-1.0.2.gem            fastlane-2.117.1.gem            multipart-post-2.0.0.gem        terminal-table-1.8.0.gem\nbundler-2.0.1.gem           gh_inspector-1.1.3.gem          nanaimo-0.2.6.gem           tty-cursor-0.6.1.gem\nclaide-1.0.2.gem            google-api-client-0.23.9.gem        naturally-2.2.0.gem         tty-screen-0.6.5.gem\ncolored-1.2.gem             google-cloud-core-1.3.0.gem     os-1.0.0.gem                tty-spinner-0.9.0.gem\ncolored2-3.1.2.gem          google-cloud-env-1.0.5.gem      plist-3.5.0.gem             uber-0.1.0.gem\ncommander-fastlane-4.4.6.gem        google-cloud-storage-1.16.0.gem     public_suffix-2.0.5.gem         unf-0.1.4.gem\ndeclarative-0.0.10.gem          googleauth-0.6.7.gem            representable-3.0.4.gem         unf_ext-0.0.7.5.gem\ndeclarative-option-0.1.0.gem        highline-1.7.10.gem         retriable-3.1.2.gem         unicode-display_width-1.5.0.gem\ndigest-crc-0.4.1.gem            http-cookie-1.0.3.gem           rouge-2.0.7.gem             word_wrap-1.0.0.gem\ndomain_name-0.5.20180417.gem        httpclient-2.8.3.gem            rubygems-update-3.0.2.gem       xcode-install-2.3.0.gem\ndotenv-2.7.1.gem            jwt-2.1.0.gem               rubygems-update-3.0.3.gem       xcodeproj-1.8.1.gem\nemoji_regex-1.0.1.gem           memoist-0.16.0.gem          rubyzip-1.2.2.gem           xcpretty-0.3.0.gem\nexcon-0.62.0.gem            mime-types-3.2.2.gem            security-0.1.3.gem          xcpretty-travis-formatter-1.0.0.gem\nfaraday-0.15.4.gem          mime-types-data-3.2018.0812.gem     signet-0.11.0.gem\n</code></pre>\n\n<p>without the missing ffi gem</p>\n\n<p>I might miss something fundemental but ideally I would like the homebrew ruby version 2.6.x running when I run sass - so where from here?</p>\n\n<hr>\n\n<p>As per M. Zinovski's suggestion I uninstalled homebrew ruby and installed rbenv via homebrew. I followed instructions added </p>\n\n<pre><code>eval \"$(rbenv init -)\"\n</code></pre>\n\n<p>to .bash_profile - check installation seems fine. </p>\n\n<pre><code>SamuelserBook15:~ samuellarcher$ curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash\nChecking for `rbenv' in PATH: /usr/local/bin/rbenv\nChecking for rbenv shims in PATH: OK\nChecking `rbenv install' support: /usr/local/bin/rbenv-install (ruby-build 20190314)\nCounting installed Ruby versions: 2 versions\nChecking RubyGems settings: OK\nAuditing installed plugins: OK\n</code></pre>\n\n<p>Local and global version set to newly installed rbenv 2.6.2</p>\n\n<pre><code>samuellarcher$ rbenv version\n2.6.2 (set by /Users/samuellarcher/.ruby-version)\n\nsamuellarcher$ ruby -v\nruby 2.6.2p47 (2019-03-13 revision 67232) [x86_64-darwin18]\n</code></pre>\n\n<p>However - when I ran sass - same old error - still referencing to 2.3.0 and ffi gem missing. So... absolutely min-bobbeling .. 2.6.2 is running why is it still pointing to 2.3.0 gem files???</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri", "mechanize"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1553021482, "post_id": 55235229, "comment_id": 97228894, "body": "Css does have substring matching, so you could use <code>img[src^=&#39;&#47;&#47;cdn.shopify.com&#47;s&#47;files&#47;&#39;]</code> (not sure if that is specific enough for your needs, you can scope to a parent if required).  See <a href=\"https://stackoverflow.com/questions/8903313/using-regular-expression-in-css\" title=\"using regular expression in css\">stackoverflow.com/questions/8903313/&hellip;</a> and <a href=\"https://www.w3.org/TR/selectors/#attribute-substrings\" rel=\"nofollow noreferrer\">w3.org/TR/selectors/#attribute-substrings</a>"}, {"owner": {"reputation": 547, "user_id": 3396971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c75295766cfc6c5950bb398fa6c7e2?s=128&d=identicon&r=PG", "display_name": "NemyaNation", "link": "https://stackoverflow.com/users/3396971/nemyanation"}, "edited": false, "score": 0, "creation_date": 1553814024, "post_id": 55235229, "comment_id": 97536595, "body": "Let me know if my answer to your question is sufficient. If so please mark as correct."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1558655963, "post_id": 55235229, "comment_id": 99182323, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;. When asking about a problem with your code we need the minimum data necessary to demonstrate the problem in the question itself. A link forces us to search through a page&#39;s HTML which wastes our time and discourages people from trying to help you. We need you to prepare the question so we can help you. In addition, now that the link is broken your question makes little sense."}], "answers": [{"tags": [], "owner": {"reputation": 547, "user_id": 3396971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c75295766cfc6c5950bb398fa6c7e2?s=128&d=identicon&r=PG", "display_name": "NemyaNation", "link": "https://stackoverflow.com/users/3396971/nemyanation"}, "is_accepted": false, "score": 0, "last_activity_date": 1553444891, "creation_date": 1553444891, "answer_id": 55325967, "question_id": 55235229, "link": "https://stackoverflow.com/questions/55235229/cant-identify-proper-css-selector-to-scrape-with-mechanize/55325967#55325967", "title": "Can&#39;t Identify Proper CSS Selector to Scrape with Mechanize", "body": "<p>You need to change</p>\n\n<pre><code>bean.image_url = coffee_page.css('img data-featured-product-image').attr('src')\n</code></pre>\n\n<p>to</p>\n\n<pre><code>bean.image_url = coffee_page.css('#mobile-only&gt;img').attr('src')\n</code></pre>\n\n<p>If you can, always use nearby identifiers to locate the element you want to access.</p>\n"}], "owner": {"reputation": 29, "user_id": 5091246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1FgZNQ7QZ3w/AAAAAAAAAAI/AAAAAAAAAEY/jQHMNcGGE_A/photo.jpg?sz=128", "display_name": "Andrew Hyman", "link": "https://stackoverflow.com/users/5091246/andrew-hyman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553444891, "creation_date": 1552978688, "question_id": 55235229, "link": "https://stackoverflow.com/questions/55235229/cant-identify-proper-css-selector-to-scrape-with-mechanize", "title": "Can&#39;t Identify Proper CSS Selector to Scrape with Mechanize", "body": "<p>I have built a web scraper that is successfully pulling <em>almost</em> everything I need out of the web page I'm looking at. The goal is to pull the URL for a particular image associated with all the coffees found at a particular URL. </p>\n\n<p>The rake task I have defined to complete the scraping is as follows: </p>\n\n<pre><code>mechanize = Mechanize.new\nmechanize.get(url) do |page|\n    page.links_with(:href =&gt; /products/).each do |link|\n        coffee_page = link.click\n\n            bean = Bean.new\n\n            bean.acidity = coffee_page.css('[data-id=\"acidity\"]').text.strip.gsub(\"acidity \",\"\")\n            bean.elevation = coffee_page.css('[data-id=\"elevation\"]').text.strip.gsub(\"elevation \",\"\")\n            bean.roaster_id = \"2\"\n            bean.harvest_season = coffee_page.css('[data-id=\"harvest\"]').text.strip.gsub(\"harvest \",\"\")\n            bean.price = coffee_page.css('.price-wrap').text.gsub(\"$\",\"\")\n            bean.roast_profile = coffee_page.css('[data-id=\"roast\"]').text.strip.gsub(\"roast \",\"\")\n            bean.processing_type = coffee_page.css('[data-id=\"process\"]').text.strip.gsub(\"process \",\"\")\n            bean.cultivar = coffee_page.css('[data-id=\"cultivar\"]').text.strip.gsub(\"cultivar \",\"\")\n            bean.flavor_profiles = coffee_page.css('.price-wrap+ p').text.strip\n            bean.country_of_origin = coffee_page.css('#pdp-order h1').text.strip\n            bean.image_url = coffee_page.css('img data-featured-product-image').attr('src')\n\n            if bean.country_of_origin == \"Origin Set\" || bean.country_of_origin == \"Gift Card (online use only)\"\n                bean.destroy\n            else\n                ap bean\n            end\n    end\nend\n</code></pre>\n\n<p>Now the information I need is all on the page, and I'm looking for the image URL that is found like the below, but for all the individual coffee_pages at the source page. It needs to be generic enough to pull this picture source but nothing else. I've tried a number of different css selectors but everything pulls either nil or blank. </p>\n\n<pre><code>&lt;img src=\"//cdn.shopify.com/s/files/1/2220/0129/products/ceremony-product-gummy-bears_480x480.jpg?v=1551455589\" alt=\"Burundi Kiryama\" data-product-featured-image style=\"display:none\"&gt;\n</code></pre>\n\n<p>The coffee_page I'm on is here: <a href=\"https://shop.ceremonycoffee.com/products/burundi-kiryama\" rel=\"nofollow noreferrer\">https://shop.ceremonycoffee.com/products/burundi-kiryama</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2056, "user_id": 1838300, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/852556ae4382295d360e311debc5038a?s=128&d=identicon&r=PG", "display_name": "Sajad Rastegar", "link": "https://stackoverflow.com/users/1838300/sajad-rastegar"}, "edited": false, "score": 0, "creation_date": 1552981582, "post_id": 55235019, "comment_id": 97204901, "body": "Could you please answer these questions:   What is the type of request object?  How did you get request variable?   Which library are you using to do HTTP request?"}, {"owner": {"reputation": 1368, "user_id": 3540782, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/967473dab4dfed2eb086618cbd7bb3cb?s=128&d=identicon&r=PG&f=1", "display_name": "mrateb", "link": "https://stackoverflow.com/users/3540782/mrateb"}, "reply_to_user": {"reputation": 2056, "user_id": 1838300, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/852556ae4382295d360e311debc5038a?s=128&d=identicon&r=PG", "display_name": "Sajad Rastegar", "link": "https://stackoverflow.com/users/1838300/sajad-rastegar"}, "edited": false, "score": 0, "creation_date": 1552985338, "post_id": 55235019, "comment_id": 97206744, "body": "Im sending a REST api POST request. I have a problem in authentication and I need to check that the headers that I&#39;m sending contain the right info. I&#39;m not able to dump the request headers to check their contents though"}], "answers": [{"comments": [{"owner": {"reputation": 1368, "user_id": 3540782, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/967473dab4dfed2eb086618cbd7bb3cb?s=128&d=identicon&r=PG&f=1", "display_name": "mrateb", "link": "https://stackoverflow.com/users/3540782/mrateb"}, "edited": false, "score": 0, "creation_date": 1553016643, "post_id": 55237000, "comment_id": 97226469, "body": "Im getting an error cant dump anonymous module. Any ideas on what is this?"}, {"owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "reply_to_user": {"reputation": 1368, "user_id": 3540782, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/967473dab4dfed2eb086618cbd7bb3cb?s=128&d=identicon&r=PG&f=1", "display_name": "mrateb", "link": "https://stackoverflow.com/users/3540782/mrateb"}, "edited": false, "score": 0, "creation_date": 1553075262, "post_id": 55237000, "comment_id": 97246963, "body": "@mrateb I do not know. What does it write, when you write only <code>puts request.headers</code>?"}], "tags": [], "owner": {"reputation": 1454, "user_id": 1477940, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10a7263b299645bfbdcf747c0179297?s=128&d=identicon&r=PG", "display_name": "DonPaulie", "link": "https://stackoverflow.com/users/1477940/donpaulie"}, "is_accepted": false, "score": 1, "last_activity_date": 1553009749, "last_edit_date": 1553009749, "creation_date": 1552985993, "answer_id": 55237000, "question_id": 55235019, "link": "https://stackoverflow.com/questions/55235019/rails-dump-request-header-gives-cant-dump-anonymous-module/55237000#55237000", "title": "Rails - Dump Request header gives Cant dump anonymous module", "body": "<p>in your controller you can dump it </p>\n\n<pre><code>puts request.headers.to_yaml\n</code></pre>\n\n<p>yes, it can be a huge content. Then you should know, that it is only a hash, so you can do following and investigate more.  </p>\n\n<pre><code>puts request.headers.keys\n</code></pre>\n"}], "owner": {"reputation": 1368, "user_id": 3540782, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/967473dab4dfed2eb086618cbd7bb3cb?s=128&d=identicon&r=PG&f=1", "display_name": "mrateb", "link": "https://stackoverflow.com/users/3540782/mrateb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553017033, "creation_date": 1552977678, "last_edit_date": 1553017033, "question_id": 55235019, "link": "https://stackoverflow.com/questions/55235019/rails-dump-request-header-gives-cant-dump-anonymous-module", "title": "Rails - Dump Request header gives Cant dump anonymous module", "body": "<p>How can I dump the contents of the request headers in rails?</p>\n\n<p>I tried <code>puts YAML::dump(request.headers)</code> but I'm getting the error </p>\n\n<blockquote>\n  <p>can't dump anonymous module</p>\n</blockquote>\n\n<p>. Also tried <code>logger.info request.headers.env</code> but Im getting huge content. I just need to know what's sent in the header. How can this be easily done?</p>\n"}, {"tags": ["ruby", "vagrant", "gets"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 1, "creation_date": 1552993464, "post_id": 55234253, "comment_id": 97211623, "body": "What you are doing is really more of a provisioner than a trigger, and because of that your solution may lie in that direction."}, {"owner": {"reputation": 41, "user_id": 8449601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/786d59a17f18e7e0e3d98b1f785b7afd?s=128&d=identicon&r=PG&f=1", "display_name": "Neil E", "link": "https://stackoverflow.com/users/8449601/neil-e"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1553050021, "post_id": 55234253, "comment_id": 97237992, "body": "Thanks Matt. Using the provisioner works. I decided on a bash script, instead of Ruby, but either way, the script is now being called, and I can pass parameters.      config.vm.provision &quot;optional-name-parameter&quot;, type: &quot;shell&quot; do |s|       s.path = &quot;app/scripts/restore-db.sh&quot;       s.args  = &quot;&#39;hello, world!&#39;&quot;     end"}, {"owner": {"reputation": 41, "user_id": 8449601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/786d59a17f18e7e0e3d98b1f785b7afd?s=128&d=identicon&r=PG&f=1", "display_name": "Neil E", "link": "https://stackoverflow.com/users/8449601/neil-e"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1553050136, "post_id": 55234253, "comment_id": 97238015, "body": "I couldn&#39;t work out how to preserve the formatting in the previous post."}, {"owner": {"reputation": 41, "user_id": 8449601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/786d59a17f18e7e0e3d98b1f785b7afd?s=128&d=identicon&r=PG&f=1", "display_name": "Neil E", "link": "https://stackoverflow.com/users/8449601/neil-e"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1553050657, "post_id": 55234253, "comment_id": 97238126, "body": "Hi Matt, I would mark your comment as the accepted answer, but I can&#39;t see how to.  The help offers me this &quot;To mark an answer as accepted, click on the check mark beside the answer to toggle it from greyed out to filled in.&quot; but I can&#39;t see a check mark."}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1553080283, "post_id": 55234253, "comment_id": 97250009, "body": "I did not really give an answer, but rather just made a suggestion that I hoped would be helpful. Glad it was."}], "owner": {"reputation": 41, "user_id": 8449601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/786d59a17f18e7e0e3d98b1f785b7afd?s=128&d=identicon&r=PG&f=1", "display_name": "Neil E", "link": "https://stackoverflow.com/users/8449601/neil-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 265, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1552982045, "creation_date": 1552973667, "last_edit_date": 1552982045, "question_id": 55234253, "link": "https://stackoverflow.com/questions/55234253/can-i-run-gets-in-a-ruby-script-run-by-my-vagrantfile", "title": "Can I run GETS in a Ruby script run by my Vagrantfile", "body": "<p>I am new to Vagrant and Ruby.</p>\n\n<p>Is it possible to get user keyboard input into a ruby script I am triggering from a Vagrantfile thus :</p>\n\n<pre><code>config.trigger.after [:provision] do |trigger|  \n  trigger.run = {inline: \"C:/HashiCorp/Vagrant/embedded/mingw64/bin/ruby app/scripts/test.rb\"}  \nend\n</code></pre>\n\n<p>My host is Windows 10, my guest is bento\\ubuntu-18.10.<br>\nI am successfully creating a machine running in Virtualbox.</p>\n\n<p>I have simplified test.rb as much as possible.</p>\n\n<p>This code :</p>\n\n<pre><code>#!/usr/bin/ruby  \n\nputs \"enter selection\"  \nputs \"xrestore\"  \n</code></pre>\n\n<p>returns this as I expect :  </p>\n\n<pre><code>c:\\Users\\neile\\Documents\\development\\vagrant\\bento\\ubuntu-18.10-mysql&gt;vagrant provision  \n==&gt; vm1: [vagrant-hostsupdater] Checking for host entries  \n==&gt; vm1: Running action triggers after provision ...  \n==&gt; vm1: Running trigger...  \n    vm1: Running local: Inline script  \n    vm1: C:/HashiCorp/Vagrant/embedded/mingw64/bin/ruby app/scripts/restore-db.rb  \n    vm1: enter selection  \n    vm1: xrestore  \nc:\\Users\\neile\\Documents\\development\\vagrant\\bento\\ubuntu-18.10-mysql&gt;  \n</code></pre>\n\n<p>This code :</p>\n\n<pre><code>#!/usr/bin/ruby  \n\nputs \"enter selection\"  \nSTDOUT.flush()  \nxrestore = STDIN.gets.chomp  \nputs \"xrestore\"  \n</code></pre>\n\n<p>returns this :  </p>\n\n<pre><code>&gt;vagrant provision  \n==&gt; vm1: [vagrant-hostsupdater] Checking for host entries  \n==&gt; vm1: Running action triggers after provision ...  \n==&gt; vm1: Running trigger...  \n    vm1: Running local: Inline script  \n    vm1: C:/HashiCorp/Vagrant/embedded/mingw64/bin/ruby app/scripts/restore-db.rb  \n    vm1: enter selection  \n</code></pre>\n\n<p>There is no prompt to enter a value for variable : xrestore<br>\nand processing appears to stop.  </p>\n\n<p>To terminate the process I am typing Ctrl-C twice.  </p>\n\n<p>If I omit : STDOUT.flush()<br>\nI don't even get the prompt \"enter selection\"  </p>\n\n<p>I have tried putting the path to ruby.exe in the System Environment Variable PATH, and removing the path from the trigger.run statement.<br>\nThis produces the same results as above.  </p>\n\n<p>(BTW, I tried doing this using a bash script and I had similar issues with the bash read statement.<br>\nGoogling, I found others had the same issue with Ruby and Bash, but no solution.)  </p>\n\n<p>Is using 'gets' in a ruby script called from my Vagrantfile even possible?  </p>\n\n<p>I do have a workaround, which is to place the STDIN.gets in the Vagrantfile, not in the called script.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "ruby-on-rails-5", "faraday"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5299923, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oh99nCdp388/AAAAAAAAAAI/AAAAAAAAE4Q/QJSrwI3NQcI/photo.jpg?sz=128", "display_name": "Sreeram N R", "link": "https://stackoverflow.com/users/5299923/sreeram-n-r"}, "edited": false, "score": 1, "creation_date": 1553077024, "post_id": 55247784, "comment_id": 97248085, "body": "Yes, this works! Turns out the error I was getting was because of using the wrong encryption key and not because of anything to do with Faraday. Thanks for your time!"}], "tags": [], "owner": {"reputation": 1261, "user_id": 8844929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df0b2684f65b25d110b6b2408fc7ebb0?s=128&d=identicon&r=PG", "display_name": "Veridian Dynamics", "link": "https://stackoverflow.com/users/8844929/veridian-dynamics"}, "is_accepted": true, "score": 0, "last_activity_date": 1553020123, "creation_date": 1553020123, "answer_id": 55247784, "question_id": 55233995, "link": "https://stackoverflow.com/questions/55233995/how-to-encrypt-a-json-payload-in-faraday-rails-5/55247784#55247784", "title": "How to encrypt a JSON payload in Faraday (Rails 5)", "body": "<p>Yes, why not? I might be missing something. </p>\n\n<p>You can encrypt any String and pass it along through the body of a request. However, if you do so, you probably want to stay within proper content types as per your application/json header.</p>\n\n<p>JSON:</p>\n\n<pre><code>{ \n     name: \"Alice\", \n     age: 25 \n}\n</code></pre>\n\n<p>We could encrypt each individual key-value pair:</p>\n\n<pre><code>{ \n     name: gtLHeq+OR9JDvAlTFN98VZlqCrrRvFITw5TnFwGHCB0+8=, \n     age: gt9gI3dSssl5BOcSpYr0egkye98VZlqCrrRvFITw5TnFwGHCB0+8= \n}\n</code></pre>\n\n<p>Or we could encrypt the whole JSON block:</p>\n\n<pre><code>{ \n     secret: W29Ud80egkye98VZlqCrrRvFITw5TnFwGHCB0+8= \n}\n</code></pre>\n\n<p>I wrapped the encrypted JSON in more JSON so that we didn't break the content-type. But I'm not sure if your 3rd party service is equipped to decrypt the whole block or if it looks for specific key-value pairs in the JSON and decrypts those. That's the important distinction. You can encrypt almost anything and ship it over the wire, but if the listener isn't conditioned to decrypt your data in that format, you're forced to conform to their format.</p>\n"}], "owner": {"reputation": 3, "user_id": 5299923, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oh99nCdp388/AAAAAAAAAAI/AAAAAAAAE4Q/QJSrwI3NQcI/photo.jpg?sz=128", "display_name": "Sreeram N R", "link": "https://stackoverflow.com/users/5299923/sreeram-n-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 55247784, "answer_count": 1, "score": 0, "last_activity_date": 1553020123, "creation_date": 1552972063, "question_id": 55233995, "link": "https://stackoverflow.com/questions/55233995/how-to-encrypt-a-json-payload-in-faraday-rails-5", "title": "How to encrypt a JSON payload in Faraday (Rails 5)", "body": "<p>I'm a little new to Rails and using the Faraday gem for API calls so please be gentle. :)</p>\n\n<p>We use Faraday (gem) for all our server-originated API calls in our Rails application. One of the external services that we use requires us to encrypt all our payloads using an RSA 4096 public key provided by the service provider. </p>\n\n<p>Typically the way we use Faraday is: </p>\n\n<pre><code>connection = Faraday.new(:url: url) do |faraday|\n    faraday.request :url_encoded\n    faraday.response :logger       \n    faraday.adapter  Faraday.default_adapter  \nend\n\nparameters = '{\n    \"key1\": \"value1\"\n    \"key2\":XXXXXX,\n    .\n    .\n\n}'\n\nresponse = connection.post do |req|\n    req.url some_url\n    req.headers['Content-Type'] = 'application/json'\n    req.body = &lt;encrypted JSON parameters given in **parameters**&gt;\nend\n</code></pre>\n\n<p>I wanted to know if we could directly encrypt the <em>parameters</em> object has after converting it to JSON, and passing it in the <strong>req.body</strong> attribute, or if there is a more systematic way to do the same. </p>\n\n<p>Thanks a lot in advance for the help! </p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "edited": false, "score": 0, "creation_date": 1552991205, "post_id": 55232341, "comment_id": 97210321, "body": "I just got it working, but it seems like a lot of unnecessary code."}], "answers": [{"comments": [{"owner": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "reply_to_user": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "edited": false, "score": 0, "creation_date": 1552990455, "post_id": 55232442, "comment_id": 97209858, "body": "@PanKe No luck again. I tried <code>@users = User.all.where(&quot;(LOWER(first_name) OR &#39; &#39; OR LOWER(last_name)) LIKE :search&quot;, search: &quot;%{parameter}%&quot;)</code>"}, {"owner": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "reply_to_user": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "edited": false, "score": 0, "creation_date": 1552990708, "post_id": 55232442, "comment_id": 97209997, "body": "@AustinBurke assume you are using mysql, the function is concat <a href=\"https://www.w3schools.com/sql/func_mysql_concat.asp\" rel=\"nofollow noreferrer\">w3schools.com/sql/func_mysql_concat.asp</a>"}, {"owner": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "edited": false, "score": 0, "creation_date": 1552990852, "post_id": 55232442, "comment_id": 97210102, "body": "<a href=\"https://stackoverflow.com/questions/1003358/sqlite-problem-selecting-two-columns-as-one\" title=\"sqlite problem selecting two columns as one\">stackoverflow.com/questions/1003358/&hellip;</a>   It should apparently work. I&#39;m not sure why it doesn&#39;t"}, {"owner": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "edited": false, "score": 0, "creation_date": 1552991584, "post_id": 55232442, "comment_id": 97210545, "body": "yeah, should work. Did you check the SQL that rails generates?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "edited": false, "score": 0, "creation_date": 1552992045, "post_id": 55232442, "comment_id": 97210808, "body": "What&#39;s the code you&#39;re using, what&#39;s the rails stacktrace or logs of the code, what&#39;s the whole error if any @AustinBurke?"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 2, "last_activity_date": 1552959231, "creation_date": 1552959231, "answer_id": 55232442, "question_id": 55232341, "link": "https://stackoverflow.com/questions/55232341/sql-query-for-user-first-name-or-user-last-name-or-both/55232442#55232442", "title": "SQL query for User.first_name OR User.last_name OR both?", "body": "<p>You can try concatenating firstname and lastname with <code>||</code>:</p>\n\n<pre><code>User.where(\n  \"(LOWER(firstname) || ' ' || LOWER(lastname)) LIKE :search\",\n  search: '%HARRY potter%'\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "edited": false, "score": 0, "creation_date": 1552989695, "post_id": 55232688, "comment_id": 97209372, "body": "The issue is that I&#39;m querying different tables with the search bar. Not all user searches need to be split into first_name and last_name, so I don&#39;t believe this would work."}, {"owner": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "reply_to_user": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "edited": false, "score": 0, "creation_date": 1552990215, "post_id": 55232688, "comment_id": 97209716, "body": "your requirement is like this? if there is a space, search as a fullname, if not, search as first or last name"}, {"owner": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "edited": false, "score": 0, "creation_date": 1552990636, "post_id": 55232688, "comment_id": 97209952, "body": "So there are Tournament Names, Clubs, and Users. Tournament names can really be anything (e.g. &quot;The Best Team in the World&quot; or &quot;Best Team&quot;). Similarly for clubs. I need to return all results.   I&#39;ve already managed to query the clubs and tournaments, since their names are just one string stored in a <code>name</code> attribute. The issue is with users having a <code>first_name</code> and <code>last_name</code> attribute in the Users table."}], "tags": [], "owner": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "is_accepted": false, "score": 0, "last_activity_date": 1552961624, "creation_date": 1552961624, "answer_id": 55232688, "question_id": 55232341, "link": "https://stackoverflow.com/questions/55232341/sql-query-for-user-first-name-or-user-last-name-or-both/55232688#55232688", "title": "SQL query for User.first_name OR User.last_name OR both?", "body": "<p>You can split the <code>name</code> to <code>first_name</code> and <code>last_name</code> then</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>User.where(\n  \"lower(first_name) LIKE :first_name AND lower(last_name) LIKE :last_name\", \n  first_name: \"%#{first_name}%\", last_name: \"%#{last_name}%\"\n)\n</code></pre>\n"}], "owner": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552961624, "creation_date": 1552958383, "question_id": 55232341, "link": "https://stackoverflow.com/questions/55232341/sql-query-for-user-first-name-or-user-last-name-or-both", "title": "SQL query for User.first_name OR User.last_name OR both?", "body": "<p>I'm programming a Rails app that allows a user to search for other users. Currently, a user can search first or last name, but not both. </p>\n\n<p>I'm using:</p>\n\n<pre><code>@users = User.all.where(\"lower(first_name) LIKE :search OR lower(last_name) LIKE :search\", search: \"%#{parameter}%\")\n</code></pre>\n\n<p>Given that the attributes are separate, how can I handle a search like \"Harry Potter\" with a space? I've looked around at ignoring spaces and then trying to separate the first and last, but they all seem quite complicated. </p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "jquery-ui"], "owner": {"reputation": 129, "user_id": 8202357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cce4ba055cd4477773b3f8fe6bed8f6b?s=128&d=identicon&r=PG&f=1", "display_name": "ga4696", "link": "https://stackoverflow.com/users/8202357/ga4696"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1552957256, "creation_date": 1552957256, "question_id": 55232216, "link": "https://stackoverflow.com/questions/55232216/gem-jquery-ui-rails-is-not-available-in-sdk-rvm-ruby-2-3-1", "title": "Gem &#39;jquery-ui-rails&#39; is not available in SDK &#39;RVM: ruby-2.3.1&#39;", "body": "<p>So I am trying to use jquery-ui in a rails app. I put <code>gem 'jquery-ui-rails'</code> and run <code>bundle install</code>. I have <code>Using jquery-rails 4.2.1</code>\nand <code>Using jquery-ui-rails 6.0.1</code>. But I don't have an application.js file. \nIn node_modules folder I have : <a href=\"https://i.stack.imgur.com/NmoFX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NmoFX.png\" alt=\"enter image description here\"></a></p>\n\n<p>but not jquery-ui, even though I also tried to get it via npm</p>\n\n<p>in gemfile when I hover over jquery-ui-rails I get <code>Gem 'jquery-ui-rails' is not available in SDK 'RVM: ruby-2.3.1'</code></p>\n\n<p>is there anything else I should do? I searched a lot but couldn't find a solution. Any suggestion would be highly appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "friendly-id"], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": true, "score": 1, "last_activity_date": 1552955998, "creation_date": 1552955998, "answer_id": 55232063, "question_id": 55231062, "link": "https://stackoverflow.com/questions/55231062/rails-using-friendly-id-slug-with-column-from-associated-model/55232063#55232063", "title": "Rails: Using friendly_id/slug with column from associated model", "body": "<p>FriendlyId always uses a method as the basis of the slug text, for your problem above I think you create method for user_name and call related field inside a method</p>\n\n<pre><code>class Contact &lt; ApplicationRecord\n  belongs_to :user\n\n  extend FriendlyId\n  friendly_id :user_name\n\n  def user_name\n    user.user_name\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 8500089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIT6I.jpg?s=128&g=1", "display_name": "Rasna Shakya", "link": "https://stackoverflow.com/users/8500089/rasna-shakya"}, "is_accepted": false, "score": 1, "last_activity_date": 1552984311, "creation_date": 1552984311, "answer_id": 55236499, "question_id": 55231062, "link": "https://stackoverflow.com/questions/55231062/rails-using-friendly-id-slug-with-column-from-associated-model/55236499#55236499", "title": "Rails: Using friendly_id/slug with column from associated model", "body": "<p>Use this way:</p>\n\n<pre><code>class Contact &lt; ApplicationRecord\n  belongs_to :user\n\n  extend FriendlyId\n  friendly_id :user_name\n\n  def user_name\n    user.user_name\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 7614941, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e1ce1f96528ab233b12f9a66f4ed86d6?s=128&d=identicon&r=PG&f=1", "display_name": "andrzej541", "link": "https://stackoverflow.com/users/7614941/andrzej541"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "accepted_answer_id": 55232063, "answer_count": 2, "score": 0, "last_activity_date": 1552984311, "creation_date": 1552948468, "question_id": 55231062, "link": "https://stackoverflow.com/questions/55231062/rails-using-friendly-id-slug-with-column-from-associated-model", "title": "Rails: Using friendly_id/slug with column from associated model", "body": "<p>I've got Contact model which I want to be slugged (friendly_id gem). By using the user_name column from User model which Contact model belongs to.</p>\n\n<pre><code>class Contact &lt; ApplicationRecord\n  belongs_to :user\n\n  extend FriendlyId\n  friendly_id self.user.user_name, use: :slugged\n</code></pre>\n\n<p>But typing <code>Contact.find_each(&amp;:save)</code> in my rails console I get this error:</p>\n\n<blockquote>\n  <p>NoMethodError (undefined method `user' for Contact (call\n  'Contact.connection' to establish a connection):Class)</p>\n</blockquote>\n\n<p>How can I use my assosiated model as a slug?</p>\n\n<p>Rails version: 5.2.2\nFriendly_id gem: 5.2.4</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1552948166, "post_id": 55230833, "comment_id": 97196268, "body": "Please do not post images of plaintext. <a href=\"https://meta.stackoverflow.com/a/285557/3784008\">Images of plaintext are not appropriate on StackOverflow</a>. You have access to the plaintext; please copy and paste it into your question."}, {"owner": {"reputation": 333, "user_id": 3675276, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vuH7K.png?s=128&g=1", "display_name": "KidCoder", "link": "https://stackoverflow.com/users/3675276/kidcoder"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1552948739, "post_id": 55230833, "comment_id": 97196469, "body": "@anothermh understood, thanks. Updated."}, {"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 0, "creation_date": 1552949759, "post_id": 55230833, "comment_id": 97196786, "body": "What version of OSX are you running, and can you run <code>rails server</code>?"}, {"owner": {"reputation": 333, "user_id": 3675276, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vuH7K.png?s=128&g=1", "display_name": "KidCoder", "link": "https://stackoverflow.com/users/3675276/kidcoder"}, "reply_to_user": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 0, "creation_date": 1552951396, "post_id": 55230833, "comment_id": 97197213, "body": "@nzajt I&#39;m running OSX 10.14.3. If I run <code>rails server</code>, I get the same type of error."}, {"owner": {"reputation": 333, "user_id": 3675276, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vuH7K.png?s=128&g=1", "display_name": "KidCoder", "link": "https://stackoverflow.com/users/3675276/kidcoder"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1552952209, "post_id": 55230833, "comment_id": 97197425, "body": "@muistooshort tried <code>rvm install ruby-2.4.2</code>, and if I <code>make rails</code> now I get: <code>An error occurred while installing eventmachine (1.0.3), and Bundler cannot continue.</code>"}, {"owner": {"reputation": 333, "user_id": 3675276, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vuH7K.png?s=128&g=1", "display_name": "KidCoder", "link": "https://stackoverflow.com/users/3675276/kidcoder"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1552955731, "post_id": 55230833, "comment_id": 97198219, "body": "@muistooshort UPDATE: i fixed the eventmachine issue and now I&#39;m getting <code>bundle exec rake sunspot:solr:start rake aborted! TypeError: ActiveSupport::Duration can&#39;t be coerced into Integer</code> when I try <code>make rails</code>"}, {"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 1, "creation_date": 1553008201, "post_id": 55230833, "comment_id": 97221385, "body": "I had a similar issue on 10.14.3 with a legacy rails site, I had to remove my old version of ruby and then reinstall it. After you reinstall it you will need to run <code>bundle install</code> until you can get it to install all the gems, then you should be fine."}], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 3675276, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vuH7K.png?s=128&g=1", "display_name": "KidCoder", "link": "https://stackoverflow.com/users/3675276/kidcoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1553636957, "creation_date": 1553636957, "answer_id": 55366697, "question_id": 55230833, "link": "https://stackoverflow.com/questions/55230833/make-rails-giving-syntax-errors-in-terminal/55366697#55366697", "title": "&quot;make rails&quot; giving syntax errors in terminal", "body": "<p>Solved this issue by installing <code>ruby 2.3.0</code>, older versions aren't supported by SOLR. (2.6.0 onwards is not currently supported in our project)</p>\n"}], "owner": {"reputation": 333, "user_id": 3675276, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vuH7K.png?s=128&g=1", "display_name": "KidCoder", "link": "https://stackoverflow.com/users/3675276/kidcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "accepted_answer_id": 55366697, "answer_count": 1, "score": -2, "last_activity_date": 1598160140, "creation_date": 1552947143, "last_edit_date": 1598160140, "question_id": 55230833, "link": "https://stackoverflow.com/questions/55230833/make-rails-giving-syntax-errors-in-terminal", "title": "&quot;make rails&quot; giving syntax errors in terminal", "body": "<p>Every time I run <strong>&quot;make rails&quot;</strong> I get syntax errors and warnings within my terminal.</p>\n<p>I'm using <strong>ruby 2.1.3p242 (2014-09-19 revision 47630) [x86_64-darwin18.0]</strong> because the project I'm working on mandates it, but I can update if needed.</p>\n<p>We are currently using a legacy rails site as one of the users in the comments pointed out. This led to the find that we are our project would need to be run on ruby 2.3.0 as SOLR doesn't support the newer versions in our project. Furthermore, running <code>bundle install</code> also helps to resolve dependencies of older projects.</p>\n<p><em>This is what I get when I <strong>make rails</strong></em>:</p>\n<pre><code>Ahans-MacBook-Pro:app ahansabharwal$ make rails\n\nPOSTGRES starting\npg_ctl -D ./db/development.pg -l ./db/development.pg/postgres.log start\nwaiting for server to start.... done\nserver started\nConnection to localhost port 5432 [tcp/postgresql] succeeded!\n\nSOLR starting\nbundle exec rake sunspot:solr:start\n/Users/ahansabharwal/.rvm/gems/ruby-2.1.3@project/gems/sass-3.7.2/lib/sass/script/functions.rb:2097: warning: else without rescue is useless\n/Users/ahansabharwal/.rvm/gems/ruby-2.1.3@project/gems/sass-3.7.2/lib/sass/script/functions.rb:2103: warning: else without rescue is useless\n/Users/ahansabharwal/.rvm/gems/ruby-2.1.3@project/gems/sass-3.7.2/lib/sass/script/functions.rb:2142: warning: else without rescue is useless\nrake aborted!\nSyntaxError: /Users/ahansabharwal/.rvm/gems/ruby-2.1.3@project/gems/sass-3.7.2/lib/sass/script/functions.rb:2093: syntax error, unexpected modifier_if\n          if separator.value == 'auto'\n            ^\n/Users/ahansabharwal/.rvm/gems/ruby-2.1.3@project/gems/sass-3.7.2/lib/sass/script/functions.rb:2097: syntax error, unexpected ',', expecting keyword_end\n/Users/ahansabharwal/.rvm/gems/ruby-2.1.3@project/gems/sass-3.7.2/lib/sass/script/functions.rb:2103: syntax error, unexpected ')', expecting keyword_end\n/Users/ahansabharwal/.rvm/gems/ruby-2.1.3@project/gems/sass-3.7.2/lib/sass/script/functions.rb:2138: syntax error, unexpected modifier_if\n          if separator.value == 'auto'\n            ^\n/Users/ahansabharwal/.rvm/gems/ruby-2.1.3@project/gems/sass-3.7.2/lib/sass/script/functions.rb:2142: syntax error, unexpected ')', expecting keyword_end\n/Users/ahansabharwal/.rvm/gems/ruby-2.1.3@project/gems/sass-3.7.2/lib/sass/script/functions.rb:2920: syntax error, unexpected keyword_end, expecting end-of-input\n.\n. (similar syntax errors)\n.\n(See full trace by running task with --trace)\nmake[1]: *** [solr-force-start] Error 1\nmake: *** [solr] Error 2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rabbitmq", "sneakers"], "comments": [{"owner": {"reputation": 285, "user_id": 11016237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIjD9.png?s=128&g=1", "display_name": "Svetlin Simonyan", "link": "https://stackoverflow.com/users/11016237/svetlin-simonyan"}, "edited": false, "score": 0, "creation_date": 1552989558, "post_id": 55229693, "comment_id": 97209286, "body": "You should provide the version of Rails you are using. If you are on Rails 5+ can you try wrapping your application code in <code>Rails.application.executor { }</code> (middleware or just hardcoded in your jobs) . I have no experience with Sneakers but I have a suspicion it does not release connections to the pool by itself and that should fix it. More details about the mechanism: <a href=\"https://guides.rubyonrails.org/threading_and_code_execution.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/threading_and_code_execution.html</a> . Please let me know how it goes."}, {"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "reply_to_user": {"reputation": 285, "user_id": 11016237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIjD9.png?s=128&g=1", "display_name": "Svetlin Simonyan", "link": "https://stackoverflow.com/users/11016237/svetlin-simonyan"}, "edited": false, "score": 0, "creation_date": 1553170595, "post_id": 55229693, "comment_id": 97290170, "body": "@SvetlinSimonyan I&#39;m executing worker&#39;s code inside <code>ActiveRecord::Base.connection_pool.with_connection</code> block. If I&#39;m not mistaken, <code>Rails.application.executor.wrap</code> uses it under the hood."}], "answers": [{"tags": [], "owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "is_accepted": false, "score": 1, "last_activity_date": 1553171833, "creation_date": 1553171833, "answer_id": 55280605, "question_id": 55229693, "link": "https://stackoverflow.com/questions/55229693/rails-sneakers-could-not-obtain-a-connection-from-the-pool/55280605#55280605", "title": "Rails + Sneakers: could not obtain a connection from the pool", "body": "<p>While waiting for an answer, I kept looking for a solution.</p>\n\n<p>And, I guess, my very base problem was in connection pool size.</p>\n\n<p>On the Sneakers gem issues tracker, I found a <a href=\"https://github.com/jondot/sneakers/issues/103#issuecomment-134529425\" rel=\"nofollow noreferrer\">comment</a> with the formula for calculating the required number of connections at full load. I changed the code from the comment a bit, so now it makes calculations taking into account the individual settings of each worker:</p>\n\n<pre><code>before_fork = -&gt; {\n  ActiveSupport.on_load(:active_record) do\n    ActiveRecord::Base.connection_pool.disconnect!\n    Sneakers.logger.info('Disconnected from ActiveRecord!')\n  end\n}\n\nafter_fork = -&gt; {\n  def count_pool_size\n    workers              = ::Sneakers::Worker::Classes\n    default_threads_size = ::Sneakers.const_get(:CONFIG)[:threads]\n    base_pool_size       = 3 + workers.size * 3\n\n    if Sneakers.const_get(:CONFIG)[:share_threads]\n      base_pool_size + default_threads_size\n    else\n      base_pool_size + connections_per_worker(workers, default_threads_size)\n    end\n  end\n\n  def connections_per_worker(classes, default)\n    classes.inject(0) do |sum, worker_class|\n      sum + (worker_class.queue_opts[:threads] || default)\n    end\n  end\n\n  def reconfig?\n    Rails.env.production?\n  end\n\n  ActiveSupport.on_load(:active_record) do\n    config = Rails.application.config.database_configuration[Rails.env]\n    config.merge!('pool' =&gt; count_pool_size) if reconfig?\n\n    ActiveRecord::Base.establish_connection(config)\n    Sneakers.logger.info(\"Connected to ActiveRecord! Config: #{config}\")\n  end\n}\n</code></pre>\n\n<p>Summary: for all workers, I need to have a limit of almost 600 connections at maximum load. But I only had 40. For now, I will use the above code. Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "edited": false, "score": 0, "creation_date": 1563176294, "post_id": 56950078, "comment_id": 100598747, "body": "I already use it: <a href=\"https://stackoverflow.com/questions/55229693/rails-sneakers-could-not-obtain-a-connection-from-the-pool/56950078#comment97290170_55229693\" title=\"rails sneakers could not obtain a connection from the pool\">stackoverflow.com/questions/55229693/&hellip;</a>"}], "tags": [], "owner": {"reputation": 435, "user_id": 6733955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1257294547637551/picture?type=large", "display_name": "Dende", "link": "https://stackoverflow.com/users/6733955/dende"}, "is_accepted": false, "score": 0, "last_activity_date": 1562666466, "creation_date": 1562666466, "answer_id": 56950078, "question_id": 55229693, "link": "https://stackoverflow.com/questions/55229693/rails-sneakers-could-not-obtain-a-connection-from-the-pool/56950078#56950078", "title": "Rails + Sneakers: could not obtain a connection from the pool", "body": "<p>From <a href=\"https://github.com/jondot/sneakers/issues/42#issuecomment-72244263\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<blockquote>\n  <p>Active Record didn't seem to be releasing connections after the <code>work()</code>\n  method had completed. If you pass the block using Active Record to\n  <code>ActiveRecord::Base.connection_pool.with_connection</code>, it will release the\n  connections perfectly.</p>\n</blockquote>\n\n<pre><code>def work(msg)\n  id = JSON.parse(msg)['id']\n  ActiveRecord::Base.connection_pool.with_connection do\n    user = User.find(id)\n    user.name=\"Homer Simpson\"\n    user.save\n  end\n  ack!\nend\n</code></pre>\n"}], "owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1042, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1562666466, "creation_date": 1552941532, "question_id": 55229693, "link": "https://stackoverflow.com/questions/55229693/rails-sneakers-could-not-obtain-a-connection-from-the-pool", "title": "Rails + Sneakers: could not obtain a connection from the pool", "body": "<p>We're using Sneakers gem in production for a big application. And sometimes the load can be so huge that one specific queue may contain over 250_000 messages. And in such cases, the exception</p>\n\n<pre><code>ActiveRecord::ConnectionTimeoutError: \ncould not obtain a connection from the pool within 5.000 seconds (waited 5.000 seconds); all pooled connections were in use\n</code></pre>\n\n<p>occurs regularly.</p>\n\n<p>For the database, we are using Amazon RDS based on PostgreSQL 9.6. <code>max_connections</code> PostgreSQL config value is 3296.</p>\n\n<p>Our <code>database.yml</code> file:</p>\n\n<pre><code>production:\n  adapter: postgresql\n  encoding: utf8\n  pool: 40\n  database: &lt;%= ENV['RDS_DB_NAME'] %&gt;\n  username: &lt;%= ENV['RDS_USERNAME'] %&gt;\n  password: &lt;%= ENV['RDS_PASSWORD'] %&gt;\n  host: &lt;%= ENV['RDS_HOSTNAME'] %&gt;\n  port: &lt;%= ENV['RDS_PORT'] %&gt;\n</code></pre>\n\n<p>I guess we can increase a <code>pool</code> value, but I can't find info about how to calculate max possible value so it will not break anything.</p>\n\n<p>Also, a copy of an application for background processing using Sneakers gem lives separately (but uses the same database) and can be configured individually. But right now it has the same <code>database.yml</code> config. Sneakers gem config file:</p>\n\n<pre><code>production:\n  heartbeat: 2000\n  timeout_job_after: 35\n  exchange_type: :fanout\n  threads: 4\n  prefetch: 4\n  durable: true\n  ack: true\n  daemonize: true\n  retry_max_times: 5\n  retry_timeout: 2000\n  workers: 4\n</code></pre>\n\n<p>We have no problems with connections pool in base runtime application, but <code>ActiveRecord::ConnectionTimeoutError</code> occurs in workers very often and it is a really big problem.</p>\n\n<p>So, please help me to reconfigure <code>databese.yml</code> file:</p>\n\n<ol>\n<li>How to correctly calculate the max possible value for <code>pool</code> option\nif the database <code>max_connections</code> value is 3296?</li>\n<li>How to correctly calculate the max possible value for <code>pool</code> option \nwhen using the Sneakers gem with the configs above?</li>\n<li>Or, if my configs are good, how can I avoid <code>ActiveRecord::ConnectionTimeoutError</code> in workers?</li>\n</ol>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1552938640, "post_id": 55229028, "comment_id": 97192599, "body": "<code>counter_patients != @counter_patients</code>"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 11167484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AM-yop2gwj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdu0X6rBdmTknbmKIgFY5W7nJDKOQ/mo/photo.jpg?sz=128", "display_name": "Jordans", "link": "https://stackoverflow.com/users/11167484/jordans"}, "edited": false, "score": 0, "creation_date": 1552939152, "post_id": 55229122, "comment_id": 97192828, "body": "Thanks for the explanation, when I make the change I get the following error : undefined local variable or method `counter_patients&#39; for #&lt;#&lt;Class:0x00007f80b5385828&gt;:0x00007f80b537e708&gt;"}, {"owner": {"reputation": 97, "user_id": 11167484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AM-yop2gwj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdu0X6rBdmTknbmKIgFY5W7nJDKOQ/mo/photo.jpg?sz=128", "display_name": "Jordans", "link": "https://stackoverflow.com/users/11167484/jordans"}, "edited": false, "score": 0, "creation_date": 1552940079, "post_id": 55229122, "comment_id": 97193189, "body": "Fixed my error, problem was that I was calling the method from another controller that was not serving the page. Thanks for the above as I would be ages trying to fix this!"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1552938993, "creation_date": 1552938993, "answer_id": 55229122, "question_id": 55229028, "link": "https://stackoverflow.com/questions/55229028/method-in-controller-not-being-triggered-by-call-in-view/55229122#55229122", "title": "Method in Controller not being triggered by call in View?", "body": "<p>In your view, you insert <code>&lt;%= @counter_patients %&gt;</code> which calls the instance variable <code>@counter_patients</code>. </p>\n\n<p>But you actually want to call the method <code>counter_patients</code> (note the missing <code>@</code>).</p>\n\n<p>Change that line in your code to:</p>\n\n<pre><code>&lt;p&gt; Count : &lt;%= counter_patients %&gt; &lt;p&gt;\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 11167484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AM-yop2gwj0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdu0X6rBdmTknbmKIgFY5W7nJDKOQ/mo/photo.jpg?sz=128", "display_name": "Jordans", "link": "https://stackoverflow.com/users/11167484/jordans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 55229122, "answer_count": 1, "score": 0, "last_activity_date": 1552938993, "creation_date": 1552938507, "question_id": 55229028, "link": "https://stackoverflow.com/questions/55229028/method-in-controller-not-being-triggered-by-call-in-view", "title": "Method in Controller not being triggered by call in View?", "body": "<p>I have a method within my controller that simply counts the number of patients a user has. I tested out the query and it works as expected when I manually pass in a user_id (not passing in the helper method from devise : current_user). However, when I try call the method from my View the method does not get called, I added in a print out statement just to see if it is just my query not being executed however my logs confirm that not even the print out statement is being invoked. </p>\n\n<p>Any help on this would be greatly appreciated!</p>\n\n<p><strong>patient_controller.rb</strong></p>\n\n<pre><code>helper_method :counter_patients\n\n def counter_patients\n      puts \"Tiggered\"\n      patient_user_counter = Patient.where(user_id: current_use).select(:user_id).count\n  end\n</code></pre>\n\n<p><strong>index.html.erb</strong></p>\n\n<pre><code>&lt;p&gt; Count : &lt;%= @counter_patients %&gt; &lt;p&gt;\n</code></pre>\n\n<p><strong>Log from Rails Console when running query</strong></p>\n\n<pre><code>irb(main):015:0&gt; r = Patient.where(user_id: 2).select(:user_id).count\n   (0.4ms)  SELECT COUNT(\"patients\".\"user_id\") FROM \"patients\" WHERE \"patients\".\"user_id\" = ?  [[\"user_id\", 2]]\n=&gt; 7\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "concurrency", "hanami"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1552955539, "post_id": 55228872, "comment_id": 97198191, "body": "Are you absolutely sure they&#39;re running in parallel? How does the code you&#39;ve shown prove this?"}, {"owner": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1552971639, "post_id": 55228872, "comment_id": 97201493, "body": "Please see my edit above."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1552971976, "post_id": 55228872, "comment_id": 97201577, "body": "Are you using selenium? Its possible that is the single threaded part."}, {"owner": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1552976050, "post_id": 55228872, "comment_id": 97202783, "body": "No, I&#39;m not using selenium."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1553004390, "post_id": 55228872, "comment_id": 97218800, "body": "What does your puma config look like? Have you configured it to use more than one thread?"}, {"owner": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "edited": false, "score": 0, "creation_date": 1553017883, "post_id": 55228872, "comment_id": 97227125, "body": "I haven&#39;t specified a config for Hanami and I have default one in Rails with 5 threads and 0 workers since I&#39;m on Wins. Under Rails Puma boots with 5 and under Hanami it boots with 16 threads."}], "owner": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1574937312, "creation_date": 1552937742, "last_edit_date": 1568197484, "question_id": 55228872, "link": "https://stackoverflow.com/questions/55228872/vbs-scripting-via-ruby-web-app-issues-with-multithreading", "title": "VBS scripting via Ruby web app -- issues with multithreading", "body": "<p>I have a very basic Ruby web application (currently in Hanami and in Rails) which provides VBS scripting functionalities to end users.</p>\n\n<p>This is currently still on Windows.</p>\n\n<p>The end user simply fills in a form and the web app triggers respecitve script and returns either requested data or just success/fail notification to the user.</p>\n\n<p>The issue I have and can't resolve is, that all subsequent requests wait for the current one to finish.</p>\n\n<p>I'm using Hanami or Rails with Puma or Thin. The result is always subsequent procesing. Even though this is still in dev, I have also tried production mode with Hanami.</p>\n\n<p>For Rails I have tried removing Rack::Lock as well, but to no avail.</p>\n\n<p>The VBS script itself is translated to Ruby via win32ole lib.</p>\n\n<p>Funny thing is, if I run the same script from a simple .rb file like so:</p>\n\n<pre><code>threads = []\n\nthreads &lt;&lt; Thread.new{\n  my_method(arg1, arg2)\n}\n\nthreads &lt;&lt; Thread.new{\n  my_method(arg1, arg2)\n}\n\nthreads &lt;&lt; Thread.new{\n  my_method(arg1, arg2)\n}\n\nthreads.each {|t| t.join}\n</code></pre>\n\n<p>they run in parallel.</p>\n\n<p><code>EDIT start: custom logs for pure ruby script</code></p>\n\n<pre><code>Connection [3] is opened at: 2019-02-25 10:11:10 +0100\nConnection [4] is opened at: 2019-02-25 10:11:10 +0100\nConnection [5] is opened at: 2019-02-25 10:11:13 +0100\nUser in connection [3] is logged in at: 2019-02-25 10:11:15 +0100\nUser in connection [4] is logged in at: 2019-02-25 10:11:16 +0100\nUser in connection [5] is logged in at: 2019-02-25 10:11:19 +0100\nParams in connection [4] are set in system at: 2019-02-25 10:11:20 +0100\nParams in connection [3] are set in system at: 2019-02-25 10:11:21 +0100\nSystem in connection [4] is closed at: 2019-02-25 10:11:21 +0100\nSystem in connection [3] is closed at: 2019-02-25 10:11:26 +0100\nParams in connection [5] are set in system at: 2019-02-25 10:11:26 +0100\nSystem in connection [5] is closed at: 2019-02-25 10:11:27 +0100\n\nConnection [0] is opened at: 2019-02-25 10:11:03 +0100\nConnection [1] is opened at: 2019-02-25 10:11:03 +0100\nConnection [2] is opened at: 2019-02-25 10:11:05 +0100\nUser in connection [0] is logged in at: 2019-02-25 10:11:08 +0100\nUser in connection [2] is logged in at: 2019-02-25 10:11:10 +0100\nUser in connection [1] is logged in at: 2019-02-25 10:11:10 +0100\nParams in connection [0] are set in system at: 2019-02-25 10:11:12 +0100\nParams in connection [1] are set in system at: 2019-02-25 10:11:12 +0100\nSystem in connection [0] is closed at: 2019-02-25 10:11:13 +0100\nSystem in connection [1] is closed at: 2019-02-25 10:11:17 +0100\nParams in connection [2] are set in system at: 2019-02-25 10:11:17 +0100\nSystem in connection [2] is closed at: 2019-02-25 10:11:19 +0100\n</code></pre>\n\n<p>The logs above show seconds only, but still one can see actions are not completely sequential. Furthermore, I see the scripts opening windows in parallel and performing actions whereas with web app it's clear that the second script window doesn't open until the first one is closed.</p>\n\n<p><code>EDIT end</code></p>\n\n<p><code>EDIT 2 start -- nginx implementation</code></p>\n\n<p>I've added nginx to the mix and the result is the same. Web app still executes scripts in requests sequentially.</p>\n\n<p><code>EDIT 2 end</code></p>\n\n<p>I'm stuck and don't know anymore where to go next for debugging.</p>\n\n<p>Does anyone have any ideas? Thank you.</p>\n\n<p>seba</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1552936620, "post_id": 55227150, "comment_id": 97191679, "body": "&quot;keep a module included&quot; makes no sense. Once included you can&#39;t un-include a module. Are you saying you want only instances for which <code>add_module</code> is <code>true</code> to respond to the instance methods in the module? If so, you need to say that."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1552986038, "post_id": 55227150, "comment_id": 97207158, "body": "I don&#39;t see any difference between your expected result and the result you got."}], "answers": [{"comments": [{"owner": {"reputation": 490, "user_id": 2037662, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4833c21cea66347b690327d91ec9695e?s=128&d=identicon&r=PG", "display_name": "ashr81", "link": "https://stackoverflow.com/users/2037662/ashr81"}, "edited": false, "score": 0, "creation_date": 1553110207, "post_id": 55227318, "comment_id": 97268636, "body": "thanks, In case of ex: <code>class A</code> inheriting properties of another <code>class B</code> and <code>class B</code> as well contains <code>test_method</code>. How is it possible to use the module <code>TestModule</code> s <code>test_method</code> instead of method inside the <code>class B</code>."}, {"owner": {"reputation": 490, "user_id": 2037662, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4833c21cea66347b690327d91ec9695e?s=128&d=identicon&r=PG", "display_name": "ashr81", "link": "https://stackoverflow.com/users/2037662/ashr81"}, "edited": false, "score": 0, "creation_date": 1553115842, "post_id": 55227318, "comment_id": 97271449, "body": "thanks for prompt response. And what is the differences/side-effects in calling methods between including a <code>module</code> inside a class:  1) include <code>module</code> outside <code>initialize</code>. 2) Include <code>module</code> inside <code>initialize</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 490, "user_id": 2037662, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4833c21cea66347b690327d91ec9695e?s=128&d=identicon&r=PG", "display_name": "ashr81", "link": "https://stackoverflow.com/users/2037662/ashr81"}, "edited": false, "score": 0, "creation_date": 1553120475, "post_id": 55227318, "comment_id": 97273229, "body": "@ashr81 it&#39;s a difference in scope. Think about it this way, in order to add methods to a <i>single instance</i> you need instance to <i>exist</i> which doesn&#39;t happen until initialize."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 6, "last_activity_date": 1553111237, "last_edit_date": 1553111237, "creation_date": 1552931478, "answer_id": 55227318, "question_id": 55227150, "link": "https://stackoverflow.com/questions/55227150/include-a-module-on-instances-instead-of-a-class/55227318#55227318", "title": "Include a module on instances instead of a class", "body": "<p>When you call <code>self.class.send(:include, MM::NN)</code>, that's making a irreversible change to the <em>class</em> (the blueprint for all instances).</p>\n\n<p>If you want a module to only be included for an instance, you have to use the singleton class (<a href=\"https://stackoverflow.com/questions/212407/what-exactly-is-the-singleton-class-in-ruby\">What exactly is the singleton class in ruby?</a>):</p>\n\n<pre><code>module TestModule\n  def test_method; \"ok\"; end\nend\n\nclass A\n    def initialize(add_module)\n        singleton_class.include(TestModule) if add_module\n    end\nend\n\nA.new(true).test_method  # module method called\nA.new(false).test_method # NoMethodError\n</code></pre>\n\n<p>Note that I changed <code>display</code> to <code>test_method</code>, because <code>display</code> is a built in Kernel method so it won't raise NoMethodError even if you don't include the module on the instance.</p>\n\n<p>Note, Ozer's answer is the same thing but using a different syntax.</p>\n\n<p>-- <strong>edit in response to comment</strong> --</p>\n\n<p>Adding methods on the singleton class takes priority over those added to the regular class, and if you include multiple modules onto the singleton class, the last on will take priority:</p>\n\n<pre><code>module A; def fn; 1; end; end\nmodule B; def fn; 2; end; end\nmodule C; def fn; 3; end; end\n\nclass D\n  include A\n  def initialize(add_b, add_c)\n    singleton_class.include(B) if add_b\n    singleton_class.include(C) if add_c\n  end\nend\n\nputs D.new(false, false).fn # =&gt; 1\nputs D.new(true, true).fn   # =&gt; 3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1552986169, "post_id": 55228499, "comment_id": 97207232, "body": "What are the parentheses around <code>class ... end</code> for?"}], "tags": [], "owner": {"reputation": 31, "user_id": 9278262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J08yByhhiko/AAAAAAAAAAI/AAAAAAAABao/PhadhorHIIQ/photo.jpg?sz=128", "display_name": "Ozer Chagatai", "link": "https://stackoverflow.com/users/9278262/ozer-chagatai"}, "is_accepted": false, "score": 2, "last_activity_date": 1552936176, "creation_date": 1552936176, "answer_id": 55228499, "question_id": 55227150, "link": "https://stackoverflow.com/questions/55227150/include-a-module-on-instances-instead-of-a-class/55228499#55228499", "title": "Include a module on instances instead of a class", "body": "<p>This will add it to just the instance that is being initialized:</p>\n\n<pre><code>class A\n  def initialize(add_module)\n    if add_module\n      (class &lt;&lt;self; include MM::NN; end)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1552942568, "creation_date": 1552942568, "answer_id": 55229925, "question_id": 55227150, "link": "https://stackoverflow.com/questions/55227150/include-a-module-on-instances-instead-of-a-class/55229925#55229925", "title": "Include a module on instances instead of a class", "body": "<p>You could add it to the singleton class as others suggest above. But I would suggest that the fact that OOP constructs are making your task hard is because you are approaching the problem from a bad angle. I think having instances of class <code>A</code> behave so differently by having different methods and ancestors is going to cause a lot more confusion than it solves.</p>\n\n<p>What I'd suggest instead is that you try to accomplish what you are doing using composition instead of inheritance. That is, have an instance variable inside <code>class A</code> that contains the behavior in the<code>MM:NN</code>. This depends on the specifics of the behavior in that module, but could roughly look like this:</p>\n\n<pre><code># This class is here because I'm assuming you can't make `MM::NN` a class in its own right. However it probably needs additional data or methods to actually work with the MM::NN methods\nclass NN_implementation\n  include MM::NN\nend\n\nclass A\n  def initialize(use_module)\n    # if this class needs access to data or methods from A, you could add `self` as an input arg to the constructor of `NN_implementation`\n    @nn = NN_implmenetation.new if use_module\n  end\n\n  def has_nn?\n    !@nn.blank?\n  end\nend\n</code></pre>\n\n<p>Then you can either (1) expose the specific <code>NN</code> methods you want as methods on class <code>A</code>, or you can expose the <code>nn</code> instance var using <code>attr_reader</code> and call something like <code>my_a_instnace.nn.some_nn_method if my_a_instance.has_nn?</code>. Again, largely depends on the specifics of <code>A</code> and <code>MM::NN</code> how I would ultimately code this up for prod-ready code, but something along these lines keeps class definitions clean and makes it not confusing where specific behavior comes from.</p>\n"}, {"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": false, "score": 5, "last_activity_date": 1552942717, "creation_date": 1552942717, "answer_id": 55229955, "question_id": 55227150, "link": "https://stackoverflow.com/questions/55227150/include-a-module-on-instances-instead-of-a-class/55229955#55229955", "title": "Include a module on instances instead of a class", "body": "<p><a href=\"https://ruby-doc.org/core/Module.html#method-i-include\" rel=\"noreferrer\"><code>include</code></a> adds all the methods from the module to any instances of the class that includes the module. To add the methods to an individual object you can use <a href=\"https://ruby-doc.org/core-2.6.2/Object.html#method-i-extend\" rel=\"noreferrer\"><code>extend</code></a>:</p>\n\n<pre><code>class A\n  def initialize(add_module)\n    extend(MM::NN) if add_module\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 490, "user_id": 2037662, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4833c21cea66347b690327d91ec9695e?s=128&d=identicon&r=PG", "display_name": "ashr81", "link": "https://stackoverflow.com/users/2037662/ashr81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 2, "accepted_answer_id": 55227318, "answer_count": 4, "score": 2, "last_activity_date": 1553116073, "creation_date": 1552930874, "last_edit_date": 1553116073, "question_id": 55227150, "link": "https://stackoverflow.com/questions/55227150/include-a-module-on-instances-instead-of-a-class", "title": "Include a module on instances instead of a class", "body": "<p>I have a module:</p>\n\n<pre><code>module MM::NN\n  def test_method\n    puts \"module method called\"\n  end\nend\n</code></pre>\n\n<p>I am trying to include this module in a class <code>A</code> per instance depending on a parameter passed to the initializer of the instance:</p>\n\n<pre><code>class A\n  def initialize(add_module)\n    self.class.send(:include, MM::NN) if add_module\n  end\nend\n</code></pre>\n\n<p>I expected:</p>\n\n<pre><code>A.new(true).test_method  # &gt;&gt; module method called\nA.new(false).test_method  # &gt;&gt; NoMethodError\n</code></pre>\n\n<p>But <code>test_method</code> is defined on all instances. Calling the class with argument <code>true</code> adds the module to the instances created later as well. I got:</p>\n\n<pre><code>A.new(true).test_method  # &gt;&gt; module method called\nA.new(false).test_method  # &gt;&gt; NoMethodError\n</code></pre>\n\n<p>Initializing the class with <code>false</code> argument on first initializer call and <code>true</code> in the second will give the desired result, as <code>test_method</code> method is added later:</p>\n\n<pre><code>A.new(false).test_method  # &gt;&gt; NoMethodError\nA.new(true).test_method  # &gt;&gt; module method called\n</code></pre>\n\n<p>because the module is attached to the class itself.</p>\n\n<p>How can I make the method available on specific cases like above?</p>\n\n<p>How do i solve an another case:<br>\nwhere <code>class A</code> inherit properties and methods of another <code>class B</code> and <code>class B</code> as well contains <code>test_method</code>. How is it possible to use the module <code>TestModule</code>s <code>test_method</code> instead of method inside the <code>class B</code>.</p>\n\n<p>And what are the differences(or)side-effects in calling methods by including a module inside a class:\n1) include module outside initialize.<br>\n2) Include module inside initialize.  </p>\n"}, {"tags": ["ruby", "ubuntu", "cron", "backticks"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1552932437, "post_id": 55227031, "comment_id": 97189709, "body": "<code>notify-send</code> probably isn&#39;t in your <code>PATH</code> when your script runs from cron. You&#39;re better off, in general, not assuming that <code>PATH</code> has anything in particular unless your script sets it itself. Maybe your script should use the full path to <code>notify-send</code> rather than relying on <code>PATH</code>."}], "answers": [{"tags": [], "owner": {"reputation": 796, "user_id": 1330428, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e412494ca502d02844c9f4cae2ffacee?s=128&d=identicon&r=PG", "display_name": "Greg Ruhl", "link": "https://stackoverflow.com/users/1330428/greg-ruhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1552935248, "creation_date": 1552935248, "answer_id": 55228254, "question_id": 55227031, "link": "https://stackoverflow.com/questions/55227031/backticks-work-in-ruby-script-when-run-from-command-line-but-not-from-crontab/55228254#55228254", "title": "Backticks work in ruby script when run from command line, but not from Crontab", "body": "<p>Possible issues:</p>\n\n<ul>\n<li>The user running the crontab (root, you, ???) and their system permissions</li>\n<li><code>ruby</code> version and <code>notify-send</code> in that user's <code>PATH</code></li>\n<li>Not specifying the <code>DISPLAY</code> variable in your cron</li>\n</ul>\n\n<p>Try this (change the number to the correct DISPLAY value) --></p>\n\n<pre><code>*/5 * * * * DISPLAY=:0 ruby ~/software_dev/scripts/new_script.rb\n</code></pre>\n\n<p>May be helpful:\n<a href=\"https://unix.stackexchange.com/questions/10121/open-a-window-on-a-remote-x-display-why-cannot-open-display\">https://unix.stackexchange.com/questions/10121/open-a-window-on-a-remote-x-display-why-cannot-open-display</a> </p>\n"}, {"comments": [{"owner": {"reputation": 144, "user_id": 5842473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JLY5QJ8pofw/AAAAAAAAAAI/AAAAAAAADUk/JVqUjjVtdSk/photo.jpg?sz=128", "display_name": "Jamie G", "link": "https://stackoverflow.com/users/5842473/jamie-g"}, "edited": false, "score": 0, "creation_date": 1552993823, "post_id": 55228423, "comment_id": 97211813, "body": "Funnily enough, this worked for another command that wasn&#39;t working <code>zenity --info ....</code>, which now displays when DISPLAY=:0 is set, but notify-send doesn&#39;t.  Will have a play with the PATH"}], "tags": [], "owner": {"reputation": 31, "user_id": 9278262, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J08yByhhiko/AAAAAAAAAAI/AAAAAAAABao/PhadhorHIIQ/photo.jpg?sz=128", "display_name": "Ozer Chagatai", "link": "https://stackoverflow.com/users/9278262/ozer-chagatai"}, "is_accepted": false, "score": 1, "last_activity_date": 1552935902, "creation_date": 1552935902, "answer_id": 55228423, "question_id": 55227031, "link": "https://stackoverflow.com/questions/55227031/backticks-work-in-ruby-script-when-run-from-command-line-but-not-from-crontab/55228423#55228423", "title": "Backticks work in ruby script when run from command line, but not from Crontab", "body": "<p>Looks like this isn't specifically a ruby issue, but its due to calling notify-send from crontab.</p>\n\n<p><a href=\"https://askubuntu.com/questions/298608/notify-send-doesnt-work-from-crontab\">https://askubuntu.com/questions/298608/notify-send-doesnt-work-from-crontab</a></p>\n\n<p>One solution on there was to add <code>DISPLAY=:0</code> to your script:</p>\n\n<pre><code>`DISPLAY=:0 notify-send \"Error in EYW Spaces script\" \"#{Shellwords.escape(message)}\"`\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 5842473, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JLY5QJ8pofw/AAAAAAAAAAI/AAAAAAAADUk/JVqUjjVtdSk/photo.jpg?sz=128", "display_name": "Jamie G", "link": "https://stackoverflow.com/users/5842473/jamie-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1552935902, "creation_date": 1552930433, "question_id": 55227031, "link": "https://stackoverflow.com/questions/55227031/backticks-work-in-ruby-script-when-run-from-command-line-but-not-from-crontab", "title": "Backticks work in ruby script when run from command line, but not from Crontab", "body": "<p>I have a Ruby script with the command</p>\n\n<pre><code>`notify-send \"Error in EYW Spaces script\" \"#{Shellwords.escape(message)}\"`\n</code></pre>\n\n<p>If I just run the script from the command line, I get the popup message, but if I put the script into the crontab</p>\n\n<pre><code>*/5 * * * * ruby ~/software_dev/scripts/new_script.rb\n</code></pre>\n\n<p>then nothing happens. I know for a fact that the script is running correctly, as I'm getting script output emailed to me, but its just that the popup is not appearing.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "soft-delete", "acts-as-paranoid", "ruby-paranoia"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11220307, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xk8MRbA1HqU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdnsvkPVRx6f7DZcm_fyAMxoxOl_w/mo/photo.jpg?sz=128", "display_name": "art", "link": "https://stackoverflow.com/users/11220307/art"}, "is_accepted": false, "score": 0, "last_activity_date": 1552942502, "creation_date": 1552942502, "answer_id": 55229911, "question_id": 55226574, "link": "https://stackoverflow.com/questions/55226574/migrating-from-acts-as-paranoid-to-paranoia-gem/55229911#55229911", "title": "Migrating from acts_as_paranoid to paranoia gem", "body": "<p>I would recommend taking a look at Discard </p>\n\n<p><a href=\"https://github.com/jhawthorn/discard#why-not-paranoia-or-acts_as_paranoid\" rel=\"nofollow noreferrer\">https://github.com/jhawthorn/discard#why-not-paranoia-or-acts_as_paranoid</a></p>\n\n<p>It accomplishes a similar goal without overriding activerecord's method by taking a simpler approach of providing convenience methods to hide soft-deleted records. There is a section on the documentation about why the author thiks this is better than either acts-as-paranoid or paranoia.</p>\n"}], "owner": {"reputation": 1201, "user_id": 8785865, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b892309a47e8d4a61140a615f2b3337?s=128&d=identicon&r=PG&f=1", "display_name": "Aarthi", "link": "https://stackoverflow.com/users/8785865/aarthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552942502, "creation_date": 1552928759, "question_id": 55226574, "link": "https://stackoverflow.com/questions/55226574/migrating-from-acts-as-paranoid-to-paranoia-gem", "title": "Migrating from acts_as_paranoid to paranoia gem", "body": "<p>We have used acts_as_paranoid gem(<a href=\"https://github.com/ActsAsParanoid/acts_as_paranoid\" rel=\"nofollow noreferrer\">https://github.com/ActsAsParanoid/acts_as_paranoid</a>) for soft deletion in our project. The project is in live now. Faced some of the issues in this gem and planned to migrate to paranoia gem(<a href=\"https://github.com/rubysherpas/paranoia\" rel=\"nofollow noreferrer\">https://github.com/rubysherpas/paranoia</a>). Is there anything we need to consider while migrating?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 5, "creation_date": 1552926103, "post_id": 55225749, "comment_id": 97186280, "body": "Is this a serious question? If so, could you please remove all that irrelevant information?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1552929773, "post_id": 55225749, "comment_id": 97188313, "body": "Generate all possible permutations, evaluate each one (rescuing errors) and check whether it returns <code>275</code> (could be more than one)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1552930735, "post_id": 55225749, "comment_id": 97188849, "body": "@idmean, yes and no. Anything extraneous should waste no more than a few seconds of a reader&#39;s time."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1552935286, "post_id": 55225749, "comment_id": 97191057, "body": "@Stefan, point well-taken. I changed the title."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1552986831, "post_id": 55225749, "comment_id": 97207579, "body": "Sounds fictional. :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1553211714, "post_id": 55225749, "comment_id": 97310808, "body": "@sawa, &quot;you can fool some of the people...&quot;. btw, smileys should have noses."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 1115951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa866a82c1c90c793b4e6753f5bebb0?s=128&d=identicon&r=PG", "display_name": "Register Sole", "link": "https://stackoverflow.com/users/1115951/register-sole"}, "edited": false, "score": 2, "creation_date": 1552932326, "post_id": 55227315, "comment_id": 97189659, "body": "There is only 1 possible set value of a, b, c, d, e, y, z that satisfy the result, and it can be achieved in 4 combinations (which differs only by where the z assignment is). You got 8 combinations probably because there are two identical <code>[:left, :right]</code> blocks posted in the question?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 307, "user_id": 1115951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa866a82c1c90c793b4e6753f5bebb0?s=128&d=identicon&r=PG", "display_name": "Register Sole", "link": "https://stackoverflow.com/users/1115951/register-sole"}, "edited": false, "score": 0, "creation_date": 1552932650, "post_id": 55227315, "comment_id": 97189809, "body": "@RegisterSole good catch! I&#39;ll leave the fix to Jack as an exercise."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1552935695, "post_id": 55227315, "comment_id": 97191269, "body": "Nicely done, well-organised code. Jack will be pleased. (That&#39;s quite a run-on sentence. You&#39;d be scolded by an English teacher, but I like it.)"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1552939210, "last_edit_date": 1552939210, "creation_date": 1552931451, "answer_id": 55227315, "question_id": 55225749, "link": "https://stackoverflow.com/questions/55225749/reassemble-jumbled-method/55227315#55227315", "title": "Reassemble jumbled method", "body": "<p>Since you insist that this is a code writing service, and you would like to see some code, and I have some time to kill, and I like code that generates code, and none of us cares about reputation score any more, here's my attempt to reconstruct little Jack's hard work:</p>\n\n<pre><code># jack_gen.rb\n[\"a,b,*_,c =\", \"d,e =\"].permutation do |l1, l2|\n  [\"args\", \"args.reverse\"].permutation do |r1, r2|\n    [\"{ |x,y| x+y }\", \"{ |x,y| x-y }\"].permutation do |b1, b2|\n      [\n        \"  y = [a,c,d].reduce #{b1}\",\n        \"  #{l1} #{r1}\",\n        \"  #{l2} #{r2}\",\n        \"  args.rotate!\",\n        \"  z = yield(a,b)\",\n        \"  args.reverse!\"\n      ].permutation do |lines|\n        source = [\n          \"def doit *args\",\n          *lines,\n          \"  a-2*b+7*c-3*d+30*e-2*y+6*z\",\n          \"end\",\n          \"doit(1,21,13,4,55) #{b2}\"\n        ].join(\"\\n\")\n\n        rv = Object.new.instance_eval(source) rescue nil\n        puts \"\\n#{source}\\n#=&gt; #{rv}\" if rv == 275\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The program creates <a href=\"http://ruby-doc.org/core-2.6.1/Array.html#method-i-permutation\" rel=\"nofollow noreferrer\"><code>permutation</code></a>s of the 2 left-hand sides, 2 right-hand sides, 2 blocks and 6 non-fixed lines (2! \u00d7 2! \u00d7 2! \u00d7 6! = 5,760 possibilities). It then combines these into a source string (along with the fixed lines) consisting of method definition and method call. A new object is created and the string is evaluated in the context of that object using <a href=\"http://ruby-doc.org/core-2.6.1/BasicObject.html#method-i-instance_eval\" rel=\"nofollow noreferrer\"><code>instance_eval</code></a>, rescuing exceptions that might occur due to undefined variables (about 80% of the generated methods are erroneous).</p>\n\n<p>If the result (of the method call) is <code>275</code>, the corresponding source code is printed (along with the result).</p>\n\n<p>We get 8 such programs:</p>\n\n<pre><code>$ ruby jack_gen.rb\n\ndef doit *args\n  args.reverse!\n  a,b,*_,c = args\n  args.rotate!\n  d,e = args.reverse\n  y = [a,c,d].reduce { |x,y| x-y }\n  z = yield(a,b)\n  a-2*b+7*c-3*d+30*e-2*y+6*z\nend\ndoit(1,21,13,4,55) { |x,y| x+y }\n#=&gt; 275\n\ndef doit *args\n  args.reverse!\n  a,b,*_,c = args\n  args.rotate!\n  d,e = args.reverse\n  z = yield(a,b)\n  y = [a,c,d].reduce { |x,y| x-y }\n  a-2*b+7*c-3*d+30*e-2*y+6*z\nend\ndoit(1,21,13,4,55) { |x,y| x+y }\n#=&gt; 275\n\ndef doit *args\n  args.reverse!\n  a,b,*_,c = args\n  args.rotate!\n  z = yield(a,b)\n  d,e = args.reverse\n  y = [a,c,d].reduce { |x,y| x-y }\n  a-2*b+7*c-3*d+30*e-2*y+6*z\nend\ndoit(1,21,13,4,55) { |x,y| x+y }\n#=&gt; 275\n\ndef doit *args\n  args.reverse!\n  a,b,*_,c = args\n  z = yield(a,b)\n  args.rotate!\n  d,e = args.reverse\n  y = [a,c,d].reduce { |x,y| x-y }\n  a-2*b+7*c-3*d+30*e-2*y+6*z\nend\ndoit(1,21,13,4,55) { |x,y| x+y }\n#=&gt; 275\n\ndef doit *args\n  args.reverse!\n  a,b,*_,c = args\n  args.rotate!\n  d,e = args.reverse\n  y = [a,c,d].reduce { |x,y| x-y }\n  z = yield(a,b)\n  a-2*b+7*c-3*d+30*e-2*y+6*z\nend\ndoit(1,21,13,4,55) { |x,y| x+y }\n#=&gt; 275\n\ndef doit *args\n  args.reverse!\n  a,b,*_,c = args\n  args.rotate!\n  d,e = args.reverse\n  z = yield(a,b)\n  y = [a,c,d].reduce { |x,y| x-y }\n  a-2*b+7*c-3*d+30*e-2*y+6*z\nend\ndoit(1,21,13,4,55) { |x,y| x+y }\n#=&gt; 275\n\ndef doit *args\n  args.reverse!\n  a,b,*_,c = args\n  args.rotate!\n  z = yield(a,b)\n  d,e = args.reverse\n  y = [a,c,d].reduce { |x,y| x-y }\n  a-2*b+7*c-3*d+30*e-2*y+6*z\nend\ndoit(1,21,13,4,55) { |x,y| x+y }\n#=&gt; 275\n\ndef doit *args\n  args.reverse!\n  a,b,*_,c = args\n  z = yield(a,b)\n  args.rotate!\n  d,e = args.reverse\n  y = [a,c,d].reduce { |x,y| x-y }\n  a-2*b+7*c-3*d+30*e-2*y+6*z\nend\ndoit(1,21,13,4,55) { |x,y| x+y }\n#=&gt; 275\n</code></pre>\n\n<p>4 of these programs are in fact duplicates because of <code>#{l1} #{r1}</code> / <code>#{l2} #{r2}</code> (hat tip to <a href=\"https://stackoverflow.com/questions/55225749/reassemble-jumbled-method#comment97189659_55227315\">Register Sole</a>) \u2013 it would have been enough to make the right-hand side variable, i.e. <code>\"  a,b,*_,c = #{r1}\"</code> / <code>\"  d,e = #{r2}\"</code>.</p>\n\n<p>The remaining 4 programs differ only in the position of <code>z = yield(a, b)</code>. Assuming that Jack assigns his variables alphabetically, we can pick the one which has <code>z =</code> <em>after</em> <code>y =</code>:</p>\n\n<pre><code>def doit *args\n  args.reverse!\n  a,b,*_,c = args\n  args.rotate!\n  d,e = args.reverse\n  y = [a,c,d].reduce { |x,y| x-y }\n  z = yield(a,b)\n  a-2*b+7*c-3*d+30*e-2*y+6*z\nend\ndoit(1,21,13,4,55) { |x,y| x+y }\n#=&gt; 275\n</code></pre>\n"}], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "accepted_answer_id": 55227315, "answer_count": 1, "score": 2, "last_activity_date": 1552939210, "creation_date": 1552925915, "last_edit_date": 1552935159, "question_id": 55225749, "link": "https://stackoverflow.com/questions/55225749/reassemble-jumbled-method", "title": "Reassemble jumbled method", "body": "<p>Yesterday the kid next door, Jack, came over to recount an unfortunate experience he had and wondered if I could help him with his problem. He has been learning Ruby on his own (with a little help from me) and had just got a program to work after several days of hard work. Before saving the source he accidentally erased it.</p>\n\n<p>Fortunately, he did have a print-out. Unfortunately, when he was at school his little sister took some scissors to his print-out. Here's a picture Jack took of her handiwork (after he had taped some of the cuttings together).</p>\n\n<p><a href=\"https://i.stack.imgur.com/GMerV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GMerV.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Jack wants me to help him put the program back together. I asked him to describe the problem he was working on but he was so upset that his answer was a complete muddle.</p>\n\n<p>I've organised the information from the cuttings as follows.</p>\n\n<pre><code>code = [\n  [\"def doit *args\"],             # position fixed\n  [\"y = [a,c,d].reduce\", :block],\n  [:left, :right],\n  [:left, :right],\n  [\"args.rotate!\"],  \n  [\"z = yield(a,b)\"],\n  [\"args.reverse!\"],  \n  [\"a-2*b+7*c-3*d+30*e-2*y+6*z\"], # position fixed\n  [\"end\"],                        # position fixed\n  [\"doit(1,21,13,4,55)\", :block]  # position fixed\n]\n</code></pre>\n\n<p>The order of the first line and last three lines is pretty obvious, but I don't know the order of the other lines. Two of the cuttings must be the left side of an assignment, two the right side of an assignment and two are blocks.</p>\n\n<p>The six cuttings represented by <code>:left</code>, <code>:right</code> and <code>:block</code> in the array above are given in this hash:</p>\n\n<pre><code>pos = {\n  left:  [\"a,b,*_,c =\", \"d,e =\"],\n  right: [\"args\", \"args.reverse\"],\n  block: [\"{ |x,y| x+y }\", \"{ |x,y| x-y }\"]  \n} \n</code></pre>\n\n<p>Jack said the only other cutting, <code>#=&gt; 275</code>, was the return value when he executed the method, so we might write</p>\n\n<pre><code>rv = 275\n</code></pre>\n\n<p>I considered trying different combinations but that seems like a hopeless task. Surely there must be a way to somehow automate the reconstruction of the code.</p>\n\n<p>Can anybody help me with this? Suggestions would be OK, but I'd really like to see code.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "button", "bootstrap-4", "haml"], "comments": [{"owner": {"reputation": 646, "user_id": 8919469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f51a8277c113b7415c6b2bbd82be9615?s=128&d=identicon&r=PG&f=1", "display_name": "johan", "link": "https://stackoverflow.com/users/8919469/johan"}, "edited": false, "score": 0, "creation_date": 1552922836, "post_id": 55224356, "comment_id": 97184384, "body": "This link could help you <a href=\"https://html2haml.herokuapp.com/\" rel=\"nofollow noreferrer\">html2haml.herokuapp.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 4878911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8121b7a2385de0536cb66faa027622f?s=128&d=identicon&r=PG", "display_name": "Ahmed Kamal", "link": "https://stackoverflow.com/users/4878911/ahmed-kamal"}, "is_accepted": false, "score": 1, "last_activity_date": 1552922844, "creation_date": 1552922844, "answer_id": 55224764, "question_id": 55224356, "link": "https://stackoverflow.com/questions/55224356/bootstrap-for-adding-button/55224764#55224764", "title": "bootstrap for adding button", "body": "<pre><code>%th\n  %button.btn.btn-primary#selectAll{type: \"button\"}\n    Select All\n</code></pre>\n\n<p>This will produce :</p>\n\n<pre><code>&lt;th&gt;\n  &lt;button class=\"btn btn-primary\" id=\"selectAll\" type=\"button\"&gt;\n    Select All\n  &lt;/button&gt;\n&lt;/th&gt;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9015737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1704c9d405968302a879669ff4dc3de?s=128&d=identicon&r=PG&f=1", "display_name": "snpd", "link": "https://stackoverflow.com/users/9015737/snpd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581308978, "creation_date": 1552921508, "last_edit_date": 1581308978, "question_id": 55224356, "link": "https://stackoverflow.com/questions/55224356/bootstrap-for-adding-button", "title": "bootstrap for adding button", "body": "<pre><code>&lt;th&gt;&lt;button type=\"button\" id=\"selectAll\" &gt;Select All&lt;/button&gt;&lt;/th&gt;\n</code></pre>\n\n<p>I have to convert the above code to bootstrap kind of syntax which is to be placed in haml file. Can someone please help me to do that as I am new to bootstrap and haml.\nThanks </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "sidekiq"], "comments": [{"owner": {"reputation": 1275, "user_id": 2903313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1623b00b100930ac65e69a8069cd28?s=128&d=identicon&r=PG", "display_name": "Roc Khalil", "link": "https://stackoverflow.com/users/2903313/roc-khalil"}, "edited": false, "score": 0, "creation_date": 1552923860, "post_id": 55223842, "comment_id": 97184983, "body": "Is redis on the same server as rails ? if not, make sure you&#39;re allowing the connection in its configuration."}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 1275, "user_id": 2903313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1623b00b100930ac65e69a8069cd28?s=128&d=identicon&r=PG", "display_name": "Roc Khalil", "link": "https://stackoverflow.com/users/2903313/roc-khalil"}, "edited": false, "score": 0, "creation_date": 1552941490, "post_id": 55223842, "comment_id": 97193815, "body": "separate server @RocKhalil"}], "answers": [{"tags": [], "owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "is_accepted": false, "score": 2, "last_activity_date": 1552929588, "last_edit_date": 1552929588, "creation_date": 1552929279, "answer_id": 55226717, "question_id": 55223842, "link": "https://stackoverflow.com/questions/55223842/sidekiq-rediscannotconnecterror-error-connecting-to-redis-on-127-0-0-16379-o/55226717#55226717", "title": "Sidekiq Redis::CannotConnectError: Error connecting to Redis on 127.0.0.1:6379 on production", "body": "<blockquote>\n  <p>It is important to note that to configure the location of Redis, you\n  must define both the Sidekiq.configure_server and\n  Sidekiq.configure_client blocks</p>\n</blockquote>\n\n<p><a href=\"https://github.com/mperham/sidekiq/wiki/Using-Redis#using-an-initializer\" rel=\"nofollow noreferrer\">Straight from the docs</a></p>\n\n<p>So also add to your <code>config/initializers/sidekiq.rb</code>:</p>\n\n<pre><code>Sidekiq.configure_client do |config|\n   config.redis = { :url =&gt; 'redis://192.xxx.xxx.xx:6379/0' }\nend\n</code></pre>\n\n<hr>\n\n<p>Also important notes from docs:</p>\n\n<blockquote>\n  <p>NOTE: The configuration hash must have symbolized keys.</p>\n  \n  <p>NOTE: Unknown parameters are passed to the underlying Redis client so\n  any parameters supported by the driver can go in the Hash.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1275, "user_id": 2903313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce1623b00b100930ac65e69a8069cd28?s=128&d=identicon&r=PG", "display_name": "Roc Khalil", "link": "https://stackoverflow.com/users/2903313/roc-khalil"}, "is_accepted": false, "score": 0, "last_activity_date": 1552980155, "creation_date": 1552980155, "answer_id": 55235539, "question_id": 55223842, "link": "https://stackoverflow.com/questions/55223842/sidekiq-rediscannotconnecterror-error-connecting-to-redis-on-127-0-0-16379-o/55235539#55235539", "title": "Sidekiq Redis::CannotConnectError: Error connecting to Redis on 127.0.0.1:6379 on production", "body": "<p>Based on the comments, we know that Redis is on a separate server.</p>\n\n<h2>Rails Server</h2>\n\n<p>Create a file in initializers: <code>config/initializers/sidekiq.rb</code>:</p>\n\n<pre><code>Sidekiq.configure_server do |config|\n  config.redis = {\n    url: \"redis://192.xxx.xxx.xxx:6379/12\"\n  }\nend\n\nSidekiq.configure_client do |config|\n  config.redis = {\n    url: \"redis://192.xxx.xxx.xxx:6379/12\"\n  }\nend\n</code></pre>\n\n<h2>Redis server</h2>\n\n<ul>\n<li>Edit <code>/etc/redis/redis.conf</code></li>\n<li>Update your binded port</li>\n<li>example: <code>bind 192.xxx.xxx.xxx</code></li>\n<li>restart <code>redis</code></li>\n</ul>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1855, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1552980155, "creation_date": 1552919784, "last_edit_date": 1552922072, "question_id": 55223842, "link": "https://stackoverflow.com/questions/55223842/sidekiq-rediscannotconnecterror-error-connecting-to-redis-on-127-0-0-16379-o", "title": "Sidekiq Redis::CannotConnectError: Error connecting to Redis on 127.0.0.1:6379 on production", "body": "<p>config/initializers/sidekiq.rb</p>\n\n<pre><code>Sidekiq.configure_server do |config|\n   config.redis = { :url =&gt; 'redis://192.xxx.xxx.xx:6379/0' }\nend\n</code></pre>\n\n<p>In production console when I do</p>\n\n<pre><code>ActivationWorker.perform_async(877459)\n</code></pre>\n\n<p>It gives an error</p>\n\n<p><strong>Redis::CannotConnectError: Error connecting to Redis on 127.0.0.1:6379 (Errno::ECONNREFUSED)</strong></p>\n\n<p>Even sidekiq.log prints</p>\n\n<pre><code>Booting Sidekiq 5.1.3 with redis options {:url=&gt;\"redis://192.xxx.xxx.xx:6379/0\", :id=&gt;\"Sidekiq-server-PID-646\"}\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 3, "creation_date": 1552919731, "post_id": 55223768, "comment_id": 97182363, "body": "You say you have a \u201chash\u201d, but it looks like you have two strings."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1552919849, "post_id": 55223768, "comment_id": 97182450, "body": "How does <code>value = &quot;gLFyf-gsfi&quot;</code> play together with the string before?"}, {"owner": {"reputation": 5, "user_id": 3239569, "user_type": "registered", "profile_image": "https://graph.facebook.com/1364335977/picture?type=large", "display_name": "Yadu", "link": "https://stackoverflow.com/users/3239569/yadu"}, "edited": false, "score": 0, "creation_date": 1552922781, "post_id": 55223768, "comment_id": 97184361, "body": "When I collect all nested divs inside another div as hashes from a webpage, this is what I get. The class name of the outer div is collected as &quot;gLFyf-gsfi&quot; and values of all other inner divs are collected as one string in the key !"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1552927020, "post_id": 55223768, "comment_id": 97186799, "body": "You don&#39;t have a hash. You have two strings and only the first one is relevant to the question. That&#39;s why you&#39;ve received the downvote. I suggest you edit to remove reference to a hash and remove <code>value = &quot;gLFyf-gsfi&quot;</code>. You need to also state what is to be done if the number of lines in <code>key</code> is not divisible by <code>7</code>. Is the last array to contain the &quot;leftovers&quot;?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1552929871, "post_id": 55223768, "comment_id": 97188367, "body": "I trust you do not object to my edit. You had not reappeared, and there are 4 votes to close, so I decided to go ahead with an edit. If I&#39;ve misrepresented your question, correct it with an edit, of course."}], "answers": [{"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 1, "last_activity_date": 1552919999, "creation_date": 1552919999, "answer_id": 55223897, "question_id": 55223768, "link": "https://stackoverflow.com/questions/55223768/ruby-converting-string-to-array-of-arrays/55223897#55223897", "title": "Ruby converting string to array of arrays", "body": "<p>You don't appear to be using the <code>value</code> variable you're defining, but you can convert the string you assigned to <code>key</code> to the output you provided using <code>split</code> and <code>each_slice</code>:</p>\n\n<pre><code>array_of_values = key.split(\"\\n\")\n# =&gt; [\"John Clark\", \"Dallas\", ... ]\n\ngroups_of_seven = array_of_values.each_slice(7)\n# =&gt; #&lt;Enumerator: [\"John Clark\", \"Dallas\", ...]\n\ngroups_of_seven.first\n# =&gt; [\"John Clark\", \"Dallas\", \"System Engineer\", \"Global Edge\", \"Wage 2\", \"Y\", \"1\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1552920052, "creation_date": 1552920052, "answer_id": 55223907, "question_id": 55223768, "link": "https://stackoverflow.com/questions/55223768/ruby-converting-string-to-array-of-arrays/55223907#55223907", "title": "Ruby converting string to array of arrays", "body": "<p>You could split your string like this:</p>\n\n<pre><code>string = \"John Clark\\nDallas\\nSystem Engineer\\nGlobal Edge\\nWage 2\\nY\\n1\\nRobin James\\nCleveland\\nArchitect\\nMaxSys\\nWage 3\\nY\\n0\\nJoseph Neils\\nLittle Rock\\nDB Admin\\nTech Sys\\nWage 2\\nY\\n1\\n\"\n\nstring.split(\"\\n\").each_slice(7).to_a\n#=&gt; [[\"John Clark\", \"Dallas\", \"System Engineer\", \"Global Edge\", \"Wage 2\", \"Y\", \"1\"], [\"Robin James\", \"Cleveland\", \"Architect\", \"MaxSys\", \"Wage 3\", \"Y\", \"0\"], [\"Joseph Neils\", \"Little Rock\", \"DB Admin\", \"Tech Sys\", \"Wage 2\", \"Y\", \"1\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11220307, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xk8MRbA1HqU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdnsvkPVRx6f7DZcm_fyAMxoxOl_w/mo/photo.jpg?sz=128", "display_name": "art", "link": "https://stackoverflow.com/users/11220307/art"}, "is_accepted": false, "score": 0, "last_activity_date": 1552920319, "creation_date": 1552920319, "answer_id": 55224000, "question_id": 55223768, "link": "https://stackoverflow.com/questions/55223768/ruby-converting-string-to-array-of-arrays/55224000#55224000", "title": "Ruby converting string to array of arrays", "body": "<p>You are simply spliting a string of newline separated fields. The String object in Ruby has a split method that does that.</p>\n\n<pre><code>my_string = \"John Clark\\nDallas\\nSystem Engineer\\nGlobal Edge\\nWage 2\\nY\\n1\\nRobin James\\nCleveland\\nArchitect\\nMaxSys\\nWage 3\\nY\\n0\\nJoseph Neils\\nLittle Rock\\nDB Admin\\nTech Sys\\nWage 2\\nY\\n1\\n\"\nmy_string.split(\"\\n\")\n</code></pre>\n\n<p>gives you an array of strings like the one you want. Then you can combine these arrays into another array.</p>\n\n<p>There's documentation about the split method here: <a href=\"https://ruby-doc.org/core-2.6.2/String.html#method-i-split\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.6.2/String.html#method-i-split</a></p>\n"}], "owner": {"reputation": 5, "user_id": 3239569, "user_type": "registered", "profile_image": "https://graph.facebook.com/1364335977/picture?type=large", "display_name": "Yadu", "link": "https://stackoverflow.com/users/3239569/yadu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 55223907, "answer_count": 3, "score": -1, "last_activity_date": 1552929748, "creation_date": 1552919613, "last_edit_date": 1552929748, "question_id": 55223768, "link": "https://stackoverflow.com/questions/55223768/ruby-converting-string-to-array-of-arrays", "title": "Ruby converting string to array of arrays", "body": "<p>I have the following string.</p>\n\n<pre><code>key = \"John Clark\\nDallas\\nSystem Engineer\\nGlobal Edge\\nWage 2\\nY\\n1\\nRobin James\\nCleveland\\nArchitect\\nMaxSys\\nWage 3\\nY\\n0\\nJoseph Neils\\nLittle Rock\\nDB Admin\\nTech Sys\\nWage 2\\nY\\n1\\n\"\n</code></pre>\n\n<p>I want to convert this string to an array of arrays. Each array should consist of 7 members. The end result should be like this:</p>\n\n<pre><code>[[\"John Clark\",\"Dallas\",\"System Engineer\",\"Global Edge\",\"Wage 2\",\"Y\",\"1\"],[\"Robin James\",\"Cleveland\",\"Architect\",\"MaxSys\",\"Wage 3\",\"Y\",\"0\"],[\"Joseph Neils\",\"Little Rock\",\"DB Admin\",\"Tech Sys\",\"Wage 2\",\"Y\",\"1\"]]\n</code></pre>\n\n<p>If the number of lines in <code>key</code> is not evenly divisible by <code>7</code> the last array should contain the leftovers.</p>\n\n<p>How can I do this Ruby?</p>\n"}, {"tags": ["ruby", "function", "block"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1552917223, "post_id": 55222984, "comment_id": 97180736, "body": "It&#39;s Hash literal."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1552917448, "post_id": 55222984, "comment_id": 97180901, "body": "These questions are about the language of Ruby and for that, referring to the Ruby documentation should be your first place to start. Starting with existing code is ill advised. Refer to rubydocs or the many free ebooks available before attempting to understand code."}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 1, "last_activity_date": 1552917424, "creation_date": 1552917424, "answer_id": 55223051, "question_id": 55222984, "link": "https://stackoverflow.com/questions/55222984/ruby-questions-on-def/55223051#55223051", "title": "Ruby questions on def", "body": "<p>It is a method with name <code>attribute</code> (<code>def attribute</code>) that returns a <code>Hash</code> (curly braces \u00b4{}\u00b4) with <code>Symbol</code>s as keys (<code>id:</code>, <code>password:</code>, ...). The values are taken from attributes of an instance variable (<code>@object</code>)\nThen the Hash is also combined with another one (<code>merge</code>)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11113981"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1552917424, "creation_date": 1552917188, "last_edit_date": 1552917289, "question_id": 55222984, "link": "https://stackoverflow.com/questions/55222984/ruby-questions-on-def", "title": "Ruby questions on def", "body": "<p>I am very new to ruby and I would like to understand few syntax.\nWhen I define something like, </p>\n\n<pre><code>def attribute\n  {\n    id:                @object.id,\n    password:          @object.password\n    non_academic:      !!@object.non_academic\n  }.merge(subject)\nend\n</code></pre>\n\n<p>what does the codes inside \"{}\" do, and what are they call. Also, what does line like <code>id:                @object.id,</code> means.</p>\n"}, {"tags": ["ruby", "net-http"], "comments": [{"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "edited": false, "score": 0, "creation_date": 1552915727, "post_id": 55221532, "comment_id": 97179788, "body": "In failed cases, what is <code>uri_str</code> and what is <code>response</code> and <code>response[&#39;location&#39;]</code>?"}, {"owner": {"reputation": 11, "user_id": 2308493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb56d84a3d1b5cd2aa010e2d56eaec77?s=128&d=identicon&r=PG", "display_name": "user2308493", "link": "https://stackoverflow.com/users/2308493/user2308493"}, "reply_to_user": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "edited": false, "score": 0, "creation_date": 1552918816, "post_id": 55221532, "comment_id": 97181794, "body": "Thanks @AndrewSchwartz. I printed those three values into HTTPRedirection clause and respectively they come out as follows:  <code>uri_str: https:&#47;&#47;www.example.com&#47;page-302-i-cant-follow response: #&lt;Net::HTTPFound:0x000000000338d940&gt; response[location]: &#47;page-302-i-cant-follow</code>"}, {"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "edited": false, "score": 0, "creation_date": 1552924357, "post_id": 55221532, "comment_id": 97185281, "body": "With those values you&#39;re getting the <code>NoMethodError</code> above? I can&#39;t reproduce that (getting, not surprisingly, a 404 not found). If you look at the source code where that error is occurring (http.rb) you should see that it&#39;s trying to do <code>address() + ...</code>, which, with that error, makes me thing <code>address</code> must be <code>nil</code>. That won&#39;t be the case with this URI. Try to narrow down your code to a few lines that define a URI, <code>Net::HTTP</code> object, and reliably reproduces the error you see."}, {"owner": {"reputation": 11, "user_id": 2308493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb56d84a3d1b5cd2aa010e2d56eaec77?s=128&d=identicon&r=PG", "display_name": "user2308493", "link": "https://stackoverflow.com/users/2308493/user2308493"}, "reply_to_user": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "edited": false, "score": 0, "creation_date": 1552938566, "post_id": 55221532, "comment_id": 97192556, "body": "@AndrewSchwartz at this point I can&#39;t reproduce it. I will point out that the example I used doesn&#39;t exist, so it wouldn&#39;t produce a 302 but a 404. I&#39;m trying to keep the site I&#39;m working on off the public thread so after some desperate searching I found a 302 link: <a href=\"https://www.servicioshosting.com/sitio/\" rel=\"nofollow noreferrer\">servicioshosting.com/sitio</a> are you able to reproduce with this one?"}, {"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "edited": false, "score": 0, "creation_date": 1552941785, "post_id": 55221532, "comment_id": 97193925, "body": "I cannot reproduce it with this URL. If I leave the <code>http:&#47;&#47;</code> off, I get a different error because <code>URI.parse</code> doesn&#39;t assume a default protocol, but not the same error you reported. I would just come back at it this way if you see the error again."}], "owner": {"reputation": 11, "user_id": 2308493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb56d84a3d1b5cd2aa010e2d56eaec77?s=128&d=identicon&r=PG", "display_name": "user2308493", "link": "https://stackoverflow.com/users/2308493/user2308493"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1615254516, "creation_date": 1552912505, "question_id": 55221532, "link": "https://stackoverflow.com/questions/55221532/nethttp-and-nokogiri-undefined-method-body-for-nilnilclass-nomethoderror", "title": "Net::HTTP and Nokogiri - undefined method `body&#39; for nil:NilClass (NoMethodError)", "body": "<p>Thanks for your time. Somewhat new to OOP and Ruby and after synthesizing solutions from a few different stack overflow answers I've got myself turned around.</p>\n\n<p>My goal is to write a script that parses a CSV of URLs using Nokogiri library. After trying and <a href=\"https://stackoverflow.com/questions/54411704/http-redirection-loop-runtimeerror-in-open-uri-redirections-gem\">failing to use open-uri</a> and the open-uri-redirections plugin to follow redirects, I settled on Net::HTTP and that got me moving...until I ran into URLs that have a 302 redirect specifically.</p>\n\n<p>Here's the method I'm using to engage the URL:</p>\n\n<pre><code>require 'Nokogiri'\nrequire 'Net/http'\nrequire 'csv'\n\ndef fetch(uri_str, limit = 10)\n  # You should choose better exception.\n  raise ArgumentError, 'HTTP redirect too deep' if limit == 0\n\n  url = URI.parse(uri_str)\n  #puts \"The value of uri_str is: #{ uri_str}\"\n  #puts \"The value of URI.parse(uri_str) is #{ url }\"\n  req = Net::HTTP::Get.new(url.path, { 'User-Agent' =&gt; 'Mozilla/5.0 (etc...)' })\n  # puts \"THE URL IS #{url.scheme + \":\" + url.host + url.path}\" # just a reporter so I can see if it's mangled\n  response = Net::HTTP.start(url.host, url.port, :use_ssl =&gt; url.scheme == 'https') { |http| http.request(req) }\n  case response\n  when Net::HTTPSuccess     then  response\n  when Net::HTTPRedirection then fetch(response['location'], limit - 1)\n  else\n    #puts \"Problem clause!\"\n    response.error!\n  end\nend\n</code></pre>\n\n<p>Further down in my script I take an ARGV with the URL csv filename, do CSV.read, encode the URL to a string, then use Nokogiri::HTML.parse to turn it all into something I can use xpath selectors to examine and then write to an output CSV.</p>\n\n<p>Works beautifully...so long as I encounter a 200 response, which unfortunately is not every website. When I run into a 302 I'm getting this:</p>\n\n<pre><code>C:/Ruby24-x64/lib/ruby/2.4.0/Net/http.rb:1570:in `addr_port': undefined method `+' for nil:NilClass (NoMethodError)\n        from C:/Ruby24-x64/lib/ruby/2.4.0/Net/http.rb:1503:in `begin_transport'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/Net/http.rb:1442:in `transport_request'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/Net/http.rb:1416:in `request'\n        from httpcsv.rb:14:in `block in fetch'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/Net/http.rb:877:in `start'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/Net/http.rb:608:in `start'\n        from httpcsv.rb:14:in `fetch'\n        from httpcsv.rb:17:in `fetch'\n        from httpcsv.rb:42:in `block in &lt;main&gt;'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/csv.rb:866:in `each'\n        from C:/Ruby24-x64/lib/ruby/2.4.0/csv.rb:866:in `each'\n        from httpcsv.rb:38:in `&lt;main&gt;'\n</code></pre>\n\n<p>I know I'm missing something right in front of me but I can't tell what I should <code>puts</code> to see if it is nil. Any help is appreciated, thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1552911476, "post_id": 55220938, "comment_id": 97177270, "body": "I deleted my answer because I might have misunderstood your question"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "edited": false, "score": 0, "creation_date": 1552913546, "post_id": 55221258, "comment_id": 97178421, "body": "Thx very much :)"}], "tags": [], "owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "is_accepted": true, "score": 0, "last_activity_date": 1552911548, "creation_date": 1552911548, "answer_id": 55221258, "question_id": 55220938, "link": "https://stackoverflow.com/questions/55220938/rails-update-current-attributes/55221258#55221258", "title": "rails update current attributes", "body": "<p>Just check whether a new password is set:</p>\n\n<pre><code>def update\n  if user_params[:password] &amp;&amp; !@user.authenticate(user_params[:password_old])\n    render json: { message: 'old password incorrect' }, status: :unprocessable_entity\n    return\n  end\n  @user.update_attributes!(user_params)\n  head :no_content\nend\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 55221258, "answer_count": 1, "score": 0, "last_activity_date": 1552911548, "creation_date": 1552910630, "question_id": 55220938, "link": "https://stackoverflow.com/questions/55220938/rails-update-current-attributes", "title": "rails update current attributes", "body": "<p>I have a simple update action. but I have a little problem.\nWhat I want:\nIf I try to change the password, I should fill an old password, but if I try t change other fields, like a name, email, old password not a required. How to write that? Help me please. </p>\n\n<p>It's my old code:</p>\n\n<pre><code># PATCH/PUT /users/1\ndef update\n  if @user.authenticate(user_params[:password_old])\n    @user.update_attributes(user_params)\n    head :no_content\n  else\n    render json: { message: 'old password incorrect' }, status: :unprocessable_entity\n  end\nend\n</code></pre>\n\n<p>Here's my changes for a new implementation: </p>\n\n<pre><code>def update\n  if @user.authenticate(user_params[:password_old])\n    @user.update_attributes!(user_params[:password, :password_confirmation])\n    head :no_content\n  else\n    render json: { message: 'old password incorrect' }, status: :unprocessable_entity\n  end\n  @user.update_attributes!(user_params)\n  head :no_content\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "digital-ocean"], "comments": [{"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1552905123, "post_id": 55218968, "comment_id": 97173569, "body": "search your code for <code>ht.each</code> and maybe post it?"}, {"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "reply_to_user": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1552905388, "post_id": 55218968, "comment_id": 97173729, "body": "i don&#39;t have a code like that in my application"}, {"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1552905618, "post_id": 55218968, "comment_id": 97173869, "body": "Its prob somewhere in the js. What you could do is open the current application-xxx.js in chrome dev tools source panel. Since its line 1 I assume that its minified but there is a little button with <code>{}</code> on it so you can prettify it. Search there for <code>ht.each</code>. So you narrow it down where it comes from."}], "answers": [{"comments": [{"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1552906607, "post_id": 55219656, "comment_id": 97174435, "body": "i found the actual problem, this was caused by the ducktap gem , i scoped it to development, thank you!"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1552906318, "creation_date": 1552906318, "answer_id": 55219656, "question_id": 55218968, "link": "https://stackoverflow.com/questions/55218968/devise-destroy-user-session-path-dont-work-on-digitalocean/55219656#55219656", "title": "devise destroy_user_session_path dont work on digitalocean", "body": "<p>Try to run this locally, it may help you identify the problem.</p>\n\n<pre><code>bundle exec rake assets:precompile\n</code></pre>\n\n<p>If that doesn't throw any errors, then you need to post what javascripts are loaded in your application.js file.</p>\n"}], "owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 55219656, "answer_count": 1, "score": 1, "last_activity_date": 1552906318, "creation_date": 1552903964, "question_id": 55218968, "link": "https://stackoverflow.com/questions/55218968/devise-destroy-user-session-path-dont-work-on-digitalocean", "title": "devise destroy_user_session_path dont work on digitalocean", "body": "<p>I have sample rails application which has devise authentication.\nI have deployed the application in a digital ocean droplet.In production user can sign in successfully but the user cannot sign out.\nI have a java script error in my console which says,</p>\n\n<pre><code>Uncaught TypeError: ht.each is not a function\nat application-4704efeb2d5b3aaf28f84af8b35e95edffed681c04b55448913ecd871f7f7ba0.js:1\nat application-4704efeb2d5b3aaf28f84af8b35e95edffed681c04b55448913ecd871f7f7ba0.js:1\nat application-4704efeb2d5b3aaf28f84af8b35e95edffed681c04b55448913ecd871f7f7ba0.js:1\n</code></pre>\n\n<p>How to overcome this situation?</p>\n"}, {"tags": ["ruby", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 3, "creation_date": 1552904752, "post_id": 55218804, "comment_id": 97173340, "body": "&quot;If user selects any single means or any combinations, it should work&quot; - but it doesn&#39;t - right now it only allows one of (city, state, country). Do you want combinations as well?"}, {"owner": {"reputation": 950, "user_id": 4993517, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cc7c669cf8ed5e60e7443150e3a5b513?s=128&d=identicon&r=PG&f=1", "display_name": "SreRoR", "link": "https://stackoverflow.com/users/4993517/sreror"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1552905497, "post_id": 55218804, "comment_id": 97173798, "body": "yes, it is working fine now, because if we selects city means no need of country and state combination right, it will give cities in that country and state only"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1552917536, "post_id": 55219282, "comment_id": 97180964, "body": "In that case <code>@matching_c = params.slice(:city_name, :state, :country).reject {|_,v| v.blank? }.reduce(@matching_c) { |query,(field,val)| query.where( field =&gt; val) }</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1552982910, "post_id": 55219282, "comment_id": 97205498, "body": "@engineersmnky I realized the level of the OP and decided not to overcomplicate things :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1552905072, "creation_date": 1552905072, "answer_id": 55219282, "question_id": 55218804, "link": "https://stackoverflow.com/questions/55218804/how-to-simplify-active-record-query-in-ruby/55219282#55219282", "title": "How to simplify active record query in Ruby", "body": "<p>You should chain scopes, not mutually exclude them:</p>\n\n<pre><code>@matching_c = @matching_c.where(city_name: params[:city_name]) if\n  params[:city_name].present?\n@matching_c = @matching_c.where(state: params[:state]) if \n  params[:state].present?\n@matching_c = @matching_c.where(country: params[:country]) if\n  params[:country].present?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 2, "last_activity_date": 1552905313, "creation_date": 1552905313, "answer_id": 55219344, "question_id": 55218804, "link": "https://stackoverflow.com/questions/55218804/how-to-simplify-active-record-query-in-ruby/55219344#55219344", "title": "How to simplify active record query in Ruby", "body": "<pre><code>def add_where(query, params)\n  # FROM HERE\n  field = %i(city_name state country).find { |x| params[x].present? }\n  if field\n    query = query.where(field =&gt; params[field])\n  end\n  # TO HERE\n\n  if params[:rate_card].present?\n    query = query.joins(:rate_card).where(\"rate_cards.rate_card_type = ?\", params[:rate_card])\n  end\n\n  query\nend\n\n@matching_c = params[:role] != 'role2' ? add_where(@matching_c, params) : nil\n@matching_f = params[:role] != 'role1' ? add_where(@matching_f, params) : nil\n</code></pre>\n\n<p>It will accept only one of (city, state, country), like your code. If you want to accept any combination, use this instead of the marked code:</p>\n\n<pre><code>%i(city_name state country).each { |field|\n  query = query.where(field =&gt; params[field]) if params[field].present?\nend\n</code></pre>\n"}], "owner": {"reputation": 950, "user_id": 4993517, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cc7c669cf8ed5e60e7443150e3a5b513?s=128&d=identicon&r=PG&f=1", "display_name": "SreRoR", "link": "https://stackoverflow.com/users/4993517/sreror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 55219344, "answer_count": 2, "score": -1, "last_activity_date": 1552905313, "creation_date": 1552903406, "last_edit_date": 1552904403, "question_id": 55218804, "link": "https://stackoverflow.com/questions/55218804/how-to-simplify-active-record-query-in-ruby", "title": "How to simplify active record query in Ruby", "body": "<p>I want to filter based on country, city, state, role, and rate card. If user selects any single means or any combinations, it should work. This is my active record for search:</p>\n\n<pre><code>if params[:role].present?\n  if params[:role] == 'role1'\n    if params[:city_name].present?\n      @matching_c = @matching_c.where(city_name: params[:city_name])\n    elsif params[:state].present?\n      @matching_c = @matching_c.where(state: params[:state])\n    elsif params[:country].present?\n      @matching_c = @matching_c.where(country: params[:country])\n    end\n    if params[:rate_card].present?\n      @matching_c = @matching_c.joins(:rate_card).where(\"rate_cards.rate_card_type = ?\", \"#{params[:rate_card]}\")\n    end\n    @matching_f = nil\n  end\n  if params[:role]  == 'role2'\n    if params[:city_name].present?\n      @matching_f = @matching_f.where(city_name: params[:city_name])\n    elsif params[:state].present?\n      @matching_f = @matching_f.where(state: params[:state])\n    elsif params[:country].present?\n      @matching_f = @matching_f.where(country: params[:country])\n    end\n    if params[:rate_card].present?\n      @matching_f = @matching_f.joins(:rate_card).where(\"rate_cards.rate_card_type = ?\", \"#{params[:rate_card]}\")\n    end\n    @matching_c = nil\n  end\nelse\n  if params[:city_name].present?\n    @matching_f = @matching_f.where(city_name: params[:city_name])\n    @matching_c = @matching_c.where(city_name: params[:city_name])\n  elsif params[:state].present?\n    @matching_f = @matching_f.where(state: params[:state])\n    @matching_c = @matching_c.where(state: params[:state])\n  elsif params[:country].present?\n    @matching_c = @matching_c.where(country: params[:country])\n    @matching_f = @matching_f.where(country: params[:country])\n  end\n  if params[:rate_card].present?\n    @matching_c = @matching_c.joins(:rate_card).where(\"rate_cards.rate_card_type = ?\", \"#{params[:rate_card]}\")\n    @matching_f = @matching_f.joins(:rate_card).where(\"rate_cards.rate_card_type = ?\", \"#{params[:rate_card]}\")\n  end\nend\n</code></pre>\n\n<p>This works, but I want it to be simplified. Can anyone help with this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "rubygems", "ubuntu-18.04"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11219418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9172419907dffc504dd7c01ef5dd9fc?s=128&d=identicon&r=PG&f=1", "display_name": "matt.main", "link": "https://stackoverflow.com/users/11219418/matt-main"}, "is_accepted": true, "score": 0, "last_activity_date": 1552902177, "creation_date": 1552902177, "answer_id": 55218431, "question_id": 55217791, "link": "https://stackoverflow.com/questions/55217791/rails-ubuntu-uninitialized-namespaced-constants-on-load/55218431#55218431", "title": "Rails/Ubuntu uninitialized namespaced constants on load", "body": "<p>I've found the answer!</p>\n\n<p>Turns out Linux is just a bit more fussy about directories than OSX. My namespaced modules were in a directory called \"Core/\". When I changed this to \"core\" (all lowercase), everything worked as expected.</p>\n"}], "owner": {"reputation": 1, "user_id": 11219418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9172419907dffc504dd7c01ef5dd9fc?s=128&d=identicon&r=PG&f=1", "display_name": "matt.main", "link": "https://stackoverflow.com/users/11219418/matt-main"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 55218431, "answer_count": 1, "score": -1, "last_activity_date": 1552902177, "creation_date": 1552900011, "last_edit_date": 1552900461, "question_id": 55217791, "link": "https://stackoverflow.com/questions/55217791/rails-ubuntu-uninitialized-namespaced-constants-on-load", "title": "Rails/Ubuntu uninitialized namespaced constants on load", "body": "<p>When starting my rails application on Ubuntu (through any process e.g. console, server, rake tasks, etc) I get an uninitialised constant error from my gems. However, I can clone the exact same repo on to OSX and it works. The error I show is coming from apartment, but if I remove the references to Core::Organisation, the issue just propagates to the next loaded gem. So I figure it's something to do with the gems being loaded before the constants from the application.</p>\n\n<p>I've tried eager loading using</p>\n\n<pre><code>config.eager_load = true\nconfig.enable_dependency_loading = true\n</code></pre>\n\n<p>but it didn't change anything.</p>\n\n<p>UPDATE:\nI've found replacing \"Core::Organisation\" with just \"Organisation\" makes it work. So it's something to do with the namespacing. In the base directory there is a module core.rb:</p>\n\n<pre><code>module Core\n  def self.table_name_prefix\n    'core_'\n  end\nend\n</code></pre>\n\n<p>Environment:</p>\n\n<ul>\n<li>Ubuntu 18.04</li>\n<li>Ruby 2.5.0</li>\n<li>Rails 5.2.2</li>\n</ul>\n\n<p>Example error trace:</p>\n\n<pre><code>/var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `block in load_missing_constant': uninitialized constant Core::Organisation (NameError)\n    from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'\n    from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/active_support.rb:74:in `rescue in load_missing_constant'\n    from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/active_support.rb:56:in `load_missing_constant'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/inflector/methods.rb:285:in `const_get'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/inflector/methods.rb:285:in `block in constantize'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/inflector/methods.rb:281:in `each'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/inflector/methods.rb:281:in `inject'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/inflector/methods.rb:281:in `constantize'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/core_ext/string/inflections.rb:68:in `constantize'\n    from /var/lib/gems/2.5.0/gems/apartment-2.2.0/lib/apartment/adapters/postgresql_adapter.rb:50:in `process_excluded_model'\n    from /var/lib/gems/2.5.0/gems/apartment-2.2.0/lib/apartment/adapters/abstract_adapter.rb:105:in `block in process_excluded_models'\n    from /var/lib/gems/2.5.0/gems/apartment-2.2.0/lib/apartment/adapters/abstract_adapter.rb:104:in `each'\n    from /var/lib/gems/2.5.0/gems/apartment-2.2.0/lib/apartment/adapters/abstract_adapter.rb:104:in `process_excluded_models'\n    from /var/lib/gems/2.5.0/gems/apartment-2.2.0/lib/apartment/tenant.rb:18:in `init'\n    from /var/lib/gems/2.5.0/gems/apartment-2.2.0/lib/apartment/railtie.rb:34:in `block (2 levels) in &lt;class:Railtie&gt;'\n    from /var/lib/gems/2.5.0/gems/activerecord-5.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:416:in `with_connection'\n    from /var/lib/gems/2.5.0/gems/apartment-2.2.0/lib/apartment/railtie.rb:33:in `block in &lt;class:Railtie&gt;'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:426:in `instance_exec'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:426:in `block in make_lambda'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:198:in `block (2 levels) in halting'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:606:in `block (2 levels) in default_terminator'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:605:in `catch'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:605:in `block in default_terminator'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:199:in `block in halting'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:513:in `block in invoke_before'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:513:in `each'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:513:in `invoke_before'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/callbacks.rb:131:in `run_callbacks'\n    from /var/lib/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/reloader.rb:89:in `prepare!'\n    from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/application/finisher.rb:63:in `block in &lt;module:Finisher&gt;'\n    from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:32:in `instance_exec'\n    from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:32:in `run'\n    from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:61:in `block in run_initializers'\n    from /usr/lib/ruby/2.5.0/tsort.rb:228:in `block in tsort_each'\n    from /usr/lib/ruby/2.5.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n    from /usr/lib/ruby/2.5.0/tsort.rb:431:in `each_strongly_connected_component_from'\n    from /usr/lib/ruby/2.5.0/tsort.rb:349:in `block in each_strongly_connected_component'\n    from /usr/lib/ruby/2.5.0/tsort.rb:347:in `each'\n    from /usr/lib/ruby/2.5.0/tsort.rb:347:in `call'\n    from /usr/lib/ruby/2.5.0/tsort.rb:347:in `each_strongly_connected_component'\n    from /usr/lib/ruby/2.5.0/tsort.rb:226:in `tsort_each'\n    from /usr/lib/ruby/2.5.0/tsort.rb:205:in `tsort_each'\n    from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:60:in `run_initializers'\n    from /var/lib/gems/2.5.0/gems/railties-5.2.2/lib/rails/application.rb:361:in `initialize!'\n    from /home/sellsmartadmin/Sellsmart/config/environment.rb:5:in `&lt;main&gt;'\n    from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n    from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n    from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n    from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n    from /var/lib/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n    from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application.rb:102:in `preload'\n    from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application.rb:153:in `serve'\n    from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application.rb:141:in `block in run'\n    from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application.rb:135:in `loop'\n    from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application.rb:135:in `run'\n    from /var/lib/gems/2.5.0/gems/spring-2.0.2/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n    from /usr/local/lib/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /usr/local/lib/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>Thanks in advance for any help anyone has to offer!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "edited": false, "score": 0, "creation_date": 1552888599, "post_id": 55215278, "comment_id": 97165773, "body": "Hello and welcome to StackOverflow. Please take some time to read the help page, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. And more importantly, please read <a href=\"http://meta.stackexchange.com/q/156810/204922\">the Stack Overflow question checklist</a>. You might also want to learn about <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Examples</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1552944813, "post_id": 55215278, "comment_id": 97195105, "body": "&quot;doesn&#39;t work&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "is_accepted": false, "score": 1, "last_activity_date": 1552889636, "creation_date": 1552889636, "answer_id": 55215492, "question_id": 55215278, "link": "https://stackoverflow.com/questions/55215278/how-am-i-using-read-string-incorrectly/55215492#55215492", "title": "How am I using read_string incorrectly?", "body": "<p>I think you'd better confirm with your teacher.\nThere is no method of <code>read_string</code> in ruby. Maybe your teacher wants you to wrap your logic in a <code>read_string</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1552896755, "post_id": 55215792, "comment_id": 97169115, "body": "The new school way is <code>gets(chomp: true)</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1552896810, "post_id": 55215792, "comment_id": 97169142, "body": "@sawa yes, but then it makes zero sense to extract it into a separate method."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1552891057, "creation_date": 1552891057, "answer_id": 55215792, "question_id": 55215278, "link": "https://stackoverflow.com/questions/55215278/how-am-i-using-read-string-incorrectly/55215792#55215792", "title": "How am I using read_string incorrectly?", "body": "<p><em>Sidenote:</em> <code>to_s</code> in <code>gets.chomp.to_s</code> is redundant, since <code>gets</code> always returns a string by itself.</p>\n\n<p>What your teacher meant is probably you should <em>extract</em> several calls to <code>gets.chomp</code> into the method, and use this method everywhere instead of <code>gets.chomp</code> as you already did:</p>\n\n<pre><code>def read_string(prompt)\n  print(prompt + \" \")\n  gets.chomp\nend\n\ndef main\n  first_name = read_string('What is your first name')\n  ...\nend\n</code></pre>\n\n<p><em>Sidenote #2:</em> never ever put spaces between the method name and the opening parenthesis in ruby.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9483402"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1552896937, "creation_date": 1552888445, "last_edit_date": 1552896937, "question_id": 55215278, "link": "https://stackoverflow.com/questions/55215278/how-am-i-using-read-string-incorrectly", "title": "How am I using read_string incorrectly?", "body": "<p>This program is designed to ask a number of questions, and then display the entered information back to them. In a previous version, I used <code>gets.chomp.to_s</code> in various places, and it worked. But following my teacher, I replaced a number of <code>gets.chomp.to_s</code> to <code>read_string</code>, and now my program doesn't work.</p>\n\n<pre><code>require 'date'\nINCHEs = 0.393701\n\ndef main\n  first_name = read_string ('What is your first name')\n  puts 'Your name is ' + first_name + '!'\n  puts 'What is your family name?'\n  family_name = gets.chomp.to_s\n  puts 'Your family name is: ' + family_name + '!'      \n  puts 'What year were you born?'\n  year_born = read_string('What year were you born?')\n  year_born.to_i\n  # Calculate the users age\n  current_year = 2019\n  age = current_year - year_born\n  puts 'So you are ' + age.to_s + ' years old'          \n  value_in_cms = read_string('Enter your height in cms (i.e as a float): ')\n  value_in_cms.to_f\n  value_in_inch = value_in_cms * INCHES\n  puts 'Your height in inches is: '\n  puts value_in_inch.to_s       \n  answer = read_string('Do you wish to continue')\n  case answer\n  when 'y', 'yes', 'Yes', 'YES'\n    true\n    puts 'Okay let us continue'\n  else\n    false\n    puts 'Okay, goodbye'\n  end\nend\n\nmain\nputs ' '\nputs main\n</code></pre>\n\n<p>Where am I making errors?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1552881055, "post_id": 55214291, "comment_id": 97164532, "body": "Why have you called your controller &quot;FavoritesController&quot;? Secondly, I think you are trying to create a &quot;CategoryProfiles&quot; controller. This is not necessary. All you need to do is to apply the standard code into the &quot;Categories&quot; controller. Don&#39;t forget to add category_profiles to strong params. also post your routes.rb file"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1552892595, "post_id": 55214291, "comment_id": 97167192, "body": "When you call <code>profile.category_profiles.new</code>, that&#39;s initializing a single CategoryProfile record that requires <code>category_id</code> and <code>profile_id</code>. You are not passing a value for <code>category_id</code>, rather, you get <code>category_ids</code>  (plural)."}, {"owner": {"reputation": 1, "user_id": 11095681, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHwFGrXaiq8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO60tdEXpajqmx4jRd85TrcTV56BA/mo/photo.jpg?sz=128", "display_name": "Javier Andr&#233;s Burgos Rold&#225;n", "link": "https://stackoverflow.com/users/11095681/javier-andr%c3%a9s-burgos-rold%c3%a1n"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1552911982, "post_id": 55214291, "comment_id": 97177539, "body": "@maxpleaner thanks, but when I call params.permit(:profile_id,                       :category_id), occurs the same error, Category its not find, I have the profile because Im doing it with my current user active, but My category never cant find"}, {"owner": {"reputation": 1, "user_id": 11095681, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHwFGrXaiq8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO60tdEXpajqmx4jRd85TrcTV56BA/mo/photo.jpg?sz=128", "display_name": "Javier Andr&#233;s Burgos Rold&#225;n", "link": "https://stackoverflow.com/users/11095681/javier-andr%c3%a9s-burgos-rold%c3%a1n"}, "reply_to_user": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1552912082, "post_id": 55214291, "comment_id": 97177594, "body": "@BKSpurgeon, thanks its a good solution, but My CTO gave me this requirement create a new controller to handle the favorites, your idea is the practical solution but now I have to do in a new controller called Favorites"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1552941105, "post_id": 55214291, "comment_id": 97193649, "body": "@JavierAndr&#233;sBurgosRold&#225;n you change the <code>params.permit</code> call, but did you change the params coming from the front end? You should put a breakpoint in there and see what exactly is going on."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11095681, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHwFGrXaiq8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO60tdEXpajqmx4jRd85TrcTV56BA/mo/photo.jpg?sz=128", "display_name": "Javier Andr&#233;s Burgos Rold&#225;n", "link": "https://stackoverflow.com/users/11095681/javier-andr%c3%a9s-burgos-rold%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1552950754, "post_id": 55219184, "comment_id": 97197051, "body": "Thabks Dipak Gutpa"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "reply_to_user": {"reputation": 1, "user_id": 11095681, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHwFGrXaiq8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO60tdEXpajqmx4jRd85TrcTV56BA/mo/photo.jpg?sz=128", "display_name": "Javier Andr&#233;s Burgos Rold&#225;n", "link": "https://stackoverflow.com/users/11095681/javier-andr%c3%a9s-burgos-rold%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1552974963, "post_id": 55219184, "comment_id": 97202434, "body": "Is this works for you. Because I have added code with assumption only."}], "tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1552904718, "creation_date": 1552904718, "answer_id": 55219184, "question_id": 55214291, "link": "https://stackoverflow.com/questions/55214291/create-action-by-a-has-many-through-association-to-assign-a-favorite-category/55219184#55219184", "title": "Create action by a has many through association to assign a favorite_category", "body": "<p>Seems like you just want to update intermediate table. So you can do it like this.</p>\n\n<pre><code>def create\n  begin\n    @profile.categories &lt;&lt; Category.find(params[:category_ids])\n\n                          Or\n\n    params[:category_ids].each do |category_id|\n      @profile.category_profiles.create(category_id: category_id)\n    end\n\n    flash[:success] = t('controller.create.success',\n                        resource: CategoryProfile.model_name.human)\n    redirect_to account_favorites_url\n  rescue\n    flash[:warning] = @category_profile.errors.full_messages.to_sentence\n    redirect_to account_favorites_url\n  end\nend\n</code></pre>\n\n<p>Need to find other better way for error handling using either transaction block or something.</p>\n"}], "owner": {"reputation": 1, "user_id": 11095681, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aHwFGrXaiq8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO60tdEXpajqmx4jRd85TrcTV56BA/mo/photo.jpg?sz=128", "display_name": "Javier Andr&#233;s Burgos Rold&#225;n", "link": "https://stackoverflow.com/users/11095681/javier-andr%c3%a9s-burgos-rold%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1552904718, "creation_date": 1552878805, "last_edit_date": 1552891311, "question_id": 55214291, "link": "https://stackoverflow.com/questions/55214291/create-action-by-a-has-many-through-association-to-assign-a-favorite-category", "title": "Create action by a has many through association to assign a favorite_category", "body": "<h3>Problem</h3>\n\n<p>I'm trying to create a middle table called <code>category_profiles</code>, is a intermediate table to assign favorite categories to my profiles, but I can't access to the <code>category_ids</code>, that I put in my form, always I got the same validation, Category doesn't exist:</p>\n\n<h3>Code:</h3>\n\n<pre><code>class CategoryProfile &lt; ApplicationRecord\n  belongs_to :profile\n  belongs_to :category\nend\n\nclass Category &lt; ApplicationRecord\nhas_many :category_profiles\nhas_many :profiles, through: :category_profiles\n\nclass Profile &lt; ApplicationRecord\nhas_many :category_profiles\nhas_many :categories, through: :category_profiles\n</code></pre>\n\n<p>When I'm doing the create action, my controller can't find my category. How do I fix it? </p>\n\n<p>My create action never find the ids of my categories to assign to the <code>category_profiles</code>. It has many through relation:</p>\n\n<pre><code>Module Account\n\n  class FavoritesController &lt; Account::ApplicationController\n\n    before_action :set_category_profile\n\n    def index\n      @favorites = @profile.categories\n\n    end\n\n    def new\n      @categories = Category.all\n      @category_profile = CategoryProfile.new\n    end\n\n    def create\n      @category_profile = @profile.category_profiles.new(category_profile_params)\n      if @category_profile.save\n        flash[:success] = t('controller.create.success',\n                            resource: CategoryProfile.model_name.human)\n        redirect_to account_favorites_url\n      else\n        flash[:warning] = @category_profile.errors.full_messages.to_sentence\n        redirect_to account_favorites_url\n      end\n    end\n\n    def destroy\n    end\n\n    private\n    def set_category_profile\n      @category_profile = CategoryProfile.find_by(params[:id])\n    end\n\n    def category_profile_params\n      params.permit(:profile_id,\n                      category_ids:[])\n    end\nend\nend\n</code></pre>\n\n<h3>Form</h3>\n\n<pre><code>&lt;%= bootstrap_form_with(model: @category,method: :post ,  local: true, html: { novalidate: true, class: 'needs-validation' }) do |f| %&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= collection_check_boxes(:category_ids, :id, Category.all.kept.children.order(name: :asc), :id, :name, {}, { :multiple =&gt; true} ) do |b| %&gt;\n      &lt;%= b.label class: 'w-1/6 mr-4' %&gt;\n      &lt;%= b.check_box class: 'w-1/7 mr-4' %&gt;\n    &lt;%end %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"md:flex justify-center\"&gt;\n    &lt;%= f.submit 'Guardar categor\u00eda favorita', class: 'btn btn-primary' %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "database", "sqlite", "type-conversion"], "comments": [{"owner": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "edited": false, "score": 1, "creation_date": 1552872908, "post_id": 55213581, "comment_id": 97163061, "body": "The <a href=\"https://www.rubydoc.info/github/luislavena/sqlite3-ruby/SQLite3%2FDatabase:execute2\" rel=\"nofollow noreferrer\">execute2</a> method returns the selected rows, plus a row for the names of the columns. <code>pull[1]</code> should give you the first row returned by the SQL query. <code>pull[1][0]</code> I think will give you the value you are looking for."}, {"owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "reply_to_user": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "edited": false, "score": 0, "creation_date": 1552873978, "post_id": 55213581, "comment_id": 97163245, "body": "@Richard it appears that did the trick.  May I ask why <code>pull[1][0]</code> works as opposed to: `pull[1][2]&#39;   Level is actually column 3 (cardinal 2)?  PS: perhaps throw this in as answer so I can accept?"}, {"owner": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "edited": false, "score": 0, "creation_date": 1552874159, "post_id": 55213581, "comment_id": 97163287, "body": "Since you are selecting only the &#39;Level&#39; column, it will be the 1st (zero index) item."}, {"owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "reply_to_user": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "edited": false, "score": 0, "creation_date": 1552874803, "post_id": 55213581, "comment_id": 97163408, "body": "@Richard still odd b/c when I created table (ie <code>&quot;create table x(Col, ..., LastCol)&quot;</code> ) <code>Level</code> is <code>Col[2]</code>"}, {"owner": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "edited": false, "score": 2, "creation_date": 1552874932, "post_id": 55213581, "comment_id": 97163439, "body": "This is the difference between saying <code>SELECT * FROM table</code> and <code>SELECT column_name FROM table</code>. In the first statement, you&#39;re saying, &quot;Give me all the columns.&quot; In the second statement, you&#39;re saying, &quot;Only give me ONE column.&quot;"}, {"owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "reply_to_user": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "edited": false, "score": 1, "creation_date": 1552875227, "post_id": 55213581, "comment_id": 97163491, "body": "IOW: <code>SELECT</code> can reorder columns temporarily. now I know ;)"}], "answers": [{"tags": [], "owner": {"reputation": 1098, "user_id": 2675670, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1843495af1974ff177bb80d0fbbd6343?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/2675670/richard"}, "is_accepted": true, "score": 1, "last_activity_date": 1552874062, "creation_date": 1552874062, "answer_id": 55213785, "question_id": 55213581, "link": "https://stackoverflow.com/questions/55213581/teasing-apart-integer-value-from-array-in-sqlite3/55213785#55213785", "title": "teasing apart integer value from array in sqlite3", "body": "<p>Try this</p>\n\n<pre><code>id = id_item_hash[:id]\nitem = id_item_hash[:item]\npull = db.execute2(\"Select Level from sometable where Id = :id OR Item = :item\")\n\n# puts pull[1][0]\n@pull = pull[1][0]\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 55213785, "answer_count": 1, "score": 0, "last_activity_date": 1552874062, "creation_date": 1552871789, "last_edit_date": 1552872161, "question_id": 55213581, "link": "https://stackoverflow.com/questions/55213581/teasing-apart-integer-value-from-array-in-sqlite3", "title": "teasing apart integer value from array in sqlite3", "body": "<p>I am running ruby 2.3 (for sqlite3 compability reasons).  The code below is the minimal snippets to produce a coherent question.</p>\n\n<p>I have the following line in a method:</p>\n\n<pre><code>def pull_value(id_item_hash)\n     ...\n            ...\n            pull = db.execute2 \"Select Level from sometable where Id = :id OR Item = :item\" ,id_item_hash[:id], id_item_hash[:item]\n            @pull=Integer(pull) #@pull=Integer(pull[1]) DOESN'T solve the problem\n            ...\n     ...\nend\n</code></pre>\n\n<p>However <code>@pull</code> returns an <code>Array</code> which leads to a <code>TypeError</code> in the line below:</p>\n\n<pre><code>#here\npulled = x.pull_value(id_item_hash)\n\n#so these lines never run\nprint \"subtract how much?: \"; subtracting = Integer(gets.chomp)\nnew_value = pulled - subtracting\n</code></pre>\n\n<p>My question: <strong>How can I tease away the first found value in column <code>Label</code> so my variable <code>pull</code> can hold this value, alone, as an integer?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "contact-form"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1552869918, "post_id": 55213385, "comment_id": 97162594, "body": "can you verify what is sent in the params to your controller? and you have a typo in the email field, it says <code>f.text_field name</code> instead of <code>f.text_field email</code>"}, {"owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1552870144, "post_id": 55213385, "comment_id": 97162628, "body": "@Subash thanks for the reply! That was the issue. I was copying and pasting the code for the other text fields, and having the double &quot;names&quot;, must have cancelled out the input. Thanks for your help"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1552870181, "post_id": 55213385, "comment_id": 97162635, "body": "glad to be of help"}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 8993724, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214609033281182/picture?type=large", "display_name": "ThexOwoA", "link": "https://stackoverflow.com/users/8993724/thexowoa"}, "is_accepted": true, "score": 0, "last_activity_date": 1552916427, "creation_date": 1552916427, "answer_id": 55222735, "question_id": 55213385, "link": "https://stackoverflow.com/questions/55213385/contact-name-not-showing-name-in-db/55222735#55222735", "title": "Contact name not showing name in DB", "body": "<p>Probably your second text field is the problem, it's called :name twice... \nchange the second input and try it again</p>\n\n<pre><code>&lt;%= f.text_field :name, class: 'form-control' %&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;%= f.text_field :email, class: 'form-control' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11199948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8aaaa974fb2acefb10f7e18b5a0cdeb5?s=128&d=identicon&r=PG&f=1", "display_name": "B.C", "link": "https://stackoverflow.com/users/11199948/b-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 55222735, "answer_count": 1, "score": 1, "last_activity_date": 1552916427, "creation_date": 1552869690, "last_edit_date": 1552869806, "question_id": 55213385, "link": "https://stackoverflow.com/questions/55213385/contact-name-not-showing-name-in-db", "title": "Contact name not showing name in DB", "body": "<p>I'm a rookie, and looking to create a contact form, but when I check my submitted forms, it doesn't show the name. It just says <code>name \"\"</code> I'm using Ruby on Rails.</p>\n\n<p>My <code>html</code> looks like;</p>\n\n<blockquote>\n  <p>\n    \n      Contact Us</p>\n</blockquote>\n\n<pre><code>&lt;div class=\"col-md-4 col-md-offset-4\"&gt;\n  &lt;%= flash[:notice] %&gt;\n  &lt;div class=\"well\"&gt;\n    &lt;%= form_for @contact do |f| %&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :name %&gt;\n        &lt;%= f.text_field :name, class: 'form-control' %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :email %&gt;\n        &lt;%= f.text_field :name, class: 'form-control' %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :comments %&gt;\n        &lt;%= f.text_area :comments, class: 'form-control' %&gt;\n      &lt;/div&gt;\n\n      &lt;%= f.submit 'Submit', class: 'btn btn-default' %&gt;\n      &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p>My <code>controller</code> code looks like; </p>\n\n<pre><code>class ContactsController &lt; ApplicationController\n  def new\n      @contact = Contact.new\n  end\n\n  def create\n    @contact = Contact.new(contact_params)\n    if @contact.save\n        redirect_to new_contact_path, notice: \"Message Sent.\"\n    else\n        redirect_to new_contact_path, notice: \"Error Occured\"\n    end\n  end\n\n  private\n\n  def contact_params\n   params.require(:contact).permit(:name, :email, :comments)\n  end\n</code></pre>\n\n<p>end</p>\n"}, {"tags": ["ruby", "types", "instance-variables"], "comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1552867425, "post_id": 55213077, "comment_id": 97162146, "body": "Define &quot;best&quot;, it&#39;s really a matter of opinion.  What&#39;s wrong with using <code>@name = name.to_s</code> and <code>@age = age.to_i</code> in the constructor, for example?  You&#39;d probably want to check for reasonable values on age as well..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1552870328, "post_id": 55213077, "comment_id": 97162662, "body": "You could set each instance variable using a setter only, checking the class in the setter: <code>class Person; def name=(name); &lt;raise exception&gt; unless name.is_a?(String); @name = name; end; def initialize(name); self.name = name; end; end</code>. Then write (say) <code>person = Person.new(&quot;Bugsy&quot;)</code>. <code>person.name =  4</code> would raise an exception. This is not fail-safe, however, as one may always invoke <code>person.instance_variable_set(:@name, 4)</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1552890084, "post_id": 55213077, "comment_id": 97166199, "body": "You may come up with a hack to do that, but it does against what Ruby is about. Ruby encourages duck typing. It tries to go away from classes. Variables do not have type."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1552895342, "post_id": 55213077, "comment_id": 97168452, "body": "Can you please elaborate on why you want to enforce a specific type? Just because you are used to doing so from working with Java? Or do you try to solve a specific problem/issue? I ask because it is uncommon in Ruby to enforce types and solution to specific issues depending on the problem."}, {"owner": {"reputation": 404, "user_id": 7738591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZ7FZ.png?s=128&g=1", "display_name": "Karol Daniluk", "link": "https://stackoverflow.com/users/7738591/karol-daniluk"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1552924621, "post_id": 55213077, "comment_id": 97185435, "body": "@spickermann I think it is good practice to keep everything strictly and tidy, to avoid unexpected errors, some time later."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1552927253, "post_id": 55213077, "comment_id": 97186918, "body": "@KaRolthas Seems like a dynamically typed language like Ruby isn&#39;t the best choice then..."}], "answers": [{"tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 2, "last_activity_date": 1552870387, "creation_date": 1552870387, "answer_id": 55213459, "question_id": 55213077, "link": "https://stackoverflow.com/questions/55213077/what-is-the-best-way-to-force-the-type-of-instance-variables-in-ruby/55213459#55213459", "title": "What is the best way to force the type of instance variables in Ruby?", "body": "<p><a href=\"https://ruby-doc.org/core-2.2.0/TypeError.html\" rel=\"nofollow noreferrer\">TypeError</a> is built-in and usually used. <code>Kernel#raise</code> is fine too.</p>\n\n<pre><code>class Person\n  def initialize(age)\n    raise TypeError, \"age should be an Integer\" unless age.is_a?(Integer)\n    @age = age \n  end \nend \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 579, "user_id": 11206879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bS2D6.png?s=128&g=1", "display_name": "Pan Ke", "link": "https://stackoverflow.com/users/11206879/pan-ke"}, "is_accepted": false, "score": 1, "last_activity_date": 1552892318, "creation_date": 1552892318, "answer_id": 55216028, "question_id": 55213077, "link": "https://stackoverflow.com/questions/55213077/what-is-the-best-way-to-force-the-type-of-instance-variables-in-ruby/55216028#55216028", "title": "What is the best way to force the type of instance variables in Ruby?", "body": "<blockquote>\n  <p>\u201cIf a method is written with a specific input type in mind, such as an Integer, we can use Ruby's standardized conversion methods to ensure that we are dealing with the type the code expects. If we want to provide maximum leeway in input, we can use explicit conversion methods like #to_i. If we want to provide a little flexibility while ensuring that client code isn't blatantly mis-using our method, we can use an implicit conversion such as #to_int.\u201d</p>\n</blockquote>\n\n<p>Excerpt From: Avdi Grimm. \u201cConfident Ruby\u201d. </p>\n"}], "owner": {"reputation": 404, "user_id": 7738591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZ7FZ.png?s=128&g=1", "display_name": "Karol Daniluk", "link": "https://stackoverflow.com/users/7738591/karol-daniluk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1552892318, "creation_date": 1552866504, "question_id": 55213077, "link": "https://stackoverflow.com/questions/55213077/what-is-the-best-way-to-force-the-type-of-instance-variables-in-ruby", "title": "What is the best way to force the type of instance variables in Ruby?", "body": "<p>Lets say I want to create a <code>class Person</code> in ruby, with variables <code>@name</code> and <code>@age</code>. What is the best way to ensure that variables have specific class: <code>@name</code> is a String and <code>@age</code> is Integer?</p>\n\n<p>It is not obvious since ruby uses \"duck-typing\". I assume I could use <code>raise</code> clause in <code>initialize</code> method but I would like to know what is the best practice?</p>\n\n<p>For example in Java I could declare variables types, and assing them by passing to the constructor arguments with the same type.</p>\n\n<pre><code>class Person {  \n    private String name;\n    private int age;\n\n    public Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1477, "user_id": 262707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bf48ce51b35fa383042a3b22accdb99?s=128&d=identicon&r=PG", "display_name": "maro", "link": "https://stackoverflow.com/users/262707/maro"}, "edited": false, "score": 6, "creation_date": 1552866350, "post_id": 55213039, "comment_id": 97161942, "body": "Use OptionParser: <a href=\"http://ruby-doc.org/stdlib-2.6.2/libdoc/optparse/rdoc/OptionParser.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.6.2/libdoc/optparse/rdoc/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 11218021, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KxBgLKMJ3N4/AAAAAAAAAAI/AAAAAAAAAAA/Q2PDLLma2Uc/photo.jpg?sz=128", "display_name": "AtomicGiraffe", "link": "https://stackoverflow.com/users/11218021/atomicgiraffe"}, "reply_to_user": {"reputation": 1477, "user_id": 262707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bf48ce51b35fa383042a3b22accdb99?s=128&d=identicon&r=PG", "display_name": "maro", "link": "https://stackoverflow.com/users/262707/maro"}, "edited": false, "score": 0, "creation_date": 1552881186, "post_id": 55213039, "comment_id": 97164551, "body": "What is a good way to require an equal sign for arguments? For ex, the section on required arguments in the docs allows for this: <code>-r library</code>  How can I declare that invalid? I want a valid command to be like this: <code>-r=library</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1552890149, "post_id": 55213039, "comment_id": 97166219, "body": "Don&#39;t reinvent the wheel. Try what maro says."}], "owner": {"reputation": 21, "user_id": 11218021, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KxBgLKMJ3N4/AAAAAAAAAAI/AAAAAAAAAAA/Q2PDLLma2Uc/photo.jpg?sz=128", "display_name": "AtomicGiraffe", "link": "https://stackoverflow.com/users/11218021/atomicgiraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1552897735, "creation_date": 1552866065, "last_edit_date": 1552897735, "question_id": 55213039, "link": "https://stackoverflow.com/questions/55213039/variable-string-matching", "title": "Variable string matching", "body": "<p>I have a program that accepts command line inputs. The input is similar to this:</p>\n\n<pre><code>ruby myprogram.rb --option1 --option2=foo\n</code></pre>\n\n<p>Right now, I split the command by spaces and keep an array of commands. For example, this would be the array for the example above:</p>\n\n<pre><code>['option1','option2=foo']\n</code></pre>\n\n<p>In the code, there is a list of valid commands:</p>\n\n<pre><code>valid_cmd = %w(\n    --option1\n    --option2\n    --option3\n)\n</code></pre>\n\n<p>Using the list of parsed commands, what is the best way to check that a inputted command is valid? There is also a more difficult component to this. Let's say <code>option2</code> has optional arguments. For example, <code>--option2=anArgument</code> is just as valid as <code>--option2</code> alone. On the other hand, <code>option3</code> has mandatory arguments - ie. <code>--option3=foo</code> is valid but <code>--option3</code> is not. How can we account for this as well?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting"], "comments": [{"owner": {"reputation": 6478, "user_id": 946478, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/734044a1d5aa692f00c28b6999bd0240?s=128&d=identicon&r=PG", "display_name": "sparkle", "link": "https://stackoverflow.com/users/946478/sparkle"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1552910583, "post_id": 55213016, "comment_id": 97176778, "body": "I want to sort a enumerable where nil values are at the end"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 4, "last_activity_date": 1552866588, "creation_date": 1552866588, "answer_id": 55213091, "question_id": 55213016, "link": "https://stackoverflow.com/questions/55213016/sort-enumerables-with-nil-as-last/55213091#55213091", "title": "Sort enumerables with `nil` as last", "body": "<p>Let's sort based on two criteria: </p>\n\n<ol>\n<li>rank nil/not nil </li>\n<li>rank value</li>\n</ol>\n\n<p>This way</p>\n\n<pre><code>enumerable.sort_by { |item| [item[:rank] ? 0 : 1, item[:rank]] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1552867665, "creation_date": 1552867665, "answer_id": 55213200, "question_id": 55213016, "link": "https://stackoverflow.com/questions/55213016/sort-enumerables-with-nil-as-last/55213200#55213200", "title": "Sort enumerables with `nil` as last", "body": "<pre><code>enumerable.sort_by { |h| h[:rank] || Float::INFINITY }\n  #=&gt; [{:rank=&gt;1}, {:rank=&gt;2}, {:rank=&gt;3}, {:rank=&gt;nil}] \n</code></pre>\n"}], "owner": {"reputation": 6478, "user_id": 946478, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/734044a1d5aa692f00c28b6999bd0240?s=128&d=identicon&r=PG", "display_name": "sparkle", "link": "https://stackoverflow.com/users/946478/sparkle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 55213200, "answer_count": 2, "score": 0, "last_activity_date": 1552897097, "creation_date": 1552865852, "last_edit_date": 1552897097, "question_id": 55213016, "link": "https://stackoverflow.com/questions/55213016/sort-enumerables-with-nil-as-last", "title": "Sort enumerables with `nil` as last", "body": "<p>My data is</p>\n\n<pre><code>enumerable = [{rank:1}, {rank: nil}, {rank: 3}, {rank: 2}]\n</code></pre>\n\n<p>I want</p>\n\n<pre><code>sorted = [{rank:1}, {rank: 2}, {rank: 3}, {rank: nil}]\n</code></pre>\n\n<p>I tried with:</p>\n\n<pre><code>sort_by{|x| x.rank.to_i}\n</code></pre>\n\n<p>but <code>nil</code>s are put first. It has to be very efficient because I have to compute many times.</p>\n"}, {"tags": ["ruby", "selenium", "cucumber", "gherkin"], "comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1552859945, "post_id": 55212262, "comment_id": 97160574, "body": "Hey Welcome to SO. Do you want to exclude the Background tag from the scenario tag?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11161846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z9PHU5nQCOQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdgSlT7fKXdFeZ6TVxbJnFGN3iIZQ/mo/photo.jpg?sz=128", "display_name": "Syed Zaidi", "link": "https://stackoverflow.com/users/11161846/syed-zaidi"}, "edited": false, "score": 0, "creation_date": 1552919121, "post_id": 55212459, "comment_id": 97181965, "body": "That solution only works for the tag names of scenarios, not the overall Feature tags."}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1552860722, "creation_date": 1552860722, "answer_id": 55212459, "question_id": 55212262, "link": "https://stackoverflow.com/questions/55212262/how-can-i-gather-all-the-tags-for-a-feature-file/55212459#55212459", "title": "How can I gather all the tags for a Feature file?", "body": "<p>Try the below. </p>\n\n<pre><code>scenario.source_tag_names\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11161846, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z9PHU5nQCOQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdgSlT7fKXdFeZ6TVxbJnFGN3iIZQ/mo/photo.jpg?sz=128", "display_name": "Syed Zaidi", "link": "https://stackoverflow.com/users/11161846/syed-zaidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552935786, "creation_date": 1552859274, "last_edit_date": 1552935786, "question_id": 55212262, "link": "https://stackoverflow.com/questions/55212262/how-can-i-gather-all-the-tags-for-a-feature-file", "title": "How can I gather all the tags for a Feature file?", "body": "<p>I am trying to leverage the tag names that are associated with a feature file in my cucumber ruby Framework. Below is what I am currently doing to gather the tag names using a Before hook, but unfortunately more code other than just the tags are being collected.</p>\n\n<pre><code>Before do |scenario|\n  @feature_tags = scenario.feature.tags\nend\n</code></pre>\n\n<p>Take for example this sample feature file snippet: </p>\n\n<pre><code>@regression @etc\nFeature: File description for something\n\nBackground:\n* etc etc etc\n\nScenario: Description for something\n* etc etc etc\n</code></pre>\n\n<p>What is currently being captured with the above hook is:</p>\n\n<pre><code>[#&lt;Cucumber::Core::Ast::Tag \"@regression\" (features/long/file/path.feature:1)&gt;, \n#&lt;Cucumber::Core::Ast::Tag \"@etc\" (features/long/file/path.feature:1)&gt;]\n</code></pre>\n\n<p>Is there any way that I can isolate simply the tag names ie: \"@regression\" ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "resque", "resque-scheduler"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1552860861, "creation_date": 1552860861, "answer_id": 55212479, "question_id": 55211779, "link": "https://stackoverflow.com/questions/55211779/how-to-connect-with-separate-redis-instance-in-resque-rails/55212479#55212479", "title": "How to connect with separate redis instance in resque rails", "body": "<p>As described <a href=\"https://github.com/resque/resque#Configuration\" rel=\"nofollow noreferrer\">in the readme</a>, you can point Resque to any Redis using the configuration file. </p>\n\n<pre><code># config/resque.yml:\n\ndevelopment: some_host:6379\n</code></pre>\n\n<p>Then using <a href=\"https://github.com/redis-store/redis-rails\" rel=\"nofollow noreferrer\">redis-rails</a> you can configure a different connnection for the cache, for example:</p>\n\n<pre><code># config/environments/development.rb:\n\nconfig.cache_store = :redis_store, \"redis://other_host:6379/0/cache\"\n</code></pre>\n\n<p>You would need to fill it in for the other environments as well.</p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 55212479, "answer_count": 1, "score": 1, "last_activity_date": 1552860861, "creation_date": 1552855854, "question_id": 55211779, "link": "https://stackoverflow.com/questions/55211779/how-to-connect-with-separate-redis-instance-in-resque-rails", "title": "How to connect with separate redis instance in resque rails", "body": "<p>There are two in redis setup and their instances in my app. One for redis cache. I want that for background jobs I will use another instance.</p>\n\n<p>I can't find a way where i define resqu to use specific redis address.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "cron", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 8196847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fyZL5MKFYC0/AAAAAAAAAAI/AAAAAAAAAS4/nR8P0Ni0s-c/photo.jpg?sz=128", "display_name": "Juan Carlos Casalderrey", "link": "https://stackoverflow.com/users/8196847/juan-carlos-casalderrey"}, "edited": false, "score": 1, "creation_date": 1555123688, "post_id": 55211707, "comment_id": 98011085, "body": "Thank you for your answer! I will try this and tell you if it was succesful!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9274045"}, "is_accepted": false, "score": 0, "last_activity_date": 1552855240, "creation_date": 1552855240, "answer_id": 55211707, "question_id": 55211451, "link": "https://stackoverflow.com/questions/55211451/heroku-cron-implementation/55211707#55211707", "title": "Heroku cron implementation", "body": "<p>Personaly I like to do it like this:  </p>\n\n<ul>\n<li>create a cron job that is executed really frequnetly, let say once per minute  </li>\n<li>I use ruby library for scheduling that lets me set executions as I want, and they are written nicely in code, which at least in my opinion makes them more maintanable then changing cron jobs on the server. Personally I use <a href=\"https://github.com/jmettraux/rufus-scheduler\" rel=\"nofollow noreferrer\">this library</a> (there are many to pick from).</li>\n</ul>\n\n<p>If you are on the free tier Heroku, I'm not sure it's going to let you execute cron really frequent, but still, you can use other services that can execute code whenever you want.<br>\nFor example if you are hosting your code on GitLab, it already has scheduler built in as you can use it.</p>\n"}], "owner": {"reputation": 116, "user_id": 8196847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fyZL5MKFYC0/AAAAAAAAAAI/AAAAAAAAAS4/nR8P0Ni0s-c/photo.jpg?sz=128", "display_name": "Juan Carlos Casalderrey", "link": "https://stackoverflow.com/users/8196847/juan-carlos-casalderrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552855240, "creation_date": 1552853636, "question_id": 55211451, "link": "https://stackoverflow.com/questions/55211451/heroku-cron-implementation", "title": "Heroku cron implementation", "body": "<p>I am developing a webapp (deployed in Heroku) that collect live football (soccer) data and then transforms it in stats.</p>\n\n<p>Currently, as I am from Uruguay, the app only collects data from the Uruguayan, Libertadores and Sudamericana competitions, that has at most, 5 matches at the same time. </p>\n\n<p>The problem I am having is that I need to start a cron when each of the matches starts and end it when they end, so I can manage with more precision the current minutes of the matches.</p>\n\n<p>I have been reading some posts here, but I did not found in any of them that explained how to do what I need, neither how to use it on Heroku.</p>\n\n<p>If it helps, I will provide the webapp infrastrucure information:</p>\n\n<ul>\n<li>Ruby version: 2.4.1</li>\n<li>Rails version: 5.0.1</li>\n<li>Heroku dyno plan: Standard-2X with 1 dyno</li>\n<li>Heorku Postrgres plan: Hobby Basic</li>\n<li>Heroku stack: heroku-16</li>\n</ul>\n\n<p>Thank you very much! And sorry for my english, clearly is not my first language.</p>\n"}, {"tags": ["php", "ruby", "ssl"], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 5032757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7111254f8a5bd6656de652442af71a?s=128&d=identicon&r=PG&f=1", "display_name": "green1919", "link": "https://stackoverflow.com/users/5032757/green1919"}, "is_accepted": false, "score": 0, "last_activity_date": 1552852848, "creation_date": 1552852848, "answer_id": 55211328, "question_id": 55211232, "link": "https://stackoverflow.com/questions/55211232/2c2p-pkc7-decryption-from-php-ruby/55211328#55211328", "title": "2C2P PKC7 decryption from PHP -&gt; Ruby", "body": "<p>It's as simple as doing: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>payment_response = params.dig(:paymentResponse)\ncertificate = OpenSSL::X509::Certificate.new(File.read('config/twoctwop_keys/demo2.crt'))\nprivate_key = OpenSSL::PKey::RSA.new(File.read('config/twoctwop_keys/demo2.pem'), &lt;passphrase&gt;)\nbody = OpenSSL::PKCS7.new(Base64.strict_decode64(payment_response))\nHashie::Mash.new(Hash.from_xml(@body.decrypt(@private_key, @certificate))['PaymentResponse'])\n\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 5032757, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf7111254f8a5bd6656de652442af71a?s=128&d=identicon&r=PG&f=1", "display_name": "green1919", "link": "https://stackoverflow.com/users/5032757/green1919"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552852848, "creation_date": 1552852215, "question_id": 55211232, "link": "https://stackoverflow.com/questions/55211232/2c2p-pkc7-decryption-from-php-ruby", "title": "2C2P PKC7 decryption from PHP -&gt; Ruby", "body": "<p>I'm trying to convert a bit of PHP code to Ruby. The code snippet is located here: <a href=\"https://developer.2c2p.com/docs/read-payment-response-1\" rel=\"nofollow noreferrer\">https://developer.2c2p.com/docs/read-payment-response-1</a> (located at the bottom of the page) and I'm trying to understand how I'd go about implementing this in Ruby. I've got as far as: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>      payment_response = params.dig(:paymentResponse)\n      cert_store = OpenSSL::X509::Store.new\n      my_cert =  OpenSSL::X509::Certificate.new(File.read('config/twoctwop_keys/demo2.crt'))\n      signature = OpenSSL::PKCS7.new(File.read('config/twoctwop_keys/demo2.pem'))\n      signature.verify([my_cert], cert_store, payment_response, OpenSSL::PKCS7::NOVERIFY)\n      signature.data\n</code></pre>\n\n<p>However with the above I seem to be getting the following error: </p>\n\n<blockquote>\n  <p>ArgumentError: Could not parse the PKCS7: nested asn1 error</p>\n</blockquote>\n\n<p>from the following line: </p>\n\n<p><code>OpenSSL::PKCS7.new(File.read('config/twoctwop_keys/demo2.pem'))</code></p>\n\n<p>Without pasting the contents of the <code>demo2.pem</code> file it seems to contain multiple certificates since I can see: </p>\n\n<pre><code>Bag Attributes\n    Microsoft Local Key set: &lt;No Values&gt;\n    localKeyID: 01 00 00 00\n    friendlyName: omitted\n    Microsoft CSP Name: Microsoft RSA SChannel Cryptographic Provider\nKey Attributes\n    X509v3 Key Usage: 10\n-----BEGIN RSA PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: DES-EDE3-CBC,3A2DD8162BC67378\n   ..... key......\n-----END RSA PRIVATE KEY-----\nBag Attributes\n    localKeyID: 01 00 00 00\n    friendlyName: demo2.2c2p.com\nsubject=/C=SG/ST=Singapore/L=Singapore/O=xx Pte Ltd./OU=xxx IT/CN=xxx\nissuer=xxxx\n-----BEGIN CERTIFICATE-----\n   ....key....\n-----END CERTIFICATE-----\nBag Attributes: &lt;Empty Attributes&gt;\nsubject=/CN=SinaptIQ CA\nissuer=/CN=SinaptIQ CA\n-----BEGIN CERTIFICATE-----\n  ....key....\n-----END CERTIFICATE-----\n</code></pre>\n\n<p>Is there something that I'm not understanding here. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1552851420, "post_id": 55210890, "comment_id": 97158127, "body": "I highly recommend that you have a look at <a href=\"https://guides.rubyonrails.org/i18n.html\" rel=\"nofollow noreferrer\">Rails Internationalization (I18n) API</a> in the Rails Guides and the <a href=\"https://github.com/svenfuchs/rails-i18n\" rel=\"nofollow noreferrer\"><code>rails-i18n</code> gem</a>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1552851880, "post_id": 55210890, "comment_id": 97158248, "body": "just a note, i don&#39;t see how <code>puts</code> could be useful if you&#39;re showing the results on a webpage."}], "answers": [{"comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1552851277, "post_id": 55211085, "comment_id": 97158080, "body": "You should probably have a look at <a href=\"https://guides.rubyonrails.org/i18n.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/i18n.html</a> and <a href=\"https://rubyplus.com/articles/3651-Custom-View-Helpers-in-Rails-5\" rel=\"nofollow noreferrer\">rubyplus.com/articles/3651-Custom-View-Helpers-in-Rails-5</a>"}], "tags": [], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "is_accepted": false, "score": 1, "last_activity_date": 1552851218, "creation_date": 1552851218, "answer_id": 55211085, "question_id": 55210890, "link": "https://stackoverflow.com/questions/55210890/how-to-use-my-little-class-from-ruby-on-ruby-on-rails/55211085#55211085", "title": "How to use my little class from ruby on ruby on rails", "body": "<p>You can add the class to the <code>lib</code> directory of your app.</p>\n\n<p>Then in application.rb include that directory</p>\n\n<pre><code>config.autoload_paths &lt;&lt; \"#{Rails.root}/lib\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1552854255, "last_edit_date": 1552854255, "creation_date": 1552853780, "answer_id": 55211477, "question_id": 55210890, "link": "https://stackoverflow.com/questions/55210890/how-to-use-my-little-class-from-ruby-on-ruby-on-rails/55211477#55211477", "title": "How to use my little class from ruby on ruby on rails", "body": "<h1>Your library</h1>\n\n<p>Here's a small refactoring of your class:</p>\n\n<pre><code># Petite classe pour r\u00e9cup\u00e9rer le jour et l'heure en Fran\u00e7ais\nclass JourFrancais\n  JOURS = {\"Monday\"=&gt;\"Lundi\", \"Tuesday\"=&gt;\"Mardi\", \"Wednesday\"=&gt;\"Mercredi\", \"Thursday\"=&gt;\"Jeudi\", \"Friday\"=&gt;\"Vendredi\", \"Saturday\"=&gt;\"Samedi\", \"Sunday\"=&gt;\"Dimanche\"}\n\n  def self.jourj(time = Time.now)\n    jour = JOURS[time.strftime('%A')]\n    \"Nous sommes le #{jour} \" + time.strftime(\"%d/%m/%Y et il est %H:%M.\")\n  end\nend \n\nputs JourFrancais.jourj\n# \"Nous sommes le Dimanche 17/03/2019 et il est 21:14.\"\nputs JourFrancais.jourj(Time.local(2017, 3, 1, 12, 35))\n# \"Nous sommes le Mercredi 01/03/2017 et il est 12:35.\"\n</code></pre>\n\n<p>No need for a loop, the method now returns a string instead of just displaying it and you can specify the time.</p>\n\n<h1>With Rails i18n</h1>\n\n<p>In Rails, you could download <a href=\"https://raw.githubusercontent.com/svenfuchs/rails-i18n/master/rails/locale/fr.yml\" rel=\"nofollow noreferrer\"><code>fr.yml</code></a> to <code>config/locales/</code> and add <code>config.i18n.default_locale = :fr</code> to your <code>config/application.rb</code>.</p>\n\n<p>You don't need your library anymore!</p>\n\n<pre><code>I18n.l Time.now, format: :long\n# =&gt; \"dimanche 17 mars 2019 21h23\"\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7655549, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154990387833633/picture?type=large", "display_name": "Christophe Cuypers", "link": "https://stackoverflow.com/users/7655549/christophe-cuypers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 55211477, "answer_count": 2, "score": 2, "last_activity_date": 1552854255, "creation_date": 1552849920, "last_edit_date": 1552850915, "question_id": 55210890, "link": "https://stackoverflow.com/questions/55210890/how-to-use-my-little-class-from-ruby-on-ruby-on-rails", "title": "How to use my little class from ruby on ruby on rails", "body": "<p>I have wrote one little class on ruby, and i want to use she, on ruby on rails, for showing on each pages, date and hours on french, how to be good placed, she on for having on each views ? if possible to explain, whole procees ? Many thanks,\nHere is she..</p>\n\n<pre><code># Petite classe pour r\u00e9cup\u00e9rer le jour et l'heure en Fran\u00e7ais\nclass JourFrancais\n\n    def initialize()\n        self.jourj\n    end\n    def jourj\n        jours_ouvrables = {Lundi: 'monday', Mardi: 'tuesday', Mercredi: 'wednesday', Jeudi: 'thursday', Vendredi: 'friday', Samedi: 'saturday', Dimanche: 'sunday'}\n\n\n        jours_ouvrables.each do |key, value|\n            if Time.now.strftime(\"%A\").downcase == value\n            puts \"Nous sommes le #{key} \" + Time.now.strftime(\"%d/%m/%Y\") + \" et il est \" + Time.now.strftime(\"%H:%M\")\n\n            end\n        end\n    end \nend\n</code></pre>\n\n<p>thanks for your help..</p>\n"}, {"tags": ["ruby", "loops"], "answers": [{"tags": [], "owner": {"reputation": 2352, "user_id": 157931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/986d255e94481d2249bae7911e7845e8?s=128&d=identicon&r=PG", "display_name": "Danilo Cabello", "link": "https://stackoverflow.com/users/157931/danilo-cabello"}, "is_accepted": false, "score": 2, "last_activity_date": 1552848549, "creation_date": 1552848549, "answer_id": 55210681, "question_id": 55210568, "link": "https://stackoverflow.com/questions/55210568/nested-loop-ruby-answer/55210681#55210681", "title": "Nested Loop Ruby Answer", "body": "<p>You need to have a place to store your \"counter\" in this case the <code>total</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>puts \"How many years\"\nyears_input = gets.to_i\ntotal_rainfall = 0\n\nfor years_input in (1..years_input)\n  puts \"Years Passed: Years = \" + years_input.to_s\n  for m in (1..12)\n      puts \"Month: Month # = \" + m.to_s\n      puts \"Inches of rainfall\"\n      total_rainfall += gets.to_i\n  end\nend\n\nputs \"Total Months\"\nputs (years_input * 12).to_s\n\nputs \"Total Rainfall\"\nputs total_rainfall\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1552854116, "creation_date": 1552854116, "answer_id": 55211527, "question_id": 55210568, "link": "https://stackoverflow.com/questions/55210568/nested-loop-ruby-answer/55211527#55211527", "title": "Nested Loop Ruby Answer", "body": "<p>@Danilo has answered your question, so let me suggest how you might write your code in a more Ruby-like way. Let me first mention that <code>for</code> loops are <em>never</em> used by Ruby coders. Instead we use enumerators (like <code>each</code> and, here, <code>times</code> and <code>sum</code>) and blocks. That's in part to hide information within blocks to avoid it being seen by prying eyes outside the block.</p>\n\n<pre><code>require 'date'\n\nputs \"How many years?\"\nnbr_years = gets.to_i\nputs \"Number of years: #{nbr_years}\"\n\nnbr_years.times do\n  puts \"Which year?\"\n  y = gets.to_i\n  tot = (1..12).sum do |m|\n    puts \"How many inches of rainfall in #{Date::MONTHNAMES[m]}, #{y}?\"\n    gets.to_f\n  end\n  puts \"Total rainfall in #{y} was #{tot} inches\"\nend\n</code></pre>\n\n<p><code>#{nbr_years}</code> in <code>\"Number of years: #{nbr_years}\"</code> converts <code>nbr_years</code> to a string by computing <code>nbr_years.to_s</code>. (See <a href=\"http://ruby-doc.org/core-2.5.1/Integer.html#method-i-to_s\" rel=\"nofollow noreferrer\">Integer#to_s</a>). It's called <em>string interpolation</em>. If <code>nbr_years</code> were an array, <code>Array#to_s</code> would be applied, and so on.</p>\n\n<p>Search for \"MONTHNAMES\" in <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/date/rdoc/Date.html\" rel=\"nofollow noreferrer\">Date</a> and you will find that <code>Date::MONTHNAMES</code> (among several date-related constants) has been defined for your convenience:</p>\n\n<pre><code>Date::MONTHNAMES\n  #=&gt; [nil, \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n  #    \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n</code></pre>\n\n<p>In pure Ruby we need <code>include 'date'</code> to access that constant (no need for that with Rails).</p>\n\n<p><code>nil</code> is just a placekeeper. <code>Date::MONTHNAMES[0]</code> is never referenced by coders.  </p>\n\n<p>Note that for inches of rainfall per month you want <code>gets.to_f</code> rather than <code>gets.to_i</code>.</p>\n\n<p>We can simulate this code by replacing the <code>gets</code> statements with generated values.</p>\n\n<pre><code>y = 2015\nputs \"How many years?\"\nnbr_years = 2\nputs \"Number of years: #{nbr_years}\"\n\nnbr_years.times do\n  puts\n  puts \"Which year?\"\n  y += 1\n  tot = (1..12).sum do |m|\n    puts \"How many inches of rainfall in #{Date::MONTHNAMES[m]}, #{y}?\"\n    f = (10 * rand).round(2)\n    puts \"#{f} inches of rainfall in #{Date::MONTHNAMES[m]}, #{y}?\"\n    f \n  end\n  puts \"Total rainfall in #{y} was #{tot} inches\"\nend\n</code></pre>\n\n<p>The following (after minor editing) is displayed. </p>\n\n<pre><code>Which year?\nHow many inches of rainfall in January, 2016?\n3.12 inches of rainfall in January, 2016?\nHow many inches of rainfall in February, 2016?\n2.64 inches of rainfall in February, 2016?\n...\nHow many inches of rainfall in December, 2016?\n4.48 inches of rainfall in December, 2016?\nTotal rainfall in 2016 was 60.71 inches\n\nWhich year?\nHow many inches of rainfall in January, 2017?\n7.15 inches of rainfall in January, 2017?\n... \nHow many inches of rainfall in December, 2017?\n7.87 inches of rainfall in December, 2017?\nTotal rainfall in 2017 was 36.31 inches\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11217330, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ADbNacVEH7Q/AAAAAAAAAAI/AAAAAAAAAMY/sdGgAYsOt4E/photo.jpg?sz=128", "display_name": "Pillowboxer", "link": "https://stackoverflow.com/users/11217330/pillowboxer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1552894510, "answer_count": 2, "score": -5, "last_activity_date": 1552854116, "creation_date": 1552847854, "last_edit_date": 1552848120, "question_id": 55210568, "link": "https://stackoverflow.com/questions/55210568/nested-loop-ruby-answer", "closed_reason": "Needs details or clarity", "title": "Nested Loop Ruby Answer", "body": "<p>Need assistance saving and totaling the \"rainfall input\" after the loop has ended. Any advice would be appreciated.</p>\n\n<pre><code>puts \"How many years\"\nyears_input = gets.to_i\nfor years_input in (1..years_input)\n    puts \"Years Passed: Years = \" + years_input.to_s\nfor m in (1..12)\n    puts \"Month: Month # = \" + m.to_s\n    puts \"Inches of rainfall\"\n    rainfall_input = gets.to_i\nend\nend\nputs \"Total Months\"\nputs (years_input * 12).to_s\nputs \"Total Rainfall\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "rails-api"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1552849581, "post_id": 55210512, "comment_id": 97157605, "body": "You could patch <code>render</code> maybe."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1552849944, "creation_date": 1552849944, "answer_id": 55210894, "question_id": 55210512, "link": "https://stackoverflow.com/questions/55210512/rails-api-render-all-responses-in-camelcase/55210894#55210894", "title": "Rails API render all responses in camelCase", "body": "<p>You could create an <code>ApplicationSerializer</code> and all other serializers could inherit from it:</p>\n\n<pre><code>class ApplicationSerializer\n  include FastJsonapi::ObjectSerializer\n  set_key_transform :camel_lower\nend\n\nclass FooBarSerializer &lt; ApplicationSerializer\n  attributes :buzz, :fizz \n  # ...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "is_accepted": false, "score": 1, "last_activity_date": 1552850540, "last_edit_date": 1552850540, "creation_date": 1552850100, "answer_id": 55210919, "question_id": 55210512, "link": "https://stackoverflow.com/questions/55210512/rails-api-render-all-responses-in-camelcase/55210919#55210919", "title": "Rails API render all responses in camelCase", "body": "<p>You could monkey patch the serializer</p>\n\n<pre><code>Rails.application.config.to_prepare do\n  FastJsonapi::ObjectSerializer.class_eval do\n    set_key_transform :camel_lower\n  end\nend\n</code></pre>\n\n<p>and for handling errors you can probably create an error serializer</p>\n\n<pre><code>render serializer: ErrorSerializer, json: {status: : unauthorized, errors: resource.errors \n</code></pre>\n\n<p>Have a look <a href=\"https://github.com/Netflix/fast_jsonapi/issues/102\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://stackoverflow.com/questions/25474294/serializing-the-errors-hash-in-activemodelserializer\">here</a></p>\n"}], "owner": {"reputation": 13, "user_id": 9231256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70880fccbed9288293cb21e138974f21?s=128&d=identicon&r=PG&f=1", "display_name": "Reason", "link": "https://stackoverflow.com/users/9231256/reason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1553042579, "creation_date": 1552847571, "last_edit_date": 1553042579, "question_id": 55210512, "link": "https://stackoverflow.com/questions/55210512/rails-api-render-all-responses-in-camelcase", "title": "Rails API render all responses in camelCase", "body": "<p>I'm trying to get my Rails API to render all JSON responses in camelCase. Currently I am using Netflix Fast JSON API for my serializer and rendering errors like so:</p>\n\n<pre><code>render json: { errors: command.errors }, status: :unauthorized\n</code></pre>\n\n<p>For the Netflix Fast JSON API serializers I've been adding <code>set_key_transform :camel_lower</code> to every serializer, which seems to do the trick (although if anyone knows how to make that a default it would be much appreciated).</p>\n\n<p>For rendering errors however I'm not sure the best way to go about camel casing. If anyone has any experience with this please let me know how you go about it! Ideally there is a method of doing this that doesn't add too much syntax to every render call being made.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>In serializing errors I added a helper method on the application controller:</p>\n\n<pre><code>def render_error(errors_params, status)\n  render json: {\n    errors: errors_params\n  }.deep_transform_keys { |key| key.to_s.camelize(:lower) }, status: status\nend\n</code></pre>\n\n<p>For the Netflix Fast JSON API I took the suggestion of @spickermann and added an application serializer for the other serializers to inherit from:</p>\n\n<pre><code>class ApplicationSerializer\n  include FastJsonapi::ObjectSerializer\n  set_key_transform :camel_lower\nend\n</code></pre>\n\n<pre><code>class SomeSerializer &lt; ApplicationSerializer\n  attributes :attribute, :other_attribute\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1552846744, "post_id": 55210233, "comment_id": 97156707, "body": "Those categories exist in the database, correct?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9409769"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1552905611, "post_id": 55210233, "comment_id": 97173865, "body": "Yes, I&#39;ve added them via console"}, {"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1552997987, "post_id": 55210233, "comment_id": 97214523, "body": "@OrkoElvis Look at the server logs, you might be missed some parameters that are mandatory."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9409769"}, "edited": false, "score": 0, "creation_date": 1552998524, "post_id": 55210233, "comment_id": 97214883, "body": "by using console?"}], "answers": [{"comments": [{"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 0, "creation_date": 1552852034, "post_id": 55210336, "comment_id": 97158288, "body": "@OrkoElvis Yes you right! You don&#39;t send any category id in your <code>select</code> dropdown. I updated my answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9409769"}, "edited": false, "score": 0, "creation_date": 1552853564, "post_id": 55210336, "comment_id": 97158770, "body": "Still the same ("}, {"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 0, "creation_date": 1552858996, "post_id": 55210336, "comment_id": 97160341, "body": "@OrkoElvis If you don&#39;t have any <code>Category</code> in db, you&#39;ll always have these errors. As it says, <code>Category</code> must exist to create an <code>Article</code> due to the association <code>belongs_to :category</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9409769"}, "edited": false, "score": 0, "creation_date": 1552895166, "post_id": 55210336, "comment_id": 97168377, "body": "How could I add them to db?"}, {"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 0, "creation_date": 1552896823, "post_id": 55210336, "comment_id": 97169151, "body": "@OrkoElvis Run <code>rails console</code> in your terminal and add some categories there: <code>Category.create(name: &quot;My name&quot;, desc: &quot;Whatever blah blah&quot;)</code>"}], "tags": [], "owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "is_accepted": true, "score": 0, "last_activity_date": 1552852001, "last_edit_date": 1552852001, "creation_date": 1552846509, "answer_id": 55210336, "question_id": 55210233, "link": "https://stackoverflow.com/questions/55210233/why-i-cant-create-article-with-any-category/55210336#55210336", "title": "Why I can&#39;t create article with any category?", "body": "<p>You forgot the <code>category_id</code> in your permitted params: </p>\n\n<pre><code>def article_params\n  params.require(:article).permit(:title, :text, :search, :music, :movie, :photo, :category_id)\nend\n</code></pre>\n\n<p>You also need to change your select helper to send <code>category_id</code> and not <code>category</code> in the POST request.<br>\nNow, with your <code>categories</code> helper, you don't send any category id in your <code>select</code> dropdown, just some \"category\" names which are not bound to any <code>Category</code> instances. </p>\n\n<p>You can fix the <code>select</code> like this and remove your helper:</p>\n\n<pre><code>&lt;p&gt;\n  &lt;%= f.label :category %&gt;&lt;br&gt;\n  &lt;%= f.select :category_id, Category.all.collect{|c| [c.name, c.id]},\n    prompt: \"Choose your category\" %&gt;\n&lt;/p&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9409769"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 55210336, "answer_count": 1, "score": 0, "last_activity_date": 1552995515, "creation_date": 1552845758, "last_edit_date": 1552995515, "question_id": 55210233, "link": "https://stackoverflow.com/questions/55210233/why-i-cant-create-article-with-any-category", "title": "Why I can&#39;t create article with any category?", "body": "<p>I'm new in RoR, and I'm working on Blog app, and implementing categories for articles. But I have trouble - when I create any article with some categories ('sport' or 'movie' or any other) I receive validation errors </p>\n\n<pre><code> - Category must exist\n - Category can't be blank\n</code></pre>\n\n<p>But I have working dropdown list or categories (this helper): </p>\n\n<pre><code>  def categories\n    category =\n      [\"Sport\",\n      \"Movie\",\n      \"Art\",\n      \"Nature\",\n      \"Exotic\"]\n    category.each do |categ|\n      my_category = \"#{categ}\"\n    end\n    return category\n  end\n</code></pre>\n\n<p>And here is a piece of code of my article.new.html.erb file:</p>\n\n<pre><code>  &lt;p&gt;\n    &lt;%= f.label :category %&gt;&lt;br&gt;\n    &lt;%= f.select :category, categories,\n        prompt: \"Choose your category\" %&gt;\n  &lt;/p&gt;\n</code></pre>\n\n<p>Also here is my db schema where categories fields are present: </p>\n\n<pre><code>  create_table \"articles\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"text\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"pic\"\n    t.string \"photo_file_name\"\n    t.string \"photo_content_type\"\n    t.bigint \"photo_file_size\"\n    t.datetime \"photo_updated_at\"\n    t.string \"music_file_name\"\n    t.string \"music_content_type\"\n    t.bigint \"music_file_size\"\n    t.datetime \"music_updated_at\"\n    t.string \"movie_file_name\"\n    t.string \"movie_content_type\"\n    t.bigint \"movie_file_size\"\n    t.datetime \"movie_updated_at\"\n    t.string \"category_id\"\n  end\n\n  create_table \"categories\", force: :cascade do |t|\n    t.string \"name\"\n    t.text \"desc\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"comments\", force: :cascade do |t|\n    t.string \"commenter\"\n    t.text \"body\"\n    t.bigint \"article_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"article_id\"], name: \"index_comments_on_article_id\"\n  end\n\n  create_table \"subscribers\", force: :cascade do |t|\n    t.string \"f_name\"\n    t.string \"l_name\"\n    t.string \"email\"\n    t.string \"country\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string \"userid\"\n    t.string \"email\"\n    t.string \"password_digest\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.boolean \"admin\", default: false\n  end\n\n  add_foreign_key \"comments\", \"articles\"\nend\n</code></pre>\n\n<p>And here is my models:</p>\n\n<pre><code>class Article &lt; ApplicationRecord\n  belongs_to :category\n  has_many :comments, dependent: :destroy\n  validates :title, presence: true, length: {minimum: 3}\n  validates :text, presence: true, length: {minimum: 3}\n  validates :category_id, presence: true\nend\n\nclass Category &lt; ApplicationRecord\n  has_many :articles\nend\n</code></pre>\n\n<p>Also this is my Article controller:</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\nbefore_action :admin_authorize, :except =&gt; [:index, :show, :search]\n\n  def index\n    @articles = Article.includes(:category).order(\"created_at DESC\")\n    if params[:category].blank?\n      @articles = Article.all.order(\"created_at DESC\")\n    else\n      @category_id = Category.find_by(name: params[:category]).id\n      @articles = Article.where(category_id: @category_id).order(\"created_at DESC\")\n    end\n  end\n\n  def new\n    @article = Article.new\n    @categories = Category.all.map{|c| [c.name, c.id]}\n  end\n\n  def show\n    @article = Article.find(params[:id])\n  end\n\n  def create\n    @article = Article.new(article_params)\n    @article.category_id = params[:category_id]\n\n    respond_to do |format|\n      if @article.save\n        format.html { redirect_to @article, notice: \"Article was successfully created!\" }\n        format.json { render :show, status: :created, location: @article }\n      else\n        format.html { render :new}\n        format.json {render json: @article.errors, status: :unprocessable_entity}\n      end\n    end\n  end\n\n  def edit\n    @article = Article.find(params[:id])\n    @categories = Category.all.map{|c| [ c.name, c.id ] }\n  end\n\n  def search\n    if params[:search].blank?\n      @articles = Article.all\n    else\n      @articles = Article.search(params)\n    end\n  end\n\n  def update\n    @article = Article.find(params[:id])\n    @article.category_id = params[:category_id]\n    if @article.update(article_params)\n      redirect_to @article\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @article = Article.find(params[:id])\n    @article.destroy\n    redirect_to articles_path\n  end\n\nprivate\n  def article_params\n    params.require(:article).permit(:title, :text, :search, :music, :movie, :photo)\n  end\n\n  def find_article\n    @article = Article.find(params[:id])\n  end\nend\n</code></pre>\n\n<p>Thanks in advance!!</p>\n"}]