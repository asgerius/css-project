[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "edited": false, "score": 0, "creation_date": 1493854028, "post_id": 43771528, "comment_id": 74584452, "body": "Can you show your <code>routes.rb</code> file please?"}, {"owner": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "reply_to_user": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "edited": false, "score": 0, "creation_date": 1493860247, "post_id": 43771528, "comment_id": 74585699, "body": "@GregAnswer I have added the routes"}], "answers": [{"tags": [], "owner": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "is_accepted": false, "score": 0, "last_activity_date": 1493910331, "last_edit_date": 1493910331, "creation_date": 1493861728, "answer_id": 43772461, "question_id": 43771528, "link": "https://stackoverflow.com/questions/43771528/show-only-names-that-belong-to-a-code/43772461#43772461", "title": "Show only names that belong to a code", "body": "<p>Okay I figured it out:</p>\n\n<p>I changed the link on the index page to</p>\n\n<pre><code> &lt;%= link_to \"Continue\", {:controller =&gt; \"codes\", :action =&gt; \"rsvp\", :code_id =&gt; code.id }%&gt;\n</code></pre>\n\n<p>then I changed the controller code to</p>\n\n<pre><code>  def rsvp\n    @guests = Guest.where(code_id: params[:code_id]) \n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "is_accepted": false, "score": 0, "last_activity_date": 1493861757, "creation_date": 1493861757, "answer_id": 43772464, "question_id": 43771528, "link": "https://stackoverflow.com/questions/43771528/show-only-names-that-belong-to-a-code/43772464#43772464", "title": "Show only names that belong to a code", "body": "<p>To make sure that <code>code</code> is a parameter in the URL, you have to make the following changes:</p>\n\n<h2>routes.rb</h2>\n\n<pre><code>get '/rsvp/:code' =&gt;'codes#rsvp'\n</code></pre>\n\n<h2>code/index.html.erb</h2>\n\n<pre><code>&lt;h2&gt;&lt;%= link_to 'Continue', rsvp_path(code: code) %&gt;&lt;/h2&gt;\n</code></pre>\n\n<p>This way <code>params[:code]</code> will have a value in the code_controller</p>\n"}], "owner": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493910331, "creation_date": 1493853955, "last_edit_date": 1493860205, "question_id": 43771528, "link": "https://stackoverflow.com/questions/43771528/show-only-names-that-belong-to-a-code", "title": "Show only names that belong to a code", "body": "<p>So in my app a guest searches for their RSVP code in the code/index.html page then clicks on a continue link that brings them to the rsvp page. I am trying to show only names that belong to the specific code on the RSVP but currently all names are showing up. I have passed the code as a param in the link on the index page but when I get to the rsvp page it is showing up in the url with a period which doesn't seem right ex: /rsvp.1\nso I am guessing that this is where I am going wrong but I cant figure out why:</p>\n\n<p>associations</p>\n\n<pre><code>Guest belongs_to :code\nCode has_many :guest\n</code></pre>\n\n<p>code/index.html.erb\n(page with the link that takes user to rsvp page and passes the params to rsvp page)</p>\n\n<pre><code>&lt;h2&gt;&lt;%= link_to 'Continue', rsvp_path(code) %&gt;&lt;/h2&gt;\n</code></pre>\n\n<p>code_controller</p>\n\n<pre><code>    def index\n      @codes = Code.search(params[:search])\n    end \n    def rsvp\n      code_id = params[:code]\n      @guests = Guest.where(\"code_id\", \"#{code_id}\")\n\n    end\n</code></pre>\n\n<p>code/rsvp.html.erb</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"box\"&gt;\n    &lt;div class=\"col-lg-12\"&gt;\n       &lt;form class=\"row form-inline\"&gt;\n         &lt;% @guests.each do |guest| %&gt;\n            &lt;%= guest.name %&gt;\n         &lt;% end %&gt;\n         &lt;div class=\"form-group\"&gt;\n          &lt;p&gt; Will you be attending the wedding of Kristen Albrecht and Chris Alford September 1, 2017? &lt;/p&gt;\n         &lt;button aria-haspopup=\"true\" class=\"btn btn-default dropdown-toggle\" ngbdropdowntoggle=\"\" type=\"button\" aria-expanded=\"false\"&gt;\n          Yes&lt;/button&gt;\n         &lt;/div&gt;\n         &lt;div class=\"form-group\"&gt;\n          &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;No&lt;/button&gt;\n         &lt;/div&gt;\n          &lt;/form&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>routes</p>\n\n<pre><code>  resources :codes\n  resources :guests\n  get '/code' =&gt;'codes#code'\n  get '/rsvp' =&gt;'codes#rsvp'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493853997, "post_id": 43771208, "comment_id": 74584443, "body": "Just some ideas. You could convert to a set then back to an array. Or iterate through the array, pushing each element to another array if it&#39;s not already in it."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1493855698, "post_id": 43771208, "comment_id": 74584901, "body": "<a href=\"https://stackoverflow.com\">Stack Overflow</a> is not a code-writing service. You need to show us the code you have written and ask <i>specific</i> questions about <i>that code</i>. Please, read how to construct a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and the <a href=\"https://stackoverflow.com/help\">help center</a>. Why don&#39;t you want to use <code>uniq</code>? It is <i>exactly</i> the method you <i>should</i> be using, because it does exactly what you&#39;re asking. If <code>uniq</code> isn&#39;t working for you, then there&#39;s probably something wrong with how you defined the equality relations for your objects, and the correct fix is not to avoid <code>uniq</code>, but rather to fix your broken equality."}, {"owner": {"reputation": 5, "user_id": 7949009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd91bfb3964a42b338d7689ce71e4b8?s=128&d=identicon&r=PG&f=1", "display_name": "Savneet Kaur", "link": "https://stackoverflow.com/users/7949009/savneet-kaur"}, "edited": false, "score": 0, "creation_date": 1493867625, "post_id": 43771208, "comment_id": 74587527, "body": "Hi Jorg!! Thanks for the information."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1493860806, "post_id": 43771231, "comment_id": 74585832, "body": "...or union (<a href=\"https://docs.ruby-lang.org/en/2.0.0/Array.html#method-i-7C\" rel=\"nofollow noreferrer\">Array#|</a>)."}], "tags": [], "owner": {"reputation": 11435, "user_id": 6328256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyZe2.png?s=128&g=1", "display_name": "Sash Sinha", "link": "https://stackoverflow.com/users/6328256/sash-sinha"}, "is_accepted": false, "score": 3, "last_activity_date": 1493861150, "last_edit_date": 1493861150, "creation_date": 1493851901, "answer_id": 43771231, "question_id": 43771208, "link": "https://stackoverflow.com/questions/43771208/how-to-remove-duplicate-values-in-an-array-without-using-unique-method-in-ruby/43771231#43771231", "title": "How to remove duplicate values in an array without using unique method in Ruby?", "body": "<p>You could use the intersection or union:</p>\n\n<pre><code>arr = [1,2,46,5,8,2,8]\n# =&gt; [1,2,46,5,8,2,8]\nunique_arr = arr &amp; arr\n# =&gt; [1, 2, 46, 5, 8]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493854468, "post_id": 43771532, "comment_id": 74584565, "body": "<code>&#39;require set&#39;</code> also adds <code>Array#to_set</code> which is another nice way to convert an array to a set."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 3, "last_activity_date": 1493853968, "creation_date": 1493853968, "answer_id": 43771532, "question_id": 43771208, "link": "https://stackoverflow.com/questions/43771208/how-to-remove-duplicate-values-in-an-array-without-using-unique-method-in-ruby/43771532#43771532", "title": "How to remove duplicate values in an array without using unique method in Ruby?", "body": "<p>Another way is to convert to a Set which will remove the duplicates, then convert back to an array. First <code>require 'set'</code> (in the Standard Lib) then, either of these:</p>\n\n<pre><code>Set.new([1,2,3,3]).to_a\n# =&gt; [1, 2, 3]\n\n# Does the same thing without passing the array to the Set constructor\n[1,2,3,3].reduce(Set.new, &amp;:add).to_a\n# =&gt; [1, 2, 3]\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7949009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd91bfb3964a42b338d7689ce71e4b8?s=128&d=identicon&r=PG&f=1", "display_name": "Savneet Kaur", "link": "https://stackoverflow.com/users/7949009/savneet-kaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "closed_date": 1493883358, "answer_count": 2, "score": -2, "last_activity_date": 1493868244, "creation_date": 1493851765, "last_edit_date": 1493868244, "question_id": 43771208, "link": "https://stackoverflow.com/questions/43771208/how-to-remove-duplicate-values-in-an-array-without-using-unique-method-in-ruby", "closed_reason": "Needs details or clarity", "title": "How to remove duplicate values in an array without using unique method in Ruby?", "body": "<p>I have a program where values in an array are [1,2,46,5,8,2,8], now I want to remove duplicate values but without using unique method of Ruby. Can anyone help with the logic of doing it? I want to make a unique array.</p>\n\n<p>The code that I am using is may be not absolute to the question which is why I am getting the answer to first two situations but not the last one. Here is the code :</p>\n\n<pre><code> def uniq(array)\n    i=0\n    while i &lt; array.length\n        if array[i] == array[i+1]\n          puts \"\"\n        else\n        puts i\n        end\n        i += 1\n    end\n   end\n\n   uniq([5,5,5,5])\n   uniq([1])\n    uniq([1,2,46,5,8,2,8])\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1493848117, "post_id": 43770480, "comment_id": 74582532, "body": "<code>puts</code> will never execute in the first <code>if</code> condition"}, {"owner": {"reputation": 4318, "user_id": 2276081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/LMM6M.jpg?s=128&g=1", "display_name": "Thalatta", "link": "https://stackoverflow.com/users/2276081/thalatta"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 1, "creation_date": 1493848164, "post_id": 43770480, "comment_id": 74582552, "body": "@Ruslan true. but that is orthogonal to the question."}, {"owner": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 3, "creation_date": 1493848437, "post_id": 43770480, "comment_id": 74582653, "body": "elsif rather than elif?  I&#39;m not running this on a RubyVM, so I&#39;m not sure this makes a difference"}, {"owner": {"reputation": 4318, "user_id": 2276081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/LMM6M.jpg?s=128&g=1", "display_name": "Thalatta", "link": "https://stackoverflow.com/users/2276081/thalatta"}, "reply_to_user": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 0, "creation_date": 1493848765, "post_id": 43770480, "comment_id": 74582781, "body": "@MickeySheu yes!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1493849680, "post_id": 43770480, "comment_id": 74583128, "body": "If you&#39;re doing pathfinding, there&#39;s a number of algorithms that are proven to work and don&#39;t involve blowing your stack limit. I think this one you&#39;re using duplicates a lot of work, as well, it&#39;s very wasteful."}], "answers": [{"comments": [{"owner": {"reputation": 4318, "user_id": 2276081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/LMM6M.jpg?s=128&g=1", "display_name": "Thalatta", "link": "https://stackoverflow.com/users/2276081/thalatta"}, "edited": false, "score": 1, "creation_date": 1493939738, "post_id": 43773551, "comment_id": 74628963, "body": "Yes i was solving that problem. I remembered that there was a relation between that and Pascal&#39;s&#39; triangle and I ended up devising aO(n^2) solution, thank God!"}], "tags": [], "owner": {"reputation": 1489, "user_id": 7948068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b71dc87adc38b9813f2fc7db09aea190?s=128&d=identicon&r=PG&f=1", "display_name": "Kathryn", "link": "https://stackoverflow.com/users/7948068/kathryn"}, "is_accepted": true, "score": 3, "last_activity_date": 1506532516, "last_edit_date": 1506532516, "creation_date": 1493869653, "answer_id": 43773551, "question_id": 43770480, "link": "https://stackoverflow.com/questions/43770480/stack-level-too-deep-systemstackerror-when-recursing/43773551#43773551", "title": "stack level too deep (SystemStackError) when recursing", "body": "<p>Tail recursion  isn't relevant in this case. Since you call the method recursively several times, the compiler can't make that optimization. Most of those calls are unnecessary. I was able to rewrite your code to:</p>\n\n<pre><code>def recursively_count_paths(x, y, n)\n  return 0 if x &gt; n or y &gt; n\n  return 1 if x == n &amp;&amp;  y == n\n  return recursively_count_paths(x+1, y, n) + recursively_count_paths(x, y+1, n)\nend\n</code></pre>\n\n<p>The first line looks for paths that are out of bounds and doesn't count those. The second line is equivalent to your first <code>if</code> statement. It returns 1 if a path has been completed. The final line is the same as your final <code>return</code> statement and simply adds all the paths going north with all the paths going east. Since we call <code>recursively_count_paths</code> twice, tail-call optimization still won't help.</p>\n\n<p>If you run it using n=20, you might notice it takes awhile. This is because this algorithm takes exponentially longer as the size of the grid increases. That's because you count the same subpaths over and over again. It's also Project Euler <a href=\"https://projecteuler.net/problem=15\" rel=\"nofollow noreferrer\">Problem 15</a>, so I won't provide my solution here. I will give you a hint, however: save your work.</p>\n"}], "owner": {"reputation": 4318, "user_id": 2276081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/LMM6M.jpg?s=128&g=1", "display_name": "Thalatta", "link": "https://stackoverflow.com/users/2276081/thalatta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 43773551, "answer_count": 1, "score": 2, "last_activity_date": 1506532516, "creation_date": 1493847805, "question_id": 43770480, "link": "https://stackoverflow.com/questions/43770480/stack-level-too-deep-systemstackerror-when-recursing", "title": "stack level too deep (SystemStackError) when recursing", "body": "<p>I want to make this simple calculation but it complains that the the stack isn't deep enough even for very small numbers for <code>n</code> such as 4. Other SO posts for similar topics recommend tail recursion but that isn't applicable here since you only add to an accumlated value when you reach the base case.</p>\n\n<pre><code>RubyVM::InstructionSequence.compile_option = {\n:tailcall_optimization =&gt; true,\n:trace_instruction =&gt; false\n}\n\ndef recursively_count_paths(x , y, n)\n if x == n &amp;&amp;  y == n\n  return 1\n  puts \" we got a path people\"\n elif x == n\n  puts \"x is done\"\n  return recursively_count_paths(x, y + 1, n)\n elif y == n\n  puts \"y is done\"\n  return recursively_count_paths(x + 1, y, n)\n else\n return (recursively_count_paths(x + 1, y, n) + \nrecursively_count_paths(x, y + 1, n))\n end  \nend\n\nrecursively_count_paths(0, 0, 20)\n</code></pre>\n\n<p>am I not supposed to return in other cases?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 7959906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f29f5d8d0b03a722517b8a87d6e4486?s=128&d=identicon&r=PG&f=1", "display_name": "Guilherme Lages Santos", "link": "https://stackoverflow.com/users/7959906/guilherme-lages-santos"}, "edited": false, "score": 0, "creation_date": 1493908365, "post_id": 43770368, "comment_id": 74611963, "body": "No. There is no &quot;presence: true&quot; in the Customer model.  In the User model I have <b>validates :password, presence: true, on: :create</b>, but it&#39;s not working because it&#39;s called in the update also."}], "tags": [], "owner": {"reputation": 708, "user_id": 1384460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lZqUY.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1384460/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1493847258, "creation_date": 1493847258, "answer_id": 43770368, "question_id": 43770174, "link": "https://stackoverflow.com/questions/43770174/ruby-on-rails-nested-devise-form-validations/43770368#43770368", "title": "Ruby on Rails - Nested Devise form validations", "body": "<p>Check models/customer.rb and look at the \"validates\" line, check that the password is not \"presence: true\" which means that it is always required</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 8024742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c17c4540a05e910bd86eda51b0c5f01a?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Shrivastava", "link": "https://stackoverflow.com/users/8024742/ravi-shrivastava"}, "is_accepted": false, "score": 0, "last_activity_date": 1496828681, "last_edit_date": 1496828681, "creation_date": 1496823109, "answer_id": 44407083, "question_id": 43770174, "link": "https://stackoverflow.com/questions/43770174/ruby-on-rails-nested-devise-form-validations/44407083#44407083", "title": "Ruby on Rails - Nested Devise form validations", "body": "<p>In customer model you must have something like:</p>\n\n<pre><code>validates_associated :user\n</code></pre>\n\n<p>Try changing it to: </p>\n\n<pre><code>validates_associated :user,on: :create \n</code></pre>\n"}], "owner": {"reputation": 170, "user_id": 7959906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f29f5d8d0b03a722517b8a87d6e4486?s=128&d=identicon&r=PG&f=1", "display_name": "Guilherme Lages Santos", "link": "https://stackoverflow.com/users/7959906/guilherme-lages-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1496828681, "creation_date": 1493846291, "question_id": 43770174, "link": "https://stackoverflow.com/questions/43770174/ruby-on-rails-nested-devise-form-validations", "title": "Ruby on Rails - Nested Devise form validations", "body": "<p>guys!</p>\n\n<p>I have an Customer form with an nested User form (I'm using Devise) where you can add as many users you want.</p>\n\n<p>When I have to edit only the customer I don't know how to skip an user password validation (when I have a form with only 1 user I just use the method <strong>update_without_password</strong>).</p>\n\n<p>Do you guys have any clue?</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["ruby", "search", "directory", "subdirectory"], "comments": [{"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 1, "creation_date": 1493847081, "post_id": 43770139, "comment_id": 74582114, "body": "Do you have to do this in ruby? The command-line tool <code>egrep</code> could do this much easier via something like <code>egrep -r &quot;(api|function|method)&quot; *</code>..."}, {"owner": {"reputation": 23, "user_id": 6579546, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10154237718230242/picture?type=large", "display_name": "Hamel Desai", "link": "https://stackoverflow.com/users/6579546/hamel-desai"}, "reply_to_user": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1493847229, "post_id": 43770139, "comment_id": 74582165, "body": "Hey @Brian, yes unfortunately it has to be in ruby."}], "answers": [{"comments": [{"owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "edited": false, "score": 0, "creation_date": 1493849010, "post_id": 43770383, "comment_id": 74582874, "body": "I updated answer to escape the contents of words.txt"}, {"owner": {"reputation": 23, "user_id": 6579546, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10154237718230242/picture?type=large", "display_name": "Hamel Desai", "link": "https://stackoverflow.com/users/6579546/hamel-desai"}, "edited": false, "score": 0, "creation_date": 1493849182, "post_id": 43770383, "comment_id": 74582940, "body": "Hey so I got the same exact error.   `===&#39;: invalid byte sequence in UTF-8 (ArgumentError)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493849633, "post_id": 43770383, "comment_id": 74583117, "body": "<code>Regexp.quote(word.strip) }.join(&#39;|&#39;)</code> isn&#39;t a good idea as it can generate false-positive sub-string hits."}, {"owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "reply_to_user": {"reputation": 23, "user_id": 6579546, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10154237718230242/picture?type=large", "display_name": "Hamel Desai", "link": "https://stackoverflow.com/users/6579546/hamel-desai"}, "edited": false, "score": 0, "creation_date": 1493849978, "post_id": 43770383, "comment_id": 74583247, "body": "@Hamel Desai - I updated the answer to try to avoid searching binary files"}, {"owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "edited": false, "score": 0, "creation_date": 1493906321, "post_id": 43770383, "comment_id": 74610356, "body": "The error message suggests there&#39;s something in your files (either in source or words.txt) that have non-UTF-8 characters in them.  So, maybe try opening the files as something other than UTF-8.  So, <b>I updated my answer to open the files as <code>ascii</code>.</b>  Maybe that will help.  Then again, maybe it&#39;s words.txt that&#39;s non-UTF-8.  If you know the encoding of your files, maybe use that instead."}, {"owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "edited": false, "score": 0, "creation_date": 1493906863, "post_id": 43770383, "comment_id": 74610786, "body": "I would try using a divide and conquer approach to diagnose the cause of the error. Run the program on a <code>words.txt</code> file that contains only a couple simple words. And have only a file or two in the Source directory.  It should work.  Then try again with your original words.txt.  If it breaks, you know words.txt is contributing to the problem. Try again with half the words in words.txt.  Basically, do a binary search for the problem line in words.txt.  If the problem is not with words.txt, use the same strategy with the files in Source.  Eventually you should be able to isolate the problem."}], "tags": [], "owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "is_accepted": false, "score": 0, "last_activity_date": 1493906038, "last_edit_date": 1493906038, "creation_date": 1493847339, "answer_id": 43770383, "question_id": 43770139, "link": "https://stackoverflow.com/questions/43770139/how-to-check-for-multiple-words-inside-a-folder/43770383#43770383", "title": "How to check for multiple words inside a folder", "body": "<p><strong>Recursively searches directory for any of the words contained in <code>words.txt</code></strong></p>\n\n<pre><code>re = /#{File.readlines('words.txt').map { |word| Regexp.quote(word.strip) }.join('|')}/\n\nDir['Source/**/*.{cpp,txt,html}'].select{|f| File.file?(f) }.each do |filepath|\n  puts filepath\n  puts File.readlines(filepath, \"r:ascii\").grep(re).any?\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6579546, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10154237718230242/picture?type=large", "display_name": "Hamel Desai", "link": "https://stackoverflow.com/users/6579546/hamel-desai"}, "edited": false, "score": 0, "creation_date": 1493851113, "post_id": 43770856, "comment_id": 74583605, "body": "Hello, thank you for this amazing/helpful information I will come up with a better solution, but this def. helps!"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1494614893, "last_edit_date": 1495541881, "creation_date": 1493849582, "answer_id": 43770856, "question_id": 43770139, "link": "https://stackoverflow.com/questions/43770139/how-to-check-for-multiple-words-inside-a-folder/43770856#43770856", "title": "How to check for multiple words inside a folder", "body": "<p>Consider this:</p>\n\n<pre><code>File.readlines('words.txt').map do |word|\n  array_of_words &lt;&lt; word\nend\n</code></pre>\n\n<p>will read the entire file into memory, then convert it into individual elements in an array. You could accomplish the same thing using:</p>\n\n<pre><code>array_of_words = File.readlines('words.txt')\n</code></pre>\n\n<p>A potential problem is its not scalable. If \"words.txt\" is larger than the available memory your code will have problems so be careful.</p>\n\n<p>Searching a file for an array of words can be done a number of ways, but I've always found it easiest to use a regular expression. Perl has a great module called Regexp::Assemble that makes it easy to convert a list of words into a very efficient pattern, but Ruby is missing that sort of functionality. See \"<a href=\"https://stackoverflow.com/questions/5395236/is-there-an-efficient-way-to-perform-hundreds-of-text-substitutions-in-ruby/5395777#5395777\">Is there an efficient way to perform hundreds of text substitutions in Ruby?</a>\" for one solution I put together in the past to help with that.</p>\n\n<p>Ruby does have <code>Regexp.union</code> however it's only a partial help.</p>\n\n<pre><code>words = %w(foo bar)\nre = Regexp.union(words) # =&gt; /foo|bar/\n</code></pre>\n\n<p>The pattern generated has flags for the expression so you have to be careful with interpolating it into another pattern:</p>\n\n<pre><code>/#{re}/ # =&gt; /(?-mix:foo|bar)/\n</code></pre>\n\n<p><code>(?-mix:</code> will cause you problems so don't do that. Instead use:</p>\n\n<pre><code>/#{re.source}/ # =&gt; /foo|bar/\n</code></pre>\n\n<p>which will generate the pattern and behave like we expect. </p>\n\n<p>Unfortunately, that's not a complete solution either, because the words could be found as sub-strings in other words:</p>\n\n<pre><code>'foolish'[/#{re.source}/] # =&gt; \"foo\"\n</code></pre>\n\n<p>The way to work around that is to set word-boundaries around the pattern:</p>\n\n<pre><code>/\\b(?:#{re.source})\\b/ # =&gt; /\\b(?:foo|bar)\\b/\n</code></pre>\n\n<p>which then look for whole words:</p>\n\n<pre><code>'foolish'[/\\b(?:#{re.source})\\b/] # =&gt; nil\n</code></pre>\n\n<p>More information is available in Ruby's <a href=\"https://ruby-doc.org/core-2.4.1/Regexp.html\" rel=\"nofollow noreferrer\">Regexp</a> documentation.</p>\n\n<p>Once you have a pattern you want to use then it becomes a simpler matter to search. Ruby has the <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/find/rdoc/index.html\" rel=\"nofollow noreferrer\">Find</a> class, which makes it easy to recursively search directories for files. The documentation covers how to use it.</p>\n\n<p>Alternately, you can cobble your own method using the <a href=\"https://ruby-doc.org/core-2.4.1/Dir.html\" rel=\"nofollow noreferrer\">Dir</a> class. Again, it has examples in the documentation to use it, but I usually go with Find.</p>\n\n<p>When reading the files you're scanning I'd recommend using <code>foreach</code> to read the files line-by-line. <code>File.read</code> and <code>File.readlines</code> are <em>not</em> scalable and can make your program behave erratically as Ruby tries to read a big file into memory. Instead, <code>foreach</code> will result in very scalable code that runs more quickly. See \"<a href=\"https://stackoverflow.com/questions/25189262/why-is-slurping-a-file-not-a-good-practice/25189286?s=1|2.2795#25189286\">Why is &quot;slurping&quot; a file not a good practice?</a>\" for more information.</p>\n\n<p>Using the links above you should be able to put something together quickly that'll run efficiently and be flexible.</p>\n\n<hr>\n\n<p>This untested code should get you started:</p>\n\n<pre><code>WORD_ARRAY = File.readlines('words.txt').map(&amp;:chomp)\nWORD_RE = /\\b(?:#{Regexp.union(WORD_ARRAY).source}\\b)/\n\nDir['Source/**/*'].select{|f| File.file?(f) }.each do |filepath|\n  puts \"#{filepath}: #{!!File.read(filepath)[WORD_RE]}\"\nend\n</code></pre>\n\n<p>It will output the file it's reading, and \"true\" or \"false\" whether there is a hit finding one of the words in the list.</p>\n\n<p>It's not scalable because of <code>readlines</code> and <code>read</code> and could suffer serious slowdown if any of the files are huge. Again, see the caveats in the \"slurp\" link above. </p>\n"}], "owner": {"reputation": 23, "user_id": 6579546, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10154237718230242/picture?type=large", "display_name": "Hamel Desai", "link": "https://stackoverflow.com/users/6579546/hamel-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1494614893, "creation_date": 1493846114, "last_edit_date": 1493848045, "question_id": 43770139, "link": "https://stackoverflow.com/questions/43770139/how-to-check-for-multiple-words-inside-a-folder", "title": "How to check for multiple words inside a folder", "body": "<p>I have a words in a text file called <code>words.txt</code>, and I need to check if any of those words are in my Source folder, which also contains sub-folders and files. </p>\n\n<p>I was able to get all of the words into an array using this code: </p>\n\n<pre><code>array_of_words = [] \n\nFile.readlines('words.txt').map do |word|\n  array_of_words &lt;&lt; word\nend\n</code></pre>\n\n<p>And I also have (kinda) figured out how to search through the whole Source folder including the sub-folders and sub-files for a specific word using: </p>\n\n<pre><code>Dir['Source/**/*'].select{|f| File.file?(f) }.each do |filepath|\n  puts filepath\n  puts File.readlines(filepath).any?{ |l| l['api'] } \nend\n</code></pre>\n\n<p>Instead of searching for one word like <code>api</code>, I want to search the Source folder for the whole array of words (if that is possible). </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "heroku", "assets"], "comments": [{"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1493847146, "post_id": 43770079, "comment_id": 74582143, "body": "Are you using turbolinks?"}, {"owner": {"reputation": 71, "user_id": 5636380, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6a0930c8a07e8960323899060180800e?s=128&d=identicon&r=PG&f=1", "display_name": "Abdel", "link": "https://stackoverflow.com/users/5636380/abdel"}, "reply_to_user": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1493848297, "post_id": 43770079, "comment_id": 74582601, "body": "Yes, already used thanks"}, {"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1493904717, "post_id": 43770079, "comment_id": 74609026, "body": "Sorry, I should have been more clear with my question - if you&#39;re using turbolinks, can you try disabling it? It sounds like you&#39;ve got a caching problem, so it would be good to rule out turbolinks as a possible contributor to the problem."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 5636380, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6a0930c8a07e8960323899060180800e?s=128&d=identicon&r=PG&f=1", "display_name": "Abdel", "link": "https://stackoverflow.com/users/5636380/abdel"}, "is_accepted": true, "score": 0, "last_activity_date": 1494265825, "creation_date": 1494265825, "answer_id": 43854181, "question_id": 43770079, "link": "https://stackoverflow.com/questions/43770079/how-to-return-to-home-page-and-load-assets-using-the-browsers-previous-button/43854181#43854181", "title": "How to return to home page and load assets using the browser&#39;s &quot;previous&quot; button", "body": "<p>Edit, in fact it was a Turbolinks issue, resolved, many thanks</p>\n"}], "owner": {"reputation": 71, "user_id": 5636380, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6a0930c8a07e8960323899060180800e?s=128&d=identicon&r=PG&f=1", "display_name": "Abdel", "link": "https://stackoverflow.com/users/5636380/abdel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 43854181, "answer_count": 1, "score": 0, "last_activity_date": 1494265825, "creation_date": 1493845842, "last_edit_date": 1493846398, "question_id": 43770079, "link": "https://stackoverflow.com/questions/43770079/how-to-return-to-home-page-and-load-assets-using-the-browsers-previous-button", "title": "How to return to home page and load assets using the browser&#39;s &quot;previous&quot; button", "body": "<p>I recently deployed my Rails 4 web application on Heroku.</p>\n\n<p>I am facing an Assets issue: When I go to the homepage or click a link to go to another page, everything is ok, and all the required CSS and JS files load. The problem is when I click on the \u201cprevious page\u201d of the browser to return to the home page, the Assets do not load anymore, and the assets of the second page will be applied to the home page.</p>\n\n<p>I put the CSS and the JS files in the Public folder, and made a link in every page using:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"/style.css\"&gt;\n\n&lt;script src=\"/tablesaw.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sitemap"], "answers": [{"tags": [], "owner": {"reputation": 6569, "user_id": 371530, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UJz1r.jpg?s=128&g=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/371530/robin"}, "is_accepted": true, "score": 1, "last_activity_date": 1493965842, "creation_date": 1493965842, "answer_id": 43797990, "question_id": 43769981, "link": "https://stackoverflow.com/questions/43769981/how-to-add-lastmod-to-my-applications-sitemap/43797990#43797990", "title": "How to add lastmod to my application&#39;s sitemap", "body": "<p>According to the <a href=\"https://www.sitemaps.org/protocol.html\" rel=\"nofollow noreferrer\">sitemap.xml protocol specification</a>, the value should be formatted in the <a href=\"https://www.w3.org/TR/NOTE-datetime\" rel=\"nofollow noreferrer\">W3C Datetime format</a>, which is basically ISO 8601.</p>\n\n<blockquote>\n  <p>The date of last modification of the file. This date should be in W3C\n  Datetime format. This format allows you to omit the time portion, if\n  desired, and use YYYY-MM-DD.</p>\n</blockquote>\n\n<p>The ruby Datetime contains <a href=\"https://ruby-doc.org/stdlib-2.3.1/libdoc/date/rdoc/DateTime.html#method-i-iso8601\" rel=\"nofollow noreferrer\">methods</a> to get a ISO 8601 formatted output.</p>\n\n<p>So you can do something like <code>xml.lastmod event.updated_at.xmlschema</code>.</p>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 43797990, "answer_count": 1, "score": 0, "last_activity_date": 1493965842, "creation_date": 1493845413, "last_edit_date": 1493846091, "question_id": 43769981, "link": "https://stackoverflow.com/questions/43769981/how-to-add-lastmod-to-my-applications-sitemap", "title": "How to add lastmod to my application&#39;s sitemap", "body": "<p>I would like to add <code>lastmod</code> to my sitemap but I can't find a good example of how it should be formatted. </p>\n\n<p>Here is what I'm current working with:</p>\n\n<p>Controller:</p>\n\n<pre><code>class SitemapsController &lt; ApplicationController\n  def show\n    @events = Event.where(block_search_engines: false, status: 1)\n  end\nend\n</code></pre>\n\n<p>Show builder:</p>\n\n<pre><code>  xml.instruct!\n  xml.urlset \"xmlns\" =&gt; \"http://www.sitemaps.org/schemas/sitemap/0.9\" do\n\n  @events.each do |event|\n    xml.url do\n      xml.loc present_url(event.slug)\n      xml.priority 1.0\n    end\n  end\nend\n</code></pre>\n\n<p>How would I implement it in this code? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1493845530, "post_id": 43769924, "comment_id": 74581426, "body": "so putting first the non sorting query (where(&#39;deal_..... Time.zone.now).where(is_cool: true)) would not be faster? I thought that because it would output a limited/smaller number of lines then the sorting query (order(deal_end_date: :asc) as a second step would be faster than sorting the whole database lines...  you&#39;re saying that in fact in the resulting sql, it&#39;s automatically optimized for this by active record?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1493845607, "post_id": 43769924, "comment_id": 74581473, "body": "@Mathieu That isn&#39;t at all how that works. <code>.order(foo).where(bar)</code> and <code>.where(foo).order(bar)</code> will do the <b>exact same thing</b>. They will produce the <i>same</i> SQL and the <i>same</i> records. The ordering/filtering is done in by the database, not by Ruby. Neither <code>order</code> or <code>where</code> happens &quot;first&quot;; Rails takes all of them (no matter what order you called them in) and turns them into <b>one</b> SQL query."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1493845642, "post_id": 43769924, "comment_id": 74581492, "body": "ok i see, will check .to_sql in doubt:). thanks a lot for pointing me in the right direction"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 3, "last_activity_date": 1493845905, "last_edit_date": 1493845905, "creation_date": 1493845188, "answer_id": 43769924, "question_id": 43769888, "link": "https://stackoverflow.com/questions/43769888/commutability-and-order-of-active-record-scopes/43769924#43769924", "title": "Commutability and order of active record scopes", "body": "<p>It doesn't matter. Your scopes aren't actually evaluated until the point in time when you try to read the results. <code>order</code> and <code>where</code> clauses can be appended to your relation in any order, as they get placed in the same place in the final SQL query.</p>\n\n<p>When in doubt, try both ways and invoke <code>.to_sql</code> on your scopes. You'll find that <code>scope1.to_sql</code> is identical to <code>scope2.to_sql</code>.</p>\n\n<p>Given a simple <code>Post</code> model, you'll find that <code>Post.order(:name).where(active: true)</code> and <code>Post.where(active: true).order(:name)</code> product <strong>identical</strong> SQL:</p>\n\n<pre><code>select * from posts where active = true order by name\n</code></pre>\n\n<p>Neither the <code>order</code> or the <code>where</code> happen \"first\", that's impossible. There is only one SQL query generated, and the all its various clauses (where, order, limit, offset etc) go where they need to go to produce a syntactically valid query.</p>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 43769924, "answer_count": 1, "score": 2, "last_activity_date": 1493845905, "creation_date": 1493845011, "question_id": 43769888, "link": "https://stackoverflow.com/questions/43769888/commutability-and-order-of-active-record-scopes", "title": "Commutability and order of active record scopes", "body": "<p>Is the place of the \"sorting\" \"filters\" (Desc or Asc) inside a Rails' Active Record query important in terms of performance and logic ?</p>\n\n<p>For example is the following scope 1 the sam as scope 2</p>\n\n<p><strong>SCOPE 1</strong></p>\n\n<pre><code>scope :default_stream, -&gt; { order(deal_end_date: :asc) } # this is the \"sorting query\"\nscope :scope_1,\n      lambda { default_stream.where('deal_start_date &lt;= ? AND deal_end_date &gt;= ?', Time.zone.now, Time.zone.now).where(is_cool: true) }\n</code></pre>\n\n<p><strong>SCOPE 2</strong></p>\n\n<pre><code>scope :scope_2,\n      lambda { Deal.all.where('deal_start_date &lt;= ? AND deal_end_date &gt;= ?', Time.zone.now, Time.zone.now).where(is_cool: true).order(deal_end_date: :asc) }\n</code></pre>\n\n<p>Should I first use the \"sorting query\" then the other filters (scope1) or the opposite (scope2) ?</p>\n\n<p>Not sure if it has an impact, but let me that the number of deals can be very important (>100000)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1493847001, "post_id": 43769074, "comment_id": 74582085, "body": "Don&#39;t use an image for information like errors, data or code. Links can rot and break, removing information essential to the question. Also, we can&#39;t reuse the information; Often we search for parts of the error, and that forces us to type it in rather than copy/paste. Also the search engines can&#39;t index images, making it harder for others to find your question when searching for help with the same problem. Remember, SO isn&#39;t as much about answering helping you as it is about helping those in the future with the same question."}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493861244, "post_id": 43769074, "comment_id": 74585948, "body": "Great points, I&#39;ll make sure to do that going forward @theTinMan"}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1493842753, "post_id": 43769167, "comment_id": 74579957, "body": "that capital &quot;S&quot; is the thing that is throwing it off?"}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1493842900, "post_id": 43769167, "comment_id": 74580036, "body": "Wow! Thank you so much @uDay!!"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "reply_to_user": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1493842964, "post_id": 43769167, "comment_id": 74580064, "body": "Glad it helped you! mark it as answer if its fixed. :)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493847386, "post_id": 43769167, "comment_id": 74582220, "body": "Rather than prompt the OP to accept your answer, it&#39;s considered better form to wait a couple days to see if the OP has selected an answer. If not, put a link to <a href=\"http://stackoverflow.com/help/accepted-answer\">stackoverflow.com/help/accepted-answer</a> as a comment to the original question. SO is a world-wide site and it takes a little while for all the users to see a question and respond, with potentially better answers. See <a href=\"https://meta.stackoverflow.com/a/271815/128421\">meta.stackoverflow.com/a/271815/128421</a> and <a href=\"https://meta.stackoverflow.com/q/251288/128421\">meta.stackoverflow.com/q/251288/128421</a>."}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 1, "creation_date": 1493847544, "post_id": 43769167, "comment_id": 74582291, "body": "I just said that coz answerers can move on to next question. I have seen this practice so thought of doing it too.."}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1493847724, "post_id": 43769167, "comment_id": 74582379, "body": "@theTinMan though I didn&#39;t force the OP to accept it. I just suggested if it has solved his problem/criteria ;)"}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1493910612, "post_id": 43769167, "comment_id": 74613748, "body": "@uDaY quick question some thing i noticed in my rails console was that my highschools_id: nil even though on the front end it looks nice, do you have any idea why that might be the case?"}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1493911610, "post_id": 43769167, "comment_id": 74614486, "body": "Never mind figured it - i forgot to include it in my application controller :)"}], "tags": [], "owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "is_accepted": true, "score": 2, "last_activity_date": 1493842409, "creation_date": 1493842409, "answer_id": 43769167, "question_id": 43769074, "link": "https://stackoverflow.com/questions/43769074/rails-seed-migrate-is-being-stopped-with-an-error-activemodelunknownattributee/43769167#43769167", "title": "Rails seed migrate is being stopped with an error ActiveModel::UnknownAttributeError", "body": "<p>Theres a typo:</p>\n\n<pre><code>special = Highschool.create!(secondaryschool: \"Stuyvesant High School\")\nspecial2 = Highschool.create!(secondaryschool: \"Brooklyn Tech\")\nspecial3 = Highschool.create!(secondaryschool: \"Bronx Science\")\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 43769167, "answer_count": 1, "score": 0, "last_activity_date": 1493846852, "creation_date": 1493842018, "last_edit_date": 1493846852, "question_id": 43769074, "link": "https://stackoverflow.com/questions/43769074/rails-seed-migrate-is-being-stopped-with-an-error-activemodelunknownattributee", "title": "Rails seed migrate is being stopped with an error ActiveModel::UnknownAttributeError", "body": "<p>I've been trying to do <code>rake db:seed</code> which normally works for me but now is failing. </p>\n\n<p>Here is the error and the code.</p>\n\n<p>My error logs:\n<a href=\"https://i.stack.imgur.com/ij50Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ij50Z.png\" alt=\"enter image description here\"></a></p>\n\n<p>User.rb:</p>\n\n<pre><code>class User &lt; ApplicationRecord  \ncattr_accessor :current_user        \nbelongs_to :highschool, optional: true\nend\n</code></pre>\n\n<p>High school migration:</p>\n\n<pre><code>class CreateHighschools &lt; ActiveRecord::Migration[5.0]\ndef change\ncreate_table :highschools do |t|\n  t.string :secondaryschool\n\n  t.timestamps\nend\nend\nend\n</code></pre>\n\n<p>High School migration reference to User:</p>\n\n<pre><code>class AddHighschoolRefToUsers &lt; ActiveRecord::Migration[5.0]\ndef change\nadd_reference :users, :highschools, foreign_key: true\nend\nend\n</code></pre>\n\n<p>Highschool.rb:</p>\n\n<pre><code>class Highschool &lt; ApplicationRecord\nhas_many :users\nend\n</code></pre>\n\n<p>Highschools_controller.rb:</p>\n\n<pre><code>class HighschoolsController &lt; ApplicationController\nbefore_action :authenticate_user!, only: [:new, :create]\ndef create\n   @highschool = Highschool.new(highschool_params)\n   if @highschool.save\n  render json: @highschool\nelse\n  render json: {errors: @highschool.errors.full_messages}\nend\nend\nprivate\n  def highschool_params\nparams.require(:highschool).permit(:secondaryschool)\nend\nend\n</code></pre>\n\n<p>Schema.rb:</p>\n\n<pre><code> create_table \"highschools\", force: :cascade do |t|\nt.string   \"secondaryschool\"\nt.datetime \"created_at\",      null: false\nt.datetime \"updated_at\",      null: false\n  end\n</code></pre>\n\n<p>Seeds.rb:</p>\n\n<pre><code>Highschool.destroy_all\nspecial = Highschool.create!(Secondaryschool: \"Stuyvesant High School\")\nspecial2 = Highschool.create!(Secondaryschool: \"Brooklyn Tech\")\nspecial3 = Highschool.create!(Secondaryschool: \"Bronx Science\")\n</code></pre>\n"}, {"tags": ["ruby", "array-algorithms"], "comments": [{"owner": {"reputation": 766, "user_id": 3154489, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002062380392/picture?type=large", "display_name": "Qrchack", "link": "https://stackoverflow.com/users/3154489/qrchack"}, "edited": false, "score": 0, "creation_date": 1493841332, "post_id": 43768826, "comment_id": 74579185, "body": "Not a Ruby programmer, but it&#39;s complaining about you trying to use a String as an Integer and the fact it doesn&#39;t want to do so without you knowing. Have a look at to_i: <a href=\"https://apidock.com/ruby/String/to_i\" rel=\"nofollow noreferrer\">apidock.com/ruby/String/to_i</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1493843194, "post_id": 43768826, "comment_id": 74580192, "body": "When providing information on exceptions please include the line of code that raised it."}], "answers": [{"tags": [], "owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "is_accepted": false, "score": 1, "last_activity_date": 1493841291, "creation_date": 1493841291, "answer_id": 43768876, "question_id": 43768826, "link": "https://stackoverflow.com/questions/43768826/no-implicit-conversion-of-string-into-integer-typeerror/43768876#43768876", "title": "`[]&#39;: no implicit conversion of String into Integer (TypeError)", "body": "<p>This line seems suspicious:</p>\n\n<pre><code>if colored_mana_hand.include?(colored_mana_cost_aggregate[i])\n</code></pre>\n\n<p>In this context, <code>i</code> is an element of <code>colored_mana_cost_aggregate</code> (from the <code>each</code> iterator on the line before) and you're trying to use it as an array index.</p>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 4, "last_activity_date": 1493843281, "last_edit_date": 1493843281, "creation_date": 1493841854, "answer_id": 43769025, "question_id": 43768826, "link": "https://stackoverflow.com/questions/43768826/no-implicit-conversion-of-string-into-integer-typeerror/43769025#43769025", "title": "`[]&#39;: no implicit conversion of String into Integer (TypeError)", "body": "<p>As Brian says, you're misinterpreting how the <code>each</code> works with the block parameter</p>\n\n<p>Instead of </p>\n\n<pre><code>hand_array.each do |i|\n  if hand_array[i].to_i != 0                       \n    colorless_mana_hand += hand_array[i].to_i\n  else\n    colored_mana_hand &lt;&lt; hand_array[i]\n  end\nend\n</code></pre>\n\n<p>You just reference the element</p>\n\n<pre><code>hand_array.each do |hand|\n  if hand.to_i != 0                       \n    colorless_mana_hand += hand.to_i\n  else\n    colored_mana_hand &lt;&lt; hand\n  end\nend\n</code></pre>\n\n<p>If you actually want the index of the array, you can use <code>each_with_index</code></p>\n\n<pre><code>hand_array.each_with_index do |_hand, i|\n  if hand_array[i].to_i != 0                       \n    colorless_mana_hand += hand_array[i].to_i\n  else\n    colored_mana_hand &lt;&lt; hand_array[i]\n  end\nend\n</code></pre>\n\n<p>or just use a range of index values</p>\n\n<pre><code>(0...hand_array.count).each do |i|\n  if hand_array[i].to_i != 0                       \n    colorless_mana_hand += hand_array[i].to_i\n  else\n    colored_mana_hand &lt;&lt; hand_array[i]\n  end\nend\n</code></pre>\n\n<p>As to exactly what the error means... if the hand_array contains strings such as \"7\" then <code>i</code> contains \"7\" and you're trying to access hand_array[\"7\"] ... in other words trying to access an array element using a string instead of an integer.  And Ruby won't automatically (implicitly) convert a string into an integer for an array index.</p>\n"}], "owner": {"reputation": 217, "user_id": 4024427, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eeeba2d2482f856960056afbf14f8fca?s=128&d=identicon&r=PG&f=1", "display_name": "Clyde Brown", "link": "https://stackoverflow.com/users/4024427/clyde-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8361, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1493843281, "creation_date": 1493841116, "question_id": 43768826, "link": "https://stackoverflow.com/questions/43768826/no-implicit-conversion-of-string-into-integer-typeerror", "title": "`[]&#39;: no implicit conversion of String into Integer (TypeError)", "body": "<p>I seem to be getting a type error in the following code:</p>\n\n<pre><code>    def can_cast(hand, *spell_cost)\n      colored_mana_hand = Array.new\n      colored_mana_cost_aggregate = Array.new\n      colored_mana_spent = Array.new\n      colorless_mana_hand = 0\n      colorless_mana_cost_aggregate = 0\n\n      hand_array = hand.split(\"\").sort\n      total_cost = spell_cost.join.split(\"\").sort   \n\n      hand_array.each do |i|\n      if hand_array[i].to_i != 0                       \n        colorless_mana_hand += hand_array[i].to_i\n      else\n        colored_mana_hand &lt;&lt; hand_array[i]\n      end\n    end\n\n    total_cost.each do |i|                 \n      if total_cost[i].to_i != 0                  \n        colorless_mana_cost_aggregate += total_cost[i].to_i\n      else\n        colored_mana_cost_aggregate &lt;&lt; total_cost[i]\n      end\n    end\n\ncolored_mana_cost_aggregate.each do |i|                                                \n  if colored_mana_hand.include?(colored_mana_cost_aggregate[i])\n     colored_mana_spent &lt;&lt; colored_mana_cost_aggregate[i]           \ncolored_mana_hand.rotate(colored_mana_hand.index(colored_mana_cost_aggregate[i])).shift\n  end\nend\n\n   colored_mana_spent == colored_mana_cost_aggregate &amp;&amp; (colored_mana_hand.length + colorless_mana_hand) &gt;= colorless_mana_cost_aggregate \n   end\n</code></pre>\n\n<p>It looks like this </p>\n\n<pre><code>   `[]': no implicit conversion of String into Integer (TypeError)\n</code></pre>\n\n<p>Could Anyone help me?</p>\n\n<p>I think I'm using an array as an integer, but I can't see where that might be possible. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "erb"], "answers": [{"comments": [{"owner": {"reputation": 1504, "user_id": 321392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e22bb4cb5c98b91159580fae3f77138?s=128&d=identicon&r=PG", "display_name": "Pavel S", "link": "https://stackoverflow.com/users/321392/pavel-s"}, "edited": false, "score": 0, "creation_date": 1493840808, "post_id": 43768680, "comment_id": 74578895, "body": "this will be N+1"}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1493840980, "post_id": 43768680, "comment_id": 74578986, "body": "<code>@posts = Post.preload(:user).all</code>"}], "tags": [], "owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "is_accepted": false, "score": 1, "last_activity_date": 1493840586, "creation_date": 1493840586, "answer_id": 43768680, "question_id": 43768639, "link": "https://stackoverflow.com/questions/43768639/referencing-fields-that-belong-to-another-model-class-in-rails/43768680#43768680", "title": "referencing fields that belong to another model class in rails", "body": "<p>You can just reach through your model to get the associated model: </p>\n\n<pre><code>&lt;%= post.user.email %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 2, "last_activity_date": 1493841202, "creation_date": 1493841202, "answer_id": 43768847, "question_id": 43768639, "link": "https://stackoverflow.com/questions/43768639/referencing-fields-that-belong-to-another-model-class-in-rails/43768847#43768847", "title": "referencing fields that belong to another model class in rails", "body": "<p>In your controller:</p>\n\n<pre><code>@posts = Post.includes(:user).all\n</code></pre>\n\n<p>In the view:</p>\n\n<pre><code>post.user.email\n</code></pre>\n\n<p>Recommendation:\nUse pagination as fetching all records at once is not feasible and scalable in the long run.</p>\n"}], "owner": {"reputation": 147, "user_id": 5284687, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ywNuy.jpg?s=128&g=1", "display_name": "Joseph Bourne", "link": "https://stackoverflow.com/users/5284687/joseph-bourne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "accepted_answer_id": 43768847, "answer_count": 2, "score": 1, "last_activity_date": 1493841202, "creation_date": 1493840428, "question_id": 43768639, "link": "https://stackoverflow.com/questions/43768639/referencing-fields-that-belong-to-another-model-class-in-rails", "title": "referencing fields that belong to another model class in rails", "body": "<p>I'am using devise and set the name of my model to User. When i created post model i entered the following:</p>\n\n<pre><code> rails g model Post title body:text user:references\n</code></pre>\n\n<p>on the index page for the post partial views I can see the id number for all users whenever user makes post with following code:</p>\n\n<pre><code>&lt;div class=\"container-fluid\"&gt;\n&lt;% @posts.each do |post| %&gt;\n&lt;div class=\"row\"&gt;\n&lt;div class=\"jumbotron\"&gt;\n      &lt;div class=\"page-header\"&gt;\n        &lt;h1&gt;&lt;%= post.title %&gt; &lt;small&gt;by: \n       &lt;%= post.user_id %&gt;&lt;/small&gt;&lt;/h1&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n  \n\n<p>the @posts variable in my post controller class is:</p>\n\n<pre><code>@posts = Post.all\n</code></pre>\n\n<p>basically what I'am trying to do is get user email. </p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "reply_to_user": {"reputation": 1139, "user_id": 4468463, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mFyjG.jpg?s=128&g=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/4468463/liz"}, "edited": false, "score": 0, "creation_date": 1493840031, "post_id": 43768501, "comment_id": 74578519, "body": "In your code that you posted, you are going through an array of image URLs, passing each of them to <code>image_tag</code>, here I just take the first URL and pass it to <code>image_tag</code>"}, {"owner": {"reputation": 1139, "user_id": 4468463, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mFyjG.jpg?s=128&g=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/4468463/liz"}, "edited": false, "score": 0, "creation_date": 1493840075, "post_id": 43768501, "comment_id": 74578538, "body": "Yes, I see that, I just don&#39;t see why that works if changing <code>each</code> to <code>first</code> in the original code didn&#39;t.  Either way, thank you for the fix."}, {"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "reply_to_user": {"reputation": 1139, "user_id": 4468463, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mFyjG.jpg?s=128&g=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/4468463/liz"}, "edited": false, "score": 0, "creation_date": 1493840181, "post_id": 43768501, "comment_id": 74578579, "body": "Because <code>.first</code> returns a string, while <code>.each</code> returns an <code>Enumerator</code> that you can pass a block to"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1139, "user_id": 4468463, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mFyjG.jpg?s=128&g=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/4468463/liz"}, "edited": false, "score": 1, "creation_date": 1493840187, "post_id": 43768501, "comment_id": 74578583, "body": "@Liz because <code>first</code> does not take a block as an argument and your block is just discarded, because it&#39;s never used."}], "tags": [], "owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "is_accepted": true, "score": 1, "last_activity_date": 1493839871, "creation_date": 1493839871, "answer_id": 43768501, "question_id": 43768473, "link": "https://stackoverflow.com/questions/43768473/printing-first-photo-in-array-with-ruby-erb/43768501#43768501", "title": "Printing First Photo in Array with Ruby/ERB", "body": "<pre><code>&lt;%= image_tag listing.listing_property_details.images.first, class: \"fancy-border\" %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1139, "user_id": 4468463, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mFyjG.jpg?s=128&g=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/4468463/liz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 43768501, "answer_count": 1, "score": 0, "last_activity_date": 1493839871, "creation_date": 1493839783, "last_edit_date": 1495542859, "question_id": 43768473, "link": "https://stackoverflow.com/questions/43768473/printing-first-photo-in-array-with-ruby-erb", "title": "Printing First Photo in Array with Ruby/ERB", "body": "<p>I'm trying to show just the first photo in an array, but for some reason it's not behaving as I expect it to.  I consulted <a href=\"https://stackoverflow.com/questions/23588205/show-first-record-in-array-on-index-html-erb\">this SO post</a>, but something isn't working.  When I put:</p>\n\n<pre><code>&lt;% listing.listing_property_details.images.each do |image_url| %&gt;\n     &lt;%= image_tag image_url, class: \"fancy-border\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>It displays five images (the entire array).  However, when I change <code>each</code> to <code>first</code> (as was recommended in the consulted SO posts) all the images disappear.  What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pusher"], "answers": [{"tags": [], "owner": {"reputation": 1582, "user_id": 1115117, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0ce67ee0c177c92f77933234ccf7db95?s=128&d=identicon&r=PG", "display_name": "ascherman", "link": "https://stackoverflow.com/users/1115117/ascherman"}, "is_accepted": true, "score": 0, "last_activity_date": 1493841163, "creation_date": 1493841163, "answer_id": 43768840, "question_id": 43768336, "link": "https://stackoverflow.com/questions/43768336/slanger-eventmachine-port-exception/43768840#43768840", "title": "Slanger: Eventmachine port exception", "body": "<p>Finally I saw that the port 8080 was being used by Nginx.\nStopped nginx and I got it working fine.</p>\n\n<blockquote>\n  <p>nginx -s stop</p>\n</blockquote>\n"}], "owner": {"reputation": 1582, "user_id": 1115117, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/0ce67ee0c177c92f77933234ccf7db95?s=128&d=identicon&r=PG", "display_name": "ascherman", "link": "https://stackoverflow.com/users/1115117/ascherman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 43768840, "answer_count": 1, "score": 0, "last_activity_date": 1493841163, "creation_date": 1493839297, "question_id": 43768336, "link": "https://stackoverflow.com/questions/43768336/slanger-eventmachine-port-exception", "title": "Slanger: Eventmachine port exception", "body": "<p>I've installed <code>slanger</code> (and <code>redis</code>) for a rails project. Every rails instance is off.</p>\n\n<p>I run <code>redis-server</code> and it works properly. But then I run:</p>\n\n<p><code>\nslanger --app_key MyPusherApiKey --secret MyPusherSecret\n</code></p>\n\n<p>and it raises the next exception:</p>\n\n<blockquote>\n  <p>my-directory/rubies/ruby-2.2.3/lib/ruby/gems/2.2.0/gems/eventmachine-1.0.9.1/lib/eventmachine.rb:534:in `start_tcp_server': no acceptor (port is in use or requires root privileges) (RuntimeError)</p>\n</blockquote>\n\n<pre><code>from my-directory/rubies/ruby-2.2.3/lib/ruby/gems/2.2.0/gems/eventmachine-1.0.9.1/lib/eventmachine.rb:534:in `start_server'\nfrom my-directory/rubies/ruby-2.2.3/lib/ruby/gems/2.2.0/gems/em-websocket-0.5.1/lib/em-websocket/websocket.rb:46:in `run'\nfrom my-directory/.rvm/rubies/ruby-2.2.3/lib/ruby/gems/2.2.0/gems/em-websocket-0.5.1/lib/em-websocket/websocket.rb:39:in `block in start'\nfrom my-directory/.rvm/rubies/ruby-2.2.3/lib/ruby/gems/2.2.0/gems/eventmachine-1.0.9.1/lib/eventmachine.rb:170:in `call'\nfrom my-directory/.rvm/rubies/ruby-2.2.3/lib/ruby/gems/2.2.0/gems/eventmachine-1.0.9.1/lib/eventmachine.rb:170:in `run'\n</code></pre>\n\n<p>I thought that if the port was in use, I could just change it like this:</p>\n\n<p><code>\nslanger --app_key MyPusherApiKey --secret MyPusherSecret -a 0.0.0.0:3646\n</code></p>\n\n<p>But I still get the same error. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "is_accepted": false, "score": 1, "last_activity_date": 1493841155, "creation_date": 1493841155, "answer_id": 43768838, "question_id": 43768211, "link": "https://stackoverflow.com/questions/43768211/how-can-i-pass-rails-helper-methods-to-a-view-using-actionviewbase/43768838#43768838", "title": "How can I pass rails helper methods to a view using ActionView::Base?", "body": "<p>You can use <code>send</code> to include the helpers you need</p>\n\n<pre><code>action_view = ActionView::Base.new(ActionController::Base.view_paths, {})\naction_view.class.send(:include, ApplicationHelper)\naction_view.render(file: \"example/path\", locals: { foo: 1, bar: \"hello world\" })\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 3985721, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/9bee4235ea6f190c87d8162dfcc75009?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Hadik", "link": "https://stackoverflow.com/users/3985721/josh-hadik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1493841155, "creation_date": 1493838772, "last_edit_date": 1493839189, "question_id": 43768211, "link": "https://stackoverflow.com/questions/43768211/how-can-i-pass-rails-helper-methods-to-a-view-using-actionviewbase", "title": "How can I pass rails helper methods to a view using ActionView::Base?", "body": "<p>I am using ActionView::Base to render views in my current rails project, instead of ApplicationController. So far this has gone smoothly, but now I need a way to access helper methods from views rendered in this fashion. The exact code I am using to render views looks like this: </p>\n\n<pre><code>action_view = ActionView::Base.new(ActionController::Base.view_paths, {})\naction_view.render(file: \"example/path\", locals: { foo: 1, bar: \"hello world\" })\n</code></pre>\n\n<p>Is there any way to pass custom helper methods from the helpers folder to a view being rendered in this fashion?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "encoding", "binary", "ms-office"], "comments": [{"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 0, "creation_date": 1493838590, "post_id": 43768031, "comment_id": 74577778, "body": "Given your requirements, It seems like you&#39;re gonna have to do some analysis of the content. I&#39;d pull the top n bytes and check them against your standard ASCII codes. If many of the characters you encounter aren&#39;t ASCII, it&#39;s likely that your content is binary. Seems like a chi-squared test may be a good fit. Why can&#39;t you get access to the actual file object?"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 0, "creation_date": 1493843091, "post_id": 43768031, "comment_id": 74580122, "body": "I&#39;m accessing the content from a database in which there is no additional information about the file.  Sometimes there is a file name, but extensions are unreliable for determining file/content type."}, {"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 0, "creation_date": 1493843457, "post_id": 43768031, "comment_id": 74580339, "body": "Wait, the content of the file is in the DB?"}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1493844034, "post_id": 43768031, "comment_id": 74580624, "body": "I your real question is not about binary data per se but about determining the file type of the data, I&#39;d recommend to have a look at the <a href=\"http://stackoverflow.com/a/901660/1544012\">ruby-filemagic gem</a> which will give you this information much more reliably."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1493844358, "post_id": 43768031, "comment_id": 74580792, "body": "@BoraMa, are you saying I need to write the file content to a file, then feed the file path into FileMagic, and it will tell me what type of file I have?"}, {"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 1, "creation_date": 1493847267, "post_id": 43768031, "comment_id": 74582180, "body": "@Dave According to the gem&#39;s documentation at <a href=\"https://github.com/blackwinter/ruby-filemagic\" rel=\"nofollow noreferrer\">github.com/blackwinter/ruby-filemagic</a> it can work with a buffer, so you wouldn&#39;t need to write anything to a file. Just read the first N bytes into memory and pass it to the gem."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1493847495, "post_id": 43768031, "comment_id": 74582265, "body": "But does this gem work with Rails 5?  I&#39;m getting a &quot;Gem::Ext::BuildError: ERROR: Failed to build gem native extension&quot; when I try and install it."}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1493872062, "post_id": 43768031, "comment_id": 74588695, "body": "I adopted my recommendation into an answer."}], "answers": [{"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1493907147, "post_id": 43773887, "comment_id": 74611005, "body": "Hmmm, I&#39;m still getting a build error when I try and install this gem -- &quot;checking for -lgnurx... no, *** ERROR: missing required library to compile this module&quot;.  I will have to research that and then come back and try your suggestion."}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1493908113, "post_id": 43773887, "comment_id": 74611780, "body": "What system are you trying this on? If you get stuck, can you post the full log with the error messages?"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1493909983, "post_id": 43773887, "comment_id": 74613221, "body": "I hadn&#39;t run &quot;brew install libmagic&quot; per your suggestion.  Running that does allow everything to install.  One question I coudln&#39;t figure out from teh docs -- does &quot;buffer&quot; always print out file types in a consistent way?  That is, do Excel docs always output &quot;Microsoft Excel&quot; and PDF docs always print out the word &quot;PDF&quot; ?"}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1493926193, "post_id": 43773887, "comment_id": 74623165, "body": "Good! Regarding your question, there isof course no absolute certainity, but I&#39;d expect the output to be very consistent. The <code>file</code> utility with the associated <code>magic</code> library have been around for many many years and there is no reason that the authors would change its behavior. Take a look at the <a href=\"https://github.com/threatstack/libmagic/tree/master/magic/Magdir\" rel=\"nofollow noreferrer\">sources</a> for all the format variants that the library currently recognizes."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1494952622, "post_id": 43773887, "comment_id": 75042306, "body": "Heya, I started a bounty on this one only because I can see no consistency in the way file types are printed out by this gem.  I&#39;m getting too much variation to feel comfortable using the solution."}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1494961646, "post_id": 43773887, "comment_id": 75047432, "body": "Out of curiosity, can you give an example of the variation?"}, {"owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 0, "creation_date": 1495038297, "post_id": 43773887, "comment_id": 75086911, "body": "look at the source of the gem then, if you do you&#39;ll see it&#39;s basically just a wrapper around what your system is identifying. So your problem is with the system utilities that identify the <a href=\"https://blog.netspi.com/magic-bytes-identifying-common-file-formats-at-a-glance/\" rel=\"nofollow noreferrer\">Magic Byte</a> of the file and not the gem itself. Basically, you&#39;ve stumbled on one of the dark magic areas of computing, i.e. it&#39;s hard to determine file type accurately."}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "reply_to_user": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 0, "creation_date": 1495047247, "post_id": 43773887, "comment_id": 75091918, "body": "@engineerDave yeah, that&#39;s why I recommended to look at the library sources above. There are hundreds of formats and their variants recognized by the library. If you need to support only a few of them then it would make sense to use such library, if you need something more general (like &quot;all binary formats&quot;) then you&#39;d indeed need to use something else."}], "tags": [], "owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "is_accepted": false, "score": 4, "last_activity_date": 1493874232, "last_edit_date": 1493874232, "creation_date": 1493872027, "answer_id": 43773887, "question_id": 43768031, "link": "https://stackoverflow.com/questions/43768031/is-there-a-way-to-check-if-a-ruby-variable-contains-binary-data/43773887#43773887", "title": "Is there a way to check if a Ruby variable contains binary data?", "body": "<p>If your real question is not about binary data per se but about <strong>determining the file type of the data</strong>, I'd recommend to have a look at the <a href=\"https://github.com/blackwinter/ruby-filemagic\" rel=\"noreferrer\">ruby-filemagic gem</a> which will give you this information much more reliably. The gem is a simple wrapper around the libmagic library which is standard on unix-like systems. The library works by scanning the content of a file and matching it against a set of known \"magic\" patterns in various file types.</p>\n\n<p>Sample usage for a string buffer (e.g. data read form the database):</p>\n\n<pre><code>require \"ruby-filemagic\"\n\ncontent = File.read(\"/.../sample.pdf\") # just an example to get some data\n\nfm = FileMagic.new\nfm.buffer(content)    \n#=&gt; \"PDF document, version 1.4\"\n</code></pre>\n\n<p>For the gem to work (and compile) you need the <code>file</code> utility as well as the <code>magic</code> library with headers installed on your system. Quoting from the readme:</p>\n\n<blockquote>\n  <p>The file(1) library and headers are required:</p>\n  \n  <p>Debian/Ubuntu:: +libmagic-dev+<br>\n  Fedora/SuSE::   +file-devel+<br>\n  Gentoo::        +sys-libs/libmagic+<br>\n  OS X::          brew install libmagic</p>\n</blockquote>\n\n<p>Tested to work well under Rails 5.</p>\n"}, {"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1495548316, "post_id": 44128670, "comment_id": 75292700, "body": "My production environment is Ubuntu Linux, but my local environment is Mac OS X."}], "tags": [], "owner": {"reputation": 333, "user_id": 995368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hjdrh.png?s=128&g=1", "display_name": "Xavier Nicollet", "link": "https://stackoverflow.com/users/995368/xavier-nicollet"}, "is_accepted": false, "score": 0, "last_activity_date": 1495525280, "creation_date": 1495525280, "answer_id": 44128670, "question_id": 43768031, "link": "https://stackoverflow.com/questions/43768031/is-there-a-way-to-check-if-a-ruby-variable-contains-binary-data/44128670#44128670", "title": "Is there a way to check if a Ruby variable contains binary data?", "body": "<p>If you're on an unix machine, you can use the <em>file</em> command:</p>\n\n<pre><code>file titi.pdf\n</code></pre>\n\n<p>You could then do something like:</p>\n\n<pre><code>require 'open2'\n\ncmd = 'file -'\nOpen3.popen3(cmd) do |stdin, stdout, wait_thr|\n  stdin.write(content)\n  stdin.close\n  puts \"file type is:\" + stoud.read\nend\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "answer_count": 2, "score": 11, "last_activity_date": 1495525280, "creation_date": 1493838003, "last_edit_date": 1495541908, "question_id": 43768031, "link": "https://stackoverflow.com/questions/43768031/is-there-a-way-to-check-if-a-ruby-variable-contains-binary-data", "title": "Is there a way to check if a Ruby variable contains binary data?", "body": "<p>I'm using Ruby 2.4 and Rails 5.  I have file content in a variabe named \"content\".  The content could contain data from things like a PDF file, a Word file, or an HTML file.  Is there any way to tell if the variable contains binary data?  Ultimately, I would like to know if this is a PDf, Microsoft Office, or some other type of OpenOffice file.  This answer -- <a href=\"https://stackoverflow.com/questions/7622095/rails-possible-to-check-if-a-string-is-binary\">Rails: possible to check if a string is binary?</a> -- suggests that I can check the encoding of the variable</p>\n\n<pre><code>content.encoding\n</code></pre>\n\n<p>and it would produce</p>\n\n<pre><code>ASCII-8BIT\n</code></pre>\n\n<p>in the case of binary data, however, I've noticed there are cases where HTML content stored in the variable could also return \"ASCII-8BIT\" as the content.encoding, so using \"content.encoding\" is not a foolproof way to tell me if I have binary data.  Does such a way exist and if so, what is it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano"], "comments": [{"owner": {"reputation": 631, "user_id": 4196281, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rcO54.jpg?s=128&g=1", "display_name": "DevJem", "link": "https://stackoverflow.com/users/4196281/devjem"}, "edited": false, "score": 0, "creation_date": 1494215211, "post_id": 43767951, "comment_id": 74714914, "body": "Does the user <code>serv-deployer</code> own the target directory and have write privileges?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1494236372, "post_id": 43767951, "comment_id": 74724511, "body": "<i>&quot;I can see that <code>json 1.8.6</code> is installed.&quot;</i> ... No it&#39;s not, you&#39;ve only got versions <code>1.8.1</code> and <code>1.8.3</code> installed?! What error do you get when installing this? (You may have some system dependency issues?)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1494236448, "post_id": 43767951, "comment_id": 74724555, "body": "Also with regards to the ruby <code>1.9.1</code>  folder -- this <i>shouldn&#39;t</i> be an issue, as those libraries won&#39;t be used by ruby <code>2.2</code>. But if you don&#39;t need the old ruby version for some legacy software, then by all means remove all traces of it just in case."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1494236599, "post_id": 43767951, "comment_id": 74724657, "body": "With regards to system dependencies, for example, do you need to <code>sudo apt-get install libgmp3-dev</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 265579, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LhTcM.jpg?s=128&g=1", "display_name": "marman", "link": "https://stackoverflow.com/users/265579/marman"}, "edited": false, "score": 0, "creation_date": 1508265322, "post_id": 43856246, "comment_id": 80540628, "body": "Hi there! I&#39;m still having the issue after trying your solution, I even tried to bundle update but still the same. any ideas ?"}], "tags": [], "owner": {"reputation": 1477, "user_id": 3401124, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f16bfeaf3bc98416db9d226c8ffbdc9?s=128&d=identicon&r=PG&f=1", "display_name": "ddgd", "link": "https://stackoverflow.com/users/3401124/ddgd"}, "is_accepted": true, "score": 3, "last_activity_date": 1494273200, "creation_date": 1494273200, "answer_id": 43856246, "question_id": 43767951, "link": "https://stackoverflow.com/questions/43767951/json-v-1-8-6-will-not-install-as-part-of-capistrano-deploy/43856246#43856246", "title": "Json -v 1.8.6 will not install as part of capistrano deploy", "body": "<p>The most probable cause is you're missing some system dependencies that capistrano cannot install. </p>\n\n<p>Ssh to your server and try installing <code>sudo apt-get install libgmp3-dev</code></p>\n\n<p>If it doesn't fix the problem, ssh again and run the <code>gem install json -v '1.8.6'</code> as it tells you and post the error message you get from it here.</p>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 43856246, "answer_count": 1, "score": 9, "last_activity_date": 1494273200, "creation_date": 1493837682, "question_id": 43767951, "link": "https://stackoverflow.com/questions/43767951/json-v-1-8-6-will-not-install-as-part-of-capistrano-deploy", "title": "Json -v 1.8.6 will not install as part of capistrano deploy", "body": "<p>This question has been asked a couple of times on stackoverflow and other forums but I can't seem to get passed this error that I am getting. When I run <code>capistrano production deploy</code>, I get this error as part of the deploy process.</p>\n\n<pre><code>cap production bundler:install\n00:00 bundler:install\n      01 bundle install --path /var/local/blackduck_flock_rails/shared/bundle --without development test --deployme\u2026\n      01 An error occurred while installing json (1.8.6), and Bundler cannot continue.\n      01 Make sure that `gem install json -v '1.8.6'` succeeds before bundling.\n(Backtrace restricted to imported tasks)\ncap aborted!\n\n\nSSHKit::Runner::ExecuteError: Exception while executing as serv-deployer@oh-utility01.dc1.lan: bundle exit status: 5\nbundle stdout: An error occurred while installing json (1.8.6), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.6'` succeeds before bundling.\nbundle stderr: Nothing written\n\n\nTasks: TOP =&gt; bundler:install\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I've taken a look at my <code>log/capistrano.log</code> file and here are the relevant contents that I was looking at to trouble shoot.</p>\n\n<pre><code># Logfile created on 2017-05-03 14:42:16 -0400 by logger.rb/54072\n\n\nINFO ---------------------------------------------------------------------------\n  INFO START 2017-05-03 14:42:16 -0400 cap production bundler:install\n  INFO ---------------------------------------------------------------------------\n DEBUG [ec1d281e] Running if test ! -d /var/local/blackduck_flock_rails/current; then echo \"Directory does not exist '/var/local/blackduck_flock_rails/current'\" 1&gt;&amp;2; false; fi as serv-deployer@oh-utility01.dc1.lan\n DEBUG [ec1d281e] Command: if test ! -d /var/local/blackduck_flock_rails/current; then echo \"Directory does not exist '/var/local/blackduck_flock_rails/current'\" 1&gt;&amp;2; false; fi\n DEBUG [ec1d281e] Finished in 0.328 seconds with exit status 0 (successful).\n DEBUG [4f633904] Running /usr/bin/env bundle check --path /var/local/blackduck_flock_rails/shared/bundle as serv-deployer@oh-utility01.dc1.lan\n DEBUG [4f633904] Command: cd /var/local/blackduck_flock_rails/current &amp;&amp; /usr/bin/env bundle check --path /var/local/blackduck_flock_rails/shared/bundle\n DEBUG [4f633904]   Warning: the running version of Bundler is older than the version that created the lockfile. We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\n DEBUG [4f633904]   The following gems are missing\n * json (1.8.6)\n * tzinfo (1.2.2)\n * activesupport (4.2.6)\n\n etc. etc..........\n\n\n DEBUG [4f633904]    * uglifier (3.0.4)\n\nDEBUG [4f633904]    Install missing gems with `bundle install`\n DEBUG [4f633904] Finished in 0.179 seconds with exit status 1 (failed).\n  INFO [6c99e662] Running /usr/bin/env bundle install --path /var/local/blackduck_flock_rails/shared/bundle --without development test --deployment --quiet as serv-deployer@oh-utility01.dc1.lan\n DEBUG [6c99e662] Command: cd /var/local/blackduck_flock_rails/current &amp;&amp; /usr/bin/env bundle install --path /var/local/blackduck_flock_rails/shared/bundle --without development test --deployment --quiet\n DEBUG [6c99e662]   An error occurred while installing json (1.8.6), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.6'` succeeds before bundling.\n</code></pre>\n\n<p>So the first thing to note. The log is telling me that the running version of bundler is out of date and that I should install the newest one. Here is what I don't understand though. On my developing machine, I have <code>Bundler version 1.14.6</code>. On the targeting server that I am trying to deploy to, I also have <code>Bundler version 1.14.6</code>. I've confirmed it on both machines and they are indeed the same. Second, I have the same ruby versions for both developing machine and target machine. The ruby version is <code>2.2.5</code>. </p>\n\n<p>Second, when I run <code>gem list</code> on the target server, I can see that <code>json 1.8.6</code> is installed.</p>\n\n<pre><code>json (1.8.3, 1.8.1)\n</code></pre>\n\n<p>What gives?</p>\n\n<p>Finally, the problem has to be in this directory on the target machine <code>/var/local/blackduck_flock_rails/shared/bundle</code>. Inside the <code>bundle</code> directory, I have a <code>ruby</code> folder that has <code>1.9.1</code> and <code>2.2.0</code>. Could this be the source of the problem. I'm stumped on this one and it seems that questions like these always relate to something specific on someone's machine that won't necessarily be applied. Help would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "hanami", "hanami-router"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493838086, "post_id": 43767458, "comment_id": 74577528, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and the linked pages. When asking about a problem with your code we need the minimum code necessary to demonstrate the problem in the question itself, along with any necessary input. Without that you&#39;re asking us to imagine your code, and we can imagine all sorts of things that likely are not true."}], "answers": [{"tags": [], "owner": {"reputation": 1146, "user_id": 498386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76aa5b311fb40fdc2bb70c0282d66af3?s=128&d=identicon&r=PG", "display_name": "Luca Guidi", "link": "https://stackoverflow.com/users/498386/luca-guidi"}, "is_accepted": true, "score": 0, "last_activity_date": 1493887783, "creation_date": 1493887783, "answer_id": 43778075, "question_id": 43767458, "link": "https://stackoverflow.com/questions/43767458/how-to-get-the-hanami-routes-command-to-include-additional-objects/43778075#43778075", "title": "How to get the `hanami routes` command to include additional objects", "body": "<p>Please try to require your Rack app from <code>application.rb</code>. That file is evaluated even for <code>hanami routes</code> command.</p>\n"}], "owner": {"reputation": 11, "user_id": 7959207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eroEl.jpg?s=128&g=1", "display_name": "binary paladin", "link": "https://stackoverflow.com/users/7959207/binary-paladin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 43778075, "answer_count": 1, "score": -2, "last_activity_date": 1493887783, "creation_date": 1493835886, "last_edit_date": 1493837979, "question_id": 43767458, "link": "https://stackoverflow.com/questions/43767458/how-to-get-the-hanami-routes-command-to-include-additional-objects", "title": "How to get the `hanami routes` command to include additional objects", "body": "<p>The <a href=\"http://hanamirb.org/guides/routing/overview/#rack\" rel=\"nofollow noreferrer\">overview documentation for routes</a> has examples of objects being used for route resolution such as <code>get '/rack-app', to: RackApp.new</code>, which work as documented with code like:</p>\n\n<pre><code>options '/*', to: MyApp::CORSRequestHandler.new\n</code></pre>\n\n<p>From the console and the server commands, everything does what I expect, however, when executing the command <code>hanami routes</code>, I get the following error:</p>\n\n<pre><code>/path/to/gems/hanami-1.0.0/lib/hanami/config/mapper.rb:28:in `eval': uninitialized constant Hanami::Config::Mapper::MyApp (NameError)\n</code></pre>\n\n<p>The problem is that the <code>routes</code> command is not loading the entire application (which is good) but also problematic. I originally tried using <code>require_relative</code> from <code>routes.rb</code> but since the file is eval'ed this fails miserably, besides feeling wrong.</p>\n\n<p>I'm trying to figure how to get this class definition included for the <code>routes</code> command in a way that's most consistent with Hanami itself.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "bundle", "precompile"], "comments": [{"owner": {"reputation": 1680, "user_id": 194932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93bba200ad6c7c64e8ec07b44e254ac?s=128&d=identicon&r=PG", "display_name": "Raphael", "link": "https://stackoverflow.com/users/194932/raphael"}, "edited": false, "score": 0, "creation_date": 1493837677, "post_id": 43767068, "comment_id": 74577321, "body": "Are you using ES6 in you js files?"}, {"owner": {"reputation": 1680, "user_id": 194932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93bba200ad6c7c64e8ec07b44e254ac?s=128&d=identicon&r=PG", "display_name": "Raphael", "link": "https://stackoverflow.com/users/194932/raphael"}, "edited": false, "score": 0, "creation_date": 1493837764, "post_id": 43767068, "comment_id": 74577363, "body": "Also, try <code>RAILS_ENV=production rake assets:precompile --trace</code> for more in depth information about the error."}], "owner": {"reputation": 11, "user_id": 7789118, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205903551130480/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/7789118/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1494351255, "creation_date": 1493834528, "last_edit_date": 1494351255, "question_id": 43767068, "link": "https://stackoverflow.com/questions/43767068/rake-assetsprecompile-failing", "title": "Rake Assets:precompile failing", "body": "<p>New to rails, and I can't figure or find where exactly is the problem.</p>\n\n<p>RAILS_ENV=production bundle exec rake assets:precompile\nrake aborted!\nExecJS::RuntimeError: SyntaxError: Invalid regular expression: range out of order in character class\nget@(execjs):3538:630\n(execjs):4058:47\n(execjs):1:46\nglobal code@(execjs):1:58\n/Users/al/.rbenv/versions/2.4.1/bin/bundle:22:in <code>load'\n/Users/al/.rbenv/versions/2.4.1/bin/bundle:22:in</code>'\nTasks: TOP => assets:precompile\n(See full trace by running task with --trace)</p>\n\n<p>Here is the complete with --trace:</p>\n\n<p>voke assets:precompile (first_time)\n** Invoke assets:environment (first_time)\n** Execute assets:environment\n** Invoke environment (first_time)\n** Execute environment\n** Execute assets:precompile\nrake aborted!\nNoMethodError: undefined method <code>[]' for nil:NilClass\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/sass_processor.rb:278:in</code>sprockets_context'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/sass_processor.rb:124:in <code>asset_path'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/sass_processor.rb:137:in</code>asset_url'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/sass_processor.rb:209:in <code>font_url'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/script/tree/funcall.rb:143:in</code>_perform'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/script/tree/node.rb:58:in <code>perform'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:397:in</code>visit_prop'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/base.rb:36:in <code>visit'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:160:in</code>block in visit'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/stack.rb:79:in <code>block in with_base'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/stack.rb:115:in</code>with_frame'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/stack.rb:79:in <code>with_base'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:160:in</code>visit'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:504:in <code>block (2 levels) in visit_directive'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:504:in</code>map'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:504:in <code>block in visit_directive'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:181:in</code>with_environment'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:503:in <code>visit_directive'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/base.rb:36:in</code>visit'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:160:in <code>block in visit'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/stack.rb:79:in</code>block in with_base'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/stack.rb:115:in <code>with_frame'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/stack.rb:79:in</code>with_base'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:160:in <code>visit'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/base.rb:52:in</code>block in visit_children'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/base.rb:52:in <code>map'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/base.rb:52:in</code>visit_children'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:169:in <code>block in visit_children'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:181:in</code>with_environment'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:168:in <code>visit_children'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/base.rb:36:in</code>block in visit'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:188:in <code>visit_root'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/base.rb:36:in</code>visit'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:159:in <code>visit'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/visitors/perform.rb:8:in</code>visit'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/root_node.rb:36:in <code>css_tree'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/tree/root_node.rb:20:in</code>render'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sass-3.4.23/lib/sass/engine.rb:281:in <code>render'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/sass_compressor.rb:48:in</code>call'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/sass_compressor.rb:28:in <code>call'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:75:in</code>call_processor'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:57:in <code>block in call_processors'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:56:in</code>reverse_each'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/processor_utils.rb:56:in <code>call_processors'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:134:in</code>load_from_unloaded'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:60:in <code>block in load'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:317:in</code>fetch_asset_from_dependency_cache'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/loader.rb:44:in <code>load'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/cached_environment.rb:20:in</code>block in initialize'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/cached_environment.rb:47:in <code>load'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/base.rb:66:in</code>find_asset'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/base.rb:73:in <code>find_all_linked_assets'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/manifest.rb:142:in</code>block in find'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:114:in <code>block (2 levels) in logical_paths'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:228:in</code>block in stat_tree'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:212:in <code>block in stat_directory'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:209:in</code>each'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:209:in <code>stat_directory'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/path_utils.rb:227:in</code>stat_tree'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:105:in <code>each'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:105:in</code>block in logical_paths'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:104:in <code>each'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/legacy.rb:104:in</code>logical_paths'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/manifest.rb:140:in <code>find'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/manifest.rb:185:in</code>compile'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-rails-3.2.0/lib/sprockets/rails/task.rb:68:in <code>block (3 levels) in define'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/rake/sprocketstask.rb:147:in</code>with_logger'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/sprockets-rails-3.2.0/lib/sprockets/rails/task.rb:67:in <code>block (2 levels) in define'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in</code>block in execute'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in <code>each'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:250:in</code>execute'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:194:in <code>block in invoke_with_call_chain'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/2.4.0/monitor.rb:214:in</code>mon_synchronize'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:187:in <code>invoke_with_call_chain'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/task.rb:180:in</code>invoke'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:152:in <code>invoke_task'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:108:in</code>block (2 levels) in top_level'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:108:in <code>each'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:108:in</code>block in top_level'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:117:in <code>run_with_threads'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:102:in</code>top_level'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:80:in <code>block in run'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:178:in</code>standard_exception_handling'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:77:in <code>run'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/rake-12.0.0/exe/rake:27:in</code>'\n/Users/al/.rbenv/versions/2.4.1/bin/rake:22:in <code>load'\n/Users/al/.rbenv/versions/2.4.1/bin/rake:22:in</code>'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/cli/exec.rb:74:in <code>load'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/cli/exec.rb:74:in</code>kernel_load'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/cli/exec.rb:27:in <code>run'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/cli.rb:335:in</code>exec'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/vendor/thor/lib/thor/command.rb:27:in <code>run'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in</code>invoke_command'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/vendor/thor/lib/thor.rb:359:in <code>dispatch'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/cli.rb:20:in</code>dispatch'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/vendor/thor/lib/thor/base.rb:440:in <code>start'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/cli.rb:11:in</code>start'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/exe/bundle:32:in <code>block in &lt;top (required)&gt;'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/lib/bundler/friendly_errors.rb:121:in</code>with_friendly_errors'\n/Users/al/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/bundler-1.14.6/exe/bundle:24:in <code>&lt;top (required)&gt;'\n/Users/al/.rbenv/versions/2.4.1/bin/bundle:22:in</code>load'\n/Users/al/.rbenv/versions/2.4.1/bin/bundle:22:in `'\nTasks: TOP => assets:precompile</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 1680, "user_id": 194932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93bba200ad6c7c64e8ec07b44e254ac?s=128&d=identicon&r=PG", "display_name": "Raphael", "link": "https://stackoverflow.com/users/194932/raphael"}, "edited": false, "score": 0, "creation_date": 1493838410, "post_id": 43766733, "comment_id": 74577689, "body": "Can you try to create the project on you C: drive instead?"}, {"owner": {"reputation": 451, "user_id": 7646978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LL8HD.jpg?s=128&g=1", "display_name": "arongka", "link": "https://stackoverflow.com/users/7646978/arongka"}, "edited": false, "score": 0, "creation_date": 1493853146, "post_id": 43766733, "comment_id": 74584216, "body": "Could you please add link to the SO questions that you tried but didn&#39;t work?"}], "answers": [{"tags": [], "owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "is_accepted": false, "score": 0, "last_activity_date": 1493872396, "creation_date": 1493872396, "answer_id": 43773945, "question_id": 43766733, "link": "https://stackoverflow.com/questions/43766733/rails-5-could-could-not-generate-rspecinstall/43773945#43773945", "title": "rails 5 - could could not generate rspec:install", "body": "<p>I had this same problem a couple of days ago. What I had to do was delete all versions of RSpec from my machine and then run bundle install. This installed the latest version of RSpec and everything was good afterwards. </p>\n"}], "owner": {"reputation": 91, "user_id": 5631053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1bOaz.jpg?s=128&g=1", "display_name": "Shad Munir", "link": "https://stackoverflow.com/users/5631053/shad-munir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1493872396, "creation_date": 1493833274, "last_edit_date": 1493833478, "question_id": 43766733, "link": "https://stackoverflow.com/questions/43766733/rails-5-could-could-not-generate-rspecinstall", "title": "rails 5 - could could not generate rspec:install", "body": "<p>I am trying to build <strong>restful  api using rails</strong></p>\n\n<p>I am following the blog link tutorial to work out</p>\n\n<p><a href=\"https://scotch.io/tutorials/build-a-restful-json-api-with-rails-5-part-one\" rel=\"noreferrer\">https://scotch.io/tutorials/build-a-restful-json-api-with-rails-5-part-one</a></p>\n\n<p>but when i run this following command</p>\n\n<p><code>rails generate rspec:install</code></p>\n\n<p>It generates the following error</p>\n\n<pre><code>identical  .rspec\n       exist  spec\n      create  spec/C:/Users/Shad Munir/AppData/Local/Temp/d20170503-6768-l4n0e9/spec/spec_helper.rb\nC:/Ruby23-x64/lib/ruby/2.3.0/fileutils.rb:253:in `mkdir': Invalid argument @ dir_s_mkdir - E:/todos-api/spec/C: (Errno::EINVAL)\n        from C:/Ruby23-x64/lib/ruby/2.3.0/fileutils.rb:253:in `fu_mkdir'\n        from C:/Ruby23-x64/lib/ruby/2.3.0/fileutils.rb:227:in `block (2 levels) in mkdir_p'\n        from C:/Ruby23-x64/lib/ruby/2.3.0/fileutils.rb:225:in `reverse_each'\n        from C:/Ruby23-x64/lib/ruby/2.3.0/fileutils.rb:225:in `block in mkdir_p'\n        from C:/Ruby23-x64/lib/ruby/2.3.0/fileutils.rb:211:in `each'\n        from C:/Ruby23-x64/lib/ruby/2.3.0/fileutils.rb:211:in `mkdir_p'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions/create_file.rb:61:in `block in invoke!'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions/empty_directory.rb:116:in `invoke_with_conflict_check'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions/create_file.rb:60:in `invoke!'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions.rb:95:in `action'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions/create_file.rb:25:in `create_file'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions/file_manipulation.rb:27:in `copy_file'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions/directory.rb:94:in `block in execute!'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions/directory.rb:80:in `each'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions/directory.rb:80:in `execute!'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions/directory.rb:66:in `invoke!'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions.rb:95:in `action'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/actions/directory.rb:52:in `directory'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rspec-rails-3.5.2/lib/generators/rspec/install/install_generator.rb:23:in `block in copy_spec_files'\n        from C:/Ruby23-x64/lib/ruby/2.3.0/tmpdir.rb:89:in `mktmpdir'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/rspec-rails-3.5.2/lib/generators/rspec/install/install_generator.rb:20:in `copy_spec_files'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/command.rb:27:in `run'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:126:in `invoke_command'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:133:in `block in invoke_all'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:133:in `each'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:133:in `map'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/invocation.rb:133:in `invoke_all'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/group.rb:232:in `dispatch'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.19.4/lib/thor/base.rb:444:in `start'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/generators.rb:180:in `invoke'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/generate.rb:13:in `&lt;top (required)&gt;'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `block in require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:259:in `load_dependency'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/activesupport-5.0.2/lib/active_support/dependencies.rb:293:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:138:in `require_command!'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:145:in `generate_or_destroy'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:60:in `generate'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.0.2/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>I tried some related solution from stack overflow but none of them is working .</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1493831133, "post_id": 43766054, "comment_id": 74573479, "body": "It&#39;s unclear what  is the <code>Object</code>, is this <code>AR</code> object? Where is it defined?"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1493831183, "post_id": 43766054, "comment_id": 74573509, "body": "I&#39;m not sure what to you want to achieve. You want save that values in a <code>Object</code>? or in a <code>ActiveRecord</code>?"}, {"owner": {"reputation": 447, "user_id": 3816367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x4ncI.jpg?s=128&g=1", "display_name": "cmramseyer", "link": "https://stackoverflow.com/users/3816367/cmramseyer"}, "edited": false, "score": 0, "creation_date": 1493831342, "post_id": 43766054, "comment_id": 74573599, "body": "ItemMedida inherits from ActiveRecord."}, {"owner": {"reputation": 447, "user_id": 3816367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x4ncI.jpg?s=128&g=1", "display_name": "cmramseyer", "link": "https://stackoverflow.com/users/3816367/cmramseyer"}, "edited": false, "score": 0, "creation_date": 1493831468, "post_id": 43766054, "comment_id": 74573692, "body": "I have edited the title and the question content"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 2, "creation_date": 1493831768, "post_id": 43766054, "comment_id": 74573859, "body": "I can&#39;t reproduce."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1493831956, "post_id": 43766054, "comment_id": 74573962, "body": "What happens if you do <code>create!</code> instead of <code>new</code>?"}, {"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "edited": false, "score": 0, "creation_date": 1493831996, "post_id": 43766054, "comment_id": 74573985, "body": "In the terminal, make sure your current directory is for the current project and enter <code>rails console</code>. Then enter <code>SpfPedido::ItemMedida.table_name</code> and tell us what string appears"}, {"owner": {"reputation": 447, "user_id": 3816367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x4ncI.jpg?s=128&g=1", "display_name": "cmramseyer", "link": "https://stackoverflow.com/users/3816367/cmramseyer"}, "edited": false, "score": 0, "creation_date": 1493832337, "post_id": 43766054, "comment_id": 74574165, "body": "SpfPedido::ItemMedida.table_name returns &#39;item_medidas&#39;, which is ok"}, {"owner": {"reputation": 447, "user_id": 3816367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x4ncI.jpg?s=128&g=1", "display_name": "cmramseyer", "link": "https://stackoverflow.com/users/3816367/cmramseyer"}, "edited": false, "score": 0, "creation_date": 1493832407, "post_id": 43766054, "comment_id": 74574199, "body": "If i do create! instead of new, i get a RecordInvalid exception, cause attributes are nil and I have presence validations on cantidad, ancho and alto attributes. Im uploading the complete model now"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1493832508, "post_id": 43766054, "comment_id": 74574258, "body": "Are you using some <code>attr_accessor</code> stuff? If so, remove it."}, {"owner": {"reputation": 447, "user_id": 3816367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x4ncI.jpg?s=128&g=1", "display_name": "cmramseyer", "link": "https://stackoverflow.com/users/3816367/cmramseyer"}, "edited": false, "score": 0, "creation_date": 1493832875, "post_id": 43766054, "comment_id": 74574474, "body": "I use attr_accesor but not on :cantidad, :ancho and :alto attributes. Should I remove attr_accessors anyway?"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1493844066, "post_id": 43766054, "comment_id": 74580640, "body": "No, not if it doesn&#39;t affect those attributes. Have you tried commenting everything out and trying that? Then comment things in one by one."}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1493844082, "post_id": 43766054, "comment_id": 74580652, "body": "Just remember to reload! the console, have forgotten that myself a few times."}], "answers": [{"tags": [], "owner": {"reputation": 447, "user_id": 3816367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x4ncI.jpg?s=128&g=1", "display_name": "cmramseyer", "link": "https://stackoverflow.com/users/3816367/cmramseyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1493908618, "creation_date": 1493908618, "answer_id": 43785870, "question_id": 43766054, "link": "https://stackoverflow.com/questions/43766054/model-new-with-params-initialize-all-attributes-with-nil/43785870#43785870", "title": "Model new with params, initialize all attributes with nil", "body": "<p>I found the anomaly. It was my mistake. My model includes a module where there was a wrong method_missing redefinition, without using super, like this:</p>\n\n<pre><code>def method_missing(m, *args, &amp;block)\n  if condition\n    #do something\n  end\nend\n</code></pre>\n\n<p>So I have corrected it with</p>\n\n<pre><code>def method_missing(m, *args, &amp;block)\n  if condition\n    #do something\n  else\n    super(m, *args, &amp;block)\n  end\nend\n</code></pre>\n\n<p>Thanks to everyone for the help!</p>\n"}], "owner": {"reputation": 447, "user_id": 3816367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x4ncI.jpg?s=128&g=1", "display_name": "cmramseyer", "link": "https://stackoverflow.com/users/3816367/cmramseyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1493908618, "creation_date": 1493830938, "last_edit_date": 1493833568, "question_id": 43766054, "link": "https://stackoverflow.com/questions/43766054/model-new-with-params-initialize-all-attributes-with-nil", "title": "Model new with params, initialize all attributes with nil", "body": "<p>I init a ItemMedida object with some attributes values</p>\n\n<pre><code>item_medida = SpfPedido::ItemMedida.new(cantidad: 3, ancho: 800, alto: 600)\n</code></pre>\n\n<p>But when I call it, all attributes are nil</p>\n\n<pre><code>item_medida #=&gt; &lt;SpfPedido::ItemMedida id: nil, cantidad: nil, ancho: nil, alto: nil)\n</code></pre>\n\n<p>cantidad, alto, ancho are defined ok in DB.</p>\n\n<p>Why I get this behaviour? I want my object intialized with their correct attributes.\nAny tip?</p>\n\n<p>The model</p>\n\n<pre><code># encoding: utf-8\nmodule SpfPedido\n  class ItemMedida &lt; ApplicationRecord\n    belongs_to :item, class_name: \"SpfPedido::Item\", inverse_of: :item_medidas\n    belongs_to :medida\n    has_many :pulidos, class_name: \"SpfPedido::Pulido\"\n    has_many :agujeros, class_name: \"SpfPedido::Agujero\"\n    has_many :entrantes, class_name: \"SpfPedido::Entrante\"\n    has_many :solapes, class_name: \"SpfPedido::Solape\"\n    has_one :forma\n    has_and_belongs_to_many :adjuntos\n    has_many :adjunto_medidas\n    has_many :adjuntos, through: :adjunto_medidas\n    has_many :curvaturas\n    has_many :bites\n    has_many :tango_bodies, as: :linea_item, class_name: 'SpfTango::TangoBody'\n    # Polymorphic\n    has_one :pre_facturacion, as: :linea_item\n    has_one :facturacion, as: :linea_item\n    has_one :expedicion, as: :linea_item\n    has_many :trazabilidads, through: :item\n    #############\n    has_and_belongs_to_many :orden_corte_mesas # creo que no va mas\n    has_many :medidas_orden_corte_mesas\n    has_many :comprobante_medidas\n    has_many :comprobante_temps, through: :comprobante_medidas\n    has_many :rotura_vidrios\n    has_many :elementos, through: :item\n    has_many :proceso_de_elementos, through: :item\n    has_many :componentes, through: :item\n    has_many :proceso_de_componentes, through: :item\n    delegate :pedido, to: :item\n    before_update :cambio_de_medidas?, :if =&gt; proc { ancho_changed? || alto_changed? } \n    validates :cantidad, numericality: { only_integer: true, greater_than: 0, less_than: 1000, message: \"Debe introducirse un valor entero entre 0 y 999\" } \n    validates :ancho, numericality: { only_integer: true, greater_than: 0, less_than: 10000, message: \"Debe introducirse un valor entero entre 0 y 9999\" }\n    validates :alto, numericality: { only_integer: true, greater_than: 0, less_than: 10000, message: \"Debe introducirse un valor entero entre 0 y 9999\"  }\n    accepts_nested_attributes_for :medida\n    accepts_nested_attributes_for :solapes\n    accepts_nested_attributes_for :pulidos\n    accepts_nested_attributes_for :bites\n    accepts_nested_attributes_for :curvaturas\n    attr_accessor :config_pulido_id\n    attr_accessor :objeto_pulible_type\n    attr_accessor :objeto_pulible_id\n    attr_accessor :accion\n    attr_accessor :cambio_de_medidas\n    attr_accessor :comentario\n    attr_accessor :total_de_complementos # es la suma de complementos del item\n    attr_accessor :precio_unitario_con_complementos # total_linea + total_complementos / superficie\n  end\nend\n</code></pre>\n\n<p>I want item_medida to be <code>&lt;SpfPedido::ItemMedida id: nil, cantidad: 3, ancho: 600, alto: 800&gt;</code></p>\n\n<p>EDIT:</p>\n\n<p>Another test.</p>\n\n<pre><code>item_medida = SpfPedido::ItemMedida.new(cantidad: 3, ancho: 800, alto: 600)\nitem_medida #=&gt; &lt;SpfPedido::ItemMedida id: nil, cantidad: nil, ancho: nil, alto: nil&gt;\nitem_medida.valid? #=&gt; false\nitem_medida = SpfPedido::ItemMedida.new(cantidad: 3, ancho: 800, alto: 600)\nitem_medida #=&gt; &lt;SpfPedido::ItemMedida id: nil, cantidad: 3, ancho: 800, alto: 600&gt;\n</code></pre>\n\n<p>After calling <code>.valid?</code> method, the item_medida object is initialized correctly.</p>\n"}, {"tags": ["ruby", "string", "reverse", "solution"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1493831297, "post_id": 43766032, "comment_id": 74573568, "body": "I see all they return <code>true</code>. What do you get?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493838462, "post_id": 43766032, "comment_id": 74577713, "body": "It&#39;s a really bad idea to use <code>new</code> as the name of a variable. It&#39;ll eventually confuse anyone else working with the code, including your future self. In general, use more descriptive names, such as <code>new_str</code> or even the ubiquitous <code>retval</code>. Also, be aware of the type of value you&#39;re working with: <code>new.to_s + string[-1, 1].to_s</code> is using two <code>to_s</code> on strings which is redundant and wasting CPU time. <code>string[-1, 1]</code> is awkward; <code>string[-1]</code> will accomplish the same thing."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493840023, "post_id": 43766032, "comment_id": 74578515, "body": "Also, be careful. Your first method is munging the string passed in. You don&#39;t see that passing a literal string, but try passing in a variable then checking it afterwards. As a result, if this is intentional, you should use <code>!</code> at the end of the method name."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5042959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02217601895c7cf5ff61bb18985a1ea8?s=128&d=identicon&r=PG&f=1", "display_name": "jafoole", "link": "https://stackoverflow.com/users/5042959/jafoole"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493868119, "post_id": 43766157, "comment_id": 74587664, "body": "Thanks! @the Tin Man I see what you are saying, and now I understand better about how puts returns nil after it prints to the screen.  Also, thanks for showing me how to shorten the code for CPU time."}], "tags": [], "owner": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "is_accepted": true, "score": 1, "last_activity_date": 1493838303, "last_edit_date": 1493838303, "creation_date": 1493831257, "answer_id": 43766157, "question_id": 43766032, "link": "https://stackoverflow.com/questions/43766032/why-one-solution-prints-true-when-the-other-prints-false/43766157#43766157", "title": "Why one solution prints true when the other prints false?", "body": "<p>In your <code>#reverse</code> function, you are returning <code>puts new</code> when you should just be returning <code>new</code>.</p>\n\n<p>As you can see from the example below, <code>puts</code> returns nil after it prints to the screen:</p>\n\n<pre><code>irb(main): puts 'test'\ntest\n=&gt; nil\n</code></pre>\n\n<p>If you change <code>puts new</code> to just <code>new</code>, it works as you expect.</p>\n\n<p><em>Aside</em></p>\n\n<p>You don't need to use explicit <code>return</code> calls. In Ruby, the last line executed will be returned, so you can replace this in both methods:</p>\n\n<pre><code>return new\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>new\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 915749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAwin.jpg?s=128&g=1", "display_name": "Pedro Vitti", "link": "https://stackoverflow.com/users/915749/pedro-vitti"}, "is_accepted": false, "score": 1, "last_activity_date": 1493838344, "last_edit_date": 1493838344, "creation_date": 1493831419, "answer_id": 43766208, "question_id": 43766032, "link": "https://stackoverflow.com/questions/43766032/why-one-solution-prints-true-when-the-other-prints-false/43766208#43766208", "title": "Why one solution prints true when the other prints false?", "body": "<p>The problem is that in the <code>reverse</code> method, you are printing the value to stdout using the <code>puts</code> method but you are not returning it (your method returns <code>nil</code> instead). When you compare <code>nil == \"cba\"</code> it returns <code>false</code>. You have to return the <code>new</code> variable:</p>\n\n<pre><code>def reverse(string)\n  new = \"\"\n  i = 0\n  length = string.length\n  while i &lt; length do \n    new = new.to_s + string[-1, 1].to_s\n    string.chop!\n    if i &gt;= string.length\n      break\n    end\n  end\n  new\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5042959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02217601895c7cf5ff61bb18985a1ea8?s=128&d=identicon&r=PG&f=1", "display_name": "jafoole", "link": "https://stackoverflow.com/users/5042959/jafoole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 43766157, "answer_count": 2, "score": -1, "last_activity_date": 1493838344, "creation_date": 1493830853, "last_edit_date": 1493838262, "question_id": 43766032, "link": "https://stackoverflow.com/questions/43766032/why-one-solution-prints-true-when-the-other-prints-false", "title": "Why one solution prints true when the other prints false?", "body": "<p>I have two solutions to reverse a string in Ruby. One prints true while the other prints false, however, both print out the response I want.</p>\n\n<p>Why does one say it's false even though it results in the same answer as the solution that prints true?</p>\n\n<p>Here are the solutions and the tests:</p>\n\n<pre><code>def reverse(string)\nnew = \"\"\n  i = 0\n  length = string.length\n  while i &lt; length do \n    new = new.to_s + string[-1, 1].to_s\n    string.chop!\n    if i &gt;= string.length\n      break\n    end\n  end\n  puts new\nend\n\ndef secondreverse(string)\n  new = \"\"\n  i = 0\n  length = string.length\n  while i &lt; length do\n    new = string[i] + new\n    i += 1\n  end\n  return new\nend\n</code></pre>\n\n<p>These are tests to check that the code is working. After writing your solution, they should all print true.</p>\n\n<pre><code>puts(\"\\nTests for #reverse\")\nputs(\"===============================================\")\n    puts(\n      'secondreverse(\"abc\") == \"cba\": ' + (secondreverse(\"abc\") == \"cba\").to_s\n    )\n    puts(\n      'secondreverse(\"a\") == \"a\": ' + (secondreverse(\"a\") == \"a\").to_s\n    )\n    puts(\n      'secondreverse(\"\") == \"\": ' + (secondreverse(\"\") == \"\").to_s\n    )\nputs(\"===============================================\")\n</code></pre>\n"}, {"tags": ["ruby", "rails-activejob"], "answers": [{"comments": [{"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1493830328, "post_id": 43765724, "comment_id": 74573005, "body": "Yea, still getting the exact same error. I updated the OP, but its saying <code>get_customers</code> is not defined on the <code>job</code>. Thats true, its defined on the model. And I pass in a <code>Shop</code> object to work on.. hence my confusion"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1493972067, "post_id": 43765724, "comment_id": 74639388, "body": "@ToddT I am very curious if you&#39;ve found the cause of the error?"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 1, "creation_date": 1493987517, "post_id": 43765724, "comment_id": 74649041, "body": "It ended up being that my code was fine, I wasn&#39;t restarting Sidekiq, so my code changed weren&#39;t being picked up.. Lesson learned! Thanks for the help"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1493987564, "post_id": 43765724, "comment_id": 74649072, "body": "@ToddT True, sidekiq needs to be restarted anytime code changes."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1493987588, "post_id": 43765724, "comment_id": 74649088, "body": "@ToddT though I doubt this <code>current_shop.get_customers.perform</code> is correct... (I say it is wrong)"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1493992586, "post_id": 43765724, "comment_id": 74652624, "body": "Yep you are right.. I did take out <code>perform</code> so I marked your answer as correct. thanks again!"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 0, "last_activity_date": 1493829800, "creation_date": 1493829800, "answer_id": 43765724, "question_id": 43765630, "link": "https://stackoverflow.com/questions/43765630/calling-methods-in-activejob-perform/43765724#43765724", "title": "Calling methods in ActiveJob perform", "body": "<p>First, change the <code>perform</code> method - in there you just want to perform something, in your case you want to call <code>get_customers</code> on the <code>current_shop</code> object. So do that.</p>\n\n<pre><code>class GetCustomersJob &lt; ActiveJob::Base\n  queue_as :default\n\n  def perform(current_shop)\n    current_shop.get_customers # removed .perform\n  end\nend\n</code></pre>\n\n<p>Later, you want to call the job. To do that you write the job's class name and use either <code>perform_now</code> to run the job immediately:</p>\n\n<pre><code>GetCustomersJob.perform_now(Shop.current_shop)\n</code></pre>\n\n<p>or <code>perform_later</code> to queue the job for later:</p>\n\n<pre><code>GetCustomersJob.perform_later(Shop.current_shop)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1248, "user_id": 12544391, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CtaYxo9TPIE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlgdP0oykrpPJmTWJQN9DSbVS-8w/photo.jpg?sz=128", "display_name": "Dorian", "link": "https://stackoverflow.com/users/12544391/dorian"}, "is_accepted": false, "score": 0, "last_activity_date": 1613989720, "creation_date": 1613989720, "answer_id": 66313926, "question_id": 43765630, "link": "https://stackoverflow.com/questions/43765630/calling-methods-in-activejob-perform/66313926#66313926", "title": "Calling methods in ActiveJob perform", "body": "<p>I had forgotten to name the test class with <code>Test</code> at the end, so <code>perform_now</code> was not defined.</p>\n<p>(writing this for future me :wave:)</p>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2555, "favorite_count": 0, "accepted_answer_id": 43765724, "answer_count": 2, "score": 1, "last_activity_date": 1613989720, "creation_date": 1493829437, "last_edit_date": 1493830237, "question_id": 43765630, "link": "https://stackoverflow.com/questions/43765630/calling-methods-in-activejob-perform", "title": "Calling methods in ActiveJob perform", "body": "<p>I'm getting a <code>No Method Error</code> when calling my job. I don't know why. This is the actual error:</p>\n\n<pre><code>NoMethodError: undefined method `get_customers' for #\n&lt;GetCustomersJob:0x007f15280e4270&gt;\n</code></pre>\n\n<p>I'm learning <code>ActiveJob</code> and created my first job that is super simple, and calls a method defined on my <code>Shop</code> model. The job looks like this:</p>\n\n<pre><code>class GetCustomersJob &lt; ActiveJob::Base\n  queue_as :default\n\n  def perform(current_shop)\n    current_shop.get_customers.perform\n  end\nend\n</code></pre>\n\n<p><code>get_customers</code> is defined on my shop model just fine, and <code>current_shop</code> is a <code>Shop</code> model object. <code>get_customers</code> works as expected outside of this job. I just can't seem to get it to work within this job.</p>\n\n<p>I also tried:</p>\n\n<pre><code>Shop.current_shop.get_customers.perform\n</code></pre>\n\n<p>What did I do wrong?</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby", "twitter-bootstrap"], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "is_accepted": false, "score": 1, "last_activity_date": 1493830170, "creation_date": 1493830170, "answer_id": 43765830, "question_id": 43765375, "link": "https://stackoverflow.com/questions/43765375/how-to-make-scss-changes-to-images-on-rails/43765830#43765830", "title": "How to make SCSS changes to images on rails", "body": "<p>When you write the code like this:</p>\n\n<pre><code>&lt;%= link_to image_tag('ZM Logo (colour).jpg'), class: \"Logo\" %&gt; \n</code></pre>\n\n<p>You are applying the class <code>\"Logo\"</code> to the <code>a</code> tag.</p>\n\n<p>When you write the code like this:</p>\n\n<pre><code>&lt;%= link_to image_tag('ZM Logo (colour).jpg', class: \"Logo\") %&gt; \n</code></pre>\n\n<p>you are applying the class <code>\"Logo\"</code> to the <code>img</code> tag.</p>\n\n<p>The subtle difference is the the position of the closing round bracket. Take a look in your stylesheet and see if you are trying to apply the <code>\"Logo\"</code> class to the <code>a</code> tag or the <code>img</code> tag. </p>\n\n<p>Now if you look at the big picture, you are trying to put a link inside of a link.</p>\n\n<p>The following:</p>\n\n<pre><code>&lt;a class=\"navbar-brand\" href=\"#\"&gt;\n  &lt;%= link_to image_tag('ZM Logo (colour).jpg'), class: \"Logo\" %&gt; \n&lt;/a&gt;\n</code></pre>\n\n<p>will produce:</p>\n\n<pre><code>&lt;a class=\"navbar-brand\" href=\"#\"&gt;\n  &lt;a class=\"Logo\"&gt;&lt;img source='ZM Logo (colour).jpg'&gt;&lt;/a&gt;    \n&lt;/a&gt;\n</code></pre>\n\n<p>When what you actually want is:</p>\n\n<pre><code>&lt;a class=\"navbar-brand\" href=\"#\"&gt;\n  &lt;%= image_tag 'ZM Logo (colour).jpg', class: \"Logo\" %&gt; \n&lt;/a&gt;\n</code></pre>\n\n<p>which will produce:</p>\n\n<pre><code>&lt;a class=\"navbar-brand\" href=\"#\"&gt;\n  &lt;img source='ZM Logo (colour).jpg', class='Logo'&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>Be careful with your use of Rails functions and when in doubt, right click on the element in the web browser and click <code>Inspect element</code>. This way you can see the HTML output.</p>\n"}], "owner": {"reputation": 3, "user_id": 7948755, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/i8e5N.jpg?s=128&g=1", "display_name": "Otis", "link": "https://stackoverflow.com/users/7948755/otis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1493830170, "creation_date": 1493828536, "question_id": 43765375, "link": "https://stackoverflow.com/questions/43765375/how-to-make-scss-changes-to-images-on-rails", "title": "How to make SCSS changes to images on rails", "body": "<p>I'm using ruby on rails and bootstrap for a nav-bar - want to set up a way of changing the 'ZM logo' size through an scss stylesheet setup to alter the nav bar.</p>\n\n<p>Application.html.erb = </p>\n\n<p>\n    </p>\n\n<pre><code>  &lt;div class=\"navbar-header\"&gt;\n    &lt;a class=\"navbar-brand\" href=\"#\"&gt;\n      &lt;%= link_to image_tag('ZM Logo (colour).jpg'), class: \"Logo\" %&gt; \n    &lt;/a&gt;\n  &lt;/div&gt;\n\n\n    &lt;ul class=\"navbar-nav\"&gt;\n      &lt;li class=\"nav-item\"&gt;&lt;%= link_to \"Home\", root_path, class: \"nav-link\" %&gt;&lt;/li&gt;\n      &lt;li class=\"nav-item\"&gt;&lt;%= link_to \"About\", about_path, class: \"nav-link\" %&gt;&lt;/li&gt;\n      &lt;li class=\"nav-item\"&gt;&lt;%= link_to \"Contact\", \"#\", class: \"nav-link\" %&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>In stylesheets I have created a navbar.scss file to make the changes in and have added an @import for that file in applications.  Class 'Logo' just doesn't seem to be working.</p>\n\n<p>Any thoughts would be brilliant!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493829287, "post_id": 43765182, "comment_id": 74572394, "body": "What do you get for <code>current_user.medias.includes(:companies)</code>?"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493829392, "post_id": 43765182, "comment_id": 74572462, "body": "@Md.FarhanMemon I see this in console: <code>[2] pry(main)&gt; user.medias.includes(:companies)   Media::Medias Load (1.6ms)  SELECT &quot;media_medias&quot;.* FROM &quot;media_medias&quot; INNER JOIN &quot;permissions&quot; ON &quot;media_medias&quot;.&quot;id&quot; = &quot;permissions&quot;.&quot;permitable_id&quot; WHERE &quot;permissions&quot;.&quot;user_id&quot; = $1 AND &quot;permissions&quot;.&quot;permitable_type&quot; = $2  [[&quot;user_id&quot;, 2], [&quot;permitable_type&quot;, &quot;Media::Medias&quot;]] =&gt; #&lt;Media::Medias::ActiveRecord_AssociationRelation:0xce32a4&gt;</code>"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493829474, "post_id": 43765182, "comment_id": 74572507, "body": "@Md.FarhanMemon It does not look it gives me desired result + I need to get back both - medias and companies."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493830340, "post_id": 43765182, "comment_id": 74573007, "body": "What do you exactly mean by &#39;get back both&#39;? You can have only one object preloaded with associated objects. Can you write your query in sql?"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493830492, "post_id": 43765182, "comment_id": 74573108, "body": "As i can see in the query, it doesn&#39;t load <code>company</code>. Try <code>preload</code> instead of <code>includes</code>"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493830622, "post_id": 43765182, "comment_id": 74573171, "body": "@Md.FarhanMemon <code>preload</code> does not help. I need to <a href=\"https://github.com/antillas21/ajax-datatables-rails#get-raw-records\" rel=\"nofollow noreferrer\">get raw records for ajax-datatables-rails</a> and I need records from two models - <code>Media::Medias</code> and <code>Company</code>"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493834677, "post_id": 43765182, "comment_id": 74575523, "body": "@Md.FarhanMemon OK, <code>user.medias.preload(:companies).ids</code> gives back me ids of <code>Media::Medias</code>. How do I get <code>Companies</code> for each <code>Media::Medias</code> please?"}, {"owner": {"reputation": 591, "user_id": 1169939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRDKs.jpg?s=128&g=1", "display_name": "marksiemers", "link": "https://stackoverflow.com/users/1169939/marksiemers"}, "edited": false, "score": 0, "creation_date": 1493835661, "post_id": 43765182, "comment_id": 74576100, "body": "What happens if you do: <code>user.medias.includes(:companies).map{|media| media.company.id }</code>?"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 591, "user_id": 1169939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRDKs.jpg?s=128&g=1", "display_name": "marksiemers", "link": "https://stackoverflow.com/users/1169939/marksiemers"}, "edited": false, "score": 0, "creation_date": 1493835867, "post_id": 43765182, "comment_id": 74576224, "body": "@marksiemers I get <code>NameError: uninitialized constant Media::Medias::Companies</code>  In my <code>media_medias</code> table I have column <code>company_id</code>"}, {"owner": {"reputation": 591, "user_id": 1169939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRDKs.jpg?s=128&g=1", "display_name": "marksiemers", "link": "https://stackoverflow.com/users/1169939/marksiemers"}, "edited": false, "score": 0, "creation_date": 1493836176, "post_id": 43765182, "comment_id": 74576426, "body": "Sorry, I didn&#39;t read your associations close enough: <code>user.medias.includes(:companies).map{|media| media.companies.id }</code>. Although, you may want to change your association name to <code>belongs_to :company, ...</code> in your <code>Medias</code> class."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493836347, "post_id": 43765182, "comment_id": 74576538, "body": "And what do you get for <code>user.medias.preload(:companies).select([&#39;medias.id&#39;, &#39;medias.company.id&#39;])</code> and <code>user.medias.select([&#39;medias.id&#39;, &#39;medias.company_id&#39;])</code>"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493837073, "post_id": 43765182, "comment_id": 74576939, "body": "@Md.FarhanMemon please, see above in update - did not get any records back"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493837818, "post_id": 43765182, "comment_id": 74577405, "body": "That&#39;s strange..replace <code>puts</code> with <code>p</code>..if that throws an error too, try <code>query.inspect</code>."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493837925, "post_id": 43765182, "comment_id": 74577456, "body": "@Md.FarhanMemon <code>p</code> gives same thing"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493838183, "post_id": 43765182, "comment_id": 74577578, "body": "Can you do that in irb console instead of debugger. U won&#39;t need puts there. Run the query for the same user like <code>User.find(2).medias...</code>"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493921676, "post_id": 43765182, "comment_id": 74620647, "body": "@Md.FarhanMemon Please, see in Update 3 above what I see in my console (pry)."}], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1493960784, "post_id": 43793900, "comment_id": 74634064, "body": "Thank you! I changed: 1) <code>companies</code> to <code>company</code> and 2) <code>Media::Medias</code> to <code>Medium::Media</code> as @MichaelChaney suggested. I get back Companies now. How do I get Media for User as well, please?"}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1493966024, "post_id": 43793900, "comment_id": 74636116, "body": "I got it - <code>User.find(2).media.includes(:company)</code> now works just fine :)"}], "tags": [], "owner": {"reputation": 591, "user_id": 1169939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRDKs.jpg?s=128&g=1", "display_name": "marksiemers", "link": "https://stackoverflow.com/users/1169939/marksiemers"}, "is_accepted": false, "score": 0, "last_activity_date": 1493938433, "last_edit_date": 1493938433, "creation_date": 1493937954, "answer_id": 43793900, "question_id": 43765182, "link": "https://stackoverflow.com/questions/43765182/rails-5-retrieve-multiple-objects-through-polymorphic-relationship/43793900#43793900", "title": "Rails 5: retrieve multiple objects through polymorphic relationship", "body": "<p>Try adding an association on your User class:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :companies, through: :accounts\n  has_many :permissions\n  has_many :medias, class_name: 'Media::Medias', through: :permissions,\n       source: :permitable, source_type: 'Media::Medias'\n  has_many :media_companies, through: :medias, source: :companies\nend\n</code></pre>\n\n<p>Then you should be able to do:\n<code>User.find(2).media_companies</code></p>\n\n<p>Since you have a <code>belongs_to</code> association from media to company then you should consider using the singular <code>belongs_to :company</code> in your <code>Media::Medias</code> class.</p>\n\n<p>If you do that, then you would amend the association in the <code>User</code> class to be:</p>\n\n<pre><code>has_many :media_companies, through: :medias, source: :company\n</code></pre>\n\n<p>If you want to keep it plural, then you will need to add an association option to get it to work (to avoid the <code>NameError: uninitialized constant Media::Medias::Companies</code> error):</p>\n\n<pre><code>module Media\n  class Medias &lt; ApplicationRecord\n    belongs_to :companies, class_name: :Company, optional: true, inverse_of: :medias\n    ...\n  end\nend\n</code></pre>\n\n<p>It would be more conventional to just switch it to singular though:</p>\n\n<pre><code>belongs_to :company, optional: true, inverse_of: :medias\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 1, "creation_date": 1494070645, "post_id": 43812447, "comment_id": 74678338, "body": "Thank you, this helps! I revised my models, tables, columns according to your suggestion &amp; <a href=\"http://guides.rubyonrails.org/active_record_basics.html#naming-conventions\" rel=\"nofollow noreferrer\">Rails docs</a>. It works just fine and looks nice :) Rails community the best!"}], "tags": [], "owner": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "is_accepted": true, "score": 1, "last_activity_date": 1494012384, "creation_date": 1494012384, "answer_id": 43812447, "question_id": 43765182, "link": "https://stackoverflow.com/questions/43765182/rails-5-retrieve-multiple-objects-through-polymorphic-relationship/43812447#43812447", "title": "Rails 5: retrieve multiple objects through polymorphic relationship", "body": "<p>To get this out of comments, it looks like the issue (or at least a large issue) is the confusion of plural/singular elements in model names and associations.  In general:</p>\n\n<ol>\n<li>Model names are singular.  In this case, \"medium\" is the singular and \"media\" is the plural.</li>\n<li>When using the association constructs in models, a \"has_many\" will typically take a plural whereas a \"belongs_to\" will take a singular.  So, expect <code>has_many :companies</code> and <code>belongs_to :user</code>.</li>\n<li>The underlying table names are plural. So, the \"Medium\" model is based on the \"media\" table.</li>\n</ol>\n\n<p>With that out of the way, I created a simple Rails app which serves as a minimal working example of the above code.  Since the \"Account\" model doesn't appear here I removed the corresponding elements from the Company model.  I also added inverse associations.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :permissions, inverse_of: :user\n  has_many :media, class_name: 'Medium::Medium', through: :permissions, source: :permitable, source_type: 'Medium::Medium'\nend\n\nclass Company &lt; ApplicationRecord\n  has_many :media, class_name: 'Medium::Medium', inverse_of: :company\nend\n\nclass Medium::Medium &lt; ApplicationRecord\n  belongs_to :company, optional: true, inverse_of: :media\n  has_many :permissions, class_name: 'Permission', as: :permitable, inverse_of: :permitable\n  has_many :users, through: :permissions\nend\n\nclass Permission &lt; ApplicationRecord\n  belongs_to :permitable, polymorphic: true, inverse_of: :permissions\n  belongs_to :user, inverse_of: :permissions\nend\n</code></pre>\n\n<p>Sample console session with test data:</p>\n\n<pre><code>2.2.7 :001 &gt; Company.create(name: 'IBM')\n   (0.1ms)  begin transaction\n  SQL (0.4ms)  INSERT INTO \"companies\" (\"name\", \"created_at\", \"updated_at\") VALUES (?, ?, ?)  [[\"name\", \"IBM\"], [\"created_at\", \"2017-05-05 19:11:49.017155\"], [\"updated_at\", \"2017-05-05 19:11:49.017155\"]]\n   (0.5ms)  commit transaction\n =&gt; #&lt;Company id: 1, name: \"IBM\", created_at: \"2017-05-05 19:11:49\", updated_at: \"2017-05-05 19:11:49\"&gt; \n2.2.7 :002 &gt; User.create(name: 'Joe')\n   (0.0ms)  begin transaction\n  SQL (0.8ms)  INSERT INTO \"users\" (\"name\", \"created_at\", \"updated_at\") VALUES (?, ?, ?)  [[\"name\", \"Joe\"], [\"created_at\", \"2017-05-05 19:11:59.401417\"], [\"updated_at\", \"2017-05-05 19:11:59.401417\"]]\n   (2.3ms)  commit transaction\n =&gt; #&lt;User id: 1, name: \"Joe\", created_at: \"2017-05-05 19:11:59\", updated_at: \"2017-05-05 19:11:59\"&gt; \n2.2.7 :003 &gt; Medium::Medium.create(name: 'TV')\n   (0.0ms)  begin transaction\n  SQL (0.2ms)  INSERT INTO \"medium_media\" (\"name\", \"created_at\", \"updated_at\") VALUES (?, ?, ?)  [[\"name\", \"TV\"], [\"created_at\", \"2017-05-05 19:12:11.453440\"], [\"updated_at\", \"2017-05-05 19:12:11.453440\"]]\n   (2.0ms)  commit transaction\n =&gt; #&lt;Medium::Medium id: 1, company_id: nil, name: \"TV\", created_at: \"2017-05-05 19:12:11\", updated_at: \"2017-05-05 19:12:11\"&gt; \n2.2.7 :004 &gt; Medium::Medium.create(name: 'Newspaper')\n   (0.1ms)  begin transaction\n  SQL (0.3ms)  INSERT INTO \"medium_media\" (\"name\", \"created_at\", \"updated_at\") VALUES (?, ?, ?)  [[\"name\", \"Newspaper\"], [\"created_at\", \"2017-05-05 19:12:18.433671\"], [\"updated_at\", \"2017-05-05 19:12:18.433671\"]]\n   (2.0ms)  commit transaction\n =&gt; #&lt;Medium::Medium id: 2, company_id: nil, name: \"Newspaper\", created_at: \"2017-05-05 19:12:18\", updated_at: \"2017-05-05 19:12:18\"&gt; \n2.2.7 :005 &gt; user = User.first\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n =&gt; #&lt;User id: 1, name: \"Joe\", created_at: \"2017-05-05 19:11:59\", updated_at: \"2017-05-05 19:11:59\"&gt; \n2.2.7 :006 &gt; user.permissions.create(permitable: Medium::Medium.first)\n  Medium::Medium Load (0.2ms)  SELECT  \"medium_media\".* FROM \"medium_media\" ORDER BY \"medium_media\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n   (0.0ms)  begin transaction\n  SQL (0.2ms)  INSERT INTO \"permissions\" (\"permitable_type\", \"permitable_id\", \"user_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?, ?)  [[\"permitable_type\", \"Medium::Medium\"], [\"permitable_id\", 1], [\"user_id\", 1], [\"created_at\", \"2017-05-05 19:12:50.694383\"], [\"updated_at\", \"2017-05-05 19:12:50.694383\"]]\n   (0.5ms)  commit transaction\n =&gt; #&lt;Permission id: 1, permitable_type: \"Medium::Medium\", permitable_id: 1, user_id: 1, created_at: \"2017-05-05 19:12:50\", updated_at: \"2017-05-05 19:12:50\"&gt; \n2.2.7 :007 &gt; user = User.first\n  User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n =&gt; #&lt;User id: 1, name: \"Joe\", created_at: \"2017-05-05 19:11:59\", updated_at: \"2017-05-05 19:11:59\"&gt; \n2.2.7 :008 &gt; user.media\n  Medium::Medium Load (0.2ms)  SELECT  \"medium_media\".* FROM \"medium_media\" INNER JOIN \"permissions\" ON \"medium_media\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = ? AND \"permissions\".\"permitable_type\" = ? LIMIT ?  [[\"user_id\", 1], [\"permitable_type\", \"Medium::Medium\"], [\"LIMIT\", 11]]\n =&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Medium::Medium id: 1, company_id: nil, name: \"TV\", created_at: \"2017-05-05 19:12:11\", updated_at: \"2017-05-05 19:12:11\"&gt;]&gt; \n2.2.7 :009 &gt; user.media.includes(:company)\n  Medium::Medium Load (0.2ms)  SELECT  \"medium_media\".* FROM \"medium_media\" INNER JOIN \"permissions\" ON \"medium_media\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = ? AND \"permissions\".\"permitable_type\" = ? LIMIT ?  [[\"user_id\", 1], [\"permitable_type\", \"Medium::Medium\"], [\"LIMIT\", 11]]\n =&gt; #&lt;ActiveRecord::AssociationRelation [#&lt;Medium::Medium id: 1, company_id: nil, name: \"TV\", created_at: \"2017-05-05 19:12:11\", updated_at: \"2017-05-05 19:12:11\"&gt;]&gt; \n</code></pre>\n\n<p>Just make sure to get your model names correct and it should work.  Sample code may be downloaded here:</p>\n\n<p><a href=\"https://github.com/mdchaney/so_43765182\" rel=\"nofollow noreferrer\">https://github.com/mdchaney/so_43765182</a></p>\n"}], "owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 43812447, "answer_count": 2, "score": 0, "last_activity_date": 1494012384, "creation_date": 1493827904, "last_edit_date": 1493921619, "question_id": 43765182, "link": "https://stackoverflow.com/questions/43765182/rails-5-retrieve-multiple-objects-through-polymorphic-relationship", "title": "Rails 5: retrieve multiple objects through polymorphic relationship", "body": "<p>I need to retrieve multiple objects preferably in single query through polymorphic relationship.</p>\n\n<p>In <strong>User model</strong> I have this:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :companies, through: :accounts\n  has_many :permissions\n  has_many :medias, class_name: 'Media::Medias', through: :permissions,\n           source: :permitable, source_type: 'Media::Medias'\nend\n</code></pre>\n\n<p>then my <strong>Permission model</strong> looks like this:</p>\n\n<pre><code>class Permission &lt; ApplicationRecord\n  belongs_to :permitable, polymorphic: true\n  belongs_to :user, optional: true\nend\n</code></pre>\n\n<p><strong>Media::Medias model</strong>:</p>\n\n<pre><code>module Media\n  class Medias &lt; ApplicationRecord\n    belongs_to :companies, optional: true, inverse_of: :medias\n    has_many :permissions, class_name: 'Permission', as: :permitable\n    has_many :users, through: :permissions\n  end\nend\n</code></pre>\n\n<p><strong>Company model</strong>:</p>\n\n<pre><code>class Company &lt; ApplicationRecord\n  has_many :accounts, dependent: :destroy\n  has_many :users, through: :accounts\n  has_many :medias, class_name: 'Media::Medias', inverse_of: :company\nend\n</code></pre>\n\n<p><strong>How do I return an <code>ActiveRecord::Relation object</code> for all medias for <code>current_user</code> and companies for each media?</strong> It is important, I have to use relationship through <code>Permission</code> model, I should not get companies through <code>Accounts</code>. So far I've set up model so I can use <code>Current.user.medias</code> to get all medias for <code>current_user</code>. </p>\n\n<p>Thank you!</p>\n\n<p><strong>Update</strong></p>\n\n<p>Here is what I got from several versions I tried:</p>\n\n<pre><code>[4] pry(main)&gt; user.medias.includes(:companies).map{|media| media.companies.id }\n  Media::Medias Load (1.4ms)  SELECT \"media_medias\".* FROM \"media_medias\" INNER JOIN \"permissions\" ON \"media_medias\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = $1 AND \"permissions\".\"permitable_type\" = $2  [[\"user_id\", 2], [\"permitable_type\", \"Media::Medias\"]]\nNameError: uninitialized constant Media::Medias::Companies\nfrom /home/ubuntu/.rvm/gems/ruby-2.3.3/gems/activerecord-5.1.0/lib/active_record/inheritance.rb:166:in `compute_type'\n[5] pry(main)&gt; user.medias.preload(:companies).select(['medias.id', 'medias.company.id'])\n  Media::Medias Load (1.3ms)  SELECT medias.id, medias.company.id FROM \"media_medias\" INNER JOIN \"permissions\" ON \"media_medias\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = $1 AND \"permissions\".\"permitable_type\" = $2  [[\"user_id\", 2], [\"permitable_type\", \"Media::Medias\"]]\n=&gt; #&lt;Media::Medias::ActiveRecord_AssociationRelation:0x33dd094&gt;\n[6] pry(main)&gt; user.medias.select(['medias.id', 'medias.company_id'])\n  Media::Medias Load (1.1ms)  SELECT medias.id, medias.company_id FROM \"media_medias\" INNER JOIN \"permissions\" ON \"media_medias\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = $1 AND \"permissions\".\"permitable_type\" = $2  [[\"user_id\", 2], [\"permitable_type\", \"Media::Medias\"]]\n=&gt; #&lt;Media::Medias::ActiveRecord_AssociationRelation:0x3413234&gt;\n</code></pre>\n\n<p><strong>Update 2</strong></p>\n\n<pre><code>[4] pry(main)&gt; puts user.medias.preload(:companies).select(['medias.id', 'medias.company.id'])\n  Media::Medias Load (1.4ms)  SELECT medias.id, medias.company.id FROM \"media_medias\" INNER JOIN \"permissions\" ON \"media_medias\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = $1 AND \"permissions\".\"permitable_type\" = $2  [[\"user_id\", 2], [\"permitable_type\", \"Media::Medias\"]]\nActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  missing FROM-clause entry for table \"medias\"\nLINE 1: SELECT medias.id, medias.company.id FROM \"media_medias\" INNE...\n               ^\n: SELECT medias.id, medias.company.id FROM \"media_medias\" INNER JOIN \"permissions\" ON \"media_medias\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = $1 AND \"permissions\".\"permitable_type\" = $2\nfrom /home/ubuntu/.rvm/gems/ruby-2.3.3/gems/activerecord-5.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:620:in `async_exec'\n[5] pry(main)&gt; puts user.medias.select(['medias.id', 'medias.company_id'])\n  Media::Medias Load (1.2ms)  SELECT medias.id, medias.company_id FROM \"media_medias\" INNER JOIN \"permissions\" ON \"media_medias\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = $1 AND \"permissions\".\"permitable_type\" = $2  [[\"user_id\", 2], [\"permitable_type\", \"Media::Medias\"]]\nActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  missing FROM-clause entry for table \"medias\"\nLINE 1: SELECT medias.id, medias.company_id FROM \"media_medias\" INNE...\n               ^\n: SELECT medias.id, medias.company_id FROM \"media_medias\" INNER JOIN \"permissions\" ON \"media_medias\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = $1 AND \"permissions\".\"permitable_type\" = $2\nfrom /home/ubuntu/.rvm/gems/ruby-2.3.3/gems/activerecord-5.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:620:in `async_exec'\n</code></pre>\n\n<p><strong>Update 3</strong></p>\n\n<pre><code>[1] pry(main)&gt; User.find(2).medias.preload(:companies).select(['medias.id', 'medias.company.id'])\n  User Load (21.5ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  Media::Medias Load (1.7ms)  SELECT medias.id, medias.company.id FROM \"media_medias\" INNER JOIN \"permissions\" ON \"media_medias\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = $1 AND \"permissions\".\"permitable_type\" = $2  [[\"user_id\", 2], [\"permitable_type\", \"Media::Medias\"]]\n=&gt; #&lt;Media::Medias::ActiveRecord_AssociationRelation:0x17688f0&gt;\n[2] pry(main)&gt; User.find(2).medias.select(['medias.id', 'medias.company_id'])\n  User Load (1.7ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  Media::Medias Load (1.8ms)  SELECT medias.id, medias.company_id FROM \"media_medias\" INNER JOIN \"permissions\" ON \"media_medias\".\"id\" = \"permissions\".\"permitable_id\" WHERE \"permissions\".\"user_id\" = $1 AND \"permissions\".\"permitable_type\" = $2  [[\"user_id\", 2], [\"permitable_type\", \"Media::Medias\"]]\n=&gt; #&lt;Media::Medias::ActiveRecord_AssociationRelation:0x2155d90&gt;\n</code></pre>\n"}, {"tags": ["ruby", "acts-as-taggable-on"], "answers": [{"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": true, "score": 0, "last_activity_date": 1493827992, "creation_date": 1493827992, "answer_id": 43765204, "question_id": 43765013, "link": "https://stackoverflow.com/questions/43765013/where-is-rake-task-acts-as-taggable-on-engineinstallmigrations-defined/43765204#43765204", "title": "where is rake task acts_as_taggable_on_engine:install:migrations defined?", "body": "<p><code>install:migrations</code> is inherited from <code>Rails::Engine</code>\n<a href=\"http://edgeguides.rubyonrails.org/engines.html#engine-setup\" rel=\"nofollow noreferrer\">http://edgeguides.rubyonrails.org/engines.html#engine-setup</a> </p>\n\n<p>In the repo: this happens in: <code>/lib/acts_as_taggable_on/engine.rb</code> and the files in <code>db/migrate</code></p>\n"}], "owner": {"reputation": 13, "user_id": 7958557, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NYuuPiqB6qg/AAAAAAAAAAI/AAAAAAAAACw/rT81MHURrrI/photo.jpg?sz=128", "display_name": "Cyberpeng", "link": "https://stackoverflow.com/users/7958557/cyberpeng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 43765204, "answer_count": 1, "score": 0, "last_activity_date": 1493827992, "creation_date": 1493827359, "question_id": 43765013, "link": "https://stackoverflow.com/questions/43765013/where-is-rake-task-acts-as-taggable-on-engineinstallmigrations-defined", "title": "where is rake task acts_as_taggable_on_engine:install:migrations defined?", "body": "<p>In the document of gem acts-as-taggable-on, there is one step about installing migrations after gem installation. (<a href=\"https://github.com/mbleigh/acts-as-taggable-on#post-installation\" rel=\"nofollow noreferrer\">https://github.com/mbleigh/acts-as-taggable-on#post-installation</a>)</p>\n\n<pre><code># For the latest versions :\nrake acts_as_taggable_on_engine:install:migrations\nrake db:migrate\n</code></pre>\n\n<p>I couldn't find the definition of this rake task <code>acts_as_taggable_on_engine:install:migrations</code>. Could any one give any information about this task?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1493827623, "post_id": 43764814, "comment_id": 74571460, "body": "Can you share your routes also?"}, {"owner": {"reputation": 31, "user_id": 7924124, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xoUo8.jpg?s=128&g=1", "display_name": "Tana", "link": "https://stackoverflow.com/users/7924124/tana"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1493828097, "post_id": 43764814, "comment_id": 74571742, "body": "Hi whodini, here my routes :"}, {"owner": {"reputation": 31, "user_id": 7924124, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xoUo8.jpg?s=128&g=1", "display_name": "Tana", "link": "https://stackoverflow.com/users/7924124/tana"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1493828107, "post_id": 43764814, "comment_id": 74571751, "body": "Rails.application.routes.draw do   ActiveAdmin.routes(self)   devise_for :users   root to: &#39;pages#home&#39;   resources :users do     resources :projects   end   resources :clients, only: [:new, :create, :show]   mount Attachinary::Engine =&gt; &quot;/attachinary&quot;   # For details on the DSL available within this file, see <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html</a> end"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 1, "creation_date": 1493828161, "post_id": 43764814, "comment_id": 74571788, "body": "I would recommend appending it to the original post so that its more readible"}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1493828896, "last_edit_date": 1493828896, "creation_date": 1493828494, "answer_id": 43765360, "question_id": 43764814, "link": "https://stackoverflow.com/questions/43764814/devise-doesnt-control-the-exact-id-to-edit-a-user/43765360#43765360", "title": "Devise doesn&#39;t control the exact id to edit a user", "body": "<p>Devise is an authentication library. You have authorization problem. So, you should use something for the authorization. I use <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">CanCan</a>. With it, you can define privileges like this:</p>\n\n<pre><code> can :edit, User, id: current_user.id\n</code></pre>\n\n<p>If you don't want to learn another library, you can always do ghetto-authorization in your controllers. </p>\n\n<pre><code>class UsersController\n  before_action :can_edit_only_self, only: [:edit, :update, :destroy]\n\n  private\n\n  def can_edit_only_self\n    redirect_to root_path unless params[:id] == current_user.id\n  end\nend\n</code></pre>\n\n<hr>\n\n<p><sub>* authentication - I know who you are</sub></p>\n\n<p><sub>* authorization - I know what you are allowed to do</sub></p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1493828944, "post_id": 43765463, "comment_id": 74572212, "body": "&quot;then you don&#39;t need these 2 methods&quot; - then users wouldn&#39;t be able to update even their own info."}, {"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1493829259, "post_id": 43765463, "comment_id": 74572373, "body": "If you type in <code>rake routes</code> in the terminial, you should see that Devise provides a controller action for editing users. It should be <code>users&#47;edit</code> without the <code>:id</code> param. In the Devise::RegistrationsController, the edit method should just use the <code>current_user</code> record for editing the currently logged in user&#39;s account information. I will update my answer with this information"}], "tags": [], "owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "is_accepted": false, "score": 1, "last_activity_date": 1493829517, "last_edit_date": 1493829517, "creation_date": 1493828867, "answer_id": 43765463, "question_id": 43764814, "link": "https://stackoverflow.com/questions/43764814/devise-doesnt-control-the-exact-id-to-edit-a-user/43765463#43765463", "title": "Devise doesn&#39;t control the exact id to edit a user", "body": "<p>The problem is this:</p>\n\n<pre><code>def edit \n  @user = User.find(params[:id])\nend\n\ndef update\n  @user = User.find(params[:id])\n  @user.update(user_params)\n\n  redirect_to user_path(@user)\nend\n</code></pre>\n\n<p>If you don't want to users to be able to edit other users then you don't need these 2 methods. You can also change your route file to:</p>\n\n<pre><code>resources :users, except: [:edit, :update] do\n  resources :projects\nend\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>If you make the previous edits and type <code>rake routes</code> in the terminal, you should see that Devise provides a controller action for editing users. It should be <code>users/edit</code> without the <code>:id</code> param. In the Devise::RegistrationsController, the edit method should just use the <code>current_user</code> helper method for editing the currently logged in user's account information.</p>\n\n<p>If you do want admin user's to be able to edit other users then you'll want to read about one of the following Gems</p>\n\n<ol>\n<li><a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">Can Can</a></li>\n<li><a href=\"https://github.com/elabs/pundit\" rel=\"nofollow noreferrer\">Pundit</a></li>\n</ol>\n\n<p>With these gems you can define which user \"roles\" are allowed to edit other users based on their roles. You can also use these gems to give permission to create, read, update, delete other resources.</p>\n"}], "owner": {"reputation": 31, "user_id": 7924124, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/xoUo8.jpg?s=128&g=1", "display_name": "Tana", "link": "https://stackoverflow.com/users/7924124/tana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493829517, "creation_date": 1493826836, "last_edit_date": 1493828334, "question_id": 43764814, "link": "https://stackoverflow.com/questions/43764814/devise-doesnt-control-the-exact-id-to-edit-a-user", "title": "Devise doesn&#39;t control the exact id to edit a user", "body": "<p>I installed devise in a rails app. If a user is log in he could access to every other users edit pages.</p>\n\n<p>For example, i'm user_id 2, i can edit profile of user 1/3/4/5.....when i modify params manually in the route.</p>\n\n<p>Here my App Controller :</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery\n  before_action :authenticate_user!\n\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n  def configure_permitted_parameters\n    # For additional fields in app/views/devise/registrations/new.html.erb\n    devise_parameter_sanitizer.permit(:sign_up, keys: [:first_name, :last_name, :company, :position, :office_phone, :mobile_phone, :address, :description, :radius, :photo_company_logo, :photo_presentation, photos_projet_1: [], photos_projet_2: [], photos_projet_3: [], photos_projet_4: []])\n\n    # For additional in app/views/devise/registrations/edit.html.erb\n    devise_parameter_sanitizer.permit(:account_update, keys: [:first_name, :last_name, :company, :position, :office_phone, :mobile_phone, :address, :description, :radius, :photo_company_logo, :photo_presentation, photos_projet_1: [], photos_projet_2: [], photos_projet_3: [], photos_projet_4: []])\n  end\nend\n</code></pre>\n\n<p>Here my User Controller :</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  skip_before_action :authenticate_user!, only: [:index, :show]\n  before_action :set_user, only: [:show, :edit, :update]\n\n  def index\n    @client = Client.new\n\n    @users = User.all\n    @users = User.where.not(latitude: nil, longitude: nil)\n\n    @hash = Gmaps4rails.build_markers(@users) do |user, marker|\n      marker.lat user.latitude\n      marker.lng user.longitude\n    end\n\n  end\n\n  def show\n    @client = Client.new\n    @user = User.find(params[:id])\n  end\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n    @user.save\n\n    redirect_to users_path\n  end\n\n\n  def edit\n     @user = User.find(params[:id])\n  end\n\n  def update\n    @user = User.find(params[:id])\n    @user.update(user_params)\n\n    redirect_to user_path(@user)\n  end\n\n\n  private\n\n  def user_params\n    params.require(:user).permit(:company, :first_name, :last_name, :position, :mobile_phone, :office_phone, :email, :address, :description, :radius, :nettoyage_toiture, :photo_company_logo, :photo_presentation, photos_projet_1: [], photos_projet_2: [], photos_projet_3: [], photos_projet_4: [])\n  end\n\n  def set_user\n    @user = User.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p>Here mu User model :</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_attachment :photo_presentation\n  has_attachment  :photo_company_logo\n  has_many :projects, dependent: :nullify\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable\n  #geocoder for google maps\n  geocoded_by :address\n  after_validation :geocode, if: :address_changed?\nend\n</code></pre>\n\n<p>Here my routes :</p>\n\n<pre><code>Rails.application.routes.draw do\n  ActiveAdmin.routes(self)\n  devise_for :users\n  root to: 'pages#home'\n  resources :users do\n    resources :projects\n  end\n  resources :clients, only: [:new, :create, :show]\n  mount Attachinary::Engine =&gt; \"/attachinary\"\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "edited": false, "score": 0, "creation_date": 1493827045, "post_id": 43764857, "comment_id": 74571069, "body": "It didn&#39;t even occur to me that the method could take a block.  Thanks!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "edited": false, "score": 1, "creation_date": 1493827100, "post_id": 43764857, "comment_id": 74571107, "body": "@Trinculo: even if a method doesn&#39;t take a block you can nevertheless always pass one."}, {"owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1493827235, "post_id": 43764857, "comment_id": 74571196, "body": "@SergioTulentsev - Good to know, thanks.  I&#39;m still learning little bits and pieces even after a few years :-)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "edited": false, "score": 0, "creation_date": 1493828429, "post_id": 43764857, "comment_id": 74571948, "body": "@JimU \u201cIt [the block passed] will get executed if <code>validate</code> executes a <code>yield</code> statement.\u201d\u2014strictly speaking, this is wrong."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1493826944, "creation_date": 1493826944, "answer_id": 43764857, "question_id": 43764626, "link": "https://stackoverflow.com/questions/43764626/ruby-syntax-block-after-if-statement-devise-source/43764857#43764857", "title": "Ruby Syntax - Block After if statement (Devise Source)", "body": "<p><a href=\"https://github.com/plataformatec/devise/blob/master/lib/devise/strategies/authenticatable.rb#L35\" rel=\"nofollow noreferrer\"><code>Devise::Strategies::Authenticable#validate</code></a> accepts a block.</p>\n\n<p>The code you posted is a short form of:</p>\n\n<pre><code>validated = validate(resource) do\n  hashed = true\n  resource.valid_password?(password)\nend\n\nif validated\n  remember_me(resource)\n  resource.after_database_authentication\n  success!(resource)\nend\n</code></pre>\n\n<p>Why would they write it this way?\u2014No idea. Possibly due to the lack of rubocop.</p>\n"}], "owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 43764857, "answer_count": 1, "score": 0, "last_activity_date": 1493827619, "creation_date": 1493826271, "question_id": 43764626, "link": "https://stackoverflow.com/questions/43764626/ruby-syntax-block-after-if-statement-devise-source", "title": "Ruby Syntax - Block After if statement (Devise Source)", "body": "<p>I'm having trouble wrapping my head around this if statement.  It has a conditional that is immediately followed by a block.  What does this mean / why would you choose to do this?  This is from the Devise source code.</p>\n\n<pre><code>   if validate(resource){ hashed = true; resource.valid_password?(password) }\n     remember_me(resource)\n     resource.after_database_authentication\n     success!(resource)\n   end\n</code></pre>\n\n<p>Full class is here: <a href=\"https://github.com/plataformatec/devise/blob/master/lib/devise/strategies/database_authenticatable.rb\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/blob/master/lib/devise/strategies/database_authenticatable.rb</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string", "parsing"], "comments": [{"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1493825367, "post_id": 43764158, "comment_id": 74569921, "body": "we can create those variables just after getting the string results by parsing it as well I think, right?"}, {"owner": {"reputation": 689, "user_id": 3442392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aafaa8822c1eb7bfc68c47e50f83ad62?s=128&d=identicon&r=PG", "display_name": "aqfaridi", "link": "https://stackoverflow.com/users/3442392/aqfaridi"}, "edited": false, "score": 0, "creation_date": 1493828249, "post_id": 43764158, "comment_id": 74571845, "body": "do you want to consider <code>&lt;space&gt;</code> as special character in string ?, ideally you should not"}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 6062167, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-0HW4IV0DibE/AAAAAAAAAAI/AAAAAAAAA00/-7ApPvfwHBs/photo.jpg?sz=128", "display_name": "Pedro Adame Vergara", "link": "https://stackoverflow.com/users/6062167/pedro-adame-vergara"}, "edited": false, "score": 0, "creation_date": 1493826689, "post_id": 43764521, "comment_id": 74570860, "body": "Using <code>for</code> in ruby is considered a really bad practice. You should change to <code>str.chars.each do |char|</code>"}, {"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1493826772, "post_id": 43764521, "comment_id": 74570914, "body": "Thanks for the answer but when I tested this (I replaced str by the example above)  I got as result  <code>Upper : 0 Lower : 10 numbers : 0 special : 0</code>"}, {"owner": {"reputation": 29, "user_id": 5499269, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203018946912927/picture?type=large", "display_name": "Bruno Vieira Costa", "link": "https://stackoverflow.com/users/5499269/bruno-vieira-costa"}, "edited": false, "score": 0, "creation_date": 1493830050, "post_id": 43764521, "comment_id": 74572837, "body": "sorry, i forgot some &quot;|&quot; in the regex"}], "tags": [], "owner": {"reputation": 29, "user_id": 5499269, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203018946912927/picture?type=large", "display_name": "Bruno Vieira Costa", "link": "https://stackoverflow.com/users/5499269/bruno-vieira-costa"}, "is_accepted": false, "score": 2, "last_activity_date": 1493830005, "last_edit_date": 1493830005, "creation_date": 1493825934, "answer_id": 43764521, "question_id": 43764158, "link": "https://stackoverflow.com/questions/43764158/ruby-ror-parsing-a-string-upper/43764521#43764521", "title": "Ruby RoR parsing a string upper", "body": "<p>there are many ways to do this, the most didatic in my opinion is</p>\n\n<pre><code>str = gets.chomp # Here you get the string from user\n@Upper = 0\n@Lower = 0\n@numbers = 0\n@special = 0\nfor char in str.chars do\n    if /[a-z]/=~ char then\n        @Lower += 1\n    elsif /[A-Z]/=~ char then\n        @Upper += 1\n    elsif /[0-9]/=~ char then\n        @numbers += 1\n    else\n        @special += 1\n    end\nend\nputs \"Upper : #{@Upper} Lower : #{@Lower} numbers : #{@numbers} special : #{@special}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 1, "creation_date": 1493827023, "post_id": 43764709, "comment_id": 74571050, "body": "Great !!  it works, thank you very much but can you explain what this does exactly <code>special = s.scan(&#47;[^a-z0-9]&#47;i).count</code> and the <code>&#47;i</code> so I can understand better"}, {"owner": {"reputation": 119, "user_id": 3117115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9ae6f90b0a4869353889b04f73959b3?s=128&d=identicon&r=PG", "display_name": "Matt Antonelli", "link": "https://stackoverflow.com/users/3117115/matt-antonelli"}, "reply_to_user": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1493827869, "post_id": 43764709, "comment_id": 74571619, "body": "Happy to help! The trailing <code>i</code> makes the regex case insensitive, so it&#39;s a shorter way of writing <code>&#47;[^A-Za-z0-9]&#47;</code>. The <code>^</code> means <b>not</b> matching the following characters."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493845075, "post_id": 43764709, "comment_id": 74581166, "body": "Making separate scan and counts for each character type is relatively inefficient, which could be a concern if the string <code>s</code> is extremely long."}], "tags": [], "owner": {"reputation": 119, "user_id": 3117115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9ae6f90b0a4869353889b04f73959b3?s=128&d=identicon&r=PG", "display_name": "Matt Antonelli", "link": "https://stackoverflow.com/users/3117115/matt-antonelli"}, "is_accepted": true, "score": 2, "last_activity_date": 1493826508, "creation_date": 1493826508, "answer_id": 43764709, "question_id": 43764158, "link": "https://stackoverflow.com/questions/43764158/ruby-ror-parsing-a-string-upper/43764709#43764709", "title": "Ruby RoR parsing a string upper", "body": "<pre><code>s = 'Amdh#34HB!x'\n\nupper = s.scan(/[A-Z]/).count\nlower = s.scan(/[a-z]/).count\nnumbers = s.scan(/[0-9]/).count\nspecial = s.scan(/[^a-z0-9]/i).count\n\n\"Upper: #{upper} Lower: #{lower} Numbers: #{numbers} Special: #{special}\"\n\n#=&gt; \"Upper: 3 Lower: 4 Numbers: 2 Special: 2\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1493893932, "post_id": 43769690, "comment_id": 74601099, "body": "Thank you a lot for your help and suggestion!! Could you please  explain more to understand better what the code does exactely."}, {"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1493894608, "post_id": 43769690, "comment_id": 74601552, "body": "I know it&#39;s the declaration of the hash but what <code>upper: &#47;[[:upper:]]&#47;</code> and <code>special: &#47;.&#47;</code> means?  and what if I want to add the length of that <code>str</code> into the hash ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1493933630, "post_id": 43769690, "comment_id": 74626962, "body": "<code>[[:..:]]</code> are <i>POSIX bracket expressions</i>. See the doc for <a href=\"http://ruby-doc.org/core-2.4.0/Regexp.html\" rel=\"nofollow noreferrer\">Regexp</a> and search for &quot;POSIX&quot;. <code>&#47;[[:upper:]]&#47;</code>, <code>&#47;[[:lower:]]&#47;</code> and <code>&#47;[[:digit:]]</code> are similar to the following regexes containing a single character class: <code>&#47;[A-Z]&#47;</code>, <code>&#47;[a-z]&#47;</code> and <code>&#47;[0-9]&#47;&#39;, except the former support unicode characters, such as accented letters. You could alternatively use \\p{} constructs (search on that in the same doc). The regex </code>/./` matches any character (other than a newline), so <code>c =~ &#47;.&#47;</code> will always return <code>0</code> (truthy) if find gets that far (cont...)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1493934227, "post_id": 43769690, "comment_id": 74627204, "body": "...If you are only concerned about supporting ASCII, by all means use <code>&#47;[A-Z]&#47;</code>, <code>&#47;[a-z]&#47;</code> and <code>&#47;[0-9]&#47;</code>. If, however, you need to support unicode in future, someone may have to modify those ASCII-oriented regexes. For that reason, many Ruby coders now used POSIX or <code>\\p{}</code> expressions exclusively."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1493875719, "last_edit_date": 1493875719, "creation_date": 1493844303, "answer_id": 43769690, "question_id": 43764158, "link": "https://stackoverflow.com/questions/43764158/ruby-ror-parsing-a-string-upper/43769690#43769690", "title": "Ruby RoR parsing a string upper", "body": "<p>Here's a way to obtain the counts by making a single pass through the string, regardless of the number of character categories.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>CATS = { upper: /[[:upper:]]/, lower: /[[:lower:]]/,\n         number: /[[:digit:]]/, special: /./ }\n\ndef count_character_types(str)\n  str.each_char.with_object(CATS.keys.product([0]).to_h) do |c,h|\n    k,_ = CATS.find { |k,r| c =~ r } \n    h[k] += 1\n  end\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>h = count_character_types(\"Amdh#34HB!x\")\n  #=&gt; {:upper=&gt;3, :lower=&gt;4, :number=&gt;2, :special=&gt;2} \n</code></pre>\n\n<p>Note that</p>\n\n<pre><code>CATS.keys.product([0]).to_h\n  #=&gt; {:upper=&gt;0, :lower=&gt;0, :number=&gt;0, :special=&gt;0}\n</code></pre>\n\n<p><strong>Convert hash to a string</strong></p>\n\n<p>A hash may be a more useful return value than a string, but if you want a string, there's one more step:</p>\n\n<pre><code>h.map { |k,v| \"#{k.to_s.capitalize} : #{v}\" }.join(' ')\n  #=&gt; \"Upper : 3 Lower : 2 Number : 2 : 4 Special\" \n</code></pre>\n\n<p><code>\"Digit\"</code> would be a more accurate name for the key <code>\"Number\"</code>.</p>\n"}], "owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 43764709, "answer_count": 3, "score": 1, "last_activity_date": 1493875719, "creation_date": 1493824937, "last_edit_date": 1493826838, "question_id": 43764158, "link": "https://stackoverflow.com/questions/43764158/ruby-ror-parsing-a-string-upper", "title": "Ruby RoR parsing a string upper", "body": "<p>I'm new to ruby, I would like to parse each char from this string for example <code>str = \"Amdh#34HB!x\"</code> and get the result like this : </p>\n\n<p>1) into string</p>\n\n<pre><code>\"Upper : 3 Lower : 4 numbers : 2 special : 2\"\n</code></pre>\n\n<p>2)  stock results into variables</p>\n\n<pre><code>@Upper = 3\n@Lower = 4\n@numbers = 2\n@special = 2\n</code></pre>\n\n<p>Any help please ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1493823376, "post_id": 43763459, "comment_id": 74568381, "body": "Why not use a background jobs, <a href=\"http://sidekiq.org/\" rel=\"nofollow noreferrer\">sidekiq</a> e.g.?"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1493903293, "post_id": 43763459, "comment_id": 74607925, "body": "And how does the background job respond to the original HTTP request? I dont want to have to add polling, websockets, or such to the client-side, just not kill the server if there is several 500 to 1000ms slow IO-bound requests"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1493904845, "post_id": 43763459, "comment_id": 74609127, "body": "Asyn jobs can&#39;t respond to http request. It&#39;s all about application architecture, if request to your application spawn another request and IO freez, that&#39;s not a good application design."}], "answers": [{"comments": [{"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1493903460, "post_id": 43764321, "comment_id": 74608051, "body": "How does that allow the background job to respond to the original HTTP request? Seems an entirely different use case, either were the client does not care, or its slow enough the client side can poll for it?"}, {"owner": {"reputation": 3768, "user_id": 1029521, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7ce6f2f15a73bb6012b490dcbc4c1ed5?s=128&d=identicon&r=PG", "display_name": "Max Woolf", "link": "https://stackoverflow.com/users/1029521/max-woolf"}, "reply_to_user": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1493903727, "post_id": 43764321, "comment_id": 74608235, "body": "Rails isn&#39;t an async framework like node. You can see if ActionCable will do what you want, but you may need to rethink the architecture of what you&#39;re trying to achieve."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1493904242, "post_id": 43764321, "comment_id": 74608620, "body": "So potentially slow actions need to be designed to use polling or websockets instead so the work can be offloaded outside Rails (or at least the web workers)? Id really like to avoid that as generally API designs and client side frameworks dont expect that (e.g. using an XHR to populate a table)"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1493904520, "post_id": 43764321, "comment_id": 74608859, "body": "Actually, polling at such a high rate would likely be counterproductive, these actions I was thinking of really are about 500ms total most of the time, maybe 10 seconds worst case if the user has a particular heavy dataset (which is processed by that other server anyway so not my CPU load). Just that I found occasionally they held up all my processes/threads with a big queue of blocking requests..."}], "tags": [], "owner": {"reputation": 3768, "user_id": 1029521, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7ce6f2f15a73bb6012b490dcbc4c1ed5?s=128&d=identicon&r=PG", "display_name": "Max Woolf", "link": "https://stackoverflow.com/users/1029521/max-woolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1493825393, "creation_date": 1493825393, "answer_id": 43764321, "question_id": 43763459, "link": "https://stackoverflow.com/questions/43763459/rails-avoid-blocking-worker-in-slow-controller/43764321#43764321", "title": "Rails avoid blocking worker in slow controller", "body": "<p>In a Rails application, you're better off relying on an external process to run background jobs rather than using Ruby Threads.</p>\n\n<p><a href=\"https://github.com/mperham/sidekiq\" rel=\"nofollow noreferrer\">Sidekiq</a> is a pretty standard gem now for this purpose.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 2533373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75653fc17ba5afe62cbf0e9ae1d2dc0d?s=128&d=identicon&r=PG", "display_name": "Dausuul", "link": "https://stackoverflow.com/users/2533373/dausuul"}, "is_accepted": false, "score": 0, "last_activity_date": 1534465678, "last_edit_date": 1534465678, "creation_date": 1534464515, "answer_id": 51886825, "question_id": 43763459, "link": "https://stackoverflow.com/questions/43763459/rails-avoid-blocking-worker-in-slow-controller/51886825#51886825", "title": "Rails avoid blocking worker in slow controller", "body": "<p>If it takes 10 seconds to process a request, and you want to send your response to the original HTTP request, then you've got to hold open that HTTP connection for 10 seconds. You can't get around that. If your server can handle X HTTP connections, and you have X+1 people making these slow requests... someone <strong>is</strong> going to get blocked.</p>\n\n<p>There are only three possible solutions:</p>\n\n<ul>\n<li><p>Figure out a way to process the requests faster. This is ideal, if you can do it.</p></li>\n<li><p>Don't hold open the HTTP connection. Run a background task (using Sidekiq or similar gem) to do the work. When it's done, send it via websocket, or have the client poll for it. It makes your API more complicated for the client, but as a client I'd rather deal with a little complexity than having my requests blocked and maybe time out.</p></li>\n<li><p>Scale up your server until it can handle the traffic. This is the \"throw money at the problem\" solution. I generally disapprove of this, since you'll have to keep throwing more money every time demand grows. But if your organization has more money than dev time, it might work for a while.</p></li>\n</ul>\n\n<p>Those are your options. </p>\n"}], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534465678, "creation_date": 1493823110, "question_id": 43763459, "link": "https://stackoverflow.com/questions/43763459/rails-avoid-blocking-worker-in-slow-controller", "title": "Rails avoid blocking worker in slow controller", "body": "<p>Generally any DB/File IO even external HTTP requests are pretty quick, but I am finding slower ones can hold up all my workers (and memory limits how many Ruby instances I can run), and creating large numbers of threads per worker has other issues (with CPU or memory heavy actions clogging up the system).</p>\n\n<p>Can I have Rails process these actions in an async manner (more like NodeJS) or else introduce threads for that action in some way?</p>\n\n<p>Since I want to respond to the original request, neither workers or just spawning another thread myself seems appropriate, since Rails will ensure the original thread sends a response when it returns from the controller.</p>\n\n<pre><code>def my_action\n  @data1 = get_data(\"https://slow.com/data\") #e.g. Net::HTTP\n  @data2 = get_data(\"https://slow.com/data2?group_id=#{@data[\"id\"]}\")\n  render\nend\n\n\ndef my_action\n  get_data(\"https://slow.com/data\").then do |data1| # e.g. internal thread, not sure on other options\n    get_data(\"https://slow.com/data2?group_id=#{data[\"id\"]}\").then do |data2|\n      @data1 = data1\n      @data2 = data2\n      render # Appears to have no effect\n    end\n  end\n  # Rails does an implicit \"render\" on return\nend\n\ndef my_action\n  Thread.new do # explicit thread just for this request\n    @data1 = get_data(\"https://slow.com/data\")\n    @data2 = get_data(\"https://slow.com/data2?group_id=#{@data[\"id\"]}\")\n    render\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "windows", "capistrano"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7957997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0b304cc552f3beee853aed7074c068?s=128&d=identicon&r=PG&f=1", "display_name": "Mikkel Riber", "link": "https://stackoverflow.com/users/7957997/mikkel-riber"}, "edited": false, "score": 0, "creation_date": 1494307901, "post_id": 43808752, "comment_id": 74758849, "body": "Okay - so the &quot;run_locally&quot; method is not actually meant for running tasks locally in relation with deployment - or at least not in a cross-platform environment. Based on this feedback I wrote my own deployment strategy that uses git archive to pull the latest head from git to a locally stored tarball and upload this to the remote servers."}], "tags": [], "owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "is_accepted": false, "score": 1, "last_activity_date": 1493998280, "creation_date": 1493998280, "answer_id": 43808752, "question_id": 43762345, "link": "https://stackoverflow.com/questions/43762345/capistrano-3-8-1-deployment-from-windows/43808752#43808752", "title": "Capistrano 3.8.1 deployment from windows", "body": "<p>Commands executed with Capistrano are prefixed with <code>/usr/bin/env</code> by default. If you do not have <code>/usr/bin/env</code> on your system, then the command will fail. I am not familiar with Windows, so I don't know if this is an insurmountable problem.</p>\n\n<p>If you want to remove the <code>/usr/bin/env</code> prefix, you could modify Capistrano's \"command map\" to remove all default behavior:</p>\n\n<pre><code># In deploy.rb\n# NOT RECOMMENDED\nSSHKit.config.command_map = SSHKit::CommandMap.new({})\n</code></pre>\n\n<p>But this will affect local <em>and</em> remote commands, which is not desirable. Again, Capistrano assumes that you want to run things identically in local vs remote environments.</p>\n\n<p>If these limitations and workarounds are too restrictive, you do not have to use <code>run_locally</code>. In fact, <code>run_locally</code> is not very well supported by Capistrano anyway, and the maintainers (myself included) <a href=\"https://github.com/capistrano/sshkit/issues/252\" rel=\"nofollow noreferrer\">discourage using it</a>. Instead, you could can use Ruby's built-in methods for running local commands, like <code>system</code> or back-ticks. </p>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.1/Kernel.html#method-i-system\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.4.1/Kernel.html#method-i-system</a></p>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.1/Kernel.html#method-i-60\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.4.1/Kernel.html#method-i-60</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7957997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0b304cc552f3beee853aed7074c068?s=128&d=identicon&r=PG&f=1", "display_name": "Mikkel Riber", "link": "https://stackoverflow.com/users/7957997/mikkel-riber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493998280, "creation_date": 1493820304, "question_id": 43762345, "link": "https://stackoverflow.com/questions/43762345/capistrano-3-8-1-deployment-from-windows", "title": "Capistrano 3.8.1 deployment from windows", "body": "<p>I've attempted to upgrade our capistrano2 script to latest capistrano, was however struggling to get it to work. In order to limit any problems with the conversion i started an empty project and did <code>cap install</code>.</p>\n\n<p>Added a custom task to run locally on the machine and tried it. Same result.</p>\n\n<p>This is the error I'm getting: <code>Errno::ENOENT: No such file or directory - /usr/bin/env dir</code></p>\n\n<p>Exact instructions:</p>\n\n<p>1) mkdir capdemo</p>\n\n<p>2) cd capdemo</p>\n\n<p>3) cap install</p>\n\n<p>4) create file under lib/capistrano/tasks/foo.rake with this content:</p>\n\n<p><code>namespace :foo do\n  desc \"Foo\"\n  task :local do\n      run_locally do\n          execute :dir\n      end\n  end\nend</code></p>\n\n<p>5) Run <code>cap staging foo:local</code></p>\n\n<p>I'm running on windows 10, ruby 2.2.4 and capistrano 3.8.1</p>\n\n<pre><code>```mr@MR-LAPTOP MINGW64 ~/inpay_git/capdemo\n$ cap staging foo:local -p --trace\n** Invoke staging (first_time)\n** Execute staging\n** Invoke load:defaults (first_time)\n** Execute load:defaults\n** Invoke foo:local (first_time)\n** Execute foo:local\nConfig variable set: :print_config_variables =&gt; true\nConfig variable set: :stage =&gt; :staging\nConfig variable set: :scm =&gt; :\"default-git\"\nConfig variable set: :branch =&gt; \"master\"\nConfig variable set: :deploy_to =&gt; #&lt;Proc:0x376d6a0@C:/Ruby/224/lib/ruby/gems/2.2.0/gems/capistrano-3.8.1/lib/capistrano/defaults.rb:25 (lambda)&gt;\nConfig variable set: :tmp_dir =&gt; \"/tmp\"\nConfig variable set: :default_env =&gt; {}\nConfig variable set: :keep_releases =&gt; 5\nConfig variable set: :format =&gt; :airbrussh\nConfig variable set: :log_level =&gt; :debug\nConfig variable set: :pty =&gt; false\nConfig variable set: :local_user =&gt; #&lt;Proc:0x33c43f8@C:/Ruby/224/lib/ruby/gems/2.2.0/gems/capistrano-3.8.1/lib/capistrano/defaults.rb:36 (lambda)&gt;\nConfig variable set: :format =&gt; :airbrussh\nConfig variable set: :git_shallow_clone =&gt; false\nConfig variable set: :git_wrapper_path =&gt; #&lt;Proc:0x3776310@C:/Ruby/224/lib/ruby/gems/2.2.0/gems/capistrano-3.8.1/lib/capistrano/scm/git.rb:9 (lambda)&gt;\nConfig variable set: :git_environmental_variables =&gt; #&lt;Proc:0x3775d10@C:/Ruby/224/lib/ruby/gems/2.2.0/gems/capistrano-3.8.1/lib/capistrano/scm/git.rb:15 (lambda)&gt;\nConfig variable set: :application =&gt; \"my_app_name\"\nConfig variable set: :repo_url =&gt; \"git@example.com:me/my_repo.git\"\nConfig variable set: :scm =&gt; :git\n00:00 foo:local\n      01 dir\ncap aborted!\nErrno::ENOENT: No such file or directory - /usr/bin/env dir\nC:/Ruby/224/lib/ruby/2.2.0/open3.rb:193:in `spawn'\nC:/Ruby/224/lib/ruby/2.2.0/open3.rb:193:in `popen_run'\nC:/Ruby/224/lib/ruby/2.2.0/open3.rb:93:in `popen3'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/sshkit-1.13.1/lib/sshkit/backends/local.rb:44:in `execute_command'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/sshkit-1.13.1/lib/sshkit/backends/abstract.rb:141:in `block in create_command_and_execute'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/sshkit-1.13.1/lib/sshkit/backends/abstract.rb:141:in `tap'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/sshkit-1.13.1/lib/sshkit/backends/abstract.rb:141:in `create_command_and_execute'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/sshkit-1.13.1/lib/sshkit/backends/abstract.rb:74:in `execute'\nC:/Users/mr/inpay_git/capdemo/lib/capistrano/tasks/foo.rake:5:in `block (3 levels) in &lt;top (required)&gt;'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/sshkit-1.13.1/lib/sshkit/backends/abstract.rb:29:in `instance_exec'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/sshkit-1.13.1/lib/sshkit/backends/abstract.rb:29:in `run'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/capistrano-3.8.1/lib/capistrano/dsl.rb:70:in `run_locally'\nC:/Users/mr/inpay_git/capdemo/lib/capistrano/tasks/foo.rake:4:in `block (2 levels) in &lt;top (required)&gt;'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `call'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `block in execute'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `each'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/task.rb:250:in `execute'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/airbrussh-1.2.0/lib/airbrussh/rake/context.rb:62:in `execute'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/task.rb:194:in `block in invoke_with_call_chain'\nC:/Ruby/224/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/task.rb:187:in `invoke_with_call_chain'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/task.rb:180:in `invoke'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/application.rb:152:in `invoke_task'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `block (2 levels) in top_level'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `each'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/application.rb:108:in `block in top_level'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/application.rb:117:in `run_with_threads'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/application.rb:102:in `top_level'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/application.rb:80:in `block in run'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/application.rb:178:in `standard_exception_handling'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/rake-12.0.0/lib/rake/application.rb:77:in `run'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/capistrano-3.8.1/lib/capistrano/application.rb:14:in `run'\nC:/Ruby/224/lib/ruby/gems/2.2.0/gems/capistrano-3.8.1/bin/cap:3:in `&lt;top (required)&gt;'\nC:/Ruby/224/bin/cap:22:in `load'\nC:/Ruby/224/bin/cap:22:in `&lt;main&gt;'\nTasks: TOP =&gt; foo:local```\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1493819778, "post_id": 43762046, "comment_id": 74565477, "body": "People usually create two text fields for hours and minutes and put a label with a semicolon in between. Alternatively, one might handle input events and prevent a semicolon removal."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1493820875, "post_id": 43762046, "comment_id": 74566377, "body": "...Or, rather than entering numbers manually, a common implementation is to use a javascript popup &quot;clock&quot; to select the time."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1493823891, "post_id": 43762046, "comment_id": 74568757, "body": "There are libraries for input masks which seems like what you are asking for. google &quot;jquery input mask&quot; and pick one that works for you"}], "owner": {"reputation": 1, "user_id": 7884418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a70bc525de0eb31e4e20a7403658fdf?s=128&d=identicon&r=PG&f=1", "display_name": "gerzson", "link": "https://stackoverflow.com/users/7884418/gerzson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493819779, "creation_date": 1493819549, "last_edit_date": 1493819779, "question_id": 43762046, "link": "https://stackoverflow.com/questions/43762046/create-an-uneditable-character-in-ruby-textfield", "title": "create an uneditable character in ruby textfield", "body": "<p>I need to create an uneditable semicolon in Rails text field for a date. </p>\n\n<p>For instance, the user can enter the hours and the minutes, while the semicolon already there and is not deletable. </p>\n\n<pre><code> &lt;%= text_field_tag(:start_time, '', class: \"timepicker four\", size: 5, \n  maxlength: 5, placeholder: 'HH:MM', value: \n  @booking_item.start_time.strftime('%H') + \":\"+ \n  @booking_item.start_time.strftime('%M')) %&gt;\n</code></pre>\n\n<p>Any solution for this in Ruby? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493819493, "post_id": 43761953, "comment_id": 74565237, "body": "what is <code>@title</code>? where is it initialised?"}, {"owner": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493819563, "post_id": 43761953, "comment_id": 74565299, "body": "sorry, title is initialised in my controller. &quot;@title = data_array&quot; title is an 2d array"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493819810, "post_id": 43761953, "comment_id": 74565509, "body": "you can set <code>name</code> as your <code>method_name</code>, and when selected you can call the corresponding method using <code>send(method_name.to_sym)</code>."}, {"owner": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493820513, "post_id": 43761953, "comment_id": 74566070, "body": "i dont understand it. can you give me an example?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1493823524, "post_id": 43761953, "comment_id": 74568487, "body": "<i>&quot;Here I want to call a method depending on which radio button is checked&quot;</i> did you consider to use JS to do what you want?"}, {"owner": {"reputation": 2062, "user_id": 4896126, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/aUY9T.png?s=128&g=1", "display_name": "Marcos R. Guevara", "link": "https://stackoverflow.com/users/4896126/marcos-r-guevara"}, "edited": false, "score": 0, "creation_date": 1493824035, "post_id": 43761953, "comment_id": 74568870, "body": "retype your question please @Kev_Kev, code with code and text with text."}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1493823827, "post_id": 43763343, "comment_id": 74568719, "body": "Bad thing is he&#39;s trying to do something when the radio button is checked. So isn&#39;t completelly a server side issue."}], "tags": [], "owner": {"reputation": 81, "user_id": 7847273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaUZu.jpg?s=128&g=1", "display_name": "Marta", "link": "https://stackoverflow.com/users/7847273/marta"}, "is_accepted": false, "score": 3, "last_activity_date": 1493822763, "creation_date": 1493822763, "answer_id": 43763343, "question_id": 43761953, "link": "https://stackoverflow.com/questions/43761953/call-controller-method-and-return-variable-to-view/43763343#43763343", "title": "call controller method and return variable to view", "body": "<p>If @title represents a model in which there is for example \"aaa\" field of string type which can have the \"ID\" value, \"Name\" value and \"Artikelnummer\", try use this:</p>\n\n<pre><code>&lt;% @title.each do |row| %&gt;\n      &lt;% if row.aaa == \"ID\" %&gt;\n          #code for ID option\n      &lt;% elsif row.aaa == \"Name\" %&gt;\n          #code for Name option\n      &lt;% elsif row.aaa == \"Artikelnummer %&gt;\n          #code for Artikelnummer option\n      &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>That is my idea. Tell me if it will help you.</p>\n\n<p>But I think you can use form_for helper and radio_button helper inside with its :checked option and the whole form_for you can design via CSS via classes for every <code>&lt;li class=\"sth\"&gt;&lt;%= f.radio_button \"Name\", checked: true%&gt;&lt;/li&gt;</code> but I should check if this solution is right.</p>\n\n<p>Rgds, \nMarta</p>\n"}], "owner": {"reputation": 1, "user_id": 7957894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a5f4047b0e30cd971f90f0d46310940?s=128&d=identicon&r=PG&f=1", "display_name": "Kev_Kev", "link": "https://stackoverflow.com/users/7957894/kev-kev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493837216, "creation_date": 1493819276, "last_edit_date": 1493837216, "question_id": 43761953, "link": "https://stackoverflow.com/questions/43761953/call-controller-method-and-return-variable-to-view", "title": "call controller method and return variable to view", "body": "<p>How can I call a method about a form?</p>\n\n<p>I have 3 <code>radio</code> buttons and I want to call a method depending on which radio button is checked. After the call I have to return the controller a variable to the view. </p>\n\n<p>How can I do that?</p>\n\n<p>My approach:</p>\n\n<p>I want use CSS do design my HTML. That is the reason why I haven't used a form helper:</p>\n\n<pre><code>&lt;div id=\"cx\" class=\"cxs\"&gt;\n  &lt;form&gt;\n    &lt;fieldset&gt;\n      &lt;label&gt;\n        &lt;input type=\"radio\" id=\"cxId\" name=\"checkBox\"&gt; ID\n      &lt;/label&gt;\n      &lt;label&gt;\n        &lt;input type=\"radio\" id=\"cxName\" name=\"checkBox\"&gt; Name\n      &lt;/label&gt;\n      &lt;label&gt;\n        &lt;input type=\"radio\" id=\"cxArtikelnummer\" name=\"checkBox\"&gt; Artikelnummer\n      &lt;/label&gt;\n    &lt;/fieldset&gt;\n    &lt;button type=\"button\" id=\"cxBtn\"&gt;Ok&lt;/button&gt;\n  &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here I want to call a method depending on which radio button is checked (show by <code>name</code>, <code>id</code> or <code>artikelnummer</code>).</p>\n\n<p>I have solved it stati, but the choose have to be dynamic and I thought do that with methods.</p>\n\n<pre><code>&lt;% $i = 0 %&gt;\n  &lt;% $num = @title.count %&gt;\n  &lt;% @title.each do |row| %&gt;\n    Name: &lt;%= row[\"Name\"] %&gt;\n    Durchlauf: &lt;%= $i %&gt; &lt;br&gt;\n  &lt;% $i += 1 %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "forms", "controller"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493819295, "post_id": 43761787, "comment_id": 74565064, "body": "what&#39;s the error?"}, {"owner": {"reputation": 1, "user_id": 7932773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2548e4f319c55828275ffa86a278c7?s=128&d=identicon&r=PG&f=1", "display_name": "NicDVH", "link": "https://stackoverflow.com/users/7932773/nicdvh"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493819560, "post_id": 43761787, "comment_id": 74565298, "body": "I&#39;m not getting any errors, but the data(@message.number and @message.text) will not display."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493820017, "post_id": 43761787, "comment_id": 74565672, "body": "try debugging <code>set_message</code> and <code>message_params</code>, what do you get in them?"}, {"owner": {"reputation": 1, "user_id": 7932773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2548e4f319c55828275ffa86a278c7?s=128&d=identicon&r=PG&f=1", "display_name": "NicDVH", "link": "https://stackoverflow.com/users/7932773/nicdvh"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493820944, "post_id": 43761787, "comment_id": 74566423, "body": "Cannot render console from 70.214.82.43! Allowed networks:      127.0.0.1, ::1, 127.0.0.0/127.255.255.255       ActiveRecord::SchemaMigration Load (0.7ms)  SELECT      &quot;schema_migrations&quot;.* FROM &quot;schema_migrations&quot;        ActionController::RoutingError (No route matches [GET] &quot;/tasks&quot;):"}, {"owner": {"reputation": 1, "user_id": 7932773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2548e4f319c55828275ffa86a278c7?s=128&d=identicon&r=PG&f=1", "display_name": "NicDVH", "link": "https://stackoverflow.com/users/7932773/nicdvh"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493820973, "post_id": 43761787, "comment_id": 74566445, "body": "I think that&#39;s a byebug error though?"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493821733, "post_id": 43761787, "comment_id": 74567027, "body": "just try printing them in logs using <code>puts</code> or <code>p</code>."}, {"owner": {"reputation": 1, "user_id": 7932773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2548e4f319c55828275ffa86a278c7?s=128&d=identicon&r=PG&f=1", "display_name": "NicDVH", "link": "https://stackoverflow.com/users/7932773/nicdvh"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493823554, "post_id": 43761787, "comment_id": 74568517, "body": "Started GET &quot;/&quot; for 70.214.82.43 at 2017-05-03 14:54:19 +0000 Cannot render console from 70.214.82.43! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255 Processing by PagesController#home as HTML   Rendering pages/home.html.erb within layouts/application   Rendering messages/new.html.erb   Rendered messages/_form.html.erb (1.7ms)   Rendered messages/new.html.erb (7.8ms)   Rendered pages/home.html.erb within layouts/application (13.5ms) Completed 200 OK in 246ms (Views: 243.8ms | ActiveRecord: 0.0ms)"}, {"owner": {"reputation": 1, "user_id": 7932773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2548e4f319c55828275ffa86a278c7?s=128&d=identicon&r=PG&f=1", "display_name": "NicDVH", "link": "https://stackoverflow.com/users/7932773/nicdvh"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493823578, "post_id": 43761787, "comment_id": 74568542, "body": "this is the only error I can see"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7932773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2548e4f319c55828275ffa86a278c7?s=128&d=identicon&r=PG&f=1", "display_name": "NicDVH", "link": "https://stackoverflow.com/users/7932773/nicdvh"}, "edited": false, "score": 0, "creation_date": 1493835848, "post_id": 43766147, "comment_id": 74576211, "body": "Thanks so much! I adjusted my program as suggested, but your code is raising a syntax error"}, {"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "reply_to_user": {"reputation": 1, "user_id": 7932773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2548e4f319c55828275ffa86a278c7?s=128&d=identicon&r=PG&f=1", "display_name": "NicDVH", "link": "https://stackoverflow.com/users/7932773/nicdvh"}, "edited": false, "score": 0, "creation_date": 1493835897, "post_id": 43766147, "comment_id": 74576240, "body": "what is the syntax error? and for which controller action?"}, {"owner": {"reputation": 1, "user_id": 7932773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2548e4f319c55828275ffa86a278c7?s=128&d=identicon&r=PG&f=1", "display_name": "NicDVH", "link": "https://stackoverflow.com/users/7932773/nicdvh"}, "edited": false, "score": 0, "creation_date": 1493837240, "post_id": 43766147, "comment_id": 74577029, "body": "I had to adjust the code you had written, but I see you updated it as well. I believe I am getting closer to the problem. My new error is in the set_message as previously thought by Md. Farhan Memon above."}, {"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "reply_to_user": {"reputation": 1, "user_id": 7932773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2548e4f319c55828275ffa86a278c7?s=128&d=identicon&r=PG&f=1", "display_name": "NicDVH", "link": "https://stackoverflow.com/users/7932773/nicdvh"}, "edited": false, "score": 0, "creation_date": 1493839114, "post_id": 43766147, "comment_id": 74578045, "body": "I updated my answer to include more info about Rails routing"}], "tags": [], "owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "is_accepted": false, "score": 0, "last_activity_date": 1493837859, "last_edit_date": 1493837859, "creation_date": 1493831238, "answer_id": 43766147, "question_id": 43761787, "link": "https://stackoverflow.com/questions/43761787/cant-get-user-input-to-display-using-forms-and-controllers-in-ruby-on-rails/43766147#43766147", "title": "Can&#39;t get user input to display using forms and controllers in Ruby on Rails", "body": "<p>To start this is how the following files should look:</p>\n\n<p><strong>new.html.erb</strong></p>\n\n<pre><code>&lt;%= render 'messages/form' %&gt;\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Changes made to <em>form.html.erb</em> file below: </p>\n\n<ol>\n<li>the first line <code>form_for</code></li>\n<li>the first <code>text_field_tag</code></li>\n<li>the second <code>text_field_tag</code></li>\n<li>changed <code>submit_tag</code> to <code>f.submit</code></li>\n</ol>\n\n<p><strong>form.html.erb</strong></p>\n\n<pre><code> &lt;%= form_for @message do |f| %&gt;\n\n    &lt;div class=\"panel panel-info\"&gt;\n      &lt;div class=\"panel-heading\"&gt;\n        &lt;h3 class=\"panel-title\"&gt;Phone Number&lt;/h3&gt;\n      &lt;/div&gt;\n      &lt;div class=\"panel-body\"&gt;\n          &lt;%= f.text_field(:number, placeholder: 'Enter number here...', size: 75) %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"panel panel-info\"&gt;\n      &lt;div class=\"panel-heading\"&gt;\n        &lt;h3 class=\"panel-title\"&gt;SMS Message&lt;/h3&gt;\n      &lt;/div&gt;\n      &lt;div class=\"panel-body\"&gt;\n          &lt;%= f.text_field(:text, placeholder: 'Enter text here...', size: 75) %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n  &lt;%= f.submit(\"Send\", :class =&gt; \"btn btn-success btn-lg\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Secondly, I know it's a long read, but please go through <a href=\"http://guides.rubyonrails.org/form_helpers.html\" rel=\"nofollow noreferrer\">Rails Form Helpers</a> to have a better understanding of how this should all fit together.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Remove <code>set_message</code> from <code>new</code> and <code>create</code> method. Change <code>set_message</code> method as follows:</p>\n\n<pre><code>def set_message\n  @message = Message.find(params[:id])\nend\n</code></pre>\n\n<p>Usually, based on the routes file, you will find a record based on its <code>id</code>. In your terminal run <code>rake routes</code> and you will see that there should be a routes that corresponds to:</p>\n\n<pre><code>messages POST /messages(.:format) messages#create\nnew_message GET /messages/new(.:format) messages#new\nedit_message GET /messages/:id/edit(.:format) messages#edit\n\nmessage GET /messages/:id(.:format) messages#show\n  PATCH /messages/:id(.:format) messages#update\n  PUT /messages/:id(.:format) messages#update\n  DELETE /messages/:id(.:format) messages#destroy\n</code></pre>\n\n<p>which means that it will use the <code>params[:id]</code> value to in the URL and you can use that to find the corresponding <code>Message</code> that has been saved in the database. Also take a look at <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">Rails routing</a> for a better understanding of this.</p>\n"}], "owner": {"reputation": 1, "user_id": 7932773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2548e4f319c55828275ffa86a278c7?s=128&d=identicon&r=PG&f=1", "display_name": "NicDVH", "link": "https://stackoverflow.com/users/7932773/nicdvh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493837859, "creation_date": 1493818819, "question_id": 43761787, "link": "https://stackoverflow.com/questions/43761787/cant-get-user-input-to-display-using-forms-and-controllers-in-ruby-on-rails", "title": "Can&#39;t get user input to display using forms and controllers in Ruby on Rails", "body": "<p>I'm new to coding, and so I'm sure there's a concept that I'm missing that will help me figure this out, but I can't figure out what that is. I have an application where a user (on the home page) enters a phone number and an sms message. After they hit send, it takes them to a page where they can view the data that they inputted. I can't get my application to display the data! In the next step, I will be sending the data to twilio, so I can't change where my home page routes to.</p>\n\n<p>Here is my code:</p>\n\n<p>home.html.erb</p>\n\n<pre><code>&lt;div class=\"jumbotron center\"&gt;\n    &lt;h1&gt;Quick Chat &lt;span class=\"glyphicon glyphicon-phone\" aria-\nhidden=\"true\"&gt;&lt;/span&gt;&lt;/h1&gt;\n    Submit an SMS message here!\n\n&lt;%= render :file =&gt; \"home/ubuntu/workspace/app/views/messages/new.html.erb\" \n%&gt;\n</code></pre>\n\n<p>new.html.erb</p>\n\n<pre><code> &lt;%= render 'messages/form' %&gt;\n\n  &lt;p&gt;\n    &lt;div class=\"panel panel-info\"&gt;\n      &lt;div class=\"panel-heading\"&gt;\n        &lt;h3 class=\"panel-title\"&gt;Phone Number&lt;/h3&gt;\n      &lt;/div&gt;\n      &lt;div class=\"panel-body\"&gt;\n        &lt;%= form_tag(sms_send_path, method: \"post\") do %&gt;\n            &lt;%= text_field_tag(:number, nil, placeholder: 'Enter number \n            here...', size: 75) %&gt;\n          &lt;% end %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/p&gt;\n\n    &lt;p&gt;\n    &lt;div class=\"panel panel-info\"&gt;\n      &lt;div class=\"panel-heading\"&gt;\n        &lt;h3 class=\"panel-title\"&gt;SMS Message&lt;/h3&gt;\n      &lt;/div&gt;\n      &lt;div class=\"panel-body\"&gt;\n        &lt;%= form_tag(sms_send_path, method: \"post\") do %&gt;\n            &lt;%= text_field_tag(:text, nil, placeholder: 'Enter text \n            here...', size: 75) %&gt;\n          &lt;% end %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/p&gt;\n\n\n&lt;%= form_tag(sms_send_path, method: \"post\") do %&gt;\n  &lt;%= submit_tag(\"Send\", :class =&gt; \"btn btn-success btn-lg\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>sms.html.erb</p>\n\n<pre><code>&lt;div class=\"jumbotron center\"&gt;\n    &lt;h1&gt;Quick Chat &lt;span class=\"glyphicon glyphicon-phone\" aria-    hidden=\"true\"&gt;    &lt;/span&gt;&lt;/h1&gt;\n\n   &lt;div class=\"alert alert-success alert-dismissible\" role=\"alert\"&gt;\n    &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-    label=\"Close\"&gt;    &lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;\n    &lt;strong&gt;Success!&lt;/strong&gt; Your SMS message has been sent! &lt;span         class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"&gt;&lt;/span&gt;\n   &lt;/div&gt;\n\n&lt;%= render :file =&gt; \"home/ubuntu/workspace/app/views/messages/show.html.erb\"         %&gt;\n</code></pre>\n\n<p>show.html.erb</p>\n\n<pre><code>&lt;%= render 'messages/form' %&gt;\n\n&lt;p&gt;\n  &lt;div class=\"panel panel-info\"&gt;\n    &lt;div class=\"panel-heading\"&gt;\n      &lt;h3 class=\"panel-title\"&gt;Phone Number&lt;/h3&gt;\n    &lt;/div&gt;\n    &lt;div class=\"panel-body\"&gt;\n      &lt;%= @message.number %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;div class=\"panel panel-info\"&gt;\n    &lt;div class=\"panel-heading\"&gt;\n      &lt;h3 class=\"panel-title\"&gt;SMS Message&lt;/h3&gt;\n    &lt;/div&gt;\n    &lt;div class=\"panel-body\"&gt;\n      &lt;%= @message.text %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>form.html.erb</p>\n\n<pre><code>&lt;%= form_for :message do |f| %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>messages_controller.rb</p>\n\n<pre><code>class MessagesController &lt; ApplicationController\n  before_action :set_message, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @messages = Message.all\n  end\n\n  def show\n    @messages = Message.find(message_params)\n  end\n\n  def new\n    set_message\n    @message = Message.new\n  end\n\n  def edit\n  end\n\n  def create\n    set_message\n    @message = Message.new(message_params)\n    if @message.save\n      redirect_to sms_send_path\n    else\n      redirect_to root_path\n    end\n  end\n\n  def update\n      if @message.update(message_params)\n        redirect_to @message\n      else\n        render :edit\n      end\n  end\n\n  def destroy\n    @message.destroy\n    respond_to do |format|\n      redirect_to messages_url\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_message\n      @message = Message.find(message_params)\n    end\n\n    # Never trust parameters from the scary internet, only allow the white     list through.\n    def message_params\n      params.require(:message).permit(:number, :text)\n    end\n\nend\n</code></pre>\n\n<p>I'm worried I've created one big mess by not grasping a core concept. I have been unable to find the answer by google, but it's possible that's because I've been searching for the wrong question. Thanks for taking the time to help me!</p>\n"}, {"tags": ["ruby", "bash", "shell"], "comments": [{"owner": {"reputation": 19585, "user_id": 3115685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206073fe8f46ef1f9261d75c80c19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "arco444", "link": "https://stackoverflow.com/users/3115685/arco444"}, "edited": false, "score": 1, "creation_date": 1493818314, "post_id": 43761449, "comment_id": 74564243, "body": "How is the <code>ruby version of that folder</code> determined?"}, {"owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "reply_to_user": {"reputation": 19585, "user_id": 3115685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206073fe8f46ef1f9261d75c80c19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "arco444", "link": "https://stackoverflow.com/users/3115685/arco444"}, "edited": false, "score": 0, "creation_date": 1493821544, "post_id": 43761449, "comment_id": 74566905, "body": "@arco444 it uses RVM to set the gemset and ruby version. Both are defined in the Gemfile or .ruby-version file."}, {"owner": {"reputation": 19585, "user_id": 3115685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206073fe8f46ef1f9261d75c80c19c6f?s=128&d=identicon&r=PG&f=1", "display_name": "arco444", "link": "https://stackoverflow.com/users/3115685/arco444"}, "edited": false, "score": 1, "creation_date": 1493821873, "post_id": 43761449, "comment_id": 74567145, "body": "Then I would think your script will need to read the file and parse out the required version before running an <code>rvm use {version}</code> each time a new directory is encountered"}], "answers": [{"tags": [], "owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "is_accepted": true, "score": 0, "last_activity_date": 1500389489, "creation_date": 1500389489, "answer_id": 45170227, "question_id": 43761449, "link": "https://stackoverflow.com/questions/43761449/ruby-script-to-execute-shell-commands-but-doesnt-respect-ruby-version-gem-set/45170227#45170227", "title": "Ruby Script To Execute Shell Commands, But Doesn&#39;t Respect Ruby Version/Gem set", "body": "<p>RVM struggled with this. Once I switched to Rbenv it worked like a charm. </p>\n"}], "owner": {"reputation": 7633, "user_id": 417449, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/313df1d3543ef456912017412509a395?s=128&d=identicon&r=PG", "display_name": "Noah Clark", "link": "https://stackoverflow.com/users/417449/noah-clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 45170227, "answer_count": 1, "score": 0, "last_activity_date": 1500389489, "creation_date": 1493818026, "question_id": 43761449, "link": "https://stackoverflow.com/questions/43761449/ruby-script-to-execute-shell-commands-but-doesnt-respect-ruby-version-gem-set", "title": "Ruby Script To Execute Shell Commands, But Doesn&#39;t Respect Ruby Version/Gem set", "body": "<p>I have a ruby script that goes through and runs bundle update on all the folders in a directory. When I do this though, it uses the ruby version and gemset of the folder where the script is at. Essentially, what I want to do is be able to execute <code>sh scripts/update_gems.sh app_name</code> and have it use the gemset and ruby version of the that folder. </p>\n\n<p>Any thoughts on how to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "winrm", "serverspec"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1493826951, "post_id": 43760540, "comment_id": 74571019, "body": "<code>sample_spec</code> is inside of <code>spec&#47;base</code>?"}, {"owner": {"reputation": 1200, "user_id": 621056, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/168de1b15fc9fc589cbbd8d163ec887e?s=128&d=identicon&r=PG", "display_name": "JaChNo", "link": "https://stackoverflow.com/users/621056/jachno"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1493833200, "post_id": 43760540, "comment_id": 74574645, "body": "@MattSchuchard yes it is."}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1494365848, "post_id": 43760540, "comment_id": 74795551, "body": "What rake task are you executing, why are you setting the unused variable <code>role</code>,  why are you hardcoding the <code>os</code> to be Windows, and if the tests were executing on Ubuntu I would expect more than those two tests to fail."}], "owner": {"reputation": 1200, "user_id": 621056, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/168de1b15fc9fc589cbbd8d163ec887e?s=128&d=identicon&r=PG", "display_name": "JaChNo", "link": "https://stackoverflow.com/users/621056/jachno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493815806, "creation_date": 1493815806, "question_id": 43760540, "link": "https://stackoverflow.com/questions/43760540/serverspec-unable-to-execute-tests-against-remote-windows-ami", "title": "ServerSpec unable to execute tests against remote windows ami", "body": "<p>I have a test machine that contains a serverspec test. This is a ubuntu machine and I want to run the test using WinRM against a windows machine.</p>\n\n<p>when executing the test it immediately fails, it looks like it is trying to run the test locally and not against the remote host.</p>\n\n<p>I have hardcoded the hostname in the spec_helper.rb for now but  I will post the Rakefile for completness</p>\n\n<p>Rakefile:</p>\n\n<pre><code>require 'rake'\nrequire 'rspec/core/rake_task'\n\nhosts = %w(\n</code></pre>\n\n<p>MyHostName\n    )</p>\n\n<pre><code>task :spec =&gt; 'spec:all'\ntask :default =&gt; :spec\nnamespace :spec do\n  task :all =&gt; hosts.map {|h| 'spec:' + h.split('.')[0] }\n  hosts.each do |host|\n    short_name = host.split('.')[0]\n    role       = short_name.match(/[^0-9]+/)[0]\n\n    desc \"Run serverspec to #{host}\"\n    RSpec::Core::RakeTask.new(short_name) do |t|\n      ENV['TARGET_HOST'] = host\n      t.pattern = \"spec/base/*_spec.rb\"\n    end\n  end\nend\n</code></pre>\n\n<p>Spec_helper.rb</p>\n\n<pre><code>require 'serverspec'\nrequire 'winrm'\n\nset :backend, :winrm\n\nuser = \"Packer\"\npass = \"Drj33l1n9\"\nendpoint = \"http://hostname:5985/wsman\"\n\n\n opts = {\n   user: user,\n   password: pass,\n   endpoint: endpoint,\n   operation_timeout: 30,\n }\n\n winrm = WinRM::Connection.new ( opts)\n Specinfra.configuration.winrm = winrm\n</code></pre>\n\n<p>Sample_spec.rb</p>\n\n<pre><code>require 'spec_helper'\nset :os, :family =&gt; 'windows'\n\ndescribe file('c:/windows') do\n  it { should be_directory }\nend\n\ndescribe file('c:/temp/testfile.txt') do\n  it { should be_file }\nend\n\ndescribe service('Schedule') do\n  it { should be_installed }\n  it { should be_enabled }\n  it { should be_running }\n  it { should have_start_mode(\"Automatic\") }\nend\n\ndescribe port(139) do\n  it { should be_listening }\nend\n\ndescribe user('Administrator') do\n  it { should exist }\n  it { should belong_to_group('Administrators')}\nend\n</code></pre>\n\n<p>this is the output of the failures</p>\n\n<pre><code>/usr/bin/ruby2.3 -I/var/lib/gems/2.3.0/gems/rspec-support-3.5.0/lib:/var/lib/gems/2.3.0/gems/rspec-core-3.5.4/lib /var/lib/gems/2.3.0/gems/rspec-core-3.5.4/exe/rspec --pattern spec/base/\\*_spec.rb\n\nFile \"c:/windows\"\n  should be directory (FAILED - 1)\n\nFile \"c:/temp/testfile.txt\"\n  should be file (FAILED - 2)\n</code></pre>\n"}, {"tags": ["ruby", "ubuntu", "rubygems"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1493820094, "post_id": 43760268, "comment_id": 74565742, "body": "Why do you call <code>gem</code> with <code>sudo</code>?"}, {"owner": {"reputation": 487, "user_id": 2519090, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ae0dc51743508b8de141f5d074684310?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2519090/nick"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1493827188, "post_id": 43760268, "comment_id": 74571163, "body": "because if not: <code>ERROR:  While executing gem ... (Gem::FilePermissionError)     You don&#39;t have write permissions for the &#47;var&#47;lib&#47;gems&#47;2.3.0 directory.</code>"}, {"owner": {"reputation": 487, "user_id": 2519090, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ae0dc51743508b8de141f5d074684310?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2519090/nick"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1494329080, "post_id": 43760268, "comment_id": 74772026, "body": "Does anyone know?"}], "owner": {"reputation": 487, "user_id": 2519090, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ae0dc51743508b8de141f5d074684310?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/2519090/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 949, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493815102, "creation_date": 1493815102, "question_id": 43760268, "link": "https://stackoverflow.com/questions/43760268/error-while-trying-to-install-zsteg", "title": "Error while trying to install zsteg", "body": "<p>While trying to install <a href=\"https://github.com/zed-0xff/zsteg\" rel=\"nofollow noreferrer\">zsteg</a> on Ubuntu I encounter the following error:</p>\n\n<pre><code>$ sudo gem install zsteg\nBuilding native extensions.  This could take a while...\nERROR:  Error installing zsteg:\n        ERROR: Failed to build gem native extension.\n\n    current directory: /var/lib/gems/2.3.0/gems/rainbow-2.2.2/ext\n/usr/bin/ruby2.3 mkrf_conf.rb\n\ncurrent directory: /var/lib/gems/2.3.0/gems/rainbow-2.2.2/ext\n/usr/bin/ruby2.3 -rubygems /usr/share/rubygems-integration/all/gems/rake-10.5.0/bin/rake RUBYARCHDIR=/var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/rainbow-2.2.2 RUBYLIBDIR=/var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/rainbow-2.2.2\n/usr/bin/ruby2.3: No such file or directory -- /usr/share/rubygems-integration/all/gems/rake-10.5.0/bin/rake (LoadError)\n\nrake failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/rainbow-2.2.2 for inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/rainbow-2.2.2/gem_make.out\n</code></pre>\n\n<p>ruby2.3, ruby-sec and rake are installed</p>\n\n<p>and also tried:</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>Please help.</p>\n"}, {"tags": ["arrays", "ruby", "random", "sum"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1493815332, "post_id": 43760154, "comment_id": 74561830, "body": "Is there something you have tried? Please show that you&#39;ve made an attempt to solve the problem."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493815711, "post_id": 43760154, "comment_id": 74562134, "body": "To be fair, that &quot;duplicate&quot; is not an answer in ruby... But you can&#39;t really ask such a broad question, in a specific language, without showing your attempt at a solution first."}, {"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1493816279, "post_id": 43760154, "comment_id": 74562560, "body": "@MarkThomas I edit my question , and it&#39;s my try"}, {"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493816612, "post_id": 43760154, "comment_id": 74562810, "body": "@TomLord I&#39;m sorry about the mistake, I have the code about the question, but I think there are not really hit the question core, so I don&#39;t know should me put it on my question."}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1493816051, "post_id": 43760464, "comment_id": 74562381, "body": "@ndn: It sometimes happens. It seems that if you begin to write an answer before the question is closed, your browser might not notice the question has been closed by the time the answer is finished. Don&#39;t ask me why the server accepts the answer, though."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1493816155, "post_id": 43760464, "comment_id": 74562472, "body": "Note that <code>Array#sum</code> is only included in <code>ActiveSupport</code> (e.g. Rails projects), or in ruby version <code>2.4+</code>. In lower versions of ruby, without <code>require &#39;active_support&#47;core_ext&#47;enumerable.rb&#39;</code> or <code>require &#39;active_support&#47;all&#39;</code>, you need to use <code>.inject(:+)</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1493836478, "post_id": 43760464, "comment_id": 74576616, "body": "Why do you assign to <code>a</code>? It is a local variable (more precisely, a parameter binding, but those behave like local variables), and thus goes out of scope at the end of the block (i.e. immediately after the assignment) anyway."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1493843106, "post_id": 43760464, "comment_id": 74580137, "body": "@J&#246;rgWMittag, I missed this, of course, the assignment is useless here."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 3, "last_activity_date": 1493843054, "last_edit_date": 1493843054, "creation_date": 1493815642, "answer_id": 43760464, "question_id": 43760154, "link": "https://stackoverflow.com/questions/43760154/how-to-know-there-are-several-the-possibilities-of-combination-in-array-in-ruby/43760464#43760464", "title": "How to know there are several the possibilities of combination in array in ruby", "body": "<p>You can use <code>Array#combination</code>:</p>\n\n<pre><code>(1..ary.size).inject(0) do |a, e| \n  a + ary.combination(e).count { |e| e.sum == 9 } \nend\n#=&gt; 4\n</code></pre>\n\n<p>You can use <code>inject(:+)</code> instead of <code>sum</code> if your ruby version is lower than 2.4.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1493817912, "post_id": 43761110, "comment_id": 74563934, "body": "Creates a large intermediate Array may not be suitable for bigger data sets. Very clean solution for the given problem though"}], "tags": [], "owner": {"reputation": 119, "user_id": 3117115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9ae6f90b0a4869353889b04f73959b3?s=128&d=identicon&r=PG", "display_name": "Matt Antonelli", "link": "https://stackoverflow.com/users/3117115/matt-antonelli"}, "is_accepted": true, "score": 3, "last_activity_date": 1493817108, "creation_date": 1493817108, "answer_id": 43761110, "question_id": 43760154, "link": "https://stackoverflow.com/questions/43760154/how-to-know-there-are-several-the-possibilities-of-combination-in-array-in-ruby/43761110#43761110", "title": "How to know there are several the possibilities of combination in array in ruby", "body": "<p>If you're interested in the combinations themselves as opposed to just the count:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>(1..a.size).flat_map { |n| a.combination(n).to_a }\n  .keep_if { |c| c.inject(:+) == 9 }\n\n#=&gt; [[9], [1, 8], [2, 7], [3, 4, 2]]\n</code></pre>\n"}], "owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 43761110, "answer_count": 2, "score": 0, "last_activity_date": 1493843054, "creation_date": 1493814799, "last_edit_date": 1493816155, "question_id": 43760154, "link": "https://stackoverflow.com/questions/43760154/how-to-know-there-are-several-the-possibilities-of-combination-in-array-in-ruby", "title": "How to know there are several the possibilities of combination in array in ruby", "body": "<p>I have an array <code>@ary = [1, 3, 4, 2, 7, 8, 9]</code> and I want to know how many possibilities of combination can add equal to 9.</p>\n\n<p>I should have four possibilities can add equal to 9 <code>[1,8]</code>\u3001<code>[2, 3, 4]</code>\u3001<code>[9]</code>\u3001<code>[2, 7]</code>,but in my code, I just can know two of possibilities and just can show one possibility in this problem.</p>\n\n<pre><code>def sums (num, target)\n random1 = num.sample\n random2 = num.sample\n if random1+random2 == target\n   ary1 = [random1, random2]\n end\nend\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1493821638, "creation_date": 1493821638, "answer_id": 43762894, "question_id": 43759894, "link": "https://stackoverflow.com/questions/43759894/capybara-poltergeist-cant-upload-file/43762894#43762894", "title": "capybara poltergeist cant upload file", "body": "<p>File inputs are often hidden for styling reasons, which makes them non-interactable. Because of that capybara's<code>attach_file</code> has an option to make it easier to temporarily make the file input visible/interactable</p>\n\n<pre><code>page.attach_file field, file_path, make_visible: true\n</code></pre>\n\n<p>That will temporarily apply CSS { opacity: 1, display: 'block', visibility: 'visible' } to the file input element. If that CSS won't make the input visible you can set <code>make_visible</code> to a hash that will rather than <code>true</code></p>\n"}], "owner": {"reputation": 201, "user_id": 6948716, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/57b79e3a77151943a2e0b41b603c38c7?s=128&d=identicon&r=PG&f=1", "display_name": "vladimirProp", "link": "https://stackoverflow.com/users/6948716/vladimirprop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 43762894, "answer_count": 1, "score": 1, "last_activity_date": 1493821638, "creation_date": 1493814080, "question_id": 43759894, "link": "https://stackoverflow.com/questions/43759894/capybara-poltergeist-cant-upload-file", "title": "capybara poltergeist cant upload file", "body": "<p>Hello i am trying to upload file with capybara poltergeist, on hidden input. here is my feature file</p>\n\n<pre><code>  Scenario: Import csv with valid and invalid entries, and try to charge them again\n    And  Joe navigates to \"Lottery import\" page of \"Joe's Test Event\"\n    And  Joe uploads file from path \"/vagrant/tests/capybara/features/admin/lottery_import/step_definition/sample_lottery_entries_list.csv\" into \"file\" field\n</code></pre>\n\n<p>and rb file for import</p>\n\n<pre><code>Then(/^(\\S*) uploads file from path \"([^\"]*)\" into \"([^\"]*)\" field$/) do |user, file_path, field|\n  page.attach_file(field, File.expand_path(file_path), :visible =&gt; false)\n  waits_for_spinner_by_class_not_visible\nend\n</code></pre>\n\n<p>strange this works with Selenuim driver, but not with poltergeist driver.\nAny ideas how to solve this</p>\n"}, {"tags": ["ruby", "string", "split", "ruby-hash"], "comments": [{"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1493891223, "post_id": 43759823, "comment_id": 74599236, "body": "@EricDuminil no, the ** are just used here to bold the <b>word</b>"}], "answers": [{"tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 0, "last_activity_date": 1493814258, "creation_date": 1493814258, "answer_id": 43759954, "question_id": 43759823, "link": "https://stackoverflow.com/questions/43759823/ruby-ror-split-a-hash/43759954#43759954", "title": "Ruby RoR split a hash", "body": "<p>consider below snippet. it will give you a view, that you'll know, where you should start.</p>\n\n<pre><code>h.keys().map {|x| x.split(\" \")}.each do |e|\n  puts \"#{e.first.split(\":\").last}   #{e.last.split(\":\").last}\"\nend\n\n# xy@xy.com   azerty\n# yy@yy.com   qwerty\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1493824136, "post_id": 43760137, "comment_id": 74568957, "body": "Whilst this code snippet is welcome, and may provide some help, it would be <a href=\"//meta.stackexchange.com/q/114762\">greatly improved if it included an explanation</a> of <i>how</i> it addresses the question.  Without that, your answer has much less educational value - remember that you are answering the question for readers in the future, not just the person asking now!  Please <a href=\"https://stackoverflow.com/posts/43760137/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1493814744, "creation_date": 1493814744, "answer_id": 43760137, "question_id": 43759823, "link": "https://stackoverflow.com/questions/43759823/ruby-ror-split-a-hash/43760137#43760137", "title": "Ruby RoR split a hash", "body": "<pre><code>hash.each { |x,y| puts x.split(\" \").to_s.gsub(\"user:\", \"\").to_s.gsub(\"password:\", \"\") }\n# [\"xy@xy.com\", \"azerty\"]\n# [\"yy@yy.com\", \"qwerty\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1493814778, "creation_date": 1493814778, "answer_id": 43760147, "question_id": 43759823, "link": "https://stackoverflow.com/questions/43759823/ruby-ror-split-a-hash/43760147#43760147", "title": "Ruby RoR split a hash", "body": "<p>Make use of Split </p>\n\n<pre><code>hash.each do |key, _val|\n  puts key.split.map { |s| s.split(':').last }.join(' ')\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1494003226, "post_id": 43790549, "comment_id": 74659443, "body": "Thanks! Simple and efficient. Thanks also for the rubular example"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1493924247, "last_edit_date": 1493924247, "creation_date": 1493923426, "answer_id": 43790549, "question_id": 43759823, "link": "https://stackoverflow.com/questions/43759823/ruby-ror-split-a-hash/43790549#43790549", "title": "Ruby RoR split a hash", "body": "<p>Just one more way to handle the situation:</p>\n\n<pre><code>hash.keys.to_s.scan(/user:(\\w+@\\w+.\\w+)\\spassword:(\\w+)/)\n#=&gt; [[\"xy@xy.com\", \"azerty\"], [\"yy@yy.com\", \"qwerty\"]]\n</code></pre>\n\n<p>Breakdown: </p>\n\n<ul>\n<li><code>hash.keys.to_s</code> - an Array of the keys in the Hash (since we don't care about values) converted to a string <code>\"[\\\"user:xy@xy.com password:azerty\\\", \\\"user:yy@yy.com password:qwerty\\\"]\"</code></li>\n<li><code>scan(/user:(\\w+@\\w+.\\w+)\\spassword:(\\w+)/)</code> - an Array of the matching capture groups</li>\n</ul>\n\n<p><a href=\"http://rubular.com/r/4L6Tua0zPc\" rel=\"nofollow noreferrer\">Example</a></p>\n"}], "owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 43790549, "answer_count": 4, "score": -2, "last_activity_date": 1494683318, "creation_date": 1493813869, "last_edit_date": 1494683318, "question_id": 43759823, "link": "https://stackoverflow.com/questions/43759823/ruby-ror-split-a-hash", "title": "Ruby RoR split a hash", "body": "<p>I have a hash like this :</p>\n\n<pre><code>hash = {\"user:**xy@xy.com** password:**azerty**\"=&gt;1,\n        \"user:**yy@yy.com** password:**qwerty**\"=&gt;1}\n</code></pre>\n\n<p>How can I extract only the username (email) and the password of each element to use it separately.</p>\n\n<p>With split method eventually. How to split a string from the second <code>:</code> for example?</p>\n\n<p>I want to have something like this</p>\n\n<pre><code>Username  Password\nxy@xy.com azerty\nyy@yy.com qwerty\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1493813785, "post_id": 43759689, "comment_id": 74560670, "body": "You can use <code>where</code> method, or in your <code>element_of_dropmenu</code> or creating a new variable. If you post how do you set your <code>element_of_dropmenu</code> will be helpful."}], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 7399323, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/64e3a4116517813a2042aed29f841ede?s=128&d=identicon&r=PG&f=1", "display_name": "evans", "link": "https://stackoverflow.com/users/7399323/evans"}, "edited": false, "score": 0, "creation_date": 1493814073, "post_id": 43759805, "comment_id": 74560889, "body": "The amount in the cart is not true for the DeliveryType. This is a different model. i update question."}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 0, "last_activity_date": 1493813807, "creation_date": 1493813807, "answer_id": 43759805, "question_id": 43759689, "link": "https://stackoverflow.com/questions/43759689/remove-element-from-the-array-of-ar-object/43759805#43759805", "title": "remove element from the array of AR object", "body": "<p>I believe you can achieve the result with simple SQL or ActiveRecord methods. Sth like below snippet would solve your problem. </p>\n\n<pre><code>YourModel.where([\"name = ?  AND basket_sum &lt; ? \", \"freedelivery\", 3000])\n</code></pre>\n\n<p>or, </p>\n\n<pre><code>YourModel.where(\"name = ?\", \"freedelivery\").where(\"basket_sum &lt; ?\", 3000)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 485, "user_id": 7399323, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/64e3a4116517813a2042aed29f841ede?s=128&d=identicon&r=PG&f=1", "display_name": "evans", "link": "https://stackoverflow.com/users/7399323/evans"}, "edited": false, "score": 0, "creation_date": 1493814430, "post_id": 43759908, "comment_id": 74561154, "body": "i use rails 3.2.6 and ruby 2.0.0 :)"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 485, "user_id": 7399323, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/64e3a4116517813a2042aed29f841ede?s=128&d=identicon&r=PG&f=1", "display_name": "evans", "link": "https://stackoverflow.com/users/7399323/evans"}, "edited": false, "score": 0, "creation_date": 1493814500, "post_id": 43759908, "comment_id": 74561210, "body": "Then it should work but still you can try you luck with this"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1493814125, "creation_date": 1493814125, "answer_id": 43759908, "question_id": 43759689, "link": "https://stackoverflow.com/questions/43759689/remove-element-from-the-array-of-ar-object/43759908#43759908", "title": "remove element from the array of AR object", "body": "<p>You can't call mutator methods on ActiveRecord from 4.1 onwards check <a href=\"http://%20http://edgeguides.rubyonrails.org/4_1_release_notes.html#active-record-notable-changes\" rel=\"nofollow noreferrer\">release notes</a></p>\n\n<blockquote>\n  <p>Relation no longer has mutator methods like #map! and #delete_if. Convert to an Array by calling #to_a before using these methods.</p>\n</blockquote>\n\n<p>You can make use of <code>select</code></p>\n\n<pre><code>element_of_dropmenu.select {|x| x.name != \"free delivery\" &amp;&amp; basket_sum &gt; 3000}\n</code></pre>\n\n<p>Or as <code>marmeladze</code> suggested you can use where clause or better create a scope</p>\n\n<pre><code>scope :premium, -&gt; { where(\"name = ? AND basket_sum &gt; ?\", \"free delivery\", 3000) }\n</code></pre>\n\n<p>And chain it with association </p>\n\n<pre><code>element_of_dropmenu.premium\n</code></pre>\n"}], "owner": {"reputation": 485, "user_id": 7399323, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/64e3a4116517813a2042aed29f841ede?s=128&d=identicon&r=PG&f=1", "display_name": "evans", "link": "https://stackoverflow.com/users/7399323/evans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1493814306, "creation_date": 1493813452, "last_edit_date": 1493814306, "question_id": 43759689, "link": "https://stackoverflow.com/questions/43759689/remove-element-from-the-array-of-ar-object", "title": "remove element from the array of AR object", "body": "<p>There is a dropdown menu which contains an array of AR objects.<br>\nNeed to show the element if the amount in the cart more than 3000.</p>\n\n<p>I do so  </p>\n\n<pre><code>element_of_dropmenu.delete_if {|x| x.name == \"free delivery\" &amp;&amp; basket_sum &lt; 3000} # remove one element\n</code></pre>\n\n<p>The amount in the cart is not true for the DeliveryType. This is a different model</p>\n\n<p>you can do so</p>\n\n<pre><code>if sum &gt; 3000\n  element_of_dropmenu\nelse\n element_of_dropmenu.drop(1)\nend\n</code></pre>\n\n<p>I need to display all elements when the <code>sum&gt;30</code>, and remove one element when <code>sum&lt;30</code></p>\n\n<p>i use <strong>rails 3.2.6</strong> and <strong>ruby 2.0.0</strong> :)</p>\n\n<p>I think the way to do it wrong and ugly.<br>\nTell me how to correct the code in a better way.<br>\nThanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "cucumber", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 375, "user_id": 289657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42eec92ad34b7fddecbd3e94c94ca21e?s=128&d=identicon&r=PG", "display_name": "diofeher", "link": "https://stackoverflow.com/users/289657/diofeher"}, "edited": false, "score": 0, "creation_date": 1493811162, "post_id": 43757875, "comment_id": 74558730, "body": "Did you include ResponseHelper on the controllers inherited through Devise?"}, {"owner": {"reputation": 4296, "user_id": 1639078, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uHDw2.jpg?s=128&g=1", "display_name": "isuPatches", "link": "https://stackoverflow.com/users/1639078/isupatches"}, "reply_to_user": {"reputation": 375, "user_id": 289657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42eec92ad34b7fddecbd3e94c94ca21e?s=128&d=identicon&r=PG", "display_name": "diofeher", "link": "https://stackoverflow.com/users/289657/diofeher"}, "edited": false, "score": 0, "creation_date": 1493819090, "post_id": 43757875, "comment_id": 74564896, "body": "The shouldn&#39;t be needed since it is only a helper for testing so World(Rack::Test::Methods) World(ResponseHelper) should include what I need"}], "answers": [{"tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": false, "score": 0, "last_activity_date": 1493847527, "creation_date": 1493847527, "answer_id": 43770422, "question_id": 43757875, "link": "https://stackoverflow.com/questions/43757875/undefined-local-variable-or-method-last-request-on-devise-controllers-with-cuc/43770422#43770422", "title": "Undefined local variable or method `last_request&#39; on Devise controllers with Cucumber", "body": "<p>Capybara doesn't (as far as I know) support getting request and response codes. Its designed to work at a higher level of abstraction. So for this sort of test you should not be testing the response code but instead examining the content of the response.</p>\n\n<p>If you want to test response codes you should write a unit test. If you rewrite the test using rspec or mini test you will get access to the methods you want.</p>\n"}, {"tags": [], "owner": {"reputation": 4296, "user_id": 1639078, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uHDw2.jpg?s=128&g=1", "display_name": "isuPatches", "link": "https://stackoverflow.com/users/1639078/isupatches"}, "is_accepted": true, "score": 1, "last_activity_date": 1493855500, "creation_date": 1493855500, "answer_id": 43771780, "question_id": 43757875, "link": "https://stackoverflow.com/questions/43757875/undefined-local-variable-or-method-last-request-on-devise-controllers-with-cuc/43771780#43771780", "title": "Undefined local variable or method `last_request&#39; on Devise controllers with Cucumber", "body": "<p>So this actually turned out to be a bad stacktrace...the real issue was I was missing a require statement before World(ResponseHelper) and it also seems there was a conflicting file in the non-test portion of the app.  Changing the class / file name and adding a require line fixed my last_response issue with Rack::Test::Helpers.</p>\n\n<p>Still no idea why it broke the way it did though, it's very interesting that only Devise controllers seemed to be affected and this was functional elsewhere.</p>\n"}], "owner": {"reputation": 4296, "user_id": 1639078, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/uHDw2.jpg?s=128&g=1", "display_name": "isuPatches", "link": "https://stackoverflow.com/users/1639078/isupatches"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 43771780, "answer_count": 2, "score": 0, "last_activity_date": 1493855500, "creation_date": 1493808457, "question_id": 43757875, "link": "https://stackoverflow.com/questions/43757875/undefined-local-variable-or-method-last-request-on-devise-controllers-with-cuc", "title": "Undefined local variable or method `last_request&#39; on Devise controllers with Cucumber", "body": "<p>I have a basic user update test/endpoint: </p>\n\n<pre><code> def update\n    current_user.update_attributes!(user_params)\n    respond_with current_user\n  end\n</code></pre>\n\n<p>I'm using Cucumber.  Here are some of my versions for reference:</p>\n\n<pre><code> cucumber (2.4.0)\n      builder (&gt;= 2.1.2)\n      cucumber-core (~&gt; 1.5.0)\n      cucumber-wire (~&gt; 0.0.1)\n      diff-lcs (&gt;= 1.1.3)\n      gherkin (~&gt; 4.0)\n      multi_json (&gt;= 1.7.5, &lt; 2.0)\n      multi_test (&gt;= 0.1.2)\n    cucumber-core (1.5.0)\n      gherkin (~&gt; 4.0)\n    cucumber-rails (1.4.5)\n      capybara (&gt;= 1.1.2, &lt; 3)\n      cucumber (&gt;= 1.3.8, &lt; 4)\n      mime-types (&gt;= 1.16, &lt; 4)\n      nokogiri (~&gt; 1.5)\n      railties (&gt;= 3, &lt; 5.1)\n    cucumber-wire (0.0.1)\n\n rspec (3.5.0)\n      rspec-core (~&gt; 3.5.0)\n      rspec-expectations (~&gt; 3.5.0)\n      rspec-mocks (~&gt; 3.5.0)\n    rspec-core (3.5.4)\n      rspec-support (~&gt; 3.5.0)\n    rspec-expectations (3.5.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.5.0)\n    rspec-mocks (3.5.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.5.0)\n    rspec-rails (3.5.2)\n      actionpack (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      railties (&gt;= 3.0)\n      rspec-core (~&gt; 3.5.0)\n      rspec-expectations (~&gt; 3.5.0)\n      rspec-mocks (~&gt; 3.5.0)\n      rspec-support (~&gt; 3.5.0)\n    rspec-sidekiq (3.0.1)\n      rspec-core (~&gt; 3.0, &gt;= 3.0.0)\n      sidekiq (&gt;= 2.4.0)\n    rspec-support (3.5.0)\n</code></pre>\n\n<p>Here's what the test looks like:</p>\n\n<pre><code>  Scenario: A user edits just their profile data\n    Given user with e-mail: \"user@domain.com\"\n    And I am logged in as: \"user@domain.com\"\n    When I update my first name to be: \"TEST\"\n    And the response status should be: 204\n    And my \"first_name\" is updated to be: \"TEST\"\n</code></pre>\n\n<p>Under the hood I have these methods for the update and status part:</p>\n\n<pre><code> When /^I update my first name to be: \"(.*?)\"$/ do |name|\n  put '/v1/users', v1_user: { first_name: name }\nend\n\nThen /^the response status should be: (\\d+)$/ do |code|\n  expect(status).to eq(code.to_i)\nend\n</code></pre>\n\n<p>This helper is meant to help tests:</p>\n\n<pre><code>module ResponseHelper\n  def json\n    JSON.parse(last_response.body)\n  end\n\n  def status\n    response.status\n  end\n\n  def successful\n    response.success?\n  end\n\n  def failure\n    !successful\n  end\n\n  def request\n    last_request\n  end\n\n  def response\n    last_response\n  end\nend\n</code></pre>\n\n<p>And it's included in the env.rb file:</p>\n\n<pre><code>World(Rack::Test::Methods)\nWorld(ResponseHelper)\n</code></pre>\n\n<p>I'm not sure why, but as far as I can tell, something is weird can calling .last_request on any controller that inherits from a Devise controller.  The only tests that are failing are devise controller ones (not request specs, but simple controller/crud actions).  Here's the stacktrace:</p>\n\n<pre><code>Started POST \"/v1/users\" for 127.0.0.1 at 2017-05-03 05:29:15 -0500\n\nNameError - undefined local variable or method `last_request' for #&lt;V1::RegistrationsController:0x007fb4094861f0&gt;\nDid you mean?  stub_request:\n  features/support/response_helper.rb:19:in `request'\n  devise (4.2.1) app/controllers/devise_controller.rb:26:in `_prefixes'\n  actionview (5.0.2) lib/action_view/view_paths.rb:42:in `lookup_context'\n  actionview (5.0.2) lib/action_view/rendering.rb:29:in `process'\n  actionpack (5.0.2) lib/action_controller/metal.rb:190:in `dispatch'\n  actionpack (5.0.2) lib/action_controller/metal.rb:262:in `dispatch'\n  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'\n  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'\n  actionpack (5.0.2) lib/action_dispatch/routing/mapper.rb:16:in `block in &lt;class:Constraints&gt;'\n  actionpack (5.0.2) lib/action_dispatch/routing/mapper.rb:46:in `serve'\n  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:39:in `block in serve'\n  actionpack (5.0.2) lib/action_dispatch/journey/router.rb:26:in `serve'\n  actionpack (5.0.2) lib/action_dispatch/routing/route_set.rb:725:in `call'\n  rack-pjax (1.0.0) lib/rack/pjax.rb:12:in `call'\n  omniauth (1.6.1) lib/omniauth/strategy.rb:189:in `call!'\n  omniauth (1.6.1) lib/omniauth/strategy.rb:167:in `call'\n  bullet (5.5.1) lib/bullet/rack.rb:12:in `call'\n  remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'\n  aws-healthcheck (1.0.1) lib/healthcheck/middleware.rb:10:in `call'\n  warden (1.2.7) lib/warden/manager.rb:36:in `block in call'\n  warden (1.2.7) lib/warden/manager.rb:35:in `call'\n  rack (2.0.1) lib/rack/etag.rb:25:in `call'\n  rack (2.0.1) lib/rack/conditional_get.rb:38:in `call'\n  rack (2.0.1) lib/rack/head.rb:12:in `call'\n  rack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'\n  rack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'\n  actionpack (5.0.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'\n  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'\n  activesupport (5.0.2) lib/active_support/callbacks.rb:97:in `__run_callbacks__'\n  activesupport (5.0.2) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'\n  activesupport (5.0.2) lib/active_support/callbacks.rb:90:in `run_callbacks'\n  actionpack (5.0.2) lib/action_dispatch/middleware/callbacks.rb:36:in `call'\n  actionpack (5.0.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'\n  actionpack (5.0.2) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'\n  actionpack (5.0.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\n  cucumber-rails (1.4.5) lib/cucumber/rails/action_controller.rb:10:in `call'\n  railties (5.0.2) lib/rails/rack/logger.rb:36:in `call_app'\n  railties (5.0.2) lib/rails/rack/logger.rb:24:in `block in call'\n  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'\n  activesupport (5.0.2) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (5.0.2) lib/active_support/tagged_logging.rb:69:in `tagged'\n  railties (5.0.2) lib/rails/rack/logger.rb:24:in `call'\n  actionpack (5.0.2) lib/action_dispatch/middleware/request_id.rb:24:in `call'\n  rack (2.0.1) lib/rack/method_override.rb:22:in `call'\n  rack (2.0.1) lib/rack/runtime.rb:22:in `call'\n  activesupport (5.0.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  actionpack (5.0.2) lib/action_dispatch/middleware/executor.rb:12:in `call'\n  actionpack (5.0.2) lib/action_dispatch/middleware/static.rb:136:in `call'\n  rack (2.0.1) lib/rack/sendfile.rb:111:in `call'\n  railties (5.0.2) lib/rails/engine.rb:522:in `call'\n  rack-test (0.6.3) lib/rack/mock_session.rb:30:in `request'\n  rack-test (0.6.3) lib/rack/test.rb:244:in `process_request'\n  rack-test (0.6.3) lib/rack/test.rb:67:in `post'\n  /Users/Patches/.rbenv/versions/2.3.4/lib/ruby/2.3.0/forwardable.rb:204:in `post'\n  features/step_definitions/user_steps.rb:121:in `block in &lt;top (required)&gt;'\n  cucumber (2.4.0) lib/cucumber/core_ext/instance_exec.rb:25:in `block in cucumber_instance_exec'\n  cucumber (2.4.0) lib/cucumber/core_ext/instance_exec.rb:42:in `cucumber_run_with_backtrace_filtering'\n  cucumber (2.4.0) lib/cucumber/core_ext/instance_exec.rb:13:in `cucumber_instance_exec'\n  cucumber (2.4.0) lib/cucumber/rb_support/rb_step_definition.rb:102:in `invoke'\n  cucumber (2.4.0) lib/cucumber/step_match.rb:27:in `invoke'\n  cucumber (2.4.0) lib/cucumber/step_match.rb:20:in `block in activate'\n  cucumber-core (1.5.0) lib/cucumber/core/test/action.rb:23:in `execute'\n  cucumber-core (1.5.0) lib/cucumber/core/test/step.rb:31:in `execute'\n  cucumber-core (1.5.0) lib/cucumber/core/test/runner.rb:104:in `execute'\n  cucumber-core (1.5.0) lib/cucumber/core/test/runner.rb:51:in `execute'\n  cucumber-core (1.5.0) lib/cucumber/core/test/runner.rb:26:in `test_step'\n  cucumber-core (1.5.0) lib/cucumber/core/test/step.rb:16:in `describe_to'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:26:in `block (3 levels) in describe_to'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:25:in `block (2 levels) in describe_to'\n  cucumber (2.4.0) lib/cucumber/filters/prepare_world.rb:22:in `block in test_case'\n  cucumber-core (1.5.0) lib/cucumber/core/test/around_hook.rb:16:in `execute'\n  cucumber-core (1.5.0) lib/cucumber/core/test/runner.rb:104:in `execute'\n  cucumber-core (1.5.0) lib/cucumber/core/test/runner.rb:51:in `execute'\n  cucumber-core (1.5.0) lib/cucumber/core/test/runner.rb:33:in `around_hook'\n  cucumber-core (1.5.0) lib/cucumber/core/test/around_hook.rb:11:in `describe_to'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:106:in `block (2 levels) in compose_around_hooks'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:107:in `compose_around_hooks'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:24:in `block in describe_to'\n  cucumber-core (1.5.0) lib/cucumber/core/test/runner.rb:18:in `test_case'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:23:in `describe_to'\n  cucumber (2.4.0) lib/cucumber/filters/prepare_world.rb:11:in `test_case'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:23:in `describe_to'\n  cucumber (2.4.0) lib/cucumber/filters/apply_around_hooks.rb:8:in `test_case'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:23:in `describe_to'\n  cucumber (2.4.0) lib/cucumber/filters/apply_after_hooks.rb:5:in `test_case'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:23:in `describe_to'\n  cucumber (2.4.0) lib/cucumber/filters/apply_before_hooks.rb:5:in `test_case'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:23:in `describe_to'\n  cucumber (2.4.0) lib/cucumber/filters/apply_after_step_hooks.rb:8:in `test_case'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:23:in `describe_to'\n  cucumber (2.4.0) lib/cucumber/filters/activate_steps.rb:11:in `test_case'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:23:in `describe_to'\n  cucumber (2.4.0) lib/cucumber/filters/quit.rb:11:in `test_case'\n  cucumber-core (1.5.0) lib/cucumber/core/test/case.rb:23:in `describe_to'\n  cucumber-core (1.5.0) lib/cucumber/core/test/filters/locations_filter.rb:17:in `block in done'\n  cucumber-core (1.5.0) lib/cucumber/core/test/filters/locations_filter.rb:16:in `done'\n  cucumber-core (1.5.0) lib/cucumber/core/filter.rb:61:in `done'\n  cucumber-core (1.5.0) lib/cucumber/core/test/filters/tag_filter.rb:18:in `done'\n  cucumber-core (1.5.0) lib/cucumber/core/compiler.rb:23:in `done'\n  cucumber-core (1.5.0) lib/cucumber/core/gherkin/parser.rb:35:in `done'\n  cucumber-core (1.5.0) lib/cucumber/core.rb:29:in `parse'\n  cucumber-core (1.5.0) lib/cucumber/core.rb:18:in `compile'\n  cucumber (2.4.0) lib/cucumber/runtime.rb:67:in `run!'\n  cucumber (2.4.0) lib/cucumber/cli/main.rb:32:in `execute!'\n  cucumber (2.4.0) bin/cucumber:8:in `&lt;top (required)&gt;'\n  /Users/Patches/.rbenv/versions/2.3.4/bin/cucumber:22:in `&lt;top (required)&gt;'\n  bundler (1.14.6) lib/bundler/cli/exec.rb:74:in `kernel_load'\n  bundler (1.14.6) lib/bundler/cli/exec.rb:27:in `run'\n  bundler (1.14.6) lib/bundler/cli.rb:335:in `exec'\n  bundler (1.14.6) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'\n  bundler (1.14.6) lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'\n  bundler (1.14.6) lib/bundler/vendor/thor/lib/thor.rb:359:in `dispatch'\n  bundler (1.14.6) lib/bundler/cli.rb:20:in `dispatch'\n  bundler (1.14.6) lib/bundler/vendor/thor/lib/thor/base.rb:440:in `start'\n  bundler (1.14.6) lib/bundler/cli.rb:11:in `start'\n  bundler (1.14.6) exe/bundle:32:in `block in &lt;top (required)&gt;'\n  bundler (1.14.6) lib/bundler/friendly_errors.rb:121:in `with_friendly_errors'\n  bundler (1.14.6) exe/bundle:24:in `&lt;top (required)&gt;'\n  /Users/Patches/.rbenv/versions/2.3.4/bin/bundle:22:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1493807084, "post_id": 43757337, "comment_id": 74556010, "body": "Set <code>http.open_timeout</code> and <code>http.read_timeout</code>."}, {"owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1493807371, "post_id": 43757337, "comment_id": 74556191, "body": "Can I also set the connection attempts and print the number of each attempt?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1493807637, "post_id": 43757337, "comment_id": 74556368, "body": "This will simply set the timeout. If you want to make continuous requests one after the other, you have to do so in a loop. In said loop, you can count your attempts."}, {"owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1493811344, "post_id": 43757337, "comment_id": 74558866, "body": "Can you show me working example please?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1493811561, "post_id": 43757337, "comment_id": 74559034, "body": "Try something like <code>count = 0; loop { response = http.request request; break if count &gt; max_retries || satisfactory?(response); }</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1493819979, "post_id": 43757337, "comment_id": 74565642, "body": "@ndn <code>loop.inject(0) ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1493830022, "creation_date": 1493830022, "answer_id": 43765783, "question_id": 43757337, "link": "https://stackoverflow.com/questions/43757337/add-connection-timeout-in-ruby-code/43765783#43765783", "title": "Add connection timeout in ruby code", "body": "<p>You can use a scheduler gem such as <a href=\"https://github.com/jmettraux/rufus-scheduler\" rel=\"nofollow noreferrer\">Rufus Scheduler</a> to schedule your task to run every second.</p>\n\n<p>Install the gem</p>\n\n<pre><code>gem install rufus-scheduler\n</code></pre>\n\n<p>Sample code:</p>\n\n<pre><code>require \"net/http\"\nrequire 'uri'\nrequire \"openssl\"\nrequire \"rufus-scheduler\"\n\nurl = URI(\"https://google.com\")\nhttp = Net::HTTP.new(url.host, url.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nscheduler = Rufus::Scheduler.singleton\n\nscheduler.every '1s' do \n    p Net::HTTP::get(url)\nend\n\nscheduler.join\n</code></pre>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493830022, "creation_date": 1493806882, "question_id": 43757337, "link": "https://stackoverflow.com/questions/43757337/add-connection-timeout-in-ruby-code", "title": "Add connection timeout in ruby code", "body": "<p>How I can configure connection timeout in this ruby code?</p>\n\n<pre><code>http = Net::HTTP.new(url.host, url.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Post.new(url)\nrequest.basic_auth(\"user\", \"pass\")\n</code></pre>\n\n<p>For example every 1 second I would like to make connection attempt and print the result.</p>\n"}, {"tags": ["ruby", "inheritance", "yaml", "ruby-hash"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493805974, "post_id": 43756720, "comment_id": 74555217, "body": "please share example file you want to edit and some code which you tried but failed."}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1493806837, "post_id": 43756720, "comment_id": 74555843, "body": "The <a href=\"http://yaml.org/spec/1.2/spec.html\" rel=\"nofollow noreferrer\">YAML specification</a> only mentions inheritance once and that in the context of how the parser functions. Therefore stating &quot;I have YAML file with inheritance&quot;, apart from missing an article, makes no sense. Please edit your post to include what you mean by inheritance."}], "answers": [{"comments": [{"owner": {"reputation": 248, "user_id": 4752251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-0KhUUj2utxY/AAAAAAAAAAI/AAAAAAAAU6E/ShT3plWsG0o/photo.jpg?sz=128", "display_name": "Johnathan Kanarek", "link": "https://stackoverflow.com/users/4752251/johnathan-kanarek"}, "edited": false, "score": 0, "creation_date": 1493885120, "post_id": 43760311, "comment_id": 74595133, "body": "Thank you, I tried to find a Ruby library that already does that, couldn&#39;t find one."}], "tags": [], "owner": {"reputation": 1284, "user_id": 2731103, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13823b5c6520ca2232296d27e063bfef?s=128&d=identicon&r=PG", "display_name": "Tom Freudenberg", "link": "https://stackoverflow.com/users/2731103/tom-freudenberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1493815214, "creation_date": 1493815214, "answer_id": 43760311, "question_id": 43756720, "link": "https://stackoverflow.com/questions/43756720/save-yaml-with-inheritance-in-ruby/43760311#43760311", "title": "Save YAML with inheritance in ruby", "body": "<p>As far as I know (I also use that option to <em>import</em> and <em>override</em>) the YAML source is read and processed and then the hash elements are exposed and not linked internally. So the mechanism is copy paste override and not linking and overload.</p>\n\n<p>I guess you have to modify the YAML source by opening the file and modify its content if you won't destroy your source.</p>\n"}, {"tags": [], "owner": {"reputation": 248, "user_id": 4752251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-0KhUUj2utxY/AAAAAAAAAAI/AAAAAAAAU6E/ShT3plWsG0o/photo.jpg?sz=128", "display_name": "Johnathan Kanarek", "link": "https://stackoverflow.com/users/4752251/johnathan-kanarek"}, "is_accepted": false, "score": 0, "last_activity_date": 1493896354, "creation_date": 1493896354, "answer_id": 43781278, "question_id": 43756720, "link": "https://stackoverflow.com/questions/43756720/save-yaml-with-inheritance-in-ruby/43781278#43781278", "title": "Save YAML with inheritance in ruby", "body": "<p>To add new section:</p>\n\n<pre><code>config = Api.get(id)\nconfig = \"#{config}\\n    \\n  #{section}: &amp;#{section}\\n    &lt;&lt;: *#{parent_section}\"\n</code></pre>\n\n<p>To add new value:</p>\n\n<pre><code>config = Api.get(id)\nmatches = /^(.+)(\\n  #{section}:\\s*&amp;#{section}\\s*\\n    )(&lt;&lt;:[^\\n]+)?(.*)$/m.match(config)\nconfig = \"#{matches[1]}#{matches[2]}#{matches[3]}\\n    #{key}: #{value}#{matches[4]}\\n\"\n</code></pre>\n"}], "owner": {"reputation": 248, "user_id": 4752251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-0KhUUj2utxY/AAAAAAAAAAI/AAAAAAAAU6E/ShT3plWsG0o/photo.jpg?sz=128", "display_name": "Johnathan Kanarek", "link": "https://stackoverflow.com/users/4752251/johnathan-kanarek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1494683369, "creation_date": 1493805193, "last_edit_date": 1494683369, "question_id": 43756720, "link": "https://stackoverflow.com/questions/43756720/save-yaml-with-inheritance-in-ruby", "title": "Save YAML with inheritance in ruby", "body": "<p>I have YAML file with inheritance and I want to add or edit a key programatically.\nI load the YAML into hash using YAML.load method but when I save the hash back using YAML.dump I lose all the inheritance info.</p>\n\n<p>Is there a way to edit the YAML in Ruby without losing the inheritance info?</p>\n\n<p>YAML example:</p>\n\n<pre><code>main:\n  prod: &amp;prod\n    key1: true\n    key2: 50\n    key3: \"abc\"\n\n  prod_v_3_5: &amp;prod_v_3_5\n    &lt;&lt;: *prod\n    key2: 100\n\n\n  prod_v_3_6: &amp;prod_v_3_6\n    &lt;&lt;: *prod_v_3_5\n    key2: 150\n</code></pre>\n\n<p>Code example:</p>\n\n<pre><code>config = Api.get(id)\nyaml = YAML.load(config)\nyaml[\"main\"][section].store(key, value)\nconfig = YAML.dump(yaml)\nApi.set(id, config)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ahoy"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7383466"}, "edited": false, "score": 0, "creation_date": 1493809527, "post_id": 43757004, "comment_id": 74557624, "body": "Thanks @TomeLord. <code>Visit_duration</code> works great, and I now manage to only track <code>posts#show</code> in my <code>ahoy_events</code>, but I still see <code>ahoy_events</code> are added and same with <code>visits</code>, but in my <code>ahoy_events</code>, it&#39;s <code>visit_id</code> is <code>nil</code>. This is what I added to my view: <code>- ahoy.track &quot;Viewed post&quot;, id: @post.id</code>. What Im doing wrong here?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493810714, "post_id": 43757004, "comment_id": 74558419, "body": "Are you still using <code>ahoy.trackAll();</code>? (Don&#39;t.) Have you restarted the server? (Do.) Is that view only being rendered by the <code>Posts#show</code> action? (You could also consider logging the event <a href=\"https://github.com/ankane/ahoy/blob/master/README.md#ruby\" rel=\"nofollow noreferrer\">in ruby</a>, not JS.)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7383466"}, "edited": false, "score": 0, "creation_date": 1493813656, "post_id": 43757004, "comment_id": 74560576, "body": "Thanks for reply @TomLord, In my <code>Posts#show</code>, I haven&#39;t added any JS, only <code>Ruby</code>: <code>&lt;% ahoy.track &quot;Viewed post&quot;, id: @post.id %&gt;</code>. And yeah I have restarted my server and yes, that view is only rendered by <code>Posts#show</code> action. As I can see from my tables, <code>Ahoy_events</code> works as expected and only tracks from <code>Posts#show</code>, <b>BUT</b> my <code>visits</code> table, track all visits on all views in my application, like <i>homepage, dashboard, posts#new etc</i>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493815097, "post_id": 43757004, "comment_id": 74561644, "body": "Ahh right, sorry - I&#39;m with you now. Again, please just check the documentation -- at a glance, it looks like you could for example place <a href=\"https://github.com/ankane/ahoy/blob/master/README.md#track-visits-immediately\" rel=\"nofollow noreferrer\"><code>skip_before_action :track_ahoy_visit</code></a> in the <code>ApplicationController</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7383466"}, "edited": false, "score": 0, "creation_date": 1493816335, "post_id": 43757004, "comment_id": 74562612, "body": "Thanks @TomLord. Just to double check and to see if its correct practice, Adding  <code>skip_before_action :track_ahoy_visit</code> into <code>ApplicationController</code> will prevent all actions to not track visits, which means no visits will be tracked, But what I did was to add <code>skip_before_action :track_ahoy_visit</code> to all controllers <b>BUT</b> in my <code>PostsController</code> I did: skip_before_action <code>:track_ahoy_visit, except: [:show]</code>, and can see that visits only for this action is added to <code>visits</code> table. Can I do this? Thanks again :)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493817770, "post_id": 43757004, "comment_id": 74563805, "body": "Yes, that would work. Or, you could just place <code>skip_before_action :track_ahoy_visit</code> in the <code>ApplicationController</code> and <code>before_action :track_ahoy_visit, only: :show</code> in the <code>PostsController</code>. However, can I please request that any further issues be raised as new questions in StackOverflow rather than us having a continued discussion thread in these comments? :)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493817860, "post_id": 43757004, "comment_id": 74563896, "body": "(Also, if you&#39;re ONLY using the <code>Ahoy</code> gem for this one tiny use case, then I&#39;d seriously consider just writing your own implementation in that controller action rather than include the third party dependancy!)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7383466"}, "edited": false, "score": 0, "creation_date": 1493817942, "post_id": 43757004, "comment_id": 74563956, "body": "Thanks a bunch @TomLord. I was thinking about the same thing but I need GEO and UTM tracking that <code>ahoy</code> does. You&#39;r the man :)"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1493805965, "creation_date": 1493805965, "answer_id": 43757004, "question_id": 43756675, "link": "https://stackoverflow.com/questions/43756675/ruby-on-rails-how-to-set-up-ahoy-gem/43757004#43757004", "title": "Ruby on Rails - How to set up Ahoy Gem", "body": "<blockquote>\n  <p>I want to add <code>Ahoy.cookie_domain = :all</code> &amp; <code>Ahoy.visit_duration = 1.minute</code>, But I don't know where to add them</p>\n</blockquote>\n\n<p>You add them in the initializer that you created (<code>./config/initializers/ahoy.rb</code>). This is precisely the purpose of files in that folder: Setting configuration values for the application to use.</p>\n\n<blockquote>\n  <p>whatever page I go to is added to my <code>Visits</code> table [...] I only want to track events/visits on one particular action in my whole application</p>\n</blockquote>\n\n<p>The <a href=\"https://github.com/ankane/ahoy/blob/master/README.md#events\" rel=\"nofollow noreferrer\">Gem's README</a> says:</p>\n\n<blockquote>\n  <p>There are three ways to track events. [...] See Ahoy.js for a complete list of features.</p>\n</blockquote>\n\n<p>So start there, and take a look at <a href=\"https://github.com/ankane/ahoy.js#events\" rel=\"nofollow noreferrer\"><code>ahoy.js</code></a> if you need some more advanced configuration. The gem is very flexible - you just need to read the documentation and configure it as needed.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7383466"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1500, "favorite_count": 0, "accepted_answer_id": 43757004, "answer_count": 1, "score": 0, "last_activity_date": 1493805965, "creation_date": 1493805048, "question_id": 43756675, "link": "https://stackoverflow.com/questions/43756675/ruby-on-rails-how-to-set-up-ahoy-gem", "title": "Ruby on Rails - How to set up Ahoy Gem", "body": "<p>Im setting up <code>Ahoy gem</code> into my application, but there are some options that I don't understand where to add.</p>\n\n<p><em>This is what I have done currently:</em></p>\n\n<p><em>1)</em> Added <code>gem \"ahoy_matey\"</code> to my <em>Gem File</em> and ran <code>Bundle install</code> &amp; restarted my server</p>\n\n<p><em>2)</em> Added <code>//= require jquery</code> &amp; <code>//= require ahoy</code> to my <code>application.js</code></p>\n\n<p><em>3)</em> Ran <code>rails generate ahoy:stores:active_record</code> and added new tables to my database by running <code>rake db:migrate</code></p>\n\n<p>I also have <code>ahoy.rb</code> in my <strong>initializers</strong> folder.</p>\n\n<p>At this point I can see that <code>ahoy</code> is added in my application, but not sure how to do some stuff.</p>\n\n<p>I want to add <code>Ahoy.cookie_domain = :all</code> &amp; <code>Ahoy.visit_duration = 1.minute</code>, But I don't know where to add them </p>\n\n<p><em>AND</em> one other issue I have is that whatever page I go to is added to my <code>Visits</code> table <em>(PS: I haven't added any <code>JS</code> or <code>Ruby</code> code for tracking in any pages or controller)</em> and as I see it ,<code>ahoy gem</code> tracks all events/visits in my application. I only want to track events/visits on one particular action in my whole application, <code>posts#show</code> action and rest don't need to be added at all.</p>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1493797239, "post_id": 43753116, "comment_id": 74549455, "body": "It&#39;s a DSL function that comes from the gem <code>moonrope</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1975, "user_id": 2324271, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-pd1cvL1Tlg8/AAAAAAAAAAI/AAAAAAAAAAw/ur8Agb9d_aM/photo.jpg?sz=128", "display_name": "Harsh Wardhan", "link": "https://stackoverflow.com/users/2324271/harsh-wardhan"}, "edited": false, "score": 0, "creation_date": 1493800185, "post_id": 43754821, "comment_id": 74551235, "body": "Please post the relevant sections of the answer here itself instead of posting the link. Links might change over time."}], "tags": [], "owner": {"reputation": 21, "user_id": 3469171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e009b4d8cc1b1d7b3032475d7dd098b?s=128&d=identicon&r=PG&f=1", "display_name": "omarshariffd", "link": "https://stackoverflow.com/users/3469171/omarshariffd"}, "is_accepted": false, "score": 2, "last_activity_date": 1493801264, "last_edit_date": 1493801264, "creation_date": 1493799695, "answer_id": 43754821, "question_id": 43753116, "link": "https://stackoverflow.com/questions/43753116/what-is-authenticator-in-ruby-on-rails/43754821#43754821", "title": "What is authenticator in ruby on rails", "body": "<p>As Aetherus mentioned, it is from the gem <code>moonrope</code>.</p>\n\n<p>Here's how to use it</p>\n\n<p><strong>Getting Started</strong></p>\n\n<p>To begin, you need to define an authenticator. An authenticator's role is to extract an \"identity\" from an API request. In this example, we'll be authenticating our consumers using a token that will be unique to each user. The example below demonstrates a very simple authenticator.</p>\n\n<pre><code>authenticator :default do\n\n  header \"X-Auth-Token\", \"The user's unique API token.\", :example =&gt; 'f29a45f0-b6da-44ae-a029-d4e1744ebaee'\n\n  error 'InvalidAPIToken', \"The API token provided in X-Auth-Token was not valid.\", :attributes =&gt; {:token =&gt; \"The token that was looked up\"}\n\n  lookup do\n    if token = request.headers['X-Auth-Token']\n      if user = User.find_by_api_token(token)\n        user\n      else\n        error 'InvalidAPIToken', :token =&gt; token\n      end\n    end\n  end\n\n  rule :default, \"AccessDenied\", \"Must be authenticated as a user.\" do\n    identity.is_a?(User)\n  end\n\n  rule :anonymous, \"MustBeAnonymous\", \"Must be anonymous.\" do\n    identity.nil?\n  end\n\nend\n</code></pre>\n\n<p>Let's break that down:</p>\n\n<ul>\n<li><p>The first line sets the name of the authenticator. In most cases you'll only ever have one which should be named :default. This will apply to all actions in your API.</p></li>\n<li><p>Next, we define a that the authenticator uses the X-Auth-Token header. We\nprovide a description and example for documentation purposes.</p></li>\n<li><p>Next, we define that a InvalidAPIToken error may be raised when trying to lookup the identity for the request. We include a description plus a hash of attributes that should be returned with the error.</p></li>\n<li><p>Next, we define a lookup block which specifies how to lookup your identity object from the request. This is executed in the same scope that would be used for any action in the API. This block will either return the identity object, raise an error or return nothing. If it returns something, that will be used as the identity object and the request will continue. If it raises an error, the error will be returned to the user and the request will stop. It if returns nothing, the request will continue however there will be no identity.</p></li>\n<li><p>Next, we set a default access rule which is executed on every request to verify that the identity has access to the requested action. The default rule will apply to all actions however you can create others which can be chosen for specific actions or controllers. The block for this rule must return a true or false value depending on whether the identity satisfies the access condition. The second argument is the error code which will be returned if this condition is not satified for the request. The third argument is the description of the actual condition (for documentation).</p></li>\n<li><p>Finally, we define an anonymous rule which can be used for any actions where there should not be any identity provided.</p></li>\n</ul>\n\n<p>Here's a link to provide more information on the usage. <a href=\"https://github.com/adamcooke/moonrope/blob/master/docs/authentication.md\" rel=\"nofollow noreferrer\">moonrope authentication</a></p>\n"}, {"comments": [{"owner": {"reputation": 750, "user_id": 1801879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d8f2eec3417afa4692430fc0f19d201a?s=128&d=identicon&r=PG", "display_name": "user1801879", "link": "https://stackoverflow.com/users/1801879/user1801879"}, "edited": false, "score": 0, "creation_date": 1493822458, "post_id": 43755015, "comment_id": 74567658, "body": "Thanks, this will help me debug in future."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1493800853, "last_edit_date": 1493800853, "creation_date": 1493800310, "answer_id": 43755015, "question_id": 43753116, "link": "https://stackoverflow.com/questions/43753116/what-is-authenticator-in-ruby-on-rails/43755015#43755015", "title": "What is authenticator in ruby on rails", "body": "<blockquote>\n  <p>What is \"authenticator\" in the below code, and where is it defined.</p>\n</blockquote>\n\n<p>Regarding the \"what\" \u2013 <code>authenticator</code> is a method that's being called with a <a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/calling_methods_rdoc.html#label-Positional+Arguments\" rel=\"nofollow noreferrer\">positional argument</a> <code>:server</code> and a <a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/calling_methods_rdoc.html#label-Block+Argument\" rel=\"nofollow noreferrer\">block argument</a> (the <code>do ... end</code> part).</p>\n\n<p>The \"where\" is harder to answer due to Ruby's dynamic nature.</p>\n\n<p>Here's what I would do without an IDE to find the method's source:</p>\n\n<h3>Clone the repo</h3>\n\n<pre><code>$ git clone https://github.com/atech/postal.git\nCloning into 'postal'...\nremote: Counting objects: 1139, done.\nremote: Total 1139 (delta 0), reused 0 (delta 0), pack-reused 1139\nReceiving objects: 100% (1139/1139), 2.09 MiB | 1.22 MiB/s, done.\nResolving deltas: 100% (502/502), done.\n</code></pre>\n\n<h3>Install dependencies</h3>\n\n<pre><code>$ cd postal\n$ bundle install\nFetching gem metadata from https://rubygems.org/............\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nFetching https://github.com/unixcharles/acme-client\nFetching https://github.com/adamcooke/moonrope\nInstalling rake 11.3.0\nInstalling multipart-post 2.0.0\nInstalling concurrent-ruby 1.0.5\n...\n</code></pre>\n\n<h3>Launch <a href=\"http://bundler.io/bundle_console.html\" rel=\"nofollow noreferrer\"><code>bundle console</code></a></h3>\n\n<pre><code>$ bundle console\nirb(main):001:0&gt;\n</code></pre>\n\n<p>Maybe it's a global function:</p>\n\n<pre><code>irb(main):001:0&gt; method(:authenticator)\nNameError: undefined method `authenticator'\n...\n</code></pre>\n\n<p>Nope. But it's probably defined under some module, let's find it:</p>\n\n<pre><code>irb(main):002:0&gt; ObjectSpace.each_object(Module).select { |m| m.instance_methods.include?(:authenticator) }\n#=&gt; [Moonrope::Action, Moonrope::DSL::BaseDSL, Moonrope::DSL::ControllerDSL, Moonrope::DSL::ActionDSL, Moonrope::Controller]\n</code></pre>\n\n<p><code>Moonrope</code> ... never heard of it. Details, please:</p>\n\n<pre><code>irb(main):003:0&gt; Moonrope::DSL::BaseDSL.instance_method(:authenticator).source_location\n#=&gt; [\"/Users/sos/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/moonrope-f56a37b8f121/lib/moonrope/dsl/base_dsl.rb\", 73]\n</code></pre>\n\n<p>It's a gem, let's open it:</p>\n\n<pre><code>irb(main):004:0&gt; ^Z\nzsh: suspended  bundle console\n$ vi +73 $(bundle show moonrope)/lib/moonrope/dsl/base_dsl.rb\n</code></pre>\n\n<p>That looks good:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qldPs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qldPs.png\" alt=\"Vim\"></a></p>\n"}], "owner": {"reputation": 750, "user_id": 1801879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d8f2eec3417afa4692430fc0f19d201a?s=128&d=identicon&r=PG", "display_name": "user1801879", "link": "https://stackoverflow.com/users/1801879/user1801879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 43755015, "answer_count": 2, "score": 4, "last_activity_date": 1493801264, "creation_date": 1493794439, "question_id": 43753116, "link": "https://stackoverflow.com/questions/43753116/what-is-authenticator-in-ruby-on-rails", "title": "What is authenticator in ruby on rails", "body": "<p>I'm trying to read through the code of an open source project on GitHub and finding myself getting confused looking at a file.  What is \"authenticator\" in the below code, and where is it defined.  As far as I understand it is not defined as a class anywhere.  This is the project URL: <a href=\"https://github.com/atech/postal/blob/2fdba0ceb5ec50b00e36fe7a186a27317ee7f04a/api/authenticator.rb\" rel=\"nofollow noreferrer\">github repository</a></p>\n\n<pre><code>authenticator :server do\n  header \"X-Server-API-Key\", \"The API token for a server that you wish to authenticate with.\", :example =&gt; 'f29a45f0d4e1744ebaee'\n  error 'InvalidServerAPIKey', \"The API token provided in X-Server-API-Key was not valid.\", :attributes =&gt; {:token =&gt; \"The token that was looked up\"}\n  error 'ServerSuspended', \"The mail server has been suspended\"\n  lookup do\n    if key = request.headers['X-Server-API-Key']\n      if credential = Credential.where(:type =&gt; 'API', :key =&gt; key).first\n        if credential.server.suspended?\n          error 'ServerSuspended'\n        else\n          credential.use\n          credential\n        end\n      else\n        error 'InvalidServerAPIKey', :token =&gt; key\n      end\n    end\n  end\n  rule :default, \"AccessDenied\", \"Must be authenticated as a server.\" do\n    identity.is_a?(Credential)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "web"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1493795041, "post_id": 43753040, "comment_id": 74548147, "body": "Use <a href=\"https://help.github.com/articles/connecting-to-github-with-ssh/\" rel=\"nofollow noreferrer\">ssh keys</a>. In general, <i>never connect to git repo using passwords</i>."}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1493795140, "post_id": 43753040, "comment_id": 74548192, "body": "Why do you have 3 git inits? Usually one is enough. That&#39;s probably why you are getting an error in second git init call."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493804745, "post_id": 43753040, "comment_id": 74554386, "body": "<i>&quot;The following code gives me an Action Controller Exception&quot;</i> Please show us the actual error message. (Ideally with a reproducible code snippet so we can see exactly what caused it.)"}, {"owner": {"reputation": 4018, "user_id": 135673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ee5885ec2ae8f7834b716a3a2b57c2?s=128&d=identicon&r=PG", "display_name": "froderik", "link": "https://stackoverflow.com/users/135673/froderik"}, "edited": false, "score": 0, "creation_date": 1493808668, "post_id": 43753040, "comment_id": 74557071, "body": "I never bother with a lib for this. It is easy to interact with the command line in ruby."}, {"owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1493816406, "post_id": 43753040, "comment_id": 74562665, "body": "@TomLord git &#39;--git-dir=/opt/git.git&#39; &#39;--work-tree=lib/git&#39; init   2&gt;&amp;1:/opt/git.git: Permission denied"}, {"owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "reply_to_user": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1493816482, "post_id": 43753040, "comment_id": 74562723, "body": "@MarkoAvlija\u0161 I commented out the additional inits, but the error remains."}], "owner": {"reputation": 19, "user_id": 7882671, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-CoAYX-JLTOI/AAAAAAAAAAI/AAAAAAAAE-g/tQTRU-2aEpM/photo.jpg?sz=128", "display_name": "JustusP", "link": "https://stackoverflow.com/users/7882671/justusp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1494853848, "creation_date": 1493794188, "last_edit_date": 1494853848, "question_id": 43753040, "link": "https://stackoverflow.com/questions/43753040/push-file-generated-in-ruby-to-git", "title": "Push file generated in ruby to git", "body": "<p>My app generates a yaml file in the directory lib/git, which I want to then push to git. I have tried to implement this like shown here <a href=\"https://github.com/schacon/ruby-git\" rel=\"nofollow noreferrer\">https://github.com/schacon/ruby-git</a> .</p>\n\n<p>The following code gives me an Action Controller Exception at line <code>Git.init('lib/git',</code>.</p>\n\n<pre><code>g = Git.init\n  Git.init('quota')\n  Git.init('lib/git',\n           { :repository =&gt; '/opt/git.git',\n             :index =&gt; '/tmp/index'})\n\n  saveProject do\n    g.remote('add origin https://*************.git')\n    g.config('user.name', '*************')\n    g.config('user.email', '*************')\n\ng.add(:all=&gt;true)\n\ng.commit(time)\ng.push\n\nend\n</code></pre>\n\n<p>How do I make this work?</p>\n\n<p>EDIT:\nThe exact error is:  <code>'--git-dir=/opt/git.git' '--work-tree=lib/git' init 2&gt;&amp;1:/opt/git.git: Permission denied</code> \nHow would I go about adding an ssh key to my app? That's also not in the docs.</p>\n"}, {"tags": ["php", "ruby", "widget", "podio"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493806639, "post_id": 43752739, "comment_id": 74555715, "body": "Did you try <code>PodioWidget::update_order(&#39;space&#39;, 5293048, [586125, 586124, 586121])</code> ? What do you get?"}, {"owner": {"reputation": 1, "user_id": 3107035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiFqn.jpg?s=128&g=1", "display_name": "Andrianina OELIMAHEFASON", "link": "https://stackoverflow.com/users/3107035/andrianina-oelimahefason"}, "reply_to_user": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1493807531, "post_id": 43752739, "comment_id": 74556304, "body": "@MarkoAvlija\u0161, yes, I&#39;ve try that and got an error  Uncaught PodioBadRequestError: &quot;Invalid value [586125, 586124, 586121] (array): must be integer&quot;"}, {"owner": {"reputation": 149, "user_id": 6420203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdb67acc84917fa1e1610d8344bb08b?s=128&d=identicon&r=PG", "display_name": "Cory Chase - Podio Team Member", "link": "https://stackoverflow.com/users/6420203/cory-chase-podio-team-member"}, "edited": false, "score": 1, "creation_date": 1493818979, "post_id": 43752739, "comment_id": 74564807, "body": "Your original code didn&#39;t work because you created a multi-dimensional array.  Just on a hunch, could you try Md. Farhan Memon&#39;s suggestion using long-form array syntax? (Older versions of PHP don&#39;t support the short-form syntax.)  <code>PodioWidget::update_order(&#39;space&#39;, 5293048, array(586125, 586124, 586121))</code>"}, {"owner": {"reputation": 1, "user_id": 3107035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiFqn.jpg?s=128&g=1", "display_name": "Andrianina OELIMAHEFASON", "link": "https://stackoverflow.com/users/3107035/andrianina-oelimahefason"}, "edited": false, "score": 0, "creation_date": 1493879612, "post_id": 43752739, "comment_id": 74591676, "body": "Already test it but does not work"}, {"owner": {"reputation": 2000, "user_id": 6495121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0yw4K.jpg?s=128&g=1", "display_name": "Pavlo - Podio", "link": "https://stackoverflow.com/users/6495121/pavlo-podio"}, "edited": false, "score": 1, "creation_date": 1493909942, "post_id": 43752739, "comment_id": 74613186, "body": "Can you please share error messages that you are getting for each case?"}, {"owner": {"reputation": 1, "user_id": 3107035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiFqn.jpg?s=128&g=1", "display_name": "Andrianina OELIMAHEFASON", "link": "https://stackoverflow.com/users/3107035/andrianina-oelimahefason"}, "edited": false, "score": 0, "creation_date": 1493984022, "post_id": 43752739, "comment_id": 74646775, "body": "For the <code>PodioWidget::update_order(&#39;space&#39;, 5293048, array(586125, 586124, 586121))</code> I got this response <a href=\"http://prnt.sc/f4e970\" rel=\"nofollow noreferrer\">http://prnt.sc/f4e970</a>"}, {"owner": {"reputation": 2000, "user_id": 6495121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0yw4K.jpg?s=128&g=1", "display_name": "Pavlo - Podio", "link": "https://stackoverflow.com/users/6495121/pavlo-podio"}, "edited": false, "score": 0, "creation_date": 1494612338, "post_id": 43752739, "comment_id": 74920568, "body": "So, you got a successful 204 reply. Do you see widget&#39;s order updated now?"}], "owner": {"reputation": 1, "user_id": 3107035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiFqn.jpg?s=128&g=1", "display_name": "Andrianina OELIMAHEFASON", "link": "https://stackoverflow.com/users/3107035/andrianina-oelimahefason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493797295, "creation_date": 1493793313, "last_edit_date": 1493797295, "question_id": 43752739, "link": "https://stackoverflow.com/questions/43752739/podio-widget-update-order", "title": "Podio widget update order", "body": "<p>According to this doc: <a href=\"https://developers.podio.com/doc/widgets/update-widget-order-22495\" rel=\"nofollow noreferrer\">Update widget order</a></p>\n\n<p>we need to pass 3 arguments when firing the method </p>\n\n<pre><code>PodioWidget::update_order( ref_type, ref_id, widget_list )\n</code></pre>\n\n<p>I have set the update like </p>\n\n<pre><code>PodioWidget::update_order('space', 5293048, \n  array('widget_list' =&gt; array ( 586125, 586124, 586121 )))\n</code></pre>\n\n<blockquote>\n  <p>Uncaught PodioBadRequestError: \"Invalid value {\"widget_list\": [586125,\n  586124, 586121]} (object): must be array\"</p>\n</blockquote>\n\n<p>What should be the 3rd parameter, what should it look like?</p>\n"}, {"tags": ["ruby", "xcode", "xcode-project", "xcodeproj"], "answers": [{"tags": [], "owner": {"reputation": 396, "user_id": 532946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56975ddb712af4507547ee14f0a061ce?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/532946/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1504327654, "creation_date": 1504327654, "answer_id": 46010564, "question_id": 43752553, "link": "https://stackoverflow.com/questions/43752553/ruby-gem-xcodeproj-throws-exception-on-project-save/46010564#46010564", "title": "Ruby gem Xcodeproj throws exception on project save", "body": "<p>This works for me:</p>\n\n<pre><code>targets_to_remove = project.targets.select { |target| target.name == new_target_name }\ntargets_to_remove.each { |target| target.remove_from_project }\n</code></pre>\n\n<p>I believe it's sufficient to just call <code>remove_from_project</code> for it to be removed, and for all references to be cleaned up properly.</p>\n"}], "owner": {"reputation": 456, "user_id": 3503324, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/85egu.jpg?s=128&g=1", "display_name": "farkasseb", "link": "https://stackoverflow.com/users/3503324/farkasseb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1504327654, "creation_date": 1493792627, "question_id": 43752553, "link": "https://stackoverflow.com/questions/43752553/ruby-gem-xcodeproj-throws-exception-on-project-save", "title": "Ruby gem Xcodeproj throws exception on project save", "body": "<p>As I was experimenting with Xcodeproj I found an error that might come from misusing the API. Could you please point out what I am doing wrong?</p>\n\n<pre><code>require 'xcodeproj'\n\nproject = Xcodeproj::Project.new(\"test.xcodeproj\")\nnew_target_name = 'test'\nproject.new_target(:framework, new_target_name, :ios)\nproject.save\n\ntarget_to_remove = project.targets.select {|t| t.name == new_target_name}.first\nproject.targets.delete(target_to_remove)\nproject.save\n\ntarget_to_remove.remove_from_project\n</code></pre>\n\n<p>This snippet gives me the following error message.</p>\n\n<pre><code>/usr/local/lib/ruby/gems/2.4.0/gems/xcodeproj-1.4.4/lib/xcodeproj/project/object/configuration_list.rb:101:in `ascii_plist_annotation': undefined method `isa' for nil:NilClass (NoMethodError)\n    from /usr/local/lib/ruby/gems/2.4.0/gems/xcodeproj-1.4.4/lib/xcodeproj/project.rb:286:in `block in to_ascii_plist'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/xcodeproj-1.4.4/lib/xcodeproj/project.rb:285:in `each'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/xcodeproj-1.4.4/lib/xcodeproj/project.rb:285:in `to_ascii_plist'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/xcodeproj-1.4.4/lib/xcodeproj/project.rb:353:in `block in save'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/xcodeproj-1.4.4/lib/xcodeproj/project.rb:353:in `open'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/xcodeproj-1.4.4/lib/xcodeproj/project.rb:353:in `save'\n    from /Users/testuser/Desktop/XcodeprojTest/test.rb:10:in `&lt;top (required)&gt;'\n    from -e:1:in `load'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "parameters", "nested-attributes"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1493800475, "post_id": 43752484, "comment_id": 74551407, "body": "I would say, go step by step to check <code>params[:usr_contact]</code>, then <code>params[:usr_contact][:usr_contact_vendors_attributes]</code>, and so on. One of these is <code>nil</code>."}], "answers": [{"tags": [], "owner": {"reputation": 329, "user_id": 7018858, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bb0c52b3aefb50b31995b5397977b27f?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Mehta", "link": "https://stackoverflow.com/users/7018858/chetan-mehta"}, "is_accepted": false, "score": 0, "last_activity_date": 1493792918, "creation_date": 1493792918, "answer_id": 43752624, "question_id": 43752484, "link": "https://stackoverflow.com/questions/43752484/how-to-access-nested-attributes-in-ruby-on-rails/43752624#43752624", "title": "How to access nested attributes in ruby on rails?", "body": "<p>I have an example of how I did it in my scenario:</p>\n\n<pre><code>def patient_params\n    params.require(:patient).permit(*permited_patient_attributes)\n  end\n\n  def permited_patient_attributes\n    [\n      :user_id,\n      :start,\n      patient_demographic_attributes: [\n        :id,\n        :patient_id,\n        :start_date,\n        :end_date,\n        :first_name,\n        :middle_name,\n        :last_name,\n        :date_of_birth,\n        :gender,\n        :ethnicity,\n        :marital_status],\n      patient_contact_attributes: [\n        :id,\n        :patient_id,\n        :street_address,\n        :extended_address,\n        :locality,\n        :region,\n        :postal_code,\n        :country],\n      patient_email_attributes: [\n        :id,\n        :email],\n      patient_mrn_attributes: [\n        :id,\n        :patient_id,\n        :mrn],\n      contact_telephones_attributes: [\n        :id,\n        :party_type,\n        :party_id,\n        :name,\n        :number,\n        :_destroy],\n      patient_physicians_attributes: [\n        :id,\n        :patient_id,\n        physician_id: []]\n    ]\n  end\n</code></pre>\n\n<p>Here patient_demographic_attributes,  patient_contact_attributes. are nested one.Have a try</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 3469171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e009b4d8cc1b1d7b3032475d7dd098b?s=128&d=identicon&r=PG&f=1", "display_name": "omarshariffd", "link": "https://stackoverflow.com/users/3469171/omarshariffd"}, "is_accepted": false, "score": 0, "last_activity_date": 1493800518, "creation_date": 1493800518, "answer_id": 43755072, "question_id": 43752484, "link": "https://stackoverflow.com/questions/43752484/how-to-access-nested-attributes-in-ruby-on-rails/43755072#43755072", "title": "How to access nested attributes in ruby on rails?", "body": "<p>You need to make sure that your <code>item</code> is not nil before pushing it to your array. Easiest way is to do this is by adding a check if <code>item</code> is nil.</p>\n\n<pre><code>@emailSet &lt;&lt; item[:email] unless item.nil?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 375, "user_id": 289657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42eec92ad34b7fddecbd3e94c94ca21e?s=128&d=identicon&r=PG", "display_name": "diofeher", "link": "https://stackoverflow.com/users/289657/diofeher"}, "is_accepted": false, "score": 1, "last_activity_date": 1493812236, "last_edit_date": 1495541888, "creation_date": 1493812236, "answer_id": 43759255, "question_id": 43752484, "link": "https://stackoverflow.com/questions/43752484/how-to-access-nested-attributes-in-ruby-on-rails/43759255#43759255", "title": "How to access nested attributes in ruby on rails?", "body": "<p>You would have to use <a href=\"https://stackoverflow.com/a/34348418/289657\">dig</a> because when you're trying to access one of these params, they're null, so Ruby raise this exception. By using <code>dig</code>, it's like it's checking every attribute before you're accessing it. It would be good to check inside the item too with <code>item[:email].present?</code></p>\n\n<p>Your code would look like:</p>\n\n<pre><code> params.dig(:usr_contact, :usr_contact_vendors_attributes, :usr_vendor_property_attributes, :usr_additional_users_attributes).values.each do |item|\n   @emailSet &lt;&lt; item[:email] if item[:email].present?\n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7951504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856835874c35002716d9a9b30c75a023?s=128&d=identicon&r=PG&f=1", "display_name": "Chanaka", "link": "https://stackoverflow.com/users/7951504/chanaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1493979822, "creation_date": 1493979822, "answer_id": 43802512, "question_id": 43752484, "link": "https://stackoverflow.com/questions/43752484/how-to-access-nested-attributes-in-ruby-on-rails/43802512#43802512", "title": "How to access nested attributes in ruby on rails?", "body": "<p>I fixed it by printing params. It was something like this </p>\n\n<pre><code>{\"0\"=&gt;{\"usr_vendor_property_attributes\"=&gt;{\"shop_name\"=&gt;\"cbhcvbcvb\", \"specified_area\"=&gt;\"cbcvbcb\", \"website\"=&gt;\"bcbc@gmail.com\", \"mobile\"=&gt;\"3543243\", \"usr_vendor_branches_attributes\"=&gt;{\"1493800739760\"=&gt;{\"address_line1\"=&gt;\"\", \"address_line2\"=&gt;\"\", \"city\"=&gt;\"\", \"zip_code\"=&gt;\"\"}}, \"usr_additional_users_attributes\"=&gt;{\"1493800739774\"=&gt;{\"email\"=&gt;\"sdgdfgd\", \"role\"=&gt;\"Role1\", \"_destroy\"=&gt;\"false\"}}}}} permitted: false&gt;\n</code></pre>\n\n<p>I have miss that [\"0\"], that was the issue. \nThen params can access in the controller like this.</p>\n\n<pre><code> @test = params[:usr_contact][:usr_contact_vendors_attributes][\"0\"][:usr_vendor_property_attributes][:usr_additional_users_attributes]\n</code></pre>\n\n<p>Thanks for helping  :D</p>\n"}], "owner": {"reputation": 1, "user_id": 7951504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/856835874c35002716d9a9b30c75a023?s=128&d=identicon&r=PG&f=1", "display_name": "Chanaka", "link": "https://stackoverflow.com/users/7951504/chanaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1493979822, "creation_date": 1493792439, "last_edit_date": 1493794180, "question_id": 43752484, "link": "https://stackoverflow.com/questions/43752484/how-to-access-nested-attributes-in-ruby-on-rails", "title": "How to access nested attributes in ruby on rails?", "body": "<p>I want to access usr_additional_users_attributes in the following params? how can i do that ?</p>\n\n<pre><code> params.require(:usr_contact).permit(:first_name, :last_name, :dob, :gender,\n                                    :mobile, :email, :password,\n                                    :password_confirmation,\n                                    :image,\n                                    usr_contact_vendors_attributes:\n                                        [:id, usr_vendor_property_attributes:\n                                            [:shop_name, :specified_area, :mobile, :website,\n                                             usr_vendor_branches_attributes:\n                                                 [:address_line1, :address_line2, :city ,:zip_code ],\n                                             usr_additional_users_attributes:[:id,:email,:role, :_destroy]]] )\n</code></pre>\n\n<p>end</p>\n\n<p>I want to get it like this in my controller and put emails to an array. this one showing an error</p>\n\n<pre><code> params[:usr_contact][:usr_contact_vendors_attributes][:usr_vendor_property_attributes][:usr_additional_users_attributes].values.each do |item|\n      @emailSet &lt;&lt; item[:email]\n    end\n</code></pre>\n\n<p><strong>undefined method `[]' for nil:NilClass</strong></p>\n\n<p>any suggestions ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "sqlcommand"], "comments": [{"owner": {"reputation": 484, "user_id": 5949678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yn9j3.jpg?s=128&g=1", "display_name": "Divya Sharma", "link": "https://stackoverflow.com/users/5949678/divya-sharma"}, "edited": false, "score": 0, "creation_date": 1493791920, "post_id": 43752285, "comment_id": 74546623, "body": "what result are you expecting from query at the end?"}, {"owner": {"reputation": 21, "user_id": 5613673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-dFOAkGcifXs/AAAAAAAAAAI/AAAAAAAAAjA/MiFM7CSAq_8/photo.jpg?sz=128", "display_name": "&#214;mer &#214;zt&#252;rk", "link": "https://stackoverflow.com/users/5613673/%c3%96mer-%c3%96zt%c3%bcrk"}, "reply_to_user": {"reputation": 484, "user_id": 5949678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yn9j3.jpg?s=128&g=1", "display_name": "Divya Sharma", "link": "https://stackoverflow.com/users/5949678/divya-sharma"}, "edited": false, "score": 0, "creation_date": 1493792160, "post_id": 43752285, "comment_id": 74546734, "body": "I want to merge branch&#39;s courses and show_all_branches field selected in courses table but i want to do this rails/active_record helpers."}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 7018858, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bb0c52b3aefb50b31995b5397977b27f?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Mehta", "link": "https://stackoverflow.com/users/7018858/chetan-mehta"}, "edited": false, "score": 0, "creation_date": 1493792212, "post_id": 43752408, "comment_id": 74546758, "body": "Or if you are trying to find or count by sql command try this <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Querying.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Querying.html</a>"}, {"owner": {"reputation": 21, "user_id": 5613673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-dFOAkGcifXs/AAAAAAAAAAI/AAAAAAAAAjA/MiFM7CSAq_8/photo.jpg?sz=128", "display_name": "&#214;mer &#214;zt&#252;rk", "link": "https://stackoverflow.com/users/5613673/%c3%96mer-%c3%96zt%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1493792586, "post_id": 43752408, "comment_id": 74546924, "body": "Thanks. Actually i mean do that by rails helpers not completely sql commands."}, {"owner": {"reputation": 329, "user_id": 7018858, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bb0c52b3aefb50b31995b5397977b27f?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Mehta", "link": "https://stackoverflow.com/users/7018858/chetan-mehta"}, "reply_to_user": {"reputation": 21, "user_id": 5613673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-dFOAkGcifXs/AAAAAAAAAAI/AAAAAAAAAjA/MiFM7CSAq_8/photo.jpg?sz=128", "display_name": "&#214;mer &#214;zt&#252;rk", "link": "https://stackoverflow.com/users/5613673/%c3%96mer-%c3%96zt%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1493792771, "post_id": 43752408, "comment_id": 74547025, "body": "Tell me what are you writing and what results you are getting and also what is required"}, {"owner": {"reputation": 21, "user_id": 5613673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-dFOAkGcifXs/AAAAAAAAAAI/AAAAAAAAAjA/MiFM7CSAq_8/photo.jpg?sz=128", "display_name": "&#214;mer &#214;zt&#252;rk", "link": "https://stackoverflow.com/users/5613673/%c3%96mer-%c3%96zt%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1493793149, "post_id": 43752408, "comment_id": 74547204, "body": "Im writing this <code>CourseContent.show_all_branches.merge(-&gt; { joins(:branches) })</code> but its return show_all_branches selected and has relation to branches. I actually need show_all_branches selected or has relation to branches."}], "tags": [], "owner": {"reputation": 329, "user_id": 7018858, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bb0c52b3aefb50b31995b5397977b27f?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Mehta", "link": "https://stackoverflow.com/users/7018858/chetan-mehta"}, "is_accepted": false, "score": 1, "last_activity_date": 1493792132, "creation_date": 1493792132, "answer_id": 43752408, "question_id": 43752285, "link": "https://stackoverflow.com/questions/43752285/how-can-write-i-sql-query-with-rails-commands/43752408#43752408", "title": "How can write I sql query with rails commands", "body": "<p>You can do this: </p>\n\n<pre><code>    sql = \"Select * from ... your sql query here\"\nrecords_array = ActiveRecord::Base.connection.execute(sql)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5613673, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh3.googleusercontent.com/-dFOAkGcifXs/AAAAAAAAAAI/AAAAAAAAAjA/MiFM7CSAq_8/photo.jpg?sz=128", "display_name": "&#214;mer &#214;zt&#252;rk", "link": "https://stackoverflow.com/users/5613673/%c3%96mer-%c3%96zt%c3%bcrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493881586, "creation_date": 1493791735, "last_edit_date": 1493793352, "question_id": 43752285, "link": "https://stackoverflow.com/questions/43752285/how-can-write-i-sql-query-with-rails-commands", "title": "How can write I sql query with rails commands", "body": "<p>My sql command like this. Im trying to relation with two tables. I need the write that query to ruby command with rails helpers.</p>\n\n<pre><code>select *, \n  (select branch_id \n   from branches_course_contents \n   where course_content_id=course_contents.id and branch_id=2) as Sube \nfrom course_contents \nwhere \n  (select branch_id\n    from branches_course_contents \n    where course_content_id=course_contents.id and branch_id=2)=2 \n   or show_all_branches=true) \n  and content_type=0\n</code></pre>\n\n<p>My DB schemes:</p>\n\n<pre><code>branches\n-----------------------------------\nid\nname:string\nactive:boolean\n..\n\ncourse_contents\n-----------------------------------\nid\ntitle:string\nshow_all_branches:boolean\nactive:boolean\n..\n\nbranches_course_contents\n-----------------------------\nbranch_id\ncourse_content_id\n</code></pre>\n\n<p>And model files:</p>\n\n<pre><code>class Branch &lt; ApplicationRecord\n  has_and_belongs_to_many :course_contents\n  scope :active, -&gt; { where(active: true) }\nend\n\nclass CourseContent &lt; ApplicationRecord\n  has_and_belongs_to_many :branches\n  scope :active, -&gt; { where(active: true) }\n  scope :show_all_branches, -&gt; { where(show_all_branches: true) }\nend\n</code></pre>\n\n<p>Im trying like this <code>CourseContent.show_all_branches.merge(-&gt; { joins(:branches) })</code> but it returns show_all_branches selected and has relation with branches. I actually need show_all_branches selected or has relation with branches.</p>\n"}, {"tags": ["ruby", "logstash"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1493795149, "post_id": 43751943, "comment_id": 74548195, "body": "What is your question?"}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1493798860, "post_id": 43751943, "comment_id": 74550427, "body": "<a href=\"http://stackoverflow.com/questions/6696518/extract-time-from-a-uuid-v1-in-ruby\" title=\"extract time from a uuid v1 in ruby\">stackoverflow.com/questions/6696518/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 4, "last_activity_date": 1493799300, "last_edit_date": 1495542370, "creation_date": 1493799300, "answer_id": 43754684, "question_id": 43751943, "link": "https://stackoverflow.com/questions/43751943/how-to-convert-timeuuid-to-timestamp-in-ruby/43754684#43754684", "title": "How to convert timeuuid to timestamp in ruby", "body": "<p>From a quick glance at the answers in other languages, this might help you:</p>\n\n<pre><code>uuid = \"28442f00-2e98-11e2-0000-89a3a6fab5ef\"\n\nNUM_100NS_INTERVALS_SINCE_UUID_EPOCH = 0x01b21dd213814000\nlow, mid, version_high = uuid.split('-')\nhigh = version_high[1,3]\nhex = [high, mid, low].join\nputs Time.at((hex.to_i(16) - NUM_100NS_INTERVALS_SINCE_UUID_EPOCH) / 10000000)\n# 2012-11-14 21:16:22 +0100\n</code></pre>\n\n<p>You could also use a gem (<a href=\"https://stackoverflow.com/a/6706132/6419007\"><code>simple_uuid</code></a>) for this.</p>\n\n<pre><code>require 'simple_uuid'\nputs Time.at(SimpleUUID::UUID.new(uuid).seconds)\n# 2012-11-14 21:16:22 +0100\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 6384186, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/118b53cbec7e99c5f5b2a6f0cd3c3e48?s=128&d=identicon&r=PG&f=1", "display_name": "Suraj", "link": "https://stackoverflow.com/users/6384186/suraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 43754684, "answer_count": 1, "score": 3, "last_activity_date": 1493799300, "creation_date": 1493790307, "last_edit_date": 1493793692, "question_id": 43751943, "link": "https://stackoverflow.com/questions/43751943/how-to-convert-timeuuid-to-timestamp-in-ruby", "title": "How to convert timeuuid to timestamp in ruby", "body": "<p>I am a Java developer &amp; have no idea on Ruby - but I am trying to write a logstash plugin that can help me to convert timeuuid to timestamp(MM/dd/yyyy-HH:mm:ss.SSS). </p>\n\n<p>Below is the java version of it.</p>\n\n<pre><code>import java.util.Date;    \nimport java.util.UUID;   \n\npublic class TimeUUID {  \n\n  static final long NUM_100NS_INTERVALS_SINCE_UUID_EPOCH = 0x01b21dd213814000L; \n\n  public static long getTimeFromUUID(UUID uuid) {   \n\n    return (uuid.timestamp() - NUM_100NS_INTERVALS_SINCE_UUID_EPOCH) / 10000; \n\n  }  \n\n  public static void main(String[] args) {   \n\n    String uuidString = \"28442f00-2e98-11e2-0000-89a3a6fab5ef\"; \n\n    UUID uuid = UUID.fromString(uuidString);  \n\n    long time = getTimeFromUUID(uuid);  \n\n    Date date = new Date(time); \n\n    System.out.println(date);  \n\n  }  \n\n}  \n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 4, "creation_date": 1493791904, "post_id": 43751929, "comment_id": 74546611, "body": "That string isn&#39;t valid JSON, you&#39;d have to try and fix the embedded quotes so that it looks like <code>&quot;{\\&quot;message\\&quot;:\\&quot;Initializing ProtocolHandler [\\\\\\&quot;http-nio-8099\\\\\\&quot;]\\&quot; }&quot;</code> (or less noisy: <code>&#39;{&quot;message&quot;:&quot;Initializing ProtocolHandler [\\&quot;http-nio-8099\\&quot;]&quot; }&#39;</code>). Where is that broken string coming from? Fixing the source to not produce garbage would be preferable."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1493792997, "post_id": 43751929, "comment_id": 74547128, "body": "I agree with @muistooshort, it seems to be a malformed json string."}], "owner": {"reputation": 2446, "user_id": 5682933, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29d72b97ce20902d21488878741621f3?s=128&d=identicon&r=PG&f=1", "display_name": "Haoyuan Ge", "link": "https://stackoverflow.com/users/5682933/haoyuan-ge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493793925, "creation_date": 1493790268, "last_edit_date": 1493793925, "question_id": 43751929, "link": "https://stackoverflow.com/questions/43751929/how-to-parse-string-to-json-with-double-quote-in-ruby", "title": "How to parse string to JSON with double quote, in Ruby?", "body": "<p>My string is like this:</p>\n\n<pre><code>\"{\\\"message\\\":\\\"Initializing ProtocolHandler [\\\"http-nio-8099\\\"]\\\" }\"\n</code></pre>\n\n<p>It seems the <code>\\\"</code> surrounding <code>http-nio-8099</code> prevent parsing.</p>\n\n<p>How can such a string be parsed into JSON in ruby? Or how can I process it before it can be?</p>\n\n<p>This string is taken from the log of docker running on kubernetes. The original one is <code>{message\":\"Initializing ProtocolHandler [\"http-nio-8099\"]\"}</code>, and slash is added by docker. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1493790501, "post_id": 43751765, "comment_id": 74545987, "body": "If you do <code>RegexValidations.alphanumeric_underscore</code>, you don&#39;t need to also include it."}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1493791116, "post_id": 43751765, "comment_id": 74546271, "body": "I created new file called regexvalidations.rb, am I correct?"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1493791162, "post_id": 43751765, "comment_id": 74546284, "body": "Yes, create a file named <code>regex_validations.rb</code> and maybe @Sergio Tulentsev is correct. Try without including it first."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1493797205, "post_id": 43751765, "comment_id": 74549442, "body": "@Angel, nope, create <code>regex_validations.rb</code> and put it in <code>&#47;lib</code> folder. then follow my answer."}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1493880279, "post_id": 43751765, "comment_id": 74592095, "body": "Sir @Md.FarhanMemon Right now, im not doing it.. I&#39;ll do the other module.. After this I&#39;ll inform you :)"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493880395, "post_id": 43751765, "comment_id": 74592179, "body": "sure buddy.. :)"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494313706, "post_id": 43751765, "comment_id": 74761829, "body": "if you have put the file in <code>lib</code> folder, you can use it the way shown in my answer. Not <code>including</code> the file in model will also work."}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1494313846, "post_id": 43751765, "comment_id": 74761905, "body": "I tried to change format: { with: /\\A[\\w_]+\\z/ } into format: :alphanumeric_underscore but it gives me an error &quot;check_options_validaty: A regular expression or a proc or lambda must be supplied as :with &quot;"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494313939, "post_id": 43751765, "comment_id": 74761947, "body": "it should be like this <code>format: RegexValidations.alphanumeric_underscore</code>"}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1494314253, "post_id": 43751765, "comment_id": 74762140, "body": "I transfer my RegexValidations into lib.. and I also call like you suggestion above in my user.rb.. gives me an uninitialized User:RegexValidations"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494314466, "post_id": 43751765, "comment_id": 74762254, "body": "i see, did u include the file? if not then do it and see if error is solved."}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494315009, "post_id": 43751765, "comment_id": 74762574, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/143747/discussion-between-angel-and-md-farhan-memon\">continue this discussion in chat</a>."}, {"owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "edited": false, "score": 0, "creation_date": 1494315248, "post_id": 43751765, "comment_id": 74762735, "body": "what do you mean include the file? Include my regexvalidation into my userfile? How?"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 1, "creation_date": 1494315631, "post_id": 43751765, "comment_id": 74762984, "body": "write this line in your model, above validation <code>include RegexValidations</code>"}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": true, "score": 2, "last_activity_date": 1493800052, "last_edit_date": 1493800052, "creation_date": 1493789492, "answer_id": 43751765, "question_id": 43751614, "link": "https://stackoverflow.com/questions/43751614/how-to-make-the-validationonly-accepts-alphanumeric-global-for-my-model-in-rub/43751765#43751765", "title": "How to make the validation(only accepts alphanumeric) global for my model in ruby", "body": "<ul>\n<li>Validation are done at model level for their respective attributes.</li>\n<li>Defining methods in application_controller doesn't make it global, but accessible to all controllers inheriting from it.</li>\n</ul>\n\n<p>Your model validation <code>validates</code> should be enough to validate format of the string in column.</p>\n\n<p>Edit/Improvisation:</p>\n\n<p>If you want to make the regex dry/not repeat for every model. Create a module in your <code>lib</code> folder say:</p>\n\n<pre><code>module RegexValidations\n  def self.alphanumeric_underscore\n    { with: /\\A[\\w\\_]+\\z/ }\n  end\nend\n</code></pre>\n\n<p>And in your model include it and say:</p>\n\n<pre><code>include RegexValidations\nvalidates :description, presence: true, format: RegexValidations.alphanumeric_underscore\n</code></pre>\n\n<p>This way you can write multiple regex in one file and use it in every model keeping it DRY.\nPS: unfortunately i couldn't test it..but it should work. Let me know if you encounter any error.</p>\n"}], "owner": {"reputation": 779, "user_id": 6858228, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/39c09fdb3f434d643a86d64033e5d5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/6858228/angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 43751765, "answer_count": 1, "score": 1, "last_activity_date": 1494313578, "creation_date": 1493788662, "last_edit_date": 1494313578, "question_id": 43751614, "link": "https://stackoverflow.com/questions/43751614/how-to-make-the-validationonly-accepts-alphanumeric-global-for-my-model-in-rub", "title": "How to make the validation(only accepts alphanumeric) global for my model in ruby", "body": "<p>I am currently new in ruby on rails and I have gem called rails admin. I want the validation not repeatable, i want it to save in one method and make it global so that in my model I can call the validation format.</p>\n\n<p>I added a def in my application controller and inside of it i declare it as global but when I type special characters, it will be add.</p>\n\n<p>Note: My validation is only allowed alphanumeric or underscore..</p>\n\n<p>Expected Output: It wont add unless the input is alphanumeric or underscore</p>\n\n<p>Question: Is my global variable wrong? How could I make a global variable so that I will just call it</p>\n\n<p><strong>Model</strong></p>\n\n<pre><code>class ActivityType &lt; ApplicationRecord\n  has_many :activities\n\n  validates :name, presence: true, length: { maximum: 20 },\n                           :uniqueness =&gt; true,\n                           format: { with: /\\A[\\w\\_]+\\z/ }\n  validates :description, presence: true,\n                         format: { with: /\\A[\\w]+\\z/ }\n\nend\n</code></pre>\n\n<p><strong>RegexValidations</strong></p>\n\n<pre><code> module RegexValidations\n  def self.alphanumeric_underscore\n    { with: /\\A[\\w\\_]+\\z/ }\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "time", "parameters"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1493787603, "post_id": 43751391, "comment_id": 74544950, "body": "can you paste output of <code>params</code> ?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1493787672, "post_id": 43751391, "comment_id": 74544974, "body": "sorry @GaganGami forgot to do that."}, {"owner": {"reputation": 50020, "user_id": 1012097, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DMlV2.jpg?s=128&g=1", "display_name": "Kirti Thorat", "link": "https://stackoverflow.com/users/1012097/kirti-thorat"}, "edited": false, "score": 0, "creation_date": 1493787787, "post_id": 43751391, "comment_id": 74545021, "body": "Did you whitelist <code>exact</code> as part of strong parameters in the controller, if your are using Rails version &gt;= 4. Could you add that code to the question."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 50020, "user_id": 1012097, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DMlV2.jpg?s=128&g=1", "display_name": "Kirti Thorat", "link": "https://stackoverflow.com/users/1012097/kirti-thorat"}, "edited": false, "score": 0, "creation_date": 1493787993, "post_id": 43751391, "comment_id": 74545083, "body": "Yes I did @Kranti"}], "answers": [{"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 0, "last_activity_date": 1493788707, "creation_date": 1493788707, "answer_id": 43751626, "question_id": 43751391, "link": "https://stackoverflow.com/questions/43751391/how-to-pass-time-select-in-controller-params/43751626#43751626", "title": "How to pass time_select in controller params?", "body": "<p>I would do:</p>\n\n<pre><code>session[:challenge_exact] = components_to_absolute(params[:exact])\n\ndef components_to_absolute(components)\n  DateTime.new(components['exact(1i)'].to_i,\n               components['exact(2i)'].to_i,\n               components['exact(3i)'].to_i,\n               components['exact(4i)'].to_i,\n               components['exact(5i)'].to_i)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 1, "last_activity_date": 1493790311, "last_edit_date": 1493790311, "creation_date": 1493788714, "answer_id": 43751629, "question_id": 43751391, "link": "https://stackoverflow.com/questions/43751391/how-to-pass-time-select-in-controller-params/43751629#43751629", "title": "How to pass time_select in controller params?", "body": "<p>You can access <code>exact</code> params like:</p>\n\n<pre><code>&gt; params[:challenge][\"exact(1i)\"]\n#=&gt; \"2017\"\n&gt; params[:challenge][\"exact(2i)\"]\n#=&gt; \"5\"\n&gt; params[:challenge][\"exact(3i)\"]\n#=&gt; \"2\"\n&gt; params[:challenge][\"exact(4i)\"]\n#=&gt; \"08\"\n&gt; params[:challenge][\"exact(5i)\"]\n#=&gt; \"27\"\n</code></pre>\n\n<p>You can parse time like this:</p>\n\n<pre><code>exact_time = \"#{params[:challenge]['exact(4i)']}:#{params[:challenge]['exact(5i)']}\"\n#=&gt; \"08:27\"\n&gt; session[:challenge_exact] = Time.parse(exact_time)\n#=&gt; 2017-05-03 08:27:00 +0530\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 923, "favorite_count": 1, "accepted_answer_id": 43751629, "answer_count": 2, "score": 1, "last_activity_date": 1493797325, "creation_date": 1493787515, "last_edit_date": 1493797325, "question_id": 43751391, "link": "https://stackoverflow.com/questions/43751391/how-to-pass-time-select-in-controller-params", "title": "How to pass time_select in controller params?", "body": "<pre><code>&lt;%= f.time_select :exact,  {ampm: true, :discard_minute=&gt; true} %&gt; # t.time     \"exact\"\n</code></pre>\n\n<p>How do I pass the above in params?</p>\n\n<pre><code>session[:challenge_exact] = params[:exact].parse_time_select! # got nil error\nsession[:challenge_exact] = challenge_params[:exact]\nsession[:challenge_exact] = [params[\"challenge\"][\"exact(1i)\"], params[\"challenge\"][\"exact(2i)\"], params[\"challenge\"][\"exact(3i)\"], params[\"challenge\"][\"exact(4i)\"], params[\"challenge\"][\"exact(5i)\"]].join(',')\n</code></pre>\n\n<p>None of the above work. After the challenge is created I see that <code>exact: nil</code> even though it was populated in the form.</p>\n\n<pre><code>Started POST \"/challenges\" for ::1 at 2017-05-02 08:28:31 -0400\nProcessing by ChallengesController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"oN+DzJK+/GGmpTOOVYMUJQdywuENwxhmX/EVeW6NSZ3w1MctoMd/VHS39d+JasEjHujO88nLPSB2qUKEhet5yA==\", \"challenge\"=&gt;{\"name\"=&gt;\"Write 3 Gratitudes\", \"categorization\"=&gt;\"health\", \"category\"=&gt;\"goal\", \"deadline(2i)\"=&gt;\"6\", \"deadline(3i)\"=&gt;\"2\", \"deadline(1i)\"=&gt;\"2017\", \"push\"=&gt;\"0\", \"message\"=&gt;\"1\", \"mail\"=&gt;\"0\", \"remind\"=&gt;[\"mon\", \"thu\", \"\"], \"exact(1i)\"=&gt;\"2017\", \"exact(2i)\"=&gt;\"5\", \"exact(3i)\"=&gt;\"2\", \"exact(4i)\"=&gt;\"08\", \"exact(5i)\"=&gt;\"27\", \"conceal\"=&gt;\"0\"}, \"number\"=&gt;\"\", \"email\"=&gt;\"\", \"button\"=&gt;\"\"}\nRedirected to http://localhost:3000/signup\nCompleted 302 Found in 47ms (ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>After POST challenge a person then creates a user account...</p>\n\n<pre><code>    Started POST \"/users\" for ::1 at 2017-05-03 01:02:13 -0400\n    Processing by UsersController#create as HTML\n      Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"4Lv5NSfH9tMnC9+t5bVC5x1d571y0jhwsgvYU3t2sp85XAnNOsHk+FCmtGcj2wJVysV6IlAIzF4jCx1hIofwsNg==\", \"user\"=&gt;{\"name\"=&gt;\"test\", \"last_name\"=&gt;\"daddy\", \"email\"=&gt;\"testdaddy@gmail.com\", \"password\"=&gt;\"[FILTERED]\", \"time_zone\"=&gt;\"Eastern Time (US &amp; Canada)\", \"subscribe\"=&gt;\"0\"}, \"button\"=&gt;\"\"}\n       (0.2ms)  BEGIN\n      User Exists (0.5ms)  SELECT  1 AS one FROM \"users\" WHERE LOWER(\"users\".\"email\") = LOWER('testdaddy@gmail.com') LIMIT 1\n      SQL (2.3ms)  INSERT INTO \"users\" (\"time_zone\", \"name\", \"last_name\", \"subscribe\", \"email\", \"password_digest\", \"number\", \"created_at\", \"updated_at\", \"activation_digest\", \"activated\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING \"id\"  [[\"time_zone\", \"Eastern Time (US &amp; Canada)\"], [\"name\", \"test\"], [\"last_name\", \"daddy\"], [\"subscribe\", \"f\"], [\"email\", \"testdaddy@gmail.com\"], [\"password_digest\", \"$2a$10$JSSPUl0JDnUXybnAuSnEO.q5DgZscaU3hRpcM4C5L0a0aEtflzb7ne\"], [\"number\", \"15169499507\"], [\"created_at\", \"2017-05-03 05:02:14.144232\"], [\"updated_at\", \"2017-05-03 05:02:14.144232\"], [\"activation_digest\", \"$2a$10$NDtWKvxuJm/Hb9YIOzuVIuPpttCZwjsgYws6HhEcbHc.PukxXNpeLa\"], [\"activated\", \"t\"]]\n       (18.8ms)  COMMIT\n       (0.2ms)  BEGIN\n      User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT 1  [[\"id\", 16]]\n# AS YOU CAN SEE WITH INSERT INTO CHALLENGES FOR SOME REASON THE SESSION PARAMS FOR EXACT ISN'T PASSING FOR EXACT\n      SQL (0.6ms)  INSERT INTO \"challenges\" (\"committed\", \"name\", \"categorization\", \"category\", \"deadline\", \"remind\", \"message\", \"user_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING \"id\"  [[\"committed\", nil], [\"name\", \"Write 3 Gratitudes\"], [\"categorization\", \"health\"], [\"category\", \"goal\"], [\"deadline\", \"2017-06-03\"], [\"remind\", \"---\\n- mon\\n- thu\\n- ''\\n\"], [\"message\", \"t\"], [\"user_id\", 16], [\"created_at\", \"2017-05-03 05:02:14.434251\"], [\"updated_at\", \"2017-05-03 05:02:14.434251\"]]\n      ActsAsTaggableOn::Tag Load (0.6ms)  SELECT \"tags\".* FROM \"tags\" INNER JOIN \"taggings\" ON \"tags\".\"id\" = \"taggings\".\"tag_id\" WHERE \"taggings\".\"taggable_id\" = $1 AND \"taggings\".\"taggable_type\" = $2 AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)  [[\"taggable_id\", 40], [\"taggable_type\", \"Challenge\"]]\n      ActsAsTaggableOn::Tag Load (0.8ms)  SELECT \"tags\".* FROM \"tags\" INNER JOIN \"taggings\" ON \"tags\".\"id\" = \"taggings\".\"tag_id\" WHERE \"taggings\".\"taggable_id\" = $1 AND \"taggings\".\"taggable_type\" = $2 AND (taggings.context = 'tags' AND\n                                        taggings.tagger_id = 16 AND\n                                        taggings.tagger_type = 'User')  [[\"taggable_id\", 40], [\"taggable_type\", \"Challenge\"]]\n       (17.2ms)  COMMIT\n    Redirected to http://localhost:3000/\n</code></pre>\n\n<p>How it appears in console...</p>\n\n<pre><code>exact: 2000-01-01 02:32:00 UTC&gt;\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "refactoring", "tdd"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 6689809, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c2380f49a9fd185a160e9acc7e72520?s=128&d=identicon&r=PG&f=1", "display_name": "jack parsons", "link": "https://stackoverflow.com/users/6689809/jack-parsons"}, "edited": false, "score": 0, "creation_date": 1493864078, "post_id": 43754837, "comment_id": 74586699, "body": "<a href=\"https://github.com/jackparsons93/gcdAverage/blob/master/euclidGcdAverage.rb\" rel=\"nofollow noreferrer\">link</a>  This is a github link to my new code with ruby style guide and your help, all 6 unit test are green.  Also do you think I need to refactor euclid_gcd it is 11 lines or 9 if you don&#39;t count def and end.  Also I could not find on ruby style guide [link] (<a href=\"https://github.com/bbatsov/ruby-style-guide#classes--modules\" rel=\"nofollow noreferrer\">github.com/bbatsov/ruby-style-guide#classes--modules</a>) If it was okay to use all caps as an abbreviation my class name is GCD and it is all caps but it is abbreviated.  I wonder if all caps is okay for eloquent ruby code.  I also omitted all the returns."}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "reply_to_user": {"reputation": 137, "user_id": 6689809, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c2380f49a9fd185a160e9acc7e72520?s=128&d=identicon&r=PG&f=1", "display_name": "jack parsons", "link": "https://stackoverflow.com/users/6689809/jack-parsons"}, "edited": false, "score": 0, "creation_date": 1493877905, "post_id": 43754837, "comment_id": 74590812, "body": "You can google ruby style guide - variables are also snake_case. I think both GCD and Gcd is fine, not sure about that. You do not need lines 44 and 46, try what I wrote, just one line I have for def gcd_of_5_up_to_5  .... end is enough. I suggest you go through a few tutorials/examples that explain <code>map</code>, it&#39;s important and often used function, also found in javascript &amp; other languages."}], "tags": [], "owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "is_accepted": false, "score": 0, "last_activity_date": 1493800731, "last_edit_date": 1495542363, "creation_date": 1493799760, "answer_id": 43754837, "question_id": 43751290, "link": "https://stackoverflow.com/questions/43751290/refactoring-out-a-for-loop-ruby/43754837#43754837", "title": "Refactoring out a for loop ruby", "body": "<p>Code that repeats itself is this:</p>\n\n<pre><code>array=[]\nfor x in 1..5\n  # result = do something with x\n  array &lt;&lt; result\nend\nreturn array\n</code></pre>\n\n<p>That is exactly what map function does.<br>\n<a href=\"https://stackoverflow.com/questions/12084507/what-does-the-map-method-do-in-ruby\">What does the &quot;map&quot; method do in Ruby?</a></p>\n\n<p>Ruby methods names should be snake_case. Lets refactor this to use proper naming convention and map function.</p>\n\n<pre><code> def gcd_of_five_up_to_five\n    @m=5\n    (1..5).map do |x|\n      @n = x\n      # in ruby you don't have to write return\n      # value of last expression is returned automatically\n      euclid_gcd\n    end\n  end\n\n  def remainder_steps_up_to_five\n    @m=5\n    (1..5).map do |x|\n      @n = x\n      euclid_gcd\n      gcd_remainder_steps\n    end\n  end\n</code></pre>\n\n<p>I'd call it with params instead of using @m and @n. That would simplify the code. If you change euclid_gcd to this: <code>def euclid_gcd(m:, n:)</code> you'd get this:</p>\n\n<pre><code>  def gcd_of_5_up_to_5\n    (1..5).map { |x| euclid_gcd(m: 5, n: x) }\n  end\n\n  def remainder_steps_up_to_5\n    (1..5).map do |x| \n      euclid_gcd(m: 5, n: x)\n      gcd_remainder_steps\n    end\n  end\n</code></pre>\n\n<p>Seems like this needs little or no further refactoring.</p>\n"}], "owner": {"reputation": 137, "user_id": 6689809, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c2380f49a9fd185a160e9acc7e72520?s=128&d=identicon&r=PG&f=1", "display_name": "jack parsons", "link": "https://stackoverflow.com/users/6689809/jack-parsons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493800731, "creation_date": 1493786930, "question_id": 43751290, "link": "https://stackoverflow.com/questions/43751290/refactoring-out-a-for-loop-ruby", "title": "Refactoring out a for loop ruby", "body": "<p>I am having problems refactoring out some duplicated code from two methods sharing a for loop.  The two methods with the duplicated code are gcdOfFiveUpToFive and remainderStepsUpToFive.  The two loops share in common setting instance variable @m to 5 and the both use a for x in 1..5 loop and then set @n to x  as well as both of them need to call euclidGCD although one calls euclidGCD for its return value and the other to add +=1 to the @count variable.  I do want want to return 2 values from one method.  I guess I could make a 4th instance variable called @countArray and get an array of the remainder step count.   </p>\n\n<pre><code>require 'minitest/autorun'\n\n\nclass GCDTest &lt; Minitest::Test \n  def test_euclid_gcd\n    gcdTestObject=GCD.new(20,5)\n    assert gcdTestObject.euclidGcd==5\n    assert gcdTestObject.gcdRemainderSteps==1\n\n  end\n\n  def test_euclid_two\n    gcdTestObject=GCD.new(13,8)\n    assert gcdTestObject.euclidGcd==1 \n    assert gcdTestObject.gcdRemainderSteps==5\n  end\n\n  def test_euclid_loop\n    gcdTestObject=GCD.new(0,0)\n    assert gcdTestObject.gcdOfFiveUpToFive==[1,1,1,1,5]\n  end \n\n  def test_count_of_loop\n    gcdTestObject=GCD.new(0,0)\n    assert gcdTestObject.remainderStepsUpToFive==[1,2,3,2,1]\n  end\n\n\nend\n\n\n\nclass GCD\n  attr_accessor :m,:n\n  attr_reader :count \n  def initialize(m,n)\n    @m=m\n    @n=n\n    @count=0\n  end\n\n  def euclidGcd\n    @count=1\n    m=@m \n    n=@n\n    r= m % n\n    until r==0 \n      m=n\n      n=r\n      r= m % n\n      @count+=1\n    end\n    return n  \n  end\n\n  def gcdRemainderSteps\n    return @count\n  end\n\n  def gcdOfFiveUpToFive\n    @m=5\n    gcdArrayUpToFive=[]\n    for x in 1..5\n      @n=x\n      gcdArrayUpToFive &lt;&lt; euclidGcd\n    end\n    return gcdArrayUpToFive\n  end\n\n  def remainderStepsUpToFive\n    @m=5\n    gcdStepArrayUpToFive=[]\n    for x in 1..5\n      @n=x\n      euclidGcd\n      gcdStepArrayUpToFive &lt;&lt; gcdRemainderSteps\n    end\n    return gcdStepArrayUpToFive\n  end\n\n  def fiveLoopExtraction\n\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493787732, "post_id": 43751281, "comment_id": 74544993, "body": "Share your <code>target_params</code>."}], "answers": [{"tags": [], "owner": {"reputation": 222, "user_id": 5970218, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/10154104111413714/picture?type=large", "display_name": "Carlos Guerrero", "link": "https://stackoverflow.com/users/5970218/carlos-guerrero"}, "is_accepted": true, "score": 5, "last_activity_date": 1493821884, "creation_date": 1493821884, "answer_id": 43762997, "question_id": 43751281, "link": "https://stackoverflow.com/questions/43751281/actiondispatchhttpuploadedfile-to-base64/43762997#43762997", "title": "ActionDispatch::Http::UploadedFile to Base64", "body": "<p>Just solve it using this code:</p>\n\n<pre><code>  file = \n   target_params[:image].tempfile.open.read.force_encoding(Encoding::UTF_8)\n  Base64.encode64(file)\n</code></pre>\n"}], "owner": {"reputation": 222, "user_id": 5970218, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/10154104111413714/picture?type=large", "display_name": "Carlos Guerrero", "link": "https://stackoverflow.com/users/5970218/carlos-guerrero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1392, "favorite_count": 0, "accepted_answer_id": 43762997, "answer_count": 1, "score": 1, "last_activity_date": 1493821884, "creation_date": 1493786843, "question_id": 43751281, "link": "https://stackoverflow.com/questions/43751281/actiondispatchhttpuploadedfile-to-base64", "title": "ActionDispatch::Http::UploadedFile to Base64", "body": "<p>I'm currently working on a ruby on rails project. In the project I have a form with a input file type (An image) and I need to convert the image to base64 (The project connects to an external api, so the image needs to be in base64)</p>\n\n<p>So far I have tried to do this <code>Base64.encode64(target_params[:image].read)</code>\nbut I get an empty string as result.</p>\n"}, {"tags": ["ruby", "neo4j", "recurring-events", "graphenedb"], "comments": [{"owner": {"reputation": 3215, "user_id": 6692895, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/10154498103378258/picture?type=large", "display_name": "Toma\u017e Bratani\u010d", "link": "https://stackoverflow.com/users/6692895/toma%c5%be-bratani%c4%8d"}, "edited": false, "score": 1, "creation_date": 1493786720, "post_id": 43751162, "comment_id": 74544679, "body": "check this out <a href=\"https://graphaware.com/neo4j/2014/08/20/graphaware-neo4j-timetree.html\" rel=\"nofollow noreferrer\">graphaware.com/neo4j/2014/08/20/graphaware-neo4j-timetree.ht&zwnj;&#8203;ml</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26608, "user_id": 92359, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/664d3d4c50c731d90a32db5f9e01b4b9?s=128&d=identicon&r=PG", "display_name": "InverseFalcon", "link": "https://stackoverflow.com/users/92359/inversefalcon"}, "is_accepted": false, "score": 0, "last_activity_date": 1493832233, "creation_date": 1493832233, "answer_id": 43766436, "question_id": 43751162, "link": "https://stackoverflow.com/questions/43751162/can-i-search-for-events-based-on-time-in-neo4j/43766436#43766436", "title": "can I search for events based on time in neo4j?", "body": "<p>Using just Cypher, you can use the <code>timestamp()</code> function to generate a unix timestamp in ms (representing the current instant), which you can store as a property on nodes or relationships.</p>\n\n<p>That can let you run these kinds of comparisons. So if you have nodes with <code>next_occurrence</code> properties, and you already have an <code>event</code> variable bound to a particular node, you could use a predicate like:</p>\n\n<pre><code>...\nWHERE event.next_occurrence &lt; timestamp()\n...\n</code></pre>\n\n<p>With an index on the label/property, these kinds of predicates can use the index to find starting nodes fast (all events in the past, in the future, or within ranges).</p>\n"}], "owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493832233, "creation_date": 1493786248, "question_id": 43751162, "link": "https://stackoverflow.com/questions/43751162/can-i-search-for-events-based-on-time-in-neo4j", "title": "can I search for events based on time in neo4j?", "body": "<p>I am using the <code>neography</code> gem hosted by GrapheneDB.</p>\n\n<p>I need to send out recurring events.</p>\n\n<p>What I did with my previous DB is check if <code>object[:next_occurrence] is &lt; TimeDate.now</code></p>\n\n<p>I don't see how I can do this type of search in neo4j nor in the documentation:</p>\n\n<ol>\n<li><a href=\"https://neo4j.com/developer/guide-sql-to-cypher/#_cypher_is_all_about_patterns\" rel=\"nofollow noreferrer\">https://neo4j.com/developer/guide-sql-to-cypher/#_cypher_is_all_about_patterns</a></li>\n<li><a href=\"https://github.com/maxdemarzi/neography/wiki/Scripts-and-queries\" rel=\"nofollow noreferrer\">https://github.com/maxdemarzi/neography/wiki/Scripts-and-queries</a></li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1493796373, "post_id": 43751125, "comment_id": 74548917, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/24461903/rails-link-to-tag-tag-with-styled-glyphicon\">Rails link_to tag tag with styled glyphicon</a>"}], "answers": [{"tags": [], "owner": {"reputation": 598, "user_id": 237264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f64bcda3d597e8f89a46803dc8f2e4f?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/237264/george"}, "is_accepted": false, "score": 0, "last_activity_date": 1493786347, "creation_date": 1493786347, "answer_id": 43751181, "question_id": 43751125, "link": "https://stackoverflow.com/questions/43751125/turn-a-link-to-into-an-image/43751181#43751181", "title": "Turn a link_to into an image", "body": "<p>Try this, pass image_tag and class to link_to tag</p>\n\n<p><code>&lt;%=link_to( image_tag(\"thumb.png\"), like_review_path(review), method: :post) %&gt;</code></p>\n"}], "owner": {"reputation": 37, "user_id": 7811635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8e2d675d8d7be86f81354fc230d9ea3f?s=128&d=identicon&r=PG&f=1", "display_name": "roram", "link": "https://stackoverflow.com/users/7811635/roram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493786347, "creation_date": 1493785985, "question_id": 43751125, "link": "https://stackoverflow.com/questions/43751125/turn-a-link-to-into-an-image", "title": "Turn a link_to into an image", "body": "<p>I want to change my \"Like\" (upvote) link to an image. Right now I have this and it won't display: </p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to image_tag(\"thumb.png\"), like_review_path(review), method: :post%&gt;[&lt;%=review.get_upvotes.size%&gt;]&lt;/td&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "seo"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493784368, "post_id": 43750807, "comment_id": 74544047, "body": "I think you will need to test for <code>params[:product_subtype]</code> in your controller and redirect to the appropriate page."}, {"owner": {"reputation": 1347, "user_id": 1559202, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3dabf6305a8fd64f9c020d2257263fbb?s=128&d=identicon&r=PG", "display_name": "John Kenn", "link": "https://stackoverflow.com/users/1559202/john-kenn"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493785071, "post_id": 43750807, "comment_id": 74544211, "body": "@moveson Problem is we also need the pages to be accessible via their original url. We don&#39;t want to redirect them to the other url. Example: If user visits <code>&#47;tires?product_subtype=8</code> the url will stay the same. If user visits <code>&#47;lawn-and-garden</code> the url will also stay the same. No redirects will happen."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493785227, "post_id": 43750807, "comment_id": 74544254, "body": "In that case, you just need each controller to render the same view."}], "answers": [{"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493784526, "post_id": 43750891, "comment_id": 74544083, "body": "I think the OP wants to redirect differently depending on the <code>product_subtype</code> param."}, {"owner": {"reputation": 1347, "user_id": 1559202, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3dabf6305a8fd64f9c020d2257263fbb?s=128&d=identicon&r=PG", "display_name": "John Kenn", "link": "https://stackoverflow.com/users/1559202/john-kenn"}, "edited": false, "score": 0, "creation_date": 1493784627, "post_id": 43750891, "comment_id": 74544111, "body": "That won&#39;t work since we have to consider the <code>product_subtype</code> querystring parameter."}, {"owner": {"reputation": 50020, "user_id": 1012097, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DMlV2.jpg?s=128&g=1", "display_name": "Kirti Thorat", "link": "https://stackoverflow.com/users/1012097/kirti-thorat"}, "reply_to_user": {"reputation": 1347, "user_id": 1559202, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3dabf6305a8fd64f9c020d2257263fbb?s=128&d=identicon&r=PG", "display_name": "John Kenn", "link": "https://stackoverflow.com/users/1559202/john-kenn"}, "edited": false, "score": 0, "creation_date": 1493784849, "post_id": 43750891, "comment_id": 74544159, "body": "@JohnKevinM.Basco So do you mean that you don&#39;t want to pass the same query string parameter to second route but have multiple routes like <code>industrial-trial</code> equivalent to <code>&#47;tires?product_subtype=1</code>, <code>commercial-tires</code> equivalent to ``/tires?product_subtype=2`, etc..?"}, {"owner": {"reputation": 50020, "user_id": 1012097, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DMlV2.jpg?s=128&g=1", "display_name": "Kirti Thorat", "link": "https://stackoverflow.com/users/1012097/kirti-thorat"}, "reply_to_user": {"reputation": 1347, "user_id": 1559202, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3dabf6305a8fd64f9c020d2257263fbb?s=128&d=identicon&r=PG", "display_name": "John Kenn", "link": "https://stackoverflow.com/users/1559202/john-kenn"}, "edited": false, "score": 0, "creation_date": 1493786945, "post_id": 43750891, "comment_id": 74544734, "body": "@JohnKevinM.Basco I have added an update section to the answer"}], "tags": [], "owner": {"reputation": 50020, "user_id": 1012097, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DMlV2.jpg?s=128&g=1", "display_name": "Kirti Thorat", "link": "https://stackoverflow.com/users/1012097/kirti-thorat"}, "is_accepted": true, "score": 1, "last_activity_date": 1493786915, "last_edit_date": 1493786915, "creation_date": 1493784448, "answer_id": 43750891, "question_id": 43750807, "link": "https://stackoverflow.com/questions/43750807/how-to-make-a-page-accessible-by-two-urls-for-seo-purposes/43750891#43750891", "title": "How to make a page accessible by two urls for seo purposes?", "body": "<p>If both the routes are performing the same task then route them to the same <code>controller#action</code> in <code>config/routes.rb</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>get 'tires', to: 'welcome#index'\nget 'lawn-and-garden', to: 'welcome#index'\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>If I understand you right, then you would like the page to be accessible by both routes <code>/tires?product_subtype=1</code> as well as <code>/industrial-tires</code>(without query param). We have done something similar on one of our projects, we call these pretty url's as landing pages. I can think of two options to implement these landing pages: </p>\n\n<ul>\n<li><p>If you have a fixed number of very few landing pages:</p>\n\n<p>create an action for each of them which renders corresponding subtype view.</p>\n\n<pre><code>def industrial_tires\n  ## render view filtered for product_subtype = 1\nend\n\ndef commercial_tires\n  ## render view filtered for product_subtype = 2\nend\n## .... so on\n</code></pre></li>\n<li><p>If you have many/ variable number of landing pages:</p>\n\n<p>you will have to create a low priority catch all route and within the mapped action conditionally render specific view based on the slug.</p>\n\n<pre><code>get '*path', to: 'tires#landing_page'  ## in routes.rb at the end of the file\n\ndef landing_page\n  ## \"path\" would be equal to industrial-tires or commercial-tires, etc.\n  ## conditionally specify view filtered for product_subtype based on path value\nend \n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 1, "last_activity_date": 1493788195, "last_edit_date": 1493788195, "creation_date": 1493785076, "answer_id": 43750973, "question_id": 43750807, "link": "https://stackoverflow.com/questions/43750807/how-to-make-a-page-accessible-by-two-urls-for-seo-purposes/43750973#43750973", "title": "How to make a page accessible by two urls for seo purposes?", "body": "<p>I'd suggest you route your various categories to a single CategoriesController and create an action for each category. </p>\n\n<pre><code>/routes.rb\n\n...\nget 'lawn-and-garden', to: 'categories#lawn_and_garden'\nget 'industrial-tires', to: 'categories#industrial_tires'\n...\n\n/categories_controller.rb\n\ndef lawn_and_garden\n  params[:product_subtype] = '8'\n  @tires = YourTireFilter.search(params)\n  render 'tires/index'\nend\n\ndef industrial_tires\n  params[:product_subtype] = '1'\n  @tires = YourTireFilter.search(params)\n  render 'tires/index'\nend\n</code></pre>\n\n<p>Repeat for other URLs.</p>\n"}], "owner": {"reputation": 1347, "user_id": 1559202, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3dabf6305a8fd64f9c020d2257263fbb?s=128&d=identicon&r=PG", "display_name": "John Kenn", "link": "https://stackoverflow.com/users/1559202/john-kenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 43750891, "answer_count": 2, "score": 1, "last_activity_date": 1493788195, "creation_date": 1493783920, "last_edit_date": 1493788097, "question_id": 43750807, "link": "https://stackoverflow.com/questions/43750807/how-to-make-a-page-accessible-by-two-urls-for-seo-purposes", "title": "How to make a page accessible by two urls for seo purposes?", "body": "<p>We currently have a page that has this url: <code>/tires?product_subtype=8</code>. The page content is a tires list filtered by a specific product subtype. For SEO purposes, we also need the page to be accessible via this url: <code>/lawn-and-garden</code>. </p>\n\n<p>Is there an easy way to do this? We're using Ruby on Rails framework and Nginx.</p>\n\n<p>We will be doing this on lots of pages:</p>\n\n<pre><code>/tires?product_subtype=1 - /industrial-tires\n/tires?product_subtype=2 - /commercial-tires\netc...\n</code></pre>\n"}, {"tags": ["ruby", "telegram-bot", "telegram-webhook"], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 5627758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc693053dec83df313c866bf848ea6b8?s=128&d=identicon&r=PG", "display_name": "Matt Elliott", "link": "https://stackoverflow.com/users/5627758/matt-elliott"}, "is_accepted": false, "score": 0, "last_activity_date": 1493792939, "creation_date": 1493792939, "answer_id": 43752629, "question_id": 43750794, "link": "https://stackoverflow.com/questions/43750794/create-webhook-with-only-ruby/43752629#43752629", "title": "Create webhook with only ruby?", "body": "<p>You could start with a simple socket server: <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/Socket.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/Socket.html</a></p>\n\n<p>However, creating a Rails app with one route for the web hook will not take you a lot of time. This will also give you a lot of flexibility to do more with your inbound data and app in the future e.g. admin dashboard, security, background processing, etc.</p>\n"}], "owner": {"reputation": 113, "user_id": 4660618, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/745950668852903/picture?type=large", "display_name": "Matheus Mendes", "link": "https://stackoverflow.com/users/4660618/matheus-mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504735785, "creation_date": 1493783835, "question_id": 43750794, "link": "https://stackoverflow.com/questions/43750794/create-webhook-with-only-ruby", "title": "Create webhook with only ruby?", "body": "<p>I'm creating a telegram bot in ruby , right now I'm using long polling , but I wanna change to webhooks, but I'm only found information about creating webhooks in rails , so I don't know if is possible to set a webhook in a ruby only project.</p>\n\n<p>Anyone did this? or have a tutorial? Maybe a lighter application in sinatra or rails api mode?</p>\n"}, {"tags": ["ruby", "pact", "pact-ruby"], "answers": [{"tags": [], "owner": {"reputation": 2503, "user_id": 1008568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32ca6dc55ad8675eaea178f42926f608?s=128&d=identicon&r=PG", "display_name": "Matthew Fellows", "link": "https://stackoverflow.com/users/1008568/matthew-fellows"}, "is_accepted": false, "score": 1, "last_activity_date": 1493890656, "creation_date": 1493890656, "answer_id": 43779204, "question_id": 43750366, "link": "https://stackoverflow.com/questions/43750366/extract-the-exact-value-used-in-a-pact-when-the-match-is-done-via-a-regexp-as-v/43779204#43779204", "title": "Extract the exact value used in a PACT (when the match is done via a regexp as value not initially known))", "body": "<p>I'm not sure if Pact Ruby supports this exact requirement, however digging into <em>why</em> you're doing this, I'd suggest it's a bad idea.</p>\n\n<p>This is a functional test, something that Pact consciously makes difficult to support. See <a href=\"https://docs.pact.io/best_practices/contract_tests_not_functional_tests.html\" rel=\"nofollow noreferrer\">https://docs.pact.io/best_practices/contract_tests_not_functional_tests.html</a> for more details as to why. There are better tools for the job for these sorts of tests, and they don't belong in the consumer code base (they absolutely <em>do</em> belong in the Providers' test suite).</p>\n\n<p>Pact is a <em>contract testing</em> tool, and as such is only interested in isolated request/response contracts, not chained ones as per functional tests.</p>\n"}], "owner": {"reputation": 1, "user_id": 7955020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae74b09bd1063108e77d1651298444a1?s=128&d=identicon&r=PG&f=1", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/7955020/andr%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493890656, "creation_date": 1493780585, "question_id": 43750366, "link": "https://stackoverflow.com/questions/43750366/extract-the-exact-value-used-in-a-pact-when-the-match-is-done-via-a-regexp-as-v", "title": "Extract the exact value used in a PACT (when the match is done via a regexp as value not initially known))", "body": "<p>I have a ruby pact mock service provider that captures my request. I would like to extract the exact value provided in the request (which was matched by a Pact.term / Pact.like), to do further processing with that value once the request has been answered by the pact service provider. </p>\n\n<p>An example: a password reset functionality. Code makes an API call to a mailing service, providing the password reset link as parameter. Pact captures the request and mocks it successfully, validating the data. I pass the reset_link as one of the parameters (a Json body). This gets match in a Pact.term. All good. But I also want to recover the exact value that was used in the request (say reset_link: '<a href=\"http://sample.com/reset-password?key=12345\" rel=\"nofollow noreferrer\">http://sample.com/reset-password?key=12345</a>'), so I can make a subsequent request and check that exact link does indeed allow a successful password reset. </p>\n\n<p>Now, if I was sending email directly, it is easy to do, I can just parse Mail::TestMailer.deliveries.last</p>\n\n<p>How can I do this? </p>\n\n<p>I've gone through the code, even creating a Pact::SomethingLike subclass wouldn't work, as the comparison method is a lovely functional programming module, not a method in the class.</p>\n\n<p>Is there a before / after hook, or a way to grab the whole web request? </p>\n\n<p>PS: I'm aware this is typically tested by the underlying library I use. The library sanctioned way of adjusting functionality is to override certain methods, I need to re-test the whole functionality.</p>\n\n<p>PPS: this is not rails but roda.</p>\n\n<p>Thanks\nAndr\u00e9</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "omniauth", "omniauth-linkedin"], "answers": [{"comments": [{"owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1493816202, "post_id": 43750739, "comment_id": 74562502, "body": "They&#39;re definitely in the users folder and namespaced correctly. I&#39;ve added my routes and FormUser model if that&#39;s of any help to you."}, {"owner": {"reputation": 50020, "user_id": 1012097, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DMlV2.jpg?s=128&g=1", "display_name": "Kirti Thorat", "link": "https://stackoverflow.com/users/1012097/kirti-thorat"}, "reply_to_user": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1493829185, "post_id": 43750739, "comment_id": 74572337, "body": "@J.Jackson Thanks! That surely helped. Read the Update section on my answer."}, {"owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1493854003, "post_id": 43750739, "comment_id": 74584445, "body": "Ah of course, that makes total sense! Now I&#39;m receiving a <code>undefined method </code>user_omniauth_authorize_path&#39; for #&lt;Users::OmniauthCallbacksController:0x007f9a1e0012b0&gt; Did you mean?  user_omniauth_upgrade_path                user_github_omniauth_authorize_path` error though. I&#39;ve added my stack trace and rake routes terminal command. Also, thanks so much for your help!"}, {"owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "edited": false, "score": 0, "creation_date": 1493861251, "post_id": 43750739, "comment_id": 74585950, "body": "Ah, figured it out! On my button I was using <code>user_omniauth_upgrade_path( :github )</code> but apparently a newer version of devise uses <code>user_github_omniauth_authorize_path</code> instead. I found that according to <a href=\"http://stackoverflow.com/questions/38379828/devise-omniauth-undefined-method-user-omniauth-authorize-path\">this</a> other SO post. Kranti thanks so much for your help with this issue."}], "tags": [], "owner": {"reputation": 50020, "user_id": 1012097, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DMlV2.jpg?s=128&g=1", "display_name": "Kirti Thorat", "link": "https://stackoverflow.com/users/1012097/kirti-thorat"}, "is_accepted": true, "score": 3, "last_activity_date": 1493829139, "last_edit_date": 1493829139, "creation_date": 1493783442, "answer_id": 43750739, "question_id": 43750241, "link": "https://stackoverflow.com/questions/43750241/uninitialized-constant-omniauthcallbackscontroller-when-trying-to-sign-up-user/43750739#43750739", "title": "Uninitialized constant OmniauthCallbacksController when trying to sign up user", "body": "<p>You have namespaced <code>OmniauthCallbacksController</code> under users as <code>Users::OmniauthCallbacksController</code>, make sure the controller path is <code>your_app/app/controllers/users/omniauth_callbacks_controller\u200c\u200b.rb</code> i.e., it resides under <code>users</code> folder. Similarly, your <code>devise</code> routes should look something like: </p>\n\n<pre><code>devise_for :users, :controllers =&gt; { :omniauth_callbacks =&gt; \"users/omniauth_callbacks\" }\n</code></pre>\n\n<p><strong>Note:</strong> <code>users/omniauth_callbacks</code></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Looking at the routes that you shared, you need to update routes for <code>upgrade</code> and <code>setup</code> as:</p>\n\n<pre><code>devise_scope :user do\n    get '/users/auth/:provider/upgrade' =&gt; 'users/omniauth_callbacks#upgrade', as: :user_omniauth_upgrade\n    get '/users/auth/:provider/setup', :to =&gt; 'users/omniauth_callbacks#setup'\n  end\n</code></pre>\n\n<p>Again, <strong>note:</strong> <code>users/omniauth_callbacks</code></p>\n"}], "owner": {"reputation": 1539, "user_id": 3394654, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/4fRHp.jpg?s=128&g=1", "display_name": "J. Jackson", "link": "https://stackoverflow.com/users/3394654/j-jackson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3102, "favorite_count": 0, "accepted_answer_id": 43750739, "answer_count": 1, "score": 2, "last_activity_date": 1493853917, "creation_date": 1493779720, "last_edit_date": 1493853917, "question_id": 43750241, "link": "https://stackoverflow.com/questions/43750241/uninitialized-constant-omniauthcallbackscontroller-when-trying-to-sign-up-user", "title": "Uninitialized constant OmniauthCallbacksController when trying to sign up user", "body": "<p>I'm having an issue with getting OmniAuth to work. I've been following this tutorial <a href=\"http://willschenk.com/setting-up-devise-with-twitter-and-facebook-and-other-omniauth-schemes-without-email-addresses/\" rel=\"nofollow noreferrer\">here</a> to try and implement it with my existing app, but am coming up with the <code>ActionController::RoutingError at /users/auth/github/upgrade uninitialized constant OmniauthCallbacksController</code> error. I've looked at several other SO posts but most of those answers deal with misspellings and I've triple-checked that everything is spelled correctly. What might be interfering?</p>\n\n<p>User Model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  devise :database_authenticatable, :registerable,\n                 :recoverable, :rememberable, :trackable, :omniauthable\n\n  has_many :identities\n\n  def github\n        identities.where( :provider =&gt; \"github\" ).first\n    end\n\n    def github_client\n        @github_client ||= Github.client( access_token: github.accesstoken )\n    end\n\n    def linkedin\n        identities.where( :provider =&gt; \"linkedin\" ).first\n    end\n\n    def linkedin_client\n        @linkedin_client ||= Linkedin.client( access_token: linkedin.accesstoken )\n    end\nend\n</code></pre>\n\n<p>Identity Model:</p>\n\n<pre><code>class Identity &lt; ActiveRecord::Base\n  belongs_to :user\n  validates_presence_of :uid, :provider\n  validates_uniqueness_of :uid, :scope =&gt; :provider\n\n  def self.find_for_oauth(auth)\n    identity = find_by(provider: auth.provider, uid: auth.uid)\n    identity = create(uid: auth.uid, provider: auth.provider) if identity.nil?\n    identity.accesstoken = auth.credentials.token\n    identity.refreshtoken = auth.credentials.refresh_token\n    identity.name = auth.info.name\n    identity.email = auth.info.email\n    identity.nickname = auth.info.nickname\n    identity.image = auth.info.image\n    identity.phone = auth.info.phone\n    identity.urls = (auth.info.urls || \"\").to_json\n    identity.save\n    identity\n  end\nend\n</code></pre>\n\n<p>Devise Model:</p>\n\n<pre><code>Devise.setup do |config|\n\n  # config.omniauth :google_oauth2, ENV['GOOGLE_OAUTH2_APP_ID'], ENV['GOOGLE_OAUTH2_APP_SECRET'], scope: \"email,profile,offline\", prompt: \"consent\"\n  config.omniauth :github, ENV['GITHUB_APP_ID'], ENV['GITHUB_APP_SECRET'], setup: true\n  # config.omniauth :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_APP_SECRET'], scope: \"email\"\n  config.omniauth :linkedin, ENV['LINKEDIN_APP_ID'], ENV['LINKEDIN_APP_SECRET'], setup: true\n</code></pre>\n\n<p>Omniauth Model:</p>\n\n<pre><code>Rails.application.config.middleware.use OmniAuth::Builder do\n\n  provider :github, ENV['GITHUB_KEY'], ENV['GITHUB_SECRET']\n  provider :linkedin, ENV['LINKEDIN_KEY'], ENV['LINKEDIN_SECRET']\nend\n</code></pre>\n\n<p>FormUser Model</p>\n\n<pre><code>class FormUser &lt; User\n  attr_accessor :current_password\n\n  validates_presence_of   :email, if: :email_required?\n  validates_uniqueness_of :email, allow_blank: true, if: :email_changed?\n  validates_format_of     :email, with: Devise.email_regexp, allow_blank: true, if: :email_changed?\n\n  validates_presence_of     :password, if: :password_required?\n  validates_confirmation_of :password, if: :password_required?\n  validates_length_of       :password, within: Devise.password_length, allow_blank: true\n\n  def password_required?\n    return false if email.blank?\n    !persisted? || !password.nil? || !password_confirmation.nil?\n  end\n\n  def email_required?\n    true\n  end\nend\n</code></pre>\n\n<p>Omniauth Callbacks Controller:</p>\n\n<pre><code>class Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n  def instagram\n    generic_callback( 'instagram' )\n  end\n\n  def facebook\n    generic_callback( 'facebook' )\n  end\n\n  def twitter\n    generic_callback( 'twitter' )\n  end\n\n  def google_oauth2\n    generic_callback( 'google_oauth2' )\n  end\n\n  def generic_callback( provider )\n    @identity = Identity.find_for_oauth env[\"omniauth.auth\"]\n\n    # @user = @identity.user || current_user\n    @user = @identity.user || User.find_by(email: @identity.email) || current_user\n    if @user.nil?\n      @user = User.create( email: @identity.email || \"\" )\n      @identity.update_attribute( :user_id, @user.id )\n    end\n\n    if @user.email.blank? &amp;&amp; @identity.email\n      @user.update_attribute( :email, @identity.email)\n    end\n\n    if @user.persisted?\n      @identity.update_attribute( :user_id, @user.id )\n      # This is because we've created the user manually, and Device expects a\n      # FormUser class (with the validations)\n      @user = FormUser.find @user.id\n      sign_in_and_redirect @user, event: :authentication\n      set_flash_message(:notice, :success, kind: provider.capitalize) if is_navigational_format?\n    else\n      session[\"devise.#{provider}_data\"] = env[\"omniauth.auth\"]\n      redirect_to new_user_registration_url\n    end\n  end\n\n  def upgrade\n    scope = nil\n    if params[:provider] == \"google_oauth2\"\n      scope = \"email,profile,offline,https://www.googleapis.com/auth/admin.directory.user\"\n    end\n\n    redirect_to user_omniauth_authorize_path( params[:provider] ), flash: { scope: scope }\n  end\n\n  def setup\n    request.env['omniauth.strategy'].options['scope'] = flash[:scope] || request.env['omniauth.strategy'].options['scope']\n    render :text =&gt; \"Setup complete.\", :status =&gt; 404\n  end\nend\n</code></pre>\n\n<p>Registrations Controller:</p>\n\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController\n  def create\n\n    unless params[\"user\"][\"code\"] == ENV[\"CODE_TO_SIGN_UP\"]\n      respond_to do |format|\n        format.html { return redirect_to new_user_registration_path, notice: 'The code you entered was wrong. Please contact ' + ENV[\"ADMIN_EMAIL\"] }\n      end\n    end\n\n    super\n  end\n\n  def update_resource(resource, params)\n    if resource.encrypted_password.blank? # || params[:password].blank?\n      resource.email = params[:email] if params[:email]\n      if !params[:password].blank? &amp;&amp; params[:password] == params[:password_confirmation]\n        logger.info \"Updating password\"\n        resource.password = params[:password]\n        resource.save\n      end\n      if resource.valid?\n        resource.update_without_password(params)\n      end\n    else\n      resource.update_with_password(params)\n    end\n  end\n</code></pre>\n\n<p>Routes</p>\n\n<pre><code>Rails.application.routes.draw do\ndevise_for :users, class_name: 'FormUser', :controllers =&gt; { \n    omniauth_callbacks: 'users/omniauth_callbacks',\n    registrations: 'users/registrations'\n  }\n\n  devise_scope :user do\n    get '/users/auth/:provider/upgrade' =&gt; 'omniauth_callbacks#upgrade', as: :user_omniauth_upgrade\n    get '/users/auth/:provider/setup', :to =&gt; 'omniauth_callbacks#setup'\n  end\n\nend\n</code></pre>\n\n<p><strong>UPDATE</strong>\nrake routes:</p>\n\n<pre><code>Prefix Verb     URI Pattern                             Controller#Action\n                new_user_session GET      /users/sign_in(.:format)                devise/sessions#new\n                    user_session POST     /users/sign_in(.:format)                devise/sessions#create\n            destroy_user_session DELETE   /users/sign_out(.:format)               devise/sessions#destroy\n  user_github_omniauth_authorize GET|POST /users/auth/github(.:format)            users/omniauth_callbacks#passthru\n   user_github_omniauth_callback GET|POST /users/auth/github/callback(.:format)   users/omniauth_callbacks#github\nuser_linkedin_omniauth_authorize GET|POST /users/auth/linkedin(.:format)          users/omniauth_callbacks#passthru\n user_linkedin_omniauth_callback GET|POST /users/auth/linkedin/callback(.:format) users/omniauth_callbacks#linkedin\n                   user_password POST     /users/password(.:format)               devise/passwords#create\n               new_user_password GET      /users/password/new(.:format)           devise/passwords#new\n              edit_user_password GET      /users/password/edit(.:format)          devise/passwords#edit\n                                 PATCH    /users/password(.:format)               devise/passwords#update\n                                 PUT      /users/password(.:format)               devise/passwords#update\n        cancel_user_registration GET      /users/cancel(.:format)                 users/registrations#cancel\n               user_registration POST     /users(.:format)                        users/registrations#create\n           new_user_registration GET      /users/sign_up(.:format)                users/registrations#new\n          edit_user_registration GET      /users/edit(.:format)                   users/registrations#edit\n                                 PATCH    /users(.:format)                        users/registrations#update\n                                 PUT      /users(.:format)                        users/registrations#update\n                                 DELETE   /users(.:format)                        users/registrations#destroy\n           user_omniauth_upgrade GET      /users/auth/:provider/upgrade(.:format) users/omniauth_callbacks#upgrade\n                                 GET      /users/auth/:provider/setup(.:format)   users/omniauth_callbacks#setup\n                    typing_tests GET      /typing_tests(.:format)                 typing_tests#index\n                                 POST     /typing_tests(.:format)                 typing_tests#create\n                 new_typing_test GET      /typing_tests/new(.:format)             typing_tests#new\n                edit_typing_test GET      /typing_tests/:id/edit(.:format)        typing_tests#edit\n                     typing_test GET      /typing_tests/:id(.:format)             typing_tests#show\n                                 PATCH    /typing_tests/:id(.:format)             typing_tests#update\n                                 PUT      /typing_tests/:id(.:format)             typing_tests#update\n                                 DELETE   /typing_tests/:id(.:format)             typing_tests#destroy\n                         prompts GET      /prompts(.:format)                      prompts#index\n                                 POST     /prompts(.:format)                      prompts#create\n                      new_prompt GET      /prompts/new(.:format)                  prompts#new\n                     edit_prompt GET      /prompts/:id/edit(.:format)             prompts#edit\n                          prompt GET      /prompts/:id(.:format)                  prompts#show\n                                 PATCH    /prompts/:id(.:format)                  prompts#update\n                                 PUT      /prompts/:id(.:format)                  prompts#update\n                                 DELETE   /prompts/:id(.:format)                  prompts#destroy\n                    universities GET      /universities(.:format)                 universities#index\n                                 POST     /universities(.:format)                 universities#create\n                  new_university GET      /universities/new(.:format)             universities#new\n                 edit_university GET      /universities/:id/edit(.:format)        universities#edit\n                      university PATCH    /universities/:id(.:format)             universities#update\n                                 PUT      /universities/:id(.:format)             universities#update\n                                 DELETE   /universities/:id(.:format)             universities#destroy\n                        programs GET      /programs(.:format)                     programs#index\n                                 POST     /programs(.:format)                     programs#create\n                     new_program GET      /programs/new(.:format)                 programs#new\n                    edit_program GET      /programs/:id/edit(.:format)            programs#edit\n                         program PATCH    /programs/:id(.:format)                 programs#update\n                                 PUT      /programs/:id(.:format)                 programs#update\n                                 DELETE   /programs/:id(.:format)                 programs#destroy\n                           users GET      /users(.:format)                        users#index\n                       edit_user GET      /users/:id/edit(.:format)               users#edit\n                            user GET      /users/:id(.:format)                    users#show\n                                 PATCH    /users/:id(.:format)                    users#update\n                                 PUT      /users/:id(.:format)                    users#update\n                                 DELETE   /users/:id(.:format)                    users#destroy\n                            root GET      /                                       typing_tests#index\n            unauthenticated_root GET      /                                       devise/sessions#new\n</code></pre>\n\n<p>Stack trace:</p>\n\n<pre><code>Started GET \"/\" for 127.0.0.1 at 2017-05-03 18:24:26 -0500\n  ActiveRecord::SessionStore::Session Load (0.5ms)  SELECT  \"sessions\".* FROM \"sessions\"  WHERE \"sessions\".\"session_id\" = '430aa65b41ec7892dd1581f14a9fbd16'  ORDER BY \"sessions\".\"id\" ASC LIMIT 1\nProcessing by Devise::SessionsController#new as HTML\n  Rendered devise/shared/_links.html.erb (0.3ms)\n  Rendered devise/sessions/new.html.erb within layouts/application (4.5ms)\nCompleted 200 OK in 90ms (Views: 88.9ms | ActiveRecord: 0.0ms)\n   (0.1ms)  BEGIN\n  SQL (0.3ms)  UPDATE \"sessions\" SET \"data\" = $1, \"updated_at\" = $2 WHERE \"sessions\".\"id\" = 45  [[\"data\", \"BAh7BkkiEF9jc3JmX3Rva2VuBjoGRUZJIjFjakIxRFIwRzIxaEl6SkZoNEsv\\nMVdGeHZUSGNUS0R0d3cxWFB3aENBbWVjPQY7AEY=\\n\"], [\"updated_at\", \"2017-05-03 23:24:26.682877\"]]\n   (6.5ms)  COMMIT\n\n\nStarted GET \"/users/auth/github/upgrade\" for 127.0.0.1 at 2017-05-03 18:24:27 -0500\nProcessing by Users::OmniauthCallbacksController#upgrade as HTML\n  Parameters: {\"provider\"=&gt;\"github\"}\nCompleted 500 Internal Server Error in 19ms\n\nNoMethodError - undefined method `user_omniauth_authorize_path' for #&lt;Users::OmniauthCallbacksController:0x007f9a1e0012b0&gt;\nDid you mean?  user_omniauth_upgrade_path\n               user_github_omniauth_authorize_path:\n  app/controllers/users/omniauth_callbacks_controller.rb:51:in `upgrade'\n  actionpack (4.1.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\n  actionpack (4.1.9) lib/abstract_controller/base.rb:189:in `process_action'\n  actionpack (4.1.9) lib/action_controller/metal/rendering.rb:10:in `process_action'\n  actionpack (4.1.9) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\n  activesupport (4.1.9) lib/active_support/callbacks.rb:113:in `call'\n  activesupport (4.1.9) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'\n  activesupport (4.1.9) lib/active_support/callbacks.rb:229:in `block in halting'\n  activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n  activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n  activesupport (4.1.9) lib/active_support/callbacks.rb:166:in `block in halting'\n  activesupport (4.1.9) lib/active_support/callbacks.rb:86:in `run_callbacks'\n  actionpack (4.1.9) lib/abstract_controller/callbacks.rb:19:in `process_action'\n  actionpack (4.1.9) lib/action_controller/metal/rescue.rb:29:in `process_action'\n  actionpack (4.1.9) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'\n  activesupport (4.1.9) lib/active_support/notifications.rb:159:in `block in instrument'\n  activesupport (4.1.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  activesupport (4.1.9) lib/active_support/notifications.rb:159:in `instrument'\n  actionpack (4.1.9) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n  actionpack (4.1.9) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n  activerecord (4.1.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n  actionpack (4.1.9) lib/abstract_controller/base.rb:136:in `process'\n  actionview (4.1.9) lib/action_view/rendering.rb:30:in `process'\n  actionpack (4.1.9) lib/action_controller/metal.rb:196:in `dispatch'\n  actionpack (4.1.9) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n  actionpack (4.1.9) lib/action_controller/metal.rb:232:in `block in action'\n  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'\n  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:50:in `call'\n  actionpack (4.1.9) lib/action_dispatch/routing/mapper.rb:45:in `call'\n  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:73:in `block in call'\n  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:59:in `each'\n  actionpack (4.1.9) lib/action_dispatch/journey/router.rb:59:in `call'\n  actionpack (4.1.9) lib/action_dispatch/routing/route_set.rb:685:in `call'\n  omniauth (1.4.2) lib/omniauth/strategy.rb:186:in `call!'\n  omniauth (1.4.2) lib/omniauth/strategy.rb:164:in `call'\n  omniauth (1.4.2) lib/omniauth/strategy.rb:186:in `call!'\n  omniauth (1.4.2) lib/omniauth/strategy.rb:164:in `call'\n  meta_request (0.3.4) lib/meta_request/middlewares/app_request_handler.rb:13:in `call'\n  meta_request (0.3.4) lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'\n  warden (1.2.6) lib/warden/manager.rb:35:in `block in call'\n  warden (1.2.6) lib/warden/manager.rb:34:in `catch'\n  warden (1.2.6) lib/warden/manager.rb:34:in `call'\n  rack (1.5.5) lib/rack/etag.rb:23:in `call'\n  rack (1.5.5) lib/rack/conditionalget.rb:25:in `call'\n  rack (1.5.5) lib/rack/head.rb:11:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/flash.rb:254:in `call'\n  rack (1.5.5) lib/rack/session/abstract/id.rb:225:in `context'\n  rack (1.5.5) lib/rack/session/abstract/id.rb:220:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/cookies.rb:562:in `call'\n  activerecord (4.1.9) lib/active_record/query_cache.rb:36:in `call'\n  activerecord (4.1.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'\n  activerecord (4.1.9) lib/active_record/migration.rb:380:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n  activesupport (4.1.9) lib/active_support/callbacks.rb:82:in `run_callbacks'\n  actionpack (4.1.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/reloader.rb:73:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:84:in `protected_app_call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:79:in `better_errors_call'\n  better_errors (2.1.1) lib/better_errors/middleware.rb:57:in `call'\n  rack-contrib (1.2.0) lib/rack/contrib/response_headers.rb:17:in `call'\n  meta_request (0.3.4) lib/meta_request/middlewares/headers.rb:16:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  railties (4.1.9) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.1.9) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.1.9) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.1.9) lib/rails/rack/logger.rb:20:in `call'\n  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'\n  actionpack (4.1.9) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  rack (1.5.5) lib/rack/methodoverride.rb:21:in `call'\n  rack (1.5.5) lib/rack/runtime.rb:17:in `call'\n  activesupport (4.1.9) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'\n  rack (1.5.5) lib/rack/lock.rb:17:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/static.rb:84:in `call'\n  rack (1.5.5) lib/rack/sendfile.rb:112:in `call'\n  railties (4.1.9) lib/rails/engine.rb:514:in `call'\n  railties (4.1.9) lib/rails/application.rb:144:in `call'\n  rack (1.5.5) lib/rack/lock.rb:17:in `call'\n  rack (1.5.5) lib/rack/content_length.rb:14:in `call'\n  rack (1.5.5) lib/rack/handler/webrick.rb:60:in `service'\n  /Users/jimmiejackson/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/webrick/httpserver.rb:140:in `service'\n  /Users/jimmiejackson/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/webrick/httpserver.rb:96:in `run'\n  /Users/jimmiejackson/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/webrick/server.rb:296:in `block in start_thread'\n</code></pre>\n\n<p>Please let me know if there is any other code you might need to see. Thanks for your help, this is driving me crazy!</p>\n"}, {"tags": ["ruby", "greatest-common-divisor", "knuth"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 6689809, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c2380f49a9fd185a160e9acc7e72520?s=128&d=identicon&r=PG&f=1", "display_name": "jack parsons", "link": "https://stackoverflow.com/users/6689809/jack-parsons"}, "edited": false, "score": 0, "creation_date": 1493781677, "post_id": 43750158, "comment_id": 74543381, "body": "Thank you I was using instance variables. And euclidGcd destroyed the integrity of the instance variables. I reset the instance variables to new names and the test passed. Thank you for your help sir!"}, {"owner": {"reputation": 137, "user_id": 6689809, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c2380f49a9fd185a160e9acc7e72520?s=128&d=identicon&r=PG&f=1", "display_name": "jack parsons", "link": "https://stackoverflow.com/users/6689809/jack-parsons"}, "edited": false, "score": 0, "creation_date": 1493781699, "post_id": 43750158, "comment_id": 74543384, "body": "You&#39;re welcome. You should use the &quot;add a comment&quot; link below my answer instead of using the &quot;Answer&quot; blank. Otherwise the site presents your comment as an alternative answer to other visitors. \u2013 Jim U 9 mins ago"}], "tags": [], "owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "is_accepted": true, "score": 1, "last_activity_date": 1493779061, "creation_date": 1493779061, "answer_id": 43750158, "question_id": 43749987, "link": "https://stackoverflow.com/questions/43749987/testing-a-counter-for-an-introductory-exercise-for-taocp-knuth/43750158#43750158", "title": "Testing a counter for an introductory exercise for TAOCP Knuth", "body": "<p>Maybe GCD's methods ought not be modifying its members.  <code>gcdRemainderSteps()</code> is called only after <code>euclidGcd()</code> has modified the member variables.</p>\n\n<p>I made this change, and the test passes:</p>\n\n<pre><code>def euclidGcd\n    m = @m\n    n = @n\n    r = m % n\n    until r==0\n        m = n\n        n = r\n        r  = m % n\n    end\n    return n\nend\n</code></pre>\n\n<p>test results:</p>\n\n<pre><code># Running:\n\n..\n\nFinished in 0.001809s, 1105.5202 runs/s, 2211.0405 assertions/s.\n\n2 runs, 4 assertions, 0 failures, 0 errors, 0 skips\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 6689809, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c2380f49a9fd185a160e9acc7e72520?s=128&d=identicon&r=PG&f=1", "display_name": "jack parsons", "link": "https://stackoverflow.com/users/6689809/jack-parsons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 1, "accepted_answer_id": 43750158, "answer_count": 1, "score": 0, "last_activity_date": 1493780193, "creation_date": 1493777745, "question_id": 43749987, "link": "https://stackoverflow.com/questions/43749987/testing-a-counter-for-an-introductory-exercise-for-taocp-knuth", "title": "Testing a counter for an introductory exercise for TAOCP Knuth", "body": "<p>The exercise in the first chapter of Vol 1 of The art of computer Programming by Donald Knuth- Has to do with taking the averages of remainder steps using Euclid's gcd algorithm.  My code returns the GCD perfectly and has been tested to do so.  I cannot get it to return the remainder steps and my second test marked failing test with a comment in the code fails to get the correct remainder steps, and will only return 1 for gcdRemainerSteps on the gcdTestObject.  </p>\n\n<pre><code>require 'minitest/autorun'\n\n\nclass GCDTest &lt; Minitest::Test \n  def test_euclid_gcd\n    gcdTestObject=GCD.new(20,5)\n    assert gcdTestObject.euclidGcd==5\n        assert gcdTestObject.gcdRemainderSteps==1\n\n    end\n\n    def test_euclid_two\n        gcdTestObject=GCD.new(13,8)\n        assert gcdTestObject.euclidGcd==1\n    #Failing TEST Passes on 1 not on 5 \n    assert gcdTestObject.gcdRemainderSteps==5\n    end\nend\n\n\n\nclass GCD\n    attr_accessor :m,:n \n    def initialize(m,n)\n        @m=m\n        @n=n\n    end\n\n    def euclidGcd\n        r= @m % @n\n        until r==0 \n            @m=@n\n            @n=r\n            r= @m % @n\n        end\n        return @n   \n    end\n\n    def gcdRemainderSteps\n        r=@m % @n\n        counter=1\n        until r==0 \n            counter+=1\n            @m=@n\n            @n=r\n            r=@m % @n\n\n        end\n        return counter\n    end\nend\n</code></pre>\n\n<p>A second piece of code that I have written to test counting in an until program works splendidly and It passed all the test perfectly.</p>\n\n<p>And this returns counter at 100 as expected and the test are in the green.</p>\n\n<pre><code>#until_loop_test.rb\nrequire 'minitest/autorun'\n\n\nclass Until_test &lt; Minitest::Test\n\n    def test_till_100_steps\n        myUntilTestObject=UntilTester.new\n\n        assert myUntilTestObject.untilLoopCount==100\n\n    end\nend\n\n\nclass UntilTester\n\n    def untilLoopCount\n        x=0\n        counter=0\n        until x==100\n            x+=1\n            counter+=1\n        end\n        return counter\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1493777498, "post_id": 43749941, "comment_id": 74542525, "body": "<code>true</code>, <code>true</code>, <code>false</code>, <code>true</code>. Are these four values <i>all</i> <code>true</code>?"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1493777589, "post_id": 43749941, "comment_id": 74542540, "body": "Note that <code>@filters.all? == false</code> is equivalent to <code>x == false</code> where <code>x = @filters.all?</code>. Maybe you meant <code>.all? { |x| x == false }</code>? That\u2019d be better written as <code>not @filters.any?</code>, though."}, {"owner": {"reputation": 969, "user_id": 2744963, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d54577f9d444943e85dafbbd7ab0b85e?s=128&d=identicon&r=PG", "display_name": "Justus Eapen", "link": "https://stackoverflow.com/users/2744963/justus-eapen"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1493777953, "post_id": 43749941, "comment_id": 74542600, "body": "I&#39;m trying to see if all values are all false."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1493795640, "post_id": 43749941, "comment_id": 74548464, "body": "Please, post the code you are having trouble with. The code. Not a photograph of the code. Not a link to the code. The code. See how to construct a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and the <a href=\"https://stackoverflow.com/help\">help center</a> for details,"}, {"owner": {"reputation": 969, "user_id": 2744963, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d54577f9d444943e85dafbbd7ab0b85e?s=128&d=identicon&r=PG", "display_name": "Justus Eapen", "link": "https://stackoverflow.com/users/2744963/justus-eapen"}, "edited": false, "score": 0, "creation_date": 1493825282, "post_id": 43749941, "comment_id": 74569858, "body": "Done. Though I&#39;d point out that the docs you provided don&#39;t mention screenshots specifically and I don&#39;t think the docs provide enough &quot;detail&quot; to infer that screenshots (especially of such a general example) are not adequate. Close requests on this question (for that reason) are certainly unjustified as are the patronizing tone in your suggestion."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 5425671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09e684ebee6c6977b1b1286da6cb2a9e?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin.Xin", "link": "https://stackoverflow.com/users/5425671/kevin-xin"}, "is_accepted": false, "score": 1, "last_activity_date": 1493778352, "creation_date": 1493778352, "answer_id": 43750075, "question_id": 43749941, "link": "https://stackoverflow.com/questions/43749941/how-can-hash-values-all-false-return-true-when-all-the-values-are-not-false/43750075#43750075", "title": "How can hash.values.all? == false return true when all the values are not false?", "body": "<p>I guess the <code>all?</code> method will call the block with each\nFor eaxmple <code>enumerable.all?</code> will be executed like this:</p>\n\n<pre><code>enumerable.each {|x| x }\nhash_enumerable.each {|k, _v| k }\n</code></pre>\n\n<p>So when the enumerable is a hash the block firt params will be the key....</p>\n"}, {"comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1493779379, "post_id": 43750083, "comment_id": 74542874, "body": "@JustusEapen Please check updated answer, there was a flaw on the first option."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 4, "last_activity_date": 1493779250, "last_edit_date": 1493779250, "creation_date": 1493778379, "answer_id": 43750083, "question_id": 43749941, "link": "https://stackoverflow.com/questions/43749941/how-can-hash-values-all-false-return-true-when-all-the-values-are-not-false/43750083#43750083", "title": "How can hash.values.all? == false return true when all the values are not false?", "body": "<p><code>Enumerable#all?</code>, from the docs:</p>\n\n<blockquote>\n  <p>Passes each element of the collection to the given block. The method\n  returns true if the block never returns false or nil. If the block is\n  not given, Ruby adds an implicit block of { |obj| obj } which will\n  cause all? to return true when none of the collection members are\n  false or nil.</p>\n</blockquote>\n\n<p>That means that <code>@filters.values.all?</code> will return false unless every attribute is set to true (or truthy, to be more accurate) so, if you want to know when every item is <code>false</code>, then you will have to pass a block to <code>all?</code> and check each value, like this:</p>\n\n<pre><code>@filters.values.all? { |value| value == false } #=&gt; true\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Previous answer stated that also <code>!@filters.values.all?</code> will return <code>true</code> when all <code>values</code> are <code>truthy</code>, and that's true, but it will also return <code>true</code> if only one is set to <code>false</code>; in fact, it will always return <code>true</code> unless all <code>values</code> are set to <code>true</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "is_accepted": false, "score": 1, "last_activity_date": 1493778702, "creation_date": 1493778702, "answer_id": 43750121, "question_id": 43749941, "link": "https://stackoverflow.com/questions/43749941/how-can-hash-values-all-false-return-true-when-all-the-values-are-not-false/43750121#43750121", "title": "How can hash.values.all? == false return true when all the values are not false?", "body": "<p>To check if all the values in your hash is <code>false</code>, try this: </p>\n\n<pre><code>temp = {self: false, clear: false, lorem: false, ipsum: false}\ntemp.values.uniq == [false]\n#=&gt; true\n\ntemp2 = {self: true, clear: true, lorem: false, ipsum: true}\ntemp2.values.uniq == [false]\n#=&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 111225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e809c7f12bb09dae5c5030b3f28224c?s=128&d=identicon&r=PG", "display_name": "Danny", "link": "https://stackoverflow.com/users/111225/danny"}, "is_accepted": false, "score": 1, "last_activity_date": 1493778795, "creation_date": 1493778795, "answer_id": 43750134, "question_id": 43749941, "link": "https://stackoverflow.com/questions/43749941/how-can-hash-values-all-false-return-true-when-all-the-values-are-not-false/43750134#43750134", "title": "How can hash.values.all? == false return true when all the values are not false?", "body": "<p>A shorter, though slightly less clear, way to determine if all of the values are false is to simply ask if any of them are true and negate the response:</p>\n\n<pre><code>@filters = {foo: false, bar: true, baz: false}\n!@filters.values.any? #=&gt; false\n\n@filters = {foo: false, bar: false, baz: false}\n!@filters.values.any? #=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 969, "user_id": 2744963, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d54577f9d444943e85dafbbd7ab0b85e?s=128&d=identicon&r=PG", "display_name": "Justus Eapen", "link": "https://stackoverflow.com/users/2744963/justus-eapen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 0, "accepted_answer_id": 43750083, "answer_count": 4, "score": -2, "last_activity_date": 1493824485, "creation_date": 1493777376, "last_edit_date": 1493824485, "question_id": 43749941, "link": "https://stackoverflow.com/questions/43749941/how-can-hash-values-all-false-return-true-when-all-the-values-are-not-false", "title": "How can hash.values.all? == false return true when all the values are not false?", "body": "<p>How can <code>@filters.values.all? == false</code> return <code>true</code> when `@filters.values' clearly shows three true values?</p>\n\n<p>EDIT: And how <em>do</em> you check to see if every value is false?</p>\n\n<p>EDIT2: Because people want to copy and paste an arbitrary code snippet:</p>\n\n<pre><code>f = { \n  self: true,\n  clear: true,\n  something1: false,\n  something2: true\n}\n\nf.all? == false\n==&gt; false\n\nf.values.all? == false\n==&gt; true\n\nf.values\n==&gt; [true, true, false, true]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/femhg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/femhg.png\" alt=\"Filters hash witchcraft\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 892, "user_id": 7565106, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b14a8306cb85fd48a52f07113ba688a?s=128&d=identicon&r=PG&f=1", "display_name": "Daltron", "link": "https://stackoverflow.com/users/7565106/daltron"}, "edited": false, "score": 0, "creation_date": 1493776506, "post_id": 43749816, "comment_id": 74542330, "body": "Have you tried checking <code>current_user</code> to the instance @user in your controller?"}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 37, "user_id": 7811635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8e2d675d8d7be86f81354fc230d9ea3f?s=128&d=identicon&r=PG&f=1", "display_name": "roram", "link": "https://stackoverflow.com/users/7811635/roram"}, "edited": false, "score": 0, "creation_date": 1493777290, "post_id": 43749854, "comment_id": 74542469, "body": "Glad to help you!"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1493776969, "last_edit_date": 1493776969, "creation_date": 1493776592, "answer_id": 43749854, "question_id": 43749816, "link": "https://stackoverflow.com/questions/43749816/only-allow-logged-in-current-users-to-edit-their-own-post/43749854#43749854", "title": "Only allow logged in/current users to edit their own post", "body": "<p>You can use something like:</p>\n\n<pre><code>&lt;% if user_signed_in? &amp;&amp; current_user.id == @review.user_id %&gt;\n</code></pre>\n\n<p>Which is saying, check if the user is already logged, and check if the <code>current_user</code> is the owner of the <code>review</code>, checking the <code>current_user</code> id and the <code>id</code> from the owner of such review.</p>\n\n<p>So you can try:</p>\n\n<pre><code>&lt;td&gt;\n  &lt;%= review.review %&gt;\n  &lt;% if user_signed_in &amp;&amp; current_user.id == review.user_id %&gt;\n    &lt;%= link_to 'Edit', edit_review_path(review) %&gt;\n  &lt;% end %&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>You can also create a method an use it as <code>before_action</code> to check for the match between the <code>current_user</code> and the owner of the <code>review</code>, but I think the view \"validation\" could be enough.</p>\n"}], "owner": {"reputation": 37, "user_id": 7811635, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8e2d675d8d7be86f81354fc230d9ea3f?s=128&d=identicon&r=PG&f=1", "display_name": "roram", "link": "https://stackoverflow.com/users/7811635/roram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 43749854, "answer_count": 1, "score": 2, "last_activity_date": 1493776969, "creation_date": 1493776319, "question_id": 43749816, "link": "https://stackoverflow.com/questions/43749816/only-allow-logged-in-current-users-to-edit-their-own-post", "title": "Only allow logged in/current users to edit their own post", "body": "<p>I have a table of post in which users log into the application and can post an item. Ideally, I would like to have users edit only their post and no one else's. So far, I have it so that users are able to edit posts, but also edit others. </p>\n\n<p>This is what I think I need to get fixed from index.html.erb file: </p>\n\n<pre><code>&lt;td&gt;&lt;%= review.review %&gt; (&lt;% if current_user%&gt;&lt;%= link_to 'Edit', edit_review_path(review)%&gt;&lt;%end%&gt;)&lt;/td&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "methods", "refactoring"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 2, "creation_date": 1493774225, "post_id": 43749465, "comment_id": 74541843, "body": "You do have to convert to integer if you want it to be an integer (<code>gets</code> will return <code>String</code>). You could shorten your code to <code>guesses &lt;&lt; gets.to_i</code> and get the same result."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493774597, "post_id": 43749465, "comment_id": 74541932, "body": "<code>guesses = [gets.to_i]</code> perhaps."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1493786916, "post_id": 43749465, "comment_id": 74544729, "body": "You can assign the result of a method chain (see <a href=\"http://stackoverflow.com/a/43751234/1301972\">my answer</a> below), but generally readability trumps cleverness. YMMV."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1493787234, "post_id": 43749465, "comment_id": 74544824, "body": "@sagarpandya82 Assigning the literal the way you suggest will work, but using Kernel#Integer is safer than String#to_i. So, <code>guesses = [Integer(gets)]</code> is probably the better alternative if you&#39;re just looking for the shortest code that guarantees a single-element array and want to avoid chaining methods."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493790096, "post_id": 43751234, "comment_id": 74545817, "body": "Not just <code>guesses = [Integer(gets)]</code>?"}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493790639, "post_id": 43751234, "comment_id": 74546046, "body": "@CarySwoveland You can if you want. But why do you think that&#39;s more explicit or more readable?"}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": true, "score": 1, "last_activity_date": 1493786626, "creation_date": 1493786626, "answer_id": 43751234, "question_id": 43749465, "link": "https://stackoverflow.com/questions/43749465/convert-user-input-into-integer-in-array-in-ruby/43751234#43751234", "title": "Convert user input into integer in array in Ruby?", "body": "<h2>Use Strict Casting</h2>\n\n<p>You <em>have</em> to cast your input to an Integer, because <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-gets\" rel=\"nofollow noreferrer\">Kernel#gets</a> always returns either a String or nil. One way to do this as a one-liner is to assign an empty Hash to your variable, and then append the cast to the Hash. This is probably faster than your current approach, but I haven't actually benchmarked it.</p>\n\n<p>For example, if you enter <code>1</code> at the prompt, you will get:</p>\n\n<pre><code>print 'Enter integer: '\nguesses = [] &lt;&lt; Integer(gets)\n#=&gt; [1]\n</code></pre>\n\n<p>A nice side effect of this approach is that you'll get an appropriate exception if you can't cast the integer with <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-Integer\" rel=\"nofollow noreferrer\">Kernel#Integer</a>. For example:</p>\n\n<blockquote>\n  <p>Enter integer: foo<br>\n  ArgumentError: invalid value for Integer(): \"foo\\n\"</p>\n</blockquote>\n\n<h2>Avoid String#to_i When You Need a Strict Cast</h2>\n\n<p>Using <a href=\"https://ruby-doc.org/core/String.html#method-i-to_i\" rel=\"nofollow noreferrer\">String#to_i</a> will not always do what you expect. Consider the following, assuming you enter <code>foo</code> at the prompt:</p>\n\n<pre><code>print 'Enter integer: '\nguesses = [] &lt;&lt; gets.to_i\n#=&gt; [0]\n</code></pre>\n\n<p>Because String#to_i is more lenient about the cast than Kernel#Integer, any non-integer response (including nil) will be cast as <code>0</code>. There may be times when this is what you want, but for your posted use case this is unlikely to be desirable.</p>\n"}], "owner": {"reputation": 13, "user_id": 7275437, "user_type": "registered", "profile_image": "https://graph.facebook.com/820602339994/picture?type=large", "display_name": "Jordan Lyons", "link": "https://stackoverflow.com/users/7275437/jordan-lyons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1869, "favorite_count": 1, "accepted_answer_id": 43751234, "answer_count": 1, "score": -1, "last_activity_date": 1493786626, "creation_date": 1493773468, "last_edit_date": 1493776344, "question_id": 43749465, "link": "https://stackoverflow.com/questions/43749465/convert-user-input-into-integer-in-array-in-ruby", "title": "Convert user input into integer in array in Ruby?", "body": "<p>I want a user's input to become an integer that is the [0] index in a new array that I want to add more items to later. Is there a way to just convert the user's input into an array without changing it into an integer and pushing it? This is my current code:</p>\n\n<pre><code>guesses = []\nputs \"Guess what number I'm thinking of. It's between 1 and #{solution_range}\"\nguess = gets.to_i\nguesses.push(guess)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1493773417, "post_id": 43749435, "comment_id": 74541672, "body": "Try setting <code>gradework</code> instead of <code>gradework_id</code> in your view. Can you share your view (<code>new.html.erb</code>)?"}, {"owner": {"reputation": 15, "user_id": 7954685, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155297153368044/picture?type=large", "display_name": "Sebastian Morales Garz&#243;n", "link": "https://stackoverflow.com/users/7954685/sebastian-morales-garz%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1493774428, "post_id": 43749435, "comment_id": 74541897, "body": "Now add the view and this is the query  &quot; def self.users_gradework(id) joins(:users).select(&quot;gradeworks.id,gradeworks.name,gradewor&zwnj;&#8203;ks.description&quot;) .where({ users: { id: id } })   end&quot;"}, {"owner": {"reputation": 15, "user_id": 7954685, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155297153368044/picture?type=large", "display_name": "Sebastian Morales Garz&#243;n", "link": "https://stackoverflow.com/users/7954685/sebastian-morales-garz%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1493774610, "post_id": 43749435, "comment_id": 74541933, "body": "The relation is  &quot; has_and_belongs_to_many :gradeworks&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7954685, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155297153368044/picture?type=large", "display_name": "Sebastian Morales Garz&#243;n", "link": "https://stackoverflow.com/users/7954685/sebastian-morales-garz%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1493775624, "post_id": 43749672, "comment_id": 74542133, "body": "When I change the relation I got the following error  &quot;Gradework(#69970235955560) expected, got String(#15868000)&quot;."}], "tags": [], "owner": {"reputation": 2232, "user_id": 1430655, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/IJdhB.jpg?s=128&g=1", "display_name": "shiladitya", "link": "https://stackoverflow.com/users/1430655/shiladitya"}, "is_accepted": false, "score": 0, "last_activity_date": 1493775063, "creation_date": 1493775063, "answer_id": 43749672, "question_id": 43749435, "link": "https://stackoverflow.com/questions/43749435/unknown-attribute-gradework-for-feedback/43749672#43749672", "title": "unknown attribute &#39;gradework&#39; for Feedback", "body": "<p>You are supposed to have 2 two things to create gradework entry along with feedback entry from your view:</p>\n\n<ol>\n<li><code>belongs_to :gradework</code> in <code>Feedback</code> model.</li>\n<li>The name in the form should be <code>feedback[gradework_attributes]</code> instead of <code>feedback[gradework]</code></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 7954685, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155297153368044/picture?type=large", "display_name": "Sebastian Morales Garz&#243;n", "link": "https://stackoverflow.com/users/7954685/sebastian-morales-garz%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1493777976, "post_id": 43749847, "comment_id": 74542608, "body": "Change gradework by gradework_id but still the error continues."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 15, "user_id": 7954685, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155297153368044/picture?type=large", "display_name": "Sebastian Morales Garz&#243;n", "link": "https://stackoverflow.com/users/7954685/sebastian-morales-garz%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1493779687, "post_id": 43749847, "comment_id": 74542936, "body": "@SebastianMoralesGarz&#243;n In your error screen, what are you getting now on <b>Parameters:</b>?"}, {"owner": {"reputation": 15, "user_id": 7954685, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155297153368044/picture?type=large", "display_name": "Sebastian Morales Garz&#243;n", "link": "https://stackoverflow.com/users/7954685/sebastian-morales-garz%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1493779929, "post_id": 43749847, "comment_id": 74542986, "body": "If it was that along with one more detail, thank you very much"}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 0, "last_activity_date": 1493776573, "creation_date": 1493776573, "answer_id": 43749847, "question_id": 43749435, "link": "https://stackoverflow.com/questions/43749435/unknown-attribute-gradework-for-feedback/43749847#43749847", "title": "unknown attribute &#39;gradework&#39; for Feedback", "body": "<p>The problem seems to be here:</p>\n\n<pre><code>&lt;%= select_tag(:gradework, options_from_collection_for_select(@grad_jury ,:id, :name), :prompt =&gt; \"Ninguno\", class: \"form-control\", name: \"feedback[gradework]\") %&gt;\n</code></pre>\n\n<p>Your form is sending a <code>gradework</code> attribute that is not in your model (<code>Feedback</code>), so you need to send <code>gradework_id</code> instead, so try chaning the above line to this:</p>\n\n<pre><code>&lt;%= select_tag(:gradework_id, options_from_collection_for_select(@grad_jury ,:id, :name), :prompt =&gt; \"Ninguno\", class: \"form-control\", name: \"feedback[gradework_id]\") %&gt;\n</code></pre>\n\n<p>That will send <code>gradework_id</code> as a parameter with whatever value is chosen in the <code>select</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 7954685, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155297153368044/picture?type=large", "display_name": "Sebastian Morales Garz&#243;n", "link": "https://stackoverflow.com/users/7954685/sebastian-morales-garz%c3%b3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 43749847, "answer_count": 2, "score": 0, "last_activity_date": 1493787847, "creation_date": 1493773138, "last_edit_date": 1493787847, "question_id": 43749435, "link": "https://stackoverflow.com/questions/43749435/unknown-attribute-gradework-for-feedback", "title": "unknown attribute &#39;gradework&#39; for Feedback", "body": "<p>I have the following error: </p>\n\n<blockquote>\n  <p>\"tribute 'gradework' for Feedback.\"</p>\n</blockquote>\n\n<p>In the link is the screen of the rails console and the parameters that are sent are: </p>\n\n<pre><code>\"{\" feedback \"=&gt; {\" anotations \"=&gt;\" Holiiii \",\" score \"=&gt;\" 12 \" 1 \",\" user \"=&gt;\" # &lt;User: 0x007f4674123f38&gt; \"}}\"\n</code></pre>\n\n<p>Error Image:</p>\n\n<p><img src=\"https://i.stack.imgur.com/3mTJo.png\" alt=\"Error Image\"></p>\n\n<p>feedback.rb</p>\n\n<pre><code>class CreateFeedbacks &lt; ActiveRecord::Migration[5.0]\n   def change\n     create_table :feedbacks do |t|\n       t.text :anotations\n       t.integer :score\n       t.references :gradework, foreign_key: true\n       t.references :user, foreign_key: true\n       t.timestamps\n     end\n   end\nend\n</code></pre>\n\n<p>schema.rb</p>\n\n<pre><code>create_table \"feedbacks\", force: :cascade do |t|\n    t.text     \"anotations\"\n    t.integer  \"score\"\n    t.integer  \"gradework_id\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\",   null: false\n    t.datetime \"updated_at\",   null: false\n    t.index [\"gradework_id\"], name: \"index_feedbacks_on_gradework_id\", using: :btree\n    t.index [\"user_id\"], name: \"index_feedbacks_on_user_id\", using: :btree\n  end\n\ncreate_table \"gradeworks\", force: :cascade do |t|\n    t.string   \"name\"\n    t.text     \"description\"\n    t.string   \"status\"\n    t.date     \"delivery_date\"\n    t.date     \"begin_date\"\n    t.time     \"hour\"\n    t.text     \"locale\"\n    t.string   \"semester\"\n    t.datetime \"created_at\",    null: false\n    t.datetime \"updated_at\",    null: false\n    t.string   \"file\"\n  end\n</code></pre>\n\n<p>feedbackController:</p>\n\n<pre><code>def create\n     @feedback = Feedback.new(feedback_params)\n    respond_to do |format|\n      if @feedback.save!\n        format.html { redirect_to @feedback, notice: 'Feedback was successfully created.' }\n        format.json { render :show, status: :created, location: @feedback }\n      else\n        format.html { render :new, notice: 'Feedback was not created.' }\n        format.json { render json: @feedback.errors, status: :unprocessable_entity }\n      end\n    end\n  end   \n\ndef feedback_params\n      params.require(:feedback).permit(:anotations, :score, :gradework, :user)\n    end\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>&lt;form role=\"form\" id=\"newForm\" action=\"/feedbacks\" method=\"post\"&gt;\n\n      &lt;div class=\"form-group\"&gt;        \n          Comentario:&lt;br&gt;\n          &lt;textarea  type=\"text\" rows=\"5\" class=\"form-control\"\n             id=\"inputAnotations\" placeholder=\"Ingrese su comentario\"                                                    name=\"feedback[anotations]\" required&gt;&lt;/textarea&gt;\n        &lt;br&gt;&lt;br&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n                Score:&lt;br&gt;\n                &lt;input type=\"number\" class=\"form-control\" name=\"feedback[score]\"&gt;\n     &lt;/div&gt;\n     &lt;div class=\"form-group\"&gt;\n            &lt;label for=\"gradework\"&gt;Tesis:&lt;/label&gt;\n             &lt;%= select_tag(:gradework, options_from_collection_for_select(@grad_jury ,:id, :name), :prompt =&gt; \"Ninguno\", class: \"form-control\", name: \"feedback[gradework]\") %&gt;\n     &lt;/div&gt;\n     &lt;div class=\"form-group\"&gt;\n            &lt;%#User:&lt;br&gt;%&gt;\n            &lt;input type=\"hidden\" class=\"form-control\" name=\"feedback[user]\" value= &lt;%= @cUser %&gt;&gt;\n    &lt;/div&gt;\n\n      &lt;br&gt;&lt;br&gt;\n    &lt;button type=\"submit\" class=\"btn btn-default\" data-dismiss=\"\"&gt;Agregar&lt;/button&gt;\n    &lt;!-- &lt;input type=\"submit\" value=\"Agregar\"&gt; --&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I do not know what's wrong!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1493768219, "post_id": 43748809, "comment_id": 74540669, "body": "I think this expected behavior, as that&#39;s how the block is read. You should be able to use <code>concat</code> to combine both the <code>image_tag</code> and <code>text</code> in your helper, though. ;)"}], "answers": [{"tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": true, "score": 1, "last_activity_date": 1493768421, "creation_date": 1493768421, "answer_id": 43748868, "question_id": 43748809, "link": "https://stackoverflow.com/questions/43748809/does-rails-link-to-only-accept-one-parameter-in-its-block-when-used-outside-of/43748868#43748868", "title": "Does Rails&#39; #link_to only accept one parameter in its block when used outside of ERB?", "body": "<p>Following up to my comment:</p>\n\n<p>The reason is behavior happens is because of how Ruby handles blocks, and how Rails handles the output for ActionController.</p>\n\n<p>The trick here is to use handy-dandy <code>concat</code>.</p>\n\n<pre><code>def build_link\n  link_to(\"#\") do\n    concat image_tag(\"http://placehold.it/300x300\")\n    concat \"hello world\"\n  end\nend\n</code></pre>\n\n<p>Pretend the block you pass to <code>link_to</code> is just another method, and it gets returned some object/value. In this case, your <code>text</code> object gets returned.</p>\n\n<p>But because you want to output both <code>image_tag</code> and <code>text</code>, you need to pass that together to the output.</p>\n"}], "owner": {"reputation": 7599, "user_id": 6730305, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/g0QG2.jpg?s=128&g=1", "display_name": "stackjlei", "link": "https://stackoverflow.com/users/6730305/stackjlei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 43748868, "answer_count": 1, "score": 0, "last_activity_date": 1493768421, "creation_date": 1493767937, "question_id": 43748809, "link": "https://stackoverflow.com/questions/43748809/does-rails-link-to-only-accept-one-parameter-in-its-block-when-used-outside-of", "title": "Does Rails&#39; #link_to only accept one parameter in its block when used outside of ERB?", "body": "<p>When I did this in ERB, it works as expected, giving me an <code>a</code> tag that wraps around an image and some text</p>\n\n<pre><code>&lt;%= link_to(...) do %&gt;\n  &lt;img src=\"...\" /&gt;\n  text\n&lt;% end %&gt;\n</code></pre>\n\n<p>But when I tried to put this in a method, the <code>a</code> tag only wraps the last argument, which in this case, is the text.</p>\n\n<pre><code>  def build_link\n    link_to(...) do\n      image_tag(...)\n      text\n    end\n  end\n</code></pre>\n\n<p>Looking at the <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow noreferrer\">docs</a>, they only gave an example of using <code>link_to</code> in ERB, so is it smart to assume that using it in a method doesn't work as well and can't accept two parameters?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "edited": false, "score": 0, "creation_date": 1493832560, "post_id": 43752775, "comment_id": 74574282, "body": "Hey, I&#39;m trying to give your method a shot but I seem to be running into a slight issue. It outputs wrong.  [11] pry(#&lt;EventsController&gt;)&gt; params[:event][:ended_at] =&gt; &quot;05/31/2017 2:00 PM&quot; [12] pry(#&lt;EventsController&gt;)&gt; to_datetime = DateTime.strptime(params[:event][:started_at], &quot;%m/%d/%Y %H:%M %p&quot;) =&gt; Wed, 31 May 2017 12:00:00 +0000 [13] pry(#&lt;EventsController&gt;)&gt; to_datetime.in_time_zone(&quot;Pacific Time (US &amp; Canada)&quot;) =&gt; Wed, 31 May 2017 05:00:00 PDT -07:00 [14] pry(#&lt;EventsController&gt;)&gt;  If I check with google. Everything seems to check out fine: <a href=\"http://imgur.com/W81qFwV\" rel=\"nofollow noreferrer\">imgur.com/W81qFwV</a>"}, {"owner": {"reputation": 14400, "user_id": 2580302, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/db72295390541fa9df9cf434bd92937d?s=128&d=identicon&r=PG", "display_name": "zetacu", "link": "https://stackoverflow.com/users/2580302/zetacu"}, "reply_to_user": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "edited": false, "score": 0, "creation_date": 1493833662, "post_id": 43752775, "comment_id": 74574936, "body": "Can you tell me the value of <code>started_at</code>. seems to me that might be a typo."}, {"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "edited": false, "score": 0, "creation_date": 1493834094, "post_id": 43752775, "comment_id": 74575182, "body": "It was a typo. I copied the <code>:ended_at</code> and <code>:started_at</code> but the error still exists. I put the issue into it&#39;s own question here <a href=\"http://stackoverflow.com/questions/43766762/rails-5-not-converting-datetime-object-timezone-correctly\" title=\"rails 5 not converting datetime object timezone correctly\">stackoverflow.com/questions/43766762/&hellip;</a> Which is easier than trying to squeeze the issue into a small comment."}, {"owner": {"reputation": 14400, "user_id": 2580302, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/db72295390541fa9df9cf434bd92937d?s=128&d=identicon&r=PG", "display_name": "zetacu", "link": "https://stackoverflow.com/users/2580302/zetacu"}, "reply_to_user": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "edited": false, "score": 0, "creation_date": 1493836184, "post_id": 43752775, "comment_id": 74576430, "body": "I send you the reply, the mistake is that the system runs in UTC but the date is on PDT, that&#39;s what I was saying you need to know the original timezone,  first you need to pass from the original to UTC not straight to UTC"}, {"owner": {"reputation": 14400, "user_id": 2580302, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/db72295390541fa9df9cf434bd92937d?s=128&d=identicon&r=PG", "display_name": "zetacu", "link": "https://stackoverflow.com/users/2580302/zetacu"}, "reply_to_user": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "edited": false, "score": 0, "creation_date": 1493836464, "post_id": 43752775, "comment_id": 74576599, "body": "btw you mention that you&#39;ll save the preferred timezone somewhere so use that when saving as the original"}], "tags": [], "owner": {"reputation": 14400, "user_id": 2580302, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/db72295390541fa9df9cf434bd92937d?s=128&d=identicon&r=PG", "display_name": "zetacu", "link": "https://stackoverflow.com/users/2580302/zetacu"}, "is_accepted": false, "score": 0, "last_activity_date": 1493793418, "creation_date": 1493793418, "answer_id": 43752775, "question_id": 43748703, "link": "https://stackoverflow.com/questions/43748703/rails-5-strategies-to-handle-users-saving-records-with-multiple-time-zones/43752775#43752775", "title": "Rails 5: Strategies to handle users saving records with multiple time zones", "body": "<p>I recommend to split the problem in 2 sides:</p>\n\n<ol>\n<li><p><strong>Data in:</strong> You should save the events and any other model that uses time in the db using a single timezone (I recommend UTC), that means that every time they create a model, you'll have to convert from the preferred timezone to your db timezone. <strong>Make sure that the app and the db are set in the same timezone.</strong></p></li>\n<li><p><strong>Data out:</strong> you'll have to create a method shared across your app that it's in the models, presenters, etc can use and can switch the data from the db timezone to the preferred timezone. <strong>This should be the last step before the data leaving your server.</strong></p></li>\n</ol>\n\n<p>The method will have something like this:</p>\n\n<pre><code>time.in_time_zone(\"America/New_York\")\n</code></pre>\n\n<p>In this way your app does calculations and all in a single timezone and the user will have them in their preferred location.</p>\n"}], "owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493793418, "creation_date": 1493767195, "question_id": 43748703, "link": "https://stackoverflow.com/questions/43748703/rails-5-strategies-to-handle-users-saving-records-with-multiple-time-zones", "title": "Rails 5: Strategies to handle users saving records with multiple time zones", "body": "<p>I have an app that I'm working on that will have nationwide (possibly world wide) customers. I'm dealing with timezones for the first time with this app and it's a bit of a headache. I'm curious on the strategies for dealing with users in different timezones.</p>\n\n<p>Right now, the user is able to select their timezone when they create their account and <code>Time.zone</code> is set application wide in the application controller:</p>\n\n<pre><code># application_controller.rb\ndef set_timezone\n  if current_user\n    Time.zone = current_user.time_zone\n  else\n    Time.zone = \"Pacific Time (US &amp; Canada)\"\n  end\nend\n</code></pre>\n\n<p>I would like the user to be able to create their Event and set the time with their timezone automatically and then have other users in other timezones adjust so they see the proper time.</p>\n\n<p>I'm having a hard time trying to google the solution to this (seemingly common issue) and curious as the strategies to dealing with this. I would imagine Rails has some baked in features. </p>\n"}, {"tags": ["ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1493800938, "post_id": 43748603, "comment_id": 74551670, "body": "Please add the code that shows how you are trying to create these objects."}, {"owner": {"reputation": 2887, "user_id": 638357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/346dd483010b2a9bf8c03254922fd89d?s=128&d=identicon&r=PG", "display_name": "Deviland", "link": "https://stackoverflow.com/users/638357/deviland"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1494794932, "post_id": 43748603, "comment_id": 74967250, "body": "creation is not the problem, every time I try to add <i>belongs_to</i> or <i>has_many</i> the relationships break down"}], "owner": {"reputation": 2887, "user_id": 638357, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/346dd483010b2a9bf8c03254922fd89d?s=128&d=identicon&r=PG", "display_name": "Deviland", "link": "https://stackoverflow.com/users/638357/deviland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493766456, "creation_date": 1493766456, "question_id": 43748603, "link": "https://stackoverflow.com/questions/43748603/how-to-add-object-references-to-mongoid-document", "title": "how to add object references to mongoid document", "body": "<p>I am writing an application for my football club, and as part of this I decided to try out MongoDB in a Grape API non-rails. </p>\n\n<p>So I have the following classes</p>\n\n<p>Team &amp; Coach </p>\n\n<p>I am trying to define the relationship between both but cannot get this to work.</p>\n\n<pre><code>class Team \n  include Mongoid::Document\n  field :name, type: String\n  has_one :coach \nend    \n</code></pre>\n\n<p>initially the coach filed will be null and therefor when I add a team the only filed I pass in is <em>name</em> this I then see represented in MongoDB like so </p>\n\n<pre><code>{\n   \"_id\" : ObjectId(\"59090e04cf2bee0c0a16a22f\"), \n   \"name\" : \"team A\"\n}\n</code></pre>\n\n<p>then when I come to add the coach I get a 201 returned from the API no errors but the coach is missing from MongoDB please someone tell me what I am doing wrong it's driving me insane</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bootstrap-sass"], "comments": [{"owner": {"reputation": 198, "user_id": 6206413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kH1dz.jpg?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/6206413/jake"}, "edited": false, "score": 0, "creation_date": 1493767999, "post_id": 43747903, "comment_id": 74540619, "body": "Maybe some more info about the first message with &#39;The object does not support this property or method&#39;. Maybe the name of the file which should be layouts/application.html.erb and specifically what is on line 7?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7954046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514ca47b9b3c1f9e1c2071810f99628b?s=128&d=identicon&r=PG&f=1", "display_name": "Mike G", "link": "https://stackoverflow.com/users/7954046/mike-g"}, "edited": false, "score": 0, "creation_date": 1493799055, "post_id": 43748756, "comment_id": 74550542, "body": "Thx for your answer, If I change &quot;default&quot; back to &quot;application&quot; (that is the standard entry) I get the first error msg. As I mentioned, I changed it to &quot;default&quot; because I found that in an other answer on this website. The first error msg is about property and method, and the second is about the asset.css. So, I don&#39;t know that to do."}], "tags": [], "owner": {"reputation": 198, "user_id": 6206413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kH1dz.jpg?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/6206413/jake"}, "is_accepted": false, "score": 0, "last_activity_date": 1493767512, "creation_date": 1493767512, "answer_id": 43748756, "question_id": 43747903, "link": "https://stackoverflow.com/questions/43747903/errors-after-installing-bootstrap-sass-on-ruby-rails/43748756#43748756", "title": "Errors after installing bootstrap-sass on ruby rails", "body": "<p>If I am reading this correctly you need to change default to application.</p>\n\n<pre><code>&lt;%= stylesheet_link_tag    \"application\", media: \"all\", \"data-turbolinks-track\" =&gt; true %&gt;\n&lt;%= javascript_include_tag \"application\", \"data-turbolinks-track\" =&gt; true %&gt;\n</code></pre>\n\n<p>It is looking for a default.css file but should be looking for your application.css file or your application.js file. By changing your first issue you caused your second one. </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7954046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514ca47b9b3c1f9e1c2071810f99628b?s=128&d=identicon&r=PG&f=1", "display_name": "Mike G", "link": "https://stackoverflow.com/users/7954046/mike-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1493929917, "last_edit_date": 1495542372, "creation_date": 1493929917, "answer_id": 43792286, "question_id": 43747903, "link": "https://stackoverflow.com/questions/43747903/errors-after-installing-bootstrap-sass-on-ruby-rails/43792286#43792286", "title": "Errors after installing bootstrap-sass on ruby rails", "body": "<p>I solved the problem. I had to remove <code>//= require_tree .</code> from <code>application.js</code></p>\n\n<p>There is an answer here: <a href=\"https://stackoverflow.com/questions/12520456/execjsruntimeerror-on-windows-trying-to-follow-rubytutorial\">enter link description here</a></p>\n"}], "owner": {"reputation": 11, "user_id": 7954046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514ca47b9b3c1f9e1c2071810f99628b?s=128&d=identicon&r=PG&f=1", "display_name": "Mike G", "link": "https://stackoverflow.com/users/7954046/mike-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 824, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1493929917, "creation_date": 1493762341, "last_edit_date": 1495540480, "question_id": 43747903, "link": "https://stackoverflow.com/questions/43747903/errors-after-installing-bootstrap-sass-on-ruby-rails", "title": "Errors after installing bootstrap-sass on ruby rails", "body": "<p>I'm trying to create a webapp with rails and bootstrap-sass.<br>\nI installed those with instructions from <a href=\"https://www.youtube.com/watch?v=Nf_Si8_szmM&amp;t=309s\" rel=\"nofollow noreferrer\">Ruby On Rails With Bootstrap Tutorial (simple)</a>, which works. </p>\n\n<p>After installing the bootstrap-sass gem, and trying to open my app in the browser, ruby/rails gets me an error msg.</p>\n\n<blockquote>\n  <p>Showing C:/Sites/bopp/app/views/layouts/application.html.erb where line #7 raised:\n  TypeError: Das Objekt unterst\u00fctzt diese Eigenschaft oder Methode nicht.></p>\n</blockquote>\n\n<p>Entries:</p>\n\n<pre><code>&lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n&lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n</code></pre>\n\n<p>According to <a href=\"https://stackoverflow.com/questions/35880659/ruby-on-rails-application-coult-not-include-stylesheet-nor-js\">Ruby on Rails Application coult not include stylesheet nor js</a> I changed it, and got another error:</p>\n\n<blockquote>\n  <p>Showing C:/Sites/bopp/app/views/layouts/application.html.erb where line #7 raised:\n  The asset \"default.css\" is not present in the asset pipeline.</p>\n</blockquote>\n\n<p>Entries: </p>\n\n<pre><code>&lt;%= stylesheet_link_tag    \"default\", media: \"all\", \"data-turbolinks-track\" =&gt; true %&gt;\n&lt;%= javascript_include_tag \"default\", \"data-turbolinks-track\" =&gt; true %&gt;\n</code></pre>\n\n<p>I changed application.css to application.css.scss.\nEntries:</p>\n\n<pre><code>/*\n * This is a manifest file that'll be compiled into application.css, which will include all the files\n*\n * Any CSS and SCSS file within this directory, lib/assets/stylesheets, or any plugin's\n * vendor/assets/stylesheets directory can be referenced here using a relative path.\n * It is generally better to create a new file per style scope.\n *\n *= require_tree .\n *= require_self\n */\n@import 'bootstrap-sprockets';\n@import 'bootstrap';\n</code></pre>\n\n<p>Only one change in  Gemfile:</p>\n\n<pre><code>gem 'bootstrap-sass'\n</code></pre>\n\n<p>I changed nothing else.</p>\n\n<p>Then I ran <code>bundle install</code>.</p>\n\n<p>Ruby Version: 2.3.3<br>\nRails Version: 5.1.0 (downloaded from <a href=\"http://railsinstaller.org/en\" rel=\"nofollow noreferrer\">http://railsinstaller.org/en</a>)<br>\nOS: Windows 7<br>\nEditor: Sublime Text 2<br>\nBrowser: Mozilla Firefox</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1493762460, "post_id": 43747373, "comment_id": 74538973, "body": "<a href=\"http://ruby-doc.org/core-2.4.1/Array.html#method-i-combination\" rel=\"nofollow noreferrer\">Array#combination</a> or <a href=\"http://ruby-doc.org/core-2.4.1/Array.html#method-i-repeated_combination\" rel=\"nofollow noreferrer\">Array#repeated_combination</a> any good?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1493763425, "post_id": 43747373, "comment_id": 74539357, "body": "Do you mean the cartesian product of the arrays?"}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 9, "last_activity_date": 1493763917, "last_edit_date": 1493763917, "creation_date": 1493763597, "answer_id": 43748139, "question_id": 43747373, "link": "https://stackoverflow.com/questions/43747373/given-an-array-of-size-y-containing-arrays-of-size-n-how-can-i-return-all-logi/43748139#43748139", "title": "Given an array of size y, containing arrays of size n, how can I return all logical combinations using Ruby?", "body": "<p>It looks like you want to compute the cartesian product of the arrays. The method which computes the cartesian product is (not too surprisingly) called <a href=\"http://ruby-doc.org/core/Array.html#method-i-product\" rel=\"noreferrer\"><code>Array#product</code></a>:</p>\n\n<pre><code>@task_states.first.product(*@task_states.drop(1))\n</code></pre>\n\n<p>So, for example:</p>\n\n<pre><code>['A', 'no A'].product(['B', 'no B'], ['C', 'no C'], ['D', 'no D'])\n#=&gt; [[   \"A\",    \"B\",    \"C\",    \"D\"],\n#    [   \"A\",    \"B\",    \"C\", \"no D\"],\n#    [   \"A\",    \"B\", \"no C\",    \"D\"],\n#    [   \"A\",    \"B\", \"no C\", \"no D\"],\n#    [   \"A\", \"no B\",    \"C\",    \"D\"],\n#    [   \"A\", \"no B\",    \"C\", \"no D\"],\n#    [   \"A\", \"no B\", \"no C\",    \"D\"],\n#    [   \"A\", \"no B\", \"no C\", \"no D\"],\n#    [\"no A\",    \"B\",    \"C\",    \"D\"],\n#    [\"no A\",    \"B\",    \"C\", \"no D\"],\n#    [\"no A\",    \"B\", \"no C\",    \"D\"],\n#    [\"no A\",    \"B\", \"no C\", \"no D\"],\n#    [\"no A\", \"no B\",    \"C\",    \"D\"],\n#    [\"no A\", \"no B\",    \"C\", \"no D\"],\n#    [\"no A\", \"no B\", \"no C\",    \"D\"],\n#    [\"no A\", \"no B\", \"no C\", \"no D\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1493804722, "last_edit_date": 1493804722, "creation_date": 1493786746, "answer_id": 43751261, "question_id": 43747373, "link": "https://stackoverflow.com/questions/43747373/given-an-array-of-size-y-containing-arrays-of-size-n-how-can-i-return-all-logi/43751261#43751261", "title": "Given an array of size y, containing arrays of size n, how can I return all logical combinations using Ruby?", "body": "<p>By all means, use <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-product\" rel=\"nofollow noreferrer\">Array#product</a>, but as in oft the case with Ruby, there are other ways. Here are two.</p>\n\n<pre><code>arr = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n</code></pre>\n\n<p><strong>Use math to compute each of the <code>arr.size**arr.first.size</code> combinations</strong></p>\n\n<pre><code>def cartesian_product(arr)\n  n, m = arr.size, arr.first.size\n  (0..n**m-1).map do |x|\n    (n-1).downto(0).map do |i|\n      x, r = x.divmod(m)\n      arr[i][r]\n    end.reverse\n  end\nend\n\ncartesian_product arr\n  #=&gt; [[1, 4, 7], [1, 4, 8], [1, 4, 9], [1, 5, 7], [1, 5, 8], [1, 5, 9],\n  #    [1, 6, 7], [1, 6, 8], [1, 6, 9],\n  #    [2, 4, 7], [2, 4, 8], [2, 4, 9], [2, 5, 7], [2, 5, 8], [2, 5, 9],\n  #    [2, 6, 7], [2, 6, 8], [2, 6, 9],\n  #    [3, 4, 7], [3, 4, 8], [3, 4, 9], [3, 5, 7], [3, 5, 8], [3, 5, 9],\n  #    [3, 6, 7], [3, 6, 8], [3, 6, 9]]\n</code></pre>\n\n<p><strong>Use recursion</strong></p>\n\n<pre><code>def cartesian_product(arr)\n  first, *rest = arr\n  return first.map { |o| [o] } if rest.empty?\n  c = cartesian_product(rest)\n  first.flat_map { |o| c.map { |a| [o] + a } }\nend\n\ncartesian_product arr\n  #=&gt; same as above\n</code></pre>\n\n<p>In this application each element (array) of <code>arr</code> contains no duplicates. In other situations, where duplicates may be present (and where the products returned are not to contain duplicates), one should first compute</p>\n\n<pre><code>arr_without_dups = arr.map(&amp;:uniq)\n</code></pre>\n\n<p>and then calculate the combinations from <code>arr_without_dups</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 333, "user_id": 989851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b5e49b9d2fb83793aba1ed3902a7fa?s=128&d=identicon&r=PG", "display_name": "Brian Dear", "link": "https://stackoverflow.com/users/989851/brian-dear"}, "is_accepted": false, "score": 1, "last_activity_date": 1493896712, "last_edit_date": 1493896712, "creation_date": 1493896163, "answer_id": 43781214, "question_id": 43747373, "link": "https://stackoverflow.com/questions/43747373/given-an-array-of-size-y-containing-arrays-of-size-n-how-can-i-return-all-logi/43781214#43781214", "title": "Given an array of size y, containing arrays of size n, how can I return all logical combinations using Ruby?", "body": "<p>While the answers provided were great and J\u00f6rg's is the one I accepted, I wanted to share the answer that one of my friends provided me in case anyone else encounters this question. Essentially it's J\u00f6rg's answer but with a bit more depth.</p>\n\n<p><strong>Cartesian products</strong>\nWhat you are asking for is called the <a href=\"https://en.wikipedia.org/wiki/Cartesian_product\" rel=\"nofollow noreferrer\">Cartesian Product</a> and it's already built in with <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-product\" rel=\"nofollow noreferrer\">Array#product</a>.</p>\n\n<p>For example:</p>\n\n<pre><code>[0, 1].product([0, 1])\n# =&gt; [[0, 0], [0, 1], [1, 0], [1, 1]]\n</code></pre>\n\n<p>Notice that this gives us all possible 2-bit numbers, from 00-11</p>\n\n<p>You can give Array#product any number of arrays:</p>\n\n<pre><code>[0, 1].product([0, 1], [0, 1])\n# =&gt; [[0, 0, 0], [0, 0, 1], [0, 1, 0], [0, 1, 1], [1, 0, 0], [1, 0, 1], [1, 1, 0], [1, 1, 1]]\n</code></pre>\n\n<p>Notice that this gives us all the possible 3-bit numbers, from 000-111.</p>\n\n<p><strong>Your problem</strong>\nLooking at your exact problem:</p>\n\n<pre><code>[\"A\", \"no A\"].product([\"B\", \"no B\"], [\"C\", \"no C\"], [\"D\", \"no D\"])\n=&gt; [[\"A\", \"B\", \"C\", \"D\"],\n [\"A\", \"B\", \"C\", \"no D\"],\n [\"A\", \"B\", \"no C\", \"D\"],\n [\"A\", \"B\", \"no C\", \"no D\"],\n [\"A\", \"no B\", \"C\", \"D\"],\n [\"A\", \"no B\", \"C\", \"no D\"],\n [\"A\", \"no B\", \"no C\", \"D\"],\n [\"A\", \"no B\", \"no C\", \"no D\"],\n [\"no A\", \"B\", \"C\", \"D\"],\n [\"no A\", \"B\", \"C\", \"no D\"],\n [\"no A\", \"B\", \"no C\", \"D\"],\n [\"no A\", \"B\", \"no C\", \"no D\"],\n [\"no A\", \"no B\", \"C\", \"D\"],\n [\"no A\", \"no B\", \"C\", \"no D\"],\n [\"no A\", \"no B\", \"no C\", \"D\"],\n [\"no A\", \"no B\", \"no C\", \"no D\"]]\ngives you all the possible combinations from \"ABCD\" to \"noA noB noC noD\"\n</code></pre>\n\n<p><strong>Generic solution</strong>\nWe can make this work with any generic array of arrays by leveraging the splat * operator.</p>\n\n<pre><code>def combinations(arrays)\n  first, *rest = arrays\n  first.product(*rest)\nend\n</code></pre>\n\n<p>Then we can say:</p>\n\n<pre><code>arrays_to_combine = [[\"A\", \"no A\"], [\"B\", \"no B\"], [\"C\", \"no C\"], [\"D\", \"no D\"]]\ncombinations(arrays_to_combine)\n=&gt; [[\"A\", \"B\", \"C\", \"D\"],\n [\"A\", \"B\", \"C\", \"no D\"],\n [\"A\", \"B\", \"no C\", \"D\"],\n [\"A\", \"B\", \"no C\", \"no D\"],\n [\"A\", \"no B\", \"C\", \"D\"],\n [\"A\", \"no B\", \"C\", \"no D\"],\n [\"A\", \"no B\", \"no C\", \"D\"],\n [\"A\", \"no B\", \"no C\", \"no D\"],\n [\"no A\", \"B\", \"C\", \"D\"],\n [\"no A\", \"B\", \"C\", \"no D\"],\n [\"no A\", \"B\", \"no C\", \"D\"],\n [\"no A\", \"B\", \"no C\", \"no D\"],\n [\"no A\", \"no B\", \"C\", \"D\"],\n [\"no A\", \"no B\", \"C\", \"no D\"],\n [\"no A\", \"no B\", \"no C\", \"D\"],\n [\"no A\", \"no B\", \"no C\", \"no D\"]]\n</code></pre>\n\n<p>Special thanks to Joel Quenneville of <a href=\"https://upcase.com\" rel=\"nofollow noreferrer\">Thoughtbot</a> for helping me with this as well as the rest of the people who provided answers.</p>\n"}], "owner": {"reputation": 333, "user_id": 989851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b5e49b9d2fb83793aba1ed3902a7fa?s=128&d=identicon&r=PG", "display_name": "Brian Dear", "link": "https://stackoverflow.com/users/989851/brian-dear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 2, "accepted_answer_id": 43748139, "answer_count": 3, "score": 6, "last_activity_date": 1493896712, "creation_date": 1493759767, "question_id": 43747373, "link": "https://stackoverflow.com/questions/43747373/given-an-array-of-size-y-containing-arrays-of-size-n-how-can-i-return-all-logi", "title": "Given an array of size y, containing arrays of size n, how can I return all logical combinations using Ruby?", "body": "<p>What I want to do is deal with <em>n</em> sets, while the code I provide below works with exactly 4 sets.</p>\n\n<pre><code>def show_combinations\n  @combos = []\n  ['A', 'no A'].each do |a|\n    ['B', 'no B'].each do |b|\n      ['C', 'no C'].each do |c|\n        ['D', 'no D'].each do |d|\n          @combos &lt;&lt; [a, b, c, d]\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>How can I refactor this following code to deal with the following scenario:\nGiven I have an array of size y containing arrays of size n, I want to return all the combinations.</strong> It's important to note that only one item in each of the sub arrays can be in the results. (Such as \"Completed Profile\" can't also be in the results with \"Not completed profile\") </p>\n\n<p>Background:</p>\n\n<p>A user might have some tasks: for example, \"Complete Profile\" or \"Set Up Email\" or whatever. Those tasks can be represented like this:</p>\n\n<pre><code>@task_states = [[\"Completed Profile, NOT Completed Profile\"], [\"Set up Email\", \"NOT set up Email\"]]\n</code></pre>\n\n<p>Then, passing @task_states into the method, the results should be this:</p>\n\n<pre><code>[\n[\"Completed Profile\", \"Set up Email\"],\n[\"Completed Profile\", \"NOT set up Email\"],\n[\"NOT Completed Profile\", \"Set up Email\"],\n[\"NOT Completed Profile\", \"NOT Set up Email\"]\n]\n</code></pre>\n\n<p>So an array of arrays representing all the combinations. Obviously \"Completed Profile\" can't also be in the same array as \"NOT Completed Profile,\" etc.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "git"], "comments": [{"owner": {"reputation": 9996, "user_id": 52070, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04d8ea8891106e00c746d31da92351c8?s=128&d=identicon&r=PG", "display_name": "David Newcomb", "link": "https://stackoverflow.com/users/52070/david-newcomb"}, "edited": false, "score": 0, "creation_date": 1497038860, "post_id": 43747038, "comment_id": 75928672, "body": "Is that swiggle under the first <code>exit</code> supposed to be there? Sorry don&#39;t know much about Ruby either!"}], "answers": [{"tags": [], "owner": {"reputation": 9996, "user_id": 52070, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/04d8ea8891106e00c746d31da92351c8?s=128&d=identicon&r=PG", "display_name": "David Newcomb", "link": "https://stackoverflow.com/users/52070/david-newcomb"}, "is_accepted": false, "score": 0, "last_activity_date": 1497039156, "creation_date": 1497039156, "answer_id": 44466007, "question_id": 43747038, "link": "https://stackoverflow.com/questions/43747038/git-post-receive-multiple-branch-deployment/44466007#44466007", "title": "GIT post-receive multiple branch deployment", "body": "<p>If you don't mind shell script instead of Ruby then these people have solved the same problem.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19269426/git-post-receive-hook-to-checkout-each-branch-to-different-folders\">Git post-receive hook to checkout each branch to different folders?</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2705686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37e9b871e145931f3f0fa450fad5a9f6?s=128&d=identicon&r=PG", "display_name": "grok", "link": "https://stackoverflow.com/users/2705686/grok"}, "is_accepted": false, "score": 0, "last_activity_date": 1518716214, "creation_date": 1518716214, "answer_id": 48813184, "question_id": 43747038, "link": "https://stackoverflow.com/questions/43747038/git-post-receive-multiple-branch-deployment/48813184#48813184", "title": "GIT post-receive multiple branch deployment", "body": "<p>Perhaps a little late to the party on this, however maybe it will help others that are trying to find a solution in Ruby. Here is a working example (modified from <a href=\"http://krisjordan.com/essays/setting-up-push-to-deploy-with-git\" rel=\"nofollow noreferrer\">this source</a> which got me sorted):</p>\n\n<pre><code>#!/usr/bin/env ruby\n# post-receive\n\n# 1. Read STDIN (Format: \"from_commit to_commit branch_name\")\nfrom, to, branch = ARGF.read.split \" \"\n\n# 2. Only deploy if staging or master branch was pushed\nif (branch =~ /staging$/) == nil &amp;&amp; (branch =~ /master$/) == nil\n    puts \"Received branch #{branch}, not deploying.\"\n    exit\nend\n\n# 3. Copy files to deploy directory(Path to deploy is relative to the git bare repo: e.g. website-root/repos)\nif (branch =~ /staging$/)\n    deploy_to_dir = File.expand_path('../path-to-staging-deploy.com')\n    `GIT_WORK_TREE=\"#{deploy_to_dir}\" git checkout -f staging`\n    puts \"DEPLOY: staging(#{to}) copied to '#{deploy_to_dir}'\"\n\nelsif (branch =~ /master$/)\n    deploy_to_dir = File.expand_path('../path-to-master-deploy.com')\n        `GIT_WORK_TREE=\"#{deploy_to_dir}\" git checkout -f master`\n        puts \"DEPLOY: master(#{to}) copied to '#{deploy_to_dir}'\"\nelse\n    puts \"Received branch #{branch}, not deploying.\"\n    exit\nend\n</code></pre>\n\n<p>I'm new to Ruby so there is probably a better way to write this, but it is working as expected - as far as I can see. </p>\n"}], "owner": {"reputation": 13, "user_id": 5569702, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153660110808467/picture?type=large", "display_name": "Philip Batten", "link": "https://stackoverflow.com/users/5569702/philip-batten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518716214, "creation_date": 1493758391, "question_id": 43747038, "link": "https://stackoverflow.com/questions/43747038/git-post-receive-multiple-branch-deployment", "title": "GIT post-receive multiple branch deployment", "body": "<p>I have a development and production folder on the same server and 1 repo behind them to push to both folders depending on the branch that is pushed. I would like the development folder to be deployed to when develop is pushed to the repo and the production folder when master is pushed. I have an edited ruby post-receive file I found on a different site but I am new to ruby and can't seem to figure out why it isn't pushing to either folder.</p>\n\n<pre><code>#!/usr/bin/env ruby\n# post-receive\n\nfrom, to, branch = ARGF.read.split \" \"\n\nif (branch =~ /^master/)\n\n    puts \"Received branch #{branch}, deploying to production.\"\n\n    deploy_to_dir = File.expand_path('/var/www/html/production')\n    `GIT_WORK_TREE=\"#{deploy_to_dir}\" git checkout -f master`\n    puts \"DEPLOY: master(#{to}) copied to '#{deploy_to_dir}'\"\n\n    exit\n    \u2202\nelsif (branch =~ /^develop/)\n\n    puts \"Received branch #{branch}, deploying to development.\"\n\n    deploy_to_dir = File.expand_path('/var/www/html/development')\n    `GIT_WORK_TREE=\"#{deploy_to_dir}\" git checkout -f develop`\n    puts \"DEPLOY: develop(#{to}) copied to '#{deploy_to_dir}'\"\n\n    exit\n\nend\n</code></pre>\n\n<p>Any help on this post-receive or a replacement would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cloud9-ide", "cloud9"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1493758040, "post_id": 43746880, "comment_id": 74536952, "body": "You aren&#39;t doing anything wrong, <code>rails generate scaffold sale</code> only generates the model etc. for sale. Specifying <code>item_id:integer</code> includes the <code>item_id</code> field on the <code>sales</code> table so you can use an association, but the <code>Item</code> and <code>Employee</code> models must be created separately."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493759014, "post_id": 43746880, "comment_id": 74537466, "body": "If you refer to a previous question you need to provide a link. But your question should be stand-alone because SO questions are not threads, they are articles. Your expertise or experience isn&#39;t important to us, and mentioning it is merely distracting. Read &quot;<a href=\"http://catb.org/esr/faqs/smart-questions.html\" rel=\"nofollow noreferrer\">How To Ask Questions The Smart Way</a>&quot; and Jon Skeet&#39;s &quot;<a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">Writing the perfect question</a>&quot; to learn what we need."}], "answers": [{"tags": [], "owner": {"reputation": 18774, "user_id": 1763929, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jLvbN.jpg?s=128&g=1", "display_name": "Vucko", "link": "https://stackoverflow.com/users/1763929/vucko"}, "is_accepted": false, "score": 0, "last_activity_date": 1493758401, "last_edit_date": 1495541404, "creation_date": 1493758059, "answer_id": 43746960, "question_id": 43746880, "link": "https://stackoverflow.com/questions/43746880/how-to-generate-scaffold-files-using-rails-generate-on-cloud9/43746960#43746960", "title": "How to generate scaffold files using Rail&#39;s generate on Cloud9", "body": "<pre><code>rails generate scaffold Sale item_id:integer employee_id:integer\n</code></pre>\n\n<p>Only creates the stuff that belongs to the <code>Sale</code>. So, in your case with this command you created a <code>Sale.rb</code> model that has two attributes - <code>item_id</code> and <code>employee_id</code> (<code>scaffold</code> creates also it's assets, controller, routes and tests).</p>\n\n<p>If you need to create also <code>Employee</code> and <code>Item</code> models, you'll need to create them separately.</p>\n\n<pre><code>&gt; rails g model Employee\n&gt; rails g model Item\n</code></pre>\n\n<p>Read also the <a href=\"https://stackoverflow.com/questions/17734378/difference-between-scaffold-and-model-in-rails\">difference between scaffold and model in Rails</a> and the <a href=\"http://guides.rubyonrails.org/command_line.html#rails-generate\" rel=\"nofollow noreferrer\">documentation about the generate command</a>.</p>\n"}], "owner": {"reputation": 17, "user_id": 7376193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/75c8ce82abb3d5d80ed8b1a502e47468?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7376193/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493759147, "creation_date": 1493757692, "last_edit_date": 1493759147, "question_id": 43746880, "link": "https://stackoverflow.com/questions/43746880/how-to-generate-scaffold-files-using-rails-generate-on-cloud9", "title": "How to generate scaffold files using Rail&#39;s generate on Cloud9", "body": "<p>I am creating a site that will sell phones and I have tables and products all set up. </p>\n\n<p>When I run:</p>\n\n<pre><code>rails generate Scaffold Sale item_id:integer employee_id:integer\n</code></pre>\n\n<p>I get a Ruby file called 'Sale' and 'Part.rb' in my app/models. I am not getting the two Ruby files I need, which are 'Emlployee.rb' and 'Item.rb'.</p>\n\n<p>I need these  files in order to keep track of which employee sold which phone. When I navigate to my site /sales there is a table but when I navigate to /employees to add a new employee Cloud0 tells me path is unspecified. </p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "serialization", "ruby-on-rails-5", "data-mining"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1493758335, "post_id": 43746484, "comment_id": 74537105, "body": "Normally for dumping and restoring I would recommend <a href=\"https://ruby-doc.org/core-2.2.2/Marshal.html\" rel=\"nofollow noreferrer\"><code>Marshal</code></a> just make sure to pay attention to the <i>&quot;Security Concerns&quot;</i> section. <code>::dump</code> will return a <code>String</code> nice for storing in the database"}, {"owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1493758731, "post_id": 43746484, "comment_id": 74537319, "body": "@engineersmnky I&#39;ve tried to use <code>Marshal</code> but it gives me the <code>*** TypeError Exception: no _dump_data is defined for class NMatrix</code> error which from its look I don&#39;t think this is fixable."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1493759087, "post_id": 43746484, "comment_id": 74537496, "body": "while it is fixable it would definitely be difficult and possibly fragile. Sorry I couldn&#39;t be more help"}], "answers": [{"tags": [], "owner": {"reputation": 70442, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "is_accepted": false, "score": 0, "last_activity_date": 1493759957, "creation_date": 1493759957, "answer_id": 43747420, "question_id": 43746484, "link": "https://stackoverflow.com/questions/43746484/yamlload-typeerror-exception-wrong-argument-type-nmatrix-expected-data/43747420#43747420", "title": "YAML::load() *** TypeError Exception: wrong argument type NMatrix (expected Data)", "body": "<p>Serialization needs cooperation of the objects.</p>\n\n<p>NMatrix does not appear to support serialization.</p>\n"}], "owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493759957, "creation_date": 1493756087, "question_id": 43746484, "link": "https://stackoverflow.com/questions/43746484/yamlload-typeerror-exception-wrong-argument-type-nmatrix-expected-data", "title": "YAML::load() *** TypeError Exception: wrong argument type NMatrix (expected Data)", "body": "<p>As I issued <a href=\"https://github.com/gbuesing/kmeans-clusterer/issues/2\" rel=\"nofollow noreferrer\">here</a>, I am trying to store/restore an object into/from the database, I have the following snap:</p>\n\n<pre><code>kmeans = KMeansClusterer.run(k, colours, runs: AppConfig.fabric.colours.cluster.runs)\n\nkmeans.predict [[1, 2, 3]]     # &lt;- works fine \n\n(YAML::load(YAML::dump(kmeans))).predict [[1, 2, 3]] # &lt;- ERROR\n</code></pre>\n\n<p>When I am trying to dump/load the object with YAML, I get the following error</p>\n\n<blockquote>\n  <p><strong>ERROR:</strong> <em>*** TypeError Exception: wrong argument type NMatrix (expected Data)</em></p>\n</blockquote>\n\n<p><strong>Question:</strong> How can I store/restore the <code>kmeans</code> object without any trouble?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "answers": [{"tags": [], "owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "is_accepted": true, "score": 1, "last_activity_date": 1493756784, "creation_date": 1493756784, "answer_id": 43746663, "question_id": 43746466, "link": "https://stackoverflow.com/questions/43746466/paperclip-rails-gem-not-giving-proper-url/43746663#43746663", "title": "Paperclip Rails Gem Not giving proper URL", "body": "<p>Your configuration should include the <code>s3_protocol</code> option, mentioned in the <a href=\"http://www.rubydoc.info/github/thoughtbot/paperclip/master/Paperclip/Storage/S3#s3_protocol-instance_method\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<pre><code>config.paperclip_defaults = {\n  url: \":s3_domain_url\",\n  path: \"/:class/:attachment/:id_partition/:style/:filename\",\n  storage: :s3,\n  s3_protocol: 'http',\n  s3_credentials: {\n    bucket: ENV.fetch('S3_BUCKET_NAME'),\n    access_key_id: ENV.fetch('AWS_ACCESS_KEY_ID'),\n    secret_access_key: ENV.fetch('AWS_SECRET_ACCESS_KEY'),\n    s3_region: ENV.fetch('AWS_REGION'),\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 274, "user_id": 4096282, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/65cfe8a3cacf01503600da57004f9f86?s=128&d=identicon&r=PG&f=1", "display_name": "Kai Mou", "link": "https://stackoverflow.com/users/4096282/kai-mou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 43746663, "answer_count": 1, "score": 0, "last_activity_date": 1493756784, "creation_date": 1493756007, "question_id": 43746466, "link": "https://stackoverflow.com/questions/43746466/paperclip-rails-gem-not-giving-proper-url", "title": "Paperclip Rails Gem Not giving proper URL", "body": "<p>I setup paperclip to work with my PDF attachments. Currently, when I go to the console and I search Model.certificate.url, I get a URL as such:</p>\n\n<pre><code>//bucketname-staging.s3.amazonaws.com/policies/certificates/000/001/163/original/certificate_bc4525d9-8d41-4635-8f26-ba24b0b69037.pdf?1493755437\n</code></pre>\n\n<p>However, I am not able to access this link as there is no HTTP/HTTPS beginning associated with this. If I use Model.certificate.expiring_url, I get the full link with HTTP/HTTPs.</p>\n\n<p>Why is this?</p>\n\n<p>Here are my options in <code>production.rb</code></p>\n\n<pre><code>config.paperclip_defaults = {\n    url: \":s3_domain_url\",\n    path: \"/:class/:attachment/:id_partition/:style/:filename\",\n    storage: :s3,\n    s3_credentials: {\n      bucket: ENV.fetch('S3_BUCKET_NAME'),\n      access_key_id: ENV.fetch('AWS_ACCESS_KEY_ID'),\n      secret_access_key: ENV.fetch('AWS_SECRET_ACCESS_KEY'),\n      s3_region: ENV.fetch('AWS_REGION'),\n    }\n  }\n</code></pre>\n"}, {"tags": ["ruby", "join", "orm", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "is_accepted": true, "score": 4, "last_activity_date": 1493754048, "creation_date": 1493754048, "answer_id": 43745958, "question_id": 43745832, "link": "https://stackoverflow.com/questions/43745832/can-i-execute-a-join-from-a-sequel-model/43745958#43745958", "title": "Can I execute a join from a sequel Model?", "body": "<p>Since you've already defined your associations (<code>one_to_many</code>, <code>many_to_one</code>) you can refer to them by name.</p>\n\n<p>For example in  your <code>Customer</code> class, you can get at the city and neighborhood as:</p>\n\n<pre><code>def complete_address\n  \"#{city.name} - #{neighborhood.name}\"\nend\n</code></pre>\n\n<p>Sequel creates references based on your relation names, and you can refer to fields within these _to_one associations with dot notation.  </p>\n\n<p><a href=\"https://github.com/jeremyevans/sequel/blob/master/doc/association_basics.rdoc#methods-added\" rel=\"nofollow noreferrer\">https://github.com/jeremyevans/sequel/blob/master/doc/association_basics.rdoc#methods-added</a></p>\n"}], "owner": {"reputation": 456, "user_id": 3122311, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/679c944afa134ee19cbf571de55aae15?s=128&d=identicon&r=PG", "display_name": "Pedro Vin&#237;cius", "link": "https://stackoverflow.com/users/3122311/pedro-vin%c3%adcius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 43745958, "answer_count": 1, "score": 2, "last_activity_date": 1493754048, "creation_date": 1493753526, "question_id": 43745832, "link": "https://stackoverflow.com/questions/43745832/can-i-execute-a-join-from-a-sequel-model", "title": "Can I execute a join from a sequel Model?", "body": "<p>I'm using the Sequel library for a personal project, and I'm in trouble with joins specifically. I need to retrieve the complete address of a customer, that is composed of city + neighborhood. The address is broken between two tables/models, <code>Neighborhood</code> and <code>City</code>. </p>\n\n<p>Basically, I have the following models:</p>\n\n<ul>\n<li>Customer</li>\n<li>City</li>\n<li>Neighborhood</li>\n</ul>\n\n<p>My Customer model is like so:</p>\n\n<pre><code>class Customer &lt; Sequel::Model\n  many_to_one :city\n  many_to_one :neighborhood\n\n  def complete_address\n    city = join(:city).select(:city__name)\n    neighborhood = join(:neighborhood).select(:neighborhood__name)\n\n    \"#{city} - #{neighborhood}\"\n  end\nend\n\nclass City\n  one_to_many :customers\nend\n\nclass Neighborhood\n  one_to_many :customers\nend\n</code></pre>\n\n<p>The relations are working properly when joining like <code>Customer.join(:city)</code> and <code>Customer.join(:neighborhood)</code>. But the same joins aren't working into my model. </p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "session", "appium"], "answers": [{"comments": [{"owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "edited": false, "score": 0, "creation_date": 1493759821, "post_id": 43746899, "comment_id": 74537839, "body": "What about a command like <code>driver.execute_script &#39;mobile: tap&#39;, :x =&gt; 539, :y =&gt; 1464, :fingers =&gt; 1, :tapCount =&gt; 1, :duration =&gt; 0.5</code> ? I&#39;m also getting exceptions, as noted above in my updated post. The project is located here: <a href=\"https://github.com/santafebound/tindermation\" rel=\"nofollow noreferrer\">github.com/santafebound/tindermation</a>"}, {"owner": {"reputation": 56, "user_id": 4380586, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-euIbDGRD1bQ/AAAAAAAAAAI/AAAAAAAAAHU/ZOlLcfsmL0A/photo.jpg?sz=128", "display_name": "Neetesh Kumar Gupta", "link": "https://stackoverflow.com/users/4380586/neetesh-kumar-gupta"}, "reply_to_user": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "edited": false, "score": 0, "creation_date": 1493792805, "post_id": 43746899, "comment_id": 74547040, "body": "Are you trying to automate Web App or Native App?"}, {"owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "edited": false, "score": 0, "creation_date": 1493799147, "post_id": 43746899, "comment_id": 74550594, "body": "Native. There is no Tinder web app"}], "tags": [], "owner": {"reputation": 56, "user_id": 4380586, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-euIbDGRD1bQ/AAAAAAAAAAI/AAAAAAAAAHU/ZOlLcfsmL0A/photo.jpg?sz=128", "display_name": "Neetesh Kumar Gupta", "link": "https://stackoverflow.com/users/4380586/neetesh-kumar-gupta"}, "is_accepted": false, "score": 1, "last_activity_date": 1493757773, "creation_date": 1493757773, "answer_id": 43746899, "question_id": 43745671, "link": "https://stackoverflow.com/questions/43745671/ruby-appium-locator-strategy-name-is-not-supported-for-this-session/43746899#43746899", "title": "Ruby + Appium - Locator Strategy &#39;name&#39; is not supported for this session", "body": "<p>You can use <a href=\"https://github.com/appium/appium-dot-app\" rel=\"nofollow noreferrer\">\"Appium Inspector\"</a>, the inbuilt tool with Appium GUI app or the Android SDK tool <a href=\"https://www.tutorialspoint.com/android/android_ui_testing.htm\" rel=\"nofollow noreferrer\">\"uiautomatorviewer\"</a> to find the different attributes of UI components of the app.</p>\n"}, {"comments": [{"owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "edited": false, "score": 0, "creation_date": 1493814942, "post_id": 43759625, "comment_id": 74561520, "body": "Yup, this works. Hard part is getting your APK to work so you can find the name. Alternatively <code>Appium::TouchAction.new.tap( x: 880, y:1129, count: 3).release.perform</code> performs a tap at the desired X,Y location."}, {"owner": {"reputation": 176, "user_id": 4902498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZOB.jpg?s=128&g=1", "display_name": "Kaushal Rupani", "link": "https://stackoverflow.com/users/4902498/kaushal-rupani"}, "reply_to_user": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "edited": false, "score": 0, "creation_date": 1494152374, "post_id": 43759625, "comment_id": 74697857, "body": "Glad it worked, tap on fixed location is always risky because every device will have different resolution and x,y coordinates will change according.  Better try to get dynamic coordinates, if possible, otherwise the dirty way is the only way. :)"}], "tags": [], "owner": {"reputation": 176, "user_id": 4902498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoZOB.jpg?s=128&g=1", "display_name": "Kaushal Rupani", "link": "https://stackoverflow.com/users/4902498/kaushal-rupani"}, "is_accepted": true, "score": 1, "last_activity_date": 1493813278, "creation_date": 1493813278, "answer_id": 43759625, "question_id": 43745671, "link": "https://stackoverflow.com/questions/43745671/ruby-appium-locator-strategy-name-is-not-supported-for-this-session/43759625#43759625", "title": "Ruby + Appium - Locator Strategy &#39;name&#39; is not supported for this session", "body": "<p>Currently you need to use either xpath or id.<br>\nAlternatively if you have name you can use xpath as<br>\n<code>//*[@name='yourName']</code> .     </p>\n\n<p><code>driver.find_element(xpath: \"//*[@name='yourName']\").click</code></p>\n\n<p>Hope it helps!!!</p>\n"}], "owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1101, "favorite_count": 0, "accepted_answer_id": 43759625, "answer_count": 2, "score": 0, "last_activity_date": 1493813278, "creation_date": 1493752922, "last_edit_date": 1493759388, "question_id": 43745671, "link": "https://stackoverflow.com/questions/43745671/ruby-appium-locator-strategy-name-is-not-supported-for-this-session", "title": "Ruby + Appium - Locator Strategy &#39;name&#39; is not supported for this session", "body": "<pre><code>C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/response.rb:69:in `assert_ok': Locator Strategy 'name' is not supported for this session (Selenium::WebDriver::Error::InvalidSelectorError)\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/response.rb:32:in `initialize'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/http/common.rb:83:in `new'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/http/common.rb:83:in `create_response'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/http/default.rb:107:in `request'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/http/common.rb:61:in `call'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/bridge.rb:678:in `raw_execute'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/bridge.rb:656:in `execute'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/bridge.rb:625:in `find_element_by'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/appium_lib-9.4.3/lib/appium_lib/device/device.rb:440:in `find_element'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/appium_lib-9.4.3/lib/appium_lib/driver.rb:739:in `find_element'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/appium_lib-9.4.3/lib/appium_lib/driver.rb:242:in `rescue in block (4 levels) in promote_appium_methods'\n        from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/appium_lib-9.4.3/lib/appium_lib/driver.rb:233:in `block (4 levels) in promote_appium_methods'\n        from tindermation.rb:46:in `like_button'\n        from tindermation.rb:75:in `&lt;main&gt;'\nLooking for girls to match...\n</code></pre>\n\n<p>Apparently <code>name</code> is deprecated in Appium? What is the alternative? Is there some setting in Android Developer Options that will return the xpath, id, class name, accessibility id, etc. for particular UI elements?</p>\n\n<p>Alternatively, I'm using Developer Options to click a UI element at a certain coordinate. For example:</p>\n\n<pre><code>def login_button\n  sleep 1\n  driver.execute_script 'mobile: tap', :x =&gt; 539, :y =&gt; 1464, :fingers =&gt; 1, :tapCount =&gt; 1, :duration =&gt; 0.5\n  sleep 1\n  driver.execute_script 'mobile: tap', :x =&gt; 871, :y =&gt; 1130, :fingers =&gt; 1, :tapCount =&gt; 1, :duration =&gt; 0.5\n  sleep 1\nend\n</code></pre>\n\n<p>But I get this exception:</p>\n\n<pre><code>C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/selenium-webdriver-3.4.0/lib/selenium/webdriver/remote/response.rb:69:in `assert_ok': Method has not yet been implemented (Selenium::WebDriver::Error::UnknownError)\n</code></pre>\n\n<p>Why can't I tap the login button?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 4631, "user_id": 256785, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd104d3cf9f4a8277e53f83bb8dbc2e1?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/256785/eugene"}, "edited": false, "score": 0, "creation_date": 1493758862, "post_id": 43746173, "comment_id": 74537389, "body": "@Eugene You didn&#39;t need to remove the code you had."}, {"owner": {"reputation": 4631, "user_id": 256785, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd104d3cf9f4a8277e53f83bb8dbc2e1?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/256785/eugene"}, "edited": false, "score": 0, "creation_date": 1493809590, "post_id": 43746173, "comment_id": 74557667, "body": "@coreward even with the original code back, the behavior is the same as it was originally"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 4631, "user_id": 256785, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd104d3cf9f4a8277e53f83bb8dbc2e1?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/256785/eugene"}, "edited": false, "score": 0, "creation_date": 1493833503, "post_id": 43746173, "comment_id": 74574841, "body": "@Eugene Hmm, bummer, but makes sense per your clarifications/edits."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 3, "last_activity_date": 1493754841, "creation_date": 1493754841, "answer_id": 43746173, "question_id": 43745669, "link": "https://stackoverflow.com/questions/43745669/rails-5-default-url-options-oddities/43746173#43746173", "title": "Rails 5 default_url_options oddities", "body": "<p>This should fix the issue in controller/request specs:</p>\n\n<pre><code>config.action_controller.default_url_options = {\n  host: ENV['HTTP_HOST'] || 'localhost'\n}\n</code></pre>\n\n<p>As for why this is occurring, there's some <a href=\"https://github.com/rspec/rspec-rails/issues/1275#issuecomment-69807351]\" rel=\"nofollow noreferrer\">more information available in this ongoing thread on Github</a>.</p>\n"}], "owner": {"reputation": 4631, "user_id": 256785, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd104d3cf9f4a8277e53f83bb8dbc2e1?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/256785/eugene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6828, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1493809865, "creation_date": 1493752915, "last_edit_date": 1493809865, "question_id": 43745669, "link": "https://stackoverflow.com/questions/43745669/rails-5-default-url-options-oddities", "title": "Rails 5 default_url_options oddities", "body": "<p>I have a pretty simple rails app that I'm working on upgrading from Rails 4 to Rails 5, but I'm noticing some weirdness with <code>default_url_options</code></p>\n\n<p>In <code>config/environments/test.rb</code> I have:</p>\n\n<pre><code>Rails.application.routes.default_url_options[:host]= ENV[\"HTTP_HOST\"] || \"localhost\"\nRails.application.routes.default_url_options[:port]= ENV[\"PORT\"] || 3000\n</code></pre>\n\n<p>My application has a namespace called <code>api</code>. In my request specs, I'm seeing this:</p>\n\n<pre><code>[1] pry&gt; api_v3_sample_url\n=&gt; \"http://www.example.com:3000/api/v3/sample\"\n[2] pry&gt; Rails.application.routes.url_helpers.api_v3_sample_url\n=&gt; \"http://localhost:3000/api/v3/sample\"\n</code></pre>\n\n<p>What am I missing that is causing those URLs to be different?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Per <a href=\"https://github.com/rspec/rspec-rails/issues/1275#issuecomment-69807351\" rel=\"noreferrer\">this thread</a> I set </p>\n\n<pre><code>config.action_controller.default_url_options = {\n  host: ENV['HTTP_HOST'] || 'localhost'\n}\n</code></pre>\n\n<p>in <code>config/environments/test.rb</code> but now I get this:</p>\n\n<pre><code>&gt; Rails.application.routes.url_helpers.api_v3_sample_url\nArgumentError: Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true\n&gt; api_v3_sample_url\n=&gt; \"http://www.example.com/api/v3/sample\"\n</code></pre>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Probably worth noting that these are request specs and not feature specs (not using capybara).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493751981, "post_id": 43745411, "comment_id": 74533792, "body": "Can you access it through irb console?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6538437"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493752140, "post_id": 43745411, "comment_id": 74533877, "body": "@Md.FarhanMemon yes i can!"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1493752296, "post_id": 43745411, "comment_id": 74533964, "body": "Where do you load your <code>.env</code> file? And will the devise initializer run after that?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6538437"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1493752439, "post_id": 43745411, "comment_id": 74534037, "body": "@spickermann in my <code>docker-compose.yml</code> file i load it using <code>env_file: .env</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1493759445, "post_id": 43745411, "comment_id": 74537678, "body": "I wonder if it has something to do with the <code>.env</code> file being ignored by git, so it isn&#39;t getting loaded by docker?"}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 1, "creation_date": 1493794067, "post_id": 43745411, "comment_id": 74547636, "body": "Are you using <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">github.com/bkeepers/dotenv</a> in your Gemfile :development group?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6538437"}, "edited": false, "score": 0, "creation_date": 1493907469, "post_id": 43752268, "comment_id": 74611247, "body": "I&#39;ve use this before but didn&#39;t want to add another gem to my Gemfile if it wasn&#39;t necessary but this ended up working for me"}], "tags": [], "owner": {"reputation": 16, "user_id": 5627758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc693053dec83df313c866bf848ea6b8?s=128&d=identicon&r=PG", "display_name": "Matt Elliott", "link": "https://stackoverflow.com/users/5627758/matt-elliott"}, "is_accepted": true, "score": 0, "last_activity_date": 1493859984, "last_edit_date": 1493859984, "creation_date": 1493791672, "answer_id": 43752268, "question_id": 43745411, "link": "https://stackoverflow.com/questions/43745411/cant-access-env-in-devise-initializer/43752268#43752268", "title": "Can&#39;t access ENV in Devise Initializer", "body": "<p>If you use <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">https://github.com/bkeepers/dotenv</a> in your Gemfile :development group it will load your env variables into the Rails app before_configuration callback.</p>\n\n<p>You can then use ENV['MY_VAR'] (or with fetch as you have above) in devise.rb</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6538437"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 43752268, "answer_count": 1, "score": 3, "last_activity_date": 1493859984, "creation_date": 1493751867, "question_id": 43745411, "link": "https://stackoverflow.com/questions/43745411/cant-access-env-in-devise-initializer", "title": "Can&#39;t access ENV in Devise Initializer", "body": "<p>Any reason I cant access an ENV variable in my devise.rb initializer. Heres the code inside the file:</p>\n\n<pre><code>  # Email regex used to validate email formats. It simply asserts that\n  # one (and only one) @ exists in the given string. This is mainly\n  # to give user feedback and not to assert the e-mail validity.\n  config.email_regexp = /@.*\\b#{ENV.fetch('EMAIL_DOMAIN')}/\n</code></pre>\n\n<p>The ENV 'EMAIL_DOMAIN' is in my .env file along with other variables that I can access without a problem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "circleci"], "owner": {"reputation": 20432, "user_id": 23323, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c919171cabf2ee333066deae271d80?s=128&d=identicon&r=PG", "display_name": "Zachary Wright", "link": "https://stackoverflow.com/users/23323/zachary-wright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493758167, "creation_date": 1493750161, "last_edit_date": 1493758167, "question_id": 43744944, "link": "https://stackoverflow.com/questions/43744944/how-to-run-feature-specs-only-on-master-branch-in-circleci", "title": "How to run feature specs only on master branch in CircleCI?", "body": "<p>I would like to setup my CircleCI builds to only run feature specs on builds of the master branch.</p>\n\n<p>Here is how I am attempting to accomplish this:</p>\n\n<pre><code>test:\n  override:\n    - case $CIRCLE_BRANCH in master) bundle exec rspec ;; *) bundle exec rspec --exclude-pattern \"spec/features/**/*_spec.rb\" ;; esac:\n        parallel: true\n</code></pre>\n\n<p>This does seem to work, but my specs run much slower than they do using CircleCI's built in 'rspec parallel' feature - defeating the purpose of removing feature specs from most builds.</p>\n\n<p>Is there a better way to achieve the same thing?</p>\n"}, {"tags": ["json", "ruby", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "is_accepted": true, "score": 1, "last_activity_date": 1493750389, "creation_date": 1493750389, "answer_id": 43745005, "question_id": 43744878, "link": "https://stackoverflow.com/questions/43744878/geminstallerror-the-json-native-gem-requires-installed-build-tools-please/43745005#43745005", "title": "Gem::InstallError: The &#39;json&#39; native gem requires installed build tools. Please update your PATH to include build tools or download the DevKit", "body": "<p>I didn't initialize and bind the ruby installations in my DevKit to my PATH:</p>\n\n<p>Downloaded it, ran it to extract it somewhere (permanent). Then cd to it, run <code>ruby dk.rb init</code> and <code>ruby dk.rb install</code>. The <code>bundle install</code> command worked after following these steps.</p>\n"}], "owner": {"reputation": 4681, "user_id": 4077513, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/oxQV6.png?s=128&g=1", "display_name": "Martin Erlic", "link": "https://stackoverflow.com/users/4077513/martin-erlic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 43745005, "answer_count": 1, "score": 0, "last_activity_date": 1493750389, "creation_date": 1493749911, "question_id": 43744878, "link": "https://stackoverflow.com/questions/43744878/geminstallerror-the-json-native-gem-requires-installed-build-tools-please", "title": "Gem::InstallError: The &#39;json&#39; native gem requires installed build tools. Please update your PATH to include build tools or download the DevKit", "body": "<p>I'm having trouble building a Ruby project on Windows 7 Enterprise SP1.</p>\n\n<pre><code>Fetching gem metadata from https://rubygems.org/............\nFetching version metadata from https://rubygems.org/..\nResolving dependencies...\nUsing awesome_print 1.7.0\nInstalling json 2.1.0 with native extensions\nUsing mini_portile2 2.1.0\nUsing ffi 1.9.18 (x64-mingw32)\nUsing rubyzip 1.2.1\nUsing websocket 1.2.4\nUsing tomlrb 1.2.4\nUsing bundler 1.14.6\nGem::InstallError: The 'json' native gem requires installed build tools.\n\nPlease update your PATH to include build tools or download the DevKit\nfrom 'http://rubyinstaller.org/downloads' and follow the instructions\nat 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'\n\nAn error occurred while installing json (2.1.0), and Bundler cannot continue.\nMake sure that `gem install json -v '2.1.0'` succeeds before bundling.\n</code></pre>\n\n<p>I've included both Ruby and the DevKit in my PATH environment variable, i.e. <code>C:\\Ruby22-x64\\bin;C:\\Ruby-DevKit\\bin</code>. What could be going wrong?</p>\n\n<p>The command I'm running is <code>bundle install</code> in the <code>..\\tindermation\\node_modules\\.bin</code> directory of this project: <a href=\"https://github.com/feelobot/tindermation\" rel=\"nofollow noreferrer\">https://github.com/feelobot/tindermation</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1493753932, "post_id": 43744846, "comment_id": 74534769, "body": "Did you try assigning the <code>temp_fie</code> object directly to the <code>file</code> option?"}], "answers": [{"tags": [], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "is_accepted": true, "score": 1, "last_activity_date": 1493895263, "creation_date": 1493895263, "answer_id": 43780898, "question_id": 43744846, "link": "https://stackoverflow.com/questions/43744846/upload-a-tempfile-to-carrierwave-in-rails/43780898#43780898", "title": "Upload a Tempfile to Carrierwave in Rails", "body": "<p>My mistake was that I tried to assign a .csv extension within the filename parameter of the Tempfile object. Instead I needed to pass an array like this:</p>\n\n<pre><code>def form_to_csv\n  temp_file = Tempfile.new(['test_temp', '.csv'], encoding: 'utf-8')\n\n  begin\n    self.input_data.split('\\n').each do |line|\n      temp_file.write line\n    end\n\n    temp_file.rewind\n\n    self.build_input_data_file(file: Rails.root.join(temp_file.path).open)\n  ensure\n    temp_file.close\n    temp_file.unlink\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1602, "favorite_count": 0, "accepted_answer_id": 43780898, "answer_count": 1, "score": 0, "last_activity_date": 1493895263, "creation_date": 1493749790, "question_id": 43744846, "link": "https://stackoverflow.com/questions/43744846/upload-a-tempfile-to-carrierwave-in-rails", "title": "Upload a Tempfile to Carrierwave in Rails", "body": "<p>I am trying to create a Tempfile using some user-inputted information in one of my models:</p>\n\n<pre><code>after_create :form_to_csv\n\ndef form_to_csv\n  temp_file = Tempfile.new('test_temp.csv', encoding: 'utf-8')\n\n  begin\n    self.input_data.split('\\n').each do |line|\n      temp_file.write line\n    end\n\n    temp_file.rewind\n    self.build_input_data_file(file: Rails.root.join(\"temp_file.path}\").open)\n  ensure\n    temp_file.close\n    temp_file.unlink\n  end\nend\n</code></pre>\n\n<p>The form data is stored in the <code>input_data</code> field as text. I get to write my data to the Tempfile successfully but attaching it to the model is cumbersome - I keep trying to attach <code>nil</code> to my model. My main problem is that the file I generate has a path like:</p>\n\n<pre><code>/var/folders/jw/7pjlw_212qd3s4ddfj1zvnpr0000gn/T/test_temp.csv20170502-78762-1eh23ml\n</code></pre>\n\n<p>and it won't work with Rails.root.join and with the attachment method propose in CarrierWave docs <a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-%22Upload%22-from-a-local-file\" rel=\"nofollow noreferrer\">here</a> (Upload from a local file). </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493749742, "post_id": 43744747, "comment_id": 74532489, "body": "<code>puts self.first</code> or <code>puts self[0]</code>."}, {"owner": {"reputation": 210, "user_id": 4513858, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/98d5a391cf87ba43b27c16018b935258?s=128&d=identicon&r=PG&f=1", "display_name": "localplutonium", "link": "https://stackoverflow.com/users/4513858/localplutonium"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493749799, "post_id": 43744747, "comment_id": 74532520, "body": "@CarySwoveland printing the first element is just an example. im not interested in a solution to that method. so if i want to refer to the array indexes i would use self?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1493750033, "post_id": 43744747, "comment_id": 74532634, "body": "the array is <code>self</code>. The value of the array at offset <code>i</code> is <code>self[i]</code>. To change the value of the array at offset <code>i</code>: <code>self[i] = 4</code>. To add <code>5</code> to the array <code>self &lt;&lt; 5</code>. <code>self.delete_at(i)</code> to remove the element at offset <code>i</code>. Is that what you are asking?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1493755683, "post_id": 43744747, "comment_id": 74535721, "body": "@CarySwoveland you are kinder than I with your cliff note Docs. OP <code>ruby</code> is by far one of the clearest and most extensively documented languages I have ever used. If you want to know something start with the documentation <a href=\"https://ruby-doc.org/core-2.2.4/Array.html\" rel=\"nofollow noreferrer\">Array</a> for example."}, {"owner": {"reputation": 210, "user_id": 4513858, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/98d5a391cf87ba43b27c16018b935258?s=128&d=identicon&r=PG&f=1", "display_name": "localplutonium", "link": "https://stackoverflow.com/users/4513858/localplutonium"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1493781932, "post_id": 43744747, "comment_id": 74543430, "body": "@engineersmnky i use this ruby doc webpage all the time .. if you are telling me that i can find the class implementation details of Array on that page then i would love for you to show me otherwise i dont see where i would find this type of information."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1493811748, "post_id": 43744747, "comment_id": 74559165, "body": "First of all you are not in the class scope you are in an instance scope. Secondly the documents clearly tell you how to reference the index. Maybe take a look at <code>each_index</code>"}], "answers": [{"comments": [{"owner": {"reputation": 210, "user_id": 4513858, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/98d5a391cf87ba43b27c16018b935258?s=128&d=identicon&r=PG&f=1", "display_name": "localplutonium", "link": "https://stackoverflow.com/users/4513858/localplutonium"}, "edited": false, "score": 0, "creation_date": 1493782029, "post_id": 43748406, "comment_id": 74543469, "body": "again im not interested in printing the first element, is it really that hard for the readers of the post to understand that ???????? im interested in REFERENCING THE ARRAY INDEXES ."}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "reply_to_user": {"reputation": 210, "user_id": 4513858, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/98d5a391cf87ba43b27c16018b935258?s=128&d=identicon&r=PG&f=1", "display_name": "localplutonium", "link": "https://stackoverflow.com/users/4513858/localplutonium"}, "edited": false, "score": 0, "creation_date": 1493933460, "post_id": 43748406, "comment_id": 74626906, "body": "It was indeed difficult to understand what you meant, as multiple people have misunderstood both your question and your example. After seeing the solution you were looking for, I&#39;ll edit your posted question to better match your actual question."}], "tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": false, "score": 0, "last_activity_date": 1493765209, "creation_date": 1493765209, "answer_id": 43748406, "question_id": 43744747, "link": "https://stackoverflow.com/questions/43744747/how-do-i-get-an-elements-index-in-an-array-while-iterating/43748406#43748406", "title": "How do I get an element&#39;s index in an Array while iterating?", "body": "<pre><code>class Array\n  def print_first\n    puts first # same as `self.first`, or `self[0]`\n  end\nend\n\n[1, 2, 3, 4].print_first # prints 1\n</code></pre>\n\n<p>If you're inside the scope of a class, defining an instance method, method calls will first resolve against <code>self</code>, which makes the <code>self.</code> optional in this case.</p>\n"}, {"comments": [{"owner": {"reputation": 210, "user_id": 4513858, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/98d5a391cf87ba43b27c16018b935258?s=128&d=identicon&r=PG&f=1", "display_name": "localplutonium", "link": "https://stackoverflow.com/users/4513858/localplutonium"}, "edited": false, "score": 0, "creation_date": 1493851297, "post_id": 43767288, "comment_id": 74583652, "body": "thanks this is the solution im looking for. i also figured it out outside of stackoverflow"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 1, "last_activity_date": 1493835276, "creation_date": 1493835276, "answer_id": 43767288, "question_id": 43744747, "link": "https://stackoverflow.com/questions/43744747/how-do-i-get-an-elements-index-in-an-array-while-iterating/43767288#43767288", "title": "How do I get an element&#39;s index in an Array while iterating?", "body": "<p>You can use <code>self.&lt;any-array-method&gt;</code> and one such method is <code>size</code> using which you can create a range to iterate over each array elements.</p>\n\n<pre><code>class Array\n  def do_something\n    (0...self.size).each do |index|\n        puts \"Index #{index} value is #{self.at(index)}\"\n    end\n  end\nend\n\n[1, 2, 3, 4].do_something\n</code></pre>\n\n<p>Or, you could use Ruby's <code>Enumerable#each_with_index</code> too as shown below:</p>\n\n<pre><code>class Array\n  def do_something\n    self.each_with_index do |index, value|\n        puts \"Index #{index} value is #{value}\"\n    end\n  end\nend\n\n[1, 2, 3, 4].do_something\n</code></pre>\n"}], "owner": {"reputation": 210, "user_id": 4513858, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/98d5a391cf87ba43b27c16018b935258?s=128&d=identicon&r=PG&f=1", "display_name": "localplutonium", "link": "https://stackoverflow.com/users/4513858/localplutonium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493938570, "creation_date": 1493749475, "last_edit_date": 1493938570, "question_id": 43744747, "link": "https://stackoverflow.com/questions/43744747/how-do-i-get-an-elements-index-in-an-array-while-iterating", "title": "How do I get an element&#39;s index in an Array while iterating?", "body": "<p>I want to add a method to the ruby class Array. Is it possible to reference the array and its indexes while iterating?</p>\n\n<p>For example, I want to create a method to print elements of array along with their indexes.</p>\n\n<pre><code>array = [:a, :b, :c]\n\narray.print_elements_with_indexes\n# =&gt; a 1, b 2, c 3\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "knife"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1493756620, "creation_date": 1493756620, "answer_id": 43746612, "question_id": 43744427, "link": "https://stackoverflow.com/questions/43744427/how-to-find-secondary-ip-addresses-from-a-knife-search/43746612#43746612", "title": "How to find secondary IP addresses from a knife search", "body": "<p><code>knife search</code> and <code>knife node show</code> display the full object data and are not intended for scripting. We offer <code>knife exec</code> for simple Ruby scripts or libraries like <code>chef-api</code> or <code>PyChef</code> for more complex things.</p>\n"}], "owner": {"reputation": 381, "user_id": 3354434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfa24c2c7cb93ffa7adea8f781f904fc?s=128&d=identicon&r=PG&f=1", "display_name": "pkill", "link": "https://stackoverflow.com/users/3354434/pkill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 1, "accepted_answer_id": 43746612, "answer_count": 1, "score": 1, "last_activity_date": 1493756620, "creation_date": 1493748235, "question_id": 43744427, "link": "https://stackoverflow.com/questions/43744427/how-to-find-secondary-ip-addresses-from-a-knife-search", "title": "How to find secondary IP addresses from a knife search", "body": "<p>I was going through chef, and when this part came where search queries can be put inside the recipe files, I am facing a problem when I try to fetch the secondary IP addresses of a node.\nWhen I try to get the primary IP address, I can get is as </p>\n\n<pre><code>&gt;&gt; knife node show web1 -a ipaddress\nweb1:\n  ipaddress: 10.0.2.15\n</code></pre>\n\n<p>But when I try to fetch the secondary IP address, I could see that the key itself is the secondary IP.</p>\n\n<pre><code>&gt;&gt; knife node show web1 -a network.interfaces.eth0.addresses\nweb1:\n  network.interfaces.eth0.addresses:\n    08:00:27:6E:B1:DB:\n      family: lladdr\n    192.168.10.43:\n      broadcast: 192.168.10.255\n      family:    inet\n      netmask:   255.255.255.0\n      prefixlen: 24\n      scope:     Global\n    fe80::a00:27ff:fe6e:b1db:\n      family:    inet6\n      prefixlen: 64\n      scope:     Link\n      tags:\n</code></pre>\n\n<p>How can I extract the secondary IP field directly in this case, which comes as <code>192.168.10.43</code> ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "delayed-job", "attr-accessor"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 1774593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GyxZP.jpg?s=128&g=1", "display_name": "SkunkDog", "link": "https://stackoverflow.com/users/1774593/skunkdog"}, "edited": false, "score": 0, "creation_date": 1493847994, "post_id": 43744465, "comment_id": 74582477, "body": "Hmm, it&#39;s a very long query against the api and the data needs to be as recent as possible. I don&#39;t know if preloading/eagerloading or caching might be applicable."}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 1, "last_activity_date": 1493748386, "creation_date": 1493748386, "answer_id": 43744465, "question_id": 43743994, "link": "https://stackoverflow.com/questions/43743994/saving-variables-to-table-from-service-in-rails-attr-accessor-issue/43744465#43744465", "title": "Saving variables to table from service in Rails- attr_accessor issue?", "body": "<p>Delayed job comes in handy when you want to run task asynchronously. When you write <code>t.delay.run_tool_report</code> it creates an entry in the <code>delayed_jobs</code> model to be run in the background. This object is returned to you in the <code>@tool.all_data</code>. If you want the result of the <code>run_tool_report</code>, you need to run without <code>delay</code> and optimise your queries. <code>Preloading/eagerloading</code> and <code>caching</code> techniques might come handy.</p>\n"}], "owner": {"reputation": 11, "user_id": 1774593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GyxZP.jpg?s=128&g=1", "display_name": "SkunkDog", "link": "https://stackoverflow.com/users/1774593/skunkdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493748386, "creation_date": 1493746524, "last_edit_date": 1592644375, "question_id": 43743994, "link": "https://stackoverflow.com/questions/43743994/saving-variables-to-table-from-service-in-rails-attr-accessor-issue", "title": "Saving variables to table from service in Rails- attr_accessor issue?", "body": "<h2>Short description</h2>\n<p>I need to save a field to a table. I used to do this from the controller and it worked perfectly, but now I need to set this field from the service instead. I am using attr_accessor but am not able to get it to work properly.</p>\n<h2>Long description</h2>\n<p>I wrote a service (ToolService) that uses an api to create an array of hashes. I have previously saved this array to the object via the controller.</p>\n<p>Controller:</p>\n<pre><code>1: class ToolsController &lt; ApplicationController\n2:  def create\n3:   tool_hash = params.delete('tool')\n4:   @tool = Tool.new\n5:   # blah blah get params\n6:   t = ToolService.new(# pass params to initialize service)\n7:   @tool.all_data = t.run_tool_report(# pass params to get result)\n8:  end\n9: end\n</code></pre>\n<p>Service:</p>\n<pre><code>class ToolService\nattr_accessor :all_data\n def initialize(# params)\n  # initializing stuff\n end\n def run_tool_report(# params, including array_of_tools)\n  @all_data = Array.new # create an array to hold all hashes of data\n  array_of_tools.each do |each tool| \n   # run all api queries\n   @each_tool_data = # hash of query results\n   @all_data &lt;&lt; @each_tool_data # add each hash of results to array \n  end\n return @all_data\n end\nend \n</code></pre>\n<p>This works as expected. However, I need to implement <a href=\"https://github.com/collectiveidea/delayed_job\" rel=\"nofollow noreferrer\">Delayed Jobs</a> because this query takes a long time. So, in the controller I have changed line 7 to <code>t.delay.run_tool_report(# pass params to get result)</code>. I thought that including <code>attr_accessor :all_data</code> in the service would allow the service write to the @tool.all_data field in the table, but this doesn't seem to be the case.</p>\n<p>When I use <code>@tool.delay.all_data = t.run_tool_report(# pass params to get result)</code>, @tool.all_data is set to the id of the delayed job, not the array of results.</p>\n<p>So, am I using attr_accessor incorrectly? Or is there some other way to set this field in the table?</p>\n"}, {"tags": ["ruby", "if-statement"], "comments": [{"owner": {"reputation": 18084, "user_id": 2700898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3RkV.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2700898/matt"}, "edited": false, "score": 3, "creation_date": 1493747307, "post_id": 43743826, "comment_id": 74531154, "body": "do <code>&#39;%03d&#39; % n</code>"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 18084, "user_id": 2700898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3RkV.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2700898/matt"}, "edited": false, "score": 0, "creation_date": 1493747450, "post_id": 43743826, "comment_id": 74531241, "body": "@Matt, this is the best, I think you can write a perfect answer."}, {"owner": {"reputation": 1405, "user_id": 5960393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nW8g.jpg?s=128&g=1", "display_name": "ProgrammerPanda", "link": "https://stackoverflow.com/users/5960393/programmerpanda"}, "reply_to_user": {"reputation": 18084, "user_id": 2700898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3RkV.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2700898/matt"}, "edited": false, "score": 0, "creation_date": 1493748023, "post_id": 43743826, "comment_id": 74531569, "body": "@Matt can you explain your code?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493749455, "post_id": 43743826, "comment_id": 74532319, "body": "&quot;<a href=\"https://meta.stackoverflow.com/q/334822/128421\">How do I ask and answer homework questions?</a>&quot;."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1493749842, "post_id": 43743826, "comment_id": 74532552, "body": "When asking about code you&#39;ve written it&#39;s important to read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. &quot;always get errors&quot; makes it mandatory you tell us what the error is."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1493757588, "post_id": 43743826, "comment_id": 74536741, "body": "&quot;I have been tinkering with versions of the below code, but I always get errors. Can anyone advise?&quot; \u2013 Yes: look at the errors and fix them. Since you are not telling us what the errors are, there is nothing we can do for you. Only you know what the errors are, so only you can fix the problem."}], "answers": [{"comments": [{"owner": {"reputation": 677, "user_id": 2636579, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b615adca01077d21372bbbed1b998617?s=128&d=identicon&r=PG", "display_name": "reallymemorable", "link": "https://stackoverflow.com/users/2636579/reallymemorable"}, "edited": false, "score": 0, "creation_date": 1493746717, "post_id": 43743872, "comment_id": 74530873, "body": "Thanks so much!  We haven&#39;t covered .rjust yet, so I think my instructor wanted me to do something more complicated, but this definitely solves the problem neatly :)"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 3, "last_activity_date": 1493747022, "last_edit_date": 1493747022, "creation_date": 1493746038, "answer_id": 43743872, "question_id": 43743826, "link": "https://stackoverflow.com/questions/43743826/how-to-write-nested-if-then-statements-in-ruby/43743872#43743872", "title": "How to write nested if/then statements in Ruby", "body": "<h1><code>rjust</code></h1>\n\n<p>You could just use <a href=\"https://ruby-doc.org/core-2.2.3/String.html#method-i-rjust\" rel=\"nofollow noreferrer\"><code>rjust</code></a>:</p>\n\n<pre><code>n.to_s.rjust(3, '0')\n</code></pre>\n\n<blockquote>\n  <p>If integer is greater than the length of str, returns a new String of\n  length integer with str right justified and padded with padstr;\n  otherwise, returns str.</p>\n</blockquote>\n\n<h1>Your code</h1>\n\n<h3>Problem</h3>\n\n<p>If you let your text editor indents your code, you can notice there's something wrong:</p>\n\n<pre><code>def three_digit_format(n)\n  stringed = n.to_s\n  stringed.size\n  if stringed.size &gt; 2\n    return stringed\n  end\nelsif stringed &gt; 1       # &lt;- elsif shouldn't be here\n  return \"0\" + stringed\nend\n  else\n    return \"00\" + stringed\n  end\nend\nputs three_digit_format(9)\n</code></pre>\n\n<h3>Solution</h3>\n\n<p><code>if</code>, <code>elsif</code> and <code>else</code> belong to the same expression : there should only be one <code>end</code> at the end of the expression, not for each statement.</p>\n\n<pre><code>def three_digit_format(n)\n  stringed = n.to_s\n  if stringed.size &gt; 2\n    return stringed\n  elsif stringed.size &gt; 1\n    return \"0\" + stringed\n  else\n    return \"00\" + stringed\n  end\nend\nputs three_digit_format(9)\n# 009\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1493748937, "creation_date": 1493748937, "answer_id": 43744612, "question_id": 43743826, "link": "https://stackoverflow.com/questions/43743826/how-to-write-nested-if-then-statements-in-ruby/43744612#43744612", "title": "How to write nested if/then statements in Ruby", "body": "<p>As others have pointed out, <code>rjust</code> and applying a format <code>'%03d' % n</code> are built in ways to do it.</p>\n\n<p>But if you have to stick to what you've learned so far, I wonder if you've been introduced to the <code>case</code> statement?</p>\n\n<pre><code>def three_digit_format(n)\n  case n\n  when 0..9\n    return \"00#{n}\"\n  when 10..99\n    return \"0#{n}\"\n  when 100..999\n    return \"#{n}\"\n  end\nend\n</code></pre>\n\n<p>I think it's cleaner than successive <code>if</code> statements.</p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1493754831, "post_id": 43746108, "comment_id": 74535257, "body": "&quot;Exercises that force you to re-invent tools just drive me up the wall. That&#39;s not what programming is about.&quot; Definitely. Code reuse is SO important and there are so many existing code libraries now that having to reinvent them as an exercise is a waste of time and energy. Knowing how to write a sort algorithm is fine, but knowing where to find one is even better than writing one that is not done well."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1493755918, "last_edit_date": 1493755918, "creation_date": 1493754637, "answer_id": 43746108, "question_id": 43743826, "link": "https://stackoverflow.com/questions/43743826/how-to-write-nested-if-then-statements-in-ruby/43746108#43746108", "title": "How to write nested if/then statements in Ruby", "body": "<p>This function, as some have pointed out, is entirely pointless since there's several built-in ways of doing this. Here's the most concise:</p>\n\n<pre><code>def three_digit_format(n)\n  '%03d' % n\nend\n</code></pre>\n\n<p>Exercises that force you to re-invent tools just drive me up the wall. That's not what programming is about. Learning to be an effective programmer means knowing when you have a tool at hand that can do the job, when you need to use several tools in conjunction, or when you have no choice but to make your own tool. Too many programmers jump immediately to writing their own tools and overlook more elegant solutions.</p>\n\n<p>If you're committed to that sort of approach due to academic constraints, why not this?</p>\n\n<pre><code>def three_digit_format(n)\n  v = n.to_s\n\n  while (v.length &lt; 3)\n    v = '0' + v\n  end\n\n  v\nend\n</code></pre>\n\n<p>Or something like this?</p>\n\n<pre><code>def three_digit_format(n)\n  (n + 1000).to_s[1,3]\nend\n</code></pre>\n\n<p>Where in that case values of the form 0-999 will be rendered as <code>\"1000\"</code>-<code>\"1999\"</code> and you can just trim off the last three characters.</p>\n\n<p>Since these exercises are often absurd, why not take this to the limit of absurdity?</p>\n\n<pre><code>def three_digit_format(n)\n  loop do\n    v = Array.new(3) { (rand(10) + '0'.ord).chr }.join('')\n\n    return v if (v.to_i == n)\n  end \nend\n</code></pre>\n\n<p>If you're teaching things about <code>if</code> statements and how to append <code>elsif</code> clauses, it makes sense to present those in a meaningful context, not something contrived like this. For example:</p>\n\n<pre><code>if (customer.exists? and !customer.on_fire?)\n  puts('Welcome back!')\nelsif (!customer.exists?)\n  puts('You look new here, welcome!')\nelse\n  puts('I smell burning.')\nend\n</code></pre>\n\n<p>There's so many ways a chain of <code>if</code> statements is unavoidable, it's how business logic ends up being implemented. Using them in inappropriate situations is how code ends up ugly and Rubocop or Code Climate give you a failing grade.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1493754641, "creation_date": 1493754641, "answer_id": 43746112, "question_id": 43743826, "link": "https://stackoverflow.com/questions/43743826/how-to-write-nested-if-then-statements-in-ruby/43746112#43746112", "title": "How to write nested if/then statements in Ruby", "body": "<p>Here's my spin on it:</p>\n\n<pre><code>def three_digit_format(n)\n  str = n.to_s\n  str_len = str.length\n  retval = if str_len &gt; 2\n             str\n           elsif str_len &gt; 1\n             '0' + str\n           else \n             '00' + str\n           end\n  retval\nend\n\nthree_digit_format(1)   # =&gt; \"001\"\nthree_digit_format(12)  # =&gt; \"012\"\nthree_digit_format(123) # =&gt; \"123\"\n</code></pre>\n\n<p>Which can be reduced to:</p>\n\n<pre><code>def three_digit_format(n)\n  str = n.to_s\n  str_len = str.length\n  if str_len &gt; 2\n    str\n  elsif str_len &gt; 1\n    '0' + str\n  else \n    '00' + str\n  end\nend\n</code></pre>\n\n<p>The way it <em>should</em> be done is by taking advantage of String formats:</p>\n\n<pre><code>'%03d' % 1   # =&gt; \"001\"\n'%03d' % 12  # =&gt; \"012\"\n'%03d' % 123 # =&gt; \"123\"\n</code></pre>\n"}], "owner": {"reputation": 677, "user_id": 2636579, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b615adca01077d21372bbbed1b998617?s=128&d=identicon&r=PG", "display_name": "reallymemorable", "link": "https://stackoverflow.com/users/2636579/reallymemorable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1493755918, "creation_date": 1493745832, "last_edit_date": 1493749511, "question_id": 43743826, "link": "https://stackoverflow.com/questions/43743826/how-to-write-nested-if-then-statements-in-ruby", "title": "How to write nested if/then statements in Ruby", "body": "<p>I'm supposed to </p>\n\n<blockquote>\n  <p>define a method, three_digit_format(n), that accepts an integer, n, as an argument. Assume that n &lt; 1000. Your method should return a string version of n, but with leading zeros such that the string is always 3 characters long.</p>\n</blockquote>\n\n<p>I have been tinkering with versions of the below code, but I always get errors.  Can anyone advise?</p>\n\n<pre><code>def three_digit_format(n)\n  stringed = n.to_s\n  stringed.size\n  if stringed.size &gt; 2\n    return stringed\n  end\n  elsif stringed &gt; 1\n    return \"0\" + stringed\n  end\n  else \n    return \"00\" + stringed\n  end\nend\nputs three_digit_format(9)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano", "rbenv"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1493744799, "post_id": 43743439, "comment_id": 74529877, "body": "Have you tried to use <code>~&#47;.ruby-version</code> file with <code>2.4.1</code> ?"}, {"owner": {"reputation": 3973, "user_id": 12779, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/55c439c4d52dcb2cc975fc047560f006?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/12779/nate"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1493745593, "post_id": 43743439, "comment_id": 74530303, "body": "Yes, that gives me 2.4.1. I still want to be able to set the version in my deploy.rb file, though."}], "answers": [{"tags": [], "owner": {"reputation": 3973, "user_id": 12779, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/55c439c4d52dcb2cc975fc047560f006?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/12779/nate"}, "is_accepted": true, "score": 2, "last_activity_date": 1493747458, "creation_date": 1493747458, "answer_id": 43744218, "question_id": 43743439, "link": "https://stackoverflow.com/questions/43743439/capistrano-rbenv-why-is-it-ignoring-rbenv-ruby/43744218#43744218", "title": "capistrano-rbenv: Why is it ignoring rbenv_ruby?", "body": "<p>Okay. Instead of</p>\n\n<pre><code>execute \"rbenv versions\"\n</code></pre>\n\n<p>I wanted:</p>\n\n<pre><code>execute :rbenv, \"versions\"\n</code></pre>\n\n<p>the two look real similar but are not at all the same:</p>\n\n<p><a href=\"http://capistranorb.com/documentation/getting-started/tasks/\" rel=\"nofollow noreferrer\">http://capistranorb.com/documentation/getting-started/tasks/</a></p>\n\n<blockquote>\n  <p>tl;dr: execute(:bundle, :install) and execute('bundle install') don\u2019t behave identically!</p>\n</blockquote>\n\n<p>siiiiiiiiiiiiiiigh</p>\n"}], "owner": {"reputation": 3973, "user_id": 12779, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/55c439c4d52dcb2cc975fc047560f006?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/12779/nate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 43744218, "answer_count": 1, "score": 0, "last_activity_date": 1493747458, "creation_date": 1493744303, "question_id": 43743439, "link": "https://stackoverflow.com/questions/43743439/capistrano-rbenv-why-is-it-ignoring-rbenv-ruby", "title": "capistrano-rbenv: Why is it ignoring rbenv_ruby?", "body": "<p>OK. So I'm trying to deploy a new version of an app using capistrano. I'm using rbenv, and have 1.8.7 installed (for the old app) and 2.4.1 installed (for the new app). My Capfile includes:</p>\n\n<pre><code>require \"capistrano/rbenv\"\n</code></pre>\n\n<p>and my deploy.rb:</p>\n\n<pre><code>set :rbenv_type, :user\nset :rbenv_ruby, \"2.4.1\"\n\nnamespace :deploy do\n  desc \"Show ruby version\"\n  task :ruby_version do\n    on roles(:all) do |h|\n      execute \"ruby --version\"\n      execute \"rbenv versions\"\n    end\n  end\nend\n</code></pre>\n\n<p>Running <code>cap production deploy:ruby_version</code> yields:</p>\n\n<pre><code>00:00 deploy:ruby_version\n      01 ruby --version\n      01 ruby 1.8.7 (2012-06-29 patchlevel 370) [x86_64-linux]\n    \u2714 01 deploy@example.com 0.390s\n      02 rbenv versions\n      02   system\n      02 * 1.8.7-p370 (set by /home/deploy/.rbenv/version)\n      02   2.4.1\n    \u2714 02 deploy@example.com 0.371s\n</code></pre>\n\n<p>I've tried a variety of things \u2014 <code>set :default_env, {\"RBENV_VERSION =&gt; \"2.4.1\"}</code>, removing <code>/home/deploy/.rbenv/version</code> (which makes me use <code>system</code> ruby) \u2014 but nothing seems to let rbenv_ruby override the other setting.</p>\n\n<p>Setting <code>rbenv_ruby</code> to a nonexistent version throws an error, so it appears to be doing <em>something.</em></p>\n\n<p>I'm going nuts. What am I doing wrong?</p>\n"}, {"tags": ["ruby", "heroku", "elixir"], "comments": [{"owner": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "edited": false, "score": 1, "creation_date": 1493744196, "post_id": 43743361, "comment_id": 74529579, "body": "Can you post the error logs from Heroku? (I think the command is <code>heroku logs</code>) You probably need to add a Ruby buildpack as well so that the Ruby dependencies are also installed."}, {"owner": {"reputation": 185, "user_id": 542645, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/9dfae5ecf93c861db337992d2f2f3121?s=128&d=identicon&r=PG", "display_name": "jxxcarlson", "link": "https://stackoverflow.com/users/542645/jxxcarlson"}, "reply_to_user": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "edited": false, "score": 0, "creation_date": 1493751223, "post_id": 43743361, "comment_id": 74533378, "body": "Here is an extract from the logs:"}, {"owner": {"reputation": 185, "user_id": 542645, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/9dfae5ecf93c861db337992d2f2f3121?s=128&d=identicon&r=PG", "display_name": "jxxcarlson", "link": "https://stackoverflow.com/users/542645/jxxcarlson"}, "reply_to_user": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "edited": false, "score": 0, "creation_date": 1493751620, "post_id": 43743361, "comment_id": 74533606, "body": "Note the existence of the ruby buildpack in the better formatted version above"}, {"owner": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "edited": false, "score": 0, "creation_date": 1493753274, "post_id": 43743361, "comment_id": 74534440, "body": "And you get the same error with <code>require &#39;asciidoctor-latex&#39;</code> + Ruby buildpack?"}, {"owner": {"reputation": 185, "user_id": 542645, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/9dfae5ecf93c861db337992d2f2f3121?s=128&d=identicon&r=PG", "display_name": "jxxcarlson", "link": "https://stackoverflow.com/users/542645/jxxcarlson"}, "reply_to_user": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "edited": false, "score": 0, "creation_date": 1493754531, "post_id": 43743361, "comment_id": 74535082, "body": "Yes, i get the same error"}, {"owner": {"reputation": 185, "user_id": 542645, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/9dfae5ecf93c861db337992d2f2f3121?s=128&d=identicon&r=PG", "display_name": "jxxcarlson", "link": "https://stackoverflow.com/users/542645/jxxcarlson"}, "reply_to_user": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "edited": false, "score": 0, "creation_date": 1493754630, "post_id": 43743361, "comment_id": 74535137, "body": "I&#39;ve had the ruby buildpack there since the beginning -- but my post was so badly formatted that it was hard to read -- sorry!"}, {"owner": {"reputation": 185, "user_id": 542645, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/9dfae5ecf93c861db337992d2f2f3121?s=128&d=identicon&r=PG", "display_name": "jxxcarlson", "link": "https://stackoverflow.com/users/542645/jxxcarlson"}, "reply_to_user": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "edited": false, "score": 0, "creation_date": 1493765840, "post_id": 43743361, "comment_id": 74540116, "body": "Here is my Gemfile, which resides at the root of the umbrella project: <code>gem &#39;asciidoctor-latex&#39;, :git =&gt; &#39;https:&#47;&#47;github.com&#47;asciidoctor&#47;asciidoctor-latex&#39;</code>"}], "owner": {"reputation": 185, "user_id": 542645, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/9dfae5ecf93c861db337992d2f2f3121?s=128&d=identicon&r=PG", "display_name": "jxxcarlson", "link": "https://stackoverflow.com/users/542645/jxxcarlson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493751585, "creation_date": 1493744048, "last_edit_date": 1493751585, "question_id": 43743361, "link": "https://stackoverflow.com/questions/43743361/using-ruby-in-an-elixir-umbrella-appp", "title": "Using Ruby in an Elixir umbrella appp", "body": "<p>I am running an Elixir umbrella app on Heroku.  All is fine but one thing. I am using <code>:erlport, github: \"hdima/erlport\"</code> to run some Ruby code (<code>asciidoctor-latex</code>). This works locally but not on Heroku.  (Heroku cannot help me as they do not support Elixir.) </p>\n\n<p>I have narrowed the problem down to a single line. The app in question is <a href=\"http://notefile.herokuapp.com\" rel=\"nofollow noreferrer\">http://notefile.herokuapp.com</a> (<code>https://github.com/jxxcarlson/ns_umbrella</code>) and the line of code is in <code>app/apps/ruby_bridge/priv/ruby/asciidoc.rb</code>:</p>\n\n<pre><code># require 'asciidoctor-latex'\nrequire \"/app/vendor/bundle/ruby/2.3.0/bundler/gems/asciidoctor-latex-\nb5c9de1363de/bin/asciidoctor-latex\"\n</code></pre>\n\n<p>The commented-out line works locally but not on Heroku. The other line is one of my (failed) experiments to supply<code>require</code> with a absolute pathto <code>asciidoctor-latex</code>. </p>\n\n<p>I know that this line is the guilty party for the following reason. First, comment out all <code>require</code> lines; then,in <code>asciidoc.rb</code>, use <code>result = \"Text length = #{text.length}\"</code> instead of <code>result = Asciidoctor.convert text, { 'dialect' =&gt; 'latex' }</code></p>\n\n<p>Here I have replaced the call to a method in asciidoctor-latex by generic Ruby code. With these changes in place, the app does not crash and gives the expected output.</p>\n\n<p>CONCLUSION: <code>require</code> cannot find its target. Below I've listed the buildpacks used (in order):</p>\n\n<pre><code>heroku/ruby\nhttps://github.com/HashNuke/heroku-buildpack-elixir.git\nhttps://github.com/gjaldon/heroku-buildpack-phoenix-static\n</code></pre>\n\n<p>LOGS:</p>\n\n<pre><code>Rendering ... \n2017-05-02T18:52:00.071102+00:00 app[web.1]: ========================\n2017-05-02T18:52:00.071023+00:00 app[web.1]: MU.RenderText in APPLICATION MU_SERVER\n2017-05-02T18:52:00.071326+00:00 app[web.1]: %{mode: \"show\", note_id: 1065, process: :adoc_latex, public: false, user_id: 9,\n2017-05-02T18:52:00.071181+00:00 app[web.1]: OPTIONS\n2017-05-02T18:52:00.071327+00:00 app[web.1]:   username: \"jxxcarlson\"}\n2017-05-02T18:52:00.071392+00:00 app[web.1]: --\n2017-05-02T18:52:00.071513+00:00 app[web.1]: Rendering asciidoc-latex\n2017-05-02T18:52:00.150754+00:00 app[web.1]: Hello! This is render_asciidoc\n2017-05-02T18:52:00.458499+00:00 heroku[router]: at=info method=GET path=\"/notes/1065\" host=notefile.herokuapp.com request_id=f1ce45ba-6800-4d84-9b93-47851c0502e9 fwd=\"65.24.227.211\" dyno=web.1 connect=0ms service=417ms status=500 bytes=243 protocol=https\n2017-05-02T18:52:00.371673+00:00 app[web.1]: (1) Hello, I am here, in asciidoc.rb, top of file\n2017-05-02T18:52:00.378538+00:00 app[web.1]: Starting MU.Server ...\n2017-05-02T18:52:00.459594+00:00 app[web.1]: 18:52:00.459 [error] GenServer MUServer terminating\n2017-05-02T18:52:00.459607+00:00 app[web.1]: ** (stop) {:ruby, :LoadError, \"cannot load such file -- /app/vendor/bundle/ruby/2.3.0/bundler/gems/asciidoctor-latex-b5c9de1363de/bin/asciidoctor-latex\", [\"-e:1:in `&lt;main&gt;'\", \"/app/vendor/ruby-2.3.4/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\", \"/app/vendor/ruby-2.3.4/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\", \"/app/_build/prod/lib/erlport/priv/ruby1.9/erlport/cli.rb:94:in `&lt;top (required)&gt;'\", \"/app/_build/prod/lib/erlport/priv/ruby1.9/erlport/cli.rb:41:in `main'\", \"/app/_build/prod/lib/erlport/priv/ruby1.9/erlport/erlang.rb:138:in `start'\", \"/app/_build/prod/lib/erlport/priv/ruby1.9/erlport/erlang.rb:194:in `_receive'\", \"/app/_build/prod/lib/erlport/priv/ruby1.9/erlport/erlang.rb:234:in `call_with_error_handler'\", \"/app/_build/prod/lib/erlport/priv/ruby1.9/erlport/erlang.rb:195:in `block in _receive'\", \"/app/_build/prod/lib/erlport/priv/ruby1.9/erlport/erlang.rb:218:in `incoming_call'\", \"/app/vendor/ruby-2.3.4/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\", \"/app/vendor/ruby-2.3.4/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\", \"/app/apps/ruby_bridge/priv/ruby/asciidoc.rb:4:in `&lt;top (required)&gt;'\", \"/app/vendor/ruby-2.3.4/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\", \"/app/vendor/ruby-2.3.4/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\"]}\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "jenkins", "selenium-webdriver", "xvfb"], "comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495985665, "post_id": 43743311, "comment_id": 75468042, "body": "This error happens when click and loading of following page takes more than 60 seconds, right?"}, {"owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495988644, "post_id": 43743311, "comment_id": 75468967, "body": "Yea we know that. The same script works fine on real browser; but throws error in xvfb mode while executing the scripts in virtual machine through CI"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1495991542, "post_id": 43743311, "comment_id": 75469833, "body": "Oh Okay, sorry, I don&#39;t have any idea about that."}], "owner": {"reputation": 12669, "user_id": 1482709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ef49d195f8555bdc65d793cf965a2f6f?s=128&d=identicon&r=PG", "display_name": "Prashanth Sams", "link": "https://stackoverflow.com/users/1482709/prashanth-sams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1493743880, "creation_date": 1493743880, "question_id": 43743311, "link": "https://stackoverflow.com/questions/43743311/netreadtimeout-netreadtimeout-error-in-jenkins-with-xvfb-mode", "title": "Net::ReadTimeout (Net::ReadTimeout) error in jenkins with xvfb mode", "body": "<p>When I run <code>Selenium - Ruby</code> tests in <strong>xvfb</strong> mode against <code>jenkins</code>, the scripts go unreliable and randomly throws same error in different steps.</p>\n\n<pre><code>Net::ReadTimeout (Net::ReadTimeout)\n</code></pre>\n\n<p>any workaround for this issue? or any retry exceptions for every function using cucumber in ruby</p>\n\n<p><a href=\"https://i.stack.imgur.com/zRejM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zRejM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "sqlite"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1493740816, "post_id": 43742276, "comment_id": 74527703, "body": "For a production site, you should seriously consider moving to Postgres or MySQL."}, {"owner": {"reputation": 798, "user_id": 2500394, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b7658bc1d5e079bdb0661c1030f2015f?s=128&d=identicon&r=PG", "display_name": "David Brown", "link": "https://stackoverflow.com/users/2500394/david-brown"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493740972, "post_id": 43742276, "comment_id": 74527789, "body": "Yeah, we have plans to deprecate this system, but we need a short-term fix in the meantime."}], "owner": {"reputation": 798, "user_id": 2500394, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b7658bc1d5e079bdb0661c1030f2015f?s=128&d=identicon&r=PG", "display_name": "David Brown", "link": "https://stackoverflow.com/users/2500394/david-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493740374, "creation_date": 1493740374, "question_id": 43742276, "link": "https://stackoverflow.com/questions/43742276/sqlite3-db-starts-throwing-sqlexception-on-write-after-a-few-days-in-production", "title": "SQLite3 DB starts throwing SQLException on write after a few days in production", "body": "<p>We have a small internal Ruby on Rails service that uses a SQLite 3 database. After running perfectly for a few days, it starts throwing the following exception when attempting to save a model:</p>\n\n<pre><code>ActiveRecord::StatementInvalid (SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction)\n</code></pre>\n\n<p>The Ruby code that throws this error is a simple:</p>\n\n<pre><code>@rule.save\n</code></pre>\n\n<p>where a rule is a model we want to save to the database.</p>\n\n<p>Once this error starts occurring, we are no longer able to write to the sqlite database via the Rails app. After restarting the app, it works again for a few days.</p>\n\n<p>Since restarting the Rails app seems to fix the issue, I can only guess that somehow it is keeping a database transaction open. I did not write this app and am new to Ruby. What could cause this and what would the best way to diagnose the issue be?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "cloud9-ide", "cloud9"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493740004, "post_id": 43742107, "comment_id": 74527221, "body": "Are you using a version control system like git?"}, {"owner": {"reputation": 17, "user_id": 7376193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/75c8ce82abb3d5d80ed8b1a502e47468?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7376193/john-doe"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493740201, "post_id": 43742107, "comment_id": 74527326, "body": "I&#39;m sorry I&#39;m not sure what you mean by that..are you talking about GitHub? Then no I have not backed up my project on there."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1493741215, "post_id": 43742107, "comment_id": 74527914, "body": "@JohnDoe git lets you define snapshots of your application at various points in time. Github is a web UI for these &#39;repositories&#39; but git is a program you run on your computer. It&#39;d be too late to rollback if you hadn&#39;t used it thus far, but it&#39;d be good to start making commits now. By the way, all <code>rails g</code> commands have an analogous <code>rails d</code> or <code>rails destroy</code> command to remove the generated files."}, {"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 0, "creation_date": 1493742223, "post_id": 43742107, "comment_id": 74528468, "body": "What are you using to keep track of changes?"}], "answers": [{"comments": [{"owner": {"reputation": 3226, "user_id": 4449035, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-cDrTIBwolm0/AAAAAAAAAAI/AAAAAAAANmE/OK9Bjdfpl7g/photo.jpg?sz=128", "display_name": "Brady Dowling", "link": "https://stackoverflow.com/users/4449035/brady-dowling"}, "edited": false, "score": 0, "creation_date": 1493830760, "post_id": 43743516, "comment_id": 74573256, "body": "Indeed, if you haven&#39;t been using git the best option here is to use file revision history."}], "tags": [], "owner": {"reputation": 143, "user_id": 3735111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74b032e716748a976d93e75ddf7af512?s=128&d=identicon&r=PG&f=1", "display_name": "user3735111", "link": "https://stackoverflow.com/users/3735111/user3735111"}, "is_accepted": false, "score": 1, "last_activity_date": 1493744613, "creation_date": 1493744613, "answer_id": 43743516, "question_id": 43742107, "link": "https://stackoverflow.com/questions/43742107/how-do-i-rollback-changes-in-ruby-on-rails/43743516#43743516", "title": "How do I rollback changes in Ruby on Rails?", "body": "<p>It depends on if you are using any version control system like github.com</p>\n\n<p>If you use github, for example, there is a number of ways to do it, I can walk you through if that's the case.</p>\n\n<p>For Cloud9 I would try doing what's described here <a href=\"https://docs.c9.io/docs/file-revision-history\" rel=\"nofollow noreferrer\">https://docs.c9.io/docs/file-revision-history</a></p>\n"}], "owner": {"reputation": 17, "user_id": 7376193, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/75c8ce82abb3d5d80ed8b1a502e47468?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/7376193/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493744613, "creation_date": 1493739849, "question_id": 43742107, "link": "https://stackoverflow.com/questions/43742107/how-do-i-rollback-changes-in-ruby-on-rails", "title": "How do I rollback changes in Ruby on Rails?", "body": "<p>I'm using Cloud9 and I'm fairly new at it and I wrote a \"rails g Scaffold\" statement and ran it but I forgot to make changes before that. Is there any way I can rollback any changes made today to a previous date? The last time I worked on this was 3 days ago and I want to revert all changes so that my site looks like what it did 3 days ago instead of me starting from scratch again. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "checkbox"], "comments": [{"owner": {"reputation": 79, "user_id": 5663022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edd63145a04ebf23b3772eddd5d551c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/5663022/jacob"}, "edited": false, "score": 0, "creation_date": 1493931123, "post_id": 43742057, "comment_id": 74625898, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/10280162/how-can-i-make-a-check-box-tag-to-post-a-false-or-0-parameter-when-unchecked\">How can I make a check_box_tag to post a &#39;false&#39; or &#39;0&#39; parameter when unchecked?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 5663022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edd63145a04ebf23b3772eddd5d551c5?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/5663022/jacob"}, "is_accepted": false, "score": -1, "last_activity_date": 1493931072, "last_edit_date": 1495542857, "creation_date": 1493931072, "answer_id": 43792557, "question_id": 43742057, "link": "https://stackoverflow.com/questions/43742057/how-to-save-ids-and-boolean-value-checkbox-tag-ruby-on-rails/43792557#43792557", "title": "How to save ids and boolean value checkbox_tag Ruby on Rails", "body": "<p>Possible duplicate of <a href=\"https://stackoverflow.com/q/10280162/5663022\">How can I make a check_box_tag to post a &#39;false&#39; or &#39;0&#39; parameter when unchecked?</a>.</p>\n\n<p><a href=\"https://stackoverflow.com/a/10280810/5663022\">https://stackoverflow.com/a/10280810/5663022</a>\nThis answer (and others in this thread) might be helpful to you. Cannot comment so sharing as answer.</p>\n"}], "owner": {"reputation": 13, "user_id": 7798273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/193038a0db3bfc8112ddb354616a62dc?s=128&d=identicon&r=PG&f=1", "display_name": "D.Hin", "link": "https://stackoverflow.com/users/7798273/d-hin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 650, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493931072, "creation_date": 1493739719, "question_id": 43742057, "link": "https://stackoverflow.com/questions/43742057/how-to-save-ids-and-boolean-value-checkbox-tag-ruby-on-rails", "title": "How to save ids and boolean value checkbox_tag Ruby on Rails", "body": "<p>I am currently trying to implement an attendance sheet where the user ticks a checkbox next to the user's name; if checked user is present, if unchecked user is absent. </p>\n\n<p>I currently have it working where the attendance sheet lists all users attending the event however, it only saves the attendance id and user id of the checkboxes ticked. </p>\n\n<p>I want the attendance sheet to save all user ids and assign a boolean value to each.</p>\n\n<p>My current view:  </p>\n\n<pre><code> &lt;%= simple_form_for @attendance, :html=&gt; { :multipart=&gt; true } do |f| %&gt;\n\n&lt;div class=\"checkBoxes\"&gt;\n    &lt;div&gt;\n        &lt;%= f.hidden_field :event_id, :value =&gt; @event.id %&gt;\n\n    &lt;/div&gt;\n\n\n    &lt;div &gt;\n        &lt;% @event.users.each do |user| %&gt;\n\n         &lt;%= check_box_tag \"attendance[user_ids][]\",user.id,attendance.users.include?(user) %&gt;\n            &lt;%= user.name %&gt;&lt;br&gt;\n    &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n\n\n&lt;div class=\"actions\"&gt;\n   &lt;%= f.button :submit, 'Save', class: \"btn btn-primary\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The form saves the selected event id and date in an attendances table and then builds the attendance_id and user_id under the attendance_users table.  </p>\n\n<p>Database migration for attendance users:  </p>\n\n<pre><code>class CreateAttendanceUsers &lt; ActiveRecord::Migration\n  def change\n    create_table :attendance_users do |t|\n\n      t.integer :attendance_id, :null =&gt; false\n      t.integer :user_id, :null =&gt;false\n      t.boolean :is_absent\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>It currently only saves the attendance_id and user_id of the selected checkboxes. How can I:<br>\n1.) Save all checked and unchecked users?<br>\n2.) Assign each user a boolean value(if checked is_absent is false, if unchecked is_absent is true</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4493231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550a3ceae420b07359ccc3d8fa16c3d9?s=128&d=identicon&r=PG&f=1", "display_name": "like2learn", "link": "https://stackoverflow.com/users/4493231/like2learn"}, "edited": false, "score": 0, "creation_date": 1493745818, "post_id": 43743279, "comment_id": 74530424, "body": "Is there a way to avoid clearing the errors? So I can have simpler code"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "reply_to_user": {"reputation": 3, "user_id": 4493231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550a3ceae420b07359ccc3d8fa16c3d9?s=128&d=identicon&r=PG&f=1", "display_name": "like2learn", "link": "https://stackoverflow.com/users/4493231/like2learn"}, "edited": false, "score": 0, "creation_date": 1493759159, "post_id": 43743279, "comment_id": 74537528, "body": "@like2learn I wouldn&#39;t recommend messing with such a basic feature of how Rails work. You will have much better luck in the long-run if you rethink how you approach this problem you&#39;re having."}], "tags": [], "owner": {"reputation": 16530, "user_id": 624551, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/0a09bc0cd01b0bfd4d2fea1863138267?s=128&d=identicon&r=PG", "display_name": "Intrepidd", "link": "https://stackoverflow.com/users/624551/intrepidd"}, "is_accepted": true, "score": 2, "last_activity_date": 1493743749, "creation_date": 1493743749, "answer_id": 43743279, "question_id": 43741754, "link": "https://stackoverflow.com/questions/43741754/add-error-in-a-method-would-not-validate-activerecord/43743279#43743279", "title": "add error in a method would not validate activerecord", "body": "<p>The <a href=\"https://github.com/rails/rails/blob/17ef58db1776a795c9f9e31a1634db7bcdc3ecdf/activemodel/lib/active_model/validations.rb#L334\" rel=\"nofollow noreferrer\">rails source</a> might help you understand.</p>\n\n<p>As you can see, when asking if an object is <code>valid?</code>, rails clears errors first.</p>\n\n<p>As you were adding your errors outside of the validation flow, errors would be cleared, then validations ran, and no errors would be found.</p>\n"}], "owner": {"reputation": 3, "user_id": 4493231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/550a3ceae420b07359ccc3d8fa16c3d9?s=128&d=identicon&r=PG&f=1", "display_name": "like2learn", "link": "https://stackoverflow.com/users/4493231/like2learn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 43743279, "answer_count": 1, "score": 0, "last_activity_date": 1493743749, "creation_date": 1493738820, "question_id": 43741754, "link": "https://stackoverflow.com/questions/43741754/add-error-in-a-method-would-not-validate-activerecord", "title": "add error in a method would not validate activerecord", "body": "<p>I have an ActiveRecord model <code>Account</code> and a method <code>withdraw</code>. I want to validate if the user has enough funds available, so I tried to <code>errors.add</code> directly into the <code>withdraw</code> method</p>\n\n<pre><code>def withdraw(amount)\n  if balance &lt; amount\n    errors.add(:insufficient_funds, \"You don't have enough funds.\")\n  end\n\n  self.balance = balance - amount\nend\n</code></pre>\n\n<p>While it does add the message to <code>errors</code> it doesn't prevent from saving. So I've changed my code. Here is my updated code:</p>\n\n<pre><code>class Account &lt; ActiveRecord::Base\n  belongs_to :user\n\n  validate :have_enough_funds\n\n  def deposit(amount)\n    self.balance = balance.to_f + amount.to_f\n  end\n\n  def withdraw(amount)\n    @old_balance = balance.to_f\n    @withdraw_amount = amount.to_f\n\n    self.balance = @old_balance - @withdraw_amount\n  end\n\n  private\n\n  def have_enough_funds\n   return unless @withdraw_amount &amp;&amp; @old_balance\n\n   if @withdraw_amount &gt; @old_balance\n     errors.add(:insufficient_funds, \"You don't have enough funds.\")\n   end\n  end\nend\n</code></pre>\n\n<p>I'm wondering why my first approach didn't work.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "split", "ruby-hash"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493739255, "post_id": 43741753, "comment_id": 74526728, "body": "Please show the code you are using to generate your query."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1493741304, "post_id": 43742066, "comment_id": 74527962, "body": "thank you @yoones, it hepled me but could you please explain to me what the <code>{ |k, v| result[k.split.last] = v }</code> did exactly so I can do more things :)"}, {"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "reply_to_user": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1493741657, "post_id": 43742066, "comment_id": 74528140, "body": "@media I added some explanation, check it out."}, {"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1493742134, "post_id": 43742066, "comment_id": 74528413, "body": "@yoones NB: I know I can use <code>split(&#39; &#39;)[3]</code> instead of last for example but that will returns only &#39;Linux&#39; and not &#39;Linux x86_64 right ? any idea about that?"}, {"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "reply_to_user": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1493742319, "post_id": 43742066, "comment_id": 74528523, "body": "@media try this: <code>&quot;toto titi tata plouf&quot;.split[1..2].join(&#39; &#39;)</code>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493742717, "post_id": 43742066, "comment_id": 74528776, "body": "I think this answer is correct, but it could be cleaner. You don&#39;t need to create an empty hash and then fill it up; instead just do <code>input.transform_keys { |browser| browser.split.last }</code>."}, {"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1493743077, "post_id": 43742066, "comment_id": 74528989, "body": "@moveson <code>transform_keys</code> can be used but there are two things to consider first: is he working on an activerecord result or a hash? and will he still need the original data afterwards? Since I don&#39;t know, I go with the most generic version."}], "tags": [], "owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "is_accepted": true, "score": 0, "last_activity_date": 1493741482, "last_edit_date": 1493741482, "creation_date": 1493739745, "answer_id": 43742066, "question_id": 43741753, "link": "https://stackoverflow.com/questions/43741753/ror-ruby-how-to-split-data-from-database-and-use-count-with-it/43742066#43742066", "title": "RoR,Ruby How to split data from database and use count with it", "body": "<p>Do the following:</p>\n\n<pre><code>input = {\"Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20100101 Firefox/45.0\"=&gt;5, \"Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:51.0) Gecko/20100101 Firefox/51.0\"=&gt;9}\nresult = {}\ninput.each { |k, v| result[k.split.last] = v }\n</code></pre>\n\n<p>Replace the input with your actual query.</p>\n\n<p>What it does is that it:</p>\n\n<ul>\n<li>iterates on each element of the input</li>\n<li>For each one, use the key as <code>k</code> and the value as <code>v</code>,</li>\n<li>Take <code>k</code>, <code>split</code> it (cut the string into words separated by spaces), and keep the last word using <code>last</code></li>\n<li>Add to result a new entry where the key is the last word selected, and the value is <code>v</code>.</li>\n</ul>\n"}], "owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 43742066, "answer_count": 1, "score": 0, "last_activity_date": 1494683397, "creation_date": 1493738803, "last_edit_date": 1494683397, "question_id": 43741753, "link": "https://stackoverflow.com/questions/43741753/ror-ruby-how-to-split-data-from-database-and-use-count-with-it", "title": "RoR,Ruby How to split data from database and use count with it", "body": "<p>I'm trying to extract data from database and use it with a pie-chart for example.</p>\n\n<p>I was able to extract data from the column \"browser\" from the database which is a string and has this format : \"Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20100101 Firefox/45.0\"</p>\n\n<p>When I use the method \"count\" in my query, data will be saved as a hash like this :</p>\n\n<blockquote>\n  <p>{\"<strong>Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20100101\n  Firefox/45.0</strong>\"=>5, \"<strong>Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:51.0)\n  Gecko/20100101 Firefox/51.0</strong>\"=>9}</p>\n</blockquote>\n\n<p>I'd like to show only the version of the browser or the OS for example. Is there any method (split or substring) to have a hash like this ?? and of course  the method \"count\" should be working</p>\n\n<blockquote>\n  <p>{\"<strong>Firefox/45.0</strong>\"=>5, \"<strong>Firefox/51.0</strong>\"=>9}</p>\n</blockquote>\n\n<p>I tried to use split but when using the method count, there will be no data found since it's saved in the database as a whole string \"Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20100101 Firefox/45.0\". there is no \"Firefox/45.0\" in the column browser in my table in the database.</p>\n\n<p>I tried also to use substring in mysql query when using a simple query from console I get the results I want but since I'm using Ruby on Rails and ActiveRecords the \"substring\" is not returning the same result (not working properly)</p>\n\n<p>Any help please?</p>\n"}, {"tags": ["ruby", "block", "proc"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1493738699, "post_id": 43741639, "comment_id": 74526349, "body": "&quot;How do you call this method&quot;: <code>reverser { &quot;Hello&quot; }</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 4, "creation_date": 1493738905, "post_id": 43741639, "comment_id": 74526490, "body": "&quot;The homework problem is super simple.&quot; \u2013 The homework problem is super stupid, in that it in no way demonstrates the usefulness of blocks."}, {"owner": {"reputation": 1090, "user_id": 7113209, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10154091942466794/picture?type=large", "display_name": "hancho", "link": "https://stackoverflow.com/users/7113209/hancho"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1493739474, "post_id": 43741639, "comment_id": 74526877, "body": "@J&#246;rgWMittag do you have a good example that would be useful? Any help would be appreciated as the past 6 months I&#39;ve been completely teaching myself."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1493739580, "post_id": 43741639, "comment_id": 74526968, "body": "Well, you actually already used a block in your implementation of <code>reverser</code>, and the <code>Enumerable</code> methods (most of which take a block) are all good examples."}], "answers": [{"comments": [{"owner": {"reputation": 1090, "user_id": 7113209, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10154091942466794/picture?type=large", "display_name": "hancho", "link": "https://stackoverflow.com/users/7113209/hancho"}, "edited": false, "score": 1, "creation_date": 1493739292, "post_id": 43741733, "comment_id": 74526757, "body": "This just blew my mind. I&#39;ve been stuck for two days trying to grasp what was going on, this made me understand the concept a lot better."}], "tags": [], "owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "is_accepted": true, "score": 7, "last_activity_date": 1493744344, "last_edit_date": 1493744344, "creation_date": 1493738734, "answer_id": 43741733, "question_id": 43741639, "link": "https://stackoverflow.com/questions/43741639/ruby-why-use-a-block-as-a-parameter/43741733#43741733", "title": "Ruby - Why use a Block as a parameter?", "body": "<ol>\n<li><p>You'd call it like this: </p>\n\n<pre><code>print reverser { \"Hello\" }\n</code></pre></li>\n</ol>\n\n<p>Or if your block is several lines long then like this:</p>\n\n<pre><code>print reverser do\n  \"Hello\"\nend\n</code></pre>\n\n<ol start=\"2\">\n<li>Blocks are close to what anonymous functions are in other languages.</li>\n</ol>\n\n<p>Map is a good example.\nWhat map does is it takes an array and maps (transforms) every element according to whatever rules you need.</p>\n\n<p>These mapping rules must be a code. That means, it can't be a string or number or something, it has to be a function. Block is used here as function which you can write using minimal code.</p>\n\n<p>So in your example you have this:</p>\n\n<pre><code>words.map { |word| word.reverse }.join(\" \")\n</code></pre>\n\n<p>If you couldn't pass block to map then you'd have to define that function and pass it somewhere - and name that function. That is just not efficient.</p>\n\n<p>Lets change this block to work so that it reverses word only if it starts with capital letter.</p>\n\n<pre><code>words.map do |word| \n  if word[0] =~ /[A-Z]/ \n    word.reverse\n  else\n    word\nend.join(\" \")\n</code></pre>\n\n<p>Without blocks you'd need to define that function, which you do not need in any other places and call that. That's just not efficient.\nThis is what it would look like</p>\n\n<pre><code>def reverse_if_starts_with_capital_letter(word)\n  if word[0] =~ /[A-Z]/ \n    word.reverse\n  else\n    word\n  end\nend\n\n# not sure if this syntax would work, just demonstrates idea\nwords.map(&amp;reverse_if_starts_with_capital_letter)\n</code></pre>\n"}], "owner": {"reputation": 1090, "user_id": 7113209, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10154091942466794/picture?type=large", "display_name": "hancho", "link": "https://stackoverflow.com/users/7113209/hancho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1509, "favorite_count": 0, "accepted_answer_id": 43741733, "answer_count": 1, "score": 2, "last_activity_date": 1493744344, "creation_date": 1493738429, "last_edit_date": 1493740978, "question_id": 43741639, "link": "https://stackoverflow.com/questions/43741639/ruby-why-use-a-block-as-a-parameter", "title": "Ruby - Why use a Block as a parameter?", "body": "<p>I'm having trouble understanding Blocks vs Procs in ruby. I get the basic idea that a proc is a method saved as an object that you can call repeatedly without having to continue writing the same lines of code over and over. </p>\n\n<p>My trouble lies with accepting blocks as parameters in methods. </p>\n\n<p>The homework problem is super simple. </p>\n\n<p>Write a method that accepts a block as a parameter and reverses all the words in a string. </p>\n\n<p>Below is the answer they're looking for. </p>\n\n<pre><code>def reverser(&amp;prc)\n  sentence = prc.call\n  words = sentence.split(\" \")\n  words.map { |word| word.reverse }.join(\" \")\nend\n</code></pre>\n\n<p>I have two questions - </p>\n\n<p>1 <strong>How do you call this method</strong> because if I put</p>\n\n<pre><code>print reverser(\"Hello\") \n</code></pre>\n\n<p>I get an error \"wrong number of arguments (given 1, expected 0)\"</p>\n\n<p><strong>Second, why not just write the following method? What's the benefit of writing a method that takes a block?</strong> </p>\n\n<pre><code>def reverser(string)\n  string.split.map{|x| x.reverse}.join(\" \")\nend \n</code></pre>\n"}, {"tags": ["ruby", "curl", "web-scraping"], "comments": [{"owner": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "edited": false, "score": 1, "creation_date": 1493737738, "post_id": 43741336, "comment_id": 74525673, "body": "Ruby has its own <a href=\"https://ruby-doc.org/stdlib-2.4.1/libdoc/net/http/rdoc/Net/HTTP.html#class-Net::HTTP-label-GET+with+Dynamic+Parameters\" rel=\"nofollow noreferrer\">pretty good library</a> for making http requests \u2013 is there any particular reason you&#39;re using curl?"}, {"owner": {"reputation": 1095, "user_id": 3330034, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/91307dd8f137afec0f0706755e516deb?s=128&d=identicon&r=PG&f=1", "display_name": "rockyraw", "link": "https://stackoverflow.com/users/3330034/rockyraw"}, "reply_to_user": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "edited": false, "score": 0, "creation_date": 1493738430, "post_id": 43741336, "comment_id": 74526174, "body": "I have Centos 6.9 and it doesn&#39;t support The Ruby version that I need to run mechanize gem, so temporarily I will use Curl until upgrade. unless there&#39;s solution that doesn&#39;t require any gems?"}, {"owner": {"reputation": 1095, "user_id": 3330034, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/91307dd8f137afec0f0706755e516deb?s=128&d=identicon&r=PG&f=1", "display_name": "rockyraw", "link": "https://stackoverflow.com/users/3330034/rockyraw"}, "reply_to_user": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "edited": false, "score": 0, "creation_date": 1493738711, "post_id": 43741336, "comment_id": 74526356, "body": "If it is possible please suggest a solution that can achieve the result i need with using ruby code only. I don&#39;t know Ruby at all. nor Curl very much."}, {"owner": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "edited": false, "score": 0, "creation_date": 1493742073, "post_id": 43741336, "comment_id": 74528377, "body": "which version of ruby are you using?"}, {"owner": {"reputation": 1095, "user_id": 3330034, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/91307dd8f137afec0f0706755e516deb?s=128&d=identicon&r=PG&f=1", "display_name": "rockyraw", "link": "https://stackoverflow.com/users/3330034/rockyraw"}, "reply_to_user": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "edited": false, "score": 0, "creation_date": 1493745958, "post_id": 43741336, "comment_id": 74530503, "body": "version is 1.9.3"}], "owner": {"reputation": 1095, "user_id": 3330034, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/91307dd8f137afec0f0706755e516deb?s=128&d=identicon&r=PG&f=1", "display_name": "rockyraw", "link": "https://stackoverflow.com/users/3330034/rockyraw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493737573, "creation_date": 1493737573, "question_id": 43741336, "link": "https://stackoverflow.com/questions/43741336/curl-not-working-when-url-has-parameters", "title": "Curl not working when URL has parameters", "body": "<p>I use <code>Curl</code> inside a <code>Ruby</code> script to scrape this kind of page:</p>\n\n<p><code>https://www.example.com/page.html?a=1&amp;b=2&amp;c=3&amp;d=4</code></p>\n\n<p>Using this code:</p>\n\n<pre><code>value = `curl #{ARGV[0]} | grep \"findMe:\"`\nresult = value.scan(/findMe: (.*)/).flatten.first.split('$').last.gsub(',', '').to_f\nputs result \n</code></pre>\n\n<p>But since that page is using a 301 redirect, it was failing, so I added the <code>-L</code> \nattribute:</p>\n\n<pre><code>value = `curl -L #{ARGV[0]} | grep \"findMe:\"`\nresult = value.scan(/findMe: (.*)/).flatten.first.split('$').last.gsub(',', '').to_f\nputs result \n</code></pre>\n\n<p>It now returns the result fine, but the script doesn't end. on SSH termail it is like asking me about the other parameters, after displaying result. so I must press enter to abort the script.</p>\n\n<p>When I implement this in a web app, the script doesn't work, probably due to this parameter related problem.</p>\n\n<p>Therefore, how I can I tell curl to abort right after displaying the result, or, to ignore any parameters in the given url, in the first place (Since they don't affect page content). So it would auto scrape this part:</p>\n\n<p><code>https://www.example.com/page.html</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 2, "creation_date": 1493735689, "post_id": 43740556, "comment_id": 74524144, "body": "what do you want to achieve?"}], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 0, "last_activity_date": 1493735717, "creation_date": 1493735717, "answer_id": 43740623, "question_id": 43740556, "link": "https://stackoverflow.com/questions/43740556/how-to-translate-this-query-to-use-in-a-model-of-rails/43740623#43740623", "title": "How to translate this query to use in a model of Rails", "body": "<p>I would do something like:</p>\n\n<pre><code>MyModel.pluck(:option).map { |o| o == 1 ? 'YES' : 'No' }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1493736103, "post_id": 43740710, "comment_id": 74524422, "body": "In this case, you can use a hash instead of case statement: <code>{1 =&gt; &#39;Yes&#39;, 0 =&gt; &#39;No&#39;}</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1493736104, "post_id": 43740710, "comment_id": 74524423, "body": "StackLevel issues? <code>option</code> will continually call <code>option</code>"}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1493736124, "post_id": 43740710, "comment_id": 74524440, "body": "@AndreyDeineko That&#39;s a ternary, which I addressed."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1493736186, "post_id": 43740710, "comment_id": 74524481, "body": "@Ilya Not a bad option either. Surely there are many ways to skin a cat."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1493736229, "post_id": 43740710, "comment_id": 74524524, "body": "@engineersmnky Clearly the coffee has not hit this morning, haha. Fixed."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1493736514, "post_id": 43740710, "comment_id": 74524745, "body": "This is a good variant in case if you need other than <code>option</code> fields too. But, if the issue is to select <b>all</b> <code>MyModel</code> instances and to get just 1 column, using <code>pluck</code> is more efficient."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 1, "last_activity_date": 1493736287, "last_edit_date": 1493736287, "creation_date": 1493735974, "answer_id": 43740710, "question_id": 43740556, "link": "https://stackoverflow.com/questions/43740556/how-to-translate-this-query-to-use-in-a-model-of-rails/43740710#43740710", "title": "How to translate this query to use in a model of Rails", "body": "<p>Rather than modifying the data at the database layer, it's easy to create a custom getter on your model that will simplify access to string values for a field:</p>\n\n<pre><code>class MyModel &lt; ApplicationRecord\n  def option\n    case read_attribute(:option)\n    when 1 then 'Yes'\n    when 0 then 'No'\n    end\n  end\nend\n</code></pre>\n\n<p>You could also use a ternary or traditional conditional, but I like using a switch because it's so readily apparent what's going on without <em>any</em> thinking. </p>\n"}, {"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 0, "last_activity_date": 1493736455, "last_edit_date": 1493736455, "creation_date": 1493736103, "answer_id": 43740754, "question_id": 43740556, "link": "https://stackoverflow.com/questions/43740556/how-to-translate-this-query-to-use-in-a-model-of-rails/43740754#43740754", "title": "How to translate this query to use in a model of Rails", "body": "<p>Another alternative is to use <code>select</code>, like this:</p>\n\n<pre><code>MyModel.select(\"IF(option = 1, 'YES', 'No') AS Options\")\n</code></pre>\n\n<p>If you want all model attributes (not just <code>option</code>), add <code>*</code>:</p>\n\n<pre><code>MyModel.select(\"*, IF(option = 1, 'YES', 'No') AS option\")\n</code></pre>\n\n<p>Notice the use of <code>AS option</code> instead of <code>AS Options</code> to keep only one <code>option</code> attribute.</p>\n"}], "owner": {"reputation": 7, "user_id": 7815782, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/59f4ecc1ad5d4c9286745cd1a4faad42?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno Castro", "link": "https://stackoverflow.com/users/7815782/bruno-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1493736455, "creation_date": 1493735547, "question_id": 43740556, "link": "https://stackoverflow.com/questions/43740556/how-to-translate-this-query-to-use-in-a-model-of-rails", "title": "How to translate this query to use in a model of Rails", "body": "<p>I have a column called option with values of 0 and 1.\nI want to format this data using yes/no.</p>\n\n<p>This is my query</p>\n\n<pre><code>SELECT IF(option = 1, 'YES', 'No') AS Options FROM Table1\n</code></pre>\n\n<p>Can I do it using a where clause?</p>\n\n<p>Something like :</p>\n\n<pre><code>MyModel.where(option: 1).format_to_yes\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "redmon"], "comments": [{"owner": {"reputation": 1680, "user_id": 194932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93bba200ad6c7c64e8ec07b44e254ac?s=128&d=identicon&r=PG", "display_name": "Raphael", "link": "https://stackoverflow.com/users/194932/raphael"}, "edited": false, "score": 3, "creation_date": 1493735363, "post_id": 43740343, "comment_id": 74523918, "body": "How did you install sinatra? Did you run a <code>bundle install</code>?"}, {"owner": {"reputation": 1602, "user_id": 4035529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-7wBj8Xkixjk/AAAAAAAAAAI/AAAAAAAAABQ/dtho12m2NmU/photo.jpg?sz=128", "display_name": "nskalis", "link": "https://stackoverflow.com/users/4035529/nskalis"}, "reply_to_user": {"reputation": 1680, "user_id": 194932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93bba200ad6c7c64e8ec07b44e254ac?s=128&d=identicon&r=PG", "display_name": "Raphael", "link": "https://stackoverflow.com/users/194932/raphael"}, "edited": false, "score": 0, "creation_date": 1493750645, "post_id": 43740343, "comment_id": 74532992, "body": "with ansible: the equivalent would be: <code>gem install redmon --no-user-install&#39;</code> how it should be installed ?"}, {"owner": {"reputation": 1680, "user_id": 194932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93bba200ad6c7c64e8ec07b44e254ac?s=128&d=identicon&r=PG", "display_name": "Raphael", "link": "https://stackoverflow.com/users/194932/raphael"}, "edited": false, "score": 0, "creation_date": 1493751892, "post_id": 43740343, "comment_id": 74533743, "body": "You could use the default <code>gem install redmon</code> which will install gems in your GEM_PATH(usually ~/.gem ) or specify it directly with <code>gem install redmon --no-user-install --install-dir $GEM_PATH</code>   then running with <code>GEM_PATH=&lt;path&gt; redmon ...</code>   but before any of this, check your $GEM_PATH"}, {"owner": {"reputation": 1602, "user_id": 4035529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-7wBj8Xkixjk/AAAAAAAAAAI/AAAAAAAAABQ/dtho12m2NmU/photo.jpg?sz=128", "display_name": "nskalis", "link": "https://stackoverflow.com/users/4035529/nskalis"}, "reply_to_user": {"reputation": 1680, "user_id": 194932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93bba200ad6c7c64e8ec07b44e254ac?s=128&d=identicon&r=PG", "display_name": "Raphael", "link": "https://stackoverflow.com/users/194932/raphael"}, "edited": false, "score": 0, "creation_date": 1493753145, "post_id": 43740343, "comment_id": 74534370, "body": "thanks a lot @Raphael <code>$ echo $GEM_PATH</code> is empty, am sorry but I am not familiar with ruby, how i can properly set the GEM_PATH since redmon was installed with <code>gem install redmon --no-user-install</code> ?"}, {"owner": {"reputation": 1680, "user_id": 194932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c93bba200ad6c7c64e8ec07b44e254ac?s=128&d=identicon&r=PG", "display_name": "Raphael", "link": "https://stackoverflow.com/users/194932/raphael"}, "edited": false, "score": 0, "creation_date": 1493758144, "post_id": 43740343, "comment_id": 74537006, "body": "You cat set it by running <code>export GEM_PATH=&#47;path</code>. I suspect running --no-user-install without a GEM-PATh set will install the gems in the current folder."}], "owner": {"reputation": 1602, "user_id": 4035529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-7wBj8Xkixjk/AAAAAAAAAAI/AAAAAAAAABQ/dtho12m2NmU/photo.jpg?sz=128", "display_name": "nskalis", "link": "https://stackoverflow.com/users/4035529/nskalis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493735025, "creation_date": 1493735025, "question_id": 43740343, "link": "https://stackoverflow.com/questions/43740343/ruby-cannot-find-sinatra", "title": "ruby: cannot find sinatra", "body": "<p>I am trying to use an app (redmon: <a href=\"https://github.com/steelThread/redmon\" rel=\"nofollow noreferrer\">https://github.com/steelThread/redmon</a>) packaged in a ruby gem\nCould you please help me getting it up and running ?</p>\n\n<p>I have installed redmon like this:</p>\n\n<pre><code>tasks:\n\n      - name: \"Install redmon (redis)\"\n        tags:\n          - redis\n        become: yes\n        gem: name=\"{{ item }}\" user_install=no state=latest\n        with_items:\n          - redmon\n        environment:\n          http_proxy: \"{{ prx.http }}\"\n          https_proxy: \"{{ prx.https }}\"\n\n      - name: \"Update Ruby gems (redis)\"\n        tags:\n          - redis\n        become: yes\n        command: gem update --system\n        environment:\n          http_proxy: \"{{ prx.http }}\"\n          https_proxy: \"{{ prx.https }}\"\n</code></pre>\n\n<p>But when I try to connect to local redis instance, I am getting the following error:</p>\n\n<pre><code>$ redmon --port 16384 --lifespan 60 --redis redis://127.0.0.1:6384\n/usr/local/share/ruby/site_ruby/rubygems/dependency.rb:308:in `to_specs': Could not find 'sinatra' (&gt;= 0) among 16 total gem(s) (Gem::MissingSpecError)\nChecked in 'GEM_PATH=/home/app/.gem/ruby:/usr/share/gems:/usr/local/share/gems', execute `gem env` for more information\n    from /usr/local/share/ruby/site_ruby/rubygems/specification.rb:1439:in `block in activate_dependencies'\n    from /usr/local/share/ruby/site_ruby/rubygems/specification.rb:1428:in `each'\n    from /usr/local/share/ruby/site_ruby/rubygems/specification.rb:1428:in `activate_dependencies'\n    from /usr/local/share/ruby/site_ruby/rubygems/specification.rb:1410:in `activate'\n    from /usr/local/share/ruby/site_ruby/rubygems/core_ext/kernel_gem.rb:68:in `block in gem'\n    from /usr/local/share/ruby/site_ruby/rubygems/core_ext/kernel_gem.rb:67:in `synchronize'\n    from /usr/local/share/ruby/site_ruby/rubygems/core_ext/kernel_gem.rb:67:in `gem'\n    from /usr/local/bin/redmon:22:in `&lt;main&gt;'\n$ gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.6.11\n  - RUBY VERSION: 2.0.0 (2015-12-16 patchlevel 648) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /home/app/.gem/ruby\n  - USER INSTALLATION DIRECTORY: /home/app/.gem/ruby\n  - RUBY EXECUTABLE: /usr/bin/ruby\n  - EXECUTABLE DIRECTORY: /home/app/bin\n  - SPEC CACHE DIRECTORY: /home/app/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /home/app/.gem/ruby\n     - /usr/share/gems\n     - /usr/local/share/gems\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/bin\n     - /usr/bin\n     - /usr/local/sbin\n     - /usr/sbin\n     - /home/app/.local/bin\n     - /home/app/bin\n</code></pre>\n\n<p>Would you be so kind to help me and advise me please how to resolve this ?</p>\n"}, {"tags": ["ruby", "rspec", "automation", "capybara", "browser-automation"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1493741028, "post_id": 43740307, "comment_id": 74527830, "body": "Maintain what session?  If you haven&#39;t yet logged into google you would have to login."}, {"owner": {"reputation": 1, "user_id": 3921669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe6de0737c5d61660777f6910b3da41?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/3921669/rohit"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1493753961, "post_id": 43740307, "comment_id": 74534779, "body": "Thomas, i have already logged in, but when my script click on gmail drive icon and new tab gets opened.When i try to perform any operation on drive like Creating a folder etc, it says you need to sign in whereas i have already logged in"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1493754254, "post_id": 43740307, "comment_id": 74534924, "body": "Already logged in during this test/automation session, or you&#39;ve logged in manually in the browser and are expecting that session to be there during the automation session?  Maybe you need to show move of your code where it logs in, and define what gen_wait_more/less are doing"}], "owner": {"reputation": 1, "user_id": 3921669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe6de0737c5d61660777f6910b3da41?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/3921669/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493734937, "creation_date": 1493734937, "question_id": 43740307, "link": "https://stackoverflow.com/questions/43740307/how-to-maintain-gmail-session-when-we-switch-to-google-drive-using-capybara", "title": "How to maintain gmail session when we switch to google drive using capybara", "body": "<p>Via automation using rspec and capybara I want to create a new folder name as 'xyz' on to the google drive but when i switch to drive and click on 'new' button, it shows that 'your are not signed in'.\nHow i could maintain the session or how should i use switch to new window function properly.</p>\n\n<p>My code is :</p>\n\n<pre><code>def drive_management\n\n    find(:xpath, gmail_google_app).click\n    gen_wait_less\n    find(:xpath, $gmail_drive_link).click\n    gen_wait_more\n    login_window = window_opened_by do\n      click_button $gmail_drive_link\n    end\n   within_window(login_window) do\n     find(:xpath, $gmail_new_button).click\n     gen_wait_more\n     find(:xpath, $gmail_new_folder).click\n     gen_wait_more\n   end\n</code></pre>\n"}]