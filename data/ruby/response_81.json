[{"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 4226230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6edce9b551283e19d0a419f1303eb84?s=128&d=identicon&r=PG&f=1", "display_name": "wuworkshop", "link": "https://stackoverflow.com/users/4226230/wuworkshop"}, "is_accepted": false, "score": 1, "last_activity_date": 1469663784, "creation_date": 1469663784, "answer_id": 38625034, "question_id": 38624942, "link": "https://stackoverflow.com/questions/38624942/how-to-delete-existing-directory-ruby-installfest-creating-app/38625034#38625034", "title": "How to delete existing directory - RUBY installfest creating app", "body": "<p>If your <code>railsbridge</code> folder isn't empty, then <code>rmdir</code> isn't going to work. Instead, you can try <code>rm -rf railsbridge</code> to force removing directories and their contents recursively.</p>\n\n<p>References:</p>\n\n<p><code>rmdir</code> - <a href=\"http://explainshell.com/explain?cmd=rmdir\" rel=\"nofollow\">http://explainshell.com/explain?cmd=rmdir</a></p>\n\n<p><code>rm -rf</code> - <a href=\"http://explainshell.com/explain?cmd=rm+-rf\" rel=\"nofollow\">http://explainshell.com/explain?cmd=rm+-rf</a></p>\n"}], "owner": {"reputation": 1, "user_id": 6647165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936e5971958535a525fe3ce50ced1d79?s=128&d=identicon&r=PG&f=1", "display_name": "KanyeQuest", "link": "https://stackoverflow.com/users/6647165/kanyequest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469666306, "creation_date": 1469663160, "last_edit_date": 1469666306, "question_id": 38624942, "link": "https://stackoverflow.com/questions/38624942/how-to-delete-existing-directory-ruby-installfest-creating-app", "title": "How to delete existing directory - RUBY installfest creating app", "body": "<p>Starting out with <em>Ruby on Rails Installfest</em> where it has me create and deploy an app. Ran into an issue when trying to deploy the app so wanted to go back and start over, however when prompted to create directory: </p>\n\n<pre><code>mkdir railsbridge\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>mkdir: railsbridge: File exists\n</code></pre>\n\n<p>How can I remove this existing directory to start over completely?</p>\n"}, {"tags": ["java", "ruby", "multithreading", "jruby"], "answers": [{"tags": [], "owner": {"reputation": 6788, "user_id": 454312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jNMNF.jpg?s=128&g=1", "display_name": "kares", "link": "https://stackoverflow.com/users/454312/kares"}, "is_accepted": false, "score": 0, "last_activity_date": 1469704844, "creation_date": 1469704844, "answer_id": 38634882, "question_id": 38624493, "link": "https://stackoverflow.com/questions/38624493/jruby-does-enabling-jruby-thread-pool-enabled-means-that-multiple-ruby-threads/38634882#38634882", "title": "jruby: does enabling jruby.thread.pool.enabled means that multiple ruby threads will share same java thread", "body": "<p>yes the Java thread might get re-used to serve multipe Ruby threads.</p>\n\n<p><strong>but not at the same time</strong> ... Ruby threads shouldn't notice anything except if they use \"native\" Java thread-locals.</p>\n\n<p>I am not sure it's still supported in JRuby 9K.\neven on JRuby 1.7 it might not have much sense for typical Rails apps.</p>\n"}], "owner": {"reputation": 479, "user_id": 2196351, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/edd822a7c700fb6c489290d83599f021?s=128&d=identicon&r=PG&f=1", "display_name": "user2196351", "link": "https://stackoverflow.com/users/2196351/user2196351"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469704844, "creation_date": 1469660063, "question_id": 38624493, "link": "https://stackoverflow.com/questions/38624493/jruby-does-enabling-jruby-thread-pool-enabled-means-that-multiple-ruby-threads", "title": "jruby: does enabling jruby.thread.pool.enabled means that multiple ruby threads will share same java thread", "body": "<p>We are playing with jruby and option <code>jruby.thread.pool.enabled</code>\nIt that option is enabled and j<code>ruby.thread.pool.max</code> is set to a small value, does if  mean that multiple ruby threads will share the same java thread?</p>\n\n<p>In short does enabling <code>jruby.thread.pool.enabled</code> means that two or jruby threads might be executed by same java thread?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5931828, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/5b2a4c96f15fa14ee2b0db09664aeeea?s=128&d=identicon&r=PG&f=1", "display_name": "stanley wendo", "link": "https://stackoverflow.com/users/5931828/stanley-wendo"}, "edited": false, "score": 0, "creation_date": 1469660837, "post_id": 38624465, "comment_id": 64634738, "body": "i&#39;ve added it my application css,will change it, to see what happens"}, {"owner": {"reputation": 186, "user_id": 6645678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MuJd.png?s=128&g=1", "display_name": "Carlos Orellana", "link": "https://stackoverflow.com/users/6645678/carlos-orellana"}, "reply_to_user": {"reputation": 55, "user_id": 5931828, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/5b2a4c96f15fa14ee2b0db09664aeeea?s=128&d=identicon&r=PG&f=1", "display_name": "stanley wendo", "link": "https://stackoverflow.com/users/5931828/stanley-wendo"}, "edited": false, "score": 0, "creation_date": 1469661447, "post_id": 38624465, "comment_id": 64634854, "body": "Should solve your issue. Sometimes you need to restart the server. But according to your code, wasn&#39;t any reference to bootstrap in your css.   Hope it works fine."}], "tags": [], "owner": {"reputation": 186, "user_id": 6645678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MuJd.png?s=128&g=1", "display_name": "Carlos Orellana", "link": "https://stackoverflow.com/users/6645678/carlos-orellana"}, "is_accepted": false, "score": 2, "last_activity_date": 1469727966, "last_edit_date": 1469727966, "creation_date": 1469659871, "answer_id": 38624465, "question_id": 38624397, "link": "https://stackoverflow.com/questions/38624397/bootstrap-not-working-on-rails-4/38624465#38624465", "title": "Bootstrap not working on rails 4", "body": "<p>You need to add the boostrap in your application.scss too.</p>\n\n<p>Just follow the documentaion: <a href=\"https://github.com/twbs/bootstrap-sass#installation\" rel=\"nofollow\">https://github.com/twbs/bootstrap-sass#installation</a></p>\n\n<pre><code>@import \"bootstrap-sprockets\";\n\n@import \"bootstrap\";\n</code></pre>\n\n<p>Note: rename your application.css to <code>application.scss</code></p>\n"}], "owner": {"reputation": 55, "user_id": 5931828, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/5b2a4c96f15fa14ee2b0db09664aeeea?s=128&d=identicon&r=PG&f=1", "display_name": "stanley wendo", "link": "https://stackoverflow.com/users/5931828/stanley-wendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1469731247, "creation_date": 1469659463, "last_edit_date": 1469731247, "question_id": 38624397, "link": "https://stackoverflow.com/questions/38624397/bootstrap-not-working-on-rails-4", "title": "Bootstrap not working on rails 4", "body": "<p>I'm having problems with my app, I can't see any bootstraps effects on my rails app it looks the same. I have done bundle install, but I can't see any difference in it. This is my first time using bootstrap.</p>\n\n<p>Here is my gem file:</p>\n\n<pre><code> source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.5.1'\ngem 'bootstrap-sass', '~&gt; 3.3.6'\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  gem 'sqlite3'\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n\ngroup :production do\n  gem 'pg'\n  gem 'rails_12factor'\n</code></pre>\n\n<p>And my application js:</p>\n\n<pre><code>// This is a manifest file that'll be compiled into application.js, which will include all the files\n// listed below.\n//\n// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,\n// or any plugin's vendor/assets/javascripts directory can be referenced here using a relative path.\n//\n// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\n// compiled file.\n//\n// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details\n// about supported directives.\n//\n//= require jquery\n//= require jquery_ujs\n//= require bootstrap-sprockets\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>And my application css:</p>\n\n<pre><code> /* This is a manifest file that'll be compiled into application.css, which will include all the files\n * listed below.\n *\n * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,\n * or any plugin's vendor/assets/stylesheets directory can be referenced here using a relative path.\n *\n * You're free to add application-wide styles to this file and they'll appear at the bottom of the\n * compiled file so the styles you add here take precedence over styles defined in any styles\n * defined in the other CSS/SCSS files in this directory. It is generally better to create a new\n * file per style scope.\n *\n *= require_tree .\n *= require_self\n\n */\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 2, "creation_date": 1469658796, "post_id": 38624244, "comment_id": 64634126, "body": "You defined <code>before_or_after</code> that takes no arguments, but you gave it 6 arguments when calling it."}, {"owner": {"reputation": 653, "user_id": 3066507, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e37c92881ade3eb68391b56514a4cdab?s=128&d=identicon&r=PG&f=1", "display_name": "sivanes", "link": "https://stackoverflow.com/users/3066507/sivanes"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1469659008, "post_id": 38624244, "comment_id": 64634214, "body": "moved further down to <code>in &#39;before_or_after&#39;: undefined local variable or method &#39;datetime&#39; for #&lt;BoA:0x007fa41a9cb6a0&gt; (NameError)</code>"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1469659126, "post_id": 38624244, "comment_id": 64634262, "body": "What is <code>datetime</code>? A local variable? An instance method? Have you defined it?"}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 2, "creation_date": 1469659170, "post_id": 38624244, "comment_id": 64634281, "body": "You&#39;re supposed to define #before_or_after like this: <code>def before_or_after(datetime)</code> and call it afterwards like this: <code>b.before_or_after(DateTime.new(2016, 04, 06, 03, 01, 00))</code>"}, {"owner": {"reputation": 653, "user_id": 3066507, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e37c92881ade3eb68391b56514a4cdab?s=128&d=identicon&r=PG&f=1", "display_name": "sivanes", "link": "https://stackoverflow.com/users/3066507/sivanes"}, "reply_to_user": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1469661724, "post_id": 38624244, "comment_id": 64634914, "body": "@AlexandreAngelim thank you! and how can I get the <code>past</code> array to print? I get the undefined method error when trying b.past"}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 1, "creation_date": 1469661927, "post_id": 38624244, "comment_id": 64634962, "body": "@sivanes @past is a instance variable not exposed to the outside world. You must define a getter in order to be able retrieve it. <code>att_reader :past</code> will generate a getter for you."}, {"owner": {"reputation": 653, "user_id": 3066507, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e37c92881ade3eb68391b56514a4cdab?s=128&d=identicon&r=PG&f=1", "display_name": "sivanes", "link": "https://stackoverflow.com/users/3066507/sivanes"}, "reply_to_user": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1469662472, "post_id": 38624244, "comment_id": 64635098, "body": "@AlexandreAngelim perfect! been a few months since writing Ruby, it&#39;s starting to come back now."}], "owner": {"reputation": 653, "user_id": 3066507, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e37c92881ade3eb68391b56514a4cdab?s=128&d=identicon&r=PG&f=1", "display_name": "sivanes", "link": "https://stackoverflow.com/users/3066507/sivanes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469661654, "creation_date": 1469658583, "last_edit_date": 1469661654, "question_id": 38624244, "link": "https://stackoverflow.com/questions/38624244/passing-arguments-to-included-modules-method", "title": "passing arguments to included module&#39;s method", "body": "<p>want to integrate this module into my Rails app for separating event items in the view based on the past/present test, but first want to understand how it's supposed to work. I looked through related threads on here and Well-Grounded Rubyist chapter on modules and didn't find a definitive answer on how to do this. here are my doodles:</p>\n\n<pre><code>module BeforeOrAfter\n  require \"date\"\n  def initialize\n    @datetime = DateTime.new\n    @past = []\n    @future = []\n  end\n\n  def before_or_after\n    if datetime &lt; DateTime.now\n      @past &lt;&lt; datetime\n    else\n      @future &lt;&lt; datetime\n    end\n  end\nend\n\nclass BoA\n  include BeforeOrAfter\nend\n\nb = BoA.new\nb.before_or_after(2016, 04, 06, 03, 01, 00)\n\nprint b.past\n</code></pre>\n\n<p>the error that I get is <code>in</code>before_or_after': wrong number of arguments (6 for 0) (ArgumentError)`</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "edited": false, "score": 0, "creation_date": 1469658792, "post_id": 38624186, "comment_id": 64634123, "body": "Can you update your question with all the code from the <code>create</code> method and any private methods you use in this method?"}, {"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "edited": false, "score": 0, "creation_date": 1469659627, "post_id": 38624186, "comment_id": 64634410, "body": "Can you update your question with the test code?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "edited": false, "score": 0, "creation_date": 1469659809, "post_id": 38624186, "comment_id": 64634469, "body": "There&#39;s no test code. I mean a test booking with Stripe."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469660279, "post_id": 38624186, "comment_id": 64634602, "body": "The error shows you have an error with a call to the <code>BookingsController#create</code> method, but nowhere in your code shown do you call this. How is this occurring? It is just when you hit the create route from a browser? Or are you calling <code>BookingsController.new</code> somewhere (which is not part of the typical Rails workflow)?"}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 1, "creation_date": 1469666430, "post_id": 38624186, "comment_id": 64635979, "body": "Try dropping the <code>&amp;</code> on <code>@event.bookings.sum(&amp;:quantity)</code>. #sum is a method for an ActiveRecord Relation that expects a symbol or string representing a field."}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1469696780, "post_id": 38624555, "comment_id": 64647264, "body": "Hi, having introduced the above method into my model I&#39;m now getting the following error &#39;nil can&#39;t be coerced into Fixnum&#39;. How can I fix this?"}, {"owner": {"reputation": 381, "user_id": 636192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35c776d725c136c70aa7d82599d44bd2?s=128&d=identicon&r=PG", "display_name": "australis", "link": "https://stackoverflow.com/users/636192/australis"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1469720850, "post_id": 38624555, "comment_id": 64665297, "body": "Is the error on the same line? I would check to make sure than none of your bookings have a nil quantity (and perhaps that none of your events have a nil number_of_spaces). If that was the problem, make sure you have validations in the model for those fields."}], "tags": [], "owner": {"reputation": 381, "user_id": 636192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35c776d725c136c70aa7d82599d44bd2?s=128&d=identicon&r=PG", "display_name": "australis", "link": "https://stackoverflow.com/users/636192/australis"}, "is_accepted": false, "score": 0, "last_activity_date": 1469661895, "last_edit_date": 1469661895, "creation_date": 1469660459, "answer_id": 38624555, "question_id": 38624186, "link": "https://stackoverflow.com/questions/38624186/rails-argumenterror-in-bookingscontrollercreate-wrong-number-of-arguments-gi/38624555#38624555", "title": "Rails - ArgumentError in BookingsController#create wrong number of arguments (given 1, expected 2..3)", "body": "<p>The issue is this:</p>\n\n<pre><code>@event.bookings.sum(&amp;:quantity)\n</code></pre>\n\n<p>I suppose that you are trying to determine the total quantity of the bookings for a particular event?</p>\n\n<p>A nice way to do that is:</p>\n\n<pre><code>@event.bookings.reduce(0) { |i, b| i + b.quantity }\n</code></pre>\n\n<p>And of course, this should be a method in the Event model, rather than be in the controller:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n\n  ...\n\n  def total_bookings\n    self.bookings.reduce(0) { |i, b| i + b.quantity }\n  end\nend\n</code></pre>\n\n<p>And then the line in your controller becomes</p>\n\n<pre><code>if ( @event.total_bookings + @booking.quantity ) &gt; @event.number_of_spaces\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469661895, "creation_date": 1469658318, "last_edit_date": 1469659064, "question_id": 38624186, "link": "https://stackoverflow.com/questions/38624186/rails-argumenterror-in-bookingscontrollercreate-wrong-number-of-arguments-gi", "title": "Rails - ArgumentError in BookingsController#create wrong number of arguments (given 1, expected 2..3)", "body": "<p>I'm really struggling with the above error on my Rails app. It highlights the Bookings Controller and in particular this part of the 'create' action -</p>\n\n<pre><code>if ( @event.bookings.sum(&amp;:quantity) + @booking.quantity ) &gt; @event.number_of_spaces\n        flash[:warning] = \"Sorry, this event is fully booked.\"\n        redirect_to event_path(@event)\n    end\n</code></pre>\n\n<p>Here's the full Controller code -</p>\n\n<p>bookings_controller.rb </p>\n\n<pre><code>class BookingsController &lt; ApplicationController\n\nbefore_action :authenticate_user!\n\ndef new\n    # booking form\n    # I need to find the event that we're making a booking on\n    @event = Event.find(params[:event_id])\n    # and because the event \"has_many :bookings\"\n    @booking = @event.bookings.new\n    # which person is booking the event?\n    @booking.user = current_user\n    @booking.quantity = @booking.quantity\n    @total_amount = @booking_quantity.to_f * @event_price.to_f\n\nend\n\ndef create\n        # actually process the booking\n        @event = Event.find(params[:event_id])\n        @booking = @event.bookings.new(booking_params)\n        @booking.user = current_user\n        #@total_amount = @booking.quantity.to_f * @event.price.to_f\n\n    if ( @event.bookings.sum(&amp;:quantity) + @booking.quantity ) &gt; @event.number_of_spaces\n        flash[:warning] = \"Sorry, this event is fully booked.\"\n        redirect_to event_path(@event)\n    end\n\n    if @booking.save\n        if @event.is_free?\n        flash[:success] = \"Your place on our event has been booked\"\n        redirect_to event_path(@event)\n    else\n        begin\n            # CHARGE THE USER WHO'S BOOKED\n            Stripe::Charge.create(\n                amount: @event.price_pennies,\n                currency: \"gbp\",\n                source: @booking.stripe_token,\n                description: \"Booking number #{@booking.id}\"\n            )\n\n            flash[:success] = \"Your place on our event has been booked\"\n            redirect_to event_path(@event)\n        rescue =&gt; e\n            @booking.destroy  # delete the entry we have just created\n            flash[:error] = \"Payment unsuccessful\"\n            render \"new\"\n        end\n     end\n  end\nend\n\n\nprivate\n\ndef booking_params\n    params.require(:booking).permit(:stripe_token, :quantity)\nend\n\n\n\nend\n</code></pre>\n\n<p>The error pops up when I'm attempting to complete a test booking. </p>\n"}, {"tags": ["ruby", "unit-testing", "rspec", "mocking"], "comments": [{"owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "edited": false, "score": 0, "creation_date": 1470362128, "post_id": 38624155, "comment_id": 64931148, "body": "Did you find a solution?"}, {"owner": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "reply_to_user": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "edited": false, "score": 0, "creation_date": 1470394383, "post_id": 38624155, "comment_id": 64944929, "body": "@PaulFioravanti Thank you for the answer you&#39;ve provided. But it seems to me that there is no solution yet. I&#39;m adding a clarification to the question."}], "answers": [{"comments": [{"owner": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "edited": false, "score": 0, "creation_date": 1469704757, "post_id": 38632556, "comment_id": 64652805, "body": "Thank you for your answer. I&#39;ve rephrased the question and added examples."}, {"owner": {"reputation": 73, "user_id": 417249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7026b0a9da53e27cd3b81154ba4c457?s=128&d=identicon&r=PG", "display_name": "stephenlloyd", "link": "https://stackoverflow.com/users/417249/stephenlloyd"}, "reply_to_user": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "edited": false, "score": 0, "creation_date": 1469710449, "post_id": 38632556, "comment_id": 64656925, "body": "Ok, I&#39;ll modify my answer :P"}], "tags": [], "owner": {"reputation": 73, "user_id": 417249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7026b0a9da53e27cd3b81154ba4c457?s=128&d=identicon&r=PG", "display_name": "stephenlloyd", "link": "https://stackoverflow.com/users/417249/stephenlloyd"}, "is_accepted": false, "score": 0, "last_activity_date": 1469710930, "last_edit_date": 1469710930, "creation_date": 1469698610, "answer_id": 38632556, "question_id": 38624155, "link": "https://stackoverflow.com/questions/38624155/mocking-select-with-expectations-in-rspec-unit-test/38632556#38632556", "title": "Mocking select with expectations in rspec unit test", "body": "<p>I'm not 100% sure what you're trying to achieve but I would look into using Factory girl and in particular Factory girls create_list. modifying the one to be bad. <a href=\"https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md\" rel=\"nofollow\">https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md</a>\nand if you really wanted can expect each one to have :good? called on it. \nIt might be nicer just to ensure your list at the end only has good ones in it. \nGiving a real world example of what your doing might help but I think creating a factory girl list will satisfy at least one of your issues. </p>\n\n<p>Modified: </p>\n\n<pre><code>let(:duck){double :duck}\ndescribe Filters, '#good' do\n  it 'returns only good ones' do\n    ducks = [duck, duck, duck]\n    expect(ducks).to receive(:good).exactly(3).times\n    Filters.good(ducks)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "edited": false, "score": 0, "creation_date": 1470393828, "post_id": 38658459, "comment_id": 64944547, "body": "But this would give a false positive for the implementation: <code>[ducks.first]</code>, which would again suggest the need to test multiple cases."}, {"owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "reply_to_user": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "edited": false, "score": 0, "creation_date": 1470394882, "post_id": 38658459, "comment_id": 64945242, "body": "@chris Sorry, I don&#39;t understand what you mean by &quot;a false positive for the implementation: <code>[ducks.first]</code>&quot;.  Where does an array with the first element of a collection play into this?"}, {"owner": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "edited": false, "score": 0, "creation_date": 1470395245, "post_id": 38658459, "comment_id": 64945470, "body": "The test passes (incorrectly) if the implementation of <code>Filters.good(ducks)</code> is <code>[ducks.first]</code>."}, {"owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "reply_to_user": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "edited": false, "score": 0, "creation_date": 1470395487, "post_id": 38658459, "comment_id": 64945631, "body": "Aren&#39;t you then completely changing the method implementation and hence would need a completely different test?  The current implementation of <code>Filters.good(ducks)</code> is the return value of <code>ducks.select(&amp;:good?)</code>, but you want to change the implementation to the return value of <code>[ducks.first]</code>?  Sorry, I still don&#39;t get it..."}, {"owner": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "edited": false, "score": 0, "creation_date": 1470395917, "post_id": 38658459, "comment_id": 64945961, "body": "The intent of a test is to increase the likelihood that the implementation of a method is not changed to something that does not adhere to the specification. If the method does not adhere to the spec then we should see a failing test. The specification in this case (sorry for not being clear) is that an array of only the ducks that respond <code>true</code> to the message <code>good?</code> should be returned. With the test above we would not get a failing test if the implementation was changed to the incorrect implementation <code>def good(ducks); [ducks.first]; end</code>."}, {"owner": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "edited": false, "score": 0, "creation_date": 1470396038, "post_id": 38658459, "comment_id": 64946037, "body": "My argument is that, using a mockist approach I should be able to get closer to &quot;verifying&quot; (as in verification rather than testing) that the method behaves accordingly, as opposed to a classicist approach that would test (as in testing rather than verification) a few well-selected cases."}, {"owner": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "edited": false, "score": 0, "creation_date": 1470396401, "post_id": 38658459, "comment_id": 64946280, "body": "But I can&#39;t figure out how to syntactically do the mockist style testing in Ruby. If functions were first-class it would be trivial. But the only OO solution I can think of involves creating another class but I&#39;m asking since I&#39;m hoping I&#39;m overlooking some other solution :)"}], "tags": [], "owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "is_accepted": false, "score": 0, "last_activity_date": 1469794625, "last_edit_date": 1469794625, "creation_date": 1469794075, "answer_id": 38658459, "question_id": 38624155, "link": "https://stackoverflow.com/questions/38624155/mocking-select-with-expectations-in-rspec-unit-test/38658459#38658459", "title": "Mocking select with expectations in rspec unit test", "body": "<p>Since the method under test does filtering, I think you can get a succinct single unit test written without any need for stubbing any code in the method (aside from the response of <code>good?</code> by any element of the collection that gets passed in) by testing for the inclusion (or lack thereof) of an object in your result set:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Filters\n  def self.good(ducks)\n    ducks.select(&amp;:good?)\n  end\nend\n\nRSpec.describe Filters do\n  describe '.good' do\n    let(:good_duck) { double(:good, good?: true) }\n    let(:bad_duck) { double(:bad, good?: false) }\n    let(:ducks) { [good_duck, bad_duck] }\n    let(:good) { described_class.good(ducks) }\n\n    it 'returns only good ducks' do\n      expect(good).to include(good_duck)\n      expect(good).not_to include(bad_duck)\n    end\n  end\nend\n</code></pre>\n\n<p>The spec doesn't care how many good or bad ducks are in the collection that is passed to the <code>Filters.good</code> method: it only cares that any object that responds to <code>good?</code> with <code>true</code> is in the result set, and any object that responds with <code>false</code> is not, eliminating the need for the <code>context</code> blocks outlined in the question, except perhaps for the <code>context</code> that tests an empty array.</p>\n"}], "owner": {"reputation": 2232, "user_id": 989689, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/510dcb5c151bddddab2e5f0c36f1dffb?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/989689/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1470395081, "creation_date": 1469658113, "last_edit_date": 1470395081, "question_id": 38624155, "link": "https://stackoverflow.com/questions/38624155/mocking-select-with-expectations-in-rspec-unit-test", "title": "Mocking select with expectations in rspec unit test", "body": "<p>Please do correct me if I'm phrasing the question poorly.</p>\n\n<p>Assume the following code:</p>\n\n<pre><code>class Filters\n  def self.good ducks\n    ducks.select(&amp;:good?)\n  end\nend\n</code></pre>\n\n<p>It is of course possible to test the method like this:</p>\n\n<pre><code>describe Filters, '#good' do\n  let(:good) { double(:good, good?: true) }\n  let(:bad)  { double(:bad, good?: false) }\n\n  subject { Filters.good(ducks) }\n\n  context 'none' do\n    let(:ducks) { [] }\n    it { is_expected.to eq [] }\n  end\n\n  context 'one good' do\n    let(:ducks) { [good] }\n    it { is_expected.to eq [good] }\n  end\n\n  context 'one bad' do\n    let(:ducks) { [bad] }\n    it { is_expected.to eq [] }\n  end\n\n  context 'one good and one bad' do\n    let(:ducks) { [good, bad] }\n    it { is_expected.to eq [good] }\n  end\n\n  context 'some good and some bad' do\n    let(:ducks) { [good, bad, bad, good, bad, good] }\n    it { is_expected.to eq [good, good, good] }\n  end\nend\n</code></pre>\n\n<p>But enumerating all of the cases (of course not actually all but none/one/some/many for combinations of true/false <code>good</code> states) makes me feel that I am in fact not <em>unit</em> testing the method but <em>integration</em> testing it since I'm letting knowledge of the behavior of <code>select</code> \"leak\" into my <code>good</code> method causing the number of test cases to multiply. In some sense my test cases are testing the behaviour of the <code>select</code> method.</p>\n\n<p>To me it seems more appropriate to instead use mocking and check (as in checking rather than testing) that the method delegates correctly. As one could do if one was integrating with a function written by oneself. Something similar to how we e.g. can say <code>expect(obj).to receive(:foo).with(:bar)</code>.</p>\n\n<p>The example below doesn't work but I believe it conveys the idea of what I want to do instead of enumerating all cases. </p>\n\n<pre><code>describe Filters, '#good' do\n  it 'returns only good ones' do\n    ducks = double(:ducks)\n    expect(ducks).to receive(:filter).with(:good?).and_return(:filtered)\n    expect(Filters.good(ducks).to eq )\n  end\nend\n</code></pre>\n\n<p>The example may seem to trivial so to avoid arguments saying that it is a useless method and that the user of <code>Filter.good</code> simply should use <code>select</code> directly, please consider the fact that moving the <code>select</code>-statement only moves the need for the test to another location.</p>\n\n<p>Am I misunderstanding or overlooking something fundamental here?</p>\n\n<p>Ps 1. I'm ignoring some test cases for brevity.</p>\n\n<p>Ps 2. the short version of the reason I'm emphasizing the need to <em>unit</em> and not <em>integration</em> test is this video: <a href=\"https://www.youtube.com/watch?v=VDfX44fZoMc\" rel=\"nofollow\">https://www.youtube.com/watch?v=VDfX44fZoMc</a></p>\n\n<p>EDIT:\nA better way to phrase this question would perhaps be: The first test is an example of the gist of how a <em>classicist</em> would test <code>Filters.good</code>, but how would a <em>mockist</em> test it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "controller"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469658325, "post_id": 38624156, "comment_id": 64633971, "body": "That didn&#39;t work. It threw a different error: undefined local variable or method `subject_params&#39; for #&lt;SpecialsController:0x0000000c174178&gt;"}, {"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "reply_to_user": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 1, "creation_date": 1469658474, "post_id": 38624156, "comment_id": 64634017, "body": "Either <code>subject_params</code> should be <code>special_params</code> or you did not define a <code>subject_params</code> method for your <code>SpecialsController</code>. Can you update your answer with the full code from your <code>SpecialsController</code>?"}, {"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469658750, "post_id": 38624156, "comment_id": 64634108, "body": "I added the code. I changed the special_params, but it didn&#39;t work out."}, {"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "reply_to_user": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469658980, "post_id": 38624156, "comment_id": 64634201, "body": "What&#39;s the error message now? Did you change the <code>form_for</code> as well?"}, {"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469659009, "post_id": 38624156, "comment_id": 64634216, "body": "Could there be a mix up between the specials in the pages controller and the specials controller?"}, {"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469659021, "post_id": 38624156, "comment_id": 64634220, "body": "It&#39;s the same one."}, {"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "reply_to_user": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469659209, "post_id": 38624156, "comment_id": 64634294, "body": "Can you post your routes file and the current error message?"}, {"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469659246, "post_id": 38624156, "comment_id": 64634307, "body": "I forgot to try the form_for"}, {"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469659530, "post_id": 38624156, "comment_id": 64634381, "body": "Is this a rails 5 thing?"}, {"owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 0, "creation_date": 1469659749, "post_id": 38624156, "comment_id": 64634449, "body": "What if I want to delete the special?"}, {"owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "reply_to_user": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "edited": false, "score": 1, "creation_date": 1469660113, "post_id": 38624156, "comment_id": 64634553, "body": "For more information take a look at Rails Tutorial <a href=\"https://www.railstutorial.org/book/updating_and_deleting_users#sec-deleting_users\" rel=\"nofollow noreferrer\">Ch 10: Updating and Deleting Users</a> and <a href=\"https://www.railstutorial.org/book/user_microposts#sec-destroying_microposts\" rel=\"nofollow noreferrer\">Ch 13: User Microposts</a>"}], "tags": [], "owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "is_accepted": true, "score": 1, "last_activity_date": 1469658335, "last_edit_date": 1469658335, "creation_date": 1469658127, "answer_id": 38624156, "question_id": 38624103, "link": "https://stackoverflow.com/questions/38624103/rails-no-route-matches-post-specials-1/38624156#38624156", "title": "Rails: No route matches [POST] &quot;/specials/1&quot;", "body": "<p>Usually when updating a record, we do a patch request to the route. Your form should look like this:</p>\n\n<pre><code>&lt;%= form_for(@special) do |f| %&gt;\n</code></pre>\n\n<p>Rails will determine the correct route is <code>PATCH   /specials/:id</code> based on the fact that <code>@special</code> has been persisted to the database.</p>\n\n<p>If you decide to use this same form as a partial in your <code>new</code> view, just make sure to add this to your controller:</p>\n\n<pre><code>def new\n  @special = Special.new\nend\n</code></pre>\n\n<p>That way whether you are on the <code>new</code> route or the <code>edit</code> route, there will always be a <code>@special</code> object for <code>form_for</code> to infer whether to POST to <code>/specials</code> or PATCH <code>/specials/:id</code></p>\n"}], "owner": {"reputation": 111, "user_id": 3922614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c232f5bcbbdb77b11b650d9ad92903fd?s=128&d=identicon&r=PG&f=1", "display_name": "PudparK", "link": "https://stackoverflow.com/users/3922614/pudpark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 38624156, "answer_count": 1, "score": 0, "last_activity_date": 1469658714, "creation_date": 1469657826, "last_edit_date": 1469658714, "question_id": 38624103, "link": "https://stackoverflow.com/questions/38624103/rails-no-route-matches-post-specials-1", "title": "Rails: No route matches [POST] &quot;/specials/1&quot;", "body": "<p>This is the error I'm getting:</p>\n\n<pre><code>No route matches [POST] \"/specials/1\"\n</code></pre>\n\n<p>I understand that it's not able to produce the post route, or it isn't available.</p>\n\n<p>Here's my view/form code:</p>\n\n<pre><code>  &lt;%= form_for(:special, :url =&gt; {:action =&gt; 'update', :id =&gt; @special.id}) do |f| %&gt;\n\n    &lt;table class=\"table table-responsive table-striped table-condensed table-hover\" summary=\"Special form fields\"&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Order&lt;/th&gt;\n        &lt;td&gt;&lt;%= f.text_field :order, class: \"form-control\" %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Name&lt;/th&gt;\n        &lt;td&gt;&lt;%= f.text_field :name, class: \"form-control\" %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Description&lt;/th&gt;\n        &lt;td&gt;&lt;%= f.text_field :description, class: \"form-control\" %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Fine Print&lt;/th&gt;\n        &lt;td&gt;&lt;%= f.text_field :fine_print, class: \"form-control\" %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Active&lt;/th&gt;\n        &lt;td&gt;&lt;%= f.text_field :active, class: \"form-control\" %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n\n    &lt;div class=\"form-buttons\"&gt;\n      &lt;%= submit_tag(\"Update Special\") %&gt;\n    &lt;/div&gt;\n\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Heres's my controller code:</p>\n\n<p>class SpecialsController &lt; ApplicationController</p>\n\n<pre><code>  def index\n    @specials = Special.sorted\n  end\n\n  def show\n    @special = Special.find(params[:id])\n  end\n\n  def new\n    @special = Special.new\n  end\n\n  def create\n    #Instantiation of object using form parameters\n    @special = Special.new(special_params)\n    #Save the object\n    if @special.save\n      #If success, redirect to index action\n      redirect_to(:action =&gt; 'index')\n    else\n      # Redisplay the form so user can fix problems\n      render('new')\n    end\n  end\n\n  def edit\n    @special = Special.find(params[:id])\n  end\n\n  def update\n    #Find an existing object using form parameters\n    @special = Special.find(params[:id])\n    #Update the object\n    if @special.update_attributes(special_params)\n      #If succeeds, redirect to index action\n      redirect_to(:action =&gt; 'show', :id =&gt; @special.id)\n    else\n      # If update fails, redisplay the form so user can fix problems\n      render('edit')\n    end\n  end\n\n  def delete\n  end\n\nprivate\n  def special_params\n    params.require(:special).permit(:name, :description, :fine_print, :active, :order)\n  end\n\nend\n</code></pre>\n\n<p>I noticed that there is an update path:</p>\n\n<pre><code>PATCH   /specials/:id(.:format) specials#update\n</code></pre>\n\n<p>I can't figure out why the post route isn't being applied. It's looking for the right @special instance, but it doesn't seem to have the route available. Any advice?</p>\n"}, {"tags": ["ruby", "string", "class", "if-statement", "integer"], "comments": [{"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1469657227, "post_id": 38623933, "comment_id": 64633596, "body": "Try <code>if guess.class != String</code> or <code>not(guess.is_a? String)</code> or <code>guess.class.name != &quot;String&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1469657990, "post_id": 38624098, "comment_id": 64633872, "body": "Erm... It&#39;s probably also worth noting that this code is pointless, because <code>guess</code> will <b>ALWAYS</b> be a <code>String</code>! What we really want to do, surely, is something like: <code>guess = gets.chomp; if guess.length != 1 ....</code>"}, {"owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1469658070, "post_id": 38624098, "comment_id": 64633903, "body": "True. That makes sense too."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1469658158, "post_id": 38624098, "comment_id": 64633923, "body": "Or maybe even <code>if guess !~ &#47;\\A[a-zA-Z]\\z&#47; ...</code>"}], "tags": [], "owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "is_accepted": false, "score": 1, "last_activity_date": 1469657805, "creation_date": 1469657805, "answer_id": 38624098, "question_id": 38623933, "link": "https://stackoverflow.com/questions/38623933/if-statement-in-ruby-to-determine-input-type/38624098#38624098", "title": "if statement in ruby, to determine input type", "body": "<p><code>guess.name</code> returns a constant which is <code>String</code>. You need to mind that <code>String</code> is different from <code>\"String\"</code>. When you enclose it in single quotes it becomes a string but not a constant. </p>\n\n<p>So, change your if clause to </p>\n\n<pre><code>    if guess.class != String\n       puts \"enter a letter!!\"\n    else\n       puts \"nice!!!\"\n    end\n</code></pre>\n\n<p>or, use <code>.is_a?</code> method.</p>\n\n<pre><code>    if guess.is_a?(String)\n       puts \"enter a letter!!\"\n    else\n       puts \"nice!!!\"\n    end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1469658247, "post_id": 38624157, "comment_id": 64633944, "body": "Alternatively, use <code>&#47;[a-z]&#47;i</code> for a case-insensitive regex."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1469661734, "post_id": 38624157, "comment_id": 64634916, "body": "Also: <code>guess.match(&#47;\\A[A-Za-z]+\\z&#47;)</code> tests if the line contains <i>one or more</i> characters, and in the latest ruby <code>match?</code> can do the test even more efficiently. The <code>(x =~ &#47;...&#47;) == 0</code> stuff is just plain bizarre."}], "tags": [], "owner": {"reputation": 111, "user_id": 3943039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b47e89b3b02d46e12ed1fdcc5da5a9a6?s=128&d=identicon&r=PG&f=1", "display_name": "Lawrence Lee", "link": "https://stackoverflow.com/users/3943039/lawrence-lee"}, "is_accepted": true, "score": 3, "last_activity_date": 1469658127, "creation_date": 1469658127, "answer_id": 38624157, "question_id": 38623933, "link": "https://stackoverflow.com/questions/38623933/if-statement-in-ruby-to-determine-input-type/38624157#38624157", "title": "if statement in ruby, to determine input type", "body": "<p><code>gets</code> always returns a String, so I don't think you want to validate its class. If you want to check that the input is a single letter, you can first check if the length of the input is 1:<br>\n<code>guess.length == 1</code></p>\n\n<p>Following that, you can check if it actually is a letter using regular expressions:<br>\n<code>(guess =~ /[A-Za-z]/) == 0</code><br>\nThat basically finds the position of the first letter in <code>guess</code>; as there should only be one letter at position 0, this condition will be true if guess is a letter.</p>\n\n<p>So combined:</p>\n\n<pre><code>guess = gets.chomp # You want to remove the newline!\nif (guess.length == 1) and (guess =~/[A-Za-z]/) == 0\n  puts \"Nice!\"\n  ...\nelse\n  puts \"Input a single letter!\"\nend\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6646950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1d947c9595b7a8c19ec2a7beb15fed5?s=128&d=identicon&r=PG&f=1", "display_name": "krabbos", "link": "https://stackoverflow.com/users/6646950/krabbos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 38624157, "answer_count": 2, "score": 1, "last_activity_date": 1469669447, "creation_date": 1469656917, "last_edit_date": 1469669447, "question_id": 38623933, "link": "https://stackoverflow.com/questions/38623933/if-statement-in-ruby-to-determine-input-type", "title": "if statement in ruby, to determine input type", "body": "<p>I'm trying to make a small hangman game in ruby. I am trying to validate the guess input using the following code:</p>\n\n<pre><code>puts \"Enter a word: \"\nanswer = gets.chomp\ntries = 5\nanswer_array = answer.chars\n\nuntil tries == 0\n  hits = \"\"\n  puts \"enter your guess: \"\n  guess = gets[0]\n  if guess.class != \"String\"\n    puts \"enter a letter!!\"\n  else\n    puts \"nice!!!\"\n  end\n  tries -= 1\nend\n</code></pre>\n\n<p>For some reason--whatever input I get for <code>guess</code>--the program throws \"enter a letter!\". Is there something wrong with the way I defined the if statement. I just want it to differentiate between a String and an Integer.</p>\n"}, {"tags": ["ruby-on-rails", "angularjs", "ruby"], "comments": [{"owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "edited": false, "score": 1, "creation_date": 1469656988, "post_id": 38623919, "comment_id": 64633525, "body": "Angular runs on the client (web browser); Ruby runs on the server (different computer, different location). You need Angular to make an XHR request to the server, and the Ruby code on the server can then call other Ruby code on the server. In this case you may want to instantiate a new <code>Api::SignageAgentController</code> either during the request, or app startup, and call methods on it."}, {"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1469660600, "post_id": 38623919, "comment_id": 64634670, "body": "Can you show us you&#39;re <code>config&#47;routes.rb</code>, but only the ones related to <code>signage_agent</code>?"}, {"owner": {"reputation": 3, "user_id": 4208093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679704d6c2bf39a46dd8053a2f0ba0bd?s=128&d=identicon&r=PG&f=1", "display_name": "ADHDTurtle", "link": "https://stackoverflow.com/users/4208093/adhdturtle"}, "reply_to_user": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1469717579, "post_id": 38623919, "comment_id": 64662838, "body": "@fbelanger  It seems as if the reference to the signage agent is missing something, the other api&#39;s called in the routes file have &quot;do&quot; with some other code beneath them.  Here it is:  <code>resources :signage_agent, only: [:index, :update]</code>"}, {"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1469767859, "post_id": 38623919, "comment_id": 64683413, "body": "Hey ADHDTurtle, first of all good luck with all your endeavours. What you are doing is insanely challenging and painful. Work hard and it will pay off. Second, this line indicates that we need to <code>GET</code> the index at <code>&#47;signage_agent</code>. However, without more details about the namespaces the URL path will vary. Please provide the nested routes starting after <code>Rails.application.routes.draw do</code> and everything that wraps around the <code>resources :signage_agent, only: [:index, :update</code>]. The controller is dubbed <code>Api::</code>, which traditionally implies some kind of API path setup."}], "answers": [{"tags": [], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "is_accepted": true, "score": 0, "last_activity_date": 1469660245, "creation_date": 1469660245, "answer_id": 38624522, "question_id": 38623919, "link": "https://stackoverflow.com/questions/38623919/how-to-make-an-api-call-to-a-local-ruby-file/38624522#38624522", "title": "How to make an API call to a local ruby file", "body": "<p>It would depend on the URL path defined for this <code>Api::SignageAgentController</code>.</p>\n\n<p>If you have access to the project, go to the <code>config/routes.rb</code> and look for something like <code>signage_agent</code>.</p>\n\n<p>Assuming that your routes are something like this:</p>\n\n<pre><code>Rails.application.routes.draw do\n  namespace :api, { .. } do\n    # get '/signage_agent', to: 'signage_agent#index'\n    resources :signage_agent, only [:index, ...]\n  end\nend\n</code></pre>\n\n<p>Then, in Angular:</p>\n\n<pre><code>$http({\n  method: 'GET',\n  url: '/api/signage_agent'\n}).then(function successCallback(response) {\n\n  }, function errorCallback(response) {\n\n});\n</code></pre>\n\n<p>Depending on the <code>{...}</code> part, your URL path could vary.</p>\n\n<p>If you don't see <code>subdomain</code> or <code>path</code>, then everything is fine.</p>\n\n<p>If these are present, then you might need a Rack Proxy like <code>pow</code> or <code>prax</code>, if you're on Linux.</p>\n\n<p>Test your endpoints (URL paths) using your browser or better yet use Restful API Testing plugins for your browser or freely available online solutions (Google: rest api test online)</p>\n\n<p>Try reading up on Rails Routing, as this will help you utilize AJAX on the Front-end. Learning about Rails Routing will also help you understand how to consume your company's API.</p>\n\n<p><a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">http://guides.rubyonrails.org/routing.html</a></p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Routing.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActionDispatch/Routing.html</a></p>\n\n<p>You'll find that the combinations in the <code>config/routes.rb</code> is all you really need to understand.</p>\n\n<p>Restful APIs use HTTP verbs (get, post, put/patch, delete) to map controllers, notably their actions (which handles a web request), to URL paths.</p>\n\n<p>You're <code>index</code> action is likely to be setup to a <code>GET</code> request with just the controller name, no <code>/1</code>, which represents an ID (thus <code>params[:id]</code>).</p>\n"}], "owner": {"reputation": 3, "user_id": 4208093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679704d6c2bf39a46dd8053a2f0ba0bd?s=128&d=identicon&r=PG&f=1", "display_name": "ADHDTurtle", "link": "https://stackoverflow.com/users/4208093/adhdturtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 38624522, "answer_count": 1, "score": 0, "last_activity_date": 1469669530, "creation_date": 1469656842, "last_edit_date": 1469669530, "question_id": 38623919, "link": "https://stackoverflow.com/questions/38623919/how-to-make-an-api-call-to-a-local-ruby-file", "title": "How to make an API call to a local ruby file", "body": "<p>I know how to make API calls in angular using the $http service, but all of the examples online call a web API. My issue is that a coworker of mine built an API using ruby, and I don't know how to call it since it is in my local environment.  Here is the Ruby Code:</p>\n\n<pre><code>class Api::SignageAgentController &lt; ApiController\n\n   def index\n      render json: Ingestor.signage_agents.to_json\n   end\n\n   def update\n      return render(status: :unprocessable_entity,json: ['No signage agent given']) unless @ingestor == Ingestor.signage_agents.find_by_id(params[:id])\n\n      if @ingestor.update_attributes(valid_params)\n         render json: @ingestor.to_json\n      else\n         render(status: :unprocessable_entity,json: @ingestor.errors.to_a)\n      end\n   end\n\n   protected\n\n   def valid_params\n      params.require(:signage_agent).permit(:policy_file_keys) rescue {}\n   end\nend\n</code></pre>\n\n<p>How would I go about calling the index in angularjs?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "json", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 3078375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0b8c1afae38203ad6c41ce9da8099b7?s=128&d=identicon&r=PG&f=1", "display_name": "Osama", "link": "https://stackoverflow.com/users/3078375/osama"}, "is_accepted": true, "score": 0, "last_activity_date": 1471713391, "creation_date": 1471713391, "answer_id": 39056806, "question_id": 38623887, "link": "https://stackoverflow.com/questions/38623887/how-to-create-a-static-html-site-from-a-folder-of-jsons/39056806#39056806", "title": "How to create a static HTML site from a folder of JSONs?", "body": "<p>I managed to make a script that does this, its on <a href=\"https://github.com/Dorgam/slackup\" rel=\"nofollow\">Github</a>.</p>\n"}], "owner": {"reputation": 101, "user_id": 3078375, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0b8c1afae38203ad6c41ce9da8099b7?s=128&d=identicon&r=PG&f=1", "display_name": "Osama", "link": "https://stackoverflow.com/users/3078375/osama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 39056806, "answer_count": 1, "score": -2, "last_activity_date": 1471713391, "creation_date": 1469656689, "question_id": 38623887, "link": "https://stackoverflow.com/questions/38623887/how-to-create-a-static-html-site-from-a-folder-of-jsons", "title": "How to create a static HTML site from a folder of JSONs?", "body": "<p>So currently I am working on an application that does regular backups for Slack conversations. I managed to find a way to generate JSONs from each conversation. Using Ruby library: <a href=\"https://github.com/dblock/slack-ruby-client\" rel=\"nofollow\">https://github.com/dblock/slack-ruby-client</a></p>\n\n<p>The application will be hosted on Heroku and using scheduler it will schedule backups frequently.</p>\n\n<p>My goal is to transform these JSONs into an independent HTML pages(with their css) that I later can upload to each user Dropbox account so he/she can browse his backed up conversations from any browser locally and privte.</p>\n\n<p>An example of JSONs structure is:</p>\n\n<ul>\n<li>[username]\n\n<ul>\n<li>channels\n\n<ul>\n<li>general.json</li>\n<li>random.json</li>\n</ul></li>\n<li>groups\n\n<ul>\n<li>[groupname].json</li>\n</ul></li>\n<li>DMs\n\n<ul>\n<li>[username].json</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>So, the above structure will produce similar structure but instead of .json it will be .html, and it will have a \"index.html\" to browse.</p>\n\n<p>After doing some research, I noticed that this thing can be done using static-site generators, but I am totally clueless about them. Is there a ruby static-site generator that could do the above task exactly? (It would be perfect if someone could guide me to a tutorial or example), or is this done using another solution?</p>\n\n<p>Thank you,</p>\n"}, {"tags": ["ruby", "capistrano"], "answers": [{"comments": [{"owner": {"reputation": 262, "user_id": 4290174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/89ed575ba0ebbc15a605145b33075c01?s=128&d=identicon&r=PG&f=1", "display_name": "Lush", "link": "https://stackoverflow.com/users/4290174/lush"}, "edited": false, "score": 0, "creation_date": 1469730591, "post_id": 38624321, "comment_id": 64671293, "body": "Thanks, Matt. That makes total sense as the error coincided with a &#39;bundle update&#39; earlier in the day."}], "tags": [], "owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "is_accepted": true, "score": 11, "last_activity_date": 1471999511, "last_edit_date": 1471999511, "creation_date": 1469658943, "answer_id": 38624321, "question_id": 38623863, "link": "https://stackoverflow.com/questions/38623863/capistrano-error-undefined-method-already-invoked-for-raketask-loaddefaul/38624321#38624321", "title": "Capistrano error: undefined method `already_invoked&#39; for &lt;Rake::Task load:defaults =&gt; []&gt;:Rake::Task", "body": "<p>Yes, it looks like you've found a bug in the newly-released Capistrano 3.6.0. Please report the bug here: <a href=\"https://github.com/capistrano/capistrano/issues\" rel=\"nofollow\">https://github.com/capistrano/capistrano/issues</a></p>\n\n<p>The underlying problem is that Capistrano 3.6.0 is (mistakenly) incompatible with Rake &lt; 11.0.0.</p>\n\n<p>In the meantime, you can work around this issue by upgrading Rake to version 11.0.0 or higher with <code>gem install rake</code> or <code>bundle update rake</code> (depending on whether you use <code>bundle exec</code> for Capistrano or not).</p>\n\n<p>If you are unable to upgrade Rake, downgrade Capistrano to version 3.5.0 until the bug has been fixed.</p>\n\n<p><em>Update: Capistrano 3.6.1 has been released and restores compatibility with Rake &lt; 11.0.0.</em></p>\n"}], "owner": {"reputation": 262, "user_id": 4290174, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/89ed575ba0ebbc15a605145b33075c01?s=128&d=identicon&r=PG&f=1", "display_name": "Lush", "link": "https://stackoverflow.com/users/4290174/lush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1242, "favorite_count": 0, "accepted_answer_id": 38624321, "answer_count": 1, "score": 8, "last_activity_date": 1471999511, "creation_date": 1469656545, "last_edit_date": 1469657641, "question_id": 38623863, "link": "https://stackoverflow.com/questions/38623863/capistrano-error-undefined-method-already-invoked-for-raketask-loaddefaul", "title": "Capistrano error: undefined method `already_invoked&#39; for &lt;Rake::Task load:defaults =&gt; []&gt;:Rake::Task", "body": "<p>I've spent way too much time debugging this, and I have no idea what's going on. \"cap production deploy\" worked fine this morning, and now it just throws an error. Google has not been of much help so far, surprisingly. Nothing has changed in the code base that I know of:</p>\n\n<pre><code>\u279c  sesac-mm-matching git:(deploy) cap production deploy --trace\n    ** Invoke production (first_time)\n    ** Execute production\n    cap aborted!\n    NoMethodError: undefined method `already_invoked' for &lt;Rake::Task load:defaults =&gt; []&gt;:Rake::Task\n    /Users/***/.rvm/gems/ruby-2.3.0@global/gems/capistrano-3.6.0/lib/capistrano/dsl.rb:16:in `invoke'\n    /Users/***/.rvm/gems/ruby-2.3.0@global/gems/capistrano-3.6.0/lib/capistrano/setup.rb:24:in `block (2 levels) in &lt;top (required)&gt;'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/task.rb:240:in `block in execute'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/task.rb:235:in `each'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/task.rb:235:in `execute'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/task.rb:179:in `block in invoke_with_call_chain'\n    /Users/***/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/task.rb:172:in `invoke_with_call_chain'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/task.rb:165:in `invoke'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/application.rb:150:in `invoke_task'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/application.rb:106:in `block (2 levels) in top_level'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/application.rb:106:in `each'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/application.rb:106:in `block in top_level'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/application.rb:115:in `run_with_threads'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/application.rb:100:in `top_level'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/application.rb:78:in `block in run'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/application.rb:176:in `standard_exception_handling'\n    /Users/***/.rvm/gems/ruby-2.3.0/gems/rake-10.5.0/lib/rake/application.rb:75:in `run'\n    /Users/***/.rvm/gems/ruby-2.3.0@global/gems/capistrano-3.6.0/lib/capistrano/application.rb:14:in `run'\n    /Users/***/.rvm/gems/ruby-2.3.0@global/gems/capistrano-3.6.0/bin/cap:3:in `&lt;top (required)&gt;'\n    /Users/***/.rvm/gems/ruby-2.3.0/bin/cap:23:in `load'\n    /Users/***/.rvm/gems/ruby-2.3.0/bin/cap:23:in `&lt;main&gt;'\n    /Users/***/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\n    /Users/***/.rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n    Tasks: TOP =&gt; production\n</code></pre>\n\n<p>Is anyone able provide some direction?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "coffeescript", "aptana3"], "comments": [{"owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1469655622, "post_id": 38623574, "comment_id": 64632909, "body": "try running <code>gem &#39;coffee-script-source&#39;, &#39;~&gt; 1.8.0&#39;</code> and run <code>bundle update</code>"}, {"owner": {"reputation": 3, "user_id": 6637631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tVmAEmRM1Xw/AAAAAAAAAAI/AAAAAAAAABU/1iXl0iKGJQQ/photo.jpg?sz=128", "display_name": "Kevin Smith", "link": "https://stackoverflow.com/users/6637631/kevin-smith"}, "reply_to_user": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1469666958, "post_id": 38623574, "comment_id": 64636065, "body": "Thank you! That fixed it."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6637631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tVmAEmRM1Xw/AAAAAAAAAAI/AAAAAAAAABU/1iXl0iKGJQQ/photo.jpg?sz=128", "display_name": "Kevin Smith", "link": "https://stackoverflow.com/users/6637631/kevin-smith"}, "edited": false, "score": 1, "creation_date": 1469666890, "post_id": 38623647, "comment_id": 64636054, "body": "Wow! That was easy. I didn&#39;t realize you had to specifically mention the gem in order for it to work. Thanks a lot!"}, {"owner": {"reputation": 162, "user_id": 575985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34dbedb61632979ce94aaa9c6ae20c04?s=128&d=identicon&r=PG", "display_name": "ericsaupe", "link": "https://stackoverflow.com/users/575985/ericsaupe"}, "reply_to_user": {"reputation": 3, "user_id": 6637631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tVmAEmRM1Xw/AAAAAAAAAAI/AAAAAAAAABU/1iXl0iKGJQQ/photo.jpg?sz=128", "display_name": "Kevin Smith", "link": "https://stackoverflow.com/users/6637631/kevin-smith"}, "edited": false, "score": 0, "creation_date": 1469744330, "post_id": 38623647, "comment_id": 64677925, "body": "No problem. Glad I could help. Feel free to mark my answer as the correct one!"}], "tags": [], "owner": {"reputation": 162, "user_id": 575985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34dbedb61632979ce94aaa9c6ae20c04?s=128&d=identicon&r=PG", "display_name": "ericsaupe", "link": "https://stackoverflow.com/users/575985/ericsaupe"}, "is_accepted": true, "score": 1, "last_activity_date": 1469655560, "creation_date": 1469655560, "answer_id": 38623647, "question_id": 38623574, "link": "https://stackoverflow.com/questions/38623574/ongoing-issue-with-rails-gems-and-server/38623647#38623647", "title": "Ongoing issue with Rails gems and server", "body": "<p>Your gems are versioned when they install. So once upon a time you may not have specified the version of <code>coffee-script-source</code> and <code>bundler</code> went out and installed the latest version of <code>1.10.0</code>. Now you are trying to tell it to install a different version and it's mad because it already has a version installed.</p>\n\n<p>Now that you have specified the version of <code>=1.8.0</code> in your <code>Gemfile</code> you can run <code>bundle update coffee-script-source</code> and it should get you the proper version and lock that in your <code>Gemfile.lock</code> to remember that is the version you want.</p>\n"}], "owner": {"reputation": 3, "user_id": 6637631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tVmAEmRM1Xw/AAAAAAAAAAI/AAAAAAAAABU/1iXl0iKGJQQ/photo.jpg?sz=128", "display_name": "Kevin Smith", "link": "https://stackoverflow.com/users/6637631/kevin-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 38623647, "answer_count": 1, "score": 0, "last_activity_date": 1469659419, "creation_date": 1469655267, "last_edit_date": 1469659419, "question_id": 38623574, "link": "https://stackoverflow.com/questions/38623574/ongoing-issue-with-rails-gems-and-server", "title": "Ongoing issue with Rails gems and server", "body": "<p>I am new to Ruby on Rails, and I have been following Mackenzie Child's tutorial on how to make a Forum app using Devise, Haml, and Simple_Form. I'm using Aptana Studio 3 as an IDE on Windows 10 O.S. I'm using Ruby 2.2.0 and Rails version 4.2.5.1.</p>\n\n<p>I'm having two issues: </p>\n\n<p>1) I am unable to destroy a post after creating it (as Mackenzie illustrates at around time = 17:30). </p>\n\n<p>After a Google search I discovered this is because I removed the JavaScript and StyleSheet scrips from <code>application.html.erb</code>. I removed these lines of code because I was unable to view any Rails app on a local server. This leads me to my second problem </p>\n\n<p>2) I put the lines of code back into the <code>application.html.erb</code> folder and I am back to being unable to view my app on my local network, and receive error code listed below.</p>\n\n<p>Again, a Google search found that <code>coffee-script-source</code>, <code>1.10.0</code> doesn't work well with windows, and that is why I received the error. I was suggested to rollback to <code>1.8.0</code>. However, I am unable to rollback to an earlier version. I tried typing the correct version of CoffeeScript into my GemFile, and tried <code>gem install</code> 'coffee-script-source', '1.8.0', but my computer refuses to update to it. Instead I receive this error in the Terminal.</p>\n\n<pre><code>&gt;You have requested: coffee-script-source = 1.8.0\n&gt;The bundle currently has coffee-script-source locked at 1.10.0.\n&gt;Try running 'bundle update coffee-script-source'\n&gt;If you are updating multiple gems in your Gemfile at once,\n&gt;try passing them all to 'bundle update'\"*\n</code></pre>\n\n<p>Anyway, this is where Google has stopped being helpful. I would appreciate if anybody could help me with this issue!</p>\n\n<p>[<a href=\"https://www.youtube.com/watch?v=rTP1eMfI5Bs]\" rel=\"nofollow\">https://www.youtube.com/watch?v=rTP1eMfI5Bs]</a></p>\n\n<pre><code>&gt;&lt;!DOCTYPE html&gt;\n&gt;&lt;html&gt;\n&gt;   &lt;head&gt;\n&gt;       &lt;title&gt;Forum&lt;/title&gt;\n&gt;  &lt;%= csrf_meta_tags %&gt;\n&gt;\n&gt;  &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-\n\n&gt;track': 'reload' %&gt;\n    &gt;  &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' &gt;%&gt;\n    &gt;&lt;/head&gt;\n&gt;\n&gt;&lt;body&gt;\n&gt;&lt;%= yield %&gt;\n&gt;   &lt;/body&gt;\n&gt;&lt;/html&gt;\n</code></pre>\n\n<p>.</p>\n\n<pre><code>&gt;ExecJS::ProgramError in Posts#index\n&gt;Showing c:/psychweb/forum/app/views/layouts/application.html.erb where line #7 raised:\n&gt;\n&gt;TypeError: Object doesn't support this property or method\n&gt;Rails.root: c:/psychweb/forum\n&gt;\n&gt;Application Trace | Framework Trace | Full Trace\n&gt;app/views/layouts/application.html.erb:7:in      \n&gt;`_app_views_layouts_application_html_erb__95882101_42750912'\n</code></pre>\n\n<p>.</p>\n\n<pre><code>&gt;gem 'rails', '4.2.5.1'\n&gt;# Use sqlite3 as the database for Active Record\n&gt;gem 'sqlite3'\n&gt;# Use SCSS for stylesheets\n&gt;gem 'sass-rails', '~&gt; 5.0'\n&gt;# Use Uglifier as compressor for JavaScript assets\n&gt;gem 'uglifier', '&gt;= 1.3.0'\n&gt;# Use CoffeeScript for .coffee assets and views\n&gt;gem 'coffee-rails', '~&gt; 4.1.0'\n&gt;# See https://github.com/rails/execjs#readme for more supported runtimes\n&gt;# gem 'therubyracer', platforms: :ruby\n&gt;gem 'jquery-rails'\n&gt;gem 'turbolinks'\n&gt;gem 'jbuilder', '~&gt; 2.0'\n&gt;# bundle exec rake doc:rails generates the API under doc/api.\n&gt;gem 'sdoc', '~&gt; 0.4.0', group: :doc\n&gt;\n&gt;gem 'haml', '~&gt; 4.0.5'\n&gt;gem 'simple_form', '~&gt; 3.0.2'\n&gt;gem 'devise', '~&gt; 3.4.1'\n&gt;gem 'coffee-script-source', '=1.8.0'\n&gt;\n&gt;# Use ActiveModel has_secure_password\n&gt;# gem 'bcrypt', '~&gt; 3.1.7'\n&gt;\n&gt;\n&gt;group :development, :test do\n&gt;  gem 'byebug'\n&gt;end\n&gt;\n&gt;group :development do\n&gt;  \n&gt;  gem 'web-console', '~&gt; 2.0'\n&gt;end\n&gt;\n&gt;\n&gt;# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\n&gt;gem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n"}, {"tags": ["ruby", "jira", "rest-client"], "comments": [{"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1469660218, "post_id": 38623504, "comment_id": 64634580, "body": "Have you tried the <a href=\"https://github.com/rest-client/rest-client#passing-advanced-options\" rel=\"nofollow noreferrer\">#execute</a> method directly?"}, {"owner": {"reputation": 1197, "user_id": 13718, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a2dc7a897e0176ea38519ebf319f1ed3?s=128&d=identicon&r=PG", "display_name": "ScottyDont", "link": "https://stackoverflow.com/users/13718/scottydont"}, "reply_to_user": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1469714697, "post_id": 38623504, "comment_id": 64660517, "body": "Tried it, tucking the params into the headers option hash as shown in the docs, with the same 400 error: RestClient::Request.execute(method: :put, url: endpoint,                             ssl_ca_file: certfile,                             headers: options) where the options hash looks like {:authorization=&gt;&quot;Basic b3B...&quot;,  :content_type=&gt;:json,  :params=&gt;   {&quot;fields&quot;=&gt;     {&quot;customfield_15110&quot;=&gt;&quot;0.33%&quot;,      &quot;customfield_15122&quot;=&gt;&quot;0.41%&quot;   } }"}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1469729436, "post_id": 38623504, "comment_id": 64670664, "body": "I&#39;ve never used the RestClient gem, but that surely seems like a bug. Have you tried enabling the logger to take a peek at the request. <code>RestClient.log = &#39;stdout&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1197, "user_id": 13718, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a2dc7a897e0176ea38519ebf319f1ed3?s=128&d=identicon&r=PG", "display_name": "ScottyDont", "link": "https://stackoverflow.com/users/13718/scottydont"}, "is_accepted": false, "score": 0, "last_activity_date": 1469821857, "creation_date": 1469821857, "answer_id": 38666509, "question_id": 38623504, "link": "https://stackoverflow.com/questions/38623504/correct-syntax-for-restclientresource-put-when-using-ssl-ca-file/38666509#38666509", "title": "Correct syntax for RestClient::Resource PUT when using ssl_ca_file", "body": "<p>My bad... the answer lay in the error.response.body, which contained a JIRA specific error message. Wasn't the SSL option at all. </p>\n"}], "owner": {"reputation": 1197, "user_id": 13718, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a2dc7a897e0176ea38519ebf319f1ed3?s=128&d=identicon&r=PG", "display_name": "ScottyDont", "link": "https://stackoverflow.com/users/13718/scottydont"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469821857, "creation_date": 1469655015, "question_id": 38623504, "link": "https://stackoverflow.com/questions/38623504/correct-syntax-for-restclientresource-put-when-using-ssl-ca-file", "title": "Correct syntax for RestClient::Resource PUT when using ssl_ca_file", "body": "<p>Pulling out my hair trying to get a REST update to JIRA ticket working, specifically while specifying a certificate file to be used in the transaction.</p>\n\n<p>I'm using the RestClient gem (2.0.0) in Ruby 2.2.0.</p>\n\n<p>Per the documentation (<a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow\">here</a>, and <a href=\"http://www.rubydoc.info/github/rest-client/rest-client/RestClient/Resource#put-instance_method\" rel=\"nofollow\">here</a>) I need to create a new Resource and then call a method on it, rather than the shorter more immediate syntax.</p>\n\n<p>POST requests to JIRA work fine using this construction style:</p>\n\n<pre><code>endpoint = \"#{opts['jiraHost']}/rest/api/2/issue\"\nrequest = RestClient::Resource.new(endpoint,\n   ssl_ca_file: certfile, \n   headers: {\n     Authorization: 'Basic b3B....', \n     content_type: :json, \n     accept: :json}\n)\nresponse = request.post(ticketParams.to_json)\n</code></pre>\n\n<p>I get a success response and a ticket is created.</p>\n\n<p>A lightly modified version that uses the PUT verb fails with a 400 Bad Request.</p>\n\n<pre><code>endpoint = \"#{opts['jiraHost']}/rest/api/2/issue/#{ticket[:issueKey]}\"\nrequest = RestClient::Resource.new(endpoint, \n     ssl_ca_file: certfile, \n     headers: {\n       Authorization: 'Basic b3B....', \n       content_type: :json, \n       accept: :json}\n)\nresponse = request.put(ticketParams.to_json)\n</code></pre>\n\n<p><strong>The infurating part is that when doing this to a non-SSL JIRA installation and omitting the SSL CA File argument, the update works just fine. I can make same update call through Postman and it works fine.</strong></p>\n\n<p>In the samples given in the documentation, there were examples of specifying a certificate file with a GET, but not other verbs, and only one example of Resource.post(payload). I suspect I'm putting the ssl_ca_file in the wrong place, but I've tried all variations I can think of to no avail.</p>\n\n<p>(Someone will ask why I can't rely on the system's certificate store. I can't; I've tried everything, and only specifying the cert file allows me to connect.)</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "edited": false, "score": 1, "creation_date": 1469662083, "post_id": 38624570, "comment_id": 64635003, "body": "unfortunately it still throws an error, WEBrick is saying <code>&quot;GET &#47;example HTTP&#47;1.1&quot; 404 553 0.0030</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469682300, "post_id": 38624570, "comment_id": 64639411, "body": "did you restart the server?"}, {"owner": {"reputation": 449, "user_id": 5983505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101041139416992/picture?type=large", "display_name": "Alexander Swann", "link": "https://stackoverflow.com/users/5983505/alexander-swann"}, "edited": false, "score": 0, "creation_date": 1469697535, "post_id": 38624570, "comment_id": 64647801, "body": "I&#39;ve noticed another bit of info you are missing relative to the tutorial. I&#39;ve updated my answer above. Did you need to include your helpers in <code>{controllers,models}</code>? (i.e. <code>{helpers,controllers,models}</code>)"}, {"owner": {"reputation": 449, "user_id": 5983505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101041139416992/picture?type=large", "display_name": "Alexander Swann", "link": "https://stackoverflow.com/users/5983505/alexander-swann"}, "edited": false, "score": 1, "creation_date": 1469699193, "post_id": 38624570, "comment_id": 64649037, "body": "Hi, I&#39;ve managed to simulate this tutorial and get it working. There&#39;s a few typos in the tutorial and by the looks of things you are missing a fair bit of info. Have updated my answer above but, if it still doesn&#39;t work, I can push what I did to my GitHub repo and you&#39;re welcome to pull it and compare scripts to see where you went wrong. :-)"}], "tags": [], "owner": {"reputation": 449, "user_id": 5983505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101041139416992/picture?type=large", "display_name": "Alexander Swann", "link": "https://stackoverflow.com/users/5983505/alexander-swann"}, "is_accepted": false, "score": 1, "last_activity_date": 1469699324, "last_edit_date": 1469699324, "creation_date": 1469660617, "answer_id": 38624570, "question_id": 38623490, "link": "https://stackoverflow.com/questions/38623490/modular-sinatra-routes-not-working-structuring-config-ru-and-multiple-contro/38624570#38624570", "title": "Modular Sinatra - routes not working - structuring config.ru and multiple controllers to handle routes", "body": "<p>It looks like, based off the tutorial, that you've used the route <code>/example</code> in both your config.ru file and in the routes for the ExampleController. This might mean your local url might end up as '<a href=\"http://localhost:4567/example/example\" rel=\"nofollow\">http://localhost:4567/example/example</a>' . By the looks of things your example_controller.rb file should look like this, with '/' as the route:</p>\n\n<p><strong>example_controller.rb</strong></p>\n\n<pre><code>class ExampleController &lt; ApplicationController\n\n  get '/' do\n    title \"Example Page\"\n    erb :example\n  end\n\nend\n</code></pre>\n\n<p>It also looks like you need to <code>require 'sinatra/base'</code> in your config.ru file. </p>\n\n<p><strong>config.ru</strong></p>\n\n<pre><code># Load Controllers and models\nrequire 'sinatra/base'\nDir.glob('./{helpers,controllers}/*.rb').each { |file| require file }\n\nmap('/example') { run ExampleController }\nmap('/') { run ApplicationController }\n</code></pre>\n\n<p>Also your application_controller.rb appears to be missing your helpers and set views isn't included.</p>\n\n<p><strong>application_controller.rb</strong></p>\n\n<pre><code>class ApplicationController &lt; Sinatra::Base\n  helpers ApplicationHelper\n\n  # set folder for templates to ../views, but make the path absolute\n  set :views, File.expand_path('../../views', __FILE__)\n\n  # don't enable logging when running tests\n  configure :production, :development do\n    enable :logging\n  end\n\n  get '/' do\n    title \"Home.erb\"\n    erb :home\n  end\n\n  # will be used to display 404 error pages\n  not_found do\n    title 'Not Found!'\n    erb :not_found\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 914, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469699324, "creation_date": 1469654934, "question_id": 38623490, "link": "https://stackoverflow.com/questions/38623490/modular-sinatra-routes-not-working-structuring-config-ru-and-multiple-contro", "title": "Modular Sinatra - routes not working - structuring config.ru and multiple controllers to handle routes", "body": "<p>I am following the recipe found on this tutorial on Sinatra::Base\n<a href=\"https://www.safaribooksonline.com/library/view/sinatra-up-and/9781449306847/ch04.html\" rel=\"nofollow\">https://www.safaribooksonline.com/library/view/sinatra-up-and/9781449306847/ch04.html</a></p>\n\n<p>I am having an issue getting my routes to work, currently only one route works and that is <code>get '/'</code> which loads from <code>ApplicationController &lt; Sinatra::Base</code>  home.erb.</p>\n\n<p>the route in my second controller which is named <code>ExampleController &lt; ApplicationController</code> does not work</p>\n\n<p><strong>config.ru</strong> (relevant code only)</p>\n\n<pre><code># Load Controllers and models\nDir.glob('./{controllers,models}/*.rb').each { |file| require file }\n\nmap('/example') { run ExampleController }\nmap('/') { run ApplicationController }\n</code></pre>\n\n<p><strong>application_controller.rb</strong></p>\n\n<pre><code>class ApplicationController &lt; Sinatra::Base\n  # set folder for root\n  set :root, File.expand_path(\"../app\", Dir.pwd)\n\n  # don't enable logging when running tests\n  configure :production, :development do\n    enable :logging\n  end\n\n  get '/' do\n    title \"Home.erb\"\n    erb :home\n  end\n\n  not_found do\n    title 'Not Found!'\n    erb :not_found\n  end\n\nend\n</code></pre>\n\n<p><strong>example_controller.rb</strong> which the routes will not load from currently</p>\n\n<pre><code>class ExampleController &lt; ApplicationController\n\n  get '/example' do\n    title \"Example Page\"\n    erb :example\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 0, "creation_date": 1469654487, "post_id": 38623366, "comment_id": 64632395, "body": "just add <code>validates_presence_of :something</code> to your <code>Article</code> model (title, content, etc)"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "edited": false, "score": 0, "creation_date": 1469702511, "post_id": 38623702, "comment_id": 64651344, "body": "Right, that&#39;s what I didn&#39;t do. Thanks!"}], "tags": [], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "is_accepted": true, "score": 0, "last_activity_date": 1469655828, "creation_date": 1469655828, "answer_id": 38623702, "question_id": 38623366, "link": "https://stackoverflow.com/questions/38623366/rails-required-true-does-not-work-fully/38623702#38623702", "title": "Rails &#39;required: true&#39; does not work fully", "body": "<p>You need to use validations, that logic is done inside the model.\nMake sure you read and undertand the <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow\">ActiveRecord Validations Guide</a> because it will save you a lot of time.\nExample taken from the guide:</p>\n\n<pre><code>class Person &lt; ApplicationRecord\n  validates :name, presence: true\nend\n\n\n\nPerson.create(name: \"John Doe\").valid? # =&gt; true\nPerson.create(name: nil).valid? # =&gt; false\n</code></pre>\n\n<p>Basically when the object is saved, it runs the validations and if it's not valid it will fill the errors variable with the messages.</p>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1469655896, "creation_date": 1469655896, "answer_id": 38623719, "question_id": 38623366, "link": "https://stackoverflow.com/questions/38623366/rails-required-true-does-not-work-fully/38623719#38623719", "title": "Rails &#39;required: true&#39; does not work fully", "body": "<p>Simple form documentation states...</p>\n\n<blockquote>\n  <p>By default all inputs are required. When the form object has presence\n  validations attached to its fields, Simple Form tells required and\n  optional fields apart. For performance reasons, this detection is\n  skipped on validations that make use of conditional options, such as\n  :if and :unless.</p>\n</blockquote>\n\n<p>Which means that all you need to do is add into your model/article.rb file</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n\n  validates :title, presence: true\n  validates :content, presence: true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11773636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4dPxK.jpg?s=128&g=1", "display_name": "Saad Abdullah", "link": "https://stackoverflow.com/users/11773636/saad-abdullah"}, "is_accepted": false, "score": 1, "last_activity_date": 1609249122, "creation_date": 1609249122, "answer_id": 65493066, "question_id": 38623366, "link": "https://stackoverflow.com/questions/38623366/rails-required-true-does-not-work-fully/65493066#65493066", "title": "Rails &#39;required: true&#39; does not work fully", "body": "<p>As per simple documentation of rails. Your model should look like this(suppose i wanted to validate presence of first_name last_name and compnay_name):</p>\n<pre><code>class User &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :validatable\n  validates :company_name, presence: true\n  validates :first_name, presence: true\n  validates :last_name, presence: true\nend\n</code></pre>\n<p>Now after this you are ready to go, presence: true will validate data before saving it to the database. A good practice is to add a validation to the front end too. which is add require: true to your form_for helper.</p>\n<pre><code>&lt;div class=&quot;field&quot;&gt;\n   &lt;%= f.label :last_name %&gt;&lt;br /&gt;\n   &lt;%= f.text_field :last_name, autofocus: true, required: true ,autocomplete: &quot;email&quot;, class: &quot;border p-3 w-100 my-2&quot; %&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 1, "accepted_answer_id": 38623702, "answer_count": 3, "score": 0, "last_activity_date": 1609249122, "creation_date": 1469654369, "question_id": 38623366, "link": "https://stackoverflow.com/questions/38623366/rails-required-true-does-not-work-fully", "title": "Rails &#39;required: true&#39; does not work fully", "body": "<p>I have a simple_form with a grouped collection select and two input fields. I have a required: true on both fields, but it still allows empty input through. The little 'required' asterisk appears next to the field name, but that's it. Is there any way I can prevent empty input from going through the form?</p>\n\n<p>new.rb</p>\n\n<pre><code>&lt;h1&gt;New Article&lt;/h1&gt;\n\n&lt;%= render 'form', article: @article %&gt;\n\n&lt;%= link_to 'Back', articles_path(category_id: params[:category_id]) %&gt;\n</code></pre>\n\n<p>_form.rb</p>\n\n<pre><code>&lt;%= simple_form_for(article, html: {class: 'form-vertical'}) do |f| %&gt;\n  &lt;% if article.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h4&gt;&lt;%= pluralize(article.errors.count, \"error\") %&gt; prohibited this article from being saved:&lt;/h4&gt;\n\n      &lt;ul&gt;\n      &lt;% article.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n\n  &lt;%# field being selected, parent collection, subcollection, displayed, key, value %&gt;\n  &lt;%= f.grouped_collection_select :subcategory_id, Category.all,:subcategories,:name, :id,:name, {required: true} %&gt;\n    &lt;%= f.input :title, required: true %&gt;\n    &lt;%= f.input :content, input_html: { rows: 20 }, required: true%&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>articles_controller.rb</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n  before_action :set_article, only: [:show, :edit, :update, :destroy]\n\n  # GET /articles\n  # GET /articles.json\n  def index\n    if params[:category_id].blank? &amp;&amp; params[:subcategory_id].blank?\n      @articles = Article.all.order(\"created_at DESC\")\n    elsif params[:subcategory_id].blank?\n      @articles = Article.where(category_id: params[:category_id])\n    else\n      @articles = Article.where(subcategory_id: params[:subcategory_id]).order(\"created_at DESC\")\n    end\n  end\n\n  # GET /articles/1\n  # GET /articles/1.json\n  def show\n  end\n\n  # GET /articles/new\n  def new\n    @article = Article.new\n  end\n\n  # GET /articles/1/edit\n  def edit\n  end\n\n  # POST /articles\n  # POST /articles.json\n  def create\n    @parameters = article_params\n    @parameters[:category_id] = Subcategory.find(@parameters[:subcategory_id]).category_id\n    @article = Article.new(@parameters)\n\n    respond_to do |format|\n      if @article.save\n        format.html { redirect_to @article, notice: 'Article was successfully created.' }\n        format.json { render :show, status: :created, location: @article }\n      else\n        format.html { render :new }\n        format.json { render json: @article.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /articles/1\n  # PATCH/PUT /articles/1.json\n  def update\n    respond_to do |format|\n      if @article.update(article_params)\n        format.html { redirect_to @article, notice: 'Article was successfully updated.' }\n        format.json { render :show, status: :ok, location: @article }\n      else\n        format.html { render :edit }\n        format.json { render json: @article.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /articles/1\n  # DELETE /articles/1.json\n  def destroy\n    @article.destroy\n    respond_to do |format|\n      format.html { redirect_to root_path, notice: 'Article was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_article\n      @article = Article.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def article_params\n      params.require(:article).permit(:title,:content,:subcategory_id)\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "google-api", "pagespeed"], "answers": [{"tags": [], "owner": {"reputation": 42, "user_id": 3998383, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5cda52f2431b8224bdebe1e85cef0e25?s=128&d=identicon&r=PG&f=1", "display_name": "KJS", "link": "https://stackoverflow.com/users/3998383/kjs"}, "is_accepted": true, "score": 0, "last_activity_date": 1470166509, "creation_date": 1470166509, "answer_id": 38729056, "question_id": 38623320, "link": "https://stackoverflow.com/questions/38623320/ensure-batch-request-for-google-api-occurs-once-per-second/38729056#38729056", "title": "Ensure Batch request for Google API occurs once per second", "body": "<p>I misread the quota for Google Pagespeed - it's 100 requests / 100 seconds. So one request a second. It seems the more I check that it actually is 1 request / second. I still have trouble trying to run 100 requests then waiting 100 seconds.</p>\n"}], "owner": {"reputation": 42, "user_id": 3998383, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5cda52f2431b8224bdebe1e85cef0e25?s=128&d=identicon&r=PG&f=1", "display_name": "KJS", "link": "https://stackoverflow.com/users/3998383/kjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 38729056, "answer_count": 1, "score": 0, "last_activity_date": 1470166509, "creation_date": 1469654138, "question_id": 38623320, "link": "https://stackoverflow.com/questions/38623320/ensure-batch-request-for-google-api-occurs-once-per-second", "title": "Ensure Batch request for Google API occurs once per second", "body": "<p>I'm having some trouble with sending batch requests for the pagespeed API. From what I have seen in my google developers console I should have 100 requests per second with a max of 25,000 per day. However, I'm running into a problem even just trying to do 50 per second. I have tried to impose timing into my ruby application and for some reason that doesn't change the error. I still get the rateLimitExceeded Error from google on a decent amount of the results. I'm doing this on arrays containing ~1000 urls if that matters.</p>\n\n<p>Here's my batch function, I call it in a loop from another function, I thought this might work better for timing. But it didn't seem to change anything.</p>\n\n<pre><code>def send_request(urls)\n  @psservice.batch do |ps|\n    urls.each do |url|\n      ps.run_pagespeed(url) do |result, err|\n        err.nil? ? @data.push(result) : @errors.push(\"#{url}, #{err}\")\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>This gets called from</p>\n\n<pre><code>@urls.each_slice(50).to_a.each do |url_list|\n  send_request(url_list, options)\n  sleep(1)\nend\n</code></pre>\n\n<p>Any ideas why this would occur? Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1686, "user_id": 109589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32f6a7fd69f56ca44e7303af17be8716?s=128&d=identicon&r=PG", "display_name": "mattmcmanus", "link": "https://stackoverflow.com/users/109589/mattmcmanus"}, "edited": false, "score": 0, "creation_date": 1469655375, "post_id": 38623390, "comment_id": 64632803, "body": "So simple! I had just started messing around with the transforms."}], "tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": true, "score": 3, "last_activity_date": 1469654953, "last_edit_date": 1469654953, "creation_date": 1469654447, "answer_id": 38623390, "question_id": 38623069, "link": "https://stackoverflow.com/questions/38623069/rails-how-to-query-time-range-not-date-values-for-a-model-in-activerecord/38623390#38623390", "title": "Rails: How to query time range, not date, values for a model in activerecord", "body": "<p>I see by tags, that you specified, that you use PostgreSQL database. You could use a database mechanism to convert <code>DateTime</code> type column to <code>time</code> type.</p>\n\n<p>That can be done by using a double colon operator (<code>::</code>):</p>\n\n<pre><code>where('notification_report_reminder_time::time &gt;= ? and notification_report_reminder_time &lt;= ?', start, ending)\n</code></pre>\n"}], "owner": {"reputation": 1686, "user_id": 109589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32f6a7fd69f56ca44e7303af17be8716?s=128&d=identicon&r=PG", "display_name": "mattmcmanus", "link": "https://stackoverflow.com/users/109589/mattmcmanus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1532, "favorite_count": 0, "accepted_answer_id": 38623390, "answer_count": 1, "score": 3, "last_activity_date": 1469654953, "creation_date": 1469653145, "question_id": 38623069, "link": "https://stackoverflow.com/questions/38623069/rails-how-to-query-time-range-not-date-values-for-a-model-in-activerecord", "title": "Rails: How to query time range, not date, values for a model in activerecord", "body": "<p>I have a model with a <code>time</code> attribute. It's configuration for when a user wants to receive an email, i.e., 5 PM EST.  It's stored in the database as <code>21:00:00</code>. I'd like to query it by range. For example, I'd like every user with a reminder time between <code>20:55:00</code> and <code>21:05:05</code>.</p>\n\n<p>Rails seems to handle time attributes kind of strangely because it wants to show it as a full DateTime, so the database has <code>21:00:00</code> but when loaded in rails, it shows it as 2000-01-01 17:00:00. </p>\n\n<p>My code right now looks like: </p>\n\n<pre><code>scope :receives_report_reminder_at, -&gt; (time) do\n    start = (time - 5.minutes).strftime('%T')\n    ending = (time + 5.minutes).strftime('%T')\n\n    where(notification_report_reminder_time: start...ending)\nend\n</code></pre>\n\n<p>This works in my test cases but doesn't work when I try it outside of tests. Thoughts? Is there a proper way to handle scenario or am I go about it wrong?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1469682569, "creation_date": 1469682569, "answer_id": 38627524, "question_id": 38622574, "link": "https://stackoverflow.com/questions/38622574/opening-object-to-include-a-module/38627524#38627524", "title": "Opening Object to include a module", "body": "<p>running <code>class Object; include Shell; end</code></p>\n\n<p>is the same as just <code>include Shell</code>, since <code>Object</code> is the default scope.</p>\n\n<p>This is not bad for memory, it's a pretty fundamental behavior.</p>\n\n<p>If you want to avoid working on the <code>Object</code> (global) scope, you can define a custom module that includes <code>Shell</code>:</p>\n\n<pre><code>class App\n  include Shell\n  def self.begin\n    # do something with shell\n  end\nend\nApp.begin\n</code></pre>\n\n<p>though if you're making a REPL and do want your methods available on the global scope, then saying <code>include Shell</code> without a wrapper class seems a good approach. </p>\n"}], "owner": {"reputation": 619, "user_id": 4996524, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5b7910ac129ed37a15e32deb4a2c3bd9?s=128&d=identicon&r=PG&f=1", "display_name": "YoTengoUnLCD", "link": "https://stackoverflow.com/users/4996524/yotengounlcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1469682569, "creation_date": 1469651143, "question_id": 38622574, "link": "https://stackoverflow.com/questions/38622574/opening-object-to-include-a-module", "title": "Opening Object to include a module", "body": "<p>I'm writing an interactive shell (just as irb) in ruby, for another language. I thought of writing all the functions regarding the shell (i.e read input and parse) in a module, then doing <code>class Object; include Shell; end</code>. </p>\n\n<p>My doubt is: From my readings from <em>Ruby under a microscope</em>, I learned that in CRuby (what I'm using), when you include a module, ruby creates a copy of this module and appends it as the super class of the class that includes it, so it seems that this would waste a bit of memory, but then I looked into the kernel module, which AFAIK is included in object, and this seems okay. </p>\n\n<p>Finally, the question is, Would it be a good practice to include <code>Shell</code> into <code>Object</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469650985, "post_id": 38622326, "comment_id": 64630609, "body": "There are erb tags which load data from ruby. Search the app code for admin2 to find where it&#39;s defined"}, {"owner": {"reputation": 949, "user_id": 2271895, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a3b21a689a489041662878dbca9bf981?s=128&d=identicon&r=PG&f=1", "display_name": "Tan", "link": "https://stackoverflow.com/users/2271895/tan"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469654228, "post_id": 38622326, "comment_id": 64632253, "body": "@maxpleaner In one of the erb I did find something like this <code>{&quot;result&quot;:&lt;%= @result.to_json %&gt;, &quot;user_id&quot;:&lt;%= @user.id.to_json %&gt;}  </code>"}], "answers": [{"comments": [{"owner": {"reputation": 949, "user_id": 2271895, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a3b21a689a489041662878dbca9bf981?s=128&d=identicon&r=PG&f=1", "display_name": "Tan", "link": "https://stackoverflow.com/users/2271895/tan"}, "edited": false, "score": 0, "creation_date": 1469653726, "post_id": 38622560, "comment_id": 64631984, "body": "Helpers are there inside a separate helper folder but I couldn&#39;t find the specific variable inside <code>users_helpers.rb</code>. One of the method which looks promising to me is defined as follows :  <code>def link_to_current_user(options={})     if current_user       link_to_user current_user, options     else       content_text = options.delete(:content_text) || &#39;not signed in&#39;       # kill ignored options from link_to_user       [:content_method, :title_method].each{|opt| options.delete(opt)}        link_to_login_with_IP content_text, options     end   end</code>"}, {"owner": {"reputation": 4835, "user_id": 68194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/baf4184ea594b57be1e57a0b7a679c05?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/68194/matthew"}, "reply_to_user": {"reputation": 949, "user_id": 2271895, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a3b21a689a489041662878dbca9bf981?s=128&d=identicon&r=PG&f=1", "display_name": "Tan", "link": "https://stackoverflow.com/users/2271895/tan"}, "edited": false, "score": 0, "creation_date": 1469722926, "post_id": 38622560, "comment_id": 64666780, "body": "<code>current_user</code> is a common paradigm for handling user authentication, I suspect you&#39;re receiving the helper methods from a gem that&#39;s being used. Check your Gemfile and see which gems are being included that have to do with Users and read that gem&#39;s documentation. You&#39;ll probably find what you&#39;re looking for."}], "tags": [], "owner": {"reputation": 4835, "user_id": 68194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/baf4184ea594b57be1e57a0b7a679c05?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/68194/matthew"}, "is_accepted": true, "score": 1, "last_activity_date": 1469651100, "creation_date": 1469651100, "answer_id": 38622560, "question_id": 38622326, "link": "https://stackoverflow.com/questions/38622326/figuring-out-the-dynamic-fields-in-ruby-mvc/38622560#38622560", "title": "Figuring out the dynamic fields in ruby mvc", "body": "<p>I'm going to assume you're using Rails given the presence of ActiveRecord. Anytime there are local variables referenced in the view layer of a Rails application, those variables must either be defined within that view or are provided using a helper.</p>\n\n<p>Check the project's <code>helpers</code> directory and see if there are any methods providing the types of local variables you find in the view.</p>\n\n<p>If you still don't find any helpers, you can also look for any declaration of <code>helper_method</code> in a controller after a definition of the view's local variable name.</p>\n\n<p>Other helper methods can be provided by imported libraries. To investigate that further you'll need to look in the Gemfile and see what gems are being included and read their documentation to find out what methods they expose to the view layer.</p>\n"}], "owner": {"reputation": 949, "user_id": 2271895, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/a3b21a689a489041662878dbca9bf981?s=128&d=identicon&r=PG&f=1", "display_name": "Tan", "link": "https://stackoverflow.com/users/2271895/tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 38622560, "answer_count": 1, "score": 0, "last_activity_date": 1469651100, "creation_date": 1469650260, "last_edit_date": 1469650580, "question_id": 38622326, "link": "https://stackoverflow.com/questions/38622326/figuring-out-the-dynamic-fields-in-ruby-mvc", "title": "Figuring out the dynamic fields in ruby mvc", "body": "<p>I don't know ruby but trying to figure out how <code>user</code> id is getting populated after loging into a website. In the ruby code,I see that MVC for Ruby has been used by someone and I am currently inside  the \"views\" folder, Inside layout folder there is a file called \"application.html\".</p>\n\n<p>I am referring to the following piece of code : </p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n            &lt;% if admin2? %&gt;\n            var userrole = 'admin';\n            var isAdmin = true;\n            &lt;% elsif registrar? %&gt;\n            var userrole = 'registrar';\n            var isAdmin = false;\n            &lt;% elsif viewer? %&gt;\n            var userrole = 'viewer';\n            var isAdmin = false;\n            &lt;% end %&gt;\n            var myuserID = &lt;%= user? %&gt;;\n</code></pre>\n\n<p>When I log into the website, and do \"View Page Source\", I see all the variables values. I am trying to figure out how <code>var myuserID = 12</code> value is getting populated. Does this looks like session variables in ruby? Could anyone give some sort of hint to where I should be looking for so that I can figure out how the dynamic fields are getting populated?</p>\n\n<p>I can see a <code>session.rb</code> defined in the <code>models</code> folder and it has only few lines as follows :</p>\n\n<pre><code>class Session &lt; ActiveRecord::Base\n    attr_accessible :user_id\n\n\nend\n</code></pre>\n\n<p>Could the above be responsible for getting the user_id?</p>\n"}, {"tags": ["arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1469649077, "post_id": 38621974, "comment_id": 64629644, "body": "Show your failed attempts."}], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 0, "last_activity_date": 1469650504, "creation_date": 1469650504, "answer_id": 38622396, "question_id": 38621974, "link": "https://stackoverflow.com/questions/38621974/ruby-dynamically-create-array/38622396#38622396", "title": "Ruby dynamically create array", "body": "<p>You're returning a hash, to insert into a larger hash, so there is no reason to try to produce a string containing a <em>serialized</em> hash. Just return a hash.</p>\n\n<pre><code>def block(value,type)\n  {\n      'value' =&gt; value.to_i,\n      'type' =&gt; type\n  }\nend\n</code></pre>\n\n<p>If you want to turn an array of values and types into a series of hashes, you should use <code>map</code> on the array.</p>\n"}, {"tags": [], "owner": {"reputation": 4835, "user_id": 68194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/baf4184ea594b57be1e57a0b7a679c05?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/68194/matthew"}, "is_accepted": true, "score": 0, "last_activity_date": 1469650705, "creation_date": 1469650705, "answer_id": 38622463, "question_id": 38621974, "link": "https://stackoverflow.com/questions/38621974/ruby-dynamically-create-array/38622463#38622463", "title": "Ruby dynamically create array", "body": "<p>Assuming you're passing in a couple arrays of values and types, you can use the <code>zip</code> method to align them:</p>\n\n<pre><code>def info(values, types)\n  blocks = values.zip(types).map do |value, type|\n    {\n      'value' =&gt; value.to_i,\n      'type' =&gt; type\n    }\n  end\n\n  {\n    'individual' =&gt; {\n      'title' =&gt; 'Mr',\n      'firstName' =&gt; 'Joe',\n      'middleName' =&gt; '',\n      'lastName' =&gt; 'Bloggs',\n      'birthDate' =&gt; '2016-01-01',\n      'incomeAmount' =&gt; 50,\n      'emailAddress' =&gt; 'clear@gmail.com'\n\n    },\n    'blocks' =&gt; blocks\n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 1964320, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b3c2ad4841578dac172935bfb2cdeba3?s=128&d=identicon&r=PG", "display_name": "Curious_Bop", "link": "https://stackoverflow.com/users/1964320/curious-bop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 38622463, "answer_count": 2, "score": 0, "last_activity_date": 1469652689, "creation_date": 1469649005, "last_edit_date": 1469649317, "question_id": 38621974, "link": "https://stackoverflow.com/questions/38621974/ruby-dynamically-create-array", "title": "Ruby dynamically create array", "body": "<p>I have various test conditions and based on particular inputs I want to create what is an api body request that I can consume. There is one part of the request that I would like to build and based on that input return me a particular amount of additional blocks.</p>\n\n<p>The method below has two 'blocks' currently hardcoded in:</p>\n\n<pre><code>def info(*value, *type)\n\n#request build logic here\n\n  return {\n      'individual' =&gt; {\n          'title' =&gt; 'Mr',\n          'firstName' =&gt; 'Joe',\n          'middleName' =&gt; '',\n          'lastName' =&gt; 'Bloggs',\n          'birthDate' =&gt; '2016-01-01',\n          'incomeAmount' =&gt; 50,\n          'emailAddress' =&gt; 'clear@gmail.com',\n\n      },\n      'blocks' =&gt; [\n          {\n              'value' =&gt; 400,\n              'type' =&gt; 'car'\n          },\n          {\n              'value' =&gt; 400,\n              'type' =&gt; 'jug'\n          }\n      ]\n  }\nend \n</code></pre>\n\n<p>So based on the inputs I would like to create my 'blocks' e.g value = 100 , type = house so the block would just be that value in the format above.</p>\n\n<p>With the idea being if I passed it 10 values / 10 types then I return all 10. I've attempted to call a another method that built my response but I'm struggling to get it to repeat based on the input</p>\n\n<pre><code>def block(value,type)\n  \"{\n      'value' =&gt; #{value.to_i},\n      'type' =&gt; #{type}\n  },\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5164, "user_id": 1461269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5507a725df760d1a9b0dd88505f8bd1?s=128&d=identicon&r=PG", "display_name": "arjabbar", "link": "https://stackoverflow.com/users/1461269/arjabbar"}, "edited": false, "score": 0, "creation_date": 1469648360, "post_id": 38621667, "comment_id": 64629253, "body": "How&#39;s everything else on your machine. Have you looked at your Task Manager?"}, {"owner": {"reputation": 3554, "user_id": 1017247, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vKHq9.jpg?s=128&g=1", "display_name": "moritzg", "link": "https://stackoverflow.com/users/1017247/moritzg"}, "reply_to_user": {"reputation": 5164, "user_id": 1461269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5507a725df760d1a9b0dd88505f8bd1?s=128&d=identicon&r=PG", "display_name": "arjabbar", "link": "https://stackoverflow.com/users/1461269/arjabbar"}, "edited": false, "score": 0, "creation_date": 1469648506, "post_id": 38621667, "comment_id": 64629333, "body": "I&#39;m starting the server through cmd and the process shows 0-1% CPU and &lt;1 MB RAM. I&#39;ve got 8 GB RAM and an i5..."}], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 6645678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MuJd.png?s=128&g=1", "display_name": "Carlos Orellana", "link": "https://stackoverflow.com/users/6645678/carlos-orellana"}, "reply_to_user": {"reputation": 3554, "user_id": 1017247, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vKHq9.jpg?s=128&g=1", "display_name": "moritzg", "link": "https://stackoverflow.com/users/1017247/moritzg"}, "edited": false, "score": 0, "creation_date": 1469649872, "post_id": 38621969, "comment_id": 64630071, "body": "Please copy and paste:  The output or your terminal, your routes file and in your terminal put this: rake routes and paste the results too."}], "tags": [], "owner": {"reputation": 186, "user_id": 6645678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MuJd.png?s=128&g=1", "display_name": "Carlos Orellana", "link": "https://stackoverflow.com/users/6645678/carlos-orellana"}, "is_accepted": false, "score": 0, "last_activity_date": 1469648971, "creation_date": 1469648971, "answer_id": 38621969, "question_id": 38621667, "link": "https://stackoverflow.com/questions/38621667/rails-puma-extremely-slow-view-rendering/38621969#38621969", "title": "Rails/Puma: Extremely slow view rendering", "body": "<p>you are using: <code>rails s puma</code>? if your are doing that, check the console, maybe something with your assets is not right and is causing the delay. Rails use turbolinks in order to improve the call of assets.</p>\n"}], "owner": {"reputation": 3554, "user_id": 1017247, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vKHq9.jpg?s=128&g=1", "display_name": "moritzg", "link": "https://stackoverflow.com/users/1017247/moritzg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 855, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469649272, "creation_date": 1469647945, "last_edit_date": 1469649272, "question_id": 38621667, "link": "https://stackoverflow.com/questions/38621667/rails-puma-extremely-slow-view-rendering", "title": "Rails/Puma: Extremely slow view rendering", "body": "<p>I just started with Ruby &amp; Rails, and installed it via the RailsInstaller, currently I'm working on the Tutorial and Get Started section and single pages without any logic take 6000 ms (or more) to load. It's absolutely horrible. I tried <code>config.assets.debug = false</code> but that didn't help at all... I'm on Windows 10</p>\n\n<p>Thanks!</p>\n\n<p>Edit:</p>\n\n<p>This line looks suspicious: </p>\n\n<pre><code>Rendered C:/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (13516.0ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 5813202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-nlaH5Pz1e_s/AAAAAAAAAAI/AAAAAAAAACA/G8usG_tGCz0/photo.jpg?sz=128", "display_name": "Gustavo Muratalla", "link": "https://stackoverflow.com/users/5813202/gustavo-muratalla"}, "is_accepted": false, "score": 0, "last_activity_date": 1469647464, "creation_date": 1469647464, "answer_id": 38621538, "question_id": 38621366, "link": "https://stackoverflow.com/questions/38621366/how-do-i-retrieve-my-ratings-from-my-database/38621538#38621538", "title": "How do i retrieve my ratings from my database", "body": "<p>If you Ratings are stored in an Array then you would had to write a function to separate all the following: <code>\"['']\"</code>. It would be much simple to create an enum or give you rating an ID so when you post a movie and want to give it a rating you can call it by calling its ID or enum value.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6621643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fp1zfZ48Ihs/AAAAAAAAAAI/AAAAAAAABpM/mnDHOsI1Oo8/photo.jpg?sz=128", "display_name": "SammieNeutron", "link": "https://stackoverflow.com/users/6621643/sammieneutron"}, "edited": false, "score": 0, "creation_date": 1469699373, "post_id": 38621851, "comment_id": 64649170, "body": "Yeah. That actually worked but i got this result [&quot;G&quot;, &quot;R&quot;, &quot;R&quot;, &quot;PG-13&quot;, &quot;PG-13&quot;, &quot;R&quot;, &quot;G&quot;, &quot;PG&quot;, &quot;PG&quot;, &quot;G&quot;].. but it&#39;s not meant to repeat a particular rating twice or more. how can i go about it?"}, {"owner": {"reputation": 449, "user_id": 5983505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101041139416992/picture?type=large", "display_name": "Alexander Swann", "link": "https://stackoverflow.com/users/5983505/alexander-swann"}, "reply_to_user": {"reputation": 15, "user_id": 6621643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fp1zfZ48Ihs/AAAAAAAAAAI/AAAAAAAABpM/mnDHOsI1Oo8/photo.jpg?sz=128", "display_name": "SammieNeutron", "link": "https://stackoverflow.com/users/6621643/sammieneutron"}, "edited": false, "score": 0, "creation_date": 1469699707, "post_id": 38621851, "comment_id": 64649383, "body": "I imagine <code>Movie.pluck(:ratings).uniq</code> should work so it reduces your array to unique elements."}], "tags": [], "owner": {"reputation": 449, "user_id": 5983505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10101041139416992/picture?type=large", "display_name": "Alexander Swann", "link": "https://stackoverflow.com/users/5983505/alexander-swann"}, "is_accepted": true, "score": 0, "last_activity_date": 1469648594, "creation_date": 1469648594, "answer_id": 38621851, "question_id": 38621366, "link": "https://stackoverflow.com/questions/38621366/how-do-i-retrieve-my-ratings-from-my-database/38621851#38621851", "title": "How do i retrieve my ratings from my database", "body": "<p>From the fact you've tagged rails and listed what sounds like a table structure I'm going to assume you're using Rails' ORM ActiveRecord with postgresql database right? If so, you could access your ratings by using the command <code>Movie.pluck(:ratings)</code>. This should grab all the inserts in your ratings column for your Movies table and return an array of them. You will need to implement this in one of your MoviesController actions.</p>\n"}, {"tags": [], "owner": {"reputation": 515, "user_id": 4118252, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a873f0d22f24426762ccf352aa933e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Inzamam Tahir", "link": "https://stackoverflow.com/users/4118252/inzamam-tahir"}, "is_accepted": false, "score": 3, "last_activity_date": 1469649346, "creation_date": 1469649346, "answer_id": 38622079, "question_id": 38621366, "link": "https://stackoverflow.com/questions/38621366/how-do-i-retrieve-my-ratings-from-my-database/38622079#38622079", "title": "How do i retrieve my ratings from my database", "body": "<p>To get ratings of all movies in a single array like you mentioned you simply use:</p>\n\n<pre><code>Movie.pluck(:ratings) #assuming column name ratings\n</code></pre>\n\n<p>This will give results like</p>\n\n<pre><code>['G','PG','PG-13','R']\n</code></pre>\n\n<p>If you also want to know that which movie has which ratings then, you can modify the code to following:</p>\n\n<pre><code>Movie.pluck(:id, :ratings)\n</code></pre>\n\n<p>Its result will be something like:</p>\n\n<pre><code>[[1,\"PG\"], [2,\"PG-13\"], [3,\"G\"]]\n</code></pre>\n\n<p>For more information visit this link</p>\n\n<p><a href=\"http://apidock.com/rails/ActiveRecord/Calculations/pluck\" rel=\"nofollow\">http://apidock.com/rails/ActiveRecord/Calculations/pluck</a></p>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 6645678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MuJd.png?s=128&g=1", "display_name": "Carlos Orellana", "link": "https://stackoverflow.com/users/6645678/carlos-orellana"}, "is_accepted": false, "score": 0, "last_activity_date": 1469649653, "creation_date": 1469649653, "answer_id": 38622168, "question_id": 38621366, "link": "https://stackoverflow.com/questions/38621366/how-do-i-retrieve-my-ratings-from-my-database/38622168#38622168", "title": "How do i retrieve my ratings from my database", "body": "<p>Please check this documentation about getting specific columns. In particular de <code>pluck</code> method.</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck</a></p>\n\n<p>So, you can do something like:</p>\n\n<pre><code>Movie.pluck(:ratings)\n</code></pre>\n\n<p>Other option is use a normal \"query\" structure:</p>\n\n<pre><code>@movies = Movie.select('ratings').where(...#some condition)\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6621643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fp1zfZ48Ihs/AAAAAAAAAAI/AAAAAAAABpM/mnDHOsI1Oo8/photo.jpg?sz=128", "display_name": "SammieNeutron", "link": "https://stackoverflow.com/users/6621643/sammieneutron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 38621851, "answer_count": 4, "score": -3, "last_activity_date": 1469649653, "creation_date": 1469646852, "question_id": 38621366, "link": "https://stackoverflow.com/questions/38621366/how-do-i-retrieve-my-ratings-from-my-database", "title": "How do i retrieve my ratings from my database", "body": "<p>how do i get to retrieve my ratings something like this \"['G','PG','PG-13','R']\" from my database through my class method in my Movie class? My database contains a list of Movies table in which the row entails \"title\",\"ratings\",\"description\",\"release date\".</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 4734606, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10203904825168634/picture?type=large", "display_name": "Ad Rienks", "link": "https://stackoverflow.com/users/4734606/ad-rienks"}, "edited": false, "score": 0, "creation_date": 1469654610, "post_id": 38621529, "comment_id": 64632455, "body": "Yes, I have seen it now; <code>tail -f log&#47;development.log</code> shows the latest entries!"}], "tags": [], "owner": {"reputation": 10921, "user_id": 85125, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5636d7549013d9fc365de56ad90d12bc?s=128&d=identicon&r=PG", "display_name": "Bart Jedrocha", "link": "https://stackoverflow.com/users/85125/bart-jedrocha"}, "is_accepted": false, "score": 2, "last_activity_date": 1469647433, "creation_date": 1469647433, "answer_id": 38621529, "question_id": 38621237, "link": "https://stackoverflow.com/questions/38621237/as-the-admin-user-destroy-a-few-sample-users-through-the-web-interface-what-ar/38621529#38621529", "title": "As the admin user, destroy a few sample users through the web interface. What are the corresponding entries in the server log?", "body": "<p>The server log is just a generic term and can refer to <code>log/development.log</code> for applications running locally or <code>log/production.log</code> for applications running in production. You can <code>tail -f log/development.log</code> to see the entries when working through the tutorial locally.</p>\n"}], "owner": {"reputation": 360, "user_id": 4734606, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10203904825168634/picture?type=large", "display_name": "Ad Rienks", "link": "https://stackoverflow.com/users/4734606/ad-rienks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469647433, "creation_date": 1469646357, "question_id": 38621237, "link": "https://stackoverflow.com/questions/38621237/as-the-admin-user-destroy-a-few-sample-users-through-the-web-interface-what-ar", "title": "As the admin user, destroy a few sample users through the web interface. What are the corresponding entries in the server log?", "body": "<p>Again, a question about Michael Hartl's Ruby on Rails Tutorial.\nAbove is an exercise to destroy users.\nMy question is: where is the 'server log', and how can I see the entries?</p>\n\n<p>In my application there is a 'development.log' and a 'test.log', but I see no server log.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 69, "user_id": 5144901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-LIXvLpNzg94/AAAAAAAAAAI/AAAAAAAAAAA/joS0AS2nVSA/photo.jpg?sz=128", "display_name": "Chris Martinez", "link": "https://stackoverflow.com/users/5144901/chris-martinez"}, "reply_to_user": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "edited": false, "score": 0, "creation_date": 1469645813, "post_id": 38621021, "comment_id": 64627922, "body": "I have idea how to go about this. I am very knew to rails"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 5144901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-LIXvLpNzg94/AAAAAAAAAAI/AAAAAAAAAAA/joS0AS2nVSA/photo.jpg?sz=128", "display_name": "Chris Martinez", "link": "https://stackoverflow.com/users/5144901/chris-martinez"}, "edited": false, "score": 0, "creation_date": 1469646061, "post_id": 38621132, "comment_id": 64628058, "body": "Thanks! I prefer learning it myself, I just didn&#39;t know where to start"}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "reply_to_user": {"reputation": 69, "user_id": 5144901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-LIXvLpNzg94/AAAAAAAAAAI/AAAAAAAAAAA/joS0AS2nVSA/photo.jpg?sz=128", "display_name": "Chris Martinez", "link": "https://stackoverflow.com/users/5144901/chris-martinez"}, "edited": false, "score": 0, "creation_date": 1469646184, "post_id": 38621132, "comment_id": 64628132, "body": "I just updated the post.  See what you can do!  If you have any questions, feel free to start up a chat through StackOverflow"}], "tags": [], "owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1469646110, "last_edit_date": 1469646110, "creation_date": 1469645946, "answer_id": 38621132, "question_id": 38621021, "link": "https://stackoverflow.com/questions/38621021/how-can-you-make-the-id-in-the-url-be-random/38621132#38621132", "title": "How can you make the id in the URL be random?", "body": "<p>I won't give you the whole answer since it's great to learn these things, but if you have any questions feel free to ask me! </p>\n\n<p>This is where you should start: <a href=\"http://ruby-doc.org/stdlib-2.1.2/libdoc/securerandom/rdoc/SecureRandom.html#method-c-urlsafe_base64\" rel=\"nofollow\">URLSafe Base 64</a></p>\n\n<p><a href=\"http://railscasts.com/episodes/124-beta-invitations\" rel=\"nofollow\">Here's a Railscasts episode</a> that's soft of similar to what you want, see if you can expand from there!  If you're new to Rails, be sure to check out Railscasts.  All the pro episodes are available for free on youtube!</p>\n"}, {"comments": [{"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "edited": false, "score": 1, "creation_date": 1469646303, "post_id": 38621184, "comment_id": 64628197, "body": "Heads up, <code>find_by_x</code> is considered an antipattern.  The preferred solution is <code>find_by(secure_token: &lt;criteria&gt;)</code>"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 1, "creation_date": 1469646468, "post_id": 38621184, "comment_id": 64628306, "body": "<code>SecureRandom::uuid</code> is perfect for this sort of thing. Just be sure that your system has sufficient entropy!"}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "edited": false, "score": 0, "creation_date": 1469646571, "post_id": 38621184, "comment_id": 64628357, "body": "OP: this answer is a great jumping off point!  You may notice that when you use <code>Model.find()</code>, it throws an error (exception) if the record isn&#39;t found.  However, <code>Model.find_by()</code> doesn&#39;t throw an exception!  You can make it throw an exception by using <code>Model.find_by!()</code> (notice the bang at the end)"}, {"owner": {"reputation": 2528, "user_id": 2844464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9f29e9facc25e69a329d36185d1f44?s=128&d=identicon&r=PG", "display_name": "Alex Santos", "link": "https://stackoverflow.com/users/2844464/alex-santos"}, "edited": false, "score": 0, "creation_date": 1469646739, "post_id": 38621184, "comment_id": 64628438, "body": "You&#39;re correct, Kieran. Feel free to edit with your suggestions."}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "edited": false, "score": 0, "creation_date": 1469646785, "post_id": 38621184, "comment_id": 64628460, "body": "It wasn&#39;t meant to be a correction, just more information to the OP :)"}, {"owner": {"reputation": 69, "user_id": 5144901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-LIXvLpNzg94/AAAAAAAAAAI/AAAAAAAAAAA/joS0AS2nVSA/photo.jpg?sz=128", "display_name": "Chris Martinez", "link": "https://stackoverflow.com/users/5144901/chris-martinez"}, "edited": false, "score": 0, "creation_date": 1469646949, "post_id": 38621184, "comment_id": 64628530, "body": "Thank you so much guys! Just one more question. Will this change the URL that displays the lobby?"}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "edited": false, "score": 0, "creation_date": 1469647077, "post_id": 38621184, "comment_id": 64628600, "body": "Not by default.  You can override the <code>to_param</code> method for <code>Lobby</code>.  I&#39;d check the docs for more info :)"}, {"owner": {"reputation": 69, "user_id": 5144901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-LIXvLpNzg94/AAAAAAAAAAI/AAAAAAAAAAA/joS0AS2nVSA/photo.jpg?sz=128", "display_name": "Chris Martinez", "link": "https://stackoverflow.com/users/5144901/chris-martinez"}, "edited": false, "score": 0, "creation_date": 1469647465, "post_id": 38621184, "comment_id": 64628796, "body": "@AlexCorreiaSantos Could you explain why you add null: false in the migration? That seems to throw up some errors for me."}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "reply_to_user": {"reputation": 69, "user_id": 5144901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-LIXvLpNzg94/AAAAAAAAAAI/AAAAAAAAAAA/joS0AS2nVSA/photo.jpg?sz=128", "display_name": "Chris Martinez", "link": "https://stackoverflow.com/users/5144901/chris-martinez"}, "edited": false, "score": 0, "creation_date": 1469649142, "post_id": 38621184, "comment_id": 64629675, "body": "@ChrisMartinez It&#39;s saying it can&#39;t be empty.  If some records were added with empty <code>secure_token</code> fields, there&#39;d be no way to access them.  If the errors your getting happen during CRUD actions, it&#39;s probably because you&#39;re trying to save a record without a <code>secure_token</code>"}, {"owner": {"reputation": 2528, "user_id": 2844464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9f29e9facc25e69a329d36185d1f44?s=128&d=identicon&r=PG", "display_name": "Alex Santos", "link": "https://stackoverflow.com/users/2844464/alex-santos"}, "reply_to_user": {"reputation": 69, "user_id": 5144901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-LIXvLpNzg94/AAAAAAAAAAI/AAAAAAAAAAA/joS0AS2nVSA/photo.jpg?sz=128", "display_name": "Chris Martinez", "link": "https://stackoverflow.com/users/5144901/chris-martinez"}, "edited": false, "score": 1, "creation_date": 1469650260, "post_id": 38621184, "comment_id": 64630252, "body": "@ChrisMartinez the reason has been correctly explained by Kieran. It&#39;s just a safety-net. You can drop that &quot;null: false&quot; and have the validation only in the model. The error you&#39;re getting is likely to be caused by creating a column with <code>null: false</code> in a table that already has elements. So you would have to first create the column with <code>null: true</code>, iterate over all <code>Lobbies</code> and generate their token. After that, you should be able to add the <code>null: false</code> constraint."}], "tags": [], "owner": {"reputation": 2528, "user_id": 2844464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9f29e9facc25e69a329d36185d1f44?s=128&d=identicon&r=PG", "display_name": "Alex Santos", "link": "https://stackoverflow.com/users/2844464/alex-santos"}, "is_accepted": true, "score": 2, "last_activity_date": 1469650320, "last_edit_date": 1469650320, "creation_date": 1469646163, "answer_id": 38621184, "question_id": 38621021, "link": "https://stackoverflow.com/questions/38621021/how-can-you-make-the-id-in-the-url-be-random/38621184#38621184", "title": "How can you make the id in the URL be random?", "body": "<p>You should share a bit more information as Gavin said. Knowing what you have already tried can help us give you more/better information on how to proceed.</p>\n\n<p>I hope this sends you the right direction. For generating random IDs you can use <strong>SecureRandom</strong>:\n<a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html\" rel=\"nofollow\">http://ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html</a></p>\n\n<p>I'd recommend you add another column to the <code>lobbies</code> table, and make it unique:</p>\n\n<pre><code>add_column :lobbies, :secure_token, :string, null: false\nadd_index :lobbies, :secure_token, unique: true\n</code></pre>\n\n<p>Now, in your <code>Lobby</code> model, whenever it is created, you can generate a unique token. For simplicity, you can do something along these lines:</p>\n\n<pre><code>class Lobby &lt; ActiveRecord::Base\n  before_create :generate_unique_secure_token\n\n  # Rest of the model's code\n\n  private\n\n\n  def generate_unique_secure_token\n    begin\n      self.secure_token = SecureRandom.urlsafe_base64\n    end while self.class.exists?(secure_token: secure_token)\n  end\nend\n</code></pre>\n\n<p>This will generate a <code>secure_token</code> every time a <code>Lobby</code> is created. Now in the controller you can use the <code>secure_token</code> instead of the <code>id</code> to find your <code>Lobby</code>. For example:</p>\n\n<pre><code>class LobbiesController &lt; ApplicationController \n  def show\n    @lobby = Lobby.find_by(secure_token: params[:id])\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 5144901, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-LIXvLpNzg94/AAAAAAAAAAI/AAAAAAAAAAA/joS0AS2nVSA/photo.jpg?sz=128", "display_name": "Chris Martinez", "link": "https://stackoverflow.com/users/5144901/chris-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 38621184, "answer_count": 2, "score": 0, "last_activity_date": 1469650320, "creation_date": 1469645594, "question_id": 38621021, "link": "https://stackoverflow.com/questions/38621021/how-can-you-make-the-id-in-the-url-be-random", "title": "How can you make the id in the URL be random?", "body": "<p>So I am looking for a way to create a randomized id that will link to a lobby that will be shown when the shown method is called in rails. As of right now, the url would look like this: <a href=\"http://localhost:3000/lobby/2\" rel=\"nofollow\">http://localhost:3000/lobby/2</a>. I'm looking to replace that 2 with a randomly generated id so you could send that link to friends if you want them to join your lobby. Any ideas? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "content-management-system", "refinerycms"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5297106, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t2aYcBmCsuA/AAAAAAAAAAI/AAAAAAAABGk/eqzsQLSUe5I/photo.jpg?sz=128", "display_name": "Brice Sanchez", "link": "https://stackoverflow.com/users/5297106/brice-sanchez"}, "is_accepted": true, "score": 1, "last_activity_date": 1470404496, "creation_date": 1470404496, "answer_id": 38790771, "question_id": 38620979, "link": "https://stackoverflow.com/questions/38620979/rails-refinery-cms-adding-to-existing-application-modifying-existing-code-via/38790771#38790771", "title": "Rails/Refinery CMS: Adding to existing application + modifying existing code via CMS", "body": "<blockquote>\n  <p>If you have an existing Ruby on Rails application</p>\n</blockquote>\n\n<p>You can add Refinery CMS in an existing Rails application:\n<a href=\"http://www.refinerycms.com/guides/with-an-existing-rails-app\" rel=\"nofollow\">http://www.refinerycms.com/guides/with-an-existing-rails-app</a></p>\n\n<blockquote>\n  <p>run a command so that your previous models become refinery compatible, that is, you design a page and then it becomes editable in the refinery editors</p>\n</blockquote>\n\n<p>No, you will have to manually convert this models.</p>\n\n<blockquote>\n  <p>I'm asking because I'm planning on designing a website for a non-profit that does not have the resources for paid web developers. Is it possible for one web developer to write out the code and then have it all be editable by the editor? Does anyone have any experience with this? Thank you in advance.</p>\n</blockquote>\n\n<p>Why don't you use a static website generator like middleman or Jekyll ? And choose a Headless/Decoupled CMS like Contentful.</p>\n\n<p>Refinery CMS will soon be able to use it like a Headless CMS but it needs more work to do that:</p>\n\n<ul>\n<li><a href=\"https://github.com/refinerycms-contrib/refinerycms-api\" rel=\"nofollow\">https://github.com/refinerycms-contrib/refinerycms-api</a></li>\n<li><a href=\"https://github.com/refinerycms-contrib/refinerycms-api-wrapper\" rel=\"nofollow\">https://github.com/refinerycms-contrib/refinerycms-api-wrapper</a></li>\n<li><a href=\"https://github.com/refinerycms-contrib/refinerycms_middleman\" rel=\"nofollow\">https://github.com/refinerycms-contrib/refinerycms_middleman</a></li>\n</ul>\n"}], "owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 38790771, "answer_count": 1, "score": 0, "last_activity_date": 1470404496, "creation_date": 1469645459, "question_id": 38620979, "link": "https://stackoverflow.com/questions/38620979/rails-refinery-cms-adding-to-existing-application-modifying-existing-code-via", "title": "Rails/Refinery CMS: Adding to existing application + modifying existing code via CMS", "body": "<p>I've been reading the documentation on Refinery CMS but I haven't seemed to come across the right answer yet. If you have an existing Ruby on Rails application, is there a way to add Refinery to it and then run a command so that your previous models become refinery compatible, that is, you design a page and then it becomes editable in the refinery editors?</p>\n\n<p>I'm asking because I'm planning on designing a website for a non-profit that does not have the resources for paid web developers. Is it possible for one web developer to write out the code and then have it all be editable by the editor? Does anyone have any experience with this? Thank you in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "ajax"], "comments": [{"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "edited": false, "score": 0, "creation_date": 1469644882, "post_id": 38620509, "comment_id": 64627374, "body": "What&#39;s happening is Rails is seeing <code>get_random_ad</code> as a param, and as such it loads up the show action.  Since routes are read from top to bottom, the #show takes precedence.  Are you using the #show action?"}, {"owner": {"reputation": 263, "user_id": 2280983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fc39c1f97a12e59a7a95774b0dd81c5d?s=128&d=identicon&r=PG", "display_name": "Ryan McGarvey", "link": "https://stackoverflow.com/users/2280983/ryan-mcgarvey"}, "reply_to_user": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "edited": false, "score": 0, "creation_date": 1469645163, "post_id": 38620509, "comment_id": 64627547, "body": "No, I don&#39;t have the show action defined anywhere in my routes. I know that&#39;s defined by default for my resource, would putting in an <code>only</code> keyword override that?"}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "edited": false, "score": 0, "creation_date": 1469645398, "post_id": 38620509, "comment_id": 64627698, "body": "You bet!  I made a complete answer on the main post."}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 2280983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fc39c1f97a12e59a7a95774b0dd81c5d?s=128&d=identicon&r=PG", "display_name": "Ryan McGarvey", "link": "https://stackoverflow.com/users/2280983/ryan-mcgarvey"}, "edited": false, "score": 0, "creation_date": 1469647626, "post_id": 38620953, "comment_id": 64628873, "body": "Thanks! This definitely helped me. The only issue now is the app is trying to direct it to a view, when I only want the JSON. Is there a way I can prevent this? I&#39;m doing all view stuff on the front end. Here&#39;s the server log: <code>ActionView::MissingTemplate (Missing template advertisements&#47;get_random_ad, application&#47;get_random_ad with {:locale=&gt;[:en], :formats=&gt;[:json], :handlers=&gt;[:erb, :builder, :coffee, :rabl]}. Searched in: app&#47;views</code>"}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "reply_to_user": {"reputation": 263, "user_id": 2280983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fc39c1f97a12e59a7a95774b0dd81c5d?s=128&d=identicon&r=PG", "display_name": "Ryan McGarvey", "link": "https://stackoverflow.com/users/2280983/ryan-mcgarvey"}, "edited": false, "score": 1, "creation_date": 1469648791, "post_id": 38620953, "comment_id": 64629494, "body": "You actually want a view.  Even a json response is a &#39;view&#39;.  Because of Rails convention, it&#39;s looking for <code>advertisements&#47;get_random_ad</code> with some type of extension or another.  For this, I&#39;d create the file <code>get_random_ad.json.jbuilder</code>, and check out the docs for jbuilder."}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "reply_to_user": {"reputation": 263, "user_id": 2280983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fc39c1f97a12e59a7a95774b0dd81c5d?s=128&d=identicon&r=PG", "display_name": "Ryan McGarvey", "link": "https://stackoverflow.com/users/2280983/ryan-mcgarvey"}, "edited": false, "score": 1, "creation_date": 1469648897, "post_id": 38620953, "comment_id": 64629551, "body": "You can also override the default view path by using <code>render</code>.  Say you have an <code>Advertisement</code> object, you can put <code>render json: &lt;advertisement object&gt;</code> at the bottom of the action, and you&#39;ll achieve a similar result."}, {"owner": {"reputation": 263, "user_id": 2280983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fc39c1f97a12e59a7a95774b0dd81c5d?s=128&d=identicon&r=PG", "display_name": "Ryan McGarvey", "link": "https://stackoverflow.com/users/2280983/ryan-mcgarvey"}, "edited": false, "score": 0, "creation_date": 1469651980, "post_id": 38620953, "comment_id": 64631123, "body": "Thanks a lot! I think there were some basic things I didn&#39;t understand about rails until now. Will update my question with the working code!"}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "reply_to_user": {"reputation": 263, "user_id": 2280983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fc39c1f97a12e59a7a95774b0dd81c5d?s=128&d=identicon&r=PG", "display_name": "Ryan McGarvey", "link": "https://stackoverflow.com/users/2280983/ryan-mcgarvey"}, "edited": false, "score": 0, "creation_date": 1469652289, "post_id": 38620953, "comment_id": 64631274, "body": "No problem!  Feel free to comment here if you have any questions."}], "tags": [], "owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "is_accepted": true, "score": 1, "last_activity_date": 1469645375, "creation_date": 1469645375, "answer_id": 38620953, "question_id": 38620509, "link": "https://stackoverflow.com/questions/38620509/trouble-defining-custom-route-in-rails-all-ajax-requests-are-defaulting-to-the/38620953#38620953", "title": "Trouble defining custom route in Rails - all ajax requests are defaulting to the show route", "body": "<p>Since you're not using the #show action, you can use the <code>only</code> or <code>except</code> arguments.  something like this should work:</p>\n\n<pre><code>   resources :advertisements, except: [:show] do\n     member do\n       get :get_random_ad\n     end\n   end\n</code></pre>\n\n<p>However, if you're only using <code>:get_random_ad</code>, you can omit the resource and instead use </p>\n\n<pre><code>get :random_ad, to: 'advertisements#get_random_ad', as: :random_ad\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 2280983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fc39c1f97a12e59a7a95774b0dd81c5d?s=128&d=identicon&r=PG", "display_name": "Ryan McGarvey", "link": "https://stackoverflow.com/users/2280983/ryan-mcgarvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 38620953, "answer_count": 1, "score": 0, "last_activity_date": 1469645375, "creation_date": 1469643785, "question_id": 38620509, "link": "https://stackoverflow.com/questions/38620509/trouble-defining-custom-route-in-rails-all-ajax-requests-are-defaulting-to-the", "title": "Trouble defining custom route in Rails - all ajax requests are defaulting to the show route", "body": "<p>I'm trying to do an ajax call from the client which aggregates and then returns a single random ad from the server.</p>\n\n<p><strong>client side ajax call</strong></p>\n\n<p><code>getRandomPerk: function() \n        {\n            return $.ajax({url: url + \"/advertisements/get_random_ad.json\", type: \"GET\",dataType: \"json\", error: this.handleAPIError});\n        },</code></p>\n\n<p><strong>routes.rb</strong></p>\n\n<p><code>resources :advertisements do\n    #collection do\n     # get :get_random_ad\n    #end<br>\n    member do\n      get :get_random_ad\n    end\n  end</code></p>\n\n<p><strong>controller advertisement_controller.rb</strong>\n<code>\ndef get_random_ad\n    @advertisement = Advertisement.find_random_advertisement()\nend</code></p>\n\n<p><strong>model advertisement.rb</strong></p>\n\n<p><code>def self.find_random_advertisement<br>\n    #ids = Advertisement.select(\"SELECT id FROM advertisements\")\n    Advertisement.find(1)\n  end</code></p>\n\n<p>(this is supposed to return a random one but I've got it returning a specific one for debug purposes)</p>\n\n<p><strong>Server log</strong></p>\n\n<p><code>[time:0.000] Started GET \"/advertisements/get_random_ad.json\" for 10.240.0.75 at 2016-07-27 18:04:17 +0000\n[time:0.200] Processing by AdvertisementsController#show as JSON\n[time:0.201]   Parameters: {\"id\"=&gt;\"get_random_ad\"}\n[time:0.207]   Advertisement Load (0.1ms)  SELECT advertisements.* FROM advertisements WHERE advertisements.id = 0 LIMIT 1\n[time:0.208] Completed 404 Not Found in 5.9ms\n[time:0.209] \nActiveRecord::RecordNotFound (Couldn't find Advertisement with id=get_random_ad):\n  app/controllers/advertisements_controller.rb:16:in show'</code></p>\n\n<p>Why is the rails logger saying \"processing by AdvertisementsController#show\"? Shouldn't it say \"processing by AdvertisementsController#get_random_ad\"? Maybe this is a fundamental misunderstanding on my part, but I thought that if you defined a new route in the routes.rb file then it would process all requests to that URL.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git"], "answers": [{"tags": [], "owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1469645175, "creation_date": 1469645175, "answer_id": 38620896, "question_id": 38620246, "link": "https://stackoverflow.com/questions/38620246/show-commit-number-on-login-page-of-rails-app/38620896#38620896", "title": "Show commit number on login page of rails app", "body": "<p>The <a href=\"https://confluence.atlassian.com/bitbucket/use-the-bitbucket-cloud-rest-apis-222724129.html\" rel=\"nofollow\">Bitbucket REST API</a> is what you want.  From there, you can ask for the last x commits.  It can then be passed onto your views very easily</p>\n"}, {"comments": [{"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1469800125, "post_id": 38621410, "comment_id": 64701846, "body": "Thanks so much. Worked like a charm."}], "tags": [], "owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "is_accepted": false, "score": 1, "last_activity_date": 1469647325, "last_edit_date": 1469647325, "creation_date": 1469647021, "answer_id": 38621410, "question_id": 38620246, "link": "https://stackoverflow.com/questions/38620246/show-commit-number-on-login-page-of-rails-app/38621410#38621410", "title": "Show commit number on login page of rails app", "body": "<p>If you're running your app from a git enabled directory, you can call <code>git rev-parse HEAD</code> from your template.</p>\n\n<pre><code>&lt;%= %x{git rev-parse HEAD}.strip %&gt;\n</code></pre>\n\n<p>There's also the <a href=\"https://github.com/schacon/ruby-git\" rel=\"nofollow\">ruby-git</a> gem, but it's probably an overkill to accomplish just that.</p>\n"}, {"tags": [], "owner": {"reputation": 1265, "user_id": 2215912, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f014888a1bf93036790f22dcabf77b6b?s=128&d=identicon&r=PG", "display_name": "avellable", "link": "https://stackoverflow.com/users/2215912/avellable"}, "is_accepted": true, "score": 0, "last_activity_date": 1469718765, "creation_date": 1469718765, "answer_id": 38640352, "question_id": 38620246, "link": "https://stackoverflow.com/questions/38620246/show-commit-number-on-login-page-of-rails-app/38640352#38640352", "title": "Show commit number on login page of rails app", "body": "<p>The easiest way is to use an ENV variable while deploying. </p>\n\n<p>You can get the latest commit hash by:</p>\n\n<pre><code>git log -n 1 --pretty=format:\"%H\" \n</code></pre>\n\n<p>Export it to application environment variable, say, LAST_COMMIT before starting the app.</p>\n\n<p>Use this in your view as:</p>\n\n<pre><code>&lt;%= ENV[\"LAST_COMMIT\"] %&gt;\n</code></pre>\n"}], "owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 38640352, "answer_count": 3, "score": 2, "last_activity_date": 1469718765, "creation_date": 1469642895, "question_id": 38620246, "link": "https://stackoverflow.com/questions/38620246/show-commit-number-on-login-page-of-rails-app", "title": "Show commit number on login page of rails app", "body": "<p>We are using RoR to create an application where the source code repository is BitBucket.  I would like to put a footnote on the pages that gives the commit id for the commit the deployment is based upon.</p>\n\n<p>I have seen ways, that I don't understand, to get a list of the commits, etc., but I don't see how to get the last one into a view in rails.</p>\n\n<p>Is there a gem that would return such or a list of commits from which I could select the last?</p>\n\n<p>Thanks,</p>\n\n<p>John </p>\n"}, {"tags": ["ruby", "jruby", "rufus-scheduler"], "answers": [{"comments": [{"owner": {"reputation": 844, "user_id": 1495224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/J4ZRf.jpg?s=128&g=1", "display_name": "hummingV", "link": "https://stackoverflow.com/users/1495224/hummingv"}, "edited": false, "score": 0, "creation_date": 1469660222, "post_id": 38623747, "comment_id": 64634582, "body": "I tried to print next_time and now in the job. They don&#39;t match.  next time=2016-07-28 06:54:11 +0800 now=2016-07-28 06:54:06 +0800 next time=2016-07-28 06:54:16 +0800 now=2016-07-28 06:54:11 +0800 next time=2016-07-28 06:54:21 +0800 now=2016-07-28 06:54:16 +0800"}, {"owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "reply_to_user": {"reputation": 844, "user_id": 1495224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/J4ZRf.jpg?s=128&g=1", "display_name": "hummingV", "link": "https://stackoverflow.com/users/1495224/hummingv"}, "edited": false, "score": 0, "creation_date": 1469683813, "post_id": 38623747, "comment_id": 64639942, "body": "OK, indeed &quot;last_time&quot; works better but it&#39;s trigger_time, not the previous expected next_time"}], "tags": [], "owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "is_accepted": false, "score": 1, "last_activity_date": 1469656056, "creation_date": 1469656056, "answer_id": 38623747, "question_id": 38620088, "link": "https://stackoverflow.com/questions/38620088/is-it-possible-to-obtain-current-time-in-rufus-scheduler/38623747#38623747", "title": "Is it possible to obtain &quot;current_time&quot; in rufus-scheduler", "body": "<p>A job's <code>#next_time</code> is supposed to hold the trigger time until the <code>#post_trigger</code> hook gets called.</p>\n"}, {"comments": [{"owner": {"reputation": 844, "user_id": 1495224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/J4ZRf.jpg?s=128&g=1", "display_name": "hummingV", "link": "https://stackoverflow.com/users/1495224/hummingv"}, "edited": false, "score": 0, "creation_date": 1469691708, "post_id": 38628189, "comment_id": 64644112, "body": "That&#39;s really cool! and thanks too. So, I should expect the output from your code to be &quot;job scheduled for &lt;t1&gt; triggered at &lt;~t1&gt; next time will be around &lt;t2&gt;&quot;, &quot;job scheduled for &lt;t2&gt; triggered at &lt;~t2&gt; next time will be around &lt;t3&gt;&quot; ... (~t1 will be a few milliseconds later than t1)? And, sorry but I can&#39;t help but wonder why the name #previous_time though. Why not trigger_time?"}, {"owner": {"reputation": 844, "user_id": 1495224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/J4ZRf.jpg?s=128&g=1", "display_name": "hummingV", "link": "https://stackoverflow.com/users/1495224/hummingv"}, "edited": false, "score": 0, "creation_date": 1469692977, "post_id": 38628189, "comment_id": 64644930, "body": "I take back &quot;Why not trigger_time?&quot; from my previous comment. So the semantic of trigger_time is the actual time the job is triggered, which is not what I need. But I would still suggest a name like scheduled_time."}, {"owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "reply_to_user": {"reputation": 844, "user_id": 1495224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/J4ZRf.jpg?s=128&g=1", "display_name": "hummingV", "link": "https://stackoverflow.com/users/1495224/hummingv"}, "edited": false, "score": 0, "creation_date": 1469693908, "post_id": 38628189, "comment_id": 64645432, "body": "OK. I&#39;ll think about it."}, {"owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "reply_to_user": {"reputation": 844, "user_id": 1495224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/J4ZRf.jpg?s=128&g=1", "display_name": "hummingV", "link": "https://stackoverflow.com/users/1495224/hummingv"}, "edited": false, "score": 0, "creation_date": 1469694375, "post_id": 38628189, "comment_id": 64645704, "body": "you say &quot;I want to know the exact time the job is meant to have started&quot; and that is exactly what Job#previous_time gives."}], "tags": [], "owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "is_accepted": true, "score": 1, "last_activity_date": 1469685614, "creation_date": 1469685614, "answer_id": 38628189, "question_id": 38620088, "link": "https://stackoverflow.com/questions/38620088/is-it-possible-to-obtain-current-time-in-rufus-scheduler/38628189#38628189", "title": "Is it possible to obtain &quot;current_time&quot; in rufus-scheduler", "body": "<p>Added a <code>Job#previous_time</code></p>\n\n<p><a href=\"https://github.com/jmettraux/rufus-scheduler/commit/43f1016859a43ea7f138404c1e5d864048f24959\" rel=\"nofollow\">https://github.com/jmettraux/rufus-scheduler/commit/43f1016859a43ea7f138404c1e5d864048f24959</a></p>\n\n<pre><code>scheduler.every('10s') do |job|\n  puts \"job scheduled for #{job.previous_time} triggered at #{Time.now}\"\n  puts \"next time will be around #{job.next_time}\"\n  puts \".\"\nend\n</code></pre>\n"}], "owner": {"reputation": 844, "user_id": 1495224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/J4ZRf.jpg?s=128&g=1", "display_name": "hummingV", "link": "https://stackoverflow.com/users/1495224/hummingv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 38628189, "answer_count": 2, "score": 0, "last_activity_date": 1469693126, "creation_date": 1469642337, "last_edit_date": 1469693126, "question_id": 38620088, "link": "https://stackoverflow.com/questions/38620088/is-it-possible-to-obtain-current-time-in-rufus-scheduler", "title": "Is it possible to obtain &quot;current_time&quot; in rufus-scheduler", "body": "<p>Supposed I scheduled a job with rufus-scheduler like below:</p>\n\n<pre><code>scheduler.cron '* * * * * UTC' do |job|\n...\nend\n</code></pre>\n\n<p>I can retrieve some useful info from 'job' variable. For example, next_time shows when the next run is scheduled at. I am wondering if a similar value is available for \"current_time\". Reason: for various reasons (threads, system load, etc) a job could be executed with a small amount of delay. I want to know the exact time the job is meant to have started. If I retrieve system time by <code>Time.new</code>, that will not be exact. </p>\n\n<p>Is there a way? I tried <em>awesome_print</em> the job variable. It seems the value I am looking for is not available. </p>\n\n<pre><code>jruby-1.7.19 :017 &gt; #&lt;Rufus::Scheduler::CronJob:0x3951b84e @unscheduled_at=nil, @first_at=nil, @opts={}, @last_time=2016-07-28 01:35:00 +0800, @tags=[], @mean_work_time=0.0, @callable=#&lt;Proc:0x2ee23f1d@(irb):14&gt;, @last_at=nil, @count=1, @scheduled_at=2016-07-28 01:34:09 +0800, @handler=#&lt;Proc:0x2ee23f1d@(irb):14&gt;, @paused_at=nil, @local_mutex=#&lt;Mutex:0x79da0f7&gt;, @locals={}, @times=nil, @scheduler=#&lt;Rufus::Scheduler:0x7dc7d255 @mutexes={}, @scheduler_lock=#&lt;Rufus::Scheduler::NullLock:0x49c20af6&gt;, @paused=false, @opts={}, @work_queue=#&lt;Queue:0x625dc24e&gt;, @jobs=#&lt;Rufus::Scheduler::JobArray:0x797fc155 @mutex=#&lt;Mutex:0x501b94b9&gt;, @array=[#&lt;Rufus::Scheduler::CronJob:0x3951b84e ...&gt;]&gt;, @trigger_lock=#&lt;Rufus::Scheduler::NullLock:0x42c126c5&gt;, @started_at=2016-07-28 01:33:36 +0800, @thread_key=\"rufus_scheduler_2068\", @stderr=#&lt;IO:fd 2&gt;, @max_work_threads=28, @frequency=0.3, @thread=#&lt;Thread:0x16d871c0 sleep&gt;&gt;, @cron_line=#&lt;Rufus::Scheduler::CronLine:0x6156f1b0 @seconds=[0], @weekdays=nil, @hours=nil, @timezone=\"UTC\", @days=nil, @minutes=nil, @original=\"* * * * * UTC\", @months=nil, @monthdays=nil&gt;, @last_work_time=0.0, @id=\"cron_1469640849.047_961656910\", @original=\"* * * * * UTC\", @next_time=2016-07-27 17:36:00 +0000&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1469641980, "post_id": 38619984, "comment_id": 64625689, "body": "It is rails not Ruby. Erb specifically.  It prints w/o the new line"}, {"owner": {"reputation": 410, "user_id": 349079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a7ba322ebfaa3ee422fd69f604bcd4?s=128&d=identicon&r=PG", "display_name": "ripvlan", "link": "https://stackoverflow.com/users/349079/ripvlan"}, "edited": false, "score": 0, "creation_date": 1469643103, "post_id": 38619984, "comment_id": 64626352, "body": "I believe this is the same question: <a href=\"http://stackoverflow.com/questions/10431809/ruby-on-rails-what-does-this-symbol-mean-in-erb?rq=1\" title=\"ruby on rails what does this symbol mean in erb\">stackoverflow.com/questions/10431809/&hellip;</a>"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1469642138, "answer_count": 0, "score": 0, "last_activity_date": 1469641885, "creation_date": 1469641885, "question_id": 38619984, "link": "https://stackoverflow.com/questions/38619984/what-does-do-in-ruby", "closed_reason": "Duplicate", "title": "What does &quot;&lt;%-&quot; do in Ruby?", "body": "<p>Came across this recently while working with Devise. I know <code>&lt;%=</code> prints, while <code>&lt;%</code> keeps results hidden. What does <code>&lt;%-</code> do?</p>\n"}, {"tags": ["ruby", "testing", "automation", "automated-tests", "watir-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4820648, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NP4DtJ1gk8I/AAAAAAAAAAI/AAAAAAAAAA0/f6_16DOec4w/photo.jpg?sz=128", "display_name": "Dhruv Patel", "link": "https://stackoverflow.com/users/4820648/dhruv-patel"}, "edited": false, "score": 0, "creation_date": 1469713588, "post_id": 38620087, "comment_id": 64659573, "body": "Thanks for the quick response!"}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": true, "score": 9, "last_activity_date": 1469642336, "creation_date": 1469642336, "answer_id": 38620087, "question_id": 38619940, "link": "https://stackoverflow.com/questions/38619940/watir-find-elements-using-partial-text/38620087#38620087", "title": "Watir - Find elements using partial text", "body": "<p>Yes! Just use a regular expression:</p>\n\n<p><code>browser.div(text: /foo/).present?</code></p>\n"}], "owner": {"reputation": 53, "user_id": 4820648, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NP4DtJ1gk8I/AAAAAAAAAAI/AAAAAAAAAA0/f6_16DOec4w/photo.jpg?sz=128", "display_name": "Dhruv Patel", "link": "https://stackoverflow.com/users/4820648/dhruv-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3676, "favorite_count": 0, "accepted_answer_id": 38620087, "answer_count": 1, "score": 2, "last_activity_date": 1469669267, "creation_date": 1469641747, "last_edit_date": 1469669267, "question_id": 38619940, "link": "https://stackoverflow.com/questions/38619940/watir-find-elements-using-partial-text", "title": "Watir - Find elements using partial text", "body": "<p>Is there a way to find an element by the text it contains?</p>\n\n<p>Given:</p>\n\n<p><code>&lt;div&gt;foobar&lt;/div&gt;</code></p>\n\n<pre><code>browser.div(text: contains('foo')).present?   \n# =&gt; true\n</code></pre>\n"}, {"tags": ["ruby", "permutation"], "comments": [{"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 1, "creation_date": 1469640646, "post_id": 38619330, "comment_id": 64624949, "body": "Ruby&#39;s <code>Array#permutation</code> already returns values according to the source&#39;s order."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1469643614, "post_id": 38619330, "comment_id": 64626635, "body": "@Alexander, that&#39;s irrelevant, because the OP&#39;s question has nothing to do with permutations (in view of the desired result). :-)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1469658461, "post_id": 38619330, "comment_id": 64634013, "body": "Your question is unclear. You are asking about permutations, but your example results are not permutations. What is it <i>exactly</i> that you want?"}, {"owner": {"reputation": 1617, "user_id": 6174577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9f31e03bb70b0cebb89f1e0b81efd485?s=128&d=identicon&r=PG&f=1", "display_name": "Ka Mok", "link": "https://stackoverflow.com/users/6174577/ka-mok"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1469663160, "post_id": 38619330, "comment_id": 64635277, "body": "@J&#246;rgWMittag Instead of picking apart the usage of the word permutation, wouldn&#39;t it be more constructive and to the spirit of StackOverflow to suggest an edit? Many people, including the ones who responded to the accepted answer, understood what is it <i>exactly</i> I wanted."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1469691581, "post_id": 38619330, "comment_id": 64644034, "body": "Well, it is hard from just a single example to judge what it is that you want. I <i>could</i> edit the question and say that you are looking for a sliding window half the size of the original array, but I have no idea if that is correct or not. It could also be a sliding window 1/60th the sum of values of the array. Also, to further the confusion, not only does your expected output not match up with your question, you also accepted an answer whose output neither matches up with your question nor with your example output. (In fact, the accepted answer doesn&#39;t even work at all.)"}, {"owner": {"reputation": 1617, "user_id": 6174577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9f31e03bb70b0cebb89f1e0b81efd485?s=128&d=identicon&r=PG&f=1", "display_name": "Ka Mok", "link": "https://stackoverflow.com/users/6174577/ka-mok"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1469733661, "post_id": 38619330, "comment_id": 64672988, "body": "@J&#246;rgWMittag It does. Read the comments. He just didn&#39;t add .to_a to it."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1469737594, "post_id": 38619330, "comment_id": 64674908, "body": "It is indeed in the spirit of SO for someone other than the asker to edit a question to make it clearer.  It is even more in the spirit of SO to make the edit yourself, when it is your question and you know what is wrong with it."}, {"owner": {"reputation": 1617, "user_id": 6174577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9f31e03bb70b0cebb89f1e0b81efd485?s=128&d=identicon&r=PG&f=1", "display_name": "Ka Mok", "link": "https://stackoverflow.com/users/6174577/ka-mok"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1469738279, "post_id": 38619330, "comment_id": 64675271, "body": "@WayneConrad Indeed it would be, when I know what is wrong with it. Not a single person in this thread has enlighten me with their wisdom to the precise vocabulary that would suit this question. There are, however, many responses under the accepted answer who knew what I was asking without being condescending."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1469739060, "post_id": 38619330, "comment_id": 64675644, "body": "@KaMok I apoligize--I thought you did know how to make it clearer.  I&#39;ve just made an edit that I hope helps.  I realized, while editing, that I found it somewhat difficult to describe in words what it is you want, so you deserve my apology all the more."}], "answers": [{"tags": [], "owner": {"reputation": 1617, "user_id": 6174577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9f31e03bb70b0cebb89f1e0b81efd485?s=128&d=identicon&r=PG&f=1", "display_name": "Ka Mok", "link": "https://stackoverflow.com/users/6174577/ka-mok"}, "is_accepted": false, "score": 0, "last_activity_date": 1469639562, "creation_date": 1469639562, "answer_id": 38619331, "question_id": 38619330, "link": "https://stackoverflow.com/questions/38619330/how-to-get-the-permutation-of-an-array-without-changing-the-order-of-its-values/38619331#38619331", "title": "How to get the permutation of an array without changing the order of its values?", "body": "<p>Here is what I came up with:\n</p>\n\n<pre><code>def ordered_permutations(array: [1,2,3], length: n)\n  array = array.dup\n  [].tap do |result|\n    (array.count - (length - 1)).times do\n      result &lt;&lt; array[0..(length-1)]\n      array.shift\n    end\n  end\nend\n\np ordered_permutations(array: a, length: 3)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "edited": false, "score": 0, "creation_date": 1469641965, "post_id": 38619971, "comment_id": 64625682, "body": "that wont give his requested answer though"}, {"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "reply_to_user": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "edited": false, "score": 0, "creation_date": 1469642170, "post_id": 38619971, "comment_id": 64625781, "body": "Can you share the correct answer and please correctly point out how my answer is different?"}, {"owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "edited": false, "score": 0, "creation_date": 1469642312, "post_id": 38619971, "comment_id": 64625869, "body": "all i&#39;m saying is <code>a.permutation(3).to_a != [[8,2,22],[2,22,97],[22,97,38],[97,38,15]]</code>"}, {"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "reply_to_user": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "edited": false, "score": 0, "creation_date": 1469642907, "post_id": 38619971, "comment_id": 64626225, "body": "I have also rectified the answer above.  <code>answer = [] answer + a.each_con(3).to_a</code>"}, {"owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "edited": false, "score": 0, "creation_date": 1469643016, "post_id": 38619971, "comment_id": 64626299, "body": "a.each_cons(3).to_a is the answer"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1469643950, "post_id": 38619971, "comment_id": 64626822, "body": "nikkypx, have you tried executing <code>a.permutation(3).to_a #=&gt; [[8, 2, 22], [8, 2, 97],..., [15, 38, 97]]</code>? Note  <code>a.permutation(3).to_a.size #=&gt; 120</code>"}], "tags": [], "owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "is_accepted": true, "score": 2, "last_activity_date": 1469739566, "last_edit_date": 1469739566, "creation_date": 1469641841, "answer_id": 38619971, "question_id": 38619330, "link": "https://stackoverflow.com/questions/38619330/how-to-get-the-permutation-of-an-array-without-changing-the-order-of-its-values/38619971#38619971", "title": "How to get the permutation of an array without changing the order of its values?", "body": "<p>You could pass a parameter for  like this to achieve </p>\n\n<p><code>a.each_con(3)</code></p>\n\n<p>This returns an Enumeration which you may iterate over.  To turn the Enumeration into an array, call the to_a method:</p>\n\n<p><code>a.each_cons(3).to_a</code></p>\n"}], "owner": {"reputation": 1617, "user_id": 6174577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9f31e03bb70b0cebb89f1e0b81efd485?s=128&d=identicon&r=PG&f=1", "display_name": "Ka Mok", "link": "https://stackoverflow.com/users/6174577/ka-mok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 38619971, "answer_count": 2, "score": 0, "last_activity_date": 1469739566, "creation_date": 1469639562, "last_edit_date": 1469738952, "question_id": 38619330, "link": "https://stackoverflow.com/questions/38619330/how-to-get-the-permutation-of-an-array-without-changing-the-order-of-its-values", "title": "How to get the permutation of an array without changing the order of its values?", "body": "<p>For this array: <code>a = [8, 2, 22, 97, 38, 15]</code>, how can I get all sub-arrays of length three, in the fashion of a sliding window, without disturbing the order of the values.?</p>\n\n<p>For example, the result should be: <code>[[8,2,22],[2,22,97],[22,97,38],[97,38,15]]</code></p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1469639295, "post_id": 38618106, "comment_id": 64624158, "body": "Ruby convention is to use <code>{ }</code> for a new Hash, that calling <code>Hash.new</code> is only necessary when supplying defaults like <code>Hash.new(0)</code>. Less is more."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1469639337, "post_id": 38618159, "comment_id": 64624179, "body": "Better: <code>car_data = { &#39;NEW&#39; =&gt; [ ] }</code>. Get it done in one shot."}], "tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": false, "score": 3, "last_activity_date": 1469636438, "last_edit_date": 1469636438, "creation_date": 1469635639, "answer_id": 38618159, "question_id": 38618106, "link": "https://stackoverflow.com/questions/38618106/ruby-how-to-add-an-array-to-a-hash-key/38618159#38618159", "title": "Ruby - how to add an array to a hash key?", "body": "<p>You wrote, that you tried to define (initialize) <code>car_data['NEW']</code> as an array, but what you did is... initialized it as a hash.</p>\n\n<p>Change:</p>\n\n<pre><code>car_data['NEW'] = Hash.new\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>car_data['NEW'] = []\n</code></pre>\n\n<p>The full code would look like:</p>\n\n<pre><code>car_data = Hash.new\ncar_data['NEW'] = []\nCar.all.each do |c|\n  car_data[c.brand] = c.id\n  car_data['NEW'] &lt;&lt; c.id if c.new == 1\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 3, "last_activity_date": 1469635658, "creation_date": 1469635658, "answer_id": 38618162, "question_id": 38618106, "link": "https://stackoverflow.com/questions/38618106/ruby-how-to-add-an-array-to-a-hash-key/38618162#38618162", "title": "Ruby - how to add an array to a hash key?", "body": "<p><code>car_data['NEW']</code> has to be declared as <code>Array</code>.</p>\n\n<pre><code>car_data = Hash.new\ncar_data['NEW'] = []\nCar.all.each do |c|\n  car_data[c.brand] = c.id\n  car_data['NEW'] &lt;&lt; c.id if c.new == 1\nend\n</code></pre>\n\n<p>You can also do it in a single step</p>\n\n<pre><code>car_data = { new: [] }\nCar.all.each do |c|\n  car_data[c.brand] = c.id\n  car_data[:new] &lt;&lt; c.id if c.new == 1\nend\n</code></pre>\n\n<p>Frankly, it seems a little bit odd to me to use a Hash in that way. In particular, mixin different kind of information in Hash is a very bad approach inherited from other non object oriented languages.</p>\n\n<p>I'd use at least two separate variables. But I don't know enough about the context to provide a meaningful example.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1469639398, "post_id": 38618397, "comment_id": 64624217, "body": "Probably better with <code>{ &#39;NEW&#39; =&gt; [ ] }</code> than the cruft where it optionally initializes it."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1469640194, "post_id": 38618397, "comment_id": 64624664, "body": "@tadman This cruft contains a hint on how to deal with \u201cmaybe nil\u201d objects. For the sophisticated initialization there is always variant 1 present."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1469640502, "post_id": 38618397, "comment_id": 64624847, "body": "I know what you&#39;re saying, but the difference here is in maybe not initializing the <code>NEW</code> key, which seems like a harmless thing to do by default."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1469640763, "last_edit_date": 1469640763, "creation_date": 1469636430, "answer_id": 38618397, "question_id": 38618106, "link": "https://stackoverflow.com/questions/38618106/ruby-how-to-add-an-array-to-a-hash-key/38618397#38618397", "title": "Ruby - how to add an array to a hash key?", "body": "<pre><code>car_data = Car.all.each_with_object(Hash.new { |h, k| h[k] = [] }) do |c, memo|\n  memo[c.brand] = c.id\n  memo['NEW'] &lt;&lt; c.id if c.new == 1\nend\n</code></pre>\n\n<p>or, simpler, let\u2019s create it on the fly if needed:</p>\n\n<pre><code>car_data = Car.all.each_with_object({}) do |c, memo|\n  memo[c.brand] = c.id\n  (memo['NEW'] ||= []) &lt;&lt; c.id if c.new == 1\nend\n</code></pre>\n\n<p>Please also refer to comment by @tadman below, if the <code>NEW</code> key is to be existing in any case.</p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 38618162, "answer_count": 3, "score": 0, "last_activity_date": 1469640763, "creation_date": 1469635498, "question_id": 38618106, "link": "https://stackoverflow.com/questions/38618106/ruby-how-to-add-an-array-to-a-hash-key", "title": "Ruby - how to add an array to a hash key?", "body": "<p>I have this loop:</p>\n\n<pre><code>car_data = Hash.new\nCar.all.each do |c|\n  car_data[c.brand] = c.id\n  car_data['NEW'] &lt;&lt; c.id if c.new == 1\nend\n</code></pre>\n\n<p>I have this snipper and trying to save all the new cars to <code>car_data['NEW']</code>, but this code keeps only one item in the hash (there should be 8).</p>\n\n<p>I also tried to define that <code>car_data['NEW']</code> as an array:</p>\n\n<pre><code>car_data = Hash.new\ncar_data['NEW'] = Hash.new\nCar.all.each do |c|\n  car_data[c.brand] = c.id\n  car_data['NEW'] &lt;&lt; c.id if c.new == 1\nend\n</code></pre>\n\n<p>But the result was the same - just one item.\nHow do I save the whole array to the hash key element?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "find-occurrences"], "answers": [{"comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469635857, "post_id": 38618192, "comment_id": 64622200, "body": "or use Set instead of Array. or use array of values instead of array of hashes containing always same single key."}, {"owner": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "edited": false, "score": 0, "creation_date": 1469691447, "post_id": 38618192, "comment_id": 64643950, "body": "Lars, thanks for the code. No need to use max_by on h object ? The result is already ordered from max to min occurrences ?"}, {"owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "reply_to_user": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "edited": false, "score": 0, "creation_date": 1469725720, "post_id": 38618192, "comment_id": 64668467, "body": "@alex.bour: the hash is not ordered, so you will still have to extract the maximum as before."}, {"owner": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "edited": false, "score": 0, "creation_date": 1469736106, "post_id": 38618192, "comment_id": 64674186, "body": "Thanks for the reply. Alex"}], "tags": [], "owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "is_accepted": true, "score": 0, "last_activity_date": 1469636938, "last_edit_date": 1469636938, "creation_date": 1469635757, "answer_id": 38618192, "question_id": 38617998, "link": "https://stackoverflow.com/questions/38617998/ruby-get-the-max-occurrences-of-many-hashes-depending-their-content/38618192#38618192", "title": "Ruby: get the max occurrences of many hashes depending their content", "body": "<p>You can use the exact same code as before, only with varietals arrays as keys in your frequency hash. Just make sure the arrays are sorted so that the keys will be equal for the same content.</p>\n\n<p>If the <code>grape_id</code> is the only field used for occurence checking, you can simplify a bit by mapping the array of varietals to an array of numbers, in which case your frequency builder will look like this:</p>\n\n<pre><code>specialties_with_frequency = @duplicates.inject(Hash.new(0)) do |h, duplicate|\n  grape_ids = duplicate.varietals.map { |v| v[:grape_id] }.sort\n  h[grape_ids] += 1; h\nend\n</code></pre>\n\n<p>Given the example you provided, the value should now be:</p>\n\n<pre><code>{[1, 2]=&gt;2, [3]=&gt;1, [3, 5]=&gt;1}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1469637717, "creation_date": 1469637717, "answer_id": 38618785, "question_id": 38617998, "link": "https://stackoverflow.com/questions/38617998/ruby-get-the-max-occurrences-of-many-hashes-depending-their-content/38618785#38618785", "title": "Ruby: get the max occurrences of many hashes depending their content", "body": "<p>For arrays and hashes it\u2019s better to use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-group_by\" rel=\"nofollow\"><code>Enumerable#group_by</code></a>:</p>\n\n<pre><code>with_freq = whatever.group_by { |v| v } # (&amp;:itself) for ruby2.3\n                    .map { |k, v| [k, v.count] }\n                    .to_h\n</code></pre>\n\n<p>If you need some sophisticated algorithm for grouping, change <code>{ |v| v }</code> to use this algorithm. </p>\n"}], "owner": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 38618192, "answer_count": 2, "score": 0, "last_activity_date": 1469637717, "creation_date": 1469635223, "question_id": 38617998, "link": "https://stackoverflow.com/questions/38617998/ruby-get-the-max-occurrences-of-many-hashes-depending-their-content", "title": "Ruby: get the max occurrences of many hashes depending their content", "body": "<p>I usually count the max occurrences of an array of items (int) like this:</p>\n\n<pre><code>specialties_with_frequency = specialties.inject(Hash.new(0)) { |h,v| h[v] += 1; h }\n@reference.specialty_id = specialties.max_by { |v| specialties_with_frequency[v] }\n</code></pre>\n\n<p>Today, I need to count the max occurrences of hashes content.</p>\n\n<p>varietal is a database object containing these fields: \n<em>id, grape_id, percent</em></p>\n\n<p>My duplicate object can have multiple varietals.</p>\n\n<pre><code>@duplicates.each do |duplicate|\n    duplicate.varietals.each do |varietal|\n    end\nend\n</code></pre>\n\n<p>For example, browsings duplicates, I will have:</p>\n\n<pre><code>duplicate 1: varietals =&gt; {grape_id =&gt; 1}, {grape_id =&gt; 2}\nduplicate 2: varietals =&gt; {grape_id =&gt; 3}\nduplicate 3: varietals =&gt; {grape_id =&gt; 1}, {grape_id =&gt; 2}\nduplicate 4: varietals =&gt; {grape_id =&gt; 3}, {grape_id =&gt; 5}\n</code></pre>\n\n<p>In this case, the accepted data will be:</p>\n\n<pre><code>{grape_id =&gt; 1}, {grape_id =&gt; 2}\n</code></pre>\n\n<p>because there are 2 occurrences browsing all duplicates.</p>\n\n<p>I have no idea of how to explore the same values in all occurrences.</p>\n\n<p>Thanks,\nAlexandre</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "haml", "coderay"], "answers": [{"comments": [{"owner": {"reputation": 1383, "user_id": 1658810, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DlcF2.png?s=128&g=1", "display_name": "Chris Britt", "link": "https://stackoverflow.com/users/1658810/chris-britt"}, "edited": false, "score": 0, "creation_date": 1469738108, "post_id": 38646241, "comment_id": 64675178, "body": "It works properly, thanks for helping me work through this :)"}], "tags": [], "owner": {"reputation": 19398, "user_id": 435471, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WvUmQ.jpg?s=128&g=1", "display_name": "Kyle Decot", "link": "https://stackoverflow.com/users/435471/kyle-decot"}, "is_accepted": true, "score": 2, "last_activity_date": 1469738427, "last_edit_date": 1469738427, "creation_date": 1469738069, "answer_id": 38646241, "question_id": 38617515, "link": "https://stackoverflow.com/questions/38617515/coderay-adds-incorrect-indentation/38646241#38646241", "title": "CodeRay adds incorrect indentation", "body": "<p>This is caused by HAML messing with your whitespace. See HAML's documentation on <a href=\"http://haml.info/docs/yardoc/file.REFERENCE.html#whitespace_preservation\" rel=\"nofollow\">Whitespace Preservation</a>.</p>\n\n<blockquote>\n  <p>Sometimes you don\u2019t want Haml to indent all your text. For example, tags like pre and textarea are whitespace-sensitive; indenting the text makes them render wrong.</p>\n</blockquote>\n\n<p>You'll need to use <code>~</code> instead of the usual <code>=</code> so your view would be:</p>\n\n<pre><code>~ raw @syntax_highlighted\n</code></pre>\n"}], "owner": {"reputation": 1383, "user_id": 1658810, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DlcF2.png?s=128&g=1", "display_name": "Chris Britt", "link": "https://stackoverflow.com/users/1658810/chris-britt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 38646241, "answer_count": 1, "score": 1, "last_activity_date": 1469738699, "creation_date": 1469633799, "last_edit_date": 1469738699, "question_id": 38617515, "link": "https://stackoverflow.com/questions/38617515/coderay-adds-incorrect-indentation", "title": "CodeRay adds incorrect indentation", "body": "<p>I am using CodeRay version 1.1.1 to render a ruby file. However, it is adding a large number of extra spaces to indent all lines except the first line. </p>\n\n<p>As a MCVE, I have a file called something.rb with contents:</p>\n\n<pre><code># This comment will not be indented\n# This comment WILL be indented\n</code></pre>\n\n<p>In the controller I have:</p>\n\n<pre><code>contents = File.read('something.rb')\n@syntax_highlighted = CodeRay.scan(contents, :ruby).div\n</code></pre>\n\n<p>And in the view, I have</p>\n\n<pre><code>= raw @syntax_highlighted\n</code></pre>\n\n<p>However, for an output I receive as seen here: <a href=\"https://i.stack.imgur.com/bb4Np.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bb4Np.png\" alt=\"Incorrect output\"></a></p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1469634698, "post_id": 38617396, "comment_id": 64621460, "body": "How about a simple example, so those giving answers can demonstrate their code?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1469637688, "post_id": 38617396, "comment_id": 64623242, "body": "Does the word <i>requests</i> mean HTTP requests?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1469638712, "post_id": 38617396, "comment_id": 64623828, "body": "<i>Why</i> would you want to? This sounds completely crazy to even attempt. If you wanted to persist the data and the binding you wouldn&#39;t have serialized it in the first place. Serializing has an implicit promise that you can de-serialize it in the future in a different process or a different machine and get the data back out. The binding will be completely gone by then."}], "answers": [{"tags": [], "owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "is_accepted": false, "score": 1, "last_activity_date": 1469648917, "creation_date": 1469648917, "answer_id": 38621951, "question_id": 38617396, "link": "https://stackoverflow.com/questions/38617396/persist-ruby-binding/38621951#38621951", "title": "Persist ruby binding", "body": "<p>The idea of serializing a binding is in many ways incoherent, because a binding is intimately connected to the run-time stack; when you de-serialized the binding, should it re-create the stack, too?</p>\n\n<p>That said, if you just want to get the <em>values</em> out of the binding, you could do it with something like this:</p>\n\n<pre><code>class Binding\n  def values_for_serialization\n    data = {\n      locals: {},\n      self: eval('self',self)\n    }\n    eval(\"local_variables\",self).each do |lvar|\n      data[:locals][lvar] = local_variable_get(lvar)\n    end\n    data\n  end\nend\n</code></pre>\n\n<p>You could then serialize the returned structure using <code>Marshal#dump</code>, <code>to_yaml</code>, or whatever.</p>\n\n<p>De-serializing would work something like this:</p>\n\n<pre><code>class Binding\n  def self.from_values(values)\n    bind = values[:self].instance_exec { binding }\n    values[:locals].each_pair do |lvar,value|\n      bind.local_variable_set(lvar,value)\n    end\n    bind\n   end\n end\n</code></pre>\n\n<p>But note that, while this would give you <em>a</em> binding that had an appropriate self object, and appropriate local variables, it wouldn't really be the <em>same</em> binding. For instance, if you tried to use this to serialize the top-level script binding, you could; and then in another script you could de-serialize it. But when you did, the local variables would <em>not</em> be available in that scripts top-level binding, they'd only be available in the binding object you'd created.</p>\n"}], "owner": {"reputation": 2625, "user_id": 1776116, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/97fa60773316c76d23e66f585ecd03ce?s=128&d=identicon&r=PG", "display_name": "Manikandan", "link": "https://stackoverflow.com/users/1776116/manikandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1469648917, "creation_date": 1469633502, "last_edit_date": 1469647725, "question_id": 38617396, "link": "https://stackoverflow.com/questions/38617396/persist-ruby-binding", "title": "Persist ruby binding", "body": "<p>Is there any way to persist ruby bindings ? I couldn't use marshal.dump. Doc says</p>\n\n<blockquote>\n  <p>if the objects to be dumped include bindings, procedure or method objects, instances of class IO, or singleton objects, a TypeError will be raised.</p>\n</blockquote>\n\n<p>We need to use same binding across multiple requests. How can I serialize/deserilaze ruby binding ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3628486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3a2s.png?s=128&g=1", "display_name": "Caio Graco", "link": "https://stackoverflow.com/users/3628486/caio-graco"}, "edited": false, "score": 0, "creation_date": 1469648139, "post_id": 38618223, "comment_id": 64629154, "body": "No, i&#39;ve tried what you suggested but without success so far. I truly don&#39;t know what to do. Everything seems ok but no email ever arrives"}, {"owner": {"reputation": 186, "user_id": 6645678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MuJd.png?s=128&g=1", "display_name": "Carlos Orellana", "link": "https://stackoverflow.com/users/6645678/carlos-orellana"}, "reply_to_user": {"reputation": 1, "user_id": 3628486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3a2s.png?s=128&g=1", "display_name": "Caio Graco", "link": "https://stackoverflow.com/users/3628486/caio-graco"}, "edited": false, "score": 0, "creation_date": 1469648777, "post_id": 38618223, "comment_id": 64629484, "body": "Can you copy and paste the output of you heroku logs?  Btw, check the heroku credentials set up for Sendgrid. In your heroku panel I think is on: \u201cSettings\u201d and then click \u201cReveal config vars\u201d.  Just to be sure you have the correct credentials."}], "tags": [], "owner": {"reputation": 186, "user_id": 6645678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MuJd.png?s=128&g=1", "display_name": "Carlos Orellana", "link": "https://stackoverflow.com/users/6645678/carlos-orellana"}, "is_accepted": false, "score": 0, "last_activity_date": 1469635882, "creation_date": 1469635882, "answer_id": 38618223, "question_id": 38617346, "link": "https://stackoverflow.com/questions/38617346/e-mails-not-arriving-rails-heroku-sendgrid/38618223#38618223", "title": "E-mails not arriving - Rails, Heroku, Sendgrid", "body": "<p>Are you really sure that the email is correct in production environment.</p>\n\n<p>Add this above to your code in your Production config file, you just have the first line but not the second one. Move the first one above and add the other code too.</p>\n\n<pre><code>config.action_mailer.default_url_options = {host: \"http://yourdomain/\"}\n\nconfig.action_mailer.delivery_method = :smtp\n</code></pre>\n\n<p>I can suggest, use \"pry-rails\" and \"pry-navigation\". In the methods that sends the email, you will put something like <code>binding.pry</code> and then in your console, you will see every step.</p>\n\n<p>You can raise the errors of your mailer too. In your production environment check if you have something like this: <code>config.action_mailer.raise_delivery_errors = false</code> and change to true.</p>\n"}], "owner": {"reputation": 1, "user_id": 3628486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3a2s.png?s=128&g=1", "display_name": "Caio Graco", "link": "https://stackoverflow.com/users/3628486/caio-graco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469635882, "creation_date": 1469633394, "question_id": 38617346, "link": "https://stackoverflow.com/questions/38617346/e-mails-not-arriving-rails-heroku-sendgrid", "title": "E-mails not arriving - Rails, Heroku, Sendgrid", "body": "<p>I'm trying to set up a contact form in rails, using a mailer and sendgrid . I'm running the app on Heroku.</p>\n\n<p>I think that the Development and Production config files are ok,because i'm using Devise for authentication and its emails are being sent and received without any issue. So the problem is related to the mailer i've created.</p>\n\n<p>The terminal shows that the e-mails are being triggered in development, and in production the heroku logs tell me that they are being sent. Everything looks ok, but the e-mails aren't arriving.</p>\n\n<p>Thanks for any feedback.</p>\n\n<p>This is the code:</p>\n\n<p><em>free_trial_form</em></p>\n\n<pre><code>&lt;%= form_tag(\"/public_pages/contato_free_trial\", :id =&gt; 'free_trail_form') do %&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;%= text_field_tag :nome,nil, placeholder:\"Seu nome\", class: \"form-control\", id:\"free_trail_form_nome_field\" %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;%= email_field_tag :email,nil, placeholder:\"Seu e-mail\", class: \"form-control\", id:\"free_trail_form_email_field\" %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;%= text_area_tag :conteudo,nil, placeholder:\"Veja na pr\u00e1tica como \u00e9 o nosso ensino. Digite aqui os hor\u00e1rios mais confort\u00e1veis para voc\u00ea!\", class: \"form-control\",id:\"free_trail_form_text_area\" %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"free_trail_form_area_btns\"&gt;\n            &lt;%= button_tag(type:\"submit\", id: \"free_trail_form_btn\", class:\"btn btn-danger\",:onclick =&gt; \"alert('Mensagem enviada. Obrigado!');\") do %&gt;\n                        &lt;span id=\"free_trail_form_btn_icon\" class=\"glyphicon glyphicon-calendar\"&gt;&lt;/span&gt; \n                        MARCAR AULA GRATUITA\n            &lt;% end %&gt;\n            &lt;%=link_to(escola_path,id:\"free_trail_form_escola_link\") do %&gt;\n\n                &lt;button id=\"free_trail_form_escola_link_btn\" class=\"btn btn-primary\"&gt;\n                    OU SAIBA MAIS AGORA &lt;span id=\"free_trail_form_escola_link_icon\" class=\"glyphicon glyphicon-arrow-right\"&gt;&lt;/span&gt;\n                &lt;/button&gt;\n            &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p><em>public_pages_controller/contato_free_trial</em></p>\n\n<pre><code>def contato_free_trial\n  @nome = params[:nome]\n  @email = params[:email]\n  @conteudo = params[:conteudo]\n  PublicPagesMailer.free_trial_email(@nome,@email,@conteudo).deliver_now\n  redirect_to(:back)\nend\n</code></pre>\n\n<p><em>public_pages_mailer</em></p>\n\n<pre><code>class PublicPagesMailer &lt; ApplicationMailer\n\ndef free_trial_email(nome,email,conteudo)\n    @nome = nome\n    @email = email\n    @conteudo = conteudo\n    mail(from: @email, to: 'contatoingleshi@gmail.com', subject: \"Contato de Prospecto\")\nend\n</code></pre>\n\n<p><em>Production config file</em></p>\n\n<pre><code>ActionMailer::Base.smtp_settings = {\n :address =&gt; 'smtp.sendgrid.net',\n :port =&gt; '587',\n :authentication =&gt; :plain,\n :user_name =&gt; ENV['SENDGRID_USERNAME'],\n :password =&gt; ENV['SENDGRID_PASSWORD'],\n :domain =&gt; 'heroku.com',\n :enable_starttls_auto =&gt; true\n}\nconfig.cache_classes = true\n\nconfig.eager_load = true\n\nconfig.consider_all_requests_local       = false\n\nconfig.action_controller.perform_caching = true\n\nconfig.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present?\n\nconfig.assets.js_compressor = :uglifier\n\nconfig.assets.compile = true\n\nconfig.assets.digest = true\n\nconfig.log_level = :debug\n\nconfig.i18n.fallbacks = true\n\nconfig.active_support.deprecation = :notify\n\nconfig.log_formatter = ::Logger::Formatter.new\n\nconfig.active_record.dump_schema_after_migration = false\n\nconfig.action_mailer.default_url_options = { :host =&gt; 'myapp.herokuapp.com' }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sanitize"], "comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469632698, "post_id": 38616930, "comment_id": 64620044, "body": "poz! what does &quot;getting data from a site&quot; mean? what does your original string contain? the question is not clear."}, {"owner": {"reputation": 3426, "user_id": 6337767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMhtl.jpg?s=128&g=1", "display_name": "kemis", "link": "https://stackoverflow.com/users/6337767/kemis"}, "reply_to_user": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469632876, "post_id": 38616930, "comment_id": 64620186, "body": "Hi, I am getting data using an API, I linked it now in the question :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469632970, "post_id": 38616930, "comment_id": 64620246, "body": "What result do you expect? What happens instead?"}, {"owner": {"reputation": 3426, "user_id": 6337767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMhtl.jpg?s=128&g=1", "display_name": "kemis", "link": "https://stackoverflow.com/users/6337767/kemis"}, "edited": false, "score": 0, "creation_date": 1469633075, "post_id": 38616930, "comment_id": 64620301, "body": "I want to get &quot;Kahl&#250;a&quot; but instead I am getting &quot;Kahl&amp;uacute;a&quot; :/"}, {"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469633411, "post_id": 38616930, "comment_id": 64620547, "body": "What you need is not sanitization, but rather HTML decoding. Take look at the other question. I believe, in your case, you will have to use <code>htmlentities</code> or similar library, as <code>CGI</code> does not cover these Unicode characters."}, {"owner": {"reputation": 3426, "user_id": 6337767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMhtl.jpg?s=128&g=1", "display_name": "kemis", "link": "https://stackoverflow.com/users/6337767/kemis"}, "edited": false, "score": 0, "creation_date": 1469633449, "post_id": 38616930, "comment_id": 64620577, "body": "Thank you, Hvala :) I will try"}], "owner": {"reputation": 3426, "user_id": 6337767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aMhtl.jpg?s=128&g=1", "display_name": "kemis", "link": "https://stackoverflow.com/users/6337767/kemis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1469633295, "answer_count": 0, "score": 0, "last_activity_date": 1469632820, "creation_date": 1469632239, "last_edit_date": 1469632820, "question_id": 38616930, "link": "https://stackoverflow.com/questions/38616930/using-sanitizer-to-remove-bad-utf-8", "closed_reason": "Duplicate", "title": "Using sanitizer to remove bad UTF-8", "body": "<p>I have written a small api in ruby on rails and I am getting some data from a <a href=\"http://www.food2fork.com/about/api\" rel=\"nofollow\">site</a> but i have a problem. Instead of getting \"Kahl\u00faa\" I am getting \"Kahl&amp;uacute;a\" .\nI have tried using a sanitizer but i cant figure out how to do it :/</p>\n\n<p>This is my code : </p>\n\n<pre><code>&lt;% full_sanitizer= Rails::Html::FullSanitizer.new %&gt;\n&lt;%= full_sanitizer.sanitize( link_to(course[\"title\"], course[\"f2f_url\"])) %&gt;\n</code></pre>\n\n<p>I was thinking this is removen \"\u00fa\" but it is only removing the link ;/\nCan someone help me?</p>\n\n<p>If you give me a MINUS pls comment and tell me what I did wrong so I can improve. Thanks :)</p>\n"}, {"tags": ["ruby", "rspec", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 1696, "user_id": 2694638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d35b5e9dc75fd6273f69391b7970905d?s=128&d=identicon&r=PG&f=1", "display_name": "Mo H.", "link": "https://stackoverflow.com/users/2694638/mo-h"}, "edited": false, "score": 0, "creation_date": 1469718161, "post_id": 38623200, "comment_id": 64663301, "body": "While not exactly what i&#39;m looking for, this seems to be the best way to do what I want without catching the exception"}], "tags": [], "owner": {"reputation": 176, "user_id": 2273892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d8c110c3693ac9cca514988a532927?s=128&d=identicon&r=PG", "display_name": "Scaint", "link": "https://stackoverflow.com/users/2273892/scaint"}, "is_accepted": true, "score": 3, "last_activity_date": 1469653627, "creation_date": 1469653627, "answer_id": 38623200, "question_id": 38616598, "link": "https://stackoverflow.com/questions/38616598/rspec-execute-command-on-failure/38623200#38623200", "title": "rspec execute command on failure", "body": "<p>You can use <a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-4/docs/hooks/before-and-after-hooks\" rel=\"nofollow\"><code>after</code></a> hook to check the example status.</p>\n\n<p><a href=\"http://www.rubydoc.info/github/rspec/rspec-core/RSpec/Core/Example#exception-instance_method\" rel=\"nofollow\">http://www.rubydoc.info/github/rspec/rspec-core/RSpec/Core/Example#exception-instance_method</a></p>\n\n<pre><code>after do |example|\n  if example.exception.nil?\n    # passed\n  else\n    # failed\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8357, "user_id": 47185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/47f28e60db02c75ca0fae638bb3e8304?s=128&d=identicon&r=PG", "display_name": "Tyler Rick", "link": "https://stackoverflow.com/users/47185/tyler-rick"}, "is_accepted": false, "score": 0, "last_activity_date": 1571426855, "last_edit_date": 1571426855, "creation_date": 1571421779, "answer_id": 58456016, "question_id": 38616598, "link": "https://stackoverflow.com/questions/38616598/rspec-execute-command-on-failure/58456016#58456016", "title": "rspec execute command on failure", "body": "<p>I've wanted to be able to do that as well! So I wrote a gem that lets you define an <code>on_failure</code> handler to output any information that would be helpful for debugging (or execute any Ruby code that you want).</p>\n\n<p>With <a href=\"https://github.com/TylerRick/rspec-on_failure\" rel=\"nofollow noreferrer\"><code>rspec-on_failure</code></a>, you can write your example either like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>on_failure -&gt;{ output_to_csv } do\n  expect(['x', 'y', 'z']).to be_empty\nend\n</code></pre>\n\n<p>or this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>on_failure -&gt;{ output_to_csv }\nexpect(['x', 'y', 'z']).to be_empty\n</code></pre>\n"}], "owner": {"reputation": 1696, "user_id": 2694638, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d35b5e9dc75fd6273f69391b7970905d?s=128&d=identicon&r=PG&f=1", "display_name": "Mo H.", "link": "https://stackoverflow.com/users/2694638/mo-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 38623200, "answer_count": 2, "score": 1, "last_activity_date": 1571426855, "creation_date": 1469631481, "last_edit_date": 1469641399, "question_id": 38616598, "link": "https://stackoverflow.com/questions/38616598/rspec-execute-command-on-failure", "title": "rspec execute command on failure", "body": "<p>Given I have a test like</p>\n\n<p><code>expect(['x', 'y', 'z']).to be_empty</code></p>\n\n<p>How can I get execute a command when the test fails, for example, to put the contents of my failed test into a csv file with row names specific to the data in that test. </p>\n\n<p>The best way I can think of to do this is </p>\n\n<pre><code>begin\n  expect(['x', 'y', 'z']).to be_empty\nrescue RSpec::Expectations::ExpectationNotMetError =&gt; e\n  #output to csv\n  raise e\nend\n</code></pre>\n\n<p>However this doesn't feel like the cleanest way to do it.</p>\n\n<p>Another option would be to put this in on failure hook in cucumber, however I would lose my ability to specify row names, or would need to define row names beforehand, which also feels weird.</p>\n\n<p>Is there any cleaner, more precise way to go about this? </p>\n\n<p><strong>Note: These tests are being run with cucumber</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 495, "user_id": 6644400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2d8f033d42fdb8e7fe7f1181e37c9832?s=128&d=identicon&r=PG&f=1", "display_name": "Ramano", "link": "https://stackoverflow.com/users/6644400/ramano"}, "edited": false, "score": 0, "creation_date": 1469680908, "post_id": 38621684, "comment_id": 64639017, "body": "that makes sense. have you tested it?"}], "tags": [], "owner": {"reputation": 646, "user_id": 1494770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f186c595fc9924b8adf8bfd6b595b1b9?s=128&d=identicon&r=PG", "display_name": "teksisto", "link": "https://stackoverflow.com/users/1494770/teksisto"}, "is_accepted": true, "score": 0, "last_activity_date": 1469648720, "last_edit_date": 1469648720, "creation_date": 1469648006, "answer_id": 38621684, "question_id": 38616186, "link": "https://stackoverflow.com/questions/38616186/managing-access-to-a-file-with-a-direct-link/38621684#38621684", "title": "Managing access to a file with a direct link", "body": "<p>Yes, it's possible. Move your files out of <code>public</code> folder, which is served by by your web server, to some other folder (<code>private</code> for example) and use <a href=\"http://api.rubyonrails.org/classes/ActionController/DataStreaming.html#method-i-send_file\" rel=\"nofollow\">send_file</a> in controller to transmit data. Some pseudo-code for controller:</p>\n\n<pre><code>def get_file\n  absolute_path = Rails.root + 'private' + params[:filepath]\n\n  if current_user.allowed_to_download?(params[:filepath]) &amp;&amp; File.exists?(absolute_path)        \n    send_file absolute_path, status: 200 # ok\n  else\n    render status: 403 # forbidden\n  end\nend\n</code></pre>\n\n<p>You will have to setup route for this action, but basicly that's all. </p>\n"}], "owner": {"reputation": 495, "user_id": 6644400, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2d8f033d42fdb8e7fe7f1181e37c9832?s=128&d=identicon&r=PG&f=1", "display_name": "Ramano", "link": "https://stackoverflow.com/users/6644400/ramano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 38621684, "answer_count": 1, "score": 0, "last_activity_date": 1469648720, "creation_date": 1469630510, "question_id": 38616186, "link": "https://stackoverflow.com/questions/38616186/managing-access-to-a-file-with-a-direct-link", "title": "Managing access to a file with a direct link", "body": "<p>I have a rails app where I upload files. I'm using gem cancan for managing access to files. The files are stored on the disk. Is it possible to manage access to a file or  restrict/allow it <strong>even when</strong> a user has a <strong>direct</strong> link to it?  Note I'm not using nginx or apache, it's a local application, therefore at best it's unicorn or simply the standard Rails web server.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 0, "last_activity_date": 1469630521, "creation_date": 1469630521, "answer_id": 38616192, "question_id": 38615995, "link": "https://stackoverflow.com/questions/38615995/extract-and-convert-any-ascii-code-from-a-string/38616192#38616192", "title": "extract and convert any ascii code from a string", "body": "<p>Use <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html\" rel=\"nofollow\">CGI</a> library from ruby </p>\n\n<pre><code>CGI.unescapeHTML(\"a &amp;#8211; b\")\n#=&gt; \"a \u2013 b\"\n</code></pre>\n"}], "owner": {"reputation": 18438, "user_id": 277740, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/yamcx.jpg?s=128&g=1", "display_name": "tokhi", "link": "https://stackoverflow.com/users/277740/tokhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "closed_date": 1469632005, "accepted_answer_id": 38616192, "answer_count": 1, "score": -1, "last_activity_date": 1469630521, "creation_date": 1469630021, "question_id": 38615995, "link": "https://stackoverflow.com/questions/38615995/extract-and-convert-any-ascii-code-from-a-string", "closed_reason": "Duplicate", "title": "extract and convert any ascii code from a string", "body": "<p>How can I extract the ascii code from a string and then convert it to char?</p>\n\n<p><code>string = \"a &amp;#8211; b\"</code></p>\n\n<p>to</p>\n\n<p><code>a \u2013 b</code></p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1469634033, "post_id": 38615783, "comment_id": 64621010, "body": "...and <i>parallel assignment</i> (sometimes called <i>multiple assignment</i>) can be combined with <i>disambiguation</i>: <code>my_array = [1,2,[3,4]]; a, b, (c, d) = my_array; a #=&gt; 1; b #=&gt; 2; c #=&gt; 3; d #=&gt; 4</code>."}, {"owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "edited": false, "score": 1, "creation_date": 1469634663, "post_id": 38615783, "comment_id": 64621436, "body": "You can also use parallel assignment to return &quot;multiple values&quot; from a method."}], "tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": true, "score": 4, "last_activity_date": 1469629511, "creation_date": 1469629511, "answer_id": 38615783, "question_id": 38615618, "link": "https://stackoverflow.com/questions/38615618/chaining-statements-together-with-commas/38615783#38615783", "title": "Chaining statements together with commas", "body": "<p>It's not actually chaining statements, it's parallel assignment. It means: assign the value of <code>b</code> to <code>a</code>, and assign the value of <code>a%b</code> to <code>b</code>, <em>at the same time</em>.</p>\n\n<p>Because the values are interdependent, it can't simply be written as:</p>\n\n<pre><code># WRONG\na = b\nb = a%b\n</code></pre>\n\n<p>You'd need a temporary variable:</p>\n\n<pre><code># Correct, but more verbose and less readable\nold_b = b\nb = a%b\na = old_b\n</code></pre>\n\n<p>The same syntax is also useful when destructuring arrays, for example:</p>\n\n<pre><code>my_array = [1,2,3]\na, b, c = my_array\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "is_accepted": false, "score": 0, "last_activity_date": 1469629538, "creation_date": 1469629538, "answer_id": 38615790, "question_id": 38615618, "link": "https://stackoverflow.com/questions/38615618/chaining-statements-together-with-commas/38615790#38615790", "title": "Chaining statements together with commas", "body": "<p>This is an example of a guard clause.</p>\n\n<p>Basically, a guard clause is a conditional statement which enables or prevents a block or line of ruby code from executing based on the conditional.</p>\n\n<p>Most languages have a paradigm as follows:</p>\n\n<pre><code>fn mymethod do\n   if somecondition\n       return calculation\n   else\n       return error\n   end\nend\n</code></pre>\n\n<p>Ruby allows you to restructure the above as:</p>\n\n<pre><code>def mymethod\n    return error unless somecondition\n    calculation\nend\n</code></pre>\n\n<p>I.e if the guard clause triggers, return the error, otherwise perform the default action of the calculation.</p>\n\n<p>In your case, the guard condition is a loop instead of a single condition.</p>\n"}], "owner": {"reputation": 622, "user_id": 5261664, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/87375db07c5bd508669792fc54ba23ad?s=128&d=identicon&r=PG&f=1", "display_name": "rwehresmann", "link": "https://stackoverflow.com/users/5261664/rwehresmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 38615783, "answer_count": 2, "score": 0, "last_activity_date": 1469629538, "creation_date": 1469629142, "question_id": 38615618, "link": "https://stackoverflow.com/questions/38615618/chaining-statements-together-with-commas", "title": "Chaining statements together with commas", "body": "<p>It's a really simple question, and I didn't find a good explanation. I know that it's possible chaining statements with semicolons, but I found some codes using commas. For example:</p>\n\n<pre><code>def gcd(a, b)  \n  a, b = b, a%b  until b.zero?  \n  a  \nend \n</code></pre>\n\n<p>This method calculate the greatest commom divisor between two numbers. I understand the logic behind this calculation, but someone can please explain me how that is happening with this sintax?</p>\n"}, {"tags": ["ruby", "methods", "parameters", "unary-operator"], "comments": [{"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1469629435, "post_id": 38614973, "comment_id": 64617549, "body": "I ting, you can use <code>exportable_scope(:some_scope, title: &#39;Some Scope&#39;){ rewhere archived: true }</code>. You dont need to send block like parametter."}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 1, "creation_date": 1469629502, "post_id": 38614973, "comment_id": 64617590, "body": "I think you&#39;re confusing passing a block with passing a callable object(lambda) as an argument, which what ActiveRecord <code>.scope</code> expects to receive. The body of the scope is required, so you can change your method signature to <code>exportable_scope(name, body, attributes = {})</code> and call <code>scope name, body</code>. Take a look at <code>.scope</code> definition here: <a href=\"https://github.com/rails/rails/blob/dc925119a3912ecfe0df400007163f33b99d6385/activerecord/lib/active_record/scoping/named.rb#L143\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/&hellip;</a>. <code>exportable_scope :some_scope, -&gt; { rewhere archived: true }, title: &#39;Some Scope&#39;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "is_accepted": true, "score": 6, "last_activity_date": 1469629154, "creation_date": 1469629154, "answer_id": 38615624, "question_id": 38614973, "link": "https://stackoverflow.com/questions/38614973/ruby-method-with-optional-options-and-block-parameter/38615624#38615624", "title": "Ruby method with optional options and &amp;block parameter", "body": "<p>Yes, it is possible. </p>\n\n<p>When mixing different kinds of parameters, they have to be included in the method definition in a specific order:</p>\n\n<ol>\n<li>Positional parameters (required and optional) and a single splat parameter, in any order;</li>\n<li>Keyword parameters (required and optional), in any order;</li>\n<li>Double splat parameter;</li>\n<li>Block parameter (prefixed with &amp;);</li>\n</ol>\n\n<p>The order above is somewhat flexible. We could define a method and begin the parameter list with a single splat argument, then a couple of optional positional arguments, and so on. Even though Ruby allows that, it's usually a very bad practice as the code would be hard to read and even harder to debug. It's usually best to use the following order:</p>\n\n<ol>\n<li>Required positional parameters;</li>\n<li>Optional positional parameters (with default values);</li>\n<li>Single splat parameter;</li>\n<li>Keyword parameters (required and optional, their order is irrelevant);</li>\n<li>Double splat parameter;</li>\n<li>Explicit block parameter (prefixed with &amp;).</li>\n</ol>\n\n<p>Example:</p>\n\n<pre><code>def meditate cushion, meditation=\"kinhin\", *room_items, time: , posture: \"kekkafuza\", **periods, &amp;b\n    puts \"We are practicing #{meditation}, for #{time} minutes, in the #{posture} posture (ouch, my knees!).\"\n    puts \"Room items: #{room_items}\"\n    puts \"Periods: #{periods}\"\n    b.call # Run the proc received through the &amp;b parameter\nend\n\nmeditate(\"zafu\", \"zazen\", \"zabuton\", \"incense\", time: 40, period1: \"morning\", period2: \"afternoon\" ) { puts \"Hello from inside the block\" }\n\n# Output:\nWe are practicing zazen, for 40 minutes, in the kekkafuza posture (ouch, my knees!).\nRoom items: [\"zabuton\", \"incense\"]\nPeriods: {:period1=&gt;\"morning\", :period2=&gt;\"afternoon\"}\nHello from inside the block\n</code></pre>\n\n<p>Notice that when calling the method, we have:</p>\n\n<ul>\n<li>Provided the cushion mandatory positional argument;</li>\n<li>Overwritten the default value of the meditation optional positional argument;</li>\n<li>Passed a couple of extra positional arguments (zabuton and incense) through the *room_items parameter;</li>\n<li>Provided the time mandatory keyword argument;</li>\n<li>Omitted the posture optional keyword argument;</li>\n<li>Passed a couple of extra keyword arguments (period1: \"morning\", period2: \"afternoon\") through the **periods parameter;</li>\n<li>Passed the block { puts \"Hello from inside the block\" } through the &amp;b parameter;</li>\n</ul>\n\n<p>Please note the example above servers only to illustrate the possibility of mixing different types of parameters. Building a method like this in real code would be a bad practice. If a method needs that many arguments, it's probably best to split it into smaller methods. If it's absolutely necessary to pass that much data to a single method, we should probably create a class to store the data in a more organized way, then pass an instance of that class to the method as a single argument.</p>\n"}], "owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2989, "favorite_count": 1, "accepted_answer_id": 38615624, "answer_count": 1, "score": 3, "last_activity_date": 1469629154, "creation_date": 1469627634, "question_id": 38614973, "link": "https://stackoverflow.com/questions/38614973/ruby-method-with-optional-options-and-block-parameter", "title": "Ruby method with optional options and &amp;block parameter", "body": "<ol>\n<li><p>Hey there</p>\n\n<p>Is it possible to have optional attributes and a block as parameters\nfor a method call?</p>\n\n<p>Example: I have to call</p>\n\n<pre><code>method(foo, foo: bar, -&gt; { do_something }\n</code></pre>\n\n<p>and tried it with</p>\n\n<pre><code>def method(foo, *bar, &amp;block)\nend\n</code></pre>\n\n<p>As for my understanding the block always has to be at last position?</p>\n\n<p>After a bit of research I found out the unary(?) <code>*</code> seems to be for\narrays. Since I try to pass a <code>Hash</code> I changed the code to</p>\n\n<pre><code>def method(foo, bar={}, &amp;block)\nend\n</code></pre>\n\n<p>But this doesn't do the trick either. I guess its because he cant\nfigure out where the bar ends and the block starts.</p>\n\n<p>Any ideas or suggestions? Thank you in advance</p>\n\n<p>Append: Just for the curious why I need this. We have a big json\nschema running and have a small DSL that builds the json from the\nmodel definitation. Without going to much into detail we wanted to\nimplement exportable_scopes.</p>\n\n<pre><code>class FooBar\n  exportable_scope :some_scope, title: 'Some Scope', -&gt; { rewhere archived: true }\nend\n</code></pre>\n\n<p>On some initializer this is supposed to happens:</p>\n\n<pre><code>def exportable_scope scope, attributes, &amp;block\n  scope scope block\n  if attributes.any?\n    attributes.each do |attribute|\n      exportable_schema.scopes[scope] = attribute\n    end\n  else\n    exportable_schema.scopes[scope] = {title: scope}\n  end\nend\n</code></pre>\n\n<p>So this is working fine, I just need a hint for the method\nparameters.</p></li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1469626092, "creation_date": 1469626092, "answer_id": 38614362, "question_id": 38614230, "link": "https://stackoverflow.com/questions/38614230/error-initializing-shortcode-gem/38614362#38614362", "title": "Error initializing ShortCode Gem", "body": "<p>Shortcode is not a Rails gem but the ruby gem [thus Rails come without this gem as its dependency]. Add <code>gem 'shortcode'</code> in your Gemfile, bundle the project and restart the application.</p>\n"}], "owner": {"reputation": 1, "user_id": 4253942, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jJy7MNi5X1E/AAAAAAAAAAI/AAAAAAAAKAA/gYqF3qUS7Kc/photo.jpg?sz=128", "display_name": "Samuel Useche", "link": "https://stackoverflow.com/users/4253942/samuel-useche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469626207, "creation_date": 1469625738, "last_edit_date": 1469626207, "question_id": 38614230, "link": "https://stackoverflow.com/questions/38614230/error-initializing-shortcode-gem", "title": "Error initializing ShortCode Gem", "body": "<p>I have a problem initializing the Rails Gem shortcode.</p>\n\n<p>I have this code in initializers / shortcode.rb</p>\n\n<pre><code>Shortcode.setup do |config|\n\n  config.template_parser = :haml \n\n  config.template_path = \"support/templates/chart\"\n\n  config.block_tags = [:chart]\n\nend\n</code></pre>\n\n<p>When I start the server rails (rails s) gives the following error.</p>\n\n<pre><code>/home/usuario/proyectos/rails/crowdfunding/config/initializers/shortcode.rb:3:in `&lt;top (required)&gt;': uninitialized constant Shortcode (NameError)\nfrom /usr/local/lib/ruby/gems/2.2.0/gems/railties-4.2.4/lib/rails/engine.rb:652:in `block in load_config_initializer'\nfrom /usr/local/lib/ruby/gems/2.2.0/gems/activesupport-4.2.4/lib/active_support/notifications.rb:166:in `instrument'\nfrom /usr/local/lib/ruby/gems/2.2.0/gems/railties-4.2.4/lib/rails/engine.rb:651:in `load_config_initializer'\n</code></pre>\n\n<p>Note: I already did <code>install bundle</code> and <code>bundle update sass-rails</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "time"], "comments": [{"owner": {"reputation": 3602, "user_id": 812786, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AtQA7.png?s=128&g=1", "display_name": "user812786", "link": "https://stackoverflow.com/users/812786/user812786"}, "edited": false, "score": 3, "creation_date": 1469625538, "post_id": 38614105, "comment_id": 64614549, "body": "Did you try anything? A google search for your title shows LOTS of resources for this."}], "answers": [{"tags": [], "owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "is_accepted": false, "score": 1, "last_activity_date": 1469626783, "creation_date": 1469626783, "answer_id": 38614632, "question_id": 38614105, "link": "https://stackoverflow.com/questions/38614105/compare-time-in-rails/38614632#38614632", "title": "Compare Time In Rails", "body": "<p>Are you looking for something like this?</p>\n\n<pre><code>def css_class(record)\n  today_ten_am = Time.now.at_beginning_of_day.advance(hours: 10)\n  if record.created_at &gt; today_ten_am\n    'danger'\n  end\nend\n</code></pre>\n\n<p>For the future: please post more inputs, what you tried, your existing code and everything.</p>\n"}], "owner": {"reputation": 11, "user_id": 6631437, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qFDfL7RRQy0/AAAAAAAAAAI/AAAAAAAAAPM/TY5P2LcPd2c/photo.jpg?sz=128", "display_name": "Pushkala Ravi", "link": "https://stackoverflow.com/users/6631437/pushkala-ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1469626783, "creation_date": 1469625404, "question_id": 38614105, "link": "https://stackoverflow.com/questions/38614105/compare-time-in-rails", "title": "Compare Time In Rails", "body": "<p>I need to be able to compare time in my rails app. Basically I have to compare my created_at timestamp and if the time in the timestamp is greater than say 10 AM then have to highlight the record as red in color in my view. How can i compare time to achieve this?    </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano", "capistrano3", "rake-task"], "answers": [{"comments": [{"owner": {"reputation": 358, "user_id": 1532672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d831264327d63f3c1994bca5104b2302?s=128&d=identicon&r=PG", "display_name": "Christian Vermeulen", "link": "https://stackoverflow.com/users/1532672/christian-vermeulen"}, "edited": false, "score": 0, "creation_date": 1469707026, "post_id": 38618306, "comment_id": 64654302, "body": "That was indeed the problem. I had removed that since at this moment there is only one server. Had nog idea it was actually mandatory! Thanks for the help!"}], "tags": [], "owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "is_accepted": true, "score": 4, "last_activity_date": 1469636158, "creation_date": 1469636158, "answer_id": 38618306, "question_id": 38613304, "link": "https://stackoverflow.com/questions/38613304/nomethoderror-undefined-method-within-for-mainobject/38618306#38618306", "title": "NoMethodError: undefined method `within&#39; for main:Object", "body": "<p>You need to tell Capistrano <em>where</em> (i.e. on what servers) to run your SSH commands. Do this using an <code>on</code> block, as follows:</p>\n\n<pre><code>namespace :fileservice do\n  task :migrate do\n    on roles(:db) do\n      within release_path do\n        info 'Doing migrations'\n        execute :php, fetch(:symfony_console_path), 'doctrine:migrations:migrate', '--no-interaction', fetch(:symfony_console_flags)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Replace <code>roles(:db)</code> as appropriate for your task, depending on where you want the commands to be run. The expression <code>on roles(:all) do ... end</code>, for example, will run the commands on all servers.</p>\n\n<hr>\n\n<p>You can also follow the official documentation at <a href=\"http://capistranorb.com\" rel=\"nofollow\">http://capistranorb.com</a>, or the <a href=\"https://github.com/capistrano/capistrano/blob/master/README.md\" rel=\"nofollow\">Capistrano README</a>, both of which show examples of the <code>task</code>/<code>on</code>/<code>execute</code> syntax.</p>\n"}, {"tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1469801670, "creation_date": 1469801670, "answer_id": 38661051, "question_id": 38613304, "link": "https://stackoverflow.com/questions/38613304/nomethoderror-undefined-method-within-for-mainobject/38661051#38661051", "title": "NoMethodError: undefined method `within&#39; for main:Object", "body": "<p>As you already got the answer but Let me put the bulb from basic.</p>\n\n<p><a href=\"https://github.com/capistrano/sshkit\" rel=\"nofollow\">SSHKit</a> was actually developed and released with Capistrano 3, and it\u2019s basically a lower-level tool that provides methods for connecting and interacting with remote servers; it does all the heavy lifting for Capistrano, in other words.</p>\n\n<p><strong>There are four main methods you need to know about.</strong></p>\n\n<p><strong><code>on()</code></strong>: specifies the server to run on</p>\n\n<p><strong><code>within()</code></strong>: specifies the directory path to run in</p>\n\n<p><strong><code>as()</code></strong>: specifies the user to run as</p>\n\n<p><strong><code>with()</code></strong>: specifies the environment variables to run with</p>\n\n<p>Typically, you\u2019ll start a task by using an <code>on()</code> method to specify the server on which you want your commands to run. Then you can use any combination of <code>as()</code>, <code>within()</code>, and <code>with()</code> methods, which are repeatable and stackable in any order.</p>\n\n<p>Hope this help you</p>\n"}], "owner": {"reputation": 358, "user_id": 1532672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d831264327d63f3c1994bca5104b2302?s=128&d=identicon&r=PG", "display_name": "Christian Vermeulen", "link": "https://stackoverflow.com/users/1532672/christian-vermeulen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1247, "favorite_count": 0, "accepted_answer_id": 38618306, "answer_count": 2, "score": 2, "last_activity_date": 1469801670, "creation_date": 1469623328, "last_edit_date": 1469625227, "question_id": 38613304, "link": "https://stackoverflow.com/questions/38613304/nomethoderror-undefined-method-within-for-mainobject", "title": "NoMethodError: undefined method `within&#39; for main:Object", "body": "<p>I'm trying to make Capistrano deploy script.</p>\n\n<p>In my Capfile I make sure all rake tasks are included</p>\n\n<pre><code># Load tasks\nDir.glob('config/capistrano_tasks/*.rake').each { |r| import r }\n</code></pre>\n\n<p>Next I have a 'migrations.rake' containing:</p>\n\n<pre><code>namespace :fileservice do\n    task :migrate do\n        within release_path do\n            info 'Doing migrations'\n\n            execute :php, fetch(:symfony_console_path), 'doctrine:migrations:migrate', '--no-interaction', fetch(:symfony_console_flags)\n        end\n    end\nend\n</code></pre>\n\n<p>In my deploy.rb I call the task at the very end with:</p>\n\n<pre><code>after 'deploy:publishing', 'fileservice:migrate'\n</code></pre>\n\n<p>For some reason I keep getting an error saying:</p>\n\n<pre><code>NoMethodError: undefined method `within' for main:Object\n</code></pre>\n\n<p>I have no idea where to look or what might be wrong... When googling I get a lot of \"NoMethodError\" hits but none about the 'within' method and most are general Ruby errors.</p>\n\n<p>Where should \"within\" be defined? I dat a ruby on rails thing? Or capistrano?</p>\n\n<p>Hopefully someone knows where to start looking or which library / script to include!</p>\n\n<p><strong>UPDATE:</strong> I just discovered that none of the methods work. When removing lines I got the same error for \"info\" and \"execute\".... So I guess somewhere, something is missing.....</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "pg", "pg-search"], "answers": [{"comments": [{"owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "edited": false, "score": 0, "creation_date": 1469624850, "post_id": 38613428, "comment_id": 64613969, "body": "yeah, the problem is that I need to get all results and filter after the fact."}], "tags": [], "owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "is_accepted": true, "score": 1, "last_activity_date": 1469626298, "last_edit_date": 1469626298, "creation_date": 1469623635, "answer_id": 38613428, "question_id": 38613211, "link": "https://stackoverflow.com/questions/38613211/how-to-filter-results-by-their-associations-when-using-pg-search-gem/38613428#38613428", "title": "How to filter results by their associations when using PG search gem?", "body": "<p>What about changing the chain?</p>\n\n<pre><code>@articles = Article.where(category: 'research').search(params[:search]).with_pg_search_highlight\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>A way without making 2 queries would be:</p>\n\n<pre><code>@found_articles = Article.search(params[:search]).with_pg_search_highlight\n@research_articles = @found_articles.select { |article| article.category == \"research\" }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "edited": false, "score": 0, "creation_date": 1469625353, "post_id": 38613901, "comment_id": 64614389, "body": "How would it be different from articles = Article.search(params[:search]).with_pg_search_highlight; research_articles = Article.where(category: &#39;research&#39;).search(params[:search]).with_pg_search_highlight"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "edited": false, "score": 0, "creation_date": 1469625475, "post_id": 38613901, "comment_id": 64614498, "body": "It won&#39;t, but it might help to DRY for 50 different searches. Plus the intent is more clear."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1469624882, "creation_date": 1469624882, "answer_id": 38613901, "question_id": 38613211, "link": "https://stackoverflow.com/questions/38613211/how-to-filter-results-by-their-associations-when-using-pg-search-gem/38613901#38613901", "title": "How to filter results by their associations when using PG search gem?", "body": "<p>You probably should define a scope (or even simple getter would be enough here) and reuse it:</p>\n\n<pre><code>def simple_search\n  pure = Article.search(params[:search])\n  (block_given? ? yield(pure) : pure).with_pg_search_highlight\nend\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>@articles = simple_search\n@research_articles = simple_search { |ss| ss.where(category: 'research') }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 202, "user_id": 3432863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0cf765e4c185fd7f3d2e56d21fb6742?s=128&d=identicon&r=PG&f=1", "display_name": "Ankita Tandel", "link": "https://stackoverflow.com/users/3432863/ankita-tandel"}, "is_accepted": false, "score": 2, "last_activity_date": 1469693780, "creation_date": 1469693780, "answer_id": 38630722, "question_id": 38613211, "link": "https://stackoverflow.com/questions/38613211/how-to-filter-results-by-their-associations-when-using-pg-search-gem/38630722#38630722", "title": "How to filter results by their associations when using PG search gem?", "body": "<p>pg_search gem provides pg_search_scope.</p>\n\n<p>See the doc <a href=\"https://github.com/Casecommons/pg_search#pg_search_scope\" rel=\"nofollow\">https://github.com/Casecommons/pg_search#pg_search_scope</a></p>\n\n<p>You can also chain where condition with pg_search_scope.</p>\n"}], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1241, "favorite_count": 0, "accepted_answer_id": 38613428, "answer_count": 3, "score": 1, "last_activity_date": 1469693780, "creation_date": 1469623067, "question_id": 38613211, "link": "https://stackoverflow.com/questions/38613211/how-to-filter-results-by-their-associations-when-using-pg-search-gem", "title": "How to filter results by their associations when using PG search gem?", "body": "<p>I am using PG search gem in my Rails app. Say I get a set of articles in my controller:</p>\n\n<pre><code>@articles = Article.search(params[:search]).with_pg_search_highlight\n</code></pre>\n\n<p>the problem with PG search here is that I get back an array, instead of AR object. So now I cannot do something like</p>\n\n<pre><code>@research_articles = @articles.where(category: 'research')\n</code></pre>\n\n<p>Because I will get a </p>\n\n<pre><code>undefined method `where' for Array\n</code></pre>\n\n<p>Now I can make several queries from that one action, but what would be a better solution to this problem?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469623143, "post_id": 38613166, "comment_id": 64612613, "body": "Well, that regex doesn&#39;t match anything in that string. Therefore, no output."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469623220, "post_id": 38613166, "comment_id": 64612667, "body": "I am preeeetty sure you don&#39;t want to match literal dot zero or more times. Use <a href=\"http://regex101.com\" rel=\"nofollow noreferrer\">regex101.com</a>, it&#39;s great."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 3, "creation_date": 1469623361, "post_id": 38613166, "comment_id": 64612770, "body": "Please consider using an actual XML parser (e.g. <a href=\"http://www.nokogiri.org/\" rel=\"nofollow noreferrer\">Nokogiri</a>) instead of <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/\">parsing XML with regex</a>."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 2, "creation_date": 1469623433, "post_id": 38613166, "comment_id": 64612823, "body": "Additionally, your example output array is not valid Ruby."}, {"owner": {"reputation": 19, "user_id": 6634968, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7WKWOZIKK10/AAAAAAAAAAI/AAAAAAAAAYo/3HpDDDtaMz0/photo.jpg?sz=128", "display_name": "\u0110inh V\u0103n Khang", "link": "https://stackoverflow.com/users/6634968/%c4%90inh-v%c4%83n-khang"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469623453, "post_id": 38613166, "comment_id": 64612837, "body": "Thank @SergioTulentsev"}, {"owner": {"reputation": 19, "user_id": 6634968, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7WKWOZIKK10/AAAAAAAAAAI/AAAAAAAAAYo/3HpDDDtaMz0/photo.jpg?sz=128", "display_name": "\u0110inh V\u0103n Khang", "link": "https://stackoverflow.com/users/6634968/%c4%90inh-v%c4%83n-khang"}, "reply_to_user": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1469623696, "post_id": 38613166, "comment_id": 64613012, "body": "Thank you @AndrewMarshall but i don&#39;t want use module"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1469638554, "post_id": 38613166, "comment_id": 64623714, "body": "Further to @Andrew&#39;s point about the output array being invalid, the first element of the array you&#39;ve shown (<code>version=&quot;xyzt&quot;</code>) implies that <code>version</code> is a local variable produced from the given string. Since Ruby v1.8 it has not been possible to create local variables. The question only makes sense if the first element of the array is the string <code>&#39;version=&quot;xyzt&quot;&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469623329, "post_id": 38613284, "comment_id": 64612747, "body": "He wants array of attributes."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1469623955, "post_id": 38613284, "comment_id": 64613219, "body": "Oh my been a long time since I\u2019ve seen the <code>?</code> character string literal used."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1469624005, "post_id": 38613284, "comment_id": 64613268, "body": "@AndrewMarshall It saves one keypress per char constant :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1469623617, "last_edit_date": 1469623617, "creation_date": 1469623268, "answer_id": 38613284, "question_id": 38613166, "link": "https://stackoverflow.com/questions/38613166/how-to-extract-group-match-to-array/38613284#38613284", "title": "How to extract group match to array?", "body": "<pre><code>string[/(?&lt;=\\&lt;\\?xml ).*(?=\\?&gt;)/]\n#\u21d2 'version=\"xyzt\" standalone=\"112.0\" sxcx=\"xcxc\"'\n</code></pre>\n\n<p>If you need to surround it with square brackets:</p>\n\n<pre><code>?[ &lt;&lt; string[/(?&lt;=\\&lt;\\?xml ).*(?=\\?&gt;)/] &lt;&lt; ?]\n#\u21d2 '[version=\"xyzt\" standalone=\"112.0\" sxcx=\"xcxc\"]'\n</code></pre>\n\n<p>To get a hash of attributes:</p>\n\n<pre><code>string[/(?&lt;=\\&lt;\\?xml ).*(?=\\?&gt;)/].split(/\\s+/)\n                                .map { |e| e.split('=') }\n                                .to_h\n#\u21d2 {\n#  \"standalone\" =&gt; \"\\\"112.0\\\"\",\n#        \"sxcx\" =&gt; \"\\\"xcxc\\\"\",\n#     \"version\" =&gt; \"\\\"xyzt\\\"\"\n# }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1469638256, "creation_date": 1469638256, "answer_id": 38618963, "question_id": 38613166, "link": "https://stackoverflow.com/questions/38613166/how-to-extract-group-match-to-array/38618963#38618963", "title": "How to extract group match to array?", "body": "<pre><code>str = '&lt;?xml version=\"xyzt\" standalone=\"112.0\" sxcx=\"xcxc\"?&gt;'\n</code></pre>\n\n<p>I assume you want to produce the array:</p>\n\n<pre><code>['version=\"xyzt\"', 'standalone=\"112.0\"', 'sxcx=\"xcxc\"']\n</code></pre>\n\n<p>You can do that as follows:</p>\n\n<pre><code>arr = str.scan(/[a-z]+\\=\\S+/)\n  #=&gt; [\"version=\\\"xyzt\\\"\", \"standalone=\\\"112.0\\\"\", \"sxcx=\\\"xcxc\\\"?&gt;\"] \n\nputs arr\n# version=\"xyzt\"\n# standalone=\"112.0\"\n# sxcx=\"xcxc\"?&gt;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6634968, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7WKWOZIKK10/AAAAAAAAAAI/AAAAAAAAAYo/3HpDDDtaMz0/photo.jpg?sz=128", "display_name": "\u0110inh V\u0103n Khang", "link": "https://stackoverflow.com/users/6634968/%c4%90inh-v%c4%83n-khang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1469638256, "creation_date": 1469622952, "last_edit_date": 1469623256, "question_id": 38613166, "link": "https://stackoverflow.com/questions/38613166/how-to-extract-group-match-to-array", "title": "How to extract group match to array?", "body": "<p>I have a string such as:</p>\n\n<pre><code>&lt;?xml version=\"xyzt\" standalone=\"112.0\" sxcx=\"xcxc\"?&gt;\n</code></pre>\n\n<p>I want to extract the string to array where each element is an attribute of string such as <code>[version=\"xyzt\", standalone=\"112.0\", sxcx=\"xcxc\"]</code>.</p>\n\n<p>I tried using <code>string.scan(/\\s\\w+=\"\\.*\"/) do |block| puts block end</code> but I don't get a result.. Please tell me why and how I can do it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "edited": false, "score": 0, "creation_date": 1469623084, "post_id": 38613122, "comment_id": 64612552, "body": "what is the criteria for identify the category is for <code>Men</code> or <code>Woman</code>?"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "edited": false, "score": 0, "creation_date": 1469623142, "post_id": 38613122, "comment_id": 64612610, "body": "do you mean how that value is gathered? if so <code>c.name</code>"}, {"owner": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "edited": false, "score": 0, "creation_date": 1469623352, "post_id": 38613122, "comment_id": 64612759, "body": "your required this <a href=\"https://jsfiddle.net/6tqamxvz/\" rel=\"nofollow noreferrer\">jsfiddle.net/6tqamxvz</a> output right?"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "edited": false, "score": 0, "creation_date": 1469623513, "post_id": 38613122, "comment_id": 64612887, "body": "ive updated my question with desired output, thank you"}, {"owner": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "edited": false, "score": 0, "creation_date": 1469624139, "post_id": 38613122, "comment_id": 64613390, "body": "Ok, So now my question is How you identufy that category is goes under <code>Gender optgroup</code> ?"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "edited": false, "score": 0, "creation_date": 1469624206, "post_id": 38613122, "comment_id": 64613453, "body": "well there are only 2, <code>Men, Women</code>, nothing else goes under the <code>Gender optgroup</code>"}, {"owner": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1469627578, "post_id": 38613122, "comment_id": 64616083, "body": "<a href=\"https://select2.github.io/examples.html\" rel=\"nofollow noreferrer\">select2.github.io/examples.html</a> look at this once"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1469627822, "post_id": 38613122, "comment_id": 64616289, "body": "thanks @Mukesh I already use <a href=\"https://github.com/davidstutz/bootstrap-multiselect\" rel=\"nofollow noreferrer\">github.com/davidstutz/bootstrap-multiselect</a> which is why i want to wrap two of my categories in an optgroup.... what am i looking at in particular?"}, {"owner": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1469629043, "post_id": 38613122, "comment_id": 64617215, "body": "Dynamically I think it is not possible... By using static logic....It can be done.....with using html select and ruby each loop and if conditions"}], "answers": [{"tags": [], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "is_accepted": false, "score": 0, "last_activity_date": 1469630669, "last_edit_date": 1469630669, "creation_date": 1469629776, "answer_id": 38615893, "question_id": 38613122, "link": "https://stackoverflow.com/questions/38613122/select-dropdown-and-each-block-ruby-rails/38615893#38615893", "title": "select dropdown and each block - Ruby/Rails", "body": "<p>In the end i implemented this solution, I still feel that this could be done more elegantly</p>\n\n<pre><code>Controller\n\n@gender_categories = Category.where(name: ['Mens', 'Womens'])\n@categories = Category.where.not(name: ['Mens', 'Womens'] )\n\nView \n\n&lt;select id=\"bike_category_filter\" multiple=\"multiple\"&gt;\n  &lt;optgroup label=\"Gender\"&gt;\n    &lt;% @gender_categories.each do |c| %&gt;\n      &lt;option value=\"&lt;%= c.name %&gt;\"&gt;&lt;%= c.name %&gt;&lt;/option&gt;\n    &lt;% end %&gt;\n  &lt;/optgroup&gt;\n\n  &lt;optgroup label=\" Bike Type\"&gt;\n    &lt;% @categories.each do |c| %&gt;\n      &lt;option value=\"&lt;%= c.name %&gt;\"&gt;&lt;%= c.name %&gt;&lt;/option&gt;\n    &lt;% end %&gt;\n &lt;/optgroup&gt;\n&lt;/select&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1469630382, "post_id": 38616052, "comment_id": 64618337, "body": "Thanks for the answer, but I think any logic in the view is a no no. Appreciate you taking the time to answer though"}], "tags": [], "owner": {"reputation": 1195, "user_id": 1201917, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2bfbfc7322e119a59b09eefd2775e05e?s=128&d=identicon&r=PG", "display_name": "user1201917", "link": "https://stackoverflow.com/users/1201917/user1201917"}, "is_accepted": false, "score": 0, "last_activity_date": 1469636224, "last_edit_date": 1469636224, "creation_date": 1469630160, "answer_id": 38616052, "question_id": 38613122, "link": "https://stackoverflow.com/questions/38613122/select-dropdown-and-each-block-ruby-rails/38616052#38616052", "title": "select dropdown and each block - Ruby/Rails", "body": "<p>There is a nifty method called <code>partition</code>, which groups items into two groups.</p>\n\n<p><strong>controller:</strong></p>\n\n<pre><code>@primary_group, @secondary_group = Category.all.partition { |c| c.name == 'Men' or c.name == 'Woman'}\n</code></pre>\n\n<p><strong>view</strong></p>\n\n<pre><code>&lt;select id=\"bike_category_filter\" multiple=\"multiple\"&gt;\n  &lt;optgroup label=\"Gender\"&gt;\n    &lt;% @primary_group.each do |c| %&gt;\n      &lt;option value=\"&lt;%= c.name %&gt;\"&gt;&lt;%= c.name %&gt;&lt;/option&gt;\n    &lt;% end %&gt;\n  &lt;/optgroup&gt;\n\n  &lt;% @secondary_group.each do |c| %&gt;\n    &lt;option value=\"&lt;%= c.name %&gt;\"&gt;&lt;%= c.name %&gt;&lt;/option&gt;\n  &lt;% end %&gt;\n&lt;/select&gt;\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1469636224, "creation_date": 1469622807, "last_edit_date": 1469627278, "question_id": 38613122, "link": "https://stackoverflow.com/questions/38613122/select-dropdown-and-each-block-ruby-rails", "title": "select dropdown and each block - Ruby/Rails", "body": "<p>I have a simple <code>each</code> block that takes each category and creates an <code>option</code></p>\n\n<pre><code>@categories = Category.all\n\n&lt;select id=\"bike_category_filter\" multiple=\"multiple\"&gt;\n  &lt;% @categories.each do |c| %&gt;\n    &lt;option value=\"&lt;%= c.name %&gt;\"&gt;&lt;%= c.name %&gt;&lt;/option&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p></p>\n\n<p>What I would like to with the categories <code>Men and Women</code> (so c.name) is surround them with an <code>&lt;optgroup&gt;</code> tag. How could I achieve that, a link to a resource or explanation on where to look would suffice, not necessarily looking for someone to give me the answer</p>\n\n<p>The desired output would look like</p>\n\n<pre><code>&lt;select&gt;\n  &lt;optgroup label=\"Gender\"&gt;\n    &lt;option value=\"cat1\"&gt;Men&lt;/option&gt;\n    &lt;option value=\"cat2\"&gt;Women&lt;/option&gt;\n  &lt;/optgroup&gt;\n    &lt;option value=\"cat3\"&gt;Cat5&lt;/option&gt;\n    &lt;option value=\"cat4\"&gt;Cat4&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 9845, "user_id": 119822, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wnqih.jpg?s=128&g=1", "display_name": "Andy Waite", "link": "https://stackoverflow.com/users/119822/andy-waite"}, "edited": false, "score": 0, "creation_date": 1469631802, "post_id": 38612778, "comment_id": 64619419, "body": "If you are worried about this, use Keyword Arguments: <a href=\"https://robots.thoughtbot.com/ruby-2-keyword-arguments\" rel=\"nofollow noreferrer\">robots.thoughtbot.com/ruby-2-keyword-arguments</a>"}, {"owner": {"reputation": 83, "user_id": 6623828, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/cAqoq.png?s=128&g=1", "display_name": "C&#252;neyt \u015eent&#252;rk", "link": "https://stackoverflow.com/users/6623828/c%c3%bcneyt-%c5%9eent%c3%bcrk"}, "reply_to_user": {"reputation": 9845, "user_id": 119822, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wnqih.jpg?s=128&g=1", "display_name": "Andy Waite", "link": "https://stackoverflow.com/users/119822/andy-waite"}, "edited": false, "score": 0, "creation_date": 1469687806, "post_id": 38612778, "comment_id": 64641786, "body": "Hash parameters That&#39;s what i exactly needed thank you very much!"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6623828, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/cAqoq.png?s=128&g=1", "display_name": "C&#252;neyt \u015eent&#252;rk", "link": "https://stackoverflow.com/users/6623828/c%c3%bcneyt-%c5%9eent%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1469625534, "post_id": 38612902, "comment_id": 64614545, "body": "Yea but here the problem is what if i send argument like  def_update new_name, id  not as id, new_name  ?"}, {"owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "reply_to_user": {"reputation": 83, "user_id": 6623828, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/cAqoq.png?s=128&g=1", "display_name": "C&#252;neyt \u015eent&#252;rk", "link": "https://stackoverflow.com/users/6623828/c%c3%bcneyt-%c5%9eent%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1469626105, "post_id": 38612902, "comment_id": 64614985, "body": "it might be helpful if you show what your concerns are in code"}, {"owner": {"reputation": 83, "user_id": 6623828, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/cAqoq.png?s=128&g=1", "display_name": "C&#252;neyt \u015eent&#252;rk", "link": "https://stackoverflow.com/users/6623828/c%c3%bcneyt-%c5%9eent%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1469626505, "post_id": 38612902, "comment_id": 64615286, "body": "Method expect 2 parameter in this order. def update_recipe id, new_name end  So what if i use a method like  .update_recipe new_name, id"}, {"owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "reply_to_user": {"reputation": 83, "user_id": 6623828, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/cAqoq.png?s=128&g=1", "display_name": "C&#252;neyt \u015eent&#252;rk", "link": "https://stackoverflow.com/users/6623828/c%c3%bcneyt-%c5%9eent%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1469626577, "post_id": 38612902, "comment_id": 64615342, "body": "Did you notice I changed your code? My changes will make your test pass."}, {"owner": {"reputation": 83, "user_id": 6623828, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/cAqoq.png?s=128&g=1", "display_name": "C&#252;neyt \u015eent&#252;rk", "link": "https://stackoverflow.com/users/6623828/c%c3%bcneyt-%c5%9eent%c3%bcrk"}, "edited": false, "score": 0, "creation_date": 1469627031, "post_id": 38612902, "comment_id": 64615692, "body": "Yea but im not talking about type checking. lets check my rspec expect code i have send prameters in incorrect order not as method expected. So this must raise an error ?"}], "tags": [], "owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "is_accepted": false, "score": 1, "last_activity_date": 1469622282, "creation_date": 1469622282, "answer_id": 38612902, "question_id": 38612778, "link": "https://stackoverflow.com/questions/38612778/rubyrspec-methods-arguments-sequence-check/38612902#38612902", "title": "Ruby+Rspec method&#39;s arguments sequence check", "body": "<p>You could do something similar to what you did for handling nil based on what you know id or new_name should be. For example, making sure the id is an integer.</p>\n\n<pre><code>def update_recipe(id, new_name)\n  raise ArgumentError unless id.is_a? Integer\n  raise ArgumentError if id.nil? || new_name.nil?\n  recipe = find_recipe_by_id(id).dup\n  recipe.name = new_name\n  @storage[id] = recipe\n  recipe.freeze\nend\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 6623828, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/cAqoq.png?s=128&g=1", "display_name": "C&#252;neyt \u015eent&#252;rk", "link": "https://stackoverflow.com/users/6623828/c%c3%bcneyt-%c5%9eent%c3%bcrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469622282, "creation_date": 1469621967, "question_id": 38612778, "link": "https://stackoverflow.com/questions/38612778/rubyrspec-methods-arguments-sequence-check", "title": "Ruby+Rspec method&#39;s arguments sequence check", "body": "<p>I try to test method, what will be happen if coming arguments sequence is incorrect. i have already checked for nil parameter.\nmy method accept id, new_name and i want to know what to do when parameters are new_name, id</p>\n\n<p>Hope my question is clear.</p>\n\n<p>Method which i want to test:</p>\n\n<pre><code>def update_recipe(id, new_name)\n  raise ArgumentError if id.nil? || new_name.nil?\n  recipe = find_recipe_by_id(id).dup\n  recipe.name = new_name\n  @storage[id] = recipe\n  recipe.freeze\nend\n</code></pre>\n\n<p>Here is the rspec code:</p>\n\n<pre><code>context 'when argument sequence is not correct' do\n  let(:added_recipe) { subject.add_recipe recipe }\n\n  it 'raises an ArgumentError' do\n    expect { subject.update_recipe 'Pasta', added_recipe.id }.to raise_error ArgumentError\n  end\nend\n</code></pre>\n"}, {"tags": ["mysql", "sql", "ruby"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6558246"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469622372, "post_id": 38612767, "comment_id": 64611976, "body": "it is a big query, but is it related to sql query? because the query works, i just want my script to exit when it finish the process."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469622523, "post_id": 38612767, "comment_id": 64612105, "body": "Well, the client should be waiting for the query result. Unless there&#39;s something in it that makes client not wait."}, {"owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "edited": false, "score": 1, "creation_date": 1469623031, "post_id": 38612767, "comment_id": 64612518, "body": "Do you by any chance have <code>async: true</code> as a parameter when you instantiate the client or run the query?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6558246"}, "reply_to_user": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "edited": false, "score": 0, "creation_date": 1469630924, "post_id": 38612767, "comment_id": 64618775, "body": "Hi @LarsHaugseth, no, what this param actually do ? thank you"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6558246"}, "edited": false, "score": 0, "creation_date": 1469631160, "post_id": 38612767, "comment_id": 64618942, "body": "I tried client = Mysql2::Client.new( :host =&gt; ENV_YML[&#39;host&#39;], :username =&gt; ENV_YML[&#39;username&#39;], :password =&gt; ENV_YML[&#39;password&#39;], :database =&gt; ENV_YML[&#39;dbtemp&#39;], :flags =&gt; Mysql2::Client::MULTI_STATEMENTS, :async =&gt; true ) but the client still not waiting for the query result."}], "answers": [{"tags": [], "owner": {"reputation": 1310, "user_id": 4308473, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/3Pk1P.png?s=128&g=1", "display_name": "Berlin", "link": "https://stackoverflow.com/users/4308473/berlin"}, "is_accepted": true, "score": 4, "last_activity_date": 1469832789, "last_edit_date": 1469832789, "creation_date": 1469829685, "answer_id": 38668097, "question_id": 38612767, "link": "https://stackoverflow.com/questions/38612767/ruby-script-end-before-sql-query-finish/38668097#38668097", "title": "Ruby script end before sql query finish", "body": "<p>From the <a href=\"https://github.com/brianmario/mysql2\" rel=\"nofollow\">official documentation</a>:</p>\n\n<blockquote>\n  <p>Multiple result sets</p>\n  \n  <p>You can also retrieve multiple result sets. For this to work you need\n  to connect with flags Mysql2::Client::MULTI_STATEMENTS. Multiple\n  result sets can be used with stored procedures that return more than\n  one result set, and for bundling several SQL statements into a single\n  call to client.query.</p>\n\n<pre><code>client = Mysql2::Client.new(:host =&gt; \"localhost\", :username =&gt; \"root\", :flags =&gt; Mysql2::Client::MULTI_STATEMENTS)\n\nresult = client.query('...')\n\nwhile client.next_result\n  result = client.store_result\n  # result now contains the next result set\nend\n</code></pre>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6558246"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 1, "accepted_answer_id": 38668097, "answer_count": 1, "score": 5, "last_activity_date": 1512841200, "creation_date": 1469621948, "last_edit_date": 1512841200, "question_id": 38612767, "link": "https://stackoverflow.com/questions/38612767/ruby-script-end-before-sql-query-finish", "title": "Ruby script end before sql query finish", "body": "<p>I run a SQL query with a ruby script that should take around 2 hours.</p>\n\n<p>How I can make sure the script will exit/end only when the process of the query finish, because right now I ran the script, it pass the query to the DB, and the script immediately close while the query still running on the DB.\nmost of the query is commands like inserts, drop tables, create tables.</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'mysql2'\nclient = Mysql2::Client.new(:host =&gt; ENV_YML['host'], :username =&gt; ENV_YML['username'], :password =&gt; ENV_YML['password'], :database =&gt; ENV_YML['dbtemp'], :flags =&gt; Mysql2::Client::MULTI_STATEMENTS)\n\n\nclient.query(\"\n...\n  \")\n</code></pre>\n\n<p>I want to run this query only after the first one finish </p>\n\n<pre><code>client.query(\"SELECT ;\").each do |row|\n....\nend\n</code></pre>\n\n<p>Any idea how to wait for the query to finish, because I want to add another query in the same script that check the first query after it finish.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1469621444, "post_id": 38612507, "comment_id": 64611311, "body": "Look at <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-sort_by\" rel=\"nofollow noreferrer\"><code>Enumerable#sort_by</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1469622806, "creation_date": 1469622806, "answer_id": 38613120, "question_id": 38612507, "link": "https://stackoverflow.com/questions/38612507/ruby-sort-array-of-objects-after-an-array-of-name-properties/38613120#38613120", "title": "Ruby: Sort array of objects after an array of name properties", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-sort_by\" rel=\"nofollow\">Enumerable#sort_by</a></p>\n\n<pre><code>my_array.sort_by {|x| @sizes_sort_order.index(x.name) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "is_accepted": false, "score": 2, "last_activity_date": 1469623372, "creation_date": 1469623372, "answer_id": 38613329, "question_id": 38612507, "link": "https://stackoverflow.com/questions/38612507/ruby-sort-array-of-objects-after-an-array-of-name-properties/38613329#38613329", "title": "Ruby: Sort array of objects after an array of name properties", "body": "<p>You can include the <code>Comparable</code>module to get a natural sort for the objects.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.3/Comparable.html\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.3/Comparable.html</a></p>\n\n<blockquote>\n  <p>The Comparable mixin is used by classes whose objects may be ordered.\n  The class must define the &lt;=> operator, which compares the receiver\n  against another object, returning -1, 0, or +1 depending on whether\n  the receiver is less than, equal to, or greater than the other object.</p>\n</blockquote>\n\n<pre><code>class Size\n  include Comparable\n\n  SIZES = [\"XS\", \"XS/S\", \"S\", \"S/M\", \"M\", \"M/L\", \"L\", \"L/XL\", \"XL\"]\n\n  attr_reader :name\n  def initialize(id, name)\n    @id = id\n    @name = name\n  end\n\n  def &lt;=&gt;(b)\n    SIZES.index(name) &lt;=&gt; SIZES.index(b.name)\n  end\nend\n\na = Size.new(5, 'M')\nb = Size.new(6, 'M/L')\nc = Size.new(7, 'XS/S')\n\nprint [a, b, c].sort\n\n[#&lt;Size:0x007f8e910458e0 @id=7, @name=\"XS/S\"&gt;, #&lt;Size:0x007f8e910459a8 @id=5, @name=\"M\"&gt;, #&lt;Size:0x007f8e91045930 @id=6, @name=\"M/L\"&gt;]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "edited": false, "score": 0, "creation_date": 1469708322, "post_id": 38619963, "comment_id": 64655253, "body": "wow, thanks a lot Cary! For this case i stick to the sort_by solution but for larger arrays I&#39;ll choose yours. Awesome explanation by the way."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1469643122, "last_edit_date": 1469643122, "creation_date": 1469641818, "answer_id": 38619963, "question_id": 38612507, "link": "https://stackoverflow.com/questions/38612507/ruby-sort-array-of-objects-after-an-array-of-name-properties/38619963#38619963", "title": "Ruby: Sort array of objects after an array of name properties", "body": "<p>This approach involves more steps than ones that employ <code>sort</code> or <code>sort_by</code>, but for larger arrays it may be faster, as no sorting--which is relatively expensive--is involved.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def reorder_by_size(instances, size_order)\n  instances.each_with_object({}) { |inst, h| h.update(inst.name=&gt;inst) }.\n    values_at(*(size_order &amp; (instances.map { |s| s.name })))\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<p>First let's create an array of instances of</p>\n\n<pre><code>class Sizes\n  attr_reader :name\n\n  def initialize(id, name)\n    @id = id\n    @name = name\n  end\nend\n</code></pre>\n\n<p>like so:</p>\n\n<pre><code>instances = [Sizes.new(5,'M'), Sizes.new(6,'M/L'), Sizes.new(7, 'XS/S')]\n  #=&gt; [#&lt;Sizes:0x007fa66a955ac0 @id=5, @name=\"M\"&gt;,\n  #    #&lt;Sizes:0x007fa66a955a70 @id=6, @name=\"M/L\"&gt;,\n  #    #&lt;Sizes:0x007fa66a955a20 @id=7, @name=\"XS/S\"&gt;]\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>reorder_by_size(instances, @sizes_sort_order)\n #=&gt; [#&lt;Sizes:0x007fa66a01dfc0 @id=7, @name=\"XS/S\"&gt;,\n #    #&lt;Sizes:0x007fa66a86fdb8 @id=5, @name=\"M\"&gt;,\n #    #&lt;Sizes:0x007fa66a8404f0 @id=6, @name=\"M/L\"&gt;] \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>For <code>instances</code> as defined for the example, first create an array of sizes in the desired order:</p>\n\n<pre><code>names = @sizes_sort_order &amp; (instances.map { |s| s.name })\n  #=&gt; [\"XS/S\", \"M\", \"M/L\"]\n</code></pre>\n\n<p><em>Important</em>: the doc for <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-26\" rel=\"nofollow\">Array#&amp;</a> states, \"The order is preserved from the original array.\".</p>\n\n<p>Now we can create the desired reordering without sorting, by creating a hash with keys the sizes and values the instances, then use <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-values_at\" rel=\"nofollow\">Hash#values_at</a> to extract the instances in the desired order.</p>\n\n<pre><code>instances.each_with_object({}) { |inst, h|\n  h.update(inst.name=&gt;inst) }.values_at(*names)\n  #=&gt; [#&lt;Sizes:0x007fa66a01dfc0 @id=7, @name=\"XS/S\"&gt;,\n  #    #&lt;Sizes:0x007fa66a86fdb8 @id=5, @name=\"M\"&gt;,\n  #    #&lt;Sizes:0x007fa66a8404f0 @id=6, @name=\"M/L\"&gt;] \n</code></pre>\n\n<p>The last operation involves the following two steps.</p>\n\n<pre><code>h = instances.each_with_object({}) { |inst, h| h.update(inst.name=&gt;inst) }\n  #=&gt; {\"M\" =&gt; #&lt;Sizes:0x007fa66a955ac0 @id=5, @name=\"M\"&gt;,\n  #    \"M/L\" =&gt; #&lt;Sizes:0x007fa66a955a70 @id=6, @name=\"M/L\"&gt;,\n  #    \"XS/S\" =&gt; #&lt;Sizes:0x007fa66a955a20 @id=7, @name=\"XS/S\"&gt;} \nh.values_at(*names)\n  #=&gt; h.values_at(*[\"XS/S\", \"M\", \"M/L\"])\n  #=&gt; h.values_at(\"XS/S\", \"M\", \"M/L\")\n  #=&gt; [#&lt;Sizes:0x007fa66a955a20 @id=7, @name=\"XS/S\"&gt;,\n  #    #&lt;Sizes:0x007fa66a955ac0 @id=5, @name=\"M\"&gt;,\n  #    #&lt;Sizes:0x007fa66a955a70 @id=6, @name=\"M/L\"&gt;] \n</code></pre>\n"}], "owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 38613120, "answer_count": 3, "score": 0, "last_activity_date": 1469643122, "creation_date": 1469621264, "last_edit_date": 1469621356, "question_id": 38612507, "link": "https://stackoverflow.com/questions/38612507/ruby-sort-array-of-objects-after-an-array-of-name-properties", "title": "Ruby: Sort array of objects after an array of name properties", "body": "<p>I have an array \"sizes\" that look like this:</p>\n\n<pre><code>[#&lt;OPTIONVALUE ID: 5, NAME: \"M\"&gt;,\n#&lt;OPTIONVALUE ID: 6, NAME: \"M/L\"&gt;, \n#&lt;OPTIONVALUE ID: 7, NAME: \"XS/S\"&gt;]\n</code></pre>\n\n<p>Consider the values of attribute NAME. The array is sorted: M, M/L, XS/S.</p>\n\n<p>But the sort order should look like this:</p>\n\n<pre><code>@sizes_sort_order = [\"XS\", \"XS/S\", \"S\", \"S/M\", \"M\", \"M/L\", \"L\", \"L/XL\", \"XL\"]\n</code></pre>\n\n<p>applied to the former array the order of the elements should look like this:</p>\n\n<pre><code>[#&lt;SPREE::OPTIONVALUE ID: 7, NAME: \"XS/S\"&gt;,\n#&lt;SPREE::OPTIONVALUE ID: 5, NAME: \"M\"&gt;,\n#&lt;SPREE::OPTIONVALUE ID: 6, NAME: \"M/L\"&gt;]\n\ndef sizes\n  @sizes ||= grouped_option_values_by_option_type[Spree::OptionType.find_by!(name: 'size')]\n  @sizes_sort_order = [\"XS\", \"XS/S\", \"S\", \"S/M\", \"M\", \"M/L\", \"L\", \"L/XL\", \"XL\"]\n  @sizes.map { # sort after @size_sort_order }\nend\n</code></pre>\n\n<p>How can i achieve to get the elements in the array sorted after @sizes_sort_order ?</p>\n"}, {"tags": ["ruby", "rubygems", "bundler", "org-mode"], "comments": [{"owner": {"reputation": 77, "user_id": 5264803, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9d7b7039cfd31d58395069ee5f51686?s=128&d=identicon&r=PG&f=1", "display_name": "elgoog", "link": "https://stackoverflow.com/users/5264803/elgoog"}, "reply_to_user": {"reputation": 646, "user_id": 1494770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f186c595fc9924b8adf8bfd6b595b1b9?s=128&d=identicon&r=PG", "display_name": "teksisto", "link": "https://stackoverflow.com/users/1494770/teksisto"}, "edited": false, "score": 0, "creation_date": 1469753997, "post_id": 38612482, "comment_id": 64680413, "body": "@teksisto Thank you for correcting my typo."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 5264803, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9d7b7039cfd31d58395069ee5f51686?s=128&d=identicon&r=PG&f=1", "display_name": "elgoog", "link": "https://stackoverflow.com/users/5264803/elgoog"}, "edited": false, "score": 0, "creation_date": 1469753940, "post_id": 38641034, "comment_id": 64680400, "body": "Thank you for complete and accurate answere! I could add \u201cREADME.org\u201d instead of \u201cREADME.md\u201d in my gem. However, unfortunately, yard doesn\u2019t support parsing emacs org-mode format.."}], "tags": [], "owner": {"reputation": 1265, "user_id": 2215912, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f014888a1bf93036790f22dcabf77b6b?s=128&d=identicon&r=PG", "display_name": "avellable", "link": "https://stackoverflow.com/users/2215912/avellable"}, "is_accepted": true, "score": 2, "last_activity_date": 1469720614, "creation_date": 1469720614, "answer_id": 38641034, "question_id": 38612482, "link": "https://stackoverflow.com/questions/38612482/how-to-use-readme-org-instead-of-readme-md-for-ruby-gem-package/38641034#38641034", "title": "How to use README.org instead of README.md for Ruby gem package", "body": "<p>My guess is, the problem lies in</p>\n\n<pre><code>spec.files         = `git ls-files -z`.split(\"\\x0\")\n</code></pre>\n\n<p>After you delete the README.md, committing the change to the git repo will get rid of the error.</p>\n\n<p>And about including README.org in your gem docs, you can achieve that by using \"extra_rdoc_files\",</p>\n\n<pre><code>spec.extra_rdoc_files = ['README.org']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 8972406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d92a46c356dc787867a30bc7175fd63b?s=128&d=identicon&r=PG&f=1", "display_name": "nom", "link": "https://stackoverflow.com/users/8972406/nom"}, "is_accepted": false, "score": 2, "last_activity_date": 1511195967, "creation_date": 1511195967, "answer_id": 47396881, "question_id": 38612482, "link": "https://stackoverflow.com/questions/38612482/how-to-use-readme-org-instead-of-readme-md-for-ruby-gem-package/47396881#47396881", "title": "How to use README.org instead of README.md for Ruby gem package", "body": "<p>Yard 0.9.10 now supports org-mode using org-ruby.\n<a href=\"https://github.com/lsegal/yard/pull/1133\" rel=\"nofollow noreferrer\">https://github.com/lsegal/yard/pull/1133</a></p>\n"}], "owner": {"reputation": 77, "user_id": 5264803, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9d7b7039cfd31d58395069ee5f51686?s=128&d=identicon&r=PG&f=1", "display_name": "elgoog", "link": "https://stackoverflow.com/users/5264803/elgoog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 38641034, "answer_count": 2, "score": 0, "last_activity_date": 1511195967, "creation_date": 1469621200, "last_edit_date": 1469658684, "question_id": 38612482, "link": "https://stackoverflow.com/questions/38612482/how-to-use-readme-org-instead-of-readme-md-for-ruby-gem-package", "title": "How to use README.org instead of README.md for Ruby gem package", "body": "<p>Now, I'm trying to create a Ruby gem.\nI use the gem template generated by <code>bundle gem a_pkg_name</code>.\nThen, \"README.md\" is created automatically and is used as the document of the gem by default.\nCan I use README.org (emacs org-mode document) instead of README.md (markdown document)?\nI know GitHub supports both \"README\" files and README.org is displayed if README.md doesn't exist. However, in the case of gem, <code>rake build</code> invokes an error if README.md doesn't exist.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 670, "user_id": 4610973, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SdxFi.jpg?s=128&g=1", "display_name": "CryptoPiggy", "link": "https://stackoverflow.com/users/4610973/cryptopiggy"}, "edited": false, "score": 0, "creation_date": 1469621439, "post_id": 38612416, "comment_id": 64611305, "body": "<a href=\"http://stackoverflow.com/a/1693319/4895133\">stackoverflow.com/a/1693319/4895133</a>"}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1469621475, "creation_date": 1469621475, "answer_id": 38612586, "question_id": 38612416, "link": "https://stackoverflow.com/questions/38612416/difference-between-foo-self-foo-and-foo/38612586#38612586", "title": "Difference between @foo, self.foo, and foo?", "body": "<blockquote>\n  <p>Why is self.songs used instead of @songs</p>\n</blockquote>\n\n<p>Using the method is more flexible. You're abstracting yourself from knowing how exactly it gets/stores data. The less you rely on implementation details, the easier it will be for you to change code later. </p>\n\n<p>One small example, consider this implementation of <code>songs</code></p>\n\n<pre><code>def songs\n  @songs ||= []\n  @songs\nend\n</code></pre>\n\n<p><code>@songs</code> may or may not have been assigned value prior to invocation of this method. But it doesn't care. It makes sure that <code>@songs</code> <strong>does</strong> have a sane default value. The concept is called \"lazy initialization\" and it's very tedious and error-prone to do if you use instance variables directly.</p>\n\n<p>So, when in doubt, always use methods.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1469623030, "post_id": 38612850, "comment_id": 64612516, "body": "All valid info, but none of it is directly answering the question."}], "tags": [], "owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "is_accepted": false, "score": 1, "last_activity_date": 1469622986, "last_edit_date": 1469622986, "creation_date": 1469622144, "answer_id": 38612850, "question_id": 38612416, "link": "https://stackoverflow.com/questions/38612416/difference-between-foo-self-foo-and-foo/38612850#38612850", "title": "Difference between @foo, self.foo, and foo?", "body": "<h1>Difference between <code>foo</code> and <code>@foo</code></h1>\n\n<h3>Instance variables</h3>\n\n<p>Instance variables are defined within instance methods, and their names begin with @. Their value is only accessible within the specific object on which it was set. In other words, when we modify the value of an instance variable, the change only applies to that particular instance. Unlike local variables which are only available within the method where they were defined, instance variables are accessible by all methods within the object (instance methods of the class). Instance variables are the most commonly used type of variable in Ruby classes.</p>\n\n<pre><code>class Car\n  attr_reader :color\n\n  def set_color(color_receiverd_as_argument)\n    @color = color_receiverd_as_argument\n  end\nend\n\ncar1 = Car.new\ncar1.color     # Output: =&gt; nil\ncar1.set_color \"black\"\ncar1.color     # Output: =&gt; \"black\"\n\ncar2 = Car.new\ncar2.set_color \"silver\"\ncar2.color    # Output: =&gt; \"silver\"\n</code></pre>\n\n<p>In the example above, notice that:</p>\n\n<ul>\n<li>Trying to access an instance variable before it's initialized will not raise an exception. Its default value is nil.</li>\n<li>Changing the value of the color variable in one instance of the Car class does not affect the value of the same variable in the other instances.</li>\n</ul>\n\n<h3>Local variables</h3>\n\n<p>A local variable within a class is like any other local variable in Ruby. It is only accessible within the exact scope on which it's created. If defined within a method, it is only available inside that method. </p>\n\n<pre><code>class Car\n  def initialize\n    wheels = 4\n  end\n\n  def print_wheels\n    print wheels\n  end\nend\n\nc = Car.new\nc.print_wheels        # Output: NameError: undefined local variable or method `wheels'\u2026\n</code></pre>\n\n<p><br></p>\n\n<h1>The self keyword</h1>\n\n<p>The self keyword is always available, and it points to the current object. In Ruby, all method calls consist of a message sent to a receiver. In other words, all methods are invoked on an object. The object on which the method is called is the receiver, and the method is the message. If we call \"foo\".upcase, the \"foo\" object is the receiver and upcase is the message. If we don't specify an object (a receiver) when calling a method, it is implicitly called on the self object.</p>\n\n<h3>Self keyword at class level</h3>\n\n<p>When used within a class but outside any instance methods, self refers to the class itself. </p>\n\n<pre><code>class Foo\n  @@self_at_class_level = self\n\n  def initialize\n    puts \"self at class level is #{@@self_at_class_level}\"\n  end\nend\n\nf = Foo.new     # Output: self at class level is Foo\n</code></pre>\n\n<h3>Self keyword at instance methods</h3>\n\n<p>When inside an instance method, the self keyword refers to that specific instance. In other words, it refers to the object where it was called.</p>\n\n<pre><code>class Meditation\n  def initialize\n    puts \"self within an instance method is #{self}\"\n  end\nend\n\nzazen = Meditation.new     # Output: self within an instance method is #&lt;Meditation:0x00000000ab2b38&gt;\n</code></pre>\n\n<p>Notice that <code>#&lt;Meditation:0x00000000ab2b38&gt;</code> is a string representation of the zazen object, which is an instance of the Meditation class.</p>\n"}], "owner": {"reputation": 43, "user_id": 6644434, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e3cde6937178543c8972644c9601c28a?s=128&d=identicon&r=PG&f=1", "display_name": "LeongZeno", "link": "https://stackoverflow.com/users/6644434/leongzeno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 38612586, "answer_count": 2, "score": 3, "last_activity_date": 1469622986, "creation_date": 1469621002, "last_edit_date": 1469622799, "question_id": 38612416, "link": "https://stackoverflow.com/questions/38612416/difference-between-foo-self-foo-and-foo", "title": "Difference between @foo, self.foo, and foo?", "body": "<pre><code>class Artist\n @@song_count = []\n attr_accessor :name, :songs\n\n def initialize(name)\n  @name = name\n  @songs = []\n end\n\n def add_song(song)\n  @songs &lt;&lt; song\n end\n\n def print_songs\n  songs.each {|song| puts song.name}\n end\nend\n</code></pre>\n\n<p>So in this example, it uses all two types, @songs and songs.</p>\n\n<p>I'm having a hard time understanding why these are used, instead of using @songs for everything. </p>\n\n<p>And then in this example,</p>\n\n<pre><code>def add_song(song)\n self.songs &lt;&lt; song\n song.artist = self\n @@song_count +=1\nend\n</code></pre>\n\n<p>Why is self.songs used instead of @songs?</p>\n\n<p>Ok, so I forgot to say one more thing. In the first code snippet above,for method print_songs, why am I able to use songs.each instead of @songs.each? I was expected it to generate an error undefined songs.</p>\n"}, {"tags": ["ruby", "rest-client"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469620810, "post_id": 38611847, "comment_id": 64610867, "body": "Your code is poorly formatted and is syntactically invalid."}], "answers": [{"tags": [], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "is_accepted": true, "score": 0, "last_activity_date": 1469622500, "last_edit_date": 1469622500, "creation_date": 1469620312, "answer_id": 38612178, "question_id": 38611847, "link": "https://stackoverflow.com/questions/38611847/pull-txt-file-information-into-restful-api-url-ruby/38612178#38612178", "title": "Pull .txt file information into RESTful API URL [Ruby]", "body": "<p>I'm not quite sure which line the thing is on so I'm going to try for both.</p>\n\n<p>For only one line files (with a guarantee it's only one line):</p>\n\n<pre><code>cr = File.read('cR.txt')\n</code></pre>\n\n<p>Which converts the entire content of the file into a string which is fine as there is only one line.</p>\n\n<p>For multiline files you might want to try:</p>\n\n<pre><code>cr =\nFile.open('cR.txt', 'r') do |f|\n  break unless f.each_line do |line|\n    break if line =~ /\\d*/ # regex for matching any numbers or whatever you want to use to match with like ==,&gt;,&lt;,&gt;=,&lt;=,!=\n  end\nend\n</code></pre>\n\n<p>Also, note that ruby implicitly returns from everything so unless you need to return explicitly from the middle of a method i.e. an if statement, you don't need to add return to everything.</p>\n\n<p>Also, if you do a <code>file.read</code>, make sure to <code>file.close</code> when you're done with it, otherwise it won't be cleaned up till the garbage-collector runs and that could waste system resources; which is the advantage of doing a open file with a block as it automatically closes the file when the block is done.</p>\n"}], "owner": {"reputation": 29, "user_id": 6644408, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157284207370565/picture?type=large", "display_name": "Ian Pie Goddard", "link": "https://stackoverflow.com/users/6644408/ian-pie-goddard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 38612178, "answer_count": 1, "score": -1, "last_activity_date": 1469622500, "creation_date": 1469619365, "last_edit_date": 1469622436, "question_id": 38611847, "link": "https://stackoverflow.com/questions/38611847/pull-txt-file-information-into-restful-api-url-ruby", "title": "Pull .txt file information into RESTful API URL [Ruby]", "body": "<p>So I am fairly new to Ruby and this may very well be answered elsewhere but I have searched high and low with nothing to show.</p>\n\n<p>I am defining a module for a RESTful API framework and mostly things have gone well apart from trying to get a string from a .txt file into the actual API end point (before parameters)</p>\n\n<p>MY code is this:</p>\n\n<pre><code>require 'rest-client'\n\nmodule Delete\n\n  def delete\n\n    file = File.open(\"ST.txt\", \"r\")\n    sT = file.read,\n\n    file = File.open(\"cR.txt\",\"r\")\n    cR = file.read\n    begin\n\n      return RestClient.post({'https://testing.ixaris.com/paymentpartner/virtualcards/{cR}/delete'}, \n            { },\n            {:A =&gt; sT,})\n    rescue =&gt; e\n      return e.response\n    end\n\n  end\nend\n</code></pre>\n\n<p>The the first \"ST.txt\" into the \"A parameter\" works fine but I can't seem to get the \"cR\" string into the \"{cR}\" part of the end point.</p>\n\n<p>Any help would be hugely appreciated!</p>\n"}, {"tags": ["ruby", "algorithm", "performance", "queue"], "answers": [{"comments": [{"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 1, "creation_date": 1551848092, "post_id": 38615529, "comment_id": 96785606, "body": "Actually it\u2019s worth mentioning that <code>Array#shift</code> is amortized constant complexity, while <code>Array#unshift</code> is not. So it\u2019s better to use <code>#push</code> and <code>#shift</code> (like mentioned in question) than <code>#unshift</code> and <code>#pop</code>."}], "tags": [], "owner": {"reputation": 421, "user_id": 3537832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bbcb73931f9ecc8def414e457a94da?s=128&d=identicon&r=PG&f=1", "display_name": "jktin12", "link": "https://stackoverflow.com/users/3537832/jktin12"}, "is_accepted": true, "score": 5, "last_activity_date": 1469628944, "creation_date": 1469628944, "answer_id": 38615529, "question_id": 38611771, "link": "https://stackoverflow.com/questions/38611771/difference-between-using-the-queue-class-in-ruby-versus-using-an-array-to-implem/38615529#38615529", "title": "Difference between using the Queue class in ruby versus using an array to implement a queue", "body": "<p>The <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/Queue.html\" rel=\"noreferrer\">Queue</a> class is used to synchronize communication between threads.  You would use this if you were doing something with concurrency.</p>\n\n<p>For your purposes, you should use an Array.</p>\n"}, {"comments": [{"owner": {"reputation": 184, "user_id": 914375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e6498d777bb9930c15ac9174b5cb34b?s=128&d=identicon&r=PG", "display_name": "Nate914375", "link": "https://stackoverflow.com/users/914375/nate914375"}, "edited": false, "score": 0, "creation_date": 1613167768, "post_id": 38618287, "comment_id": 117002616, "body": "You can&#39;t use ruby arrays push and pop methods for a queue, they will make a stack since push pushes on the same side as pop (the end). You can just use an array, but you need to use unshift and pop, (or shift and push)"}], "tags": [], "owner": {"reputation": 17716, "user_id": 6722, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2b31f1c54790d6cba8a63a3653a26c49?s=128&d=identicon&r=PG", "display_name": "Steve Cooper", "link": "https://stackoverflow.com/users/6722/steve-cooper"}, "is_accepted": false, "score": 0, "last_activity_date": 1469636107, "creation_date": 1469636107, "answer_id": 38618287, "question_id": 38611771, "link": "https://stackoverflow.com/questions/38611771/difference-between-using-the-queue-class-in-ruby-versus-using-an-array-to-implem/38618287#38618287", "title": "Difference between using the Queue class in ruby versus using an array to implement a queue", "body": "<p>A ruby array implements the two methods you need -- push and pop -- but I'm not sure it cleans up it's internal array so might not be great if you've pushed a lot of data, then popped. </p>\n\n<p>A better way might be to implement yourself and manage a linked list. <a href=\"https://gist.github.com/ggilder/3224402\" rel=\"nofollow\">here</a> is an example of a linked-list based stack, which might be easy to modify. </p>\n\n<p>Uncertain of license so I'm not posting someone else's code.</p>\n"}], "owner": {"reputation": 4377, "user_id": 1154018, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b815b5d6f9f344aad0c020e6782fb919?s=128&d=identicon&r=PG", "display_name": "jimcgh", "link": "https://stackoverflow.com/users/1154018/jimcgh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 38615529, "answer_count": 2, "score": 2, "last_activity_date": 1469636107, "creation_date": 1469619144, "question_id": 38611771, "link": "https://stackoverflow.com/questions/38611771/difference-between-using-the-queue-class-in-ruby-versus-using-an-array-to-implem", "title": "Difference between using the Queue class in ruby versus using an array to implement a queue", "body": "<p>In ruby if i want to implement a queue, then either i can use the Queue class of the standard library or i can use an array with methods push and shift to enqueue and dequeue an item respectively in the queue.\nIs there any performance difference in the two approaches for implementing a queue in ruby or are they the same ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "devise", "actionmailer"], "comments": [{"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 1, "creation_date": 1469619393, "post_id": 38611642, "comment_id": 64609872, "body": "Try changing this feature on on your google account(not sure if it will help): <a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"nofollow noreferrer\">google.com/settings/security/lesssecureapps</a>"}, {"owner": {"reputation": 41, "user_id": 6153252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae757cd455ce0ad298dfc2622fef3f11?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Watkins", "link": "https://stackoverflow.com/users/6153252/richard-watkins"}, "reply_to_user": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1469619471, "post_id": 38611642, "comment_id": 64609930, "body": "I&#39;ve finally got it working, it was to do with google 2 step verification. Make sure it&#39;s turned OFF!"}], "answers": [{"tags": [], "owner": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "is_accepted": false, "score": 3, "last_activity_date": 1469627361, "creation_date": 1469627361, "answer_id": 38614861, "question_id": 38611642, "link": "https://stackoverflow.com/questions/38611642/action-mailer-not-sending-receiving-email-rails-5/38614861#38614861", "title": "Action mailer not sending/receiving email rails 5", "body": "<p>In your configured  Gmail account:</p>\n\n<ol>\n<li><p>Go to  <kbd>Account Settings</kbd> Than</p></li>\n<li><p>Go to <kbd>Sign-in &amp; security</kbd>, followed by <kbd>Connected apps &amp; sites</kbd></p></li>\n<li><p>At last in <kbd>Allow less secure apps</kbd> ... Check it.</p></li>\n</ol>\n\n<p>Check Once And Try</p>\n"}, {"comments": [{"owner": {"reputation": 4535, "user_id": 3478852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzDyD.jpg?s=128&g=1", "display_name": "Nisse Engstr&#246;m", "link": "https://stackoverflow.com/users/3478852/nisse-engstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1480947279, "post_id": 40966354, "comment_id": 69161666, "body": "I&#39;ve wrapped the code above in blockquotes since you seem to be referring to code in the question. If this is incorrect, you can unroll the changes from the <a href=\"http://stackoverflow.com/posts/40966354/revisions\">revision history</a> or <a href=\"https://stackoverflow.com/posts/40966354/edit\">edit</a> the post to make further improvements. I have no idea what the last sentence means, though."}], "tags": [], "owner": {"reputation": 11, "user_id": 6861158, "user_type": "registered", "profile_image": "https://graph.facebook.com/1550808614944575/picture?type=large", "display_name": "Anh Bui", "link": "https://stackoverflow.com/users/6861158/anh-bui"}, "is_accepted": false, "score": 0, "last_activity_date": 1480947049, "last_edit_date": 1480947049, "creation_date": 1480905705, "answer_id": 40966354, "question_id": 38611642, "link": "https://stackoverflow.com/questions/38611642/action-mailer-not-sending-receiving-email-rails-5/40966354#40966354", "title": "Action mailer not sending/receiving email rails 5", "body": "<blockquote>\n<pre><code>config.action_mailer.raise_delivery_errors = true\nconfig.action_mailer.perform_deliveries = true\n...\nconfig.action_mailer.delivery_method = :smtp\n</code></pre>\n</blockquote>\n\n<p>I don't config any of the above and it still works.</p>\n\n<blockquote>\n<pre><code>config.action_mailer.default_url_options = { host: 'localhost:3000' }\n</code></pre>\n</blockquote>\n\n<p>and have to <code>.deliver_later</code> or <code>.deliver_now</code>, <code>.deliver</code> not work</p>\n"}], "owner": {"reputation": 41, "user_id": 6153252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae757cd455ce0ad298dfc2622fef3f11?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Watkins", "link": "https://stackoverflow.com/users/6153252/richard-watkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3931, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1500307832, "creation_date": 1469618757, "question_id": 38611642, "link": "https://stackoverflow.com/questions/38611642/action-mailer-not-sending-receiving-email-rails-5", "title": "Action mailer not sending/receiving email rails 5", "body": "<p>I'm trying to create a simple blog (using rails 5) and want to send email updates when to users when I post something new. I'm trying to use actionmailer and I'm using devise to register users. I'm trying to set it up with just the first user initially. </p>\n\n<p>When I look at my local server the email appears to be sending but it's not received. Any advice would be very welcome I've been stuck a while.</p>\n\n<pre><code>    UserNotifierMailer#sample_email: processed outbound mail in 410.4ms\nSent mail to myemail@gmail.com (853.2ms)\nDate: Wed, 27 Jul 2016 12:05:33 +0100\nFrom: from@example.com\nTo:myemail@gmail.com\nMessage-ID: &lt;5798957d9de31_ae813ff962abfe1466438@Unknown-7c-d1-c3-78-04-d2.home.mail&gt;\nSubject: Sample Email\nMime-Version: 1.0\nContent-Type: multipart/alternative;\n boundary=\"--==_mimepart_5798957d951e2_ae813ff962abfe1466312\";\n charset=UTF-8\nContent-Transfer-Encoding: 7bit\n</code></pre>\n\n<p>My posts controller looks like this:</p>\n\n<pre><code>def create\n    @user = User.first\n    @post = current_user.posts.build(post_params)\n    if @post.save\n      flash[:success] = \"Your post has been created!\"\n      UserNotifierMailer.sample_email(@user).deliver\n      redirect_to posts_path\n    else\n      flash[:alert] = \"Your new post couldn't be created!  Please check the form.\"\n      render :new\n    end\n  end\n</code></pre>\n\n<p>My mailer looks like this:</p>\n\n<pre><code>class UserNotifierMailer &lt; ApplicationMailer\n  default from: \"from@example.com\"\n  def sample_email(user)\n    @user = user\n    @url = 'http://www.google.com'\n    mail(to: @user.email, subject: 'Sample Email')\n  end\nend\n</code></pre>\n\n<p>and in my development.rb I have these settings:</p>\n\n<pre><code>config.action_mailer.raise_delivery_errors = true\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n\n  config.action_mailer.delivery_method = :smtp\n\n  config.action_mailer.smtp_settings = {\n    address: \"smtp.gmail.com\",\n    port: 587,\n    domain: \"gmail.com\",\n    authentication: \"plain\",\n    enable_starttls_auto: true,\n    user_name: \"my_gmail_username\",\n    password: \"my_gmail_password\"\n  }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "email"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1469618237, "post_id": 38611405, "comment_id": 64609067, "body": "Those are valid emails"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1469620670, "post_id": 38611405, "comment_id": 64610774, "body": "@FrederickCheung: apparently, they aren&#39;t: <a href=\"http://isemail.info/..abc%40gmail.com\" rel=\"nofollow noreferrer\">isemail.info/..abc%40gmail.com</a>"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469620800, "post_id": 38611405, "comment_id": 64610862, "body": "@SergioTulentsev cool didn&#39;t know about that site. I can receive email sent to such an address, so some implementations would appear to ignore that restriction."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1469620984, "post_id": 38611405, "comment_id": 64610982, "body": "@FrederickCheung: checked with gmail, doesn&#39;t work. :)"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469621058, "post_id": 38611405, "comment_id": 64611028, "body": "@SergioTulentsev I tested with gmail too - can hardly complain when non spec behaviour is inconsistent though."}, {"owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "edited": false, "score": 0, "creation_date": 1469623618, "post_id": 38611405, "comment_id": 64612957, "body": "In most cases it&#39;s better to let some invalid addresses through than to block valid ones. Point being, don&#39;t make it overly strict unless you have a very good reason."}, {"owner": {"reputation": 2842, "user_id": 249760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10c38ce1b71961f266d85d22beb8db49?s=128&d=identicon&r=PG", "display_name": "Martin T.", "link": "https://stackoverflow.com/users/249760/martin-t"}, "edited": false, "score": 0, "creation_date": 1522137808, "post_id": 38611405, "comment_id": 86018929, "body": "<a href=\"https://www.youtube.com/watch?v=xxX81WmXjPg\" rel=\"nofollow noreferrer\">youtube.com/watch?v=xxX81WmXjPg</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2756, "user_id": 1704453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rehw8.jpg?s=128&g=1", "display_name": "vipin cp", "link": "https://stackoverflow.com/users/1704453/vipin-cp"}, "is_accepted": false, "score": 1, "last_activity_date": 1469618222, "creation_date": 1469618222, "answer_id": 38611459, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/38611459#38611459", "title": "Email validation in Ruby on Rails?", "body": "<p>You can try this</p>\n\n<pre><code>VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z]+)*\\.[a-z]+\\z/i\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 164, "user_id": 2539170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63f9a96cf0a733161dc376d619731fcf?s=128&d=identicon&r=PG", "display_name": "ramijames", "link": "https://stackoverflow.com/users/2539170/ramijames"}, "edited": false, "score": 0, "creation_date": 1469628354, "post_id": 38611525, "comment_id": 64616670, "body": "That&#39;s a nice, simple gem. Thanks for pointing that one out. I&#39;d much rather use this than inline regex."}, {"owner": {"reputation": 2774, "user_id": 3668967, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/tcSwe.png?s=128&g=1", "display_name": "Karol Selak", "link": "https://stackoverflow.com/users/3668967/karol-selak"}, "edited": false, "score": 1, "creation_date": 1499164526, "post_id": 38611525, "comment_id": 76784137, "body": "How could I use this library as simple function returning boolean value? Docs shows only usage with error message, but I&#39;d like to avoid throwing error."}, {"owner": {"reputation": 1617, "user_id": 6174577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9f31e03bb70b0cebb89f1e0b81efd485?s=128&d=identicon&r=PG&f=1", "display_name": "Ka Mok", "link": "https://stackoverflow.com/users/6174577/ka-mok"}, "edited": false, "score": 1, "creation_date": 1517501509, "post_id": 38611525, "comment_id": 84130329, "body": "It&#39;s not maintained, and there&#39;s several false positive issues not being addressed at all. Use wisely."}, {"owner": {"reputation": 5614, "user_id": 461974, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/8e79f0a4068783e7660427529d0106a3?s=128&d=identicon&r=PG", "display_name": "John Hinnegan", "link": "https://stackoverflow.com/users/461974/john-hinnegan"}, "edited": false, "score": 0, "creation_date": 1553445965, "post_id": 38611525, "comment_id": 97378249, "body": "I glanced quickly at this gem. Other than maintenance concerns, it&#39;s doing a DNS resolutions step. Personally, I do not like the idea of having a network dependency from a validator on a model."}], "tags": [], "owner": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "is_accepted": false, "score": 5, "last_activity_date": 1469618420, "creation_date": 1469618420, "answer_id": 38611525, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/38611525#38611525", "title": "Email validation in Ruby on Rails?", "body": "<p>Try <a href=\"https://github.com/validates-email-format-of/validates_email_format_of\" rel=\"noreferrer\">validates_email_format_of</a> gem.</p>\n"}, {"tags": [], "owner": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "is_accepted": false, "score": 2, "last_activity_date": 1469620372, "creation_date": 1469620372, "answer_id": 38612200, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/38612200#38612200", "title": "Email validation in Ruby on Rails?", "body": "<p>try this. </p>\n\n<pre><code>validates_format_of  :email, :with =&gt; /^[\\+A-Z0-9\\._%-]+@([A-Z0-9-]+\\.)+[A-Z]{2,4}$/i\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 563, "user_id": 1786443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f03f5ca2c129b638f5b2c285a35f2a8?s=128&d=identicon&r=PG", "display_name": "Bj&#246;rn Weinbrenner", "link": "https://stackoverflow.com/users/1786443/bj%c3%b6rn-weinbrenner"}, "edited": false, "score": 4, "creation_date": 1506087744, "post_id": 43250746, "comment_id": 79691951, "body": "The Device regex is quite simple: /\\A[^@\\s]+@[^@\\s]+\\z/ The following email addresses are not detected as invalid: info@example,com, info@example, info,foo@example.com"}, {"owner": {"reputation": 563, "user_id": 1786443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f03f5ca2c129b638f5b2c285a35f2a8?s=128&d=identicon&r=PG", "display_name": "Bj&#246;rn Weinbrenner", "link": "https://stackoverflow.com/users/1786443/bj%c3%b6rn-weinbrenner"}, "edited": false, "score": 0, "creation_date": 1506088954, "post_id": 43250746, "comment_id": 79692767, "body": "I use validates_format_of :email, :with =&gt; /\\A[^@,\\s]+@[^@,\\s]+\\.[^@,\\s]+\\z/ in my model now. The Regex is the one from Devise, but modified to deny the examples above."}, {"owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "edited": false, "score": 2, "creation_date": 1516377179, "post_id": 43250746, "comment_id": 83675315, "body": "Yes this looks cool to me. <code>validates :email, format: { with: Devise.email_regexp, message: &quot;invalid email&quot; }</code>"}, {"owner": {"reputation": 1693, "user_id": 1623261, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/01c84ad64ab8a9dfdb446119c0204a4f?s=128&d=identicon&r=PG", "display_name": "A H K", "link": "https://stackoverflow.com/users/1623261/a-h-k"}, "edited": false, "score": 1, "creation_date": 1532430091, "post_id": 43250746, "comment_id": 89961665, "body": "This will not check if the email is valid, it will just check if your string contains <code>@</code> char and there is no whitespace. <code># Email regex used to validate email formats. It asserts that there are no   # @ symbols or whitespaces in either the localpart or the domain, and that   # there is a single @ symbol separating the localpart and the domain.   mattr_accessor :email_regexp   @@email_regexp = &#47;\\A[^@\\s]+@[^@\\s]+\\z&#47;</code>"}, {"owner": {"reputation": 17465, "user_id": 559850, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/vJfye.jpg?s=128&g=1", "display_name": "styler1972", "link": "https://stackoverflow.com/users/559850/styler1972"}, "edited": false, "score": 2, "creation_date": 1537034635, "post_id": 43250746, "comment_id": 91640308, "body": "if you&#39;re using devise already, your user model should already be doing this"}, {"owner": {"reputation": 2842, "user_id": 249760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10c38ce1b71961f266d85d22beb8db49?s=128&d=identicon&r=PG", "display_name": "Martin T.", "link": "https://stackoverflow.com/users/249760/martin-t"}, "reply_to_user": {"reputation": 1693, "user_id": 1623261, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/01c84ad64ab8a9dfdb446119c0204a4f?s=128&d=identicon&r=PG", "display_name": "A H K", "link": "https://stackoverflow.com/users/1623261/a-h-k"}, "edited": false, "score": 0, "creation_date": 1588779018, "post_id": 43250746, "comment_id": 109031766, "body": "@AHK AFAIK, it&#39;s really hard to &quot;properly&quot; validate email addresses with a Regexp. So usually people either just do a light sanity check like Devise, or use a service and actually send an email to check, depending on requirements. See also this: <a href=\"https://www.youtube.com/watch?v=xxX81WmXjPg\" rel=\"nofollow noreferrer\">youtube.com/watch?v=xxX81WmXjPg</a>"}], "tags": [], "owner": {"reputation": 2842, "user_id": 249760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10c38ce1b71961f266d85d22beb8db49?s=128&d=identicon&r=PG", "display_name": "Martin T.", "link": "https://stackoverflow.com/users/249760/martin-t"}, "is_accepted": false, "score": 17, "last_activity_date": 1491469971, "creation_date": 1491469971, "answer_id": 43250746, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/43250746#43250746", "title": "Email validation in Ruby on Rails?", "body": "<p>If you use the Devise gem already in your app, it might be opportune to use</p>\n\n<pre><code>email =~ Devise.email_regexp\n</code></pre>\n\n<p>...which also means different places of the app use the same validation.</p>\n"}, {"comments": [{"owner": {"reputation": 456, "user_id": 1591260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2b7fefdbb65880c6d7a156cf2731afa?s=128&d=identicon&r=PG&f=1", "display_name": "Iwo Dziechciarow", "link": "https://stackoverflow.com/users/1591260/iwo-dziechciarow"}, "edited": false, "score": 1, "creation_date": 1503967266, "post_id": 43874851, "comment_id": 78816865, "body": "interesting approach - though this will also accept values like <code>&#39;Mikel Lindsaar (My email address) &lt;mikel@test.lindsaar.net&gt;&#39;</code> with the display_name and comments - which probably isn&#39;t what you always want, but you can probably get the parsed address alone (<code>a.address</code>) and overwrite the attribute with that value"}, {"owner": {"reputation": 563, "user_id": 1786443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f03f5ca2c129b638f5b2c285a35f2a8?s=128&d=identicon&r=PG", "display_name": "Bj&#246;rn Weinbrenner", "link": "https://stackoverflow.com/users/1786443/bj%c3%b6rn-weinbrenner"}, "edited": false, "score": 0, "creation_date": 1506088096, "post_id": 43874851, "comment_id": 79692202, "body": "It doesn&#39;t detect the following as invalid: info@example,com, info@example, info,foo@example.com"}, {"owner": {"reputation": 3973, "user_id": 12779, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/55c439c4d52dcb2cc975fc047560f006?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/12779/nate"}, "edited": false, "score": 1, "creation_date": 1506179248, "post_id": 43874851, "comment_id": 79720253, "body": "I&#39;m pretty sure those are all RFC2822-compliant addresses. I&#39;ve edited my answer to clarify."}, {"owner": {"reputation": 1617, "user_id": 6174577, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9f31e03bb70b0cebb89f1e0b81efd485?s=128&d=identicon&r=PG&f=1", "display_name": "Ka Mok", "link": "https://stackoverflow.com/users/6174577/ka-mok"}, "edited": false, "score": 1, "creation_date": 1517503024, "post_id": 43874851, "comment_id": 84131365, "body": "I&#39;m unable to get any errors using <code>Mail::Address.new(&#39;fake&#39;)</code>. Don&#39;t tell me the email address <code>fake</code> is RFC compliant."}, {"owner": {"reputation": 3973, "user_id": 12779, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/55c439c4d52dcb2cc975fc047560f006?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/12779/nate"}, "edited": false, "score": 1, "creation_date": 1517519529, "post_id": 43874851, "comment_id": 84140325, "body": "I think it is, it would be to the user &#39;fake&#39; on the local system. You probably want to make sure <code>domain</code> is something you like reasonably well."}], "tags": [], "owner": {"reputation": 3973, "user_id": 12779, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/55c439c4d52dcb2cc975fc047560f006?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/12779/nate"}, "is_accepted": false, "score": 25, "last_activity_date": 1530381566, "last_edit_date": 1530381566, "creation_date": 1494346147, "answer_id": 43874851, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/43874851#43874851", "title": "Email validation in Ruby on Rails?", "body": "<h3>Update: I just found the <a href=\"https://github.com/lisinge/valid_email2\" rel=\"noreferrer\">valid_email2</a> gem which looks pretty great.</h3>\n\n<p>Don't use a regular expression for email address validation. It's a trap. There are way more valid email address formats than you'll think of. However! The <code>mail</code> gem (it's required by ActionMailer, so you have it) will parse email addresses \u2014 with a proper parser \u2014 for you:</p>\n\n<pre><code>require 'mail'\na = Mail::Address.new('foo@example.com')\n</code></pre>\n\n<p>This will throw a <code>Mail::Field::ParseError</code> if it's a non-compliant email address. (We're not getting into things like doing an MX address lookup or anything.)</p>\n\n<p>If you want the good ol' Rails validator experience, you can make <code>app/models/concerns/email_validatable.rb</code>:</p>\n\n<pre><code>require 'mail'\n\nmodule EmailValidatable\n  extend ActiveSupport::Concern\n\n  class EmailValidator &lt; ActiveModel::EachValidator\n    def validate_each(record, attribute, value)\n      begin\n        a = Mail::Address.new(value)\n      rescue Mail::Field::ParseError\n        record.errors[attribute] &lt;&lt; (options[:message] || \"is not an email\")\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>and then in your model, you can:</p>\n\n<pre><code>include EmailValidatable\nvalidates :email, email: true\n</code></pre>\n\n<p>As Iwo Dziechciarow's comment below mentions, this passes anything that's a valid \"To:\" address through. So something like <code>Foo Bar &lt;foo.bar@example.com&gt;</code> is valid. This might be a problem for you, it might not; it really <em>is</em> a valid address, after all.</p>\n\n<p>If you do want just the address portion of it:</p>\n\n<pre><code>a = Mail::Address.new('Foo Bar &lt;foobar@example.com&gt;')\na.address\n=&gt; \"foobar@example.com\"\n</code></pre>\n\n<p>As Bj\u00f6rn Weinbrenne notes below, there are way more valid <a href=\"https://tools.ietf.org/html/rfc2822#section-3.4\" rel=\"noreferrer\">RFC2822 addresses</a> than you may expect (I'm quite sure all of the addresses listed there are compliant, and may receive mail depending system configurations) \u2014 this is why I don't recommend trying a regex, but using a compliant parser.</p>\n\n<p>If you really care whether you can send email to an address then <strong>your best bet \u2014 by far \u2014 is to actually send a message with a verification link.</strong></p>\n"}, {"comments": [{"owner": {"reputation": 3973, "user_id": 12779, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/55c439c4d52dcb2cc975fc047560f006?s=128&d=identicon&r=PG", "display_name": "Nate", "link": "https://stackoverflow.com/users/12779/nate"}, "edited": false, "score": 0, "creation_date": 1517581568, "post_id": 44076274, "comment_id": 84166068, "body": "<code>Mail::Address.new(&#39;abc&#39;)</code> is for mail to the local network. Check the <a href=\"https://github.com/lisinge/valid_email2\" rel=\"nofollow noreferrer\">valid_email2</a> gem. Really, send a test email."}], "tags": [], "owner": {"reputation": 1007, "user_id": 361692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b665e30662d48a0da4cd78569b396df?s=128&d=identicon&r=PG", "display_name": "tongueroo", "link": "https://stackoverflow.com/users/361692/tongueroo"}, "is_accepted": false, "score": 7, "last_activity_date": 1495218296, "last_edit_date": 1495218296, "creation_date": 1495216682, "answer_id": 44076274, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/44076274#44076274", "title": "Email validation in Ruby on Rails?", "body": "<p>@Nate Thank you so much for putting this answer together.  I did not realize email validation had so many nuances until I looked at your code snippet. </p>\n\n<p>I noticed that the current mail gem: mail-2.6.5 doesn't throw an error for an email of \"abc\".  Examples:</p>\n\n<pre><code>&gt;&gt; a = Mail::Address.new('abc')\n=&gt; #&lt;Mail::Address:70343701196060 Address: |abc| &gt;\n&gt;&gt; a.address # this is weird\n=&gt; \"abc\"\n&gt;&gt; a = Mail::Address.new('\"Jon Doe\" &lt;jon@doe.com&gt;')\n=&gt; #&lt;Mail::Address:70343691638900 Address: |Jon Doe &lt;jon@doe.com&gt;| &gt;\n&gt;&gt; a.address\n=&gt; \"jon@doe.com\"\n&gt;&gt; a.display_name\n=&gt; \"Jon Doe\"\n&gt;&gt; Mail::Address.new('\"Jon Doe &lt;jon')\nMail::Field::ParseError: Mail::AddressList can not parse |\"Jon Doe &lt;jon|\nReason was: Only able to parse up to \"Jon Doe &lt;jon\n  from (irb):3:in `new'\n  from (irb):3\n&gt;&gt;\n</code></pre>\n\n<p>It does throw <code>Mail::Field::ParseError</code> errors for <code>\"Jon Doe &lt;jon</code> which is great.  I believe will check for the simple \"abc pattern\" also.</p>\n\n<p>In <code>app/models/concerns/pretty_email_validatable.rb</code>:</p>\n\n<pre><code>require 'mail'\n\nmodule PrettyEmailValidatable\n  extend ActiveSupport::Concern\n\n  class PrettyEmailValidator &lt; ActiveModel::EachValidator\n\n    def validate_each(record, attribute, value)\n      begin\n        a = Mail::Address.new(value)\n      rescue Mail::Field::ParseError\n        record.errors[attribute] &lt;&lt; (options[:message] || \"is not an email\")\n      end\n\n      # regexp from http://guides.rubyonrails.org/active_record_validations.html\n      value = a.address\n      unless value =~ /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\z/i\n        record.errors[attribute] &lt;&lt; (options[:message] || \"is not an email\")\n      end\n    end\n\n  end\nend\n</code></pre>\n\n<p>and then in your model, you can:</p>\n\n<pre><code>include PrettyEmailValidatable\nvalidates :pretty_email, email: true\n</code></pre>\n\n<p>So I use the above for \"pretty email\" validation and the <a href=\"https://github.com/balexand/email_validator\" rel=\"noreferrer\">https://github.com/balexand/email_validator</a> for standard email validation.</p>\n"}, {"comments": [{"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1513225042, "post_id": 46085244, "comment_id": 82572997, "body": "Care to show how this would be called in the User model?"}, {"owner": {"reputation": 121, "user_id": 5072076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/igLpe.png?s=128&g=1", "display_name": "Jack Barry", "link": "https://stackoverflow.com/users/5072076/jack-barry"}, "reply_to_user": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "edited": false, "score": 0, "creation_date": 1514669686, "post_id": 46085244, "comment_id": 83046407, "body": "It&#39;s been a while since I looked at this, but I believe it should just be <code>validates :email, email: true</code>"}], "tags": [], "owner": {"reputation": 121, "user_id": 5072076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/igLpe.png?s=128&g=1", "display_name": "Jack Barry", "link": "https://stackoverflow.com/users/5072076/jack-barry"}, "is_accepted": false, "score": 6, "last_activity_date": 1504737157, "creation_date": 1504737157, "answer_id": 46085244, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/46085244#46085244", "title": "Email validation in Ruby on Rails?", "body": "<p>If anybody else is very TDD focused: I wanted something that I could write tests against and improve upon later if needed, without tying the tests to another model.</p>\n\n<p>Building off of <a href=\"https://stackoverflow.com/users/12779/nate\">Nate</a> and <a href=\"https://stackoverflow.com/users/361692/tongueroo\">tongueroo</a>'s code (Thanks <a href=\"https://stackoverflow.com/users/12779/nate\">Nate</a> and <a href=\"https://stackoverflow.com/users/361692/tongueroo\">tongueroo</a>!), this was done in <code>Rails 5</code>, <code>Ruby 2.4.1</code>. Here's what I threw into <code>app/validators/email_validator.rb</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'mail'\n\nclass EmailValidator &lt; ActiveModel::EachValidator\n  def add_error(record, attribute)\n    record.errors.add(attribute, (options[:message] || \"is not a valid email address\"))\n  end\n\n  def validate_each(record, attribute, value)\n    begin\n      a = Mail::Address.new(value)\n    rescue Mail::Field::ParseError\n      add_error(record, attribute)\n    end\n\n    # regexp from http://guides.rubyonrails.org/active_record_validations.html\n    value = a.address unless a.nil?\n    unless value =~ /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\z/i\n      add_error(record, attribute)\n    end\n  end\nend\n</code></pre>\n\n<p>And this is by no means comprehensive, but here's what I threw into <code>spec/validators/email_validator_spec.rb</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'rails_helper'\n\nRSpec.describe EmailValidator do\n  subject do\n    Class.new do\n      include ActiveModel::Validations\n      attr_accessor :email\n      validates :email, email: true\n    end.new\n  end\n\n  context 'when the email address is valid' do\n    let(:email) { Faker::Internet.email }\n\n    it 'allows the input' do\n      subject.email = email\n      expect(subject).to be_valid\n    end\n  end\n\n  context 'when the email address is invalid' do\n    let(:invalid_message) { 'is not a valid email address' }\n\n    it 'invalidates the input' do\n      subject.email = 'not_valid@'\n      expect(subject).not_to be_valid\n    end\n\n    it 'alerts the consumer' do\n      subject.email = 'notvalid'\n      subject.valid?\n      expect(subject.errors[:email]).to include(invalid_message)\n    end\n  end\nend\n</code></pre>\n\n<p>Hope it helps!</p>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1512094004, "post_id": 46697720, "comment_id": 82128886, "body": "Always is good idea to scroll to bottom. Only one point against is it accepts <code>foo,bar@hooli.com</code>. Not a problem for my situation."}], "tags": [], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "is_accepted": false, "score": 7, "last_activity_date": 1507756686, "creation_date": 1507756686, "answer_id": 46697720, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/46697720#46697720", "title": "Email validation in Ruby on Rails?", "body": "<p>Here is the new rails way to do email validation:</p>\n\n<pre><code>validates :email, format: { with: /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\z/i, on: :create }\n</code></pre>\n\n<p>Refer to the <a href=\"http://api.rubyonrails.org/v5.1/classes/ActiveModel/Validations/ClassMethods.html#method-i-validates\" rel=\"noreferrer\">Rails valications doc</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 1, "creation_date": 1529000421, "post_id": 49507475, "comment_id": 88729721, "body": "while this works for sign up it would be too complex for simple data collection, e.g. website contact forms"}], "tags": [], "owner": {"reputation": 2842, "user_id": 249760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10c38ce1b71961f266d85d22beb8db49?s=128&d=identicon&r=PG", "display_name": "Martin T.", "link": "https://stackoverflow.com/users/249760/martin-t"}, "is_accepted": false, "score": 3, "last_activity_date": 1522137894, "creation_date": 1522137894, "answer_id": 49507475, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/49507475#49507475", "title": "Email validation in Ruby on Rails?", "body": "<p>The simple answer is: Don't use a regexp. There are too many edge cases and false negatives and false positives. Check for an @ sign and send a mail to the address to validate it:</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=xxX81WmXjPg\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=xxX81WmXjPg</a></p>\n"}, {"comments": [{"owner": {"reputation": 6273, "user_id": 2392106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/iXOIu.jpg?s=128&g=1", "display_name": "medBouzid", "link": "https://stackoverflow.com/users/2392106/medbouzid"}, "edited": false, "score": 10, "creation_date": 1534283774, "post_id": 49925333, "comment_id": 90653779, "body": "Attention! I tried this using a wrong email  <code>!(&#39;fakeemail@gmailcom&#39; =~ URI::MailTo::EMAIL_REGEXP).nil?</code> it should returns false but it returns true which is not correct"}, {"owner": {"reputation": 182, "user_id": 1920508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43740b9270a206c2d0a9061b4c906be3?s=128&d=identicon&r=PG", "display_name": "Traveler", "link": "https://stackoverflow.com/users/1920508/traveler"}, "edited": false, "score": 18, "creation_date": 1534304136, "post_id": 49925333, "comment_id": 90657770, "body": "<code>fakeemail@gmailcom</code> is a valid email, check here <a href=\"https://en.wikipedia.org/wiki/Email_address#Examples\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Email_address#Examples</a>"}, {"owner": {"reputation": 897, "user_id": 1661323, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/eb19dcd642e4d6c6ee5e08cc2b30f342?s=128&d=identicon&r=PG", "display_name": "greenif", "link": "https://stackoverflow.com/users/1661323/greenif"}, "edited": false, "score": 5, "creation_date": 1536088117, "post_id": 49925333, "comment_id": 91295829, "body": "This method does not check domain"}, {"owner": {"reputation": 3180, "user_id": 7147228, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ecaf2771089d20f8e66cccd5096fbe95?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Hunter", "link": "https://stackoverflow.com/users/7147228/joshua-hunter"}, "edited": false, "score": 2, "creation_date": 1536088769, "post_id": 49925333, "comment_id": 91296079, "body": "If there is a period, but nothing after it, the regex will return nil.  If there is something after the period or no period, it will pass.  &quot;This requirement is a willful violation of RFC 5322, which defines a syntax for e-mail addresses that is simultaneously too strict (before the &quot;@&quot; character), too vague (after the &quot;@&quot; character), and too lax (allowing comments, whitespace characters, and quoted strings in manners unfamiliar to most users) to be of practical use here.&quot;  <a href=\"https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address\" rel=\"nofollow noreferrer\">html.spec.whatwg.org/multipage/input.html#valid-e-mail-addre&zwnj;&#8203;ss</a>"}, {"owner": {"reputation": 364, "user_id": 699763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jn00H.jpg?s=128&g=1", "display_name": "yaodong", "link": "https://stackoverflow.com/users/699763/yaodong"}, "reply_to_user": {"reputation": 6273, "user_id": 2392106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/iXOIu.jpg?s=128&g=1", "display_name": "medBouzid", "link": "https://stackoverflow.com/users/2392106/medbouzid"}, "edited": false, "score": 2, "creation_date": 1547415172, "post_id": 49925333, "comment_id": 95175731, "body": "@medBouzid because fakeemail@gmailcom is in valid email format. I would check the domain next."}, {"owner": {"reputation": 2578, "user_id": 1235057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QJ1Mq.jpg?s=128&g=1", "display_name": "Ira Herman", "link": "https://stackoverflow.com/users/1235057/ira-herman"}, "edited": false, "score": 0, "creation_date": 1555901292, "post_id": 49925333, "comment_id": 98247251, "body": "Amazing! I just checked and this is the regex under the hood of <code>URI::MailTo::EMAIL_REGEXP</code>: <code>&#47;\\A[a-zA-Z0-9.!\\#$%&amp;&#39;*+\\&#47;=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0&zwnj;&#8203;-9-]{0,61}[a-zA-Z0-9&zwnj;&#8203;])?(?:\\.[a-zA-Z0-9](&zwnj;&#8203;?:[a-zA-Z0-9-]{0,61}&zwnj;&#8203;[a-zA-Z0-9])?)*\\z&#47;</code> .  Love this solution"}, {"owner": {"reputation": 5118, "user_id": 609782, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ae52db449f67c30243e5f6a7851882c2?s=128&d=identicon&r=PG", "display_name": "Darpan", "link": "https://stackoverflow.com/users/609782/darpan"}, "edited": false, "score": 1, "creation_date": 1559041157, "post_id": 49925333, "comment_id": 99286607, "body": "For noobs : email.match(URI::MailTo::EMAIL_REGEXP).present? will work if looking for non active record solution"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 1, "creation_date": 1569234866, "post_id": 49925333, "comment_id": 102517728, "body": "not sure if its only me, but using the above solution i still get email staring with <code>.</code> as valid."}, {"owner": {"reputation": 196, "user_id": 3347828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/drmQg.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/3347828/will"}, "edited": false, "score": 0, "creation_date": 1572553337, "post_id": 49925333, "comment_id": 103606209, "body": "Validations like this will also need an error message, <a href=\"https://gist.github.com/frankolson/96fdd5706b779d52d7fbbdc201f1cc8f\" rel=\"nofollow noreferrer\">here is an example</a> with a custom message. Also here is a link to the URI source documentation: <a href=\"https://www.rubydoc.info/stdlib/uri/URI/MailTo\" rel=\"nofollow noreferrer\">Ruby Standard Library: URI::MailTo</a>"}, {"owner": {"reputation": 5644, "user_id": 9908141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/seDql.jpg?s=128&g=1", "display_name": "Imran Ahmad", "link": "https://stackoverflow.com/users/9908141/imran-ahmad"}, "edited": false, "score": 1, "creation_date": 1588464784, "post_id": 49925333, "comment_id": 108907147, "body": "Attention! It returns true for <code>abc...xyz@gmail.com</code> email id."}, {"owner": {"reputation": 950, "user_id": 721065, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edc3679b79541a9ab4e861e716ebef9c?s=128&d=identicon&r=PG&f=1", "display_name": "cdmo", "link": "https://stackoverflow.com/users/721065/cdmo"}, "edited": false, "score": 0, "creation_date": 1602863461, "post_id": 49925333, "comment_id": 113864018, "body": "Keep in mind that client-side email validation happens &quot;for free&quot; if you use the email input type. See <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/HTML/Element/input/emai&zwnj;&#8203;l</a>"}], "tags": [], "owner": {"reputation": 3180, "user_id": 7147228, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ecaf2771089d20f8e66cccd5096fbe95?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Hunter", "link": "https://stackoverflow.com/users/7147228/joshua-hunter"}, "is_accepted": true, "score": 203, "last_activity_date": 1524153232, "creation_date": 1524153232, "answer_id": 49925333, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/49925333#49925333", "title": "Email validation in Ruby on Rails?", "body": "<p>I use the constant built into URI in the standard ruby library</p>\n\n<pre><code>validates :email, format: { with: URI::MailTo::EMAIL_REGEXP } \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1583814482, "post_id": 51546717, "comment_id": 107232641, "body": "Very restrictive (and not even close to the &quot;real&quot; email regex, which is a horrible abuse of regexes :)"}, {"owner": {"reputation": 933, "user_id": 3156955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uS0Yj.jpg?s=128&g=1", "display_name": "Adriano Tadao", "link": "https://stackoverflow.com/users/3156955/adriano-tadao"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1585236102, "post_id": 51546717, "comment_id": 107695772, "body": "@DaveNewton Your comment is not adding anything to it. Share with us the correct regex/way, please. :)"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1585238566, "post_id": 51546717, "comment_id": 107697076, "body": "Here&#39;s what it adds: (1) It&#39;s a restrictive regex, e.g., it does not cover many real-world email cases, and (2) hints there&#39;s an actual reasonably-complete regex, e.g., <a href=\"https://stackoverflow.com/q/20771794/438992\">stackoverflow.com/q/20771794/438992</a>. As the regex is a page long I cannot include it in a comment. For all but the simplest cases (which, fortunately, include a lot of email addresses) a regex is not the best approach."}], "tags": [], "owner": {"reputation": 933, "user_id": 3156955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uS0Yj.jpg?s=128&g=1", "display_name": "Adriano Tadao", "link": "https://stackoverflow.com/users/3156955/adriano-tadao"}, "is_accepted": false, "score": 2, "last_activity_date": 1532635503, "creation_date": 1532635503, "answer_id": 51546717, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/51546717#51546717", "title": "Email validation in Ruby on Rails?", "body": "<p>Is better to follow Rails documentation:</p>\n\n<p><a href=\"https://guides.rubyonrails.org/active_record_validations.html#custom-validators\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/active_record_validations.html#custom-validators</a></p>\n\n<pre><code>class EmailValidator &lt; ActiveModel::EachValidator\n  def validate_each(record, attribute, value)\n    unless value =~ /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\z/i\n      record.errors[attribute] &lt;&lt; (options[:message] || \"is not an email\")\n    end\n  end\nend\n\nclass Person &lt; ApplicationRecord\n  validates :email, presence: true, email: true\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1583814479, "post_id": 51593445, "comment_id": 107232640, "body": "Very restrictive (and not even close to the &quot;real&quot; email regex, which is a horrible abuse of regexes :)"}], "tags": [], "owner": {"reputation": 1693, "user_id": 1623261, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/01c84ad64ab8a9dfdb446119c0204a4f?s=128&d=identicon&r=PG", "display_name": "A H K", "link": "https://stackoverflow.com/users/1623261/a-h-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1532951783, "creation_date": 1532951783, "answer_id": 51593445, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/51593445#51593445", "title": "Email validation in Ruby on Rails?", "body": "<pre><code>VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n!(\"yourmail@example.com\" =~ VALID_EMAIL_REGEX).nil?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16802, "user_id": 1007043, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/QQ2rK.gif?s=128&g=1", "display_name": "gayavat", "link": "https://stackoverflow.com/users/1007043/gayavat"}, "is_accepted": false, "score": 3, "last_activity_date": 1567688744, "creation_date": 1567688744, "answer_id": 57806186, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/57806186#57806186", "title": "Email validation in Ruby on Rails?", "body": "<p>Please, be aware that for now <strong>email_validator</strong> gem does not have complex validation rules, but only: </p>\n\n<pre><code>/[^\\s]@[^\\s]/\n</code></pre>\n\n<p><a href=\"https://github.com/balexand/email_validator/blob/master/lib/email_validator.rb#L13\" rel=\"nofollow noreferrer\">https://github.com/balexand/email_validator/blob/master/lib/email_validator.rb#L13</a></p>\n\n<p>Argumentation is in <a href=\"https://medium.com/hackernoon/the-100-correct-way-to-validate-email-addresses-7c4818f24643\" rel=\"nofollow noreferrer\">https://medium.com/hackernoon/the-100-correct-way-to-validate-email-addresses-7c4818f24643</a></p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 10978863, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WcRnaMp8Ijs/AAAAAAAAAAI/AAAAAAABFwE/Z-p4cf1nwYY/photo.jpg?sz=128", "display_name": "Dayana Alonso", "link": "https://stackoverflow.com/users/10978863/dayana-alonso"}, "is_accepted": false, "score": -1, "last_activity_date": 1583684978, "creation_date": 1583684978, "answer_id": 60589594, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails/60589594#60589594", "title": "Email validation in Ruby on Rails?", "body": "<p>I had the same issue, and it was fixed with a simple one-line gem </p>\n\n<pre><code>gem 'validates_email_format_of'\n</code></pre>\n\n<p>in my model I added</p>\n\n<pre><code>validates :email, email_format: { message: 'Invalid email format' }\n</code></pre>\n\n<p>I hope this helps any newbie's like myself :) </p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60754, "favorite_count": 16, "accepted_answer_id": 49925333, "answer_count": 14, "score": 67, "last_activity_date": 1583684978, "creation_date": 1469618096, "last_edit_date": 1580741032, "question_id": 38611405, "link": "https://stackoverflow.com/questions/38611405/email-validation-in-ruby-on-rails", "title": "Email validation in Ruby on Rails?", "body": "<p>I am doing email validation in Rails with:</p>\n\n<pre><code>validates_format_of :email, :with =&gt; /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\z/i\n</code></pre>\n\n<p>Also, I do HTML5 validation in the frontend but email addresses like</p>\n\n<pre><code>..abc@gmail.com\n.abc@gmail.com\n</code></pre>\n\n<p>still are valid. What am I missing?</p>\n"}, {"tags": ["ruby", "keyword-argument"], "comments": [{"owner": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "edited": false, "score": 3, "creation_date": 1469617644, "post_id": 38611058, "comment_id": 64608665, "body": "Related: <a href=\"http://stackoverflow.com/questions/31810695/define-method-with-predefined-keyword-arguments\" title=\"define method with predefined keyword arguments\">stackoverflow.com/questions/31810695/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "is_accepted": false, "score": 0, "last_activity_date": 1469620111, "creation_date": 1469620111, "answer_id": 38612120, "question_id": 38611058, "link": "https://stackoverflow.com/questions/38611058/ruby-required-keyword-arguments/38612120#38612120", "title": "Ruby required keyword arguments", "body": "<p>The <em>splat</em> (*) and <em>double spla</em>t (**) operators allow a method to take an arbitrary number of arguments. The former will store the arguments in an array and the latter will store them in a hash. </p>\n\n<p>There is also the <em>options hash</em>, which is an optional hash parameter, usually included as the last parameter at the method declaration. It can also take an arbitrary number of arguments (actually, they are plain hash items).</p>\n\n<p>However, in both of the above cases, the number of arguments is unknown when you declare the method. Hence, you can't make an unknown number of arguments \"required\". </p>\n\n<p>More info on splat, double splat and required keyword parameters is available at <a href=\"http://www.zenruby.info/2016/05/methods-in-ruby.html\" rel=\"nofollow\">this blog post</a>.</p>\n"}], "owner": {"reputation": 676, "user_id": 468334, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/490b42776dcf869a0401b4ac55d9ec26?s=128&d=identicon&r=PG", "display_name": "jjg", "link": "https://stackoverflow.com/users/468334/jjg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1605, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1579132898, "creation_date": 1469617091, "last_edit_date": 1579132898, "question_id": 38611058, "link": "https://stackoverflow.com/questions/38611058/ruby-required-keyword-arguments", "title": "Ruby required keyword arguments", "body": "<p>For Ruby methods, the required keyword syntax is nice</p>\n\n<pre><code>def foo(bar:, baz:)\n  :\nend\n\nfoo(bar: true, baz: false) # OK\nfoo(bar: true) # missing keyword argument error\n</code></pre>\n\n<p>Can one 'splat' the list of required keywords with some kind of magic? i.e., </p>\n\n<pre><code>required_keywords = [:bar, :baz]\ndef foo(magic(required_keywords))\n  :\nend\n</code></pre>\n\n<p>I expect not, but I'm often surprised with what Ruby can be persuaded to do.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 0, "creation_date": 1469616968, "post_id": 38610941, "comment_id": 64608197, "body": "Possibly related: <a href=\"http://stackoverflow.com/questions/8378277/cannot-use-ruby-debug19-with-1-9-3-p0\" title=\"cannot use ruby debug19 with 1 9 3 p0\">stackoverflow.com/questions/8378277/&hellip;</a>"}, {"owner": {"reputation": 3020, "user_id": 1072825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a27932ed81093b975e0b2619367cce95?s=128&d=identicon&r=PG", "display_name": "Pavan K", "link": "https://stackoverflow.com/users/1072825/pavan-k"}, "reply_to_user": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 0, "creation_date": 1469618180, "post_id": 38610941, "comment_id": 64609027, "body": "I appreciate the effort to relate to possible duplicates.  I am looking for a solution I already stumbled upon them and they did not work. @DamienRoche The link to ruby source is dead in that post."}, {"owner": {"reputation": 3020, "user_id": 1072825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a27932ed81093b975e0b2619367cce95?s=128&d=identicon&r=PG", "display_name": "Pavan K", "link": "https://stackoverflow.com/users/1072825/pavan-k"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1469618411, "post_id": 38610941, "comment_id": 64609190, "body": "@j-dexx Sorry but that didn&#39;t solve my problem. I posted my solution below thanks anyway"}], "answers": [{"tags": [], "owner": {"reputation": 3020, "user_id": 1072825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a27932ed81093b975e0b2619367cce95?s=128&d=identicon&r=PG", "display_name": "Pavan K", "link": "https://stackoverflow.com/users/1072825/pavan-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1469618328, "creation_date": 1469618328, "answer_id": 38611498, "question_id": 38610941, "link": "https://stackoverflow.com/questions/38610941/ruby-on-rails-legacy-application-error-with-linecache-gem/38611498#38611498", "title": "Ruby on rails legacy application error with linecache gem", "body": "<p>linecache has a patched gem to work with ruby-debug </p>\n\n<p>add this to your Gemfile  </p>\n\n<pre><code>gem 'linecache19-patched' instead of \ngem  'linecache19' \n</code></pre>\n"}], "owner": {"reputation": 3020, "user_id": 1072825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a27932ed81093b975e0b2619367cce95?s=128&d=identicon&r=PG", "display_name": "Pavan K", "link": "https://stackoverflow.com/users/1072825/pavan-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1469628896, "accepted_answer_id": 38611498, "answer_count": 1, "score": 1, "last_activity_date": 1469618328, "creation_date": 1469616801, "question_id": 38610941, "link": "https://stackoverflow.com/questions/38610941/ruby-on-rails-legacy-application-error-with-linecache-gem", "closed_reason": "Duplicate", "title": "Ruby on rails legacy application error with linecache gem", "body": "<p>I have ruby on rails legacy application and I have the following error when I run the application </p>\n\n<pre><code>/usr/local/lib/ruby/gems/1.9.1/gems/linecache19-0.5.12/lib/trace_nums19.so: undefined symbol: ruby_current_thread - /usr/local/lib/ruby/gems/1.9.1/gems/linecache19-0.5.12/lib/trace_nums19.so (LoadError)\n  /usr/local/lib/ruby/gems/1.9.1/gems/linecache19-0.5.12/lib/tracelines19.rb:12:in `require'\n  /usr/local/lib/ruby/gems/1.9.1/gems/linecache19-0.5.12/lib/tracelines19.rb:12:in `rescue in &lt;module:TraceLineNumbers&gt;'\n</code></pre>\n\n<p>Full error can be found <a href=\"http://msl1.it.kth.se/Melange2\" rel=\"nofollow\">Here</a></p>\n\n<p>Could anyone help me spot the problem? </p>\n"}, {"tags": ["ruby", "loops", "foreach"], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1469615144, "post_id": 38610007, "comment_id": 64606961, "body": "You can drop the  <code>to_a</code> as well."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1469615198, "post_id": 38610007, "comment_id": 64607004, "body": "@sagarpandya82 yes, indeed, this part was just copy-pasted. Thx, will update the \u201ceven better\u201d part to leave the original answer as close to the question as possible."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1469615222, "last_edit_date": 1469615222, "creation_date": 1469614327, "answer_id": 38610007, "question_id": 38609629, "link": "https://stackoverflow.com/questions/38609629/project-euler-task-17-find-number-of-all-letters-from-a-range-of-numbers/38610007#38610007", "title": "Project Euler Task 17. Find number of all letters from a range of numbers", "body": "<p>Your problem is that you are messing <code>map</code> with <code>each</code>.</p>\n\n<pre><code>(1..1000).to_a.map(&amp;:humanize)\n              .each {|x| arr &lt;&lt; x.delete(\" \").delete(\"-\") } # ??? each\n              .map {|y| total += y.length }                 # ??? map\n</code></pre>\n\n<p>The call to <code>Enumerable#each</code> returns the original <code>Enumerable</code>, not <code>arr</code> or whatever you\u2019ve expected. Yes, you fulfilled <code>arr</code>, but the latter <code>map</code> is called on the original array, having all these spaces and dashes.</p>\n\n<p>The correct way to implement it your way:</p>\n\n<pre><code>(1..1000).to_a.map(&amp;:humanize)\n              .map { |x| x.delete(\" \").delete(\"-\") } # sic!, no need for arr\n              .each { |y| total += y.length } # no need to map here\n</code></pre>\n\n<p>Or, more ruby idiomatic:</p>\n\n<pre><code>(1..1000).to_a.map(&amp;:humanize)\n              .map { |x| x.delete(\" \").delete(\"-\") }\n              .reduce(:+) # reduce by summing everything up\n</code></pre>\n\n<p>Or, even better (<code>to_a</code> is redundant here):</p>\n\n<pre><code>(1..1000).map(&amp;:humanize)\n         .reduce(0) { |memo, x| memo + x.delete(\" \").delete(\"-\").length }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 38610007, "answer_count": 1, "score": -3, "last_activity_date": 1469615222, "creation_date": 1469613357, "last_edit_date": 1469614496, "question_id": 38609629, "link": "https://stackoverflow.com/questions/38609629/project-euler-task-17-find-number-of-all-letters-from-a-range-of-numbers", "title": "Project Euler Task 17. Find number of all letters from a range of numbers", "body": "<p>The problem:</p>\n\n<p>If the numbers 1 to 5 are written out in words: one, two, three, four, five, then there are 3 + 3 + 5 + 4 + 4 = 19 letters used in total.\nIf all the numbers from 1 to 1000 (one thousand) inclusive were written out in words, how many letters would be used?</p>\n\n<p>My solution:</p>\n\n<pre><code>require 'humanize'\narr, total = [], 0\n(1..1000).to_a.map(&amp;:humanize).each {|x| arr &lt;&lt; x.delete(\" \").delete(\"-\")}.map {|y| total += y.length }\np total\n</code></pre>\n\n<p>Other solution privided, by @Arif in other question, gives the right answer (according to Project Euler):</p>\n\n<pre><code>p (1..1000).to_a.map(&amp;:humanize).join.tr(\" -\", \"\").size\n</code></pre>\n\n<p>Why my solution is wrong? From my knowledge, these two implementations should give the same output...</p>\n\n<p>Edit:\nFound one more strange thing.\nIf I change 1000 to any number up to 20 and implementations looks like this:</p>\n\n<pre><code>(1..20).to_a.map(&amp;:humanize).each {|x| arr &lt;&lt; x.delete(\" \").delete(\"-\")}.map {|y| total += y.length }\n\np (1..20).to_a.map(&amp;:humanize).join.tr(\" -\", \"\").size\n</code></pre>\n\n<p>I receive the same answer.....? What?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "homebrew"], "answers": [{"tags": [], "owner": {"reputation": 2562, "user_id": 4344085, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ilSIn.jpg?s=128&g=1", "display_name": "Khanh Pham", "link": "https://stackoverflow.com/users/4344085/khanh-pham"}, "is_accepted": false, "score": 1, "last_activity_date": 1471076669, "last_edit_date": 1471076669, "creation_date": 1469614389, "answer_id": 38610027, "question_id": 38609292, "link": "https://stackoverflow.com/questions/38609292/ruby-doesnt-work-on-mac-after-installed-with-brew/38610027#38610027", "title": "Ruby doesn&#39;t work on Mac after installed with Brew", "body": "<p>in <code>~/.bash_profile</code> add the following line</p>\n\n<pre><code>export PATH=\"$(brew --prefix)/opt/ruby/bin:$PATH\"\n</code></pre>\n\n<p>When you're done, close your terminal and re-open it. You should be fine.</p>\n\n<p>Or if you don't want to re-open your terminal, you can do this:</p>\n\n<pre><code>source ~/.bash_profile\n</code></pre>\n\n<p>I suggest that you should install <code>ruby</code> via <code>rvm</code> or <code>rbenv</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 1145394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ea4860e5da1948c16d10b45e24a2ec?s=128&d=identicon&r=PG", "display_name": "tunagami", "link": "https://stackoverflow.com/users/1145394/tunagami"}, "is_accepted": false, "score": 0, "last_activity_date": 1469622103, "creation_date": 1469622103, "answer_id": 38612830, "question_id": 38609292, "link": "https://stackoverflow.com/questions/38609292/ruby-doesnt-work-on-mac-after-installed-with-brew/38612830#38612830", "title": "Ruby doesn&#39;t work on Mac after installed with Brew", "body": "<p>I would remove ruby from homebrew and suggest installing either rbenv (<a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow\">https://github.com/rbenv/rbenv</a>) or rvm (<a href=\"https://rvm.io/\" rel=\"nofollow\">https://rvm.io/</a>) with brew (rbenv is my preferred).  </p>\n\n<p>This way you can have multiple versions of ruby on your system at any time and switch between which version you want for different projects.  It is quite nice.</p>\n"}], "owner": {"reputation": 384, "user_id": 3932125, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9baa554e7800a62e019325df850b4466?s=128&d=identicon&r=PG&f=1", "display_name": "practicemakesperfect", "link": "https://stackoverflow.com/users/3932125/practicemakesperfect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 560, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471076691, "creation_date": 1469612509, "last_edit_date": 1471076691, "question_id": 38609292, "link": "https://stackoverflow.com/questions/38609292/ruby-doesnt-work-on-mac-after-installed-with-brew", "title": "Ruby doesn&#39;t work on Mac after installed with Brew", "body": "<p>I'm on Mac with OS X El Capitan. I installed ruby with <code>brew install ruby</code> in the terminal, but when I type <code>ruby -v</code> or <code>ruby --version</code>, nothing came up. If I run a simple ruby file with output, nothing showed either. I tried to use <code>binding.pry</code> to stop the script, but it didn't stop and nothing showed in the terminal. I thought the install wasn't successful but when I run <code>brew install ruby</code> again, I says \"ruby-2.3.0 already installed\". I wonder what the problem is.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "garbage-collection"], "answers": [{"comments": [{"owner": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 0, "creation_date": 1469613258, "post_id": 38609257, "comment_id": 64605592, "body": "I wish I can read more about this any link or source would be great."}, {"owner": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 0, "creation_date": 1469613408, "post_id": 38609257, "comment_id": 64605720, "body": "the VIRTUAL  has stayed constant. Also I how do I check what is the VIRTUAL memory current in used. I guess it&#39;s the SWAP column in top that specific that right?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 0, "creation_date": 1469614923, "post_id": 38609257, "comment_id": 64606810, "body": "Sorry I noticed you&#39;re using OSX, but it&#39;s similar to Linux. On Linux you get detailed total memory statistics for example <code>cat &#47;proc&#47;meminfo</code>. It&#39;s not as simple as just looking at Swap, because the OS uses some memory for disk caching also. I added some links to the answer where you can read more."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 0, "creation_date": 1469615098, "post_id": 38609257, "comment_id": 64606930, "body": "<a href=\"http://apple.stackexchange.com/questions/101488/os-xs-free-or-proc-meminfo-equivalent\" title=\"os xs free or proc meminfo equivalent\">apple.stackexchange.com/questions/101488/&hellip;</a>"}, {"owner": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 0, "creation_date": 1469616405, "post_id": 38609257, "comment_id": 64607815, "body": "Before I accept your answer.The way I get this Linux kernel will page out the memory if not in used assuming I wake from the long sleep will the entire page would be swap back in when it resume after long sleep."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 0, "creation_date": 1469617002, "post_id": 38609257, "comment_id": 64608218, "body": "Memory is always swapped in and out in pages. So normally if a page was swapped out because it was idle, then if you access any memory inside that page it will be swapped back in to physical memory. This does not mean the entire <b>array</b> is swapped in, just the part that is inside the page you are accessing. If you access the whole array then many pages may be swapped back in. It depends on page size and how large the array is to begin with. Hope that helps.."}, {"owner": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 0, "creation_date": 1469617583, "post_id": 38609257, "comment_id": 64608621, "body": "Thanks you very much."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 1, "creation_date": 1469617637, "post_id": 38609257, "comment_id": 64608658, "body": "Btw. if you like very technical documentation then you can get a lot of details here: <a href=\"http://www.tldp.org/LDP/tlk/mm/memory.html\" rel=\"nofollow noreferrer\">tldp.org/LDP/tlk/mm/memory.html</a>"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 4, "last_activity_date": 1518626109, "last_edit_date": 1518626109, "creation_date": 1469612409, "answer_id": 38609257, "question_id": 38608624, "link": "https://stackoverflow.com/questions/38608624/memory-management-in-ruby/38609257#38609257", "title": "Memory Management in Ruby", "body": "<p>You are correct, it's not GC that changed the physical memory requirements, it's the OS kernel.</p>\n\n<p>You need to look at the <code>VIRT</code> column, not the <code>RES</code> column. As you can see <code>VIRT</code> stays exactly the same. </p>\n\n<p><code>RES</code> is <strong>physical</strong> (resident) memory, <code>VIRT</code> is virtual (allocated, but currently unused) memory.</p>\n\n<p>When the process sleeps it's not using its memory or doing anything, so the OS memory manager decides to swap out part of the physical memory and move it into virtual space. </p>\n\n<p>Why keep an idle process hogging physical memory for no reason? So the OS is smart, and swaps out as much unused physical memory as possible, that's why you see a reduction in <code>RES</code>.</p>\n\n<p>I suspect you would see the same effect even without <code>array = nil</code>, by just sleeping long enough. Once you stop sleeping and access something in the array, then <code>RES</code> will jump back up again.</p>\n\n<p>You can read some more discussion through these:<br>\n<a href=\"https://stackoverflow.com/questions/7880784/what-is-rss-and-vsz-in-linux-memory-management\">What is RSS and VSZ in Linux memory management</a><br>\n<a href=\"http://www.darkcoding.net/software/resident-and-virtual-memory-on-linux-a-short-example/\" rel=\"nofollow noreferrer\">http://www.darkcoding.net/software/resident-and-virtual-memory-on-linux-a-short-example/</a><br>\n<a href=\"https://stackoverflow.com/questions/4970421/whats-the-difference-between-virtual-memory-and-swap-space\">What&#39;s the difference between &quot;virtual memory&quot; and &quot;swap space&quot;?</a><br>\n<a href=\"http://www.tldp.org/LDP/tlk/mm/memory.html\" rel=\"nofollow noreferrer\">http://www.tldp.org/LDP/tlk/mm/memory.html</a></p>\n"}], "owner": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1298, "favorite_count": 1, "accepted_answer_id": 38609257, "answer_count": 1, "score": 4, "last_activity_date": 1518626109, "creation_date": 1469610728, "last_edit_date": 1469616774, "question_id": 38608624, "link": "https://stackoverflow.com/questions/38608624/memory-management-in-ruby", "title": "Memory Management in Ruby", "body": "<p>I puzzled by some behaviour of ruby and how it manages memory.</p>\n\n<p>I understand the Ruby GC (major or minor) behaviour i.e if the any objects count goes above there threshold value or limit (i.e heap_available_slots,old_objects_limit, remembered_shady_object_limit, malloc_limit). Ruby run/trigger a GC(major or minor).</p>\n\n<p>And after GC if it can't find the enough memory Ruby allocate (basically malloc I assuming) more memory for the running program.</p>\n\n<p>Also, It's a known fact that by does release back memory to the OS immediately.</p>\n\n<p>Now .. </p>\n\n<p>What I fail to understand how come Ruby releases memory (back to the OS) without triggering any GC.</p>\n\n<p>Example</p>\n\n<pre><code>require 'rbtrace'\n\nindex = 1\narray = []\nwhile(index &lt; 20000000) do \n   array &lt;&lt; index\n   index += 1\nend\n\n\nsleep 10\nprint \"-\"\narray=nil\nsleep\n</code></pre>\n\n<p>Here is my example. If run the above code on ruby 2.2.2p95. \n<code>htop</code> display the RSS count of the process (test.rb PID 11483) reaching to 161MB.</p>\n\n<p><a href=\"https://i.stack.imgur.com/snMwa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/snMwa.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>GC.stat</code> (captured via <code>rbtrace</code> gem) look like (pay close attention to attention to <code>GC count</code>)</p>\n\n<pre><code>rbtrace -p 11843 -e '[Time.now,Process.pid,GC.stat]'\n\n[Time.now,Process.pid,GC.stat]\n=&gt; [2016-07-27 13:50:28 +0530, 11843, \n{\n  \"count\": 7,\n  \"heap_allocated_pages\": 74,\n  \"heap_sorted_length\": 75,\n  \"heap_allocatable_pages\": 0,\n  \"heap_available_slots\": 30162,\n  \"heap_live_slots\": 11479,\n  \"heap_free_slots\": 18594,\n  \"heap_final_slots\": 89,\n  \"heap_marked_slots\": 120,\n  \"heap_swept_slots\": 18847,\n  \"heap_eden_pages\": 74,\n  \"heap_tomb_pages\": 0,\n  \"total_allocated_pages\": 74,\n  \"total_freed_pages\": 0,\n  \"total_allocated_objects\": 66182,\n  \"total_freed_objects\": 54614,\n  \"malloc_increase_bytes\": 8368,\n  \"malloc_increase_bytes_limit\": 33554432,\n  \"minor_gc_count\": 4,\n  \"major_gc_count\": 3,\n  \"remembered_wb_unprotected_objects\": 0,\n  \"remembered_wb_unprotected_objects_limit\": 278,\n  \"old_objects\": 14,\n  \"old_objects_limit\": 10766,\n  \"oldmalloc_increase_bytes\": 198674592,\n  \"oldmalloc_increase_bytes_limit\": 20132659\n}]\n*** detached from process 11843\n\nGC count =&gt; 7 \n</code></pre>\n\n<p>Approximately 25 minutes later. Memory has drop down to <strong>6MB</strong> but GC count is still 7.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZMQSN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZMQSN.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>[Time.now,Process.pid,GC.stat]\n=&gt; [2016-07-27 14:16:02 +0530, 11843, \n{\n  \"count\": 7,\n  \"heap_allocated_pages\": 74,\n  \"heap_sorted_length\": 75,\n  \"heap_allocatable_pages\": 0,\n  \"heap_available_slots\": 30162,\n  \"heap_live_slots\": 11581,\n  \"heap_free_slots\": 18581,\n  \"heap_final_slots\": 0,\n  \"heap_marked_slots\": 120,\n  \"heap_swept_slots\": 18936,\n  \"heap_eden_pages\": 74,\n  \"heap_tomb_pages\": 0,\n  \"total_allocated_pages\": 74,\n  \"total_freed_pages\": 0,\n  \"total_allocated_objects\": 66284,\n  \"total_freed_objects\": 54703,\n  \"malloc_increase_bytes\": 3248,\n  \"malloc_increase_bytes_limit\": 33554432,\n  \"minor_gc_count\": 4,\n  \"major_gc_count\": 3,\n  \"remembered_wb_unprotected_objects\": 0,\n  \"remembered_wb_unprotected_objects_limit\": 278,\n  \"old_objects\": 14,\n  \"old_objects_limit\": 10766,\n  \"oldmalloc_increase_bytes\": 198663520,\n  \"oldmalloc_increase_bytes_limit\": 20132659\n}]\n</code></pre>\n\n<p>Question: I was under the impression that Ruby Release memory whenever GC is triggered. But clearly that not the case over here.</p>\n\n<p>Anybody can provide a detail on how (as in who triggered the memory releases surely its <strong>not</strong> GC.) the memory is released back to OS.</p>\n\n<pre><code>OS: OS X version 10.11.12\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1469607724, "post_id": 38607498, "comment_id": 64601797, "body": "<code>@channelList </code> what it contains ?"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1469608197, "post_id": 38607498, "comment_id": 64602101, "body": "@RajarshiDas look at his last screenshot."}], "answers": [{"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1469611947, "post_id": 38607680, "comment_id": 64604668, "body": "just want to print out those in the selection, later I want do some jquery magic ;)"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1469612001, "post_id": 38607680, "comment_id": 64604725, "body": "Okay, no problem :)"}], "tags": [], "owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "is_accepted": true, "score": 1, "last_activity_date": 1469608035, "creation_date": 1469608035, "answer_id": 38607680, "question_id": 38607498, "link": "https://stackoverflow.com/questions/38607498/ruby-on-rails-collection-output-in-collection-select/38607680#38607680", "title": "Ruby on Rails collection output in collection_select", "body": "<p><a href=\"http://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select\" rel=\"nofollow\">http://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select</a></p>\n\n<p>You have to specify: <code>object, method, collection, value_method, text_method</code>, you probably forgot to set the <code>object</code> param.</p>\n\n<p>Which would make this:</p>\n\n<pre><code>&lt;%= collection_select :object, :channel, @channelList, :id, :channelname, {prompt: (t \"channel.add.prompt\")}, class: \"form-control\"%&gt;\n</code></pre>\n\n<p>(replace <code>:object</code> with your object you want to save the channel to)</p>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 38607680, "answer_count": 1, "score": 1, "last_activity_date": 1469608035, "creation_date": 1469607473, "question_id": 38607498, "link": "https://stackoverflow.com/questions/38607498/ruby-on-rails-collection-output-in-collection-select", "title": "Ruby on Rails collection output in collection_select", "body": "<p>I've got this code:</p>\n\n<pre><code>    &lt;%= collection_select :channel, @channelList, :id, :channelname, {prompt: (t \"channel.add.prompt\")}, class: \"form-control\"%&gt;\n</code></pre>\n\n<p>And got this error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QWz4K.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QWz4K.png\" alt=\"enter image description here\"></a></p>\n\n<p>Its a normal active relation</p>\n\n<p><a href=\"https://i.stack.imgur.com/xfl4Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xfl4Z.png\" alt=\"enter image description here\"></a></p>\n\n<p>Whats my mistake in this case?</p>\n\n<p>thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1469605898, "post_id": 38606820, "comment_id": 64600615, "body": "<code>[a, b, cc].any? &amp;0.method(:&lt;)</code> :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1469606070, "post_id": 38606820, "comment_id": 64600724, "body": "When ruby is the language you use on regular basis, it\u2019s even more readable, than <code>{ |x| x &gt; 0 }</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1469606388, "post_id": 38606820, "comment_id": 64600931, "body": "@RajarshiDas excuse me?"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1469606564, "post_id": 38606820, "comment_id": 64601053, "body": "@mudasobwa I like &amp; learn  the code style u given  <code>&amp;0.method(:&lt;)</code> instead of <code>{ |x| x &gt; 0 }</code> if possible please post an answer"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1469606663, "post_id": 38606820, "comment_id": 64601123, "body": "@RajarshiDas it brings no added value, since it\u2019s a shorthand / syntactic sugar to the answer above. I appreciate you liked it."}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 1, "creation_date": 1469606697, "post_id": 38606820, "comment_id": 64601142, "body": "This will add some process. Instead of just doing <code>if</code> you add a loop."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469606713, "post_id": 38606820, "comment_id": 64601154, "body": "I am surprised that ruby doesn&#39;t have <code>Numeric#positive?</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1469606824, "post_id": 38606820, "comment_id": 64601235, "body": "@mudasobwa: &quot;since it\u2019s a shorthand / syntactic sugar&quot; - I&#39;m sorry, but I think it&#39;s syntactic acid :) Must be I&#39;m not as trained in reading those as you. Maybe it&#39;s a good thing. :trollface:"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1469606940, "post_id": 38606820, "comment_id": 64601302, "body": "<code>[a, b, c].any?(&amp;:positive?)</code> - now <i>that</i> would be sugar."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1469608580, "post_id": 38606820, "comment_id": 64602369, "body": "@SergioTulentsev well, frankly I don\u2019t like sweets and I <i>do</i> like spicy much, maybe that\u2019s the reason. I agree that <code>positive?</code> would be more sugary if we had it, but we haven\u2019t :)"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1469612717, "post_id": 38606820, "comment_id": 64605192, "body": "@mudasobwa that is a fancy approach. Can you explain the <code>&amp;0.method(:&lt;)</code> part? It&#39;s unconventional."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469612971, "post_id": 38606820, "comment_id": 64605383, "body": "@maxpleaner it\u2019s both conventional and idiomatic ruby. <code>any?</code> expects a block, <code>&amp;</code> converts the <code>proc</code> argument to a block, <a href=\"http://ruby-doc.org/core-2.0.0/Method.html#method-i-to_proc\" rel=\"nofollow noreferrer\"><code>Method#to_proc</code></a> converts instance method <code>Numeric#&lt;</code> with receiver <code>0</code> to a <code>proc</code>."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 4, "last_activity_date": 1469605452, "creation_date": 1469605452, "answer_id": 38606820, "question_id": 38606796, "link": "https://stackoverflow.com/questions/38606796/how-can-if-shortened-with-the-same-satisfying-condition/38606820#38606820", "title": "how can if shortened with the same satisfying condition", "body": "<p>I'd probably do</p>\n\n<pre><code>if [a, b, c].any? { |x| x &gt; 0 }\n  puts \"greater that zero\"\nelse\n  puts \"it is zero or less than zero\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1469613372, "post_id": 38607147, "comment_id": 64605690, "body": "One question: I think with <code>max</code> it has to pass through all the elements of the array, instead with <code>any?</code> at the first true it can exit and give the result. Am I missing anything?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1469615807, "post_id": 38607147, "comment_id": 64607435, "body": "Of course, you&#39;re right. But it also doesn&#39;t have any significance, I think, for this size array."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1469615872, "post_id": 38607147, "comment_id": 64607479, "body": "Sure, it&#39;s true :)"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 3, "last_activity_date": 1469606427, "creation_date": 1469606427, "answer_id": 38607147, "question_id": 38606796, "link": "https://stackoverflow.com/questions/38606796/how-can-if-shortened-with-the-same-satisfying-condition/38607147#38607147", "title": "how can if shortened with the same satisfying condition", "body": "<p>How about: </p>\n\n<pre><code>if [a, b, c].max &gt; 0\n  puts \"greater that zero\"\nelse\n  puts \"it is zero or less than zero\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 1910067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10061b5904b6c00a4b10647b96f0d69b?s=128&d=identicon&r=PG", "display_name": "pmannion", "link": "https://stackoverflow.com/users/1910067/pmannion"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469612596, "post_id": 38609163, "comment_id": 64605113, "body": "Correct. I mistakingly thought that all numbers should be positive."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1469613215, "post_id": 38609163, "comment_id": 64605563, "body": "positive? It doesn&#39;t exist"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1469613283, "post_id": 38609163, "comment_id": 64605610, "body": "@Ursus try it in irb."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1469613342, "post_id": 38609163, "comment_id": 64605662, "body": "<a href=\"http://ruby-doc.org/core-2.3.0/Numeric.html#method-i-positive-3F\" rel=\"nofollow noreferrer\">Numeric#positive?</a>"}, {"owner": {"reputation": 103, "user_id": 1910067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10061b5904b6c00a4b10647b96f0d69b?s=128&d=identicon&r=PG", "display_name": "pmannion", "link": "https://stackoverflow.com/users/1910067/pmannion"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1469613360, "post_id": 38609163, "comment_id": 64605676, "body": "@Ursus you can see it in action with the <a href=\"https://repl.it/CgZR/1\" rel=\"nofollow noreferrer\">link</a> provided in the answer."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1469613453, "post_id": 38609163, "comment_id": 64605753, "body": "Oh I see. It doesn&#39;t exist in Ruby 2.2.x"}], "tags": [], "owner": {"reputation": 103, "user_id": 1910067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10061b5904b6c00a4b10647b96f0d69b?s=128&d=identicon&r=PG", "display_name": "pmannion", "link": "https://stackoverflow.com/users/1910067/pmannion"}, "is_accepted": false, "score": 2, "last_activity_date": 1469612651, "last_edit_date": 1469612651, "creation_date": 1469612173, "answer_id": 38609163, "question_id": 38606796, "link": "https://stackoverflow.com/questions/38606796/how-can-if-shortened-with-the-same-satisfying-condition/38609163#38609163", "title": "how can if shortened with the same satisfying condition", "body": "<p>I like to use Ternary operators for a true or false situation.   </p>\n\n<pre><code>[a,b,c].any?(&amp;:positive?) ? \"greater that zero\" : \"it is zero or less than zero\"\n</code></pre>\n\n<p>Some examples:\n<a href=\"https://repl.it/CgZR/1\" rel=\"nofollow\">https://repl.it/CgZR/1</a></p>\n"}], "owner": {"reputation": 110, "user_id": 6433476, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f5fa9a1faa6c6886c21801d77d666ec7?s=128&d=identicon&r=PG&f=1", "display_name": "on-the-way", "link": "https://stackoverflow.com/users/6433476/on-the-way"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1469612651, "creation_date": 1469605375, "question_id": 38606796, "link": "https://stackoverflow.com/questions/38606796/how-can-if-shortened-with-the-same-satisfying-condition", "title": "how can if shortened with the same satisfying condition", "body": "<p>How can I shroten the condition because it has the same satisfying that greater than zero. Here is the code below:</p>\n\n<pre><code>a = 10\nb = 5\nc = 2\n\nif a &gt; 0 || b &gt; 0 || c &gt; 0\n  puts \"greater that zero\"\nelse\n  puts \"it is zero or less than zero\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "is_accepted": false, "score": 0, "last_activity_date": 1469604843, "creation_date": 1469604843, "answer_id": 38606620, "question_id": 38606544, "link": "https://stackoverflow.com/questions/38606544/an-error-occurred-while-installing-debug-inspector-0-0-2-and-bundler-cannot-c/38606620#38606620", "title": "An error occurred while installing debug_inspector (0.0.2), and Bundler cannot continue", "body": "<pre><code>/usr/bin/ld: cannot find -lgmp\n</code></pre>\n\n<p>You're missing the linux library gmp-devel </p>\n\n<p>Also, <a href=\"https://github.com/CocoaPods/CocoaPods/issues/1727\" rel=\"nofollow\">https://github.com/CocoaPods/CocoaPods/issues/1727</a> indicates that the later issues might be down to bundler not being able to locate a version of gcc on your linux box.</p>\n"}, {"tags": [], "owner": {"reputation": 670, "user_id": 4610973, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SdxFi.jpg?s=128&g=1", "display_name": "CryptoPiggy", "link": "https://stackoverflow.com/users/4610973/cryptopiggy"}, "is_accepted": false, "score": 1, "last_activity_date": 1469605065, "last_edit_date": 1592644375, "creation_date": 1469605065, "answer_id": 38606697, "question_id": 38606544, "link": "https://stackoverflow.com/questions/38606544/an-error-occurred-while-installing-debug-inspector-0-0-2-and-bundler-cannot-c/38606697#38606697", "title": "An error occurred while installing debug_inspector (0.0.2), and Bundler cannot continue", "body": "<p>You're missing build dependencies.  Do the following:</p>\n<blockquote>\n<p>$ sudo apt-get update</p>\n<p>$ sudo apt-get install build-essential</p>\n</blockquote>\n<p>Then run bundler again.</p>\n"}, {"tags": [], "owner": {"reputation": 7914, "user_id": 400745, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/qIDSJ.jpg?s=128&g=1", "display_name": "valk", "link": "https://stackoverflow.com/users/400745/valk"}, "is_accepted": false, "score": 1, "last_activity_date": 1472847102, "creation_date": 1472847102, "answer_id": 39300061, "question_id": 38606544, "link": "https://stackoverflow.com/questions/38606544/an-error-occurred-while-installing-debug-inspector-0-0-2-and-bundler-cannot-c/39300061#39300061", "title": "An error occurred while installing debug_inspector (0.0.2), and Bundler cannot continue", "body": "<p><code>/usr/bin/ld: cannot find -lgmp</code> means that it can't find the gmp library. Try running:</p>\n\n<p><code>sudo apt-get install libgmp3-dev</code></p>\n\n<p>Then <code>bundle</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 6144338, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/-X33t8HYbgE0/AAAAAAAAAAI/AAAAAAAAAKI/QV5dOT_ig_E/photo.jpg?sz=128", "display_name": "kishore sagar", "link": "https://stackoverflow.com/users/6144338/kishore-sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2105, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1472847102, "creation_date": 1469604601, "question_id": 38606544, "link": "https://stackoverflow.com/questions/38606544/an-error-occurred-while-installing-debug-inspector-0-0-2-and-bundler-cannot-c", "title": "An error occurred while installing debug_inspector (0.0.2), and Bundler cannot continue", "body": "<p>Migrating my rails app from 3.2 to 4.0.0 and ruby 2.2.2 to 2.2.4</p>\n\n<p>while doing bundle install am getting (An error occurred while installing debug_inspector (0.0.2), and Bundler cannot continue) issue.</p>\n\n<p>using ubuntu 14.04LTS.</p>\n\n<p><strong>This is what happens when i type in the bundle command</strong></p>\n\n<pre><code>Installing debug_inspector 0.0.2 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/share/rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20160727-7643-zx17cc.rb extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling debug_inspector.c\nlinking shared-object debug_inspector.so\n/usr/bin/ld: cannot find -lgmp\ncollect2: error: ld returned 1 exit status\nmake: *** [debug_inspector.so] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /home/vpidev/.rvm/gems/ruby-2.2.4@ping/gems/debug_inspector-0.0.2 for inspection.\nResults logged to /home/vpidev/.rvm/gems/ruby-2.2.4@ping/extensions/x86_64-linux/2.2.0/debug_inspector-0.0.2/gem_make.out\nUsing sass 3.4.22\nUsing will_paginate 3.0.7\nUsing uniform_notifier 1.10.0\nInstalling byebug 9.0.5 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/share/rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20160727-7643-1w1gc0x.rb extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling context.c\ncompiling locker.c\ncompiling threads.c\ncompiling breakpoint.c\ncompiling byebug.c\nlinking shared-object byebug/byebug.so\n/usr/bin/ld: cannot find -lgmp\ncollect2: error: ld returned 1 exit status\nmake: *** [byebug.so] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /home/vpidev/.rvm/gems/ruby-2.2.4@ping/gems/byebug-9.0.5 for inspection.\nResults logged to /home/vpidev/.rvm/gems/ruby-2.2.4@ping/extensions/x86_64-linux/2.2.0/byebug-9.0.5/gem_make.out\nUsing highline 1.7.8\nUsing net-ssh 3.2.0\nUsing mini_portile 0.6.2\nInstalling json 1.8.3 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/share/rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20160727-7643-6baclf.rb extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling generator.c\nlinking shared-object json/ext/generator.so\n/usr/bin/ld: cannot find -lgmp\ncollect2: error: ld returned 1 exit status\nmake: *** [generator.so] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /home/vpidev/.rvm/gems/ruby-2.2.4@ping/gems/json-1.8.3 for inspection.\nResults logged to /home/vpidev/.rvm/gems/ruby-2.2.4@ping/extensions/x86_64-linux/2.2.0/json-1.8.3/gem_make.out\nInstalling ffi 1.9.14 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/share/rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20160727-7643-e5hbz0.rb extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/share/rvm/rubies/ruby-2.2.4/bin/$(RUBY_BASE_NAME)\n    --with-ffi_c-dir\n    --without-ffi_c-dir\n    --with-ffi_c-include\n    --without-ffi_c-include=${ffi_c-dir}/include\n    --with-ffi_c-lib\n    --without-ffi_c-lib=${ffi_c-dir}/lib\n    --with-libffi-config\n    --without-libffi-config\n    --with-pkg-config\n    --without-pkg-config\n/usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:541:in `try_link0'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:556:in `try_link'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:637:in `try_ldflags'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:1780:in `pkg_config'\n    from extconf.rb:15:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /home/vpidev/.rvm/gems/ruby-2.2.4@ping/gems/ffi-1.9.14 for inspection.\nResults logged to /home/vpidev/.rvm/gems/ruby-2.2.4@ping/extensions/x86_64-linux/2.2.0/ffi-1.9.14/gem_make.out\nUsing cliver 0.3.2\nUsing sexp_processor 4.7.0\nUsing coffee-script-source 1.10.0\nUsing execjs 2.7.0\nUsing country_select 1.2.0\nUsing daemons 1.0.10\nUsing database_cleaner 1.5.3\nUsing debugger-ruby_core_source 1.3.8\nUsing docile 1.1.5\nUsing dynamic_form 1.1.4\nUsing encryptor 1.3.0\nInstalling eventmachine 1.2.0.1 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/share/rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20160727-7643-14d9qjy.rb extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/share/rvm/rubies/ruby-2.2.4/bin/$(RUBY_BASE_NAME)\n    --with-ssl-dir\n    --without-ssl-dir\n    --with-ssl-include\n    --without-ssl-include=${ssl-dir}/include\n    --with-ssl-lib\n    --without-ssl-lib=${ssl-dir}/lib\n    --with-openssl-config\n    --without-openssl-config\n    --with-pkg-config\n    --without-pkg-config\n/usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:541:in `try_link0'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:556:in `try_link'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:637:in `try_ldflags'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:1780:in `pkg_config'\n    from extconf.rb:65:in `pkg_config_wrapper'\n    from extconf.rb:92:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /home/vpidev/.rvm/gems/ruby-2.2.4@ping/gems/eventmachine-1.2.0.1 for inspection.\nResults logged to /home/vpidev/.rvm/gems/ruby-2.2.4@ping/extensions/x86_64-linux/2.2.0/eventmachine-1.2.0.1/gem_make.out\nUsing gem_plugin 0.2.3\nUsing tilt 2.0.5\nUsing hashie 3.4.4\nUsing headless 2.2.3\nUsing multi_xml 0.5.5\nInstalling libxml-ruby 2.7.0 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/share/rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20160727-7643-ftfa2z.rb extconf.rb\nchecking for socket() in -lsocket... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/share/rvm/rubies/ruby-2.2.4/bin/$(RUBY_BASE_NAME)\n    --with-iconv-dir\n    --without-iconv-dir\n    --with-iconv-include\n    --without-iconv-include=${iconv-dir}/include\n    --with-iconv-lib\n    --without-iconv-lib=${iconv-dir}/lib\n    --with-zlib-dir\n    --without-zlib-dir\n    --with-zlib-include\n    --without-zlib-include=${zlib-dir}/include\n    --with-zlib-lib\n    --without-zlib-lib=${zlib-dir}/lib\n    --with-socketlib\n    --without-socketlib\n/usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:541:in `try_link0'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:556:in `try_link'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:735:in `try_func'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:966:in `block in have_library'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:911:in `block in checking_for'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:351:in `block (2 levels) in postpone'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:321:in `open'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:351:in `block in postpone'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:321:in `open'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:347:in `postpone'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:910:in `checking_for'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:961:in `have_library'\n    from extconf.rb:29:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /home/vpidev/.rvm/gems/ruby-2.2.4@ping/gems/libxml-ruby-2.7.0 for inspection.\nResults logged to /home/vpidev/.rvm/gems/ruby-2.2.4@ping/extensions/x86_64-linux/2.2.0/libxml-ruby-2.7.0/gem_make.out\nUsing light-daemon 0.9.7\nUsing systemu 2.4.2\nUsing memcache-client 1.8.5\nUsing metaclass 0.0.4\nUsing method_source 0.8.2\nUsing mustache 1.0.3\nInstalling mysql2 0.3.21 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/share/rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20160727-7643-1dru9tp.rb extconf.rb\nchecking for ruby/thread.h... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/share/rvm/rubies/ruby-2.2.4/bin/$(RUBY_BASE_NAME)\n/usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:587:in `try_cpp'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:1060:in `block in have_header'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:911:in `block in checking_for'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:351:in `block (2 levels) in postpone'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:321:in `open'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:351:in `block in postpone'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:321:in `open'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:347:in `postpone'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:910:in `checking_for'\n    from /usr/share/rvm/rubies/ruby-2.2.4/lib/ruby/2.2.0/mkmf.rb:1059:in `have_header'\n    from extconf.rb:15:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /home/vpidev/.rvm/gems/ruby-2.2.4@ping/gems/mysql2-0.3.21 for inspection.\nResults logged to /home/vpidev/.rvm/gems/ruby-2.2.4@ping/extensions/x86_64-linux/2.2.0/mysql2-0.3.21/gem_make.out\nUsing newrelic_rpm 3.9.9.275\nUsing nori 1.0.2\nInstalling oj 2.17.1 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/share/rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20160727-7643-xze21i.rb extconf.rb\n&gt;&gt;&gt;&gt;&gt; Creating Makefile for ruby version 2.2.4 on x86_64-linux &lt;&lt;&lt;&lt;&lt;\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling err.c\ncompiling strict.c\ncompiling parse.c\ncompiling cache8.c\ncompiling scp.c\ncompiling fast.c\ncompiling odd.c\ncompiling reader.c\ncompiling compat.c\ncompiling sparse.c\ncompiling object.c\ncompiling hash.c\ncompiling resolve.c\ncompiling saj.c\ncompiling oj.c\ncompiling hash_test.c\ncompiling dump.c\ncompiling circarray.c\ncompiling val_stack.c\nlinking shared-object oj/oj.so\n/usr/bin/ld: cannot find -lgmp\ncollect2: error: ld returned 1 exit status\nmake: *** [oj.so] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /home/vpidev/.rvm/gems/ruby-2.2.4@ping/gems/oj-2.17.1 for inspection.\nResults logged to /home/vpidev/.rvm/gems/ruby-2.2.4@ping/extensions/x86_64-linux/2.2.0/oj-2.17.1/gem_make.out\nUsing parallel 1.9.0\nUsing websocket-extensions 0.1.2\nUsing power_assert 0.3.0\nUsing slop 3.6.0\nUsing rails-simple-search 0.9.9\nUsing require_all 1.3.3\nUsing ruby-progressbar 1.8.1\nUsing rbx-require-relative 0.0.9\nInstalling rjb 1.5.3 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /usr/share/rvm/rubies/ruby-2.2.4/bin/ruby -r ./siteconf20160727-7643-r362l.rb extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/share/rvm/rubies/ruby-2.2.4/bin/$(RUBY_BASE_NAME)\nextconf.rb:53:in `&lt;main&gt;': JAVA_HOME is not set. (RuntimeError)\n\nextconf failed, exit code 1\n\nGem files will remain installed in /home/vpidev/.rvm/gems/ruby-2.2.4@ping/gems/rjb-1.5.3 for inspection.\nResults logged to /home/vpidev/.rvm/gems/ruby-2.2.4@ping/extensions/x86_64-linux/2.2.0/rjb-1.5.3/gem_make.out\nUsing rubyzip 1.2.0\nUsing rubygems-update 1.4.2\nUsing websocket 1.2.3\nUsing simplecov-html 0.10.0\nUsing temple 0.7.7\nUsing tabs_on_rails 1.3.3\nUsing minitest-test 1.1.0\nUsing activesupport 4.0.13\nUsing gyoku 1.0.0\nUsing rack-test 0.6.3\nUsing httpi 0.9.5\nUsing rack-utf8_sanitizer 1.3.2\nUsing mime-types 3.1\nUsing sprockets 3.6.3\nUsing concurrent-ruby-ext 1.0.2\nUsing fastimage 1.7.0\nUsing turn 0.9.7\nUsing better_errors 2.1.1\n\n\nAn error occurred while installing debug_inspector (0.0.2), and Bundler cannot continue.\nMake sure that `gem install debug_inspector -v '0.0.2'` succeeds before bundling.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1469605236, "post_id": 38606348, "comment_id": 64600222, "body": "Not sure but try this: <code>expect(User).to receive(:new).with({name: &#39;Naik&#39;, password: &#39;secret&#39;, password_confirmation: &#39;secret&#39;}.with_indifferent_access)</code>"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1469605401, "post_id": 38606348, "comment_id": 64600324, "body": "you should try  <code>params = ActionController::Parameters.new(         {name: &#39;Naik&#39;, password: &#39;secret&#39;, password_confirmation: &#39;secret&#39;})       user_params = UsersController::UserParams.build(params)       expect(user_params).to eq({name: &#39;Naik&#39;, password: &#39;secret&#39;, password_confirmation: &#39;secret&#39;}.with_indifferent_access)</code>"}, {"owner": {"reputation": 380, "user_id": 4731827, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/944961672183051/picture?type=large", "display_name": "Pratik Naik", "link": "https://stackoverflow.com/users/4731827/pratik-naik"}, "edited": false, "score": 0, "creation_date": 1469640149, "post_id": 38606348, "comment_id": 64624639, "body": "I tried them didn`t worked."}, {"owner": {"reputation": 569, "user_id": 1501938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yv3Vp.jpg?s=128&g=1", "display_name": "Ilya Bodrov-Krukowski", "link": "https://stackoverflow.com/users/1501938/ilya-bodrov-krukowski"}, "edited": false, "score": 0, "creation_date": 1469897644, "post_id": 38606348, "comment_id": 64732351, "body": "Try saying <code>expect(User).to receive(:new).with({name: &#39;Naik&#39;, password: &#39;secret&#39;, password_confirmation: &#39;secret&#39;}).and_return(user)</code> Some examples can be found here and this definetely used to be working <a href=\"https://github.com/learnable-content/RSpec-collection/blob/controller_testing/spec/controllers/albums_controller_spec.rb#L3\" rel=\"nofollow noreferrer\">github.com/learnable-content/RSpec-collection/blob/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "is_accepted": false, "score": 2, "last_activity_date": 1469648765, "last_edit_date": 1469648765, "creation_date": 1469606303, "answer_id": 38607105, "question_id": 38606348, "link": "https://stackoverflow.com/questions/38606348/rails-actioncontroller-parameters-error/38607105#38607105", "title": "Rails ActionController parameters Error", "body": "<p>You can do <code>to_h</code> on the <code>ActionController::Parameters</code>. Then all permitted parameters will be in that hash:</p>\n\n<pre><code>params = ActionController::Parameters.new({\n  name: 'Senjougahara Hitagi',\n  oddity: 'Heavy stone crab'\n})\nparams.to_h # =&gt; {}\n\nsafe_params = params.permit(:name)\nsafe_params.to_h # =&gt; { name: 'Senjougahara Hitagi' }\n</code></pre>\n\n<p>I'm no rspec pro but I think you can do:</p>\n\n<pre><code>expect(controller.params.to_h).to be({...})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 569, "user_id": 1501938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yv3Vp.jpg?s=128&g=1", "display_name": "Ilya Bodrov-Krukowski", "link": "https://stackoverflow.com/users/1501938/ilya-bodrov-krukowski"}, "edited": false, "score": 0, "creation_date": 1469900899, "post_id": 38676439, "comment_id": 64733230, "body": "Note the <code>and_return(user)</code>, not <code>and_return(User)</code> - in the latter case you get not an instance of the class, but the class itself."}, {"owner": {"reputation": 380, "user_id": 4731827, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/944961672183051/picture?type=large", "display_name": "Pratik Naik", "link": "https://stackoverflow.com/users/4731827/pratik-naik"}, "edited": false, "score": 0, "creation_date": 1469901905, "post_id": 38676439, "comment_id": 64733517, "body": "1) UsersController Post /create should create user      Failure/Error: let(:user){build(:user)}            NoMethodError:        undefined method <code>build&#39; for #&lt;RSpec::ExampleGroups::UsersController::PostCreate:0x007fb7&zwnj;&#8203;4b5dc820&gt;      # .&#47;spec&#47;controllers&#47;users_controller_spec.rb:18:in </code>block (3 levels) in &lt;top (required)&gt;&#39;      # ./spec/controllers/users_controller_spec.rb:21:in `block (3 levels) in &lt;top (required)&gt;&#39;"}, {"owner": {"reputation": 569, "user_id": 1501938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yv3Vp.jpg?s=128&g=1", "display_name": "Ilya Bodrov-Krukowski", "link": "https://stackoverflow.com/users/1501938/ilya-bodrov-krukowski"}, "reply_to_user": {"reputation": 380, "user_id": 4731827, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/944961672183051/picture?type=large", "display_name": "Pratik Naik", "link": "https://stackoverflow.com/users/4731827/pratik-naik"}, "edited": false, "score": 0, "creation_date": 1469902551, "post_id": 38676439, "comment_id": 64733727, "body": "Seems like you have some problems with FactoryGirl and that&#39;s a totally different story. To find example configuration you may refer to <a href=\"https://github.com/learnable-content/RSpec-collection/blob/features/spec/support/factory_girl.rb\" rel=\"nofollow noreferrer\">github.com/learnable-content/RSpec-collection/blob/features/&zwnj;&#8203;&hellip;</a>"}], "tags": [], "owner": {"reputation": 569, "user_id": 1501938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yv3Vp.jpg?s=128&g=1", "display_name": "Ilya Bodrov-Krukowski", "link": "https://stackoverflow.com/users/1501938/ilya-bodrov-krukowski"}, "is_accepted": true, "score": 1, "last_activity_date": 1469900801, "last_edit_date": 1469900801, "creation_date": 1469898292, "answer_id": 38676439, "question_id": 38606348, "link": "https://stackoverflow.com/questions/38606348/rails-actioncontroller-parameters-error/38676439#38676439", "title": "Rails ActionController parameters Error", "body": "<p>This seems to be an issue only when using Rails 5. Here is how this can be fixed: <a href=\"https://stackoverflow.com/questions/38557529/how-to-expect-a-params-hash-in-rspec-in-rails-5/38558338\">How to expect a Params hash in RSpec in Rails 5?</a></p>\n\n<p>Basically this should be:</p>\n\n<pre><code>expect(User).to receive(:new).with(ActionController::Parameters.new( name: 'Naik', password: 'secret',password_confirmation: 'secret').permit(:name, :password, :password_confirmation)).and_return(user)\nexpect(user).to receive(:save).and_return(true) # stub the `save` method\npost :create,  user: {name: 'Naik', password: 'secret', password_confirmation: 'secret'}\n# ...and then your expectations\n</code></pre>\n"}], "owner": {"reputation": 380, "user_id": 4731827, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/944961672183051/picture?type=large", "display_name": "Pratik Naik", "link": "https://stackoverflow.com/users/4731827/pratik-naik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1482, "favorite_count": 0, "accepted_answer_id": 38676439, "answer_count": 2, "score": 4, "last_activity_date": 1469900801, "creation_date": 1469604041, "question_id": 38606348, "link": "https://stackoverflow.com/questions/38606348/rails-actioncontroller-parameters-error", "title": "Rails ActionController parameters Error", "body": "<p>This is my create method in users_controller.rb</p>\n\n<pre><code>def create\n@user = User.new(user_params)\n\nrespond_to do |format|\n  if @user.save\n    format.html { redirect_to users_url, notice: 'User was successfully created.' }\n    format.json { render :show, status: :created, location: @user }\n  else\n    format.html { render :new }\n    format.json { render json: @user.errors, status: :unprocessable_entity }\n  end\nend\nend \n\nprivate\n  def set_user\n    @user = User.find(params[:id])\n  end\n\n  def user_params\n    params.require(:user).permit(:name, :password, :password_confirmation)\n  end\n</code></pre>\n\n<p>end</p>\n\n<p>And This is my Users_controllers_spec.rb file</p>\n\n<pre><code> require 'rails_helper'\n\n RSpec.describe UsersController, type: :controller do\n\n  describe \"Post /create\" do\n   let(:user){build(:user)}\n   it \"should create user\" do\n     expect(User).to receive(:new).with({name: 'Naik', password: 'secret', password_confirmation: 'secret'}).and_return(User)\n    post :create,  user: {name: 'Naik', password: 'secret', password_confirmation: 'secret'}\n    expect(flash[:success]).to eq(\"User was successfully created.\")\n    expect(response).to redirect_to(users_path)\n   end\n  end\nend \n</code></pre>\n\n<p>And this is the error I am getting. Am I missing something? I am new to Rspec testing so any advice on how to solve it would be appreciated.</p>\n\n<p><a href=\"https://i.stack.imgur.com/PwF82.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PwF82.png\" alt=\"Anyone has faced this error before ?\"></a></p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1469604651, "post_id": 38606063, "comment_id": 64599803, "body": "Can you paste the <code>params</code> from your controller which results this?"}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1469604866, "post_id": 38606063, "comment_id": 64599967, "body": "Actually seeing your controller the issue seems to me of the nested form, just check when you are updating the <code>post</code> then are you getting the <code>id</code> of assets? If not rails treats it as a new <code>asset</code> as you can have only one <code>poster</code> it deletes the old one and adds a new one."}, {"owner": {"reputation": 41, "user_id": 2740731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576c1370b62704d3f8aad297da617dca?s=128&d=identicon&r=PG&f=1", "display_name": "ned", "link": "https://stackoverflow.com/users/2740731/ned"}, "reply_to_user": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 1, "creation_date": 1469604983, "post_id": 38606063, "comment_id": 64600042, "body": "<code>Parameters: {&quot;utf8&quot;=&gt;&quot;\u0432\u045a\u201c&quot;, &quot;authenticity_token&quot;=&gt;&quot;yZhNCObohxsYq&#47;pU136cfmPv72l9RtoySC35n&zwnj;&#8203;sW0h7h82UIyysnyWY8Kx&zwnj;&#8203;1h84YbKLlTO155jPlkLV&zwnj;&#8203;ppJYDIL1Q==&quot;, &quot;post&quot;=&gt;{&quot;title&quot;=&gt;&quot;Post Title&quot;, &quot;description&quot;=&gt;&quot;Post Description&quot;, &quot;content&quot;=&gt;&quot;&lt;p&gt;Post Content&lt;&#47;p&gt;&quot;, &quot;category_ids&quot;=&gt;[&quot;&quot;], &quot;poster_attributes&quot;=&gt;{&quot;title&quot;=&gt;&quot;Poster Title&quot;, &quot;id&quot;=&gt;&quot;16&quot;}}, &quot;commit&quot;=&gt;&quot;\u0431\u0453\u0404\u0431\u0453\u2022\u0431\u0453\u0459\u0431\u0453\ufffd\u0431\u0453\u0459\u0431\u0453\u201d\u0431\u0453\u2018\u0431\u0453\u201d\u0431\u0453\u2018\u0431\u0453\ufffd\u0431\u0453\u040e \u0431\u0453\u0401\u0431\u0453\u201d\u0431\u0453\u045a\u0431\u0453\u0452\u0431\u0453&#174;\u0431\u0453\u2022\u0431\u0453\u0452&quot;, &quot;blog_id&quot;=&gt;&quot;2&quot;, &quot;id&quot;=&gt;&quot;3&quot;}</code>  but rails says <code>Unpermitted parameter: id</code>"}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1469605138, "post_id": 38606063, "comment_id": 64600160, "body": "Permit the <code>id</code> in strong parameters, <code>:poster_attributes =&gt; [:title, :id]</code> and try if it works"}, {"owner": {"reputation": 41, "user_id": 2740731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576c1370b62704d3f8aad297da617dca?s=128&d=identicon&r=PG&f=1", "display_name": "ned", "link": "https://stackoverflow.com/users/2740731/ned"}, "reply_to_user": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1469605371, "post_id": 38606063, "comment_id": 64600305, "body": "yes, this will run update query, thanks :) i will remove :id on create action?"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 2740731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576c1370b62704d3f8aad297da617dca?s=128&d=identicon&r=PG&f=1", "display_name": "ned", "link": "https://stackoverflow.com/users/2740731/ned"}, "edited": false, "score": 0, "creation_date": 1469605909, "post_id": 38606822, "comment_id": 64600625, "body": "Yes it works, but is it safe? if user change in html  <code>&lt;input type=&quot;hidden&quot; value=&quot;17&quot; name=&quot;post[poster_attributes][id]&quot; id=&quot;post_poster_attributes_id&quot; &#47;&gt;</code> value?"}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "reply_to_user": {"reputation": 41, "user_id": 2740731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576c1370b62704d3f8aad297da617dca?s=128&d=identicon&r=PG&f=1", "display_name": "ned", "link": "https://stackoverflow.com/users/2740731/ned"}, "edited": false, "score": 0, "creation_date": 1469606889, "post_id": 38606822, "comment_id": 64601274, "body": "Hidden fields are never safe but for <code>nested_form</code> we only have this option so that the existing objects are updated. Or you may do it using some custom code."}, {"owner": {"reputation": 41, "user_id": 2740731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576c1370b62704d3f8aad297da617dca?s=128&d=identicon&r=PG&f=1", "display_name": "ned", "link": "https://stackoverflow.com/users/2740731/ned"}, "edited": false, "score": 0, "creation_date": 1469608065, "post_id": 38606822, "comment_id": 64602025, "body": "If i change id value in html rails raise exception <code>Couldn&#39;t find Poster with ID=18 for Post with ID=3</code>  I think it is safe"}], "tags": [], "owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "is_accepted": true, "score": 0, "last_activity_date": 1469605455, "creation_date": 1469605455, "answer_id": 38606822, "question_id": 38606063, "link": "https://stackoverflow.com/questions/38606063/ruby-on-rails-polymorphic-association-on-update-deleting-and-insert-but-it-will/38606822#38606822", "title": "Ruby on rails polymorphic association on update deleting and insert, but it will update", "body": "<p>In the strong parameters you have not permitted <code>id</code> for <code>poster_attributes</code> so just permit it and that should work:</p>\n\n<pre><code>def post_params\n  params.require(:post).permit(:title, :description, :content, category_ids: [], :poster_attributes =&gt; [:title, :id])\nend\n</code></pre>\n\n<p>As you have a <code>has_one</code> relationship so when you <code>update</code> the <code>post</code> it sends the title for the <code>poster</code> and as it doesn't contains the <code>id</code> attribute in it rails treats it as a new <code>poster</code> for the <code>post</code> and deletes the old one and creates a new one. So if you permit the <code>id</code> in the strong parameters as you are receiving it from the form it will update the existing <code>poster</code> only.</p>\n"}], "owner": {"reputation": 41, "user_id": 2740731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/576c1370b62704d3f8aad297da617dca?s=128&d=identicon&r=PG&f=1", "display_name": "ned", "link": "https://stackoverflow.com/users/2740731/ned"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 38606822, "answer_count": 1, "score": 2, "last_activity_date": 1469734215, "creation_date": 1469603341, "last_edit_date": 1469734215, "question_id": 38606063, "link": "https://stackoverflow.com/questions/38606063/ruby-on-rails-polymorphic-association-on-update-deleting-and-insert-but-it-will", "title": "Ruby on rails polymorphic association on update deleting and insert, but it will update", "body": "<p>When I update model with nested attributes rails run query:</p>\n\n<pre><code> DELETE FROM \"assets\" WHERE \"assets\".\"id\" = ?  [[\"id\", 14]]\n UPDATE \"posts\" SET ...\n INSERT INTO \"assets\" (\"title\", \"assetable_id\", \"assetable_type\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?, ?)  [[\"title\", \"Poster Title\"], [\"assetable_id\", 3], [\"assetable_type\", \"Post\"], [\"created_at\", \"2016-07-27 07:01:38.054681\"], [\"updated_at\", \"2016-07-27 07:01:38.054681\"]]\n</code></pre>\n\n<p>But I want update, not delete/insert. Yes, if remove <code>dependent: :destroy</code> from model it run update query, but I want destroy asset when post is destroy. </p>\n\n<p>If I have stored more info in assert model, when update it will lost.</p>\n\n<p>This is bug? </p>\n\n<p>My models:</p>\n\n<pre><code>class Asset &lt; ActiveRecord::Base\n\n  belongs_to :assetable, polymorphic: true\n\nend\n\nclass Post &lt; ActiveRecord::Base\n\n  has_one :poster, as: :assetable, class_name: 'Poster', dependent: :destroy\n  accepts_nested_attributes_for :poster\n\nend\n\nclass Poster &lt; Asset\n\nend\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n\n  ...\n\n  def update\n    if @post.update(post_params)\n      redirect_to blogger_blog_posts_path(@blog)\n    else\n      @categories = Category.full_tree\n      render 'edit'\n    end\n  end\n\n  ...\n\n  def post_params\n    params.require(:post).permit(:title, :description, :content, category_ids: [], :poster_attributes =&gt; [:title])\n  end\nend\n</code></pre>\n\n<p>rails version 4.2.5.1</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "gitlab"], "answers": [{"comments": [{"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1469602926, "post_id": 38605792, "comment_id": 64598674, "body": "From source: maybe a symlink issue: <a href=\"https://gitlab.com/gitlab-org/gitlab-ce/issues/899#note_2558643\" rel=\"nofollow noreferrer\">gitlab.com/gitlab-org/gitlab-ce/issues/899#note_2558643</a>"}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 2, "last_activity_date": 1469602598, "creation_date": 1469602598, "answer_id": 38605792, "question_id": 38605707, "link": "https://stackoverflow.com/questions/38605707/linux-can-not-find-gitlab-rake/38605792#38605792", "title": "Linux can not find gitlab-rake?", "body": "<p>It depends where gitlab is installed.<br>\nFor example:</p>\n\n<pre><code>PATH=$PATH:/opt/gitlab/bin\nexport PATH\n</code></pre>\n\n<p>Check if <code>gitlab-rake</code> is there in <code>/opt/gitlab/bin</code>.</p>\n\n<p><a href=\"https://gitlab.com/gitlab-org/omnibus-gitlab/merge_requests/331\" rel=\"nofollow\">There should be symlinks in /usr/bin</a>.<br>\nIf not, maybe you have installed GitLab from source (<code>sudo -u git -H bundle exec rake</code>)</p>\n"}], "owner": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3451, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1469602775, "creation_date": 1469602320, "last_edit_date": 1469602775, "question_id": 38605707, "link": "https://stackoverflow.com/questions/38605707/linux-can-not-find-gitlab-rake", "title": "Linux can not find gitlab-rake?", "body": "<p>So I try to do a backup of git. I have found this script (here:<a href=\"https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/raketasks/backup_restore.md\" rel=\"nofollow\">https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/raketasks/backup_restore.md</a>)<br>\nBut if I use this command it says that the command is not found. What am I doing wrong?</p>\n\n<pre><code>root@gitlab-test git/gitlab# sudo gitlab-rake gitlab:backup:create SKIP=db,uploads                                                                                                            \n    sudo: gitlab-rake: command not found\n</code></pre>\n\n<p>Also I tried the command</p>\n\n<p><code>sudo -u git -H bundle exec rake gitlab:backup:create RAILS_ENV=production</code></p>\n\n<p>But with that the command stopped at <code>upload.rb</code> with a <code>Errno::ENOENT: No such file or directory</code>. </p>\n"}, {"tags": ["ruby", "rubocop"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1469604353, "post_id": 38605669, "comment_id": 64599612, "body": "Put comments <code># rubocop:disable Style&#47;MethodMissing</code> before the line with offence and <code># rubocop:enable Style&#47;MethodMissing</code> just after. Rubocop is just a cop and it might make mistakes."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1469605940, "post_id": 38605669, "comment_id": 64600641, "body": "By the way: if you simply want to pass on the same arguments that you received, you can just call <code>super</code> without an argument list. This has nothing to do with your problem, which seems to be that Rubocop is simply not able to see that there is a path which leads to a <code>super</code> call (remember, static analysis of pretty much anything even remotely interesting is equivalent to solving the Halting Problem, and Ruby isn&#39;t exactly designed to be easily analyzable statically, to boot). Or, maybe, it actually <i>does</i> shut it up."}], "answers": [{"comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 1, "creation_date": 1470036881, "post_id": 38617724, "comment_id": 64765311, "body": "Thanks for getting in on this one @Justin. I think you might have identified another, missing cop. :-) Something along the lines of <code>Lint&#47;UselessSuperArguments</code>."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 7, "last_activity_date": 1469634360, "creation_date": 1469634360, "answer_id": 38617724, "question_id": 38605669, "link": "https://stackoverflow.com/questions/38605669/how-to-solve-rubocop-respond-to-missing-offence/38617724#38617724", "title": "How to solve Rubocop respond_to_missing? offence", "body": "<p>Rubocop expects <code>super</code> to be called without arguments. As the arguments you are passing to <code>super</code> are the same as those you received, you can simply remove the arguments:</p>\n\n<pre><code>def method_missing(name, *args, &amp;block)\n  if name =~ /(.+)\\=/\n    self[$1.to_sym] = args[0]\n  elsif has_index?(name)\n    self[name]\n  else\n    super\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6271442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ICFoC.png?s=128&g=1", "display_name": "Mobile Perpetuum", "link": "https://stackoverflow.com/users/6271442/mobile-perpetuum"}, "is_accepted": false, "score": 0, "last_activity_date": 1531785099, "creation_date": 1531785099, "answer_id": 51371440, "question_id": 38605669, "link": "https://stackoverflow.com/questions/38605669/how-to-solve-rubocop-respond-to-missing-offence/51371440#51371440", "title": "How to solve Rubocop respond_to_missing? offence", "body": "<p>Maybe you should try <code>def respond_to_missing?(name, include_private=false)</code> instead?</p>\n"}], "owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3604, "favorite_count": 0, "accepted_answer_id": 38617724, "answer_count": 2, "score": 7, "last_activity_date": 1531785099, "creation_date": 1469602187, "question_id": 38605669, "link": "https://stackoverflow.com/questions/38605669/how-to-solve-rubocop-respond-to-missing-offence", "title": "How to solve Rubocop respond_to_missing? offence", "body": "<p>Rubocop gives me the following offence</p>\n\n<pre><code>lib/daru/vector.rb:1182:5: C: Style/MethodMissing: When using method_missing, define respond_to_missing? and fall back on super.\n    def method_missing(name, *args, &amp;block) ...\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>The method missing is defined as:</p>\n\n<pre><code>def method_missing(name, *args, &amp;block)\n  if name =~ /(.+)\\=/\n    self[$1.to_sym] = args[0]\n  elsif has_index?(name)\n    self[name]\n  else\n    super(name, *args, &amp;block)\n  end\nend\n</code></pre>\n\n<p>I tried fixing it with the below code sighting an example from <a href=\"https://robots.thoughtbot.com/always-define-respond-to-missing-when-overriding\" rel=\"noreferrer\">here</a></p>\n\n<pre><code>def respond_to_missing?(method_name, include_private=false)\n  (name =~ /(.+)\\=/) || has_index?(name) || super\nend\n</code></pre>\n\n<p>But now Rubocop give me the follow offence:</p>\n\n<pre><code>lib/daru/vector.rb:1182:5: C: Style/MethodMissing: When using method_missing, fall back on super.\n    def method_missing(name, *args, &amp;block) ...\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>I can't seem to figure out what's wrong. As you can see I'm falling back on super in the else block.</p>\n"}, {"tags": ["ruby", "class", "null", "boolean"], "comments": [{"owner": {"reputation": 2341, "user_id": 6047960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a37bc0cc9fe7dd8dda91e4f4de592ae?s=128&d=identicon&r=PG&f=1", "display_name": "Karen B", "link": "https://stackoverflow.com/users/6047960/karen-b"}, "edited": false, "score": 0, "creation_date": 1469601876, "post_id": 38605521, "comment_id": 64598032, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19973771/implement-truthiness-in-ruby-class\">Implement truthiness in Ruby class</a>"}, {"owner": {"reputation": 670, "user_id": 4610973, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SdxFi.jpg?s=128&g=1", "display_name": "CryptoPiggy", "link": "https://stackoverflow.com/users/4610973/cryptopiggy"}, "edited": false, "score": 0, "creation_date": 1469602052, "post_id": 38605521, "comment_id": 64598126, "body": "Everything in ruby is true except for nil and false."}], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": true, "score": 2, "last_activity_date": 1469602195, "creation_date": 1469602195, "answer_id": 38605672, "question_id": 38605521, "link": "https://stackoverflow.com/questions/38605521/ruby-writing-type-checker-for-booleans/38605672#38605672", "title": "Ruby writing type checker for booleans", "body": "<p><code>||</code> doesn't work as you expected. For example, </p>\n\n<pre><code>input == true || false\n</code></pre>\n\n<p>is testing if </p>\n\n<pre><code>input == true\n</code></pre>\n\n<p>is truthy, or if </p>\n\n<pre><code>false\n</code></pre>\n\n<p>is truthy. Note that the latter isn't testing <code>input == false</code>. And that is your main misunderstanding.</p>\n"}, {"tags": [], "owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "is_accepted": false, "score": 0, "last_activity_date": 1469620346, "creation_date": 1469620346, "answer_id": 38612190, "question_id": 38605521, "link": "https://stackoverflow.com/questions/38605521/ruby-writing-type-checker-for-booleans/38612190#38612190", "title": "Ruby writing type checker for booleans", "body": "<p>Ruby does not have a built-in method to convert values to Boolean. That may be by design, as the only false values in Ruby are false and nil. All other values (empty string, empty array, empty hash, 0) are true. There, however, a \"hack\" that can be used to convert values to Boolean: it\u2019s called \"bang-bang\" or \"double-bang\" and it consists of two Boolean negation operators, like this:</p>\n\n<pre><code>!!nil\n=&gt; false\n\n!!false\n=&gt; false\n\n!!\"\"\n=&gt; true\n\n!!0\n=&gt; true\n\n!![]\n=&gt; true\n\n!!{}\n=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 38605672, "answer_count": 2, "score": 0, "last_activity_date": 1469620346, "creation_date": 1469601747, "question_id": 38605521, "link": "https://stackoverflow.com/questions/38605521/ruby-writing-type-checker-for-booleans", "title": "Ruby writing type checker for booleans", "body": "<p>I'm working on this exercise on Codewars (<a href=\"https://www.codewars.com/kata/typer-dot-js/\" rel=\"nofollow\">https://www.codewars.com/kata/typer-dot-js/</a>), and I'm having trouble writing a type checker for booleans.</p>\n\n<p>Based on my understanding, booleans either return true or false. But I've also read a lot of people saying that every object in Ruby is a boolean except for nil. I tried writing the method in a bunch of different ways, but I'm just not getting it. Below are some of the tries.</p>\n\n<pre><code>class Typer\n\ndef self.is_boolean? input\n  input == true || false\nend\n\ndef self.is_boolean? input\n  input.class == TrueClass || FalseClass\nend\n\ndef self.is_boolean? input\n  input == nil ? false : true\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "wit.ai"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469613417, "post_id": 38605435, "comment_id": 64605729, "body": "use a debugger and step through your code to find where the loop is happening"}, {"owner": {"reputation": 739, "user_id": 2515660, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0f24d99c818ffc04b824cf72afbee4ce?s=128&d=identicon&r=PG&f=1", "display_name": "red-devil", "link": "https://stackoverflow.com/users/2515660/red-devil"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469615892, "post_id": 38605435, "comment_id": 64607488, "body": "Its the call to the wit.ai client which is happening again and again. No bug related to the code.  Something similar to polling. Looks like something related with wit.ai. Couldn&#39;t find a work around"}, {"owner": {"reputation": 739, "user_id": 2515660, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0f24d99c818ffc04b824cf72afbee4ce?s=128&d=identicon&r=PG&f=1", "display_name": "red-devil", "link": "https://stackoverflow.com/users/2515660/red-devil"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469619260, "post_id": 38605435, "comment_id": 64609768, "body": "Debugging this by creating another API call, I realised its the issue with  <code>render :json =&gt; response, :status =&gt; 200</code> itself.. any idea what&#39;s happening?"}, {"owner": {"reputation": 739, "user_id": 2515660, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0f24d99c818ffc04b824cf72afbee4ce?s=128&d=identicon&r=PG&f=1", "display_name": "red-devil", "link": "https://stackoverflow.com/users/2515660/red-devil"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1469620009, "post_id": 38605435, "comment_id": 64610324, "body": "Ahh! it was happening due to the name of the function in the API Controller, i.e. <code>response</code>.. Seems like its an inbuilt function for ROR.."}], "answers": [{"tags": [], "owner": {"reputation": 739, "user_id": 2515660, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0f24d99c818ffc04b824cf72afbee4ce?s=128&d=identicon&r=PG&f=1", "display_name": "red-devil", "link": "https://stackoverflow.com/users/2515660/red-devil"}, "is_accepted": false, "score": 0, "last_activity_date": 1469620029, "creation_date": 1469620029, "answer_id": 38612086, "question_id": 38605435, "link": "https://stackoverflow.com/questions/38605435/wit-ai-ruby-gem-repeated-calls-call-doesnt-end/38612086#38612086", "title": "wit.ai Ruby Gem, repeated calls, call doesn&#39;t end", "body": "<p>Ahh! it was happening due to the name of the function in the API Controller, i.e. <code>response</code>.. Seems like its an inbuilt function for ROR..</p>\n"}], "owner": {"reputation": 739, "user_id": 2515660, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0f24d99c818ffc04b824cf72afbee4ce?s=128&d=identicon&r=PG&f=1", "display_name": "red-devil", "link": "https://stackoverflow.com/users/2515660/red-devil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469620029, "creation_date": 1469601448, "question_id": 38605435, "link": "https://stackoverflow.com/questions/38605435/wit-ai-ruby-gem-repeated-calls-call-doesnt-end", "title": "wit.ai Ruby Gem, repeated calls, call doesn&#39;t end", "body": "<p>I'm using a <a href=\"https://github.com/wit-ai/wit-ruby\" rel=\"nofollow\">Ruby Gem for wit.ai</a>, and have created an API in ROR that queries the wit.ai client.</p>\n\n<p>But unexpectedly the method in the API keeps on calling the client method repeatedly, even after getting the response. </p>\n\n<p>Because of which the API method never renders the JSON response.</p>\n\n<p>How can I resolve this issue? Why is this happening?</p>\n\n<p>It works perfectly fine if I do the same thing from Rails Console.</p>\n\n<p>ApiController</p>\n\n<pre><code> module Api\n\n   module V0\n\n     class ApiController &lt; ApplicationController\n\n        def response\n            q = params[:q]\n            response = Api::V0::ApiModel.handle_response q\n            render :json =&gt; response, :status =&gt; 200\n         end\n     end\n   end\nend\n</code></pre>\n\n<p>ApiModel</p>\n\n<pre><code>module Api\n\n   module V0\n\n      class ApiModel\n\n        def self.handle_response q\n            response = ChatbotHelper.query q\n            if response['type'] == \"msg\"\n                message = response[\"msg\"]\n                json = {\"message\" =&gt; message}\n            else\n                json = response\n            end\n            json\n        end\n      end\n   end\n end\n</code></pre>\n\n<p>ChatbotHelper</p>\n\n<pre><code>module ChatbotHelper\n\n   def self.init\n\n    actions = {\n        send: -&gt; (request, response) {\n\n            puts \"REQUEST #{request} RESPONSE #{response}\"\n            puts(\"#{response['text']}\")\n            response\n        },\n        getData: -&gt; (context){\n\n        },\n    }\n\n    @client = Wit.new(access_token: \"XYZ\", actions: actions)\n\nend\n\ndef self.query q\n    begin\n        self.init\n        response = self.get_response q\n    rescue SocketError\n        response = {\"message\": \"SocketError\"}\n    end\n    response\nend\n\ndef self.get_response q\n    puts \"GET RESPONSE\"\n    response = @client.converse(\"b\", q, {})\n    response\nend\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "angularjs", "ruby", "coffeescript"], "comments": [{"owner": {"reputation": 5651, "user_id": 2295592, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7WNgQ.png?s=128&g=1", "display_name": "caffeinated.tech", "link": "https://stackoverflow.com/users/2295592/caffeinated-tech"}, "edited": false, "score": 0, "creation_date": 1469609383, "post_id": 38605414, "comment_id": 64602921, "body": "Rail&#39;s action_dispatch will filter out empty arrays before cancancan get&#39;s the params. You can disable this feature with <code>config.action_dispatch.perform_deep_munge = false</code> since Rails 4.1"}], "answers": [{"tags": [], "owner": {"reputation": 4690, "user_id": 170527, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d58a042e02e02b72aa35e3e1181a7a6f?s=128&d=identicon&r=PG", "display_name": "map7", "link": "https://stackoverflow.com/users/170527/map7"}, "is_accepted": false, "score": 0, "last_activity_date": 1469685026, "creation_date": 1469685026, "answer_id": 38628017, "question_id": 38605414, "link": "https://stackoverflow.com/questions/38605414/angularjs-posting-an-empty-array-turns-to-nil/38628017#38628017", "title": "AngularJS posting an empty array turns to nil", "body": "<p>I found that if you place the before_filter with my json_fix above the cancancan load_and_authorize_resource like so then it works.</p>\n\n<pre><code>before_filter :json_fix, only: [:update, :create]\nbefore_filter :authenticate_staff!\nload_and_authorize_resource  # Check cancancan\n</code></pre>\n"}], "owner": {"reputation": 4690, "user_id": 170527, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d58a042e02e02b72aa35e3e1181a7a6f?s=128&d=identicon&r=PG", "display_name": "map7", "link": "https://stackoverflow.com/users/170527/map7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469685026, "creation_date": 1469601369, "question_id": 38605414, "link": "https://stackoverflow.com/questions/38605414/angularjs-posting-an-empty-array-turns-to-nil", "title": "AngularJS posting an empty array turns to nil", "body": "<p>I'm using AngularJS 1.5 with Rails 3.2 on the backend and when I post a empty array by the time it gets to my Rails create method something has turned it from an empty array to a nil value.</p>\n\n<pre><code>  $scope.create = -&gt;\n    Invoice.save(\n      {}\n    ,\n      invoice: InvoiceService.construct_json($scope)\n    , (response) -&gt;\n      $location.path \"/invoices\"\n    , (response) -&gt;\n      $scope.errors = response.data\n      flash('alert', \"Invoice has errors and cannot be saved\", 2000)\n    )\n</code></pre>\n\n<p>Just before Invoice.save I can see that timesheets_attributes is set to [].</p>\n\n<pre><code>construct_json: (scope) -&gt;\n  {\n    # &lt;snip irrelevant info&gt;\n    # Timesheets\n    timesheets_attributes: _.map(scope.invoice.timesheets_attributes, (ts) -&gt;\n      _.omit(ts, 'job')\n    )\n  }\n</code></pre>\n\n<p>If I put byebug within my invoice controller create method I find that params[:invoice][:timesheets_attributes] is set to nil.</p>\n\n<p>If I add a timesheet, then Angular posts the array correctly. Is there a way I can stop the array from being converted to a nil?</p>\n\n<p>My current work around is to apply a before_filter, but this <em>hack</em> has stopped working now due to the introduction of cancancan. The load_and_authorize_resource of cancancan happens before any of the filters. I never really liked this hack and would like to find out why it's converting a perfection good empty array to a nil.</p>\n\n<pre><code>  def json_fix\n    params[:invoice][:timesheets_attributes] ||= []\n  end\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "model-view-controller", "nameerror"], "answers": [{"comments": [{"owner": {"reputation": 5385, "user_id": 936494, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/TCqih.jpg?s=128&g=1", "display_name": "Jignesh Gohel", "link": "https://stackoverflow.com/users/936494/jignesh-gohel"}, "edited": false, "score": 0, "creation_date": 1469622417, "post_id": 38612246, "comment_id": 64612017, "body": "Thanks. What you have suggested is already mentioned in my post."}, {"owner": {"reputation": 1751, "user_id": 3275308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001515476964/picture?type=large", "display_name": "Kkulikovskis", "link": "https://stackoverflow.com/users/3275308/kkulikovskis"}, "reply_to_user": {"reputation": 5385, "user_id": 936494, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/TCqih.jpg?s=128&g=1", "display_name": "Jignesh Gohel", "link": "https://stackoverflow.com/users/936494/jignesh-gohel"}, "edited": false, "score": 0, "creation_date": 1469623097, "post_id": 38612246, "comment_id": 64612560, "body": "@JiggneshhGohel sorry, did not notice that :/"}], "tags": [], "owner": {"reputation": 1751, "user_id": 3275308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001515476964/picture?type=large", "display_name": "Kkulikovskis", "link": "https://stackoverflow.com/users/3275308/kkulikovskis"}, "is_accepted": false, "score": 0, "last_activity_date": 1469620523, "creation_date": 1469620523, "answer_id": 38612246, "question_id": 38605272, "link": "https://stackoverflow.com/questions/38605272/getting-nameerror-uninitialized-constant-when-one-class-is-accessed-in-another/38612246#38612246", "title": "Getting NameError: uninitialized constant when one class is accessed in another class, both sharing a common module", "body": "<p>I have run into a similar problem.  You could try making your namespaces as follows:</p>\n\n<pre><code>module Api\n  module V1\n    class AbcDecorator &lt; CustomDelegator\n      def xyz_decorator\n        CustomNamespace::XyzDecorator.new\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>And</p>\n\n<pre><code>module Api\n  module V1\n    class CustomNamespace::XyzDecorator &lt; CustomDelegator\n    end\n  end\nend\n</code></pre>\n\n<p>I am not 100% sure, but I think that it only adds the namespace automatically if the model name that you are trying to call is defined exactly as it is called - i.e. if you call <code>A::B.new</code> under more namespaces then you have to define it <code>class A::B</code>. Also, by declaring classes with the short (<code>A::B</code>) version it does not automatically namespace other models called within the class.</p>\n"}], "owner": {"reputation": 5385, "user_id": 936494, "user_type": "registered", "accept_rate": 34, "profile_image": "https://i.stack.imgur.com/TCqih.jpg?s=128&g=1", "display_name": "Jignesh Gohel", "link": "https://stackoverflow.com/users/936494/jignesh-gohel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469620523, "creation_date": 1469600843, "last_edit_date": 1469605786, "question_id": 38605272, "link": "https://stackoverflow.com/questions/38605272/getting-nameerror-uninitialized-constant-when-one-class-is-accessed-in-another", "title": "Getting NameError: uninitialized constant when one class is accessed in another class, both sharing a common module", "body": "<p><strong>Ruby 2.3.0</strong></p>\n\n<p><strong>Rails 4.2.5.1</strong></p>\n\n<p><strong>/app/decorators/api/v1/custom_namespace/xyz_decorator.rb</strong></p>\n\n<pre><code>module Api\n  module V1\n    class CustomNamespace::XyzDecorator &lt; CustomDelegator\n    end\n  end\nend\n</code></pre>\n\n<p><strong>/app/decorators/api/v1/abc_decorator.rb</strong></p>\n\n<pre><code>module Api\n  module V1\n    class AbcDecorator &lt; CustomDelegator\n      def xyz_decorator\n        CustomNamespace::XyzDecorator.new\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>When <code>AbcDecorator</code> instance tries to access <code>xyz_decorator</code> the code breaks with error</p>\n\n<pre><code> NameError:\n   uninitialized constant CustomNamespace::XyzDecorator\n</code></pre>\n\n<p>I was expecting <code>CustomNamespace::XyzDecorator</code> to get resolved as <code>Api::V1::CustomNamespace::XyzDecorator</code> in <code>Api::V1::AbcDecorator#xyz_decorator</code> method.</p>\n\n<p>I tried to modify<br>\n<strong>/app/decorators/api/v1/custom_namespace/xyz_decorator.rb</strong> the following way but still the same error:</p>\n\n<pre><code>module Api\n  module V1\n    module CustomNamespace\n      class XyzDecorator &lt; CustomDelegator\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>When I use a fully qualified name like shown in following code it works.</p>\n\n<p><strong>/app/decorators/api/v1/abc_decorator.rb</strong></p>\n\n<pre><code>module Api\n  module V1\n    class AbcDecorator &lt; CustomDelegator\n      def xyz_decorator\n        Api::V1::CustomNamespace::XyzDecorator.new\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Can anybody please make me understand what is going on and why my first version of code don't work?</p>\n\n<p>P.S: There are no such files defined which explicitly defines just the modules:</p>\n\n<p><strong>/app/decorators/api.rb</strong></p>\n\n<pre><code>module Api\nend\n</code></pre>\n\n<p><strong>/app/decorators/api/v1.rb</strong></p>\n\n<pre><code>module Api\n module V1\n end\nend\n</code></pre>\n\n<p><strong>/app/decorators/api/v1/custom_namespace.rb</strong></p>\n\n<pre><code>module Api\n module V1\n   module CustomNamespace\n   end\n end\nend\n</code></pre>\n"}, {"tags": ["ruby", "xml", "parsing", "xml-parsing", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470343083, "post_id": 38605008, "comment_id": 64925410, "body": "Welcome to SO. Please don&#39;t use the title of the question as a repository of tags. Provide a short, descriptive sentence. I&#39;d highly recommend reading &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; along with the pages linked. Your question is premature and doesn&#39;t show any effort so \u201c[How much research effort is expected of Stack Overflow users?] (<a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a>)\u201d will be useful. Prior to asking you should have used Nokogiri&#39;s tutorial, searched the internet and Stack Overflow, then asked."}], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 2282559, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ZSiw7.jpg?s=128&g=1", "display_name": "Abid Iqbal", "link": "https://stackoverflow.com/users/2282559/abid-iqbal"}, "is_accepted": true, "score": -1, "last_activity_date": 1470343142, "last_edit_date": 1470343142, "creation_date": 1469599982, "answer_id": 38605045, "question_id": 38605008, "link": "https://stackoverflow.com/questions/38605008/third-party-api-parsing-xml-parsing-raw-data-parsing-ror-parsing-ror-nokoigi/38605045#38605045", "title": "third party api parsing, xml parsing, raw data parsing, ror parsing, ror nokoigiri, third party api parsing with nokogiri", "body": "<p>As you already have installed Nokogiri, you need to pass the raw file to Nokogiri  to get the parsed response:</p>\n\n<pre><code>  parsed = Nokogiri::XML(raw_data)\n  parsed = parsed.css(\"your_element_name\").text\n</code></pre>\n"}], "owner": {"reputation": 508, "user_id": 4470094, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000857022300/picture?type=large", "display_name": "Ali Hassan Mirza", "link": "https://stackoverflow.com/users/4470094/ali-hassan-mirza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "closed_date": 1471554066, "accepted_answer_id": 38605045, "answer_count": 1, "score": -3, "last_activity_date": 1470343142, "creation_date": 1469599823, "question_id": 38605008, "link": "https://stackoverflow.com/questions/38605008/third-party-api-parsing-xml-parsing-raw-data-parsing-ror-parsing-ror-nokoigi", "closed_reason": "Needs details or clarity", "title": "third party api parsing, xml parsing, raw data parsing, ror parsing, ror nokoigiri, third party api parsing with nokogiri", "body": "<p>I have an application in ruby on rails and have a raw format data file as a response from third party API. I want to parse that file in xml and get some element values as I am using nokogiri gem. So is there any way to parse that file?</p>\n\n<p>here is detail of nokogiri </p>\n\n<pre><code>https://github.com/sparklemotion/nokogiri\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip", "rails-models"], "comments": [{"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1469601304, "post_id": 38604937, "comment_id": 64597702, "body": "add some more error code, to find the cause of the error."}, {"owner": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1469601621, "post_id": 38604937, "comment_id": 64597893, "body": "in browser it shows &#39;sorry, something went wrong&#39; and in network tab shows &#39;500 Internal Server Error&#39; . only this much is showing.."}], "answers": [{"comments": [{"owner": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "edited": false, "score": 0, "creation_date": 1469604335, "post_id": 38605684, "comment_id": 64599601, "body": "in production log also not showing any error details.. so I dont have any idea of debugging this error.."}, {"owner": {"reputation": 189, "user_id": 1467801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372f9e4362436e1be55af7bd685bd403?s=128&d=identicon&r=PG", "display_name": "neolancer", "link": "https://stackoverflow.com/users/1467801/neolancer"}, "reply_to_user": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "edited": false, "score": 0, "creation_date": 1469692860, "post_id": 38605684, "comment_id": 64644859, "body": "if you&#39;re running your app via passenger on nginx or apache as a proxy, check their logs too, passenger could log some critical errors there, so they wouldn&#39;t arrive in local app logs at all"}], "tags": [], "owner": {"reputation": 189, "user_id": 1467801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372f9e4362436e1be55af7bd685bd403?s=128&d=identicon&r=PG", "display_name": "neolancer", "link": "https://stackoverflow.com/users/1467801/neolancer"}, "is_accepted": false, "score": 0, "last_activity_date": 1469602243, "creation_date": 1469602243, "answer_id": 38605684, "question_id": 38604937, "link": "https://stackoverflow.com/questions/38604937/error-in-downloading-paperclip-attachment/38605684#38605684", "title": "ERROR in downloading paperclip attachment", "body": "<p>\"sorry, something went wrong\" message usually does not show up in development environment. Instead, you would see a detailed error message with backtrace etc. So maybe you're running in production env? Then your error would go to production.log - check there. You couldn't guess the cause of error without the error details</p>\n"}], "owner": {"reputation": 618, "user_id": 4217243, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6a4yK.jpg?s=128&g=1", "display_name": "jithya", "link": "https://stackoverflow.com/users/4217243/jithya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484989049, "creation_date": 1469599570, "last_edit_date": 1484989049, "question_id": 38604937, "link": "https://stackoverflow.com/questions/38604937/error-in-downloading-paperclip-attachment", "title": "ERROR in downloading paperclip attachment", "body": "<p>I have a model named VehiclePhotos and it has attachment field 'photo'. I used paperclip gem for uploading photos. Uploading was fine without any error. but when I tried to download the image, it gives </p>\n\n<blockquote>\n  <p>'500 Internal Server Error'. </p>\n</blockquote>\n\n<p>log does not shows any error details. </p>\n\n<p><strong>vehicle_photos.rb</strong></p>\n\n<pre><code>class VehiclePhotos &lt; ActiveRecord::Base\n  has_attached_file :photo,\n                    :url =&gt; \"/uploads/:class/:id/:attachment/:attachment_fullname?:timestamp\",\n                    :path =&gt; \"uploads/:class/:attachment/:id_partition/:style/:basename.:extension\"\nend\n</code></pre>\n\n<p>in view, given following code to download</p>\n\n<pre><code>&lt;%= link_to @object.photo_file_name , @object.photo.url %&gt;\n</code></pre>\n\n<p>The file which contains uploaded photos has name 'vehicle_photos' and it has permission 777.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "excel", "csv", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1469598066, "post_id": 38604534, "comment_id": 64596111, "body": "perhaps there is no <code>send_data</code> method?"}, {"owner": {"reputation": 343, "user_id": 6577972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6b1c4b2bfbcce82532f6773f6f074b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nishtha", "link": "https://stackoverflow.com/users/6577972/nishtha"}, "reply_to_user": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1469598257, "post_id": 38604534, "comment_id": 64596198, "body": "yeah i have not created send_data method actually no idea what to send in send_data method ..I need a sample how to send data using send_data method"}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1469599105, "post_id": 38604534, "comment_id": 64596549, "body": "send_data is a Rails <a href=\"http://api.rubyonrails.org/classes/ActionController/DataStreaming.html\" rel=\"nofollow noreferrer\">helper method</a>. It would appear that you&#39;re trying to display an Excel spreadsheet in the browser, but your code is in the model, where helper methods aren&#39;t allowed."}], "answers": [{"tags": [], "owner": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "is_accepted": true, "score": 3, "last_activity_date": 1469600729, "creation_date": 1469600729, "answer_id": 38605250, "question_id": 38604534, "link": "https://stackoverflow.com/questions/38604534/undefined-method-send-data/38605250#38605250", "title": "Undefined method send_data", "body": "<p><code>send_data</code> is used to render binary data format to browser, it is not accesible in <code>rails model</code> <a href=\"http://apidock.com/rails/v4.2.1/ActionController/DataStreaming/send_data\" rel=\"nofollow\">Here</a> is the official documentation for the <code>send_data</code> method.</p>\n\n<p>In your case, I guess you wrote your Excel file genration <code>code</code> in <code>model</code>, So just return the <code>Spreadsheet</code> object and write code in controller for render your excel file or you can save it into temp file and render it from <code>controller</code> by providing that file path in <code>send_data</code> method.</p>\n\n<p>Hope this will help.</p>\n"}], "owner": {"reputation": 343, "user_id": 6577972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6b1c4b2bfbcce82532f6773f6f074b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nishtha", "link": "https://stackoverflow.com/users/6577972/nishtha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2840, "favorite_count": 0, "accepted_answer_id": 38605250, "answer_count": 1, "score": 2, "last_activity_date": 1469600729, "creation_date": 1469597919, "last_edit_date": 1469600096, "question_id": 38604534, "link": "https://stackoverflow.com/questions/38604534/undefined-method-send-data", "title": "Undefined method send_data", "body": "<p>I am getting undefined method <code>send_data</code> when creating multiple tabs in spreadsheet. I am not able to understand what data should be sent using this <code>send_Data</code> method.</p>\n\n<p>Here is my error:</p>\n\n<pre><code>NoMethodError (undefined method `send_data' for #&lt;Class:0x007f911933cc58&gt;):\n\nbook = Spreadsheet::Workbook.new\n      sheet1 = book.create_worksheet :name =&gt; 'Sheet1'\n      sheet2 = book.create_worksheet :name =&gt; 'Sheet2'\n      sheet1.row(0).push \"some content in Column1\"\n       spreadsheet = StringIO.new\n\n      book.write spreadsheet\n       file = \"#{Rails.root}/public/brand_store/Excelsheet\"\n\n       send_data spreadsheet.string, :filename =&gt; \"#{file}\", :type =&gt;  \"application/vnd.ms-excel\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "rails-console"], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1469624361, "last_edit_date": 1469624361, "creation_date": 1469596924, "answer_id": 38604317, "question_id": 38604292, "link": "https://stackoverflow.com/questions/38604292/how-do-i-get-rid-of-error-unrecognized-token-for-a-search-query-in-rails/38604317#38604317", "title": "How do I get rid of error &quot;unrecognized token: &quot;#&quot; &quot; for a search query in rails?", "body": "<p>The reason for your problem is that string interpolation does not work inside single quotes. You need to use <code>\"#{s}\"</code>.</p>\n\n<p>However, as a first improvement, the preferred method of converting a variable to a string is simply to call <code>s.to_s</code>. That said, <code>name</code> sounds like it's <em>already</em> a string, so the entire process of mapping can probably be eliminated. </p>\n\n<p>You also should not be using string interpolation to build a query. Use parameterized queries, give Rails the array of strings, and let it do the work for you:</p>\n\n<pre><code>@posts = Post.includes(:course).where('courses.name IN (?)', @user.courses.pluck(:name))\n</code></pre>\n\n<p>Note that, to select a single column from a set of results, it's <strong>tremendously</strong> faster to use <code>pluck(:field)</code> than <code>map(&amp;:field)</code>. The <code>map</code> method selects all the columns, instantiates entire ActiveRecord models for the result, and then throws out all that effort when you reduce the collection down to the single field. <code>pluck</code> <em>only</em> selects the required field, and doesn't build AR objects for the result set.</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 6641820, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4540262ffdc9633721555ccdb1207bfe?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/6641820/ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1469600611, "creation_date": 1469600611, "answer_id": 38605204, "question_id": 38604292, "link": "https://stackoverflow.com/questions/38604292/how-do-i-get-rid-of-error-unrecognized-token-for-a-search-query-in-rails/38605204#38605204", "title": "How do I get rid of error &quot;unrecognized token: &quot;#&quot; &quot; for a search query in rails?", "body": "<p>Your answer really helped, I had an issue with string iterpolation, the code that worked is </p>\n\n<pre><code>@posts = Post.all.includes(:course).where(\"courses.name IN (#{@user.courses.map(&amp;:name).collect { |s| \"'#{s}'\"  }.join(',') })\").references(:course).order(\"posts.created_at DESC\")\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6641820, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4540262ffdc9633721555ccdb1207bfe?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/6641820/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1469624361, "creation_date": 1469596802, "last_edit_date": 1469598245, "question_id": 38604292, "link": "https://stackoverflow.com/questions/38604292/how-do-i-get-rid-of-error-unrecognized-token-for-a-search-query-in-rails", "title": "How do I get rid of error &quot;unrecognized token: &quot;#&quot; &quot; for a search query in rails?", "body": "<p>This is the error I get:</p>\n\n<pre><code>SQLite3::SQLException: unrecognized token: \"#\": SELECT \"posts\".\"id\" AS\nt0_r0, \"posts\".\"title\" AS t0_r1, \"posts\".\"content\" AS t0_r2, \n\"posts\".\"created_at\" AS t0_r3, \"posts\".\"updated_at\" AS t0_r4, \n\"posts\".\"user_id\" AS t0_r5, \"posts\".\"course_id\" AS t0_r6, \n\"courses\".\"id\" AS t1_r0, \"courses\".\"name\" AS t1_r1, \n\"courses\".\"created_at\" AS t1_r2, \"courses\".\"updated_at\" AS t1_r3, \n\"courses\".\"major_id\" AS t1_r4, \"courses\".\"user_id\" AS t1_r5 FROM \n\"posts\" LEFT OUTER JOIN \"courses\" ON \"courses\".\"id\" = \n\"posts\".\"course_id\" WHERE (courses.name IN (#{s},#{s}))  ORDER BY \nposts.created_at DESC\n</code></pre>\n\n<p>For this query:</p>\n\n<pre><code>@posts = Post.includes(:course).where(\"courses.name IN (#{@user.courses.map(&amp;:name).collect { |s| '#{s}'  }.join(',') })\").references(:courses).order(\"posts.created_at DESC\")\n</code></pre>\n\n<p>I dont understand why #{s} doesn't become the strings in the array</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "amazon-s3"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 2605690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTxkP.jpg?s=128&g=1", "display_name": "Sonam Shah", "link": "https://stackoverflow.com/users/2605690/sonam-shah"}, "is_accepted": false, "score": 2, "last_activity_date": 1469603382, "creation_date": 1469603382, "answer_id": 38606082, "question_id": 38604090, "link": "https://stackoverflow.com/questions/38604090/rails-4-how-to-add-an-s3-image-to-wicked-pdf/38606082#38606082", "title": "Rails 4, How to add an s3 image to wicked pdf", "body": "<p>I have worked on the similar functionality but using <strong>PDFKit</strong> gem. But I think rendering logic will be almost similar.</p>\n\n<p>Below is the code where I rendered my partial in controller </p>\n\n<pre><code>def print_batch\n  batch = Batch.find(params[:id])\n  respond_to do |format|\n    format.pdf {\n      html = render_to_string(\"_batch\",:formats =&gt; [:html], layout: false , locals: { batch: batch })\n      Rails.logger.debug(html.inspect)\n      kit = PDFKit.new(html)\n      send_data(kit.to_pdf, :filename =&gt; \"file_name_#{batch.id}.pdf\", :type =&gt; 'application/pdf') and return\n    }\n    format.html\n    format.json { render json: {id: batch.id, processed: batch.processed?} }\n  end     \n\nend\n</code></pre>\n\n<p>In <strong>_batch.html.haml</strong>. You can see I have used <strong>person.s3_logo</strong> for rendering the pdf image.</p>\n\n<pre><code>  - logo_image_pdf = person.logo.present? ? person.s3_logo : default_credit_logo \n  - logo_image_html = person.logo.present? ? image_path(Person.logo.thumb('100x100').url) : image_path('default_credit_logo.png')\n  - logo_image = params[:format] == 'pdf' ? logo_image_pdf : logo_image_html\n\n  .bucks           \n    %img.logo{src: logo_image }\n</code></pre>\n\n<p>In <strong>Person.rb</strong> model. Anyway we cannot directly render image in PDF file directly from s3. So any gem will first download it in /tmp folder and render it. This is how I have done it in my model file. </p>\n\n<pre><code>  def s3_logo\n    file = open(self.logo.remote_url)\n    file.path if file\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 658, "user_id": 1213123, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/UXG6u.jpg?s=128&g=1", "display_name": "apr", "link": "https://stackoverflow.com/users/1213123/apr"}, "is_accepted": true, "score": 2, "last_activity_date": 1469705815, "creation_date": 1469705815, "answer_id": 38635219, "question_id": 38604090, "link": "https://stackoverflow.com/questions/38604090/rails-4-how-to-add-an-s3-image-to-wicked-pdf/38635219#38635219", "title": "Rails 4, How to add an s3 image to wicked pdf", "body": "<p>You can put the image in a s3 bucket and make it public. After that try it like below. If you use the below code no need to use separate syntax for different environments, it will works for all .Hope it works.  </p>\n\n<pre><code>&lt;%= wicked_pdf_image_tag('//s3.amazonaws.com/bucket_name/image.png') %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1433, "user_id": 703997, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c4bda24c22a7e56894feb140e6b79c77?s=128&d=identicon&r=PG&f=1", "display_name": "Shruthi R", "link": "https://stackoverflow.com/users/703997/shruthi-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1224, "favorite_count": 0, "accepted_answer_id": 38635219, "answer_count": 2, "score": 1, "last_activity_date": 1469705815, "creation_date": 1469595728, "question_id": 38604090, "link": "https://stackoverflow.com/questions/38604090/rails-4-how-to-add-an-s3-image-to-wicked-pdf", "title": "Rails 4, How to add an s3 image to wicked pdf", "body": "<p>In rails 4, I am using <code>wicked_pdf</code> gem for <code>.pdf</code> file download. I have to add an image inside this pdf, right now image is rendering through <code>wicked_pdf_image_tag</code> in development but in test environment image(s3) is not rendering.</p>\n\n<p>Used Gems are,</p>\n\n<pre><code>gem 'wicked_pdf', '1.0.3'\ngem 'wkhtmltopdf-binary', '0.9.9.3'\n</code></pre>\n\n<p>In initializers,</p>\n\n<pre><code>class WickedPdf\n  wkhtmltopdf_path = Rails.env.production? ? \"#{Rails.root}/bin/wkhtmltopdf-amd64\" : \"#{Rails.root}/bin/wkhtmltopdf-amd64\"\n  WICKED_PDF = {\n   :exe_path =&gt; wkhtmltopdf_path,\n   :wkhtmltopdf =&gt; wkhtmltopdf_path\n  }\nend\n</code></pre>\n\n<p>In controller,</p>\n\n<pre><code>respond_to do |format|\n  format.html {\n    render :pdf =&gt; \"sample\",\n    :margin =&gt; {:top =&gt; 10, :bottom =&gt; 10, :left =&gt; 10, :right =&gt; 10},\n    :orientation =&gt; 'Portrait', # default , Landscape,\n    :no_background =&gt; true\n  }\nend\n</code></pre>\n\n<p>In views, I have tried to load through</p>\n\n<pre><code>&lt;%= Rails.env.development? ? wicked_pdf_image_tag(\"img/logo.png\") : wicked_pdf_image_tag(\"#{Rails.root}/public/assets/img/logo.png\") %&gt;\n\n&lt;%= Rails.env.development? ? wicked_pdf_image_tag(\"img/logo.png\") : wicked_pdf_image_tag(\"#{Rails.root}/assets/img/logo.png\") %&gt;\n\n&lt;%= image_tag(ActionController::Base.helpers.asset_path('img/logo.png')) %&gt;\n</code></pre>\n\n<p>How can I load <code>s3</code> image in pdf file?</p>\n"}, {"tags": ["ruby", "testing", "rspec", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1469599447, "post_id": 38604042, "comment_id": 64596704, "body": "I&#39;m confused by your question since you show a Cucumber Feature file but then talk about RSpec retrying tests?  Either way I&#39;ve never come across a full rerun of a whole file being triggered, since best practice is to have scenarios run in random order, and have each scenario be completely independent of other scenarios so there would really be no value to rerunning all the scenarios that have already passed."}, {"owner": {"reputation": 1183, "user_id": 3659230, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9a8578a7f367a3140fa21ea6a528b01b?s=128&d=identicon&r=PG&f=1", "display_name": "dpst", "link": "https://stackoverflow.com/users/3659230/dpst"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1469606267, "post_id": 38604042, "comment_id": 64600845, "body": "We&#39;re using Turnip as opposed to Cucumber; however, the sytax for the feature files are the same. Turnip is run through RSpec so the code that I included does indeed retry each scenario individually upon failure through RSpec. I understand that I ideally each scenario should be independent from each other, but unfortunately that&#39;s not what I&#39;m dealing with right now and need a way to retest the entire feature file end to end. @TomWalpole"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1469637480, "post_id": 38604042, "comment_id": 64623138, "body": "ok - I don&#39;t think it&#39;s possible like your current retry works since RSpec doesn&#39;t currently support an <code>around(:context)</code> which would be needed to have access to the example group to trigger a complete retry of the group.  However, it should be possible to implement with a custom formatter like the rspec-rerun gem does and stripping the line numbers from the failed examples so the entire file gets rerun."}], "owner": {"reputation": 1183, "user_id": 3659230, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9a8578a7f367a3140fa21ea6a528b01b?s=128&d=identicon&r=PG&f=1", "display_name": "dpst", "link": "https://stackoverflow.com/users/3659230/dpst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1469595489, "creation_date": 1469595489, "question_id": 38604042, "link": "https://stackoverflow.com/questions/38604042/rspec-with-capybara-rerun-an-entire-feature-if-a-scenario-fails", "title": "RSpec with Capybara, rerun an entire feature if a scenario fails", "body": "<p>I\u2019m currently using RSpec and Capybara to test a website. Say I have a feature file such as this.</p>\n\n<pre><code>Feature: A simple feature\n  Scenario: name monster\n    Given there is a monster called \"John Smith\"\n    Then it should be called \"John Smith\"\n\n  Scenario: change monster name\n    Given there is a monster called \"John Smith\"\n    When I change its name to \"\"\n    Then it should be nameless\n\n  Scenario: name monster john\n    Given there is a monster called John\n    Then it should be called \"John\"\n</code></pre>\n\n<p>I would like to run this feature file so that if an individual scenario fails then the entire feature file will be rerun and if it fails again the test will fail as normal. Otherwise, if on the second run through it passes it should continue as normal.</p>\n\n<p>So in accordance with the above feature, if the scenario \"name monster john\" fails then the file should be run from the beginning, starting with the first scenario, \"name monster\".</p>\n\n<p>I have tried using the code below, which will rerun only a scenario (not the all the scenarios) if it fails up to three times at which point it will permanently fail. What I am trying to do however is rerun the entire feature file from the beginning.  </p>\n\n<pre><code>require 'rspec/core'\nrequire 'rspec/flaky/version'\nrequire 'rspec_ext/rspec_ext'\n\n module RSpec\n  class Flaky\n    def self.apply\n      RSpec.configure do |conf|\n        conf.add_setting :verbose_retry_flaky_example, default: false\n        conf.add_setting :flaky_retry_count, default: 1\n        conf.add_setting :flaky_sleep_interval, default: 0\n\n        # from rspec/rspec-core\n        # context.example is deprecated, but RSpec.current_example is not\n        # available until RSpec 3.0.\n        fetch_current_example = RSpec.respond_to?(:current_example) ?\n            proc { RSpec.current_example } : proc { |context| context.example    }\n\n        conf.around :all, type: :feature do |example|\n          retry_count = RSpec.configuration.flaky_retry_count\n          sleep_interval = RSpec.configuration.flaky_sleep_interval\n\n          # from rspec/rspec-core\n          current_example = fetch_current_example.call(self)\n\n          retry_count.times do |r_count|\n            if RSpec.configuration.verbose_retry_flaky_example &amp;&amp; r_count &gt; 0\n              msg = \"\\n Test failed! Retrying...This is retry: #{r_count}\n                    \\n Failed at:  #{example.location}\"\n              RSpec.configuration.reporter.message msg\n            end\n\n            current_example.clear_exception\n            example.run\n\n            break if current_example.exception.nil?\n\n            sleep sleep_interval if sleep_interval &gt; 0\n          end\n\n        end # conf.around\n      end # RSpec.configure\n    end # def self.apply\n  end # class Flaky\nend # module RSpec\n\nRSpec::Flaky.apply\n</code></pre>\n\n<p>Does RSpec have any way to rerun an entire feature or is this not possible?</p>\n"}, {"tags": ["ruby", "oop", "module"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1469594277, "post_id": 38603389, "comment_id": 64594829, "body": "did you try send a.send(:method1)"}], "answers": [{"comments": [{"owner": {"reputation": 643, "user_id": 4906941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CL1pN.png?s=128&g=1", "display_name": "Jeremy Rajan", "link": "https://stackoverflow.com/users/4906941/jeremy-rajan"}, "edited": false, "score": 0, "creation_date": 1469592315, "post_id": 38603489, "comment_id": 64594292, "body": "Doesn&#39;t seem to work. If I try something like: <code>a = MyModule::A.new a.my_method_a</code>. It gives me error on <code>my_method</code>."}], "tags": [], "owner": {"reputation": 1596, "user_id": 1087841, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca433142386fe814075e37027dccde0a?s=128&d=identicon&r=PG", "display_name": "Saad", "link": "https://stackoverflow.com/users/1087841/saad"}, "is_accepted": false, "score": 0, "last_activity_date": 1469592004, "creation_date": 1469592004, "answer_id": 38603489, "question_id": 38603389, "link": "https://stackoverflow.com/questions/38603389/private-common-methods-in-ruby-modules/38603489#38603489", "title": "Private common methods in Ruby Modules", "body": "<p>Yes you can have that for e.g.</p>\n\n<pre><code>module MyModule\n  class A\n    def my_method_a\n      my_method\n    end\n  end\n\n  class B\n    def my_method_b\n      my_method\n    end\n  end\n\n  private\n  def my_method\n    puts \"hello\"\n  end\nend\na = A.new\na.my_method_a\noutput =&gt; \"hello\"\n</code></pre>\n\n<p>But you won't be able to use a.my_method as it is a private method.</p>\n"}, {"tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": true, "score": 1, "last_activity_date": 1469594968, "creation_date": 1469594968, "answer_id": 38603954, "question_id": 38603389, "link": "https://stackoverflow.com/questions/38603389/private-common-methods-in-ruby-modules/38603954#38603954", "title": "Private common methods in Ruby Modules", "body": "<p>Please try this way</p>\n\n<pre><code>module MyModule\n  class A\n    def my_method_a\n      MyModule.my_method\n    end\n  end\n\n  class B\n    def my_method_b\n      MyModule.my_method\n    end\n  end\n\n  private\n  module_function\n  def my_method\n    puts \"hello\"\n  end\nend\n</code></pre>\n\n<p>and\n then</p>\n\n<pre><code>a = MyModule::A.new \na.my_method_a\n</code></pre>\n"}], "owner": {"reputation": 643, "user_id": 4906941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CL1pN.png?s=128&g=1", "display_name": "Jeremy Rajan", "link": "https://stackoverflow.com/users/4906941/jeremy-rajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 38603954, "answer_count": 2, "score": 0, "last_activity_date": 1469594968, "creation_date": 1469591255, "last_edit_date": 1469592477, "question_id": 38603389, "link": "https://stackoverflow.com/questions/38603389/private-common-methods-in-ruby-modules", "title": "Private common methods in Ruby Modules", "body": "<p>Apologies, for being a bit noob'ish! :). Is there a way that I can have common private methods to be inside the classes that I have defined in it. For ex, can I have:</p>\n\n<pre><code>Module MyMod\n class MyClass\n   ...\n   method1()\n end\n class MyClass2\n  ...\n  method1()\n end\n private\n def method1()\n   ...\n end\nend\n</code></pre>\n\n<p>I am guessing, calling them as follows:</p>\n\n<pre><code>a = MyMod::MyClass.new\n</code></pre>\n\n<p>But it gives me an error, that method1 is not available.</p>\n\n<p>Something along these lines? I tried using self class but doesn't seem to work. </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby", "themes", "jekyll", "octopress", "static-site"], "owner": {"reputation": 2905, "user_id": 1992224, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/75452d2c678355d44d2ee09a8406d4dd?s=128&d=identicon&r=PG", "display_name": "Ishan", "link": "https://stackoverflow.com/users/1992224/ishan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1469589426, "creation_date": 1469589426, "question_id": 38603119, "link": "https://stackoverflow.com/questions/38603119/migrate-octopress-2-theme-to-octopress-3-theme", "title": "Migrate Octopress 2 theme to Octopress 3 theme", "body": "<p>How do you migrate an Octopress 2 theme to Octopress 3?</p>\n\n<p>Octopress 2 uses <a href=\"https://github.com/octopress/classic-theme\" rel=\"nofollow\">classic</a> as the default theme while Octopress 3 uses the default Jekyll theme. How do I migrate the Octopress 2 classic theme over to Octopress 3? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-4", "form-for"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1469596224, "post_id": 38603060, "comment_id": 64595450, "body": "did you get solution.??"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1469596428, "post_id": 38603060, "comment_id": 64595519, "body": "seems like few comments  don&#39;t have user_id in this line &lt;%= link_to comment.user.user_name, profile_path(comment.user.user_name), class: &quot;username-size&quot; %&gt;"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1469596458, "post_id": 38603060, "comment_id": 64595532, "body": "check for comment.user_id.present? and then create a link_to user_name"}, {"owner": {"reputation": 393, "user_id": 6399127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/284c279ef66682bb64409ea3e0d89d18?s=128&d=identicon&r=PG&f=1", "display_name": "sam0101", "link": "https://stackoverflow.com/users/6399127/sam0101"}, "reply_to_user": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1469598032, "post_id": 38603060, "comment_id": 64596098, "body": "@Deepak oooo it is working now, first I want to thank you a lot...It is working....but what was the problem...As I deleted all the comments first but the problem did not get solved until you come...what do you think?"}, {"owner": {"reputation": 496, "user_id": 5537203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88445e66d439bb5df0fdf9876049cbdc?s=128&d=identicon&r=PG&f=1", "display_name": "pk-n", "link": "https://stackoverflow.com/users/5537203/pk-n"}, "edited": false, "score": 0, "creation_date": 1469599567, "post_id": 38603060, "comment_id": 64596774, "body": "I think you created few comments prior to having association between user and comment. later on when you added association between them the older comment&#39;s user_id will be nil. so when u try to access user_name for those comments it will show that error"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 496, "user_id": 5537203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88445e66d439bb5df0fdf9876049cbdc?s=128&d=identicon&r=PG&f=1", "display_name": "pk-n", "link": "https://stackoverflow.com/users/5537203/pk-n"}, "edited": false, "score": 0, "creation_date": 1469600996, "post_id": 38603060, "comment_id": 64597534, "body": "Yes, as @pavan said you must have created few comments without user_id either from console or before applying validations"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1469601065, "post_id": 38603060, "comment_id": 64597575, "body": "@sam0101 I will add an answer then"}, {"owner": {"reputation": 393, "user_id": 6399127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/284c279ef66682bb64409ea3e0d89d18?s=128&d=identicon&r=PG&f=1", "display_name": "sam0101", "link": "https://stackoverflow.com/users/6399127/sam0101"}, "edited": false, "score": 0, "creation_date": 1469616611, "post_id": 38603060, "comment_id": 64607959, "body": "i dont remember If I did that or not but anyway thank you again..."}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 6399127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/284c279ef66682bb64409ea3e0d89d18?s=128&d=identicon&r=PG&f=1", "display_name": "sam0101", "link": "https://stackoverflow.com/users/6399127/sam0101"}, "edited": false, "score": 0, "creation_date": 1469591296, "post_id": 38603186, "comment_id": 64594050, "body": "Hi yes i have user_id in post table...I updated my question and add the shcema of the posts and comments table"}], "tags": [], "owner": {"reputation": 24, "user_id": 3718830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wPZxj.jpg?s=128&g=1", "display_name": "Quan Nguyen", "link": "https://stackoverflow.com/users/3718830/quan-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1469589933, "creation_date": 1469589933, "answer_id": 38603186, "question_id": 38603060, "link": "https://stackoverflow.com/questions/38603060/undefined-method-user-name-for-nilnilclass-when-adding-comments-form-for/38603186#38603186", "title": "undefined method `user_name&#39; for nil:NilClass when adding comments form for", "body": "<p>Are you sure your post table have <code>user_id</code> or others <code>foreign key</code> ? </p>\n\n<p>You can use :</p>\n\n<p><code>belongs_to :user, :foreign_key =&gt; 'user_id'</code> at <code>post.rb</code> model</p>\n\n<p>And :</p>\n\n<p><code>has_many :posts, :foreign_key =&gt; 'user_id'</code> at <code>user.rb</code></p>\n"}, {"comments": [{"owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "reply_to_user": {"reputation": 393, "user_id": 6399127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/284c279ef66682bb64409ea3e0d89d18?s=128&d=identicon&r=PG&f=1", "display_name": "sam0101", "link": "https://stackoverflow.com/users/6399127/sam0101"}, "edited": false, "score": 0, "creation_date": 1469594222, "post_id": 38603493, "comment_id": 64594809, "body": "Did you get them all? You&#39;ve got that same syntax in four different lines from that first block that you posted."}, {"owner": {"reputation": 393, "user_id": 6399127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/284c279ef66682bb64409ea3e0d89d18?s=128&d=identicon&r=PG&f=1", "display_name": "sam0101", "link": "https://stackoverflow.com/users/6399127/sam0101"}, "edited": false, "score": 0, "creation_date": 1469594582, "post_id": 38603493, "comment_id": 64594935, "body": "now I get that error No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;profiles&quot;, :user_name=&gt;nil} missing required keys: [:user_name]&quot;....so I think I have to add the .user_name there ...because that what I defined in profile routes (profile GET    /:user_name) so in my case the user_name is necessary and it seems that it is not the root of the problem in my case"}], "tags": [], "owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1469592032, "creation_date": 1469592032, "answer_id": 38603493, "question_id": 38603060, "link": "https://stackoverflow.com/questions/38603060/undefined-method-user-name-for-nilnilclass-when-adding-comments-form-for/38603493#38603493", "title": "undefined method `user_name&#39; for nil:NilClass when adding comments form for", "body": "<p>I'm pretty new to Rails myself, but I've worked through similar errors a dozen times. This bit appears to be a problem:</p>\n\n<pre><code>profile_path(post.user.user_name)\n</code></pre>\n\n<p>Earlier in the same line of code, you use:</p>\n\n<pre><code>link_to post.user.user_name\n</code></pre>\n\n<p>but that part seems okay, because it's just the displayed text.</p>\n\n<p>In the actual link, I don't think you should include the user_name. Try simply using \"post.user\" instead.  </p>\n"}, {"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1469601172, "creation_date": 1469601172, "answer_id": 38605354, "question_id": 38603060, "link": "https://stackoverflow.com/questions/38603060/undefined-method-user-name-for-nilnilclass-when-adding-comments-form-for/38605354#38605354", "title": "undefined method `user_name&#39; for nil:NilClass when adding comments form for", "body": "<p>seems like few comments don't have user_id in this line </p>\n\n<pre><code>&lt;%= link_to comment.user.user_name, profile_path(comment.user.user_name), class: \"username-size\" %&gt;\n</code></pre>\n\n<p>Try destroying the comments with <code>user_id</code> having <code>nil</code> value</p>\n\n<pre><code>Comment.destroy_all(user_id: nil)\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 6399127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/284c279ef66682bb64409ea3e0d89d18?s=128&d=identicon&r=PG&f=1", "display_name": "sam0101", "link": "https://stackoverflow.com/users/6399127/sam0101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1469601172, "creation_date": 1469589030, "last_edit_date": 1469591236, "question_id": 38603060, "link": "https://stackoverflow.com/questions/38603060/undefined-method-user-name-for-nilnilclass-when-adding-comments-form-for", "title": "undefined method `user_name&#39; for nil:NilClass when adding comments form for", "body": "<p>everything was working until I add the form_for  for creating comments and I get this error undefined method `user_name' for nil:NilClass...</p>\n\n<p>I searching for hours for solution but in vain..\nhere is my posts views index file  with the form I added for creating the comments: </p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-12\"&gt;\n        &lt;%= render 'form' %&gt;\n            &lt;div id=\"posts\" class=\"transitions-enabled\"&gt;\n                &lt;% @posts.each do |post| %&gt;\n                    &lt;div class=\"box box-1 panel panel-default\"&gt;\n                      &lt;div class=\"panel-body\"&gt;\n                        &lt;%= link_to image_tag(post.user.avatar.url, size: \"50x50\", class: \"img-circle\"), profile_path(post.user.user_name) %&gt;\n                            &lt;ul class=\"posts-shows\"&gt;\n                            &lt;li&gt;&lt;strong&gt;&lt;%= link_to post.user.user_name, profile_path(post.user.user_name)  %&gt;&lt;/strong&gt;&lt;/li&gt;\n                            &lt;li&gt;&lt;small&gt;&lt;%= link_to \"#{time_ago_in_words(post.created_at)} ago\", post_path(post), class: \"time-link\" %&gt; &lt;/small&gt;&lt;/li&gt;\n                        &lt;/ul&gt;\n                            &lt;p class=\"disc-posts\"&gt;&lt;%= post.description %&gt;&lt;/p&gt;\n                            &lt;%= link_to image_tag(post.image.url(:large), class: \"img-responsive img-in\" ) %&gt;&lt;br/&gt;\n                            &lt;% if post.user == current_user %&gt;\n                                &lt;div&gt;&lt;%= link_to \"Edit\", edit_post_path(post) %&gt; | &lt;%= link_to \"delete\", post, method: :delete, data: {confirm: \"Are you sure?\"} %&gt; &lt;/div&gt;\n                            &lt;% else %&gt;                          \n                                &lt;div&gt;&lt;%= link_to \"Repost\", repost_post_path(post), method: :post, data: { confirm: \"Are you sure?\"} if user_signed_in? %&gt;&lt;/div&gt;                 \n                            &lt;% end %&gt;\n                        &lt;/div&gt;\n\n\n                        &lt;%= form_for([post, post.comments.build]) do |f| %&gt; \n                            &lt;p&gt;\n                            &lt;%= f.label :content %&gt;&lt;br&gt; \n                            &lt;%= f.text_area :content, class: \"form-control\"  %&gt;\n                            &lt;/p&gt; \n\n                            &lt;p&gt; \n                            &lt;%= f.submit %&gt; \n                            &lt;/p&gt; \n\n                        &lt;% end %&gt;\n\n                        &lt;% if post.comments.present? %&gt;\n                            &lt;div class=\"panel-footer\"&gt;\n                                &lt;% post.comments.each do |comment| %&gt;\n                                    &lt;%= link_to image_tag(post.user.avatar.url, size: \"30x30\", class: \"img-circle\"), profile_path(comment.user.user_name) %&gt;\n                                    &lt;%= link_to comment.user.user_name, profile_path(comment.user.user_name), class: \"username-size\" %&gt;\n                                    &lt;%= comment.content %&gt;\n                                    &lt;% if comment.user == current_user %&gt;\n                                        &lt;%= link_to \"delete\", post_comment_path(post, comment), method: :delete, data: { confirm: \"Are you sure?\" } %&gt;\n                                    &lt;% end %&gt;\n                                &lt;% end %&gt;\n                            &lt;/div&gt;\n                        &lt;% end %&gt;\n\n\n                    &lt;/div&gt;\n                &lt;% end %&gt;\n            &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>here is the form_for alone: </p>\n\n<pre><code>&lt;%= form_for([post, post.comments.build]) do |f| %&gt; \n  &lt;p&gt;\n    &lt;%= f.label :content %&gt;&lt;br&gt; \n    &lt;%= f.text_area :content, class: \"form-control\"  %&gt;\n   &lt;/p&gt; \n\n   &lt;p&gt; \n     &lt;%= f.submit %&gt; \n   &lt;/p&gt; \n\n &lt;% end %&gt;\n</code></pre>\n\n<p>and here is my comment, user and post model that shows the associations :</p>\n\n<pre><code>class Comment &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :post\nend\n</code></pre>\n\n<p>.........................</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  validates_presence_of :description\n  belongs_to :user\n  has_many :comments, dependent: :destroy\nend\n</code></pre>\n\n<p>......................</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :comments, dependent: :destroy\n  has_many :posts, dependent: :destroy\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  validates :user_name, presence: true, length: { minimum: 4, maximum: 16 } \nend\n</code></pre>\n\n<p>and my comments controller:</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  before_action :set_post\n\n  def index\n    @comments = @post.comment.all\n  end\n\n  def new\n    @comment = @post.comments.build(comments_params)\n  end\n\n  def create\n    @comment = @post.comments.build(comments_params)\n    @comment.user_id = current_user.id\n\n    if @comment.save\n      redirect_to :back\n    else\n      flash[:alert] = \"Check the comment form\"\n      render root_path\n    end\n  end\n\n  def edit\n\n  end\n\n  def update\n\n  end\n\n  def destroy\n    @comment = @post.comments.find(params[:id])\n\n    @comment.destroy\n    flash[:success] = \"Comment deleted :(\"\n    redirect_to root_path\n  end\n\n  private\n\n  def comments_params\n    params.require(:comment).permit(:content)\n  end\n\n  def set_post\n    @post = Post.find(params[:post_id])\n  end\nend\n</code></pre>\n\n<p>my schema: </p>\n\n<pre><code>  create_table \"comments\", force: :cascade do |t|\n    t.integer  \"user_id\"\n    t.integer  \"post_id\"\n    t.text     \"content\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  add_index \"comments\", [\"post_id\"], name: \"index_comments_on_post_id\"\n  add_index \"comments\", [\"user_id\"], name: \"index_comments_on_user_id\"\n\n  create_table \"posts\", force: :cascade do |t|\n    t.string   \"description\"\n    t.datetime \"created_at\",       null: false\n    t.datetime \"updated_at\",       null: false\n    t.string   \"image\"\n    t.integer  \"user_id\"\n    t.integer  \"original_post_id\"\n  end\n\n  add_index \"posts\", [\"user_id\"], name: \"index_posts_on_user_id\"\n</code></pre>\n"}, {"tags": ["ruby", "json", "parsing"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1469592459, "creation_date": 1469592459, "answer_id": 38603553, "question_id": 38603055, "link": "https://stackoverflow.com/questions/38603055/update-json-string-after-ruby-parse/38603553#38603553", "title": "Update json string after ruby parse", "body": "<p>Storing the document you're trying to modify as a constant might not be the best move, it makes things more complicated, but it can be done. You just need to reassign the value of the string with the JSON serialized version of your modified object:</p>\n\n<pre><code>JSON_STR.replace(JSON.dump(obj))\n</code></pre>\n\n<p>This will only work if <code>JSON_STR</code> is not frozen, and constants often are, so watch out if you get errors.</p>\n\n<p>As a note <code>obj</code> is a pretty terrible name for your variable. Try and explain what it is. Even <code>entries</code> or <code>docs</code> is better here.</p>\n"}], "owner": {"reputation": 43, "user_id": 6434013, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f3b55d5227d9114f9ed689eac81057ab?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/6434013/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469592459, "creation_date": 1469588970, "question_id": 38603055, "link": "https://stackoverflow.com/questions/38603055/update-json-string-after-ruby-parse", "title": "Update json string after ruby parse", "body": "<p>I have a JSON object and I have parsed it with ruby. Now i need to update the JSON object with the changed values.  I need to update JSON_STR with the new value \"testing\". It might sound silly, but i am not getting to it.</p>\n\n<pre><code>require 'json'\nobj = JSON.parse(JSON_STR) \nobj.each do |doc|\n  doc[\"ref\"] = \"testing\" \nend\n</code></pre>\n"}, {"tags": ["ruby", "string", "class", "methods"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1469593331, "post_id": 38603052, "comment_id": 64594526, "body": "If a method has no explicit receiver, the receiver is assumed to be <code>self</code>. Therefore, you can replace <code>self.swapcase</code> with just <code>swapcase</code>."}], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": true, "score": 1, "last_activity_date": 1469589222, "creation_date": 1469589222, "answer_id": 38603093, "question_id": 38603052, "link": "https://stackoverflow.com/questions/38603052/adding-swapcase-class-to-string/38603093#38603093", "title": "Adding Swapcase class to string", "body": "<p>The differences are all in the manual.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.0/String.html#method-i-swapcase-21\" rel=\"nofollow\"><code>String#swapcase!</code></a>:</p>\n\n<blockquote>\n  <p>Equivalent to <code>String#swapcase</code>, but modifies the receiver in place, returning <code>str</code>, <strong>or <code>nil</code> if no changes were made</strong>. Note: case conversion is effective only in ASCII region.</p>\n</blockquote>\n"}], "owner": {"reputation": 219, "user_id": 4744594, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42e4a92b61881cac95df5f9d764abcce?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4744594/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 38603093, "answer_count": 1, "score": 0, "last_activity_date": 1469589222, "creation_date": 1469588953, "question_id": 38603052, "link": "https://stackoverflow.com/questions/38603052/adding-swapcase-class-to-string", "title": "Adding Swapcase class to string", "body": "<p>Trying to create a method for String class that will return a string swapcased. I have written two different methods</p>\n\n<pre><code>class String\n  def to_alternating_case\n    self.swapcase\n  end\nend\n</code></pre>\n\n<p>The above code works for all strings entered. However if the following code is entered:</p>\n\n<pre><code>class String\n  def to_alternating_case\n    self.swapcase!\n  end\nend\n</code></pre>\n\n<p>Then a string which contains all numbers will return nil. Can someone explain why these behave differently when it comes to string containing only numbers?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "conditional"], "comments": [{"owner": {"reputation": 392, "user_id": 6501880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5b8edeac79e94ecde386dae8f33398?s=128&d=identicon&r=PG&f=1", "display_name": "MageeWorld", "link": "https://stackoverflow.com/users/6501880/mageeworld"}, "edited": false, "score": 0, "creation_date": 1469588765, "post_id": 38602887, "comment_id": 64593432, "body": "Well I&#39;m a bit unclear as to all the details of your set up here - there&#39;s no quiz or answer information - but if you want to check if a user has taken a specific quiz why not create a cross join table for users and quizzes and it only gets set up when they take the quiz (or you can make it more complicated than that if you wanted to).  My belief is that your logic of basing it on the answers is wrong and you should instead base it on the quiz?  But I&#39;m making assumptions of things not seen (or presented)"}, {"owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "edited": false, "score": 1, "creation_date": 1469588780, "post_id": 38602887, "comment_id": 64593439, "body": "While many people could take a stab in the dark at this, it may be a little more helpful to provide a bit more information, for example when you say a user has many answers through a quizzes model, are you referring to an actual <code>has_many :answers, through: :quizzes</code> relation, or just stating that a user has_many quizzes, and that quizzes has_many answers? perhaps put up your models code as well?"}], "answers": [{"comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1469596567, "post_id": 38603525, "comment_id": 64595570, "body": "please for god&#39;s sake don&#39;t use unless - else"}, {"owner": {"reputation": 301, "user_id": 5850009, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3699c98d5fb0af89a9b31bcd03e14896?s=128&d=identicon&r=PG&f=1", "display_name": "helpisgood", "link": "https://stackoverflow.com/users/5850009/helpisgood"}, "edited": false, "score": 0, "creation_date": 1469667623, "post_id": 38603525, "comment_id": 64636176, "body": "@Milind I used this but for some reason, it doesnt allow me to access every other users quizzes, giving me a to_key error, and if it does, answers when submitted do not display in the text fields after."}, {"owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "edited": false, "score": 0, "creation_date": 1470626112, "post_id": 38603525, "comment_id": 65008266, "body": "try to check your associations...it should work ...play around in console...@user = User.new...then @user.answer.new...it should work ..assuming your answers/quizes table have foreign_key .. :)"}], "tags": [], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "is_accepted": false, "score": 0, "last_activity_date": 1469604015, "last_edit_date": 1469604015, "creation_date": 1469592233, "answer_id": 38603525, "question_id": 38602887, "link": "https://stackoverflow.com/questions/38602887/how-to-make-an-if-statement-for-rails-has-many-association/38603525#38603525", "title": "How to make an &quot;if statement&quot; for Rails has_many Association?", "body": "<p>I am not clear what are you trying to achieve as your code is doing unwanted check.SO if you just want to check if any user(<strong>assuming signed_in users</strong>) want to go to show action conditionally,i think you may try this:-</p>\n\n<pre><code>##assuming user has_many answers\n##answer belongs_to user\ndef show\n  ##get the user\n  @user = User.find(params[:id])\n  ##verify if answer is present\n  if @user.answers.present?\n    @answer = @user.answers\n  else\n    @answer = @user.answers.new\n  end\nend\n</code></pre>\n\n<p><em>The above logic can be used to has many through associations as well,just need to change to through model</em></p>\n\n<p>Hope it helps :)</p>\n"}], "owner": {"reputation": 301, "user_id": 5850009, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3699c98d5fb0af89a9b31bcd03e14896?s=128&d=identicon&r=PG&f=1", "display_name": "helpisgood", "link": "https://stackoverflow.com/users/5850009/helpisgood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469604015, "creation_date": 1469587670, "last_edit_date": 1469587948, "question_id": 38602887, "link": "https://stackoverflow.com/questions/38602887/how-to-make-an-if-statement-for-rails-has-many-association", "title": "How to make an &quot;if statement&quot; for Rails has_many Association?", "body": "<p>I have the following in my UsersController</p>\n\n<pre><code>def show\n  @user = User.find(params[:id])\n\n  if current_user.id != params[:id] #! need to fix this\n    @answer = Answer.new\n  else\n    @answer = Answer.find(params[:id])\n  end\n</code></pre>\n\n<p>where each user has_many answers through a quizzes model. How can I write the if statement so if the answers are blank for that particular user it'll jump to creating a new quiz? (and if they aren't, to display the information).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1469588135, "post_id": 38602880, "comment_id": 64593299, "body": "What problem are you trying to solve? I have a strong suspicion that you&#39;re doing something with these loops that you should be doing with a database query instead."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1469595990, "post_id": 38602880, "comment_id": 64595367, "body": "Concentrate on clarifying the question. What do you mean by &quot;How can I minimize the loop?&quot; ?.  Show your expected result for the example you gave. Note I&#39;ve assigned variables to the two arrays. That way readers can refer to those variables in answers and comments without defining them."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1469636958, "post_id": 38602880, "comment_id": 64622865, "body": "Why do you refuse to clarify your question with an edit?"}], "answers": [{"tags": [], "owner": {"reputation": 1299, "user_id": 2923846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e45ca52b59ce69b3844c6e8b09f278c?s=128&d=identicon&r=PG", "display_name": "lwassink", "link": "https://stackoverflow.com/users/2923846/lwassink"}, "is_accepted": false, "score": 1, "last_activity_date": 1469636096, "last_edit_date": 1469636096, "creation_date": 1469588149, "answer_id": 38602943, "question_id": 38602880, "link": "https://stackoverflow.com/questions/38602880/minimize-nested-loops/38602943#38602943", "title": "Minimize nested loops", "body": "<p>If each sub array of users has no repeated elements, then the following should work</p>\n\n<pre><code>users.each { |user| puts array &amp; user }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1469588940, "post_id": 38603011, "comment_id": 64593479, "body": "I think you meant <code>&amp;</code> instead of <code>&amp;&amp;</code>. You&#39;re returning the value of array that way. &amp; is the intersect method for a Ruby Array."}, {"owner": {"reputation": 902, "user_id": 6080209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fv6iS.jpg?s=128&g=1", "display_name": "M. Karim", "link": "https://stackoverflow.com/users/6080209/m-karim"}, "reply_to_user": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1469589170, "post_id": 38603011, "comment_id": 64593540, "body": "@AlexandreAngelim, thanks for noticing. yes, <code>&amp;</code> is more preferable."}, {"owner": {"reputation": 902, "user_id": 6080209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fv6iS.jpg?s=128&g=1", "display_name": "M. Karim", "link": "https://stackoverflow.com/users/6080209/m-karim"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1469597403, "post_id": 38603011, "comment_id": 64595858, "body": "@CarySwoveland Ok I also added the print part. Thanks."}, {"owner": {"reputation": 902, "user_id": 6080209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fv6iS.jpg?s=128&g=1", "display_name": "M. Karim", "link": "https://stackoverflow.com/users/6080209/m-karim"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1469598155, "post_id": 38603011, "comment_id": 64596153, "body": "@CarySwoveland I think that too. The question not cleared. But I think he wants something like this. I&#39;ll change it if OP really wants that. Thanks again."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1469636922, "post_id": 38603011, "comment_id": 64622847, "body": "I deleted my comments because I had misread the OPs code and because the question is not clear. I&#39;ll delete this comment also, after you&#39;ve seen it."}], "tags": [], "owner": {"reputation": 902, "user_id": 6080209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fv6iS.jpg?s=128&g=1", "display_name": "M. Karim", "link": "https://stackoverflow.com/users/6080209/m-karim"}, "is_accepted": false, "score": 2, "last_activity_date": 1469598510, "last_edit_date": 1469598510, "creation_date": 1469588648, "answer_id": 38603011, "question_id": 38602880, "link": "https://stackoverflow.com/questions/38602880/minimize-nested-loops/38603011#38603011", "title": "Minimize nested loops", "body": "<p>From my understanding, you want to get the common elements from <code>users</code> and <code>array</code>.</p>\n\n<p>At first make the <code>users</code> array <code>flatten</code> to make it a single array. Then make it a <code>uniq</code> so that one id doesn't repeat again. <code>compact</code> will remove the <code>nil</code> values. After that make a <code>&amp;</code> operation with <code>array</code>. And you got your <code>result</code>.</p>\n\n<pre><code>result = users.flatten.uniq.compact &amp; array\n</code></pre>\n\n<p>Now if you want to print the <code>result</code></p>\n\n<pre><code>puts result\n</code></pre>\n"}], "owner": {"reputation": 110, "user_id": 6433476, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f5fa9a1faa6c6886c21801d77d666ec7?s=128&d=identicon&r=PG&f=1", "display_name": "on-the-way", "link": "https://stackoverflow.com/users/6433476/on-the-way"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1469637200, "creation_date": 1469587590, "last_edit_date": 1469595640, "question_id": 38602880, "link": "https://stackoverflow.com/questions/38602880/minimize-nested-loops", "title": "Minimize nested loops", "body": "<p>I have the following code with nested loops. How can I minimize the loop? </p>\n\n<p><code>users</code> result is like:</p>\n\n<pre><code>users = [[35, 61, 62, 63, 64, 65, 66, 67, 68, 69, nil, 70, 71, 72, 73,\n          74, 75, 78, 79, 92, 94, 95, 154, 164, 292, 293, 294, 295, 314],\n         [],\n         [35],\n         [],\n         [35, 79, 88],\n         [],\n         [],\n         [36, 35, 56, 78, 87, 95, 65],\n         [63, 72, 78, 80, 81, 82, 84, 87, 90, 93, nil, 96, 111, 157, 159, 160, 271,\n          272, 66, 295, 296, 297, 298, 299, 300, 301, 305, 307, 308, 71, 315],\n         [],\n         [79, 83, 85, 86, 89, 91, 161, 162, 163, 67, 294, 302, 303, 304, 306,\n          309, 310, 311, 312, 313],\n         [],\n         [314],\n         [314],\n         []\n        ]\n</code></pre>\n\n<p>That's why I need to loop the object in each elements.</p>\n\n<p>And <code>array</code> value is:</p>\n\n<pre><code>array = [309, 310, 305, 304, 90, 162, 78, 297, 296, 272, 271, 84, 91, 308,\n         299, 79, 87, 298, 301, 163, 81, 72, 83, 111, 86, 313, 164, 300, 159,\n         315, 160, 307, 82, 69, 312, 89\n        ]\n</code></pre>\n\n<p>Thanks!</p>\n\n<pre><code>0.upto(users.count).each do |i|\n  users[i].each do |user_id|\n    if array.include?(user_id)\n      puts user_id\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "migration", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1469587727, "post_id": 38602854, "comment_id": 64593193, "body": "Did you run the migration?"}, {"owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "edited": false, "score": 0, "creation_date": 1469588742, "post_id": 38602854, "comment_id": 64593423, "body": "Can you post your migration file?"}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1469606307, "post_id": 38602854, "comment_id": 64600877, "body": "I did run the migration and I&#39;ve update the migration file."}], "answers": [{"tags": [], "owner": {"reputation": 10921, "user_id": 85125, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5636d7549013d9fc365de56ad90d12bc?s=128&d=identicon&r=PG", "display_name": "Bart Jedrocha", "link": "https://stackoverflow.com/users/85125/bart-jedrocha"}, "is_accepted": true, "score": 1, "last_activity_date": 1469593817, "creation_date": 1469593817, "answer_id": 38603749, "question_id": 38602854, "link": "https://stackoverflow.com/questions/38602854/rails5-add-references-to-create-one-to-many/38603749#38603749", "title": "Rails5 add references to create one to many", "body": "<p>You can't create the menu because your migration includes a foreign key constraint on <code>restaurant_id</code>, meaning a menu can't be created without a restaurant (similarly a restaurant can't be destroyed if associated menus exist). If this is your intent, you'll need to either provide a valid <code>restaurant_id</code> when creating the menu or create it through the association on <code>restaurant</code></p>\n\n<pre><code>@restaurant.menus.create(name: 'test1')\n</code></pre>\n\n<p>If you don't need the foreign key constraint, modify the migration and remove the <code>:foreign_key</code> option. If doing this, set the <code>:index</code> option to true.</p>\n"}], "owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 38603749, "answer_count": 1, "score": 0, "last_activity_date": 1469606280, "creation_date": 1469587448, "last_edit_date": 1469606280, "question_id": 38602854, "link": "https://stackoverflow.com/questions/38602854/rails5-add-references-to-create-one-to-many", "title": "Rails5 add references to create one to many", "body": "<p>I create two models call <code>Restaurant</code> and <code>menu</code>, and Restaurant has_many Menu.\nI create Menu by typing </p>\n\n<pre><code>rails g model Menu name restaurant:references\n</code></pre>\n\n<p>But I found out I can't create Menu by type <code>Menu.create(name: \"test1\")</code></p>\n\n<pre><code>m1 = Menu.create(name: \"test1\")\n   (0.2ms)  BEGIN\n   (0.2ms)  ROLLBACK\n =&gt; #&lt;Menu id: nil, name: \"test1\", restaurant_id: nil, created_at: nil, updated_at: nil&gt;\n</code></pre>\n\n<p>Then I checked the <code>migration</code> and <code>schema</code>, in Rails5 migration the <code>references</code>  become this  </p>\n\n<pre><code>#Menu migration\n...\nt.references :restaurant, foreign_key: true\n</code></pre>\n\n<p>I thought in Rails4, it would be somthing like </p>\n\n<pre><code>t.references :restaurant, index: true\n</code></pre>\n\n<p>Is that the reason I could not create meun?</p>\n\n<h2>Update</h2>\n\n<p>Here is migration file </p>\n\n<pre><code>class CreateMenus &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :menus do |t|\n      t.string :name\n      t.references :restaurant, foreign_key: true\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "currency"], "answers": [{"tags": [], "owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "is_accepted": false, "score": 3, "last_activity_date": 1469580649, "creation_date": 1469580649, "answer_id": 38602055, "question_id": 38601529, "link": "https://stackoverflow.com/questions/38601529/currency-conversion-in-rails/38602055#38602055", "title": "Currency conversion in Rails", "body": "<p>What you're looking for is to use exchange rates, I recommend you to use the <code>money</code> gem <a href=\"https://github.com/RubyMoney/money\" rel=\"nofollow\">https://github.com/RubyMoney/money</a> and you can load your exchange rates like:</p>\n\n<blockquote>\n<pre><code>Money.add_rate(\"USD\", \"CAD\", 1.24515)\nMoney.add_rate(\"CAD\", \"USD\", 0.803115)\nMoney.us_dollar(100).exchange_to(\"CAD\")  # =&gt; Money.new(124, \"CAD\")\nMoney.ca_dollar(100).exchange_to(\"USD\")  # =&gt; Money.new(80, \"USD\")\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 4847374, "user_type": "registered", "profile_image": "https://graph.facebook.com/1115016275191896/picture?type=large", "display_name": "Naman Wadhwa", "link": "https://stackoverflow.com/users/4847374/naman-wadhwa"}, "is_accepted": false, "score": 1, "last_activity_date": 1496594617, "creation_date": 1496594617, "answer_id": 44356423, "question_id": 38601529, "link": "https://stackoverflow.com/questions/38601529/currency-conversion-in-rails/44356423#44356423", "title": "Currency conversion in Rails", "body": "<p>You can use the ultra lightweight <a href=\"https://github.com/naman2202/concurrency\" rel=\"nofollow noreferrer\">concurrency</a> gem which provides you with the basic conversion functionality using methods like:</p>\n\n<pre><code>Concurrency.convert(100, \"USD\", \"INR\")  # would convert 100 dollars to Indian Rupees\nConcurrency.conversion_rate(\"USD\", \"INR\")  # would convert 1 USD to INR\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5505351, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a7422e44d18fa2f175b266e3dc52d976?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Orozco", "link": "https://stackoverflow.com/users/5505351/emmanuel-orozco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3810, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1496594617, "creation_date": 1469576397, "question_id": 38601529, "link": "https://stackoverflow.com/questions/38601529/currency-conversion-in-rails", "title": "Currency conversion in Rails", "body": "<p>I have an ecommerce site with multi language.</p>\n\n<p>I am handling the multi-language translation using the I18n API; like this:</p>\n\n<pre><code>def set_locale\n    I18n.locale = session[:locale]\nend\n</code></pre>\n\n<p>This is pretty useful with static texts, so I can have different dictionaries to separate the texts.</p>\n\n<p>How ever, this is an ecommerce; so price variables are needed.</p>\n\n<p>I am trying to use mexican pesos and US dollars</p>\n\n<p>The price is storaged in MXN in database.</p>\n\n<p>I also have one option in the database with the mxn_to_usd value.</p>\n\n<p>So 1 USD = 18 MXN.</p>\n\n<p>Right now, to display prices; I am doing this:</p>\n\n<pre><code>number_to_currency(disc.price, :unit =&gt; \"$\")\n</code></pre>\n\n<p>But this only works for one currency.</p>\n\n<p>What i've tried is to rewrite the number_to_currency method; so when the I18n.locale is \"EN\" it converts the MXN (the one stored in DB) to US dollars.</p>\n\n<p>But no success yet. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "mysql2"], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 4147745, "user_type": "registered", "profile_image": "https://graph.facebook.com/1502621048/picture?type=large", "display_name": "Pradyumna Shembekar", "link": "https://stackoverflow.com/users/4147745/pradyumna-shembekar"}, "edited": false, "score": 0, "creation_date": 1469586359, "post_id": 38602120, "comment_id": 64592909, "body": "I get a syntax error <code>unexpected &#39;)&#39;, expecting</code> <code>unexpected keyword_end, expecting &#39;}&#39;</code>"}, {"owner": {"reputation": 360, "user_id": 4147745, "user_type": "registered", "profile_image": "https://graph.facebook.com/1502621048/picture?type=large", "display_name": "Pradyumna Shembekar", "link": "https://stackoverflow.com/users/4147745/pradyumna-shembekar"}, "edited": false, "score": 0, "creation_date": 1469653902, "post_id": 38602120, "comment_id": 64632081, "body": "I tried doing that. It gives me something like <code>SELECT &#39;fashion_models&#39;.&#39;id&#39; AS t0_r0, &#39;fashion_models&#39;.&#39;first_name&#39; AS t0_r1, &#39;fashion_models&#39;.&#39;last_name&#39; AS t0_r2</code> and then throws an error:  <code>ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column &#39;measurement.eyes&#39;</code>"}], "tags": [], "owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "is_accepted": false, "score": 2, "last_activity_date": 1469586989, "last_edit_date": 1469586989, "creation_date": 1469581256, "answer_id": 38602120, "question_id": 38601339, "link": "https://stackoverflow.com/questions/38601339/using-named-scopes-in-ruby-on-rails-4-on-associated-models/38602120#38602120", "title": "Using named scopes in Ruby on Rails 4 on associated models", "body": "<p>Define your scope as:</p>\n\n<pre><code>scope :eye_color, -&gt;(eye_color) {\n  includes(:measurements).where(measurements: {eyes: eye_color}) \n}\n</code></pre>\n\n<p>And then query with a param like:</p>\n\n<pre><code>FashionModel.eye_color(\"Amber\")\n</code></pre>\n"}], "owner": {"reputation": 360, "user_id": 4147745, "user_type": "registered", "profile_image": "https://graph.facebook.com/1502621048/picture?type=large", "display_name": "Pradyumna Shembekar", "link": "https://stackoverflow.com/users/4147745/pradyumna-shembekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469586989, "creation_date": 1469574907, "question_id": 38601339, "link": "https://stackoverflow.com/questions/38601339/using-named-scopes-in-ruby-on-rails-4-on-associated-models", "title": "Using named scopes in Ruby on Rails 4 on associated models", "body": "<p>My app consists of 3 models:</p>\n\n<p><code>FashionModel</code><br />\n<code>Measurement</code> <br />\n<code>ModelProfile</code><br /></p>\n\n<pre><code>class FashionModel &lt; ActiveRecord::Base\n  has_secure_password\n  has_one :model_profile\n  has_one :measurement\n  accepts_nested_attributes_for :model_profile\n  accepts_nested_attributes_for :measurement\nend\n\n\nclass ModelProfile &lt; ActiveRecord::Base\n  belongs_to :fashion_model\nend\n\n\nclass Measurement &lt; ActiveRecord::Base\n  belongs_to :fashion_model\nend\n</code></pre>\n\n<p>The schema is roughly as follows:</p>\n\n<pre><code>create_table \"fashion_models\", force: :cascade do |t|\n    t.string   \"first_name\",             limit: 25\n    t.string   \"last_name\",              limit: 25\n    t.string   \"email\",                  limit: 255, null: false\n    t.datetime \"created_at\",                         null: false\n    t.datetime \"updated_at\",                         null: false\n    t.string   \"password_digest\",        limit: 255\n    t.string   \"password_reset_token\",   limit: 255\n    t.datetime \"password_reset_sent_at\"\n  end\n\n  create_table \"measurements\", force: :cascade do |t|\n    t.integer  \"fashion_model_id\", limit: 4\n    t.decimal  \"feet\",                         precision: 10\n    t.decimal  \"inches\",                       precision: 10\n    t.decimal  \"bust\",                         precision: 10, default: 36\n    t.decimal  \"waist\",                        precision: 10, default: 28\n    t.decimal  \"hips\",                         precision: 10, default: 36\n    t.decimal  \"shoes\",                        precision: 10\n    t.integer  \"dress\",            limit: 4\n    t.string   \"eyes\",             limit: 255\n    t.string   \"hair\",             limit: 255\n    t.datetime \"created_at\",                                               null: false\n    t.datetime \"updated_at\",                                               null: false\n  end\n\n  create_table \"model_profiles\", force: :cascade do |t|\n    t.integer  \"fashion_model_id\", limit: 4\n    t.string   \"phone_number\",     limit: 255\n    t.date     \"birthdate\"\n    t.text     \"bio\",              limit: 65535\n    t.string   \"location\",         limit: 255,                  default: \"Venice\"\n    t.string   \"gender\",           limit: 255\n    t.decimal  \"rate\",                           precision: 10, default: 100\n    t.string   \"profile_picture\",  limit: 255\n    t.datetime \"created_at\",                                                       null: false\n    t.datetime \"updated_at\",                                                       null: false\n  end\n\n  add_index \"model_profiles\", [\"fashion_model_id\"], name: \"index_model_profiles_on_fashion_model_id\", using: :btree\n\n  add_foreign_key \"bookings\", \"fashion_models\"\n  add_foreign_key \"fashion_model_photos\", \"fashion_models\"\nend\n</code></pre>\n\n<p>I am trying to filter out data based on the input. For example someone searches for a model with height 5'8\", with black eyes, and brown hair, I should display only those models by querying the database.</p>\n\n<p>Therefore, I am trying to use named scopes in the model. I am not sure how do I scope the attributes of the <code>measurement</code> table by writing a scope in the <code>FashionModel</code> model.</p>\n\n<p>I read a few resources online and from what I understood, I wrote something like </p>\n\n<pre><code>scope :eye_color, includes(:measurement).where(measurement: { eyes: \"Amber\" })\n</code></pre>\n\n<p>Though I don't want to hardcode <code>Amber</code> into the eyes field, I get an error in my console when trying to access this scope. I do something like </p>\n\n<pre><code>a = FashionModel.all\na.eye_color\n</code></pre>\n\n<p>This gives me an and <code>ArgumentError: wrong number of arguments (given 0, expected 1)</code>.</p>\n\n<p>I also tried doing this</p>\n\n<pre><code>scope :eye_color, -&gt; (eye_color) { where eyes: eye_color }\n</code></pre>\n\n<p>and then calling it by <code>a.eye_color(\"Amber\")</code>, which in turn gave me a <code>NoMethodError: undefined method 'measurement' for Class</code>. </p>\n\n<p>So basically I want to scope into the child models from the parent model.\nAny help is much appreciated! Thanks</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 6525708, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f2000a144af078affac30281f77b4ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6525708/ben"}, "edited": false, "score": 0, "creation_date": 1469575852, "post_id": 38601459, "comment_id": 64590674, "body": "Trying to do mock testing without a mock library...long story :)"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 1, "last_activity_date": 1469575775, "creation_date": 1469575775, "answer_id": 38601459, "question_id": 38601335, "link": "https://stackoverflow.com/questions/38601335/setting-an-attr-accessor-instance-variable-in-ruby/38601459#38601459", "title": "Setting an attr_accessor instance variable in Ruby", "body": "<p>Not entirely sure what you're trying to do but have a look at the <a href=\"http://ruby-doc.org/core-2.3.1/Struct.html\" rel=\"nofollow\"><code>Struct</code></a> class. For your example you may be looking for something like this:</p>\n\n<pre><code>Struct.new(\"Person\", :first_name)\nmock_person = Struct::Person.new('John')\nmock_person.first_name #=&gt; \"John\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 0, "last_activity_date": 1553412915, "last_edit_date": 1553412915, "creation_date": 1469575983, "answer_id": 38601485, "question_id": 38601335, "link": "https://stackoverflow.com/questions/38601335/setting-an-attr-accessor-instance-variable-in-ruby/38601485#38601485", "title": "Setting an attr_accessor instance variable in Ruby", "body": "<p>You call <code>attr_accessor</code> on <code>mock_person</code>'s <a href=\"https://ruby-doc.org/core/Object.html#method-i-singleton_class\" rel=\"nofollow noreferrer\">singleton class</a> using <a href=\"https://ruby-doc.org/core/Module.html#method-i-class_eval\" rel=\"nofollow noreferrer\"><code>class_eval</code></a>:</p>\n\n<pre><code>mock_person = Object.new\nmock_person.singleton_class.class_eval { attr_accessor :first_name }\nmock_person.first_name = 'pancakes'\nputs mock_person.first_name\n# =&gt; pancakes\nputs mock_person.instance_variable_get(:@first_name)\n# =&gt; pancakes\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 6525708, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f2000a144af078affac30281f77b4ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6525708/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 38601459, "answer_count": 2, "score": 0, "last_activity_date": 1553412915, "creation_date": 1469574870, "question_id": 38601335, "link": "https://stackoverflow.com/questions/38601335/setting-an-attr-accessor-instance-variable-in-ruby", "title": "Setting an attr_accessor instance variable in Ruby", "body": "<pre><code>mock_person = Object.new\nmock_person.instance_variable_set(:@first_name, 'John')\nmock_person.first_name # NoMethodError: Undefined method `first-name`\n\n\nmock_person = Object.new\ndef mock_person.first_name()\n    return 'John'\nend\nmock_person.first_name # This works\n</code></pre>\n\n<p>Is there a cleaner way to do this? Ideally when I use <code>instance_variable_set</code>, I want to specify that the variable should be <code>attr_accessor</code>.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "edited": false, "score": 0, "creation_date": 1469573323, "post_id": 38600980, "comment_id": 64589897, "body": "got it to work when I converted the array to a string and then an integer <code>x.select { |k,v| k.include? &#39;O&#39; }.values.join(&quot;,&quot;).to_i</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "edited": false, "score": 0, "creation_date": 1469574011, "post_id": 38600980, "comment_id": 64590110, "body": "So do you want to find the first value whose key is <code>&quot;O&quot;</code>? In which case is this better: <code>value = hash.find {|k,v| k[0] == &#39;O&#39; }.first</code>?"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 0, "last_activity_date": 1469572718, "creation_date": 1469572718, "answer_id": 38600980, "question_id": 38600849, "link": "https://stackoverflow.com/questions/38600849/how-can-i-determine-if-the-hash-has-a-key-containing-o-and-then-return-the-val/38600980#38600980", "title": "How Can I Determine If The Hash Has A Key Containing &quot;O&quot; And Then Return The Value of the Key Containing &quot;O&quot;?", "body": "<p>Try:</p>\n\n<pre><code>hash = {\"N1\" =&gt; 14, \"O1\" =&gt; 15, \"O2\" =&gt; 16}\nvalues = hash.select { |k,v| k.include? 'O' }.values #=&gt; [15, 16]\n</code></pre>\n\n<p>This code uses <a href=\"http://ruby-doc.org/core-2.3.1/Hash.html#method-i-select\" rel=\"nofollow\"><code>Hash#select</code></a> to specify the condition, <a href=\"http://ruby-doc.org/core-2.3.1/String.html#method-i-include-3F\" rel=\"nofollow\"><code>String#include?</code></a> to check each key and <a href=\"http://ruby-doc.org/core-2.3.1/Hash.html#method-i-values\" rel=\"nofollow\"><code>Hash#values</code></a> to return the values in an array.</p>\n"}, {"tags": [], "owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "is_accepted": false, "score": 1, "last_activity_date": 1471041473, "last_edit_date": 1471041473, "creation_date": 1469575638, "answer_id": 38601443, "question_id": 38600849, "link": "https://stackoverflow.com/questions/38600849/how-can-i-determine-if-the-hash-has-a-key-containing-o-and-then-return-the-val/38601443#38601443", "title": "How Can I Determine If The Hash Has A Key Containing &quot;O&quot; And Then Return The Value of the Key Containing &quot;O&quot;?", "body": "<p>Just to point out, something like this below will make sure 'O' is the first character like you specify. <code>include?</code> will check the entire string, but that's probably ok for what you're doing. </p>\n\n<pre><code>values = hash.select { |k,v| k[0] == 'O' }.values\n</code></pre>\n"}], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 38600980, "answer_count": 2, "score": 1, "last_activity_date": 1471041473, "creation_date": 1469571916, "question_id": 38600849, "link": "https://stackoverflow.com/questions/38600849/how-can-i-determine-if-the-hash-has-a-key-containing-o-and-then-return-the-val", "title": "How Can I Determine If The Hash Has A Key Containing &quot;O&quot; And Then Return The Value of the Key Containing &quot;O&quot;?", "body": "<p>I am reporting from an excel spreadsheet and I need to run tests on values in column \"O\"</p>\n\n<p>to do this, I first have extended the <code>Hash</code> class to include a method that checks that a key exists with \"O\" but now I need to test the value of that key.</p>\n\n<pre><code>require 'creek'\n\nclass Hash\n  def has_rkey?(search)\n    search = Regexp.new(search.to_s) unless search.is_a?(Regexp)\n    !!keys.detect{ |key| key =~ search }\n  end\nend\n\ncreek = Creek::Book.new \"timesheet.xlsm\"\nsheet = creek.sheets[0]\n\ndata = {}\nsheet.rows.each do |row|\n  x = {}\n  row.each do |key, val|\n    cell = {key =&gt; val}\n    x.merge!(cell)\n  end\n  if x.has_rkey?('O')\n    #Some way of returning the value of the key containing \"O\"\n  end\n  data.merge!(x)\nend\n</code></pre>\n\n<p>lets say <code>x</code> was a hash containing <code>{\"N1\" =&gt; 14, \"O1\" =&gt; 15}</code>\nI want to return the value of the key containing the letter \"O\", which is <code>15</code></p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1469572878, "post_id": 38600628, "comment_id": 64589745, "body": "You have to add <code>gem &#39;responders&#39;</code> to your Gemfile."}, {"owner": {"reputation": 1600, "user_id": 1395009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/88yfK.jpg?s=128&g=1", "display_name": "nikkypx", "link": "https://stackoverflow.com/users/1395009/nikkypx"}, "edited": false, "score": 2, "creation_date": 1469575941, "post_id": 38600628, "comment_id": 64590693, "body": "See here <a href=\"http://stackoverflow.com/questions/35983628/undefined-instance-method-respond-to-in-rails-5-api-controller\" title=\"undefined instance method respond to in rails 5 api controller\">stackoverflow.com/questions/35983628/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "is_accepted": true, "score": 23, "last_activity_date": 1469586004, "creation_date": 1469586004, "answer_id": 38602666, "question_id": 38600628, "link": "https://stackoverflow.com/questions/38600628/undefined-method-respond-to-in-rails-5-controller/38602666#38602666", "title": "undefined method respond_to in Rails 5 controller", "body": "<p>As per <a href=\"https://github.com/rails/rails/blob/v5.0.0/actionpack/CHANGELOG.md\">Rails 5 release notes,</a></p>\n\n<blockquote>\n  <p>Remove respond_to/respond_with placeholder methods, this functionality\n  has been extracted to the responders gem.</p>\n</blockquote>\n\n<p>Add <code>responders</code> gem to your Gemfile.</p>\n"}], "owner": {"reputation": 894, "user_id": 3638724, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/778a344a5b886e6897657b5ac1f48d1e?s=128&d=identicon&r=PG&f=1", "display_name": "xeroshogun", "link": "https://stackoverflow.com/users/3638724/xeroshogun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7906, "favorite_count": 2, "accepted_answer_id": 38602666, "answer_count": 1, "score": 13, "last_activity_date": 1469586004, "creation_date": 1469570709, "question_id": 38600628, "link": "https://stackoverflow.com/questions/38600628/undefined-method-respond-to-in-rails-5-controller", "title": "undefined method respond_to in Rails 5 controller", "body": "<p>I'm upgrading an app from rails 3.something to rails 5.  For some reason, I'm am getting undefindied method respond_to anytime I use that method in any of my controllers.  This was working before and I was hoping someone here could help.</p>\n\n<pre><code>class StatusController &lt; ApplicationController\n\n  #this throws an error 'undefined method respond_to\n  respond_to :json, :html     \n end\n</code></pre>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber"], "comments": [{"owner": {"reputation": 2860, "user_id": 3655261, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/SVKn1.jpg?s=128&g=1", "display_name": "Priyanshu Shekhar", "link": "https://stackoverflow.com/users/3655261/priyanshu-shekhar"}, "edited": false, "score": 0, "creation_date": 1469603580, "post_id": 38600586, "comment_id": 64599070, "body": "Why do you need excel report?"}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 1, "creation_date": 1469632731, "post_id": 38600586, "comment_id": 64620072, "body": "You can output to json then import to excel. <a href=\"http://stackoverflow.com/questions/8044423/json-import-to-excel\">stackoverflow.com/questions/8044423/json-import-to-excel</a>"}, {"owner": {"reputation": 21, "user_id": 6606609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc67d7d7c299ea868a3059d808fbe883?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/6606609/ajay"}, "edited": false, "score": 0, "creation_date": 1469635613, "post_id": 38600586, "comment_id": 64622053, "body": "I had generated the HTML report but my team leader told me to generate the excel sheet report, so that is the reason.( Priyanshu Shekhar)"}, {"owner": {"reputation": 21, "user_id": 6606609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc67d7d7c299ea868a3059d808fbe883?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/6606609/ajay"}, "edited": false, "score": 0, "creation_date": 1469635816, "post_id": 38600586, "comment_id": 64622169, "body": "Hi  Dave McNulla, Is there any other way to generate the excel report. Thanks in advance."}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1469642544, "post_id": 38600586, "comment_id": 64626017, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4822422/output-array-to-csv-in-ruby\">Output array to CSV in Ruby</a>"}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 0, "creation_date": 1469642559, "post_id": 38600586, "comment_id": 64626023, "body": "Write to CSV and then import to Excel. See the link above."}, {"owner": {"reputation": 21, "user_id": 6606609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc67d7d7c299ea868a3059d808fbe883?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/6606609/ajay"}, "edited": false, "score": 0, "creation_date": 1469731273, "post_id": 38600586, "comment_id": 64671681, "body": "Hi JeffC, But how to convert the CSV to excel."}, {"owner": {"reputation": 21, "user_id": 6606609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc67d7d7c299ea868a3059d808fbe883?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/6606609/ajay"}, "edited": false, "score": 0, "creation_date": 1469821777, "post_id": 38600586, "comment_id": 64713965, "body": "I have created csv and able to output the array into CSV.        Here is my code      require &#39;csv&#39; class Csv_Excel    def initialize(browser)     @browser = browser   end    def loading_to_csv     CSV.open(&quot;c:/AJAY/report.csv&quot;, &quot;wb&quot;) do |csv|       csv &lt;&lt; [&quot;time&quot;, &quot;url&quot;, &quot;elec_disc&quot;, &quot;check_box&quot;, &quot;full_disc&quot;, &quot;report&quot; ]     end   end end  But here my question is how to convert csv into excel ."}, {"owner": {"reputation": 6104, "user_id": 1119381, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/aab36e75e2a1b09199da99501429f49e?s=128&d=identicon&r=PG", "display_name": "Eugene S", "link": "https://stackoverflow.com/users/1119381/eugene-s"}, "edited": false, "score": 0, "creation_date": 1470880546, "post_id": 38600586, "comment_id": 65132759, "body": "How do you expect this report to look like? I mean an excel report only makes sense if you have results of multiple runs and you want to fit them all in an excel sheet."}, {"owner": {"reputation": 21, "user_id": 6606609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc67d7d7c299ea868a3059d808fbe883?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/6606609/ajay"}, "edited": false, "score": 0, "creation_date": 1471542344, "post_id": 38600586, "comment_id": 65399732, "body": "Hi Eugene, Do you know how to create excel sheet report, it does&#39;t matter how it looks but I need to generate the excel report."}], "owner": {"reputation": 21, "user_id": 6606609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc67d7d7c299ea868a3059d808fbe883?s=128&d=identicon&r=PG&f=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/6606609/ajay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1122, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1469580072, "creation_date": 1469570479, "last_edit_date": 1469580072, "question_id": 38600586, "link": "https://stackoverflow.com/questions/38600586/how-to-create-excel-report-in-cucumber-project", "title": "How to create excel report in cucumber project", "body": "<p>I know how to create HTML reports, but I don't know how to create excel report. Does anyone know how to create the excel report.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 11362, "user_id": 5017586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6cf237e6b3b0f4e8ed76d138336bed4?s=128&d=identicon&r=PG&f=1", "display_name": "error2007s", "link": "https://stackoverflow.com/users/5017586/error2007s"}, "edited": false, "score": 0, "creation_date": 1469570945, "post_id": 38600198, "comment_id": 64589103, "body": "Can you elaborate more what you are trying to archive?"}, {"owner": {"reputation": 57, "user_id": 2812176, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4586b5cb150d819a0eb8aa7f0440d807?s=128&d=identicon&r=PG&f=1", "display_name": "qwas", "link": "https://stackoverflow.com/users/2812176/qwas"}, "reply_to_user": {"reputation": 11362, "user_id": 5017586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b6cf237e6b3b0f4e8ed76d138336bed4?s=128&d=identicon&r=PG&f=1", "display_name": "error2007s", "link": "https://stackoverflow.com/users/5017586/error2007s"}, "edited": false, "score": 0, "creation_date": 1469631492, "post_id": 38600198, "comment_id": 64619206, "body": "When i upload files to S3 through my application it should not be made visible to public. Currently when I am uploading the file it can be viewed by anyone."}], "owner": {"reputation": 57, "user_id": 2812176, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4586b5cb150d819a0eb8aa7f0440d807?s=128&d=identicon&r=PG&f=1", "display_name": "qwas", "link": "https://stackoverflow.com/users/2812176/qwas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1469568583, "creation_date": 1469568583, "question_id": 38600198, "link": "https://stackoverflow.com/questions/38600198/aws-s3-private-public-file-sharing", "title": "AWS S3 private public file sharing", "body": "<p>I am working on rails app using fog and aws-ruby -sdk v2.\nCan someone  please direct me to resources attach public and private files in S3 bucket at runtime of the web app.\nHave used UserPolicy and Bucket Policy but to no success.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 2034276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a59ebed8c0712a454cddf45ed34f2e8?s=128&d=identicon&r=PG", "display_name": "user2034276", "link": "https://stackoverflow.com/users/2034276/user2034276"}, "edited": false, "score": 0, "creation_date": 1469624172, "post_id": 38599546, "comment_id": 64613418, "body": "no such luck, though I&#39;m not sure where it&#39;s going wrong. With my code above I&#39;m getting no changes, but when i explicitly set self.value = @value, It saves values of logo (i.e it has a url and other paperclip attributes), but it cannot find the file. I&#39;m not sure how paperclip is saving the files and how to use that"}, {"owner": {"reputation": 2090, "user_id": 2150422, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/df001f7b3e8ae5f37976f16837671e01?s=128&d=identicon&r=PG", "display_name": "Jeremy Blalock", "link": "https://stackoverflow.com/users/2150422/jeremy-blalock"}, "reply_to_user": {"reputation": 19, "user_id": 2034276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a59ebed8c0712a454cddf45ed34f2e8?s=128&d=identicon&r=PG", "display_name": "user2034276", "link": "https://stackoverflow.com/users/2034276/user2034276"}, "edited": false, "score": 0, "creation_date": 1469640168, "post_id": 38599546, "comment_id": 64624648, "body": "Probably your best bet is to just add the extra columns. I know you don&#39;t need the information, but is it really going to cause a problem? Maybe better to just bite the bullet and add the extra columns."}, {"owner": {"reputation": 19, "user_id": 2034276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a59ebed8c0712a454cddf45ed34f2e8?s=128&d=identicon&r=PG", "display_name": "user2034276", "link": "https://stackoverflow.com/users/2034276/user2034276"}, "edited": false, "score": 0, "creation_date": 1469644236, "post_id": 38599546, "comment_id": 64627008, "body": "The problem is that the columns would be added to a table used for STI in a gem, so all fields inherited from it in the gem would have nil for all paperclip columns. It&#39;s not ideal, but it is the only solution I&#39;ve gotten to work so far."}], "tags": [], "owner": {"reputation": 2090, "user_id": 2150422, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/df001f7b3e8ae5f37976f16837671e01?s=128&d=identicon&r=PG", "display_name": "Jeremy Blalock", "link": "https://stackoverflow.com/users/2150422/jeremy-blalock"}, "is_accepted": false, "score": 0, "last_activity_date": 1469565905, "creation_date": 1469565905, "answer_id": 38599546, "question_id": 38599417, "link": "https://stackoverflow.com/questions/38599417/how-to-use-paperclip-with-one-column/38599546#38599546", "title": "How to use paperclip with one column", "body": "<p>I have not tried this, but it's work a try:</p>\n\n<pre><code>class FileField &lt; Field\n  attr_accessor :logo_file_size, :logo_content_type, :logo_updated_at\n  has_attached_file :logo\n  ...\nend\n</code></pre>\n\n<p>The idea is to trick paperclip into thinking that there are those attributes available, and not caring what values are returned.</p>\n"}], "owner": {"reputation": 19, "user_id": 2034276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a59ebed8c0712a454cddf45ed34f2e8?s=128&d=identicon&r=PG", "display_name": "user2034276", "link": "https://stackoverflow.com/users/2034276/user2034276"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470672115, "creation_date": 1469565365, "last_edit_date": 1470672115, "question_id": 38599417, "link": "https://stackoverflow.com/questions/38599417/how-to-use-paperclip-with-one-column", "title": "How to use paperclip with one column", "body": "<p>How would I go about using only one column to represent all four paperclip attributes?</p>\n\n<ul>\n<li>_file_name</li>\n<li>_file_size</li>\n<li>_content_type</li>\n<li>_updated_at</li>\n</ul>\n\n<p>I'm testing with only the file_name attribute, because that's all that paperclip requires, and storing all my data in a value column on Field, which FileField Inherits. I was thinking I could just overwrite the file_name reading and writing, but that isn't working. </p>\n\n<pre><code>#model\nclass FileField &lt; Field\n  has_attached_file :logo\n  do_not_validate_attachment_file_type :logo\n  def logo_file_name=(file_name)\n    if file_name.present?\n      @value = file_name\n    end\n  end\n  def logo_file_name\n    @value\n  end\n\n\n#form\n= f.input :logo, as: :file\n</code></pre>\n\n<p><strong>Update</strong>\nMy syntax was wrong, I was able to get it working with the following </p>\n\n<pre><code>has_attached_file :attachment\n\n\nvalidates_attachment :attachment, presence: true,\n  content_type: { content_type: [\"image/jpeg\", \"image/png\"] },\n  size: { in: 0..15.kilobytes }\ndef attachment_file_name=(file_name)\n  if file_name.present?\n    self.value = \"#{file_name},#{attachment_content_type},#{attachment_file_size},#{attachment_updated_at}\"\n  end\nend\ndef attachment_file_name\n  self.value.to_s.split(\",\").first\nend\ndef attachment_content_type=(content_type)\n  if content_type.present?\n    self.value = \"#{attachment_file_name},#{content_type},#{attachment_file_size},#{attachment_updated_at}\"\n  end\nend\ndef attachment_content_type\n  self.value.to_s.split(\",\").second\nend\ndef attachment_file_size=(file_size)\n  self.value = \"#{attachment_file_name},#{attachment_content_type},#{file_size},#{attachment_updated_at}\"\nend\ndef attachment_file_size\n  self.value.to_s.split(\",\").third.to_i unless self.value.to_s.split(\",\").third.blank?\nend\ndef attachment_updated_at=(value)\n  self.value = \"#{attachment_file_name},#{attachment_content_type},#{attachment_file_size},#{value}\"\nend\ndef attachment_updated_at\n  self.value.to_s.split(\",\").fourth\nend\n</code></pre>\n"}, {"tags": ["ruby", "cucumber", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1469566319, "post_id": 38599332, "comment_id": 64587235, "body": "Where does <code>verify_contains</code> come from? I don&#39;t think that is Watir, so are you using another gem to supplement Watir?"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1469745378, "post_id": 38599332, "comment_id": 64678253, "body": "You might want to review <a href=\"https://github.com/styleguide/ruby/syntax\" rel=\"nofollow noreferrer\">github.com/styleguide/ruby/syntax</a>.. it won&#39;t help you with actual code (such as how to access elements of a hash) but it will help you present the code in a way that at least looks like proper ruby code ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5219785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de7f3fe22a40c4482bbfec1d32f2055c?s=128&d=identicon&r=PG&f=1", "display_name": "Laura", "link": "https://stackoverflow.com/users/5219785/laura"}, "edited": false, "score": 0, "creation_date": 1469628354, "post_id": 38600007, "comment_id": 64616672, "body": "Thanks Justin. The second option worked perfectly. I figured that was how I was going to have to do it, but this option keeps the script running even if one of the validations fail."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1469567729, "creation_date": 1469567729, "answer_id": 38600007, "question_id": 38599332, "link": "https://stackoverflow.com/questions/38599332/how-to-use-a-table-in-cucumber-with-ruby-to-verify-data-on-web-form/38600007#38600007", "title": "How to use a table in Cucumber with Ruby to verify data on web form", "body": "<p>Unless you have an easy way to map the Cucumber table to the Watir fields, iteration might not be useful. The simplest approach is to directly check that each field under test matches the table.</p>\n\n<p>I am not sure which assertion library you are using, but as an example, the following uses the RSpec Expectations:</p>\n\n<pre><code>Then (/^I will be able to view my information pre-populated from IAM.$/) do |table|\n  information = table.rows_hash\n\n  expect(@browser.text_field(:name=&gt;'firstName').value).to eq(information['First Name/Given Name'])\n  expect(@browser.text_field(:name=&gt;'lastName').value).to eq(information['Last Name/Surname'])\n  # etc. for each field\nend\n</code></pre>\n\n<p>Note that the test will fail at the first incorrect field. If you want to assert all of the fields at once, you can retrieve them into a <code>Hash</code> and compare it to the table:</p>\n\n<pre><code>Then (/^I will be able to view my information pre-populated from IAM.$/) do |table|\n  form_fields = {\n    'First Name/Given Name' =&gt; @browser.text_field(:name=&gt;'firstName').value,\n    'Last Name/Surname' =&gt; @browser.text_field(:name=&gt;'lastName').value\n  }\n  expect(form_fields).to eq(table.rows_hash)\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5219785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de7f3fe22a40c4482bbfec1d32f2055c?s=128&d=identicon&r=PG&f=1", "display_name": "Laura", "link": "https://stackoverflow.com/users/5219785/laura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1052, "favorite_count": 0, "accepted_answer_id": 38600007, "answer_count": 1, "score": 1, "last_activity_date": 1469745143, "creation_date": 1469565051, "last_edit_date": 1469745143, "question_id": 38599332, "link": "https://stackoverflow.com/questions/38599332/how-to-use-a-table-in-cucumber-with-ruby-to-verify-data-on-web-form", "title": "How to use a table in Cucumber with Ruby to verify data on web form", "body": "<p>I am using Cucumber with Ruby and Watir webdriver. </p>\n\n<p>What I am trying to do is verify that data that is pre-populated on a web form matches the data in a table in the features file in Cucumber. I need help in writing the Ruby code in the step definitions file. Here is what I have so far: </p>\n\n<pre><code>Cucumber feature: \nThen I will be able to view my information pre-populated from IAM as follows:\n\n|First Name/Given Name  |Chimwemwe       |\n|Last Name/Surname      |Rossi           |\n|Country                |USA             |\n|Address                |fdafda          |\n|City                   |fdafd           |\n|State                  |Louisana        |\n|Postal Code            |99999           |\n\nThen (/^I will be able to view my information pre-populated from IAM.$/) do   |table|\n    information = table.rows_hash\n    information.each do |entry|\n    contact_info = entry [0]\n    if @browser.text_field(:name=&gt;'firstName').verify_contains(contact_info[0])==true\n        puts \"Passed\"\n    else\n        puts \"Failed\"\n    end\nend\n</code></pre>\n\n<p>I am only doing the first row for now until I get it to work. I would like it to eventually iterate through the table. </p>\n\n<p>when I try to run the script all I get is this error: #table is a Cucumber::Core::Ast::DataTable.</p>\n\n<p>I am fairly new to Ruby/Cucumber and this is the most complicated script I have written so far. Any help on how to do this would be really helpful. I know I need an array, but i have been looking at so much of this online, I feel like my brain is going to explode. Thanks. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 8490, "user_id": 674064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bf2cf5a797565e548088053644704e7?s=128&d=identicon&r=PG", "display_name": "das-g", "link": "https://stackoverflow.com/users/674064/das-g"}, "edited": false, "score": 1, "creation_date": 1469564659, "post_id": 38599077, "comment_id": 64586422, "body": "What&#39;s the factory for <code>:contract</code>?"}, {"owner": {"reputation": 151, "user_id": 4471589, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/abb7d895b99a06277c9df9c9e45a6f83?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrij", "link": "https://stackoverflow.com/users/4471589/dmitrij"}, "reply_to_user": {"reputation": 8490, "user_id": 674064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bf2cf5a797565e548088053644704e7?s=128&d=identicon&r=PG", "display_name": "das-g", "link": "https://stackoverflow.com/users/674064/das-g"}, "edited": false, "score": 0, "creation_date": 1469566109, "post_id": 38599077, "comment_id": 64587121, "body": "I updated question."}, {"owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 0, "creation_date": 1469568027, "post_id": 38599077, "comment_id": 64588047, "body": "don&#39;t quite understand the definition of <code>association :user</code> twice, can you elaborate?"}], "answers": [{"tags": [], "owner": {"reputation": 8490, "user_id": 674064, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5bf2cf5a797565e548088053644704e7?s=128&d=identicon&r=PG", "display_name": "das-g", "link": "https://stackoverflow.com/users/674064/das-g"}, "is_accepted": true, "score": 3, "last_activity_date": 1469568141, "creation_date": 1469568141, "answer_id": 38600085, "question_id": 38599077, "link": "https://stackoverflow.com/questions/38599077/factorygirlattributedefinitionerror-attribute-already-defined-user/38600085#38600085", "title": "FactoryGirl::AttributeDefinitionError: Attribute already defined: user", "body": "<p>Factory <code>:contract</code> defines two attributes named <code>user</code>, which isn't allowed.</p>\n\n<p>Give them unique (within the factory) labels, e.g.:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :contract do\n    sequence(:title) { |n| \"translation#{n}\" }\n    amount 150\n    additional_information 'X' * 500\n    due_date { 21.days.from_now }\n\n    association :client, factory: :client\n    association :contractor, factory: :contractor\n  end\nend\n</code></pre>\n\n<p>As they seem fitting, I've chosen attribute names corresponding with the factory names. This allows to even shorten this, by leaving out the factory name:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :contract do\n    sequence(:title) { |n| \"translation#{n}\" }\n    amount 150\n    additional_information 'X' * 500\n    due_date { 21.days.from_now }\n\n    client\n    contractor\n  end\nend\n</code></pre>\n\n<p>(See <a href=\"http://www.rubydoc.info/gems/factory_girl/file/GETTING_STARTED.md\" rel=\"nofollow\">http://www.rubydoc.info/gems/factory_girl/file/GETTING_STARTED.md</a>, section \"Associations\":</p>\n\n<blockquote>\n  <p>If the factory name is the same as the association name, the factory name can be left out.</p>\n</blockquote>\n\n<p>)</p>\n"}], "owner": {"reputation": 151, "user_id": 4471589, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/abb7d895b99a06277c9df9c9e45a6f83?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrij", "link": "https://stackoverflow.com/users/4471589/dmitrij"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4471, "favorite_count": 0, "accepted_answer_id": 38600085, "answer_count": 1, "score": 3, "last_activity_date": 1469568141, "creation_date": 1469564032, "last_edit_date": 1469566024, "question_id": 38599077, "link": "https://stackoverflow.com/questions/38599077/factorygirlattributedefinitionerror-attribute-already-defined-user", "title": "FactoryGirl::AttributeDefinitionError: Attribute already defined: user", "body": "<p>I created factory client and contract. I run test, but display error  </p>\n\n<pre><code>FactoryGirl.define do\n  factory :client, class: User do\n    role 'client'\n    first_name 'John'\n    sequence(:last_name) {  |n| \"client#{n}\" }\n    sequence(:email) { |n| \"client#{n}@example.com\" }\n    # avatar { Rack::Test::UploadedFile.new(File.join(Rails.root, 'public', 'images', '128.jpg')) }\n    password 'password'\n    password_confirmation 'password'\n  end\nend\n</code></pre>\n\n<p><strong>support/controller_macros.rb</strong></p>\n\n<pre><code>module ControllerMacros\n  def login_client\n    before do\n      @client = create(:client)\n      #@request.env['devise.mapping'] = Devise.mappings[:client]\n      sign_in @client\n    end\n  end\nend\n\nFactoryGirl.define do\n  factory :contract do\n    sequence(:title) { |n| \"translation#{n}\" }\n    amount 150\n    additional_information 'X' * 500\n    due_date { 21.days.from_now }\n\n    association :user, factory: :client\n    association :user, factory: :contractor\n  end\nend\n</code></pre>\n\n<p>I run test\nrspec spec/controllers/contracts_controller_spec.rb</p>\n\n<pre><code>require 'rails_helper'\n\ndescribe ContractsController do\n  login_client\n  let(:contract) { create(:contract) }\n\n  describe 'POST #create' do\n\n    context 'with valid attributes' do\n      it 'redirects to payment page' do\n        post :create, contract: attributes_for(:contract)\n        expect(response).to redirect_to payment_new_path\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Error display:\n</p>\n\n<pre><code>Failure/Error: post :create, contract: attributes_for(:contract)\n  FactoryGirl::AttributeDefinitionError:\n    Attribute already defined: user\n</code></pre>\n\n<p>What is wrong in factory or test? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 1, "creation_date": 1469561839, "post_id": 38598464, "comment_id": 64584917, "body": "Welcome to Rails and SO! How are you running the server? What&#39;s the output of the terminal? What URL are you visiting in your web browser? Please include as much information as possible for us to help you."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1469625978, "post_id": 38598540, "comment_id": 64614888, "body": "thanks spickermann for your guidance but it seems as tho the issue did not resolve by trying /pic but i did get a new error &quot;uninitialized constant PicController&quot;   the following is my code for routes.rb file.                                                                                                                      &quot;Rails.application.routes.draw do resources :pic root &quot;pics#index&quot; end&quot;"}, {"owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1469626456, "post_id": 38598540, "comment_id": 64615251, "body": "follow up...is there a reason why my text is white? in the videos of udemy the proctors text in sublime is blueish"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1469626967, "post_id": 38598540, "comment_id": 64615637, "body": "You can configure IDEs to use what color you prefer. The creator of the video might have changed the default colors."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1469627073, "post_id": 38598540, "comment_id": 64615722, "body": "To be able to solve the <code>uninitialized constant PicController</code> issue, please post your <code>config&#47;routes.rb</code> file."}, {"owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1469630521, "post_id": 38598540, "comment_id": 64618449, "body": "Rails.application.routes.draw do resources :pic root &quot;pics#index&quot; get &#39;posts&#39; =&gt; &#39;pic#index&#39;, as: &#39;posts&#39; end                                                                                                                # i am new to stackoverflow but it seems like i cant upload files to this comment section but my code is shown above this comment. thanks again"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1469631508, "post_id": 38598540, "comment_id": 64619219, "body": "@user3788836: I updated my answer to address the issue with your routes files"}, {"owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1469717414, "post_id": 38598540, "comment_id": 64662721, "body": "so i am not able to upload the file but i did upload an image link since i am constricted due to reputation points on how much i can post or upload. please see above for &quot;config/routes.rb file&quot; link. thanks"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1469719602, "post_id": 38598540, "comment_id": 64664387, "body": "@user3788836 : I already updated my above answer yesterday to address that issue. Note that your <code>routes.rb</code> includes the string <code>pic#index</code>, but it needs to be <code>pics#index</code> (plural here)."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1469631480, "last_edit_date": 1469631480, "creation_date": 1469561967, "answer_id": 38598540, "question_id": 38598464, "link": "https://stackoverflow.com/questions/38598464/ruby-on-rails-code-shows-white-text/38598540#38598540", "title": "ruby on rails code shows white text", "body": "<p>You try to access a page at <code>/posts</code>, while your controller and your routes file clearly tells that the path should be <code>/pic</code>. </p>\n\n<p>Try:</p>\n\n<pre><code>http://localhost:3000/pic\n</code></pre>\n\n<p>Furthermore it seems like you have to fix our <code>config/routes.rb</code>:</p>\n\n<pre><code>Rails.application.routes.draw do \n  root \"pics#index\" \n  resources :pic \n  get 'posts' =&gt; 'pics#index', as: 'posts' \nend\n</code></pre>\n\n<p>Note: That the naming convention for controller is a plural name in Rails. That mean you also have to make sure that your routes point to plural versions of controller names.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1469626778, "post_id": 38599215, "comment_id": 64615512, "body": "i tried your suggestion still no changes .....same error as listed in the description. i literally followed the udemy videos to the T and have triple checked my code. is there a reason why my text would be white and not blue as it is in the videos?"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "reply_to_user": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "edited": false, "score": 0, "creation_date": 1469630659, "post_id": 38599215, "comment_id": 64618553, "body": "The error can&#39;t be the same, if you change your <i>routes.rb</i> and restart your server you should be able to access your pics#index through <i>/pics</i>."}], "tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1469564556, "creation_date": 1469564556, "answer_id": 38599215, "question_id": 38598464, "link": "https://stackoverflow.com/questions/38598464/ruby-on-rails-code-shows-white-text/38599215#38599215", "title": "ruby on rails code shows white text", "body": "<p>Much better, your controller name is Pics, you should have a <code>resources :pics</code> in your <em>routes.rb</em> file. Instead you have <code>resource :pic</code>. That's just a good practice, the error is that you are trying to access <em>/posts</em>, rather than <em>/pic</em>, or better yet: <em>/pics</em>, once you fix your routes.</p>\n"}, {"tags": [], "owner": {"reputation": 24, "user_id": 3718830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wPZxj.jpg?s=128&g=1", "display_name": "Quan Nguyen", "link": "https://stackoverflow.com/users/3718830/quan-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1469589365, "creation_date": 1469589365, "answer_id": 38603107, "question_id": 38598464, "link": "https://stackoverflow.com/questions/38598464/ruby-on-rails-code-shows-white-text/38603107#38603107", "title": "ruby on rails code shows white text", "body": "<p>You don't have router for posts. Go to config/routes.rb &amp; add new line :</p>\n\n<pre><code>get 'posts' =&gt; 'pic#index', as: 'posts'\n</code></pre>\n\n<p>&amp; url <code>localhost:3000/posts</code> will access with controller <code>pic</code> &amp; action <code>index</code></p>\n\n<p>or </p>\n\n<pre><code>resources :pics\n</code></pre>\n\n<p>and  <code>run rake routes</code> to show your path look like :</p>\n\n<p><code>localhost:3000/pics</code> will access with controller <code>pics</code> &amp; action <code>index</code></p>\n"}], "owner": {"reputation": 11, "user_id": 3788836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/620f72bb3f5dbdbb3135468c20bb1c0b?s=128&d=identicon&r=PG&f=1", "display_name": "bit_punk", "link": "https://stackoverflow.com/users/3788836/bit-punk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1469717199, "creation_date": 1469561691, "last_edit_date": 1469717199, "question_id": 38598464, "link": "https://stackoverflow.com/questions/38598464/ruby-on-rails-code-shows-white-text", "title": "ruby on rails code shows white text", "body": "<p>i am a newbie learning ruby on rails by watching udemy videos but i am stuck on a \"routing error\". the video proctor seems to have a different color text while he is using sublime so i am not sure what i am suppose to have? i am currently using a trial version of sublime. my code is below and see attached images. thank you!</p>\n\n<pre><code>class PicsController &lt; ApplicationController\n\n  def index\n  end\n\n  def new\n    @pic = Pic.new\n  end\n\n  def create\n    @pic = Pic.new(pic_params)\n  end\n\n  private \n\n  def pic_params \n    params.require(:pic).permit(:title, :description)\n  end\nend\n</code></pre>\n\n<p>When i run server to see output result:\n<a href=\"https://i.stack.imgur.com/pidTc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pidTc.png\" alt=\"routing error\"></a>\nImage shows my code in sublime text editor:\n[![enter image description here][2]][2]</p>\n\n<p><a href=\"https://i.stack.imgur.com/RCTDl.png\" rel=\"nofollow noreferrer\">config/routes.rb file</a></p>\n"}, {"tags": ["ruby", "syntax", "brackets"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1469561849, "post_id": 38598253, "comment_id": 64584926, "body": "a &quot;hashtag&quot; is not a symbol.   It&#39;s a twitter semantic meaning not existing in ruby."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1469562502, "post_id": 38598253, "comment_id": 64585321, "body": "<code>odds.each { |x| puts x * 2 }</code> works perfectly fine. There is no need for string interpolation at all."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1469561554, "last_edit_date": 1469561554, "creation_date": 1469561183, "answer_id": 38598322, "question_id": 38598253, "link": "https://stackoverflow.com/questions/38598253/ruby-syntax-confusion-brackets-and-hash/38598322#38598322", "title": "Ruby syntax confusion brackets and hash", "body": "<p>You can't do <code>print \"x\"</code> and expect it prints the value of the <code>x</code> object. What if you wanted to print the x letter? So, we need interpolation for that. \nBut interpolation used in that way has just the collateral effect to make <code>x</code>a string. You can do the same without interpolation:</p>\n\n<p><code>print x</code></p>\n\n<p>Anyway, I'd probably do</p>\n\n<pre><code>odds = [1,3,5,7,9]\nodds.each { |x| print x * 2 }\n</code></pre>\n\n<p>About interpolation: you can use it when you should concatenate several strings and it would be ugly. For instance</p>\n\n<pre><code>puts name + \" \" + surname\nputs \"#{name} #{surname}\"\n</code></pre>\n\n<p>I prefer the latter</p>\n"}], "owner": {"reputation": 73, "user_id": 6601351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fba85cd075245a7986362934b991a945?s=128&d=identicon&r=PG&f=1", "display_name": "West Coast Charlie", "link": "https://stackoverflow.com/users/6601351/west-coast-charlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1308, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469564194, "creation_date": 1469560924, "last_edit_date": 1469564194, "question_id": 38598253, "link": "https://stackoverflow.com/questions/38598253/ruby-syntax-confusion-brackets-and-hash", "title": "Ruby syntax confusion brackets and hash", "body": "<p>Objective: Use the .each method on the odds array to print out double the value of each item of the array. In other words, multiply each item by 2.</p>\n\n<p>Make sure to use print rather than puts, so your output appears on one line.</p>\n\n<pre><code>code:\n\nodds = [1,3,5,7,9]\n\nodds.each do |x|\n    x *= 2 \n    print \"#{x}\"\nend\n</code></pre>\n\n<p>Doing this exercise on Codecademy, I'm rather confused about the syntax as why there needs to be a #{} surrounding the x and why can't it just be: print \"x\" or print #x\".  What are the roles of the hash and brackets? It perplexes me as why ruby doesn't print out \"#{X}\" rather than the \"x\" number multiplied by 2 due to it being surrounded by quotation marks? Previous exercises also featured both hashes and curly brackets #{user_input} where the console printed whatever we typed rather than print out \"#{user input}\" itself.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "markdown"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1469565516, "post_id": 38598224, "comment_id": 64586829, "body": "I think your idea is good, but I suggest <i>not</i> using your own artisanal serialization format and instead using something standard like JSON after the <code>#</code>. It would simplify both the matching and the parsing significantly."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1469564321, "post_id": 38598393, "comment_id": 64586265, "body": "There is really no reason to do this in two separate steps."}, {"owner": {"reputation": 1818, "user_id": 1086525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d261261425b72bba389146c4cf2d2e?s=128&d=identicon&r=PG", "display_name": "Whothehellisthat", "link": "https://stackoverflow.com/users/1086525/whothehellisthat"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1469564452, "post_id": 38598393, "comment_id": 64586333, "body": "Oh, I see how you&#39;re doing it from your answer. I&#39;m a JS developer, which doesn&#39;t have that feature. Pretty cool!"}], "tags": [], "owner": {"reputation": 1818, "user_id": 1086525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d261261425b72bba389146c4cf2d2e?s=128&d=identicon&r=PG", "display_name": "Whothehellisthat", "link": "https://stackoverflow.com/users/1086525/whothehellisthat"}, "is_accepted": false, "score": 0, "last_activity_date": 1469561440, "creation_date": 1469561440, "answer_id": 38598393, "question_id": 38598224, "link": "https://stackoverflow.com/questions/38598224/regex-markdown-string-for-key-value-pairs/38598393#38598393", "title": "Regex markdown string for key-value pairs", "body": "<p>You'll need 2 steps to properly parse this:</p>\n\n<p>First find the comment: <code>^\\[\\/\\/\\]: # \\(([^)]*)\\)</code></p>\n\n<ul>\n<li>This captures the comment's content.</li>\n</ul>\n\n<p>Then parse the content: <code>(\\w+):([^|]+)</code> (with the global flag)</p>\n\n<ul>\n<li>This captures the key and value separately.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2296, "user_id": 717633, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LmICd.jpg?s=128&g=1", "display_name": "Jody Heavener", "link": "https://stackoverflow.com/users/717633/jody-heavener"}, "edited": false, "score": 0, "creation_date": 1469562408, "post_id": 38598460, "comment_id": 64585268, "body": "Can this type of Regexp be performed in a Ruby environment? I&#39;m not sure how to enclose a regexp using <code>~</code>s"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 2296, "user_id": 717633, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LmICd.jpg?s=128&g=1", "display_name": "Jody Heavener", "link": "https://stackoverflow.com/users/717633/jody-heavener"}, "edited": false, "score": 0, "creation_date": 1469562730, "post_id": 38598460, "comment_id": 64585427, "body": "@JodyHeavener: Yup, just <a href=\"http://rubular.com/r/PxjfOnl1Hk\" rel=\"nofollow noreferrer\"><b>escape the slashes</b></a>"}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": true, "score": 1, "last_activity_date": 1469561681, "creation_date": 1469561681, "answer_id": 38598460, "question_id": 38598224, "link": "https://stackoverflow.com/questions/38598224/regex-markdown-string-for-key-value-pairs/38598460#38598460", "title": "Regex markdown string for key-value pairs", "body": "<p>You can use <code>\\G</code>:</p>\n\n<pre><code>(?:^\\[//\\]:[^(]+\\(\\K # match your token [//]: at the beginning\n|                    \n\\G(?!\\A)\\|           # or right after the previous match\n)\n(\\w+):([\\w,]+)       # capture word chars (=key)\n                     # followed by :\n                     # followed by word chars and comma (=val) \n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/sE3rM9/1\" rel=\"nofollow\"><strong>a demo on regex101.com</strong></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 0, "last_activity_date": 1469566539, "creation_date": 1469566539, "answer_id": 38599728, "question_id": 38598224, "link": "https://stackoverflow.com/questions/38598224/regex-markdown-string-for-key-value-pairs/38599728#38599728", "title": "Regex markdown string for key-value pairs", "body": "<p>As I mentioned in my comment above, you could simplify things a lot by using a standard data serialization format like JSON after the <code>#</code>. For example:</p>\n\n<pre><code>require \"json\"\n\nMATCH_DATA_COMMENT = %r{(?&lt;=^\\[//\\]: # ).*}\n\nmarkdown = &lt;&lt;END\n[//]: # {\"POST\":28,\"USERS\":[102,78,90]}\n\n... additional Markdown content.\nEND\n\np JSON.parse(markdown[MATCH_DATA_COMMENT])\n# =&gt; { \"POST\" =&gt; 28, \"USERS\" =&gt; [102, 78, 90] }\n</code></pre>\n\n<p>The regular expression <code>%r{(?&lt;=^\\[//\\]: # ).*}</code> uses negative lookbehind to match anything that follows \"<code>[//]: #</code>\".</p>\n"}], "owner": {"reputation": 2296, "user_id": 717633, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LmICd.jpg?s=128&g=1", "display_name": "Jody Heavener", "link": "https://stackoverflow.com/users/717633/jody-heavener"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 38598460, "answer_count": 3, "score": 2, "last_activity_date": 1469566539, "creation_date": 1469560829, "last_edit_date": 1495540307, "question_id": 38598224, "link": "https://stackoverflow.com/questions/38598224/regex-markdown-string-for-key-value-pairs", "title": "Regex markdown string for key-value pairs", "body": "<p>My Rails app is retrieving data from a third-party service that doesn't allow me to attach arbitrary data to records, but does have a description area that supports Markdown. I am attempting to pass data for each record over to my Rails app within the description content, via Markdown comments:</p>\n\n<pre><code>[//]: # (POST:28|USERS:102,78,90)\n\n... additional Markdown content.\n</code></pre>\n\n<p>I found the <code>[//]: # (...)</code> syntax in <a href=\"https://stackoverflow.com/a/20885980/717633\">this answer</a> for embedding comments in Markdown, and my idea was to then pass pipe-separated key-value pairs in as the comment content.</p>\n\n<p>Using my example above, I would like to be able to parse the description content string to interpret the key-value pairs. In this case, <code>POST=28</code> and <code>USERS=102,78,90</code>. If it helps, this comment will always appear at the first line of the Markdown content.</p>\n\n<p>I imagine Regex is the way to go here? I would really appreciate any help!</p>\n"}]