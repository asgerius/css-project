[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1437004224, "post_id": 31443063, "comment_id": 50855366, "body": "You won&#39;t, you&#39;ll pass in the instance. Though I might create a factory/utility method."}], "answers": [{"comments": [{"owner": {"reputation": 718, "user_id": 4942661, "user_type": "registered", "accept_rate": 41, "profile_image": "https://lh6.googleusercontent.com/-Coa8unE-gvE/AAAAAAAAAAI/AAAAAAAAAk4/jco1eDYXCG4/photo.jpg?sz=128", "display_name": "Italo Lemos", "link": "https://stackoverflow.com/users/4942661/italo-lemos"}, "edited": false, "score": 0, "creation_date": 1437012844, "post_id": 31443331, "comment_id": 50857517, "body": "I got it, so inside on Feedback model how do you suggest to set the attributes like this?   <code>self.employee_id = @employee_id</code>"}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "reply_to_user": {"reputation": 718, "user_id": 4942661, "user_type": "registered", "accept_rate": 41, "profile_image": "https://lh6.googleusercontent.com/-Coa8unE-gvE/AAAAAAAAAAI/AAAAAAAAAk4/jco1eDYXCG4/photo.jpg?sz=128", "display_name": "Italo Lemos", "link": "https://stackoverflow.com/users/4942661/italo-lemos"}, "edited": false, "score": 0, "creation_date": 1437013192, "post_id": 31443331, "comment_id": 50857608, "body": "employee_id you doesnt need because rails will save it by the relation, and all others fields can be sent on the new method (you don&#39;t need to do in a separated lines)."}, {"owner": {"reputation": 718, "user_id": 4942661, "user_type": "registered", "accept_rate": 41, "profile_image": "https://lh6.googleusercontent.com/-Coa8unE-gvE/AAAAAAAAAAI/AAAAAAAAAk4/jco1eDYXCG4/photo.jpg?sz=128", "display_name": "Italo Lemos", "link": "https://stackoverflow.com/users/4942661/italo-lemos"}, "edited": false, "score": 0, "creation_date": 1437013641, "post_id": 31443331, "comment_id": 50857742, "body": "Ok, Thanks a lot @HoracioBranciforte"}], "tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": true, "score": 1, "last_activity_date": 1437013530, "last_edit_date": 1437013530, "creation_date": 1437005428, "answer_id": 31443331, "question_id": 31443063, "link": "https://stackoverflow.com/questions/31443063/rails-best-practice-controller-or-model/31443331#31443331", "title": "Rails Best practice Controller or Model", "body": "<p>If you have a relation between Employee and Feedback you can do something like this</p>\n\n<p>if you have has_one relation</p>\n\n<pre><code>@client_feedback = @employee.feedbacks.new(screen_name: @screen_name, feedback: @feedback)\n@client_feedkback.save\n</code></pre>\n\n<p>if you have has_many relation</p>\n\n<pre><code>@employee.feedbacks &lt;&lt; Feedbacks.new(screen_name: @screen_name, feedback: @feedback)\n@employee.save  \n</code></pre>\n\n<p>About the others fields (client and location ids) seems that you have reduntant data. Try to keep that data in a single place.</p>\n\n<p><strong>ADDED</strong></p>\n\n<p>In your model you have client_id and location_id, if you really need them on Feedback model you can do something like </p>\n\n<pre><code>@employee.feedback = Feedback.new(screen_name: @screen_name, feedback: @feedback, client_id : @employee.client_id, location_id:@employee.location_id )\n@employee.save\n</code></pre>\n"}], "owner": {"reputation": 718, "user_id": 4942661, "user_type": "registered", "accept_rate": 41, "profile_image": "https://lh6.googleusercontent.com/-Coa8unE-gvE/AAAAAAAAAAI/AAAAAAAAAk4/jco1eDYXCG4/photo.jpg?sz=128", "display_name": "Italo Lemos", "link": "https://stackoverflow.com/users/4942661/italo-lemos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "accepted_answer_id": 31443331, "answer_count": 1, "score": 0, "last_activity_date": 1437013530, "creation_date": 1437003531, "last_edit_date": 1437003848, "question_id": 31443063, "link": "https://stackoverflow.com/questions/31443063/rails-best-practice-controller-or-model", "title": "Rails Best practice Controller or Model", "body": "<p>I'm trying to refactor my code according Rails Best Practice. Now I'm face with a problem where I have two instance variable at controller and I can't move them to the model. Here we are:</p>\n\n<p>feedbacks_controller.rb</p>\n\n<pre><code>def get_feedback\n  ...\n  @employee = Employee.find_by(:name)\n  if @employee.blank?\n     ...\n  else\n    @client_feedback = Feedback.new(:screen_name =&gt; @screen_name, :feedback =&gt; @feedback)\n    @client_feedback.employee_id = @employee.id\n    @client_feedback.client_id   = @employee.client_id\n    @client_feedback.location_id = @employee.location_id\n    @client_feedback.save\n</code></pre>\n\n<p>According to <a href=\"http://rails-bestpractices.com/posts/2010/07/21/move-model-logic-into-the-model/\" rel=\"nofollow\">Rails Best practice Move Model Logic into the Model</a> all assignments inside the else need move to the model, my doubt is how I will start the <code>@employee</code> instance variable inside of model?</p>\n"}, {"tags": ["ruby", "webrick"], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 5432084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oglKX.jpg?s=128&g=1", "display_name": "Enrique Delgado", "link": "https://stackoverflow.com/users/5432084/enrique-delgado"}, "is_accepted": true, "score": 7, "last_activity_date": 1444540145, "last_edit_date": 1444540145, "creation_date": 1444513940, "answer_id": 33059325, "question_id": 31443058, "link": "https://stackoverflow.com/questions/31443058/how-to-set-the-default-error-pages-for-a-basic-webrick-server/33059325#33059325", "title": "How to set the default error pages for a basic Webrick server?", "body": "<p>Looking at the source code, it looks like <a href=\"https://github.com/nahi/webrick/blob/f92714c5a38d9ff0bbed5c63c053028c95876189/lib/webrick/httpresponse.rb#L286-L289\" rel=\"noreferrer\"><code>httpresponse.rb</code></a> has a \"hook\" called <code>create_error_page</code>:</p>\n\n<pre><code>  if respond_to?(:create_error_page)\n    create_error_page()\n    return\n  end\n</code></pre>\n\n<p>So, if you add your own Ruby method called <code>create_error_page</code> in <code>WEBrick::HTTPResponse</code>, you can set your own markup:</p>\n\n<pre><code>module WEBrick\n  class HTTPResponse\n    def create_error_page\n      @body = ''\n      @body &lt;&lt; &lt;&lt;-_end_of_html_\n&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\"&gt;\n&lt;HTML&gt;\n  &lt;HEAD&gt;&lt;TITLE&gt;#{HTMLUtils::escape(@reason_phrase)}&lt;/TITLE&gt;&lt;/HEAD&gt;\n  &lt;BODY&gt;\n    &lt;H1&gt;#{HTMLUtils::escape(@reason_phrase)}&lt;/H1&gt;\n    &lt;HR&gt;\n    &lt;P&gt;Custom error page!&lt;/P&gt;\n  &lt;/BODY&gt;\n&lt;/HTML&gt;\n      _end_of_html_\n    end\n  end\nend\n</code></pre>\n\n<p>Note that you have access to variables like <code>@reason_phrase</code> and <code>ex.code</code>. In your case, you can use <code>ex.code</code> (eg: <code>401</code>) to set different content if you wish.</p>\n\n<p>Here is a full example that you can run in an <code>irb</code> console that displays a custom error page (note that it assumes you have a directory called <code>Public</code> in your file system):</p>\n\n<pre><code>require 'webrick'\n\nmodule WEBrick\n  class HTTPResponse\n    def create_error_page\n      @body = ''\n      @body &lt;&lt; &lt;&lt;-_end_of_html_\n&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\"&gt;\n&lt;HTML&gt;\n  &lt;HEAD&gt;&lt;TITLE&gt;#{HTMLUtils::escape(@reason_phrase)}&lt;/TITLE&gt;&lt;/HEAD&gt;\n  &lt;BODY&gt;\n    &lt;H1&gt;#{HTMLUtils::escape(@reason_phrase)}&lt;/H1&gt;\n    &lt;HR&gt;\n    &lt;P&gt;Custom error page!&lt;/P&gt;\n  &lt;/BODY&gt;\n&lt;/HTML&gt;\n      _end_of_html_\n    end\n  end\nend\n\nroot = File.expand_path '~/Public'\nserver = WEBrick::HTTPServer.new :Port =&gt; 8000, :DocumentRoot =&gt; root\ntrap 'INT' do server.shutdown end\nserver.start\n</code></pre>\n\n<p>When you go to <code>http://localhost:8000/bogus</code> (a page that does not exist), you should see the custom error page, like so:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4bwb1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/4bwb1.png\" alt=\"enter image description here\"></a></p>\n\n<p>Hope it helps! :-]</p>\n"}], "owner": {"reputation": 813, "user_id": 2108798, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xP6Up.jpg?s=128&g=1", "display_name": "DaKaZ", "link": "https://stackoverflow.com/users/2108798/dakaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 33059325, "answer_count": 1, "score": 4, "last_activity_date": 1444540145, "creation_date": 1437003509, "question_id": 31443058, "link": "https://stackoverflow.com/questions/31443058/how-to-set-the-default-error-pages-for-a-basic-webrick-server", "title": "How to set the default error pages for a basic Webrick server?", "body": "<p>I have a very basic webrick server running for the admin pages of an embedded device.  We just added basic authentication to the device and it works great, but you get the generic \"unauthorized\" message back like this:</p>\n\n<pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\"&gt;\n&lt;HTML&gt;\n  &lt;HEAD&gt;&lt;TITLE&gt;Unauthorized&lt;/TITLE&gt;&lt;/HEAD&gt;\n  &lt;BODY&gt;\n    &lt;H1&gt;Unauthorized&lt;/H1&gt;\n    WEBrick::HTTPStatus::Unauthorized\n    &lt;HR&gt;\n    &lt;ADDRESS&gt;\n     WEBrick/1.3.1 (Ruby/2.2.0/2014-12-25) at\n     192.168.1.1:1234\n    &lt;/ADDRESS&gt;\n  &lt;/BODY&gt;\n&lt;/HTML&gt;\n</code></pre>\n\n<p>Does anyone know how to override this to return a static HTML file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "server"], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "edited": false, "score": 0, "creation_date": 1437003147, "post_id": 31442969, "comment_id": 50855014, "body": "Same error. The cherry on top, is that when I run &quot;bundle install&quot; it installs sqlite3. ?!?!?!? why ?!!?! It&#39;s gone form my gem file :("}, {"owner": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "edited": false, "score": 1, "creation_date": 1437003976, "post_id": 31442969, "comment_id": 50855280, "body": "nevermind, i got it working..somehow..i don&#39;t even know what i did"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "edited": false, "score": 0, "creation_date": 1437030308, "post_id": 31442969, "comment_id": 50863260, "body": "@icecreamrabbit : remove <code>Gemfile.lock</code> and then try to bundle install"}], "tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": false, "score": 1, "last_activity_date": 1437003015, "creation_date": 1437003015, "answer_id": 31442969, "question_id": 31442941, "link": "https://stackoverflow.com/questions/31442941/sqlite3-wont-go-away-ruby-on-rails/31442969#31442969", "title": "sqlite3 won&#39;t go away....ruby on rails", "body": "<p>This might be a sticky setting because spring is running.  Did you try stopping spring?</p>\n\n<pre><code>spring stop\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1437003015, "creation_date": 1437002840, "question_id": 31442941, "link": "https://stackoverflow.com/questions/31442941/sqlite3-wont-go-away-ruby-on-rails", "title": "sqlite3 won&#39;t go away....ruby on rails", "body": "<p>I am trying to get rid of sqlite3 on my rails app and use postgres instead. I updated my gem file and removed it. manually uninstalled the sqlite3 gem. Got rid of it in my database.yml file. When I run rake db:create (As instructed on heroku) I get this:</p>\n\n<pre><code>db/development.sqlite3 already exists\n</code></pre>\n\n<p>I tried a whole bunch of rake commands and it continually refers to sqlite3. Why? I removed it? How do I remove it permanently from my app so I can go ahead and use postgres to deploy to heroku? \nthank you so much <em>itches head in mild frustration</em></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-scraping", "mechanize", "data-extraction"], "comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1437032102, "post_id": 31442759, "comment_id": 50864278, "body": "<code>.a</code> selects all elements where class contains &#39;a&#39;. You probable want <code>a</code> which selects all &#39;a&#39; elements (links)"}], "answers": [{"comments": [{"owner": {"reputation": 836, "user_id": 1243214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1f97dfcd855c06d40ea3204f11fb47?s=128&d=identicon&r=PG", "display_name": "Mr. Tim", "link": "https://stackoverflow.com/users/1243214/mr-tim"}, "edited": false, "score": 0, "creation_date": 1502398686, "post_id": 31442894, "comment_id": 78206287, "body": "<code>agent.page.search(&quot;#winemaker&quot;)</code> is returning the HTML tag that is <code>id=&quot;winemaker&quot;</code> in it&#39;s attributes. Most of the time there will be some identifying element to help you target what you need. For example, there will usually be a class, name, id, or something in a parent container to help you target them. Worst case scenario is that you find a specific tag matching a known name and then jump to the appropriate parent container."}], "tags": [], "owner": {"reputation": 122, "user_id": 3903587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d566c0db7b1dc8c13d921fb36d18545f?s=128&d=identicon&r=PG&f=1", "display_name": "j.sanghoon", "link": "https://stackoverflow.com/users/3903587/j-sanghoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1437002586, "creation_date": 1437002586, "answer_id": 31442894, "question_id": 31442759, "link": "https://stackoverflow.com/questions/31442759/extracting-data-using-mechanize-gem-parsing-data-with-css-header/31442894#31442894", "title": "Extracting data using Mechanize gem. Parsing data with CSS header", "body": "<p>So I was over-thinking with this. </p>\n\n<p>All the data I needed was on the dropdown menu. So after accessing the website through</p>\n\n<pre><code>agent.get(\"http://oregonpinotnoirwine.com/search.php\")\n</code></pre>\n\n<p>I was able to get the data I need by</p>\n\n<pre><code>agent.page.search(\"#winemaker\") \n</code></pre>\n\n<p>But this method will not work if the items were not displayed in the dropdown menu.. Would it?</p>\n"}], "owner": {"reputation": 122, "user_id": 3903587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d566c0db7b1dc8c13d921fb36d18545f?s=128&d=identicon&r=PG&f=1", "display_name": "j.sanghoon", "link": "https://stackoverflow.com/users/3903587/j-sanghoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447512686, "creation_date": 1437001733, "last_edit_date": 1447512686, "question_id": 31442759, "link": "https://stackoverflow.com/questions/31442759/extracting-data-using-mechanize-gem-parsing-data-with-css-header", "title": "Extracting data using Mechanize gem. Parsing data with CSS header", "body": "<p>I am trying to extract data from a website (<a href=\"http://oregonpinotnoirwine.com/\" rel=\"nofollow\">http://oregonpinotnoirwine.com/</a>) using Mechanize. </p>\n\n<p>I am able to go to the website and select search field. But I am not able to get the data. I am doing this on Ruby IRB.</p>\n\n<pre><code>require 'mechanize'\nagent = Mechanize.new\n\nagent.get(\"http://oregonpinotnoirwine.com/search.php\")\nform = agent.page.forms[0]\nform[\"wineava\"] = \"Dundee Hills\"\nform.submit \n</code></pre>\n\n<p>Then I am trying to extract all the list of wines that are on the website. So in order to do that, I looked up CSS of the website and decided to use .a like</p>\n\n<pre><code> agent.page.search(\".a\")\n</code></pre>\n\n<p>But that didn't return anything. But when I type</p>\n\n<pre><code>agent.page.search(\".\") \n</code></pre>\n\n<p>It returns all the data from the website. Now I'm just trying different variations.. when I type </p>\n\n<pre><code>agent.page.search(\"#wineava\") \n</code></pre>\n\n<p>It returns with the dropdown option from the site but not the wine list..</p>\n"}, {"tags": ["ruby", "input"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1437004244, "post_id": 31442684, "comment_id": 50855370, "body": "What is your question?"}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 5087349, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-P-zhIJovOS4/AAAAAAAAAAI/AAAAAAAAAEU/YEGapa9c8IA/photo.jpg?sz=128", "display_name": "Joey Hammer", "link": "https://stackoverflow.com/users/5087349/joey-hammer"}, "is_accepted": false, "score": 1, "last_activity_date": 1437001382, "creation_date": 1437001382, "answer_id": 31442707, "question_id": 31442684, "link": "https://stackoverflow.com/questions/31442684/ruby-using-user-input-as-an-integer/31442707#31442707", "title": "Ruby using User input as an integer", "body": "<p>Use <code>to_i</code> to convert to integer:</p>\n\n<pre><code>value = wid.to_i\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5121408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a7d0ecc43e32cf4d028edbf9ea3a56?s=128&d=identicon&r=PG&f=1", "display_name": "Evan O&#39;Connor", "link": "https://stackoverflow.com/users/5121408/evan-oconnor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1437003155, "creation_date": 1437001271, "last_edit_date": 1437003155, "question_id": 31442684, "link": "https://stackoverflow.com/questions/31442684/ruby-using-user-input-as-an-integer", "title": "Ruby using User input as an integer", "body": "<p>I am getting the error, square.rb:9:in <code>*': no implicit conversion of String into Integer (TypeError)\n    from square.rb:9:in</code>'.</p>\n\n<p>I am sure it is an easy fix, I am just very new to ruby.</p>\n\n<pre><code>    cnt = 0\n\n    puts \"Enter a number: \"\n    wid = gets.chomp\n\n\n    print '*' * wid\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 1, "last_activity_date": 1437000848, "creation_date": 1437000848, "answer_id": 31442620, "question_id": 31442591, "link": "https://stackoverflow.com/questions/31442591/rails-4-2-0-habtm-nomethoderror/31442620#31442620", "title": "Rails 4.2.0 HABTM NoMethodError", "body": "<p>The problem here is that <code>Series.where(displayName: 'Some Series Name')</code> returns a collection of <code>Series</code> objects.  If you only want a single Series record, use either:</p>\n\n<pre><code>s = Series.where(displayName: 'Some Series Name').first\n</code></pre>\n\n<p>or</p>\n\n<pre><code>s = Series.find_by(displayName: 'Some Series Name')\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5121374, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--BdsVvHwhFE/AAAAAAAAAAI/AAAAAAAAABI/_es6JpmKBN4/photo.jpg?sz=128", "display_name": "John Henderson", "link": "https://stackoverflow.com/users/5121374/john-henderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 31442620, "answer_count": 1, "score": 0, "last_activity_date": 1437001161, "creation_date": 1437000670, "question_id": 31442591, "link": "https://stackoverflow.com/questions/31442591/rails-4-2-0-habtm-nomethoderror", "title": "Rails 4.2.0 HABTM NoMethodError", "body": "<p>Having an issue with has_and_belongs_to_many on my models.</p>\n\n<p>Here's the setup:  </p>\n\n<ul>\n<li>Ruby - 2.2.0</li>\n<li>Rails - 4.2.0</li>\n<li>PostgreSQL - 9.4.4</li>\n</ul>\n\n<p>I have the following models:  </p>\n\n<pre><code>class Series &lt; ActiveRecord::Base\n   # has_many :series_labels\n   # has_many :labels, through: :series_labels\n   has_and_belongs_to_many :labels\n   has_many :videos\nend\n\nclass Label &lt; ActiveRecord::Base\n  # has_many :series_labels\n  # has_many :series, through: :series_labels\n  has_and_belongs_to_many :series\nend\n\nclass LabelSeries &lt; ActiveRecord::Base\n  belongs_to :series\n  belongs_to :label\nend\n</code></pre>\n\n<p>I have the following migrations:  </p>\n\n<pre><code>class CreateSeries &lt; ActiveRecord::Migration\n  def change\n    create_table :series do |t|\n\n      t.timestamps null: false\n    end\n  end\nend\n\nclass AddColumnsToSeries &lt; ActiveRecord::Migration\n  def change\n    add_column :series, :asset_type, :string\n    add_column :series, :duration, :integer\n    add_column :series, :external_id, :string\n    add_column :series, :asset_created_at, :datetime\n    add_column :series, :asset_updated_at, :datetime\n    add_column :series, :asset_status, :string\n    add_column :series, :asset_hosted_at, :string\n    add_column :series, :original_file_name, :string\n  end\nend\n\nclass CreateLabels &lt; ActiveRecord::Migration\n  def change\n    create_table :labels do |t|\n      t.string :value\n\n      t.timestamps null: false\n    end\n  end\nend\n\nclass CreateLabelsSeries &lt; ActiveRecord::Migration\n  def change\n    create_join_table :labels, :series do |t|\n      t.index :label_id\n      t.index :series_id\n    end\n  end\nend\n</code></pre>\n\n<p>When I run rails c and supply the following:</p>\n\n<pre><code>s = Series.where(displayName: 'Some Series Name')\ns.labels\n</code></pre>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>NoMethodError: undefined method `labels' for</p>\n  \n  <h1>     from /Users/johnhenderson/.rvm/gems/ruby-2.2.0/gems/activerecord-4.2.0/lib/active_record/relation/delegation.rb:136:in</h1>\n  \n  <p><code>method_missing'  from\n  /Users/johnhenderson/.rvm/gems/ruby-2.2.0/gems/activerecord-4.2.0/lib/active_record/relation/delegation.rb:99:in\n  </code>method_missing'  from (irb):2    from\n  /Users/johnhenderson/.rvm/gems/ruby-2.2.0/gems/railties-4.2.0/lib/rails/commands/console.rb:110:in\n  <code>start'   from\n  /Users/johnhenderson/.rvm/gems/ruby-2.2.0/gems/railties-4.2.0/lib/rails/commands/console.rb:9:in\n  </code>start'   from\n  /Users/johnhenderson/.rvm/gems/ruby-2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:68:in\n  <code>console'     from\n  /Users/johnhenderson/.rvm/gems/ruby-2.2.0/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in\n  </code>run_command!'    from\n  /Users/johnhenderson/.rvm/gems/ruby-2.2.0/gems/railties-4.2.0/lib/rails/commands.rb:17:in\n  <code>&lt;top (required)&gt;'    from bin/rails:4:in</code>require'   from bin/rails:4:in\n  `'</p>\n</blockquote>\n\n<p>Best I can tell everything is setup correctly, and there are values in all the tables in the database.</p>\n\n<p>Thanks for any help,\nJohn</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "gem", "rake"], "comments": [{"owner": {"reputation": 760, "user_id": 727977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103592e42360fa41825c314e73756a8f?s=128&d=identicon&r=PG", "display_name": "Joe Sak", "link": "https://stackoverflow.com/users/727977/joe-sak"}, "edited": false, "score": 1, "creation_date": 1456777055, "post_id": 31442342, "comment_id": 59094291, "body": "Did you ever figure this out, because I&#39;m getting that gem not found in any sources error, too, about a dependency (raindrops) of a gem (unicorn) that <i>is</i> being installed during the docker build process"}, {"owner": {"reputation": 1702, "user_id": 162876, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/hyalk.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/162876/chris"}, "edited": false, "score": 0, "creation_date": 1457383561, "post_id": 31442342, "comment_id": 59373045, "body": "Exactly which gems are not being found? Most likely what is happening is that one of the gems in your <code>:development, :test</code> group is pulling in a dependency that is also used by the asset pipeline. You need to isolate that dependency and put it in your Gemfile outside of the <code>:development, :test</code> group."}], "answers": [{"comments": [{"owner": {"reputation": 1248, "user_id": 1848302, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c8d1cafa57d9dd3863ed21193de612bb?s=128&d=identicon&r=PG", "display_name": "Alex Lynham", "link": "https://stackoverflow.com/users/1848302/alex-lynham"}, "edited": false, "score": 0, "creation_date": 1464960855, "post_id": 36443831, "comment_id": 62714207, "body": "Thanks, but I ended up ditching <code>capybara-webkit</code> to resolve it in the end. Hopefully it will help somebody else!"}], "tags": [], "owner": {"reputation": 1393, "user_id": 6206501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JENfJ.jpg?s=128&g=1", "display_name": "Abhilash Reddy", "link": "https://stackoverflow.com/users/6206501/abhilash-reddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1459926384, "creation_date": 1459926384, "answer_id": 36443831, "question_id": 31442342, "link": "https://stackoverflow.com/questions/31442342/rake-assets-precompile-without-gems-in-development-or-test-groups/36443831#36443831", "title": "Rake Assets Precompile without Gems in Development or Test Groups", "body": "<pre><code>bundle install --path vendor/cache\n</code></pre>\n\n<p>Try this and let me know if it doesn't work!</p>\n"}], "owner": {"reputation": 1248, "user_id": 1848302, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c8d1cafa57d9dd3863ed21193de612bb?s=128&d=identicon&r=PG", "display_name": "Alex Lynham", "link": "https://stackoverflow.com/users/1848302/alex-lynham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1459926384, "creation_date": 1436999350, "question_id": 31442342, "link": "https://stackoverflow.com/questions/31442342/rake-assets-precompile-without-gems-in-development-or-test-groups", "title": "Rake Assets Precompile without Gems in Development or Test Groups", "body": "<p>Okay, so I've got an error while building my Docker image (think of it as similar to a deploy step, or Heroku deploy if you're unfamiliar with Docker). </p>\n\n<p>Gems that are in the <code>:test</code> and <code>:development</code> groups are being looked for when the precompile step happens, and since I've bundled <code>--without development test</code> - as I don't want to have QT just so that <code>capybara-webkit</code> doesn't error on bundle - the precompile step is throwing an error.</p>\n\n<p>The error is always a variant of:</p>\n\n<pre><code>Could not find &lt;gem-name&gt; in any of the sources (Bundler::GemNotFound)\n</code></pre>\n\n<p>My Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.1.9'\n# Use sqlite3 as the database for Active Record\n# gem 'sqlite3'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\ngem 'unicorn', '~&gt; 4.8.3'\ngem 'unicorn-worker-killer', '~&gt; 0.4.2'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngem 'rdf', '~&gt; 1.1.0'\ngem 'tripod', '~&gt; 0.11.1'\n\ngem 'devise'\ngem 'devise_invitable'\ngem 'authority'\ngem 'mongoid', '~&gt; 4.0.0'\n\ngem 'bootstrap-sass', '~&gt; 3.3.3'\n\n# pagination\ngem 'kaminari', '~&gt; 0.16.3'\ngem 'bootstrap-kaminari-views'\n\n# background processing\ngem 'sidekiq'\ngem 'sidekiq-status'\ngem 'request_store', '~&gt; 1.1.0'\n\n# add memoization\ngem 'memoist', '~&gt; 0.12.0'\n\n# dropbox gem for uploads etc\ngem 'dropbox-sdk', '~&gt; 1.6.4'\n\n# error reporting\ngem 'sentry-raven'\n\ngroup :development, :test do\n  gem \"rspec-rails\", \"~&gt; 3.0.0\"\n  gem \"factory_girl_rails\", \"~&gt; 4.5.0\"\n  gem \"capybara\", \"~&gt; 2.4\"\n  gem \"database_cleaner\"\n  # gem \"selenium-webdriver\"\n  gem 'poltergeist'\n  gem 'capybara-webkit'\n\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  #gem 'byebug'\n  gem 'pry-byebug'\n  gem 'better_errors', '~&gt; 2.1.1'\n\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  # gem 'spring'\nend\n</code></pre>\n\n<p>The line in the <code>Dockerfile</code> where the error happens is:</p>\n\n<pre><code>RUN /bin/bash -l -c \"RAILS_ENV=production bundle exec rake assets:precompile RAILS_GROUPS=assets --trace\"\n</code></pre>\n\n<p>So basically, what I'm really after is the equivalent for <code>--without test development</code> for the rake task. Can I do that? As per some advice, I've already changed (in <code>application.rb</code>):</p>\n\n<pre><code>Bundler.require(*Rails.groups)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>Bundler.require(:default, :assets, Rails.env)\n</code></pre>\n\n<p>Anybody have Rails-fu enough to solve this one? I've looked in the docs and on SO, as well as asking my colleagues but I'm still banging my head against the wall over this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1131, "user_id": 3592117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIAYJ.jpg?s=128&g=1", "display_name": "Kimball", "link": "https://stackoverflow.com/users/3592117/kimball"}, "edited": false, "score": 1, "creation_date": 1437000974, "post_id": 31442316, "comment_id": 50854259, "body": "I don&#39;t see what&#39;s wrong with <code>true if Float(string) rescue false</code>. It seems to be doing what you are asking. Am I misunderstanding the question?"}, {"owner": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "edited": false, "score": 0, "creation_date": 1437007412, "post_id": 31442316, "comment_id": 50856123, "body": "You can&#39;t use <code>if</code> in this example because something like <code>Float(&quot;blah&quot;)</code> will raise an exception."}, {"owner": {"reputation": 43, "user_id": 4329947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m0SULvywgiU/AAAAAAAAAAI/AAAAAAAAAEk/qilZV6_Q2fM/photo.jpg?sz=128", "display_name": "John Owens", "link": "https://stackoverflow.com/users/4329947/john-owens"}, "reply_to_user": {"reputation": 1131, "user_id": 3592117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIAYJ.jpg?s=128&g=1", "display_name": "Kimball", "link": "https://stackoverflow.com/users/3592117/kimball"}, "edited": false, "score": 0, "creation_date": 1437300998, "post_id": 31442316, "comment_id": 50963374, "body": "@Kimball - i was trying to use the if structure in combination with this Float(string) test. In my application, a method is not a clean way of doing this, a single line would be better."}, {"owner": {"reputation": 43, "user_id": 4329947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m0SULvywgiU/AAAAAAAAAAI/AAAAAAAAAEk/qilZV6_Q2fM/photo.jpg?sz=128", "display_name": "John Owens", "link": "https://stackoverflow.com/users/4329947/john-owens"}, "reply_to_user": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "edited": false, "score": 0, "creation_date": 1437301010, "post_id": 31442316, "comment_id": 50963376, "body": "@Powers - that&#39;s the problem which has caused me to ask this question. The method structure uses rescue for the exception. How would that transfer when using the if structure?"}, {"owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "edited": false, "score": 0, "creation_date": 1437324584, "post_id": 31442316, "comment_id": 50969952, "body": "@JohnOwens it&#39;s not clear what you want.  Do you want to test whether string is a number?  Do you want to test whether string contains numeric characters?  Please explain."}, {"owner": {"reputation": 1131, "user_id": 3592117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIAYJ.jpg?s=128&g=1", "display_name": "Kimball", "link": "https://stackoverflow.com/users/3592117/kimball"}, "edited": false, "score": 0, "creation_date": 1437352037, "post_id": 31442316, "comment_id": 50977366, "body": "Since you want to use <code>Float(string)</code> and don&#39;t/can&#39;t trust the input, you need to use <code>rescue</code>. Are you after <a href=\"http://stackoverflow.com/questions/2524740/in-ruby-what-structures-can-a-rescue-statement-be-nested-in\">this question</a>?"}, {"owner": {"reputation": 43, "user_id": 4329947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m0SULvywgiU/AAAAAAAAAAI/AAAAAAAAAEk/qilZV6_Q2fM/photo.jpg?sz=128", "display_name": "John Owens", "link": "https://stackoverflow.com/users/4329947/john-owens"}, "reply_to_user": {"reputation": 1131, "user_id": 3592117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIAYJ.jpg?s=128&g=1", "display_name": "Kimball", "link": "https://stackoverflow.com/users/3592117/kimball"}, "edited": false, "score": 0, "creation_date": 1437415375, "post_id": 31442316, "comment_id": 51007646, "body": "@Kimball - we&#39;re definitely on to something there. the begin/end structure seems like what I wanted. I&#39;ll try that. I ended up using a regex for now."}, {"owner": {"reputation": 43, "user_id": 4329947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m0SULvywgiU/AAAAAAAAAAI/AAAAAAAAAEk/qilZV6_Q2fM/photo.jpg?sz=128", "display_name": "John Owens", "link": "https://stackoverflow.com/users/4329947/john-owens"}, "reply_to_user": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "edited": false, "score": 1, "creation_date": 1437415481, "post_id": 31442316, "comment_id": 51007701, "body": "@La-comadreja - yes, I&#39;m testing for numeric characters, for a phone number. i ended up using a regex, but I was hoping to add to my arsenal with this type of structure. regex is probably the right way to go about what I&#39;m doing with a phone number, but you never know where this system might be more useful."}, {"owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "edited": false, "score": 0, "creation_date": 1437416022, "post_id": 31442316, "comment_id": 51008005, "body": "One problem with regex is that it is slower than other types of validations, simply due to the sheer number of calculations performed.  A couple questions.  First, is the running speed important to you?  Second, do you want to check if there are ANY numbers in the string, whether there are a certain number of numbers in the string (e.g. U.S. area code + number is 10 digits), or if the numbers are formatted in a specific way?  I&#39;m still not clear on what you want."}, {"owner": {"reputation": 43, "user_id": 4329947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m0SULvywgiU/AAAAAAAAAAI/AAAAAAAAAEk/qilZV6_Q2fM/photo.jpg?sz=128", "display_name": "John Owens", "link": "https://stackoverflow.com/users/4329947/john-owens"}, "reply_to_user": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "edited": false, "score": 0, "creation_date": 1437505886, "post_id": 31442316, "comment_id": 51053977, "body": "@La-comadreja Sorry. I haven&#39;t explained it properly at all. I&#39;m testing the validity of a phone number. The field automatically adds brackets and hyphens as the user is entering it, but then those characters are stripped before it hits the db. This is intended as a quick check along the way to ensure that the phone number being recorded is correct. 10 digits, numbers only."}], "answers": [{"tags": [], "owner": {"reputation": 1131, "user_id": 3592117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIAYJ.jpg?s=128&g=1", "display_name": "Kimball", "link": "https://stackoverflow.com/users/3592117/kimball"}, "is_accepted": false, "score": 1, "last_activity_date": 1437447809, "last_edit_date": 1437447809, "creation_date": 1437354106, "answer_id": 31507558, "question_id": 31442316, "link": "https://stackoverflow.com/questions/31442316/test-variable-for-numeric-in-one-line/31507558#31507558", "title": "Test variable for Numeric in one line", "body": "<p><code>if Float()</code> is pointless code, since <code>Float()</code> will either return a truthy value or raise an error (based on my limited look at the <a href=\"https://github.com/ruby/ruby/blob/trunk/object.c\" rel=\"nofollow\">source code</a> - as of writing, you can follow the code path from <a href=\"https://github.com/ruby/ruby/blob/trunk/object.c#L2942\" rel=\"nofollow\">line #2942</a>). I'd suggest you're asking the wrong question/looking at the problem wrong (it'd be helpful to know what you're actually trying to achieve). </p>\n\n<p>To do something with <code>Float()</code> on one line and avoid breaking code, use <code>rescue</code> as a statement modifier, as has been done in the <code>is_number?</code> method posted.</p>\n\n<pre><code>Float(string) rescue 0.0 # trying to emulate String#to_f!\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 4329947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m0SULvywgiU/AAAAAAAAAAI/AAAAAAAAAEk/qilZV6_Q2fM/photo.jpg?sz=128", "display_name": "John Owens", "link": "https://stackoverflow.com/users/4329947/john-owens"}, "edited": false, "score": 0, "creation_date": 1437597740, "post_id": 31547815, "comment_id": 51102104, "body": "Thanks for this, but this is way off topic from the original question. I wanted to know if the Float thing could be shoe-horned into an if structure."}, {"owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "reply_to_user": {"reputation": 43, "user_id": 4329947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m0SULvywgiU/AAAAAAAAAAI/AAAAAAAAAEk/qilZV6_Q2fM/photo.jpg?sz=128", "display_name": "John Owens", "link": "https://stackoverflow.com/users/4329947/john-owens"}, "edited": false, "score": 0, "creation_date": 1437620196, "post_id": 31547815, "comment_id": 51109132, "body": "what do you mean by &quot;the Float thing could be shoe-horned into an if structure?&quot;  I don&#39;t understand what shoehorning would entail."}], "tags": [], "owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "is_accepted": false, "score": 0, "last_activity_date": 1437506487, "creation_date": 1437506487, "answer_id": 31547815, "question_id": 31442316, "link": "https://stackoverflow.com/questions/31442316/test-variable-for-numeric-in-one-line/31547815#31547815", "title": "Test variable for Numeric in one line", "body": "<p>Ensuring the phone number is 10 digits, numbers only, is quite simple.</p>\n\n<pre><code>PHONE_NUM_LENGTH = 10\nstring.length == PHONE_NUM_LENGTH &amp;&amp; string.count('0-9') == PHONE_NUM_LENGTH\n</code></pre>\n\n<p>will return the true/false value representing this check.  This is more efficient than a Regex.</p>\n\n<p>The first part,</p>\n\n<pre><code>string.length == PHONE_NUM_LENGTH\n</code></pre>\n\n<p>checks whether the string is 10 characters long.  The second,</p>\n\n<pre><code>string.count('0-9') == PHONE_NUM_LENGTH\n</code></pre>\n\n<p>checks whether it has exactly 10 numeric characters.</p>\n"}], "owner": {"reputation": 43, "user_id": 4329947, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m0SULvywgiU/AAAAAAAAAAI/AAAAAAAAAEk/qilZV6_Q2fM/photo.jpg?sz=128", "display_name": "John Owens", "link": "https://stackoverflow.com/users/4329947/john-owens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1437506487, "creation_date": 1436999271, "last_edit_date": 1495540694, "question_id": 31442316, "link": "https://stackoverflow.com/questions/31442316/test-variable-for-numeric-in-one-line", "title": "Test variable for Numeric in one line", "body": "<p>I found this code on another <a href=\"https://stackoverflow.com/questions/5661466/test-if-string-is-a-number-in-ruby-on-rails\">thread</a>. </p>\n\n<pre><code>def is_number? string\n  true if Float(string) rescue false\nend\n</code></pre>\n\n<p>Instead of using a method to return true or false, I'd like to do this \"is_numeric\" test in one line, in an if statement. Can someone explain if this is possible? I'm getting errors at the moment both when the string variable is null and when it contains non-numeric characters.</p>\n\n<pre><code>if Float(string)\n  * do something\nelse\n  * do something else\nend\n</code></pre>\n"}, {"tags": ["ruby", "twitter", "gem", "task"], "answers": [{"comments": [{"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 0, "creation_date": 1437090734, "post_id": 31442700, "comment_id": 50898869, "body": "Ok so this enables me to fetch a follower, but I still dont see how I can check if the follower has added me on the day I launch the task."}], "tags": [], "owner": {"reputation": 1, "user_id": 4339366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IOLx5.jpg?s=128&g=1", "display_name": "Mitchell Hart", "link": "https://stackoverflow.com/users/4339366/mitchell-hart"}, "is_accepted": false, "score": 0, "last_activity_date": 1437001354, "last_edit_date": 1592644375, "creation_date": 1437001354, "answer_id": 31442700, "question_id": 31442233, "link": "https://stackoverflow.com/questions/31442233/creating-a-task-that-fetch-new-twitter-followers-and-sends-them-automated-messag/31442700#31442700", "title": "Creating a task that fetch new twitter followers and sends them automated message with gem twitter", "body": "<p>You can use the #followers instance method.</p>\n<blockquote>\n<h1>followers(user, options = {}) \u21d2 Twitter::Cursor</h1>\n</blockquote>\n<p>more info in the docs: <a href=\"http://www.rubydoc.info/gems/twitter/Twitter/REST/FriendsAndFollowers#followers-instance_method\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/twitter/Twitter/REST/FriendsAndFollowers#followers-instance_method</a></p>\n"}], "owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437001354, "creation_date": 1436998911, "question_id": 31442233, "link": "https://stackoverflow.com/questions/31442233/creating-a-task-that-fetch-new-twitter-followers-and-sends-them-automated-messag", "title": "Creating a task that fetch new twitter followers and sends them automated message with gem twitter", "body": "<p>I would like to create a task that collects all my new twitter followers of the day and sends them a welcome message.  I started playing around with the twitter API, using the twitter gem :</p>\n\n<p><a href=\"https://github.com/sferik/twitter\" rel=\"nofollow\">https://github.com/sferik/twitter</a></p>\n\n<p>1) I am reading the documentation, but I cannot seem to find a way to fetch all the new followers of the day. How would you do that ?\n2) Is it possible to send them an automated direct message with the gem, once I have retrieved their ids ?</p>\n"}, {"tags": ["ruby", "macos", "cocoapods", "podspec"], "comments": [{"owner": {"reputation": 43172, "user_id": 218152, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/SLeUT.jpg?s=128&g=1", "display_name": "SwiftArchitect", "link": "https://stackoverflow.com/users/218152/swiftarchitect"}, "edited": false, "score": 0, "creation_date": 1437180630, "post_id": 31442214, "comment_id": 50937834, "body": "Ruby installation incorrect?"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1440662903, "post_id": 31442214, "comment_id": 52368803, "body": "What is your system? [Darwin (Mac OS X)?] How did you install Ruby? [brew? ports? from source?] How are you managing Ruby versions? [RVM? rbenv?] Which guide by Ray Wenderlich did you follow? [there are several]"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1440690805, "post_id": 31442214, "comment_id": 52388324, "body": "The error basically tells you that the interpreter you are attempting to use is not there.  Look at the /usr/local/bin/pod, first line (one that starts with #!) and you should see the ruby interpreter there.   Is there anything in /usr/local/opt/ruby?  Are you using rbenv, rvm?"}], "answers": [{"comments": [{"owner": {"reputation": 483706, "user_id": 217408, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/IlnZm.jpg?s=128&g=1", "display_name": "G&#252;nter Z&#246;chbauer", "link": "https://stackoverflow.com/users/217408/g%c3%bcnter-z%c3%b6chbauer"}, "edited": false, "score": 0, "creation_date": 1510842119, "post_id": 32266922, "comment_id": 81614932, "body": "I had to reinstall <code>rew uninstall cocoapods</code> <code>rew install cocoapods</code> after I installed ruby to make the error go away."}], "tags": [], "owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "is_accepted": true, "score": 15, "last_activity_date": 1440751543, "creation_date": 1440751543, "answer_id": 32266922, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/32266922#32266922", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>i fixed it by running <code>brew install ruby</code></p>\n"}, {"comments": [{"owner": {"reputation": 3136, "user_id": 659571, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5636dc6a8a882276e6afe1e757fa0c7e?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/659571/andrew"}, "edited": false, "score": 5, "creation_date": 1506495891, "post_id": 46369189, "comment_id": 79839068, "body": "This one fixed it for me."}, {"owner": {"reputation": 390, "user_id": 877341, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a076bac7b3c3c9d3c13e8e72bcc2dc8?s=128&d=identicon&r=PG", "display_name": "blackhawk4152", "link": "https://stackoverflow.com/users/877341/blackhawk4152"}, "edited": false, "score": 30, "creation_date": 1506602500, "post_id": 46369189, "comment_id": 79893708, "body": "don&#39;t forget sudo: <code>sudo gem install cocoapods</code>"}, {"owner": {"reputation": 1437, "user_id": 251394, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wMGLU.jpg?s=128&g=1", "display_name": "srik", "link": "https://stackoverflow.com/users/251394/srik"}, "edited": false, "score": 3, "creation_date": 1510575551, "post_id": 46369189, "comment_id": 81479027, "body": "I had the same issue and doing a <code>brew update</code> and <code>brew upgrade</code> installed the latest cocoapods for me and did the trick"}, {"owner": {"reputation": 559, "user_id": 1284876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzE8S.png?s=128&g=1", "display_name": "cartland", "link": "https://stackoverflow.com/users/1284876/cartland"}, "edited": false, "score": 0, "creation_date": 1522976435, "post_id": 46369189, "comment_id": 86378985, "body": "Downvoted because of the use of sudo. See various answers on StackExchange for installing ruby/gems without it. e.g. <a href=\"https://stackoverflow.com/questions/31414249/how-to-install-gems-without-sudo-on-mac-os-x\" title=\"how to install gems without sudo on mac os x\">stackoverflow.com/questions/31414249/&hellip;</a>"}, {"owner": {"reputation": 568, "user_id": 4383323, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/sgtau.jpg?s=128&g=1", "display_name": "samouray", "link": "https://stackoverflow.com/users/4383323/samouray"}, "edited": false, "score": 0, "creation_date": 1530117968, "post_id": 46369189, "comment_id": 89125439, "body": "This also has fixed it for me, Plus one for the great answer, this should be the accepted answer"}, {"owner": {"reputation": 47127, "user_id": 3151675, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VBGuG.png?s=128&g=1", "display_name": "Tam&#225;s Sengel", "link": "https://stackoverflow.com/users/3151675/tam%c3%a1s-sengel"}, "edited": false, "score": 2, "creation_date": 1538966717, "post_id": 46369189, "comment_id": 92316029, "body": "If this doesn&#39;t help, try <b>restarting</b> Terminal."}, {"owner": {"reputation": 6658, "user_id": 770313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Vjtmx.png?s=128&g=1", "display_name": "possen", "link": "https://stackoverflow.com/users/770313/possen"}, "edited": false, "score": 11, "creation_date": 1561059201, "post_id": 46369189, "comment_id": 99950774, "body": "This helps with Catalina too."}, {"owner": {"reputation": 2551, "user_id": 3677087, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9f1fc6fc3effa0d0528b629341a79b84?s=128&d=identicon&r=PG&f=1", "display_name": "Benr783", "link": "https://stackoverflow.com/users/3677087/benr783"}, "edited": false, "score": 19, "creation_date": 1570829123, "post_id": 46369189, "comment_id": 103052338, "body": "This fixed it for me on macOS Catalina. Thank you :)"}, {"owner": {"reputation": 554, "user_id": 577652, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f10fffdb8fb028dbedb91612fc94d441?s=128&d=identicon&r=PG", "display_name": "shlomiLan", "link": "https://stackoverflow.com/users/577652/shlomilan"}, "edited": false, "score": 0, "creation_date": 1599371836, "post_id": 46369189, "comment_id": 112751037, "body": "I didn&#39;t think it will help but it did, macOS Catalina."}, {"owner": {"reputation": 4815, "user_id": 928191, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-vdq7KZueF-4/AAAAAAAAAAI/AAAAAAAAAQg/qpGTedu5fXE/photo.jpg?sz=128", "display_name": "monfresh", "link": "https://stackoverflow.com/users/928191/monfresh"}, "edited": false, "score": 0, "creation_date": 1609436244, "post_id": 46369189, "comment_id": 115844633, "body": "Ugh! You should never use sudo to install gems. I wrote a detailed, top-rated answer for safely installing gems on a Mac: <a href=\"https://stackoverflow.com/a/54873916/928191\">stackoverflow.com/a/54873916/928191</a>"}], "tags": [], "owner": {"reputation": 6817, "user_id": 280342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ac4fa3171c4d1d3a1bf0ebcb03c5921?s=128&d=identicon&r=PG", "display_name": "Torre Lasley", "link": "https://stackoverflow.com/users/280342/torre-lasley"}, "is_accepted": false, "score": 497, "last_activity_date": 1510747766, "last_edit_date": 1510747766, "creation_date": 1506097366, "answer_id": 46369189, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/46369189#46369189", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>I encountered this problem when upgrading to Mac OS High Sierra.</p>\n\n<p>This was my fix:</p>\n\n<pre><code>sudo gem install cocoapods\n</code></pre>\n\n<p>I found this answer on <a href=\"https://github.com/CocoaPods/CocoaPods/issues/6778\" rel=\"noreferrer\">the CocoaPods issue list on Github</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 145, "user_id": 4812253, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UMJpp.jpg?s=128&g=1", "display_name": "PJayRushton", "link": "https://stackoverflow.com/users/4812253/pjayrushton"}, "edited": false, "score": 0, "creation_date": 1507126639, "post_id": 46448062, "comment_id": 80087973, "body": "Most likely you didn&#39;t need to uninstall. That error just says you don&#39;t have the correct permissions to do what you were trying to do. So adding <code>sudo</code> was all you needed. See the comment from [<a href=\"https://stackoverflow.com/users/877341/blackhawk4152]\">stackoverflow.com/users/877341/blackhawk4152]</a> above"}], "tags": [], "owner": {"reputation": 2195, "user_id": 5490322, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5p8xX.jpg?s=128&g=1", "display_name": "Himanth", "link": "https://stackoverflow.com/users/5490322/himanth"}, "is_accepted": false, "score": 6, "last_activity_date": 1506515792, "creation_date": 1506515792, "answer_id": 46448062, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/46448062#46448062", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>While I'm trying to install again then I got another error saying that </p>\n\n<blockquote>\n  <p>ERROR:  While executing gem ... (Gem::FilePermissionError)\n      You don't have write permissions for the /Library/Ruby/Gems/2.3.0 directory.</p>\n</blockquote>\n\n<p>Then I did this and worked fine.</p>\n\n<pre><code>sudo gem uninstall cocoapods\n\nsudo gem install cocoapods\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3039, "user_id": 5905035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/NfHmK.png?s=128&g=1", "display_name": "John Sardinha", "link": "https://stackoverflow.com/users/5905035/john-sardinha"}, "edited": false, "score": 0, "creation_date": 1510758367, "post_id": 46815587, "comment_id": 81572015, "body": "Worked well, nice!"}, {"owner": {"reputation": 2392, "user_id": 4046561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VXvNj.jpg?s=128&g=1", "display_name": "gunjot singh", "link": "https://stackoverflow.com/users/4046561/gunjot-singh"}, "edited": false, "score": 0, "creation_date": 1517999583, "post_id": 46815587, "comment_id": 84320384, "body": "This is needed for High Sierra. Thank you."}, {"owner": {"reputation": 458, "user_id": 4323101, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7a69d904acf479ab91a68a6cf46dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "The1993", "link": "https://stackoverflow.com/users/4323101/the1993"}, "edited": false, "score": 13, "creation_date": 1570519584, "post_id": 46815587, "comment_id": 102929169, "body": "For those who updated to Catalina, this is needed as well."}], "tags": [], "owner": {"reputation": 2362, "user_id": 5867574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f48dee577219e1f3d5f0d4161fc1110?s=128&d=identicon&r=PG&f=1", "display_name": "Shan Ye", "link": "https://stackoverflow.com/users/5867574/shan-ye"}, "is_accepted": false, "score": 76, "last_activity_date": 1508346348, "creation_date": 1508346348, "answer_id": 46815587, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/46815587#46815587", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>After upgraded to High Sierra, I got the same error, just reinstalled the cocoapods</p>\n\n<pre><code>sudo gem install -n /usr/local/bin cocoapods\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 552, "user_id": 3136994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/654687034/picture?type=large", "display_name": "SagiSergeNadir", "link": "https://stackoverflow.com/users/3136994/sagisergenadir"}, "is_accepted": false, "score": 6, "last_activity_date": 1511351054, "creation_date": 1511351054, "answer_id": 47433875, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/47433875#47433875", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>On my mac this solved the problem:</p>\n\n<pre><code>brew uninstall cocoapods\n\nbrew install cocoapods\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 559, "user_id": 1284876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzE8S.png?s=128&g=1", "display_name": "cartland", "link": "https://stackoverflow.com/users/1284876/cartland"}, "is_accepted": false, "score": 2, "last_activity_date": 1522976243, "creation_date": 1522976243, "answer_id": 49683684, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/49683684#49683684", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>Fixed with</p>\n\n<pre><code>brew upgrade cocoapods\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 487, "user_id": 753451, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85d4032d575e0c8e853ff3037b51f16d?s=128&d=identicon&r=PG", "display_name": "Alex Buznik", "link": "https://stackoverflow.com/users/753451/alex-buznik"}, "edited": false, "score": 0, "creation_date": 1606825328, "post_id": 52072201, "comment_id": 115073753, "body": "Eventually this fixed the issue for me"}, {"owner": {"reputation": 243, "user_id": 2909384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xx110.png?s=128&g=1", "display_name": "duyhungws", "link": "https://stackoverflow.com/users/2909384/duyhungws"}, "edited": false, "score": 0, "creation_date": 1611859046, "post_id": 52072201, "comment_id": 116592893, "body": "Also saved my day!"}, {"owner": {"reputation": 1212, "user_id": 6158471, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ponQd.jpg?s=128&g=1", "display_name": "Anters Bear", "link": "https://stackoverflow.com/users/6158471/anters-bear"}, "edited": false, "score": 0, "creation_date": 1612168179, "post_id": 52072201, "comment_id": 116672103, "body": "you&#39;re my hero, thousand upvotes if i could"}], "tags": [], "owner": {"reputation": 4200, "user_id": 777745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xi7pE.png?s=128&g=1", "display_name": "goodhyun", "link": "https://stackoverflow.com/users/777745/goodhyun"}, "is_accepted": false, "score": 17, "last_activity_date": 1535528904, "creation_date": 1535528904, "answer_id": 52072201, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/52072201#52072201", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<pre><code>brew link --overwrite cocoapods\n</code></pre>\n\n<p><a href=\"https://github.com/CocoaPods/CocoaPods/issues/6898#issuecomment-364133270\" rel=\"noreferrer\">This line saved my day.</a>  </p>\n"}, {"comments": [{"owner": {"reputation": 306, "user_id": 8250808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/101f2e832e28d82ad6053255fdc8de5a?s=128&d=identicon&r=PG", "display_name": "Ying Chen", "link": "https://stackoverflow.com/users/8250808/ying-chen"}, "edited": false, "score": 4, "creation_date": 1570727836, "post_id": 56359533, "comment_id": 103014328, "body": "Getting the same issue after upgrading to Catalina. This helps! Use <code>Sudo</code> in front to get write permission fwiw."}, {"owner": {"reputation": 312, "user_id": 6188282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/751cb06f70968d20dfd092ebc9feb729?s=128&d=identicon&r=PG&f=1", "display_name": "Hoon", "link": "https://stackoverflow.com/users/6188282/hoon"}, "edited": false, "score": 4, "creation_date": 1570728123, "post_id": 56359533, "comment_id": 103014429, "body": "I ended up here after Catalina installation. This works well."}, {"owner": {"reputation": 143, "user_id": 9398051, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mRiVC.jpg?s=128&g=1", "display_name": "Fato", "link": "https://stackoverflow.com/users/9398051/fato"}, "edited": false, "score": 2, "creation_date": 1571209237, "post_id": 56359533, "comment_id": 103158984, "body": "worked for me after updating 10.14 Mojave to 10.15 Catalina"}], "tags": [], "owner": {"reputation": 1238, "user_id": 3475875, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002001954231/picture?type=large", "display_name": "Niraj Paul", "link": "https://stackoverflow.com/users/3475875/niraj-paul"}, "is_accepted": false, "score": 52, "last_activity_date": 1570746809, "last_edit_date": 1570746809, "creation_date": 1559129228, "answer_id": 56359533, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/56359533#56359533", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>Same issue I was facing when I updated our system from <code>Sierra</code> to <code>Mojave.</code> Also works for Catalina</p>\n\n<p>The following steps worked: </p>\n\n<pre><code>sudo gem update --system\nsudo gem install -n /usr/local/bin cocoapods\n</code></pre>\n\n<p>I got the help from the following <a href=\"https://github.com/CocoaPods/CocoaPods/issues/6898#issuecomment-333230288\" rel=\"noreferrer\">link</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2237, "user_id": 1087449, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c716b253577b0562c355b3797a5e1a2e?s=128&d=identicon&r=PG", "display_name": "giorgos.nl", "link": "https://stackoverflow.com/users/1087449/giorgos-nl"}, "is_accepted": false, "score": 0, "last_activity_date": 1562425751, "creation_date": 1562425751, "answer_id": 56915305, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/56915305#56915305", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>In my case nothing of the above worked. I had ruby 2.3.0 installed and I had to downgrade to 2.0.0:</p>\n\n<p><code>gem update --system 2.0.0</code></p>\n"}, {"comments": [{"owner": {"reputation": 3029, "user_id": 4220994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2b32f55cd8027464c404accbe200ba72?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4220994/joe"}, "edited": false, "score": 12, "creation_date": 1574017268, "post_id": 58394218, "comment_id": 104070926, "body": "This was the solution for me after upgrading to Catalina."}, {"owner": {"reputation": 594, "user_id": 1369291, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fd7eb6ca35e255f4e2b0879529f3af4a?s=128&d=identicon&r=PG", "display_name": "Chandni", "link": "https://stackoverflow.com/users/1369291/chandni"}, "edited": false, "score": 1, "creation_date": 1585840202, "post_id": 58394218, "comment_id": 107910451, "body": "You might have to install separate package for the ruby development environment, ruby-dev or ruby-devel for example."}, {"owner": {"reputation": 29076, "user_id": 332578, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3Z3w2.jpg?s=128&g=1", "display_name": "Jacksonkr", "link": "https://stackoverflow.com/users/332578/jacksonkr"}, "edited": false, "score": 0, "creation_date": 1589205581, "post_id": 58394218, "comment_id": 109192677, "body": "Along with this I also had an issue with openssl that I had to fix first - <code>brew uninstall openssl &amp; brew install openssl</code>"}], "tags": [], "owner": {"reputation": 1654, "user_id": 1268459, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0a0Gk.jpg?s=128&g=1", "display_name": "Rendel", "link": "https://stackoverflow.com/users/1268459/rendel"}, "is_accepted": false, "score": 115, "last_activity_date": 1571140877, "creation_date": 1571140877, "answer_id": 58394218, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/58394218#58394218", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>This happened when I upgraded to Catalina.\nI solved it by running:</p>\n\n<pre><code>sudo gem install -n /usr/local/bin ruby\nsudo gem install -n /usr/local/bin cocoapods\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1222, "user_id": 1838325, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cfe469e68dbef3874be271f2d4f356de?s=128&d=identicon&r=PG", "display_name": "Kamen Dobrev", "link": "https://stackoverflow.com/users/1838325/kamen-dobrev"}, "edited": false, "score": 0, "creation_date": 1585241624, "post_id": 58701602, "comment_id": 107698489, "body": "Nice! Only this answer worked for me. Apparently after upgrading to Catalina ruby 2.3 was replaced with 2.6"}], "tags": [], "owner": {"reputation": 437, "user_id": 9179668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d1294aa6e23fc60669c9b99283781ea?s=128&d=identicon&r=PG&f=1", "display_name": "MangoLassi", "link": "https://stackoverflow.com/users/9179668/mangolassi"}, "is_accepted": false, "score": 6, "last_activity_date": 1572904308, "creation_date": 1572904308, "answer_id": 58701602, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/58701602#58701602", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>After upgrading from OS X Mojave to OS X Catalina I received this message when running <code>pod init</code> or <code>pod --version</code>:\n<code>-bash: /Users/mangolassi/.gem/bin/pod: /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby: bad interpreter: No such file or directory</code></p>\n\n<p>I don't like the idea of <code>sudo gem install cocoapods</code> so I have my .cocoapods folder in my user directory and I've modified my .bash_profile to point to it.  The error I received was because the version 2.3 was hard coded in this file:\n<code>/Users/eric/.gem/bin/pod</code> and Catalina came with 2.6.</p>\n\n<p>It's possible that using sudo install would overwrite this file successfully, and probably does, but I wanted to keep my original setup.</p>\n\n<p>I was able to to just modify the first shebang line of the file <code>/Users/eric/.gem/bin/pod</code> to have a path with 2.6 instead of 2.3 and it worked.  The entire change was changing the '3' to a '6' in my chase as the version was still '2'. </p>\n"}, {"tags": [], "owner": {"reputation": 911, "user_id": 1529524, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9c2e6dfd421c350484f75de850a770de?s=128&d=identicon&r=PG", "display_name": "Pinwheeler", "link": "https://stackoverflow.com/users/1529524/pinwheeler"}, "is_accepted": false, "score": 0, "last_activity_date": 1585177875, "creation_date": 1585177875, "answer_id": 60858700, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/60858700#60858700", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>The \"rubyist approved\" way of doing this is to install a ruby version manager (rbenv) and install cocoapods through that. Messing with <code>sudo</code> and your rubygems is going to lead to tears.</p>\n"}, {"tags": [], "owner": {"reputation": 160, "user_id": 10254290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44f27e1d3e43db180d9a05194996705a?s=128&d=identicon&r=PG&f=1", "display_name": "CocodyRockStar", "link": "https://stackoverflow.com/users/10254290/cocodyrockstar"}, "is_accepted": false, "score": 10, "last_activity_date": 1590138810, "creation_date": 1590138810, "answer_id": 61951593, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/61951593#61951593", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>The following worked for me:</p>\n\n<blockquote>\n  <p>Select Command Line Tools in XCode.</p>\n\n<pre><code>    XCode &gt; Preferences &gt; Locations &gt; Command Line Tools &gt; XCode 11.X.X\n\nIn terminal execute:\n\n    sudo gem install cocoapods -n /usr/local/bin\n</code></pre>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/a/60464653\">https://stackoverflow.com/a/60464653</a></p>\n"}, {"tags": [], "owner": {"reputation": 853, "user_id": 7876086, "user_type": "registered", "profile_image": "https://graph.facebook.com/1276085992445802/picture?type=large", "display_name": "Gayal Kuruppu", "link": "https://stackoverflow.com/users/7876086/gayal-kuruppu"}, "is_accepted": false, "score": 3, "last_activity_date": 1603993191, "last_edit_date": 1603993191, "creation_date": 1603231925, "answer_id": 64454057, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/64454057#64454057", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<h2>for MACOS X Catalina</h2>\n<p>Tried most of the answers but none worked. If the above doesn't work try Opening Xcode preferences &gt; Locations &gt; selecting Command Line Tools to Xcode. Then install cocoapods</p>\n<pre><code>sudo gem install -n /usr/local/bin cocoapods\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4815, "user_id": 928191, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-vdq7KZueF-4/AAAAAAAAAAI/AAAAAAAAAQg/qpGTedu5fXE/photo.jpg?sz=128", "display_name": "monfresh", "link": "https://stackoverflow.com/users/928191/monfresh"}, "is_accepted": false, "score": 1, "last_activity_date": 1609451199, "last_edit_date": 1609451199, "creation_date": 1609436365, "answer_id": 65524020, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/65524020#65524020", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>The error in the original post is due to an improperly configured Ruby environment. You <a href=\"https://www.moncefbelyamani.com/why-you-should-never-use-sudo-to-install-ruby-gems/\" rel=\"nofollow noreferrer\">should never use <code>sudo</code> to install gems</a>, no matter how many times you see it as an accepted answer on Stack Overflow.</p>\n<p>At a high level, setting up a proper Ruby development environment on a Mac involves six steps:</p>\n<ol>\n<li>Install Homebrew (which also installs the prerequisite Apple command line tools)</li>\n<li>Install a Ruby manager (such as chruby, rbenv, asdf, RVM) - most of these can be installed with Homebrew</li>\n<li>Configure the Ruby manager by adding the appropriate lines to your shell file (<code>~/.bash_profile</code> or <code>~/.zshrc</code>) - each manager will have instructions for doing this, and this is a typical step that people miss</li>\n<li>Restart the terminal (or open a new tab) for the shell changes to take effect - another step that is often overlooked</li>\n<li>Install a specific version of Ruby using the Ruby manager</li>\n<li>Switch to that version of Ruby using the Ruby manager</li>\n</ol>\n<p>My personal preference is <a href=\"https://github.com/postmodern/chruby\" rel=\"nofollow noreferrer\">chruby</a> with <a href=\"https://github.com/postmodern/ruby-install\" rel=\"nofollow noreferrer\">ruby-install</a>. For more details and a script that can automate this whole process, check out my answer here:\n<a href=\"https://stackoverflow.com/a/54873916/928191\">https://stackoverflow.com/a/54873916/928191</a></p>\n<p>As the accepted answer mentions, you can also install Ruby with Homebrew, but you also need to make sure to set your PATH in your shell file. Instructions for this are in my answer linked above.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12981270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2ec9d268ad7626804317cbaab7cd53?s=128&d=identicon&r=PG&f=1", "display_name": "Raseone", "link": "https://stackoverflow.com/users/12981270/raseone"}, "is_accepted": false, "score": 0, "last_activity_date": 1616188391, "creation_date": 1616188391, "answer_id": 66715653, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error/66715653#66715653", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>Find the pod file. Mine was located at usr/local/bin/pod</p>\n<p>You'll find that the top line says version 2.3. Edit this file to the correct version number. Save a copy of the original incase you mess it up.</p>\n<p>Try your pod related commands again.</p>\n<p>Worked for me after days of trying everything.</p>\n"}], "owner": {"reputation": 2865, "user_id": 3670235, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9ff2385d34ead2ef2401ee979d6c3b97?s=128&d=identicon&r=PG&f=1", "display_name": "user3670235", "link": "https://stackoverflow.com/users/3670235/user3670235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58335, "favorite_count": 14, "accepted_answer_id": 32266922, "answer_count": 16, "score": 242, "last_activity_date": 1616188391, "creation_date": 1436998812, "last_edit_date": 1614286084, "question_id": 31442214, "link": "https://stackoverflow.com/questions/31442214/running-pod-setup-gives-me-bad-interpreter-no-such-file-or-directory-error", "title": "Running pod setup gives me &quot;bad interpreter: No such file or directory&quot; error", "body": "<p>Recently I tried to do <code>pod setup</code> and I get this error:</p>\n<pre><code>-bash: /usr/local/bin/pod: /usr/local/opt/ruby/bin/ruby: bad interpreter: No such file or directory\n</code></pre>\n<p>I followed Ray Wenderlich's guide to install CocoaPods and I get this issue so I have no idea what is going on.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "edited": false, "score": 0, "creation_date": 1436999351, "post_id": 31442193, "comment_id": 50853702, "body": "Can you post all the code for the <code>RiotApi</code> class?  From what you&#39;ve presented, it looks like it should be working."}, {"owner": {"reputation": 1781, "user_id": 3277633, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d4a27cdac076e1e488208b60677242e0?s=128&d=identicon&r=PG&f=1", "display_name": "user3277633", "link": "https://stackoverflow.com/users/3277633/user3277633"}, "reply_to_user": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "edited": false, "score": 0, "creation_date": 1436999449, "post_id": 31442193, "comment_id": 50853740, "body": "RiotApi class only contains def_full_stats, which is why I am confused too. If I hard code the id portion of the url in, it works perfectly fine."}, {"owner": {"reputation": 1781, "user_id": 3277633, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d4a27cdac076e1e488208b60677242e0?s=128&d=identicon&r=PG&f=1", "display_name": "user3277633", "link": "https://stackoverflow.com/users/3277633/user3277633"}, "reply_to_user": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "edited": false, "score": 0, "creation_date": 1436999559, "post_id": 31442193, "comment_id": 50853786, "body": "the error changed to bad url after I restarted the server"}], "answers": [{"tags": [], "owner": {"reputation": 3272, "user_id": 1002119, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/572619902486cedc5a286632a812d93b?s=128&d=identicon&r=PG", "display_name": "user1002119", "link": "https://stackoverflow.com/users/1002119/user1002119"}, "is_accepted": true, "score": 2, "last_activity_date": 1437000361, "creation_date": 1437000361, "answer_id": 31442535, "question_id": 31442193, "link": "https://stackoverflow.com/questions/31442193/incorporate-ruby-parameters-into-string-raises-bad-url-error/31442535#31442535", "title": "Incorporate ruby parameters into string raises bad url error", "body": "<p>You need to use double quotes for string interpolation to work.  For example,</p>\n\n<pre><code>def get_full_stats(id)\n    riot_url = \"https://na.api.pvp.net/api/lol/na/v1.3/stats/by-summoner/#{id}/ranked?api_key=mykey\"\n    response = HTTParty.get(riot_url)\n    json = JSON.parse(response.body)\n    json\nend\n</code></pre>\n"}], "owner": {"reputation": 1781, "user_id": 3277633, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d4a27cdac076e1e488208b60677242e0?s=128&d=identicon&r=PG&f=1", "display_name": "user3277633", "link": "https://stackoverflow.com/users/3277633/user3277633"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 31442535, "answer_count": 1, "score": 2, "last_activity_date": 1437000361, "creation_date": 1436998720, "last_edit_date": 1436999545, "question_id": 31442193, "link": "https://stackoverflow.com/questions/31442193/incorporate-ruby-parameters-into-string-raises-bad-url-error", "title": "Incorporate ruby parameters into string raises bad url error", "body": "<p>Not sure what I'm doing here</p>\n\n<pre><code>def get_full_stats(id)\n        riot_url = 'https://na.api.pvp.net/api/lol/na/v1.3/stats/by-summoner/#{id}/ranked?api_key=mykey'\n        response = HTTParty.get(riot_url)\n        json = JSON.parse(response.body)\n        json\n    end\n</code></pre>\n\n<p>and in my show.html.erb I am calling the following</p>\n\n<pre><code>api = RiotApi.new\n@info = api.get_full_stats(19380406)\n</code></pre>\n\n<p>the view is returning to me <code>wrong number of arguments (1 for 0)</code> for the <code>@info = api.get_full_stats(19380406)</code> line. </p>\n\n<p>I tried casting the parameter as a string  <code>@info = api.get_full_stats('19380406')</code> but still raises the same error.</p>\n\n<p>What's going on here?</p>\n\n<p>After restarting the server, it appears that I now have a <code>URI::InvalidURIError</code> Error instead. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1004, "user_id": 1361193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/852a09b9b32539fb9358cc062dcbabbb?s=128&d=identicon&r=PG", "display_name": "tomr", "link": "https://stackoverflow.com/users/1361193/tomr"}, "edited": false, "score": 0, "creation_date": 1436998985, "post_id": 31442197, "comment_id": 50853567, "body": "Hey adam, thanks for your answer I am actually more interested in how I could do that myself - for the sake of learning and understanding :)"}], "tags": [], "owner": {"reputation": 1751, "user_id": 1212336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4002e9409f235e93386772dbe71c1500?s=128&d=identicon&r=PG", "display_name": "adamliesko", "link": "https://stackoverflow.com/users/1212336/adamliesko"}, "is_accepted": false, "score": 0, "last_activity_date": 1436998744, "creation_date": 1436998744, "answer_id": 31442197, "question_id": 31442005, "link": "https://stackoverflow.com/questions/31442005/rails-set-locals-via-before-action-without-using-instance-variables/31442197#31442197", "title": "Rails set locals via before_action without using instance variables", "body": "<p>There is a gem, which I think might be suitable for your use case - decent_exposure.</p>\n\n<pre><code>expose(:image) do\n  Image.find_or_initialize_by(params[:id])\nend\nexpose(:location) do\n  Location.find(image.location_id)\nend\n</code></pre>\n\n<p><a href=\"https://github.com/hashrocket/decent_exposure\" rel=\"nofollow\">https://github.com/hashrocket/decent_exposure</a></p>\n"}, {"tags": [], "owner": {"reputation": 1606, "user_id": 3137698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1819a8d2ac84a22c29b910b38dd4686f?s=128&d=identicon&r=PG", "display_name": "zinovyev", "link": "https://stackoverflow.com/users/3137698/zinovyev"}, "is_accepted": true, "score": 1, "last_activity_date": 1530641863, "creation_date": 1530641863, "answer_id": 51160776, "question_id": 31442005, "link": "https://stackoverflow.com/questions/31442005/rails-set-locals-via-before-action-without-using-instance-variables/51160776#51160776", "title": "Rails set locals via before_action without using instance variables", "body": "<p>I have configured the ability to preset <code>locals</code> via the <code>before_action</code> hook by using a custom function for rendering (say <code>render_with_locals</code>) and an instance variable <code>@_locals</code> as a temporary storage:</p>\n\n<pre><code>before_action :set_common_locals\n\ndef new\n  render_with_locals\nend\n\ndef my_method\n  render_with_locals\nend\n\n# You can replace any parameter or add some new parameters\ndef my_other_method\n  render_with_locals locals: { image: image2, other_option: other_option }\nend\n\nprivate\n\ndef render_with_locals(*args)\n  options = args.extract_options!\n  locals = options[:locals] || {}\n  options[:locals] = @_locals.merge(locals)\n  render(*args, options)\nend\n\ndef set_common_locals\n  @_locals ||= {\n    image: image,\n    location: location,\n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 1004, "user_id": 1361193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/852a09b9b32539fb9358cc062dcbabbb?s=128&d=identicon&r=PG", "display_name": "tomr", "link": "https://stackoverflow.com/users/1361193/tomr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 51160776, "answer_count": 2, "score": 1, "last_activity_date": 1530641863, "creation_date": 1436997949, "question_id": 31442005, "link": "https://stackoverflow.com/questions/31442005/rails-set-locals-via-before-action-without-using-instance-variables", "title": "Rails set locals via before_action without using instance variables", "body": "<p>I am still quite new to ruby &amp; to rails and trying something - I am not sure if it is actually possible (or even useful):</p>\n\n<p>I want to set variables in a before_action, but I dont want them to be instance variables, but later rendered in views via <code>render locals: {}</code>.</p>\n\n<p>Controller</p>\n\n<pre><code>before_action :set_image_and_location, only: [:new, :my_method]\n\ndef new\n  render locals: { image: image, location: location }\nend\n\ndef my_method\n  # do other stuff\n  render locals: { image: image, location: location }\nend\n\nprivate\n\ndef set_image_and_location\n  image = Image.find_or_initialize_by(params[:id])\n  location = Location.find(image.location_id)\nend\n</code></pre>\n\n<p>So how do I get them from the \"set_image_and_location\" to the methods without using instance variables? Or is this not possible or in general a bad idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "routes"], "comments": [{"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1436999360, "post_id": 31441847, "comment_id": 50853706, "body": "Not quite sure what you mean - can you give an example of how you would like the output to look?"}], "answers": [{"tags": [], "owner": {"reputation": 4471, "user_id": 1550398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1793c27571f8787e11e89f7413e59091?s=128&d=identicon&r=PG", "display_name": "Rodrigo Zurek", "link": "https://stackoverflow.com/users/1550398/rodrigo-zurek"}, "is_accepted": false, "score": 0, "last_activity_date": 1437081821, "creation_date": 1437081821, "answer_id": 31464794, "question_id": 31441847, "link": "https://stackoverflow.com/questions/31441847/rails-nested-routes-with-controller/31464794#31464794", "title": "Rails nested routes with controller", "body": "<p>finally after research I came up with this:</p>\n\n<pre><code>  namespace :api, defaults: {format: :json} do\n    namespace :v1 do\n      resources :users, only: [:create]\n      resources :cars\n      scope \"users/:id\", as: \"users\", module: \"users\" do\n         resources :cars\n         resources :friends\n         resources :drink\n      end\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 4471, "user_id": 1550398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1793c27571f8787e11e89f7413e59091?s=128&d=identicon&r=PG", "display_name": "Rodrigo Zurek", "link": "https://stackoverflow.com/users/1550398/rodrigo-zurek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437081821, "creation_date": 1436997324, "last_edit_date": 1437004040, "question_id": 31441847, "link": "https://stackoverflow.com/questions/31441847/rails-nested-routes-with-controller", "title": "Rails nested routes with controller", "body": "<p>I have these routes:</p>\n\n<pre><code>      namespace :api, defaults: {format: :json} do\n\n\n      namespace :v1 do\n      resources :cars\n\n      resources :users, only: [:create] do\n        member do\n          resources :cars, controller: \"user/cars\"\n          resources :friends, controller: \"user/friends\"\n          resources :drink, controller: \"user/drinks\"\n        end\n      end\n\n    end\n  end\n</code></pre>\n\n<p>Is there a way to abstract the non-dry controller definition on those nested resources?</p>\n\n<p>EDIT:</p>\n\n<p>my ideal example output is:</p>\n\n<p>namespace :api, defaults: {format: :json} do\n    namespace :v1 do</p>\n\n<pre><code>  resources :cars\n\n  resources :users, only: [:create] do\n    member do\n      resources :cars\n      resources :friends\n      resources :drink\n    end\n  end\n\nend\n</code></pre>\n\n<p>end</p>\n\n<p>and that the three nested resources use that controller previously stated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake"], "answers": [{"tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 1, "last_activity_date": 1437000944, "creation_date": 1437000944, "answer_id": 31442639, "question_id": 31441768, "link": "https://stackoverflow.com/questions/31441768/how-metal-is-different-than-rack/31442639#31442639", "title": "How Metal is different than Rack?", "body": "<p>Metal is / was supposed to be a subset of Rack. It had the same rack interface for compatibility purposes.<br>\nI think Rails was reverted back to use rack in version 3, so you won't find much about metal anymore.</p>\n"}], "owner": {"reputation": 85, "user_id": 3897222, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100000363089057/picture?type=large", "display_name": "Lucas Barsinsky", "link": "https://stackoverflow.com/users/3897222/lucas-barsinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1437057152, "creation_date": 1436996982, "last_edit_date": 1437057152, "question_id": 31441768, "link": "https://stackoverflow.com/questions/31441768/how-metal-is-different-than-rack", "title": "How Metal is different than Rack?", "body": "<p>I just watched Railscasts #150 Rails Metal and I got a question to ask.</p>\n\n<p>How Metal is different than Rack? Is Metal just Rails effort to be Rack compatible? And when to use what? </p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Here is I found a good answer on my question.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21603658/what-is-the-exact-difference-between-rack-and-rails-metal-in-ruby-on-rails\">What is the exact difference between Rack and Rails Metal in Ruby on Rails</a></p>\n"}, {"tags": ["ruby", "session", "heroku", "sinatra"], "comments": [{"owner": {"reputation": 471, "user_id": 200237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781bda58d641b468092d36f4abda0170?s=128&d=identicon&r=PG", "display_name": "Glenn Gillen", "link": "https://stackoverflow.com/users/200237/glenn-gillen"}, "edited": false, "score": 0, "creation_date": 1437051425, "post_id": 31441505, "comment_id": 50876682, "body": "Are you able to share a little more on what you&#39;re trying to achieve here, and why you&#39;re taking this approach. There&#39;s a lot going on here that isn&#39;t very idiomatic of Sinatra or Ruby, and combined with all of the code we can&#39;t see (e.g., the definitions of the controllers) it&#39;s hard to say with confidence what&#39;s broken vs what&#39;s just being implemented in a non-standard way. EDIT: Just noticed the code is on GitHub, I&#39;ll go poke around there :)"}], "answers": [{"tags": [], "owner": {"reputation": 938, "user_id": 4522937, "user_type": "registered", "profile_image": "https://graph.facebook.com/730829297031111/picture?type=large", "display_name": "Kaysser Kayyali", "link": "https://stackoverflow.com/users/4522937/kaysser-kayyali"}, "is_accepted": false, "score": 0, "last_activity_date": 1436998417, "creation_date": 1436998417, "answer_id": 31442117, "question_id": 31441505, "link": "https://stackoverflow.com/questions/31441505/sinatra-session-data-shared-between-browsers/31442117#31442117", "title": "Sinatra Session data shared between browsers", "body": "<p>I would recommend using this</p>\n\n<blockquote>\n  <p>get '/logout' do </p>\n  \n  <p>session.clear</p>\n  \n  <p>end</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 468, "user_id": 4543415, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/96xKS.jpg?s=128&g=1", "display_name": "Phil Brockwell", "link": "https://stackoverflow.com/users/4543415/phil-brockwell"}, "edited": false, "score": 0, "creation_date": 1437053587, "post_id": 31455219, "comment_id": 50878348, "body": "Thanks for your response. Ive used Singleton classes so that I can reference a single instance of each controller in each of the controller. Letting the controller communicate with each other. Is there a more effective way of doing this?"}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 468, "user_id": 4543415, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/96xKS.jpg?s=128&g=1", "display_name": "Phil Brockwell", "link": "https://stackoverflow.com/users/4543415/phil-brockwell"}, "edited": false, "score": 0, "creation_date": 1437206255, "post_id": 31455219, "comment_id": 50942262, "body": "@robertpulson from <a href=\"http://www.sinatrarb.com/intro.html#Request/Instance%20Scope\" rel=\"nofollow noreferrer\">the docs</a> &quot;For every incoming request, a new instance of your application class is created&quot;. To share data either use the <a href=\"http://www.sinatrarb.com/intro.html#Configuration\" rel=\"nofollow noreferrer\">settings helper</a> or use a class instance variable."}], "tags": [], "owner": {"reputation": 471, "user_id": 200237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781bda58d641b468092d36f4abda0170?s=128&d=identicon&r=PG", "display_name": "Glenn Gillen", "link": "https://stackoverflow.com/users/200237/glenn-gillen"}, "is_accepted": false, "score": 3, "last_activity_date": 1437052396, "creation_date": 1437052396, "answer_id": 31455219, "question_id": 31441505, "link": "https://stackoverflow.com/questions/31441505/sinatra-session-data-shared-between-browsers/31455219#31455219", "title": "Sinatra Session data shared between browsers", "body": "<p>So I'm pretty sure the core of your problem is <a href=\"https://github.com/robertpulson/banking_application/blob/master/lib/controllers/holders_controller.rb#L6\" rel=\"nofollow\">this line</a> which you have in multiple places throughout your code. As per the <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/singleton/rdoc/Singleton.html\" rel=\"nofollow\">ruby docs</a> </p>\n\n<blockquote>\n  <p>This ensures that only one instance of Klass can be created.</p>\n</blockquote>\n\n<p>You've explicitly told ruby to only ever let one copy of each class/module ever exist. I don't think that's what you want.</p>\n\n<p>It's a bit hard to infer what it is you're trying to achieve exactly but I don't think using <code>Singleton</code> in a web app is going to be the right solution. The assumptions it imposes break down as soon as you run a 2nd instance (or dyno in Heroku parlance) of your app. </p>\n"}], "owner": {"reputation": 468, "user_id": 4543415, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/96xKS.jpg?s=128&g=1", "display_name": "Phil Brockwell", "link": "https://stackoverflow.com/users/4543415/phil-brockwell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1437052396, "creation_date": 1436995870, "last_edit_date": 1436997364, "question_id": 31441505, "link": "https://stackoverflow.com/questions/31441505/sinatra-session-data-shared-between-browsers", "title": "Sinatra Session data shared between browsers", "body": "<p>I have a basic banking application running on <a href=\"https://greenwich-banking.herokuapp.com\" rel=\"nofollow\">Heroku</a> using Sinatra.</p>\n\n<p>I have tried implementing sessions to ensure each user that visits has a different version of the app. However, at the moment, if I visit it with two separate browsers, I have the same data.</p>\n\n<p>There is no backend database implemented but data I add via the interface persists in every browser I visit in.</p>\n\n<p><strong>Here is my <code>app.rb</code>:</strong></p>\n\n<pre><code>require 'sinatra/base'\nrequire 'tilt/erb'\nrequire 'require_all'\nrequire_all 'lib'\nrequire 'rufus-scheduler'\n\nclass BankingApp &lt; Sinatra::Base\n\n  enable :sessions\n  set :session_secret, 'super secret'\n\n  get '/' do\n    session[:accounts] = AccountsController.instance\n    session[:holders]  = HoldersController.instance\n    session[:loans]    = LoansController.instance \n    erb :index\n  end\n\n  get '/holders' do\n    @holders = session[:holders].store\n    erb :holders\n  end\n\n  get '/holders_accounts' do\n    @holder = session[:holders].find(params[:id].to_i)\n    message = session[:accounts].get_accounts_of(params[:id].to_i)\n    @accounts = message.accounts\n    erb :holders_accounts\n  end\n\n  get '/new_holder' do\n    erb :new_holder\n  end\n\n  post '/new_holder' do\n    @message = session[:holders].create(params[:name])\n    @holders = session[:holders].store\n    erb :holders\n  end\n\n  get '/create_account' do\n    erb :create_account\n  end\n\n  post '/create_account' do\n    type = :Current\n    id = params[:id].to_i\n    @message = session[:accounts].open(type, with: id)\n    erb :index\n  end\n\n  get '/accounts' do\n    @accounts = session[:accounts].store\n    erb :accounts\n  end\n\n  get '/transactions' do\n    message = session[:accounts].get_transactions_of(params[:id].to_i)\n    @transactions = message.transactions\n    erb :transactions\n  end\n\n  get '/deposit' do\n    erb :deposit\n  end\n\n  post '/deposit' do\n    @accounts = session[:accounts].store\n    @message = session[:accounts].deposit(params[:amount].to_i, into: params[:id].to_i)\n    erb :accounts\n  end\n\n  get '/withdraw' do\n    erb :withdraw\n  end\n\n  post '/withdraw' do\n    @accounts = session[:accounts].store\n    @message = session[:accounts].withdraw(params[:amount].to_i, from: params[:id].to_i)\n    erb :accounts\n  end\n\n  get '/transfer' do\n    erb :transfer\n  end\n\n  post '/transfer' do\n    @accounts = session[:accounts].store\n    @message = session[:accounts].transfer(params[:amount].to_i, from: params[:donar].to_i, to: params[:recipitent].to_i)\n    erb :accounts\n  end\n\n  get '/add_holder' do\n    erb :add_holder\n  end\n\n  post '/add_holder' do\n    @accounts = session[:accounts].store\n    @message = session[:accounts].add_holder(params[:holder_id].to_i, to: params[:account_id].to_i)\n    erb :accounts\n  end\n\n  get '/enable_overdraft' do\n    erb :enable_overdraft\n  end\n\n  post '/enable_overdraft' do\n    @accounts = session[:accounts].store\n    @message = session[:accounts].activate_overdraft(params[:id].to_i, params[:amount].to_i)\n    erb :accounts\n  end\n\n  get '/disable_overdraft' do\n    erb :disable_overdraft\n  end\n\n  post '/disable_overdraft' do\n    @accounts = session[:accounts].store\n    @message = session[:accounts].deactivate_overdraft(params[:id].to_i)\n    erb :accounts\n  end\n\n  get '/loans' do\n    @loans = session[:loans].store\n    erb :loans\n  end\n\n  get '/loan_view' do\n    message = session[:loans].show(params[:id].to_i)\n    @transactions = message.transactions\n    erb :loan_view\n  end\n\n  get '/new_loan' do\n    erb :new_loan\n  end\n\n  post '/new_loan' do\n    @loans = session[:loans].store\n    id = params[:id].to_i\n    options = { borrowed: params[:amount].to_i, term: params[:term].to_i, rate: params[:rate].to_f }\n    @message = session[:loans].create_loan(id, options)\n    erb :loans\n  end\n\n  get '/pay_loan' do\n    erb :pay_loan\n  end\n\n  post '/pay_loan' do\n    @message = session[:loans].pay(params[:amount].to_i, off: params[:id].to_i)\n    @loans = session[:loans].store\n    erb :loans\n  end\n\n  # start the server if ruby file executed directly\n  run! if app_file == $0\nend\n</code></pre>\n\n<p>I do not have a great deal of experience with Sinatra so apologies if this is an oversight on my part.</p>\n\n<p>Any help greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "edited": false, "score": 1, "creation_date": 1436996488, "post_id": 31441471, "comment_id": 50852504, "body": "Just a quick note - often you have to drop by to straight sql for this sort of stuff.  You might be able to use arel but with some nasty subselects.  I&#39;ll pop back by later and you don&#39;t have a reasonable answer I&#39;ll answer for you."}], "answers": [{"tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": true, "score": 0, "last_activity_date": 1436999178, "creation_date": 1436999178, "answer_id": 31442296, "question_id": 31441471, "link": "https://stackoverflow.com/questions/31441471/ruby-less-expensive-way-for-chained-activerecord-queries/31442296#31442296", "title": "Ruby - less expensive way for chained ActiveRecord queries", "body": "<p>The reason you're experiencing expensive queries is because you're not actually using ActiveRecord's query interface, or even SQL to narrow your query, but instead are loading the entire dataset into Ruby memory objects and then looping over the result in Ruby. </p>\n\n<p>I suspect that if you inspect your logfiles you'll see something like this: </p>\n\n<pre><code>&gt;&gt; PlanDate.select{ |pd| pd.plan.user.id == user_id }.map { |pd| pd.recipe_id }\n  PlanDate Load (1.3ms)  SELECT \"plan_dates\".* FROM \"plan_dates\"\n=&gt; [#&lt;PlanDate....\n</code></pre>\n\n<p>What you want to do is to use ActiveRecord's query interface to build the query, something like this: </p>\n\n<pre><code>PlanDate.includes(plan: [:user]).where(\"plan.user_id == ?\", :user_id).pluck('recipe_id')\n</code></pre>\n\n<p>What that does is first: <a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/includes\" rel=\"nofollow\">Specify relationships to be included in the result set</a>, then <a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/where\" rel=\"nofollow\">specify the where conditions</a> of your SQL query, and finally pull out the recipe ids using <a href=\"http://apidock.com/rails/ActiveRecord/Calculations/pluck\" rel=\"nofollow\">pluck</a>. </p>\n\n<p>See <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_querying.html</a> for more info.</p>\n"}], "owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 31442296, "answer_count": 1, "score": -1, "last_activity_date": 1436999178, "creation_date": 1436995741, "question_id": 31441471, "link": "https://stackoverflow.com/questions/31441471/ruby-less-expensive-way-for-chained-activerecord-queries", "title": "Ruby - less expensive way for chained ActiveRecord queries", "body": "<p>What I have is currently working, but seems to be very expensive, any ideas on making it less expensive would be great!</p>\n\n<p>A <code>User</code> has many <code>Plans</code>, which has many <code>PlanDates</code>. Each <code>PlanDates</code> has a certain recipe denoted by a <code>recipe_id</code> attribute. Each <code>Plan</code> has a <code>meal_type</code> attribute which is either <code>Meat</code>, <code>Vegetarian</code>, or <code>Choice</code>, the latter means mixed. Each <code>Recipe</code> has a <code>type_of_meal</code> attribute that is either <code>Meat</code> or <code>Vegetarian</code>. Each <code>Recipe</code> also has a friendly <code>name</code> attribute.</p>\n\n<p>For a given PlanDate, I need to build an <code>options_for_select</code> in the following format:</p>\n\n<pre><code>[ [recipe_id, \"recipe_name\"], [recipe_id, \"recipe_name\"] ... ]\n</code></pre>\n\n<p>The options:</p>\n\n<ul>\n<li>must remove all the <code>recipe_ids</code> that have previously been given to the User (regardless of Plan)</li>\n<li>must remove all the <code>recipe_ids</code> with a type mismatch (i.e., if a Plan has <code>Meat</code> designated, the options must not have any <code>Vegetarian</code> <code>recipe_ids</code>), certainly this is not true if the Plan has <code>Choice</code> designated</li>\n</ul>\n\n<p>Here's the code I currently have:</p>\n\n<pre><code># builds an array of all the recipe_ids that have been given to this User on some PlanDate on some Plan\nrecipes_used_before_for_this_user = PlanDate.select { |pd| pd.plan.user.id == user_id }.map { |pd| pd.recipe_id }\n\n# narrows down the world of recipes to those that do NOT have an id of a recipe_used_before_for_this_user\nrecipes_not_used_before = Recipe.select { |r| (recipes_used_before_for_this_user.include? r.id) == false }\n\n# going forward, let's assume current_pd = the PlanDate object in question\n\nif current_pd.plan.meal_type == \"Choice\"\n   # easiest: if the meal_type is \"Choice\" then we just take the recipes_not_used_before and map them into the appropriate format\n   recipe_choices_array = recipes_not_used_before.map { |r| [ r.id, r.name ] }\nelse\n   # if the plan has a \"Meat\" or \"Vegetarian\" specification, we need to first narrow the recipes_not_used_before down by the right type and then map into the appropriate format\n   recipe_choices_array = recipes_not_used_before.select { |r| r.type_of_meal == potential_pd.first.plan.meal_type }.map { |r| [ r.id, r.name ] }\nend\n</code></pre>\n\n<p>Again, working, but I have a lot of PlanDates and a lot of Recipes, so if there is any way to streamline even further, would love your ideas. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "edited": false, "score": 0, "creation_date": 1436995421, "post_id": 31441366, "comment_id": 50852035, "body": "what problem do you have?  and how would you like to solve it?  please clarify."}], "answers": [{"tags": [], "owner": {"reputation": 1751, "user_id": 1212336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4002e9409f235e93386772dbe71c1500?s=128&d=identicon&r=PG", "display_name": "adamliesko", "link": "https://stackoverflow.com/users/1212336/adamliesko"}, "is_accepted": false, "score": 0, "last_activity_date": 1436998356, "creation_date": 1436998356, "answer_id": 31442095, "question_id": 31441366, "link": "https://stackoverflow.com/questions/31441366/update-attribute-of-model-only-through-defined-method-instead-of-default/31442095#31442095", "title": "update attribute of model only through defined method instead of default", "body": "<p>What you can certainly do is track the changed attributes, and filter only those you want to allow to be updatable in before_update callback. In your <code>update_status</code> method you could use assignment through <code>update_column</code> which does not trigger callbacks.</p>\n\n<pre><code>  before_update :prevent_status_update\n\n  private\n  def prevent_status_update\n    return true unless self.changed.includes? 'status'\n    self.errors.add_to_base \"Cannot update a #{ self.to_s }\"\n    false\n  end\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 4808432, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/eaedc4c7b54dcaf025894792bd0a4f0b?s=128&d=identicon&r=PG&f=1", "display_name": "xin buxu1", "link": "https://stackoverflow.com/users/4808432/xin-buxu1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436998356, "creation_date": 1436995283, "question_id": 31441366, "link": "https://stackoverflow.com/questions/31441366/update-attribute-of-model-only-through-defined-method-instead-of-default", "title": "update attribute of model only through defined method instead of default", "body": "<p>I have a model named \"MyModel\" and it has attribute named \"status\".\nI could update this attribute like this:\n  model.status = \"new\"\n  model.save!</p>\n\n<p>However, I override this update method with my own model method \"update_status\". Any update through the default updating will be reject unless it uses \"update_status\"</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 5186, "user_id": 1690765, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/59237bb43f984f251e904bd4904e4156?s=128&d=identicon&r=PG", "display_name": "Niels B.", "link": "https://stackoverflow.com/users/1690765/niels-b"}, "edited": false, "score": 0, "creation_date": 1437045715, "post_id": 31442683, "comment_id": 50872818, "body": "You are clear and our conclusions are the same, however it seems to be that Ruby&#39;s eval is incomplete.  I would expect <code>a = 3</code> and <code>eval &quot;a = 3&quot;</code> to produce exactly the same behavior. Perhaps offer a keyword argument like. <code>eval &quot;a = 3&quot;, new_scope: true</code> to produce the current behavior."}], "tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": false, "score": 1, "last_activity_date": 1437001269, "creation_date": 1437001269, "answer_id": 31442683, "question_id": 31441319, "link": "https://stackoverflow.com/questions/31441319/running-eval-without-creating-a-block-scope/31442683#31442683", "title": "Running eval without creating a block scope", "body": "<p>That is because a is not on the same context than irb.</p>\n\n<p>look at this code</p>\n\n<pre><code>2.2.1 :001 &gt; eval \"a = 42\"\n =&gt; 42 \n2.2.1 :002 &gt; a\nNameError: undefined local variable or method `a' for main:Object\n    from (irb):2\n    from /home/hbranciforte/.rvm/rubies/ruby-2.2.1/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>it's the same as blocks</p>\n\n<pre><code>2.2.1 :001 &gt; 1.times{|a| b=1}\n =&gt; 1 \n2.2.1 :002 &gt; b\nNameError: undefined local variable or method `b' for main:Object\n    from (irb):2\n    from /home/hbranciforte/.rvm/rubies/ruby-2.2.1/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>But... </p>\n\n<pre><code>2.2.1 :001 &gt; a=nil\n =&gt; nil \n2.2.1 :002 &gt; eval \"a = 42\"\n =&gt; 42 \n2.2.1 :003 &gt; a\n =&gt; 42 \n</code></pre>\n\n<p>it's like </p>\n\n<pre><code>2.2.1 :001 &gt; b=nil\n =&gt; nil \n2.2.1 :002 &gt; 1.times{|a| b=1}\n =&gt; 1 \n2.2.1 :003 &gt; b\n =&gt; 1 \n2.2.1 :004 &gt; \n</code></pre>\n\n<p>Instances variables work because it is part of \"self\" </p>\n\n<pre><code>2.2.1 :001 &gt; eval \"@b = 42\"\n =&gt; 42 \n2.2.1 :002 &gt; @b\n =&gt; 42 \n2.2.1 :003 &gt; \n</code></pre>\n\n<p>Take a look how to context could be sent to a method. from <a href=\"http://ruby-doc.org/core-2.2.0/Binding.html\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Binding.html</a></p>\n\n<pre><code>def get_binding(param)\n  return binding\nend\nb = get_binding(\"hello\")\nb.eval(\"param\")   #=&gt; \"hello\"\n</code></pre>\n\n<p>I don't know if I was clear but, that I want to say is that the real thing that really matters is the context (or scope) where ruby will allocate/deallocate memory and his access.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1437001401, "creation_date": 1437001401, "answer_id": 31442710, "question_id": 31441319, "link": "https://stackoverflow.com/questions/31441319/running-eval-without-creating-a-block-scope/31442710#31442710", "title": "Running eval without creating a block scope", "body": "<blockquote>\n  <p>Why is <code>a</code> not defined?</p>\n</blockquote>\n\n<p><code>a</code> <em>is</em> defined within the binding of the eval'd code, but not outside of it. That's just how local variables work. They are local to the scope they are defined in. That's why they are called \"local\" variables, after all.</p>\n\n<blockquote>\n  <p>If I declare <code>a</code> prior to evalling, the value 42 is assigned to <code>a</code>.</p>\n</blockquote>\n\n<p>Yes, <code>eval</code>'s scope nests, just like block scope.</p>\n\n<blockquote>\n  <p>How do I eval code without creating a new scope?</p>\n</blockquote>\n\n<p>You can't. In Ruby 1.8 and prior, <code>eval</code> would indeed leak variables into the surrounding scope, but that leak was fixed in 1.9 and onwards.</p>\n"}], "owner": {"reputation": 5186, "user_id": 1690765, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/59237bb43f984f251e904bd4904e4156?s=128&d=identicon&r=PG", "display_name": "Niels B.", "link": "https://stackoverflow.com/users/1690765/niels-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1437001401, "creation_date": 1436995132, "question_id": 31441319, "link": "https://stackoverflow.com/questions/31441319/running-eval-without-creating-a-block-scope", "title": "Running eval without creating a block scope", "body": "<p>I am trying to understanding eval and binding contexts in Ruby.</p>\n\n<p>Consinder the following in irb</p>\n\n<pre><code>irb(main):001:0&gt; eval \"a = 42\"\n=&gt; 42\nirb(main):002:0&gt; a\nNameError: undefined local variable or method `a' for main:Object\nfrom (irb):2\nfrom /Users/niels/.rbenv/versions/2.1.3/bin/irb:11:in `&lt;main&gt;'\nirb(main):003:0&gt; \n</code></pre>\n\n<p>Why is <code>a</code> not defined?</p>\n\n<p>If I declare <code>a</code> prior to evalling, the value 42 is assigned to <code>a</code>.</p>\n\n<p>It appears to me that some sort of block scope applies where local variables are available inside the eval context, but any variables declared are only declared in the block scope.</p>\n\n<p>How do I eval code without creating a new scope?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1437026486, "post_id": 31441165, "comment_id": 50861350, "body": "Can you post your <code>associations</code> and rest of the <code>form</code> code?"}], "answers": [{"tags": [], "owner": {"reputation": 397, "user_id": 3462069, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/4ae9d4e99d92986f0f250274e70caac1?s=128&d=identicon&r=PG&f=1", "display_name": "beaconhill", "link": "https://stackoverflow.com/users/3462069/beaconhill"}, "is_accepted": false, "score": 0, "last_activity_date": 1437055307, "creation_date": 1437055307, "answer_id": 31456440, "question_id": 31441165, "link": "https://stackoverflow.com/questions/31441165/rails-builder-collection-select-with-join-table-not-saving-the-join/31456440#31456440", "title": "Rails builder.collection_select with join table not saving the join", "body": "<p>I needed to add this to my <strong>project.rb</strong>: </p>\n\n<p><code>accepts_nested_attributes_for :productline</code></p>\n\n<p>And then this in <strong>projects_controller.rb</strong>:</p>\n\n<pre><code>def project_params\n      params.require(:project).permit(:name, :image, :stage, :slug, :description, :content_id)\n    end\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 3462069, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/4ae9d4e99d92986f0f250274e70caac1?s=128&d=identicon&r=PG&f=1", "display_name": "beaconhill", "link": "https://stackoverflow.com/users/3462069/beaconhill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437055307, "creation_date": 1436994597, "question_id": 31441165, "link": "https://stackoverflow.com/questions/31441165/rails-builder-collection-select-with-join-table-not-saving-the-join", "title": "Rails builder.collection_select with join table not saving the join", "body": "<p>I have a Contents model that belongs_to a Projects model. Currently when a user goes to add a new Content, they must select the project it belongs to in the form: </p>\n\n<p><strong>_form.html.erb</strong>:</p>\n\n<pre><code>&lt;%= f.fields_for :project do |builder| %&gt;\n      &lt;%= builder.collection_select(:project_id, Project.all, :id, :name, prompt: \"Associate...\") %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>This is correctly populating the dropdown. But if a user selects a Project and hits save, it does not get saved/associated to the Content. </p>\n\n<p>Here's my <strong>contents_controller.rb</strong>:</p>\n\n<pre><code>class ContentsController &lt; ApplicationController\n  before_action :set_content, only: [:show, :edit, :update, :destroy]\n\n  # GET /contents\n  # GET /contents.json\n  def index\n    @contents = Content.all.order('created_at DESC')\n  end\n\n  # GET /contents/1\n  # GET /contents/1.json\n  def show\n  end\n\n  # GET /contents/new\n  def new\n    @content = Content.new\n  end\n\n  # GET /contents/1/edit\n  def edit\n  end\n\n  # POST /contents\n  # POST /contents.json\n  def create\n    @content = Content.new(content_params)\n    if @content.save \n      redirect_to @content, notice: 'Content created'\n    else\n      render action: 'new'\n    end\n  end\n\n  # PATCH/PUT /contents/1\n  # PATCH/PUT /contents/1.json\n  def update\n    if @content.update(content_params)\n      redirect_to @content, notice: 'Content updated'\n    else\n      render action: 'edit'\n    end\n  end\n\n  # DELETE /contents/1\n  # DELETE /contents/1.json\n  def destroy\n    @content.destroy\n    redirect_to contents_url\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_content\n      @content = Content.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def content_params\n      params.require(:content).permit(:name, :category, :function, :status, :url, :description, projects_attributes: [ :id, :name ])\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "nomethoderror"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1436994695, "post_id": 31441086, "comment_id": 50851669, "body": "Looks like your loading code <code>@str = ProfileData.load[&#39;g_str&#39;]</code> is returning an array rather than in individual value so it can&#39;t be used in a <code>&lt;</code> comparison."}, {"owner": {"reputation": 7694, "user_id": 166137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc4b76f5af496aeb0d1ea79ba966befa?s=128&d=identicon&r=PG&f=1", "display_name": "S M", "link": "https://stackoverflow.com/users/166137/s-m"}, "edited": false, "score": 0, "creation_date": 1436994853, "post_id": 31441086, "comment_id": 50851761, "body": "Where you wrote <code>if @def &lt; @dmin</code>, did you mean <code>if @ddef\u2026</code>? Because you named the variable <code>@ddef</code>."}, {"owner": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "reply_to_user": {"reputation": 7694, "user_id": 166137, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc4b76f5af496aeb0d1ea79ba966befa?s=128&d=identicon&r=PG&f=1", "display_name": "S M", "link": "https://stackoverflow.com/users/166137/s-m"}, "edited": false, "score": 0, "creation_date": 1437001320, "post_id": 31441086, "comment_id": 50854387, "body": "@SebastianMotraghi - thanks for catching that. That was accidentally left over from trying to fix the problem previously. I forgot to remove the extra d."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437002305, "post_id": 31441192, "comment_id": 50854717, "body": "That&#39;s good to at least understand what the error means - thank you! I added a quick option in the beginning menu to pull the values of the above mentioned - they all load, and are all numbers."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437026060, "post_id": 31441192, "comment_id": 50861191, "body": "@ChristopherHarlan you can use <code>is_a?(Comparable)</code> to check the general type of each of aformentioned"}, {"owner": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437069809, "post_id": 31441192, "comment_id": 50889413, "body": "Hey Andrey - thanks for the response. Sadly, I have no idea how to do what you&#39;re suggesting. Where should I put &#39;.is_a?()&#39; after, and what should I be looking for?"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1436994707, "creation_date": 1436994707, "answer_id": 31441192, "question_id": 31441086, "link": "https://stackoverflow.com/questions/31441086/ruby-undefined-method/31441192#31441192", "title": "Ruby: Undefined Method `&lt;&#39;", "body": "<p>It means your variables (at leas one per compared pair) is of <code>Array</code> type.</p>\n\n<p>Check what each of these</p>\n\n<pre><code>@str = ProfileData.load['g_str']\n@ddef = ProfileData.load['g_def']\n@agi = ProfileData.load['g_agi']\n@man = ProfileData.load['g_man']\n</code></pre>\n\n<p>returns and make sure it is <a href=\"http://ruby-doc.org/core-2.2.2/Comparable.html\" rel=\"nofollow\">Comparable</a> (integers, for example).</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437002062, "post_id": 31441641, "comment_id": 50854641, "body": "I tried your suggestion (adding the .first.to_i) and it works to a degree - the first time around. For some reason, it takes all the values (for example, [&#39;str&#39;] is set to 14) and sets them to zero - unsure how. Then the next time I update the stats, I end up with:    &#39;start.rb:725:in <code>compile&#39;: undefined method </code>first&#39; for 15:Fixnum (NoMethodError)&#39;"}, {"owner": {"reputation": 322, "user_id": 4245281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0d133ef5e1e96233def1dba451f953?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Ivan", "link": "https://stackoverflow.com/users/4245281/pedro-ivan"}, "reply_to_user": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437007318, "post_id": 31441641, "comment_id": 50856103, "body": "The first time you got something like an empty string.  Than, the second time you got already a number.  Did you checked the file after and before saving? Something has changed?"}, {"owner": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437007696, "post_id": 31441641, "comment_id": 50856182, "body": "Nothing has changed - the only part changing is the value of &#39;g_str&#39;, as it&#39;s based from a random number. By looking at the file that hosts &#39;g_str&#39; (through YAML, in the same directory), the number is already there. The number has always been there but the above method can&#39;t seem to find it and/or tell that it&#39;s a number."}, {"owner": {"reputation": 322, "user_id": 4245281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0d133ef5e1e96233def1dba451f953?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Ivan", "link": "https://stackoverflow.com/users/4245281/pedro-ivan"}, "reply_to_user": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437008664, "post_id": 31441641, "comment_id": 50856394, "body": "You said in other comment that they are always numbers, in this case .first doesn&#39;t makes sense, even .to_i.  Now, why you got an array the first time, than numbers the second time its very weird.  Maybe is the way you are saving.  Try file = File.open(...) file.write d.to_yaml file.close()"}, {"owner": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437013260, "post_id": 31441641, "comment_id": 50857637, "body": "When I comment &#39;.first.to_i&#39; and all the &lt; lines, everything works fine - the numbers even show up. But when I try to make sure nothing gets below 0 (at times, depending on luck and choices made in character creation, I&#39;ve had the stats in the negatives), then I start to get the errors. The way it&#39;s saved tot he file works fine."}, {"owner": {"reputation": 322, "user_id": 4245281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0d133ef5e1e96233def1dba451f953?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Ivan", "link": "https://stackoverflow.com/users/4245281/pedro-ivan"}, "reply_to_user": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437050946, "post_id": 31441641, "comment_id": 50876310, "body": "I cannot figure out why.  At each iteration get the class of each one. puts @str.class"}, {"owner": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437070308, "post_id": 31441641, "comment_id": 50889698, "body": "I tried what you advised, and did <code>puts &quot;This is str: #{@str}&quot;</code> right after the initial loading from ProfileData.load[&#39;g_str&#39;]. The answer came up as: <code>This is str: []</code>."}, {"owner": {"reputation": 322, "user_id": 4245281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0d133ef5e1e96233def1dba451f953?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Ivan", "link": "https://stackoverflow.com/users/4245281/pedro-ivan"}, "reply_to_user": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "edited": false, "score": 0, "creation_date": 1437101233, "post_id": 31441641, "comment_id": 50901254, "body": "Now we know, the load method isn&#39;t right, its returning and empty array.  Are you sure the file has some value in the first iteration?  May be that.  I would like to suggest to you use json instead. hero = {} hero[:g_str] = random number hero[:g_des] = another random number ... file = File.new &quot;yourfilename.txt&quot;, &quot;w&quot; (w for writing) file &lt;&lt; hero.to_json and load the as json"}], "tags": [], "owner": {"reputation": 322, "user_id": 4245281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0d133ef5e1e96233def1dba451f953?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Ivan", "link": "https://stackoverflow.com/users/4245281/pedro-ivan"}, "is_accepted": false, "score": 1, "last_activity_date": 1436996434, "creation_date": 1436996434, "answer_id": 31441641, "question_id": 31441086, "link": "https://stackoverflow.com/questions/31441086/ruby-undefined-method/31441641#31441641", "title": "Ruby: Undefined Method `&lt;&#39;", "body": "<p>The load method seems to assume that would be a collection of variables, even you having just one.</p>\n\n<p>If you grant to be always one, select just the first and as it may be a string you should make it a int.</p>\n\n<pre><code>@str = ProfileData.load['g_str'].first.to_i\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5121159, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KGk-qhf0k6A/AAAAAAAAAAI/AAAAAAAAENY/fBdRYVYT7Iw/photo.jpg?sz=128", "display_name": "Christopher Harlan", "link": "https://stackoverflow.com/users/5121159/christopher-harlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1437001246, "creation_date": 1436994341, "last_edit_date": 1437001246, "question_id": 31441086, "link": "https://stackoverflow.com/questions/31441086/ruby-undefined-method", "title": "Ruby: Undefined Method `&lt;&#39;", "body": "<p>As a way to learn the ins and outs of ruby, I decided to make a (relatively simple) text-based RPG. Everything so far has gone well, except recently I've hit a roadblock that I haven't seen before. </p>\n\n<p><em>My goal is: if any stat (str, def, agi, man) is &lt; 0, I want to make it = 0. For some reason though, ruby doesn't seem to like the `&lt;'.</em></p>\n\n<p><strong>Here's the code ruby hangs up on:</strong></p>\n\n<pre><code>def self.compile\n@str = ProfileData.load['g_str']\n@def = ProfileData.load['g_def']\n@agi = ProfileData.load['g_agi']\n@man = ProfileData.load['g_man']\n@smin = 1\n@dmin = 1\n@amin = 1\n@mmin = 1\nif @str &lt; @smin\n  @str = 0\nend\nif @def &lt; @dmin\n  @def = 0\nend\nif @agi &lt; @amin\n  @agi = 0\nend\nif @man &lt; @mmin\n  @man = 0\nend\n@str.round!\n@def.round!\n@agi.round!\n@man.round!\nd = YAML::load_file('./profile')\nd['mstr'] = @str\nFile.open('./profile', 'w') {|f| f.write d.to_yaml}\nd = YAML::load_file('./profile')\nd['mdef'] = @def\nFile.open('./profile', 'w') {|f| f.write d.to_yaml}\nd = YAML::load_file('./profile')\nd['magi'] = @agi\nFile.open('./profile', 'w') {|f| f.write d.to_yaml}\nd = YAML::load_file('./profile')\nd['mman'] = @man\nFile.open('./profile', 'w') {|f| f.write d.to_yaml}\n</code></pre>\n\n<p>end</p>\n\n<p><strong>Now when I run through my program, I get this error code when it finally runs \"compile\":</strong></p>\n\n<pre><code>start.rb:734:in `compile': undefined method `&lt;' for []:Array (NoMethodError)\n</code></pre>\n\n<p>And that's it. Have any clue what's happened or how I can fix it? Any help is very much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "hash", "ruby-mocha"], "answers": [{"tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": true, "score": 0, "last_activity_date": 1437035119, "last_edit_date": 1437035119, "creation_date": 1436998627, "answer_id": 31442165, "question_id": 31440902, "link": "https://stackoverflow.com/questions/31440902/how-does-ruby-mocha-stub-a-nested-hash/31442165#31442165", "title": "How does Ruby Mocha stub a nested hash?", "body": "<p>What about a <code>hash</code>/<code>OpenStruct</code>?</p>\n\n<pre><code>require 'ostruct'\n\nproduct.expects(:containers).\n        returns('container_A' =&gt; OpenStruct.new(:elements =&gt; {'element_b' =&gt; 'expected_value'}))\n\nputs product.containers['container_A'].elements['element_b']\n# =&gt; expected_value\n</code></pre>\n"}], "owner": {"reputation": 132, "user_id": 2909632, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/414ccffc804b5b1ba76d36eb8865d3d1?s=128&d=identicon&r=PG", "display_name": "Cloud_cal", "link": "https://stackoverflow.com/users/2909632/cloud-cal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 31442165, "answer_count": 1, "score": 0, "last_activity_date": 1610403751, "creation_date": 1436993734, "last_edit_date": 1610403751, "question_id": 31440902, "link": "https://stackoverflow.com/questions/31440902/how-does-ruby-mocha-stub-a-nested-hash", "title": "How does Ruby Mocha stub a nested hash?", "body": "<p>I have a method here that needs to be mocked using Mocha, but currently i have no clue how to mock the nested hash here. </p>\n\n<p><code>Products.new(:A => \"aa\", :B => \"bb\").containers['container_A'].elements['element_b']</code></p>\n\n<p>So far, i know how to stub <code>Products.new(:A => \"aa\", :B => \"bb\")</code>, but have no idea with the hash part after it.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 393, "user_id": 1763639, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/pJH8i.jpg?s=128&g=1", "display_name": "adavia", "link": "https://stackoverflow.com/users/1763639/adavia"}, "is_accepted": true, "score": 0, "last_activity_date": 1437007093, "creation_date": 1437007093, "answer_id": 31443551, "question_id": 31440829, "link": "https://stackoverflow.com/questions/31440829/uninitialized-constant-likelikeable-error-with-polymorphic-association-rails/31443551#31443551", "title": "uninitialized constant Like::Likeable error with polymorphic association rails", "body": "<p>The problem was in the validation of the Like model</p>\n\n<p>This line </p>\n\n<pre><code>validates :likeable, presence: true, uniqueness: { scope: :likeable_id }\n</code></pre>\n\n<p>should be just</p>\n\n<pre><code>validates :likeable, presence: true\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 1763639, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/pJH8i.jpg?s=128&g=1", "display_name": "adavia", "link": "https://stackoverflow.com/users/1763639/adavia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 31443551, "answer_count": 1, "score": -1, "last_activity_date": 1437007093, "creation_date": 1436993472, "question_id": 31440829, "link": "https://stackoverflow.com/questions/31440829/uninitialized-constant-likelikeable-error-with-polymorphic-association-rails", "title": "uninitialized constant Like::Likeable error with polymorphic association rails", "body": "<p>I am getting this error when trying to create an instance of a polymorphic association in my app. The idea is that i can add likes to Microposts and Images model. For some reason i keep getting this error\nNameError in LikesController#create\nuninitialized constant Like::Likeable</p>\n\n<h1>Models</h1>\n\n<pre><code> class Like &lt; ActiveRecord::Base\n\n   belongs_to :user\n   belongs_to :likeable, polymorphic: true\n\n   validates :likeable, presence: true, uniqueness: { scope: :likeable_id }\n   validates :user, presence: true, uniqueness: { :scope =&gt; [:likeable_id, :likeable_type] }\n end\n\n class User &lt; ActiveRecord::Base\n   has_many :likes, dependent: :destroy\n end\n\n class Micropost &lt; ActiveRecord::Base\n   has_many :likes, as: :likeable, dependent: :destroy\n end\n</code></pre>\n\n<h1>Controller</h1>\n\n<pre><code>class LikesController &lt; ApplicationController\n\n  before_filter :find_likeable\n  before_action :logged_in_user\n\n  # Like a model\n  def create\n    @user = current_user\n    @like = @user.likes.build(likeable: @likeable)\n    @like.save\n\n    respond_to do |format|\n      format.html { redirect_to root_url }\n      format.js\n    end\n  end\n\n  # Dislike a model\n  def destroy\n    @user = current_user\n    @like = @user.likes.find_by_likeable_id(params[:likeable_id])\n    @like.destroy\n\n    respond_to do |format|\n      format.html { redirect_to root_url }\n      format.js\n    end\n  end\n\n  private\n    def find_likeable  \n      resource, id = request.path.split(\"/\")[1,2]\n      @likeable = resource.singularize.classify.constantize.find(id)\n    end\nend\n</code></pre>\n\n<h1>Routes</h1>\n\n<pre><code>resources :microposts, only: [:create, :destroy] do\n  resources :comments, only: [:create, :destroy]\n  resources :likes, only: [:create, :destroy]\nend\n</code></pre>\n\n<h1>Partial _button_like.html.erb</h1>\n\n<pre><code>&lt;% if current_user.like?(likeable) %&gt;\n&lt;%= button_to \"#\", remote: true, method: :delete, \n    class: \"btn btn-xs btn-white\" do %&gt;\n    &lt;i class=\"fa fa-thumbs-up\"&gt;&lt;/i&gt; Liked this &lt;%=  likeable.likes.count %&gt;\n&lt;% end %&gt;\n&lt;% else %&gt;\n&lt;%= button_to polymorphic_path([likeable, @like]), remote: true,\n    class: \"btn btn-xs btn-white\" do %&gt;\n    &lt;i class=\"fa fa-thumbs-up\"&gt;&lt;/i&gt; Like &lt;%= likeable.likes.count %&gt;\n&lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<h1>create.js.erb</h1>\n\n<pre><code>$(\"div#like-container-&lt;%= @likeable.id %&gt;\").html(\"&lt;%= j render partial: 'button_like', locals: { :likeable =&gt; @likeable } %&gt;\");\n</code></pre>\n\n<h1>destroy.js.erb</h1>\n\n<pre><code>$(\"div#like-container-&lt;%= @likeable.id %&gt;\").html(\"&lt;%= j render partial: 'button_like', locals: { likeable: @likeable } %&gt;\");\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "type-conversion"], "answers": [{"comments": [{"owner": {"reputation": 3481, "user_id": 759466, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/68PHH.png?s=128&g=1", "display_name": "captainrad", "link": "https://stackoverflow.com/users/759466/captainrad"}, "edited": false, "score": 0, "creation_date": 1436993827, "post_id": 31440899, "comment_id": 50851221, "body": "Wow.. that was simple.. other than that am I approaching this the wrong way?"}], "tags": [], "owner": {"reputation": 349, "user_id": 1269551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f93b1b091d20f20c3bf473e12a0307f4?s=128&d=identicon&r=PG", "display_name": "iceraj", "link": "https://stackoverflow.com/users/1269551/iceraj"}, "is_accepted": true, "score": 1, "last_activity_date": 1436993732, "creation_date": 1436993732, "answer_id": 31440899, "question_id": 31440812, "link": "https://stackoverflow.com/questions/31440812/rails-hash-typeerror/31440899#31440899", "title": "Rails hash TypeError", "body": "<p>You want to iterate over values of that map, I think.</p>\n\n<p><code>@example_set.values.each</code></p>\n"}], "owner": {"reputation": 3481, "user_id": 759466, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/68PHH.png?s=128&g=1", "display_name": "captainrad", "link": "https://stackoverflow.com/users/759466/captainrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 1, "accepted_answer_id": 31440899, "answer_count": 1, "score": 0, "last_activity_date": 1436994330, "creation_date": 1436993431, "question_id": 31440812, "link": "https://stackoverflow.com/questions/31440812/rails-hash-typeerror", "title": "Rails hash TypeError", "body": "<p>I have the following hash, <code>@example_set</code> that I want to get and store data from.</p>\n\n<pre><code>{\"Example1\"=&gt;{:campaign=&gt;\"Example1\", :impressions=&gt;12, :conversions=&gt;1, :clicks=&gt;14, \n\"Example2\"=&gt;{:campaign=&gt;\"Example2\", :impressions=&gt;4042, :conversions=&gt;2, :clicks=&gt;11}}\n</code></pre>\n\n<p>I want to do the following to combine the total conversions but am running into a <code>TypeError: no implicit conversion of Symbol into Integer</code>.</p>\n\n<pre><code>@totals = 0\n@example_set.each do |report|\n   @totals += report[:conversions]\nend\n</code></pre>\n\n<p>Ideally this would set <code>@totals</code> to <code>3</code></p>\n\n<p>I am new to rails so any additional detail and instruction would be much appreciated (especially if there is a better way to do this.. which I assume there is)</p>\n"}, {"tags": ["ruby", "string", "each"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1436993347, "creation_date": 1436993347, "answer_id": 31440778, "question_id": 31440743, "link": "https://stackoverflow.com/questions/31440743/can-ljust-be-used-within-an-each-block/31440778#31440778", "title": "Can ljust be used within an each block?", "body": "<p>If you want to rewrite these, you need to use <code>map</code>:</p>\n\n<pre><code>[\"test\", \"test\", \"test\"].map { |i| i.ljust(5) }\n</code></pre>\n\n<p>The <code>each</code> method iterates and <em>ignores the result</em>, returning the original list, whereas <code>map</code> returns the transformed results.</p>\n\n<p>Note you can do formatting like this with things like:</p>\n\n<pre><code>'%-5s' % [ item ]\n</code></pre>\n\n<p>That largely avoids the need to mangle your data just for presentation purposes.</p>\n"}, {"tags": [], "owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "is_accepted": false, "score": 1, "last_activity_date": 1436993373, "creation_date": 1436993373, "answer_id": 31440787, "question_id": 31440743, "link": "https://stackoverflow.com/questions/31440743/can-ljust-be-used-within-an-each-block/31440787#31440787", "title": "Can ljust be used within an each block?", "body": "<p>The return of each is the original array. I think what you are looking for is:</p>\n\n<pre><code>[\"test\", \"test\", \"test\"].map { |i| i.ljust(5) }\n</code></pre>\n"}], "owner": {"reputation": 243, "user_id": 2901181, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5f5197597a513f438cff1456c135f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user2901181", "link": "https://stackoverflow.com/users/2901181/user2901181"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 31440778, "answer_count": 2, "score": 1, "last_activity_date": 1436993373, "creation_date": 1436993224, "question_id": 31440743, "link": "https://stackoverflow.com/questions/31440743/can-ljust-be-used-within-an-each-block", "title": "Can ljust be used within an each block?", "body": "<pre><code>\"test\".ljust(5)\n=&gt; \"test \"\n\n[\"test\", \"test\", \"test\"].each { |i| i.ljust(5) }\n=&gt; [\"test\", \"test\", \"test\"]\n</code></pre>\n\n<p><code>ljust</code> doesn't seem to be working when used within an <code>each</code> block. Why in the world isn't this working as expected? Am I missing something? If so, what makes this kind of method behave in such a way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "heroku", "database-migration"], "answers": [{"tags": [], "owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "is_accepted": true, "score": 2, "last_activity_date": 1436991951, "creation_date": 1436991951, "answer_id": 31440348, "question_id": 31440104, "link": "https://stackoverflow.com/questions/31440104/ruby-on-rails-heroku-db-pointing/31440348#31440348", "title": "Ruby On Rails Heroku DB Pointing", "body": "<p>From the Heroku <a href=\"https://devcenter.heroku.com/articles/heroku-postgresql\" rel=\"nofollow\">docs</a>:</p>\n\n<p><strong>Establish primary DB</strong></p>\n\n<p>Heroku recommends using the DATABASE_URL config var to store the location of your primary database. In single-database setups your new database will have already been assigned a HEROKU_POSTGRESQL_COLOR_URL config with the accompanying DATABASE_URL. You may verify this via heroku config and verifying the value of both HEROKU_POSTGRESQL_COLOR_URL and DATABASE_URL which should match.</p>\n\n<p>On apps with multiple databases, you can set the primary database like so:</p>\n\n<pre><code>heroku pg:promote HEROKU_POSTGRESQL_RED\nPromoting HEROKU_POSTGRESQL_RED_URL to DATABASE_URL... done\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 4867541, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/588d0960c1facfe0b330ffc8a286ffb4?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Carter", "link": "https://stackoverflow.com/users/4867541/josh-carter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 31440348, "answer_count": 1, "score": 0, "last_activity_date": 1436991951, "creation_date": 1436991081, "question_id": 31440104, "link": "https://stackoverflow.com/questions/31440104/ruby-on-rails-heroku-db-pointing", "title": "Ruby On Rails Heroku DB Pointing", "body": "<p>I am working on a ruby on rails project that is deployed on heroku. Very quickly I had a table in my database fill past the allowed 10,000 rows and had to upgrade to the paid version. I set up my new database and migrated all the rows from the old one by following the heroku step by step guide. The problem I'm having now is that my rails project is still pointing to the old table and not the upgraded one. How do I choose which one to point to?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "validation", "locale"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1436989319, "post_id": 31439415, "comment_id": 50848615, "body": "How is the switch accomplished? JavaScript? Changing the browser setting? A form submit?"}, {"owner": {"reputation": 31, "user_id": 2890974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1665f307c50947bd80a44f7546ef0ef?s=128&d=identicon&r=PG&f=1", "display_name": "starzmasta", "link": "https://stackoverflow.com/users/2890974/starzmasta"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1436989617, "post_id": 31439415, "comment_id": 50848763, "body": "It doesn&#39;t really matter, the I18n.locale is updated as I can see other label changes on the page. But to answer your question, switching via browser setting and page reload or a drop down that post to page that changes the locale."}, {"owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "edited": false, "score": 0, "creation_date": 1445513483, "post_id": 31439415, "comment_id": 54360297, "body": "can you show us your locale files ?"}], "owner": {"reputation": 31, "user_id": 2890974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1665f307c50947bd80a44f7546ef0ef?s=128&d=identicon&r=PG&f=1", "display_name": "starzmasta", "link": "https://stackoverflow.com/users/2890974/starzmasta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1436989817, "creation_date": 1436988634, "last_edit_date": 1436989817, "question_id": 31439415, "link": "https://stackoverflow.com/questions/31439415/validates-format-of-with-locale-specific-regex-dynamic-validation-based-on", "title": "validates_format_of :with =&gt; locale specific regex (dynamic validation based on locale)", "body": "<p>I have a common form for different locales. The form contains a phone field which needs to be validated against different format regex based on locales. Doing the following works however on locale change, the regex loaded on page is not updated. </p>\n\n<pre><code>validates_format_of :phone, :with =&gt; /#{I18n.t :'format.phone_number'}/, :message =&gt; I18n.t('message.invalid')\n</code></pre>\n\n<p>For example, if I initially loaded the page in en-US and then switch to fr_FR, the phone will be validated against en-US regex. Is it possible to have validation regex 'refreshed'? Thanks in advance</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 3547146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001773186250/picture?type=large", "display_name": "Icaro", "link": "https://stackoverflow.com/users/3547146/icaro"}, "edited": false, "score": 0, "creation_date": 1437057688, "post_id": 31439950, "comment_id": 50881721, "body": "Thank you so much, i&#39;ve been lost about that so really thank you!! =D"}], "tags": [], "owner": {"reputation": 229, "user_id": 5074398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33d9850149ff4234c50436ef9fe55427?s=128&d=identicon&r=PG", "display_name": "Diego Garcia", "link": "https://stackoverflow.com/users/5074398/diego-garcia"}, "is_accepted": true, "score": 0, "last_activity_date": 1436990549, "creation_date": 1436990549, "answer_id": 31439950, "question_id": 31439388, "link": "https://stackoverflow.com/questions/31439388/how-to-connect-my-web-rails-app-with-other-plataform-based-apps/31439950#31439950", "title": "How to connect my web rails app with other plataform based apps?", "body": "<p>You need to create a REST API to connect your mobile app with the web one.</p>\n\n<p>Here you have a link that can be helpful, but if you search in google there is a lot of information related to this.</p>\n\n<p><a href=\"https://www.airpair.com/ruby-on-rails/posts/building-a-restful-api-in-a-rails-application\" rel=\"nofollow\">https://www.airpair.com/ruby-on-rails/posts/building-a-restful-api-in-a-rails-application</a></p>\n"}], "owner": {"reputation": 107, "user_id": 3547146, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001773186250/picture?type=large", "display_name": "Icaro", "link": "https://stackoverflow.com/users/3547146/icaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 31439950, "answer_count": 1, "score": 0, "last_activity_date": 1436990549, "creation_date": 1436988539, "question_id": 31439388, "link": "https://stackoverflow.com/questions/31439388/how-to-connect-my-web-rails-app-with-other-plataform-based-apps", "title": "How to connect my web rails app with other plataform based apps?", "body": "<p>i think my title is a little confusing but, what i'm thinking to do is:</p>\n\n<p>I have my RoR website hosted on a ubuntu server with the postgres sql. I'm thinkin in a way to port the function of my website to a mobile app for example.</p>\n\n<p>EX: i have a online chat website, so i want to create a native iOS app that can use the same functions and same database from my website in rails.</p>\n\n<p>What i need to study first to learn how to connect my web-app to other apps in rails?\nWhat i need to search for?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "edited": false, "score": 0, "creation_date": 1436988542, "post_id": 31439295, "comment_id": 50848182, "body": "This is looking for the hash with a <code>name</code> of <code>self.object_name</code> literally, so if you had a hash <code>{&quot;id&quot; =&gt; &#39;123&#39;, ..., &quot;name&quot; =&gt; &quot;self.object_name&quot;}</code>, it will get returned"}], "answers": [{"comments": [{"owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 0, "creation_date": 1436988743, "post_id": 31439391, "comment_id": 50848300, "body": "Within the context of <code>{}</code>, doesn&#39;t Ruby now refer to <code>self</code> as <code>t</code>? I think OP is using <code>self.object_name</code> from an external context as well."}, {"owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "reply_to_user": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 0, "creation_date": 1436989270, "post_id": 31439391, "comment_id": 50848585, "body": "@sjagr: I guess we are not on the same page. Can you elaborate?"}, {"owner": {"reputation": 1267, "user_id": 3877058, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001362273089/picture?type=large", "display_name": "SupremeA", "link": "https://stackoverflow.com/users/3877058/supremea"}, "edited": false, "score": 1, "creation_date": 1436989962, "post_id": 31439391, "comment_id": 50848932, "body": "That got it! but the real problem turned out to be that I had the method as a private method and was calling it in another model. Thanks though for the thorough answer!"}], "tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 2, "last_activity_date": 1436988792, "last_edit_date": 1436988792, "creation_date": 1436988550, "answer_id": 31439391, "question_id": 31439295, "link": "https://stackoverflow.com/questions/31439295/why-is-this-find-all-method-not-working-rails/31439391#31439391", "title": "Why is this find_all method not working rails", "body": "<p>You don't need quotes <code>\"</code> at all (you literally trying to compare retrieved <code>name</code> with string <code>\"self.object_name\"</code> instead of the value of <code>self.object_name</code>):</p>\n\n<pre><code>@new_array = @old_array.find_all { |t| t.fetch('name') == self.object_name }\n</code></pre>\n\n<p>If you are a big fan, you can interpolate with <code>\"#{}\"</code>:</p>\n\n<pre><code>@new_array = @old_array.find_all { |t| t.fetch('name') == \"#{self.object_name}\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 229, "user_id": 5074398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33d9850149ff4234c50436ef9fe55427?s=128&d=identicon&r=PG", "display_name": "Diego Garcia", "link": "https://stackoverflow.com/users/5074398/diego-garcia"}, "is_accepted": false, "score": 1, "last_activity_date": 1436988665, "creation_date": 1436988665, "answer_id": 31439428, "question_id": 31439295, "link": "https://stackoverflow.com/questions/31439295/why-is-this-find-all-method-not-working-rails/31439428#31439428", "title": "Why is this find_all method not working rails", "body": "<p>Try this:</p>\n\n<pre><code>@new_array = @old_array.find_all { |t| t['name'] == self.object_name }\n</code></pre>\n"}], "owner": {"reputation": 1267, "user_id": 3877058, "user_type": "registered", "accept_rate": 96, "profile_image": "https://graph.facebook.com/100001362273089/picture?type=large", "display_name": "SupremeA", "link": "https://stackoverflow.com/users/3877058/supremea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 31439391, "answer_count": 2, "score": 0, "last_activity_date": 1436990112, "creation_date": 1436988267, "last_edit_date": 1436990112, "question_id": 31439295, "link": "https://stackoverflow.com/questions/31439295/why-is-this-find-all-method-not-working-rails", "title": "Why is this find_all method not working rails", "body": "<p>I have a method that is suppose to iterate over an array and match any items to a string I have in my model. My method looks like this</p>\n\n<pre><code>@new_array = @old_array.find_all { |t| t.fetch('name') == \"self.object_name\" }\n</code></pre>\n\n<p>This method should look thru the array of hashes I have and match any items that have the same name as object_name. When I test the name comparison to the object_name in console it shows true but when I run the full method described above it shows no objects found, however I know the array contains multiple objects with the EXACT same name. Any idea of whats wrong?</p>\n\n<p>The array looks like so...</p>\n\n<pre><code>old_array = {\"id\"=&gt;\"123\", \"account\"=&gt;\"456\", \"name\"=&gt;\"CITY\"},\n    {\"id\"=&gt;\"456\", \"account\"=&gt;\"567\", \"name\"=&gt;\"CITY DIR DEP\"},\n    {\"id\"=&gt;\"456\", \"account\"=&gt;\"567\", \"name\"=&gt;\"BUCK\"},\n    {\"id\"=&gt;\"456\", \"account\"=&gt;\"567\", \"name\"=&gt;\"CITY DIR DEP\"},\n    {\"id\"=&gt;\"456\", \"account\"=&gt;\"567\", \"name\"=&gt;\"HAPPY\"},\n    {\"id\"=&gt;\"456\", \"account\"=&gt;\"567\", \"name\"=&gt;\"CIRCLE\"}\n</code></pre>\n\n<p>and the object prints out in console as</p>\n\n<pre><code>self.object_name =&gt; \"CITY DIR DEP\"\n</code></pre>\n"}, {"tags": ["ruby", "proxy", "gem", "rubygems"], "comments": [{"owner": {"reputation": 1493, "user_id": 3079419, "user_type": "registered", "accept_rate": 42, "profile_image": "https://graph.facebook.com/100001960041285/picture?type=large", "display_name": "ant_1618", "link": "https://stackoverflow.com/users/3079419/ant-1618"}, "edited": false, "score": 0, "creation_date": 1436988442, "post_id": 31439233, "comment_id": 50848132, "body": "<a href=\"https://github.com/rubygems/rubygems/issues/360\" rel=\"nofollow noreferrer\">github.com/rubygems/rubygems/issues/360</a>   This issue was closed in 2012 with a conclusion that gems doesn&#39;t support NTLM proxy.But its 3 years ago. Has a solution been developed for this ?"}], "owner": {"reputation": 1493, "user_id": 3079419, "user_type": "registered", "accept_rate": 42, "profile_image": "https://graph.facebook.com/100001960041285/picture?type=large", "display_name": "ant_1618", "link": "https://stackoverflow.com/users/3079419/ant-1618"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1436988081, "creation_date": 1436988081, "question_id": 31439233, "link": "https://stackoverflow.com/questions/31439233/gem-install-behind-ntlm-proxy", "title": "Gem install behind NTLM proxy", "body": "<p>When I try\n<code>gem install bundler</code></p>\n\n<pre><code>ERROR:  While executing gem ... (URI::InvalidURIError)\nbad URI(is not URI?): https://username:password@202.141.80.24:3128/\n</code></pre>\n\n<p>The same happens for other installations through gems.</p>\n\n<p>There is no particular problem with the environment variables as other terminal utilities like <code>apt-get</code> that use internet through this proxy work just fine.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1751, "user_id": 1212336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4002e9409f235e93386772dbe71c1500?s=128&d=identicon&r=PG", "display_name": "adamliesko", "link": "https://stackoverflow.com/users/1212336/adamliesko"}, "edited": false, "score": 0, "creation_date": 1436988240, "post_id": 31438980, "comment_id": 50848025, "body": "what exactly (example) would be inside <code>params[:day]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1751, "user_id": 1212336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4002e9409f235e93386772dbe71c1500?s=128&d=identicon&r=PG", "display_name": "adamliesko", "link": "https://stackoverflow.com/users/1212336/adamliesko"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1436995767, "post_id": 31439234, "comment_id": 50852205, "body": "oh yea, thanks. lets wait for OP better describing the params[:day]"}, {"owner": {"reputation": 16, "user_id": 4372170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95095685c1e293397763f9a7e9e84b2e?s=128&d=identicon&r=PG", "display_name": "Paul Gonzalez", "link": "https://stackoverflow.com/users/4372170/paul-gonzalez"}, "edited": false, "score": 0, "creation_date": 1436995867, "post_id": 31439234, "comment_id": 50852248, "body": "yea it would need to match the full date, such as 2015-1-1, but just the number of the day"}], "tags": [], "owner": {"reputation": 1751, "user_id": 1212336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4002e9409f235e93386772dbe71c1500?s=128&d=identicon&r=PG", "display_name": "adamliesko", "link": "https://stackoverflow.com/users/1212336/adamliesko"}, "is_accepted": false, "score": 0, "last_activity_date": 1436988082, "creation_date": 1436988082, "answer_id": 31439234, "question_id": 31438980, "link": "https://stackoverflow.com/questions/31438980/how-to-format-a-column-before-running-a-where-search-in-rails/31439234#31439234", "title": "How to format a column before running a where search in rails", "body": "<p>Create a scope inside your model</p>\n\n<pre><code>scope :on_day, lambda { |day| where('extract(day from time_slot) = ?', day) }\n</code></pre>\n\n<p>which you can later use in your Controller <code>@movie_theater.showings.on_day('2015-1-1')</code></p>\n"}], "owner": {"reputation": 16, "user_id": 4372170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95095685c1e293397763f9a7e9e84b2e?s=128&d=identicon&r=PG", "display_name": "Paul Gonzalez", "link": "https://stackoverflow.com/users/4372170/paul-gonzalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436988082, "creation_date": 1436987222, "last_edit_date": 1436987280, "question_id": 31438980, "link": "https://stackoverflow.com/questions/31438980/how-to-format-a-column-before-running-a-where-search-in-rails", "title": "How to format a column before running a where search in rails", "body": "<p>I have a column with data type datetime. I want to search this column, using <code>:where</code> and return results based on a given day. The issue is, the :time_slot column has datetime objects, so I would need to format the column first, before running the search. Any suggestions on how I would this?</p>\n\n<pre><code>@movies = @movie_theater.showings.where({:time_slot =&gt; params[:day]})\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "pry"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1436987701, "post_id": 31438963, "comment_id": 50847724, "body": "Why would calling <code>ObjectSpace.each_object(Owner).to_a</code> change the number of <code>Owner</code> objects?"}, {"owner": {"reputation": 183, "user_id": 5042742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p-ZvHqPA9IY/AAAAAAAAAAI/AAAAAAAAAPA/Gls-yozLfUs/photo.jpg?sz=128", "display_name": "Garett Arrowood", "link": "https://stackoverflow.com/users/5042742/garett-arrowood"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1436990160, "post_id": 31438963, "comment_id": 50849034, "body": "It doesn&#39;t work.  My code is wrong. But pry makes the test pass.  Why? Hence the question...   (I reworded the question so it doesn&#39;t seem like I assumed the code was correct.)"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1436990483, "post_id": 31438963, "comment_id": 50849222, "body": "It&#39;s probably because whatever starts pry is initiating a garbage collection sweep, which is causing some leftover <code>Owner</code> instances to be destroyed. This is the weirdness of messing with <code>ObjectSpace</code>"}], "owner": {"reputation": 183, "user_id": 5042742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p-ZvHqPA9IY/AAAAAAAAAAI/AAAAAAAAAPA/Gls-yozLfUs/photo.jpg?sz=128", "display_name": "Garett Arrowood", "link": "https://stackoverflow.com/users/5042742/garett-arrowood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516066310, "creation_date": 1436987167, "last_edit_date": 1516066310, "question_id": 31438963, "link": "https://stackoverflow.com/questions/31438963/what-is-pry-doing-that-allows-this-rspec-to-pass", "title": "What is pry doing that allows this rspec to pass?", "body": "<p>When I run this code through its test suite, the self.reset_all method fails (as it should).  When I insert a binding.pry in the method, it tells me the array is empty and the test passes.</p>\n\n<pre><code>require \"pry\"\n\nclass Owner\n  attr_reader :species\n\n  def initialize(species)\n    @species = species\n  end\n\n  def self.all\n    ObjectSpace.each_object(self)\n  end\n\n  def self.reset_all\n    binding.pry\n    self.all.to_a\n  end\n\n  def self.count\n    all.count\n  end\nend\n</code></pre>\n\n<p>Here are the tests:</p>\n\n<pre><code>describe Owner do\n  let(:owner) { Owner.new(\"human\") }\n\n  describe 'Class methods' do\n    it \"keeps track of the owners that have been created\" do\n      expect(Owner.all).to include(owner)\n    end\n\n    it \"can reset the owners that have been created\" do\n      Owner.reset_all\n      expect(Owner.count).to eq(0)\n    end\n\n    it \"can count how many owners have been created\" do\n      Owner.reset_all\n      Owner.new(\"human\")\n      expect(Owner.count).to eq(1)\n    end\n  end \nend\n</code></pre>\n\n<p>I get green tests with the binding.pry, and failing without.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 1, "creation_date": 1436987051, "post_id": 31438868, "comment_id": 50847369, "body": "What if dates differ in 1 day, what do you show then,  1?"}, {"owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "reply_to_user": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 0, "creation_date": 1436987879, "post_id": 31438868, "comment_id": 50847819, "body": "Good point, then shouldn&#39;t it be two days? so in that case, shouldn&#39;t it just be +1 for all? I&#39;m wondering if this is the conventional way. Say if you&#39;re traveling for 7/15 (today) and leaving tomorrow 7/16. Would that consider, 1 day or 2 days? I guess it depends on the time you left huh? Hmmmm I guess its all subjective?"}], "answers": [{"comments": [{"owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1436988604, "post_id": 31439270, "comment_id": 50848218, "body": "I think this would work best if I had time, but its only dates that I&#39;m storing. I just tested this code, and if the start and end dates are the same, it shows &quot;less than a minute&quot;"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 0, "last_activity_date": 1436988182, "creation_date": 1436988182, "answer_id": 31439270, "question_id": 31438868, "link": "https://stackoverflow.com/questions/31438868/rails-counting-days-if-known-dates-showing-0-on-same-date-would-like-to-show-1/31439270#31439270", "title": "rails counting days if known dates, showing 0 on same date, would like to show 1", "body": "<p>Why do you don't try with <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words\" rel=\"nofollow\">distance_of_time_in_words</a></p>\n\n<p>This maybe works better for you</p>\n\n<pre><code>&lt;%= distance_of_time_in_words @go.start_date, @go.end_date %&gt;\n</code></pre>\n"}], "owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1436988182, "creation_date": 1436986864, "question_id": 31438868, "link": "https://stackoverflow.com/questions/31438868/rails-counting-days-if-known-dates-showing-0-on-same-date-would-like-to-show-1", "title": "rails counting days if known dates, showing 0 on same date, would like to show 1", "body": "<p>I can do this:</p>\n\n<pre><code>&lt;%= (@go.end_date - @go.start_date).to_i %&gt;\n</code></pre>\n\n<p>This will give me the number of dates, but granted, if it is the same date, it will output 0. I would like to output 1 instead. How do I make this show 1 instead of 0 for same dates?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 13734, "user_id": 938694, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/b6678a430a805dd78366d6e135b49f2d?s=128&d=identicon&r=PG", "display_name": "Cubic", "link": "https://stackoverflow.com/users/938694/cubic"}, "edited": false, "score": 0, "creation_date": 1436986202, "post_id": 31438556, "comment_id": 50846876, "body": "That depends on what your n is. It does (end-start )/step writes, although it probably only does one allocation for the array"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436991346, "post_id": 31438556, "comment_id": 50849732, "body": "Don&#39;t try to convert ranges to arrays; It&#39;s very easy to create one that exceeds memory and/or will take Ruby to a crawl. Instead, iterate over the range."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436998532, "post_id": 31438556, "comment_id": 50853385, "body": "@theTinMan A 1000 element array is insignificantly tiny on a normal computer. I definitely wouldn&#39;t recommend converting ranges to arrays in general, but there&#39;s no harm to doing it as long as you understand what&#39;s happening."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436999909, "post_id": 31438556, "comment_id": 50853907, "body": "Yes, understanding the issues is the important thing. We have questions on SO from people who didn&#39;t know and killed their programs by trying to convert a range to millions of array elements. Most of the time iterating over the range will allow us to do the same thing as iterating over an array without the scalability issue."}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1436995378, "post_id": 31441333, "comment_id": 50852016, "body": "Right. <code>Range</code> gets <code>to_a</code> from <code>Enumerable</code> and <code>Enumerable#to_a</code> does it the easy way. There is no optimized <code>to_a</code> in <code>Range</code> unlike the <code>Array</code>-specific implementations of a lot of <code>Enumerable</code> methods that <code>Array</code> has."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1437002274, "post_id": 31441333, "comment_id": 50854706, "body": "The <code>Range</code> protocol is really simple: the only thing required from the endpoints is that they must respond to <code>&lt;=&gt;</code> and the left endpoint must respond to <code>succ</code>. That&#39;s it. That&#39;s all the <code>Range</code> knows about its two endpoints. There&#39;s really not much it can do than repeatedly call <code>succ</code> to enumerate all elements and push them into an <code>Array</code>. It simply doesn&#39;t know enough about its endpoints to do anything else. And that is by design: by adding more requirements you limit the choice of objects usable as range endpoints, and thus limit the genericity  and thus applicability of <code>Range</code>s."}], "tags": [], "owner": {"reputation": 1409, "user_id": 1747583, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IRY75.png?s=128&g=1", "display_name": "histocrat", "link": "https://stackoverflow.com/users/1747583/histocrat"}, "is_accepted": true, "score": 3, "last_activity_date": 1436995164, "creation_date": 1436995164, "answer_id": 31441333, "question_id": 31438556, "link": "https://stackoverflow.com/questions/31438556/how-fast-is-rubys-method-for-converting-a-range-to-an-array/31441333#31441333", "title": "How fast is Ruby&#39;s method for converting a range to an array?", "body": "<p><a href=\"https://github.com/ruby/ruby/blob/trunk/enum.c#L542-L550\" rel=\"nofollow\">The method</a> is actually slightly worse than O(n). Not only does it do a naive iteration, but it doesn't check ahead of time what the size will be, so it has to repeatedly allocate more memory as it iterates. <a href=\"https://github.com/ruby/ruby/pull/444\" rel=\"nofollow\">I've opened an issue for that aspect</a> and it's been discussed a few times on the mailing list (and briefly added to ruby-core). The problem is that, like almost anything in Ruby, Range can be opened up and messed with, so Ruby can't really optimize the method. It can't even count on <code>Range#size</code> returning the correct result. Worse, some enumerables even have their <code>size</code> method delegate to <code>to_a</code>.</p>\n\n<p>In general, it shouldn't be necessary to make this conversion, but if you really need array methods, you might be able to use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-fill\" rel=\"nofollow\">Array#fill</a> instead, which lets you populate a (potentially pre-allocated) array using values derived from its indices.</p>\n"}, {"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1436998213, "creation_date": 1436998213, "answer_id": 31442062, "question_id": 31438556, "link": "https://stackoverflow.com/questions/31438556/how-fast-is-rubys-method-for-converting-a-range-to-an-array/31442062#31442062", "title": "How fast is Ruby&#39;s method for converting a range to an array?", "body": "<pre><code>Range.instance_methods(false).include? :to_a\n# false\n</code></pre>\n\n<p>Range doesn't have <code>to_a</code>, it inherits it from the <code>Enumerable</code> mix-in, so it builds the array by pushing each value on one at a time. That seems like it would be really inefficient, but I'll let the benchmark speak for itself:</p>\n\n<pre><code>require 'benchmark'\n\nsize = 100_000_000\n\nBenchmark.bmbm do |r|\n  r.report(\"range\") { (0...size).to_a }\n  r.report(\"fill\") { a = Array.new(size); a.fill { |i| i } }\n  r.report(\"array\") { Array.new(size) { |i| i } }\nend\n\n# Rehearsal -----------------------------------------\n# range   4.530000   0.180000   4.710000 (  4.716628)\n# fill    5.810000   0.150000   5.960000 (  5.966710)\n# array   7.630000   0.250000   7.880000 (  7.879940)\n# ------------------------------- total: 18.550000sec\n#\n#             user     system      total        real\n# range   4.540000   0.120000   4.660000 (  4.660249)\n# fill    5.980000   0.110000   6.090000 (  6.089962)\n# array   7.880000   0.110000   7.990000 (  7.985818)\n</code></pre>\n\n<p>Isn't that weird? It's actually the fastest by a significant margin. And manually filling an Array is somehow faster that just using the constructor.</p>\n\n<p>But as is usually the case with Ruby, don't worry too much about this. For reasonably sized ranges the performance difference will be negligible.</p>\n"}], "owner": {"reputation": 37, "user_id": 3105949, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3568c0d7752165db6093e0e3e754f8e1?s=128&d=identicon&r=PG&f=1", "display_name": "crayk", "link": "https://stackoverflow.com/users/3105949/crayk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "accepted_answer_id": 31441333, "answer_count": 2, "score": 1, "last_activity_date": 1436998213, "creation_date": 1436985830, "question_id": 31438556, "link": "https://stackoverflow.com/questions/31438556/how-fast-is-rubys-method-for-converting-a-range-to-an-array", "title": "How fast is Ruby&#39;s method for converting a range to an array?", "body": "<p><code>(1..999).to_a</code></p>\n\n<p>Is this method O(n)? I'm wondering if the conversion involves an implicit iteration so Ruby can write the values one-by-one into consecutive memory addresses.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "answers": [{"comments": [{"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1436986884, "post_id": 31438641, "comment_id": 50847285, "body": "Like a charm! Thank you so much!"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": true, "score": 1, "last_activity_date": 1436986087, "creation_date": 1436986087, "answer_id": 31438641, "question_id": 31438508, "link": "https://stackoverflow.com/questions/31438508/has-many-through-for-lineitems-rails/31438641#31438641", "title": "Has_many: :through for LineItems - Rails", "body": "<p>You can write query as</p>\n\n<pre><code>Order.joins(:listing).where('listings.user_id = ?', 3)\n</code></pre>\n"}], "owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 31438641, "answer_count": 1, "score": 0, "last_activity_date": 1436986087, "creation_date": 1436985690, "last_edit_date": 1592644375, "question_id": 31438508, "link": "https://stackoverflow.com/questions/31438508/has-many-through-for-lineitems-rails", "title": "Has_many: :through for LineItems - Rails", "body": "<p>I have four models:</p>\n<ul>\n<li>User</li>\n<li>Listing</li>\n<li>Order</li>\n<li>OrderGroup</li>\n</ul>\n<h3>User:</h3>\n<pre><code>has_many :listings\nhas_many :orders\n</code></pre>\n<h3>Listing:</h3>\n<pre><code>belongs_to :seller, class_name: &quot;User&quot;, foreign_key: :user_id\nhas_many :order_groups, through: :orders\nhas_many :orders\n</code></pre>\n<h3>Order:</h3>\n<pre><code>has_one :seller, through: :listing \nbelongs_to :listing\nbelongs_to :order_group\n</code></pre>\n<h3>OrderGroup:</h3>\n<pre><code>has_many :listings, through: :orders\nhas_many :orders\nhas_many :sellers, through: :orders\n</code></pre>\n<p>When I try to pull <code>Order.where(seller: User.find(3))</code>, I get an empty collection. However, when I do <code>Order.last.seller</code>, I get the seller's user_id.</p>\n<p><strong>How can I pull <code>Order.where(seller: User.find(3))'</code> ?</strong></p>\n"}, {"tags": ["javascript", "ruby", "selenium", "webdriver"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "edited": false, "score": 0, "creation_date": 1437051463, "post_id": 31439231, "comment_id": 50876711, "body": "I have no access to JS code, so TrackJS is out of picture. However, code, if I am not doing anything, just like driver.navigate to the page, will work?"}], "tags": [], "owner": {"reputation": 601, "user_id": 233305, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fb635eff34d3e1192b44af5a603b9182?s=128&d=identicon&r=PG", "display_name": "Todd Gardner", "link": "https://stackoverflow.com/users/233305/todd-gardner"}, "is_accepted": false, "score": 1, "last_activity_date": 1436988078, "creation_date": 1436988078, "answer_id": 31439231, "question_id": 31437731, "link": "https://stackoverflow.com/questions/31437731/validating-for-javascript-error-via-selenium-webdriver/31439231#31439231", "title": "Validating for JavaScript error via Selenium Webdriver", "body": "<p>If you attach to <code>window.onerror</code>, you can record errors that happen on the page, execute your test, and read any results. Something like this:</p>\n\n<pre><code>driver.execute_script(\"window._errors = [];\"\ndriver.execute_script(\"window.onerror = function(){window._errors.push(arguments);};\")\n//do your test...\nerrors = driver.execute_script(\"return window._errors;\")\n</code></pre>\n\n<p><a href=\"https://code.google.com/p/selenium/wiki/RubyBindings\" rel=\"nofollow\">https://code.google.com/p/selenium/wiki/RubyBindings</a></p>\n\n<p>This keeps everything isolated in your test, however you might miss errors that occur before your inject your listener. You may want to consider using a JavaScript Error Monitoring service like <a href=\"https://trackjs.com/\" rel=\"nofollow\">TrackJS</a> to always listen for errors, and then attach to the history to assert your test passes.</p>\n"}], "owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1436988078, "creation_date": 1436983119, "question_id": 31437731, "link": "https://stackoverflow.com/questions/31437731/validating-for-javascript-error-via-selenium-webdriver", "title": "Validating for JavaScript error via Selenium Webdriver", "body": "<p>Is there such ability to validate for JavaScript errors on the page via Selenium WebDriver using Ruby?</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1436982928, "post_id": 31437602, "comment_id": 50844986, "body": "It&#39;s incorrect for second test string in your Demo link."}, {"owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1436983105, "post_id": 31437602, "comment_id": 50845097, "body": "Regex is correct. It is due to multiple lines in demo. <a href=\"http://rubular.com/r/meeO45qVyj\" rel=\"nofollow noreferrer\">See here again with same regex</a>"}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1436984231, "post_id": 31437602, "comment_id": 50845781, "body": "hmm. Still the same issue."}, {"owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1436984359, "post_id": 31437602, "comment_id": 50845844, "body": "That comment no value unless you explain and demonstrate what the issue is. Take this demo <a href=\"http://rubular.com/r/meeO45qVyj\" rel=\"nofollow noreferrer\">rubular.com/r/meeO45qVyj</a> and show what is the issue."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1436989193, "post_id": 31437602, "comment_id": 50848549, "body": "As a method (as you know): <code>def some_method(str, c); str.scan &#47;(?&lt;=#{c})[^#{c}]+(?=#{c})&#47;; end</code>."}], "tags": [], "owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 5, "last_activity_date": 1436982738, "creation_date": 1436982738, "answer_id": 31437602, "question_id": 31437526, "link": "https://stackoverflow.com/questions/31437526/extract-string-between-delimiters/31437602#31437602", "title": "Extract string between delimiters", "body": "<p>You need a lookaround regex for this like this:</p>\n\n<pre><code>(?&lt;=X)[^X]+(?=X)\n</code></pre>\n\n<p><a href=\"http://rubular.com/r/MGb3MjmEsH\" rel=\"noreferrer\">RegEx Demo</a></p>\n\n<p>In Ruby you can use <a href=\"http://ruby-doc.org/core-1.9.3/String.html#method-i-scan\" rel=\"noreferrer\"><code>string.scan(regex)</code></a> to get all matches</p>\n"}, {"comments": [{"owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1436984922, "post_id": 31438060, "comment_id": 50846155, "body": "What&#39;s wrong in this? If you have delimiter as <code>XX</code> then 3rd <code>X</code> will be part of match."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1436985029, "post_id": 31438060, "comment_id": 50846220, "body": "The positive look-behind is greedy. Add any number of Xs in the first block and it will include all but the first two in the match."}, {"owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1436985148, "post_id": 31438060, "comment_id": 50846297, "body": "Don&#39;t understand that comment. In any case since this is not part of the posted question I don&#39;t want to engage in an academic debate. If there is specific question just for handling <b>multi-character delimiters</b> I can give full explanation."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1436987380, "post_id": 31438060, "comment_id": 50847541, "body": "@anubhava Here is a clearer example: <a href=\"http://rubular.com/r/11WV1hDfrA\" rel=\"nofollow noreferrer\">rubular.com/r/11WV1hDfrA</a> You could argue that the question is ambiguous, but I would argue that a substring of <i>only delimiters</i> (XXXXXX) should not contain any matches."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1436984671, "last_edit_date": 1436984671, "creation_date": 1436984113, "answer_id": 31438060, "question_id": 31437526, "link": "https://stackoverflow.com/questions/31437526/extract-string-between-delimiters/31438060#31438060", "title": "Extract string between delimiters", "body": "<p>I think that this is pretty elegant:</p>\n\n<pre><code>str.split(delim, -1)[1...-1].reject(&amp;:empty?)\n</code></pre>\n\n<p>Unlike anubhava's answer this even works with multi-character delimiters. The <code>-1</code> argument for <code>split</code> stops it from suppressing trailing null fields, which is needed since you need to know if the string ends with a delimiter or not.</p>\n\n<pre><code>class String\n  def split_delim delim\n    split(delim, -1)[1...-1].reject(&amp;:empty?)\n  end\nend\n\n\"00XXX00XX0X00X00\".split_delim \"X\"\n# [\"00\", \"0\", \"00\"]\n\n\"splitting this long string is my mission\".split_delim \"is\"\n# [\" long string \", \" my m\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1437007660, "creation_date": 1437007660, "answer_id": 31443625, "question_id": 31437526, "link": "https://stackoverflow.com/questions/31437526/extract-string-between-delimiters/31443625#31443625", "title": "Extract string between delimiters", "body": "<p>A couple of other ways:</p>\n\n<p><strong>1: Trim string and use <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-scan\" rel=\"nofollow\">String#scan</a></strong></p>\n\n<pre><code>def some_method(str, c)\n  str.gsub(/^[^#{c}]+|[^#{c}]+$/,\"\").scan /[^#{c}]+/\nend\n\nsome_method(\"00990099\", \"9\")         #=&gt; [\"00\"] \nsome_method(\"00XXX00XX0X00X00\", \"X\") #=&gt; [\"00\", \"0\", \"00\"] \nsome_method(\"0000\", \"9\")             #=&gt; [] \nsome_method(\"9999\", \"9\")             #=&gt; [] \n</code></pre>\n\n<p><strong>2: Split into groups and use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_cons\" rel=\"nofollow\">Enumerable#each_cons</a></strong></p>\n\n<pre><code>def some_method(str, c)\n  str.gsub(r) split(/(#{c}+)/)\n     .each_cons(3)\n     .with_object([]) { |(_,s,_),a| a &lt;&lt; s unless s =~ /#{c}/ } \nend\n\nsome_method(\"00990099\", \"9\")         #=&gt; [\"00\"] \nsome_method(\"00XXX00XX0X00X00\", \"X\") #=&gt; [\"00\", \"0\", \"00\"] \nsome_method(\"0000\", \"9\")             #=&gt; [] \nsome_method(\"9999\", \"9\")             #=&gt; [] \n</code></pre>\n\n<p>Note that when using <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-split\" rel=\"nofollow\">String#split</a>, <code>#{c}+</code> in the regex must be in a capture group to retain the groups of <code>c</code> by which <code>str</code> is split.</p>\n"}], "owner": {"reputation": 1601, "user_id": 2983576, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/a58baf40bff9f935232fb496aaa682f4?s=128&d=identicon&r=PG", "display_name": "MIdhun Krishna", "link": "https://stackoverflow.com/users/2983576/midhun-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1071, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1437007660, "creation_date": 1436982471, "question_id": 31437526, "link": "https://stackoverflow.com/questions/31437526/extract-string-between-delimiters", "title": "Extract string between delimiters", "body": "<p>How would one get substrings <strong>between</strong> delimiters/multiple delimiters? For example:</p>\n\n<pre><code>sample_string = \"00990099\"\nsome_method(sample_string, \"9\") \n=&gt; [\"00\"]\n\nsample_string = \"00XXX00XX0X00X00\"\nsome_method(sample_string, \"X\")\n=&gt; [\"00\", \"0\", \"00\"]\n</code></pre>\n\n<p>I tried using split, but is there an elegant solution for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "aasm"], "comments": [{"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1436985741, "post_id": 31437512, "comment_id": 50846622, "body": "I didn&#39;t get you exactly. You need to do something after the first transition. Can you please explain it more?"}, {"owner": {"reputation": 111, "user_id": 4051543, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001731591999/picture?type=large", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u0414\u0432\u043e\u0440\u044f\u0448\u0438\u043d", "link": "https://stackoverflow.com/users/4051543/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%94%d0%b2%d0%be%d1%80%d1%8f%d1%88%d0%b8%d0%bd"}, "reply_to_user": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1436986882, "post_id": 31437512, "comment_id": 50847281, "body": "I want run event2 automaticly after event1 without changing the code all over the application. But only for 1 transition, not for all"}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1436987344, "post_id": 31437512, "comment_id": 50847527, "body": "If you run another event just after some event then what is the use of the first event why not directly jump to the second event?"}, {"owner": {"reputation": 111, "user_id": 4051543, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001731591999/picture?type=large", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u0414\u0432\u043e\u0440\u044f\u0448\u0438\u043d", "link": "https://stackoverflow.com/users/4051543/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%94%d0%b2%d0%be%d1%80%d1%8f%d1%88%d0%b8%d0%bd"}, "reply_to_user": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1436987521, "post_id": 31437512, "comment_id": 50847625, "body": "event2 will run or not depending on guard"}], "answers": [{"tags": [], "owner": {"reputation": 250, "user_id": 530473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba486761a69a850cdca09e2051e53711?s=128&d=identicon&r=PG", "display_name": "rubyu2", "link": "https://stackoverflow.com/users/530473/rubyu2"}, "is_accepted": false, "score": 0, "last_activity_date": 1439908266, "last_edit_date": 1439908266, "creation_date": 1439907020, "answer_id": 32074816, "question_id": 31437512, "link": "https://stackoverflow.com/questions/31437512/how-to-set-after-callback-for-specific-transition-only-in-aasm/32074816#32074816", "title": "How to set after callback for specific transition only in aasm?", "body": "<p>I am not sure whether I got you exactly.You want run <code>event2</code> only after this transition: <code>transitions to: :state2, from: :state1, guard: proc {some func}</code>,right?</p>\n\n<pre><code>event :event1 do\n  transitions to: :state2, from: :state1, :after =&gt; Proc.new {|*args| set_process(*args) } , guard: proc {some func}\n  transitions to: :state3, from: :state1\nend \n\ndef set_process(name)\n  event2!\nend\n</code></pre>\n\n<p>Or try this.</p>\n\n<pre><code>event :event1 do\n  transitions to: :state2, from: :state1, guard: proc {some func}\n  transitions to: :state3, from: :state1\n  after do\n    event2! if self.state2?\n  end\nend    \n\nevent :event2 do\n  transitions to: :state3, from: state2, guard: proc {some func}\nend\n</code></pre>\n\n<p>This code means that, when guard returns true,it will do first transition,else it will do second one.After transition,if it's state2, it will do event2.You can find more detail at <a href=\"https://github.com/aasm/aasm\" rel=\"nofollow\">aasm</a>.</p>\n\n<blockquote>\n  <p>In the event of having multiple transitions for an event, the first\n  transition that successfully completes will stop other transitions in\n  the same event from being processed.</p>\n</blockquote>\n\n<p>You can write any code in the callback,just like rails callbacks.</p>\n"}], "owner": {"reputation": 111, "user_id": 4051543, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001731591999/picture?type=large", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u0414\u0432\u043e\u0440\u044f\u0448\u0438\u043d", "link": "https://stackoverflow.com/users/4051543/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%94%d0%b2%d0%be%d1%80%d1%8f%d1%88%d0%b8%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 536, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1439908266, "creation_date": 1436982429, "last_edit_date": 1436987477, "question_id": 31437512, "link": "https://stackoverflow.com/questions/31437512/how-to-set-after-callback-for-specific-transition-only-in-aasm", "title": "How to set after callback for specific transition only in aasm?", "body": "<p>I have 2 events:</p>\n\n<pre><code>event :event1, after: :event2! do\n  transitions to: :state2, from: :state1, guard: proc {some func}\n  transitions to: :state3, from: :state1\nend    \n\nevent :event2 do\n  transitions to: :state3, from: state2, guard: proc {some func}\nend\n</code></pre>\n\n<p>How can I set after callback for first transition only in event1? (I cann't replace second transition to other event)</p>\n\n<p>I tried </p>\n\n<pre><code>event :event1 do\n  transitions to: :state2, from: :state1, after: :event2!, guard: proc {some func}\n  transitions to: :state3, from: :state1\nend \n</code></pre>\n\n<p>But it not working</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date", "datetime", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 715, "user_id": 2464536, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/87e89a45fb2a98bcf44a43ff0f475019?s=128&d=identicon&r=PG", "display_name": "ajk4550", "link": "https://stackoverflow.com/users/2464536/ajk4550"}, "edited": false, "score": 0, "creation_date": 1436983467, "post_id": 31437457, "comment_id": 50845315, "body": "Thanks! That grouped them together just like I wanted but with one issue, the dates are out of order. One room is on the 7-13 which is first, then two rooms are on the 15th and those come second, then theres a room on the 14th that comes last, and the order is not the order they were created. I will post room model entries hoping that will help"}, {"owner": {"reputation": 715, "user_id": 2464536, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/87e89a45fb2a98bcf44a43ff0f475019?s=128&d=identicon&r=PG", "display_name": "ajk4550", "link": "https://stackoverflow.com/users/2464536/ajk4550"}, "edited": false, "score": 0, "creation_date": 1436983597, "post_id": 31437457, "comment_id": 50845402, "body": "name: &quot;Room Test&quot;, created_at: &quot;2015-07-13 20:03:08&quot;, updated_at: &quot;2015-07-13 20:03:08&quot;, event_id: 1, start_time: &quot;2015-07-13 17:30:00&quot;&gt;, #&lt;Room id: 15, name: &quot;Lunch&quot;, created_at: &quot;2015-07-15 13:43:37&quot;, updated_at: &quot;2015-07-15 13:43:37&quot;, event_id: 1, start_time: &quot;2015-07-15 11:30:00&quot;&gt;, #&lt;Room id: 16, name: &quot;Test&quot;, created_at: &quot;2015-07-15 14:08:44&quot;, updated_at: &quot;2015-07-15 14:08:44&quot;, event_id: 1, start_time: &quot;2015-07-14 10:30:00&quot;&gt;, #&lt;Room id: 17, name: &quot;Same Day Event&quot;, created_at: &quot;2015-07-15 16:42:23&quot;, updated_at: &quot;2015-07-15 16:42:23&quot;, event_id: 1, start_time: &quot;2015-07-15 14:30:00&quot;&gt;]&gt;"}, {"owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "reply_to_user": {"reputation": 715, "user_id": 2464536, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/87e89a45fb2a98bcf44a43ff0f475019?s=128&d=identicon&r=PG", "display_name": "ajk4550", "link": "https://stackoverflow.com/users/2464536/ajk4550"}, "edited": false, "score": 0, "creation_date": 1436983895, "post_id": 31437457, "comment_id": 50845589, "body": "i have updated my answer . can you try now please . hope it will work"}, {"owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "reply_to_user": {"reputation": 715, "user_id": 2464536, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/87e89a45fb2a98bcf44a43ff0f475019?s=128&d=identicon&r=PG", "display_name": "ajk4550", "link": "https://stackoverflow.com/users/2464536/ajk4550"}, "edited": false, "score": 0, "creation_date": 1436983935, "post_id": 31437457, "comment_id": 50845612, "body": "added sorting first to sort the rooms."}, {"owner": {"reputation": 715, "user_id": 2464536, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/87e89a45fb2a98bcf44a43ff0f475019?s=128&d=identicon&r=PG", "display_name": "ajk4550", "link": "https://stackoverflow.com/users/2464536/ajk4550"}, "edited": false, "score": 0, "creation_date": 1436984813, "post_id": 31437457, "comment_id": 50846087, "body": "Great, thanks!! That completely solved it. Made it seem so simple to!"}], "tags": [], "owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "is_accepted": true, "score": 1, "last_activity_date": 1436983872, "last_edit_date": 1436983872, "creation_date": 1436982269, "answer_id": 31437457, "question_id": 31437101, "link": "https://stackoverflow.com/questions/31437101/organizing-by-rails-datetime-in-view/31437457#31437457", "title": "Organizing by rails datetime in view", "body": "<p>Can you try this. this will return you a hash where date is the key and value will contain all the @rooms related to that time. </p>\n\n<pre><code>@rooms = Room.where(event_id: @current_event.id)\n@rooms = Hash[@rooms.sort_by{|o| o.start_time.to_date}.group_by {|room| room.start_time.to_date}.map{|l,m| [l, m.sort_by{|k| k.start_time}]}]\n</code></pre>\n\n<p>now you can traverse the rooms like this in the views. im putting code in erb format.</p>\n\n<pre><code>  &lt;% @rooms.each do |k, v| %&gt;\n     &lt;%= k %&gt;\n     &lt;% v.each do |room| %&gt;\n       &lt;%= room.created_at.start_time('%I:%M %p')%&gt;\n       &lt;%= #room.name or title what so ever. %&gt;\n     &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 715, "user_id": 2464536, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/87e89a45fb2a98bcf44a43ff0f475019?s=128&d=identicon&r=PG", "display_name": "ajk4550", "link": "https://stackoverflow.com/users/2464536/ajk4550"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 31437457, "answer_count": 1, "score": 0, "last_activity_date": 1436983872, "creation_date": 1436981204, "last_edit_date": 1436981800, "question_id": 31437101, "link": "https://stackoverflow.com/questions/31437101/organizing-by-rails-datetime-in-view", "title": "Organizing by rails datetime in view", "body": "<p>I am creating a scheduling app in Rails and I am getting stuck while trying to organize the rooms by date. When I say a room, I essentially just mean a block in the schedule. A typical event might have a lunch (one room), then a networking section (another room). Here is how I am getting the rooms:</p>\n\n<pre><code>@rooms = Room.where(event_id: @current_event.id).order(:start_time)\n</code></pre>\n\n<p>So that returns the rooms that belong to an event, in order of the start time. In my view I loop through and display the rooms for the event, but I want to group them in the view by the date in case there is an event that is on multiple days.</p>\n\n<p>Also <code>:start_time</code> is a datetime type in Ruby. In human speak, what I would do is look at the date portion and if the room date is not the same as the current group, I would print the new date and continue to group the rooms that fall on that day. Here is a trivial example in case I am not being clear:</p>\n\n<pre><code>Event: Staff Retreat\n\nJuly 14th, 2015\n-----------------------\n12:30 PM\nTeam building Lunch Begins\n------------------------\n6:30 PM\nTeam building Dinner Begins\n------------------------\n\nJuly 15th, 2015\n------------------------\n9:30 AM\nTeam building Breakfast Begins   \n</code></pre>\n\n<p>So having the grouping of rooms in the <code>@rooms</code> variable that is a datetime, what would be the best way to display a table like the above? I would think that in my loop I should check if the date was the same as the previous room, and if not print the date</p>\n\n<pre><code>- @rooms.each do |room|\n    room.start_time.strftime(\"%B %d, %Y\")\n    room.start_time.strftime(\"%I:%M%p\")\n    room.name\n</code></pre>\n\n<p>I am having trouble with the logistics because with the Model-View-Controller concept, I feel that sorting in the view may have the view do something it shouldn't have to. I am also struggling with how to do that in the view. I would think setting a variable in the controller that would hold the temporary date as I loop through would work, but it seems like that would start to get pretty messy though. What is the best way to group the various dates from the <code>@rooms</code> variable?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "backbone.js"], "answers": [{"comments": [{"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1436982720, "post_id": 31437313, "comment_id": 50844856, "body": "I am sorry, it crashes my front end. Nothing is displaying with this loop. I have mentioned I am using this in backbone template."}, {"owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "reply_to_user": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1436983043, "post_id": 31437313, "comment_id": 50845055, "body": "oh my mistake, I didn&#39;t see your note, I thought it was a plain rails view file - I&#39;m not very familiar with backbone, can&#39;t help you there"}], "tags": [], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "is_accepted": false, "score": 0, "last_activity_date": 1436981892, "creation_date": 1436981892, "answer_id": 31437313, "question_id": 31437076, "link": "https://stackoverflow.com/questions/31437076/how-to-access-unrelated-attributes-in-ruby-views/31437313#31437313", "title": "How to access unrelated attributes in ruby views", "body": "<p>In the view code, your loop over boards should look like this:</p>\n\n<pre><code>&lt;% boards.each do |board| %&gt;  \n  &lt;li&gt;\n    &lt;label for=\"home\"&gt;&lt;%= board.category_id %&gt;&lt;/label&gt;\n    &lt;input type=\"radio\" checked=\"true\" name=\"verticalMenu\" id=\"home\" /&gt;\n    &lt;div&gt;\n\n    &lt;/div&gt;\n  &lt;/li&gt;\n&lt;% end %&gt;  \n</code></pre>\n\n<p>It looks like the code you have is just declaring anonymous functions inside the loop, I'm not sure - but I think this is what you want :)</p>\n"}, {"comments": [{"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1437032181, "post_id": 31437601, "comment_id": 50864329, "body": "I am sorry, this is also not working, do you need more explanation sir ?"}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1437036456, "post_id": 31437601, "comment_id": 50866803, "body": "Actually my problem is related to this question: <a href=\"http://stackoverflow.com/questions/17386090/cannot-access-all-backbone-model-attribues-from-template\" title=\"cannot access all backbone model attribues from template\">stackoverflow.com/questions/17386090/&hellip;</a> I am not getting how to do it ! Can you help me out !"}, {"owner": {"reputation": 7915, "user_id": 8136, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16b21d7158b1214c552e22c198931d9a?s=128&d=identicon&r=PG", "display_name": "MattMcKnight", "link": "https://stackoverflow.com/users/8136/mattmcknight"}, "reply_to_user": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1437053687, "post_id": 31437601, "comment_id": 50878427, "body": "Yeah, this is potentially a problem in passing your model to the backbone view. Would need to see a lot more of your template, router, etc. to debug. (where you are calling fetch, render, etc.) are you getting any errors?"}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1437060749, "post_id": 31437601, "comment_id": 50883930, "body": "Sir i have a posted a separate thread you can answer there as well i will accept your both answers surely :) <a href=\"http://stackoverflow.com/questions/31458539/unable-to-access-backbone-nested-attributes\" title=\"unable to access backbone nested attributes\">stackoverflow.com/questions/31458539/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7915, "user_id": 8136, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16b21d7158b1214c552e22c198931d9a?s=128&d=identicon&r=PG", "display_name": "MattMcKnight", "link": "https://stackoverflow.com/users/8136/mattmcknight"}, "is_accepted": false, "score": 0, "last_activity_date": 1436982716, "creation_date": 1436982716, "answer_id": 31437601, "question_id": 31437076, "link": "https://stackoverflow.com/questions/31437076/how-to-access-unrelated-attributes-in-ruby-views/31437601#31437601", "title": "How to access unrelated attributes in ruby views", "body": "<p>You should use <code>&lt;%= board.category.title %&gt;</code> instead of <code>&lt;%= board.category_id %&gt;</code></p>\n\n<p>If you really can have a null category_id, you could make it:</p>\n\n<pre><code>&lt;%= board.category.title if board.category_id %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1436982716, "creation_date": 1436981119, "question_id": 31437076, "link": "https://stackoverflow.com/questions/31437076/how-to-access-unrelated-attributes-in-ruby-views", "title": "How to access unrelated attributes in ruby views", "body": "<p>I am new to ruby on rails. I have a boards model and its views. I have a category model and its views as well. The relation between category and board is one to many i.e.  one category has many boards. My requirement is to access category id placed in boards table and show respective category titles for that particular category id. At label tag <code>&lt;label for=\"home\"&gt;&lt;%= board.category_id %&gt;&lt;/label&gt;</code> i am getting empty category id in my label tag or may be a null. On rails console it is giving me data properly.<br>\nThis is a code for view. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"myNavigation\"&gt;\r\n  &lt;nav class=\"vertical\"&gt;\r\n    &lt;ul&gt;\r\n      &lt;% boards.each(function (board) { %&gt;  \r\n        &lt;li&gt;\r\n          &lt;label for=\"home\"&gt;&lt;%= board.category_id %&gt;&lt;/label&gt;\r\n          &lt;input type=\"radio\" checked=\"true\" name=\"verticalMenu\" id=\"home\" /&gt;\r\n          &lt;div&gt;\r\n            \r\n          &lt;/div&gt;\r\n        &lt;/li&gt;\r\n      &lt;% }); %&gt;  \r\n    &lt;/ul&gt;\r\n  &lt;/nav&gt;\r\n  &lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<blockquote>\n  <p>Board Model Class:</p>\n</blockquote>\n\n<pre><code>class Board &lt; ActiveRecord::Base\n  attr_accessible :description, :name, :open, :members, :category_id\n  #attr_accessor :category_id\n  has_many :lists, dependent: :destroy\n  has_many :board_activities , dependent: :destroy\n  has_many :boards_members, class_name: \"BoardMember\" , dependent: :destroy\n  has_many :members, through: :boards_members , dependent: :destroy\n  belongs_to :category, class_name: \"category\"\n\nend\n</code></pre>\n\n<blockquote>\n  <p>Category Model Class</p>\n</blockquote>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n    attr_accessible :title, :description\n    #attr_accessor :category_id\n    has_many :boards, dependent: :destroy\nend\n</code></pre>\n\n<p>Kindly also suggest easy way to create ruby partial layouts i.e. application.erb can be included in some pages and in some it should not. And it should also get above mentioned category id in which it is included. </p>\n\n<p>As a side note i am working in backbone rails, above view is actually a boards template. I am working with ruby 2.2.1 version and 4.1.2 rails version. Further details can also be provided. Thanks in advance. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "oauth"], "comments": [{"owner": {"reputation": 26940, "user_id": 106410, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Sw9rk.png?s=128&g=1", "display_name": "Zepplock", "link": "https://stackoverflow.com/users/106410/zepplock"}, "edited": false, "score": 0, "creation_date": 1436981031, "post_id": 31436978, "comment_id": 50843846, "body": "Why are you calling to_json there? Just passing a hash should suffice"}, {"owner": {"reputation": 3691, "user_id": 514860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c901002fd1c9ba4c58b0223c2f42e952?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/514860/will"}, "reply_to_user": {"reputation": 26940, "user_id": 106410, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Sw9rk.png?s=128&g=1", "display_name": "Zepplock", "link": "https://stackoverflow.com/users/106410/zepplock"}, "edited": false, "score": 0, "creation_date": 1436981788, "post_id": 31436978, "comment_id": 50844301, "body": "Ok, but.  removing to_json does not change the response."}, {"owner": {"reputation": 26940, "user_id": 106410, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Sw9rk.png?s=128&g=1", "display_name": "Zepplock", "link": "https://stackoverflow.com/users/106410/zepplock"}, "edited": false, "score": 0, "creation_date": 1436981967, "post_id": 31436978, "comment_id": 50844407, "body": "Can you provide an actual HTTP request? Either from network trace, server logs or client side logging?"}, {"owner": {"reputation": 3691, "user_id": 514860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c901002fd1c9ba4c58b0223c2f42e952?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/514860/will"}, "reply_to_user": {"reputation": 26940, "user_id": 106410, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Sw9rk.png?s=128&g=1", "display_name": "Zepplock", "link": "https://stackoverflow.com/users/106410/zepplock"}, "edited": false, "score": 0, "creation_date": 1437056103, "post_id": 31436978, "comment_id": 50880475, "body": "There isn&#39;t any client side logging as it isn&#39;t posting from the browser, the API server logs aren&#39;t available to me and rails isn&#39;t logging any network trace type stuff.  Not sure where else to look?"}, {"owner": {"reputation": 26940, "user_id": 106410, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Sw9rk.png?s=128&g=1", "display_name": "Zepplock", "link": "https://stackoverflow.com/users/106410/zepplock"}, "edited": false, "score": 0, "creation_date": 1437071951, "post_id": 31436978, "comment_id": 50890614, "body": "400 error usually means that your request is malformed. Most likely it didn&#39;t even get to the OAuth logic on the server. Try setting your params to just: {                &#39;Accept&#39; =&gt; &#39;application/json&#39;,               &#39;Content-Type&#39; =&gt; &#39;application/json&#39; ,               }"}], "answers": [{"comments": [{"owner": {"reputation": 3691, "user_id": 514860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c901002fd1c9ba4c58b0223c2f42e952?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/514860/will"}, "edited": false, "score": 0, "creation_date": 1437076313, "post_id": 31462068, "comment_id": 50892974, "body": "headers = {etc...}  surely...  I took this and worked on the code and got a new error. 405 Not Allowed.  Which seems closer."}, {"owner": {"reputation": 26940, "user_id": 106410, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Sw9rk.png?s=128&g=1", "display_name": "Zepplock", "link": "https://stackoverflow.com/users/106410/zepplock"}, "reply_to_user": {"reputation": 3691, "user_id": 514860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c901002fd1c9ba4c58b0223c2f42e952?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/514860/will"}, "edited": false, "score": 0, "creation_date": 1437083003, "post_id": 31462068, "comment_id": 50896347, "body": "That is server specific. What service are you using? They must have an explanation of error codes. Maybe they only allow PUT/GET and not POST."}, {"owner": {"reputation": 3691, "user_id": 514860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c901002fd1c9ba4c58b0223c2f42e952?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/514860/will"}, "edited": false, "score": 0, "creation_date": 1437136580, "post_id": 31462068, "comment_id": 50917011, "body": "apparently my posts aren&#39;t reaching the server at all.  is that possible? what else could be generating the 405 error?"}, {"owner": {"reputation": 26940, "user_id": 106410, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Sw9rk.png?s=128&g=1", "display_name": "Zepplock", "link": "https://stackoverflow.com/users/106410/zepplock"}, "reply_to_user": {"reputation": 3691, "user_id": 514860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c901002fd1c9ba4c58b0223c2f42e952?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/514860/will"}, "edited": false, "score": 0, "creation_date": 1437144000, "post_id": 31462068, "comment_id": 50921999, "body": "No, 405 must be coming from a server. What service are u using?"}, {"owner": {"reputation": 3691, "user_id": 514860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c901002fd1c9ba4c58b0223c2f42e952?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/514860/will"}, "edited": false, "score": 0, "creation_date": 1437153102, "post_id": 31462068, "comment_id": 50927552, "body": "Burning Glass, which is a CV parsing service."}], "tags": [], "owner": {"reputation": 26940, "user_id": 106410, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Sw9rk.png?s=128&g=1", "display_name": "Zepplock", "link": "https://stackoverflow.com/users/106410/zepplock"}, "is_accepted": false, "score": 0, "last_activity_date": 1437072073, "creation_date": 1437072073, "answer_id": 31462068, "question_id": 31436978, "link": "https://stackoverflow.com/questions/31436978/post-to-an-api-using-oauth/31462068#31462068", "title": "Post to an API using OAuth", "body": "<p>I think it should be like this:</p>\n\n<pre><code>consumer = OAuth::Consumer.new(consumer_key,secret, :site =&gt; uri)\naccesstoken = OAuth::AccessToken.new(consumer, core_access_token, core_access_secret)\n\nheaders =&gt; { \n          'Accept' =&gt; 'application/json',\n          'Content-Type' =&gt; 'application/json'\n          }\n\nresult = accesstoken.post(action, data, headers)\n</code></pre>\n"}], "owner": {"reputation": 3691, "user_id": 514860, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c901002fd1c9ba4c58b0223c2f42e952?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/514860/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437072073, "creation_date": 1436980796, "question_id": 31436978, "link": "https://stackoverflow.com/questions/31436978/post-to-an-api-using-oauth", "title": "Post to an API using OAuth", "body": "<p>I'm trying to post to an API.  The API takes files and converts them to JSON</p>\n\n<p>Here is what I am doing:</p>\n\n<pre><code>consumer = OAuth::Consumer.new(consumer_key,secret, :site =&gt; uri)\naccesstoken = OAuth::AccessToken.new(consumer, core_access_token, core_access_secret)\n\nparams = {:body =&gt; { \n              :binaryData =&gt; data, \n              :extension =&gt; \"txt\", \n              :locale =&gt; 'en_gb', \n              :instanceType =&gt; 'xray', \n              :fieldList =&gt; {\"field\" =&gt; [\"All\"]}\n            }.to_json,\n            :headers =&gt; { \n              'Accept' =&gt; 'application/json',\n              'Content-Type' =&gt; 'application/json' ,\n              }\n            }\nresult = accesstoken.post(action, params)\n</code></pre>\n\n<p>And I get back the response: </p>\n\n<pre><code>&lt;Net::HTTPBadRequest 400 Bad Request readbody=true&gt;\n</code></pre>\n\n<p>What does this error mean? Wrong URI? Wrong access tokens? or Incorrect usage of the OAUTH Gem (ie, my code is wrong) </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file-upload", "carrierwave"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1436980796, "post_id": 31436765, "comment_id": 50843714, "body": "Please post your <code>property_params</code> method."}, {"owner": {"reputation": 93, "user_id": 4649855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gvyFOiu25WE/AAAAAAAAAAI/AAAAAAAAAGo/sQU0oisRPHk/photo.jpg?sz=128", "display_name": "Chris Thompson", "link": "https://stackoverflow.com/users/4649855/chris-thompson"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436981311, "post_id": 31436765, "comment_id": 50844012, "body": "Updated to include the params, thanks"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436981838, "post_id": 31436765, "comment_id": 50844327, "body": "Try <code>propimages.create(image: image, property_id: @prop.id)</code> instead of <code>@prop.propimages.create(image: image)</code>. If that doesn&#39;t work try moving <code>if params[:images]       params[:images].each { |image|         @prop.propimages.create(image: image)       }     end</code> above <code>if @prop.save</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436983217, "post_id": 31436765, "comment_id": 50845160, "body": "Are you currently updating a form?"}, {"owner": {"reputation": 93, "user_id": 4649855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gvyFOiu25WE/AAAAAAAAAAI/AAAAAAAAAGo/sQU0oisRPHk/photo.jpg?sz=128", "display_name": "Chris Thompson", "link": "https://stackoverflow.com/users/4649855/chris-thompson"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436983472, "post_id": 31436765, "comment_id": 50845318, "body": "The same thing happens on update and on new, the images are in the parameters and then they are nil.  And nothing gets pushed to S3. Making those changes gave the same result as before, thanks for the suggestions though."}], "answers": [{"comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436982393, "post_id": 31437369, "comment_id": 50844670, "body": "Your answer is wrong. <code>:images</code> doesn&#39;t belongs to <code>propimage</code>, only <code>:image</code> does."}, {"owner": {"reputation": 93, "user_id": 4649855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gvyFOiu25WE/AAAAAAAAAAI/AAAAAAAAAGo/sQU0oisRPHk/photo.jpg?sz=128", "display_name": "Chris Thompson", "link": "https://stackoverflow.com/users/4649855/chris-thompson"}, "edited": false, "score": 0, "creation_date": 1436982650, "post_id": 31437369, "comment_id": 50844817, "body": "That didn&#39;t do it, same issue as before, it brings it through the parameters but when it splits out the two records and inserts nil into the image field.  Thanks for the help though."}], "tags": [], "owner": {"reputation": 809, "user_id": 1647226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fb84d2df934999fc747feb4d7c758e2c?s=128&d=identicon&r=PG", "display_name": "Marcelo Boeira", "link": "https://stackoverflow.com/users/1647226/marcelo-boeira"}, "is_accepted": false, "score": 1, "last_activity_date": 1437049651, "last_edit_date": 1437049651, "creation_date": 1436982029, "answer_id": 31437369, "question_id": 31436765, "link": "https://stackoverflow.com/questions/31436765/rails-carrierwave-image-upload-selects-files-but-inserts-nil-into-database/31437369#31437369", "title": "rails carrierwave image upload selects files but inserts nil into database", "body": "<p>You're checking for the \"images\" attribute, but you don't permit it to be sent by the request:</p>\n\n<pre><code>params.require(:propimage).permit(:image, :property_id)\n</code></pre>\n\n<p>So try using:</p>\n\n<pre><code>params.require(:propimage).permit(:image, :images, :property_id)\n</code></pre>\n\n<p>PS: You should really refactor this code though.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 4649855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gvyFOiu25WE/AAAAAAAAAAI/AAAAAAAAAGo/sQU0oisRPHk/photo.jpg?sz=128", "display_name": "Chris Thompson", "link": "https://stackoverflow.com/users/4649855/chris-thompson"}, "edited": false, "score": 0, "creation_date": 1436990384, "post_id": 31439453, "comment_id": 50849164, "body": "Thanks for the suggestion, I tried that but it didn&#39;t correct the issue.  But I think the problem is somewhere in the uploader.  I have another project that used :resize_to_fit =&gt;[nil, 300] so I know that it is sound."}, {"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "reply_to_user": {"reputation": 93, "user_id": 4649855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gvyFOiu25WE/AAAAAAAAAAI/AAAAAAAAAGo/sQU0oisRPHk/photo.jpg?sz=128", "display_name": "Chris Thompson", "link": "https://stackoverflow.com/users/4649855/chris-thompson"}, "edited": false, "score": 0, "creation_date": 1436994641, "post_id": 31439453, "comment_id": 50851641, "body": "No worries. What does &#39;nil&#39; do as a parameter here? I can&#39;t find it in the ImageMagick spec. Always looking for interesting unpublished features."}, {"owner": {"reputation": 93, "user_id": 4649855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gvyFOiu25WE/AAAAAAAAAAI/AAAAAAAAAGo/sQU0oisRPHk/photo.jpg?sz=128", "display_name": "Chris Thompson", "link": "https://stackoverflow.com/users/4649855/chris-thompson"}, "edited": false, "score": 0, "creation_date": 1437004260, "post_id": 31439453, "comment_id": 50855375, "body": "On my last project 300px was the height of my row, but user images had different aspect ratios. &#39;nil&#39; let the width be whatever it needed to be to maintain that aspect ratio."}, {"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "reply_to_user": {"reputation": 93, "user_id": 4649855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gvyFOiu25WE/AAAAAAAAAAI/AAAAAAAAAGo/sQU0oisRPHk/photo.jpg?sz=128", "display_name": "Chris Thompson", "link": "https://stackoverflow.com/users/4649855/chris-thompson"}, "edited": false, "score": 0, "creation_date": 1437014172, "post_id": 31439453, "comment_id": 50857868, "body": "Okay. Cool. Thanks for following up and letting me know."}], "tags": [], "owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "is_accepted": false, "score": 1, "last_activity_date": 1436988756, "creation_date": 1436988756, "answer_id": 31439453, "question_id": 31436765, "link": "https://stackoverflow.com/questions/31436765/rails-carrierwave-image-upload-selects-files-but-inserts-nil-into-database/31439453#31439453", "title": "rails carrierwave image upload selects files but inserts nil into database", "body": "<p>Unless there's been an ImageMagick update that I haven't seen, which is possible, the 'nil' parameter is not valid in your image_uploader.rb</p>\n\n\n\n<pre><code>  process :resize_to_fill =&gt; [1000, nil]\n\n  version :thumb do\n    process resize_to_fill: [100, nil]\n  end\n</code></pre>\n\n<p>You must provide a height parameter. I don't think you can just default that out by making it nil. It would be easy enough to test.</p>\n\n\n\n<pre><code>  process :resize_to_fill =&gt; [1000, 1000]\n\n  version :thumb do\n    process resize_to_fill: [100, 100]\n  end\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4649855, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gvyFOiu25WE/AAAAAAAAAAI/AAAAAAAAAGo/sQU0oisRPHk/photo.jpg?sz=128", "display_name": "Chris Thompson", "link": "https://stackoverflow.com/users/4649855/chris-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1437049651, "creation_date": 1436980156, "last_edit_date": 1436981155, "question_id": 31436765, "link": "https://stackoverflow.com/questions/31436765/rails-carrierwave-image-upload-selects-files-but-inserts-nil-into-database", "title": "rails carrierwave image upload selects files but inserts nil into database", "body": "<p>Thanks in advance to any help everyone.  I'm working with a rails 4 app and want to upload multiple image files using CarrierWave.  My form works but after submit the only update to the database is a new record with the image field as nil.</p>\n\n<p>Here are the server logs at submit (abridged)</p>\n\n<pre><code>Parameters: \"property\"=&gt;{\"name\"=&gt;\"Windsong Ranch\"}, \n\"images\"=&gt;[\"53a2135761af0826.jpg\", \"53a2137620ecc597.jpg\"], \"commit\"=&gt;\"Edit Property Changes\", \"id\"=&gt;\"3\"}\n</code></pre>\n\n<p>And when it saves to the database</p>\n\n<pre><code>INSERT INTO \"propimages\" (\"image\", \"property_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"image\", nil], [\"property_id\", 3], [\"created_at\", \"2015-07-15 16:42:41.607696\"], [\"updated_at\", \"2015-07-15 16:42:41.607696\"]]\n</code></pre>\n\n<p>Here is the form(abridged)</p>\n\n<pre><code>&lt;%= form_for @prop do |f| %&gt;\n  &lt;p&gt;\n    &lt;%= f.label :name %&gt;\n    &lt;%= f.text_field :name, class: 'form-control', required: true %&gt;\n  &lt;/p&gt;\n &lt;p&gt;Upload Images&lt;br&gt;\n    &lt;%= file_field_tag \"images[]\", type: :file, :multiple =&gt; true %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n  &lt;%= f.submit \"Edit Property Changes\", class: 'btn btn-success' %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>image_uploader.rb</strong></p>\n\n<pre><code>  class ImageUploader &lt; CarrierWave::Uploader::Base\n\n  include CarrierWave::MiniMagick\n\n  storage :fog\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  process :resize_to_fill =&gt; [1000, nil]\n\n  version :thumb do\n    process resize_to_fill: [100, nil]\n  end\n\n  def extension_white_list\n    %w(jpg jpeg gif png)\n  end\n\n\nend\n</code></pre>\n\n<p><strong>propimage.rb</strong></p>\n\n<pre><code>class Propimage &lt; ActiveRecord::Base\n  belongs_to :property\n  mount_uploader :image, ImageUploader\nend\n</code></pre>\n\n<p><strong>properties_controller.rb</strong></p>\n\n<pre><code>def create\n@prop = Property.create(property_params)\n  if @prop.save\n\n    if params[:images]\n      params[:images].each { |image|\n        @prop.propimages.create(image: image)\n      }\n    end\n    redirect_to @prop\n  else\n    flash[:alert] = \"error creating Property\"\n    render :new\n  end\nend\n\ndef update\n  @prop = Property.find(params[:id])\n  if @prop.update_attributes(property_params)\n    if params[:images]\n        params[:images].each { |image|\n            @prop.propimages.create(image: image)\n        }\n    end\n    flash[:notice] = \"Update successful\"\n    redirect_to property_path\n  else\n    flash[:notice] = \"Error updating Sponsor\"\n    render :new\n  end\nend\n  def property_params\n    params.require(:property).permit(:name, :purchase_price, :min_investment, :overview, :targeted_irr, :targeted_hold_period, :targeted_yield, :address_street, :address_city, :address_state, :address_zipcode, :sponsor_id)\n  end\n</code></pre>\n\n<p><strong>propimages_controller</strong></p>\n\n<pre><code>  def create\n    @propimage = Propimage.new(propimages_params)\n    @propimage.save\n  end\n private\n  def propimages_params\n    params.require(:propimage).permit(:image, :property_id)\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "form-for", "nested-form-for"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436979667, "post_id": 31436587, "comment_id": 50843050, "body": "Please post your edit method of your controller"}, {"owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "edited": false, "score": 0, "creation_date": 1436979932, "post_id": 31436587, "comment_id": 50843206, "body": "changing form_for line to this helps.? &lt;%= form_for [@task.user, @task], method: :put do |f| %&gt; secondly does your @task exists and have user assosiated to it.?"}, {"owner": {"reputation": 1815, "user_id": 5110072, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0f00c171a617c7de7e8f29649ed44c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Shmatko", "link": "https://stackoverflow.com/users/5110072/alex-shmatko"}, "edited": false, "score": 0, "creation_date": 1436980116, "post_id": 31436587, "comment_id": 50843319, "body": "@Athat Yes, it worked perfectly. Thanks a lot."}, {"owner": {"reputation": 1815, "user_id": 5110072, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0f00c171a617c7de7e8f29649ed44c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Shmatko", "link": "https://stackoverflow.com/users/5110072/alex-shmatko"}, "edited": false, "score": 0, "creation_date": 1436981841, "post_id": 31436587, "comment_id": 50844330, "body": "@Athat Sorry, I wanted to ask something else. What is equivalent form of this path in brackets?"}, {"owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "edited": false, "score": 0, "creation_date": 1436984384, "post_id": 31436587, "comment_id": 50845859, "body": "im not 100% sure but this one i guess will work user_task_path(@task.user, @task)"}], "answers": [{"comments": [{"owner": {"reputation": 1815, "user_id": 5110072, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0f00c171a617c7de7e8f29649ed44c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Shmatko", "link": "https://stackoverflow.com/users/5110072/alex-shmatko"}, "edited": false, "score": 0, "creation_date": 1436981999, "post_id": 31436688, "comment_id": 50844429, "body": "And could you say please what is equivalent form of this path in brackets?"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1436979927, "creation_date": 1436979927, "answer_id": 31436688, "question_id": 31436587, "link": "https://stackoverflow.com/questions/31436587/ruby-on-rails-4-cant-get-form-for-working-with-nested-routes/31436688#31436688", "title": "Ruby on Rails 4 Can&#39;t get form_for working with nested routes", "body": "<p>Try the below code</p>\n\n<pre><code>&lt;%= form_for [@task.user, @task], method: :put do |f| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1815, "user_id": 5110072, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0f00c171a617c7de7e8f29649ed44c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Shmatko", "link": "https://stackoverflow.com/users/5110072/alex-shmatko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 31436688, "answer_count": 1, "score": 0, "last_activity_date": 1436979927, "creation_date": 1436979570, "last_edit_date": 1436979874, "question_id": 31436587, "link": "https://stackoverflow.com/questions/31436587/ruby-on-rails-4-cant-get-form-for-working-with-nested-routes", "title": "Ruby on Rails 4 Can&#39;t get form_for working with nested routes", "body": "<p>I`m trying to do a form_for with nested routes and I can't get it working.</p>\n\n<p>This is <strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :users do\n    resources :tasks\n  end\n</code></pre>\n\n<p><strong>view/tasks/edit</strong></p>\n\n<pre><code>&lt;h1&gt;Editing task&lt;/h1&gt;\n\n&lt;%= form_for [@task.user, :task], method: :put do |f| %&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :Title %&gt;&lt;br&gt;\n    &lt;%= f.text_field :title %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :Description %&gt;&lt;br&gt;\n    &lt;%= f.text_area :description %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/p&gt;\n\n  &lt;%= link_to 'Back to List', user_tasks_path %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>rake routes</strong></p>\n\n<pre><code> Prefix Verb   URI Pattern                              Controller#Action\n          root GET    /                                        users#index\n    user_tasks GET    /users/:user_id/tasks(.:format)          tasks#index\n               POST   /users/:user_id/tasks(.:format)          tasks#create\n new_user_task GET    /users/:user_id/tasks/new(.:format)      tasks#new\nedit_user_task GET    /users/:user_id/tasks/:id/edit(.:format) tasks#edit\n     user_task GET    /users/:user_id/tasks/:id(.:format)      tasks#show\n               PATCH  /users/:user_id/tasks/:id(.:format)      tasks#update\n               PUT    /users/:user_id/tasks/:id(.:format)      tasks#update\n               DELETE /users/:user_id/tasks/:id(.:format)      tasks#destroy\n</code></pre>\n\n<p>The Rails gives an error:\nundefined method `model_name' for :task:Symbol</p>\n\n<p><strong>tasks_controller.rb</strong></p>\n\n<pre><code>class TasksController &lt; ApplicationController\n  def index\n    @tasks = Task.where(user_id: params[:user_id])\n  end\n\n  def show\n    @task = Task.find(params[:id])\n    redirect_to users_path\n  end\n\n  def new\n    @task = Task.new\n  end\n\n  def create\n    @task = Task.new(task_params)\n\n    if @task.save\n      redirect_to @task\n    else\n      render 'new'\n    end\n  end\n\n  def edit\n    @task = Task.find(params[:id])\n  end\n\n  def update\n    @task = Task.find(params[:id])\n\n    if @task.update(task_params)\n      redirect_to [@task.user, @task]\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @task = Task.find(params[:id])\n    @task.destroy\n    respond_to {|format| format.js }\n  end\n\n  private\n\n    def task_params\n     params.require(:task).permit!\n    end\n end\n</code></pre>\n\n<p>Any help?</p>\n"}, {"tags": ["ruby", "json", "svn", "chef-infra"], "comments": [{"owner": {"reputation": 809, "user_id": 1647226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fb84d2df934999fc747feb4d7c758e2c?s=128&d=identicon&r=PG", "display_name": "Marcelo Boeira", "link": "https://stackoverflow.com/users/1647226/marcelo-boeira"}, "edited": false, "score": 0, "creation_date": 1436982117, "post_id": 31436513, "comment_id": 50844506, "body": "wha is the &quot;new_resource&quot; ?"}, {"owner": {"reputation": 919, "user_id": 3000837, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3472b0427faa049a99f78f985e3bdd9b?s=128&d=identicon&r=PG&f=1", "display_name": "streetsoldier", "link": "https://stackoverflow.com/users/3000837/streetsoldier"}, "reply_to_user": {"reputation": 809, "user_id": 1647226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fb84d2df934999fc747feb4d7c758e2c?s=128&d=identicon&r=PG", "display_name": "Marcelo Boeira", "link": "https://stackoverflow.com/users/1647226/marcelo-boeira"}, "edited": false, "score": 0, "creation_date": 1436983823, "post_id": 31436513, "comment_id": 50845542, "body": "that&#39;s chef specific thing. The value is passed. Assume that it is passed to the function itself."}, {"owner": {"reputation": 2426, "user_id": 82906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ffe64eaead3a365bac8afa0272177526?s=128&d=identicon&r=PG", "display_name": "Sneal", "link": "https://stackoverflow.com/users/82906/sneal"}, "edited": false, "score": 0, "creation_date": 1437009671, "post_id": 31436513, "comment_id": 50856688, "body": "Is your SVN repo accessible via http(s)?"}, {"owner": {"reputation": 919, "user_id": 3000837, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3472b0427faa049a99f78f985e3bdd9b?s=128&d=identicon&r=PG&f=1", "display_name": "streetsoldier", "link": "https://stackoverflow.com/users/3000837/streetsoldier"}, "edited": false, "score": 0, "creation_date": 1437067803, "post_id": 31436513, "comment_id": 50888267, "body": "yes. It is. I can view the JSONs in a browser"}], "answers": [{"comments": [{"owner": {"reputation": 919, "user_id": 3000837, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3472b0427faa049a99f78f985e3bdd9b?s=128&d=identicon&r=PG&f=1", "display_name": "streetsoldier", "link": "https://stackoverflow.com/users/3000837/streetsoldier"}, "edited": false, "score": 0, "creation_date": 1437412830, "post_id": 31466731, "comment_id": 51006121, "body": "Getting the following error when I do that:   Error executing action <code>create</code> on resource &#39;cccis-environment-cookbook-machines[Creating Environment..]&#39;     ============================================================&zwnj;&#8203;====================          Errno::EINVAL     -------------     Invalid argument @ rb_sysopen - http://{svn location hidden}/environment.json"}, {"owner": {"reputation": 1700, "user_id": 627806, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c6022ce776b5415ea90bddd94355fffa?s=128&d=identicon&r=PG", "display_name": "Jon Burgess", "link": "https://stackoverflow.com/users/627806/jon-burgess"}, "reply_to_user": {"reputation": 919, "user_id": 3000837, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3472b0427faa049a99f78f985e3bdd9b?s=128&d=identicon&r=PG&f=1", "display_name": "streetsoldier", "link": "https://stackoverflow.com/users/3000837/streetsoldier"}, "edited": false, "score": 0, "creation_date": 1437477413, "post_id": 31466731, "comment_id": 51034356, "body": "Probably got something to do with the argument you&#39;re passing to <code>open</code> - but that&#39;s a bit difficult for me to debug without seeing what you&#39;ve got there exactly."}], "tags": [], "owner": {"reputation": 1700, "user_id": 627806, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c6022ce776b5415ea90bddd94355fffa?s=128&d=identicon&r=PG", "display_name": "Jon Burgess", "link": "https://stackoverflow.com/users/627806/jon-burgess"}, "is_accepted": false, "score": 0, "last_activity_date": 1437093241, "creation_date": 1437093241, "answer_id": 31466731, "question_id": 31436513, "link": "https://stackoverflow.com/questions/31436513/how-can-i-read-json-files-from-svn-in-ruby-chef-code-without-checking-the-files/31466731#31466731", "title": "How can I read JSON files from SVN in Ruby/Chef code without checking the files out", "body": "<p>If the JSON file is available via HTTP, then something like the following <em>should</em> work:</p>\n\n<pre><code>require 'open-uri'\nrequire 'json'\n\ndef get_json(template_name)\n  open(new_resource.svn_path + template_name) do |f|\n    return JSON.parse(f.read)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 919, "user_id": 3000837, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3472b0427faa049a99f78f985e3bdd9b?s=128&d=identicon&r=PG&f=1", "display_name": "streetsoldier", "link": "https://stackoverflow.com/users/3000837/streetsoldier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437093241, "creation_date": 1436979374, "last_edit_date": 1436979911, "question_id": 31436513, "link": "https://stackoverflow.com/questions/31436513/how-can-i-read-json-files-from-svn-in-ruby-chef-code-without-checking-the-files", "title": "How can I read JSON files from SVN in Ruby/Chef code without checking the files out", "body": "<p>In my chef code, I am trying to read JSON files, parsing them and using their values. Currently I am doing it from my local machine. I want to be able to store the JSONs on SVN and give my code the path to the SVN location and it should be able to read it. Currently my code looks like this:</p>\n\n<pre><code>def get_json(template_name)\n      big_json = JSON.parse(::File::read(new_resource.local_path + template_name))\n      return big_json\nend\n</code></pre>\n\n<p>I want it to look something like this:</p>\n\n<pre><code>def get_json(template_name)\n      big_json = JSON.parse(::File::read(new_resource.svn_path + template_name))\n      return big_json\nend\n</code></pre>\n\n<p>Anyone know how I can directly do it though SVN?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "twitter-bootstrap", "bootstrap-datetimepicker"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4147810, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-e-Asl17ANyM/AAAAAAAAAAI/AAAAAAAAACM/tUOSo0c6Gdg/photo.jpg?sz=128", "display_name": "James Sanders", "link": "https://stackoverflow.com/users/4147810/james-sanders"}, "edited": false, "score": 0, "creation_date": 1437060502, "post_id": 31443780, "comment_id": 50883731, "body": "This helped turns out another date picker with the same id was already on the page in another modal in a partial. Changing the Id to a new one worked. Dumb mistake"}], "tags": [], "owner": {"reputation": 576, "user_id": 4595302, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mN9vRcYJCx0/AAAAAAAAAAI/AAAAAAAAAEc/x8mQmBCac0g/photo.jpg?sz=128", "display_name": "Jason Tate", "link": "https://stackoverflow.com/users/4595302/jason-tate"}, "is_accepted": false, "score": 2, "last_activity_date": 1437008832, "creation_date": 1437008832, "answer_id": 31443780, "question_id": 31435894, "link": "https://stackoverflow.com/questions/31435894/bootstrap-datetimepicker-not-firing-when-inside-boostrap-collapse/31443780#31443780", "title": "Bootstrap datetimepicker not firing when inside Boostrap Collapse", "body": "<p>Looks like you either provided an incorrect link, or may be referring to the incorrect documentation; as most options you are using are not part of the datetimepicker in question <a href=\"http://eonasdan.github.io/bootstrap-datetimepicker/Options/\" rel=\"nofollow\">http://eonasdan.github.io/bootstrap-datetimepicker/Options/</a></p>\n\n<p>It's hard to tell what format you are trying to use for your date, as you are not using valid moment format(s) <a href=\"http://momentjs.com/docs/#/displaying/format/\" rel=\"nofollow\">http://momentjs.com/docs/#/displaying/format/</a></p>\n\n<p>You will also likely need to add some custom CSS to allow for <code>overflow: visible;</code> on Bootstrap panels.</p>\n\n<p>Provided we are talking about the right datetimepicker, something like this should get you going. You will have to play with the moment formats to suit your needs.</p>\n\n<p><strong>See Fiddle</strong>: <a href=\"http://jsfiddle.net/spasticdonkey/6g7j55f2/3/\" rel=\"nofollow\">http://jsfiddle.net/spasticdonkey/6g7j55f2/3/</a></p>\n\n<pre><code>$(function () {\n    $(\"#datetimepicker1\").datetimepicker({\n        format: \"DD MM YYYY - HH:mm Z\",\n        useCurrent: false\n    });\n});\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 4147810, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-e-Asl17ANyM/AAAAAAAAAAI/AAAAAAAAACM/tUOSo0c6Gdg/photo.jpg?sz=128", "display_name": "James Sanders", "link": "https://stackoverflow.com/users/4147810/james-sanders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1437008832, "creation_date": 1436977369, "question_id": 31435894, "link": "https://stackoverflow.com/questions/31435894/bootstrap-datetimepicker-not-firing-when-inside-boostrap-collapse", "title": "Bootstrap datetimepicker not firing when inside Boostrap Collapse", "body": "<p>I am trying to put a bootstrap datetimerpicker inside of a bootstrap collapse, but when I click on the glyphcon, the calander does not dropdown. I assume that there is some javascript conflict that is preventing the dropdown of the calander where the user can pick a date.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>        &lt;div class=\"col-sm-3 sidebar\"&gt;\n        &lt;div class=\"panel-group\" id=\"accordion\" role=\"tablist\" aria-multiselectable=\"true\"&gt;\n          &lt;div class=\"panel panel-default\"&gt;\n            &lt;a role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#collapseOne\" aria-expanded=\"false\" aria-controls=\"collapseOne\"&gt;\n                &lt;div class=\"panel-heading\" role=\"tab\" id=\"headingOne\"&gt;\n                &lt;h4 class=\"panel-title\"&gt;Request Pickup&lt;/h4&gt;\n                &lt;/div&gt;\n              &lt;/a&gt;\n            &lt;div id=\"collapseOne\" class=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingOne\"&gt;\n              &lt;div class=\"panel-body\"&gt;\n                &lt;h4&gt;Selected A Date&lt;/h4&gt;\n                    &lt;div class=\"row\"&gt;\n                        &lt;div class='col-sm-6'&gt;\n                            &lt;div class=\"form-group\"&gt;\n                                &lt;div class='input-group date' id='datetimepicker1'&gt;\n                                    &lt;input type='text' class=\"form-control\" id=\"delivery_time\" /&gt;\n                                    &lt;span class=\"input-group-addon\"&gt;\n                                        &lt;span class=\"glyphicon glyphicon-calendar\"&gt;&lt;/span&gt;\n                                    &lt;/span&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;script type=\"text/javascript\"&gt;\n                            $(function () {\n                                $('#datetimepicker1').datetimepicker({\n                                  format: \"dd MM yyyy - HH:ii P\",\n                                  showMeridian: true,\n                                  autoclose: true,\n                                  todayBtn: false\n                                });\n                            });\n                        &lt;/script&gt;\n                    &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>I am using rails with this <a href=\"https://github.com/TrevorS/bootstrap3-datetimepicker-rails\" rel=\"nofollow\">gem</a> which works perfectly when not in a collapse. Any help or critiques are greatly appreciated. Thanks</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ubuntu", "rails-console"], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 4986896, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ktb5QDcQ1Z0/AAAAAAAAAAI/AAAAAAAAAA8/7L7C_eXM4Tk/photo.jpg?sz=128", "display_name": "StephanieS", "link": "https://stackoverflow.com/users/4986896/stephanies"}, "edited": false, "score": 0, "creation_date": 1436977504, "post_id": 31435834, "comment_id": 50841750, "body": "That seems counter-intuitive to me. This whole time, I was thinking that the purple ones meant that the query failed (I didn&#39;t have enough right next to each other to see that the colors just alternated). But at least now I know!"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1517830934, "post_id": 31435834, "comment_id": 84239983, "body": "Is there a way to customize the colors?"}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1517831716, "post_id": 31435834, "comment_id": 84240423, "body": "Nevermind, I&#39;ve found it, just edit ~/.rvm/gems/ruby-2.3.1/gems/activerecord-5.1.4/lib/active_re&zwnj;&#8203;cord/log_subscriber.&zwnj;&#8203;rb and edit the color and restart the server."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1589898244, "post_id": 31435834, "comment_id": 109471834, "body": "@jedi Late response, but that&#39;s a bad idea. You shouldn&#39;t edit your installed gems, ever! The changes will not follow your project around (every other installation will get the <i>real</i> gem from rubygems.org), and they&#39;ll be lost if you ever upgrade the gem."}, {"owner": {"reputation": 534, "user_id": 3057462, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vwrs.jpg?s=128&g=1", "display_name": "hiveer", "link": "https://stackoverflow.com/users/3057462/hiveer"}, "edited": false, "score": 0, "creation_date": 1597981437, "post_id": 31435834, "comment_id": 112315221, "body": "what does the <code>load (0.5ms)</code> mean here?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 534, "user_id": 3057462, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vwrs.jpg?s=128&g=1", "display_name": "hiveer", "link": "https://stackoverflow.com/users/3057462/hiveer"}, "edited": false, "score": 0, "creation_date": 1597981919, "post_id": 31435834, "comment_id": 112315311, "body": "@hiveer It&#39;s the amount of time the query took to execute."}, {"owner": {"reputation": 534, "user_id": 3057462, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vwrs.jpg?s=128&g=1", "display_name": "hiveer", "link": "https://stackoverflow.com/users/3057462/hiveer"}, "edited": false, "score": 0, "creation_date": 1598228344, "post_id": 31435834, "comment_id": 112380869, "body": "Thanks @meager    You know I&#39;m a little confusing on some Rails ActiveRecord query function.   Like the difference between &#39;count&#39; and &#39;length&#39;, &#39;length&#39; will load the ActiveRecord query result in memory. But we cannot see their difference from the logs, because they are all like <code>Xxx load (0.5ms)</code>"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 14, "last_activity_date": 1481669138, "last_edit_date": 1481669138, "creation_date": 1436977215, "answer_id": 31435834, "question_id": 31435749, "link": "https://stackoverflow.com/questions/31435749/what-do-the-colors-of-output-in-rails-console-and-rails-server-log-mean/31435834#31435834", "title": "What do the colors of output in rails console and Rails server log mean?", "body": "<p>In Rails 5, the colors indicate the type of query:</p>\n\n<ul>\n<li><p>Blue for selects</p>\n\n<p><a href=\"https://i.stack.imgur.com/cIZw6.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/cIZw6.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>Yellow for updates</p>\n\n<p><a href=\"https://i.stack.imgur.com/QjaVi.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QjaVi.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>Green for inserts</p>\n\n<p><a href=\"https://i.stack.imgur.com/vU9AD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vU9AD.png\" alt=\"enter image description here\"></a></p></li>\n<li><p>Red for deletes</p>\n\n<p><a href=\"https://i.stack.imgur.com/jLPiz.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jLPiz.png\" alt=\"enter image description here\"></a></p></li>\n</ul>\n\n<p>In addition to various other colors for things like <code>alter table</code> or <code>begin</code>/<code>commit</code> statements.</p>\n\n<hr>\n\n<p>Prior to Rails 5, the colors don't mean anything. They just alternate back and forth so you can easily tell where one query stops and the next query begins.</p>\n\n<p><code>10.times { Photo.all }</code> yields:</p>\n\n<p><img src=\"https://i.stack.imgur.com/JBA6q.png\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 305, "user_id": 4986896, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ktb5QDcQ1Z0/AAAAAAAAAAI/AAAAAAAAAA8/7L7C_eXM4Tk/photo.jpg?sz=128", "display_name": "StephanieS", "link": "https://stackoverflow.com/users/4986896/stephanies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2085, "favorite_count": 0, "accepted_answer_id": 31435834, "answer_count": 1, "score": 9, "last_activity_date": 1481669322, "creation_date": 1436976910, "last_edit_date": 1481669322, "question_id": 31435749, "link": "https://stackoverflow.com/questions/31435749/what-do-the-colors-of-output-in-rails-console-and-rails-server-log-mean", "title": "What do the colors of output in rails console and Rails server log mean?", "body": "<p>I'm running <code>rails server</code> and <code>rails console</code> in Ubuntu 14.04 inside the generic terminal (app is just called \"Terminal\").</p>\n\n<p>Whenever I run commands that involve the database, the console outputs which SQL query it sent but sometimes the text a turquoise color and sometimes it's a purple color. For example in this console output:</p>\n\n<pre><code>2.2.2 :025 &gt;   pl = ProjectLevel.find_by(name: 'Premium')\n\nProjectLevel Load (0.5ms)  SELECT  \"project_levels\".* FROM \"project_levels\" WHERE \"project_levels\".\"deleted_at\" \nIS NULL AND \"project_levels\".\"name\" = $1 LIMIT 1  [[\"name\", \"Premium\"]]\n\n=&gt; #&lt;ProjectLevel id: 1, name: \"Premium\", deleted_at: nil, created_at: \"2015-07-15 15:45:40\", updated_at: \"2015-07-15 15:45:40\"&gt; \n</code></pre>\n\n<p>(The colors that show up on here are not the same as my console)</p>\n\n<p>The part that says <code>ProjectLevel Load (0.5ms)</code> will sometimes be turqoise but will sometimes be purple but every other part of the text is. Does this color actually mean anything? Is it telling me something about the success of the query or the data returned? Usually things like this in Rails are pretty intuitive (like when a test suite returns green text vs red text to tell you if the tests were successful) but  I can't seem to find anything about where those colors are coming from</p>\n"}, {"tags": ["ruby", "debugging", "web", "sinatra"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436979713, "post_id": 31435217, "comment_id": 50843070, "body": "Welcome to Stack Overflow. Don&#39;t use a gist or other off-site resource for your code. Links to offsite pages rot, which makes your question worthless to anyone else in the future searching for a similar answer. &#39;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>.&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 314721, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d1e461ee329ac8b02c537ac72ca6e4e4?s=128&d=identicon&r=PG&f=1", "display_name": "Riina", "link": "https://stackoverflow.com/users/314721/riina"}, "edited": false, "score": 1, "creation_date": 1436994438, "post_id": 31436073, "comment_id": 50851533, "body": "Thanks for helping realise that the output was being buffered. I thought the debugger wasn&#39;t working but it actually was.  $stdout.syc change didn&#39;t work for me, but remote debugging did the trick. I used remote-pry and it works fine."}], "tags": [], "owner": {"reputation": 32682, "user_id": 120518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/edf1077f9152b361937f12707e3af891?s=128&d=identicon&r=PG", "display_name": "Shadwell", "link": "https://stackoverflow.com/users/120518/shadwell"}, "is_accepted": true, "score": 1, "last_activity_date": 1436979488, "last_edit_date": 1495535060, "creation_date": 1436977940, "answer_id": 31436073, "question_id": 31435217, "link": "https://stackoverflow.com/questions/31435217/debugging-ruby-web-apps/31436073#31436073", "title": "Debugging ruby web apps", "body": "<p>It is probably caused by ruby buffering the output from your webserver. This is describe a little more on the Foreman wiki \"<a href=\"https://github.com/ddollar/foreman/wiki/Missing-Output\" rel=\"nofollow noreferrer\">Missing Output</a>\".</p>\n\n<p>There are two approaches I think. You can stop the buffering before your breakpoint:</p>\n\n<pre><code>$stdout.sync = true\nbyebug\n</code></pre>\n\n<p>This works okay for me and you can then debug in the foreman console.</p>\n\n<p>The alternative is to look at remote debugging where you use a debugging server that you can connect to from another process. There's a good answer already covering that in \"<a href=\"https://stackoverflow.com/questions/22794176/how-to-use-byebug-with-a-remote-process-e-g-pow/22794177#22794177\">How to use Byebug with a remote process (e.g., pow)</a>\".</p>\n"}], "owner": {"reputation": 510, "user_id": 314721, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d1e461ee329ac8b02c537ac72ca6e4e4?s=128&d=identicon&r=PG&f=1", "display_name": "Riina", "link": "https://stackoverflow.com/users/314721/riina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 1, "accepted_answer_id": 31436073, "answer_count": 1, "score": 1, "last_activity_date": 1436991760, "creation_date": 1436975458, "last_edit_date": 1436991760, "question_id": 31435217, "link": "https://stackoverflow.com/questions/31435217/debugging-ruby-web-apps", "title": "Debugging ruby web apps", "body": "<p>I'm trying to figure out how to debug threaded web apps in ruby.</p>\n\n<p>The gist below contains a much simplified and trivial app that mirrors the problem I'm having with my project app. I run the application using foreman start and then I try to debug it with a byebug statement in myapp.rb. When I go to the root url in a browser it hits the break point, but doesn't yield control to me in the console, I can't do anything at all. It just shows the breakpoint but I can't type anything into the console, so I can't navigate to other breakpoints etc... </p>\n\n<p>What am I doing wrong?</p>\n\n<pre><code>**Procfile**\n\nweb:      bundle exec puma -C ./config/puma.rb\n\n**config.ru**\n\nrequire_relative 'myapp'\nrun Sinatra::Application\n\n**myapp.rb** \n\nrequire 'sinatra'\nrequire 'byebug'\n\nget '/' do\n  message=\"oh, hello!\"\n  byebug\n  message\nend\n\n**puma.rb**\n\nworkers 2\nthreads_count = 5\nthreads threads_count, threads_count\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1436974312, "post_id": 31434731, "comment_id": 50839561, "body": "<code>ary.all? {|elem| elem.source == ary.first.source}</code>"}, {"owner": {"reputation": 3466, "user_id": 826614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/935a0a598738883b4af59a73335a7aa0?s=128&d=identicon&r=PG", "display_name": "gaussblurinc", "link": "https://stackoverflow.com/users/826614/gaussblurinc"}, "edited": false, "score": 0, "creation_date": 1436974775, "post_id": 31434731, "comment_id": 50839908, "body": "<code>ary.any? {|elem| elem.source != ary.first.source} # find one that NOT equal</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 3466, "user_id": 826614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/935a0a598738883b4af59a73335a7aa0?s=128&d=identicon&r=PG", "display_name": "gaussblurinc", "link": "https://stackoverflow.com/users/826614/gaussblurinc"}, "edited": false, "score": 0, "creation_date": 1436974940, "post_id": 31434731, "comment_id": 50840037, "body": "@gaussblurinc: normally, you want to be explicit about your intentions. This, it seems, he intends to check if all elements have the same value. Checking if any elements have different value is masking the intention somewhat."}, {"owner": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "edited": false, "score": 0, "creation_date": 1436975137, "post_id": 31434731, "comment_id": 50840178, "body": "can you give us an example of what a clone object looks like?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 3466, "user_id": 826614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/935a0a598738883b4af59a73335a7aa0?s=128&d=identicon&r=PG", "display_name": "gaussblurinc", "link": "https://stackoverflow.com/users/826614/gaussblurinc"}, "edited": false, "score": 0, "creation_date": 1436975179, "post_id": 31434731, "comment_id": 50840209, "body": "@gaussblurinc There is no reason to introduce a negation when you can do without it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1436975232, "post_id": 31434731, "comment_id": 50840236, "body": "@sawa: there is a reason, though. <code>any?</code> here will short-circuit."}, {"owner": {"reputation": 3466, "user_id": 826614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/935a0a598738883b4af59a73335a7aa0?s=128&d=identicon&r=PG", "display_name": "gaussblurinc", "link": "https://stackoverflow.com/users/826614/gaussblurinc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1436975235, "post_id": 31434731, "comment_id": 50840240, "body": "@SergioTulentsev, you are right, but <code>all?</code> consumes <code>O(n)</code> iterations everytime, while upper bound for <code>any?</code> is <code>O(n)</code> in bad cases. but, of course, it doesn&#39;t matter for small amount of data. And, of course, <code>(x and y) == not (not x or not y)</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1436975480, "post_id": 31434731, "comment_id": 50840417, "body": "@SergioTulentsev In terms of short-circuit, it does not make difference. <code>all?</code> short-circuits when the block evaluates to <code>false</code>, and <code>any?</code> does when the block evaluates to <code>true</code>. And since the block for the latter is the negation of that of the former, they will short-circuit on precisely the same examples."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1436975529, "post_id": 31434731, "comment_id": 50840467, "body": "@sawa: indeed, my bad."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 3466, "user_id": 826614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/935a0a598738883b4af59a73335a7aa0?s=128&d=identicon&r=PG", "display_name": "gaussblurinc", "link": "https://stackoverflow.com/users/826614/gaussblurinc"}, "edited": false, "score": 2, "creation_date": 1436975659, "post_id": 31434731, "comment_id": 50840574, "body": "@gaussblurinc: sawa reminds us that <code>all?</code> short-circuits too :)"}, {"owner": {"reputation": 397, "user_id": 4974679, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8190b2ed4d78a5845c3a4b0cb3fb7d36?s=128&d=identicon&r=PG&f=1", "display_name": "Arwa", "link": "https://stackoverflow.com/users/4974679/arwa"}, "reply_to_user": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "edited": false, "score": 0, "creation_date": 1436975850, "post_id": 31434731, "comment_id": 50840707, "body": "@JeffPrice I added an example."}, {"owner": {"reputation": 3466, "user_id": 826614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/935a0a598738883b4af59a73335a7aa0?s=128&d=identicon&r=PG", "display_name": "gaussblurinc", "link": "https://stackoverflow.com/users/826614/gaussblurinc"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1436976084, "post_id": 31434731, "comment_id": 50840860, "body": "@SergioTulentsev, true, my fault :)"}], "answers": [{"comments": [{"owner": {"reputation": 3466, "user_id": 826614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/935a0a598738883b4af59a73335a7aa0?s=128&d=identicon&r=PG", "display_name": "gaussblurinc", "link": "https://stackoverflow.com/users/826614/gaussblurinc"}, "edited": false, "score": 1, "creation_date": 1436974483, "post_id": 31434783, "comment_id": 50839691, "body": "it doesn&#39;t work for special arrays. for example, array with one element"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 3466, "user_id": 826614, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/935a0a598738883b4af59a73335a7aa0?s=128&d=identicon&r=PG", "display_name": "gaussblurinc", "link": "https://stackoverflow.com/users/826614/gaussblurinc"}, "edited": false, "score": 1, "creation_date": 1436974545, "post_id": 31434783, "comment_id": 50839737, "body": "@gaussblurinc It does work. In that case, the result would be trivially <code>true</code>. Note that <code>[].all? # =&gt; true</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1436974624, "post_id": 31434783, "comment_id": 50839791, "body": "Usage of <code>all?</code> here is weird. &quot;all&quot; what?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1436974823, "post_id": 31434783, "comment_id": 50839941, "body": "@sawa: but <code>map</code> is responsible for preparing data for <code>all?</code> here."}], "tags": [], "owner": {"reputation": 24753, "user_id": 489765, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bdc5163fd78b041c9d4a405204c5ad9a?s=128&d=identicon&r=PG", "display_name": "aromero", "link": "https://stackoverflow.com/users/489765/aromero"}, "is_accepted": false, "score": -3, "last_activity_date": 1436977541, "last_edit_date": 1436977541, "creation_date": 1436974334, "answer_id": 31434783, "question_id": 31434731, "link": "https://stackoverflow.com/questions/31434731/ruby-check-if-all-objects-attribute-within-array-are-equal/31434783#31434783", "title": "Ruby: Check if all objects&#39; attribute within array are equal", "body": "<pre><code>array.map{|x| x.source == array[0].source}.all?\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 397, "user_id": 4974679, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8190b2ed4d78a5845c3a4b0cb3fb7d36?s=128&d=identicon&r=PG&f=1", "display_name": "Arwa", "link": "https://stackoverflow.com/users/4974679/arwa"}, "edited": false, "score": 0, "creation_date": 1436974995, "post_id": 31434819, "comment_id": 50840079, "body": "it gave &quot;wrong argument type String (expected Proc) (TypeError)&quot;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 397, "user_id": 4974679, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8190b2ed4d78a5845c3a4b0cb3fb7d36?s=128&d=identicon&r=PG&f=1", "display_name": "Arwa", "link": "https://stackoverflow.com/users/4974679/arwa"}, "edited": false, "score": 2, "creation_date": 1436975087, "post_id": 31434819, "comment_id": 50840154, "body": "@arwa: must be you messed up with replicating this line. If your elements have method <code>source</code>, it should work"}, {"owner": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "edited": false, "score": 1, "creation_date": 1436975224, "post_id": 31434819, "comment_id": 50840230, "body": "This works for me, my guess is his clone object is different than we think it is and this is causing his failure. Instead of map(&amp;:source) it might need to be map{|x| x[:source]} or something similar."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1436975054, "last_edit_date": 1436975054, "creation_date": 1436974447, "answer_id": 31434819, "question_id": 31434731, "link": "https://stackoverflow.com/questions/31434731/ruby-check-if-all-objects-attribute-within-array-are-equal/31434819#31434819", "title": "Ruby: Check if all objects&#39; attribute within array are equal", "body": "<pre><code>array.map(&amp;:source).uniq.length == 1\n</code></pre>\n\n<p>or</p>\n\n<pre><code>array.group_by(&amp;:source).length == 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1436985544, "creation_date": 1436985544, "answer_id": 31438473, "question_id": 31434731, "link": "https://stackoverflow.com/questions/31434731/ruby-check-if-all-objects-attribute-within-array-are-equal/31438473#31438473", "title": "Ruby: Check if all objects&#39; attribute within array are equal", "body": "<pre><code>arr.uniq(&amp;:source).size == 1\n</code></pre>\n\n<p>If there is no accessor for <code>@source</code>:</p>\n\n<pre><code>arr.uniq { |e| e.instance_variable_get(:@source) }.size == 1\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 4974679, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8190b2ed4d78a5845c3a4b0cb3fb7d36?s=128&d=identicon&r=PG&f=1", "display_name": "Arwa", "link": "https://stackoverflow.com/users/4974679/arwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1298, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1436985544, "creation_date": 1436974193, "last_edit_date": 1436975516, "question_id": 31434731, "link": "https://stackoverflow.com/questions/31434731/ruby-check-if-all-objects-attribute-within-array-are-equal", "title": "Ruby: Check if all objects&#39; attribute within array are equal", "body": "<p>I have an array which contain objects. I would like to check if all elements (objects) within the array have similar attribute value. </p>\n\n<p>So, if we have the following array</p>\n\n<pre><code>array = [clone1, clone2, clone3]\n</code></pre>\n\n<p>clone1, clone2, and clone3 are objects of class clone. They contain an attribute called \"source\". I want to check if clone1, clone2, and clone3 have the same \"source\" value.</p>\n\n<p>this is an example of clone object</p>\n\n<pre><code>#&lt;CloneTool:0x007ff968a2f7b0 @nline=[\"10\"], @sim=[\"100\"], @ds=[\"..\"], @dstart=[\"..\"], @dend=[\"..\"], @hs=[\"..\"], @hstart=[\"..\"], @hend=[\"..\"]&gt;\n</code></pre>\n\n<p>So I want to check if array has equal value for @ds.</p>\n\n<p>Any thought? </p>\n"}, {"tags": ["ruby", "rspec", "rspec2"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 1540208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2QDv1.jpg?s=128&g=1", "display_name": "kaushikv", "link": "https://stackoverflow.com/users/1540208/kaushikv"}, "edited": false, "score": 0, "creation_date": 1436974434, "post_id": 31434752, "comment_id": 50839651, "body": "That&#39;s exactly what I was looking for. Thanks. Can&#39;t upvote your answer because of low reputation."}], "tags": [], "owner": {"reputation": 4530, "user_id": 3259320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a84c55be5441370dbd6273169048c6?s=128&d=identicon&r=PG", "display_name": "Rob Wise", "link": "https://stackoverflow.com/users/3259320/rob-wise"}, "is_accepted": true, "score": 9, "last_activity_date": 1436974248, "creation_date": 1436974248, "answer_id": 31434752, "question_id": 31434372, "link": "https://stackoverflow.com/questions/31434372/how-to-write-a-rspec-test-to-compare-a-string-with-its-expected-substring/31434752#31434752", "title": "How to write a RSpec test to compare a string with its expected substring?", "body": "<p>This is where you would use the <code>include</code> matcher (<a href=\"https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/include-matcher\" rel=\"noreferrer\">documentation</a>).</p>\n\n<pre><code>context 'test #EnvironmentFile= method' do\n\n  it 'compares the command generated with the expected command' do\n\n    knife = EnvironmentFromFile.new(@knife_cfg_file)\n\n    knife.environment_file=(@environment_file)\n\n    expect(knife.chef_cmd_to_s).to include(\"knife environment from file MySampleEnvironment.json --config 'knife.rb'\")\n\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 1540208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/2QDv1.jpg?s=128&g=1", "display_name": "kaushikv", "link": "https://stackoverflow.com/users/1540208/kaushikv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2619, "favorite_count": 1, "accepted_answer_id": 31434752, "answer_count": 1, "score": 5, "last_activity_date": 1436974248, "creation_date": 1436973358, "last_edit_date": 1436973586, "question_id": 31434372, "link": "https://stackoverflow.com/questions/31434372/how-to-write-a-rspec-test-to-compare-a-string-with-its-expected-substring", "title": "How to write a RSpec test to compare a string with its expected substring?", "body": "<p>I have a RSpec test like this: </p>\n\n<pre><code>context 'test #EnvironmentFile= method' do\n\n  it 'compares the command generated with the expected command' do\n\n    knife = EnvironmentFromFile.new(@knife_cfg_file)\n\n    knife.environment_file=(@environment_file)\n\n    expect(knife.chef_cmd_to_s).to eql(\"C:/blah/blah/bin/knife environment from file MySampleEnvironment.json --config 'knife.rb'\")\n\n  end\nend\n</code></pre>\n\n<p>Now, to avoid platform dependency, the expected message within the eql() should be a substring without the initial C:/blah/blah/bin/ part. </p>\n\n<p>My expected message should be \"knife environment from file MySampleEnvironment.json --config 'knife.rb'\"</p>\n\n<p>Which should match with the actual message returned from knife.chef_cmd_to_s method:\n\"C:/blah/blah/bin/knife environment from file MySampleEnvironment.json --config 'knife.rb'\"</p>\n\n<p>How do I do that? What Rspec matcher is used for this?</p>\n"}, {"tags": ["ruby", "multithreading", "telnet", "eventmachine"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436981537, "post_id": 31434197, "comment_id": 50844143, "body": "It sounds like you&#39;re trying to reinvent a wheel. Have you looked at <a href=\"https://en.wikipedia.org/wiki/Puppet_(software)\" rel=\"nofollow noreferrer\">Puppet or similar solutions</a>? Discussing those is off-topic on Stack Overflow and such a discussion or further information should occur on one of the sibling sites, such as <a href=\"http://serverfault.com/search?q=puppet&amp;s=6a2573db-1cbd-478d-8e89-8a9d03ad8cd0\">serverfault.com/&hellip;</a>."}, {"owner": {"reputation": 175, "user_id": 1617388, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd8ffe0b429e4cc2f4919f40ece4b40c?s=128&d=identicon&r=PG", "display_name": "hackerkatt", "link": "https://stackoverflow.com/users/1617388/hackerkatt"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436981674, "post_id": 31434197, "comment_id": 50844223, "body": "I certainly don&#39;t want to reinvent the wheel.  I have heard of Puppet.  Never used it and wasn&#39;t aware of it&#39;s use.  I&#39;ll take a look...  Thank you"}, {"owner": {"reputation": 175, "user_id": 1617388, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd8ffe0b429e4cc2f4919f40ece4b40c?s=128&d=identicon&r=PG", "display_name": "hackerkatt", "link": "https://stackoverflow.com/users/1617388/hackerkatt"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436983123, "post_id": 31434197, "comment_id": 50845109, "body": "I&#39;ve taken a quick look at puppet and it does seem pretty heavy for my needs.  These are not cisco devices but login behaves line one.  SSH isn&#39;t an option.  I&#39;m simply trying to hasten the time it&#39;ll take to send a few commands to each (8000+) devices."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436984355, "post_id": 31434197, "comment_id": 50845841, "body": "We do similar things where I work. There are a continuing list of issues that&#39;ll crop up as you try to talk to devices with command-lines. While existing tools might seem overkill, they&#39;re usually that way because they&#39;ve run into the dragons waiting for you and have coded in solutions. You don&#39;t have to use the full feature set, only enough to satisfy the need. I&#39;d recommend looking at chef and the others too as they all have their niches. Good luck."}, {"owner": {"reputation": 175, "user_id": 1617388, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd8ffe0b429e4cc2f4919f40ece4b40c?s=128&d=identicon&r=PG", "display_name": "hackerkatt", "link": "https://stackoverflow.com/users/1617388/hackerkatt"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436987131, "post_id": 31434197, "comment_id": 50847411, "body": "I was hoping to leverage what I already know, or mostly know vs having to install and learn an entirely new infrastructure.  This project I&#39;m working on isn&#39;t going to be an ongoing thing.  I just need a quick and dirty approach.  I thank you for your input..."}], "owner": {"reputation": 175, "user_id": 1617388, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd8ffe0b429e4cc2f4919f40ece4b40c?s=128&d=identicon&r=PG", "display_name": "hackerkatt", "link": "https://stackoverflow.com/users/1617388/hackerkatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1436981385, "creation_date": 1436972899, "last_edit_date": 1436981385, "question_id": 31434197, "link": "https://stackoverflow.com/questions/31434197/telnet-eventmachine-theaded", "title": "Telnet - EventMachine, Theaded?", "body": "<p>I have a project where I need to update multiple thousands of devices with a series of commands via telnet. The commands will not brick or cause the device to go offline (login, apply commands, logout).</p>\n\n<p>I use snmp4em extensively where SNMP is applicable. A blocking approach here would take forever.</p>\n\n<p>I am not well versed with Threading, EventMachine (at its core), etc., to attempt to approach this from scratch. </p>\n\n<p>I have been looking at em-simple_telnet.  It appears to have the functionality I need, my problem is the error coding.  If a host isn't reachable or fails login, it throws an error at the top-most level of the code (<code>EventMachine.run do</code>), which I've found difficult to <code>rescue</code>. </p>\n\n<p>Maybe I'm having a blond-moment but I'm not seeing the solution.  The following code works as long as there is no failure. </p>\n\n<pre><code>require 'em-simple_telnet'\n\nFile.delete('/tmp/telnetDebug.log') if File.exists?('/tmp/telnetDebug.log')\n\nbegin\n  EventMachine.run do\n\n    ['device1', 'device2_will_fail', 'device3'].each do |h|\n      opts = {\n        host: h,\n        username: \"user\",\n        password: \"pass\",\n        binmode: true,\n        telnetmode: true,\n        login_prompt: /[$%#:&gt;]\\s\\z/n,\n        password_prompt: /[$%#:&gt;]\\s\\z/n,\n        prompt: /[$%#:&gt;]\\s?\\z/n,\n        output_log: \"/tmp/telnetDebug.log\",\n      }\n\n      EM::P::SimpleTelnet.new(opts) do |host|\n        # already logged in\n        puts \"Connected\"\n        puts host.cmd('cmd1') { |c| puts c }\n        puts host.cmd('cmd2') { |c| puts c }\n        puts host.cmd(\"exit\") { |c| puts c }\n      end\n    end\n\n  end\nrescue Exception =&gt; e\n  puts e.inspect\nend\n\n\nme@WorkStation:~/ruby_workspace/modem_updates$ ruby modem_update_em.rb\n#&lt;EventMachine::Protocols::SimpleTelnet::LoginFailed: Timed out while expecting some kind of prompt.&gt;\n</code></pre>\n\n<p>I'm reaching out to those that would have experience in this area and could offer some possible solutions to my problem.  Can someone offer a suggestion as to how to recover from error (shown below)?  Or perhaps another approach?  Your expertise is most appreciated.</p>\n"}, {"tags": ["ruby", "struct", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "edited": false, "score": 0, "creation_date": 1436988381, "post_id": 31435296, "comment_id": 50848105, "body": "I tried your approach with and without quotes around Struct, but neither works."}], "tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": false, "score": 0, "last_activity_date": 1436975629, "creation_date": 1436975629, "answer_id": 31435296, "question_id": 31434125, "link": "https://stackoverflow.com/questions/31434125/using-rspec-to-receive-methods-created-on-the-fly-for-ruby-struct/31435296#31435296", "title": "Using RSpec to receive methods created on the fly for Ruby struct", "body": "<p>You can specify a hash as a second argument to <code>instance_double</code>.  So instead of: </p>\n\n<pre><code>let(:msg) { instance_double(Struct) }\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>let(:msg) { instance_double(Struct, body: '') }\n</code></pre>\n\n<p>Not sure whether you will have top put Struct in quotes:</p>\n\n<pre><code>let(:msg) { instance_double(\"Struct\", body: '') }\n</code></pre>\n\n<p>This is all based on this link: \n<a href=\"https://relishapp.com/rspec/rspec-mocks/docs/verifying-doubles/dynamic-classes\" rel=\"nofollow\">https://relishapp.com/rspec/rspec-mocks/docs/verifying-doubles/dynamic-classes</a>\nwhich seems to solve the same kind of issue</p>\n"}], "owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436975629, "creation_date": 1436972729, "last_edit_date": 1436973046, "question_id": 31434125, "link": "https://stackoverflow.com/questions/31434125/using-rspec-to-receive-methods-created-on-the-fly-for-ruby-struct", "title": "Using RSpec to receive methods created on the fly for Ruby struct", "body": "<p>I would like to know how to use RSpec to stub a method created on the fly for a Ruby struct.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>def test_method\n  queue.poll do |message|\n    puts message.body\n  end\nend\n</code></pre>\n\n<p><code>message</code> is a Struct.  Method <code>:body</code> is of course not built into the Ruby struct class, but is created on the fly as part of an external library.  I'd like to know how to stub the call to <code>:body</code>.</p>\n\n<p>My RSpec tests look like this:</p>\n\n<pre><code>let(:poller) { instance_double(ExternalLibrary::QueuePoller) }\nlet(:msg) { instance_double(Struct) }\n\nbefore do\n  allow(ExternalLibrary::QueuePoller).to receive(:new).and_return(poller)\n  allow(poller).to receive(:poll).and_yield(msg)\nend\n\nit 'polls the queue' do\n  allow(msg).to receive(:body)\n  described_class.new.test_method\nend\n</code></pre>\n\n<p>But I have the following error:</p>\n\n<pre><code>  1) polls the queue\n     Failure/Error: allow(msg).to receive(:body)\n       Struct does not implement: body\n</code></pre>\n\n<p>How can I run the tests properly?  Thanks for your help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "upload", "alert"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1436973028, "post_id": 31434121, "comment_id": 50838657, "body": "because you redirect (equivalent of a <code>return</code>) before setting your <code>flash[:alert]</code>"}, {"owner": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1436973154, "post_id": 31434121, "comment_id": 50838748, "body": "i switched them around and it still doesn&#39;t work?"}, {"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1436973290, "post_id": 31434121, "comment_id": 50838832, "body": "I don&#39;t think <code>redirect_to</code> will return and stop executing rest of the lines after it.  Do you have <code>flash[:alert]</code> in your picture&#39;s <code>index.html.erb</code>.  The form you&#39;re trying to display <code>flash[:alert]</code> in is not rendered when picture saves successfully.  You should check your index file."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "edited": false, "score": 0, "creation_date": 1436973393, "post_id": 31434302, "comment_id": 50838918, "body": "Thanks! it shows up just as text on the page though. I want a popup box thing though...any idea? thanks again kind one~"}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "reply_to_user": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "edited": false, "score": 0, "creation_date": 1436973529, "post_id": 31434302, "comment_id": 50839016, "body": "Do you need a alert box or just a box around it?"}], "tags": [], "owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "is_accepted": true, "score": 1, "last_activity_date": 1436973155, "creation_date": 1436973155, "answer_id": 31434302, "question_id": 31434121, "link": "https://stackoverflow.com/questions/31434121/why-isnt-my-flashalert-working/31434302#31434302", "title": "Why isn&#39;t my flash[:alert] working?", "body": "<p>Your create method should be like this:</p>\n\n<pre><code>def create\n    @picture = Picture.new(picture_params)\n    if @picture.save\n      flash[:alert] = \"Upload successful!\"\n      redirect_to pictures_url\n    else\n      render :new\n    end\n  end\n</code></pre>\n\n<p>The redirect should be after the flash. You can also do it like this:</p>\n\n<pre><code>redirect_to pictures_url, alert: \"Upload successful!\"\n</code></pre>\n\n<p>And the <code>div</code> you are creating for flash message should be on the index page of pictures i.e., the page you are redirecting to and not in the form itself.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 31434302, "answer_count": 1, "score": 0, "last_activity_date": 1436973155, "creation_date": 1436972716, "question_id": 31434121, "link": "https://stackoverflow.com/questions/31434121/why-isnt-my-flashalert-working", "title": "Why isn&#39;t my flash[:alert] working?", "body": "<p>after my user uploads a file and hits \"submit\" i would like to alert them that the upload was successful. But nothing happens when I do.</p>\n\n<p>Here is in the controller:</p>\n\n<pre><code>def create\n    # make a new picture with what picture_params returns (which is a method we're calling)\n    @picture = Picture.new(picture_params)\n    if @picture.save\n      # if the save for the picture was successful, go to index.html.erb\n      redirect_to pictures_url\n      flash[:alert] = \"Upload successful!\"\n    else\n      # otherwise render the view associated with the action :new (i.e. new.html.erb)\n      render :new\n    end\n  end\n</code></pre>\n\n<p>Form:</p>\n\n<pre><code>&lt;container&gt;\n&lt;center&gt;\n&lt;%= form_for @picture do |f| %&gt;\n  &lt;input type=\"file\" multiple&gt;  &lt;%= f.file_field :picture %&gt;\n  &lt;p&gt;Drag your files here or click in this area.&lt;/p&gt;\n  &lt;button type=\"submit\"&gt; &lt;%= f.submit \"Save\" %&gt; Upload &lt;/button&gt;\n  &lt;% if flash[:alert] %&gt;\n    &lt;div class=\"alert\"&gt;&lt;%= flash[:alert] %&gt;&lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/form&gt;\n&lt;% end %&gt;\n&lt;/container&gt;\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 383, "user_id": 4937439, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZmHu9gy1S7c/AAAAAAAAAAI/AAAAAAAADpE/tKoIiG2kniU/photo.jpg?sz=128", "display_name": "Sandeep Tuniki", "link": "https://stackoverflow.com/users/4937439/sandeep-tuniki"}, "is_accepted": true, "score": 1, "last_activity_date": 1436972741, "creation_date": 1436972741, "answer_id": 31434129, "question_id": 31433983, "link": "https://stackoverflow.com/questions/31433983/is-this-pattern-special-expression-d/31434129#31434129", "title": "Is this pattern special expression: &quot;/d$/&quot;...?", "body": "<p>The <strong>$</strong> simply marks the end of line. What the special expression <strong>d$</strong> says to the Ruby interpreter is \"<em>Go ahead and match all lines which have a <strong>d</strong> at the end</em>\". In your output, both words have <strong>d</strong> at the end. So they are getting matched and being returned.</p>\n"}, {"tags": [], "owner": {"reputation": 1169, "user_id": 3286645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EKAp2.png?s=128&g=1", "display_name": "nextstep", "link": "https://stackoverflow.com/users/3286645/nextstep"}, "is_accepted": false, "score": 0, "last_activity_date": 1436972903, "creation_date": 1436972903, "answer_id": 31434201, "question_id": 31433983, "link": "https://stackoverflow.com/questions/31433983/is-this-pattern-special-expression-d/31434201#31434201", "title": "Is this pattern special expression: &quot;/d$/&quot;...?", "body": "<p>The regex you're using: <code>/d$/</code>, searches test.txt and matches lines ending in <code>d</code>.</p>\n\n<p>It outputs the results(matches).  Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1436972998, "post_id": 31434207, "comment_id": 50838633, "body": "Technically, <code>$</code> doesn&#39;t mean <i>that</i> :)"}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1436973308, "post_id": 31434207, "comment_id": 50838851, "body": "The true meaning is &quot;all d\\n(s)&quot; or all lines that are fhisished by d"}], "tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": false, "score": 0, "last_activity_date": 1436973746, "last_edit_date": 1436973746, "creation_date": 1436972914, "answer_id": 31434207, "question_id": 31433983, "link": "https://stackoverflow.com/questions/31433983/is-this-pattern-special-expression-d/31434207#31434207", "title": "Is this pattern special expression: &quot;/d$/&quot;...?", "body": "<p>Because that regular expresion search all lines that finish on letter d\nat the end of line.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>The true meaning is \"all d\\n(s)\" or all lines that are finished by d. </p>\n\n<p>If you want to learn or just create a regex I would recommend to you try rubular</p>\n\n<p><a href=\"http://rubular.com/r/FFl26kHCNO\" rel=\"nofollow\">http://rubular.com/r/FFl26kHCNO</a></p>\n"}], "owner": {"reputation": 3, "user_id": 5049137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78eafb333dfa393eb193c1f077615928?s=128&d=identicon&r=PG&f=1", "display_name": "Surcae", "link": "https://stackoverflow.com/users/5049137/surcae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 31434129, "answer_count": 3, "score": -4, "last_activity_date": 1436973746, "creation_date": 1436972371, "last_edit_date": 1436972940, "question_id": 31433983, "link": "https://stackoverflow.com/questions/31433983/is-this-pattern-special-expression-d", "title": "Is this pattern special expression: &quot;/d$/&quot;...?", "body": "<p>I met below pattern while i study regular-expression on Ruby.</p>\n\n<p>First, i let you a file for replying.</p>\n\n<p><strong>test.txt</strong></p>\n\n<pre><code>second\nthird\nnot me\n</code></pre>\n\n<p>And this is main file.</p>\n\n<p><strong>regular_expression_test.rb</strong></p>\n\n<pre><code>File.open(\"test.txt\").grep(/d$/) do |line|\n  print line\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>second\nthird\n</code></pre>\n\n<p>Why this example result like Output...?</p>\n"}, {"tags": ["ruby", "regex", "ruby-on-rails-4", "html-parsing"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 5, "creation_date": 1436972768, "post_id": 31433890, "comment_id": 50838469, "body": "Don&#39;t parse HTML with a regex, use Nokogiri instead. This could help: <a href=\"http://stackoverflow.com/a/15120016/477037\">stackoverflow.com/a/15120016/477037</a>"}, {"owner": {"reputation": 1169, "user_id": 3286645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EKAp2.png?s=128&g=1", "display_name": "nextstep", "link": "https://stackoverflow.com/users/3286645/nextstep"}, "edited": false, "score": 1, "creation_date": 1436973132, "post_id": 31433890, "comment_id": 50838733, "body": "this might also help, <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\" title=\"regex match open tags except xhtml self contained tags\">stackoverflow.com/questions/1732348/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6743, "user_id": 3647002, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/raqLI.png?s=128&g=1", "display_name": "Gayan Weerakutti", "link": "https://stackoverflow.com/users/3647002/gayan-weerakutti"}, "edited": false, "score": 0, "creation_date": 1514096888, "post_id": 31434614, "comment_id": 82886325, "body": "Will this be faster compared to Nokogiri?"}], "tags": [], "owner": {"reputation": 101, "user_id": 5054291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c692d1e955874d676b6e62797b61995?s=128&d=identicon&r=PG&f=1", "display_name": "whitegoogles", "link": "https://stackoverflow.com/users/5054291/whitegoogles"}, "is_accepted": true, "score": 6, "last_activity_date": 1436977167, "last_edit_date": 1436977167, "creation_date": 1436973945, "answer_id": 31434614, "question_id": 31433890, "link": "https://stackoverflow.com/questions/31433890/regex-to-scan-html-and-return-the-url-from-a-meta-refresh-tag/31434614#31434614", "title": "regex to scan html and return the URL from a meta refresh tag", "body": "<p>Try this out:</p>\n\n<pre><code> $url = response.body.scan(/(CONTENT|content)=[\"']0;\\s?URL=(.*?)([\"']\\s*\\/?&gt;)/)\n</code></pre>\n"}], "owner": {"reputation": 754, "user_id": 387221, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/868777fb97252d14faf7080728996988?s=128&d=identicon&r=PG", "display_name": "Sharethefun", "link": "https://stackoverflow.com/users/387221/sharethefun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 31434614, "answer_count": 1, "score": 0, "last_activity_date": 1436977167, "creation_date": 1436972130, "last_edit_date": 1436972378, "question_id": 31433890, "link": "https://stackoverflow.com/questions/31433890/regex-to-scan-html-and-return-the-url-from-a-meta-refresh-tag", "title": "regex to scan html and return the URL from a meta refresh tag", "body": "<p>I'm trying to scan html content to find if the source code includes a meta refresh tag in order to get the URL.</p>\n\n<p>Here are some of the cases of meta http-equiv=\"refresh\" tags I've seen</p>\n\n<pre><code>&lt;META HTTP-EQUIV=\"refresh\" CONTENT=\"0;URL=https://example.de/\"&gt;\n&lt;META HTTP-EQUIV=\"refresh\" CONTENT=\"0; URL=https://example.com/test\"&gt;\n&lt;meta http-equiv=\"refresh\" content='0;URL=/test' /&gt;\n&lt;meta http-equiv='refresh' content='0; URL=/test' /&gt;\n</code></pre>\n\n<p>Here is he what I have come up with</p>\n\n<pre><code>$url = response.body.scan(/(CONTENT=\"0;URL=)(.*?)(\"&gt;)/)\n</code></pre>\n\n<p>/(CONTENT=\"0;URL=)(.*?)(\">)/   will work fine for the first instance without the space between ; and URL not for anything else.</p>\n\n<p>Can someone help me with a regex that will work on all 4 scenarios?</p>\n"}, {"tags": ["ruby", "yield"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 1827234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4901a2ccc2da22d7ca8d5729f4f0d0?s=128&d=identicon&r=PG", "display_name": "tuexss", "link": "https://stackoverflow.com/users/1827234/tuexss"}, "edited": false, "score": 0, "creation_date": 1437036331, "post_id": 31434722, "comment_id": 50866731, "body": "thanks for the answer, helping a lot. could you elaborate on the first bullet point please? on googling lexical scope in ruby, many sites tell me, that ruby does not have that."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 101, "user_id": 1827234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4901a2ccc2da22d7ca8d5729f4f0d0?s=128&d=identicon&r=PG", "display_name": "tuexss", "link": "https://stackoverflow.com/users/1827234/tuexss"}, "edited": false, "score": 0, "creation_date": 1437047793, "post_id": 31434722, "comment_id": 50874097, "body": "An example will be <code>foo = 2; [:a].each{p foo}</code>."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1436974170, "creation_date": 1436974170, "answer_id": 31434722, "question_id": 31433765, "link": "https://stackoverflow.com/questions/31433765/in-which-context-are-blocks-executed-that-are-passed-to-a-method-in-ruby/31434722#31434722", "title": "In which context are blocks executed that are passed to a method in ruby?", "body": "<ul>\n<li>Local variables follow lexical scope.</li>\n<li>Block variables have scope within the block.</li>\n<li>Global variables have access globally.</li>\n<li>Everything else depends on the method that takes the block. For example, <code>instance_eval</code> evaluates the block within the context of the receiver. <code>class_eval</code> evaluates the block within the context of the class of the receiver.</li>\n</ul>\n"}], "owner": {"reputation": 101, "user_id": 1827234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc4901a2ccc2da22d7ca8d5729f4f0d0?s=128&d=identicon&r=PG", "display_name": "tuexss", "link": "https://stackoverflow.com/users/1827234/tuexss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 31434722, "answer_count": 1, "score": 2, "last_activity_date": 1436974170, "creation_date": 1436971836, "question_id": 31433765, "link": "https://stackoverflow.com/questions/31433765/in-which-context-are-blocks-executed-that-are-passed-to-a-method-in-ruby", "title": "In which context are blocks executed that are passed to a method in ruby?", "body": "<p>I learned that you can pass a whole block of code to a method in ruby. This block can be executed from within the method. My question is: Which context will it have? Will it be treated just like other statements in the receiving method, or are they treated like statements in the caller method? Or maybe there is a special third way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "attributes"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436970325, "post_id": 31433138, "comment_id": 50836661, "body": "Did you <code>run rake db:migrate</code> after changing the <b><i>migration</i></b> file?"}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436970419, "post_id": 31433138, "comment_id": 50836731, "body": "I did and this is what I got irb(main):002:0&gt; rake db:migrate NameError: undefined local variable or method `migrate&#39; for main:Object"}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436970480, "post_id": 31433138, "comment_id": 50836781, "body": "well then I exited the ruby console and did it just in the terminal for the directory of my app and then when I went back to the console and did River.all nothing had changed"}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 0, "creation_date": 1436970760, "post_id": 31433138, "comment_id": 50836997, "body": "You will need drop your database or run rollback in order to re run your modified migration. rake db:migrate:up VERSION=$TIMESTAMP, Make sure to drop table on your migration, doing a down method."}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1436970878, "post_id": 31433138, "comment_id": 50837076, "body": "What do you mean exactly?"}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 0, "creation_date": 1436971281, "post_id": 31433138, "comment_id": 50837390, "body": "If you ran rake db:migrate and after your made the change , rails won&#39;t run that migration again, so if you modify that file rails doesn&#39;t run that migration again. You need to rollback that migration, or drop your database (if you are on dev). If you are in production you sould create a new migration that modified the schema."}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1436971918, "post_id": 31433138, "comment_id": 50837867, "body": "how do you create a new migration to modify the schema?"}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 0, "creation_date": 1436972183, "post_id": 31433138, "comment_id": 50838051, "body": "Create a new migration and change that table look at <a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html#changing-tables\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1436971622, "post_id": 31433365, "comment_id": 50837643, "body": "Can I just change things in schema.rb?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1436971827, "post_id": 31433365, "comment_id": 50837803, "body": "No.  schema.rb is written to by the system and is really just a form of automatically generated documentation.  All schema changes need to be done via migrations."}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1436972729, "post_id": 31433365, "comment_id": 50838438, "body": "I did that and now when I type in River.all it says no such table found"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1436973791, "post_id": 31433365, "comment_id": 50839185, "body": "It sounds like you have run the migration down, to get rid of the table, but haven&#39;t run it up again.  Did you do the second part of my answer, <code>rake db:migrate</code>?  Did it successfully complete?"}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1436975962, "post_id": 31433365, "comment_id": 50840781, "body": "I tried rake db:migrate and it said == 20140609150804 CreateRivers: migrating ===================================== -- create_table(:rivers) rake aborted! StandardError: An error has occurred, this and all later migrations canceled:"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1436976434, "post_id": 31433365, "comment_id": 50841107, "body": "So it hasn&#39;t successfully completed.  Try running it again with <code>rake db:migrate --trace</code> and it should give you a proper error stack trace which will help diagnose the problem."}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1436989043, "post_id": 31433365, "comment_id": 50848455, "body": "result of that: Jennys-MacBook-Pro:dashboard jennymandl$ rake db:migrate --trace ** Invoke db:migrate (first_time) ** Invoke environment (first_time) ** Execute environment ** Invoke db:load_config (first_time) ** Execute db:load_config ** Execute db:migrate == 20140609150804 CreateRivers: migrating ===================================== -- create_table(:rivers) rake aborted! StandardError: An error has occurred, this and all later migrations canceled: undefined method <code>write&#39; for :display:Symbol&#47;Users&#47;jennymandl&#47;Desktop&#47;dashboard&#47;db&#47;migrat&zwnj;&#8203;e&#47;20140609150804_cre&zwnj;&#8203;ate_rivers.rb:5:in </code>display&#39;"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1437035237, "post_id": 31433365, "comment_id": 50866049, "body": "Please can you edit your question and add the entire stack trace for the error?  I don&#39;t understand that specific error listed there and i&#39;m hoping that the lower lines in the stack might shed some light."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1437035272, "post_id": 31433365, "comment_id": 50866073, "body": "Also, try deleting your database, creating it again and then running the migrations from scratch."}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1437146512, "post_id": 31433365, "comment_id": 50923725, "body": "it&#39;s too long for a comment so I will edit the question and add it"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1437146606, "post_id": 31433365, "comment_id": 50923790, "body": "Yep, that&#39;s what i asked you to do :)"}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1437146734, "post_id": 31433365, "comment_id": 50923874, "body": "any chance we could skype?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1437146740, "post_id": 31433365, "comment_id": 50923877, "body": "Did you try deleting the database, creating it again and then doing <code>rake db:migrate</code>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1437147806, "post_id": 31433365, "comment_id": 50924557, "body": "Do <code>rake db:create</code>. Can&#39;t skype, sorry."}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": true, "score": 0, "last_activity_date": 1436972061, "last_edit_date": 1436972061, "creation_date": 1436970866, "answer_id": 31433365, "question_id": 31433138, "link": "https://stackoverflow.com/questions/31433138/changing-ruby-database-tables/31433365#31433365", "title": "Changing Ruby Database Tables", "body": "<p>If you've changed a migration after running it you will need to undo that migration then run it again.  </p>\n\n<p><a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html#rolling_back\" rel=\"nofollow\">http://edgeguides.rubyonrails.org/active_record_migrations.html#rolling_back</a></p>\n\n<p>Please read through this whole page as it is very instructive.</p>\n\n<p>To roll back your migration, and run it again, do </p>\n\n<pre><code>rake db:migrate:down VERSION=12123234125\nrake db:migrate\n</code></pre>\n\n<p>EDIT:  added info on how to actually down and up a migration, and also updated the link as it was actually from a Rails 3 version.</p>\n"}], "owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 31433365, "answer_count": 1, "score": 0, "last_activity_date": 1437146653, "creation_date": 1436970250, "last_edit_date": 1437146653, "question_id": 31433138, "link": "https://stackoverflow.com/questions/31433138/changing-ruby-database-tables", "title": "Changing Ruby Database Tables", "body": "<p>When I go in the rails console and do the command River.all to see my database, it still has the attributes from the first block of code and not the second one where I have updated what attributes each river has. How do I fix this?</p>\n\n<p>Original db/migrate/12123234125_create_rivers :</p>\n\n<pre><code>class CreateRivers &lt; ActiveRecord::Migration\n  def change\n    create_table :rivers do |t|\n      t.date :date\n      t.decimal :level\n      t.integer :river_id\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Changed Version:</p>\n\n<pre><code>class CreateRivers &lt; ActiveRecord::Migration\n  def change\n    create_table :rivers do |t|\n      t.string :river_id\n      t.string :display\n      t.integer :river_id\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Also I  have this in my data_import.rake file</p>\n\n<pre><code> task rivers: :environment do\n\n doc = REXML::Document.new File.new(\"#{root_dir}/config/RiverStations.xml\")\n doc.elements.each(\"DEFINITIONS/STATIONS/STATION\") { |element| \n  river = River.create(river_id: element.attributes[\"ID\"], display: element.attributes[\"DISPLAY\"],  river_name: element.attributes[\"RIVER_NAME\"])\n}\n</code></pre>\n\n<p>Is it possible that this isn't loaded before I check or something?</p>\n\n<p>The error you asked for:</p>\n\n<pre><code>Jennys-MacBook-Pro:dashboard jennymandl$ rake db:migrate --trace\n** Invoke db:migrate (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Invoke db:load_config (first_time)\n** Execute db:load_config\n** Execute db:migrate\n== 20140609150804 CreateRivers: migrating =====================================\n-- create_table(:rivers)\nrake aborted!\nStandardError: An error has occurred, this and all later migrations canceled:\n\nundefined method `write' for :display:Symbol/Users/jennymandl/Desktop/dashboard/db/migrate/20140609150804_create_rivers.rb:5:in `display'\n/Users/jennymandl/Desktop/dashboard/db/migrate/20140609150804_create_rivers.rb:5:in `block in change'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/connection_adapters/abstract/schema_statements.rb:198:in `create_table'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:649:in `block in method_missing'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:621:in `block in say_with_time'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/benchmark.rb:281:in `measure'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:621:in `say_with_time'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:641:in `method_missing'\n/Users/jennymandl/Desktop/dashboard/db/migrate/20140609150804_create_rivers.rb:3:in `change'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:595:in `exec_migration'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:579:in `block (2 levels) in migrate'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/benchmark.rb:281:in `measure'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:578:in `block in migrate'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:294:in `with_connection'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:577:in `migrate'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:752:in `migrate'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:992:in `block in execute_migration_in_transaction'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:1038:in `block in ddl_transaction'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/connection_adapters/abstract/database_statements.rb:211:in `block in transaction'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/connection_adapters/abstract/database_statements.rb:219:in `within_new_transaction'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/connection_adapters/abstract/database_statements.rb:211:in `transaction'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/transactions.rb:208:in `transaction'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:1038:in `ddl_transaction'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:991:in `execute_migration_in_transaction'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:953:in `block in migrate'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:949:in `each'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:949:in `migrate'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:807:in `up'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/migration.rb:785:in `migrate'\n/Library/Ruby/Gems/2.0.0/gems/activerecord-4.1.1/lib/active_record/railties/databases.rake:34:in `block (2 levels) in &lt;top (required)&gt;'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/task.rb:240:in `call'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/task.rb:240:in `block in execute'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/task.rb:235:in `each'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/task.rb:235:in `execute'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/task.rb:179:in `block in invoke_with_call_chain'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/monitor.rb:211:in `mon_synchronize'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/task.rb:172:in `invoke_with_call_chain'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/task.rb:165:in `invoke'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/application.rb:150:in `invoke_task'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/application.rb:106:in `block (2 levels) in top_level'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/application.rb:106:in `each'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/application.rb:106:in `block in top_level'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/application.rb:115:in `run_with_threads'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/application.rb:100:in `top_level'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/application.rb:78:in `block in run'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/application.rb:176:in `standard_exception_handling'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/lib/rake/application.rb:75:in `run'\n/Library/Ruby/Gems/2.0.0/gems/rake-10.3.1/bin/rake:33:in `&lt;top (required)&gt;'\n/usr/bin/rake:23:in `load'\n/usr/bin/rake:23:in `&lt;main&gt;'\nTasks: TOP =&gt; db:migrate\nJennys-MacBook-Pro:dashboard jennymandl$ \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "string", "middleman"], "answers": [{"comments": [{"owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "edited": false, "score": 1, "creation_date": 1436970477, "post_id": 31432860, "comment_id": 50836780, "body": "<i>Maybe I&#39;ve missed something</i>, but it seems to be a valid answer. Downvoter, care to elaborate?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "edited": false, "score": 0, "creation_date": 1436970564, "post_id": 31432860, "comment_id": 50836836, "body": "@Himmators please be more specific"}], "tags": [], "owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "is_accepted": false, "score": 0, "last_activity_date": 1436970669, "last_edit_date": 1436970669, "creation_date": 1436969545, "answer_id": 31432860, "question_id": 31432828, "link": "https://stackoverflow.com/questions/31432828/merge-string-and-variable-as-argument/31432860#31432860", "title": "Merge string and variable as argument?", "body": "<p>Try interpolation using <code>\"#{}\"</code> as follows:</p>\n\n<pre><code>&lt;%= link_to f, '/dashboard', class: \"header__button #{classify(f)}\" %&gt;\n</code></pre>\n\n<p>Note that you need to be using double quotes <code>\"#{}\"</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "is_accepted": false, "score": 1, "last_activity_date": 1436969571, "creation_date": 1436969571, "answer_id": 31432869, "question_id": 31432828, "link": "https://stackoverflow.com/questions/31432828/merge-string-and-variable-as-argument/31432869#31432869", "title": "Merge string and variable as argument?", "body": "<p>Try concatenating the string and method:</p>\n\n<pre><code>&lt;%= link_to f, '/dashboard', class: 'header__button ' + classify(f) %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1436970406, "post_id": 31432925, "comment_id": 50836724, "body": "My version didn&#39;t work for the OP, not sure yours did :)"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 0, "last_activity_date": 1436969697, "creation_date": 1436969697, "answer_id": 31432925, "question_id": 31432828, "link": "https://stackoverflow.com/questions/31432828/merge-string-and-variable-as-argument/31432925#31432925", "title": "Merge string and variable as argument?", "body": "<p>Will do the trick</p>\n\n<pre><code>&lt;%= link_to f, '/dashboard', class: \"header__button #{classify(f)}\" %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66009, "user_id": 23368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ace1b52352e1260c6a42df36e36f356?s=128&d=identicon&r=PG", "display_name": "Daniel Rikowski", "link": "https://stackoverflow.com/users/23368/daniel-rikowski"}, "edited": false, "score": 0, "creation_date": 1436971140, "post_id": 31433363, "comment_id": 50837282, "body": "This is the most elegant solution for OP&#39;s special case. (i.e. concatenating CSS classes in a Rails tag helper)"}, {"owner": {"reputation": 66009, "user_id": 23368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ace1b52352e1260c6a42df36e36f356?s=128&d=identicon&r=PG", "display_name": "Daniel Rikowski", "link": "https://stackoverflow.com/users/23368/daniel-rikowski"}, "edited": false, "score": 1, "creation_date": 1436971363, "post_id": 31433363, "comment_id": 50837456, "body": "It actually is a documented feature: <a href=\"http://apidock.com/rails/ActionView/Helpers/TagHelper/tag\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionView/Helpers/TagHelper/tag</a> / <a href=\"http://apidock.com/rails/ActionView/Helpers/TagHelper/content_tag\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionView/Helpers/TagHelper/content_tag</a>"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1436971569, "last_edit_date": 1436971569, "creation_date": 1436970863, "answer_id": 31433363, "question_id": 31432828, "link": "https://stackoverflow.com/questions/31432828/merge-string-and-variable-as-argument/31433363#31433363", "title": "Merge string and variable as argument?", "body": "<p>You can simply pass an array:</p>\n\n<pre><code>&lt;%= link_to f, '/dashboard', class: ['header__button', classify(f)] %&gt;\n</code></pre>\n\n<p>The documentation for <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-tag\" rel=\"nofollow\"><code>tag</code></a> and <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag\" rel=\"nofollow\"><code>content_tag</code></a> contains an example showing this usage (<code>link_to</code> calls <code>content_tag</code> to construct the <code>&lt;a&gt;</code> tag).</p>\n"}], "owner": {"reputation": 12818, "user_id": 350080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8dbcaa49802612c858ebf97742639a4b?s=128&d=identicon&r=PG", "display_name": "Himmators", "link": "https://stackoverflow.com/users/350080/himmators"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 1, "accepted_answer_id": 31433363, "answer_count": 4, "score": -2, "last_activity_date": 1436971569, "creation_date": 1436969444, "last_edit_date": 1436970883, "question_id": 31432828, "link": "https://stackoverflow.com/questions/31432828/merge-string-and-variable-as-argument", "title": "Merge string and variable as argument?", "body": "<p>I want to pass the string <code>'header__button'</code> and the response from method <code>classify(f)</code> as the argument <code>class</code> to <code>link_to</code>.</p>\n\n<p>I tried</p>\n\n<pre><code>&lt;%= link_to f, '/dashboard', class: 'header__button' classify(f) %&gt;\n</code></pre>\n\n<p>but Ruby won't allow it. How can it be done?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "active-record-query"], "comments": [{"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 1, "creation_date": 1436969328, "post_id": 31432768, "comment_id": 50835875, "body": "You&#39;re writing the output of <code>each</code> with <code>&lt;%=</code> in <code>&lt;%= @habit_logs.each do |habit_log| %&gt;</code>.  Replace with <code>&lt;% @habit_logs.each do |habit_log| %&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 313, "user_id": 2664779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/20094082decac5a6ca398b280db976e4?s=128&d=identicon&r=PG", "display_name": "qnsi", "link": "https://stackoverflow.com/users/2664779/qnsi"}, "edited": false, "score": 0, "creation_date": 1436970006, "post_id": 31432807, "comment_id": 50836391, "body": "@LittleMary Don&#39;t be. After all WE do the mistakes :)"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 2, "last_activity_date": 1436969386, "creation_date": 1436969386, "answer_id": 31432807, "question_id": 31432768, "link": "https://stackoverflow.com/questions/31432768/why-is-my-iteration-through-records-adding-whole-object-dump-in-a-strange-place/31432807#31432807", "title": "Why is my iteration through records adding whole object dump in a strange place?", "body": "<p>The problem is this line</p>\n\n<pre><code>&lt;%= @habit_logs.each do |habit_log| %&gt;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>&lt;% @habit_logs.each do |habit_log| %&gt;\n</code></pre>\n\n<p><strong><em>Imp Note:</em></strong></p>\n\n<pre><code>&lt;% %&gt; # Executes the code.\n\n&lt;%= %&gt; # Prints the output.\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 2664779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/20094082decac5a6ca398b280db976e4?s=128&d=identicon&r=PG", "display_name": "qnsi", "link": "https://stackoverflow.com/users/2664779/qnsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 31432807, "answer_count": 1, "score": 1, "last_activity_date": 1552616000, "creation_date": 1436969281, "last_edit_date": 1592644375, "question_id": 31432768, "link": "https://stackoverflow.com/questions/31432768/why-is-my-iteration-through-records-adding-whole-object-dump-in-a-strange-place", "title": "Why is my iteration through records adding whole object dump in a strange place?", "body": "<p>I have two Models, Habit and HabitLog.</p>\n<p>For simplicity Habit holds a name and has many HabitLogs.\nHabitLog holds a date and status.</p>\n<p>I want to create a view for specific date and list all the Habits with status for given date.</p>\n<p>To get records, but keep association I used this query in my controller:</p>\n<h3>habit_log_controller.rb</h3>\n<pre><code>def show\n  @habit_logs = HabitLog.where(log_date: '2015-07-15').includes(:habit).order(&quot;habits.position&quot;)\nend\n</code></pre>\n<p>Then in my view I have</p>\n<h3>show.html.erb</h3>\n<pre><code>&lt;ul&gt;\n  &lt;%= @habit_logs.each do |habit_log| %&gt;\n    &lt;li&gt;\n      &lt;%= habit_log.habit.name + &quot; &quot; + habit_log.status %&gt;\n    &lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n<p>It works, meaning in lists all the Habit names and status for given day, but it pastes the whole array in a strange place, after the li tag, but inside ul.</p>\n<h3>Page source</h3>\n<pre><code>&lt;ul&gt;\n\n  &lt;li&gt;\n     Waga 87\n  &lt;/li&gt;\n\n  &lt;li&gt;\n     Higiena 1\n  &lt;/li&gt;\n\n  &lt;li&gt;\n     Si\u0142ownia 0\n  &lt;/li&gt;\n  [#&amp;lt;HabitLog id: 1, log_date: &amp;quot;2015-07-15&amp;quot;, status: &amp;quot;87&amp;quot;, habit_id: 1, created_at: &amp;quot;2015-07-15 11:37:21&amp;quot;, updated_at: &amp;quot;2015-07-15 11:37:21&amp;quot;&amp;gt;, #&amp;lt;HabitLog id: 2, log_date: &amp;quot;2015-07-15&amp;quot;, status: &amp;quot;1&amp;quot;, habit_id: 2, created_at: &amp;quot;2015-07-15 11:37:28&amp;quot;, updated_at: &amp;quot;2015-07-15 11:37:28&amp;quot;&amp;gt;, #&amp;lt;HabitLog id: 3, log_date: &amp;quot;2015-07-15&amp;quot;, status: &amp;quot;0&amp;quot;, habit_id: 3, created_at: &amp;quot;2015-07-15 11:37:30&amp;quot;, updated_at: &amp;quot;2015-07-15 11:37:30&amp;quot;&amp;gt;]\n\n&lt;/ul&gt;\n</code></pre>\n<p>I figure this has to do with my use of .includes(:habit), but I have no idea how to deal with it.</p>\n"}, {"tags": ["java", "ruby", "scala", "data-structures", "jruby"], "comments": [{"owner": {"reputation": 807, "user_id": 1091059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fdac6d0edbba4462ebe88d43034b1?s=128&d=identicon&r=PG", "display_name": "bkowalikpl", "link": "https://stackoverflow.com/users/1091059/bkowalikpl"}, "edited": false, "score": 0, "creation_date": 1436972584, "post_id": 31432615, "comment_id": 50838340, "body": "Due to documentation it is <code>java.util.Map</code> so you can use either <code>scala.collection.JavaConverters._</code> or implicite ones <code>scala.collection.JavaConversions._</code> to covenrt to scala collections"}], "answers": [{"comments": [{"owner": {"reputation": 751, "user_id": 1835567, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f5b3ac5d14889c54c2b06e9a3ee3302f?s=128&d=identicon&r=PG", "display_name": "Marin", "link": "https://stackoverflow.com/users/1835567/marin"}, "edited": false, "score": 0, "creation_date": 1437036643, "post_id": 31438682, "comment_id": 50866925, "body": "Appreciate the answer, however, I am looking into something that wouldn&#39;t require me to change any existing ruby code."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 751, "user_id": 1835567, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f5b3ac5d14889c54c2b06e9a3ee3302f?s=128&d=identicon&r=PG", "display_name": "Marin", "link": "https://stackoverflow.com/users/1835567/marin"}, "edited": false, "score": 0, "creation_date": 1437036848, "post_id": 31438682, "comment_id": 50867060, "body": "You don&#39;t have to change anything. JRuby&#39;s <code>RubyHash</code> implements <code>java.util.Map</code>, therefore every Ruby <code>Hash</code> already <i>is</i> a Java <code>Map</code>. Now, if you want to have a <i>typed</i> <i>generic</i> <code>Map&lt;K, V&gt;</code>, then you <i>will</i> have to do <i>something</i>, because with Ruby being dynamically typed, there is simply nothing JRuby can do about statically providing a more precise type than a raw <code>Map</code> (or alternatively a <code>Map&lt;Object, Object&gt;</code>, which is more or less the same thing)."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1436986206, "creation_date": 1436986206, "answer_id": 31438682, "question_id": 31432615, "link": "https://stackoverflow.com/questions/31432615/converting-jruby-rubyhash-to-java-map/31438682#31438682", "title": "Converting JRuby RubyHash to Java Map?", "body": "<p><code>class org.jruby.RubyHash implements java.util.Map</code>, so, it already <em>is</em> a Java <code>Map</code>, albeit a non-generic \"raw\" type.</p>\n\n<p>Unfortunately, JRuby's <code>Hash</code> class only inherits the generic <code>to_java</code> method from <code>Kernel</code>, unlike <code>Array</code> which has its own version.</p>\n\n<p>This works:</p>\n\n<pre><code>[1, 2, 3].to_java(:int)\n</code></pre>\n\n<p>This doesn't, although it looks like it should:</p>\n\n<pre><code>{ 'one' =&gt; 1, 'two' =&gt; 2 }.to_java(:string, :int)\n</code></pre>\n\n<p>[It might be worthwhile filing this as a feature request.]</p>\n"}, {"tags": [], "owner": {"reputation": 6788, "user_id": 454312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jNMNF.jpg?s=128&g=1", "display_name": "kares", "link": "https://stackoverflow.com/users/454312/kares"}, "is_accepted": false, "score": 0, "last_activity_date": 1437060646, "creation_date": 1437060646, "answer_id": 31458531, "question_id": 31432615, "link": "https://stackoverflow.com/questions/31432615/converting-jruby-rubyhash-to-java-map/31458531#31458531", "title": "Converting JRuby RubyHash to Java Map?", "body": "<p><code>org.jruby.RubyHash</code> implements <code>java.util.Map</code> in a way that it attempts to convert Ruby objects to Java with \"normal\" Map operations.</p>\n\n<p>e.g. if you have a hash such as: <code>{ 'a' =&gt; 1, 'b' =&gt; 2 }</code> which (internally) means you have <code>RubyString</code> keys mapped to <code>RubyFixnum</code> values in a hash instance, on the Java side <code>hash.get(\"a\")</code> will work fine and return <code>1</code> as a <code>java.lang.Long</code></p>\n"}, {"tags": [], "owner": {"reputation": 1850, "user_id": 3956551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1TSYS.png?s=128&g=1", "display_name": "Christian MICHON", "link": "https://stackoverflow.com/users/3956551/christian-michon"}, "is_accepted": false, "score": 0, "last_activity_date": 1437131967, "creation_date": 1437131967, "answer_id": 31474622, "question_id": 31432615, "link": "https://stackoverflow.com/questions/31432615/converting-jruby-rubyhash-to-java-map/31474622#31474622", "title": "Converting JRuby RubyHash to Java Map?", "body": "<p>I would suggest to change your approach slightly: this would involve only changing the way you initialize objects in ruby, the rest should be transparent.</p>\n\n<p>Instead of using pure Ruby hash objects (<code>o=Hash.new</code> or <code>o={}</code>), please use instead <strong>java.util.HashMap</strong> like in this snippet:</p>\n\n<pre><code>require 'java'\no = java.util.HashMap.new # you could also use o = Java::JavaUtil::HashMap.new\n</code></pre>\n\n<p>From then on, <code>o</code> would be a java object used as a hash by Ruby code, and can still be accessed using java methods.</p>\n\n<p>Another mode complete snippet:</p>\n\n<pre><code>&gt;&gt; require 'java'\n=&gt; true\n&gt;&gt; o = Java::JavaUtil::HashMap.new\n=&gt; {}\n&gt;&gt; o[1] = 2\n=&gt; 2\n&gt;&gt; o[\"cm\"] = true\n=&gt; true\n&gt;&gt; p o.keys # ruby methods/interface\n[1, \"cm\"]\n=&gt; nil\n&gt;&gt; p o.keySet().to_a # java methods\n[1, \"cm\"]\n=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 751, "user_id": 1835567, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f5b3ac5d14889c54c2b06e9a3ee3302f?s=128&d=identicon&r=PG", "display_name": "Marin", "link": "https://stackoverflow.com/users/1835567/marin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1655, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1437131967, "creation_date": 1436968949, "question_id": 31432615, "link": "https://stackoverflow.com/questions/31432615/converting-jruby-rubyhash-to-java-map", "title": "Converting JRuby RubyHash to Java Map?", "body": "<p>I want to use JRuby to run some ruby scripts, get a result and continue using Java/Scala. Unfortunately, I don't know how to convert an object from a RubyHash to a Java or Scala Map. </p>\n\n<p>Is there a simple way to do this?\nAny suggestions on how to do it? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "owner": {"reputation": 71, "user_id": 5119550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15fe8235ce02a794f728a204d5795b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Matthijs", "link": "https://stackoverflow.com/users/5119550/matthijs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 763, "favorite_count": 1, "answer_count": 0, "score": 7, "last_activity_date": 1436967846, "creation_date": 1436967846, "question_id": 31432181, "link": "https://stackoverflow.com/questions/31432181/spree-product-price-range-filter-not-working", "title": "Spree product price range filter not working", "body": "<p>During my internship I needed to work on an existing ruby on rails project.\nThis project is built with spree. The developers before my tweaked the price filter so that the range would change to to max of the products of that taxon.\nHere by the code of \"lib/spree/core/product_filter.rb\"</p>\n\n<pre><code>Spree::Product.add_search_scope :price_range_any do |*opts|\n        opts_arr, max_prod, min_prod = [], nil, nil\n        opts.each do |opt|\n          tmp_arr = opt.split(\"+\")\n          opts_arr &lt;&lt; tmp_arr[0]\n          max_prod = tmp_arr[1]\n          min_prod = tmp_arr[2]\n        end\n        conds = opts_arr.map {|o| Spree::Core::ProductFilters.price_filter(max_prod.to_i, min_prod.to_i)[:conds][o]}.reject { |c| c.nil? }\n        scope = conds.shift\n        conds.each do |new_scope|\n          scope = scope.or(new_scope)\n        end\n        Spree::Product.joins(master: :default_price).where(scope)\n      end\n\n      def ProductFilters.format_price(amount)\n        Spree::Money.new(amount)\n      end\n\n      def ProductFilters.price_filter(max_price = nil, min_price = nil)\n        v = Spree::Price.arel_table\n        if max_price &lt; 200\n          if max_price &lt; 100\n            highest_price = max_price - max_price.modulo(10)\n          else\n            highest_price = max_price - max_price.modulo(25)\n          end\n          interval = (highest_price)/5\n          second = interval + interval\n          third = second + interval\n\n          conds = [ [ \"#{format_price(0)} - #{format_price(interval)}\"     , v[:amount].in(0..interval)],\n                    [ \"#{format_price(interval)} - #{format_price(second)}\"        , v[:amount].in(interval..second)],\n                    [ \"#{format_price(second)} - #{format_price(third)}\"        , v[:amount].in(second..third)],\n                    [ \"#{format_price(third)} - #{format_price(highest_price)}\"        , v[:amount].in(third..highest_price)],\n                    [ Spree.t(:or_over_price, price: format_price(highest_price)) , v[:amount].gteq(highest_price)]]\n          {\n            name:   Spree.t(:price_range),\n            scope:  :price_range_any,\n            conds:  Hash[*conds.flatten],\n            labels: conds.map { |k,v| [k, k] }\n          }\n        else\n          conds = [ [ \"#{format_price(0)} - #{format_price(50)}\"     , v[:amount].in(0..50)],\n                    [ \"#{format_price(50)} - #{format_price(100)}\"        , v[:amount].in(50..100)],\n                    [ \"#{format_price(100)} - #{format_price(150)}\"        , v[:amount].in(100..150)],\n                    [ \"#{format_price(150)} - #{format_price(200)}\"        , v[:amount].in(150..200)],\n                    [ Spree.t(:or_over_price, price: format_price(200)) , v[:amount].gteq(200)]]\n          {\n            name:   Spree.t(:price_range),\n            scope:  :price_range_any,\n            conds:  Hash[*conds.flatten],\n            labels: conds.map { |k,v| [k, k] }\n          }\n        end\n      end\n</code></pre>\n\n<p>It is working, in the price range filter the range changed when the max price went up but the filter doesn't filter the products.</p>\n\n<p>I tried everything I know so far of ruby on rails but nothing seem to be helping. Example when I comment key value of the add_search_scope out nothing changes. </p>\n\n<p>Can you please tell me whats going wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 5, "creation_date": 1436967549, "post_id": 31431935, "comment_id": 50834404, "body": "Can you ask a specific question please?"}, {"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 5, "creation_date": 1436968493, "post_id": 31431935, "comment_id": 50835199, "body": "As it stands you&#39;re asking people to write a whole app for you! :)"}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 4613417, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1qd1u.png?s=128&g=1", "display_name": "Knight Kolas", "link": "https://stackoverflow.com/users/4613417/knight-kolas"}, "is_accepted": true, "score": 0, "last_activity_date": 1437858479, "last_edit_date": 1437858479, "creation_date": 1437858091, "answer_id": 31631087, "question_id": 31431935, "link": "https://stackoverflow.com/questions/31431935/turning-one-class-instance-into-the-instance-of-another-class/31631087#31631087", "title": "Turning one class instance into the instance of another class", "body": "<p>This was an unpopular question, but I found out how to do what I wanted some time later. I will post the solution for anyone that would like to do what I wanted to accomplish. \nSo I wanted to make an instance of prints into a product page. I set up a control method in the print controller that created a new product instance, using the values of @print to set the product attribute values: </p>\n\n<pre><code>def turn_into_product\n  @product = Product.new(image: @print.image, name: @print.name, \\\n      description: @print.description, user_id: @print.user_id, print_id: @print.id, \\\n   creator: @print.user.username)\nrespond_to do |format|\n  if @product.save\n    format.html { redirect_to @product, notice: 'Product was successfully created.' }\n    format.json { render :show, status: :created, location: @product }\n  else\n    format.html { render :new }\n    format.json { render json: @product.errors, status: :unprocessable_entity }\n  end\nend\n</code></pre>\n\n<p>I then made the connection to this method in the route file:</p>\n\n<pre><code>resources :prints do\n  member do\n    put 'flag', 'turn_into_product'\n  end\nend\n</code></pre>\n\n<p>Finally, I used a 'put' call link_to button on the print show page:</p>\n\n<pre><code>&lt;%= link_to \"Turn into Product\", turn_into_product_print_path(@print), method: :put, class: \"btn btn-success\" %&gt;\n</code></pre>\n\n<p>And voila, New product instance with all the attributes, including images included. At the time of the question I did not have a solid grasp of html method calls in link_to or how to use routes for put methods. I also did not know that you could create instance of another class within a foreign controller. Now that I do, the possibilities seem to have multiplied. </p>\n"}], "owner": {"reputation": 78, "user_id": 4613417, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/1qd1u.png?s=128&g=1", "display_name": "Knight Kolas", "link": "https://stackoverflow.com/users/4613417/knight-kolas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 31631087, "answer_count": 1, "score": -5, "last_activity_date": 1437858479, "creation_date": 1436967314, "last_edit_date": 1437061244, "question_id": 31431935, "link": "https://stackoverflow.com/questions/31431935/turning-one-class-instance-into-the-instance-of-another-class", "title": "Turning one class instance into the instance of another class", "body": "<p>I am setting up an artist community, where peers review a piece submitted. I want the administrator to turn pieces with good reviews into a product with a price, color variants, and other attributes that are not present in the original piece model, and take away attributes like reviews. Once the administrator transforms this into a product, the piece instance is destroyed. I want the administrator to do this through a form.</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20150715145051) do\n\n  create_table \"prints\", force: :cascade do |t|\n    t.string   \"name\"\n    t.text     \"description\"\n    t.integer  \"pledge\"\n    t.integer  \"rating\"\n    t.string   \"category\"\n    t.datetime \"created_at\",         null: false\n    t.datetime \"updated_at\",         null: false\n    t.integer  \"user_id\"\n    t.string   \"image_file_name\"\n    t.string   \"image_content_type\"\n    t.integer  \"image_file_size\"\n    t.datetime \"image_updated_at\"\n    t.boolean  \"in_production\"\n  end\n\n  create_table \"products\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"creator\"\n    t.text     \"description\"\n    t.datetime \"created_at\",         null: false\n    t.datetime \"updated_at\",         null: false\n    t.string   \"image_file_name\"\n    t.string   \"image_content_type\"\n    t.integer  \"image_file_size\"\n    t.datetime \"image_updated_at\"\n  end\n\n  create_table \"reviews\", force: :cascade do |t|\n    t.integer  \"rating\"\n    t.text     \"comment\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"subproducts\", force: :cascade do |t|\n    t.integer  \"price\"\n    t.integer  \"quantity\"\n    t.string   \"size\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"email\",                  default: \"\", null: false\n    t.string   \"encrypted_password\",     default: \"\", null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\",                          null: false\n    t.datetime \"updated_at\",                          null: false\n    t.string   \"avatar_file_name\"\n    t.string   \"avatar_content_type\"\n    t.integer  \"avatar_file_size\"\n    t.datetime \"avatar_updated_at\"\n  end\n\n  add_index \"users\", [\"email\"], name: \"index_users_on_email\", unique: true\n  add_index \"users\", [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n\n  end\n</code></pre>\n\n<p>I want to transform a print into a product. Can I have an example of how this can be done through a form? I don't require the whole bulk of the code, just the gist of the idea. Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "environment-variables", "yaml"], "comments": [{"owner": {"reputation": 3299, "user_id": 1749638, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cERvr.jpg?s=128&g=1", "display_name": "coderhs", "link": "https://stackoverflow.com/users/1749638/coderhs"}, "edited": false, "score": 0, "creation_date": 1436968991, "post_id": 31431910, "comment_id": 50835595, "body": "quite curious, you shouldn&#39;t have to activate this. Did you restart your rails application after adding those ENV variables?"}, {"owner": {"reputation": 39, "user_id": 5119526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62afc6db3e8e46beac6498279df956a0?s=128&d=identicon&r=PG&f=1", "display_name": "DOK", "link": "https://stackoverflow.com/users/5119526/dok"}, "reply_to_user": {"reputation": 3299, "user_id": 1749638, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cERvr.jpg?s=128&g=1", "display_name": "coderhs", "link": "https://stackoverflow.com/users/1749638/coderhs"}, "edited": false, "score": 0, "creation_date": 1436969932, "post_id": 31431910, "comment_id": 50836326, "body": "Jep I restarted even the whole system."}, {"owner": {"reputation": 1169, "user_id": 3286645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EKAp2.png?s=128&g=1", "display_name": "nextstep", "link": "https://stackoverflow.com/users/3286645/nextstep"}, "edited": false, "score": 0, "creation_date": 1436973410, "post_id": 31431910, "comment_id": 50838933, "body": "where are you setting/did you set the environment variables?"}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 5119526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62afc6db3e8e46beac6498279df956a0?s=128&d=identicon&r=PG&f=1", "display_name": "DOK", "link": "https://stackoverflow.com/users/5119526/dok"}, "is_accepted": false, "score": 0, "last_activity_date": 1436975314, "creation_date": 1436975314, "answer_id": 31435149, "question_id": 31431910, "link": "https://stackoverflow.com/questions/31431910/erp-seems-not-being-interpreted-in-database-yml-and-secrets-yml/31435149#31435149", "title": "ERP seems not being interpreted in database.yml and secrets.yml", "body": "<p>Ok, it's solved.</p>\n\n<p>rails console env gets the environment variables from the shell, but nginx/passenger don't. This is why it works for me just in the console.</p>\n\n<p>You have so set the ENV-vars in the site-config of your nginx-server:</p>\n\n<pre><code>passenger_env_var MYAPP_DATABASE_PASSWORD &lt;db_password&gt;;\npassenger_env_var SECRET_KEY_BASE  &lt;secret_key&gt;;\n</code></pre>\n\n<p>That's it!!!</p>\n"}], "owner": {"reputation": 39, "user_id": 5119526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62afc6db3e8e46beac6498279df956a0?s=128&d=identicon&r=PG&f=1", "display_name": "DOK", "link": "https://stackoverflow.com/users/5119526/dok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436975314, "creation_date": 1436967259, "question_id": 31431910, "link": "https://stackoverflow.com/questions/31431910/erp-seems-not-being-interpreted-in-database-yml-and-secrets-yml", "title": "ERP seems not being interpreted in database.yml and secrets.yml", "body": "<p>My rails-app seem not to interpret the lines </p>\n\n<pre><code>password: &lt;%= ENV['MYAPP_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n\n<p>in <em>database.yml</em> and</p>\n\n<pre><code>secret_key_base: &lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;\n</code></pre>\n\n<p>in <em>secrets.yml</em>.</p>\n\n<p>When I paste both values directly into these files, my app works.</p>\n\n<p>Through <strong>rails console</strong> I got sure that </p>\n\n<pre><code>ENV['MYAPP_DATABASE_PASSWORD']\nENV[\"SECRET_KEY_BASE\"]\n</code></pre>\n\n<p>have valid values.</p>\n\n<p>According the Rails documentation, rails parses ERB in those files.</p>\n\n<p>This seems a bug for me, because this is all generated code by rails. I use Rails 4.2.1, so ERB should work in those file.</p>\n\n<p>I like this approach, does anyone have an idea how to activate ERB in those files?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 0, "creation_date": 1436967317, "post_id": 31431835, "comment_id": 50834200, "body": "I don&#39;t understand what rails parameters you need to read? Don&#39;t you just need to change the active to true  in the .js.erb file when you show the replies (which can be done via Jquery)?"}, {"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 0, "creation_date": 1436967450, "post_id": 31431835, "comment_id": 50834319, "body": "Actually I mean change the url of the link via Jquery (and you can use rails link_to helper in the .js.erb)."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1436967450, "post_id": 31431835, "comment_id": 50834318, "body": "Can you include in your question the <b>rendered html</b> for your <code>link_to</code>?  This is what the javascript will be working on.  The rails helper version is actually irrelevant."}, {"owner": {"reputation": 1414, "user_id": 3830618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000364348363/picture?type=large", "display_name": "Jakub Kohout", "link": "https://stackoverflow.com/users/3830618/jakub-kohout"}, "edited": false, "score": 0, "creation_date": 1436967460, "post_id": 31431835, "comment_id": 50834326, "body": "I can change it but then I don&#39;t know how to pass this updated value to the original link."}, {"owner": {"reputation": 1573, "user_id": 2400445, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/h7Bym.jpg?s=128&g=1", "display_name": "Nidhin S G", "link": "https://stackoverflow.com/users/2400445/nidhin-s-g"}, "edited": false, "score": 0, "creation_date": 1436967689, "post_id": 31431835, "comment_id": 50834526, "body": "which rails parameter you want to pass"}], "answers": [{"tags": [], "owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "is_accepted": true, "score": 3, "last_activity_date": 1436968035, "last_edit_date": 1436968035, "creation_date": 1436967812, "answer_id": 31432164, "question_id": 31431835, "link": "https://stackoverflow.com/questions/31431835/changing-link-to-parameters-via-ajax/31432164#31432164", "title": "changing link_to parameters via AJAX", "body": "<p>I'd give the link an ID:</p>\n\n<pre><code>&lt;%= link_to \"show replies\", tweets_show_replies_path(:parent =&gt; tweet, active: false ), method: :post, remote: true, id: \"tweet-#{tweet.id}-replies-link\", class: \"show-replies\" %&gt;\n</code></pre>\n\n<p>Then do this in your show_replies.js.erb to change the href:</p>\n\n<pre><code>$(\"#tweet-#{@parent.id}-replies-link\").attr(\"href\", \"&lt;%= tweets_show_replies_path(:parent =&gt; @parent, active: true) %&gt;\");\n</code></pre>\n"}], "owner": {"reputation": 1414, "user_id": 3830618, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000364348363/picture?type=large", "display_name": "Jakub Kohout", "link": "https://stackoverflow.com/users/3830618/jakub-kohout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1212, "favorite_count": 1, "accepted_answer_id": 31432164, "answer_count": 1, "score": 1, "last_activity_date": 1436968035, "creation_date": 1436967069, "question_id": 31431835, "link": "https://stackoverflow.com/questions/31431835/changing-link-to-parameters-via-ajax", "title": "changing link_to parameters via AJAX", "body": "<p>I got this link</p>\n\n<pre><code>&lt;%= link_to \"show replies\", tweets_show_replies_path(:parent =&gt; tweet, active: false ), method: :post, remote: true, class: \"show-replies\" %&gt;\n</code></pre>\n\n<p>and this function in my \"tweets\" controller</p>\n\n<pre><code>def show_replies\n\n    @parent = Tweet.find(params[:parent])\n    @tweet = Tweet.new\n\n    respond_to do |format|\n        format.html {render :nothing =&gt; true}\n        format.js\n    end\n\nend\n</code></pre>\n\n<p>and this is my <strong>show_replies.js.erb</strong></p>\n\n<pre><code>$('#tweet-&lt;%= @parent.id %&gt;').find('.replies').append(' &lt;%=j render \"tweets/replies\" %&gt; ');\n</code></pre>\n\n<p>I'd need to change the \"<strong>active</strong>\" parametr to <strong>true</strong> and update it in my erb file. But I don't know how to read rails parametrs and change them via ajax.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "upload"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1436967194, "post_id": 31431757, "comment_id": 50834088, "body": "You added file to exisiting migration. Is that migration already pushed to the production or git? If so, you should not do this and generate a new migration instead. If this is a new migration (not pushed anywhere - exists only locally), but has been run already you need to run <code>rake db:migrate:redo</code>. As Pavan mentioned in the answer, you also would prefer to name this column <code>picture</code>."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "edited": false, "score": 0, "creation_date": 1436967796, "post_id": 31431833, "comment_id": 50834612, "body": "thanks! i edited it and ran db:migrate but nothing appeared in the command line - i assume it went smoothly. im still getting the same error though :("}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "edited": false, "score": 0, "creation_date": 1436967921, "post_id": 31431833, "comment_id": 50834733, "body": "@icecreamrabbit Did you run <code>rake db:rollback</code> before editing the file and running <code>rake db:migrate</code>?"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1436967062, "creation_date": 1436967062, "answer_id": 31431833, "question_id": 31431757, "link": "https://stackoverflow.com/questions/31431757/activerecordunknownattributeerror-in-picturescontrollercreate/31431833#31431833", "title": "ActiveRecord::UnknownAttributeError in PicturesController#create", "body": "<blockquote>\n  <p>ActiveRecord::UnknownAttributeError in PicturesController#create</p>\n  \n  <p>unknown attribute 'picture' for Picture</p>\n</blockquote>\n\n<p>You have <code>:pictures</code> instead <code>:picture</code> in your <strong><em>migration file</em></strong> and you are using <code>:picture</code> in <code>picture_params</code> method.</p>\n\n<p>Do <code>rake db:rollback</code>, change it to <code>:picture</code> and do <code>rake db:migrate</code></p>\n"}], "owner": {"reputation": 187, "user_id": 4983675, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/h7czi.jpg?s=128&g=1", "display_name": "icecreamrabbit", "link": "https://stackoverflow.com/users/4983675/icecreamrabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 31431833, "answer_count": 1, "score": 0, "last_activity_date": 1436967062, "creation_date": 1436966896, "question_id": 31431757, "link": "https://stackoverflow.com/questions/31431757/activerecordunknownattributeerror-in-picturescontrollercreate", "title": "ActiveRecord::UnknownAttributeError in PicturesController#create", "body": "<p>I'm trying to implement a picture upload feature (without a gem), and when I go to press submit after selecting a photo I get this error:</p>\n\n<pre><code>Ac\ntiveRecord::UnknownAttributeError in PicturesController#create\nunknown attribute 'picture' for Picture.\n\nExtracted source (around line #13):\n\n  def create\n    # make a new picture with what picture_params returns (which is a method we're calling)\n    **@picture = Picture.new(picture_params)** &lt;&lt; where i'm getting the error\n    if @picture.save\n      # if the save for the picture was successful, go to index.html.erb\n      redirect_to pictures_url\n</code></pre>\n\n<p>How do I set up my environment so my photos get saved in the database?</p>\n\n<p>Controller:</p>\n\n<pre><code>class PicturesController &lt; ApplicationController\n\n  def index\n    @pictures = Picture.all\n  end\n\n  def new\n    @picture = Picture.new\n  end\n\n  def create\n    # make a new picture with what picture_params returns (which is a method we're calling)\n    @picture = Picture.new(picture_params)\n    if @picture.save\n      # if the save for the picture was successful, go to index.html.erb\n      redirect_to pictures_url\n    else\n      # otherwise render the view associated with the action :new (i.e. new.html.erb)\n      render :new\n    end\n  end\n\n  def show\n    @picture = Picture.find(params[:id])\n  end\n\n  def edit\n    @picture = Picture.find(params[:id])\n  end\n\n  def update\n    @picture = Picture.find(params[:id])\n\n    if @picture.update_attributes(picture_params)\n      redirect_to \"/pictures/#{@picture.id}\"\n    else\n      render :edit\n    end\n  end\n\n  def destroy\n    @picture = Picture.find(params[:id])\n    @picture.destroy\n    redirect_to pictures_url\n  end\n\n  private\n  def picture_params\n    params.require(:picture).permit(:artist, :title, :url, :picture)\n  end\n\nend\n</code></pre>\n\n<p>migration:</p>\n\n<pre><code>class CreatePictures &lt; ActiveRecord::Migration\n  def change\n    create_table :pictures do |t|\n      t.string :artist\n      t.string :title\n      t.string :url\n      t.string :pictures\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>I added t.string :pictures manually by editing the file, does it still work this way or is there a command I need to run? </p>\n\n<p>My form:</p>\n\n<pre><code>&lt;container&gt;\n&lt;center&gt;\n&lt;%= form_for @picture do |f| %&gt;\n  &lt;input type=\"file\" multiple&gt;  &lt;%= f.file_field :picture %&gt;\n  &lt;p&gt;Drag your files here or click in this area.&lt;/p&gt;\n  &lt;button type=\"submit\"&gt; &lt;%= f.submit \"Save\" %&gt; Upload &lt;/button&gt;\n&lt;/form&gt;\n&lt;% end %&gt;\n&lt;/container&gt;\n</code></pre>\n\n<p>I'm using a simple drag and drop upload.\nThank you for your help I really appreciate it!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "caching", "browser-cache"], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 4843054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ITnvV.jpg?s=128&g=1", "display_name": "AlexanderRD", "link": "https://stackoverflow.com/users/4843054/alexanderrd"}, "is_accepted": true, "score": 0, "last_activity_date": 1438074017, "creation_date": 1438074017, "answer_id": 31671747, "question_id": 31431585, "link": "https://stackoverflow.com/questions/31431585/browser-fails-to-cache-page-assets-for-rails-4-site/31671747#31671747", "title": "Browser fails to cache page assets for Rails 4 Site", "body": "<p>This turned out to be an issue with the Browser settings that I was testing with. Quit and relaunched the browser and the static elements once again were cached as expected.</p>\n"}], "owner": {"reputation": 149, "user_id": 4843054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ITnvV.jpg?s=128&g=1", "display_name": "AlexanderRD", "link": "https://stackoverflow.com/users/4843054/alexanderrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 31671747, "answer_count": 1, "score": 1, "last_activity_date": 1438074017, "creation_date": 1436966426, "question_id": 31431585, "link": "https://stackoverflow.com/questions/31431585/browser-fails-to-cache-page-assets-for-rails-4-site", "title": "Browser fails to cache page assets for Rails 4 Site", "body": "<p>When accessing our Rails 4 site, we used the Chrome developer tools to view our Network performance and to monitor the page load speeds of various assets. This showed that very few assets were/are being cached.</p>\n\n<p>Files such as the application-<em>.js and appliation-</em>.css files, which we're positive have not changed between page loads, are also not being cached.</p>\n\n<p>Within our config/environments/production.rb file we have configured the following:</p>\n\n<pre><code>    # Code is not reloaded between requests.\n    config.cache_classes = true\n\n    # Eager load code on boot. This eager loads most of Rails and\n    # your application in memory, allowing both thread web servers\n    # and those relying on copy on write to perform better.\n    # Rake tasks automatically ignore this option for performance.\n    config.eager_load = true\n\n    # Full error reports are disabled and caching is turned on.\n    config.consider_all_requests_local       = false\n    config.action_controller.perform_caching = true\n\n    # Disable Rails's static asset server (Apache or nginx will already do this).\n    config.serve_static_files = false\n\n    # Compress JavaScripts and CSS.\n    config.assets.js_compressor = :uglifier\n    config.assets.css_compressor = :sass\n\n    # Do not fallback to assets pipeline if a precompiled asset is missed.\n    config.assets.compile = false\n\n    # Generate digests for assets URLs.\n    config.assets.digest = true\n\n    # Version of your assets, change this if you want to expire all your assets.\n    config.assets.version = '1.0'\n\n    # Set to :debug to see everything in the log.\n    config.log_level = :info\n\n    # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n    # the I18n.default_locale when a translation can not be found).\n    config.i18n.fallbacks = true\n\n    # Send deprecation notices to registered listeners.\n    config.active_support.deprecation = :notify\n\n    # Use default logging formatter so that PID and timestamp are not suppressed.\n    config.log_formatter = ::Logger::Formatter.new\n</code></pre>\n\n<p>Any thoughts on why this may be happening? Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "hash"], "comments": [{"owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "edited": false, "score": 0, "creation_date": 1436963005, "post_id": 31430068, "comment_id": 50830849, "body": "Is not clear the problem you have and question is malformed."}, {"owner": {"reputation": 55, "user_id": 5002852, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/207fecb5f34b6d93fcabb0ff90a55370?s=128&d=identicon&r=PG&f=1", "display_name": "riversand15", "link": "https://stackoverflow.com/users/5002852/riversand15"}, "reply_to_user": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "edited": false, "score": 0, "creation_date": 1436963773, "post_id": 31430068, "comment_id": 50831394, "body": "distance_a and distance_b are a function of loc_id obtained from the hash. I want to use these two values to sort the hash"}], "answers": [{"tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1436968765, "last_edit_date": 1436968765, "creation_date": 1436963911, "answer_id": 31430632, "question_id": 31430068, "link": "https://stackoverflow.com/questions/31430068/how-to-sort-a-hash-by-a-function-depending-on-values-from-the-hash/31430632#31430632", "title": "How to sort a hash by a function depending on values from the hash", "body": "<p>This has to do the job nicely for you:</p>\n\n<pre><code>def distance(hash)\n  LocationDistance.find_by(loc_a: hash[1][:loc_id], current_loc_id].min,\n                           loc_b: [hash[1][:loc_id], current_loc_id].max,\n                           city_id: current_city.id).distance\nend\n\na.sort{|a,b| a[:sold] == b[:sold] ? ((distance(a) &lt; distance(b)) ? -1 : 1) : (a[:sold] ? 1 : -1)}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": true, "score": 0, "last_activity_date": 1436994268, "creation_date": 1436994268, "answer_id": 31441069, "question_id": 31430068, "link": "https://stackoverflow.com/questions/31430068/how-to-sort-a-hash-by-a-function-depending-on-values-from-the-hash/31441069#31441069", "title": "How to sort a hash by a function depending on values from the hash", "body": "<p>Borrowing @Maxim's <code>distance</code> function and using <code>sort_by</code> means the distance is only calculated once for each item.</p>\n\n<p>Extracting <code>distance</code> as a function also has the advantage that it can be tested independently</p>\n\n<pre><code>def distance(hash)\n  LocationDistance.find_by(loc_a: hash[1][:loc_id], current_loc_id].min,\n                           loc_b: [hash[1][:loc_id], current_loc_id].max,\n                           city_id: current_city.id).distance\nend\n\na.sort_by(|x| [true ? 1 : 0, distance(x)])\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5002852, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/207fecb5f34b6d93fcabb0ff90a55370?s=128&d=identicon&r=PG&f=1", "display_name": "riversand15", "link": "https://stackoverflow.com/users/5002852/riversand15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 31441069, "answer_count": 2, "score": -3, "last_activity_date": 1436994268, "creation_date": 1436962281, "last_edit_date": 1436963011, "question_id": 31430068, "link": "https://stackoverflow.com/questions/31430068/how-to-sort-a-hash-by-a-function-depending-on-values-from-the-hash", "title": "How to sort a hash by a function depending on values from the hash", "body": "<p>I want to sort a hash by the following conditions:</p>\n\n<ol>\n<li>An object that has <code>hash[:sold]</code> as <code>false</code> comes before an object that has <code>hash[:sold]</code> as <code>true</code>.</li>\n<li>If both objects have <code>hash[:sold]</code> as <code>false enter code here</code>, then compute two variables <code>distance_a</code>, <code>distance_b</code> for the two hashes. I want object <code>a</code> to come before object <code>b</code> if <code>distance_a &lt; distance_b</code>.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>curr_hash.sort do |a,b|\n  status_a = a[1][:sold]\n  status_b = b[1][:sold]\n  if status_a == false &amp;&amp; status_b == false\n    a_first_loc = [a[1][:loc_id], current_loc_id].min\n    a_second_loc = [a[1][:loc_id], current_loc_id].max\n    b_first_loc = [b[1][:loc_id], current_loc_id].min\n    b_second_loc = [b[1][:loc_id], current_loc_id].max\n    distance_a = LocationDistance.find_by(city_id: current_city.id, loc_a: a_first_loc, loc_b: a_second_loc).distance\n    distance_b = LocationDistance.find_by(city_id: current_city.id, loc_a: b_first_loc, loc_b: b_second_loc).distance\n    distance_a &lt;=&gt; distance_b\n  else return status_a == false ? 1 : 0\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "deployment", "private-pub"], "answers": [{"comments": [{"owner": {"reputation": 418, "user_id": 3874235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001704922189/picture?type=large", "display_name": "Akhil Latta", "link": "https://stackoverflow.com/users/3874235/akhil-latta"}, "edited": false, "score": 0, "creation_date": 1437457236, "post_id": 31518998, "comment_id": 51022737, "body": "Thanks for your answer. That means server url will be <a href=\"http://202.164.34.20/faye/faye\" rel=\"nofollow noreferrer\">202.164.34.20/faye/faye</a> ? But it doesnot seem to work. Please suggest what should be the actual url for server in this case."}, {"owner": {"reputation": 2738, "user_id": 4862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IuLvH.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4862564/chris"}, "reply_to_user": {"reputation": 418, "user_id": 3874235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001704922189/picture?type=large", "display_name": "Akhil Latta", "link": "https://stackoverflow.com/users/3874235/akhil-latta"}, "edited": false, "score": 0, "creation_date": 1439977785, "post_id": 31518998, "comment_id": 52078801, "body": "in that case you need to change production server in private_pub.yml to <a href=\"http://202.164.34.20t/faye/faye\" rel=\"nofollow noreferrer\">202.164.34.20t/faye/faye</a>. But you probably already are running a webserver on port 80?"}, {"owner": {"reputation": 418, "user_id": 3874235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001704922189/picture?type=large", "display_name": "Akhil Latta", "link": "https://stackoverflow.com/users/3874235/akhil-latta"}, "edited": false, "score": 0, "creation_date": 1440401340, "post_id": 31518998, "comment_id": 52239049, "body": "Yes you are right with that. So is it conflicting with faye. what&#39;s the solution for that?"}, {"owner": {"reputation": 2738, "user_id": 4862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IuLvH.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4862564/chris"}, "reply_to_user": {"reputation": 418, "user_id": 3874235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001704922189/picture?type=large", "display_name": "Akhil Latta", "link": "https://stackoverflow.com/users/3874235/akhil-latta"}, "edited": false, "score": 0, "creation_date": 1440415480, "post_id": 31518998, "comment_id": 52247496, "body": "are you using nginx or apache webserver?"}, {"owner": {"reputation": 2738, "user_id": 4862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IuLvH.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4862564/chris"}, "reply_to_user": {"reputation": 418, "user_id": 3874235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001704922189/picture?type=large", "display_name": "Akhil Latta", "link": "https://stackoverflow.com/users/3874235/akhil-latta"}, "edited": false, "score": 1, "creation_date": 1440572309, "post_id": 31518998, "comment_id": 52322852, "body": "see my example above, so run your faye server on a subdomain that is pointing to 202.164.34.20. Install nginx and use my example config"}], "tags": [], "owner": {"reputation": 2738, "user_id": 4862564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IuLvH.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4862564/chris"}, "is_accepted": true, "score": 1, "last_activity_date": 1440572202, "last_edit_date": 1440572202, "creation_date": 1437402166, "answer_id": 31518998, "question_id": 31429823, "link": "https://stackoverflow.com/questions/31429823/error-installing-private-pub-on-live-server-in-rails-4/31518998#31518998", "title": "error installing private pub on live server in rails 4", "body": "<p>localhost:9292 means it will bind to 127.0.0.0, if you want to access from public ip make sure to bind to your external ip or to 0.0.0.0. \nAlthough I would suggest to proxy it with nginx/apache so users can just connect to port 80</p>\n\n<p>Example for nginx</p>\n\n<pre><code> server {\n  listen 80;\n  server_name faye.yourdomain.com;\n  access_log /var/log/nginx/faye.log;\n\n  location /faye {\n    proxy_pass http://127.0.0.1:9292;\n    proxy_http_version 1.1;\n    proxy_set_header Host $host;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection $connection_upgrade;\n    proxy_buffering off;\n    proxy_redirect off;\n    proxy_connect_timeout      90;\n    proxy_send_timeout         90;\n    proxy_read_timeout         90;\n  }\n\n}\n\n\nmap $http_upgrade $connection_upgrade {\n    default Upgrade;\n    ''      close;\n}\n</code></pre>\n"}], "owner": {"reputation": 418, "user_id": 3874235, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001704922189/picture?type=large", "display_name": "Akhil Latta", "link": "https://stackoverflow.com/users/3874235/akhil-latta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 31518998, "answer_count": 1, "score": 2, "last_activity_date": 1440572202, "creation_date": 1436961674, "question_id": 31429823, "link": "https://stackoverflow.com/questions/31429823/error-installing-private-pub-on-live-server-in-rails-4", "title": "error installing private pub on live server in rails 4", "body": "<p>I am using private pub for one of my projects. Its working fine on localhost but when I deploy it on live server it giving following error:</p>\n\n<p><code>Errno::ECONNREFUSED in CommentsController#new</code></p>\n\n<p><code>Connection refused - connect(2) for \"202.164.34.20\" port 9292</code></p>\n\n<p>Here is my private_pub.yml file content for local server:</p>\n\n<pre><code>development:\n server: \"http://localhost:9292/faye/faye\"\n secret_token: \"secret\"\ntest:\n server: \"http://localhost:9292/faye/faye\"\n secret_token: \"secret\"\nproduction:\n server: \"http://example.com/faye/faye\"\n secret_token: \"0378a6008f37cbd9c3390ce4069bb85f776d068f7b4885d6890f07066affde25\"\n signature_expiration: 3600 # one hour\n</code></pre>\n\n<p>and for other server, here is the file content:</p>\n\n<pre><code>development:\n server: \"http://202.164.34.20:9292/faye/faye\"\n secret_token: \"secret\"\ntest:\n server: \"http://202.164.34.20:9292/faye/faye\"\n secret_token: \"secret\"\nproduction:\n server: \"http://localhost:9292/faye/faye\"\n secret_token: \"0378a6008f37cbd9c3390ce4069bb85f776d068f7b4885d6890f07066affde25\"\n signature_expiration: 3600 # one hour\n</code></pre>\n\n<p>Now I need to deploy this on <a href=\"http://202.164.34.20:3001\" rel=\"nofollow\">http://202.164.34.20:3001</a> url. please suggest.</p>\n"}, {"tags": ["ruby", "sinatra", "dashing"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1436968074, "post_id": 31429246, "comment_id": 50834864, "body": "You could write some client-side javascript that periodically checks if the server is alive and redirects the page if it is not. I&#39;m not familiar with dashing, so I can&#39;t be more specific than that."}, {"owner": {"reputation": 11, "user_id": 4739145, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4UtttYhLRW4/AAAAAAAAAAI/AAAAAAAACnM/AoRInQ2zmY0/photo.jpg?sz=128", "display_name": "Jermila Dhas", "link": "https://stackoverflow.com/users/4739145/jermila-dhas"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1437045187, "post_id": 31429246, "comment_id": 50872532, "body": "Thanks a lot for pointing me in the right direction."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4739145, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4UtttYhLRW4/AAAAAAAAAAI/AAAAAAAACnM/AoRInQ2zmY0/photo.jpg?sz=128", "display_name": "Jermila Dhas", "link": "https://stackoverflow.com/users/4739145/jermila-dhas"}, "edited": false, "score": 0, "creation_date": 1439295779, "post_id": 31540196, "comment_id": 51793196, "body": "Thank you. I&#39;ll try this one out as well. I managed to refresh the dashboard when the service goes down, using javascript (on layout.erb file) as @Max mentioned. I am going to do tweaks on <a href=\"https://github.com/Shopify/dashing/blob/c49e181cdb13d3357d76759e5311746ffe00f281/javascripts/dashing.coffee#L104-L110\" rel=\"nofollow noreferrer\">github.com/Shopify/dashing/blob/&hellip;</a>."}, {"owner": {"reputation": 478, "user_id": 383257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a65a78a450f3439700171b08f2b0b5a?s=128&d=identicon&r=PG", "display_name": "tylermauthe", "link": "https://stackoverflow.com/users/383257/tylermauthe"}, "reply_to_user": {"reputation": 11, "user_id": 4739145, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4UtttYhLRW4/AAAAAAAAAAI/AAAAAAAACnM/AoRInQ2zmY0/photo.jpg?sz=128", "display_name": "Jermila Dhas", "link": "https://stackoverflow.com/users/4739145/jermila-dhas"}, "edited": false, "score": 0, "creation_date": 1439340862, "post_id": 31540196, "comment_id": 51817794, "body": "If it works, just use it! Only fix things if they are broken -- but be ruthless in calling things broken."}, {"owner": {"reputation": 11, "user_id": 4739145, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4UtttYhLRW4/AAAAAAAAAAI/AAAAAAAACnM/AoRInQ2zmY0/photo.jpg?sz=128", "display_name": "Jermila Dhas", "link": "https://stackoverflow.com/users/4739145/jermila-dhas"}, "edited": false, "score": 0, "creation_date": 1439463089, "post_id": 31540196, "comment_id": 51876940, "body": "Thank you. I shall post the entire answer after I make sure it is working properly. Thanks all for your valuable pointers."}, {"owner": {"reputation": 396, "user_id": 1843028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f362e0d9fb87a8c63b9d6438622814?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/1843028/daniel"}, "reply_to_user": {"reputation": 11, "user_id": 4739145, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4UtttYhLRW4/AAAAAAAAAAI/AAAAAAAACnM/AoRInQ2zmY0/photo.jpg?sz=128", "display_name": "Jermila Dhas", "link": "https://stackoverflow.com/users/4739145/jermila-dhas"}, "edited": false, "score": 0, "creation_date": 1450084561, "post_id": 31540196, "comment_id": 56267907, "body": "did you find an elegant solution to this in the end? @JermilaDhas ?"}], "tags": [], "owner": {"reputation": 478, "user_id": 383257, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1a65a78a450f3439700171b08f2b0b5a?s=128&d=identicon&r=PG", "display_name": "tylermauthe", "link": "https://stackoverflow.com/users/383257/tylermauthe"}, "is_accepted": false, "score": 2, "last_activity_date": 1437484738, "creation_date": 1437484738, "answer_id": 31540196, "question_id": 31429246, "link": "https://stackoverflow.com/questions/31429246/automatic-reload-of-page-when-sinatra-app-crashes-when-thin-server-stops/31540196#31540196", "title": "Automatic reload of page when Sinatra app crashes (when thin server stops)", "body": "<p>Dashing tries to gracefully handle connection issues with the SSE (server-sent event) that it uses to get widget data. This works well for production, but I can see how it could be confusing during development.</p>\n\n<p>There are a few options I can think of for this, all client-side:</p>\n\n<ul>\n<li>Get a browser add-on like <a href=\"https://chrome.google.com/webstore/detail/page-monitor/pemhgklkefakciniebenbfclihhmmfcd?hl=en\" rel=\"nofollow\">this one</a></li>\n<li>Create a widget that tracks a <a href=\"https://en.wikipedia.org/wiki/Heartbeat_(computing)\" rel=\"nofollow\">heartbeat</a> sent to it from a job and responds to failure (by reloading or something)</li>\n</ul>\n\n<p>Unfortunately, Dashing doesn't expose the EventSource at all. Another option would be to attach your own error handler to that.</p>\n\n<p>There is some code in Dashing that will eventually try to refresh if there is a total failure: <a href=\"https://github.com/Shopify/dashing/blob/c49e181cdb13d3357d76759e5311746ffe00f281/javascripts/dashing.coffee#L104-L110\" rel=\"nofollow\">https://github.com/Shopify/dashing/blob/c49e181cdb13d3357d76759e5311746ffe00f281/javascripts/dashing.coffee#L104-L110</a></p>\n\n<p>If the connection is completely lost, Dashing will try to refresh in 5 minutes.</p>\n"}], "owner": {"reputation": 11, "user_id": 4739145, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4UtttYhLRW4/AAAAAAAAAAI/AAAAAAAACnM/AoRInQ2zmY0/photo.jpg?sz=128", "display_name": "Jermila Dhas", "link": "https://stackoverflow.com/users/4739145/jermila-dhas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1437484738, "creation_date": 1436960002, "question_id": 31429246, "link": "https://stackoverflow.com/questions/31429246/automatic-reload-of-page-when-sinatra-app-crashes-when-thin-server-stops", "title": "Automatic reload of page when Sinatra app crashes (when thin server stops)", "body": "<p>I have quite recently started playing with Sinatra framework routes (because of Dashing.io project). My question is as follows:</p>\n\n<p>I have dashing running on my local machine. And I have my dashboard open at <a href=\"http://localhost:3030/sample\" rel=\"nofollow\">http://localhost:3030/sample</a>.\nSay I stop dashing (ctrl+c, which stops thin server as well). And my dashboard still sits there, with widgets on the screen, and I receive an error messages ONLY when I refresh my browser.</p>\n\n<p>Is there a way to automatically redirect to an error page (saying service is down) when dashing goes down or when thin server stops? </p>\n\n<p>Things that I have tried: I had a python script run every sec to check if there are any thin/ dashing processes running. If no process found, I tried using dashing's reload widget to reload the page. But later I realized that I cant use the widget coz dashing is down.</p>\n\n<p>And I did a fair bit of googling to find an answer, but found none. Can anybody please point me in the right direction please? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436982094, "post_id": 31428731, "comment_id": 50844489, "body": "Welcome to Stack Overflow. You need to tell us more about what you&#39;re trying to do. As is we&#39;re going to have to cobble together imaginary HTML and code to it. Provide a minimal HTML example, minimal sample code showing how you&#39;re trying to do it, and what you want to capture. Without that we&#39;re guessing what you&#39;re after and that wastes our time and yours, so help us help you."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3392082, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2bda83b02cc58c5e93dbc4972d2b5eba?s=128&d=identicon&r=PG&f=1", "display_name": "bojan92", "link": "https://stackoverflow.com/users/3392082/bojan92"}, "edited": false, "score": 0, "creation_date": 1436964208, "post_id": 31429274, "comment_id": 50831723, "body": "If &#39;td b a&#39; are hidden elements they will still be scrapped, and in that case it doesn&#39;t solve my problem."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436982424, "post_id": 31429274, "comment_id": 50844684, "body": "This doesn&#39;t match the OPs description of the problem. It would return text inside bolded anchors in cells. Please describe why the OP would want to use this instead of simply tossing out code."}], "tags": [], "owner": {"reputation": 130, "user_id": 2017708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e608a3d0ac1e4b37df99428b746979f?s=128&d=identicon&r=PG", "display_name": "Ravindra", "link": "https://stackoverflow.com/users/2017708/ravindra"}, "is_accepted": false, "score": -2, "last_activity_date": 1436960100, "creation_date": 1436960100, "answer_id": 31429274, "question_id": 31428731, "link": "https://stackoverflow.com/questions/31428731/scrape-only-visible-elements-with-nokogiri/31429274#31429274", "title": "Scrape only visible elements with Nokogiri", "body": "<pre><code> url = \"https://en.wikipedia.org/wiki/List_of_languages_by_number_of_native_speakers\"\n page = Nokogiri::HTML(open(url))  \n page.css('td b a').each do |line|\n   puts line.text  # \"Spanish\"        \n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "is_accepted": true, "score": 0, "last_activity_date": 1436964813, "creation_date": 1436964813, "answer_id": 31430980, "question_id": 31428731, "link": "https://stackoverflow.com/questions/31428731/scrape-only-visible-elements-with-nokogiri/31430980#31430980", "title": "Scrape only visible elements with Nokogiri", "body": "<p>You can specify to ignore hidden elements like this:</p>\n\n<pre><code>page = Nokogiri::HTML(open(url_path))\npage.at_xpath(\"//input[not (@type='hidden')]\") # get all visible input fields\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 3392082, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2bda83b02cc58c5e93dbc4972d2b5eba?s=128&d=identicon&r=PG&f=1", "display_name": "bojan92", "link": "https://stackoverflow.com/users/3392082/bojan92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "accepted_answer_id": 31430980, "answer_count": 2, "score": 1, "last_activity_date": 1436981976, "creation_date": 1436958433, "last_edit_date": 1436981976, "question_id": 31428731, "link": "https://stackoverflow.com/questions/31428731/scrape-only-visible-elements-with-nokogiri", "title": "Scrape only visible elements with Nokogiri", "body": "<p>I am trying to scrape some web-sites with Nokogiri like this </p>\n\n<pre><code>Nokogiri::HTML(open(url_path))\n</code></pre>\n\n<p>When I get this HTML I search for a value, but Nokogiri selects all elements including hidden ones which I don't need.</p>\n\n<p>How do I get only <code>display: block</code> elements or exclude <code>display: none</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 410, "user_id": 3616003, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a6007c4703439681dfab7d3b06e24be4?s=128&d=identicon&r=PG&f=1", "display_name": "urmurmur", "link": "https://stackoverflow.com/users/3616003/urmurmur"}, "edited": false, "score": 0, "creation_date": 1436957787, "post_id": 31428460, "comment_id": 50827417, "body": "How would this help? This only affect named route helpers. Sorry if my question is unclear."}, {"owner": {"reputation": 410, "user_id": 3616003, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a6007c4703439681dfab7d3b06e24be4?s=128&d=identicon&r=PG&f=1", "display_name": "urmurmur", "link": "https://stackoverflow.com/users/3616003/urmurmur"}, "edited": false, "score": 0, "creation_date": 1436958833, "post_id": 31428460, "comment_id": 50828079, "body": "That is really close but you have to put something inside <code>scope</code> block to define some routes inside."}], "tags": [], "owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "is_accepted": true, "score": 2, "last_activity_date": 1436959137, "last_edit_date": 1436959137, "creation_date": 1436957708, "answer_id": 31428460, "question_id": 31428370, "link": "https://stackoverflow.com/questions/31428370/add-scope-with-optional-parameters-to-routes/31428460#31428460", "title": "Add scope with optional parameters to routes", "body": "<p>Do this -</p>\n\n<pre><code>scope '/:class' do\n  resources :various_resources, path: ''\nend\n</code></pre>\n"}], "owner": {"reputation": 410, "user_id": 3616003, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a6007c4703439681dfab7d3b06e24be4?s=128&d=identicon&r=PG&f=1", "display_name": "urmurmur", "link": "https://stackoverflow.com/users/3616003/urmurmur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 1, "accepted_answer_id": 31428460, "answer_count": 1, "score": 1, "last_activity_date": 1437052720, "creation_date": 1436957484, "last_edit_date": 1437052720, "question_id": 31428370, "link": "https://stackoverflow.com/questions/31428370/add-scope-with-optional-parameters-to-routes", "title": "Add scope with optional parameters to routes", "body": "<p>I don't want to create admin scaffolds for any new resources. But I do want my models to be controlled by <code>Admin::VariousResourcesController</code>. I would like to pass a <code>:class</code> parameter to that controller so to instantiate that class and do all resourceful actions on it.</p>\n\n<p>The current URL looks like:</p>\n\n<pre><code>admin/various_resources?class=User&amp;role=Admin\n</code></pre>\n\n<p>But, I want the URL to look like this:</p>\n\n<pre><code>admin/various_resources/users/?role=Admin\n</code></pre>\n\n<p>How can I customize the structure of resourceful routes? What should I change in <code>routes.rb</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 1930, "user_id": 1337204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkzuG.jpg?s=128&g=1", "display_name": "tpbowden", "link": "https://stackoverflow.com/users/1337204/tpbowden"}, "is_accepted": true, "score": 14, "last_activity_date": 1436955848, "creation_date": 1436955848, "answer_id": 31427780, "question_id": 31427400, "link": "https://stackoverflow.com/questions/31427400/update-local-gem-source-code/31427780#31427780", "title": "Update local gem source code", "body": "<p>If you use <code>bundle config local.GEM_NAME /path/to/local/git/repository</code> from the command line then every time you reload your application it will load the latest source from your file system. </p>\n\n<p>To remove the changes (when you have pushed your code to GitHub or RubyGems), you need to run <code>bundle config --delete local.GEM_NAME</code></p>\n\n<p>Source: <a href=\"http://bundler.io/v1.10/git.html\" rel=\"noreferrer\">http://bundler.io/v1.10/git.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 2166701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c36d1b0ebe6089e768f31dcd84236c9?s=128&d=identicon&r=PG", "display_name": "ClikeX", "link": "https://stackoverflow.com/users/2166701/clikex"}, "is_accepted": false, "score": 4, "last_activity_date": 1469631343, "creation_date": 1469631343, "answer_id": 38616526, "question_id": 31427400, "link": "https://stackoverflow.com/questions/31427400/update-local-gem-source-code/38616526#38616526", "title": "Update local gem source code", "body": "<p>You can bump your Gem's version. Next time you run <code>bundle</code> your gem will be updated to the next iteration.</p>\n\n<pre><code>VERSION = \"1.0.0\"\n</code></pre>\n\n<p>Bump the patch version to</p>\n\n<pre><code>VERSION = \"1.0.1\"\n</code></pre>\n\n<p>Now just run <code>bundle</code>. Bundler will notice it and log <code>1.0.1 (was 1.0.0)</code> in the output.</p>\n"}], "owner": {"reputation": 1032, "user_id": 2374076, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9d95de929ee8e36e7b139b67d12125ab?s=128&d=identicon&r=PG", "display_name": "Sarun Intaralawan", "link": "https://stackoverflow.com/users/2374076/sarun-intaralawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4268, "favorite_count": 4, "accepted_answer_id": 31427780, "answer_count": 2, "score": 10, "last_activity_date": 1469631343, "creation_date": 1436954763, "last_edit_date": 1436964563, "question_id": 31427400, "link": "https://stackoverflow.com/questions/31427400/update-local-gem-source-code", "title": "Update local gem source code", "body": "<p>I'm testing a gem in a Rails project. </p>\n\n<p>The current Gemfile:</p>\n\n<pre><code>gem 'mygemname', path: '/path/to/my/gem'\n</code></pre>\n\n<p>When I edit a gem locally I can build the gem, remove the gem from <code>Gemfile</code>, run <code>bundle install</code>, add the gem back to the Gemfile and run <code>bundle install</code> again. Is there an easier way to do this locally?</p>\n"}, {"tags": ["ruby", "docker", "boot2docker", "apache-kafka"], "comments": [{"owner": {"reputation": 833, "user_id": 3189842, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nIdvX.jpg?s=128&g=1", "display_name": "Jon Hunter", "link": "https://stackoverflow.com/users/3189842/jon-hunter"}, "edited": false, "score": 0, "creation_date": 1436984037, "post_id": 31427267, "comment_id": 50845671, "body": "Should your consumer also be connecting to Zookeeper, not Kafka?"}, {"owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "reply_to_user": {"reputation": 833, "user_id": 3189842, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/nIdvX.jpg?s=128&g=1", "display_name": "Jon Hunter", "link": "https://stackoverflow.com/users/3189842/jon-hunter"}, "edited": false, "score": 0, "creation_date": 1437035511, "post_id": 31427267, "comment_id": 50866225, "body": "Actually I need to connect to Zookeeper, but I was using wrong library. As this one doesn&#39;t really take care of a Zookeeper in the middle, but this one does: <a href=\"https://github.com/joekiller/jruby-kafka\" rel=\"nofollow noreferrer\">github.com/joekiller/jruby-kafka</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1840, "user_id": 6402575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-SBN-wxV5mbU/AAAAAAAAAAI/AAAAAAAAAB4/I8S13KgJNVM/photo.jpg?sz=128", "display_name": "Kevin Li", "link": "https://stackoverflow.com/users/6402575/kevin-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1475645315, "creation_date": 1475645315, "answer_id": 39866037, "question_id": 31427267, "link": "https://stackoverflow.com/questions/31427267/kafka-setup-with-docker-using-kafka-rb-for-clients/39866037#39866037", "title": "Kafka setup with docker using kafka-rb for clients", "body": "<p>When does this error happened, running <code>wurstmeister/zookeeper</code> image or when u try to produce or consume message. </p>\n\n<p>why it report <code>Closing socket for /192.168.59.3</code>, should it be <code>192.168.59.103</code>, can u try to ping or telnet the kafka server in the places where u run the producer and consumer to see whether you can connect to it or not.</p>\n"}], "owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 419, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475645315, "creation_date": 1436954398, "question_id": 31427267, "link": "https://stackoverflow.com/questions/31427267/kafka-setup-with-docker-using-kafka-rb-for-clients", "title": "Kafka setup with docker using kafka-rb for clients", "body": "<p>I am completely new to Kafka and I have trouble getting it right.</p>\n\n<p>I have following setup with \"wurstmeister/kafka-docker\" for docker using docker-compose:</p>\n\n<pre><code>zookeeper:\n image: wurstmeister/zookeeper\n ports: \n   - \"2181:2181\"\nkafka:\n image: wurstmeister/kafka\n ports:\n   - \"9092:9092\"\n links: \n   - zookeeper:zk\n environment:\n   KAFKA_ADVERTISED_HOST_NAME: 192.168.59.103\n   # KAFKA_AUTO_CREATE_TOPCIS_ENABLE: 'true'\n   KAFKA_CREATE_TOPICS: \"events:1:1\"\n volumes:\n   - /var/run/docker.sock:/var/run/docker.sock\n</code></pre>\n\n<p>For a producer and consumer I am using ruby gem \"kafka-rb\".</p>\n\n<p>Producer:</p>\n\n<pre><code>require 'kafka'\nproducer = Kafka::Producer.new({\n    host: \"192.168.59.103\",\n    port: 9092,\n    topic: \"events\"\n})\n\n1000000.times do |i|\n    message = Kafka::Message.new(\"Message #{i}\")\n    producer.push(message)\nend\n</code></pre>\n\n<p>Consumer:</p>\n\n<p>require 'kafka'</p>\n\n<pre><code>consumer = Kafka::Consumer.new({\n    host: \"192.168.59.103\",\n    port: 9092,\n    topic: \"events\"\n})\n\nconsumer.loop do |messages|\n    puts \"Received\"\n    puts messages\nend\n</code></pre>\n\n<p>But I am still getting refused connections or error:</p>\n\n<pre><code>[2015-07-15 09:50:49,769] ERROR Closing socket for /192.168.59.3 because of error (kafka.network.Processor)\nkafka_1     | java.nio.BufferUnderflowException\nkafka_1     |   at java.nio.HeapByteBuffer.get(HeapByteBuffer.java:145)\nkafka_1     |   at java.nio.ByteBuffer.get(ByteBuffer.java:692)\nkafka_1     |   at kafka.api.ApiUtils$.readShortString(ApiUtils.scala:38)\nkafka_1     |   at kafka.api.LeaderAndIsrRequest$.readFrom(LeaderAndIsrRequest.scala:108)\nkafka_1     |   at kafka.api.RequestKeys$$anonfun$5.apply(RequestKeys.scala:43)\nkafka_1     |   at kafka.api.RequestKeys$$anonfun$5.apply(RequestKeys.scala:43)\nkafka_1     |   at kafka.network.RequestChannel$Request.&lt;init&gt;(RequestChannel.scala:50)\nkafka_1     |   at kafka.network.Processor.read(SocketServer.scala:450)\nkafka_1     |   at kafka.network.Processor.run(SocketServer.scala:340)\nkafka_1     |   at java.lang.Thread.run(Thread.java:701)\n</code></pre>\n\n<p>Is there something fundamentally wrong with the setup? Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-debug"], "comments": [{"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 1, "creation_date": 1436954208, "post_id": 31427083, "comment_id": 50825250, "body": "Please post <code>query_model.rb</code> content"}], "answers": [{"comments": [{"owner": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "edited": false, "score": 0, "creation_date": 1436954946, "post_id": 31427235, "comment_id": 50825704, "body": "Thank you. Not sure if I understand completely though. What if I didnt use a constructor in the class, how/where would I define query_hash so that this works? Could I use a parent class and just define it once in there and all the classes inherit it or can I not make it an instance variable? Please clarify some of these doubts i have. Thank you!"}, {"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "reply_to_user": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "edited": false, "score": 0, "creation_date": 1436955598, "post_id": 31427235, "comment_id": 50826126, "body": "@HorseVoice, yes - you can go with a single parent class that others can inherit from, and keep the <code>@query_hash</code> initialization there. As far as it would work, I don&#39;t know enough about your code to advise this particular approach. Using inheritance <i>only for decreasing amount of code</i> is not the best idea, but if all of these classes seem to be a subtype, this might be a good choice. Not sure if this clarifies or produces more questions (software architecture is not easy), but with limited knowledge about your system this is the only answer. Regards!"}], "tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": true, "score": 1, "last_activity_date": 1436954302, "creation_date": 1436954302, "answer_id": 31427235, "question_id": 31427083, "link": "https://stackoverflow.com/questions/31427083/nomethoderror-undefined-method-for-nilnilclass/31427235#31427235", "title": "NoMethodError undefined method `[]=&#39; for nil:NilClass", "body": "<p>The problem is when you initialize your <code>@query_hash</code>. In all your classes they are initialized in wrong scope. To fix it, you should move <code>@query_hash = Hash.new</code> to <code>initialize</code> method, like: </p>\n\n<pre><code>class RangeCriteria\n  def initialize\n    @query_hash = Hash.new\n  end\n    # ...\nend\n\nclass RangeBuilder\n  def initialize\n    @query_hash = Hash.new\n  end\n    # ...\nend\n\nclass Bool\n  def initialize\n    @query_hash = Hash.new\n  end\n    # ...\nend\n</code></pre>\n\n<p>Hope that helps.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1197, "favorite_count": 0, "accepted_answer_id": 31427235, "answer_count": 1, "score": 0, "last_activity_date": 1436964203, "creation_date": 1436953944, "last_edit_date": 1436964203, "question_id": 31427083, "link": "https://stackoverflow.com/questions/31427083/nomethoderror-undefined-method-for-nilnilclass", "title": "NoMethodError undefined method `[]=&#39; for nil:NilClass", "body": "<p>I created multiple classes with one test method to test wither the ruby objects get serialized correctly.</p>\n\n<p>The error returned:</p>\n\n<pre><code>undefined method `[]=' for nil:NilClass\n    from /Users/horse/workspace/queryapi/app/models/query_model.rb:193:in `serialize'\n</code></pre>\n\n<p>I run the below test_query method through the rails console by initializing QueryModelTester and then invoking test_query() method on that object.</p>\n\n<p>My code:</p>\n\n<pre><code>class QueryModelTester\n  def test_query\n    must = Must.new\n    range_criteria = RangeCriteria.new \n    range_criteria.gte = 20140712\n    range_criteria.lte = 1405134711\n\n    range = RangeBuilder.new\n    range.search_field = \"created_time\"\n    range.range_criteria = range_criteria\n\n    must.range = range\n    bool = Bool.new\n    bool.must = must\n\n    main_query = bool.serialize\n    puts main_query\n  end\nend\n</code></pre>\n\n<p>Here are the model classes the above class is testing:</p>\n\n<pre><code>class RangeCriteria    \n  @query_hash = Hash.new\n  attr_accessor :gte, :lte\n\n  def serialize\n    if(@gte.present?)\n      @query_hash[:gte] = @gte\n    end\n\n    if(@lte.present?)\n      @query_hash[:lte] = @lte\n    end\n\n    if(@gte.present? || @lte.present?) \n      return @query_hash\n    end\n  end\nend\n\n\nclass RangeBuilder\n  @query_hash = Hash.new\n  attr_accessor :search_field, :range_criteria\n\n  def serialize\n    if(@search_field.present?)\n      @query_hash[@search_field] = @range_criteria.serialize\n      return @query_hash[:range] = @query_hash\n    end\n  end    \nend\n\nclass Bool\n  @query_hash = {}\n  attr_accessor :must\n\n  def serialize\n    if( @must.present? )\n      @query_hash[:must] = @must.serialize\n      return @query_hash[:bool] = @query_hash\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "environment-variables"], "comments": [{"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1436953529, "post_id": 31426702, "comment_id": 50824779, "body": "Use dotenv gem <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">github.com/bkeepers/dotenv</a>"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1436953580, "post_id": 31426702, "comment_id": 50824824, "body": "I fix your questions, and suggest your read <a href=\"http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_02.html\" rel=\"nofollow noreferrer\"><code>Bash-Beginners-Guide</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 11597, "user_id": 473467, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2270d703967bfebb9cb555f85b3bb56b?s=128&d=identicon&r=PG", "display_name": "awendt", "link": "https://stackoverflow.com/users/473467/awendt"}, "is_accepted": false, "score": 2, "last_activity_date": 1436953464, "creation_date": 1436953464, "answer_id": 31426899, "question_id": 31426702, "link": "https://stackoverflow.com/questions/31426702/how-to-start-rails-server-with-environment-variables-set/31426899#31426899", "title": "How to start Rails server with environment variables set?", "body": "<p>Bundle the <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow\">dotenv-rails gem</a>, then create a <code>.env</code> file with the content:</p>\n\n<pre><code>VARIABLE=development\n</code></pre>\n\n<p>The gem picks up all variables from the file and sets them in your environment.</p>\n"}, {"tags": [], "owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "is_accepted": true, "score": 2, "last_activity_date": 1436953793, "creation_date": 1436953793, "answer_id": 31427018, "question_id": 31426702, "link": "https://stackoverflow.com/questions/31426702/how-to-start-rails-server-with-environment-variables-set/31427018#31427018", "title": "How to start Rails server with environment variables set?", "body": "<p>You have various options to do so:</p>\n\n<ol>\n<li><p>Declare your variables in <code>.bashrc</code> file and reload it.</p></li>\n<li><p>Use <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow\"><code>dotenv</code></a> gem.</p></li>\n<li><p>Use <a href=\"https://github.com/laserlemon/figaro\" rel=\"nofollow\"><code>figaro</code></a> gem.</p></li>\n</ol>\n\n<p>More info @ <a href=\"http://www.gotealeaf.com/blog/managing-environment-configuration-variables-in-rails\" rel=\"nofollow\">http://www.gotealeaf.com/blog/managing-environment-configuration-variables-in-rails</a></p>\n"}, {"tags": [], "owner": {"reputation": 322, "user_id": 4245281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0d133ef5e1e96233def1dba451f953?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Ivan", "link": "https://stackoverflow.com/users/4245281/pedro-ivan"}, "is_accepted": false, "score": 0, "last_activity_date": 1436962839, "creation_date": 1436962839, "answer_id": 31430253, "question_id": 31426702, "link": "https://stackoverflow.com/questions/31426702/how-to-start-rails-server-with-environment-variables-set/31430253#31430253", "title": "How to start Rails server with environment variables set?", "body": "<p>If you don't need the variable to be variating, you should put this into initializers or on a helper class.  If you're looking for enviroment, you don't need it because it's the default.</p>\n"}, {"tags": [], "owner": {"reputation": 19500, "user_id": 4488252, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/A66Rf.jpg?s=128&g=1", "display_name": "Vasily  Bodnarchuk", "link": "https://stackoverflow.com/users/4488252/vasily-bodnarchuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1581284880, "last_edit_date": 1581284880, "creation_date": 1581281509, "answer_id": 60141196, "question_id": 31426702, "link": "https://stackoverflow.com/questions/31426702/how-to-start-rails-server-with-environment-variables-set/60141196#60141196", "title": "How to start Rails server with environment variables set?", "body": "<h2>Solution</h2>\n\n<blockquote>\n  <p><strong>./.env</strong></p>\n</blockquote>\n\n<pre><code>APP_PORT=3000\nAPP_HOST=0.0.0.0\nENV=development\n\nDATABASE_NAME=batman\nDATABASE_USER=bat\nDATABASE_PASSWORD=1234\nDATABASE_PORT=5443\n</code></pre>\n\n<blockquote>\n  <p><strong>./start.sh</strong></p>\n  \n  <p>script that will run your rails app with all variables from <strong>./.env</strong></p>\n</blockquote>\n\n<pre><code>set -o allexport\nsource .env\nset +o allexport\nbundle exec rails s -p $APP_PORT -b $APP_HOST -e $ENV\n</code></pre>\n\n<p><a href=\"https://www.gnu.org/software/bash/manual/bash.html#The-Set-Builtin\" rel=\"nofollow noreferrer\"><em>set</em> command info</a></p>\n\n<blockquote>\n  <p>Do not forget to set access privileges to execute <strong>./start.sh</strong></p>\n</blockquote>\n\n<pre><code>chmod +x ./start.sh\n</code></pre>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Chmod\" rel=\"nofollow noreferrer\"><em>chmod</em> command info</a> </p>\n\n<h2>Usage</h2>\n\n<blockquote>\n  <p>just run command from the root folder of your rails app:</p>\n</blockquote>\n\n<pre><code>./start.sh\n</code></pre>\n"}], "owner": {"reputation": 6610, "user_id": 2714670, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2fce21ac773554431495e81aff597422?s=128&d=identicon&r=PG", "display_name": "gespinha", "link": "https://stackoverflow.com/users/2714670/gespinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6928, "favorite_count": 1, "accepted_answer_id": 31427018, "answer_count": 4, "score": 7, "last_activity_date": 1581284880, "creation_date": 1436952928, "last_edit_date": 1436953740, "question_id": 31426702, "link": "https://stackoverflow.com/questions/31426702/how-to-start-rails-server-with-environment-variables-set", "title": "How to start Rails server with environment variables set?", "body": "<p>I have the following command. I insert it on starting the <code>rails server</code></p>\n\n<pre><code>VARIABLE=development rails s\n</code></pre>\n\n<p>How do I make this variable start automatically, without having to wright it myself every time?</p>\n\n<p>So I would then just do this</p>\n\n<pre><code>rails s\n</code></pre>\n\n<p>and it would run automatically with that variable.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1436951454, "post_id": 31425794, "comment_id": 50823470, "body": "Use <code>.text</code>, something like <code>titles.text</code> gives you what do you want."}, {"owner": {"reputation": 199, "user_id": 3422527, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5ddbfa79c7231ea36913573de3d2359?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3422527/tony"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1436951775, "post_id": 31425794, "comment_id": 50823667, "body": "I&#39;m so embarassed thank you, I&#39;ve tried .text earlier but I was doing it in the controller which now I realize didn&#39;t change anything.  So I just called it in my view which is perfect :), if it&#39;s possible can you post that as the answer so that I may mark it correct."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1436982574, "post_id": 31426898, "comment_id": 50844760, "body": "While it seems like <code>titles.text</code> will work, in reality it&#39;s going to return a concatenated string of all text inside all found <code>title</code> tags, which is seldom what we want. After retrieving that, then we have to figure out how to split the text into separate/understandable strings."}], "tags": [], "owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "is_accepted": true, "score": 0, "last_activity_date": 1436953457, "creation_date": 1436953457, "answer_id": 31426898, "question_id": 31425794, "link": "https://stackoverflow.com/questions/31425794/convert-nokogiri-xml-document-into-array-of-strings/31426898#31426898", "title": "Convert Nokogiri XML Document into Array of Strings?", "body": "<p>For your case you should simply use <code>.text</code> to extract the content of tags. Something like <code>titles.text</code> would work.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1493058728, "last_edit_date": 1495542852, "creation_date": 1436983079, "answer_id": 31437721, "question_id": 31425794, "link": "https://stackoverflow.com/questions/31425794/convert-nokogiri-xml-document-into-array-of-strings/31437721#31437721", "title": "Convert Nokogiri XML Document into Array of Strings?", "body": "<p>You're dealing with RSS/Atom feeds which can contain multiple <code>title</code> tags. You need to iterate over all <code>title</code> nodes and extract their content separately, in a way that lets you keep track of their order and what article they're attached to:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::XML(&lt;&lt;EOT)\n&lt;feed xmlns=\"http://www.w3.org/2005/Atom\"&gt;\n  &lt;entry&gt;\n    &lt;title type=\"html\"&gt;\n      &lt;![CDATA[ First Post! ]]&gt;\n    &lt;/title&gt;\n    &lt;content type=\"html\"&gt;\n      &lt;![CDATA[\n        &lt;p&gt;I&amp;rsquo;m very excited to have finally got my site up and running along with this blog!&lt;/p&gt;]]&gt;\n    &lt;/content&gt;\n  &lt;/entry&gt;\n&lt;/feed&gt;\nEOT\n\ndoc.search('title').map(&amp;:text)\n# =&gt; [\"\\n       First Post! \\n    \"]\n</code></pre>\n\n<p>This returns an array of the text inside the <code>title</code> nodes. From there you can easily clean up each string, manipulate them, reuse them, whatever.</p>\n\n<pre><code>doc.search('title').map{ |s| s.text.strip }\n# =&gt; [\"First Post!\"]\n</code></pre>\n\n<p><code>search</code> returns a NodeSet, which is akin to an array of <code>title</code> nodes found in the document. If you don't iterate over them you'll get a concatenated string containing all their text, which is usually <em>NOT</em> what you want:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::XML(&lt;&lt;EOT)\n&lt;foo&gt;\n  &lt;title&gt;this&lt;/title&gt;\n  &lt;title&gt;is&lt;/title&gt;\n  &lt;title&gt;what&lt;/title&gt;\n  &lt;title&gt;you'd&lt;/title&gt;\n  &lt;title&gt;get&lt;/title&gt;\n&lt;/foo&gt;\nEOT\n\ndoc.search('title').text\n# =&gt; \"thisiswhatyou'dget\"\n</code></pre>\n\n<p>versus:</p>\n\n<pre><code>doc.search('title').map(&amp;:text)\n# =&gt; [\"this\", \"is\", \"what\", \"you'd\", \"get\"]\n</code></pre>\n\n<p>Trying to tear apart the first result is impossible unless you have prior knowledge of the document's structure which is usually not true. Iterating over the returned NodeSet will yield very usable results.</p>\n\n<p>To maintain consistency with the various <code>title</code> tags in a feed, you need to loop over the entries, then extract the embedded titles which is a bit different than what your sample XML and code shows:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::XML(&lt;&lt;EOT)\n&lt;feed xmlns=\"http://www.w3.org/2005/Atom\"&gt;\n  &lt;entry&gt;\n    &lt;title type=\"html\"&gt;\n      &lt;![CDATA[ First Post! ]]&gt;\n    &lt;/title&gt;\n    &lt;content type=\"html\"&gt;\n      &lt;![CDATA[\n        &lt;p&gt;I&amp;rsquo;m very excited to have finally got my site up and running along with this blog!&lt;/p&gt;]]&gt;\n    &lt;/content&gt;\n  &lt;/entry&gt;\n  &lt;entry&gt;\n    &lt;title type=\"html\"&gt;\n      &lt;![CDATA[ Second Post! ]]&gt;\n    &lt;/title&gt;\n    &lt;content type=\"html\"&gt;\n      &lt;![CDATA[\n        &lt;p&gt;blah&lt;/p&gt;]]&gt;\n    &lt;/content&gt;\n  &lt;/entry&gt;\n&lt;/feed&gt;\nEOT\n\ntitles = doc.search('entry').map { |entry|\n  entry.at('title').text.strip\n}\ntitles # =&gt; [\"First Post!\", \"Second Post!\"]\n</code></pre>\n\n<p>Or perhaps more usable:</p>\n\n<pre><code>titles_and_content = doc.search('entry').map { |entry|\n  [\n    entry.at('title').text.strip,\n    entry.at('content').text.strip\n  ]\n}\ntitles_and_content \n# =&gt; [[\"First Post!\",\n#      \"&lt;p&gt;I&amp;rsquo;m very excited to have finally got my site up and running along with this blog!&lt;/p&gt;\"],\n#     [\"Second Post!\", \"&lt;p&gt;blah&lt;/p&gt;\"]]\n</code></pre>\n\n<p>which returns the title and the content for each entry. From this you can easily build up code to extract the links to the articles, date of publishing, refresh-rates, original site, everything you'd want to know about an individual article and its source, then store it in a database for later regurgitation when requested.</p>\n\n<p>There are gems and scripts available for processing RDF, RSS and Atom feeds, however, years ago, when I had to write a huge aggregator for feeds, nothing was available that met my needs and I wrote one from scratch. I'd recommend trying to find one rather than reinvent that wheel, otherwise look through their source and learn from their experience. There are a number of things to do in code to be a good network-citizen that doesn't swamp the servers and get you banned.</p>\n\n<p>See \"<a href=\"https://stackoverflow.com/questions/43594656/how-to-avoid-joining-all-text-from-nodes-when-scraping\">How to avoid joining all text from Nodes when scraping</a>\" also.</p>\n"}], "owner": {"reputation": 199, "user_id": 3422527, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a5ddbfa79c7231ea36913573de3d2359?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/3422527/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1963, "favorite_count": 0, "accepted_answer_id": 31426898, "answer_count": 2, "score": 0, "last_activity_date": 1493058728, "creation_date": 1436950563, "question_id": 31425794, "link": "https://stackoverflow.com/questions/31425794/convert-nokogiri-xml-document-into-array-of-strings", "title": "Convert Nokogiri XML Document into Array of Strings?", "body": "<p>I'm creating a Ruby on Rails application and using Nokogiri to parse an XML file.  I'm trying to parse the XML file into mutable strings which I can manipulate to create other content.</p>\n\n<p>Here's a sample XML I'm using</p>\n\n<pre><code>&lt;feed xmlns=\"http://www.w3.org/2005/Atom\"&gt;\n  &lt;entry&gt;\n    &lt;title type=\"html\"&gt;\n      &lt;![CDATA[ First Post! ]]&gt;\n    &lt;/title&gt;\n    &lt;content type=\"html\"&gt;\n      &lt;![CDATA[\n        &lt;p&gt;I&amp;rsquo;m very excited to have finally got my site up and running along with this blog!&lt;/p&gt;]]&gt;\n    &lt;/content&gt;\n  &lt;/entry&gt;\n&lt;/feed&gt;\n</code></pre>\n\n<p>This is what I've done so far relating to my problem</p>\n\n<p>In my controller -</p>\n\n<pre><code>def index\n    @blog_title, @blog_post = parse_xml\nend\n\nprivate\ndef parse_xml\n    @xml_doc = Nokogiri::XML(open(\"atom.xml\"))\n    titles = @xml_doc.css(\"entry title\")\n    post = @xml_doc.css(\"content\")\n    return titles, post\nend\n</code></pre>\n\n<p>In my view -</p>\n\n<pre><code>&lt;% for i in 1..@blog_title.length %&gt;\n    &lt;li&gt;&lt;%= @blog_title[i-1] %&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;%= @blog_post[i-1] %&gt;&lt;/li&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>A sample output from the view (it returns a Nokogiri Element) -</p>\n\n<pre><code>&lt;title type=\"html\"&gt;&lt;![CDATA[First Post!]]&gt;&lt;/title&gt;\n</code></pre>\n\n<p>So ideally, I'd like to make all the Nokogiri::Element inside the Nokogiri::Document a string or make the entire array a String array.</p>\n\n<p>I've tried iterating through each element and calling .to_s but it doesn't seem to work.</p>\n\n<p>I've also tried calling Ruby::String methods such as slice and that doesn't work (for obvious reasons).</p>\n\n<p>The end result I'm trying to get at (using the sample output on my view) is to return only the following and none of the rest.</p>\n\n<pre><code>First Post!\n</code></pre>\n\n<p>Can anyone help me?  If I'm not clear enough or if someone needs to see more work, please feel free to ask!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "sinatra"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 2, "creation_date": 1436950119, "post_id": 31425405, "comment_id": 50822601, "body": "First store in CSV then destroy. I don&#39;t see any problem. You don&#39;t know how to write CSV?"}, {"owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "edited": false, "score": 0, "creation_date": 1436951370, "post_id": 31425405, "comment_id": 50823401, "body": "Because you probably don&#39;t want to keep a CSV file open for the entire transaction, you will probably want to append to an existing file. Check this thread for more info: <a href=\"http://stackoverflow.com/a/11426925/385532\">stackoverflow.com/a/11426925/385532</a>"}, {"owner": {"reputation": 207, "user_id": 2039486, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/0433b8361c39089e68aea3753d90a8ae?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/2039486/joe"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1436952539, "post_id": 31425405, "comment_id": 50824151, "body": "@YevgeniyAnfilofyev  I store record first in CVS and then destroy, what if in some case destroy failed? so my csv will not contain accurate deleted records right."}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1436952595, "post_id": 31425405, "comment_id": 50824191, "body": "If destroy failed just delete last line in your CSV. If it is into transaction, delete every line that was created in this trnsaction."}, {"owner": {"reputation": 207, "user_id": 2039486, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/0433b8361c39089e68aea3753d90a8ae?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/2039486/joe"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1436952782, "post_id": 31425405, "comment_id": 50824302, "body": "@YevgeniyAnfilofyev  Ok. Also I have used &quot;find_each&quot; to delete 50 lacs records. is this asynchronous process? If not, can you please suggest me asynchronous process to delete 50 lacs record?"}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1436953121, "post_id": 31425405, "comment_id": 50824510, "body": "I don&#39;t understand exactly what do you mean by <code>async</code> in this case. I bet you need to read this spec: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Batches.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Batches.html</a>"}, {"owner": {"reputation": 207, "user_id": 2039486, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/0433b8361c39089e68aea3753d90a8ae?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/2039486/joe"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1437031124, "post_id": 31425405, "comment_id": 50863698, "body": "@YevgeniyAnfilofyev , as our application will be responsible to handle &quot;delete operation&quot; from many different users through API, or some Scheduler at the same time, we planned to put the jobs in queue and then delete from the queue. so I meant &quot;Async&quot; in this case."}], "answers": [{"comments": [{"owner": {"reputation": 572, "user_id": 3984518, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/64hu0.jpg?s=128&g=1", "display_name": "pgblu", "link": "https://stackoverflow.com/users/3984518/pgblu"}, "edited": false, "score": 0, "creation_date": 1436969236, "post_id": 31429190, "comment_id": 50835803, "body": "Is the &#39;paranoia&#39; gem compatible with Sinatra? Or is it only for Rails?"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1437022196, "last_edit_date": 1437022196, "creation_date": 1436959821, "answer_id": 31429190, "question_id": 31425405, "link": "https://stackoverflow.com/questions/31425405/store-deleted-records-from-database-to-a-csv/31429190#31429190", "title": "Store deleted records from database to a CSV", "body": "<p><strong>Update:</strong>\nas I am not sure with <code>paranoia gem</code> is supported in Sinatra or not. I found another best option for both Rails/Sinatra..</p>\n\n<p>Use <strong><a href=\"https://github.com/airblade/paper_trail\" rel=\"nofollow\"><code>gem \"paper_trail\"</code></a></strong>\nPaperTrail lets you track changes to your models' data. It's good for auditing or versioning. You can see how a model looked at any stage in its lifecycle, revert it to any version, and even undelete it after it's been destroyed.</p>\n\n<p>In order to configure <code>PaperTrail</code> for usage with <strong><a href=\"http://www.sinatrarb.com/\" rel=\"nofollow\">Sinatra</a></strong>, your Sinatra app must be using ActiveRecord 3 or 4. It is also recommended to use the <strong><a href=\"https://github.com/janko-m/sinatra-activerecord\" rel=\"nofollow\">Sinatra ActiveRecord Extension</a></strong> or something similar for managing your applications <code>ActiveRecord</code> connection in a manner similar to the way <code>Rails</code> does.</p>\n\n<hr>\n\n<p><strong>Old Answer:</strong></p>\n\n<p>I guess you should look at <strong><a href=\"https://github.com/radar/paranoia\" rel=\"nofollow\"><code>gem \"paranoia\"</code></a></strong> once, which is similar as your main goal. (Keep tracking of Deleted Object)</p>\n\n<p>when you called <code>destroy</code> on an Active Record object that it didn't actually <code>destroy</code> it, but just <strong>hide</strong> the record. <code>Paranoia</code> does this by setting a <code>deleted_at</code> field to the current time when you <code>destroy</code> a record, and hides it by scoping all queries on your model to only include records which do not have a <code>deleted_at</code> field.</p>\n\n<p>If you wish to actually destroy an object you may call <code>really_destroy!</code></p>\n"}], "owner": {"reputation": 207, "user_id": 2039486, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/0433b8361c39089e68aea3753d90a8ae?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/2039486/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1437022196, "creation_date": 1436949437, "last_edit_date": 1436963106, "question_id": 31425405, "link": "https://stackoverflow.com/questions/31425405/store-deleted-records-from-database-to-a-csv", "title": "Store deleted records from database to a CSV", "body": "<p>There are nearly 1 million User records, so we are removing non-active users to maintain table consistency. We are using the Sinatra framework.</p>\n\n<p>In our model : </p>\n\n<pre><code>class UserInfo &lt; ActiveRecord::Base\n  def delete_expired_users\n    begin\n      @expired_users = UserInfo.where(\"status != ? and UEndDate &lt; ?\", \"active\", 3.months.ago )      \n\n      @expired_users.find_each do |user|  # as we have 500k records to delete, used \"find_each\" IS THIS ASYNCHRONOUS WAY TO DELETE?\n        user.destroy\n        # I NEED TO STORE THIS DESTROYED USER IN A CSV FILE.\n      end\n\n    rescue\n      raise\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1436949423, "post_id": 31425367, "comment_id": 50822159, "body": "<code>boolTest = true</code>, don&#39;t add quotes."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1436949460, "post_id": 31425367, "comment_id": 50822179, "body": "Also, according to ruby conventions, should be <code>bool_test</code> (snake_case), not <code>boolTest</code> (camelCase)."}, {"owner": {"reputation": 806, "user_id": 2246365, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CjPJT.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2246365/justin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1436949496, "post_id": 31425367, "comment_id": 50822200, "body": "apologies I copied the wrong code I didnt have quote in the original"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1436949521, "post_id": 31425367, "comment_id": 50822213, "body": "here&#39;s another error. <code>until boolTest == true</code>"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1436949538, "post_id": 31425399, "comment_id": 50822229, "body": "Your answer is now invalid :)"}, {"owner": {"reputation": 806, "user_id": 2246365, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CjPJT.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2246365/justin"}, "edited": false, "score": 0, "creation_date": 1436949604, "post_id": 31425399, "comment_id": 50822268, "body": "ah so I cannot write <code>until boolTest = True</code> - because now it seems to work"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 806, "user_id": 2246365, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CjPJT.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2246365/justin"}, "edited": false, "score": 1, "creation_date": 1436949787, "post_id": 31425399, "comment_id": 50822380, "body": "@cocojay <code>=</code> is an <i>assignment</i>, you have to use <code>==</code>"}], "tags": [], "owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "is_accepted": true, "score": 6, "last_activity_date": 1436949974, "last_edit_date": 1436949974, "creation_date": 1436949426, "answer_id": 31425399, "question_id": 31425367, "link": "https://stackoverflow.com/questions/31425367/set-boolean-variable-in-ruby/31425399#31425399", "title": "Set boolean variable in Ruby", "body": "<p>Since you're using <code>until</code>, that's effectively writing out <code>while not boolTest</code>.  You can't use <code>=</code>, since that's reserved for assignment; instead, omit the boolean conditional.\n  There's no value in checking a boolean against a boolean; if you really wanted to keep it though, you'd have to use <code>==</code>.</p>\n\n<pre><code>boolTest = false\n\nuntil boolTest\n  puts \"Enter one fo these choices: add / update / display / delete?\"\n  choice = gets.chomp.downcase\n\n  if choice == \"add\" || choice == \"update\" || choice == \"display\" || choice == \"delete\"\n    boolTest = true\n  end\nend\n</code></pre>\n\n<p>As an optimization/readability tip, you can also adjust your boolean conditional so that there's no repeated statement with <code>choice</code>; you can declare all of thoe strings in an array, and check to see if <code>choice</code> exists in the array through <code>include?</code>.</p>\n\n<pre><code>boolTest = false\n\nuntil boolTest\n  puts \"Enter one fo these choices: add / update / display / delete?\"\n  choice = gets.chomp.downcase\n\n  boolTest = %w(add update display delete).include? choice\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "is_accepted": false, "score": 1, "last_activity_date": 1436950212, "creation_date": 1436950212, "answer_id": 31425685, "question_id": 31425367, "link": "https://stackoverflow.com/questions/31425367/set-boolean-variable-in-ruby/31425685#31425685", "title": "Set boolean variable in Ruby", "body": "<p>I think what you missed is just <code>\"==\"</code> in the <code>if condition</code>  <code>until boolTest = true</code> you should use a double = not a single one</p>\n\n<p>this will work for you</p>\n\n<pre><code>boolTest = false\n\nuntil boolTest == true\n  puts \"Enter one fo these choices: add / update / display / delete?\"\n  choice = gets.chomp.downcase\n\n  if choice == \"add\" || choice == \"update\" || choice == \"display\" || choice == \"delete\"\n    boolTest = true\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 806, "user_id": 2246365, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CjPJT.jpg?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/2246365/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18766, "favorite_count": 1, "accepted_answer_id": 31425399, "answer_count": 2, "score": 3, "last_activity_date": 1436950212, "creation_date": 1436949334, "last_edit_date": 1436949644, "question_id": 31425367, "link": "https://stackoverflow.com/questions/31425367/set-boolean-variable-in-ruby", "title": "Set boolean variable in Ruby", "body": "<p>This might be a silly question, but I just can't get it to work. Pretty sure I've missed something.</p>\n\n<p>I want to set a boolean to <code>false</code>\nThen set it to <code>true</code> only when a condition is met.</p>\n\n<pre><code>boolTest = false\n\nuntil boolTest = true\n    puts \"Enter one fo these choices: add / update / display / delete?\"\n    choice = gets.chomp.downcase\n\n    if choice == \"add\" || choice == \"update\" || choice == \"display\" || choice == \"delete\"\n        boolTest = true\n    end\nend\n</code></pre>\n\n<p>Only just starting to learn Ruby, so maybe I'm confusing the capabilities of other languages.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "associations", "has-many-through"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436948894, "post_id": 31425173, "comment_id": 50821839, "body": "The error is due to you haven&#39;t initialized <code>@course</code> in <code>add_student</code> method"}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436951051, "post_id": 31425173, "comment_id": 50823199, "body": "@Pavan I put <code>@course</code> inside the <code>add_student</code> method but still get the error. Can you look at my github repo and help me initizalize the <code>@course</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "edited": false, "score": 0, "creation_date": 1436951394, "post_id": 31426001, "comment_id": 50823421, "body": "and in your form you also need hidden field to set teacher_id #&lt;%= f.hidden_field :teacher_id, @teacher.id %&gt; also in teachers controller add method add student to the before filter for set_teacher."}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1436951856, "post_id": 31426001, "comment_id": 50823728, "body": "Ok. But when I try to assign a new student to a teacher, I get this: <a href=\"http://i.imgur.com/N5KTYXa.png\" rel=\"nofollow noreferrer\">i.imgur.com/N5KTYXa.png</a>. And when I check my data, <code>teacher_id</code> value is <code>null</code>. Any idea?"}, {"owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "reply_to_user": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1436952070, "post_id": 31426001, "comment_id": 50823861, "body": "how are you assigning teacher_id to student. using hidden field or some other way. can you share.?"}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1436952237, "post_id": 31426001, "comment_id": 50823948, "body": "I put this <code>&lt;%= f.hidden_field :teacher_id %&gt;</code> inside my add_student.html.erb file like you said. Is that correct? Btw, I put all my source code at my Github repo here <a href=\"https://github.com/zulhfreelancer/school\" rel=\"nofollow noreferrer\">github.com/zulhfreelancer/school</a>"}, {"owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "reply_to_user": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1436952338, "post_id": 31426001, "comment_id": 50824020, "body": "#&lt;%= f.hidden_field :teacher_id, teacher.id %&gt;  please put teacher.id after :teacher_id."}, {"owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "reply_to_user": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1436952375, "post_id": 31426001, "comment_id": 50824052, "body": "check my first comment.. to the answer.. i put the @teacher.id in hidden field to be set as value."}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1436952589, "post_id": 31426001, "comment_id": 50824187, "body": "Ok. I just updated my code. Now it says <code>undefined local variable or method `teacher&#39; for #&lt;#&lt;Class:0x007ff0be5c1dc0&gt;:0x007ff0c0078e48&gt;</code>. Any idea?"}, {"owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "reply_to_user": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1436952662, "post_id": 31426001, "comment_id": 50824246, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/83301/discussion-between-athar-and-zulhfreelancer\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "is_accepted": false, "score": 0, "last_activity_date": 1436951119, "creation_date": 1436951119, "answer_id": 31426001, "question_id": 31425173, "link": "https://stackoverflow.com/questions/31425173/how-to-perform-create-and-update-in-has-many-through-association/31426001#31426001", "title": "How to perform create and update in has_many :through association?", "body": "<p>pleas do this in your teachers_controller</p>\n\n<pre><code> def add_student\n    @course = Course.new\n end\n</code></pre>\n\n<p>currently your method is empty and @course is nil</p>\n"}, {"comments": [{"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1436952683, "post_id": 31426296, "comment_id": 50824260, "body": "I get this - <a href=\"http://i.imgur.com/54AqX2e.png\" rel=\"nofollow noreferrer\">i.imgur.com/54AqX2e.png</a>. Seems like it can&#39;t capture the teacher id right?"}, {"owner": {"reputation": 744, "user_id": 1885107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f3cb4e9a996ab41c7980d6954dfb68d?s=128&d=identicon&r=PG", "display_name": "Prakash Laxkar", "link": "https://stackoverflow.com/users/1885107/prakash-laxkar"}, "reply_to_user": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1436978611, "post_id": 31426296, "comment_id": 50842375, "body": "You need to include hidden field teacher_id as &lt;%= f.hidden_field :teacher_id, value: params[:id] %&gt;"}], "tags": [], "owner": {"reputation": 744, "user_id": 1885107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f3cb4e9a996ab41c7980d6954dfb68d?s=128&d=identicon&r=PG", "display_name": "Prakash Laxkar", "link": "https://stackoverflow.com/users/1885107/prakash-laxkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1436951870, "creation_date": 1436951870, "answer_id": 31426296, "question_id": 31425173, "link": "https://stackoverflow.com/questions/31425173/how-to-perform-create-and-update-in-has-many-through-association/31426296#31426296", "title": "How to perform create and update in has_many :through association?", "body": "<p>To make post or update request you need to pass url and method options to form_for tag. Follow followings step:-</p>\n\n<ol>\n<li>Inside add_student method, initialize @course variable.</li>\n<li><p>overwrite the from tag with options value as:-</p>\n\n<p>To create the record: &lt;%= form_for(@course, url: courses_path, method: :post) do |f| %></p>\n\n<p>To update the record: &lt;%= form_for(@course, url: course_path(@course), method: :put) do |f| %></p></li>\n</ol>\n\n<p>Thanks</p>\n"}], "owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1436951870, "creation_date": 1436948677, "last_edit_date": 1436950626, "question_id": 31425173, "link": "https://stackoverflow.com/questions/31425173/how-to-perform-create-and-update-in-has-many-through-association", "title": "How to perform create and update in has_many :through association?", "body": "<p><strong>Note</strong>:</p>\n\n<p>I put all of my source code for this app <a href=\"https://github.com/zulhfreelancer/school\" rel=\"nofollow\">here</a>.</p>\n\n<hr>\n\n<p>I have this inside my <strong>schema.rb</strong> file:</p>\n\n<pre><code>create_table \"courses\", force: :cascade do |t|\n    t.integer  \"teacher_id\"\n    t.integer  \"student_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer  \"quantity\"\n  end\n\n  create_table \"students\", force: :cascade do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"teachers\", force: :cascade do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n</code></pre>\n\n<p>My teacher model:</p>\n\n<pre><code>class Teacher &lt; ActiveRecord::Base\n    has_many :courses\n    has_many :students, :through =&gt; :courses\nend\n</code></pre>\n\n<p>My student model:</p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\n    has_many :courses\n    has_many :teachers, :through =&gt; :courses\nend\n</code></pre>\n\n<p>My course model:</p>\n\n<pre><code>class Course &lt; ActiveRecord::Base\n    belongs_to :teacher\n    belongs_to :student\nend\n</code></pre>\n\n<p>And I have empty <code>add_student</code> method inside my teachers_controller like this:</p>\n\n<pre><code>def add_student\n\nend\n</code></pre>\n\n<p>The <strong>add_student.html.erb</strong> inside <strong>views/teachers</strong> folder:</p>\n\n<pre><code>hello from add_student!\n\n&lt;%= form_for(@course) do |f| %&gt;\n  &lt;% if @course.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@course.errors.count, \"error\") %&gt; prohibited this course from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @course.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.select :student_id, Student.all.collect { |p| [ p.name, p.id ] } %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n      &lt;%= f.number_field :quantity %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>What I'm trying to do inside this <code>add_student</code> is adding <code>students</code> and <code>quantity</code> accordingly.</p>\n\n<p>But I get this error:</p>\n\n<pre><code>First argument in form cannot contain nil or be empty\n</code></pre>\n\n<p>Which refers to this line:</p>\n\n<pre><code>&lt;%= form_for(@course) do |f| %&gt;\n</code></pre>\n\n<p><strong>My questions</strong>: </p>\n\n<ol>\n<li><p>How to display all <code>students</code> name in a dropdown and give them <code>quantity</code> inside this <code>add_student</code> method?</p></li>\n<li><p>How to make this also works using POST request (like an API) so that I can simply POST params like this:</p></li>\n</ol>\n\n<p><code>[{\"student_id\":1, \"quantity\":2},{\"student_id\":2, \"quantity\":3}]</code></p>\n\n<ol start=\"3\">\n<li>How to make the <code>update</code> method for this <code>add_student</code> using form and <code>PUT</code> request so that I can pass the same style of params like such?</li>\n</ol>\n\n<p><code>[{\"student_id\":1, \"quantity\":2},{\"student_id\":2, \"quantity\":3}]</code></p>\n\n<p><strong>Note #1</strong>:</p>\n\n<p>This is all my routes:</p>\n\n<pre><code>Prefix Verb   URI Pattern                         Controller#Action\n        root GET    /                                   courses#index\n     courses GET    /courses(.:format)                  courses#index\n             POST   /courses(.:format)                  courses#create\n  new_course GET    /courses/new(.:format)              courses#new\n edit_course GET    /courses/:id/edit(.:format)         courses#edit\n      course GET    /courses/:id(.:format)              courses#show\n             PATCH  /courses/:id(.:format)              courses#update\n             PUT    /courses/:id(.:format)              courses#update\n             DELETE /courses/:id(.:format)              courses#destroy\n    students GET    /students(.:format)                 students#index\n             POST   /students(.:format)                 students#create\n new_student GET    /students/new(.:format)             students#new\nedit_student GET    /students/:id/edit(.:format)        students#edit\n     student GET    /students/:id(.:format)             students#show\n             PATCH  /students/:id(.:format)             students#update\n             PUT    /students/:id(.:format)             students#update\n             DELETE /students/:id(.:format)             students#destroy\n    teachers GET    /teachers(.:format)                 teachers#index\n             POST   /teachers(.:format)                 teachers#create\n new_teacher GET    /teachers/new(.:format)             teachers#new\nedit_teacher GET    /teachers/:id/edit(.:format)        teachers#edit\n     teacher GET    /teachers/:id(.:format)             teachers#show\n             PATCH  /teachers/:id(.:format)             teachers#update\n             PUT    /teachers/:id(.:format)             teachers#update\n             DELETE /teachers/:id(.:format)             teachers#destroy\n             GET    /teachers/:id/add_student(.:format) teachers#add_student\n</code></pre>\n\n<p><strong>Note #2</strong></p>\n\n<p>I put all of my source code for this app <a href=\"https://github.com/zulhfreelancer/school\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron"], "comments": [{"owner": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "edited": false, "score": 0, "creation_date": 1436962255, "post_id": 31424886, "comment_id": 50830279, "body": "I&#39;ll provide an example ActiveJob shortly."}], "answers": [{"tags": [], "owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "is_accepted": false, "score": 0, "last_activity_date": 1436949235, "last_edit_date": 1436949235, "creation_date": 1436948185, "answer_id": 31425018, "question_id": 31424886, "link": "https://stackoverflow.com/questions/31424886/run-rails-cron-job-with-a-life-span/31425018#31425018", "title": "Run rails cron job with a life span", "body": "<p>For triggered when an attribute (e.g. availability) in MyModel set to true and stop if it is set to be false, You need to create a method in <code>MyModel</code> like this -</p>\n\n<pre><code>  def other_process\n    if attr\n      MyModel.some_process\n      rake \"my:rake:task\"\n      command \"/usr/bin/my_great_command\"\n    end\n  end\n\n  every 3.hours do\n    MyModel.other_process\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "is_accepted": false, "score": 0, "last_activity_date": 1436962234, "creation_date": 1436962234, "answer_id": 31430052, "question_id": 31424886, "link": "https://stackoverflow.com/questions/31424886/run-rails-cron-job-with-a-life-span/31430052#31430052", "title": "Run rails cron job with a life span", "body": "<p>The new Rails Active Job is designed for this very use case.</p>\n\n<blockquote>\n  <p>Active Job is a framework for declaring jobs and making them run on a variety of queuing backends. These jobs can be everything from regularly scheduled clean-ups, to billing charges, to mailings. Anything that can be chopped up into small units of work and run in parallel, really.</p>\n</blockquote>\n\n<p><a href=\"http://edgeguides.rubyonrails.org/active_job_basics.html\" rel=\"nofollow\">http://edgeguides.rubyonrails.org/active_job_basics.html</a></p>\n"}], "owner": {"reputation": 347, "user_id": 4808432, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/eaedc4c7b54dcaf025894792bd0a4f0b?s=128&d=identicon&r=PG&f=1", "display_name": "xin buxu1", "link": "https://stackoverflow.com/users/4808432/xin-buxu1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1437064163, "creation_date": 1436947752, "last_edit_date": 1437064163, "question_id": 31424886, "link": "https://stackoverflow.com/questions/31424886/run-rails-cron-job-with-a-life-span", "title": "Run rails cron job with a life span", "body": "<p>My Rails cron job:</p>\n\n<pre><code>every 3.hours do\n  runner \"MyModel.some_process\"\n  rake \"my:rake:task\"\n  command \"/usr/bin/my_great_command\"\nend\n</code></pre>\n\n<p>I only want this triggered when an attribute in MyModel is set to true and stop when it is set to false. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "therubyracer"], "answers": [{"tags": [], "owner": {"reputation": 1615, "user_id": 2524123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gVqbX.jpg?s=128&g=1", "display_name": "rick", "link": "https://stackoverflow.com/users/2524123/rick"}, "is_accepted": false, "score": 3, "last_activity_date": 1436945277, "creation_date": 1436945277, "answer_id": 31424055, "question_id": 31423882, "link": "https://stackoverflow.com/questions/31423882/error-installing-rubyracer-with-osx-yosemite/31424055#31424055", "title": "error installing rubyracer with osx Yosemite", "body": "<p>If you have already installed <code>libv8</code> than remove it and install again.</p>\n\n<pre><code>gem uninstall libv8\nbrew install v8\ngem install therubyracer\ngem install libv8 -v '3.16.14.3' -- --with-system-v8\n</code></pre>\n\n<p>Or , you can install your specific version,</p>\n\n<pre><code>gem install libv8 -v 'XX.XX.XX' -- --with-system-v8 \n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4835719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e44538bbe422592654a3aaa92acc2e53?s=128&d=identicon&r=PG&f=1", "display_name": "Raghava Viswa Mani Kiran Peddi", "link": "https://stackoverflow.com/users/4835719/raghava-viswa-mani-kiran-peddi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436945277, "creation_date": 1436944780, "question_id": 31423882, "link": "https://stackoverflow.com/questions/31423882/error-installing-rubyracer-with-osx-yosemite", "title": "error installing rubyracer with osx Yosemite", "body": "<p>I have upgraded my ruby version and when i am installing ruby racer i am getting the following error. install libv8 as follows\ngem install libv8 -- --with-v8-lib</p>\n\n<pre><code>ERROR:  Error installing therubyracer:\nERROR: Failed to build gem native extension.\n\n/Users/ViswaMani/.rvm/rubies/ruby-2.1.1/bin/ruby extconf.rb\ncreating Makefile\nCompiling v8 for x64\nUsing python 2.7.6\nUsing compiler: /usr/bin/c++ (clang version 6.1.0)\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: file: /Users/ViswaMani/.rvm/gems/ruby-2.1.1@futura/gems/libv8-3.16.14.11/vendor/v8/out/x64.release/obj.target/preparser_lib/src/atomicops_internals_x86_gcc.o has no symbols\nIn file included from ../src/accessors.cc:28:\nIn file included from ../src/v8.h:60:\nIn file included from ../src/objects-inl.h:38:\nIn file included from ../src/elements.h:33:\nIn file included from ../src/heap.h:35:\nIn file included from ../src/incremental-marking.h:33:\nIn file included from ../src/mark-compact.h:32:\n../src/spaces.h:896:26: error: 'this' pointer cannot be null in well-defined C++ code; comparison may be assumed to always evaluate to true [-Werror,-Wtautological-undefined-compare]\n  bool exists() { return this != NULL &amp;&amp; code_range_ != NULL; }\n                         ^~~~    ~~~~\n../src/spaces.h:898:9: error: 'this' pointer cannot be null in well-defined C++ code; comparison may be assumed to always evaluate to false [-Werror,-Wtautological-undefined-compare]\n    if (this == NULL || code_range_ == NULL) return false;\n        ^~~~    ~~~~\n2 errors generated.\nmake[1]: *** [/Users/ViswaMani/.rvm/gems/ruby-2.1.1@futura/gems/libv8-3.16.14.11/vendor/v8/out/x64.release/obj.target/v8_base/src/accessors.o] Error 1\nmake: *** [x64.release] Error 2\n/Users/ViswaMani/.rvm/gems/ruby-2.1.1@futura/gems/libv8-3.16.14.11/ext/libv8/location.rb:36:in `block in verify_installation!': libv8 did not install properly, expected binary v8 archive '/Users/ViswaMani/.rvm/gems/ruby-2.1.1@futura/gems/libv8-3.16.14.11/vendor/v8/out/x64.release/obj.target/tools/gyp/libv8_base.a'to exist, but it was not found (Libv8::Location::Vendor::ArchiveNotFound)\n    from /Users/ViswaMani/.rvm/gems/ruby-2.1.1@futura/gems/libv8-3.16.14.11/ext/libv8/location.rb:35:in `each'\n    from /Users/ViswaMani/.rvm/gems/ruby-2.1.1@futura/gems/libv8-3.16.14.11/ext/libv8/location.rb:35:in `verify_installation!'\n    from /Users/ViswaMani/.rvm/gems/ruby-2.1.1@futura/gems/libv8-3.16.14.11/ext/libv8/location.rb:26:in `install!'\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "sorting", "ruby-1.8"], "answers": [{"tags": [], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "is_accepted": false, "score": 5, "last_activity_date": 1436945219, "creation_date": 1436945219, "answer_id": 31424039, "question_id": 31423821, "link": "https://stackoverflow.com/questions/31423821/ruby-sorting-an-array-skipping-the-first-element/31424039#31424039", "title": "Ruby: Sorting an Array, skipping the first element", "body": "<pre><code>ar[1..-1].sort { whatever you want }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 2, "last_activity_date": 1436945300, "creation_date": 1436945300, "answer_id": 31424063, "question_id": 31423821, "link": "https://stackoverflow.com/questions/31423821/ruby-sorting-an-array-skipping-the-first-element/31424063#31424063", "title": "Ruby: Sorting an Array, skipping the first element", "body": "<p>You can do it this way:</p>\n\n<pre><code>[ar.first] + ar[1..-1].sort{ |a,b| a[0] &lt;=&gt; b[0] }\n# =&gt; [[\"zzzz\", \"skip\", \"this\"], [\"EFP1\", \"drei\", \"drei\"], [\"EFP10\", \"zwei\", \"zwei\"], [\"EFP3\", \"eins\", \"eins\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": false, "score": 2, "last_activity_date": 1436946275, "last_edit_date": 1436946275, "creation_date": 1436945740, "answer_id": 31424199, "question_id": 31423821, "link": "https://stackoverflow.com/questions/31423821/ruby-sorting-an-array-skipping-the-first-element/31424199#31424199", "title": "Ruby: Sorting an Array, skipping the first element", "body": "<p>Others have explained how to get the right answer.</p>\n\n<p>As for why it doesn't work, sort simply doesn't expect \"next\". \"next\" is a language construct intended for a normal loop. <code>sort</code>, however, is a function that repeatedly asks another function for a result. As a normal Ruby function, it can't detect if you returned \"next\" because that's the equivalent of returning nil (or leaving the body empty). And so, it can't have, and doesn't have, any conventions about how to handle a \"next\" instance.</p>\n\n<p>It causes an error because nil is not a valid number to return from the |a,b| comparison.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1436948148, "last_edit_date": 1436948148, "creation_date": 1436947166, "answer_id": 31424667, "question_id": 31423821, "link": "https://stackoverflow.com/questions/31423821/ruby-sorting-an-array-skipping-the-first-element/31424667#31424667", "title": "Ruby: Sorting an Array, skipping the first element", "body": "<blockquote>\n  <p>but isn't there a more elegant way to do this?</p>\n</blockquote>\n\n<p>You could <a href=\"http://ruby-doc.org/core-1.8.7/Array.html#method-i-sort\" rel=\"nofollow\"><code>sort</code></a> the other elements and re-<a href=\"http://ruby-doc.org/core-1.8.7/Array.html#method-i-5B-5D-3D\" rel=\"nofollow\">assign</a> them:</p>\n\n<pre><code>ar = [5, 4, 3, 2, 1]\n\nar[1..-1] = ar[1..-1].sort\n\nar #=&gt; [5, 1, 2, 3, 4]\n</code></pre>\n\n<blockquote>\n  <p>I want to have the result [...] sortet by <code>\"EFP#\"</code></p>\n</blockquote>\n\n<p><a href=\"http://ruby-doc.org/core-1.8.7/Enumerable.html#method-i-sort_by\" rel=\"nofollow\"><code>sort_by</code></a> looks like the right tool:</p>\n\n<pre><code>ar = [[\"zzzz\", \"skip\"], [\"EFP3\", \"eins\"], [\"EFP10\", \"zwei\"], [\"EFP1\", \"drei\"]]\n\nar[1..-1] = ar[1..-1].sort_by { |s, _| s[/\\d+/].to_i }\n\nar #=&gt; [[\"zzzz\", \"skip\"], [\"EFP1\", \"drei\"], [\"EFP3\", \"eins\"], [\"EFP10\", \"zwei\"]]\n</code></pre>\n\n<p><code>s[/\\d+/].to_i</code> extracts the digits from <code>s</code> and converts it to an integer:</p>\n\n<pre><code>\"EFP1\"[/\\d+/].to_i  #=&gt; 1\n\"EFP3\"[/\\d+/].to_i  #=&gt; 3\n\"EFP10\"[/\\d+/].to_i #=&gt; 10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1436947326, "creation_date": 1436947326, "answer_id": 31424736, "question_id": 31423821, "link": "https://stackoverflow.com/questions/31423821/ruby-sorting-an-array-skipping-the-first-element/31424736#31424736", "title": "Ruby: Sorting an Array, skipping the first element", "body": "<p>The comparison returns -1, 0 or 1, so if you return 1 for the first it is sorted as the first element, as 1 it would become the last element.</p>\n\n<pre><code>ar.sort!{ |a,b|\n  if a == ar.first\n    -1\n  elsif a[0].length == b[0].length # compare length, otherwise it would be e.g. 10 &lt; 3\n    a[0] &lt;=&gt; b[0]\n  else\n    a[0].length &lt;=&gt; b[0].length\n  end\n}\n\n#=&gt;[[\"zzzz\", \"skip\", \"this\"], [\"EFP1\", \"drei\", \"drei\"], [\"EFP3\", \"eins\", \"eins\"], [\"EFP10\", \"zwei\", \"zwei\"]]\n</code></pre>\n"}], "owner": {"reputation": 1217, "user_id": 4108363, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IWGPW.png?s=128&g=1", "display_name": "LPrc", "link": "https://stackoverflow.com/users/4108363/lprc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1266, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1436948148, "creation_date": 1436944590, "last_edit_date": 1436947662, "question_id": 31423821, "link": "https://stackoverflow.com/questions/31423821/ruby-sorting-an-array-skipping-the-first-element", "title": "Ruby: Sorting an Array, skipping the first element", "body": "<p>I want to sort an Array of Arrays of Strings by the first String skipping the first Array but I just don't have an idea how to do it using the build-in <code>sort</code> method. I could copy the whole array without the first element and sort the resutling Array then but isn't there a more elegant way to do this?</p>\n\n<pre><code>ar = [[\"zzzz\", \"skip\", \"this\"], [\"EFP3\",\"eins\",\"eins\"], [\"EFP10\",\"zwei\",\"zwei\"], [\"EFP1\",\"drei\",\"drei\"]]\nar.sort!{ |a,b|\n  if a == ar.first   # why doesn't \n    next             # this\n  end                # work ?\n\n  # compare length, otherwise it would be e.g. 10 &lt; 3\n  if a[0].length == b[0].length\n    a[0] &lt;=&gt; b[0]\n  else\n    a[0].length &lt;=&gt; b[0].length\n  end\n}\n</code></pre>\n\n<p>I want to have the result like this:</p>\n\n<pre><code>[\"zzzz\", \"skip\", \"this\"], [\"EFP1\",\"drei\",\"drei\"], [\"EFP3\",\"eins\",\"eins\"], [\"EFP10\",\"zwei\",\"zwei\"]\n</code></pre>\n\n<p>sortet by <code>\"EFP#\"</code></p>\n\n<p><strong>edit:</strong> I'm using Ruby 1.8, if it matters.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1169, "user_id": 2980650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/245ca292e170237592a28dcac223a196?s=128&d=identicon&r=PG&f=1", "display_name": "Mezbah", "link": "https://stackoverflow.com/users/2980650/mezbah"}, "edited": false, "score": 0, "creation_date": 1436943821, "post_id": 31423485, "comment_id": 50818730, "body": "see this link : <a href=\"http://apidock.com/ruby/DateTime/strftime\" rel=\"nofollow noreferrer\">apidock.com/ruby/DateTime/strftime</a>  its may help"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1436943847, "post_id": 31423485, "comment_id": 50818750, "body": "how is <code>2014-11-05</code> Aug or July?"}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1436944371, "post_id": 31423485, "comment_id": 50819051, "body": "@Vedprakash Singh what you want to do exactly?"}, {"owner": {"reputation": 494, "user_id": 4797935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YkWn1.jpg?s=128&g=1", "display_name": "Vedprakash Singh", "link": "https://stackoverflow.com/users/4797935/vedprakash-singh"}, "edited": false, "score": 0, "creation_date": 1436944416, "post_id": 31423485, "comment_id": 50819080, "body": "i want to convert datetime to acedmic year . for eg. i have the datetime &#39;2014-11-05 00:00:00 &#39; and i want it converted to period &#39;Aug 2014 &#39;  to July2015&#39;"}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1436944442, "post_id": 31423485, "comment_id": 50819095, "body": "<code>2014-11-05</code> this date you want as Nov 2014?"}, {"owner": {"reputation": 494, "user_id": 4797935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YkWn1.jpg?s=128&g=1", "display_name": "Vedprakash Singh", "link": "https://stackoverflow.com/users/4797935/vedprakash-singh"}, "edited": false, "score": 0, "creation_date": 1436944670, "post_id": 31423485, "comment_id": 50819235, "body": "2014-11-05  as this date is fall in between period Aug 2014 to July2015. i want it converted into academic year which start from &#39;Aug &#39;  and end on july"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 5, "creation_date": 1436945077, "post_id": 31423485, "comment_id": 50819496, "body": "@VedprakashSingh please edit your question and provide more details. Mentioning &quot;academic year&quot; would probably help to understand your problem. Also keep in mind that academic years are handled differently across the globe."}], "answers": [{"comments": [{"owner": {"reputation": 494, "user_id": 4797935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YkWn1.jpg?s=128&g=1", "display_name": "Vedprakash Singh", "link": "https://stackoverflow.com/users/4797935/vedprakash-singh"}, "edited": false, "score": 0, "creation_date": 1436945417, "post_id": 31424032, "comment_id": 50819704, "body": "Is there any other inbuilt method in Ruby date for this functionality"}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "reply_to_user": {"reputation": 494, "user_id": 4797935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YkWn1.jpg?s=128&g=1", "display_name": "Vedprakash Singh", "link": "https://stackoverflow.com/users/4797935/vedprakash-singh"}, "edited": false, "score": 1, "creation_date": 1436945521, "post_id": 31424032, "comment_id": 50819763, "body": "@VedprakashSingh there are different definitions in globe for the academic year so there is no as such any in built method for this"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1436945608, "post_id": 31424032, "comment_id": 50819823, "body": "You can use <code>t.month</code> and <code>t.year</code> instead of <code>t.strftime(&quot;%m&quot;).to_i</code> and <code>t.strftime(&#39;%Y&#39;).to_i</code>."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1436945693, "post_id": 31424032, "comment_id": 50819876, "body": "@Stefan : Oh yes thanks for the point. I update my answer.. as always from you many things have to learn. Thanks again"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 1, "last_activity_date": 1436946177, "last_edit_date": 1495535059, "creation_date": 1436945185, "answer_id": 31424032, "question_id": 31423485, "link": "https://stackoverflow.com/questions/31423485/how-to-convert-datetime-to-year-wise-like-aug-2014-to-july-2015-in-ruby/31424032#31424032", "title": "How to convert datetime to year wise like aug 2014 to july 2015 in ruby?", "body": "<p>Try this:</p>\n\n<pre><code>t = Time.now\n#=&gt; 2015-07-15 12:55:26 +0530\nif t.strftime(\"%m\").to_i &lt; 8\n  puts \"Aug #{t.strftime('%Y').to_i - 1} to July #{t.strftime('%Y')}\"\nelse\n  puts \"Aug #{t.strftime('%Y')} to July #{t.strftime('%Y').to_i + 1}\"\nend\n#=&gt; Aug 2014 to July 2015\n</code></pre>\n\n<p>As you mention in comment that academic year which start from <code>Aug</code> and end on <code>July</code> so as per today's date it will display <code>Aug 2014 to July 2015</code></p>\n\n<p>As <a href=\"https://stackoverflow.com/questions/31423485/how-to-convert-datetime-to-year-wise-like-aug-2014-to-july-2015-in-ruby#comment-50819823\">@Stefan</a> has mention in comment, you can try this too for easy understanding and clean way(without <code>strftime</code>):</p>\n\n<pre><code>t = Time.now\nif t.month &lt; 8\n  puts \"Aug #{t.year - 1} to July #{t.year}\"\nelse\n  puts \"Aug #{t.year} to July #{t.year + 1}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 494, "user_id": 4797935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YkWn1.jpg?s=128&g=1", "display_name": "Vedprakash Singh", "link": "https://stackoverflow.com/users/4797935/vedprakash-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1436962675, "accepted_answer_id": 31424032, "answer_count": 1, "score": -3, "last_activity_date": 1436946177, "creation_date": 1436943496, "last_edit_date": 1436945451, "question_id": 31423485, "link": "https://stackoverflow.com/questions/31423485/how-to-convert-datetime-to-year-wise-like-aug-2014-to-july-2015-in-ruby", "closed_reason": "Needs details or clarity", "title": "How to convert datetime to year wise like aug 2014 to july 2015 in ruby?", "body": "<p>I have datetime like  <code>2014-11-05 00:00:00</code> which lies in the year of 2015 to 2016.\nI have to represent this to <code>Aug 2014 to Jul 2015</code> format </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1436942707, "post_id": 31423208, "comment_id": 50818095, "body": "Please, show your controller code"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436943109, "post_id": 31423208, "comment_id": 50818303, "body": "Can you post your models please?"}, {"owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "edited": false, "score": 0, "creation_date": 1436943266, "post_id": 31423208, "comment_id": 50818390, "body": "@Dan.........try my answer."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5097116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sfaH_uUD9e4/AAAAAAAAAAI/AAAAAAAAAJY/nNd8s6xpX0E/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/5097116/dan"}, "edited": false, "score": 0, "creation_date": 1436943451, "post_id": 31423317, "comment_id": 50818503, "body": "That fixes all errors, but when I submit the form it appears as though it doesn&#39;t create a new post."}, {"owner": {"reputation": 15, "user_id": 5097116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sfaH_uUD9e4/AAAAAAAAAAI/AAAAAAAAAJY/nNd8s6xpX0E/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/5097116/dan"}, "edited": false, "score": 0, "creation_date": 1436943991, "post_id": 31423317, "comment_id": 50818840, "body": "NoMethodError in Breads#show Showing C:/Users/Daniel/projects/toast/app/views/breads/show.html.er&zwnj;&#8203;b where line #28 raised:  undefined method `to_a&#39; for #&lt;Bread:0x97ec690&gt;"}, {"owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "reply_to_user": {"reputation": 15, "user_id": 5097116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sfaH_uUD9e4/AAAAAAAAAAI/AAAAAAAAAJY/nNd8s6xpX0E/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/5097116/dan"}, "edited": false, "score": 0, "creation_date": 1436944962, "post_id": 31423317, "comment_id": 50819416, "body": "@Dan.......you don&#39;t need this line in form <code>&lt;%= p.association :bread, collection: @bread %&gt;</code> beacuse posts are already belongs to bread"}, {"owner": {"reputation": 15, "user_id": 5097116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sfaH_uUD9e4/AAAAAAAAAAI/AAAAAAAAAJY/nNd8s6xpX0E/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/5097116/dan"}, "edited": false, "score": 0, "creation_date": 1436945761, "post_id": 31423317, "comment_id": 50819912, "body": "Your solution with Pavan&#39;s update to the Bread model fixed the form. Thank you"}], "tags": [], "owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "is_accepted": false, "score": 1, "last_activity_date": 1436944975, "last_edit_date": 1436944975, "creation_date": 1436942953, "answer_id": 31423317, "question_id": 31423208, "link": "https://stackoverflow.com/questions/31423208/form-for-a-belongs-to-model-in-show-of-parent-model/31423317#31423317", "title": "form_for a &quot;belongs_to&quot; model in &#39;show&#39; of parent model", "body": "<p>Do this -</p>\n\n<pre><code>  &lt;%= simple_form_for @bread do |b| %&gt;\n    &lt;%= b.simple_fields_for(:posts,@bread.posts.build) do |p| %&gt;\n      &lt;%= p.input :uploader %&gt;\n      &lt;%= p.input :comment %&gt;\n      &lt;%= p.file_field :attachment %&gt;&lt;br&gt;\n      &lt;%= p.button :submit %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>and make changes in beard_params</p>\n\n<pre><code> def beard_params\n   params.require(:bread).permit!\n end\n</code></pre>\n\n<p>Here <code>permit!</code> requires all parameters and for other way you can use @pawan's answer.</p>\n"}, {"tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1436944575, "last_edit_date": 1436944575, "creation_date": 1436943667, "answer_id": 31423533, "question_id": 31423208, "link": "https://stackoverflow.com/questions/31423208/form-for-a-belongs-to-model-in-show-of-parent-model/31423533#31423533", "title": "form_for a &quot;belongs_to&quot; model in &#39;show&#39; of parent model", "body": "<p>Extending <strong>@Amit Suroliya</strong> answer, you need to add <code>posts_attributes</code> to <code>bread_params</code></p>\n\n<pre><code>def bread_params\n   params.require(:bread).permit(:id, :bread_type, posts_attributes: [:id, :uploader, :comment, :bread_id, :attachment])\nend\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>You also need to add <code>accepts_nested_attributes_for :posts</code> in <strong><em>Bread</em></strong> model.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 5097116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sfaH_uUD9e4/AAAAAAAAAAI/AAAAAAAAAJY/nNd8s6xpX0E/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/5097116/dan"}, "edited": false, "score": 0, "creation_date": 1436944190, "post_id": 31423634, "comment_id": 50818949, "body": "That does make a lot of sense. I&#39;ll give it a shot now. Is it possible to create a &quot;New Post&quot; page in which I allow the user to select which &#39;bread&#39; to attach the &#39;post&#39; to?"}, {"owner": {"reputation": 788, "user_id": 2251481, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8c01631722b81d94d12362706eaa59e3?s=128&d=identicon&r=PG", "display_name": "Jan Strn&#225;dek", "link": "https://stackoverflow.com/users/2251481/jan-strn%c3%a1dek"}, "reply_to_user": {"reputation": 15, "user_id": 5097116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sfaH_uUD9e4/AAAAAAAAAAI/AAAAAAAAAJY/nNd8s6xpX0E/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/5097116/dan"}, "edited": false, "score": 0, "creation_date": 1436944202, "post_id": 31423634, "comment_id": 50818960, "body": "Or If you want to add posts dynamically on edit page, you can use excelent <a href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow noreferrer\">github.com/nathanvda/cocoon</a> gem ..."}, {"owner": {"reputation": 788, "user_id": 2251481, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8c01631722b81d94d12362706eaa59e3?s=128&d=identicon&r=PG", "display_name": "Jan Strn&#225;dek", "link": "https://stackoverflow.com/users/2251481/jan-strn%c3%a1dek"}, "reply_to_user": {"reputation": 15, "user_id": 5097116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sfaH_uUD9e4/AAAAAAAAAAI/AAAAAAAAAJY/nNd8s6xpX0E/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/5097116/dan"}, "edited": false, "score": 0, "creation_date": 1436944826, "post_id": 31423634, "comment_id": 50819328, "body": "Yes it is possible, but it is violation of REST design :) Someone show me there is possibilities to open chat room for question, not sure how yet"}, {"owner": {"reputation": 15, "user_id": 5097116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sfaH_uUD9e4/AAAAAAAAAAI/AAAAAAAAAJY/nNd8s6xpX0E/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/5097116/dan"}, "edited": false, "score": 0, "creation_date": 1436945691, "post_id": 31423634, "comment_id": 50819875, "body": "Thank you for the help. @Amit provided a solution to the problem and you provided guidance on proper design. I should be able to use all answers to improve my project!"}], "tags": [], "owner": {"reputation": 788, "user_id": 2251481, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8c01631722b81d94d12362706eaa59e3?s=128&d=identicon&r=PG", "display_name": "Jan Strn&#225;dek", "link": "https://stackoverflow.com/users/2251481/jan-strn%c3%a1dek"}, "is_accepted": false, "score": 0, "last_activity_date": 1436944002, "creation_date": 1436944002, "answer_id": 31423634, "question_id": 31423208, "link": "https://stackoverflow.com/questions/31423208/form-for-a-belongs-to-model-in-show-of-parent-model/31423634#31423634", "title": "form_for a &quot;belongs_to&quot; model in &#39;show&#39; of parent model", "body": "<p>Iam sorry, but this is not good way at all, try to don't abuse rails and rest routes :)</p>\n\n<p>Here is easy example how to do that:</p>\n\n<p><strong>config/routes.rb</strong></p>\n\n<pre><code>resources :bread do \n  resources :posts\nend\n</code></pre>\n\n<p>This means there will be routes like:</p>\n\n<pre><code>bin/rake routes\n\nbreads - breads#index\nbread/:id - breads#show\netc..\nand most important\nbread/:bread_id/posts/:id\n...\n</code></pre>\n\n<p>That means posts are nested resources for bread...</p>\n\n<p><strong>app/controllers/breads_controller.rb</strong></p>\n\n<pre><code>controller BreadsController &lt; BaseController\n   before_action :find_bread, except: %i(index create new)\n\n   .... action new, update, edit etc..\nend\n</code></pre>\n\n<p>but now its the important part in PostsController..</p>\n\n<p><strong>app/controllers/posts_controller.rb</strong></p>\n\n<pre><code>controller PostsController &lt; BaseController\n   before_action :find_bread\n   before_action :find_post, except: %i(index new create)\n   before_action :build_post, only: %i(new create)\n\n   .... action new, update, edit etc..\n\n   # Example with :return link \n   def create\n    if @post.save\n       if params[:back] == 'bread_show'\n         redirect_to bread_path(@bread)\n       else\n         redirect_to bread_post_path(@bread, @post)\n       end\n     else\n       render 'new'\n     end\n   end\n\n   private\n\n   def build_post\n      if params[:post]\n         @post = @bread.posts.build(post_params)\n      else\n         @post = @bread.posts.build\n      end\n   end\n\n   def find_post\n     @post = @bread.posts.find(params[:id])\n   end\n\n   def find_bread\n     @bread = Bread.find(params[:bread_id])\n   end\n\n   ... post params ...\nend\n</code></pre>\n\n<p>Now you have rest full routes and you're able to do what you want without such a pain and clean</p>\n\n<pre><code>... output hidden\n\n&lt;%= @bread.id %&gt;\n\n&lt;%= simple_form_for @bread.posts.build do |b| %&gt;\n  &lt;%= p.input :uploader %&gt;\n  &lt;%= p.input :comment %&gt;\n  &lt;%= p.file_field :attachment %&gt;&lt;br&gt;\n  &lt;%# Send back link to return on proper page %&gt;\n  &lt;%= p.hidden_field :back, 'bread_show' %&gt;\n  &lt;%= p.button :submit %&gt;\n&lt;% end %&gt;\n\n&lt;%= link_to 'Back', breads_path %&gt;\n</code></pre>\n\n<p>There can be some mistakes, I write this code from memory, can't try that :(</p>\n"}], "owner": {"reputation": 15, "user_id": 5097116, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sfaH_uUD9e4/AAAAAAAAAAI/AAAAAAAAAJY/nNd8s6xpX0E/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/5097116/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 31423533, "answer_count": 3, "score": 1, "last_activity_date": 1436944975, "creation_date": 1436942547, "last_edit_date": 1436943548, "question_id": 31423208, "link": "https://stackoverflow.com/questions/31423208/form-for-a-belongs-to-model-in-show-of-parent-model", "title": "form_for a &quot;belongs_to&quot; model in &#39;show&#39; of parent model", "body": "<p>I have one model \"Breads\" that has_many \"Posts\".\nI would like to have a form to create a new \"Post\" on the 'show' page for a given \"Bread\" that creates the association to the record of 'Bread' which the 'show' page is displaying.</p>\n\n<p>I have tried a few different methods, but all are giving an error. The method that I have shown below gives a \"Association cannot be used in forms not associated with an object\" error.</p>\n\n<p><strong>/views/breads/show.html.erb:</strong></p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;Bread Type:&lt;/strong&gt;\n  &lt;%= @bread.bread_type %&gt;\n&lt;/p&gt;\n\n&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Uploaded By&lt;/th&gt;\n    &lt;th&gt;Comment&lt;/th&gt;\n    &lt;th&gt;Picture&lt;/th&gt;\n  &lt;/tr&gt;\n&lt;% @bread.posts.each do |post| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= post.uploader %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= post.comment %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= image_tag post.attachment_url.to_s %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n\n&lt;% end %&gt;\n&lt;/table&gt;\n\n&lt;%= @bread.id %&gt;\n\n&lt;%= simple_form_for @bread do |b| %&gt;\n  &lt;%= simple_fields_for :posts do |p| %&gt;\n    &lt;%= p.input :uploader %&gt;\n    &lt;%= p.input :comment %&gt;\n    &lt;%= p.association :bread, value: @bread.id %&gt;\n    &lt;%= p.file_field :attachment %&gt;&lt;br&gt;\n    &lt;%= p.button :submit %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n\n&lt;%= link_to 'Back', breads_path %&gt;\n</code></pre>\n\n<p><strong>config/routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'welcome/index'\n\n  root 'welcome#index'\n\n  resources :breads\n\n  resources :posts\nend\n</code></pre>\n\n<p><strong>controllers/breads_controller.rb:</strong></p>\n\n<pre><code>class BreadsController &lt; ApplicationController\n  def index\n    @breads = Bread.all\n  end\n\n  def show\n    @bread = Bread.find(params[:id])\n  end\n\n  def new\n    @bread = Bread.new\n  end\n\n  def edit\n    @bread = Bread.find(params[:id])\n  end\n\n  def create\n    @bread = Bread.new(bread_params)\n\n    if @bread.save\n      redirect_to @bread\n    else\n      render 'new'\n    end\n  end\n\n  def update\n    @bread = Bread.find(params[:id])\n\n    if @bread.update(bread_params)\n      redirect_to @bread\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @bread = Bread.find(params[:id])\n    @bread.destroy\n\n    redirect_to breads_path\n  end\n\n  private\n    def bread_params\n      params.require(:bread).permit(:bread_type)\n    end\nend\n</code></pre>\n\n<p><strong>models/bread.rb:</strong></p>\n\n<pre><code>class Bread &lt; ActiveRecord::Base\n  has_many :posts\n  validates :bread_type,  presence: true, uniqueness: true\nend\n</code></pre>\n\n<p><strong>models/post.rb:</strong></p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  belongs_to :bread\n  mount_uploader :attachment, AttachmentUploader\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "web"], "comments": [{"owner": {"reputation": 1136, "user_id": 3219208, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/F9lzs.png?s=128&g=1", "display_name": "RockStar", "link": "https://stackoverflow.com/users/3219208/rockstar"}, "edited": false, "score": 1, "creation_date": 1436941278, "post_id": 31422348, "comment_id": 50817398, "body": "Why you explicitly mention foreign key, even if you done it with <code>RoR</code> conventions? Why you don&#39;t prefer <code>has_and_belongs_to_many</code> association if you don&#39;t want to explicitly create WorksOn class objects?"}, {"owner": {"reputation": 6839, "user_id": 4180797, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/727a435b2d2ef77feabab175060d00ae?s=128&d=identicon&r=PG", "display_name": "James L.", "link": "https://stackoverflow.com/users/4180797/james-l"}, "reply_to_user": {"reputation": 1136, "user_id": 3219208, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/F9lzs.png?s=128&g=1", "display_name": "RockStar", "link": "https://stackoverflow.com/users/3219208/rockstar"}, "edited": false, "score": 0, "creation_date": 1436986720, "post_id": 31422348, "comment_id": 50847173, "body": "I would like to add an attribute (role/responsibility) to the work_on relation."}], "answers": [{"tags": [], "owner": {"reputation": 606, "user_id": 3683877, "user_type": "registered", "accept_rate": 8, "profile_image": "https://graph.facebook.com/100003118377871/picture?type=large", "display_name": "abhinavmsra", "link": "https://stackoverflow.com/users/3683877/abhinavmsra"}, "is_accepted": false, "score": 1, "last_activity_date": 1436940619, "creation_date": 1436940619, "answer_id": 31422687, "question_id": 31422348, "link": "https://stackoverflow.com/questions/31422348/issues-creating-has-many-through-relation-rails-4/31422687#31422687", "title": "Issues creating has_many through relation (Rails 4)", "body": "<p>For has_many association, association names should be plural.\n Try replacing</p>\n\n<pre><code>:works_on\n</code></pre>\n\n<p>with</p>\n\n<pre><code>:works_ons\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6839, "user_id": 4180797, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/727a435b2d2ef77feabab175060d00ae?s=128&d=identicon&r=PG", "display_name": "James L.", "link": "https://stackoverflow.com/users/4180797/james-l"}, "edited": false, "score": 0, "creation_date": 1437015771, "post_id": 31422745, "comment_id": 50858265, "body": "Unfortunately that&#39;s not working for me. It&#39;s giving the same error, no column work_ons.play_id"}], "tags": [], "owner": {"reputation": 1751, "user_id": 1212336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4002e9409f235e93386772dbe71c1500?s=128&d=identicon&r=PG", "display_name": "adamliesko", "link": "https://stackoverflow.com/users/1212336/adamliesko"}, "is_accepted": false, "score": 3, "last_activity_date": 1437841689, "last_edit_date": 1437841689, "creation_date": 1436940855, "answer_id": 31422745, "question_id": 31422348, "link": "https://stackoverflow.com/questions/31422348/issues-creating-has-many-through-relation-rails-4/31422745#31422745", "title": "Issues creating has_many through relation (Rails 4)", "body": "<p>Another way how to treat with what abhinavmsra pointed is that in ActiveRecord replationships you can specify the class, which the model is related to through the <code>class_name</code> option. So you add the <code>class_name</code> option to the <code>User</code> and <code>Play</code> models.</p>\n\n<pre><code>has_many :works_on, :class_name =&gt; 'WorksOn'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6839, "user_id": 4180797, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/727a435b2d2ef77feabab175060d00ae?s=128&d=identicon&r=PG", "display_name": "James L.", "link": "https://stackoverflow.com/users/4180797/james-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1437241376, "creation_date": 1437241376, "answer_id": 31493800, "question_id": 31422348, "link": "https://stackoverflow.com/questions/31422348/issues-creating-has-many-through-relation-rails-4/31493800#31493800", "title": "Issues creating has_many through relation (Rails 4)", "body": "<p>I just needed to add the foreign keys to the migration. Not sure why this wasn't working for me initially, but it ends up working. Thanks everyone!</p>\n\n<pre><code>class CreateWorksOns &lt; ActiveRecord::Migration\n  def change\n    create_table :works_ons do |t|\n      t.integer :play_id, null:false\n      t.integer :user_id, null:false\n\n      t.timestamps null: false\n    end\n   end\n end\n</code></pre>\n"}], "owner": {"reputation": 6839, "user_id": 4180797, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/727a435b2d2ef77feabab175060d00ae?s=128&d=identicon&r=PG", "display_name": "James L.", "link": "https://stackoverflow.com/users/4180797/james-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 31493800, "answer_count": 3, "score": 1, "last_activity_date": 1437841689, "creation_date": 1436939169, "last_edit_date": 1437241358, "question_id": 31422348, "link": "https://stackoverflow.com/questions/31422348/issues-creating-has-many-through-relation-rails-4", "title": "Issues creating has_many through relation (Rails 4)", "body": "<p>This may be a beginner question but it really has had me stumped tonight. I have 3 models: Play, User, and Works_on</p>\n\n<p>app/models/play.rb</p>\n\n<pre><code>class Play &lt; ActiveRecord::Base\n  has_many :works_on\n  has_many :users, through: :works_on, :foreign_key =&gt; 'user_id'\nend\n</code></pre>\n\n<p>app/models/user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :works_on\n  has_many :plays, through: :works_on, :foreign_key =&gt; 'play_id'\nend\n</code></pre>\n\n<p>app/model/works_on.rb</p>\n\n<pre><code>class WorksOn &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :play\nend\n</code></pre>\n\n<p>When I try to run</p>\n\n<pre><code>&lt;%= @play.users.each{|user| user.first_name }  %&gt;\n</code></pre>\n\n<p>in app/views/plays/show.html.erb, I get the error</p>\n\n<pre><code>SQLite3::SQLException: no such column: works_ons.play_id: SELECT \"users\".* FROM \"users\" INNER JOIN \"works_ons\" ON \"users\".\"id\" = \"works_ons\".\"user_id\" WHERE \"works_ons\".\"play_id\" = ?\n</code></pre>\n\n<p>I have tried creating a migration to manually add foreign keys to the models but have not been able to get it to work. Any help would be much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2904, "user_id": 2357380, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d64384de6628ce31857b881d776e5c78?s=128&d=identicon&r=PG", "display_name": "Sri Harsha Kappala", "link": "https://stackoverflow.com/users/2357380/sri-harsha-kappala"}, "edited": false, "score": 0, "creation_date": 1436939069, "post_id": 31422280, "comment_id": 50816480, "body": "Welcome to StackOverflow! Can you please format your code?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5072755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5e0206524b18d6fb4ee453cbaddcaa?s=128&d=identicon&r=PG&f=1", "display_name": "Yogesh Joshi", "link": "https://stackoverflow.com/users/5072755/yogesh-joshi"}, "edited": false, "score": 0, "creation_date": 1436942227, "post_id": 31422663, "comment_id": 50817875, "body": "Hi I did a change in code as Roo::Excelx.new(file.path, packed: nil, file_warning: :ignore) and it is working fine, but I want to find why the previous code which is working before bundle update command execution and suddenly gets such a error."}, {"owner": {"reputation": 2571, "user_id": 1766122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GnmH7.jpg?s=128&g=1", "display_name": "Sony Mathew", "link": "https://stackoverflow.com/users/1766122/sony-mathew"}, "edited": false, "score": 0, "creation_date": 1436943059, "post_id": 31422663, "comment_id": 50818279, "body": "The changes happened while updating the Roo gem are mentioned here here. <a href=\"https://github.com/roo-rb/roo/blob/master/CHANGELOG.md\" rel=\"nofollow noreferrer\">github.com/roo-rb/roo/blob/master/CHANGELOG.md</a>"}], "tags": [], "owner": {"reputation": 130, "user_id": 2017708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e608a3d0ac1e4b37df99428b746979f?s=128&d=identicon&r=PG", "display_name": "Ravindra", "link": "https://stackoverflow.com/users/2017708/ravindra"}, "is_accepted": false, "score": 0, "last_activity_date": 1436940530, "creation_date": 1436940530, "answer_id": 31422663, "question_id": 31422280, "link": "https://stackoverflow.com/questions/31422280/ruby-on-rails-excel-import-issue/31422663#31422663", "title": "Ruby On Rails Excel Import Issue", "body": "<p>Try This</p>\n\n<pre><code> Roo::Excelx.new(file.path,options={})\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5072755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5e0206524b18d6fb4ee453cbaddcaa?s=128&d=identicon&r=PG&f=1", "display_name": "Yogesh Joshi", "link": "https://stackoverflow.com/users/5072755/yogesh-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436940530, "creation_date": 1436938846, "last_edit_date": 1436940181, "question_id": 31422280, "link": "https://stackoverflow.com/questions/31422280/ruby-on-rails-excel-import-issue", "title": "Ruby On Rails Excel Import Issue", "body": "<p>Hello I am working on ruby on rails platform. I am doing excel import with Roo package with following code</p>\n\n<pre><code>def self.open_spreadsheet(file)\n    case File.extname(file.original_filename)\n      when '.xls' then\n        Roo::Excel.new(file.path, nil, :ignore)\n      when '.xlsx' then\n        Roo::Excelx.new(file.path, nil, :ignore)\n      else\n        raise \"Unknown file type: #{file.original_filename}\"\n    end\n  end\n</code></pre>\n\n<p>The code is working fine on production until I did bundle update command on production and after this I get error for importing Excel with above code is\nWrong number of arguments ( 3 for 1..2) for <code>Roo::Excelx.new(file.path, nil, :ignore)</code> please suggest how the working code gets such a error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ssl"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 1, "creation_date": 1436937535, "post_id": 31421977, "comment_id": 50815974, "body": "Why do you need to disable SSL for every route except one?  Considering that it <a href=\"http://stackoverflow.com/a/17785434/1079354\">makes use of HSTS</a>, the likelihood of being able to selectively allow one route to communicate insecurely is <i>slim</i>."}, {"owner": {"reputation": 787, "user_id": 4113382, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-yg674Sp50gk/AAAAAAAAAAI/AAAAAAAAAf8/uVR0_xUlROw/photo.jpg?sz=128", "display_name": "Raj", "link": "https://stackoverflow.com/users/4113382/raj"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1436938187, "post_id": 31421977, "comment_id": 50816194, "body": "in that controller i get response from third party url, its not receiving, so I want to disable ssl for that particular controller only"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1436938229, "post_id": 31421977, "comment_id": 50816212, "body": "Why not investigate why the third-party URL is broken?  Do you get a specific error code back?"}, {"owner": {"reputation": 1546, "user_id": 1376201, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbb3062bb6626fd79d1b118d34829342?s=128&d=identicon&r=PG", "display_name": "toobulkeh", "link": "https://stackoverflow.com/users/1376201/toobulkeh"}, "edited": false, "score": 0, "creation_date": 1467208900, "post_id": 31421977, "comment_id": 63637654, "body": "did you ever get a solution for this? The closest I&#39;ve found is <a href=\"http://stackoverflow.com/questions/14700182/rails-force-ssl-only-on-specified-controllers\" title=\"rails force ssl only on specified controllers\">stackoverflow.com/questions/14700182/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/15962221/rails-is-it-possible-use-ssl-partially\" title=\"rails is it possible use ssl partially\">stackoverflow.com/questions/15962221/&hellip;</a> which are both non-DRY ways of the opposite"}], "answers": [{"comments": [{"owner": {"reputation": 3591, "user_id": 338859, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d0e95abdd0aed671ebd0920c16d393d4?s=128&d=identicon&r=PG", "display_name": "Envek", "link": "https://stackoverflow.com/users/338859/envek"}, "edited": false, "score": 2, "creation_date": 1522926472, "post_id": 31422773, "comment_id": 86351694, "body": "This is doesn&#39;t work because <code>config.force_ssl</code> is working on middleware level so HTTP requests never hit controllers."}], "tags": [], "owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "is_accepted": false, "score": -2, "last_activity_date": 1436940957, "creation_date": 1436940957, "answer_id": 31422773, "question_id": 31421977, "link": "https://stackoverflow.com/questions/31421977/skip-disable-force-ssl-for-particular-controller-in-rails/31422773#31422773", "title": "skip/disable force_ssl for particular controller in rails", "body": "<p>Do this in <code>MessagesController.rb</code> -</p>\n\n<pre><code>  force_ssl except: [:new]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 667, "user_id": 386050, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5e7c9de76284b8e9164b7de23fd57c92?s=128&d=identicon&r=PG", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/386050/lorenz"}, "edited": false, "score": 0, "creation_date": 1507753441, "post_id": 38572725, "comment_id": 80341566, "body": "I&#39;ve tried this but never actually been able to get it to work.  have you actually tried this?"}, {"owner": {"reputation": 353, "user_id": 692969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b08b9fce6324fc19eef9559e33fdc67?s=128&d=identicon&r=PG", "display_name": "kucaahbe", "link": "https://stackoverflow.com/users/692969/kucaahbe"}, "reply_to_user": {"reputation": 667, "user_id": 386050, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5e7c9de76284b8e9164b7de23fd57c92?s=128&d=identicon&r=PG", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/386050/lorenz"}, "edited": false, "score": 0, "creation_date": 1507796980, "post_id": 38572725, "comment_id": 80356508, "body": "@Lorenz yes, I have tried this and it worked. If for some reason it doesn&#39;t work (rails version &lt;5, forgotten rails server restart, incorrect code placement?) there are a lot of stuff could happen, even it&#39;s broken in recent rails versions. In any case it&#39;s copy/paste from official docs, so it should work, if not, than rails issue tracker is probably better place for discussions"}, {"owner": {"reputation": 667, "user_id": 386050, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5e7c9de76284b8e9164b7de23fd57c92?s=128&d=identicon&r=PG", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/386050/lorenz"}, "edited": false, "score": 0, "creation_date": 1507855414, "post_id": 38572725, "comment_id": 80388441, "body": "yeah, I was trying to get it to exclude particular subdomains and it wasn&#39;t working.  Running rails 5.1.  This is the line: config.ssl_options = { redirect: { exclude: -&gt; (request) { return true if ((request.subdomain =~ /mail|link|blog|slab/) != nil) } } }"}], "tags": [], "owner": {"reputation": 353, "user_id": 692969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b08b9fce6324fc19eef9559e33fdc67?s=128&d=identicon&r=PG", "display_name": "kucaahbe", "link": "https://stackoverflow.com/users/692969/kucaahbe"}, "is_accepted": false, "score": 22, "last_activity_date": 1469468515, "last_edit_date": 1469468515, "creation_date": 1469463189, "answer_id": 38572725, "question_id": 31421977, "link": "https://stackoverflow.com/questions/31421977/skip-disable-force-ssl-for-particular-controller-in-rails/38572725#38572725", "title": "skip/disable force_ssl for particular controller in rails", "body": "<p>according to <a href=\"http://edgeapi.rubyonrails.org/classes/ActionDispatch/SSL.html\" rel=\"noreferrer\">documentation</a> following should work (<strong>but only for rails > 5 version</strong>):</p>\n\n<pre><code>config.ssl_options = {\n  redirect: {\n    exclude: -&gt; request { request.path =~ /healthcheck/ }\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 978, "user_id": 385730, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/74a8d7dadabcd2ac5c45f68e5a53cedf?s=128&d=identicon&r=PG", "display_name": "Dale Zak", "link": "https://stackoverflow.com/users/385730/dale-zak"}, "edited": false, "score": 1, "creation_date": 1583784523, "post_id": 38821571, "comment_id": 107225605, "body": "DEPRECATION WARNING: Controller-level <code>force_ssl</code> is deprecated and will be removed from Rails 6.1. Please enable <code>config.force_ssl</code> in your environment configuration to enable the ActionDispatch::SSL middleware to more fully enforce that your application communicate over HTTPS. If needed, you can use <code>config.ssl_options</code> to exempt matching endpoints from being redirected to HTTPS."}], "tags": [], "owner": {"reputation": 787, "user_id": 4113382, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-yg674Sp50gk/AAAAAAAAAAI/AAAAAAAAAf8/uVR0_xUlROw/photo.jpg?sz=128", "display_name": "Raj", "link": "https://stackoverflow.com/users/4113382/raj"}, "is_accepted": true, "score": 5, "last_activity_date": 1470632359, "creation_date": 1470632359, "answer_id": 38821571, "question_id": 31421977, "link": "https://stackoverflow.com/questions/31421977/skip-disable-force-ssl-for-particular-controller-in-rails/38821571#38821571", "title": "skip/disable force_ssl for particular controller in rails", "body": "<pre><code>skip_before_action :verify_authenticity_token\nforce_ssl except: [:index,:create]\n</code></pre>\n\n<p>Its worked for me.</p>\n"}], "owner": {"reputation": 787, "user_id": 4113382, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-yg674Sp50gk/AAAAAAAAAAI/AAAAAAAAAf8/uVR0_xUlROw/photo.jpg?sz=128", "display_name": "Raj", "link": "https://stackoverflow.com/users/4113382/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5795, "favorite_count": 2, "accepted_answer_id": 38821571, "answer_count": 3, "score": 13, "last_activity_date": 1470632359, "creation_date": 1436937207, "question_id": 31421977, "link": "https://stackoverflow.com/questions/31421977/skip-disable-force-ssl-for-particular-controller-in-rails", "title": "skip/disable force_ssl for particular controller in rails", "body": "<p>I need to force SSL on all routes in my application except for <code>message#new</code> controller.</p>\n\n<p>In <code>config/environments/production.rb</code>, I have:</p>\n\n<pre><code>config.force_ssl = true\n</code></pre>\n\n<p>Now all routes being redirect to https, And now I want to disable that for <code>message#new</code> controller.</p>\n\n<p>Does anyone know how to disable force SSL for particular controller in a Rails 4+ application?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "form-helpers"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1436937624, "post_id": 31421878, "comment_id": 50816008, "body": "Can you post your full <code>form</code> code along with with <code>strong_params</code> method?"}, {"owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "edited": false, "score": 0, "creation_date": 1436937749, "post_id": 31421878, "comment_id": 50816055, "body": "it is because your other fields for post like title or content. there tags you are displaying like f.text_field but for ptype you are using radio_button_tag. radio_button_tag does not assosiate field to model itself. try this         radio_button_tag &quot;post[ptype]&quot;, &quot;Praise&quot;"}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1436939894, "post_id": 31421878, "comment_id": 50816763, "body": "why can&#39;t you use <code>f.radio_button</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 314, "user_id": 3503701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1056195511/picture?type=large", "display_name": "Venkatesh Dhanasekaran", "link": "https://stackoverflow.com/users/3503701/venkatesh-dhanasekaran"}, "is_accepted": true, "score": 0, "last_activity_date": 1436947757, "last_edit_date": 1436947757, "creation_date": 1436946116, "answer_id": 31424313, "question_id": 31421878, "link": "https://stackoverflow.com/questions/31421878/how-do-you-get-my-rails-radio-button-tag-to-save-the-data-on-form-submission/31424313#31424313", "title": "How do you get my rails radio_button_tag to save the data on form submission?", "body": "<p>Apply form object to radio button like this:</p>\n\n<pre><code>f.radio_button\n</code></pre>\n\n<p>it will submit without any mess.</p>\n"}], "owner": {"reputation": 3, "user_id": 3457823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82b3bbb6f2f7e9f9d62e5557c3c5d8b4?s=128&d=identicon&r=PG&f=1", "display_name": "P.Downing", "link": "https://stackoverflow.com/users/3457823/p-downing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 31424313, "answer_count": 1, "score": 0, "last_activity_date": 1436947757, "creation_date": 1436936657, "question_id": 31421878, "link": "https://stackoverflow.com/questions/31421878/how-do-you-get-my-rails-radio-button-tag-to-save-the-data-on-form-submission", "title": "How do you get my rails radio_button_tag to save the data on form submission?", "body": "<p>I am newer to rails and thought I would add a radio button set to a form to enforce user choice.  I am able to get the form loaded and select one of the options, but upon posting via the submit button I get a model error for the field needing to be present (something I am wanting to validate). Below is my form code for the radio buttons.</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;div&gt;\n  &lt;%= f.label \"Type\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"radio-inline\"&gt;\n    &lt;%= radio_button_tag :ptype, \"Question\" %&gt;&lt;%= label_tag :ptype_question, 'Question' %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"radio-inline\"&gt;\n    &lt;%= radio_button_tag :ptype, \"Problem\" %&gt;&lt;%= label_tag :ptype_problem, 'Problem' %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"radio-inline\"&gt;\n    &lt;%= radio_button_tag :ptype, \"Idea\" %&gt;&lt;%= label_tag :ptype_idea, 'Idea' %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"radio-inline\"&gt;\n    &lt;%= radio_button_tag :ptype, \"Praise\" %&gt;&lt;%= label_tag :ptype_praise, 'Praise' %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;&lt;/br&gt;\n</code></pre>\n\n<p>I've whitelisted :ptype in the params within the controller, so I know that isn't the issue, and when I make the field just a plain text_field I am able to submit just fine, so I am thinking I messed something up with the multiple options, but haven't quite been able to figure it out even after checking a few other posts.</p>\n\n<p>I also noticed it is getting the data in the logging, but it isn't indented like the other elements which are:</p>\n\n<pre><code>--- !ruby/hash:ActionController::Parameters\nutf8: \"\u2713\"\nauthenticity_token: 7uAQ/Wx4...\npost: !ruby/hash:ActionController::Parameters\n  title: Packers\n  content: Rock!\n  category: Football\nptype: Question\ncommit: Post\ncontroller: posts\naction: create\n</code></pre>\n\n<p>Again, thinking it's a simple fix since the text_field posts fine, but still too new to figure out quite what is wrong. Thanks in advance!</p>\n"}, {"tags": ["python", "ruby", "windows", "heroku", "travis-ci"], "comments": [{"owner": {"reputation": 556, "user_id": 4316935, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91c11f0640e132006aaddce32c727fe7?s=128&d=identicon&r=PG", "display_name": "Rod Argumedo", "link": "https://stackoverflow.com/users/4316935/rod-argumedo"}, "edited": false, "score": 0, "creation_date": 1436937934, "post_id": 31421793, "comment_id": 50816116, "body": "Do you have heroku toolbelt on your machine?"}, {"owner": {"reputation": 478, "user_id": 4952666, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10155576355345582/picture?type=large", "display_name": "hooliooo", "link": "https://stackoverflow.com/users/4952666/hooliooo"}, "reply_to_user": {"reputation": 556, "user_id": 4316935, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91c11f0640e132006aaddce32c727fe7?s=128&d=identicon&r=PG", "display_name": "Rod Argumedo", "link": "https://stackoverflow.com/users/4316935/rod-argumedo"}, "edited": false, "score": 0, "creation_date": 1436942715, "post_id": 31421793, "comment_id": 50818102, "body": "Yes I have heroku toolbelt as well"}, {"owner": {"reputation": 556, "user_id": 4316935, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91c11f0640e132006aaddce32c727fe7?s=128&d=identicon&r=PG", "display_name": "Rod Argumedo", "link": "https://stackoverflow.com/users/4316935/rod-argumedo"}, "edited": false, "score": 0, "creation_date": 1437020549, "post_id": 31421793, "comment_id": 50859414, "body": "That seems strange. What happens if you type <code>heroku auth:token</code>, does it return a long string of letters and numbers?"}], "answers": [{"tags": [], "owner": {"reputation": 556, "user_id": 4316935, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91c11f0640e132006aaddce32c727fe7?s=128&d=identicon&r=PG", "display_name": "Rod Argumedo", "link": "https://stackoverflow.com/users/4316935/rod-argumedo"}, "is_accepted": false, "score": 0, "last_activity_date": 1437102435, "last_edit_date": 1437102435, "creation_date": 1437021558, "answer_id": 31445471, "question_id": 31421793, "link": "https://stackoverflow.com/questions/31421793/travis-setup-heroku-command-on-windows-7-64-bit/31445471#31445471", "title": "travis setup heroku command on Windows 7 64 bit", "body": "<p>If you hadn't had Heroku Toolbelt setup to the $PATH environment variable during installation, here are some steps to check:</p>\n\n<ul>\n<li>Check if Heroku toolbelt is set in PATH variable. If not, cd to your Heroku toolbelt installation folder, then click on the address bar and copy it.</li>\n<li>Go to the Control Panel, then click System and Advanced System Protection.</li>\n<li>Go to Environment Variables, then look for $PATH in the System Variables</li>\n<li>After the last program in the variable, put a <code>;</code> then paste in your Heroku CLI folder and click OK. (This requires <code>cmd</code> to be restarted manually)</li>\n<li>Login to Heroku CLI</li>\n<li>grab the token key from <code>heroku auth:token</code></li>\n<li>run <code>travis setup heroku</code> if the setup goes smoothly, you shouldn't get the command not found and prompt you for heroku auth key. It will ask that you want to encrypt the auth key (highly recommend) and verify the information you provided with the toolbelt and Travis CLI.</li>\n<li>commit changes</li>\n<li>you should be able to get your app up and running within your tests.</li>\n</ul>\n"}], "owner": {"reputation": 478, "user_id": 4952666, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10155576355345582/picture?type=large", "display_name": "hooliooo", "link": "https://stackoverflow.com/users/4952666/hooliooo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 441, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1437102435, "creation_date": 1436936159, "question_id": 31421793, "link": "https://stackoverflow.com/questions/31421793/travis-setup-heroku-command-on-windows-7-64-bit", "title": "travis setup heroku command on Windows 7 64 bit", "body": "<p>Hi there I'm trying to deploy my  python app using Travis CI but I'm running into problems when I run the \"travis setup heroku\" command in the cmd prompt.</p>\n\n<p>I'm in my project's root directory, there is an existing \".travis.yml\" file in that root directory.</p>\n\n<p>I've also installed ruby correctly and travis correcty because when I run:</p>\n\n<ul>\n<li>\"ruby -v\" I get \"ruby 2.2.2p95 (2015-04-13 revision 50295) [x64-mingw32]\"</li>\n<li>\"travis -v\" I get \"1.7.7\"</li>\n</ul>\n\n<p>When I run \"travis setup heroku\" I get this message \"The system cannot find the path specified\" then prompts me for a \"Heroku API token:\"</p>\n\n<p>What's the issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 808, "user_id": 701918, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3d60b38c64e2985a6e3298ade08823a0?s=128&d=identicon&r=PG", "display_name": "Azuan", "link": "https://stackoverflow.com/users/701918/azuan"}, "edited": false, "score": 1, "creation_date": 1437240463, "post_id": 31422395, "comment_id": 50950887, "body": "I was on holiday ;) The API doc reference is really helpful.. I did settled with has_many: :through in the end. Thanks!"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1436940755, "last_edit_date": 1436940755, "creation_date": 1436939427, "answer_id": 31422395, "question_id": 31421670, "link": "https://stackoverflow.com/questions/31421670/activerecord-generates-wrong-relation-habtm-name/31422395#31422395", "title": "ActiveRecord generates wrong relation HABTM name", "body": "<p>The problem is this <code>CanvasQuestion.find_by_canvas_id_and_question_id(1,1)</code> , you can't query with a <strong><code>HABTM join-table</code></strong> because the <strong><em>model</em></strong> for <strong><em>join-table</em></strong> shouldn't exist.</p>\n\n<p>From the <a href=\"http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many\" rel=\"nofollow\"><strong><em>API doc</em></strong></a></p>\n\n<blockquote>\n  <p>The join table should not have a primary key or a model associated\n  with it.</p>\n</blockquote>\n\n<p>I tested your code in my project and when running <code>CanvasQuestion.find_by_canvas_id_and_question_id(1,1)</code> I got \n<code>NameError: uninitialized constant CanvasQuestion</code> So <strong><em>Rails</em></strong> is looking for a <strong><em>class</em></strong> <strong><code>CanvasQuestion</code></strong> which didn't exist.</p>\n\n<p>My suggestion is to use <strong><code>has_many :through</code></strong>. Check this <a href=\"http://guides.rubyonrails.org/association_basics.html#choosing-between-has-many-through-and-has-and-belongs-to-many\" rel=\"nofollow\"><strong><em>Choosing between <code>Habtm</code> and <code>has_many :through</code></em></strong></a> from the Guides. It will help you.</p>\n"}], "owner": {"reputation": 808, "user_id": 701918, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3d60b38c64e2985a6e3298ade08823a0?s=128&d=identicon&r=PG", "display_name": "Azuan", "link": "https://stackoverflow.com/users/701918/azuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 31422395, "answer_count": 1, "score": 1, "last_activity_date": 1436940755, "creation_date": 1436935391, "question_id": 31421670, "link": "https://stackoverflow.com/questions/31421670/activerecord-generates-wrong-relation-habtm-name", "title": "ActiveRecord generates wrong relation HABTM name", "body": "<p>I'm using Rails to generate a HABTM relationship between my tables. My table name is <code>canvas</code>, but <code>canvas.singularize</code> will produce <code>canva</code>, which is not the correct word. So I've made some changes in <code>config/initializers/inflections.rb</code>:</p>\n\n<pre><code>inflect.irregular 'canvas', 'canvases'\n</code></pre>\n\n<p>This is my migration:</p>\n\n<pre><code>create_table :canvases do |t|\nend\n\ncreate_table :questions do |t|\nend\n\ncreate_join_table :canvases, :questions do |t|\n  t.index  :question_id\n  t.index  :canvas_id\nend\n</code></pre>\n\n<p>However, running <code>CanvasQuestion.find_by_canvas_id_and_question_id(1,1)</code> in the console will generate this error:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  relation \"canvas_questions\" \ndoes not exist LINE 5:                WHERE a.attrelid = '\"canvas_questions\"'::regc...\n</code></pre>\n\n<p>It seems to me like ActiveRecord is trying to find the table <code>canvas_questions</code> instead of <code>canvases_questions</code>. Right now, I've to use Gem <code>composite_primary_keys</code> and change my model like this to make it work:</p>\n\n<pre><code>class CanvasQuestion &lt; ActiveRecord::Base\n  self.table_name = 'canvases_questions'\n  self.primary_keys = :canvas_id, :question_id \nend\n</code></pre>\n\n<p>Is there a proper way to solve this? Because I'm thinking that right now I'm getting this error because CanvasQuestion is translated to <code>canvas_questions</code> instead of <code>canvases_questions</code> by ActiveRecord, even though I've changed my <code>canvas</code> word inflection to <code>canvases</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ranking"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1436935256, "post_id": 31421576, "comment_id": 50815247, "body": "I&#39;m not sure I could spot anything that would cause that behavior from what you&#39;ve shown us here.  What is <code>find_voted_items</code> actually returning?  What does <code>@user.get_voted Comment</code> show you as well?"}, {"owner": {"reputation": 3222, "user_id": 1553293, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/12fbb0c5f237d6e3e6c52941e30b0c2a?s=128&d=identicon&r=PG", "display_name": "Muhambi", "link": "https://stackoverflow.com/users/1553293/muhambi"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1436936698, "post_id": 31421576, "comment_id": 50815674, "body": "It returns a Rails association eg: <code>[#&lt;Comment id: 3, </code> and so on. The other command returns: <code>#&lt;Comment::ActiveRecord_Relation:0x007fb9cd45d060&gt; true</code>"}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1436936760, "post_id": 31421576, "comment_id": 50815704, "body": "Okay, does the same thing come up when you create a new comment?  Again; not seeing anything immediately apparent that would cause the comment to be upvoted upon its persistence (then again, you haven&#39;t shown us the controller that <i>creates</i> any of these comments)."}, {"owner": {"reputation": 3222, "user_id": 1553293, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/12fbb0c5f237d6e3e6c52941e30b0c2a?s=128&d=identicon&r=PG", "display_name": "Muhambi", "link": "https://stackoverflow.com/users/1553293/muhambi"}, "reply_to_user": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1436937065, "post_id": 31421576, "comment_id": 50815815, "body": "@Makoto, yes when I create a new comment it is added on to the association. I&#39;ll post the controller, though it&#39;s pretty standard."}], "owner": {"reputation": 3222, "user_id": 1553293, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/12fbb0c5f237d6e3e6c52941e30b0c2a?s=128&d=identicon&r=PG", "display_name": "Muhambi", "link": "https://stackoverflow.com/users/1553293/muhambi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1436937156, "creation_date": 1436934852, "last_edit_date": 1436937156, "question_id": 31421576, "link": "https://stackoverflow.com/questions/31421576/voting-issue-rails", "title": "Voting issue rails", "body": "<p>I'm using Acts as Votable and rails 4</p>\n\n<p>I have three models: Post, User, and Comment.</p>\n\n<p>I want users to be able to vote on comments.</p>\n\n<p>Comment.rb:</p>\n\n<pre><code>class Comment &lt; ActiveRecord::Base\n  belongs_to :post\n\n  acts_as_votable\nend\n\nclass Post &lt; ActiveRecord::Base\n  has_many :comments\nend\n\nclass User &lt; ActiveRecord::Base\n  has_many :comments\n  acts_as_voter\nend\n</code></pre>\n\n<p>Now, however, whenever I create a new comment, it's already voted up by the User? If I print out <code>&lt;%= current_user.find_voted_items %&gt;</code> I get a new one every time I add a comment, without voting on them?</p>\n\n<p>My comments_controller create action looks like: </p>\n\n<pre><code>def create\n@comment = Comment.new(comment_params)\n@comment.user_id = current_user.id\n@comment.post_id = @post.id\n\nrespond_to do |format|\n  if @comment.save\n    format.html { redirect_to post_path(@post), notice: 'Comment was successfully created.' }\n    format.json { render :show, status: :created, location: @comment }\n  else\n    format.html { render :new }\n    format.json { render json: @comment.errors, status: :unprocessable_entity }\n  end\nend\n</code></pre>\n\n<p>end</p>\n"}, {"tags": ["ruby", "xpath", "string-interpolation"], "answers": [{"tags": [], "owner": {"reputation": 11749, "user_id": 2063096, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kYnaM.jpg?s=128&g=1", "display_name": "SoEzPz", "link": "https://stackoverflow.com/users/2063096/soezpz"}, "is_accepted": false, "score": -1, "last_activity_date": 1436934834, "last_edit_date": 1436934834, "creation_date": 1436933967, "answer_id": 31421423, "question_id": 31421329, "link": "https://stackoverflow.com/questions/31421329/ruby-string-interpolation/31421423#31421423", "title": "Ruby string interpolation", "body": "<pre><code>stock_price = dom.xpath(\"//*[@id='yfs_l84_#{stock_sym}']\").first.content\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3404, "user_id": 231621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ec5d83b7155d8070494846945f4701c?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/231621/patrick"}, "edited": false, "score": 1, "creation_date": 1436934674, "post_id": 31421445, "comment_id": 50815056, "body": "Check out <a href=\"http://ruby-doc.org/core-2.2.2/doc/syntax/literals_rdoc.html#label-Strings\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.2/doc/syntax/&hellip;</a>"}], "tags": [], "owner": {"reputation": 208, "user_id": 2843630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b86ea929fd25ffcbe7016197439f2bfe?s=128&d=identicon&r=PG&f=1", "display_name": "aerook", "link": "https://stackoverflow.com/users/2843630/aerook"}, "is_accepted": false, "score": 4, "last_activity_date": 1436934072, "creation_date": 1436934072, "answer_id": 31421445, "question_id": 31421329, "link": "https://stackoverflow.com/questions/31421329/ruby-string-interpolation/31421445#31421445", "title": "Ruby string interpolation", "body": "<p>String interpolation only works with double quotes:</p>\n\n<pre><code>\"//*[@id='yfs_l84_#{stock_sym}']\"\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5100911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86da0ad07e9f41050f00298644f5afbc?s=128&d=identicon&r=PG&f=1", "display_name": "jmanikan", "link": "https://stackoverflow.com/users/5100911/jmanikan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1436934834, "creation_date": 1436933282, "last_edit_date": 1436934120, "question_id": 31421329, "link": "https://stackoverflow.com/questions/31421329/ruby-string-interpolation", "title": "Ruby string interpolation", "body": "<p>How do I insert</p>\n\n<pre><code>#{stock_sym}\n</code></pre>\n\n<p>into</p>\n\n<pre><code>stock_price = dom.xpath('//*[@id=\"yfs_l84_aapl\"]').first.content\n</code></pre>\n\n<p>replacing <code>aapl</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 11749, "user_id": 2063096, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kYnaM.jpg?s=128&g=1", "display_name": "SoEzPz", "link": "https://stackoverflow.com/users/2063096/soezpz"}, "is_accepted": false, "score": 0, "last_activity_date": 1436934187, "creation_date": 1436934187, "answer_id": 31421463, "question_id": 31421108, "link": "https://stackoverflow.com/questions/31421108/ruby-on-rails-2-radio-button/31421463#31421463", "title": "ruby on rails 2 radio button", "body": "<p>If you have an instance variable in your controller method like so</p>\n\n<p>@subject</p>\n\n<p>Then you will have the value in the view like so</p>\n\n<p>subject.id #and any other property on the subject object.</p>\n\n<p>You would get the object either through a DB call or through your params like so</p>\n\n<pre><code>@subject = params[\"subj_id\"]\n</code></pre>\n"}], "owner": {"reputation": 86, "user_id": 4373307, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5fdceb6eb13788e1bd6c7542e8121a93?s=128&d=identicon&r=PG&f=1", "display_name": "BananaTiger", "link": "https://stackoverflow.com/users/4373307/bananatiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436934187, "creation_date": 1436931723, "last_edit_date": 1436931987, "question_id": 31421108, "link": "https://stackoverflow.com/questions/31421108/ruby-on-rails-2-radio-button", "title": "ruby on rails 2 radio button", "body": "<p>Right now I'm maintaining a very old rails app. The app is written on Rails 2 .\nDue to some unexpected circumstances Ill need to edit some functions of the app. Now to the problem.</p>\n\n<p>I've created a radio button on my view</p>\n\n<p><code>&lt;td width=300&gt;&lt;b&gt;&lt;font size=1&gt;&lt;%=radio_button_tag(:subj_id,subject.id)%&gt;&lt;/td&gt;</code></p>\n\n<p>My questions is <strong>how can I bind the value of the radio button to my controller ?</strong> </p>\n\n<p>I have tried <code>params[:subj_id]</code> </p>\n\n<p>then created a </p>\n\n<p><code>&lt;p&gt;&lt;%= params[:subj_id] %&gt;&lt;/p&gt;</code> </p>\n\n<p>to check for the value on my view. But nothing is coming out.</p>\n\n<p><strong>Do i need to use a <code>form_tag</code> in order to submit the selected value to my controller ?</strong></p>\n\n<p><strong>If so is there a way to use the radio button as a trigger for submitting the value to my controller.</strong> </p>\n"}, {"tags": ["ruby", "postgresql", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5109700, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e7c4114403547d4fe3695720db98ee4e?s=128&d=identicon&r=PG&f=1", "display_name": "LeeCarl", "link": "https://stackoverflow.com/users/5109700/leecarl"}, "edited": false, "score": 0, "creation_date": 1436947023, "post_id": 31422243, "comment_id": 50820770, "body": "Thank you! This worked perfectly! In my previous code, I was using my res1 PG::Result variable to check if the db existed (using ntuples == 1). How would one refactor that to work wit your example? THANKS AGAIN!"}, {"owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "reply_to_user": {"reputation": 23, "user_id": 5109700, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e7c4114403547d4fe3695720db98ee4e?s=128&d=identicon&r=PG&f=1", "display_name": "LeeCarl", "link": "https://stackoverflow.com/users/5109700/leecarl"}, "edited": false, "score": 0, "creation_date": 1436951324, "post_id": 31422243, "comment_id": 50823374, "body": "The database is already created for you: if you inspect the result of <code>heroku pg:credentials</code> you&#39;ll find the DB name is defined as part of the <code>DATABASE_URL</code>. Otherwise, a <code>try&#47;rescue</code> block can catch any other more terminal errors during initialisation. See my update for a quick example."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 23, "user_id": 5109700, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e7c4114403547d4fe3695720db98ee4e?s=128&d=identicon&r=PG&f=1", "display_name": "LeeCarl", "link": "https://stackoverflow.com/users/5109700/leecarl"}, "edited": false, "score": 0, "creation_date": 1436951694, "post_id": 31422243, "comment_id": 50823613, "body": "@LeeCarl database URL contains everything necessary to start working with it: protocol name, server hostname and port, user credentials and database name. Since DBaaS generates all that for you, it makes sense for to provide all that as one large chunk of information. And so it does."}, {"owner": {"reputation": 23, "user_id": 5109700, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e7c4114403547d4fe3695720db98ee4e?s=128&d=identicon&r=PG&f=1", "display_name": "LeeCarl", "link": "https://stackoverflow.com/users/5109700/leecarl"}, "edited": false, "score": 0, "creation_date": 1436954598, "post_id": 31422243, "comment_id": 50825494, "body": "A rescue block was exactly what I needed.  Thanks guys for all the help! :3"}], "tags": [], "owner": {"reputation": 19878, "user_id": 556573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/az7kz.png?s=128&g=1", "display_name": "elithrar", "link": "https://stackoverflow.com/users/556573/elithrar"}, "is_accepted": true, "score": 1, "last_activity_date": 1436951325, "last_edit_date": 1436951325, "creation_date": 1436938666, "answer_id": 31422243, "question_id": 31421006, "link": "https://stackoverflow.com/questions/31421006/create-postgresql-database-in-heroku-with-ruby-without-rails/31422243#31422243", "title": "Create Postgresql database in Heroku with Ruby (without Rails)", "body": "<p>Assuming you have created a Postgres database using the Heroku toolchain via <code>heroku addons:add heroku-postgresql:dev</code> (or the plan of your choice) you should have a <code>DATABASE_URL</code> environmental variable that contains your connection string. You can check that locally through <code>heroku pg:config</code>.</p>\n\n<p>Using the <code>pg</code> gem (docs: <a href=\"http://deveiate.org/code/pg/PG/Connection.html\" rel=\"nofollow\">http://deveiate.org/code/pg/PG/Connection.html</a>) - and modifying the example from there to suit - </p>\n\n<pre><code>require 'pg'\n# source the connection string from the DATABASE_URL environmental variable\nconn = PG::Connection.new(ENV['DATABASE_URL'])\nres = conn.exec_params('create table top (url varchar, score integer;\")\n</code></pre>\n\n<p><strong>Update</strong>: A slightly more complete example for the purposes of error handling:</p>\n\n<pre><code>conn = PG::Connection.new(ENV['TEST_DATABASE_URL'])\nbegin\n    # Ensures the table is created if it doesn't exist\n    res = conn.exec(\"CREATE TABLE IF NOT EXISTS top (url varchar, score integer);\")\n    res.result_status\nrescue PG::Error =&gt; pg_error\n    puts \"Table creation failed: #{pg_error.message}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5109700, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e7c4114403547d4fe3695720db98ee4e?s=128&d=identicon&r=PG&f=1", "display_name": "LeeCarl", "link": "https://stackoverflow.com/users/5109700/leecarl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 1, "accepted_answer_id": 31422243, "answer_count": 1, "score": 1, "last_activity_date": 1436951325, "creation_date": 1436931068, "last_edit_date": 1436933446, "question_id": 31421006, "link": "https://stackoverflow.com/questions/31421006/create-postgresql-database-in-heroku-with-ruby-without-rails", "title": "Create Postgresql database in Heroku with Ruby (without Rails)", "body": "<p>I'm currently hosting a simple Ruby script that stores URLs and Scores and saving them to YAML.  However, I'd like to save to a Postgresql database instead since the yaml file is deleted every time I restart the app.  Here's the error I'm getting in Heroku:</p>\n\n<pre><code>could not connect to server: No such file or directory (PG::ConnectionBad)\n</code></pre>\n\n<p>Here's an example script that works locally, but throws me the above error in Heroku:</p>\n\n<pre><code>require 'pg'\nconn = PG.connect( dbname: 'template1' )\nres1 = conn.exec('SELECT * from pg_database where datname = $1', ['words'])\nif res1.ntuples == 1 # db exists\n  # do nothing\nelse\n  conn.exec('CREATE DATABASE words')\n  words_conn = PGconn.connect( :dbname =&gt; 'words')\n  words_conn.exec(\"create table top (url varchar, score integer);\")\n  words_conn.exec(\"INSERT INTO top (url, score) VALUES ('http://apple.com', 1);\")\nend\n</code></pre>\n\n<p>Thanks in advance for any help or suggestions!</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 4860791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff311becfa2e8e4cf536e6c28b78d23?s=128&d=identicon&r=PG&f=1", "display_name": "MrFourier", "link": "https://stackoverflow.com/users/4860791/mrfourier"}, "edited": false, "score": 0, "creation_date": 1437010839, "post_id": 31422003, "comment_id": 50857016, "body": "TY for taking the time. The line &lt;h2&gt;&lt;%= month.first.strftime(&quot;%B %Y&quot;) %&gt;&lt;/h2&gt; solved problem 2. I can see the month now, had to edit to &quot;@events.sort_by {...&quot; and it printed the whole array. Using the line  @events_by_month[month].each do |task| prints the month but still have problem #1. Any other suggestions ?"}], "tags": [], "owner": {"reputation": 3210, "user_id": 5089231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zX0dy.jpg?s=128&g=1", "display_name": "Athar", "link": "https://stackoverflow.com/users/5089231/athar"}, "is_accepted": false, "score": 0, "last_activity_date": 1436948567, "last_edit_date": 1436948567, "creation_date": 1436937382, "answer_id": 31422003, "question_id": 31420973, "link": "https://stackoverflow.com/questions/31420973/group-by-month-rails-ruby/31422003#31422003", "title": "group by month rails ruby", "body": "<p>how about this code in your views.</p>\n\n<pre><code>     &lt;% @events_by_month.sort.each do |month, value| %&gt;\n        #note both month and value are array\n        &lt;h2&gt;&lt;%= month.first.strftime(\"%B %Y\") %&gt;&lt;/h2&gt;\n        &lt;% events.sort_by!{|g| g.date.beginning_of_month}.each do |firm| %&gt;\n          #print things against firm\n        &lt;% end %&gt;\n     &lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 4860791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff311becfa2e8e4cf536e6c28b78d23?s=128&d=identicon&r=PG&f=1", "display_name": "MrFourier", "link": "https://stackoverflow.com/users/4860791/mrfourier"}, "edited": false, "score": 0, "creation_date": 1437015137, "post_id": 31444202, "comment_id": 50858101, "body": "Thank you for your help. I was not able to get the view to work.  What made the difference was the sorting in the controller. My final code for the view was <code>&lt;% @events_by_month.sort.each do |month, value| %&gt;      \t&lt;h2&gt;&lt;%= month.first.strftime(&quot;%B %Y&quot;) %&gt;&lt;&#47;h2&gt;      \t&lt;% @events_by_month[month].each do |firm| %&gt;      \t&lt;%= firm.name %&gt; &lt;%= firm.date %&gt; &lt;br&gt;        &lt;% end %&gt;      &lt;% end %&gt;</code>"}, {"owner": {"reputation": 10621, "user_id": 312907, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9decae0c588d499686dfbfe3b1072914?s=128&d=identicon&r=PG", "display_name": "Francesco Belladonna", "link": "https://stackoverflow.com/users/312907/francesco-belladonna"}, "reply_to_user": {"reputation": 7, "user_id": 4860791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff311becfa2e8e4cf536e6c28b78d23?s=128&d=identicon&r=PG&f=1", "display_name": "MrFourier", "link": "https://stackoverflow.com/users/4860791/mrfourier"}, "edited": false, "score": 0, "creation_date": 1437015467, "post_id": 31444202, "comment_id": 50858190, "body": "In the view, you should use only <code>each</code>, so perform the sort directly in controller: <code>@events_by_month = @events.group_by { |x| x.date.beginning_of_month }.sort</code>"}], "tags": [], "owner": {"reputation": 10621, "user_id": 312907, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9decae0c588d499686dfbfe3b1072914?s=128&d=identicon&r=PG", "display_name": "Francesco Belladonna", "link": "https://stackoverflow.com/users/312907/francesco-belladonna"}, "is_accepted": true, "score": 0, "last_activity_date": 1437012096, "creation_date": 1437012096, "answer_id": 31444202, "question_id": 31420973, "link": "https://stackoverflow.com/questions/31420973/group-by-month-rails-ruby/31444202#31444202", "title": "group by month rails ruby", "body": "<p>I believe you forgot to sort events in the query itself</p>\n\n<pre><code>class EventsController &lt; ApplicationController\ndef index\n    @events = Event.all.order(:date)\n    # HERE: You don't need to enclose that in array, that's why it fails in view\n    @events_by_month = @events.group_by { |x| x.date.beginning_of_month }\n\nend\n</code></pre>\n\n<p>Then in view you can do</p>\n\n<pre><code>&lt;% @events_by_month.each do |begin_month, events| %&gt;\n    &lt;h2&gt;&lt;%= begin_month.strftime(\"%B %Y\") %&gt;&lt;/h2&gt;\n    &lt;% events.each do |firm| %&gt;\n       &lt;p&gt; &lt;%= firm.name %&gt;  &lt;%= firm.date.to_date.to_s(:long) %&gt;&lt;/P&gt;\n    &lt;% end %&gt;&lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>No need to sort in view now, it's already sorted (and database it's much more performant in doing this)</p>\n"}], "owner": {"reputation": 7, "user_id": 4860791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ff311becfa2e8e4cf536e6c28b78d23?s=128&d=identicon&r=PG&f=1", "display_name": "MrFourier", "link": "https://stackoverflow.com/users/4860791/mrfourier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 0, "accepted_answer_id": 31444202, "answer_count": 2, "score": 0, "last_activity_date": 1437012096, "creation_date": 1436930862, "last_edit_date": 1495542108, "question_id": 31420973, "link": "https://stackoverflow.com/questions/31420973/group-by-month-rails-ruby", "title": "group by month rails ruby", "body": "<p>I am learning rails and stuck on a problem. it resembles Ryan Bates <a href=\"http://railscasts.com/episodes/29-group-by-month\" rel=\"nofollow noreferrer\">http://railscasts.com/episodes/29-group-by-month</a> problem but it is failing. </p>\n\n<p>My setup is the following: </p>\n\n<pre><code>class EventsController &lt; ApplicationController\ndef index\n    @events = Event.all\n    @events_by_month = @events.group_by { |x| [x.date.beginning_of_month] }\n\nend\n</code></pre>\n\n<p>Case 1:</p>\n\n<pre><code>&lt;% @events_by_month.keys.sort.each do |month| %&gt;\n    &lt;% for firm in @events_by_month[month] %&gt;\n       &lt;%= firm.name %&gt;  &lt;%= firm.date.to_date.to_s(:long) %&gt;\n    &lt;% end %&gt;&lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This gives me results of: </p>\n\n<p>Little LLC October 24, 2014 <br>\nKovacek, Borer and Dickinson October 16, 2014<br>\nRogahn-Cruickshank October 6, 2014<br>\nHarris-Dicki October 31, 2014<br><br>\nKutch-Schulist November 18, 2014<br><br>\nDicki, Gleason and Cremin December 7, 2014<br>\nRobel, Simonis and Bechtelar December 28, 2014<br>\nKuvalis-Schumm December 23, 2014<br></p>\n\n<p>Case 2: If I insert month.strftime then I get an error. </p>\n\n<pre><code>&lt;% @events_by_month.keys.sort.each do |month| %&gt;\n    &lt;h2&gt;&lt;%= month.strftime(\"%B %Y\") %&gt;&lt;/h2&gt;\n    &lt;% for firm in @events_by_month[month] %&gt;\n       &lt;p&gt; &lt;%= firm.name %&gt;  &lt;%= firm.date.to_date.to_s(:long) %&gt;&lt;/P&gt;\n    &lt;% end %&gt;&lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Case 1- Problem</strong>: The results are grouped by month but not in order. According to the tutorial it should have ordered the hash.</p>\n\n<p><strong>Case 2 - Problem</strong>: I get an error of : undefined method `strftime' for [Mon, 01 Sep 2014 00:00:00 UTC +00:00]:  Extracted source (around line #2):</p>\n\n<p>I have looked at <a href=\"https://stackoverflow.com/questions/18862726/ruby-on-rails-group-by-how-to-group-events-by-month\">Ruby on Rails group_by (how to group events by month)</a> and it did print the month but hash was still out of order. </p>\n\n<p><strong>Summary</strong>: I am looking for help on ordering the items within the grouped month and also displaying the month. I am using Ruby ruby 2.1.4p265 (2014-10-27 revision 48166) [x86_64-darwin14.0] and Rails 4.2. Thank you in advance</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1436934496, "post_id": 31420937, "comment_id": 50815000, "body": "Where does the empty string between <code>&quot;MARK1&quot;</code> and <code>&quot;MARK2&quot;</code> come from?"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1436961507, "post_id": 31420937, "comment_id": 50829790, "body": "Could you please edit the question to describe the rule that transforms the input into the output?  More examples might be good, too.  As it stands, we can&#39;t tell what it is you want to accomplish."}], "answers": [{"comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1436932038, "post_id": 31420952, "comment_id": 50814380, "body": "Unless of course the string needs to be literally split by <code>MARK</code>, you could also use <code>[A-Z]+</code> for a more regex approach."}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "reply_to_user": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1436932225, "post_id": 31420952, "comment_id": 50814423, "body": "Of course take care that this will split only once MARK appears. If you want to split more than 1 MARK you maybe need to do doing scan or split (and then add MARK)"}, {"owner": {"reputation": 37, "user_id": 799089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0643cfeb133711882c510953c997d993?s=128&d=identicon&r=PG", "display_name": "Bevis.Zhao", "link": "https://stackoverflow.com/users/799089/bevis-zhao"}, "edited": false, "score": 0, "creation_date": 1436932571, "post_id": 31420952, "comment_id": 50814506, "body": "Thanks for quick reply, could you write a demo for multiple MARK and <code>&quot;a b MARK1 MARK2 C&quot;</code>."}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 0, "creation_date": 1436933293, "post_id": 31420952, "comment_id": 50814682, "body": "This is an aproach.  &quot;a b MARK c MARK dsadsa&quot;.gsub(&quot;MARK&quot;,&quot;$MARK$&quot;).split(&quot;$&quot;)"}], "tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": true, "score": 2, "last_activity_date": 1436930868, "last_edit_date": 1436930868, "creation_date": 1436930749, "answer_id": 31420952, "question_id": 31420937, "link": "https://stackoverflow.com/questions/31420937/how-to-split-string-a-b-mark-c-to-a-b-mark-c-by-mark-in-ruby/31420952#31420952", "title": "How to split string &quot;a b MARK c&quot; to [\u201ca b \u201d, \u201cMARK\u201d, \u201c c\u201d] by &#39;MARK&#39; in Ruby", "body": "<p>Use partition.</p>\n\n<pre><code>\"a b MARK c\".partition(\"MARK\")\n# =&gt; [\"a b \", \"MARK\", \" c\"]\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 799089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0643cfeb133711882c510953c997d993?s=128&d=identicon&r=PG", "display_name": "Bevis.Zhao", "link": "https://stackoverflow.com/users/799089/bevis-zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 31420952, "answer_count": 1, "score": -1, "last_activity_date": 1437372339, "creation_date": 1436930644, "last_edit_date": 1437372339, "question_id": 31420937, "link": "https://stackoverflow.com/questions/31420937/how-to-split-string-a-b-mark-c-to-a-b-mark-c-by-mark-in-ruby", "title": "How to split string &quot;a b MARK c&quot; to [\u201ca b \u201d, \u201cMARK\u201d, \u201c c\u201d] by &#39;MARK&#39; in Ruby", "body": "<p>How to split string <code>\"a b MARK c\"</code> to <code>[\u201ca b \u201d, \u201cMARK\u201d, \u201c c\u201d]</code> by 'MARK' in Ruby</p>\n\n<p>EDITED: </p>\n\n<p>How to split string <code>\"a b MARK1 MARK2 c\"</code> to <code>[\u201ca b \u201d, \u201cMARK1\u201d, \" \", \"MARK2\", \u201c c\u201d]</code> in Ruby</p>\n\n<p>UPDATED:</p>\n\n<p>Sorry, I missed the space between MARK1 and MARK2.\nI want to split the string to array by marks, in this case means <code>MARK1</code> and <code>MARK2</code>. The partition method only can split one word and one time.</p>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "edited": false, "score": 0, "creation_date": 1437059271, "post_id": 31421791, "comment_id": 50882858, "body": "It&#39;s curious that the <a href=\"http://guides.rubygems.org/specification-reference/#files\" rel=\"nofollow noreferrer\">RubyGems specification guide</a> includes tests."}, {"owner": {"reputation": 3597, "user_id": 2112512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9689bb4f705b8bede56deddf66c87ef?s=128&d=identicon&r=PG", "display_name": "Jake Worth", "link": "https://stackoverflow.com/users/2112512/jake-worth"}, "reply_to_user": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "edited": false, "score": 0, "creation_date": 1437065425, "post_id": 31421791, "comment_id": 50887027, "body": "Yes, I agree. I don&#39;t think there is one right answer."}], "tags": [], "owner": {"reputation": 3597, "user_id": 2112512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9689bb4f705b8bede56deddf66c87ef?s=128&d=identicon&r=PG", "display_name": "Jake Worth", "link": "https://stackoverflow.com/users/2112512/jake-worth"}, "is_accepted": true, "score": 2, "last_activity_date": 1436936138, "creation_date": 1436936138, "answer_id": 31421791, "question_id": 31420483, "link": "https://stackoverflow.com/questions/31420483/why-exclude-tests-from-gemspec-files/31421791#31421791", "title": "Why exclude tests from gemspec files?", "body": "<p>Besides holding arbitrary metadata about a gem, one important thing that the Gemspec does is tell Rubygems which files are needed to build your gem.</p>\n\n<p>I think Bundler recommends excluding tests because they aren't functional code that is needed for your gem to be built or run. Including every test suite for every Gem in the Ruby universe would be expensive. There isn't a compelling reason you would need to access Omniauth's tests from within your app.</p>\n\n<p>The tests are important, and that's why they were exist as part of the repository. They just aren't necessary in production, so they don't get wrapped up in the package you download from Rubygems.</p>\n\n<p>As for <code>.gitignore</code> and <code>.travis.yml</code> you can exclude these on your own. I don't think the Bundler team was trying to think of every scenario, just the most likely ones.</p>\n"}], "owner": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 0, "accepted_answer_id": 31421791, "answer_count": 1, "score": 1, "last_activity_date": 1436936138, "creation_date": 1436927266, "question_id": 31420483, "link": "https://stackoverflow.com/questions/31420483/why-exclude-tests-from-gemspec-files", "title": "Why exclude tests from gemspec files?", "body": "<p><a href=\"https://github.com/bundler/bundler/blob/e41edd133a737ed95581a4e850076c7160289269/lib/bundler/templates/newgem/newgem.gemspec.tt\" rel=\"nofollow\">Bundler's gemspec template</a> provides the following as the default for specifying a gems files:</p>\n\n<pre><code>spec.files = `git ls-files -z`.split(\"\\x0\").reject { |f| f.match(%r{^(test|spec|features)/}) }\n</code></pre>\n\n<p>A lot of other (seemingly irrelevant) files like the .gitignore and .travis.yml file would be included, so why exclude the tests?</p>\n\n<p>I've seen <a href=\"https://github.com/wycats/rack-offline/blob/master/rack-offline.gemspec#L21\" rel=\"nofollow\">other</a> <a href=\"https://github.com/intridea/omniauth/blob/master/omniauth.gemspec#L13\" rel=\"nofollow\">high-profile</a> <a href=\"https://github.com/rails/globalid/blob/master/globalid.gemspec#L16\" rel=\"nofollow\">gems</a> ignore test files too.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "nested-forms"], "owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1436926027, "creation_date": 1436926027, "question_id": 31420330, "link": "https://stackoverflow.com/questions/31420330/retaining-nested-form-data-through-sign-in-process", "title": "Retaining Nested Form Data Through Sign In Process", "body": "<p>I am using Devise with Rails 4. </p>\n\n<p>When a user tries to submit a subarticle, which is nested in articles, they will be redirected to a sign up page if they don't already have an account. I have stored the form data to the users session so once they have signed up it can be submitted and saved to the data base. </p>\n\n<p>I am having trouble also saving the articles title (the article in which the subarticle is being created under), so it can later be displayed in the users edit profile page. Everything else works fine, but when I call <code>&lt;%= subarticle.article.title %&gt;</code> I receive an error as it can't find article. </p>\n\n<p>What would be the best way to save the article title with all of the subarticle form data? </p>\n\n<p>Here is my code so far....</p>\n\n<p>subarticles_controller.rb:</p>\n\n<pre><code>def create\n    if current_user.nil?\n\n     session[:subarticle] = params\n\n     redirect_to new_user_registration_path\n\n    else \n\n      @subarticle.user = current_user\n\n      respond_to do |format|\n        if @subarticle.save\n          #1st argument of redirect_to is an array, in order to build the correct route to the nested resource comment\n          format.html { redirect_to(@subarticle.article, :notice =&gt; 'Thank you for sharing your knowledge! Your subarticle is now undergoing review.') }\n          format.mobile { redirect_to(@subarticle.article, :notice =&gt; 'Thank you for sharing your knowledge! Your subarticle is now undergoing review.') }\n          #the key :location is associated to an array in order to build the correct route to the nested resource comment\n          format.xml  { render :xml =&gt; @subarticle, :status =&gt; :created, :location =&gt; [@subarticle.article, @subarticle] }\n        else\n          format.html { render :action =&gt; \"new\" }\n          format.mobile { render :action =&gt; \"new\" }\n          format.xml  { render :xml =&gt; @subarticle.errors, :status =&gt; :unprocessable_entity }\n        end\n      end\n    end\n  end\n</code></pre>\n\n<p>application_controller.rb:</p>\n\n<pre><code>def after_sign_in_path_for(resource)\n    if admin_signed_in? #Assuming there is such a function\n      rails_admin_path\n    elsif session[:subarticle].present?\n\n      @subarticle = current_user.subarticles.create(session[:subarticle][\"subarticle\"])\n\n      # clear session\n      session[:subarticle] = nil\n\n      #redirect\n      flash[:notice] = \"Awesome, you are logged in and your subarticle is undergoing review.\"      \n      edit_user_registration_path\n    else\n      session[:previous_url] || root_path\n    end\n  end\n</code></pre>\n\n<p>Let me know if you need any further code. Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "edited": false, "score": 0, "creation_date": 1436924835, "post_id": 31420087, "comment_id": 50812694, "body": "Why don&#39;t you try binding to host IP instead of 0.0.0.0 ie.  rails s -b &lt;host_IP&gt; -p 3000"}, {"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "reply_to_user": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "edited": false, "score": 0, "creation_date": 1436936523, "post_id": 31420087, "comment_id": 50815618, "body": "I tried that, thank you, but the assets still do not load."}, {"owner": {"reputation": 788, "user_id": 2251481, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8c01631722b81d94d12362706eaa59e3?s=128&d=identicon&r=PG", "display_name": "Jan Strn&#225;dek", "link": "https://stackoverflow.com/users/2251481/jan-strn%c3%a1dek"}, "edited": false, "score": 0, "creation_date": 1436938031, "post_id": 31420087, "comment_id": 50816144, "body": "Try to call directly some assets file on the remote server, maybe if you re running in production environment, your webserver does not serve static assets ...."}, {"owner": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "edited": false, "score": 0, "creation_date": 1436944809, "post_id": 31420087, "comment_id": 50819321, "body": "Could it be asset pre-compiling problem? why don&#39;t you try <code>rake assets:precompile</code>. Although in development environment it shouldn&#39;t be a problem."}, {"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1436957846, "post_id": 31420087, "comment_id": 50827457, "body": "I tried <code>rake assets:precompile</code> and this did not help.  I am almost certainly running in development mode, config/environments/development.rb is executed when server starts up."}, {"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1437001201, "post_id": 31420087, "comment_id": 50854339, "body": "I tried loading an image on the remote server by typing in its url and it did load.  However, when I try to load a web page, there is no styling, and the images do not load.  I cannot see any error messages in the log. One strange thing is that the address for the host is 192.168.0.56 but in the log, it says it is loading the page from 192.168.0.5. If I try 192.168.0.5:3000 safari says it cannot load page."}], "answers": [{"comments": [{"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1436958049, "post_id": 31422334, "comment_id": 50827597, "body": "I have tried that and the web site loads but the assets do not."}, {"owner": {"reputation": 1136, "user_id": 3219208, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/F9lzs.png?s=128&g=1", "display_name": "RockStar", "link": "https://stackoverflow.com/users/3219208/rockstar"}, "reply_to_user": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1436961329, "post_id": 31422334, "comment_id": 50829655, "body": "are doing it in <code>development env</code>? please try to use this  <code>config.serve_static_assets  = true</code> in <code>development.rb</code>."}, {"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1437001416, "post_id": 31422334, "comment_id": 50854425, "body": "I tried config.serve_static_assets=true but that did not help."}, {"owner": {"reputation": 1136, "user_id": 3219208, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/F9lzs.png?s=128&g=1", "display_name": "RockStar", "link": "https://stackoverflow.com/users/3219208/rockstar"}, "reply_to_user": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1437053033, "post_id": 31422334, "comment_id": 50877900, "body": "Ok. Please open browser&#39;s console &amp; clear errors, then refresh page and post here list of errors."}, {"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1437083902, "post_id": 31422334, "comment_id": 50896785, "body": "Good idea. I could not format the output properly in a comment, so have added it to the main question above."}, {"owner": {"reputation": 1136, "user_id": 3219208, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/F9lzs.png?s=128&g=1", "display_name": "RockStar", "link": "https://stackoverflow.com/users/3219208/rockstar"}, "reply_to_user": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1437110444, "post_id": 31422334, "comment_id": 50903458, "body": "Thanks. Does remote machine having any firewalls enabled? Have to tried same <code>IP</code> &amp; <code>port</code> on different machine or mobile?"}, {"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "edited": false, "score": 0, "creation_date": 1437268956, "post_id": 31422334, "comment_id": 50957696, "body": "For this purpose, no firewalls are enabled and have tried on a Mac and an Iphone.   Do you know what the numbers like /:24 mean at the end of <code>GET http:&#47;&#47;localhost:3000&#47;assets&#47;application.css net::ERR_CONNECTION_REFUSED 192.168.0.57&#47;:24 </code>?"}], "tags": [], "owner": {"reputation": 1136, "user_id": 3219208, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/F9lzs.png?s=128&g=1", "display_name": "RockStar", "link": "https://stackoverflow.com/users/3219208/rockstar"}, "is_accepted": false, "score": 5, "last_activity_date": 1436943885, "last_edit_date": 1436943885, "creation_date": 1436939109, "answer_id": 31422334, "question_id": 31420087, "link": "https://stackoverflow.com/questions/31420087/access-local-host-from-another-machine-on-network-in-rails-4-2/31422334#31422334", "title": "Access local host from another machine on network in rails 4.2", "body": "<p>If you have a <code>LINUX</code> or <code>UNIX</code> distro, open terminal and hit</p>\n\n<pre><code>ifconfig\n</code></pre>\n\n<p>Then find inet address like eg.</p>\n\n<pre><code>inet 192.168.0.113 netmask 0xffffff00 broadcast 192.168.0.255 \n</code></pre>\n\n<p>Then from another machine in same network, you can hit below in browser</p>\n\n<pre><code>192.168.0.113:3000\n</code></pre>\n\n<p>Now you will able to run your application from different machine.</p>\n\n<p>Hopefully this will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "is_accepted": true, "score": 1, "last_activity_date": 1437346661, "creation_date": 1437346661, "answer_id": 31506806, "question_id": 31420087, "link": "https://stackoverflow.com/questions/31420087/access-local-host-from-another-machine-on-network-in-rails-4-2/31506806#31506806", "title": "Access local host from another machine on network in rails 4.2", "body": "<p>I solved this by setting the config.asset_host to the address of the host machine. So if the host machine is <code>192.168.0.17</code> then in <code>config/development.rb</code> you want the following line:</p>\n\n<pre><code>config.asset_host = '192.168.0.17:3000'\n</code></pre>\n\n<p>This is not ideal, it means you need to change your <code>development.rb</code> file every time you want to open up your development server by binding it to <code>0.0.0.0:3000</code>.</p>\n"}], "owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4861, "favorite_count": 1, "accepted_answer_id": 31506806, "answer_count": 2, "score": 2, "last_activity_date": 1437346661, "creation_date": 1436924297, "last_edit_date": 1437083796, "question_id": 31420087, "link": "https://stackoverflow.com/questions/31420087/access-local-host-from-another-machine-on-network-in-rails-4-2", "title": "Access local host from another machine on network in rails 4.2", "body": "<p>According to this <a href=\"http://forum.railsonmaui.com/t/why-is-my-rails-4-2-app-not-available-on-my-local-network/227\" rel=\"nofollow\">post</a>, in order to access the local server from another machine on the same network, you need to use 0.0.0.0:3000 as the address for localhost in rails 4.2. If I start the server with <code>rails s -b 0.0.0.0 -p 3000</code> I can indeed access from another machine, using the host ip address followed by :3000. However, the assets are not displaying. I have tried setting <code>config.asset_host = '0.0.0.0:3000'</code> in development.rb and restarting the server but this does not help.</p>\n\n<p>So how do I have the assets load from a remote machine?  The console shows the following errors</p>\n\n<pre><code>GET http://localhost:3000/assets/application.css net::ERR_CONNECTION_REFUSED\n192.168.0.57/:24 \nGET http://localhost:3000/assets/application.js net::ERR_CONNECTION_REFUSED\n192.168.0.57/:83 \nGET http://localhost:3000/assets/infographic.png net::ERR_CONNECTION_REFUSED\n192.168.0.57/:106 \nGET http://localhost:3000/assets/analysis-thumb.png net::ERR_CONNECTION_REFUSED\n192.168.0.57/:121 \nGET http://localhost:3000/assets/chart-thumb.png net::ERR_CONNECTION_REFUSED\nlocalhost:3000/images/favicon.ico:1 \nGET http://localhost:3000/images/favicon.ico net::ERR_CONNECTION_REFUSED\ngingerEditor.min.js:21 \nRunning Ginger Widget  version 0.1.0.585\nlocalhost:3000/images/favicon.ico:1 \nGET http://localhost:3000/images/favicon.ico net::ERR_CONNECTION_REFUSED\n</code></pre>\n\n<p>In this case, the host machine was at 192.168.0.57:3000.  The server log says the page loaded at 192.168.0.9 i.e. <code>Started GET \"/\" for 192.168.0.9</code></p>\n"}, {"tags": ["ruby"], "owner": {"reputation": 22618, "user_id": 1555312, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/12c03a0fc2ac25d234882cf93f1d3052?s=128&d=identicon&r=PG", "display_name": "bigpotato", "link": "https://stackoverflow.com/users/1555312/bigpotato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1448827017, "creation_date": 1436923267, "last_edit_date": 1448827017, "question_id": 31419949, "link": "https://stackoverflow.com/questions/31419949/ruby-is-the-spreadsheet-gem-thread-safe", "title": "Ruby: is the Spreadsheet gem thread safe?", "body": "<p>I'm using Axlsx (which is not thread safe) and I'm looking into switching to Spreadsheet (<a href=\"https://github.com/zdavatz/spreadsheet\" rel=\"nofollow\">https://github.com/zdavatz/spreadsheet</a>). However, I don't see anything on the internet about it being thread safe. Does anyone have experience with using threads with the Spreadsheet gem?</p>\n"}, {"tags": ["ruby", "volt", "voltrb"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5117419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RU0ONYPMbk8/AAAAAAAAAAI/AAAAAAAAA2s/2vcB3dJkruY/photo.jpg?sz=128", "display_name": "Austin Paxton", "link": "https://stackoverflow.com/users/5117419/austin-paxton"}, "edited": false, "score": 0, "creation_date": 1436932945, "post_id": 31421081, "comment_id": 50814592, "body": "Doesn&#39;t seem to work. Changed the path to <code>&#47;main&#47;views&#47;mailers&#47;onboard</code>. Adding the <code>.email</code> doesn&#39;t work either."}, {"owner": {"reputation": 876, "user_id": 368602, "user_type": "registered", "profile_image": "https://graph.facebook.com/144900684/picture?type=large", "display_name": "Ryan", "link": "https://stackoverflow.com/users/368602/ryan"}, "reply_to_user": {"reputation": 3, "user_id": 5117419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RU0ONYPMbk8/AAAAAAAAAAI/AAAAAAAAA2s/2vcB3dJkruY/photo.jpg?sz=128", "display_name": "Austin Paxton", "link": "https://stackoverflow.com/users/5117419/austin-paxton"}, "edited": false, "score": 0, "creation_date": 1436980208, "post_id": 31421081, "comment_id": 50843361, "body": "Try this: <code>main&#47;mailers&#47;onboard</code>"}, {"owner": {"reputation": 876, "user_id": 368602, "user_type": "registered", "profile_image": "https://graph.facebook.com/144900684/picture?type=large", "display_name": "Ryan", "link": "https://stackoverflow.com/users/368602/ryan"}, "reply_to_user": {"reputation": 3, "user_id": 5117419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RU0ONYPMbk8/AAAAAAAAAAI/AAAAAAAAA2s/2vcB3dJkruY/photo.jpg?sz=128", "display_name": "Austin Paxton", "link": "https://stackoverflow.com/users/5117419/austin-paxton"}, "edited": false, "score": 0, "creation_date": 1436980259, "post_id": 31421081, "comment_id": 50843384, "body": "This video explains some of how view lookup works: <a href=\"https://www.youtube.com/watch?v=1yNMP3XR6jU\" rel=\"nofollow noreferrer\">youtube.com/watch?v=1yNMP3XR6jU</a>"}], "tags": [], "owner": {"reputation": 876, "user_id": 368602, "user_type": "registered", "profile_image": "https://graph.facebook.com/144900684/picture?type=large", "display_name": "Ryan", "link": "https://stackoverflow.com/users/368602/ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1436931439, "creation_date": 1436931439, "answer_id": 31421081, "question_id": 31419895, "link": "https://stackoverflow.com/questions/31419895/getting-error-about-the-email-tempate-when-using-volt-mailer/31421081#31421081", "title": "Getting error about the .email tempate when using volt-mailer", "body": "<p>You don't need to specify the <code>app</code> at the beginning of the path.  Also, you don't need the .email at the end.  Try that and let me know if it works.</p>\n"}], "owner": {"reputation": 3, "user_id": 5117419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RU0ONYPMbk8/AAAAAAAAAAI/AAAAAAAAA2s/2vcB3dJkruY/photo.jpg?sz=128", "display_name": "Austin Paxton", "link": "https://stackoverflow.com/users/5117419/austin-paxton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1436933183, "creation_date": 1436922903, "last_edit_date": 1436933183, "question_id": 31419895, "link": "https://stackoverflow.com/questions/31419895/getting-error-about-the-email-tempate-when-using-volt-mailer", "title": "Getting error about the .email tempate when using volt-mailer", "body": "<p>So I have what appears to be a completely valid .email view, all written based on the docs.</p>\n\n<pre><code>&lt;:Subject&gt;\n  Splatoon/Notify\n\n&lt;:Html&gt;\n  &lt;h1&gt;Welcome {{ name }}&lt;/h1&gt;\n\n  &lt;p&gt;Thanks for using Splatoon/Notify. We hope you enjoy the service.&lt;/p&gt;\n\n&lt;:Text&gt;\nWelcome {{ name }}! Thanks for using Splatoon/Notify. We hope you enjoy the service.\n</code></pre>\n\n<p>It's being called by this task, inside mailer_tasks.rb</p>\n\n<pre><code>def onboard_user(email)\n  Mailer.deliver('app/main/views/mailers/onboard.email', {to: email, :via =&gt; :smtp})\nend\n</code></pre>\n\n<p>and yet it throws this error</p>\n\n<pre><code>Unable to find view at `app/main/views/mailers/onboard.email/subject`\n</code></pre>\n\n<p>Why would it be looking for a /subject path? I can't find any question on StackOverflow about the mailer gem.</p>\n"}, {"tags": ["ruby", "recursion"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1436924291, "post_id": 31419851, "comment_id": 50812594, "body": "You will generate more interest if you provide a small example, including the desired result."}, {"owner": {"reputation": 259, "user_id": 4913217, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09c60b63dbcbe46eb22f0ae6811b571e?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Archey", "link": "https://stackoverflow.com/users/4913217/jared-archey"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1436926062, "post_id": 31419851, "comment_id": 50812954, "body": "Thank you, I took your advice"}], "answers": [{"tags": [], "owner": {"reputation": 98, "user_id": 5328376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20cf4a139aa4cbd96614aa81c69957fd?s=128&d=identicon&r=PG", "display_name": "Luke Fritz", "link": "https://stackoverflow.com/users/5328376/luke-fritz"}, "is_accepted": false, "score": 0, "last_activity_date": 1442601425, "creation_date": 1442601425, "answer_id": 32658883, "question_id": 31419851, "link": "https://stackoverflow.com/questions/31419851/recursive-method-to-find-matching-rows-on-grid/32658883#32658883", "title": "Recursive method to find matching rows on grid", "body": "<p>If I understood you correctly, I believe the following code answers your question.  Please, tell me if it isn't quite what you were thinking.</p>\n\n<p>For ease of reading, I kept the recursive <code>search</code> function separate from the (somewhat clunky) logic that iterates over each cell and direction.</p>\n\n<p>Also, it is worth mentioning that I am calling <code>transpose</code> and <code>reverse</code> on the Array of Arrays so that the grid is easier for humans to read.  Lower left is (0, 0) and top right is (2, 2).</p>\n\n<pre><code>def search(grid, x, y, direction, length_to_find, value_to_find=nil)\n  return true if length_to_find == 0\n\n  value_at_location = grid.transpose[x].reverse[y] if grid.transpose[x]\n  value_to_find ||= value_at_location\n  return false if value_at_location != value_to_find\n\n  y += 1 if direction =~ /N/i\n  y -= 1 if direction =~ /S/i\n  x += 1 if direction =~ /E/i\n  x -= 1 if direction =~ /W/i\n  search(grid, x, y, direction, length_to_find - 1, value_to_find)\nend\n\ndef row_of?(grid, length_to_find)\n  grid.length.times do |row|\n    grid[0].length.times do |col|\n      %w[N NE E SE S SW W NW].each do |direction|\n        if search(grid, row, col, direction, length_to_find)\n          return true\n        end\n      end\n    end\n  end\n  false\nend\n\ngrid = [\n  [ \"O\", \"O\", \"O\"],\n  [ \" \", \"O\", \"X\"],\n  [ \" \", \"X\", \"X\"]\n]\n\nputs row_of?(grid, 3)\n</code></pre>\n"}], "owner": {"reputation": 259, "user_id": 4913217, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09c60b63dbcbe46eb22f0ae6811b571e?s=128&d=identicon&r=PG&f=1", "display_name": "Jared Archey", "link": "https://stackoverflow.com/users/4913217/jared-archey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1442601425, "creation_date": 1436922535, "last_edit_date": 1486566279, "question_id": 31419851, "link": "https://stackoverflow.com/questions/31419851/recursive-method-to-find-matching-rows-on-grid", "title": "Recursive method to find matching rows on grid", "body": "<p>I have a grid object which is populated by space objects each containing a value. What I want to do is write a method which takes a space, and a number representing the amount of equal spaces I would like to find, to see if there is anywhere on the grid with x-number of equal spaces in the same direction.</p>\n\n<p>In psuedo-code, the steps I planned are:</p>\n\n<ol>\n<li>Begin at the top-left corner of the grid. </li>\n<li>Check each direction (N,S,E,W,NE,NW,SE,SW) for 2 conditions\n\n<ol>\n<li>The space in that direction exists</li>\n<li>The value in that space matches the value in the current space</li>\n</ol></li>\n<li>If these conditions all fail I want call the method again, but with the current space as the next space (increasing left >> right &amp; top >> bottom)</li>\n<li>If these conditions are satisfied I want to store this value in a list and call the method again to check the matching space only in the direction the current space was found</li>\n<li>If the next space finds that its adjacent space does not match, I want to \n\n<ol>\n<li>Quit searching </li>\n<li>Return to the first space the method was called with</li>\n<li>Check the remaining directions to satify the 2 conditions</li>\n<li>Call the method again with the next space if no spaces satisfy (increasing left >> right &amp; top >> bottom)</li>\n</ol></li>\n<li>The function returns when the current space is the bottom right space or the list of matching values is the same length as the value specified</li>\n</ol>\n\n<p>If this were implemented on a tic-tac-toe board like below, I would start at the top left \"O\". I would check North, fail, check North-East, fail, check East, pass. Once it passes I would move to the next \"O\" and check only to its East since the current \"O\" was found to the east of its previous space, which would give me the expected result of finding 3 \"O\"s.\nThe other case I want to handle is, if the South-East were checked the space would move to the center, where the center space would check its South-East, notice that \"X\" does not equal \"O\", return back to the top-left space, check the remaining directions, then move to the next space down the line and repeat until all spaces are checked or a match is found</p>\n\n<p><img src=\"https://www.wpclipart.com/recreation/games/Tic_tac_toe.png\" alt=\"Tic-Tac-Toe Board\"></p>\n\n<p>My non-recursive implementation of this method is as follows. It loops through each space, and for each space loops through each compass direction and assigns the value repeated 'num' times to the found variable which will return nil if nothing was found, or the value which was repeated 'num' times</p>\n\n<pre><code>def check_for_row_of(num)\n    found = nil\n    each_space do |space|\n        COMPASS.each do |direction|\n            if num_spaces_in_direction(space.pos, direction) == num\n                values = get_spaces_by_pattern(space.pos, direction)\n                found = values.uniq[0] if values.uniq.length == 1 &amp;&amp; values.uniq[0] != \" \"\n            end\n        end\n    end\n    found\nend\n</code></pre>\n"}]