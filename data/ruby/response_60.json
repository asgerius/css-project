[{"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1456963040, "post_id": 35760583, "comment_id": 59194390, "body": "Sorry for not posting it but the hash will be like this <code>h = { a: &quot;&quot;, b: &quot;&quot;, c: &quot;1&quot; }</code> with strings as values. If I just replace <code>.nil</code> with <code>.blank</code> that should suffice?"}, {"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "reply_to_user": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1456963678, "post_id": 35760583, "comment_id": 59194607, "body": "@user3234020 I updated my answer to adequate your specs."}], "tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": false, "score": 0, "last_activity_date": 1456963407, "last_edit_date": 1456963407, "creation_date": 1456962751, "answer_id": 35760583, "question_id": 35760508, "link": "https://stackoverflow.com/questions/35760508/how-do-i-remove-keys-from-hash-that-have-a-bank-value-while-skipping-the-first-k/35760583#35760583", "title": "How do I remove keys from hash that have a bank value while skipping the first key", "body": "<p>Using <code>select</code>:</p>\n\n<pre><code>h = { a: '', b: '', c: 1 }\nputs h.select.with_index { |subh, i| !(subh[1].to_s.empty?) || i == 0 }\n# =&gt; {:a=&gt;'', :c=&gt;1}\n</code></pre>\n\n<p>You should think carefully if you really want to rely on ordering when using a Hash though. </p>\n"}, {"comments": [{"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1456963618, "post_id": 35760666, "comment_id": 59194593, "body": "I now realise how much I was overcomplicating it."}], "tags": [], "owner": {"reputation": 417, "user_id": 5507259, "user_type": "registered", "profile_image": "https://graph.facebook.com/888912451163823/picture?type=large", "display_name": "Roman Kovtunenko", "link": "https://stackoverflow.com/users/5507259/roman-kovtunenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1456963264, "creation_date": 1456963264, "answer_id": 35760666, "question_id": 35760508, "link": "https://stackoverflow.com/questions/35760508/how-do-i-remove-keys-from-hash-that-have-a-bank-value-while-skipping-the-first-k/35760666#35760666", "title": "How do I remove keys from hash that have a bank value while skipping the first key", "body": "<p>One liner:</p>\n\n<pre><code>hash.delete_if.with_index {|(k, v), i| v.nil? &amp;&amp; i != 0 }\n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 35760666, "answer_count": 2, "score": 0, "last_activity_date": 1456964620, "creation_date": 1456962354, "question_id": 35760508, "link": "https://stackoverflow.com/questions/35760508/how-do-i-remove-keys-from-hash-that-have-a-bank-value-while-skipping-the-first-k", "title": "How do I remove keys from hash that have a bank value while skipping the first key", "body": "<p>I'm trying to remove any keys in a hash that has a blank value besides the first key. I'm also trying to do this on one line. </p>\n\n<p>Here is what I have which gives a whole bunch of syntax errors. I keep fiddling with it to try fix the syntax errors but nothing works. Where am I going wrong?</p>\n\n<pre><code>hash.each_with_index do { |(key, value), i| value.blank? &amp;&amp; i != 0 ? key.delete :    }\n</code></pre>\n"}, {"tags": ["ruby", "ubuntu", "jekyll"], "comments": [{"owner": {"reputation": 5060, "user_id": 141522, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a2b67c86000858085aa29b93d8fcb06a?s=128&d=identicon&r=PG", "display_name": "David Weiser", "link": "https://stackoverflow.com/users/141522/david-weiser"}, "edited": false, "score": 0, "creation_date": 1456961988, "post_id": 35760407, "comment_id": 59193984, "body": "When you uninstall/reinstall <code>jekyll</code> which version is installed?  3.1.2?"}, {"owner": {"reputation": 75, "user_id": 1229197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6ca225297c7f408d7e1c8d27864ea29f?s=128&d=identicon&r=PG", "display_name": "rfboyce", "link": "https://stackoverflow.com/users/1229197/rfboyce"}, "reply_to_user": {"reputation": 5060, "user_id": 141522, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a2b67c86000858085aa29b93d8fcb06a?s=128&d=identicon&r=PG", "display_name": "David Weiser", "link": "https://stackoverflow.com/users/141522/david-weiser"}, "edited": false, "score": 0, "creation_date": 1456962297, "post_id": 35760407, "comment_id": 59194111, "body": "<code>gem list</code> produces: <code>jekyll (3.1.2, 2.2.0)</code>"}, {"owner": {"reputation": 75, "user_id": 1229197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6ca225297c7f408d7e1c8d27864ea29f?s=128&d=identicon&r=PG", "display_name": "rfboyce", "link": "https://stackoverflow.com/users/1229197/rfboyce"}, "reply_to_user": {"reputation": 5060, "user_id": 141522, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a2b67c86000858085aa29b93d8fcb06a?s=128&d=identicon&r=PG", "display_name": "David Weiser", "link": "https://stackoverflow.com/users/141522/david-weiser"}, "edited": false, "score": 0, "creation_date": 1456962692, "post_id": 35760407, "comment_id": 59194275, "body": "ok i ran <code>sudo gem uninstall jekyll --version 3.1.2</code> and that cleared up the above error, now i&#39;m getting a page of dependency issues such as: <code>&#47;usr&#47;lib&#47;ruby&#47;2.1.0&#47;rubygems&#47;dependency.rb:298:in &#39;to_specs&#39;: Could not find &#39;pygments.rb&#39; (~&gt; 0.6.0) - did find: [pygments.rb-0.5.4] (Gem::LoadError)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 1229197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6ca225297c7f408d7e1c8d27864ea29f?s=128&d=identicon&r=PG", "display_name": "rfboyce", "link": "https://stackoverflow.com/users/1229197/rfboyce"}, "edited": false, "score": 0, "creation_date": 1457051454, "post_id": 35763100, "comment_id": 59242963, "body": "Thanks for this thorough walk-through. However, I&#39;ve attempted to <code>sudo gem uninstall jekyll</code> and receive permissions error for a file that doesn&#39;t appear to exist: <code>ERROR:  While executing gem ... (Gem::FilePermissionError)     You don&#39;t have write permissions for the &#47;usr&#47;share&#47;rubygems-integration&#47;all&#47;bin directory.</code> any insights? i&#39;m going to try installing RVM next."}, {"owner": {"reputation": 75, "user_id": 1229197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6ca225297c7f408d7e1c8d27864ea29f?s=128&d=identicon&r=PG", "display_name": "rfboyce", "link": "https://stackoverflow.com/users/1229197/rfboyce"}, "edited": false, "score": 0, "creation_date": 1457058686, "post_id": 35763100, "comment_id": 59244994, "body": "i was able to use Bundler without uninstalling the old version of jekyll. so now <code>bundle exec jekyll serve</code> works. thanks for your help!"}, {"owner": {"reputation": 1701, "user_id": 5455207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6fa7e8a0b8a820fa63c7cfd1833b1be4?s=128&d=identicon&r=PG", "display_name": "Virtua Creative", "link": "https://stackoverflow.com/users/5455207/virtua-creative"}, "reply_to_user": {"reputation": 75, "user_id": 1229197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6ca225297c7f408d7e1c8d27864ea29f?s=128&d=identicon&r=PG", "display_name": "rfboyce", "link": "https://stackoverflow.com/users/1229197/rfboyce"}, "edited": false, "score": 0, "creation_date": 1457098701, "post_id": 35763100, "comment_id": 59264503, "body": "I think you&#39;ll need to open the terminal with admin rights to uninstall Jekyll 2.2.0. Anyway, I&#39;m glad to have helped. :)"}], "tags": [], "owner": {"reputation": 1701, "user_id": 5455207, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6fa7e8a0b8a820fa63c7cfd1833b1be4?s=128&d=identicon&r=PG", "display_name": "Virtua Creative", "link": "https://stackoverflow.com/users/5455207/virtua-creative"}, "is_accepted": true, "score": 3, "last_activity_date": 1456978635, "creation_date": 1456978635, "answer_id": 35763100, "question_id": 35760407, "link": "https://stackoverflow.com/questions/35760407/whats-causing-jekyll-to-throw-a-undefined-method-require-from-bundler-error/35763100#35763100", "title": "what&#39;s causing jekyll to throw a &quot;undefined method `require_from_bundler&#39;&quot; error on any command?", "body": "<p>Well, I suggest you to run Jekyll with <a href=\"https://bundler.io\" rel=\"nofollow\">Bundler</a>, which is an awesome dependency manager. It will make sure you have all the gems you need.</p>\n\n<p><strong>1st</strong>. Uninstall Jekyll 2.2.0. This version is too old and requires Python to run some dependencies. Jekyll 3.x does not require Python anymore.</p>\n\n<p>So, run <code>sudo gem uninstall jekyll --version 2.2.0</code>. (or <code>gem uninstall jekyll -v 2.2.0</code>)</p>\n\n<p><strong>2nd</strong>. Now, install Bundler:</p>\n\n<p><code>gem install bundler</code> (or <code>sudo gem install bundler</code>)</p>\n\n<p><strong>3rd.</strong> Add a <code>Gemfile</code> (don't give it any extension) to your site root with the following content:</p>\n\n<pre><code>source \"https://rubygems.org\"\n\ngem 'jekyll', '3.1.2'\n</code></pre>\n\n<p>This will make sure you will have installed Jekyll 3.1.2 and all its dependencies.</p>\n\n<p>If you will deploy your site to GitHub, the Gemfile must be different:</p>\n\n<pre><code>source \"https://rubygems.org\"\n\ngem 'github-pages'\n</code></pre>\n\n<p>This will include the Jekyll version running at GitHub pages at the time.</p>\n\n<p><strong>4th.</strong> Using the terminal, <code>cd path/to/path</code> to your site root and run <code>bundle install</code> there. Bundler will install all the dependencies for you and create a new file called <code>Gemfile.lock</code>, which will have a list of all dependencies installed for that project.</p>\n\n<p><strong>5th.</strong> Run <code>bundle exec jekyll serve</code></p>\n\n<p>Done!</p>\n\n<hr>\n\n<p>NOTE 1: I recommend you to use Jekyll 3.0.3, as I think it's better then 3.1.2 (it seems there are some bugs on 3.1.2 which don't have in 3.0.3). Anyway, opinion based tip - it's up to you.</p>\n\n<p>NOTE 2: If you don't have openssl installed to your computer, replace the protocol in your Gemfile:</p>\n\n<pre><code>source \"https://rubygems.org\"\n</code></pre>\n\n<p>replace for</p>\n\n<pre><code>source \"http://rubygems.org\"\n</code></pre>\n\n<p>For reference: </p>\n\n<ul>\n<li><a href=\"http://jekyllrb.com/docs/upgrading/2-to-3/\" rel=\"nofollow\">Jekyll 2x-to-3x</a></li>\n<li><a href=\"https://help.github.com/articles/setting-up-your-pages-site-locally-with-jekyll/\" rel=\"nofollow\">Jekyll on GitHub</a></li>\n</ul>\n\n<p>That's it! Hope to have helped!</p>\n"}], "owner": {"reputation": 75, "user_id": 1229197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6ca225297c7f408d7e1c8d27864ea29f?s=128&d=identicon&r=PG", "display_name": "rfboyce", "link": "https://stackoverflow.com/users/1229197/rfboyce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1116, "favorite_count": 0, "accepted_answer_id": 35763100, "answer_count": 1, "score": 1, "last_activity_date": 1457042606, "creation_date": 1456961779, "last_edit_date": 1457042606, "question_id": 35760407, "link": "https://stackoverflow.com/questions/35760407/whats-causing-jekyll-to-throw-a-undefined-method-require-from-bundler-error", "title": "what&#39;s causing jekyll to throw a &quot;undefined method `require_from_bundler&#39;&quot; error on any command?", "body": "<p>I'm working on a jekyll site on Ubuntu 15.04 and when i try <code>jekyll serve</code> (or any other jekyll command, with or without sudo) i receive the following:</p>\n\n<pre><code>/var/lib/gems/2.1.0/gems/jekyll-3.1.2/bin/jekyll:9:in `&lt;top (required)&gt;': undefined method `require_from_bundler' for     Jekyll::PluginManager:Class (NoMethodError)\n    from /usr/local/bin/jekyll:23:in `load'\n    from /usr/local/bin/jekyll:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>I have worked on jekyll sites on this computer recently without this issue, and I'm not certain how the configuration changed to generate this error. I've tried <code>gem uninstall jekyll</code> and reinstalling it, same issue happens. I'm not a Ruby dev and I'm a bit at a loss for how to troubleshoot this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 0, "creation_date": 1456960470, "post_id": 35759902, "comment_id": 59193411, "body": "for this line <code>@user = User.find(params[:user_id])</code> is that supposed to be whom ever is logged in?"}], "answers": [{"tags": [], "owner": {"reputation": 235, "user_id": 5446925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/af919a93a7511096e0a7067a675cf39a?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/5446925/edward"}, "is_accepted": true, "score": 0, "last_activity_date": 1456960762, "creation_date": 1456960762, "answer_id": 35760183, "question_id": 35759902, "link": "https://stackoverflow.com/questions/35759902/user-id-is-nil-when-i-attempt-to-create-items/35760183#35760183", "title": "user_id is nil when I attempt to create items", "body": "<p>I commented out the authenticate before_filter which wasn't allowing the user_id to be assigned....stupid mistake!</p>\n"}, {"tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": false, "score": 0, "last_activity_date": 1456960810, "creation_date": 1456960810, "answer_id": 35760193, "question_id": 35759902, "link": "https://stackoverflow.com/questions/35759902/user-id-is-nil-when-i-attempt-to-create-items/35760193#35760193", "title": "user_id is nil when I attempt to create items", "body": "<pre><code>class ItemsController &lt; ApplicationController\n\n  def create\n    user = current_user\n    @item = current_user.items.new(params[:items])\n    if @item.save\n      redirect_to current_user, notice: \"Item was saved successfully.\"\n    else\n      flash[:error] = \"Error creating item. Please try again.\"\n      render @user\n    end\n  end\n\n  private\n\n  def item_params\n    params.require(:item).permit(:name)\n  end\nend\n</code></pre>\n\n<p>make sure that you have a proper association in your model </p>\n\n<pre><code>class Item &lt; ActiveRecord::Base\n  belongs_to :user\n  ...\nend\n\nclass User &lt; ActiveRecord::Base\n  has_many :items\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 235, "user_id": 5446925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/af919a93a7511096e0a7067a675cf39a?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/5446925/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 35760183, "answer_count": 2, "score": -1, "last_activity_date": 1456960810, "creation_date": 1456959543, "question_id": 35759902, "link": "https://stackoverflow.com/questions/35759902/user-id-is-nil-when-i-attempt-to-create-items", "title": "user_id is nil when I attempt to create items", "body": "<p>I'm fairly new to Rails and I have an issue where I'm attempting to create items but every item I create has a <code>user_id</code> of <code>nil</code>. If I create the item within localhost and check to make sure it's created in rails console, it shows but with <code>user_id = nil</code>. Thanks in advance for the help!</p>\n\n<p>Users are created using <strong>Devise</strong>.</p>\n\n<p><strong>Items Controller</strong></p>\n\n<pre><code>class ItemsController &lt; ApplicationController\n\n  def create\n    @user = User.find(params[:user_id])\n    @item = Item.new(item_params)\n    @item.user = current_user\n    if @item.save\n      @item = Item.update_items(params[:items])\n      redirect_to @user, notice: \"Item was saved successfully.\"\n    else\n      flash[:error] = \"Error creating item. Please try again.\"\n      render @user\n    end\n  end\n\n  private\n\n  def item_params\n    params.require(:item).permit(:name)\n  end\nend\n</code></pre>\n\n<p><strong>Users Controller</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  # before_action :authenticate_user!\n\n  def show\n    @user = User.find(params[:id])\n    @item = Item.new\n    @items = @user.items\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "html", "rspec", "sinatra", "capybara"], "comments": [{"owner": {"reputation": 2131, "user_id": 577894, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cbcc29e442c7d9f65a7798c4831f09c6?s=128&d=identicon&r=PG", "display_name": "Abe Petrillo", "link": "https://stackoverflow.com/users/577894/abe-petrillo"}, "edited": false, "score": 0, "creation_date": 1489853330, "post_id": 35759646, "comment_id": 72857181, "body": "I have experienced this problem. Did you ever find a solution? Going to experiment with using differing browsers other than the default."}, {"owner": {"reputation": 5898, "user_id": 372479, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fdf963abc303447cfdc67c1550fd6923?s=128&d=identicon&r=PG", "display_name": "lobati", "link": "https://stackoverflow.com/users/372479/lobati"}, "edited": false, "score": 0, "creation_date": 1588780786, "post_id": 35759646, "comment_id": 109032829, "body": "This may be no longer an issue. I know <code>chromedriver</code> wasn&#39;t particularly robust when it first came out."}], "answers": [{"comments": [{"owner": {"reputation": 2131, "user_id": 577894, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cbcc29e442c7d9f65a7798c4831f09c6?s=128&d=identicon&r=PG", "display_name": "Abe Petrillo", "link": "https://stackoverflow.com/users/577894/abe-petrillo"}, "edited": false, "score": 0, "creation_date": 1489853895, "post_id": 36651503, "comment_id": 72857397, "body": "In case you are unaware the whole point of capybara is to write acceptance tests which includes client side behavior. That&#39;s why html validations being enforced would be expected in this case."}], "tags": [], "owner": {"reputation": 15, "user_id": 6176271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0901ab579fe22e235ca26d17f7099e63?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/6176271/mel"}, "is_accepted": false, "score": -2, "last_activity_date": 1460735052, "creation_date": 1460735052, "answer_id": 36651503, "question_id": 35759646, "link": "https://stackoverflow.com/questions/35759646/rspec-capybaras-headless-browser-doesnt-get-stopped-by-html5-form-required-val/36651503#36651503", "title": "RSpec/Capybara&#39;s headless browser doesn&#39;t get stopped by html5 form required validations", "body": "<p>As I understand it, the expression you used yourself \"html validations\" answers your own question.  These validations are different from validations specified in a testing framework.\n<a href=\"https://github.com/ruby-grape/grape\" rel=\"nofollow\">https://github.com/ruby-grape/grape</a>  looks like another way of doing things, but Testing frameworks are not web browsers, and that's where I see the confusion arising.</p>\n"}], "owner": {"reputation": 923, "user_id": 5743740, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01bc7905723108372964cd2f6261604c?s=128&d=identicon&r=PG&f=1", "display_name": "ugotchi", "link": "https://stackoverflow.com/users/5743740/ugotchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1460735052, "creation_date": 1456958403, "last_edit_date": 1457088536, "question_id": 35759646, "link": "https://stackoverflow.com/questions/35759646/rspec-capybaras-headless-browser-doesnt-get-stopped-by-html5-form-required-val", "title": "RSpec/Capybara&#39;s headless browser doesn&#39;t get stopped by html5 form required validations", "body": "<p>Technology stack - Ruby, Sinatra (RSpec, Capybara for TDD)</p>\n\n<p>Whilst putting html5 validations for form inputs, I set them all as required. In Chrome browser, it would give you a popup notification saying you need to fill in the box, and thus prevent you from submitting the form.</p>\n\n<p>However, in our command line tests, RSpec/Capybara would ignore these html validations and continue on, thus failing our tests.</p>\n\n<p>Is there a recommended way to deal with this? Has anyone else experienced this particular problem?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 1, "creation_date": 1456957156, "post_id": 35759272, "comment_id": 59191937, "body": "That sounds like a shell issue."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1456957169, "post_id": 35759272, "comment_id": 59191946, "body": "<code>%</code> is printend by some terminals to denote a missing newline."}], "answers": [{"tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": true, "score": 0, "last_activity_date": 1456960224, "creation_date": 1456960224, "answer_id": 35760062, "question_id": 35759272, "link": "https://stackoverflow.com/questions/35759272/why-ruby-string-each-char-method-prints-an-extra-at-the-end/35760062#35760062", "title": "why Ruby String each_char method prints an extra % at the end", "body": "<p>the program is doing what is expected.<br>\nthe % is actually the shell prompt.\nguessing you do something like:</p>\n\n<pre><code>%my-script.rb\nhello world%\n</code></pre>\n\n<p>because you don't have a new line, when the output finishes the script just takes control back and shows the prompt</p>\n"}], "owner": {"reputation": 7, "user_id": 3401302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/217a7f9ee257cfec7a3e9902407a0854?s=128&d=identicon&r=PG&f=1", "display_name": "qifan", "link": "https://stackoverflow.com/users/3401302/qifan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 35760062, "answer_count": 1, "score": 0, "last_activity_date": 1456960224, "creation_date": 1456957003, "question_id": 35759272, "link": "https://stackoverflow.com/questions/35759272/why-ruby-string-each-char-method-prints-an-extra-at-the-end", "title": "why Ruby String each_char method prints an extra % at the end", "body": "<p>I'm a Ruby newbie, I tried to print each char in a Ruby string, using</p>\n\n<pre><code>\"hello world\".each_char {|c| print c}\n</code></pre>\n\n<p>However, when I ran the .rb program, it printed out hello world%, with a % character at the end. Then I switched to irb, it worked fined without the extra % character. Can anyone tell me how this happened? Why there was a %? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1456957457, "post_id": 35759123, "comment_id": 59192097, "body": "What you want to do doesn&#39;t make sense. Why do you want to get the &quot;name&quot; of a constant name? What is the use case for this?"}, {"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "reply_to_user": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1456959742, "post_id": 35759123, "comment_id": 59193137, "body": "The constant name is also a value for a service I&#39;m implementing. It saves me from having to do <code>BAR = { name: &#39;BAR&#39;, other_field: other_value }</code>. If I can just use inflection to stringify the const name, I&#39;m keeping DRY."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1456966201, "post_id": 35759123, "comment_id": 59195344, "body": "Your question is unclear: in your title, you say that you want the name of a module, in the first paragraph, you say you want the name of a module or class, but in your code sample, you actually have a hash (which obviously doesn&#39;t have a name)."}], "answers": [{"comments": [{"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1456957545, "post_id": 35759258, "comment_id": 59192145, "body": "This won&#39;t work as it would call <code>.to_s</code> on the const value and not the const name itself."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1456958360, "post_id": 35759258, "comment_id": 59192522, "body": "I don&#39;t understand your comment. Don&#39;t you want a method that takes a nested class (e.g., <code>FOO::BAR</code>) as an argument and returns the innermost class as a string (here &quot;BAR&quot;)? This does that."}, {"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1456958552, "post_id": 35759258, "comment_id": 59192617, "body": "I want to pass a reference to a class const <code>FOO::BAR</code> to a method which will convert and return the const name <code>BAR</code> to a string <code>&quot;BAR&quot;</code>. Your method returns the value of <code>FOO::BAR</code> and calls <code>.to_s</code> on the const value, not the const name itself."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1456959725, "post_id": 35759258, "comment_id": 59193129, "body": "I still don&#39;t understand your point, but I&#39;ve added a bit that may clarify. This might also help: <code>VAL = 6; VAL.to_s #=&gt; &quot;6&quot;</code>, whereas <code>FOO.to_s #=&gt; &quot;FOO&quot;</code>. Both <code>VAL</code> and <code>FOO</code> are constants, but <code>FOO</code> is also a class name."}, {"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1456960301, "post_id": 35759258, "comment_id": 59193333, "body": "The problem is that <code>BAR</code> is not a class, it is a constant on <code>class Foo</code>. See how that changes your answer."}, {"owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "edited": false, "score": 0, "creation_date": 1456962872, "post_id": 35759258, "comment_id": 59194338, "body": "I really do appreciate the effort and I&#39;m sorry that you don&#39;t understand. Stefan gets it and I will accept that answer."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1457083766, "last_edit_date": 1457083766, "creation_date": 1456956952, "answer_id": 35759258, "question_id": 35759123, "link": "https://stackoverflow.com/questions/35759123/ruby-convert-constant-to-string/35759258#35759258", "title": "Ruby: Convert Constant to String", "body": "<pre><code>class FOO\n  class BAR           \n  end\nend\n\nFOO::BAR.to_s.split('::').last\n  #=&gt; \"BAR\"\n</code></pre>\n\n<p>Note that the method <a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-i-to_s\" rel=\"nofollow\">Module#to_s</a> \"Returns a string representing this module or class. For basic classes and modules, this is the name\". <a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-i-name\" rel=\"nofollow\">Module#name</a> could be used in place of <code>to_s</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1530513860, "last_edit_date": 1530513860, "creation_date": 1456959714, "answer_id": 35759944, "question_id": 35759123, "link": "https://stackoverflow.com/questions/35759123/ruby-convert-constant-to-string/35759944#35759944", "title": "Ruby: Convert Constant to String", "body": "<p>You can't pass constants, you can only pass objects. If you pass <code>FOO::BAR</code> to a method, you're not passing the constant, but the object that has been assigned to <code>FOO::BAR</code>, i.e. the hash.</p>\n\n<p>In order to retrieve the constant's name an object has been assigned-to from the object itself, the object has to store the name somehow.</p>\n\n<p>Modules do store the constant name they have been assigned-to (Ruby sets the name when a module is assigned to a constant for the first time). And because <code>FOO</code> is a module (classes are modules), you can call <code>FOO.name</code> and it returns <code>\"FOO\"</code>. But that only works because the object \"knows\" its name.</p>\n\n<p>From the built-in objects, only <code>Module</code> (and therefore <code>Class</code>) has a <a href=\"http://ruby-doc.org/core-2.3.0/Module.html#method-i-name\" rel=\"nofollow noreferrer\"><code>name</code></a> method that works this way.</p>\n\n<p>You <em>could</em> add a <code>name</code> method to the hash instance <code>FOO::BAR</code> is referring to, although this is probably not what you want:</p>\n\n<pre><code>def (FOO::BAR).name\n  'FOO::BAR'\nend\n\nFOO::BAR.name #=&gt; \"FOO::BAR\"\n</code></pre>\n\n<p>Another way is to pass both, the constant (the object actually) and its module to a method:</p>\n\n<pre><code>def find_const(mod, obj)\n  mod.constants.find { |c| mod.const_get(c).equal?(obj) }\nend\n\nfind_const(FOO, FOO::BAR) #=&gt; :BAR\n</code></pre>\n\n<p>The method traverses the module's constants and returns the (first) constant that refers to the passed object.</p>\n"}], "owner": {"reputation": 12925, "user_id": 361833, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/CqdAB.jpg?s=128&g=1", "display_name": "doremi", "link": "https://stackoverflow.com/users/361833/doremi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1525, "favorite_count": 0, "accepted_answer_id": 35759944, "answer_count": 2, "score": 3, "last_activity_date": 1530513860, "creation_date": 1456956485, "last_edit_date": 1456993881, "question_id": 35759123, "link": "https://stackoverflow.com/questions/35759123/ruby-convert-constant-to-string", "title": "Ruby: Convert Constant to String", "body": "<p>I'd like to convert the constant <code>FOO::BAR</code> to the string <code>\"BAR\"</code>.</p>\n\n<p>This is the opposite of what <a href=\"http://api.rubyonrails.org/classes/String.html#method-i-constantize\" rel=\"nofollow\"><code>constantize</code></a> does and is very similar to <a href=\"http://api.rubyonrails.org/classes/String.html#method-i-demodulize\" rel=\"nofollow\"><code>demodulize</code></a>, except I expect a string instead of the actual Module reference.</p>\n\n<p>I was thinking I could make my own helper to do this, but I'm not able to get the \"stringified\" version of <code>FOO::BAR</code>.</p>\n\n<p>Ideally, I'd like to avoid any 3rd party gems.</p>\n\n<p>Example:</p>\n\n<pre><code>class FOO\n  BAR = {}\nend\n\n# this works\nFOO            #=&gt; FOO\nFOO.name       #=&gt; \"FOO\"    \n\n# this doesn't\nFOO::BAR       #=&gt; {} \nFOO::BAR.name  #=&gt; NoMethodError: undefined method `name' for {}:Hash\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456956164, "post_id": 35758635, "comment_id": 59191435, "body": "Why the rush to select an answer? Doing so may discourage other answers and imo is inconsiderate to those still working on answers (not me). Many here wait at least a couple of hours before making a selection."}, {"owner": {"reputation": 653, "user_id": 3066507, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e37c92881ade3eb68391b56514a4cdab?s=128&d=identicon&r=PG&f=1", "display_name": "sivanes", "link": "https://stackoverflow.com/users/3066507/sivanes"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456957175, "post_id": 35758635, "comment_id": 59191953, "body": "sorry, will wait longer in the future"}], "answers": [{"tags": [], "owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "is_accepted": true, "score": 1, "last_activity_date": 1456955402, "creation_date": 1456955402, "answer_id": 35758791, "question_id": 35758635, "link": "https://stackoverflow.com/questions/35758635/calculations-based-on-matching-keys-values-in-ruby-hashes/35758791#35758791", "title": "calculations based on matching keys&#39; values in Ruby hashes", "body": "<p>All your inputs are integers, so ruby uses integer division. It looks like that's likely to produce <code>1</code>, and <code>1 - 1</code> is zero. Add some <code>to_f</code> to your equation to use float division instead, e.g.:</p>\n\n<pre><code>match += (1 - ((user[k] - artist1[k]).to_f/(user[k] + artist1[k])).abs)\n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 3066507, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e37c92881ade3eb68391b56514a4cdab?s=128&d=identicon&r=PG&f=1", "display_name": "sivanes", "link": "https://stackoverflow.com/users/3066507/sivanes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 35758791, "answer_count": 1, "score": 0, "last_activity_date": 1456955402, "creation_date": 1456954788, "question_id": 35758635, "link": "https://stackoverflow.com/questions/35758635/calculations-based-on-matching-keys-values-in-ruby-hashes", "title": "calculations based on matching keys&#39; values in Ruby hashes", "body": "<p>I'm making artist recommendation program that will match a hash showing artists that a user has seen live and how many times, against a hash showing artists that a given artist has shared a bill with and how many times. The match score is calculated based on these numbers. If a user has seen some artist x amount of times and a given artist has played with this artist at least once, like this:</p>\n\n<pre><code>user = {\"artist7\" =&gt; 3, \"artist8\" =&gt; 1}\nartist1 = {\"artist6\" =&gt; 7, \"artist7\" =&gt; 7}\n\nmatch = 0 \n\nuser.each do |k, v|\n  if artist1[k]\n    match += (1 - ((user[k] - artist1[k])/(user[k] + artist1[k])).abs)\n  end\nend\n</code></pre>\n\n<p>I have tried this out in irb and the value of <code>match</code> does not change. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 2, "creation_date": 1456953877, "post_id": 35758347, "comment_id": 59190129, "body": "Check if <code>publish</code> column is added to your DB table? You can check the same by looking at the <code>schema.rb</code> file."}, {"owner": {"reputation": 177, "user_id": 3016184, "user_type": "registered", "profile_image": "https://graph.facebook.com/1029927251/picture?type=large", "display_name": "SirUncleCid", "link": "https://stackoverflow.com/users/3016184/sirunclecid"}, "edited": false, "score": 0, "creation_date": 1456955766, "post_id": 35758347, "comment_id": 59191195, "body": "What does the migration for Post look like?  Or specifically, what does the migration that gives Post the &quot;publish&quot; attribute look like?"}, {"owner": {"reputation": 1, "user_id": 6005001, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a38d1c8b89661ea0ee11bb978a1dd6d4?s=128&d=identicon&r=PG&f=1", "display_name": "Lauren W", "link": "https://stackoverflow.com/users/6005001/lauren-w"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1456957724, "post_id": 35758347, "comment_id": 59192225, "body": "@ArupRakshit thank you, i checked my schema file and found a mistype. I had typed &quot;pubblish&quot; instead of &quot;publish&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 5654, "user_id": 1026898, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/de8006bc117d96525c475036dcfb7fbf?s=128&d=identicon&r=PG", "display_name": "Ecnalyr", "link": "https://stackoverflow.com/users/1026898/ecnalyr"}, "is_accepted": false, "score": 0, "last_activity_date": 1456954266, "last_edit_date": 1495542252, "creation_date": 1456954266, "answer_id": 35758481, "question_id": 35758347, "link": "https://stackoverflow.com/questions/35758347/rails-unknownattributeerror-when-raking/35758481#35758481", "title": "Rails UnknownAttributeError when raking", "body": "<blockquote>\n  <p>Then, within terminal i tried to \"rake db:reset\" . . .</p>\n</blockquote>\n\n<p>Try running:</p>\n\n<pre><code>rake db:migrate\nrake db:reset\n</code></pre>\n\n<p>Your <code>Post</code> object doesn't have a <code>publish</code> attribute according to your database (for whatever reason).</p>\n\n<p>When you run <code>rake db:reset</code> new migrations do not get, 'migrated.'  Instead it loads the schema (that will not include migrations that were not migrated).</p>\n\n<hr>\n\n<p>More info: <a href=\"https://stackoverflow.com/a/10302357/1026898\">https://stackoverflow.com/a/10302357/1026898</a></p>\n"}], "owner": {"reputation": 1, "user_id": 6005001, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a38d1c8b89661ea0ee11bb978a1dd6d4?s=128&d=identicon&r=PG&f=1", "display_name": "Lauren W", "link": "https://stackoverflow.com/users/6005001/lauren-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456954266, "creation_date": 1456953790, "question_id": 35758347, "link": "https://stackoverflow.com/questions/35758347/rails-unknownattributeerror-when-raking", "title": "Rails UnknownAttributeError when raking", "body": "<p>Within seeds, I have created the following;</p>\n\n<pre><code>post = Post.create(\n     title: Faker::Lorem.sentence(20),\n     content: Faker::Lorem.paragraph,\n     publish: true,\n     administrator: administrator)\n\ntag = Tag.create(name: Faker::Lorem.words)\n\npost_tag = PostTag.create(post: post, tag: tag)\n</code></pre>\n\n<p>Then, within terminal i tried to \"rake db:reset\" and it is not working and showing the following error;</p>\n\n<pre><code>-- initialize_schema_migrations_table()\n   -&gt; 0.0049s\n rake aborted!\n ActiveRecord::UnknownAttributeError: unknown attribute 'publish' for Post.\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-    4.2.5.1/lib/active_record/attribute_assignment.rb:59:in `rescue in  _assign_attribute'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord- 4.2.5.1/lib/active_record/attribute_assignment.rb:54:in `_assign_attribute'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:41:in `block in assign_attributes'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:35:in `each'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:35:in `assign_attributes'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/core.rb:566:in `init_attributes'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/core.rb:281:in `initialize'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/inheritance.rb:61:in `new'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/inheritance.rb:61:in `new'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/persistence.rb:33:in `create'\n/Users/laurenwoodhams/Desktop/PROJECT/RAILS-BLOG/-t/db/seeds.rb:13:in `&lt;top  (required)&gt;'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:268:in `load'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:268:in `block in load'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:240:in `load_dependency'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:268:in `load'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/railties-4.2.5.1/lib/rails/engine.rb:547:in `load_seed'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/tasks/database_tasks.rb:250:in `load_seed'\n /Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/railties/databases.rake:183:in `block (2 levels) in &lt;top (required)&gt;'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/railties/databases.rake:142:in `block (2 levels) in &lt;top (required)&gt;'\n NoMethodError: undefined method `publish=' for #&lt;Post:0x007f98d0073d00&gt;\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activemodel-4.2.5.1/lib/active_model/attribute_methods.rb:433:in `method_missing'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:54:in `public_send'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:54:in `_assign_attribute'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:41:in `block in assign_attributes'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:35:in `each'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/attribute_assignment.rb:35:in `assign_attributes'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/core.rb:566:in `init_attributes'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/core.rb:281:in `initialize'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/inheritance.rb:61:in `new'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/inheritance.rb:61:in `new'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/persistence.rb:33:in `create'\n/Users/laurenwoodhams/Desktop/PROJECT/RAILS-BLOG/-t/db/seeds.rb:13:in `&lt;top (required)&gt;'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:268:in `load'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:268:in `block in load'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:240:in `load_dependency'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:268:in `load'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/railties-4.2.5.1/lib/rails/engine.rb:547:in `load_seed'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/tasks/database_tasks.rb:250:in `load_seed'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/railties/databases.rake:183:in `block (2 levels) in &lt;top (required)&gt;'\n/Users/laurenwoodhams/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.5.1/lib/active_record/railties/databases.rake:142:in `block (2 levels) in &lt;top   (required)&gt;'\nTasks: TOP =&gt; db:setup =&gt; db:seed\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>Could you please advise why it may be pushing this error?</p>\n\n<p>Thank you </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "syntax"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 2, "creation_date": 1456953346, "post_id": 35758113, "comment_id": 59189810, "body": "In addition to @Jacob&#39;s point about the malformed matching operator, there&#39;s no auto-increment in ruby: <code>return_value++</code>."}], "answers": [{"tags": [], "owner": {"reputation": 977, "user_id": 4603039, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-2-hWqltglJY/AAAAAAAAAAI/AAAAAAAAA28/BWGljEnrSMc/photo.jpg?sz=128", "display_name": "Jacob Murphy", "link": "https://stackoverflow.com/users/4603039/jacob-murphy"}, "is_accepted": false, "score": 1, "last_activity_date": 1456953249, "creation_date": 1456953249, "answer_id": 35758189, "question_id": 35758113, "link": "https://stackoverflow.com/questions/35758113/error-syntax-unexpected-in-ruby/35758189#35758189", "title": "Error &quot;syntax unexpected &#39;=&#39;&quot; In Ruby", "body": "<p>Your regex check looks off. Try <code>=~</code> instead of <code>~=</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 6009366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b06a09de222093fb2dd4179b4b4918?s=128&d=identicon&r=PG&f=1", "display_name": "murer", "link": "https://stackoverflow.com/users/6009366/murer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1457387053, "answer_count": 1, "score": -3, "last_activity_date": 1456955523, "creation_date": 1456953028, "last_edit_date": 1456955523, "question_id": 35758113, "link": "https://stackoverflow.com/questions/35758113/error-syntax-unexpected-in-ruby", "closed_reason": "Not suitable for this site", "title": "Error &quot;syntax unexpected &#39;=&#39;&quot; In Ruby", "body": "<p>I have the following <code>code</code>:</p>\n\n<pre><code>def medi_interaction regex1, regex2, min_abstand\n  return_value=0\n  self.medications.each do |m1|\n    if m1.medi.atc ~= regex1\n      self.medications.each do |m2|\n  \u2003\u2003\u2003  \u2003if m2.medi.atc ~= regex2 &amp;&amp; m2.date-m1.date &lt; min_abstand\n\u2003\u2003 \u2003\u2003\u2003    return_value++\n\u2003\u2003\u2003     end\n\u2003\u2003    end\n\u2003   end\n  end\n  return return_value\nend\n</code></pre>\n\n<p>For some reason, I'm getting an error that I can't fix. Can you help me with that? </p>\n\n<p><strong>Error</strong>:</p>\n\n<pre><code>Syntax _syntax error, unexpected '='_ and _unexpected keyword_do_block, expecting keyword_end_\n</code></pre>\n"}, {"tags": ["ruby", "rake"], "answers": [{"tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": true, "score": 1, "last_activity_date": 1456958692, "creation_date": 1456958692, "answer_id": 35759712, "question_id": 35758089, "link": "https://stackoverflow.com/questions/35758089/rake-save-log-from-each-task-to-separate-file/35759712#35759712", "title": "Rake - save log from each task to separate file", "body": "<h2>Use String Interpolation to Create One Logfile Per Rake::Task</h2>\n\n<p>You can use a <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/rake/rdoc/Rake/Task.html#method-i-name\" rel=\"nofollow\">Rake::Task#name</a> to get the name of the current task to interpolate into the name of your logfile. You can also use the task name as the <em>progname</em> for your log entry.</p>\n\n<p>A Rakefile can also contain arbitrary Ruby code in addition to standard Rake methods. You can use this to create a custom logging method that allows you to create a log per Rake task, with your shell command's standard output captured using the <a href=\"http://ruby-doc.org/core-2.3.0/Kernel.html#method-i-60\" rel=\"nofollow\">Kernel#`</a> method and passed along to the custom logging method as the log message.</p>\n\n<h2>A Worked Example</h2>\n\n<h3>Rakefile</h3>\n\n<pre><code>require 'logger'\n\ndef log task, msg\n  l = Logger.new \"#{task}.log\"\n  l.progname = task\n  l.info msg\nend\n\ntask :foo do |task|\n  msg = `echo Hello, world.`\n  log task.name, msg\nend\n\ntask :bar do |task|\n  msg = `echo Goodbye, cruel world.`\n  log task.name, msg\nend\n\ntask :default =&gt; [:foo, :bar]\n</code></pre>\n\n<h3>Sample Output</h3>\n\n<pre><code>$ rake; tail +1 *log\n==&gt; bar.log &lt;==\n# Logfile created on 2016-03-02 17:31:49 -0500 by logger.rb/53141\nI, [2016-03-02T17:31:49.678729 #80846]  INFO -- bar: Goodbye, cruel world.\n\n\n==&gt; foo.log &lt;==\n# Logfile created on 2016-03-02 17:31:49 -0500 by logger.rb/53141\nI, [2016-03-02T17:31:49.677165 #80846]  INFO -- foo: Hello, world.\n</code></pre>\n"}], "owner": {"reputation": 1372, "user_id": 1095884, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e57f4ee10e8e1ac9e774e818f92ebfc3?s=128&d=identicon&r=PG", "display_name": "esio", "link": "https://stackoverflow.com/users/1095884/esio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "accepted_answer_id": 35759712, "answer_count": 1, "score": 0, "last_activity_date": 1456958692, "creation_date": 1456952965, "question_id": 35758089, "link": "https://stackoverflow.com/questions/35758089/rake-save-log-from-each-task-to-separate-file", "title": "Rake - save log from each task to separate file", "body": "<p>I'm using rake to build my C++ project and I have a lot of dependencies and tasks.</p>\n\n<p>I would like save log from each task to separate log file. Is it possible? I want save all stdout from task to file.</p>\n\n<p>I can't to this like:</p>\n\n<pre><code>log = Logger.new\nlog.info sh \"my command\"\n</code></pre>\n\n<p>because sometimes I lost info from process because sometimes I run some subprocess, etc. I want all STDOUT but separated for every task.</p>\n\n<p>Can I do this? I tried modify execure function from Task class in rake but without success.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1456951959, "post_id": 35757744, "comment_id": 59188974, "body": "Since <code>target_floors</code> is being passed to this method, whoever is passing it provided the <code>nil</code> value in the array. How do you want to solve it? Is it expected that some elements of the array are <code>nil</code> or not? If not, then the caller is at fault. If they are, then you just need to check for <code>nil</code> (<code>if target_floors[j].nil? ...</code>)."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1456952426, "post_id": 35757744, "comment_id": 59189275, "body": "It&#39;s more likely that <code>j</code> is greater than the last index of the array."}], "answers": [{"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": false, "score": 0, "last_activity_date": 1457041473, "creation_date": 1457041473, "answer_id": 35783661, "question_id": 35757744, "link": "https://stackoverflow.com/questions/35757744/ruby-undefined-method-for-nilnilclass-nomethoderror/35783661#35783661", "title": "Ruby undefined method `-&#39; for nil:NilClass (NoMethodError)", "body": "<p>Ranges of the form <code>first..last</code> include the endpoints, so you are iterating one beyond the end of the array.</p>\n\n<p>You could instead use <code>0...target_floors.length</code> (which includes the 0 but excludes the end) but a better and more rubyish approach would be to use <code>each</code> to iterate over the array, rather than working with indices. </p>\n"}], "owner": {"reputation": 11, "user_id": 3686056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94c545e88b0eb45c6f9e12a98080cf8?s=128&d=identicon&r=PG&f=1", "display_name": "user3686056", "link": "https://stackoverflow.com/users/3686056/user3686056"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4329, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1457041473, "creation_date": 1456951719, "question_id": 35757744, "link": "https://stackoverflow.com/questions/35757744/ruby-undefined-method-for-nilnilclass-nomethoderror", "title": "Ruby undefined method `-&#39; for nil:NilClass (NoMethodError)", "body": "<p>I am working on a project and have encounter an error which I am not familiar with. When I run my code, I received 'undefined method `-' for nil:NilClass (NoMethodError)' which after some research means that target_floors[j] is nil. Why is this happening and how to I solve it?</p>\n\n<pre><code>def retrieve_floor(n, target_floors)\n\n    smallestDifference = n\n    toReturn = 0\n\n    for i in 1..n\n        tempDiff = 0\n        for j in 0..target_floors.length\n            difference = target_floors[j] - i\n            if difference &gt; 0\n                tempDiff += difference\n            else\n                tempDiff += difference.abs\n            end\n        end\n        if tempDiff &lt; smallestDifference\n            smallestDifference = tempDiff\n            toReturn = i\n        end\n    end\n    return toReturn\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1456960999, "post_id": 35757162, "comment_id": 59193607, "body": "what are you actually doing inside the each-line... can you just test for that?"}, {"owner": {"reputation": 14578, "user_id": 2229277, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LZg07.jpg?s=128&g=1", "display_name": "newUserNameHere", "link": "https://stackoverflow.com/users/2229277/newusernamehere"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1456961398, "post_id": 35757162, "comment_id": 59193758, "body": "I could, but I would prefer to find a better solution and have a a more thorough test."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1456975828, "post_id": 35757162, "comment_id": 59198139, "body": "I think you&#39;re testing implementation details when you should be testing end results..."}], "answers": [{"comments": [{"owner": {"reputation": 14578, "user_id": 2229277, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LZg07.jpg?s=128&g=1", "display_name": "newUserNameHere", "link": "https://stackoverflow.com/users/2229277/newusernamehere"}, "edited": false, "score": 0, "creation_date": 1456962036, "post_id": 35760398, "comment_id": 59194006, "body": "Just tried it, here&#39;s what I got: <code>Failure&#47;Error: described_class.new.process_file(&quot;test&quot;) &lt;File (class)&gt; asked to yield |[#&lt;StringIO:0x007fd4d4097300&gt;]| but no block was passed</code>"}, {"owner": {"reputation": 269, "user_id": 1593905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11e6329d1bb972e6906455adbb90115?s=128&d=identicon&r=PG", "display_name": "jalkoby", "link": "https://stackoverflow.com/users/1593905/jalkoby"}, "reply_to_user": {"reputation": 14578, "user_id": 2229277, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LZg07.jpg?s=128&g=1", "display_name": "newUserNameHere", "link": "https://stackoverflow.com/users/2229277/newusernamehere"}, "edited": false, "score": 0, "creation_date": 1456962411, "post_id": 35760398, "comment_id": 59194152, "body": "change &quot;expect&quot; to &quot;allow&quot; (see the updated example). But it looks like the production code doesn&#39;t provide block on <code>File.open</code>"}, {"owner": {"reputation": 269, "user_id": 1593905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11e6329d1bb972e6906455adbb90115?s=128&d=identicon&r=PG", "display_name": "jalkoby", "link": "https://stackoverflow.com/users/1593905/jalkoby"}, "reply_to_user": {"reputation": 14578, "user_id": 2229277, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LZg07.jpg?s=128&g=1", "display_name": "newUserNameHere", "link": "https://stackoverflow.com/users/2229277/newusernamehere"}, "edited": false, "score": 0, "creation_date": 1456962504, "post_id": 35760398, "comment_id": 59194190, "body": "just tested the next code  <code>ruby   RSpec.describe &quot;an example of mock&quot; do   let(:content) { StringIO.new(&quot;1\\n2\\n3&quot;) }    specify do     allow(File).to receive(:open).and_yield(content)     File.open(&#39;foo&#39;) { |f| puts f.read }   end end </code>"}], "tags": [], "owner": {"reputation": 269, "user_id": 1593905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11e6329d1bb972e6906455adbb90115?s=128&d=identicon&r=PG", "display_name": "jalkoby", "link": "https://stackoverflow.com/users/1593905/jalkoby"}, "is_accepted": true, "score": 3, "last_activity_date": 1456962311, "last_edit_date": 1456962311, "creation_date": 1456961697, "answer_id": 35760398, "question_id": 35757162, "link": "https://stackoverflow.com/questions/35757162/how-to-mock-stub-file-open-each-line-in-ruby-rspec/35760398#35760398", "title": "How to mock/stub File.open each_line in ruby / rspec", "body": "<p>Try something like this:</p>\n\n<pre><code>RSpec.describe \"an example of mock\" do\n  let(:content) { StringIO.new(\"1\\n2\\n3\") }\n\n  specify do\n    allow(File).to receive(:open).and_yield(content)\n    # do whatever you want\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 14578, "user_id": 2229277, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LZg07.jpg?s=128&g=1", "display_name": "newUserNameHere", "link": "https://stackoverflow.com/users/2229277/newusernamehere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1647, "favorite_count": 0, "accepted_answer_id": 35760398, "answer_count": 1, "score": 1, "last_activity_date": 1457007362, "creation_date": 1456949490, "last_edit_date": 1457007362, "question_id": 35757162, "link": "https://stackoverflow.com/questions/35757162/how-to-mock-stub-file-open-each-line-in-ruby-rspec", "title": "How to mock/stub File.open each_line in ruby / rspec", "body": "<p>How to mock / stub this so that I can test what's going on within the each_line ?</p>\n\n<pre><code>File.open(file_path) do |file|\n  file.each_line do |line|\n    #do something here\n  end \nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1456955933, "post_id": 35757038, "comment_id": 59191301, "body": "Are you asking for an <code>Array</code> method <code>same_keys</code>? Also, please explain (by editing) what you mean by &quot;repetitive keys&quot; and show the desired result for your example, explaining why some hashes were included and others were not."}], "answers": [{"tags": [], "owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "is_accepted": false, "score": 0, "last_activity_date": 1456951074, "last_edit_date": 1456951074, "creation_date": 1456949797, "answer_id": 35757229, "question_id": 35757038, "link": "https://stackoverflow.com/questions/35757038/hashes-with-repetitive-keys-only/35757229#35757229", "title": "Hashes with repetitive keys only", "body": "<p>I'm not quite sure what you want, but assuming you want an array where each input hash maps to a hash containing only the keys that are present in <em>every</em> hash in the input, the below should work:</p>\n\n<p>I've tested this in Ruby 1.9.3, but it should work in more recent versions too:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'set'\n\nhashes = [\n  {:auchan=&gt;2.3, :biedronka=&gt;2.6, :lidl=&gt;2.4},\n  {:auchan=&gt;2.5, :biedronka=&gt;3, :lidl=&gt;2.4, :zabka=&gt;3.5},\n  {:auchan=&gt;1.5, :lidl=&gt;1.1, :zabka=&gt;2},\n  {:auchan=&gt;1.1, :lidl=&gt;0.8, :zabka=&gt;1.5, :biedronka=&gt;1.6}\n]\n\nkeys = nil\nhashes.each do |h|\n  if keys.nil?\n    keys = Set.new(h.keys)\n  else\n    keys = keys &amp; h.keys\n  end\nend\nputs keys.to_a\n\nresult = hashes.map do |h|\n  h.select{|k,v| keys.include?(k)}\nend\n\nputs result\n</code></pre>\n\n<p>Also if you are trying to save bytes, you can set <code>keys</code> with this oneliner instead:</p>\n\n<pre><code>keys = hashes.map(&amp;:keys).reduce{|t, h| t &amp; h}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1456951050, "creation_date": 1456951050, "answer_id": 35757577, "question_id": 35757038, "link": "https://stackoverflow.com/questions/35757038/hashes-with-repetitive-keys-only/35757577#35757577", "title": "Hashes with repetitive keys only", "body": "<p>You can firstly find keys and then map your hash:</p>\n\n<pre><code>same_keys = hashes.map(&amp;:keys).reduce(&amp;:&amp;)\n\nhashes.map { |h| h.slice(*same_keys) }\n=&gt;[{:auchan=&gt;2.3, :lidl=&gt;2.4},\n   {:auchan=&gt;2.5, :lidl=&gt;2.4},\n   {:auchan=&gt;1.5, :lidl=&gt;1.1},\n   {:auchan=&gt;1.1, :lidl=&gt;0.8}]\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 4838943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-5z3bitLGSNM/AAAAAAAAAAI/AAAAAAAAAB0/wHaWo9Dih58/photo.jpg?sz=128", "display_name": "Aleksandra Nowak", "link": "https://stackoverflow.com/users/4838943/aleksandra-nowak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456955352, "creation_date": 1456949131, "last_edit_date": 1456949863, "question_id": 35757038, "link": "https://stackoverflow.com/questions/35757038/hashes-with-repetitive-keys-only", "title": "Hashes with repetitive keys only", "body": "<pre><code>hashes = [{:auchan=&gt;2.3, :biedronka=&gt;2.6, :lidl=&gt;2.4},\n          {:auchan=&gt;2.5, :biedronka=&gt;3, :lidl=&gt;2.4, :zabka=&gt;3.5},\n          {:auchan=&gt;1.5, :lidl=&gt;1.1, :zabka=&gt;2},\n          {:auchan=&gt;1.1, :lidl=&gt;0.8, :zabka=&gt;1.5, :biedronka=&gt;1.6}]\n</code></pre>\n\n<p>I want to get hashes with only repetitive keys. </p>\n\n<p>I tried this, but it is good for only 2 hashes, not more: </p>\n\n<pre><code>hashes[0].merge hashes[1].select { |k| hashes[0].keys.include? k }\n\nhashes.same_keys =&gt; [{:auchan=&gt;2.3, :biedronka=&gt;2.6, :lidl=&gt;2.4}, \n                     {:auchan=&gt;2.5, :biedronka=&gt;3, :lidl=&gt;2.4 }, \n                     {:auchan=&gt;1.1, :lidl=&gt;0.8, :biedronka=&gt;1.6}]\n</code></pre>\n"}, {"tags": ["ruby", "unit-testing", "rspec"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1456960920, "post_id": 35756891, "comment_id": 59193577, "body": "Ok, now imagine that it&#39;s not you that changes the line of code thinking &quot;it won&#39;t matter if I call &#39;dir&#39; instead of &#39;ls&#39; (or whatever)... they get a failing test and think to themselves &quot;oh, we were expecting that I call ls in that method, I wonder why?&quot; which you will of course have made obvious in your commenting. ;)"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1456960952, "post_id": 35756891, "comment_id": 59193591, "body": "Also: yeah, the given example is clearly a toy-example that is very simple and almost not worth testing... but most of your tests won&#39;t be this simple."}, {"owner": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1457012024, "post_id": 35756891, "comment_id": 59218481, "body": "The reason I ask is because my example really is that simple. I have implemented a new SCM for Capistrano. My custom SCM class has some methods that just call some simple system commands. (The equivalent of &quot;git clone&quot; for example). I could write a test that ensures that &quot;git clone&quot; gets called, but I don&#39;t see the value in it. If someone else in the future needs to change that method, then they also need to change the test. But the test only checks that the command was called. Does that make sense?"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1457044851, "post_id": 35756891, "comment_id": 59240384, "body": "Yes, so there are pros and cons for both options: on the one hand, it seems a lot of fuss for a single line of code. On the other hand if somebody later changes your method to be more complex, no test fails - and people that are used to &quot;if a test breaks I&#39;ll change it&quot; might not realise that they actually need to add a test at all.On the gripping hand, setting a behaviour-expectation on <i>yourself</i> to always add a test (even if it seems so useless) can be a very good habit to have..."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1457044868, "post_id": 35756891, "comment_id": 59240397, "body": "because you are also working with the fact that you must remember to write tests for important code... and if you allow exceptions in your own behaviour, then you also allow the possibility for you to forget to write a test on more important code. IMO I think it&#39;s worth doing - for the latter two reasons."}], "answers": [{"tags": [], "owner": {"reputation": 26839, "user_id": 1008891, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/BbcgE.jpg?s=128&g=1", "display_name": "Peter Alfvin", "link": "https://stackoverflow.com/users/1008891/peter-alfvin"}, "is_accepted": false, "score": 0, "last_activity_date": 1457072428, "creation_date": 1457072428, "answer_id": 35789289, "question_id": 35756891, "link": "https://stackoverflow.com/questions/35756891/how-would-i-test-a-ruby-method-that-only-calls-a-system-command/35789289#35789289", "title": "How would I test a ruby method that only calls a system command?", "body": "<p>The approach you are describing is known as the \"mockist\" or \"London\" school of unit testing. It's benefits include</p>\n\n<ul>\n<li>That the act of constructing such a test creates an incentive to design units which are not excessively complex in terms of their dependencies or conditional logic</li>\n<li>That such tests execute very quickly, which can be very important for large systems</li>\n<li>That such tests can be reasonably built to provide maximal coverage for the unit under test</li>\n<li>That such tests provide a \"vise\" of sorts around your code such that inadvertent changes will result in a failing test</li>\n</ul>\n\n<p>Of course, such tests have their limitations, which is why they are often paired with system level tests which test whether a collection of units operating together achieve some higher order outcome.</p>\n"}], "owner": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457072428, "creation_date": 1456948640, "last_edit_date": 1495539903, "question_id": 35756891, "link": "https://stackoverflow.com/questions/35756891/how-would-i-test-a-ruby-method-that-only-calls-a-system-command", "title": "How would I test a ruby method that only calls a system command?", "body": "<p>After looking at:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1708661/how-do-i-stub-mock-a-call-to-the-command-line-with-rspec\">How do I stub/mock a call to the command line with rspec?</a></p>\n\n<p>The answer provided is:</p>\n\n<pre><code>require \"rubygems\"\nrequire \"spec\"\n\nclass Dummy\n  def command_line\n    system(\"ls\")\n  end\nend\n\ndescribe Dummy do\n  it  \"command_line should call ls\" do\n    d = Dummy.new\n    d.should_receive(\"system\").with(\"ls\")\n    d.command_line\n  end\nend\n</code></pre>\n\n<p>My question is: <strong>How does that actually test anything?</strong></p>\n\n<p>By making a method to that says \"call the ls command on the system\", and then writing a test that says \"my method should call the ls command on the system\", <strong>how does that provide any benefit</strong>?</p>\n\n<p>If the method were to change, I would have to change the test as well, but I'm not sure I see the added benefit.</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber", "page-object-gem"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1456949325, "post_id": 35756764, "comment_id": 59187448, "body": "What did you want to wait for when you do <code>search_types_elements.when_visible(timeout=10)</code>? Are you wanting to just wait for at least one element to exist, one with the text &quot;Resort&quot; to exist, something else?"}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457536139, "post_id": 35756764, "comment_id": 59451189, "body": "I upgraded your question"}], "answers": [{"comments": [{"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457471560, "post_id": 35877808, "comment_id": 59419563, "body": "I didn&#39;t downgrade your question.  Stuff happens."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1457531994, "post_id": 35877808, "comment_id": 59447996, "body": "The <code>links</code> method is valid. It is dynamically defined in <a href=\"https://github.com/cheezy/page-object/blob/master/lib/page-object/accessors.rb#L1438-L1465\" rel=\"nofollow noreferrer\"><code>accessors.rb</code></a>."}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1457536064, "post_id": 35877808, "comment_id": 59451123, "body": "Yes you are right (I learn something everyday).  It ultimately generates search_types_elements = @browser.find_elements() so you will need to follow it with something like search_types_elements.each do |element| #some action on element end"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1457539155, "post_id": 35877808, "comment_id": 59453658, "body": "I think the problem is how do you wait for a collection of elements to become visible? But like I commented on the question, does that mean waiting for 1 or n elements to appear?"}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1457539767, "post_id": 35877808, "comment_id": 59454138, "body": "Justin, Yes.  Visible is an element property, not a collection of elements property. It would depend on how those elements are loaded.  In the page object class you could wait for the jquery queue to be empty.  It would take an intimate knowledge of the page to really know."}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1457541120, "post_id": 35877808, "comment_id": 59455059, "body": "If you know in advance that there should be five elements then perhaps you could do something like this: wait = Selenium::WebDriver::Wait.new(:timeout ==&gt; 15) wait.until( search_types_elements.count == 5 )"}], "tags": [], "owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "is_accepted": true, "score": 0, "last_activity_date": 1457644235, "last_edit_date": 1457644235, "creation_date": 1457470441, "answer_id": 35877808, "question_id": 35756764, "link": "https://stackoverflow.com/questions/35756764/getting-undefined-method-when-visible-for-array0x3db6090-nomethoderror-i/35877808#35877808", "title": "Getting undefined method `when_visible&#39; for #&lt;Array:0x3db6090&gt; (NoMethodError) in PageObject", "body": "<p><strong>Updated to reflect discussion.</strong></p>\n\n<p>page-object gem handles the plural of its basic accessors. Page-object ultimately generates </p>\n\n<pre><code>search_types_elements = @browser.find_elements(:css, \".search-type\") \n</code></pre>\n\n<p>so you will need to follow it with something like (<strong>Updated</strong>)</p>\n\n<pre><code>search_types_elements.find { |type| \n  type.when_visible(timeout=10)\n  if type.text=='Resort'; type.click; break end\n}\n</code></pre>\n\n<p>You should add something to the page class constructor to wait for the page to completely load.  Unfortunately, there isn't a simple way to do this.  Much depends on the page specifics.  I usually start by waiting for the jquery queue to have zero length.  Something like this:</p>\n\n<pre><code>WebDriverWait(self.selenium, 10).until(lambda s:  s.execute_script(\"return jQuery.active == 0\"))\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 2904730, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/28c2232f1f92cdce05e3d234e479dcc7?s=128&d=identicon&r=PG&f=1", "display_name": "chen layton", "link": "https://stackoverflow.com/users/2904730/chen-layton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 35877808, "answer_count": 1, "score": 0, "last_activity_date": 1457644235, "creation_date": 1456948206, "question_id": 35756764, "link": "https://stackoverflow.com/questions/35756764/getting-undefined-method-when-visible-for-array0x3db6090-nomethoderror-i", "title": "Getting undefined method `when_visible&#39; for #&lt;Array:0x3db6090&gt; (NoMethodError) in PageObject", "body": "<p>I\u2019m getting Getting undefined method `when_visible' for # (NoMethodError) when I used built \u2013in method from PageObject Ruby gem. Here is my code:</p>\n\n<pre><code>class HomePage\n  include PageObject\n\n  links(:search_types, :css =&gt; \".search-type\")\n\n  def select_search_type\n    search_types_elements.when_visible(timeout=10)\n    search_types_elements.find { |type| if type.text=='Resort'; type.click; break end }\n  end\nend\n</code></pre>\n\n<p>Could someone please help? Thanks a lot!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "split"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1456948514, "post_id": 35756318, "comment_id": 59186967, "body": "This question would be improved by providing a small example and showing the desired return value. Perhaps pull your example from your answer, and edit your answer to refer to the example in the question."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 3, "creation_date": 1456950692, "post_id": 35756318, "comment_id": 59188270, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Provide us with an example or a much better description."}], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1456947310, "post_id": 35756319, "comment_id": 59186236, "body": "You can use <code>-1</code> index instead <code>hash.length</code>: <code>model_2.attributes = hash.to_a[4..-1].to_h</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456949485, "post_id": 35756319, "comment_id": 59187554, "body": "I believe you want <code>[4..hash_length-1]</code> or <code>[4...hash_length]</code>(three dots in the latter case). You could also write <code>[4,hash_length-4]</code>, but <code>[4,-1]</code> is certainly best."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1456957167, "post_id": 35756319, "comment_id": 59191945, "body": "<code>[4..-1]</code> is concise.  Like!"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1456958067, "last_edit_date": 1456958067, "creation_date": 1456946719, "answer_id": 35756319, "question_id": 35756318, "link": "https://stackoverflow.com/questions/35756318/how-to-split-a-hash-in-ruby-by-index-use-case-copying-attributes-between-rails/35756319#35756319", "title": "How to split a hash in ruby by index ? Use case copying attributes between Rails models", "body": "<p>Convert hash to array, select indexes, convert back to hash.  In this example I'd like to copy all the attributes from model_1 to model_2 starting at index 4. Obviously model_1 and model_2 need to be the same model </p>\n\n<pre><code>hash = model_1.attributes\n\nmodel_2.attributes = hash.to_a[4..-1].to_h\n</code></pre>\n\n<p>Of course we could also do just</p>\n\n<pre><code>model_1.attributes = model_2.attributes.to_a[4..-1].to_h\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1456947157, "post_id": 35756433, "comment_id": 59186152, "body": "or <code>slice</code> to specify all attributes you want using"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456948825, "post_id": 35756433, "comment_id": 59187144, "body": "Consider changing that to <code>model_2.attributes.except(*model_2.attributes.keys.first(n))</code>&zwnj;&#8203;."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1456956917, "post_id": 35756433, "comment_id": 59191796, "body": "I was aware of except method, but was avoiding to have to type names of attributes because I&#39;m lazy and don&#39;t care about their names in this case ;)"}], "tags": [], "owner": {"reputation": 66009, "user_id": 23368, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ace1b52352e1260c6a42df36e36f356?s=128&d=identicon&r=PG", "display_name": "Daniel Rikowski", "link": "https://stackoverflow.com/users/23368/daniel-rikowski"}, "is_accepted": false, "score": 2, "last_activity_date": 1456947097, "creation_date": 1456947097, "answer_id": 35756433, "question_id": 35756318, "link": "https://stackoverflow.com/questions/35756318/how-to-split-a-hash-in-ruby-by-index-use-case-copying-attributes-between-rails/35756433#35756433", "title": "How to split a hash in ruby by index ? Use case copying attributes between Rails models", "body": "<p>You can specify all attributes <em>you don't want</em> using the <a href=\"http://api.rubyonrails.org/classes/Hash.html#method-i-except\" rel=\"nofollow\"><code>except</code></a> method:</p>\n\n<pre><code>model_2.attributes.except(:id, :other_attribute, :and_another)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1456949090, "post_id": 35756633, "comment_id": 59187302, "body": "Readers are reminded that this is <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-select\" rel=\"nofollow noreferrer\">Hash#select</a>, not <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-select\" rel=\"nofollow noreferrer\">Enumerable#select</a>."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1456957460, "post_id": 35756633, "comment_id": 59192100, "body": "I think you meant model_2.attributes in left side of assignment but yes this works well too."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1456985169, "last_edit_date": 1456985169, "creation_date": 1456947777, "answer_id": 35756633, "question_id": 35756318, "link": "https://stackoverflow.com/questions/35756318/how-to-split-a-hash-in-ruby-by-index-use-case-copying-attributes-between-rails/35756633#35756633", "title": "How to split a hash in ruby by index ? Use case copying attributes between Rails models", "body": "<p>You can use <code>select</code> and <code>with_index</code> methods for your goal:</p>\n\n<pre><code>model_2.attributes = model_1.attributes.select.with_index { |_, i| i &gt;= 4 }\n</code></pre>\n\n<p>In this case you can specify any attributes position interval.</p>\n"}], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1456985169, "creation_date": 1456946719, "question_id": 35756318, "link": "https://stackoverflow.com/questions/35756318/how-to-split-a-hash-in-ruby-by-index-use-case-copying-attributes-between-rails", "title": "How to split a hash in ruby by index ? Use case copying attributes between Rails models", "body": "<p>Let's say I have a Rails model with a lot of attributes and I want to copy all or most of them without copying say just the ID and first few fields.  Instead of having to manually type all the field names to copy the attributes hash, what's a shortcut way to do this?</p>\n"}, {"tags": ["ruby", "windows", "installation", "rubygems"], "comments": [{"owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "edited": false, "score": 0, "creation_date": 1456948093, "post_id": 35756272, "comment_id": 59186685, "body": "Can you make a batch file with the commands in it and run that?"}, {"owner": {"reputation": 13, "user_id": 6009614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28003e2d35233e1e45846448afa2f912?s=128&d=identicon&r=PG&f=1", "display_name": "rRights", "link": "https://stackoverflow.com/users/6009614/rrights"}, "reply_to_user": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "edited": false, "score": 0, "creation_date": 1456952360, "post_id": 35756272, "comment_id": 59189224, "body": "Please excuse my ignorance, I am not exactly sure what you mean. How do I make a batch file and what commands would I insert? Thanks again for your help."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6009614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28003e2d35233e1e45846448afa2f912?s=128&d=identicon&r=PG&f=1", "display_name": "rRights", "link": "https://stackoverflow.com/users/6009614/rrights"}, "edited": false, "score": 0, "creation_date": 1456948872, "post_id": 35756814, "comment_id": 59187178, "body": "touch&#233;. Yeah, working with ruby in windows is a pain most of the time but I am forced to use the window OS at work. So what you are saying is 1) go to ruby gems 2) download gem and extract files 3) find out ruby file to use 4) reference said ruby file in my script 5) success ?"}, {"owner": {"reputation": 360, "user_id": 4005667, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f66f998818fa2f1f8d1544de1ac3cf?s=128&d=identicon&r=PG&f=1", "display_name": "gcleite", "link": "https://stackoverflow.com/users/4005667/gcleite"}, "reply_to_user": {"reputation": 13, "user_id": 6009614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28003e2d35233e1e45846448afa2f912?s=128&d=identicon&r=PG&f=1", "display_name": "rRights", "link": "https://stackoverflow.com/users/6009614/rrights"}, "edited": false, "score": 0, "creation_date": 1456949084, "post_id": 35756814, "comment_id": 59187299, "body": "have you tried the terminal emulator <a href=\"http://cmder.net/\" rel=\"nofollow noreferrer\">cmder.net</a> ? if you have access to it, it will solve your problem and make easier to work with ruby in windows."}, {"owner": {"reputation": 13, "user_id": 6009614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28003e2d35233e1e45846448afa2f912?s=128&d=identicon&r=PG&f=1", "display_name": "rRights", "link": "https://stackoverflow.com/users/6009614/rrights"}, "edited": false, "score": 0, "creation_date": 1456949717, "post_id": 35756814, "comment_id": 59187682, "body": "I didn&#39;t even know about that terminal emulator. I am downloading it now. I will report back with the details. Thanks for the suggestion!"}, {"owner": {"reputation": 13, "user_id": 6009614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28003e2d35233e1e45846448afa2f912?s=128&d=identicon&r=PG&f=1", "display_name": "rRights", "link": "https://stackoverflow.com/users/6009614/rrights"}, "edited": false, "score": 0, "creation_date": 1456950757, "post_id": 35756814, "comment_id": 59188303, "body": "Sad times, the Cmder gives me a similar message and forces me to exit. I will need to try another way."}], "tags": [], "owner": {"reputation": 360, "user_id": 4005667, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f66f998818fa2f1f8d1544de1ac3cf?s=128&d=identicon&r=PG&f=1", "display_name": "gcleite", "link": "https://stackoverflow.com/users/4005667/gcleite"}, "is_accepted": true, "score": 0, "last_activity_date": 1456948705, "last_edit_date": 1456948705, "creation_date": 1456948399, "answer_id": 35756814, "question_id": 35756272, "link": "https://stackoverflow.com/questions/35756272/how-to-install-ruby-gem-without-uing-the-command-prompt-in-windows-7/35756814#35756814", "title": "How to install Ruby Gem without uing the command prompt in Windows 7", "body": "<p>You can download the .gem file directly from <a href=\"https://rubygems.org/\" rel=\"nofollow\">https://rubygems.org/</a>, and extract its contents using Winrar or equivalent. </p>\n\n<p>Then you'll have to figure it out the correct .rb file, and import it into your script.</p>\n\n<p>Example:</p>\n\n<ol>\n<li><p>download the example.gem file</p></li>\n<li><p>extract it to the example folder</p></li>\n<li><p>put the example folder within your script</p></li>\n<li><p>in your script, load './example/example.rb'</p></li>\n</ol>\n\n<p>But, is this really a requirement? Using ruby with Windows is kinda messy itself, and this hack is going to slow you down even more.</p>\n\n<p>Regards</p>\n"}], "owner": {"reputation": 13, "user_id": 6009614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28003e2d35233e1e45846448afa2f912?s=128&d=identicon&r=PG&f=1", "display_name": "rRights", "link": "https://stackoverflow.com/users/6009614/rrights"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 35756814, "answer_count": 1, "score": 1, "last_activity_date": 1456948705, "creation_date": 1456946558, "question_id": 35756272, "link": "https://stackoverflow.com/questions/35756272/how-to-install-ruby-gem-without-uing-the-command-prompt-in-windows-7", "title": "How to install Ruby Gem without uing the command prompt in Windows 7", "body": "<p>I am at work and do not have access to the command prompt. I want to install a ruby gem or ten and the only way I know is the classic \"gem install blah\".</p>\n\n<p>If I download the desired gems on a USB drive (not sure how to do this), is it even possible to then install the gems manually by placing the files in specific areas of the ruby program?</p>\n\n<p>In case it is important, this is the message I get when trying to enter anything into the cmp promt, \"Microsoft Windows [Version 6.1.7601] Copyright (c) 2009 Microsoft Corporation. All rights reserved. The command prompt has been disabled by your administrator. Press any key to continue . . .\".</p>\n\n<p>Thanks in advance for your input!</p>\n"}, {"tags": ["ruby", "logstash", "logstash-configuration"], "comments": [{"owner": {"reputation": 15576, "user_id": 677561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/95077e3dc8c640d554cfa97da3dc6131?s=128&d=identicon&r=PG&f=1", "display_name": "Alain Collins", "link": "https://stackoverflow.com/users/677561/alain-collins"}, "edited": false, "score": 0, "creation_date": 1456946166, "post_id": 35756124, "comment_id": 59185542, "body": "Try doing the lowercase in a second filter{} block."}, {"owner": {"reputation": 5, "user_id": 5916276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b147ad65b3ae2ea9e09ee63e34f77b03?s=128&d=identicon&r=PG&f=1", "display_name": "brownbear", "link": "https://stackoverflow.com/users/5916276/brownbear"}, "reply_to_user": {"reputation": 15576, "user_id": 677561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/95077e3dc8c640d554cfa97da3dc6131?s=128&d=identicon&r=PG&f=1", "display_name": "Alain Collins", "link": "https://stackoverflow.com/users/677561/alain-collins"}, "edited": false, "score": 0, "creation_date": 1456949827, "post_id": 35756124, "comment_id": 59187752, "body": "Thanks @AlainCollins! That did seem to work."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 5916276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b147ad65b3ae2ea9e09ee63e34f77b03?s=128&d=identicon&r=PG&f=1", "display_name": "brownbear", "link": "https://stackoverflow.com/users/5916276/brownbear"}, "edited": false, "score": 0, "creation_date": 1456949955, "post_id": 35757104, "comment_id": 59187844, "body": "Many, many thanks @Alcanzar. I appreciate the explanation of the underlying functionality. I tried Alain&#39;s suggestion and it worked AFTER I moved the add_field {} block to the very end, after the other filter blocks."}], "tags": [], "owner": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "is_accepted": true, "score": 0, "last_activity_date": 1456949310, "creation_date": 1456949310, "answer_id": 35757104, "question_id": 35756124, "link": "https://stackoverflow.com/questions/35756124/cant-clone-a-field-in-logstash-and-only-lowercase-one-of-them/35757104#35757104", "title": "Can&#39;t clone a field in Logstash and only lowercase one of them", "body": "<p>As @alain-collins pointed out, you have to do the lowercase in a second block.</p>\n\n<p>The reason for this is related to how logstash works.  It inherits methods like <code>add_field</code> from the <code>filter</code> class.  The add_field only gets called once all of the <code>mutate</code> filters are done.</p>\n\n<p>So you need to do this:</p>\n\n<pre><code>mutate { \n  add_field =&gt; { \n    \"displayTitle\" =&gt; \"%{title}\",\n    \"displayMessage\" =&gt; \"%{message}\"\n  } \n}\nmutate { lowercase =&gt; [ \"title\",\"message\" ] }\n</code></pre>\n\n<p>Your ruby version of it would have worked if you added .clone on the end.  Without that it's making a shallow copy of the string, so that when you lowercase it, its the same string being modified.</p>\n"}], "owner": {"reputation": 5, "user_id": 5916276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b147ad65b3ae2ea9e09ee63e34f77b03?s=128&d=identicon&r=PG&f=1", "display_name": "brownbear", "link": "https://stackoverflow.com/users/5916276/brownbear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 0, "accepted_answer_id": 35757104, "answer_count": 1, "score": 0, "last_activity_date": 1456950747, "creation_date": 1456946058, "last_edit_date": 1456950747, "question_id": 35756124, "link": "https://stackoverflow.com/questions/35756124/cant-clone-a-field-in-logstash-and-only-lowercase-one-of-them", "title": "Can&#39;t clone a field in Logstash and only lowercase one of them", "body": "<p>I am using Logstash RSS Input to collect and tag Google News alerts. In order to tag properly, I want to normalize the text first and also maintain the original casing for display on the UI.</p>\n\n<p>I have tried the following, but every combination seems to end up with BOTH the original and the clone field lowercase, without specifically asking Logstash.</p>\n\n<p>Method one- use mutate { add_field </p>\n\n<pre><code>input {\n rss {  [my RSS feed URLs] } \n}\n\nfilter {\n mutate\n    {\n        add_field =&gt; [\"displayTitle\", \"%{@title}\"] }\n mutate\n    {\n        add_field =&gt; [\"displayText\", \"%{@message}\"] }\n mutate {\n    lowercase =&gt; [ \"title\",\"message\" ] }\n\n\nif \"3d-print\" in [title] or \"3d-print\" in [message] { mutate { add_tag =&gt; \"3d printing\" } }\n\noutput {}\n</code></pre>\n\n<p>Method two- use Ruby code to clone event</p>\n\n<pre><code>input {\n rss {  [my RSS feed URLs] } \n}\n\nfilter {\n\n ruby {\n       code =&gt; \"event['displayTitle'] = event['title']\" }\n ruby {\n       code =&gt; \"event['displayText'] = event['message']\" }\n\n\n mutate {\n    lowercase =&gt; [ \"title\",\"message\" ] }\n\nif \"3d-print\" in [title] or \"3d-print\" in [message] { mutate { add_tag =&gt; \"3d printing\" } }\n\noutput {}\n</code></pre>\n\n<p>Method three- use Clone plugin to clone event</p>\n\n<pre><code>input {\n rss {  [my RSS feed URLs] } \n}\n\nfilter {\nclone {\n    add_field =&gt; { \"%{title}\" =&gt; \"displayTitle\" } }\n\n mutate {\n    lowercase =&gt; [ \"title\",\"message\" ] }\n\nif \"3d-print\" in [title] or \"3d-print\" in [message] { mutate { add_tag =&gt; \"3d printing\" } }\n\noutput {}\n</code></pre>\n\n<p>All three of these methods produce output with BOTH the 'displayTitle' and 'title' fields to be lowercased, even though I only used mutate { lowercase => on the title field.</p>\n\n<p>The same is true for the 'displayText' and 'message' fields. I want the displayTitle and displayMessage fields to stay preserved with the original casing.</p>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "edited": false, "score": 0, "creation_date": 1456945767, "post_id": 35755945, "comment_id": 59185284, "body": "Yes, execute <code>rails g migration RenameColumn</code> to generate file with migration."}, {"owner": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "edited": false, "score": 0, "creation_date": 1456947462, "post_id": 35755945, "comment_id": 59186333, "body": "thank&#39;s again @Ilya just one thing have a problem if the column is on this way: roup&#233;sde-dormir ?"}, {"owner": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "edited": false, "score": 0, "creation_date": 1456947501, "post_id": 35755945, "comment_id": 59186358, "body": "because i make the migration but is showing block in method_missing"}, {"owner": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "edited": false, "score": 0, "creation_date": 1456947524, "post_id": 35755945, "comment_id": 59186369, "body": "and i think is because the columnn have this --"}, {"owner": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "edited": false, "score": 0, "creation_date": 1456948092, "post_id": 35755945, "comment_id": 59186684, "body": "the migration:      rename_column :categories, :roupasde-dormir, :roupas-de-dormir"}, {"owner": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "edited": false, "score": 0, "creation_date": 1456948161, "post_id": 35755945, "comment_id": 59186737, "body": "vitrine_production=# TABLE categories;  id |         slug         |       name        | gender_id |         created_at         |         updated_at          ----+----------------------+-------------------+-----------+&zwnj;&#8203;--------------------&zwnj;&#8203;--------+-----------&zwnj;&#8203;-----------------  10 | roupas-intimas       | Roupas &#205;ntimas    |         1 | 2016-03-02 13:39:58.600942 | 2016-03-02 13:39:58.600942  11 | roupas-de-dormir     | Roupas de Dormir  |         1 | 2016-03-02 13:40:57.983162 | 2016-03-02 13:40:57.983162"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "edited": false, "score": 0, "creation_date": 1456948373, "post_id": 35755945, "comment_id": 59186878, "body": "you have not column name <code>:roupasde-dormir</code>.Maybe you want to rename  field in a table row?"}, {"owner": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "edited": false, "score": 0, "creation_date": 1456949063, "post_id": 35755945, "comment_id": 59187289, "body": "sorry, i copy the up part here it go:  19 | roupasde-dormir      | Roupasde Dormir   |         2 | 2016-03-02 13:48:27.853552 | 2016-03-02 13:48:27.853552"}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1456945730, "last_edit_date": 1456945730, "creation_date": 1456945444, "answer_id": 35755945, "question_id": 35755889, "link": "https://stackoverflow.com/questions/35755889/rails-postgres-how-to-change-fix-a-data-column-after-created/35755945#35755945", "title": "Rails Postgres how to change fix a data column after created?", "body": "<p>You can write migration and rename your column:</p>\n\n<pre><code>class RenameColumn &lt; ActiveRecord::Migration \n  def change\n    rename_column :table_name, :old_column, :new_column\n  end\nend\n</code></pre>\n\n<p>and then execute <code>rake db:migrate</code> in terminal.</p>\n"}, {"tags": [], "owner": {"reputation": 740, "user_id": 1528703, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b79a44057a2a603ce63d669394825958?s=128&d=identicon&r=PG", "display_name": "Rohan Pujari", "link": "https://stackoverflow.com/users/1528703/rohan-pujari"}, "is_accepted": false, "score": 0, "last_activity_date": 1456945810, "creation_date": 1456945810, "answer_id": 35756050, "question_id": 35755889, "link": "https://stackoverflow.com/questions/35755889/rails-postgres-how-to-change-fix-a-data-column-after-created/35756050#35756050", "title": "Rails Postgres how to change fix a data column after created?", "body": "<p>If you want to do it from console.</p>\n\n<pre><code>ActiveRecord::Migration.remove_column :table_name, :old_column_name\nActiveRecord::Migration.add_column :table_name, :new_column_name, :type\n</code></pre>\n\n<p>Or use rename_column</p>\n\n<pre><code>ActiveRecord::Migration.rename_column :table, :old_column, :new_column\n</code></pre>\n\n<p>But its always better to create migration. You can check llya's answer on how to write migration.</p>\n"}, {"tags": [], "owner": {"reputation": 345, "user_id": 5064765, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a5a38cc6a3dccee850f33e07bb9fa05?s=128&d=identicon&r=PG&f=1", "display_name": "Anna88", "link": "https://stackoverflow.com/users/5064765/anna88"}, "is_accepted": true, "score": 0, "last_activity_date": 1457018250, "creation_date": 1457018250, "answer_id": 35776005, "question_id": 35755889, "link": "https://stackoverflow.com/questions/35755889/rails-postgres-how-to-change-fix-a-data-column-after-created/35776005#35776005", "title": "Rails Postgres how to change fix a data column after created?", "body": "<p>Try this</p>\n\n<p>In your current migration change</p>\n\n<pre><code>def change\nend\n</code></pre>\n\n<p>to </p>\n\n<pre><code>def self.up\n  add_column :table_name, column_name, type\nend\n</code></pre>\n\n<p>then after this, add</p>\n\n<pre><code>def self.down\n  remove_column :table_name, column_name\nend\n</code></pre>\n\n<p>First run </p>\n\n<pre><code>rake db:migrate:down VERSION= version_number\n</code></pre>\n\n<p>Now correct the column name in self.up and run</p>\n\n<pre><code>run rake db:migrate:up VERSION= version_number\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5928064, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/25cf09aa9714ab0db467e1eed2abae10?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/5928064/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 35776005, "answer_count": 3, "score": 0, "last_activity_date": 1457018250, "creation_date": 1456945297, "question_id": 35755889, "link": "https://stackoverflow.com/questions/35755889/rails-postgres-how-to-change-fix-a-data-column-after-created", "title": "Rails Postgres how to change fix a data column after created?", "body": "<p>I create a column on a table on postgres. but after created i saw that i made a mistake on accentuation and i would like to instead of destroy the columnn fix it. have a way?</p>\n\n<p>i'm using Rails and console to create the columnn. thank's</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 560, "user_id": 2362505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/181c3e1a813fb39b2720f4b2ba34e9cd?s=128&d=identicon&r=PG", "display_name": "harshs08", "link": "https://stackoverflow.com/users/2362505/harshs08"}, "edited": false, "score": 0, "creation_date": 1456945395, "post_id": 35755692, "comment_id": 59185048, "body": "Are you running <code>heroku run rake db:seed</code> for the first time or have you ran it before also?"}, {"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "edited": false, "score": 0, "creation_date": 1456945411, "post_id": 35755692, "comment_id": 59185054, "body": "Can you post your seeds.rb file?"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1456945503, "post_id": 35755692, "comment_id": 59185116, "body": "would you like my seed file posted as a jpg or in the block quote. thanks"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1456945639, "post_id": 35755692, "comment_id": 59185199, "body": "I have ran it before, git push heroku master, then heroku run rake db:migrate and then heroku run rake db:seed"}], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1456946083, "post_id": 35756089, "comment_id": 59185481, "body": "im not clear on your instructions. its working perfect locally, I can&#39;t get the page loaded at all in heroku"}, {"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "reply_to_user": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1456946419, "post_id": 35756089, "comment_id": 59185699, "body": "Sorry if I was not clear. Your seed is failing because there already an AdminUser with &#39;admin@example.com&#39; in your system. You could do a number of things to solve this: the easiest might be to wrap the creation of the AdminUser on line 1 of your seed file in an <code>unless AdminUser.find_by(email: &#39;admin@example.com&#39;)</code>"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1456946535, "post_id": 35756089, "comment_id": 59185771, "body": "the seed is not failing at local level though"}, {"owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1456946610, "post_id": 35756089, "comment_id": 59185820, "body": "please code this into my seed file above and show me"}, {"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "reply_to_user": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1456946704, "post_id": 35756089, "comment_id": 59185874, "body": "Interesting that it is not failing at the local level. Two questions: are you using Devise and how many AdminUsers exist in your local database with the email &#39;admin@example.com&#39;?"}, {"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "reply_to_user": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1456946751, "post_id": 35756089, "comment_id": 59185904, "body": "The first line of your seed file should read (in my opinion): <code>AdminUser.create!(email: &#39;admin@example.com&#39;, password: &#39;password&#39;, password_confirmation: &#39;password&#39;) unless AdminUser.find_by(email: &#39;admin@example.com&#39;)</code>"}, {"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "reply_to_user": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "edited": false, "score": 0, "creation_date": 1456946901, "post_id": 35756089, "comment_id": 59186009, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/105183/discussion-between-m00b-and-chris-dormani\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "is_accepted": true, "score": 1, "last_activity_date": 1456949610, "last_edit_date": 1456949610, "creation_date": 1456945920, "answer_id": 35756089, "question_id": 35755692, "link": "https://stackoverflow.com/questions/35755692/heroku-run-rake-dbseed-error/35756089#35756089", "title": "Heroku run rake db:seed error", "body": "<p>You are seeing this because you have a uniqueness validation on the email field of your AdminUser model. The seed is failing because the record you are creating on line one of your seends.rb is invalid due to the email <a href=\"http://guides.rubyonrails.org/active_record_validations.html#uniqueness\" rel=\"nofollow\">not being unique</a>. This problem is not Heroku specific--it should fail the same way if you run <code>rake db:seed</code> locally, twice in a row.</p>\n\n<p>You might try adding something like <code>AdminUser.destroy_all</code> to your seeds.rb file (or whatever the name of the model is if it's not User). I would be <strong>very</strong> careful with that though as you would not want to delete production data. </p>\n\n<p>Better still, just add <code>unless AdminUser.find_by(email: 'admin@example.com')</code> to the end of the first line of your seeds file.</p>\n\n<p>If you are simply looking to add some data to your app, you might want to look at creating a populate task. There is a <a href=\"http://railscasts.com/episodes/126-populating-a-database\" rel=\"nofollow\">RailsCast on this subject</a>.</p>\n"}], "owner": {"reputation": 456, "user_id": 4459229, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/658730907/picture?type=large", "display_name": "Chris Dormani", "link": "https://stackoverflow.com/users/4459229/chris-dormani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "accepted_answer_id": 35756089, "answer_count": 1, "score": -1, "last_activity_date": 1456950863, "creation_date": 1456944654, "last_edit_date": 1456950863, "question_id": 35755692, "link": "https://stackoverflow.com/questions/35755692/heroku-run-rake-dbseed-error", "title": "Heroku run rake db:seed error", "body": "<p>I am a new developer building a stripe payment processing system in Rails 4.2.4.</p>\n\n<p>My application works perfect locally but when I push this to Heroku I get this error after I run <code>rake db:seed</code>.</p>\n\n<p>I cannot get the application to open at production level at all now though it was working well before.</p>\n\n<p>This is the error in the terminal:</p>\n\n<pre><code>rake aborted!\n    ActiveRecord::RecordInvalid: Validation failed: Email has already been taken\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/validations.rb:79:in `raise_record_invalid'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/validations.rb:43:in `save!'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/attribute_methods/dirty.rb:29:in `save!'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/transactions.rb:291:in `block in save!'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/transactions.rb:351:in `block in with_transaction_returning_status'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/transaction.rb:184:in `within_new_transaction'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/transactions.rb:220:in `transaction'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/transactions.rb:348:in `with_transaction_returning_status'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/transactions.rb:291:in `save!'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/persistence.rb:51:in `create!'\n    /app/db/seeds.rb:9:in `&lt;top (required)&gt;'\n    /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:268:in `load'\n    /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:268:in `block in load'\n    /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\n    /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:268:in `load'\n    /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.4/lib/rails/engine.rb:547:in `load_seed'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/tasks/database_tasks.rb:250:in `load_seed'\n    /app/vendor/bundle/ruby/2.2.0/gems/activerecord-4.2.4/lib/active_record/railties/databases.rake:183:in `block (2 levels) in &lt;top (required)&gt;'\n    Tasks: TOP =&gt; db:seed\n</code></pre>\n\n<p>This is seeds.rb:</p>\n\n<pre><code>AdminUser.create!(email: 'admin@example.com', password: 'password', password_confirmation: 'password')\n\nplacenta_wash = Product.create(title: \"Placenta Wash\", \n subtitle: \"Nippon Beauty\", author: \"Chris Dorman\", \n length: \"30 minutes\", author_image_name: \"teacher-image.jpg\", \n price: \"4.99\", sku: \"GROHACK1\", download_url: \"https://s3.amazonaws.com/one-month-stripe-payments-dorman/CV.pdf\", \n details: \"You'll get one video\", description: %{&lt;p&gt;A growth hacker is a rare combination: someone with the right marketing and technical skills who can come up with clever marketing hacks and also track their results.&lt;/p&gt;\n\n &lt;p&gt;In this talk, Mattan Griffel introduces you to the concept of Growth Hacking and shares his favorite tips for getting started as a growth hacker.&lt;/p&gt;\n &lt;p&gt;&lt;strong&gt;What You'll Learn&lt;/strong&gt;&lt;/p&gt;\n &lt;ul class=\"no-indent\"&gt;\n &lt;li&gt;What is a growth hacker?&lt;/li&gt;\n &lt;li&gt;The 5 stages of the user lifecycle&lt;/li&gt;\n &lt;li&gt;How to apply the Lean Marketing Framework&lt;/li&gt;\n &lt;li&gt;Resources and tools you'll need to know&lt;/li&gt;\n &lt;/ul&gt;}, \n author_description: %{ &lt;p&gt;Hey, I'm Mattan Griffel, co-founder of the Y Combinator backed &lt;a href=\"http://www.onemonth.com\" target=\"_blank\"&gt;One Month&lt;/a&gt; where I teach the best selling One Month Rails and One Month Growth Hacking.&lt;/p&gt;\n &lt;p&gt;Why take my class? In the past I've advised companies like Pepsico, Bloomberg, GM, NYSE, and JPMorgan on growth hacking best practices. I've also spoken at New York University, Cooper Union and First Round Capital. My goal is to help you and other entrepreneurs rapidly grow your business. \n &lt;/p&gt;\n &lt;p&gt;Follow me on Twitter &lt;a href=\"https://twitter.com/mattangriffel\" target=\"_blank\"&gt;@mattangriffel&lt;/a&gt;&lt;/p&gt;})\n\ngrowth_hacking_monthly = Product.create(title: \"Growth Hacking Monthly\", \n subtitle: \"Ongoing Course\", author: \"Chris Dorman\", \n length: \"6 months\", author_image_name: \"teacher-image.jpg\", \n price: \"4.99\", sku: \"GROHACK2\", download_url: \"https://s3.amazonaws.com/one-month-stripe-payments/Peter+Bell+Resume.pdf\", \n details: \"We'll charge you monthly for unlimited access to our mentoring team\", description: %{&lt;p&gt;A growth hacker is a rare combination: someone with the right marketing and technical skills who can come up with clever marketing hacks and also track their results.&lt;/p&gt;\n\n &lt;p&gt;In this series, Mattan Griffel introduces you to the concept of Growth Hacking and shares his favorite tips for getting started as a growth hacker.&lt;/p&gt;\n &lt;p&gt;&lt;strong&gt;What You'll Learn&lt;/strong&gt;&lt;/p&gt;\n &lt;ul class=\"no-indent\"&gt;\n &lt;li&gt;What is a growth hacker?&lt;/li&gt;\n &lt;li&gt;The 5 stages of the user lifecycle&lt;/li&gt;\n &lt;li&gt;How to apply the Lean Marketing Framework&lt;/li&gt;\n &lt;li&gt;Resources and tools you'll need to know&lt;/li&gt;\n &lt;/ul&gt;}, \n author_description: %{ &lt;p&gt;Hey, I'm Mattan Griffel, co-founder of the Y Combinator backed &lt;a href=\"http://www.onemonth.com\" target=\"_blank\"&gt;One Month&lt;/a&gt; where I teach the best selling One Month Rails and One Month Growth Hacking.&lt;/p&gt;\n &lt;p&gt;Why take my class? In the past I've advised companies like Pepsico, Bloomberg, GM, NYSE, and JPMorgan on growth hacking best practices. I've also spoken at New York University, Cooper Union and First Round Capital. My goal is to help you and other entrepreneurs rapidly grow your business. \n &lt;/p&gt;\n &lt;p&gt;Follow me on Twitter &lt;a href=\"https://twitter.com/mattangriffel\" target=\"_blank\"&gt;@mattangriffel&lt;/a&gt;&lt;/p&gt;})\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rspec", "devise"], "comments": [{"owner": {"reputation": 740, "user_id": 1528703, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b79a44057a2a603ce63d669394825958?s=128&d=identicon&r=PG", "display_name": "Rohan Pujari", "link": "https://stackoverflow.com/users/1528703/rohan-pujari"}, "edited": false, "score": 0, "creation_date": 1456944505, "post_id": 35755580, "comment_id": 59184504, "body": "Try <code>post :create, user_id: @user.id, item: { name: &quot;name&quot;}</code>"}, {"owner": {"reputation": 235, "user_id": 5446925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/af919a93a7511096e0a7067a675cf39a?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/5446925/edward"}, "reply_to_user": {"reputation": 740, "user_id": 1528703, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b79a44057a2a603ce63d669394825958?s=128&d=identicon&r=PG", "display_name": "Rohan Pujari", "link": "https://stackoverflow.com/users/1528703/rohan-pujari"}, "edited": false, "score": 0, "creation_date": 1456944688, "post_id": 35755580, "comment_id": 59184626, "body": "I tried that and the errors turns into: NoMethodError: undefined method `id&#39; for nil:NilClass"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 1, "creation_date": 1456944729, "post_id": 35755580, "comment_id": 59184649, "body": "You didn&#39;t define @user in your test."}, {"owner": {"reputation": 235, "user_id": 5446925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/af919a93a7511096e0a7067a675cf39a?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/5446925/edward"}, "edited": false, "score": 0, "creation_date": 1456945351, "post_id": 35755580, "comment_id": 59185022, "body": "Thank you for your help!"}], "answers": [{"comments": [{"owner": {"reputation": 235, "user_id": 5446925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/af919a93a7511096e0a7067a675cf39a?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/5446925/edward"}, "edited": false, "score": 0, "creation_date": 1456945347, "post_id": 35755750, "comment_id": 59185018, "body": "Thank you for your help!"}], "tags": [], "owner": {"reputation": 740, "user_id": 1528703, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b79a44057a2a603ce63d669394825958?s=128&d=identicon&r=PG", "display_name": "Rohan Pujari", "link": "https://stackoverflow.com/users/1528703/rohan-pujari"}, "is_accepted": true, "score": 1, "last_activity_date": 1456944853, "creation_date": 1456944853, "answer_id": 35755750, "question_id": 35755580, "link": "https://stackoverflow.com/questions/35755580/rspec-activerecordrecordnotfound-couldnt-find-user-with-id/35755750#35755750", "title": "RSpec ActiveRecord::RecordNotFound Couldn&#39;t find User with &#39;id&#39;=", "body": "<p>You need to create @user before using it. You can use factory_girl gem or directly do</p>\n\n<pre><code> @user = User.create\n post :create, user_id: @user.id, item: { name: \"name\"}\n</code></pre>\n\n<p>Hope this works</p>\n"}], "owner": {"reputation": 235, "user_id": 5446925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/af919a93a7511096e0a7067a675cf39a?s=128&d=identicon&r=PG&f=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/5446925/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1970, "favorite_count": 0, "accepted_answer_id": 35755750, "answer_count": 1, "score": 0, "last_activity_date": 1456944853, "creation_date": 1456944330, "question_id": 35755580, "link": "https://stackoverflow.com/questions/35755580/rspec-activerecordrecordnotfound-couldnt-find-user-with-id", "title": "RSpec ActiveRecord::RecordNotFound Couldn&#39;t find User with &#39;id&#39;=", "body": "<p>There are many answered questions about this topic but I can't seem to apply the answers to my issue. I'm getting the following error:</p>\n\n<pre><code>ItemsController POST create redirect to show page\n     Failure/Error: @user = User.find(params[:user_id])\n\n     ActiveRecord::RecordNotFound:\n       Couldn't find User with 'id'=\n</code></pre>\n\n<p>I know the reason for the error is because the user_id is nil but I can't seem to figure out the reason why. I'm still fairly new to Rails so excuse me if this is a really easy fix.</p>\n\n<p><strong>RSpec Test</strong></p>\n\n<pre><code>require 'rails_helper'\nRSpec.describe ItemsController, type: :controller do\n\n  describe \"POST create\" do\n    it \"redirect to show page\" do\n      post :create, user_id: @user, item: { name: \"name\"}\n      expect(response).to redirect_to(user_show_path)\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Items Controller</strong></p>\n\n<pre><code>class ItemsController &lt; ApplicationController\n\n  def create\n    @user = User.find(params[:user_id])\n    @item = Item.new(item_params)\n    @item.user = current_user\n    if @item.save\n      @item = Item.update_items(params[:items])\n      redirect_to current_user, notice: \"Item was saved successfully.\"\n    else\n      flash[:error] = \"Error creating item. Please try again.\"\n      render user_show_path\n    end\n  end\n\n\n  private\n\n  def item_params\n    params.require(:item).permit(:name)\n  end\nend\n</code></pre>\n\n<p><strong>Routes</strong></p>\n\n<pre><code>user_items POST   /users/:user_id/items(.:format)   items#create\n</code></pre>\n\n<p>...and I've implemented <strong>Devise</strong> for the user part. Thanks in advance for the help!</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1456941577, "post_id": 35754660, "comment_id": 59182666, "body": "FWIW: from the sidebar on  <a href=\"http://rubyinstaller.org/download\" rel=\"nofollow noreferrer\">rubyinstaller.org/download</a> - &quot;The 64-bit versions of Ruby are relatively new on the Windows area and not all the packages have been updated to be compatible with it. To use this version you will require some knowledge about compilers and solving dependency issues, which might be too complicated if you just want to play with the language.&quot;"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1456942233, "post_id": 35754660, "comment_id": 59183065, "body": "Is <code>minitest</code> even installed?"}, {"owner": {"reputation": 5339, "user_id": 4241959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yPffH.jpg?s=128&g=1", "display_name": "Alex Lomia", "link": "https://stackoverflow.com/users/4241959/alex-lomia"}, "edited": false, "score": 0, "creation_date": 1456942408, "post_id": 35754660, "comment_id": 59183162, "body": "Yes, minitest is installed. The gem comes bundled with ruby, so it shouldn&#39;t have compatibility issues on x64"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1456942543, "post_id": 35754660, "comment_id": 59183260, "body": "@AlexanderLomia: Please post the output of <code>gem list</code>. I&#39;m pretty sure it isn&#39;t."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1456943427, "post_id": 35754660, "comment_id": 59183834, "body": "@AlexanderLomia: <a href=\"https://github.com/ruby/ruby/blob/v2_2_4/NEWS#L238-L243\" rel=\"nofollow noreferrer\"><code>minitest</code> was removed from the stdlib in 2.2</a>. 5.4.3 is also neither a current version (2014?) nor was it ever bundled. But <code>require</code> isn&#39;t failing just with <code>minitest</code>, is it? Can you also post the output of <code>gem environment</code>? Maybe a previous installation wasn&#39;t correctly removed or sth."}, {"owner": {"reputation": 5339, "user_id": 4241959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yPffH.jpg?s=128&g=1", "display_name": "Alex Lomia", "link": "https://stackoverflow.com/users/4241959/alex-lomia"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1456944415, "post_id": 35754660, "comment_id": 59184442, "body": "@cremno I added the output into the question"}], "owner": {"reputation": 5339, "user_id": 4241959, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/yPffH.jpg?s=128&g=1", "display_name": "Alex Lomia", "link": "https://stackoverflow.com/users/4241959/alex-lomia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 438, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456944283, "creation_date": 1456941319, "last_edit_date": 1456944283, "question_id": 35754660, "link": "https://stackoverflow.com/questions/35754660/cant-require-ruby-gems-on-windows-10", "title": "Can&#39;t require ruby gems on windows 10", "body": "<p>I have installed <em>ruby -v 2.2.4 (64x)</em> on <em>Windows 10</em> from it's <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow\">official website</a>. The setup completed successfully, but ruby isn't able to require gems. Whenever I run the following command from IRB: </p>\n\n<pre><code>require 'minitest'\n</code></pre>\n\n<p>It fails with the output:</p>\n\n<blockquote>\n  <p>LoadError: cannot load such file --\n          from C:/Ruby22-x64/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in\n  'require'\n          from C:/Ruby22-x64/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in\n  'require'\n          from (irb):1\n          from C:/Ruby22-x64/bin/irb:11:in '&lt; main>'</p>\n</blockquote>\n\n<hr>\n\n<h2>Gem list:</h2>\n\n<pre><code>bigdecimal (1.2.6)\nio-console (0.4.3)\njson (1.8.1)\nminitest (5.4.3)\npower_assert (0.2.2)\npsych (2.0.8)\nrake (10.4.2)\nrdoc (4.2.0)\ntest-unit (3.0.8)\n</code></pre>\n\n<hr>\n\n<h2>RubyGems Environment:</h2>\n\n<pre><code>- RUBYGEMS VERSION: 2.4.5.1\n  - RUBY VERSION: 2.2.4 (2015-12-16 patchlevel 230) [i386-mingw32]\n  - INSTALLATION DIRECTORY: C:/Ruby22/lib/ruby/gems/2.2.0\n  - RUBY EXECUTABLE: C:/Ruby22/bin/ruby.exe\n  - EXECUTABLE DIRECTORY: C:/Ruby22/bin\n  - SPEC CACHE DIRECTORY: C:/Users/alexl/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: C:/ProgramData\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86-mingw32\n  - GEM PATHS:\n     - C:/Ruby22/lib/ruby/gems/2.2.0\n     - C:/Users/alexl/.gem/ruby/2.2.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - C:\\Users\\alexl\\bin\n     - C:\\Program Files\\Git\\mingw64\\bin\n     - C:\\Program Files\\Git\\usr\\local\\bin\n     - C:\\Program Files\\Git\\usr\\bin\n     - C:\\Program Files\\Git\\usr\\bin\n     - C:\\Program Files\\Git\\mingw64\\bin\n     - C:\\Program Files\\Git\\usr\\bin\n     - C:\\Users\\alexl\\bin\n     - C:\\ProgramData\\Oracle\\Java\\javapath\n     - C:\\Windows\\system32\n     - C:\\Windows\n     - C:\\Windows\\System32\\Wbem\n     - C:\\Windows\\System32\\WindowsPowerShell\\v1.0\n     - C:\\Program Files (x86)\\Skype\\Phone\n     - C:\\HashiCorp\\Vagrant\\bin\n     - C:\\Program Files (x86)\\EaseUS\\Todo Backup\\bin\n     - C:\\wamp\\bin\\php\\php5.6.15\n     - C:\\ProgramData\\ComposerSetup\\bin\n     - C:\\Ruby22\\bin\n     - C:\\Users\\alexl\\AppData\\Local\\atom\\bin\n     - C:\\Program Files\\Git\\usr\\bin\\vendor_perl\n     - C:\\Program Files\\Git\\usr\\bin\\core_perl\n</code></pre>\n\n<p>I have googled around for some time, but could not find any useful information about resolving this issue.</p>\n\n<hr>\n\n<h2>Edit 1</h2>\n\n<p>I have uninstalled the <em>x64</em> version and installed the <em>x86</em> one. The error still persists</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1456942231, "post_id": 35754824, "comment_id": 59183064, "body": "Thanks for your quicky reply, but it doesnt work for me in this situation. :("}], "tags": [], "owner": {"reputation": 11, "user_id": 5986155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7ee29ad8cbd7a5593f943ca067e8f1?s=128&d=identicon&r=PG", "display_name": "weras", "link": "https://stackoverflow.com/users/5986155/weras"}, "is_accepted": false, "score": 0, "last_activity_date": 1456941859, "creation_date": 1456941859, "answer_id": 35754824, "question_id": 35754617, "link": "https://stackoverflow.com/questions/35754617/like-comment-ajax-error/35754824#35754824", "title": "Like comment Ajax error", "body": "<p>Try to rename file from .js.erb to .erb.js.\nThat is because your ruby code has to be executed first</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1456943240, "post_id": 35755207, "comment_id": 59183702, "body": "Thank you for your help.  I tried it, but it doesnt work me. :("}, {"owner": {"reputation": 394, "user_id": 3129584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5be1b6e8c405c795c6a0fecb08563e?s=128&d=identicon&r=PG&f=1", "display_name": "Kulix", "link": "https://stackoverflow.com/users/3129584/kulix"}, "reply_to_user": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1456985750, "post_id": 35755207, "comment_id": 59201421, "body": "When you view page source, what do you see on the #(&#39;#thumbs-down&quot;).replaceWith() line?"}, {"owner": {"reputation": 394, "user_id": 3129584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5be1b6e8c405c795c6a0fecb08563e?s=128&d=identicon&r=PG&f=1", "display_name": "Kulix", "link": "https://stackoverflow.com/users/3129584/kulix"}, "reply_to_user": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1456985852, "post_id": 35755207, "comment_id": 59201463, "body": "Also is there any info in the javascript console?"}, {"owner": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1456985982, "post_id": 35755207, "comment_id": 59201509, "body": "<code>&lt;a data-remote=&quot;true&quot; data-method=&quot;get&quot; href=&quot;http:&#47;&#47;localhost:3000&#47;articles&#47;23&#47;comments&#47;45&#47;like&quot;&gt;         &lt;span class=&quot;fa fa-thumbs-up&quot; id=&quot;thumbs-up&quot;&gt; 0&lt;&#47;span&gt; &lt;&#47;a&gt;</code> Javascript Console: Error: Bootstrap tooltips require Tether (<a href=\"http://github.hubspot.com/tether/\" rel=\"nofollow noreferrer\">github.hubspot.com/tether</a>)  tooltip.self-ff495cd6932165d4adceb3a8baec7340536f4d26b2fa14c&zwnj;&#8203;d202e651ccc7f513a.js&zwnj;&#8203;:24:1 Use of getPreventDefault() is deprecated.  Use defaultPrevented instead."}, {"owner": {"reputation": 394, "user_id": 3129584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5be1b6e8c405c795c6a0fecb08563e?s=128&d=identicon&r=PG&f=1", "display_name": "Kulix", "link": "https://stackoverflow.com/users/3129584/kulix"}, "reply_to_user": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1456986137, "post_id": 35755207, "comment_id": 59201581, "body": "Not sure if this is gonna fix everything, but have you seen this post? <a href=\"http://stackoverflow.com/questions/34567939/how-to-fix-the-error-error-bootstrap-tooltips-require-tether-http-github-h\" title=\"how to fix the error error bootstrap tooltips require tether http github h\">stackoverflow.com/questions/34567939/&hellip;</a>  When you fix that, let me know what you see in the javascript console."}, {"owner": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1456986516, "post_id": 35755207, "comment_id": 59201728, "body": "yes, I saw that post 2 days ago. But the thing is I am integrating my bootstrap 4 by using the gem &#39;bootstrap&#39;, &#39;~&gt; 4.0.0.alpha3&#39;. And, I tried to add the script  <code>&lt;script src=&quot;https:&#47;&#47;www.atlasestateagents.co.uk&#47;javascript&#47;tether.m&zwnj;&#8203;in.js&quot;&gt;&lt;&#47;script&gt;&lt;!-- Tether for Bootstrap --&gt;</code> in my application.html.erb, but still get the same error."}, {"owner": {"reputation": 394, "user_id": 3129584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5be1b6e8c405c795c6a0fecb08563e?s=128&d=identicon&r=PG&f=1", "display_name": "Kulix", "link": "https://stackoverflow.com/users/3129584/kulix"}, "reply_to_user": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1457033503, "post_id": 35755207, "comment_id": 59233998, "body": "Did you put the script before your bootstrap or after? I guess what I am think is that bootstrap is throwing up and breaking the javascript on your page."}, {"owner": {"reputation": 394, "user_id": 3129584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5be1b6e8c405c795c6a0fecb08563e?s=128&d=identicon&r=PG&f=1", "display_name": "Kulix", "link": "https://stackoverflow.com/users/3129584/kulix"}, "reply_to_user": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1457033553, "post_id": 35755207, "comment_id": 59234028, "body": "Also could you show us your javascript logic for when the user clicks the upvote or downvote button?"}, {"owner": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1457109850, "post_id": 35755207, "comment_id": 59272372, "body": "I opened my network console in firefox, and when I clicked the like button, it showed that I got the 500 internal server error, still haven&#39;t known what is wrong with my code."}, {"owner": {"reputation": 394, "user_id": 3129584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5be1b6e8c405c795c6a0fecb08563e?s=128&d=identicon&r=PG&f=1", "display_name": "Kulix", "link": "https://stackoverflow.com/users/3129584/kulix"}, "reply_to_user": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1457111180, "post_id": 35755207, "comment_id": 59273296, "body": "That tells me that your backend code is breaking. Whats the stacktrace on the rails side?"}, {"owner": {"reputation": 394, "user_id": 3129584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5be1b6e8c405c795c6a0fecb08563e?s=128&d=identicon&r=PG&f=1", "display_name": "Kulix", "link": "https://stackoverflow.com/users/3129584/kulix"}, "reply_to_user": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1457111802, "post_id": 35755207, "comment_id": 59273692, "body": "Also it might be helpful to see your models."}], "tags": [], "owner": {"reputation": 394, "user_id": 3129584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a5be1b6e8c405c795c6a0fecb08563e?s=128&d=identicon&r=PG&f=1", "display_name": "Kulix", "link": "https://stackoverflow.com/users/3129584/kulix"}, "is_accepted": false, "score": 0, "last_activity_date": 1456943026, "creation_date": 1456943026, "answer_id": 35755207, "question_id": 35754617, "link": "https://stackoverflow.com/questions/35754617/like-comment-ajax-error/35755207#35755207", "title": "Like comment Ajax error", "body": "<p>Since you are using jquery on the front end, you could either rename your javascript files to .erb.js instead of .js.erb to prioritize the erb preprocessing first, or you could create an endpoint to retrieve that data so you can avoid bugs where maybe your ruby model code does not break javascript on the front end, its also best practice to make that data available over an endpoint in general. </p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "edited": false, "score": 0, "creation_date": 1456988738, "post_id": 35765234, "comment_id": 59202802, "body": "Thank you for your help. Yes, I defined the route for them. Actually, everything works fine. The problem arises when I add ajax to them. I tried .text as you suggested but it still doesnt work. :("}], "tags": [], "owner": {"reputation": 2294, "user_id": 2245697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931e42fa59a041551b7f63e703ea909a?s=128&d=identicon&r=PG&f=1", "display_name": "Tan", "link": "https://stackoverflow.com/users/2245697/tan"}, "is_accepted": false, "score": 0, "last_activity_date": 1456988446, "creation_date": 1456988446, "answer_id": 35765234, "question_id": 35754617, "link": "https://stackoverflow.com/questions/35754617/like-comment-ajax-error/35765234#35765234", "title": "Like comment Ajax error", "body": "<p>Did you define the routes for upvote/downvote?</p>\n\n<p>And you should try:</p>\n\n<pre><code>$('#thumbs-up').text(\"&lt;%= j render comment.get_upvotes.size %&gt;\");\n$('#thumbs-down').text(\"&lt;%= j render comment.get_downvotes.size %&gt;\");\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5735392, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JRyZT.jpg?s=128&g=1", "display_name": "Final Fantasy VIII", "link": "https://stackoverflow.com/users/5735392/final-fantasy-viii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1457110026, "creation_date": 1456941187, "last_edit_date": 1457110026, "question_id": 35754617, "link": "https://stackoverflow.com/questions/35754617/like-comment-ajax-error", "title": "Like comment Ajax error", "body": "<p>I am using the \"Acts As Votable\" gem in my application because I want to allow my user to like and dislike comments. It has been working good so far, but now I want to implement Ajax to improve the user interface.</p>\n\n<p>This is my code:</p>\n\n<p><strong>routes.rb</strong>:</p>\n\n<pre><code>resources :articles do\n    member do\n      put \"like\", to: \"articles#upvote\"\n    end\n    resources :comments do\n      member do\n        get \"like\", to: \"comments#upvote\"\n        get \"dislike\", to: \"comments#downvote\"\n      end\n    end\n  end\n</code></pre>\n\n<p>comments_controller.rb:</p>\n\n<pre><code>def upvote\n    if @comment.upvote_from current_user\n      respond_to do |format|\n        format.html { redirect_to(:back) }\n        format.js\n      end\n    end\n  end\n\n  def downvote\n    if @comment.downvote_from current_user\n      respond_to do |format|\n        format.html { redirect_to(:back) }\n        format.js\n      end\n    end\n  end\n</code></pre>\n\n<p>_comment.html.erb:</p>\n\n<pre><code>&lt;span class=\"like-comment\"&gt;\n      &lt;%= link_to like_article_comment_url(@article, comment), method: :get, remote: true do %&gt;\n        &lt;span class=\"fa fa-thumbs-up\" id=\"thumbs-up\"&gt; &lt;%= comment.get_upvotes.size %&gt;&lt;/span&gt;\n      &lt;% end %&gt;\n    &lt;/span&gt;\n    &lt;p class=\"dislike-comment\"&gt;\n      &lt;%= link_to dislike_article_comment_url(@article, comment), method: :get, remote: true do %&gt;\n        &lt;span class=\"fa fa-thumbs-down\" id=\"thumbs-down\"&gt; &lt;%= comment.get_downvotes.size %&gt;&lt;/span&gt;\n      &lt;% end %&gt;\n</code></pre>\n\n<p>upvote.js.erb:</p>\n\n<pre><code>$('#thumbs-up').replaceWith(\"&lt;%= j render comment.get_upvotes.size %&gt;\");\n</code></pre>\n\n<p>downvote.js.erb:</p>\n\n<pre><code>$('#thumbs-down').replaceWith(\"&lt;%= j render comment.get_downvotes.size %&gt;\");\n</code></pre>\n\n<p>The problem is it doesn't update the number of like/dislike when I click the like/dislike button. However, when I refresh the page, it updates the number of like/dislike. I don't know why the view doesn't update the number of like/dislike. Moreover, I tried to change the file to upvote.erb.js/downvote.erb.js as other people suggested but the problem is still there. </p>\n\n<p>*Updated:\n<strong>When I opened the network console in firefox, I saw 500 internal server error when I clicked the like/dislike butto. I searched all the problem related with that error, but still couldn't figure what is wrong with my code.</strong></p>\n"}, {"tags": ["ruby", "testing", "assert"], "comments": [{"owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 0, "creation_date": 1456940352, "post_id": 35754262, "comment_id": 59181852, "body": "is there an <code>assertions.rb</code> file which is in a directory called <code>test</code>, which is one directory up from the file you are running?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 0, "creation_date": 1456940440, "post_id": 35754262, "comment_id": 59181909, "body": "@UriAgassi No. &quot;these are testing code that is just a few lines up in the same file&quot;."}, {"owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456940734, "post_id": 35754262, "comment_id": 59182096, "body": "@sawa - it might refer to utility code he wants to use in his tests..."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3334539, "user_type": "registered", "profile_image": "https://graph.facebook.com/11802253/picture?type=large", "display_name": "Ben_RDU", "link": "https://stackoverflow.com/users/3334539/ben-rdu"}, "edited": false, "score": 0, "creation_date": 1456940758, "post_id": 35754333, "comment_id": 59182117, "body": "Tried that as well. Then it doesn&#39;t recognize the assert_equals method (or assert_equal): dynamic_call.rb:20:in <code>&lt;main&gt;&#39;: undefined method </code>assert_equals&#39; for main:Object (NoMethodError)  Is there a gem I&#39;m missing perhaps?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 31, "user_id": 3334539, "user_type": "registered", "profile_image": "https://graph.facebook.com/11802253/picture?type=large", "display_name": "Ben_RDU", "link": "https://stackoverflow.com/users/3334539/ben-rdu"}, "edited": false, "score": 1, "creation_date": 1456940796, "post_id": 35754333, "comment_id": 59182137, "body": "I didn&#39;t mean not to include the testing framework. You have to include that."}, {"owner": {"reputation": 31, "user_id": 3334539, "user_type": "registered", "profile_image": "https://graph.facebook.com/11802253/picture?type=large", "display_name": "Ben_RDU", "link": "https://stackoverflow.com/users/3334539/ben-rdu"}, "edited": false, "score": 1, "creation_date": 1456941261, "post_id": 35754333, "comment_id": 59182462, "body": "Gotcha. Added <code>require &#39;test&#47;unit&#39; extend Test::Unit::Assertions</code> and it runs. My testing has been fairly formulaic thus far, obviously I need to work a bit on my overall understanding!"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1456940817, "last_edit_date": 1456940817, "creation_date": 1456940272, "answer_id": 35754333, "question_id": 35754262, "link": "https://stackoverflow.com/questions/35754262/using-single-assert-equals-statement-in-a-ruby-program/35754333#35754333", "title": "using single assert_equals statement in a Ruby Program", "body": "<p>Don't use the <code>require_relative</code> method for loading the code to be tested. That's it. No need of such line.</p>\n"}], "owner": {"reputation": 31, "user_id": 3334539, "user_type": "registered", "profile_image": "https://graph.facebook.com/11802253/picture?type=large", "display_name": "Ben_RDU", "link": "https://stackoverflow.com/users/3334539/ben-rdu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456940817, "creation_date": 1456940086, "question_id": 35754262, "link": "https://stackoverflow.com/questions/35754262/using-single-assert-equals-statement-in-a-ruby-program", "title": "using single assert_equals statement in a Ruby Program", "body": "<p>I am reading through \"Metaprogramming Ruby 2: Program Like the Ruby Pros\" and am a bit puzzled.</p>\n\n<p>Often, the exercise files will have require_relative '../test/assertions' statement at the end of them and then one or two lines of assert_equals statements like so</p>\n\n<pre><code>require_relative '../test/assertions'\nassert_equals 6, obj.send(:my_method, 3)\n</code></pre>\n\n<p>To be clear, these are testing code that is just a few lines up in the same file. I have set up many minitests, but never something quite so succinct! I get a load error when I try to run the file. I tried adding empty test and assertion folders, but unsurprisingly I still get a load error:</p>\n\n<blockquote>\n  <p>dynamic_call.rb:20:in `require_relative': cannot load such file --</p>\n</blockquote>\n\n<p>What do i need to do to be able to use these assert_equals tests?</p>\n"}, {"tags": ["ruby", "mongodb", "ruby-on-rails-4", "devise", "mongoid"], "comments": [{"owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "edited": false, "score": 0, "creation_date": 1457082737, "post_id": 35753878, "comment_id": 59253974, "body": "Did it work before? What&#39;s you session store? You don&#39;t have a custom session controller, right? Your browser does have cookies enabled?My money is on the session storage."}, {"owner": {"reputation": 311, "user_id": 2531758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f221d5c2b666513e891e0ca1ea884c7a?s=128&d=identicon&r=PG", "display_name": "Ashish Sharma", "link": "https://stackoverflow.com/users/2531758/ashish-sharma"}, "reply_to_user": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "edited": false, "score": 0, "creation_date": 1457088877, "post_id": 35753878, "comment_id": 59258218, "body": "With Mongoid 3 everything was working fine but just after upgrading to version 5 , user login stopped working."}, {"owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "edited": false, "score": 0, "creation_date": 1457102388, "post_id": 35753878, "comment_id": 59267051, "body": "Do update th mongoid 4 first. Also make sure to update your mongodb server. I&#39;m still on mongoid 4 for my own app as I fear various gems not being compatible yet."}, {"owner": {"reputation": 311, "user_id": 2531758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f221d5c2b666513e891e0ca1ea884c7a?s=128&d=identicon&r=PG", "display_name": "Ashish Sharma", "link": "https://stackoverflow.com/users/2531758/ashish-sharma"}, "reply_to_user": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "edited": false, "score": 0, "creation_date": 1457161189, "post_id": 35753878, "comment_id": 59290818, "body": "i just check that my previous mongid version was already 4.0.0."}], "owner": {"reputation": 311, "user_id": 2531758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f221d5c2b666513e891e0ca1ea884c7a?s=128&d=identicon&r=PG", "display_name": "Ashish Sharma", "link": "https://stackoverflow.com/users/2531758/ashish-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 317, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456948016, "creation_date": 1456938863, "last_edit_date": 1456948016, "question_id": 35753878, "link": "https://stackoverflow.com/questions/35753878/mongoid-5-devise-rails-4-user-not-able-to-sign-in", "title": "Mongoid 5 + Devise + Rails 4 - User not able to sign in", "body": "<p>I have upgraded my mongoid to version 5 and using below</p>\n\n<p><code>rails 4.1.4</code></p>\n\n<p><code>devise 3.5.6</code></p>\n\n<p>When i try to login a user, the user is signed in but when it redirects to <code>dashboard#index</code> it is not logged in, means session is lost.</p>\n\n<p>My logs are as </p>\n\n<pre><code>Started POST \"/campaign_managers/sign_in\" for 127.0.0.1 at 2016-03-02 22:33:34 +0530   \nProcessing by SessionsController#create as HTML\n      Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"lkrl4znSHibTgjLwcw/xiBC5SAbZm1gtBDGczhiomE0=\", \"campaign_manager\"=&gt;{\"email\"=&gt;\"ashishtest@gmail.com\", \"password\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Submit\"} \nMONGODB | Adding localhost:27017 to the cluster. \nMONGODB | localhost:27017 | my_development_db.find | STARTED | {\"find\"=&gt;\"users\", \"filter\"=&gt;{\"email\"=&gt;\"ashishtest@gmail.com\"}, \"limit\"=&gt;1, \"singleBatch\"=&gt;true}\n\nMONGODB | localhost:27017 | my_development_db.find | SUCCEEDED | 0.0007080480000000001s \nMONGODB | localhost:27017 | my_development_db.update | STARTED | {\"update\"=&gt;\"users\", \"updates\"=&gt;[{\"q\"=&gt;{\"_id\"=&gt;BSON::ObjectId('569337f369702d0459180000')}, \"u\"=&gt;{\"$set\"=&gt;{\"last_sign_in_at\"=&gt;2016-03-02 16:53:31 UTC, \"current_sign_in_at\"=&gt;2016-03-02 17:03:35 UTC, \"sign_in_count\"=&gt;91}}, \"multi\"=&gt;false, \"up...\nMONGODB | localhost:27017 | my_development_db.update | SUCCEEDED | 0.000398332s\n\nRedirected to http://localhost:3000/\nCompleted 302 Found in 194ms\n\nStarted GET \"/\" for 127.0.0.1 at 2016-03-02 22:33:35 +0530\n\nProcessing by DashboardController#index as HTML\n\nMONGODB | localhost:27017 | my_development_db.find | STARTED | {\"find\"=&gt;\"users\", \"filter\"=&gt;{\"_id\"=&gt;nil}, \"limit\"=&gt;1, \"singleBatch\"=&gt;true}   \nMONGODB | localhost:27017 | my_development_db.find | SUCCEEDED | 0.00038932400000000003s\n\nCompleted 401 Unauthorized in 7ms\n</code></pre>\n\n<p>So if you see the next time it tried to create the session, the <code>_id</code> is found nil because of which it goes to login page again.</p>\n\n<p>I have tried many solutions available on google but nothing worked for me.</p>\n\n<p>Please help if anyone has idea of mongoid 5 with devise.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["mysql", "ruby", "exception", "mysql2", "rescue"], "comments": [{"owner": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "edited": false, "score": 1, "creation_date": 1456947796, "post_id": 35753865, "comment_id": 59186523, "body": "Exception is a string. Since there is no difference in classes, you can analyze exception message and do whatever you want"}, {"owner": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "reply_to_user": {"reputation": 2994, "user_id": 4175647, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cdc00400f3017caba1581296dc6c4f01?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Roz", "link": "https://stackoverflow.com/users/4175647/nick-roz"}, "edited": false, "score": 0, "creation_date": 1456950681, "post_id": 35753865, "comment_id": 59188266, "body": "@nick-roz That helps a lot; but I just found that analyzing the <code>e.errno</code> would be easier.  Your comment did point me in the right direction though."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1474910396, "post_id": 35753865, "comment_id": 66715382, "body": "At no time should you allow an untrusted user to enter any SQL. That&#39;s a great way to get hacked. If you kinda trust the user then present the information in a list they can select from so typos and/or ad-hoc queries can&#39;t be injected. If your interface is on the command-line then give serious thought to moving it to a web form where you can control that input better, or write and run a lot of code to validate their input <i>before</i> submitting it to the database. Once it hits the database it&#39;s too late to protect against malicious SQL. You probably should be using an ORM to help protect your DB."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1474910498, "post_id": 35753865, "comment_id": 66715447, "body": "Stylistically, in Ruby we don&#39;t use camelCase for variables, instead we use snake_case. ItsAReadabilityThing."}], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "is_accepted": true, "score": 1, "last_activity_date": 1456952106, "last_edit_date": 1456952106, "creation_date": 1456950596, "answer_id": 35757456, "question_id": 35753865, "link": "https://stackoverflow.com/questions/35753865/how-to-distinguish-between-exceptions/35757456#35757456", "title": "How to distinguish between exceptions", "body": "<p>Let's break down your attempt:</p>\n\n<pre><code>rescue Mysql2::Error =&gt; e\n  puts e.errno\n  puts e.error\n</code></pre>\n\n<ol>\n<li><code>rescue</code> keeps your script running</li>\n<li><code>Mysql2::Error =&gt; e</code> takes from the <code>Error</code> class and stores in <code>e</code></li>\n<li><code>puts e.errno</code> <code>puts</code> the error number to the console</li>\n<li><code>puts e.error</code> <code>puts</code> the error description to the console</li>\n</ol>\n\n<p>And with that, the following <code>begin</code> loop should work for you:</p>\n\n<pre><code>begin\n  report = mysql.query(dynQ)\n  report.each {|row| puts row}\n\n  puts \"Query Successful!\"\n\nrescue Mysql2::Error =&gt; e\n\n  if e.errno === 1146\n    puts e.error\n\n    tF = db + \".\"\n    puts \"Now re-enter the `table` to select `FROM`:\"\n    tF &lt;&lt; gets.chomp!\n  elsif e.errno === 1054\n    puts e.error\n\n    puts \"Please re-nter all `table`.`column` pairs separated by, ', '.\"\n    tCP = gets.chomp!.split(\", \")\n\n    dynQ = \"SELECT \"\n    tCP.each {|pair| dynQ &lt;&lt; (db + \".\" + pair + \", \") }\n  else\n#   puts e.errno\n    puts e.error\n\n        puts \"Please re-nter all `table`.`column` pairs separated by, ', '.\"\n    tCP = gets.chomp!.split(\", \")\n\n    dynQ = \"SELECT \"\n    tCP.each {|pair| dynQ &lt;&lt; (db + \".\" + pair + \", \") }\n\n    tF = db + \".\"\n    puts \"Now re-enter the `table` to select `FROM`:\"\n    tF &lt;&lt; gets.chomp!\n  end\n\n  dynQ = dynQ.chop!.chop! + \" FROM \" + tF + \" LIMIT 10;\"\n\n  retry\nend\n</code></pre>\n"}], "owner": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 35757456, "answer_count": 1, "score": 0, "last_activity_date": 1474910112, "creation_date": 1456938818, "last_edit_date": 1474910112, "question_id": 35753865, "link": "https://stackoverflow.com/questions/35753865/how-to-distinguish-between-exceptions", "title": "How to distinguish between exceptions", "body": "<p>I am attempting to create a simple script in Ruby that accesses a MySQL database and runs a query based on user input.</p>\n\n<p>If a user gives bad login information or attempts to <code>SELECT</code> <code>FROM</code> a table or column that does not exist I would like the user to re-enter <em>only</em> the information that is causing an issue instead of having to re-enter all information. </p>\n\n<p>I wish for this code to raise an exception based on what part of the query threw an error:</p>\n\n<pre><code>#!/usr/local/bin/ruby\nrequire \"mysql2\"\nrequire \"watir\"\nrequire \"csv\"\n\nMysql2::Client.default_query_options.merge!(:as =&gt; :array)\nmysql = Mysql2::Client.new(:host =&gt; \"1.2.3.4\", :username =&gt; \"usr\", :password =&gt; \"pass123\", :database =&gt; \"db\")\n\ndb = \"db\"\n\nputs \"Please enter all `table`.`column` pairs you wish to select from; separated by a comma and space.\"\ntCP = gets.chomp.split(\", \")\n\ndynQ = \"SELECT \"\ntCP.each {|pair| dynQ &lt;&lt; (db + \".\" + pair + \", \") }\n\nputs \"Please enter the `table` you wish to select from:\"\ntF = db + \".\" + gets.chomp\n\ndynQ = dynQ.chop!.chop! + \" FROM \" + tF + \" LIMIT 10;\"\n\nreport = mysql.query(dynQ)\n\nbegin\n  report = mysql.query(dynQ)\n  report.each {|row| puts row}\n\n  puts \"Query Successful!\"\n\nrescue Mysql2::Error =&gt; e\n  puts e.errno\n  puts e.error\n\n  puts \"Please re-nter all `table`.`column` pairs separated by, ', '.\"\n  tCP = gets.chomp!.split(\", \")\n\n  dynQ = \"SELECT \"\n  tCP.each {|pair| dynQ &lt;&lt; (db + \".\" + pair + \", \") }\n\n  tF = db + \".\"\n  puts \"Now re-enter the `table` to select `FROM`:\"\n  tF &lt;&lt; gets.chomp!\n\n  dynQ = dynQ.chop!.chop! + \" FROM \" + tF + \" LIMIT 10;\"\n\n  retry\nend\n</code></pre>\n\n<p>For example, if I <code>SELECT</code> from a table or column that doesn't exist, I get this:</p>\n\n<pre><code>/Users/guy/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.2/lib/mysql2/client.rb:107:in '_query': Table 'db.table_dne' doesn't exist (Mysql2::Error)\n  from /Users/guy/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.2/lib/mysql2/client.rb:107:in 'block in query'\n  from /Users/guy/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.2/lib/mysql2/client.rb:106:in 'handle_interrupt'\n  from /Users/guy/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.2/lib/mysql2/client.rb:106:in 'query'\n  from file.rb:23:in '&lt;main&gt;'\n</code></pre>\n\n<p>Yet if I am taking that selection from a table that doesn't exist, I get the same exact thing:</p>\n\n<pre><code>/Users/guy/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.2/lib/mysql2/client.rb:107:in '_query': Unknown column 'db.table_dne' doesn't exist (Mysql2::Error)\n  from /Users/guy/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.2/lib/mysql2/client.rb:107:in 'block in query'\n  from /Users/guy/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.2/lib/mysql2/client.rb:106:in 'handle_interrupt'\n  from /Users/guy/.rvm/gems/ruby-2.3.0/gems/mysql2-0.4.2/lib/mysql2/client.rb:106:in 'query'\n  from file.rb:23:in '&lt;main&gt;'\n</code></pre>\n\n<p>Ideally, I want to <code>rescue</code> based on what exception appears in the console and have the user re-enter either <code>tCP</code> or <code>tF</code> instead of just being given a more general exception.</p>\n\n<p>I looked through the <a href=\"http://www.rubydoc.info/gems/mysql2/0.4.3\" rel=\"nofollow\">MySQL2 documentation</a> without luck.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "ahoy"], "answers": [{"comments": [{"owner": {"reputation": 645, "user_id": 2799827, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b051552d53e31c554daa45471d68b761?s=128&d=identicon&r=PG&f=1", "display_name": "user2799827", "link": "https://stackoverflow.com/users/2799827/user2799827"}, "edited": false, "score": 0, "creation_date": 1456941108, "post_id": 35754002, "comment_id": 59182350, "body": "you are right, the run time is nothing nice but i&#39;ll take it.  Thanks very much!"}], "tags": [], "owner": {"reputation": 642, "user_id": 4745520, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/10200391026893649/picture?type=large", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4745520/jeff"}, "is_accepted": true, "score": 2, "last_activity_date": 1456939264, "creation_date": 1456939264, "answer_id": 35754002, "question_id": 35753631, "link": "https://stackoverflow.com/questions/35753631/querying-ahoy-gem-events/35754002#35754002", "title": "Querying Ahoy Gem Events", "body": "<p>Ahoy::Event actually doesn't return anything useful. To get all records in an array return object, you need to use <code>Ahoy::Event.all</code>.</p>\n\n<p>So what you actually need to do is something along the lines of this:</p>\n\n<p><code>Ahoy::Event.all.select { |event| event.properties['text'] == \"View\" }.size</code></p>\n\n<p>The run time isn't going to be that nice but I think this is what you need.</p>\n"}, {"tags": [], "owner": {"reputation": 562, "user_id": 699832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0f3eb43dda94e699a3c2c2804bc31d?s=128&d=identicon&r=PG", "display_name": "holodigm", "link": "https://stackoverflow.com/users/699832/holodigm"}, "is_accepted": false, "score": 1, "last_activity_date": 1495145412, "creation_date": 1495145412, "answer_id": 44058529, "question_id": 35753631, "link": "https://stackoverflow.com/questions/35753631/querying-ahoy-gem-events/44058529#44058529", "title": "Querying Ahoy Gem Events", "body": "<p>Use <code>Ahoy::Event.where(\"properties -&gt;&gt; 'text' = 'View'\")</code> Way faster to use valid JSONB query syntax.</p>\n"}], "owner": {"reputation": 645, "user_id": 2799827, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b051552d53e31c554daa45471d68b761?s=128&d=identicon&r=PG&f=1", "display_name": "user2799827", "link": "https://stackoverflow.com/users/2799827/user2799827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 35754002, "answer_count": 2, "score": 1, "last_activity_date": 1495145412, "creation_date": 1456938155, "question_id": 35753631, "link": "https://stackoverflow.com/questions/35753631/querying-ahoy-gem-events", "title": "Querying Ahoy Gem Events", "body": "<p>I am using the Ahoy gem in a Rails 4.2 app. Ahoy Events stores events with a number of text attributes and a <code>properties</code> attribute that contains data I want to query. For example here is the last event I return via the rails console</p>\n\n<p><code>&gt;&gt; Ahoy::Event.last\n  Ahoy::Event Load (3.8ms)  SELECT  \"ahoy_events\".* FROM \"ahoy_events\"  ORDER BY \"ahoy_events\".\"id\" DESC LIMIT 1\n=&gt; #&lt;Ahoy::Event id: \"fffff17f-44e6-41d7-9c32-fa895338f54e\", visit_id: \"6b05b1ca-3863-46da-9c48-a3ab5fa4a9ee\", user_id: 1, name: \"$click\", properties: {\"tag\"=&gt;\"a\", \"page\"=&gt;\"/conversations/2\", \"text\"=&gt;\"View\", \"href\"=&gt;\"/conversations/2\"}, time: \"2015-08-23 13:25:51\"&gt;</code></p>\n\n<p>How would I retrieve all events where properties['text'] = 'View'</p>\n\n<p>I have tried <code>Ahoy::Event.where(:properties['text'] =&gt; 'View').count</code></p>\n\n<p>which returns: \n```</p>\n\n<blockquote>\n  <blockquote>\n    <p>Ahoy::Event.where(:properties['text'] => 'View').count\n    NoMethodError: undefined method <code>to_sym' for nil:NilClass\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activerecord-4.2.5.1/lib/active_record/sanitization.rb:59:in</code>block in expand_hash_conditions_for_aggregates'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activerecord-4.2.5.1/lib/active_record/sanitization.rb:58:in <code>each'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activerecord-4.2.5.1/lib/active_record/sanitization.rb:58:in</code>expand_hash_conditions_for_aggregates'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activerecord-4.2.5.1/lib/active_record/relation/query_methods.rb:957:in <code>build_where'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activerecord-4.2.5.1/lib/active_record/relation/query_methods.rb:584:in</code>where!'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activerecord-4.2.5.1/lib/active_record/relation/query_methods.rb:574:in <code>where'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activerecord-4.2.5.1/lib/active_record/querying.rb:10:in</code>where'\n        from (irb):13\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/console.rb:110:in <code>start'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/console.rb:9:in</code>start'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:68:in <code>console'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in</code>run_command!'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in <code>&lt;top (required)&gt;'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:274:in</code>require'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:274:in <code>block in require'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:240:in</code>load_dependency'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:274:in <code>require'\n        from /Users/dariusgoore/development/blackops/bin/rails:8:in</code>'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:268:in <code>load'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:268:in</code>block in load'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:240:in <code>load_dependency'\n        from /Users/dariusgoore/development/blackops/.bundle/gems/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:268:in</code>load'\n        from /Users/dariusgoore/.rubies/ruby-2.2.1/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in <code>require'\n        from /Users/dariusgoore/.rubies/ruby-2.2.1/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in</code>require'\n    ```</p>\n  </blockquote>\n</blockquote>\n\n<p>I have looked online for querying hash attributes without success. Any guidance is much appreciated.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1456940353, "post_id": 35753611, "comment_id": 59181853, "body": "<code>[-4, 3]</code> is an <i>array</i>, a <i>range</i> looks like this: <code>(-4..3)</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1456940400, "post_id": 35753611, "comment_id": 59181884, "body": "And a <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/set/rdoc/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a> is something else."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456940514, "post_id": 35753611, "comment_id": 59181960, "body": "And the expressions are illicit."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456940528, "post_id": 35753611, "comment_id": 59181972, "body": "And please use English punctuation when you write in English."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456940547, "post_id": 35753611, "comment_id": 59181985, "body": "And what is &quot;range interception&quot;?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456942782, "post_id": 35753611, "comment_id": 59183411, "body": "Have you tried surface-to-range missiles?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1456945655, "post_id": 35753611, "comment_id": 59185210, "body": "To stem downvotes and votes to close (and maybe getting some retracted), edit to change &quot;interceptions&quot; to &quot;intersections&quot; and, for example, change your first example to <code>(-4..3).intersection -2..5 #=&gt; -2..3</code>. I also suggest you use the term &quot;overlap&quot; rather than &quot;intersection&quot;, assuming that is what you mean. If you are not amused by all the previous comments, you should be. Life is too short to worry about little missteps while you&#39;re learning something new."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1456939693, "creation_date": 1456939693, "answer_id": 35754139, "question_id": 35753611, "link": "https://stackoverflow.com/questions/35753611/intersection-between-2-range-sets/35754139#35754139", "title": "intersection between 2 range sets", "body": "<pre><code>def foo((a, b), (c, d))\n  min, max = [a, c].max, [b, d].min\n  case min &lt;=&gt; max\n  when -1 then [min, max]\n  when 0 then [min]\n  when 1 then nil\n  end\nend\n\nfoo([-4, 3], [-2, 5]) # =&gt; [-2, 3]\nfoo([10, 20], [5, 10]) # =&gt; [10]\nfoo([-10, -5], [-8, -3]) # =&gt; [-8, -5]\nfoo([-5, -3], [2, 20]) # =&gt; nil\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456940141, "post_id": 35754185, "comment_id": 59181724, "body": "Or, <code>inter = nil unless inter.sort == inter</code>."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1456939836, "creation_date": 1456939836, "answer_id": 35754185, "question_id": 35753611, "link": "https://stackoverflow.com/questions/35753611/intersection-between-2-range-sets/35754185#35754185", "title": "intersection between 2 range sets", "body": "<pre><code>f = [-4, 3]\ns = [-2, 5]\ninter = [[f[0],s[0]].max, [f[1],s[2]].min].uniq\ninter = nil if inter[1] &amp;&amp; inter[1] &lt; inter[0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1456948189, "last_edit_date": 1456948189, "creation_date": 1456944892, "answer_id": 35755759, "question_id": 35753611, "link": "https://stackoverflow.com/questions/35753611/intersection-between-2-range-sets/35755759#35755759", "title": "intersection between 2 range sets", "body": "<pre><code>class Range\n  def range_overlap(other)\n    [self.min, other.min].max..[self.max, other.max].min\n  end\nend\n\n(-4..3  ).range_overlap -2..5  #=&gt; -2..3\n(10..20 ).range_overlap 5..10  #=&gt; 10..10\n(-10..-5).range_overlap -8..-3 #=&gt; -8..-5\n(-5..-3 ).range_overlap -2..20 #=&gt; -2..-3 \n(1..4   ).range_overlap 2..3   #=&gt; 2..3 \n</code></pre>\n\n<p><code>r.first &gt; r.last</code>, as in <code>r = -2..-3</code>, indicates there is no overlap. If you'd prefer <code>nil</code> to be returned in that case, use</p>\n\n<pre><code>r = ([self.min, other.min].max)..([self.max, other.max].min)\nr.last &gt;= r.first ? r : nil\n</code></pre>\n\n<p>I've also returned <code>[10,10]</code> rather than, say, <code>10</code> (certainly not <code>[10]</code>) because I think it would make your subsequent code easier to write. (It's analogous to a method returning <code>[[1,2], [3], [4,5]]</code> instead of <code>[[1,2], 3, [4,5]]</code>.)</p>\n\n<p>I think it probably would be best to always return <code>Range</code> objects. That permits subsequent code to be written, for example:</p>\n\n<pre><code>r = range_overlap(other)\ncase r.first &lt;=&gt; r.last\n  when 1 # r.first &gt; r.last\n     &lt;put out the trash&gt;\n  when 0 # r.first == r.last\n     &lt;let the cat out&gt;\n  else   # r.first &lt; r.last\n     &lt;go to a movie&gt;\nend\n</code></pre>\n"}], "owner": {"reputation": 1007, "user_id": 5351714, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ed8a93ea89809e3812bdfb926389ff96?s=128&d=identicon&r=PG&f=1", "display_name": "lolix", "link": "https://stackoverflow.com/users/5351714/lolix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1456948189, "creation_date": 1456938107, "question_id": 35753611, "link": "https://stackoverflow.com/questions/35753611/intersection-between-2-range-sets", "title": "intersection between 2 range sets", "body": "<p>How can I do range interceptions in ruby ? </p>\n\n<p>Like this:</p>\n\n<pre><code>[-4, 3] intersection [-2, 5] = [-2, 3]\n[10, 20] intersection [5, 10] = [10]\n[-10, -5] intersection [-8, -3] = [-8,-5]\n[-5, -3] intersection [2, 20] = nil\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "edited": false, "score": 0, "creation_date": 1456953534, "post_id": 35753438, "comment_id": 59189916, "body": "What is in your spec file?"}, {"owner": {"reputation": 320, "user_id": 2885921, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bCvLZ.jpg?s=128&g=1", "display_name": "tin tin", "link": "https://stackoverflow.com/users/2885921/tin-tin"}, "reply_to_user": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "edited": false, "score": 1, "creation_date": 1456984697, "post_id": 35753438, "comment_id": 59200991, "body": "@AndrewGrimm : I have edited and updated the contents. This is how my users_controller_spec.rb file looks like. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 6008847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZoGNJqPwbuw/AAAAAAAAAAI/AAAAAAAADOg/WJq3L4YYxho/photo.jpg?sz=128", "display_name": "Gimmy", "link": "https://stackoverflow.com/users/6008847/gimmy"}, "is_accepted": false, "score": 0, "last_activity_date": 1456942626, "creation_date": 1456942626, "answer_id": 35755068, "question_id": 35753438, "link": "https://stackoverflow.com/questions/35753438/rspec-error-undefined-method-respond-with/35755068#35755068", "title": "RSpec error &quot;undefined method `respond_with&#39;...&quot;", "body": "<p>This seems to be an error from shoulda-matchers gem, try to update to the latest version.</p>\n\n<p>Also make sure that it comes after RSpec in your gemfile</p>\n\n<pre><code>group :development, :test do\n  gem 'rspec-rails'\n  gem 'shoulda-matchers'\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320, "user_id": 2885921, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bCvLZ.jpg?s=128&g=1", "display_name": "tin tin", "link": "https://stackoverflow.com/users/2885921/tin-tin"}, "edited": false, "score": 0, "creation_date": 1456986087, "post_id": 35764346, "comment_id": 59201554, "body": "I just included the above piece of code in spec_helper.rb but still I am getting the same error. Thanks."}, {"owner": {"reputation": 86, "user_id": 466714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733d06ee873d1c80544e1a14f3d830c1?s=128&d=identicon&r=PG", "display_name": "eagleas", "link": "https://stackoverflow.com/users/466714/eagleas"}, "edited": false, "score": 0, "creation_date": 1545657663, "post_id": 35764346, "comment_id": 94671271, "body": "It work for me, in case when bin/rake spec pass, but bin/rspec fail with &quot;undefined method &#39;respond_with&#39;&quot;"}, {"owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "reply_to_user": {"reputation": 86, "user_id": 466714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/733d06ee873d1c80544e1a14f3d830c1?s=128&d=identicon&r=PG", "display_name": "eagleas", "link": "https://stackoverflow.com/users/466714/eagleas"}, "edited": false, "score": 0, "creation_date": 1545659931, "post_id": 35764346, "comment_id": 94671929, "body": "@eagleas in that case I&#39;d make sure if the rake task is doing <code>require &#39;spec_helper&#39;</code> or <code>require &#39;rails_helper&#39;</code>, you put those in <code>.rspec</code> too (as <code>--require spec_helper</code> or <code>--require rails_helper</code>)."}], "tags": [], "owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "is_accepted": false, "score": 2, "last_activity_date": 1456984840, "creation_date": 1456984840, "answer_id": 35764346, "question_id": 35753438, "link": "https://stackoverflow.com/questions/35753438/rspec-error-undefined-method-respond-with/35764346#35764346", "title": "RSpec error &quot;undefined method `respond_with&#39;...&quot;", "body": "<p>If you're not finding shoulda methods, I'd make sure you have this in your <code>rails_helper.rb</code> or <code>spec_helper.rb</code>:</p>\n\n<pre><code>config.include(Shoulda::Matchers::ActionController, { type: :model, file_path: /spec\\/controllers/})\n</code></pre>\n\n<p>Or it might be there but commented-out.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 6126957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67275dfa9ab16aa204598b34babf4141?s=128&d=identicon&r=PG", "display_name": "peter", "link": "https://stackoverflow.com/users/6126957/peter"}, "is_accepted": false, "score": 5, "last_activity_date": 1459227498, "last_edit_date": 1459227498, "creation_date": 1459217164, "answer_id": 36274162, "question_id": 35753438, "link": "https://stackoverflow.com/questions/35753438/rspec-error-undefined-method-respond-with/36274162#36274162", "title": "RSpec error &quot;undefined method `respond_with&#39;...&quot;", "body": "<p>I had the same problem and solved it. It looks like using older version of shoulda-matchers helps. I changed the <code>Gemfile</code> to <code>gem \"shoulda-matchers\", \"~>2.5\"</code> </p>\n"}, {"tags": [], "owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "is_accepted": false, "score": 6, "last_activity_date": 1481896239, "creation_date": 1481896239, "answer_id": 41185896, "question_id": 35753438, "link": "https://stackoverflow.com/questions/35753438/rspec-error-undefined-method-respond-with/41185896#41185896", "title": "RSpec error &quot;undefined method `respond_with&#39;...&quot;", "body": "<p>Here since we are dealing with <code>response codes</code> you can use-</p>\n\n<p><code>it { expect(response).to have_http_status(200) }</code></p>\n\n<p>instead of <code>it { should respond_with 200 }</code></p>\n\n<p>Here no need of <code>shoulda-matchers</code> gem as well.</p>\n\n<blockquote>\n  <p>Ref - <a href=\"https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs\" rel=\"noreferrer\">https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 3724, "user_id": 2409515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a33T6.jpg?s=128&g=1", "display_name": "Rokibul Hasan", "link": "https://stackoverflow.com/users/2409515/rokibul-hasan"}, "is_accepted": false, "score": 3, "last_activity_date": 1493188016, "creation_date": 1493188016, "answer_id": 43626544, "question_id": 35753438, "link": "https://stackoverflow.com/questions/35753438/rspec-error-undefined-method-respond-with/43626544#43626544", "title": "RSpec error &quot;undefined method `respond_with&#39;...&quot;", "body": "<p>Having this error after upgrade my old rails app to <code>rails 5.0</code>. then add the following configuration into <code>spec_helper.rb</code> and now its working fine.</p>\n\n<pre><code>Shoulda::Matchers.configure do |config|\n   config.integrate do |with|\n     with.test_framework :rspec\n     with.library :rails\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 2885921, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bCvLZ.jpg?s=128&g=1", "display_name": "tin tin", "link": "https://stackoverflow.com/users/2885921/tin-tin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2681, "favorite_count": 0, "answer_count": 5, "score": 5, "last_activity_date": 1493188016, "creation_date": 1456937647, "last_edit_date": 1456984627, "question_id": 35753438, "link": "https://stackoverflow.com/questions/35753438/rspec-error-undefined-method-respond-with", "title": "RSpec error &quot;undefined method `respond_with&#39;...&quot;", "body": "<p>I am following the tutorials <a href=\"http://apionrails.icalialabs.com/book/chapter_three\" rel=\"noreferrer\">http://apionrails.icalialabs.com/book/chapter_three</a>\nBut when I ran the controller test <code>bundle exec rspec spec/controllers</code> I am getting undefined method error:</p>\n\n<pre><code>Failures:\n\n Api::V1::UsersController GET #show \n Failure/Error: it { should respond_with 200 }\n NoMethodError:\n   undefined method `respond_with' for #&lt;RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x00000005d6f650&gt;\n # ./spec/controllers/api/v1/users_controller_spec.rb:17:in `block (3 levels) in &lt;top (required)&gt;'\n\n Finished in 0.08435 seconds\n 2 examples, 1 failure\n</code></pre>\n\n<p>Please help</p>\n\n<p>Edit:\nThe below is the contents of my spec file</p>\n\n<p>users_controller_spec.rb</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe Api::V1::UsersController do\n  before(:each) { request.headers['Accept'] = \"application/vnd.marketplace.v1\" }\n\n  describe \"GET #show\" do\n    before(:each) do\n      @user = FactoryGirl.create :user\n      get :show, id: @user.id, format: :json\n    end\n\n    it \"returns the information about a reporter on a hash\" do\n      user_response = JSON.parse(response.body, symbolize_names: true)\n      expect(user_response[:email]).to eql @user.email\n    end\n\n    it { should respond_with 200 }\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 3, "creation_date": 1456938569, "post_id": 35753347, "comment_id": 59180706, "body": "I am not a domain expert, but should driver licence number be a string?"}, {"owner": {"reputation": 3353, "user_id": 1782570, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ef78fbe5a7f84b9f660f362804ddfe24?s=128&d=identicon&r=PG", "display_name": "TheGeorgeous", "link": "https://stackoverflow.com/users/1782570/thegeorgeous"}, "edited": false, "score": 0, "creation_date": 1456939769, "post_id": 35753347, "comment_id": 59181497, "body": "Please post the exact error log rather than screenshots"}, {"owner": {"reputation": 9, "user_id": 5833504, "user_type": "registered", "profile_image": "https://graph.facebook.com/1008966789149100/picture?type=large", "display_name": "Abhi Shet Aachar Yeah", "link": "https://stackoverflow.com/users/5833504/abhi-shet-aachar-yeah"}, "edited": false, "score": 0, "creation_date": 1456940091, "post_id": 35753347, "comment_id": 59181694, "body": "this is the error i am getting while migrating the database to heroku..."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 3334539, "user_type": "registered", "profile_image": "https://graph.facebook.com/11802253/picture?type=large", "display_name": "Ben_RDU", "link": "https://stackoverflow.com/users/3334539/ben-rdu"}, "is_accepted": false, "score": 0, "last_activity_date": 1456940441, "last_edit_date": 1495535282, "creation_date": 1456940441, "answer_id": 35754388, "question_id": 35753347, "link": "https://stackoverflow.com/questions/35753347/how-to-fix-precision-0-in-rails-while-migrating-in-heroku/35754388#35754388", "title": "how to fix precision 0 in rails while migrating in heroku...?", "body": "<p>Did you use a database other than PostGres for development, and PostGres for Deployment? Do you have float type columns? If yes, you might want to change them to real or double precision, per this post:\n<a href=\"https://stackoverflow.com/questions/9014368/strange-heroku-float-bit-precision-error-ruby-on-rails\">Strange Heroku float bit-precision error (ruby on rails)</a></p>\n"}], "owner": {"reputation": 9, "user_id": 5833504, "user_type": "registered", "profile_image": "https://graph.facebook.com/1008966789149100/picture?type=large", "display_name": "Abhi Shet Aachar Yeah", "link": "https://stackoverflow.com/users/5833504/abhi-shet-aachar-yeah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456940441, "creation_date": 1456937397, "last_edit_date": 1456938362, "question_id": 35753347, "link": "https://stackoverflow.com/questions/35753347/how-to-fix-precision-0-in-rails-while-migrating-in-heroku", "title": "how to fix precision 0 in rails while migrating in heroku...?", "body": "<p>i have been trying to push my project in heroku. i succeed to push it in heroku but when i try to do <strong>heroku run rake db:migrate</strong> i am geeting error to set precision to 0.</p>\n\n<p><a href=\"http://i.stack.imgur.com/vSoMc.png\" rel=\"nofollow\">the error i am having while migrating to heroku</a></p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "sqlite", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5930376, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35ddca322137d94b2523901d6f626ee3?s=128&d=identicon&r=PG&f=1", "display_name": "domburford", "link": "https://stackoverflow.com/users/5930376/domburford"}, "edited": false, "score": 0, "creation_date": 1456937965, "post_id": 35753400, "comment_id": 59180250, "body": "Hi - thanks for your help! Unfortunately, that causes this error: &quot;Couldn&#39;t find all Posts with &#39;id&#39;: (all, {:order=&gt;&quot;RANDOM()&quot;, :limit=&gt;10}) (found 0 results, but was looking for 2)&quot;"}, {"owner": {"reputation": 1277, "user_id": 1737811, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab510b7d0d145c538fcc7638395ee703?s=128&d=identicon&r=PG", "display_name": "mutantkeyboard", "link": "https://stackoverflow.com/users/1737811/mutantkeyboard"}, "reply_to_user": {"reputation": 99, "user_id": 5930376, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35ddca322137d94b2523901d6f626ee3?s=128&d=identicon&r=PG&f=1", "display_name": "domburford", "link": "https://stackoverflow.com/users/5930376/domburford"}, "edited": false, "score": 0, "creation_date": 1456938905, "post_id": 35753400, "comment_id": 59180944, "body": "Hmm. Did you try using RAND() instead of random if you&#39;re on SQLite or MySQL. You can also use it by offset. See <a href=\"http://stackoverflow.com/questions/27002114/displaying-a-random-database-item-to-view-rails\">here</a>"}, {"owner": {"reputation": 99, "user_id": 5930376, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35ddca322137d94b2523901d6f626ee3?s=128&d=identicon&r=PG&f=1", "display_name": "domburford", "link": "https://stackoverflow.com/users/5930376/domburford"}, "edited": false, "score": 0, "creation_date": 1456940559, "post_id": 35753400, "comment_id": 59181992, "body": "Using SQLite at the moment - still no luck - thank you for the link!"}], "tags": [], "owner": {"reputation": 1277, "user_id": 1737811, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab510b7d0d145c538fcc7638395ee703?s=128&d=identicon&r=PG", "display_name": "mutantkeyboard", "link": "https://stackoverflow.com/users/1737811/mutantkeyboard"}, "is_accepted": false, "score": 0, "last_activity_date": 1456937552, "creation_date": 1456937552, "answer_id": 35753400, "question_id": 35753203, "link": "https://stackoverflow.com/questions/35753203/rails-nested-form-randomise-all-the-individual-fields-a-user-posts/35753400#35753400", "title": "Rails - Nested Form - Randomise all the individual fields a user posts", "body": "<p>Did you try with this?</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n\n  def index\n     @posts = Post.includes(:things).find(:all, :order =&gt;\"RANDOM()\", :limit =&gt; 10)\n  end \n\nend\n</code></pre>\n\n<p>Also MySQL uses RAND() instead of RANDOM(). </p>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 5930376, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35ddca322137d94b2523901d6f626ee3?s=128&d=identicon&r=PG&f=1", "display_name": "domburford", "link": "https://stackoverflow.com/users/5930376/domburford"}, "edited": false, "score": 0, "creation_date": 1456940688, "post_id": 35753756, "comment_id": 59182069, "body": "Hi - this didn&#39;t work :( - thank you for your feedback though!"}], "tags": [], "owner": {"reputation": 966, "user_id": 5350659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63535c11d66f71640d7a5a558b351d11?s=128&d=identicon&r=PG&f=1", "display_name": "Pitabas Prathal", "link": "https://stackoverflow.com/users/5350659/pitabas-prathal"}, "is_accepted": true, "score": 0, "last_activity_date": 1456941716, "last_edit_date": 1456941716, "creation_date": 1456938508, "answer_id": 35753756, "question_id": 35753203, "link": "https://stackoverflow.com/questions/35753203/rails-nested-form-randomise-all-the-individual-fields-a-user-posts/35753756#35753756", "title": "Rails - Nested Form - Randomise all the individual fields a user posts", "body": "<p>you can try following<br>\nposts_controller.rb</p>\n\n<pre><code>   class PostsController &lt; ApplicationController\n\n    def index\n      @things = Thing.all\n    end \n\n   end\n</code></pre>\n\n<p>in index.html.erb</p>\n\n<pre><code>    &lt;% @things.shuffle.each do |thing| %&gt;\n\n     &lt;%= thing.try(:text) %&gt;\n\n   &lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 801, "user_id": 361418, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cf3ed91eed72fa093f7e99779135890b?s=128&d=identicon&r=PG", "display_name": "Nico", "link": "https://stackoverflow.com/users/361418/nico"}, "is_accepted": false, "score": 1, "last_activity_date": 1457171256, "creation_date": 1457171256, "answer_id": 35812574, "question_id": 35753203, "link": "https://stackoverflow.com/questions/35753203/rails-nested-form-randomise-all-the-individual-fields-a-user-posts/35812574#35812574", "title": "Rails - Nested Form - Randomise all the individual fields a user posts", "body": "<p>Not sure if I understood correctly, but if you want all things for the current user, sorted randomly, this will work:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  def index\n    @things = Thing.joins(post: :user).where(users: { id: current_user.id }).order(\"RANDOM()\")\n  end \nend\n</code></pre>\n\n<p>Shuffling in the DB (= ordering randomly) is also preferable to shuffling in ruby, as it is faster.</p>\n\n<p>Edit: more elegantly, you could add a has_many :through relation to be able to access the current_user's things directly by doing current_user.things. However I leave that exercise to you... ;-)</p>\n"}], "owner": {"reputation": 99, "user_id": 5930376, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35ddca322137d94b2523901d6f626ee3?s=128&d=identicon&r=PG&f=1", "display_name": "domburford", "link": "https://stackoverflow.com/users/5930376/domburford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 35753756, "answer_count": 3, "score": 1, "last_activity_date": 1457171256, "creation_date": 1456937016, "last_edit_date": 1456942124, "question_id": 35753203, "link": "https://stackoverflow.com/questions/35753203/rails-nested-form-randomise-all-the-individual-fields-a-user-posts", "title": "Rails - Nested Form - Randomise all the individual fields a user posts", "body": "<p>A user can create by post, adding as many nested text fields on the fly as they wish by clicking the 'addtext' button [<strong>new.html.erb</strong>] </p>\n\n<p>If a user, for example, creates a post with three text fields\n(<strong>Text1 Text2 Text3</strong>) </p>\n\n<p><a href=\"https://i.stack.imgur.com/Yt86c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yt86c.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then another post with three text fields\n(<strong>TextA TextB TextC</strong>) </p>\n\n<p><a href=\"https://i.stack.imgur.com/Yv9Go.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yv9Go.png\" alt=\"enter image description here\"></a></p>\n\n<p>This will currently display in the browser [<strong>index.html.erb</strong>] as either: <a href=\"https://imgur.com/Nd0Eryb\" rel=\"nofollow noreferrer\">http://imgur.com/Nd0Eryb</a> or <a href=\"https://imgur.com/rl0m60U\" rel=\"nofollow noreferrer\">http://imgur.com/rl0m60U</a> due to .order(\"RANDOM()\") [<strong>index action</strong>] </p>\n\n<p>However, I am trying to output a randomised list of all the text fields the user posts. For instance, I want to output &amp; randomise over (<strong>Text1 Text2 Text3 TextA TextB TextC</strong>) in its entirety. In other words, my goal is to output a random assortment of all the text fields individually (<strong>TextA Text2 TextC Text1 Text3 TextB</strong>) </p>\n\n<p>I can't get this to work via my <strong>index action</strong> &amp; <strong>index.html.erb</strong></p>\n\n<p>Any help would be amazing! Thank you!</p>\n\n<p><strong>new.html.erb</strong> </p>\n\n<pre><code>&lt;button id='addtext'&gt;text&lt;/button&gt;\n\n&lt;%= form_for @post, html: { multipart: true } do |f| %&gt;\n &lt;%= f.fields_for :things do |ff| %&gt;\n &lt;% end %&gt; \n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>posts_controller.rb</strong> </p>\n\n<pre><code>class PostsController &lt; ApplicationController\n\n  def index\n     @posts = Post.includes(:things).all.order(\"RANDOM()\")\n  end \n\nend\n</code></pre>\n\n<p><strong>index.html.erb</strong></p>\n\n<pre><code>&lt;@posts.each do |post| %&gt;\n &lt;% post.things.each do |thing| %&gt;\n\n  &lt;%= thing.try(:text) %&gt;\n\n &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Schema</strong> </p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20160227154831) do\n\ncreate_table \"posts\", force: :cascade do |t|\n t.datetime \"created_at\", null: false\n t.datetime \"updated_at\", null: false\nend\n\ncreate_table \"taggings\", force: :cascade do |t|\n t.integer  \"tag_id\"\n t.integer  \"taggable_id\"\n t.string   \"taggable_type\"\n t.integer  \"tagger_id\"\n t.string   \"tagger_type\"\n t.string   \"context\",       limit: 128\n t.datetime \"created_at\"\nend\n\n  add_index \"taggings\", [\"tag_id\", \"taggable_id\", \"taggable_type\", \"context\", \"tagger_id\", \"tagger_type\"], name: \"taggings_idx\", unique: true\n  add_index \"taggings\", [\"taggable_id\", \"taggable_type\", \"context\"], name: \"index_taggings_on_taggable_id_and_taggable_type_and_context\"\n\ncreate_table \"tags\", force: :cascade do |t|\n t.string  \"name\"\n t.integer \"taggings_count\", default: 0\nend\n\nadd_index \"tags\", [\"name\"], name: \"index_tags_on_name\", unique: true\n\ncreate_table \"things\", force: :cascade do |t|\n t.text     \"text\"\n t.integer  \"post_id\"\n t.datetime \"created_at\",         null: false\n t.datetime \"updated_at\",         null: false\n t.integer  \"order\"\nend\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "erb", "slim-lang"], "answers": [{"tags": [], "owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "is_accepted": false, "score": 1, "last_activity_date": 1456938924, "last_edit_date": 1456938924, "creation_date": 1456935225, "answer_id": 35752528, "question_id": 35752239, "link": "https://stackoverflow.com/questions/35752239/convert-erb-ruby-code-to-slim-template/35752528#35752528", "title": "Convert erb ruby code to slim template", "body": "<p><code>&lt;%= ... &gt;</code> in Erb means to evaluate the expression inside, and include the result in the outer context. Thus if the rating would be 99, then <code>data-score=99</code> would become part of the html. That is fine.</p>\n\n<p>The generated output seems wrong. The trailing <code>&amp;gt;</code> should be inside a string, just as the opening counterpart <code>\"&lt;haml_loud</code>. And as jeffdill2 correctly pointed out, there is no need to use <code>haml_loud</code>. Just use:</p>\n\n<pre><code>.star-rating data-score=review.rating\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "is_accepted": true, "score": 1, "last_activity_date": 1456937542, "creation_date": 1456937542, "answer_id": 35753395, "question_id": 35752239, "link": "https://stackoverflow.com/questions/35752239/convert-erb-ruby-code-to-slim-template/35753395#35753395", "title": "Convert erb ruby code to slim template", "body": "<p>This will work for you:</p>\n\n<pre><code>.star-rating data-score=review.rating\n</code></pre>\n\n<p>Since you're (apparently) using Slim, not Haml, you don't need <code>haml_loud</code> at all.</p>\n"}], "owner": {"reputation": 2614, "user_id": 5247871, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/zqYrx.jpg?s=128&g=1", "display_name": "Chandra Shekhar", "link": "https://stackoverflow.com/users/5247871/chandra-shekhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 35753395, "answer_count": 2, "score": 1, "last_activity_date": 1456938924, "creation_date": 1456934521, "last_edit_date": 1456938841, "question_id": 35752239, "link": "https://stackoverflow.com/questions/35752239/convert-erb-ruby-code-to-slim-template", "title": "Convert erb ruby code to slim template", "body": "<p>Below is an erb ruby code which is want to convert in slim template</p>\n\n<pre><code>    &lt;div class=\"star-rating\" data-score= &lt;%= review.rating%&gt; &gt;&lt;/div&gt;\n</code></pre>\n\n<p>In above template i am confused as there are two equals to sign</p>\n\n<p>online converter is giving something like this</p>\n\n<pre><code>.star-rating data-score=\"&lt;haml_loud\"  review.rating &amp;gt;\n</code></pre>\n\n<p>But its not working</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "google-maps", "google-maps-api-3"], "comments": [{"owner": {"reputation": 88729, "user_id": 1353011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460d2e9d0a84c78e6a5c141a51eb3ab9?s=128&d=identicon&r=PG", "display_name": "Musa", "link": "https://stackoverflow.com/users/1353011/musa"}, "edited": false, "score": 0, "creation_date": 1456934127, "post_id": 35752032, "comment_id": 59177358, "body": "Noticed how you passed <code>busMarker</code> to create the callback function, pass <code>busInfo[i]</code> as well."}, {"owner": {"reputation": 125, "user_id": 5577031, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-SzjoleQRZrY/AAAAAAAAAAI/AAAAAAAAACo/DhGx8vtt2G4/photo.jpg?sz=128", "display_name": "Andrew Breunig", "link": "https://stackoverflow.com/users/5577031/andrew-breunig"}, "reply_to_user": {"reputation": 88729, "user_id": 1353011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460d2e9d0a84c78e6a5c141a51eb3ab9?s=128&d=identicon&r=PG", "display_name": "Musa", "link": "https://stackoverflow.com/users/1353011/musa"}, "edited": false, "score": 0, "creation_date": 1456935384, "post_id": 35752032, "comment_id": 59178293, "body": "that makes sense to me, but now I&#39;m getting an error message:  Uncaught SyntaxError: Unexpected token [  guessing this is a simple syntax error, but at wit&#39;s end..."}, {"owner": {"reputation": 88729, "user_id": 1353011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460d2e9d0a84c78e6a5c141a51eb3ab9?s=128&d=identicon&r=PG", "display_name": "Musa", "link": "https://stackoverflow.com/users/1353011/musa"}, "edited": false, "score": 1, "creation_date": 1456935725, "post_id": 35752032, "comment_id": 59178616, "body": "I hope you didn&#39;t use <code>busInfo[i]</code> as the parameter name"}, {"owner": {"reputation": 125, "user_id": 5577031, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-SzjoleQRZrY/AAAAAAAAAAI/AAAAAAAAACo/DhGx8vtt2G4/photo.jpg?sz=128", "display_name": "Andrew Breunig", "link": "https://stackoverflow.com/users/5577031/andrew-breunig"}, "reply_to_user": {"reputation": 88729, "user_id": 1353011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460d2e9d0a84c78e6a5c141a51eb3ab9?s=128&d=identicon&r=PG", "display_name": "Musa", "link": "https://stackoverflow.com/users/1353011/musa"}, "edited": false, "score": 1, "creation_date": 1456936123, "post_id": 35752032, "comment_id": 59178925, "body": "yeah, one would hope right?"}], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 5577031, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-SzjoleQRZrY/AAAAAAAAAAI/AAAAAAAAACo/DhGx8vtt2G4/photo.jpg?sz=128", "display_name": "Andrew Breunig", "link": "https://stackoverflow.com/users/5577031/andrew-breunig"}, "is_accepted": false, "score": 0, "last_activity_date": 1456936052, "creation_date": 1456936052, "answer_id": 35752878, "question_id": 35752032, "link": "https://stackoverflow.com/questions/35752032/set-unique-infowindow-content-on-click-for-each-of-several-unique-markers-using/35752878#35752878", "title": "Set unique infoWindow content on click for each of several unique markers using Google Maps", "body": "<p>@Musa, you are correct that I need to pass <code>busInfo[i]</code> as well. It took me a minute to figure out which function was sending the arguments and which was receiving them, but now I have it set up as follows:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>busInfo[i] = new google.maps.InfoWindow({\r\n  content: 'Bus number ' + busNum + ' is on Route ' + busRoute + '. The next stop is at ' + busStop + '.'\r\n});\r\n\r\ngoogle.maps.event.addListener(busMarker, 'click', (function(busMarker, busInfo) {\r\n  return function() {\r\n    infoWindow.setContent(busInfo.content);\r\n    infoWindow.open(map, busMarker);\r\n  }\r\n})(busMarker, busInfo[i]));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The other issue was that I was using <code>.setContent</code> to add the object <code>busInfo</code> into the window instead of its string attribute <code>.content</code>. Now the windows are displaying correctly.</p>\n\n<p>Thanks for your help!</p>\n"}], "owner": {"reputation": 125, "user_id": 5577031, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-SzjoleQRZrY/AAAAAAAAAAI/AAAAAAAAACo/DhGx8vtt2G4/photo.jpg?sz=128", "display_name": "Andrew Breunig", "link": "https://stackoverflow.com/users/5577031/andrew-breunig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 437, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456936052, "creation_date": 1456933993, "question_id": 35752032, "link": "https://stackoverflow.com/questions/35752032/set-unique-infowindow-content-on-click-for-each-of-several-unique-markers-using", "title": "Set unique infoWindow content on click for each of several unique markers using Google Maps", "body": "<p>I've built a bus-tracking application using Ruby on Rails that displays a user's location as well as the location of several nearby buses all on one map. Each bus has its own marker with an event listener that opens an info window on click.</p>\n\n<p>I want each info window to display a unique descriptor based on paramaters of the bus it's attached to. I'm creating each marker using a loop through every element in the array of buses, <code>displayBuses</code>, and assigning the corresponding element in the array of descriptors, <code>busInfo</code>.</p>\n\n<p>I've found a few articles here on Stack Overflow that model what I'm trying to do, some by creating multiple <code>infoWindows</code> and some by creating one <code>infoWindow</code> and using Google Maps' <code>setContent</code> function to update the descriptor.</p>\n\n<p>When I started out, I was trying to create a new marker, descriptor, and info window for each bus, but I wasn't getting any info windows. Next I tried to create one window and use <code>setContent</code> to update it each time, but I had <code>busInfo</code> as a string that updated each time; I was getting content in the info windows, but it was the same for each bus. I changed <code>busInfos</code> to an array to store a different string for each bus. Now\nmy code is creating the info windows properly, but it's not displaying the descriptors (each window pops up empty).</p>\n\n<p>Here is the relevant code:</p>\n\n<pre><code>var infoWindow = new google.maps.InfoWindow;\n\nvar busLatLng, busMarker, i;\n\nvar busInfos = [];\n\nfor (i = 0; i &lt; displayBuses.length; i++) {  \n    var busLat = displayBuses[i].LATITUDE;\n    var busLng = displayBuses[i].LONGITUDE;\n    var busNum = displayBuses[i].VEHICLE;\n    var busRoute = displayBuses[i].ROUTE;\n    var busStop = displayBuses[i].TIMEPOINT;\n\n    busLatLng = new google.maps.LatLng(busLat, busLng);\n\n    busMarker = new google.maps.Marker({\n        position: busLatLng,\n        map: map,\n        title: 'Bus number ' + busNum,\n        icon: busIcon,\n        animation: google.maps.Animation.BOUNCE\n    });\n\n    busInfos[i] = new google.maps.InfoWindow({\n            content: 'Bus number ' + busNum + ' is on Route ' + busRoute + '. The next stop is at ' + busStop + '.'\n    });\n\n    google.maps.event.addListener(busMarker, 'click', (function(busMarker) {\n         return function() {\n             infoWindow.setContent(busInfo[i]);\n             infoWindow.open(map, busMarker);\n         }\n    })(busMarker));\n}\n</code></pre>\n\n<p>And here's the complete locations.js.erb file:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// This is a manifest file that'll be compiled into application.js, which will include all the files\r\n// listed below.\r\n//\r\n// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,\r\n// or any plugin's vendor/assets/javascripts directory can be referenced here using a relative path.\r\n//\r\n// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\r\n// compiled file.\r\n//\r\n// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details\r\n// about supported directives.\r\n//\r\n//= require jquery\r\n//= require jquery_ujs\r\n//= require bootstrap-sprockets\r\n//= require_tree .\r\n\r\n$(document).ready(function() {\r\n\tvar currentLat = gon.current_lat;\r\n\tvar currentLng = gon.current_lng;\r\n\tvar displayBuses = gon.display_buses;\r\n\r\n\tvar currentLatLng = new google.maps.LatLng(currentLat, currentLng);\r\n\r\n\tfunction initMap() {\r\n\t\tvar map = new google.maps.Map(document.getElementById('map'), {\r\n\t\t\tcenter: currentLatLng,\r\n\t\t\tzoom: 15,\r\n\t\t\tscrollwheel: false\r\n\t\t});\r\n\r\n\t\tsetMarkers(map);\r\n\t}\r\n\r\n\tfunction setMarkers(map) {\r\n\t\tvar userMarker = new google.maps.Marker({\r\n\t\t\tposition: currentLatLng,\r\n\t\t\tmap: map,\r\n\t\t\ttitle: 'User',\r\n\t\t\tanimation: google.maps.Animation.DROP\r\n\t\t});\r\n\r\n\t\tvar userInfo = new google.maps.InfoWindow({\r\n\t\t\tcontent: 'You are here.'\r\n\t\t});\r\n\r\n\t\tgoogle.maps.event.addListener(userMarker, 'click', function() {\r\n\t\t\tuserInfo.open(map, userMarker);\r\n\t\t});\r\n\r\n\t\tvar imgHt = 30;\r\n\t\tvar imgWd = imgHt*1.5;\r\n\r\n\t\tvar busIcon = {\r\n    \turl: \"&lt;%= asset_path 'bus-marker.png' %&gt;\",\r\n      scaledSize: new google.maps.Size(imgHt, imgWd),\r\n      origin: new google.maps.Point(0, 0),\r\n      anchor: new google.maps.Point(imgWd/2, imgHt)\r\n    };\r\n\r\n\t\tvar infoWindow = new google.maps.InfoWindow;\r\n\r\n\t\tvar busLatLng, busMarker, i;\r\n\r\n\t\tvar busInfos = [];\r\n\r\n\t\tfor (i = 0; i &lt; displayBuses.length; i++) {  \r\n\t    var busLat = displayBuses[i].LATITUDE;\r\n\t\t\tvar busLng = displayBuses[i].LONGITUDE;\r\n\t\t\tvar busNum = displayBuses[i].VEHICLE;\r\n\t\t\tvar busRoute = displayBuses[i].ROUTE;\r\n\t\t\tvar busStop = displayBuses[i].TIMEPOINT;\r\n\r\n\t    busLatLng = new google.maps.LatLng(busLat, busLng);\r\n\r\n\t    busMarker = new google.maps.Marker({\r\n      \tposition: busLatLng,\r\n\t\t\t\tmap: map,\r\n\t\t\t\ttitle: 'Bus number ' + busNum,\r\n\t\t\t\ticon: busIcon,\r\n\t\t\t\tanimation: google.maps.Animation.BOUNCE\r\n\t    });\r\n\r\n\t    busInfos[i] = new google.maps.InfoWindow({\r\n\t\t\t\tcontent: 'Bus number ' + busNum + ' is on Route ' + busRoute + '. The next stop is at ' + busStop + '.'\r\n\t\t\t});\r\n\r\n\t    google.maps.event.addListener(busMarker, 'click', (function(busMarker) {\r\n\t         return function() {\r\n\t             infoWindow.setContent(busInfo[i]);\r\n\t             infoWindow.open(map, busMarker);\r\n\t         }\r\n\t    })(busMarker));\r\n\t\t}\r\n\t};\r\n\r\n\tgoogle.maps.event.addDomListener(window, 'load', initMap);\r\n});</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I'm using the gem <code>gon</code> to pull ruby variables in from the controller, but after tinkering with the JS console I feel confident that those are coming in correctly. I just can't figure out why changing <code>busInfos</code> to an array is causing it not to display properly. Any help is appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1456934991, "post_id": 35751880, "comment_id": 59177999, "body": "When asking questions in Stack Overflow, please avoid text speak like &quot;smth&quot; and try to stick to proper punctuation, grammar and formatting. It makes your question easier to read, and thus makes them more likely to get answers helping you and others."}], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 0, "last_activity_date": 1456934871, "last_edit_date": 1495539902, "creation_date": 1456934871, "answer_id": 35752392, "question_id": 35751880, "link": "https://stackoverflow.com/questions/35751880/error-when-loading-caldav-icloud-gem/35752392#35752392", "title": "Error when loading caldav-icloud gem", "body": "<p>To make any gem available to your Rails app, you have to add it to the <code>Gemfile</code> like this:</p>\n\n<pre><code>gem \"caldav-icloud\"\n</code></pre>\n\n<p>It is not enough to just install it.</p>\n\n<p><a href=\"https://stackoverflow.com/a/14073529/421705\">This answer</a> goes into a bit more detail what bundler and the <code>Gemfile</code> do and why this is required.</p>\n"}], "owner": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 35752392, "answer_count": 1, "score": 0, "last_activity_date": 1456935317, "creation_date": 1456933569, "last_edit_date": 1456935317, "question_id": 35751880, "link": "https://stackoverflow.com/questions/35751880/error-when-loading-caldav-icloud-gem", "title": "Error when loading caldav-icloud gem", "body": "<p>I have installed the <code>caldav-icloud</code> gem. Then I've required it in my <code>environment.rb</code></p>\n\n<pre><code>require \"caldav-icloud\"\n</code></pre>\n\n<p>But if I do <code>rails s</code> I get this error:</p>\n\n<pre><code>/lib/ruby/gems/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:274:in `require': cannot load such file -- caldav-icloud (LoadError)\n</code></pre>\n\n<p>How can I solve it?\nThanks</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1456933873, "last_edit_date": 1456933873, "creation_date": 1456933786, "answer_id": 35751964, "question_id": 35751839, "link": "https://stackoverflow.com/questions/35751839/keep-characters-and-whitespace-in-ruby-method/35751964#35751964", "title": "Keep characters and whitespace in ruby method", "body": "<p>Just add to both <code>if</code> blocks an <code>else</code> condition like this:</p>\n\n<pre><code>  if ('a'..'z').include? i\n    # ...\n  elsif ('A'..'Z').include? i\n    # ...\n  else\n    results &lt;&lt; i\n  end\n</code></pre>\n\n<p>Which will add all non A-z characters untouched to the output.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1456938838, "last_edit_date": 1456938838, "creation_date": 1456938517, "answer_id": 35753758, "question_id": 35751839, "link": "https://stackoverflow.com/questions/35751839/keep-characters-and-whitespace-in-ruby-method/35753758#35753758", "title": "Keep characters and whitespace in ruby method", "body": "<p>I've noticed some issues with your code:</p>\n\n<h3>Broken replacement hash</h3>\n\n<p>This is the biggest problem - your replacement hash is broken. I'm using a smaller alphabet for demonstration purposes, but this applies to 26 characters as well:</p>\n\n<pre><code>uppercase = Array(\"A\"..\"C\")\nlowercase = Array(\"a\"..\"c\")\nalphabet = uppercase + lowercase\n#=&gt; [\"A\", \"B\", \"C\", \"a\", \"b\", \"c\"]\n</code></pre>\n\n<p>You build the replacement hash via:</p>\n\n<pre><code>x = 1\nkey = Hash[alphabet.zip(alphabet.rotate(x))]\n#=&gt; {\"A\"=&gt;\"B\", \"B\"=&gt;\"C\", \"C\"=&gt;\"a\", \"a\"=&gt;\"b\", \"b\"=&gt;\"c\", \"c\"=&gt;\"A\"}\n</code></pre>\n\n<p><code>\"C\"=&gt;\"a\"</code> and <code>\"c\"=&gt;\"A\"</code> are referring to the wrong character case. This happens because you rotate the entire alphabet at once:</p>\n\n<pre><code>alphabet            #=&gt; [\"A\", \"B\", \"C\", \"a\", \"b\", \"c\"]\nalphabet.rotate(x)  #=&gt; [\"B\", \"C\", \"a\", \"b\", \"c\", \"A\"]\n</code></pre>\n\n<p>Instead. you have to rotate the uppercase and lowercase letter <em>separately</em>:</p>\n\n<pre><code>uppercase           #=&gt; [\"A\", \"B\", \"C\"]\nuppercase.rotate(x) #=&gt; [\"B\", \"C\", \"A\"]\n\nlowercase           #=&gt; [\"a\", \"b\", \"c\"]\nlowercase.rotate(x) #=&gt; [\"B\", \"C\", \"A\"]\n</code></pre>\n\n<p>and concatenate the rotated parts afterwards. Either:</p>\n\n<pre><code>key = Hash[uppercase.zip(uppercase.rotate(x)) + lowercase.zip(lowercase.rotate(x))]\n#=&gt; {\"A\"=&gt;\"B\", \"B\"=&gt;\"C\", \"C\"=&gt;\"A\", \"a\"=&gt;\"b\", \"b\"=&gt;\"c\", \"c\"=&gt;\"a\"}\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>key = Hash[(uppercase + lowercase).zip(uppercase.rotate(x) + lowercase.rotate(x))]\n#=&gt; {\"A\"=&gt;\"B\", \"B\"=&gt;\"C\", \"C\"=&gt;\"A\", \"a\"=&gt;\"b\", \"b\"=&gt;\"c\", \"c\"=&gt;\"a\"}\n</code></pre>\n\n<h3>Replacing the characters</h3>\n\n<p>Back to a full alphabet:</p>\n\n<pre><code>uppercase = Array(\"A\"..\"Z\")\nlowercase = Array(\"a\"..\"z\")\nx = 10\nkey = Hash[uppercase.zip(uppercase.rotate(x)) + lowercase.zip(lowercase.rotate(x))]\n</code></pre>\n\n<p>Having a working replacement hash makes replacing the characters almost trivial:</p>\n\n<pre><code>string = \"Hello, World!\"\nresult = \"\"\nstring.each_char { |char| result &lt;&lt; key.fetch(char, char) }\nresult\n#=&gt; \"Rovvy, Gybvn!\"\n</code></pre>\n\n<p>I've changed <code>result</code> from an array to a string. It also has a <a href=\"http://ruby-doc.org/core-2.3.0/String.html#method-i-3C-3C\" rel=\"nofollow\"><code>&lt;&lt;</code></a> method and you don't have to <code>join</code> it afterwards.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-fetch\" rel=\"nofollow\"><code>Hash#fetch</code></a> works almost like <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-5B-5D\" rel=\"nofollow\"><code>Hash#[]</code></a>, but you can pass a default value that is returned if the key is not found in the hash:</p>\n\n<pre><code> key.fetch(\"H\", \"H\") #=&gt; \"R\" (replacement value)\n key.fetch(\"!\", \"!\") #=&gt; \"!\" (default value)\n</code></pre>\n\n<h3>Handling encryption / decryption</h3>\n\n<p>You're duplicating a lot of code to handle the decryption part. But there's a much easier way - just reverse the direction:</p>\n\n<pre><code>rot(10, \"Hello\")        #=&gt; \"Rovvy\"\nrot(10, \"Rovvy\", false) #=&gt; \"Hello\"\nrot(-10, \"Rovvy\")       #=&gt; \"Hello\"\n</code></pre>\n\n<p>So within your code, you can write:</p>\n\n<pre><code>x = -x unless encrypt\n</code></pre>\n\n<h3>Putting it all together</h3>\n\n<pre><code>def rot(x, string, encrypt = true)\n  uppercase = Array(\"A\"..\"Z\")\n  lowercase = Array(\"a\"..\"z\")\n  x = -x unless encrypt\n  key = Hash[uppercase.zip(uppercase.rotate(x)) + lowercase.zip(lowercase.rotate(x))]\n  result = \"\"\n  string.each_char { |char| result &lt;&lt; key.fetch(char, char) }\n  result\nend\n\nrot(10, \"Hello, World!\")        #=&gt; \"Rovvy, Gybvn!\"\nrot(10, \"Rovvy, Gybvn!\", false) #=&gt; \"Hello, World!\"\n</code></pre>\n"}], "owner": {"reputation": 1353, "user_id": 3255845, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/NlYHy.png?s=128&g=1", "display_name": "luke", "link": "https://stackoverflow.com/users/3255845/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 35751964, "answer_count": 2, "score": 0, "last_activity_date": 1456938838, "creation_date": 1456933449, "question_id": 35751839, "link": "https://stackoverflow.com/questions/35751839/keep-characters-and-whitespace-in-ruby-method", "title": "Keep characters and whitespace in ruby method", "body": "<p>Building out a Rot method to solve encryption. I have something that is working but takes out whitespaces and any characters that are included. Was going to use <code>bytes</code> instead of <code>chars</code> then turn it back into a string once I have the byte code but I can't seem to get it working. How would you go about keeping those in place from this code:</p>\n\n<p>code</p>\n\n<pre><code>def rot(x, string, encrypt=true)\n  alphabet = Array(\"A\"..\"Z\") + Array(\"a\"..\"z\")\n  results = []\n\n  if encrypt == true\n    key = Hash[alphabet.zip(alphabet.rotate(x))]\n    string.chars.each do |i|\n      if ('a'..'z').include? i\n        results &lt;&lt; key.fetch(i).downcase\n      elsif ('A'..'Z').include? i\n        results &lt;&lt; key.fetch(i).upcase\n      end\n    end\n    return results.join\n  else\n    key_false = Hash[alphabet.zip(alphabet.rotate(26 - x))]\n    string.chars.each do |i|\n      if ('a'..'z').include? i\n        results &lt;&lt; key_false.fetch(i).downcase\n      elsif ('A'..'Z').include? i\n        results &lt;&lt; key_false.fetch(i).upcase\n      end\n    end\n    return results.join\n  end\nend\n\nputs rot(10, \"Hello, World\")\n=&gt; RovvyGybvn\nputs rot(10, \"Rovvy, Gybvn\", false)\n=&gt; HelloWorld\n</code></pre>\n\n<p>Thanks for your help in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "module", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 851, "user_id": 7034540, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209364272256116/picture?type=large", "display_name": "aRtoo", "link": "https://stackoverflow.com/users/7034540/artoo"}, "edited": false, "score": 0, "creation_date": 1560445363, "post_id": 35751646, "comment_id": 99748703, "body": "this worked for me too. but is there an elegant way of solving it? should I add my class on a module? @guitarman"}], "tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": true, "score": 3, "last_activity_date": 1456933717, "last_edit_date": 1456933717, "creation_date": 1456933006, "answer_id": 35751646, "question_id": 35751592, "link": "https://stackoverflow.com/questions/35751592/module-automatically-adding-namespace-to-a-method-being-called/35751646#35751646", "title": "Module automatically adding namespace to a method being called", "body": "<p>Try:</p>\n\n<pre><code>::BAZ::Request.execute(123)\n</code></pre>\n\n<p>The keyword is \"constant lookup operator\". I assume <code>BAZ</code> isn't wrapped into another class or module, so you need to look for it on the topmost level. Therefore you prepend <code>::</code>. </p>\n\n<p>And now you understand why the request (<code>BAZ::Request</code>) needs to be within <code>BAZ</code>.</p>\n"}], "owner": {"reputation": 894, "user_id": 3638724, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/778a344a5b886e6897657b5ac1f48d1e?s=128&d=identicon&r=PG&f=1", "display_name": "xeroshogun", "link": "https://stackoverflow.com/users/3638724/xeroshogun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 1, "accepted_answer_id": 35751646, "answer_count": 1, "score": 2, "last_activity_date": 1456933717, "creation_date": 1456932895, "question_id": 35751592, "link": "https://stackoverflow.com/questions/35751592/module-automatically-adding-namespace-to-a-method-being-called", "title": "Module automatically adding namespace to a method being called", "body": "<p>I'm trying to create a gem, my gem requires a different gem that I have added into the gemspec. </p>\n\n<p>My issue is when I try to call a method inside the code, ruby automatically adds the module namespace to the method I am calling, then I get an uninitialized constant error.  I put a basic example of what is going on below.</p>\n\n<p>lib/example_gem.rb</p>\n\n<pre><code>module FooModule\n\n  def bar\n    # this is the method I am trying to run\n    BAZ::Request.execute(123)\n  end\nend\n\nclass Test\n  include FooModule    \nend\n\nx = Test.new\nx.bar\n\n=&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; uninitialized constant FooModule::Baz (NameError)\n</code></pre>\n\n<p>I'm not trying to call FooModule::Baz, I want to call BAZ::Request.execute(123).  Any help would be appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "actioncable"], "comments": [{"owner": {"reputation": 313, "user_id": 3023421, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/549ff19f999b1ab418bcdda2afd9cbef?s=128&d=identicon&r=PG&f=1", "display_name": "user3023421", "link": "https://stackoverflow.com/users/3023421/user3023421"}, "edited": false, "score": 0, "creation_date": 1457393092, "post_id": 35751464, "comment_id": 59377811, "body": "You could try using the archive branch: gem &#39;actioncable&#39;, github: &#39;rails/actioncable&#39;, branch: &#39;archive&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 614, "user_id": 4389250, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-F8rJHdQAUgY/AAAAAAAAAAI/AAAAAAAAAJQ/114BANdH3Hs/photo.jpg?sz=128", "display_name": "Sebastian Delgado", "link": "https://stackoverflow.com/users/4389250/sebastian-delgado"}, "is_accepted": false, "score": 0, "last_activity_date": 1457398962, "creation_date": 1457398962, "answer_id": 35857093, "question_id": 35751464, "link": "https://stackoverflow.com/questions/35751464/actioncable-without-upgrading-to-rails-5-beta/35857093#35857093", "title": "ActionCable without upgrading to Rails 5 beta", "body": "<p>You can have both GemSets, so you can use rails 4 and rails 5 whenever you want.\nFirst, update the ruby gem manager by <code>$ gem update --system</code>, install Nokogiri if you haven't <code>$ gem install nokogiri</code>.</p>\n\n<p>Now lets set your rails 4 GemSet (you might have to update ruby, it will tell you if you need to)</p>\n\n<pre><code>$ rvm use ruby-2.3.0@rails4.2 --create\n$ gem install rails --version=4.2.5\n$ rails -v\n</code></pre>\n\n<p>your rails version should be 4.2.5 at this point.</p>\n\n<p>Now lets set your rails 5 GemSet</p>\n\n<pre><code>$ rvm use ruby-2.3.0@rails5.0 --create\n$ gem install rails --pre\n$ rails -v\n</code></pre>\n\n<p>your rails version should be 5 beta3 at this point.</p>\n\n<p>We are done, now you only need to change between GemSets, depending on your needs, by doing this.</p>\n\n<p>for rails 4 use = <code>$ rvm use ruby-2.3.0@rails4.2</code>\nfor rails 5 use = <code>$ rvm use ruby-2.3.0@rails5.0</code></p>\n\n<p>Now, you can use and experiment rails 5 without risking your rails 4 gems and stuff.</p>\n\n<p>You can do exactly the same for other Rails versions if you want.</p>\n"}, {"tags": [], "owner": {"reputation": 1339, "user_id": 6295641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tXMWi.jpg?s=128&g=1", "display_name": "Karthick Nagarajan", "link": "https://stackoverflow.com/users/6295641/karthick-nagarajan"}, "is_accepted": false, "score": 0, "last_activity_date": 1481890449, "creation_date": 1481890449, "answer_id": 41184188, "question_id": 35751464, "link": "https://stackoverflow.com/questions/35751464/actioncable-without-upgrading-to-rails-5-beta/41184188#41184188", "title": "ActionCable without upgrading to Rails 5 beta", "body": "<p>I have same issue,But i solved.just check <a href=\"https://www.youtube.com/watch?v=D3bbNgHUlX8\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>Just try your rails console</p>\n\n<p>check your rails version <code>rails -v</code></p>\n\n<p>may be <code>rails (4.2.7.1)</code></p>\n\n<p>Then you need to check gem list, i mean <code>gem list -l</code></p>\n\n<p>Now you can see your all gem with versions.</p>\n\n<p>Then you need to instsll <code>gem install rails -v 5.0.0beta2</code></p>\n\n<p>once installed rails check gem list, <code>gem list -l</code></p>\n\n<p>Then you can see <code>rails (5.0.0.rc2, 5.0.0.beta2, 4.2.7.1)</code></p>\n\n<p>You successfully installed <code>rails 5.0.0</code></p>\n\n<p>Then you do <code>bundle update</code></p>\n\n<p>Update all gem and supporting rails 5.0.0,this is work for me just try this.</p>\n"}], "owner": {"reputation": 93, "user_id": 4529310, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42d2f0f5ab4a6d546f3f8a873f5b2a9a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/4529310/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1481890449, "creation_date": 1456932555, "question_id": 35751464, "link": "https://stackoverflow.com/questions/35751464/actioncable-without-upgrading-to-rails-5-beta", "title": "ActionCable without upgrading to Rails 5 beta", "body": "<p>I currently have a Rails app running on 4.2.5, and I want to use ActionCable without having to upgrade the whole thing to the Rails 5.0.0.beta3 version and risk breaking all of the other gems.</p>\n\n<p>Following guides I've seen on the internet, I've tried\n<code>\ngem 'actioncable', github: 'rails/actioncable'\n</code>\nwhich doesn't work because the ActionCable repo has been merged into the Rails repo. I even tried\n<code>\ngem 'actioncable', github: 'rails/rails'\n</code>\nbut this doesn't seem to work of the re-numbering of the versions that happened when ActionCable merged into Rails. (The only version below 5.0.0.beta* is the 0.0.0, which seems to be an empty gem.)</p>\n\n<p>I also tried setting the source to rubygems.org in hopes of finding an older pre-merged version, but was unsuccessful.</p>\n\n<p>What can I do to integrate ActionCable into my 4.2.5 project without upgrading to Rails 5?</p>\n\n<p>Conversely, when could we anticipate the first stable release of Rails 5? :)</p>\n"}, {"tags": ["ruby", "f#"], "comments": [{"owner": {"reputation": 5487, "user_id": 4882032, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9842c6c6a5125696e660a5b490d3303a?s=128&d=identicon&r=PG&f=1", "display_name": "Ringil", "link": "https://stackoverflow.com/users/4882032/ringil"}, "edited": false, "score": 0, "creation_date": 1456944086, "post_id": 35751382, "comment_id": 59184224, "body": "Seems to be similar to this question: <a href=\"http://stackoverflow.com/questions/8064016/how-to-partition-a-list-with-a-given-group-size\" title=\"how to partition a list with a given group size\">stackoverflow.com/questions/8064016/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "edited": false, "score": 0, "creation_date": 1456965229, "post_id": 35751887, "comment_id": 59195073, "body": "I was looking at the F# docs and can&#39;t find where I specify the version of F# I want to use:   <a href=\"https://msdn.microsoft.com/en-us/library/ee353738.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ee353738.aspx</a>  I&#39;m going to guess this is for F# 3.0 but I just can&#39;t find where I can specify F# 4.0"}, {"owner": {"reputation": 46011, "user_id": 162396, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6a57d6a4d1d19991243d3afa1294fa6e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/162396/daniel"}, "reply_to_user": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "edited": false, "score": 0, "creation_date": 1457017278, "post_id": 35751887, "comment_id": 59222661, "body": "Yes, it appears MSDN hasn&#39;t been updated for F# 4.0 (thus my link to the source code)."}], "tags": [], "owner": {"reputation": 46011, "user_id": 162396, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6a57d6a4d1d19991243d3afa1294fa6e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/162396/daniel"}, "is_accepted": true, "score": 3, "last_activity_date": 1456933585, "creation_date": 1456933585, "answer_id": 35751887, "question_id": 35751382, "link": "https://stackoverflow.com/questions/35751382/equivalent-of-rubys-enumerableeach-slice-method-in-fsharp/35751887#35751887", "title": "Equivalent of Ruby&#39;s Enumerable#each_slice method in FSharp", "body": "<p>You're looking for <a href=\"https://github.com/Microsoft/visualfsharp/blob/95fb299ab8588b112246f986148de9da8dbc9a4b/src/fsharp/FSharp.Core/local.fs#L560-L568\" rel=\"nofollow\"><code>List.chunkBySize</code></a>, which was added in F# 4.0. There are also <code>Seq</code> and <code>Array</code> variants.</p>\n"}], "owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 35751887, "answer_count": 1, "score": 2, "last_activity_date": 1456933585, "creation_date": 1456932331, "question_id": 35751382, "link": "https://stackoverflow.com/questions/35751382/equivalent-of-rubys-enumerableeach-slice-method-in-fsharp", "title": "Equivalent of Ruby&#39;s Enumerable#each_slice method in FSharp", "body": "<p>I'm currently writing a bit of F#. I've created a method that is the equivalent of Ruby's <code>Enumerable#each_slice</code> method and was wondering if somebody has a better (i.e. more elegant, more concise, more readable) solution.</p>\n\n<p>Here it is:</p>\n\n<pre><code>let rec slicesBySize size list =\n    match list with\n    | [] -&gt; [] // case needed for type inference\n    | list when list.Length &lt; size -&gt; [list]\n    | _ -&gt;\n        let first = list |&gt; Seq.take size |&gt; List.ofSeq\n        let rest = list |&gt; Seq.skip size |&gt; List.ofSeq\n\n        [first] @ slicesBySize size rest\n</code></pre>\n\n<p>Thanks for any and all feedback/help.</p>\n"}, {"tags": ["ruby", "gradle", "continuous-integration"], "comments": [{"owner": {"reputation": 4786, "user_id": 907201, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7E2LT.png?s=128&g=1", "display_name": "gmaliar", "link": "https://stackoverflow.com/users/907201/gmaliar"}, "edited": false, "score": 0, "creation_date": 1456932153, "post_id": 35751042, "comment_id": 59175788, "body": "<code>bundler</code> for everything"}, {"owner": {"reputation": 23, "user_id": 5266269, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/786841a6a36afa1e337b4638ea4b24bc?s=128&d=identicon&r=PG&f=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/5266269/kent"}, "reply_to_user": {"reputation": 4786, "user_id": 907201, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7E2LT.png?s=128&g=1", "display_name": "gmaliar", "link": "https://stackoverflow.com/users/907201/gmaliar"}, "edited": false, "score": 0, "creation_date": 1456942639, "post_id": 35751042, "comment_id": 59183319, "body": "Could you please be more specific. I know bundler can do a lot. But could you give me flow here. Like I have a gem that I want to develop. How to make sure the CI process it automatic and right."}], "owner": {"reputation": 23, "user_id": 5266269, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/786841a6a36afa1e337b4638ea4b24bc?s=128&d=identicon&r=PG&f=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/5266269/kent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456931477, "creation_date": 1456931477, "question_id": 35751042, "link": "https://stackoverflow.com/questions/35751042/can-i-use-gradle-to-build-a-native-ruby-gem-not-jruby", "title": "Can I use gradle to build a native ruby gem (not Jruby)", "body": "<p>I found a lot of examples to use gradle Jruby to build gems.\nI am wondering if gradle has this support to build native ruby gems and help deploy to the assigned repo (artifactory for example)</p>\n\n<p>Or please let me know what is the best to use for building Gems and deploying Gems in the CI</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "sinatra", "sql-injection"], "comments": [{"owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 0, "creation_date": 1456931319, "post_id": 35750919, "comment_id": 59175161, "body": "How do your queries look? If you don&#39;t build them on the fly, but set variables, you might not even need that..."}, {"owner": {"reputation": 44067, "user_id": 3470178, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/655943089/picture?type=large", "display_name": "Juan Carlos Oropeza", "link": "https://stackoverflow.com/users/3470178/juan-carlos-oropeza"}, "edited": false, "score": 0, "creation_date": 1456931710, "post_id": 35750919, "comment_id": 59175474, "body": "I think is better use parameters."}, {"owner": {"reputation": 172, "user_id": 4503232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/z2jpl.png?s=128&g=1", "display_name": "FredyK", "link": "https://stackoverflow.com/users/4503232/fredyk"}, "edited": false, "score": 0, "creation_date": 1456932396, "post_id": 35750919, "comment_id": 59176013, "body": "The question is targeting security of the web application, I just saw that in ActiveRecord we can use different  Sanitize methods, but as I also have Sinatra apps I wandering how to add safety to the application"}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1456934595, "post_id": 35750919, "comment_id": 59177677, "body": "Perhaps consider adding the Sinatra tag.  This is not really a rails question as string values are automatically sanitized by Active Record."}], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 6, "last_activity_date": 1456936656, "last_edit_date": 1456936656, "creation_date": 1456935939, "answer_id": 35752834, "question_id": 35750919, "link": "https://stackoverflow.com/questions/35750919/is-string-sanitize-the-best-way-to-protect-from-sql-injection-in-rails-or-sinat/35752834#35752834", "title": "Is String.sanitize, the best way to protect from SQL injection in rails or sinatra apps", "body": "<p>To protect against SQL injections, you should us prepared statements. About all high-level database adapters offer capabilities to use and properly escape variables. In ActiveRecord, this looks like this:</p>\n\n<pre><code>value = \"O'Brian\"\nPerson.where(name: value).to_sql\n# =&gt; \"SELECT `people`.* FROM `people`  WHERE `people`.`name` = 'O\\\\'Brian'\"\n</code></pre>\n\n<p>Other database adapters like Sequel or DataMapper have similar capabilities.</p>\n\n<p>When using a plain database adapter like <code>pg</code> or <code>mysql2</code>, you can use plain prepared statements on the database level. </p>\n\n<p>With mysql2, this can look like this:</p>\n\n<pre><code>value = \"O'Brian\"\nstatement = @client.prepare(\"SELECT * FROM people WHERE name = ?\")\nresult = statement.execute(value)\n</code></pre>\n\n<p>Alternatively, all adapters offer database-specific string escape methods. But you should generally stick to prepared statements as they are safer to use when you just don't attempt to reason about escaping but delegate all of this to a library which does this consistently.</p>\n\n<p>As a final note about the <code>sanitize</code> method and the <code>sanitize</code> gem, they are <em>not intended</em> for escaping SQL fragments and won't save you from SQL injections when used that way. The sanitize gem is used to ensure that HTML code only contains safe whitelisted tags and attributes. It has nothing to do with escaping SQL and will result in vulnerable code if used that way!</p>\n"}], "owner": {"reputation": 172, "user_id": 4503232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/z2jpl.png?s=128&g=1", "display_name": "FredyK", "link": "https://stackoverflow.com/users/4503232/fredyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 0, "accepted_answer_id": 35752834, "answer_count": 1, "score": 1, "last_activity_date": 1456940163, "creation_date": 1456931157, "last_edit_date": 1456940163, "question_id": 35750919, "link": "https://stackoverflow.com/questions/35750919/is-string-sanitize-the-best-way-to-protect-from-sql-injection-in-rails-or-sinat", "title": "Is String.sanitize, the best way to protect from SQL injection in rails or sinatra apps", "body": "<p>Is string.sanitize the best way to protect from sql injection.</p>\n\n<p>Do we need to install the Sanitize gem for it\nor is there a better way?</p>\n\n<pre><code>value = \"O'Brian\"\nvalue.sanitize =&gt;\"O\\'Brian\"\nor \nvalue.escape =&gt;\"O\\'Brian\"\n</code></pre>\n\n<p>It s probably included by default in Rails 5 , but what about using sinatra.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 0, "creation_date": 1456928414, "post_id": 35749676, "comment_id": 59172717, "body": "isn&#39;t the error referring to the other <code>assert_select</code>? <code>assert_select user_path(user), :text =&gt; &#39;delete&#39;</code>"}, {"owner": {"reputation": 602, "user_id": 5868718, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UTWKj.png?s=128&g=1", "display_name": "robsstackoverflow", "link": "https://stackoverflow.com/users/5868718/robsstackoverflow"}, "edited": false, "score": 0, "creation_date": 1456934226, "post_id": 35749676, "comment_id": 59177424, "body": "Chapter 9: Section 9.4.3"}], "answers": [{"comments": [{"owner": {"reputation": 602, "user_id": 5868718, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UTWKj.png?s=128&g=1", "display_name": "robsstackoverflow", "link": "https://stackoverflow.com/users/5868718/robsstackoverflow"}, "edited": false, "score": 0, "creation_date": 1456934618, "post_id": 35750251, "comment_id": 59177689, "body": "Hey Meier, thanks for your answer. Gave that a try no luck, same error message.   Combined it with SickLickWill&#39;s syntax correction suggestion now receiving:     <code>1) Error:        UsersIndexTest#test_index_as_admin_including_pagination_and_&zwnj;&#8203;delete_links:      URI::InvalidURIError: bad URI(is not URI?):          http:&#47;&#47;www.example.com:80destroy          test&#47;integration&#47;users_index_test.rb:24:in </code>block (2 levels) in         &lt;class:UsersIndexTest&gt;&#39;          test/integration/users_index_test.rb:23:in <code>block in        &lt;class:UsersIndexTest&gt;&#39; </code>"}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "reply_to_user": {"reputation": 602, "user_id": 5868718, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UTWKj.png?s=128&g=1", "display_name": "robsstackoverflow", "link": "https://stackoverflow.com/users/5868718/robsstackoverflow"}, "edited": false, "score": 0, "creation_date": 1456964860, "post_id": 35750251, "comment_id": 59194960, "body": "Ok, my suggestion was the syntax for functional tests, for your integration test your syntax should work."}, {"owner": {"reputation": 602, "user_id": 5868718, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UTWKj.png?s=128&g=1", "display_name": "robsstackoverflow", "link": "https://stackoverflow.com/users/5868718/robsstackoverflow"}, "edited": false, "score": 0, "creation_date": 1457011554, "post_id": 35750251, "comment_id": 59218115, "body": "Any additional ideas? Still really stuck here.   If not, would you advise continuing on and ignoring the bug/test for now?"}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "reply_to_user": {"reputation": 602, "user_id": 5868718, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UTWKj.png?s=128&g=1", "display_name": "robsstackoverflow", "link": "https://stackoverflow.com/users/5868718/robsstackoverflow"}, "edited": false, "score": 0, "creation_date": 1457013152, "post_id": 35750251, "comment_id": 59219361, "body": "Just the opposite: learn to use a debugger. check what delete returns. Check how you can access the status code. check that your destroy method is run. This will take time, but you really learn something."}, {"owner": {"reputation": 602, "user_id": 5868718, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UTWKj.png?s=128&g=1", "display_name": "robsstackoverflow", "link": "https://stackoverflow.com/users/5868718/robsstackoverflow"}, "edited": false, "score": 0, "creation_date": 1457055213, "post_id": 35750251, "comment_id": 59244171, "body": "Hey Meier, I think I found the issue, my assert_select was failing.   So I am attempting to write a new assert_select statement that targets an &lt;a&gt; tag which comes just after another &lt;a&gt; tag both with the same href.  Tried adding and selecting a class=&quot;user&quot; but keep getting error message.   See the above edits."}], "tags": [], "owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "is_accepted": false, "score": 0, "last_activity_date": 1456929496, "creation_date": 1456929496, "answer_id": 35750251, "question_id": 35749676, "link": "https://stackoverflow.com/questions/35749676/assert-difference-rails-test-failing-to-verify-user-deleted-but-seems-to-work-in/35750251#35750251", "title": "Assert_Difference Rails Test Failing to Verify User Deleted but seems to Work in App?", "body": "<p>So it looks like that the test is not correctly calling the destroy action\nTry it like this:</p>\n\n<pre><code>delete :destroy, id: @non_admin.id\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 602, "user_id": 5868718, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UTWKj.png?s=128&g=1", "display_name": "robsstackoverflow", "link": "https://stackoverflow.com/users/5868718/robsstackoverflow"}, "edited": false, "score": 0, "creation_date": 1456934890, "post_id": 35750849, "comment_id": 59177906, "body": "Hi SickLickWill!   Thanks for your suggestion. Gave it a try, same error was returned.   Any suggestions and/or additional code you think could help?   Thanks!"}], "tags": [], "owner": {"reputation": 196, "user_id": 3753556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d6d6f0885840b1c5bdc043358dbc1fc?s=128&d=identicon&r=PG&f=1", "display_name": "SickLickWill", "link": "https://stackoverflow.com/users/3753556/sicklickwill"}, "is_accepted": false, "score": 0, "last_activity_date": 1456930962, "creation_date": 1456930962, "answer_id": 35750849, "question_id": 35749676, "link": "https://stackoverflow.com/questions/35749676/assert-difference-rails-test-failing-to-verify-user-deleted-but-seems-to-work-in/35750849#35750849", "title": "Assert_Difference Rails Test Failing to Verify User Deleted but seems to Work in App?", "body": "<p>You have a small syntax error that is likely breaking your test on line 19:</p>\n\n<pre><code>assert_select user_path(user), :text =&gt; 'delete'\n</code></pre>\n\n<p>This should be:</p>\n\n<pre><code>assert_select user_path(@user), :text =&gt; 'delete'\n</code></pre>\n"}], "owner": {"reputation": 602, "user_id": 5868718, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UTWKj.png?s=128&g=1", "display_name": "robsstackoverflow", "link": "https://stackoverflow.com/users/5868718/robsstackoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 438, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1457367721, "creation_date": 1456928118, "last_edit_date": 1457367721, "question_id": 35749676, "link": "https://stackoverflow.com/questions/35749676/assert-difference-rails-test-failing-to-verify-user-deleted-but-seems-to-work-in", "title": "Assert_Difference Rails Test Failing to Verify User Deleted but seems to Work in App?", "body": "<p>I am following through with the <a href=\"https://www.railstutorial.org/book/updating_and_deleting_users\" rel=\"nofollow\">Rails Tutorial by Michael Hartl</a> but am struggling with verifying that a user is destroyed when issuing a delete request to the user path with this test.</p>\n\n<p>When I boot up the app on Cloud 9 and physically go into the All users index and delete a user, it does disappear so this has been a bit of a road block at the moment !</p>\n\n<p>Here is the user_index_test.rb file</p>\n\n<pre><code>require 'test_helper'\n\nclass UsersIndexTest &lt; ActionDispatch::IntegrationTest\n\ndef setup\n   @user = users(:Robert)\n   @admin     = users(:Robert)\n   @non_admin = users(:archer)\nend\n\ntest \"index as admin including pagination and delete links\" do\n  log_in_as(@admin)\n  get users_path\n  assert_template 'users/index'\n  first_page_of_users = User.paginate(page: 1)\n  first_page_of_users.each do |user|\n    assert_select \"a[href=?]\", user_path(user)\n    unless user == @admin\n      assert_select user_path(user), :text =&gt; 'delete'\n    end\n  end\n\n  assert_difference 'User.count', -1 do\n    delete user_path(@non_admin)\n  end\nend\nend \n</code></pre>\n\n<p>Here is the index.html.erb file </p>\n\n<pre><code>  &lt;ul class=\"users\"&gt;\n    &lt;% @users.each do |user| %&gt;\n      &lt;li&gt;\n        &lt;%= gravatar_for user, size: 50 %&gt;\n        &lt;%= link_to user.name, user %&gt;\n        &lt;% if current_user.admin? &amp;&amp; !current_user?(user) %&gt;\n          &lt;%= link_to \"delete\", user, method: :delete,\n                                 data: { confirm: \"You sure?\" } %&gt;\n        &lt;% end %&gt;\n      &lt;/li&gt;\n      &lt;% end %&gt;\n  &lt;/ul&gt;\n  &lt;%= will_paginate %&gt;\n</code></pre>\n\n<p>The error code:</p>\n\n<pre><code>      ....................................DEPRECATION WARNING: The assertion \n  was not run because of an invalid css selector.\n  unexpected '950961012' after 'CHILD_SELECTOR' (called from block (2  \n  levels) in &lt;class:UsersIndexTest&gt; at \n /home/ubuntu/workspace/test/integration/users_index_test.rb:19)\n  F...\n\n    1) Failure:\n  UsersIndexTest#test_index_as_admin_including_pagination_and_delete_links       \n  [/home/ubuntu/workspace/test/integration/users_index_test.rb:23]:\n  \"User.count\" didn't change by -1.\n  Expected: 1\n  Actual: 2\n</code></pre>\n\n<p>I have tried changing the assert_select to a[href=], a[href], a few more after looking at the source to remove the depreciation warning but to no avail. Been stuck here for a few days now figure I'd ask. </p>\n\n<p>Any help appreciated :)</p>\n\n<p>UPDATE 1: \nAs @UriAgassi pointed out there was an issue was with my assert_select statement failing, resulting in Rails NOT selecting the correct tag and therefore not putting through a DELETE request. </p>\n\n<p>So I am attempting to create a new assert_select command but the trouble is, the <code>&lt;a&gt;</code> tag I am trying to select is right after an anchor tag. </p>\n\n<p>New User Index Test: </p>\n\n<pre><code>    first_page_of_users.each do |user|\n    assert_select \"a[href=?]\", user_path(user), :text =&gt; user.name\n      unless user == @admin\n         assert_select \"a[class=?]\", 'user', :test =&gt; 'delete'\n      end\n    end\n</code></pre>\n\n<p>The HTML Page</p>\n\n<pre><code>     &lt;li&gt;\n       &lt;img alt=\"Robert\" class=\"gravatar\"   \n src=\"https://secure.gravatar.com/avatar/e831ff7d5e2cad2c7da9249aa28343c9?s=50\" /&gt;\n       &lt;a href=\"/users/1\"&gt;Robert&lt;/a&gt;\n     &lt;/li&gt;\n     &lt;li&gt;\n       &lt;img alt=\"Dr. Lonzo Rosenbaum\" class=\"gravatar\" \n src=\"https://secure.gravatar.com/avatar/ef4fac9f70a2ad49b02546f3aa416a61?s=50\" /&gt;\n       &lt;a href=\"/users/3\"&gt;Dr. Lonzo Rosenbaum&lt;/a&gt;\n       **&lt;!-- User to delete, tag to select class=\"user\"--&gt;**\n         &lt;a class=\"user\" data-confirm=\"You sure?\" \n          rel=\"nofollow\" data-method=\"delete\" href=\"/users/3\"&gt;delete&lt;/a&gt;\n     &lt;/li&gt;\n</code></pre>\n\n<p>New Error Message:</p>\n\n<pre><code>     1) Failure:\n UsersIndexTest#test_index_as_admin_including_pagination_and_delete_links \n [/home/ubuntu/workspace/test/integration/users_index_test.rb:19]:\n Expected at least 1 element matching \"a[class=\"user\"]\", found 0..\n Expected 0 to be &gt;= 1.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6122, "user_id": 946500, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/fqdcn.jpg?s=128&g=1", "display_name": "Pavel Oganesyan", "link": "https://stackoverflow.com/users/946500/pavel-oganesyan"}, "edited": false, "score": 0, "creation_date": 1456928495, "post_id": 35749603, "comment_id": 59172789, "body": "<a href=\"http://stackoverflow.com/questions/16264981/rails-dot-instead-of-slash-in-url\" title=\"rails dot instead of slash in url\">stackoverflow.com/questions/16264981/&hellip;</a>"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1456928638, "post_id": 35749603, "comment_id": 59172926, "body": "You are building your link incorrectly, could you please show your code that redirects you to that error?"}, {"owner": {"reputation": 269, "user_id": 3485221, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aRiCA.jpg?s=128&g=1", "display_name": "Lotix", "link": "https://stackoverflow.com/users/3485221/lotix"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1456928982, "post_id": 35749603, "comment_id": 59173222, "body": "@BroiSatse I edited my post."}], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 3485221, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aRiCA.jpg?s=128&g=1", "display_name": "Lotix", "link": "https://stackoverflow.com/users/3485221/lotix"}, "edited": false, "score": 0, "creation_date": 1456928963, "post_id": 35749950, "comment_id": 59173203, "body": "I updated my comment, the issue appears after i issue a post request and then try to redirect to the fights show page. Take a look and let me know."}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "reply_to_user": {"reputation": 269, "user_id": 3485221, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aRiCA.jpg?s=128&g=1", "display_name": "Lotix", "link": "https://stackoverflow.com/users/3485221/lotix"}, "edited": false, "score": 0, "creation_date": 1456929735, "post_id": 35749950, "comment_id": 59173829, "body": "What is the need of issuing a &#39;post&#39; request here ? Ideally, it should be GET request and you have also defined a routes in your routes.rb as :   GET    /fights/:id(.:format)                           fights#show"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1456929746, "post_id": 35749950, "comment_id": 59173839, "body": "<code>fights_path</code> is a path to index action, helper does not expect any params except for optional <code>:format</code>. This will generate link to <code>&#47;fights.30</code>"}, {"owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1456930088, "post_id": 35749950, "comment_id": 59174131, "body": "@BroiSatse Yes is what I said in my answer below... That&#39;s the issue, look at his <code>redirect_to</code>"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "edited": false, "score": 0, "creation_date": 1456930335, "post_id": 35749950, "comment_id": 59174326, "body": "@SsouLlesS - you can see in his edit that he already uses <code>fight_path</code>, which means it is problem with <code>fight_path</code> url_helper defnition"}, {"owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1456930480, "post_id": 35749950, "comment_id": 59174449, "body": "@BroiSatse but, he is using <code>method: :post</code> which indicates he is using the post version of the path, without that he would use the get method for the same path, I think the issue is in the <code>redirect_to</code>"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1456930505, "post_id": 35749950, "comment_id": 59174468, "body": "@BroiSatse , I edited my answer from fights_path(@fight) to fight_path(@fight). Hope it will redirect user to /fights/:id   path."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "edited": false, "score": 0, "creation_date": 1456930675, "post_id": 35749950, "comment_id": 59174602, "body": "@SsouLlesS - url_helpers has no idea about http verbs, they only based on route name. This is why you can POST to &#39;users_path&#39;, even though <code>users_path</code> in routes seems to be associated with GET."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1456930746, "post_id": 35749950, "comment_id": 59174661, "body": "@Dinesh - It will not, look at the the output from <code>rake routes</code> - route with name <code>fight</code> is associated with template <code>&#47;fight(.:format)</code>, no place for id there."}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1456931279, "post_id": 35749950, "comment_id": 59175126, "body": "@BroiSatse , Oh, you are pointing to the POST path , I was checking the GET path.  For that user can define the followings in the routes.rb :  post &#39;fights/:id&#39; =&gt; &#39;fights#show&#39;"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1456931796, "post_id": 35749950, "comment_id": 59175548, "body": "@Dinesh - Again, url_helpers don&#39;t care for the verb, they only role is to build the path. Important information is the first column, you can see there &#39;fight&#39; in one raw - this is the template url_helper will use to generate <code>fight_path</code>. Normally, with pure resource it will be <code>&#47;fights&#47;:id</code> - you can see that route at the bottom, but it has no name which is what causing that issue."}], "tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": false, "score": 2, "last_activity_date": 1456929878, "last_edit_date": 1456929878, "creation_date": 1456928842, "answer_id": 35749950, "question_id": 35749603, "link": "https://stackoverflow.com/questions/35749603/no-route-matches-get-despite-having-it-defined/35749950#35749950", "title": "No route matches [GET] despite having it defined", "body": "<p>If you are getting this issue while clicking on a <strong>link_to</strong> tag, then check your path in link_to tag.</p>\n\n<p>Ideally it should look like the following:</p>\n\n<pre><code>&lt;%= link_to 'show', fight_path(@fight) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3706, "user_id": 3700798, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LpxP2.png?s=128&g=1", "display_name": "svelandiag", "link": "https://stackoverflow.com/users/3700798/svelandiag"}, "is_accepted": false, "score": 1, "last_activity_date": 1456928960, "last_edit_date": 1592644375, "creation_date": 1456928960, "answer_id": 35750010, "question_id": 35749603, "link": "https://stackoverflow.com/questions/35749603/no-route-matches-get-despite-having-it-defined/35750010#35750010", "title": "No route matches [GET] despite having it defined", "body": "<p>When rails generates a link with a dot is because you are using pluralization in your path, or any other &quot;collection&quot; route.</p>\n<p>You did not add your <code>link_to</code> so I will try to address:</p>\n<pre><code>&lt;%= link_to 'show', fight_path(@fight) %&gt;\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/16264981/rails-dot-instead-of-slash-in-url\">Reference</a></p>\n<h2>Update</h2>\n<p>In your controller you need to redirect using the proper path:</p>\n<pre><code>redirect_to fight_path(@fight)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 3485221, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aRiCA.jpg?s=128&g=1", "display_name": "Lotix", "link": "https://stackoverflow.com/users/3485221/lotix"}, "edited": false, "score": 0, "creation_date": 1456929402, "post_id": 35750057, "comment_id": 59173540, "body": "First one gives me a connection error. Second displays same error as in my initial post."}], "tags": [], "owner": {"reputation": 966, "user_id": 5350659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63535c11d66f71640d7a5a558b351d11?s=128&d=identicon&r=PG&f=1", "display_name": "Pitabas Prathal", "link": "https://stackoverflow.com/users/5350659/pitabas-prathal"}, "is_accepted": true, "score": 2, "last_activity_date": 1456929502, "last_edit_date": 1456929502, "creation_date": 1456929055, "answer_id": 35750057, "question_id": 35749603, "link": "https://stackoverflow.com/questions/35749603/no-route-matches-get-despite-having-it-defined/35750057#35750057", "title": "No route matches [GET] despite having it defined", "body": "<p>You can try</p>\n\n<pre><code>redirect_to \"/fights/#{@fight.id}\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>redirect_to fight_path(@fight)\n\n\n &lt;%= link_to 'FIGHT!', fight_path(@fight,{ attacker_id: @attacker.id,\n                                      defender_id: @defender.id,\n                                      winner: compare_power_levels(@attacker, @defender)}), method: :post  %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 3485221, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aRiCA.jpg?s=128&g=1", "display_name": "Lotix", "link": "https://stackoverflow.com/users/3485221/lotix"}, "edited": false, "score": 0, "creation_date": 1456930844, "post_id": 35750331, "comment_id": 59174767, "body": "While your answer makes perfect sense and helped me understand it, the solution itself doesn&#39;t work. @pitabas prathal&#39;s first solution however solved it. I believe it might have something to do with the structure of my application. The error I&#39;m getting after your answer is &#39;No route matches {:action=&gt;&quot;show&quot;, :attacker_id=&gt;9, :controller=&gt;&quot;fights&quot;, :defender_id=&gt;8, :id=&gt;#&lt;Fight id: nil, created_at: nil, updated_at: nil, attacker_id: nil, defender_id: nil, winner: nil&gt;, :winner=&gt;8} missing required keys: [:id]&#39;"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "reply_to_user": {"reputation": 269, "user_id": 3485221, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aRiCA.jpg?s=128&g=1", "display_name": "Lotix", "link": "https://stackoverflow.com/users/3485221/lotix"}, "edited": false, "score": 1, "creation_date": 1456931408, "post_id": 35750331, "comment_id": 59175250, "body": "This is a good message, it is expected and it is a sign that the above worked as your Fight is not saved in your database - you cannot redirect to it. There are however quite  a lot of things I am not very sure in your code. Firstly, never ever use links to send post requests - it is a serious security issue. Second thing - which action do you actually want to trigger with that link? :D"}, {"owner": {"reputation": 269, "user_id": 3485221, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aRiCA.jpg?s=128&g=1", "display_name": "Lotix", "link": "https://stackoverflow.com/users/3485221/lotix"}, "edited": false, "score": 0, "creation_date": 1456932121, "post_id": 35750331, "comment_id": 59175770, "body": "That&#39;s good to hear. Whole feature of this application is very hacky right now and i believe there&#39;s a lot of room for improvement. But the rough idea is as following: I write the last two fighters inside a fight table (one labeled as attacker and other as defender, both are of fighter class) the post link is supposed to pick both fighters, determine the winner and then redirect to the show page to display the fight (the fights winner, participants etc) I based the post request on the same way i did the &quot;Like&quot; feature in my other project. What&#39;s the way to go? I&#39;d love to hear your opinion."}], "tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": false, "score": 1, "last_activity_date": 1456930551, "last_edit_date": 1456930551, "creation_date": 1456929694, "answer_id": 35750331, "question_id": 35749603, "link": "https://stackoverflow.com/questions/35749603/no-route-matches-get-despite-having-it-defined/35750331#35750331", "title": "No route matches [GET] despite having it defined", "body": "<p>The reason is here:</p>\n\n<pre><code>post '/fight', to: 'fights#start'\nresources :fights, only: [:new, :show]\n</code></pre>\n\n<p><code>post '/fight'</code> generates the named route <code>fight_path</code>, which normally would be created by <code>resources</code>. Since it is already defined, <code>resources</code> does not override it. You can see in your routes:</p>\n\n<pre><code>fight POST   /fight(.:format)                                fights#start\n</code></pre>\n\n<p>While it should be:</p>\n\n<pre><code>fight GET   /fight/:id(.:format)                                fights#start\n</code></pre>\n\n<p>Since route has only one optional param <code>:format</code>, when you call <code>fight_path(@user)</code>, <code>@user.id</code> is used as a format, which results in <code>'/fight.30'</code></p>\n\n<p>You need to rename your <code>post '/fight'</code> route:</p>\n\n<pre><code>post '/fight', to: 'fights#start', :as 'start_fight'\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 3485221, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/aRiCA.jpg?s=128&g=1", "display_name": "Lotix", "link": "https://stackoverflow.com/users/3485221/lotix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 35750057, "answer_count": 4, "score": 0, "last_activity_date": 1456930551, "creation_date": 1456927937, "last_edit_date": 1456928910, "question_id": 35749603, "link": "https://stackoverflow.com/questions/35749603/no-route-matches-get-despite-having-it-defined", "title": "No route matches [GET] despite having it defined", "body": "<p>I have a very hard time understanding why I have this issue. I looked through the majority of similar problems. In most cases authors forgot to include the relevant route. However I clearly do and I attribute this problem to gaps in my Rails knowledge which I hope some of you can address.</p>\n\n<p>The error I keep getting: <code>No route matches [GET] \"/fight.29\"</code>despite having it defined in the <code>resources :fights</code> I also tried other methods which I commented out, but to no avail.</p>\n\n<p>Few things I noticed:</p>\n\n<ul>\n<li>My app tries to access <code>http://localhost:3000/fight.29</code> instead of <code>http://localhost:3000/fights/29</code>through redirect in the <code>FightsController</code></li>\n<li>When I type <code>http://localhost:3000/fights/29</code> manually it works perfectly fine.</li>\n<li>My show action for <code>fights</code> is missing the prefix</li>\n<li>Theres a <code>.</code>between <code>fight</code>and <code>29</code> inside url. Not sure what it means and if it has something to do with the error</li>\n</ul>\n\n<p>Here's the output of <code>rake routes</code>:</p>\n\n<pre><code>            Prefix Verb   URI Pattern                                     Controller#Action\n              root GET    /                                               static_pages#home\n    fighter_skills GET    /fighters/:fighter_id/skills(.:format)          skills#index\n                   POST   /fighters/:fighter_id/skills(.:format)          skills#create\n new_fighter_skill GET    /fighters/:fighter_id/skills/new(.:format)      skills#new\nedit_fighter_skill GET    /fighters/:fighter_id/skills/:id/edit(.:format) skills#edit\n     fighter_skill GET    /fighters/:fighter_id/skills/:id(.:format)      skills#show\n                   PATCH  /fighters/:fighter_id/skills/:id(.:format)      skills#update\n                   PUT    /fighters/:fighter_id/skills/:id(.:format)      skills#update\n                   DELETE /fighters/:fighter_id/skills/:id(.:format)      skills#destroy\n          fighters GET    /fighters(.:format)                             fighters#index\n                   POST   /fighters(.:format)                             fighters#create\n       new_fighter GET    /fighters/new(.:format)                         fighters#new\n      edit_fighter GET    /fighters/:id/edit(.:format)                    fighters#edit\n           fighter GET    /fighters/:id(.:format)                         fighters#show\n                   PATCH  /fighters/:id(.:format)                         fighters#update\n                   PUT    /fighters/:id(.:format)                         fighters#update\n                   DELETE /fighters/:id(.:format)                         fighters#destroy\n             fight POST   /fight(.:format)                                fights#start\n         new_fight GET    /fights/new(.:format)                           fights#new\n                   GET    /fights/:id(.:format)                           fights#show\n</code></pre>\n\n<p>Here's my <code>routes.rb</code>:</p>\n\n<pre><code>root 'static_pages#home'\n\n  resources :fighters do\n    resources :skills\n  end\n  post '/fight', to: 'fights#start'\n  resources :fights, only: [:new, :show]\n\n  #get  '/fights/:id/', to: 'fights#show'\n  #match '/:id' =&gt; 'fights#show', via: [:get]\n</code></pre>\n\n<p>Here's the <code>fights_controller.rb</code>:</p>\n\n<pre><code>  def show\n    @fight = Fight.find(params[:id])\n  end\n  def start\n    @fight = Fight.create(attacker_id: params[:attacker_id], defender_id: params[:defender_id], winner: params[:winner])\n    if @fight.save\n      redirect_to @fight\n    else\n      redirect_to root_path\n    end\n  end\n</code></pre>\n\n<p>Log (another request but same error):</p>\n\n<pre><code>Started GET \"/fight.30\" for 127.0.0.1 at 2016-03-02 15:10:17 +0100\n\nActionController::RoutingError (No route matches [GET] \"/fight.30\"):\n  actionpack (4.2.5) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'\n  web-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'\n  web-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'\n  web-console (2.3.0) lib/web_console/middleware.rb:18:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  railties (4.2.5) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.2.5) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.2.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.2.5) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.2.5) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.2.5) lib/rails/rack/logger.rb:20:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  rack (1.6.4) lib/rack/methodoverride.rb:22:in `call'\n  rack (1.6.4) lib/rack/runtime.rb:18:in `call'\n  activesupport (4.2.5) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  rack (1.6.4) lib/rack/lock.rb:17:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/static.rb:116:in `call'\n  rack (1.6.4) lib/rack/sendfile.rb:113:in `call'\n  railties (4.2.5) lib/rails/engine.rb:518:in `call'\n  railties (4.2.5) lib/rails/application.rb:165:in `call'\n  rack (1.6.4) lib/rack/lock.rb:17:in `call'\n  rack (1.6.4) lib/rack/content_length.rb:15:in `call'\n  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'\n  /home/chrislotix/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'\n  /home/chrislotix/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'\n  /home/chrislotix/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'\n</code></pre>\n\n<p>What am I missing?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<pre><code>&lt;%= link_to 'FIGHT!', fight_path(@fight, attacker_id: @attacker.id,\n                                          defender_id: @defender.id,\n                                          winner: compare_power_levels(@attacker, @defender)), method: :post  %&gt;\n</code></pre>\n\n<p>Note: compare_power_levels simply returns one of the two objects after comparing.</p>\n"}, {"tags": ["arrays", "ruby", "metadata"], "comments": [{"owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 0, "creation_date": 1456929173, "post_id": 35749123, "comment_id": 59173375, "body": "The <code>allpdf</code> function is meaningless, it&#39;s output is basically a copy of the input. <code>Dir.[]</code> returns an Array of filenames."}, {"owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "reply_to_user": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 0, "creation_date": 1456929361, "post_id": 35749123, "comment_id": 59173513, "body": "It shouldn&#39;t return a list of filenames, it should return an array of document metadata using yomu. Am I misunderstanding the point? Edit: I see what you are saying, but removing that isnt going to get me any closer to the answer I guess. Ill remove that bit for now, thanks for the tip! :)"}, {"owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 0, "creation_date": 1456929538, "post_id": 35749123, "comment_id": 59173646, "body": "And I was unable to reproduce your issue. I tried your script and it collects metadata of pdf files in the current directory correctly. Both inside and after the loop <code>array</code> contains different Strings, each corresponding to a metadata entry in one of the pdf files. (I have jruby 1.7.9 and yomu 0.2.4)"}, {"owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "reply_to_user": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 0, "creation_date": 1456929613, "post_id": 35749123, "comment_id": 59173716, "body": "Tried with more than one file? The issue is that I go from metadata for each file within the directory when I call puts inside the loop, to metadata for only one file when i call it outside the loop."}, {"owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 0, "creation_date": 1456929768, "post_id": 35749123, "comment_id": 59173860, "body": "Of course :) &quot;Both inside and after the loop <code>array</code> contains <b>different Strings</b>&quot;"}, {"owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "reply_to_user": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 0, "creation_date": 1456929918, "post_id": 35749123, "comment_id": 59173996, "body": "They shouldn&#39;t contain different strings, we are processing the same files. The output should be identical! Or that is what im trying to achieve :)"}, {"owner": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 0, "creation_date": 1456930249, "post_id": 35749123, "comment_id": 59174261, "body": "I had a bunch of pdfs with the same author, so I listed Last-Modified instead. Both inside and after the loop <code>array</code> looks like this: <code>[&quot;2016-02-17T20:56:39Z&quot;, &quot;2016-02-24T21:31:41Z&quot;, &quot;2016-01-30T00:26:50Z&quot;, &quot;2016-02-09T15:15:40Z&quot;, &quot;2016-02-13T13:50:32Z&quot;, &quot;2016-02-29T19:05:20Z&quot;]</code>"}, {"owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "reply_to_user": {"reputation": 812, "user_id": 2034213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a09835300056e6e3f54e25c35e9e89a3?s=128&d=identicon&r=PG", "display_name": "igneus", "link": "https://stackoverflow.com/users/2034213/igneus"}, "edited": false, "score": 0, "creation_date": 1456931132, "post_id": 35749123, "comment_id": 59175005, "body": "Well damnit, its just the order that appears to change - let me test again and ill mark your answer as correct assuming its working :D"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "is_accepted": false, "score": 0, "last_activity_date": 1456935302, "creation_date": 1456935302, "answer_id": 35752563, "question_id": 35749123, "link": "https://stackoverflow.com/questions/35749123/reading-multiple-files-with-the-ruby-gem-yomu/35752563#35752563", "title": "Reading multiple files with the Ruby gem &#39;Yomu&#39;", "body": "<p>Jakub Pavl\u00edk was correct, the code was actually working as stated, it just wasn't displaying the output in the way I expected!</p>\n"}], "owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456935302, "creation_date": 1456926742, "question_id": 35749123, "link": "https://stackoverflow.com/questions/35749123/reading-multiple-files-with-the-ruby-gem-yomu", "title": "Reading multiple files with the Ruby gem &#39;Yomu&#39;", "body": "<p>I'm trying to download documents and strip out the document metadata with the Yomu gem, but cannot find guidance for parsing multiple files. The semi working code is below, and should work if you put some pdf files in the same directory as the script.</p>\n\n<pre><code>require 'yomu'\ndir = Dir.pwd\nfiles = Dir[\"#{dir}/*.pdf\"]\n\ndef allpdf(files)\n  filearray = []\n    files.each do |file|\n    filearray &lt;&lt; file\n  end    \n  filearray\nend\n\ndef metadata(dir, allfiles)\narray = []\n  allfiles.each do |file|\n    yomufile = Yomu.new file\n    array &lt;&lt; yomufile.metadata[\"Author\"]\n    puts array\n  end\nend\n\nallfiles = allpdf(files)\nmetadata(dir, allfiles)\n</code></pre>\n\n<p>So when I '<em>puts array</em>' it spits out what I would expect. But if I call 'array' outside of the loop, I get a single entry repeated over and over, so I can only assume that the array/yomu hash is being overwritten perhaps. What is the best way to fix this so that I can return a full array for use elsewhere in the application?\nPlease Note: I suspect this may be a more general Ruby error on my part related to my lack of array skills rather than a Yomu specific issue. Im not sure how else to address this question however.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 0, "last_activity_date": 1456926610, "creation_date": 1456926610, "answer_id": 35749072, "question_id": 35748865, "link": "https://stackoverflow.com/questions/35748865/before-filter-and-ajax-rails-4/35749072#35749072", "title": "before_filter and Ajax Rails 4", "body": "<p>You could bind to a jQuery click event when something gets added to the cart and then return the value you want to update and simply change it with jquery.</p>\n\n<pre><code> $.ajax({\n   type: 'GET', // or whatever you make the route in the controller\n   url: \"/whatever/route_you_create\"\n   data: \"value to add to existing\"\n }).done(function(ajax_response){\n   // set .val(ajax_response['num_to_change']) \n })\n</code></pre>\n\n<p>Update the value in the controller action and save the new value, then return the new value via json.</p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456927880, "creation_date": 1456926023, "last_edit_date": 1456927880, "question_id": 35748865, "link": "https://stackoverflow.com/questions/35748865/before-filter-and-ajax-rails-4", "title": "before_filter and Ajax Rails 4", "body": "<p>I am in the process of refactoring some code and thought that a method that was used in every controller now has it's own class and called using a before_filter within the Application Controller</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  before_filter :subtotal\n\n  def subtotal\n    @user_subtotal = UserSubtotal::Subtotal.new(current_or_guest_user).subtotal\n  end\n\nend\n\nclass UserSubtotal::Subtotal\n  def initialize(user)\n    @user = user\n  end\n\n  def subtotal\n    @frame_total = CartItem.frame_price_total(@user)\n    @image_size_total = CartItem.image_size_price_total(@user)\n    @subtotal = CartItem.subtotal(@frame_total, @image_size_total)\n end\nend\n</code></pre>\n\n<p>In my views i am rendering a partial (it tracks the users cart subtotal)</p>\n\n<pre><code>&lt;span class=\"total\"&gt;&lt;%= render 'shared/cart_amount' %&gt;&lt;/span&gt;\n</code></pre>\n\n<p><strong>_cart_amount.html.erb</strong></p>\n\n<pre><code>&lt;%= number_to_currency(@user_subtotal, unit: '\u00a3') + ' (excluding shipping)'%&gt;\n</code></pre>\n\n<p>So when adding an item to the cart I am doing this via Ajax and the <code>create.js.erb</code> file renders the same partial</p>\n\n<p><strong>create.js.erb</strong></p>\n\n<pre><code>$(\".total\").html('&lt;%= j render partial: \"shared/cart_amount\" %&gt;');\n</code></pre>\n\n<p><strong>cart_items_controller</strong></p>\n\n<pre><code>def create\n  respond_to do |format|\n    if @cart_item.save\n      format.js { flash.now[:success] = 'Successfully added to cart' }\n    else\n      format.js { flash.now[:error] = @cart_item.errors.full_messages }\n    end\n  end\nend\n</code></pre>\n\n<p>How can i get the value of <code>@user_subtotal</code> to update in this circumstance</p>\n\n<p>I am probably not thinking of something glaringly obvious</p>\n\n<p>Thanks</p>\n\n<p>UPDATE</p>\n\n<p>I think I solved it but whether it's the correct solution I don't know, be interesting to get other peoples thoughts, within my create controller I added</p>\n\n<pre><code>@user_subtotal = UserSubtotal::Subtotal.new(current_or_guest_user).subtotal if request.xhr?\n</code></pre>\n\n<p>This gives me a fresh instance of <code>@user_subtotal</code></p>\n"}, {"tags": ["ruby", "methods"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 6, "creation_date": 1456923635, "post_id": 35747923, "comment_id": 59169023, "body": "Then, of course, one has to somehow differentiate between default nil and explicit nil (if it matters) :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 8, "creation_date": 1456948288, "post_id": 35747923, "comment_id": 59186811, "body": "That&#39;s what the <code>def some_func(variable = (variable_was_not_passed = true; nil))</code> idiom is for."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 90, "last_activity_date": 1456923534, "creation_date": 1456923534, "answer_id": 35747923, "question_id": 35747905, "link": "https://stackoverflow.com/questions/35747905/a-method-with-an-optional-parameter/35747923#35747923", "title": "A method with an optional parameter", "body": "<pre><code>def some_func(variable = nil)\n  ...\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1456926427, "post_id": 35748287, "comment_id": 59171093, "body": "what is the purpose of using <code>*arg</code> and <code>**arg</code> instead of just <code>arg</code>?"}, {"owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 7, "creation_date": 1456927663, "post_id": 35748287, "comment_id": 59172097, "body": "@sagarpandya82 <code>*arg</code> collects the arguments as an array. Without the <code>*</code> you would have to call <code>some_func([&quot;x&quot;, nil])</code>. <code>**arg</code> collects all named arguments. Without the <code>**</code> it would only accept either a single unnamed argument, or any number of named arguments."}], "tags": [], "owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "is_accepted": false, "score": 18, "last_activity_date": 1456924890, "last_edit_date": 1456924890, "creation_date": 1456924552, "answer_id": 35748287, "question_id": 35747905, "link": "https://stackoverflow.com/questions/35747905/a-method-with-an-optional-parameter/35748287#35748287", "title": "A method with an optional parameter", "body": "<p>Besides the more obvious option of parameters with default values, that <em>Sawa</em> has already shown, using arrays or hashes might be handy in some cases. Both solutions preserve <em>nil</em> as a an argument.</p>\n\n<p><strong>1. Receive as array:</strong></p>\n\n<pre><code>def some_func(*args)\n  puts args.count\nend\n\nsome_func(\"x\", nil)\n# 2\n</code></pre>\n\n<p><strong>2. Send and receive as hash:</strong></p>\n\n<pre><code>def some_func(**args)\n  puts args.count\nend\n\nsome_func(a: \"x\", b: nil)\n# 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 516, "user_id": 1415989, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/55iWM.jpg?s=128&g=1", "display_name": "Charmi", "link": "https://stackoverflow.com/users/1415989/charmi"}, "is_accepted": false, "score": 9, "last_activity_date": 1497981589, "last_edit_date": 1497981589, "creation_date": 1456924622, "answer_id": 35748322, "question_id": 35747905, "link": "https://stackoverflow.com/questions/35747905/a-method-with-an-optional-parameter/35748322#35748322", "title": "A method with an optional parameter", "body": "<p>You can also use a hash as argument and have more freedom:</p>\n\n<pre><code>def print_arg(args = {})\n  if args.has_key?(:age)\n    puts args[:age]\n  end\nend\n\nprint_arg \n# =&gt; \nprint_arg(age: 35, weight: 90)\n# =&gt; 35\n</code></pre>\n"}], "owner": {"reputation": 1232, "user_id": 5859203, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207514017080224/picture?type=large", "display_name": "TamRock", "link": "https://stackoverflow.com/users/5859203/tamrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53940, "favorite_count": 4, "accepted_answer_id": 35747923, "answer_count": 3, "score": 52, "last_activity_date": 1540826552, "creation_date": 1456923476, "last_edit_date": 1456923742, "question_id": 35747905, "link": "https://stackoverflow.com/questions/35747905/a-method-with-an-optional-parameter", "title": "A method with an optional parameter", "body": "<p>Is there a way to make a method that can accept a parameter, but can also be called without one, in which case the parameter is regarded <code>nil</code> like the following?</p>\n\n<pre><code>some_func(variable)\n\nsome_func\n</code></pre>\n"}, {"tags": ["ruby", "bash", "vagrant"], "answers": [{"tags": [], "owner": {"reputation": 4786, "user_id": 907201, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7E2LT.png?s=128&g=1", "display_name": "gmaliar", "link": "https://stackoverflow.com/users/907201/gmaliar"}, "is_accepted": true, "score": 3, "last_activity_date": 1456932436, "creation_date": 1456932436, "answer_id": 35751414, "question_id": 35747665, "link": "https://stackoverflow.com/questions/35747665/run-a-ruby-file-within-a-vagrant-provisioning-bash-script/35751414#35751414", "title": "Run a Ruby file within a Vagrant provisioning Bash script", "body": "<p>Vagrant is provisioning using a privileged user, <code>root</code>, if you'd like a line to run as the default user, <code>vagrant</code>, then you'd have to run the provision script with <code>privileged: false</code></p>\n\n<p>like so</p>\n\n<pre><code>config.vm.provision \"shell\", inline: \"echo $(whoami)\", privileged: false\n</code></pre>\n"}], "owner": {"reputation": 1353, "user_id": 3250984, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e361b04391eca1bb10b4113dee776479?s=128&d=identicon&r=PG", "display_name": "bordeltabernacle", "link": "https://stackoverflow.com/users/3250984/bordeltabernacle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 1, "accepted_answer_id": 35751414, "answer_count": 1, "score": 2, "last_activity_date": 1456932436, "creation_date": 1456922859, "question_id": 35747665, "link": "https://stackoverflow.com/questions/35747665/run-a-ruby-file-within-a-vagrant-provisioning-bash-script", "title": "Run a Ruby file within a Vagrant provisioning Bash script", "body": "<p>I have a Vagrant provisioning Bash file that contains this command:</p>\n\n<pre><code>ruby -e \"$(curl -fsSL https://bakeware.herokuapp.com/bake/install)\"\n</code></pre>\n\n<p>For some reason it doesn't work. It appears to according to the output:</p>\n\n<pre><code>==&gt; nerves: =&gt; bake version 0.2.4 installed to ~/.bake/bin\n==&gt; nerves: Be sure to add ~/.bake/bin to your path\n</code></pre>\n\n<p>But the <code>~/.bake</code> directory hasn't been created. It doesn't work either if I <code>wget</code> the install file and run <code>ruby install</code> within the Vagrant provision script.</p>\n\n<p>It works fine if I <code>vagrant ssh</code> in and run the commands. How would I get this to work?</p>\n"}, {"tags": ["ruby", "return", "return-value"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1456923382, "post_id": 35747655, "comment_id": 59168859, "body": "What is the return value you expect for each case (of the four)?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456935674, "post_id": 35747795, "comment_id": 59178562, "body": "Suppose <code>@x = 0: def first_user_valid?; @x == 0; end; def second_user_valid?; (10 % @x) == 2; end</code>?"}], "tags": [], "owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "is_accepted": true, "score": 2, "last_activity_date": 1456923149, "creation_date": 1456923149, "answer_id": 35747795, "question_id": 35747655, "link": "https://stackoverflow.com/questions/35747655/determinate-which-method-returns-true-in-or-operator/35747795#35747795", "title": "Determinate which method returns true in or operator", "body": "<p>You can return an array of responses:</p>\n\n<pre><code>def user_validation\n  [first_user_valid?, second_user_valid?]\nend\n</code></pre>\n\n<p>This way you can know that the first returned <code>true</code>, and the other <code>false</code>...</p>\n\n<pre><code># =&gt; [true, false]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 938, "user_id": 807101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88390e2e2b3fdb11749016d6a5d5002f?s=128&d=identicon&r=PG", "display_name": "Sterex", "link": "https://stackoverflow.com/users/807101/sterex"}, "edited": false, "score": 1, "creation_date": 1456923528, "post_id": 35747848, "comment_id": 59168957, "body": "I would avoid hard-coding integers for status. Creates difficult-to-maintain code."}, {"owner": {"reputation": 704, "user_id": 4590364, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/89ffdfa1d72d9587e8b838af9c5d6202?s=128&d=identicon&r=PG&f=1", "display_name": "Brenno Leal", "link": "https://stackoverflow.com/users/4590364/brenno-leal"}, "reply_to_user": {"reputation": 938, "user_id": 807101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88390e2e2b3fdb11749016d6a5d5002f?s=128&d=identicon&r=PG", "display_name": "Sterex", "link": "https://stackoverflow.com/users/807101/sterex"}, "edited": false, "score": 0, "creation_date": 1456928092, "post_id": 35747848, "comment_id": 59172435, "body": "Return an array with true/false isnt a good pratice too. If you specify a list with status code, it should be a good implementation."}], "tags": [], "owner": {"reputation": 704, "user_id": 4590364, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/89ffdfa1d72d9587e8b838af9c5d6202?s=128&d=identicon&r=PG&f=1", "display_name": "Brenno Leal", "link": "https://stackoverflow.com/users/4590364/brenno-leal"}, "is_accepted": false, "score": 0, "last_activity_date": 1456923331, "creation_date": 1456923331, "answer_id": 35747848, "question_id": 35747655, "link": "https://stackoverflow.com/questions/35747655/determinate-which-method-returns-true-in-or-operator/35747848#35747848", "title": "Determinate which method returns true in or operator", "body": "<p>If i were you, i change the return from boolean to int. Doing that, you can handle which statment returning specifics numbers for that.</p>\n"}, {"tags": [], "owner": {"reputation": 938, "user_id": 807101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88390e2e2b3fdb11749016d6a5d5002f?s=128&d=identicon&r=PG", "display_name": "Sterex", "link": "https://stackoverflow.com/users/807101/sterex"}, "is_accepted": false, "score": 0, "last_activity_date": 1456923431, "creation_date": 1456923431, "answer_id": 35747888, "question_id": 35747655, "link": "https://stackoverflow.com/questions/35747655/determinate-which-method-returns-true-in-or-operator/35747888#35747888", "title": "Determinate which method returns true in or operator", "body": "<p>Why not call the method itself separately for the different users?</p>\n\n<pre><code>def user_validation(user)\n    return user_valid?\nend\n\nif(user_validation(user_1))\n    //user_1 is valid\nend\n\nif(user_validation(user_2))\n    //user_2 is valid\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1456928454, "last_edit_date": 1456928454, "creation_date": 1456924350, "answer_id": 35748210, "question_id": 35747655, "link": "https://stackoverflow.com/questions/35747655/determinate-which-method-returns-true-in-or-operator/35748210#35748210", "title": "Determinate which method returns true in or operator", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>result = %w|first_user_valid second_user_valid|.inject(nil) |memo, m|\n  (memo ||= []) &lt;&lt; m.tr('_', ' ') if public_send(\"#{m}?\")\n  memo\nend\n\nif result # at least one is valid\n  puts result.join ', '\nelse      # none is valid\n  puts 'None is valid :('\nend\n</code></pre>\n\n<p>Result here might be either <code>nil</code> (<code>falsey</code>), or the string like:</p>\n\n<pre><code>\"first user valid, second user valid\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1456935103, "creation_date": 1456935103, "answer_id": 35752474, "question_id": 35747655, "link": "https://stackoverflow.com/questions/35747655/determinate-which-method-returns-true-in-or-operator/35752474#35752474", "title": "Determinate which method returns true in or operator", "body": "<pre><code>def user_validation\n  valid = ((which = :first) &amp;&amp; first_user_valid?) || \n   ((which = :second) &amp;&amp; second_user_valid?)\n  which = :neither unless valid\n  [valid, which]\nend\n</code></pre>\n\n<p>To illustrate:</p>\n\n<pre><code>def first_user_valid?;  true; end\ndef second_user_valid?; true; end\nuser_validation #=&gt; [true, :first]\n\ndef first_user_valid?;  false; end\nuser_validation #=&gt; [true, :second]\n\ndef second_user_valid?; false; end\nuser_validation #=&gt; [false, :neither]\n</code></pre>\n\n<p>In general, when using <code>||</code>, you don't want to evaluate the second expression if the first evaluates <code>true</code>, as in some cases that may raise an exception (e.g. division by zero), have undesirable side effects (e.g., deleting a needed file) or initiate a lengthy calculation.</p>\n"}], "owner": {"reputation": 10614, "user_id": 1778367, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a62f53d91ff3848fc9ca36aafce63be1?s=128&d=identicon&r=PG", "display_name": "supersize", "link": "https://stackoverflow.com/users/1778367/supersize"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 35747795, "answer_count": 5, "score": -2, "last_activity_date": 1456935103, "creation_date": 1456922820, "question_id": 35747655, "link": "https://stackoverflow.com/questions/35747655/determinate-which-method-returns-true-in-or-operator", "title": "Determinate which method returns true in or operator", "body": "<p>I have:</p>\n\n<pre><code>def user_validation\n  first_user_valid? || second_user_valid?\nend\n</code></pre>\n\n<p>and I don't only want to return true/false but also want to return which method returns the true (maybe both?). I do have:</p>\n\n<pre><code>def user_validation\n  return true if first_user_valid?\n  return true if second_user_valid?\nend\n</code></pre>\n\n<p>so far. But this does not seem very intuitive to me.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "xml", "nokogiri", "indentation"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457029765, "post_id": 35747409, "comment_id": 59231766, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Show us a minimal example of your code demonstrating the problem."}, {"owner": {"reputation": 614, "user_id": 645915, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ZJ0Av.jpg?s=128&g=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/645915/wanderer"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457033214, "post_id": 35747409, "comment_id": 59233792, "body": "@theTinMan added sample code"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457116764, "post_id": 35747409, "comment_id": 59276676, "body": "That helps. Now show us what things you&#39;ve tried to fix the problem. If you haven&#39;t tried, why? If you searched multiple places but didn&#39;t find any information show us where you searched and why those didn&#39;t help. Remember, SO isn&#39;t a &quot;write code for me site&quot;. We help you fix the code you can&#39;t make work, but we expect some evidence of your effort and labor toward solving the problem. We can see where you encountered it, but not where you tried to fix it. See <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a>"}, {"owner": {"reputation": 614, "user_id": 645915, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ZJ0Av.jpg?s=128&g=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/645915/wanderer"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457152736, "post_id": 35747409, "comment_id": 59289130, "body": "@theTinMan I have added approach that I have tried with Nokogiri, but somehow &quot;\\n&quot; still appear in output."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1457291134, "post_id": 35747409, "comment_id": 59329288, "body": "<code>NOBLANKS</code> uses the libxml2 library to try to remove blanks during parsing, which is what the link in my answer discusses. You can&#39;t count on using <code>NOBLANKS</code> and instead have to manually remove the text nodes."}], "answers": [{"comments": [{"owner": {"reputation": 614, "user_id": 645915, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ZJ0Av.jpg?s=128&g=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/645915/wanderer"}, "edited": false, "score": 0, "creation_date": 1457855373, "post_id": 35806327, "comment_id": 59590126, "body": "I have created xml from object using Nokogiri as you suggested, but when I tried to convert it back to xml, it gives roxml_references instance variable. I have added sample code to question for the same. Any idea on how can I skip this?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 614, "user_id": 645915, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ZJ0Av.jpg?s=128&g=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/645915/wanderer"}, "edited": false, "score": 0, "creation_date": 1457916239, "post_id": 35806327, "comment_id": 59609848, "body": "Use <code>to_xml</code> to convert it to XML from an <code>inspect</code> output?"}, {"owner": {"reputation": 614, "user_id": 645915, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ZJ0Av.jpg?s=128&g=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/645915/wanderer"}, "edited": false, "score": 0, "creation_date": 1457949647, "post_id": 35806327, "comment_id": 59621704, "body": "I din&#39;t get you. I have added sample code or converting xml to object using <code>from_xml</code> and object that I am getting as @roxml_references. Is there a way I can prevent it?"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1457126810, "creation_date": 1457126810, "answer_id": 35806327, "question_id": 35747409, "link": "https://stackoverflow.com/questions/35747409/how-to-generate-xml-from-an-object-without-indentation-using-nokogiri-happymappe/35806327#35806327", "title": "How to generate XML from an object without indentation using nokogiri-happymapper and roxml", "body": "<p>If you still can't find a solution after searching the documentation and consulting the author of the gem, then let Nokogiri parse the output, delete the nodes and re-output it without indentation.</p>\n\n<p>Consider this:</p>\n\n<pre><code>require 'nokogiri'\n\nxml = &lt;&lt;EOT\n&lt;root&gt;\n&lt;/root&gt;\nEOT\n\nNokogiri::XML(xml)\n# =&gt; #&lt;Nokogiri::XML::Document:0x3ffd49419494 name=\"document\" children=[#&lt;Nokogiri::XML::Element:0x3ffd49419084 name=\"root\" children=[#&lt;Nokogiri::XML::Text:0x3ffd49418df0 \"\\n\"&gt;]&gt;]&gt;\n</code></pre>\n\n<p>Notice the Nokogiri::XML::Text node containing \"\\n\" above. That's the line-end after <code>&lt;root&gt;</code> in the XML:</p>\n\n<pre><code>doc.to_xml # =&gt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\\n&lt;root&gt;\\n&lt;/root&gt;\\n\"\n</code></pre>\n\n<p>Here's how we find the text nodes:</p>\n\n<pre><code>doc.search('//text()') # =&gt; [#&lt;Nokogiri::XML::Text:0x3fff88c18d20 \"\\n\"&gt;]\n</code></pre>\n\n<p><code>'//text()'</code> is an XPath selector that means \"search the entire document for text nodes.</p>\n\n<p>We can walk through the DOM and delete just those empty nodes:</p>\n\n<pre><code>doc.search('//text()').each do |text_node|\n  text_node.unlink \nend\n\ndoc.to_xml # =&gt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\\n&lt;root/&gt;\\n\"\n</code></pre>\n\n<p>We have to be careful though, because a Nokogiri::XML::Text node can contain more than just the trailing line-end so indiscriminate node deletion will remove desired text too. We can also delete the node's contents, making it empty which works:</p>\n\n<pre><code>xml = &lt;&lt;EOT\n&lt;root&gt;\n  &lt;foo&gt;bar&lt;/foo&gt;\n&lt;/root&gt;\nEOT\n\ndoc = Nokogiri::XML(xml)\ndoc.search('//text()') # =&gt; [#&lt;Nokogiri::XML::Text:0x3ff77201927c \"\\n  \"&gt;, #&lt;Nokogiri::XML::Text:0x3ff772018e80 \"bar\"&gt;, #&lt;Nokogiri::XML::Text:0x3ff772018c14 \"\\n\"&gt;]\ndoc.search('//text()').each do |text_node|\n  text_node.content = '' \nend\n\ndoc.to_xml # =&gt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\\n&lt;root&gt;&lt;foo&gt;&lt;/foo&gt;&lt;/root&gt;\\n\"\n</code></pre>\n\n<p>But notice that deleted the desired text \"bar\". The solution is to be more selective:</p>\n\n<pre><code>doc.search('//text()').each do |text_node|\n  text_node.content = '' if text_node.content.strip.empty?\nend\n\ndoc.to_xml # =&gt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\\n&lt;root&gt;&lt;foo&gt;bar&lt;/foo&gt;&lt;/root&gt;\\n\"\n</code></pre>\n\n<p>Note: Nokogiri includes a <code>NOBLANKS</code> parsing option, which is designed to help remove the indentation nodes, but according to \"<a href=\"https://mail.gnome.org/archives/xml/2009-December/msg00019.html\" rel=\"nofollow\">Unexpected behavior with XML_PARSE_NOBLANKS</a>\", the underlying libXML2 library will not ignore blanks if it thinks that'd result in an invalid DOM being returned.</p>\n\n<p>If you don't want the XMLdecl, you can tell Nokogiri to parse the document as a DocumentFragment:</p>\n\n<pre><code>xml = &lt;&lt;EOT\n&lt;root&gt;\n&lt;/root&gt;\nEOT\n\ndoc = Nokogiri::XML(xml)\ndoc.to_xml # =&gt; \"&lt;?xml version=\\\"1.0\\\"?&gt;\\n&lt;root&gt;\\n&lt;/root&gt;\\n\"\n\ndoc = Nokogiri::XML::DocumentFragment.parse(xml)\ndoc.to_xml # =&gt; \"&lt;root&gt;\\n&lt;/root&gt;\\n\"\n</code></pre>\n"}], "owner": {"reputation": 614, "user_id": 645915, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ZJ0Av.jpg?s=128&g=1", "display_name": "Wanderer", "link": "https://stackoverflow.com/users/645915/wanderer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 35806327, "answer_count": 1, "score": 0, "last_activity_date": 1457855218, "creation_date": 1456922079, "last_edit_date": 1457855218, "question_id": 35747409, "link": "https://stackoverflow.com/questions/35747409/how-to-generate-xml-from-an-object-without-indentation-using-nokogiri-happymappe", "title": "How to generate XML from an object without indentation using nokogiri-happymapper and roxml", "body": "<p>I started using <a href=\"https://github.com/dam5s/happymapper\" rel=\"nofollow\">nokogiri-happymapper</a> and <a href=\"https://github.com/Empact/roxml\" rel=\"nofollow\">roxml</a> to convert Ruby objects to XML. I am not able to generate XML without indentation (\"\\n\") and without instruction.</p>\n\n<p>Is there an option to set <code>:indent=&gt;0, :skip_instruct</code> for the <code>to_xml</code> method, as we have for <a href=\"http://www.rubydoc.info/gems/activesupport/4.2.5.1/Hash#to_xml-instance_method\" rel=\"nofollow\">Active Support</a> in nokogiri-happymapper and roxml?</p>\n\n<p>Also, when I try to convert the XML to an object using <a href=\"https://github.com/Empact/roxml\" rel=\"nofollow\">roxml</a>, I get a string containing <code>@roxml_references</code>. How can I correctly convert XML to Ruby object?</p>\n\n<p>The ROXML code is:</p>\n\n<pre><code>require 'roxml'\nclass Book\n  include ROXML\n\n  xml_accessor :isbn\n  xml_accessor :title\n  xml_accessor :description\n  xml_accessor :author\nend\n\nbook = Book.new\nbook.author = \"ABC\"\nbook.title = \"Ruby\"\ndoc = Nokogiri::XML::Document.new\ndoc.root = book.to_xml\nputs doc.to_s\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>\"&lt;?xml version=\\\"1.0\\\"?&gt;\\n&lt;book&gt;\\n  &lt;title&gt;Ruby&lt;/title&gt;\\n  &lt;author&gt;ABC&lt;/author&gt;\\n&lt;/book&gt;\\n\"\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>obj = Book.from_xml(doc.to_s)\nputs obj\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>#&lt;Mod::Book:0x00000003141718 @author=\"ABC\", @title=\"Ruby\", @roxml_references=[#&lt;ROXML::XMLTextRef:0x00000003141650 @opts=#&lt;ROXML::Definition\n:0x000000031b93f8 @default=nil, @to_xml=nil, @name_explicit=false, @cdata=nil, @required=nil, @frozen=nil, @wrapper=nil, @namespace=nil, @ac\ncessor=\"isbn\", @array=false, @blocks=[], @sought_type=:text, @attr_name=\"isbn\", @name=\"isbn\"&gt;, @instance=#&lt;Mod::Book:0x00000003141718 ...&gt;,\n  @default_namespace=nil&gt;, #&lt;ROXML::XMLTextRef:0x00000003141628 @opts=#&lt;ROXML::Definition:0x000000031b8930 @default=nil, @to_xml=nil, @name_ex\n  plicit=false, @cdata=nil, @required=nil, @frozen=nil, @wrapper=nil, @namespace=nil, @accessor=\"title\", @array=false, @blocks=[], @sought_typ\ne=:text, @attr_name=\"title\", @name=\"title\"&gt;, @instance=#&lt;Mod::Book:0x00000003141718 ...&gt;, @default_namespace=nil&gt;, #&lt;ROXML::XMLTextRef:0x000\n  00003141600 @opts=#&lt;ROXML::Definition:0x000000031a3fa8 @default=nil, @to_xml=nil, @name_explicit=false, @cdata=nil, @required=nil, @frozen=n\n  il, @wrapper=nil, \n</code></pre>\n\n<p>The nokogiri-happymapper code is:</p>\n\n<pre><code>require 'happymapper'\n\nclass Book\n  include HappyMapper\n\n  attr_accessor :title,:author\n  tag 'book'\n  element :title, String, :tag =&gt; 'title'\n  element :author, String, :tag =&gt; 'author'\nend\n\nbook = Mod::Book.new\nbook.author = \"ABC\"\nbook.title = \"Ruby\"\n\nxml_obj = book.to_xml\np xml_obj\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>\"&lt;?xml version=\\\"1.0\\\"?&gt;\\n&lt;book&gt;\\n  &lt;title&gt;Ruby&lt;/title&gt;\\n  &lt;author&gt;ABC&lt;/author&gt;\\n&lt;/book&gt;\\n\"\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>obj = Mod::Book.parse(xml_obj)\np obj\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>#&lt;Mod::Book:0x00000000661cf0 @author=\"ABC\", @title=\"Ruby\"&gt;\n</code></pre>\n\n<p>How can I remove the indentation when generating XML from an object, along with the XML instruction for both approaches?</p>\n\n<p>I have tried following approaches :\nApproach 1:</p>\n\n<pre><code> xml =  Nokogiri::XML(xml_obj).to_xml(:save_with =&gt;  Nokogiri::XML::Node::SaveOptions::AS_XML | Nokogiri::XML::Node::SaveOptions::NO_DECLARATION)\n p xml\n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>\"&lt;book&gt;\\n  &lt;title&gt;Ruby&lt;/title&gt;\\n  &lt;author&gt;ABC&lt;/author&gt;\\n&lt;/book&gt;\\n\" \n</code></pre>\n\n<p>Approach 2:</p>\n\n<pre><code>xml = Nokogiri::XML::Document.parse(xml_obj, nil,nil, Nokogiri::XML::ParseOptions::NOBLANKS).root.to_s\np xml \n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>\"&lt;book&gt;\\n  &lt;title&gt;Ruby&lt;/title&gt;\\n  &lt;author&gt;ABC&lt;/author&gt;\\n&lt;/book&gt;\"\n</code></pre>\n\n<p>I am using below approach to convert object to xml in roxml :</p>\n\n<pre><code>xml_obj = lib.to_xml.to_xml(:save_with =&gt; Nokogiri::XML::Node::SaveOptions::AS_XML)\np xml_obj\n</code></pre>\n\n<p>which outputs : </p>\n\n<pre><code>\"&lt;Library&gt;&lt;author&gt;&lt;name&gt;Shruti&lt;/name&gt;&lt;/author&gt;&lt;book&gt;&lt;title&gt;RoR&lt;/title&gt;&lt;/book&gt;&lt;/Library&gt;\"\n</code></pre>\n\n<p>Now when I try to convert xml back to object it gives me an additional instance variable @roxml_references as below :</p>\n\n<pre><code>obj = Library.from_xml(xml_obj)\np obj\n</code></pre>\n\n<p>which outputs : </p>\n\n<pre><code>#&lt;Library:0x00000002a1ebc0 @author=#&lt;Author:0x00000002a1c780 @name=\"Shruti\", @roxml_references=[#&lt;ROXML::XMLTextRef:0x00000002a1e1e8 @opts=#\n&lt;ROXML::Definition:0x00000002a46418 @default=nil, @to_xml=nil, @name_explicit=false, @cdata=nil, @required=nil, @frozen=nil, @wrapper=nil, @\nnamespace=nil, @accessor=\"name\", @array=false, @blocks=[], @sought_type=:text, @attr_name=\"name\", @name=\"name\"&gt;, @instance=#&lt;Author:0x000000\n02a1c780 ...&gt;, @default_namespace=nil&gt;]&gt;, @book=[#&lt;Book:0x00000002a08e60 @title=\"RoR\", @roxml_references=[#&lt;ROXML::XMLTextRef:0x00000002a092\ne8 @opts=#&lt;ROXML::Definition:0x00000002a3e8d0 @default=nil, @to_xml=nil, @name_explicit=false, @cdata=nil, @required=nil, @frozen=nil, @wrap\nper=nil, @namespace=nil, @accessor=\"title\", @array=false, @blocks=[], @sought_type=:text, @attr_name=\"title\", @name=\"title\"&gt;, @instance=#&lt;Bo\nok:0x00000002a08e60 ...&gt;, @default_namespace=nil&gt;, #&lt;ROXML::XMLTextRef:0x00000002a09400 @opts=#&lt;ROXML::Definition:0x00000002a3d6b0 @default=\nnil, @to_xml=nil, @name_explicit=false, @cdata=nil, @required=nil, @frozen=nil, @wrapper=nil, @namespace=nil, @accessor=\"description\", @arra\ny=false, @blocks=[], @sought_type=:text, @attr_name=\"description\", @name=\"description\"&gt;, @instance=#&lt;Book:0x00000002a08e60 ...&gt;, @default_na\nmespace=nil&gt;], @description=nil&gt;], @roxml_references=[#&lt;ROXML::XMLObjectRef:0x00000002a1eb20 @opts=#&lt;ROXML::Definition:0x00000002a3c080 @def\nault=nil, @to_xml=nil, @name_explicit=false, @cdata=nil, @required=nil, @frozen=nil, @wrapper=nil, @namespace=nil, @accessor=\"author\", @arra\ny=false, @blocks=[], @sought_type=Author, @attr_name=\"author\", @name=\"author\"&gt;, @instance=#&lt;Library:0x00000002a1ebc0 ...&gt;, @default_namespac\ne=nil&gt;, #&lt;ROXML::XMLObjectRef:0x00000002a1eaf8 @opts=#&lt;ROXML::Definition:0x00000002a373c8 @default=nil, @to_xml=nil, @name_explicit=false, @\ncdata=nil, @required=nil, @frozen=nil, @wrapper=nil, @namespace=nil, @accessor=\"book\", @array=true, @blocks=[], @sought_type=Book, @attr_nam\ne=\"book\", @name=\"book\"&gt;, @instance=#&lt;Library:0x00000002a1ebc0 ...&gt;, @default_namespace=nil&gt;]&gt;\n</code></pre>\n\n<p>Is there a way I can remove <code>@roxml_references</code> from object created ??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal", "paypal-ipn", "paypal-adaptive-payments"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4778326"}, "edited": false, "score": 0, "creation_date": 1490629874, "post_id": 35747264, "comment_id": 73186123, "body": "Did you ever get this figured out? Facing the same issue."}, {"owner": {"reputation": 1074, "user_id": 2591553, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/h4cFo.jpg?s=128&g=1", "display_name": "Corstiaan", "link": "https://stackoverflow.com/users/2591553/corstiaan"}, "edited": false, "score": 0, "creation_date": 1490907618, "post_id": 35747264, "comment_id": 73335281, "body": "No, unfortunately. I moved forward without the ipn notification."}], "owner": {"reputation": 1074, "user_id": 2591553, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/h4cFo.jpg?s=128&g=1", "display_name": "Corstiaan", "link": "https://stackoverflow.com/users/2591553/corstiaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456921667, "creation_date": 1456921667, "question_id": 35747264, "link": "https://stackoverflow.com/questions/35747264/paypal-adaptive-payments-ipnnotificationurl-is-not-getting-hit-for-app-facilitat", "title": "PayPal adaptive payments ipnNotificationUrl is not getting hit for app/facilitator", "body": "<p>I am creating the following pay request with the ruby adaptive payment sdk:</p>\n\n<pre><code>fee = 2\napi = PayPal::SDK::AdaptivePayments.new\npay = api.build_pay({\n    :actionType =&gt; \"PAY\",\n    :cancelUrl =&gt; \"https://localhost:3000/purchases/paypal_cancelled?purchase_guid=\" + self.guid,\n    :currencyCode =&gt; self.currency,\n    :feesPayer =&gt; \"PRIMARYRECEIVER\",\n    :ipnNotificationUrl =&gt; \"http://paypal.corstiaan.ultrahook.com/purchases/paypal_ipn_notify?purchase_guid=\" + self.guid,\n    :receiverList =&gt; {\n        :receiver =&gt; [{\n            :amount =&gt; 20,\n            :email =&gt; seller@email.com,\n            :primary =&gt; true\n            }, {\n            :amount =&gt; fee,\n            :email =&gt; 'ch-facilitator@corstiaan.com'\n         }],\n  },\n  :returnUrl =&gt; \"https://localhost:3000/purchases/paypal_success?purchase_guid=\" + self.guid + \"&amp;verification_key=\" + paypal_verification_key })\n  pay_response = api.pay(pay)\n</code></pre>\n\n<p>Everything works just like I want it to. I am the facilitator of the transaction and secondary receiver and the seller is the primary receiver. This is all ok. Also, the cancel and return urls are being called correctly.</p>\n\n<p>Only the ipnNotificationUrl is not getting hit. I have set up a forward using ultrahook.com which is getting called correctly when using paypal's ipn simulator (that does not support adaptive ipn messages for some reason...) so technically that forward should work, but I never see anything hitting my server...</p>\n\n<p>I am lost in the paypal docs, which are terrible.</p>\n\n<p>When I view the IPN history ch-facilitator@corstiaan.com I only see IPN messages that relate to the payment of the fee from the seller to facilitator, nothing regarding the whole transaction which should be posted to ipnNotificationUrl if I understand correctly up to this point.</p>\n\n<p>What am I doing wrong/what can be the problem? Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 198, "user_id": 3799287, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ddssd.jpg?s=128&g=1", "display_name": "Harish Ramachandran", "link": "https://stackoverflow.com/users/3799287/harish-ramachandran"}, "edited": false, "score": 0, "creation_date": 1456921712, "post_id": 35746974, "comment_id": 59167706, "body": "<code>second thing</code> is defined as a class method but being called as an instance method in your module."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 198, "user_id": 3799287, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ddssd.jpg?s=128&g=1", "display_name": "Harish Ramachandran", "link": "https://stackoverflow.com/users/3799287/harish-ramachandran"}, "edited": false, "score": 1, "creation_date": 1456921892, "post_id": 35746974, "comment_id": 59167833, "body": "@harishsr: there are no &quot;class methods&quot; in ruby. Every method is an instance method (here the instance being whatever the current <code>self</code> is)"}, {"owner": {"reputation": 49, "user_id": 5432942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J40N-fAl73w/AAAAAAAAAAI/AAAAAAAAAk8/HtDpoC3fMLI/photo.jpg?sz=128", "display_name": "Philippe Addor", "link": "https://stackoverflow.com/users/5432942/philippe-addor"}, "edited": false, "score": 0, "creation_date": 1456930797, "post_id": 35746974, "comment_id": 59174713, "body": "OK; indeed, now it doesn&#39;t work anymore. I don&#39;t know what I was doing before. And in the snipped above, I forgot to write the Method definition in the MyController class - but that&#39;s not the problem. So let me ask generally: If you have two Rails controllers which both share two methods (of which the second method is used by the first one). Where would you put these two methods into? Into a module, using the hook method as shown in the answer from 7stud, or maybe into a Concern?"}, {"owner": {"reputation": 49, "user_id": 5432942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J40N-fAl73w/AAAAAAAAAAI/AAAAAAAAAk8/HtDpoC3fMLI/photo.jpg?sz=128", "display_name": "Philippe Addor", "link": "https://stackoverflow.com/users/5432942/philippe-addor"}, "edited": false, "score": 0, "creation_date": 1456932033, "post_id": 35746974, "comment_id": 59175717, "body": "And this confuses further (the hook for the injection seems not necessary): <a href=\"http://yehudakatz.com/2009/11/12/better-ruby-idioms/\" rel=\"nofollow noreferrer\">yehudakatz.com/2009/11/12/better-ruby-idioms</a>"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1456922389, "post_id": 35747489, "comment_id": 59168167, "body": "It doesn&#39;t make sense to instantiate a controller."}, {"owner": {"reputation": 49, "user_id": 5432942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J40N-fAl73w/AAAAAAAAAAI/AAAAAAAAAk8/HtDpoC3fMLI/photo.jpg?sz=128", "display_name": "Philippe Addor", "link": "https://stackoverflow.com/users/5432942/philippe-addor"}, "edited": false, "score": 0, "creation_date": 1456927412, "post_id": 35747489, "comment_id": 59171888, "body": "OK, the private variable will be used only in a Rail view. As far as I understand, it&#39;s right like this. Correct me if I&#39;m wrong. I&#39;m going to try the class injection way, which seems the one to go in my case. Thank you"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 49, "user_id": 5432942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J40N-fAl73w/AAAAAAAAAAI/AAAAAAAAAk8/HtDpoC3fMLI/photo.jpg?sz=128", "display_name": "Philippe Addor", "link": "https://stackoverflow.com/users/5432942/philippe-addor"}, "edited": false, "score": 0, "creation_date": 1456956823, "post_id": 35747489, "comment_id": 59191741, "body": "@PhilippeAddor, See my response to your comment at the end of my answer."}, {"owner": {"reputation": 49, "user_id": 5432942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J40N-fAl73w/AAAAAAAAAAI/AAAAAAAAAk8/HtDpoC3fMLI/photo.jpg?sz=128", "display_name": "Philippe Addor", "link": "https://stackoverflow.com/users/5432942/philippe-addor"}, "edited": false, "score": 0, "creation_date": 1456971718, "post_id": 35747489, "comment_id": 59196909, "body": "Aha! That&#39;s a very valuable input. I wasn&#39;t aware of that little but important detail. Thank you 7stud."}, {"owner": {"reputation": 49, "user_id": 5432942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J40N-fAl73w/AAAAAAAAAAI/AAAAAAAAAk8/HtDpoC3fMLI/photo.jpg?sz=128", "display_name": "Philippe Addor", "link": "https://stackoverflow.com/users/5432942/philippe-addor"}, "edited": false, "score": 0, "creation_date": 1456974943, "post_id": 35747489, "comment_id": 59197876, "body": "I realized that I&#39;m not trying to include Class Methods, but Instance Methods to a controller. I have now achieved my desired code reuseability by putting the two instance methods into a helper module instead of a &quot;standard&quot; module. That is more straight forward for me. Now I can access both outsourced methods in two different controllers where I include the helper. I&#39;m afraid it&#39;s not best practice though..."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": -1, "last_activity_date": 1456962462, "last_edit_date": 1456962462, "creation_date": 1456922332, "answer_id": 35747489, "question_id": 35746974, "link": "https://stackoverflow.com/questions/35746974/access-a-ruby-modules-method-within-same-module/35747489#35747489", "title": "Access a Ruby module&#39;s method within same module", "body": "<blockquote>\n  <p>What do I misunderstand?</p>\n</blockquote>\n\n<p>1) An <code>@variable</code> is private, so you always need to provide an accessor method to access it (or use <code>instance_variable_get()</code> to violate privacy):</p>\n\n<pre><code>module CommonStuff\n  def common_thing\n    @x = second_thing # --&gt; should access method in same module. Doesn't work.\n  end\n\n  def second_thing\n    10\n  end\nend\n\n\nclass MyController \n  include CommonStuff\n\n  attr_accessor :x\nend\n\nobj = MyController.new\nobj.common_thing\nputs obj.x\n\n--output:--\n10\n</code></pre>\n\n<p>2) You can't include a module's class methods:</p>\n\n<pre><code>module CommonStuff\n  def self.common_thing\n    puts 'hello'\n    @x = second_thing # --&gt; should access method in same module. Doesn't work.\n  end\n\n  def self.second_thing\n    10\n  end\nend\n\nclass MyController \n  include CommonStuff\nend\n\n\nCommonStuff.common_thing\nMyController.common_thing\n\n--output:--\nhello\n\n1.rb:21:in `&lt;main&gt;': undefined method `common_thing' for MyController:Class (NoMethodError)\n\n#obj = MyController.new  \n#obj.common_thing   #Same error here\n</code></pre>\n\n<p>If you want to inject some class methods into MyController, you need to rework your CommonStuff module:</p>\n\n<pre><code>module CommonStuff\n  def self.included(includer)  #Advanced 'hook' method\n    includer.extend ClassMethods\n  end\n\n  module ClassMethods\n    def common_thing\n      puts 'hello'\n      @x = second_thing # --&gt; should access method in same module. Doesn't work.\n    end\n\n    def second_thing\n      10\n    end\n  end\nend\n\nclass MyController \n  include CommonStuff\n  y = common_thing\n  puts y\n\n  puts instance_variable_get(:@x)\nend\n\n--output:--\n10\n10\n</code></pre>\n\n<p>The hook method is called whenever the module is included by another class/module, and the method is passed the including class/module as an argument.</p>\n\n<p><strong>Response to commment:</strong> </p>\n\n<p>Only a controller's <em>instance variables</em> are made available in a view, e.g.:</p>\n\n<pre><code>class MyController\n\n   def do_stuff\n     @x = 10  #instance variable\n   end\n\nend\n</code></pre>\n\n<p>but <code>@variables</code> created inside class methods are not the controller's instance variables:</p>\n\n<pre><code>class MyController\n\n   def self.do_stuff\n     @x = 10  \n   end\n\nend\n</code></pre>\n\n<p>Therefore, <code>@variables</code> created inside class methods will not be available in the view.</p>\n"}], "owner": {"reputation": 49, "user_id": 5432942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J40N-fAl73w/AAAAAAAAAAI/AAAAAAAAAk8/HtDpoC3fMLI/photo.jpg?sz=128", "display_name": "Philippe Addor", "link": "https://stackoverflow.com/users/5432942/philippe-addor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1680, "favorite_count": 0, "accepted_answer_id": 35747489, "answer_count": 1, "score": -2, "last_activity_date": 1456981936, "creation_date": 1456920905, "last_edit_date": 1456981936, "question_id": 35746974, "link": "https://stackoverflow.com/questions/35746974/access-a-ruby-modules-method-within-same-module", "title": "Access a Ruby module&#39;s method within same module", "body": "<p>I'm new to Ruby and probably don't understand something basic: </p>\n\n<p>I'm trying this: </p>\n\n<pre><code># lib/common_stuff.rb\nmodule CommonStuff\n  def self.common_thing\n    # code\n    @x = second_thing # --&gt; should access method in same module. Doesn't work.\n  end\n  def self.second_thing\n    # code\n  end\nend\n\n# app/controllers/my_controller.rb\nrequire 'common_stuff'\nclass MyController &lt; ApplicationController\n  include CommonStuff\n  y = self.common_thing # accesses the Module method -&gt; works\nend\n</code></pre>\n\n<p>Error: </p>\n\n<blockquote>\n  <p>NoMethodError (undefined method `second_thing' for\n  MyController:0x000000088d8990):    lib/common.rb:7:in 'common_thing'</p>\n</blockquote>\n\n<p>I tried both with Module and instance methods. Also declaring only the second_thing an instance method or both methods in the Module as instance methods doesn't work.  What do I misunderstand? </p>\n\n<p>** EDIT Corrections**</p>\n\n<p>I realized that my mistake was to make the methods class methods (with self. prefix). Without that it actually works. Thought I tried that, but I must have been blind yesterday. So the working code is (just a constructed example - normally I wouldn't instantiate the controller of course): </p>\n\n<pre><code># lib/common_stuff.rb\n\nmodule CommonStuff\n  def common_thing\n    @x = second_thing # --&gt;  access method in same module.  Works now too. \n  end\n\n  def second_thing\n    10\n  end\nend\n\n# app/controllers/my_controller.rb\n\n\nrequire 'common_stuff.rb'\n\nclass MyController\n\n  include CommonStuff\n\n  def a_class\n    y = common_thing # accesses the Module method -&gt; works\n    puts y\n  end\nend\n\nctrl = MyController.new\nctrl.a_class\n</code></pre>\n"}, {"tags": ["ruby", "heroku", "sinatra"], "comments": [{"owner": {"reputation": 737, "user_id": 1254263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48dd0578cffb6439d6b0fab3926a7095?s=128&d=identicon&r=PG", "display_name": "maxbeizer", "link": "https://stackoverflow.com/users/1254263/maxbeizer"}, "edited": false, "score": 0, "creation_date": 1456958705, "post_id": 35746272, "comment_id": 59192685, "body": "what&#39;s in your procfile?"}, {"owner": {"reputation": 151, "user_id": 3896998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/956599926a5b8a7f71c27852641a7653?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/3896998/jon"}, "edited": false, "score": 0, "creation_date": 1458705081, "post_id": 35746272, "comment_id": 59975913, "body": "You can get a better detailed error log by running: <code>heroku run rails console</code>"}], "owner": {"reputation": 55, "user_id": 5322292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8e08908bbe2a907ee565aea85d303e?s=128&d=identicon&r=PG", "display_name": "Charlie Allen", "link": "https://stackoverflow.com/users/5322292/charlie-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456919072, "creation_date": 1456919072, "question_id": 35746272, "link": "https://stackoverflow.com/questions/35746272/heroku-app-crashing-h10-error-code-in-spite-of-restarting-dynos", "title": "Heroku app crashing H10 error code in spite of restarting dynos", "body": "<p>I have a very basic Ruby/Sinatra app which I have pushed to Heroku successfully, however when I try and load the page it crashes.</p>\n\n<p>Running heroku logs -t --app [app-name] produces the following error:</p>\n\n<pre><code>2016-03-02T11:43:31.024897+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=gothons-from-planet-percal.herokuapp.com request_id=6af6df55-d33d-4223-af5c-bd39fd788f1b fwd=\"46.252.71.90\" dyno= connect= service= status=503 bytes=\n2016-03-02T11:43:31.773275+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=gothons-from-planet-percal.herokuapp.com request_id=401bcfb0-81da-4fb1-9b4e-e0877d0defcc fwd=\"46.252.71.90\" dyno= connect= service= status=503 bytes=\n</code></pre>\n\n<p>I've tried running through the process to restart dynos, and it says it restarts the app but then the app crashes again. How can I fix this please?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "time", "strftime"], "comments": [{"owner": {"reputation": 1296, "user_id": 5773006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ddVI.jpg?s=128&g=1", "display_name": "axvm", "link": "https://stackoverflow.com/users/5773006/axvm"}, "edited": false, "score": 1, "creation_date": 1456918078, "post_id": 35745251, "comment_id": 59165091, "body": "Any reason to do it on backend? Don&#39;t waste time, use <code>momentjs</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1456918324, "post_id": 35745251, "comment_id": 59165275, "body": "<code>strftime</code> doesn&#39;t include these, because they are relative to another date / time, e.g. <code>Time.now</code>. Furthermore, they depend on the user&#39;s timezone, i.e. my &quot;today&quot; doesn&#39;t have to be your &quot;today&quot; (although it is in this case)."}], "answers": [{"tags": [], "owner": {"reputation": 1874, "user_id": 347698, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/97a603e8b378256cd3f706912dbfd031?s=128&d=identicon&r=PG", "display_name": "chaitanya", "link": "https://stackoverflow.com/users/347698/chaitanya"}, "is_accepted": false, "score": 1, "last_activity_date": 1456917688, "creation_date": 1456917688, "answer_id": 35745765, "question_id": 35745251, "link": "https://stackoverflow.com/questions/35745251/extend-strftime-directives-to-format-a-time-like-tomorrow-at-1400/35745765#35745765", "title": "Extend strftime directives to format a time like &quot;tomorrow at 14:00&quot;", "body": "<p>I think following <strong>distance_of_time_in_words</strong> helper would help.</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words</a></p>\n"}, {"comments": [{"owner": {"reputation": 4377, "user_id": 363777, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/1EIja.jpg?s=128&g=1", "display_name": "Tobi Nary", "link": "https://stackoverflow.com/users/363777/tobi-nary"}, "edited": false, "score": 0, "creation_date": 1456924439, "post_id": 35748136, "comment_id": 59169581, "body": "Whilst this may theoretically answer the question, <a href=\"//meta.stackoverflow.com/q/8259\">it would be preferable</a> to include the essential parts of the answer here, and provide the link for reference."}], "tags": [], "owner": {"reputation": 70, "user_id": 4288632, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FFgxes70um4/AAAAAAAAAAI/AAAAAAAAACo/E3gOEL77a6I/photo.jpg?sz=128", "display_name": "Drew Reynolds", "link": "https://stackoverflow.com/users/4288632/drew-reynolds"}, "is_accepted": false, "score": 1, "last_activity_date": 1456924126, "creation_date": 1456924126, "answer_id": 35748136, "question_id": 35745251, "link": "https://stackoverflow.com/questions/35745251/extend-strftime-directives-to-format-a-time-like-tomorrow-at-1400/35748136#35748136", "title": "Extend strftime directives to format a time like &quot;tomorrow at 14:00&quot;", "body": "<p>You can use Rails <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words\" rel=\"nofollow\">Distance of Time in Words</a> which will give you 'about 1 day' but I think it would be easier to use MomentJS's <a href=\"http://momentjs.com/docs/#/displaying/calendar-time/\" rel=\"nofollow\">Calendar Time</a>.</p>\n\n<p>Calendar Time will help you return something like \" Tomorrow at 2:30 AM\"</p>\n"}], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1456924126, "creation_date": 1456916289, "question_id": 35745251, "link": "https://stackoverflow.com/questions/35745251/extend-strftime-directives-to-format-a-time-like-tomorrow-at-1400", "title": "Extend strftime directives to format a time like &quot;tomorrow at 14:00&quot;", "body": "<p>I've found the list of format directives for the <code>strftime</code> method <a href=\"http://ruby-doc.org/core-2.3.0/Time.html#method-i-strftime\" rel=\"nofollow\">http://ruby-doc.org/core-2.3.0/Time.html#method-i-strftime</a></p>\n\n<p>There are various options to format a time like weekdays, day of month... But I'm interested in formating a Time like</p>\n\n<pre><code>Time.parse(\"2016-02-30T12:24\").strftime(\"%XXX, at %H:%M\")\n# =&gt; tomorrow at 12:24\n</code></pre>\n\n<p>Here <code>%XXX</code> should be \"today\", \"yesterday\", \"tomorrow\", \"in 2 days\" or \"in 3 days\".</p>\n\n<blockquote>\n  <p>Is it possible to extend the directives of <code>strftime</code> so that I can use my own placeholder?</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1456914678, "post_id": 35744381, "comment_id": 59162513, "body": "Are there any other attributes on subscription?  or just the ids for the associations?"}, {"owner": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1456915248, "post_id": 35744381, "comment_id": 59162968, "body": "@j-dexx I think that for what I need to achieve it only needs to define the association."}], "answers": [{"comments": [{"owner": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "edited": false, "score": 0, "creation_date": 1456915909, "post_id": 35744963, "comment_id": 59163480, "body": "Thanks, this is such a help! What would the create and new controllers look like?"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "edited": false, "score": 0, "creation_date": 1456916005, "post_id": 35744963, "comment_id": 59163547, "body": "@GeorgeEdwards I wouldn&#39;t have a new or create personally, as you&#39;re always technically editing the user and you&#39;ll have the <code>User</code> controller actually creating the user."}, {"owner": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "edited": false, "score": 0, "creation_date": 1456916093, "post_id": 35744963, "comment_id": 59163623, "body": "Ahh, sorry I am a bit confused. I thought of creating a new subscription item, but this is adding a subscription object to my user, is that correct?"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "edited": false, "score": 0, "creation_date": 1456916186, "post_id": 35744963, "comment_id": 59163691, "body": "Yes, <code>has_many through</code> allows you to pass the <code>widget_ids</code> to the user, and rails will then automatically create the subscriptions for you."}, {"owner": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "edited": false, "score": 0, "creation_date": 1456916313, "post_id": 35744963, "comment_id": 59163775, "body": "Amazing - thank you! Do I need to create a new UserSubscriptions Controller for that to work, atm I only have <code>subscriptions_controller</code> and <code>widgets_controller</code>"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "edited": false, "score": 0, "creation_date": 1456916437, "post_id": 35744963, "comment_id": 59163869, "body": "No, you could simply add it to your normal form for the user if you want.  You could use your subscriptions controller."}, {"owner": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "edited": false, "score": 0, "creation_date": 1456917041, "post_id": 35744963, "comment_id": 59164353, "body": "the <code>User_Subscription_params</code> is throwing error <code>param is missing or the value is empty: user</code>"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "edited": false, "score": 0, "creation_date": 1456917550, "post_id": 35744963, "comment_id": 59164710, "body": "It shouldn&#39;t be, because the form is bound to the user.  Are you using form_for?"}, {"owner": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "edited": false, "score": 0, "creation_date": 1456918840, "post_id": 35744963, "comment_id": 59165621, "body": "Yes, I have got the exact snippet you posted in views/subscriptions/_form.html.erb, where new.html.erb is just <code>&lt;%= render &#39;form&#39; %&gt;</code> the url where this error is thrown is /subscriptions"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "edited": false, "score": 0, "creation_date": 1456924009, "post_id": 35744963, "comment_id": 59169300, "body": "@GeorgeEdwards <a href=\"https://github.com/j-dexx/user_widgets\" rel=\"nofollow noreferrer\">code</a> you must have done something differently.  I had one error, need to specify widget_ids as an array, changed that in my answer.  if you clone repo and <code>rake db:migrate</code> and <code>rake db:seed</code> it works"}], "tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": false, "score": 3, "last_activity_date": 1456923858, "last_edit_date": 1456923858, "creation_date": 1456915543, "answer_id": 35744963, "question_id": 35744381, "link": "https://stackoverflow.com/questions/35744381/setting-up-rails-controller-for-the-through-in-has-many-through-relationship/35744963#35744963", "title": "Setting up Rails Controller for the through in has_many through relationship", "body": "<p>Assuming you don't have any other attributes on subscriptions you can use the <code>widget_ids=</code> method that your <code>has_many</code> creates on user</p>\n\n<p>Controller</p>\n\n<pre><code>class UserSubscriptionsController\n  def edit\n    @user = current_user\n  end\n\n  def update\n    @user = current_user\n    if @user.update(user_subscription_params)\n      redirect_to @user, notice: \"Subscriptions updated\"\n    else\n      render :edit\n    end\n  end\n\n  private\n\n  def user_subscription_params\n    params.require(:user).permit(widget_ids: [])\n  end\nend\n</code></pre>\n\n<p>View</p>\n\n<pre><code>&lt;%= form_for @user, url: user_subscription_path, method: :patch do |f| %&gt;\n  &lt;%= f.collection_check_boxes :widget_ids, Widget.all, :id, :name %&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The routes in my example would have</p>\n\n<pre><code>resource :user_subscription, only: [:edit, :update]\n</code></pre>\n\n<p>But obviously you can amend based on what you want your routes to be.\nRails will automatically create the subscriptions when updating the user.</p>\n\n<p>You could instead just use the <code>collection_check_boxes</code> when editing a user normally if you wanted.  There is also <code>collection_select</code></p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html\" rel=\"nofollow\">Docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 1874, "user_id": 347698, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/97a603e8b378256cd3f706912dbfd031?s=128&d=identicon&r=PG", "display_name": "chaitanya", "link": "https://stackoverflow.com/users/347698/chaitanya"}, "is_accepted": false, "score": 0, "last_activity_date": 1456915553, "creation_date": 1456915553, "answer_id": 35744966, "question_id": 35744381, "link": "https://stackoverflow.com/questions/35744381/setting-up-rails-controller-for-the-through-in-has-many-through-relationship/35744966#35744966", "title": "Setting up Rails Controller for the through in has_many through relationship", "body": "<p>You can save data like this using subscription form. </p>\n\n<pre><code>  = form_for @subscription do |f|\n   = f.select :widget_id, options_from_collection_for_select(Widget.all, \"id\", \"title\"), {}, {:class =&gt; \"form-control select\" }\n   = f.hidden_field :user_id, :value =&gt; current_user.id\n   #other subscription fields\n   = f.submit\n</code></pre>\n"}], "owner": {"reputation": 7967, "user_id": 4620733, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-ajCsJtIDhCE/AAAAAAAAAAI/AAAAAAAAABU/VDLJ1dSAyvk/photo.jpg?sz=128", "display_name": "George Edwards", "link": "https://stackoverflow.com/users/4620733/george-edwards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 840, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456923858, "creation_date": 1456914142, "question_id": 35744381, "link": "https://stackoverflow.com/questions/35744381/setting-up-rails-controller-for-the-through-in-has-many-through-relationship", "title": "Setting up Rails Controller for the through in has_many through relationship", "body": "<p>I am creating a rails web app with a many-to-many through model. The application is to allow users to populate their dashboard with a number of pre-defined \"widgets\". So I have a table of users (created and managed by devise) and a table of widgets. All good. So to manage the through bit, I have a table of \"subscriptons\". Here are my models:</p>\n\n<pre><code>class Subscription &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :widget\n  validates_uniqueness_of :user_id, scope: :widget_id\nend\n\nclass User &lt; ActiveRecord::Base\n  has_many :subscriptions\n  has_many :widgets, through: :subscriptions\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\nend\n\nclass Widget &lt; ActiveRecord::Base\n  has_many :subscriptions\n  has_many :users, through: :subscriptions\nend\n</code></pre>\n\n<p>However, I don't really understand how to create the subscriptions. I would ideally like the create form to just have a selector to choose from all available widgets and then user the current <code>user:id</code> but I am not sure how this would work, here is my controller:</p>\n\n<pre><code>  def new\n    @subscription = Subscription.new\n  end\n\n  def create\n    @user = current_user\n    @subscription = @user.subscriptions.build(subscription_params)\n\n    respond_to do |format|\n      if @subscription.save\n        format.html { redirect_to @subscription, notice: 'subscription was successfully created.' }\n        format.json { render :show, status: :created, location: @subscription }\n      else\n        format.html { render :new }\n        format.json { render json: @subscription.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>I would really appreciate a nudge in the right direction, as I can't understand how this is done from the official docs and haven't found any good tutorials relating to this. </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "edited": false, "score": 0, "creation_date": 1456914847, "post_id": 35744364, "comment_id": 59162653, "body": "Why don&#39;t you use the checkbox form helper with the multiple option set to true rather than creating the array client side?"}, {"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "reply_to_user": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "edited": false, "score": 0, "creation_date": 1456914926, "post_id": 35744364, "comment_id": 59162706, "body": "@Rubysmith I&#39;m not sure I understand what you mean?"}, {"owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "edited": false, "score": 0, "creation_date": 1456915075, "post_id": 35744364, "comment_id": 59162827, "body": "<a href=\"http://apidock.com/rails/ActionView/Helpers/FormHelper/check_box#1001-Sending-array-parameters\" rel=\"nofollow noreferrer\">Sending array parameters</a>"}, {"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "reply_to_user": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "edited": false, "score": 0, "creation_date": 1456915352, "post_id": 35744364, "comment_id": 59163054, "body": "@Rubysmith Because the array still has opportunity to be changed elsewhere, I want it to be submitted once it has been calculated. Can you suggest how I can re-write the line where I set the value of #parti_ids?"}, {"owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "edited": false, "score": 0, "creation_date": 1456916189, "post_id": 35744364, "comment_id": 59163694, "body": "The problem is not with the JavaScript instead it is with the hidden_field_tag and how Rails handles params. I guess you might have to generate a hidden field for each of your check-boxes then."}], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1456916711, "post_id": 35745336, "comment_id": 59164080, "body": "Doing this has caused the id_array to be passed to the controller as a String &quot;3,4,5&quot; instead of an array, and therefore it&#39;s not letting me do participants.each"}, {"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1456917015, "post_id": 35745336, "comment_id": 59164337, "body": "Ok, this has made no difference to what I was getting to my controller before. It&#39;s still receiving [&quot;3,4,5&quot;] instead of [&quot;3&quot;,&quot;4&quot;,&quot;5&quot;]"}, {"owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "reply_to_user": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 1, "creation_date": 1456917289, "post_id": 35745336, "comment_id": 59164538, "body": "The above answer is the simplest workaround for now."}], "tags": [], "owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "is_accepted": true, "score": 0, "last_activity_date": 1456917208, "last_edit_date": 1456917208, "creation_date": 1456916513, "answer_id": 35745336, "question_id": 35744364, "link": "https://stackoverflow.com/questions/35744364/javascript-made-array-not-being-sent-to-controller-as-an-array/35745336#35745336", "title": "javascript-made array not being sent to controller as an array?", "body": "<p>Remove this line.</p>\n\n<pre><code>&lt;%= hidden_field_tag 'id_array[]', [], id: 'parti_ids'  %&gt;\n</code></pre>\n\n<p>and add this.</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"id_array\" id=\"parti_ids\" /&gt;\n</code></pre>\n\n<p>Then split it.</p>\n\n<pre><code>  participants = params[:id_array]\n  participants.split(',').each do |id|\n    puts(id) #THIS PUTS EACH ID\n  end\n</code></pre>\n"}], "owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 35745336, "answer_count": 1, "score": 0, "last_activity_date": 1456917208, "creation_date": 1456914084, "question_id": 35744364, "link": "https://stackoverflow.com/questions/35744364/javascript-made-array-not-being-sent-to-controller-as-an-array", "title": "javascript-made array not being sent to controller as an array?", "body": "<p>I have a view `events/new.html.erb which contains:</p>\n\n<pre><code>&lt;%= hidden_field_tag 'id_array[]', [], id: 'parti_ids'  %&gt;\n\n&lt;%= f.submit \"Create Meeting\", class: \"btn-submit\" %&gt;\n</code></pre>\n\n<p>So that, on submit, id_array[] is sent to my <code>events_controller#create</code> action as an array. <strong>The problem I am having is that if, for example, I want <code>id_array = [3,4,5]</code>, it is passed and picked up at the controller as <code>[\"3,4,5\"]</code> instead of <code>[\"3\",\"4\",\"5\"]</code>.</strong></p>\n\n<p>Here is the code in my <code>application.js</code> where this is created:</p>\n\n<pre><code>var idList = [];\n\n$(document).on('click', \"#check-button\", function(){\n\n   ....\n\n    $(\"#check-list li input\").each(function(){ //for each listed colleague...\n        if( $(this).is(\":checked\")){ //if check-box is ticked\n\n            idList.push($(this).val()); //add id to idList\n\n        }\n    });\n\n    $('#parti_ids').val(idList); //sets idList array to be value of parti_ids hidden_tag_field in view\n\n});\n</code></pre>\n\n<p>I have a feeling it's something to do with the line <code>$('#parti_ids').val(idList);</code> , as this is the only place where parti_ids is actually set. But I don't know what's wrong with setting the array value like this, or why it's making things like [\"3,4\"] instead of [\"3\",\"4\"].</p>\n\n<p>To show you how I'm using it in my controller, here is a snippet:</p>\n\n<pre><code>participants = params[:id_array]\nparticipants.each do |id|\n   puts(id) #THIS PUTS THE ENTIRE VALUE OF PARTICIPANTS INSTEAD OF EACH ID\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "sorting"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1456914559, "post_id": 35744004, "comment_id": 59162407, "body": "<i>Sidenote</i>: the accepted answer to the linked question perfectly works for negatives, even more, the answer by John is an exact copy of it."}, {"owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1456915704, "post_id": 35744004, "comment_id": 59163312, "body": "@mudasobwa My bad! I am sorry. The answer is working for negatives. I don&#39;t how I missed that."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1456938295, "post_id": 35744004, "comment_id": 59180488, "body": "@Stefan, I am not convinced this is a duplicate of the referenced question. Even if it were, however, the (two) answers there do not span the range of possible approaches to this problem. Aside: I find the latter is often a problem when marking a question as a dup. Sometimes the referenced question has no good answers."}, {"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456947815, "post_id": 35744004, "comment_id": 59186531, "body": "@mudasobwa, nearly. I am explicitly not treating <code>false</code> the same as <code>nil</code>, but there&#39;s not much point in since booleans can&#39;t be compared in Ruby anyway."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1456915011, "last_edit_date": 1456915011, "creation_date": 1456913502, "answer_id": 35744132, "question_id": 35744004, "link": "https://stackoverflow.com/questions/35744004/sorting-using-sort-by-with-nils-appearing-in-the-front/35744132#35744132", "title": "Sorting using sort_by with nils appearing in the front", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.3.0/Float.html#INFINITY\" rel=\"nofollow\"><code>Float::INFINITY</code></a> if your other values are numeric:</p>\n\n<pre><code>[-1, 2, 3, nil, nil].sort_by { |n| n || -Float::INFINITY }\n#=&gt; [nil, nil, -1, 2, 3]\n</code></pre>\n\n<p>Another way to write this is:</p>\n\n<pre><code>sort_by { |n| n ? n : -Float::INFINITY }\n</code></pre>\n\n<p>or more explicitly regarding <code>nil</code>:</p>\n\n<pre><code>sort_by { |n| n.nil? ? -Float::INFINITY : n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "edited": false, "score": 0, "creation_date": 1456916021, "post_id": 35744395, "comment_id": 59163557, "body": "I understand how <code>x.nil? 0:1</code> makes it appear before positives but don&#39;t understand how placing x at the end in <code>[(x.nil?)?0:1, x]</code> makes it appear at the front before negative numbers?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "edited": false, "score": 0, "creation_date": 1456916167, "post_id": 35744395, "comment_id": 59163683, "body": "@Lokesh arrays are compared element-wise, i.e. <code>[0, x]</code> comes before <code>[1, y]</code> regardless of <code>x</code> and <code>y</code>. See <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-3C-3D-3E\" rel=\"nofollow noreferrer\"><code>Array#&lt;=&gt;</code></a>"}, {"owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1456916244, "post_id": 35744395, "comment_id": 59163731, "body": "Ok. Thanks. Can you help me decide which way is better performance wise. This another or yours @Stefan?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1456916312, "post_id": 35744395, "comment_id": 59163774, "body": "Comparing numerics is undoubtedly faster than comparing arrays."}], "tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": false, "score": 2, "last_activity_date": 1456914869, "last_edit_date": 1456914869, "creation_date": 1456914182, "answer_id": 35744395, "question_id": 35744004, "link": "https://stackoverflow.com/questions/35744004/sorting-using-sort-by-with-nils-appearing-in-the-front/35744395#35744395", "title": "Sorting using sort_by with nils appearing in the front", "body": "<pre><code>&gt; [-1, 2, 3, nil, nil].sort_by{|x| [(x.nil?)?0:1, x]}\n =&gt; [nil, nil, -1, 2, 3] \n</code></pre>\n\n<p>This avoids comparing int with nil, by takign advantage of the short circuiting behaviour of the <code>&lt;=&gt;</code> for arrays</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1456941466, "creation_date": 1456941466, "answer_id": 35754704, "question_id": 35744004, "link": "https://stackoverflow.com/questions/35744004/sorting-using-sort-by-with-nils-appearing-in-the-front/35754704#35754704", "title": "Sorting using sort_by with nils appearing in the front", "body": "<p>I suggest</p>\n\n<pre><code>def sort_by_with_val_first(arr, val=nil)\n  ([val]*arr.count(val)).concat (arr-[val]).sort_by { |e| yield e }\nend\n\narr = [-1, 2, 3, nil, nil, -4]\nsort_by_with_val_first(arr) { |x| x.abs }\n  #=&gt; [nil, nil, -1, 2, 3, -4]\n</code></pre>\n\n<p>I like how this reads: \"Create an array comprised of the elements <code>val</code> in <code>arr</code>, then concatenate this array with <code>arr</code> with elements <code>val</code> removed, sorted as desired\". Converting <code>val</code> in the <code>sort_by</code> to an artificial value that will make it work is, to me, aesthetically displeasing.  </p>\n"}], "owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 35744132, "answer_count": 3, "score": 1, "last_activity_date": 1456941466, "creation_date": 1456913165, "last_edit_date": 1495535285, "question_id": 35744004, "link": "https://stackoverflow.com/questions/35744004/sorting-using-sort-by-with-nils-appearing-in-the-front", "title": "Sorting using sort_by with nils appearing in the front", "body": "<p>Is there any way to use <code>sort_by</code> and make <code>nil</code>s appear in the front.</p>\n\n<p>For example</p>\n\n<pre><code>[-1, 2, 3, nil, nil].sort_by &amp;some_block\n</code></pre>\n\n<p>should give</p>\n\n<pre><code>#=&gt; [nil, nil, -1, 2, 3]\n</code></pre>\n\n<p>It's similar to <a href=\"https://stackoverflow.com/questions/4475991/sorting-an-array-based-on-an-attribute-that-may-be-nil-in-some-elements\">this question</a> but the solution there does not work with negative values.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "switch-statement"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 4, "creation_date": 1456912648, "post_id": 35743751, "comment_id": 59161095, "body": "Please show the code that is not working."}, {"owner": {"reputation": 3749, "user_id": 157328, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac95d8758026b818881ed564fd5bb9bb?s=128&d=identicon&r=PG", "display_name": "Leventix", "link": "https://stackoverflow.com/users/157328/leventix"}, "edited": false, "score": 0, "creation_date": 1456913468, "post_id": 35743751, "comment_id": 59161653, "body": "added an example, check if that&#39;s what you meant"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 3749, "user_id": 157328, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac95d8758026b818881ed564fd5bb9bb?s=128&d=identicon&r=PG", "display_name": "Leventix", "link": "https://stackoverflow.com/users/157328/leventix"}, "edited": false, "score": 0, "creation_date": 1456914201, "post_id": 35743751, "comment_id": 59162177, "body": "@Leventix what is <code>unprotected</code>?"}, {"owner": {"reputation": 3749, "user_id": 157328, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac95d8758026b818881ed564fd5bb9bb?s=128&d=identicon&r=PG", "display_name": "Leventix", "link": "https://stackoverflow.com/users/157328/leventix"}, "edited": false, "score": 0, "creation_date": 1456915183, "post_id": 35743751, "comment_id": 59162916, "body": "unprotected would be a method that returns an object with a <code>===</code> method, and that returns <code>true</code> if its argument is either one of the above strings."}, {"owner": {"reputation": 3749, "user_id": 157328, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac95d8758026b818881ed564fd5bb9bb?s=128&d=identicon&r=PG", "display_name": "Leventix", "link": "https://stackoverflow.com/users/157328/leventix"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1456915537, "post_id": 35743751, "comment_id": 59163197, "body": "@Stefan added an example to my answer below"}], "answers": [{"tags": [], "owner": {"reputation": 3749, "user_id": 157328, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac95d8758026b818881ed564fd5bb9bb?s=128&d=identicon&r=PG", "display_name": "Leventix", "link": "https://stackoverflow.com/users/157328/leventix"}, "is_accepted": false, "score": 2, "last_activity_date": 1456915456, "last_edit_date": 1456915456, "creation_date": 1456913049, "answer_id": 35743959, "question_id": 35743751, "link": "https://stackoverflow.com/questions/35743751/using-in-case-switch-in-rails-wrap-in-method/35743959#35743959", "title": "Using || in Case switch in Rails wrap in method", "body": "<p>It would probably simplest to use <code>if</code> and <code>elsif</code> instead of a <code>case</code>.</p>\n\n<p>But <code>case</code> uses the <code>===</code> method behind the scenes, so you can define a function that returns an object that responds to <code>===</code> the way you want. See <a href=\"http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/\" rel=\"nofollow\">this article</a> to get an idea.</p>\n\n<p>Example:</p>\n\n<pre><code>def unprotected\n  o = Object.new\n  class &lt;&lt; o\n    def ===(s)\n      s == 'a' || s == 'b'\n    end\n  end\n  o\nend\n\ndef test(page_title)\n  result =\n    case page_title\n    when unprotected then 'match'\n    else 'no match'\n    end\n  puts \"#{page_title} =&gt; #{result}\"\nend\n\ntest 'a' # =&gt; match\ntest 'b' # =&gt; match\ntest 'c' # =&gt; no match\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1456915740, "creation_date": 1456915740, "answer_id": 35745033, "question_id": 35743751, "link": "https://stackoverflow.com/questions/35743751/using-in-case-switch-in-rails-wrap-in-method/35745033#35745033", "title": "Using || in Case switch in Rails wrap in method", "body": "<p>You totally can use methods here. Have those methods return arrays [of possible options], which you will then splat.</p>\n\n<pre><code>def unprotected\n  [\"Log in\", \"Forgot Your Password\", \"Create a New Password\"]\nend\n\ndef check(page)\n  case page\n  when *unprotected then 'unprotected'\n  else 'protected'\n  end\nend\n\ncheck('Log in') # =&gt; \"unprotected\"\ncheck('Buy') # =&gt; \"protected\"\n</code></pre>\n"}], "owner": {"reputation": 1232, "user_id": 5859203, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207514017080224/picture?type=large", "display_name": "TamRock", "link": "https://stackoverflow.com/users/5859203/tamrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 35745033, "answer_count": 2, "score": -1, "last_activity_date": 1456919211, "creation_date": 1456912529, "last_edit_date": 1495535285, "question_id": 35743751, "link": "https://stackoverflow.com/questions/35743751/using-in-case-switch-in-rails-wrap-in-method", "title": "Using || in Case switch in Rails wrap in method", "body": "<p>follow up question to this question</p>\n\n<p><a href=\"https://stackoverflow.com/questions/841585/using-in-case-switch-in-rails\">Using || in Case switch in Rails</a></p>\n\n<p>My question is what should be done when wrapping the when's in a method to make the code more readable. returning it directly as you would write it does not work for me?</p>\n\n<p>Example:</p>\n\n<pre><code>case @page_title\nwhen \"Log in\", \"Forgot Your Password\", \"Create a New Password\" then #...\n</code></pre>\n\n<p>I'd like:</p>\n\n<pre><code>case @page_title\nwhen unprotected then #...\n</code></pre>\n\n<p>My solution according to the answer below would be(use if and elsif instead)</p>\n\n<p>Code before(switch):</p>\n\n<pre><code>case stats_category.unit\nwhen StatsCategory::UNITS::SAME_AS_NAME_INTEGER, StatsCategory::UNITS::SECONDS\n  if !is_integer\n    @error = true\n    @message = \"\"\n  else\n    write_attribute(:data,value)\n  end\nwhen StatsCategory::UNITS::KILOMETERS, StatsCategory::UNITS::SAME_AS_NAME_DECIMAL\n  if !is_float\n    @error = true\n    @message = \"\"\n  else\n    write_attribute(:data,value)\n  end\nwhen StatsCategory::UNITS::HH_MM_SS\n  if !is_HH_MM_SS\n    @error = true\n    @message = \"\"\n  else\n    write_attribute(:data,value.split(\":\").sum)\n  end\nend \n</code></pre>\n\n<p>Code after refac (if,elsif):</p>\n\n<pre><code>category_unit = stats_category.unit\n    if integer_unit(category_unit)\n      if !is_integer\n        @error = true\n        @message = \"\"\n      else\n        write_attribute(:data,value)\n      end\n    elsif float_unit(category_unit)\n      if !is_float\n        @error = true\n        @message = \"\"\n      else\n        write_attribute(:data,value)\n      end\n    elsif time_format_HH_MM_SS(category_unit)\n      if !is_HH_MM_SS\n        @error = true\n        @message = \"\"\n      else\n        write_attribute(:data,value.split(\":\").sum)\n      end\n    else\n    end\n\ndef integer_unit(unit)\n    unit === StatsCategory::UNITS::SAME_AS_NAME_INTEGER || unit === StatsCategory::UNITS::SECONDS\n  end\n\n  def float_unit(unit)\n    unit === StatsCategory::UNITS::KILOMETERS  || unit === StatsCategory::UNITS::SAME_AS_NAME_DECIMAL\n  end\n\n  def time_format_HH_MM_SS(unit)\n    unit === StatsCategory::UNITS::HH_MM_SS\n  end\n</code></pre>\n\n<p>Found the answer. my code according to the solution provided by Sergio Tulentsev</p>\n\n<p>Switch:</p>\n\n<pre><code>case stats_category.unit\n      when *integer_unit\n        if !is_integer\n          @error = true\n          @message = \"\"\n        else\n          write_attribute(:data,value)\n        end\n      when *float_unit\n        if !is_float\n          @error = true\n          @message = \"\"\n        else\n          write_attribute(:data,value)\n        end\n      when *time_format_HH_MM_SS\n        if !is_HH_MM_SS\n          @error = true\n          @message = \"\"\n        else\n          write_attribute(:data,value.split(\":\").sum)\n        end\n      end\n</code></pre>\n\n<p>Methods:</p>\n\n<pre><code>def integer_unit\n    [StatsCategory::UNITS::SAME_AS_NAME_INTEGER, StatsCategory::UNITS::SECONDS]\n  end\n\n  def float_unit\n    [StatsCategory::UNITS::KILOMETERS, StatsCategory::UNITS::SAME_AS_NAME_DECIMAL]\n  end\n\n  def time_format_HH_MM_SS\n    [StatsCategory::UNITS::HH_MM_SS]\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5928022"}, "edited": false, "score": 0, "creation_date": 1456972148, "post_id": 35746755, "comment_id": 59197027, "body": "what should I do to make country[provinces_attributes][municipalities_attributes][nam&zwnj;&#8203;e] to country[provinces_attributes][municipalities_attributes][0][&zwnj;&#8203;name]? I&#39;ll added <code>UPDATE 2</code> above for my views."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5928022"}, "edited": false, "score": 0, "creation_date": 1456992756, "post_id": 35746755, "comment_id": 59205037, "body": "Forget about my previous comment. I&#39;ve got now a solution."}], "tags": [], "owner": {"reputation": 417, "user_id": 5507259, "user_type": "registered", "profile_image": "https://graph.facebook.com/888912451163823/picture?type=large", "display_name": "Roman Kovtunenko", "link": "https://stackoverflow.com/users/5507259/roman-kovtunenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1456922449, "last_edit_date": 1456922449, "creation_date": 1456920357, "answer_id": 35746755, "question_id": 35743284, "link": "https://stackoverflow.com/questions/35743284/three-models-nested-attributes-in-rails/35746755#35746755", "title": "Three models Nested Attributes in Rails", "body": "<blockquote>\n  <p>My plan should be @country.province.municipalities.build. But when I\n  do:</p>\n  \n  <p>@country = Country.new @country.province.build I've got NoMethodError:\n  undefined method ``build' for nil:NilClass</p>\n</blockquote>\n\n<p>When you have:</p>\n\n<pre><code>has_one :province, dependent: :destroy\n</code></pre>\n\n<p>ActiveRecord will return <strong>nil</strong> if there is no record. When you try:</p>\n\n<pre><code>@province = @country.province.build\n</code></pre>\n\n<p>After calling <strong>province</strong> on <strong>@country</strong> you get nil and thus <strong>NoMethodError: undefined method ``build' for nil:NilClass</strong></p>\n\n<p>Instead just use:</p>\n\n<pre><code>@province = @country.build_province\n</code></pre>\n\n<p>This approach is only valid for <strong>has_one</strong> associations</p>\n\n<p>You don't need to do this in the case of <strong>has_many</strong> associations, because when you want to build a new instance of has_many (like you are doing here):</p>\n\n<pre><code>@country.provinces.build\n</code></pre>\n\n<p>ActiveRecord will return an empty instance of ActiveRecord::Associations::CollectionProxy (which is in fact a rails-enhanced version of an [] - an empty array). CollectionProxy has the <strong>build</strong> method implemented, unlike <strong>nil</strong> in the case of a has_one association.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5928022"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456972083, "creation_date": 1456911259, "last_edit_date": 1456972083, "question_id": 35743284, "link": "https://stackoverflow.com/questions/35743284/three-models-nested-attributes-in-rails", "title": "Three models Nested Attributes in Rails", "body": "<p>I have 3 models, I named it as <code>Country, Province, Municipality</code> and <code>Country</code> is under <code>Province</code> and <code>Municipality</code> is under <code>Province</code>. So I make my nested form like this:</p>\n\n<p>My models:</p>\n\n<p>Country</p>\n\n<pre><code>has_one :province, dependent: :destroy\naccepts_nested_attributes_for :province\n</code></pre>\n\n<p>Province</p>\n\n<pre><code>belongs_to :country\nhas_many :municipalities, dependent: :destroy\naccepts_nested_attributes_for :municipalities\n</code></pre>\n\n<p>Municipality</p>\n\n<pre><code>belongs_to :province\n</code></pre>\n\n<p>My plan should be <code>@country.province.municipalities.build</code>. But when I do:</p>\n\n<pre><code>@country = Country.new\n@country.province.build\n</code></pre>\n\n<p>I've got <code>NoMethodError: undefined method ``build' for nil:NilClass</code>.</p>\n\n<p>UPDATE:</p>\n\n<p>I changed my <code>Country</code> model with:</p>\n\n<pre><code>has_many :provice, dependent: :destroy\naccepts_nested_attributes_for :provinces\n</code></pre>\n\n<p>Then, I've got what I want:</p>\n\n<pre><code>@province = @country.provinces.build\n@province.municipalities.build\n</code></pre>\n\n<p>is now working. But the problem is when I look at my view, it looks like:</p>\n\n<pre><code>country[provinces_attributes][municipalities_attributes][name]\n</code></pre>\n\n<p>which must be:</p>\n\n<pre><code>country[provinces_attributes][municipalities_attributes][0][name]\n</code></pre>\n\n<p>What I am missing right here, losing <code>[0]</code>?</p>\n\n<p>UPDATE 2</p>\n\n<p>In my views:</p>\n\n<pre><code>&lt;%= form_for @country, :html =&gt; {:multipart =&gt; true} do |f| %&gt;\n  &lt;%= f.fields_for :province_attributes do |p| %&gt;\n    &lt;%= f.fields_for :municipalities_attributes do |m| %&gt;\n      &lt;%= m.text_field :name %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I am expecting the text_field name should be <code>country[province][municipalities][0][name]</code> but it output without <code>[0]</code>, <code>country[province][municipalities][name]</code>. What is my error right here?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "sorting", "complexity-theory"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1456908562, "post_id": 35742229, "comment_id": 59158121, "body": "Ruby uses an implementation of quick sort. Therefore it is on average <code>O(n log n)</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1456908854, "post_id": 35742229, "comment_id": 59158331, "body": "Usually when you consider using <code>sort_by</code> instead of <code>sort</code>, that is when you do some non-trivial computation within the block. In such case, the computation in the block is the determining factor of the complexity of the whole operation, and the sorting algorithm itself has no significant contribution. What should matter is how many times the block is evaluated, and with that respect, <code>sort_by</code> is faster than <code>sort</code>."}, {"owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456909041, "post_id": 35742229, "comment_id": 59158448, "body": "@sawa - as long as the computation in the block is of constant complexity regarding the size of the collection, it would not affect the overall sorting complexity..."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "edited": false, "score": 0, "creation_date": 1456909095, "post_id": 35742229, "comment_id": 59158474, "body": "@UriAgassi The number of times the block is called affects the overall complexity. And that in fact determines the whole complexity when <code>sort_by</code> is used under a reasonable use case. Even though <code>sort_by</code> and <code>sort</code> use the same sort algorithm (quick sort for MRI), the former has less complexity than the other. The complexity of the sorting algorithm itself is irrelevant."}, {"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1456917470, "post_id": 35742229, "comment_id": 59164660, "body": "Using <code>sort_by</code> is usually shorter, so computation triviality doesn&#39;t have to have anything to do with it."}], "answers": [{"tags": [], "owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "is_accepted": true, "score": 2, "last_activity_date": 1456939542, "last_edit_date": 1456939542, "creation_date": 1456926762, "answer_id": 35749134, "question_id": 35742229, "link": "https://stackoverflow.com/questions/35742229/what-is-the-complexity-of-sort-by/35749134#35749134", "title": "What is the complexity of `sort_by`?", "body": "<p>The <code>sort</code> method requires <em>O</em>(<em>n</em> log <em>n</em>). The <code>sort_by</code> method implements the <strong>Schwartzian Transform</strong>. It adds an overhead of <em>O</em>(2 <em>n</em>), while the actual sorting remains at <em>O</em>(<em>n</em> log <em>n</em>). This may pay out, because the iterations become faster than the original ones.</p>\n\n<p><code>sort</code> should be faster for small arrays, while <code>sort_by</code> performs better with large arrays. In theory.</p>\n\n<hr>\n\n<p>I could not resist to benchmark and here is the result. Array size on <em>x</em> axis, and sorting time in seconds on <em>y</em> axis. The array elements were random strings created with <code>SecureRandom.base64(50)</code>. Ruby version was 1.8.7.</p>\n\n<p><a href=\"https://i.stack.imgur.com/vTmAf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vTmAf.png\" alt=\"enter image description here\"></a></p>\n\n<p>The results show that <code>sort_by</code> did not significantly gain over <code>sort</code> with increasing array size. </p>\n"}], "owner": {"reputation": 41, "user_id": 4893741, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FlxTSX_HlDw/AAAAAAAAAAI/AAAAAAAAABA/f0kTrskuVzc/photo.jpg?sz=128", "display_name": "Melissa Lim", "link": "https://stackoverflow.com/users/4893741/melissa-lim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1345, "favorite_count": 1, "accepted_answer_id": 35749134, "answer_count": 1, "score": 2, "last_activity_date": 1456939542, "creation_date": 1456908250, "last_edit_date": 1456908406, "question_id": 35742229, "link": "https://stackoverflow.com/questions/35742229/what-is-the-complexity-of-sort-by", "title": "What is the complexity of `sort_by`?", "body": "<p>I would like to know what the sorting algorithm behind <code>sort_by</code> is, and it's complexity.</p>\n\n<p>I'm sorting a nested array, and this is what it does; from:</p>\n\n<pre><code>arr = [[0,2],[1,1],[3,5],[4,2]]\n</code></pre>\n\n<p>I sort it,</p>\n\n<pre><code>arr = arr.sort_by{|x,y|y}\n</code></pre>\n\n<p>and it becomes:</p>\n\n<pre><code>arr = [[1,1],[0,2],[4,2],[3,5]]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 2, "creation_date": 1456907639, "post_id": 35741839, "comment_id": 59157558, "body": "You install <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">rvm</a> but tried to run <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a>. This is different managers."}, {"owner": {"reputation": 7071, "user_id": 549010, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/181219cd20b8036ef8ec45b94aed6474?s=128&d=identicon&r=PG", "display_name": "Roger", "link": "https://stackoverflow.com/users/549010/roger"}, "edited": false, "score": 0, "creation_date": 1456907640, "post_id": 35741839, "comment_id": 59157559, "body": "For what you need it? I run Ruby, but RBENV doesn&#39;t work for me either. Never had a problem. Isn&#39;t RBENV similar to RVM?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1456911422, "post_id": 35741839, "comment_id": 59160169, "body": "If you&#39;re installing Ruby for the first time, you can just run <code>brew install ruby</code>. If you definitely need a version manager, understand that RVM and Rbenv are incompatible tools. One needs to be uninstalled to use the other. I prefer rbenv, but if you&#39;re sticking with RVM, read the warning message and do what it says. It&#39;s just telling you to add a line to the end of a file."}, {"owner": {"reputation": 385, "user_id": 3740358, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/xXJVj.jpg?s=128&g=1", "display_name": "Ayubx", "link": "https://stackoverflow.com/users/3740358/ayubx"}, "edited": false, "score": 0, "creation_date": 1456919600, "post_id": 35741839, "comment_id": 59166159, "body": "Thank you for the input Mr Max. Ruby seems to be working fine.Am not too experienced at this time to decide which one i would prefer rvm/rbenv so i will stick with what is working for now. I was able to start the server and was also able to get a test website running as well as some ruby scripts from tutorials. So to clear the warning off i just have to append <code>source ~&#47;.profile</code> and remove <code>eval &quot;$(rbenv init -)&quot;</code> in my bash_profile ?."}], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 3740358, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/xXJVj.jpg?s=128&g=1", "display_name": "Ayubx", "link": "https://stackoverflow.com/users/3740358/ayubx"}, "edited": false, "score": 0, "creation_date": 1456918943, "post_id": 35742945, "comment_id": 59165713, "body": "Thank you for the reply Mr Milan. I will omit the rbenv stuff. I have the following entry in my .bash_profile file   <code>eval &quot;$(rbenv init -)&quot;</code>. Is it safe to remove it manually or is it a must to uninstall rbenv ? I am getting <code>rbenv: command not found</code> when my terminal starts up and on every output when i am using sublime Text 3 with python."}, {"owner": {"reputation": 1113, "user_id": 2119730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874059dab10ca3fcc3fb161afce45c38?s=128&d=identicon&r=PG", "display_name": "Milan K&#246;pke", "link": "https://stackoverflow.com/users/2119730/milan-k%c3%b6pke"}, "reply_to_user": {"reputation": 385, "user_id": 3740358, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/xXJVj.jpg?s=128&g=1", "display_name": "Ayubx", "link": "https://stackoverflow.com/users/3740358/ayubx"}, "edited": false, "score": 0, "creation_date": 1456924646, "post_id": 35742945, "comment_id": 59169730, "body": "It is safe to remove. It should probably be replaced with <code>source ~&#47;.rvm&#47;scripts&#47;rvm</code> as per <a href=\"https://rvm.io/rvm/install#installation\" rel=\"nofollow noreferrer\">rvm installation documentation</a>"}], "tags": [], "owner": {"reputation": 1113, "user_id": 2119730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874059dab10ca3fcc3fb161afce45c38?s=128&d=identicon&r=PG", "display_name": "Milan K&#246;pke", "link": "https://stackoverflow.com/users/2119730/milan-k%c3%b6pke"}, "is_accepted": true, "score": 1, "last_activity_date": 1456910379, "creation_date": 1456910379, "answer_id": 35742945, "question_id": 35741839, "link": "https://stackoverflow.com/questions/35741839/rbenv-command-not-found/35742945#35742945", "title": "rbenv: command not found", "body": "<p>rbenv and rvm are both tools to manage ruby versions. They behave slightly different. rbenv does need you to rehash its 'shims' for you to pick up the current binaries. rvm does it a bit different. As you are using rvm, just omit the rbenv part.</p>\n\n<p>rvm will pickup the correct ruby version from <code>.ruby-version</code> file and (if you want to have one) the gemset from <code>.ruby-gemset</code></p>\n\n<p>As you pasted the output of <code>ruby -v</code> and the path, everything looks to be working for you. You are all set and ready to go! :-) Just omit rbenv stuff.</p>\n"}], "owner": {"reputation": 385, "user_id": 3740358, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/xXJVj.jpg?s=128&g=1", "display_name": "Ayubx", "link": "https://stackoverflow.com/users/3740358/ayubx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1416, "favorite_count": 0, "accepted_answer_id": 35742945, "answer_count": 1, "score": -1, "last_activity_date": 1456910379, "creation_date": 1456906928, "question_id": 35741839, "link": "https://stackoverflow.com/questions/35741839/rbenv-command-not-found", "title": "rbenv: command not found", "body": "<p>I am new to Ruby. I have installed the latest version of ruby,rvm &amp; homebrew on mac OSX El Capitan.</p>\n\n<p>Installed RVM by </p>\n\n<pre><code>\\curl -L https://get.rvm.io | bash -s stable\n</code></pre>\n\n<p>I get the following warning after the installation is complete and i am yet to do anything about it,</p>\n\n<pre><code>WARNING: You have '~/.profile' file, you might want to load it,\nto do that add the following line to '/Users/abcde/.bash_profile':\n\n  source ~/.profile\n</code></pre>\n\n<p>I am getting the command not found error when executing commands with rbenv </p>\n\n<pre><code>rbenv rehash\nrbenv: command not found\n</code></pre>\n\n<p>My .bash_profile looks like</p>\n\n<pre><code>export PATH=/usr/local/bin:/Users/abcde/.rvm/rubies/ruby-2.3.0/bin/GEM:$PATH\n</code></pre>\n\n<p>Ruby version is,</p>\n\n<pre><code>ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin15].\n</code></pre>\n\n<p>which -a ruby returns</p>\n\n<pre><code>/Users/abcde/.rvm/rubies/ruby-2.3.0/bin/ruby\n/usr/bin/ruby\n</code></pre>\n\n<p>When i check the path with</p>\n\n<pre><code>echo $PATH \n</code></pre>\n\n<p>gives the following output</p>\n\n<pre><code>/Users/abcde/.rvm/gems/ruby-2.3.0/bin:/Users/abcde/.rvm/gems/ruby-2.3.0@global/bin:/Users/abcde/.rvm/rubies/ruby-2.3.0/bin:/usr/local/bin:/Users/abcde/.rvm/rubies/ruby-2.3.0/bin/GEM:/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/MacGPG2/bin:/Users/abcde/.rvm/bin\n</code></pre>\n\n<p>Seems to be a path issue but i can't figure out what it is or how to fix it.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "rubygems", "therubyracer"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5121733, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f6a3ca515e042e9a0ca924f5a0fb8113?s=128&d=identicon&r=PG&f=1", "display_name": "MASON CHAN SCOTT", "link": "https://stackoverflow.com/users/5121733/mason-chan-scott"}, "edited": false, "score": 0, "creation_date": 1456945573, "post_id": 35743253, "comment_id": 59185163, "body": "Thanks I think I figured it out. I had to change the gcc compiler to version 4.2. For some reason the newer gcc versions don&#39;t just ignore the -rdynamic flag, which is only present for compiling on linux and is not actually compatible with windows and osx <a href=\"http://stackoverflow.com/questions/29534519/why-gcc-doesnt-recognize-rdynamic-option\">according to this question</a>"}], "tags": [], "owner": {"reputation": 1299, "user_id": 2318085, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SZYgr.jpg?s=128&g=1", "display_name": "Mohammad Shahadat Hossain", "link": "https://stackoverflow.com/users/2318085/mohammad-shahadat-hossain"}, "is_accepted": false, "score": 0, "last_activity_date": 1456911195, "creation_date": 1456911195, "answer_id": 35743253, "question_id": 35741536, "link": "https://stackoverflow.com/questions/35741536/trouble-installing-therubyracer-gem-due-to-compiler-issue-on-mac/35743253#35743253", "title": "Trouble installing therubyracer gem due to compiler issue on mac?", "body": "<p>I had problems installing therubyracer (because of the problems with libv8). I think you can try with this.</p>\n\n<pre><code>$ gem uninstall libv8\n$ gem install therubyracer -v '0.12.0'\n</code></pre>\n\n<p>Another way is as follows</p>\n\n<pre><code>gem uninstall libv8\nbrew install v8\ngem install therubyracer\ngem install libv8 -v '3.16.14.3' -- --with-system-v8\n</code></pre>\n\n<p>and do bundle install. I think it could solve your problems.</p>\n"}], "owner": {"reputation": 33, "user_id": 5121733, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f6a3ca515e042e9a0ca924f5a0fb8113?s=128&d=identicon&r=PG&f=1", "display_name": "MASON CHAN SCOTT", "link": "https://stackoverflow.com/users/5121733/mason-chan-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 892, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1456911195, "creation_date": 1456905767, "question_id": 35741536, "link": "https://stackoverflow.com/questions/35741536/trouble-installing-therubyracer-gem-due-to-compiler-issue-on-mac", "title": "Trouble installing therubyracer gem due to compiler issue on mac?", "body": "<p>I've been trying to install the gem, therubyracer on my mac with OS X El Capitan for a rails app, but I keep getting an error associated with the -rdynamic flag, which results in failure to build the native extensions.</p>\n\n<pre><code>Amory:coursequestionbank masonscott$ gem install therubyracer\nBuilding native extensions.  This could take a while...\nERROR:  Error installing therubyracer:\nERROR: Failed to build gem native extension.\n\n/Users/masonscott/.rvm/rubies/ruby-2.2.1/bin/ruby -r ./siteconf20160301-14168-1g6b007.rb extconf.rb\nchecking for main() in -lpthread... yes\nchecking for main() in -lobjc... yes\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling accessor.cc\ng++: error: unrecognized command line option '-rdynamic'\nmake: *** [accessor.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/masonscott/.rvm/gems/ruby-2.2.1/gems/therubyracer-0.12.2 for inspection.\nResults logged to /Users/masonscott/.rvm/gems/ruby-2.2.1/extensions/x86_64-darwin-14/2.2.0-static/therubyracer-0.12.2/gem_make.out\n</code></pre>\n\n<p>I've tried searching everywhere and it seems like the compiler should ignore the rdynamic flag, but for some reason mine doesn't. I tried updating by gcc to to gcc5, but that still did not resolve the issue. What can I do to solve this issue?</p>\n"}, {"tags": ["arrays", "ruby", "key"], "answers": [{"comments": [{"owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "reply_to_user": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "edited": false, "score": 0, "creation_date": 1456906551, "post_id": 35741486, "comment_id": 59156958, "body": "@LukasBaliak, yes, you can use the <code>&amp;:keys</code> shorthand."}], "tags": [], "owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "is_accepted": false, "score": 5, "last_activity_date": 1456905880, "last_edit_date": 1456905880, "creation_date": 1456905594, "answer_id": 35741486, "question_id": 35741409, "link": "https://stackoverflow.com/questions/35741409/finding-keys-of-an-array-of-hash/35741486#35741486", "title": "Finding keys of an array of hash", "body": "<p>Try using <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-flat_map\" rel=\"nofollow\"><code>flat_map</code></a> with <a href=\"http://ruby-doc.org/core-1.9.3/Hash.html#method-i-key\" rel=\"nofollow\"><code>keys</code></a>:</p>\n\n<pre><code>csv.flat_map { |a| a.keys }\n# =&gt; [:fruit, :number, :age, :name]\n</code></pre>\n\n<p>If there are multiple instances of some keys, and you want to have each key only once, you should also add <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-uniq\" rel=\"nofollow\"><code>uniq</code></a>:</p>\n\n<pre><code>csv = [{:fruit=&gt;\"apple\", :number=&gt;23},{:age=&gt;12,:name=&gt;\"XYZ\", :number=&gt;11}]\narray = csv.flat_map { |a| a.keys }\n# =&gt; [:fruit, :number, :age, :name, :number]\narray.uniq\n# =&gt; [:fruit, :number, :age, :name]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "is_accepted": false, "score": 0, "last_activity_date": 1456906750, "creation_date": 1456906750, "answer_id": 35741790, "question_id": 35741409, "link": "https://stackoverflow.com/questions/35741409/finding-keys-of-an-array-of-hash/35741790#35741790", "title": "Finding keys of an array of hash", "body": "<p>Without braces or pipes:</p>\n\n<pre><code>csv.flat_map(&amp;:keys).uniq\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>csv.map(&amp;:keys).flatten.uniq\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456954014, "post_id": 35741817, "comment_id": 59190207, "body": "While I always appreciate a greenie, in this case I don&#39;t deserve it, because my solution does more work than is required to just get the unique keys. (Hence, &quot;Just sayin&quot;.) I suggest you reconsider your selection. Do note, however, that without <code>.keys</code> this is a nice way to convert an array of hashes to a hash (at least when duplicate keys are not a problem)."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1456906844, "creation_date": 1456906844, "answer_id": 35741817, "question_id": 35741409, "link": "https://stackoverflow.com/questions/35741409/finding-keys-of-an-array-of-hash/35741817#35741817", "title": "Finding keys of an array of hash", "body": "<pre><code>csv.reduce(&amp;:merge).keys\n  #=&gt; [:fruit, :number, :age, :name]\n</code></pre>\n\n<p>Just sayin'</p>\n"}], "owner": {"reputation": 151, "user_id": 5944173, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/17c020e20b93d05e245104b055d7ab69?s=128&d=identicon&r=PG&f=1", "display_name": "Palak Chaudhary", "link": "https://stackoverflow.com/users/5944173/palak-chaudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 35741817, "answer_count": 3, "score": 0, "last_activity_date": 1456906922, "creation_date": 1456905319, "last_edit_date": 1456906922, "question_id": 35741409, "link": "https://stackoverflow.com/questions/35741409/finding-keys-of-an-array-of-hash", "title": "Finding keys of an array of hash", "body": "<p>I have an array of hash with different keys across the array:</p>\n\n<pre><code>csv = [{:fruit=&gt;\"apple\", :number=&gt;23},{:age=&gt;12,:name=&gt;\"XYZ\"}]\n</code></pre>\n\n<p>How do I get all the keys like this:</p>\n\n<pre><code>[:fruit,:number,:age,:name]\n</code></pre>\n\n<p>I tried</p>\n\n<pre><code>array = csv.collect {|key,value| key }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "redis", "aws-opsworks"], "comments": [{"owner": {"reputation": 1452, "user_id": 3182171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f212461e884c83b6a0542289a8562dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego D", "link": "https://stackoverflow.com/users/3182171/diego-d"}, "edited": false, "score": 0, "creation_date": 1487325901, "post_id": 35741359, "comment_id": 71744993, "body": "Please consider to mark my answer as the valid one. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1458082921, "post_id": 35991440, "comment_id": 59698690, "body": "Thank you @DiegoD. Is using <b>ElastiCache</b> also scalable enough?"}, {"owner": {"reputation": 1452, "user_id": 3182171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f212461e884c83b6a0542289a8562dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego D", "link": "https://stackoverflow.com/users/3182171/diego-d"}, "reply_to_user": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1458214197, "post_id": 35991440, "comment_id": 59765092, "body": "@user984621 ElastiCache scale like RDS. I think is a great choice but of course it depends of your needs. Please mark my answer as accepted if you think that helped you in some way."}], "tags": [], "owner": {"reputation": 1452, "user_id": 3182171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f212461e884c83b6a0542289a8562dbf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego D", "link": "https://stackoverflow.com/users/3182171/diego-d"}, "is_accepted": false, "score": 3, "last_activity_date": 1457969380, "last_edit_date": 1457969380, "creation_date": 1457968889, "answer_id": 35991440, "question_id": 35741359, "link": "https://stackoverflow.com/questions/35741359/how-to-run-redis-on-amazon-opsworks-for-a-rails-application/35991440#35991440", "title": "How to run Redis on Amazon OpsWorks for a Rails application?", "body": "<p>A possible way to do it is create a \"<a href=\"https://aws.amazon.com/elasticache/\" rel=\"nofollow noreferrer\">ElastiCache cluster</a>\" on AWS and tell to Rails to use it.</p>\n\n<p>I have my rails app running with a OpsWorks stack and I use redis for two different reasons: use Sidekiq for delayed job and use the cache store.</p>\n\n<p>Is very important to set the correct <strong>security group</strong> for your redis ElastiCache cluster, this security group must be available for your OpsWorks stack.</p>\n\n<p>First create your Redis ElastiCache cluster.\nThen go in your AWS console, click on \"EC2\", then click on \"Security Group\"\n (under NETWORK &amp; SECURITY). Search the security group using the security group id associated to your elasticache cluster.</p>\n\n<p>Now set an Inbound rule where the source is the opsworks security group that you have inside opsworks.</p>\n\n<p>In your EC2 -> Security Group:\n<a href=\"https://i.stack.imgur.com/Y0L5c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y0L5c.png\" alt=\"enter image description here\"></a></p>\n\n<p>In OpsWorks -> Layers -> Rails App Server Security:\n<a href=\"https://i.stack.imgur.com/uFzKB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uFzKB.png\" alt=\"enter image description here\"></a></p>\n\n<p>At the end, in you Rails project, edit your <strong>config/production.rb</strong> file (assuming that you are working for production env) and add a line like this to set your cache store:</p>\n\n<pre><code>config.cache_store = :redis_store, \"redis://#{Rails.application.secrets.redis_host}:#{Rails.application.secrets.redis_port}/0/cache\", { expires_in: 90.minutes }\n</code></pre>\n\n<p>Then to make Sidekiq use Redis, you need a <strong>config/sidekiq.rb</strong> file like this:</p>\n\n<pre><code>Sidekiq.configure_server do |config|\n  config.redis = { url: \"redis://#{Rails.application.secrets.redis_host}:#{Rails.application.secrets.redis_port}/12\", network_timeout: Rails.application.secrets.redis_timeout }\nend\n\nSidekiq.configure_client do |config|\n  config.redis = { url: \"redis://#{Rails.application.secrets.redis_host}:#{Rails.application.secrets.redis_port}/12\", network_timeout: Rails.application.secrets.redis_timeout }\nend\n</code></pre>\n\n<p>You can retrieve the redis URL and port inside your AWS Console ElastiCache Dashboard, clicking under Nodes column related to your cluster.</p>\n\n<p>You need a recipe only to Start and Stop sidekiq, unless you want to start it manually going inside your machine via ssh (of course not good for production).</p>\n\n<p>In this case you have to add a Custom recipe to your OpsWorks stack, for the Deploy event.\nThis recipe will be something like this:</p>\n\n<pre><code># Recipe used for a deploy event\nChef::Log.info(\"Restart Sidekiq...\")\n\nnode[:deploy].each do |application, deploy|\n  deploy_to = node[:deploy][application][:deploy_to]\n  rails_env = node[:deploy][application][:rails_env]\n\n  execute \"sidekiq stop\" do\n    user \"deploy\"\n    cwd \"#{deploy_to}/current/\"\n    command \"bundle exec sidekiqctl stop tmp/pids/sidekiq.pid\"\n    environment \"RAILS_ENV\" =&gt; rails_env\n    only_if { \"ps aux | grep [s]idekiq\" }\n  end\n\n  bash \"bundle\" do\n    user \"deploy\"\n    cwd \"#{deploy_to}/current/\"\n    code &lt;&lt;-EOH\n      RAILS_ENV=\"#{rails_env}\" bundle exec sidekiq --index 0 --pidfile tmp/pids/sidekiq.pid --environment \"#{rails_env}\" --logfile log/sidekiq.log --daemon\n    EOH\n  end\nend\n</code></pre>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457969380, "creation_date": 1456905104, "question_id": 35741359, "link": "https://stackoverflow.com/questions/35741359/how-to-run-redis-on-amazon-opsworks-for-a-rails-application", "title": "How to run Redis on Amazon OpsWorks for a Rails application?", "body": "<p>I am trying to set up Redis instance/layer in the Amazon OpsWorks environment for caching purposes and Sidekiq, but cannot make the Rails application communicate with Redis.</p>\n\n<p>Do I need a Chef recipe for it no matter what? I've tried to create Redis on a separated layer, added an instance to this layer, but cannot find a way to make communicate Rails and Redis between each other.</p>\n\n<p>Any advice how to make it?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby", "puppet"], "comments": [{"owner": {"reputation": 89, "user_id": 4545808, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9ec2a07de7894589850309799179f1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jayanth", "link": "https://stackoverflow.com/users/4545808/jayanth"}, "edited": false, "score": 0, "creation_date": 1456902915, "post_id": 35740722, "comment_id": 59155051, "body": "erb template  [user]         uri = host         username = &lt;%= @_user_name[&#39;user&#39;] %&gt;         password = &lt;%= @_user_pass[&#39;pass&#39;] %&gt;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456904855, "post_id": 35740722, "comment_id": 59156016, "body": "What is your question?"}, {"owner": {"reputation": 7399, "user_id": 2146138, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/fweN4.png?s=128&g=1", "display_name": "Nathan Basanese", "link": "https://stackoverflow.com/users/2146138/nathan-basanese"}, "edited": false, "score": 0, "creation_date": 1491929986, "post_id": 35740722, "comment_id": 73767195, "body": "// , Is this a question, or are you just copying and pasting error output?"}], "answers": [{"tags": [], "owner": {"reputation": 7902, "user_id": 3356612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/085070b2074edcce07bc4381c7b5d635?s=128&d=identicon&r=PG", "display_name": "Felix Frank", "link": "https://stackoverflow.com/users/3356612/felix-frank"}, "is_accepted": false, "score": 0, "last_activity_date": 1457742054, "creation_date": 1457742054, "answer_id": 35952168, "question_id": 35740722, "link": "https://stackoverflow.com/questions/35740722/unable-to-parse-puppet-template-nilnilclass/35952168#35952168", "title": "unable to parse puppet template nil:NilClass", "body": "<p>Your template assumes that in Puppet's scope, there are variables <code>$_user_name</code> and <code>$_user_pass</code>, both of type hash.</p>\n\n<p>Apparently there are not.</p>\n\n<p>Did you write this \"learning\" module yourself? What was your approach to designing the ERB template?</p>\n"}], "owner": {"reputation": 89, "user_id": 4545808, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9ec2a07de7894589850309799179f1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jayanth", "link": "https://stackoverflow.com/users/4545808/jayanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 879, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1457742054, "creation_date": 1456902822, "last_edit_date": 1456904820, "question_id": 35740722, "link": "https://stackoverflow.com/questions/35740722/unable-to-parse-puppet-template-nilnilclass", "title": "unable to parse puppet template nil:NilClass", "body": "<pre><code>Filepath:/etc/puppet/environments/learning_bb_check/modules/sdsds/templates/learning-config.erb\nLine: 3\nDetail: undefined method `[]' for nil:NilClass\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456899869, "post_id": 35739935, "comment_id": 59153568, "body": "Not clear what you mean by &quot;<code>hash2</code> having one value and that one value is blank&quot;."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456899943, "post_id": 35739935, "comment_id": 59153601, "body": "Perhaps you mean something else by &quot;(need to either) both have a value (...)&quot;. When that condition is satisfied, then the other condition is always satisfied."}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456900632, "post_id": 35739935, "comment_id": 59153921, "body": "@sawa I updated it. Hopefully it is a bit more clear as to why it passes."}, {"owner": {"reputation": 3566, "user_id": 5026139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbf86a3072e85746a0dde45665322890?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/5026139/damon"}, "edited": false, "score": 0, "creation_date": 1456901051, "post_id": 35739935, "comment_id": 59154130, "body": "Do the hashes always have integer keys in the range of 1 to hash length? Are the values always strings in hash1 and arrays containing strings in hash2?"}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "reply_to_user": {"reputation": 3566, "user_id": 5026139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbf86a3072e85746a0dde45665322890?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/5026139/damon"}, "edited": false, "score": 0, "creation_date": 1456901099, "post_id": 35739935, "comment_id": 59154156, "body": "@Damon yes that is correct"}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456901490, "post_id": 35739935, "comment_id": 59154389, "body": "@sawa <code>hash2</code> is always going to contain an array as a value, the array wont ever be empty but will contain an empty string, that is equlivent to an empty value in <code>hash1</code>. key 4 could have an empty string in the array as the first value and the second value in the array be another string (non empty), so thats why I said one value in the array and that value is an empty string"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1456903866, "post_id": 35739935, "comment_id": 59155480, "body": "What if <code>hash1 = { &quot;1&quot;=&gt;&quot;&quot; }</code> and <code>hash2 = { &quot;1&quot;=&gt;[&quot;&quot;, &quot;&quot;] }</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456901702, "post_id": 35740356, "comment_id": 59154500, "body": "With a bit more elaboration on the block variable profile, you can get rid of <code>map</code>, <code>first</code>, and <code>last</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1456901820, "post_id": 35740356, "comment_id": 59154551, "body": "@sawa indeed, thank you. After all (read: with your advise) it appears to become a nifty solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456902061, "post_id": 35740356, "comment_id": 59154676, "body": "We seem to have been thinking along the same lines. You are depending on the keys being in the same order in both hashes."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456902202, "post_id": 35740356, "comment_id": 59154732, "body": "@CarySwoveland That&#39;s the OP&#39;s fault. If the OP meant the orders are not guaranteed, then the OP should have shown an example with random order. It is misleading. At the same time, the OP never wrote the orders are guaranteed, so your interpretation is also reasonable."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456902239, "post_id": 35740356, "comment_id": 59154749, "body": "@CarySwoveland Indeed. After all. I dropped a comment about ordering in the answer."}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1456910201, "post_id": 35740356, "comment_id": 59159267, "body": "Your interpretation was right the orders are guaranteed"}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1456971516, "post_id": 35740356, "comment_id": 59196868, "body": "@mudasobwa I need to skip the check on the first key for the hashes, (<code>hash1</code> will always have a value in it and <code>hash2</code> will be an empty array which is allowed for the first keys, but the rest need to be checked) what needs to be added to skip the first key in <code>unless head.zip(content).all? { |(_, fv), (_, lv)|  fv.empty? ^ !lv.all?(&amp;:empty?) }</code>? or do you want me to open a new question"}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1456974930, "post_id": 35740356, "comment_id": 59197872, "body": "@mudasobwa I asked it here if your interested <a href=\"http://stackoverflow.com/questions/35762523/how-do-i-skip-the-first-key-on-a-zip-that-compares-2-hashes\" title=\"how do i skip the first key on a zip that compares 2 hashes\">stackoverflow.com/questions/35762523/&hellip;</a>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1456903293, "last_edit_date": 1456903293, "creation_date": 1456901473, "answer_id": 35740356, "question_id": 35739935, "link": "https://stackoverflow.com/questions/35739935/check-whether-the-values-of-hashes-are-either-both-blank-or-both-have-a-value/35740356#35740356", "title": "Check whether the values of hashes are either both blank or both have a value", "body": "<p>Assuming that hashes are already ordered:</p>\n\n<pre><code>hash1 = {\"1\"=&gt;\"val\", \"2\"=&gt;\"val\", \"3\"=&gt;\"\", \"4\"=&gt;\"\"} \nhash2 = {\"1\"=&gt;[\"\"], \"2\"=&gt;[\"value\"], \"3\"=&gt;[\"val1\", \"val2\"], \"4\"=&gt;[\"\"]} \n\nhash1.zip(hash2).all? do |(_, fv), (_, lv)| \n  fv.empty? ^ !lv.all?(&amp;:empty?)\nend\n</code></pre>\n\n<p>Here we take a benefit of using <code>XOR</code>. Whether hashes are not ordered, the preprocessing (ordering) required.</p>\n\n<p>According to @sawa\u2019s and @CarySwoveland\u2019s comments, for not sorted hashes:</p>\n\n<pre><code>hash1.sort.zip(hash2.sort).all? do |(fk, fv), (lk, lv)| \n  #   \u21d3 consistency        \u21d3 true if one operand is truthy, other is falsey\n  (fk == lk) &amp;&amp; (fv.empty? ^ !lv.all?(&amp;:empty?))\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456901991, "post_id": 35740453, "comment_id": 59154637, "body": "Cary is probably assuming that the order in the hashes are not guaranteed. If they are, it can become <code>hash1.values.zip(hash2.values) ...</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456902095, "post_id": 35740453, "comment_id": 59154686, "body": "I don&#39;t think your <code>v2.empty?</code> part is correct. It&#39;s more than that."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456902110, "post_id": 35740453, "comment_id": 59154689, "body": "Should not <code>v2.empty?</code> be <code>!v2.all?(&amp;:empty?)</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456902168, "post_id": 35740453, "comment_id": 59154717, "body": "@sawa, yes, I used <code>values_at</code> because I was making no assumption about the order of keys."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456902433, "post_id": 35740453, "comment_id": 59154834, "body": "You can also go with <code>hash1.sort.values.zip(hash2.sort.values) ...</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456902484, "post_id": 35740453, "comment_id": 59154856, "body": "@mudasobwa, perhaps I misinterpreted the question I thought <code>true</code> was to be returned if, for every pairing, both were empty or neither were empty, or, equivalently, it is not the case that exactly one of each pair is empty (XOR)."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456902527, "post_id": 35740453, "comment_id": 59154879, "body": "@sawa Generally speaking, if the order is not guaranteed, then probably we should handle not matched keys as well."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456902578, "post_id": 35740453, "comment_id": 59154902, "body": "<code>v2</code> is <i>an array</i> there. And <code>XOR</code> will return <code>true</code> when one operand is true, while other is false."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456902829, "post_id": 35740453, "comment_id": 59155017, "body": "@mudasobwa, yes, I know <code>v2</code> is an array and <code>v1</code> is a string, but they both have <code>empty?</code> methods. And yes, If one is <code>true</code> and the other <code>false</code>, XOR returns <code>true</code>, but I then negate that. No?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1456902893, "post_id": 35740453, "comment_id": 59155045, "body": "@sawa, yes on <code>sort</code>, but I assume <code>values_at</code> is faster."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456903106, "post_id": 35740453, "comment_id": 59155146, "body": "As by OP: <code>&quot;4&quot;=&gt;[&quot;&quot;]</code> and <code>[&quot;&quot;].empty? == false</code>, while it should be considered to be <code>true</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456903455, "post_id": 35740453, "comment_id": 59155297, "body": "@mudasobwa, ah, I finally get it! I was thinking <code>[]</code> rather than <code>[&quot;&quot;]</code>. Will fix."}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1456909981, "post_id": 35740453, "comment_id": 59159095, "body": "Your first one passes <code>&quot;1&quot;=&gt;&quot;val&quot;</code> and <code>&quot;1&quot;=&gt;[&quot;&quot;]</code> when it would fail"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456912150, "post_id": 35740453, "comment_id": 59160688, "body": "user3234020, thanks. I should have noticed that. I forgot the parentheses around <code>hash2[k]==[&quot;&quot;]</code> and, in my original answer, around <code>v2==[&quot;&quot;]</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1456911853, "last_edit_date": 1456911853, "creation_date": 1456901891, "answer_id": 35740453, "question_id": 35739935, "link": "https://stackoverflow.com/questions/35739935/check-whether-the-values-of-hashes-are-either-both-blank-or-both-have-a-value/35740453#35740453", "title": "Check whether the values of hashes are either both blank or both have a value", "body": "<p>Edit: better, I think:</p>\n\n<pre><code>hash1.all? { |k,v| !(v.empty? ^ (hash2[k]==[\"\"])) }\n  #=&gt; false\n</code></pre>\n\n<p>Original answer:</p>\n\n<pre><code>keys = hash1.keys\n  #=&gt; [\"1\", \"2\", \"3\", \"4\"] \nhash1.values_at(*keys).zip(hash2.values_at(*keys)).all? do |v1,v2|\n  !(v1.empty? ^ (v2==[\"\"]))\nend\n  #=&gt; false\n</code></pre>\n\n<p><code>^</code> is Ruby's XOR operator.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456902174, "post_id": 35740522, "comment_id": 59154721, "body": "<code>nil?</code> should be <code>empty?</code> according to the OP. BTW, this approach is way too phpish."}, {"owner": {"reputation": 3566, "user_id": 5026139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbf86a3072e85746a0dde45665322890?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/5026139/damon"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456902584, "post_id": 35740522, "comment_id": 59154906, "body": "indeed thanks. How is it specifically phpish? I would say it&#39;s not particularly rubyish."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456902698, "post_id": 35740522, "comment_id": 59154956, "body": "Well, iterators should not care on enumerable\u2019s length, return from the middle of the function is ugly (use <code>break false</code> instead,) especial dedicated method is redundant etc."}], "tags": [], "owner": {"reputation": 3566, "user_id": 5026139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbf86a3072e85746a0dde45665322890?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/5026139/damon"}, "is_accepted": false, "score": 0, "last_activity_date": 1456902721, "last_edit_date": 1456902721, "creation_date": 1456902107, "answer_id": 35740522, "question_id": 35739935, "link": "https://stackoverflow.com/questions/35739935/check-whether-the-values-of-hashes-are-either-both-blank-or-both-have-a-value/35740522#35740522", "title": "Check whether the values of hashes are either both blank or both have a value", "body": "<p>Another approach:  </p>\n\n<pre><code>def compare_hashes(hash1, hash2)\n  (1..hash1.length).each do |n|\n    n = n.to_s # can easily swap this if you want to use integers or symbols\n    return false if hash1[n].empty? || hash2[n].empty? || hash2[n].all?(&amp;:empty?)\n  end\n\n  true\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456903944, "post_id": 35740642, "comment_id": 59155525, "body": "<code>return false if h1.length != h2.length</code> is unnecessary. That is mentioned in the question."}], "tags": [], "owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "is_accepted": false, "score": 0, "last_activity_date": 1456904798, "last_edit_date": 1456904798, "creation_date": 1456902551, "answer_id": 35740642, "question_id": 35739935, "link": "https://stackoverflow.com/questions/35739935/check-whether-the-values-of-hashes-are-either-both-blank-or-both-have-a-value/35740642#35740642", "title": "Check whether the values of hashes are either both blank or both have a value", "body": "<p>The following is more-or-less a direct translation of the requirements.(*) </p>\n\n<pre><code># similar(h1,h2) assumes that h1 is a string-valued hash,\n# and that h2 is a hash with values that are all arrays of strings.\n#\ndef similar(h1,h2)\n  return false if h1.length != h2.length\n  h1.all? {|key, v1|\n    v2=h2[key]\n    v2 != nil and \n      ((v1==\"\" and v2==[\"\"]) or\n       (v1 != \"\" and !v2.all?{|x| x.length==0} ))\n  }\nend\n</code></pre>\n\n<p>(*) The OP stipulated that the two hashes have the same number of keys, so the check that that's the case could perhaps be omitted, but there is no harm in checking, and the method as written is likely to be a tiny bit more useful (or at least more realistic) with the check included. Feel free to omit it.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1456903582, "post_id": 35740845, "comment_id": 59155353, "body": "<code>hash2.merge(hash1){|_, v2, *v1| v2 + v1}...</code> \u21d2 no <code>dup</code> and imho more readable."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1456903672, "post_id": 35740845, "comment_id": 59155390, "body": "@mudasobwa Maybe that is better. I just wanted to make use of the fact that <code>v1</code> is a string and <code>v2</code> is an array."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1456903989, "post_id": 35740845, "comment_id": 59155544, "body": "Just out of curiosity: <code>v.all?(&amp;:empty?) or v.none?(&amp;:empty?)</code> \u21d2 <code>%i|all? none?|.any? { |m| v.public_send(m, &amp;:empty?) }</code> :)"}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1456904503, "post_id": 35740845, "comment_id": 59155823, "body": "@sawa how would this fit into an if else scenario or statement. I want to say if its false do something."}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1456909747, "post_id": 35740845, "comment_id": 59158938, "body": "@sawa nearly what I need. but if if an array contains <code>[&quot;&quot;, &quot;value&quot;]</code> its classed as empty"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 1, "creation_date": 1456910065, "post_id": 35740845, "comment_id": 59159161, "body": "@user3234020 Your question is absolutely unclear about such case."}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1456910315, "post_id": 35740845, "comment_id": 59159354, "body": "@sawa Sorry that is what I was trying to get across with &#39;has one value in the array and that value is blank&#39; incase there was another value in the array after the first blank one. (I&#39;m not the best at explaining things)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 1, "creation_date": 1456912671, "post_id": 35740845, "comment_id": 59161111, "body": "@user3234020 according to your definition <i>&quot;have a value [...] means there must be a non-blank value in the array&quot;</i> and <code>[&quot;&quot;, &quot;value&quot;]</code> does have a non-blank value. Please clarify your question."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1456903772, "last_edit_date": 1456903772, "creation_date": 1456903321, "answer_id": 35740845, "question_id": 35739935, "link": "https://stackoverflow.com/questions/35739935/check-whether-the-values-of-hashes-are-either-both-blank-or-both-have-a-value/35740845#35740845", "title": "Check whether the values of hashes are either both blank or both have a value", "body": "<pre><code>hash1.merge(hash2){|_, v1, v2| v2.dup.push(v1)}\n.all?{|_, v| v.all?(&amp;:empty?) or v.none?(&amp;:empty?)}\n</code></pre>\n\n<p>Or following @mudasobwa's suggestion:</p>\n\n<pre><code>hash2.merge(hash1){|_, v2, *v1| v1 + v2}\n.all?{|_, v| v.all?(&amp;:empty?) or v.none?(&amp;:empty?)}\n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 35740356, "answer_count": 5, "score": 0, "last_activity_date": 1456911853, "creation_date": 1456899794, "last_edit_date": 1456902757, "question_id": 35739935, "link": "https://stackoverflow.com/questions/35739935/check-whether-the-values-of-hashes-are-either-both-blank-or-both-have-a-value", "title": "Check whether the values of hashes are either both blank or both have a value", "body": "<p>I have two hashes of the same length:</p>\n\n<pre><code>hash1 = {\"1\"=&gt;\"val\", \"2\"=&gt;\"val\", \"3\"=&gt;\"\", \"4\"=&gt;\"\"} \nhash2 = {\"1\"=&gt;[\"\"], \"2\"=&gt;[\"value\"], \"3\"=&gt;[\"val1\", \"val2\"], \"4\"=&gt;[\"\"]} \n</code></pre>\n\n<p>I need to compare them. The corresponding keys need to either both have a value (for <code>hash1</code>, this means non-blank, and for <code>hash2</code>, this means there must be a non-blank value in the array) or both have a blank value (for <code>hash2</code>, this means the value is [\"\"]).</p>\n\n<ul>\n<li>Key <code>\"1\"</code> fails (array has one value and that value is blank)</li>\n<li>Key <code>\"2\"</code> passes (both have values)</li>\n<li>Key <code>\"3\"</code> fails (<code>hash1</code> is blank)</li>\n<li>Key <code>\"4\"</code> passes (<code>hash1</code> is blank and <code>hash2</code> has one value in the array and that value is blank)</li>\n</ul>\n\n<p>If one of these comparisons fails, then I should get <code>false</code> returned. I'm not sure how to do a comparison like this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1456897945, "post_id": 35739466, "comment_id": 59152724, "body": "You are trying to iterate each item in your bills active record collection right ? are you sure it contains the records to iterate with each one ?"}, {"owner": {"reputation": 86, "user_id": 1580538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/642e32f180c1235a1f438f20cecdfefd?s=128&d=identicon&r=PG", "display_name": "J.C. Hiatt", "link": "https://stackoverflow.com/users/1580538/j-c-hiatt"}, "reply_to_user": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1456898054, "post_id": 35739466, "comment_id": 59152769, "body": "No, I&#39;m actually iterating through the <code>doc</code> variable I get back using <code>open-uri</code>:"}, {"owner": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1456898192, "post_id": 35739466, "comment_id": 59152825, "body": "yes according to your query [ bills = doc.xpath(&quot;//p[@align=&#39;left&#39;]/font[@size=&#39;2&#39;]&quot;) ] the variable bills will contains a collection if your code working fine, so just debug the bills variable to check if it contains any collection of records."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1456898505, "post_id": 35739466, "comment_id": 59152976, "body": "What is it you think <i>index</i> should contain, and why would you index into a nodeset?"}, {"owner": {"reputation": 86, "user_id": 1580538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/642e32f180c1235a1f438f20cecdfefd?s=128&d=identicon&r=PG", "display_name": "J.C. Hiatt", "link": "https://stackoverflow.com/users/1580538/j-c-hiatt"}, "reply_to_user": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1456898552, "post_id": 35739466, "comment_id": 59152995, "body": "@CodeGnome I thought index would contain the current index of the array as Ruby loops through the billsArray. I&#39;m actually not sure what you mean by indexing into a nodeset...I&#39;m totally new to Ruby &amp; Nokogiri."}, {"owner": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1456898558, "post_id": 35739466, "comment_id": 59153001, "body": "I am asking if the bills variable contains some data or not, just check it in rails debug prompt."}, {"owner": {"reputation": 86, "user_id": 1580538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/642e32f180c1235a1f438f20cecdfefd?s=128&d=identicon&r=PG", "display_name": "J.C. Hiatt", "link": "https://stackoverflow.com/users/1580538/j-c-hiatt"}, "reply_to_user": {"reputation": 7259, "user_id": 5239247, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/9WOIt.png?s=128&g=1", "display_name": "Praveen George", "link": "https://stackoverflow.com/users/5239247/praveen-george"}, "edited": false, "score": 0, "creation_date": 1456898670, "post_id": 35739466, "comment_id": 59153053, "body": "@PraveenGeorge Yes, the bills variable contains data \u2014 double checked in debut prompt."}], "answers": [{"comments": [{"owner": {"reputation": 86, "user_id": 1580538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/642e32f180c1235a1f438f20cecdfefd?s=128&d=identicon&r=PG", "display_name": "J.C. Hiatt", "link": "https://stackoverflow.com/users/1580538/j-c-hiatt"}, "edited": false, "score": 0, "creation_date": 1456898933, "post_id": 35739736, "comment_id": 59153157, "body": "Still not fully sure why, so I&#39;m totally open to an explanation. :)"}], "tags": [], "owner": {"reputation": 86, "user_id": 1580538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/642e32f180c1235a1f438f20cecdfefd?s=128&d=identicon&r=PG", "display_name": "J.C. Hiatt", "link": "https://stackoverflow.com/users/1580538/j-c-hiatt"}, "is_accepted": true, "score": 0, "last_activity_date": 1456898905, "creation_date": 1456898905, "answer_id": 35739736, "question_id": 35739466, "link": "https://stackoverflow.com/questions/35739466/why-does-bill-xpath-p-font-aindex-text-return-undefined-method-text-fo/35739736#35739736", "title": "Why does bill.xpath(&quot;//p/font/a&quot;)[index].text return &quot;undefined method `text&#39; for nil:NilClass&quot; using Nokogiri?", "body": "<p>Figured it out.</p>\n\n<p>When I created by my <code>bills</code> variable, I didn't go deep enough in the xpath (I think)... I changed my <code>bills</code> variable to equal <code>doc.xpath(\"//p/font/a\")</code> and it worked.</p>\n"}, {"tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1456902275, "last_edit_date": 1456902275, "creation_date": 1456901494, "answer_id": 35740360, "question_id": 35739466, "link": "https://stackoverflow.com/questions/35739466/why-does-bill-xpath-p-font-aindex-text-return-undefined-method-text-fo/35740360#35740360", "title": "Why does bill.xpath(&quot;//p/font/a&quot;)[index].text return &quot;undefined method `text&#39; for nil:NilClass&quot; using Nokogiri?", "body": "<p>Your code is telling you that you're attempting to call a method on an object that is nil. Why it's nil is something you'll have to debug as time permits.</p>\n\n<p>However, with a little refactoring, you can fix your XPath and zip up all your node results into an array of arrays without all that indexing. For example:</p>\n\n<pre><code>require 'open-uri'\nrequire 'nokogiri'\n\nurl = 'http://billstatus.ls.state.ms.us/2016/pdf/misc/h_cal.htm'\ndoc = Nokogiri::HTML(open url)\n@bills =\n  doc.xpath(\"//p[@align='left']/font[@size='2']\").map do |node|\n    node.xpath(\"//p/font/a/text()\").map { |tnode| tnode.text.strip }.zip \\\n    node.xpath(\"//p/font/a/@href\").map(&amp;:to_s)\n  end.first\n\n@bills.first\n#=&gt; [\"H. B. No.  899:\", \"../../../2016/PDF/history/HB/HB0899.xml\"]\n</code></pre>\n\n<p>You can then convert the array any way you like before feeding it into your Rails view.</p>\n"}], "owner": {"reputation": 86, "user_id": 1580538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/642e32f180c1235a1f438f20cecdfefd?s=128&d=identicon&r=PG", "display_name": "J.C. Hiatt", "link": "https://stackoverflow.com/users/1580538/j-c-hiatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 35739736, "answer_count": 2, "score": -1, "last_activity_date": 1456902275, "creation_date": 1456897769, "last_edit_date": 1456901625, "question_id": 35739466, "link": "https://stackoverflow.com/questions/35739466/why-does-bill-xpath-p-font-aindex-text-return-undefined-method-text-fo", "title": "Why does bill.xpath(&quot;//p/font/a&quot;)[index].text return &quot;undefined method `text&#39; for nil:NilClass&quot; using Nokogiri?", "body": "<p>I'm new to Ruby, so please forgive me if this is a simple question.</p>\n\n<p>I'm getting the above error with this block of code:</p>\n\n<pre><code>bills = doc.xpath(\"//p[@align='left']/font[@size='2']\")\n@billsArray = []\nbills.each_with_index do |bill, index|\n  title = bill.xpath(\"//p/font/a\")[index].text\n  link  = bill.xpath(\"//p/font/a\")[index]['href']\n  @billsArray &lt;&lt; Bill.new(title, link)\nend\n</code></pre>\n\n<p>What I'm trying to do is loop through the items I'm getting back from my <code>xpath</code> call and display each one...doesn't seem to be working.</p>\n\n<p>If I take the <code>index</code> out of my title variable, I get this error: <code>undefined method '[]' for nil:NilClass</code>. Based on the <code>[]</code> in the error, I'm assuming <code>[index]</code> isn't actually returning a value...isn't something wrong with the way I setup my loop?</p>\n\n<p>The end goal is to display the link &amp; link text of all links on this page: <a href=\"http://billstatus.ls.state.ms.us/2016/pdf/misc/h_cal.htm\" rel=\"nofollow\">http://billstatus.ls.state.ms.us/2016/pdf/misc/h_cal.htm</a></p>\n\n<p>Here's the full code of the file:</p>\n\n<pre><code>    class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  protect_from_forgery with: :exception\n\n  class Bill\n    def initialize(title, link)\n      @title  = title\n      @link   = link\n    end\n    attr_reader :title\n    attr_reader :link\n  end\n\n  def scrape_house_calendar\n    # Pull in the page\n    require 'open-uri'\n    doc = Nokogiri::HTML(open(\"http://billstatus.ls.state.ms.us/2016/pdf/misc/h_cal.htm\"))\n\n    # Narrow down what we want and build the bills array\n    bills = doc.xpath(\"//p[@align='left']/font[@size='2']\")\n    @billsArray = []\n    bills.each_with_index do |bill, index|\n      title = bill.xpath(\"//p/font/a\")[index].text\n      link  = bill.xpath(\"//p/font/a\")[index]['href']\n      @billsArray &lt;&lt; Bill.new(title, link)\n    end\n\n    # Render the bills array\n    render template: 'scrape_house_calendar'\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "fork"], "answers": [{"tags": [], "owner": {"reputation": 432, "user_id": 4259486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef85f4c9a30413ee22dd02945b21f664?s=128&d=identicon&r=PG&f=1", "display_name": "bartgras", "link": "https://stackoverflow.com/users/4259486/bartgras"}, "is_accepted": false, "score": 0, "last_activity_date": 1460178590, "creation_date": 1460178590, "answer_id": 36512978, "question_id": 35739450, "link": "https://stackoverflow.com/questions/35739450/ruby-fork-multiple-processes-and-track-status-of-running-complete/36512978#36512978", "title": "Ruby fork multiple processes and track status of running/complete?", "body": "<p>I don't know what is more important to you, is it \"checking for child process status\" or being able to \"fork off additional child processes as needed\". If the latter than this might help you:</p>\n\n<pre><code>  queue = ['A','B','C','D']\n  forks = []\n  while queue.size &gt; 0\n    q = queue.shift\n    forks &lt;&lt; Process.fork do\n      puts q\n    end\n\n    if forks.size &gt;= 10\n      forks.delete Process.wait \n    end\n  end\n</code></pre>\n\n<p>You can keep pushing new elements to queue or if your goal is to loop forever then you can easily change it loop from <code>while</code> to <code>loop</code>.</p>\n\n<p>With the <code>forks.size</code> you can set amount of the child processes being processes at the same time</p>\n\n<p>Important thing to know about <code>Process.wait</code> is that when you don't pass parameters to it, it waits for any child process to finish and returns pid of that process.</p>\n"}], "owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1293, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1460178590, "creation_date": 1456897718, "question_id": 35739450, "link": "https://stackoverflow.com/questions/35739450/ruby-fork-multiple-processes-and-track-status-of-running-complete", "title": "Ruby fork multiple processes and track status of running/complete?", "body": "<p>I'm trying to fork children processes off and keep track of if the process is still running or has completed, but I don't want to block and wait for the process to complete as I need to be able to continue monitoring for new incoming requests and fork off additional child processes as needed.</p>\n\n<p>Here is some basic sample code of what I'm trying to do.</p>\n\n<pre><code>loop do\n  pid = fork do\n    puts 'foo'\n    exit 99\n  end\n\n  ret_pid = wait2(pid,  Process::WNOHANG) # Tried this, but it never gets a value\n  if ret_pid\n    puts 'got a returned pid'\n  end\nend\n</code></pre>\n\n<p>I've tried waiting using the <code>Process::WNOHANG</code> flag; this doesn't block, but it also never seems to get any type of return status.  I've tried both <code>wait</code> and <code>wait2</code>, but no difference.</p>\n\n<p>I have also tried waiting just using <code>wait(pid)</code> which gets the status back from the child process, but this blocks so I end up with only a single forked process which doesn't do me any good.</p>\n"}, {"tags": ["mysql", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1456927396, "post_id": 35739906, "comment_id": 59171867, "body": "Looks great!  Just one quick question: What does the &#39;wb&#39; argument mean?  Would it still work if I just said &#39;w+&#39; instead?"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1456989778, "post_id": 35739906, "comment_id": 59203319, "body": "You can find the different modes here: <a href=\"http://stackoverflow.com/questions/3682359/what-are-the-ruby-file-open-modes-and-options\" title=\"what are the ruby file open modes and options\">stackoverflow.com/questions/3682359/&hellip;</a>  I don&#39;t think you need the <code>+</code> in your use case."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1456899675, "creation_date": 1456899675, "answer_id": 35739906, "question_id": 35739282, "link": "https://stackoverflow.com/questions/35739282/activerecord-rip-out-and-name-an-image-from-a-mediumblob-in-the-database/35739906#35739906", "title": "ActiveRecord: Rip out and name an image from a mediumblob in the database", "body": "<p>Have you tried something like:</p>\n\n<pre><code>User.find_each do |user|\n  File.open(\"#{user.first_name}_#{user.last_name}.jpg\", 'wb') do |file|\n    file &lt;&lt; user.mugshot\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 35739906, "answer_count": 1, "score": 0, "last_activity_date": 1456899675, "creation_date": 1456896995, "question_id": 35739282, "link": "https://stackoverflow.com/questions/35739282/activerecord-rip-out-and-name-an-image-from-a-mediumblob-in-the-database", "title": "ActiveRecord: Rip out and name an image from a mediumblob in the database", "body": "<p>In the database I have the table <code>users</code>. This table has the column <code>mugshot</code> which is of type <code>mediumblob</code>.  I know that this mediumblob's content type is <code>image/jpeg</code>.  </p>\n\n<p>What I want to do is write a ruby script that requires in ActiveRecord, and does the following:</p>\n\n<ul>\n<li>iterate through all the records within the <code>users</code> table</li>\n<li>Create a <code>.jpg</code> file from the data within that mediumblob field</li>\n<li>name the file according to other columns on the <code>users</code> table. Example: \"#{user.first_name}_#{user.last_name}.jpg\".  </li>\n</ul>\n\n<p>The part I am having trouble figuring out is how to rip out the image from that <code>mediumblob</code> field and then name the file what I want:</p>\n\n<pre><code>User.all.each do |user|\n # rip out the image from the mediumblob field\n # save the file as \"#{user.first_name}_#{userlast_name}.jpg\"\n # save the file within the folder 'my_images' located on the Desktop\nend\n</code></pre>\n"}, {"tags": ["ruby", "rename"], "comments": [{"owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "edited": false, "score": 0, "creation_date": 1456896075, "post_id": 35739060, "comment_id": 59151973, "body": "You want to rename folders and files ?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6005899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b2693b94c4c6d26359af3241ad00ef?s=128&d=identicon&r=PG&f=1", "display_name": "chrisB", "link": "https://stackoverflow.com/users/6005899/chrisb"}, "edited": false, "score": 0, "creation_date": 1456980726, "post_id": 35739319, "comment_id": 59199655, "body": "Thanks for posting up the code.  Doesn&#39;t quite work out of the box and doing my best to trouble shoot.  New name will capture the &quot;/my_file.extension&quot;, but end.each arguments |old,neu| both return &quot;dir_or_file&quot;.  I suspect it is in &#39;code&#39; my_file = new_name.first[/[^\\/]+(?=\\.fls\\z)/] # get my_name   memo[dir] = dir.gsub /[^\\/]+(?=\\/#{my_file}\\.fls\\z)/, my_file &#39;code&#39;  Can you explain these lines?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 11, "user_id": 6005899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b2693b94c4c6d26359af3241ad00ef?s=128&d=identicon&r=PG&f=1", "display_name": "chrisB", "link": "https://stackoverflow.com/users/6005899/chrisb"}, "edited": false, "score": 0, "creation_date": 1456983876, "post_id": 35739319, "comment_id": 59200698, "body": "It does work for me. Do you have a destination folder created? If no, there might be a need to create it in the code (see update.) Regarding two lines to explain, please see an update as well."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1456983871, "last_edit_date": 1456983871, "creation_date": 1456897146, "answer_id": 35739319, "question_id": 35739060, "link": "https://stackoverflow.com/questions/35739060/recursively-rename-folders-based-on-contents-in-ruby/35739319#35739319", "title": "Recursively rename folders based on contents in Ruby", "body": "<p>Assuming, the <code>my_file</code> is to be chosen by <code>extension</code>, one might do:</p>\n\n<pre><code>Dir[\"/working_directory/**/*\"].select do |dir_or_file|\n  File.directory? dir_or_file # select only directories, recursively\nend.inject({}) do |memo, dir|\n  new_name = Dir[\"#{dir}/*.extension\"].to_a\n  unless new_name.size == 1 # check if the folder contains only one proper file\n    puts \"Multiple/No choices; can not rename dir [#{dir}] \u21d2 skipping...\"\n    next memo # skip if no condition met\n  end\n  my_file = new_name.first[/[^\\/]+(?=\\.extension\\z)/] # get my_name\n  memo[dir] = dir.gsub /[^\\/]+(?=\\/#{myfile}\\.extension\\z)/, my_file\n  memo\nend.each do |old, neu|\n  # dry run to make sure everything is OK \n  puts \"Gonna rename #{old} to #{neu}\"\n  # uncomment the lines below as you are certain the code works properly\n  # neu_folder = neu[/(.*?)([^\\/]+\\z)/, 1]\n  # FileUtils.mkdir neu_folder unless File.exist? neu_folder\n  # FileUtils.mv old, neu # rename\nend\n</code></pre>\n\n<p>The rename is done after the main processing for the sake of previous iterator consistency, probably in this case it might be done in the previous loop, instead of injecting <code>old: neu</code> pairs into hash and iterating it later.</p>\n\n<p>We are heavily using string parsing with regexps here.</p>\n\n<pre><code>  my_file = new_name.first[/[^\\/]+(?=\\.extension\\z)/] # get my_name\n</code></pre>\n\n<p>this line gets a new folder name by parsing a tail of the string, containing no slashes and trailing with <code>'.extension\\z'</code> (see positive lookahead.)</p>\n\n<pre><code>  memo[dir] = dir.gsub /[^\\/]+(?=\\/#{myfile}\\.extension\\z)/, my_file\n</code></pre>\n\n<p>This line assigns a new element on an accumulator hash, substituting the old folder name with the new one.</p>\n"}], "owner": {"reputation": 11, "user_id": 6005899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b2693b94c4c6d26359af3241ad00ef?s=128&d=identicon&r=PG&f=1", "display_name": "chrisB", "link": "https://stackoverflow.com/users/6005899/chrisb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456983871, "creation_date": 1456895876, "last_edit_date": 1456896803, "question_id": 35739060, "link": "https://stackoverflow.com/questions/35739060/recursively-rename-folders-based-on-contents-in-ruby", "title": "Recursively rename folders based on contents in Ruby", "body": "<p>I have a collection of folders (within a folder) that all need to be renamed based on their contents.  </p>\n\n<p>Specifically, I'd like to rename \"/working_directory/my_folder/my_file.extension\" to /working_directory/my_file/my_file.extension\"</p>\n\n<p>There are a few other files within /my_folder/. How might I recursively do this using ruby?</p>\n\n<p>I'm new to ruby and programming, I have so tried to just extract the file names, but have not have much luck.  The attempt at itterating through the folders.  This will cycle through /working_directory/ every time Find.find is called.  The intent is to search /working_directory/my_folder/ only for the file with the .fls extension.</p>\n\n<pre><code>require 'find'\nPath = \"/working_directory/\"\nDir.foreach(Path) do |file|\n puts file\n new_dir = Path+file\n puts new_dir\n Find.find(new_dir) do |i| # this is intended to by /working_directory/my_folder/\n  fls_file &lt;&lt; i if i =~ /.*\\.fls$/\n  puts fls_file\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "nested-loops"], "comments": [{"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1456895007, "post_id": 35738850, "comment_id": 59151589, "body": "can you post controller too?"}, {"owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "reply_to_user": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1456898050, "post_id": 35738850, "comment_id": 59152765, "body": "Done. I think it&#39;s all wrong..."}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1456898259, "post_id": 35738850, "comment_id": 59152859, "body": "where is your show page action in your controller?"}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1456898567, "post_id": 35738850, "comment_id": 59153005, "body": "I am not able to see show action in your pages controller"}, {"owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1456898967, "post_id": 35738850, "comment_id": 59153172, "body": "There is none for pages because the pages don&#39;t contain the content"}, {"owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1456899059, "post_id": 35738850, "comment_id": 59153227, "body": "I have updated with a screenshot. Actually, I want the page show to pull the latest version and display that. I haven&#39;t gotten that far yet though..."}, {"owner": {"reputation": 1514, "user_id": 3749865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1873b0d2c86671bb1b3d44b53b48c09?s=128&d=identicon&r=PG", "display_name": "Christian Rolle", "link": "https://stackoverflow.com/users/3749865/christian-rolle"}, "edited": false, "score": 0, "creation_date": 1456899943, "post_id": 35738850, "comment_id": 59153602, "body": "There is no show action in your pages_controller.rb. Please post the entire controller and the URL you are calling."}, {"owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "edited": false, "score": 0, "creation_date": 1456901791, "post_id": 35738850, "comment_id": 59154538, "body": "That is the entire controller. I&#39;m not sure what the show action has to do with anything at this point. Can you explain why I need it for solving my current problem?"}], "answers": [{"comments": [{"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1456898337, "post_id": 35738902, "comment_id": 59152905, "body": "what is the difference between your code and the code which is pasted in question?"}, {"owner": {"reputation": 935, "user_id": 5039866, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oH8jw.jpg?s=128&g=1", "display_name": "Nirajan Pokharel", "link": "https://stackoverflow.com/users/5039866/nirajan-pokharel"}, "reply_to_user": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1456898397, "post_id": 35738902, "comment_id": 59152927, "body": "the question has been updated since i posted this answer"}], "tags": [], "owner": {"reputation": 935, "user_id": 5039866, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oH8jw.jpg?s=128&g=1", "display_name": "Nirajan Pokharel", "link": "https://stackoverflow.com/users/5039866/nirajan-pokharel"}, "is_accepted": false, "score": 2, "last_activity_date": 1456895047, "creation_date": 1456895047, "answer_id": 35738902, "question_id": 35738850, "link": "https://stackoverflow.com/questions/35738850/rails-nested-loop-not-working/35738902#35738902", "title": "Rails - Nested loop not working", "body": "<pre><code>- @subject.pages.each do |p|\n        %h6\n          = p.number\n          = \": \" + p.title\n        %p\n          = p.synopsis\n        %table\n          %tbody\n            - p.versions.each do |v|\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1456915950, "creation_date": 1456915950, "answer_id": 35745120, "question_id": 35738850, "link": "https://stackoverflow.com/questions/35738850/rails-nested-loop-not-working/35745120#35745120", "title": "Rails - Nested loop not working", "body": "<p>I wasn't passing through the loop variable. Answer is:</p>\n\n<pre><code>= render 'versions/form', p: p\n\n\n= simple_form_for [p, p.versions.build] do |f|\n</code></pre>\n"}], "owner": {"reputation": 1310, "user_id": 5957287, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6f3fe3b6d64fe51b26636b9fceec852e?s=128&d=identicon&r=PG&f=1", "display_name": "Raymond R", "link": "https://stackoverflow.com/users/5957287/raymond-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 35745120, "answer_count": 2, "score": 0, "last_activity_date": 1456915950, "creation_date": 1456894731, "last_edit_date": 1456915866, "question_id": 35738850, "link": "https://stackoverflow.com/questions/35738850/rails-nested-loop-not-working", "title": "Rails - Nested loop not working", "body": "<p>Each subject has many pages and each page has many versions. On the show subject page for the owner of that subject, I want the user to be able to update all the pages and versions on that page. However, I get this error:</p>\n\n<pre><code>undefined method `versions' for nil:NilClass\n</code></pre>\n\n<p>My show page:</p>\n\n<pre><code>%h1\n  = @subject.title\n%h3 Subject Synopsis\n%p\n  = @subject.synopsis\n\n- @subject.pages.each do |p|\n    %h6\n      = p.number\n      = \": \" + p.title\n    %p\n      = p.synopsis\n    %table\n      %tbody\n        - p.versions.each do |v|\n          %tr\n           %td v.number\n           %td v.create_at\n    = render 'versions/form'\n</code></pre>\n\n<p>Versions form:</p>\n\n<pre><code>= simple_form_for [@page, @page.versions.build] do |f|\n  = f.input :number, placeholder: 'Number', label: false\n  = f.text_area :content, placeholder: 'Content', label: false\n  = f.button :submit\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "asset-pipeline"], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 1092800, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yVzfE.jpg?s=128&g=1", "display_name": "bradpotts", "link": "https://stackoverflow.com/users/1092800/bradpotts"}, "edited": false, "score": 0, "creation_date": 1456955876, "post_id": 35743060, "comment_id": 59191262, "body": "Thanks for the answer Max, it looks like it should work but doesn&#39;t with me for some reason. BTW thanks for the link to your project really helped me out. I updated my question with additional info and changes I made. Will keep working on this."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 323, "user_id": 1092800, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yVzfE.jpg?s=128&g=1", "display_name": "bradpotts", "link": "https://stackoverflow.com/users/1092800/bradpotts"}, "edited": false, "score": 0, "creation_date": 1456960466, "post_id": 35743060, "comment_id": 59193408, "body": "@bradpotts it looks like the css/js require statements in your question are still wrong, it should be <code>*= require phcthemes</code> and <code>&#47;&#47;= require phxthemes</code>.  When there&#39;s no equal sign that means the dependency is not being loaded. The word &#39;require&#39; after the equal sign is also necessary, both in CSS and JS"}, {"owner": {"reputation": 323, "user_id": 1092800, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yVzfE.jpg?s=128&g=1", "display_name": "bradpotts", "link": "https://stackoverflow.com/users/1092800/bradpotts"}, "edited": false, "score": 0, "creation_date": 1456963104, "post_id": 35743060, "comment_id": 59194401, "body": "Thanks for all your help. I made the changes. I still have the same error, but I am satisfied as it seems correct and set me on the right direction. If you notice anything else please let me know."}, {"owner": {"reputation": 323, "user_id": 1092800, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yVzfE.jpg?s=128&g=1", "display_name": "bradpotts", "link": "https://stackoverflow.com/users/1092800/bradpotts"}, "edited": false, "score": 0, "creation_date": 1456966117, "post_id": 35743060, "comment_id": 59195320, "body": "Yes it is. Here&#39;s the link if you want to take a look at it. <a href=\"https://github.com/bradpotts/phc-themes\" rel=\"nofollow noreferrer\">github.com/bradpotts/phc-themes</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 323, "user_id": 1092800, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yVzfE.jpg?s=128&g=1", "display_name": "bradpotts", "link": "https://stackoverflow.com/users/1092800/bradpotts"}, "edited": false, "score": 0, "creation_date": 1456997683, "post_id": 35743060, "comment_id": 59208271, "body": "@bradpotts I forked your gem, fixed your problem, and made a pull request. See the comment on the pull request to learn what I did."}, {"owner": {"reputation": 323, "user_id": 1092800, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yVzfE.jpg?s=128&g=1", "display_name": "bradpotts", "link": "https://stackoverflow.com/users/1092800/bradpotts"}, "edited": false, "score": 0, "creation_date": 1457022006, "post_id": 35743060, "comment_id": 59226607, "body": "thanks for taking the time to help me out, much appreciated I see all my newbie errors, this will also help me out next time I build something similar."}, {"owner": {"reputation": 1722, "user_id": 1480946, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e87530abcbb61636ac0b5197e3848b8b?s=128&d=identicon&r=PG", "display_name": "Jake Smith", "link": "https://stackoverflow.com/users/1480946/jake-smith"}, "edited": false, "score": 0, "creation_date": 1469394712, "post_id": 35743060, "comment_id": 64504680, "body": "@maxpleaner, the OP&#39;s repo no longer exists.  Could you outline what you did for the pull-request you mention?  I am having multiple issues, one of which is pretty much this issue...  Here i have another related question:<a href=\"http://stackoverflow.com/questions/38537357/rails-5-gemify-assets-manifest-file\" title=\"rails 5 gemify assets manifest file\">stackoverflow.com/questions/38537357/&hellip;</a>  Would you be able to let me know what I&#39;m doing wrong?  My gem is here: <a href=\"https://github.com/jakehockey10/popcircle\" rel=\"nofollow noreferrer\">github.com/jakehockey10/popcircle</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1722, "user_id": 1480946, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e87530abcbb61636ac0b5197e3848b8b?s=128&d=identicon&r=PG", "display_name": "Jake Smith", "link": "https://stackoverflow.com/users/1480946/jake-smith"}, "edited": false, "score": 0, "creation_date": 1469396075, "post_id": 35743060, "comment_id": 64505076, "body": "@JakeSmith I don&#39;t remember what I did for the pull request, but I left a comment on your question"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1456911658, "last_edit_date": 1456911658, "creation_date": 1456910664, "answer_id": 35743060, "question_id": 35738671, "link": "https://stackoverflow.com/questions/35738671/load-assets-using-a-gem-having-troubles-wont-load-assets/35743060#35743060", "title": "Load Assets Using a Gem (Having Troubles Won&#39;t Load Assets)", "body": "<p>There's some code missing from your Engine class.\nInclude the following</p>\n\n<pre><code>initializer :assets do |config|\n  Rails.application.config.assets.precompile += %w{ myfile.js myfile.css }\n  Rails.application.config.assets.paths &lt;&lt; root.join(\"app\", \"assets\", \"javascripts\")\n  Rails.application.config.assets.paths &lt;&lt; root.join(\"app\", \"assets\", \"stylesheets\")\nend\n</code></pre>\n\n<p>and then include your files in app/assets/javascripts or app/assets/stylesheets in your gem directory. I'd be surprised if it didn't work the same for the vendor directory or any other directory.</p>\n\n<p>When the gem is installed to a Rails app, you'll still need to put require statements in application.css and application.js. By the way, your CSS requirement statement is incorrect - it should be <code>*= require phcthemes</code></p>\n\n<p>The <a href=\"http://api.rubyonrails.org/classes/Rails/Railtie.html\" rel=\"nofollow\">Railtie</a> docs say that a Railtie class is needed when running initializers, so include the following class inside your main gem module:</p>\n\n<pre><code>class MyRailtie &lt; Rails::Railtie\nend\n</code></pre>\n\n<p>That should do it. You don't actually have to change the gemspec at all. </p>\n\n<p>You can see my <a href=\"https://github.com/maxpleaner/socket_helpers\" rel=\"nofollow\">socket_helpers</a> gem for an example. That's what I was building when I encountered this same issue.  </p>\n"}], "owner": {"reputation": 323, "user_id": 1092800, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yVzfE.jpg?s=128&g=1", "display_name": "bradpotts", "link": "https://stackoverflow.com/users/1092800/bradpotts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 0, "accepted_answer_id": 35743060, "answer_count": 1, "score": 2, "last_activity_date": 1456955557, "creation_date": 1456893773, "last_edit_date": 1456955557, "question_id": 35738671, "link": "https://stackoverflow.com/questions/35738671/load-assets-using-a-gem-having-troubles-wont-load-assets", "title": "Load Assets Using a Gem (Having Troubles Won&#39;t Load Assets)", "body": "<p>I have a theme I'm constantly using on my sites. I've been trying to load css, js and plugin folder (included with the theme) assets through a gem.</p>\n\n<pre><code>Sprockets::FileNotFound: couldn't find file 'phcthemes' with type 'application/javascript'\n</code></pre>\n\n<p>If I take out the javascript (css only) this doesn't execute and shows up exactly like this in compiled asset</p>\n\n<pre><code>*= phcthemes\n</code></pre>\n\n<p>My thoughts app wasn't recognizing the gem, I tried using isolate_namespace (commented out for now) also tried several different config using the info from answer below to no avail.</p>\n\n<p>Main App application.css</p>\n\n<pre><code>*= phcthemes\n</code></pre>\n\n<p>Main App application.js</p>\n\n<pre><code>// require phcthemes\n</code></pre>\n\n<p>lib/phcthemers.rb</p>\n\n<pre><code>require \"phcthemes/version\"\n\nmodule Phcthemes\n    class MyRailtie &lt; Rails::Railtie\n    end\n\n    class Engine &lt; ::Rails::Engine\n\n        # Isolate Namespace\n        #isolate_namespace Phcthemes\n\n        # Initialize Assets\n        initializer :assets do |config|\n            Rails.application.config.assets.precompile += %w{ application.js application.css }\n            Rails.application.config.assets.paths &lt;&lt; root.join(\"app\", \"assets\", \"javascripts\")\n            Rails.application.config.assets.paths &lt;&lt; root.join(\"app\", \"assets\", \"stylesheets\")\n        end\n\n    end\n\nend\n</code></pre>\n\n<p>phcthemes.gemspec</p>\n\n<pre><code>$:.push File.expand_path(\"../lib\", __FILE__)\n\n# Maintain your gem's version:\nrequire \"phcthemes/version\"\n\nGem::Specification.new do |spec|\n\n    spec.name        = \"phcthemes\"\n    spec.version     = Phcthemes::VERSION\n    spec.authors     = [\"BradPotts\"]\n    spec.email       = [\"bradley.j.potts@gmail.com\"]\n    spec.homepage    = \"http://phcnetworks.net\"\n    spec.summary     = \"PHCThemes\"\n    spec.description = \"PHCNetworks theme with mtdevise and assets built in.\"\n    spec.license     = \"GPL-3.0\"\n\n    spec.files         = `git ls-files -z`.split(\"\\x0\").reject { |f| f.match(%r{^(test|spec|features)/}) }\n    spec.bindir        = \"exe\"\n    spec.executables   = spec.files.grep(%r{^exe/}) { |f| File.basename(f) }\n    spec.require_paths = [\"lib\"]\n\n    spec.files = Dir[\"{app,config,db,lib}/**/*\", \"LICENSE\", \"Rakefile\", \"README.md\"]\n\n    # Main Structure &amp; Security\n    spec.add_dependency \"rails\", \"~&gt; 4.2.5.2\"\n\n    # Development &amp; Testing\n    spec.add_development_dependency \"sqlite3\"\n    spec.add_development_dependency \"bundler\", \"~&gt; 1.11\"\n    spec.add_development_dependency \"rake\", \"~&gt; 10.0\"\n    spec.add_development_dependency \"rspec\", \"~&gt; 3.0\"\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 1400, "user_id": 545564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbac19be467c5276ba6da5644d1aeee?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Deeden", "link": "https://stackoverflow.com/users/545564/josh-deeden"}, "edited": false, "score": 0, "creation_date": 1456894174, "post_id": 35738645, "comment_id": 59151320, "body": "Can you post the source for tickets/new.html.erb?"}, {"owner": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "reply_to_user": {"reputation": 1400, "user_id": 545564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbac19be467c5276ba6da5644d1aeee?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Deeden", "link": "https://stackoverflow.com/users/545564/josh-deeden"}, "edited": false, "score": 0, "creation_date": 1456895899, "post_id": 35738645, "comment_id": 59151921, "body": "At this stage, there is no view file in place. That comes in the next section 5.1.4.   Looking ahead, it will be a form partial with the expected title and description fields, along with a submit button."}, {"owner": {"reputation": 1400, "user_id": 545564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbac19be467c5276ba6da5644d1aeee?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Deeden", "link": "https://stackoverflow.com/users/545564/josh-deeden"}, "edited": false, "score": 0, "creation_date": 1456896262, "post_id": 35738645, "comment_id": 59152055, "body": "Got it.   So what&#39;s happening is that your test is expecting there to be a form  present after &quot;New Ticket&quot; is clicked.   But since that view hasn&#39;t been created yet, Rails is probably throwing up an error page instead.   That&#39;s why it is unable to find the fields / buttons you&#39;re expecting."}, {"owner": {"reputation": 1400, "user_id": 545564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbac19be467c5276ba6da5644d1aeee?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Deeden", "link": "https://stackoverflow.com/users/545564/josh-deeden"}, "edited": false, "score": 0, "creation_date": 1456896339, "post_id": 35738645, "comment_id": 59152087, "body": "^^^^ Big EFFING guess.   You can verify this by switching your capybara driver to selenium (you&#39;ll need to install the selenium-driver gem&quot; and watching the test execute in the browser."}, {"owner": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "reply_to_user": {"reputation": 1400, "user_id": 545564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbac19be467c5276ba6da5644d1aeee?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Deeden", "link": "https://stackoverflow.com/users/545564/josh-deeden"}, "edited": false, "score": 0, "creation_date": 1456898254, "post_id": 35738645, "comment_id": 59152857, "body": "Cool I follow you, thank you Josh!  The only thing I can think of is that the text seems to be thinking the spec will return the error messages that are shown in the console... Because as you and Taryn are saying, Failures for those returns were never coded in. I doubt the authors think that, they&#39;re reputable, so it&#39;s probably best to just chalk it up as a fluke and move on.  As long as I&#39;m confused by the text for the right reasons, then I&#39;m happy to move on!"}], "answers": [{"comments": [{"owner": {"reputation": 1400, "user_id": 545564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbac19be467c5276ba6da5644d1aeee?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Deeden", "link": "https://stackoverflow.com/users/545564/josh-deeden"}, "edited": false, "score": 0, "creation_date": 1456894755, "post_id": 35738759, "comment_id": 59151495, "body": "This answer is vague and I don&#39;t think it does a great job at addressing the problem stated in the question.   So I downvoted it.   If however, @spectator6 indicates he finds this answer helpful, I&#39;ll reverse the vote."}, {"owner": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "edited": false, "score": 0, "creation_date": 1456895575, "post_id": 35738759, "comment_id": 59151779, "body": "@Taryn East - Interesting, I didn&#39;t know that about spec! Great explanation! I am confused on one point though... That being the case, what would cause spec to return the error message that the text is expecting? Failure/Error: click_link &quot;New Ticket&quot; / NoMethodError: / undefined method &#39;tickets&#39; for yadda yadda"}, {"owner": {"reputation": 1400, "user_id": 545564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbac19be467c5276ba6da5644d1aeee?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Deeden", "link": "https://stackoverflow.com/users/545564/josh-deeden"}, "edited": false, "score": 0, "creation_date": 1456896552, "post_id": 35738759, "comment_id": 59152158, "body": "The second spec is expecting validation errors, which would be caused by submitting an invalid form, which is the case when you click &quot;Create Ticket&quot; without filling anything in.       Make sense?"}, {"owner": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "edited": false, "score": 1, "creation_date": 1456896791, "post_id": 35738759, "comment_id": 59152242, "body": "@Taryn East - To follow up a bit more, is the issue possibly that I&#39;m confusing what spec should be outputting? Because like you&#39;re saying the console does show the request going through, but immediately hits a brick wall due to &quot;Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.1ms) / NameError - uninitialized constant Project::Ticket ...&quot;  If I&#39;m reading you correctly, are you saying this error would need to be coded into the spec test in order for it to pop up a Fail before it advances to search for the form fields? #tryingtolearnsomethingnew"}, {"owner": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "reply_to_user": {"reputation": 1400, "user_id": 545564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbac19be467c5276ba6da5644d1aeee?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Deeden", "link": "https://stackoverflow.com/users/545564/josh-deeden"}, "edited": false, "score": 0, "creation_date": 1456897010, "post_id": 35738759, "comment_id": 59152329, "body": "@Josh Deeden - Yes, I think that makes sense. You&#39;re saying that essentially, the before action as fulfilled in that it WAS able to do the visit, link, and link. So, that being the case, the first opportunity spec has to fail is on the leading scenario, when it looks to complete form fields.  Is that close?"}, {"owner": {"reputation": 1400, "user_id": 545564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acbac19be467c5276ba6da5644d1aeee?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Deeden", "link": "https://stackoverflow.com/users/545564/josh-deeden"}, "reply_to_user": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "edited": false, "score": 0, "creation_date": 1456897472, "post_id": 35738759, "comment_id": 59152509, "body": "@Spectator6 Yeah, the commands in the before hook seem to be running correctly, which is what I would expect based on your code.   If you have not in fact implemented the Ticket Model (should just be <code>Ticket</code>, btw.  Not <code>Project::Ticket</code>), or the tickets/new view, then you would expect to see an application error in the log.   However, the test will simply report a failure because it can&#39;t find what it&#39;s looking for (because there&#39;s an error page where it&#39;s expecting a form)"}, {"owner": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "edited": false, "score": 0, "creation_date": 1456902884, "post_id": 35738759, "comment_id": 59155040, "body": "I have a follow-up concern...  Is there a way to have spec fail tests if errors are returned? Because the same sort of situation happened again. The new ticket form is rocking and rolling, all the expected fields can be manipulated, and the Create Ticket button exists. So spec passes with flying colors, yet the button is not functional until its associated methods are defined in the controller. The text says it should alert to this Failure, but it doesn&#39;t.   I&#39;m thinking ahead when I&#39;m running a complex site w/out a tutorial to rest on, trying to understand how I could catch these situations."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1456959180, "post_id": 35738759, "comment_id": 59192898, "body": "Yes you are correct - in order to check that it correctly fails, you&#39;d do something like expect that the page contains a routing error or the no-method error for the controller. Whatever the actual text is for that error page :)"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1456961156, "post_id": 35738759, "comment_id": 59193673, "body": "Also, I think you possibly have a framing error in your understanding: capybara tests the things that the user sees in the browser. It does not test the code, but the expected things a user sees in the UI. If you expect the user to see an error-page when you do X, then in your test you should do X, then have an expectation of the content of the error page. To test that the controller code gives a specific error - you should have a controller test and do X, and then add an expectation that you see the given error."}], "tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": false, "score": 0, "last_activity_date": 1456894211, "creation_date": 1456894211, "answer_id": 35738759, "question_id": 35738645, "link": "https://stackoverflow.com/questions/35738645/rspec-seems-to-be-passing-portion-of-test-that-should-be-failing-rails-4-in-act/35738759#35738759", "title": "Rspec seems to be passing portion of test that should be failing [Rails 4 In Action]", "body": "<p>Ok, to begin with, you are getting the correct error for the code you have.</p>\n\n<p>Walk through the test in the browser to see what actually happens... you visit the link, click \"Internet explorer\", then click the button \"New ticket\".</p>\n\n<p>There <em>is</em> a button called that, so the spec does not fail when you do that.</p>\n\n<p>The browser will correctly take you to a standard Rails failure page.</p>\n\n<p>rspec+capybara have no problem with this happening - it isn't an exception in the spec... you do have to actually test real error pages in capybara - so they are not counted as a problem for the spec.</p>\n\n<p>Think of it this way - if I were a self-aware instance of capybara, I'd be thinking \"right, and next we're going to test that we correctly display the error page\" ;)</p>\n\n<p>The reason you're failing on the title is of course that error page does not have a form with a field called title...</p>\n\n<p>So... just go ahead and implement the new ticket method and carry on :)</p>\n"}, {"tags": [], "owner": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "is_accepted": true, "score": 0, "last_activity_date": 1456904639, "creation_date": 1456904639, "answer_id": 35741222, "question_id": 35738645, "link": "https://stackoverflow.com/questions/35738645/rspec-seems-to-be-passing-portion-of-test-that-should-be-failing-rails-4-in-act/35741222#35741222", "title": "Rspec seems to be passing portion of test that should be failing [Rails 4 In Action]", "body": "<p>I suspected something was inconsistent on my end, so I continued to research my problem further. It turns out the reason I was not seeing the same error messages returned by rspec as mentioned in the text is because I installed the excellent better_errors gem into a :development and :test group. </p>\n\n<p>Evidently, when running this gem in :test, it hijacks the error output before it has a chance to cycle through to rspec+capybara. Once I moved the gem to only be part of the :development group, the test results became consistent with both the reference text and with what I assume Taryn and Josh thought I was seeing.</p>\n"}], "owner": {"reputation": 313, "user_id": 5474201, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1ac3d0de5e843f37adb85d742695a6d?s=128&d=identicon&r=PG&f=1", "display_name": "Spectator6", "link": "https://stackoverflow.com/users/5474201/spectator6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 1, "accepted_answer_id": 35741222, "answer_count": 2, "score": 0, "last_activity_date": 1456904639, "creation_date": 1456893641, "question_id": 35738645, "link": "https://stackoverflow.com/questions/35738645/rspec-seems-to-be-passing-portion-of-test-that-should-be-failing-rails-4-in-act", "title": "Rspec seems to be passing portion of test that should be failing [Rails 4 In Action]", "body": "<p>I'm working through Rails 4 In Action by Bigg, Katz, and Klabnik and for me personally, it's my first introduction to the rspec testing platform.</p>\n\n<p>I'm encountering a situation where the expected Failure reason as noted in the text does <em>NOT</em> coincide with the Failure message I am receiving. In fact, my Failure seems to be happening at a later line, which makes me think rspec is passing a portion that should be failing.</p>\n\n<p>The issue the text is expecting the test to reject is Failure/Error: click_link \"New Ticket\" / NoMethodError: / undefined method 'tickets' for yadda yadda.  Which makes complete sense since I have NOT yet coded this method into the tickets controller. </p>\n\n<p>Instead I'm receiving an error related to a missing \"Title\" field and a missing \"Create Ticket\" button, which as shown in the code below, is after rspec tests for the abovementioned tickets method.</p>\n\n<p>Thank you in advance for your insights! </p>\n\n<p>Now to the code... Let me know if there are other morsels you'd like for me to serve up</p>\n\n<p><strong>creating_tickets_spec.rb</strong></p>\n\n<p>Right at the top, as part of the before action, click_link \"New Ticket\"</p>\n\n<pre><code>require 'spec_helper'\n\nfeature \"Creating tickets\" do\n  before do\n    FactoryGirl.create(:project, name: \"Internet Explorer\")\n\n    visit '/'\n    click_link \"Internet Explorer\"\n    click_link \"New Ticket\"\n  end\n\n  scenario \"Creating a ticket\" do\n    fill_in \"Title\", with: \"Non-standards compliance\"\n    fill_in \"Description\", with: \"My pages are ugly!\"\n    click_button \"Create Ticket\"\n\n    expect(page).to have_content(\"Ticket has been created.\")\n  end\n\n  scenario \"Creating a ticket without valid attributes fails\" do\n    click_button \"Create Ticket\"\n\n    expect(page).to have_content(\"Ticket has not been created.\")\n    expect(page).to have_content(\"Title can't be blank\")\n    expect(page).to have_content(\"Description can't be blank\")\n  end\nend\n</code></pre>\n\n<p><strong>show.html.erb</strong></p>\n\n<pre><code>&lt;% title(@project.name, \"Projects\") %&gt;\n\n&lt;h2&gt;&lt;%= @project.name %&gt;&lt;/h2&gt;\n\n&lt;%= link_to \"Edit Project\", edit_project_path(@project) %&gt;\n\n&lt;%= link_to \"Delete Project\",\n    project_path(@project),\n    method: :delete, # This is intentionally listed as delete rather than the\n    # standard destroy method of CRUD.\n    data: { confirm:\n              \"Are you sure you want to delete this project?\"\n          } %&gt;\n\n&lt;%= link_to \"New Ticket\", new_project_ticket_path(@project) %&gt;\n\n&lt;!-- This is something I added on my own --&gt;\n&lt;/br&gt;\n&lt;%= link_to \"Home\", projects_path %&gt;\n</code></pre>\n\n<p><strong>tickets.controller.rb</strong></p>\n\n<pre><code>class TicketsController &lt; ApplicationController\n\n  before_action :set_project\n\n  def new\n    @ticket = @project.tickets.build\n  end\n\n  private\n    def set_project\n      @project = Project.find(params[:project_id])\n    end\n\nend\n</code></pre>\n\n<p><strong>project.rb</strong></p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n  validates :name, presence: true\n  has_many :tickets\nend\n</code></pre>\n\n<p><strong>Gemfile</strong></p>\n\n<p>Note that I've added a few additional gems outside of those recommended by the text</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.5.1'\n# Use sqlite3 as the database for Active Record\ngem 'sqlite3'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\ngem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n  gem 'better_errors'\n  gem 'minitest-reporters'\n  gem 'rspec-rails', \"~&gt; 2.14\"\n\nend\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n\ngroup :test do\n  gem 'minitest-spec-rails'\n  gem 'minitest-rails-capybara'\n  gem 'capybara'\n  gem 'factory_girl_rails', '~&gt; 4.2.1'\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  root \"projects#index\"\n\n  resources :projects do\n    resources :tickets    \n  end\nend\n</code></pre>\n\n<p><strong>Terminal output for bin/rake routes</strong></p>\n\n<pre><code>Running via Spring preloader in process 58481\n             Prefix Verb   URI Pattern                                      Controller#Action\n               root GET    /                                                projects#index\n    project_tickets GET    /projects/:project_id/tickets(.:format)          tickets#index\n                    POST   /projects/:project_id/tickets(.:format)          tickets#create\n new_project_ticket GET    /projects/:project_id/tickets/new(.:format)      tickets#new\nedit_project_ticket GET    /projects/:project_id/tickets/:id/edit(.:format) tickets#edit\n     project_ticket GET    /projects/:project_id/tickets/:id(.:format)      tickets#show\n                    PATCH  /projects/:project_id/tickets/:id(.:format)      tickets#update\n                    PUT    /projects/:project_id/tickets/:id(.:format)      tickets#update\n                    DELETE /projects/:project_id/tickets/:id(.:format)      tickets#destroy\n           projects GET    /projects(.:format)                              projects#index\n                    POST   /projects(.:format)                              projects#create\n        new_project GET    /projects/new(.:format)                          projects#new\n       edit_project GET    /projects/:id/edit(.:format)                     projects#edit\n            project GET    /projects/:id(.:format)                          projects#show\n                    PATCH  /projects/:id(.:format)                          projects#update\n                    PUT    /projects/:id(.:format)                          projects#update\n                    DELETE /projects/:id(.:format)                          projects#destroy\n</code></pre>\n\n<p><strong>rspec return</strong></p>\n\n<pre><code>FF\n\nFailures:\n\n  1) Creating tickets Creating a ticket\n     Failure/Error: fill_in \"Title\", with: \"Non-standards compliance\"\n     Capybara::ElementNotFound:\n       Unable to find field \"Title\"\n     # ./spec/features/creating_tickets_spec.rb:13:in `block (2 levels) in &lt;top (required)&gt;'\n\n  2) Creating tickets Creating a ticket without valid attributes fails\n     Failure/Error: click_button \"Create Ticket\"\n     Capybara::ElementNotFound:\n       Unable to find button \"Create Ticket\"\n     # ./spec/features/creating_tickets_spec.rb:21:in `block (2 levels) in &lt;top (required)&gt;'\n\nFinished in 0.24689 seconds\n2 examples, 2 failures\n\nFailed examples:\n\nrspec ./spec/features/creating_tickets_spec.rb:12 # Creating tickets Creating a ticket\nrspec ./spec/features/creating_tickets_spec.rb:20 # Creating tickets Creating a ticket without valid attributes fails\n\nRandomized with seed 33653\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "is_accepted": true, "score": 1, "last_activity_date": 1456899931, "last_edit_date": 1456899931, "creation_date": 1456898784, "answer_id": 35739703, "question_id": 35738221, "link": "https://stackoverflow.com/questions/35738221/nested-forms-not-working-with-has-one-association-and-fields-for/35739703#35739703", "title": "nested forms not working with has_one association and fields_for", "body": "<pre><code>class Buyers::RegistrationsController &lt; Devise::RegistrationsController\n  def new\n    build_resource({})\n    @buyer_info = resource.build_buyer_info\n  end\nend\n</code></pre>\n\n<p>Try this</p>\n"}], "owner": {"reputation": 73, "user_id": 4799237, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/beeff7737c90568ecd99e85ffc560c2f?s=128&d=identicon&r=PG&f=1", "display_name": "b&#225;ch tr\u1ea7n nguy&#234;n", "link": "https://stackoverflow.com/users/4799237/b%c3%a1ch-tr%e1%ba%a7n-nguy%c3%aan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 35739703, "answer_count": 1, "score": 0, "last_activity_date": 1456912374, "creation_date": 1456890962, "last_edit_date": 1456912374, "question_id": 35738221, "link": "https://stackoverflow.com/questions/35738221/nested-forms-not-working-with-has-one-association-and-fields-for", "title": "nested forms not working with has_one association and fields_for", "body": "<p>I have 2 models: </p>\n\n<pre><code>class Buyer &lt; ActiveRecord::Base\n  has_one :buyer_info\n  accepts_nested_attributes_for :buyer_info\nend\n</code></pre>\n\n<p>Model <code>BuyerInfo</code> </p>\n\n<pre><code>class BuyerInfo &lt; ActiveRecord::Base\n  belongs_to :buyer\nend\n</code></pre>\n\n<p>In controller (I use devise to create buyer <code>/buyers/registrations_controller</code>)</p>\n\n<pre><code>class Buyers::RegistrationsController &lt; Devise::RegistrationsController\n  def new\n    super\n    resource.build_buyer_info\n  end\nend\n</code></pre>\n\n<p>In _form <code>registrations/_form</code></p>\n\n<pre><code>&lt;div class=\"\"&gt;\n  &lt;div class=\"mid\"&gt;\n    &lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n      &lt;%= f.text_field :full_name, :placeholder =&gt; \"YOUR NAME\", :class =&gt; \"form-control\"%&gt;\n      &lt;%= f.text_field :email, :placeholder =&gt; \"EMAIL ADDRESS\", :class =&gt; \"form-control\", :class =&gt; \"form-control\"%&gt;\n      &lt;%= f.text_field :phone, :placeholder =&gt; \"PHONE NUMBER\", :class =&gt; \"form-control\"%&gt;\n      &lt;br/&gt; &lt;br/&gt;\n\n      &lt;%= f.fields_for :buyer_info do |buyer_info| %&gt;\n        &lt;%= buyer_info.text_field :email_receive1, :placeholder =&gt; \"SEND MY LEADS TO EMAIL #1 \", :class =&gt; \"form-control\"%&gt;\n        &lt;%= buyer_info.text_field :email_receive2, :placeholder =&gt; \"SEND MY LEADS TO EMAIL #2 \", :class =&gt; \"form-control\"%&gt;\n        &lt;%= buyer_info.text_field :email_receive3, :placeholder =&gt; \"SEND MY LEADS TO EMAIL #3 \", :class =&gt; \"form-control\"%&gt;\n        &lt;%= buyer_info.text_field :email_receive4, :placeholder =&gt; \"SEND MY LEADS TO EMAIL #4 \", :class =&gt; \"form-control\"%&gt;  \n      &lt;% end %&gt;\n      &lt;%= f.submit \"Comment\", :type =&gt; :image, :src =&gt; \"#{asset_url(@source_folder+'signup-button.png')}\" %&gt;\n\n    &lt;% end %&gt;       \n  &lt;/div&gt;           \n&lt;/div&gt;  \n</code></pre>\n\n<p>When I run code, in view only display text_fields full_name, email, phone. it dont display fields in fields_for.</p>\n\n<p>How to display fields in fields_for when created model uses nested model has_one relation?</p>\n"}, {"tags": ["ruby", "faraday"], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1457176776, "creation_date": 1457176776, "answer_id": 35813441, "question_id": 35738044, "link": "https://stackoverflow.com/questions/35738044/faraday-connection-switching-the-request-mode/35813441#35813441", "title": "Faraday Connection: Switching the request mode?", "body": "<p>Calling <code>@connection.request :multipart</code> adds <code>Faraday::Request::Multipart</code> to <code>@connecton.builder.handlers</code>. If you want to remove something, you can manipulate that array.</p>\n\n<p>I make no claim that messing with Faraday's (relative) internals is a good idea. Keeping your two connections sounds like a better plan.</p>\n"}, {"tags": [], "owner": {"reputation": 554, "user_id": 802189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db05f638b0a542fd8258b0cf05636d8?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/802189/sean"}, "is_accepted": true, "score": 2, "last_activity_date": 1459552435, "creation_date": 1459552435, "answer_id": 36367237, "question_id": 35738044, "link": "https://stackoverflow.com/questions/35738044/faraday-connection-switching-the-request-mode/36367237#36367237", "title": "Faraday Connection: Switching the request mode?", "body": "<p>You'll want to include <em>both</em> middleware options when creating your connection (<code>:url_encoded</code> and <code>:multipart</code>), and then switch using explicit <code>Content-Type</code> headers.</p>\n\n<p>Per the <a href=\"https://github.com/lostisland/faraday#advanced-middleware-usage\" rel=\"nofollow\">Faraday ReadMe</a>, you can specify 'em both.  An excerpt:</p>\n\n<blockquote>\n<pre><code> Faraday.new(...) do |conn|\n    # POST/PUT params encoders:\n    conn.request :multipart\n    conn.request :url_encoded\n    conn.adapter :net_http\n  end\n</code></pre>\n  \n  <p>This request middleware setup affects POST/PUT requests in the following way:</p>\n  \n  <ol>\n  <li><code>Request::Multipart</code> checks for files in the payload, otherwise leaves everything untouched;</li>\n  <li><code>Request::UrlEncoded</code> encodes as \"application/x-www-form-urlencoded\" if not already encoded or of another type.</li>\n  </ol>\n</blockquote>\n\n<p>So adding <code>:multipart</code> still allows for url-encoded posts, because it only matters when there are files in the payload.  Then, if you explicitly set your <code>Content-Type</code> for the file upload, you should be fine - Faraday will use the correct request middleware because you explicitly told it to use multipart.  But if you <em>don't</em> specify, it will default to url-encoded.</p>\n\n<pre><code># works using :url_encoded\n@connection.post '/something' do |req|\n  req.body = { some: 'posted fields' }\nend\n\n# works using :multipart because Content-Type was explicitly set\n@connection.post '/some_file_endpoint' do |req|\n  req.headers['Content-Type'] = 'multipart/form-data'\n  req.body = { file_field: Faraday::UploadIO.new(file_path, 'text/plain') }\nend\n</code></pre>\n"}], "owner": {"reputation": 739, "user_id": 596146, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6f4e4384fad09723e025f38b20359e41?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/596146/levi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1191, "favorite_count": 0, "accepted_answer_id": 36367237, "answer_count": 2, "score": 3, "last_activity_date": 1459552435, "creation_date": 1456889847, "question_id": 35738044, "link": "https://stackoverflow.com/questions/35738044/faraday-connection-switching-the-request-mode", "title": "Faraday Connection: Switching the request mode?", "body": "<p>I am using <code>faraday</code> to handle some requests to an internal API. The API endpoints use a CSRF token, so I am also using <code>faraday-cookie_jar</code>.</p>\n\n<p>For a couple of the API endpoints, they require a <code>:multipart</code> request. Others do not.</p>\n\n<h2>Question</h2>\n\n<p>Is there any way to utilize the same <code>Connection</code> object, but switch whether or not you are doing a <code>:multipart</code> or a <code>:url_encoded</code> request?</p>\n\n<p>Currently, I have to use two connections depending on which type of request I'm making. It does not seem you can change a connection's request method after it has done at least 1 request.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>@connection = Faraday.new(url: 'http://localhost:3000') do |faraday|\n  faraday.request :url_encoded\n  faraday.use :cookie_jar\n  faraday.adapter Faraday.default_adapter\nend\n\n@connection.get '/something'\n\n# try to change to :multipart\n@connection.request :multipart # =&gt; Faraday::RackBuilder::StackLocked: can't modify middleware stack after making a request\n</code></pre>\n\n<p>It doesn't seem to allow you to switch after you've made a request. I know that you can modify the request a bit for each request itself by passing a block, but I can't seem to find where to modify to switch to <code>:multipart</code> in it.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["arrays", "ruby", "excel", "csv", "nokogiri"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1456891893, "post_id": 35738016, "comment_id": 59150641, "body": "What&#39;s your code inside <code>do ... end</code>?"}, {"owner": {"reputation": 107, "user_id": 4695709, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a072ab48916aef99a66ff67ad5480761?s=128&d=identicon&r=PG&f=1", "display_name": "dozel", "link": "https://stackoverflow.com/users/4695709/dozel"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1456892128, "post_id": 35738016, "comment_id": 59150722, "body": "<code>category_array = []</code>    <code>page.css(&quot;#ctl00_PageData_GridView1&quot;).css(&quot;td&quot;)[0..30].each do |line|</code>   <code>category_name = line.text   category_array.push(category_name) end</code>  <code>CSV.open(&#39;category.csv&#39;,&#39;w&#39;) do |csv|   csv &lt;&lt; category_array end</code>"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1456892384, "post_id": 35738016, "comment_id": 59150812, "body": "Please update your question to include this code snippet."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1456897530, "post_id": 35738016, "comment_id": 59152534, "body": "Corpus. Code. Expected output. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 1113, "user_id": 2119730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874059dab10ca3fcc3fb161afce45c38?s=128&d=identicon&r=PG", "display_name": "Milan K&#246;pke", "link": "https://stackoverflow.com/users/2119730/milan-k%c3%b6pke"}, "is_accepted": false, "score": 0, "last_activity_date": 1456911950, "creation_date": 1456911950, "answer_id": 35743526, "question_id": 35738016, "link": "https://stackoverflow.com/questions/35738016/ruby-array-to-csv-file/35743526#35743526", "title": "Ruby array to csv file", "body": "<p>Pretty sure you are doing something wrong with the array like using <code>&lt;&lt;</code> over <code>+</code>:</p>\n\n<pre><code>irb(main):035:0&gt; row = [1]   \nirb(main):035:0&gt; result = [] \n\nirb(main):035:0&gt; result + row\n=&gt; [1] # It adds the content of the second array to the first\n\nirb(main):037:0&gt; result.concat(row)\n=&gt; [1] # Same as above\n\nirb(main):036:0&gt; result &lt;&lt; row\n=&gt; [[1]] # It moves the whole array into the other array\n</code></pre>\n\n<p>So maybe you want to use <code>concat</code> or <code>+</code> instead of <code>&lt;&lt;</code>.</p>\n"}], "owner": {"reputation": 107, "user_id": 4695709, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a072ab48916aef99a66ff67ad5480761?s=128&d=identicon&r=PG&f=1", "display_name": "dozel", "link": "https://stackoverflow.com/users/4695709/dozel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1456934256, "creation_date": 1456889674, "last_edit_date": 1456934256, "question_id": 35738016, "link": "https://stackoverflow.com/questions/35738016/ruby-array-to-csv-file", "title": "Ruby array to csv file", "body": "<p>I'm trying to scrape a table from a webpage and store it into a csv file.(I have to do it this way, so let's skip other suggestions. e.g. excel, non-array solution, etc)</p>\n\n<p>Each row of the table on the webpage is a <code>tr</code> tab. If I were to export to excel, I would loop the rows by doing this:</p>\n\n<pre><code>.css(\"tr\")[1..-1].each do |line|\n</code></pre>\n\n<p>That would give the correct format in excel, but when I use the array-to- csv approach, each row from the table becomes a column in the csv.  Thus, if there are 10 rows and 20 columns in the table, it will be displayed as 10 col x 1 row (all 20 column values for each row are stored in one single cell) in csv. </p>\n\n<p>I guess it's because the array sees each row as an index and stores the row into each column in the csv file. </p>\n\n<p>Is there a way to get the right format in csv?</p>\n\n<p>current code:</p>\n\n<pre><code>category_array = []\npage.css(\"#ctl00_PageData_GridView1\").css(\"td\")[0..30].each do |line|\ncategory_name = line.text\ncategory_array.push(category_name)\nend\nCSV.open('category.csv','w') do |csv|\ncsv &lt;&lt; category_array\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "string", "divide-by-zero"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456890332, "post_id": 35737748, "comment_id": 59150204, "body": "I recall there was a Rails method to do that or something similar, but I forgot the method name. I think it uses regex."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1456892737, "post_id": 35737748, "comment_id": 59150918, "body": "Please explain why there are strings of size 5 in that array."}, {"owner": {"reputation": 3566, "user_id": 5026139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbf86a3072e85746a0dde45665322890?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/5026139/damon"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1456893001, "post_id": 35737748, "comment_id": 59150992, "body": "@Aetherus there should be <code>num</code> strings in the array, each of equal length or length +/- 1 in some if there is a remainder."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1456894348, "post_id": 35737748, "comment_id": 59151373, "body": "What possible practical use would this serve?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462051720, "post_id": 35737748, "comment_id": 61478159, "body": "I&#39;ve offered a solution to the puzzle. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 3566, "user_id": 5026139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbf86a3072e85746a0dde45665322890?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/5026139/damon"}, "edited": false, "score": 0, "creation_date": 1456901505, "post_id": 35738412, "comment_id": 59154399, "body": "Please give me the corner cases."}, {"owner": {"reputation": 3566, "user_id": 5026139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbf86a3072e85746a0dde45665322890?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/5026139/damon"}, "edited": false, "score": 0, "creation_date": 1456902292, "post_id": 35738412, "comment_id": 59154767, "body": "<code>&quot;hellohello&quot; &#47; 4</code> splits it into 3 instead of 4"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": -2, "last_activity_date": 1456893110, "last_edit_date": 1456893110, "creation_date": 1456892270, "answer_id": 35738412, "question_id": 35737748, "link": "https://stackoverflow.com/questions/35737748/how-do-i-apply-a-division-operator-on-a-string-in-ruby/35738412#35738412", "title": "How do I apply a division operator on a string in Ruby?", "body": "<pre><code>class String\n  def /(num)\n    partition_size = length / num\n    if length % num == 0\n      scan /.{#{partition_size}}/\n    else\n      scan /.{#{partition_size},#{partition_size + 1}}/\n    end  \n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3566, "user_id": 5026139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbf86a3072e85746a0dde45665322890?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/5026139/damon"}, "is_accepted": false, "score": 0, "last_activity_date": 1456895046, "last_edit_date": 1456895046, "creation_date": 1456894343, "answer_id": 35738777, "question_id": 35737748, "link": "https://stackoverflow.com/questions/35737748/how-do-i-apply-a-division-operator-on-a-string-in-ruby/35738777#35738777", "title": "How do I apply a division operator on a string in Ruby?", "body": "<p>Here is my solution, kind of bulky but O(n) time. </p>\n\n<p>Let me know if there are any edge cases it fails for:</p>\n\n<pre><code>class String\n  def /(num)\n\n    if num &gt; self.length\n      return [] # or whatever, since this is an edge case / can't be done\n    end\n\n    remainder = self.length % num\n    result = []\n    substr = \"\"\n\n    i = 1\n    while i &lt;= self.length\n      substr += self[i-1]\n\n      if i % (self.length / num) == 0\n        if remainder &gt; 0\n          substr += self[i]\n          i += 1\n          remainder -= 1\n        end\n\n        result &lt;&lt; substr\n        substr = \"\"\n      end\n\n      i += 1\n    end\n\n    result\n  end\nend\n</code></pre>\n\n<p><strong>Edit:</strong> Refactored - replaced subarrays with substrings</p>\n"}, {"tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": false, "score": 2, "last_activity_date": 1456900166, "creation_date": 1456900166, "answer_id": 35740027, "question_id": 35737748, "link": "https://stackoverflow.com/questions/35737748/how-do-i-apply-a-division-operator-on-a-string-in-ruby/35740027#35740027", "title": "How do I apply a division operator on a string in Ruby?", "body": "<pre><code>class String\n  def /(num)\n      n, rem = self.size.divmod(num)\n      p = 0\n      res = []\n      rem.times{res &lt;&lt; self[p..p+n]; p+=n+1} \n      (num-rem).times{res &lt;&lt; self[p...p+n]; p+=n}\n      res\n  end\nend\n\np \"This is a relatively long string\" / 7\n</code></pre>\n\n<hr>\n\n<pre><code>[\"This \", \"is a \", \"relat\", \"ively\", \" lon\", \"g st\", \"ring\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1456906203, "creation_date": 1456906203, "answer_id": 35741649, "question_id": 35737748, "link": "https://stackoverflow.com/questions/35737748/how-do-i-apply-a-division-operator-on-a-string-in-ruby/35741649#35741649", "title": "How do I apply a division operator on a string in Ruby?", "body": "<p>You could use recursion.</p>\n\n<pre><code>class String\n  def /(n)\n    return [self] if n==1\n    m = (self.size.to_f/n).ceil\n    [self[0...m]].concat(self[m..-1] / (n-1))\n  end\nend\n\nstr = \"This would be a woefully short string had I not padded it out.\"\n\nstr / 7\n  # =&gt; [\"This woul\", \"d be a wo\", \"efully sh\", \"ort strin\", \"g had I n\",\n  #     \"ot padded\", \" it out.\"] \n\n\n(str / 7).map(&amp;:size)\n  #=&gt; [10, 10, 9, 9, 9, 9, 9]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1456996789, "post_id": 35742306, "comment_id": 59207612, "body": "Best answer so far, imo. There seem to be many cool &quot;pure-Ruby&quot; method-in Rails that for some reason haven&#39;t been adopted by Ruby."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1456908466, "creation_date": 1456908466, "answer_id": 35742306, "question_id": 35737748, "link": "https://stackoverflow.com/questions/35737748/how-do-i-apply-a-division-operator-on-a-string-in-ruby/35742306#35742306", "title": "How do I apply a division operator on a string in Ruby?", "body": "<p>This would work:</p>\n\n<pre><code>class String\n  def /(n)\n    chars.in_groups(n).map(&amp;:join) \n  end\nend\n\n\"This is a relatively long string\" / 7\n#=&gt; [\"This \", \"is a \", \"relat\", \"ively\", \" lon\", \"g st\", \"ring\"]\n</code></pre>\n\n<p><a href=\"http://api.rubyonrails.org/classes/Array.html#method-i-in_groups\" rel=\"nofollow\"><code>in_groups</code></a> is a Rails method that splits an array in <em>n</em> groups.</p>\n"}], "owner": {"reputation": 27, "user_id": 5428926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f98fcae113f95b1b58f6220fd560fb9?s=128&d=identicon&r=PG&f=1", "display_name": "Exiler", "link": "https://stackoverflow.com/users/5428926/exiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 35741649, "answer_count": 5, "score": 1, "last_activity_date": 1546063259, "creation_date": 1456888037, "last_edit_date": 1546063259, "question_id": 35737748, "link": "https://stackoverflow.com/questions/35737748/how-do-i-apply-a-division-operator-on-a-string-in-ruby", "title": "How do I apply a division operator on a string in Ruby?", "body": "<p>I'm trying to add the division operator <code>/</code> to <code>String</code>, which takes an integer.</p>\n\n<p>The operator should produce an array of strings. The size of the array is the given integer, and its elements are substrings of the original such that, when concatenated in order, produce the original string.</p>\n\n<p>If the string length is not evenly divisible by the integer, some substrings should be (one character) longer than the others. No two strings should differ in length by more than one, and any longer ones should appear before any shorter ones.</p>\n\n<p>Like this:</p>\n\n<pre><code>\"This is a relatively long string\" / 7\n# =&gt; [\"This \", \"is a \", \"relat\", \"ively\", \" lon\", \"g st\", \"ring\"]\n</code></pre>\n\n<p>How can I start?</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1456912162, "post_id": 35737695, "comment_id": 59160701, "body": "Keep in mind there is not a universal &#39;right&#39; way to write tests. If there are two methods your code is run, write two test cases to cover those. It can be as simple as that."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6005527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0942013f5441cbf4c133e4ea5e2db0b?s=128&d=identicon&r=PG&f=1", "display_name": "NrvsAboutAngels", "link": "https://stackoverflow.com/users/6005527/nrvsaboutangels"}, "edited": false, "score": 0, "creation_date": 1456894724, "post_id": 35737915, "comment_id": 59151489, "body": "You may be on the right path, but I would need something like: while data = ARGV ? $&lt;.gets : File(ARGV[0]).gets because stdin alone doesn&#39;t work with giving a file name."}, {"owner": {"reputation": 23, "user_id": 6005527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0942013f5441cbf4c133e4ea5e2db0b?s=128&d=identicon&r=PG&f=1", "display_name": "NrvsAboutAngels", "link": "https://stackoverflow.com/users/6005527/nrvsaboutangels"}, "edited": false, "score": 0, "creation_date": 1456950525, "post_id": 35737915, "comment_id": 59188186, "body": "Your help got me as far as receiving an array with either file or stdin working. I still have a fundamental lack of understanding of the IO stubs though.  Plus, it looks like stubs and mocks are now deprecated, leaving only double?"}, {"owner": {"reputation": 9667, "user_id": 396373, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4f6079564f02b87e4c0989585439eb39?s=128&d=identicon&r=PG", "display_name": "Steve Jorgensen", "link": "https://stackoverflow.com/users/396373/steve-jorgensen"}, "reply_to_user": {"reputation": 23, "user_id": 6005527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0942013f5441cbf4c133e4ea5e2db0b?s=128&d=identicon&r=PG&f=1", "display_name": "NrvsAboutAngels", "link": "https://stackoverflow.com/users/6005527/nrvsaboutangels"}, "edited": false, "score": 0, "creation_date": 1456951919, "post_id": 35737915, "comment_id": 59188949, "body": "An RSpec double can have mocking and/or stubbing behaviors. In any case, although you could use a double, I think a <code>StringIO</code> object might be more appropriate for what you&#39;re doing here."}, {"owner": {"reputation": 23, "user_id": 6005527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0942013f5441cbf4c133e4ea5e2db0b?s=128&d=identicon&r=PG&f=1", "display_name": "NrvsAboutAngels", "link": "https://stackoverflow.com/users/6005527/nrvsaboutangels"}, "edited": false, "score": 0, "creation_date": 1456956408, "post_id": 35737915, "comment_id": 59191547, "body": "Is this along the right path? <code>require &#39;stringio&#39; @input = StringIO.new(&#39;A Test String&#39;)  p = Processor.new(@input) </code> The method is expecting an Array with either STDIN or File input though. Placing the above` @input <code>into an array causes an odd error: </code>Failure/Error: @array = Array.new(@input)       TypeError:        no implicit conversion of StringIO into Integer`"}, {"owner": {"reputation": 9667, "user_id": 396373, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4f6079564f02b87e4c0989585439eb39?s=128&d=identicon&r=PG", "display_name": "Steve Jorgensen", "link": "https://stackoverflow.com/users/396373/steve-jorgensen"}, "reply_to_user": {"reputation": 23, "user_id": 6005527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0942013f5441cbf4c133e4ea5e2db0b?s=128&d=identicon&r=PG&f=1", "display_name": "NrvsAboutAngels", "link": "https://stackoverflow.com/users/6005527/nrvsaboutangels"}, "edited": false, "score": 0, "creation_date": 1456961913, "post_id": 35737915, "comment_id": 59193954, "body": "<code>p = Processor.new([@input])</code>"}], "tags": [], "owner": {"reputation": 9667, "user_id": 396373, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4f6079564f02b87e4c0989585439eb39?s=128&d=identicon&r=PG", "display_name": "Steve Jorgensen", "link": "https://stackoverflow.com/users/396373/steve-jorgensen"}, "is_accepted": true, "score": 0, "last_activity_date": 1456897377, "last_edit_date": 1456897377, "creation_date": 1456889069, "answer_id": 35737915, "question_id": 35737695, "link": "https://stackoverflow.com/questions/35737695/testing-ruby-with-rspec-for-file-name-and-stdin-with-while-gets/35737915#35737915", "title": "Testing ruby with rspec for file name and STDIN with while gets", "body": "<p>How about this idea?</p>\n\n<p>[EDITED]</p>\n\n<p>For the main script\u2026</p>\n\n<pre><code>require 'processor'\nsources = ARGV.map{ |fname| File.open(fname) }\nsources = [$stdin] if sources.empty?\nProcessor.new(sources).process\n</code></pre>\n\n<p>\u2026and for processor.rb\u2026</p>\n\n<pre><code>Class Processor\n  attr_reader :sources\n  attr_accessor :card_hash\n\n  def initialize(sources)\n    @sources = sources\n    @card_hash = Hash.new\n  end\n\n  def process\n    sources.each do |source|\n      source.each_line.do |line|   \n...\n</code></pre>\n\n<p>Then, for testing purposes, you can pass an array of one or more stub objects for the sources. The stub objects could be something like RSpec <code>double</code>s or an instances of <code>StringIO</code>. See <a href=\"http://apidock.com/ruby/StringIO\" rel=\"nofollow\">http://apidock.com/ruby/StringIO</a> .</p>\n"}, {"tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 2, "last_activity_date": 1456966290, "creation_date": 1456966290, "answer_id": 35761127, "question_id": 35737695, "link": "https://stackoverflow.com/questions/35737695/testing-ruby-with-rspec-for-file-name-and-stdin-with-while-gets/35761127#35761127", "title": "Testing ruby with rspec for file name and STDIN with while gets", "body": "<h2>Test Object Behavior, Not Implementation</h2>\n\n<p>In general, you will be a happier programmer if you test behavior rather than implementation. In this case, you have two main test cases:</p>\n\n<ol>\n<li>You initialize your object with a filename.\n\n<ul>\n<li>Happy path: the file exists.</li>\n<li>Sad path: the file doesn't exist.</li>\n</ul></li>\n<li>You initialize your object without a filename.\n\n<ul>\n<li>Happy path: you receive data from STDIN or ARGV.</li>\n<li>Sad paths:\n\n<ul>\n<li>STDIN and ARGV are both empty.</li>\n<li>STDIN is closed.</li>\n</ul></li>\n</ul></li>\n</ol>\n\n<p>If you follow this pattern, you will ensure that your object does the right thing regardless of how it's instantiated. You might use <a href=\"http://ruby-doc.org/stdlib/libdoc/stringio/rdoc/StringIO.html\" rel=\"nofollow\">StringIO</a> or <a href=\"https://github.com/fakefs/fakefs\" rel=\"nofollow\">FakeFS</a> to isolate your tests from the actual filesystem, but you don't really need to be a purist about unit testing vs. integration testing as long as your tests are fast and <strong>your tests validate the essential behaviors.</strong></p>\n\n<p>Don't strive to be a completionist. Strive to perform the minimal testing necessary to validate the expected behavior of your object, and perhaps a few boundary conditions and edge cases to be on the safe side.</p>\n"}], "owner": {"reputation": 23, "user_id": 6005527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0942013f5441cbf4c133e4ea5e2db0b?s=128&d=identicon&r=PG&f=1", "display_name": "NrvsAboutAngels", "link": "https://stackoverflow.com/users/6005527/nrvsaboutangels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 1, "accepted_answer_id": 35737915, "answer_count": 2, "score": 2, "last_activity_date": 1456966290, "creation_date": 1456887710, "last_edit_date": 1456965233, "question_id": 35737695, "link": "https://stackoverflow.com/questions/35737695/testing-ruby-with-rspec-for-file-name-and-stdin-with-while-gets", "title": "Testing ruby with rspec for file name and STDIN with while gets", "body": "<p>I'm writing a simple program that can take input from two sources, either a file name passed in or STDIN. I'm having trouble wrapping my head around testing that functionality. Do I need to separate the two sources of input to test them separately? The code currently does what I require, but it may need refactoring for easier testing.</p>\n\n<pre><code>Class Processor\n    attr_accessor :card_hash\n\n    def initialize\n        @card_hash = Hash.new\n    end\n\n    def process\n        while data = gets   \n            if match = data.match(/(\\D+) (\\d+) \\$(\\d+)/) then\n                name, card_num, limit = match.captures\n                @card_hash [name] = Credit_card.new( name, card_num, limit)\n....\n\ndescribe Processor do\n\ndescribe \"#new\" do\n    before do\n        @cp = Processor.new\n    end\n    it \"returns a new Processor object\" do\n        expect(@cp).to be_an_instance_of Processor\n    end \n    it \"has an empty hash\" do\n        expect(@cp.card_hash).to be_empty\n    end\nend\n\ndescribe '#process' do\n\n\n    it \"gets input from ARGV\" do\n        @cp = Processor.new\n        expect(subject).to receive(:gets).with(no_args)\n\n    end\n   end\n\nend\n</code></pre>\n\n<p>I have lost track of whether I'm trying to send input into the data variable to use testing the other parts of the code, or test that data receives the string from gets. Probably both. I've read about stubs and mocks and got rather confused. I've tried a lot of modifications from older questions (many with now deprecated syntax). I think I need a little help to get my ideas straightened out.\nEDIT: I have finally gotten StringIO to send the data I need to initialize my object correctly to test it. It goes something like this:\n<code>@input = StringIO.new('Test String')\n @array = [@input]\n @p = Processor.new(@array)</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 4706, "user_id": 481229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OJflZ.jpg?s=128&g=1", "display_name": "Agush", "link": "https://stackoverflow.com/users/481229/agush"}, "edited": false, "score": 0, "creation_date": 1456887333, "post_id": 35737544, "comment_id": 59149398, "body": "Try running <code>heroku log</code> look at the last lines"}], "answers": [{"tags": [], "owner": {"reputation": 4095, "user_id": 1574885, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ce94c91ae1b70d45320acbb6656f1512?s=128&d=identicon&r=PG", "display_name": "Arctelix", "link": "https://stackoverflow.com/users/1574885/arctelix"}, "is_accepted": false, "score": 0, "last_activity_date": 1456887574, "creation_date": 1456887574, "answer_id": 35737667, "question_id": 35737544, "link": "https://stackoverflow.com/questions/35737544/unable-to-deploy-rails-test-app-to-heroku/35737667#35737667", "title": "Unable to deploy rails test app to Heroku", "body": "<p>I'm a python/django guy, but taking a guess the \"everything up to date\" message is likely because you have not commited your changes to git.  Try:</p>\n\n<pre><code>git commit -a\ngit push heroku master\n</code></pre>\n\n<p>Now run your rake command.</p>\n"}], "owner": {"reputation": 1, "user_id": 5983586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc07a954e1a0d04fa5f5d3c3cfba952?s=128&d=identicon&r=PG", "display_name": "TheHippo", "link": "https://stackoverflow.com/users/5983586/thehippo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456889003, "creation_date": 1456886869, "last_edit_date": 1456889003, "question_id": 35737544, "link": "https://stackoverflow.com/questions/35737544/unable-to-deploy-rails-test-app-to-heroku", "title": "Unable to deploy rails test app to Heroku", "body": "<p>I'm working through the odin project's web development course and I'm getting tripped up on the last part of the installations project where you are tasked with deploying a rails app to Heroku. I've been working on this for about a week but I refuse to give up but I realize that I need some help.</p>\n\n<p>Here's the link to the tutorial I'm trying to work through (on a mac):</p>\n\n<p><a href=\"http://installfest.railsbridge.org/installfest/deploy_a_rails_app\" rel=\"nofollow\">http://installfest.railsbridge.org/installfest/deploy_a_rails_app</a></p>\n\n<p>I have a Heroku account set up, and am running Ruby 2.3.0 and rails 4.2.5.1. Rubygems are at 2.6.1 (but I tried them at 2.5.1 too).</p>\n\n<p>Everything works fine but when I get to <code>heroku run rake db:migrate</code> I always get the time out error:</p>\n\n<pre><code>[~/railsbridge/test_app] ruby-2.3.0 $ git push heroku master     \nEverything up-to-date\n\n[~/railsbridge/test_app] ruby-2.3.0 $ heroku run rake db:migrate \nRunning rake db:migrate on powerful-journey-35824... up, run.9421\n\u25b8    ETIMEDOUT: connect ETIMEDOUT 50.19.103.36:5000\n</code></pre>\n\n<p>I saw another post suggesting that the problem is a result of the connection I'm using blocking port <code>5000</code> (I'm at a library). I checked port <code>5000</code> on canyouseeme.org as well but it also timed out.</p>\n\n<p>I then tried deploying the app detached using <code>heroku run:detached rake db:migrate</code> and it seems to work until I open heroku again and it shows that the page I'm looking for doesn't exist.</p>\n\n<p>Basically what I'm asking is, does anyone have any idea why this test app isn't getting pushed from my terminal to the heroku deployment page?</p>\n"}, {"tags": ["sql", "ruby", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 4177981, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/D5QnZ.jpg?s=128&g=1", "display_name": "James Webb", "link": "https://stackoverflow.com/users/4177981/james-webb"}, "edited": false, "score": 0, "creation_date": 1456886419, "post_id": 35737373, "comment_id": 59149098, "body": "THANK YOU!! This helps so much, I thought it would be something simple like this but didn&#39;t really understand what I was doing, this explained it brilliantly! I would have up voted your answer but I don&#39;t have enough reputation :("}], "tags": [], "owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "is_accepted": true, "score": 3, "last_activity_date": 1456885972, "creation_date": 1456885972, "answer_id": 35737373, "question_id": 35737159, "link": "https://stackoverflow.com/questions/35737159/how-can-i-select-a-value-from-a-database-using-ruby-and-sqlite3/35737373#35737373", "title": "How can I select a value from a database using Ruby and SQLite3?", "body": "<p>The execute() method creates a resultset, not just a single scalar value. You need to process the resultset to get the single value out of it.</p>\n\n<pre><code>name.each do |row|\n    puts row['firstname']\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9068, "user_id": 2063546, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c214019be694c1055e9fd56cf86f802c?s=128&d=identicon&r=PG", "display_name": "Ian", "link": "https://stackoverflow.com/users/2063546/ian"}, "is_accepted": false, "score": 3, "last_activity_date": 1487073481, "creation_date": 1487073481, "answer_id": 42225589, "question_id": 35737159, "link": "https://stackoverflow.com/questions/35737159/how-can-i-select-a-value-from-a-database-using-ruby-and-sqlite3/42225589#42225589", "title": "How can I select a value from a database using Ruby and SQLite3?", "body": "<p>It sounds like you want to return the first value of the first row of a result set, and discard all other values and rows.  The <a href=\"http://www.rubydoc.info/gems/sqlite3/1.3.13/SQLite3/Database#get_first_value-instance_method\" rel=\"nofollow noreferrer\">Database#get_first_value</a> is what you want.</p>\n\n<p>Also, for security you shouldn't inject strings into your SQL; allow the library to handle that for you.</p>\n\n<pre><code>query = \"SELECT firstname FROM tbl_people WHERE email_address = ?;\"\nname = @db.get_first_value query, email_address\nputs name\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 4177981, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/D5QnZ.jpg?s=128&g=1", "display_name": "James Webb", "link": "https://stackoverflow.com/users/4177981/james-webb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3169, "favorite_count": 0, "accepted_answer_id": 35737373, "answer_count": 2, "score": 2, "last_activity_date": 1487073481, "creation_date": 1456884669, "last_edit_date": 1456885485, "question_id": 35737159, "link": "https://stackoverflow.com/questions/35737159/how-can-i-select-a-value-from-a-database-using-ruby-and-sqlite3", "title": "How can I select a value from a database using Ruby and SQLite3?", "body": "<p>I am having trouble returning a single value from a database using SQLite3 and Ruby.</p>\n\n<p>A bit of context: I have a table of people and I would like to be able to query the database and get back the first name of someone in that table. I am using Rubymine with the SQLite3 gem.</p>\n\n<p>When I run this code:</p>\n\n<pre><code>name = @db.execute &lt;&lt;-SQL\n    SELECT firstname FROM tbl_people WHERE email_address = '#{email_address}';\n  SQL\n  puts name\n</code></pre>\n\n<p>I get the following ouput:</p>\n\n<pre><code>{\"firstname\"=&gt;\"james\", 0=&gt;\"james\"}\n</code></pre>\n\n<p>When really the output I am expecting is: </p>\n\n<pre><code>james\n</code></pre>\n\n<p>If anyone can even point me in the right direction here it would be very much appreciated.</p>\n\n<p>Cheers,\nJames</p>\n"}, {"tags": ["ruby", "json", "yaml", "yaml-cpp"], "comments": [{"owner": {"reputation": 165027, "user_id": 1902010, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a19f9308334d07d4be19c8f6d11151ff?s=128&d=identicon&r=PG", "display_name": "ceejayoz", "link": "https://stackoverflow.com/users/1902010/ceejayoz"}, "edited": false, "score": 0, "creation_date": 1456879748, "post_id": 35736461, "comment_id": 59147215, "body": "and <a href=\"http://stackoverflow.com/questions/1308536/yaml-compared-to-xml\">stackoverflow.com/questions/1308536/yaml-compared-to-xml</a>"}, {"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1456879809, "post_id": 35736461, "comment_id": 59147236, "body": "Note that neither JSON nor YAML are markup languages (XML is)."}, {"owner": {"reputation": 1755, "user_id": 613960, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ivuqi.jpg?s=128&g=1", "display_name": "kishoredbn", "link": "https://stackoverflow.com/users/613960/kishoredbn"}, "edited": false, "score": 0, "creation_date": 1456879883, "post_id": 35736461, "comment_id": 59147260, "body": "Thanks for your response. But my question is not just comparing YAML over XML or JSON but to the whole gamut of markup like languages. Also I seek for a better markup language if possible."}, {"owner": {"reputation": 1217, "user_id": 3946099, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kbEJ7.jpg?s=128&g=1", "display_name": "Taylor Ackley", "link": "https://stackoverflow.com/users/3946099/taylor-ackley"}, "edited": false, "score": 0, "creation_date": 1456880006, "post_id": 35736461, "comment_id": 59147297, "body": "I think a large part of it is YAML being the fault markup language for Ruby on Rails."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1456912750, "post_id": 35736461, "comment_id": 59161180, "body": "Markup languages help with formatting text. Templating languages help with programmatically writing text (think MadLibs). Data-serialization lanaguages help store data. YAML and JSON are for serialization. YAML has the benefit of being the most &quot;human readable&quot;. In fact it&#39;s so human readable that some people use it as a markup language."}, {"owner": {"reputation": 4657, "user_id": 2242445, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/19e49557402b903979d3fa97c10695d8?s=128&d=identicon&r=PG&f=1", "display_name": "rook", "link": "https://stackoverflow.com/users/2242445/rook"}, "edited": false, "score": 0, "creation_date": 1457046121, "post_id": 35736461, "comment_id": 59240950, "body": "YAML is less redundant in marking up the data than JSON and even more than XML. That is why YAML more closer to human-readable format and so popular. Btw this question is also redundant."}], "owner": {"reputation": 1755, "user_id": 613960, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ivuqi.jpg?s=128&g=1", "display_name": "kishoredbn", "link": "https://stackoverflow.com/users/613960/kishoredbn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 878, "favorite_count": 0, "closed_date": 1456880215, "answer_count": 0, "score": 3, "last_activity_date": 1456879923, "creation_date": 1456879631, "last_edit_date": 1456879923, "question_id": 35736461, "link": "https://stackoverflow.com/questions/35736461/why-yaml-is-popular-is-there-anything-else-that-does-better", "closed_reason": "Duplicate", "title": "Why yaml is popular? Is there anything else that does better.", "body": "<p>I know that this is a very generic question, but I am sure this question will benefit most of the developers in making a choice of YAML over other markup languages stack overflow.</p>\n\n<p>I came to know about YAML from one of my lab mates, who used to use it for all intermediate file operations in his project that we were working on. I asked him why only YAML? Why not JSON or XML? He said YAML is quite popular these days and that didn't seem quite a satisfying answer to me. </p>\n\n<p>So asking here, why YAML over JSON and XML? In what scenarios does choosing YAML over any other language will be a good/bad choice. </p>\n\n<p>Is there any other language that does better than YAML? </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1456880143, "post_id": 35736473, "comment_id": 59147324, "body": "oh! light bulb finally. i confused <code>stack</code> to be the instance variable <code>@stack</code>, when it was talking about the method! Thank you! Also thank you for the addendum!"}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "edited": false, "score": 0, "creation_date": 1456880233, "post_id": 35736473, "comment_id": 59147352, "body": "will accept your answer later as it&#39;s saying in four minutes, and i gotta go. but thank you again!"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456892314, "post_id": 35736473, "comment_id": 59150786, "body": "You can&#39;t remove from all. You can&#39;t remove from <code>initialize</code>."}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456892467, "post_id": 35736473, "comment_id": 59150840, "body": "@sawa, um, sorry, not sure what you mean?"}, {"owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1456892853, "post_id": 35736473, "comment_id": 59150949, "body": "@sawa, oh, got what you meant! you meant his addendum!"}], "tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": true, "score": 2, "last_activity_date": 1456926990, "last_edit_date": 1456926990, "creation_date": 1456879718, "answer_id": 35736473, "question_id": 35736448, "link": "https://stackoverflow.com/questions/35736448/confusion-on-instance-variable-as-opposed-to-lack-of-it/35736473#35736473", "title": "Confusion on instance variable as opposed to lack of it", "body": "<blockquote>\n  <p>in the module, the instance variable @stack is not in add_to_stack and\n  take_from_stack methods. How is the state of the stack tracked\n  otherwise?</p>\n</blockquote>\n\n<p>Not quite. <code>add_to_stack</code> pushes something on <code>@stack</code>, because the <code>stack</code> method returns <code>@stack</code>:</p>\n\n<pre><code>  def stack\n    @stack ||=[]\n  end\n\n  def add_to_stack(obj)\n    stack.push(obj)\n  end\n</code></pre>\n\n<p>So in the end, @stack <em>is used</em> in <code>add_to_stack</code>.</p>\n\n<p>Note that you could safely remove the <code>@</code>s from all <code>@stack</code> in <code>class Stack</code> (except the assignment in <code>initialize</code>), because <code>attr_reader :stack</code> defines a <code>stack</code> method that returns <code>@stack</code>.</p>\n"}], "owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 35736473, "answer_count": 1, "score": 0, "last_activity_date": 1456926990, "creation_date": 1456879551, "last_edit_date": 1456879913, "question_id": 35736448, "link": "https://stackoverflow.com/questions/35736448/confusion-on-instance-variable-as-opposed-to-lack-of-it", "title": "Confusion on instance variable as opposed to lack of it", "body": "<p>Came across this code from 'The Grounded Rubyist'</p>\n\n<pre><code>module Stacklike\n  def stack\n    @stack ||=[]\n  end \n\n  def add_to_stack(obj)\n    stack.push(obj)\n  end\n\n  def take_from_stack\n    stack.pop\n  end\nend\n</code></pre>\n\n<p>as opposed to: </p>\n\n<pre><code>class Stack\n\n attr_reader :stack\n\n def initialize\n  @stack = [] \n end \n\n def add_to_stack(obj)\n  @stack.push(obj)\n end\n\n def take_from_stack\n  @stack.pop\n end\nend\n</code></pre>\n\n<p>My primary confusion stems from the fact that in the module, the instance variable <code>@stack</code> is not in <code>add_to_stack</code> and <code>take_from_stack</code> methods. How is the state of the <code>stack</code> tracked otherwise?</p>\n\n<p>In the class, <code>@stack</code> is used in all methods which is the norm I'm used to.</p>\n\n<p>Can someone explain how this works in the module?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1456878732, "post_id": 35736244, "comment_id": 59146937, "body": "post the relationships"}], "answers": [{"tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 2, "last_activity_date": 1456878945, "creation_date": 1456878945, "answer_id": 35736354, "question_id": 35736244, "link": "https://stackoverflow.com/questions/35736244/how-to-make-an-object-appear-different-to-the-poster-in-ruby-on-rails/35736354#35736354", "title": "How to make an object appear different to the poster in Ruby on Rails?", "body": "<p>If a task belongs to a user, and you have access to current_user (if you're using devise it's built in, w/ bcrypt you'll have to write yourself), an easy way to do this in the views would be to say something like:</p>\n\n<pre><code>&lt;% if task.user_id == current_user.id %&gt;\n   &lt;-- stuff you want to show the assigned user --&gt;\n&lt;% else %&gt;\n   &lt;-- stuff you want to show everyone else --&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Assuming you're using erb. But you get the gist.</p>\n"}], "owner": {"reputation": 135, "user_id": 4781210, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh4.googleusercontent.com/-HfKS9hHewAI/AAAAAAAAAAI/AAAAAAAAAFk/ClmOoXRnnGk/photo.jpg?sz=128", "display_name": "Jason Procka", "link": "https://stackoverflow.com/users/4781210/jason-procka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456878945, "creation_date": 1456878298, "question_id": 35736244, "link": "https://stackoverflow.com/questions/35736244/how-to-make-an-object-appear-different-to-the-poster-in-ruby-on-rails", "title": "How to make an object appear different to the poster in Ruby on Rails?", "body": "<p>I'm working on a project that will allow people to create groups then send a <em>task</em> to all of the people who are apart of that group. When the person who matches the same user_id as the value attached to the task, I would like it for the task to appear different (different text on it and some other stuff) and when you click it, it shows analytics for that task. I just need to know what it takes for me to pull of altered versions of an object for the person who posted it. Thanks for any help. I may be too vague here, I'm still very new to Rails.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "edited": false, "score": 1, "creation_date": 1456878477, "post_id": 35736060, "comment_id": 59146859, "body": "It&#39;s unclear how you want the output; e.g. why does <code>[[1,1],[1,1]]</code> become <code>[1,1], [1,1]</code> and not <code>[1,1,1,1]</code>?"}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1456883563, "post_id": 35736060, "comment_id": 59148268, "body": "More cases may be necessary to get anything useful. But first, what have you tried? Perhaps <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-flatten\" rel=\"nofollow noreferrer\">#flatten</a> with a level parameter? Anything?"}], "answers": [{"comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1456883227, "post_id": 35736418, "comment_id": 59148165, "body": "Yeah, the OP threw everyone off by writing &quot;depth first&quot; in the title. The example he gave in the question is not the result you would get with depth first flatten. But it looks like your answer is what he wants."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1456882146, "last_edit_date": 1456882146, "creation_date": 1456879408, "answer_id": 35736418, "question_id": 35736060, "link": "https://stackoverflow.com/questions/35736060/ruby-array-flatten/35736418#35736418", "title": "Ruby - array flatten", "body": "<p>This should do it.</p>\n\n<pre><code>def flatten_after_first(arr)\n  arr.flat_map { |a| a.first.is_a?(Array) ? a.map(&amp;:flatten) : [a] }\nend\n\nflatten_after_first [[1,1],[[1,1],[1,1]]]\n  #=&gt; [[1, 1], [1, 1], [1, 1]]\n\nflatten_after_first [[1,1], [[2,2], [2,2]], [[[3,3], [3,3]], [[3,3], [3,3]]]] \n  #=&gt; [[1, 1], [2, 2], [2, 2], [3, 3, 3, 3], [3, 3, 3, 3]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 5920451, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644160548/picture?type=large", "display_name": "Rafael Biriba", "link": "https://stackoverflow.com/users/5920451/rafael-biriba"}, "edited": false, "score": 0, "creation_date": 1456880920, "post_id": 35736628, "comment_id": 59147550, "body": "I also tested with: <code>array = [[1, 2], [[3, 4], [5, 6]], [[[[[7, 8], [9, 10]]]]]]</code> with the output <code>[[1, 2], [3, 4], [5, 6], [7, 8], [9, 10]]</code>"}, {"owner": {"reputation": 123, "user_id": 5920451, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644160548/picture?type=large", "display_name": "Rafael Biriba", "link": "https://stackoverflow.com/users/5920451/rafael-biriba"}, "edited": false, "score": 0, "creation_date": 1456883288, "post_id": 35736628, "comment_id": 59148183, "body": "Tested <code>array = [[1, 1], [[1, 1], [1, 1], [[1, 2], [1, 2, 3]]]]</code> and output: <code>[[1, 1], [1, 1], [1, 1], [1, 2], [1, 2, 3]]</code>"}, {"owner": {"reputation": 123, "user_id": 5920451, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644160548/picture?type=large", "display_name": "Rafael Biriba", "link": "https://stackoverflow.com/users/5920451/rafael-biriba"}, "edited": false, "score": 0, "creation_date": 1456883306, "post_id": 35736628, "comment_id": 59148189, "body": "Nice challenge! I liked!"}], "tags": [], "owner": {"reputation": 123, "user_id": 5920451, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644160548/picture?type=large", "display_name": "Rafael Biriba", "link": "https://stackoverflow.com/users/5920451/rafael-biriba"}, "is_accepted": false, "score": 0, "last_activity_date": 1456880794, "creation_date": 1456880794, "answer_id": 35736628, "question_id": 35736060, "link": "https://stackoverflow.com/questions/35736060/ruby-array-flatten/35736628#35736628", "title": "Ruby - array flatten", "body": "<p>Try this:</p>\n\n<pre><code>def depth_first_flatten array\n  result = []\n  array.each do |element|\n    if element.first.is_a? Array\n      result += deph(element)\n    else\n      result &lt;&lt; element\n    end\n  end\n  result\nend\n\n# array = [[1,2],[[3,4],[5,6]]]\n# depth_first_flatten(array)\n#\n# OUTPUT: [[1, 2], [3, 4], [5, 6]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "is_accepted": false, "score": 1, "last_activity_date": 1456880870, "creation_date": 1456880870, "answer_id": 35736635, "question_id": 35736060, "link": "https://stackoverflow.com/questions/35736060/ruby-array-flatten/35736635#35736635", "title": "Ruby - array flatten", "body": "<p>May be this will help</p>\n\n<pre><code>def flat(array)\n  array.each do |item|\n    if item.is_a?(Array) &amp;&amp; item.flatten.count != item.count\n      flat(item)\n    else\n      $arr &lt;&lt; item\n    end\n  end\nend\n\n###\n$arr = []\ncollection = [[1, 1], [[1, 1], [1, 1], [[1, 2], [1, 2, 3]]]]\nflat(collection)\nputs $arr.inspect\n\n=&gt; [[1, 1], [1, 1], [1, 1], [1, 2], [1, 2, 3]]\n\n\n$arr = []\ncollection = [[1,1],[[[1,1],[1,1]],[1,1]]]\nflat(collection)\n$arr\n=&gt; [[1, 1], [1, 1], [1, 1], [1, 1]]\n</code></pre>\n"}], "owner": {"reputation": 3435, "user_id": 2109963, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tEfnM.jpg?s=128&g=1", "display_name": "kid_drew", "link": "https://stackoverflow.com/users/2109963/kid-drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 0, "accepted_answer_id": 35736418, "answer_count": 3, "score": 2, "last_activity_date": 1456883141, "creation_date": 1456877096, "last_edit_date": 1456883141, "question_id": 35736060, "link": "https://stackoverflow.com/questions/35736060/ruby-array-flatten", "title": "Ruby - array flatten", "body": "<p>I have an n-depth array where n is a variable greater than or equal to 2:</p>\n\n<pre><code>[[1,1],[[1,1],[1,1]]]\n</code></pre>\n\n<p>I want to flatten this array to have exactly 2 depth, like this:</p>\n\n<pre><code>[[1,1],[1,1],[1,1]]\n</code></pre>\n\n<p>Can anyone think of a good way to achieve that?</p>\n"}, {"tags": ["ruby", "string", "pattern-matching"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456892491, "post_id": 35736029, "comment_id": 59150846, "body": "What is a &quot;repeated substring&quot;?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1456897616, "post_id": 35736029, "comment_id": 59152569, "body": "What is a &quot;repeated substring&quot;? The question is not clear."}, {"owner": {"reputation": 5433, "user_id": 1558527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6356f37f20ea20d66a31f9f7a55338f9?s=128&d=identicon&r=PG", "display_name": "Christophe Marois", "link": "https://stackoverflow.com/users/1558527/christophe-marois"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1457051138, "post_id": 35736029, "comment_id": 59242870, "body": "@sawa it&#39;s literally the first result on google <a href=\"https://www.wikiwand.com/en/Longest_repeated_substring_problem\" rel=\"nofollow noreferrer\">wikiwand.com/en/Longest_repeated_substring_problem</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1457061547, "post_id": 35736029, "comment_id": 59245699, "body": "And in what sense is <code>(bb(cd)eee</code> repeated substring following the definition?"}, {"owner": {"reputation": 6018, "user_id": 1062679, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/93c19c6e4703101557b0c995d5e10b7b?s=128&d=identicon&r=PG", "display_name": "user2398029", "link": "https://stackoverflow.com/users/1062679/user2398029"}, "edited": false, "score": 0, "creation_date": 1457068315, "post_id": 35736029, "comment_id": 59247570, "body": "It appears in both lines 2 and 3."}], "answers": [{"comments": [{"owner": {"reputation": 6018, "user_id": 1062679, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/93c19c6e4703101557b0c995d5e10b7b?s=128&d=identicon&r=PG", "display_name": "user2398029", "link": "https://stackoverflow.com/users/1062679/user2398029"}, "edited": false, "score": 0, "creation_date": 1457068388, "post_id": 35737773, "comment_id": 59247584, "body": "This can be easily combined with the longest repeated substring function mentioned in the question, so I&#39;m accepting even though it does not fully answer the question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 6018, "user_id": 1062679, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/93c19c6e4703101557b0c995d5e10b7b?s=128&d=identicon&r=PG", "display_name": "user2398029", "link": "https://stackoverflow.com/users/1062679/user2398029"}, "edited": false, "score": 0, "creation_date": 1457071687, "post_id": 35737773, "comment_id": 59248689, "body": "I somehow missed the link in the question. At that link there is <a href=\"http://rubyquiz.com/quiz153.html\" rel=\"nofollow noreferrer\">this link</a> to the original question. I&#39;m still not clear on what constitutes the &quot;repeated substring&quot; and therefore its length. For &quot;banana&quot;, is the repeated substring &quot;an&quot; (length 2) or &quot;anan&quot; (length 4).  It makes a difference if we are comparing &quot;banananana&quot; and &quot;booboo&quot;, for example. Moreover, I assume that &quot;banana)&quot; would be skipped but &quot;(bananana)&quot; would be a candidate. Correct? Once I know I&#39;d be happy to revise my answer. As you say, that should be straightforward."}, {"owner": {"reputation": 6018, "user_id": 1062679, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/93c19c6e4703101557b0c995d5e10b7b?s=128&d=identicon&r=PG", "display_name": "user2398029", "link": "https://stackoverflow.com/users/1062679/user2398029"}, "edited": false, "score": 0, "creation_date": 1457103027, "post_id": 35737773, "comment_id": 59267540, "body": "For &quot;banana&quot;, the longest substring that repeats itself without overlapping would be &quot;an&quot; (length 2)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 6018, "user_id": 1062679, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/93c19c6e4703101557b0c995d5e10b7b?s=128&d=identicon&r=PG", "display_name": "user2398029", "link": "https://stackoverflow.com/users/1062679/user2398029"}, "edited": false, "score": 0, "creation_date": 1457105183, "post_id": 35737773, "comment_id": 59269144, "body": "So &quot;repeating&quot; means repeats one or more times in a row. &quot;bananananan&quot; contains two repeating substrings, &quot;an&quot; and &quot;anan&quot; and the LRS in &quot;dogdogdog&quot; and &quot;catscats&quot; is &quot;cats&quot;. Correct?"}, {"owner": {"reputation": 6018, "user_id": 1062679, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/93c19c6e4703101557b0c995d5e10b7b?s=128&d=identicon&r=PG", "display_name": "user2398029", "link": "https://stackoverflow.com/users/1062679/user2398029"}, "edited": false, "score": 0, "creation_date": 1457223729, "post_id": 35737773, "comment_id": 59310406, "body": "No need to repeat in a row. They can repeat in any order. But yes, these are the correct answers for the examples you gave."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1456899481, "last_edit_date": 1495542665, "creation_date": 1456888158, "answer_id": 35737773, "question_id": 35736029, "link": "https://stackoverflow.com/questions/35736029/find-longest-repeated-substring-with-matched-parentheses-in-ruby/35737773#35737773", "title": "Find longest repeated substring with matched parentheses in ruby", "body": "<p>As I understand you want the longest string within a single line that begins with <code>\"(\"</code> and ends with <code>\")\"</code> and contains \"balanced parentheses\". In addition, the substring is to be a \"repeated\" substring, but that has not been defined, so I've disregarded that requirement.  </p>\n\n<p><code>balanced_parens?</code> (below) is from my answer <a href=\"https://stackoverflow.com/questions/35675974/how-to-separate-a-string-by-perens-without-losing-the-perens-ruby/35679235#35679235\">here</a>. </p>\n\n<pre><code>def longest_balanced(str)\n  str.lines.map { |s| longest_by_line(s.chomp) }.max_by(&amp;:size)\nend \n\ndef longest_by_line(str)\n  str.size.downto(1).find do |n|\n    str.each_char.each_cons(n) do |a|\n      s = a.join\n      return s if (s =~ /\\A\\(.*\\)\\z/)  &amp;&amp; balanced_parens?(s)\n    end\n  end\n  nil\nend\n\ndef balanced_parens?(str)\n  pstr = str.gsub(/[^()]/,\"\")\n  while pstr.gsub!(\"()\", \"\")\n  end\n  pstr.empty?\nend\n\nstr =&lt;&lt;_\naa(bb(c)dd)\naeeff(bb(cd)eee)\n(bb(c)dd)(bb(cd(eee\n_\n\nlongest_balanced str\n  #=&gt; \"(bb(cd)eee)\"\n</code></pre>\n"}], "owner": {"reputation": 6018, "user_id": 1062679, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/93c19c6e4703101557b0c995d5e10b7b?s=128&d=identicon&r=PG", "display_name": "user2398029", "link": "https://stackoverflow.com/users/1062679/user2398029"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 2, "accepted_answer_id": 35737773, "answer_count": 1, "score": 0, "last_activity_date": 1457103042, "creation_date": 1456876860, "last_edit_date": 1457103042, "question_id": 35736029, "link": "https://stackoverflow.com/questions/35736029/find-longest-repeated-substring-with-matched-parentheses-in-ruby", "title": "Find longest repeated substring with matched parentheses in ruby", "body": "<p>Consider a set of strings as follows:</p>\n\n<pre><code>aa(bb(c)dd)\naeeff(bb(cd)eee)\n(bb(c)dd)(bb(cd(eee\n</code></pre>\n\n<p>Even though the longest repeated non-overlapping substring is <code>(bb(cd)eee</code> (10 chars), the longest repeated substring <em>with matched parentheses</em> is <code>(bb(c)ee)</code> (9 chars).</p>\n\n<p>I can easily <a href=\"http://learnruby.com/examples/ruby-quiz-153.shtml\" rel=\"nofollow\">find the longest non-overlapping repeated substring</a>, but how can this be extended to matching parentheses?</p>\n"}, {"tags": ["ruby", "docker", "sinatra", "resque", "docker-compose"], "answers": [{"tags": [], "owner": {"reputation": 19007, "user_id": 444646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996ae88559e4c401582326971c77c75a?s=128&d=identicon&r=PG", "display_name": "dnephin", "link": "https://stackoverflow.com/users/444646/dnephin"}, "is_accepted": false, "score": 0, "last_activity_date": 1456978649, "creation_date": 1456978649, "answer_id": 35763103, "question_id": 35735831, "link": "https://stackoverflow.com/questions/35735831/correct-way-to-link-redis-to-sinatra-docker-containers/35763103#35763103", "title": "Correct way to link redis to sinatra docker containers", "body": "<p>Don't use those link environment variables, they are deprecated, and they don't exist in user defined networks anymore.</p>\n\n<p>A good way to do this would be first to default to the name hostname <code>redis</code>. You can always alias any service to have that name, so you should almost never need to change it from the default. For example:</p>\n\n<pre><code>links:\n  - someservice:redis\n</code></pre>\n\n<p>To override the default, you can create some application specific env var like <code>REDIS_HOSTNAME</code>, and set it from the environment section (but again, this is almost never necessary):</p>\n\n<pre><code>environment:\n    REDIS_HOSTNAME=foo\n</code></pre>\n"}], "owner": {"reputation": 922, "user_id": 2152623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7852ad15ff5af01778c90e800a0e0c7e?s=128&d=identicon&r=PG", "display_name": "cashman04", "link": "https://stackoverflow.com/users/2152623/cashman04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456978649, "creation_date": 1456875695, "question_id": 35735831, "link": "https://stackoverflow.com/questions/35735831/correct-way-to-link-redis-to-sinatra-docker-containers", "title": "Correct way to link redis to sinatra docker containers", "body": "<p>I am writing a small microservices based app, and in it I have a redis instance that some ruby code/containers access to use for via Resque. Currently in my docker compose I am linking like so:</p>\n\n<pre><code>redis:\n  image: redis:latest\n  ports:\n    - '6379:6379'\nruby_worker:\n  image: my_user/my_image:latest\n  links:\n    - redis:db\n</code></pre>\n\n<p>This works fine(I only name it :db for now cause that is the example I found when looking up linking).<br>\nIn my ruby code, I have to set up my Resque redis server like: </p>\n\n<pre><code>Resque.redis = ENV['DB_PORT_6379_TCP_ADDR'] + ':6379'\n</code></pre>\n\n<p>But this just doesn't seem right.  It is dependent on that exact redis name, and if I had to spin up a different redis instance(like how I did while playing with docker cloud today), it doesn't find the redis server. In total I have 3 containers(so far) connecting to this redis for resque.  A small sinatra based front end, and 2 workers.  I am not much of a rails person, and have never used resque before 3 days ago. So sorry if I missed some of the basics.</p>\n\n<p>Is there a better way to connect to my redis instance in my ruby code?  Is there a way to pass the redis name in my docker-compose?  Right now my resque-web container is configured like below and it seems to work fine:</p>\n\n<pre><code>resque:\n  image: ennexa/resque-web\n  links:\n  - redis:redisserver\n  ports:\n    - \"5678:5678\"\n  command: \"-r redis://redisserver:6379\"\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "cucumber", "nosuchelementexception"], "comments": [{"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457473163, "post_id": 35735665, "comment_id": 59420379, "body": "Not to be nit-picky, but if the exception is triggered, don&#39;t you want not_present to return true?And don&#39;t you want false just after locator.displayed? ?  Dealing with negatives is such fun.  This is why I stick with positives. What do your requires look like in your helper file?"}, {"owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "reply_to_user": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457538039, "post_id": 35735665, "comment_id": 59452747, "body": "@MikeJRamsey56 Because depends on scenario, I might have element present or not, so I am making assestion on element not being present as I am expecting so"}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457538527, "post_id": 35735665, "comment_id": 59453153, "body": "Vanatomas You know what you mean.  But other people who read it don&#39;t have access to your head.  All they have is what they read.  In six weeks you may not remember what you intended either.  I have learned to write simply, avoid negatives, and to have methods mean what they say. Just friendly advice."}, {"owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "reply_to_user": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457553063, "post_id": 35735665, "comment_id": 59462928, "body": "@MikeJRamsey56 sure thing, my question was about rescue statement, not about writing negatives scenarios. In my case it is needed for validation depends on lang or region and so on. Thx"}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457555477, "post_id": 35735665, "comment_id": 59464333, "body": "can you list your helper file&#39;s require statments?"}, {"owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "reply_to_user": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457629010, "post_id": 35735665, "comment_id": 59503465, "body": "@MikeJRamsey56 it is listed on top, under RubyHelper.rb section"}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457630601, "post_id": 35735665, "comment_id": 59504573, "body": "Can you add it to your question above so that I can see them. :-)"}, {"owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "reply_to_user": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457630822, "post_id": 35735665, "comment_id": 59504718, "body": "@MikeJRamsey56 what exactly you are looking for from require statement?"}], "answers": [{"comments": [{"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457640598, "post_id": 35926243, "comment_id": 59510912, "body": "Should have seen this first thing."}, {"owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "edited": false, "score": 0, "creation_date": 1457655279, "post_id": 35926243, "comment_id": 59517975, "body": "getting undefined method `World&#39; for... Should I add additional gem? Using Rspec"}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "reply_to_user": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "edited": false, "score": 0, "creation_date": 1457668326, "post_id": 35926243, "comment_id": 59521239, "body": "@Vanatomas Are you running with the latest cucumber? I am running 2.3.2."}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "reply_to_user": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "edited": false, "score": 0, "creation_date": 1457670241, "post_id": 35926243, "comment_id": 59521699, "body": "I just put together a quick test and it worked for me."}, {"owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "edited": false, "score": 0, "creation_date": 1457690293, "post_id": 35926243, "comment_id": 59530686, "body": "yes, cucumber 2.3.2 version. Also, can I have module inside of class?"}, {"owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "reply_to_user": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "edited": false, "score": 0, "creation_date": 1457706422, "post_id": 35926243, "comment_id": 59541634, "body": "Just a module.  The syntax is different for a class.  Remember that the World object is a mix in.  It adds the methods that you define to the step definition files."}, {"owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "edited": false, "score": 0, "creation_date": 1457710119, "post_id": 35926243, "comment_id": 59544413, "body": "ok dropped into another file, was able to pass &quot;World&quot; error, but execution did throw NoSuchElement Error, like to square one I had with Class"}, {"owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "reply_to_user": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "edited": false, "score": 0, "creation_date": 1457710722, "post_id": 35926243, "comment_id": 59544876, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/106029/discussion-between-vanatomas-and-mikejramsey56\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2514, "user_id": 6004650, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/668db278c31bc9040a9dea1b77b4ddd4?s=128&d=identicon&r=PG&f=1", "display_name": "MikeJRamsey56", "link": "https://stackoverflow.com/users/6004650/mikejramsey56"}, "is_accepted": false, "score": 0, "last_activity_date": 1457706281, "last_edit_date": 1457706281, "creation_date": 1457640560, "answer_id": 35926243, "question_id": 35735665, "link": "https://stackoverflow.com/questions/35735665/ruby-selenium-begin-rescue/35926243#35926243", "title": "Ruby Selenium begin rescue", "body": "<p>Ruby Cucumber magic depends on something called the <a href=\"https://github.com/cucumber/cucumber/wiki/A-Whole-New-World\" rel=\"nofollow\">World object</a>.  To make your RubyHelper file available to your step definitions you need to:</p>\n\n<ol>\n<li>Wrap the helper methods in a module</li>\n<li>Tell Cucumber to include the module into each World object for each Scenario</li>\n</ol>\n\n<p>RubyHelper.rb file</p>\n\n<pre><code>require 'cucumber'\nrequire 'selenium-webdriver'\nrequire 'rspec'\nmodule MyHelper\n  def not_present(locator)\n    begin\n      locator.displayed?\n    rescue Selenium::WebDriver::Error::NoSuchElementError\n      puts \"Not present\"\n      false\n    end\n  end\nend\nWorld(MyHelper)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 211, "user_id": 4423225, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/100002385910850/picture?type=large", "display_name": "Juan Dela Cruz", "link": "https://stackoverflow.com/users/4423225/juan-dela-cruz"}, "is_accepted": false, "score": 0, "last_activity_date": 1457706885, "creation_date": 1457706885, "answer_id": 35942854, "question_id": 35735665, "link": "https://stackoverflow.com/questions/35735665/ruby-selenium-begin-rescue/35942854#35942854", "title": "Ruby Selenium begin rescue", "body": "<p>Maybe you can try to <code>sleep</code> or wait for that event load. It something that when you run your test, the test was executed but the element is not yet there.</p>\n"}], "owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1210, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1457706885, "creation_date": 1456874797, "last_edit_date": 1457630888, "question_id": 35735665, "link": "https://stackoverflow.com/questions/35735665/ruby-selenium-begin-rescue", "title": "Ruby Selenium begin rescue", "body": "<p>I use Cucumber with Ruby and Selenium. \nHere is scenario where I need to check that element is not on the page\nWhen I do such within Cucumber step</p>\n\n<pre><code>    Step file:\n    begin\n     expect(checkout_page.city_acctdetails.displayed?).to eql false\n    rescue Selenium::WebDriver::Error::NoSuchElementError\n     puts \"City dropdown is not present\"\n     false\n    end\n</code></pre>\n\n<p>it works like a charm.\nWhen I try to do something like by putting as method in another file/helper</p>\n\n<pre><code> RubyHelper.rb file\n   def self.not_present(locator)\n    begin\n      locator.displayed?\n    rescue Selenium::WebDriver::Error::NoSuchElementError\n      puts \"Not present\"\n      false\n    end\n  end\n</code></pre>\n\n<p>so when I change in Cucumber Step file</p>\n\n<pre><code>RubyHelper.not_present(checkout_page.city_acctdetails)\n</code></pre>\n\n<p>I get error:\nUnable to locate element: {} (Selenium::WebDriver::Error::NoSuchElementError)</p>\n\n<p>Require statements:</p>\n\n<pre><code>  #BDD framework that makes feature files running\nrequire 'cucumber'\n\n#Control remote browsers\nrequire 'selenium-webdriver'\n\n#Run tests in parallel\nrequire 'parallel_tests'\n\n#Use expect().to for verifying result\nrequire 'rspec'\n\n#Key value format for storing text data\nrequire 'yaml'\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "selenium", "blocking", "alerts"], "comments": [{"owner": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "edited": false, "score": 0, "creation_date": 1456875768, "post_id": 35735406, "comment_id": 59146008, "body": "Running the JS in a separate thread has worked for me in the past. Don&#39;t know Ruby, but perhaps this: <a href=\"http://www.tutorialspoint.com/ruby/ruby_multithreading.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/ruby/ruby_multithreading.htm</a>"}, {"owner": {"reputation": 13, "user_id": 5693400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8727206c6e53a2c6738e6932e2aad1d3?s=128&d=identicon&r=PG&f=1", "display_name": "Mundisoft", "link": "https://stackoverflow.com/users/5693400/mundisoft"}, "reply_to_user": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "edited": false, "score": 0, "creation_date": 1456880596, "post_id": 35735406, "comment_id": 59147457, "body": "Thanks:      Thread.new{         button.press     }  Has allowed the control to pass back to the Webdriver.  However my usual way of accessing alerts is not working in this case:     @IE.switch_to.alert  It doesn&#39;t seem to recognize that the alert exists."}, {"owner": {"reputation": 13, "user_id": 5693400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8727206c6e53a2c6738e6932e2aad1d3?s=128&d=identicon&r=PG&f=1", "display_name": "Mundisoft", "link": "https://stackoverflow.com/users/5693400/mundisoft"}, "reply_to_user": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "edited": false, "score": 0, "creation_date": 1468891937, "post_id": 35735406, "comment_id": 64301797, "body": "Unfortunately the webdriver is blocked unilaterally at Javascript execution, so as soon as a webdriver method is called (which happens to be the piece of code that handles the alert) the script is unable to progress. (even if it is being run in a  separate thread)."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5693400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8727206c6e53a2c6738e6932e2aad1d3?s=128&d=identicon&r=PG&f=1", "display_name": "Mundisoft", "link": "https://stackoverflow.com/users/5693400/mundisoft"}, "edited": false, "score": 0, "creation_date": 1457035690, "post_id": 35750966, "comment_id": 59235262, "body": "Thanks for the advice, this is not ideal however. There are many such cases throughout my tests and I am looking for a generic solution that can be called on every such case."}], "tags": [], "owner": {"reputation": 3627, "user_id": 4856814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e9c9bf7a42b967f439b4a0b58716e34?s=128&d=identicon&r=PG&f=1", "display_name": "murali selenium", "link": "https://stackoverflow.com/users/4856814/murali-selenium"}, "is_accepted": false, "score": 1, "last_activity_date": 1456931292, "creation_date": 1456931292, "answer_id": 35750966, "question_id": 35735406, "link": "https://stackoverflow.com/questions/35735406/stop-javascript-execution-from-blocking-selenium-webdriver/35750966#35750966", "title": "Stop Javascript execution from blocking selenium webdriver", "body": "<p>If you know the function which triggers that alert, then you can try by using javascript executor. something like below</p>\n\n<pre><code>  ((JavascriptExecutor)driver).executeScript(\"window.alert = function(msg){return true;};\");  \n</code></pre>\n\n<p>Thank You,\nMurali</p>\n"}], "owner": {"reputation": 13, "user_id": 5693400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8727206c6e53a2c6738e6932e2aad1d3?s=128&d=identicon&r=PG&f=1", "display_name": "Mundisoft", "link": "https://stackoverflow.com/users/5693400/mundisoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1449, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1468880071, "creation_date": 1456873611, "last_edit_date": 1468880071, "question_id": 35735406, "link": "https://stackoverflow.com/questions/35735406/stop-javascript-execution-from-blocking-selenium-webdriver", "title": "Stop Javascript execution from blocking selenium webdriver", "body": "<p>I am writing tests for a web application using Selenium on top of Ruby and I have run into some trouble.</p>\n\n<p>In my automated test, selenium webdriver clicks on an element, which in turn, executes some Javascript.</p>\n\n<p>The Javascript creates an alert window, which I would usually accept with: </p>\n\n<pre><code>@IE.switch_to.alert.accept\n</code></pre>\n\n<p>In this case however, control is not passed back to the Webdriver and I am unable to accept the alert.</p>\n\n<p>It seems as if the Javascript is still executing - probably just waiting for the alert to be accepted.</p>\n\n<p>But because the webdriver requires the javascript to finish executing BEFORE it can accept the alert, the alert can not be accepted and the javascript will never finish executing.</p>\n\n<hr>\n\n<p>I do not have permission to modify the Javascript so the fix must be on the selenium side.</p>\n\n<p>Is there any way I can execute the Javascript without forcing the webdriver to wait for it?</p>\n\n<p>----UPDATE 1-----</p>\n\n<p>As a commenter suggested running the javascript in a separate thread has enabled me to regain control with the webdriver: ************WRONG -- SEE UPDATE 2*******************</p>\n\n<pre><code>Thread.new{\n  button.press\n}\n</code></pre>\n\n<p>Unfortunately I cannot handle the alert as I usually would:</p>\n\n<pre><code>@IE.switch_to.alert\n</code></pre>\n\n<p>^ is not working</p>\n\n<p>----UPDATE 2-----</p>\n\n<p>Even when run in a thread, the execution of the javascript still blocks any further execution by the webdriver.</p>\n\n<p>I am using Selenium Grid to execute the tests remotely.</p>\n\n<p>Because of this, I am unable to send keystrokes or any kind of signal to the remote PC unless that method is provided by the remote webdriver, and since the webdriver is blocked by the Javascript execution (even if it is running in a separate thread) I am unable to communicate with the remote PC once the alert is thrown.</p>\n\n<p>The closest idea I have for a solution is like what Murali suggested below, and overide the javascript methods with ones that do not return alerts. However this is very far from ideal, the javascript methods I would be overriding are numerous and complex, some of them are hundreds of lines long. </p>\n\n<p>If anybody has anything to suggest on this matter it would be hugely appreciated as this issue is blocking any further progress on our project.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-admin"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1456873558, "post_id": 35735272, "comment_id": 59145110, "body": "Validations always trigger when you do <code>save</code> or <code>create</code> or <code>update_attributes</code> ... are you sure you haven&#39;t got another record with the same email but with different case?  Is it possible the email validation was added later in the project, or maybe you saved with <code>validate: false</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 0, "last_activity_date": 1456875826, "creation_date": 1456875826, "answer_id": 35735852, "question_id": 35735272, "link": "https://stackoverflow.com/questions/35735272/cannot-edit-a-user-record-using-rails-admin-email-is-already-taken/35735852#35735852", "title": "Cannot edit a User record using Rails Admin. Email is already taken", "body": "<p>Try limiting your validation to create and see whether that makes a difference.</p>\n\n<pre><code>validates :email, uniqueness: { case_sensitive: false }, on: :create\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2659, "user_id": 2534479, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/2472926967c5dbb6e31895a660a472ce?s=128&d=identicon&r=PG", "display_name": "aldrien.h", "link": "https://stackoverflow.com/users/2534479/aldrien-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1456895595, "creation_date": 1456895595, "answer_id": 35739002, "question_id": 35735272, "link": "https://stackoverflow.com/questions/35735272/cannot-edit-a-user-record-using-rails-admin-email-is-already-taken/35739002#35739002", "title": "Cannot edit a User record using Rails Admin. Email is already taken", "body": "<p>Your code for validating email is right.</p>\n\n<p>You got the default validation message \"<strong>Email has already been taken</strong>\", because you have the <strong>same</strong> email in your <strong>Users Table</strong>.</p>\n\n<p>It's either part of a seed file so you don't remember saving it.\nOr has been saved by other user.</p>\n\n<p>Please try to search it, like:</p>\n\n<pre><code>User.find_by(:email =&gt; \"test_mail_here\")\n# so you can check duplication ef email.\n</code></pre>\n\n<p>The default validation of your code is for: <strong>create &amp; update</strong></p>\n\n<p>You can use :</p>\n\n<pre><code>validates :email, uniqueness: { case_sensitive: false }, on: :create\n</code></pre>\n\n<p>But, I think much better <strong>NOT</strong> to used it.</p>\n\n<p>Best solution for me, is update or delete the duplicate email. So you can use the full functionality of <strong>validates</strong> method again.</p>\n"}], "owner": {"reputation": 6671, "user_id": 5129131, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j5HkF.jpg?s=128&g=1", "display_name": "Sergio Tapia", "link": "https://stackoverflow.com/users/5129131/sergio-tapia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456895595, "creation_date": 1456873004, "question_id": 35735272, "link": "https://stackoverflow.com/questions/35735272/cannot-edit-a-user-record-using-rails-admin-email-is-already-taken", "title": "Cannot edit a User record using Rails Admin. Email is already taken", "body": "<p>What would cause me not to be able to edit a <code>User</code> record using Rails Admin?</p>\n\n<p>I can edit every other record fine, but when I try to edit this particular record I get this error:</p>\n\n<pre><code>User failed to be updated\n- Email has already been taken\n</code></pre>\n\n<p>I'm using Devise for user signups, along with this model validation:</p>\n\n<pre><code>validates :email,     uniqueness: { case_sensitive: false }\n</code></pre>\n\n<p>I go to the user edit form in Rails Admin, change some other field and on submit get the error above. It's really strange and I'm trying to see if there may be any ideas I may have missed.</p>\n\n<p>Why would this validation trigger when I'm just updating the record? There is only one record with that particular email value, and that's the one I'm editing.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "edited": false, "score": 0, "creation_date": 1456874095, "post_id": 35735253, "comment_id": 59145331, "body": "You forgot to copy/paste the error."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1456875961, "post_id": 35735253, "comment_id": 59146087, "body": "What happens when you just run bundle install?"}, {"owner": {"reputation": 1, "user_id": 6004977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835a3baa2cb4b2d1e0b1a010730f2ad8?s=128&d=identicon&r=PG&f=1", "display_name": "bizarre bear", "link": "https://stackoverflow.com/users/6004977/bizarre-bear"}, "reply_to_user": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "edited": false, "score": 0, "creation_date": 1456965477, "post_id": 35735253, "comment_id": 59195139, "body": "@smathy my bad. - &quot;The system cannot find the path specified.&quot;"}, {"owner": {"reputation": 1, "user_id": 6004977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835a3baa2cb4b2d1e0b1a010730f2ad8?s=128&d=identicon&r=PG&f=1", "display_name": "bizarre bear", "link": "https://stackoverflow.com/users/6004977/bizarre-bear"}, "reply_to_user": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 0, "creation_date": 1456965563, "post_id": 35735253, "comment_id": 59195167, "body": "@toddmetheny, unfortunately it prints out the same error."}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "edited": false, "score": 0, "creation_date": 1457024967, "post_id": 35735253, "comment_id": 59228834, "body": "Copy and paste the full error into your question please."}], "answers": [{"comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 1, "creation_date": 1467727559, "post_id": 38192115, "comment_id": 63835026, "body": "Code-only answers are considered poor-quality content on Stack Overflow.  Please provide information about <i>why</i> this answers the question."}], "tags": [], "owner": {"reputation": 1, "user_id": 6548990, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/86200e00cd5a6dbe6eb9bdebdc1f1a86?s=128&d=identicon&r=PG", "display_name": "Jessica", "link": "https://stackoverflow.com/users/6548990/jessica"}, "is_accepted": false, "score": -1, "last_activity_date": 1467681188, "last_edit_date": 1467681188, "creation_date": 1467665737, "answer_id": 38192115, "question_id": 35735253, "link": "https://stackoverflow.com/questions/35735253/railsbridge-bundle-install-without-production-error/38192115#38192115", "title": "RailsBridge &quot;bundle install --without production&quot; Error", "body": "<p>Missing the \n<code>gem 'puma', '~&gt; 3.0'</code> line</p>\n"}], "owner": {"reputation": 1, "user_id": 6004977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835a3baa2cb4b2d1e0b1a010730f2ad8?s=128&d=identicon&r=PG&f=1", "display_name": "bizarre bear", "link": "https://stackoverflow.com/users/6004977/bizarre-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467681188, "creation_date": 1456872918, "question_id": 35735253, "link": "https://stackoverflow.com/questions/35735253/railsbridge-bundle-install-without-production-error", "title": "RailsBridge &quot;bundle install --without production&quot; Error", "body": "<p>In step Step 2.2 (Prepare your rails app for deploying to Heroku) of RailsBridge, you are prompted to type this in the terminal:</p>\n\n<pre><code>bundle install --without production\n</code></pre>\n\n<p>Unfortunately, it is printing out an error reading \"The system cannot find the path specified.\" It then proceeds to tell you that if you given this error to ask for a volunteer to help you edit the config/environments/production.rb. StackOverflow, you are my volunteer! Please help, you're my only hope.</p>\n\n<p>Here is the code in \"Gemfile\":</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.5.2'\n# Use sqlite3 as the database for Active Record\ngroup :development, :test do\n  gem 'sqlite3'\nend\n\ngroup :production do\n  gem 'pg'\n  gem 'rails_12factor'\nend\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>And here is the code in \"production.rb\":</p>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # Code is not reloaded between requests.\n  config.cache_classes = true\n\n  # Eager load code on boot. This eager loads most of Rails and\n  # your application in memory, allowing both threaded web servers\n  # and those relying on copy on write to perform better.\n  # Rake tasks automatically ignore this option for performance.\n  config.eager_load = true\n\n  # Full error reports are disabled and caching is turned on.\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n\n  # Enable Rack::Cache to put a simple HTTP cache in front of your application\n  # Add `rack-cache` to your Gemfile before enabling this.\n  # For large-scale production use, consider using a caching reverse proxy like\n  # NGINX, varnish or squid.\n  # config.action_dispatch.rack_cache = true\n\n  # Disable serving static files from the `/public` folder by default since\n  # Apache or NGINX already handles this.\n  config.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present?\n\n  # Compress JavaScripts and CSS.\n  config.assets.js_compressor = :uglifier\n  # config.assets.css_compressor = :sass\n\n  # Do not fallback to assets pipeline if a precompiled asset is missed.\n  config.assets.compile = false\n\n  # Asset digests allow you to set far-future HTTP expiration dates on all assets,\n  # yet still be able to expire them through the digest params.\n  config.assets.digest = true\n\n  # `config.assets.precompile` and `config.assets.version` have moved to config/initializers/assets.rb\n\n  # Specifies the header that your server uses for sending files.\n  # config.action_dispatch.x_sendfile_header = 'X-Sendfile' # for Apache\n  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for NGINX\n\n  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.\n  # config.force_ssl = true\n\n  # Use the lowest log level to ensure availability of diagnostic information\n  # when problems arise.\n  config.log_level = :debug\n\n  # Prepend all log lines with the following tags.\n  # config.log_tags = [ :subdomain, :uuid ]\n\n  # Use a different logger for distributed setups.\n  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)\n\n  # Use a different cache store in production.\n  # config.cache_store = :mem_cache_store\n\n  # Enable serving of images, stylesheets, and JavaScripts from an asset server.\n  # config.action_controller.asset_host = 'http://assets.example.com'\n\n  # Ignore bad email addresses and do not raise email delivery errors.\n  # Set this to true and configure the email server for immediate delivery to raise delivery errors.\n  # config.action_mailer.raise_delivery_errors = false\n\n  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n  # the I18n.default_locale when a translation cannot be found).\n  config.i18n.fallbacks = true\n\n  # Send deprecation notices to registered listeners.\n  config.active_support.deprecation = :notify\n\n  # Use default logging formatter so that PID and timestamp are not suppressed.\n  config.log_formatter = ::Logger::Formatter.new\n\n  # Do not dump schema after migrations.\n  config.active_record.dump_schema_after_migration = false\nend\n</code></pre>\n\n<p>In advance, thanks to whoever decides to help out!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1456872903, "post_id": 35735156, "comment_id": 59144806, "body": "does it matter that you have a type text and are saving integers?"}, {"owner": {"reputation": 563, "user_id": 2418828, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b8bbbdbccee9a400610246016d24a15?s=128&d=identicon&r=PG", "display_name": "James Klein", "link": "https://stackoverflow.com/users/2418828/james-klein"}, "reply_to_user": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1456873150, "post_id": 35735156, "comment_id": 59144920, "body": "I don&#39;t think so. It will be strings that I&#39;m saving and I tested it with [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] and no luck either."}, {"owner": {"reputation": 4107, "user_id": 1612469, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VaKOC.jpg?s=128&g=1", "display_name": "Aleks", "link": "https://stackoverflow.com/users/1612469/aleks"}, "edited": false, "score": 1, "creation_date": 1456873500, "post_id": 35735156, "comment_id": 59145086, "body": "You are testing in a console. Have you tried <code>reload!</code> in the console?"}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "edited": false, "score": 0, "creation_date": 1456873612, "post_id": 35735156, "comment_id": 59145136, "body": "Just to reinforce Aleks&#39;s comment, your code works perfectly in Rails 4.2 here."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1456873749, "post_id": 35735156, "comment_id": 59145182, "body": "Executive Summary: Don&#39;t use <code>serialize</code> with PostgreSQL array columns."}, {"owner": {"reputation": 563, "user_id": 2418828, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b8bbbdbccee9a400610246016d24a15?s=128&d=identicon&r=PG", "display_name": "James Klein", "link": "https://stackoverflow.com/users/2418828/james-klein"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1456874057, "post_id": 35735156, "comment_id": 59145307, "body": "@muistooshort was right. No <code>serialize</code> with array columns. It&#39;s one or the other. Thanks"}], "owner": {"reputation": 563, "user_id": 2418828, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b8bbbdbccee9a400610246016d24a15?s=128&d=identicon&r=PG", "display_name": "James Klein", "link": "https://stackoverflow.com/users/2418828/james-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 15, "favorite_count": 0, "closed_date": 1456873730, "answer_count": 0, "score": 0, "last_activity_date": 1456872461, "creation_date": 1456872461, "question_id": 35735156, "link": "https://stackoverflow.com/questions/35735156/rails-array-column-field-not-creating", "closed_reason": "Duplicate", "title": "Rails array column field not creating", "body": "<p>I read all about this and how there are transactional issues in updating an array column but mine wont even create.</p>\n\n<pre><code>class Recipe &lt; ActiveRecord::Base\n  serialize :steps\n  ...\nend\n</code></pre>\n\n<p>Migration</p>\n\n<pre><code>add_column :recipes, :steps, :text, array:true, default: []\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>$ r = Recipe.create(steps: [1,2,3])\n&gt; #&lt;Recipe:0x007fe38ae68870 id: 27, ..., steps: [], ingredients: []&gt;\n</code></pre>\n\n<p>Also played around with this method with no luck:</p>\n\n<pre><code>def add_steps(steps)\n  steps_will_change!\n  update_attributes steps: self.steps + steps\nend\n</code></pre>\n"}, {"tags": ["html", "ruby", "file"], "comments": [{"owner": {"reputation": 1720, "user_id": 778694, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25a12b26dbcf89f0959f6af01be427e6?s=128&d=identicon&r=PG&f=1", "display_name": "franklin", "link": "https://stackoverflow.com/users/778694/franklin"}, "edited": false, "score": 1, "creation_date": 1456872575, "post_id": 35735094, "comment_id": 59144641, "body": "See this <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">similar question</a>. You will probably need an XML/HTML <b>parser</b>. (Do <b><i>not</i></b> use regexp; unless you know what you&#39;re doing and since you&#39;re asking this question, you&#39;re probably not there yet. Every time an engineer uses regexp to parse HTML kittens die.)"}, {"owner": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "reply_to_user": {"reputation": 1720, "user_id": 778694, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25a12b26dbcf89f0959f6af01be427e6?s=128&d=identicon&r=PG&f=1", "display_name": "franklin", "link": "https://stackoverflow.com/users/778694/franklin"}, "edited": false, "score": 0, "creation_date": 1456872875, "post_id": 35735094, "comment_id": 59144793, "body": "hi I think maybe the questions are a bit different? But I just want to change the html file only contains the content from &lt;!-- example --&gt; to &lt;/div&gt;. Can&#39;t I use ruby to do it? I&#39;m just thinking using copy and paste would be too much of the manual work if I have tons of htmls to do the same task."}, {"owner": {"reputation": 1720, "user_id": 778694, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25a12b26dbcf89f0959f6af01be427e6?s=128&d=identicon&r=PG&f=1", "display_name": "franklin", "link": "https://stackoverflow.com/users/778694/franklin"}, "edited": false, "score": 0, "creation_date": 1456873239, "post_id": 35735094, "comment_id": 59144960, "body": "Of course you can! Any automated stuff should be done by machine not by hand. However, you&#39;re approaching the problem in the wrong way. You should be using an HTML parser to read an HTML source file. Vanilla regexp is not a sophisticated enough tool to read HTML."}, {"owner": {"reputation": 1720, "user_id": 778694, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25a12b26dbcf89f0959f6af01be427e6?s=128&d=identicon&r=PG&f=1", "display_name": "franklin", "link": "https://stackoverflow.com/users/778694/franklin"}, "edited": false, "score": 1, "creation_date": 1456873327, "post_id": 35735094, "comment_id": 59144998, "body": "I believe that the X/HTML parser you&#39;re looking for (in Ruby) may be Nokogiri."}, {"owner": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "reply_to_user": {"reputation": 1720, "user_id": 778694, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25a12b26dbcf89f0959f6af01be427e6?s=128&d=identicon&r=PG&f=1", "display_name": "franklin", "link": "https://stackoverflow.com/users/778694/franklin"}, "edited": false, "score": 0, "creation_date": 1456874464, "post_id": 35735094, "comment_id": 59145494, "body": "Thank you! I just downloaded the Nokogiri and reading its documentation, but still wondering if I can use it somehow to change the html&#39;s content to only contain part of the code...I can definitely learn it from scratch, but if you have any ideas of how to select the content and delete the rest for each html, please let me know? Thanks!"}, {"owner": {"reputation": 1720, "user_id": 778694, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25a12b26dbcf89f0959f6af01be427e6?s=128&d=identicon&r=PG&f=1", "display_name": "franklin", "link": "https://stackoverflow.com/users/778694/franklin"}, "edited": false, "score": 0, "creation_date": 1456883379, "post_id": 35735094, "comment_id": 59148217, "body": "I&#39;m not fluent in Ruby, but you can probably adapt the sol&#39;n found <a href=\"http://stackoverflow.com/a/610684/778694\">here</a>. Just wrap that in a recursive function that goes through your directory looking for html files."}], "owner": {"reputation": 1080, "user_id": 5166249, "user_type": "registered", "accept_rate": 42, "profile_image": "https://lh4.googleusercontent.com/-WzuHmMgRjOk/AAAAAAAAAAI/AAAAAAAAANM/KmLSxYcVElE/photo.jpg?sz=128", "display_name": "Penny", "link": "https://stackoverflow.com/users/5166249/penny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1456909614, "answer_count": 0, "score": 2, "last_activity_date": 1456921619, "creation_date": 1456872211, "last_edit_date": 1456921619, "question_id": 35735094, "link": "https://stackoverflow.com/questions/35735094/can-i-use-ruby-and-regular-expressions-to-make-changes-to-a-file", "closed_reason": "Needs more focus", "title": "Can I use Ruby and Regular expressions to make changes to a file?", "body": "<p>I want to use Ruby (maybe its File class) to grab/change certain content in a html file. For example:</p>\n\n<pre><code>&lt;html&gt;\n&lt;script&gt;\n...\n&lt;/script&gt;\n&lt;!-- example --&gt;\n&lt;div class=\"1\"&gt;\n&lt;div class=\"2\"&gt;\n....\n&lt;p&gt;...&lt;/p&gt;\n&lt;/div&gt;\n...\n&lt;/html&gt;\n</code></pre>\n\n<p>So can I use ruby to run through all the htmls in the folder and change all the html's content to include only <code>&lt;!-- example --&gt;.*?&lt;\\/div&gt;</code> in each file? </p>\n\n<p>NOTE:wants to add more clarification: not just copy the text, but the code too. I may grab the code content from <code>&lt;!-- example --&gt; to &lt;\\/div&gt;</code></p>\n\n<p>Thank you and I'm looking forward to your reply!</p>\n"}, {"tags": ["ruby", "xml", "hash"], "comments": [{"owner": {"reputation": 188, "user_id": 787436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbd1ea1cbcc38582b3f655426541ce8?s=128&d=identicon&r=PG", "display_name": "andoke", "link": "https://stackoverflow.com/users/787436/andoke"}, "edited": false, "score": 0, "creation_date": 1467876960, "post_id": 35735053, "comment_id": 63900728, "body": "I would suggest to create your own recursive method &quot;xml to json&quot;. You can do it with nokogiri."}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 188, "user_id": 787436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbd1ea1cbcc38582b3f655426541ce8?s=128&d=identicon&r=PG", "display_name": "andoke", "link": "https://stackoverflow.com/users/787436/andoke"}, "edited": false, "score": 0, "creation_date": 1467877047, "post_id": 35735053, "comment_id": 63900784, "body": "@andoke: I&#39;d appreciate if you could elaborate on that, maybe with an answer that includes proof-of-concept code. If I&#39;m going to spend any more time on this at work, and refactor the XML document, I need to know that it will actually work and not be a dead-end."}, {"owner": {"reputation": 188, "user_id": 787436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbd1ea1cbcc38582b3f655426541ce8?s=128&d=identicon&r=PG", "display_name": "andoke", "link": "https://stackoverflow.com/users/787436/andoke"}, "edited": false, "score": 0, "creation_date": 1467880995, "post_id": 35735053, "comment_id": 63903083, "body": "You can do something like this : <a href=\"http://stackoverflow.com/questions/6478005/how-to-convert-nokogiri-document-object-into-json\" title=\"how to convert nokogiri document object into json\">stackoverflow.com/questions/6478005/&hellip;</a>"}, {"owner": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "edited": false, "score": 0, "creation_date": 1470029224, "post_id": 35735053, "comment_id": 64762005, "body": "There is a GitHub Issue for this bug in Nori: <a href=\"https://github.com/savonrb/nori/issues/59\" rel=\"nofollow noreferrer\">issue #59 \u201cIt ignores attributes when a child is a text node\u201d</a>"}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "reply_to_user": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "edited": false, "score": 0, "creation_date": 1470029299, "post_id": 35735053, "comment_id": 64762026, "body": "@RoryO&#39;Kane: Thanks, but I had already come across that before posting the question, and I even mentioned it in the original post. For this post, I was trying to see if anyone knew of a workaround to the issue."}, {"owner": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "edited": false, "score": 0, "creation_date": 1470029629, "post_id": 35735053, "comment_id": 64762120, "body": "Sorry, I didn\u2019t notice the existing link in your post. I misread the date on that issue as being in this year rather than in 2014, so I thought that issue had been posted after you wrote this question."}, {"owner": {"reputation": 885, "user_id": 1169785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb88c0410d5380a5b590a2e993b053a?s=128&d=identicon&r=PG", "display_name": "G. Allen Morris III", "link": "https://stackoverflow.com/users/1169785/g-allen-morris-iii"}, "edited": false, "score": 0, "creation_date": 1472396517, "post_id": 35735053, "comment_id": 65725739, "body": "I simplified my example.  I hope it will be clear to you now.   The example does not require the <code>Nori::StringWithAttributes</code> class be extended, but if you want to use <code>#inspect</code> or <code>to_json</code> on it and have the attributes be included then you will need to extend it."}], "answers": [{"comments": [{"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1472393503, "post_id": 39107244, "comment_id": 65724878, "body": "The 2-line sample at the top, where you suggest that the leaf attributes are just not being printed, actually crashes with <code>TypeError: no implicit conversion of String into Integer</code>. Also, if they&#39;re just not being printed, why is there a need to go around overloading other classes/methods, which you seem to imply is unnecessary?"}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 0, "creation_date": 1472725134, "post_id": 39107244, "comment_id": 65872142, "body": "Your updated post worked, though <code>ap</code> still fails to print the attributes. Since the attributes are there, is there a way to get them to print automatically (e.g. <code>ap data, :indent =&gt; -2</code>)? (Note I&#39;m using the <code>awesome_print</code> gem.) Also, the bug report I linked in my OP suggests there&#39;s an actual issue here. Was this fixed and the issue report just not updated?"}, {"owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "edited": false, "score": 1, "creation_date": 1473106513, "post_id": 39107244, "comment_id": 66005435, "body": "Gave you the win. Things changed and I no longer need to keep pursuing the issue, but given that you appear to have tested the code (e.g. provided output) and seems like a close-enough work-around, I&#39;m giving you the points."}], "tags": [], "owner": {"reputation": 885, "user_id": 1169785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb88c0410d5380a5b590a2e993b053a?s=128&d=identicon&r=PG", "display_name": "G. Allen Morris III", "link": "https://stackoverflow.com/users/1169785/g-allen-morris-iii"}, "is_accepted": true, "score": 3, "last_activity_date": 1472737648, "last_edit_date": 1472737648, "creation_date": 1471972781, "answer_id": 39107244, "question_id": 35735053, "link": "https://stackoverflow.com/questions/35735053/xml-to-hash-conversion-nori-drops-the-attributes-of-the-deepest-xml-elements/39107244#39107244", "title": "XML to Hash conversion: Nori drops the attributes of the deepest XML elements", "body": "<p>Nori is not actually dropping the attributes, they are just not being printed.</p>\n\n<p>If you run the ruby script:</p>\n\n<pre><code>require 'nori'\n\ndata = Nori.new(empty_tag_value: true).parse(&lt;&lt;XML)\n&lt;?xml version=\"1.0\"?&gt;\n&lt;root&gt;\n  &lt;objects&gt;\n    &lt;object&gt;\n      &lt;fields&gt;\n        &lt;field name=\"Name\"&gt;The name&lt;/field&gt;\n        &lt;field name=\"Description\"&gt;A description&lt;/field&gt;\n      &lt;/fields&gt;\n    &lt;/object&gt;\n  &lt;/objects&gt;\n&lt;/root&gt;\nXML\n\nfield_list = data['root']['objects']['object']['fields']['field']\n\nputs \"text: '#{field_list[0]}' data: #{field_list[0].attributes}\"\nputs \"text: '#{field_list[1]}' data: #{field_list[1].attributes}\"\n</code></pre>\n\n<p>You should get the output</p>\n\n<pre><code>[\"The name\", \"A description\"]\ntext: 'The name' data: {\"name\"=&gt;\"Name\"}\ntext: 'A description' data: {\"name\"=&gt;\"Description\"}\n</code></pre>\n\n<p>Which clearly shows that the attribute are there, but are not displayed by the <code>inspect</code> method  (the <code>p(x)</code> function being the same as <code>puts x.inspect</code>). </p>\n\n<p>You will notice that <code>puts field_list.inspect</code>  outputs <code>[\"The name\", \"A description\"]</code>.  but <code>field_list[0].attributes</code> prints the attribute key and data.</p>\n\n<p>If you would like to have <code>pp</code> display this you can overload the <code>inspect</code> method in the <code>Nori::StringWithAttributes</code>.</p>\n\n<pre><code>class Nori\n  class StringWithAttributes &lt; String\n    def inspect\n      [attributes, String.new(self)].inspect\n    end\n  end\nend\n</code></pre>\n\n<p>Or if you wanted to change the output you could overload the <code>self.new</code> method to have it return a different data strcture.</p>\n\n<pre><code>class Nori\n  class MyText &lt; Array\n    def attributes=(data)\n      self[1] = data\n    end\n    attr_accessor :text\n    def initialize(text)\n      self[0] = text\n      self[1] = {}\n    end\n  end\n  class StringWithAttributes &lt; String\n    def self.new(x)\n      MyText.new(x)\n    end\n  end\nend\n</code></pre>\n\n<p>And access the data as a tuple</p>\n\n<pre><code>puts \"text: '#{data['root']['objects']['object']['fields']['field'][0].first}' data: #{ data['root']['objects']['object']['fields']['field'][0].last}\"\n</code></pre>\n\n<p>This would make it so you could have the data as JSON or YAML as the text items would look like arrays with 2 elements.\n<code>pp</code> also works.</p>\n\n<pre><code>{\"root\"=&gt;\n  {\"objects\"=&gt;\n    {\"object\"=&gt;\n      {\"fields\"=&gt;\n        {\"field\"=&gt;\n          [[\"The name\", {\"name\"=&gt;\"Name\"}],\n           [\"A description\", {\"name\"=&gt;\"Description\"}]]},\n       \"bob\"=&gt;[{\"@id\"=&gt;\"id1\"}, {\"@id\"=&gt;\"id2\"}],\n       \"bill\"=&gt;\n        [{\"p\"=&gt;[\"one\", {}], \"@id\"=&gt;\"bid1\"}, {\"p\"=&gt;[\"two\", {}], \"@id\"=&gt;\"bid2\"}],\n       \"@id\"=&gt;\"1\"}}}}\n</code></pre>\n\n<p>This should do what you want.</p>\n\n<pre><code>require 'awesome_print'\nrequire 'nori'\n\n# Copyright (c) 2016 G. Allen Morris III\n#\n# Awesome Print is freely distributable under the terms of MIT license.\n# See LICENSE file or http://www.opensource.org/licenses/mit-license.php\n#------------------------------------------------------------------------------\nmodule AwesomePrint\n  module Nori\n\n    def self.included(base)\n      base.send :alias_method, :cast_without_nori, :cast\n      base.send :alias_method, :cast, :cast_with_nori\n    end\n\n    # Add Nori XML Node and NodeSet names to the dispatcher pipeline.\n    #-------------------------------------------------------------------\n    def cast_with_nori(object, type)\n      cast = cast_without_nori(object, type)\n      if defined?(::Nori::StringWithAttributes) &amp;&amp; object.is_a?(::Nori::StringWithAttributes)\n        cast = :nori_xml_node\n      end\n      cast\n    end\n\n    #-------------------------------------------------------------------\n    def awesome_nori_xml_node(object)\n      return %Q|[\"#{object}\", #{object.attributes}]|\n    end\n  end\nend\n\nAwesomePrint::Formatter.send(:include, AwesomePrint::Nori)\n\ndata = Nori.new(empty_tag_value: true).parse(&lt;&lt;XML)\n&lt;?xml version=\"1.0\"?&gt;\n&lt;root&gt;\n  &lt;objects&gt;\n    &lt;object&gt;\n      &lt;fields&gt;\n        &lt;field name=\"Name\"&gt;The name&lt;/field&gt;\n        &lt;field name=\"Description\"&gt;A description&lt;/field&gt;\n      &lt;/fields&gt;\n    &lt;/object&gt;\n  &lt;/objects&gt;\n&lt;/root&gt;\nXML\n\nap data\n</code></pre>\n\n<p>as the output is:</p>\n\n<pre><code>{\n    \"root\" =&gt; {\n        \"objects\" =&gt; {\n            \"object\" =&gt; {\n                \"fields\" =&gt; {\n                    \"field\" =&gt; [\n                        [0] [\"The name\", {\"name\"=&gt;\"Name\"}],\n                        [1] [\"A description\", {\"name\"=&gt;\"Description\"}]\n                    ]\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 5338, "user_id": 4594973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/USV9e.jpg?s=128&g=1", "display_name": "code_dredd", "link": "https://stackoverflow.com/users/4594973/code-dredd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1563, "favorite_count": 2, "accepted_answer_id": 39107244, "answer_count": 1, "score": 26, "last_activity_date": 1472737648, "creation_date": 1456872027, "last_edit_date": 1467445195, "question_id": 35735053, "link": "https://stackoverflow.com/questions/35735053/xml-to-hash-conversion-nori-drops-the-attributes-of-the-deepest-xml-elements", "title": "XML to Hash conversion: Nori drops the attributes of the deepest XML elements", "body": "<h2>Summary</h2>\n\n<p>I'm using Ruby (<code>ruby 2.1.2p95 (2014-05-08) [x86_64-linux-gnu]</code> on my machine, <code>ruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]</code> in production environment) and Nori to convert an XML document (initially processed with Nokogiri for some validation) into a Ruby Hash, but I later discovered that Nori is dropping the attributes of the deepest XML elements.</p>\n\n<h2>Issue Details and Reproducing</h2>\n\n<p>To do this, I'm using code similar to the following:</p>\n\n<pre><code>xml  = Nokogiri::XML(File.open('file.xml')) { |config| config.strict.noblanks }\nhash = Nori.new.parse xml.to_s\n</code></pre>\n\n<p>The code generally works as intended, except for one case. Whenever Nori parses the XML text, it drops element attributes from the leaf elements (i.e. elements that have no child elements).</p>\n\n<p>For example, the following document:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;root&gt;\n  &lt;objects&gt;\n    &lt;object&gt;\n      &lt;fields&gt;\n        &lt;id&gt;1&lt;/id&gt;\n        &lt;name&gt;The name&lt;/name&gt;\n        &lt;description&gt;A description&lt;/description&gt;\n      &lt;/fields&gt;\n    &lt;/object&gt;\n  &lt;/objects&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>...is converted to the expected Hash (some output omitted for brevity):</p>\n\n<pre><code>irb(main):066:0&gt; xml = Nokogiri::XML(txt) { |config| config.strict.noblanks }\nirb(main):071:0&gt; ap Nori.new.parse(xml.to_s), :indent =&gt; -2\n{\n  \"root\" =&gt; {\n    \"objects\" =&gt; {\n      \"object\" =&gt; {\n        \"fields\" =&gt; {\n          \"id\"   =&gt; \"1\",\n          \"name\" =&gt; \"The name\"\n          \"description\" =&gt; \"A description\"\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>The problem shows up when element attributes are used on elements with no children. For example, the following document is <em>not</em> converted as expected:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;root&gt;\n  &lt;objects&gt;\n    &lt;object id=\"1\"&gt;\n      &lt;fields&gt;\n        &lt;field name=\"Name\"&gt;The name&lt;/field&gt;\n        &lt;field name=\"Description\"&gt;A description&lt;/field&gt;\n      &lt;/fields&gt;\n    &lt;/object&gt;\n  &lt;/objects&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>The same <code>Nori.new.parse(xml.to_s)</code>, as displayed by <code>awesome_print</code>, shows the attributes of the deepest <code>&lt;field&gt;</code> elements are <em>absent</em>:</p>\n\n<pre><code>irb(main):131:0&gt; ap Nori.new.parse(xml.to_s), :indent =&gt; -2\n{\n  \"root\" =&gt; {\n    \"objects\" =&gt; {\n      \"object\" =&gt; {\n        \"fields\" =&gt; {\n          \"field\" =&gt; [\n            [0] \"The name\",\n            [1] \"A description\"\n          ]\n        },\n        \"@id\"    =&gt; \"1\"\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>The Hash only has their values as a list, which is <em>not</em> what I wanted. I expected the <code>&lt;field&gt;</code> elements to retain their attributes just like their parent elements (e.g. see <code>@id=\"1\"</code> for <code>&lt;object&gt;</code>), not for their attributes to get chopped off.</p>\n\n<p>Even if the document is modified to look as follows, it still doesn't work as expected:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;root&gt;\n  &lt;objects&gt;\n    &lt;object id=\"1\"&gt;\n      &lt;fields&gt;\n        &lt;Name type=\"string\"&gt;The name&lt;/Name&gt;\n        &lt;Description type=\"string\"&gt;A description&lt;/Description&gt;\n      &lt;/fields&gt;\n    &lt;/object&gt;\n  &lt;/objects&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>It produces the following Hash:</p>\n\n<pre><code>{\n  \"root\" =&gt; {\n    \"objects\" =&gt; {\n      \"object\" =&gt; {\n        \"fields\" =&gt; {\n          \"Name\"        =&gt; \"The name\",\n          \"Description\" =&gt; \"A description\"\n        },\n        \"@id\"    =&gt; \"1\"\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Which lacks the <code>type=\"whatever\"</code> attributes for each field entry.</p>\n\n<p>Searching eventually lead me to <a href=\"https://github.com/savonrb/nori/issues/59\" title=\"Issue #53\">Issue #59</a> with the last post (from Aug 2015) stating he can't \"find the bug in Nori's code.\"</p>\n\n<h2>Conclusion</h2>\n\n<p>So, <strong>my question is:</strong> Are any of you aware of a way to work around the Nori issue (e.g. perhaps a setting) that would allow me to use my original schema (i.e. the one with attributes in elements with no children)? If so, can you share a code snippet that will handle this correctly?</p>\n\n<p>I had to re-design my XML schema and change code at about three times to make it work, so if there's a way to get Nori to behave, and I'm simply not aware of it, I'd like to know what it is.</p>\n\n<p>I'd like to <em>avoid</em> installing more libraries as much as possible just to get this working properly with the schema structure I originally wanted to use, but I'm open to the possibility if it's proven to work. (I'd have to re-factor the code once again...) Frameworks are definitely overkill for this, so please: do <em>not</em> suggest <a href=\"http://en.wikipedia.org/wiki/Ruby_on_Rails\">Ruby on Rails</a> or similar full-stack solutions.</p>\n\n<p>Please note that my current solution, based on a (reluctantly) redesigned schema, is working, but it's more complicated to generate and process than the original one, and I'd like to go back to the simpler/shallower schema.</p>\n"}, {"tags": ["ruby", "lambda", "functional-programming", "proc"], "comments": [{"owner": {"reputation": 1743, "user_id": 1821450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/553ce41bacded4ae27ee3586a0f3c770?s=128&d=identicon&r=PG", "display_name": "mutant_city", "link": "https://stackoverflow.com/users/1821450/mutant-city"}, "edited": false, "score": 0, "creation_date": 1456869302, "post_id": 35734314, "comment_id": 59143056, "body": "Also, would like to have it encapsulated within a class."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1456869879, "post_id": 35734314, "comment_id": 59143412, "body": "Why do you want to use a proc/lambda. Just define a method (with <code>def</code>)?"}, {"owner": {"reputation": 1743, "user_id": 1821450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/553ce41bacded4ae27ee3586a0f3c770?s=128&d=identicon&r=PG", "display_name": "mutant_city", "link": "https://stackoverflow.com/users/1821450/mutant-city"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1456870113, "post_id": 35734314, "comment_id": 59143530, "body": "Just trying to avoid local varaibles."}, {"owner": {"reputation": 2989, "user_id": 1009655, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/K3jdk.png?s=128&g=1", "display_name": "Frederik Spang", "link": "https://stackoverflow.com/users/1009655/frederik-spang"}, "edited": false, "score": 0, "creation_date": 1574011544, "post_id": 35734314, "comment_id": 104069219, "body": "<code>h.transform_keys(&amp;:downcase)</code> - Ruby 2.5+ or Rails. 2.5+ will give you the speed benefit of C-compiled function calls. <a href=\"https://ruby-doc.org/core-2.5.0/Hash.html#method-i-transform_keys\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.0/Hash.html#method-i-transform_keys</a>"}], "answers": [{"tags": [], "owner": {"reputation": 759, "user_id": 9174431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8f67982fb2ef93d0ebf92453b00fe5?s=128&d=identicon&r=PG", "display_name": "Giuseppe Schembri", "link": "https://stackoverflow.com/users/9174431/giuseppe-schembri"}, "is_accepted": false, "score": 0, "last_activity_date": 1574010477, "last_edit_date": 1574010477, "creation_date": 1574009834, "answer_id": 58902884, "question_id": 35734314, "link": "https://stackoverflow.com/questions/35734314/how-to-make-a-custom-proc-in-a-class-so-i-can-do-params-hash-downcase-keys-inst/58902884#58902884", "title": "How to make a custom proc in a class so I can do: params_hash.downcase_keys instead of downcase_keys(params_hash)?", "body": "<p>I do not understand why you tagged this question as <code>functional-programming</code> it seems you are looking for a method to call on a <code>Hash</code> object.</p>\n\n<p>Be aware that you may encounter problems doing so because duplicated keys are going to be overwritten.</p>\n\n<pre><code>h = {\"a\" =&gt; 1, \"B\" =&gt; 2}\n\n# Singleton method on the object\ndef h.downcase_keys\n  temp = map {|k,v| [k.downcase, v]}.to_h\n  clear\n  merge! temp\nend\n\nh.downcase_keys()\np h  # {\"a\"=&gt;1, \"b\"=&gt;2}\n\n # Method available on all Hash objects\nclass Hash\n  def downcase_keys\n    temp = map {|k,v| [k.downcase, v]}.to_h\n    clear\n    merge! temp\n  end\nend\n\nh = {\"a\" =&gt; 1, \"B\" =&gt; 2}\nh.downcase_keys()\np h # {\"a\"=&gt;1, \"b\"=&gt;2}\n\ndef downcase_keys(hash)\n  hash.downcase_keys\nend\n\nh = {\"C\" =&gt; 1, \"B\" =&gt; 2, \"D\" =&gt; 3}\ndowncase_keys(h)\np h # {\"c\"=&gt;1, \"b\"=&gt;2, \"d\"=&gt;3}\n\n</code></pre>\n"}], "owner": {"reputation": 1743, "user_id": 1821450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/553ce41bacded4ae27ee3586a0f3c770?s=128&d=identicon&r=PG", "display_name": "mutant_city", "link": "https://stackoverflow.com/users/1821450/mutant-city"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574010477, "creation_date": 1456869234, "question_id": 35734314, "link": "https://stackoverflow.com/questions/35734314/how-to-make-a-custom-proc-in-a-class-so-i-can-do-params-hash-downcase-keys-inst", "title": "How to make a custom proc in a class so I can do: params_hash.downcase_keys instead of downcase_keys(params_hash)?", "body": "<p>I have a hash of key values and I want to downcase all of the Keys.\nHowever I don't want to have to create an local variable, I would rather functionally do it.</p>\n\n<p>NOT: \n<code>x = downcase_keys(params_hash)</code></p>\n\n<p>BUT THIS:\n<code>params_hash.downcase_keys</code></p>\n\n<p>How would do this in ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "rake-task"], "comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "reply_to_user": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1456871998, "post_id": 35733934, "comment_id": 59144389, "body": "@Flip I&#39;m not sure if your correction is correct. @ Tatiane: Are the &#39;**&#39; part of your csv-data or are they used to mark the critical code?"}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1456872069, "post_id": 35733934, "comment_id": 59144421, "body": "If all data are similar to this extract you may remove all &quot; before you use csv."}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "reply_to_user": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1456872176, "post_id": 35733934, "comment_id": 59144477, "body": "@knut: I see, you might be right..will undo that part. Thanks for pointing it out."}, {"owner": {"reputation": 298, "user_id": 4796700, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NrrM2.jpg?s=128&g=1", "display_name": "Tatiana Frank", "link": "https://stackoverflow.com/users/4796700/tatiana-frank"}, "reply_to_user": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1456928880, "post_id": 35733934, "comment_id": 59173135, "body": "@knut you&#39;re right, I used the &#39;**&#39; to highlight the critical code, it&#39;s not actually part of the data."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1456967655, "post_id": 35733934, "comment_id": 59195784, "body": "You can&#39;t guarantee anything about malformed CSV lines, so you&#39;d be better off rejecting bad lines and cleaning them up later."}], "answers": [{"comments": [{"owner": {"reputation": 298, "user_id": 4796700, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NrrM2.jpg?s=128&g=1", "display_name": "Tatiana Frank", "link": "https://stackoverflow.com/users/4796700/tatiana-frank"}, "edited": false, "score": 0, "creation_date": 1456937890, "post_id": 35734397, "comment_id": 59180202, "body": "thanks pascal! Im not sure where this is meant to go on my code, sorry. Could you please add a bit more explanation as to where to incorporate this in the code I posted?"}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 2, "last_activity_date": 1456990607, "last_edit_date": 1456990607, "creation_date": 1456869483, "answer_id": 35734397, "question_id": 35733934, "link": "https://stackoverflow.com/questions/35733934/ruby-csv-parser-tripping-over-double-quotation-in-my-data/35734397#35734397", "title": "Ruby: CSV parser tripping over double quotation in my data", "body": "<p>The CSV is invalid, the quotes should be escaped. If there is no other special treatment required you could read the file line by line, split by <code>,</code> and remove leading/trailing <code>\"</code>:</p>\n\n<pre><code>File.foreach(path) do |line|\n  columns = line.split(',').map do |column|\n    column[1...-1]\n  end\n  do_something_with_data(columns)\nend\n</code></pre>\n\n<p>UPDATED VERSION</p>\n\n<pre><code>file = Kernel.open(File.join(__dir__, 'input.almost_csv'))\nfile.each do |line|\n  values = line.split(',')\n  values = values.map do |value|\n    value[1...-1] # Remove leading and trailing double-quote\n  end\n\n  div, fg_style, fg_color, factory, part_style, part_color, comp_code, vendor, design_no, comp_type = values\n  fg_sku = fg_style + \"-\" + fg_color\n  part_sku = part_style + \"-\" + part_color\n\n  if !FgPart.where('part_sku LIKE ? AND fg_sku LIKE?', \"%#{part_sku}%\", \"%#{fg_sku}%\").exists?\n    FgPart.create(fg_style: fg_style, fg_color: fg_color, fg_sku: fg_sku, factory: factory, part_style: part_style, part_color: part_color, part_sku: part_sku, comp_code: comp_code, comp_type: comp_type, design_no: design_no)\n  end\n\nend\n</code></pre>\n\n<p>Note that: </p>\n\n<ul>\n<li>You don't need the <code>@</code> local scope variables are enough.</li>\n<li>If you want to remove the quotes inside the string as well, you can manipulate the values inside the <code>map</code> block</li>\n<li>This only works if you don't have the column separator <code>,</code> in the values</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1456897480, "post_id": 35735710, "comment_id": 59152512, "body": "Why would you want to fix it and then parse it again? After you fixed it, it is already parsed and ready to import."}, {"owner": {"reputation": 4706, "user_id": 481229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OJflZ.jpg?s=128&g=1", "display_name": "Agush", "link": "https://stackoverflow.com/users/481229/agush"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1456903824, "post_id": 35735710, "comment_id": 59155459, "body": "@pascalbetz just in case you don&#39;t want to modify the original csv"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1456903992, "post_id": 35735710, "comment_id": 59155548, "body": "I see.  Unless you need the cleaned up file for another process you can leave it as is and import it to AR once it is cleaned. So no need to read, clean, write, read, import."}, {"owner": {"reputation": 4706, "user_id": 481229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OJflZ.jpg?s=128&g=1", "display_name": "Agush", "link": "https://stackoverflow.com/users/481229/agush"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1456904167, "post_id": 35735710, "comment_id": 59155631, "body": "@pascalbetz Yeah thanks, I know that. The thing is this way the code we already have in the answer doesn&#39;t have to be modified, the cleanup logic is separated from the processing logic."}, {"owner": {"reputation": 298, "user_id": 4796700, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NrrM2.jpg?s=128&g=1", "display_name": "Tatiana Frank", "link": "https://stackoverflow.com/users/4796700/tatiana-frank"}, "edited": false, "score": 0, "creation_date": 1456937600, "post_id": 35735710, "comment_id": 59180028, "body": "Hi @agush, I would like to keep only 1 csv with the correct format instead of creating 2. I&#39;m new to the gsub! method. If I just use line.gsub!(/&quot;/,&quot;&#39;&quot;), how do I save the change to the existing file?"}, {"owner": {"reputation": 4706, "user_id": 481229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OJflZ.jpg?s=128&g=1", "display_name": "Agush", "link": "https://stackoverflow.com/users/481229/agush"}, "reply_to_user": {"reputation": 298, "user_id": 4796700, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NrrM2.jpg?s=128&g=1", "display_name": "Tatiana Frank", "link": "https://stackoverflow.com/users/4796700/tatiana-frank"}, "edited": false, "score": 0, "creation_date": 1456944494, "post_id": 35735710, "comment_id": 59184496, "body": "Hey @TatianaFrank I edited my answer and added the code to modify the same file."}, {"owner": {"reputation": 298, "user_id": 4796700, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NrrM2.jpg?s=128&g=1", "display_name": "Tatiana Frank", "link": "https://stackoverflow.com/users/4796700/tatiana-frank"}, "edited": false, "score": 0, "creation_date": 1456951834, "post_id": 35735710, "comment_id": 59188901, "body": "@agush thank you this worked! The only odd thing is that every row has single quote &#39; at the end of it. Was that meant to happen?  <code>01,0020,001,TC,22395,NO,P,,BED RAILS VER A,PEN&#39;</code> <code>01,0020,001,TC,23487,260,W,,BED RAILS VER A,RM&#39;</code> <code>01,0020,001,TC,23488,988,O,,BED RAILS VER A,BAG&#39;</code>"}, {"owner": {"reputation": 4706, "user_id": 481229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OJflZ.jpg?s=128&g=1", "display_name": "Agush", "link": "https://stackoverflow.com/users/481229/agush"}, "reply_to_user": {"reputation": 298, "user_id": 4796700, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NrrM2.jpg?s=128&g=1", "display_name": "Tatiana Frank", "link": "https://stackoverflow.com/users/4796700/tatiana-frank"}, "edited": false, "score": 0, "creation_date": 1456966422, "post_id": 35735710, "comment_id": 59195419, "body": "@TatianaFrank yes I just realized you have to cut one extra character if you take into the account the new line, so it should be <code>line[1...-2]</code> I have edited the answer so it&#39;s correct now"}, {"owner": {"reputation": 298, "user_id": 4796700, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NrrM2.jpg?s=128&g=1", "display_name": "Tatiana Frank", "link": "https://stackoverflow.com/users/4796700/tatiana-frank"}, "edited": false, "score": 0, "creation_date": 1457107256, "post_id": 35735710, "comment_id": 59270579, "body": "Thanks @Agush!! I needed to make it [1...-3] for some reason."}, {"owner": {"reputation": 4706, "user_id": 481229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OJflZ.jpg?s=128&g=1", "display_name": "Agush", "link": "https://stackoverflow.com/users/481229/agush"}, "reply_to_user": {"reputation": 298, "user_id": 4796700, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NrrM2.jpg?s=128&g=1", "display_name": "Tatiana Frank", "link": "https://stackoverflow.com/users/4796700/tatiana-frank"}, "edited": false, "score": 0, "creation_date": 1457472754, "post_id": 35735710, "comment_id": 59420185, "body": "@TatianaFrank glad it worked, you should mark the question as answered then"}], "tags": [], "owner": {"reputation": 4706, "user_id": 481229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OJflZ.jpg?s=128&g=1", "display_name": "Agush", "link": "https://stackoverflow.com/users/481229/agush"}, "is_accepted": true, "score": 3, "last_activity_date": 1456966572, "last_edit_date": 1495541270, "creation_date": 1456875033, "answer_id": 35735710, "question_id": 35733934, "link": "https://stackoverflow.com/questions/35733934/ruby-csv-parser-tripping-over-double-quotation-in-my-data/35735710#35735710", "title": "Ruby: CSV parser tripping over double quotation in my data", "body": "<p>The source CSV is malformed, quotes should be escaped before.</p>\n\n<p>I would edit the file before parsing it with CSV and remove quotes between commas, and replace double quotes with simple ones, you can create a new file in case you don't want to edit the original.</p>\n\n<pre><code>def fix_csv(file)\n  out = File.open(\"fixed_\"+file, 'w')\n  File.readlines(file).each do |line|\n    line = line[1...-2] #remove beggining and end quotes\n    line.gsub!(/\",\"/,\",\") #remove all quotes between commas\n    line.gsub!(/\"/,\"'\") #replace double quotes to single\n    out &lt;&lt; line +\"\\n\" #add the line plus endline to output\n  end\n\n  out.close\n  return \"fixed_\"+file\nend\n</code></pre>\n\n<p>In case you want to modify the same CSV file, you can do it this way:</p>\n\n<pre><code>require 'tempfile'\nrequire 'fileutils'\n\ndef modify_csv(file)\n  temp_file = Tempfile.new('temp')\n  begin\n    File.readlines(file).each do |line|\n      line = line[1...-2]\n      line.gsub!(/\",\"/,\",\")\n      line.gsub!(/\"/,\"'\")\n      temp_file &lt;&lt; line +\"\\n\"\n    end\n    temp_file.close\n    FileUtils.mv(temp_file.path, file)\n  ensure\n    temp_file.close\n    temp_file.unlink\n  end\nend\n</code></pre>\n\n<p>This is explained <a href=\"https://stackoverflow.com/a/4399299/481229\">here</a> in case you want to take a look, this will fix or sanitize your original CSV file</p>\n"}], "owner": {"reputation": 298, "user_id": 4796700, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NrrM2.jpg?s=128&g=1", "display_name": "Tatiana Frank", "link": "https://stackoverflow.com/users/4796700/tatiana-frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 0, "accepted_answer_id": 35735710, "answer_count": 2, "score": 2, "last_activity_date": 1457040399, "creation_date": 1456867876, "last_edit_date": 1457040399, "question_id": 35733934, "link": "https://stackoverflow.com/questions/35733934/ruby-csv-parser-tripping-over-double-quotation-in-my-data", "title": "Ruby: CSV parser tripping over double quotation in my data", "body": "<p>I 'm working on a daily scheduled rake task that will download a CSV that is automatically sent to Dropbox every day, parse it and save to the database. I don't have control over the way the data is entered into the program that generates the CSV reports for this, so I can't avoid there being double quotes used in some of the data. However, I am wondering if there is a way I can strip or replace them with single quotes within the rake task or somehow inform the parser so it doesn't throw this error.</p>\n\n<p>Rake task code:</p>\n\n<pre><code>require 'net/http'\nrequire 'csv'\nrequire 'open-uri'\n\nnamespace :fp_import do\n    desc \"download abc_relations from dropbox, save as csv, create or update record in db\"\n    task :fp =&gt; :environment do\n        data = URI.parse(\"&lt;&lt;file's dropbox link&gt;&gt;\").read\n\n       File.open(Rails.root.join('lib/assets', 'fp_relation.csv'), 'w') do |file|\n         file.write(data)\n       end\n\n       file= Rails.root.join('lib/assets', 'fp_relation.csv')\n\n        CSV.foreach(file) do |row|\n            div, fg_style, fg_color, factory, part_style, part_color, comp_code, vendor, design_no, comp_type = row\n            fg_sku = fg_style + \"-\" + fg_color\n            part_sku = part_style + \"-\" + part_color\n\n            relation = FgPart.where('part_sku LIKE ? AND fg_sku LIKE?', \"%#{part_sku}%\", \"%#{fg_sku}%\").exists?\n            if relation == false\n\n                FgPart.create(fg_style: fg_style, fg_color: fg_color, fg_sku: fg_sku, factory: factory, part_style: part_style, part_color: part_color, part_sku: part_sku, comp_code: comp_code, comp_type: comp_type, design_no: design_no)\n            end\n        end\n    end\nend\n</code></pre>\n\n<p>There are about 35,000 rows in this CSV. Below is a sample. You can see the double quotes in the 4th row of the sample.<br></p>\n\n<p>Sample data:<br></p>\n\n<pre><code>\"01\",\"502210\",\"018\",\"ZH\",\"5931\",\"001\",\"M\",\"\",\"UPHOLSTERED GLIDER A\",\"RM\"\n\"01\",\"502310\",\"053\",\"ZH\",\"25332\",\"NO\",\"O\",\"\",\"UPHOLSTERED GLIDER\",\"BAG\"\n\"01\",\"502310\",\"065\",\"ZH\",\"25332\",\"NO\",\"O\",\"\",\"UPHOLSTERED GLIDER\",\"BAG\"\n\"01\",\"502312\",\"424\",\"ZH\",\"25332\",\"NO\",\"O\",\"\",\"UPHOLSTERED GLIDER\"AUS\"\",\"BAG\"\n\"01\",\"503210\",\"277\",\"ZH\",\"25332\",\"NO\",\"O\",\"\",\"UPHOLSTERED GLIDER\",\"BAG\"\n\"01\",\"503310\",\"076\",\"ZH\",\"25332\",\"NO\",\"O\",\"\",\"UPHOLSTERED GLIDER\",\"BAG\"\n\"01\",\"506210\",\"018\",\"ZH\",\"25332\",\"NO\",\"O\",\"\",\"UPHOLSTERED GLIDER\",\"BAG\"\n\"01\",\"506210\",\"467\",\"ZH\",\"25332\",\"NO\",\"O\",\"\",\"UPHOLSTERED GLIDER\",\"BAG\"\n\"01\",\"507610\",\"932\",\"AZ\",\"25332\",\"NO\",\"O\",\"\",\"GLIDER\",\"BAG\"\n\"01\",\"507610\",\"932\",\"AZ\",\"5936\",\"001\",\"M\",\"\",\"GLIDER\",\"RM\"\n</code></pre>\n"}, {"tags": ["ruby", "netezza"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2694629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d102c1ac022779211fd79783b081cb07?s=128&d=identicon&r=PG&f=1", "display_name": "4ndrew", "link": "https://stackoverflow.com/users/2694629/4ndrew"}, "edited": false, "score": 0, "creation_date": 1457314011, "post_id": 35819707, "comment_id": 59336542, "body": "Hey Jeremy, thanks for your response. I&#39;ve looked into using ODBC but apparently my Ruby version at work is locked to 2.1.7, but I&#39;ve read a few bug report that say ODBC will only work with 2.1.5 and lower."}, {"owner": {"reputation": 2169, "user_id": 3183588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4e9312eff10d604922bd7714250544?s=128&d=identicon&r=PG", "display_name": "Jeremy Fortune", "link": "https://stackoverflow.com/users/3183588/jeremy-fortune"}, "reply_to_user": {"reputation": 11, "user_id": 2694629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d102c1ac022779211fd79783b081cb07?s=128&d=identicon&r=PG&f=1", "display_name": "4ndrew", "link": "https://stackoverflow.com/users/2694629/4ndrew"}, "edited": false, "score": 0, "creation_date": 1457372924, "post_id": 35819707, "comment_id": 59366548, "body": "Did you try it? I run 2.2.2p95 with no issues."}], "tags": [], "owner": {"reputation": 2169, "user_id": 3183588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4e9312eff10d604922bd7714250544?s=128&d=identicon&r=PG", "display_name": "Jeremy Fortune", "link": "https://stackoverflow.com/users/3183588/jeremy-fortune"}, "is_accepted": false, "score": 0, "last_activity_date": 1457210668, "creation_date": 1457210668, "answer_id": 35819707, "question_id": 35733592, "link": "https://stackoverflow.com/questions/35733592/good-methods-of-connecting-to-netezza-using-ruby/35819707#35819707", "title": "Good methods of connecting to Netezza using Ruby?", "body": "<p>If you're just trying to connect to Netezza with Ruby, use the <a href=\"https://en.wikipedia.org/wiki/Open_Database_Connectivity\" rel=\"nofollow\">ODBC</a> gem <a href=\"https://rubygems.org/gems/ruby-odbc/versions/0.99997\" rel=\"nofollow\">ruby-odbc</a>.</p>\n\n<p>Your question implies some sort of native, embedded driver set in a Ruby library. Since Netezza uses ODBC, OLEDB, and JDBC for connectivity, the closest thing you'll find is something that creates JDBC strings for you on the fly. Even the gem you mentioned, <a href=\"https://rubygems.org/gems/activerecord-netezza-adapter/versions/0.1.1-java\" rel=\"nofollow\">activerecord-netezza-adapter</a> uses JDBC.</p>\n\n<p>If you do want to use JDBC from within Ruby, use <a href=\"https://github.com/jruby/jruby/wiki/JDBC\" rel=\"nofollow\">Jruby</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 2694629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d102c1ac022779211fd79783b081cb07?s=128&d=identicon&r=PG&f=1", "display_name": "4ndrew", "link": "https://stackoverflow.com/users/2694629/4ndrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1457210668, "creation_date": 1456866670, "question_id": 35733592, "link": "https://stackoverflow.com/questions/35733592/good-methods-of-connecting-to-netezza-using-ruby", "title": "Good methods of connecting to Netezza using Ruby?", "body": "<p>I am very new to Ruby and I'm using RUBYDEVKIT 2.1 and ANSICON 1.6\n(I was given an installation guide for my workplace). I have tried googling this topic, but I can't seem to find a way to connect to Netezza using only Ruby. </p>\n\n<p>The few posts I can find say to use activerecord-netezza-adapter, but doing 'gem install activerecord-netezza-adapter' tells me no valid gems found, and I don't know that I can use JRuby here at my workplace.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "heroku", "asset-pipeline"], "comments": [{"owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1456865983, "post_id": 35733236, "comment_id": 59141168, "body": "You are saying that your browser on a production url shows un-minified js and css files right? Because if you are just talking about your development environment, it is expected that you would see un-minified assets."}, {"owner": {"reputation": 1304, "user_id": 135767, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4a8c65887f9fed0970287904e92b3d3?s=128&d=identicon&r=PG", "display_name": "lucasarruda", "link": "https://stackoverflow.com/users/135767/lucasarruda"}, "reply_to_user": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1456866439, "post_id": 35733236, "comment_id": 59141436, "body": "Yes, I&#39;m not talking about my local (development). I&#39;m talking about my production environment. On Heroku, with Production settings, together with Staging environment. They both got un-minified JS. CSS looks fine (minified)."}, {"owner": {"reputation": 1304, "user_id": 135767, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4a8c65887f9fed0970287904e92b3d3?s=128&d=identicon&r=PG", "display_name": "lucasarruda", "link": "https://stackoverflow.com/users/135767/lucasarruda"}, "reply_to_user": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1456954511, "post_id": 35733236, "comment_id": 59190481, "body": "@MilesStanfield, I discovered I was modifying the wrong JS files to trigger the compression. That is a necessary step to trigger the compression, otherwise Rails will use the cache and it won&#39;t trigger it."}], "answers": [{"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1456956219, "post_id": 35758522, "comment_id": 59191461, "body": "This is totally wrong. You do not have to modify a file to &quot;trigger&quot; asset compilation, whatever &quot;trigger&quot; means in this context."}, {"owner": {"reputation": 1304, "user_id": 135767, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4a8c65887f9fed0970287904e92b3d3?s=128&d=identicon&r=PG", "display_name": "lucasarruda", "link": "https://stackoverflow.com/users/135767/lucasarruda"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1456959071, "post_id": 35758522, "comment_id": 59192851, "body": "I didn&#39;t said compilation. Compilation is always triggered. I said <b>compression</b>. Compression or minification is only triggered when an asset is modified (and therefore it&#39;s mtime). See <a href=\"http://stackoverflow.com/a/7988689/135767\">stackoverflow.com/a/7988689/135767</a> for more details."}, {"owner": {"reputation": 1304, "user_id": 135767, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4a8c65887f9fed0970287904e92b3d3?s=128&d=identicon&r=PG", "display_name": "lucasarruda", "link": "https://stackoverflow.com/users/135767/lucasarruda"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1457643343, "post_id": 35758522, "comment_id": 59512611, "body": "Please correct me if I&#39;m wrong and I&#39;ll happily edit or delete my answer."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1457644079, "post_id": 35758522, "comment_id": 59513085, "body": "As far as I am concerned, your entire question and answer is wrong and has no value. Assets are <b>precompiled</b> via <code>rake assets:precompile</code>, and compressions happens at that time. The idea of &quot;triggering&quot; asset compilation by modifying a file makes no sense. Even if a file&#39;s mtime was somehow relevant, <b>use <code>touch &lt;file&gt;</code></b>. Adding and removing garbage lines from a file just to update its mtime is insane."}, {"owner": {"reputation": 1304, "user_id": 135767, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4a8c65887f9fed0970287904e92b3d3?s=128&d=identicon&r=PG", "display_name": "lucasarruda", "link": "https://stackoverflow.com/users/135767/lucasarruda"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1457644554, "post_id": 35758522, "comment_id": 59513361, "body": "I didn&#39;t add lines, I just edited a file with <code>touch</code>.  Heroku would <code>precompile</code> files but they weren&#39;t being compressed with Uglifier until I <i>touched</i> a file in the assets pipeline. I believe it is due to cache.  The problem I had with the comment in the file is just a side node, because <code>&lt;</code> fails in UglifyJS if it&#39;s included in the beginning of the fil. It has nothing to do with the main solution to the problem, it&#39;s just a common issue with compression."}], "tags": [], "owner": {"reputation": 1304, "user_id": 135767, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4a8c65887f9fed0970287904e92b3d3?s=128&d=identicon&r=PG", "display_name": "lucasarruda", "link": "https://stackoverflow.com/users/135767/lucasarruda"}, "is_accepted": true, "score": 1, "last_activity_date": 1457372887, "last_edit_date": 1495540388, "creation_date": 1456954411, "answer_id": 35758522, "question_id": 35733236, "link": "https://stackoverflow.com/questions/35733236/rails-not-minifying-js-even-though-i-set-uglifier/35758522#35758522", "title": "Rails not minifying JS even though I set uglifier", "body": "<p>I discovered I was modifying a Javascript that was not on the assets pipeline, therefore the compression/minification wouldn't trigger.</p>\n\n<p>When I modified the correct file (being loaded on <code>application.js</code>, the minification triggered correctly [0].</p>\n\n<p>So, <strong>always remember to modify a Javascript file</strong> [that is being loaded on the assets pipeline] <strong>so you trigger the compressor</strong>, otherwise Rails will use the cached javascript files and they won't be compressed. </p>\n\n<p>[0] <em>Watch also for invalid chars:</em> UglifyJS ended up failing because of a comment in the first line of a <code>.js</code> file. But after I removed the comment (<code>&lt;!-- (comment) ... -&gt;</code>), it worked properly and I could see the <code>application.js</code> minified in staging. More about it here <a href=\"https://stackoverflow.com/a/35751343/135767\">https://stackoverflow.com/a/35751343/135767</a>.</p>\n"}], "owner": {"reputation": 1304, "user_id": 135767, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4a8c65887f9fed0970287904e92b3d3?s=128&d=identicon&r=PG", "display_name": "lucasarruda", "link": "https://stackoverflow.com/users/135767/lucasarruda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1440, "favorite_count": 0, "accepted_answer_id": 35758522, "answer_count": 1, "score": 1, "last_activity_date": 1457372887, "creation_date": 1456865501, "question_id": 35733236, "link": "https://stackoverflow.com/questions/35733236/rails-not-minifying-js-even-though-i-set-uglifier", "title": "Rails not minifying JS even though I set uglifier", "body": "<p>I configured JS and CSS compressor for a project but I'm not noticing real minification of the Javascript files.</p>\n\n<p>In my <code>production.rb</code> I have:</p>\n\n<pre class=\"lang-yml prettyprint-override\"><code>config.assets.css_compressor = :sass\nconfig.assets.js_compressor = :uglifier\n</code></pre>\n\n<p>CSS seems to be all minified (not only bundled together).</p>\n\n<p>I'm deploying to Heroku and I notice that it precompile my assets and it's probably got some GZip compression too.</p>\n\n<p>But somehow JS files still got tons of spaces, variables all kept their default name, so I guess it's only bundling all files in <code>application.js</code>.</p>\n\n<p>Am I getting something wrong or that's the expected output? Should I configure something apart if I want real minification of those files?</p>\n\n<p>What I want is something similar to what is produced in <a href=\"http://jscompress.com/\" rel=\"nofollow\">http://jscompress.com/</a> or what is found on the <a href=\"http://code.jquery.com/jquery-2.2.1.min.js\" rel=\"nofollow\">minified jQuery version</a>.</p>\n\n<p>Thanks! </p>\n"}, {"tags": ["mysql", "ruby", "loops", "mysql2", "rescue"], "answers": [{"comments": [{"owner": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "edited": false, "score": 0, "creation_date": 1456865807, "post_id": 35732964, "comment_id": 59141075, "body": "Now I receive the error:  <code>Can&#39;t connect to local MySQL server through socket &#39;&#47;tmp&#47;mysql.sock&#39; (2) 2002</code>  over and over again without being able to <code>Ctrl + C</code>."}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "reply_to_user": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "edited": false, "score": 1, "creation_date": 1456866106, "post_id": 35732964, "comment_id": 59141236, "body": "Thats a totally different issue. Basically <code>mysql2</code> was not able to connect to MySQL server. And as you are rescuing and retrying, you see the error over and over again."}, {"owner": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "edited": false, "score": 0, "creation_date": 1456866368, "post_id": 35732964, "comment_id": 59141387, "body": "I gathered that I wasn&#39;t able to connect.  I should rephrase:  I want to know why I was unable to execute the following code again: <code>puts &quot;Error: please try again.&quot;   puts &quot;Enter the host, username, password and database:&quot;   hst = gets.chomp!   user = gets.chomp!   pass = gets.chomp!   db = gets.chomp!</code> after <code>retry</code>."}, {"owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "reply_to_user": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "edited": false, "score": 1, "creation_date": 1456866599, "post_id": 35732964, "comment_id": 59141524, "body": "As soon as the execution hits <code>retry</code>, it jumps to <code>begin</code> and the code after <code>retry</code> is never reached."}], "tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": true, "score": 1, "last_activity_date": 1456864611, "creation_date": 1456864611, "answer_id": 35732964, "question_id": 35732660, "link": "https://stackoverflow.com/questions/35732660/ruby-and-mysql2-looping-until-connection-is-error-free/35732964#35732964", "title": "Ruby and mysql2: Looping Until Connection is Error Free", "body": "<p><code>mysql2</code> gem has defined <code>Mysql2::Error</code>, not `Mysql2::StandardError.</p>\n\n<p>You need to rescue <code>Mysql2::Error</code></p>\n\n<p>Refer to <a href=\"https://github.com/brianmario/mysql2/blob/master/lib/mysql2/error.rb\" rel=\"nofollow\">mysql2 Github source</a> for more info.</p>\n"}], "owner": {"reputation": 308, "user_id": 5963316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86a5772242debdf0728675a5a690a373?s=128&d=identicon&r=PG&f=1", "display_name": "EVAL", "link": "https://stackoverflow.com/users/5963316/eval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 35732964, "answer_count": 1, "score": 0, "last_activity_date": 1456867986, "creation_date": 1456863649, "last_edit_date": 1456867986, "question_id": 35732660, "link": "https://stackoverflow.com/questions/35732660/ruby-and-mysql2-looping-until-connection-is-error-free", "title": "Ruby and mysql2: Looping Until Connection is Error Free", "body": "<p><em>Context</em>: I am writing a simple dynamic query in Ruby using the <code>mysql2</code> gem.</p>\n\n<p>Attempt:</p>\n\n<pre><code>#!/usr/local/bin/ruby\nrequire \"mysql2\"\n\nputs \"Please enter the title of this Report:\"\ntitle = gets.chomp\n\nMysql2::Client.default_query_options.merge!(:as =&gt; :array)\n\nputs \"Please enter the host, username, password and database in order:\"\nhst = gets.chomp\nuser = gets.chomp\npass = gets.chomp\ndb = gets.chomp\n\nbegin\n  mysql = Mysql2::Client.new(:host =&gt; hst, :username =&gt; user, :password =&gt; pass, :database =&gt; db)\nrescue Mysql2::Error =&gt; e\n    puts e.errno\n    puts e.error\n  retry\n  puts \"Error: please try again.\"\n  puts \"Enter the host, username, password and database:\"\n  hst = gets.chomp!\n  user = gets.chomp!\n  pass = gets.chomp!\n  db = gets.chomp!\nend\n\nputs \"Successfully accessed #{db}!\"\n</code></pre>\n\n<p><em>Note</em> that:</p>\n\n<pre><code>rescue Mysql2::Error =&gt; e\n    puts e.errno\n    puts e.error\n</code></pre>\n\n<p>works with the <code>mysql</code> gem, but:</p>\n\n<pre><code>rescue Mysql2::StandardError =&gt; e\n    puts e.errno\n    puts e.error\n</code></pre>\n\n<p>does <strong>not</strong> work with the <code>mysql2</code> gem.</p>\n\n<p>Finally, the error in Terminal:</p>\n\n<pre><code>iMac:workspace guy$ ruby File.rb\nPlease enter the title of this Report:\ntitle\nPlease enter the host, username, password and database in order:\n1.2.3.4\nusername15\npassword123\ndb_one\nFile.rb:19:in `rescue in &lt;main&gt;': uninitialized constant Mysql2::StandardError (NameError)\nDid you mean?  StandardError\n    from File.rb:17:in `&lt;main&gt;'\n</code></pre>\n\n<p>Edit after answer: leaving <code>:host</code> as <code>:hst</code> gave me the following error:</p>\n\n<pre><code>2002\nCan't connect to local MySQL server through socket '/tmp/mysql.sock' (2)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "user-profile"], "comments": [{"owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1456864721, "post_id": 35732636, "comment_id": 59140474, "body": "since you&#39;re using devise, you can just pass in <code>current_user</code>"}], "answers": [{"tags": [], "owner": {"reputation": 299, "user_id": 3251036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88d9e964e6d6500c8d511cde831486?s=128&d=identicon&r=PG&f=1", "display_name": "sammygadd", "link": "https://stackoverflow.com/users/3251036/sammygadd"}, "is_accepted": false, "score": 0, "last_activity_date": 1456864971, "creation_date": 1456864971, "answer_id": 35733074, "question_id": 35732636, "link": "https://stackoverflow.com/questions/35732636/no-route-matches-for-profile-page/35733074#35733074", "title": "No route matches for profile page", "body": "<p>I'm also new to rails, but my guess is that your @profile.save is unsuccessful and that @profile doesn't have an id. If it fails to save the profile to the database save will return false. So, add something like:</p>\n\n<pre><code>if @profile.save\n  redirect_to @profile\nelse\n  redirect_to 'new'\nend\n</code></pre>\n\n<p>like you do for updates.\nCould you perhaps have missed running the db migration after generating the profile model?</p>\n"}, {"tags": [], "owner": {"reputation": 5962, "user_id": 115159, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ac02a81e50f368f6d5c7a14b99ce2469?s=128&d=identicon&r=PG", "display_name": "Dharam Gollapudi", "link": "https://stackoverflow.com/users/115159/dharam-gollapudi"}, "is_accepted": false, "score": 0, "last_activity_date": 1456864978, "creation_date": 1456864978, "answer_id": 35733076, "question_id": 35732636, "link": "https://stackoverflow.com/questions/35732636/no-route-matches-for-profile-page/35733076#35733076", "title": "No route matches for profile page", "body": "<p>You need to setup <code>@profile</code> on every page request when the <code>user_signed_in?</code>, as the <code>profile_path</code> route helper in the <code>_navigation_links.html.erb</code> depends on it.</p>\n\n<p>So if the <code>user_is_signed_in?</code>, but is on the profiles_page which executes <code>ProfilesController#index</code> action, then it will fail, as you are setting <code>@profile</code> only for <code>[:show, :edit, :update, :destroy]</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 4399317, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/643d8d985b671f3eaecf32b3444861cb?s=128&d=identicon&r=PG&f=1", "display_name": "nomad", "link": "https://stackoverflow.com/users/4399317/nomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456864978, "creation_date": 1456863561, "question_id": 35732636, "link": "https://stackoverflow.com/questions/35732636/no-route-matches-for-profile-page", "title": "No route matches for profile page", "body": "<p>I am currently working on writing code to build a profile page for each user that signs into my application. However I have spent many hours and can't seem to figure this one out. Please excuse me for any lack of knowledge, I am rails beginner and still am learning.</p>\n\n<p>I would like the application to be able to view and edit their own profile. Right now when signing into the application it is providing \"No route matches {:action=>\"show\", :controller=>\"profiles\", :id=>nil} missing required keys: [:id]\"</p>\n\n<p>_navigation_links.html.erb</p>\n\n<pre><code>&lt;% if user_signed_in? %&gt;\n  &lt;li&gt;&lt;%= link_to('Sign Out', destroy_user_session_path, :method =&gt; :delete) %&gt;&lt;/li&gt;      \n  &lt;li&gt;&lt;%= link_to \"View Profile\", profile_path(@profile) %&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;%= link_to 'Edit', edit_profile_path(@profile) %&gt;&lt;/li&gt; \n&lt;% else %&gt;\n  &lt;li&gt;&lt;%= link_to \"Sign Up\", new_user_registration_path %&gt;&lt;/li&gt;\n  &lt;li&gt;&lt;%= link_to \"Sign In\", new_user_session_path %&gt;&lt;/li&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>profiles_controller.rb</p>\n\n<pre><code>class ProfilesController &lt; ApplicationController\n   before_action :find_profile, only: [:show, :edit, :update, :destroy]\n   before_action :authenticate_user!\n\ndef index\n  @profiles = Profile.all\nend\n\ndef show\n  @profile = Profile.find(params[:id])\nend\n\ndef new\n  @profile = current_user.profile.build\nend\n\ndef edit\nend\n\ndef create\n  @profile = Profile.new(profile_params)\n\n  @profile.save\n  redirect_to @profile\nend\n\ndef update\n  @profile = Profile.find(params[:id])\n if @profile.update(profile_params)\n    redirect_to @profile\n  else\n    render 'edit'\n  end \nend   \n\nprivate\n\ndef find_profile\n  @profile = Profile.find(params[:id])\nend\n\ndef profile_params\n  params.require(:profile).permit(:id, :name, :summary, :birthday, :user_id)\nend\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users\n  resources :contacts, only: [:new, :create]\n  resources :visitors, only: [:new, :create]\n  root to: 'visitors#new'\n\n  resources :posts\n  resources :profiles\n\n\nend\n</code></pre>\n\n<p>From what I am understanding the application can not find an ID for the profile page when a user is signed into the application. I am guessing that the ID needs to be created simultaneously as the user is signing up. However I am not sure how to implement this type of logic.  </p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 636, "user_id": 5543374, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ivC6J.jpg?s=128&g=1", "display_name": "Nate Anderson", "link": "https://stackoverflow.com/users/5543374/nate-anderson"}, "edited": false, "score": 0, "creation_date": 1456875645, "post_id": 35732504, "comment_id": 59145960, "body": "Thanks, works as expected. My problem was thinking that since the method was called in the same block as the rspec &#39;expect&#39; Ruby would magically understand what I was asking. I just realized I had the same problem months ago in a different context - I will remember next time."}], "tags": [], "owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "is_accepted": true, "score": 5, "last_activity_date": 1456863098, "creation_date": 1456863098, "answer_id": 35732504, "question_id": 35732419, "link": "https://stackoverflow.com/questions/35732419/unexpected-rspec-behavior/35732504#35732504", "title": "Unexpected rspec behavior", "body": "<p><code>@age</code> is a variable within each of your <code>Tree</code> objects. You're right that this is a scoping 'problem', more a scoping feature - your test has no variable named <code>@age</code>.</p>\n\n<p>What it does have is a variable called <code>@tree</code>. That <code>Tree</code> has a property called <code>age</code>. This should work, let me know if it doesn't:</p>\n\n<pre><code>describe \"Tree\" do\n\n  before :each do\n    @tree = Tree.new\n  end\n\n  describe \"#age!\" do\n    it \"ages the tree object one year per call\" do\n      10.times { @tree.age! }\n      expect(@tree.age).to eq(10) # &lt;-- Change @age to @tree.age\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 636, "user_id": 5543374, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ivC6J.jpg?s=128&g=1", "display_name": "Nate Anderson", "link": "https://stackoverflow.com/users/5543374/nate-anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 1, "accepted_answer_id": 35732504, "answer_count": 1, "score": 5, "last_activity_date": 1456867184, "creation_date": 1456862788, "last_edit_date": 1456867184, "question_id": 35732419, "link": "https://stackoverflow.com/questions/35732419/unexpected-rspec-behavior", "title": "Unexpected rspec behavior", "body": "<p>Learning Rspec, working with just Ruby, not Rails. I have a script that works as expected from the command line, but I can't get the test to pass.</p>\n\n<p>The relevant code: </p>\n\n<pre><code>  class Tree    \n  attr_accessor :height, :age, :apples, :alive\n\n  def initialize\n    @height = 2\n    @age = 0\n    @apples = false\n    @alive = true\n  end      \n\n  def age!\n    @age += 1\n  end\n</code></pre>\n\n<p>And the spec:</p>\n\n<pre><code>describe \"Tree\" do\n\n  before :each do\n    @tree = Tree.new\n  end\n\n  describe \"#age!\" do\n    it \"ages the tree object one year per call\" do\n      10.times { @tree.age! }\n      expect(@age).to eq(10)\n    end\n  end\nend\n</code></pre>\n\n<p>And the error: </p>\n\n<pre><code>  1) Tree #age! ages the tree object one year per call\n     Failure/Error: expect(@age).to eq(10)\n\n       expected: 10\n            got: nil\n\n       (compared using ==)\n</code></pre>\n\n<p>I think that is all the relevant code, please let me know if I'm missing something in the code I posted. From what I can tell the error comes from scoping within rspec, and the @age variable is not being passed into the rspec test in a way that I think it should, thus being nil when trying to call the function within the test. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "views"], "answers": [{"comments": [{"owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "edited": false, "score": 0, "creation_date": 1456861484, "post_id": 35731925, "comment_id": 59138680, "body": "Thanks. The implementation of the <code>:foo</code> method is somewhat outside the scope of this question - lets say it&#39;s something specific to my application that I choose to use in various places, even outside of views. The heart and spirit of the question is whether stubbing that out (assuming it is an initializer method) is possible"}], "tags": [], "owner": {"reputation": 1100, "user_id": 4524789, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844f22aa3a74fa8145406ea89fb77491?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Collins", "link": "https://stackoverflow.com/users/4524789/jack-collins"}, "is_accepted": false, "score": 0, "last_activity_date": 1456861123, "last_edit_date": 1495535285, "creation_date": 1456861123, "answer_id": 35731925, "question_id": 35731759, "link": "https://stackoverflow.com/questions/35731759/determining-what-class-or-instance-to-stub-in-rspec/35731925#35731925", "title": "Determining what class or instance to stub in RSpec", "body": "<p>It sounds like your <code>foo</code> method is a view helper method specifically. If that is the case, then that method does not belong in an initializer. Initializers should hold code that should be run as the application starts up (or code for monkey-patching gems). </p>\n\n<p>Methods that help with the view layer should be listed in <code>app/helpers/application_helper</code> (or a new custom file in that same directory). That's what helper files are for - view level methods.</p>\n\n<p>At that point, what you're trying to do is stub out a helper method. <a href=\"https://stackoverflow.com/questions/25001861/rspec-how-to-create-a-helper-stub-method\">This SO Question</a> as well as <a href=\"https://stackoverflow.com/questions/10537932/unable-to-stub-helper-method-with-rspec\">this one</a> should help you with that.</p>\n"}, {"comments": [{"owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "edited": false, "score": 0, "creation_date": 1457460075, "post_id": 35737455, "comment_id": 59412954, "body": "Ok, what about the 2nd part of the question: &quot;In general, how do I find the recipient of any arbitrary method so I can stub it out in a similar fashion?&quot;. Regardless of feature specs or non-feature specs, and regardless of what&#39;s considered correct, how does one even determine what class/object is going to be receiving a message?"}], "tags": [], "owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "is_accepted": false, "score": 1, "last_activity_date": 1456886403, "creation_date": 1456886403, "answer_id": 35737455, "question_id": 35731759, "link": "https://stackoverflow.com/questions/35731759/determining-what-class-or-instance-to-stub-in-rspec/35737455#35737455", "title": "Determining what class or instance to stub in RSpec", "body": "<p>From the <a href=\"https://relishapp.com/rspec/rspec-rails/v/3-4/docs/feature-specs/feature-spec\" rel=\"nofollow\">docs</a></p>\n\n<blockquote>\n  <p>Feature specs are high-level tests meant to exercise slices of functionality\n  through an application. They should drive the application only via its external\n  interface, usually web pages.</p>\n</blockquote>\n\n<p>which implies you really shouldn't be stubbing anything in a feature spec.</p>\n"}], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456886403, "creation_date": 1456860650, "question_id": 35731759, "link": "https://stackoverflow.com/questions/35731759/determining-what-class-or-instance-to-stub-in-rspec", "title": "Determining what class or instance to stub in RSpec", "body": "<p>Let's say I have a helper method in my Rails initializer, which makes it essentially available everywhere in my app</p>\n\n<pre><code># config/initializers/foo.rb\ndef foo\n  \"FOO\"\nend\n</code></pre>\n\n<p>And then I use it while rendering a view</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;%= t(\"some.translation\", link: foo) %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I want to stub that value in my <em>feature specs</em> (not view specs). That means I want have one of the following -</p>\n\n<pre><code>expect_any_instance_of(&lt;some class instance&gt;).to receive(:foo) { \"BAR\" }\nexpect(&lt;some class&gt;).to receive(:foo) { \"BAR\" }\n</code></pre>\n\n<ol>\n<li><p>What is the <code>&lt;some_class&gt;</code> or instance that I need to fill in here? What class acts as the recipient for view methods?</p></li>\n<li><p>In general, how do I find the recipient of any arbitrary method so I can stub it out in a similar fashion?</p></li>\n</ol>\n"}, {"tags": ["ruby", "webrick"], "answers": [{"comments": [{"owner": {"reputation": 7071, "user_id": 549010, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/181219cd20b8036ef8ec45b94aed6474?s=128&d=identicon&r=PG", "display_name": "Roger", "link": "https://stackoverflow.com/users/549010/roger"}, "edited": false, "score": 0, "creation_date": 1456863881, "post_id": 35731695, "comment_id": 59140035, "body": "Consider using rvm (Ruby enVironment Manager, <a href=\"https://rvm.io\" rel=\"nofollow noreferrer\">rvm.io</a>), makes your life a whole lot easier ;-)"}, {"owner": {"reputation": 1448, "user_id": 312471, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1uLVD.jpg?s=128&g=1", "display_name": "Parag", "link": "https://stackoverflow.com/users/312471/parag"}, "reply_to_user": {"reputation": 7071, "user_id": 549010, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/181219cd20b8036ef8ec45b94aed6474?s=128&d=identicon&r=PG", "display_name": "Roger", "link": "https://stackoverflow.com/users/549010/roger"}, "edited": false, "score": 0, "creation_date": 1456866465, "post_id": 35731695, "comment_id": 59141450, "body": "@Rogier will have to look into that. Thanks."}], "tags": [], "owner": {"reputation": 1448, "user_id": 312471, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1uLVD.jpg?s=128&g=1", "display_name": "Parag", "link": "https://stackoverflow.com/users/312471/parag"}, "is_accepted": true, "score": 5, "last_activity_date": 1456860408, "creation_date": 1456860408, "answer_id": 35731695, "question_id": 35731694, "link": "https://stackoverflow.com/questions/35731694/simple-ruby-hello-world-program-for-webrick-using-virtual-hosts/35731695#35731695", "title": "Simple Ruby &quot;Hello, World&quot; Program for Webrick Using Virtual Hosts", "body": "<p>To get started, I installed Ruby with the Ubuntu package manager. If you are using CentOS or another Linux distribution, you can adapt this step to your particular package manager. Also make sure port 80 is open on your web server. It's possible to get SSL with Webrick but I chose not to at this point.</p>\n\n<pre><code>sudo apt-get install ruby\n</code></pre>\n\n<p>Here is the script which I named <code>myapp.rb</code> that I am using. I placed it <code>/var/www/myapp</code>. Ideally, I think it should not be in document root. You should also create a special user and group just to run the script to improve security (I have not outlined those steps here)</p>\n\n<pre><code>require 'webrick'\n\nserver = WEBrick::HTTPServer.new(:Port =&gt; 80,\n                             :SSLEnable =&gt; false,\n                             :DocumentRoot =&gt; '/var/www/myapp',\n                             :ServerAlias =&gt; 'myapp.example.com')\n\nserver.mount_proc '/' do |req, res|\n  res.body = 'Hello, world!'\nend\n\ntrap 'INT' do server.shutdown end\n\nserver.start\n</code></pre>\n\n<p>The <code>require</code> statement above tells Ruby to include the Webrick classes when running the program. The second line of the script creates an instance of Webrick with the following options:</p>\n\n<ul>\n<li>Use Port 80</li>\n<li>Disable SSL</li>\n<li>Set the document root to <code>/var/www/myapp</code></li>\n<li>Set the Server Alias to <code>myapp.example.com</code></li>\n</ul>\n\n<p>Of course, you'll have to configure your particular domains DNS'. The <code>server.mount_proc</code> is telling Ruby to serve the response, \"Hello, world\" at document root. I think you can specify a subdirectory there if you life. The Ruby Webrick documentation above has information on that.</p>\n\n<p>The line that begins with <code>trap</code> means that the web server can be stopped with Ctrl-C. To start the script I typed the following at the SSH command line:</p>\n\n<pre><code>ruby myapp.rb\n</code></pre>\n"}], "owner": {"reputation": 1448, "user_id": 312471, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/1uLVD.jpg?s=128&g=1", "display_name": "Parag", "link": "https://stackoverflow.com/users/312471/parag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1161, "favorite_count": 2, "accepted_answer_id": 35731695, "answer_count": 1, "score": 3, "last_activity_date": 1456860408, "creation_date": 1456860408, "last_edit_date": 1495540795, "question_id": 35731694, "link": "https://stackoverflow.com/questions/35731694/simple-ruby-hello-world-program-for-webrick-using-virtual-hosts", "title": "Simple Ruby &quot;Hello, World&quot; Program for Webrick Using Virtual Hosts", "body": "<p>I searched the internet for a \"Hello, World\" type program for Webrick in Ruby, but could not find anything that worked. I found <a href=\"https://stackoverflow.com/questions/6397515/how-to-run-a-simple-ruby-script-in-any-web-server-apache-or-mongrel-or-any-thin\">this guide on SO</a> but for the life of me could not get it to work.</p>\n\n<p>Consulting the <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/webrick/rdoc/WEBrick.html\" rel=\"nofollow noreferrer\">Ruby Documentation for Webrick</a> led me to some code snippets that got me going in the right direction. There were no easy-to-follow tutorials so I wanted to add my answer on SO.</p>\n\n<p>I was using Ubuntu 14.04 without Apache or Nginx and wanted my server for a virtual host. Webrick by default does not respond to requests concurrently but for me this was a plus in addition to its small footprint. I was hoping to get it working without the Rails framework for an even lighter footprint.</p>\n"}]