[{"tags": ["ruby-on-rails", "ruby", "decorator"], "answers": [{"comments": [{"owner": {"reputation": 1444, "user_id": 1291456, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e994ba9cd1f5b84619f8ed06181288fd?s=128&d=identicon&r=PG", "display_name": "jmoreira", "link": "https://stackoverflow.com/users/1291456/jmoreira"}, "edited": false, "score": 0, "creation_date": 1461200385, "post_id": 36757361, "comment_id": 61095267, "body": "It kinda works, it returns the &#39;decorated methods&#39; and also <code>method_missing</code> but this is not difficult to exclude. Is there a way to do something like this without using an initializer? Let&#39;s say create a regular instance method in the decorator or maybe put it in a mixin or a base class which is then inherited by the decorator?"}, {"owner": {"reputation": 1444, "user_id": 1291456, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e994ba9cd1f5b84619f8ed06181288fd?s=128&d=identicon&r=PG", "display_name": "jmoreira", "link": "https://stackoverflow.com/users/1291456/jmoreira"}, "edited": false, "score": 0, "creation_date": 1461206225, "post_id": 36757361, "comment_id": 61096669, "body": "end up making a method inside the class instead of monkey patching removing method missing from the list!"}, {"owner": {"reputation": 14629, "user_id": 21115, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d5e190845525aa75c8da275c072c23be?s=128&d=identicon&r=PG", "display_name": "davetapley", "link": "https://stackoverflow.com/users/21115/davetapley"}, "reply_to_user": {"reputation": 1444, "user_id": 1291456, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e994ba9cd1f5b84619f8ed06181288fd?s=128&d=identicon&r=PG", "display_name": "jmoreira", "link": "https://stackoverflow.com/users/1291456/jmoreira"}, "edited": false, "score": 0, "creation_date": 1461263280, "post_id": 36757361, "comment_id": 61131755, "body": "I suspect the <code>method_missing</code> occurs as a result of Draper&#39;s <a href=\"https://github.com/drapergem/draper#delegating-methods\" rel=\"nofollow noreferrer\"><code>delegate</code></a> functionality."}, {"owner": {"reputation": 14629, "user_id": 21115, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d5e190845525aa75c8da275c072c23be?s=128&d=identicon&r=PG", "display_name": "davetapley", "link": "https://stackoverflow.com/users/21115/davetapley"}, "reply_to_user": {"reputation": 1444, "user_id": 1291456, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e994ba9cd1f5b84619f8ed06181288fd?s=128&d=identicon&r=PG", "display_name": "jmoreira", "link": "https://stackoverflow.com/users/1291456/jmoreira"}, "edited": false, "score": 1, "creation_date": 1461263406, "post_id": 36757361, "comment_id": 61131840, "body": "FYI there&#39;s more explanation of the monkey patching approach I used <a href=\"http://stackoverflow.com/questions/4470108/when-monkey-patching-a-method-can-you-call-the-overridden-method-from-the-new-i/4471202#4471202\">here</a>."}, {"owner": {"reputation": 1444, "user_id": 1291456, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e994ba9cd1f5b84619f8ed06181288fd?s=128&d=identicon&r=PG", "display_name": "jmoreira", "link": "https://stackoverflow.com/users/1291456/jmoreira"}, "edited": false, "score": 0, "creation_date": 1461327840, "post_id": 36757361, "comment_id": 61161840, "body": "nice question out there in the link!"}], "tags": [], "owner": {"reputation": 14629, "user_id": 21115, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d5e190845525aa75c8da275c072c23be?s=128&d=identicon&r=PG", "display_name": "davetapley", "link": "https://stackoverflow.com/users/21115/davetapley"}, "is_accepted": true, "score": 1, "last_activity_date": 1461197252, "last_edit_date": 1495540778, "creation_date": 1461197252, "answer_id": 36757361, "question_id": 36757108, "link": "https://stackoverflow.com/questions/36757108/list-of-decorated-methods-when-using-draper-decorators/36757361#36757361", "title": "List of decorated methods when using draper decorators", "body": "<p>You could <a href=\"https://stackoverflow.com/a/4471202/21115\">monkey patch</a> it in to Draper, e.g:</p>\n\n<p>Put this in <code>config/initializers/draper.rb</code>:</p>\n\n<pre><code> module DraperExtensions\n   def decorated_methods\n     instance_methods.to_set - Draper::Decorator.instance_methods.to_set   \n   end\n end\n\n Draper::Decorator.extend DraperExtensions\n</code></pre>\n\n<p>Then you will be able to call:</p>\n\n<pre><code>ADecorator.decorated_methods\n</code></pre>\n"}], "owner": {"reputation": 1444, "user_id": 1291456, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e994ba9cd1f5b84619f8ed06181288fd?s=128&d=identicon&r=PG", "display_name": "jmoreira", "link": "https://stackoverflow.com/users/1291456/jmoreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 36757361, "answer_count": 1, "score": 0, "last_activity_date": 1461211238, "creation_date": 1461195630, "last_edit_date": 1461211238, "question_id": 36757108, "link": "https://stackoverflow.com/questions/36757108/list-of-decorated-methods-when-using-draper-decorators", "title": "List of decorated methods when using draper decorators", "body": "<p>I need way to get an array of names of all decorated methods created in a <strong><a href=\"https://github.com/drapergem/draper\" rel=\"nofollow\">draper</a></strong> decorator instance.</p>\n\n<p>If i have two classes like:</p>\n\n<pre><code>class A\n  def foo\n  end\nend\n\nclass ADecorator &lt; Draper::Decorator\n  def bar\n  end\n\n  def hi\n  end\nend\n</code></pre>\n\n<p>Then i want to do something like:</p>\n\n<pre><code>decorated = ADecorator.decorate(A.new)\ndecorated.decorated_methods # =&gt; [:bar, :hi]\n</code></pre>\n\n<p>Closest to this is ruby's builtin <code>instance_methods</code> method but it returns both base object methods and decorator methods (In this example returns <code>[:foo, :bar, :hi]</code>)</p>\n"}, {"tags": ["ruby", "proc"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5705441, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207773797971299/picture?type=large", "display_name": "Jay Wang", "link": "https://stackoverflow.com/users/5705441/jay-wang"}, "edited": false, "score": 0, "creation_date": 1461195952, "post_id": 36757115, "comment_id": 61094118, "body": "Thank you for clearing it up, I think I thought passing in an empty block like {} would make the prc in prc or equal statement false, now I understand"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1461195658, "creation_date": 1461195658, "answer_id": 36757115, "question_id": 36756930, "link": "https://stackoverflow.com/questions/36756930/not-understanding-this-background-process-of-proc/36757115#36757115", "title": "Not understanding this background process of Proc", "body": "<p>The reason is simple: your block is empty, it doesn't do anything.</p>\n\n<p>If you want to print the individual items, you need to either print them in the block:</p>\n\n<pre><code>puts [\"apple\", \"banana\"].my_each {|el| puts el }\n# apple\n# banana\n# apple\n# banana\n</code></pre>\n\n<p>or don't pass a block so that your default block fires:</p>\n\n<pre><code>puts [\"apple\", \"banana\"].my_each\n# apple\n# banana\n# apple\n# banana\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5705441, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207773797971299/picture?type=large", "display_name": "Jay Wang", "link": "https://stackoverflow.com/users/5705441/jay-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461196309, "creation_date": 1461194474, "last_edit_date": 1461196309, "question_id": 36756930, "link": "https://stackoverflow.com/questions/36756930/not-understanding-this-background-process-of-proc", "title": "Not understanding this background process of Proc", "body": "<p>I came across solving a problem and my solution was below.</p>\n\n<pre><code>    class Array\n      def my_each(&amp;prc)\n        prc ||= proc { |ele| puts ele }\n        idx = 0\n        while idx &lt; self.length\n          prc.call(self[idx])\n          idx += 1\n        end\n        self\n      end\n    end\n\n    puts [\"apple\", \"banana\"].my_each {}   #=&gt; [\"apple, \"banana\"]\n</code></pre>\n\n<p>My question is, why isn't the result </p>\n\n<pre><code>    #=&gt;\"apple\" \n    #=&gt;\"banana\"  \n    #=&gt;[\"apple\", \"banana\"]\n</code></pre>\n\n<p>is this because my block isn't run and only the self was returned? </p>\n"}, {"tags": ["ruby", "regex", "string"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 5, "creation_date": 1461194016, "post_id": 36756819, "comment_id": 61093616, "body": "<code>Regexp.new</code> should NOT work that way, because one could not use &quot;special&quot; regex constructs then. Also, I think <code>include</code> will do the same job. Check <a href=\"http://stackoverflow.com/questions/8258517/how-to-check-whether-a-string-contains-a-substring-in-ruby\"><i>How to check whether a string contains a substring in Ruby?</i></a>"}, {"owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1461194671, "post_id": 36756819, "comment_id": 61093776, "body": "<code>String::include?</code> is the best way to match a <code>String</code> against another <code>String</code>, but I don&#39;t think it can output a <code>Regexp</code>. I buy your point about <code>Regexp.new</code>, though."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1461194831, "post_id": 36756819, "comment_id": 61093816, "body": "The point is, you do not need a <code>Regexp</code>  at all to check if a literal <code>String</code> is present inside another <code>String</code>. That is redundant complication/overhead."}, {"owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1461195166, "post_id": 36756819, "comment_id": 61093916, "body": "Sure, but that might not be my goal. For example, if I&#39;m using some gem whose API expects a <code>Regexp</code> as input, then neither <code>&quot;foo(bar)&quot;</code> nor <code>Regexp.new(&quot;foo(bar)&quot;)</code> will do the trick."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1461196369, "post_id": 36756819, "comment_id": 61094229, "body": "String&#39;s <code>[]</code> allows either fixed strings or regexp, as does <code>gsub</code> and <code>sub</code>. An API that is restrictive when the class itself allows either seems too rigid."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1461213775, "post_id": 36756819, "comment_id": 61098738, "body": "How can you use <code>include?</code> in place of <code>&quot;chacha&quot;.scan(&#47;cha&#47;) #=&gt; [&quot;cha&quot;, &quot;cha&quot;]</code>? btw, <code>String::include?</code> references a class method of <code>String</code>. The reference you want (for an instance method) is <code>String#include?</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1461219463, "post_id": 36756819, "comment_id": 61100865, "body": "Most regular expression libraries I&#39;ve used take strings that represent regular expressions and if you have special characters in them then it&#39;s your responsibility to escape them either manually, or using the <code>escape</code> method. You could always patch in your own <code>Regexp.string</code> method if you like."}, {"owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1461279958, "post_id": 36756819, "comment_id": 61140255, "body": "@CarySwoveland Good catch, that comment should say <code>String#include?</code>. @tadman @theTinMan Yes, I&#39;m starting to see your point. In most cases, converting a String to a Regex in this manner is not necessary. Let me consider if there&#39;s a way I can change the answer (or the question) so that this is useful to future visitors here. I&#39;m sure I&#39;m not the only person to think about this. :)"}, {"owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1461283934, "post_id": 36756819, "comment_id": 61141281, "body": "@tadman @theTinMan Does the new answer satisfy your concerns? If so, I suppose we should throw away my dangerous first answer (about <code>::union</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1461336871, "post_id": 36782521, "comment_id": 61168361, "body": "Be careful here. <code>&quot;\\d&quot;</code> is a <i>literal</i> <code>d</code> in string, but <code>&#47;\\d&#47;</code> is a digit in a regular expression context. You need <code>&quot;\\\\d&quot;</code> in this case."}, {"owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1461391178, "post_id": 36782521, "comment_id": 61187918, "body": "Yep, that&#39;s what I get for not testing code before posting it."}, {"owner": {"reputation": 11365, "user_id": 322427, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a447076c87e22474d3b811b8da1d295a?s=128&d=identicon&r=PG", "display_name": "Jakob Egger", "link": "https://stackoverflow.com/users/322427/jakob-egger"}, "edited": false, "score": 0, "creation_date": 1488987079, "post_id": 36782521, "comment_id": 72475324, "body": "I don&#39;t think this is correct. <code>&quot;foo(bar)&quot;.match(&quot;foo(bar)&quot;) =&gt; nil</code>, but <code>&quot;foo(bar)&quot;.match(Regexp.escape(&quot;foo(bar)&quot;)) =&gt; #&lt;MatchData &quot;foo(bar)&quot;&gt;</code>"}], "tags": [], "owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1461391191, "last_edit_date": 1461391191, "creation_date": 1461283820, "answer_id": 36782521, "question_id": 36756819, "link": "https://stackoverflow.com/questions/36756819/convert-string-to-regexp-in-ruby/36782521#36782521", "title": "Convert String to Regexp in Ruby", "body": "<p><strong>You should never need to run <code>Regexp.new(Regexp.escape(string))</code></strong> This is because, in Core and StdLib, practically every method that takes a Regexp also takes a String (as it should).</p>\n\n<p>In the original case, if you're trying to match a big String <code>big_string</code> on a wacky string with special characters like <code>\"foo(bar)\"</code>, you can just run <code>big_string.match(\"foo(bar)\")</code>.</p>\n\n<p>If you're trying to do something fancier, you might need use both <code>::escape</code> and <code>::new</code>, but <em>never</em> in direct composition. For example, if we want to match <code>big_string</code> on a wacky string followed by a lone digit, we'll run <code>Regexp.new(Regexp.escape(string) + \"\\\\d\")</code>.</p>\n"}], "owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1790, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461391191, "creation_date": 1461193838, "last_edit_date": 1461196233, "question_id": 36756819, "link": "https://stackoverflow.com/questions/36756819/convert-string-to-regexp-in-ruby", "title": "Convert String to Regexp in Ruby", "body": "<p>I frequently need to convert a String into a Regexp. For many strings, <code>Regexp.new(string)</code> is sufficient. But if <code>string</code> contains special characters, they need to be escaped:</p>\n\n<pre><code>string = \"foo(bar)\"\nregex = Regexp.new(string) # =&gt; /foo(bar)/\n!!regex.match(string) # =&gt; false\n</code></pre>\n\n<p>The Regexp class has a nice way to escape all characters that are special to regex: <a href=\"http://ruby-doc.org/core-2.2.0/Regexp.html#method-c-escape\" rel=\"nofollow\"><code>Regexp.escape</code></a>. It's used like so:</p>\n\n<pre><code>string = \"foo(bar)\"\nescaped_string = Regexp.escape(string) # =&gt; \"foo\\\\(bar\\\\)\"\nregex = Regexp.new(escaped_string) # =&gt; /foo\\(bar\\)/ \n!!regex.match(string) # =&gt; true\n</code></pre>\n\n<p>This really seems like this should be the default way <code>Regexp.new</code> works. Is there a better way to convert a String to a Regexp, besides <code>Regexp.new(Regexp.escape(string))</code>? This <em>is</em> Ruby, after all.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 473, "user_id": 4652341, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/32d243374ec979900e471874a9dc7ad9?s=128&d=identicon&r=PG&f=1", "display_name": "James N", "link": "https://stackoverflow.com/users/4652341/james-n"}, "edited": false, "score": 0, "creation_date": 1461266445, "post_id": 36756970, "comment_id": 61133571, "body": "thanks for the help. I switched and made them class methods, and that still did not work :("}], "tags": [], "owner": {"reputation": 180, "user_id": 942439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db58f8e241b2dc847511f62fd324b5d?s=128&d=identicon&r=PG", "display_name": "K.M.", "link": "https://stackoverflow.com/users/942439/k-m"}, "is_accepted": false, "score": -2, "last_activity_date": 1461194751, "creation_date": 1461194751, "answer_id": 36756970, "question_id": 36756742, "link": "https://stackoverflow.com/questions/36756742/railsmailerscontrollerpreview-wrong-number-of-arguments-0-for-1/36756970#36756970", "title": "Rails::MailersController#preview wrong number of arguments (0 for 1)", "body": "<p>If you're calling class method and not instance method then it should be</p>\n\n<pre><code> def self.account_activation(user)\n   @user = user\n   mail to: user.email, subject: \"Account activation\"\n end\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>UserMailer.account_activation(user)\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 4652341, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/32d243374ec979900e471874a9dc7ad9?s=128&d=identicon&r=PG&f=1", "display_name": "James N", "link": "https://stackoverflow.com/users/4652341/james-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461213415, "creation_date": 1461193452, "question_id": 36756742, "link": "https://stackoverflow.com/questions/36756742/railsmailerscontrollerpreview-wrong-number-of-arguments-0-for-1", "title": "Rails::MailersController#preview wrong number of arguments (0 for 1)", "body": "<p>I am working through the rails tutorial, and am on chapter 10 setting up mailers. Right now I am on the account_activation email. To ensure I am setting it up the correct way, I have even double checked my code based on the <a href=\"https://github.com/mhartl/sample_app_3rd_edition\" rel=\"nofollow\">sample repo</a>, and I am setting it up just like he has. </p>\n\n<p>The full error is: <code>ArgumentError in Rails::MailersController#preview wrong number of arguments (0 for 1)</code> and is pointing to the code in my <code>user_mailer#account_activation</code> method</p>\n\n<pre><code> def account_activation(user) #here \n   @user = user\n   mail to: user.email, subject: \"Account activation\"\n end\n</code></pre>\n\n<p>the test code this is checking against is this</p>\n\n<pre><code>class UserMailerPreview &lt; ActionMailer::Preview\n  # Preview this email at http://localhost:3000/rails/mailers/user_mailer/account_activation\n  def account_activation\n    user = User.first\n    user.activation_token = User.new_token\n    UserMailer.account_activation(user) #setting up the method call here\n  end\nend\n</code></pre>\n\n<p>I am not sure why this is happening, because I pass the correct number of arguments via <code>UserMailer.account_activation(user)</code>. My only guess is maybe it could be looking at the <code>UserMailerPreview#account_activation</code> (which takes no argument) method and is trying to mirror the method at <code>UserMailer#account_activation</code> which does take an argument. </p>\n\n<p>Does anyone see what I'm doing wrong? Any help at all would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "simple-form"], "comments": [{"owner": {"reputation": 2401, "user_id": 2208682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fac145ccb00fbe71298cf953cbd43b?s=128&d=identicon&r=PG", "display_name": "GoGoCarl", "link": "https://stackoverflow.com/users/2208682/gogocarl"}, "edited": false, "score": 0, "creation_date": 1461192963, "post_id": 36756506, "comment_id": 61093279, "body": "Change <code>find_by_id</code> to <code>find</code> ... could be wrong, but my guess is that the row does not exist; if so, <code>find</code> will blow up (properly, as you don&#39;t want to continue in this case anyway); <code>find_by_id</code> will just set things to <code>nil</code>, which will non-deterministically blow up somewhere along the way."}, {"owner": {"reputation": 303, "user_id": 3731344, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ea6a9595bbf469193d65a796c0313e8a?s=128&d=identicon&r=PG&f=1", "display_name": "ayounis90", "link": "https://stackoverflow.com/users/3731344/ayounis90"}, "reply_to_user": {"reputation": 2401, "user_id": 2208682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fac145ccb00fbe71298cf953cbd43b?s=128&d=identicon&r=PG", "display_name": "GoGoCarl", "link": "https://stackoverflow.com/users/2208682/gogocarl"}, "edited": false, "score": 0, "creation_date": 1461193312, "post_id": 36756506, "comment_id": 61093389, "body": "That definitely worked, please answer below so i can mark it as a solution! thanks so much! By the way, is there a way for find_by_id to &#39;blow up&#39; so I can get the same error? @GoGoCarl"}, {"owner": {"reputation": 2401, "user_id": 2208682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fac145ccb00fbe71298cf953cbd43b?s=128&d=identicon&r=PG", "display_name": "GoGoCarl", "link": "https://stackoverflow.com/users/2208682/gogocarl"}, "edited": false, "score": 0, "creation_date": 1461193864, "post_id": 36756506, "comment_id": 61093564, "body": "Thanks.  See below for details on your second question.  <code>find_by_id</code> won&#39;t ever blow up, it&#39;ll always return <code>nil</code> if the record isn&#39;t found. But you can handle that case manually."}], "answers": [{"tags": [], "owner": {"reputation": 2401, "user_id": 2208682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fac145ccb00fbe71298cf953cbd43b?s=128&d=identicon&r=PG", "display_name": "GoGoCarl", "link": "https://stackoverflow.com/users/2208682/gogocarl"}, "is_accepted": true, "score": 2, "last_activity_date": 1461193806, "creation_date": 1461193806, "answer_id": 36756812, "question_id": 36756506, "link": "https://stackoverflow.com/questions/36756506/rails-undefined-method-model-name-for-nilnilclass-with-nested-attributes/36756812#36756812", "title": "Rails undefined method &#39;model_name&#39; for nil:nilClass with nested attributes", "body": "<p>Current implementation is prone to failure when the URL supplied either a reservation ID or an order ID that is not valid.  Two ways to handle this:</p>\n\n<p>First, let Rails do it for you:</p>\n\n<pre><code>def edit\n  @reservation = Reservation.find(params[:reservation_id])\n  @order       = Order.find(params[:id])\nend\n</code></pre>\n\n<p>This will raise an <code>ActiveRecord::RecordNotFound</code> error, which, in production, should lead users to your 404 page.</p>\n\n<p>If you'd prefer to keep <code>find_by_id</code> and handle this manually, or to rescue from this error in a different way, you can do:</p>\n\n<pre><code>def edit\n  @reservation = Reservation.find_by_id(params[:reservation_id])\n  @order       = Order.find_by_id(params[:id])\n\n  if @reservation.nil? || @order.nil?\n    raise ActiveRecord::RecordNotFound.new # Or, do something else\n  end\nend\n</code></pre>\n\n<p>That would yield the same result as above ... just more code.</p>\n"}], "owner": {"reputation": 303, "user_id": 3731344, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ea6a9595bbf469193d65a796c0313e8a?s=128&d=identicon&r=PG&f=1", "display_name": "ayounis90", "link": "https://stackoverflow.com/users/3731344/ayounis90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 36756812, "answer_count": 1, "score": 1, "last_activity_date": 1461193806, "creation_date": 1461192128, "last_edit_date": 1461192595, "question_id": 36756506, "link": "https://stackoverflow.com/questions/36756506/rails-undefined-method-model-name-for-nilnilclass-with-nested-attributes", "title": "Rails undefined method &#39;model_name&#39; for nil:nilClass with nested attributes", "body": "<p>I have in my <strong>orders/edit.html.erb</strong> a form that begins like this:</p>\n\n<pre><code>&lt;%= simple_form_for [@reservation, @order] do |f| %&gt;\n</code></pre>\n\n<p><strong>Orders Controller:</strong></p>\n\n<pre><code>def edit\n  @reservation = Reservation.find_by_id(params[:reservation_id])\n  @order       = Order.find_by_id(params[:id])\nend\n</code></pre>\n\n<p><strong>Association:</strong></p>\n\n<p>Reservation <code>:has_one</code> Order</p>\n\n<p><strong>Routes:</strong></p>\n\n<pre><code>resources :reservations do\n  resources :orders \nend\n</code></pre>\n\n<p>If my path resembles something like <code>/reservations/10/orders/10/edit</code> I end up getting an error from Rails saying <code>NoMethodError in Orders#edit</code> and <code>undefined method 'model_name' for nil:NilClass</code> </p>\n\n<p>When I create a new order the form works perfectly fine so not sure why i'm getting an error all of a sudden, can someone help me with this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "passenger"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 1, "creation_date": 1461189904, "post_id": 36756050, "comment_id": 61092160, "body": "See your <code>log&#47;production.log</code> file for exact errors."}, {"owner": {"reputation": 35, "user_id": 2859979, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b053b2b5f1d49837186ac82cb3969f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/2859979/alan"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461190191, "post_id": 36756050, "comment_id": 61092264, "body": "@Uzbekjon The log/production.log contains this:  D, [2016-04-20T13:47:17.810796 #17104] DEBUG -- :   ActiveRecord::SchemaMigration Load (0.7ms)  SELECT <code>schema_migrations</code>.* FROM <code>schema_migrations</code> D, [2016-04-20T13:47:26.763094 #17140] DEBUG -- :   ActiveRecord::SchemaMigration Load (0.1ms)  SELECT <code>schema_migrations</code>.* FROM <code>schema_migrations</code> D, [2016-04-20T13:59:40.486879 #4955] DEBUG -- :   ActiveRecord::SchemaMigration Load (0.7ms)  SELECT <code>schema_migrations</code>.* FROM <code>schema_migrations</code>"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461192339, "post_id": 36756050, "comment_id": 61093047, "body": "Did you create and migrated your db in production environment (<code>rake db:setup RAILS_ENV=production</code>)?"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 2859979, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b053b2b5f1d49837186ac82cb3969f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/2859979/alan"}, "edited": false, "score": 0, "creation_date": 1461194624, "post_id": 36756828, "comment_id": 61093765, "body": "Thank you @Hugo, I ran the comment but did not work. I configured the database.yml and could migrate correctly.  Appears this error:  /home/myusername/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/g&zwnj;&#8203;ems/actionpack-4.2.4&zwnj;&#8203;/lib/action_controll&zwnj;&#8203;er/metal/request_for&zwnj;&#8203;gery_protection.rb:1&zwnj;&#8203;14:in `rescue in protection_method_class&#39;: Invalid request forgery protection method, use :null_session, :exception, or :reset_session (ArgumentError)"}, {"owner": {"reputation": 1879, "user_id": 2093129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98c9d0718b2ff36518d8896059ecfa34?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/2093129/hugo"}, "reply_to_user": {"reputation": 35, "user_id": 2859979, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b053b2b5f1d49837186ac82cb3969f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/2859979/alan"}, "edited": false, "score": 0, "creation_date": 1461195362, "post_id": 36756828, "comment_id": 61093973, "body": "Maybe this can help you: <a href=\"http://stackoverflow.com/questions/6918879/nil-in-request-forgery-protection-when-trying-to-render-a-form-in-rails-3\" title=\"nil in request forgery protection when trying to render a form in rails 3\">stackoverflow.com/questions/6918879/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1879, "user_id": 2093129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98c9d0718b2ff36518d8896059ecfa34?s=128&d=identicon&r=PG", "display_name": "Hugo", "link": "https://stackoverflow.com/users/2093129/hugo"}, "is_accepted": false, "score": 1, "last_activity_date": 1461193863, "creation_date": 1461193863, "answer_id": 36756828, "question_id": 36756050, "link": "https://stackoverflow.com/questions/36756050/how-to-enable-production-mode-in-ruby-on-rails/36756828#36756828", "title": "How to enable production mode in ruby on rails?", "body": "<p>Assuming you have your production database information correctly defined in <strong>config/database.yml</strong></p>\n\n<p>You can start Rails in Production mode by launching your application like this:</p>\n\n<pre><code>$ rails s -e production -p 80 --bind=0.0.0.0\n</code></pre>\n\n<p>More information about Rails environment settings can be found here: <a href=\"http://guides.rubyonrails.org/configuring.html\" rel=\"nofollow\">http://guides.rubyonrails.org/configuring.html</a> </p>\n"}], "owner": {"reputation": 35, "user_id": 2859979, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b053b2b5f1d49837186ac82cb3969f6f?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/2859979/alan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461193863, "creation_date": 1461189812, "question_id": 36756050, "link": "https://stackoverflow.com/questions/36756050/how-to-enable-production-mode-in-ruby-on-rails", "title": "How to enable production mode in ruby on rails?", "body": "<p>Hi I want to know what I need to do in order to enable the production mode in RoR.</p>\n\n<p>When I add the line RailsEnv production to my Apache, after restart it I get an error message \"We're sorry, but something went wrong. apache ruby\".</p>\n\n<p>The logs are empty, I migrated the db in production mode, compiled the assets, set RAILS_ENV to install all, but I can not run in production, in development works fine.</p>\n\n<p>I use Apache2 + Passenger. Would you help me?</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "api", "rest"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461191717, "post_id": 36755781, "comment_id": 61092832, "body": "If you&#39;re saving the JSON in &quot;pretty format&quot;, to allow humans to edit it, you should instead use YAML. It&#39;s much more readable. JSON is great when transferring data between apps, but formatting it for readability can really increase the file size, causing it to use more CPU, more network bandwidth and app time."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461192098, "post_id": 36755781, "comment_id": 61092964, "body": "Don&#39;t name a class &quot;Rest&quot;. &quot;RestResponse&quot; would be better since classes should be &quot;things&quot;. Instead of <code>getData</code>, you should use <code>get_data</code>. In Ruby we use snake_case to name variables and methods. Instead of <code>open</code> and <code>write</code> in a block, simply use <code>File.write(&#39;file.txt&#39;, response.to_json)</code>."}, {"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461192132, "post_id": 36755781, "comment_id": 61092978, "body": "That sounds like a good piece of advice, I am not really sure what I&#39;ll be using JSON for just joined a new QA team and I&#39;ve only used xml to hold parameters in the passed. But got told to look into it."}, {"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461192494, "post_id": 36755781, "comment_id": 61093105, "body": "Thanks for the pointers on class names and snake_case I will adjust myself accordingly, however, is it not good to use blocks for breakdown of code? As in keeping the code organised?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461194504, "post_id": 36755781, "comment_id": 61093730, "body": "Blocks are useful for that, but you&#39;re wasting code to do something very simple. You&#39;re basically doing a write, so just do that using <a href=\"http://ruby-doc.org/core-2.3.0/IO.html#method-c-write\" rel=\"nofollow noreferrer\"><code>File.write</code></a>. <i>Note:</i> It&#39;s defined in IO but File inherits from IO, and you&#39;ll usually see it accessed from File."}], "answers": [{"comments": [{"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1461189719, "post_id": 36755854, "comment_id": 61092078, "body": "Thanks, this works nicely when puts to the console, however, how do I add this in when writing to JSON file? @JLB"}, {"owner": {"reputation": 299, "user_id": 3251036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88d9e964e6d6500c8d511cde831486?s=128&d=identicon&r=PG&f=1", "display_name": "sammygadd", "link": "https://stackoverflow.com/users/3251036/sammygadd"}, "edited": false, "score": 0, "creation_date": 1461190325, "post_id": 36755854, "comment_id": 61092303, "body": "f.write(JSON.pretty_generate(response))"}, {"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "reply_to_user": {"reputation": 299, "user_id": 3251036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88d9e964e6d6500c8d511cde831486?s=128&d=identicon&r=PG&f=1", "display_name": "sammygadd", "link": "https://stackoverflow.com/users/3251036/sammygadd"}, "edited": false, "score": 0, "creation_date": 1461190387, "post_id": 36755854, "comment_id": 61092331, "body": "@sammygadd I just did this, I forgot to add it, I now get `generate&#39;: only generation of JSON objects or arrays allowed (JSON::GeneratorError)"}, {"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1461190490, "post_id": 36755854, "comment_id": 61092369, "body": "Never-mind Just solved the issue, Thanks a lot for the help."}, {"owner": {"reputation": 179, "user_id": 5115752, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/7tls6.jpg?s=128&g=1", "display_name": "Jacob Crofts", "link": "https://stackoverflow.com/users/5115752/jacob-crofts"}, "reply_to_user": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1461434805, "post_id": 36755854, "comment_id": 61201736, "body": "I think I made the same mistake (calling .to_json on the response). @Speedychuck"}], "tags": [], "owner": {"reputation": 322, "user_id": 6062644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c3MLX.jpg?s=128&g=1", "display_name": "JLB", "link": "https://stackoverflow.com/users/6062644/jlb"}, "is_accepted": true, "score": 2, "last_activity_date": 1461192150, "last_edit_date": 1461192150, "creation_date": 1461188986, "answer_id": 36755854, "question_id": 36755781, "link": "https://stackoverflow.com/questions/36755781/ruby-api-json-parsing-writing-to-file/36755854#36755854", "title": "Ruby API - JSON Parsing - Writing to file", "body": "<p>Use <code>pretty_generate</code>, which will format the JSON in a more human-friendly format.</p>\n\n<p>See the <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/json/rdoc/JSON.html#method-i-pretty_generate\" rel=\"nofollow\"><code>pretty_generate</code></a> documentation.</p>\n"}], "owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1303, "favorite_count": 1, "closed_date": 1461192212, "accepted_answer_id": 36755854, "answer_count": 1, "score": 3, "last_activity_date": 1461192150, "creation_date": 1461188721, "last_edit_date": 1461191924, "question_id": 36755781, "link": "https://stackoverflow.com/questions/36755781/ruby-api-json-parsing-writing-to-file", "closed_reason": "Duplicate", "title": "Ruby API - JSON Parsing - Writing to file", "body": "<p>I  get the REST response data from a URL. I then write it to a JSON file, however, it's put it on one line in a long string, and I need to have it in readable format in the JSON file.</p>\n\n<p>My code is:</p>\n\n<pre><code>require 'rubygems'\nrequire 'json'\nrequire 'rest-client'\n\nclass Rest\n\n  def self.getData\n\n    response = RestClient.get 'http://jsonplaceholder.typicode.com/posts'\n    response = JSON.parse(response)\n\n    File.open('/Users/robertreed/RubymineProjects/draft/posts.json', 'w') do |f|\n      f.write(response.to_json)\n    end\n\n\n\n    puts response   \n  end\n\n  getData\n\nend\n</code></pre>\n\n<p>It's printing to the console and writing to the JSON file on one line:</p>\n\n<pre><code>[{\"userId\"=&gt;10, \"id\"=&gt;100, \"title\"=&gt;\"at nam consequatur ea labore ea harum\", \"body\"=&gt;\"cupiditate quo est a modi nesciunt}]\n</code></pre>\n\n<p>Any suggestions on how I could achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 4638207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4467cd2fd5762b7d90015fd7af1b59f5?s=128&d=identicon&r=PG&f=1", "display_name": "Dluks", "link": "https://stackoverflow.com/users/4638207/dluks"}, "edited": false, "score": 0, "creation_date": 1461189844, "post_id": 36755880, "comment_id": 61092132, "body": "Ahh, I see! So the <code>each</code> method just returns the original object on which it&#39;s acting (in this case, an array of strings), whereas I want to return one big &#39;ole string. And I see that here, <code>map</code> is preferred over <code>each</code>. More to research :). EDIT: posted before I saw your edit."}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 1, "last_activity_date": 1461189525, "last_edit_date": 1461189525, "creation_date": 1461189080, "answer_id": 36755880, "question_id": 36755760, "link": "https://stackoverflow.com/questions/36755760/view-helper-method-that-lists-images-in-a-directory-with-dir-glob-and-each/36755880#36755880", "title": "View helper method that lists images in a directory with `Dir.glob` and `each ... do` not working", "body": "<p>You need to concatenate and return the tags. Try something like this:</p>\n\n<pre><code>module MyAppHelper\n  def list_logos(clss)\n    logos = Dir.glob(\"engines/myapp/app/assets/images/myapp/logos/*.{gif,png,jpg}\")\n    logos.map do |logo|\n      content_tag(\"li\", class: clss) do\n        image_tag logo.gsub(\"engines/myapp/app/assets/images/\", \"\")\n      end\n    end.join\n  end\nend\n</code></pre>\n\n<p>Also, since you're constructing HTML in the helper, you'll need to use <code>html_safe</code> in the template:</p>\n\n<pre><code>&lt;%= list_logos(\"companies__company\").html_safe %&gt;\n</code></pre>\n\n<p>Oh, and the reason you saw the result of <code>Dir.glob</code> is that <code>each</code> returns the object it's called on.</p>\n"}, {"tags": [], "owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "is_accepted": false, "score": 0, "last_activity_date": 1461189141, "creation_date": 1461189141, "answer_id": 36755901, "question_id": 36755760, "link": "https://stackoverflow.com/questions/36755760/view-helper-method-that-lists-images-in-a-directory-with-dir-glob-and-each/36755901#36755901", "title": "View helper method that lists images in a directory with `Dir.glob` and `each ... do` not working", "body": "<pre><code>module MyAppHelper\n  def list_logos(clss)\n    logos = Dir.glob(\"engines/myapp/app/assets/images/myapp/logos/*.{gif,png,jpg}\")\n    list_items = logos.map do |logo|\n      content_tag(\"li\", class: clss) do\n        image_tag logo.gsub(\"engines/myapp/app/assets/images/\", \"\")\n      end\n    end\n    list_items.join\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 4638207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4467cd2fd5762b7d90015fd7af1b59f5?s=128&d=identicon&r=PG&f=1", "display_name": "Dluks", "link": "https://stackoverflow.com/users/4638207/dluks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 36755880, "answer_count": 2, "score": 1, "last_activity_date": 1461428155, "creation_date": 1461188608, "last_edit_date": 1495541274, "question_id": 36755760, "link": "https://stackoverflow.com/questions/36755760/view-helper-method-that-lists-images-in-a-directory-with-dir-glob-and-each", "title": "View helper method that lists images in a directory with `Dir.glob` and `each ... do` not working", "body": "<p>My goal is to be able to include a helper method in my Rails 4 project that will list all images in a particular directory in a view so that I don't have to manually add <code>image_tags</code> each time I add a new image.</p>\n\n<p>I've come across <a href=\"https://stackoverflow.com/questions/16462752/whats-the-best-way-to-store-images-for-a-carousel\">several</a> <a href=\"https://stackoverflow.com/questions/14081109/rails-how-to-list-all-images-in-a-folder-using-the-image-tag\">examples</a> of this, but for my purposes I'd like to allocate this job to a helper method, and I can't for the life of me understand why this isn't working.</p>\n\n<p><strong>myapp_helper.rb</strong></p>\n\n<pre><code>module MyAppHelper\n  def list_logos(clss)\n    logos = Dir.glob(\"engines/myapp/app/assets/images/myapp/logos/*.{gif,png,jpg}\")\n    logos.each do |logo|\n      content_tag(\"li\", class: clss) do\n        image_tag logo.gsub(\"engines/myapp/app/assets/images/\", \"\")\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>show.html.erb</strong></p>\n\n<pre><code>&lt;%= list_logos(\"companies__company\") %&gt;\n</code></pre>\n\n<p>This just prints out the <code>Dir.glob</code> array. Before, I had tried <code>image_tag(\"myapp/logos/#{image.split('/').last}\"</code> to no avail, and so I thought I might have better luck with the <code>gsub</code> method. Nope.</p>\n\n<p>Funny thing is, if, in my helper method, I just write: </p>\n\n<pre><code>logos = Dir.glob(\"engines/myapp/app/assets/images/myapp/logos/*.{gif,png,jpg}\")\nimage_tag logos.sample.gsub(\"engines/petitions/app/assets/images/\", \"\")\n</code></pre>\n\n<p>the image renders fine, which leads me to believe that it's the <code>logos.each</code> iteration which is failing.</p>\n\n<p>I'm stumped. I'll add that this is an engines-based project that I've inherited, and I'm a relative newbie when it comes to Ruby <em>and</em> Rails, so I very well could be missing something simple. Yay! Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "methods"], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1461189735, "post_id": 36755966, "comment_id": 61092084, "body": "Part of the complexity of the question is how do you get the end date? Thanks though if I&#39;m able to create the method on my own using the info for the answer I&#39;ll give you credit :]"}, {"owner": {"reputation": 25610, "user_id": 1426788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8b836ad1cd8807ca747fe5c5cf6e1839?s=128&d=identicon&r=PG", "display_name": "lfender6445", "link": "https://stackoverflow.com/users/1426788/lfender6445"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1461189985, "post_id": 36755966, "comment_id": 61092197, "body": "do you want the challenge with the most current date?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1461190162, "post_id": 36755966, "comment_id": 61092253, "body": "I&#39;m trying to create an array of dates using a method <code>dates_challenged</code>. I give an example of what that would output if <code>date_started</code> was today, <code>days_challenged</code> was 5, and <code>committed</code> was weekdays. Hope that is clearer. Sorry not too clear on your question."}, {"owner": {"reputation": 25610, "user_id": 1426788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8b836ad1cd8807ca747fe5c5cf6e1839?s=128&d=identicon&r=PG", "display_name": "lfender6445", "link": "https://stackoverflow.com/users/1426788/lfender6445"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1461190468, "post_id": 36755966, "comment_id": 61092360, "body": "perhaps you can revise your question to convey intent a little clearer and simpler? it is hard for me to tell what you need here"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1461193799, "post_id": 36755966, "comment_id": 61093542, "body": "Updated question. Sorry"}], "tags": [], "owner": {"reputation": 25610, "user_id": 1426788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8b836ad1cd8807ca747fe5c5cf6e1839?s=128&d=identicon&r=PG", "display_name": "lfender6445", "link": "https://stackoverflow.com/users/1426788/lfender6445"}, "is_accepted": false, "score": 0, "last_activity_date": 1461189425, "last_edit_date": 1495541257, "creation_date": 1461189425, "answer_id": 36755966, "question_id": 36755716, "link": "https://stackoverflow.com/questions/36755716/how-to-make-integer-into-array-of-dates/36755966#36755966", "title": "How to make integer into array of dates?", "body": "<p>Get the start date and end date - then you can get a range of dates and or days between the start and the end</p>\n\n<pre><code>start_date = challenge.date.to_date\nend_date   = another_challenge.date.to_date\n(start_date..end_date).map(&amp;:mday) # returns array of days of the month\n</code></pre>\n\n<p>see <a href=\"https://stackoverflow.com/questions/26071847/list-array-of-days-between-two-dates\">List Array of Days Between Two Dates</a> for more information</p>\n"}, {"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1461189814, "post_id": 36756023, "comment_id": 61092121, "body": "Yea I&#39;m trying to create a method <code>dates_challenged</code> in rails. Thanks for trying to help me out again. Problem with the output though. That shows 5 days in a row. The example I gave uses <code>committed</code> days, which didn&#39;t include weekends."}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1461192094, "post_id": 36756023, "comment_id": 61092963, "body": "Updated my answer."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1461193768, "post_id": 36756023, "comment_id": 61093533, "body": "Thanks U! I&#39;m trying to make a method though so I could do <code>@challenge.dates_challenged</code> where then I can iterate over the array of dates in a view. Sorry for the confusion."}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 0, "last_activity_date": 1461192083, "last_edit_date": 1461192083, "creation_date": 1461189690, "answer_id": 36756023, "question_id": 36755716, "link": "https://stackoverflow.com/questions/36755716/how-to-make-integer-into-array-of-dates/36756023#36756023", "title": "How to make integer into array of dates?", "body": "<pre><code>committed = [\"mon\", \"tue\", \"wed\", \"thu\", \"fri\"]\ndays = committed.dup\n\ncount = 0\ndates = []\n\nwhile days.present?\n    count += 1\n    weekday = (date + count).strftime('%a').downcase\n    if days.include? weekday\n        dates &lt;&lt; (date + count.days).strftime('%Y-%m-%d')\n        days.delete(weekday)\n    end\nend\n\nputs dates # =&gt; [\"2016-04-21\", \"2016-04-22\", \"2016-04-25\", \"2016-04-26\", \"2016-04-27\"] \n</code></pre>\n\n<hr>\n\n<p><strong>Previuos answer</strong></p>\n\n<p>Assuming you are in Rails environment:</p>\n\n<pre><code>days_challenge = 5\ndate           = DateTime.parse(\"2016-04-20\")\n\n(1..days_challenge).map {|n| (date + n.days).strftime('%Y-%m-%d') }\n\n# Outputs\n[\"2016-04-21\", \"2016-04-22\", \"2016-04-23\", \"2016-04-24\", \"2016-04-25\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 322, "user_id": 6062644, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c3MLX.jpg?s=128&g=1", "display_name": "JLB", "link": "https://stackoverflow.com/users/6062644/jlb"}, "is_accepted": false, "score": 0, "last_activity_date": 1461191694, "creation_date": 1461191694, "answer_id": 36756410, "question_id": 36755716, "link": "https://stackoverflow.com/questions/36755716/how-to-make-integer-into-array-of-dates/36756410#36756410", "title": "How to make integer into array of dates?", "body": "<p>Simple and verbose:  create a date object from your date string (Date.parse), and create an empty array to hold the dates that you are 'committing' to.  The list of days of the week that are available is stored in an array, as above. Loop until the number of days we are committing to stored in the array is equal to how many days were requested, adding one day to each previous day.  Dates added to the date_committed array are checked against the valid days of week array (days_committed).     </p>\n\n<pre><code>require 'date'\n\ndays_challenge = 5\ndays_committed = [\"mon\", \"tue\", \"wed\", \"thu\", \"fri\"] \ndate_started = \"2016-04-20\"\ndate_committed = []\ndate_started_parsed = Date.parse(date_started)\n\nwhile (date_committed.size &lt; days_challenge)\n  date_dow = date_started_parsed.strftime('%a').downcase\n  if (days_committed.include?(date_dow))\n    date_committed &lt;&lt; date_started_parsed.strftime('%F')\n  end # if\n  date_started_parsed = date_started_parsed + 1\nend # while\n\nputs date_committed.to_s\n</code></pre>\n\n<p>Returns the correct dates based on valid days of the week.</p>\n\n<pre><code>[\"2016-04-20\", \"2016-04-21\", \"2016-04-22\", \"2016-04-25\", \"2016-04-26\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "is_accepted": true, "score": 2, "last_activity_date": 1461196235, "creation_date": 1461196235, "answer_id": 36757189, "question_id": 36755716, "link": "https://stackoverflow.com/questions/36755716/how-to-make-integer-into-array-of-dates/36757189#36757189", "title": "How to make integer into array of dates?", "body": "<p>This is what I came up with - there are still some issues - I think it will blow up if <code>committed</code> is empty, but it's nice and concise:</p>\n\n<pre><code>def dates_challenged\n  date = date_started-1\n  days_challenge.times.map { date = find_next(date) }\nend\n\nprivate\ndef find_next(date)\n  break if committed.include? Date::ABBR_DAYNAMES[date.wday].downcase while date = date.next\n  date\nend\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 36757189, "answer_count": 4, "score": 2, "last_activity_date": 1461196235, "creation_date": 1461188412, "last_edit_date": 1461193856, "question_id": 36755716, "link": "https://stackoverflow.com/questions/36755716/how-to-make-integer-into-array-of-dates", "title": "How to make integer into array of dates?", "body": "<p>If a user creates a challenge with <code>days_challenge: 5</code> &amp; <code>committed: [\"mon\", \"tue\", \"wed\", \"thu\", \"fri\"]</code> then how can we create an array of dates from <code>date_started: \"2016-04-20\"</code> until the last day of the challenge using a model method called <code>dates_challenged</code>?</p>\n\n<pre><code>create_table \"challenges\", force: true do |t|\n  t.string   \"action\"\n  t.date     \"date_started\"\n  t.text     \"committed\",       default: \"---\\n- sun\\n- mon\\n- tue\\n- wed\\n- thu\\n- fri\\n- sat\\n\"\n  t.integer  \"days_challenged\"\nend\n</code></pre>\n\n<p>The array would look something like this: <code>[\"2016-04-20\", \"2016-04-21\", \"2016-04-22\", \"2016-04-25\", \"2016-04-26\"]</code> </p>\n\n<pre><code>class Challenge &lt; ActiveRecord::Base\n  serialize :committed, Array\n\n  def dates_challenged\n    # Not sure if a model method is enough or if I'd have to migrate a new column\n  end\n\n  def committed_wdays\n    committed.map do |day|    \n      Date::ABBR_DAYNAMES.index(day.titleize)\n    end\n  end\n\n  def days_left_challenged\n    def days_done_challenged\n      ((date_started.to_date)..Date.yesterday).count do |date| \n        committed_wdays.include? date.wday\n      end\n    end  \n    if self.days_done_challenged &gt;= self.days_challenged\n      0\n    else\n      self.days_challenged - ((date_started.to_date)..Date.yesterday).count do |date| \n        committed_wdays.include? date.wday\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>To clarify, I'm trying to make a model method so I could do <code>@challenge.dates_challenged</code> in a view where I can then iterate over the array of dates.</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe", "databags"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1461191741, "creation_date": 1461191741, "answer_id": 36756420, "question_id": 36755533, "link": "https://stackoverflow.com/questions/36755533/data-bag-item-to-retrieve-single-keyvalue/36756420#36756420", "title": "data_bag_item to retrieve single keyvalue", "body": "<p>Check out <a href=\"https://docs.chef.io/ruby.html\" rel=\"nofollow\">https://docs.chef.io/ruby.html</a> for some very basic Ruby introductions. Specifically look at the Hash section, as the item returned by the <code>data_bag_item()</code> method call acts like a Hash in most ways. Each bag item is a JSON-compatible hash at heart.</p>\n"}, {"comments": [{"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1461440719, "post_id": 36775668, "comment_id": 61203721, "body": "You can/should omit the <code>only_if</code> clause. Chef would only try to delete the directory, if it exists."}, {"owner": {"reputation": 11, "user_id": 6232495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3050f08de9fcdf728e2ed7501b0ef8a2?s=128&d=identicon&r=PG&f=1", "display_name": "BubbleWrap", "link": "https://stackoverflow.com/users/6232495/bubblewrap"}, "reply_to_user": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1461680957, "post_id": 36775668, "comment_id": 61302992, "body": "that makes total sense, this a reflex :) to put checks everywhere... thanks for pointing out."}], "tags": [], "owner": {"reputation": 11, "user_id": 6232495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3050f08de9fcdf728e2ed7501b0ef8a2?s=128&d=identicon&r=PG&f=1", "display_name": "BubbleWrap", "link": "https://stackoverflow.com/users/6232495/bubblewrap"}, "is_accepted": false, "score": 0, "last_activity_date": 1461256536, "creation_date": 1461256536, "answer_id": 36775668, "question_id": 36755533, "link": "https://stackoverflow.com/questions/36755533/data-bag-item-to-retrieve-single-keyvalue/36775668#36775668", "title": "data_bag_item to retrieve single keyvalue", "body": "<p>so the solution is simple:</p>\n\n<pre><code>var = data_bag_item('installvar', 'testbag')\n  dir = var['testdir']\n\ndirectory \"#{dir}\" do\n  action :delete\n  only_if  Dir.exist?(\"#{['dir']}\")\nend\n</code></pre>\n\n<p>this works.</p>\n"}], "owner": {"reputation": 11, "user_id": 6232495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3050f08de9fcdf728e2ed7501b0ef8a2?s=128&d=identicon&r=PG&f=1", "display_name": "BubbleWrap", "link": "https://stackoverflow.com/users/6232495/bubblewrap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 970, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1461256536, "creation_date": 1461187655, "last_edit_date": 1461193154, "question_id": 36755533, "link": "https://stackoverflow.com/questions/36755533/data-bag-item-to-retrieve-single-keyvalue", "title": "data_bag_item to retrieve single keyvalue", "body": "<p>I just started playing with chef today, and one thing I can't wrap my head around is how I can use data bags to store multiple key-values in one item (1 bag > 1 item > many key-values) and be able to invoke them one by one within a recipe.</p>\n\n<p>Here is a simple test to delete directory if the directory from databag exists.</p>\n\n<pre><code>directory 'bag_item[installvar.testbag]['testdir'])' do\n  action :delete\n  only_if { Dir.exist?(bag_item[installvar.testbag]['testdir']) }\nend\n</code></pre>\n\n<p>Obviously I'm not using the index right but I'm not strong in ruby at all, I didn't know what ruby was until couple of weeks ago... all the googling points me at examples of mass usage on multiple items by one key-value, which is not what I am trying to achieve. databag is installvar itemID is testbag and the key I'm looking to retrieve is testdir.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "error-handling", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5432010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0a4d6cdc5a514853a817b44d6f27ed6f?s=128&d=identicon&r=PG&f=1", "display_name": "Adrien", "link": "https://stackoverflow.com/users/5432010/adrien"}, "edited": false, "score": 0, "creation_date": 1461192369, "post_id": 36755633, "comment_id": 61093062, "body": "It gave another error which I am not sure why.  .row.thumbnail-image.catalogs     .col-sm-4.item       = link_to link_category(&quot;Fashion Accessories&quot;) do         = image_tag(&quot;#{@page_medium[2].file.url rescue asset_url(@homepage_cms.image_custom_product_1)}&quot;, class: &quot;img-responsive&quot;)"}, {"owner": {"reputation": 57, "user_id": 5432010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0a4d6cdc5a514853a817b44d6f27ed6f?s=128&d=identicon&r=PG&f=1", "display_name": "Adrien", "link": "https://stackoverflow.com/users/5432010/adrien"}, "edited": false, "score": 0, "creation_date": 1461192373, "post_id": 36755633, "comment_id": 61093063, "body": "p           = @page_medium[2].additional_text           | &amp;nbsp; &lt;i class=&#39;fa fa-angle-right&#39;&gt;&lt;/i&gt;       = link_to link_category(&quot;Men&#39;s Clothing&quot;) do         = image_tag(&quot;#{@page_medium[3].file.url rescue asset_url(@homepage_cms.image_custom_product_2)}&quot;, class: &quot;img-responsive&quot;)         p           = @page_medium[3].additional_text"}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 0, "last_activity_date": 1461188107, "creation_date": 1461188107, "answer_id": 36755633, "question_id": 36755532, "link": "https://stackoverflow.com/questions/36755532/nomethoderror-at-undefined-method-page-media-for-nilnilclass/36755633#36755633", "title": "NoMethodError at / undefined method `page_media&#39; for nil:NilClass", "body": "<p><code>@cms_page</code> seems not to have any associated <code>page_media</code>s.</p>\n\n<p>A quick fix could be:</p>\n\n<pre><code>@page_medium  = @cms_page.try(:page_media).try(:order, \"id ASC\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 5432010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0a4d6cdc5a514853a817b44d6f27ed6f?s=128&d=identicon&r=PG&f=1", "display_name": "Adrien", "link": "https://stackoverflow.com/users/5432010/adrien"}, "edited": false, "score": 0, "creation_date": 1461192429, "post_id": 36755679, "comment_id": 61093081, "body": "Still the same NoMethodError at / undefined method `page_media&#39; for nil:NilClass"}, {"owner": {"reputation": 57, "user_id": 5432010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0a4d6cdc5a514853a817b44d6f27ed6f?s=128&d=identicon&r=PG&f=1", "display_name": "Adrien", "link": "https://stackoverflow.com/users/5432010/adrien"}, "edited": false, "score": 0, "creation_date": 1461192459, "post_id": 36755679, "comment_id": 61093091, "body": "before_action :set_track_page_status   def index"}], "tags": [], "owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "is_accepted": true, "score": 0, "last_activity_date": 1461188269, "creation_date": 1461188269, "answer_id": 36755679, "question_id": 36755532, "link": "https://stackoverflow.com/questions/36755532/nomethoderror-at-undefined-method-page-media-for-nilnilclass/36755679#36755679", "title": "NoMethodError at / undefined method `page_media&#39; for nil:NilClass", "body": "<p>Just modify slightly:</p>\n\n<pre><code>@page_medium  = @cms_page.page_media.order(\"id ASC\") if @cms_page.page_media\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 299, "user_id": 3251036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b88d9e964e6d6500c8d511cde831486?s=128&d=identicon&r=PG&f=1", "display_name": "sammygadd", "link": "https://stackoverflow.com/users/3251036/sammygadd"}, "is_accepted": false, "score": 0, "last_activity_date": 1461188491, "creation_date": 1461188491, "answer_id": 36755736, "question_id": 36755532, "link": "https://stackoverflow.com/questions/36755532/nomethoderror-at-undefined-method-page-media-for-nilnilclass/36755736#36755736", "title": "NoMethodError at / undefined method `page_media&#39; for nil:NilClass", "body": "<p>@cms_page is nil. So check if really have a Page with content filename equal to \"homepage.en.yml\" in the database.\nAnd like Carson Cole pointed out (with some modification..):</p>\n\n<pre><code>@page_medium  = @cms_page.page_media.order(\"id ASC\") if @cms_page\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5432010, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0a4d6cdc5a514853a817b44d6f27ed6f?s=128&d=identicon&r=PG&f=1", "display_name": "Adrien", "link": "https://stackoverflow.com/users/5432010/adrien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 36755679, "answer_count": 3, "score": 1, "last_activity_date": 1461188491, "creation_date": 1461187655, "last_edit_date": 1461188020, "question_id": 36755532, "link": "https://stackoverflow.com/questions/36755532/nomethoderror-at-undefined-method-page-media-for-nilnilclass", "title": "NoMethodError at / undefined method `page_media&#39; for nil:NilClass", "body": "<p>NoMethodError at /\nundefined method `page_media' for nil:NilClass</p>\n\n<p>indexapp/controllers/homepage_controller.rb</p>\n\n<pre><code>  before_action :set_track_page_status\n  def index\n     @cms_page     = Page.find_by_content_filename(\"homepage.en.yml\")\n     @homepage_cms = HomepageCms.first\n     @page_medium  = @cms_page.page_media.order(\"id ASC\")\n     @roots        = Category.roots\n  end\nend\n</code></pre>\n\n<p>How can I fix this this issue on Ror? The homepage does not load.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rabl"], "answers": [{"comments": [{"owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "edited": false, "score": 0, "creation_date": 1461331037, "post_id": 36755878, "comment_id": 61164174, "body": "Thanks.  I face palmed myself (literally) when I read your answer."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1461189073, "creation_date": 1461189073, "answer_id": 36755878, "question_id": 36755363, "link": "https://stackoverflow.com/questions/36755363/rabl-wildcard-include-all-attributes/36755878#36755878", "title": "RABL - Wildcard include all attributes", "body": "<p>You should be able to do this...</p>\n\n<pre><code>attributes *Post.column_names\n</code></pre>\n\n<p><code>Model.column_names</code> returns an array of all columns, and the asterisk in front translates it into comma separated arguments.</p>\n"}], "owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 36755878, "answer_count": 1, "score": 1, "last_activity_date": 1461189073, "creation_date": 1461187027, "question_id": 36755363, "link": "https://stackoverflow.com/questions/36755363/rabl-wildcard-include-all-attributes", "title": "RABL - Wildcard include all attributes", "body": "<p>Is it possible to use some sort of wild card within a RABL template that would pull back all accessible attributes of model rather than having to specify each one?</p>\n\n<p>As an example the RABL documentation shows something like follows which brings back the <code>:id, :title, :subject</code> attributes.</p>\n\n<pre><code># app/views/posts/index.rabl\ncollection @posts\nattributes :id, :title, :subject\nchild(:user) { attributes :full_name }\nnode(:read) { |post| post.read_by?(@user) }\n</code></pre>\n\n<p>I would like instead to do something like</p>\n\n<pre><code># app/views/posts/index.rabl\ncollection @posts\nattributes *\nchild(:user) { attributes :full_name }\nnode(:read) { |post| post.read_by?(@user) }\n</code></pre>\n\n<p>and have this give <code>:id, :title, :subject, :author, :etc</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rails-activerecord", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 584, "user_id": 4802126, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/33d22caf8c92ceb822fdf89b30a5ea13?s=128&d=identicon&r=PG&f=1", "display_name": "the-bass", "link": "https://stackoverflow.com/users/4802126/the-bass"}, "edited": false, "score": 0, "creation_date": 1461200253, "post_id": 36756611, "comment_id": 61095236, "body": "That answers my question. Also, your suggestion to use <code>t.string</code> works perfectly for me. Thanks a lot!"}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 8, "last_activity_date": 1516929744, "last_edit_date": 1516929744, "creation_date": 1461192726, "answer_id": 36756611, "question_id": 36755359, "link": "https://stackoverflow.com/questions/36755359/limit-a-text-column-in-an-activerecord-migration-5-0-using-the-postgresql-adapte/36756611#36756611", "title": "Limit a text column in an ActiveRecord migration 5.0 using the PostgreSQL adapter", "body": "<p><code>t.text</code> produces a <code>text</code> column in PostgreSQL and <a href=\"http://www.postgresql.org/docs/current/interactive/datatype-character.html#DATATYPE-CHARACTER-TABLE\" rel=\"noreferrer\"><code>text</code> doesn't allow for size limits</a> because <code>text</code> is:</p>\n\n<blockquote>\n  <p>variable unlimited length</p>\n</blockquote>\n\n<p>Since there's no limit supported by the database, the PostgreSQL driver won't look for a <code>:limit</code> option; keep in mind that you're saying <code>t.text(column_name, options_hash)</code> so you can throw whatever you want into <code>options_hash</code> and the driver will ignore anything that it isn't specifically looking for.</p>\n\n<p>If you want to limit the column size then you can either manually add a CHECK constraint (which ActiveRecord won't understand so you'll have to switch from <code>schema.rb</code> to <code>structure.sql</code>) or use a <code>varchar</code> column (AKA <code>t.string</code>):</p>\n\n<pre><code>t.string :body, null: false, limit: 260\n</code></pre>\n\n<p>Also, your <code>schema.rb</code> is generated based on what is in the database, not what's in your migrations. Since <code>text</code> doesn't support a limit, the database won't know about your <code>limit: 260</code> option; if the database doesn't know about it, ActiveRecord won't get it back from the database when ActiveRecord is asking the database for schema information.</p>\n"}], "owner": {"reputation": 584, "user_id": 4802126, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/33d22caf8c92ceb822fdf89b30a5ea13?s=128&d=identicon&r=PG&f=1", "display_name": "the-bass", "link": "https://stackoverflow.com/users/4802126/the-bass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5039, "favorite_count": 2, "accepted_answer_id": 36756611, "answer_count": 1, "score": 6, "last_activity_date": 1516929744, "creation_date": 1461187009, "last_edit_date": 1461192852, "question_id": 36755359, "link": "https://stackoverflow.com/questions/36755359/limit-a-text-column-in-an-activerecord-migration-5-0-using-the-postgresql-adapte", "title": "Limit a text column in an ActiveRecord migration 5.0 using the PostgreSQL adapter", "body": "<p>I'm having a migration that looks like this</p>\n\n<pre><code>class CreateQuestionings &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :questionings do |t|\n      t.text :body, null: false, limit: 260\n    end\n  end\nend\n</code></pre>\n\n<p>Now when I run <code>$ rake db:migrate:reset</code> the limit is nowhere to be seen in my <code>db/schema.rb</code>:</p>\n\n<pre><code>create_table \"questionings\", force: :cascade do |t|\n  t.text     \"body\",       null: false\nend\n</code></pre>\n\n<p>Am I doing it wrong or is this a bug?</p>\n\n<p>By the way, I am using rails 5.0.0.beta3 and ruby 2.3.0p0.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 4, "last_activity_date": 1461186519, "creation_date": 1461186519, "answer_id": 36755222, "question_id": 36755120, "link": "https://stackoverflow.com/questions/36755120/how-to-increment-1-in-times-iteration/36755222#36755222", "title": "How to increment +1 in .times iteration?", "body": "<p>Use counter like so:</p>\n\n<pre><code>&lt;% @challenge.days_challenged.times do |counter| %&gt;\n  &lt;div class=\"text-background\"&gt;\n    Day &lt;%= counter + 1 %&gt;\n    &lt;%= render \"notes/notes\" %&gt;\n    &lt;%= render \"notes/form\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here, <code>.times</code> would pass the current <em>step</em> of the iteration starting from 0 to your block.</p>\n"}, {"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1461187119, "post_id": 36755293, "comment_id": 61090969, "body": "Thanks for your help! Maybe someday I&#39;ll switch it over, but for now it&#39;s a fixnum"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1461188536, "post_id": 36755293, "comment_id": 61091628, "body": "You inspired me to solve a new problem :] I&#39;m trying to use <code>days_challenged</code> to now make an array of dates <code>dates_challenged</code> if you can offer anymore insight: <a href=\"http://stackoverflow.com/questions/36755716/how-to-make-integer-into-array-of-dates\" title=\"how to make integer into array of dates\">stackoverflow.com/questions/36755716/&hellip;</a>"}], "tags": [], "owner": {"reputation": 25610, "user_id": 1426788, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8b836ad1cd8807ca747fe5c5cf6e1839?s=128&d=identicon&r=PG", "display_name": "lfender6445", "link": "https://stackoverflow.com/users/1426788/lfender6445"}, "is_accepted": false, "score": 2, "last_activity_date": 1461186785, "creation_date": 1461186785, "answer_id": 36755293, "question_id": 36755120, "link": "https://stackoverflow.com/questions/36755120/how-to-increment-1-in-times-iteration/36755293#36755293", "title": "How to increment +1 in .times iteration?", "body": "<p>Assuming <code>days_challenged#times</code> is an array of the days...</p>\n\n<pre><code>  days_challenged.times.each do |day|\n    puts \"Day #{day}\"\n  end\n</code></pre>\n\n<p>outputs each day</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 36755222, "answer_count": 2, "score": 0, "last_activity_date": 1461186785, "creation_date": 1461186142, "question_id": 36755120, "link": "https://stackoverflow.com/questions/36755120/how-to-increment-1-in-times-iteration", "title": "How to increment +1 in .times iteration?", "body": "<pre><code>  &lt;% @challenge.days_challenged.times do %&gt;\n    &lt;div class=\"text-background\"&gt;\n      Day &lt;%= + 1 %&gt;\n       &lt;%= render \"notes/notes\" %&gt;\n       &lt;%= render \"notes/form\" %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Every note has \"Day 1\" at the top instead of \"Day 1\", \"Day 2\", \"Day 3\", etc depending on how many <code>@challenge.days_challenged</code></p>\n"}, {"tags": ["ruby", "authentication", "proxy", "watir-webdriver", "watir-classic"], "comments": [{"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1461185816, "post_id": 36755020, "comment_id": 61090276, "body": "I tried &#39;.start&#39; method as well..."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1461186565, "post_id": 36755020, "comment_id": 61090662, "body": "I can&#39;t help you with the watir-classic code, but I would encourage you to evaluate updating to watir-webdriver as that is where all of the project&#39;s continued development focus is."}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1461187138, "post_id": 36755020, "comment_id": 61090979, "body": "I used webdrver for ie and had the same problem @titusfortner"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 2, "creation_date": 1461198012, "post_id": 36755020, "comment_id": 61094646, "body": "That I can help you with. Update your question by adding the webdriver stack trace and we&#39;ll get it figured out."}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1462311217, "post_id": 36755020, "comment_id": 61581644, "body": "@titusfortner I changed my question around, and this is the error i&#39;m getting when trying to authenticate a proxy with firefox."}], "answers": [{"tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1462330516, "creation_date": 1462330516, "answer_id": 37017611, "question_id": 36755020, "link": "https://stackoverflow.com/questions/36755020/ruby-watir-classic-wont-authenticate-proxy/37017611#37017611", "title": "ruby watir classic won&#39;t authenticate proxy", "body": "<p>I can explain the error at least. You can't pass in basic authentication to a proxy url because the code expects that a colon in the string is distinguishing a host from a port (which needs to be an integer. </p>\n\n<p>I do not have much experience with using proxies with Selenium. Poking around on the internet for the problem give suggestions such as setting <code>signon.autologin.proxy</code> to true in your designated Firefox profile, or adding the Firefox <code>autoauth</code> extension. Essentially you can save your password once manually in your profile, and then automated tests won't have to input it. </p>\n"}], "owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 326, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462330516, "creation_date": 1461185764, "last_edit_date": 1462311157, "question_id": 36755020, "link": "https://stackoverflow.com/questions/36755020/ruby-watir-classic-wont-authenticate-proxy", "title": "ruby watir classic won&#39;t authenticate proxy", "body": "<p>I try to open internet explorer via watir-webdriver with my code:</p>\n\n<pre><code>require \"watir-webdriver\"\n\n\nprofile = Selenium::WebDriver::Firefox::Profile.new\nprofile.proxy = Selenium::WebDriver::Proxy.new :http =&gt; 'http://username:password@xx.xxx.xxx.xx:xxxxx', :ssl =&gt; 'http://username:password@xx.xxx.xxx.xx:xxxxx'\n</code></pre>\n\n<p>And I get this error stating something about the  I'm guessing? \nThis is what it reads:</p>\n\n<pre><code>C:/Ruby/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/firefox/profile.rb:205:in `Integer': invalid value for Integer(): \"//username:password@xx.xxx.xxx.xx:xxxxx\" (ArgumentError)\n    from C:/Ruby/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/firefox/profile.rb:205:in `set_manual_proxy_preference'\n    from C:/Ruby/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/firefox/profile.rb:176:in `proxy='\n    from test1.rb:6:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "heroku", "amazon-s3"], "comments": [{"owner": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461186227, "post_id": 36754642, "comment_id": 61090469, "body": "Which version of paperclip are you using? They only support aws-sdk v2 on version 5 (currently in beta) and greater."}, {"owner": {"reputation": 76, "user_id": 5374220, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-xqlUFt5FUBI/AAAAAAAAAAI/AAAAAAAAAHM/JSJ2qGmtg_0/photo.jpg?sz=128", "display_name": "Chaitanya Yadav", "link": "https://stackoverflow.com/users/5374220/chaitanya-yadav"}, "reply_to_user": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461187523, "post_id": 36754642, "comment_id": 61091170, "body": "gem &#39;paperclip&#39;, &#39;~&gt; 4.3&#39;, &#39;&gt;= 4.3.6&#39;"}, {"owner": {"reputation": 76, "user_id": 5374220, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-xqlUFt5FUBI/AAAAAAAAAAI/AAAAAAAAAHM/JSJ2qGmtg_0/photo.jpg?sz=128", "display_name": "Chaitanya Yadav", "link": "https://stackoverflow.com/users/5374220/chaitanya-yadav"}, "reply_to_user": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461187887, "post_id": 36754642, "comment_id": 61091335, "body": "Is there any prob with aws-sdk gem for version &gt;2.0? Even at  <a href=\"https://devcenter.heroku.com/articles/paperclip-s3\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/paperclip-s3</a> warning is given for usage of aws-sdk ~&gt;2."}, {"owner": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461191155, "post_id": 36754642, "comment_id": 61092608, "body": "I don&#39;t think there are problems with it, just that Paperclip has taken a little while to update to using it. In order to upgrade to a compatible version, you could try one of the beta versions by putting <code>gem &#39;paperclip&#39;, &#39;5.0.0.beta2&#39;</code> in your gemfile and seeing if that works for you. You&#39;ll probably want to read their release notes to see what else has changed in Paperclip."}, {"owner": {"reputation": 76, "user_id": 5374220, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-xqlUFt5FUBI/AAAAAAAAAAI/AAAAAAAAAHM/JSJ2qGmtg_0/photo.jpg?sz=128", "display_name": "Chaitanya Yadav", "link": "https://stackoverflow.com/users/5374220/chaitanya-yadav"}, "reply_to_user": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461215792, "post_id": 36754642, "comment_id": 61099395, "body": "&#39;Paperclip::Errors::InfiniteInterpolationError&#39; It is giving this error after upgradation.I would update my paperclip.rb in question.. @maxshelley"}, {"owner": {"reputation": 76, "user_id": 5374220, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-xqlUFt5FUBI/AAAAAAAAAAI/AAAAAAAAAHM/JSJ2qGmtg_0/photo.jpg?sz=128", "display_name": "Chaitanya Yadav", "link": "https://stackoverflow.com/users/5374220/chaitanya-yadav"}, "reply_to_user": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461218379, "post_id": 36754642, "comment_id": 61100392, "body": "&#39;Seahorse::Client::NetworkingError (getaddrinfo: No such host is known. ):&#39;. I am getting this error after configuring to paperclip.rb with new paperclip 5.0 beta as above. @maxshelley"}, {"owner": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461230616, "post_id": 36754642, "comment_id": 61108536, "body": "Looks like you&#39;re not the only one: <a href=\"http://stackoverflow.com/questions/31822340/seahorseclientnetworkingerror-amazon-s3-file-upload-with-rails\" title=\"seahorseclientnetworkingerror amazon s3 file upload with rails\">stackoverflow.com/questions/31822340/&hellip;</a> - If you need to get this shipped and you don&#39;t mind using the old version of aws-sdk, then downgrade your versions: <code>gem &#39;paperclip&#39;, &#39;~&gt; 4.3.6&#39;</code> and <code>gem &#39;aws-sdk&#39;, &#39;~&gt; 1.66.0&#39;</code>"}, {"owner": {"reputation": 76, "user_id": 5374220, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-xqlUFt5FUBI/AAAAAAAAAAI/AAAAAAAAAHM/JSJ2qGmtg_0/photo.jpg?sz=128", "display_name": "Chaitanya Yadav", "link": "https://stackoverflow.com/users/5374220/chaitanya-yadav"}, "reply_to_user": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461235724, "post_id": 36754642, "comment_id": 61112265, "body": "<code>gem &#39;aws-sdk&#39;,&#39;~&gt;1.66.0&#39;</code>gives error saying corrupted gem!"}, {"owner": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461237096, "post_id": 36754642, "comment_id": 61113184, "body": "That sounds like a separate issue. What error message are you seeing?"}, {"owner": {"reputation": 76, "user_id": 5374220, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-xqlUFt5FUBI/AAAAAAAAAAI/AAAAAAAAAHM/JSJ2qGmtg_0/photo.jpg?sz=128", "display_name": "Chaitanya Yadav", "link": "https://stackoverflow.com/users/5374220/chaitanya-yadav"}, "reply_to_user": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461239954, "post_id": 36754642, "comment_id": 61115245, "body": "<code>Bundler::GemspecError: Could not read gem at C:&#47;RailsInstaller&#47;Ruby2.2.0&#47;lib&#47;ruby&#47;gems&#47;2.2.0&#47;cache&#47;aws-sd&zwnj;&#8203;k-v1-1.66.0.gem. It may be corrupted.</code> this is the error message! @maxshelley"}, {"owner": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461259419, "post_id": 36754642, "comment_id": 61129688, "body": "Looks like an issue with your local Windows rails environment. Not sure i can help with that. If you Google around and investigate further (maybe a separate SO question?) then hopefully when you get those paperclip and aws-sdk versions installed they&#39;ll work."}, {"owner": {"reputation": 76, "user_id": 5374220, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-xqlUFt5FUBI/AAAAAAAAAAI/AAAAAAAAAHM/JSJ2qGmtg_0/photo.jpg?sz=128", "display_name": "Chaitanya Yadav", "link": "https://stackoverflow.com/users/5374220/chaitanya-yadav"}, "reply_to_user": {"reputation": 166, "user_id": 1514758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28b5ec17aced5194867715bab6b2fd0?s=128&d=identicon&r=PG", "display_name": "maxshelley", "link": "https://stackoverflow.com/users/1514758/maxshelley"}, "edited": false, "score": 0, "creation_date": 1461274545, "post_id": 36754642, "comment_id": 61138130, "body": "I reinstalled my rails,now old version are installed.! But it is giving this error          <code>AWS::S3::Errors::AccessDenied (Access Denied)</code>"}], "owner": {"reputation": 76, "user_id": 5374220, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-xqlUFt5FUBI/AAAAAAAAAAI/AAAAAAAAAHM/JSJ2qGmtg_0/photo.jpg?sz=128", "display_name": "Chaitanya Yadav", "link": "https://stackoverflow.com/users/5374220/chaitanya-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 824, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461215906, "creation_date": 1461184525, "last_edit_date": 1461215906, "question_id": 36754642, "link": "https://stackoverflow.com/questions/36754642/uninitialized-constant-paperclipstorages3aws-i-am-getting-this-error-when", "title": "uninitialized constant Paperclip::Storage::S3::AWS. I am getting this error when i am trying to upload an image to aws-s3 using paperclip", "body": "<h1>    Gemfile</h1>\n\n<pre><code>source 'http://rubygems.org'\ngem 'rails', '4.2.4'\ngroup :development do\n    gem 'sqlite3'\nend\ngroup :production do\n    gem 'pg'\nend\ngem 'searchkick'\ngem 'cocoon'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\ngem 'foundation-rails'\ngem 'tinymce-rails', '~&gt; 4.3', '&gt;= 4.3.8'\ngem 'haml'\ngem 'font-awesome-rails', '~&gt; 4.6', '&gt;= 4.6.1.0'\ngem 'simple_form'\ngem 'paperclip', '~&gt; 4.3', '&gt;= 4.3.6'\ngem 'omniauth-facebook'\ngem 'acts_as_votable'\ngem 'masonry-rails', '~&gt; 0.2.4'\ngem 'aws-sdk', '~&gt; 2.2', '&gt;= 2.2.35'\ngem 'foreman'\ngem 'puma'\ngem 'omniauth'\ngem 'jquery-turbolinks', '~&gt; 2.1'\ngroup :development, :test do\n  gem 'byebug'\nend\ngroup :development do\n  gem 'web-console', '~&gt; 2.0'\nend\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<h1>Production.rb</h1>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # Code is not reloaded between requests.\n  config.cache_classes = true\n\n  # Eager load code on boot. This eager loads most of Rails and\n  # your application in memory, allowing both threaded web servers\n  # and those relying on copy on write to perform better.\n  # Rake tasks automatically ignore this option for performance.\n  config.eager_load = true\n\n  # Full error reports are disabled and caching is turned on.\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n\n  # Enable Rack::Cache to put a simple HTTP cache in front of your application\n  # Add `rack-cache` to your Gemfile before enabling this.\n  # For large-scale production use, consider using a caching reverse proxy like\n  # NGINX, varnish or squid.\n  # config.action_dispatch.rack_cache = true\n\n  # Disable serving static files from the `/public` folder by default since\n  # Apache or NGINX already handles this.\n  config.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present?\n\n  # Compress JavaScripts and CSS.\n  config.assets.js_compressor = :uglifier\n  # config.assets.css_compressor = :sass\n\n  # Do not fallback to assets pipeline if a precompiled asset is missed.\n  config.assets.compile = false\n\n  # Asset digests allow you to set far-future HTTP expiration dates on all assets,\n  # yet still be able to expire them through the digest params.\n  config.assets.digest = true\n\n  # `config.assets.precompile` and `config.assets.version` have moved to config/initializers/assets.rb\n\n  # Specifies the header that your server uses for sending files.\n  # config.action_dispatch.x_sendfile_header = 'X-Sendfile' # for Apache\n  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for NGINX\n\n  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.\n  # config.force_ssl = true\n\n  # Use the lowest log level to ensure availability of diagnostic information\n  # when problems arise.\n  config.log_level = :debug\n\n  # Prepend all log lines with the following tags.\n  # config.log_tags = [ :subdomain, :uuid ]\n\n  # Use a different logger for distributed setups.\n  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)\n\n  # Use a different cache store in production.\n  # config.cache_store = :mem_cache_store\n\n  # Enable serving of images, stylesheets, and JavaScripts from an asset server.\n  # config.action_controller.asset_host = 'http://assets.example.com'\n\n  # Ignore bad email addresses and do not raise email delivery errors.\n  # Set this to true and configure the email server for immediate delivery to raise delivery errors.\n  # config.action_mailer.raise_delivery_errors = false\n\n  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n  # the I18n.default_locale when a translation cannot be found).\n  config.i18n.fallbacks = true\n\n  # Send deprecation notices to registered listeners.\n  config.active_support.deprecation = :notify\n\n  # Use default logging formatter so that PID and timestamp are not suppressed.\n  config.log_formatter = ::Logger::Formatter.new\n\n  # Do not dump schema after migrations.\n  config.active_record.dump_schema_after_migration = false\n  config.paperclip_defaults = {\n    storage: :s3,\n    :s3_region =&gt; ENV['AWS_REGION'],\n    s3_credentials: {\n      bucket: ENV['S3_BUCKET_NAME'],\n      access_key_id: ENV['AWS_ACCESS_KEY_ID'],\n      secret_access_key: ENV['AWS_SECRET_ACCESS_KEY']\n    }\n  }\nend\n</code></pre>\n\n<h1>    paperclip.rb</h1>\n\n<pre><code>Paperclip::Attachment.default_options[:url] = ':s3_domain_url'\nPaperclip::Attachment.default_options[:path] = \":class/:attachment/:id_partition/:style/:filename\"\nPaperclip::Attachment.default_options[:s3_host_name] = 's3-us-west-2.amazonaws.com'\n</code></pre>\n\n<h1>Details of Problem</h1>\n\n<p>*Problem is that when we use aws-sdk ~>2.0 Shows above error in the title while I am uploading image using paperclip for my heroku app. There is similar question but answer to that question is valid now as gem 'aws-sdk','~&lt;2.0' is depracted now. It give corrupted gem error when tried to install. I am stuck in this for 2 days. Couldn't find any satisfactory answer from any resource. Thank you in advance  *</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1461184360, "post_id": 36754248, "comment_id": 61089476, "body": "by the way , why do you need to move that code to application.html.erb ? I mean what&#39;s wrong with it in its place ?"}, {"owner": {"reputation": 3, "user_id": 4020558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d697fabf59d1f218fa2004132eaffe?s=128&d=identicon&r=PG&f=1", "display_name": "khhey", "link": "https://stackoverflow.com/users/4020558/khhey"}, "reply_to_user": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1461185351, "post_id": 36754248, "comment_id": 61090055, "body": "Well I want to try and make a webpage that shows both the form which adds a post to my database, and also shows all of the posts as well."}], "answers": [{"comments": [{"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1461184073, "post_id": 36754331, "comment_id": 61089284, "body": "in my opinion the way you&#39;re giving shouldn&#39;t even be mentioned, the right way should be mentioned instead"}], "tags": [], "owner": {"reputation": 182, "user_id": 6185382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9545efc10234bd8cbd54eabd831b363d?s=128&d=identicon&r=PG", "display_name": "Alexander Komarov", "link": "https://stackoverflow.com/users/6185382/alexander-komarov"}, "is_accepted": false, "score": 0, "last_activity_date": 1461183491, "creation_date": 1461183491, "answer_id": 36754331, "question_id": 36754248, "link": "https://stackoverflow.com/questions/36754248/how-to-add-form-to-application-html-erb-page-ruby/36754331#36754331", "title": "how to add form to application.html.erb page ruby", "body": "<p>The <code>@thing</code> should be initialized in your controller. I suppose you've got a <code>things_controller.rb</code> that has a <code>new</code> action in it. In this action, controller should initialize <code>@thing</code> and therefore it is visible in <code>app/views/things/new.html.erb</code>.</p>\n\n<p>You really shouldn't put forms in <code>application.html.erb</code>, but just to make the error disappear, you could do </p>\n\n<pre><code>&lt;%= form_for(Thing.new) do |f| %&gt;\n</code></pre>\n\n<p>(assuming you've got a <code>Thing</code> model in <code>app/models/thing.rb</code>).</p>\n\n<p>This way you'll initialize an instance of <code>Thing</code> right in your <code>application.html.erb</code> view.</p>\n"}, {"comments": [{"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 1, "creation_date": 1461184144, "post_id": 36754397, "comment_id": 61089337, "body": "there is <code>ApplicationController</code>"}, {"owner": {"reputation": 3, "user_id": 4020558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d697fabf59d1f218fa2004132eaffe?s=128&d=identicon&r=PG&f=1", "display_name": "khhey", "link": "https://stackoverflow.com/users/4020558/khhey"}, "edited": false, "score": 0, "creation_date": 1461185503, "post_id": 36754397, "comment_id": 61090126, "body": "Thanks! I guess I am editing in the wrong place then, somehow I thought of the application.html.erb as my overall &quot;home&quot; page. But I guess I should create a new page as my normal &quot;website base&quot; or &quot;index&quot; that loads the application itself?"}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "edited": false, "score": 0, "creation_date": 1461187781, "post_id": 36754397, "comment_id": 61091286, "body": "it really depends on you, for example, you can create a <code>HomePageController</code> with <code>index</code> action to show your home page. MVC model is pretty flexible, but in rails, there are many conventions, if you follow them, it makes your life much easier. For example, you can try <code>rails generate scaffold User name:string</code>. this will generate a scaffold completely following rails convention, you can take a look at how it set up <code>routes.rb</code>, <code>controller</code>, <code>views</code> and <code>model</code>"}], "tags": [], "owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "is_accepted": true, "score": 0, "last_activity_date": 1461184532, "last_edit_date": 1461184532, "creation_date": 1461183713, "answer_id": 36754397, "question_id": 36754248, "link": "https://stackoverflow.com/questions/36754248/how-to-add-form-to-application-html-erb-page-ruby/36754397#36754397", "title": "how to add form to application.html.erb page ruby", "body": "<p>I think you should take a look at ruby on rails MVC model first, and also go through a basic tutorial. Just a quick review of you question:</p>\n\n<ol>\n<li><p>application.html.erb is usually in the <code>layout</code> folder of rails,\nit's job is to provide a root template/layout for the whole project if not specified.\nusually you <strong>don't</strong> want to put any code that is not commonly\nneeded by all pages.</p></li>\n<li><p>the reason it is giving you the error <code>First argument in form cannot contain nil or be empty</code> is because, the helper method <code>form_for</code> is expecting the controller to provide a <code>@thing</code> to the view file <code>application.html.erb</code>, in your case, it is obvious that <code>@thing</code> is not exist in your controller or your <code>ApplicationController</code>.</p></li>\n</ol>\n"}], "owner": {"reputation": 3, "user_id": 4020558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d697fabf59d1f218fa2004132eaffe?s=128&d=identicon&r=PG&f=1", "display_name": "khhey", "link": "https://stackoverflow.com/users/4020558/khhey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 36754397, "answer_count": 2, "score": 0, "last_activity_date": 1461184532, "creation_date": 1461183241, "question_id": 36754248, "link": "https://stackoverflow.com/questions/36754248/how-to-add-form-to-application-html-erb-page-ruby", "title": "how to add form to application.html.erb page ruby", "body": "<p>I'm quite new to ruby and I'm trying to put the form to add a new post to the \"application.html.erb\" page.</p>\n\n<p>Somehow I can't get it to work by just copying the code from the \"app/views/things/_form.html.erb\" page, and also I can't seem to get it to work by copying the code from the \"app/views/things/new.html.erb\" page.</p>\n\n<p>If I do that I get the error: </p>\n\n<pre><code>First argument in form cannot contain nil or be empty\n</code></pre>\n\n<p>The error points towards:</p>\n\n<pre><code>&lt;%= form_for(@thing) do |f| %&gt;\n</code></pre>\n\n<p>This is a code that I find in the \"app/views/things/_form.html.erb\" page.</p>\n\n<p>Can anybody point me in the right direction? To be honest, I don't even know where to start looking for the answer.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1461183962, "post_id": 36754194, "comment_id": 61089202, "body": "what didn&#39;t you understand ncrouch25 ?"}, {"owner": {"reputation": 260, "user_id": 6122349, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a8176f5fff1ecfddae663a8e99ec688d?s=128&d=identicon&r=PG&f=1", "display_name": "ncrouch25", "link": "https://stackoverflow.com/users/6122349/ncrouch25"}, "reply_to_user": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1461184426, "post_id": 36754194, "comment_id": 61089509, "body": "I edited the original post"}, {"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1461185348, "post_id": 36754194, "comment_id": 61090053, "body": "hmmmm maybe you can contact andreimpop(the developer of the gem)"}], "answers": [{"comments": [{"owner": {"reputation": 260, "user_id": 6122349, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a8176f5fff1ecfddae663a8e99ec688d?s=128&d=identicon&r=PG&f=1", "display_name": "ncrouch25", "link": "https://stackoverflow.com/users/6122349/ncrouch25"}, "edited": false, "score": 0, "creation_date": 1461186349, "post_id": 36755062, "comment_id": 61090544, "body": "Yeah I thought of that, unfortunately there are no other gems that function, (there is an omniauth gem, but the api has deprecated use of it,) and considering that this gem is made by the actual company i would hope that it still works. But yes, the documentation is poorly written"}], "tags": [], "owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "is_accepted": false, "score": 0, "last_activity_date": 1461185897, "creation_date": 1461185897, "answer_id": 36755062, "question_id": 36754194, "link": "https://stackoverflow.com/questions/36754194/how-to-use-rails-gem-to-connect-to-api/36755062#36755062", "title": "How to use rails gem to connect to API?", "body": "<p>Well, it's not your fault, the documentation of the gem is poorly written and doesn't show what exactly is going on or what is it even doing </p>\n\n<p>This gem is also outdated, created 3 years ago and there are no issues or updates or anything. you better go looking for a different gem that do the functionality you want</p>\n"}], "owner": {"reputation": 260, "user_id": 6122349, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/a8176f5fff1ecfddae663a8e99ec688d?s=128&d=identicon&r=PG&f=1", "display_name": "ncrouch25", "link": "https://stackoverflow.com/users/6122349/ncrouch25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461185897, "creation_date": 1461183044, "last_edit_date": 1461184412, "question_id": 36754194, "link": "https://stackoverflow.com/questions/36754194/how-to-use-rails-gem-to-connect-to-api", "title": "How to use rails gem to connect to API?", "body": "<p>I'm trying to connect my RoR app to the api at this website <a href=\"https://www.humanapi.co\" rel=\"nofollow\">https://www.humanapi.co</a></p>\n\n<p>There is a gem available here, <a href=\"https://github.com/humanapi/humanapi\" rel=\"nofollow\">https://github.com/humanapi/humanapi</a>, that is supposed to make the process easy. I have read through the documentation several times Unfortunately, because I am new to RoR and web development in general, I'm not exactly sure how to implement this. Any help you can give is greatly appreciated!</p>\n\n<p>Specifically: It says to configure the initilizer using these values..</p>\n\n<pre><code>HumanApi.config do |c|\nc.app_id = ENV['HUMANAPI_KEY']\nc.query_key = ENV['HUMANAPI_SECRET']\nend\n</code></pre>\n\n<p>I understand this in concept, i have used omniauth etc before. But do I need to create another initializer or just use an existing one?</p>\n\n<p>and finally, this is what i don't understand the most...</p>\n\n<pre><code>  humanizable :get_the_token\n\ndef get_the_token\n    # the code to reach the token\n</code></pre>\n\n<p>\"# the code to reach the token</p>\n\n<p>I'm at a complete loss with that, how would i get the token? here is the documentation for web access to the api (which i've read a lot) <a href=\"http://hub.humanapi.co/docs/connect-web-guide\" rel=\"nofollow\">http://hub.humanapi.co/docs/connect-web-guide</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1461184296, "post_id": 36754188, "comment_id": 61089432, "body": "in short, you don&#39;t want the newly created comments to be shown until refresh ?"}], "answers": [{"tags": [], "owner": {"reputation": 3032, "user_id": 1095300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf670606f735ddde27e87e1f63c9410?s=128&d=identicon&r=PG", "display_name": "Marc Lainez", "link": "https://stackoverflow.com/users/1095300/marc-lainez"}, "is_accepted": false, "score": 1, "last_activity_date": 1461184905, "last_edit_date": 1461184905, "creation_date": 1461184552, "answer_id": 36754656, "question_id": 36754188, "link": "https://stackoverflow.com/questions/36754188/rails-iterate-over-only-the-persisted-records-associated-to-an-object/36754656#36754656", "title": "Rails iterate over only the persisted records associated to an object", "body": "<p>You could add a class method to your <code>Comment</code> model such as this:</p>\n\n<pre><code>def self.persisted\n  reject { |comment| comment.new_record? }\nend\n</code></pre>\n\n<p>Then call</p>\n\n<pre><code>@blog.comments.persisted\n</code></pre>\n\n<p>The downside is that it's not after this you don't have an <code>ActiveRecord::Relation</code> anymore and might break your scopes chaining. Make sure you're using it last in your <code>ActiveRecord</code> queries.</p>\n"}, {"tags": [], "owner": {"reputation": 1556, "user_id": 6156030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab58120061222262e44544b199af476?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Paakkinen", "link": "https://stackoverflow.com/users/6156030/laura-paakkinen"}, "is_accepted": true, "score": 3, "last_activity_date": 1461184955, "creation_date": 1461184955, "answer_id": 36754773, "question_id": 36754188, "link": "https://stackoverflow.com/questions/36754188/rails-iterate-over-only-the-persisted-records-associated-to-an-object/36754773#36754773", "title": "Rails iterate over only the persisted records associated to an object", "body": "<p>How about if you create the new comment without using the association to the blog instance? Then it won't show up when you iterate through <code>@blog.comments</code>.</p>\n\n<pre><code>def show\n  @blog = Blog.find(params[:id])\n  @new_comment = Comment.new(blog: @blog)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3032, "user_id": 1095300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf670606f735ddde27e87e1f63c9410?s=128&d=identicon&r=PG", "display_name": "Marc Lainez", "link": "https://stackoverflow.com/users/1095300/marc-lainez"}, "edited": false, "score": 0, "creation_date": 1461244235, "post_id": 36754854, "comment_id": 61118611, "body": "Indeed, that will work for sure. However, I&#39;m not a big fan of the approach as it means the logic is then split between the controller and the view. I like my views to only receive the data they need to show, not having to do more filtering. but that&#39;s just a personal preference of course :)"}], "tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": false, "score": 2, "last_activity_date": 1461249658, "last_edit_date": 1461249658, "creation_date": 1461185200, "answer_id": 36754854, "question_id": 36754188, "link": "https://stackoverflow.com/questions/36754188/rails-iterate-over-only-the-persisted-records-associated-to-an-object/36754854#36754854", "title": "Rails iterate over only the persisted records associated to an object", "body": "<p>in your view loop, you can skip <code>if comment.new_record?</code></p>\n\n<pre><code>&lt;% @blog.comments.each do |comment| %&gt;\n  &lt;% next if comment.new_record? %&gt;\n</code></pre>\n\n<p>EDIT per your comment:</p>\n\n<p>if you dont want filter out during the iteration, you can reject new records before iterating. however, i wouldn't recommend this approach, as youre creating an entirely new array of records for little reason. Your performance shoundnt really take a hit assuming blogs dont have thousands of comments, but its still not a great practice.</p>\n\n<pre><code>&lt;% @blog.comments.reject(&amp;:new_record?).each do |comment| %&gt;\n</code></pre>\n\n<p>if you truly want to separate the logic from the view and controller, you can make another variable entirely dedicated to blog comments, prior to building a new one, so that its not included during the iteration.</p>\n\n<pre><code># controller\ndef show\n  @blog = Blog.find(params[:id])\n  @current_comments = @blog.comments\n  @new_comment = @blog.comments.build\nend\n\n#view\n&lt;% @current_comments.each do |comment| %&gt;\n</code></pre>\n\n<p>for what its worth, i'd still recommend the first apprach</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 1, "accepted_answer_id": 36754773, "answer_count": 3, "score": 2, "last_activity_date": 1461249658, "creation_date": 1461183026, "last_edit_date": 1461183426, "question_id": 36754188, "link": "https://stackoverflow.com/questions/36754188/rails-iterate-over-only-the-persisted-records-associated-to-an-object", "title": "Rails iterate over only the persisted records associated to an object", "body": "<p>I have something like this in my <code>show</code> action:</p>\n\n<pre><code>def show\n  @blog = Blog.find(params[:id])\n  @new_comment = @blog.comments.build\nend\n</code></pre>\n\n<p>Now in the view I do two things:</p>\n\n<ol>\n<li>I render the <code>_form.html.erb</code> for the <code>Comment</code> so that the user can add a comment to this blog</li>\n<li>I want to be able to iterate over the <strong>existing</strong> comments for this blog in order to display them.</li>\n</ol>\n\n<p>I am having problems with number <strong>2</strong>.  The issue is that as I iterate over the associated <code>comments</code> with this:</p>\n\n<pre><code>&lt;% @blog.comments.each do |comment| %&gt;\n</code></pre>\n\n<p>It is grabbing that <code>@new_comment</code> while iterating over the associated blogs.  How can I <strong>exclude</strong> that built-but-not-yet-persisted <code>@new_comment</code>?</p>\n\n<p>It would be nice if something like <code>@blog.comments.each_with_id</code> worked, or even <code>@blog.comments.persisted.each</code>.  Ultimately I only want to iterate over the persisted <code>comments</code> associated to this <code>blog</code>.  </p>\n\n<p>I would prefer not to have to nest a conditional that asks if the comment is <code>persisted?</code>.  I'm hoping there is an iterator out there for my current situation that just grabs the persisted records.</p>\n"}, {"tags": ["ruby", "rubygems", "ruby-1.9.2", "ruby-1.8.7"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461182095, "post_id": 36753735, "comment_id": 61087954, "body": "Can you add the full error message please. It seems that you missed the beginning."}, {"owner": {"reputation": 51, "user_id": 1642224, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4d8d32987ab0e62cadebf48b2e362ffa?s=128&d=identicon&r=PG", "display_name": "user1642224", "link": "https://stackoverflow.com/users/1642224/user1642224"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461182300, "post_id": 36753735, "comment_id": 61088093, "body": "@Uzbekjon It is printing entire json file but in the end it is showing up this error from /usr/lib/ruby/gems/1.8/gems/json-1.4.6/lib/json/common.rb:14&zwnj;&#8203;6:in `parse&#39;  from test.rb:9"}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1461186723, "post_id": 36753735, "comment_id": 61090765, "body": "<code>parse</code> is implemented as a c extension, do you know if your current gem is compiled against your current version of ruby?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461188628, "post_id": 36753735, "comment_id": 61091664, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Your JSON is valid. You say the filename is &quot;Output.json&quot; but the code shows you&#39;re trying to read &quot;output.json&quot;. If the file is &quot;Output.json&quot; the code would have a different error. As is your problem can&#39;t be duplicated. Also, you tagged Ruby 1.9.2 and Ruby 1.8.7. Which are you using? You shouldn&#39;t use either as they&#39;re both extremely out-of-date."}], "answers": [{"tags": [], "owner": {"reputation": 1466, "user_id": 6174238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F23jW.jpg?s=128&g=1", "display_name": "Z-Bone", "link": "https://stackoverflow.com/users/6174238/z-bone"}, "is_accepted": false, "score": 0, "last_activity_date": 1461191984, "creation_date": 1461191984, "answer_id": 36756476, "question_id": 36753735, "link": "https://stackoverflow.com/questions/36753735/how-to-parse-a-json-file-in-ruby-version-1-8-7/36756476#36756476", "title": "How to parse a JSON file in Ruby version 1.8.7", "body": "<p>Although I never tried version 1.8.7 (only 1.9.3 and higher)</p>\n\n<p>I would assume your problem is that you aren't reading the file correctly. Try File.open instead</p>\n\n<p>Try this:</p>\n\n<pre><code>file = File.open('output.json').read\ndata_hash = JSON.parse(file)\npp data_hash\n</code></pre>\n\n<p>as for printing the value krishna try this (after parsing):</p>\n\n<pre><code>puts data_hash['name']  # this outputs krishna\n</code></pre>\n\n<p>Good luck</p>\n"}], "owner": {"reputation": 51, "user_id": 1642224, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4d8d32987ab0e62cadebf48b2e362ffa?s=128&d=identicon&r=PG", "display_name": "user1642224", "link": "https://stackoverflow.com/users/1642224/user1642224"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1360, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461191984, "creation_date": 1461181579, "last_edit_date": 1461188276, "question_id": 36753735, "link": "https://stackoverflow.com/questions/36753735/how-to-parse-a-json-file-in-ruby-version-1-8-7", "title": "How to parse a JSON file in Ruby version 1.8.7", "body": "<p>I have a file called Output.json:</p>\n\n<pre><code>[\n  {\n    \"name\": \"krishna\",\n    \"service\": \"postman\",\n    \"host\": \"xxxxxx\",\n    \"doing\": [],\n    \"pool\": \"xxxxxx\",\n    \"roleType\": \"yyyyy\",\n    \"simple\": true\n  }\n ]\n</code></pre>\n\n<p>And this is my Test.rb file:</p>\n\n<pre><code>require 'rubygems'\nrequire 'json'\nrequire 'pp'\n\nfile = File.read('output.json')\ndata_hash= JSON.parse(file)\npp data_hash\n</code></pre>\n\n<p>When I try to run the script I get:</p>\n\n<pre><code>from /usr/lib/ruby/gems/1.8/gems/json-1.4.6/lib/json/common.rb:146:in `parse'\n</code></pre>\n\n<p>How do I print the value \"krishna\" when I call the name from the JSON file.</p>\n"}, {"tags": ["ruby", "openssl"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461181367, "post_id": 36753565, "comment_id": 61087483, "body": "Try to open the <code>@url</code> in the browser and check if their certificate is still active and good."}, {"owner": {"reputation": 2843, "user_id": 1403991, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9a1af29444759103642031d220ffc19?s=128&d=identicon&r=PG&f=1", "display_name": "Jono", "link": "https://stackoverflow.com/users/1403991/jono"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461182333, "post_id": 36753565, "comment_id": 61088114, "body": "The sites certification (clicking on the Lock beside the URL) is valid for a few more years."}, {"owner": {"reputation": 2843, "user_id": 1403991, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9a1af29444759103642031d220ffc19?s=128&d=identicon&r=PG&f=1", "display_name": "Jono", "link": "https://stackoverflow.com/users/1403991/jono"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461183826, "post_id": 36753565, "comment_id": 61089113, "body": "Would that mean my cert is the problem? Or is there anything else I can check to narrow it down?"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461184367, "post_id": 36753565, "comment_id": 61089481, "body": "According to error message, there is someone who has self signed her cert. That&#39;s why openssl complains. If you trust that server, then you need to install that cert as trusted. But, usually, it is a bad idea. If you don&#39;t know who that is, it is better not to do that. That might be a man-in-the-middle <i>attack</i>."}, {"owner": {"reputation": 2843, "user_id": 1403991, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9a1af29444759103642031d220ffc19?s=128&d=identicon&r=PG&f=1", "display_name": "Jono", "link": "https://stackoverflow.com/users/1403991/jono"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461187619, "post_id": 36753565, "comment_id": 61091214, "body": "Thanks!  Does ti matter that it&#39;s self-signed by a reputable provider:  ` 3 s:/C=SE/O=AddTrust AB/OU=AddTrust External TTP Network/CN=AddTrust External CA Root` `   i:/C=SE/O=AddTrust AB/OU=AddTrust External TTP Network/CN=AddTrust External CA Root`"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461187970, "post_id": 36753565, "comment_id": 61091378, "body": "That&#39;s the thing, if you consider issuer a reputable provider and willing to trust it, then you may decide to trust it."}, {"owner": {"reputation": 2843, "user_id": 1403991, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9a1af29444759103642031d220ffc19?s=128&d=identicon&r=PG&f=1", "display_name": "Jono", "link": "https://stackoverflow.com/users/1403991/jono"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461188131, "post_id": 36753565, "comment_id": 61091459, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/109736/discussion-between-jqwierdy-and-uzbekjon\">continue this discussion in chat</a>."}], "owner": {"reputation": 2843, "user_id": 1403991, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9a1af29444759103642031d220ffc19?s=128&d=identicon&r=PG&f=1", "display_name": "Jono", "link": "https://stackoverflow.com/users/1403991/jono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461184205, "creation_date": 1461181093, "last_edit_date": 1461184205, "question_id": 36753565, "link": "https://stackoverflow.com/questions/36753565/root-cause-of-openssl-sys-readexecution-expired", "title": "Root cause of OpenSSL &#39;sys read&#39;:execution expired&#39;", "body": "<p>I'm curious how I can test where this error is coming from? Because it's a timeout error is it an error on the server I'm sending it to? Or is it my own OpenSSL?</p>\n\n<p>This suddenly started happening with an app that was running well for the past few weeks.</p>\n\n<pre><code>client = HTTPClient.new\nclient.set_auth @url, API_USERNAME, API_PASSWORD\nresponse = client.post @url, payload.to_json, {'Content-Type' =&gt; 'application/json', 'Accept'=&gt;'application/json'}\n</code></pre>\n\n<p>Results in this:</p>\n\n<pre><code>/usr/local/lib/ruby/1.9/openssl/buffering.rb:36:in `sysread': execution expired (Timeout::Error)\n        from /usr/local/lib/ruby/1.9/openssl/buffering.rb:36:in `fill_rbuff'\n        from /usr/local/lib/ruby/1.9/openssl/buffering.rb:160:in `gets'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient/session.rb:352:in `gets'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient/session.rb:881:in `block in parse_header'\n        from /usr/local/lib/ruby/1.9/timeout.rb:58:in `timeout'\n        from /usr/local/lib/ruby/1.9/timeout.rb:89:in `timeout'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient/session.rb:877:in `parse_header'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient/session.rb:860:in `read_header'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient/session.rb:667:in `get_header'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient.rb:1202:in `do_get_header'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient.rb:1151:in `do_get_block'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient.rb:952:in `block in do_request'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient.rb:1046:in `protect_keep_alive_disconnected'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient.rb:951:in `do_request'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient.rb:813:in `request'\n        from /usr/local/lib/ruby/gems/1.9/gems/httpclient-2.5.2/lib/httpclient.rb:713:in `post'\n...\nmy app stack\n</code></pre>\n\n<p>I've tested it with empty submission but it still doesn't work. Any thoughts?</p>\n\n<p>Running from my server to the other:</p>\n\n<pre><code>echo \"\" | openssl s_client -showcerts -status -verify 0 \\\n        -connect some_site.com:443 2&gt;&amp;1 | \\\n        egrep \"Verify return|subject=/serial\"\nVerify return code: 19 (self signed certificate in certificate chain)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "rubygems", "rubymine"], "comments": [{"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1461180450, "post_id": 36753236, "comment_id": 61086922, "body": "I just fixed this by updating gem file."}], "answers": [{"comments": [{"owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1461181849, "post_id": 36753794, "comment_id": 61087791, "body": "Yea thats what I did, dunno why it took me so long to figure out. Thanks for the input."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "edited": false, "score": 0, "creation_date": 1461181918, "post_id": 36753794, "comment_id": 61087830, "body": "@Speedychuck it&#39;s okay, I had the same problem with my latest project, I searched Google for about two hours until I figured it out lol"}], "tags": [], "owner": {"reputation": 1100, "user_id": 4524789, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844f22aa3a74fa8145406ea89fb77491?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Collins", "link": "https://stackoverflow.com/users/4524789/jack-collins"}, "is_accepted": true, "score": 6, "last_activity_date": 1461181782, "creation_date": 1461181782, "answer_id": 36753794, "question_id": 36753236, "link": "https://stackoverflow.com/questions/36753236/rest-client-gem-is-deprecated-and-will-be-removed-from-rubygems-please-use-rest/36753794#36753794", "title": "rest_client gem is deprecated and will be removed from RubyGems. Please use rest-client gem instead", "body": "<p>Looks like you figured this out, but just to be clear...</p>\n\n<p>You want to update the <code>Gemfile</code>. </p>\n\n<p>Change</p>\n\n<p><code>gem 'rest_client'</code></p>\n\n<p>to </p>\n\n<p><code>gem 'rest-client'</code> </p>\n\n<p>and then run <code>bundle install</code>.</p>\n"}], "owner": {"reputation": 290, "user_id": 5630536, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/aa8b05352d99138a1001a5ec186497c4?s=128&d=identicon&r=PG&f=1", "display_name": "Speedychuck", "link": "https://stackoverflow.com/users/5630536/speedychuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1395, "favorite_count": 0, "accepted_answer_id": 36753794, "answer_count": 1, "score": 2, "last_activity_date": 1461181782, "creation_date": 1461180088, "question_id": 36753236, "link": "https://stackoverflow.com/questions/36753236/rest-client-gem-is-deprecated-and-will-be-removed-from-rubygems-please-use-rest", "title": "rest_client gem is deprecated and will be removed from RubyGems. Please use rest-client gem instead", "body": "<p>Trying to get started with API testing using rest client in ruby, however, hitting issue after issue, any how hopefully someone will be able to help.</p>\n\n<p>I am using RVM ruby-2.0.0-p648</p>\n\n<p>I have rest_client External Lib files, however, when I try to run my script I get the message: WARNING: The rest_client gem is deprecated and will be removed from RubyGems. Please use rest-client gem instead.</p>\n\n<p>Process finished with exit code 0</p>\n\n<p>So in my require I changed to rest-client and installed: gem install rest-client, however it is not showing in my external Libraries?</p>\n\n<p>Anyone hit this issue before with a solution?</p>\n\n<p>Also using rubymine.</p>\n"}, {"tags": ["ruby", "hash", "iterator", "hashtable", "block"], "comments": [{"owner": {"reputation": 1959, "user_id": 1207554, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/02bed14d16954900634cb83771445dc0?s=128&d=identicon&r=PG", "display_name": "Douglas G. Allen", "link": "https://stackoverflow.com/users/1207554/douglas-g-allen"}, "edited": false, "score": 0, "creation_date": 1461207974, "post_id": 36753126, "comment_id": 61097149, "body": "Thanks! I did look for this at first but was unable to find a similar question."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1461181415, "post_id": 36753378, "comment_id": 61087518, "body": "In part because of the version issue, I see no reason to <i>ever</i> write <code>?c</code>."}, {"owner": {"reputation": 1959, "user_id": 1207554, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/02bed14d16954900634cb83771445dc0?s=128&d=identicon&r=PG", "display_name": "Douglas G. Allen", "link": "https://stackoverflow.com/users/1207554/douglas-g-allen"}, "edited": false, "score": 0, "creation_date": 1461208358, "post_id": 36753378, "comment_id": 61097232, "body": "Yes it now works. Thanks!"}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 2, "last_activity_date": 1461180538, "creation_date": 1461180538, "answer_id": 36753378, "question_id": 36753126, "link": "https://stackoverflow.com/questions/36753126/where-do-things-like-prefix-shorthand-and-shortcuts-get-documented-in-the-ruby-a/36753378#36753378", "title": "Where do things like prefix shorthand and shortcuts get documented in the Ruby API references?", "body": "<p>That cookbook must have been written for Ruby version 1.8. You could get a character's integer ordinal like so:</p>\n\n<pre><code># 1.8\n1.8.7 :001 &gt; ?c\n=&gt; 99\n\n# 1.9 and upwards\n2.3.0 :002 &gt; ?c\n=&gt; \"c\"\n2.3.0 :002 &gt; 'c'.ord\n=&gt; 99\n</code></pre>\n\n<p>You must have been using Ruby later then <code>1.8</code>. The following should work:</p>\n\n<pre><code>letters = { 'v'.ord =&gt; 'aeiou',\n            'c'.ord =&gt; 'bcdfghjklmnprstvwyz' }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1461182677, "post_id": 36753384, "comment_id": 61088359, "body": "This works in pre-v.1.9 only because the method <a href=\"http://ruby-doc.org/core-1.8.7/Integer.html#method-i-ord\" rel=\"nofollow noreferrer\">Integer#ord</a> was provided. Would it not be better to write <code>&#39;v&#39;.ord</code> or <code>&quot;v&quot;.ord</code>?"}, {"owner": {"reputation": 1959, "user_id": 1207554, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/02bed14d16954900634cb83771445dc0?s=128&d=identicon&r=PG", "display_name": "Douglas G. Allen", "link": "https://stackoverflow.com/users/1207554/douglas-g-allen"}, "edited": false, "score": 0, "creation_date": 1461209772, "post_id": 36753384, "comment_id": 61097591, "body": "That&#39;s just the way the book is. It could be an older edition. I have July 2006: First Edition. All the code listings are on the O&#39;Reilly site. <a href=\"http://shop.oreilly.com/product/9780596523695.do\" rel=\"nofollow noreferrer\">shop.oreilly.com/product/9780596523695.do</a>"}], "tags": [], "owner": {"reputation": 357162, "user_id": 28804, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/015c999a9db79ffb3030b3cc207d0be8?s=128&d=identicon&r=PG", "display_name": "mipadi", "link": "https://stackoverflow.com/users/28804/mipadi"}, "is_accepted": false, "score": 3, "last_activity_date": 1461180552, "creation_date": 1461180552, "answer_id": 36753384, "question_id": 36753126, "link": "https://stackoverflow.com/questions/36753126/where-do-things-like-prefix-shorthand-and-shortcuts-get-documented-in-the-ruby-a/36753384#36753384", "title": "Where do things like prefix shorthand and shortcuts get documented in the Ruby API references?", "body": "<p>Prior to Ruby 1.9, <code>?c</code> would return the ASCII code character for <code>c</code>, which is 99. In Ruby 1.9 and later, <code>?c</code> just returns a string. You can get the ASCII code character using <code>?c.ord</code> instead.</p>\n\n<p>If you change the letters definition to</p>\n\n<pre><code>letters = { ?v.ord =&gt; 'aeiou',\n            ?c.ord =&gt; 'bcdfghjklmnprstvwyz' }\n</code></pre>\n\n<p>the code should work again.</p>\n"}], "owner": {"reputation": 1959, "user_id": 1207554, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/02bed14d16954900634cb83771445dc0?s=128&d=identicon&r=PG", "display_name": "Douglas G. Allen", "link": "https://stackoverflow.com/users/1207554/douglas-g-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1461181267, "answer_count": 2, "score": 0, "last_activity_date": 1461210336, "creation_date": 1461179736, "last_edit_date": 1461210336, "question_id": 36753126, "link": "https://stackoverflow.com/questions/36753126/where-do-things-like-prefix-shorthand-and-shortcuts-get-documented-in-the-ruby-a", "closed_reason": "Duplicate", "title": "Where do things like prefix shorthand and shortcuts get documented in the Ruby API references?", "body": "<p>Example:\nIn chapter two section five of Ruby Cookbook for random numbers there is this method. But it doesn't work.\nWhat are they trying to do?</p>\n\n<pre><code>def random_word\n  letters = { ?v =&gt; 'aeiou',\n              ?c =&gt; 'bcdfghjklmnprstvwyz' }\n  word = ''\n  'cvcvcvc'.each_byte do |x|\n    source = letters[x]\n    word &lt;&lt; source[rand(source.length)].chr\n  end\n  return word\nend\n</code></pre>\n\n<p>Where in the Core API reference do these short-hands/shortcuts/prefixes or what have you get documented? I'm currently using version 2.3.0 but have the chm for 2.2.3</p>\n"}, {"tags": ["ruby", "linux", "unix", "sleep"], "answers": [{"comments": [{"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 1, "creation_date": 1461185784, "post_id": 36754144, "comment_id": 61090254, "body": "Just to clarify, that being said, it&#39;s unlikely that the person writing that block of code was really trying to do what I described, so I kind of highly doubt whether or not those sleep calls would actually be useful. In fact, any time there is ruby application code with a call to sleep in it I&#39;d be very likely to say that it&#39;s a code smell (though not all the time)."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1461191469, "post_id": 36754144, "comment_id": 61092723, "body": "Great answer. Are you familiar with the <a href=\"http://rxr.whitequark.org/mri/ident?i=rb_f_sleep\" rel=\"nofollow noreferrer\">Ruby Cross Reference</a>? It&#39;s a pretty great way to explore the MRI source."}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1461208965, "post_id": 36754144, "comment_id": 61097380, "body": "@Jordan: awesome resource, looks pretty similar to LXR, thanks for the info!"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1461209030, "post_id": 36754144, "comment_id": 61097393, "body": "Yep, it&#39;s generated by LXR!"}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1461209200, "post_id": 36754144, "comment_id": 61097443, "body": "@Jordan: Ha, just saw the <code>This page was automatically generated by the 0.9.9 LXR engine.</code> :)"}], "tags": [], "owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "is_accepted": true, "score": 7, "last_activity_date": 1461184618, "last_edit_date": 1495542697, "creation_date": 1461182896, "answer_id": 36754144, "question_id": 36753094, "link": "https://stackoverflow.com/questions/36753094/sleep-0-has-special-meaning/36754144#36754144", "title": "sleep 0 has special meaning?", "body": "<p>Yes, for a couple of reasons, first of all, (mri) ruby threads are wrappers around native threads with an additional GVL lock.</p>\n\n<p>Essentially what ruby is doing when you call sleep is calling the underlying, native, platform dependent sleep and releasing the GVL so that other running threads can acquire it. So <code>sleep(0)</code> is both yielding to other native threads that may be waiting to be executed as well as releasing the current thread's hold on the GVL which would otherwise keep the Ruby VM from executing.</p>\n\n<p>Here's a quick rundown of how you can see this from mri source:</p>\n\n<ol>\n<li>We get the definition of Kernel sleep from <a href=\"https://github.com/ruby/ruby/blob/trunk/process.c#L7542\" rel=\"nofollow noreferrer\">https://github.com/ruby/ruby/blob/trunk/process.c#L7542</a>, which we see is implemented in c in the function <code>rb_f_sleep</code></li>\n<li>Next we go to <code>rb_f_sleep</code> and see that in the case of a single argument it calls <a href=\"https://github.com/ruby/ruby/blob/trunk/process.c#L4379\" rel=\"nofollow noreferrer\"><code>rb_thread_wait_for</code></a></li>\n<li>Going to the <code>rb_thread_wait_for</code> definition we see a call to <a href=\"https://github.com/ruby/ruby/blob/trunk/thread.c#L1172\" rel=\"nofollow noreferrer\"><code>sleep_timeval</code></a></li>\n<li><code>sleep_timeval</code> has a call to <a href=\"https://github.com/ruby/ruby/blob/trunk/thread.c#L1111\" rel=\"nofollow noreferrer\"><code>native_sleep</code></a></li>\n<li><code>native_sleep</code> is platform dependent and implemented in thread_pthread.c and thread_win32.c for posix and windows systems respectively. In either case we see calls to <code>GVL_UNLOCK_BEGIN</code> <a href=\"https://github.com/ruby/ruby/blob/trunk/thread_pthread.c#L1130\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/ruby/ruby/blob/trunk/thread_win32.c#L307\" rel=\"nofollow noreferrer\">here</a></li>\n</ol>\n\n<p><strong>EDIT</strong></p>\n\n<p>To be more precise:</p>\n\n<p><em>Windows:</em></p>\n\n<p>The windows implementation of <code>native_sleep</code> uses <code>WaitForMultipleObjects</code> which does indeed yield the remaining time slice, see: <a href=\"https://stackoverflow.com/questions/4170272/does-waitforsingleobject-give-up-a-threads-time-slice\">Does WaitForSingleObject give up a thread&#39;s time slice?</a></p>\n\n<p><em>Posix:</em></p>\n\n<p>The posix implementation uses <code>pthread_cond_timedwait</code>, which blocks the currently running thread.</p>\n\n<p>Either way, the main thing to note here is that Ruby threads use the underlying thread blocking mechanisms of the OS and release the GVL with any call to sleep, allowing other threads to take control.</p>\n"}], "owner": {"reputation": 197, "user_id": 6213176, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5524a528bd15219e53c4ad75e1408bcd?s=128&d=identicon&r=PG&f=1", "display_name": "Noobie", "link": "https://stackoverflow.com/users/6213176/noobie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1379, "favorite_count": 2, "accepted_answer_id": 36754144, "answer_count": 1, "score": 6, "last_activity_date": 1461184618, "creation_date": 1461179624, "last_edit_date": 1495540350, "question_id": 36753094, "link": "https://stackoverflow.com/questions/36753094/sleep-0-has-special-meaning", "title": "sleep 0 has special meaning?", "body": "<p>I'm seeing a lot of usages of <code>sleep 0</code> in my one of my client project. </p>\n\n<p>The code look something like this.</p>\n\n<pre><code>while true \n  ...\n  ...\n  sleep 0\nend\n</code></pre>\n\n<p>Reading through some of the answer of SO like <a href=\"https://stackoverflow.com/questions/3727420/significance-of-sleep0\">this</a> it seems that <code>sleep 0</code> has some significance.</p>\n\n<p>What I want to known now is that does scheduling for other thread to run (if they are waiting to run) during the time slice <code>0</code> is a job of a lang VM like ruby or python or it is a job of kernel.</p>\n\n<p>In order word does Ruby VM would honor <code>sleep 0</code> like it is mention in the above link.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "active-model-serializers", "rails-api"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461179622, "post_id": 36752966, "comment_id": 61086403, "body": "What are <code>subcategories</code> and how do they relate to <code>events</code>?"}, {"owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461179779, "post_id": 36752966, "comment_id": 61086501, "body": "I updated the question.  Sorry, I messed up when I wrote it and put in &quot;patient&quot; when i meant &quot;event_sub_category&quot;.  The question should be clearer now."}], "answers": [{"comments": [{"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "reply_to_user": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "edited": false, "score": 0, "creation_date": 1461213530, "post_id": 36754086, "comment_id": 61098663, "body": "i think you should remove the to_json in <code>@events = Event.where(begins_at: DateTime.now.beginning_of_day..1.week.from_now).group_by{|e| e.begins_at.beginning_of_day}.to_a.to_json</code>, because the activemodelserializer automatically handle it for you"}, {"owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "reply_to_user": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "edited": false, "score": 0, "creation_date": 1461213545, "post_id": 36754086, "comment_id": 61098667, "body": "are you using the full rails or rails api?"}, {"owner": {"reputation": 519, "user_id": 580231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/782800b51820776b271999f2605a3d19?s=128&d=identicon&r=PG", "display_name": "beauby", "link": "https://stackoverflow.com/users/580231/beauby"}, "edited": false, "score": 0, "creation_date": 1461248117, "post_id": 36754086, "comment_id": 61121767, "body": "This answer is right, along with removing <code>.to_a.to_json</code> at the end of the first line of your method. AMS will not kick-in if you call <code>to_json</code> on your model(s)."}, {"owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "edited": false, "score": 0, "creation_date": 1461273306, "post_id": 36754086, "comment_id": 61137552, "body": "I need it in an array.  Angular on the client side needs an array.  Also, removing .to_a.to_json doesn&#39;t fix it anyway :("}, {"owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "edited": false, "score": 0, "creation_date": 1461273414, "post_id": 36754086, "comment_id": 61137620, "body": "It&#39;s the group_by that is doing it, but I NEED the information to be grouped this way."}, {"owner": {"reputation": 519, "user_id": 580231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/782800b51820776b271999f2605a3d19?s=128&d=identicon&r=PG", "display_name": "beauby", "link": "https://stackoverflow.com/users/580231/beauby"}, "edited": false, "score": 0, "creation_date": 1461497975, "post_id": 36754086, "comment_id": 61216670, "body": "Whatever you do, calling <code>to_json</code> on the <i>resource</i> will make it so that <i>no AMS code is being called</i>. Your call."}], "tags": [], "owner": {"reputation": 1027, "user_id": 4036030, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100000007346996/picture?type=large", "display_name": "Zhiliang Xing", "link": "https://stackoverflow.com/users/4036030/zhiliang-xing"}, "is_accepted": false, "score": 4, "last_activity_date": 1461182678, "creation_date": 1461182678, "answer_id": 36754086, "question_id": 36752966, "link": "https://stackoverflow.com/questions/36752966/activemodel-serializer-with-has-and-belongs-to-many/36754086#36754086", "title": "ActiveModel Serializer with has_and_belongs_to_many", "body": "<p>try </p>\n\n<pre><code>class EventSerializer &lt; ActiveModel::Serializer\n  attributes :id, :name \n  has_many :event_sub_categories\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 8594276, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tknMCLKmNCw/AAAAAAAAAAI/AAAAAAAAAlQ/gNLj7hXWj6I/photo.jpg?sz=128", "display_name": "kellsaro", "link": "https://stackoverflow.com/users/8594276/kellsaro"}, "is_accepted": false, "score": 0, "last_activity_date": 1561824113, "creation_date": 1561824113, "answer_id": 56818963, "question_id": 36752966, "link": "https://stackoverflow.com/questions/36752966/activemodel-serializer-with-has-and-belongs-to-many/56818963#56818963", "title": "ActiveModel Serializer with has_and_belongs_to_many", "body": "<p>Try this:</p>\n\n<p>1- In your controller modify the query in a way it includes the event_sub_categories:</p>\n\n<pre><code>def index\n    @events = Event.includes(:event_sub_categories).where(begins_at: DateTime.now.beginning_of_day..1.week.from_now).group_by{|e| e.begins_at.beginning_of_day}.to_a.to_json\n    render json: @events\nend\n</code></pre>\n\n<p>2- create a Serializer for EventSubCategory model</p>\n\n<p>3- in your Event serializer create the method event_sub_categories</p>\n\n<pre><code>class EventSerializer &lt; ActiveModel::Serializer\n   attributes :id, :name, :event_sub_categories\n\n   def event_sub_categories\n     object.event_sub_categories.map do |sub_category|\n       EventSubCategorySerializer.new(sub_category)\n     end\n   end\n end\n</code></pre>\n"}], "owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1421, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1561824113, "creation_date": 1461179228, "last_edit_date": 1461179750, "question_id": 36752966, "link": "https://stackoverflow.com/questions/36752966/activemodel-serializer-with-has-and-belongs-to-many", "title": "ActiveModel Serializer with has_and_belongs_to_many", "body": "<p>I have a model called Event.  An Event <code>has_and_belongs_to_many :event_sub_categories</code> and a EventSubCategory <code>has_and_belongs_to_many :events</code>.  I have the following action:</p>\n\n<pre><code>def index\n    @events = Event.where(begins_at: DateTime.now.beginning_of_day..1.week.from_now).group_by{|e| e.begins_at.beginning_of_day}.to_a.to_json\n    render json: @events\nend\n</code></pre>\n\n<p>The action returns the data exactly as needed except for one problem, it doesn't have subcategories.  I need the json to contain the subcategories.  I tried making the following ActiveModel Serializer:</p>\n\n<pre><code> class EventSerializer &lt; ActiveModel::Serializer\n   attributes :id, :name, :event_sub_categories\n end\n</code></pre>\n\n<p>but the serializer above doesn't change the json at all.  How do I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "bundler"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461179474, "post_id": 36752961, "comment_id": 61086306, "body": "Open a new terminal and run <code>which ruby</code> and <code>rvm list</code> please."}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1461179479, "post_id": 36752961, "comment_id": 61086311, "body": "no idea if this will make a difference but the rvm docs have the syntax different for setting a default version, with <code>--default</code> at the end. can you try <code>rvm use 2.2.4 --default</code> and then restarting your shell?"}, {"owner": {"reputation": 479, "user_id": 2587509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wd7mE.gif?s=128&g=1", "display_name": "Rikkin", "link": "https://stackoverflow.com/users/2587509/rikkin"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461179841, "post_id": 36752961, "comment_id": 61086537, "body": "Ok, I will edit my answer @Uzbekjon"}, {"owner": {"reputation": 479, "user_id": 2587509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wd7mE.gif?s=128&g=1", "display_name": "Rikkin", "link": "https://stackoverflow.com/users/2587509/rikkin"}, "reply_to_user": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1461179924, "post_id": 36752961, "comment_id": 61086591, "body": "I get the same thing @sixty4bit"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1461181043, "post_id": 36752961, "comment_id": 61087286, "body": "I see... So, rvm is using the right version! The problem is with <code>bundler</code>. Try doing <code>gem install bundler &amp; bundle install</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461181415, "post_id": 36752961, "comment_id": 61087516, "body": "Copy the output of <code>rvm info</code> and paste it into your question, formatting it appropriately for readability. Obviously something isn&#39;t right in your environment. I suspect it&#39;s a problem with your PATH, and <code>rvm info</code> will tell us. <i>How</i> did you install RVM? What directions did you follow?"}, {"owner": {"reputation": 479, "user_id": 2587509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wd7mE.gif?s=128&g=1", "display_name": "Rikkin", "link": "https://stackoverflow.com/users/2587509/rikkin"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461182156, "post_id": 36752961, "comment_id": 61087995, "body": "@theTinMan I was already working in a 2.1.5 ruby project, I only used <code>rvm install 2.2.4</code> to get another version for another project. In fact, @Uzbekjon comment appeared to work here for me, I only run <code>gem install bundler</code> and <code>bundle install</code>.... I do not need to set my ruby version every time now. But isn`t bundler supposed to already be installed? Maybe I missed something during rvm configuration..."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461182498, "post_id": 36752961, "comment_id": 61088249, "body": "Bundler isn&#39;t tied to RVM. RVM only manages Ruby and gems, however unless another gem, such as Rails, is installed into a Ruby managed by RVM, and it explicitly requires Bundler, then Bundler won&#39;t be installed. Ruby doesn&#39;t install it by default and RVM doesn&#39;t care."}, {"owner": {"reputation": 479, "user_id": 2587509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wd7mE.gif?s=128&g=1", "display_name": "Rikkin", "link": "https://stackoverflow.com/users/2587509/rikkin"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461182995, "post_id": 36752961, "comment_id": 61088550, "body": "@theTinMan I see... But any ideia why everything worked fine when I used <code>rvm use 2.2.4</code> ?"}, {"owner": {"reputation": 3915, "user_id": 1166183, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/df7b096a1025e50293195fde727fef7f?s=128&d=identicon&r=PG", "display_name": "Ashish Bista", "link": "https://stackoverflow.com/users/1166183/ashish-bista"}, "edited": false, "score": 0, "creation_date": 1461185440, "post_id": 36752961, "comment_id": 61090093, "body": "You can set default Ruby with <code>rvm use 2.2.4 --default</code>. You can also pin Ruby version in the <code>Gemfile</code> as <code>ruby 2.2.4</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461186763, "post_id": 36752961, "comment_id": 61090787, "body": "I have no idea. You haven&#39;t given us enough information to do more than speculate."}], "owner": {"reputation": 479, "user_id": 2587509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wd7mE.gif?s=128&g=1", "display_name": "Rikkin", "link": "https://stackoverflow.com/users/2587509/rikkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 537, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1461181352, "creation_date": 1461179214, "last_edit_date": 1461181352, "question_id": 36752961, "link": "https://stackoverflow.com/questions/36752961/how-to-set-my-default-ruby-version-using-rvm", "title": "How to set my default ruby version using RVM", "body": "<p>I installed Ruby 2.2.4 using RVM.</p>\n\n<p>When I run <code>rvm list</code>, it seems ok:</p>\n\n<pre><code>   rvm rubies\n\n   ruby-2.1.5 [ x86_64 ]\n   ruby-2.2.1 [ x86_64 ]\n=* ruby-2.2.4 [ x86_64 ]\n</code></pre>\n\n<p>But when I try to run <code>rails server</code>, <code>bundle install</code> or anything else, this error occurs: </p>\n\n<pre><code>Users/user/.rvm/rubies/ruby-2.2.4/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- bundler/setup (LoadError)\n</code></pre>\n\n<p>To solve this problem, I run <code>rvm use 2.2.4</code> every time I open my terminal. When I do it everything works fine.</p>\n\n<p>But I don't want to have to run that every time I need to do anything, and it is already my default RVM. I even tried <code>rvm --default use 2.2.4</code>, but it has not solved my problem.</p>\n\n<p>Does anyone have an idea what is happening?</p>\n\n<hr>\n\n<p>When I run <code>which ruby</code>:</p>\n\n<pre><code>/Users/user/.rvm/rubies/ruby-2.2.4/bin/ruby\n</code></pre>\n\n<p>When I run <code>rvm list</code>:</p>\n\n<pre><code>   rvm rubies\n\n   ruby-2.1.5 [ x86_64 ]\n   ruby-2.2.1 [ x86_64 ]\n=* ruby-2.2.4 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "edited": false, "score": 0, "creation_date": 1461342252, "post_id": 36797676, "comment_id": 61171875, "body": "I&#39;m not trying to avoid doing anything beyond Oj.dump.  My use case is such that within the same Model I have to return different json data payloads.  With the Oj behavior of looking for as_json/to_json to serialize and the recommended approach of overriding these it didn&#39;t appear to allow for this.  Essentially I want to be able to do something like <code>Oj.dump(obj, meth_name)</code> and then meth_name would be used for serialization rather than to_json.  I&#39;m a little unclear what happens if I use your first suggestion of <code>Oj.dump(data.special_as_json)</code>.  Wouldn&#39;t Oj still call to_json at this point?"}, {"owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "reply_to_user": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "edited": false, "score": 0, "creation_date": 1461348689, "post_id": 36797676, "comment_id": 61175330, "body": "Check out the <a href=\"https://github.com/ohler55/oj#options\" rel=\"nofollow noreferrer\"><code>:mode</code> option</a> for details on this, but Oj doesn&#39;t need to call <code>*_json</code> on the Hash that <code>special_as_json</code> would return - it just drops to C and serializes it. Oj only looks for a <code>to&#47;as_json</code> method if you set <code>mode: :compat</code> and dump an object it can&#39;t handle natively, otherwise the default mode (<code>:object</code>) just dumps all the instance variables."}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 2, "last_activity_date": 1461338515, "creation_date": 1461338515, "answer_id": 36797676, "question_id": 36752825, "link": "https://stackoverflow.com/questions/36752825/use-a-specified-method-with-oj-dump-instead-of-as-json-or-to-json/36797676#36797676", "title": "Use a specified method with Oj.dump instead of as_json or to_json?", "body": "<p><code>Oj</code> doesn't have the option to set a default method to call, but it'll happily serialize the result of calling that method yourself.</p>\n\n<pre><code>Oj.dump(data.special_as_json)\n</code></pre>\n\n<p>This is also a good place for a presenter object that implements the method you want as <code>to_json</code>.</p>\n\n<pre><code>class Glove\n  private attr_reader :obj\n\n  def initialize(obj)\n    @obj = obj\n  end\n\n  def as_json(opts = {})\n    {\n      # ...\n    }\n  end\nend\n\nOj.dump(Glove.new(data))\n</code></pre>\n\n<p>Since it seems like you're trying to avoid typing anything beyond <code>Oj.dump</code>, you can write a wrapper around <code>Oj</code> that does the work.</p>\n\n<pre><code>module Ok\n  def self.dump(obj)\n    Oj.dump(obj.special_as_json)\n  end\nend\n\nOk.dump(data)\n</code></pre>\n\n<p>And of course, monkeypatching <code>Oj</code> is always an option, but not a good one.</p>\n"}, {"tags": [], "owner": {"reputation": 6256, "user_id": 2331735, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SC0hO.jpg?s=128&g=1", "display_name": "DenniJensen", "link": "https://stackoverflow.com/users/2331735/dennijensen"}, "is_accepted": false, "score": 1, "last_activity_date": 1578667675, "last_edit_date": 1578667675, "creation_date": 1578667215, "answer_id": 59683875, "question_id": 36752825, "link": "https://stackoverflow.com/questions/36752825/use-a-specified-method-with-oj-dump-instead-of-as-json-or-to-json/59683875#59683875", "title": "Use a specified method with Oj.dump instead of as_json or to_json?", "body": "<p>Try out</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Oj.generate({a: 'test'})\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>my_hash = {a: 'test'}\nOj.dump(my_hash, mode: :compat)\n</code></pre>\n"}], "owner": {"reputation": 4313, "user_id": 1177198, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/4ea56c658e69eef33b6557b20c7a19ab?s=128&d=identicon&r=PG", "display_name": "bigtunacan", "link": "https://stackoverflow.com/users/1177198/bigtunacan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "accepted_answer_id": 36797676, "answer_count": 2, "score": 1, "last_activity_date": 1578667675, "creation_date": 1461178792, "question_id": 36752825, "link": "https://stackoverflow.com/questions/36752825/use-a-specified-method-with-oj-dump-instead-of-as-json-or-to-json", "title": "Use a specified method with Oj.dump instead of as_json or to_json?", "body": "<p>Is there a way to specify a method to use for serialization when using Oj.dump rather than having it just default to to_json or as_json?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 839, "user_id": 534458, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5a64b086b589817d904b906acdbcd673?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/534458/aaron"}, "edited": false, "score": 0, "creation_date": 1461178788, "post_id": 36752653, "comment_id": 61085858, "body": "Isn&#39;t Salesforce&#39;s API just an HTTP API?"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1461182206, "creation_date": 1461182206, "answer_id": 36753929, "question_id": 36752653, "link": "https://stackoverflow.com/questions/36752653/do-constants-stay-the-same-for-all-users/36753929#36753929", "title": "Do constants stay the same for ALL users?", "body": "<p>A stateless API will never have a persistent connection, so there's no use in holding these in constants. Every HTTP request is a separate TCP connection by definition.</p>\n\n<p>It's only things like database or Websocket connections that persist and if you need to manage those you need a connection pool, not a simple constant. If the connection ever fails it needs to be replaced, and if more than one thread potentially requires it you have to handle acquisition and locking properly.</p>\n\n<p>Create your API connectors as necessary. Unless you have a <em>measurable</em> performance problem don't worry about it.</p>\n"}, {"tags": [], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "is_accepted": false, "score": -1, "last_activity_date": 1461182283, "creation_date": 1461182283, "answer_id": 36753961, "question_id": 36752653, "link": "https://stackoverflow.com/questions/36752653/do-constants-stay-the-same-for-all-users/36753961#36753961", "title": "Do constants stay the same for ALL users?", "body": "<p>A Ruby constant is like a variable, except that its value is supposed to remain constant for the duration of the program. The Ruby interpreter does not actually enforce the constancy of constants, but it does issue a warning if a program changes the value of a constant.</p>\n\n<p>Reference: <a href=\"http://rubylearning.com/satishtalim/ruby_constants.html\" rel=\"nofollow\">http://rubylearning.com/satishtalim/ruby_constants.html</a></p>\n"}], "owner": {"reputation": 55, "user_id": 4907347, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s8Se_joROZI/AAAAAAAAAAI/AAAAAAAAOH8/AUCxXncE4Qw/photo.jpg?sz=128", "display_name": "Vinny Alfieri", "link": "https://stackoverflow.com/users/4907347/vinny-alfieri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1461182283, "creation_date": 1461178339, "last_edit_date": 1461181834, "question_id": 36752653, "link": "https://stackoverflow.com/questions/36752653/do-constants-stay-the-same-for-all-users", "title": "Do constants stay the same for ALL users?", "body": "<p>I have a web app that I built. It communicates with the Salesforce API. I have users and administrators. All connections to the API use the same credentials. </p>\n\n<p>I am concerned that my API connection is going to be created multiple times because each admin that is logged in has their own instance of the connection. </p>\n\n<p>If I hold the API connection in a constant, do all other sessions/users have access to that exact connection or do I have to connect for each user, or how can I share one single API connection for ALL users?</p>\n"}, {"tags": ["ruby", "bubble-sort"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1461178063, "post_id": 36752524, "comment_id": 61085404, "body": "What is your question?"}, {"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 2, "creation_date": 1461178340, "post_id": 36752524, "comment_id": 61085560, "body": "<code>arg.each do |n|</code> - n is array element, not index. If you want index, use <code>each_with_index</code>"}, {"owner": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1461179834, "post_id": 36752524, "comment_id": 61086534, "body": "@sawa why do I run into that error and how do I get the code to work -- that is iterate through the array until the array is sorted from the least values to the greatest values."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6189580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd745abf2defe81528c9e83e6b86d1d?s=128&d=identicon&r=PG", "display_name": "Wells", "link": "https://stackoverflow.com/users/6189580/wells"}, "reply_to_user": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "edited": false, "score": 0, "creation_date": 1461182445, "post_id": 36753237, "comment_id": 61088207, "body": "Edited... sorry I skiped"}, {"owner": {"reputation": 71, "user_id": 6189580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd745abf2defe81528c9e83e6b86d1d?s=128&d=identicon&r=PG", "display_name": "Wells", "link": "https://stackoverflow.com/users/6189580/wells"}, "reply_to_user": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "edited": false, "score": 0, "creation_date": 1461226019, "post_id": 36753237, "comment_id": 61105172, "body": "Finally I had time to test the above and it did worked... One of the problem with ur code was using variable n as an index whereas it is an array element"}], "tags": [], "owner": {"reputation": 71, "user_id": 6189580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bd745abf2defe81528c9e83e6b86d1d?s=128&d=identicon&r=PG", "display_name": "Wells", "link": "https://stackoverflow.com/users/6189580/wells"}, "is_accepted": true, "score": 0, "last_activity_date": 1461226366, "last_edit_date": 1461226366, "creation_date": 1461180089, "answer_id": 36753237, "question_id": 36752524, "link": "https://stackoverflow.com/questions/36752524/creating-a-bubble-sort-method-from-scratch-and-run-into-a-nomethod-error/36753237#36753237", "title": "Creating a bubble sort method from scratch and run into a &quot;&lt;&quot; noMethod error", "body": "<p>From first glance I can see a few problems with ur bubbles sort algo.</p>\n\n<p>editing ur code I came up with this... I do not have a means of running this as of now, so I don't know if the below code would also be valid... buh there's no harm in trying rai.</p>\n\n<pre><code>count = 0\n\nwhile count &lt; arg.length \n    n = 0\n    while n &lt; arg.length - count\n        if arg[count] &gt; arg[n+count]\n            arg[count], arg[n+count] = arg[n+count], arg[count]\n        end\n        n += 1\n    end\n    count += 1\nend\nputs arg\n</code></pre>\n\n<p>That should do the fix... lemme know if it doesn't work</p>\n"}], "owner": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 36753237, "answer_count": 1, "score": -1, "last_activity_date": 1461226366, "creation_date": 1461177955, "question_id": 36752524, "link": "https://stackoverflow.com/questions/36752524/creating-a-bubble-sort-method-from-scratch-and-run-into-a-nomethod-error", "title": "Creating a bubble sort method from scratch and run into a &quot;&lt;&quot; noMethod error", "body": "<p>Making a bubble sort method from scratch and continually run into a noMethod error citing the \"&lt;\" sign as the culprit.</p>\n\n<pre><code>array = [2, 1]\n\ndef bubble_sort(arg)\n    count = 0\n    while count &lt; arg.length \n        arg.each do |n|\n            if arg[n] &gt; arg[n + 1]\n                arg[n], arg[n + 1] = arg[n + 1], arg[n]\n            end\n            count += 1\n        end\n    end\n    puts arg\nend\n\nbubble_sort(array)\n</code></pre>\n\n<p>Any help, beyond what I'm asking as well, will be much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1461178974, "post_id": 36752317, "comment_id": 61085978, "body": "this external consumer app, is it a web browser? or something else"}, {"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 1, "creation_date": 1461179068, "post_id": 36752317, "comment_id": 61086036, "body": "What is the error? Your link_to looks correct."}, {"owner": {"reputation": 3695, "user_id": 1504372, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/HOkpL.jpg?s=128&g=1", "display_name": "lostphilosopher", "link": "https://stackoverflow.com/users/1504372/lostphilosopher"}, "reply_to_user": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1461179072, "post_id": 36752317, "comment_id": 61086042, "body": "@Doon Yes, it&#39;s another rails app accessible to the browser. It has a forms for creating, and links for viewing, now I&#39;m trying to find a simple way to delete."}, {"owner": {"reputation": 3695, "user_id": 1504372, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/HOkpL.jpg?s=128&g=1", "display_name": "lostphilosopher", "link": "https://stackoverflow.com/users/1504372/lostphilosopher"}, "reply_to_user": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1461179291, "post_id": 36752317, "comment_id": 61086179, "body": "@CarsonCole, oops, should have included that, added."}, {"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1461179416, "post_id": 36752317, "comment_id": 61086268, "body": "It still looks correct. Can you include more of the error..."}, {"owner": {"reputation": 3695, "user_id": 1504372, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/HOkpL.jpg?s=128&g=1", "display_name": "lostphilosopher", "link": "https://stackoverflow.com/users/1504372/lostphilosopher"}, "reply_to_user": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1461179924, "post_id": 36752317, "comment_id": 61086590, "body": "@CarsonCole it&#39;s all gem code, but I&#39;ve added the full output."}, {"owner": {"reputation": 3695, "user_id": 1504372, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/HOkpL.jpg?s=128&g=1", "display_name": "lostphilosopher", "link": "https://stackoverflow.com/users/1504372/lostphilosopher"}, "reply_to_user": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1461180034, "post_id": 36752317, "comment_id": 61086668, "body": "@CarsonCole <code>[POST] \\&quot;&#47;users&#47;1&#47;attendees&#47;2</code> seems like the crucial failure, since there is indeed no such route."}, {"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1461181529, "post_id": 36752317, "comment_id": 61087581, "body": "just curious, but what is in your application.js file? mine worked fine without remote: true"}, {"owner": {"reputation": 3695, "user_id": 1504372, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/HOkpL.jpg?s=128&g=1", "display_name": "lostphilosopher", "link": "https://stackoverflow.com/users/1504372/lostphilosopher"}, "reply_to_user": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1461182085, "post_id": 36752317, "comment_id": 61087943, "body": "@CarsonCole, did the JavaScript work fine, or the raw link? The JS works for me too. But to answer your question: require jquery, jquery_ujs, turbolinks, and require_tree . (I believe this is just default rails.)"}, {"owner": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1461182533, "post_id": 36752317, "comment_id": 61088275, "body": "The raw link worked fine for me, and with the remote: true, the javascript will send the call, leaving the existing page intact, which may be what you want. So not sure why your link was making a [POST], when mine is correctly a [DELETE]"}, {"owner": {"reputation": 3695, "user_id": 1504372, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/HOkpL.jpg?s=128&g=1", "display_name": "lostphilosopher", "link": "https://stackoverflow.com/users/1504372/lostphilosopher"}, "reply_to_user": {"reputation": 3494, "user_id": 796004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/3pFzW.jpg?s=128&g=1", "display_name": "Carson Cole", "link": "https://stackoverflow.com/users/796004/carson-cole"}, "edited": false, "score": 0, "creation_date": 1461183236, "post_id": 36752317, "comment_id": 61088733, "body": "@CarsonCole, whoa... That&#39;s weird. This is Rails 5 running in API mode, maybe there&#39;s quirks there?"}], "answers": [{"tags": [], "owner": {"reputation": 3695, "user_id": 1504372, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/HOkpL.jpg?s=128&g=1", "display_name": "lostphilosopher", "link": "https://stackoverflow.com/users/1504372/lostphilosopher"}, "is_accepted": false, "score": 1, "last_activity_date": 1461181081, "last_edit_date": 1495539862, "creation_date": 1461181081, "answer_id": 36753561, "question_id": 36752317, "link": "https://stackoverflow.com/questions/36752317/rails-form-for-delete/36753561#36753561", "title": "Rails form_for delete", "body": "<p>Sigh...</p>\n\n<p>I was missing <strong>remote: true</strong>.</p>\n\n<p><code>= link_to \"Delete\", \"http://localhost:3001/users/1/attendees/THE_RESOURCE_ID?user_email=EMAIL&amp;user_token=TOKEN&amp;\", method: :delete, remote: true</code></p>\n\n<p>For anyone interested this is how I enabled CORS: <a href=\"http://sourcey.com/building-the-prefect-rails-5-api-only-app/#enabling-cors\" rel=\"nofollow noreferrer\">http://sourcey.com/building-the-prefect-rails-5-api-only-app/#enabling-cors</a>. And this was the SO post the reminded me to use <code>remote: true</code>: <a href=\"https://stackoverflow.com/questions/5774569/simple-example-of-rails-3-ujs-using-ajax-to-make-a-remote-call-and-rendering\">Simple example of Rails 3 + UJS using Ajax to make a remote call, and rendering the resulting JSON object</a>.</p>\n"}], "owner": {"reputation": 3695, "user_id": 1504372, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/HOkpL.jpg?s=128&g=1", "display_name": "lostphilosopher", "link": "https://stackoverflow.com/users/1504372/lostphilosopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461181081, "creation_date": 1461177285, "last_edit_date": 1461179871, "question_id": 36752317, "link": "https://stackoverflow.com/questions/36752317/rails-form-for-delete", "title": "Rails form_for delete", "body": "<p>I've built a Rails 5 RESTful API, and I've been working on a consumer app that I'm using to test out the interface. CR of CRUD works great, but I'm stuck on Delete. Both apps are running locally.</p>\n\n<p>I want to call: <code>DELETE /users/:user_id/attendees/:id(.:format) attendees#destroy</code>\nfrom my external consumer app. Ideally this would be done with conventional Rails view helpers calling the API directly, and wouldn't require custom JavaScript or wrapping the API (or its resources) in the consumer app.</p>\n\n<p>I have it working in JavaScript:</p>\n\n<pre><code>$(\"#button\").click(function(){\n  resource_id = $(\"#button\").data('resource-id');\n  $.ajax({\n    type: \"DELETE\",\n    url: \"http://localhost:3001/users/1/attendees/\" + resource_id + \"?user_email=EMAIL&amp;user_token=TOKEN&amp;\",\n    dataType: \"json\",\n    data: {\"_method\":\"delete\"},\n    complete: function(){\n      alert(\"Deleted successfully\");\n  }\n  });\n});\n</code></pre>\n\n<p>What I'd like is something like:<br>\n<code>= link_to \"Delete\", \"http://localhost:3001/users/1/attendees/THE_RESOURCE_ID?user_email=EMAIL&amp;user_token=TOKEN&amp;\", method: :delete</code><br>\nwhich render this HTML:<br>\n<code>&lt;a rel=\"nofollow\" data-method=\"delete\" href=\"http://localhost:3001/users/1/attendees/THE_RESOURCE_ID?user_email=EMAIL&amp;amp;user_token=TOKEN&amp;amp;\"&gt;Delete&lt;/a&gt;</code></p>\n\n<p>Which doesn't work:  </p>\n\n<pre><code>{\n  \"status\":404,\n  \"error\":\"Not Found\",\n  \"exception\":\"#\\u003cActionController::RoutingError: No route matches [POST] \\\"/users/1/attendees/2\\\"\\u003e\",\n  \"traces\":{\n    \"Application Trace\":[],\n    \"Framework Trace\":\n      [{\"id\":0,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'\"},\n      {\"id\":1,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\"},\n      {\"id\":2,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/railties/lib/rails/rack/logger.rb:36:in `call_app'\"},\n      {\"id\":3,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/railties/lib/rails/rack/logger.rb:24:in `block in call'\"},\n      {\"id\":4,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/activesupport/lib/active_support/tagged_logging.rb:70:in `block in tagged'\"},\n      {\"id\":5,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/activesupport/lib/active_support/tagged_logging.rb:26:in `tagged'\"},\n      {\"id\":6,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/activesupport/lib/active_support/tagged_logging.rb:70:in `tagged'\"},\n      {\"id\":7,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/railties/lib/rails/rack/logger.rb:24:in `call'\"},\n      {\"id\":8,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/actionpack/lib/action_dispatch/middleware/request_id.rb:24:in `call'\"},\n      {\"id\":9,\"trace\":\"rack (2.0.0.alpha) lib/rack/runtime.rb:22:in `call'\"},\n      {\"id\":10,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/activesupport/lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\"},\n      {\"id\":11,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/actionpack/lib/action_dispatch/middleware/executor.rb:12:in `call'\"},\n      {\"id\":12,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/actionpack/lib/action_dispatch/middleware/static.rb:136:in `call'\"},\n      {\"id\":13,\"trace\":\"rack (2.0.0.alpha) lib/rack/sendfile.rb:111:in `call'\"},\n      {\"id\":14,\"trace\":\"rack-cors (0.4.0) lib/rack/cors.rb:80:in `call'\"},\n      {\"id\":15,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/railties/lib/rails/engine.rb:522:in `call'\"},\n      {\"id\":16,\"trace\":\"puma (3.2.0) lib/puma/configuration.rb:227:in `call'\"},\n      {\"id\":17,\"trace\":\"puma (3.2.0) lib/puma/server.rb:561:in `handle_request'\"},\n      {\"id\":18,\"trace\":\"puma (3.2.0) lib/puma/server.rb:406:in `process_client'\"},\n      {\"id\":19,\"trace\":\"puma (3.2.0) lib/puma/server.rb:271:in `block in run'\"},\n      {\"id\":20,\"trace\":\"puma (3.2.0) lib/puma/thread_pool.rb:111:in `call'\"},\n      {\"id\":21,\"trace\":\"puma (3.2.0) lib/puma/thread_pool.rb:111:in `block in spawn_thread'\"}],\n    \"Full Trace\":[{\"id\":0,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:53:in `call'\"},\n      {\"id\":1,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\"},\n      {\"id\":2,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/railties/lib/rails/rack/logger.rb:36:in `call_app'\"},\n      {\"id\":3,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/railties/lib/rails/rack/logger.rb:24:in `block in call'\"},\n      {\"id\":4,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/activesupport/lib/active_support/tagged_logging.rb:70:in `block in tagged'\"},\n      {\"id\":5,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/activesupport/lib/active_support/tagged_logging.rb:26:in `tagged'\"},\n      {\"id\":6,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/activesupport/lib/active_support/tagged_logging.rb:70:in `tagged'\"},\n      {\"id\":7,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/railties/lib/rails/rack/logger.rb:24:in `call'\"},\n      {\"id\":8,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/actionpack/lib/action_dispatch/middleware/request_id.rb:24:in `call'\"},\n      {\"id\":9,\"trace\":\"rack (2.0.0.alpha) lib/rack/runtime.rb:22:in `call'\"},\n      {\"id\":10,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/activesupport/lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\"},\n      {\"id\":11,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/actionpack/lib/action_dispatch/middleware/executor.rb:12:in `call'\"},\n      {\"id\":12,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/actionpack/lib/action_dispatch/middleware/static.rb:136:in `call'\"},\n      {\"id\":13,\"trace\":\"rack (2.0.0.alpha) lib/rack/sendfile.rb:111:in `call'\"},\n      {\"id\":14,\"trace\":\"rack-cors (0.4.0) lib/rack/cors.rb:80:in `call'\"},\n      {\"id\":15,\"trace\":\"/Users/MYUSER/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/bundler/gems/rails-7b82e1c77b48/railties/lib/rails/engine.rb:522:in `call'\"},\n      {\"id\":16,\"trace\":\"puma (3.2.0) lib/puma/configuration.rb:227:in `call'\"},\n      {\"id\":17,\"trace\":\"puma (3.2.0) lib/puma/server.rb:561:in `handle_request'\"},\n      {\"id\":18,\"trace\":\"puma (3.2.0) lib/puma/server.rb:406:in `process_client'\"},\n      {\"id\":19,\"trace\":\"puma (3.2.0) lib/puma/server.rb:271:in `block in run'\"},\n      {\"id\":20,\"trace\":\"puma (3.2.0) lib/puma/thread_pool.rb:111:in `call'\"},\n      {\"id\":21,\"trace\":\"puma (3.2.0) lib/puma/thread_pool.rb:111:in `block in spawn_thread'\"}]}}\n</code></pre>\n\n<p>I have the <code>rack-cors</code> gem installed and working.  </p>\n\n<p>(I realize there's other refactoring to do, but those are problems I think I know how to solve. :-))</p>\n\n<p>Thanks for your help!</p>\n\n<p>Here's the relevant existing routes for the API:  </p>\n\n<pre><code>  user_attendees GET    /users/:user_id/attendees(.:format)     attendees#index\n                 POST   /users/:user_id/attendees(.:format)     attendees#create\n   user_attendee GET    /users/:user_id/attendees/:id(.:format) attendees#show\n                 PATCH  /users/:user_id/attendees/:id(.:format) attendees#update\n                 PUT    /users/:user_id/attendees/:id(.:format) attendees#update\n                 DELETE /users/:user_id/attendees/:id(.:format) attendees#destroy\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ckeditor"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1461185023, "post_id": 36752987, "comment_id": 61089865, "body": "HI, so i need to 1. keep my current deploy.rb, 2. include code that starts with set :link dirs, and 3 include your task code?  Thank you"}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1461266536, "post_id": 36752987, "comment_id": 61133624, "body": "HI, so i need to 1. keep my current deploy.rb, 2. include code that starts with set :link dirs, and 3 include your task code? Thank you"}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1461267089, "post_id": 36752987, "comment_id": 61133930, "body": "i get an error NoMethodError: undefined method `map&#39; for :roles:Symbol,  It seems like this syntax is for older capistrano...  Is there a way you can help with syntax for cap 3, ?"}, {"owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "edited": false, "score": 0, "creation_date": 1461267826, "post_id": 36752987, "comment_id": 61134365, "body": "does this look right? ` task :symlink_config do   on primary roles :app do     run &quot;ln -nfs /home/rails/app/messagefollowerlive/shared/tmp #/home/rails/app/messagefollowerlive/current/tmp&quot;   end after &quot;deploy:finalize_update&quot;, &quot;deploy:symlink_config&quot; `"}], "tags": [], "owner": {"reputation": 971, "user_id": 2301404, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a58cf6b9f5d523fa29d55b184ad630ba?s=128&d=identicon&r=PG", "display_name": "Sagar.Patil", "link": "https://stackoverflow.com/users/2301404/sagar-patil"}, "is_accepted": true, "score": 1, "last_activity_date": 1461179306, "creation_date": 1461179306, "answer_id": 36752987, "question_id": 36751957, "link": "https://stackoverflow.com/questions/36751957/images-get-erased-after-deploy/36752987#36752987", "title": "images get erased after deploy", "body": "<p>You have done everything right, but you just missed out to create the symlinks for the shard directory.</p>\n\n<pre><code>  task :symlink_config, roles: :app do\n     run \"ln -nfs /home/rails/app/myappname/shared/tmp #/home/rails/app/myappname/current/tmp\"\n  end\n  after \"deploy:finalize_update\", \"deploy:symlink_config\"\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 6067400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e2d643b76deb212cb17223068a931b2?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/6067400/boris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 36752987, "answer_count": 1, "score": 0, "last_activity_date": 1461179306, "creation_date": 1461176171, "question_id": 36751957, "link": "https://stackoverflow.com/questions/36751957/images-get-erased-after-deploy", "title": "images get erased after deploy", "body": "<p>I am using rails 4.2 and capistrano</p>\n\n<p>My images that get uploaded via creditor get erased, i think with each new commit.\nI save images to public/ckeditor_assets/pictures directory.</p>\n\n<p>Do i simply need to insert this code </p>\n\n<pre><code>set :linked_dirs, %w{log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system public/ckeditor_assets/pictures}\n</code></pre>\n\n<p>Here is my current deploy.rb</p>\n\n<pre><code># config valid only for current version of Capistrano\nlock '3.4.0'\n\nset :application, 'my app name'\nset :repo_url, 'my git directory'\n\n# Default branch is :master\n# ask :branch, `git rev-parse --abbrev-ref HEAD`.chomp\n\n# Default deploy_to directory is /var/www/my_app_name\nset :deploy_to, '/home/rails/app/myappname'\n\n# Default tmp_dir directory is /var/www/tmp\nset :tmp_dir, \"/home/rails/app/myappname/shared/tmp\"\n\n# Default value for :scm is :git\nset :scm, :git\n\n# Default value for :format is :pretty\n# set :format, :pretty\n\n\n\n\n# Default value for :log_level is :debug\n# set :log_level, :debug\n\n# Default value for :pty is false\nset :pty, false\n\n# Default value for :linked_files is []\n# set :linked_files, fetch(:linked_files, []).push('config/database.yml', 'config/secrets.yml')\nset :linked_files, fetch(:linked_files, []).push('config/application.yml')\n\n# Default value for linked_dirs is []\nset :linked_dirs, fetch(:linked_dirs, []).push('log', 'tmp/pids', 'tmp/sockets', 'public/system')\n\n#to save uploaded images\n#set :linked_dirs, %w(public/ckeditor_assets/pictures)\nset :linked_dirs, %w{log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system public/ckeditor_assets/pictures}\n\n# Default value for default_env is {}\n# set :default_env, { path: \"/opt/ruby/bin:$PATH\" }\n\n# Default value for keep_releases is 5\nset :keep_releases, 5\n\nset :default_env, {\n  PATH: \"$HOME/.rbenv/shims:$HOME/.rbenv/bin:$PATH\",\n  RBENV_ROOT: '~/.rbenv',\n  RBENV_VERSION: File.read('.ruby-version').strip\n}\n\nset :sidekiq_role, :app\nset :sidekiq_config, -&gt; { File.join(shared_path, 'config', 'sidekiq.yml') }\nset :sidekiq_env, 'production'\n\n\nset :whenever_identifier, -&gt;{ \"#{fetch(:application)}_#{fetch(:stage)}\" }\nset :whenever_roles,        -&gt;{ :app }\nset :whenever_options,      -&gt;{ {:roles =&gt; fetch(:whenever_roles)} }\nset :whenever_environment,  -&gt;{ fetch :rails_env, \"production\" }\nset :whenever_variables,    -&gt;{ \"environment=#{fetch :whenever_environment}\" }\nset :whenever_update_flags, -&gt;{ \"--update-crontab #{fetch :whenever_identifier} --set #{fetch :whenever_variables}\" }\nset :whenever_clear_flags,  -&gt;{ \"--clear-crontab #{fetch :whenever_identifier}\" }\n\nnamespace :deploy do\n  after :restart, :clear_cache do\n    on roles(:web), in: :groups, limit: 3, wait: 10 do\n      # Here we can do anything such as:\n      within release_path do\n        execute :rake, 'cache:clear'\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 5248801, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e04c2bb292a32767ce85fc2c7a29a53f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvertail", "link": "https://stackoverflow.com/users/5248801/silvertail"}, "is_accepted": false, "score": 0, "last_activity_date": 1461176607, "creation_date": 1461176607, "answer_id": 36752096, "question_id": 36751860, "link": "https://stackoverflow.com/questions/36751860/how-can-i-modify-positions-in-a-two-dimensional-array/36752096#36752096", "title": "How can I modify positions in a two dimensional array?", "body": "<p>you are essentially saying create an array with three elements, and put this element (the new array) in each space. The element you are putting in the first array, is just created once. The only way I know to do what you want is using a for loop to push as many new arrays into the first array as you need. something like this: </p>\n\n<pre><code>table = Array.new(1, Array.new(3, 0))\n0..1.each do |i| \n  table.push(Array.new(3, 0)) #add two more arrays to the first dimension\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 766, "user_id": 1488591, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4373e8b5ebf359cb601120389378406a?s=128&d=identicon&r=PG", "display_name": "kunashir", "link": "https://stackoverflow.com/users/1488591/kunashir"}, "is_accepted": true, "score": 2, "last_activity_date": 1461176618, "creation_date": 1461176618, "answer_id": 36752101, "question_id": 36751860, "link": "https://stackoverflow.com/questions/36751860/how-can-i-modify-positions-in-a-two-dimensional-array/36752101#36752101", "title": "How can I modify positions in a two dimensional array?", "body": "<p>For fix with behavior, try next:</p>\n\n<pre><code>empty_table = Array.new(3) { Array.new(3) }\n</code></pre>\n\n<p>From array manual:</p>\n\n<blockquote>\n  <p>Note that the second argument populates the array with references to the same object. Therefore, it is only recommended in cases when you need to instantiate arrays with natively immutable objects such as Symbols, numbers, true or false.</p>\n</blockquote>\n"}], "owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 36752101, "answer_count": 2, "score": 0, "last_activity_date": 1461176618, "creation_date": 1461175813, "question_id": 36751860, "link": "https://stackoverflow.com/questions/36751860/how-can-i-modify-positions-in-a-two-dimensional-array", "title": "How can I modify positions in a two dimensional array?", "body": "<p>If I do the following:</p>\n\n<pre><code>table = Array.new(\n  3,\n  Array.new(\n    3,\n    nil\n  )\n)\n\n# =&gt;\n  [\n    [nil, nil, nil], \n    [nil, nil, nil], \n    [nil, nil, nil]\n  ]\n</code></pre>\n\n<p>Now I would like to modify the value at index 2 in the second array, so I would do:</p>\n\n<pre><code>table[1][2] = 2.343\n</code></pre>\n\n<p>I would now expect to see: </p>\n\n<pre><code># =&gt;\n  [\n    [nil, nil, nil], \n    [nil, nil, 2.343], \n    [nil, nil, nil]\n  ]\n</code></pre>\n\n<p>However what I'm getting is this:</p>\n\n<pre><code>[\n  [nil, nil, 2.343], \n  [nil, nil, 2.343], \n  [nil, nil, 2.343]\n]\n</code></pre>\n\n<p>What am I not getting here?</p>\n\n<p>PS: Running ruby 2.3</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 500, "user_id": 231688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7a35cb58a5673b4d8944a1aad667cf?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Phoenix", "link": "https://stackoverflow.com/users/231688/silver-phoenix"}, "edited": false, "score": 1, "creation_date": 1461175603, "post_id": 36751726, "comment_id": 61083915, "body": "Something tells me you have to do <code>json[0][&quot;name&quot;]</code>. What is the content of the response body? You may be receiving a single element array with the content instead of the content itself."}, {"owner": {"reputation": 2555, "user_id": 4926060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd516d1d066a4e7c2d27aa258c187892?s=128&d=identicon&r=PG&f=1", "display_name": "David Meza", "link": "https://stackoverflow.com/users/4926060/david-meza"}, "edited": false, "score": 0, "creation_date": 1461175664, "post_id": 36751726, "comment_id": 61083955, "body": "Does your <code>Location</code> model store zip codes as string or integer?"}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "reply_to_user": {"reputation": 2555, "user_id": 4926060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd516d1d066a4e7c2d27aa258c187892?s=128&d=identicon&r=PG&f=1", "display_name": "David Meza", "link": "https://stackoverflow.com/users/4926060/david-meza"}, "edited": false, "score": 0, "creation_date": 1461175764, "post_id": 36751726, "comment_id": 61084029, "body": "string @DavidMeza thanks"}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "reply_to_user": {"reputation": 500, "user_id": 231688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7a35cb58a5673b4d8944a1aad667cf?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Phoenix", "link": "https://stackoverflow.com/users/231688/silver-phoenix"}, "edited": false, "score": 0, "creation_date": 1461175838, "post_id": 36751726, "comment_id": 61084076, "body": "ArgumentError:        wrong number of arguments (given 0, expected 1) @SilverPhoenix"}, {"owner": {"reputation": 500, "user_id": 231688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7a35cb58a5673b4d8944a1aad667cf?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Phoenix", "link": "https://stackoverflow.com/users/231688/silver-phoenix"}, "edited": false, "score": 0, "creation_date": 1461175930, "post_id": 36751726, "comment_id": 61084127, "body": "@CameronBass Can you write the output in your question, please? <code>puts response.body</code> should be enough. Thanks."}, {"owner": {"reputation": 2555, "user_id": 4926060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd516d1d066a4e7c2d27aa258c187892?s=128&d=identicon&r=PG&f=1", "display_name": "David Meza", "link": "https://stackoverflow.com/users/4926060/david-meza"}, "edited": false, "score": 0, "creation_date": 1461175946, "post_id": 36751726, "comment_id": 61084141, "body": "@CameronBass is it possible to get a sample of what <code>json</code> variable looks like? Is it an array or a hash? My guess is it would be an array, in which case you are indexing incorrectly."}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1461176086, "post_id": 36751726, "comment_id": 61084226, "body": "1] pry(#&lt;RSpec::ExampleGroups::ApiRetailers::GETApiRetailers&gt;)&gt; json =&gt; [{&quot;id&quot;=&gt;31,   &quot;name&quot;=&gt;&quot;Good Coffee Co.&quot;,   &quot;description&quot;=&gt;&quot;Hipster Good&quot;,   &quot;image_url&quot;=&gt;&quot;<a href=\"http://www.example.com/foo_bar.jpg\" rel=\"nofollow noreferrer\">example.com/foo_bar.jpg</a>&quot;,   &quot;created_at&quot;=&gt;&quot;2016-04-20T18:14:17.793Z&quot;,   &quot;updated_at&quot;=&gt;&quot;2016-04-20T18:14:17.793Z&quot;,   &quot;city&quot;=&gt;&quot;Portland&quot;}]"}, {"owner": {"reputation": 500, "user_id": 231688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7a35cb58a5673b4d8944a1aad667cf?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Phoenix", "link": "https://stackoverflow.com/users/231688/silver-phoenix"}, "edited": false, "score": 1, "creation_date": 1461176220, "post_id": 36751726, "comment_id": 61084311, "body": "Yup, there it is. It&#39;s an array of hashes. Most likely because you are doing a get for all the retailers with <code>&#47;api&#47;retailers.json</code>, which is why it can only return it as an array, even if there is only one element."}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "reply_to_user": {"reputation": 2555, "user_id": 4926060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd516d1d066a4e7c2d27aa258c187892?s=128&d=identicon&r=PG&f=1", "display_name": "David Meza", "link": "https://stackoverflow.com/users/4926060/david-meza"}, "edited": false, "score": 0, "creation_date": 1461176222, "post_id": 36751726, "comment_id": 61084313, "body": "It appear to be a hash @DavidMeza"}, {"owner": {"reputation": 2555, "user_id": 4926060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd516d1d066a4e7c2d27aa258c187892?s=128&d=identicon&r=PG&f=1", "display_name": "David Meza", "link": "https://stackoverflow.com/users/4926060/david-meza"}, "edited": false, "score": 1, "creation_date": 1461176322, "post_id": 36751726, "comment_id": 61084370, "body": "No, it is an array. If you had 2 retailers it would show the second one there too. The proper way to index would be <code>json[0][&quot;name&quot;]</code> @CameronBass"}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "reply_to_user": {"reputation": 2555, "user_id": 4926060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd516d1d066a4e7c2d27aa258c187892?s=128&d=identicon&r=PG&f=1", "display_name": "David Meza", "link": "https://stackoverflow.com/users/4926060/david-meza"}, "edited": false, "score": 0, "creation_date": 1461176406, "post_id": 36751726, "comment_id": 61084424, "body": "/api/retailers GET /api/retailers Returns JSON for retailers      Failure/Error: expect(json[0][&quot;name&quot;]).to eql[&quot;Good Coffee Co.&quot;]            ArgumentError:        wrong number of arguments (given 0, expected 1) @DavidMeza"}, {"owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "edited": false, "score": 0, "creation_date": 1461176545, "post_id": 36751726, "comment_id": 61084503, "body": "You&#39;re using the wrong brackets in the <code>eql</code> statement in your comment code. Use parenthesis."}, {"owner": {"reputation": 2555, "user_id": 4926060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd516d1d066a4e7c2d27aa258c187892?s=128&d=identicon&r=PG&f=1", "display_name": "David Meza", "link": "https://stackoverflow.com/users/4926060/david-meza"}, "edited": false, "score": 0, "creation_date": 1461176577, "post_id": 36751726, "comment_id": 61084527, "body": "Right, I was about to point that out as well. <code>eql(&quot;Good Coffee Co.&quot;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1461176560, "post_id": 36752032, "comment_id": 61084515, "body": "I get this error now -  wrong number of arguments (given 0, expected 1)"}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1461176581, "post_id": 36752032, "comment_id": 61084530, "body": "/api/retailers GET /api/retailers Returns JSON for retailers      Failure/Error: expect(json[0][&quot;name&quot;]).to eql[&quot;Good Coffee Co.&quot;]"}, {"owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "reply_to_user": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1461176636, "post_id": 36752032, "comment_id": 61084567, "body": "You&#39;re using square brackets in your <code>eql</code> statement. It should be <code>expect(json[0][&quot;name&quot;]).to eql(&quot;Good Coffee Co.&quot;)</code>. Can we see your controller code?"}], "tags": [], "owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "is_accepted": false, "score": 3, "last_activity_date": 1461177194, "last_edit_date": 1461177194, "creation_date": 1461176424, "answer_id": 36752032, "question_id": 36751726, "link": "https://stackoverflow.com/questions/36751726/rspec-type-error-no-implicit-conversion-of-string-into-integer/36752032#36752032", "title": "RSpec - Type error - no implicit conversion of String into Integer", "body": "<p>It looks like you're hitting an index endpoint which is returning an array of retailers, in your case an array with a single retailer. To access this you'll need to select the first object in the array and then do your comparisons:</p>\n\n<pre><code>expect(json[0]['name']).to eq('Good Coffee Co.')\n</code></pre>\n\n<p>On a similar note you should be using <code>let</code> and <code>before</code> to setup your tests. Following the rspec conventions will not only make your code more readable, but easier to maintain. I've made style changes below as to how I typically lay out my tests. These are just suggestions of course and make a couple of assumptions as to the naming and scoping of your controller.</p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.describe Api::RetailersController do\n\n  # /api/retailers\n  describe '#index' do\n    let!(:location) {\n      Location.create!(\n        city: \"Portland\",\n        street_1: \"Cherry\",\n        state: \"Oregon\",\n        zip: \"49490\"\n      )\n    }\n\n    let!(:retailer) {\n      Retailer.create!(\n        name: \"Good Coffee Co.\",\n        description: \"Hipster Good\",\n        image_url: \"http://www.example.com/foo_bar.jpg\",\n        location: location\n    )\n\n    before(:each) do\n      get :index, format: :json\n      json = JSON.parse(response.body)\n    end\n\n    it 'Returns a status 200' do\n      expect(response).to be_success\n    end\n    it 'Returns a JSON list of retailers' do\n      expect(json.length).to eq(1)\n    end\n\n    # I would probably only check these in the show action\n    # unless needing different data on index\n    it 'Contains a name attribute' do\n      expect(json[0]['name']).to eq('Good Coffee Co.')\n    end\n    it 'Contains a description attribute' do\n      expect(json[0]['description']to eq('Hipster Good')\n    end\n    it 'contains an image_url attribute' do\n      expect(json[0]['image_url']).to eq('http://www.example.com/foo_bar.jpg')\n     end\n     it 'contains a location attribute' do \n       expect(json[0]['location']).to eq(location.city)\n     end\n   end\n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2555, "user_id": 4926060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd516d1d066a4e7c2d27aa258c187892?s=128&d=identicon&r=PG&f=1", "display_name": "David Meza", "link": "https://stackoverflow.com/users/4926060/david-meza"}, "is_accepted": true, "score": 2, "last_activity_date": 1461176839, "creation_date": 1461176839, "answer_id": 36752177, "question_id": 36751726, "link": "https://stackoverflow.com/questions/36751726/rspec-type-error-no-implicit-conversion-of-string-into-integer/36752177#36752177", "title": "RSpec - Type error - no implicit conversion of String into Integer", "body": "<p>As mentioned in the comments, the issue was that the JSON object returns an array of objects. So the proper test expectations would be the following:</p>\n\n<pre><code>expect(json.first[\"name\"]).to eq(\"Good Coffee Co.\")\nexpect(json.first[\"description\"]).to eq(\"Hipster Good\")\nexpect(json.first[\"image_url\"]).to eq(\"http://www.example.com/foo_bar.jpg\")\nexpect(json.first[\"city\"]).to eq(\"Portland\")\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1996, "favorite_count": 0, "accepted_answer_id": 36752177, "answer_count": 2, "score": 3, "last_activity_date": 1461177194, "creation_date": 1461175381, "question_id": 36751726, "link": "https://stackoverflow.com/questions/36751726/rspec-type-error-no-implicit-conversion-of-string-into-integer", "title": "RSpec - Type error - no implicit conversion of String into Integer", "body": "<p>I'm trying to make a test green and I'm getting this error. Even when I pry the code it shows that a string is being returned so I have no idea why the test won't green. Here is my test and error for clarification. I'm assuming this is a common error for folks.</p>\n\n<p>Here is my test - </p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.describe \"/api/retailers\" do\n\ndescribe \"GET /api/retailers\" do\nit \"Returns JSON for retailers\" do\n\n  location = Location.create!(\n    city: \"Portland\",\n    street_1: \"Cherry\",\n    state: \"Oregon\",\n    zip: \"49490\"\n  )\n\n  retailer = Retailer.create!(\n    name: \"Good Coffee Co.\",\n    description: \"Hipster Good\",\n    image_url: \"http://www.example.com/foo_bar.jpg\",\n    location: location\n  )\n\n  get \"/api/retailers.json\"\n\n  expect(response).to be_success\n  json = JSON.parse(response.body)\n\n  expect(json[\"name\"]).to eql(\"Good Coffee Co.\")\n  expect(json[\"description\"]).to eql(\"Hipster Good\")\n  expect(json[\"image_url\"]).to eql(\"http://www.example.com/foo_bar.jpg\")\n  expect(json[\"location\"]).to eql(location.city)\nend\nend\nend\n</code></pre>\n\n<p>here is my error message - </p>\n\n<pre><code>/api/retailers GET /api/retailers Returns JSON for retailers\n Failure/Error: expect(json[\"name\"]).to eql(\"Good Coffee Co.\")\n\n TypeError:\n   no implicit conversion of String into Integer\n # ./spec/requests/retailers_spec.rb:28:in `[]'\n # ./spec/requests/retailers_spec.rb:28:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461174406, "post_id": 36751353, "comment_id": 61083189, "body": "<code>amount:30*(resident.rate_card.diet)+resident.rate_card.charg&zwnj;&#8203;e1+resident.rate_car&zwnj;&#8203;d.charge2)+(resident&zwnj;&#8203;.account.leaves)*10+&zwnj;&#8203;resident.account.fin&zwnj;&#8203;e)</code> Is it also correct? cuz I have not implemented that code  yet!"}, {"owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461174526, "post_id": 36751353, "comment_id": 61083261, "body": "looks like an equation for calculating rent?  i couldn&#39;t say if it&#39;s &quot;correct&quot; or not, as i&#39;m not familiar with the requirements of the program."}], "tags": [], "owner": {"reputation": 25272, "user_id": 1695163, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/85ffb58dc3ed0067128804ef843245a6?s=128&d=identicon&r=PG", "display_name": "ddavison", "link": "https://stackoverflow.com/users/1695163/ddavison"}, "is_accepted": false, "score": -1, "last_activity_date": 1461174248, "creation_date": 1461174248, "answer_id": 36751353, "question_id": 36751276, "link": "https://stackoverflow.com/questions/36751276/how-to-pass-dynamic-params-in-rails/36751353#36751353", "title": "How to pass dynamic params in Rails?", "body": "<p>you can do it by using <code>params.permit!</code> as this allows any parameters to be passed.  here's an example:</p>\n\n<pre><code>def create\n  ...\n  @bill = Resident.all.each { |resident| resident.bills.create(any_params) }\nend\n\nprivate\ndef any_params\n  params.permit!\nend\n</code></pre>\n\n<p>be careful with this of course, as you are opening this up to potential exploits.</p>\n"}, {"comments": [{"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461174702, "post_id": 36751461, "comment_id": 61083354, "body": "why r u equating  create_parms with parms ??"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461174887, "post_id": 36751461, "comment_id": 61083479, "body": "@Nischaynamdev that&#39;s assignment to a hash key so that <code>create_params</code> becomes <code>{ amount: 30*(resident.rate_card.diet), some_field: &#39;some_value_from_params&#39;}</code>"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461175180, "post_id": 36751461, "comment_id": 61083648, "body": "Should I use those with strong parameters in private method @ in controller ??"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461175366, "post_id": 36751461, "comment_id": 61083771, "body": "@Nischaynamdev you do not have to, plus <code>resident</code> is a local variable. Strong parameters are not really needed here, because you will be doing a part of their job, but <code>params.require</code> will be useful, as it adds presence check"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461175764, "post_id": 36751461, "comment_id": 61084028, "body": "@Nischaynamdev took a second look at the question, see updated answer. You can <code>build</code> object from parameters, assign dynamic ones and only then <code>save!</code>"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461175838, "post_id": 36751461, "comment_id": 61084074, "body": "So , then I must  mot permit amount in strong parameters and other dynamic attributes!! only permitted values will be those who are filled using form right ?"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461175941, "post_id": 36751461, "comment_id": 61084136, "body": "@Nischaynamdev yes, that&#39;s one of the main purposes of strong parameters."}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 1, "last_activity_date": 1461175714, "last_edit_date": 1461175714, "creation_date": 1461174579, "answer_id": 36751461, "question_id": 36751276, "link": "https://stackoverflow.com/questions/36751276/how-to-pass-dynamic-params-in-rails/36751461#36751461", "title": "How to pass dynamic params in Rails?", "body": "<p><code>create</code> takes a hash, you can:</p>\n\n<pre><code>create_params = { amount: 30*(resident.rate_card.diet) }\ncreate_params[:some_field] = params[:some_field]\n# and so on\nresident.bills.create(create_params)\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>obj = resident.bills.build(your_strong_parameters_as_usual)\nobj.amount = # that calculation\nobj.save!\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461243581, "post_id": 36751970, "comment_id": 61118093, "body": "how to generate bills for all residents ?"}, {"owner": {"reputation": 601, "user_id": 6140580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gm1sn.jpg?s=128&g=1", "display_name": "Rodrigo Martinez", "link": "https://stackoverflow.com/users/6140580/rodrigo-martinez"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461245072, "post_id": 36751970, "comment_id": 61119298, "body": "@Nischaynamdev on the <code>@bill_generator = BillGenerator.new(bill_generator_params)</code> line he&#39;s already doing that since it calls the <code>initialize</code> method on <code>BillGenerator</code>."}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461245192, "post_id": 36751970, "comment_id": 61119404, "body": "what is BillGenerator ? are u referring this to my bill model ?"}, {"owner": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "edited": false, "score": 0, "creation_date": 1461260327, "post_id": 36751970, "comment_id": 61130186, "body": "It&#39;s a class I created specifically to process this form. It&#39;s not an ActiveRecord model, so your database won&#39;t have any BillGenerators in it. Instead, it&#39;s an object that generates bills for you."}, {"owner": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461260421, "post_id": 36751970, "comment_id": 61130239, "body": "@Nischaynamdev You can read more about this design pattern here: <a href=\"https://robots.thoughtbot.com/activemodel-form-objects\" rel=\"nofollow noreferrer\">robots.thoughtbot.com/activemodel-form-objects</a>"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 1, "creation_date": 1461296341, "post_id": 36751970, "comment_id": 61144363, "body": "ohk... but the other guy gave me solution and  that worked for me !!... btw Ur solution was also good... thnx.. :)"}], "tags": [], "owner": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "is_accepted": false, "score": 1, "last_activity_date": 1461176210, "creation_date": 1461176210, "answer_id": 36751970, "question_id": 36751276, "link": "https://stackoverflow.com/questions/36751276/how-to-pass-dynamic-params-in-rails/36751970#36751970", "title": "How to pass dynamic params in Rails?", "body": "<p>I'm confused at your syntax of your controller. <code>@bill</code> is being set to the value of a loop, which feels off. Each loops return the enumerable you cycle through, so you'll end up with <code>@bill = Resident.all</code> with some bills being created on the side.</p>\n\n<p>What your controller really wants to know is, did my <em>many</em> new bills save correctly?</p>\n\n<p>This seems like a perfect place to use a ruby object (or, colloquially, a Plain Old Ruby Object, as opposed to an ActiveRecord object) to encapsulate the specifics of this bill-generator.</p>\n\n<p>If I'm reading this right, it appears that you are generating many bills at once, based on form-inputted data like:</p>\n\n<ul>\n<li><code>is_date</code></li>\n<li><code>to_date</code></li>\n<li><code>expiry_date</code></li>\n</ul>\n\n<p>...as well as some data about each individual resident.</p>\n\n<p>Here's the model I'd create:</p>\n\n<p><strong>app/models/bill_generator.rb</strong></p>\n\n<pre><code>class BillGenerator\n  include ActiveModel::Model\n  # This lets you do validations\n\n  attr_accessor :is_date, :to_date, :expiry_date\n  # This lets your form builder see these attributes when you go form.input\n\n  attr_accessor :bills\n  # ...for the bills we'll be generating in a sec\n\n  validates_presence_of :is_date, :to_date, :expiry_date\n  # You can do other validations here. Just an example.\n\n  validate :bills_are_valid?\n\n  def initialize(attributes = {})\n    super # This calls the Active Model initializer\n    build_new_bills # Called as soon as you do BillGenerator.new\n  end\n\n  def build_new_bills\n    @bills = []\n    Resident.all.each do |r|\n      @bills &lt;&lt; r.bills.build(\n        # Your logic goes here. Not sure what goes into a bill-building...\n        # Note that I'm building (which means not-yet-saved), not creating\n      ) \n    end\n\n  def save\n    if valid?\n      @bills.each { |b| b.save }\n      true\n    else\n      false\n    end\n  end\n\n  private\n\n    def bills_are_valid?\n      bill_validity = true\n      @bills.each do |b|\n        bill_validity = false unless b.valid?\n      end\n      bill_validity\n    end\n\nend\n</code></pre>\n\n<p>Why all this mess? Because in your controller you can do...</p>\n\n<p><strong>app/controllers/bill_controller.rb</strong></p>\n\n<pre><code>def create\n  @bill_generator = BillGenerator.new(bill_generator_params)\n  if @bill_generator.save?\n     # Redirect to somewhere with a flash?\n  else\n     # Re-render the form with a flash?\n  end\nend\n\ndef bill_generator_params\n  params.require(:bill_generator).permit(:is_date, :to_date, :expiry_date)\n  # No extra garbage. No insecurity by letting all kinds of crud through!\nend\n</code></pre>\n\n<p>...like a <code>BillGenerator</code> is any old object. Did it save? Great. It didn't, show the form again.</p>\n\n<p>Now, my <code>BillGenerator</code> won't just be copy-and-paste. Your 'build_new_bills' probably will have some of that math you alluded to, which I'll leave to you.</p>\n\n<p>Let me know what you think!</p>\n"}, {"comments": [{"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461242000, "post_id": 36752017, "comment_id": 61116836, "body": "<code>@bill = Resident.all.each { |resident| resident.bills.create(bill_params) }</code> I m using this code to generate bills for all residents .. is it correct ?"}, {"owner": {"reputation": 601, "user_id": 6140580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gm1sn.jpg?s=128&g=1", "display_name": "Rodrigo Martinez", "link": "https://stackoverflow.com/users/6140580/rodrigo-martinez"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461244935, "post_id": 36752017, "comment_id": 61119203, "body": "Actually <code>Resident.all.each ...</code> will return an array of <b>Resident</b>, so that assignment is incorrect. Apart from that, <code>if @bill.save</code> wouldn&#39;t be correct either since you are already using <code>create</code> method which internally <code>saves</code> the object, so maybe you meant <code>build</code>. That&#39;s why I told you that you should create this logic elsewhere, using a <code>ActiveRecord::Base.transaction</code> (which rollbacks if everything inside if an exception occurred), either in <code>Resident</code> model, <code>Bill</code> model or a <b>PORO</b> class like @Lanny Bose suggested which looks like an elegant solution."}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461245124, "post_id": 36752017, "comment_id": 61119341, "body": "but the problem is coming at  this method  <code>def set_amount       self.amount = 30 * self.resident.rate_card.diet + self.resident.rate_card.charge1 + self.resident.rate_card.charge2 + (self.resident.account.leaves) * 10 + self.resident.account.fine     end</code> giving this error  <code>undefined method </code>daily_diet&#39; for nil:NilClass`"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461246036, "post_id": 36752017, "comment_id": 61120083, "body": "i think we can&#39;t use those messages here in bill.rb model file ? what do you think ?"}, {"owner": {"reputation": 601, "user_id": 6140580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gm1sn.jpg?s=128&g=1", "display_name": "Rodrigo Martinez", "link": "https://stackoverflow.com/users/6140580/rodrigo-martinez"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461246231, "post_id": 36752017, "comment_id": 61120264, "body": "Yes you could, I don&#39;t really know what <code>daily_diet</code> method is since you haven&#39;t mentioned before., maybe if you give a little more context I could help you (maybe it&#39;s used in a method on <code>RateCard</code> model?)"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461247012, "post_id": 36752017, "comment_id": 61120890, "body": "see I have list of models  shown above  in my question and rate_card is an model in my app ...now my  question is Can We use <code>self.resident.hostel.rate_card.daily_diet</code>  @ in bill model file ? but it is showing error,explained  above  in comment . U can see the relations btw the models ....scroll above."}, {"owner": {"reputation": 601, "user_id": 6140580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gm1sn.jpg?s=128&g=1", "display_name": "Rodrigo Martinez", "link": "https://stackoverflow.com/users/6140580/rodrigo-martinez"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461247335, "post_id": 36752017, "comment_id": 61121138, "body": "Ok, you did mention a <code>diet</code> method and <code>self.resident.rate_card.diet</code> not <code>self.resident.hostel.rate_card.daily_diet</code>. That message means that rate_card is <code>nil</code> for that <code>hostel</code> - check that the resident&#39;s hostel has a rate_card defined for every resident, otherwise that line of code won&#39;t work."}], "tags": [], "owner": {"reputation": 601, "user_id": 6140580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gm1sn.jpg?s=128&g=1", "display_name": "Rodrigo Martinez", "link": "https://stackoverflow.com/users/6140580/rodrigo-martinez"}, "is_accepted": true, "score": 1, "last_activity_date": 1461176356, "creation_date": 1461176356, "answer_id": 36752017, "question_id": 36751276, "link": "https://stackoverflow.com/questions/36751276/how-to-pass-dynamic-params-in-rails/36752017#36752017", "title": "How to pass dynamic params in Rails?", "body": "<p>I think the Rails way for this logic you want is with <code>callbacks</code> if you want <em>calculated</em> attributes either on <strong>create</strong>, <strong>update</strong> or <strong>delete</strong>, meaning attributes that depend on other models. For instance:</p>\n\n<pre><code>class Bill &lt; ActiveRecord::Base\n  ...\n  before_create :set_amount\n\n  ...\n\n  protected\n\n    def set_amount\n      self.amount = 30 * self.resident.rate_card.diet + self.resident.rate_card.charge1 + self.resident.rate_card.charge2 + (self.resident.account.leaves) * 10 + self.resident.account.fine\n    end\nend\n</code></pre>\n\n<p>If you want this logic to be used when updating the record also, then you should use <code>before_save</code> instead of <code>before_create</code>.</p>\n\n<p>After you do this, you should accept the usual params (strong) of Bill model, as in:</p>\n\n<pre><code>def bill_params\n  params.require(:bill).permit(:is_date, :to_date, :expiry_date)\nend\n</code></pre>\n\n<p>So your <code>create</code> call would be like:</p>\n\n<pre><code>resident.bills.create(bill_params)\n</code></pre>\n\n<p>Also, be wary of your <code>create</code> <strong>action</strong>, you should probably create a method either on your <code>Bill</code> or your <code>Resident</code> model that uses transactions to create all bills at the same time because you probably want either every bill created or none. This way you won't have the <code>Resident.all.each</code> logic in your <code>BillsController</code>.</p>\n"}], "owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1924, "favorite_count": 0, "accepted_answer_id": 36752017, "answer_count": 4, "score": 3, "last_activity_date": 1461176356, "creation_date": 1461173973, "last_edit_date": 1461175664, "question_id": 36751276, "link": "https://stackoverflow.com/questions/36751276/how-to-pass-dynamic-params-in-rails", "title": "How to pass dynamic params in Rails?", "body": "<p>I want some of my model attributes to predefined dynamically. I have various models.And now I want  My <strong>Bill</strong> model to create objects using other model instances.</p>\n\n<p><em>Models :</em></p>\n\n<pre><code>    leave.rb        # belongs_to :residents\n    resident.rb     # has_many:leaves,has_many:bills,has_one:account\n    bill.rb         # belongs_to:residents\n    rate_card.rb    # belongs_to:hostel\n    account.rb      # belongs_to:resident\n    hostel.rb       \n</code></pre>\n\n<p>now here is my <em>bills controller</em>  create method :</p>\n\n<pre><code>def create\n    @bill = Resident.all.each { |resident| resident.bills.create(?) }\n    if @bill.save\n      flash[:success]=\"Bills successfully generated\"\n    else\n      flash[:danger]=\"Something went wrong please try again !\"\n    end\n  end\n</code></pre>\n\n<p>I want to build bill using all of the models <strong>eg:</strong></p>\n\n<pre><code>resident.bills.create(is_date:using form,to_date:using form,expiry_date:using form,amount:30*(resident.rate_card.diet)+resident.rate_card.charge1+resident.rate_card.charge2)+(resident.account.leaves)*10+resident.account.fine)\n///////Is this possible ?\n</code></pre>\n\n<p><strong><em>And how to use strong params here ?</em></strong></p>\n\n<p>Pls help me out thxx..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 1, "creation_date": 1461174052, "post_id": 36750933, "comment_id": 61082973, "body": "I&#39;ve done this same thing, the importing/exporting to excel using Roo. There should really be a library that lets us <code>class MyModel; excel_importable; excel_exportable; end</code> and then it has all of this taken care of. Anybody have some free time and want to do that? ;)"}, {"owner": {"reputation": 59, "user_id": 2803053, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/a36b18f41cfcce159fdadb313807c118?s=128&d=identicon&r=PG&f=1", "display_name": "user2803053", "link": "https://stackoverflow.com/users/2803053/user2803053"}, "reply_to_user": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 0, "creation_date": 1461174834, "post_id": 36750933, "comment_id": 61083440, "body": "@alexanderbird were you able to import your file correctly"}, {"owner": {"reputation": 59, "user_id": 2803053, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/a36b18f41cfcce159fdadb313807c118?s=128&d=identicon&r=PG&f=1", "display_name": "user2803053", "link": "https://stackoverflow.com/users/2803053/user2803053"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1461174890, "post_id": 36750933, "comment_id": 61083481, "body": "@ndn I am getting the same error message: unknown attribute &#39;name&#39; for Student."}, {"owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 0, "creation_date": 1461179605, "post_id": 36750933, "comment_id": 61086389, "body": "yes, I was, but I didn&#39;t have any association going on. I&#39;m assuming yours works if you only update student attributes?"}, {"owner": {"reputation": 59, "user_id": 2803053, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/a36b18f41cfcce159fdadb313807c118?s=128&d=identicon&r=PG&f=1", "display_name": "user2803053", "link": "https://stackoverflow.com/users/2803053/user2803053"}, "reply_to_user": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 0, "creation_date": 1461179866, "post_id": 36750933, "comment_id": 61086546, "body": "@alexanderbird Unfortunately, i am receiving an error message:Validation failed: Parent can&#39;t be blank, Parent can&#39;t be blank, First name can&#39;t be blank, First name can&#39;t be blank, Last name can&#39;t be blank, Last name can&#39;t be blank, Age can&#39;t be blank, Age can&#39;t be blank, Workshop can&#39;t be blank, Workshop can&#39;t be blank, Interest can&#39;t be blank, Interest can&#39;t be blank, Registration date can&#39;t be blank, Registration date can&#39;t be blank, Email can&#39;t be blank, Email can&#39;t be blank, Email Not a valid email format"}, {"owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 0, "creation_date": 1461180468, "post_id": 36750933, "comment_id": 61086934, "body": "I doubt this is all of it, but should you be adding <code>allow_empty: true</code> in your delegate statement? Also, if I were you, I would try to get only one attribute importing. I would make a csv that has columns only for id and a string attribute on the Student object, and try importing that. Once that works, I would add support for the rest of the columns. I&#39;m wondering: is the problem you&#39;re experiencing because the import doesn&#39;t work period or because it doesn&#39;t work with the association?"}, {"owner": {"reputation": 59, "user_id": 2803053, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/a36b18f41cfcce159fdadb313807c118?s=128&d=identicon&r=PG&f=1", "display_name": "user2803053", "link": "https://stackoverflow.com/users/2803053/user2803053"}, "reply_to_user": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 0, "creation_date": 1461180864, "post_id": 36750933, "comment_id": 61087188, "body": "@alexanderbird how do I make a csv that has columns only for id and a string attribute on the Student object, and try importing that. can you give me an example"}, {"owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "reply_to_user": {"reputation": 59, "user_id": 2803053, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/a36b18f41cfcce159fdadb313807c118?s=128&d=identicon&r=PG&f=1", "display_name": "user2803053", "link": "https://stackoverflow.com/users/2803053/user2803053"}, "edited": false, "score": 0, "creation_date": 1461181397, "post_id": 36750933, "comment_id": 61087506, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/109727/discussion-between-alexanderbird-and-user2803053\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 2803053, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/a36b18f41cfcce159fdadb313807c118?s=128&d=identicon&r=PG&f=1", "display_name": "user2803053", "link": "https://stackoverflow.com/users/2803053/user2803053"}, "edited": false, "score": 0, "creation_date": 1461173952, "post_id": 36751020, "comment_id": 61082903, "body": "thanks for the respond, so are saying that I need to place student inside the bracket and remove script."}, {"owner": {"reputation": 59, "user_id": 2803053, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/a36b18f41cfcce159fdadb313807c118?s=128&d=identicon&r=PG&f=1", "display_name": "user2803053", "link": "https://stackoverflow.com/users/2803053/user2803053"}, "edited": false, "score": 0, "creation_date": 1461174753, "post_id": 36751020, "comment_id": 61083385, "body": "I change the name from script to student, however I get the same error message: unknown attribute &#39;name&#39; for Student."}], "tags": [], "owner": {"reputation": 13585, "user_id": 693349, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b030858982f80cfd886667ec36074da4?s=128&d=identicon&r=PG", "display_name": "Matt Gibson", "link": "https://stackoverflow.com/users/693349/matt-gibson"}, "is_accepted": false, "score": 1, "last_activity_date": 1461189958, "last_edit_date": 1461189958, "creation_date": 1461173281, "answer_id": 36751020, "question_id": 36750933, "link": "https://stackoverflow.com/questions/36750933/unknown-attribute-name-for-student-for-ruby-on-rails/36751020#36751020", "title": "unknown attribute &#39;name&#39; for Student for ruby on rails", "body": "<p>You have <code>name</code> in the list of attributes you are pulling from <code>Student</code></p>\n\n<pre><code>def self.to_csv\n   attributes = %w{parent_id name # &lt;--\n</code></pre>\n\n<p>When you run the following code, <code>name</code> is one of the columns sent as <code>attr</code></p>\n\n<pre><code>all.each do |script|\n  csv &lt;&lt; attributes.map{ |attr| script.send(attr) }\nend\n</code></pre>\n\n<p>And <code>script</code> is one instance of <code>Student</code> from your call to <code>all</code></p>\n\n<p>The issue is that you have used <code>script</code> as your variable name in that block, where it should be <code>student</code>, which has confused you.</p>\n\n<p>To fix it, alter <code>self.to_csv</code> inside the <code>Student</code> class, so that the <code>attributes</code> listed are just the ones for <code>Student</code>. If you're only interested in database column values, you could use <code>attributes = column_names</code> so that <code>ActiveRecord</code> will provide them to you in a handy array.</p>\n"}], "owner": {"reputation": 59, "user_id": 2803053, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/a36b18f41cfcce159fdadb313807c118?s=128&d=identicon&r=PG&f=1", "display_name": "user2803053", "link": "https://stackoverflow.com/users/2803053/user2803053"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461189958, "creation_date": 1461173007, "last_edit_date": 1461173675, "question_id": 36750933, "link": "https://stackoverflow.com/questions/36750933/unknown-attribute-name-for-student-for-ruby-on-rails", "title": "unknown attribute &#39;name&#39; for Student for ruby on rails", "body": "<p>I have two model class called Student and Parent. I am trying to upload a CSV file that allow me to use Parent attributes: name, email and etc into Student model class or its CSV file. When I run my code I get the error message unknown attribute 'name' for Student. I do understand why I am getting this error message because the attributes name is not in Student attributes but only in the Parent class. I need guidance on how to add parent attributes into my Student model class correctly. I can export the Parent attributes with the Student Attributes on the same CSV file but when I import those CSV file I get the error message I mention early. Any help would be appreciated. </p>\n\n<p>Student.rb Model Class:</p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\n  belongs_to :parent\n\n  delegate :email,:name,:phone_number,to: :parent, allow_nil: true\n\n\n  def self.to_csv\n    attributes = %w{parent_id name first_name last_name  age workshop interest registration_date email   }\n    CSV.generate(headers: true) do |csv|\n      csv &lt;&lt; attributes\n\n      all.each do |script|\n        csv &lt;&lt; attributes.map{ |attr| script.send(attr) }\n      end\n    end\n\n  end\n\n  def self.import(file)\n    spreadsheet = open_spreadsheet(file)\n    header=spreadsheet.row(1)\n    (2..spreadsheet.last_row).each do |i|\n      row = Hash[[header,spreadsheet.row(i)].transpose]\n    #CSV.foreach(file.path, headers: true) do |row|\n\n      student = find_by_id(row[\"id\"])|| new\n      student.attributes = row.to_hash.slice(*row.to_hash.keys)\n      student.save!\n    end\n  end\n\n\n  def self.open_spreadsheet(file)\n    case File.extname(file.original_filename)\n    when \".csv\" then Roo::CSV.new(file.path)\n    when \".xls\" then Roo::CSV.new(file.path)\n    when \".xlsx\" then Roo::CSV.new(file.path)\n    else raise \"Unknown file type: #{file.original_filename}\"\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "multithreading", "mechanize-ruby"], "comments": [{"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1461175663, "post_id": 36750804, "comment_id": 61083953, "body": "Why would this not be possible? I&#39;m not entirely sure if <code>mechanize</code> can run in multiple threads at a time, but it may be possible?"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1461175739, "post_id": 36750804, "comment_id": 61084014, "body": "Also possible duplicate: <a href=\"http://stackoverflow.com/questions/903143/is-using-threads-and-ruby-mechanize-safe\" title=\"is using threads and ruby mechanize safe\">stackoverflow.com/questions/903143/&hellip;</a>"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1462554966, "post_id": 36750804, "comment_id": 61700779, "body": "FWIW: there are existing multi-threaded crawlers (e.g. <a href=\"https://github.com/chriskite/anemone\" rel=\"nofollow noreferrer\">anemone</a>) that you could use."}], "owner": {"reputation": 77, "user_id": 6169522, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b87f89ff9b2a870ce14912a7d0d00d1f?s=128&d=identicon&r=PG&f=1", "display_name": "JasonBorne", "link": "https://stackoverflow.com/users/6169522/jasonborne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461172593, "creation_date": 1461172593, "question_id": 36750804, "link": "https://stackoverflow.com/questions/36750804/running-multiple-threads-in-tandem-to-scrape-search-engines", "title": "Running multiple threads in tandem to scrape search engines", "body": "<p>I want to create a multi threaded web crawler, however after doing some research I've discovered that the gem <code>mechanize</code> is not multi thread safe. So my question is, is it possible to write a multi thread crawler to scrape multiple search engines at one time? Example:</p>\n\n<pre><code>def site(url) \n  Nokogiri::HTML(RestClient.get(url))\nend\n\ndef parse(url, tag, i)\n  parsing = site(url)\n  parsing.css(tag)[i]].to_s\nend\n\nThread.new do\n  agent = Mechanize.new \n  # do some searching and start the search\n  parse('google.com', 'html', 0)\nend\n\nThread.new do\n  agent = Mechanize.new\n  # same thing and run them in tandem \n  parse('duckduckgo.com', 'html', 0)\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 646, "user_id": 31352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c32b63b4a7dbe19c9327eca4e231bc8?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/31352/brad"}, "is_accepted": false, "score": 0, "last_activity_date": 1461172162, "creation_date": 1461172162, "answer_id": 36750670, "question_id": 36750556, "link": "https://stackoverflow.com/questions/36750556/ruby-on-rails-1-option-vote-button-error/36750670#36750670", "title": "Ruby On Rails: +1 option/vote button error", "body": "<p>In rake routes you have this: <code>question_option_upvote</code>, in your view you have this: <code>upvote_option_path</code>. Pretty sure your view should say <code>question_option_upvote_path(option)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 52, "user_id": 6012946, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Cf2Ri.jpg?s=128&g=1", "display_name": "classequalsarthur", "link": "https://stackoverflow.com/users/6012946/classequalsarthur"}, "edited": false, "score": 0, "creation_date": 1461173269, "post_id": 36750765, "comment_id": 61082478, "body": "Thanks! That fixed the initial problem, however there is a &quot;template is missing&quot; error now. Is this because I need a redirect at the end of the upvote def?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 52, "user_id": 6012946, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Cf2Ri.jpg?s=128&g=1", "display_name": "classequalsarthur", "link": "https://stackoverflow.com/users/6012946/classequalsarthur"}, "edited": false, "score": 1, "creation_date": 1461173462, "post_id": 36750765, "comment_id": 61082598, "body": "@classequalsarthur Yes. You need to use <code>redirect_to</code> to redirect to desired path."}, {"owner": {"reputation": 52, "user_id": 6012946, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Cf2Ri.jpg?s=128&g=1", "display_name": "classequalsarthur", "link": "https://stackoverflow.com/users/6012946/classequalsarthur"}, "edited": false, "score": 1, "creation_date": 1461174537, "post_id": 36750765, "comment_id": 61083266, "body": "Awesome, no errors now! They add to the database but they&#39;re adding &quot;NULL&quot; into <code>question_id</code> and <code>option_id</code>. Is there anything you can spot? Thanks, you&#39;ve been awesome :-)"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 52, "user_id": 6012946, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Cf2Ri.jpg?s=128&g=1", "display_name": "classequalsarthur", "link": "https://stackoverflow.com/users/6012946/classequalsarthur"}, "edited": false, "score": 1, "creation_date": 1461174642, "post_id": 36750765, "comment_id": 61083333, "body": "@classequalsarthur You need to change <code>question_id: @question, option_id: @option</code> to <code>question_id: @question.id, option_id: @option.id</code> in <code>Answer.create</code>."}, {"owner": {"reputation": 52, "user_id": 6012946, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Cf2Ri.jpg?s=128&g=1", "display_name": "classequalsarthur", "link": "https://stackoverflow.com/users/6012946/classequalsarthur"}, "edited": false, "score": 1, "creation_date": 1461174741, "post_id": 36750765, "comment_id": 61083373, "body": "Ohhhhh of course I see that now. Legend, really appreciate it :-)"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1461172453, "creation_date": 1461172453, "answer_id": 36750765, "question_id": 36750556, "link": "https://stackoverflow.com/questions/36750556/ruby-on-rails-1-option-vote-button-error/36750765#36750765", "title": "Ruby On Rails: +1 option/vote button error", "body": "<blockquote>\n  <p>undefined method upvote_option_path</p>\n</blockquote>\n\n<p>According to your routes, there is no <code>upvote_option_path</code>, it should be <code>question_option_upvote_path</code>. Also the path takes two arguments as <strong><em>keys</em></strong>(<code>:question_id</code> &amp; <code>:option_id</code>), so you need to pass those two to the path.\nThe below should work</p>\n\n<pre><code>&lt;%= button_to '+1', question_option_upvote_path(@question, option), method: :post %&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 52, "user_id": 6012946, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Cf2Ri.jpg?s=128&g=1", "display_name": "classequalsarthur", "link": "https://stackoverflow.com/users/6012946/classequalsarthur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 36750765, "answer_count": 2, "score": 0, "last_activity_date": 1461172453, "creation_date": 1461171853, "question_id": 36750556, "link": "https://stackoverflow.com/questions/36750556/ruby-on-rails-1-option-vote-button-error", "title": "Ruby On Rails: +1 option/vote button error", "body": "<p>I'm learning ROR and working on a voting style application, I've got my four tables up and running <strong>Users</strong>, <strong>Questions</strong>, <strong>Options</strong> and <strong>Answers</strong> and I can write to the <strong>Answers</strong> table via MySQL and the total votes are displaying so far which is great.</p>\n\n<p>I'm having a problem with getting a +1 button working (eventually it'll be unique per user but for now I just want to see it working).</p>\n\n<p>I'm fairly certain my files are all setup correctly but I'm confused with what to put in my Questions \"Show\" view for the button, it might be a routes problem as it does say <code>undefined method 'upvote_option_path'</code> - any help would be greatly appreciated! If I've forgotten any files below let me know :-)</p>\n\n<p><strong>Question's Show View:</strong></p>\n\n<pre><code>&lt;% @question.options.each_with_index do |option, index| %&gt;\n   &lt;p&gt;&lt;%= option.option_text %&gt;&lt;/p&gt;\n   &lt;p&gt;&lt;%= pluralize(option.answers.count, \"vote\") %&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;\n   &lt;p&gt;&lt;%= button_to '+1', upvote_option_path(option), method: :post %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Option's Controller upvote:</strong></p>\n\n<pre><code>def upvote\n    @question = Question.find(params[:question_id])\n    @option = Option.find(params[:option_id])\n    Answer.create(user_id: current_user.id, question_id: @question, option_id: @option)\nend\n</code></pre>\n\n<p><strong>Routes file:</strong></p>\n\n<pre><code>resources :questions do\n    resources :options do\n        post 'upvote'\n    end\nend\n</code></pre>\n\n<p><strong>rake routes:</strong></p>\n\n<pre><code>question_option_upvote  POST  /questions/:question_id/options/:option_id/upvote(.:format)  options#upvote\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1461182041, "post_id": 36750308, "comment_id": 61087910, "body": "Welcome to Stack Overflow. Please use formatting to make your question&#39;s text more readable. Readability helps us help you, and it helps those in the future searching for a similar solution. Grammar and readability are very important on Stack Overflow and not taking the time to do your best, to put good effort into the question, turns off many who would normally want to help. Please read <a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question</a> along with links in that page as it explains it all well."}, {"owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1461207240, "post_id": 36750308, "comment_id": 61096924, "body": "I heavily edited the question to focus on the actual problem the OP needs to solve."}, {"owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1461593730, "post_id": 36750308, "comment_id": 61255848, "body": "@taiuan-pagini what&#39;s the status on your question?"}], "answers": [{"tags": [], "owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "is_accepted": false, "score": -1, "last_activity_date": 1461207341, "last_edit_date": 1461207341, "creation_date": 1461205143, "answer_id": 36758434, "question_id": 36750308, "link": "https://stackoverflow.com/questions/36750308/extract-values-from-an-array-of-hashes/36758434#36758434", "title": "Extract values from an array of hashes", "body": "<p>first: it's not nice to ask for help and to format the question as you did.\nsecond: the question has nothing to do with Rails or with Savon.\nThis is a pure Ruby question.\nThe solution seems simple to me.\nYou iterate over your array and summarize the numbers for each key :room_night\nFor example like this:</p>\n\n<pre><code>nights = 0\ndata.each do |booking|\n    nights += booking[:room_night].to_i\nend\nprint \"nights=#{nights}\\n\"\n</code></pre>\n\n<p>If you go functional it's even more simple:</p>\n\n<pre><code>nights = data.map{|e| e[:room_night].to_i}.reduce(:+)\n</code></pre>\n\n<p>and done!</p>\n\n<p>As a bonus I put a executable script into Pastbin <a href=\"https://pastebin.com/29nMTYrK\" rel=\"nofollow\">https://pastebin.com/29nMTYrK</a></p>\n"}], "owner": {"reputation": 11, "user_id": 6226968, "user_type": "registered", "profile_image": "https://graph.facebook.com/1012764818804404/picture?type=large", "display_name": "Taiuan Pagini", "link": "https://stackoverflow.com/users/6226968/taiuan-pagini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461207341, "creation_date": 1461171118, "last_edit_date": 1461207125, "question_id": 36750308, "link": "https://stackoverflow.com/questions/36750308/extract-values-from-an-array-of-hashes", "title": "Extract values from an array of hashes", "body": "<p>I need to extract values from an array of hashes:</p>\n\n<pre><code>data =\n[{:diaria_media=&gt;\"103.58908136482939632545931759\", \n  :room_night=&gt;\"1143\",\n  :valor_periodo=&gt;\"118402.320000\"},   \n {:diaria_media=&gt;\"307.46792079207920792079207921\", \n  :room_night=&gt;\"101\",\n  :valor_periodo=&gt;\"31054.260000\"},\n {:diaria_media=&gt;\"313.000000\",\n  :room_night=&gt;\"9\",\n  :valor_periodo=&gt;\"2817.000000\"},\n {:diaria_media=&gt;\"0.0\",\n  :room_night=&gt;\"7\",\n  :valor_periodo=&gt;\"0.0\"},\n {:diaria_media=&gt;\"4.4630434782608695652173913043\",\n  :room_night=&gt;\"414\",\n  :valor_periodo=&gt;\"1847.700000\"},\n {:diaria_media=&gt;\"150.89382627422828427853553482\",\n  :room_night=&gt;\"1393\",\n  :valor_periodo=&gt;\"210195.100000\"}, \n {:diaria_media=&gt;\"221.11425992779783393501805054\",\n  :room_night=&gt;\"554\",\n  :valor_periodo=&gt;\"122497.300000\"},\n {:diaria_media=&gt;\"36.919200\",\n  :room_night=&gt;\"25\",\n  :valor_periodo=&gt;\"922.980000\"},\n {:diaria_media=&gt;\"31.967530864197530864197530864\",\n  :room_night=&gt;\"81\",\n  :valor_periodo=&gt;\"2589.370000\"},\n {:diaria_media=&gt;\"0\",\n  :room_night=&gt;\"0\",\n  :valor_periodo=&gt;\"0.000000\"}]\n</code></pre>\n\n<p>I need to get all the <code>:room night</code> fields and add the values. What is the best way to achieve that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "cookies"], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4933098, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ec3ab3be25ee9c09b825139c9578804?s=128&d=identicon&r=PG&f=1", "display_name": "MLZ", "link": "https://stackoverflow.com/users/4933098/mlz"}, "edited": false, "score": 0, "creation_date": 1461287230, "post_id": 36750475, "comment_id": 61142044, "body": "Great to know, thank you for the info!"}, {"owner": {"reputation": 173, "user_id": 4933098, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ec3ab3be25ee9c09b825139c9578804?s=128&d=identicon&r=PG&f=1", "display_name": "MLZ", "link": "https://stackoverflow.com/users/4933098/mlz"}, "edited": false, "score": 0, "creation_date": 1461354348, "post_id": 36750475, "comment_id": 61178333, "body": "Do you think I can still use sessions without having user objects?"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 4, "last_activity_date": 1461317717, "last_edit_date": 1461317717, "creation_date": 1461171595, "answer_id": 36750475, "question_id": 36750121, "link": "https://stackoverflow.com/questions/36750121/can-i-use-sessions-cookies-in-ruby-on-rails-without-having-a-users-model-or-any/36750475#36750475", "title": "Can I use sessions/cookies in Ruby on Rails without having a user&#39;s model or any authentication?", "body": "<p>Yes. The rails session storage mechanism simply links a session id with a session storage (cookie by default).</p>\n\n<p>It basically works like this - when a user first visits your app rails generates a session identifier which is a long hash - the identifier is stored by rails on the server and also sent to the user in a cookie. </p>\n\n<p>In subsequent requests to the app the rails sessions middleware will look at the users cookies for the identifier and if its valid it will unencrypt the session storage cookie and add it to the Rails session. Rails does all this by default without you having to lift a finger.</p>\n\n<p>You can use this session storage for any arbitrary data as long as its within the 4k limit imposed by browsers on cookies. Using some other storage like Redis/Memcached or database storage lets you store more data at the cost of somewhat decreased performance. </p>\n\n<p>The reason you commonly see it connected with authorization is that cookies is kind of the defacto way to link a user id on the server with the current user sitting behind the browser.</p>\n\n<ul>\n<li><a href=\"http://guides.rubyonrails.org/security.html#sessions\" rel=\"nofollow\">Rails Guides: Sessions</a></li>\n<li><a href=\"http://guides.rubyonrails.org/rails_on_rack.html#action-dispatcher-middleware-stack\" rel=\"nofollow\">Rails Guides: Rails On Rack</a> if you are interested in how its implemented.</li>\n</ul>\n"}], "owner": {"reputation": 173, "user_id": 4933098, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ec3ab3be25ee9c09b825139c9578804?s=128&d=identicon&r=PG&f=1", "display_name": "MLZ", "link": "https://stackoverflow.com/users/4933098/mlz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2078, "favorite_count": 0, "closed_date": 1461287213, "accepted_answer_id": 36750475, "answer_count": 1, "score": 4, "last_activity_date": 1461354133, "creation_date": 1461170577, "last_edit_date": 1461354133, "question_id": 36750121, "link": "https://stackoverflow.com/questions/36750121/can-i-use-sessions-cookies-in-ruby-on-rails-without-having-a-users-model-or-any", "closed_reason": "Duplicate", "title": "Can I use sessions/cookies in Ruby on Rails without having a user&#39;s model or any authentication?", "body": "<p>I am creating a quiz game in Rails and would like to create a session to store the current user's data to keep track of the number of questions they answered correctly. All of the tutorials that I've searched for makes one login first then generate a session, can I do this without it?</p>\n\n<p>Edit:\nActually I wanted to know if this was possible without having a users model at all?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "git-bash"], "comments": [{"owner": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "edited": false, "score": 0, "creation_date": 1461170031, "post_id": 36749877, "comment_id": 61080602, "body": "Which Ruby are are you using? (<code>ruby -v</code>).  Also maybe don&#39;t use git bash, and visit this page for instructions on rails installation: <a href=\"http://guides.railsgirls.com/install#setup-for-linux\" rel=\"nofollow noreferrer\">guides.railsgirls.com/install#setup-for-linux</a>"}, {"owner": {"reputation": 553, "user_id": 5699775, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/81577142186ea002acb0550a09aa87fb?s=128&d=identicon&r=PG&f=1", "display_name": "utkarsh tyagi", "link": "https://stackoverflow.com/users/5699775/utkarsh-tyagi"}, "reply_to_user": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "edited": false, "score": 0, "creation_date": 1461173359, "post_id": 36749877, "comment_id": 61082529, "body": "thanks man,  guides.railsgirls.com it worked."}], "owner": {"reputation": 553, "user_id": 5699775, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/81577142186ea002acb0550a09aa87fb?s=128&d=identicon&r=PG&f=1", "display_name": "utkarsh tyagi", "link": "https://stackoverflow.com/users/5699775/utkarsh-tyagi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 649, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512942524, "creation_date": 1461169762, "last_edit_date": 1512942524, "question_id": 36749877, "link": "https://stackoverflow.com/questions/36749877/rails-installation-from-http-installrails-com-undefined-method-split-for", "title": "rails installation from http://installrails.com/ - undefined method &#39;split&#39; for nil:NilClass", "body": "<p>Hi i am tryng to installs rails for the first time, following steps given in <a href=\"http://installrails.com/\" rel=\"nofollow\">http://installrails.com/</a>. But I am facing this problem when I give this command in git bash</p>\n\n<pre><code>curl http://installrails.com/update_rubygems.rb | ruby\n</code></pre>\n\n<p>this error comes up:</p>\n\n<pre><code>Downloading ...\n-:55:in 'filename': undefined method 'split' for nil:NilClass &lt;NoMethodError&gt;\n     from -:25:in 'download'\n     from -:14:in 'call'\n     from -:60:in '&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1461170608, "post_id": 36750100, "comment_id": 61080947, "body": "I see! yeah, Any idea on what you would do to fix?"}, {"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "reply_to_user": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1461170898, "post_id": 36750100, "comment_id": 61081115, "body": "the fix is as shown by Max and Rodrigo above. I&#39;ll add as edit to my answer here."}], "tags": [], "owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "is_accepted": true, "score": 1, "last_activity_date": 1461170966, "last_edit_date": 1461170966, "creation_date": 1461170478, "answer_id": 36750100, "question_id": 36749826, "link": "https://stackoverflow.com/questions/36749826/rspec-trying-to-understand-nilnilclass-error/36750100#36750100", "title": "Rspec - Trying to understand nil:NilClass error", "body": "<p>Your <code>Retailer</code> model has a relationship with <code>location</code>.</p>\n\n<p>And you have a <code>city</code> method on it as well, which is looking at this <code>location</code></p>\n\n<pre><code>def city\n  location.city\nend\n</code></pre>\n\n<p>Now, this is included in your controller:</p>\n\n<pre><code>render json: @retailers, methods: [:city]\n</code></pre>\n\n<p>Now, in your test, you created a <code>location</code> and a <code>retailer</code>:</p>\n\n<pre><code>location = Location.create!(\n      city: \"Portland\",\n      street_1: \"Cherry\",\n      state: \"Oregon\",\n      zip: \"49490\"\n    )\n\n  retailer = Retailer.create!(\n    name: \"Good Coffee Co.\",\n    description: \"Hipster Good\",\n    image_url: \"http://www.example.com/foo_bar.jpg\",\n  )\n</code></pre>\n\n<p>But these two are not related in any way.</p>\n\n<p>So, when in your test, you send a <code>get</code> request to the <code>index</code> action of your controller,</p>\n\n<pre><code>get \"/api/retailers.json\"\n</code></pre>\n\n<p>This tries to get the <code>city</code> for the retailer, which is the method above. but remember that the method tries to get <code>location.city</code></p>\n\n<p>But your <code>retailer</code> has no <code>location</code>, because it has not been linked to any... So, <code>location</code> here will be <code>nil</code></p>\n\n<p>and then, when you call <code>city</code> on <code>location</code>(which is nil), you are calling <code>city</code> on <code>nil</code></p>\n\n<p>This is where the error comes from:</p>\n\n<pre><code>NoMethodError:\n   undefined method `city' for nil:NilClass\n # ./app/models/retailer.rb:8:in `city'\n</code></pre>\n\n<p><strong>Edit (To Fix):</strong></p>\n\n<p>Add the location created as the Retailers location in your test as follow:</p>\n\n<pre><code>location = Location.create!(\n  city: \"Portland\",\n  street_1: \"Cherry\",\n  state: \"Oregon\",\n  zip: \"49490\"\n)\n\nretailer = Retailer.create!(\n  name: \"Good Coffee Co.\",\n  description: \"Hipster Good\",\n  image_url: \"http://www.example.com/foo_bar.jpg\",\n  location: location # Add location as location here.\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5304, "user_id": 740394, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/796442b522b037319711277a81d775ca?s=128&d=identicon&r=PG", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/740394/rodrigo"}, "is_accepted": false, "score": 1, "last_activity_date": 1461170601, "creation_date": 1461170601, "answer_id": 36750133, "question_id": 36749826, "link": "https://stackoverflow.com/questions/36749826/rspec-trying-to-understand-nilnilclass-error/36750133#36750133", "title": "Rspec - Trying to understand nil:NilClass error", "body": "<p>The <code>city</code> method use the location of <code>Retailer</code>, which wasn't set for the one you created.</p>\n\n<p>To solve this, just assign the <code>location</code> association to <code>Retailer</code>:</p>\n\n<pre><code>retailer = Retailer.create!(\n    name: \"Good Coffee Co.\",\n    description: \"Hipster Good\",\n    image_url: \"http://www.example.com/foo_bar.jpg\",\n    location: location\n  )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1461170995, "last_edit_date": 1461170995, "creation_date": 1461170656, "answer_id": 36750149, "question_id": 36749826, "link": "https://stackoverflow.com/questions/36749826/rspec-trying-to-understand-nilnilclass-error/36750149#36750149", "title": "Rspec - Trying to understand nil:NilClass error", "body": "<p>You never actually set up the association between retailer and location. Thus when <code>retailer#city</code> is called location is nil.</p>\n\n<p>You might want to start by changing your method to handle nil gracefully unless your business logic should not allow a Retailer without a Location:</p>\n\n<pre><code>class Retailer &lt; ActiveRecord::Base\n  has_one :location\n\n  has_many :retailer_timeslots\n  has_many :timeslots, through: :retailer_timeslots\n\n  def city\n    location.city if location\n  end\nend\n</code></pre>\n\n<p>A more elegant way is by using <code>Module#delegate</code>:</p>\n\n<pre><code>class Retailer &lt; ActiveRecord::Base\n  has_one :location\n\n  has_many :retailer_timeslots\n  has_many :timeslots, through: :retailer_timeslots\n\n  delegate :city, to: :location, allow_nil: true\nend\n</code></pre>\n\n<p>This should change the spec from broken to failing.</p>\n\n<p>To fix the spec you need to setup a relation between the two:</p>\n\n<pre><code>location = Location.create!(\n  city: \"Portland\",\n  street_1: \"Cherry\",\n  state: \"Oregon\",\n  zip: \"49490\"\n)\n\nretailer = Retailer.create!(\n  name: \"Good Coffee Co.\",\n  description: \"Hipster Good\",\n  image_url: \"http://www.example.com/foo_bar.jpg\",\n  location: location # !!!!!\n)\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 36750100, "answer_count": 3, "score": 0, "last_activity_date": 1461170995, "creation_date": 1461169586, "question_id": 36749826, "link": "https://stackoverflow.com/questions/36749826/rspec-trying-to-understand-nilnilclass-error", "title": "Rspec - Trying to understand nil:NilClass error", "body": "<p>I'm trying to make a test pass for code that has already has been implemented. I'm new to unit testing and RSpec and for the life of me cannot figure out this error. Basically, I'm trying to verify that JSON is being sent to the proper endpoint. I think I have created all the attributes I needed to but I keep getting this same error. Here is the error and my code. it's clearly something to do with including the city from another model table but I'm not sure why it's complaining?</p>\n\n<p>Here is the test.</p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.describe \"/api/retailers\" do\n\ndescribe \"GET /api/retailers\" do\nit \"Returns JSON for retailers\" do\n\n    location = Location.create!(\n      city: \"Portland\",\n      street_1: \"Cherry\",\n      state: \"Oregon\",\n      zip: \"49490\"\n    )\n\n  retailer = Retailer.create!(\n    name: \"Good Coffee Co.\",\n    description: \"Hipster Good\",\n    image_url: \"http://www.example.com/foo_bar.jpg\",\n  )\n\n  get \"/api/retailers.json\"\n\n  expect(response).to be_success\n  json = JSON.parse(response.body)\n\n  expect(json[\"name\"]).to eql(\"Good Coffee Co.\")\n  expect(json[\"description\"]).to eql(\"Hipster Good\")\n  expect(json[\"image_url\"]).to eql(\"http://www.example.com/foo_bar.jpg\")\n  expect(json[\"city\"]).to eql(location.city)\nend\nend\nend\n</code></pre>\n\n<p>Here is my error message</p>\n\n<pre><code>/api/retailers GET /api/retailers Returns JSON for retailers\n Failure/Error: location.city\n\n NoMethodError:\n   undefined method `city' for nil:NilClass\n # ./app/models/retailer.rb:8:in `city'\n</code></pre>\n\n<p>Here is my controller</p>\n\n<pre><code>class Api::RetailersController &lt; ApiController\n def index\n  @retailers = Retailer.all\n  render json: @retailers, methods: [:city]\n end\nend\n</code></pre>\n\n<p>Here is my model</p>\n\n<pre><code>class Retailer &lt; ActiveRecord::Base\nhas_one :location\n\nhas_many :retailer_timeslots\nhas_many :timeslots, through: :retailer_timeslots\n\ndef city\n location.city\nend\nend\n</code></pre>\n\n<p>Any help would be awesome. I'm really stumped on this problem. Let me know if any other info is necessary</p>\n"}, {"tags": ["ruby", "rspec", "sinatra", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "edited": false, "score": 0, "creation_date": 1461173601, "post_id": 36750910, "comment_id": 61082677, "body": "You can also specify filters when setting global rules, see this thread for more info: <a href=\"http://stackoverflow.com/questions/29094646/rspec-beforeeach-hook-conditionally-apply\" title=\"rspec beforeeach hook conditionally apply\">stackoverflow.com/questions/29094646/&hellip;</a>"}, {"owner": {"reputation": 10064, "user_id": 1769276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ddbbe9a629cce4be0da2d0a7a3421370?s=128&d=identicon&r=PG", "display_name": "PressingOnAlways", "link": "https://stackoverflow.com/users/1769276/pressingonalways"}, "edited": false, "score": 0, "creation_date": 1461173699, "post_id": 36750910, "comment_id": 61082735, "body": "I tried that with no success. I still get a <code>nil</code> for <code>@db</code>. I did @db = database with no success."}], "tags": [], "owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "is_accepted": false, "score": 0, "last_activity_date": 1461173388, "last_edit_date": 1461173388, "creation_date": 1461172918, "answer_id": 36750910, "question_id": 36749811, "link": "https://stackoverflow.com/questions/36749811/rspec-variable-scoping/36750910#36750910", "title": "RSpec Variable Scoping", "body": "<p>I'm not sure what you have in your <code>spec_helper.rb</code>, but you should include this:</p>\n\n<pre><code>RSpec.configure do |config|\n  config.before(:each) do\n    @db = 'your db object'\n  end\nend\n</code></pre>\n\n<p>This is the same as defining before hook directly above your test example, except it will run globally before each test.</p>\n"}, {"comments": [{"owner": {"reputation": 10064, "user_id": 1769276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ddbbe9a629cce4be0da2d0a7a3421370?s=128&d=identicon&r=PG", "display_name": "PressingOnAlways", "link": "https://stackoverflow.com/users/1769276/pressingonalways"}, "edited": false, "score": 0, "creation_date": 1461174415, "post_id": 36751152, "comment_id": 61083196, "body": "The database object is being set via sinatra-sequel (<a href=\"https://github.com/rtomayko/sinatra-sequel/blob/master/lib/sinatra/sequel.rb\" rel=\"nofollow noreferrer\">github.com/rtomayko/sinatra-sequel/blob/master/lib/sinatra/&zwnj;&#8203;&hellip;</a>). Any idea how to access the <code>database</code> object?"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1461173640, "creation_date": 1461173640, "answer_id": 36751152, "question_id": 36749811, "link": "https://stackoverflow.com/questions/36749811/rspec-variable-scoping/36751152#36751152", "title": "RSpec Variable Scoping", "body": "<p>Variables that start with an <code>@</code> sigil are <em>instance variables</em>. They belong to a particular <em>object</em> (i.e. instance), and can be accessed <em>only</em> from that object. They are always looked up relative to <code>self</code>.</p>\n\n<p>In your case, you have <em>two different</em> instance variables of <em>two different</em> objects.</p>\n\n<p>On line 4, <code>self</code> is the so-called <code>main</code> top-level object. On lines 7 and 11, <code>self</code> is an instance of the class <code>RSpec::ExampleGroups::MyModel::Constraints</code>, a totally different object of a totally different class with a totally different set of instance variables.</p>\n\n<p>If you <em>really</em> need to access <em>that</em> particular instance variable, you could do something like this:</p>\n\n<pre><code>$main = self\n\nrequire File.expand_path '../../spec_helper.rb', __FILE__\n\n\np @db\ndescribe MyModel do\n  before do\n    p $main.instance_variable_get(:@db)\n  end\n  context 'constraints' do\n    it 'is expected to do something' do\n      p $main.instance_variable_get(:@db)\n    end\n  end\nend\n</code></pre>\n\n<p>But the easiest solution would be to just set the instance variable on the <em>correct</em> object in the <code>before</code> hook.</p>\n"}], "owner": {"reputation": 10064, "user_id": 1769276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ddbbe9a629cce4be0da2d0a7a3421370?s=128&d=identicon&r=PG", "display_name": "PressingOnAlways", "link": "https://stackoverflow.com/users/1769276/pressingonalways"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1461173640, "creation_date": 1461169540, "question_id": 36749811, "link": "https://stackoverflow.com/questions/36749811/rspec-variable-scoping", "title": "RSpec Variable Scoping", "body": "<p>I am having difficulties accessing the globally available <code>@db</code> variable within my rspec tests. The <code>@db</code> variable is set within the app which is included via the spec_helper. </p>\n\n<p>Code below: </p>\n\n<pre><code>require File.expand_path '../../spec_helper.rb', __FILE__\n\n\np @db\ndescribe MyModel do\n  before do\n    p @db\n  end\n  context 'constraints' do\n    it 'is expected to do something' do\n      p @db\n    end\n  end\nend\n</code></pre>\n\n<p>When I run this, I get the output:</p>\n\n<pre><code>#&lt;Sequel::Mysql2::Database: \"mysql2://root:@localhost/my_project\"&gt;\nnil\nnil\n</code></pre>\n\n<p>indicating that the <code>@db</code> variable is properly set from outside the rspec test, but is not accessible once the test runs. How can I access <code>@db</code> from within my test? </p>\n"}, {"tags": ["java", "ruby", "selenium-webdriver", "appium", "appium-ios"], "comments": [{"owner": {"reputation": 1213, "user_id": 2070970, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e2a2e540c527ee81ef5d35c905b74ab7?s=128&d=identicon&r=PG", "display_name": "karthick23", "link": "https://stackoverflow.com/users/2070970/karthick23"}, "edited": false, "score": 0, "creation_date": 1461214815, "post_id": 36749731, "comment_id": 61099056, "body": "add screenshot and inspector snippwt"}, {"owner": {"reputation": 11, "user_id": 6231370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NhqqGo-nCfE/AAAAAAAAAAI/AAAAAAAABa0/VzgKSd1GRQA/photo.jpg?sz=128", "display_name": "Simon Joshi", "link": "https://stackoverflow.com/users/6231370/simon-joshi"}, "reply_to_user": {"reputation": 1213, "user_id": 2070970, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e2a2e540c527ee81ef5d35c905b74ab7?s=128&d=identicon&r=PG", "display_name": "karthick23", "link": "https://stackoverflow.com/users/2070970/karthick23"}, "edited": false, "score": 0, "creation_date": 1461237592, "post_id": 36749731, "comment_id": 61113524, "body": "@karthick23 added appium log"}, {"owner": {"reputation": 11, "user_id": 6231370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NhqqGo-nCfE/AAAAAAAAAAI/AAAAAAAABa0/VzgKSd1GRQA/photo.jpg?sz=128", "display_name": "Simon Joshi", "link": "https://stackoverflow.com/users/6231370/simon-joshi"}, "reply_to_user": {"reputation": 1213, "user_id": 2070970, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e2a2e540c527ee81ef5d35c905b74ab7?s=128&d=identicon&r=PG", "display_name": "karthick23", "link": "https://stackoverflow.com/users/2070970/karthick23"}, "edited": false, "score": 0, "creation_date": 1461239742, "post_id": 36749731, "comment_id": 61115084, "body": "it looks similar to this issue but for me its a button that i cannot click <a href=\"https://github.com/appium/appium/issues/4131\" rel=\"nofollow noreferrer\">github.com/appium/appium/issues/4131</a>"}, {"owner": {"reputation": 1213, "user_id": 2070970, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e2a2e540c527ee81ef5d35c905b74ab7?s=128&d=identicon&r=PG", "display_name": "karthick23", "link": "https://stackoverflow.com/users/2070970/karthick23"}, "edited": false, "score": 0, "creation_date": 1461311164, "post_id": 36749731, "comment_id": 61150861, "body": "log seems to be tapping, try clicking instead"}], "owner": {"reputation": 11, "user_id": 6231370, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NhqqGo-nCfE/AAAAAAAAAAI/AAAAAAAABa0/VzgKSd1GRQA/photo.jpg?sz=128", "display_name": "Simon Joshi", "link": "https://stackoverflow.com/users/6231370/simon-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 607, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1461237548, "creation_date": 1461169316, "last_edit_date": 1461237548, "question_id": 36749731, "link": "https://stackoverflow.com/questions/36749731/how-to-switch-between-modal-window-via-appium", "title": "How to switch between modal window via appium?", "body": "<p>I am having an issue while automating iOS app via appium. The problem I am facing is our app has modal window comes up on clicking some link in app, and I need to tap on some element inside that modal window. But I haven't been successful. </p>\n\n<p>Basically, my suspicion is previous window before modal window is blocking to interact with modal window. If some one can suggest on how to switch to interact with that modal window, it would be really helpful.</p>\n\n<pre><code>info: [IOS_SYSLOG_ROW ] Apr 21 12:09:30 test-iPhone-5s ScriptAgent[6174] &lt;Error&gt;: libMobileGestalt MobileGestalt.c:528: no access to UniqueDeviceID (see &lt;rdar://problem/11744455&gt;)\ninfo: [debug] [INST] 2016-04-21 11:09:30 +0000 Debug: evaluating au.tapById('14')\ninfo: [debug] [INST] 2016-04-21 11:09:30 +0000 Debug: target.frontMostApp().elements()[0].elements()[15].tap()\ninfo: [IOS_SYSLOG_ROW ] Apr 21 12:09:30 test-iPhone-5s MobileGestaltHelper[79] &lt;Error&gt;: libMobileGestalt MobileGestalt.c:267: server_access_check denied access to question UniqueDeviceID for pid 6174\ninfo: [debug] [INST] 2016-04-21 11:09:30 +0000 Debug: target.frontMostApp().elements()[0].elements()[15] could not be tapped\ninfo: [IOS_SYSLOG_ROW ] Apr 21 12:09:30 test-iPhone-5s ScriptAgent[6174] &lt;Error&gt;: libMobileGestalt MobileGestaltSupport.m:167: pid 6174 (ScriptAgent) does not have sandbox access for re6Zb+zwFKJNlkQTUeT+/w and IS NOT appropriately entitled\ninfo: [IOS_SYSLOG_ROW ] Apr 21 12:09:30 test-iPhone-5s ScriptAgent[6174] &lt;Error&gt;: libMobileGestalt MobileGestalt.c:528: no access to UniqueDeviceID (see &lt;rdar://problem/11744455&gt;)\n\ninfo: [debug] [INST] 2016-04-21 11:09:30 +0000 Error: VerboseError: elementId 14 could not be tapped\ninfo: [debug] [INST] 2016-04-21 11:09:30 +0000 Error: Error during eval: tapById@file:///Applications/Appium.app/Contents/Resources/node_modules/appium/F32B3814-A47F-4C18-AAF1-5A58DE43FD13/bootstrap-5923cadea0343e3f.js:1114:25\n       eval code\neval@[native code]\nstartProcessing@file:///Applications/Appium.app/Contents/Resources/node_modules/appium/F32B3814-A47F-4C18-AAF1-5A58DE43FD13/bootstrap-5923cadea0343e3f.js:2710:30\nbootstrap@file:///Applications/Appium.app/Contents/Resources/node_modules/appium/F32B3814-A47F-4C18-AAF1-5A58DE43FD13/bootstrap-5923cadea0343e3f.js:2778:31\nglobal code@file:///Applications/Appium.app/Contents/Resources/node_modules/appium/F32B3814-A47F-4C18-AAF1-5A58DE43FD13/bootstrap-5923cadea0343e3f.js:2787:10\ninfo: [debug] [INST] 2016-04-21 11:09:30 +0000 Debug: responding with:\n\ninfo: [debug] [INST] 2016-04-21 11:09:30 +0000 Debug: Running system command #47: /Applications/Appium.app/Contents/Resources/node/bin/node /Applications/Appium.app/Contents/Resources/node_modules/appium/submodules/appium-uiauto/bin/command-proxy-client.js /tmp/instruments_sock 2,{\"status\":13,\"value\":\"elementId 14 could not be tapped\"}...\ninfo: [debug] Socket data received (58 bytes)\ninfo: [debug] Socket data being routed.\ninfo: [debug] Got result from instruments: {\"status\":13,\"value\":\"elementId 14 could not be tapped\"}\ninfo: [debug] Responding to client with error: {\"status\":13,\"value\":{\"message\":\"An unknown server-side error occurred while processing the command.\",\"origValue\":\"elementId 14 could not be tapped\"},\"sessionId\":\"b41ebb12-d884-4d83-b3eb-22b25398a183\"}\ninfo: &lt;-- POST /wd/hub/session/b41ebb12-d884-4d83-b3eb-22b25398a183/element/14/click 500 1268.862 ms - 201 \n\ninfo: --&gt; POST /wd/hub/session/b41ebb12-d884-4d83-b3eb-22b25398a183/element {\"using\":\"xpath\",\"value\":\"//UIAApplication[1]/UIAWindow[1]/UIAButton[12]\"}\n\ninfo: [debug] Waiting up to 0ms for condition\ninfo: [debug] Pushing command to appium work queue: \"au.mainApp().getTreeForXML()\"\ninfo: [debug] Sending command to instruments: au.mainApp().getTreeForXML()\n\ninfo: [debug] [INST] 2016-04-21 11:09:31 +0000 Debug: Got new command 47 from instruments: au.mainApp().getTreeForXML()\n\ninfo: [debug] [INST] 2016-04-21 11:09:31 +0000 Debug: evaluating au.mainApp().getTreeForXML()\n\ninfo: [debug] [INST] 2016-04-21 11:09:31 +0000 Debug: evaluation finished\n\ninfo: [debug] [INST] 2016-04-21 11:09:31 +0000 Debug: responding with:\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0/0\",\"x\":0,\"y\":0,\"width\":320,\"height\":568},\"&gt;\":[{\"UIANavigationBar\":{\"@\":{\"name\":\"test\",\"label\":null,\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0/0/0\",\"x\":0,\"y\":20,\"width\":320,\"height\":44},\"&gt;\":[{\"UIAImage\":{\"@\":{\"name\":null,\"label\":null,\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/0/0\",\"x\":0,\"y\":0,\"width\":320,\"height\":64},\"&gt;\":[{\"UIAImage\":{\"@\":{\"name\":null,\"label\":null,\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/0/0/0\",\"x\":0,\"y\":64,\"width\":320,\"height\":0},\"&gt;\":[]}}]}},{\"UIAButton\":{\"@\":{\"name\":\"UINavigationBarBackIndicatorDefault.png\",\"label\":\"Back\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/0/1\",\"x\":8,\"y\":32,\"width\":12.5,\"height\":20.5},\"&gt;\":[]}}]}},{\"UIAScrollView\":{\"@\":{\"name\":null,\"label\":null,\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0/0/1\",\"x\":8,\"y\":72,\"width\":304,\"height\":436},\"&gt;\":[{\"UIAImage\":{\"@\":{\"name\":null,\"label\":null,\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/1/0\",\"x\":40,\"y\":99,\"width\":240,\"height\":84},\"&gt;\":[]}},{\"UIAStaticText\":{\"@\":{\"name\":\"Login Request\",\"label\":\"Login Request\",\"value\":\"Login Request\",\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0/0/1/1\",\"x\":18,\"y\":191,\"width\":284,\"height\":48},\"&gt;\":[]}},{\"UIAStaticText\":{\"@\":{\"name\":\"test\",\"label\":\"test\",\"value\":\"test\",\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0/0/1/2\",\"x\":20,\"y\":259,\"width\":280,\"height\":29},\"&gt;\":[]}},{\"UIAStaticText\":{\"@\":{\"name\":\"www.test.com\",\"label\":\"www.test.com\",\"value\":\"www.test.com\",\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0/0/1/3\",\"x\":20,\"y\":290,\"width\":280,\"height\":30},\"&gt;\":[]}},{\"UIAStaticText\":{\"@\":{\"name\":null,\"label\":\"\",\"value\":\"\",\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/1/4\",\"x\":36,\"y\":340,\"width\":244,\"height\":0},\"&gt;\":[]}}]}},{\"UIAImage\":{\"@\":{\"name\":\"darkgrey_shadow_top\",\"label\":null,\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/2\",\"x\":0,\"y\":508,\"width\":320,\"height\":3},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"Approve\",\"label\":\"Approve\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0/0/3\",\"x\":9,\"y\":520,\"width\":146.5,\"height\":39},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"Decline\",\"label\":\"Decline\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0/0/4\",\"x\":164.5,\"y\":520,\"width\":146.5,\"height\":39},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"Cancel\",\"label\":\"Cancel\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/5\",\"x\":10,\"y\":20,\"width\":72,\"height\":44},\"&gt;\":[]}},{\"UIAStaticText\":{\"@\":{\"name\":\"LabelPinText\",\"label\":\"LabelPinText\",\"value\":\"LabelPinText\",\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/6\",\"x\":8,\"y\":72,\"width\":304,\"height\":214},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"1\",\"label\":\"1\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/7\",\"x\":0,\"y\":350,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"2\",\"label\":\"2\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/8\",\"x\":107.5,\"y\":350,\"width\":105,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"3\",\"label\":\"3\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/9\",\"x\":214.5,\"y\":350,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"4\",\"label\":\"4\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/10\",\"x\":0,\"y\":404.5,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"5\",\"label\":\"5\",\"value\":null,\"dom\":null,\"e\nnabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/11\",\"x\":107.5,\"y\":404.5,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"6\",\"label\":\"6\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/12\",\"x\":215,\"y\":404.5,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"7\",\"label\":\"7\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/13\",\"x\":0,\"y\":459,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"8\",\"label\":\"8\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/14\",\"x\":107.5,\"y\":459,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"9\",\"label\":\"9\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/15\",\"x\":215,\"y\":459,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"Forgot PIN\",\"label\":\"Forgot PIN\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/16\",\"x\":0,\"y\":513.5,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":\"0\",\"label\":\"0\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/17\",\"x\":107.5,\"y\":513.5,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}},{\"UIAButton\":{\"@\":{\"name\":null,\"label\":null,\"value\":null,\"dom\":null,\"enabled\":false,\"valid\":true,\"visible\":false,\"hint\":null,\"path\":\"/0/0/18\",\"x\":215,\"y\":513.5,\"width\":105.5,\"height\":52.5},\"&gt;\":[]}}]}},{\"UIAWindow\":{\"@\":{\"name\":null,\"label\":null,\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0/1\",\"x\":0,\"y\":0,\"width\":320,\"height\":568},\"&gt;\":[{\"UIAStatusBar\":{\"@\":{\"name\":null,\"label\":null,\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0/1/0\",\"x\":0,\"y\":0,\"width\":320,\"height\":20},\"&gt;\":[{\"UIAElement\":{\"@\":{\"name\":\"No SIM\",\"label\":\"No SIM\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":\"Swipe down with three fingers to reveal the notification center., Swipe up with three fingers to reveal the control center, Double-tap to scroll to top\",\"path\":\"/0/1/0/0\",\"x\":6,\"y\":0,\"width\":42,\"height\":20},\"&gt;\":[]}},{\"UIAElement\":{\"@\":{\"name\":\"3 of 3 Wi-Fi bars\",\"label\":\"3 of 3 Wi-Fi bars\",\"value\":\"_TechHub_London\",\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":\"Swipe down with three fingers to reveal the notification center., Swipe up with three fingers to reveal the control center, Double-tap to scroll to top\",\"path\":\"/0/1/0/1\",\"x\":53,\"y\":0,\"width\":13,\"height\":20},\"&gt;\":[]}},{\"UIAElement\":{\"@\":{\"name\":\"12:09\",\"label\":\"12:09\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":\"Swipe down with three fingers to reveal the notification center., Swipe up with three fingers to reveal the control center, Double-tap to scroll to top\",\"path\":\"/0/1/0/2\",\"x\":145,\"y\":0,\"width\":30,\"height\":20},\"&gt;\":[]}},{\"UIAElement\":{\"@\":{\"name\":\"98% battery power, Charging\",\"label\":\"98% battery power, Charging\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":\"Swipe down with three fingers to reveal the notification center., Swipe up with three fingers to reveal the control center, Double-tap to scroll to top\",\"path\":\"/0/1/0/3\",\"x\":253,\"y\":0,\"width\":62,\"height\":20},\"&gt;\":[]}}]}}]}}]}}}\ninfo: [debug] [INST] 2016-04-21 11:09:31 +0000 Debug: Running system command #48: /Applications/Appium.app/Contents/Resources/node/bin/node /Applications/Appium.app/Contents/Resources/node_modules/appium/submodules/appium-uiauto/bin/command-proxy-client.js /tmp/instruments_sock 2,{\"status\":0,\"value\":{\"UIAApplication\":{\"@\":{\"name\":\"test-Dev\",\"label\":\"test-Dev\",\"value\":null...\ninfo: [debug] Socket data received (7654 bytes)\ninfo: [debug] Socket data being routed.\ninfo: [debug] Got result from instruments: {\"status\":0,\"value\":{\"UIAApplication\":{\"@\":{\"name\":\"test-Dev\",\"label\":\"test-Dev\",\"value\":null,\"dom\":null,\"enabled\":true,\"valid\":true,\"visible\":true,\"hint\":null,\"path\":\"/0\",\"x\n\":0,\"y\":20,\"width\":320,\"height\":548},\"&gt;\":[{\"UIAWindow\":{\"@\":{\"name\":null,\"label\":null,\"value\":null,\"dom\":null,\"enabled\ninfo: [debug] Pushing command to appium work queue: \"au.getElementByIndexPath('/0/0/15')\"\ninfo: [debug] Sending command to instruments: au.getElementByIndexPath('/0/0/15')\n\ninfo: [debug] [INST] 2016-04-21 11:09:32 +0000 Debug: Got new command 48 from instruments: au.getElementByIndexPath('/0/0/15')\n\ninfo: [debug] [INST] 2016-04-21 11:09:32 +0000 Debug: evaluating au.getElementByIndexPath('/0/0/15')\n\ninfo: [debug] [INST] 2016-04-21 11:09:32 +0000 Debug: evaluation finished\ninfo: [debug] [INST] 2016-04-21 11:09:32 +0000 Debug: Lookup returned [object UIAButton] with the name \"9\" (id: 15).\ninfo: [debug] [INST] 2016-04-21 11:09:32 +0000 Debug: responding with:\ninfo: [debug] [INST] 2016-04-21 11:09:32 +0000 Debug: Running system command #49: /Applications/Appium.app/Contents/Resources/node/bin/node /Applications/Appium.app/Contents/Resources/node_modules/appium/submodules/appium-uiauto/bin/command-proxy-client.js /tmp/instruments_sock 2,{\"status\":0,\"value\":{\"ELEMENT\":\"15\"}}...\ninfo: [debug] Socket data received (39 bytes)\ninfo: [debug] Socket data being routed.\ninfo: [debug] Got result from instruments: {\"status\":0,\"value\":{\"ELEMENT\":\"15\"}}\ninfo: [debug] Responding to client with success: {\"status\":0,\"value\":{\"ELEMENT\":\"15\"},\"sessionId\":\"b41ebb12-d884-4d83-b3eb-22b25398a183\"}\ninfo: &lt;-- POST /wd/hub/session/b41ebb12-d884-4d83-b3eb-22b25398a183/element 200 1774.658 ms - 88 {\"status\":0,\"value\":{\"ELEMENT\":\"15\"},\"sessionId\":\"b41ebb12-d884-4d83-b3eb-22b25398a183\"}\ninfo: --&gt; POST /wd/hub/session/b41ebb12-d884-4d83-b3eb-22b25398a183/element/15/click {}\ninfo: [debug] Pushing command to appium work queue: \"au.tapById('15')\"\ninfo: [debug] Sending command to instruments: au.tapById('15')\n\ninfo: [IOS_SYSLOG_ROW ] Apr 21 12:09:34 test-iPhone-5s MobileGestaltHelper[79] &lt;Error&gt;: libMobileGestalt MobileGestalt.c:267: server_access_check denied access to question UniqueDeviceID for pid 6174\n\ninfo: [IOS_SYSLOG_ROW ] Apr 21 12:09:34 test-iPhone-5s ScriptAgent[6174] &lt;Error&gt;: libMobileGestalt MobileGestaltSupport.m:167: pid 6174 (ScriptAgent) does not have sandbox access for re6Zb+zwFKJNlkQTUeT+/w and IS NOT appropriately entitled\ninfo: [IOS_SYSLOG_ROW ] Apr 21 12:09:34 test-iPhone-5s ScriptAgent[6174] &lt;Error&gt;: libMobileGestalt MobileGestalt.c:528: no access to UniqueDeviceID (see &lt;rdar://problem/11744455&gt;)\n\ninfo: [debug] [INST] 2016-04-21 11:09:34 +0000 Debug: Got new command 49 from instruments: au.tapById('15')\ninfo: [debug] [INST] 2016-04-21 11:09:34 +0000 Debug: evaluating au.tapById('15')\ninfo: [debug] [INST] 2016-04-21 11:09:34 +0000 Debug: target.frontMostApp().elements()[0].elements()[15].tap()\ninfo: [IOS_SYSLOG_ROW ] Apr 21 12:09:34 test-iPhone-5s MobileGestaltHelper[79] &lt;Error&gt;: libMobileGestalt MobileGestalt.c:267: server_access_check denied access to question UniqueDeviceID for pid 6174\ninfo: [IOS_SYSLOG_ROW ] Apr 21 12:09:34 test-iPhone-5s ScriptAgent[6174] &lt;Error&gt;: libMobileGestalt MobileGestaltSupport.m:167: pid 6174 (ScriptAgent) does not have sandbox access for re6Zb+zwFKJNlkQTUeT+/w and IS NOT appropriately entitled\ninfo: [IOS_SYSLOG_ROW ] Apr 21 12:09:34 test-iPhone-5s ScriptAgent[6174] &lt;Error&gt;: libMobileGestalt MobileGestalt.c:528: no access to UniqueDeviceID (see &lt;rdar://problem/11744455&gt;)\ninfo: [debug] [INST] 2016-04-21 11:09:34 +0000 Debug: target.frontMostApp().elements()[0].elements()[15] could not be tapped\n\ninfo: [debug] [INST] 2016-04-21 11:09:34 +0000 Error: VerboseError: elementId 15 could not be tapped\ninfo: [debug] [INST] 2016-04-21 11:09:34 +0000 Error: Error during eval: tapById@file:///Applications/Appium.app/Contents/Resources/node_modules/appium/F32B3814-A47F-4C18-AAF1-5A58DE43FD13/bootstrap-5923cadea0343e3f.js:1114:25\n       eval code\neval@[native code]\nstartProcessing@file:///Applications/Appium.app/Contents/Resources/node_modules/appium/F32B3814-A47F-4C18-AAF1-5A58DE43FD13/bootstrap-5923cadea0343e3f.js:2710:30\nbootstrap@file:///Applications/Appium.app/Contents/Resources/node_modules/appium/F32B3814-A47F-4C18-AAF1-5A58DE43FD13/bootstrap-5923cadea0343e3f.js:2778:31\nglobal code@file:///Applications/Appium.app/Contents/Resources/node_modules/appium/F32B3814-A47F-4C18-AAF1-5A58DE43FD13/bootstrap-5923cadea0343e3f.js:2787:10\ninfo: [debug] Socket data received (58 bytes)\ninfo: [debug] Socket data being routed.\ninfo: [debug] Got result from instruments: {\"status\":13,\"value\":\"elementId 15 could not be tapped\"}\ninfo: [debug] Responding to client with error: {\"status\":13,\"value\":{\"message\":\"An unknown server-side error occurred while processing the command.\",\"origValue\":\"elementId 15 could not be tapped\"},\"sessionId\":\"b41ebb12-d884-4d83-b3eb-22b25398a183\"}\ninfo: &lt;-- POST /wd/hub/session/b41ebb12-d884-4d83-b3eb-22b25398a183/element/15/click 500 1246.783 ms - 201 \ninfo: [debug] [INST] 2016-04-21 11:09:34 +0000 Debug: responding with:\ninfo: [debug] [INST] 2016-04-21 11:09:34 +0000 Debug: Running system command #50: /Applications/Appium.app/Contents/Resources/node/bin/node /Applications/Appium.app/Contents/Resources/node_modules/appium/submodules/appium-uiauto/bin/command-proxy-client.js /tmp/instruments_sock 2,{\"status\":13,\"value\":\"elementId 15 could not be tapped\"}...\n\ninfo: --&gt; DELETE /wd/hub/session/b41ebb12-d884-4d83-b3eb-22b25398a183 {}\n\ninfo: Shutting down appium session\ninfo: [debug] Stopping ios\ninfo: [debug] Destroying instruments client socket.\ninfo: [debug] Closing socket server.\ninfo: [debug] Instruments socket server was closed\ninfo: [debug] Sending sigterm to instruments\ninfo: [debug] [INST] 2016-04-21 11:09:37 +0000 Stopped: Script was stopped by the user\n\ninfo: [IOS_SYSLOG_ROW ] Apr 21 12:09:37 test-iPhone-5s backboardd[31] &lt;Error&gt;: void IOHIDEventSystemConnectionDispatchEvent(IOHIDEventSystemConnectionRef, IOHIDEventRef): Error enqueuing memory (10000003) for client &lt;IOHIDEventSystemConnection 0x14651f0b0 [0x1962290c0]&gt;{pid=6173 executablePath=test type=Rate Controlled caller=CoreMo\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "reply_to_user": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1461170373, "post_id": 36749573, "comment_id": 61080802, "body": "Technically I am. The arg to <code>rake</code> is <code>db:seed</code>. So that explains, a la @Glenn&#39;s answer, why it was trying to use <code>db:seed</code> as the input stream."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1461170812, "post_id": 36749573, "comment_id": 61081066, "body": "Yeah @Glenn&#39;s answer should help you. While using ARGV in Ruby the program looks for the input from somewhere other then the <code>STDIN</code>. Personally I think it&#39;s a bug that needs to be patched, but that&#39;s just my own opinion."}], "answers": [{"tags": [], "owner": {"reputation": 440, "user_id": 4641753, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/GxQ0s.jpg?s=128&g=1", "display_name": "Glenn", "link": "https://stackoverflow.com/users/4641753/glenn"}, "is_accepted": true, "score": 5, "last_activity_date": 1461169676, "last_edit_date": 1495542671, "creation_date": 1461169676, "answer_id": 36749850, "question_id": 36749573, "link": "https://stackoverflow.com/questions/36749573/no-such-file-error-when-using-gets-chomp-in-seeds-rb/36749850#36749850", "title": "&quot;No such file&quot; error when using `gets.chomp` in seeds.rb", "body": "<p>Try using <code>STDIN.gets.chomp</code> instead of <code>gets.chomp</code>. </p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/10523536/whats-the-difference-between-gets-chomp-vs-stdin-gets-chomp\">What&#39;s the difference between gets.chomp() vs. STDIN.gets.chomp()?</a> for the explanation.</p>\n"}], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 920, "favorite_count": 0, "accepted_answer_id": 36749850, "answer_count": 1, "score": 2, "last_activity_date": 1461169676, "creation_date": 1461168857, "question_id": 36749573, "link": "https://stackoverflow.com/questions/36749573/no-such-file-error-when-using-gets-chomp-in-seeds-rb", "title": "&quot;No such file&quot; error when using `gets.chomp` in seeds.rb", "body": "<p>I wanted my seeds.rb file to have two paths based on some user input. For the sake of simplicity in this question I've stripped it down to just these two lines:</p>\n\n<pre><code>print \"&gt; \"\nres = gets.chomp\n</code></pre>\n\n<p>When I run rake db:seed, the following exception is raised:</p>\n\n<pre><code>\u25b6 rake db:seed\n&gt; rake aborted!\nErrno::ENOENT: No such file or directory @ rb_sysopen - db:seed\n/home/me/work/my_app/db/seeds.rb:5:in `gets'\n/home/me/work/my_app/db/seeds.rb:5:in `gets'\n/home/me/work/my_app/db/seeds.rb:5:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>Anyone know why this is happening, i.e. why gets.chomp in this context is causing the program to try to open a file named db:seed?</p>\n"}, {"tags": ["ruby", "regex", "string", "iteration"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1461176534, "last_edit_date": 1461176534, "creation_date": 1461170213, "answer_id": 36750015, "question_id": 36748407, "link": "https://stackoverflow.com/questions/36748407/is-there-a-way-to-access-the-last-match-information-while-iterating-with-string/36750015#36750015", "title": "Is there a way to access the last match information while iterating with `String#split`?", "body": "<p>I came up with an idea of iterating over the non-matching part and the matching part together per match cycle. This uses <code>scan</code> instead of <code>split</code>, and will fulfill the purpose.</p>\n\n<pre><code>s = \"some string\"\ni = 0\ns.scan(/(some pattern)|(another pattern)|\\z/) do\n  # Do something with the non-matching part\n  ... s[i...$~.begin(0)] ... # This corresponds to the string in between\n  i = $~.end(0)\n  # Do something with the matching part\n  if $1 then ...\n  elsif $2 then ...\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1461174291, "post_id": 36750752, "comment_id": 61083128, "body": "It works, the idea is good, but it is not preferable to use recursive call like this. Perhaps you can do a similar thing using iteration instead."}, {"owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1461174749, "post_id": 36750752, "comment_id": 61083381, "body": "@sawa added iterative version"}], "tags": [], "owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "is_accepted": true, "score": 2, "last_activity_date": 1461174733, "last_edit_date": 1461174733, "creation_date": 1461172416, "answer_id": 36750752, "question_id": 36748407, "link": "https://stackoverflow.com/questions/36748407/is-there-a-way-to-access-the-last-match-information-while-iterating-with-string/36750752#36750752", "title": "Is there a way to access the last match information while iterating with `String#split`?", "body": "<p>If you only process the string one match at a time using <code>match</code> instead of all at once as with <code>scan</code>, you can inject data from <code>pre_match</code> in with your results:</p>\n\n<pre><code>def match_all(s, r)\n  match = s.match(r)\n\n  if match\n    pre_captures = [match.pre_match] + match.captures.map{nil}\n    captures = [nil] + match.captures\n    [pre_captures, captures] + match_all(match.post_match, r)\n  else\n    [[s]]\n  end\nend\n</code></pre>\n\n<p>This code transforms the input string into tuples that represent <code>[unmatched data, first match group, second match group, etc...]</code> and then the data can be iterated as you like:</p>\n\n<pre><code>match_all(\"the match information in the block\", /(at)|(in)/).each do |a, b, c|\n  if a\n    puts \"(pre: #{a})\"\n  elsif b\n    puts \"(1st: #{b})\"\n  elsif c\n    puts \"(2nd: #{c})\"\n  end\nend\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>(pre: the m)\n(1st: at)\n(pre: ch )\n(2nd: in)\n(pre: form)\n(1st: at)\n(pre: ion )\n(2nd: in)\n(pre:  the block)\n</code></pre>\n\n<p>The same function can also be implemented iteratively like so:</p>\n\n<pre><code>def match_all_iter(s, r)\n  s_mut = s\n  all_captures = []\n\n  loop do\n    match = s_mut.match(r)\n\n    break unless match\n\n    pre_captures = [match.pre_match] + match.captures.map{nil}\n    captures = [nil] + match.captures\n    all_captures += [pre_captures, captures]\n\n    s_mut = match.post_match\n  end\n\n  all_captures += [[s_mut]]\nend\n</code></pre>\n"}], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 36750752, "answer_count": 2, "score": 2, "last_activity_date": 1461176534, "creation_date": 1461165784, "last_edit_date": 1461166705, "question_id": 36748407, "link": "https://stackoverflow.com/questions/36748407/is-there-a-way-to-access-the-last-match-information-while-iterating-with-string", "title": "Is there a way to access the last match information while iterating with `String#split`?", "body": "<p>I want to iterate over a string with a regex pattern. I need to iterate over the matches as well as <strong>the non-matches in between them</strong>, and access the match information while iteration.</p>\n\n<p>If I do not need to access the non-matches, then I can do it with <code>String#scan</code>:</p>\n\n<pre><code>\"some string\".scan(/(some pattern)|(another pattern)/) do\n  if $1 then ...\n  elsif $2 then ...\n  end\nend\n</code></pre>\n\n<p>But I need to iterate over the non-matching parts as well, so I probably need to use <code>String#split</code>. But <code>String#split</code> does not take a block, and if I use <code>each</code> after it like:</p>\n\n<pre><code>\"some string\".split(/((some pattern)|(another pattern))/).each do\n  ...\nend\n</code></pre>\n\n<p>then, I cannot access the match information in the block. I want to do something like:</p>\n\n<pre><code>\"some string\".split(/((some pattern)|(another pattern))/) do\n  if $2 then ...\n  elsif $3 then ...\n  else ... # access the non-matching part\n  end\nend\n</code></pre>\n\n<p>Is there a way to access the last match information while iterating with <code>String#split</code>?</p>\n\n<p>I can brute force it by using <code>scan</code> and adding <code>|(.*?)</code> at the end of the regex:</p>\n\n<pre><code>\"some string\".scan(/(some pattern)|(another pattern)|(.*?)/) do\n  if $1 then ...\n  elsif $2 then ...\n  elsif $3 then ...\n  end\nend\n</code></pre>\n\n<p>but using a non-greedy match is very inefficient, and I cannot use it.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "random", "rspec"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1461173327, "post_id": 36747581, "comment_id": 61082501, "body": "<a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> alert! Why should you necessarily use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-zip\" rel=\"nofollow noreferrer\">Enumerable#zip</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1461164475, "post_id": 36747670, "comment_id": 61076492, "body": "that&#39;s it! easy and simple!"}], "tags": [], "owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "is_accepted": true, "score": 3, "last_activity_date": 1461164114, "creation_date": 1461164114, "answer_id": 36747670, "question_id": 36747581, "link": "https://stackoverflow.com/questions/36747581/random-zip-method/36747670#36747670", "title": "Random zip method", "body": "<p>What if you apply <code>shuffle</code> after <code>zip</code>?</p>\n\n<pre><code>['top', 'left', 'z-index'].zip(['5px', '35px', '10']).shuffle.each do |attribute, value|\n  #not the actual code, just an example\n  puts \"#{attribute} is #{value}\"\nend\n</code></pre>\n\n<p>Every time you run this you'll get a different output. Sometimes this:</p>\n\n<pre><code>z-index is 10\nleft is 35px\ntop is 5px\n</code></pre>\n\n<p>And sometimes this:</p>\n\n<pre><code>left is 35px\nz-index is 10\ntop is 5px\n</code></pre>\n\n<p>And sometimes other permutations of those same 3 lines</p>\n"}, {"comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1461164678, "post_id": 36747829, "comment_id": 61076654, "body": "nice! but in this case I needed the answer from @user12341234. I&#39;m sure your answer will be useful on other occasions!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1461164951, "last_edit_date": 1461164951, "creation_date": 1461164527, "answer_id": 36747829, "question_id": 36747581, "link": "https://stackoverflow.com/questions/36747581/random-zip-method/36747829#36747829", "title": "Random zip method", "body": "<p>Whether you need just a random shuffle, please refer to the answer provided by @user12341234</p>\n\n<p>Whether you want to test <em>all</em> permutations, use this:</p>\n\n<pre><code>['top', 'left', 'z-index'].zip(['5px', '35px', '10'])\n                          .permutation(3)\n                          .each do |properties|\n  properties.each do |attribute, value|\n    #not the actual code, just an example\n    puts \"#{attribute} is #{value}\"\n  end\nend\n</code></pre>\n\n<p>More info on <a href=\"http://ruby-doc.org/core-2.1.2/Array.html#method-i-permutation\" rel=\"nofollow\"><code>Array#permutation</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 1, "creation_date": 1461238060, "post_id": 36750960, "comment_id": 61113827, "body": "this should be repeated three times right (as I want the three lines to be printed). but idx could be three times &quot;2&quot;, so <code>z-index: 10</code> will be printed 3 times. or am I wrong?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 1, "creation_date": 1461253399, "post_id": 36750960, "comment_id": 61125823, "body": "You are right and thank you for pointing it out. I understood the question, but by the time I wrote my answer my little grey cells had tricked me into thinking it was a different question. I&#39;ve fixed my answer, retaining the essence of my original answer."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1461253077, "last_edit_date": 1461253077, "creation_date": 1461173093, "answer_id": 36750960, "question_id": 36747581, "link": "https://stackoverflow.com/questions/36747581/random-zip-method/36750960#36750960", "title": "Random zip method", "body": "<p>Why use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-zip\" rel=\"nofollow\">Enumerable#zip</a> to create an intermediate array? If</p>\n\n<pre><code>a = ['top', 'left', 'z-index']\nb = ['5px', '35px', '10']\n</code></pre>\n\n<p>it is simpler and more efficient to write:</p>\n\n<pre><code>a.each_index.to_a.shuffle.each { |idx| puts \"%s is %s\" % [a[idx], b[idx]] }\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>z-index is 10\nleft is 35px \ntop is 5px\n</code></pre>\n\n<p>Run it again and it may print</p>\n\n<pre><code>top is 5px\nz-index is 10\nleft is 35px \n</code></pre>\n"}], "owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 36747670, "answer_count": 3, "score": 0, "last_activity_date": 1461253077, "creation_date": 1461163917, "question_id": 36747581, "link": "https://stackoverflow.com/questions/36747581/random-zip-method", "title": "Random zip method", "body": "<p>Is there a way to use the <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-zip\" rel=\"nofollow\"><code>zip</code> method</a> in a random way?<br><br>\nIf this is my code</p>\n\n<pre><code>['top', 'left', 'z-index'].zip(['5px', '35px', '10']).each do |attribute, value|\n  #not the actual code, just an example\n  puts \"#{attribute} is #{value}\"\nend\n</code></pre>\n\n<p>It will print always in the same order:</p>\n\n<blockquote>\n  <p>top is 5px<br>\n  left is 35px<br>\n  z-index is 10</p>\n</blockquote>\n\n<p>If I <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-shuffle\" rel=\"nofollow\"><code>shuffle</code></a> the arrays, then the elements will not match, so maybe it will print</p>\n\n<blockquote>\n  <p>left is 5px</p>\n</blockquote>\n\n<p>and so on...</p>\n\n<p><strong>What I'd like to achieve is this, as I am using it in my <code>RSpec</code> tests:</strong></p>\n\n<p><strong>FIRST RUN</strong></p>\n\n<blockquote>\n  <p>top is 5px<br>\n  left is 35px<br>\n  z-index is 10</p>\n</blockquote>\n\n<p><strong>SECOND RUN</strong></p>\n\n<blockquote>\n  <p>left is 35px<br>\n  top is 5px<br>\n  z-index is 10</p>\n</blockquote>\n\n<p>etc.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap"], "answers": [{"tags": [], "owner": {"reputation": 2117, "user_id": 3709300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oqNTQ.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/3709300/justin"}, "is_accepted": true, "score": 0, "last_activity_date": 1461166365, "creation_date": 1461166365, "answer_id": 36748614, "question_id": 36747428, "link": "https://stackoverflow.com/questions/36747428/minicolors-rails-gem-not-allowing-options-with-input-field/36748614#36748614", "title": "Minicolors rails gem not allowing options with input_field", "body": "<p>The method signature for <code>f.input_field</code> is slightly different from <code>f.input</code>, which doesn't really seem to be documented anywhere except the <a href=\"http://www.rubydoc.info/github/plataformatec/simple_form/master/SimpleForm/FormBuilder:input_field\" rel=\"nofollow\">RDoc</a> sort of hints at it</p>\n\n<blockquote>\n  <p>All the given options are sent as :input_html.</p>\n</blockquote>\n\n<p>So the <code>:input_html</code> isn't needed and your <code>f.input_field</code> call should look like this</p>\n\n<pre><code>&lt;%= f.input_field :title, class: \"form-control colour\", as: :minicolors, data: {\n      minicolors: {theme: :bootstrap, position: :right}} %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1154, "user_id": 1154618, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2f40d6ab19fe78fc49900103c4b3d086?s=128&d=identicon&r=PG", "display_name": "Blease", "link": "https://stackoverflow.com/users/1154618/blease"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 36748614, "answer_count": 1, "score": 0, "last_activity_date": 1461166365, "creation_date": 1461163569, "question_id": 36747428, "link": "https://stackoverflow.com/questions/36747428/minicolors-rails-gem-not-allowing-options-with-input-field", "title": "Minicolors rails gem not allowing options with input_field", "body": "<p>I'm using the minicolors ruby gem but it doesn't set the options when I use input_field instead of input, which I need to use.</p>\n\n<p>I have <code>f.input_field :colour, class: \"form-control colour\", as: :minicolors, input_html: {data: {minicolors: {theme: :bootstrap, position: :right}}}</code> but this is the html it produces..</p>\n\n<pre><code>&lt;div class=\"minicolors ...\"&gt;\n  &lt;input class=\"form-control minicolors-input ...\" input_html=\"{:data=&gt;{:minicolors=&gt;{:theme=&gt;:bootstrap, :position=&gt;:right}}}\" ...&gt;\n  ...\n&lt;/div&gt;\n</code></pre>\n\n<p>So something is happening, but not what I would expect or what I want.\nThe options do work however when I use <code>f.input</code> but I do not want or need the labels and extras that come with using that instead of <code>f.input_field</code></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1461163219, "post_id": 36747258, "comment_id": 61075441, "body": "Lines 12 to 22 is not a balanced code chunk. 22 closes the method definition."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6161921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3d2dc9101ff1e8bc301efb9325f3ef2?s=128&d=identicon&r=PG", "display_name": "Metro Diji", "link": "https://stackoverflow.com/users/6161921/metro-diji"}, "edited": false, "score": 1, "creation_date": 1461585689, "post_id": 36747619, "comment_id": 61249759, "body": "Sorry for the late reply, thank you for your explanation.  I hope it helps other, too."}], "tags": [], "owner": {"reputation": 3795, "user_id": 4926817, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0lH0y.png?s=128&g=1", "display_name": "Noam Hacker", "link": "https://stackoverflow.com/users/4926817/noam-hacker"}, "is_accepted": false, "score": 1, "last_activity_date": 1461164440, "last_edit_date": 1461164440, "creation_date": 1461163992, "answer_id": 36747619, "question_id": 36747258, "link": "https://stackoverflow.com/questions/36747258/ruby-koans-step-6/36747619#36747619", "title": "Ruby Koans Step 6", "body": "<p>The <code>begin</code> and <code>rescue</code> statements are a way of implementing <a href=\"http://www.tutorialspoint.com/ruby/ruby_exceptions.htm\" rel=\"nofollow\">exception handling</a> in ruby.</p>\n\n<blockquote>\n  <p>Everything from <code>begin</code> to <code>rescue</code> is protected. If an exception occurs during the execution of this block of code, control is passed to the block between <code>rescue</code> and <code>end</code>.</p>\n</blockquote>\n\n<p>In other words, the code is making sure your program won't break when you call a method that doesn't exist for <a href=\"http://ruby-doc.org/core-1.9.3/NilClass.html\" rel=\"nofollow\"><code>nil</code></a>. </p>\n\n<p><code>nil.some_method_nil_doesnt_know_about</code> is causing an exception (the exception <em>should</em> be <a href=\"http://ruby-doc.org/core-2.2.0/NoMethodError.html\" rel=\"nofollow\"><code>NoMethodError</code></a>), therefore the code in the <code>rescue</code> block will be executed, instead of the program crashing.</p>\n\n<p><code>assert_equal NoMethodError, ex.class</code> is making sure the exception indeed was <code>NoMethodError</code>, and the next line is making sure the error messages match.</p>\n"}], "owner": {"reputation": 19, "user_id": 6161921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3d2dc9101ff1e8bc301efb9325f3ef2?s=128&d=identicon&r=PG", "display_name": "Metro Diji", "link": "https://stackoverflow.com/users/6161921/metro-diji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461169629, "creation_date": 1461163150, "last_edit_date": 1461169629, "question_id": 36747258, "link": "https://stackoverflow.com/questions/36747258/ruby-koans-step-6", "title": "Ruby Koans Step 6", "body": "<p>Can someone explain what is happening between the asterisks?</p>\n\n<pre><code>require File.expand_path(File.dirname(__FILE__) + '/edgecase')\n\nclass AboutNil &lt; EdgeCase::Koan\n  def test_nil_is_an_object\n    assert_equal true, nil.is_a?(Object), \"Unlike NULL in other languages\"\n  end\n\n  def test_you_dont_get_null_pointer_errors_when_calling_methods_on_nil\n    # What happens when you call a method that doesn't exist.  The\n    # following begin/rescue/end code block captures the exception and\n    # make some assertions about it.\n    # ****************************************\n\n    begin\n      nil.some_method_nil_doesnt_know_about\n    rescue Exception =&gt; ex\n      # What exception has been caught?\n      assert_equal NoMethodError, ex.class\n\n      # What message was attached to the exception?\n      # (HINT: replace __ with part of the error message.)\n      assert_match(/undefined method `some_method_nil_doesnt_know_about' for nil:NilClass/, ex.message)\n\n    # ****************************************\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "nagios", "icinga"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1461163721, "post_id": 36747229, "comment_id": 61075854, "body": "Did you do <code>sudo gem install splunk-sdk-ruby yor_gem_name_here</code>?"}, {"owner": {"reputation": 922, "user_id": 2152623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7852ad15ff5af01778c90e800a0e0c7e?s=128&d=identicon&r=PG", "display_name": "cashman04", "link": "https://stackoverflow.com/users/2152623/cashman04"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1461164304, "post_id": 36747229, "comment_id": 61076331, "body": "I was running as the root user when I installed it"}], "answers": [{"tags": [], "owner": {"reputation": 1463, "user_id": 1776255, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/caf8d27b5a86675785da57a67fe450b6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1776255/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1461175081, "creation_date": 1461175081, "answer_id": 36751627, "question_id": 36747229, "link": "https://stackoverflow.com/questions/36747229/ruby-script-cant-find-gem-when-running-under-another-user/36751627#36751627", "title": "Ruby script can&#39;t find gem when running under another user", "body": "<p>The reason may be <code>root</code> permissions for the different users in your system.</p>\n"}], "owner": {"reputation": 922, "user_id": 2152623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7852ad15ff5af01778c90e800a0e0c7e?s=128&d=identicon&r=PG", "display_name": "cashman04", "link": "https://stackoverflow.com/users/2152623/cashman04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461175081, "creation_date": 1461163075, "question_id": 36747229, "link": "https://stackoverflow.com/questions/36747229/ruby-script-cant-find-gem-when-running-under-another-user", "title": "Ruby script can&#39;t find gem when running under another user", "body": "<p>I have written a icinga2(nagios) check in ruby.  It uses the splunk-sdk-ruby gem and works perfectly when I run it either as my user or as root.  But when I add it in to icinga2 to run, I get a gem load error:</p>\n\n<pre><code>/usr/local/rvm/rubies/ruby- .2.0/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- splunk-sdk-ruby (LoadError)\n</code></pre>\n\n<p>I already require rubygems above the gem I need in my script.\nIt looks like icinga2 is running under the icinga user, but I can't do a su - to that user to install the gem cause it says: This account is currently not available.</p>\n\n<p>What am I missing here to make the gem available to all users?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongoid", "observers"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1461164269, "post_id": 36747211, "comment_id": 61076296, "body": "Are you actually using any observers in your app? If not you can just remove the line. Observers where one of those things that where hyped for a short time but turned out to be a not so great idea and where removed in Rails 4. Otherwise you will have to find an alternatives to whatever services the observers are providing or a use gem which provides hooks for Rails 3 style observers."}, {"owner": {"reputation": 461, "user_id": 4546271, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/e9314cc5a731b3a75a83fbe99b41f1ab?s=128&d=identicon&r=PG&f=1", "display_name": "alka aswal", "link": "https://stackoverflow.com/users/4546271/alka-aswal"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1461164928, "post_id": 36747211, "comment_id": 61076868, "body": "@max ..if i am removing this line , I am getting this error application.rb:47:in <code>block in &lt;class:Application&gt;&#39;: undefined method </code>&lt;&lt;&#39; for nil:NilClass (NoMethodError)"}, {"owner": {"reputation": 461, "user_id": 4546271, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/e9314cc5a731b3a75a83fbe99b41f1ab?s=128&d=identicon&r=PG&f=1", "display_name": "alka aswal", "link": "https://stackoverflow.com/users/4546271/alka-aswal"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1461165620, "post_id": 36747211, "comment_id": 61077390, "body": "@max at line 47 i have this code snippet:                                               Dir[&quot;#{config.root}/config/routes/*&quot;].each do |route_file|         config.paths[&#39;config/routes&#39;] &lt;&lt; route_file     end"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1461165973, "post_id": 36747211, "comment_id": 61077667, "body": "Thats totally unrelated to observers, its a hacky way to load the routes from a bunch of files in <code>&#47;config&#47;routes</code>. It will not work in Rails 4. I would suggest you merge the routes to a single file. <a href=\"http://stackoverflow.com/questions/18844813/rails-4-split-routes-rb-into-multiple-smaller-files\" title=\"rails 4 split routes rb into multiple smaller files\">stackoverflow.com/questions/18844813/&hellip;</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1461166013, "post_id": 36747211, "comment_id": 61077702, "body": "Is this a legacy application that you have taken over and are trying to update?"}], "answers": [{"tags": [], "owner": {"reputation": 3022, "user_id": 336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c144b7e260029f00b1efb08fb29bb023?s=128&d=identicon&r=PG", "display_name": "Thomas R. Koll", "link": "https://stackoverflow.com/users/336392/thomas-r-koll"}, "is_accepted": false, "score": 0, "last_activity_date": 1461680472, "creation_date": 1461680472, "answer_id": 36867729, "question_id": 36747211, "link": "https://stackoverflow.com/questions/36747211/how-to-handle-observers-in-rails-4-0-0/36867729#36867729", "title": "how to handle observers in rails 4.0.0?", "body": "<p>In your <code>Gemfile</code> add the following:</p>\n\n<pre><code>gem 'rails-observers'\ngem 'mongoid-observers'\n</code></pre>\n"}], "owner": {"reputation": 461, "user_id": 4546271, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/e9314cc5a731b3a75a83fbe99b41f1ab?s=128&d=identicon&r=PG&f=1", "display_name": "alka aswal", "link": "https://stackoverflow.com/users/4546271/alka-aswal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461680472, "creation_date": 1461163017, "question_id": 36747211, "link": "https://stackoverflow.com/questions/36747211/how-to-handle-observers-in-rails-4-0-0", "title": "how to handle observers in rails 4.0.0?", "body": "<p>In my application.rb , I have this code snippet:</p>\n\n<pre><code>  _observers  = Dir[\"#{config.root}/app/models/observers/*\"].map{ |path| \"observers/#{Pathname.new(path).basename.to_s.split(\".\").first}\" }\nconfig.mongoid.observers =  _observers\n</code></pre>\n\n<p>I updated rails version from 3.2.22 to 4.0.0, </p>\n\n<p>Now I am getting this error:</p>\n\n<pre><code>undefined method `observers=' for Mongoid::Config:Module (NoMethodError)\n</code></pre>\n\n<p>How to handle this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1461162937, "post_id": 36747066, "comment_id": 61075239, "body": "run <code>bundle install</code>."}, {"owner": {"reputation": 1407, "user_id": 889074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YwYtO.jpg?s=128&g=1", "display_name": "kalelc", "link": "https://stackoverflow.com/users/889074/kalelc"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1461163078, "post_id": 36747066, "comment_id": 61075341, "body": "Already, but still the same"}], "answers": [{"comments": [{"owner": {"reputation": 1407, "user_id": 889074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YwYtO.jpg?s=128&g=1", "display_name": "kalelc", "link": "https://stackoverflow.com/users/889074/kalelc"}, "edited": false, "score": 0, "creation_date": 1461177446, "post_id": 36748355, "comment_id": 61085054, "body": "Perfect!! I made the migration to zip gem. Thanks!!"}], "tags": [], "owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "is_accepted": true, "score": 1, "last_activity_date": 1461165684, "creation_date": 1461165684, "answer_id": 36748355, "question_id": 36747066, "link": "https://stackoverflow.com/questions/36747066/rails-typeerror-nulldecompressor-is-not-a-class/36748355#36748355", "title": "Rails: TypeError: NullDecompressor is not a class", "body": "<p>You probably need to use an older version of the <a href=\"https://github.com/rubyzip/rubyzip\" rel=\"nofollow\"><code>rubyzip</code> gem</a>. In 2013, more precisely in <a href=\"https://github.com/rubyzip/rubyzip/commit/73d9e1c8a082b14db3aaa6e80dc896223514f6c4\" rel=\"nofollow\">this commit</a>, <strong>the <code>NullDecompressor</code> has been rewritten from a class to a module</strong>. Now, some of your other code expects it to be a class but finds a module, that's why you get the <code>TypeError</code>.</p>\n\n<p>So it seems that using the <a href=\"https://github.com/rubyzip/rubyzip/tree/v1.0.0\" rel=\"nofollow\"><code>rubyzip-1.0.0</code> version</a> might fix your issue.</p>\n\n<p>BTW, your error points to <code>zip-2.0.2</code> which seems to be <a href=\"http://www.rubydoc.info/gems/zip/2.0.2/Zip/NullDecompressor\" rel=\"nofollow\">an even older gem</a> that have been later converted to the <code>rubyzip-1.0.0</code> gem.</p>\n"}], "owner": {"reputation": 1407, "user_id": 889074, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YwYtO.jpg?s=128&g=1", "display_name": "kalelc", "link": "https://stackoverflow.com/users/889074/kalelc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 36748355, "answer_count": 1, "score": 0, "last_activity_date": 1461165684, "creation_date": 1461162686, "last_edit_date": 1461162899, "question_id": 36747066, "link": "https://stackoverflow.com/questions/36747066/rails-typeerror-nulldecompressor-is-not-a-class", "title": "Rails: TypeError: NullDecompressor is not a class", "body": "<p>When I try execute <code>bundle exec puma -e production -b tcp://127.0.0.1:3000</code> or <code>bundle exec rspec spec/</code> i get message:</p>\n\n<blockquote>\n  <p>/home/vagrant/.rbenv/versions/2.1.4/lib/ruby/gems/2.1.0/gems/zip-2.0.2/lib/zip/zip.rb:274:in : NullDecompressor is not a class (TypeError)</p>\n</blockquote>\n\n<p>I have Rails 4.1.14.1 and Ruby 2.1.4 </p>\n"}, {"tags": ["ruby", "extension-methods"], "answers": [{"comments": [{"owner": {"reputation": 5822, "user_id": 998495, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9ab68854cd596cfb44679b47ff05206d?s=128&d=identicon&r=PG", "display_name": "emery", "link": "https://stackoverflow.com/users/998495/emery"}, "edited": false, "score": 0, "creation_date": 1461249444, "post_id": 36747223, "comment_id": 61122793, "body": "Ok does this mean that every class I want to be able to access in GemClassOne via GemClassOneExtension needs to be explicitly extended in a new GemClassOneExtension class?"}, {"owner": {"reputation": 5822, "user_id": 998495, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9ab68854cd596cfb44679b47ff05206d?s=128&d=identicon&r=PG", "display_name": "emery", "link": "https://stackoverflow.com/users/998495/emery"}, "edited": false, "score": 0, "creation_date": 1461249544, "post_id": 36747223, "comment_id": 61122864, "body": "Is there a way to indicate that a specific extended class or method should just copy the original class or method without changing behavior?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 5822, "user_id": 998495, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9ab68854cd596cfb44679b47ff05206d?s=128&d=identicon&r=PG", "display_name": "emery", "link": "https://stackoverflow.com/users/998495/emery"}, "edited": false, "score": 1, "creation_date": 1461251988, "post_id": 36747223, "comment_id": 61124713, "body": "You don&#39;t need to indicate that the child inherits a method from the parent. That&#39;s the very nature of inheritance. You can just call <code>GemClassOneExtension.method1</code> and <code>GemClassOneExtension#method2</code> - you do not need to declare them in <code>GemClassOneExtension</code> unless you want to override them."}, {"owner": {"reputation": 5822, "user_id": 998495, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9ab68854cd596cfb44679b47ff05206d?s=128&d=identicon&r=PG", "display_name": "emery", "link": "https://stackoverflow.com/users/998495/emery"}, "edited": false, "score": 0, "creation_date": 1461252621, "post_id": 36747223, "comment_id": 61125219, "body": "But I would need to declare each individual class  in GemClassOneExtension if I want to use those in the namespace of the new module, correct?  i.e. class GemClassNothingNewHere &lt; ARubyGem::GemClassNothingNewHere ; end"}, {"owner": {"reputation": 5822, "user_id": 998495, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9ab68854cd596cfb44679b47ff05206d?s=128&d=identicon&r=PG", "display_name": "emery", "link": "https://stackoverflow.com/users/998495/emery"}, "edited": false, "score": 0, "creation_date": 1461253117, "post_id": 36747223, "comment_id": 61125613, "body": "Thanks again jvillian: also... do I need to give the extended (or unchanged) classes a new name?  Or can I extend class ARubyGem::KeepMyName into the new module like this: class KeepMyName &lt; ARubyGem::KeepMyName"}, {"owner": {"reputation": 5822, "user_id": 998495, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9ab68854cd596cfb44679b47ff05206d?s=128&d=identicon&r=PG", "display_name": "emery", "link": "https://stackoverflow.com/users/998495/emery"}, "edited": false, "score": 0, "creation_date": 1461253386, "post_id": 36747223, "comment_id": 61125810, "body": "And if I do keep the same name, does that work for unaltered (empty) extended classes, as well as ones I want to use to re-write methods?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 5822, "user_id": 998495, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9ab68854cd596cfb44679b47ff05206d?s=128&d=identicon&r=PG", "display_name": "emery", "link": "https://stackoverflow.com/users/998495/emery"}, "edited": false, "score": 1, "creation_date": 1461254396, "post_id": 36747223, "comment_id": 61126537, "body": "You can keep the class name the same (which is, in part, the point of namespaces). And yes, it works for unaltered classes."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1461163060, "creation_date": 1461163060, "answer_id": 36747223, "question_id": 36747016, "link": "https://stackoverflow.com/questions/36747016/extending-modules-from-a-gem-instead-of-monkey-patching/36747223#36747223", "title": "Extending Modules from a gem instead of monkey patching", "body": "<p>Seems like you would need to go with:</p>\n\n<pre><code>  module ARubyGemExtension\n    class GemClassOneExtension &lt; ARubyGem::GemClassOne\n      def method_to_override\n        # new code here\n      end\n    end\n  end\n</code></pre>\n\n<p>(Remember to namespace <code>GemClassOne</code>.)</p>\n\n<p>I don't know anything about the gem you're using, but unless it's specifically set up for providing methods through <code>include</code>, I think you may not get what you're after.</p>\n"}], "owner": {"reputation": 5822, "user_id": 998495, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/9ab68854cd596cfb44679b47ff05206d?s=128&d=identicon&r=PG", "display_name": "emery", "link": "https://stackoverflow.com/users/998495/emery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 36747223, "answer_count": 1, "score": 0, "last_activity_date": 1461252920, "creation_date": 1461162586, "last_edit_date": 1461252920, "question_id": 36747016, "link": "https://stackoverflow.com/questions/36747016/extending-modules-from-a-gem-instead-of-monkey-patching", "title": "Extending Modules from a gem instead of monkey patching", "body": "<p>Assuming that \"clean\" Ruby monkey patching isn't an option, and all gem extension methods need to be completely contained within their own namespace, and given a structure like</p>\n\n<pre><code>module ARubyGem\n  class GemClassOne\n    def method1\n      # instance method to be available when calling extended module \n    end\n    def self.method2\n      # singleton method to also be available in extended module\n    end\n  end\nend\n</code></pre>\n\n<p>Then which of these is the better way to extend a gem if the original gem code has some singleton methods that begin with \"self\"?</p>\n\n<pre><code>module ARubyGemExtension\n  class GemClassOneExtension &lt; ARubyGem::GemClassOne\n    def method_to_override\n      # new code here\n    end\n  end\nend\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>module ARubyGemExtension\n  include ARubyGem \n  class GemClassOneExtension\n    def method_to_override\n      # new code here\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "debugging", "irb", "byebug"], "answers": [{"comments": [{"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 1, "creation_date": 1461221217, "post_id": 36747948, "comment_id": 61101875, "body": "As I wrote, sometimes you can&#39;t reproduce bugs in your tests or on your machine, sometimes you HAVE TO debug on your production system. I know that this is a bad idea, but with no choices left, I have to. We have tests, a dev and a staging env, but when the bug is thrown on production, this envs are not very helpful if you can&#39;t reproduce it on them. So, debugging on production was the last option"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1461164790, "creation_date": 1461164790, "answer_id": 36747948, "question_id": 36747003, "link": "https://stackoverflow.com/questions/36747003/debug-into-method-from-production-irb/36747948#36747948", "title": "Debug into method from production irb", "body": "<p>Debugging in your production server is a horrible idea. Coming from the PHP world we used to do it all time and things would blow up spectacularly and only if you where lucky was there a database backup.</p>\n\n<p>Instead what you can do is setup a staging server - this would be a server which runs on the exact same platform with the exact same settings. You can even use cron together with <code>pg_backups</code> to mirror the production database daily so that you can try new features and even show them to collaborators. And if it blows up then its not the end of the world - and there is no risk of losing end user data.</p>\n\n<p>But you might to consider that you actually should be writing tests instead of using breakpoints or logs. Write a test that replicates the issue and specifies the desired behavior. You can then play around with the code and you know from the test state if what your are doing is working.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5577450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y5ZLI.jpg?s=128&g=1", "display_name": "Matt Eldridge", "link": "https://stackoverflow.com/users/5577450/matt-eldridge"}, "is_accepted": false, "score": -1, "last_activity_date": 1461166227, "creation_date": 1461166227, "answer_id": 36748567, "question_id": 36747003, "link": "https://stackoverflow.com/questions/36747003/debug-into-method-from-production-irb/36748567#36748567", "title": "Debug into method from production irb", "body": "<p>You can use pry-debugger (through ruby 1.9.3) or pry-byebug (Ruby >= 2).</p>\n\n<p>Both of these allow you to set breakpoints allowing you to interactively step through your code as it runs, inspecting variable values, method return values, etc.</p>\n\n<p>How you'll manage this with production data I'm not exactly sure, but this will allow you to debug a particular method.</p>\n"}, {"comments": [{"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1461221293, "post_id": 36758458, "comment_id": 61101924, "body": "This is exactly what I would like to avoid. Imagine a method that is called multiple thousands of times per second, and you write some <code>puts</code> statements in it"}, {"owner": {"reputation": 165, "user_id": 4608351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ca15ba43fede05475e652e101c3a72?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Cindy", "link": "https://stackoverflow.com/users/4608351/nguyen-cindy"}, "reply_to_user": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 0, "creation_date": 1461225324, "post_id": 36758458, "comment_id": 61104695, "body": "This is art of debug, you should not using <code>puts</code> without thinking Just <code>puts</code> in this place you think it have problem."}], "tags": [], "owner": {"reputation": 165, "user_id": 4608351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ca15ba43fede05475e652e101c3a72?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Cindy", "link": "https://stackoverflow.com/users/4608351/nguyen-cindy"}, "is_accepted": false, "score": -3, "last_activity_date": 1461205273, "creation_date": 1461205273, "answer_id": 36758458, "question_id": 36747003, "link": "https://stackoverflow.com/questions/36747003/debug-into-method-from-production-irb/36758458#36758458", "title": "Debug into method from production irb", "body": "<p>You can change code on your production to puts value you want to check in <code>#do_something</code> method and run <code>irb</code> to check it. Because we do not restart production server so do not worry about your change.</p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1461239633, "post_id": 36762059, "comment_id": 61115017, "body": "Sorry if I sound like an a-hole but the most likely explanation here is that you have forgot to run a migration in production. If you find that you have a hard time remembering to run migrations (we all do) you can use a post commit hook which runs <code>rake db:status</code> as a reminder."}, {"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1461239970, "post_id": 36762059, "comment_id": 61115258, "body": "The error was just for demonstration purpose, it&#39;s not a real error. The question was about how the get into that method with a debugger from an irb / pry / rails console context"}, {"owner": {"reputation": 474, "user_id": 145501, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dfb5975ecda818fc5a0848a73e4736ae?s=128&d=identicon&r=PG", "display_name": "Kazim Zaidi", "link": "https://stackoverflow.com/users/145501/kazim-zaidi"}, "edited": false, "score": 0, "creation_date": 1489675220, "post_id": 36762059, "comment_id": 72783361, "body": "Very clever, love it!"}], "tags": [], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "is_accepted": true, "score": 8, "last_activity_date": 1461222224, "creation_date": 1461222224, "answer_id": 36762059, "question_id": 36747003, "link": "https://stackoverflow.com/questions/36747003/debug-into-method-from-production-irb/36762059#36762059", "title": "Debug into method from production irb", "body": "<p>After trying around and more googling, I think I found a solution that works for me.</p>\n\n<ol>\n<li>Log in to your rails console / irb / pry session</li>\n<li>Setup your case (e.g. load your models, require dependencies...), so that you can execute the code you want to debug in one line</li>\n<li><code>require 'byebug'</code> (or <code>require 'debugger'</code> for older ruby versions)</li>\n<li>Now the interesting part: Put a debugger statement in front of the line you want to debug like this <code>binding.pry; user.do_something</code> or <code>debugger; user.do_something</code></li>\n<li>Now you are in your debugger. Maybe you have to jump to the next line with <code>next</code> (or just <code>n</code> if you have shortcuts enabled) to step into your method.</li>\n</ol>\n\n<p>Here is a complete example from our production system:</p>\n\n<pre><code>[1] pry(main)&gt; require 'byebug'\n=&gt; true\n[2] pry(main)&gt; user = User.find(2)\n  User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 2 LIMIT 1\n=&gt; #&lt;User id: 2, name=\"XXX XXX\"&gt;\n[3] pry(main)&gt; user.full_name\nNameError: undefined local variable or method address for #&lt;User:0x0055b168663590&gt;\n\n[4] pry(main)&gt; binding.pry; user.full_name\n\n[68, 73] in /usr/src/app/app/models/user.rb\n   68:   end\n   69: \n   70:   def full_name\n=&gt; 71:     \"#{address.firstname} #{address.last_name}\"\n   72:   end\n   73: end\n(byebug) \n</code></pre>\n"}], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2706, "favorite_count": 1, "accepted_answer_id": 36762059, "answer_count": 4, "score": 4, "last_activity_date": 1461222224, "creation_date": 1461162556, "question_id": 36747003, "link": "https://stackoverflow.com/questions/36747003/debug-into-method-from-production-irb", "title": "Debug into method from production irb", "body": "<p>When I look for a problem, for example with a specific ActiveRecord object, I often find myself doing the following on my production system:</p>\n\n<pre><code># RAILS_ENV=production bundle exec\n\nirb(main)&gt; article = Article.find(123)\n=&gt; #&lt;Article id: 123, title: \"Foobar\"&gt;\nirb(main)&gt; article.do_something(3)\nNoMethodError: undefined method `id' for nil:NilClass\n</code></pre>\n\n<p>Sometimes I can't reproduce, why the line <code>article.do_something(3)</code> throws an error, so I want to debug it directly on my server, in production mode.</p>\n\n<p>The problem now is: How do I step into the method <code>#do_something</code> with the argument <code>3</code> on the object / instance <code>article</code>?</p>\n\n<p>Of course, one could set a breakpoint in that method, reload production and let all their customers wait on that breakpoint till I'm done debugging... But that wouldn't be the best idea.</p>\n\n<blockquote>\n  <p>So, is there a way to debug into a method of a specific instance from a running irb / pry session? (both would be ok)</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "scope"], "comments": [{"owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "reply_to_user": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "edited": false, "score": 0, "creation_date": 1461162349, "post_id": 36746719, "comment_id": 61074732, "body": "Dep is the players database, Figurinha get the name, avatar and others infos from Dep database."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1461163386, "post_id": 36747176, "comment_id": 61075582, "body": "We are almost there. The user can only have one figurinha of the same dep with colada=true."}, {"owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "reply_to_user": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1461163462, "post_id": 36747176, "comment_id": 61075659, "body": "ok, then you need to remove <code>colada=true</code> from the where statement"}, {"owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "reply_to_user": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1461164595, "post_id": 36747176, "comment_id": 61076589, "body": "@ViniciusFontoura let&#39;s see if that work with you <code>having(&quot;bool_or(colada) =true&quot;)</code> we get all colada from the groups records and check if oring them will give us true that mean 1 of them is true which mean 1 of them is colada, and when you render your records skip the one with true(the main colada)"}, {"owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1461165101, "post_id": 36747176, "comment_id": 61077000, "body": "I&#39;m getting this error now: <code>SQLite3::SQLException: no such column: true: SELECT &quot;figurinhas&quot;.* FROM &quot;figurinhas&quot; WHERE &quot;figurinhas&quot;.&quot;user_id&quot; = ? GROUP BY &quot;figurinhas&quot;.&quot;dep_id&quot; HAVING count(*) &gt; 1 AND bool_or(colada) =true</code>"}, {"owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "reply_to_user": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1461165309, "post_id": 36747176, "comment_id": 61077158, "body": "you are using sqllite then true and false is 1 and 0 replace true with 1"}, {"owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1461165422, "post_id": 36747176, "comment_id": 61077237, "body": "Im using SQLite in development, i think SQLite dont have bool_or function. I will change to postgre later and I will update you later on. Thank you"}], "tags": [], "owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "is_accepted": false, "score": 1, "last_activity_date": 1461164526, "last_edit_date": 1461164526, "creation_date": 1461162944, "answer_id": 36747176, "question_id": 36746719, "link": "https://stackoverflow.com/questions/36746719/ruby-on-rails-scope/36747176#36747176", "title": "Ruby on Rails Scope", "body": "<p>Replace </p>\n\n<pre><code>def repetida\n  coladas = self.user.figurinhas.where(colada: true)\n  colodas.map{|a| a.dep}.include?(self.dep)\nend\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>scope :repetida, -&gt;(user_id) {where(user_id: user_id).group(:dep_id).having(\"count(*) &gt; 1\").having(\"bool_or(colada) =true\") }\n</code></pre>\n\n<p>and call should be:</p>\n\n<pre><code>Figurinha.repetida(User.first.id)\n</code></pre>\n\n<p>which is trying to select all <code>Figurinha</code> which belongs to <code>user_id</code> and then grouping them with <code>dep_id</code> so we now have groups of repeated <code>Figurinha</code> but we only need if the count of the group is > 1 to consider a duplicate.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1461166362, "post_id": 36748221, "comment_id": 61077963, "body": "Works perfectly. Can you explain to me the use of pluck method?"}, {"owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "reply_to_user": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 1, "creation_date": 1461166610, "post_id": 36748221, "comment_id": 61078132, "body": "you can read about pluck here <a href=\"http://apidock.com/rails/ActiveRecord/Calculations/pluck\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/Calculations/pluck</a> it returns an array of attribute values. in your case the attribute is <code>dep_id</code>"}], "tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": true, "score": 1, "last_activity_date": 1461165715, "last_edit_date": 1461165715, "creation_date": 1461165408, "answer_id": 36748221, "question_id": 36746719, "link": "https://stackoverflow.com/questions/36746719/ruby-on-rails-scope/36748221#36748221", "title": "Ruby on Rails Scope", "body": "<p>If <code>figurinha</code> can only have one true <code>colada</code> per user you can try this :</p>\n\n<pre><code>scope :repetida, -&gt;(user_id) { uniq.where(user_id: user_id, colada: false, dep_id: Figurinha.where(user_id: user_id, colada: true).pluck(:dep_id)) }\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 1, "accepted_answer_id": 36748221, "answer_count": 2, "score": 0, "last_activity_date": 1461187511, "creation_date": 1461161932, "last_edit_date": 1461187511, "question_id": 36746719, "link": "https://stackoverflow.com/questions/36746719/ruby-on-rails-scope", "title": "Ruby on Rails Scope", "body": "<p>I'm creating a sticker album and i need to scope repeated stickers.\nI still can't fully understand scopes in rails. How can i create a scope that gets all the repeated stickers from a user?</p>\n\n<p><code>Figurinha</code> has a <code>colada</code> boolean attribute, which means the sticker is placed or not in the album.</p>\n\n<p><code>Dep</code> is the players database, Figurinha get the name, avatar and others infos from <code>Dep</code> model.</p>\n\n<p><code>repetida</code> is the method I was trying to create to check if the <code>figurinha</code> is repeated or not.</p>\n\n<p>A <code>figurinha</code> is repeated when <code>Figurinha</code> has another record with the same <code>user</code> and <code>dep</code> wich is already been <code>colada</code></p>\n\n<p>User.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :figurinhas\nend\n</code></pre>\n\n<p>Figurinha.rb</p>\n\n<pre><code>class Figurinha &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :dep\n\n  def repetida\n    coladas = self.user.figurinhas.where(colada: true)\n    colodas.map{|a| a.dep}.include?(self.dep)\n  end\n\nend\n</code></pre>\n\n<p>Dep.rb</p>\n\n<pre><code>class Dep &lt; ActiveRecord::Base\n  has_attached_file :avatar\n  validates_attachment_content_type :avatar, :content_type =&gt; [\"image/jpg\", \"image/jpeg\", \"image/png\", \"image/gif\"]\n\n  belongs_to :partido, foreign_key: :partido, primary_key: :sigla\n\n  def avatar_from_url(url)\n    self.avatar = open(url)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1461162248, "post_id": 36746610, "comment_id": 61074676, "body": "Wow, that <i>is</i> surprising."}], "answers": [{"comments": [{"owner": {"reputation": 10076, "user_id": 4010391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/NgRol.jpg?s=128&g=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/4010391/travis"}, "edited": false, "score": 0, "creation_date": 1461164268, "post_id": 36747436, "comment_id": 61076294, "body": "Excellent answer, I&#39;ve came across your <code>x = 0 if false</code> scenario, but didn&#39;t think it was nearly as odd as this example. Thank you!"}, {"owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "reply_to_user": {"reputation": 10076, "user_id": 4010391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/NgRol.jpg?s=128&g=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/4010391/travis"}, "edited": false, "score": 0, "creation_date": 1461164433, "post_id": 36747436, "comment_id": 61076448, "body": "I think I only remember this ruby oddity because the section of the book that describes this behavior is right after the section that describes the <a href=\"https://en.wikipedia.org/wiki/Principle_of_least_astonishment\" rel=\"nofollow noreferrer\">Principle of Least Astonishment</a>. Editing fail."}], "tags": [], "owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "is_accepted": true, "score": 5, "last_activity_date": 1461163887, "last_edit_date": 1461163887, "creation_date": 1461163579, "answer_id": 36747436, "question_id": 36746610, "link": "https://stackoverflow.com/questions/36746610/undefined-local-variable-coerced-to-nil-when-being-passed-as-argument/36747436#36747436", "title": "Undefined local variable coerced to nil when being passed as argument", "body": "<p>From \"The Ruby Programming Language\" by David Flanagan:</p>\n\n<blockquote>\n  <p>Ruby treats an identifier as a local variable if it has seen any previous assignment to the variable. It does this even if that assignment was never executed.</p>\n</blockquote>\n\n<p>This means that variables are implicitly declared by the Ruby parser, even before any code gets executed. As soon as ruby sees the <code>=</code> operator, it immediately makes a new variable called <code>yellow</code> with a default value of <code>nil</code>. Then when that statement is executed, every reference to that variable share it's default value.</p>\n\n<p>The book goes on to show an example of similar, perhaps surprising, behavior of variable declaration in ruby that is similar to this:</p>\n\n<pre><code>&gt;&gt; x               # NameError: undefined local variable or method `x'\n&gt;&gt; x = 0 if false  # parsed, but never executed\n&gt;&gt; p x             # displays nil\n</code></pre>\n\n<p>The significance of this code is that is shows that variables are declared as soon as code is parsed, and since your two references to <code>yellow</code> happen on the same line, the assignment of yellow must be parsed, and therefore declared, before it's passed as an argument to <code>green</code></p>\n"}, {"comments": [{"owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "edited": false, "score": 0, "creation_date": 1461166510, "post_id": 36748481, "comment_id": 61078069, "body": "The <code>TypeError</code> is a runtime error since you can&#39;t add <code>1</code> (<code>red</code>s assigned value) and <code>nil</code> (<code>blue</code>s default value). Try this instead: <code>blue = red + blue.to_i</code>."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "edited": false, "score": 0, "creation_date": 1461167785, "post_id": 36748481, "comment_id": 61079120, "body": "@user12341234 I <i>know</i> why it&#39;s a TypeError. That&#39;s the point of the example: it illustrates that the variable has been <b>implicitly set to <code>nil</code></b>. Explicitly casting <i>blue</i> as an integer would once again hide this fact."}, {"owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "edited": false, "score": 0, "creation_date": 1461168018, "post_id": 36748481, "comment_id": 61079266, "body": "My mistake. I misunderstood."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1461165984, "last_edit_date": 1495542251, "creation_date": 1461165984, "answer_id": 36748481, "question_id": 36746610, "link": "https://stackoverflow.com/questions/36746610/undefined-local-variable-coerced-to-nil-when-being-passed-as-argument/36748481#36748481", "title": "Undefined local variable coerced to nil when being passed as argument", "body": "<h2>Assignments <em>May</em> Implicitly Declare Variables</h2>\n\n<p>This behavior, while surprising, appears to be consistent across Ruby implementations including MRI, JRuby, and Rubinius. It is most likely a result of the parser treating the righthand side of the assignment as an expression that resolves to <em>nil</em>.</p>\n\n<p>For example, this will raise an exception that informs you that <em>blue</em> is nil:</p>\n\n<pre><code>red = 1\nblue = red + blue\n# TypeError: nil can't be coerced into Fixnum\n</code></pre>\n\n<p>Because it's an assignment, the parser seems to implicitly declare <em>blue</em> as nil, which is then available on the righthand side as a nil value. Contrast this with a truly undeclared variable:</p>\n\n<pre><code>red = 1\nblue = red + green\n# NameError: undefined local variable or method `green' for main:Object\n</code></pre>\n\n<p>So, while <a href=\"https://stackoverflow.com/a/36747436/1301972\">this answer</a> points you to some relevant documentation, it still doesn't really explain <em>why</em> this only applies to the righthand side of an assignment, and then only when the lvalue is implicitly declared within the rvalue. Since it's consistent across implementations, it seems to be expected behavior and is presumably required by the language's internals.</p>\n\n<p>Asking why Matz and the Ruby Core Team designed the parser to treat this an edge case is a question for them. In practice, though, this language feature generally \"does the right thing\" for the programmer.</p>\n"}], "owner": {"reputation": 10076, "user_id": 4010391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/NgRol.jpg?s=128&g=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/4010391/travis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 1, "accepted_answer_id": 36747436, "answer_count": 2, "score": 3, "last_activity_date": 1503638742, "creation_date": 1461161697, "last_edit_date": 1503638742, "question_id": 36746610, "link": "https://stackoverflow.com/questions/36746610/undefined-local-variable-coerced-to-nil-when-being-passed-as-argument", "title": "Undefined local variable coerced to nil when being passed as argument", "body": "<p>I mistakenly wrote a method that assigned a variable to the return value of a method call, which passed the same variable name as a parameter when it was previously undefined. I'm curious to know if this is a bug in Ruby, or actually intended behavior?</p>\n\n<pre><code>RUBY_VERSION\n#=&gt; \"2.2.4\"\n\ndef red(arg)\n  arg\nend\n\n# this is expected since blue is not defined\nblue\nNameError: undefined local variable or method 'blue' for main:Object\nfrom (pry):8:in '__pry__'\n\nred(blue)\nNameError: undefined local variable or method 'blue' for main:Object\nfrom (pry):4:in '__pry__'\n\n# here's the weird part\nblue = red(blue)\n#=&gt; nil\n\nblue\n#=&gt; nil\n</code></pre>\n"}, {"tags": ["ruby", "methods", "hash"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1461161680, "post_id": 36746558, "comment_id": 61074173, "body": "What do you mean using wording \u201cvalue of the hash\u201d?"}, {"owner": {"reputation": 647, "user_id": 746437, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3b847fb799ad84e16d6e6023186837ba?s=128&d=identicon&r=PG", "display_name": "ar.dll", "link": "https://stackoverflow.com/users/746437/ar-dll"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1461161932, "post_id": 36746558, "comment_id": 61074412, "body": "I&#39;m saying I want the hash key to be passed to the method and the value of the key to be passed to the xpath - does that make sense? sorry totally new to ruby might have used incorrect terminology..."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1461170541, "post_id": 36746558, "comment_id": 61080904, "body": "Have you tried the <code>send</code> function in Ruby? Im not entirely sure if this will help you, but here&#39;s the docs for it <a href=\"http://ruby-doc.org/core-2.3.0/Object.html#method-i-send\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.3.0/Object.html#method-i-send</a> basically it send the specified argument to a specified method. So what you could do is methodize the <code>xpath</code> and send the hash value to the <code>xpath</code> method"}], "answers": [{"comments": [{"owner": {"reputation": 647, "user_id": 746437, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3b847fb799ad84e16d6e6023186837ba?s=128&d=identicon&r=PG", "display_name": "ar.dll", "link": "https://stackoverflow.com/users/746437/ar-dll"}, "edited": false, "score": 0, "creation_date": 1461162649, "post_id": 36746752, "comment_id": 61074988, "body": "I think what I actually need is something like an enum so when I call the method I&#39;d be doing something like select_title(title.Mr)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 647, "user_id": 746437, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3b847fb799ad84e16d6e6023186837ba?s=128&d=identicon&r=PG", "display_name": "ar.dll", "link": "https://stackoverflow.com/users/746437/ar-dll"}, "edited": false, "score": 0, "creation_date": 1461162737, "post_id": 36746752, "comment_id": 61075065, "body": "This will work if you\u2019ll pass the key, e.g. <code>:Mr</code> to it. The value <code>&quot;Mr&quot;</code> will be looked up against the hash and placed into <code>xpath</code> string."}, {"owner": {"reputation": 647, "user_id": 746437, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3b847fb799ad84e16d6e6023186837ba?s=128&d=identicon&r=PG", "display_name": "ar.dll", "link": "https://stackoverflow.com/users/746437/ar-dll"}, "edited": false, "score": 0, "creation_date": 1461176634, "post_id": 36746752, "comment_id": 61084566, "body": "I&#39;m possibly making this to complicated... I guess I could just send the string directly to the method"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1461161997, "creation_date": 1461161997, "answer_id": 36746752, "question_id": 36746558, "link": "https://stackoverflow.com/questions/36746558/ruby-passing-the-value-of-a-hash-to-a-method/36746752#36746752", "title": "ruby passing the value of a hash to a method", "body": "<p>If I understood the question correctly, here you go:</p>\n\n<pre><code>def select_title(title_hash_key)\n  @browser.element(:xpath =&gt; \"//...[@value='#{title[title_hash_key]}']\")\n          .click\nend\n</code></pre>\n\n<p>Now when the hash key is passed to this method as an argument, the respective value will be fetched from the hash and put into <code>xpath</code> string using string interpolation (<code>#{title[title_hash_key]}</code>.)</p>\n"}], "owner": {"reputation": 647, "user_id": 746437, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3b847fb799ad84e16d6e6023186837ba?s=128&d=identicon&r=PG", "display_name": "ar.dll", "link": "https://stackoverflow.com/users/746437/ar-dll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461161997, "creation_date": 1461161586, "question_id": 36746558, "link": "https://stackoverflow.com/questions/36746558/ruby-passing-the-value-of-a-hash-to-a-method", "title": "ruby passing the value of a hash to a method", "body": "<p>I'm new to ruby but I'm experimenting with it using watir-webdriver. I'm trying to work out how I can pass a hash value to a method like so:</p>\n\n<pre><code>#this is a hash in ruby - a collection of keys and values\ntitle = { :Mr =&gt; \"Mr\", :Mrs =&gt; \"Mrs\", :Miss =&gt; \"Miss\", :Ms =&gt; \"Ms\", :Other = &gt; \"Other\"}\n\ndef select_title(title)\n @browser.element(:xpath =&gt; \"//input[@type='radio'][@value='Value of title hash']\").click\nend\n</code></pre>\n\n<p>I don't want to write an if then else or switch like logic inside the method, just pass the value of the hash straight into the xpath? how?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "server", "rubygems", "version"], "answers": [{"tags": [], "owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "is_accepted": true, "score": 0, "last_activity_date": 1461161931, "creation_date": 1461161931, "answer_id": 36746718, "question_id": 36746376, "link": "https://stackoverflow.com/questions/36746376/why-does-this-happen-when-i-try-to-update-rails-to-4-0-0/36746718#36746718", "title": "Why does this happen when i try to update rails to 4.0.0?", "body": "<p>You have multiple Rails versions installed and it's reporting the first one it finds. </p>\n\n<p>Does the project have a gemfile? If so just let bundle handle this for you:</p>\n\n<pre><code>bundle install\nbundle exec rails s\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6230688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73dcf796ee9125a477480b44de3f539f?s=128&d=identicon&r=PG&f=1", "display_name": "indi", "link": "https://stackoverflow.com/users/6230688/indi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13, "favorite_count": 0, "accepted_answer_id": 36746718, "answer_count": 1, "score": 0, "last_activity_date": 1461161931, "creation_date": 1461161214, "question_id": 36746376, "link": "https://stackoverflow.com/questions/36746376/why-does-this-happen-when-i-try-to-update-rails-to-4-0-0", "title": "Why does this happen when i try to update rails to 4.0.0?", "body": "<p>I pulled someone's project from github, and we seem to be using different rails versions. When i update the rails gem, it seems to go fine, but when i check the version it still shows the previous one and won't run the rails server.</p>\n\n<pre><code>me@ubuntu:~/Documents/RailsProjects/vega$ gem install rails   \n--version=4.0.0\nSuccessfully installed rails-4.0.0\nParsing documentation for rails-4.0.0\nDone installing documentation for rails after 0 seconds\n1 gem installed\nme@ubuntu:~/Documents/RailsProjects/vega$ rails -v\nRails 3.2.6\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 131, "user_id": 5900446, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fabdf3e22aa594f63402b2b8d51efb73?s=128&d=identicon&r=PG&f=1", "display_name": "Jakov", "link": "https://stackoverflow.com/users/5900446/jakov"}, "edited": false, "score": 0, "creation_date": 1461161567, "post_id": 36746310, "comment_id": 61074063, "body": "I&#39;m using decent_exposure gem to shorten controller <a href=\"https://github.com/hashrocket/decent_exposure\" rel=\"nofollow noreferrer\">github.com/hashrocket/decent_exposure</a>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1461161584, "post_id": 36746310, "comment_id": 61074078, "body": "what are you trying to do when it breaks?"}, {"owner": {"reputation": 131, "user_id": 5900446, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fabdf3e22aa594f63402b2b8d51efb73?s=128&d=identicon&r=PG&f=1", "display_name": "Jakov", "link": "https://stackoverflow.com/users/5900446/jakov"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1461161963, "post_id": 36746310, "comment_id": 61074438, "body": "@Max Emm... If I correctly understood your question, when I got this error I tried to add new method def user_book_params with     params.require(:user_book).permit(:user_id, :book_id) inside it, but it still didn&#39;t work and I&#39;m not sure that it is right to define params of other models in book_controller"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1461164455, "post_id": 36746310, "comment_id": 61076464, "body": "I meant what are you doing to trigger the error - for example, clicking on link or submitting a form.  Which action is being called?  Which line is the error on?  etc"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1461166465, "post_id": 36746310, "comment_id": 61078034, "body": "I would really help if you could give a high level description of what you are trying to do - &quot;The user should be able to create a book and it should be associated with that user&quot; or &quot;A user should be able to ...&quot;. You have a relation set up but you&#39;re not telling us how you intend to use it."}, {"owner": {"reputation": 131, "user_id": 5900446, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fabdf3e22aa594f63402b2b8d51efb73?s=128&d=identicon&r=PG&f=1", "display_name": "Jakov", "link": "https://stackoverflow.com/users/5900446/jakov"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1461167282, "post_id": 36746310, "comment_id": 61078705, "body": "@max Well, user can add many books. Every book can be added by many users. So, that&#39;s why there is has_many through relationship. But after a user adds a book my table user_books is still empty and I don&#39;t get how to make it fill when a user adds a book"}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1461169142, "creation_date": 1461169142, "answer_id": 36749666, "question_id": 36746310, "link": "https://stackoverflow.com/questions/36746310/how-to-define-params-with-has-many-through/36749666#36749666", "title": "How to define params with has_many through?", "body": "<p>To setup a relation via a form you usually use a select or checkbox and pass the ID(s) of related item(s):</p>\n\n<p>For a one to one relation the request would look like this:</p>\n\n<pre><code>POST /books  { book: { name: 'Siddharta', author: 'Herman Hesse', user_id: 1 } }\n</code></pre>\n\n<p>For many to many or one to many you can use <code>_ids</code>:</p>\n\n<pre><code>POST /books  { book: { name: 'Siddharta', author: 'Herman Hesse', user_ids: [1,2,3] } }\n</code></pre>\n\n<p>ActiveRecord creates a special <code>relation_name_ids=</code> setter and getter for <code>has_many</code> and HABTM relations. It lets you modify the relations of an object by passing an array of IDs.</p>\n\n<p>You can create the form inputs like so:</p>\n\n<pre><code>&lt;%= form_for(@book) do |f| %&gt;\n  &lt;%= f.collection_select(:author_ids, User.all, :id, :name, multiple: true) %&gt;\n\n   OR\n\n   &lt;%= f.collection_checkboxes(:author_ids, User.all, :id, :name) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>To whitelist the <code>user_ids</code> params which should permit an array of scalar values and not a nested hash we pass an empty array:</p>\n\n<pre><code>def book_params\n  params.require(:book).permit(:name, :author, :anotation, user_ids: [])\nend\n</code></pre>\n\n<p>On the other hand if you want to assign records to the current user it is better to get the user from the session or a token and avoid passing the param at all:</p>\n\n<pre><code>def create\n  @book = current_user.books.new(book_params)\n  # ...\nend\n</code></pre>\n\n<p>This lets you avoid a pretty simple hack where a malicious user passes another users id or takes control of a resource by passing his own id.</p>\n\n<p>As to your other error why it would try to create a strange query some sort of stack trace or log is needed. </p>\n\n<p>However if you are new to Rails you might want to hold off a bit on the decent exposure gem. It obscures away a lot of important concepts in \"magic\" - and you'll spend more time figuring out how it works that might be better spent learning how good rails apps are built.</p>\n"}], "owner": {"reputation": 131, "user_id": 5900446, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fabdf3e22aa594f63402b2b8d51efb73?s=128&d=identicon&r=PG&f=1", "display_name": "Jakov", "link": "https://stackoverflow.com/users/5900446/jakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "accepted_answer_id": 36749666, "answer_count": 1, "score": 1, "last_activity_date": 1461169142, "creation_date": 1461161065, "question_id": 36746310, "link": "https://stackoverflow.com/questions/36746310/how-to-define-params-with-has-many-through", "title": "How to define params with has_many through?", "body": "<p>I'm using has_many through relationship and I don't really get what should I do else to make it work. \nI suppose there is something about parameters that I don't understand and omit. If so, please tell me where and how to write it, because I'm confused a little bit because of all these params.\nbook.rb:</p>\n\n<pre><code>class Book &lt; ActiveRecord::Base\n  has_many :user_books\n  has_many :users, through: :user_books\nend\n</code></pre>\n\n<p>user.rb:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  devise :database_authenticatable, :registerable, :confirmable,\n    :recoverable, :rememberable, :trackable, :validatable\n\n  validates :full_name, presence: true\n\n  has_many :user_books\n  has_many :books, through: :user_books #books_users - book_id user_id\n\nend\n</code></pre>\n\n<p>and books_controller.rb:</p>\n\n<pre><code>class BooksController &lt; ApplicationController\n  before_action :is_admin?, except: [:show_my_books, :book_params]\n  before_filter :authenticate_user!\n  expose(:book, attributes: :book_params)\n  expose(:user_book)\n  expose(:user_books)\n  expose(:books){current_user.books}\n\n  def create\n    if book.save\n      redirect_to(book)\n    else\n      render :new\n    end\n  end\n\n  def update\n    if book.save\n      redirect_to(book)\n    else\n      render :edit\n    end\n  end\n\n  def show\n  end\n\n  def is_admin?\n    if current_user.admin?\n      true\n    else\n      render :text =&gt; 'Who are you to doing this? :)'\n    end\n  end\n\n  def book_params\n    params.require(:book).permit(:name, :author, :anotation, user:[:name])\n  end\nend\n</code></pre>\n\n<p>When I create new book it gives me an error </p>\n\n<blockquote>\n  <p>Couldn't find Book with 'id'=27 [WHERE \"user_books\".\"user_id\" = ?]</p>\n  \n  <p><code>&lt;%=book.name%&gt;</code></p>\n</blockquote>\n\n<p>Sorry for a silly question, but I couldn't find a proper example to understand it myself that's why I ask you for help. Every help would be appreciated, thank you!</p>\n"}, {"tags": ["ruby", "windows", "registry", "dump"], "owner": {"reputation": 41, "user_id": 6230620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799d57324026c1cacf6875fe3d9de4f2?s=128&d=identicon&r=PG&f=1", "display_name": "raufa", "link": "https://stackoverflow.com/users/6230620/raufa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1461160519, "creation_date": 1461160519, "question_id": 36746099, "link": "https://stackoverflow.com/questions/36746099/no-dump-file-produced-when-application-crashes", "title": "No dump file produced when application crashes", "body": "<p>I am trying to get automatic dumps from windows after setting the</p>\n\n<p>'HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\Windows Error\nReporting\\LocalDumps' </p>\n\n<p>registry key. Setting this key make windows\ngenerate a dump file every time something crashes and store it in a\nspecified folder.</p>\n\n<p>I created a simple crashing exe in visual studio to test this, the code\nis;</p>\n\n<pre><code>static void Main(string[] args){\nint j = crash();\n}\n\nstatic unsafe int crash(){\n  *((int*)0) = 0;\n  return 0;\n}\n</code></pre>\n\n<p>This works fine and a dump file is created when i run it on its own and\nit crashes.</p>\n\n<p>The trouble I'm having is that when I run this program through ruby\nusing <code>system('crashingfile.exe')</code> the program crashes and the error is\nreported by ruby but no dump file is created. The error that ruby\nreports is;</p>\n\n<blockquote>\n  <p>Unhandled Exception: System.NullReferenceException: Object reference\n  not set to an instance of an object.\n         at crashingfile.Program.crash()\n       at crashingfile.Program.Main(String[] args)</p>\n</blockquote>\n\n<p>It seems like ruby is swallowing the error. Can anyone provide an\nexplanation and a workaround to this (so that the program DOES crash and\nwindows handles it and creates the dump file)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 176, "user_id": 748769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b841cf42dcaa7ff719bfa1a7a9865232?s=128&d=identicon&r=PG", "display_name": "Ivan Lu\u010dev", "link": "https://stackoverflow.com/users/748769/ivan-lu%c4%8dev"}, "edited": false, "score": 0, "creation_date": 1461159154, "post_id": 36745410, "comment_id": 61071976, "body": "If you get <code>param is missing or the value is empty: post</code> I believe that problem is in your form which doesn&#39;t submit post attributes as your controller expect it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6123192"}, "reply_to_user": {"reputation": 176, "user_id": 748769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b841cf42dcaa7ff719bfa1a7a9865232?s=128&d=identicon&r=PG", "display_name": "Ivan Lu\u010dev", "link": "https://stackoverflow.com/users/748769/ivan-lu%c4%8dev"}, "edited": false, "score": 0, "creation_date": 1461159367, "post_id": 36745410, "comment_id": 61072160, "body": "All attributes are showing properly from existing but when I click submit then showing error"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6123192"}, "edited": false, "score": 0, "creation_date": 1461159673, "post_id": 36745624, "comment_id": 61072404, "body": "My form is <code>&lt;%= form_for :edit, url: update_path(:post_id =&gt; @edit.post_id), action: :update, method:  :put, remote: true  do |f| %&gt;</code>"}, {"owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "edited": false, "score": 0, "creation_date": 1461160255, "post_id": 36745624, "comment_id": 61072890, "body": "Why not just assign the post to @post, and then use <code>form_form @post, remote: true do |f|</code> -- If it&#39;s an updatable object, rails automatically knows that and will use put (or patch if needed, but you don&#39;t ahve to worry about that)"}], "tags": [], "owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "is_accepted": false, "score": 0, "last_activity_date": 1461161513, "last_edit_date": 1461161513, "creation_date": 1461159452, "answer_id": 36745624, "question_id": 36745410, "link": "https://stackoverflow.com/questions/36745410/not-updating-attribute-in-my-rails-app/36745624#36745624", "title": "Not updating attribute in my rails app", "body": "<p>It's your form that is causing this error.  It means that you aren't passing the values nested inside  <code>post</code>.  If you view your <code>params</code> (raise <code>params.inspect</code>) you'll be able to see that <code>post</code> doesn't exist.  </p>\n\n<p>If you use <code>form_for</code> (or <code>simple_form</code> or <code>formtastic</code>) this is handled for you, but if you are using <code>form_tag</code> or manually creating a form with <code>HTML</code>, or submitting data via ajax you need to add this.</p>\n\n<p>In ajax, you can add by serializing the data before submitting - in a <code>form_tag</code> you can do it this way:</p>\n\n<pre><code>form_tag post_path(@post)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6123192"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461161513, "creation_date": 1461158963, "last_edit_date": 1495540909, "question_id": 36745410, "link": "https://stackoverflow.com/questions/36745410/not-updating-attribute-in-my-rails-app", "title": "Not updating attribute in my rails app", "body": "<p>I have creating a web application using Ruby on Rails but now I'm troubling a issue which is post updating, I'm trying to solve this issue which followed <a href=\"https://stackoverflow.com/questions/24944871/actioncontrollerparametermissing-param-is-missing-or-the-value-is-empty-film\">this</a> also <a href=\"https://stackoverflow.com/questions/26398020/when-assigning-attributes-you-must-pass-a-hash-as-an-argument\">this</a>. Below is my code:</p>\n\n<pre><code> def update\n  @edit = Post.find(params[:post_id])\n  params.permit!\n  if @edit.update_attributes(params[:post])\n      redirect_to home_path\n      flash[:notice] = \"Your post updated\"\n  else\n     flash[:notice] = \"Wrong\"\n  end\nend\n</code></pre>\n\n<p>When I use this code then showing</p>\n\n<blockquote>\n  <p>When assigning attributes, you must pass a hash as an argument.</p>\n</blockquote>\n\n<p>After that</p>\n\n<pre><code>def update\n  @edit = Post.find(params[:post_id])\n  params.permit!\n  if @edit.update_attributes(update_params)\n      redirect_to home_path\n      flash[:notice] = \"Your post updated\"\n  else\n     flash[:notice] = \"Wrong\"\n  end\nend\n\nprivate\ndef update_params\n params.require(:post).permit(:title, :details, :summery)\nend\n</code></pre>\n\n<p>When I use this then showing</p>\n\n<blockquote>\n  <p>param is missing or the value is empty: post</p>\n</blockquote>\n\n<p>Where is my actual fault?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "drop-down-menu", "associations"], "comments": [{"owner": {"reputation": 1506, "user_id": 4265308, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/GOuYQ.jpg?s=128&g=1", "display_name": "Pooja Mokariya", "link": "https://stackoverflow.com/users/4265308/pooja-mokariya"}, "edited": false, "score": 0, "creation_date": 1461158216, "post_id": 36745005, "comment_id": 61071169, "body": "can you explain it in more details."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5294235, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10205382086416529/picture?type=large", "display_name": "Seth Merritt", "link": "https://stackoverflow.com/users/5294235/seth-merritt"}, "edited": false, "score": 0, "creation_date": 1461160104, "post_id": 36745523, "comment_id": 61072754, "body": "This piece is where it doesn&#39;t seem to be pulling it as expected:      Location.where( location.profile_location.profile_id: @profile.id )  Is that the correct syntax for that type of filter based on the active profile?"}, {"owner": {"reputation": 1079, "user_id": 2336662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/key0q.jpg?s=128&g=1", "display_name": "ksarunas", "link": "https://stackoverflow.com/users/2336662/ksarunas"}, "reply_to_user": {"reputation": 93, "user_id": 5294235, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10205382086416529/picture?type=large", "display_name": "Seth Merritt", "link": "https://stackoverflow.com/users/5294235/seth-merritt"}, "edited": false, "score": 0, "creation_date": 1461160906, "post_id": 36745523, "comment_id": 61073471, "body": "Ohh yes. I just copy/pasted your query. It is wrong. You need to join <code>profile_locations</code>. Thus it would be: <code>Location.joins(:profile_location).where(profile_locations: { profile_id: @profile.id })</code>. Updated answer with correct query"}], "tags": [], "owner": {"reputation": 1079, "user_id": 2336662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/key0q.jpg?s=128&g=1", "display_name": "ksarunas", "link": "https://stackoverflow.com/users/2336662/ksarunas"}, "is_accepted": false, "score": 0, "last_activity_date": 1461160989, "last_edit_date": 1461160989, "creation_date": 1461159222, "answer_id": 36745523, "question_id": 36745005, "link": "https://stackoverflow.com/questions/36745005/how-to-limit-an-association-list-based-on-a-related-model/36745523#36745523", "title": "How to limit an association list based on a related model", "body": "<p>If you are are using <code>simple_form</code> you should be creating <code>collection_input</code> like this:</p>\n\n<pre><code>%td= f.input :location, collection: Location.joins(:profile_location).where(profile_locations: { profile_id: @profile.id })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 5294235, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10205382086416529/picture?type=large", "display_name": "Seth Merritt", "link": "https://stackoverflow.com/users/5294235/seth-merritt"}, "is_accepted": true, "score": 0, "last_activity_date": 1461167270, "creation_date": 1461167270, "answer_id": 36748988, "question_id": 36745005, "link": "https://stackoverflow.com/questions/36745005/how-to-limit-an-association-list-based-on-a-related-model/36748988#36748988", "title": "How to limit an association list based on a related model", "body": "<p>Thanks ksarunas....   I needed a minor tweak, but got it running!</p>\n\n<pre><code>%td= f.association :location, :as =&gt; :collection_select, collection: Location.includes(:profile_locations).where(profile_locations: { profile_id: @appointment.profile_id })\n</code></pre>\n\n<p>Was getting an error trying to pull in the @profile.id and had to pluralize the profile_locationS in both places.</p>\n"}], "owner": {"reputation": 93, "user_id": 5294235, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/10205382086416529/picture?type=large", "display_name": "Seth Merritt", "link": "https://stackoverflow.com/users/5294235/seth-merritt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 1, "accepted_answer_id": 36748988, "answer_count": 2, "score": 0, "last_activity_date": 1461167270, "creation_date": 1461158061, "question_id": 36745005, "link": "https://stackoverflow.com/questions/36745005/how-to-limit-an-association-list-based-on-a-related-model", "title": "How to limit an association list based on a related model", "body": "<p>I know that I should know this, but I cannot seem to figure it out at all and I'm still new to development...</p>\n\n<p>So I have four models...</p>\n\n<p>Appointments</p>\n\n<pre><code>class Appointment &lt; ActiveRecord::Base\n    belongs_to :user\n    belongs_to :profile\n    belongs_to :location\nend\n</code></pre>\n\n<p>Profiles</p>\n\n<pre><code>class Profile &lt; ActiveRecord::Base\n\n    belongs_to :user\n    has_many :appointments\n\n    has_many :profile_locations\n    has_many :locations, through: :profile_locations\n    accepts_nested_attributes_for :profile_locations, reject_if: :all_blank, allow_destroy: true\n    accepts_nested_attributes_for :locations, reject_if: :all_blank, allow_destroy: true\n\nend\n</code></pre>\n\n<p>profile_locations</p>\n\n<pre><code>class ProfileLocation &lt; ActiveRecord::Base\n\n    belongs_to :profile\n    belongs_to :location\n    belongs_to :location_type\n\n    accepts_nested_attributes_for :location\n\nend\n</code></pre>\n\n<p>and locations</p>\n\n<pre><code>class Location &lt; ActiveRecord::Base\n\n    has_many :profile_locations\n    has_many :profiles, through: :profile_locations\n\n    has_many :appointments\n\nend\n</code></pre>\n\n<p>On the create appointments page, I already have an associated profile on the record.  I also have an association field on my simple_form for locations that I want to be able to assign to the appointment based on those tied to the profile..</p>\n\n<p>I was trying something like this, but cannot seem to getting working.</p>\n\n<pre><code>%td= f.association :location, :as =&gt; :collection_select, collection: Location.where( location.profile_location.profile_id: @profile.id ), label_method: :address_1, value_method: :id, include_blank: false, :input_html =&gt; {:class =&gt; \"input-small\"}, :label =&gt; \"Select The Location\"\n</code></pre>\n\n<p>Am I missing something here or is there an easier way to query this?  Any guidance on any of this would be helpful.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara", "capybara-webkit"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1461157574, "post_id": 36744416, "comment_id": 61070607, "body": "Have you tried something like <a href=\"http://stackoverflow.com/a/23555725/634576\">this</a>?"}, {"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1461160951, "post_id": 36744416, "comment_id": 61073511, "body": "so you are suggesting add this wait_until and pass it what?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1461163084, "post_id": 36744416, "comment_id": 61075345, "body": "Is the text on the button &quot;Continue&quot; or is it like the submit button all uppercase &quot;CONTINUE&quot;, possibly through CSS text-transform?"}, {"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "edited": false, "score": 0, "creation_date": 1461163414, "post_id": 36744416, "comment_id": 61075616, "body": "Visually its all uppercase, in dom - it is &#39;Continue&#39;. It is uppercased as per your thoughts of CSS text-transform"}, {"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "edited": false, "score": 0, "creation_date": 1461163828, "post_id": 36744416, "comment_id": 61075933, "body": "Dave I have tried that...its almost as if the press of the submit button doesn&#39;t actually execute the javascript, so the modal never actually changes!?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1461163836, "post_id": 36744416, "comment_id": 61075938, "body": "Add a sleep 5 before save_and_open_screenshot to see if the change does happen, if not check for JS errors, sometimes errors in one file in dev mode don&#39;t break things, but will in test mode when all the JS gets concatenated"}, {"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "edited": false, "score": 0, "creation_date": 1461164285, "post_id": 36744416, "comment_id": 61076315, "body": "Ive added sleep - no change. There are no JS errors in dev. Not sure how to test for errors in the JS in test? Interestingly the mouse seems to be in the wrong location having just clicked &#39;submit&#39;? See the screenie added to the post."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1461164762, "post_id": 36744416, "comment_id": 61076724, "body": "Ok, so my guess is your modal is animated onto the page which causes capybara-WebKit to click where the button was, rather than is. An easy solution is to disable animation in whatever library you&#39;re using when in test mode. Another solution may be to check for classes on the modal before clicking (if there is a class that indicates animation is finished). You can test if animation is the issue by sleeping before interacting with the modal"}], "answers": [{"comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 2, "creation_date": 1461165053, "post_id": 36747874, "comment_id": 61076958, "body": "Probably only the first sleep is necessary to solve the issue and pretty much confirms its animation that&#39;s causing the issue. Disable animation in test mode (how to do that depends on the library you&#39;re using for your modals) and the need for the sleep should go away too."}, {"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1461173850, "post_id": 36747874, "comment_id": 61082837, "body": "It doesn&#39;t tom, as the javascript still takes time to execute....so I believe a sleep will always be needed. Having tried removal of the css transitions and disabling of jquery animations it still isn&#39;t instantaneous as there is javascript running!"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1461174170, "post_id": 36747874, "comment_id": 61083049, "body": "It doesn&#39;t have to be instantaneous, Capybara will wait for the item to appear up to Capybara.default_max_wait_time seconds.  It should just need to appear and not move within that time.  You can also override that maximum time in the click_button call like <code>click_button(&#39;Submit&#39;, wait: 10)</code> which will wait up to 10 seconds, however the issue wasn&#39;t not seeing the button since it would have errored in that case - what library are you using for the modals (bootstrap, etc) ? If bootstrap - see <a href=\"http://getbootstrap.com/javascript/#disabling-transitions\" rel=\"nofollow noreferrer\">getbootstrap.com/javascript/#disabling-transitions</a>"}, {"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1461174653, "post_id": 36747874, "comment_id": 61083336, "body": "yeah bootstrap - going to try the disabling animations through that method :) ty tom."}], "tags": [], "owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "is_accepted": false, "score": 1, "last_activity_date": 1461164626, "creation_date": 1461164626, "answer_id": 36747874, "question_id": 36744416, "link": "https://stackoverflow.com/questions/36744416/capybara-cannot-find-a-link-on-a-modal-which-changes-on-button-press/36747874#36747874", "title": "Capybara cannot find a link on a modal which changes on button press", "body": "<p>Seemingly adding a couple of sleeps in has fixed it. I don't know if this is 'right' solution. If somebody has a better way or potentially a better way I would love you to help me find it :</p>\n\n<pre><code>fill_in \"seller_profile[requested_postcode]\", :with =&gt; \"EH21 8PB\"\n\n    sleep 2\n\n    click_button(\"Submit\")\n\n    sleep 2\n\n    click_link(\"Continue\")\n</code></pre>\n"}], "owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2156, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461164626, "creation_date": 1461156747, "last_edit_date": 1461164417, "question_id": 36744416, "link": "https://stackoverflow.com/questions/36744416/capybara-cannot-find-a-link-on-a-modal-which-changes-on-button-press", "title": "Capybara cannot find a link on a modal which changes on button press", "body": "<p>I have a rails project using <code>rspec 3.4.0</code> <code>capybara 2.6.2</code> and <code>capybara-webkit 1.8.0</code>.</p>\n\n<p>I am writing a feature test for a flow on my site which looks like the following:</p>\n\n<pre><code>scenario \"Buyer creates a seller profile\", :js =&gt; true do\n   click_link(\"SELL ON MYSITE\",match: :first)\n   expect(page).to have_text(\"Reach thousands of customers in your area\")\n   click_link(\"Create an Activity\",match: :first)\n   expect(current_path).to eql (new_seller_profile_path)\n\n    fill_in \"seller_profile[business_name]\", :with =&gt; \"Test company\"\n    fill_in \"seller_profile[business_email]\", :with =&gt; \"test@email.com\"\n    fill_in \"seller_profile[business_phone_number]\", :with =&gt; \"07771330510\"\n    fill_in \"seller_profile[business_description]\", :with =&gt; \"This is a test company\"\n\n    find('label[for=\"social\"]').click\n\n\n    find(\"#facebook-placeholder\").click\n\n    fill_in \"seller_profile[business_facebook_url]\", :with =&gt; \"https://www.facebook.com/test\"\n\n    click_button(\"CREATE AN ACTIVITY\")\n</code></pre>\n\n<p>------this button opens a modal after the page changes --------</p>\n\n<pre><code>    fill_in \"seller_profile[requested_postcode]\", :with =&gt; \"EH21 8PB\"\n\n    click_button(\"Submit\")\n\n    save_and_open_screenshot\n</code></pre>\n\n<p>------this is where it goes wrong-------</p>\n\n<pre><code>    click_link(\"Continue\")\n\n    expect(page).to have_text(\"Choose the type of activity that you want to create\")\n\n end\n</code></pre>\n\n<p>The click_link continue fails with error:</p>\n\n<pre><code>Failure/Error: click_link(\"Continue\")\n\n     Capybara::ElementNotFound:\n       Unable to find link \"Continue\"\n</code></pre>\n\n<p>The link actually does exist - when you click on the submit button some javascript executes which changes the contents of the modal to display some new text and a new button. However for some reason click_link does not wait or look in the modal, it fails straight away. </p>\n\n<p>Having added a save_and_open_screenshot call we can see this situation as the modal javascript has yet to execute as we can still see the submit button :</p>\n\n<p><a href=\"https://i.stack.imgur.com/hgzz7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hgzz7.png\" alt=\"enter image description here\"></a></p>\n\n<p>Interestingly the mouse seems to not be on the Submit button as it should have just clicked it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/fkyhO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fkyhO.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I make the click_link wait until the continue button appears?!</p>\n\n<p>This is the javascript which executes on press of 'submit' added to the modal which changes it:</p>\n\n<pre><code>$('#gate .modal-body .intro').text('Congratulations, we are available in your location, please continue to create your activity.');\n\n$('#gate .modal-footer').append('&lt;a class=\"btn btn-lg btn-primary\" href=\"/events/new/\"&gt;Continue&lt;/a&gt;');\n</code></pre>\n"}, {"tags": ["ruby", "resolv"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1461156226, "post_id": 36743801, "comment_id": 61069486, "body": "<code>Resolv</code> is thread-aware, not multi-threaded, i.e. it allows <i>you</i> to make requests in parallel."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "edited": false, "score": 0, "creation_date": 1461169143, "post_id": 36747613, "comment_id": 61080029, "body": "Thanks for the response! This all works other than &quot;ip = resolv.getaddress(combined_name) rescue nil&quot; - If i leave that code in it returns no responses, if i change it back to Resolv.getaddress.... it works. What it doesn&#39;t do however is give me the speed I am looking for. I may need to rethink how I go about this and Im a little too new to Ruby to be looking at threading etc."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 0, "last_activity_date": 1461163978, "creation_date": 1461163978, "answer_id": 36747613, "question_id": 36743801, "link": "https://stackoverflow.com/questions/36743801/increasing-ruby-resolv-speed/36747613#36747613", "title": "Increasing Ruby Resolv Speed", "body": "<p>One thing is you are creating a new Resolv instance with the Google nameservers, but never using it; you create a brand new Resolv instance to do the getaddress call, so that instance is probably using some default nameservers and not the Google ones.  You could change the code to something like this:</p>\n\n<pre><code>resolv = Resolv.new(:nameserver =&gt; ['8.8.8.8', '8.8.4.4'])\n# ...\nip = resolv.getaddress \"#{subdomain}.#{d}\" rescue \"\"\n</code></pre>\n\n<p>In addition, I suggest using the File.readlines method to simplify your code:</p>\n\n<pre><code>domains = File.readlines(\"domains.txt\").map(&amp;:chomp)\nsubdomains = File.readlines(\"tiny.txt\").map(&amp;:chomp)\n</code></pre>\n\n<p>Also, you're rescuing the bad ip and setting it to the empty string, but then in the next line you test for not nil, so all results should pass, and I don't think that's what you want.</p>\n\n<p>I've refactored your code, but not tested it.  Here is what I came up with, and may be clearer:</p>\n\n<pre><code>def subdomains\n  puts \"Subdomain enumeration beginning at #{Time.now.strftime(\"%H:%M:%S\")}\"\n  domains = File.readlines(\"domains.txt\").map(&amp;:chomp)\n  subdomains = File.readlines(\"tiny.txt\").map(&amp;:chomp)\n\n  resolv = Resolv.new(:nameserver =&gt; ['8.8.8.8', '8.8.4.4'])\n\n  valid_subdomains = subdomains.each_with_object([]) do |subdomain, valid_subdomains|\n    domains.each do |domain|\n      combined_name = \"#{subdomain}.#{domain}\"\n      puts \"Checking #{combined_name}\"\n      ip = resolv.getaddress(combined_name) rescue nil\n      valid_subdomains &lt;&lt; \"#{combined_name}#{ip}\" if ip\n    end\n  end\n\n  valid_subdomains.each_slice(4).each do |z|\n    if z[1] &amp;&amp; z[3]\n      puts \"#{z[0]}\\t#{z[1]}\\t\\t#{z[2]}\\t#{z[3]}\"\n    end\n  end\n\n  puts \"Finished at #{Time.now.strftime(\"%H:%M:%S\")}\"\nend\n</code></pre>\n\n<p>Also, you might want to check out the dnsruby gem (<a href=\"https://github.com/alexdalitz/dnsruby\" rel=\"nofollow\">https://github.com/alexdalitz/dnsruby</a>).  It might do what you want to do better than Resolv.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "edited": false, "score": 0, "creation_date": 1461225459, "post_id": 36759651, "comment_id": 61104777, "body": "Wow - thanks for the response. I really do have a lot to learn but structs are in one of my upcoming modules on pragmatic studio at least. When running the app it is fast, but if I give it a large list of sub-domains it crashes after pegging my CPU at 100% for a while, I assume this is while it is building the domain list as I see no relevant DNS queries in Wireshark. I get a variety of different errors, on the Mac this was the latest &quot;dnsruby/config.rb:306:in `initialize&#39;: Too many open files @ rb_sysopen - /etc/resolv.conf (Errno::EMFILE)&quot;. Again, many thanks for your response!"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "edited": false, "score": 0, "creation_date": 1461251621, "post_id": 36759651, "comment_id": 61124466, "body": "Yes, that script assumed a manageable number of names.  About how many subdomain prefixes and domain names does it take to crash the system?  And can you put some print statements in there to see where the 100% CPU is happening (e.g. is it in the Dnsruby code, or in the building of the subdomain array)?"}, {"owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "edited": false, "score": 0, "creation_date": 1461253732, "post_id": 36759651, "comment_id": 61126059, "body": "The subdomain list I used to crash it had 5000 entries - so quite a lot ;) Ill try and figure out where its crashing. The subs list is <a href=\"https://github.com/darkoperator/dnsrecon/blob/master/subdomains-top1mil-5000.txt\" rel=\"nofollow noreferrer\">github.com/darkoperator/dnsrecon/blob/master/&hellip;</a> - Thanks again!"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "edited": false, "score": 0, "creation_date": 1461253929, "post_id": 36759651, "comment_id": 61126202, "body": "5,000 entries isn&#39;t so much by itself, but the question is how many domain prefixes, because the number of subdomains will be the product of those 2 numbers.  If you&#39;re expecting to have that many subdomain prefixes, I&#39;d recommend modifying the code to process only one domain at a time."}, {"owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "edited": false, "score": 0, "creation_date": 1461254221, "post_id": 36759651, "comment_id": 61126412, "body": "The test was a single domain and 5000 sub-domains - I didn&#39;t want to throw everything at it until I had tested it."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "edited": false, "score": 0, "creation_date": 1461307744, "post_id": 36759651, "comment_id": 61148796, "body": "I&#39;ve modified the program to fetch IP addresses in chunks; that should fix your memory and CPU problem.  The default chunk size is 50, but you can change that to optimize for your situation.  You&#39;ll need to gem install awesome_print."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 0, "last_activity_date": 1461307672, "last_edit_date": 1461307672, "creation_date": 1461212769, "answer_id": 36759651, "question_id": 36743801, "link": "https://stackoverflow.com/questions/36743801/increasing-ruby-resolv-speed/36759651#36759651", "title": "Increasing Ruby Resolv Speed", "body": "<p>[Note: I've rewritten the code so that it fetches the IP addresses in chunks.  Please see <a href=\"https://gist.github.com/keithrbennett/3cf0be2a1100a46314f662aea9b368ed\" rel=\"nofollow\">https://gist.github.com/keithrbennett/3cf0be2a1100a46314f662aea9b368ed</a>.  You can modify the RESOLVE_CHUNK_SIZE constant to balance performance with resource load.]</p>\n\n<p>I've rewritten this code using the dnsruby gem (written mainly by Alex Dalitz in the UK, and contributed to by myself and others).  This version uses asynchronous message processing so that all requests are being processed pretty much simultaneously.  I've posted a gist at <a href=\"https://gist.github.com/keithrbennett/3cf0be2a1100a46314f662aea9b368ed\" rel=\"nofollow\">https://gist.github.com/keithrbennett/3cf0be2a1100a46314f662aea9b368ed</a> but will also post the code here.</p>\n\n<p>Note that since you are new to Ruby, there are lots of things in the code that might be instructive to you, such as method organization, use of Enumerable methods (e.g. the amazing 'partition' method), the Struct class, rescuing a specific Exception class, %w, and Benchmark.</p>\n\n<p>NOTE: LOOKS LIKE STACK OVERFLOW ENFORCES A MAXIMUM MESSAGE SIZE, SO THIS CODE IS TRUNCATED.  GO TO THE GIST IN THE LINK ABOVE FOR THE COMPLETE CODE.</p>\n\n<pre><code>#!/usr/bin/env ruby\n\n# Takes a list of subdomain prefixes (e.g.  %w(ftp  xyz)) and a list of domains (e.g. %w(nytimes.com  afp.com)),\n# creates the subdomains combining them, fetches their IP addresses (or nil if not found).\n\nrequire 'dnsruby'\nrequire 'awesome_print'\n\nRESOLVER = Dnsruby::Resolver.new(:nameserver =&gt; %w(8.8.8.8  8.8.4.4))\n\n# Experiment with this to get fast throughput but not overload the dnsruby async mechanism:\nRESOLVE_CHUNK_SIZE = 50\n\n\nIpEntry = Struct.new(:name, :ip) do\n  def to_s\n    \"#{name}: #{ip ? ip : '(nil)'}\"\n  end\nend\n\n\ndef assemble_subdomains(subdomain_prefixes, domains)\n  domains.each_with_object([]) do |domain, subdomains|\n    subdomain_prefixes.each do |prefix|\n      subdomains &lt;&lt; \"#{prefix}.#{domain}\"\n    end\n  end\nend\n\n\ndef create_query_message(name)\n  Dnsruby::Message.new(name, 'A')\nend\n\n\ndef parse_response_for_address(response)\n  begin\n    a_answer = response.answer.detect { |a| a.type == 'A' }\n    a_answer ? a_answer.rdata.to_s : nil\n  rescue Dnsruby::NXDomain\n    return nil\n  end\nend\n\n\ndef get_ip_entries(names)\n\n  queue = Queue.new\n\n  names.each do |name|\n    query_message = create_query_message(name)\n    RESOLVER.send_async(query_message, queue, name)\n  end\n\n\n  # Note: although map is used here, the record in the output array will not necessarily correspond\n  # to the record in the input array, since the order of the messages returned is not guaranteed.\n  # This is indicated by the lack of block variable specified (normally w/map you would use the element).\n  # That should not matter to us though.\n  names.map do\n    _id, result, error = queue.pop\n    name = _id\n    case error\n      when Dnsruby::NXDomain\n        IpEntry.new(name, nil)\n      when NilClass\n       ip = parse_response_for_address(result)\n       IpEntry.new(name, ip)\n      else\n       raise error\n      end\n  end\nend\n\n\ndef main\n  # domains = File.readlines(\"domains.txt\").map(&amp;:chomp)\n  domains = %w(nytimes.com  afp.com  cnn.com  bbc.com)\n\n  # subdomain_prefixes = File.readlines(\"subdomain_prefixes.txt\").map(&amp;:chomp)\n  subdomain_prefixes = %w(www  xyz)\n\n  subdomains = assemble_subdomains(subdomain_prefixes, domains)\n\n  start_time = Time.now\n  ip_entries = subdomains.each_slice(RESOLVE_CHUNK_SIZE).each_with_object([]) do |ip_entries_chunk, results|\n    results.concat get_ip_entries(ip_entries_chunk)\n  end\n  duration = Time.now - start_time\n\n  found, not_found = ip_entries.partition { |entry| entry.ip }\n\n  puts \"\\nFound:\\n\\n\";  puts found.map(&amp;:to_s);  puts \"\\n\\n\"\n  puts \"Not Found:\\n\\n\"; puts not_found.map(&amp;:to_s); puts \"\\n\\n\"\n\n  stats = {\n      duration:        duration,\n      domain_count:    ip_entries.size,\n      found_count:     found.size,\n      not_found_count: not_found.size,\n  }\n\n  ap stats\nend\n\n\nmain\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 4893174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f68dd2c2cab6e39af82a5fd001a2139f?s=128&d=identicon&r=PG&f=1", "display_name": "hatlord", "link": "https://stackoverflow.com/users/4893174/hatlord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1503330524, "creation_date": 1461155252, "last_edit_date": 1503330524, "question_id": 36743801, "link": "https://stackoverflow.com/questions/36743801/increasing-ruby-resolv-speed", "title": "Increasing Ruby Resolv Speed", "body": "<p>Im trying to build a sub-domain brute forcer for use with my clients - I work in security/pen testing.\nCurrently, I am able to get Resolv to look up around 70 hosts in 10 seconds, give or take and wanted to know if there was a way to get it to do more. I have seen alternative scripts out there, mainly Python based that can achieve far greater speeds than this. I don't know how to increase the number of requests Resolv makes in parallel, or if i should split the list up. Please note I have put Google's DNS servers in the sample code, but will be using internal ones for live usage.</p>\n\n<p>My rough code for debugging this issue is:</p>\n\n<pre><code>require 'resolv'\n\ndef subdomains\n  puts \"Subdomain enumeration beginning at #{Time.now.strftime(\"%H:%M:%S\")}\"\n  subs = []\n  domains = File.open(\"domains.txt\", \"r\") #list of domain names line by line.\n  Resolv.new(:nameserver =&gt; ['8.8.8.8', '8.8.4.4'])\n    File.open(\"tiny.txt\", \"r\").each_line do |subdomain|\n      subdomain.chomp!\n    domains.each do |d|\n      puts \"Checking #{subdomain}.#{d}\"\n      ip = Resolv.new.getaddress \"#{subdomain}.#{d}\" rescue \"\"\n        if ip != nil\n          subs &lt;&lt; subdomain+\".\"+d &lt;&lt; ip\n      end\n    end\n  end\n  test = subs.each_slice(4).to_a\n    test.each do |z|\n      if !z[1].nil? and !z[3].nil?\n    puts z[0] + \"\\t\" + z[1] + \"\\t\\t\" + z[2] + \"\\t\" + z[3]\n  end\nend\n  puts \"Finished at #{Time.now.strftime(\"%H:%M:%S\")}\"\nend\n\nsubdomains\n</code></pre>\n\n<p>domains.txt is my list of client domain names, for example google.com, bbc.co.uk, apple.com and 'tiny.txt' is a list of potential subdomain names, for example ftp, www, dev, files, upload. Resolv will then lookup files.bbc.co.uk for example and let me know if it exists.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl"], "comments": [{"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1461155683, "post_id": 36743658, "comment_id": 61069083, "body": "Did you try running the OpenSSL command from the command line as described in the error message?"}, {"owner": {"reputation": 15, "user_id": 5912157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f6e5387f0e87bcc9f155c1c6aeb8fdb?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/5912157/adam"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1461156313, "post_id": 36743658, "comment_id": 61069550, "body": "@dan-klasson: Yes. It displayed the following: Verify return code: 20 (unable to get local issuer certificate)"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1461196632, "post_id": 36743658, "comment_id": 61094299, "body": "<code>openssl s_client -connect api.stripe.com:443 -tls1 -servername api.stripe.com</code> connects as expected. Use TLS 1.0 and above (<code>-tls1</code>), and use server name indication (SNI) (<code>-servername</code>). You can also clear the <i>Verify return code: 20 (unable to get local issuer certificate)</i> by using <code>-CAfile</code> option with <a href=\"http://www.digicert.com/digicert-root-certificates.htm\" rel=\"nofollow noreferrer\"><b><i><code>GTE CyberTrust Global Root</code></i></b></a>."}], "owner": {"reputation": 15, "user_id": 5912157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f6e5387f0e87bcc9f155c1c6aeb8fdb?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/5912157/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461154912, "creation_date": 1461154912, "question_id": 36743658, "link": "https://stackoverflow.com/questions/36743658/unable-to-establish-a-secure-connection-to-stripe-using-rails", "title": "Unable to establish a secure connection to Stripe using Rails", "body": "<p>I'm following an online tutorial to establish stripe payments. After entering the card details in <strong>test mode</strong>, the instructor's page displayed a message \"Payment successful\" from <strong>create.html.erb</strong> file. </p>\n\n<p>However, I'm stuck with an error saying <strong>Stripe::APIConnectionError in ChargesController#create</strong> Please check the screenshot below, it says it has something to do with Openssl version although I've the latest version installed.</p>\n\n<p><a href=\"https://i.stack.imgur.com/hwH6C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hwH6C.png\" alt=\"Error message I got\"></a></p>\n\n<p>After running the command it asked me to, I got this displayed in my cmd: <strong><em>Verify return code: 20 (unable to get local issuer certificate)</em></strong></p>\n\n<p><strong>charges_controller.rb</strong></p>\n\n<pre><code>class ChargesController &lt; ApplicationController\n\n    def create\n    # Amount in cents\n    @amount = 500\n\n    customer = Stripe::Customer.create(\n      :email =&gt; params[:stripeEmail],\n      :source  =&gt; params[:stripeToken]\n    )\n\n    charge = Stripe::Charge.create(\n      :customer    =&gt; customer.id,\n      :amount      =&gt; @amount,\n      :description =&gt; 'Rails Stripe customer',\n      :currency    =&gt; 'usd'\n    )\n\n  rescue Stripe::CardError =&gt; e\n    flash[:error] = e.message\n    redirect_to new_charge_path\n  end\n\nend\n</code></pre>\n\n<p>I recently started learning Rails, any help on this would be appreciated. Thank you! </p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "checkbox"], "comments": [{"owner": {"reputation": 383, "user_id": 3425913, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/L4ff7.jpg?s=128&g=1", "display_name": "thatway_3", "link": "https://stackoverflow.com/users/3425913/thatway-3"}, "edited": false, "score": 1, "creation_date": 1461156111, "post_id": 36743621, "comment_id": 61069393, "body": "you can check sending params as an array in rails here: <code>http:&#47;&#47;stackoverflow.com&#47;a&#47;16555975&#47;3425913</code>"}], "answers": [{"comments": [{"owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "edited": false, "score": 0, "creation_date": 1461156167, "post_id": 36744043, "comment_id": 61069443, "body": "FINALLY!!! I love you man! :D more then 1 week trying solve this!!! Thank you very much man!!!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1461155844, "creation_date": 1461155844, "answer_id": 36744043, "question_id": 36743621, "link": "https://stackoverflow.com/questions/36743621/save-array-in-db-when-checked-more-than-one-checkbox/36744043#36744043", "title": "Save array in DB when checked more than one checkbox", "body": "<p>As I understood, you want the <code>contract_number</code> with id <code>44</code> to be \u201cassociated\u201d with <code>value_solve == \"444\"</code>. If this is correct, you should remove blanks from your <code>value_solve</code> array:</p>\n\n<pre><code>auth_params[:contract_number].zip(auth_params[:value_solve].reject(&amp;:blank?))...\n</code></pre>\n\n<p>Now <code>44</code> is being updated with the second element of <code>value_solve</code>, which is apparently an empty string.</p>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-zip\" rel=\"nofollow\"><code>Array#zip</code></a> for more details.</p>\n"}], "owner": {"reputation": 470, "user_id": 5847429, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aae8a096939117430c37280e7897f32c?s=128&d=identicon&r=PG", "display_name": "Elton Santos", "link": "https://stackoverflow.com/users/5847429/elton-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 36744043, "answer_count": 1, "score": 1, "last_activity_date": 1461155844, "creation_date": 1461154817, "question_id": 36743621, "link": "https://stackoverflow.com/questions/36743621/save-array-in-db-when-checked-more-than-one-checkbox", "title": "Save array in DB when checked more than one checkbox", "body": "<p>I have a problem greatest!! I guess that really want Array, look my console when I checked just one:</p>\n\n<pre><code>{\"value_solve\"=&gt;[\"\", \"\", \"333\", \"\"], \"contract_number\"=&gt;[\"33\"]}\n-----\n  SQL (317.5ms)  UPDATE \"authorizations\" SET \"value_solve\" = '', \"situation\" = 2 WHERE \"authorizations\".\"contract_number\" = ?  [[\"contract_number\", \"33\"]]\n</code></pre>\n\n<p>After, when I checked just one, the first:</p>\n\n<pre><code>{\"value_solve\"=&gt;[\"111\", \"\", \"\", \"\"], \"contract_number\"=&gt;[\"11\"]}\n-----\n  SQL (317.5ms)  UPDATE \"authorizations\" SET \"value_solve\" =  '111 ', \"situation\" = 2 WHERE \"authorizations\".\"contract_number\" = ?  [[\"contract_number\", \"11\"]]\n</code></pre>\n\n<p>And, for last, when I just more then one:</p>\n\n<pre><code>{\"contract_number\"=&gt;[\"11\", \"44\"], \"value_solve\"=&gt;[\"111\", \"\", \"\", \"444\"]}\n-----\n  SQL (297.7ms)  UPDATE \"authorizations\" SET \"value_solve\" = '111', \"situation\" = 2 WHERE \"authorizations\".\"contract_number\" = ?  [[\"contract_number\", \"11\"]]\n  SQL (121.9ms)  UPDATE \"authorizations\" SET \"value_solve\" = '', \"situation\" = 2 WHERE \"authorizations\".\"contract_number\" = ?  [[\"contract_number\", \"44\"]]\n</code></pre>\n\n<p>And this is my controller:</p>\n\n<pre><code>@selected_ids = params[:authorization][:contract_number]\n  @authorizations = Authorization.where(\"contract_number in (?)\", @selected_ids)\n  auth_params = params[:authorization]\n  auth_params[:contract_number].zip(auth_params[:value_solve]).each do |contract_number, value_solve|\n      Authorization.where(contract_number: contract_number).update_all(value_solve: value_solve, situation: 2)\n  end\n</code></pre>\n\n<p>Just save the first value on DB, how I can save more then one value? Thanks!</p>\n"}, {"tags": ["ruby", "recursion"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1461157628, "post_id": 36743531, "comment_id": 61070665, "body": "Implement a separate <code>name</code> method and use <code>&quot;my dad is #{@father.name}&quot;</code> and <code>&quot;my childs are #{kids.map(&amp;:name).join(&#39;, &#39;)}&quot;</code>"}, {"owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1461158755, "post_id": 36743531, "comment_id": 61071613, "body": "When calling the function, you can pass <code>self</code> as an argument, so that the callee has a reference to the caller"}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 5463335, "user_type": "registered", "profile_image": "https://graph.facebook.com/871428386259118/picture?type=large", "display_name": "ohbarye", "link": "https://stackoverflow.com/users/5463335/ohbarye"}, "is_accepted": false, "score": 0, "last_activity_date": 1461167969, "creation_date": 1461167969, "answer_id": 36749238, "question_id": 36743531, "link": "https://stackoverflow.com/questions/36743531/ruby-get-caller-class/36749238#36749238", "title": "ruby: get caller class", "body": "<p>How about just passing a father instance when creating its children?\nThe following is rough but it works.</p>\n\n<pre><code>class Child\n\n  attr_accessor :father, :first_name, :last_name\n\n  def initialize(father, first_name)\n    @father = father\n    @first_name = first_name\n    @last_name = father.last_name\n  end\n\n  def to_s\n    \"I'm #{first_name} #{last_name} my dad is #{father.first_name} #{father.last_name}\"\n  end\nend\n\n\nclass Dad\n\n  attr_accessor :kids, :first_name, :last_name\n\n  def initialize(first_name, last_name)\n    @first_name = first_name\n    @last_name = last_name\n    @kids = []\n  end\n\n  def make_kid(first_name)\n    kids &lt;&lt; Child.new(self, first_name)\n  end\n\n  def to_s\n    \"I'm #{first_name} #{last_name} my childs are #{kids.map(&amp;:first_name).join(', ')}\"\n  end\nend\n\ndad = Dad.new 'OShea', 'Jackson'\ndad.make_kid 'Darrell'\ndad.make_kid 'Tommy'\n\ndad.to_s\n# =&gt; \"I'm OShea Jackson my childs are Darrell, Tommy\"\n\ndad.kids.first.to_s\n# =&gt; \"I'm Darrell Jackson my dad is OShea Jackson\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 0, "last_activity_date": 1461168587, "creation_date": 1461168587, "answer_id": 36749474, "question_id": 36743531, "link": "https://stackoverflow.com/questions/36743531/ruby-get-caller-class/36749474#36749474", "title": "ruby: get caller class", "body": "<p>You can pass a parameter to break recursion:</p>\n\n<pre><code>def to_s skip_recursion=false\n  return \"#{first_name} #{last_name}\" if skip_recursion\n  # then goes as before\n  # ...\n  str += \" my dad is\"\n  str += @father.to_s(true)\nend\n</code></pre>\n\n<p>but this in fact will behave like a separate method <code>name</code></p>\n"}], "owner": {"reputation": 29, "user_id": 3986926, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/775b2a5f1578a2b93cfb0e2ebd3616a0?s=128&d=identicon&r=PG&f=1", "display_name": "pat_McUser", "link": "https://stackoverflow.com/users/3986926/pat-mcuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1461168587, "creation_date": 1461154626, "last_edit_date": 1461168298, "question_id": 36743531, "link": "https://stackoverflow.com/questions/36743531/ruby-get-caller-class", "title": "ruby: get caller class", "body": "<p>Hi I've some problems with a data structure.\nLet's think about a man who has many children, but a child can only have one father. So the child knows his father and the father knows all his children.\nI want to use the <code>to_s</code> method to create an answer depending on who is asking a class.\nI've figured out that <code>caller</code> represents the actual stack. and I have to use it to generate this decision (seams perfect because no need of gems).</p>\n\n<p>Whats the problem: I don't know how how to decide ho is calling, look at this classes:</p>\n\n<pre><code>class child\n    ...\n    def to_s\n      str = \"I'm \"\n      str += @first_name\n      str += @last_name\n      str += \" my dad is\"\n      str += @father.to_s\n    end\n  end\n\n class dad\n    ...\n    def to_s\n      str = \"I'm \"\n      str += @first_name\n      str += @last_name\n      str += \" my childs are\"\n      @kids.each{|child| str+= child.to_s}\n    end\n  end\n</code></pre>\n\n<p>If <code>child</code> calls <code>to_s</code> from a <code>dad</code> instance it should return only the name, the other way around if a <code>dad</code> calls one of his <code>child</code>\u2019s instances it also should return the names. \nMy origin problem is more complex, so in order to solve this I have to prevent an infinite recursion in a case like that.</p>\n\n<p>How can I compare with the caller's class? </p>\n"}, {"tags": ["ruby", "jekyll"], "answers": [{"tags": [], "owner": {"reputation": 1464, "user_id": 936269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1fac3223b59eb3774aef86f7684f7f5f?s=128&d=identicon&r=PG", "display_name": "Lars Nielsen", "link": "https://stackoverflow.com/users/936269/lars-nielsen"}, "is_accepted": true, "score": 1, "last_activity_date": 1462349973, "creation_date": 1462349973, "answer_id": 37022171, "question_id": 36742674, "link": "https://stackoverflow.com/questions/36742674/use-page-attribute-in-include-statement-jekyll/37022171#37022171", "title": "Use page attribute in include statement jekyll", "body": "<p>I found a different a build in solution with jekyll, such that I did not neeed a plugin in</p>\n\n<p>let us say you have markdown file <code>john.md</code> in path <code>markdown_files</code> we can then we can do the following: </p>\n\n<pre><code>{% capture john %}\n    {% include_relative markdown_files/john.md %}\n{% endcapture %}\n</code></pre>\n\n<p>Then where we want to input the text of <code>john.md</code> now captured in <code>john</code> we can put this <code>{{ john | markdownify }}</code></p>\n\n<p>It is not a sleek an not a one liner, but it works. Depending on your setup you can use <code>include</code> instead of <code>include_relative</code></p>\n\n<p>Hope it can help someone else, and thank to the Jekyll IRC community for helping me find a solution. </p>\n"}], "owner": {"reputation": 1464, "user_id": 936269, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1fac3223b59eb3774aef86f7684f7f5f?s=128&d=identicon&r=PG", "display_name": "Lars Nielsen", "link": "https://stackoverflow.com/users/936269/lars-nielsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 37022171, "answer_count": 1, "score": 1, "last_activity_date": 1462349973, "creation_date": 1461152401, "question_id": 36742674, "link": "https://stackoverflow.com/questions/36742674/use-page-attribute-in-include-statement-jekyll", "title": "Use page attribute in include statement jekyll", "body": "<p>I have a jekyll page where I have the the two folders: <code>products</code> <code>_products/product_name</code></p>\n\n<p>and I have a product page md file containg this: </p>\n\n<pre><code>---\ntitle: product_title\nsubtitle: subtilte\nlayout: product\ndescription: long description\nproduct_icon: product_image_path\n---\n</code></pre>\n\n<p>And this simple layout: </p>\n\n<pre><code>---\nlayout: default\n---\n&lt;!-- Main --&gt;\n&lt;div id=\"main\"&gt;\n  &lt;div id=\"content\" class=\"container\"&gt;\n    &lt;header id=\"product_header\"&gt;\n      &lt;div class=\"half_left center\"&gt;\n        &lt;img id=\"product_icon\" src=\"/assets/{{ page.product_icon }}\" alt=\"\"&gt;\n    &lt;h2 id=\"product_title\"&gt;{{ page.title }}&lt;/h2&gt;\n        &lt;h3 id=\"product_subtitle\"&gt;{{page.subtitle}}&lt;/h3&gt;\n      &lt;/div&gt;\n      &lt;div class=\"half_right center\"&gt;\n        {% markdown _products/page.title/short.md %}\n      &lt;/div&gt;\n      &lt;div class=\"clear\"&gt;&lt;/div&gt;\n\n    &lt;/header&gt;\n        {{content}}\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>However in: <code>{% markdown _products/page.title/short.md %}</code> I seem unable to capture the page title, how can I do this? </p>\n\n<p>My markdown tag: </p>\n\n<pre><code># From: http://wolfslittlestore.be/2013/10/rendering-markdown-in-jekyll/\n=begin\n  Jekyll tag to include Markdown text from _includes directory preprocessing with Liquid.\n  Usage:\n    {% markdown &lt;filename&gt; %}\n  Dependency:\n    - kramdown\n=end\nmodule Jekyll\n  class MarkdownTag &lt; Liquid::Tag\n    def initialize(tag_name, text, tokens)\n      super\n      @text = text.strip\n    end\n    require \"kramdown\"\n    def render(context)\n      tmpl = File.read File.join Dir.pwd, \"\", @text\n      site = context.registers[:site]\n      tmpl = (Liquid::Template.parse tmpl).render site.site_payload\n      html = Kramdown::Document.new(tmpl).to_html\n    end\n  end\nend\nLiquid::Template.register_tag('markdown', Jekyll::MarkdownTag)\n</code></pre>\n\n<p>Can someone tell me how I capture the page.title in the <code>{% markdown _products/page.title/short.md %}</code> I get this error: <code>Liquid Exception: No such file or directory @ rb_sysopen - /home/tools/git/pagename.github.io/_products/page.title/short in _layouts/product.html\n</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1461153832, "post_id": 36742504, "comment_id": 61067676, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/8147069/collection-select-method-gives-error-in-rails-3-1-1\" title=\"collection select method gives error in rails 3 1 1\">stackoverflow.com/questions/8147069/&hellip;</a> or <a href=\"http://stackoverflow.com/questions/27136478/undefined-method-merge-for-namesymbol-rails-4-1-x-collection-select\" title=\"undefined method merge for namesymbol rails 4 1 x collection select\">stackoverflow.com/questions/27136478/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "edited": false, "score": 0, "creation_date": 1461157460, "post_id": 36742677, "comment_id": 61070512, "body": "This doesn&#39;t make use of the form builder object which means any existing values wont automatically be preselected by rails when the view gets rendered."}], "tags": [], "owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "is_accepted": false, "score": 1, "last_activity_date": 1461152407, "creation_date": 1461152407, "answer_id": 36742677, "question_id": 36742504, "link": "https://stackoverflow.com/questions/36742504/rails-collection-select-should-print-my-collection/36742677#36742677", "title": "rails collection_select should print my collection", "body": "<p>You can use like </p>\n\n<pre><code>Channel.all.pluck(:id, :channelname)\n</code></pre>\n\n<p>For example take look at below</p>\n\n<pre><code>collection_select(\n    :post, # field namespace \n    :author_id, # field name\n    # result of these two params will be: &lt;select name=\"post[author_id]\"&gt;...\n\n    # then you should specify some collection or array of rows.\n    # It can be Author.where(..).order(..) or something like that. \n    # In your example it is:\n    Author.all, \n\n    # then you should specify methods for generating options\n    :id, # this is name of method that will be called for every row, result will be set as key\n    :name_with_initial, # this is name of method that will be called for every row, result will be set as value\n\n    # as a result, every option will be generated by the following rule: \n    # &lt;option value=#{author.id}&gt;#{author.name_with_initial}&lt;/option&gt;\n    # 'author' is an element in the collection or array\n\n    :prompt =&gt; true # then you can specify some params. You can find them in the docs.\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1461154427, "post_id": 36743209, "comment_id": 61068134, "body": "There I got this error: wrong number of arguments (3 for 4..6)"}, {"owner": {"reputation": 51, "user_id": 2952967, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1313409169/picture?type=large", "display_name": "Fauzan Raza", "link": "https://stackoverflow.com/users/2952967/fauzan-raza"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1461156456, "post_id": 36743209, "comment_id": 61069662, "body": "how about this? &lt;%= f.collection_select(:channel_id, :id, @channels, prompt: true) %&gt;"}, {"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "edited": false, "score": 0, "creation_date": 1461157343, "post_id": 36743209, "comment_id": 61070401, "body": "Neither of these provide the correct parameters for the collection_select method"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1461157572, "post_id": 36743209, "comment_id": 61070604, "body": "Now I got this: undefined method `map&#39; for :id:Symbol"}], "tags": [], "owner": {"reputation": 51, "user_id": 2952967, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1313409169/picture?type=large", "display_name": "Fauzan Raza", "link": "https://stackoverflow.com/users/2952967/fauzan-raza"}, "is_accepted": false, "score": 0, "last_activity_date": 1461153809, "creation_date": 1461153809, "answer_id": 36743209, "question_id": 36742504, "link": "https://stackoverflow.com/questions/36742504/rails-collection-select-should-print-my-collection/36743209#36743209", "title": "rails collection_select should print my collection", "body": "<p>try this</p>\n\n<pre><code>&lt;%= f.collection_select(:channel_id, :id, prompt: true) %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1461157546, "post_id": 36744617, "comment_id": 61070584, "body": "whats the difference between my one, my @channels should have the collection or not?"}, {"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 1, "creation_date": 1461157591, "post_id": 36744617, "comment_id": 61070625, "body": "There is no difference. You can use @channels as per your example."}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1461158841, "post_id": 36744617, "comment_id": 61071695, "body": "additional question, why is this not working: {prompt: t (&quot;channel.add.prompt&quot;)}"}, {"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1461159070, "post_id": 36744617, "comment_id": 61071896, "body": "prompt expects a string value or a boolean. What are you trying to do?"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1461159898, "post_id": 36744617, "comment_id": 61072594, "body": "I want to load a string from my locales for translating"}, {"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1461161497, "post_id": 36744617, "comment_id": 61074002, "body": "To use the translation helper method you need to have a translation defined in your locales folder and pass its key into the translation helper method, such as t(:your_defined_translation). <a href=\"http://guides.rubyonrails.org/i18n.html#adding-translations\" rel=\"nofollow noreferrer\">See here</a>"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1461162040, "post_id": 36744617, "comment_id": 61074519, "body": "yes of course, I did ... have channel.add.prompt in my locales. Error is: syntax error, unexpected tSTRING_BEG, expecting keyword_do or &#39;{&#39; or &#39;(&#39; ...:id, :channelname, {prompt: t &quot;channel.add.prompt&quot;}, class: ... ..."}], "tags": [], "owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "is_accepted": true, "score": 1, "last_activity_date": 1461157202, "creation_date": 1461157202, "answer_id": 36744617, "question_id": 36742504, "link": "https://stackoverflow.com/questions/36742504/rails-collection-select-should-print-my-collection/36744617#36744617", "title": "rails collection_select should print my collection", "body": "<p>According to the docs:</p>\n\n<blockquote>\n  <p>collection_select(method, collection, value_method, text_method,\n  options = {}, html_options = {}) public</p>\n</blockquote>\n\n<p>So therefore you should use:</p>\n\n<pre><code>&lt;%= f.collection_select(:channel_id, Channel.all, :id, :channelname, prompt: true) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 36744617, "answer_count": 3, "score": 1, "last_activity_date": 1461157202, "creation_date": 1461151939, "question_id": 36742504, "link": "https://stackoverflow.com/questions/36742504/rails-collection-select-should-print-my-collection", "title": "rails collection_select should print my collection", "body": "<p>I got an error while trying to use collection_select ;) </p>\n\n<p>I got this code in my view:</p>\n\n<pre><code>&lt;%= f.collection_select(:channel, :channel_id, @channels, :id, :channelname, prompt: true) %&gt;\n</code></pre>\n\n<p>in my controller I have this:</p>\n\n<pre><code>    @channels = Channel.all\n</code></pre>\n\n<p>and I got this error:</p>\n\n<pre><code>undefined method `merge' for :channelname:Symbol\n</code></pre>\n\n<p>Whats my failure ?</p>\n\n<p>Thanks at all!</p>\n"}, {"tags": ["ruby", "bash", "dry"], "comments": [{"owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 1, "creation_date": 1461152523, "post_id": 36742456, "comment_id": 61066742, "body": "In the else branch, you probably want something like <code>command.each {|x| puts x; eval x}</code>"}, {"owner": {"reputation": 65, "user_id": 6229892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ce0d0e49b7a99d7f76949e0ee7ca96?s=128&d=identicon&r=PG&f=1", "display_name": "jumpy", "link": "https://stackoverflow.com/users/6229892/jumpy"}, "reply_to_user": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1461153580, "post_id": 36742456, "comment_id": 61067491, "body": "Yes, thank you! It works pretty good."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6229892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ce0d0e49b7a99d7f76949e0ee7ca96?s=128&d=identicon&r=PG&f=1", "display_name": "jumpy", "link": "https://stackoverflow.com/users/6229892/jumpy"}, "edited": false, "score": 0, "creation_date": 1461153656, "post_id": 36742967, "comment_id": 61067541, "body": "Yes, with &quot;eval&quot; it works properly, thank you a lot @Maxim for your reply!"}], "tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1461153219, "creation_date": 1461153219, "answer_id": 36742967, "question_id": 36742456, "link": "https://stackoverflow.com/questions/36742456/implementing-dry-run-in-ruby-script/36742967#36742967", "title": "Implementing dry-run in ruby script", "body": "<p>This could help:</p>\n\n<pre><code>def perform(*commands)\n  commands.each { |x| DRY_RUN ? puts(x) : eval(x)}\nend\n</code></pre>\n\n<p>It results in:</p>\n\n<pre><code>DRY_RUN = true\nperform(\"puts 'Hello'\")\n</code></pre>\n\n<blockquote>\n  <p>puts 'Hello'</p>\n  \n  <p>=> [\"puts 'Hello'\"]</p>\n</blockquote>\n\n<pre><code>DRY_RUN = false\nperform(\"puts 'Hello'\")\n</code></pre>\n\n<blockquote>\n  <p>Hello</p>\n  \n  <p>=> [\"puts 'Hello'\"]</p>\n</blockquote>\n"}], "owner": {"reputation": 65, "user_id": 6229892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ce0d0e49b7a99d7f76949e0ee7ca96?s=128&d=identicon&r=PG&f=1", "display_name": "jumpy", "link": "https://stackoverflow.com/users/6229892/jumpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 36742967, "answer_count": 1, "score": 2, "last_activity_date": 1461153219, "creation_date": 1461151809, "last_edit_date": 1492085618, "question_id": 36742456, "link": "https://stackoverflow.com/questions/36742456/implementing-dry-run-in-ruby-script", "title": "Implementing dry-run in ruby script", "body": "<p>anybody know how to implement dry-run option in Ruby?</p>\n\n<p>I need something like this, but only for ruby\n<a href=\"https://serverfault.com/questions/147628/implementing-dry-run-in-bash-scripts\">https://serverfault.com/questions/147628/implementing-dry-run-in-bash-scripts</a></p>\n\n<p>I've tried this, but part after else doesn't work:</p>\n\n<pre><code>DRY_RUN = true\n\ndef perform(*args)\n  command = args\n  if DRY_RUN\n    command.each{|x| puts x}\n  else\n   command.each {|x| x}\n  end\nend\n\nperform(\"puts 'Hello'\")\n</code></pre>\n\n<p>Thanks for any idea in advance.</p>\n\n<p>P.S I don't want use something like system<code>(\"ruby -e \\\"puts 'Hello'\\\"\")</code></p>\n"}, {"tags": ["scripting", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6229892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ce0d0e49b7a99d7f76949e0ee7ca96?s=128&d=identicon&r=PG&f=1", "display_name": "jumpy", "link": "https://stackoverflow.com/users/6229892/jumpy"}, "edited": false, "score": 0, "creation_date": 1461153465, "post_id": 36742917, "comment_id": 61067397, "body": "Yes! It works pretty good! Thank you a lot, @rorra.  Problem resolved."}], "tags": [], "owner": {"reputation": 9165, "user_id": 655769, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ylFlJ.jpg?s=128&g=1", "display_name": "rorra", "link": "https://stackoverflow.com/users/655769/rorra"}, "is_accepted": true, "score": 0, "last_activity_date": 1461153083, "creation_date": 1461153083, "answer_id": 36742917, "question_id": 36742728, "link": "https://stackoverflow.com/questions/36742728/implementing-dry-run-in-ruby/36742917#36742917", "title": "Implementing dry-run in ruby", "body": "<p>On the else sentence, where you have:</p>\n\n<pre><code>command.each { |x| x }\n</code></pre>\n\n<p>Replace that with either <code>system(x)</code> if you are running a system command, or <code>eval(x)</code> if you are trying to run ruby code, like:</p>\n\n<pre><code>DRY_RUN = true\n\ndef perform(*args)\n  command = args\n  if DRY_RUN\n    command.each{ |x| puts x }\n  else\n   command.each { |x| system(x) }\n  end\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>DRY_RUN = true\n\ndef perform(*args)\n  command = args\n  if DRY_RUN\n    command.each{ |x| puts x }\n  else\n   command.each { |x| eval(x) }\n  end\nend\n</code></pre>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1243296000, "open_beta_date": 1241049600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/apple-touch-icon@2.png", "twitter_account": "ServerFault", "favicon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/serverfault/Img/apple-touch-icon.png", "audience": "system and network administrators", "site_url": "https://serverfault.com", "api_site_parameter": "serverfault", "logo_url": "https://cdn.sstatic.net/Sites/serverfault/Img/logo.png", "name": "Server Fault", "site_type": "main_site"}, "on_date": 1461152563, "question_id": 771680}, "owner": {"reputation": 65, "user_id": 6229892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ce0d0e49b7a99d7f76949e0ee7ca96?s=128&d=identicon&r=PG&f=1", "display_name": "jumpy", "link": "https://stackoverflow.com/users/6229892/jumpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 0, "closed_date": 1461153669, "accepted_answer_id": 36742917, "answer_count": 1, "score": 1, "last_activity_date": 1461153083, "creation_date": 1461151059, "last_edit_date": 1492085621, "question_id": 36742728, "link": "https://stackoverflow.com/questions/36742728/implementing-dry-run-in-ruby", "closed_reason": "Duplicate", "title": "Implementing dry-run in ruby", "body": "<p>anybody know how to implement dry-run option in Ruby?</p>\n\n<p>I need something like this, but only for ruby.\n<a href=\"https://serverfault.com/questions/147628/implementing-dry-run-in-bash-scripts\">https://serverfault.com/questions/147628/implementing-dry-run-in-bash-scripts</a></p>\n\n<p>I've tried this, but part after <code>else</code> doesn't work:</p>\n\n<pre><code>DRY_RUN = true\n\ndef perform(*args)\n  command = args\n  if DRY_RUN\n    command.each{|x| puts x}\n  else\n   command.each {|x| x}\n  end\nend\n\nperform(\"puts 'Hello'\")\n</code></pre>\n\n<p>Thanks for any idea in advance. </p>\n\n<p>P.S I don't want use something like <code>system(\"ruby -e \\\"puts 'Hello'\\\"\")</code></p>\n"}, {"tags": ["ruby", "net-http"], "comments": [{"owner": {"reputation": 3401, "user_id": 589620, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bd618bcfa88646d7fea535ad2073ffec?s=128&d=identicon&r=PG", "display_name": "Alexander Shlenchack", "link": "https://stackoverflow.com/users/589620/alexander-shlenchack"}, "edited": false, "score": 0, "creation_date": 1461154097, "post_id": 36742141, "comment_id": 61067889, "body": "Why do you think that it hit&#39;s twice?"}, {"owner": {"reputation": 370, "user_id": 3165873, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7b4cbb983cf971cd46adb79084ea41fc?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu Kansal", "link": "https://stackoverflow.com/users/3165873/himanshu-kansal"}, "reply_to_user": {"reputation": 3401, "user_id": 589620, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/bd618bcfa88646d7fea535ad2073ffec?s=128&d=identicon&r=PG", "display_name": "Alexander Shlenchack", "link": "https://stackoverflow.com/users/589620/alexander-shlenchack"}, "edited": false, "score": 0, "creation_date": 1461155022, "post_id": 36742141, "comment_id": 61068569, "body": "Its a service whose response I captured."}], "owner": {"reputation": 370, "user_id": 3165873, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7b4cbb983cf971cd46adb79084ea41fc?s=128&d=identicon&r=PG&f=1", "display_name": "Himanshu Kansal", "link": "https://stackoverflow.com/users/3165873/himanshu-kansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461156408, "creation_date": 1461151042, "last_edit_date": 1461156408, "question_id": 36742141, "link": "https://stackoverflow.com/questions/36742141/ruby-nethttp-start-calling-a-url-twice", "title": "Ruby Net::HTTP.start calling a URL twice", "body": "<p>I am trying to hit a URL in Ruby with the following code:</p>\n\n<pre><code>begin\n  Net::HTTP.start(uri.host, uri.port, :read_timeout=&gt;5) do |http|\n    request = Net::HTTP::Get.new uri.request_uri\n    @response = http.request request\n    @responsecode = @response.code.to_i\n  end\nrescue Exception =&gt; e\n  ::NewRelic::Agent.notice_error(e)\nend\n</code></pre>\n\n<p>The problem I am having is that the URL is hit twice.I don't know why is this happening.Any help is appreciated.If I remove the :read_timeout, it works fine.</p>\n\n<p>EDIT:\nThe problem I found is if service takes longer than read_timeout to respond, it is hit again.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "sidekiq", "private-pub"], "answers": [{"tags": [], "owner": {"reputation": 1368, "user_id": 1599940, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/7KpaW.png?s=128&g=1", "display_name": "rootatdarkstar", "link": "https://stackoverflow.com/users/1599940/rootatdarkstar"}, "is_accepted": false, "score": 0, "last_activity_date": 1461166646, "creation_date": 1461166646, "answer_id": 36748718, "question_id": 36742116, "link": "https://stackoverflow.com/questions/36742116/publish-a-sidekiq-schedule-job-through-private-pub-in-rails/36748718#36748718", "title": "Publish a Sidekiq schedule job through Private Pub in rails", "body": "<p>This gem has been updated last time three years ago and seems not maintained.\nMaybe it's better to use newest rails solution like ActionCabble? <a href=\"https://github.com/rails/rails/tree/master/actioncable\" rel=\"nofollow\">https://github.com/rails/rails/tree/master/actioncable</a></p>\n\n<p>I found this issue, that proofs that ActionCabble can be integrated to ActiveJob or other background workers:</p>\n\n<p><a href=\"https://github.com/rails/rails/issues/22897\" rel=\"nofollow\">https://github.com/rails/rails/issues/22897</a></p>\n"}], "owner": {"reputation": 389, "user_id": 1977891, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eb85e96aa8501a508c8cc5cf697acb75?s=128&d=identicon&r=PG", "display_name": "Rizwan Ansari", "link": "https://stackoverflow.com/users/1977891/rizwan-ansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461166646, "creation_date": 1461150971, "question_id": 36742116, "link": "https://stackoverflow.com/questions/36742116/publish-a-sidekiq-schedule-job-through-private-pub-in-rails", "title": "Publish a Sidekiq schedule job through Private Pub in rails", "body": "<p>I am using 'Sidekiq' to schedule reminder about any task on given time. Its working perfect. Now i want to append it to notify on my navbar, for it i am using 'Private Pub' to publish the reminder message.\n Here is code of Sidekiq Worker.</p>\n\n<pre><code>class ReminderWorker\ninclude Sidekiq::Worker\n\ndef perform(args)\n reminder = Reminder.find(args['id'])\n reminder.activate = true\n PrivatePub.publish_to(\"reminder\", message: reminder)\n reminder.save\n end\nend\n</code></pre>\n\n<p>and inside \"application.js\" i am using alert for testing but it is not working.</p>\n\n<pre><code> PrivatePub.subscribe(\"reminder\", function(data, channel) {\n return alert('Remarks ='+ data.message.remarks);\n</code></pre>\n\n<p>}); </p>\n\n<p>Am i missing some thing? As it is possible to publish data through Private  Pub in rb file accourding to Ryan <a href=\"http://railscasts.com/episodes/316-private-pub?autoplay=true\" rel=\"nofollow\">http://railscasts.com/episodes/316-private-pub?autoplay=true</a></p>\n"}, {"tags": ["ruby", "proc"], "comments": [{"owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 0, "creation_date": 1461148472, "post_id": 36740994, "comment_id": 61064073, "body": "You have <code>Proc</code>, and the specialized <code>Proc</code> that is <code>lambda</code> that you can use as well.  A method is also a block, but not initially an object.  You can convert a method to become a <code>Method</code> object.  You have more choices than just the two ways to pass a block.  So I think your question is somewhat incomplete.  There are no special considerations from passing an anonymous block, other than not accessing it by name (outside of the method, that is), though Procs and lambdas are both considered &quot;anonymous&quot; I think."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1461149251, "post_id": 36740994, "comment_id": 61064556, "body": "<code>yield</code> is faster, indeed. Precisely because it&#39;s less functional. You can only call the passed block. You can&#39;t, for example, pass it on to the next method. Your test doesn&#39;t make sense, btw. <code>do_something</code> doesn&#39;t use the block."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1461151102, "post_id": 36740994, "comment_id": 61065777, "body": "@SergioTulentsev You can pass it by calling it. <code>class Array; def my_map; map{|e| yield(e)} end end</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1461151950, "post_id": 36740994, "comment_id": 61066343, "body": "@sawa: that&#39;s not passing. That&#39;s creating a completely unrelated block with all of the incurred (syntactical) overhead. Compare to <code>def my_map(&amp;block); map(&amp;block); end </code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1461152019, "post_id": 36740994, "comment_id": 61066389, "body": "@sawa: as a result, now the intermediate method is contaminated with implementation details of the underlying method (its block signature)."}, {"owner": {"reputation": 4469, "user_id": 579843, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5ae6553ec74e567742ae11cf7d7b10fb?s=128&d=identicon&r=PG", "display_name": "xx77aBs", "link": "https://stackoverflow.com/users/579843/xx77abs"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1461576246, "post_id": 36740994, "comment_id": 61243473, "body": "@SergioTulentsev That was a typo, I&#39;ve fixed the yield call."}], "answers": [{"comments": [{"owner": {"reputation": 4469, "user_id": 579843, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5ae6553ec74e567742ae11cf7d7b10fb?s=128&d=identicon&r=PG", "display_name": "xx77aBs", "link": "https://stackoverflow.com/users/579843/xx77abs"}, "edited": false, "score": 0, "creation_date": 1461576434, "post_id": 36741427, "comment_id": 61243588, "body": "I understand why yield is faster than having an explicit reference to <code>&amp;block</code>. Is there a better way of passing a block from one method to another, expect from calling <code>yield</code> from a new block?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 4469, "user_id": 579843, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5ae6553ec74e567742ae11cf7d7b10fb?s=128&d=identicon&r=PG", "display_name": "xx77aBs", "link": "https://stackoverflow.com/users/579843/xx77abs"}, "edited": false, "score": 0, "creation_date": 1461578896, "post_id": 36741427, "comment_id": 61245247, "body": "If you have a good justification for taking a performance hit, then you can explicitly reference <code>&amp;block</code>. (You then just use <code>block.call</code>, instead of <code>yield</code>.) Or, another trick you could consider using is <code>Kernel#block_given?</code>: <a href=\"http://apidock.com/ruby/Kernel/block_given%3F\" rel=\"nofollow noreferrer\">apidock.com/ruby/Kernel/block_given%3F</a> -- which can be used without an explicit <code>&amp;block</code> declaration."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 3, "last_activity_date": 1461149220, "creation_date": 1461149220, "answer_id": 36741427, "question_id": 36740994, "link": "https://stackoverflow.com/questions/36740994/passing-block-from-one-method-to-another/36741427#36741427", "title": "Passing block from one method to another", "body": "<p>Short answer: Always use <code>yield</code>, unless you have a good reason to explicitly reference <code>&amp;block</code>.</p>\n\n<p>See: <a href=\"https://docs.omniref.com/ruby/2.2.0/symbols/Proc/yield#annotation=4087638&amp;line=711&amp;hn=1\" rel=\"nofollow\">Why blocks make ruby methods 439% slower</a></p>\n\n<p>With <code>&amp;block</code>, you get a reified Proc on which you can do all kinds of <a href=\"http://ruby-doc.org/core/Proc.html\" rel=\"nofollow\">stuff</a> and which you can move around. However, with a <code>yield</code> and an implicit block, you are limited to only calling the block.</p>\n\n<p>By using <code>yield</code>, the interpreter can bypass all the Proc reification as it knows the developer won't be able to use it; hence it can keep just a C-level structure instead of having to set up a Ruby-level object.</p>\n"}], "owner": {"reputation": 4469, "user_id": 579843, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5ae6553ec74e567742ae11cf7d7b10fb?s=128&d=identicon&r=PG", "display_name": "xx77aBs", "link": "https://stackoverflow.com/users/579843/xx77abs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2462, "favorite_count": 0, "accepted_answer_id": 36741427, "answer_count": 1, "score": 2, "last_activity_date": 1461576314, "creation_date": 1461148091, "last_edit_date": 1461576314, "question_id": 36740994, "link": "https://stackoverflow.com/questions/36740994/passing-block-from-one-method-to-another", "title": "Passing block from one method to another", "body": "<p>I need to pass a block from one method to another (I want to call <code>Rails.cache.fetch</code> with block passed to my method).</p>\n\n<p>I can either add <code>&amp;block</code> to parameter list and use that to pass it to the next method, or I can create a new block and call yield inside of it. I've wrote a short example and benchmark:</p>\n\n<pre><code>require \"benchmark\"\n\ndef with_block(&amp;block)\n  do_something 'Test', &amp;block\nend\n\ndef with_yield\n  do_something('Test') { yield }\nend\n\ndef do_something(string)\n  \"#{yield} #{string}\"\nend\n\nn = 5_000_000\nBenchmark.bmbm do |x|\n  x.report(\"&amp;block\") do\n    n.times { with_block { \"Yo\" } }\n  end\n  x.report(\"yield\") do\n    n.times { with_yield { \"Yo\" } }\n  end\nend\n\n\n&amp;block   3.320000   0.010000   3.330000 (  3.340438)\nyield    1.670000   0.000000   1.670000 (  1.669504)\n--------------------------------- total: 5.000000sec\n\n             user     system      total        real\n&amp;block   3.270000   0.010000   3.280000 (  3.275914)\nyield    1.680000   0.000000   1.680000 (  1.682768)\n</code></pre>\n\n<p>Looks like <code>{ yield }</code> approach is much faster. Is it the right way to go? Are there any gotchas I'm not aware of because of calling <code>yield</code> inside a newly created block?</p>\n"}, {"tags": ["ruby", "security", "jruby", "abuse"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6229450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhDTc.png?s=128&g=1", "display_name": "seyfahni", "link": "https://stackoverflow.com/users/6229450/seyfahni"}, "edited": false, "score": 0, "creation_date": 1461153996, "post_id": 36740852, "comment_id": 61067809, "body": "Isn&#39;t it possible to work around this prevention by using <code>class Dir \\n def Dir.workaround_pwd \\n Dir.pwd \\n end \\n end \\n</code>"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 103, "user_id": 6229450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhDTc.png?s=128&g=1", "display_name": "seyfahni", "link": "https://stackoverflow.com/users/6229450/seyfahni"}, "edited": false, "score": 0, "creation_date": 1461154463, "post_id": 36740852, "comment_id": 61068155, "body": "@seyfahni, i don&#39;t understand you, please, give the full explanation of your opinion by updating answer"}, {"owner": {"reputation": 103, "user_id": 6229450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhDTc.png?s=128&g=1", "display_name": "seyfahni", "link": "https://stackoverflow.com/users/6229450/seyfahni"}, "edited": false, "score": 0, "creation_date": 1461185514, "post_id": 36740852, "comment_id": 61090132, "body": "I just think that there is an easy workaround for your solution: <a href=\"https://pastebin.com/v0ssbHhg\" rel=\"nofollow noreferrer\">Workaround on Pastebin</a>"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 103, "user_id": 6229450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhDTc.png?s=128&g=1", "display_name": "seyfahni", "link": "https://stackoverflow.com/users/6229450/seyfahni"}, "edited": false, "score": 0, "creation_date": 1461219382, "post_id": 36740852, "comment_id": 61100839, "body": "@seyfahni, it depends on your goal. anyway, i updated my answer)"}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 4, "last_activity_date": 1461219577, "last_edit_date": 1461219577, "creation_date": 1461147763, "answer_id": 36740852, "question_id": 36740678, "link": "https://stackoverflow.com/questions/36740678/how-to-allow-access-to-only-some-specific-ruby-classes/36740852#36740852", "title": "How to allow access to only some specific ruby classes?", "body": "<p>You can just make specific methods private:</p>\n\n<pre><code>class Dir\n  private :close, :each ....\n  private_class_method :glob, :home ...\nend\n</code></pre>\n\n<p>Or you can undefine whole class (bad idea as for me):</p>\n\n<pre><code>Object.send(:remove_const, :Dir)\n</code></pre>\n\n<p>Or remove methods (also bad idea to remove methods from Ruby core class): </p>\n\n<pre><code>class Dir\n  remove_method :close, :each ....\nend\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 6229450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xhDTc.png?s=128&g=1", "display_name": "seyfahni", "link": "https://stackoverflow.com/users/6229450/seyfahni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 36740852, "answer_count": 1, "score": 2, "last_activity_date": 1478100015, "creation_date": 1461147314, "last_edit_date": 1478100015, "question_id": 36740678, "link": "https://stackoverflow.com/questions/36740678/how-to-allow-access-to-only-some-specific-ruby-classes", "title": "How to allow access to only some specific ruby classes?", "body": "<p>I'm trying to use jruby as a script language (for writing quests for a game), but I need to prevent usage of potentially dangerous classes like <code>Dir</code>, <code>Process</code> or <code>RubyVM</code>.</p>\n\n<p>I already found a cumbersome way to blacklist single methods and classes:</p>\n\n<pre><code>class Dir\n    def Dir.[]\n    end\n    def Dir.chdir\n    end\n    def Dir.chroot\n    end\n    def Dir.delete\n    end\n    def Dir.entries\n    end\n    def Dir.exist?\n    end\n    def Dir.exists?\n    end\n    def Dir.foreach\n    end\n    def Dir.getwd\n    end\n    def Dir.glob\n    end\n    def Dir.home\n    end\n    def Dir.mkdir\n    end\n    def Dir.initialitze\n    end\n    def Dir.open\n    end\n    def Dir.pwd\n    end\n    def Dir.rmdir\n    end\n    def Dir.unlink\n    end\n    def close\n    end\n    def each\n    end\n    def fileno\n    end\n    def inspect\n    end\n    def path\n    end\n    def pos\n    end\n    def read\n    end\n    def rewind\n    end\n    def seek\n    end\n    def tell\n    end\n    def to_path\n    end\nend\n</code></pre>\n\n<p>But I really hope that there is a much easier way to perform this task or even better whitelist the classes that should be able to use.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6229471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86bcc8731fab6f1e61a38bf164f1b5f?s=128&d=identicon&r=PG&f=1", "display_name": "khush", "link": "https://stackoverflow.com/users/6229471/khush"}, "edited": false, "score": 0, "creation_date": 1461173463, "post_id": 36741743, "comment_id": 61082600, "body": "Thank you! Any other improvements?"}], "tags": [], "owner": {"reputation": 51, "user_id": 2952967, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1313409169/picture?type=large", "display_name": "Fauzan Raza", "link": "https://stackoverflow.com/users/2952967/fauzan-raza"}, "is_accepted": false, "score": 0, "last_activity_date": 1461150025, "creation_date": 1461150025, "answer_id": 36741743, "question_id": 36740459, "link": "https://stackoverflow.com/questions/36740459/ruby-on-rails-grouped-collection-select-error/36741743#36741743", "title": "Ruby on Rails - grouped_collection_select error", "body": "<p>one thing that you need to do is in your Make class write</p>\n\n<pre><code>has_many :models\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>has_many :model\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6229471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86bcc8731fab6f1e61a38bf164f1b5f?s=128&d=identicon&r=PG&f=1", "display_name": "khush", "link": "https://stackoverflow.com/users/6229471/khush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461153208, "creation_date": 1461146825, "last_edit_date": 1461153208, "question_id": 36740459, "link": "https://stackoverflow.com/questions/36740459/ruby-on-rails-grouped-collection-select-error", "title": "Ruby on Rails - grouped_collection_select error", "body": "<p>I am learning Ruby on Rails and still unfamilar with some of parts of the language. Using the grouped_collection_select I am trying to filter all the relevant models for a specific make of car... </p>\n\n<p>I am unsure if the grouped_collection_select has the correct parameters and if they are in the correct order as I encounter this error and cannot seem to resolve it : \"undefined method `map' for \"3 Series\":String\".</p>\n\n<p>Also I am using this <a href=\"https://www.youtube.com/watch?v=j1zZ4Lgzf9s\" rel=\"nofollow\">railscast</a> and already have the Javascript added to the relevant file.</p>\n\n<p>app\\views_multi_search.html.erb</p>\n\n  \n\n<pre><code>&lt;%= select_tag ('make_id'), \n        options_from_collection_for_select(@makes, :id, :makes_info, 0 ),\n        :prompt =&gt; \"Select a Make\" %&gt;\n&lt;%#= select_tag ('model_id'), \n    options_from_collection_for_select(@models, :id, :model_info, 0 ),\n    :prompt =&gt; \"Select a Model\" %&gt;\n\n&lt;%= select_tag ('model_id'), grouped_collection_select(:model,:model_id,Model.all,:model_info,:model,:id,:model),:prompt =&gt; \"Select a Model\" %&gt;\n</code></pre>\n\n<p>Calling the partial in application.html.erb:</p>\n\n<p>`</p>\n\n<pre><code>&lt;%= render( :partial =&gt; '/multi_search', \n            :locals =&gt; {\n            :makes =&gt; @makes = Make.all,:models =&gt; @models = Model.all,\n            :my_path =&gt; '/cars/multi_find' })%&gt;'\n</code></pre>\n\n<p>The model code for the make and car model:</p>\n\n<p>make.rb</p>\n\n<pre><code>class Make &lt; ActiveRecord::Base\n\n    has_many :cars\n    has_many :model\n</code></pre>\n\n<p>model:rb</p>\n\n<pre><code>has_many :cars\n    belongs_to :make\n\n    has_many :cars\n    belongs_to :make\n</code></pre>\n\n<p>Any help would be much appreciated! </p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "draper"], "comments": [{"owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "edited": false, "score": 0, "creation_date": 1470090074, "post_id": 36740087, "comment_id": 64795595, "body": "Did you find a solution?"}], "answers": [{"tags": [], "owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "is_accepted": false, "score": 0, "last_activity_date": 1469538610, "creation_date": 1469538610, "answer_id": 38590836, "question_id": 36740087, "link": "https://stackoverflow.com/questions/36740087/using-draper-gem-with-devise-registration-controller/38590836#38590836", "title": "Using draper gem with devise registration controller", "body": "<p>In order to get a decorated user object from Devise's <code>current_user</code> method, <a href=\"https://ariejan.net/2012/04/14/decorating-devise-s-current_user-with-draper/\" rel=\"nofollow\">you can override it</a>:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  def current_user\n    UserDecorator.decorate(super) unless super.nil?\n  end\nend\n</code></pre>\n\n<p>However, since your issue is on the <code>devise/registrations/new.html.erb</code> page, at this point a user will not have logged in and hence won't have a any kind of decorated <code>current_user</code> object.  </p>\n\n<p>So, what it would seem you want is to get the set of decorated contract types from your <code>User</code> model into that view, which you could do by creating an instance variable on the controller:</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n  def new\n    @contract_types = User.contract_types.keys.collect {|k| [k.humanize, k]}\n    super\n  end\nend\n</code></pre>\n\n<p>and then use it in the view:</p>\n\n<pre><code>&lt;%= f.select :contract_type, \n             @contract_types,\n             { prompt: t(\".contract_type\", default: \"Select contract type\") } %&gt;\n</code></pre>\n\n<p>If you wanted to do further refactorings, you could perhaps create a scope-like class method on your <code>User</code> model that does the decoration of the contract types:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  def self.humanized_contract_types\n    contract_types.keys.collect {|k| [k.humanize, k]}\n  end\nend\n</code></pre>\n\n<p>So, then your controller code could be shortened to:</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n  def new\n    @contract_types = User.humanized_contract_types\n    super\n  end\nend\n</code></pre>\n\n<p>Or, if you're intent on using the <code>UserDecorator</code> class, you could look into <a href=\"https://github.com/drapergem/draper#proxying-class-methods\" rel=\"nofollow\">proxying class method calls to it</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3072, "user_id": 2878172, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6c20c0911f026de5b15b6187fd50caf4?s=128&d=identicon&r=PG&f=1", "display_name": "Kernael", "link": "https://stackoverflow.com/users/2878172/kernael"}, "is_accepted": false, "score": 0, "last_activity_date": 1507033872, "creation_date": 1507033872, "answer_id": 46544666, "question_id": 36740087, "link": "https://stackoverflow.com/questions/36740087/using-draper-gem-with-devise-registration-controller/46544666#46544666", "title": "Using draper gem with devise registration controller", "body": "<p>You can override your <code>new</code> method to decorate your resource like so :</p>\n\n<pre><code># registrations_controller.rb\n\ndef new\n  build_resource({})\n  yield resource if block_given?\n  respond_with resource\nend\n\nprotected\n\ndef build_resource(hash = nil)\n  self.resource = resource_class.new_with_session(hash || {}, session).decorate\nend\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 3718154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/cuO4m.jpg?s=128&g=1", "display_name": "Md. Mahmudur Rahman", "link": "https://stackoverflow.com/users/3718154/md-mahmudur-rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 377, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1507033872, "creation_date": 1461146000, "question_id": 36740087, "link": "https://stackoverflow.com/questions/36740087/using-draper-gem-with-devise-registration-controller", "title": "Using draper gem with devise registration controller", "body": "<p><strong>I have declared user_decorator.rb instead of user_helper.rb in the following way</strong></p>\n\n<pre><code>class UserDecorator &lt; Draper::Decorator\n   delegate_all\n\n  def contract_type\n    contract_types.keys.collect {|k| [k.humanize, k]}\n  end\n  def employee_type\n    employee_types.keys.collect {|k| [k.humanize, k]}\n  end\n\n  def department_role\n    department_roles.keys.collect {|k| [k.humanize, k]}\n  end\nend\n</code></pre>\n\n<p>and here are my enums that are declared on the user.rb</p>\n\n<pre><code> enum contract_type: [:probationary, :apprenticeship, :six_months_to_one_year,\n    :three_years]\n  enum department_role: [:ceo, :cto, :coo, :manager, :tl, :gl, :developer]\n  enum employee_type: [:full_time, :part_time, :internship]\n</code></pre>\n\n<p>I want to call the helper method from the view that is related to registrations controller. It is like as </p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n\n  def new\n    super\n  end\n\n  def create\n    super\n  end\nend\n</code></pre>\n\n<p>But if I call the helper method, like as following from the views/devise/registrations/new.html.erb</p>\n\n<pre><code>&lt;%= f.select :contract_type, contract_type, {prompt: t(\".contract_type\",\n      default: \"Select contract type\")} %&gt;\n</code></pre>\n\n<p>It don't find the contract_type. Need help about how I can access the helper methods from the view that is declared on the user_decorator.rb</p>\n"}, {"tags": ["ruby", "bundler"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1461145527, "post_id": 36739474, "comment_id": 61061929, "body": "The problem is not in ignore the production env, problem is <code>You cannot specify the same gem twice with different version requirements.</code>"}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1461145688, "post_id": 36739474, "comment_id": 61062038, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439: So Bundler won&#39;t install the production gems on development, but will still throw an error if the version requirements are different?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1461145786, "post_id": 36739474, "comment_id": 61062112, "body": "it still throw an error if you specify the same gem twice."}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1461146043, "post_id": 36739474, "comment_id": 61062296, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 So what&#39;s the solution to the problem? What do people normally do?"}], "answers": [{"comments": [{"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1461152189, "post_id": 36740227, "comment_id": 61066488, "body": "In my <code>.&#47;bundle&#47;config</code> I now have <code>BUNDLE_LOCAL__APPY_CORE: &quot;&#47;Users&#47;daniel&#47;engines&#47;core&quot;</code>. But when I run <code>bundle install</code> it&#39;s not using my local source. I did not specify <code>git</code> and <code>branch</code> in the Gemfile though as the remote source is a gem server."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1461153096, "post_id": 36740227, "comment_id": 61067138, "body": "1. How do you know it\u2019s not using the local source? 2. I have no idea how <code>bundler</code> treats local settings, it is nearly undocumented feature I discovered occasionally. What prevents you from specifying <code>git</code> and <code>branch</code>?"}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1461155485, "post_id": 36740227, "comment_id": 61068945, "body": "@mudsaobwa 1.Because the version bundler says is installed is not the same as master. 2. Because it&#39;s on a gem server, not a git repo."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1461155630, "post_id": 36740227, "comment_id": 61069041, "body": "1. Bundler is (AFAIK) able to pick up the version specified in the gem, it should not be <code>master</code>. Try to put <code>binding.pry</code> or like in the local version and see if it\u2019s stopped there."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1461156695, "post_id": 36740227, "comment_id": 61069855, "body": "OK, I know another hack, please see an update. Do not use at home and in the school :)"}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1461161095, "post_id": 36740227, "comment_id": 61073655, "body": "I thought about that as well, but <code>config&#47;env.yml</code> won&#39;t run until you start the rails server. Also tried putting an <code>export RAILS_ENV=&quot;development&quot; in </code>.bash_profile`. But it doesn&#39;t work either. Maybe it&#39;s an OSX thing."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1461161515, "post_id": 36740227, "comment_id": 61074023, "body": "Just do <code>alias bundle=&quot;USE_DEV_VERSION=1 bundle&quot;</code> and run <code>bundle install</code>. It will be using dev version locally and standard gem outside of the environment with this shell variable specified."}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1461161793, "post_id": 36740227, "comment_id": 61074281, "body": "Awesome, that works. Please update answer and I will accept."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1461161926, "last_edit_date": 1461161926, "creation_date": 1461146301, "answer_id": 36740227, "question_id": 36739474, "link": "https://stackoverflow.com/questions/36739474/bundler-ignoring-without-group/36740227#36740227", "title": "Bundler ignoring &#39;without&#39; group", "body": "<p>The only solution I came up with / am aware of:</p>\n\n<p>in <code>Gemfile</code>:</p>\n\n<pre><code>gem 'appy_core', \n    git: 'git://github.com/.......',\n    branch: '1.7.4.5' # put the name of the branch that corresponds\n</code></pre>\n\n<p>in local environment\u2019s shell:</p>\n\n<pre><code>$ bundle config local.appy_core /path/to/engines/core\n</code></pre>\n\n<p>Now do whatever you want in the local branch, commit it locally and enjoy.</p>\n\n<hr>\n\n<p><strong>Hack that works</strong></p>\n\n<p>Since <code>Gemfile</code> is plain ruby, one might use ruby features there:</p>\n\n<p>somewhere in permanent shell settings:</p>\n\n<pre><code>alias bundle=\"USE_DEV_VERSION=1 bundle\"\n</code></pre>\n\n<p>in <code>Gemfile</code>:</p>\n\n<pre><code>if ENV['USE_DEV_VERSION']\n  gem \"appy_core\", path: \"../engines/core\"\nelse\n  gem \"appy_core\", '1.7.4.5'\nend\n</code></pre>\n\n<p>Now <code>bundle install</code> will use dev version locally and the standard gem outside of the \u201cpatched\u201d environment.</p>\n"}, {"tags": [], "owner": {"reputation": 16977, "user_id": 2518355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3ed231a208476815d1b89dcc045aa6?s=128&d=identicon&r=PG", "display_name": "wjordan", "link": "https://stackoverflow.com/users/2518355/wjordan"}, "is_accepted": false, "score": 0, "last_activity_date": 1461196282, "creation_date": 1461196282, "answer_id": 36757196, "question_id": 36739474, "link": "https://stackoverflow.com/questions/36739474/bundler-ignoring-without-group/36757196#36757196", "title": "Bundler ignoring &#39;without&#39; group", "body": "<p>Since <code>Gemfile</code> is executed as Ruby code, you can reference <code>Bundler.settings</code> directly to explicitly exclude duplicate gems within a group:</p>\n\n<pre><code>def without?(group)\n  Bundler.settings.without.include?(group)\nend\n\ngroup :development do\n  gem \"appy_core\", path: \"../engines/core\" unless without? :development\nend\n\ngroup :production do\n  gem \"appy_core\", '1.7.4.5' unless without? :production\nend\n</code></pre>\n"}], "owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 36740227, "answer_count": 2, "score": 0, "last_activity_date": 1461196282, "creation_date": 1461144569, "question_id": 36739474, "link": "https://stackoverflow.com/questions/36739474/bundler-ignoring-without-group", "title": "Bundler ignoring &#39;without&#39; group", "body": "<p>I'm trying to include gems from my local instead of the gemserver on development. My Gemfile looks like this:</p>\n\n<pre><code>group :development do\n  gem \"appy_core\", path: \"../engines/core\"\nend\n\ngroup :production do\n  gem \"appy_core\", '1.7.4.5'\nend\n</code></pre>\n\n<p>My <code>.bundle/config</code> is set to:</p>\n\n<pre><code>---\nBUNDLE_WITHOUT: production\n</code></pre>\n\n<p>Yet when I run <code>bundle</code> I get:</p>\n\n<pre><code> [!] There was an error parsing `Gemfile`: You cannot specify the same gem twice with different version requirements.\n You specified: appy_core (&gt;= 0) and appy_core (= 1.7.4.5). Bundler cannot continue.\n</code></pre>\n\n<p>Running <code>bundle install --without production</code> produces the same result.</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "alert", "saucelabs"], "answers": [{"tags": [], "owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "is_accepted": true, "score": 0, "last_activity_date": 1461328527, "creation_date": 1461328527, "answer_id": 36794014, "question_id": 36738888, "link": "https://stackoverflow.com/questions/36738888/how-to-dismiss-popups-with-selenium-webdriver-in-ruby/36794014#36794014", "title": "How to dismiss popups with Selenium Webdriver in Ruby", "body": "<p>I fixed this problem by using send_key method to simulate pressing of escape key:</p>\n\n<pre><code>def click css_selector\n  begin\n    browser.find_element(:css, css_selector).click if rendered? css_selector\n  rescue Selenium::WebDriver::Error::UnknownError\n    dismiss css_selector\n    click css_selector\n  end\nend\n\ndef dismiss selector\n  browser.find_element(:tag_name, \"body\").send_keys :escape\nend\n</code></pre>\n\n<p>Its not perfect in any way, but for now its a solution, if you have better way of getting rid of these, please let me know.</p>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 1412, "user_id": 524226, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/J9KIG.jpg?s=128&g=1", "display_name": "Jakub Zak", "link": "https://stackoverflow.com/users/524226/jakub-zak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 36794014, "answer_count": 1, "score": 0, "last_activity_date": 1461328527, "creation_date": 1461143212, "last_edit_date": 1461328283, "question_id": 36738888, "link": "https://stackoverflow.com/questions/36738888/how-to-dismiss-popups-with-selenium-webdriver-in-ruby", "title": "How to dismiss popups with Selenium Webdriver in Ruby", "body": "<p>I am getting popups like this...</p>\n\n<p><a href=\"https://i.stack.imgur.com/IgSJk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IgSJk.png\" alt=\"enter image description here\"></a></p>\n\n<p>...or like this...</p>\n\n<p><a href=\"https://i.stack.imgur.com/JIGP3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JIGP3.png\" alt=\"enter image description here\"></a></p>\n\n<p>...with my Selenium Automation tests I am running remotely on SauceLabs. I tried many ways of disabling them or dismissing them, but nothing seems to work. I tried adding a setting to my capabilities:</p>\n\n<pre><code>autoAcceptAlerts: true\n</code></pre>\n\n<p>I also tried switching to alert with the driver itself:</p>\n\n<pre><code>def click css_selector\n  begin\n    browser.find_element(:css, css_selector).click if rendered? css_selector\n  rescue Selenium::WebDriver::Error::UnknownError\n    browser.switch_to.alert.accept\n    click css_selector\n  end\nend\n</code></pre>\n\n<p>But nothing seems to work. I am sure someone had to deal with something like this before, any luck solving this issue, preferably \"cross-browser\"?</p>\n\n<p>Thanks...</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "database-connection", "mysql2"], "comments": [{"owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "edited": false, "score": 0, "creation_date": 1461142927, "post_id": 36738482, "comment_id": 61059931, "body": "Is this a previously existing database?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1461143475, "post_id": 36738482, "comment_id": 61060338, "body": "I don&#39;t think your connection configuration has anything to do with the <code>nil</code> ID problem. What does your model look like? What about the schema? You should also remove the defaults if you&#39;re not using them."}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1461145827, "post_id": 36738482, "comment_id": 61062146, "body": "was my information helpful?"}], "answers": [{"tags": [], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "is_accepted": false, "score": 1, "last_activity_date": 1511932066, "last_edit_date": 1511932066, "creation_date": 1461145594, "answer_id": 36739920, "question_id": 36738482, "link": "https://stackoverflow.com/questions/36738482/how-to-connect-from-mysql-to-ruby-on-rails-using-database-yml-file-properly/36739920#36739920", "title": "How to connect from MySQL to Ruby on rails using database.yml file properly?", "body": "<p>Firstly you need to install the gem. Install the latest gem in my case I have given the latest version <br></p>\n\n<pre><code>gem 'mysql2','~&gt; 0.3.20'\n</code></pre>\n\n<p><br>\nThen you need to configure your database.yml file like this<br></p>\n\n<pre><code># SQLite version 3.x\n#   gem install sqlite3\n#\n#   Ensure the SQLite 3 gem is defined in your Gemfile\n#   gem 'sqlite3'\n#\ndefault: &amp;default\n  adapter: mysql2\n  pool: 5\n  timeout: 5000\n  username: username\n  password: password\n\ndevelopment:\n  &lt;&lt;: *default\n  database: database/development\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  &lt;&lt;: *default\n  database: test/development\n\nproduction:\n  &lt;&lt;: *default\n  database: db/production\n</code></pre>\n\n<p><br>\nThen create the database using <strong>rake db:create</strong> or <strong>rails db:create</strong> and then you can use database both development and test.</p>\n"}, {"comments": [{"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1461217254, "post_id": 36747444, "comment_id": 61099946, "body": "so if your problem is resolved then atleast correct my answer by giving me points"}], "tags": [], "owner": {"reputation": 11, "user_id": 6229016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb2f3c94117e5abcf1313032de6f13c3?s=128&d=identicon&r=PG&f=1", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/6229016/alvaro"}, "is_accepted": false, "score": 0, "last_activity_date": 1461163594, "creation_date": 1461163594, "answer_id": 36747444, "question_id": 36738482, "link": "https://stackoverflow.com/questions/36738482/how-to-connect-from-mysql-to-ruby-on-rails-using-database-yml-file-properly/36747444#36747444", "title": "How to connect from MySQL to Ruby on rails using database.yml file properly?", "body": "<p>At last, i can migrate properly from mysql to ActiveRecords, thanks you all. The connection between both with the database.yml was properly constructed, the problem came from the database in mysql.</p>\n\n<p>In mysql, i have a complete database, but i need to migrate only tables with subquery, the problem is that the new tables don\u00b4t inherit properly the primary key or the foreign key, because the tables are created from thats subquerys directly, i show you how: </p>\n\n<p>This is an image, with a query whit colums from table user: show columns from users, from the first database:</p>\n\n<p><a href=\"http://i.stack.imgur.com/lHNHs.png\" rel=\"nofollow\">Correct Table from Users</a></p>\n\n<p>An this, is an image taken from the new user tables, generated directly from a subquery against the first user table: </p>\n\n<p><a href=\"http://i.stack.imgur.com/VRWpq.png\" rel=\"nofollow\">Incorrect Table from Users</a></p>\n\n<p>As you can see, only inherit the types and limits of all the atributes, but don\u00b4t inherit nothing more</p>\n\n<p>For resolve it, instead of use a subquery, i create a new table respecting the foreign key and constract, and then, add the new rows using a INSERT INTO clausule. </p>\n\n<p>Thanks you all. </p>\n"}], "owner": {"reputation": 11, "user_id": 6229016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb2f3c94117e5abcf1313032de6f13c3?s=128&d=identicon&r=PG&f=1", "display_name": "Alvaro", "link": "https://stackoverflow.com/users/6229016/alvaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2013, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1511932066, "creation_date": 1461142167, "last_edit_date": 1463465033, "question_id": 36738482, "link": "https://stackoverflow.com/questions/36738482/how-to-connect-from-mysql-to-ruby-on-rails-using-database-yml-file-properly", "title": "How to connect from MySQL to Ruby on rails using database.yml file properly?", "body": "<p>I have a problem with the connection between MySQL and Ruby on rails.</p>\n\n<p>I have a database in MySQL, and I need to migrate it to ActiveRecord in Ruby on rails. To do that, I have to change the database.yml file in my ruby on rails project, like this: </p>\n\n<pre><code># SQLite version 3.x\n#   gem install sqlite3\n#\n#   Ensure the SQLite 3 gem is defined in your Gemfile\n#   gem 'sqlite3'\n#\ndefault: &amp;default\n  adapter: sqlite3\n  pool: 5\n  timeout: 5000\n\ndevelopment:\n  adapter: mysql2\n  database: ********\n  username: ******\n  password: ******\n  host: *******\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  &lt;&lt;: *default\n  database: db/test.sqlite3\n\nproduction:\n  &lt;&lt;: *default\n  database: db/production.sqlite3\n</code></pre>\n\n<p>Obviously, the <code>*</code> characters are information I don\u00b4t need to show, but it's properly constructed, and the connection is established as usual.</p>\n\n<p>The problem comes in Ruby on rails console. The migration isn't run properly, and all the IDs are null, regardless of the table I need to migrate. For example, I take this from a table: </p>\n\n<p><img src=\"https://i.stack.imgur.com/phePX.png\" alt=\"ID_NILL\"></p>\n\n<p>All the ID are null, in any table, so I can't, for example, list the last User I introduced in the database, because I would need to do a Order by with the ID. In the Gemfile, I have the gem <code>mysql2</code>.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "if-statement", "search"], "comments": [{"owner": {"reputation": 463, "user_id": 3843336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b8a7279e051247d33122d045a461aa7?s=128&d=identicon&r=PG&f=1", "display_name": "ollaollu", "link": "https://stackoverflow.com/users/3843336/ollaollu"}, "edited": false, "score": 0, "creation_date": 1461152443, "post_id": 36738425, "comment_id": 61066679, "body": "so you want to search if <code>params[:id]</code> is present and display your index if it is not? Which of the index methods do you want to integrate or do you want both indexes to be able to search? I&#39;m guessing the two indexes match two different pages in your scenario."}, {"owner": {"reputation": 169, "user_id": 5928950, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SEKTO.jpg?s=128&g=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/5928950/kelvin"}, "reply_to_user": {"reputation": 463, "user_id": 3843336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b8a7279e051247d33122d045a461aa7?s=128&d=identicon&r=PG&f=1", "display_name": "ollaollu", "link": "https://stackoverflow.com/users/3843336/ollaollu"}, "edited": false, "score": 0, "creation_date": 1461155721, "post_id": 36738425, "comment_id": 61069125, "body": "@ollaollu, By default I want to display the index page and there I give a search box, after which the search results should be displayed in the same index page. I want to integrate index_orderSummary with its respective search functionality."}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 5928950, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SEKTO.jpg?s=128&g=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/5928950/kelvin"}, "edited": false, "score": 0, "creation_date": 1461213558, "post_id": 36748984, "comment_id": 61098669, "body": "Thank you. I think ur answer will work. But could u explain me more clearly please. I am just a beginner. Do i want to create a views for def order_summary and def issue?? Why return statements? Please explain.."}, {"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "reply_to_user": {"reputation": 169, "user_id": 5928950, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SEKTO.jpg?s=128&g=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/5928950/kelvin"}, "edited": false, "score": 0, "creation_date": 1461230809, "post_id": 36748984, "comment_id": 61108668, "body": "You don&#39;t need views for def order_summary and def issue. These are just typical methods used by def index_orderSummary and def index_issues in order to retrieve a list of order summaries and issues from your database. I put them in methods so that you can do this data retrieval simply by calling the method, rather than writing out the same lines of code more than once. The aim is to write DRY code (Don&#39;t repeat yourself). I used return statements because these methods MUST return a collection of order summaries or issues."}, {"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "reply_to_user": {"reputation": 169, "user_id": 5928950, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SEKTO.jpg?s=128&g=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/5928950/kelvin"}, "edited": false, "score": 0, "creation_date": 1461231024, "post_id": 36748984, "comment_id": 61108836, "body": "See this line in the code for example: order_summary.search(params[:search]). Here I am calling def order_summary and it will return the order_summaries by performing the where operation in the method. It then returns the results back to the index method and applies .search(params[:search])"}, {"owner": {"reputation": 169, "user_id": 5928950, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SEKTO.jpg?s=128&g=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/5928950/kelvin"}, "edited": false, "score": 0, "creation_date": 1461240938, "post_id": 36748984, "comment_id": 61115971, "body": "Thank you @hypern. But pagination for search not working."}, {"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "reply_to_user": {"reputation": 169, "user_id": 5928950, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SEKTO.jpg?s=128&g=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/5928950/kelvin"}, "edited": false, "score": 0, "creation_date": 1461243760, "post_id": 36748984, "comment_id": 61118228, "body": "Its difficult to tell why without knowing what the search method does."}, {"owner": {"reputation": 169, "user_id": 5928950, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SEKTO.jpg?s=128&g=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/5928950/kelvin"}, "edited": false, "score": 0, "creation_date": 1461300418, "post_id": 36748984, "comment_id": 61145416, "body": "Search method searches from the listed index and display the result in the same index page. Now what happens is, It is rendering the pagination with correct count. But when I click on the second page, It actually goes to the second page of the actual index page. not sure what is happening."}, {"owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "reply_to_user": {"reputation": 169, "user_id": 5928950, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SEKTO.jpg?s=128&g=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/5928950/kelvin"}, "edited": false, "score": 0, "creation_date": 1461313677, "post_id": 36748984, "comment_id": 61152382, "body": "Are you attempting to paginate more than one data collection? If so, you can define the page name for each data collection. Otherwise when you click page two, are the search params persisting? If they are not, it would explain why the data collection returns to the &#39;actual&#39; page index."}], "tags": [], "owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "is_accepted": true, "score": 0, "last_activity_date": 1461167256, "creation_date": 1461167256, "answer_id": 36748984, "question_id": 36738425, "link": "https://stackoverflow.com/questions/36738425/smplifying-my-nested-if-statement-in-rubyonrails/36748984#36748984", "title": "Smplifying my nested if statement in RubyOnRails", "body": "<p>I think the way to go about this is to provide a reusable way to return the order summaries and the issues in the default case (without a search), and then applying search filters on top of the base results. To do that, I would define methods to retrieve the default cases, so that they can be reused in the different sections of the if-else statements. Usually, if you have lots of nested if statements, you can clean it up by creating methods. It would look roughly something like this:</p>\n\n<pre><code>def index_orderSummary\n  if params[:id] = \"search-order\"\n    @order_summary = order_summary.search(params[:search])\n      .paginate(page: params[:page]).per_page(5).order('order_no ASC')\n  else\n    @order_summary = order_summary\n      .paginate(page: params[:page]).per_page(10).order(\"order_no ASC\")\n  end\nend\n\ndef index_issues\n  @user = User.find(session[:user_id]).name\n  if params[:id] = \"search-issue\"\n    @issue= issue.search(params[:search])\n      .paginate(page: params[:page]).per_page(10).order(\"issue_slip_no ASC\")\n  else\n      @issue = issue.paginate(page: params[:page], per_page: 10).order(\"issue_slip_no ASC\")\n  end\nend\n\ndef order_summary\n  if Date.today.month&gt;=4\n    return OrderSummary.where(:created_at=&gt;(\"#{Time.now.year}-04-01\")..(\"#{Time.now.year+1}-03-31\"))\n  else\n    return OrderSummary.where(:created_at=&gt;(\"#{Time.now.year-1}-04-01\")..(\"#{Time.now.year}-03-31\"))\n  end\nend\n\ndef issue\n  if Date.today.month&gt;=4\n    return Issue.where(:created_at=&gt;(\"#{Time.now.year}-04-01\")..(\"#{Time.now.year+1}-03-31\"))\n  else\n    return Issue.where(:created_at=&gt;(\"#{Time.now.year-1}-04-01\")..(\"#{Time.now.year}-03-31\"))\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3032, "user_id": 1095300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cf670606f735ddde27e87e1f63c9410?s=128&d=identicon&r=PG", "display_name": "Marc Lainez", "link": "https://stackoverflow.com/users/1095300/marc-lainez"}, "is_accepted": false, "score": 0, "last_activity_date": 1461181952, "last_edit_date": 1461181952, "creation_date": 1461180780, "answer_id": 36753458, "question_id": 36738425, "link": "https://stackoverflow.com/questions/36738425/smplifying-my-nested-if-statement-in-rubyonrails/36753458#36753458", "title": "Smplifying my nested if statement in RubyOnRails", "body": "<p><strong>You can split in two controllers</strong></p>\n\n<p>It seems you're trying to return two different resources through the same controller, which is never a good idea nor good practice. I would at least split the controller actions and create two separate routes. It's cleaner.</p>\n\n<pre><code>class OrderSummariesController &lt; ApplicationController\n  def index\n    # your code for finding order summaries\n  end\nend\n\nclass IssuesController &lt; ApplicationController\n  def index\n    # your code for finding issues\n  end\nend\n</code></pre>\n\n<p>You could then use the same view template to show the results if that's why you were doing all in the same controller initially. But I would advise separating also the templates, reusing the common parts in partials.</p>\n\n<p><strong>You need it to be in the same controller</strong></p>\n\n<p>If for any reason you <em>absolutely</em> have to use the same controller action, for instance if your search bar has a dropdown that lets you choose which kind of results to show, then I'd move all that logic in a PORO to deal with the logic, like this:</p>\n\n<pre><code>class SearchResultsFactory\n  def self.search_for_type type, query, page\n    self.send(type.underscore, query, page)\n  end\n\n  def self.search_order query, page\n    # your code for finding order summaries\n  end\n\n  def self.search_issue query, page\n    # your code for finding issues\n  end\nend\n</code></pre>\n\n<p>And then in your controller you'd just have to do:</p>\n\n<pre><code>def index\n  @results = SearchResultsService.search_for_type(params[:id], params[:search], params[:page])\nend\n</code></pre>\n\n<p>It's cleaner and gives you more flexibility to add more types of elements to search, just add a method named after the type you're searching and it will be supported out of the box.</p>\n"}], "owner": {"reputation": 169, "user_id": 5928950, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/SEKTO.jpg?s=128&g=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/5928950/kelvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 36748984, "answer_count": 2, "score": 0, "last_activity_date": 1461181952, "creation_date": 1461141991, "last_edit_date": 1461143048, "question_id": 36738425, "link": "https://stackoverflow.com/questions/36738425/smplifying-my-nested-if-statement-in-rubyonrails", "title": "Smplifying my nested if statement in RubyOnRails", "body": "<p>I have trouble in building nested if statements. I have an index page in which I show records based on some condition. My controller code for that is,</p>\n\n<pre><code>def index_orderSummary\n  if Date.today.month&gt;=4\n    @order_summary = OrderSummary.where(:created_at=&gt;(\"#{Time.now.year}-04-01\")..(\"#{Time.now.year+1}-03-31\"))\n  else\n    @order_summary = OrderSummary.where(:created_at=&gt;(\"#{Time.now.year-1}-04-01\")..(\"#{Time.now.year}-03-31\"))\n  end\n  @order_summary = @order_summary.paginate(page: params[:page]).per_page(10).order(\"order_no ASC\")\nend\n\ndef index_issues\n    @user = User.new\n    @user = User.find(session[:user_id]).name\n    if Date.today.month&gt;=4\n      @issue = Issue.where(:created_at=&gt;(\"#{Time.now.year}-04-01\")..(\"#{Time.now.year+1}-03-31\"))\n    else\n      @issue = Issue.where(:created_at=&gt;(\"#{Time.now.year-1}-04-01\")..(\"#{Time.now.year}-03-31\"))\n    end\n    @issue = @issue.paginate(page: params[:page], per_page: 10).order(\"issue_slip_no ASC\")\n  end\n</code></pre>\n\n<p>I have used a search box for which I have written the following method\nin the controller.</p>\n\n<pre><code>def search\n  if params[:id] == \"search-order\" then\n    @order_summary = OrderSummary.where(:created_at=&gt;(\"#{Time.now.year}-04-01\")..(\"#{Time.now.year+1}-03-31\")).search(params[:search])\n    @order_summary = @order_summary.paginate(page: params[:page]).per_page(5).order('order_no ASC')\n    render :action =&gt; :index_orderSummary\n  elsif params[:id] == \"search-issue\" then\n    @issue = Issue.where(:created_at=&gt;(\"#{Time.now.year}-04-01\")..(\"#{Time.now.year+1}-03-31\")).search(params[:search])\n    @issue = @issue.paginate(page: params[:page]).per_page(10).order(\"issue_slip_no ASC\")\n    render :action =&gt; :index_issues\n  end\nend\n</code></pre>\n\n<p>now what all I need is, I want to integrate both my search and index\nmethods.</p>\n\n<p>My index methods already having an if else statement., now i want to\ncheck if params comes from search then I want to display the searched\nresults in the index. How do I achieve that? Pls intimate, if my\nquestion is not clear..</p>\n\n<p>Kindly please help and\ncorrect me.\nThanks in advance.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "coffeescript"], "owner": {"reputation": 76, "user_id": 2704360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a74b4b1d0423640d853ef16da0bfc67d?s=128&d=identicon&r=PG&f=1", "display_name": "Howardsun", "link": "https://stackoverflow.com/users/2704360/howardsun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1461141748, "creation_date": 1461141748, "last_edit_date": 1495535313, "question_id": 36738350, "link": "https://stackoverflow.com/questions/36738350/coffeescript-javascript-works-only-first-time-for-pageload-and-ready-event-and", "title": "Coffeescript/Javascript works only first time for page:load and ready event and it doesn&#39;t work after refreshing page in Ruby on rails", "body": "<p>I had created my coffeescript file to execute a JQuery plug-in: <a href=\"http://kenwheeler.github.io/slick/\" rel=\"nofollow noreferrer\">slick</a>  for demonstrating information through carousel in a project built by Ruby on Rails 4. The coffeescript file only works when the page finishing first load and continue to works. But it doesn't work as I expected after I pressing key combination: command+R of browsers to force the page to refresh. What I expect for them is to do carousel as usual just like what they do before I pressing the key combination.  </p>\n\n<p>I put slick directory, which is a JQuery plugin, under vendor/assets directory and include it in app/assets/javascripts/application.js and app/assets/stylesheets/application.css .  </p>\n\n<p>In <strong>app/assets/javascripts/application.js</strong>,</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require jquery.turbolinks\n//= require slick.min\n//= require d3\n//= require c3\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>In <strong>app/assets/stylesheets/application.css</strong>,</p>\n\n<pre><code>*= require_tree .\n*= require slick\n*= require slick-theme\n*= require c3\n*= require_self\n</code></pre>\n\n<p>I have installed above gems through adding them to Gemfile and command:bundle install. Stylesheets and javascript files are combined to application.css and application.js respectively. They are also placed at header and end of body of a web page respectively.</p>\n\n<p><br /><br>\nBelow content is part of my coffeescript file.   </p>\n\n<pre><code>$('.slideshow').slick\n  slidesToShow: 9\n  slidesToScroll: 9\n  rows: 2\n  variableWidth: true\n  autoplay: true\n  autoplaySpeed: 2000\n</code></pre>\n\n<p>Rendering of content of my web page are placed at <a href=\"https://jsfiddle.net/ssregpaq/11/#\" rel=\"nofollow noreferrer\" title=\"Slideshow\">jsFiddle</a> . Sorry, I can't put the code at stackoverflow because it will make this question length over limit of 30000 characters.   </p>\n\n<p><br /></p>\n\n<p>I have tried solutions described in <a href=\"https://stackoverflow.com/questions/34003738/jquery-code-works-the-first-time-and-the-second-time-works-only-after-page-refre\">jQuery code works the first time and the second time works only after page refresh</a>, and change my coffeescript file to below forms:\nThese solutions don't work for me.</p>\n\n<p>Form 1:</p>\n\n<pre><code>slide_show = -&gt;\n  $('.slideshow').slick\n    slidesToShow: 9\n    slidesToScroll: 9\n    rows: 2\n    variableWidth: true\n    autoplay: true\n    autoplaySpeed: 2000\n$(document).on('ready page:load', slide_show())\n</code></pre>\n\n<p>Form 2:</p>\n\n<pre><code>slide_show = -&gt;\n  $('.slideshow').slick\n    slidesToShow: 9\n    slidesToScroll: 9\n    rows: 2\n    variableWidth: true\n    autoplay: true\n    autoplaySpeed: 2000\n$(document).ready(slide_show())\n</code></pre>\n\n<p><br />\nI found the event of slideshow class inside my web page, which was bound by Form 1 and Form2, <strong>disappeared</strong> after refreshing the page. The event was bound to that class actually when the page finishing its first-time load and ready. </p>\n\n<p><br />\nMy environment are Ruby 2.3 and Rails 4.2.5.1 with turbolinks 2.5.3 enabled. I want to know why it doesn't work after the page has been refreshed and how to make it work as normal. </p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 463, "user_id": 3843336, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b8a7279e051247d33122d045a461aa7?s=128&d=identicon&r=PG&f=1", "display_name": "ollaollu", "link": "https://stackoverflow.com/users/3843336/ollaollu"}, "is_accepted": false, "score": 0, "last_activity_date": 1461153318, "creation_date": 1461153318, "answer_id": 36743008, "question_id": 36738278, "link": "https://stackoverflow.com/questions/36738278/installing-ruby-gems-error-operation-nor-permitted-usr-bin-sprockets/36743008#36743008", "title": "Installing ruby gems Error: operation nor permitted - usr/bin/sprockets", "body": "<p>You don't have permission to write to the gemfile directory of your the ruby version that comes bundled with your OS. What you'll have to do is manage your ruby versions using either <code>rbenv</code> or <code>rvm</code>. I will recommend <code>rbenv</code> and you can follow the guide on these links <a href=\"https://gorails.com/setup/osx/10.11-el-capitan\" rel=\"nofollow\">rbenv rails install Mac OS</a> or <a href=\"https://gorails.com/setup/ubuntu/14.04\" rel=\"nofollow\">rbenv rails install Ubuntu</a></p>\n"}], "owner": {"reputation": 1, "user_id": 6225408, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201396376589255/picture?type=large", "display_name": "Gabriella ", "link": "https://stackoverflow.com/users/6225408/gabriella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461153318, "creation_date": 1461141575, "last_edit_date": 1461141665, "question_id": 36738278, "link": "https://stackoverflow.com/questions/36738278/installing-ruby-gems-error-operation-nor-permitted-usr-bin-sprockets", "title": "Installing ruby gems Error: operation nor permitted - usr/bin/sprockets", "body": "<p>Im trying to get rubymine to work but i always keep getting this error \"operation not permitted\" </p>\n\n<pre><code>Gabriellas-MBP:~ GabriellaKampe$ gem install rails\nERROR:  While executing gem ... (Gem::FilePermissionError)\n    You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.\nGabriellas-MBP:~ GabriellaKampe$  sudo gem install rails\nPassword:\nERROR:  While executing gem ... (Errno::EPERM)\n    Operation not permitted - /usr/bin/sprockets\nGabriellas-MBP:~ GabriellaKampe$ \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1461142189, "post_id": 36738267, "comment_id": 61059318, "body": "did you try <code>@card= Barby::Code128B.new(emp_code)</code>  <code>puts @card.to_ascii</code>"}, {"owner": {"reputation": 119, "user_id": 5883397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c652808cfca2eb51a61b5cbeceb23b11?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/5883397/asha"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1461142311, "post_id": 36738267, "comment_id": 61059406, "body": "I am writing code with EAN13"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1461142339, "post_id": 36738267, "comment_id": 61059425, "body": "yes I know I say did you try ? what is <code>emp_code</code> ? is it only throwing error for EAN13 that I have to know"}, {"owner": {"reputation": 119, "user_id": 5883397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c652808cfca2eb51a61b5cbeceb23b11?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/5883397/asha"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1461142435, "post_id": 36738267, "comment_id": 61059513, "body": "Can you help me with that?"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1461142479, "post_id": 36738267, "comment_id": 61059555, "body": "go to <code>rails console</code> and try <code>@card= Barby::Code128B.new(1234)</code> <code>puts @card.to_ascii</code>"}, {"owner": {"reputation": 119, "user_id": 5883397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c652808cfca2eb51a61b5cbeceb23b11?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/5883397/asha"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1461142482, "post_id": 36738267, "comment_id": 61059557, "body": "emp_code I have defined in private."}, {"owner": {"reputation": 119, "user_id": 5883397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c652808cfca2eb51a61b5cbeceb23b11?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/5883397/asha"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1461142678, "post_id": 36738267, "comment_id": 61059721, "body": "undefined method `code128B&#39; for Barby:Module"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1461142763, "post_id": 36738267, "comment_id": 61059782, "body": "did you    <code>require &#39;barby&#39; require &#39;barby&#47;barcode&#47;code_128&#39; require &#39;barby&#47;outputter&#47;ascii_outputter&#39;</code> then <code>@card= Barby::Code128B.new(1234)</code> and <code>puts @card.to_ascii</code>"}, {"owner": {"reputation": 119, "user_id": 5883397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c652808cfca2eb51a61b5cbeceb23b11?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/5883397/asha"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1461142877, "post_id": 36738267, "comment_id": 61059888, "body": "its code_128 or code_128B?"}, {"owner": {"reputation": 119, "user_id": 5883397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c652808cfca2eb51a61b5cbeceb23b11?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/5883397/asha"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1461143407, "post_id": 36738267, "comment_id": 61060288, "body": "Can anyone tell me how to create a barcode"}], "owner": {"reputation": 119, "user_id": 5883397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c652808cfca2eb51a61b5cbeceb23b11?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/5883397/asha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1461143123, "creation_date": 1461141552, "last_edit_date": 1461143123, "question_id": 36738267, "link": "https://stackoverflow.com/questions/36738267/how-to-create-a-barcode-of-an-employee-id-card", "title": "how to create a barcode of an employee ID card", "body": "<p>gemfile consists of <code>gem 'barby'</code></p>\n\n<p>I have written a code in my controller:  </p>\n\n<pre><code>require 'barby'    \nrequire 'barby/barcode/ean_13'    \nrequire 'barby/outputter/ascii_outputter'    \nrequire 'barby/outputter/html_outputter'\n\ndef show\n  @card = Barby::EAN13.new(emp_code)\n  @card_for_html = Barby::HtmlOutputter.new(@card)\nend\n\nprivate\n  def emp_code\n    @emp_code = \"#{@user.date_of_joining} + #{@user.full_name} + #{@user.id}\"\n  end\n</code></pre>\n\n<p>In my view I have written:</p>\n\n<pre><code>&lt;%@card.ascii=@card.to_ascii%&gt; &lt;/p&gt;    \n&lt;%=raw @card_path_for_html.to_html%&gt;   &lt;/p&gt;\n</code></pre>\n\n<p>Which produces the error <code>undefined method 'to_ascii'</code></p>\n\n<p>Can anyone help me out of this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 1, "creation_date": 1461141758, "post_id": 36737860, "comment_id": 61058999, "body": "Please show the product_display method and the error message you&#39;re receiving. From your code it looks like you are accessing a class method called product_display. Also, in future please make an effort to format your code better, you&#39;ll get more responses if your code is easy to read."}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "reply_to_user": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1461142281, "post_id": 36737860, "comment_id": 61059383, "body": "@margo hi, there is no error at all in console. I think <code>&lt;%= product.product_display %&gt;</code> in view is not recognise the <code>product_display</code>. After inspecting, the <code>src</code> field is empty"}, {"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1461142787, "post_id": 36737860, "comment_id": 61059811, "body": "Can you confirm in the console that the product instance has a product display attribute?"}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "reply_to_user": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1461142918, "post_id": 36737860, "comment_id": 61059922, "body": "@margo how can i confirm this via console (sorry I am bit new in using rails in console)? btw, Is not all product instance can access the product model attributes?"}, {"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1461143159, "post_id": 36737860, "comment_id": 61060111, "body": "Of course, Product instances can access their attributes. Open a terminal window, run rails console. Then you can manually run your code e.g. Product.first or products = Product.public_active.order(&#39;random()&#39;).limit(6).includes(:p&zwnj;&#8203;roduct_attachments).&zwnj;&#8203;includes(:product_re&zwnj;&#8203;views); products.each{|p| puts p.product_display}. Its a great way to test and debug."}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "reply_to_user": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1461143465, "post_id": 36737860, "comment_id": 61060326, "body": "@margo ok I just tried, and I get nil but if I tried as follow <code>products = Product.first</code> and then <code>products.product_attachments[0].attachment.medium.url</code> do return result, which is url of image"}, {"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 1, "creation_date": 1461143787, "post_id": 36737860, "comment_id": 61060564, "body": "What do you think that tells you? Have you created products in your d/b with product_display attributes? Do some more debugging in the console. You can run any ruby code in the console as well as have access to your rails app. (btw to quit the console, type exit.)"}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "reply_to_user": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1461144084, "post_id": 36737860, "comment_id": 61060757, "body": "@margo <code>NoMethodError: undefined method </code>display_product&#39; for #&lt;Product:0x007fe7155f4200&gt;` How can this possible? Since <code>display_product</code> is <code>attr_accessor</code>"}, {"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "reply_to_user": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1461144444, "post_id": 36737860, "comment_id": 61061039, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/109645/discussion-between-margo-and-d3bug3r\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "is_accepted": true, "score": 1, "last_activity_date": 1461146642, "creation_date": 1461146642, "answer_id": 36740385, "question_id": 36737860, "link": "https://stackoverflow.com/questions/36737860/rails-attr-accessor-from-different-controller/36740385#36740385", "title": "Rails attr_accessor from different controller", "body": "<p>In the set_extra_attributes and set_cover_photo methods, self is not required as these are instance methods referencing instance attributes.</p>\n\n<pre><code>def set_extra_attributes\n  product_overview_url = product_attachments[0].attachment.medium.url\nend\n\ndef set_cover_photo\n  product_display = product_attachments.find(cover_id).attachment.url\nend\n</code></pre>\n\n<p>end</p>\n\n<p>You need to ensure that the product_display is set to something.</p>\n"}], "owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 36740385, "answer_count": 1, "score": 0, "last_activity_date": 1461146642, "creation_date": 1461140503, "last_edit_date": 1461141682, "question_id": 36737860, "link": "https://stackoverflow.com/questions/36737860/rails-attr-accessor-from-different-controller", "title": "Rails attr_accessor from different controller", "body": "<p>Following were my home_controller:</p>\n\n<pre><code>class HomeController &lt; ApplicationController\n  def index\n   @products = Product.public_active.order('random()').limit(6).includes(:product_attachments).includes(:product_reviews)\n  end\nend\n</code></pre>\n\n<p>and my product.rb model </p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  has_many :product_attachments, dependent: :destroy\n  accepts_nested_attributes_for :product_attachments, allow_destroy: true\n  attr_accessor :product_display\n  attr_accessor :product_overview_url\n\n  def set_extra_attributes\n    self.product_overview_url = self.product_attachments[0].attachment.medium.url\n  end\n\n  def set_cover_photo\n    self.product_display = self.product_attachments.find(self.cover_id).attachment.url\n    end\n  end\n</code></pre>\n\n<p>In my home views <code>app/views/home/_product_section.html.erb</code>, I cant access the <code>product_display</code></p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;% @products.each do |product| %&gt;\n    &lt;div class=\"img-holder\"&gt;\n      &lt;a href=\"&lt;%= product_path product %&gt;\"&gt;\n        &lt;img src=\"&lt;%= product.product_display %&gt;\" alt=\"&lt;%= product.name %&gt;\" style=\"width: 100%;\"&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>But I can access <code>self.product_overview_url</code> from my <code>app/view/products/index.html.erb</code> page template. Is there relationship I need to make so <code>home_controller</code> can access <code>product.rb</code> model? Thanks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 533, "user_id": 5843330, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UZVxS.png?s=128&g=1", "display_name": "boydenhartog", "link": "https://stackoverflow.com/users/5843330/boydenhartog"}, "edited": false, "score": 0, "creation_date": 1461147431, "post_id": 36738245, "comment_id": 61063314, "body": "I&#39;m getting undefined method <code>variant_sku&#39; for #&lt;Product:0x007f9b398d0820&gt; on the @variant_skus line. I changed the line to:  @variant_skus = @products.map(&amp;:variant_skus).uniq  and then the line did not throw an error anymore. The next line is though:     undefined method </code>master_sku&#39; for #&lt;VariantSku::ActiveRecord_Associations_CollectionProxy:0x00&zwnj;&#8203;7f9b34722c80&gt;  Any ideas?"}, {"owner": {"reputation": 2375, "user_id": 6151945, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FeM2V.jpg?s=128&g=1", "display_name": "lei liu", "link": "https://stackoverflow.com/users/6151945/lei-liu"}, "reply_to_user": {"reputation": 533, "user_id": 5843330, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UZVxS.png?s=128&g=1", "display_name": "boydenhartog", "link": "https://stackoverflow.com/users/5843330/boydenhartog"}, "edited": false, "score": 0, "creation_date": 1461152287, "post_id": 36738245, "comment_id": 61066568, "body": "@stoerebink is my answer helpful for you? if it is, please accept it as the answer."}], "tags": [], "owner": {"reputation": 2375, "user_id": 6151945, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FeM2V.jpg?s=128&g=1", "display_name": "lei liu", "link": "https://stackoverflow.com/users/6151945/lei-liu"}, "is_accepted": true, "score": 1, "last_activity_date": 1461152204, "last_edit_date": 1461152204, "creation_date": 1461141500, "answer_id": 36738245, "question_id": 36737523, "link": "https://stackoverflow.com/questions/36737523/most-efficient-way-to-collect-associated-records/36738245#36738245", "title": "Most efficient way to collect associated records?", "body": "<p>Try:</p>\n\n<pre><code>  when \"stores\"\n    @products = @store.products.includes(variant_skus: {master_sku: :vendor_skus})\n    @variant_skus = @products.map(&amp;:variant_skus).uniq\n    @master_skus = @variant_skus.map(&amp;:master_sku).uniq\n    @vendor_skus = @master_skus.map(&amp;:vendor_skus).flatten.uniq\n  end\n</code></pre>\n"}], "owner": {"reputation": 533, "user_id": 5843330, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/UZVxS.png?s=128&g=1", "display_name": "boydenhartog", "link": "https://stackoverflow.com/users/5843330/boydenhartog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 36738245, "answer_count": 1, "score": 0, "last_activity_date": 1461153500, "creation_date": 1461139524, "last_edit_date": 1461153500, "question_id": 36737523, "link": "https://stackoverflow.com/questions/36737523/most-efficient-way-to-collect-associated-records", "title": "Most efficient way to collect associated records?", "body": "<p>For my table \"Stores\" I want to show some tabs with related records. There are 4 related tables, products, variant_skus, master_skus and vendor_skus. The relations are as follows:</p>\n\n<pre><code>store has_many :products\nproduct has_many :variant_skus\nvariant_sku belongs_to :master_sku\nmaster_sku has_many :variant_skus, :vendor_skus\nvendor_sku belongs_to :master_sku\n</code></pre>\n\n<p>Now I've created a concern that I can include in a controller that collects the records from these tables for me, but whenever I open a store page it takes quite long to load, probably because of all the iterations. Is iterating through the associations to collect the records faster than just taking the IDs and querying the database? Or is there an other more efficient way of collecting the records?</p>\n\n<pre><code>when \"stores\"\n  @store.products.each do |product|\n    @products.push(product)\n  end\n\n  @products.each do |product|\n    product.variant_skus.each do |variant_sku|\n      @variant_skus.push(variant_sku)\n      @master_skus.push(variant_sku.master_sku)\n    end\n  end\n  @variant_skus = @variant_skus.uniq\n  @master_skus = @master_skus.uniq\n\n  @master_skus.each do |master_sku|\n    @vendor_skus.push(master_sku.vendor_skus)\n  end\n  @vendor_skus = @vendor_skus.uniq\nend\n</code></pre>\n\n<p>Update: it works like:</p>\n\n<pre><code>@products = @store.products.includes(variant_skus: {master_sku: :vendor_skus})\n@variant_skus = @products.map(&amp;:variant_skus).flatten.uniq\n@master_skus = @variant_skus.each.map(&amp;:master_sku).uniq\n@vendor_skus = @master_skus.map(&amp;:vendor_skus).flatten.uniq\n</code></pre>\n"}, {"tags": ["ruby", "file", "recursion", "permissions"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6181477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/004b081363aac98b4fbf3c2a3a3fc768?s=128&d=identicon&r=PG&f=1", "display_name": "adamjth", "link": "https://stackoverflow.com/users/6181477/adamjth"}, "edited": false, "score": 0, "creation_date": 1461341796, "post_id": 36739946, "comment_id": 61171601, "body": "Thanks that worked for me.   In the meantime I gone and written a definition  to do this but Dir.glob saves quite a few lines of code!"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 1, "last_activity_date": 1461146692, "last_edit_date": 1495541257, "creation_date": 1461145677, "answer_id": 36739946, "question_id": 36737432, "link": "https://stackoverflow.com/questions/36737432/how-to-recursively-change-file-permissions-only-in-a-ruby-script/36739946#36739946", "title": "How to recursively change file permissions only in a ruby script", "body": "<p>You could do something like below - this will change permissions of the list of files matched by <code>Dir.glob</code>.</p>\n\n<pre><code>FileUtils.chmod 0400, Dir.glob('/path/to/dir/**/*')\n</code></pre>\n\n<p>As mentioned in <a href=\"https://stackoverflow.com/a/2370811/794242\">this thread</a>, </p>\n\n<pre><code>Dir.glob(\"**/*/\") # will return list of all directories\nDir.glob(\"**/*\") # will return list of all files\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6181477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/004b081363aac98b4fbf3c2a3a3fc768?s=128&d=identicon&r=PG&f=1", "display_name": "adamjth", "link": "https://stackoverflow.com/users/6181477/adamjth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1319, "favorite_count": 0, "accepted_answer_id": 36739946, "answer_count": 1, "score": 2, "last_activity_date": 1461146692, "creation_date": 1461139232, "question_id": 36737432, "link": "https://stackoverflow.com/questions/36737432/how-to-recursively-change-file-permissions-only-in-a-ruby-script", "title": "How to recursively change file permissions only in a ruby script", "body": "<p>I have been using the function FileUtils.chmod_R to recursively change files and directories permissions under a given path but now want to change only the file permissions and leave the directories as they are.  Looking at the man page for this function I can't see how to do this and I would prefer not to do this with a bash script. Please can someone tell me if this is possible with the FileUtils.chmod_R function or would I have to write additional code to iterate over every file that exist under a given path (recursive) and then FileUtils.chmod it to the desire permission?   I am a ruby newbie so please point me someplace if I am asking anything obvious</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1461139155, "post_id": 36737244, "comment_id": 61057219, "body": "Show please what have you tried so far."}, {"owner": {"reputation": 165, "user_id": 4608351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ca15ba43fede05475e652e101c3a72?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Cindy", "link": "https://stackoverflow.com/users/4608351/nguyen-cindy"}, "edited": false, "score": 0, "creation_date": 1461139366, "post_id": 36737244, "comment_id": 61057369, "body": "You can define a validate function on your model like <a href=\"http://stackoverflow.com/questions/1836000/how-to-validate-a-models-date-attribute-against-a-specific-range-evaluated-at\">this</a>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1461143970, "post_id": 36737244, "comment_id": 61060683, "body": "What&#39;s that <code>r.</code> after your dates?"}, {"owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1461148122, "post_id": 36737244, "comment_id": 61063845, "body": "@Stefan it&#39;s polish translation of year."}], "answers": [{"tags": [], "owner": {"reputation": 1368, "user_id": 1599940, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/7KpaW.png?s=128&g=1", "display_name": "rootatdarkstar", "link": "https://stackoverflow.com/users/1599940/rootatdarkstar"}, "is_accepted": true, "score": 1, "last_activity_date": 1461168368, "creation_date": 1461168368, "answer_id": 36749393, "question_id": 36737244, "link": "https://stackoverflow.com/questions/36737244/validation-date-in-specific-range/36749393#36749393", "title": "Validation date in specific range", "body": "<p>Have you try <code>validates_timeliness</code> gem?\n<a href=\"https://github.com/adzap/validates_timeliness\" rel=\"nofollow\">https://github.com/adzap/validates_timeliness</a></p>\n\n<p>It can simply validate date ranges.</p>\n\n<pre><code>validates_date :start_on, after: lambda { (DateTime.now - 1.month }, before: lambda { (DateTime.now + 1.month }\n</code></pre>\n"}], "owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 36749393, "answer_count": 1, "score": 0, "last_activity_date": 1461168368, "creation_date": 1461138733, "last_edit_date": 1461148160, "question_id": 36737244, "link": "https://stackoverflow.com/questions/36737244/validation-date-in-specific-range", "title": "Validation date in specific range", "body": "<p>Hi I have model <strong>bought_details</strong> and <strong>entry_types</strong>.</p>\n\n<pre><code># Table name: bought_details\n#\n#  id            :integer          not null, primary key\n#  bought_data   :date             not null\n#  end_on        :date             not null\n#  entry_type_id :integer\n#  person_id     :integer\n#  start_on      :date\n#  cost          :decimal(5, 2)    not null\n\n# Table name: entry_types\n#\n#  id           :integer          not null, primary key\n#  kind         :string           not null\n#  kind_details :string           not null\n#  description  :text\n#  price        :decimal(5, 2)    not null\n</code></pre>\n\n<p>What I want to have:</p>\n\n<p>If I register new purchase e.g. person with id 1 buy pass(entry_type id: 1) for 1 month(start_on: 20.04.2016 end_on: 20.05.2016). </p>\n\n<p>I want create validation to protect buy new pass(entry_type kind == \"Pass\", in a database I have few entry type object with kind equals \"Pass\"), when start_on or end_on is between 20.04.2016 and 20.05.2016r. with simply alert \"You already have valid pass\". </p>\n\n<p>How can I resolve my problem?\nThanks in advance.</p>\n"}, {"tags": ["ruby", "jobs", "dashing"], "answers": [{"tags": [], "owner": {"reputation": 18703, "user_id": 3951782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5zDXr.png?s=128&g=1", "display_name": "sudo bangbang", "link": "https://stackoverflow.com/users/3951782/sudo-bangbang"}, "is_accepted": false, "score": 1, "last_activity_date": 1461510012, "last_edit_date": 1461510012, "creation_date": 1461439487, "answer_id": 36815384, "question_id": 36736784, "link": "https://stackoverflow.com/questions/36736784/how-to-populate-data-in-dashing-dashboard/36815384#36815384", "title": "How to populate data in dashing dashboard", "body": "<p>Just create a ruby script in <code>jobs</code> directory<br>\n<strong>jobs/us-map.rb</strong></p>\n\n<pre><code>SCHEDULER.every '2s' do\n  us_map_details = {\n    \"points\": [\n      {\n        \"id\": 12345,\n        \"lat\": 35,\n        \"lon\": -70,\n        \"type\": \"red\"\n      },\n      {\n        \"id\": 678910,\n        \"lat\": 35,\n        \"lon\": -70,\n        \"type\": \"green\"\n      }\n    ]\n  }\n  # You can change the hash us_map_details to add/change/remove points\n  another_point = {\"id\": 1729, \"lat\": 30, \"lon\": -60, \"type\": \"red\" }\n  us_map_details[:points] &lt;&lt; another_point\n\n  send_event('usmap', us_map_details) # This is where data is sent to dashboard\nend  \n</code></pre>\n\n<p>The <code>SCHEDULER</code> object is an instance of <a href=\"https://github.com/jmettraux/rufus-scheduler\" rel=\"nofollow\">rufus scheduler</a>. You can populate data by populating <code>us_map_details</code> hash</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6730796, "user_type": "registered", "profile_image": "https://graph.facebook.com/847587638708233/picture?type=large", "display_name": "Karatyus", "link": "https://stackoverflow.com/users/6730796/karatyus"}, "is_accepted": false, "score": 0, "last_activity_date": 1471894819, "last_edit_date": 1471894819, "creation_date": 1471875419, "answer_id": 39081905, "question_id": 36736784, "link": "https://stackoverflow.com/questions/36736784/how-to-populate-data-in-dashing-dashboard/39081905#39081905", "title": "How to populate data in dashing dashboard", "body": "<p>You have two way to populate a widget.</p>\n\n<p>first is the Scheduler job. You can create one with the command </p>\n\n<pre><code>dashing generate job [Name_Of_Job]\n</code></pre>\n\n<p>Secondly, you can send data to the widget by using the <code>curl</code> command:</p>\n\n<pre><code>curl -d '{ \"auth_token\": \"YOUR_AUTH_TOKEN\", \"text\": \"Hey, Look what I can do!\" }' http://&lt;%=request.host%&gt;:&lt;%=request.port%&gt;/widgets/welcome\n</code></pre>\n"}], "owner": {"reputation": 3477, "user_id": 3086014, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/57546bbe5bf3b7280671f12df859599f?s=128&d=identicon&r=PG&f=1", "display_name": "user3086014", "link": "https://stackoverflow.com/users/3086014/user3086014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1471894819, "creation_date": 1461137451, "last_edit_date": 1461446419, "question_id": 36736784, "link": "https://stackoverflow.com/questions/36736784/how-to-populate-data-in-dashing-dashboard", "title": "How to populate data in dashing dashboard", "body": "<p>I have created a dashboard using us map widgets in dashing using following git link:</p>\n\n<p><a href=\"https://gist.github.com/jrunge/acd98d3d550911bdc4b5\" rel=\"nofollow\">https://gist.github.com/jrunge/acd98d3d550911bdc4b5</a></p>\n\n<p>Can anybody tell me how to create the custom job to populate data to be sent to widget? The JSON data follows this format </p>\n\n<pre><code>{\n  \"points\": [\n    {\n      \"id\": 12345,\n      \"lat\": 35,\n      \"lon\": -70,\n      \"type\": \"red\"\n    },\n    {\n      \"id\": 678910,\n      \"lat\": 35,\n      \"lon\": -70,\n      \"type\": \"green\"\n    }\n  ]\n}\n</code></pre>\n\n<p>Do I need to create a shell script or command to populate the data.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "countries"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1461907561, "post_id": 36736195, "comment_id": 61420392, "body": "The reason someone has downvoted your question is most probably because questions asking for library recommendations are generally considered off-topic for SO as stated by the <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here? (list item 4) in the help center</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1107, "user_id": 2434464, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Q3hER.jpg?s=128&g=1", "display_name": "yozzz", "link": "https://stackoverflow.com/users/2434464/yozzz"}, "is_accepted": false, "score": 6, "last_activity_date": 1461832943, "last_edit_date": 1461832943, "creation_date": 1461188546, "answer_id": 36755745, "question_id": 36736195, "link": "https://stackoverflow.com/questions/36736195/how-to-get-list-of-all-countries-and-cities-in-rails/36755745#36755745", "title": "How to get list of all countries and cities in rails?", "body": "<p>You can try jQuery plugin - <a href=\"http://bootstrapformhelpers.com/state/#example4\" rel=\"nofollow\">bootstrap state picker</a></p>\n\n<p>After including plugin inside your application</p>\n\n<p>You can use it like this(example from <a href=\"http://bootstrapformhelpers.com/state\" rel=\"nofollow\">http://bootstrapformhelpers.com/state</a>):</p>\n\n<pre><code>&lt;select id=\"countries_states1\" class=\"form-control bfh-countries\" data-country=\"US\"&gt;&lt;/select&gt;\n\n&lt;select class=\"form-control bfh-states\" data-country=\"countries_states1\"&gt;&lt;/select&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6175355"}, "edited": false, "score": 0, "creation_date": 1461734514, "post_id": 36878626, "comment_id": 61327349, "body": "Any link related to that?"}], "tags": [], "owner": {"reputation": 1011, "user_id": 5282616, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb253109f60df40f46cb8d80621074ce?s=128&d=identicon&r=PG&f=1", "display_name": "Dharmesh Rupani", "link": "https://stackoverflow.com/users/5282616/dharmesh-rupani"}, "is_accepted": false, "score": 5, "last_activity_date": 1461719745, "creation_date": 1461719745, "answer_id": 36878626, "question_id": 36736195, "link": "https://stackoverflow.com/questions/36736195/how-to-get-list-of-all-countries-and-cities-in-rails/36878626#36878626", "title": "How to get list of all countries and cities in rails?", "body": "<p>You can use country picker jQuery plugins of Bootstrap as following:</p>\n\n<pre><code>&lt;select class=\"form-control bfh-countries\" data-country=\"US\"&gt;&lt;/select&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1461865363, "post_id": 36886364, "comment_id": 61405267, "body": "I can&#39;t claim to know whether the sites I mentioned use external services, nor whether or not all external services are thorough and accurate...but it&#39;s certainly something to question and verify."}, {"owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "edited": false, "score": 0, "creation_date": 1491938370, "post_id": 36886364, "comment_id": 73772068, "body": "Yes, maybe only use a list for countries, as that doesn&#39;t change often, but I intend to use the list of cities and states for auto complete in a free form text box."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 5, "last_activity_date": 1461759322, "last_edit_date": 1461759322, "creation_date": 1461750889, "answer_id": 36886364, "question_id": 36736195, "link": "https://stackoverflow.com/questions/36736195/how-to-get-list-of-all-countries-and-cities-in-rails/36886364#36886364", "title": "How to get list of all countries and cities in rails?", "body": "<p>My recommendation is that unless you can be 100% certain the list is <em>accurate and complete</em> (and I'm skeptical that that is possible), <strong><em>don't do it</em></strong>.</p>\n\n<p>I've registered on web sites in Singapore and other places where I had to select from a dropdown list of cities that did not include my town (and many other) correct towns (I live in the USA).  I was forced to select an incorrect value pretty far away because the list was quite incomplete and it would not permit me to not select anything.</p>\n\n<p>At the very least, if you want to provide choices, permit the user to enter a value not included in those choices.</p>\n"}, {"comments": [{"owner": {"reputation": 2401, "user_id": 2208682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fac145ccb00fbe71298cf953cbd43b?s=128&d=identicon&r=PG", "display_name": "GoGoCarl", "link": "https://stackoverflow.com/users/2208682/gogocarl"}, "edited": false, "score": 0, "creation_date": 1461884748, "post_id": 36917595, "comment_id": 61414815, "body": "I&#39;m not sure why this answer hasn&#39;t been upvoted more.  None of the other answers seem to address what the OP asked for -- a list of <i>cities</i>, not states or countries..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6175355"}, "reply_to_user": {"reputation": 2401, "user_id": 2208682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fac145ccb00fbe71298cf953cbd43b?s=128&d=identicon&r=PG", "display_name": "GoGoCarl", "link": "https://stackoverflow.com/users/2208682/gogocarl"}, "edited": false, "score": 0, "creation_date": 1461903526, "post_id": 36917595, "comment_id": 61419140, "body": "@GoGoCarl on other hand people downvote my question and I don&#39;t know whats wrong in it"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 26, "last_activity_date": 1461918660, "last_edit_date": 1461918660, "creation_date": 1461853526, "answer_id": 36917595, "question_id": 36736195, "link": "https://stackoverflow.com/questions/36736195/how-to-get-list-of-all-countries-and-cities-in-rails/36917595#36917595", "title": "How to get list of all countries and cities in rails?", "body": "<p>Use the aptly named <a href=\"https://github.com/loureirorg/city-state\">city-state gem</a>.</p>\n\n<hr>\n\n<p>As seen by the README, you can do:</p>\n\n<pre><code>CS.cities(state, country)\n</code></pre>\n\n<p>If you want all cities in a given country, regardless of state, you could do:</p>\n\n<pre><code>CS.states(country).keys.flat_map { |state| CS.cities(state, country) }\n</code></pre>\n\n<p>To list all countries:</p>\n\n<pre><code>CS.countries\n</code></pre>\n\n<hr>\n\n<p>The cool thing is that it uses data from <a href=\"https://www.maxmind.com/en/home\">MaxMind</a> so you can be sure the list will be up to date. To refresh your list, you can run:</p>\n\n<pre><code>CS.update\n</code></pre>\n\n<hr>\n\n<p>The only drawback is that it requires rails (active support specifically) to run, but this isn't a problem in your case.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6175355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9800, "favorite_count": 5, "accepted_answer_id": 36917595, "answer_count": 4, "score": 13, "last_activity_date": 1461918660, "creation_date": 1461135791, "question_id": 36736195, "link": "https://stackoverflow.com/questions/36736195/how-to-get-list-of-all-countries-and-cities-in-rails", "title": "How to get list of all countries and cities in rails?", "body": "<p>Is there a country and city gem where user will be able to select a country and based on selected country he will select a city?</p>\n\n<p>I get multiple solution but they all support states not cities</p>\n\n<pre><code>gem 'country_select'\ngem 'countries'\ngem 'carmen-rails'\n</code></pre>\n\n<p>I want a list of all countries on dropdown and when I select any country then all cities of country will appear in cities dropdown. Is this possible through any gem?</p>\n"}, {"tags": ["ruby", "proc", "rescue"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 2, "creation_date": 1461136306, "post_id": 36736090, "comment_id": 61055317, "body": "Can you produce a runnable sample that reproduces this?"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1461138240, "post_id": 36736604, "comment_id": 61056618, "body": "Or - even more directly - pass a block, i.e. <code>safe { m1 }</code>"}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1461136957, "creation_date": 1461136957, "answer_id": 36736604, "question_id": 36736090, "link": "https://stackoverflow.com/questions/36736090/ruby-proc-call-catching-exceptions/36736604#36736604", "title": "Ruby - Proc.call - catching exceptions", "body": "<p>Are you sure your sample is correct?</p>\n\n<pre><code>def safe(proc)\n  begin\n    proc.call\n  rescue\n    puts \"error\"\n  end\nend\n\ndef m1\n  puts \"m1\"\n  raise\nend\n\ndef m2\n  puts \"m2\"\nend\n\nsafe(Proc.new { m1 })\nsafe(Proc.new { m2 })\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>m1\nerror\nm2\n</code></pre>\n\n<p>for me.</p>\n\n<p>Btw: you do not need to wrap the call in a Proc, you can pass the <code>Method</code> object directly.</p>\n\n<pre><code>safe(method(:m1))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1461139315, "post_id": 36737340, "comment_id": 61057330, "body": "<code>=&gt;</code> isn&#39;t an operator at all. Do you mean <code>&lt;=</code> or <code>&gt;=</code>?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1461221707, "post_id": 36737340, "comment_id": 61102203, "body": "Doesn&#39;t it count as <i>operator</i>? In any case, it is used inside a hash, to separate key from values. <code>{ &#39;key&#39; =&gt; &#39;value&#39;,....}</code>. I shouldn&#39;t have called it operator; it&#39;s more like punctuation mark, but one which requires something on both sides..."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1461223889, "post_id": 36737340, "comment_id": 61103680, "body": "I believe the correct term is <i>punctuator</i>. Anyway as you now know it has two different meanings."}, {"owner": {"reputation": 518, "user_id": 4044403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f9bcecd67c3d35bcf5d2ee7bbd15f?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Castellanos", "link": "https://stackoverflow.com/users/4044403/jose-castellanos"}, "edited": false, "score": 0, "creation_date": 1556760547, "post_id": 36737340, "comment_id": 98542010, "body": "I don&#39;t think you are supposed to rescue from Exception as it&#39;s reserved for things like Interrupt when we hit Ctrl-C, and NoMemoryError. In the side note it would correctly rescue from standard error, not exception. Ref: <a href=\"https://thoughtbot.com/blog/rescue-standarderror-not-exception\" rel=\"nofollow noreferrer\">thoughtbot.com/blog/rescue-standarderror-not-exception</a>"}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": -1, "last_activity_date": 1461138961, "creation_date": 1461138961, "answer_id": 36737340, "question_id": 36736090, "link": "https://stackoverflow.com/questions/36736090/ruby-proc-call-catching-exceptions/36737340#36737340", "title": "Ruby - Proc.call - catching exceptions", "body": "<p>I think it should be</p>\n\n<pre><code>rescue Exception =&gt; e\n</code></pre>\n\n<p>The default for rescue is not to catch <strong>all</strong> errors, but only those which are derived from <code>StandardError</code>.</p>\n\n<p>Side note: I was not aware that the syntax</p>\n\n<pre><code>rescue =&gt; e\n</code></pre>\n\n<p>is valid. <code>=&gt;</code> is a binary operator, and you don't provide a left argument for this.</p>\n"}], "owner": {"reputation": 21, "user_id": 3608006, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EFj1G.jpg?s=128&g=1", "display_name": "Stejzyy", "link": "https://stackoverflow.com/users/3608006/stejzyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1053, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1461146415, "creation_date": 1461135534, "question_id": 36736090, "link": "https://stackoverflow.com/questions/36736090/ruby-proc-call-catching-exceptions", "title": "Ruby - Proc.call - catching exceptions", "body": "<p>I have problem with catching exceptions and errors from calling <code>Proc object</code>. See my code:</p>\n\n<pre><code>def method1\n  .. do something ...\nend\n\ndef method2\n.. do something ...\nend\n\ndef run_method_safely(proc_obj)\n  begin\n    proc_obj.call\n  rescue =&gt; e\n    puts \"Error man!\"\n    ... do something ...\n  end\nend\n</code></pre>\n\n<p>I have few methods (here I have just <code>method1, method2</code> but in code i have much more methods) which are run by method <code>run_method_safely</code>. I'm doing that this way because I don't want to have every method in begin-rescue block so I wrote method what takes care about that. See:</p>\n\n<pre><code>.\nrun_method_safely(Proc.new { method1 })\nrun_method_safely(Proc.new { method2 })\n.\n</code></pre>\n\n<p>The problem is when <code>proc_obj.call</code> is executed with error (method is missing, Webdriver - no such element found or whatever) <strong>rescue block is not executed, program is running like nothing happened</strong>.</p>\n\n<p>Does anybody know how to catch errors and exceptions from Proc code?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 2015, "user_id": 743043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4093dee3302769ae64e412853c54ae62?s=128&d=identicon&r=PG", "display_name": "techie_28", "link": "https://stackoverflow.com/users/743043/techie-28"}, "edited": false, "score": 0, "creation_date": 1461131433, "post_id": 36734854, "comment_id": 61052703, "body": "What does your browser console say about this?"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "reply_to_user": {"reputation": 2015, "user_id": 743043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4093dee3302769ae64e412853c54ae62?s=128&d=identicon&r=PG", "display_name": "techie_28", "link": "https://stackoverflow.com/users/743043/techie-28"}, "edited": false, "score": 0, "creation_date": 1461131954, "post_id": 36734854, "comment_id": 61052909, "body": "Uncaught TypeError: Cannot set property &#39;circleProgress&#39; of undefined"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "reply_to_user": {"reputation": 2015, "user_id": 743043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4093dee3302769ae64e412853c54ae62?s=128&d=identicon&r=PG", "display_name": "techie_28", "link": "https://stackoverflow.com/users/743043/techie-28"}, "edited": false, "score": 0, "creation_date": 1461132168, "post_id": 36734854, "comment_id": 61052999, "body": "In safari the error message is: TypeError: undefined is not an object (evaluating &#39;$&#39;) (anonymous function)circle-progress.self-f67ec54c54a06da27d11cda862036a&zwnj;&#8203;058792eadc8ef982df2e&zwnj;&#8203;7c0a1682536c31.js:8"}, {"owner": {"reputation": 2375, "user_id": 6151945, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FeM2V.jpg?s=128&g=1", "display_name": "lei liu", "link": "https://stackoverflow.com/users/6151945/lei-liu"}, "edited": false, "score": 0, "creation_date": 1461132174, "post_id": 36734854, "comment_id": 61053002, "body": "could you post you application.js, I guess the problem caused by the js importing order."}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1461132260, "post_id": 36734854, "comment_id": 61053045, "body": "added - i also added a link to the problem im having that led me to this  question"}, {"owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "edited": false, "score": 0, "creation_date": 1461132849, "post_id": 36734854, "comment_id": 61053343, "body": "which vendor file has the $.circleProgress line in it? Also, try 1) moving bootstrap files after jquery and jquery_ujs 2) Put bootstrap-slider above require-tree line. Also, do you by any chance precompile your assets?"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1461133069, "post_id": 36734854, "comment_id": 61053448, "body": "Hi, I moved circle-progress from vendor assets to app assets (and removed the require circle-progress.js line from application.js. I thought that might help solve the problem but it didn&#39;t. Yes, I precompile assets."}, {"owner": {"reputation": 2015, "user_id": 743043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4093dee3302769ae64e412853c54ae62?s=128&d=identicon&r=PG", "display_name": "techie_28", "link": "https://stackoverflow.com/users/743043/techie-28"}, "edited": false, "score": 0, "creation_date": 1461134093, "post_id": 36734854, "comment_id": 61054028, "body": "If all the vendor files are only jQuery Library files &amp; not custom coded I think running a noConflict mode after their inclusion will help?"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1461134120, "post_id": 36734854, "comment_id": 61054039, "body": "they are custom coded"}, {"owner": {"reputation": 2015, "user_id": 743043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4093dee3302769ae64e412853c54ae62?s=128&d=identicon&r=PG", "display_name": "techie_28", "link": "https://stackoverflow.com/users/743043/techie-28"}, "edited": false, "score": 0, "creation_date": 1461134702, "post_id": 36734854, "comment_id": 61054357, "body": "<code>jquery.properload</code>,<code>parallax</code> seems to be libraries."}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1461134807, "post_id": 36734854, "comment_id": 61054415, "body": "i don&#39;t know what that comment means. Several of the files in the bootstrap theme are custom code"}, {"owner": {"reputation": 2015, "user_id": 743043, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4093dee3302769ae64e412853c54ae62?s=128&d=identicon&r=PG", "display_name": "techie_28", "link": "https://stackoverflow.com/users/743043/techie-28"}, "edited": false, "score": 0, "creation_date": 1461135519, "post_id": 36734854, "comment_id": 61054817, "body": "I mean if your jQuery files are the custom coded or just the library files like stated in above comment."}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1461135591, "post_id": 36734854, "comment_id": 61054859, "body": "I don&#39;t know how to tell. It appears to me that someone has written the code for the bootstrap theme. I have copied that into my assets file. I&#39;m now struggling to make it work. I wonder if I have to rename .js files to coffee.js?"}, {"owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "edited": false, "score": 0, "creation_date": 1461622174, "post_id": 36734854, "comment_id": 61272888, "body": "I&#39;m not sure how much this will help but, particularly with strange bootstrap problems, I opt to use the bootstrap CDN instead - avoids any strange compiling issues: <a href=\"http://getbootstrap.com/getting-started/\" rel=\"nofollow noreferrer\">getbootstrap.com/getting-started</a>"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1461624166, "post_id": 36734854, "comment_id": 61273587, "body": "Hi - I tried, but I get the same set of errors when I use the CDN instead of the gem. Thanks anyway"}], "answers": [{"comments": [{"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1461661238, "post_id": 36860004, "comment_id": 61287913, "body": "Hi Paul - no I&#39;m not including the files in my app/assets/javascripts folder in my application.js (otherwise than by require tree). The list you see is just files that came as vendor/javascripts with a bootstrap theme (which are all stored in my vendor assets folder). The &#39;findgoodcontent&#39; error comes from a chrome plugin. That error doesn&#39;t show in the safari or firefox code inspectors. Thanks for the tip regarding minified files. Unfortunately the bootstrap theme only provides minified files, so I&#39;m a bit stuck with that one."}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1461661338, "post_id": 36860004, "comment_id": 61287991, "body": "Currently the errors list is down to the list I copied under the update header in my post. Apart from the &#39;find goodcontent&#39; error, what those files all have in common is that they are stored in my app/assets/javascripts folder and are all saved as &#39;.js&#39; extensions and do not include &#39;no conflict&#39; language.I can&#39;t figure it out beyond that."}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1461661378, "post_id": 36860004, "comment_id": 61288017, "body": "This bit of your answer is the bit that contains a clue: Errors like $ is not a function mean that those files depend on jQuery, but the jQuery $ object is not defined. If you are using noConflict, as someone suggested in the comments, you should stop, because you do want $ to be the jQuery object."}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1461661445, "post_id": 36860004, "comment_id": 61288065, "body": "The trouble is, following the advice in this post: <a href=\"http://stackoverflow.com/questions/36853833/rails-4-jquery-initially-hide-then-toggle-conflicts-with-javascript\" title=\"rails 4 jquery initially hide then toggle conflicts with javascript\">stackoverflow.com/questions/36853833/&hellip;</a>, I added no conflict language. It gets rid of the console error, but the hide/show function itself does not work."}, {"owner": {"reputation": 1308, "user_id": 2212311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0SVoC.jpg?s=128&g=1", "display_name": "shlajin", "link": "https://stackoverflow.com/users/2212311/shlajin"}, "edited": false, "score": 1, "creation_date": 1461828497, "post_id": 36860004, "comment_id": 61379091, "body": "&quot;The problem is that you&#39;re already including them one-by-one above. So they are getting included twice.&quot; \u2013 wrong, they have a built-in protection from that. Even if you specify file twice explicitly sprockets will ignore the second include."}, {"owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "reply_to_user": {"reputation": 1308, "user_id": 2212311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0SVoC.jpg?s=128&g=1", "display_name": "shlajin", "link": "https://stackoverflow.com/users/2212311/shlajin"}, "edited": false, "score": 0, "creation_date": 1461880073, "post_id": 36860004, "comment_id": 61413236, "body": "Good to know @chocking_u. Thanks!"}], "tags": [], "owner": {"reputation": 20458, "user_id": 122087, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/431c64e3e3fd0c892ad2a7e4150cf63e?s=128&d=identicon&r=PG", "display_name": "Paul A Jungwirth", "link": "https://stackoverflow.com/users/122087/paul-a-jungwirth"}, "is_accepted": false, "score": 4, "last_activity_date": 1461661278, "last_edit_date": 1495535345, "creation_date": 1461660977, "answer_id": 36860004, "question_id": 36734854, "link": "https://stackoverflow.com/questions/36734854/rails-4-jquery-conflicts-with-javascript/36860004#36860004", "title": "Rails 4 jQuery conflicts with javascript", "body": "<p>It sounds like you have a lot of cleanup to do. Is this your first Rails app? If so I'm curious why you have so many JS files already. I would cut back your list to just a few, fix the problems that remain, and slowly start adding things and fixing problems as you go. That would be my general strategy. For each bug, go slow and double-check that you really understand the cause, before you slash here and there hoping for a fix.</p>\n\n<p>Here are some tips for specific bugs I see:</p>\n\n<p>This line will include all the <code>.js</code> files in <code>app/assets/javascripts</code>:</p>\n\n<pre><code>//= require_tree .\n</code></pre>\n\n<p>The problem is that you're already including them one-by-one above. So they are getting included twice. That's why you're getting warnings like <code>'findGoodContent' has already been declared</code>. I know it is kind of nice to use <code>require_tree</code> (though I don't love it), so if you want to keep that, consider moving all the 3rd-party JS files out of <code>app/assets/javascripts</code> and into <code>vendor/assets/javascripts</code>. You can still <code>require</code> them in your <code>application.js</code>, but they won't get repeated by <code>require_tree</code>.</p>\n\n<p>The 404 errors for things like <code>grayscale.svg</code> and <code>flaticon.woff</code> and other image/font assets are because you don't have those files in <code>app/assets</code> (or <code>vendor/assets</code>). Or if you do, you should make sure your JS/CSS files and view files refer to them with <code>&lt;%= asset_path \"grayscale.svg\" %&gt;</code> so that when Rails mangles their path you are still loading them from the right place. Read about <a href=\"https://stackoverflow.com/questions/21147005/difference-between-sass-rails-helpers-image-url-and-asset-url-in-rails-4-0\">image_url and friends</a> and make sure you understand how they work. By default, the Asset Pipeline serves unmangled names in development and mangled names in production, so things might work right up until you push it all live!</p>\n\n<p>Also, if you include <code>&lt;%= foo %&gt;</code> tags in a CSS file or JS file, then you need to add an <code>.erb</code> extension to that file, so that Rails knows to process those tags. That's why you're getting a 404 error trying to load this:</p>\n\n<pre><code>http://localhost:3000/assets/%3C%=%20asset_path('random.jpg')%20%%3E\n</code></pre>\n\n<p>In one of your files, probably a CSS file, you're doing something like this:</p>\n\n<pre><code>background-image: url(\"&lt;%= asset_path('random.jpg') %&gt;\");\n</code></pre>\n\n<p>But the file needs an <code>.erb</code> extension: <code>blah.css.erb</code> or <code>blah.scss.erb</code> or whatever.</p>\n\n<p>Errors like <code>$ is not a function</code> mean that those files depend on jQuery, but the jQuery <code>$</code> object is not defined. If you are using <code>noConflict</code>, as someone suggested in the comments, you should stop, because you <em>do</em> want <code>$</code> to be the jQuery object.</p>\n\n<p>Good luck! If you are feeling overwhelmed, I would really start with cutting out as many of the JS <code>require</code> lines as possible, and tackle the bugs one at a time.</p>\n\n<p>Also, I would re-order the <code>require</code> lines so that dependencies are at the top (e.g. jquery), and things that rely on them are lower.</p>\n\n<p>Oh one more thing, not really a bug: I would avoid putting already-minified files (like <code>hammer.min.js</code>) into your repository. The Asset Pipeline knows how to minify. So check in the unminified version, so that if you have to read the source code, you can.</p>\n"}, {"tags": [], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "is_accepted": true, "score": 1, "last_activity_date": 1461990009, "creation_date": 1461990009, "answer_id": 36950668, "question_id": 36734854, "link": "https://stackoverflow.com/questions/36734854/rails-4-jquery-conflicts-with-javascript/36950668#36950668", "title": "Rails 4 jQuery conflicts with javascript", "body": "<p>I put this post out as a job on upwork.</p>\n\n<p>The solution is complex, but in case it helps others to understand what's gone wrong:</p>\n\n<ol>\n<li><p>some gems require jQuery features. That can clash with the general inclusion of jQuery in application.js - I had some specific code written to manage specific conflicts.</p></li>\n<li><p>in application.js, you need to list all the requirements in order, so that dependencies are below the js file that depends on them. Its difficult to know which file depends on what. I never would have figured this out alone</p></li>\n<li><p>my rake assets:precompile call puts compiled assets in the public folder. I overrode this because it was causing conflicts with other calls (especially when files are updated).</p></li>\n</ol>\n\n<p>There is no real help in this answer for anyone trying to learn. I didn't exactly learn how to solve these problems myself, but I did find an expert on upwork, who was able to help so that I could move on.</p>\n\n<p>I'm afraid this is one of those messy problems that the blog tutorials don't help with.</p>\n"}, {"comments": [{"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1462053735, "post_id": 36956554, "comment_id": 61478669, "body": "Hi - I tried that, but the problem with this is that  other JS plugins want $, too, so I can&#39;t use noConflict. Thanks anyway for the suggestion"}, {"owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1462206736, "post_id": 36956554, "comment_id": 61528880, "body": "noConflict should remove jQuery&#39;s binding to $... so for jQuery code with noConflict enabled, you&#39;ll have to explicitly call it with &quot;jQuery.&quot; instead of &quot;$.&quot; If its not working you need probably need to call the jQuery noConflict before loading the other library."}], "tags": [], "owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "is_accepted": false, "score": 1, "last_activity_date": 1462206573, "last_edit_date": 1462206573, "creation_date": 1462029091, "answer_id": 36956554, "question_id": 36734854, "link": "https://stackoverflow.com/questions/36734854/rails-4-jquery-conflicts-with-javascript/36956554#36956554", "title": "Rails 4 jQuery conflicts with javascript", "body": "<p>Not sure why no one has posted this but $.something in jQuery is just shorthand for jQuery.something. </p>\n\n<p>The ability to disable this is baked into jQuery </p>\n\n<p><a href=\"https://api.jquery.com/jquery.noconflict/\" rel=\"nofollow\">https://api.jquery.com/jquery.noconflict/</a></p>\n\n<p>Here is an example from their documents</p>\n\n<pre><code>jQuery.noConflict();\n// Do something with jQuery\njQuery( \"div p\" ).hide();\n// Do something with another library's $()\n$( \"content\" ).style.display = \"none\";\n</code></pre>\n\n<p>Essentially it'll be a lot easier to just use \"jQuery\" vs \"$\" in your hand rolled code than change the inherited library. That being said you should submit a issue to the offending library to fix this functionality, similar to how jQuery does it, as jQuery is pretty popular. </p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1149, "favorite_count": 0, "accepted_answer_id": 36950668, "answer_count": 3, "score": 6, "last_activity_date": 1462206573, "creation_date": 1461131364, "last_edit_date": 1495541913, "question_id": 36734854, "link": "https://stackoverflow.com/questions/36734854/rails-4-jquery-conflicts-with-javascript", "title": "Rails 4 jQuery conflicts with javascript", "body": "<p>Im trying to make an app in Rails 4.</p>\n\n<p>I'm struggling. I'm trying to incorporate a bootstrap theme and I'm getting issues with the vendor javascripts and the rest of the code.</p>\n\n<p>I think the problem might have something to do with having jQuery in my application.js and then having vendor .js files which start with a '$' sign:</p>\n\n<pre><code>$.circleProgress = {\n</code></pre>\n\n<p>I've just read this: <a href=\"https://learn.jquery.com/using-jquery-core/avoid-conflicts-other-libraries/\" rel=\"nofollow noreferrer\">https://learn.jquery.com/using-jquery-core/avoid-conflicts-other-libraries/</a></p>\n\n<p>My problem is though that I don't know how to make the changes that make the code safe.</p>\n\n<p>Do I need to do a search for every '$' in the vendor files or otherwise how do i put a safe wrapper on jQuery - especially where it is incorporated through a gem.</p>\n\n<p>Has anyone encountered these problems and figured out a solution? I'd love some help.</p>\n\n<p>Application.js</p>\n\n<pre><code>//= require jquery\n//= require bootstrap-sprockets\n//= require jquery_ujs\n//= require html.sortable\n//= require disqus_rails\n//= require moment\n//= require bootstrap-datetimepicker\n//= require pickers\n//= require main\n//= require hammer.min\n//= require jquery.animate-enhanced.min\n//= require jquery.countTo\n//= require jquery.easing.1.3\n//= require jquery.fitvids\n//= require jquery.magnific-popup.min\n//= require jquery.parallax-1.1.3\n//= require jquery.properload\n//= require jquery.shuffle.modernizr.min\n//= require jquery.sudoSlider.min\n//= require jquery.superslides.min\n//= require masonry.pkgd.min\n//= require rotaterator\n//= require smoothscrolljs\n//= require waypoints.min\n//= require wow.min\n//= require gmaps/google\n//= require chosen-jquery\n//= require cocoon\n//= require imagesloaded.pkgd.min\n//= require isotope.pkgd.min\n//= require jquery.counterup.min\n//= require jquery.pjax\n//= require custom.js\n//= require slider\n//= require underscore\n//= require dependent-fields\n//= require_tree .\n//= require bootstrap-slider\n\n\n$(document).ready(function() {\n    DependentFields.bind()\n});\n</code></pre>\n\n<p>Related problem: <a href=\"https://stackoverflow.com/questions/36684671/rails-4-incorporating-vendor-assets\">Rails 4 - incorporating vendor assets</a></p>\n\n<p><strong>Observation</strong></p>\n\n<p>I've noticed that the console log of errors shows problems with .js files in my app/assets/javascripts folder.</p>\n\n<p>They are the only other files in that folder (aside from application.js). My application.js has 'require_tree' so they will be compiled. But something I think might be conflicting in those files with (perhaps) the inclusion of jQuery in the application.js?</p>\n\n<p>The log shows:</p>\n\n<pre><code>Uncaught SyntaxError: Identifier 'findGoodContent' has already been declared\ncircle-progress.self-f67ec54c54a06da27d11cda862036a058792eadc8ef982df2e7c0a1682536c31.js:9 Uncaught TypeError: Cannot set property 'circleProgress' of undefined\nconversations.self-832ece2867c1701a5202459ab73ecd6432da2a6c833d8822d37025845a0aefcc.js:10 Uncaught TypeError: $ is not a function\norganisations.self-6547f734e3a69b76176dfe5bb194e428c0bc560ad3fb69811dce9c7f8ccb9f4d.js:2 Uncaught TypeError: $ is not a function\nhttp://localhost:3000/assets/%3C%=%20asset_path('random.jpg')%20%%3E Failed to load resource: the server responded with a status of 400 (Bad Request)\nhttp://localhost:3000/profiles/assets/images/grayscale.svg#greyscale Failed to load resource: the server responded with a status of 404 (Not Found)\nhttp://localhost:3000/assets/vendor/assets/fonts/Simple-Line-Icons.woff Failed to load resource: the server responded with a status of 404 (Not Found)\nhttp://localhost:3000/profiles/assets/custom/images/preloader.gif Failed to load resource: the server responded with a status of 404 (Not Found)\nchrome-extension://mkjojgglmmcghgaiknnpgjgldgaocjfd/content/contentScripts/kwift.CHROME.min.js:1384 Uncaught SyntaxError: Identifier 'findGoodContent' has already been declared\nhttp://localhost:3000/assets/flaticon.woff Failed to load resource: the server responded with a status of 404 (Not Found)\nhttp://localhost:3000/assets/vendor/assets/fonts/Simple-Line-Icons.ttf Failed to load resource: the server responded with a status of 404 (Not Found)\nhttp://localhost:3000/assets/flaticon.ttf Failed to load resource: the server responded with a status of 404 (Not Found)\nmain.self-5888479bd3eb03114ce5776dd32cfadf84f1d3a4335043513f8b1606d3ab5f4a.js:316 Uncaught TypeError: dp(...).multipleFilterMasonry is not a function\n</code></pre>\n\n<p>Each of the js folders that are identified as errors are saved as .js files in app/assets/javascripts. </p>\n\n<p>Do I perhaps need to use a different file name (.js.erb / js.coffee)? to make this work. Alternatively, do I need to put script tags around the content of those files?</p>\n\n<p>For example, the first file opens with:</p>\n\n<pre><code>$.circleProgress = {\n    // Default options (you may override them)\n    defaults: {\n        /**\n         * This is the only required option. It should be from 0.0 to 1.0\n         * @type {float}\n         */\n        value: 0,\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I think some part of my problem is to do with the files saved in app/assets/javascripts with \".js\" extensions. Each of them shows in the console errors list as:</p>\n\n<pre><code>kwift.CHROME.min.js:1271Uncaught SyntaxError: Identifier 'findGoodContent' has already been declared\ncircle-progress.self-f67ec54\u2026.js?body=1:9 Uncaught TypeError: Cannot set property 'circleProgress' of undefined(anonymous function) @ circle-progress.self-f67ec54\u2026.js?body=1:9\nconversations.self-832ece2\u2026.js?body=1:10 Uncaught TypeError: $ is not a function(anonymous function) @ conversations.self-832ece2\u2026.js?body=1:10\norganisations.self-6547f73\u2026.js?body=1:2 Uncaught TypeError: $ is not a function(anonymous function) @ organisations.self-6547f73\u2026.js?body=1:2(anonymous function) @ organisations.self-6547f73\u2026.js?body=1:6\nprojects.self-9c019ba\u2026.js?body=1:1 Uncaught TypeError: $ is not a function(anonymous function) @ projects.self-9c019ba\u2026.js?body=1:1\nmain.self-5888479\u2026.js?body=1:316 Uncaught TypeError: dp(...).multipleFilterMasonry is not a functionwindow.onload @ main.self-5888479\u2026.js?body=1:316\nkwift.CHROME.min.js:1271 Uncaught SyntaxError: Identifier 'findGoodContent' has already been declared\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 3810, "user_id": 2542856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9YUxb.jpg?s=128&g=1", "display_name": "Matt C", "link": "https://stackoverflow.com/users/2542856/matt-c"}, "edited": false, "score": 1, "creation_date": 1461128720, "post_id": 36734211, "comment_id": 61051600, "body": "You don&#39;t have to write <code>rank IN (?)</code> for the top one, Rails will generate it for you."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 3810, "user_id": 2542856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9YUxb.jpg?s=128&g=1", "display_name": "Matt C", "link": "https://stackoverflow.com/users/2542856/matt-c"}, "edited": false, "score": 0, "creation_date": 1461129027, "post_id": 36734211, "comment_id": 61051730, "body": "I think, for the first query, that&#39;s still needed. For the 2nd one, you don&#39;t need that. That&#39;s why I did not use <code>IN</code> in the 2nd query, Rails will automatically do that."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 5, "last_activity_date": 1461128476, "creation_date": 1461128476, "answer_id": 36734211, "question_id": 36734189, "link": "https://stackoverflow.com/questions/36734189/correct-way-to-write-where-statement-with-array-of-values/36734211#36734211", "title": "Correct way to write where statement with array of values", "body": "<p>Try this way:</p>\n\n<pre><code>@food_ranks = FoodRank.where(\"user_id = ? AND rank IN (?)\", current_user.id, [0, 1, 2])\n</code></pre>\n\n<p>You can also do:</p>\n\n<pre><code>@food_ranks = FoodRank.where(user_id: current_user.id, rank: [0, 1, 2])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3810, "user_id": 2542856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9YUxb.jpg?s=128&g=1", "display_name": "Matt C", "link": "https://stackoverflow.com/users/2542856/matt-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1461128692, "creation_date": 1461128692, "answer_id": 36734264, "question_id": 36734189, "link": "https://stackoverflow.com/questions/36734189/correct-way-to-write-where-statement-with-array-of-values/36734264#36734264", "title": "Correct way to write where statement with array of values", "body": "<p>The problem is you are passing in an array, and trying to compare rank to that.</p>\n\n<p>Try changing it like so:</p>\n\n<pre><code>FoodRank.where(\"user_id = ?\", current_user.id, rank: [0, 1, 2])\n</code></pre>\n\n<p>Rails will automatically generate the SQL <code>IN</code> statement from the array, so no need to specify that.</p>\n"}], "owner": {"reputation": 73, "user_id": 6171839, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-4L5VftRcKk0/AAAAAAAAAAI/AAAAAAAACGo/3UoIFSJUhnM/photo.jpg?sz=128", "display_name": "Luke Cramer", "link": "https://stackoverflow.com/users/6171839/luke-cramer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 36734211, "answer_count": 2, "score": 2, "last_activity_date": 1461131556, "creation_date": 1461128342, "last_edit_date": 1461131556, "question_id": 36734189, "link": "https://stackoverflow.com/questions/36734189/correct-way-to-write-where-statement-with-array-of-values", "title": "Correct way to write where statement with array of values", "body": "<p>I can't figure out the correct way to write this where statement for my controller in one line.</p>\n\n<p>What am I missing here? </p>\n\n<pre><code>@food_ranks = FoodRank.where(\"user_id = ? AND rank = ?\", current_user.id, [0, 1, 2])\n</code></pre>\n\n<p>Here is my attempt to write it in 3 lines. </p>\n\n<pre><code>@food_ranks = Array.new(FoodRank.where(\"user_id = #{current_user.id} AND rank = 0\"))\n@food_ranks &lt;&lt; FoodRank.where(\"user_id = #{current_user.id} AND rank = 1\")\n@food_ranks &lt;&lt; FoodRank.where(\"user_id = #{current_user.id} AND rank = 2\")\n</code></pre>\n\n<p><code>@food_ranks</code> correctly displays the objects like this. Why wont it let me do something like this now?</p>\n\n<pre><code> @food_rank each do |rank|\n   rank.user_id\n end\n</code></pre>\n\n<p>Is it making <code>@food_ranks</code> literally the where statement? (undefined method)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1216, "user_id": 1724, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9d3aaf576df27743d3abc7f3a7537c49?s=128&d=identicon&r=PG", "display_name": "SamH", "link": "https://stackoverflow.com/users/1724/samh"}, "edited": false, "score": 0, "creation_date": 1461461375, "post_id": 36734885, "comment_id": 61208986, "body": "Mudasobwa, I have played around with this suggestion and not been able to get it to work. I believe memo[:cc] = category should be memo[:cc] = category.category. Also I don&#39;t think it will work because if each of the two users in an iteration has a different category the first new category will be printed and the second user will be outputted under the first user&#39;s category heading. Thanks"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1461131486, "creation_date": 1461131486, "answer_id": 36734885, "question_id": 36734125, "link": "https://stackoverflow.com/questions/36734125/using-each-slice-to-produce-a-table-but-with-sub-headings/36734885#36734885", "title": "Using each_slice to produce a table but with sub headings", "body": "<pre><code>all_users.each_slice(2).with_object({cc: nil}) do |two_users, memo|\n  if category = two_users.detect { |u| u.category != memo[:cc] }\n    # print additional row or do whatever here\n    memo[:cc] = category\n  end\nend\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-detect\" rel=\"nofollow\"><code>Enumerable#detect</code></a> here returns either changed category or <code>nil</code> if there were no changes.</p>\n\n<p><em>Sidenote</em>: Try to <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow\">DRY</a>:</p>\n\n<pre><code>&lt;td&gt;\n  &lt;%= two_users[1].name if two_users[1].present? %&gt;\n&lt;/td&gt;\n</code></pre>\n"}], "owner": {"reputation": 1216, "user_id": 1724, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9d3aaf576df27743d3abc7f3a7537c49?s=128&d=identicon&r=PG", "display_name": "SamH", "link": "https://stackoverflow.com/users/1724/samh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461131486, "creation_date": 1461128021, "question_id": 36734125, "link": "https://stackoverflow.com/questions/36734125/using-each-slice-to-produce-a-table-but-with-sub-headings", "title": "Using each_slice to produce a table but with sub headings", "body": "<p>I am using each_slice to output a two column table.</p>\n\n<p>I would like to insert a title row when an attribute of the elements I am iterating changes.</p>\n\n<p>I have : </p>\n\n<pre><code>all_users = Users.order('category, name asc').all\nall_users.each_slice(2) do |two_users|\n    &lt;tr&gt;\n            &lt;td style=\"text-align:right\"&gt;\n              &lt;%= two_users[0].category + ' - ' + two_users[0].name %&gt;\n            &lt;/td&gt;\n           &lt;% if two_users[1].present? %&gt;\n            &lt;td&gt;\n              &lt;%= two_users[1].category + ' - ' + two_users[1].name %&gt;\n            &lt;/td&gt;\n            &lt;td&gt;\n            &lt;% else %&gt;\n            &lt;td&gt;&lt;/td&gt;\n            &lt;% end %&gt;\n    &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And would like something like : </p>\n\n<pre><code>current_category = ''\nall_users = Users.order('category, name asc').all\nall_users.each_slice(2) do |two_users|\n        &lt;% if two_users[0].category != current_category \n         current_category = two_users[0].category\n    %&gt;\n    &lt;tr&gt;&lt;td colspan=\"2\"&gt;&lt;%= two_users[0].category %&gt;&lt;/td&gt;&lt;/tr&gt;\n    &lt;% end %&gt;\n    &lt;tr&gt;\n            &lt;td style=\"text-align:right\"&gt;\n              &lt;%= two_users[0].name %&gt;\n            &lt;/td&gt;\n           &lt;% if two_users[1].present? %&gt;\n            &lt;td&gt;\n              &lt;%= two_users[1].name %&gt;\n            &lt;/td&gt;\n            &lt;td&gt;\n            &lt;% else %&gt;\n            &lt;td&gt;&lt;/td&gt;\n            &lt;% end %&gt;\n    &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This doesn't work obviously in the case that two_users[1] has a new category.\nI am trying to avoid the additional SQL queries of iterating through each category and requesting\nthe users for each independantly. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 4122, "user_id": 232710, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c7370db37da6a5ac5afb55fa5cd8fb72?s=128&d=identicon&r=PG", "display_name": "Sibevin Wang", "link": "https://stackoverflow.com/users/232710/sibevin-wang"}, "is_accepted": true, "score": 3, "last_activity_date": 1461125374, "creation_date": 1461125374, "answer_id": 36733649, "question_id": 36733594, "link": "https://stackoverflow.com/questions/36733594/rails-showing-failed-conditional-result/36733649#36733649", "title": "Rails showing failed conditional result", "body": "<p><code>params[:id]</code> is a string and <code>@product.cover_id</code> is an integer, you may change them both to string or integer for comparing.</p>\n"}, {"tags": [], "owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "is_accepted": false, "score": 2, "last_activity_date": 1461127996, "creation_date": 1461127996, "answer_id": 36734119, "question_id": 36733594, "link": "https://stackoverflow.com/questions/36733594/rails-showing-failed-conditional-result/36734119#36734119", "title": "Rails showing failed conditional result", "body": "<p>This is a pitfall that I fell into too. I was expecting</p>\n\n<pre><code>params[:something] == true\n</code></pre>\n\n<p>but after carefully inspecting each elements in params with help of <code>binding.pry</code> I tried</p>\n\n<pre><code>params[:something].class\n</code></pre>\n\n<p><strong>And there it was. It printed out <code>string</code>.</strong></p>\n\n<p>And suddenly I was enlightened. That being said, not only integer everything in params is string. </p>\n"}], "owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 36733649, "answer_count": 2, "score": 0, "last_activity_date": 1461132458, "creation_date": 1461124937, "last_edit_date": 1461132458, "question_id": 36733594, "link": "https://stackoverflow.com/questions/36733594/rails-showing-failed-conditional-result", "title": "Rails showing failed conditional result", "body": "<p>Here is my method in controller:</p>\n\n<pre><code>def destroy\n    logger.info \"INCOMING ATTACHMENT #{params[:id]}\"\n    @prod = ProductAttachment.find(params[:id])\n    @product = Product.find(@prod.product_id)\n    if params[:id] == @product.cover_id\n      logger.info \"ATTACHMENT MATCHED\"\n      @prod = ProductAttachment.where(:product_id =&gt; @prod.product_id)\n      logger.info \"ATTACHMENT #{@prod.count}\"\n    else\n      logger.info \"ATTACHMENT NOT MATCHED\"\n\n    end\n    #@product_attachment.destroy\n    respond_to do |format|\n      format.html { redirect_to product_attachments_url, notice: 'Product attachment was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n</code></pre>\n\n<p>Even though my <code>params[:id]</code> is equal to <code>1156</code> and <code>@product.cover_id</code> return <code>1156</code> my conditional loop still print out <code>ATTACHMENT NOT MATCHED</code>. Thanks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 5522798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca03387e0294e139c95113cfdf6a34c5?s=128&d=identicon&r=PG&f=1", "display_name": "tomjohn", "link": "https://stackoverflow.com/users/5522798/tomjohn"}, "edited": false, "score": 0, "creation_date": 1461169536, "post_id": 36736455, "comment_id": 61080286, "body": "I edited the question to show the results for sending the parameters as email and password. I believe this error is coming from the devise <code>:authentication_keys =&gt; [:login]</code> in the User model. I even tried adding email to authentication keys but that messed up the normal sign in (via HTML form). Any ideas of a work around to keep the HTML login working?"}, {"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "reply_to_user": {"reputation": 301, "user_id": 5522798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca03387e0294e139c95113cfdf6a34c5?s=128&d=identicon&r=PG&f=1", "display_name": "tomjohn", "link": "https://stackoverflow.com/users/5522798/tomjohn"}, "edited": false, "score": 0, "creation_date": 1461169693, "post_id": 36736455, "comment_id": 61080387, "body": "can you show your controller? the one you are using for creating a session? you have a <code>Unpermitted parameters: email</code> error. you will have to add <code>email</code> to permited params."}, {"owner": {"reputation": 301, "user_id": 5522798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca03387e0294e139c95113cfdf6a34c5?s=128&d=identicon&r=PG&f=1", "display_name": "tomjohn", "link": "https://stackoverflow.com/users/5522798/tomjohn"}, "edited": false, "score": 0, "creation_date": 1461170019, "post_id": 36736455, "comment_id": 61080596, "body": "It&#39;s the devise_token_auth sessions controller which looks like it inherits from devise resource see <a href=\"https://github.com/lynndylanhurley/devise_token_auth/blob/master/app/controllers/devise_token_auth/sessions_controller.rb\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "reply_to_user": {"reputation": 301, "user_id": 5522798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca03387e0294e139c95113cfdf6a34c5?s=128&d=identicon&r=PG&f=1", "display_name": "tomjohn", "link": "https://stackoverflow.com/users/5522798/tomjohn"}, "edited": false, "score": 0, "creation_date": 1461170659, "post_id": 36736455, "comment_id": 61080972, "body": "Yeah, smooth. Look at the last private method in that file: <code>resource_params</code>, the content of which I&#39;ve added as edit to the answer. It require params inside a <code>sign_in</code> key. so, you should send params as: {sign_in: {email: &quot;klsj@lsd.ls&quot;, password: &quot;lskjdf&quot;}}"}, {"owner": {"reputation": 301, "user_id": 5522798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca03387e0294e139c95113cfdf6a34c5?s=128&d=identicon&r=PG&f=1", "display_name": "tomjohn", "link": "https://stackoverflow.com/users/5522798/tomjohn"}, "edited": false, "score": 0, "creation_date": 1461172317, "post_id": 36736455, "comment_id": 61081964, "body": "the server responded with <code>Unpermitted parameters: sign_in, format, session</code> when changing to that request"}, {"owner": {"reputation": 3236, "user_id": 456735, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/5f57871af762854c5d9883ffd393c38d?s=128&d=identicon&r=PG", "display_name": "Anand", "link": "https://stackoverflow.com/users/456735/anand"}, "edited": false, "score": 0, "creation_date": 1462445712, "post_id": 36736455, "comment_id": 61645034, "body": "Did you figure this one out? I have almost the exact same problem. Adding <code>email</code> to the <code>authentication_keys</code> solved the token based authentication, but the html &#39;login&#39; based <code>sign_in</code> doesnt work. If we add both <code>login</code> and <code>email</code> to authentication_keys, it expects both to be present  when signing in from html. So, how do we set up <code>authentication_keys</code> to support both the (virtual) login attribute for html, and the email for token based auth?"}, {"owner": {"reputation": 18142, "user_id": 1515819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7d0a1373a2312378f6563acf2a8f937?s=128&d=identicon&r=PG&f=1", "display_name": "St&#233;phane Bruckert", "link": "https://stackoverflow.com/users/1515819/st%c3%a9phane-bruckert"}, "edited": false, "score": 0, "creation_date": 1499629055, "post_id": 36736455, "comment_id": 76974482, "body": "Thanks for the detailed answer @sundayAdefila but I couldn&#39;t get your solution to work"}], "tags": [], "owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "is_accepted": false, "score": -1, "last_activity_date": 1461170776, "last_edit_date": 1461170776, "creation_date": 1461136616, "answer_id": 36736455, "question_id": 36733524, "link": "https://stackoverflow.com/questions/36733524/devise-token-auth-and-devise-login-with-username-and-email/36736455#36736455", "title": "Devise_token_auth and Devise login with username and email", "body": "<p><strong>Explanation:</strong></p>\n\n<p>The method <code>find_for_database_authentication</code> used for the authentication can be found in <a href=\"https://github.com/plataformatec/devise/blob/69bee06ceee6280b54304928bb6e55c5064abad8/lib/devise/models/database_authenticatable.rb\" rel=\"nofollow\">Devise's <code>database_authenticable.rb</code></a> file, which hosts the <code>DatabaseAuthenticatable</code> module.</p>\n\n<p>This is responsible for authenticating your resource while using Devise.</p>\n\n<p>This method is what you are overwriting in your <code>User</code> model, and this is why your authentication action is working fine when you use <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow\">Devise</a>.</p>\n\n<p>On the other hand, when you try to authenticate a resource with <a href=\"https://github.com/lynndylanhurley/devise_token_auth\" rel=\"nofollow\">devise_token_auth</a>, You are hitting the <code>create</code> action of the <a href=\"https://github.com/lynndylanhurley/devise_token_auth/blob/master/app/controllers/devise_token_auth/sessions_controller.rb\" rel=\"nofollow\"><code>SessionsController &lt; DeviseTokenAuth::ApplicationController</code></a>. </p>\n\n<p>This can be seen from your error trace:</p>\n\n<pre><code>Started POST \"/api/v1/auth/sign_in\" for 127.0.0.1 at 2016-04-19 23:40:26 -0400\nProcessing by DeviseTokenAuth::SessionsController#create as JSON\n</code></pre>\n\n<p>What this action does, as can be seen from <a href=\"https://github.com/lynndylanhurley/devise_token_auth/blob/master/app/controllers/devise_token_auth/sessions_controller.rb\" rel=\"nofollow\">the file here</a>, is that it looks at the params you are sending, and builds <code>key=&gt;value</code> pairs from those, and then query the database with the keys.</p>\n\n<p>So, in essence, when you send a param as:</p>\n\n<pre><code>{\"login\"=&gt;\"email@example.com\", \"password\"=&gt;\"[FILTERED]\"}\n</code></pre>\n\n<p>Your controller will basically go into the database and look for a row with <code>login</code> equal <code>email@example.com</code>, etc..</p>\n\n<p><strong>Problem:</strong></p>\n\n<p>Unfortunately, you have no column <code>login</code> in your database, what you have is <code>email</code>, ( remember that was why you were over-riding the devise's <code>find_for_database_authentication</code> method in your user model => </p>\n\n<pre><code>where(conditions.to_h).where(['lower(username) = :value OR lower(email) = :value', { :value =&gt; login.downcase }]).first\n</code></pre>\n\n<p>). </p>\n\n<p>That is why you see the error you have in your error trace:</p>\n\n<pre><code>SQLite3::SQLException - no such column: login:\n</code></pre>\n\n<p><strong>Solution:</strong></p>\n\n<p>So, one very simple thing you can do is that when you are sending a param for authentication by the <a href=\"https://github.com/lynndylanhurley/devise_token_auth\" rel=\"nofollow\">auth_token</a>, send it as <code>email</code> and <code>password</code></p>\n\n<pre><code>{\"email\"=&gt;\"email@example.com\", \"password\"=&gt;\"[FILTERED]\"}\n</code></pre>\n\n<p>and not as <code>login</code> and <code>password</code></p>\n\n<p>Hope this is clear.</p>\n\n<blockquote>\n  <p>PS: You also will not want session validation when using token, as mentioned by Shadow above, so you might want to add the following to your base controller: <code>protect_from_forgery with: :null_session, if: Proc.new { |c| c.request.format == 'application/json' }</code> But this does not have to do with your reported issue. </p>\n</blockquote>\n\n<p><strong>Edit:</strong></p>\n\n<p>This is the permited params method:</p>\n\n<pre><code>def resource_params\n  params.permit(*params_for_resource(:sign_in))\nend\n</code></pre>\n\n<p>So, you will have to send params inside a <code>\"sign_in\"</code> key as follow:</p>\n\n<pre><code>{\"sign_in\" =&gt; {\"email\"=&gt;\"email@example.com\", \"password\"=&gt;\"[FILTERED]\"}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18142, "user_id": 1515819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7d0a1373a2312378f6563acf2a8f937?s=128&d=identicon&r=PG&f=1", "display_name": "St&#233;phane Bruckert", "link": "https://stackoverflow.com/users/1515819/st%c3%a9phane-bruckert"}, "is_accepted": false, "score": 1, "last_activity_date": 1500383373, "last_edit_date": 1500383373, "creation_date": 1499628540, "answer_id": 45000205, "question_id": 36733524, "link": "https://stackoverflow.com/questions/36733524/devise-token-auth-and-devise-login-with-username-and-email/45000205#45000205", "title": "Devise_token_auth and Devise login with username and email", "body": "<ol>\n<li><p>From the <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address\" rel=\"nofollow noreferrer\">Devise doc</a>, you need to do the following:</p>\n\n<ul>\n<li><p><code>app/models/user.rb</code></p>\n\n<pre><code>attr_accessor :login\n</code></pre></li>\n<li><p><code>config/initializers/devise.rb</code></p>\n\n<pre><code>Devise.setup do |config|\n   config.authentication_keys = [:login]\n   config.case_insensitive_keys = [:login]\nend\n</code></pre></li>\n</ul></li>\n<li><p><code>devise_token_auth</code> is unmaintained (<a href=\"https://github.com/lynndylanhurley/devise_token_auth/pull/395/files\" rel=\"nofollow noreferrer\">cf unmerged PR</a>) and therefore out-of-sync with Devise, which is why you need to override SessionsController:</p>\n\n<ul>\n<li><p><code>config/routes.rb</code></p>\n\n<pre><code>Rails.application.routes.draw do\n  namespace :api do\n    scope module: :v4  do\n      mount_devise_token_auth_for \"User\", at: \"auth\", controllers: {\n        sessions: \"api/v4/devise_token_auth/sessions\"\n      }\n    end\n  end\nend\n</code></pre></li>\n<li><p><code>app/controllers/api/v4/devise_token_auth/sessions_controller.rb</code></p>\n\n<pre><code>module Api\n  module V4\n    module DeviseTokenAuth\n      class SessionsController &lt; ::DeviseTokenAuth::SessionsController\n        def create\n          # Check\n          field = (resource_params.keys.map(&amp;:to_sym) &amp; resource_class.authentication_keys).first\n\n          @resource = nil\n          if field\n            q_value = resource_params[field]\n\n            if resource_class.case_insensitive_keys.include?(field)\n              q_value.downcase!\n            end\n\n            q = \"#{field.to_s} = ? AND provider='email'\"\n\n            if ActiveRecord::Base.connection.adapter_name.downcase.starts_with? \"mysql\"\n              q = \"BINARY \" + q\n            end\n\n            # LOG IN BY EMAIL AND USERNAME\n            if field == :login\n              @resource = resource_class.where(\"email = ? OR username = ?\", q_value, q_value).first\n            else\n              @resource = resource_class.where(q, q_value).first\n            end\n            # LOG IN BY EMAIL AND USERNAME END\n          end\n\n          if @resource &amp;&amp; valid_params?(field, q_value) &amp;&amp; (!@resource.respond_to?(:active_for_authentication?) || @resource.active_for_authentication?)\n            valid_password = @resource.valid_password?(resource_params[:password])\n            if (@resource.respond_to?(:valid_for_authentication?) &amp;&amp; !@resource.valid_for_authentication? { valid_password }) || !valid_password\n              render_create_error_bad_credentials\n              return\n            end\n            # create client id\n            @client_id = SecureRandom.urlsafe_base64(nil, false)\n            @token     = SecureRandom.urlsafe_base64(nil, false)\n\n            @resource.tokens[@client_id] = {\n              token: BCrypt::Password.create(@token),\n              expiry: (Time.now + ::DeviseTokenAuth.token_lifespan).to_i\n            }\n            @resource.save\n\n            sign_in(:user, @resource, store: false, bypass: false)\n\n            yield @resource if block_given?\n\n            render_create_success\n          elsif @resource &amp;&amp; !(!@resource.respond_to?(:active_for_authentication?) || @resource.active_for_authentication?)\n            render_create_error_not_confirmed\n          else\n            render_create_error_bad_credentials\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre></li>\n</ul></li>\n<li><p>Test example</p>\n\n<pre><code>resource \"User sign in\" do\n\n  let(:user) { build(:user) }\n\n  before(:each) do\n    user.create_new_auth_token\n  end\n\n  post \"/api/auth/sign_in\" do\n    parameter :email, \"Email address\"\n    parameter :password, \"Password for user\"\n\n    it \"fails with incorrect login and password\" do\n      do_request(login: \"user.does.not@exist.com\", password: \"wrong_password\")\n      expect(status).to eq(401)\n      expect(JSON.parse(response_body)[\"errors\"])\n        .to include(\"Invalid login credentials. Please try again.\")\n    end\n\n    it \"logs in with correct username and password\" do\n      user.save!\n      do_request(login: user.username, password: user.password)\n      expect(status).to eq(200)\n      expect(JSON.parse(response_body)[\"data\"][\"email\"]).to include(user.email)\n    end\n\n    it \"logs in with correct email and password\" do\n      user.save!\n      do_request(login: user.email, password: user.password)\n      expect(status).to eq(200)\n      expect(JSON.parse(response_body)[\"data\"][\"email\"]).to include(user.email)\n    end\n  end\nend\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 301, "user_id": 5522798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca03387e0294e139c95113cfdf6a34c5?s=128&d=identicon&r=PG&f=1", "display_name": "tomjohn", "link": "https://stackoverflow.com/users/5522798/tomjohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4468, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1610623313, "creation_date": 1461124418, "last_edit_date": 1461169323, "question_id": 36733524, "link": "https://stackoverflow.com/questions/36733524/devise-token-auth-and-devise-login-with-username-and-email", "title": "Devise_token_auth and Devise login with username and email", "body": "<p>I continuously get errors when trying to add token authentication to my existing rails application and it's stemming from the devise authentication_keys. In my rails 4 app I allow users to login with either a username or email and I'd like to provide the same functionality for the API.</p>\n\n<p>The error I'm getting when logging in from the API is as follows</p>\n\n<pre><code>Started POST \"/api/v1/auth/sign_in\" for 127.0.0.1 at 2016-04-19 23:40:26 -0400\nProcessing by DeviseTokenAuth::SessionsController#create as JSON\nParameters: {\"login\"=&gt;\"email@example.com\", \"password\"=&gt;\"[FILTERED]\", \"session\"=&gt;{\"login\"=&gt;\"email@example.com\", \"password\"=&gt;\"[FILTERED]\"}}\nCan't verify CSRF token authenticity\nGeokit is using the domain: localhost\nUser Load (1.3ms)  SELECT  \"users\".* FROM \"users\" WHERE (login = 'email@example.com' AND provider='email')  ORDER BY \"users\".\"id\" ASC LIMIT 1\nSQLite3::SQLException: no such column: login: SELECT  \"users\".* FROM \"users\" WHERE (login = 'email@example.com' AND provider='email')  ORDER BY \"users\".\"id\" ASC LIMIT 1\nCompleted 500 Internal Server Error in 5ms\n\nSQLite3::SQLException - no such column: login:\n</code></pre>\n\n<p>The code for the user model is below. The problem is stemming from the User load as it is not converting the login parameter to search via the email (or username). But the code below works totally fine for regular devise logins.</p>\n\n<pre><code>#User.rb\ndevise :database_authenticatable, :registerable, :confirmable,\n     :recoverable, :rememberable, :trackable, :validatable, :authentication_keys =&gt; [:login]\ninclude DeviseTokenAuth::Concerns::User\n\ndef self.find_for_database_authentication(warden_conditions)\n  conditions = warden_conditions.dup\n  if login = conditions.delete(:login)\n    where(conditions.to_h).where(['lower(username) = :value OR lower(email) = :value', { :value =&gt; login.downcase }]).first\n  else\n    where(conditions.to_h).first\n  end\nend\n</code></pre>\n\n<p>Thanks for any help or guidance!</p>\n\n<p><strong>EDIT</strong>\nWhen sending the params as email and password there is also an error.</p>\n\n<pre><code>Processing by DeviseTokenAuth::SessionsController#create as JSON\nParameters: {\"email\"=&gt;\"email@example.com\", \"password\"=&gt;\"[FILTERED]\", \"session\"=&gt;{\"email\"=&gt;\"email@example.com\", \"password\"=&gt;\"[FILTERED]\"}}\nCan't verify CSRF token authenticity\nUnpermitted parameters: email, format, session\nCompleted 401 Unauthorized in 49ms (Views: 0.3ms | ActiveRecord: 0.0ms | Solr: 0.0ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "shoulda"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1461132352, "post_id": 36733494, "comment_id": 61053091, "body": "Would you please post the full backtrace with an exact reference to the line that failed? <code>ActiveRecord</code> is open sourced."}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1461136261, "post_id": 36733494, "comment_id": 61055276, "body": "which versions of rails and shoulda have you exactly?, abd please show your schema for the <code>foos</code> table"}, {"owner": {"reputation": 1843, "user_id": 1395166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/57a0053b0e0fac9a23e15b8adb501ab9?s=128&d=identicon&r=PG", "display_name": "Chris Hanson", "link": "https://stackoverflow.com/users/1395166/chris-hanson"}, "reply_to_user": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1461158840, "post_id": 36733494, "comment_id": 61071694, "body": "@\u041c\u0430\u043b\u044a\u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a It looks like the versions of rails/shoulda/shoulda-matchers were the problem. Unfortunately, I didn&#39;t notice how far back the shoulda version was last night."}], "owner": {"reputation": 1843, "user_id": 1395166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/57a0053b0e0fac9a23e15b8adb501ab9?s=128&d=identicon&r=PG", "display_name": "Chris Hanson", "link": "https://stackoverflow.com/users/1395166/chris-hanson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 415, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461158732, "creation_date": 1461124217, "last_edit_date": 1461158732, "question_id": 36733494, "link": "https://stackoverflow.com/questions/36733494/shoulda-matcher-belongs-to-is-producing-this-error-undefined-method-primary", "title": "shoulda-matcher `belongs_to` is producing this error: undefined method `primary_key_name&#39;", "body": "<p>I have a Rails 4 application with a belongs_to relationship which I am trying to test with shoulda-matcher:</p>\n\n<p>The model:</p>\n\n<pre><code>class Foo &lt; ActiveRecord::Base\n  belongs_to :bar\nend\n</code></pre>\n\n<p>The test:</p>\n\n<pre><code>require 'rails_helper'\n\nRspec.describe Foo, type: :model do\n  it { should belong_to :bar }\nend\n</code></pre>\n\n<p>Produces the following error:</p>\n\n<pre><code>NoMethodError:\n   undefined method `primary_key_name' for #&lt;ActiveRecord::Reflection::BelongsToReflection:0x007fde9b87e368&gt;\n   Did you mean?  primary_key_type\n</code></pre>\n\n<p>If I use the uglier:</p>\n\n<pre><code>it { Foo.reflect_on_association(:bar).macro.should  eq(:belongs_to) }\n</code></pre>\n\n<p>The test passes.</p>\n\n<p>I have seen <a href=\"https://stackoverflow.com/questions/15360418/rails-4-undefined-method-primary-key-name\">this SO</a> and <a href=\"https://github.com/thoughtbot/shoulda-matchers/issues/414\" rel=\"nofollow\">this GitHub issue</a>, but they refer to a different matcher and blames the <code>validates_existence</code> gem which I do not have installed.</p>\n\n<p>I can live with the long-hand syntax, but any advice would be greatly appreciated. Thanks in advance!</p>\n\n<p>EDIT:</p>\n\n<p>It looks like my problem was related to gem versions. I changed the versions of shoulda and shoulda-matchers and the relationship matchers now work correctly.</p>\n\n<p>Original gem versions:</p>\n\n<pre><code>rails: 4.2.6\nshoulda: 2.11.3\nshoulda-matchers: 3.1.1\n</code></pre>\n\n<p>Working gem versions:</p>\n\n<pre><code>shoulda: 3.5.0\nshoulda-matchers: 2.8.0\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1461365720, "post_id": 36733839, "comment_id": 61182873, "body": "Full documentation on the <code>perform_in</code> method is available at <a href=\"https://github.com/mperham/sidekiq/wiki/Scheduled-Jobs\" rel=\"nofollow noreferrer\">github.com/mperham/sidekiq/wiki/Scheduled-Jobs</a>"}, {"owner": {"reputation": 4397, "user_id": 1945948, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ecf1cdd8eed500e1e1df86d036b69a7?s=128&d=identicon&r=PG&f=1", "display_name": "atw", "link": "https://stackoverflow.com/users/1945948/atw"}, "edited": false, "score": 1, "creation_date": 1516103991, "post_id": 36733839, "comment_id": 83544955, "body": "Is there documentation for perform, perform_now and perform_later? I think there are self explanatory but how would each be handled by Sidekiq?"}], "tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": true, "score": 19, "last_activity_date": 1461126611, "creation_date": 1461126611, "answer_id": 36733839, "question_id": 36733475, "link": "https://stackoverflow.com/questions/36733475/what-is-difference-between-perform-in-and-perform-async-in-sidekiq/36733839#36733839", "title": "What is difference between perform_in and perform_async in sidekiq?", "body": "<p>You have to pass <code>perform_in</code> a time. <code>perform_async</code> gets pushed to the queue right away. Other than that they're the same. You'd call <code>perform_in(10.minutes)</code> </p>\n"}], "owner": {"reputation": 744, "user_id": 1885107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f3cb4e9a996ab41c7980d6954dfb68d?s=128&d=identicon&r=PG", "display_name": "Prakash Laxkar", "link": "https://stackoverflow.com/users/1885107/prakash-laxkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13104, "favorite_count": 0, "accepted_answer_id": 36733839, "answer_count": 1, "score": 9, "last_activity_date": 1461126611, "creation_date": 1461124082, "question_id": 36733475, "link": "https://stackoverflow.com/questions/36733475/what-is-difference-between-perform-in-and-perform-async-in-sidekiq", "title": "What is difference between perform_in and perform_async in sidekiq?", "body": "<p>I want to update old sidekiq jobs with new time interval. How I can do this ? Is it possible through <code>perform_in</code> option. In addition I want to know clear difference between <code>perform_in</code> and <code>perform_async</code>.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 91, "user_id": 3803385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1078b3d35e80b57857d36bd6fd997697?s=128&d=identicon&r=PG&f=1", "display_name": "regulation_d", "link": "https://stackoverflow.com/users/3803385/regulation-d"}, "edited": false, "score": 1, "creation_date": 1461123257, "post_id": 36732956, "comment_id": 61050006, "body": "You&#39;d need one more <code>end</code> to close out the function definition."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1461142502, "post_id": 36732956, "comment_id": 61059577, "body": "&quot;can you see where my logic falls off?&quot; \u2013 Ruby tells you that it&#39;s a <i>syntax</i> error. Since the code cannot even be parsed, it also obviously cannot be executed, and thus, this cannot possibly have anything to do with your logic, since your logic never even gets executed."}, {"owner": {"reputation": 73, "user_id": 6217197, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f157bc0d7bc970425a13f1744322415e?s=128&d=identicon&r=PG&f=1", "display_name": "hac13", "link": "https://stackoverflow.com/users/6217197/hac13"}, "edited": false, "score": 1, "creation_date": 1461199794, "post_id": 36732956, "comment_id": 61095128, "body": "I spent an hour yesterday but didn&#39;t get what I was doing wrong. Good thing i asked here sooner rather than later. that was all I needed - and extra &#39;end&#39;!"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1461208912, "post_id": 36732956, "comment_id": 61097365, "body": "This happens sometimes, @hac13. Some of the worst errors to find are the easier ones."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1461209067, "post_id": 36732956, "comment_id": 61097403, "body": "But there are more points to be made better in this code of yours than just the <b>end</b>, as you may see by Cary&#39;s answer and mine own."}], "answers": [{"tags": [], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "is_accepted": true, "score": 1, "last_activity_date": 1461125629, "last_edit_date": 1461125629, "creation_date": 1461123948, "answer_id": 36733455, "question_id": 36732956, "link": "https://stackoverflow.com/questions/36732956/find-letter-within-string-and-get-positions-ruby/36733455#36733455", "title": "find letter within string and get positions - ruby", "body": "<p>The error comes from the fact you haven't closed the range block with an <strong>end</strong>. But there are other points. I suggest you to try something like this:</p>\n\n<pre><code>def nearby_az(str)\n  list = Array.new\n  pos = -1\n  str.each_char do |c|\n    pos = pos + 1\n    if (c == 'a') then\n      list.push(pos+1)\n      list.push(pos+2)\n      list.push(pos+3)\n    end\n  end\n  list\nend\n</code></pre>\n\n<p>or yet better</p>\n\n<pre><code>def nearby_az(str)\n  list = Array.new\n  nstr = str.each_char.to_a\n  nstr.each_index do |i|\n    if (nstr[i] == 'a') then\n      list.push(i+1)\n      list.push(i+2)\n      list.push(i+3)\n    end\n  end\n  list\nend\n</code></pre>\n\n<p>(This ways you don't even have to create an artificial index, by using the natural index of the <strong>nstr</strong> array)</p>\n\n<p>With this code, if you do</p>\n\n<pre><code>puts nearby_az(\"asdfgaqwer\")\n</code></pre>\n\n<p>the result will be [ 1, 2, 3, 6, 7, 8], as desired.</p>\n\n<p>Remember you don't need a <strong>return</strong> in Ruby. The value of the last expression calculated in a method is returned by default to the method caller.</p>\n\n<p>Of course you may continue using your way, doing this:</p>\n\n<pre><code>def nearby_az(string)\n  list = []\n  for i in 0..(string.length)\n    if string[i] == 'a'\n      list.push(i+1)\n      list.push(i+2)\n      list.push(i+3)\n    end\n  end\n  list\nend\n</code></pre>\n\n<p>And it will give you the same result, although I think the first code is a bit easier to read.</p>\n"}, {"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1461192047, "post_id": 36733750, "comment_id": 61092946, "body": "Excellent answer! I suggest the OP accepts your answer instead of mine! Thank you so much for the opportunity to learn more Ruby."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 1, "creation_date": 1461200219, "post_id": 36733750, "comment_id": 61095226, "body": "Thanks, @EddeAlmeida, but don&#39;t forget the OP is encouraged to select the answer that was most helpful to him or her. You explained the problem with the OP&#39;s code, I didn&#39;t, and sometimes improvements to a familiar approach are appreciated more than an altogether different way of addressing the problem. My answer was as much for other readers than for the OP."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1461249649, "post_id": 36733750, "comment_id": 61122942, "body": "In the end the OP selected no answer at all... LOL"}, {"owner": {"reputation": 73, "user_id": 6217197, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f157bc0d7bc970425a13f1744322415e?s=128&d=identicon&r=PG&f=1", "display_name": "hac13", "link": "https://stackoverflow.com/users/6217197/hac13"}, "edited": false, "score": 0, "creation_date": 1461297358, "post_id": 36733750, "comment_id": 61144633, "body": "sorry guys, new here. I didn&#39;t notice the part about accepting answers :P you guys are great though!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1461128200, "last_edit_date": 1461128200, "creation_date": 1461126039, "answer_id": 36733750, "question_id": 36732956, "link": "https://stackoverflow.com/questions/36732956/find-letter-within-string-and-get-positions-ruby/36733750#36733750", "title": "find letter within string and get positions - ruby", "body": "<p>Here is a more Ruby-like way you could do that.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def indices(str)\n  str.each_char.\n      with_index.\n      select { |c,_| c=='a' }.\n      flat_map { |_,i| (i..i+2).to_a }\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>indices \"gabe\"\n  #=&gt; [1, 2, 3] \nindices \"gabba\"\n  #=&gt; [1, 2, 3, 4, 5, 6] \nindices \"abbadabbadoo\"\n  #=&gt; [0, 1, 2, 3, 4, 5, 5, 6, 7, 8, 9, 10] \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>Suppose</p>\n\n<pre><code>str = \"gagga\"\n</code></pre>\n\n<p>Then the steps are as follows:</p>\n\n<pre><code>enum0 = str.each_char\n  #=&gt; #&lt;Enumerator: \"gagga\":each_char&gt; \nenum1 = enum0.with_index\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator: \"gagga\":each_char&gt;:with_index&gt; \n</code></pre>\n\n<p>Carefully examine the above return value. You can think of <code>enum1</code> as a <em>compound enumerator</em> (though Ruby has no such concept--<code>enum1</code> is simply an enumerator). We can see the elements of <code>enum1</code> that will be passed to <code>select</code> by converting <code>enum1</code> to an array:</p>\n\n<pre><code>enum1.to_a\n  #=&gt; [[\"g\", 0], [\"a\", 1], [\"g\", 2], [\"g\", 3], [\"a\", 4]] \n</code></pre>\n\n<p>Continuing,</p>\n\n<pre><code>a = enum1.select { |c,_| c=='a' }\n  #=&gt; [[\"a\", 1], [\"a\", 4]] \na.flat_map { |e,i| (i..i+2).to_a }\n  #=&gt; [1, 2, 3, 4, 5, 6] \n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-flat_map\" rel=\"nofollow\">Enumerable#flat_map</a>'s block variables are <code>e</code> and <code>i</code>. When the first element of <code>a</code> (<code>[\"a\", 1]</code>) is passed to the block, the block variables are assigned using <em>parallel assignment</em>:</p>\n\n<pre><code>e, i = [\"a\", 1]\n  #=&gt; [\"a\", 1] \ne #=&gt; \"a\" \ni #=&gt; 1 \n</code></pre>\n\n<p>and the block calculation is performed:</p>\n\n<pre><code>(i..i+2).to_a\n  #=&gt; (1..3).to_a\n  #=&gt; [1,2,3]\n</code></pre>\n\n<p>Note that <code>flat_map</code> is equivalent to:</p>\n\n<pre><code>b = a.map { |e,i| (i..i+2).to_a }\n  #=&gt; [[1, 2, 3], [4, 5, 6]] \nc = b.flatten(1)\n  #=&gt; [1, 2, 3, 4, 5, 6] \n</code></pre>\n\n<p>One last thing: <code>flat_map</code>'s first block variable, <code>e</code>, is not used in the block calculation. As is common in such situations, <code>_</code> (a legitimate local variable) is used instead for that variable. That informs the reader that that block variable is not used, and may also reduce the chances of introducing errors within the block.</p>\n"}], "owner": {"reputation": 73, "user_id": 6217197, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f157bc0d7bc970425a13f1744322415e?s=128&d=identicon&r=PG&f=1", "display_name": "hac13", "link": "https://stackoverflow.com/users/6217197/hac13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 36733455, "answer_count": 2, "score": 0, "last_activity_date": 1461128200, "creation_date": 1461120780, "question_id": 36732956, "link": "https://stackoverflow.com/questions/36732956/find-letter-within-string-and-get-positions-ruby", "title": "find letter within string and get positions - ruby", "body": "<p>The goal is to find if the letter 'a' is within a string and add the three positions away from the 'a' occurrences within the string. </p>\n\n<p>So if the string was 'gabe' my list would look like this list = [2,3,4].\nIf the string is 'gabba' then list = [2,3,4,5,6,7]</p>\n\n<p>my current code seems to be giving me errors</p>\n\n<pre><code>def nearby_az(string)\nlist = []\nfor i in 0..(string.length)\n    if string[i] == 'a'\n        list.push(i+1)\n        list.push(i+2)\n        list.push(i+3)\n        next\n    end\nreturn list\n</code></pre>\n\n<p>end</p>\n\n<p>I get the following error:\n(repl):11: syntax error, unexpected end-of-input, expecting keyword_end</p>\n\n<p>can you see where my logic falls off?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-cloud-platform", "gcloud", "google-cloud-sdk"], "answers": [{"comments": [{"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1461200731, "post_id": 36744258, "comment_id": 61095348, "body": "Thanks for the help I not get the error <code>Error Response: [2] Build failed; check build logs for details</code> when I run <code>gcloud preview app modules get-logs mymodule --version=1</code> to get the logs I cant find where the log file is saved to. Do you know where it would be?"}], "tags": [], "owner": {"reputation": 15238, "user_id": 4922212, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-eotxc8Z9h68/AAAAAAAAAAI/AAAAAAAAAEY/yFvQ6DayB3M/photo.jpg?sz=128", "display_name": "Zachary Newman", "link": "https://stackoverflow.com/users/4922212/zachary-newman"}, "is_accepted": true, "score": 11, "last_activity_date": 1461156384, "creation_date": 1461156384, "answer_id": 36744258, "question_id": 36732842, "link": "https://stackoverflow.com/questions/36732842/every-time-i-try-to-deploy-i-get-gcloud-preview-app-deploy-error-response/36744258#36744258", "title": "Every time I try to deploy I get - (gcloud.preview.app.deploy) Error Response: [4] DEADLINE_EXCEEDED", "body": "<p>There's a 10 minute default timeout for Docker builds (the mechanism by which <code>runtime: custom</code> App Engine builds work). You can increase this by running <code>gcloud config set app/cloud_build_timeout [NUMBER OF SECONDS]</code>.</p>\n\n<p>You could also work around by performing the build yourself:</p>\n\n<pre><code>docker build . -t gcr.io/myapp/myimage\ngcloud docker push gcr.io/myapp/myimage\ngcloud preview app deploy app.yaml --image-url=gcr.io/myapp/myimage\n</code></pre>\n\n<p>However, in general, your Docker builds shouldn't be taking this long. It's usually better to have a base image with all of your dependencies already built in, and just have the final build derive from that image and install your app. This way, your builds will be much quicker.</p>\n"}, {"tags": [], "owner": {"reputation": 10654, "user_id": 189410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890a51c7b2177be205cd346614f8bf93?s=128&d=identicon&r=PG", "display_name": "Edmar Miyake", "link": "https://stackoverflow.com/users/189410/edmar-miyake"}, "is_accepted": false, "score": 6, "last_activity_date": 1587668937, "creation_date": 1587668937, "answer_id": 61395143, "question_id": 36732842, "link": "https://stackoverflow.com/questions/36732842/every-time-i-try-to-deploy-i-get-gcloud-preview-app-deploy-error-response/61395143#61395143", "title": "Every time I try to deploy I get - (gcloud.preview.app.deploy) Error Response: [4] DEADLINE_EXCEEDED", "body": "<p>This error is raised when the overall request times out.</p>\n\n<p>The execution limit is 10 minutes for task queue requests.\nYou can increase this timeout limit on google cloud shell, by typing <code>gcloud config set app/cloud_build_timeout [TIMEOUT_SECONDS]</code></p>\n\n<p>Example</p>\n\n<pre><code>gcloud config set app/cloud_build_timeout 1000\n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3873, "favorite_count": 3, "accepted_answer_id": 36744258, "answer_count": 2, "score": 9, "last_activity_date": 1587668937, "creation_date": 1461119871, "last_edit_date": 1461141315, "question_id": 36732842, "link": "https://stackoverflow.com/questions/36732842/every-time-i-try-to-deploy-i-get-gcloud-preview-app-deploy-error-response", "title": "Every time I try to deploy I get - (gcloud.preview.app.deploy) Error Response: [4] DEADLINE_EXCEEDED", "body": "<p>I'm new to Google cloud and I'm trying to do my first deploy to it. My first deploy is a Ruby on Rails project.</p>\n\n<p>I'm basically following <a href=\"https://cloud.google.com/ruby/getting-started/hello-world\" rel=\"noreferrer\">this guide in the google cloud documentation</a>. The only difference being that I'm using my own project instead of the 'hello world' project they supply.</p>\n\n<p>This is my app.yaml file</p>\n\n<pre><code>runtime: custom\nvm: true\nentrypoint: bundle exec rackup -p 8080 -E production config.ru\nresources:\n  cpu: 0.5\n  memory_gb: 1.3\n  disk_size_gb: 10\n</code></pre>\n\n<p>When I go to my project directory and run <code>gcloud preview app deploy</code> it starts the deploy but appears to eventually time out. It gives the error  <code>(gcloud.preview.app.deploy) Error Response: [4] DEADLINE_EXCEEDED</code>.</p>\n\n<p>Doing some research I found running <code>gcloud preview app deploy</code> with <code>--verbosity debug</code> gives extra debug info but it doesn't help me find whats causing it to timeout.</p>\n\n<p>Here is the last chunk of the console log.</p>\n\n<pre><code>Bundle complete! 35 Gemfile dependencies, 102 gems now installed.\nBundled gems are installed into ./vendor/bundle.\nPost-install message from rdoc:\nDepending on your version of ruby, you may need to install ruby rdoc/ri data:\n\n&lt;= 1.8.6 : unsupported\n = 1.8.7 : gem install rdoc-data; rdoc-data --install\n = 1.9.1 : gem install rdoc-data; rdoc-data --install\n&gt;= 1.9.2 : nothing to do! Yay!\nPost-install message from compass:\n    Compass is charityware. If you love it, please donate on our behalf at http://umdf.org/compass Thanks!\nDEBUG: Operation [operations/build/guidir-1286/MmFkZjNmOGYtZDhhZi00NTJmLTk0YWEtMmQzMjBmM2JkOTg2OlVT] complete. Result: {\n    \"metadata\": {\n        \"@type\": \"type.googleapis.com/google.devtools.cloudbuild.v1.BuildOperationMetadata\", \n        \"build\": {\n            \"finishTime\": \"2016-04-20T01:55:44.961635Z\", \n            \"status\": \"TIMEOUT\", \n            \"timeout\": \"600.000s\", \n            \"projectId\": \"guidir-1286\", \n            \"id\": \"2adf3f8f-d8af-452f-94aa-2d320f3bd986\", \n            \"source\": {\n                \"storageSource\": {\n                    \"object\": \"us.gcr.io/guidir-1286/appengine/default.20160420t110030:latest\", \n                    \"bucket\": \"staging.guidir-1286.appspot.com\"\n                }\n            }, \n            \"steps\": [\n                {\n                    \"args\": [\n                        \"us.gcr.io/guidir-1286/appengine/default.20160420t110030:latest\"\n                    ], \n                    \"name\": \"gcr.io/cloud-builders/dockerizer\"\n                }\n            ], \n            \"startTime\": \"2016-04-20T01:45:43.216420Z\", \n            \"logsBucket\": \"staging.guidir-1286.appspot.com\", \n            \"images\": [\n                \"us.gcr.io/guidir-1286/appengine/default.20160420t110030:latest\"\n            ], \n            \"createTime\": \"2016-04-20T01:45:41.861657Z\"\n        }\n    }, \n    \"done\": true, \n    \"name\": \"operations/build/guidir-1286/MmFkZjNmOGYtZDhhZi00NTJmLTk0YWEtMmQzMjBmM2JkOTg2OlVT\", \n    \"error\": {\n        \"message\": \"DEADLINE_EXCEEDED\", \n        \"code\": 4\n    }\n}\nDEBUG: (gcloud.preview.app.deploy) Error Response: [4] DEADLINE_EXCEEDED\nTraceback (most recent call last):\n  File \"/Users/Robert/google-cloud-sdk/lib/googlecloudsdk/calliope/cli.py\", line 654, in Execute\n    result = args.cmd_func(cli=self, args=args)\n  File \"/Users/Robert/google-cloud-sdk/lib/googlecloudsdk/calliope/backend.py\", line 1401, in Run\n    resources = command_instance.Run(args)\n  File \"/Users/Robert/google-cloud-sdk/lib/surface/preview/app/deploy.py\", line 507, in Run\n    config_cleanup)\n  File \"/Users/Robert/google-cloud-sdk/lib/googlecloudsdk/api_lib/app/deploy_command_util.py\", line 195, in BuildAndPushDockerImages\n    storage_client)\n  File \"/Users/Robert/google-cloud-sdk/lib/googlecloudsdk/api_lib/app/deploy_command_util.py\", line 245, in _BuildImagesWithCloudBuild\n    image.tag, cloudbuild_client)\n  File \"/Users/Robert/google-cloud-sdk/lib/googlecloudsdk/api_lib/app/cloud_build.py\", line 181, in ExecuteCloudBuild\n    retry_callback=log_tailer.Poll)\n  File \"/Users/Robert/google-cloud-sdk/lib/googlecloudsdk/api_lib/app/api/operations.py\", line 69, in WaitForOperation\n    encoding.MessageToPyValue(completed_operation.error)))\nOperationError: Error Response: [4] DEADLINE_EXCEEDED\nERROR: (gcloud.preview.app.deploy) Error Response: [4] DEADLINE_EXCEEDED\n</code></pre>\n\n<p>This is the furthest its gone, but sometimes its mid way through installing the gems before it times out and other times it doesn't even get upto installing the gems.</p>\n\n<p>How can I stop this from occurring?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "html", "ffmpeg", "paperclip"], "comments": [{"owner": {"reputation": 1432, "user_id": 1018853, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14810c17e5f3efc210ecb3f6bce31ea5?s=128&d=identicon&r=PG", "display_name": "rorykoehler", "link": "https://stackoverflow.com/users/1018853/rorykoehler"}, "edited": false, "score": 0, "creation_date": 1461724886, "post_id": 36732841, "comment_id": 61324594, "body": "Did you come up with a solution?"}, {"owner": {"reputation": 1, "user_id": 3813394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a992edbdb6217f0c857f5518307095c?s=128&d=identicon&r=PG&f=1", "display_name": "somecalmetim", "link": "https://stackoverflow.com/users/3813394/somecalmetim"}, "reply_to_user": {"reputation": 1432, "user_id": 1018853, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/14810c17e5f3efc210ecb3f6bce31ea5?s=128&d=identicon&r=PG", "display_name": "rorykoehler", "link": "https://stackoverflow.com/users/1018853/rorykoehler"}, "edited": false, "score": 1, "creation_date": 1462039208, "post_id": 36732841, "comment_id": 61474293, "body": "No I couldn&#39;t figure out a way to do it in the stock player without a custom player like videojs. Videojs works but I am still using this bootstrap solution because I couldn&#39;t get videojs to do multiple resolutions AND multiple fallback filetypes. Also cut it back to just mp4 and ogg versions because webm threw errors when processing files over 150mb and webm/ogg have almost the same browser compatibility anyway."}], "owner": {"reputation": 1, "user_id": 3813394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a992edbdb6217f0c857f5518307095c?s=128&d=identicon&r=PG&f=1", "display_name": "somecalmetim", "link": "https://stackoverflow.com/users/3813394/somecalmetim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461124213, "creation_date": 1461119869, "last_edit_date": 1461124213, "question_id": 36732841, "link": "https://stackoverflow.com/questions/36732841/html5-video-tag-switcher-for-multiple-resolutions", "title": "HTML5 Video tag switcher for multiple resolutions", "body": "<p>I have a Rails 4 app setup as a video upload/sharing site. I am using paperclip to upload videos and ffmpeg for processing 2 sizes of video into Mp4, ogg and webm.</p>\n\n<p>I want to show the smaller 240p video to mobile devices. I can do that now with media queries or Bootstraps adaptive tags but I would prefer a \"resolution switcher\" button similar to what I see on various other sites showing \"240, 480, 720, 1080\" Is this possible to do automatically within the HTML5 video tag similar to the \"CC Closed Captioning\" button that appears when you add subtitle files?</p>\n\n<p>I was trying to avoid using a custom player.</p>\n\n<p>This was my quick bootstrap solution but would prefer a button/switcher.</p>\n\n<pre><code>&lt;div class=\"hidden-xs\"&gt;\n    &lt;video style=\"width:100%\" autobuffer controls poster=\"&lt;%= @video.attachment.url(:preview) %&gt;\"&gt;&lt;source label=\"720\" src=\"&lt;%= @video.attachment.url(:original) %&gt;\" type=\"video/mp4\" default&gt;&lt;source label=\"ogg\" src=\"&lt;%= @video.attachment.url(:ogg) %&gt;\" type=\"video/ogg\"&gt;&lt;source label=\"webm\" src=\"&lt;%= @video.attachment.url(:webm) %&gt;\" type=\"video/webm\"&gt;&lt;track label=\"English\" kind=\"subtitles\" srclang=\"en\" src=\"/assets/subtitles.vtt\" default&gt;&lt;p&gt;Your Browser does not support the video tag.&lt;/p&gt;&lt;/video&gt;\n&lt;/div&gt;\n&lt;div class=\"visible-xs\"&gt;\n    &lt;video style=\"width:100%\" autobuffer controls poster=\"&lt;%= @video.attachment.url(:preview) %&gt;\"&gt;&lt;source label=\"360\" src=\"&lt;%= @video.attachment.url(:mobile) %&gt;\" type=\"video/mp4\" default&gt;&lt;source label=\"ogg mobile\" src=\"&lt;%= @video.attachment.url(:oggmobile) %&gt;\" type=\"video/ogg\"&gt;&lt;source label=\"webm mobile\" src=\"&lt;%= @video.attachment.url(:webmmobile) %&gt;\" type=\"video/webm\"&gt;&lt;track label=\"English\" kind=\"subtitles\" srclang=\"en\" src=\"/assets/subtitles.vtt\" default&gt;&lt;p&gt;Your Browser does not support the video tag.&lt;/p&gt;&lt;/video&gt;\n&lt;/div&gt;\n</code></pre>\n"}]