[{"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441842708, "post_id": 32490760, "comment_id": 52842266, "body": "You need to edit your wording as it seems like you are saying ranges are arrays, which of course they are not. <code>Array</code> and <code>Range</code> have different methods and arrays require memory for all of its elements, whereas only the endpoints are stored for ranges. Moreover, not all ranges can be converted to arrays, <code>(1.2)..(3.4)</code> being an example."}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441843851, "post_id": 32490760, "comment_id": 52842518, "body": "Ranges have two or three dots between them, not one. But yeah, I will try to edit the wording. Thanks"}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": true, "score": 0, "last_activity_date": 1441843905, "last_edit_date": 1592644375, "creation_date": 1441841754, "answer_id": 32490760, "question_id": 32490701, "link": "https://stackoverflow.com/questions/32490701/length-validation-on-rails-which-one-is-the-best/32490760#32490760", "title": "Length validation on Rails - which one is the best?", "body": "<p>There's no difference in performance because they mean the same thing. The range syntax</p>\n<pre><code>length: 5..30\n</code></pre>\n<p>is simply shorthand for an array containing the numbers 5 through 30</p>\n<pre><code>length: [5,6,7,...30].to_a\n</code></pre>\n<p>You can also use the minimum and maximum attributes to declare a range.</p>\n<pre><code>length: { minimum: 5, maximum: 30 }\n</code></pre>\n<p>Check out the documentation here</p>\n<p><a href=\"http://guides.rubyonrails.org/active_record_validations.html#length\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/active_record_validations.html#length</a></p>\n<blockquote>\n<p>:minimum - The attribute cannot have less than the specified length.</p>\n<p>:in (or :within) - The attribute length must be included in a given interval. The value for this option must be a range.</p>\n</blockquote>\n<p>It comes down to preference. The range syntax saves you keystrokes. But there's no difference in performance. You can see for yourself with <code>benchmark</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 5319062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb1202f128a66e29b47b91818b38bd8?s=128&d=identicon&r=PG", "display_name": "Eric Pereira", "link": "https://stackoverflow.com/users/5319062/eric-pereira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "accepted_answer_id": 32490760, "answer_count": 1, "score": 2, "last_activity_date": 1441843905, "creation_date": 1441841326, "question_id": 32490701, "link": "https://stackoverflow.com/questions/32490701/length-validation-on-rails-which-one-is-the-best", "title": "Length validation on Rails - which one is the best?", "body": "<p>I am coding the validation of my app and want to know if there's any difference (security and/or speed) between the use of\n<code>length: { minimum: 5, maximum: 30 }</code> and <code>length: 5..30</code>, for example.</p>\n\n<p>Sorry if this had already been asked...</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441842854, "post_id": 32490679, "comment_id": 52842292, "body": "<code>groups</code> is an unspecified method with no arguments? <code>}</code> in <code>:queue=&gt;self}</code> is misplaced."}, {"owner": {"reputation": 61, "user_id": 2569579, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ebb26fc06f4b80314fd55df7df9c0536?s=128&d=identicon&r=PG", "display_name": "user2569579", "link": "https://stackoverflow.com/users/2569579/user2569579"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441843051, "post_id": 32490679, "comment_id": 52842330, "body": "groups is another model. <code>groups.find(_id)</code> this is used to find an instance of group model"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441843246, "post_id": 32490679, "comment_id": 52842377, "body": "If this is a Rails question you need a Rails tag."}, {"owner": {"reputation": 61, "user_id": 2569579, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ebb26fc06f4b80314fd55df7df9c0536?s=128&d=identicon&r=PG", "display_name": "user2569579", "link": "https://stackoverflow.com/users/2569579/user2569579"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441845054, "post_id": 32490679, "comment_id": 52842797, "body": "@caryswoveland it is a ruby question. And I found solution. I can do <code>def some_operation ids, action, *params</code> and <code>groups.find(_id).send(action, *params)</code> to solve this issue."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441845652, "post_id": 32490679, "comment_id": 52842947, "body": "I believe &quot;model&quot; is a Rails concept (but I don&#39;t know Rails). Ruby does not have models. <code>groups</code> can only be a method or a local variable. If it were the latter an exception would have been raised because it has not been previously defined within the method. As no answers have been posted, if you no longer need one you should delete the question."}], "owner": {"reputation": 61, "user_id": 2569579, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ebb26fc06f4b80314fd55df7df9c0536?s=128&d=identicon&r=PG", "display_name": "user2569579", "link": "https://stackoverflow.com/users/2569579/user2569579"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1441841162, "creation_date": 1441841162, "question_id": 32490679, "link": "https://stackoverflow.com/questions/32490679/how-to-igonre-parameter-with-send-method", "title": "How to igonre parameter with &quot;send method&quot;", "body": "<pre><code>def some_operation ids, action, params\n  ids.each do |_id|\n    groups.find(_id).send(action, params)\n  end\nend\nsome_operation('reserve',:queue=&gt;self})\nsome_operation('unreserve')\n</code></pre>\n\n<p>this doesn't work for <code>unreserve</code>, because <code>unreserve</code> doesn't have parameters and I should not change the method reserve. Any good idea how I should change the method <code>some_operation</code> so it can ignore parameter for <code>unreserve</code>????</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1441840384, "post_id": 32490206, "comment_id": 52841682, "body": "After <code>split_string.each do |term|</code> add the line <code>puts &quot;split_string=#{split_string}, term=#{term}&quot;</code> and all will be revealed."}], "answers": [{"comments": [{"owner": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "edited": false, "score": 0, "creation_date": 1441839530, "post_id": 32490349, "comment_id": 52841454, "body": "Awesome! Thank you works great. I&#39;m saddened by the way ruby handles this though. I might as well use java iterator, since ruby does&#39;t even handle the obvious. At lease java throws an exception when modifying an iterable in place."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441841984, "post_id": 32490349, "comment_id": 52842093, "body": "Horse, this behaviour is a characteristic of Ruby. There are many things that coders can do that might displease the Ruby monks, but coders tend to be given free reign. It can be argued that Ruby&#39;s elegance and power, as we know it today, is in large part a consequence of that policy."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 1, "last_activity_date": 1441838814, "creation_date": 1441838814, "answer_id": 32490349, "question_id": 32490206, "link": "https://stackoverflow.com/questions/32490206/issue-with-removing-negation-terms-terms-with-a-minus-before-them-from-a-ruby/32490349#32490349", "title": "Issue with removing negation terms (terms with a minus before them) from a ruby string?", "body": "<p>The problem is that you are deleting elements from the array while you are iterating through it. Exactly what happens in these cases is undefined, but it's common enough for it to cause the iteration to skip elements. </p>\n\n<p>Another way to do this would be to use partition, which splits an enumerable into those elements for which a block is truthy and the remainder, for example. </p>\n\n<pre><code>negative, positive = split_string.partition {|term| term.start_with?('-')}\n</code></pre>\n"}], "owner": {"reputation": 7158, "user_id": 1445444, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0baa59194d1ab50811481dd6b4aab5c?s=128&d=identicon&r=PG&f=1", "display_name": "Horse Voice", "link": "https://stackoverflow.com/users/1445444/horse-voice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 1, "accepted_answer_id": 32490349, "answer_count": 1, "score": 0, "last_activity_date": 1441840458, "creation_date": 1441838018, "last_edit_date": 1441840458, "question_id": 32490206, "link": "https://stackoverflow.com/questions/32490206/issue-with-removing-negation-terms-terms-with-a-minus-before-them-from-a-ruby", "title": "Issue with removing negation terms (terms with a minus before them) from a ruby string?", "body": "<p>The end user of our rails application can pass in a negative term in the url parameter. That's a term with a minus in front of it. An example is the following: <code>localhost:80/search?q=Arnold+Schwarz+-applesauce+-cantaloop</code></p>\n\n<p>I'm assuming in the params hash the value of <code>q</code> will be: </p>\n\n<pre><code>\"Arnold Schwarz -applesauce -cantaloop\"\n</code></pre>\n\n<p>I want to be able to populate an array in ruby that extracts all negative terms from the string. Here is my code below which does not seem to work correctly. It removes the -applesauce from the <code>query_string</code> and puts that into <code>ret_hash[\"excluded_terms\"]</code>, but does not remove the <code>-cantaloop</code>.</p>\n\n<pre><code>query_string = \"Arnold Schwarz -applesauce -cantaloop\"\nexclude_terms = Array.new \n\ndef compose_valid_query_string(query_string)\n    split_string = query_string.split\n    ret_hash = {}\n    split_string.each do |term|\n        if(term.start_with?(\"-\"))\n            deleted_term = split_string.delete(term)\n            ( ret_hash[\"excluded_terms\"] ||= [] ) &lt;&lt; deleted_term\n        end\n    end\n    ret_hash[\"query_string\"] = split_string\n    return ret_hash\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1441854377, "post_id": 32490294, "comment_id": 52844990, "body": "You may have seen a now-deleted comment I posted on your answer. I argued that <code>frozen?</code> was not a good test of whether an object is immutable. I was wrong. Not only does it show that all <code>symbols</code>, <code>fixnums</code>, <code>true</code>, <code>false</code>, <code>nil</code> are immutable, but it also shows that mutable objects that have been frozen (which can&#39;t be unfrozen) are also immutable."}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441895445, "post_id": 32490294, "comment_id": 52868669, "body": "Appreciate the insights Cary Swoveland. I had no idea that if you froze strings, you couldn&#39;t unfreeze them again. Just checked it out myself in IRB"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441904890, "post_id": 32490294, "comment_id": 52874713, "body": "More generally, no frozen object can be thawed (see <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-freeze\" rel=\"nofollow noreferrer\">Object#freeze</a>). <a href=\"http://tmm1.net/ruby21-fstrings/\" rel=\"nofollow noreferrer\">This</a> might be of interest."}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": 3, "last_activity_date": 1441838802, "last_edit_date": 1441838802, "creation_date": 1441838493, "answer_id": 32490294, "question_id": 32490052, "link": "https://stackoverflow.com/questions/32490052/what-is-the-difference-between-being-immutable-and-the-fact-that-there-can-only/32490294#32490294", "title": "What is the difference between being immutable and the fact that there can only be one instance of a Symbol?", "body": "<p>Immutable means that an object cannot be changed. In Ruby, symbols are immutable. To make a symbol mutable, you have to perform type conversion to a string, which is mutable.</p>\n\n<pre><code>a = :mystring\na = a.to_s\n=&gt; \"mystring\"\n</code></pre>\n\n<p>For proof that a symbol is immutable, you can call the <code>frozen?</code> property on it.</p>\n\n<pre><code>a.frozen?\n=&gt; true\n</code></pre>\n\n<p>Note that symbols cannot be unfrozen unlike strings which have an <code>unfreeze</code> method.</p>\n\n<p>For object ids</p>\n\n<p>In Ruby, the <code>object_id</code> of an object is the same as the VALUE that represents the object on the C level. For most objects, this points to a location in memory where the object data is stored. This varies over time because it depends on where the system decided to allocate its memory.</p>\n\n<p>Symbols have the same object id because they are meant to represent a SINGLE value.</p>\n\n<p>To check this out, let's type to the console the same symbol multiple times.</p>\n\n<pre><code>:z.object_id\n=&gt; 636328\n\n:z.object_id\n=&gt; 636328\n\n:z.object_id\n=&gt; 636328\n</code></pre>\n\n<p>Now, let's try the same thing only with strings</p>\n\n<pre><code>\"z\".object_id\n =&gt; 21237740\n\n\"z\".object_id\n=&gt; 24355380 \n</code></pre>\n\n<p>As you can see, here we have two references to the string <code>z</code>, both of which are different objects. Thus, they have different object_ids.</p>\n\n<p>This also means that symbols can save quite a bit of memory, especially if we are dealing with big data. Because symbols are the same object, it's faster to compare them then it is strings. Strings require comparing the values instead of the object ids.</p>\n"}, {"tags": [], "owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "is_accepted": true, "score": 2, "last_activity_date": 1441838806, "creation_date": 1441838806, "answer_id": 32490347, "question_id": 32490052, "link": "https://stackoverflow.com/questions/32490052/what-is-the-difference-between-being-immutable-and-the-fact-that-there-can-only/32490347#32490347", "title": "What is the difference between being immutable and the fact that there can only be one instance of a Symbol?", "body": "<p>Your sentence is fine; you're not sure of the common phrase used to describe a class with only one instance.  I'll explain that as I go along.</p>\n\n<hr>\n\n<p>An object that is immutable cannot change through any operations done on it.  This means that any operation that would change a symbol would generate a new one instead.</p>\n\n<pre><code>:foo.object_id # 1520028\n:foo.upcase.object_id # 70209716662240\n:foo.capitalize.object_id # 70209719120060\n</code></pre>\n\n<p>You can certainly write objects that are immutable, or make them immutable (with some caveats) via <code>freeze</code>, but you can always create a new instance of them.</p>\n\n<pre><code>f = \"foo\"\nf.freeze\nf1 = \"foo\"\nputs f.object_id == f1.object_id # false\n</code></pre>\n\n<p>An object that only ever has one instance of itself is considered to be a <a href=\"https://en.wikipedia.org/wiki/Singleton_pattern\" rel=\"nofollow\">singleton</a>.</p>\n\n<ul>\n<li>If there's only one instance of it, then you only store it in memory once.</li>\n<li>If you attempt to create it, you only get the previously existing object back.</li>\n</ul>\n"}], "owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 32490347, "answer_count": 2, "score": 1, "last_activity_date": 1442031188, "creation_date": 1441837271, "last_edit_date": 1442031188, "question_id": 32490052, "link": "https://stackoverflow.com/questions/32490052/what-is-the-difference-between-being-immutable-and-the-fact-that-there-can-only", "title": "What is the difference between being immutable and the fact that there can only be one instance of a Symbol?", "body": "<p>I'm reading Eloquent Ruby, and am on Chapter 6 on Symbols. Some excerpts:</p>\n\n<p>\"There can only ever be one instance of any given symbol. If I mention :all twice in my code, it is always the same :all.\"</p>\n\n<pre><code>a = :all\nb = :all\nputs a.object_id, b.object_id  # same objects\n</code></pre>\n\n<p>\"Another aspect of symbols that makes them so well suited to their chosen career is that symbols are immutable - once you create that :all symbol, it will be :all until the end of time (or at least until your Ruby interpreter exits)\"</p>\n\n<p>What is the difference between being immutable and the fact that there can only be one instance of you? </p>\n\n<p>By the way, I would like to write the previous sentence more accurately: \"What is the difference between a class being immutable and the fact that there can only be one instance of the class?\" Is class the right word to insert there?</p>\n\n<p>How would you even go about trying to mutate a symbol, they don't seem to hold values like other variables?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1441835066, "post_id": 32489461, "comment_id": 52839868, "body": "is <code>a</code> actually HashWithIndifferentAccess ? There have been bugs in the past where some operations on a HashWithIndifferentAccess would return a plain Hash"}], "answers": [{"tags": [], "owner": {"reputation": 707, "user_id": 3583511, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xB5JH.jpg?s=128&g=1", "display_name": "Jake Shorty", "link": "https://stackoverflow.com/users/3583511/jake-shorty"}, "is_accepted": true, "score": 2, "last_activity_date": 1441834585, "creation_date": 1441834585, "answer_id": 32489560, "question_id": 32489461, "link": "https://stackoverflow.com/questions/32489461/does-hash-slice-support-strings/32489560#32489560", "title": "Does Hash.slice support strings?", "body": "<p>In Rails, <code>Hash#slice</code> with a single key value (such as a string) from the hash returns a hash containing the matching key-value pair, or <code>nil</code> if it isn't matched to a key. <code>Hash#slice</code> takes any number of arguments, each representing a key. See the documentation <a href=\"http://api.rubyonrails.org/classes/Hash.html#method-i-slice\" rel=\"nofollow\">here</a>, and note <code>*keys</code> argument.</p>\n"}], "owner": {"reputation": 1835, "user_id": 2432586, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702ff02114c19ee71758c0ba2cdc0e41?s=128&d=identicon&r=PG", "display_name": "Donovan Thomson", "link": "https://stackoverflow.com/users/2432586/donovan-thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 1, "accepted_answer_id": 32489560, "answer_count": 1, "score": 1, "last_activity_date": 1441834585, "creation_date": 1441834141, "question_id": 32489461, "link": "https://stackoverflow.com/questions/32489461/does-hash-slice-support-strings", "title": "Does Hash.slice support strings?", "body": "<p>Does Hash.slice support strings ?</p>\n\n<p>so for example </p>\n\n<pre><code>a = {\"b\" =&gt; 1, \"c\" =&gt; 2}\na.slice(\"b\")\n</code></pre>\n\n<p>If not then how does it react to strings ?</p>\n\n<p>I am trying to track down a bug where data is being lost and I think it is because the keys in hashes switch intermittently between strings and symbols. Filtering is done exclusively using <code>Hash.slice(*keys)</code> </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "wordpress", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1441833339, "post_id": 32489188, "comment_id": 52839170, "body": "It&#39;s slightly unclear what you&#39;re asking. You want to use Ruby to get data from WordPress? What have you tried so far?"}, {"owner": {"reputation": 27, "user_id": 5318808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ff8fa8ef16afc4dd12ca4334c1c59392?s=128&d=identicon&r=PG&f=1", "display_name": "G.Pigna", "link": "https://stackoverflow.com/users/5318808/g-pigna"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1442458610, "post_id": 32489188, "comment_id": 53093937, "body": "What they asked me to do is that the author of the post can write the info of the post in WordPress and then the people will be able to see the post in the website. Is like reading posts from WordPress in a rails app."}], "answers": [{"tags": [], "owner": {"reputation": 2541, "user_id": 1162683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e05cd764cc2ecba1884b309e9dd5df5?s=128&d=identicon&r=PG", "display_name": "penner", "link": "https://stackoverflow.com/users/1162683/penner"}, "is_accepted": false, "score": 3, "last_activity_date": 1441833407, "creation_date": 1441833407, "answer_id": 32489301, "question_id": 32489188, "link": "https://stackoverflow.com/questions/32489188/making-posts-from-wordpress-in-ruby-on-rails/32489301#32489301", "title": "Making posts from WordPress in Ruby on Rails?", "body": "<p>There are various gems that integrate with the wordpress api. And you could always write your own api wrapper.</p>\n\n<p><a href=\"https://github.com/jordandobson/wordpress\" rel=\"nofollow\">https://github.com/jordandobson/wordpress</a></p>\n\n<p><a href=\"https://codex.wordpress.org/WordPress_APIs\" rel=\"nofollow\">https://codex.wordpress.org/WordPress_APIs</a></p>\n\n<p><a href=\"https://github.com/zachfeldman/rubypress\" rel=\"nofollow\">https://github.com/zachfeldman/rubypress</a></p>\n"}], "owner": {"reputation": 27, "user_id": 5318808, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ff8fa8ef16afc4dd12ca4334c1c59392?s=128&d=identicon&r=PG&f=1", "display_name": "G.Pigna", "link": "https://stackoverflow.com/users/5318808/g-pigna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1441833407, "creation_date": 1441832863, "question_id": 32489188, "link": "https://stackoverflow.com/questions/32489188/making-posts-from-wordpress-in-ruby-on-rails", "title": "Making posts from WordPress in Ruby on Rails?", "body": "<p>So I'm working as a software apprentice and I have to re-build a website.\nBasically what the website does is: post different things (events,news,etc.) and all these posts have like a preview and then when you click on it, it takes you to the post.\nThe way thay it works is: in the code it has a template for the design of every post. But if you want to make a new post, you need to do it from WordPress.\nSo know I'm looking the way to do that, I think that the first developer used json to \"call\" the data from the database in WordPress (I guess).</p>\n\n<p>So I hope that someone can help me with a different or a easier option to do that.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "travis-ci"], "answers": [{"tags": [], "owner": {"reputation": 1769, "user_id": 7404985, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5af90c0ebf26f5ddfc448b2779ab8a57?s=128&d=identicon&r=PG", "display_name": "Sascha Manns", "link": "https://stackoverflow.com/users/7404985/sascha-manns"}, "is_accepted": false, "score": 0, "last_activity_date": 1441879613, "creation_date": 1441879613, "answer_id": 32498879, "question_id": 32488852, "link": "https://stackoverflow.com/questions/32488852/how-to-access-a-installed-gem-inside-travis/32498879#32498879", "title": "How to access a installed gem inside travis", "body": "<p>I have seen that the ci uses the git code directly. So it is enough to use</p>\n\n<p>before_script:\n        - rake setup</p>\n\n<p>So it runs :-)</p>\n"}], "owner": {"reputation": 1769, "user_id": 7404985, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5af90c0ebf26f5ddfc448b2779ab8a57?s=128&d=identicon&r=PG", "display_name": "Sascha Manns", "link": "https://stackoverflow.com/users/7404985/sascha-manns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1441879613, "creation_date": 1441831475, "question_id": 32488852, "link": "https://stackoverflow.com/questions/32488852/how-to-access-a-installed-gem-inside-travis", "title": "How to access a installed gem inside travis", "body": "<p>I have created a rubygem which can installed by:\n* gem install youtube_dlhelper\n* cd .rvm/gems/ruby-2.2.1/gems/youtube_dlhelper-0.1.9.5\n* rake setup</p>\n\n<p>I set up my .travis.yml:\n    os:\n      -linux</p>\n\n<pre><code>dist: trusty\n\nlanguage: ruby\n\nrvm:\n  - 2.2.1\n  - 2.2.2\n\nenv:\n  global:\n    - JRUBY_OPTS=-Xcext.enabled=true\n    - CI=true\n    - TRAVIS=true\n    - LANG=en_US.UTF-8\n    - LC_ALL=en_US.UTF-8\n\nbefore_install:\n  - sudo apt-get update\n  - sudo apt-get install ffmpeg\n\nbefore_script:\n  - cd $GEM_HOME/gems/youtube_dlhelper-0.1.9.5\n  - rake setup\n\nafter_success:\n  - CI=true TRAVIS=true coveralls --verbose\n\nnotifications:\n  email:\n    - samannsml@directbox.com\n</code></pre>\n\n<p>But travis don't find the directory. Also i tried:</p>\n\n<pre><code>before_script:\n        - cd $GEM_HOME/gems\n        - ls\n</code></pre>\n\n<p>But it looks like the directory is empty.</p>\n\n<p>Maybe anyone has a solution for this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "couchrest"], "comments": [{"owner": {"reputation": 1962, "user_id": 1529498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aa085c22959e3ea8530a53a28c6bf96?s=128&d=identicon&r=PG", "display_name": "bumpy", "link": "https://stackoverflow.com/users/1529498/bumpy"}, "edited": false, "score": 0, "creation_date": 1441834266, "post_id": 32488355, "comment_id": 52839577, "body": "&quot;Any manual changes made to the collection ids property (group_ids), unless replaced, will require a reload of the CollectionOfProxy for the two sets of data to be in sync&quot; <a href=\"http://www.rubydoc.info/github/couchrest/couchrest_model/CouchRest%2FModel%2FAssociations%2FClassMethods%3Acollection_of\" rel=\"nofollow noreferrer\">rubydoc.info/github/couchrest/couchrest_model/&hellip;</a>"}, {"owner": {"reputation": 61, "user_id": 2569579, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ebb26fc06f4b80314fd55df7df9c0536?s=128&d=identicon&r=PG", "display_name": "user2569579", "link": "https://stackoverflow.com/users/2569579/user2569579"}, "reply_to_user": {"reputation": 1962, "user_id": 1529498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aa085c22959e3ea8530a53a28c6bf96?s=128&d=identicon&r=PG", "display_name": "bumpy", "link": "https://stackoverflow.com/users/1529498/bumpy"}, "edited": false, "score": 0, "creation_date": 1441835119, "post_id": 32488355, "comment_id": 52839890, "body": "@bumpy Thank you very much!!! this is exactly what I am looking for!!!!"}, {"owner": {"reputation": 61, "user_id": 2569579, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ebb26fc06f4b80314fd55df7df9c0536?s=128&d=identicon&r=PG", "display_name": "user2569579", "link": "https://stackoverflow.com/users/2569579/user2569579"}, "reply_to_user": {"reputation": 1962, "user_id": 1529498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aa085c22959e3ea8530a53a28c6bf96?s=128&d=identicon&r=PG", "display_name": "bumpy", "link": "https://stackoverflow.com/users/1529498/bumpy"}, "edited": false, "score": 0, "creation_date": 1441835217, "post_id": 32488355, "comment_id": 52839923, "body": "@bumpy I don&#39;t know how to mark your answer as correct answer."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 2569579, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ebb26fc06f4b80314fd55df7df9c0536?s=128&d=identicon&r=PG", "display_name": "user2569579", "link": "https://stackoverflow.com/users/2569579/user2569579"}, "edited": false, "score": 0, "creation_date": 1441832124, "post_id": 32488462, "comment_id": 52838529, "body": "Thanks for answering. I tried, it doesn&#39;t work. Same result as <code>new_phone_ids_list = phone_ids &lt;&lt; new_phone.id </code> got."}], "tags": [], "owner": {"reputation": 79, "user_id": 2158113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fdcc06b234711f9821d97c9b9b98d91?s=128&d=identicon&r=PG", "display_name": "Roberto Capelo", "link": "https://stackoverflow.com/users/2158113/roberto-capelo"}, "is_accepted": false, "score": 0, "last_activity_date": 1441830020, "creation_date": 1441830020, "answer_id": 32488462, "question_id": 32488355, "link": "https://stackoverflow.com/questions/32488355/could-not-update-rails-model/32488462#32488462", "title": "could not update rails model", "body": "<p>Try to add using directly to hash:</p>\n\n<pre><code>new_phone_ids_list &lt;&lt; new_phone.id\nself.update_attributes(:phone_id =&gt; new_phone_ids_list)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1962, "user_id": 1529498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aa085c22959e3ea8530a53a28c6bf96?s=128&d=identicon&r=PG", "display_name": "bumpy", "link": "https://stackoverflow.com/users/1529498/bumpy"}, "is_accepted": true, "score": 0, "last_activity_date": 1441869880, "creation_date": 1441869880, "answer_id": 32495617, "question_id": 32488355, "link": "https://stackoverflow.com/questions/32488355/could-not-update-rails-model/32495617#32495617", "title": "could not update rails model", "body": "<p>From the documentation:</p>\n\n<blockquote>\n  <p>Any manual changes made to the collection ids property (group_ids), unless replaced, will require a reload of the CollectionOfProxy for the two sets of data to be in sync</p>\n</blockquote>\n\n<p><a href=\"http://www.rubydoc.info/github/couchrest/couchrest_model/CouchRest%2FModel%2FAssociations%2FClassMethods%3Acollection_of\" rel=\"nofollow\">http://www.rubydoc.info/github/couchrest/couchrest_model/CouchRest%2FModel%2FAssociations%2FClassMethods%3Acollection_of</a></p>\n"}], "owner": {"reputation": 61, "user_id": 2569579, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ebb26fc06f4b80314fd55df7df9c0536?s=128&d=identicon&r=PG", "display_name": "user2569579", "link": "https://stackoverflow.com/users/2569579/user2569579"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "accepted_answer_id": 32495617, "answer_count": 2, "score": 1, "last_activity_date": 1441869880, "creation_date": 1441829598, "question_id": 32488355, "link": "https://stackoverflow.com/questions/32488355/could-not-update-rails-model", "title": "could not update rails model", "body": "<pre><code>class Student &lt; CouchRest::Model::Base\n   collection_of :phones\n   def add_phone(new_phone)\n     #this does not work\n     #new_phone_ids_list = phone_ids &lt;&lt; new_phone.id \n     #this works\n     new_phone_ids_list = phone_ids + [new_phone.id]\n     self.update_attributes(:phone_id =&gt; new_phone_ids_list)\n   end\nend\n</code></pre>\n\n<p>The difference is when I use phone_ids &lt;&lt; new_phone.id to create a new list and update couchdb, it doesn't work. But if I use phone_ids + [new_phone.id] ,updates will work. I understand <code>phone_ids + [new_phone.id]</code> will return a new instance, but cannot figure out why <code>phone_ids &lt;&lt; new_phone.id</code>  doesnt work </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "edited": false, "score": 0, "creation_date": 1441828866, "post_id": 32487897, "comment_id": 52836968, "body": "Do you need to be able to go backwards:  Given an Item, what orders does it appear on?  If so, it&#39;s the classic case of HABTM, and there&#39;s a perfect example here: <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "edited": false, "score": 0, "creation_date": 1441828998, "post_id": 32487897, "comment_id": 52837031, "body": "And the default join table would be named items_orders (alphabetical order)"}, {"owner": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "edited": false, "score": 1, "creation_date": 1441829635, "post_id": 32487897, "comment_id": 52837326, "body": "Which one to use?  <a href=\"http://guides.rubyonrails.org/association_basics.html#choosing-between-has-many-through-and-has-and-belongs-to-many\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 1219, "user_id": 4501707, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ec7dbae2d56aaa3ffda7026d12e31cf8?s=128&d=identicon&r=PG&f=1", "display_name": "loop", "link": "https://stackoverflow.com/users/4501707/loop"}, "reply_to_user": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "edited": false, "score": 0, "creation_date": 1441829935, "post_id": 32487897, "comment_id": 52837448, "body": "@Daiku sorry on mobile device acc - I don&#39;t need to go backwards given an item. Only need to see which items an order has. Should I use HMT? What would you call the model if I use HMT?"}, {"owner": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "edited": false, "score": 0, "creation_date": 1441830232, "post_id": 32487897, "comment_id": 52837597, "body": "As the last link says - it depends on if the join table will have anything other than the two IDs.  If not, than use the HABTM, as it will do the join logic for you automatically (except creating the join table in the migration).  If you do HMT, then you will be defining the third model as an active record model, and you can name it anything you want."}, {"owner": {"reputation": 14709, "user_id": 372654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a811b1b2ef0e9ff66768a8ccc52a18aa?s=128&d=identicon&r=PG", "display_name": "Halil &#214;zg&#252;r", "link": "https://stackoverflow.com/users/372654/halil-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1441832769, "post_id": 32487897, "comment_id": 52838889, "body": "Why it&#39;s many to many? How do <code>items</code> have many <code>orders</code>? Normally orders would have many items and each item would have a product."}, {"owner": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "reply_to_user": {"reputation": 14709, "user_id": 372654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a811b1b2ef0e9ff66768a8ccc52a18aa?s=128&d=identicon&r=PG", "display_name": "Halil &#214;zg&#252;r", "link": "https://stackoverflow.com/users/372654/halil-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1441908780, "post_id": 32487897, "comment_id": 52876827, "body": "@Halil&#214;zg&#252;r I was thinking many orders have many items and items belong to many orders. Is that incorrect?"}, {"owner": {"reputation": 14709, "user_id": 372654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a811b1b2ef0e9ff66768a8ccc52a18aa?s=128&d=identicon&r=PG", "display_name": "Halil &#214;zg&#252;r", "link": "https://stackoverflow.com/users/372654/halil-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1441909547, "post_id": 32487897, "comment_id": 52877221, "body": "@Emma in a normal e-commerce app, order items should belong to a single order, i.e. an item (a product with a quantity) can&#39;t exist in multiple orders. Even if a product is ordered in the exact same quantity in multiple orders, each one would be a different item. Otherwise if an item is canceled from an order, it would be canceled from another person&#39;s order too inadvertently. An example e-commerce db schema: <a href=\"http://www.databaseanswers.org/data_models/b2c.htm\" rel=\"nofollow noreferrer\">databaseanswers.org/data_models/b2c.htm</a>"}, {"owner": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "reply_to_user": {"reputation": 14709, "user_id": 372654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a811b1b2ef0e9ff66768a8ccc52a18aa?s=128&d=identicon&r=PG", "display_name": "Halil &#214;zg&#252;r", "link": "https://stackoverflow.com/users/372654/halil-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1441910232, "post_id": 32487897, "comment_id": 52877625, "body": "@Halil&#214;zg&#252;r In the db schema example you provided, isn&#39;t <code>Order_Items</code> a HMT association joining <code>Orders</code> and <code>Products</code>?"}, {"owner": {"reputation": 14709, "user_id": 372654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a811b1b2ef0e9ff66768a8ccc52a18aa?s=128&d=identicon&r=PG", "display_name": "Halil &#214;zg&#252;r", "link": "https://stackoverflow.com/users/372654/halil-%c3%96zg%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1441914457, "post_id": 32487897, "comment_id": 52879934, "body": "@Emma here is a bare bones Rails implementation: <a href=\"https://gist.github.com/halilim/53aa2402fb2321f3ab27\" rel=\"nofollow noreferrer\">gist.github.com/halilim/53aa2402fb2321f3ab27</a> You can look at <a href=\"https://github.com/spree/spree\" rel=\"nofollow noreferrer\">Spree&#39;s source code</a> for a much more advanced example, and <a href=\"http://www.magereverse.com/\" rel=\"nofollow noreferrer\">Magento&#39;s database diagram</a> if you want to see more than you&#39;d ever hope."}, {"owner": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "reply_to_user": {"reputation": 14709, "user_id": 372654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a811b1b2ef0e9ff66768a8ccc52a18aa?s=128&d=identicon&r=PG", "display_name": "Halil &#214;zg&#252;r", "link": "https://stackoverflow.com/users/372654/halil-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1441921934, "post_id": 32487897, "comment_id": 52883422, "body": "@Halil&#214;zg&#252;r Great examples! From the bare bones implementation, it looks like the <code>Order_Items</code> as HMT is correct?"}, {"owner": {"reputation": 14709, "user_id": 372654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a811b1b2ef0e9ff66768a8ccc52a18aa?s=128&d=identicon&r=PG", "display_name": "Halil &#214;zg&#252;r", "link": "https://stackoverflow.com/users/372654/halil-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1441929473, "post_id": 32487897, "comment_id": 52885625, "body": "@Emma Firstly, I assume you mean &quot;has many through&quot; by HMT, right? If so, products have many orders through order items and orders have many products through order items. You can indirectly relate products and orders to each other through order items. Having said that, if we are to continue with the gist, exactly which part did you find confusing?"}, {"owner": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "reply_to_user": {"reputation": 14709, "user_id": 372654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a811b1b2ef0e9ff66768a8ccc52a18aa?s=128&d=identicon&r=PG", "display_name": "Halil &#214;zg&#252;r", "link": "https://stackoverflow.com/users/372654/halil-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1441930899, "post_id": 32487897, "comment_id": 52885980, "body": "@Halil&#214;zg&#252;r I was confused because your comment above says: <code>Why it&#39;s many to many? How do items have many orders? Normally orders would have many items and each item would have a product.</code> But the gist you created shows that items(products) and orders have a many to many association."}, {"owner": {"reputation": 14709, "user_id": 372654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a811b1b2ef0e9ff66768a8ccc52a18aa?s=128&d=identicon&r=PG", "display_name": "Halil &#214;zg&#252;r", "link": "https://stackoverflow.com/users/372654/halil-%c3%96zg%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1441951525, "post_id": 32487897, "comment_id": 52891297, "body": "@Emma well, I thought you meant it&#39;s possible that <code>OrderItem</code> can have a <code>has_many</code> or a <code>has_and_belongs_to_many</code> to <code>Order</code>, which doesn&#39;t make sense normally. Sorry if I&#39;ve taken it wrong."}], "answers": [{"tags": [], "owner": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "is_accepted": false, "score": -1, "last_activity_date": 1441830772, "creation_date": 1441830772, "answer_id": 32488667, "question_id": 32487897, "link": "https://stackoverflow.com/questions/32487897/hmt-or-habtm-for-orders-and-items/32488667#32488667", "title": "HMT or HABTM for Orders and Items", "body": "<p>This seems like a classic case of HABTM, and the <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow\">example given in the Rails Guides</a> is perfect.  The choice comes down to whether you need any other data or logic on the join model itself.  If so, then use the HMT, where you will create a third active_record model to serve as the join table.  You can name that anything you want.  But it seems like HABTM will work for you, and all you need to setup is the join table with the default name (<code>items_orders</code>) in your migration, and rails will take care of everything else for you.</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n  has_and_belongs_to_many :items\nend\n\nclass Item &lt; ActiveRecord::Base\n  has_and_belongs_to_many :orders\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3853, "user_id": 18197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e68162a00c688d604d5514e0b719b90e?s=128&d=identicon&r=PG", "display_name": "Pavling", "link": "https://stackoverflow.com/users/18197/pavling"}, "is_accepted": true, "score": 3, "last_activity_date": 1441882626, "creation_date": 1441882626, "answer_id": 32499989, "question_id": 32487897, "link": "https://stackoverflow.com/questions/32487897/hmt-or-habtm-for-orders-and-items/32499989#32499989", "title": "HMT or HABTM for Orders and Items", "body": "<p>If you need to know anything else about the relationship of the item on a particular order, you <em>need</em> HMT.</p>\n\n<p>If your items change price in the future, do you want to know how much they were sold for on orders in the past? </p>\n\n<p>In this type of requirement, I've always had many \"LineItem\" records for an order, and the line_item instances belong_to to the item and order, and record the pricing and/or quantity for that order.</p>\n\n<p>HMT vs HABTM? There are so few times that <em>all</em> you need is a many-to-many, that I'd almost always go with HMT for the extra ability to add more information to the association.</p>\n"}], "owner": {"reputation": 4066, "user_id": 4399243, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1382fc0b398211f7db089dd881914ec5?s=128&d=identicon&r=PG&f=1", "display_name": "Onichan", "link": "https://stackoverflow.com/users/4399243/onichan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 32499989, "answer_count": 2, "score": 1, "last_activity_date": 1441882626, "creation_date": 1441827668, "question_id": 32487897, "link": "https://stackoverflow.com/questions/32487897/hmt-or-habtm-for-orders-and-items", "title": "HMT or HABTM for Orders and Items", "body": "<p>Fairly new to rails and trying to understand which relationships to use before going forward.</p>\n\n<p>I have two models: <code>orders</code> and <code>items</code>. This is a many to many relationship, but I'm unsure of which relationship to use.</p>\n\n<p>Orders might have delivery time, quantity of items, etc.</p>\n\n<p>Lastly, what would you call the model joining <code>orders</code> and <code>items</code> if using HMT?</p>\n"}, {"tags": ["ruby", "jekyll"], "answers": [{"tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": true, "score": 1, "last_activity_date": 1441833509, "creation_date": 1441833509, "answer_id": 32489318, "question_id": 32487883, "link": "https://stackoverflow.com/questions/32487883/how-to-set-the-url-site-variable-to-host-and-port-specified-in-jekyll-serve/32489318#32489318", "title": "How to set the `url` site variable to host and port specified in `jekyll serve --host \u2026`?", "body": "<p>If you want to get the full url with port, you can do :</p>\n\n<pre><code>{% assign fullUrlWithPort = site.host | prepend:\"http://\" | append:\":\" | append: site.port %}\n</code></pre>\n\n<p>By default <code>{{ fullUrlWithPort }}</code> will give you <code>http://127.0.0.1:4000</code>.</p>\n\n<p>If you launch a <code>jekyll serve --host myhost --port 1234</code> it will give you a <code>http://myhost:1234</code></p>\n"}], "owner": {"reputation": 1139, "user_id": 1575202, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/7rScQ.png?s=128&g=1", "display_name": "Joel Hamme", "link": "https://stackoverflow.com/users/1575202/joel-hamme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 32489318, "answer_count": 1, "score": 1, "last_activity_date": 1441833509, "creation_date": 1441827596, "question_id": 32487883, "link": "https://stackoverflow.com/questions/32487883/how-to-set-the-url-site-variable-to-host-and-port-specified-in-jekyll-serve", "title": "How to set the `url` site variable to host and port specified in `jekyll serve --host \u2026`?", "body": "<p>How can I access the host and port that <code>jekyll serve</code> runs the site on from inside a jekyll plugin or so, to load my assets with absolute links from the right place?</p>\n\n<p>When I run <code>jekyll serve --host example.local --port 1234</code> I want to change the <code>url</code> var (set to example.com in _config.yml) to the given host and port so that I can use <code>{{ site.url }}/css/site.css</code> without getting my production assets. Also it would be nice to get the default <code>localhost:4000</code> when nothing else is specified.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "edited": false, "score": 0, "creation_date": 1441828437, "post_id": 32487561, "comment_id": 52836743, "body": "Yes singular <code>:channel</code> should be correct for the strong parameters"}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 2086582, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/be2817121a47759fd847df10f0c2fa97?s=128&d=identicon&r=PG", "display_name": "Dave Essery", "link": "https://stackoverflow.com/users/2086582/dave-essery"}, "edited": false, "score": 0, "creation_date": 1441826680, "post_id": 32487620, "comment_id": 52835902, "body": "Yea, I am confused as to why it is pluralising it. Do I need to create this manually though. I would of thought the correct path should be a POST to /channel?"}, {"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 0, "creation_date": 1441826791, "post_id": 32487620, "comment_id": 52835955, "body": "When you are creating a new record, you are posting it to the collection of the existing objects. This is why it&#39;s pluralized :)"}, {"owner": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "edited": false, "score": 0, "creation_date": 1441826875, "post_id": 32487620, "comment_id": 52835998, "body": "The cow is correct.  You are declaring the resource incorrectly in routes.rb"}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "edited": false, "score": 1, "creation_date": 1441826884, "post_id": 32487620, "comment_id": 52836006, "body": "Yeah I think the problem is that he defined <code>resources: channel</code> instead of <code>resources: channels</code> in routes.rb"}, {"owner": {"reputation": 165, "user_id": 2086582, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/be2817121a47759fd847df10f0c2fa97?s=128&d=identicon&r=PG", "display_name": "Dave Essery", "link": "https://stackoverflow.com/users/2086582/dave-essery"}, "edited": false, "score": 0, "creation_date": 1441827967, "post_id": 32487620, "comment_id": 52836525, "body": "Fantastic, thanks all!! So paths and channel are plural and model is singular? I have updated that to channels, renamed my controller and my views folder, and I can now load the form!! However when I post it, I get the same error as posted in my edit, any more thoughts?"}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "edited": false, "score": 0, "creation_date": 1441828615, "post_id": 32487620, "comment_id": 52836835, "body": "Where is this line in your routes coming from? Is it still showing up when you run the rake task? <code>channel_index GET      &#47;channel(.:format)                     channel#index</code>  I would expect  <code>channels GET      &#47;channels(.:format)                     channels#index</code>.  I don&#39;t know if that&#39;s causing your error but it looks odd."}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "edited": false, "score": 0, "creation_date": 1441828970, "post_id": 32487620, "comment_id": 52837014, "body": "Try adding the name=free as a hidden field instead of on the button. It must be that the controller is receiving nothing for the channel. <code>f.hidden_field :plan, :value =&gt; &quot;free&quot;</code>. Also, the field name for &#39;plan&#39; if entering it manually should be <code>channel[plan]</code>"}, {"owner": {"reputation": 165, "user_id": 2086582, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/be2817121a47759fd847df10f0c2fa97?s=128&d=identicon&r=PG", "display_name": "Dave Essery", "link": "https://stackoverflow.com/users/2086582/dave-essery"}, "edited": false, "score": 0, "creation_date": 1441829095, "post_id": 32487620, "comment_id": 52837077, "body": "I figured it out, it appears I have to have at least one field in there, I added a name field and it started working!! I will just modify how I was going to do it slightly, many thanks for your help all!!"}], "tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": true, "score": 1, "last_activity_date": 1441829160, "last_edit_date": 1441829160, "creation_date": 1441826568, "answer_id": 32487620, "question_id": 32487561, "link": "https://stackoverflow.com/questions/32487561/rails-undefined-method-path-for-new/32487620#32487620", "title": "Rails Undefined Method Path for New", "body": "<p>According to your rake task, the path should be </p>\n\n<p><code>channel_path</code></p>\n\n<p>If it's not working with the simple_form_for helper, it's probably because you should have set up your routes as <code>resources: channels</code></p>\n\n<p>UPDATE</p>\n\n<p>The new bug is coming from nothing being received by the controller for :channel </p>\n\n<p>Try adding a field like so</p>\n\n<pre><code>f.hidden_field :plan, :value =&gt; \"free\"\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 2086582, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/be2817121a47759fd847df10f0c2fa97?s=128&d=identicon&r=PG", "display_name": "Dave Essery", "link": "https://stackoverflow.com/users/2086582/dave-essery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "accepted_answer_id": 32487620, "answer_count": 1, "score": 0, "last_activity_date": 1441829162, "creation_date": 1441826333, "last_edit_date": 1441829162, "question_id": 32487561, "link": "https://stackoverflow.com/questions/32487561/rails-undefined-method-path-for-new", "title": "Rails Undefined Method Path for New", "body": "<p>I am relatively new to rails but having a real problem with something that I know should be really simple. I have a model called channel, in it I have a simple new method, in the view I have form but every time I try and load it, I get an error to say:</p>\n\n<pre><code>undefined method `channels_path'\n</code></pre>\n\n<p>My view (new.html.erb) is really simple, for the minute it just has a button in it with a name and a value, it just looks like this:</p>\n\n<pre><code>  &lt;%= simple_form_for @channel do |f| %&gt;\n    &lt;%= f.error_notification %&gt;\n\n    &lt;%= f.button :submit, 'Free Plan', name: 'plan', value: 'free' %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>My Controller has:</p>\n\n<pre><code>  def new\n    @channel = Channel.new\n  end\n</code></pre>\n\n<p>And in my routes I have:</p>\n\n<pre><code>resources :channel\n</code></pre>\n\n<p>Output form a rake routes is:</p>\n\n<pre><code>channel_index GET      /channel(.:format)                     channel#index\n                         POST     /channel(.:format)                     channel#create\n             new_channel GET      /channel/new(.:format)                 channel#new\n            edit_channel GET      /channel/:id/edit(.:format)            channel#edit\n                 channel GET      /channel/:id(.:format)                 channel#show\n                         PATCH    /channel/:id(.:format)                 channel#update\n                         PUT      /channel/:id(.:format)                 channel#update\n                         DELETE   /channel/:id(.:format)                 channel#destroy\n</code></pre>\n\n<p>Which all looks how I expect. But as the error says there is no channels_path, but as far as I am aware, there shouldn't be. </p>\n\n<p>I am sure this is supposed to be really simple but I just cannot see what I am doing wrong. Can anybody help?</p>\n\n<p>Many thanks\nDavid</p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>I have updated the route to be:</p>\n\n<pre><code>resources :channels\n</code></pre>\n\n<p>I can now load the form, however I now get the error when trying to submit it:</p>\n\n<pre><code>param is missing or the value is empty: channel\n</code></pre>\n\n<p>Being caused by:</p>\n\n<pre><code>  # only allow specific params\n  def channel_params\n    params.require(:channel).permit(:name,\n                                    :slug,\n                                    :description,\n                                    :plan,\n                                    :subscription_ends\n    )\n  end\n</code></pre>\n\n<p>I am assuming singular is correct here based on the model, but have tried plural too with no luck. Any more thoughts?</p>\n\n<p>Many thanks</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Got it working in the end, it appears you have to have at least one input in your form. I added an input for the name field and it started working.</p>\n\n<p>Many thanks to everyone that commented</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-hosting"], "comments": [{"owner": {"reputation": 2124, "user_id": 3871352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yb6Z4.jpg?s=128&g=1", "display_name": "Kiloreux", "link": "https://stackoverflow.com/users/3871352/kiloreux"}, "edited": false, "score": 0, "creation_date": 1441826758, "post_id": 32487496, "comment_id": 52835942, "body": "Rails had nothing to do with the domain it&#39;s a framework, just point the DNS to your web server and you are good to go."}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "edited": false, "score": 2, "creation_date": 1441828133, "post_id": 32487496, "comment_id": 52836596, "body": "Kiloreux is correct unless you are using Godaddy hosting? In that case I would recommend you stop what you&#39;re doing and research Heroku"}, {"owner": {"reputation": 2541, "user_id": 1162683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e05cd764cc2ecba1884b309e9dd5df5?s=128&d=identicon&r=PG", "display_name": "penner", "link": "https://stackoverflow.com/users/1162683/penner"}, "edited": false, "score": 1, "creation_date": 1441830768, "post_id": 32487496, "comment_id": 52837878, "body": "You are not going to be able to upload your files like a php app and call it good, rails has more complicated dependencies. Heroku or Digital Ocean are a good idea."}, {"owner": {"reputation": 103, "user_id": 5118213, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-NtPEswJaGoU/AAAAAAAAAAI/AAAAAAAAAOM/w4ukvwX-D6k/photo.jpg?sz=128", "display_name": "Lokesh Waran", "link": "https://stackoverflow.com/users/5118213/lokesh-waran"}, "edited": false, "score": 0, "creation_date": 1441918564, "post_id": 32487496, "comment_id": 52881947, "body": "kiloreux.. i am not getting you correctly can u suggest some links..  Thanks penner.. sign up for Heroku and deployed my first app. But still i have a hosting plan in godaddy and doesnt want to waste that.."}], "answers": [{"tags": [], "owner": {"reputation": 681, "user_id": 3193009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7f05dee3da7c0b816bac01d40c2f5a?s=128&d=identicon&r=PG", "display_name": "Brian Clifton", "link": "https://stackoverflow.com/users/3193009/brian-clifton"}, "is_accepted": false, "score": 1, "last_activity_date": 1441913525, "creation_date": 1441913525, "answer_id": 32510202, "question_id": 32487496, "link": "https://stackoverflow.com/questions/32487496/install-rails-in-godaddy-domain/32510202#32510202", "title": "Install Rails in Godaddy domain", "body": "<p>For a Rails app, the <a href=\"https://www.godaddy.com/hosting/web-hosting.aspx\" rel=\"nofollow\">shared hosting product</a> GoDaddy offers isn't going to offer a new enough version of Ruby/Rails (Ruby is 1.8.7, which I think you can only use Rails 2.3.8)</p>\n\n<p>Your best bet might be to try the new Cloud Servers product:<br>\n<a href=\"https://www.godaddy.com/pro/cloud-servers\" rel=\"nofollow\">https://www.godaddy.com/pro/cloud-servers</a></p>\n\n<p>You can create/destroy/backup VMs via <a href=\"https://developer.godaddy.com/\" rel=\"nofollow\">REST API calls</a> if you wanted to or just simply use the UI they provide. The low-end plan is $5/month USD, but you can upgrade if your app needs it</p>\n"}], "owner": {"reputation": 103, "user_id": 5118213, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-NtPEswJaGoU/AAAAAAAAAAI/AAAAAAAAAOM/w4ukvwX-D6k/photo.jpg?sz=128", "display_name": "Lokesh Waran", "link": "https://stackoverflow.com/users/5118213/lokesh-waran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1441913525, "creation_date": 1441826096, "last_edit_date": 1441827506, "question_id": 32487496, "link": "https://stackoverflow.com/questions/32487496/install-rails-in-godaddy-domain", "title": "Install Rails in Godaddy domain", "body": "<p>I am rails developer and I own a domain in godaddy. i dont want to install wordpress for this site. i just want to create this site with rails. As far as i searched i found it hard to run rails on a godaddy domain. But i dont have a clear idea.\nAs i am create this site fresh i dont have any database migration and such stuffs. Just trying to start developing the site from scratch, (already have a application in local need to deploy that in godaddy). Any help would be highly helpful. Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1441825249, "post_id": 32487234, "comment_id": 52835194, "body": "So replace <code>&#47;^[^@][\\w.-]+@[\\w.-]+[.][a-z]{2,4}$&#47;i </code> with <code>&#47;\\A[^@][\\w.-]+@[\\w.-]+[.][a-z]{2,4}\\z&#47;i </code>. You need to validate the whole string, right?"}], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 5274717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOXUo.jpg?s=128&g=1", "display_name": "Kyle Bachmann", "link": "https://stackoverflow.com/users/5274717/kyle-bachmann"}, "edited": false, "score": 1, "creation_date": 1441828359, "post_id": 32487618, "comment_id": 52836703, "body": "This worked, thank you so much.  I know it was kind of a duplicate question, but the substitutions weren&#39;t working out for me in the other answers.  My application is working again and I&#39;m continuing through the book.  You&#39;re my savior!!"}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1441826566, "creation_date": 1441826566, "answer_id": 32487618, "question_id": 32487234, "link": "https://stackoverflow.com/questions/32487234/regex-breaking-my-model-regex-is-using-multiline-anchors-or/32487618#32487618", "title": "Regex breaking my model: Regex is using multiline anchors (^ or $)", "body": "<p>In RoR, you need to explicitly tell the engine the boundaries, either <code>^</code>  and <code>$</code> with <code>:multiline =&gt; true</code> option to match lines or use <code>\\A</code> and <code>\\z</code> to match whole strings.</p>\n\n<p>So, replace\u00a0</p>\n\n<pre><code>/^[^@][\\w.-]+@[\\w.-]+[.][a-z]{2,4}$/i\n</code></pre>\n\n<p>with\u00a0</p>\n\n<pre><code>/\\A[^@][\\w.-]+@[\\w.-]+[.][a-z]{2,4}\\z/i\n</code></pre>\n\n<p>This allows unambiguous validation and reduces human error.</p>\n"}], "owner": {"reputation": 316, "user_id": 5274717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOXUo.jpg?s=128&g=1", "display_name": "Kyle Bachmann", "link": "https://stackoverflow.com/users/5274717/kyle-bachmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 32487618, "answer_count": 1, "score": 1, "last_activity_date": 1441827381, "creation_date": 1441825041, "last_edit_date": 1441827381, "question_id": 32487234, "link": "https://stackoverflow.com/questions/32487234/regex-breaking-my-model-regex-is-using-multiline-anchors-or", "title": "Regex breaking my model: Regex is using multiline anchors (^ or $)", "body": "<p>I am updating a regex in my <code>Users</code> model, which seems to have broken it.  Whenever I try to do anything with the <code>Users</code> model, I get this error message:</p>\n\n<blockquote>\n  <p>The provided regular expression is using multiline anchors (<code>^</code> or <code>$</code>),\n  which may present a security risk. Did you mean to use <code>\\A</code> and <code>\\z</code>, or\n  forgot to add the <code>:multiline =&gt; true</code> option?</p>\n</blockquote>\n\n<p>The problem arises under the email validation. My <code>User</code> model looks like:</p>\n\n<pre><code>require 'digest'\nclass User &lt; ActiveRecord::Base\n  validates :email, :format =&gt; { :with =&gt; /^[^@][\\w.-]+@[\\w.-]+[.][a-z]{2,4}$/i }, ...\n  ...\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "active-model-serializers"], "answers": [{"tags": [], "owner": {"reputation": 556, "user_id": 1343810, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/634ab278467e8f28f1ac9f981b45e7d0?s=128&d=identicon&r=PG&f=1", "display_name": "droptheplot", "link": "https://stackoverflow.com/users/1343810/droptheplot"}, "is_accepted": false, "score": 1, "last_activity_date": 1441840330, "creation_date": 1441840330, "answer_id": 32490558, "question_id": 32487213, "link": "https://stackoverflow.com/questions/32487213/how-can-i-make-an-activemodelserializer-attribute-optional-at-runtime/32490558#32490558", "title": "How can I make an ActiveModel::Serializer attribute optional at runtime?", "body": "<p>You can remove attributes from serializer, but they should exist.</p>\n\n<pre><code>class SomeSerializer &lt; ActiveModel::Serializer\n  attributes :something\n\n  def attributes\n     super.except(:something) if something\n   end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1510840042, "post_id": 32501989, "comment_id": 81613308, "body": "Doesn&#39;t solve the problem filter is called after the looking for all the attributes so error is still thrown."}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": false, "score": -1, "last_activity_date": 1441888257, "creation_date": 1441888257, "answer_id": 32501989, "question_id": 32487213, "link": "https://stackoverflow.com/questions/32487213/how-can-i-make-an-activemodelserializer-attribute-optional-at-runtime/32501989#32501989", "title": "How can I make an ActiveModel::Serializer attribute optional at runtime?", "body": "<p>You can customize attributes by implementing <a href=\"https://github.com/rails-api/active_model_serializers/tree/0-9-stable#attributes\" rel=\"nofollow\"><code>filter</code></a> method in your serializer. Note, that I describe latest stable (for the time of the writing this post) <code>0.9.x</code> branch.</p>\n\n<pre><code>class PostSerializer &lt; ActiveModel::Serializer\n  attributes :id, :title, :body, :author\n\n  def filter(keys)\n    if scope.admin?\n      keys\n    else\n      keys - [:author]\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1510840208, "post_id": 38984111, "comment_id": 81613452, "body": "The final suggestions doesn&#39;t meet the challenge. OP wants the API consumer to be able to specify any combination of fields rather than a specific, predefined subset."}, {"owner": {"reputation": 328, "user_id": 2985644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/badc7f98e09ae4e83554f3379cbca326?s=128&d=identicon&r=PG", "display_name": "voiski", "link": "https://stackoverflow.com/users/2985644/voiski"}, "reply_to_user": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1510929806, "post_id": 38984111, "comment_id": 81658514, "body": "@Adamantish thanks for this, I didn&#39;t realize that it should be flexible, my bad =("}], "tags": [], "owner": {"reputation": 328, "user_id": 2985644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/badc7f98e09ae4e83554f3379cbca326?s=128&d=identicon&r=PG", "display_name": "voiski", "link": "https://stackoverflow.com/users/2985644/voiski"}, "is_accepted": false, "score": 2, "last_activity_date": 1510929694, "last_edit_date": 1510929694, "creation_date": 1471380125, "answer_id": 38984111, "question_id": 32487213, "link": "https://stackoverflow.com/questions/32487213/how-can-i-make-an-activemodelserializer-attribute-optional-at-runtime/38984111#38984111", "title": "How can I make an ActiveModel::Serializer attribute optional at runtime?", "body": "<p>This happens because the <code>Serializer.attributes</code> method call each field using the <code>ActiveModel.read_attribute</code> method. This method will apply some validations, like <code>validates_presence_of</code> at the model's definition, that will raise the exception. To avoid it I give <em>three bad solutions</em> and <strong>after</strong> a better and simple one:</p>\n\n<ul>\n<li>Change the model definition, but you will miss your validation.</li>\n<li>Overwrite the method <code>ActiveModel.read_attribute</code> to handle this behavior, you will get new challenges.</li>\n<li>Overwrite the <code>Serializer.attributes</code> and instead of call <strong>super</strong>, call <code>object.attributes</code>.</li>\n</ul>\n\n<p>But the best option will be create a new serialize class, to avoid besides effects, with the only fields that you want. Then specify this at the controller class:</p>\n\n<pre><code>render json: People.all.reduced, each_serializer: SimplePersonSerializer\n</code></pre>\n\n<hr>\n\n<p><strong>Edit 1</strong></p>\n\n<p>The right answer should be the one from <a href=\"https://stackoverflow.com/a/6919220/2985644\">Maur\u00edcio Linhares</a>.</p>\n\n<pre><code>render json: result.to_json( only: array_of_fields )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 537235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27c5e3cc3e7d37895ee7ffbbd782e14?s=128&d=identicon&r=PG", "display_name": "robsonmwoc", "link": "https://stackoverflow.com/users/537235/robsonmwoc"}, "is_accepted": false, "score": 4, "last_activity_date": 1566364500, "creation_date": 1566364500, "answer_id": 57584822, "question_id": 32487213, "link": "https://stackoverflow.com/questions/32487213/how-can-i-make-an-activemodelserializer-attribute-optional-at-runtime/57584822#57584822", "title": "How can I make an ActiveModel::Serializer attribute optional at runtime?", "body": "<p>I've found this question while searching for a good alternative to remove optional fields from the json response.</p>\n\n<p>The gem <code>active_model_serializers</code> does have a solution for this. You just need to pass a conditional to the <code>attribute</code> method in the serializer declaration.</p>\n\n<pre><code>class MySelectiveSerializer &lt; ActiveModel::Serializer\n  attributes :id, :anything\n  attribute :something, if: -&gt; { object.something.present? }\nend\n</code></pre>\n\n<p>Perhaps 3 years ago a solution like this doesn't exists, but it's available now. :)</p>\n\n<p>Cheers.</p>\n"}], "owner": {"reputation": 3555, "user_id": 1831118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c240e46e93b7e692ae8319c40f40e7cc?s=128&d=identicon&r=PG", "display_name": "Nathan Hanna", "link": "https://stackoverflow.com/users/1831118/nathan-hanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4611, "favorite_count": 1, "answer_count": 4, "score": 6, "last_activity_date": 1566364500, "creation_date": 1441824950, "last_edit_date": 1441826443, "question_id": 32487213, "link": "https://stackoverflow.com/questions/32487213/how-can-i-make-an-activemodelserializer-attribute-optional-at-runtime", "title": "How can I make an ActiveModel::Serializer attribute optional at runtime?", "body": "<p>I am trying to allow an API request to specify what fields to return on an object.  I can retrieve the object with only the fields specified, but when it is serialized, it throws an error: </p>\n\n<pre><code>ActiveModel::MissingAttributeError (missing attribute: x)\n</code></pre>\n\n<p>How can I achieve this functionality with <code>ActiveModel::Serializer</code> and is it possible?</p>\n"}, {"tags": ["ruby", "include", "eval", "require", "proc"], "comments": [{"owner": {"reputation": 949, "user_id": 4210110, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-V_sAK37z25M/AAAAAAAAAAI/AAAAAAAABsg/kzDEZOpn-UM/photo.jpg?sz=128", "display_name": "Juanjo Salvador", "link": "https://stackoverflow.com/users/4210110/juanjo-salvador"}, "edited": false, "score": 0, "creation_date": 1441824550, "post_id": 32487002, "comment_id": 52834889, "body": "Do you want to import external ruby lib?"}, {"owner": {"reputation": 47230, "user_id": 288032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c0dd04beb96268a1d27e0e86366e5dba?s=128&d=identicon&r=PG", "display_name": "cwd", "link": "https://stackoverflow.com/users/288032/cwd"}, "reply_to_user": {"reputation": 949, "user_id": 4210110, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-V_sAK37z25M/AAAAAAAAAAI/AAAAAAAABsg/kzDEZOpn-UM/photo.jpg?sz=128", "display_name": "Juanjo Salvador", "link": "https://stackoverflow.com/users/4210110/juanjo-salvador"}, "edited": false, "score": 0, "creation_date": 1441824811, "post_id": 32487002, "comment_id": 52835004, "body": "Not particularly, just want to be able to point to a file and have a few lines of code from it run in the current scope"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 949, "user_id": 4210110, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-V_sAK37z25M/AAAAAAAAAAI/AAAAAAAABsg/kzDEZOpn-UM/photo.jpg?sz=128", "display_name": "Juanjo Salvador", "link": "https://stackoverflow.com/users/4210110/juanjo-salvador"}, "edited": false, "score": 1, "creation_date": 1441825495, "post_id": 32487002, "comment_id": 52835335, "body": "@JuanjoSalvador: <code>load</code> doesn&#39;t do that - it only gives an option to prevent the <i>included</i> file from polluting the namespace of the <i>including</i> file."}], "answers": [{"comments": [{"owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 0, "creation_date": 1441826755, "post_id": 32487202, "comment_id": 52835937, "body": "No, the external file does not have to be related to a gem.  It can be, but does not have to be.  The question is quite a bit more complicated than just importing code though, it is asking about scoping issues as well."}], "tags": [], "owner": {"reputation": 949, "user_id": 4210110, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-V_sAK37z25M/AAAAAAAAAAI/AAAAAAAABsg/kzDEZOpn-UM/photo.jpg?sz=128", "display_name": "Juanjo Salvador", "link": "https://stackoverflow.com/users/4210110/juanjo-salvador"}, "is_accepted": false, "score": -1, "last_activity_date": 1441824902, "creation_date": 1441824902, "answer_id": 32487202, "question_id": 32487002, "link": "https://stackoverflow.com/questions/32487002/how-can-i-require-code-from-another-rb-file-like-in-php/32487202#32487202", "title": "How can I &quot;require&quot; code from another .rb file like in PHP?", "body": "<p>To import external <em>.rb file</em> in your code, I'm not sure but I think it have to be a gem.</p>\n\n<p>Use <code>require</code> followed by the name of the gem you want to import.</p>\n\n<p>Example</p>\n\n<pre><code>require 'foobar'\n# do some stuff\n</code></pre>\n\n<p>Or you can use <code>load</code> to import <em>entire rb file</em> </p>\n\n<pre><code>load 'foobar.rb'\n# do some stuff\n</code></pre>\n\n<p>Good luck and sorry for my english</p>\n"}, {"tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": false, "score": 2, "last_activity_date": 1441825608, "last_edit_date": 1441825608, "creation_date": 1441825248, "answer_id": 32487295, "question_id": 32487002, "link": "https://stackoverflow.com/questions/32487002/how-can-i-require-code-from-another-rb-file-like-in-php/32487295#32487295", "title": "How can I &quot;require&quot; code from another .rb file like in PHP?", "body": "<p>To have code run in same binding, you could simply <code>eval</code> the file contents as follows:</p>\n\n<p><strong>example.rb</strong></p>\n\n<pre><code>class Example\n    def self.called_by_include\n      \"value for bar\"\n    end\n\n    def foo\n      puts \"Called foo\"\n    end\n\n    eval( File.read( 'included.rb' ) )\nend\n\nExample.new.bar\n</code></pre>\n\n<p><strong>included.rb</strong></p>\n\n<pre><code>BAR_CONSTANT = called_by_include\ndef bar\n  puts BAR_CONSTANT\nend\n</code></pre>\n\n<p>Running <code>ruby example.rb</code> produces output</p>\n\n<blockquote>\n  <p>value for bar</p>\n</blockquote>\n\n<p>The important thing is the <code>eval( File.read( 'included.rb' ) )</code> code, which if you really wanted you could define as a class method on <code>Object</code>, to allow arbitrary source to be included with a convenience function*. The use of constants, class variables etc just shows influences working in both directions between the two pieces of source code.</p>\n\n<p>It would be bad practice to use this in any production code. Ruby gives you much better tools for meta-programming, such as ability to use mix-ins, re-open classes, define methods from blocks etc.</p>\n\n<hr>\n\n<p>* Something like this</p>\n\n<pre><code>class Object\n  def self.include_source filename\n    eval( File.read( filename ) )\n  end\nend\n</code></pre>\n\n<p>And the line in <code>example.rb</code> would become just</p>\n\n<pre><code>include_source 'included.rb'\n</code></pre>\n\n<p>Again I have to repeat this is not such a great idea . . .</p>\n"}, {"tags": [], "owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "is_accepted": true, "score": 3, "last_activity_date": 1441825291, "creation_date": 1441825291, "answer_id": 32487309, "question_id": 32487002, "link": "https://stackoverflow.com/questions/32487002/how-can-i-require-code-from-another-rb-file-like-in-php/32487309#32487309", "title": "How can I &quot;require&quot; code from another .rb file like in PHP?", "body": "<p>Yes, this is possible, although certainly not something I'd recommend doing. This works:</p>\n\n<p><code>includer.rb</code>:</p>\n\n<pre><code>puts var \n</code></pre>\n\n<p><code>include.rb</code>:</p>\n\n<pre><code>var = \"Hello!\"\n\neval(File.read(\"include.rb\"), binding)\n</code></pre>\n\n<p>Running this (Ruby 2.2.1, Ruby 1.9.3) will print <code>Hello!</code>. It works simply: <code>eval</code> takes an optional binding with which to evaluate the code it is passed, and <code>Kernel#binding</code> returns the current binding. </p>\n"}], "owner": {"reputation": 47230, "user_id": 288032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c0dd04beb96268a1d27e0e86366e5dba?s=128&d=identicon&r=PG", "display_name": "cwd", "link": "https://stackoverflow.com/users/288032/cwd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 1, "accepted_answer_id": 32487309, "answer_count": 3, "score": 2, "last_activity_date": 1441825608, "creation_date": 1441824137, "last_edit_date": 1592644375, "question_id": 32487002, "link": "https://stackoverflow.com/questions/32487002/how-can-i-require-code-from-another-rb-file-like-in-php", "title": "How can I &quot;require&quot; code from another .rb file like in PHP?", "body": "<p>Coming to Ruby from a PHP background, I'm used to being able to use <code>require</code>, <code>require_once</code>, <code>include</code>, or <code>include_once</code> which all have a similar effect, but the key being they continue to process code <em>in the same scope</em> where the <code>include</code> / <code>require</code> command was invoked.</p>\n<h3>Example:</h3>\n<blockquote>\n<p>sub.php</p>\n</blockquote>\n<pre><code>&lt;?php\necho $foo;\n</code></pre>\n<blockquote>\n<p>main.php</p>\n</blockquote>\n<pre><code>&lt;?php\n$foo = 1234;\ninclude('sub.php'); // outputs '1234'\n</code></pre>\n<p>When I first started using Ruby I tried to include / require / require_relative / load other <code>.rb</code> files, and after becoming a little frustrated with not having it work how I would expect it to I decided that there were better ways to go about breaking up large files and that Ruby didn't need to behave in the same way PHP did.</p>\n<p>However, occasionally I feel that for testing purposes it would be nice to to load code from another <code>.rb</code> file in the way PHP does - in the same scope with access to all the same variables - without having to use class / instance variables or constants. Is this possible? Maybe somehow using a proc / binding / or eval command?</p>\n<p>Again, I'm not advocating that this should be used during development - but I am curious if it is possible -  and if so, how?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "delayed-job"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4438666, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000293884783/picture?type=large", "display_name": "Dhonatan Campagnaro", "link": "https://stackoverflow.com/users/4438666/dhonatan-campagnaro"}, "edited": false, "score": 0, "creation_date": 1441907756, "post_id": 32486154, "comment_id": 52876262, "body": "Yes, it&#39;s ok. Without this component, functions normally"}], "tags": [], "owner": {"reputation": 515, "user_id": 4144866, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-kmmVigod6EA/AAAAAAAAAAI/AAAAAAAAAVc/9kcR71k-5I8/photo.jpg?sz=128", "display_name": "rakeshpatra", "link": "https://stackoverflow.com/users/4144866/rakeshpatra"}, "is_accepted": false, "score": 0, "last_activity_date": 1441820882, "creation_date": 1441820882, "answer_id": 32486154, "question_id": 32485901, "link": "https://stackoverflow.com/questions/32485901/error-delayed-job-in-server-rails/32486154#32486154", "title": "error delayed_job in server rails", "body": "<p>You need to check your mailer configuration first ,have you set correct host and port in the mailer configuration?</p>\n"}], "owner": {"reputation": 1, "user_id": 4438666, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000293884783/picture?type=large", "display_name": "Dhonatan Campagnaro", "link": "https://stackoverflow.com/users/4438666/dhonatan-campagnaro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441820882, "creation_date": 1441819925, "question_id": 32485901, "link": "https://stackoverflow.com/questions/32485901/error-delayed-job-in-server-rails", "title": "error delayed_job in server rails", "body": "<p>Error sending e-mail at Delayed Job.\nIt displays the following error:</p>\n\n<p>Job Mailer.newsletter (id=2) FAILED (8 prior attempts) with Errno::ECONNREFUSED: Connection refused - connect(2)</p>\n"}, {"tags": ["ruby", "string", "algorithm"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441820578, "post_id": 32485705, "comment_id": 52832913, "body": "What is &quot;inert&quot;? How are &quot;tag(,)&quot; and &quot;char(&#39;,&#39;)&quot; different?"}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1441820791, "post_id": 32485761, "comment_id": 52833002, "body": "You can use lookbehind to get rid of <code>$1</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441820873, "post_id": 32485761, "comment_id": 52833041, "body": "How is a newline character relevant?"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441820966, "post_id": 32485761, "comment_id": 52833080, "body": "or <code>(?&lt;=\\d)(?=(?:\\d{2})*\\d{3}$)</code> replace with <code>,</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441821805, "post_id": 32485761, "comment_id": 52833513, "body": "Avainash, yes, but please disregard my comment. I misunderstood your regex."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441833970, "post_id": 32485761, "comment_id": 52839459, "body": "I believe you want <code>r = &#47;(\\d{1,2})(?=(?:\\d{2})*\\d{3}$)&#47;; s.gsub(r, &quot;#{&#39;\\1&#39;},&quot;)</code>."}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 1, "last_activity_date": 1441819341, "creation_date": 1441819341, "answer_id": 32485761, "question_id": 32485705, "link": "https://stackoverflow.com/questions/32485705/how-to-insert-char-at-multiple-position-from-end-of-the-string/32485761#32485761", "title": "how to insert char at multiple position from end of the string", "body": "<p>Use the below positive lookahead based regex.</p>\n\n<pre><code>gsub(/(\\d)(?=(?:\\d{2})*\\d{3}$)/, \"$1,\")\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/iM2pO9/1\" rel=\"nofollow\">DEMO</a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1441844448, "last_edit_date": 1441844448, "creation_date": 1441823341, "answer_id": 32486769, "question_id": 32485705, "link": "https://stackoverflow.com/questions/32485705/how-to-insert-char-at-multiple-position-from-end-of-the-string/32486769#32486769", "title": "how to insert char at multiple position from end of the string", "body": "<p>Here are two ways, the first using a regular expression, the last just inserting commas in a loop.</p>\n\n<pre><code>a = %w| 100000000 1000 100 100000 10000 |\n  #=&gt; [\"100000000\", \"1000\", \"100\", \"100000\", \"10000\"]\n</code></pre>\n\n<p><strong>#1 Use a regex</strong></p>\n\n<pre><code>r = /\n    (?&lt;=\\d)    # match digit in positive lookbehind\n    \\d{2}      # match two digits\n    (?=        # begin positive lookahead\n    (?:\\d{2})* # match two digits, repeated zero or more times\n    \\d         # match last digit\n    \\z         # match end of string\n    )          # end positive lookahead\n    /x         # extended mode\n\na.each { |s| puts \"#{s} -&gt; #{ s.gsub(r) { |ss| ',' + ss } }\" }\n100000000 -&gt; 10,00,00,000\n1000 -&gt; 1,000\n100 -&gt; 100\n100000 -&gt; 1,00,000\n10000 -&gt; 10,000\n</code></pre>\n\n<p>This regex is similar to the one given earlier by @Avinish, but I chose to use a positive lookbehind and no capture group, and presented it in extended mode to help readers understand how it worked. I would use a regular expression here.   </p>\n\n<p><strong>#2 Insert commas</strong></p>\n\n<p>If you do not wish to use a regular expression, you could determine the position of the last comma to insert (<code>p</code> below), the number of commas to insert (<code>n</code> below) and then insert them, back to front:</p>\n\n<pre><code>def insert_commas(string)\n  sz = string.size\n  str = string.dup\n  p = sz - 3\n  n = (sz - 2)/2\n  n.times { str.insert(p, ','); p -= 2 }\n  str\nend\n\na.each { |s| puts \"#{s} -&gt; #{insert_commas(s)}\" }\n100000000 -&gt; 10,00,00,000\n1000 -&gt; 1,000\n100 -&gt; 100\n100000 -&gt; 1,00,000\n10000 -&gt; 10,000\n</code></pre>\n\n<p>I <code>dup</code>ed <code>string</code> on the assumption you did not want to mutate <code>string</code>.</p>\n\n<p>Alternatively,</p>\n\n<pre><code>def insert_commas(string)\n  sz = string.size\n  return string if sz &lt; 4\n  p = sz.even? ? 1 : 2\n  string[0,p] + string[p..-2].gsub(/\\d{2}/) { |s| \",#{s}\" } + string[-1]\nend\n</code></pre>\n"}], "owner": {"reputation": 152, "user_id": 5103241, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed50e850919501d48c8125a7e9cce169?s=128&d=identicon&r=PG&f=1", "display_name": "SidJj", "link": "https://stackoverflow.com/users/5103241/sidjj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 32486769, "answer_count": 2, "score": 0, "last_activity_date": 1441844448, "creation_date": 1441819134, "last_edit_date": 1441822353, "question_id": 32485705, "link": "https://stackoverflow.com/questions/32485705/how-to-insert-char-at-multiple-position-from-end-of-the-string", "title": "how to insert char at multiple position from end of the string", "body": "<p>input like this:</p>\n\n<pre><code>100000000\n1000\n100\n100000\n10000\n</code></pre>\n\n<p>i need to start inserting char (,) from end of the string.first time after three char from end and then repeat the insert (,) after every 2 char</p>\n\n<p>output</p>\n\n<pre><code>10,00,00,000\n1,000\n100\n1,00,000\n10,000\n</code></pre>\n\n<p>any hint guys how can i do this, i need to start inserting char(',')  from end of the string. </p>\n\n<p>thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1441820483, "post_id": 32485682, "comment_id": 52832857, "body": "You&#39;ve set this up right, it&#39;s just that one of your players doesn&#39;t have a <code>Team</code> association.  in rails console do <code>ids = Player.all.pluck(:id)</code> then <code>Ownership.where.not(player_id: ids)</code> - this should show you who doesn&#39;t have the association set up."}], "answers": [{"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 1, "last_activity_date": 1441820274, "last_edit_date": 1441820274, "creation_date": 1441819962, "answer_id": 32485915, "question_id": 32485682, "link": "https://stackoverflow.com/questions/32485682/rails-nomethoderror-in-index-view-trying-to-understand-activerecord-associati/32485915#32485915", "title": "Rails - NoMethodError in index view, trying to understand ActiveRecord associations", "body": "<p>Seems like, some of your players don't have an associated team, so <code>player.team</code> is <code>nil</code> for them. And, in that case it's failing to get the team name with the error message:</p>\n\n<pre><code>NoMethodError in Players#index undefined method `name' for nil:NilClass\n</code></pre>\n\n<p>Try to use <a href=\"http://apidock.com/rails/Object/try\" rel=\"nofollow\">try</a> by changing:</p>\n\n<pre><code>&lt;td&gt;&lt;%= player.team.name %&gt;\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>&lt;td&gt;&lt;%= player.try(:team).try(:name) %&gt;\n</code></pre>\n\n<p>And, <code>Player.team</code> is wrong, you can't do that as you did not define any  class method <code>team</code> in Player class.</p>\n"}], "owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 32485915, "answer_count": 1, "score": 1, "last_activity_date": 1441820274, "creation_date": 1441819034, "question_id": 32485682, "link": "https://stackoverflow.com/questions/32485682/rails-nomethoderror-in-index-view-trying-to-understand-activerecord-associati", "title": "Rails - NoMethodError in index view, trying to understand ActiveRecord associations", "body": "<p>I will post all of relevent files below, first let me explain the problem. I have 3 models, Players, Teams and Ownerships. Players and Team both own Ownership. Players have a :team through their relationship with Ownerships (has_one :team, through: :ownership).</p>\n\n<p>If I display a Player using the show action, I can access all of the attributes of Team, including the logo that is a paperclip attachment. </p>\n\n<p>If I display all of the Players using the index action, I cannot access any of the Team attributes. If I display the team like this, &lt;%= player.team %> , it displays an object reference like this #Team:0x007fef0b68cb10. If I try and access attributes for Team, &lt;%= player.team.name %>, I get: </p>\n\n<pre><code>NoMethodError in Players#index undefined method `name' for nil:NilClass\n</code></pre>\n\n<p>My question is this: How can I create an index method for Players so that I can display the attributes for Team in the index view? </p>\n\n<p>I have tried changing my index method to the following:</p>\n\n<pre><code>def index\n@players = Player.all.sort_by{ |x| [x.position, x.last_name] }\n@Team = Player.team  \nend\n</code></pre>\n\n<p>but it fails with </p>\n\n<pre><code> undefined method `team' for #\n</code></pre>\n\n<p>The models: </p>\n\n<pre><code>class Player &lt; ActiveRecord::Base\nhas_one :team, through: :ownership\nhas_one :ownership\n\nvalidates :name, presence: true\nvalidates :position, presence: true\n\ndef last_name\nself.name.split(' ')[1]\nend\nend\n\nclass Ownership &lt; ActiveRecord::Base\nbelongs_to :player\nbelongs_to :team\n\nvalidates :round, :pick, :team_id, presence: true\nend\n\nclass Team &lt; ActiveRecord::Base\nhas_many :ownerships\nhas_many :players, through: :ownerships \n\nvalidates :name, presence: true\nvalidates :division, presence: true\n\n has_attached_file :logo , :styles =&gt; { :small =&gt; '10&gt;', :medium =&gt; '40&gt;', :large =&gt; '60&gt;' }\n validates_attachment_content_type :logo, :content_type =&gt; [\"image/jpg\", \"image/jpeg\", \"image/png\", \"image/gif\"]\n end\n</code></pre>\n\n<p>The Players Controller:</p>\n\n<pre><code> class PlayersController &lt; ApplicationController\n def index\n @players = Player.all.sort_by{ |x| [x.position, x.last_name] }\n end\n\n def not_picked\n @players = Player.all.select { |m| m.team == nil}.sort_by{ |x| [x.position, x.last_name] }\n end\n\n def show\n  @player = Player.find(params[:id])\n end\n\n private\n\n def player_params\n params.require(:player).permit(:name, :position)\n end\n end\n</code></pre>\n\n<p>The relevant part of the Players index.html.erb:</p>\n\n<pre><code>  &lt;% @players.each do |player| %&gt;\n   &lt;tr&gt;\n   &lt;td&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to player.name, player %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= player.position %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= player.team.name %&gt; &lt;/td&gt; &lt;!--This throws the error --&gt;\n</code></pre>\n\n<p>The Players show.html.erb (works fine):</p>\n\n<pre><code> &lt;%= render 'welcome/menu' %&gt;\n\n &lt;%= @player.name %&gt;\n\n &lt;%= @player.team.name %&gt;\n\n &lt;%= @player.ownership.pick %&gt;\n\n &lt;%= @player.ownership.round %&gt;\n</code></pre>\n\n\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 0, "creation_date": 1441817392, "post_id": 32485028, "comment_id": 52831322, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/16237734/how-to-simply-validate-a-checkbox-in-rails\">How to simply validate a checkbox in rails</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": false, "score": 1, "last_activity_date": 1441817296, "creation_date": 1441817296, "answer_id": 32485203, "question_id": 32485028, "link": "https://stackoverflow.com/questions/32485028/ruby-on-rails-3-checkbox-validations/32485203#32485203", "title": "Ruby on Rails 3 checkbox validations?", "body": "<p>If you have a simple checkbox that you want to validate as being checked, use:</p>\n\n<pre><code>validates :some_checkbox, :acceptance =&gt; true\n</code></pre>\n\n<p>If you have a list of checkboxes or otherwise want something more complicated, set up a custom validator method in your controller:</p>\n\n<pre><code>validate :custom_checkbox_validation\n\ndef custom_checkbox_validation\n  unless (your condition) errors.add(:base, \"your error message\") \nend\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 4729071, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/84e71b5dd68a02da991225f3effe3b20?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/4729071/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1441817296, "creation_date": 1441816723, "question_id": 32485028, "link": "https://stackoverflow.com/questions/32485028/ruby-on-rails-3-checkbox-validations", "title": "Ruby on Rails 3 checkbox validations?", "body": "<pre><code>- @offering.training.each do |train|\n    = check_box_tag \"train_ids[#{train.id}]\", train.id\n    = train.text\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class Training &lt; ActiveRecord::Base\n  attr_accessible :text\n\n  belongs_to :offering\n\n validates :text, presence: true \nend\n</code></pre>\n\n<p>How do you validate checkboxes in rails 3? The following code doesn't work at the moment. I would appreciate your help guys. Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1441815981, "post_id": 32484751, "comment_id": 52830539, "body": "One word for you: <code>SIGKILL</code>. As in <code>killall -m ruby -9</code>. I do it all the time with <code>spring</code>. That thing just won&#39;t exit gracefully."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1441816468, "post_id": 32484751, "comment_id": 52830819, "body": "As to why it happens on your machine, I have no idea. Something must be different. Compare the specs/configs of the two machines."}, {"owner": {"reputation": 2241, "user_id": 2140271, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ea24c17719a975fb38c107a60f4b3802?s=128&d=identicon&r=PG", "display_name": "Vincent Fourmond", "link": "https://stackoverflow.com/users/2140271/vincent-fourmond"}, "edited": false, "score": 0, "creation_date": 1441816650, "post_id": 32484751, "comment_id": 52830916, "body": "killing a suspended process does not work, unless you kill it with SIGKILL."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1441818671, "post_id": 32484751, "comment_id": 52831987, "body": "There&#39;s a GitHub issue: <a href=\"https://github.com/pry/pry/issues/1183\" rel=\"nofollow noreferrer\">github.com/pry/pry/issues/1183</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1441828561, "post_id": 32484751, "comment_id": 52836814, "body": "@Sergio, I am reminded of a <a href=\"https://www.youtube.com/watch?v=Dug-G9xVdVs&amp;feature=youtu.be\" rel=\"nofollow noreferrer\">brief, but famous, conversation</a> between Benjamin and one of his elders in the movie <i>The Graduate</i>."}], "answers": [{"comments": [{"owner": {"reputation": 330, "user_id": 2631858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1a9f7c2c09527821ae9e6ba2d659ad0e?s=128&d=identicon&r=PG", "display_name": "Raphi", "link": "https://stackoverflow.com/users/2631858/raphi"}, "edited": false, "score": 0, "creation_date": 1441817316, "post_id": 32484971, "comment_id": 52831270, "body": "awesome, no more constantly re-cding into the same directory, thanks!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1441818809, "post_id": 32484971, "comment_id": 52832046, "body": "Or just <code>fg</code> to resume the current job"}], "tags": [], "owner": {"reputation": 85633, "user_id": 400056, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9f2bfb454da13e7a17d5ec6df6aac25f?s=128&d=identicon&r=PG", "display_name": "DarkDust", "link": "https://stackoverflow.com/users/400056/darkdust"}, "is_accepted": true, "score": 2, "last_activity_date": 1441816518, "creation_date": 1441816518, "answer_id": 32484971, "question_id": 32484751, "link": "https://stackoverflow.com/questions/32484751/trying-to-exit-ruby-processes/32484971#32484971", "title": "Trying to exit Ruby processes", "body": "<p>Killing <em>all</em> your Ruby instances is a shotgun approach; you might hit targets you didn't intend, so I suggest to avoid it.</p>\n\n<p>When your shell doesn't show what you're typing any more you need to (blindly) enter <code>reset</code> to reset the terminal.</p>\n\n<p><kbd>Ctrl</kbd>+<kbd>Z</kbd> doesn't kill your process, it just get's suspended. You should get an output that tells you a job number, like:</p>\n\n<pre><code>[1]  + 95295 suspended  man reset\n</code></pre>\n\n<p>Here, 1 is the job number. You can then resume the command by typing <code>fg %&lt;jobnumber&gt;</code>, in this example <code>fg %1</code>. Or you can kill it with <code>kill -9 %&lt;jobnumber&gt;</code>, like <code>kill -9 %1</code>.</p>\n"}], "owner": {"reputation": 330, "user_id": 2631858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1a9f7c2c09527821ae9e6ba2d659ad0e?s=128&d=identicon&r=PG", "display_name": "Raphi", "link": "https://stackoverflow.com/users/2631858/raphi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 32484971, "answer_count": 1, "score": 0, "last_activity_date": 1441816660, "creation_date": 1441815813, "last_edit_date": 1441816660, "question_id": 32484751, "link": "https://stackoverflow.com/questions/32484751/trying-to-exit-ruby-processes", "title": "Trying to exit Ruby processes", "body": "<p>When I attempt to exit ruby processes, namely, specs, rails console, and <code>binding.pry</code> calls, there are two options: ctrl+c, ctrl+z, or if things are really stuck, open a separate tab and <code>killall ruby</code>. However, when I ctrl+c the first time, the terminal outputs <code>Exiting... Interrupt again to exit immediately.</code> but hangs permanently. If I ctrl+c again to force exit, it successfully exits. However, from that point on, I can no longer see what I'm typing into the shell. So if I type <code>ls</code>, the line will still appear blank, but if I hit enter, it will successfully execute the <code>ls</code> command. </p>\n\n<p>When I ctrl+z, it manages to stop the process successfully. However, after doing this a few times, I wind up with a bunch of ruby processes running, which seem to block running new ruby processes. In this scenario, <code>killall ruby</code> does nothing (nor does any derivative such as looking up by <code>pid</code>). I have to open activity monitor (mac) and force quit each proc individually.</p>\n\n<p>Any ideas how I managed to get myself into this/how to resolve it?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 201, "user_id": 3591126, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fe5ae17b79e1cafba58a5b3e55600af4?s=128&d=identicon&r=PG&f=1", "display_name": "user3591126", "link": "https://stackoverflow.com/users/3591126/user3591126"}, "edited": false, "score": 0, "creation_date": 1441816390, "post_id": 32484670, "comment_id": 52830777, "body": "No. I can&#39;t. It already has an answer."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1441816869, "post_id": 32484670, "comment_id": 52831030, "body": "Are the names unique and identical in both arrays?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1441817153, "post_id": 32484670, "comment_id": 52831192, "body": "A quick search on <a href=\"http://stackoverflow.com/search?q=%5Bruby%5D+sort+array+based+on+another+array\">&quot;&#91;ruby&#93; sort array based on another array&quot;</a> will find other versions of this question."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1441817346, "post_id": 32484670, "comment_id": 52831293, "body": "@muistooshort I&#39;ve reopened the question - I think comparing / sorting by identical attributes is a special case and there might be more specific answers to this question"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1441820894, "post_id": 32484922, "comment_id": 52833051, "body": "Sorting without using <code>sort</code>, it took me a while to understand what&#39;s going on :-)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1441821040, "post_id": 32484922, "comment_id": 52833112, "body": "@Stefan I considered modifying <code>array1</code> into an appropriate structure. You considered modifying <code>array2</code>. From the point of view that the question is to reorder <code>array1</code>, your answer may make more sense."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 5, "last_activity_date": 1441816343, "creation_date": 1441816343, "answer_id": 32484922, "question_id": 32484670, "link": "https://stackoverflow.com/questions/32484670/comparing-sorting-array-of-hashes-in-ruby/32484922#32484922", "title": "Comparing &amp; sorting array of hashes in Ruby", "body": "<pre><code>h = array1.each_with_object({}){|e, h| h[e[:name]] = e}\narray1 = array2.map{|e| h[e[:name]]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6466, "user_id": 45230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb88c4b78fed25cdfe77a6fa00dfd07d?s=128&d=identicon&r=PG", "display_name": "Zach Langley", "link": "https://stackoverflow.com/users/45230/zach-langley"}, "is_accepted": true, "score": 5, "last_activity_date": 1441839073, "last_edit_date": 1441839073, "creation_date": 1441817029, "answer_id": 32485127, "question_id": 32484670, "link": "https://stackoverflow.com/questions/32484670/comparing-sorting-array-of-hashes-in-ruby/32485127#32485127", "title": "Comparing &amp; sorting array of hashes in Ruby", "body": "<p>Here's a simple way to do it given your current data structure.</p>\n\n<pre><code>array1 = array1.sort_by { |x| array2.find_index { |y| y[:name] == x[:name] } }\n</code></pre>\n\n<p>However, note that <code>find_index</code> takes O(n) time. This can be improved by using a different model for your data or by doing some preprocessing (e.g., see Stefan's answer).</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 7, "last_activity_date": 1441817920, "creation_date": 1441817920, "answer_id": 32485392, "question_id": 32484670, "link": "https://stackoverflow.com/questions/32484670/comparing-sorting-array-of-hashes-in-ruby/32485392#32485392", "title": "Comparing &amp; sorting array of hashes in Ruby", "body": "<p>You could build a <code>name =&gt; index</code> hash:</p>\n\n<pre><code>h = array2.map { |e| e[:name] }.each_with_index.to_h\n#=&gt; {\"grape\"=&gt;0, \"apple\"=&gt;1, \"pear\"=&gt;2}\n</code></pre>\n\n<p>And sort by that hash:</p>\n\n<pre><code>array1.sort_by { |e| h[e[:name]] }\n#=&gt; [{:name=&gt;\"grape\", :quantity=&gt;10}, {:name=&gt;\"apple\", :quantity=&gt;2}, {:name=&gt;\"pear\", :quantity=&gt;3}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1441819180, "post_id": 32485399, "comment_id": 52832228, "body": "Try to benchmark larger arrays: <code>100.times { |i| @array1 &lt;&lt; {name:i}; @array2 &lt;&lt; {name:i} }</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441862420, "post_id": 32485399, "comment_id": 52847310, "body": "Can you add the one I just posted? It appears relatively fast for larger arrays."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441863323, "post_id": 32485399, "comment_id": 52847674, "body": "@CarySwoveland yours appears to be a winner amongst Sawa&#39;s: it is in fastest group for both small and huge arrays."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1441863282, "last_edit_date": 1441863282, "creation_date": 1441817958, "answer_id": 32485399, "question_id": 32484670, "link": "https://stackoverflow.com/questions/32484670/comparing-sorting-array-of-hashes-in-ruby/32485399#32485399", "title": "Comparing &amp; sorting array of hashes in Ruby", "body": "<pre><code>array2.map { |h2| array1.detect { |h1| h1[:name] == h2[:name] } }\n</code></pre>\n\n<hr>\n\n<pre><code>require 'benchmark'\n\n@array1 = [{name: \"apple\", quantity: 2}, {name: \"grape\", quantity: 10}, {name: \"pear\", quantity: 3}]\n@array2 = [{name: \"grape\", freshness: 9}, {name: \"apple\", freshness: 7}, {name: \"pear\", freshness: 10}]\n\nn = 500_000\nBenchmark.bm do |x|\n  x.report {n.times { @array2.map { |h2| @array1.detect { |h1| h1[:name] == h2[:name] } } } }\n  x.report {n.times { @array1.sort_by { |x| @array2.find_index { |y| y[:name] == x[:name] } } } }\n  x.report {n.times { h = @array1.each_with_object({}){|e, h| h[e[:name]] = e} ; @array1 = @array2.map{|e| h[e[:name]] } } }\n  x.report {n.times { h = @array2.map { |e| e[:name] }.each_with_index.to_h ; @array1.sort_by { |e| h[e[:name]] } }}\n  x.report {n.times { @array1.each_with_object({}) { |g,h| h[g[:name]] = g }.values_at(*@array2.map { |g| g[:name] }) }}\nend\n\n    user     system      total        real\n0.960000   0.000000   0.960000 (  1.064233)\n1.040000   0.020000   1.060000 (  1.291731)\n0.850000   0.000000   0.850000 (  1.064816)\n1.680000   0.000000   1.680000 (  2.131733)\n0.840000   0.000000   0.840000 (  1.057844)\n</code></pre>\n\n<p>For large array, on the other hand, @sawa and @Stefan gave equally good results (added a Cary's solution):</p>\n\n<pre><code>100.times { |i| @array1 &lt;&lt; {name:i}; @array2 &lt;&lt; {name:i} }\n@array1.shuffle!\n@array2.shuffle!\n\n    user     system      total        real\n5.970000   0.000000   5.970000 (  6.154653)\n4.980000   0.010000   4.990000 (  5.111118)\n0.450000   0.010000   0.460000 (  0.469722)\n0.640000   0.010000   0.650000 (  0.655721)\n0.480000   0.010000   0.490000 (  0.490590)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1441862423, "creation_date": 1441862423, "answer_id": 32493716, "question_id": 32484670, "link": "https://stackoverflow.com/questions/32484670/comparing-sorting-array-of-hashes-in-ruby/32493716#32493716", "title": "Comparing &amp; sorting array of hashes in Ruby", "body": "<pre><code>array1.each_with_object({}) { |g,h| h[g[:name]] = g }.\n  values_at(*array2.map { |g| g[:name] })\n  #=&gt; [{:name=&gt;\"grape\", :quantity=&gt;10}, {:name=&gt;\"apple\", :quantity=&gt;2},\n  #    {:name=&gt;\"pear\", :quantity=&gt;3}] \n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 2980169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63eeb46eeba9b202fdfa9611b385469d?s=128&d=identicon&r=PG&f=1", "display_name": "user2980169", "link": "https://stackoverflow.com/users/2980169/user2980169"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 32485127, "answer_count": 5, "score": 6, "last_activity_date": 1441863282, "creation_date": 1441815579, "last_edit_date": 1441821666, "question_id": 32484670, "link": "https://stackoverflow.com/questions/32484670/comparing-sorting-array-of-hashes-in-ruby", "title": "Comparing &amp; sorting array of hashes in Ruby", "body": "<p>I have two arrays. They have different attributes.</p>\n\n<pre><code>array1 = [{name: \"apple\", quantity: 2}, {name: \"grape\", quantity: 10}, {name: \"pear\", quantity: 3}]\narray2 = [{name: \"grape\", freshness: 9}, {name: \"apple\", freshness: 7}, {name: \"pear\", freshness: 10}]\n</code></pre>\n\n<p>I would like to sort <code>array1</code> based on <code>array2</code>'s order, by name. The result would be:</p>\n\n<pre><code>array1 = [{name: \"grape\", quantity: 10}, {name: \"apple\", quantity: 2}, {name: \"pear\", quantity: 3}]\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 840, "user_id": 779145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bdefe558051edb191c780618bad2f04?s=128&d=identicon&r=PG", "display_name": "Marcin Olichwirowicz", "link": "https://stackoverflow.com/users/779145/marcin-olichwirowicz"}, "edited": false, "score": 0, "creation_date": 1441813172, "post_id": 32483783, "comment_id": 52828536, "body": "Dude, the example shows just strings concatenation"}, {"owner": {"reputation": 936, "user_id": 5080273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b26b400d54f2a52add7900c381fb1778?s=128&d=identicon&r=PG&f=1", "display_name": "semiflex", "link": "https://stackoverflow.com/users/5080273/semiflex"}, "reply_to_user": {"reputation": 840, "user_id": 779145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bdefe558051edb191c780618bad2f04?s=128&d=identicon&r=PG", "display_name": "Marcin Olichwirowicz", "link": "https://stackoverflow.com/users/779145/marcin-olichwirowicz"}, "edited": false, "score": 0, "creation_date": 1441813303, "post_id": 32483783, "comment_id": 52828629, "body": "My bad, I&#39;ve added the line of code that&#39;s meant to show you all the details from the page."}], "answers": [{"tags": [], "owner": {"reputation": 2591, "user_id": 2689541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb8ec80d1ae2fd19fb7629da7e702db?s=128&d=identicon&r=PG&f=1", "display_name": "haradwaith", "link": "https://stackoverflow.com/users/2689541/haradwaith"}, "is_accepted": true, "score": 2, "last_activity_date": 1441820762, "last_edit_date": 1441820762, "creation_date": 1441817136, "answer_id": 32485169, "question_id": 32483783, "link": "https://stackoverflow.com/questions/32483783/error-after-trying-to-access-xml-zlibbuferror-ruby/32485169#32485169", "title": "Error after trying to access xml (Zlib::BufError) (Ruby)", "body": "<p>There is something wrong with the way this API server is encoding the data. To bypass this, you can simple say in the HTTP header that you don't accept any kind of encoding:</p>\n\n<pre><code>opener = open(fullurl, 'Accept-Encoding' =&gt; '') {|f| f.read }\n</code></pre>\n"}], "owner": {"reputation": 936, "user_id": 5080273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b26b400d54f2a52add7900c381fb1778?s=128&d=identicon&r=PG&f=1", "display_name": "semiflex", "link": "https://stackoverflow.com/users/5080273/semiflex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 32485169, "answer_count": 1, "score": 1, "last_activity_date": 1441820762, "creation_date": 1441812919, "last_edit_date": 1441813274, "question_id": 32483783, "link": "https://stackoverflow.com/questions/32483783/error-after-trying-to-access-xml-zlibbuferror-ruby", "title": "Error after trying to access xml (Zlib::BufError) (Ruby)", "body": "<p>I keep getting and error whenever I try and access an XML file in Ruby. This is my code:</p>\n\n<pre><code>require 'rubygems'\nrequire 'net/http'\nrequire 'uri'\nrequire 'json'\nrequire 'open-uri'\n\n\nurl = 'http://access.alchemyapi.com/calls'\nservice = '/text/TextGetRankedTaxonomy'\napikey = '?apikey=4317fce9281094613deee9ebcc5aaf5238cd0748'\nthething = '&amp;text='\ntext = 'men%27s%20white%20crew%20neck%20shirt'\n\nfullurl = url + service + apikey + thething + text \n\nopener  = open(fullurl) {|f| f.read }\n</code></pre>\n\n<p>Here is the error:</p>\n\n<pre><code>C:/Ruby21/lib/ruby/2.1.0/net/http/response.rb:357:in `finish': buffer error (Zlib::BufError)\n    from C:/Ruby21/lib/ruby/2.1.0/net/http/response.rb:357:in `finish'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http/response.rb:262:in `ensure in inflater'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http/response.rb:262:in `inflater'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http/response.rb:274:in `read_body_0'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http/response.rb:201:in `read_body'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http/response.rb:226:in `body'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http/response.rb:163:in `reading_body'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:1420:in `block in transport_request'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:1411:in `catch'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:1411:in `transport_request'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:1384:in `request'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:509:in `block in post_form'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:853:in `start'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:583:in `start'\n    from C:/Ruby21/lib/ruby/2.1.0/net/http.rb:507:in `post_form'\n    from C:/Users/KVadher/Desktop/test151:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>Is there anything I can do to either solve the error or run past it? </p>\n"}, {"tags": ["ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1441818357, "post_id": 32483749, "comment_id": 52831823, "body": "@user3813256 I&#39;m trying to help you. Do you have constructive feedback?"}, {"owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1441854659, "post_id": 32483749, "comment_id": 52845047, "body": "apologies if you did not remove my first comment and downvoted my question- I thought you removed my comment and downvoted my question when I simply made a mistake.  Perhaps I was mistaken."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1441888409, "post_id": 32483749, "comment_id": 52863268, "body": "@user3813256 I deleted my entire first answer, as it was no longer relevant, after you fixed your typo. Even if I didn&#39;t delete my answer, I would have deleted your comment, as your edit made it obsolete. Comments on this site are <i>temporary</i> and can be deleted at any time, please remember this. Please also remember that receiving a downvote is absolutely not an excuse to be abusive to other users, especially since you have no idea who is actually downvoting you."}, {"owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1441891527, "post_id": 32483749, "comment_id": 52865536, "body": "can we simply call a truce :)  I wish you the best.  Thank you for answering on both cases.  I resolved the issue earlier (same as you mentioned)."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": -1, "last_activity_date": 1441812818, "creation_date": 1441812818, "answer_id": 32483749, "question_id": 32483037, "link": "https://stackoverflow.com/questions/32483037/syntax-for-ruby-using-activerecord-sinatra-not-using-rails/32483749#32483749", "title": "syntax for ruby using activerecord &amp; sinatra (not using rails)", "body": "<p>There is no <code>admin_id</code> on your <code>bills</code> table, so you haven't run your migration in its current state.</p>\n\n<p>You may need to run migrations...</p>\n\n<pre><code>$ rake db:migrate\n</code></pre>\n\n<p>or <em>re-run</em> your migration if you've modified it after previously running it. Changing a migration doesn't affect the actual database in any way unless you forcibly re-run that migration. If this is the last migration, you can do:</p>\n\n<pre><code>$ rake db:redo\n</code></pre>\n\n<p>If it's not the last migration, you can supply a <code>STEP</code> argument to tell <code>rake</code> how many migrations downwards it should go.</p>\n"}], "owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 32483749, "answer_count": 1, "score": -2, "last_activity_date": 1441812818, "creation_date": 1441810763, "last_edit_date": 1441811861, "question_id": 32483037, "link": "https://stackoverflow.com/questions/32483037/syntax-for-ruby-using-activerecord-sinatra-not-using-rails", "title": "syntax for ruby using activerecord &amp; sinatra (not using rails)", "body": "<p>I have a reference to a Model object called Admin which has a field called id.   The value gets printed out in the puts line.  I now need to pass in that ID into an ActiveRecord call to create another object (where it serves as foreign key) as follows but it throws an exception copied below (the admin.id does not get picked up in the Bill.create call):</p>\n\n<pre><code>admin = Admin.find_by(email:email)\nputs \"admin id #{admin.id}\"  # this gets printed with correct value  \nbill = Bill.create(admin_id: admin.id, body: body)  \n</code></pre>\n\n<p><strong>Exception:</strong></p>\n\n<pre><code>/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.4/lib/active_record/attribute_assignment.rb:59:in `rescue in _assign_attribute': unknown attribute 'admin_id' for Bill. (ActiveRecord::UnknownAttributeError)\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.4/lib/active_record/attribute_assignment.rb:54:in `_assign_attribute'\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.4/lib/active_record/attribute_assignment.rb:41:in `block in assign_attributes'\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.4/lib/active_record/attribute_assignment.rb:35:in `each'\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.4/lib/active_record/attribute_assignment.rb:35:in `assign_attributes'\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.4/lib/active_record/core.rb:564:in `init_attributes'\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.4/lib/active_record/core.rb:281:in `initialize'\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.4/lib/active_record/inheritance.rb:61:in `new'\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.4/lib/active_record/inheritance.rb:61:in `new'\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.4/lib/active_record/persistence.rb:33:in `create'\n        from test.rb:34:in `&lt;main&gt;'\n</code></pre>\n\n<p><strong>My ActiveRecord migration file for the Bills model</strong>:</p>\n\n<pre><code> def up\n     create_table :bills do |t|\n         t.integer :admin_id\n         t.text :body\n     end\n    add_foreign_key :bills, :admins\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 5, "creation_date": 1441809783, "post_id": 32482635, "comment_id": 52826106, "body": "How about <code>array1 = array2</code> then?"}, {"owner": {"reputation": 369, "user_id": 4448106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ae8f4e579793d0fd30fa8bb8b99298?s=128&d=identicon&r=PG&f=1", "display_name": "Catherine Cai", "link": "https://stackoverflow.com/users/4448106/catherine-cai"}, "edited": false, "score": 0, "creation_date": 1441809842, "post_id": 32482635, "comment_id": 52826160, "body": "I agree with w0lf. Is there any reason why you&#39;re not just copying the array?"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1441809916, "post_id": 32482635, "comment_id": 52826211, "body": "And if you are not copying, you need to define the result you&#39;d wish to have if an item is only present in one of the two lists (e.g. <code>array1 = [1, 2, 3]</code>, <code>array2 = [1, 2, 8, 4]</code> ) ..."}, {"owner": {"reputation": 71, "user_id": 2980169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63eeb46eeba9b202fdfa9611b385469d?s=128&d=identicon&r=PG&f=1", "display_name": "user2980169", "link": "https://stackoverflow.com/users/2980169/user2980169"}, "edited": false, "score": 0, "creation_date": 1441809923, "post_id": 32482635, "comment_id": 52826218, "body": "This is just an example. I really have two arrays of objects that I need to sort by name"}, {"owner": {"reputation": 369, "user_id": 4448106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ae8f4e579793d0fd30fa8bb8b99298?s=128&d=identicon&r=PG&f=1", "display_name": "Catherine Cai", "link": "https://stackoverflow.com/users/4448106/catherine-cai"}, "edited": false, "score": 0, "creation_date": 1441810057, "post_id": 32482635, "comment_id": 52826307, "body": "If you want two arrays to sort in the same way, then you can define the sort method using the comparable (&lt;=&gt; operator.) <a href=\"http://ruby-doc.org/core-1.9.3/Comparable.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-1.9.3/Comparable.html</a>"}, {"owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 1, "creation_date": 1441810066, "post_id": 32482635, "comment_id": 52826315, "body": "OK, so why can you not just do <code>array1 = array2</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1441810285, "post_id": 32482635, "comment_id": 52826481, "body": "Your <code>array1</code> is invalid."}, {"owner": {"reputation": 71, "user_id": 2980169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63eeb46eeba9b202fdfa9611b385469d?s=128&d=identicon&r=PG&f=1", "display_name": "user2980169", "link": "https://stackoverflow.com/users/2980169/user2980169"}, "edited": false, "score": 0, "creation_date": 1441810463, "post_id": 32482635, "comment_id": 52826630, "body": "Lol. Thanks. This is just an example though."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441839952, "post_id": 32482635, "comment_id": 52841572, "body": "You need to fix your example to something more general. In doing so, don&#39;t change what you have, just edit and add text, beginning with something like, &quot;Edit: To clarify my question, here is a second example of <code>array1</code> and <code>array2</code> and my desired result....&quot;. If you don&#39;t indicate it&#39;s an edit comments or answers may become puzzling or nonsensical. Feel free to use the example in my answer if appropriate. Also, please  add a right parentheses to <code>{name: &quot;apple&quot;,</code>...."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441840061, "post_id": 32482635, "comment_id": 52841603, "body": "... It is important to edit to correct mistakes and clarify your question (as quickly as possible). Even though you&#39;ve selected an answer, you owe it to those will read your question in future. That would also reduce the chance of additional downvotes and may even cause a downvoter to withdraw their vote. Note votes cannot be changed until the question is edited."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 2980169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63eeb46eeba9b202fdfa9611b385469d?s=128&d=identicon&r=PG&f=1", "display_name": "user2980169", "link": "https://stackoverflow.com/users/2980169/user2980169"}, "edited": false, "score": 0, "creation_date": 1441810664, "post_id": 32482926, "comment_id": 52826784, "body": "This is great! Thank you, but what if the two arrays don&#39;t contain the same elements in each object? I didnt think of that until now. They both do contain &quot;name&quot;"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 71, "user_id": 2980169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63eeb46eeba9b202fdfa9611b385469d?s=128&d=identicon&r=PG&f=1", "display_name": "user2980169", "link": "https://stackoverflow.com/users/2980169/user2980169"}, "edited": false, "score": 1, "creation_date": 1441810912, "post_id": 32482926, "comment_id": 52826991, "body": "@user2980169, then use the <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-index\" rel=\"nofollow noreferrer\">block version of Array#index</a> that lets you make arbitrary checks."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441839516, "post_id": 32482926, "comment_id": 52841449, "body": "This returns <code>array2</code>, which is correct for the example, but a roundabout way doing so. :-)"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1441810514, "creation_date": 1441810514, "answer_id": 32482926, "question_id": 32482635, "link": "https://stackoverflow.com/questions/32482635/comparing-two-arrays-ruby-and-sort/32482926#32482926", "title": "Comparing two arrays Ruby and sort", "body": "<pre><code>array1 = [{name: \"grape\"}, {name: \"apple\"}, {name: \"pear\"}, {name: \"carrot\"}]\narray2 = [{name: \"apple\"}, {name: \"pear\"}, {name: \"grape\"}, {name: \"carrot\"}]\narray1.sort_by { |element| array2.index(element) }\n  #=&gt; [{:name=&gt;\"apple\"}, {:name=&gt;\"pear\"}, {:name=&gt;\"grape\"}, {:name=&gt;\"carrot\"}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1441839185, "creation_date": 1441839185, "answer_id": 32490405, "question_id": 32482635, "link": "https://stackoverflow.com/questions/32482635/comparing-two-arrays-ruby-and-sort/32490405#32490405", "title": "Comparing two arrays Ruby and sort", "body": "<p>Let's suppose the problem is more interesting than your example. Say we have:</p>\n\n<pre><code>array1 = [{name: \"grape\"}, {name: \"fig\"}, {name: \"apple\"},\n          {name: \"pear\"}, {name: \"carrot\"}]\n\narray2 = [{name: \"apple\"}, {name: \"pear\"}, {name: \"grape\"},\n          {name: \"kumquat\"}, {name: \"carrot\"}]\n</code></pre>\n\n<p>and want to reorder this <code>array1</code> so that all of its elements that are also in <code>array2</code> will be ordered as they are in <code>array2</code>; that is, <code>array1</code> will be converted to:</p>\n\n<pre><code>[{name: \"apple\"}, {name: \"fig\"}, {name: \"pear\"},\n {name: \"grape\"}, {name: \"carrot\"}]\n</code></pre>\n\n<p>We can do that as follows:</p>\n\n<pre><code>arr = array2 &amp; array1\n  #=&gt; [{:name=&gt;\"apple\"}, {:name=&gt;\"pear\"}, {:name=&gt;\"grape\"}, {:name=&gt;\"carrot\"}]\narray1.each_with_index { |h,i| arr.insert(i,h) unless array2.include?(h) }\narr\n  #=&gt; [{:name=&gt;\"apple\"}, {:name=&gt;\"fig\"}, {:name=&gt;\"pear\"},\n  #    {:name=&gt;\"grape\"}, {:name=&gt;\"carrot\"}] \n</code></pre>\n\n<p>Note that the method <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-26\" rel=\"nofollow\">Array#&amp;</a> is guaranteed to return the elements of:</p>\n\n<pre><code>arr = array2 &amp; array1\n</code></pre>\n\n<p>in the order in which they appear in <code>array2</code>.</p>\n\n<p>To improve efficiency, one could replace:</p>\n\n<pre><code>array1.each_with_index { |h,i| arr.insert(i,h) unless array2.include?(h) }\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>require 'set'\ns2 = array2.to_set\narray1.each_with_index { |h,i| arr.insert(i,h) unless s2.include?(h) }\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 2980169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63eeb46eeba9b202fdfa9611b385469d?s=128&d=identicon&r=PG&f=1", "display_name": "user2980169", "link": "https://stackoverflow.com/users/2980169/user2980169"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 32482926, "answer_count": 2, "score": -2, "last_activity_date": 1441839185, "creation_date": 1441809726, "last_edit_date": 1441810115, "question_id": 32482635, "link": "https://stackoverflow.com/questions/32482635/comparing-two-arrays-ruby-and-sort", "title": "Comparing two arrays Ruby and sort", "body": "<p>I have two arrays, I want the first one to apply the order of the second one so they look exactly the same.</p>\n\n<p>Example</p>\n\n<pre><code>array1 = [{name: \"grape\"}, {name: \"apple\", {name: \"pear\"}, {name: \"carrot\"}]\narray2 = [{name: \"apple\"}, {name: \"pear\"}, {name: \"grape\"}, {name: \"carrot\"}]\n</code></pre>\n\n<p>Wanted result</p>\n\n<pre><code>array1 = [{name: \"apple\"}, {name: \"pear\"}, {name: \"grape\"}, {name: \"carrot\"}]\narray2 = [{name: \"apple\"}, {name: \"pear\"}, {name: \"grape\"}, {name: \"carrot\"}]\n</code></pre>\n\n<p>Any help would be appreciated.I can not copy the array because I am comparing one array in my Database to another that is in a file.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 2, "creation_date": 1441810175, "post_id": 32482553, "comment_id": 52826394, "body": "What do you mean &quot;I need index of earlier occurence&quot;? if you need only UNIQUE elements, they they only occur once."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441811015, "post_id": 32482638, "comment_id": 52827071, "body": "For readability, perhaps you should use some other value (like <code>nil</code>) instead of <code>-1</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441811082, "post_id": 32482638, "comment_id": 52827119, "body": "You can also use <code>.each_with_index.with_object({}){|(e, i), h|</code> to make it look better."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1441812701, "post_id": 32482638, "comment_id": 52828226, "body": "rather than overwriting duplicate values then rejecting them why not avoid inserting them at all e.g. <code>a.each_with_index.with_object({}) { |(e, i), h| h[e] = i if a.count(e) == 1 }</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1441814491, "post_id": 32482638, "comment_id": 52829532, "body": "you can put the assign first, i.e. <code>h[e] = h.has_key?(e) ? nil : i</code> and instead of rejecting <code>nil</code> values, you could select non-<code>nil</code> values using <code>select { |k, v| v }</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1441815014, "post_id": 32482638, "comment_id": 52829893, "body": "note that <code>reject!</code> returns <code>nil</code> if nothing was rejected, you have to use the non-bang methods (either <code>reject</code> or <code>select</code>)"}], "tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": false, "score": 2, "last_activity_date": 1441811893, "last_edit_date": 1441811893, "creation_date": 1441809735, "answer_id": 32482638, "question_id": 32482553, "link": "https://stackoverflow.com/questions/32482553/finding-uniq-values-in-array-with-their-indexes/32482638#32482638", "title": "Finding `uniq` values in array with their indexes", "body": "<pre><code>a.each_with_index.with_object({}) { |(e, i), h| h.key?(e) ? h[e] = nil : h[e] = i }\n .reject! { |k, v| v.nil? }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1441810285, "post_id": 32482759, "comment_id": 52826482, "body": "This is very expensive, complexity of O(n^2)"}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "reply_to_user": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1441810580, "post_id": 32482759, "comment_id": 52826716, "body": "Understood, that&#39;s why I edited the post. Thanks for pointing this out"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1441813386, "post_id": 32482759, "comment_id": 52828687, "body": "As a note you could cut this down one line by using <code>Hash[unique.map{ |u| [u,array.index(u)]}]</code> rather than <code>map</code> and then <code>zip</code> just zip them in the mapping. OR even a 1 liner would be <code>Hash[array.select{|a| array.count(a) == 1 }.map{ |u| [u,array.index(u)]}]</code>"}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": true, "score": 2, "last_activity_date": 1441810347, "last_edit_date": 1441810347, "creation_date": 1441810073, "answer_id": 32482759, "question_id": 32482553, "link": "https://stackoverflow.com/questions/32482553/finding-uniq-values-in-array-with-their-indexes/32482759#32482759", "title": "Finding `uniq` values in array with their indexes", "body": "<p>Could also try this</p>\n\n<pre><code>unique = array.select { |a| array.count(a) === 1 }\nindexes = unique.map { |u| array.index(u) }\nHash[unique.zip(indexes)]\n</code></pre>\n\n<p>My algorithm is to first generate a new array of the single elements. I do that by filtering the array for the one's where the count is equal to 1. We can use the <code>array#count</code> method.</p>\n\n<p>I then create a second array, where I map the values of the first array, to their indexes in the original array.</p>\n\n<p>I then combine the values using the <code>array#zip</code> function and convert to a hash with <code>Hash</code>.</p>\n\n<p><strong>Output</strong></p>\n\n<pre><code>{ 1 =&gt; 0, 4 =&gt; 3 }\n</code></pre>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 32482759, "answer_count": 2, "score": 1, "last_activity_date": 1466799591, "creation_date": 1441809506, "last_edit_date": 1466799591, "question_id": 32482553, "link": "https://stackoverflow.com/questions/32482553/finding-uniq-values-in-array-with-their-indexes", "title": "Finding `uniq` values in array with their indexes", "body": "<p>Let say I have an array</p>\n\n<pre><code>[1, 2, 3, 4, 3, 2]\n</code></pre>\n\n<p>I wonder how I can get the hash <code>{ 1 =&gt; 0, 4 =&gt; 3 }</code> (<code>value =&gt; index</code>). I need the index of the earlier occurrence.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1441808798, "post_id": 32482228, "comment_id": 52825231, "body": "Are the common keys in the two hashes the same (relative) order in the two hashes? If not, it is not clear how the values are supposed to be ordered in your expected array. How do you know that it is <code>[6, 12]</code> and not <code>[12, 6]</code>?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 2, "creation_date": 1441809383, "post_id": 32482228, "comment_id": 52825740, "body": "I&#39;m still not sure what the output should look like."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441809130, "post_id": 32482382, "comment_id": 52825525, "body": "That does not give what the OP asked."}, {"owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441809231, "post_id": 32482382, "comment_id": 52825619, "body": "Thanks @sawa. Edited."}], "tags": [], "owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "is_accepted": false, "score": 1, "last_activity_date": 1441809207, "last_edit_date": 1441809207, "creation_date": 1441809018, "answer_id": 32482382, "question_id": 32482228, "link": "https://stackoverflow.com/questions/32482228/how-to-multiply-values-of-same-keys-in-hashes/32482382#32482382", "title": "How to multiply values of same keys in hashes", "body": "<pre><code>common_keys = hash1.keys &amp; hash2.keys\nmultiply = []\ncommon_keys.each do |key|\n  multiply &lt;&lt; hash1[key] * hash2[key]\nend\nputs multiply\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1441809438, "post_id": 32482435, "comment_id": 52825795, "body": "This is cleaner and <b>compact</b> than my answer."}], "tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": false, "score": 2, "last_activity_date": 1441809171, "creation_date": 1441809171, "answer_id": 32482435, "question_id": 32482228, "link": "https://stackoverflow.com/questions/32482228/how-to-multiply-values-of-same-keys-in-hashes/32482435#32482435", "title": "How to multiply values of same keys in hashes", "body": "<pre><code>hash1.map { |k, v| v * hash2[k] if hash2.key? k }.compact\n</code></pre>\n"}], "owner": {"reputation": 1020, "user_id": 5078888, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/25b81b1de5e97f0453de76de26329d6c?s=128&d=identicon&r=PG&f=1", "display_name": "Asarluhi", "link": "https://stackoverflow.com/users/5078888/asarluhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1013, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442223374, "creation_date": 1441808656, "last_edit_date": 1442223374, "question_id": 32482228, "link": "https://stackoverflow.com/questions/32482228/how-to-multiply-values-of-same-keys-in-hashes", "title": "How to multiply values of same keys in hashes", "body": "<p>Given two hashes <code>hash1</code> and <code>hash2</code>, which may be of different size, I need to multiply the values of any recurrence of a key; the extra key-value pairs should not be taken into account.</p>\n\n<p>Consider for instance the example below:</p>\n\n<pre><code>hash1 = { a: 2, b: 3, c: 4 }\nhash2 = { a: 3, b: 4 }\n</code></pre>\n\n<p>Common keys are <code>:a</code> and <code>:b</code> (<code>:c</code> should not be considered). What can I do to select only <code>:a</code> and <code>:b</code> and return <code>2 * 3</code> (for <code>:a</code>) and <code>3 * 4</code> (for <code>:b</code>), that is array <code>[6, 12]</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5301071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a150e7d92fc82b23f358e0930d7e9d?s=128&d=identicon&r=PG&f=1", "display_name": "fizzycortez", "link": "https://stackoverflow.com/users/5301071/fizzycortez"}, "edited": false, "score": 0, "creation_date": 1441807520, "post_id": 32481656, "comment_id": 52824221, "body": "Simple as that! Thanks :) I guess these are just a blind newbie problems."}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1441811059, "post_id": 32481656, "comment_id": 52827110, "body": "What is the difference?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1441812840, "post_id": 32481656, "comment_id": 52828312, "body": "@SheinAlexey Look carefully."}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "edited": false, "score": 0, "creation_date": 1441813015, "post_id": 32481656, "comment_id": 52828432, "body": "&#39;&lt;%=&#39; tells ERB what follows is an expression unlike &#39;&lt;%&#39;"}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1441813173, "post_id": 32481656, "comment_id": 52828538, "body": "Almost broke my eyes, but finally noticed (and proposed a change to save other people&#39;s eyes )"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 3, "last_activity_date": 1441813303, "last_edit_date": 1441813303, "creation_date": 1441807279, "answer_id": 32481656, "question_id": 32481568, "link": "https://stackoverflow.com/questions/32481568/rails-todo-list-app-tasks-printing-with-all-table-records-at-the-end/32481656#32481656", "title": "Rails Todo List app &gt; Tasks printing with all table records at the end", "body": "<p>Change this</p>\n\n<pre><code>&lt;%= @todo_list.todo_tasks.each do |task| %&gt;\n    &lt;p&gt;&lt;%= task.content %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;% @todo_list.todo_tasks.each do |task| %&gt;\n    &lt;p&gt;&lt;%= task.content %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Notice the change <code>&lt;%=</code> to <code>&lt;%</code>.</p>\n\n<p><code>&lt;% %&gt;</code> - Executes the statement/expression.</p>\n\n<p><code>&lt;%= %&gt;</code> - Prints the output.</p>\n"}], "owner": {"reputation": 3, "user_id": 5301071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a150e7d92fc82b23f358e0930d7e9d?s=128&d=identicon&r=PG&f=1", "display_name": "fizzycortez", "link": "https://stackoverflow.com/users/5301071/fizzycortez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 32481656, "answer_count": 1, "score": 0, "last_activity_date": 1441813458, "creation_date": 1441807081, "last_edit_date": 1441813458, "question_id": 32481568, "link": "https://stackoverflow.com/questions/32481568/rails-todo-list-app-tasks-printing-with-all-table-records-at-the-end", "title": "Rails Todo List app &gt; Tasks printing with all table records at the end", "body": "<p>I'm working on simple Todo List app which I want to print this output (all todo_task table records -> [] brackets after \"pranie\" task):</p>\n\n<pre><code>Title: a\n\nDescription: b\n\nhey\n\nalbo\n\npranie\n[#&lt;TodoTask id: 1, todo_list_id: 1, content: \"hey\", created_at: \"2015-09-09 12:46:11\", updated_at: \"2015-09-09 12:46:11\"&gt;, #&lt;TodoTask id: 2, todo_list_id: 1, content: \"albo\", created_at: \"2015-09-09 12:48:42\", updated_at: \"2015-09-09 12:48:42\"&gt;, #&lt;TodoTask id: 3, todo_list_id: 1, content: \"pranie\", created_at: \"2015-09-09 12:57:15\", updated_at: \"2015-09-09 12:57:15\"&gt;] \n</code></pre>\n\n<p>Other files content:\napp/controllers/todo_tasks_controller.rb :</p>\n\n<pre><code>class TodoTasksController &lt; ApplicationController\n\n  before_action :set_todo_list\n  before_action :set_todo_task, except: [:create, :index]\n\n  def create\n    @todo_task = @todo_list.todo_tasks.create(todo_task_params)\n    redirect_to @todo_list\n  end\n\n  def destroy\n    @todo_task.destroy\n    redirect_to @todo_list\n  end\n\n  def index\n  end\n\n  private\n\n  def set_todo_list\n    @todo_list = TodoList.find(params[:todo_list_id])\n  end\n\n  def set_todo_task\n    @todo_task = @todo_list.todo_tasks.find(params[:id])\n  end\n\n  def todo_task_params\n    params.require(:todo_task).permit(:content)\n  end\nend\n</code></pre>\n\n<p>app/views/todo_lists/index.html.erb :</p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;Title:&lt;/strong&gt;\n  &lt;%= @todo_list.title %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Description:&lt;/strong&gt;\n  &lt;%= @todo_list.description %&gt;\n&lt;/p&gt;\n\n&lt;%= @todo_list.todo_tasks.each do |task| %&gt;\n    &lt;p&gt;&lt;%= task.content %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n\n&lt;%= render 'todo_tasks/form' %&gt;\n</code></pre>\n\n<p>app/views/todo_lists/_form.html.erb :</p>\n\n<pre><code>&lt;%= form_for([@todo_list, @todo_list.todo_tasks.build]) do |f| %&gt;\n  &lt;p&gt;\n    &lt;%= f.text_field :content, placeholder: 'New Todo' %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;&lt;%= f.submit %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "edited": false, "score": 0, "creation_date": 1441807044, "post_id": 32480892, "comment_id": 52823877, "body": "Welcome to SO! Could you please add the contents of your Ruby script? (not as a comment, but by editing your question)"}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1441851793, "post_id": 32480892, "comment_id": 52844373, "body": "Seems like either your browser automation port is blocked, or the browser version uses a different port than the automation driver. You should provide more information about that."}, {"owner": {"reputation": 51, "user_id": 4481149, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9nbeK5_iZks/AAAAAAAAAAI/AAAAAAAAATo/IFmKTMTHpRg/photo.jpg?sz=128", "display_name": "Shiva Krishna", "link": "https://stackoverflow.com/users/4481149/shiva-krishna"}, "edited": false, "score": 0, "creation_date": 1441886195, "post_id": 32480892, "comment_id": 52861791, "body": "I have resolved it by degrading the ruby version"}], "owner": {"reputation": 51, "user_id": 4481149, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9nbeK5_iZks/AAAAAAAAAAI/AAAAAAAAATo/IFmKTMTHpRg/photo.jpg?sz=128", "display_name": "Shiva Krishna", "link": "https://stackoverflow.com/users/4481149/shiva-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441806713, "creation_date": 1441805218, "last_edit_date": 1441806713, "question_id": 32480892, "link": "https://stackoverflow.com/questions/32480892/unable-to-execute-the-ruby-watir-script-empty-browser-instance-is-opened-and-th", "title": "unable to execute the ruby Watir script, empty browser instance is opened and the below error is thrown", "body": "<p>unable to execute the ruby Watir script, empty browser instance is opened and the below error is thrown.</p>\n\n<ul>\n<li><p>ERROR:</p>\n\n<p><code>C:\\watir&gt;ruby DevStageCompareNew.rb\nC:/Ruby200-x64/lib/ruby/2.0.0/net/http.rb:878:in \ninitialize: No connection could be made because the target machine actively refused it. - connect(2) (Errno::\nECONNREFUSED)\n        from C:/Ruby200-x64/lib/ruby/2.0.0/net/http.rb:878:in open\n        from C:/Ruby200-x64/lib/ruby/2.0.0/net/http.rb:878:in block in connect\n        from C:/Ruby200-x64/lib/ruby/2.0.0/timeout.rb:52:in timeout\n        from C:/Ruby200-x64/lib/ruby/2.0.0/net/http.rb:877:in connect\n        from C:/Ruby200-x64/lib/ruby/2.0.0/net/http.rb:862:in do_start\n        from C:/Ruby200-x64/lib/ruby/2.0.0/net/http.rb:851:in start\n        from C:/Ruby200-x64/lib/ruby/2.0.0/net/http.rb:1367:in request\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.45.0/lib/selenium/webdriver/remote/http/default.rb:83:in response_for\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.45.0/lib/selenium/webdriver/remote/http/default.rb:39:in request\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.45.0/lib/selenium/webdriver/remote/http/common.rb:40:in call\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.45.0/lib/selenium/webdriver/remote/bridge.rb:640:in raw_execute\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.45.0/lib/selenium/webdriver/remote/bridge.rb:101:in create_session\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.45.0/lib/selenium/webdriver/remote/bridge.rb:68:in initialize\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.45.0/lib/selenium/webdriver/chrome/bridge.rb:29:in initialize\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.45.0/lib/selenium/webdriver/common/driver.rb:37:in new\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.45.0/lib/selenium/webdriver/common/driver.rb:37:in for\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/selenium-webdriver-2.45.0/lib/selenium/webdriver.rb:67:in for\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/watir-webdriver-0.7.0/lib/watir-webdriver/browser.rb:46:in initialize\n        from DevStageCompareNew.rb:4:in new\n        from DevStageCompareNew.rb:4:in &lt;main&gt;</code></p></li>\n</ul>\n\n<p>can someone help to resolve this..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activejob"], "answers": [{"comments": [{"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 2, "creation_date": 1441810278, "post_id": 32481311, "comment_id": 52826474, "body": "Yes this makes sense, but delayed_job and sidekiq both support queues and priority and you can set this at a job level. Does active job support this if you are using the delayed_job or sidekiq adapter? It sounds like you are saying yes ... but none of the documentation actually helps. I have already looked at the references you have added before posting this question, but I couldn&#39;t find anything ... perhaps I am missing something?"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1441810376, "post_id": 32481311, "comment_id": 52826558, "body": "You need to read your adapter documentation for this. ActiveJob is an abstraction."}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 2, "creation_date": 1441812835, "post_id": 32481311, "comment_id": 52828306, "body": "I understand that. I have read the documentation - I am using delayed_jobs and you can set the priority of a job on a delayed_job for example <code>handle_asynchronously :send_mailer, :priority =&gt; 20</code>.With sidekiq I can see it&#39;s possible since you set queues and priority in a config file.Delayed job does not seem to have this. My question is how to I use the abstraction that is ActiveJob in order to set priority ... is this possible via ActiveJob or do I have to use delayed_job? Looking at the delayed_job adapter in ActiveJob this does not seem possible.I am not sure what else to say to be clearer."}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 1, "creation_date": 1441813050, "post_id": 32481311, "comment_id": 52828457, "body": "You can&#39;t set priority through ActiveJob programatically. You just name you queues &quot;low_priority&quot; or &quot;high_priority&quot; and use them under these names in your program. Actually you have no control from your program whether &quot;low&quot; is really &quot;low&quot; and &quot;high&quot; is really &quot;high&quot; priority. They are just names. It&#39;s upon you to configure them with correct weights (priorities)."}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 2, "creation_date": 1441813936, "post_id": 32481311, "comment_id": 52829116, "body": "Great that is what I was trying to confirm. From what I see using activejob on top of delayed_job it is impossible to actually configure the weight correct? You can only set the default weight in the config. You can&#39;t actually set the weighting per job or queue if using activejob on top of delayed_job since there is not entry point via the abstraction that is activejob."}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1441814496, "post_id": 32481311, "comment_id": 52829534, "body": "See purpose of ActiveJob from Rails guide (I&#39;ve included it in answer). It clearly states this"}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 2, "creation_date": 1454494276, "post_id": 32481311, "comment_id": 58065383, "body": "Since this issue seems to be getting a couple of hits, for those that may be interested, I wrote some functionality and got it merged into DJ to actually handle queues with priority. This should work with ActiveJob with a DJ config file. <a href=\"https://github.com/collectiveidea/delayed_job/pull/845#issuecomment-178173963\" rel=\"nofollow noreferrer\">github.com/collectiveidea/delayed_job/pull/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "is_accepted": true, "score": 6, "last_activity_date": 1441814484, "last_edit_date": 1441814484, "creation_date": 1441806391, "answer_id": 32481311, "question_id": 32480865, "link": "https://stackoverflow.com/questions/32480865/does-activejob-have-queues-with-specific-priority/32481311#32481311", "title": "Does ActiveJob have queues with specific priority?", "body": "<p>Priority depends on actual QueueAdapter and how this adapter was configured. If your adapter does not support priorities or was not properly configured, then ActiveJob can't help you either.</p>\n\n<p>Find out more details about adapters from here:</p>\n\n<p><a href=\"http://edgeapi.rubyonrails.org/classes/ActiveJob/QueueAdapters.html\" rel=\"nofollow\">http://edgeapi.rubyonrails.org/classes/ActiveJob/QueueAdapters.html</a></p>\n\n<p>The main takeaway is this:</p>\n\n<blockquote>\n  <p>The main point is to ensure that all Rails apps will have a job infrastructure in place. We can then have framework features and other gems build on top of that, without having to worry about API differences between various job runners such as Delayed Job and Resque. Picking your queuing backend becomes more of an operational concern, then. And you'll be able to switch between them without having to rewrite your jobs.</p>\n</blockquote>\n\n<p>Queue configuration (including priorities) becomes Adapter's responsibility.</p>\n\n<p>As an example of queue configuration see Sidekiq wiki:</p>\n\n<p><a href=\"https://github.com/mperham/sidekiq/wiki/Advanced-Options#queues\" rel=\"nofollow\">https://github.com/mperham/sidekiq/wiki/Advanced-Options#queues</a></p>\n"}], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3755, "favorite_count": 1, "accepted_answer_id": 32481311, "answer_count": 1, "score": 10, "last_activity_date": 1441814484, "creation_date": 1441805161, "last_edit_date": 1441813445, "question_id": 32480865, "link": "https://stackoverflow.com/questions/32480865/does-activejob-have-queues-with-specific-priority", "title": "Does ActiveJob have queues with specific priority?", "body": "<p>Looking at the job below I would assume the job runs on a <code>low_priority</code> queue. </p>\n\n<pre><code>class GuestsCleanupJob &lt; ActiveJob::Base\n  queue_as :low_priority\n  #....\nend\n</code></pre>\n\n<p>I would agree with this, but this is just the name of the queue correct? It actually has nothing to do with priority. For example if I created a job with a queue named <code>:my_queue</code> it would be treated as having the same priority as a <code>:low_priority</code> queue.</p>\n\n<p>From the documentation I haven't been able to find anything indicating that I can prioritize jobs that are queued. I know delayed_jobs has this functionality, but I haven't found it in active_job.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1441805620, "post_id": 32480693, "comment_id": 52822808, "body": "you can make the export in the background."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1441806505, "post_id": 32480693, "comment_id": 52823468, "body": "200,000 is not that many records? How many columns are you exporting? Have you considered streaming or writing to the file in chunks rather than loading it completely into memory first?"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1441806574, "post_id": 32480693, "comment_id": 52823514, "body": "ActiveAdmin is streaming this csv to the client but it still consumpes a lot of memory."}], "answers": [{"comments": [{"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1441806388, "post_id": 32481030, "comment_id": 52823400, "body": "That is good idea. But I think that the problem maybe fetching filtered records in active admin and then export them to csv..."}], "tags": [], "owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "is_accepted": false, "score": 1, "last_activity_date": 1441805652, "last_edit_date": 1495540334, "creation_date": 1441805652, "answer_id": 32481030, "question_id": 32480693, "link": "https://stackoverflow.com/questions/32480693/exporting-csv-with-activeadmin-runs-out-of-memory/32481030#32481030", "title": "Exporting CSV with ActiveAdmin runs out of memory", "body": "<p>You can first write CSV into file and send it to client after this.\nHere is a <a href=\"https://stackoverflow.com/a/7936057/1426097\">good answer</a> how to write large amount of data efficiently.</p>\n\n<p>I hope there is a way in ActiveAdmin to override default behavior of CSV download.</p>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444637786, "creation_date": 1441804766, "question_id": 32480693, "link": "https://stackoverflow.com/questions/32480693/exporting-csv-with-activeadmin-runs-out-of-memory", "title": "Exporting CSV with ActiveAdmin runs out of memory", "body": "<p>I'm running out of memory on Heroku when try to export to csv 200 thousands records. This is not too much records so I think that active records is fetching data with inefficient way. How can  I solve this problem?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1441807017, "post_id": 32480534, "comment_id": 52823860, "body": "It is not much clear what you mean by &quot;using it both with positive and negative indexes&quot;."}, {"owner": {"reputation": 363, "user_id": 4344373, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hBNOU.jpg?s=128&g=1", "display_name": "A.V. Arno", "link": "https://stackoverflow.com/users/4344373/a-v-arno"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441825568, "post_id": 32480534, "comment_id": 52835373, "body": "E.g., [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;] &#39;intersect&#39; [&quot;c&quot;, &quot;d&quot;, &quot;a&quot;, &quot;c&quot;, &quot;d&quot;] shall return [&quot;c&quot;, &quot;d&quot;], because in both arrays &quot;d&quot; is of -1 index, and &quot;c&quot; is of -2 index."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1441806991, "post_id": 32480867, "comment_id": 52823843, "body": "<code>with_object([])</code> could just be <code>.map{ |x,i| x if x == b[i]}.compact</code> adds a bit to the readability and still avoids the intermediates."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1441807109, "post_id": 32480867, "comment_id": 52823933, "body": "@engineersmnky unless the arrays contain <code>nil</code> values. <code>compact</code> would remove these."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1441809976, "post_id": 32480867, "comment_id": 52826253, "body": "fair enough based on the simple use case provided I did not think that far into the situation <code>with_object</code> makes more sense in this case."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 7, "last_activity_date": 1441809602, "last_edit_date": 1441809602, "creation_date": 1441805171, "answer_id": 32480867, "question_id": 32480534, "link": "https://stackoverflow.com/questions/32480534/an-index-aware-array-intersection/32480867#32480867", "title": "An index-aware array intersection", "body": "<p>Given your two arrays <code>a</code> and <code>b</code>:</p>\n\n<pre><code>a = [\"a\", \"b\", \"c\", \"d\"]\nb = [\"a\", \"b\", \"f\", \"d\", \"c\"]\n</code></pre>\n\n<p>Here are different attempts:</p>\n\n<h3>Using <code>zip</code> and <code>select</code></h3>\n\n<p>You can use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-zip\" rel=\"nofollow\"><code>zip</code></a> to combine the corresponding elements from both arrays and <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-select\" rel=\"nofollow\"><code>select</code></a> to retrieve the equal ones:</p>\n\n<pre><code>a.zip(b).select { |x, y| x == y }.map(&amp;:first)\n#=&gt; [\"a\", \"b\", \"d\"]\n</code></pre>\n\n<p>Step by step:</p>\n\n<pre><code>a.zip(b)                   #=&gt; [[\"a\", \"a\"], [\"b\", \"b\"], [\"c\", \"f\"], [\"d\", \"d\"]]\n .select { |x, y| x == y } #=&gt; [[\"a\", \"a\"], [\"b\", \"b\"], [\"d\", \"d\"]]\n .map(&amp;:first)             #=&gt; [\"a\", \"b\", \"d\"]\n</code></pre>\n\n<p>Note that <code>zip</code> fills the second array with <code>nil</code> values if it is shorter. This could be a problem if your arrays contain <code>nil</code> values:</p>\n\n<pre><code>a = [2, 1, nil]\nb = [2]\n\na.zip(b).select { |x, y| x == y }.map(&amp;:first)\n#=&gt; [2, nil]\n</code></pre>\n\n<p>This is because <code>b</code> becomes <code>[2, nil, nil]</code> within <code>zip</code>.</p>\n\n<h3>Using <code>each_with_index</code> and <code>&amp;</code></h3>\n\n<p>Or you could use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-each_with_index\" rel=\"nofollow\"><code>each_with_index</code></a> to build arrays of <code>[element, index]</code> pairs:</p>\n\n<pre><code>ai = a.each_with_index.to_a\n#=&gt; [[\"a\", 0], [\"b\", 1], [\"c\", 2], [\"d\", 3]]\n\nbi = b.each_with_index.to_a\n#=&gt; [[\"a\", 0], [\"b\", 1], [\"f\", 2], [\"d\", 3], [\"c\", 4]]\n</code></pre>\n\n<p>and intersect them instead:</p>\n\n<pre><code>ai &amp; bi\n#=&gt; [[\"a\", 0], [\"b\", 1], [\"d\", 3]]\n</code></pre>\n\n<p>We can use <code>map</code> to extract the first elements:</p>\n\n<pre><code>(ai &amp; bi).map(&amp;:first)\n#=&gt; [\"a\", \"b\", \"d\"]\n</code></pre>\n\n<p>In a single expression:</p>\n\n<pre><code>(a.each_with_index.to_a &amp; b.each_with_index.to_a).map(&amp;:first)\n#=&gt; [\"a\", \"b\", \"d\"]\n</code></pre>\n\n<h3>Using <code>each_with_index</code> and <code>each_object</code></h3>\n\n<p>Another way it to combine <code>each_with_index</code> and <a href=\"http://ruby-doc.org/core-2.2.3/Enumerator.html#method-i-with_object\" rel=\"nofollow\"><code>with_object</code></a>:</p>\n\n<pre><code>a.each_with_index.with_object([]) { |(x, i), arr| arr &lt;&lt; x if x == b[i] }\n#=&gt; [\"a\", \"b\", \"d\"]\n</code></pre>\n\n<p>Each element <code>x</code> in <code>a</code> is compared to the corresponding element in <code>b</code> and - if they are equal - added to the result array.</p>\n\n<p>This avoids creating the intermediate arrays but I find it less readable.</p>\n\n<h3>Using a custom enumerator</h3>\n\n<p><code>each_twin</code> might not be the best name (I'm bad at naming things):</p>\n\n<pre><code>def each_twin(a, b)\n  return enum_for(__method__, a, b) unless block_given?\n  loop do\n    x, y = a.next, b.next\n    yield x if x == y\n  end\nend\n\neach_twin(a.to_enum, b.to_enum).to_a\n#=&gt; [\"a\", \"b\", \"d\"]\n</code></pre>\n\n<p>Within the loop, the next value is retrieved from both, <code>a</code> and <code>b</code>. The value from <code>a</code> is yielded if it is equal to <code>b</code>'s value. <a href=\"http://ruby-doc.org/core-2.2.3/Enumerator.html#method-i-next\" rel=\"nofollow\"><code>Enumerator#next</code></a> causes the loop to exit when <code>a</code>'s or <code>b</code>'s end is reached.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1441806224, "post_id": 32481100, "comment_id": 52823287, "body": "I like the symmetry in <code>a1[i] == a2[i]</code> and the fact that only two arguments are being passed to the block. Somehow, that looks a bit cleaner than my second attempt."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1442238582, "post_id": 32481100, "comment_id": 52988057, "body": "Perhaps <code>[a1.size, a2.size].min.times.with_object ([])...</code> in case <code>a1</code> contains a <code>nil</code>."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1441805803, "creation_date": 1441805803, "answer_id": 32481100, "question_id": 32480534, "link": "https://stackoverflow.com/questions/32480534/an-index-aware-array-intersection/32481100#32481100", "title": "An index-aware array intersection", "body": "<pre><code>a1 = [\"a\", \"b\", \"c\", \"d\"]\na2 = [\"a\", \"b\", \"f\", \"d\", \"c\"]\n\na1.each_index.with_object([]){|i, a| a.push(a1[i]) if a1[i] == a2[i]}\n# =&gt; [\"a\", \"b\", \"d\"]\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 4344373, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hBNOU.jpg?s=128&g=1", "display_name": "A.V. Arno", "link": "https://stackoverflow.com/users/4344373/a-v-arno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 32480867, "answer_count": 2, "score": 3, "last_activity_date": 1441809602, "creation_date": 1441804332, "last_edit_date": 1441807609, "question_id": 32480534, "link": "https://stackoverflow.com/questions/32480534/an-index-aware-array-intersection", "title": "An index-aware array intersection", "body": "<p>I am looking for a method for array intersection that, unlike the ordinary <code>&amp;</code> method, matches only those elements that are the same and have the same index in both arrays. E.g.:</p>\n\n<pre><code>[\"a\", \"b\", \"c\", \"d\"].intersect([\"a\", \"b\", \"f\", \"d\", \"c\"])\n</code></pre>\n\n<p>should return</p>\n\n<pre><code>[\"a\", \"b\", \"d\"]\n</code></pre>\n\n<p>because all three exist in both arrays at the same indexes (0, 1 and 3), while <code>\"c\"</code> is excluded because it has different positions in two arrays (2 and 4):</p>\n\n<pre><code># 0    1    2    3    4\n[\"a\", \"b\", \"c\", \"d\"]\n[\"a\", \"b\", \"f\", \"d\", \"c\"]\n</code></pre>\n\n<p>I can think of several solutions for this problem. First one is looping, another one is modifying arrays first to include their indexes in the elements, and then intersect using <code>&amp;</code>. E.g.:</p>\n\n<pre><code>[\"a\", \"b\", \"c\"] #=&gt; [\"0a\", \"1b\", \"2c\"]\n</code></pre>\n\n<p>However, I was wondering if there exists a better method. I am looking for using it both with positive and negative indexes.</p>\n"}, {"tags": ["ruby", "github", "gem", "rubygems", "workflow"], "answers": [{"tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 1, "last_activity_date": 1441867312, "last_edit_date": 1441867312, "creation_date": 1441804013, "answer_id": 32480408, "question_id": 32480304, "link": "https://stackoverflow.com/questions/32480304/what-is-the-workflow-for-maintaining-a-gem-with-regard-to-pushes-to-github-and-r/32480408#32480408", "title": "What is the workflow for maintaining a gem with regard to pushes to GitHub and RubyGems?", "body": "<p>You are in control here, the github commits are separate to <code>gem push</code>, unless you decide to link them with some automation (which is possible, but requires some effort and deliberate changes that you would need to make, so I am assuming you have not). I would not advise to link them and automatically release on a push to master branch, unless you are following a strict management of features and versioning, and have other automation to protect against mistakes, such as continuous integration.</p>\n\n<p>Usually:</p>\n\n<ul>\n<li>The github code gets ahead of the published gem as you address issues and make changes.</li>\n<li>At some point, you decide to make a public release because enough has changed that it would be useful to share it in a new version.</li>\n<li>You then update the version data in the repo with a suitable commit</li>\n<li>You make a release (when I do this, I use the convenience <code>rake release</code>, but I think that just wraps a few steps including <code>gem build</code> and <code>gem push</code>)</li>\n</ul>\n\n<p>RubyGems maintains records of each release for the gem. If you use versioning sensibly, then other people should be able to access previously-released versions of your gem.</p>\n"}, {"comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1441806703, "post_id": 32480692, "comment_id": 52823618, "body": "Note this tagging is another thing that <code>rake release</code> does automatically (this is made part of your gem&#39;s Rakefile by default by Bundler if you start your gem with <code>bundle gem</code>)"}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1441804764, "creation_date": 1441804764, "answer_id": 32480692, "question_id": 32480304, "link": "https://stackoverflow.com/questions/32480304/what-is-the-workflow-for-maintaining-a-gem-with-regard-to-pushes-to-github-and-r/32480692#32480692", "title": "What is the workflow for maintaining a gem with regard to pushes to GitHub and RubyGems?", "body": "<p>As Neil Slater says, git commits are separate from gem pushes.</p>\n\n<p>However, I would add that it is good practice to <a href=\"https://git-scm.com/book/en/v2/Git-Basics-Tagging\" rel=\"nofollow\">tag your master git branch</a> with the gem id</p>\n\n<p>So say you are building a new thing. You have the following commit history</p>\n\n<ol>\n<li>create the initial code </li>\n<li>add some more functionality </li>\n<li>fix a bug</li>\n<li>finalize the first release code and push it as gem 0.0.1</li>\n<li>add additional functionality and push it as gem 0.0.2</li>\n<li>start work on a major change</li>\n<li>finalize the major change and release as gem 0.1.0</li>\n</ol>\n\n<p>So you have seven commits, and three gem releases. To tie those together you'd tag:</p>\n\n<ul>\n<li>commit 4 tag as 0.0.1</li>\n<li>commit 5 tag as 0.0.2</li>\n<li>commit 7 tag as 0.1.0</li>\n</ul>\n\n<p>If you push those tags to github, they'll appear as releases.</p>\n"}], "owner": {"reputation": 17379, "user_id": 1836143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ddoM.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1836143/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 32480408, "answer_count": 2, "score": 0, "last_activity_date": 1441867312, "creation_date": 1441803754, "question_id": 32480304, "link": "https://stackoverflow.com/questions/32480304/what-is-the-workflow-for-maintaining-a-gem-with-regard-to-pushes-to-github-and-r", "title": "What is the workflow for maintaining a gem with regard to pushes to GitHub and RubyGems?", "body": "<p>Say one creates a repo, adds the necessary code, pushes the repo to GitHub, builds the gem via <code>gem build</code> and then pushes it to RubyGems via <code>gem push</code>. So far, so good. What is then the process to update the gem? What I mean is the following:</p>\n\n<ul>\n<li>If I make changes to the code and push them to GitHub is there an automatic way for RubyGems to detect the changes or do I need to run <code>gem build/push</code> again?</li>\n<li>Do I need to change the gem version on every git commit? I am aware of <a href=\"http://semver.org/\" rel=\"nofollow\">semantic versioning</a>, but what if I make changes, that are not related to the code of the gem directly, such as edits to the README, the .gemspec file etc.</li>\n</ul>\n\n<p>So to sum it up - what is the workflow for maintaining a gem with regard to pushes to GitHub and RubyGems?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "zeromq", "celluloid"], "comments": [{"owner": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "edited": false, "score": 1, "creation_date": 1441977036, "post_id": 32479871, "comment_id": 52906206, "body": "Why do you define <code>Celluloid::ZMQ::Socket.socket</code> at all?"}, {"owner": {"reputation": 905, "user_id": 1699730, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tHYaE.jpg?s=128&g=1", "display_name": "Pandurang Waghulde", "link": "https://stackoverflow.com/users/1699730/pandurang-waghulde"}, "reply_to_user": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "edited": false, "score": 0, "creation_date": 1442917345, "post_id": 32479871, "comment_id": 53270993, "body": "I have updated question with code."}, {"owner": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "edited": false, "score": 0, "creation_date": 1442918615, "post_id": 32479871, "comment_id": 53271802, "body": "I updated my answer."}], "answers": [{"comments": [{"owner": {"reputation": 905, "user_id": 1699730, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tHYaE.jpg?s=128&g=1", "display_name": "Pandurang Waghulde", "link": "https://stackoverflow.com/users/1699730/pandurang-waghulde"}, "edited": false, "score": 0, "creation_date": 1442919362, "post_id": 32524328, "comment_id": 53272239, "body": "actually I cant go with after or every, as i want to process things as soon as i get them on PULL or DEALER socket. and thats the reason why i want to remove sleep from loop."}, {"owner": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "reply_to_user": {"reputation": 905, "user_id": 1699730, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tHYaE.jpg?s=128&g=1", "display_name": "Pandurang Waghulde", "link": "https://stackoverflow.com/users/1699730/pandurang-waghulde"}, "edited": false, "score": 0, "creation_date": 1442919418, "post_id": 32524328, "comment_id": 53272277, "body": "Then you need two actors."}, {"owner": {"reputation": 5744, "user_id": 461557, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/chqe8.jpg?s=128&g=1", "display_name": "Viren", "link": "https://stackoverflow.com/users/461557/viren"}, "edited": false, "score": 0, "creation_date": 1442924122, "post_id": 32524328, "comment_id": 53275512, "body": "@digitalextremist I just don&#39;t get this  you mention <code>you are directly using the ffi-rzmq</code> yes that is true but If I follow the <code>celluloid-zeromq</code> code problem, I just don&#39;t see any difference in both of them."}, {"owner": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "edited": false, "score": 2, "creation_date": 1442924241, "post_id": 32524328, "comment_id": 53275584, "body": "Using the poller outside <code>Celluloid::ZMQ</code> avoids the reactor. But the real problem here is that you need to be using multiple actors for what you are trying to do. Is there a reason to avoid using multiple actors?"}], "tags": [], "owner": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "is_accepted": false, "score": 1, "last_activity_date": 1442918606, "last_edit_date": 1495540309, "creation_date": 1441977017, "answer_id": 32524328, "question_id": 32479871, "link": "https://stackoverflow.com/questions/32479871/running-code-asynchronously-inside-pollers/32524328#32524328", "title": "Running code asynchronously inside pollers", "body": "<p>The question was 100% changed, so my previous answer does not help. \nNow, the issues are...</p>\n\n<h1><code>ZMQ::Poller</code> is not part of <code>Celluloid::ZMQ</code></h1>\n\n<p>You are directly using the <code>ffi-rzmq</code> bindings, and not using the <code>Celluloid::ZMQ</code> wrapping, which provides evented &amp; threaded handling of the socket(s).</p>\n\n<p>It would be best to make multiple actors -- one per socket -- or to just use <code>Celluloid::ZMQ</code> directly in one actor, rather than undermining it.</p>\n\n<h1>Your actor never gets time to work with the response</h1>\n\n<p>This part makes it a duplicate of:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/32492560/celluloid-async-inside-ruby-blocks-does-not-work/32569978#32569978\">Celluloid async inside ruby blocks does not work</a></li>\n</ul>\n\n<blockquote>\n  <p>The best answer is to use <code>after</code> or <code>every</code> and not <code>loop</code> ... which is dominating your actor.</p>\n</blockquote>\n\n<p>You need to either:</p>\n\n<ul>\n<li>Move <code>evaluate_response</code> to another actor.</li>\n<li>Move each socket to their own actor.</li>\n</ul>\n\n<p>This code needs to be broken up into several actors to work properly, with a main <code>sleep</code> at the end of the program. But before all that, try using <code>after</code> or <code>every</code> instead of <code>loop</code>.</p>\n"}], "owner": {"reputation": 905, "user_id": 1699730, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tHYaE.jpg?s=128&g=1", "display_name": "Pandurang Waghulde", "link": "https://stackoverflow.com/users/1699730/pandurang-waghulde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1442918606, "creation_date": 1441802568, "last_edit_date": 1442917313, "question_id": 32479871, "link": "https://stackoverflow.com/questions/32479871/running-code-asynchronously-inside-pollers", "title": "Running code asynchronously inside pollers", "body": "<p>In my ruby script,I am using celluloid-zmq gem. where I am trying to run evaluate_response asynchronously inside pollers using,</p>\n\n<pre><code>async.evaluate_response(socket.read_multipart) \n</code></pre>\n\n<p>But if I remove sleep from loop, somehow thats not working out, It is not reaching to \"evaluate_response\" method. But if I put sleep inside loop it works perfectly.</p>\n\n<pre><code>require 'celluloid/zmq'\n\nCelluloid::ZMQ.init\n\nmodule Celluloid\n  module ZMQ\n    class Socket\n      def socket\n        @socket\n      end\n    end\n  end\nend\n\nclass Indefinite\n  include Celluloid::ZMQ\n\n  ## Readers\n  attr_reader :dealersock,:pullsock,:pollers\n\n  def initialize\n    prepare_dealersock and prepare_pullsock and prepare_pollers\n  end\n\n  ## prepare DEALER SOCK\n  def prepare_dealersock\n    @dealersock = DealerSocket.new\n    @dealersock.identity = \"IDENTITY\"\n    @dealersock.connect(\"tcp://localhost:20482\")\n  end\n\n  ## prepare PULL SOCK\n  def prepare_pullsock\n    @pullsock = PullSocket.new\n    @pullsock.connect(\"tcp://localhost:20483\")\n  end\n\n  ## prepare the Pollers\n  def prepare_pollers\n    @pollers = ZMQ::Poller.new\n    @pollers.register_readable(dealersock.socket)\n    @pollers.register_readable(pullsock.socket)\n  end\n\n  def run!\n    loop do \n      pollers.poll ## this is blocking operation never mind though we need it\n      pollers.readables.each do |socket|\n        ## we know socket.read_multipart is blocking call this would give celluloid the chance to run other process in mean time.\n        async.evaluate_response(socket.read_multipart)\n      end\n      ## If you remove the sleep the async evaluate response would never be executed.\n      ## sleep 0.2\n    end\n\n  end\n\n  def evaluate_response(message)\n\n    ## Hmmm, the code just not reaches over here \n\n    puts \"got message: #{message}\"\n\n    ... \n\n    ...\n    ...\n    ...\n  end\nend\n\n\n## Code is invoked like this\n\nIndefinite.new.run!\n</code></pre>\n\n<p>Any idea why this is happening?</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1441802036, "post_id": 32479446, "comment_id": 52820098, "body": "I don&#39;t see why it would run <i>forever</i>. It just takes a long time. Try printing values of <code>i</code>, for example."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1441802065, "post_id": 32479446, "comment_id": 52820119, "body": "Also, your logic around <code>date_column</code> seems a bit weird to me, but it shouldn&#39;t cause infinite loops"}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1441802337, "post_id": 32479446, "comment_id": 52820322, "body": "I left it to run, and came back after 4 hours. It still had not halted. The CSV file took 4-5 hours to generate, and it had 42 columns. So, considering that, wouldn&#39;t you say there&#39;s something wrong if it can&#39;t finish counting the number of elements in only one column? It should have been over in, like, 1 hour I think; it has about 19-20 million rows. Also, what&#39;s weird about my logic around <code>date_column</code>? I&#39;m very new to Ruby, so I have not studied the syntax in detail. I&#39;m using the logic from C. Is there a better, more efficient way to find the last element of an array in Ruby?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1441802582, "post_id": 32479446, "comment_id": 52820518, "body": "The weird part about your logic is that <code>date_column</code> will never contain more than one item. So both <code>date_column[2]</code> and <code>date_column[i]</code> will return <code>nil</code>"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1441802258, "post_id": 32479709, "comment_id": 52820263, "body": "Ah, it has <code>map</code> after <code>foreach</code>. Yeah, that will totally explain the &quot;forever&quot; part :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1441802418, "post_id": 32479709, "comment_id": 52820380, "body": "If it were me who was tasked with this, I&#39;d not bother with reading the whole file at all. Read the first line, determine position of the needed column. Seek to the near-end of the file, find the last line there. Parse and get the needed value. Should be super-fast."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1441802553, "post_id": 32479709, "comment_id": 52820493, "body": "@SergioTulentsev It is not even clear to me whether the OP actually means &quot;column&quot; or &quot;row&quot;. The question is not clear."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1441802882, "last_edit_date": 1441802882, "creation_date": 1441802093, "answer_id": 32479709, "question_id": 32479446, "link": "https://stackoverflow.com/questions/32479446/how-to-get-the-last-element-of-a-column-in-a-huge-csv-using-ruby/32479709#32479709", "title": "How to get the last element of a column in a huge CSV using Ruby?", "body": "<ul>\n<li>Using <code>map</code> means you are opening the entire file at once, which is what you are trying to avoid.</li>\n<li>It is not clear what you are trying to do by iterating over <code>COLUMNS</code>, which is <code>['timestamp']</code>.</li>\n<li>The variable <code>i</code> does not look useful; if you wanted to access the last element of an array, you can use <code>last</code>.</li>\n<li>You cannot access an array's element by doing <code>date_column(2)</code>.</li>\n<li>In doing <code>first=date_column(2)</code> and <code>last=date_column(i)</code>, you probably have in mind a system of indexation starting with <code>1</code>. That is rare in programming. In most languages, index starts with <code>0</code>, and you should have <code>1</code> and <code>i - 1</code> (that latter of which shouldn't be neccessary).</li>\n<li>From what looks like you are trying to do, you need to initialize <code>date_column</code> outside of the iteration.</li>\n</ul>\n\n<p>Probably your code should look along this line:</p>\n\n<pre><code>file = \"C:\\Users\\hp1\\Desktop\\Datasets\\1433825596_209257.csv\"\ndate_column = []\nCSV.foreach(file, headers: true) do |row|\n  # Do something with `date_column` and `row`\n  #   (Perhaps `push` some elements of `row` into `date_column`\n  #   depending on a condition?)\nend\nfirst, last = date_column[1], date_column.last\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "edited": false, "score": 0, "creation_date": 1441803512, "post_id": 32480104, "comment_id": 52821256, "body": "Ah! I see. But isn&#39;t <code>foreach</code> supposed to be like the <code>for</code> loop in C, which would mean that <code>first_timestamp</code> and <code>last_timestamp</code> would get updated every time the loop runs? If not, how does <code>foreach</code> work? And what&#39;s the difference between <code>CSV.foreach</code> and <code>CSV.parse</code>? Many thanks."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "edited": false, "score": 0, "creation_date": 1441803870, "post_id": 32480104, "comment_id": 52821524, "body": "<code>first_timestamp</code> will only be set once because of the <code>||=</code> operator."}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "edited": false, "score": 0, "creation_date": 1441804483, "post_id": 32480104, "comment_id": 52821969, "body": "Ok. But when I wrote your program, and added at the bottom <code>puts first_timestamp </code> and <code>puts last_timestamp </code>, the program does not display anything. Why is that so?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "edited": false, "score": 0, "creation_date": 1441804795, "post_id": 32480104, "comment_id": 52822208, "body": "Is there a column <code>&#39;timestamp&#39;</code>? Did you run my code exactly as-is or did you add your own stuff? Some functions, perhaps?"}, {"owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "edited": false, "score": 0, "creation_date": 1441805648, "post_id": 32480104, "comment_id": 52822827, "body": "No, I copied your code exactly as it is. I only added the 2 <code>puts</code> lines at the end outside of the loop."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "edited": false, "score": 0, "creation_date": 1441806284, "post_id": 32480104, "comment_id": 52823322, "body": "Hm, should have worked. Try changing them to instance variables (<code>@first_timestamp</code>)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1441803239, "creation_date": 1441803239, "answer_id": 32480104, "question_id": 32479446, "link": "https://stackoverflow.com/questions/32479446/how-to-get-the-last-element-of-a-column-in-a-huge-csv-using-ruby/32480104#32480104", "title": "How to get the last element of a column in a huge CSV using Ruby?", "body": "<p>There's no need for loop counters, header offsets, column arrays or anything of that sort. You want first and last values? Iterate the collection and update current values accordingly</p>\n\n<pre><code>require 'csv'\n\nfirst_timestamp = nil\nlast_timestamp = nil\n\nCSV.foreach('C:\\Users\\hp1\\Desktop\\Datasets\\1433825596_209257.csv', :headers=&gt;true) do |row|\n    first_timestamp ||= row['timestamp'] # don't reset it\n    last_timestamp = row['timestamp']\nend\n\n# do something with the timestamps\n</code></pre>\n"}], "owner": {"reputation": 2831, "user_id": 5305512, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7c7a8df7cfda681c96a34d6e271b1b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Kristada673", "link": "https://stackoverflow.com/users/5305512/kristada673"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1441803239, "creation_date": 1441801294, "last_edit_date": 1441802791, "question_id": 32479446, "link": "https://stackoverflow.com/questions/32479446/how-to-get-the-last-element-of-a-column-in-a-huge-csv-using-ruby", "title": "How to get the last element of a column in a huge CSV using Ruby?", "body": "<p>My CSV is 30 GB in size, so I can't open it. Thus, to find out the first and the last rows of a column, I had to write a code. This is my code:</p>\n\n<pre><code>require 'csv'\n\nCOLUMNS = ['timestamp']\ni=0\nCSV.foreach('C:\\Users\\hp1\\Desktop\\Datasets\\1433825596_209257.csv', :headers=&gt;true).map do |row|\n    date_column = COLUMNS.map { |col| row[col] }\n    i=i+1\nend\nfirst=date_column(2)\nlast=date_column(i)\n</code></pre>\n\n<p>All I'm trying to do here is store the <code>timestamp</code> column in an array, <code>date_column</code>, and then once the loop exits, print out the first (2 because it has a header) and the last element of the array. But when I run it, it never ends, and keeps running forever. So, what is wrong in my code? Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1441800921, "post_id": 32479291, "comment_id": 52819276, "body": "Read <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 853, "user_id": 3083321, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b89a0aec6a8d868f2d37ae7e2d911e24?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/3083321/mat"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1441801081, "post_id": 32479291, "comment_id": 52819382, "body": "@ArupRakshit : already read, but I don&#39;t see where my mistake is."}, {"owner": {"reputation": 2634, "user_id": 1210949, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vAL35.jpg?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/1210949/albin"}, "edited": false, "score": 0, "creation_date": 1441801221, "post_id": 32479291, "comment_id": 52819496, "body": "Why do you have this: <code>flat_map {|foo| [foo.node, foo.node.parent_node]}.uniq.compact</code>. Seems to me that it might cause extra complexity and possibly introduce the <code>N + 1</code> queries"}, {"owner": {"reputation": 853, "user_id": 3083321, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b89a0aec6a8d868f2d37ae7e2d911e24?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/3083321/mat"}, "reply_to_user": {"reputation": 2634, "user_id": 1210949, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vAL35.jpg?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/1210949/albin"}, "edited": false, "score": 0, "creation_date": 1441801285, "post_id": 32479291, "comment_id": 52819551, "body": "@Albin : because I need to get a list of nodes, and not foos. My structure is as follows : nodes can have multiple nodes, nodes can have one parent_node, nodes can have one foo, foos can have one node"}], "answers": [{"tags": [], "owner": {"reputation": 2634, "user_id": 1210949, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vAL35.jpg?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/1210949/albin"}, "is_accepted": true, "score": 3, "last_activity_date": 1441802497, "creation_date": 1441802497, "answer_id": 32479850, "question_id": 32479291, "link": "https://stackoverflow.com/questions/32479291/map-performing-n1-queries/32479850#32479850", "title": "`map` performing N+1 queries", "body": "<p>I think that the reason you are seeing these <code>N + 1</code> queries is that you are not including anything in the <code>parent_node</code> I think it can be avoided if you write it like this: </p>\n\n<pre><code>nodes_list =\n  Foo\n  .where(id: foo_ids)\n  .includes(node: [:nodes, :node_image, parent_node: [:nodes, :node_image, :parent_node]])\n  .includes(:bar, :foo_image)\n  .flat_map {|foo| [foo.node, foo.node.parent_node]}.uniq.compact\n</code></pre>\n\n<p><strong>Completely separate from the question I would like to add the following:</strong></p>\n\n<p>You could remove the <code>includes(:bar, :foo_image)</code> since that will only cause extra work. The <code>foos</code> you fetch and decorate with <code>bar</code> and <code>foo_image</code> are discarded without using these prefetched decorations. </p>\n"}], "owner": {"reputation": 853, "user_id": 3083321, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b89a0aec6a8d868f2d37ae7e2d911e24?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/3083321/mat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 32479850, "answer_count": 1, "score": -1, "last_activity_date": 1441802497, "creation_date": 1441800825, "last_edit_date": 1441801536, "question_id": 32479291, "link": "https://stackoverflow.com/questions/32479291/map-performing-n1-queries", "title": "`map` performing N+1 queries", "body": "<p>In my code, I have a selection that includes:</p>\n\n<pre><code>nodes_list =\n  Foo\n  .where(id: foo_ids)\n  .includes(node: [:nodes, node_image, :parent_node])\n  .includes(:bar, :foo_image)\n  .flat_map {|foo| [foo.node, foo.node.parent_node]}.uniq.compact\n</code></pre>\n\n<p>This part works fine and avoids N+1 queries as expected. However, later in my code, I have this:</p>\n\n<pre><code>nodes_list.map do |node|\n  if node.nodes.empty?\n    image = node.foo.foo_image\n  else\n    image = node.node_image\n  end\n\n  {\n    id: node.id,\n    name: node.name,\n    image: image,\n    parent_id: node.parent_node,\n  }\nend\n</code></pre>\n\n<p>In this case, I have N+1 queries on <code>parent_node</code>, <code>nodes</code> and <code>node_image</code>, which should be in my <code>includes</code>. How can I avoid those N+1 queries?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14194, "user_id": 290338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86f90bd8375fa7f611f43ee03cebcd10?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/290338/anatoly"}, "edited": false, "score": 0, "creation_date": 1441799910, "post_id": 32478921, "comment_id": 52818567, "body": "are you really working with currency and store data in float???"}], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 3, "last_activity_date": 1441802907, "last_edit_date": 1441802907, "creation_date": 1441799908, "answer_id": 32478984, "question_id": 32478921, "link": "https://stackoverflow.com/questions/32478921/how-to-round-to-2-decimal-2-2034-and-have-2-20-and-not-2-2-in-ruby/32478984#32478984", "title": "How to round to 2 decimal 2.2034 and have 2.20 and not 2.2 in Ruby", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-sprintf\" rel=\"nofollow\"><code>sprintf</code></a> method:</p>\n\n<pre><code>sprintf('%.2f', 2.201)\n# =&gt; '2.20'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1441804301, "post_id": 32479002, "comment_id": 52821840, "body": "Note that the linked question has rounding issues despite using the Money gem."}], "tags": [], "owner": {"reputation": 879, "user_id": 451276, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/gqZuz.jpg?s=128&g=1", "display_name": "mic-kul", "link": "https://stackoverflow.com/users/451276/mic-kul"}, "is_accepted": true, "score": 4, "last_activity_date": 1441800933, "last_edit_date": 1495535201, "creation_date": 1441799952, "answer_id": 32479002, "question_id": 32478921, "link": "https://stackoverflow.com/questions/32478921/how-to-round-to-2-decimal-2-2034-and-have-2-20-and-not-2-2-in-ruby/32479002#32479002", "title": "How to round to 2 decimal 2.2034 and have 2.20 and not 2.2 in Ruby", "body": "<p>Something like this using formatting</p>\n\n<pre><code>x = 2.2\nputs \"%.2f\" %x # =&gt; 2.20\n</code></pre>\n\n<p>When dealing with money and currencies, you shouldn't trust floating point numbers. Why? Check <a href=\"https://stackoverflow.com/questions/32201861\">this</a>.</p>\n\n<p>There is <a href=\"https://github.com/RubyMoney/money\" rel=\"nofollow noreferrer\">a special gem</a> for dealing with money.</p>\n"}], "owner": {"reputation": 169, "user_id": 5097395, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b03ceb4fc2f830bff550dc6c4110c8f?s=128&d=identicon&r=PG&f=1", "display_name": "karlihnos", "link": "https://stackoverflow.com/users/5097395/karlihnos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 32479002, "answer_count": 2, "score": -1, "last_activity_date": 1441980571, "creation_date": 1441799715, "last_edit_date": 1441980571, "question_id": 32478921, "link": "https://stackoverflow.com/questions/32478921/how-to-round-to-2-decimal-2-2034-and-have-2-20-and-not-2-2-in-ruby", "title": "How to round to 2 decimal 2.2034 and have 2.20 and not 2.2 in Ruby", "body": "<p>Actually I do not know how this is called and that is why I ask here.</p>\n\n<p>I am working with currency and this way of presentation is important.</p>\n\n<p>In ruby I need to have a value like 2.20 and not 2.2.</p>\n\n<p><strong>Examples:</strong></p>\n\n<p><code>2.201.round(2)</code> -> <code>2.20</code> and not 2.2</p>\n\n<p><code>3.80989.round(2)</code> -> <code>3.80</code> and not 3.8</p>\n\n<p>The problem is with the final 0, when it is another number there is no problem. <code>2.345.round(2)</code> -> <code>2.35</code></p>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer"], "answers": [{"tags": [], "owner": {"reputation": 29107, "user_id": 122080, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6fa1cdda524d49996a8bc6917328de3d?s=128&d=identicon&r=PG", "display_name": "Damien MATHIEU", "link": "https://stackoverflow.com/users/122080/damien-mathieu"}, "is_accepted": false, "score": 0, "last_activity_date": 1441799521, "creation_date": 1441799521, "answer_id": 32478844, "question_id": 32478720, "link": "https://stackoverflow.com/questions/32478720/passing-params-to-rails-action-mailer/32478844#32478844", "title": "Passing params to rails action mailer", "body": "<p>You cannot pass ruby objects in links, because that triggers a new page load on a different URI, and the ids are provided in that address. You need to only pass ids.  </p>\n\n<p>Therefore your ids being passed here, you can fetch the objects with the following:</p>\n\n<pre><code>@result.each do |id|\n  participant = Participant.find(id)\n  mail(to: participant.participant_email, subject: 'Congratulation')\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "is_accepted": true, "score": 2, "last_activity_date": 1474024399, "last_edit_date": 1474024399, "creation_date": 1441799591, "answer_id": 32478865, "question_id": 32478720, "link": "https://stackoverflow.com/questions/32478720/passing-params-to-rails-action-mailer/32478865#32478865", "title": "Passing params to rails action mailer", "body": "<p>You will have to find winners by ID, in this line:</p>\n\n<pre><code>&lt;%= link_to \"Email Winners\", email_winner_sweepstakes_path(result: @result) %&gt;\n</code></pre>\n\n<p>what you do is formulate the URL and you can't store objects its only string and what it did is it will call <code>.id</code> on <code>@result</code> </p>\n\n<p>to fix that:</p>\n\n<p>in your controller:</p>\n\n<pre><code>def email_winner\n  @results = Participant.where(\"id in (?)\", params[:result])\n  ParticipantMailer.winner_confirmation(@results).deliver_now!\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5287360"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1847, "favorite_count": 1, "accepted_answer_id": 32478865, "answer_count": 2, "score": 4, "last_activity_date": 1474024399, "creation_date": 1441799179, "question_id": 32478720, "link": "https://stackoverflow.com/questions/32478720/passing-params-to-rails-action-mailer", "title": "Passing params to rails action mailer", "body": "<p>I am using action mailer to email winners, <code>@result</code> array has records of participants who has won including their email.</p>\n\n<pre><code>@result=&gt;[#&lt;Participant id: 47, admin_id: nil, sweepstake_id: 8, participant_name: \"gomez\", participant_email: \"rakesh.k@birdvision.in\", participant_number: \"12131245421\", ip_addr: \"127.0.0.1\", answer: \"nice\", reg_time: nil, entry_opt_id: nil, created_at: \"2015-09-03 12:15:48\", updated_at: \"2015-09-07 12:12:53\"&gt;, #&lt;Participant id: 47, admin_id: nil, sweepstake_id: 8, participant_name: \"gomez\", participant_email: \"rakesh.k@birdvision.in\", participant_number: \"12131245421\", ip_addr: \"127.0.0.1\", answer: \"nice\", reg_time: nil, entry_opt_id: nil, created_at: \"2015-09-03 12:15:48\", updated_at: \"2015-09-07 12:12:53\"&gt;]\n</code></pre>\n\n<p>But when i pass the result from my controller to the mailer, the result now only has id as string.\n<code>Parameters: {\"result\"=&gt;[\"47\", \"47\"]</code>}.\nHow can i pass the array result which has all the participant records? </p>\n\n<p>Code in view page: </p>\n\n<pre><code>&lt;%= link_to \"Email Winners\",email_winner_sweepstakes_path(:result=&gt;@result) %&gt;\n</code></pre>\n\n<p>Code in controller:</p>\n\n<pre><code>def email_winner\n      Rails.logger.info(\"***********************#{params.inspect}\")\n      ParticipantMailer.winner_confirmation(params[:result]).deliver_now!\n\n  end\n</code></pre>\n\n<p>Code in mailer: </p>\n\n<pre><code>def winner_confirmation(result)\n   @result = result\n   @url  = 'http://example.com/login'\n   Rails.logger.info(\"=================mailer=================\")\n   Rails.logger.info(@result.inspect)\n   @result.each do |i|\n   mail(to: i.participant_email, subject: 'Congratulation')\nend\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "excel", "xlsx"], "comments": [{"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 2, "creation_date": 1441799415, "post_id": 32478662, "comment_id": 52818209, "body": "So you are creating 25 million cells, which translates to 25 million objects (much more than this in reality) maintained in memory, and you complain about performance? You should consider using CSV instead."}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 0, "creation_date": 1441799493, "post_id": 32478662, "comment_id": 52818273, "body": "In my real xlsx files are much lighter but still takes around 2gb of server ram. Is there any way to stream this writing to xlsx files?"}, {"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 4, "creation_date": 1441799704, "post_id": 32478662, "comment_id": 52818433, "body": "XLS internal structure does not allow for stream writing. The whole sheet needs to be loaded in memory. However, you should be able to write some macros which does a vlookup in a csv file and populates the sheet. You can also look into ways of embedding a data source inside the xlsx. These approaches are quite advanced though. They require strong knowledge of Office internals."}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "edited": false, "score": 0, "creation_date": 1441800190, "post_id": 32478662, "comment_id": 52818780, "body": "Why not to write CSV instead? The library seams more mature too <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.2.3/libdoc/csv/rdoc/CSV.html</a>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1441803446, "post_id": 32478662, "comment_id": 52821203, "body": "There&#39;s lots of reasons to write to an xlsx file instead of csv, for example formatting, and also not having to tell your users how to import a csv into Excel.  (there&#39;s lots can go wrong with this, sometimes silently)."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1441803561, "post_id": 32478662, "comment_id": 52821293, "body": "I agree with Mihai that you can&#39;t reasonable expect to build a 25 million cell xlsx file without using large amounts of RAM.  Is the large memory usage actually a problem?  If you are on a shared server you&#39;d run the risk of the process being automatically killed."}, {"owner": {"reputation": 1716, "user_id": 4499987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZK4Zw.png?s=128&g=1", "display_name": "Adrien", "link": "https://stackoverflow.com/users/4499987/adrien"}, "edited": false, "score": 1, "creation_date": 1441906243, "post_id": 32478662, "comment_id": 52875408, "body": "Actually you can. If you were using PHP, I&#39;d recommend you to use <a href=\"https://github.com/box/spout\" rel=\"nofollow noreferrer\">Spout</a>. It streams data and only keep one row at a time in memory (so yes, streaming is possible!). I don&#39;t know any similar library in Ruby though :("}, {"owner": {"reputation": 3918, "user_id": 1608226, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f75e2877a53e9cd06009cce727235e4?s=128&d=identicon&r=PG&f=1", "display_name": "Nuclearman", "link": "https://stackoverflow.com/users/1608226/nuclearman"}, "edited": false, "score": 0, "creation_date": 1603162939, "post_id": 32478662, "comment_id": 113942073, "body": "RAM Issues with CSV files is a known issue for XLSX files with that gem, and I haven&#39;t had much luck with efficently loading XLSX files. I had one client that absolutely required that we fully automate the task and we would only get XLSX files. I ended up using <code>convert.io</code> to convert them to CSV files, then importing the data. You may want to consider creating multiple smaller files zipped into a folder instead of one big one. Could also trying using google sheet(s), or look into using a PHP libary. Sadly Ruby ecosystem for this is a bit weak."}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1276, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1602859099, "creation_date": 1441799048, "question_id": 32478662, "link": "https://stackoverflow.com/questions/32478662/very-high-memory-usage-when-writing-xlsx-files-with-axlsx-gem", "title": "Very high memory usage when writing xlsx files with axlsx gem", "body": "<p>I'm using <a href=\"https://github.com/randym/axlsx\" rel=\"noreferrer\">https://github.com/randym/axlsx</a> for writing data to xlsx files. I have problem with memory usage when writing big xlsx files. Here is the code that reproduces problem:</p>\n\n<pre><code>Axlsx::Package.new do |p|\n  p.workbook.add_worksheet(:name =&gt; \"Test\") do |sheet|\n    41_000.times do\n        sheet.add_row [\"test data\"] * 600\n    end\n  end\nend\n</code></pre>\n\n<p>This takes around 6gb of ram... Is there any way to do it more efficient? Or maybe there is other library that will do it efficient?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 1, "creation_date": 1441798360, "post_id": 32478272, "comment_id": 52817454, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3842818/how-to-change-rails-3-server-default-port-in-develoment\">How to change Rails 3 server default port in develoment?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 1, "last_activity_date": 1441798303, "creation_date": 1441798303, "answer_id": 32478394, "question_id": 32478272, "link": "https://stackoverflow.com/questions/32478272/run-rails-server-with-different-port-on-ubuntu/32478394#32478394", "title": "Run Rails server with different port on Ubuntu", "body": "<p>You can just use <code>-p</code> option to specify the port number:</p>\n\n<pre><code>rails server -p 8888\n</code></pre>\n\n<p>You can even make an alias: <code>rails s='rails server -p 8888'</code> and put it in the <code>.zshrc</code> or <code>.bashrc</code> so that every time you run <code>rails server</code> it will use port 8888</p>\n"}], "owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1441798303, "creation_date": 1441797933, "question_id": 32478272, "link": "https://stackoverflow.com/questions/32478272/run-rails-server-with-different-port-on-ubuntu", "title": "Run Rails server with different port on Ubuntu", "body": "<p>i need to run Rails server on Ubuntu machine with different port number(<code>i.e-8888</code>) for all time.So please help me what should the correct command to run this server.I am using Rails version 4.2.0 and i want to run this server for ever.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-3.1", "carrierwave"], "comments": [{"owner": {"reputation": 1844, "user_id": 312342, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/VvzVU.png?s=128&g=1", "display_name": "fatfrog", "link": "https://stackoverflow.com/users/312342/fatfrog"}, "edited": false, "score": 0, "creation_date": 1510962298, "post_id": 32477993, "comment_id": 81674691, "body": "Does this gem still work?  It hasn&#39;t been updated in a few years."}], "answers": [{"comments": [{"owner": {"reputation": 3519, "user_id": 752265, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/rTByu.jpg?s=128&g=1", "display_name": "Shamith c", "link": "https://stackoverflow.com/users/752265/shamith-c"}, "edited": false, "score": 0, "creation_date": 1441799506, "post_id": 32478291, "comment_id": 52818283, "body": "I tried this but I get ` [&quot;Failed to manipulate with rmagick, maybe it is not an image? Original Error: delegate failed <code>\\&quot;ffmpeg\\&quot; -v -1 -mbd rd -trellis 2 -cmp 2 -subcmp 2 -g 300 -i \\&quot;%M%%d.jpg\\&quot; \\&quot;%u.%m\\&quot; 2&gt; \\&quot;%Z\\&quot;&#39; @ error&#47;delegate.c&#47;InvokeDelegate&#47;1065&quot;]}&gt; </code>  Here code trying to take MP4 as input."}], "tags": [], "owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "is_accepted": false, "score": 0, "last_activity_date": 1441797995, "creation_date": 1441797995, "answer_id": 32478291, "question_id": 32477993, "link": "https://stackoverflow.com/questions/32477993/carrierwave-gem-video-upload-and-thumbnail-generation-with-rotation/32478291#32478291", "title": "Carrierwave gem Video upload and thumbnail generation with rotation", "body": "<p>You should include:</p>\n\n<pre><code>include CarrierWave::RMagick\n</code></pre>\n\n<p>and based on <a href=\"http://carrierwave.rubyforge.org/rdoc/classes/CarrierWave/RMagick.html\" rel=\"nofollow\">this</a></p>\n\n<pre><code>process :do_stuff\n\ndef do_stuff(blur_factor)\n  manipulate! do |img|\n    img = img.auto_orient\n    # or something similar\n  end\nend\n</code></pre>\n\n<p>Full list of operations with RMagick can be found <a href=\"https://rmagick.github.io/optequiv.html\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 3519, "user_id": 752265, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/rTByu.jpg?s=128&g=1", "display_name": "Shamith c", "link": "https://stackoverflow.com/users/752265/shamith-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2667, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1444905490, "creation_date": 1441797070, "last_edit_date": 1441799389, "question_id": 32477993, "link": "https://stackoverflow.com/questions/32477993/carrierwave-gem-video-upload-and-thumbnail-generation-with-rotation", "title": "Carrierwave gem Video upload and thumbnail generation with rotation", "body": "<p>I am using Carrierwave gem to upload video recorded from iPhone and create thumbnails of video uploaded using <a href=\"https://github.com/evrone/carrierwave-video-thumbnailer\" rel=\"nofollow\">carrierwave-video-thumbnailer gem</a>.</p>\n\n<p>Now I am facing issue with rotating thumbnail image that was generated by carrierwave-video-thumbnailer gem. I need to rotate to portrait based on video orientation. </p>\n\n<p>Please see my VideoUploader class below.</p>\n\n<pre><code>class VideoUploader &lt; CarrierWave::Uploader::Base\n  include CarrierWave::Video\n  include CarrierWave::Video::Thumbnailer\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  # include CarrierWave::MiniMagick\n\n  storage :file\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  version :thumb do\n    process thumbnail: [{format: 'jpg', quality: 7, size: 640, strip: false, logger: Rails.logger}]\n    def full_filename for_file\n      png_name for_file, version_name\n    end\n    process :set_content_type_jpg\n  end\n\n  def png_name for_file, version_name\n    %Q{#{version_name}_#{for_file.chomp(File.extname(for_file))}.jpg}\n  end\n\n  def set_content_type_jpg(*args)\n    Rails.logger.debug \"#{file.content_type}\"\n    self.file.instance_variable_set(:@content_type, \"image/jpeg\")\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex", "xml", "sublimetext"], "comments": [{"owner": {"reputation": 2614, "user_id": 1558255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QdcxH.jpg?s=128&g=1", "display_name": "Klors", "link": "https://stackoverflow.com/users/1558255/klors"}, "edited": false, "score": 0, "creation_date": 1441796795, "post_id": 32477785, "comment_id": 52816390, "body": "I&#39;m not really sure what you&#39;re asking. Are you running the regex over this XML file, or does the XML file describe a regex to something else? To match <code>puts</code> you&#39;d just use a regex of <code>puts</code>. In JS it&#39;d be <code>&#47;puts&#47;</code>..."}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 1, "creation_date": 1441796989, "post_id": 32477785, "comment_id": 52816524, "body": "... or <code>^puts$</code> if you want to match against the whole text, as in <code>text === &quot;puts&quot;</code>"}, {"owner": {"reputation": 1922, "user_id": 4934984, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8c959e6ff4a1b49733025dfa53bafcb6?s=128&d=identicon&r=PG", "display_name": "Tushortz", "link": "https://stackoverflow.com/users/4934984/tushortz"}, "reply_to_user": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1441797009, "post_id": 32477785, "comment_id": 52816535, "body": "its for a .tmTheme for sublime text @Mariano"}, {"owner": {"reputation": 2614, "user_id": 1558255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QdcxH.jpg?s=128&g=1", "display_name": "Klors", "link": "https://stackoverflow.com/users/1558255/klors"}, "edited": false, "score": 1, "creation_date": 1441798312, "post_id": 32477785, "comment_id": 52817430, "body": "As a guess, without knowing too much about tmTheme file syntax and what you&#39;re actually trying to achieve, if you want to match to a scope of <code>puts</code> you&#39;d just need that line to be <code>&lt;string&gt;puts&lt;&#47;string&gt;</code> instead of <code>--- &lt;string&gt;&gt;p[\\&#39;&quot;]?([^\\&#39;&quot; &gt;]+)s&lt;&#47;string&gt; ---</code>"}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1441798645, "post_id": 32477785, "comment_id": 52817646, "body": "From what I&#39;ve read <a href=\"http://www.sublimetext.com/docs/3/syntax.html\" rel=\"nofollow noreferrer\">here</a>, I think you can go with <code>&lt;string&gt;\\bputs\\b&lt;&#47;string&gt;</code>"}, {"owner": {"reputation": 1922, "user_id": 4934984, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8c959e6ff4a1b49733025dfa53bafcb6?s=128&d=identicon&r=PG", "display_name": "Tushortz", "link": "https://stackoverflow.com/users/4934984/tushortz"}, "reply_to_user": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1441841822, "post_id": 32477785, "comment_id": 52842067, "body": "It worked on puts but extra highlighted other things @Mariano"}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1441842089, "post_id": 32477785, "comment_id": 52842116, "body": "@Tushortz: please expand your question with some examples of subject text, when it&#39;s supposed to match, and when it&#39;s supposed to fail. I never used sublime, nor do I have an idea of the language you&#39;re trying to highlight... It was just a wild guess"}, {"owner": {"reputation": 1922, "user_id": 4934984, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8c959e6ff4a1b49733025dfa53bafcb6?s=128&d=identicon&r=PG", "display_name": "Tushortz", "link": "https://stackoverflow.com/users/4934984/tushortz"}, "reply_to_user": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1441842194, "post_id": 32477785, "comment_id": 52842141, "body": "i&#39;m trying to match the <code>puts</code> Ruby print keyword. for example: <code>puts &quot;cat &quot;</code> in ruby will output cat to he console. My main aim is to only highlight the puts keyword as i can&#39;t find any other way to highlight its scope. It&#39;s for a syntax highlighting package. @Mariano"}, {"owner": {"reputation": 6043, "user_id": 5290909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a34788cb69a6f3007f88e3a36a590ca?s=128&d=identicon&r=PG", "display_name": "Mariano", "link": "https://stackoverflow.com/users/5290909/mariano"}, "edited": false, "score": 0, "creation_date": 1441842309, "post_id": 32477785, "comment_id": 52842178, "body": "Please edit your question including examples, and maybe adding the tag <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a>"}, {"owner": {"reputation": 2614, "user_id": 1558255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QdcxH.jpg?s=128&g=1", "display_name": "Klors", "link": "https://stackoverflow.com/users/1558255/klors"}, "edited": false, "score": 0, "creation_date": 1441886295, "post_id": 32477785, "comment_id": 52861867, "body": "So you&#39;re trying to edit or create a syntax highlighting file for ruby in sublime? I don&#39;t know ruby and I&#39;ve only used Sublime for a brief time, but from the brief google I had for this, it&#39;s looks like this would be the wrong way to go about doing the syntax highlighting? You&#39;d want to pick up the highlighting for the <code>puts</code> keyword using the scope, not a regex match."}, {"owner": {"reputation": 1922, "user_id": 4934984, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8c959e6ff4a1b49733025dfa53bafcb6?s=128&d=identicon&r=PG", "display_name": "Tushortz", "link": "https://stackoverflow.com/users/4934984/tushortz"}, "reply_to_user": {"reputation": 2614, "user_id": 1558255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QdcxH.jpg?s=128&g=1", "display_name": "Klors", "link": "https://stackoverflow.com/users/1558255/klors"}, "edited": false, "score": 0, "creation_date": 1442026847, "post_id": 32477785, "comment_id": 52927326, "body": "@Klors I&#39;ve used scopes for the rest but it seems the <code>puts</code> and <code>print</code> keyword do not have a scope. I&#39;ve checked a lot of themes and I haven&#39;t found any that implemented it. It even made me create a total repository on language scopes and I had to give up but i&#39;m sure there is a way"}], "owner": {"reputation": 1922, "user_id": 4934984, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8c959e6ff4a1b49733025dfa53bafcb6?s=128&d=identicon&r=PG", "display_name": "Tushortz", "link": "https://stackoverflow.com/users/4934984/tushortz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441843351, "creation_date": 1441796526, "last_edit_date": 1441842655, "question_id": 32477785, "link": "https://stackoverflow.com/questions/32477785/how-can-i-match-the-exact-text-in-xml", "title": "How can i match the exact text in XML", "body": "<p>I want to match the exact text \"puts\" in the (xml file) for a .tmTheme file for sublime text but I've come here as my last resort. I don't really know about regex please help.</p>\n\n<p>i'm trying to match the <code>puts</code> Ruby print keyword. for example: </p>\n\n<pre><code>puts \"cat\" \n</code></pre>\n\n<p>output</p>\n\n<pre><code>cat \n</code></pre>\n\n<p>My main aim is to only highlight the puts keyword as i can't find any other way to highlight its scope. It's for a syntax highlighting package.</p>\n\n<p>the seventh line with the <code>--- &lt;&gt; ---</code> is where i'm struggling with. Any help will be greatly appreciated.</p>\n\n<pre><code>&lt;dict&gt;\n    &lt;key&gt;name&lt;/key&gt;\n    &lt;string&gt;output&lt;/string&gt;\n    &lt;key&gt;scope&lt;/key&gt;\n    &lt;string&gt;source.ruby&lt;/string&gt;\n    &lt;key&gt;match&lt;/key&gt;\n    --- &lt;string&gt;&gt;p[\\'\"]?([^\\'\" &gt;]+)s&lt;/string&gt; ---\n    &lt;key&gt;settings&lt;/key&gt;\n    &lt;dict&gt;\n        &lt;key&gt;foreground&lt;/key&gt;\n        &lt;string&gt;#ff0&lt;/string&gt;       \n    &lt;/dict&gt;\n&lt;/dict&gt;\n</code></pre>\n"}, {"tags": ["ruby", "openssl", "pkcs#7"], "answers": [{"comments": [{"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1514993936, "post_id": 32512030, "comment_id": 83135129, "body": "as per the method declaration of <code>verify</code> method of <code>PKCS7</code>, there are 4 args. Can you explain what are those? <a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/openssl/rdoc/OpenSSL/PKCS7.html#method-i-verify\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.5.0/libdoc/openssl/rdoc/OpenSSL/&hellip;</a>"}], "tags": [], "owner": {"reputation": 199, "user_id": 1150504, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0d61fd998bc3b9fe5c5590362b5677f9?s=128&d=identicon&r=PG", "display_name": "vmamaev", "link": "https://stackoverflow.com/users/1150504/vmamaev"}, "is_accepted": true, "score": 4, "last_activity_date": 1441921101, "creation_date": 1441921101, "answer_id": 32512030, "question_id": 32477436, "link": "https://stackoverflow.com/questions/32477436/decrypt-pkcs7-in-ruby-on-rails/32512030#32512030", "title": "Decrypt PKCS7 in Ruby on Rails", "body": "<p>Solution founded!!!</p>\n\n<pre><code>cert_store = OpenSSL::X509::Store.new\nmy_cert =  OpenSSL::X509::Certificate.new(File.read(\"remote.cer\"))\nsignature = OpenSSL::PKCS7.new(File.read('pkcs7-resp.file'))\nsignature.verify([my_cert], cert_store, nil, OpenSSL::PKCS7::NOVERIFY)\nsignature.data\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 1150504, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0d61fd998bc3b9fe5c5590362b5677f9?s=128&d=identicon&r=PG", "display_name": "vmamaev", "link": "https://stackoverflow.com/users/1150504/vmamaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1955, "favorite_count": 0, "accepted_answer_id": 32512030, "answer_count": 1, "score": 1, "last_activity_date": 1441921101, "creation_date": 1441795568, "last_edit_date": 1441803570, "question_id": 32477436, "link": "https://stackoverflow.com/questions/32477436/decrypt-pkcs7-in-ruby-on-rails", "title": "Decrypt PKCS7 in Ruby on Rails", "body": "<p>I try to decrypt PKCS7 data, but always receive error <code>OpenSSL::PKCS7::PKCS7Error - wrong content type</code> on method <code>\"pkcs7.decrypt(key, cer)\"</code>.</p>\n\n<p>example:</p>\n\n<pre><code>cer = OpenSSL::X509::Certificate.new(File.read(\"path/cert.cer\"))\nkey = OpenSSL::PKey::RSA.new(File.read(\"path/private.key\"), \"111111\")\ncrypted_data = File.read('path/pkcs7') # contains xml-file and signature \"-----BEGIN PKCS7----- ... -----END PKCS7-----\"\npkcs7 = OpenSSL::PKCS7.new(crypted_data)\ndecrypted_data = pkcs7.decrypt(key, cer) # error is here\n</code></pre>\n\n<p>need help! how to get data from the encrypted string?</p>\n\n<p>updated:\non bash I can solve this task by following code: </p>\n\n<pre><code>openssl smime -verify -noverify -inform PEM -nointern -certfile \"path/cert.cer\" -CAfile \"path/cert.cer\" &lt; path/pkcs7\n</code></pre>\n\n<p>returns xml file.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 4631, "user_id": 579849, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/sJ3nj.jpg?s=128&g=1", "display_name": "Sebastian vom Meer", "link": "https://stackoverflow.com/users/579849/sebastian-vom-meer"}, "edited": false, "score": 0, "creation_date": 1441795995, "post_id": 32477530, "comment_id": 52815866, "body": "Additionally, you should add the option <code>inverse_of: :manager</code>"}, {"owner": {"reputation": 3, "user_id": 5316641, "user_type": "registered", "profile_image": "https://graph.facebook.com/830440937073560/picture?type=large", "display_name": "Jamie Barton", "link": "https://stackoverflow.com/users/5316641/jamie-barton"}, "edited": false, "score": 0, "creation_date": 1441796607, "post_id": 32477530, "comment_id": 52816249, "body": "I get ... : SELECT &quot;departments&quot;.* FROM &quot;departments&quot; WHERE &quot;departments&quot;.&quot;user_id&quot; = $1 ActiveRecord::StatementInvalid: PG::UndefinedColumn: ERROR:  column departments.user_id does not exist LINE 1: SELECT &quot;departments&quot;.* FROM &quot;departments&quot; WHERE &quot;departments..."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 3, "user_id": 5316641, "user_type": "registered", "profile_image": "https://graph.facebook.com/830440937073560/picture?type=large", "display_name": "Jamie Barton", "link": "https://stackoverflow.com/users/5316641/jamie-barton"}, "edited": false, "score": 0, "creation_date": 1441796890, "post_id": 32477530, "comment_id": 52816459, "body": "@JamieBarton Totally forgot about that. Edited."}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1441796869, "last_edit_date": 1441796869, "creation_date": 1441795835, "answer_id": 32477530, "question_id": 32477424, "link": "https://stackoverflow.com/questions/32477424/rails-belongs-to-and-has-many-foreign-key-relationship/32477530#32477530", "title": "Rails belongs_to and has_many foreign_key relationship", "body": "<p>You can use <code>class_name</code> option same like you used it in <code>Department</code> model</p>\n\n<pre><code>#user.rb\nclass User &lt; ActiveRecord::Base\n  belongs_to :department\n  has_many :managed_departments, class_name: \"Department\", foreign_key: \"manager_id\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4631, "user_id": 579849, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/sJ3nj.jpg?s=128&g=1", "display_name": "Sebastian vom Meer", "link": "https://stackoverflow.com/users/579849/sebastian-vom-meer"}, "edited": false, "score": 0, "creation_date": 1441796118, "post_id": 32477580, "comment_id": 52815935, "body": "His model distinguishes between users and managers. Therefore he has this two-way relationship, which is absolutely correct."}, {"owner": {"reputation": 3, "user_id": 5316641, "user_type": "registered", "profile_image": "https://graph.facebook.com/830440937073560/picture?type=large", "display_name": "Jamie Barton", "link": "https://stackoverflow.com/users/5316641/jamie-barton"}, "edited": false, "score": 0, "creation_date": 1441796684, "post_id": 32477580, "comment_id": 52816306, "body": "Yeah a Department has_many users and a User belongs to a Department. It&#39;s not a HABTM relationship."}, {"owner": {"reputation": 209, "user_id": 5307968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef3ed35eef4e60a5592bc8877fb99e5?s=128&d=identicon&r=PG&f=1", "display_name": "Nickey", "link": "https://stackoverflow.com/users/5307968/nickey"}, "edited": false, "score": 1, "creation_date": 1441796768, "post_id": 32477580, "comment_id": 52816375, "body": "But manager is also a user entity. And an manager can manage multiple department. So it should be many to many."}, {"owner": {"reputation": 3, "user_id": 5316641, "user_type": "registered", "profile_image": "https://graph.facebook.com/830440937073560/picture?type=large", "display_name": "Jamie Barton", "link": "https://stackoverflow.com/users/5316641/jamie-barton"}, "edited": false, "score": 0, "creation_date": 1441797569, "post_id": 32477580, "comment_id": 52816928, "body": "Yeah but a department only has one manager. It works with the answer below. Thanks anyways!"}], "tags": [], "owner": {"reputation": 209, "user_id": 5307968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef3ed35eef4e60a5592bc8877fb99e5?s=128&d=identicon&r=PG&f=1", "display_name": "Nickey", "link": "https://stackoverflow.com/users/5307968/nickey"}, "is_accepted": false, "score": 0, "last_activity_date": 1441805508, "last_edit_date": 1441805508, "creation_date": 1441795976, "answer_id": 32477580, "question_id": 32477424, "link": "https://stackoverflow.com/questions/32477424/rails-belongs-to-and-has-many-foreign-key-relationship/32477580#32477580", "title": "Rails belongs_to and has_many foreign_key relationship", "body": "<p>You are not creating right association. You have many to many relation ship between user and department.</p>\n\n<pre><code>user has_many departments (Can manage multiple department)\ndepartment has_many users\n</code></pre>\n\n<p>As a database standard you should break many to many relationship and introduce a new intermediate table.</p>\n\n<p>So your new table should be <code>users_departments</code>. In this table you can add column user is manager or not.</p>\n\n<p>table should have column :\nuser_id , department_is, is_manager</p>\n\n<pre><code>class Department &lt; ActiveRecord::Base\n  has_many :users, :through =&gt; :users_departments\nend\n\nclass User &lt; ActiveRecord::Base\n  has_many :departments, :through =&gt; :users_departments\nend\n\nclass UsersDepartment &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :department\nend\n</code></pre>\n\n<p>Here you can find anything with association. and with simple scope you can find manager of department also.</p>\n"}], "owner": {"reputation": 3, "user_id": 5316641, "user_type": "registered", "profile_image": "https://graph.facebook.com/830440937073560/picture?type=large", "display_name": "Jamie Barton", "link": "https://stackoverflow.com/users/5316641/jamie-barton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "accepted_answer_id": 32477530, "answer_count": 2, "score": 0, "last_activity_date": 1441805508, "creation_date": 1441795529, "question_id": 32477424, "link": "https://stackoverflow.com/questions/32477424/rails-belongs-to-and-has-many-foreign-key-relationship", "title": "Rails belongs_to and has_many foreign_key relationship", "body": "<p>I need a little help... I have these relationships... Users belong to Department, a Department has a manager, Managers (Users) can have many managed departments.</p>\n\n<p>I'm having one of those days and I can't for the life of me figure out what to put inside the <code>User</code> model to define the `has_many :managed_departments' part of the relationship.</p>\n\n<p><strong>Department</strong></p>\n\n<pre><code>class Department &lt; ActiveRecord::Base\n  has_many :users\n  belongs_to :manager, foreign_key: \"manager_id\", class_name: \"User\"\nend\n</code></pre>\n\n<p><strong>User</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  belongs_to :department\n  # has_many :managed_departments\nend\n</code></pre>\n\n<p>This works: <code>Department.last.manager</code> which returns:</p>\n\n<pre><code>=&gt; #&lt;User id: 2, etc...\n</code></pre>\n\n<p>I'm having a mindblank on what to put in the <code>User</code> model. </p>\n\n<p>Can anyone help?</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 2634, "user_id": 1210949, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vAL35.jpg?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/1210949/albin"}, "is_accepted": false, "score": 1, "last_activity_date": 1441798989, "creation_date": 1441798989, "answer_id": 32478641, "question_id": 32477104, "link": "https://stackoverflow.com/questions/32477104/rspec-custom-diffable-matcher/32478641#32478641", "title": "RSpec custom diffable matcher", "body": "<p>There is a gem called <a href=\"https://github.com/samg/diffy\" rel=\"nofollow\">diffy</a> which can be used.</p>\n\n<p>But it goes through a string line by line and compares them so instead of removing all whitespace you could replace any amount of whitespace with a newline and diff those entries.</p>\n\n<p>This is an example of something you could do to improve your diffs a little bit. I am not 100% certain about where to insert this into your code.</p>\n\n<pre><code>def compare(str1, str2)\n  str1 = break_string(str1)\n  str2 = break_string(str2)\n  return true if str1 == str2\n  puts Diffy::Diff.new(str1, str2).to_s\n  return false\nend\n\ndef break_string(str)\n  str.gsub(/\\s+/,\"\\n\")\nend\n</code></pre>\n\n<p>The diffy gem can be set to produce color output suitable for the terminal.</p>\n\n<p>Using this code would work like this</p>\n\n<pre><code>str1 = 'extra some                 content'\nstr2 = 'extra more content'\nputs compare(str1, str2)\n</code></pre>\n\n<p>this would print</p>\n\n<pre><code> extra\n -some   # red in terminal\n +more   # green in terminal\n content\n \\ No newline at end of file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 12, "last_activity_date": 1441800027, "creation_date": 1441800027, "answer_id": 32479025, "question_id": 32477104, "link": "https://stackoverflow.com/questions/32477104/rspec-custom-diffable-matcher/32479025#32479025", "title": "RSpec custom diffable matcher", "body": "<p>I believe you should disable default <code>diffable</code> behaviour in RSpec and substitute your own implementation:</p>\n\n<pre><code>RSpec::Matchers.define :be_matching_content do |expected|\n  match do |actual|\n    @stripped_actual = actual.gsub(/\\s/,'')\n    @stripped_expected = expected.gsub(/\\s/,'')\n    expect(@stripped_actual).to eq @stripped_expected\n  end\n\n  failure_message do |actual|\n    message = \"expected that #{@stripped_actual} would match #{@stripped_expected}\"\n    message += \"\\nDiff:\" + differ.diff_as_string(@stripped_actual, @stripped_expected)\n    message\n  end\n\n  def differ\n    RSpec::Support::Differ.new(\n        :object_preparer =&gt; lambda { |object| RSpec::Matchers::Composable.surface_descriptions_in(object) },\n        :color =&gt; RSpec::Matchers.configuration.color?\n    )\n  end\nend\n\nRSpec.describe 'something'do\n  it 'should diff correctly' do\n    body = \"   some data   \\n more data\"\n    expect(body).to be_matching_content(\"some data\\nmore wrong data\")\n  end\nend\n</code></pre>\n\n<p>produces the following:</p>\n\n<pre><code>Failures:\n\n  1) something should diff correctly\n     Failure/Error: expect(body).to be_matching_content(\"some data\\nmore wrong data\")\n       expected that somedatamoredata would match somedatamorewrongdata\n       Diff:\n       @@ -1,2 +1,2 @@\n       -somedatamorewrongdata\n       +somedatamoredata\n</code></pre>\n\n<p>You can use custom differ if you want, even reimplement this whole matcher to a system call to <code>diff</code> command, something like this:</p>\n\n<pre><code>\u2665 diff -uw --label expected --label actual &lt;(echo \"   some data    \\n more data\") &lt;(echo \"some data\\nmore wrong data\")\n--- expected\n+++ actual\n@@ -1,2 +1,2 @@\n    some data    \n- more data\n+more wrong data\n</code></pre>\n\n<p>Cheers!</p>\n"}, {"comments": [{"owner": {"reputation": 4080, "user_id": 233370, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/0a84380e7a0498f051758a0adfc40fa0?s=128&d=identicon&r=PG", "display_name": "Matt Zukowski", "link": "https://stackoverflow.com/users/233370/matt-zukowski"}, "edited": false, "score": 1, "creation_date": 1447545170, "post_id": 32576204, "comment_id": 55200452, "body": "Note this is only mentioned in the rspec docs starting at version 3.4. Also, according to the docs you don&#39;t need the <code>attr_reader</code> if you use <code>@actual</code> as the instance variable name."}, {"owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "edited": false, "score": 1, "creation_date": 1568205878, "post_id": 32576204, "comment_id": 102200514, "body": "I tried it out and it seems like, you do need them. Without the attr_reader the <code>@actual</code> and <code>@expected</code> instance variables aren&#39;t used (RSpec 3.8)"}, {"owner": {"reputation": 4896, "user_id": 167108, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6793711bc9796cf78175999287f92be8?s=128&d=identicon&r=PG", "display_name": "Steve Smith", "link": "https://stackoverflow.com/users/167108/steve-smith"}, "edited": false, "score": 0, "creation_date": 1613136636, "post_id": 32576204, "comment_id": 116989977, "body": "This is still working as of Rspec 3.10 and was the best solution for me"}], "tags": [], "owner": {"reputation": 5631, "user_id": 1589422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c03d217df4867dfb3b3674649fa92e5b?s=128&d=identicon&r=PG", "display_name": "Robin Daugherty", "link": "https://stackoverflow.com/users/1589422/robin-daugherty"}, "is_accepted": false, "score": 8, "last_activity_date": 1442280136, "creation_date": 1442280136, "answer_id": 32576204, "question_id": 32477104, "link": "https://stackoverflow.com/questions/32477104/rspec-custom-diffable-matcher/32576204#32576204", "title": "RSpec custom diffable matcher", "body": "<p>You can override the <code>expected</code> and <code>actual</code> methods that will then be used when generating the diff. In this example, we store the expected and actual values as instance variables and define methods that return the instance variables:</p>\n\n<pre><code>RSpec::Matchers.define :be_matching_content do |expected_raw|\n  match do |actual_raw|\n    @actual = actual_raw.gsub(/\\s/,'')\n    @expected = expected_raw.gsub(/\\s/,'') \n    expect(expected).to eq(@actual)\n  end\n\n  diffable\n  attr_reader :actual, :expected\nend\n</code></pre>\n\n<p>Another example is to match for specific attributes in two different types of objects. (The expected object in this case is a <code>Client</code> model.)</p>\n\n<pre><code>RSpec::Matchers.define :have_attributes_of_v1_client do |expected_client|\n  match do |actual_object|\n    @expected = client_attributes(expected_client)\n    @actual = actual_object.attributes\n    expect(actual_object).to have_attributes(@expected)\n  end\n\n  diffable\n  attr_reader :actual, :expected\n\n  def failure_message\n    \"expected attributes of a V1 Client view row, but they do not match\"\n  end\n\n  def client_attributes(client)\n    {\n      \"id\" =&gt; client.id,\n      \"client_type\" =&gt; client.client_type.name,\n      \"username\" =&gt; client.username,\n      \"active\" =&gt; client.active?,\n    }\n  end\nend\n</code></pre>\n\n<p>Example failure looks like this:</p>\n\n<pre><code>Failure/Error: is_expected.to have_attributes_of_v1_client(client_active_partner)\n  expected attributes of a V1 Client view row, but they do not match\n  Diff:\n  @@ -1,6 +1,6 @@\n   \"active\" =&gt; true,\n  -\"client_type\" =&gt; #&lt;ClientType id: 2, name: \"ContentPartner\"&gt;,\n  +\"client_type\" =&gt; \"ContentPartner\",\n   \"id\" =&gt; 11,\n</code></pre>\n"}], "owner": {"reputation": 12290, "user_id": 228370, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a3f87affc7032e0af7cc4ce2ddb08ce9?s=128&d=identicon&r=PG", "display_name": "23tux", "link": "https://stackoverflow.com/users/228370/23tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1399, "favorite_count": 2, "accepted_answer_id": 32479025, "answer_count": 3, "score": 11, "last_activity_date": 1442280136, "creation_date": 1441794475, "question_id": 32477104, "link": "https://stackoverflow.com/questions/32477104/rspec-custom-diffable-matcher", "title": "RSpec custom diffable matcher", "body": "<p>I have a custom matcher in RSpec, that ignores whitespaces / newlines, and just matches content:</p>\n\n<pre><code>RSpec::Matchers.define :be_matching_content do |expected|\n  match do |actual|\n    actual.gsub(/\\s/,'').should == expected.gsub(/\\s/,'')\n  end\n\n  diffable\nend\n</code></pre>\n\n<p>I can use it like this:</p>\n\n<pre><code>    body = \"   some data   \\n more data\"\n    body.should be_matching_content(\"some data\\nmore wrong data\")\n</code></pre>\n\n<p>However, when a test fails (like the one above), the diff output looks not good:</p>\n\n<pre><code>   -some data\n   -more wrong data\n   +   some data   \n   + more data\n</code></pre>\n\n<p>Is it possible to configure the diffable output? The first line <code>some data</code> is right, but the second <code>more wrong data</code> is wrong. It would be very useful, to only get the second line as the root cause of the failure.</p>\n"}, {"tags": ["ruby", "time"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441794668, "post_id": 32476842, "comment_id": 52814977, "body": "When does a week start/end? I hope you are not a nationalist, believing that whatever day that you have in mind as the start of a week holds over to the entire world."}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441795489, "post_id": 32476842, "comment_id": 52815525, "body": "Forgive my bad English"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441795681, "post_id": 32476842, "comment_id": 52815666, "body": "You didn&#39;t seem to get my point. At least to my knowledge, there are countries/areas in which a week starts on Monday. There are also countries/areas in which a week starts on Sunday. I am not sure if there are other starts of a week."}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1441795756, "post_id": 32476842, "comment_id": 52815716, "body": "oh, a week starts on Monday"}], "answers": [{"comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1441794086, "post_id": 32476949, "comment_id": 52814625, "body": "sorry, the end_time is not fixed"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 1, "creation_date": 1441794583, "post_id": 32476949, "comment_id": 52814921, "body": "can you explain further? What do you mean by <code>end_time</code> is not fixed?"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 2, "last_activity_date": 1441795515, "last_edit_date": 1441795515, "creation_date": 1441794021, "answer_id": 32476949, "question_id": 32476842, "link": "https://stackoverflow.com/questions/32476842/get-seconds-from-the-day-to-thursday-1000-at-that-week/32476949#32476949", "title": "Get seconds from the day to Thursday 10:00 at that week", "body": "<p>You can subtract two time to get difference in seconds (<a href=\"http://ruby-doc.org/core-2.1.4/Time.html#method-i-2D\" rel=\"nofollow\">see docs</a>):</p>\n\n<pre><code>require 'time'\nTime.parse(end_time) - Time.parse(time)\n# =&gt; 57600.0\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>To calculate difference between two time getting two fixed time is an absolute must. You can get time for next week simply by adding numeric time difference in seconds to existing time. Here:</p>\n\n<pre><code>next_week_time = Time.parse(end_time) + (1*7*24*60*60)\n</code></pre>\n\n<p>Or if you are on Rails, with ActiveSupport you can simply do:</p>\n\n<pre><code>next_week_time = Time.parse(end_time) + 1.weeks\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1441795346, "post_id": 32477339, "comment_id": 52815427, "body": "Thanks, you know what I mean"}, {"owner": {"reputation": 736, "user_id": 2783903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ecd8d52090a933ee3362bd05b95e8e6c?s=128&d=identicon&r=PG&f=1", "display_name": "JonB", "link": "https://stackoverflow.com/users/2783903/jonb"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1442008892, "post_id": 32477339, "comment_id": 52923644, "body": "@pangpang - If that answer was indeed what you were searching for, could you please consider marking it as correct?"}], "tags": [], "owner": {"reputation": 736, "user_id": 2783903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ecd8d52090a933ee3362bd05b95e8e6c?s=128&d=identicon&r=PG&f=1", "display_name": "JonB", "link": "https://stackoverflow.com/users/2783903/jonb"}, "is_accepted": true, "score": 3, "last_activity_date": 1441795236, "creation_date": 1441795236, "answer_id": 32477339, "question_id": 32476842, "link": "https://stackoverflow.com/questions/32476842/get-seconds-from-the-day-to-thursday-1000-at-that-week/32477339#32477339", "title": "Get seconds from the day to Thursday 10:00 at that week", "body": "<p>Use <a href=\"https://github.com/mojombo/chronic/\" rel=\"nofollow\">Chronic</a>:</p>\n\n<pre><code>require 'chronic'\n\nChronic.parse('this Thursday at 10:00 am') - Time.now\n\n#=&gt; 98688.251918432\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4523, "user_id": 177273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fwNdZ.jpg?s=128&g=1", "display_name": "mattr-", "link": "https://stackoverflow.com/users/177273/mattr"}, "edited": false, "score": 0, "creation_date": 1441814313, "post_id": 32482017, "comment_id": 52829388, "body": "This code works but you provide no explanation as to what it&#39;s doing or how it works. It&#39;s just a code drop. An explanation/walkthrough of your code would make the answer better."}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 0, "last_activity_date": 1441817719, "last_edit_date": 1441817719, "creation_date": 1441808165, "answer_id": 32482017, "question_id": 32476842, "link": "https://stackoverflow.com/questions/32476842/get-seconds-from-the-day-to-thursday-1000-at-that-week/32482017#32482017", "title": "Get seconds from the day to Thursday 10:00 at that week", "body": "<p><code>(4-Time.now.wday-1)*24*3600</code>: get the number of days from the day morning to Thursday of the week.</p>\n\n<p><code>Time.now.seconds_until_end_of_day</code>: get the rest seconds of the day. </p>\n\n<pre><code>seconds = (4-Time.now.wday-1)*24*3600 + Time.now.seconds_until_end_of_day + 10*3600\nseconds = seconds &gt; 0 ? seconds : 0\n</code></pre>\n"}], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 32477339, "answer_count": 3, "score": -1, "last_activity_date": 1441817719, "creation_date": 1441793748, "last_edit_date": 1441795900, "question_id": 32476842, "link": "https://stackoverflow.com/questions/32476842/get-seconds-from-the-day-to-thursday-1000-at-that-week", "title": "Get seconds from the day to Thursday 10:00 at that week", "body": "<p>How do I get the seconds from the day to Thursday 10:00 at that week? If later than Thursday 10:00, I want to get zero. For example:</p>\n\n<pre><code>seconds = (Thursday 10:00) - Time.now\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1441790134, "post_id": 32475531, "comment_id": 52811847, "body": "You need to use either <code>joins</code> or <code>includes</code>. Have a look at these <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\"><b><i>Guides</i></b></a>"}], "answers": [{"tags": [], "owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1441790869, "creation_date": 1441790869, "answer_id": 32475835, "question_id": 32475531, "link": "https://stackoverflow.com/questions/32475531/belongs-to-not-making-join/32475835#32475835", "title": "belongs_to not making join", "body": "<p>You can used like</p>\n\n<pre><code>@questions = Question.includes(:user).order(id: 'desc')\n</code></pre>\n\n<p>so if you want to access username for particular question you can directly get it by</p>\n\n<pre><code>@questions.first.user.username\n</code></pre>\n"}], "owner": {"reputation": 1312, "user_id": 2280562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3a1ecbfd6f642d6f18eaa9a51edbed89?s=128&d=identicon&r=PG", "display_name": "Sebastian Corneliu V&#238;rlan", "link": "https://stackoverflow.com/users/2280562/sebastian-corneliu-v%c3%aerlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1441793920, "creation_date": 1441789954, "last_edit_date": 1441793920, "question_id": 32475531, "link": "https://stackoverflow.com/questions/32475531/belongs-to-not-making-join", "title": "belongs_to not making join", "body": "<p>I have users table with:</p>\n\n<ul>\n<li>id</li>\n<li>username</li>\n</ul>\n\n<p>and questions table with </p>\n\n<ul>\n<li>id</li>\n<li>asker_id</li>\n<li>question_text</li>\n</ul>\n\n<p>So when I need to get a question from db I need the username too.</p>\n\n<p>So I made:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    has_many :questions\nend\n\nclass Question &lt; ActiveRecord::Base\n    validates :question_text, presence: true\n    belongs_to :user, foreign_key: \"asker_id\"\nend\n\n#controller\ndef index\n    @questions = Question.order(id: 'desc')\nend\n\n#view\n&lt;strong&gt;&lt;%= question.user.username %&gt;:&lt;/strong&gt;\n&lt;%= question.question_text %&gt; at \n&lt;i&gt;&lt;%= question.created_at %&gt;&lt;/i&gt;\n</code></pre>\n\n<p>I was expecting that questions to make join to users but in console I see:</p>\n\n<pre><code>  Question Load (0.2ms)  SELECT \"questions\".* FROM \"questions\"  ORDER BY \"questions\".\"id\" DESC\n  User Load (0.1ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT 1  [[\"id\", 1]]\n  CACHE (0.1ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT 1  [[\"id\", 1]]\n  CACHE (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT 1  [[\"id\", 1]]\n  CACHE (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT 1  [[\"id\", 1]]\n</code></pre>\n\n<p>How do I get a join?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1606, "user_id": 1182299, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e1eeb5ef93430176a06ca211aa7fca8?s=128&d=identicon&r=PG", "display_name": "bsteo", "link": "https://stackoverflow.com/users/1182299/bsteo"}, "edited": false, "score": 0, "creation_date": 1441786776, "post_id": 32474263, "comment_id": 52809694, "body": "What if I declare it as global? @res"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1606, "user_id": 1182299, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e1eeb5ef93430176a06ca211aa7fca8?s=128&d=identicon&r=PG", "display_name": "bsteo", "link": "https://stackoverflow.com/users/1182299/bsteo"}, "edited": false, "score": 1, "creation_date": 1441786831, "post_id": 32474263, "comment_id": 52809724, "body": "@bsteo: <code>@res</code> is not a global, it&#39;s an instance variable. But in the context of plain script, it doesn&#39;t make much difference"}, {"owner": {"reputation": 1606, "user_id": 1182299, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e1eeb5ef93430176a06ca211aa7fca8?s=128&d=identicon&r=PG", "display_name": "bsteo", "link": "https://stackoverflow.com/users/1182299/bsteo"}, "edited": false, "score": 0, "creation_date": 1441786898, "post_id": 32474263, "comment_id": 52809764, "body": "Just checked, <code>res = nil</code> or <code>@res</code> make my code work :)"}], "tags": [], "owner": {"reputation": 2359, "user_id": 405454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IDzwW.png?s=128&g=1", "display_name": "mhutter", "link": "https://stackoverflow.com/users/405454/mhutter"}, "is_accepted": true, "score": 2, "last_activity_date": 1441786345, "last_edit_date": 1441786345, "creation_date": 1441786185, "answer_id": 32474263, "question_id": 32474126, "link": "https://stackoverflow.com/questions/32474126/undefined-local-variable-or-method-res-for-mainobject-nameerror/32474263#32474263", "title": "undefined local variable or method `res&#39; for main:Object (NameError)", "body": "<p>This is about <strong>scope</strong>. In Ruby, variables are only visible within the same scope where they are defined (exceptions are instance-, class-, and global variables as well as constants).</p>\n\n<p>So in your example, <code>res</code> is only visible within the <code>timeout</code>-block. Add <code>res = nil</code> before the <code>begin</code>-block to make sure <code>res</code> is defined in the scope you actually need the value.</p>\n"}], "owner": {"reputation": 1606, "user_id": 1182299, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e1eeb5ef93430176a06ca211aa7fca8?s=128&d=identicon&r=PG", "display_name": "bsteo", "link": "https://stackoverflow.com/users/1182299/bsteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1140, "favorite_count": 0, "accepted_answer_id": 32474263, "answer_count": 1, "score": 1, "last_activity_date": 1441786473, "creation_date": 1441785771, "last_edit_date": 1441786473, "question_id": 32474126, "link": "https://stackoverflow.com/questions/32474126/undefined-local-variable-or-method-res-for-mainobject-nameerror", "title": "undefined local variable or method `res&#39; for main:Object (NameError)", "body": "<p>I have the following little script that connects to a host, and gets some output.</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'net/http'\nrequire 'net/https'\nrequire 'timeout'\n\nserverurl = \"http://www.google.com/\"\n\nuri = URI(serverurl)\n\nres = Net::HTTP.post_form(uri, 'method' =&gt; 'login', 'username' =&gt; 'admin', 'password' =&gt; 'MySup3rDup3rp@55w0rd')\n\ncookie = res['set-cookie']\nif cookie.nil?\n  puts \"No cookie\"\nend\n</code></pre>\n\n<p>I want to use some timeout so I do:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'net/http'\nrequire 'net/https'\nrequire 'timeout'\n\nserverurl = \"http://www.google.com/\"\n\nuri = URI(serverurl)\n\nbegin\n  timeout(10) do\n    res = Net::HTTP.post_form(uri, 'method' =&gt; 'login', 'username' =&gt; 'admin', 'password' =&gt; 'MySup3rDup3rp@55w0rd')\n  end\nrescue StandardError,Timeout::Error\n  puts \"#{server} Timeout\"\n  exit(1)\nend\n\ncookie = res['set-cookie']\nif cookie.nil?\n  puts \"No cookie\"\nend\n</code></pre>\n\n<p>Now I get some error:</p>\n\n<pre><code>test.rb:20:in `&lt;main&gt;': undefined local variable or method `res' for main:Object (NameError)\n</code></pre>\n\n<p>I don't know why, because a similar test code works without error:</p>\n\n<pre><code>require \"timeout\"\n\nbegin\n  timeout(6) do\n    sleep\n  end\n#rescue # under ruby &gt;= 1.9 is ok\nrescue StandardError,Timeout::Error # workaround for ruby &lt; 1.9\n  p \"I'm sorry, Sir. We couldn't make it, Sir.\"\nend\n</code></pre>\n\n<p>Any idea what am I doing wrong?</p>\n"}, {"tags": ["ruby", "guard-clause"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1441784504, "post_id": 32473525, "comment_id": 52808317, "body": "&quot;<i>running Rubocop against this code</i>&quot; - is it really <i>this</i> code? I don&#39;t get that message."}], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1441785232, "post_id": 32473819, "comment_id": 52808757, "body": "Thanks, I was getting confused as to why I would bail out of the method if the first condition was not met, I will leave it as it is, I guess I will have to turn off <code>Style&#47;GuardClause</code> once i have checked them all"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1441785471, "post_id": 32473819, "comment_id": 52808895, "body": "<i>&quot;There&#39;s nothing to guard against&quot;</i> - well, you could check that <code>ENV</code> has a <code>&#39;ENV&#39;</code> key and that <code>ENV[&#39;ENV&#39;]</code> has a valid value."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1441785620, "post_id": 32473819, "comment_id": 52808985, "body": "@Stefan: well, both of these are also covered by the conditions. No need to make a redundant check, I think."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1441786453, "post_id": 32473819, "comment_id": 52809504, "body": "@SergioTulentsev instead of a duplicate check, I would <i>move</i> the check  into the guard clause. See my answer (too much code for a comment)."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 8, "last_activity_date": 1441784864, "creation_date": 1441784864, "answer_id": 32473819, "question_id": 32473525, "link": "https://stackoverflow.com/questions/32473525/how-to-write-a-guard-clause-with-multiple-conditions-in-ruby/32473819#32473819", "title": "How to write a guard clause with multiple conditions in Ruby?", "body": "<p>Your snippet is not a valid example for \"guard clauses\". There's nothing to guard against. It's just selecting data. It'd look better as <code>case/when</code> but <code>if</code> chain is fine too.</p>\n\n<pre><code>def auth_creds\n  case ENV['ENV']\n  when 'test1', 'qa', 'demo', 'ci'\n    { key: 'key1', secret: 'secret1' }\n  when 'live'\n    { key: 'key2', secret: 'secret2' }\n  else\n    fail 'Unable to set key/secret'\n  end\nend\n</code></pre>\n\n<p>Guard clause (or as I call them, early returns) are used when the whole body of the method is wrapped in a conditional.</p>\n\n<pre><code>def process_project\n  if project\n    # do stuff\n  end\nend\n</code></pre>\n\n<p>The method won't do anything unless there's a <code>project</code>. So it makes for more readable code if we reduce the nesting here.</p>\n\n<pre><code>def process_project\n  return unless project\n\n  # do stuff with project\nend\n</code></pre>\n\n<p>Again, not every <code>if</code> in your code can/should be transformed to this form. Only where it's appropriate.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1441785393, "post_id": 32473951, "comment_id": 52808858, "body": "For double bonus points, extract the whole thing into ENV vars, so that credentials are not stored in the code. :)"}], "tags": [], "owner": {"reputation": 2359, "user_id": 405454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IDzwW.png?s=128&g=1", "display_name": "mhutter", "link": "https://stackoverflow.com/users/405454/mhutter"}, "is_accepted": false, "score": 2, "last_activity_date": 1441785786, "last_edit_date": 1441785786, "creation_date": 1441785295, "answer_id": 32473951, "question_id": 32473525, "link": "https://stackoverflow.com/questions/32473525/how-to-write-a-guard-clause-with-multiple-conditions-in-ruby/32473951#32473951", "title": "How to write a guard clause with multiple conditions in Ruby?", "body": "<p>Guard clauses generally go like this:</p>\n\n<pre><code>def do_something\n  return 'x' if some_condition?\n  # other code\nend\n</code></pre>\n\n<p>So your code could be rewritten as</p>\n\n<pre><code>def auth_creds\n  return { key: 'key1', secret: 'secret1' } if %w(test1 qa demo ci).include? ENV['ENV']\n  return { key: 'key2', secret: 'secret2' } if ENV['ENV'] == 'live'\n\n  fail 'Unable to set key/secret'\nend\n</code></pre>\n\n<p>However, this is quite ugly, and now rubocop will complain about lines that are too long. So let us reword the code to describe its intention:</p>\n\n<pre><code>def auth_creds\n  return { key: 'key1', secret: 'secret1' } if test_env?\n  return { key: 'key2', secret: 'secret2' } if live_env?\n\n  fail 'Unable to set key/secret'\nend\n\nprivate # omit if `auth_creds` is also private\n\ndef test_env?\n  %w(test1 qa demo ci).include? ENV['ENV']\nend\n\ndef live_env?\n  ENV['ENV'] == 'live'\nend\n</code></pre>\n\n<p><strong>Bonus Points:</strong> Extract <code>%w(test1 qa demo ci)</code> into a constant!</p>\n\n<p><strong>Double Bonus Points:</strong> (thanks @Sergio Tulentsev) Get your environment-specific (and probably sensitive!!!) credentials out of your code! If using Rails, put it in a <code>secrets.yml</code>, else use one of the many great gems for this:</p>\n\n<ul>\n<li><a href=\"https://rubygems.org/gems/dotenv\" rel=\"nofollow\">dotenv</a></li>\n<li><a href=\"https://rubygems.org/gems/figaro\" rel=\"nofollow\">figaro</a></li>\n<li>...</li>\n</ul>\n\n<hr>\n\n<p><strong>A word about Rubocop:</strong> Take its advice with a grain of Salt. For example, your code is not really a case for a guard clause, it's just returning data based on conditions. So instead you could also try refactoring the code as a <a href=\"http://ruby-doc.com/docs/ProgrammingRuby/html/tut_expressions.html#S5\" rel=\"nofollow\">case expression</a>.</p>\n\n<p>And sometime, Rubocop just talks trash :-) (not on purpose, but \"measuring\" code style is hard!)</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1441787201, "post_id": 32474308, "comment_id": 52809956, "body": "Not sure I&#39;d write something like this in my code. I think I&#39;d choose either a <code>case&#47;when</code> (obvious which env corresponds to which creds, no mental compilation needed) or grab the creds directly from ENV, without branching (12-factor app best practice)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1441787607, "post_id": 32474308, "comment_id": 52810199, "body": "@SergioTulentsev it&#39;s just an example and the OP&#39;s actual code probably looks different. But of course, storing the credentials in <code>ENV</code> is much better, I&#39;ve updated my answer."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1441787512, "last_edit_date": 1495541335, "creation_date": 1441786341, "answer_id": 32474308, "question_id": 32473525, "link": "https://stackoverflow.com/questions/32473525/how-to-write-a-guard-clause-with-multiple-conditions-in-ruby/32474308#32474308", "title": "How to write a guard clause with multiple conditions in Ruby?", "body": "<p>It all depends on your actual code, but with the given snippet, you could use a guard clause to ensure a valid <code>ENV['ENV']</code> value:</p>\n\n<pre><code>VALID_ENVS = %w(test1 qa demo ci live)\n\ndef auth_creds\n  fail 'invalid environment' unless VALID_ENVS.include? ENV['ENV']\n\n  if ENV['ENV'] == 'live'\n    { key: 'key2', secret: 'secret2' }\n  else\n    { key: 'key1', secret: 'secret1' }\n  end\nend\n</code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/questions/32473525/how-to-write-a-guard-clause-with-multiple-conditions-in-ruby#comment52809956_32474308\">noted by Sergio Tulentsev</a>, storing your credentials in <code>ENV</code> (instead of the env's name) would probably be better:</p>\n\n<pre><code>def auth_creds\n  { key: ENV.fetch('KEY'), secret: ENV.fetch('SECRET') }\nend\n</code></pre>\n\n<p><code>fetch</code> will raise a <code>KeyError</code> if the given key is not found in <code>ENV</code>.</p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3084, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1441787512, "creation_date": 1441784076, "last_edit_date": 1441784809, "question_id": 32473525, "link": "https://stackoverflow.com/questions/32473525/how-to-write-a-guard-clause-with-multiple-conditions-in-ruby", "title": "How to write a guard clause with multiple conditions in Ruby?", "body": "<p>After running Rubocop against this code I am getting </p>\n\n<pre><code>Use a guard clause instead of wrapping the code inside a conditional expression.\n</code></pre>\n\n<p>So from what I have read a \"Guard Clause\" will bail out of the method if the condition is not met, so we don't have to waste time going through extra conditionals, please correct me if my understanding is not correct.</p>\n\n<p>My question is though how would i use a guard statement with multiple conditions</p>\n\n<pre><code>def auth_creds\n  if %w(test1 qa demo ci).include? ENV['ENV']\n    { key: 'key1', secret: 'secret1' }\n  elsif ENV['ENV'] == 'live'\n    { key: 'key2', secret: 'secret2' }\n  else\n    fail 'Unable to set key/secret'\n  end\nend\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "ubuntu"], "comments": [{"owner": {"reputation": 3779, "user_id": 1214341, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c2ab16e7bad14de2336741347b36c2cf?s=128&d=identicon&r=PG", "display_name": "vjdhama", "link": "https://stackoverflow.com/users/1214341/vjdhama"}, "edited": false, "score": 0, "creation_date": 1441781342, "post_id": 32472437, "comment_id": 52806498, "body": "Did you try sudoing.  <code>sudo gem install rails --version=4.2.0</code>"}, {"owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "reply_to_user": {"reputation": 3779, "user_id": 1214341, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c2ab16e7bad14de2336741347b36c2cf?s=128&d=identicon&r=PG", "display_name": "vjdhama", "link": "https://stackoverflow.com/users/1214341/vjdhama"}, "edited": false, "score": 0, "creation_date": 1441781567, "post_id": 32472437, "comment_id": 52806620, "body": "@vjdhama:yes i did that the above error has gone bot one new error after some installation <code>Errror: Error installing rails Error: failed to build gem native extension</code>."}, {"owner": {"reputation": 3779, "user_id": 1214341, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c2ab16e7bad14de2336741347b36c2cf?s=128&d=identicon&r=PG", "display_name": "vjdhama", "link": "https://stackoverflow.com/users/1214341/vjdhama"}, "edited": false, "score": 0, "creation_date": 1441875055, "post_id": 32472437, "comment_id": 52854225, "body": "Did you get the answer? Accept the answer if you did."}], "answers": [{"tags": [], "owner": {"reputation": 3779, "user_id": 1214341, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c2ab16e7bad14de2336741347b36c2cf?s=128&d=identicon&r=PG", "display_name": "vjdhama", "link": "https://stackoverflow.com/users/1214341/vjdhama"}, "is_accepted": true, "score": 2, "last_activity_date": 1441781855, "creation_date": 1441781855, "answer_id": 32472812, "question_id": 32472437, "link": "https://stackoverflow.com/questions/32472437/getting-errorno-eacces-error-while-installing-rails-on-ubuntu/32472812#32472812", "title": "Getting Errorno-EACCES error while installing Rails on ubuntu", "body": "<p>The issue might be because the <code>gem</code> executable is not installed in user directory.</p>\n\n<p>You can confirm this using <code>which gem</code>.</p>\n\n<p>Run this command for installing rails. </p>\n\n<pre><code>sudo gem install rails --version=4.2.0\n</code></pre>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>The error : <code>Errror: Error installing rails Error: failed to build gem native extension</code> might be because of lack of dev-headers.</p>\n\n<p>Try running this : </p>\n\n<pre><code>sudo apt-get install ruby2.1-dev\n</code></pre>\n\n<p>These errors are the reasons you should probably try using <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow\">rbenv</a> or <a href=\"https://rvm.io/\" rel=\"nofollow\">rvm</a> to install ruby and rails.</p>\n"}], "owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 32472812, "answer_count": 1, "score": 0, "last_activity_date": 1441781855, "creation_date": 1441780464, "question_id": 32472437, "link": "https://stackoverflow.com/questions/32472437/getting-errorno-eacces-error-while-installing-rails-on-ubuntu", "title": "Getting Errorno-EACCES error while installing Rails on ubuntu", "body": "<p>I successfully installed ruby on my Ubuntu server by using the following command.</p>\n\n<pre><code>1-sudo apt-get install python-software-properties\n2-sudo apt-add-repository ppa:brightbox/ruby-ng\n3-sudo apt-get update\n4-sudo apt-get install ruby2.1\n</code></pre>\n\n<p>But when i tried to install Rails version 4.2.0 using the below command.</p>\n\n<pre><code>gem install rails --version=4.2.0\n</code></pre>\n\n<p>i got the following error.</p>\n\n<blockquote>\n  <p>Error:</p>\n</blockquote>\n\n<pre><code>Error:While executing gem (Errorno-EACCES)\npermission denied @ dir_s_mkdir - /var/lib/gems\n</code></pre>\n\n<p>Please help me to resolve this error and install rails successfully.I also have another doubt here.After installing ruby when i chcked the version it is showing me the ruby version 2.1.7 but here i need ruby version 2.1.5.Please also help me do this.I am using Ubuntu 14.0 version.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1441785210, "post_id": 32472833, "comment_id": 52808747, "body": "I have a few points to add to Stefan&#39;s excellent answer. 1. The <code>if no_caps.include?(word); word; ...</code> part of the <code>if</code> statement has no effect.  When <code>word</code> is <code>&quot;and&quot;</code>, for example, <code>no_caps.include?(&quot;and&quot;)</code> is <code>true</code>, so <code>&quot;and&quot;</code> is returned, but it is not captured by a variable, so it may as well have been shot into outer space. 2. Since <code>sentence_array.first.capitalize!</code> is before <code>end</code>, it is executed once for each element of <code>sentence_array</code>. Better to write: <code>sentence_array.each { |word| word.capitalize! unless no_caps.include?(word) }; sentence_array.first.capitalize!</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441786144, "post_id": 32472833, "comment_id": 52809310, "body": "3. You could use a regular expression instead of <code>word[2] = word[2].upcase if word.start_with?(&#39;Mc&#39;)</code>: <code>&quot;Mcduff&quot;.sub!(&#47;\\AMc\\K.&#47;) { |c| c.upcase } #=&gt; &quot;McDuff&quot;</code>, where <code>\\K</code> means to disregard everything previously matched by the regex."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441786745, "post_id": 32472833, "comment_id": 52809678, "body": "@CarySwoveland you can probably rewrite the entire method using a single <code>gsub</code> call ;-)"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1441792433, "last_edit_date": 1441792433, "creation_date": 1441781926, "answer_id": 32472833, "question_id": 32471624, "link": "https://stackoverflow.com/questions/32471624/ruby-creating-title-case-method-cant-handle-words-like-mcduff-or-mccomb/32472833#32472833", "title": "Ruby creating title case method, can&#39;t handle words like McDuff or McComb", "body": "<p>There are several issues with your \"Mc\" code:</p>\n\n<pre><code>if (word.include?(\"mc\"))\n</code></pre>\n\n<p>This will always return <code>false</code>, because you have already capitalized <code>word</code>. It has to be:</p>\n\n<pre><code>if word.include?('Mc')\n</code></pre>\n\n<p>This line doesn't work either:</p>\n\n<pre><code>letter_array = word.split!(\"\")\n</code></pre>\n\n<p>because there is no <code>split!</code> method, just <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-split\" rel=\"nofollow\"><code>split</code></a>. There is however no reason to use a character array at all. <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-5B-5D\" rel=\"nofollow\"><code>String#[]</code></a> allows you to access a string's characters (or sub-strings), so the next line becomes:</p>\n\n<pre><code>if (word[0] == 'M') &amp;&amp; (word[1] == 'c')\n</code></pre>\n\n<p>or just:</p>\n\n<pre><code>if word[0, 2] == 'Mc'\n</code></pre>\n\n<p>or even better using <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-start_with-3F\" rel=\"nofollow\"><code>start_with?</code></a>:</p>\n\n<pre><code>if word.start_with?('Mc')\n</code></pre>\n\n<p>In fact, we can replace the first <code>if</code> with this one.</p>\n\n<p>The next line is a bit tricky:</p>\n\n<pre><code>letter_array[2].capitalize!\n</code></pre>\n\n<p>Using <code>String#[]</code> this becomes:</p>\n\n<pre><code>word[2].capitalize!\n</code></pre>\n\n<p>But unfortunately, both don't work as expected. This is because <code>[]</code> returns a new object, so the bang method doesn't change the original object. Instead you have to call the element assignment method <a href=\"http://ruby-doc.org/core-2.2.3/String.html#method-i-5B-5D-3D\" rel=\"nofollow\"><code>[]=</code></a>:</p>\n\n<pre><code>word[2] = word[2].upcase\n</code></pre>\n\n<p>Everything put together:</p>\n\n<pre><code>if word.start_with?('Mc')\n  word[2] = word[2].upcase\nend\n</code></pre>\n\n<p>Or in a single line:</p>\n\n<pre><code>word[2] = word[2].upcase if word.start_with?('Mc')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 684, "user_id": 3810696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wikpc.png?s=128&g=1", "display_name": "Padawan", "link": "https://stackoverflow.com/users/3810696/padawan"}, "edited": false, "score": 0, "creation_date": 1441785486, "post_id": 32473185, "comment_id": 52808905, "body": "No idea what monkey patch is. No idea what a helper function is. Not experienced with regex, /\\b, etc. Would expect that people with more experience would know I&#39;m a beginner by looking at code. As I stated in the initial paragraph, &quot;is there a way to simplify this, using the tools at hand and not some higher level shortcut?&quot; That is bad reading."}, {"owner": {"reputation": 684, "user_id": 3810696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wikpc.png?s=128&g=1", "display_name": "Padawan", "link": "https://stackoverflow.com/users/3810696/padawan"}, "edited": false, "score": 0, "creation_date": 1441809995, "post_id": 32473185, "comment_id": 52826266, "body": "That was some excellent explaining Shein. Thanks.  I&#39;ve seen the reference of regex and the /\\b/ /\\d/ things before, but could never figure them out. I&#39;ll study each item you listed today and will take your advice. Thanks again!"}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": false, "score": 1, "last_activity_date": 1441792429, "last_edit_date": 1495542121, "creation_date": 1441783045, "answer_id": 32473185, "question_id": 32471624, "link": "https://stackoverflow.com/questions/32471624/ruby-creating-title-case-method-cant-handle-words-like-mcduff-or-mccomb/32473185#32473185", "title": "Ruby creating title case method, can&#39;t handle words like McDuff or McComb", "body": "<p>First of all, please, don't monkey patch. This is bad design, just make a helper function that takes an argument you need (string in your case).</p>\n\n<pre><code>def title_case(string)\n    no_caps = %w(a an the at by and as but or for in nor on at up to on of from by)\n    no_caps_regex = /\\b(#{no_caps.join('|')})\\b/i # match separate words from above, case-insensitive\n\n    # you will need ActiveSupport (or Rails) for +String#titleize+ support\n    titleized = string.titleize\n    handle_special = titleized.gsub(/\\b(mc)(.+?)\\b/i) do |match| \n        [$1, $2].map(&amp;:capitalize).join \n    end\n\n    no_capsed = handle_special.gsub(no_caps_regex) { |match| match.downcase }\nend\n\ntitle_case('mcdonalds is fast food, but mrmcduff is not')\n# =&gt; \"McDonalds Is Fast Food, but Mrmcduff Is Not\"\n</code></pre>\n\n<p><strong>UPDATE</strong>: I am sorry about that, it was really bad reading, but I still want to elaborate on the confused terms you noted:</p>\n\n<ol>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Monkey_patch\" rel=\"nofollow noreferrer\">Monkey patching</a> is a technique, available for some dynamic languages (Ruby or Javascript, for example) where you can change (add or remove methods/properties) to already existing classes, such as <code>String</code>, <code>Fixnum</code>, <code>DateTime</code> and others. Often this technique is used for \"enhancing\" core types (exactly like you did in your code, adding method <code>title_case</code> to <code>String</code>).\nThe problem here is that if any other library developer chooses the same name and adds it to <code>String</code> class, and you eventually want to try his library in your project,  your implementations will clash together and which one is added later wins (depending on the code loading time, usually yours). This will either brake your code or brake the library which is no good also. </p>\n\n<p>Another similar problem, is when you try to \"fix\" some bug in third party library this way. You monkey patch it, everything works and you forget about it. Then 6 months later you decide to upgrade the library to a new version and suddenly everything blows up, because library code clashed with your changes and you may even not to remember about your monkey patch (or it may even be another developer, that doesn't even know about your monkey patch existence).</p></li>\n<li><p>Helper function - is just some function that you can add a) <a href=\"https://stackoverflow.com/a/3797084/273444\">to a separate file</a>, called helper b) or just to the current controller/model (the place you need it).</p></li>\n<li><p><code>\\b</code> is a mark in regex that tells regex engine to treat the following text as a separate word, i.e. <code>/as/</code> regex can match for word <code>as</code> and also for word <code>fast</code> since it contains <code>as</code>. If you instead use <code>/\\bas\\b/</code>, only <code>as</code> will be matched. </p>\n\n<p>Regexes are very powerful, please, find some time to learn them, you'll boost your text processing skills to a next level. Combined with some console tools knowledge (I mean commands in UNIX terminals, such as <code>ls</code>, <code>ps</code>, <code>find</code>, <code>grep</code> and etc.), they can be very powerful in day-to-day routines such as \"whether yesterday logs contain some ip?\", \"what is the process name that eats all memory on my machine right now?\" or \"what are all files in my project that contain this function call?\". </p>\n\n<p>The classic book on this subject is <a href=\"https://rads.stackoverflow.com/amzn/click/com/0596528124\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">J. Friedl's \"Mastering regular expressions\"</a>, highly recommended.</p></li>\n</ol>\n\n<p>Have a nice day.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1441871429, "creation_date": 1441871429, "answer_id": 32496112, "question_id": 32471624, "link": "https://stackoverflow.com/questions/32471624/ruby-creating-title-case-method-cant-handle-words-like-mcduff-or-mccomb/32496112#32496112", "title": "Ruby creating title case method, can&#39;t handle words like McDuff or McComb", "body": "<p>@Stefan, you were right!</p>\n\n<pre><code>str = \"Lay on, Macduff, and damn'd be him that first cries, 'Hold, enough!'\" \n\nno_caps = [\"a\", \"an\", \"the\", \"at\", \"by\", \"and\", \"as\", \"but\", \"or\",\n           \"for\", \"in\", \"nor\", \"on\", \"at\", \"up\", \"to\", \"on\", \"of\",\n           \"from\", \"by\", \"that\", \"lay\"]\n\nstr.gsub(/\\w+/) do |s|\n  (no_caps.include?(s.downcase) &amp;&amp; $~.begin(0) &gt; 0) ? s.downcase! : s.capitalize!\n  case s\n  when /^Mc./  then s[2] = s[2].upcase\n  when /^Mac./ then s[3] = s[3].upcase\n  end\n  s\nend\n  # =&gt; \"Lay on, MacDuff, and Damn'D Be Him that First Cries, 'Hold, Enough!'\" \n</code></pre>\n"}], "owner": {"reputation": 684, "user_id": 3810696, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wikpc.png?s=128&g=1", "display_name": "Padawan", "link": "https://stackoverflow.com/users/3810696/padawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 32472833, "answer_count": 3, "score": 0, "last_activity_date": 1441871429, "creation_date": 1441777019, "question_id": 32471624, "link": "https://stackoverflow.com/questions/32471624/ruby-creating-title-case-method-cant-handle-words-like-mcduff-or-mccomb", "title": "Ruby creating title case method, can&#39;t handle words like McDuff or McComb", "body": "<p>The method is supposed to take in a name of a book and return it in proper title case. All of my specs pass ( )handles non-letter characters, handles upper and mixed cases) except the last one which is to return special words like McDuff or McComb with a capital 3rd letter. Anyone see what I'm doing wrong? And, is there a way to simplify this, using the tools at hand and not some higher level shortcut?</p>\n\n<pre><code>class String\n  define_method(:title_case) do\n    sentence_array = self.downcase.split\n    no_caps = [\"a\", \"an\", \"the\", \"at\", \"by\", \"and\", \"as\", \"but\", \"or\", \"for\", \"in\", \"nor\", \"on\", \"at\", \"up\", \"to\", \"on\", \"of\", \"from\", \"by\"]\n\n    sentence_array.each do |word|\n      if no_caps.include?(word)\n        word\n      else\n        word.capitalize!\n      end\n      sentence_array.first.capitalize!\n\n      #  Manage special words\n      if (word.include?(\"mc\"))\n        letter_array = word.split!(\"\")    # word with mc changed to an array of letters\n          if (letter_array[0] == \"m\") &amp;&amp; (letter_array[1] == \"c\")  # 1st &amp; 2nd letters\n            letter_array[2].capitalize!\n            word = letter_array.join\n          end\n      end  \n    end\n    sentence_array.join(\" \")\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "params"], "comments": [{"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1441776682, "post_id": 32471487, "comment_id": 52804538, "body": "hi Dennis, where is your controller permit parameters action?"}, {"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 1, "creation_date": 1441777040, "post_id": 32471487, "comment_id": 52804682, "body": "Actually that should be inside <code>beer</code>. See what you have written on controller is <code>params.require(:beer)</code> which means the params hash has a key named <code>beer</code> and the attributes to permit are inside it. In your <code>JSON</code> request you have this: <code>&quot;beer&quot;=&gt;{&quot;id&quot;=&gt;213, &quot;name&quot;=&gt;&quot;Amber&quot;, &quot;brewery_id&quot;=&gt;16}</code> from which <code>id</code> is not permitted so it is showing <code>Unpermitted parameters: id</code>. Of the rest it don&#39;t cares whatever you are sending. Because rails will use the attributes inside <code>beer</code> to create/update it."}, {"owner": {"reputation": 1557, "user_id": 2465047, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c0686e739dda05a23d20129df1e8c645?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/2465047/dennis"}, "reply_to_user": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1441777562, "post_id": 32471487, "comment_id": 52804882, "body": "So why isn&#39;t style_ids inside of the beer hash when using JSON?  Rails considers the other arguments inside that hash, but not style_ids.   @huanson, I&#39;m not sure I follow...  the entire permit parameters is inside a function:   <code>def beer_params   params.require(:beer).permit(:name, :brewery_id, :style_ids =&gt; []) end</code>  I call this from my update and create functions."}], "answers": [{"tags": [], "owner": {"reputation": 1557, "user_id": 2465047, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c0686e739dda05a23d20129df1e8c645?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/2465047/dennis"}, "is_accepted": true, "score": 2, "last_activity_date": 1442184416, "creation_date": 1442184416, "answer_id": 32555272, "question_id": 32471487, "link": "https://stackoverflow.com/questions/32471487/how-to-post-put-array-param-in-rails/32555272#32555272", "title": "How to POST/PUT array param in Rails", "body": "<p>I finally figured out this out.  Rails is using <code>wrap_parameters</code> so I can use <code>{\u201cname\": \u201cname\u201d}</code> instead of <code>{\u201cbeer:{\u201cname\u201d : \u201cname\u201d}}</code>.  by default Rails wraps anything from your model\u2019s <code>attribute_names</code>.</p>\n\n<p>My problem was <code>style_ids</code> is an external join table (<code>has_and_belongs_to_many</code>), so that\u2019s not in the <code>attribute_names</code>.  I fixed this by adding this to the top of my controller:  <code>wrap_parameters :beer, include: [:style_ids, :name, :brewery_id]</code></p>\n\n<p>The link that finally got me through this: <a href=\"http://api.rubyonrails.org/classes/ActionController/ParamsWrapper.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActionController/ParamsWrapper.html</a></p>\n"}], "owner": {"reputation": 1557, "user_id": 2465047, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c0686e739dda05a23d20129df1e8c645?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/2465047/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1611, "favorite_count": 1, "accepted_answer_id": 32555272, "answer_count": 1, "score": 4, "last_activity_date": 1442184416, "creation_date": 1441776223, "last_edit_date": 1441776787, "question_id": 32471487, "link": "https://stackoverflow.com/questions/32471487/how-to-post-put-array-param-in-rails", "title": "How to POST/PUT array param in Rails", "body": "<p>My controller methods work great for my ERB forms, but aren't accepting arrays as JSON parameters.  I have an array of ids called \"style_ids\" that gets stripped out from JSON.</p>\n\n<p>Permitted parameters:</p>\n\n<pre><code>params.require(:beer).permit(:name, :brewery_id, :style_ids =&gt; [])\n</code></pre>\n\n<p>When posted from <strong><em>ERB</em></strong>, it looks like this:</p>\n\n<pre><code>all params: {\"utf8\"=&gt;\"\u2713\", \"_method\"=&gt;\"patch\", \"authenticity_token\"=&gt;\u201d\u2026\u201d, \"beer\"=&gt;{\"name\"=&gt;\"Amber\", \"style_ids\"=&gt;[\"\", \"1\"], \"brewery_id\"=&gt;\"16\"}, \"commit\"=&gt;\"Submit\", \"action\"=&gt;\"update\", \"controller\"=&gt;\"beers\", \"id\"=&gt;\"213\"}\npermitted params: {\"name\"=&gt;\"Amber\", \"brewery_id\"=&gt;\"16\", \"style_ids\"=&gt;[\"\", \"1\"]}\n</code></pre>\n\n<p>When I submit via <strong><em>JSON</em></strong> though, it looks like this:</p>\n\n<pre><code>params: {\"id\"=&gt;\"213\", \"name\"=&gt;\"Amber\", \"style_ids\"=&gt;[\"1\", \"22\"], \"brewery_id\"=&gt;16, \"action\"=&gt;\"update\", \"controller\"=&gt;\"beers\", \"beer\"=&gt;{\"id\"=&gt;213, \"name\"=&gt;\"Amber\", \"brewery_id\"=&gt;16}}\nUnpermitted parameters: id\npermitted params: {\"name\"=&gt;\"Amber\", \"brewery_id\"=&gt;16}\n</code></pre>\n\n<p>I'm guessing this has something to do with Rails showing style_ids inside the beer hash in my regular request.  What am I doing wrong that's keeping this from showing up in my JSON request?  The JSON is really simple: <code>{\"id\":213,\"name\":\"Amber\",\"style_ids\":[\"1\",\"22\"],\"brewery_id\":16}</code></p>\n\n<p>I've already read a lot of documentation about this and feel like I'm doing it the right way...hopefully I'm just missing something.  Thanks!</p>\n"}, {"tags": ["ruby", "macos", "cocoa"], "answers": [{"tags": [], "owner": {"reputation": 645, "user_id": 4089924, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yUuQ3NtsyHg/AAAAAAAAAAI/AAAAAAAAANs/tIssfYO-Lzk/photo.jpg?sz=128", "display_name": "jishnu bala", "link": "https://stackoverflow.com/users/4089924/jishnu-bala"}, "is_accepted": true, "score": 3, "last_activity_date": 1441774961, "last_edit_date": 1441774961, "creation_date": 1441774609, "answer_id": 32471190, "question_id": 32471161, "link": "https://stackoverflow.com/questions/32471161/can-not-install-cocoa-pods-in-osx-10-10-5/32471190#32471190", "title": "Can not install cocoa pods in OSX 10.10.5", "body": "<p>I have also faced same issue some days ago. <strong>What I did was \"just remove the file referenced in \"some path for a file\"\"</strong>, and retry installing cocoa pods.</p>\n\n<p>Just try this:</p>\n\n<p>On command line type these</p>\n\n<pre><code>  sudo rm \"&lt;some path for a file&gt;\"\n\n  sudo gem install cocoapods .\n</code></pre>\n\n<p>Now you can install cocoa pod.</p>\n"}], "owner": {"reputation": 3872, "user_id": 3257178, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/On9VS.jpg?s=128&g=1", "display_name": "Arun Antoney", "link": "https://stackoverflow.com/users/3257178/arun-antoney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 32471190, "answer_count": 1, "score": 2, "last_activity_date": 1441774961, "creation_date": 1441774446, "question_id": 32471161, "link": "https://stackoverflow.com/questions/32471161/can-not-install-cocoa-pods-in-osx-10-10-5", "title": "Can not install cocoa pods in OSX 10.10.5", "body": "<p>I got this error while trying the command \"<strong>sudo gem install cocoapods</strong>\" on OSX 10.10.5  <strong>\"invalid gem: package is corrupt, exception while verifying: undefined method `size' for nil:NilClass (NoMethodError)</strong>: (some path for a file)\".\n I am trapped in this for some days.Can not proceed because my new project needs cocoa pods.Please help? </p>\n"}, {"tags": ["jquery", "html", "ruby", "yaml"], "comments": [{"owner": {"reputation": 2766, "user_id": 5252192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AGrTH.png?s=128&g=1", "display_name": "AmirHossein", "link": "https://stackoverflow.com/users/5252192/amirhossein"}, "edited": false, "score": 0, "creation_date": 1441774697, "post_id": 32471160, "comment_id": 52803934, "body": "if it is javascript replace <code>\\\\n</code> with <code>\\r\\n</code>. like this: <code>TextareaElement.value = TextareaElement.value.replace(&quot;\\\\n&quot;, &quot;\\r\\n&quot;);</code> . I dont know ruby"}, {"owner": {"reputation": 2948, "user_id": 1468484, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e46b0c1339896be47178b31a6b09f06d?s=128&d=identicon&r=PG", "display_name": "sajanyamaha", "link": "https://stackoverflow.com/users/1468484/sajanyamaha"}, "edited": false, "score": 0, "creation_date": 1441774728, "post_id": 32471160, "comment_id": 52803944, "body": "what have you tried,which language are you using to render it to text area?"}, {"owner": {"reputation": 2766, "user_id": 5252192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AGrTH.png?s=128&g=1", "display_name": "AmirHossein", "link": "https://stackoverflow.com/users/5252192/amirhossein"}, "reply_to_user": {"reputation": 625, "user_id": 3621216, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/44BjL.jpg?s=128&g=1", "display_name": "Suresh", "link": "https://stackoverflow.com/users/3621216/suresh"}, "edited": false, "score": 1, "creation_date": 1441774735, "post_id": 32471160, "comment_id": 52803948, "body": "@suresh I dont think <code>&lt;br&gt;</code> would work within a textarea . would it?"}, {"owner": {"reputation": 625, "user_id": 3621216, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/44BjL.jpg?s=128&g=1", "display_name": "Suresh", "link": "https://stackoverflow.com/users/3621216/suresh"}, "reply_to_user": {"reputation": 2766, "user_id": 5252192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AGrTH.png?s=128&g=1", "display_name": "AmirHossein", "link": "https://stackoverflow.com/users/5252192/amirhossein"}, "edited": false, "score": 0, "creation_date": 1441774934, "post_id": 32471160, "comment_id": 52804006, "body": "@TechJS Sorry.. Yeah it dont work ..i need some thing like this &amp;#10; ."}, {"owner": {"reputation": 625, "user_id": 3621216, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/44BjL.jpg?s=128&g=1", "display_name": "Suresh", "link": "https://stackoverflow.com/users/3621216/suresh"}, "edited": false, "score": 0, "creation_date": 1441775066, "post_id": 32471160, "comment_id": 52804043, "body": "In jquery before painting data, Store the data into one variable and use variable.replace(&quot;\\n&quot;,&quot;&quot;);"}], "answers": [{"tags": [], "owner": {"reputation": 2948, "user_id": 1468484, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e46b0c1339896be47178b31a6b09f06d?s=128&d=identicon&r=PG", "display_name": "sajanyamaha", "link": "https://stackoverflow.com/users/1468484/sajanyamaha"}, "is_accepted": false, "score": 0, "last_activity_date": 1441781574, "creation_date": 1441781574, "answer_id": 32472733, "question_id": 32471160, "link": "https://stackoverflow.com/questions/32471160/displaying-stored-data-in-textarea/32472733#32472733", "title": "displaying stored data in textarea", "body": "<p>use jquery <code>.text()</code> , <a href=\"https://jsfiddle.net/en6f2mq8/\" rel=\"nofollow\">Working demo here</a>,'toTest' is the id of your text area.</p>\n\n<pre><code>$(\"#toTest\").val($(\"&lt;div/&gt;\").html(\"hello this is sireesha \\n 1.some information \\n2.some information\").text());\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 4746029, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-7hVedFnh0X4/AAAAAAAAAAI/AAAAAAAAAD4/9Ltz5XRagwc/photo.jpg?sz=128", "display_name": "sireesha", "link": "https://stackoverflow.com/users/4746029/sireesha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442384211, "creation_date": 1441774439, "last_edit_date": 1441778190, "question_id": 32471160, "link": "https://stackoverflow.com/questions/32471160/displaying-stored-data-in-textarea", "title": "displaying stored data in textarea", "body": "<p>I am storing data in a YAML file which is received from a textarea (html page) on a particular date.</p>\n\n<p>In YAML it is storing in this format:</p>\n\n<p><code>09_09_2015: ! \"hello this is sireesha\\n   1.some information \\n2.some information\"</code></p>\n\n<p>When I get this data from YAML and display it in a textarea, it is displaying as:</p>\n\n<p><code>\"hello this is sireesha\\n   1.some information \\n2.some information\"</code></p>\n\n<p>How can I overcome this and display this text as </p>\n\n<pre><code>hello this is sireesha\n   1.some information\n   2.some information\n</code></pre>\n\n<p>in the textarea?</p>\n"}, {"tags": ["mysql", "ruby", "sinatra"], "comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1441805724, "post_id": 32470853, "comment_id": 52822890, "body": "Have you tried <code>gem update mysql2</code> to update the gem version. Then try rackup."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 3754040, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001425067964/picture?type=large", "display_name": "user3754040", "link": "https://stackoverflow.com/users/3754040/user3754040"}, "is_accepted": false, "score": 1, "last_activity_date": 1441813696, "creation_date": 1441813696, "answer_id": 32484056, "question_id": 32470853, "link": "https://stackoverflow.com/questions/32470853/gem-mysql2-gem-is-not-loaded/32484056#32484056", "title": "gem mysql2 gem is not loaded", "body": "<p>I found this worked.</p>\n\n<p>In Gemfile , specify like this.</p>\n\n<p>gem 'mysql2', '~> 0.3.20'</p>\n\n<p>actually mysql2 (0.3.20) is installed.</p>\n\n<p>Any bugs on latest mysql2 ?</p>\n"}], "owner": {"reputation": 49, "user_id": 3754040, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100001425067964/picture?type=large", "display_name": "user3754040", "link": "https://stackoverflow.com/users/3754040/user3754040"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1410, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441813696, "creation_date": 1441772430, "question_id": 32470853, "link": "https://stackoverflow.com/questions/32470853/gem-mysql2-gem-is-not-loaded", "title": "gem mysql2 gem is not loaded", "body": "<p>I am struggling with the trouble in Sinatra.I updated ruby to 2.0.0 and doing migration of my apps which runs on 1.8.3 perfectly.</p>\n\n<p>Bundle install is completed but when I run </p>\n\n<pre><code>bundle exec rackup\n</code></pre>\n\n<p>I had following error. I appreciate if you have any solutions.</p>\n\n<p>I am working on MacOS X 10.10.2 ,ruby2.0.0</p>\n\n<blockquote>\n  <p>bundle exec rackup\n  Faraday::Builder is now Faraday::RackBuilder.\n  /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/activerecord-4.1.13/lib/active_record/connection_adapters/connection_specification.rb:190:in <code>rescue in spec': Specified 'mysql2' for database adapter, but the gem is not loaded. Add</code>gem 'mysql2'<code>to your Gemfile (and ensure its version is at the minimum required by ActiveRecord). (Gem::LoadError)\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/activerecord-4.1.13/lib/active_record/connection_adapters/connection_specification.rb:187:in</code>spec'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/activerecord-4.1.13/lib/active_record/connection_handling.rb:50:in <code>establish_connection'\n      from /Users/user/Documents/fishingderby/config.ru:21:in</code>block in '\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in <code>instance_eval'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in</code>initialize'\n      from /Users/user/Documents/fishingderby/config.ru:in <code>new'\n      from /Users/user/Documents/fishingderby/config.ru:in</code>'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in <code>eval'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in</code>new_from_string'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:40:in <code>parse_file'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:299:in</code>build_app_and_options_from_config'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:208:in <code>app'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:336:in</code>wrapped_app'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:272:in <code>start'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:147:in</code>start'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/bin/rackup:4:in <code>&lt;top (required)&gt;'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/bin/rackup:23:in</code>load'\n      from /Users/user/Documents/fishingderby/vendor/bundle/ruby/2.0.0/bin/rackup:23:in `'</p>\n</blockquote>\n\n<p>GEMFILE.lock is like this</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    activemodel (4.1.13)\n      activesupport (= 4.1.13)\n      builder (~&gt; 3.1)\n    activerecord (4.1.13)\n      activemodel (= 4.1.13)\n      activesupport (= 4.1.13)\n      arel (~&gt; 5.0.0)\n    activesupport (4.1.13)\n      i18n (~&gt; 0.6, &gt;= 0.6.9)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      minitest (~&gt; 5.1)\n      thread_safe (~&gt; 0.1)\n      tzinfo (~&gt; 1.1)\n    arel (5.0.1.20140414130214)\n    aws_cf_signer (0.1.3)\n    backports (3.6.6)\n    builder (3.2.2)\n    cloudinary (1.1.0)\n      aws_cf_signer\n      rest-client\n    faraday (0.9.1)\n      multipart-post (&gt;= 1.2, &lt; 3)\n    hashie (3.4.2)\n    httparty (0.11.0)\n      multi_json (~&gt; 1.0)\n      multi_xml (&gt;= 0.5.2)\n    i18n (0.6.11)\n    json (1.8.3)\n    jwt (1.5.1)\n    mail (2.6.3)\n      mime-types (&gt;= 1.16, &lt; 3)\n    mime-types (1.25.1)\n    minitest (5.8.0)\n    multi_json (1.11.2)\n    multi_xml (0.5.5)\n    multipart-post (2.0.0)\n    mysql2 (0.4.0)\n    oauth (0.4.7)\n    oauth2 (1.0.0)\n      faraday (&gt;= 0.8, &lt; 0.10)\n      jwt (~&gt; 1.0)\n      multi_json (~&gt; 1.3)\n      multi_xml (~&gt; 0.5)\n      rack (~&gt; 1.2)\n    omniauth (1.2.2)\n      hashie (&gt;= 1.2, &lt; 4)\n      rack (~&gt; 1.0)\n    omniauth-facebook (2.0.1)\n      omniauth-oauth2 (~&gt; 1.2)\n    omniauth-google-oauth2 (0.2.6)\n      omniauth (&gt; 1.0)\n      omniauth-oauth2 (~&gt; 1.1)\n    omniauth-oauth (1.1.0)\n      oauth\n      omniauth (~&gt; 1.0)\n    omniauth-oauth2 (1.3.1)\n      oauth2 (~&gt; 1.0)\n      omniauth (~&gt; 1.2)\n    omniauth-twitter (1.2.1)\n      json (~&gt; 1.3)\n      omniauth-oauth (~&gt; 1.1)\n    r18n-core (2.0.4)\n    rack (1.6.4)\n    rack-protection (1.5.3)\n      rack\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rdoc (4.2.0)\n      json (~&gt; 1.4)\n    rest-client (1.6.8)\n      mime-types (~&gt; 1.16)\n      rdoc (&gt;= 2.4.2)\n    simple_oauth (0.3.1)\n    sinatra (1.4.6)\n      rack (~&gt; 1.4)\n      rack-protection (~&gt; 1.4)\n      tilt (&gt;= 1.3, &lt; 3)\n    sinatra-cache (0.3.7)\n      sinatra (&gt;= 1.1.0)\n      sinatra-outputbuffer (&gt;= 0.1.0)\n    sinatra-contrib (1.4.6)\n      backports (&gt;= 2.0)\n      multi_json\n      rack-protection\n      rack-test\n      sinatra (~&gt; 1.4.0)\n      tilt (&gt;= 1.3, &lt; 3)\n    sinatra-flash (0.3.0)\n      sinatra (&gt;= 1.0.0)\n    sinatra-outputbuffer (0.1.0)\n      sinatra (&gt;= 1.0.a)\n    sinatra-r18n (2.0.4)\n      r18n-core (= 2.0.4)\n      sinatra (&gt;= 1.3)\n    slim (3.0.6)\n      temple (~&gt; 0.7.3)\n      tilt (&gt;= 1.3.3, &lt; 2.1)\n    temple (0.7.6)\n    thread_safe (0.3.5)\n    tilt (2.0.1)\n    twitter (4.8.1)\n      faraday (~&gt; 0.8, &lt; 0.10)\n      multi_json (~&gt; 1.0)\n      simple_oauth (~&gt; 0.2)\n    tzinfo (1.2.2)\n      thread_safe (~&gt; 0.1)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  activerecord\n  cloudinary\n  httparty (= 0.11.0)\n  i18n (= 0.6.11)\n  json\n  mail\n  mime-types (= 1.25.1)\n  mysql2\n  omniauth-facebook\n  omniauth-google-oauth2\n  omniauth-twitter\n  rest-client (= 1.6.8)\n  sinatra\n  sinatra-cache\n  sinatra-contrib\n  sinatra-flash\n  sinatra-r18n\n  slim\n  twitter (= 4.8.1)\n\nBUNDLED WITH\n   1.10.6\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "arguments"], "comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 1, "creation_date": 1441768382, "post_id": 32470214, "comment_id": 52802368, "body": "where and how did you define <code>@text_post</code>?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1441773880, "post_id": 32470214, "comment_id": 52803700, "body": "On which view page you have <code>&lt;%= form_for @text_post do |f| %&gt;</code>?"}, {"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1441776928, "post_id": 32470214, "comment_id": 52804641, "body": "@image_post = ImagePost.new; raise @image_post; is it even nil?  pretty sure you mess up templates and routes."}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1441805933, "post_id": 32470214, "comment_id": 52823049, "body": "Are you getting this for new and edit or just edit? If the latter - it&#39;s because you haven&#39;t defined an edit method in your controller."}], "owner": {"reputation": 37, "user_id": 5080920, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f3686ae7393cdc0ab2027b19ed1c8db6?s=128&d=identicon&r=PG&f=1", "display_name": "L.J.", "link": "https://stackoverflow.com/users/5080920/l-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441773462, "creation_date": 1441767390, "last_edit_date": 1441773462, "question_id": 32470214, "link": "https://stackoverflow.com/questions/32470214/argument-error-for-text-image-post-argument-cant-contain-nil", "title": "Argument error for text/image post argument can&#39;t contain nil", "body": "<p>The error I am getting is this - <code>First argument in form cannot contain nil or be empty.</code>\nThis is the code in question:</p>\n\n<pre><code>&lt;%= form_for @text_post do |f| %&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;%= form_for @image_post do |f| %&gt;\n</code></pre>\n\n<p>Here is my code for <strong>image post controller action</strong></p>\n\n<pre><code>class ImagePostsController &lt; ApplicationController\n  def new\n    @image_post = ImagePost.new\n  end\n\n  def create \n    @image_post = current_user.image_posts.build(image_post_params)\n    if @image_post.save\n      redirect_to post_path(@image_post),\n      notice: \"Post created!\"\n    else\n      render :new, alert: \"Error creating post.\"\n    end\n  end\n\n  def update\n    @image_post = current_user.image_posts.find(params[:id])\n    if @image_post.update(image_post_params)\n       redirect_to post_path(@image_post), \n      notice: \"Post updated!\"\n    else\n      render :edit, alert: \"Error updating post.\"\n    end\n  end\n\n  private\n\n  def image_post_params\n    params.require(:image_post).permit(:title, :url, :body)\n  end\nend\n</code></pre>\n\n<p>The text post controller is the same code except the <code>text</code> is substituted for <code>image</code>.\nI clearly have the image and text posts defined so I'm not sure why I am getting this error. Anybody have any ideas???</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "jquery-validate"], "comments": [{"owner": {"reputation": 2076, "user_id": 17131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4ef7bf539217a09689eb4ff5a8e163?s=128&d=identicon&r=PG", "display_name": "Brody", "link": "https://stackoverflow.com/users/17131/brody"}, "edited": false, "score": 1, "creation_date": 1441766078, "post_id": 32470045, "comment_id": 52801886, "body": "This is q pretty broad question.  Do you have anything you really want to know?"}, {"owner": {"reputation": 3, "user_id": 5106425, "user_type": "registered", "profile_image": "https://graph.facebook.com/769833403134127/picture?type=large", "display_name": "Ho&#224;ng Ng\u1ecdc Qu&#253;", "link": "https://stackoverflow.com/users/5106425/ho%c3%a0ng-ng%e1%bb%8dc-qu%c3%bd"}, "reply_to_user": {"reputation": 2076, "user_id": 17131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4ef7bf539217a09689eb4ff5a8e163?s=128&d=identicon&r=PG", "display_name": "Brody", "link": "https://stackoverflow.com/users/17131/brody"}, "edited": false, "score": 0, "creation_date": 1441767288, "post_id": 32470045, "comment_id": 52802140, "body": "i&#39;m sorry , i only want check email exist in rails, and display that by messages in validate . Thank Rohit Gupta :)"}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1441768889, "post_id": 32470045, "comment_id": 52802485, "body": "Why do you want to use JQuery to do your validation? You can easily add validation to your User model with <code>validates :email, unique: true </code>"}], "answers": [{"tags": [], "owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "is_accepted": true, "score": 0, "last_activity_date": 1441781290, "last_edit_date": 1441781290, "creation_date": 1441769012, "answer_id": 32470408, "question_id": 32470045, "link": "https://stackoverflow.com/questions/32470045/how-to-check-email-exist-in-rails-devise-gem/32470408#32470408", "title": "how to check email exist in rails, devise gem", "body": "<p>How the process works is, </p>\n\n<p>1 - User fill the form</p>\n\n<p>2 - User click <code>submit</code> button</p>\n\n<p>3 - <code>JQuery validator</code> will validate the form depending on your rules defined, and if everything if ok submit the form (which will create a user in the DB)</p>\n\n<p>as per your code, you should add a route in <code>config/routes.rb</code> to handle the request <code>check_already_email</code>. something like.. </p>\n\n<pre><code>#config/routes.rb\nget \"registrations/check_already_email\" =&gt;\"registrations#check_email\", as: :check_email\n</code></pre>\n\n<p>Following is <a href=\"https://bestror.wordpress.com/2013/06/29/validation-form-in-ruby-on-rails-with-jquery-validate/\" rel=\"nofollow\">almost the same thing which you try to do</a>, have a look</p>\n"}], "owner": {"reputation": 3, "user_id": 5106425, "user_type": "registered", "profile_image": "https://graph.facebook.com/769833403134127/picture?type=large", "display_name": "Ho&#224;ng Ng\u1ecdc Qu&#253;", "link": "https://stackoverflow.com/users/5106425/ho%c3%a0ng-ng%e1%bb%8dc-qu%c3%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1389, "favorite_count": 0, "accepted_answer_id": 32470408, "answer_count": 1, "score": 0, "last_activity_date": 1580212868, "creation_date": 1441765935, "last_edit_date": 1580212868, "question_id": 32470045, "link": "https://stackoverflow.com/questions/32470045/how-to-check-email-exist-in-rails-devise-gem", "title": "how to check email exist in rails, devise gem", "body": "<p>I am a beginner at Ruby.</p>\n\n<p>I have created my website using Rails, and am using the Devise gem to create users.\nIn sign_up. <strong>users/registrations/new.html.erb</strong> I have:</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :\"Email address  *\" %&gt;\n    &lt;%= f.email_field :email, class: \"form-control\" , placeholder: \"Enter your email\", name: \"email\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And I am using a jQuery validation plugin on my validation form, adding a new rule:</p>\n\n<pre><code>jQuery.validator.addMethod(\"checkAlreadyEmail\", function( value, element ) {\n  var unavailable = true;\n  $.ajax({\n    url : '/users/check_already_email',\n    type : \"POST\",\n    async: false,\n    data : 'email =' + value,\n    dataType : \"json\",\n    success : function(data) {\n      if(data.available == true){\n        unavailable = false;\n      }\n    }\n  });\n  return unavailable;\n}, \"This email is already taken\");\n\n$(\"#new_user\").validate({\n  rules: {\n    email: {\n      required: true,\n      email: true,\n      checkAlreadyEmail: true,\n      },}\nmessages: {\n    email: {\n      required: \"Please enter your email\",\n      email: \"Please enter valid email address\",\n      checkAlreadyEmail: \"This email is already taken\",\n    },},})\n</code></pre>\n\n<p>In users/registrations_controller.rb I have</p>\n\n<pre><code>def check_already_email\n    @email = users.search(params[:email])\n  end\n</code></pre>\n\n<p>What is next ? I am sorry, this is the first time I am asking a question on StackOverflow.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 2310, "user_id": 1760776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06b0ee4ca4d278a813cadb1e0735b7?s=128&d=identicon&r=PG", "display_name": "tgf", "link": "https://stackoverflow.com/users/1760776/tgf"}, "edited": false, "score": 0, "creation_date": 1441768911, "post_id": 32470386, "comment_id": 52802489, "body": "Nice Saiqul, beat me by 12 seconds!"}, {"owner": {"reputation": 345, "user_id": 4038912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ESIQ431ki5k/AAAAAAAAAAI/AAAAAAAAAQA/LPTEQDTDNRE/photo.jpg?sz=128", "display_name": "Alex Heil", "link": "https://stackoverflow.com/users/4038912/alex-heil"}, "edited": false, "score": 0, "creation_date": 1441769185, "post_id": 32470386, "comment_id": 52802549, "body": "This does not work as clicking the <code>follow</code> button causes every single <code>follow</code> button on the <code>index.html.erb</code> page to be converted to <code>unfollow</code>."}, {"owner": {"reputation": 1344, "user_id": 1866752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I18d.jpg?s=128&g=1", "display_name": "Saiqul Haq", "link": "https://stackoverflow.com/users/1866752/saiqul-haq"}, "edited": false, "score": 0, "creation_date": 1441769277, "post_id": 32470386, "comment_id": 52802563, "body": "Actually I wanna to reply this question 20 minutes ago, but I was busy, haha"}, {"owner": {"reputation": 345, "user_id": 4038912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ESIQ431ki5k/AAAAAAAAAAI/AAAAAAAAAQA/LPTEQDTDNRE/photo.jpg?sz=128", "display_name": "Alex Heil", "link": "https://stackoverflow.com/users/4038912/alex-heil"}, "edited": false, "score": 0, "creation_date": 1441769555, "post_id": 32470386, "comment_id": 52802623, "body": "it&#39;s <code>@artists = Artist.all</code>, but after Ajax is called in the <code>relationships_controller</code> isn&#39;t everything used from there?"}], "tags": [], "owner": {"reputation": 1344, "user_id": 1866752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I18d.jpg?s=128&g=1", "display_name": "Saiqul Haq", "link": "https://stackoverflow.com/users/1866752/saiqul-haq"}, "is_accepted": false, "score": 0, "last_activity_date": 1441768818, "creation_date": 1441768818, "answer_id": 32470386, "question_id": 32469990, "link": "https://stackoverflow.com/questions/32469990/render-local-variables-in-partials-with-ajax-rails-4/32470386#32470386", "title": "Render local variables in partials with Ajax, Rails 4", "body": "<p>I think you missed <code>@artist</code> variable in your follow_button.js.erb file.</p>\n\n<p><code>$('.index_follow_button').html('&lt;%=  escape_javascript(render :partial =&gt; 'partials/index_follow_button.html.erb', :locals =&gt; {:artist =&gt; @artist}) %&gt;');\n</code></p>\n"}, {"comments": [{"owner": {"reputation": 345, "user_id": 4038912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ESIQ431ki5k/AAAAAAAAAAI/AAAAAAAAAQA/LPTEQDTDNRE/photo.jpg?sz=128", "display_name": "Alex Heil", "link": "https://stackoverflow.com/users/4038912/alex-heil"}, "edited": false, "score": 0, "creation_date": 1441769188, "post_id": 32470388, "comment_id": 52802552, "body": "This does not work as clicking the <code>follow</code> button causes every single <code>follow</code> button on the <code>index.html.erb</code> page to be converted to <code>unfollow</code>."}, {"owner": {"reputation": 2310, "user_id": 1760776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06b0ee4ca4d278a813cadb1e0735b7?s=128&d=identicon&r=PG", "display_name": "tgf", "link": "https://stackoverflow.com/users/1760776/tgf"}, "reply_to_user": {"reputation": 345, "user_id": 4038912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ESIQ431ki5k/AAAAAAAAAAI/AAAAAAAAAQA/LPTEQDTDNRE/photo.jpg?sz=128", "display_name": "Alex Heil", "link": "https://stackoverflow.com/users/4038912/alex-heil"}, "edited": false, "score": 0, "creation_date": 1441769582, "post_id": 32470388, "comment_id": 52802638, "body": "do they all have the same html class of <code>.index_follow_button</code> ?  I suspect your jquery call is overwriting each element with that class."}, {"owner": {"reputation": 345, "user_id": 4038912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ESIQ431ki5k/AAAAAAAAAAI/AAAAAAAAAQA/LPTEQDTDNRE/photo.jpg?sz=128", "display_name": "Alex Heil", "link": "https://stackoverflow.com/users/4038912/alex-heil"}, "edited": false, "score": 0, "creation_date": 1441769841, "post_id": 32470388, "comment_id": 52802701, "body": "Ah, you are right! What is the proper way to have only the one being clicked change?"}, {"owner": {"reputation": 2310, "user_id": 1760776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06b0ee4ca4d278a813cadb1e0735b7?s=128&d=identicon&r=PG", "display_name": "tgf", "link": "https://stackoverflow.com/users/1760776/tgf"}, "reply_to_user": {"reputation": 345, "user_id": 4038912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ESIQ431ki5k/AAAAAAAAAAI/AAAAAAAAAQA/LPTEQDTDNRE/photo.jpg?sz=128", "display_name": "Alex Heil", "link": "https://stackoverflow.com/users/4038912/alex-heil"}, "edited": false, "score": 0, "creation_date": 1441770027, "post_id": 32470388, "comment_id": 52802756, "body": "You need something unique; then you can set the id of the element and use that in jquery.  Is the artist unique?  or could you use the artist.id?"}], "tags": [], "owner": {"reputation": 2310, "user_id": 1760776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06b0ee4ca4d278a813cadb1e0735b7?s=128&d=identicon&r=PG", "display_name": "tgf", "link": "https://stackoverflow.com/users/1760776/tgf"}, "is_accepted": true, "score": 3, "last_activity_date": 1441770176, "last_edit_date": 1441770176, "creation_date": 1441768830, "answer_id": 32470388, "question_id": 32469990, "link": "https://stackoverflow.com/questions/32469990/render-local-variables-in-partials-with-ajax-rails-4/32470388#32470388", "title": "Render local variables in partials with Ajax, Rails 4", "body": "<p>Artist is a local variable but in your js file it's unset (unless you left some code out).  Instead try to use the instance variable:\nfollow_button.js.erb:</p>\n\n<pre><code>$('.index_follow_button').html('&lt;%=  escape_javascript(render :partial =&gt; 'partials/index_follow_button.html.erb', :locals =&gt; {:artist =&gt; @artist}) %&gt;');\n</code></pre>\n\n<p>In your index.html.erb your loop sets the local variable <code>artist</code>.</p>\n\n<hr>\n\n<p>Looks like you also need a unique way for jquery to address the element in question.  </p>\n\n<pre><code>&lt;% @artists.each do |artist| %&gt;\n  &lt;div class=\"index_follow_button\" id=\"artist-&lt;%= artist.id %&gt;\"&gt;\n    &lt;%= render \"partials/index_follow_button\", :artist =&gt; artist %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Then once again change follow_button.js.erb; this time to use the new id as the css locator instead of the class.</p>\n\n<pre><code>$('#artist-&lt;%= @artist.id %&gt;').html('&lt;%=  escape_javascript(render \n  :partial =&gt; 'partials/index_follow_button.html.erb', \n  :locals =&gt; {:artist =&gt; artist}) %&gt;'\n);\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 4038912, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-ESIQ431ki5k/AAAAAAAAAAI/AAAAAAAAAQA/LPTEQDTDNRE/photo.jpg?sz=128", "display_name": "Alex Heil", "link": "https://stackoverflow.com/users/4038912/alex-heil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3167, "favorite_count": 0, "accepted_answer_id": 32470388, "answer_count": 2, "score": 0, "last_activity_date": 1441770176, "creation_date": 1441765425, "question_id": 32469990, "link": "https://stackoverflow.com/questions/32469990/render-local-variables-in-partials-with-ajax-rails-4", "title": "Render local variables in partials with Ajax, Rails 4", "body": "<p>I'm having trouble getting my local variables to display inside the partials after the Ajax call. Here is my setup:</p>\n\n<p><strong>View</strong> - <em>index.html.erb</em></p>\n\n<pre><code>&lt;% @artists.each do |artist| %&gt;\n  &lt;div class=\"index_follow_button\"&gt;\n    &lt;%= render \"partials/index_follow_button\", :artist =&gt; artist %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>View</strong> <em>partials/_index_follow_button.html.erb</em></p>\n\n<pre><code>&lt;% if fan_signed_in? %&gt;\n  &lt;% if fan_signed_in? &amp;&amp; current_fan.following_artist?(artist) %&gt;\n    &lt;%= button_to \"unfollow\", artist_relationship_path(artist, current_fan.artist_relationship_id(artist)), method: :delete, remote: true %&gt;\n  &lt;% elsif fan_signed_in? %&gt;\n    &lt;%= form_for(ArtistRelationship.new, url: artist_relationships_path(artist), remote: true) do |f| %&gt;\n      &lt;%= f.submit \"follow\" %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>View</strong> - <em>follow_button.js.erb</em></p>\n\n<pre><code>$('.index_follow_button').html('&lt;%=  escape_javascript(render :partial =&gt; 'partials/index_follow_button.html.erb', :locals =&gt; {:artist =&gt; artist}) %&gt;');\n</code></pre>\n\n<p><strong>I believe this is where the error is</strong></p>\n\n<p><strong>Controller</strong> - <em>relationships_controller.rb</em></p>\n\n<pre><code>def create\n  @relationship = ArtistRelationship.new\n  @relationship.fan_id = current_fan.id\n  @relationship.artist_id = Artist.friendly.find(params[:artist_id]).id\n  @artist = Artist.friendly.find(params[:artist_id])\n  if @relationship.save\n    respond_to do |format|\n      format.html { redirect_to (:back) }\n      format.js { render :action =&gt; \"follow_button\" }\n    end\n  else\n    redirect_to root_url\n  end\nend\n\ndef destroy\n  current_fan.unfollow_artist(Artist.friendly.find(params[:artist_id]))\n  @artist = Artist.friendly.find(params[:artist_id])\n  respond_to do |format|\n    format.html { redirect_to (:back) }\n    format.js { render :action =&gt; \"follow_button\" }\n  end\nend\n</code></pre>\n\n<p>In the index page, the partial displays perfectly fine using <code>:artist =&gt; artist</code>, but the same thing is not happening in the JavaScript page, but I keep getting the same error - </p>\n\n<pre><code>ActionView::Template::Error (undefined local variable or method `artist' for #&lt;#&lt;Class:0x3798df8&gt;:0x6f43968&gt;)\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1441764945, "post_id": 32469808, "comment_id": 52801639, "body": "You say index works. Can you post the code? Also, try to create a Player on the console: <code>rails c</code> and then <code>player = Player.create({name: &quot;Name&quot;, position: &quot;position&quot;})</code> and then access the name property: <code>player.name</code> and see if it works."}, {"owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "edited": false, "score": 0, "creation_date": 1441765054, "post_id": 32469808, "comment_id": 52801659, "body": "does that Player object exists in the first place? What&#39;s the output of <code>p @player</code> in your show action and <code>&lt;%= @player %&gt;</code> in the show.html.erb?"}, {"owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 0, "creation_date": 1441768350, "post_id": 32469808, "comment_id": 52802361, "body": "Added index view and controller method."}, {"owner": {"reputation": 2413, "user_id": 443302, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7d02069ff600f99c6b597d7c9729ded9?s=128&d=identicon&r=PG", "display_name": "Stewart", "link": "https://stackoverflow.com/users/443302/stewart"}, "edited": false, "score": 0, "creation_date": 1441768713, "post_id": 32469808, "comment_id": 52802444, "body": "Can you post the entire controller? Also can you go in to the console and run &#39;Player.find(269)&#39; and make sure that returns a record."}, {"owner": {"reputation": 2413, "user_id": 443302, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7d02069ff600f99c6b597d7c9729ded9?s=128&d=identicon&r=PG", "display_name": "Stewart", "link": "https://stackoverflow.com/users/443302/stewart"}, "edited": false, "score": 0, "creation_date": 1441768867, "post_id": 32469808, "comment_id": 52802480, "body": "Sidenote: Your using ruby to sort after pulling records out of your database. Your much better off using ActiveRecord to do a database level order. <a href=\"http://guides.rubyonrails.org/active_record_querying.html#ordering\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/active_record_querying.html#ordering</a>"}, {"owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "edited": false, "score": 0, "creation_date": 1441769347, "post_id": 32469808, "comment_id": 52802580, "body": "you have an extra end after <code>not_picked</code> method, is that a typo ? coz if not , it literally ends the controller and your <code>show</code> method is just not called at all"}, {"owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 0, "creation_date": 1441769375, "post_id": 32469808, "comment_id": 52802588, "body": "Stewart, Player.find(269) returns the correct record. SELECT  &quot;players&quot;.* FROM &quot;players&quot; WHERE &quot;players&quot;.&quot;id&quot; = ? LIMIT 1  [[&quot;id&quot;, 269]] =&gt; #&lt;Player id: 269, name: &quot;Sam Young&quot;, string: nil, position: &quot;OT&quot;, created_at: &quot;2015-09-09 01:12:21&quot;, updated_at: &quot;2015-09-09 01:12:21&quot;&gt;"}, {"owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 0, "creation_date": 1441769789, "post_id": 32469808, "comment_id": 52802685, "body": "Sameera207....you are right! I am SO embarrassed. Please post this as an answer so I can mark it as correct. I am now going to go crawl under a rock and hide myself."}, {"owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "edited": false, "score": 0, "creation_date": 1441771815, "post_id": 32469808, "comment_id": 52803170, "body": "@SeattleDucati, :), done..."}], "answers": [{"comments": [{"owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "edited": false, "score": 0, "creation_date": 1441766284, "post_id": 32470018, "comment_id": 52801936, "body": "if the id is not in the DB, as you say it will return <code>ActiveRecord::RecordNotFound</code>. however at that point rails will blow up and will not render the view at all."}], "tags": [], "owner": {"reputation": 445, "user_id": 4265763, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_XuweyYACIs/AAAAAAAAAAI/AAAAAAAAAEI/OvebLDs1Rlo/photo.jpg?sz=128", "display_name": "Sirui Zhuang", "link": "https://stackoverflow.com/users/4265763/sirui-zhuang"}, "is_accepted": false, "score": 1, "last_activity_date": 1441767316, "last_edit_date": 1441767316, "creation_date": 1441765730, "answer_id": 32470018, "question_id": 32469808, "link": "https://stackoverflow.com/questions/32469808/rails-ruby-very-strange-undefined-method-name-for-nilnilclass-on-show/32470018#32470018", "title": "Rails/Ruby - Very strange, undefined method `name&#39; for nil:NilClass on show", "body": "<p>Because <code>find</code> method will return <code>ActiveRecord::RecordNotFound</code> when record not found. So i guess the Player record is exist in your database.</p>\n\n<p>I suggest you <code>p @player</code> after <code>@player = Player.find(params[:id])</code>, then do the same thing in the first line at <code>show.html.erb</code> to show what the <code>@player</code> is.</p>\n\n<p>Maybe there is something change your <code>@player</code> to a <code>nil</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "is_accepted": false, "score": 0, "last_activity_date": 1441767209, "creation_date": 1441767209, "answer_id": 32470194, "question_id": 32469808, "link": "https://stackoverflow.com/questions/32469808/rails-ruby-very-strange-undefined-method-name-for-nilnilclass-on-show/32470194#32470194", "title": "Rails/Ruby - Very strange, undefined method `name&#39; for nil:NilClass on show", "body": "<p>You code looks fine, but my guess is something in your code making the @player variable <code>nil</code></p>\n\n<p>I would suggest the followings, steps with <a href=\"https://github.com/pry/pry\" rel=\"nofollow\">pry debugger</a></p>\n\n<p>1 - a debugger after @player in controller</p>\n\n<pre><code>def show\n  @player = Player.find(params[:id])\n  binding.pry\nend\n</code></pre>\n\n<p>check your code to see , if you get a <code>@player</code> object</p>\n\n<p>2 - add a debugger to show view</p>\n\n<pre><code>&lt;% binding.pry %&gt;\n&lt;%= @player.name %&gt;\n</code></pre>\n\n<p>and see if you still have the <code>@player</code>, by this you can understand when u r missing the value and work on that. </p>\n\n<p>My guess is, some filter in controller might be wiping out your variable. </p>\n"}, {"comments": [{"owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 0, "creation_date": 1441772316, "post_id": 32470771, "comment_id": 52803279, "body": "Thank you Sameera! And thank you for not making fun of my foolishness:D"}, {"owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "reply_to_user": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "edited": false, "score": 1, "creation_date": 1441772958, "post_id": 32470771, "comment_id": 52803441, "body": "@SeattleDucati, its called <code>foolishness</code> now an after some time its called <code>experience</code> :D"}], "tags": [], "owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "is_accepted": true, "score": 3, "last_activity_date": 1516910945, "last_edit_date": 1516910945, "creation_date": 1441771790, "answer_id": 32470771, "question_id": 32469808, "link": "https://stackoverflow.com/questions/32469808/rails-ruby-very-strange-undefined-method-name-for-nilnilclass-on-show/32470771#32470771", "title": "Rails/Ruby - Very strange, undefined method `name&#39; for nil:NilClass on show", "body": "<p>You have an extra end after <code>not_picked</code> method, is that a typo? If not, it literally ends the controller and your show method is just not called at all.</p>\n"}], "owner": {"reputation": 205, "user_id": 4925363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f9677975a7f1508434abccac7b2409ec?s=128&d=identicon&r=PG&f=1", "display_name": "SeattleDucati", "link": "https://stackoverflow.com/users/4925363/seattleducati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1028, "favorite_count": 0, "accepted_answer_id": 32470771, "answer_count": 3, "score": 2, "last_activity_date": 1516910945, "creation_date": 1441764091, "last_edit_date": 1441769063, "question_id": 32469808, "link": "https://stackoverflow.com/questions/32469808/rails-ruby-very-strange-undefined-method-name-for-nilnilclass-on-show", "title": "Rails/Ruby - Very strange, undefined method `name&#39; for nil:NilClass on show", "body": "<p>I like to think I'm not a complete newbie to rails, but I cannot get a simple Show action to work. I'm baffled. Ruby 2.2.2p95, also tried it on my production build, Ruby 2.0.0p643, both Rails 4.2.1.</p>\n\n<p>The model is Players. Players have 2 params, :name and :position. When I index Players, it works fine. But when I try and view the show.html.erb, I get the classic error: undefined method `name' for nil:NilClass.</p>\n\n<p>The Players model:</p>\n\n<pre><code>class Player &lt; ActiveRecord::Base\nhas_one :team, through: :ownership\nhas_one :ownership\n\nvalidates :name, presence: true\nvalidates :position, presence: true\n\ndef last_name\nself.name.split(' ')[1]\nend\nend\n</code></pre>\n\n<p>The method:</p>\n\n<pre><code>def show\n@player = Player.find(params[:id])\nend\n</code></pre>\n\n<p>For troubleshooting, I've reduced the show.html.erb to this:</p>\n\n<pre><code> &lt;%= render 'welcome/menu' %&gt;\n\n &lt;%= @player.name %&gt;\n</code></pre>\n\n<p>A rake routes shows:</p>\n\n<pre><code> player GET    /players/:id(.:format)           players#show\n</code></pre>\n\n<p>If I try and view the player with id 269, this what the log shows</p>\n\n<pre><code> Started GET \"/players/269\" for ::1 at 2015-09-08 21:58:12 -0400\n Processing by PlayersController#show as HTML\n Parameters: {\"id\"=&gt;\"269\"}\n Rendered welcome/_menu.html.erb (0.7ms)\n Rendered players/show.html.erb within layouts/application (5.7ms)\n Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms)\n\n ActionView::Template::Error (undefined method `name' for nil:NilClass):\n  2: \n  3: &lt;%= render 'welcome/menu' %&gt;\n  4: \n  5: &lt;%= @player.name %&gt;\n  6:      \n app/views/players/show.html.erb:5:in `_app_views_players_show_html_erb___175427692043794239_70253361597080'\n</code></pre>\n\n<p>What in the world am I missing here?</p>\n\n<p>EDIT:</p>\n\n<p>This is the important part of the index.html.erb view. It works fine:</p>\n\n<pre><code>   &lt;% @players.each do |player| %&gt;\n   &lt;tr&gt;\n   &lt;td&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to player.name, player %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= player.position %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= player.id %&gt;\n</code></pre>\n\n<p>Players Controller:</p>\n\n<pre><code> class PlayersController &lt; ApplicationController\n def index\n @players = Player.all.sort_by{ |x| [x.position, x.last_name] }\n end\n\n def not_picked\n  @players = Player.all.select { |m| m.team == nil}.sort_by{ |x| [x.position, x.last_name] }\n end\n end\n\ndef show\n @player = Player.find(params[:id])\nend\n\n private\n\n def player_params\n params.require(:player).permit(:name, :position)\n end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec"], "comments": [{"owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "edited": false, "score": 0, "creation_date": 1441782310, "post_id": 32469724, "comment_id": 52807031, "body": "I don&#39;t understand what you&#39;re trying to do. What command are you running?"}, {"owner": {"reputation": 13, "user_id": 5315069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d8dfbf38d065d41c9d0c6a3ef46493b?s=128&d=identicon&r=PG&f=1", "display_name": "R Doe", "link": "https://stackoverflow.com/users/5315069/r-doe"}, "reply_to_user": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "edited": false, "score": 0, "creation_date": 1441785727, "post_id": 32469724, "comment_id": 52809048, "body": "When I run rspec or rake, and test is red, I get standard error with lot of this lines."}], "answers": [{"tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 0, "last_activity_date": 1441784016, "creation_date": 1441784016, "answer_id": 32473498, "question_id": 32469724, "link": "https://stackoverflow.com/questions/32469724/rspec-rails-to-many-output/32473498#32473498", "title": "Rspec-rails to many output", "body": "<p>You can't actually disable them, but you can <code>grep</code> them out in the output, something like this:</p>\n\n<pre><code>  &lt;your rspec command&gt; | grep -v '/.rvm/' # this command will filter out all lines, containing \"/.rvm/\" string\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5315069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d8dfbf38d065d41c9d0c6a3ef46493b?s=128&d=identicon&r=PG&f=1", "display_name": "R Doe", "link": "https://stackoverflow.com/users/5315069/r-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 32473498, "answer_count": 1, "score": 0, "last_activity_date": 1441811884, "creation_date": 1441763370, "question_id": 32469724, "link": "https://stackoverflow.com/questions/32469724/rspec-rails-to-many-output", "title": "Rspec-rails to many output", "body": "<p>rails 4.2.4 rspec 3.3.3</p>\n\n<p>.rspec :</p>\n\n<pre><code>--color\n</code></pre>\n\n<p>in foo_spec.rb :</p>\n\n<pre><code>require 'rails_helper'\n</code></pre>\n\n<p>output:</p>\n\n<pre><code> # /home/ruslan/.rvm/gems/ruby-2.2.2@qna/gems/actionpack-4.2.4/lib/action_dispatch/journey/formatter.rb:46:in `generate'\n # /home/ruslan/.rvm/gems/ruby-2.2.2@qna/gems/actionpack-4.2.4/lib/action_dispatch/routing/route_set.rb:729:in `generate'\n # /home/ruslan/.rvm/gems/ruby-2.2.2@qna/gems/actionpack-4.2.4/lib/action_dispatch/routing/route_set.rb:760:in `generate'\n # /home/ruslan/.rvm/gems/ruby-2.2.2@qna/gems/actionpack-4.2.4/lib/action_dispatch/routing/route_set.rb:755:in `generate_extras'\n # /home/ruslan/.rvm/gems/ruby-2.2.2@qna/gems/actionpack-4.2.4/lib/action_dispatch/routing/route_set.rb:750:in `extra_keys'\n # /home/ruslan/.rvm/gems/ruby-2.2.2@qna/gems/actionpack-4.2.4/lib/action_controller/test_case.rb:208:in `assign_parameters'\n # /home/ruslan/.rvm/gems/ruby-2.2.2@qna/gems/actionpack-4.2.4/lib/action_controlle...\n</code></pre>\n\n<p>How to disable this lines (#.../.rvm/...)?</p>\n"}, {"tags": ["ruby", "json", "git", "github"], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 2020050, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1996be92f32060ab0a34053b0f3a1a8?s=128&d=identicon&r=PG", "display_name": "cvoep28", "link": "https://stackoverflow.com/users/2020050/cvoep28"}, "edited": false, "score": 0, "creation_date": 1441768012, "post_id": 32469603, "comment_id": 52802294, "body": "hm, I&#39;m still getting the same error with this. Is there some method I need to read the file in this line: ENV[&#39;SSL_CERT_FILE&#39;] = /path/to/your/download/cacert.pem?"}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "reply_to_user": {"reputation": 383, "user_id": 2020050, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1996be92f32060ab0a34053b0f3a1a8?s=128&d=identicon&r=PG", "display_name": "cvoep28", "link": "https://stackoverflow.com/users/2020050/cvoep28"}, "edited": false, "score": 0, "creation_date": 1441771007, "post_id": 32469603, "comment_id": 52802987, "body": "I forgot to put it in quotes. Also make sure the path is correct!"}], "tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": false, "score": 0, "last_activity_date": 1441770994, "last_edit_date": 1441770994, "creation_date": 1441762431, "answer_id": 32469603, "question_id": 32469551, "link": "https://stackoverflow.com/questions/32469551/read-json-file-in-git-repo-without-checkout/32469603#32469603", "title": "Read JSON file in git repo without checkout", "body": "<p>Ruby doesn't trust the Github SSL certificate probably because it's too new for your version of Ruby and/or your OS.</p>\n\n<p>Try the following from the command-line (assuming linux/OSX):</p>\n\n<pre><code>wget http://curl.haxx.se/ca/cacert.pem\n</code></pre>\n\n<p>Now in your Ruby code:</p>\n\n<pre><code>ENV['SSL_CERT_FILE'] = \"/path/to/your/download/cacert.pem\" # where you downloaded file to\nrequire 'open-uri'  # ensure this is after the above line.\n\ndef getEndpointContent(url)\n    return JSON.parse(open(url).read)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91778, "user_id": 354577, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dI6cA.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/354577/chris"}, "is_accepted": true, "score": 2, "last_activity_date": 1441816138, "last_edit_date": 1441816138, "creation_date": 1441769158, "answer_id": 32470426, "question_id": 32469551, "link": "https://stackoverflow.com/questions/32469551/read-json-file-in-git-repo-without-checkout/32470426#32470426", "title": "Read JSON file in git repo without checkout", "body": "<p>You won't be able to access the file using that URL.</p>\n\n<p>GitHub provides raw file access using a different domain, and you haven't included your user or organization name. Also remember that a Git repository isn't simply a directory; you'll also have to provide a branch name or commit hash or something similar to tell GitHub which version of the file you want to see.</p>\n\n<p>Something like this should work:</p>\n\n<pre><code>https://raw.githubusercontent.com/MyUser/MyRepo/master/myFile.json\n</code></pre>\n\n<p>You can find the raw link for a file by browsing to it in the GitHub UI and clicking the \"Raw\" link in the file's header.</p>\n"}], "owner": {"reputation": 383, "user_id": 2020050, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1996be92f32060ab0a34053b0f3a1a8?s=128&d=identicon&r=PG", "display_name": "cvoep28", "link": "https://stackoverflow.com/users/2020050/cvoep28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 719, "favorite_count": 0, "accepted_answer_id": 32470426, "answer_count": 2, "score": 0, "last_activity_date": 1441816138, "creation_date": 1441761975, "question_id": 32469551, "link": "https://stackoverflow.com/questions/32469551/read-json-file-in-git-repo-without-checkout", "title": "Read JSON file in git repo without checkout", "body": "<p>I have the following method: </p>\n\n<pre><code>def getEndpointContent(url)\n        return JSON.parse(open(url).read)\nend\n</code></pre>\n\n<p>I want to use this to return the contents of a json file located in a git repo <code>without</code> checking out the repository. </p>\n\n<p>However, if I pass in, for example, <code>https://github.com/MyRep/myFile.json</code> for the <code>url</code> parameter, I get the following error: </p>\n\n<pre><code>`connect': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (OpenSSL::SSL::SSLError)\n</code></pre>\n\n<p>Is what I'm trying to do possible, and if so, how? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authorization", "pundit"], "comments": [{"owner": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "edited": false, "score": 1, "creation_date": 1441759188, "post_id": 32469146, "comment_id": 52800298, "body": "Show us CategoryPolicy, since StartupPolicy inherits from it."}, {"owner": {"reputation": 427, "user_id": 3787971, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/21308605/picture?type=large", "display_name": "user3787971", "link": "https://stackoverflow.com/users/3787971/user3787971"}, "reply_to_user": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "edited": false, "score": 0, "creation_date": 1441759293, "post_id": 32469146, "comment_id": 52800326, "body": "Ok @daiku I added the categorypolicy file"}], "answers": [{"tags": [], "owner": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "is_accepted": false, "score": 1, "last_activity_date": 1441759998, "last_edit_date": 1441759998, "creation_date": 1441759434, "answer_id": 32469259, "question_id": 32469146, "link": "https://stackoverflow.com/questions/32469146/pundit-not-defined-error-for-a-nested-controller/32469259#32469259", "title": "Pundit not defined error for a nested controller", "body": "<p>I don't see that you've set <code>@startups</code> anywhere.  So it's nil, which explains the error message.  I assume you meant to set it to the resulting list you get after importing the CSV.  Or, since all you are checking in the policy is whether you have a user, you could just <code>authorize :startup</code> which will get you to the right policy, and not care which startups you have.</p>\n"}], "owner": {"reputation": 427, "user_id": 3787971, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/21308605/picture?type=large", "display_name": "user3787971", "link": "https://stackoverflow.com/users/3787971/user3787971"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441759998, "creation_date": 1441758400, "last_edit_date": 1441759269, "question_id": 32469146, "link": "https://stackoverflow.com/questions/32469146/pundit-not-defined-error-for-a-nested-controller", "title": "Pundit not defined error for a nested controller", "body": "<p>I'm adding a csv upload feature to my site. I want to be able to add startups to categories that I've created. </p>\n\n<p>I'm getting this error: </p>\n\n<p><a href=\"https://i.stack.imgur.com/hoFaw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hoFaw.png\" alt=\"error message: note that I&#39;ve tried both authorize @startup and @startups\"></a></p>\n\n<p>Startup_policy.rb file</p>\n\n<pre><code> class StartupPolicy &lt; CategoryPolicy\n      def create?\n        user.present?\n       end\n\n       def import?\n        user.present?\n      end\n    end\n</code></pre>\n\n<p>Startup_controller.rb</p>\n\n<pre><code>class StartupsController &lt; ApplicationController\n  before_action :authenticate_user!\n\n   def create\n    @startup = @startupable.startups.new startup_params\n    @startup.user = current_user\n    @startup.save\n    redirect_to @startupable, notice: \"Your startup was added succesfully.\"\n    authorize @startup\n   end\n\n   def import\n    count = Startup.import params[:file]\n    redirect_to category_startups_path, notice: \"Imported #{count} startups\"\n    authorize @startups\n   end\n\n   private\n   def set_category\n    @startup = Startup.find(params[:id])\n    authorize @startup\n   end \n\n  def startup_params\n    params.require(:startup).permit(:company, :url)\n  end\nend \n</code></pre>\n\n<p>Startup.rb</p>\n\n<pre><code>class Startup &lt; ActiveRecord::Base\n    belongs_to :startupable, polymorphic: true\n    belongs_to :user\n\n    def self.import(file)\n            counter = 0\n            CSV.foreach(file.path, headers: true, header_converters: :symbol) do |row|\n                startup = Startup.assign_from_row(row)\n                if startup.save\n                    counter += 1 \n                else\n                    puts \"#{startup.company} - #{startup.errors.full_messages.join(\",\")}\" \n                end \n            end \n        counter\n    end\n\n    def self.assign_from_row(row)\n        startup = Startup.where(company: row[:company]).first_or_initialize\n        startup.assign_attributes row.to_hash.slice(:url)\n        startup\n    end\nend\n</code></pre>\n\n<p>EDIT: added Category_policy.rb</p>\n\n<pre><code>class CategoryPolicy &lt; ApplicationPolicy\n    def index?\n        true\n    end\n    def create?\n        user.present?\n    end\n\n    def update?\n        return true if user.present? &amp;&amp; (user.admin? || category.user)\n    end\n\n    def show?\n        true\n    end\n\n    def destroy?\n        user.present? &amp;&amp; user.admin?\n    end\nprivate\n    def category\n        record\n    end\nend\n</code></pre>\n\n<p>What am I missing here? Pundit is pretty easy to use but for some reason I'm stumped on this one. </p>\n"}, {"tags": ["ruby", "tdd", "cucumber"], "comments": [{"owner": {"reputation": 38260, "user_id": 82118, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4ce1db5900dc701fa18c32d4d1ad047a?s=128&d=identicon&r=PG", "display_name": "Carl Manaster", "link": "https://stackoverflow.com/users/82118/carl-manaster"}, "edited": false, "score": 2, "creation_date": 1441755860, "post_id": 32468648, "comment_id": 52799549, "body": "I&#39;m pretty sure you can&#39;t do this.  The background isn&#39;t necessarily used with a scenario outline, so it can&#39;t know that you will have examples."}, {"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "reply_to_user": {"reputation": 38260, "user_id": 82118, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4ce1db5900dc701fa18c32d4d1ad047a?s=128&d=identicon&r=PG", "display_name": "Carl Manaster", "link": "https://stackoverflow.com/users/82118/carl-manaster"}, "edited": false, "score": 2, "creation_date": 1441851209, "post_id": 32468648, "comment_id": 52844238, "body": "@CarlManaster is right. Just move the line to your Scenario Outline."}, {"owner": {"reputation": 3349, "user_id": 1052126, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/afd895dc33968565ba96a2ad6bbc93b1?s=128&d=identicon&r=PG&f=1", "display_name": "fduff", "link": "https://stackoverflow.com/users/1052126/fduff"}, "reply_to_user": {"reputation": 38260, "user_id": 82118, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4ce1db5900dc701fa18c32d4d1ad047a?s=128&d=identicon&r=PG", "display_name": "Carl Manaster", "link": "https://stackoverflow.com/users/82118/carl-manaster"}, "edited": false, "score": 0, "creation_date": 1535526309, "post_id": 32468648, "comment_id": 91092443, "body": "I ran into similar issue today, quite annoying. @CarlManaster AFAIK <code>Background</code> is used for all scenarios, including <code>Scenario Outline</code>, see <a href=\"https://docs.cucumber.io/gherkin/reference/#background\" rel=\"nofollow noreferrer\">docs.cucumber.io/gherkin/reference/#background</a>."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 10818565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaUCs.jpg?s=128&g=1", "display_name": "lourdes", "link": "https://stackoverflow.com/users/10818565/lourdes"}, "is_accepted": false, "score": 1, "last_activity_date": 1616559566, "last_edit_date": 1616559566, "creation_date": 1616559257, "answer_id": 66774674, "question_id": 32468648, "link": "https://stackoverflow.com/questions/32468648/using-variable-with-background-in-cucumber/66774674#66774674", "title": "Using variable with Background in Cucumber", "body": "<p>The answer to your question is: no. Background is not a scenario outline. It does not take values from Examples, which is exclusively for the Scenario Outline where it is included.\nLet's suposse you have several Scenario Outlines. Each of them should have its own Examples sections and it is not shared between them. Consequently, it is not shared with Background either.\nThat is why it does not work when you move Examples before Scenario Outline, as you mentioned in your question.</p>\n"}], "owner": {"reputation": 653, "user_id": 2360287, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/igJMJ.png?s=128&g=1", "display_name": "RenaissanceProgrammer", "link": "https://stackoverflow.com/users/2360287/renaissanceprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2149, "favorite_count": 1, "answer_count": 1, "score": 7, "last_activity_date": 1616559566, "creation_date": 1441754191, "question_id": 32468648, "link": "https://stackoverflow.com/questions/32468648/using-variable-with-background-in-cucumber", "title": "Using variable with Background in Cucumber", "body": "<p>I'm trying to run a feature file like this:</p>\n\n<pre><code>Feature: my feature\n\nBackground:\n  When I do something\n  And I choose from a &lt;list&gt;\n\nScenario Outline: choice A\n  And I click on &lt;something&gt; after the choice A is clicked\n\nExamples:\n  | list | something |\n  |  a   |   1  |\n  |  b   |   2  |\n  |  c   |   3  |\n</code></pre>\n\n<p>But what happens is when the second Background step runs, in the step definition, <code>list</code> is a String with the value <code>&lt;list&gt;</code>, and the first Scenario line <code>something</code> is <code>1</code>, so can Background not use the variables from Examples? Putting a copy of Examples before Scenario Outline does not work. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "simple-form"], "comments": [{"owner": {"reputation": 2051, "user_id": 2359793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f7ce5d16560db19111463af1241b294?s=128&d=identicon&r=PG", "display_name": "rodamn", "link": "https://stackoverflow.com/users/2359793/rodamn"}, "edited": false, "score": 0, "creation_date": 1441753949, "post_id": 32468562, "comment_id": 52799040, "body": "Do any of the methods in the following post work? <a href=\"http://stackoverflow.com/questions/123078/how-do-i-validate-on-destroy-in-rails\" title=\"how do i validate on destroy in rails\">stackoverflow.com/questions/123078/&hellip;</a>"}, {"owner": {"reputation": 627, "user_id": 1915537, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q2U3D.jpg?s=128&g=1", "display_name": "Andrey Skuratovsky", "link": "https://stackoverflow.com/users/1915537/andrey-skuratovsky"}, "reply_to_user": {"reputation": 2051, "user_id": 2359793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f7ce5d16560db19111463af1241b294?s=128&d=identicon&r=PG", "display_name": "rodamn", "link": "https://stackoverflow.com/users/2359793/rodamn"}, "edited": false, "score": 0, "creation_date": 1441754391, "post_id": 32468562, "comment_id": 52799179, "body": "@rodamn if i call destroy on Physician, i think it will works by dependent: :destroy. But in my case, i don&#39;t calling destroy, but just calling save on model in controller #update action with set of ids."}], "answers": [{"comments": [{"owner": {"reputation": 627, "user_id": 1915537, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q2U3D.jpg?s=128&g=1", "display_name": "Andrey Skuratovsky", "link": "https://stackoverflow.com/users/1915537/andrey-skuratovsky"}, "edited": false, "score": 1, "creation_date": 1441756742, "post_id": 32468820, "comment_id": 52799748, "body": "yes, it helps, but callback method calls before_remove, not before_destroy"}], "tags": [], "owner": {"reputation": 715, "user_id": 1261158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6849c34a3862c8c5c3f9f515bbcbfa05?s=128&d=identicon&r=PG", "display_name": "pshoukry", "link": "https://stackoverflow.com/users/1261158/pshoukry"}, "is_accepted": true, "score": 3, "last_activity_date": 1441757045, "last_edit_date": 1441757045, "creation_date": 1441755527, "answer_id": 32468820, "question_id": 32468562, "link": "https://stackoverflow.com/questions/32468562/rails-4-association-validate-destroy/32468820#32468820", "title": "Rails 4 association validate destroy", "body": "<p>From the rails <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\" rel=\"nofollow\">documentation</a></p>\n\n<blockquote>\n  <p>Similar to the normal callbacks that hook into the life cycle of an\n  Active Record object, you can also define callbacks that get triggered\n  when you add an object to or remove an object from an association\n  collection.</p>\n</blockquote>\n\n<p>Example from Docs</p>\n\n<pre><code>class Project\n  has_and_belongs_to_many :developers, after_add: :evaluate_velocity\n\n  def evaluate_velocity(developer)\n    ...\n  end\nend\n</code></pre>\n\n<p>So in your particular scenario try</p>\n\n<pre><code>  has_many :patients, through: :appointments, before_remove :check_remove\n</code></pre>\n"}], "owner": {"reputation": 627, "user_id": 1915537, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q2U3D.jpg?s=128&g=1", "display_name": "Andrey Skuratovsky", "link": "https://stackoverflow.com/users/1915537/andrey-skuratovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 32468820, "answer_count": 1, "score": 2, "last_activity_date": 1441757045, "creation_date": 1441753545, "last_edit_date": 1441754961, "question_id": 32468562, "link": "https://stackoverflow.com/questions/32468562/rails-4-association-validate-destroy", "title": "Rails 4 association validate destroy", "body": "<p>I have two models with many-to-many association through third model.\nBy ex:</p>\n\n<pre><code>class Physician &lt; ActiveRecord::Base\n  has_many :appointments\n  has_many :patients, through: :appointments\nend\n\nclass Appointment &lt; ActiveRecord::Base\n  belongs_to :physician\n  belongs_to :patient\nend\n\nclass Patient &lt; ActiveRecord::Base\n  has_many :appointments\n  has_many :physicians, through: :appointments\nend\n</code></pre>\n\n<p>And using simple_form i have this checkbox set (Physician form):</p>\n\n<pre><code>...\n= f.association :patients, as: :check_boxes\n...\n</code></pre>\n\n<p>When i check some checkboxes, after save rails will create appointments in database.</p>\n\n<p>When i uncheck checkboxes, rails will destroy some unchecked appointments.</p>\n\n<p>So update will be eq to </p>\n\n<pre><code>physician.patient_ids = []\n</code></pre>\n\n<p>I want to validate appointments before delete. By example if appointments have some warnings, i want to show alert validation error on saving Physician form.</p>\n\n<p>So, i thought, maybe rails will call destroy method on appointments, and tried:</p>\n\n<pre><code>class Appointment &lt; ActiveRecord::Base\n\nbefore_destroy :check_destroy\nprivate\ndef check_destroy\n  raise 'you can not do it!'\nend\n</code></pre>\n\n<p>Nope, rails just removed appointments from database on save Physician.</p>\n\n<p>Maybe rails will use delete method? Then i tried this one:</p>\n\n<pre><code>  class Appointment &lt; ActiveRecord::Base\n  def delete\n    raise 'you can not do it!'\n  end\n</code></pre>\n\n<p>Nope, again.</p>\n\n<p>Seems to rails just remove join-association (appointment) straight from database.</p>\n\n<p>How to prevent it? I want to validate all appointments that will be deleted before saving Physician, and add error to Physician if some appointments can not be deleted.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "tdd", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 3240, "user_id": 155720, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b7d890bed68fa564c18ff00dfd8207cd?s=128&d=identicon&r=PG", "display_name": "KensoDev", "link": "https://stackoverflow.com/users/155720/kensodev"}, "is_accepted": true, "score": 1, "last_activity_date": 1441752651, "creation_date": 1441752651, "answer_id": 32468450, "question_id": 32468363, "link": "https://stackoverflow.com/questions/32468363/rspec-testing-uniqueness-on-a-has-many-through/32468450#32468450", "title": "Rspec - Testing uniqueness on a has_many through", "body": "<p><code>expect</code> with raise should be wrapped in a block</p>\n\n<pre><code>expect(@school.tags &lt;&lt; @tag1).to raise_error(ActiveRecord::RecordInvalid)\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>expect{@school.tags &lt;&lt; @tag1}.to raise_error(ActiveRecord::RecordInvalid)\n</code></pre>\n"}], "owner": {"reputation": 2953, "user_id": 1732998, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e3356e269b4dede3cfcb9c487527945c?s=128&d=identicon&r=PG", "display_name": "Jshoe523", "link": "https://stackoverflow.com/users/1732998/jshoe523"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 32468450, "answer_count": 1, "score": 1, "last_activity_date": 1441754212, "creation_date": 1441751951, "last_edit_date": 1495535194, "question_id": 32468363, "link": "https://stackoverflow.com/questions/32468363/rspec-testing-uniqueness-on-a-has-many-through", "title": "Rspec - Testing uniqueness on a has_many through", "body": "<p>I'm trying to test that a model can have many values but not duplicate values.</p>\n\n<p>I have the following models: school, tag, school_tag. A school can have many tags, and a tag can belong to many schools. An example tag, 'Art', 'Science', 'Math', etc.</p>\n\n<pre><code>class School\n  has_many :school_tags, dependent: :destroy\n  has_many :tags, through: :school_tags\nend\n\nclass Tag\n  has_many :school_tags, dependent: :destroy\n  has_many :schools, through: :school_tags\nend\n\nclass SchoolTag &lt; ActiveRecord::Base\n  belongs_to :tag, foreign_key: 'tag_id'\n  belongs_to :school, foreign_key: 'school_id'\n\n  validates_uniqueness_of :tag_id, scope: :school_id, message: 'has already been assigned to this school'\nend\n</code></pre>\n\n<p>My current test is below. It adds some valid tags first, but then tries to add a tag that's already been added to that collection. </p>\n\n<pre><code>before(:each) do\n  @school = FactoryGirl.create(:school)\n  @tag1 = FactoryGirl.create(:tag) #creates \"Test1\"\n  @tag2 = FactoryGirl.create(:tag) #creates \"Test2\"\nend\n\nit 'can have multiple tags but not duplicates' do\n    @school.tags &lt;&lt; @tag1\n    @school.tags &lt;&lt; @tag2\n    expect(@school.save).to be(true) #works\n    expect(@school.tags.count).to eq(2) #works\n\n    #FAILS\n    expect(@school.tags &lt;&lt; @tag1).to raise_error(ActiveRecord::RecordInvalid)\n    expect(@school.tags.count).to eq(2)\nend\n</code></pre>\n\n<p>The part where it fails is here:</p>\n\n<pre><code>expect(@school.tags &lt;&lt; @tag1).to raise_error(ActiveRecord::RecordInvalid)\n</code></pre>\n\n<p>This is the error I get back:</p>\n\n<pre><code>Failure/Error: expect(@school.tags &lt;&lt; @tag1).to raise_error(ActiveRecord::RecordInvalid)\n     ActiveRecord::RecordInvalid:\n       Validation failed: Schooltype has already been assigned\n</code></pre>\n\n<p>Does it have anything to do with using <code>&lt;&lt;</code>? How would I go about testing this?</p>\n\n<p><strong>ANSWER:</strong> \nAside from the selected answer below, here is a reference to another question explaining why this happens</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21567838/when-to-use-curly-braces-vs-parenthesis-in-expect-rspec-method\">When to use curly braces vs parenthesis in expect Rspec method?</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 369, "user_id": 4448106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54ae8f4e579793d0fd30fa8bb8b99298?s=128&d=identicon&r=PG&f=1", "display_name": "Catherine Cai", "link": "https://stackoverflow.com/users/4448106/catherine-cai"}, "edited": false, "score": 2, "creation_date": 1441751658, "post_id": 32468250, "comment_id": 52798419, "body": "This. Rails convention always, always, always. Don&#39;t go against the grain. I&#39;ve been fighting against Rails convention and life becomes very hard for you if you attempt to do that, especially in regards to database stuff."}], "tags": [], "owner": {"reputation": 700, "user_id": 867754, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07f80005671d9913ec398f669897b908?s=128&d=identicon&r=PG", "display_name": "teubanks", "link": "https://stackoverflow.com/users/867754/teubanks"}, "is_accepted": true, "score": 2, "last_activity_date": 1441751280, "creation_date": 1441751280, "answer_id": 32468250, "question_id": 32468186, "link": "https://stackoverflow.com/questions/32468186/changing-schema-incrementally-with-monolithic-migrations/32468250#32468250", "title": "Changing schema incrementally with &quot;monolithic&quot; migrations", "body": "<p>This is madness. Don't go against the grain >:D</p>\n\n<p>Seriously though, why would you want that when you could use <code>git</code> to see a snapshot of your <code>schema.rb</code> at any given time?</p>\n\n<p>As an aside, what we typically do (we as in every company I've worked for so far) is delete all of our old migrations after a certain point. Ex, in March of this year, I wiped out all migrations older than January 2015.</p>\n"}], "owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 32468250, "answer_count": 1, "score": 2, "last_activity_date": 1441762655, "creation_date": 1441750868, "last_edit_date": 1441762655, "question_id": 32468186, "link": "https://stackoverflow.com/questions/32468186/changing-schema-incrementally-with-monolithic-migrations", "title": "Changing schema incrementally with &quot;monolithic&quot; migrations", "body": "<p>I'm in in a development environment, and though I understand migrations, I'm beginning to want (just because it seems more fun) to define my changes in a monolithic schema file that shows what I want the whole schema to be (not <code>schema.rb</code>, but maybe a migration file) instead of creating small, incremental changes through migrations. The only thing I can think of would be write migrations as normal, but have every migration dump all tables and re-create them the way I want them. Is this madness?</p>\n\n<p>I've had a look at the rails guide Active Record Migrations and I've done some searching around. It seems like I'm going against the grain and should just define incremental migrations. I should not be messing with <code>schema.rb</code> and then using <code>rake db:schema:load</code> because that's intended for deployment only, correct?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rubygems", "bundler", "ffi"], "comments": [{"owner": {"reputation": 2273, "user_id": 355981, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gTs06.jpg?s=128&g=1", "display_name": "Micah Alcorn", "link": "https://stackoverflow.com/users/355981/micah-alcorn"}, "edited": false, "score": 0, "creation_date": 1441747442, "post_id": 32466965, "comment_id": 52796939, "body": "My app is still quite simple so I created a new one with all of the same code and I no longer have this problem. I would still love to know what causes this or how to resolve it. In the future it may not be feasible to re-create the app."}], "answers": [{"tags": [], "owner": {"reputation": 3069, "user_id": 1265528, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0ce6dbaecbb9ba6b561571e51e2b4a0a?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1265528/james"}, "is_accepted": false, "score": 5, "last_activity_date": 1451033544, "creation_date": 1451033544, "answer_id": 34461426, "question_id": 32466965, "link": "https://stackoverflow.com/questions/32466965/could-not-find-ffi-in-any-of-the-sources/34461426#34461426", "title": "Could not find ffi in any of the sources", "body": "<p>I ran into this same error just now, solved with <code>gem pristine --all</code></p>\n"}], "owner": {"reputation": 2273, "user_id": 355981, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/gTs06.jpg?s=128&g=1", "display_name": "Micah Alcorn", "link": "https://stackoverflow.com/users/355981/micah-alcorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5278, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1451033544, "creation_date": 1441745206, "question_id": 32466965, "link": "https://stackoverflow.com/questions/32466965/could-not-find-ffi-in-any-of-the-sources", "title": "Could not find ffi in any of the sources", "body": "<p>On OS X 10.9.5...</p>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '4.2.0'\ngem 'sass-rails', '5.0.4'\ngem 'uglifier', '2.7.2'\ngem 'coffee-rails', '4.1.0'\ngem 'jquery-rails', '4.0.5'\ngem 'turbolinks', '2.5.3'\ngem 'jbuilder', '2.3.1'\ngem 'sdoc', '0.4.1', group: :doc\ngem 'mongoid', '4.0.2'\ngem 'mongoid-grid_fs', '2.1.0'\ngem 'watir-rails', '1.1.0'\n\ngroup :development, :test do\n  gem 'byebug', '6.0.2'\n  gem 'web-console', '2.2.1'\n  gem 'spring', '1.3.6'\nend\n</code></pre>\n\n<p><strong>Terminal</strong></p>\n\n<pre><code>$ bundle install\n...\nInstalling ffi 1.9.10 with native extensions\n...\nBundle complete! 14 Gemfile dependencies, 68 gems now installed.\nUse `bundle show [gemname]` to see where a bundled gem is installed.\n$ bundle show ffi\n/Users/me/.rvm/gems/ruby-2.2.2/gems/ffi-1.9.10\n$ rails c\nCould not find ffi-1.9.10 in any of the sources\nRun `bundle install` to install missing gems\n</code></pre>\n\n<p>I tried placing \"gem 'ffi', '1.9.10'\" in my Gemfile.</p>\n\n<p>I tried removing my Gemfile.lock and repeating this process.</p>\n\n<p>I tried <code>bundle exec rails c</code>.</p>\n\n<p>I tried <code>gem install ffi --version 1.0.11</code>, which seems to be the dependency for childprocess-0.5.6.</p>\n\n<p>None of these attempts make any difference. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 47230, "user_id": 288032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c0dd04beb96268a1d27e0e86366e5dba?s=128&d=identicon&r=PG", "display_name": "cwd", "link": "https://stackoverflow.com/users/288032/cwd"}, "edited": false, "score": 0, "creation_date": 1441821443, "post_id": 32466856, "comment_id": 52833328, "body": "Thank you! Can you elaborate on what you mean by, &quot;just define a gemspec template to be your default&quot; ?"}], "tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": false, "score": 3, "last_activity_date": 1441827344, "last_edit_date": 1441827344, "creation_date": 1441744815, "answer_id": 32466856, "question_id": 32466686, "link": "https://stackoverflow.com/questions/32466686/how-can-i-make-bundle-init-include-gems-by-default/32466856#32466856", "title": "How can I make &#39;bundle init&#39; include gems by default?", "body": "<blockquote>\n<pre><code>bundle init\n</code></pre>\n  \n  <p>Generates a Gemfile into the current working directory</p>\n\n<pre><code>$ bundle init [--gemspec=FILE]\n</code></pre>\n  \n  <p>Options:</p>\n  \n  <p><code>--gemspec</code>: Use the specified .gemspec to create the Gemfile Init\n  generates a default Gemfile in the current working directory. When\n  adding a Gemfile to a gem with a gemspec, the --gemspec option will\n  automatically add each dependency listed in the gemspec file to the\n  newly created <strong>Gemfile</strong>.</p>\n</blockquote>\n\n<p>All that <code>bundle init</code> does is to generate a <strong>Gemfile</strong> from a template, a <strong>gemspec</strong>.</p>\n\n<p>If you want to have a default gem list, just define a <strong>gemspec</strong> template as use it as your <strong>'default'</strong>.</p>\n\n<p>And then just use it like</p>\n\n<pre><code>$ bundle init --gemspec=~/.default\n</code></pre>\n\n<p>You can even define an alias for it</p>\n\n<pre><code>#note the lack of a space in the alias name\n$ alias bundleinit='bundle init --gemspec=~/.default' \n</code></pre>\n\n<p>And then use it like</p>\n\n<pre><code>$ bundleinit\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 4, "last_activity_date": 1441745209, "last_edit_date": 1441745209, "creation_date": 1441744851, "answer_id": 32466870, "question_id": 32466686, "link": "https://stackoverflow.com/questions/32466686/how-can-i-make-bundle-init-include-gems-by-default/32466870#32466870", "title": "How can I make &#39;bundle init&#39; include gems by default?", "body": "<p>You've got the right idea.  I've got a template I like to use too, it looks like this: </p>\n\n<p>~/.gemspec_template</p>\n\n<pre><code>Gem::Specification.new do |spec|\n  spec.add_development_dependency \"bundler\", \"~&gt; 1.7\"\n  spec.add_development_dependency \"rake\", \"~&gt; 10.0\"\n  spec.add_development_dependency \"pry\"\nend\n</code></pre>\n\n<p>From there, I just run:</p>\n\n<pre><code>bundle init --gemspec=~/.gemspec_template \n</code></pre>\n\n<p>I get a <code>Gemfile</code> that looks like:</p>\n\n<pre><code># Generated from /Users/anthonyross/.gemspec_template\nsource 'https://rubygems.org'\n\ngroup :development do\n  gem \"bundler\", \"~&gt; 1.7\"\n  gem \"rake\", \"~&gt; 10.0\"\n  gem \"pry\", \"&gt;= 0\"\nend\n</code></pre>\n"}], "owner": {"reputation": 47230, "user_id": 288032, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c0dd04beb96268a1d27e0e86366e5dba?s=128&d=identicon&r=PG", "display_name": "cwd", "link": "https://stackoverflow.com/users/288032/cwd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 2, "accepted_answer_id": 32466870, "answer_count": 2, "score": 5, "last_activity_date": 1441827344, "creation_date": 1441744153, "question_id": 32466686, "link": "https://stackoverflow.com/questions/32466686/how-can-i-make-bundle-init-include-gems-by-default", "title": "How can I make &#39;bundle init&#39; include gems by default?", "body": "<p>When I run <code>bundle init</code> to start a new project I get a standard Gemfile:</p>\n\n<pre><code># A sample Gemfile\nsource \"https://rubygems.org\"\n\n# gem \"rails\"\n</code></pre>\n\n<p><strong>How can I customize this?</strong></p>\n\n<p>My goal is to have a few <code>gems</code> that I use with almost every project included by default.</p>\n\n<p>I see on the <a href=\"http://bundler.io/v1.10/bundle_init.html\" rel=\"noreferrer\">bundle init</a> documentation that it can be used with a <code>--gemspec=FILE</code> option, but is there a way to customize the default version that appears when just using <code>bundle init</code> ?</p>\n"}, {"tags": ["ruby", "gem", "bundler", "libxml2"], "comments": [{"owner": {"reputation": 10619, "user_id": 80434, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/54f7e39b54c125b935a516ef080fcb94?s=128&d=identicon&r=PG", "display_name": "Korayem", "link": "https://stackoverflow.com/users/80434/korayem"}, "edited": false, "score": 0, "creation_date": 1547253968, "post_id": 32466606, "comment_id": 95142519, "body": "I solved this by running  <code>gem install libxml-ruby -v &#39;3.0.0&#39; -- --with-xml2-config=&#47;usr&#47;local&#47;opt&#47;libxml2&#47;bin&#47;xml2-config --with-xml2-dir=&#47;usr&#47;local&#47;opt&#47;libxml2 --with-xml2-lib=&#47;usr&#47;local&#47;opt&#47;libxml2&#47;lib --with-xml2-include=&#47;usr&#47;local&#47;opt&#47;libxml2&#47;include</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1860, "user_id": 3802981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d86e79492fa8d2a89f583b8f7b8f398f?s=128&d=identicon&r=PG", "display_name": "Ch&#226;u H\u1ed3ng L\u0129nh", "link": "https://stackoverflow.com/users/3802981/ch%c3%a2u-h%e1%bb%93ng-l%c4%a9nh"}, "is_accepted": false, "score": 2, "last_activity_date": 1466141707, "creation_date": 1466141707, "answer_id": 37873850, "question_id": 32466606, "link": "https://stackoverflow.com/questions/32466606/why-arent-gem-and-bundle-using-the-same-libxml2/37873850#37873850", "title": "Why aren&#39;t &quot;gem&quot; and &quot;bundle&quot; using the same libxml2?", "body": "<p>On my Mac OS X, I ran these commands, and the problem is fixed.</p>\n\n<pre><code>brew unlink gcc-4.2      # you might not need this step\ngem uninstall nokogiri\nxcode-select --install\ngem install nokogiri\n</code></pre>\n"}], "owner": {"reputation": 17178, "user_id": 61592, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/55ff1426273f950b43135f619d025476?s=128&d=identicon&r=PG", "display_name": "Todd R", "link": "https://stackoverflow.com/users/61592/todd-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1547251645, "creation_date": 1441743806, "question_id": 32466606, "link": "https://stackoverflow.com/questions/32466606/why-arent-gem-and-bundle-using-the-same-libxml2", "title": "Why aren&#39;t &quot;gem&quot; and &quot;bundle&quot; using the same libxml2?", "body": "<p>I seem to be in a recursive loop of frustration. I'm trying to \"bundle install\" a project, but it results in:</p>\n\n<pre><code>An error occurred while installing nokogiri (1.6.6.2), and Bundler cannot continue.\nMake sure that `gem install nokogiri -v '1.6.6.2'` succeeds before bundling.\n</code></pre>\n\n<p>So I try that:</p>\n\n<pre><code>$ gem install nokogiri -v '1.6.6.2'\nBuilding native extensions.  This could take a while...\nSuccessfully installed nokogiri-1.6.6.2\nParsing documentation for nokogiri-1.6.6.2\nDone installing documentation for nokogiri after 2 seconds\n1 gem installed\n</code></pre>\n\n<p>All good! Except that when I run \"bundle install\", I am again told I need to get \"gem install nokogiri -v '1.6.6.2'\" to install first. AHHHHH.</p>\n\n<p>The mkmf.log file suggests this is an issue with libxml2 (surprise surprise). </p>\n\n<pre><code>conftest.c:3:10: fatal error: 'libxml/xmlversion.h' file not found\n#include &lt;libxml/xmlversion.h&gt;\n         ^\n1 error generated.\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: #include &lt;libxml/xmlversion.h&gt;\n4: \n5: #if LIBXML_VERSION &lt; 20621\n6: #error libxml2 is way too old\n7: #endif\n/* end */\n</code></pre>\n\n<p>So, searching for libxml2 (with \"sudo find / -name libxml2\") reveals these directories, all of which appear to be at least 2.9.0 or higher:</p>\n\n<ul>\n<li>/usr/include/libxml2 </li>\n<li>/usr/local/Cellar/libxml2 </li>\n<li>/usr/local/opt/libxml2</li>\n</ul>\n\n<p>So, is the issue that libxml2 can't be found? And if so, how do I get bundle install to realize that nokogiri is already installed, or at least be able to install it the same way \"gem install\" does? While I'd like to find a solution for this, I'm really interested in learning what is going on \"under the covers\" so I can troubleshoot in the future.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "minitest"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 3, "creation_date": 1441745858, "post_id": 32466534, "comment_id": 52796209, "body": "How are you running your tests? MiniTest usually runs against the <code>&#47;test</code> directory and RSpec usually likes the <code>&#47;spec</code> directory. Can you show us what command you are running?"}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1441766369, "post_id": 32466534, "comment_id": 52801955, "body": "Thanks for the reply engineersmnky, I run <code>rake test</code> and then <code>rspec spec</code>"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 696, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1441766396, "creation_date": 1441743504, "last_edit_date": 1441766396, "question_id": 32466534, "link": "https://stackoverflow.com/questions/32466534/can-i-use-both-rspec-and-minitest-rails-for-testing-my-rails-app-at-the-same-tim", "title": "Can I use both Rspec and Minitest Rails for testing my Rails app at the same time?", "body": "<p>Just like what the title says. I have an application where 99% of all my code is tested by rails-minitest. However, I tehe 1% code that is being tested by rspec is a rake task that I want to implement. I chose rspec because there was a lot more support, how to's, blogs, and resources for testing rake tasks with rspec as opposed to minitest-rails.</p>\n\n<p>Right now I can run rspec to test my task but minitest can't be run anymore.</p>\n\n<p>I get this error:</p>\n\n<pre><code>NoMethodError: undefined method `setup' for RSpec::ExampleGroups::ApplicationController::TestController:Class\n</code></pre>\n\n<p>Is there a way I can do both?</p>\n\n<p>--------Update------</p>\n\n<p>The commands are basic <code>rake test</code> and <code>rspec spec</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1441741363, "post_id": 32465812, "comment_id": 52793841, "body": "Looks like it deployed successfully."}, {"owner": {"reputation": 143, "user_id": 4250440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EKuVW.jpg?s=128&g=1", "display_name": "thunderRX5", "link": "https://stackoverflow.com/users/4250440/thunderrx5"}, "reply_to_user": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "edited": false, "score": 0, "creation_date": 1441741578, "post_id": 32465812, "comment_id": 52793947, "body": "@Daiku, sorry I forgot.  Now I added errors message."}, {"owner": {"reputation": 143, "user_id": 4250440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EKuVW.jpg?s=128&g=1", "display_name": "thunderRX5", "link": "https://stackoverflow.com/users/4250440/thunderrx5"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1441741740, "post_id": 32465812, "comment_id": 52794030, "body": "@infused, yes you are right I feel it should work"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4250440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EKuVW.jpg?s=128&g=1", "display_name": "thunderRX5", "link": "https://stackoverflow.com/users/4250440/thunderrx5"}, "edited": false, "score": 0, "creation_date": 1441742380, "post_id": 32466062, "comment_id": 52794437, "body": "Oh got it. Now it is solved after testing.  Thank you!  I wonder, how did you figure out one mistake since huge errors messages via console?"}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "reply_to_user": {"reputation": 143, "user_id": 4250440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EKuVW.jpg?s=128&g=1", "display_name": "thunderRX5", "link": "https://stackoverflow.com/users/4250440/thunderrx5"}, "edited": false, "score": 0, "creation_date": 1441742442, "post_id": 32466062, "comment_id": 52794474, "body": "Eye of experienced developer can fast find lines like that <code>2015-09-08T19:35:45.812916+00:00 app[web.1]: &#47;app&#47;app&#47;mailers&#47;contact_mailer.rb:1:in &#39;&lt;top (required)&gt;&#39;: uninitialized constant ActiveMailer (NameError)</code> ;)"}, {"owner": {"reputation": 143, "user_id": 4250440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EKuVW.jpg?s=128&g=1", "display_name": "thunderRX5", "link": "https://stackoverflow.com/users/4250440/thunderrx5"}, "edited": false, "score": 0, "creation_date": 1441742770, "post_id": 32466062, "comment_id": 52794681, "body": "Yes, clearly that&#39;s something else not deploying issues but ActiveMailer, lol. I will remember that next time."}], "tags": [], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "is_accepted": true, "score": 2, "last_activity_date": 1441741686, "creation_date": 1441741686, "answer_id": 32466062, "question_id": 32465812, "link": "https://stackoverflow.com/questions/32465812/deploying-to-heroku-still-doesnt-work-after-fixing/32466062#32466062", "title": "Deploying to Heroku still doesn&#39;t work after fixing", "body": "<p>You need to change <code>class ContactMailer &lt; ActiveMailer::Base</code> to</p>\n\n<pre><code>class ContactMailer &lt; ActionMailer::Base\n</code></pre>\n\n<p>in your <code>/app/app/mailers/contact_mailer.rb</code> and anywhere in your rails app. There isn't class <code>ActiveMailer</code>, just <code>ActionMailer</code></p>\n"}], "owner": {"reputation": 143, "user_id": 4250440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/EKuVW.jpg?s=128&g=1", "display_name": "thunderRX5", "link": "https://stackoverflow.com/users/4250440/thunderrx5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 32466062, "answer_count": 1, "score": 1, "last_activity_date": 1441851549, "creation_date": 1441740804, "last_edit_date": 1441851549, "question_id": 32465812, "link": "https://stackoverflow.com/questions/32465812/deploying-to-heroku-still-doesnt-work-after-fixing", "title": "Deploying to Heroku still doesn&#39;t work after fixing", "body": "<p>Regarding deploying issues, I have been through this same errors since almost 2 days and google numerous times but still no results, I pushed app to Heroku and  add Procfile to use Puma server instead Webrick.  And then I updated ruby version to 2.0.0 due to Heroku's requirements.  I had successfully run first app with sqlite3 before but how come error at this time? I would appreciate to get your help.  </p>\n\n<p>Please see below: </p>\n\n<p>Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\nruby '2.0.0'\n\ngem 'rails', '4.2.4'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'bootstrap-sass', '~&gt; 3.3.5'\ngem 'font-awesome-sass', '~&gt; 4.4.0'\ngem 'pry', '~&gt; 0.10.1'\ngem 'puma'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\ngroup :development, :test do\n  gem 'sqlite3', '~&gt; 1.3.10'\n  gem 'byebug'\nend\n\ngroup :production do\n  gem 'pg', '~&gt; 0.18.3'\n  gem 'rails_12factor', '~&gt; 0.0.3'\nend\n\ngroup :development do\n  gem 'web-console', '~&gt; 2.0'\n  gem 'spring'\nend\n</code></pre>\n\n<p>database.yml:</p>\n\n<pre><code># SQLite version 3.x\n#   gem install sqlite3\n#\n#   Ensure the SQLite 3 gem is defined in your Gemfile\n#   gem 'sqlite3'\n#\ndefault: &amp;default\n  adapter: sqlite3\n  pool: 5\n  timeout: 5000\n\ndevelopment:\n  &lt;&lt;: *default\n  database: db/development.sqlite3\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  &lt;&lt;: *default\n  database: db/test.sqlite3\n\nproduction:\n  &lt;&lt;: *default\n  database: db/production.sqlite3\n</code></pre>\n\n<p>console:</p>\n\n<pre><code>Salmans-iMac:simple_saas salmanRT15$ git push heroku master\nCounting objects: 3, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (3/3), done.\nWriting objects: 100% (3/3), 318 bytes | 0 bytes/s, done.\nTotal 3 (delta 2), reused 0 (delta 0)\nremote: Compressing source files... done.\nremote: Building source:\nremote: \nremote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote: -----&gt; Using Ruby version: ruby-2.0.0\nremote: -----&gt; Installing dependencies using bundler 1.9.7\nremote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\nremote:        Rubygems 2.0.14 is not threadsafe, so your gems must be installed one at a time. Upgrade to Rubygems 2.1.0 or higher to enable parallel gem installation.\nremote:        Using rake 10.4.2\nremote:        Using i18n 0.7.0\nremote:        Using json 1.8.3\nremote:        Using minitest 5.8.0\nremote:        Using thread_safe 0.3.5\nremote:        Using tzinfo 1.2.2\nremote:        Using activesupport 4.2.4\nremote:        Using builder 3.2.2\nremote:        Using erubis 2.7.0\nremote:        Using mini_portile 0.6.2\nremote:        Using nokogiri 1.6.6.2\nremote:        Using rails-deprecated_sanitizer 1.0.3\nremote:        Using rails-dom-testing 1.0.7\nremote:        Using loofah 2.0.3\nremote:        Using rails-html-sanitizer 1.0.2\nremote:        Using actionview 4.2.4\nremote:        Using rack 1.6.4\nremote:        Using rack-test 0.6.3\nremote:        Using actionpack 4.2.4\nremote:        Using globalid 0.3.6\nremote:        Using activejob 4.2.4\nremote:        Using mime-types 2.6.1\nremote:        Using mail 2.6.3\nremote:        Using actionmailer 4.2.4\nremote:        Using activemodel 4.2.4\nremote:        Using arel 6.0.3\nremote:        Using activerecord 4.2.4\nremote:        Using execjs 2.6.0\nremote:        Using autoprefixer-rails 6.0.2\nremote:        Using sass 3.4.18\nremote:        Using bootstrap-sass 3.3.5.1\nremote:        Using coderay 1.1.0\nremote:        Using coffee-script-source 1.9.1.1\nremote:        Using coffee-script 2.4.1\nremote:        Using thor 0.19.1\nremote:        Using railties 4.2.4\nremote:        Using coffee-rails 4.1.0\nremote:        Using font-awesome-sass 4.4.0\nremote:        Using multi_json 1.11.2\nremote:        Using jbuilder 2.3.1\nremote:        Using jquery-rails 4.0.5\nremote:        Using method_source 0.8.2\nremote:        Using pg 0.18.3\nremote:        Using slop 3.6.0\nremote:        Using pry 0.10.1\nremote:        Using puma 2.13.4\nremote:        Using bundler 1.9.7\nremote:        Using sprockets 3.3.4\nremote:        Using sprockets-rails 2.3.3\nremote:        Using rails 4.2.4\nremote:        Using rails_serve_static_assets 0.0.4\nremote:        Using rails_stdout_logging 0.0.4\nremote:        Using rails_12factor 0.0.3\nremote:        Using rdoc 4.2.0\nremote:        Using tilt 2.0.1\nremote:        Using sass-rails 5.0.4\nremote:        Using sdoc 0.4.1\nremote:        Using turbolinks 2.5.3\nremote:        Using uglifier 2.7.2\nremote:        Bundle complete! 18 Gemfile dependencies, 59 gems now installed.\nremote:        Gems in the groups development and test were not installed.\nremote:        Bundled gems are installed into ./vendor/bundle.\nremote:        Bundle completed (0.80s)\nremote:        Cleaning up the bundler cache.\nremote: -----&gt; Preparing app for Rails asset pipeline\nremote:        Running: rake assets:precompile\nremote:        Asset precompilation completed (3.10s)\nremote:        Cleaning assets\nremote:        Running: rake assets:clean\nremote: \nremote: -----&gt; Discovering process types\nremote:        Procfile declares types -&gt; web\nremote:        Default types for Ruby  -&gt; console, rake, worker\nremote: \nremote: -----&gt; Compressing... done, 31.7MB\nremote: -----&gt; Launching... done, v10\nremote:        https://afternoon-wildwood-4552.herokuapp.com/ deployed to Heroku\nremote: \nremote: Verifying deploy.... done.\n</code></pre>\n\n<p>Migration :</p>\n\n<pre><code>Salmans-iMac:simple_saas salmanRT15$ heroku run rake db:migrate\nRunning `rake db:migrate` attached to terminal... up, run.9334\n  ActiveRecord::SchemaMigration Load (1.1ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n</code></pre>\n\n<p>Errors:</p>\n\n<pre><code>Salmans-iMac:simple_saas salmanRT15$ heroku logs --tail\n2015-09-08T18:39:55.482641+00:00 app[web.1]:    from /app/config.ru:in `new'\n2015-09-08T18:39:55.482642+00:00 app[web.1]:    from /app/config.ru:in `&lt;main&gt;'\n2015-09-08T18:39:55.482647+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `new_from_string'\n2015-09-08T18:39:55.482644+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `eval'\n2015-09-08T18:39:55.482649+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:40:in `parse_file'\n2015-09-08T18:39:55.482650+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:299:in `build_app_and_options_from_config'\n2015-09-08T18:39:55.482660+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:208:in `app'\n2015-09-08T18:39:55.482661+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/server.rb:61:in `app'\n2015-09-08T18:39:55.482666+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:272:in `start'\n2015-09-08T18:39:55.482665+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n2015-09-08T18:39:55.482668+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/server.rb:80:in `start'\n2015-09-08T18:39:55.482669+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n2015-09-08T18:39:55.482671+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2015-09-08T18:39:55.482674+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `server'\n2015-09-08T18:39:55.482676+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2015-09-08T18:39:55.482677+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2015-09-08T18:39:55.482681+00:00 app[web.1]:    from bin/rails:8:in `require'\n2015-09-08T18:39:55.482682+00:00 app[web.1]:    from bin/rails:8:in `&lt;main&gt;'\n2015-09-08T18:39:56.256256+00:00 heroku[web.1]: Process exited with status 1\n2015-09-08T18:39:56.265441+00:00 heroku[web.1]: State changed from starting to crashed\n2015-09-08T18:51:48.266869+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=afternoon-wildwood-4552.herokuapp.com request_id=852f1588-388a-4c5d-80bc-8942b0b9fe23 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T18:51:48.572914+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=afternoon-wildwood-4552.herokuapp.com request_id=c91a2e08-1b02-4cb9-9c04-f0163c97d33f fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T18:51:53.413318+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/about\" host=afternoon-wildwood-4552.herokuapp.com request_id=290f453d-d0bd-45fe-a03a-85c470e898c0 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T18:51:53.582682+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=afternoon-wildwood-4552.herokuapp.com request_id=cd60a7c9-65b9-481d-8074-dfbea8db4774 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T18:52:49.199959+00:00 heroku[api]: Starting process with command `bundle exec rake db`\n2015-09-08T18:52:54.293561+00:00 heroku[run.1272]: Awaiting client\n2015-09-08T18:52:54.332011+00:00 heroku[run.1272]: Starting process with command `bundle exec rake db`\n2015-09-08T18:52:54.759690+00:00 heroku[run.1272]: State changed from starting to up\n2015-09-08T18:52:59.020288+00:00 heroku[run.1272]: Process exited with status 0\n2015-09-08T18:52:59.032621+00:00 heroku[run.1272]: State changed from up to complete\n2015-09-08T18:53:14.892087+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate`\n2015-09-08T18:53:18.765194+00:00 heroku[run.9334]: Awaiting client\n2015-09-08T18:53:18.792442+00:00 heroku[run.9334]: Starting process with command `bundle exec rake db:migrate`\n2015-09-08T18:53:19.009934+00:00 heroku[run.9334]: State changed from starting to up\n2015-09-08T18:53:24.988697+00:00 heroku[run.9334]: State changed from up to complete\n2015-09-08T18:53:25.029574+00:00 heroku[run.9334]: Process exited with status 0\n2015-09-08T18:53:43.714497+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=afternoon-wildwood-4552.herokuapp.com request_id=17663d6d-f9c9-4d30-b06e-1d4a32f3c4b8 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T18:53:44.114785+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=afternoon-wildwood-4552.herokuapp.com request_id=137c9b11-1134-4828-b8d7-f6e8fe835c02 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T18:58:20.786629+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=afternoon-wildwood-4552.herokuapp.com request_id=216bad18-00e7-471f-9264-b210e3527a82 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T18:58:21.022480+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=afternoon-wildwood-4552.herokuapp.com request_id=c08e8936-08e8-4555-8698-7d0ed93d197f fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T19:16:39.726171+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=afternoon-wildwood-4552.herokuapp.com request_id=5f10e8c4-fc8f-41bb-89ef-6b882fd10177 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T19:16:39.490004+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=afternoon-wildwood-4552.herokuapp.com request_id=8e8c3ef6-c67a-4293-9b5f-bf45ee8d9786 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T19:22:39.381210+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=afternoon-wildwood-4552.herokuapp.com request_id=a1c8ad83-ac03-4e94-9db3-ff5070e0ea15 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T19:22:39.643243+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=afternoon-wildwood-4552.herokuapp.com request_id=a20aafc1-b844-4413-a0fa-2d2645534123 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T19:33:01.164800+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=afternoon-wildwood-4552.herokuapp.com request_id=81699222-7883-4467-9722-dcaeb015446a fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T19:33:01.410808+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=afternoon-wildwood-4552.herokuapp.com request_id=f9d4abe6-1d89-44c1-ad48-81f88ab0cd22 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T19:33:02.028240+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=afternoon-wildwood-4552.herokuapp.com request_id=c113fab8-e561-4e8a-b1b3-7b830269d3a0 fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T19:33:02.235582+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/favicon.ico\" host=afternoon-wildwood-4552.herokuapp.com request_id=c27540ae-6db4-4bf2-af69-3e0c49cfa1ac fwd=\"174.114.188.106\" dyno= connect= service= status=503 bytes=\n2015-09-08T19:35:38.651911+00:00 heroku[web.1]: State changed from crashed to starting\n2015-09-08T19:35:41.839066+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 12426`\n2015-09-08T19:35:45.128856+00:00 app[web.1]: =&gt; Run `rails server -h` for more startup options\n2015-09-08T19:35:45.128854+00:00 app[web.1]: =&gt; Rails 4.2.4 application starting in production on http://0.0.0.0:12426\n2015-09-08T19:35:45.128817+00:00 app[web.1]: =&gt; Booting Puma\n2015-09-08T19:35:45.128858+00:00 app[web.1]: =&gt; Ctrl-C to shutdown server\n2015-09-08T19:35:45.812085+00:00 app[web.1]: Exiting\n2015-09-08T19:35:45.812931+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/engine.rb:469:in `each'\n2015-09-08T19:35:45.812922+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/engine.rb:472:in `block (2 levels) in eager_load!'\n2015-09-08T19:35:45.812926+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/engine.rb:471:in `each'\n2015-09-08T19:35:45.812935+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/engine.rb:469:in `eager_load!'\n2015-09-08T19:35:45.812936+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/engine.rb:346:in `eager_load!'\n2015-09-08T19:35:45.812943+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/application/finisher.rb:56:in `block in &lt;module:Finisher&gt;'\n2015-09-08T19:35:45.812940+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/application/finisher.rb:56:in `each'\n2015-09-08T19:35:45.812929+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/engine.rb:471:in `block in eager_load!'\n2015-09-08T19:35:45.812916+00:00 app[web.1]: /app/app/mailers/contact_mailer.rb:1:in `&lt;top (required)&gt;': uninitialized constant ActiveMailer (NameError)\n2015-09-08T19:35:45.812948+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/initializable.rb:30:in `run'\n2015-09-08T19:35:45.812950+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/initializable.rb:55:in `block in run_initializers'\n2015-09-08T19:35:45.812953+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:150:in `block in tsort_each'\n2015-09-08T19:35:45.812959+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:219:in `each_strongly_connected_component_from'\n2015-09-08T19:35:45.812960+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:182:in `block in each_strongly_connected_component'\n2015-09-08T19:35:45.812964+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:180:in `each'\n2015-09-08T19:35:45.812955+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:183:in `block (2 levels) in each_strongly_connected_component'\n2015-09-08T19:35:45.812967+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:180:in `each_strongly_connected_component'\n2015-09-08T19:35:45.812945+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/initializable.rb:30:in `instance_exec'\n2015-09-08T19:35:45.812968+00:00 app[web.1]:    from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:148:in `tsort_each'\n2015-09-08T19:35:45.812972+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/initializable.rb:54:in `run_initializers'\n2015-09-08T19:35:45.812981+00:00 app[web.1]:    from /app/config.ru:3:in `require'\n2015-09-08T19:35:45.812976+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/application.rb:352:in `initialize!'\n2015-09-08T19:35:45.812979+00:00 app[web.1]:    from /app/config/environment.rb:5:in `&lt;top (required)&gt;'\n2015-09-08T19:35:45.812985+00:00 app[web.1]:    from /app/config.ru:3:in `block in &lt;main&gt;'\n2015-09-08T19:35:45.812987+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `instance_eval'\n2015-09-08T19:35:45.813023+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2015-09-08T19:35:45.813025+00:00 app[web.1]:    from /app/config.ru:in `new'\n2015-09-08T19:35:45.813029+00:00 app[web.1]:    from /app/config.ru:in `&lt;main&gt;'\n2015-09-08T19:35:45.813030+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `eval'\n2015-09-08T19:35:45.813035+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:40:in `parse_file'\n2015-09-08T19:35:45.813032+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `new_from_string'\n2015-09-08T19:35:45.813037+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:299:in `build_app_and_options_from_config'\n2015-09-08T19:35:45.813044+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n2015-09-08T19:35:45.813038+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:208:in `app'\n2015-09-08T19:35:45.813042+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/server.rb:61:in `app'\n2015-09-08T19:35:45.813052+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n2015-09-08T19:35:45.813047+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/rack-1.6.4/lib/rack/server.rb:272:in `start'\n2015-09-08T19:35:45.813049+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/server.rb:80:in `start'\n2015-09-08T19:35:45.813054+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2015-09-08T19:35:45.813057+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:75:in `server'\n2015-09-08T19:35:45.813063+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2015-09-08T19:35:45.813059+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2015-09-08T19:35:45.813064+00:00 app[web.1]:    from bin/rails:8:in `require'\n2015-09-08T19:35:45.813067+00:00 app[web.1]:    from bin/rails:8:in `&lt;main&gt;'\n2015-09-08T19:35:46.599863+00:00 heroku[web.1]: State changed from starting to crashed\n2015-09-08T19:35:46.591596+00:00 heroku[web.1]: Process exited with status 1\n</code></pre>\n"}, {"tags": ["ruby", "json", "api", "oauth-2.0", "etsy"], "answers": [{"tags": [], "owner": {"reputation": 3240, "user_id": 155720, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b7d890bed68fa564c18ff00dfd8207cd?s=128&d=identicon&r=PG", "display_name": "KensoDev", "link": "https://stackoverflow.com/users/155720/kensodev"}, "is_accepted": true, "score": 0, "last_activity_date": 1441752068, "creation_date": 1441752068, "answer_id": 32468386, "question_id": 32465643, "link": "https://stackoverflow.com/questions/32465643/what-params-need-to-be-sent-in-with-api-request/32468386#32468386", "title": "What Params need to be sent in with API request?", "body": "<p>You can use: <a href=\"https://github.com/kytrinyx/etsy\" rel=\"nofollow\">https://github.com/kytrinyx/etsy</a> in order to communicate with the API.</p>\n\n<p>If you want to work with RestClient and implement everything by yourself, look at the hooks <a href=\"https://github.com/rest-client/rest-client#hook\" rel=\"nofollow\">https://github.com/rest-client/rest-client#hook</a> on how you can sign the request with the access token and secret.</p>\n"}], "owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 32468386, "answer_count": 1, "score": 0, "last_activity_date": 1441752068, "creation_date": 1441740140, "last_edit_date": 1441743704, "question_id": 32465643, "link": "https://stackoverflow.com/questions/32465643/what-params-need-to-be-sent-in-with-api-request", "title": "What Params need to be sent in with API request?", "body": "<p>Hi am having some trouble sending my authenticated API request. I am trying to access the Etsy API. The access token has been obtained from a previous step.</p>\n\n<pre><code>access_token = \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" #obfuscated intentionally\naccess_secret = \"XXXXXXXXXX\" #obfuscated intentionally\n\nparams = {:params =&gt; {:access_token =&gt; access_token}}\nauth_result = JSON.parse(RestClient.get('https://openapi.etsy.com/v2/shops/MYSTORE/receipts', params))\n</code></pre>\n\n<p>It is coming back with a 400 error.</p>\n\n<p>I think it is the way I am sending in the authentication.\nIf anyone give me some guidance I would really appreciate it.</p>\n"}, {"tags": ["arrays", "ruby", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1441740777, "post_id": 32465078, "comment_id": 52793551, "body": "You can also just <code>x.sort_by(&amp;:keys)</code>, no need for <code>first</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441741038, "post_id": 32465078, "comment_id": 52793669, "body": "or: <code>x.sort_by { |h| h.first.first }</code>. For descending, in v2.2, you can do this: <code>x.max_by(x.size) { |h| h.first.first }</code>."}, {"owner": {"reputation": 19, "user_id": 5023202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89adfe294cfce69c2320050baca61741?s=128&d=identicon&r=PG&f=1", "display_name": "happy coder", "link": "https://stackoverflow.com/users/5023202/happy-coder"}, "edited": false, "score": 0, "creation_date": 1441869275, "post_id": 32465078, "comment_id": 52850537, "body": "Thanks everyone for the help, especially ndn!"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 6, "last_activity_date": 1441741586, "last_edit_date": 1441741586, "creation_date": 1441737976, "answer_id": 32465078, "question_id": 32465021, "link": "https://stackoverflow.com/questions/32465021/sort-an-array-in-ascending-and-descending-order-by-the-hash-keys-of-the-containi/32465078#32465078", "title": "sort an array in ascending and descending order by the hash keys of the containing elements in Ruby", "body": "<pre><code>x.sort_by(&amp;:keys)\n\nx.sort do |first_hash, second_hash|\n  second_hash.keys &lt;=&gt; first_hash.keys\nend\n</code></pre>\n\n<p>You have an array of hashes with one element. In the ascending case, you can just say that you want to order by the keys of the hashes. It will default to alphabetic comparison.</p>\n\n<p>For the descending case, you have to compare consecutive hashes with the <code>&lt;=&gt;</code> operator, which returns <code>-1</code> if <code>a&lt;b</code>, <code>0</code> in case of equality and <code>1</code> for <code>a&gt;b</code> (given <code>a &lt;=&gt; b</code>). We just swap the places of <code>a</code> and <code>b</code> to get descending order.</p>\n"}], "owner": {"reputation": 19, "user_id": 5023202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89adfe294cfce69c2320050baca61741?s=128&d=identicon&r=PG&f=1", "display_name": "happy coder", "link": "https://stackoverflow.com/users/5023202/happy-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 32465078, "answer_count": 1, "score": 1, "last_activity_date": 1441786963, "creation_date": 1441737730, "last_edit_date": 1441786963, "question_id": 32465021, "link": "https://stackoverflow.com/questions/32465021/sort-an-array-in-ascending-and-descending-order-by-the-hash-keys-of-the-containi", "title": "sort an array in ascending and descending order by the hash keys of the containing elements in Ruby", "body": "<p>The array is:</p>\n\n<pre><code>x= [{:dog=&gt; :dog}, {:ant=&gt; :ant}, {:cat=&gt; :cat}]\n</code></pre>\n\n<p>I was wondering if anyone could explain how to do this and what the end result for both orders would look like.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "bundler", "gemfile"], "answers": [{"comments": [{"owner": {"reputation": 837, "user_id": 329921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b559fa7e3fdd620222d18244c58f842c?s=128&d=identicon&r=PG", "display_name": "Craig Treptow", "link": "https://stackoverflow.com/users/329921/craig-treptow"}, "edited": false, "score": 0, "creation_date": 1441737577, "post_id": 32464895, "comment_id": 52791956, "body": "Ah, so &quot;depends on&quot; was the key phrase there."}, {"owner": {"reputation": 837, "user_id": 329921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b559fa7e3fdd620222d18244c58f842c?s=128&d=identicon&r=PG", "display_name": "Craig Treptow", "link": "https://stackoverflow.com/users/329921/craig-treptow"}, "edited": false, "score": 0, "creation_date": 1441737897, "post_id": 32464895, "comment_id": 52792126, "body": "Yes, it got me to the next set of errors, yet.  I can&#39;t accept an answer for a few more minutes."}], "tags": [], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "is_accepted": true, "score": 1, "last_activity_date": 1441737249, "creation_date": 1441737249, "answer_id": 32464895, "question_id": 32464856, "link": "https://stackoverflow.com/questions/32464856/error-upgrading-from-rails-3-2-22-to-rails-4-2-4/32464895#32464895", "title": "Error upgrading from Rails 3.2.22 to Rails 4.2.4", "body": "<p><code>vestal_versions</code> gem has dependency to <code>ActiveRecord 3.0</code>.</p>\n\n<p>You need to unspecify version of <code>vestal_versions</code> gem in your Gemfile, or specify to <code>2.0.0</code> and then:</p>\n\n<pre><code>bundle update rails vestal_versions\n</code></pre>\n"}], "owner": {"reputation": 837, "user_id": 329921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b559fa7e3fdd620222d18244c58f842c?s=128&d=identicon&r=PG", "display_name": "Craig Treptow", "link": "https://stackoverflow.com/users/329921/craig-treptow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 32464895, "answer_count": 1, "score": 5, "last_activity_date": 1441737249, "creation_date": 1441737088, "last_edit_date": 1441737184, "question_id": 32464856, "link": "https://stackoverflow.com/questions/32464856/error-upgrading-from-rails-3-2-22-to-rails-4-2-4", "title": "Error upgrading from Rails 3.2.22 to Rails 4.2.4", "body": "<p>I am trying to upgrade our app from Rails 3.2.22 to Rails 4.2.4 with Ruby 2.2.3.</p>\n\n<p>Here's what I've done so far:</p>\n\n<ol>\n<li>Modified Gemfile to specify <code>rails, \"~&gt; 4.2.4\"</code></li>\n<li><code>bundle</code></li>\n<li><code>bundle update rails</code></li>\n</ol>\n\n<p>The full transcript is below.</p>\n\n<p>ActiveRecord is not specified in our Gemfile, so I don't understand what has it locked or where to fix it?</p>\n\n<pre><code>Craigs-MacBook-Pro~/Work/mbc(master|\u2714) % git checkout -b rails-424\nSwitched to a new branch 'rails-424'\nCraigs-MacBook-Pro~/Work/mbc(rails-424|\u2714) % vim Gemfile\nCraigs-MacBook-Pro~/Work/mbc(rails-424|\u271a1) % bundle\nFetching gem metadata from https://rubygems.org/........\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nYou have requested:\n  rails ~&gt; 4.2.4\n\nThe bundle currently has rails locked at 3.2.22.\nTry running `bundle update rails`\nCraigs-MacBook-Pro~/Work/mbc(rails-424|\u271a1) % bundle update rails\nFetching gem metadata from https://rubygems.org/........\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nResolving dependencies............\nBundler could not find compatible versions for gem \"activerecord\":\n  In Gemfile:\n    activerecord (&lt; 4.3, &gt;= 3.1) ruby\n\n    activerecord (&lt; 5.0, &gt;= 3.0) ruby\n\n    vestal_versions (&gt;= 0) ruby depends on\n      activerecord (~&gt; 3.0) ruby\n\n    activerecord (&gt; 3.0.0) ruby\n\n    rails (~&gt; 4.2.4) ruby depends on\n      activerecord (= 4.2.4) ruby\nCraigs-MacBook-Pro~/Work/mbc(rails-424|\u271a1) % \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "e-commerce", "cart"], "comments": [{"owner": {"reputation": 1994, "user_id": 606907, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3aca05004a1c66695d2f22ffa69c0d2?s=128&d=identicon&r=PG", "display_name": "denys281", "link": "https://stackoverflow.com/users/606907/denys281"}, "edited": false, "score": 0, "creation_date": 1441741481, "post_id": 32464758, "comment_id": 52793895, "body": "Did you try to debug? <code>OrderItemsController#create</code> - <code>session[:order_id] = @order.id</code> is it work ? What value is on <code>session[:order_id]</code> in <code>application_controller#current_order</code>?"}, {"owner": {"reputation": 1994, "user_id": 606907, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3aca05004a1c66695d2f22ffa69c0d2?s=128&d=identicon&r=PG", "display_name": "denys281", "link": "https://stackoverflow.com/users/606907/denys281"}, "edited": false, "score": 0, "creation_date": 1441741750, "post_id": 32464758, "comment_id": 52794038, "body": "Maybe something with your browser?"}, {"owner": {"reputation": 395, "user_id": 5202744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IQA1P.png?s=128&g=1", "display_name": "Christine Cha", "link": "https://stackoverflow.com/users/5202744/christine-cha"}, "reply_to_user": {"reputation": 1994, "user_id": 606907, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3aca05004a1c66695d2f22ffa69c0d2?s=128&d=identicon&r=PG", "display_name": "denys281", "link": "https://stackoverflow.com/users/606907/denys281"}, "edited": false, "score": 0, "creation_date": 1441743816, "post_id": 32464758, "comment_id": 52795200, "body": "@denys281 doesn&#39;t seem like a browser issue, unfortunately. The value on session[:order_id] is current_order.id (see OrderItems Controller)"}, {"owner": {"reputation": 1994, "user_id": 606907, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3aca05004a1c66695d2f22ffa69c0d2?s=128&d=identicon&r=PG", "display_name": "denys281", "link": "https://stackoverflow.com/users/606907/denys281"}, "edited": false, "score": 0, "creation_date": 1441746059, "post_id": 32464758, "comment_id": 52796315, "body": "Did you debug current_order method?"}], "answers": [{"comments": [{"owner": {"reputation": 2310, "user_id": 1760776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06b0ee4ca4d278a813cadb1e0735b7?s=128&d=identicon&r=PG", "display_name": "tgf", "link": "https://stackoverflow.com/users/1760776/tgf"}, "reply_to_user": {"reputation": 395, "user_id": 5202744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IQA1P.png?s=128&g=1", "display_name": "Christine Cha", "link": "https://stackoverflow.com/users/5202744/christine-cha"}, "edited": false, "score": 0, "creation_date": 1441768438, "post_id": 32468155, "comment_id": 52802382, "body": "Happy to help, and more often than not I learn something along the way :-)"}], "tags": [], "owner": {"reputation": 2310, "user_id": 1760776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a06b0ee4ca4d278a813cadb1e0735b7?s=128&d=identicon&r=PG", "display_name": "tgf", "link": "https://stackoverflow.com/users/1760776/tgf"}, "is_accepted": true, "score": 1, "last_activity_date": 1441750709, "creation_date": 1441750709, "answer_id": 32468155, "question_id": 32464758, "link": "https://stackoverflow.com/questions/32464758/rails-shopping-cart-not-adding-to-current-order/32468155#32468155", "title": "Rails Shopping Cart - not adding to current order", "body": "<p>It looks like ProductsController#create is called twice, once with format html and once as json.</p>\n\n<p>I think you're submitting some of your data via ajax but still doing a post request from the form.  However your controller, in it's <code>format.html</code> response is redirecting before all of the javascript actions have completed.</p>\n\n<p>Since you only save @order and set the session from OrderItemsController#create which is called by js after your initial ajax().success, it is incomplete when the redirect is received.</p>\n\n<p>What I think happens on click:</p>\n\n<ol>\n<li>ajax post request AND regular form post</li>\n<li>ajax success -> submit #order_item_product_id form</li>\n<li>redirected by original form post response </li>\n</ol>\n\n<p>I would suggest either redesigning the submit process to submit through regular form post or entirely through js.  For example you could disable post from the form and change OrderItemsController#create to finally redirect (via js) <code>render :js =&gt; \"window.location.href = '/cart';\"</code> </p>\n"}], "owner": {"reputation": 395, "user_id": 5202744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IQA1P.png?s=128&g=1", "display_name": "Christine Cha", "link": "https://stackoverflow.com/users/5202744/christine-cha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1292, "favorite_count": 1, "accepted_answer_id": 32468155, "answer_count": 1, "score": 4, "last_activity_date": 1441750709, "creation_date": 1441736758, "question_id": 32464758, "link": "https://stackoverflow.com/questions/32464758/rails-shopping-cart-not-adding-to-current-order", "title": "Rails Shopping Cart - not adding to current order", "body": "<p>Rails noob here.</p>\n\n<p>I'm building a basic shopping cart and it was working perfectly before. Without changing any code (I git reset --hard to my prev commit where it was working) it broke. (?!?) Here's the breakdown:</p>\n\n<p>Github Repo: <a href=\"https://github.com/christinecha/michaka\" rel=\"nofollow\">https://github.com/christinecha/michaka</a></p>\n\n<ul>\n<li><p>Creates a product. \u2713</p></li>\n<li><p>Adds Product ID to a new Order Item. \u2713</p></li>\n<li><p>Adds Order Item to an Order. \u2713</p></li>\n</ul>\n\n<p>--</p>\n\n<p>Possible Issues</p>\n\n<p>! - New Orders keep being created as you create Order Items = cart is always empty.</p>\n\n<p>! - Cart is not connecting to the right Order ID</p>\n\n<p>! - New sessions are being triggered = new Orders = problem</p>\n\n<p>--</p>\n\n<p>ORDER ITEMS CONTROLLER</p>\n\n<pre><code>    class OrderItemsController &lt; ApplicationController\n  def create\n    @order = current_order\n    @order_item = @order.order_items.new(order_item_params)\n    @order.save\n    session[:order_id] = @order.id\n  end\n\n  def update\n    @order = current_order\n    @order_item = @order.order_items.find(params[:id])\n    @order_item.update_attributes(order_item_params)\n    @order_items = @order.order_items\n  end\n\n  def destroy\n    @order = current_order\n    @order_item = @order.order_items.find(params[:id])\n    @order_item.destroy\n    @order_items = @order.order_items\n  end\nprivate\n  def order_item_params\n    params.require(:order_item).permit(:quantity, :product_id)\n  end\nend\n</code></pre>\n\n<p>SESSION_STORE.RB</p>\n\n<pre><code>Rails.application.config.session_store :cookie_store, key: '_bead-project_session'\n</code></pre>\n\n<p>ORDER MODEL</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n  belongs_to :order_status\n  has_many :order_items\n  before_create :set_order_status\n  before_save :update_subtotal\n\n  def subtotal\n    order_items.collect { |oi| oi.valid? ? (oi.quantity * oi.unit_price) : 0 }.sum\n  end\n\n  def subtotal_cents\n    subtotal * 100\n  end\n\n\nprivate\n  def set_order_status\n    self.order_status_id = 1\n  end\n\n  def update_subtotal\n    self[:subtotal] = subtotal\n  end\n\nend\n</code></pre>\n\n<p>APPLICATION CONTROLLER</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  helper_method :current_order\n\n  def current_order\n    if !session[:order_id].nil?\n      Order.find(session[:order_id])\n    else\n      Order.new\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing"], "answers": [{"comments": [{"owner": {"reputation": 1747, "user_id": 1870446, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8a9e32aafeb7e4d7bf40e20eac3e09e4?s=128&d=identicon&r=PG", "display_name": "konnigun", "link": "https://stackoverflow.com/users/1870446/konnigun"}, "edited": false, "score": 0, "creation_date": 1441785068, "post_id": 32464769, "comment_id": 52808657, "body": "Thanks, but I&#39;m afraid that this way I am risking some parts of code to call existent <code>root_path</code> (the ones that include route helpers but not ApplicationController)"}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "reply_to_user": {"reputation": 1747, "user_id": 1870446, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8a9e32aafeb7e4d7bf40e20eac3e09e4?s=128&d=identicon&r=PG", "display_name": "konnigun", "link": "https://stackoverflow.com/users/1870446/konnigun"}, "edited": false, "score": 0, "creation_date": 1441785671, "post_id": 32464769, "comment_id": 52809018, "body": "Override them with <code>helper_method :root_path</code>. After that you&#39;ll get same method for controller &amp; view"}, {"owner": {"reputation": 1747, "user_id": 1870446, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8a9e32aafeb7e4d7bf40e20eac3e09e4?s=128&d=identicon&r=PG", "display_name": "konnigun", "link": "https://stackoverflow.com/users/1870446/konnigun"}, "edited": false, "score": 0, "creation_date": 1441802828, "post_id": 32464769, "comment_id": 52820697, "body": "yep that&#39;s about what I ended up with. Thank you!"}], "tags": [], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "is_accepted": true, "score": 4, "last_activity_date": 1441736782, "creation_date": 1441736782, "answer_id": 32464769, "question_id": 32464663, "link": "https://stackoverflow.com/questions/32464663/how-to-override-root-path-in-rails/32464769#32464769", "title": "How to override `root_path` in Rails?", "body": "<p>override <code>root_path</code> method in your <code>ApplicationController</code>:</p>\n\n<pre><code>def root_path\n  (I18n.locale == 'en') ? '/' : super\nend\n</code></pre>\n"}], "owner": {"reputation": 1747, "user_id": 1870446, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8a9e32aafeb7e4d7bf40e20eac3e09e4?s=128&d=identicon&r=PG", "display_name": "konnigun", "link": "https://stackoverflow.com/users/1870446/konnigun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 1, "accepted_answer_id": 32464769, "answer_count": 1, "score": 3, "last_activity_date": 1441736782, "creation_date": 1441736396, "question_id": 32464663, "link": "https://stackoverflow.com/questions/32464663/how-to-override-root-path-in-rails", "title": "How to override `root_path` in Rails?", "body": "<p>I have locales defined like this:</p>\n\n<pre><code># routes.rb\nscope \"(:locale)\", locale: /#{I18n.available_locales.join(\"|\")}/ do\n  ...\n  root \"home#index\"\nend\n</code></pre>\n\n<p>I also set locale in <code>default_url_params</code> in <code>ApplicationController</code>.<br>\nThis way I have all my routes and urls to include locales like this:   <a href=\"http://example.com/en/something\" rel=\"nofollow\">http://example.com/en/something</a><br>\n<a href=\"http://example.com/fr/something\" rel=\"nofollow\">http://example.com/fr/something</a><br>\nIt is an expected behavior for me.   </p>\n\n<p>I also have root urls like this:<br>\n<a href=\"http://example.com/en\" rel=\"nofollow\">http://example.com/en</a><br>\n<a href=\"http://example.com/fr\" rel=\"nofollow\">http://example.com/fr</a>  </p>\n\n<p>What I want to achieve is <strong>exclude</strong> <code>en</code> (default) locale for <code>root_path</code>, so that <code>root_path</code> for <code>:en</code> locale (either passed explicitly or via <code>default_url_params</code>) is <a href=\"http://example.com/\" rel=\"nofollow\">http://example.com/</a></p>\n\n<p>Is there any way to do it?\nCan I maybe override <code>root_path</code> to do my hacking inside it?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1441736508, "post_id": 32464501, "comment_id": 52791312, "body": "What removal logic do you mean? The answer depends on it."}, {"owner": {"reputation": 861, "user_id": 1195735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6748696d615c0de26893fcec299e7dd1?s=128&d=identicon&r=PG", "display_name": "newbie", "link": "https://stackoverflow.com/users/1195735/newbie"}, "reply_to_user": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1441737223, "post_id": 32464501, "comment_id": 52791735, "body": "Thanks.what would be thd code to search for the EmployeName value. <code>regex.match(&lt;Value of EmployeeName Field&gt;) ? &quot;&quot;:  xml.css(&#39;Field[name=EmployeeName]&#39;).map(&amp;:remove)</code>"}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1441792551, "post_id": 32464501, "comment_id": 52813597, "body": "I&#39;ve updated the code, does it solve your problem now?"}], "answers": [{"tags": [], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "is_accepted": false, "score": 0, "last_activity_date": 1441736051, "creation_date": 1441736051, "answer_id": 32464562, "question_id": 32464501, "link": "https://stackoverflow.com/questions/32464501/ruby-rails-strip-out-xml-code-based-on-regex-expression/32464562#32464562", "title": "ruby/rails strip out xml code based on regex expression", "body": "<p>You can do it through <a href=\"https://github.com/sparklemotion/nokogiri\" rel=\"nofollow\">nokogiri gem</a>. Here is <a href=\"http://www.nokogiri.org/tutorials/parsing_an_html_xml_document.html\" rel=\"nofollow\">official tutorial</a></p>\n\n<pre><code>require 'nokogiri'\n\nxml = Nokogiri::XML('&lt;Request type=\"Final\"&gt;\n    &lt;Field name=\"Grade\"&gt;94.5&lt;/Field&gt;\n    &lt;Field name=\"EmployeeName\"&gt;2398;;;Mike5&lt;/Field&gt;\n    &lt;Field name=\"Date\"&gt;051215&lt;/Field&gt;\n&lt;/Request&gt;')\n\nif xml.xpath('//EmployeeName')\n  do_whatever_you_want\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 1, "last_activity_date": 1441780375, "last_edit_date": 1441780375, "creation_date": 1441736894, "answer_id": 32464801, "question_id": 32464501, "link": "https://stackoverflow.com/questions/32464501/ruby-rails-strip-out-xml-code-based-on-regex-expression/32464801#32464801", "title": "ruby/rails strip out xml code based on regex expression", "body": "<p>As @asiniy already answered, you can use <code>nokogiri</code> for changing your xml, like this:</p>\n\n<p><strong>UPDATE</strong>: you can filter tag contents with the following code:</p>\n\n<pre><code>require 'nokogiri'\n\nxml = Nokogiri::XML('&lt;Request type=\"Final\"&gt;\n    &lt;Field name=\"Grade\"&gt;94.5&lt;/Field&gt;\n    &lt;Field name=\"EmployeeName\"&gt;2398;;;Mike5&lt;/Field&gt;\n    &lt;Field name=\"Date\"&gt;051215&lt;/Field&gt;\n&lt;/Request&gt;')\n\n# remove all Employee elements, containing text 2398\nxml.css('Field[name=EmployeeName]').select { |node| node.text =~ /2398/ }.map(&amp;:remove) \n\nputs xml\n</code></pre>\n\n<p>will output</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;Request type=\"Final\"&gt;\n    &lt;Field name=\"Grade\"&gt;94.5&lt;/Field&gt;\n\n    &lt;Field name=\"Date\"&gt;051215&lt;/Field&gt;\n&lt;/Request&gt;\n</code></pre>\n"}], "owner": {"reputation": 861, "user_id": 1195735, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6748696d615c0de26893fcec299e7dd1?s=128&d=identicon&r=PG", "display_name": "newbie", "link": "https://stackoverflow.com/users/1195735/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 32464801, "answer_count": 2, "score": 1, "last_activity_date": 1441780375, "creation_date": 1441735799, "question_id": 32464501, "link": "https://stackoverflow.com/questions/32464501/ruby-rails-strip-out-xml-code-based-on-regex-expression", "title": "ruby/rails strip out xml code based on regex expression", "body": "<p>I receive the following xml in a database field.</p>\n\n\n\n<pre><code>&lt;Request type=\"Final\"&gt;\n    &lt;Field name=\"Grade\"&gt;94.5&lt;/Field&gt;\n    &lt;Field name=\"EmployeeName\"&gt;2398;;;Mike5&lt;/Field&gt;\n    &lt;Field name=\"Date\"&gt;051215&lt;/Field&gt;\n&lt;/Request&gt;\n</code></pre>\n\n<p>Currently, I just receive it and display them as it is:</p>\n\n<pre><code>  def request_xml\n    (request.blank? ? \"\" : request.message)\n  end\n</code></pre>\n\n<p>Now, I want to return the xml by stripping of the EmployeeName value to nil i.e  2398;;;Mike5 from 2398;;;Mike5 based on certain logic</p>\n\n<p>So I am ok with 2 solutions</p>\n\n<pre><code>&gt;  1. if EmployeeName value matches a regex, return null else return the value as it is?\n&gt;  - Return &lt;Field name=\"EmployeeName\"&gt;&lt;/Field&gt;\n&gt;  2. if EmployeeName value matches a regex completely strip out the whole EmployeeName XML: &lt;Field\n&gt; name=\"EmployeeName\"&gt;2398;;;Mike5&lt;/Field&gt; from the result\n</code></pre>\n\n<p>Is either of the above solution possible via ruby/rails code?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1441741006, "post_id": 32464405, "comment_id": 52793653, "body": "<code>to_csv</code> can handle <code>nil</code> values, it results in an empty field"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1441741365, "post_id": 32464405, "comment_id": 52793843, "body": "What is the specific problem? The CSV class doesn&#39;t create strings containing the word &#39;nil&#39;."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1441742354, "post_id": 32464405, "comment_id": 52794421, "body": "Ruby doesn&#39;t have methods <code>where</code> or <code>pluck</code>. If they&#39;re not defined in <code>Ticket</code>, you need at least one more tag."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1441744783, "post_id": 32465323, "comment_id": 52795662, "body": "Anthony, this is what happens when you don&#39;t use your reading glasses.I think you want <code>el ||= &#39;&#39;</code>. If <code>el</code> is a string or <code>nil</code>, you could also write <code>ticket.map(&amp;:to_s)</code>, but I guess you want strings anyway. (I say this without knowing what <code>pluck</code> does.)"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1441744957, "post_id": 32465323, "comment_id": 52795736, "body": "I just went to the optometrist for the first time in my life 2 weeks ago... your comment couldn&#39;t be more appropriate.  As always, thank you for the suggestion - it&#39;s perfect."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 3, "last_activity_date": 1441745030, "last_edit_date": 1441745030, "creation_date": 1441738811, "answer_id": 32465323, "question_id": 32464405, "link": "https://stackoverflow.com/questions/32464405/string-substitution-within-ruby-array/32465323#32465323", "title": "String substitution within ruby array", "body": "<p>This should do it:</p>\n\n<pre><code>@tickets = Ticket.where(active: true).\n  pluck(\n    :door_manufacturer,\n    :job_number, \n    :door_style, \n    :door_allocation_date,\n    :date_doors_received_in_aub, \n    :door_delivery_due_date,\n    :notes\n  ).map { |ticket| ticket.map(&amp;:to_s) }\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 522560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/f1780a58c3fc8b84d7d0c372c29bc206?s=128&d=identicon&r=PG", "display_name": "tidelake", "link": "https://stackoverflow.com/users/522560/tidelake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 32465323, "answer_count": 1, "score": 3, "last_activity_date": 1441745030, "creation_date": 1441735448, "last_edit_date": 1441744711, "question_id": 32464405, "link": "https://stackoverflow.com/questions/32464405/string-substitution-within-ruby-array", "title": "String substitution within ruby array", "body": "<p>I have the following code, within which I want to change certain values to csv friendly, e.g., 'nil' to ''. I need to know how to make these changes. Thank you.</p>\n\n<pre><code>  def daily_door_schedule\n    @tickets = Ticket.where(active: true).\n      pluck(\n        :door_manufacturer,\n        :job_number, \n        :door_style, \n        :door_allocation_date,\n        :date_doors_received_in_aub, \n        :door_delivery_due_date,\n        :notes\n      )\n\n    respond_to do |format|\n      format.html\n      format.csv { render text: @tickets.to_csv }\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "edited": false, "score": 0, "creation_date": 1441735621, "post_id": 32464255, "comment_id": 52790818, "body": "Thank you for the fast reply. I tried this out, but it didn&#39;t work out, so I wanted to see exactly what is being compared, and printed out <code>&lt;%= current_user %&gt;</code>, and got <code>#&lt;User:0x00000006e5e2e0&gt;</code>. Does this have to do with what you said about comparing models instead of integer id&#39;s?"}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "reply_to_user": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "edited": false, "score": 0, "creation_date": 1441735788, "post_id": 32464255, "comment_id": 52790894, "body": "@aishaq11 it&#39;s normal situation - this is representing of <code>Object</code> class with it&#39;s unique id.  Try out something like <code>&lt;%= current_user.id %&gt;</code> and <code>&lt;%= product.user_id %&gt;</code> at the same rendering. Does id values same?"}], "tags": [], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "is_accepted": false, "score": 2, "last_activity_date": 1441734904, "creation_date": 1441734904, "answer_id": 32464255, "question_id": 32464224, "link": "https://stackoverflow.com/questions/32464224/get-userid-for-current-user-using-devise-rails/32464255#32464255", "title": "Get UserID for Current User using Devise/Rails", "body": "<p>First of all, ruby like undescored_rather_than camelCased style.</p>\n\n<p>Secondly, you need two equal signs instead of three. <code>@currentUser == @product.user_id</code> should work</p>\n\n<p>At third, you don't need to compare integer ids, you can compare models, something like that:</p>\n\n<pre><code>&lt;% if current_user == @product.user %&gt;\n  &lt;%= link_to \"Back\", products_path %&gt;\n  &lt;%= link_to \"Edit\", edit_product_path(@product) %&gt;\n  &lt;%= link_to \"Delete\", product_path(@product), method: :delete, data: { confirm: \"Are you sure?\"} %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Please note that I omitted the <code>@</code> in <code>current_user</code> method, because <code>current_user</code> is helper for devise, else I removed unnecessary <code>&lt;% else %&gt;</code> (in my opinion)</p>\n"}, {"tags": [], "owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "is_accepted": false, "score": 3, "last_activity_date": 1441743157, "creation_date": 1441743157, "answer_id": 32466457, "question_id": 32464224, "link": "https://stackoverflow.com/questions/32464224/get-userid-for-current-user-using-devise-rails/32466457#32466457", "title": "Get UserID for Current User using Devise/Rails", "body": "<p>Have you set it up to actually be able to user <code>current_user</code> ? \nin your code you have :</p>\n\n<p><code>@currentUser = current_user.id</code></p>\n\n<p>But where was current_user defined? I haven't used Devise but with sessions you could define the value of current_user with a helper method (you may be able to also do it right there in the sessions_controller #create method), like this:</p>\n\n<pre><code> def current_user\n     @current_user ||= User.find_by(id: session[:user_id])\n  end\n</code></pre>\n\n<p>then throughout your app you could use <code>current_user.id</code> or <code>current_user.name</code> or whatever you needed.</p>\n\n<p>So while sessions is not Devise, I hope this helps .</p>\n"}, {"tags": [], "owner": {"reputation": 3240, "user_id": 155720, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b7d890bed68fa564c18ff00dfd8207cd?s=128&d=identicon&r=PG", "display_name": "KensoDev", "link": "https://stackoverflow.com/users/155720/kensodev"}, "is_accepted": true, "score": 12, "last_activity_date": 1441759274, "creation_date": 1441759274, "answer_id": 32469238, "question_id": 32464224, "link": "https://stackoverflow.com/questions/32464224/get-userid-for-current-user-using-devise-rails/32469238#32469238", "title": "Get UserID for Current User using Devise/Rails", "body": "<p>I see a few problems here</p>\n\n<pre><code>def index\n  @currentUser = current_user.id\nend\n</code></pre>\n\n<p>Other than what @HolyMoly already commented, you should use underscore and not camelcase, if <code>current_user</code> is nil here, <code>.id</code> will fail on it, resulting in an exception.</p>\n\n<p>Second, you are checking \"ability\" by comparing values of ids, I would change your code to do this</p>\n\n<pre><code>&lt;% if allow_product_delete?(@product) %&gt;\n</code></pre>\n\n<p>In a helper</p>\n\n<pre><code>def allow_product_delete?(product)\n  return false unless current_user\n  @product.user_id == current_user.id\nend\n</code></pre>\n\n<p>if you are using devise <code>current_user</code> exists in controller and views, you don't need to define it as an instance variable, it's already defined as a controller method on all actions (by default). so by calling <code>current_user</code> in your views you are done.</p>\n\n<p>If a user is not logged in, <code>current_user</code> will be nil, you always have to prepare for this and protect against it.</p>\n\n<p>Last, I would look into ability gems (cancan or cancancan), those provide a very nice DSL for dealing with what you were trying here.</p>\n"}, {"tags": [], "owner": {"reputation": 744, "user_id": 2570610, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100001403025845/picture?type=large", "display_name": "Dima Melnik", "link": "https://stackoverflow.com/users/2570610/dima-melnik"}, "is_accepted": false, "score": 1, "last_activity_date": 1441761269, "creation_date": 1441761269, "answer_id": 32469457, "question_id": 32464224, "link": "https://stackoverflow.com/questions/32464224/get-userid-for-current-user-using-devise-rails/32469457#32469457", "title": "Get UserID for Current User using Devise/Rails", "body": "<p>You should use current_user for this. You can do it everywhere in project. No needs to define variable @currentUser or etc.</p>\n\n<p>You can compare like models</p>\n\n<pre><code>if current_user == @product.user\n</code></pre>\n\n<p>that is the equivalent to </p>\n\n<pre><code>if current_user.id == @product.user.id\n</code></pre>\n\n<p>In some cases you can use</p>\n\n<pre><code>if current_user.id == @product.user_id\n</code></pre>\n\n<p>This prevent extra sql query to load user model</p>\n\n<p>If you are using Devise for authorization and you need control access for actions you should see (maybe use) gem <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow\">https://github.com/CanCanCommunity/cancancan</a></p>\n\n<blockquote>\n  <p><a href=\"https://github.com/airbnb/ruby\" rel=\"nofollow\">https://github.com/airbnb/ruby</a> will help you to stay in tune ;)</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 379, "user_id": 818033, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sW1NC.jpg?s=128&g=1", "display_name": "msdundar", "link": "https://stackoverflow.com/users/818033/msdundar"}, "is_accepted": false, "score": 0, "last_activity_date": 1487360371, "creation_date": 1487360371, "answer_id": 42306114, "question_id": 32464224, "link": "https://stackoverflow.com/questions/32464224/get-userid-for-current-user-using-devise-rails/42306114#42306114", "title": "Get UserID for Current User using Devise/Rails", "body": "<p>Comparing IDs is not the best practice for Rails. If you have previously set up the associations correctly, then you don't need to make a comparison between IDs. For example:</p>\n\n<pre><code>User\nhas_many :group_events\n\nGroupEvent\nbelongs_to :user\n</code></pre>\n\n<p>In this scenario, instead of comparing IDs, you can directly compare with association:</p>\n\n<pre><code>Bad\n@group_event.user_id == current_user.id\n\nGood\n@group_event.user == current_user\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 5166698, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/423fada2313684c1a1dd4eb2b558e8d8?s=128&d=identicon&r=PG&f=1", "display_name": "aishaq11", "link": "https://stackoverflow.com/users/5166698/aishaq11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24176, "favorite_count": 2, "accepted_answer_id": 32469238, "answer_count": 5, "score": 8, "last_activity_date": 1487360371, "creation_date": 1441734786, "question_id": 32464224, "link": "https://stackoverflow.com/questions/32464224/get-userid-for-current-user-using-devise-rails", "title": "Get UserID for Current User using Devise/Rails", "body": "<p>So I, a rails newbie, am currently trying to get the User ID from the current Devise session, and I am having a bit of trouble.</p>\n\n<p>I have this in my controller now:</p>\n\n<pre><code>def index\n  @currentUser = current_user.id\nend\n</code></pre>\n\n<p>And I want to make a simple if statement to show/hide fields in my form.</p>\n\n<pre><code>&lt;% if @currentUser === @product.user_id %&gt;\n          &lt;%= link_to \"Back\", products_path %&gt;\n          &lt;%= link_to \"Edit\", edit_product_path(@product) %&gt;\n          &lt;%= link_to \"Delete\", product_path(@product), method: :delete, data: { confirm: \"Are you sure?\"} %&gt;\n      &lt;% else %&gt;\n          &lt;span&gt;&lt;/span&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I have a feeling my syntax in defining my currentUser variable is bad, but I have no idea how to fix this. There were a few similar questions on Stack, but none of them really applied to me or helped me.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "algorithm", "math", "combinations", "permutation"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1441734783, "post_id": 32464154, "comment_id": 52790390, "body": "Sorry, but I am having hard time to understand your question. Are you asking how to generate as much non-repeating pairs out of 6 elements as possible?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1441734943, "post_id": 32464154, "comment_id": 52790473, "body": "Yes, I&#39;m really uncertain of what you&#39;re asking. I cannot follow the process above, or what a &quot;spare&quot; is. Can you give us a clear, unambiguous <i>output</i> that you&#39;re after, based on the input of <code>[1,2,3,4,5,6]</code>?"}, {"owner": {"reputation": 4062, "user_id": 316729, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9249736dae1898d537770886061c06f9?s=128&d=identicon&r=PG", "display_name": "Sam Joseph", "link": "https://stackoverflow.com/users/316729/sam-joseph"}, "edited": false, "score": 0, "creation_date": 1446651093, "post_id": 32464154, "comment_id": 54832712, "body": "I have a related question here: <a href=\"http://math.stackexchange.com/questions/1477767/efficiently-partition-a-set-into-all-possible-unique-pair-combinations\" title=\"efficiently partition a set into all possible unique pair combinations\">math.stackexchange.com/questions/1477767/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 10914, "user_id": 4907604, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qowl9.png?s=128&g=1", "display_name": "m69 &#39;&#39;snarky and unwelcoming&#39;&#39;", "link": "https://stackoverflow.com/users/4907604/m69-snarky-and-unwelcoming"}, "edited": false, "score": 1, "creation_date": 1441737614, "post_id": 32464223, "comment_id": 52791981, "body": "I think that he also want them grouped in 5 groups of 3 non-overlapping pairs."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1441734778, "creation_date": 1441734778, "answer_id": 32464223, "question_id": 32464154, "link": "https://stackoverflow.com/questions/32464154/trying-to-create-a-pair-generator/32464223#32464223", "title": "Trying to create a pair generator", "body": "<p>I <em>think</em> you're simply after the built-in <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-combination\" rel=\"nofollow\"><code>combination</code></a> method which returns an enumerator. You can use <code>.to_a</code> to turn it into an array of unique combinations.</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6].combination(2).to_a\n# =&gt; [[1, 2], [1, 3], [1, 4], [1, 5], [1, 6], [2, 3], [2, 4], [2, 5], [2, 6], [3, 4], [3, 5], [3, 6], [4, 5], [4, 6], [5, 6]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3215, "user_id": 2363540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c1d1cbfd25f9bab22c3cc213c926b9?s=128&d=identicon&r=PG", "display_name": "Douglas Zare", "link": "https://stackoverflow.com/users/2363540/douglas-zare"}, "is_accepted": false, "score": 1, "last_activity_date": 1441737900, "creation_date": 1441737900, "answer_id": 32465061, "question_id": 32464154, "link": "https://stackoverflow.com/questions/32464154/trying-to-create-a-pair-generator/32465061#32465061", "title": "Trying to create a pair generator", "body": "<p>This is called a <a href=\"https://en.wikipedia.org/wiki/Graph_factorization\" rel=\"nofollow\">1-factorization</a>. One 1-factorization of the complete graph on 6 vertices {0,1,2,3,4,oo} is to let the schedule on day i be {{oo,i},{i+1,i+4},{i+2,i+3}} where all of the numbers i+j are reduced mod 5. </p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 2, "last_activity_date": 1441739736, "creation_date": 1441739736, "answer_id": 32465535, "question_id": 32464154, "link": "https://stackoverflow.com/questions/32464154/trying-to-create-a-pair-generator/32465535#32465535", "title": "Trying to create a pair generator", "body": "<p>This is a round robin tournament where every player plays every other player. Line up the players like below to form the pairs 1 4, 2 5 and 3 6:</p>\n\n<p>123<br>\n456</p>\n\n<p>fix player 1, rotate the remaining players:</p>\n\n<p><strong>1</strong>42<br>\n563</p>\n\n<p>to produce pairs 1 5, 4 6 and 2 3. Keep rotating:</p>\n\n<p><strong>1</strong>54<br>\n632</p>\n\n<p><strong>1</strong>65<br>\n324</p>\n\n<p><strong>1</strong>36<br>\n 245</p>\n"}], "owner": {"reputation": 218, "user_id": 2188182, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/x5bMj.png?s=128&g=1", "display_name": "Sam Morgan", "link": "https://stackoverflow.com/users/2188182/sam-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1441739736, "creation_date": 1441734496, "question_id": 32464154, "link": "https://stackoverflow.com/questions/32464154/trying-to-create-a-pair-generator", "title": "Trying to create a pair generator", "body": "<p>I'm trying to build a pair generator. It takes a list of six names, and generates pairs for the week (5 days), with as few replications as possible.</p>\n\n<p>The minimum I've gotten my replicated pairs down to is 2 (so I have found 5 days of pairs, i.e. 15 total pair combinations, with only 2 identical sets).</p>\n\n<p>My method:</p>\n\n<pre><code># Start with individuals in an array\n[1, 2, 3, 4, 5, 6]\n# Bisect the array\n[1, 2, 3]\n[4, 5, 6] =&gt; yields pair combinations [1, 4], [2, 5], [3, 6]\n# Move the lower of the bisected arrays along\n[1, 2, 3]\n[6, 4, 5] =&gt; yields pair combinations [1, 6], [2, 4], [3, 5]\n# Move along once more\n[1, 2, 3]\n[5, 6, 4] =&gt; yields pair combinations [1, 5], [2, 6], [3, 4]\n# Since there are no more unique pair combinations, bisect each array again\n(Array 1) [1, 2]\n(Array 1) [3] =&gt; yields pair combination [1, 3] with 2 'spare'\n(Array 2) [4, 5]\n(Array 2) [6] =&gt; yields pair combination [4, 6] with 6 'spare'\n=&gt; 'spare' pair combination [2, 6] is a replication\n# Move the lower of the bisected arrays along\n(Array 1) [1, 2]\n(Array 1)    [3] =&gt; yields pair combination [2, 3] with 1 'spare'\n(Array 2) [4, 5]\n(Array 2)    [6] =&gt; yields pair combination [5, 6] with 4 'spare'\n=&gt; 'spare' pair combination [1, 4] is a replication\n</code></pre>\n\n<p>This process above gives us 13 unique pairs, and then 2 that are non-unique. Every day of the week is covered, but we replicate.</p>\n\n<p>Is there any way to do this more efficiently/to avoid the replication?</p>\n"}, {"tags": ["java", "ruby", "rubygems", "jruby"], "answers": [{"tags": [], "owner": {"reputation": 702, "user_id": 2980873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c42f7e4098b30d0218d210414fdbfcab?s=128&d=identicon&r=PG&f=1", "display_name": "hello_its_me", "link": "https://stackoverflow.com/users/2980873/hello-its-me"}, "is_accepted": true, "score": 0, "last_activity_date": 1442210810, "last_edit_date": 1442210810, "creation_date": 1441781018, "answer_id": 32472585, "question_id": 32463930, "link": "https://stackoverflow.com/questions/32463930/java-commands-in-jruby/32472585#32472585", "title": "Java commands in JRuby", "body": "<p>I suggest you thoroughly read the following two links to have a better understanding of using JRuby :) </p>\n\n<p><a href=\"https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby\" rel=\"nofollow\">https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby</a></p>\n\n<p><a href=\"https://github.com/jruby/jruby/wiki/DirectJRubyEmbedding\" rel=\"nofollow\">https://github.com/jruby/jruby/wiki/DirectJRubyEmbedding</a></p>\n"}], "owner": {"reputation": 13, "user_id": 5314013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129b31189848e9a764fdbf811979e3e7?s=128&d=identicon&r=PG&f=1", "display_name": "total_noob", "link": "https://stackoverflow.com/users/5314013/total-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 32472585, "answer_count": 1, "score": 1, "last_activity_date": 1465896687, "creation_date": 1441733649, "last_edit_date": 1465896687, "question_id": 32463930, "link": "https://stackoverflow.com/questions/32463930/java-commands-in-jruby", "title": "Java commands in JRuby", "body": "<p>I am adding jar files to my jruby code in the .rb file</p>\n\n<p>I put the following:</p>\n\n<pre><code>import 'java'\nimport 'weather.jar'\nimport 'weatherStatus.WeatherStatus' #this is the package and class\n</code></pre>\n\n<p>Now I have classes in weather.jar that I need to use here but it keeps giving me errors. I don't know how to convert the following java lines to jruby and everytime I try something from the tutorials, it give me errors.</p>\n\n<p>The following command lines are from java and I want to include them in my jruby file:</p>\n\n<pre><code>sunnyDay var1 = null;\nvar1 = new sunnyDay(var2, var3);\nString var4 = var1.TimeOfDay(var5);\n</code></pre>\n\n<p>sunnyDay is from package called weatherStatus </p>\n\n<p>How can I do that in Jruby?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14194, "user_id": 290338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86f90bd8375fa7f611f43ee03cebcd10?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/290338/anatoly"}, "edited": false, "score": 0, "creation_date": 1441733425, "post_id": 32463805, "comment_id": 52789586, "body": "Have you tried to use Struct class?"}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1441733505, "creation_date": 1441733505, "answer_id": 32463889, "question_id": 32463805, "link": "https://stackoverflow.com/questions/32463805/ruby-attr-writer-methods-in-singleton-classes/32463889#32463889", "title": "Ruby attr_writer methods in singleton classes", "body": "<p>Just calling <code>blah=</code> will create a local variable named <code>blah</code> and assign it the value of <code>(\"something\")</code>, which is <code>\"something\"</code>. You have to add explicit receiver e.g.:</p>\n\n<pre><code>self.blah=(\"something\")\n</code></pre>\n"}], "owner": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "closed_date": 1441742955, "accepted_answer_id": 32463889, "answer_count": 1, "score": 1, "last_activity_date": 1441739413, "creation_date": 1441733244, "last_edit_date": 1441739413, "question_id": 32463805, "link": "https://stackoverflow.com/questions/32463805/ruby-attr-writer-methods-in-singleton-classes", "closed_reason": "Duplicate", "title": "Ruby attr_writer methods in singleton classes", "body": "<p>I can get a method that sets an instance variable in a singleton class to work if it does not end with <code>=</code>:</p>\n\n<pre><code>class Aaa\n  class &lt;&lt; self\n    def config(&amp;block)\n      instance_eval(&amp;block)\n    end\n\n    def set_blah(blah)\n      @blah = blah\n    end\n\n    def blah\n      @blah\n    end\n  end\nend\n\nAaa.config {set_blah(\"something\")}\nAaa.blah # =&gt; \"something\" as expected\n</code></pre>\n\n<p>When the method that sets the instance variable ends with a <code>=</code>, it doesn't work anymore:</p>\n\n<pre><code>class Bbb\n  class &lt;&lt; self\n    def config(&amp;block)\n      instance_eval(&amp;block)\n    end\n\n    def blah=(blah)\n      @blah = blah\n    end\n\n    def blah\n      @blah\n    end\n  end\nend\n\nBbb.config {blah=(\"something\")}\nBbb.blah # =&gt; nil, not sure why\n\n# This works\nBbb.blah=(\"hi\")\nBbb.blah # =&gt; \"hi\"\n</code></pre>\n\n<p>Why are the <code>set_blah</code> and <code>blah=</code> methods working differently?</p>\n"}, {"tags": ["ruby", "shell", "escaping", "hyphen", "quoting"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1441733327, "post_id": 32463742, "comment_id": 52789534, "body": "You are setting <code>IFS</code> to <code>-</code> before the <code>Array</code> declaration (but not only for that declaration). That&#39;s causing your problem."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1441741181, "post_id": 32463742, "comment_id": 52793745, "body": "Is all this code needed to reproduce your problem?"}, {"owner": {"reputation": 38, "user_id": 5313967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c851ad317391baf69de8f139a9201f0e?s=128&d=identicon&r=PG", "display_name": "Nick Prokesch", "link": "https://stackoverflow.com/users/5313967/nick-prokesch"}, "edited": false, "score": 0, "creation_date": 1441990308, "post_id": 32463742, "comment_id": 52914937, "body": "So then the solution is <code>OLDIFS=$IFS;IFS=&#39;-&#39;;&lt;code&gt;;IFS=$OLDIFS</code> via <a href=\"http://www.unix.com/shell-programming-and-scripting/58611-resetting-ifs-variable.html\" rel=\"nofollow noreferrer\">unix.com/shell-programming-and-scripting/&hellip;</a>"}], "owner": {"reputation": 38, "user_id": 5313967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c851ad317391baf69de8f139a9201f0e?s=128&d=identicon&r=PG", "display_name": "Nick Prokesch", "link": "https://stackoverflow.com/users/5313967/nick-prokesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441787179, "creation_date": 1441733032, "last_edit_date": 1441787179, "question_id": 32463742, "link": "https://stackoverflow.com/questions/32463742/how-to-interpolate-a-hyphen-or-dash-in-a-string-in-a-shell-script", "title": "How to interpolate a hyphen or dash in a string in a shell script?", "body": "<p>I have the following code, which is meant to iterate through a list of gems and install each one using <code>gem install $gem</code>. However, when an gem name contains a hyphen/dash, the script treats the words on either side of the hyphen as two separate list items. How can I properly escape the hyphen so that the list considers it one item?</p>\n\n<pre><code># Install gems for all installed versions of ruby\n\nsource /usr/local/share/chruby/chruby.sh\n\ngems=(\n\"bundler\"\n\"homesick\"\n\"mechanize\"\n\"vagrant\"\n\"gist\"\n\"pry\"\n\"awesome_print\"\n\"overcommit\"\n\"rubocop\"\n\"jshint\"\n\"gem-release\"\n\"aws\"\n\"librarian-chef\"\n\"knife-solo\"\n)\n\nrubies=`chruby`\nfor ruby in ${rubies[@]}\ndo\n    IN=\"$ruby\"\n    set -- \"$IN\"\n    IFS=\"-\"; declare -a Array=($*)\n    echo \"Installing gems for ${Array[1]}\"\n\n    chruby ${Array[1]}\n    echo `ruby -v`\n    for gem in ${gems[@]}\n    do\n      echo $gem\n      if ! gem list $gem -i &gt; /dev/null 2&gt;&amp;1\n      then\n        gem install $gem\n      fi\n    done\ndone\n</code></pre>\n\n<p>What I've tried: </p>\n\n<ul>\n<li><code>\\e-</code></li>\n<li><code>-*</code></li>\n<li><code>gem\\055name</code></li>\n</ul>\n\n<p>The last example works in <code>echo</code>, but not in <code>gem install \"$gem\"</code>.</p>\n\n<p>What can I do to make this work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 729, "user_id": 1113875, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1fd324dc88c50366a49f0510f7c30c76?s=128&d=identicon&r=PG", "display_name": "Scott S.", "link": "https://stackoverflow.com/users/1113875/scott-s"}, "edited": false, "score": 0, "creation_date": 1441732799, "post_id": 32463623, "comment_id": 52789239, "body": "I did that, but now I&#39;m getting this error: &quot;PG::UndefinedTable: ERROR: relation &quot;issues_splits&quot; does not exist&quot;"}], "tags": [], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "is_accepted": true, "score": 2, "last_activity_date": 1441733427, "last_edit_date": 1441733427, "creation_date": 1441732600, "answer_id": 32463623, "question_id": 32463551, "link": "https://stackoverflow.com/questions/32463551/displaying-custom-query-results-in-view/32463623#32463623", "title": "Displaying custom query results in View", "body": "<p>You need </p>\n\n<pre><code>@chosen_splits = Issue.find(1).splits\n</code></pre>\n\n<p>Otherwise you will call <code>.each</code> method for your issue</p>\n\n<p>Else please edit <code>has_and_belongs_to_many :splits</code> to just <code>has_many :splits</code> in your <code>Issue</code> model</p>\n"}], "owner": {"reputation": 729, "user_id": 1113875, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1fd324dc88c50366a49f0510f7c30c76?s=128&d=identicon&r=PG", "display_name": "Scott S.", "link": "https://stackoverflow.com/users/1113875/scott-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 1, "accepted_answer_id": 32463623, "answer_count": 1, "score": 2, "last_activity_date": 1441733427, "creation_date": 1441732369, "last_edit_date": 1441733109, "question_id": 32463551, "link": "https://stackoverflow.com/questions/32463551/displaying-custom-query-results-in-view", "title": "Displaying custom query results in View", "body": "<p>I'm relatively new to Rails and in addition to displaying \"All\" items on my Index page, I also want to show a filtered list. Essentially a subset of records that have an association to another model.</p>\n\n<p>My models are Issue and Split. A Split belongs to an issue and an issue has and belongs to many splits.</p>\n\n<p>If a Split is associated with issue_id = 1, then I want it shown in the list of splits for that issue</p>\n\n<p>Here is my controller code:</p>\n\n<pre><code>class SplitsController &lt; ApplicationController\n  before_action :set_split, only: [:show, :edit, :update, :destroy]\n\n  # GET /splits\n  # GET /splits.json\n  def index\n    @splits = Split.all\n    @chosen_splits = Issue.find(1)\n  end\n</code></pre>\n\n<p>Here is the code I have in my index view:</p>\n\n<pre><code>&lt;tbody&gt;\n  &lt;% @chosen_splits.each do |split| %&gt;\n\n    &lt;tr&gt;\n      &lt;td&gt;&lt;input type=\"checkbox\" value&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to split.name, split_path(split) %&gt;&lt;/td&gt;\n      &lt;td class=\"text-right\"&gt;&lt;%= number_with_delimiter(split.quantity) %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Edit', edit_split_path(split), :class =&gt; 'btn btn-xs btn-default' %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Delete', split, method: :delete, data: { confirm: 'Are you sure?'}, :class =&gt; 'btn btn-xs btn-danger' %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>Here is my Issue Model:</p>\n\n<pre><code>class Issue &lt; ActiveRecord::Base\n\n    belongs_to :publication\n    has_and_belongs_to_many :splits\n    has_many :issue_split_geographies\n    belongs_to :medium\n\n    validates :name, :start_date, :status, presence: true\n\nend\n</code></pre>\n\n<p>When I load the page I'm getting a \"undefined method `each' for\" error. But, the same basic logic is working for when I run the @splits variable.</p>\n\n<p>All help is greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "bundle"], "comments": [{"owner": {"reputation": 3, "user_id": 5313820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5jT7q.png?s=128&g=1", "display_name": "Michel Ortega", "link": "https://stackoverflow.com/users/5313820/michel-ortega"}, "edited": false, "score": 0, "creation_date": 1441730865, "post_id": 32463125, "comment_id": 52788221, "body": "<a href=\"http://i.imgur.com/cGWz4fT.png\" rel=\"nofollow noreferrer\">i.imgur.com/cGWz4fT.png</a>"}, {"owner": {"reputation": 3303, "user_id": 1361532, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/733f00fe978dd7a7ce42de3bb9734f6d?s=128&d=identicon&r=PG", "display_name": "Shawn", "link": "https://stackoverflow.com/users/1361532/shawn"}, "edited": false, "score": 0, "creation_date": 1441731949, "post_id": 32463125, "comment_id": 52788778, "body": "Please put the commands you are running in your question so that this question may be found by others with the same issue in the future. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": false, "score": 0, "last_activity_date": 1441732189, "last_edit_date": 1441732189, "creation_date": 1441731526, "answer_id": 32463312, "question_id": 32463125, "link": "https://stackoverflow.com/questions/32463125/rails-error-bundle-install-on-w8/32463312#32463312", "title": "Rails error &quot;bundle install&quot; on W8", "body": "<p>It is recently a common issue on windows. Easiest solution, get rid of Windows and get yourself a nice UNIX based system. As far as i understand it it is caused by RubyGems changing CertificateAuthority, which windows has some issue with.</p>\n\n<p>There are three solutiions:</p>\n\n<h2>The right one:</h2>\n\n<p>Install newer version of rubygems from <a href=\"https://rubygems.org/pages/download\" rel=\"nofollow\">https://rubygems.org/pages/download</a>. Note: You cannot use <code>gem</code> command, you need to download it manually.</p>\n\n<h2>Will work as well</h2>\n\n<p>Manually update ssl certificate.</p>\n\n<ol>\n<li>Get a certificate from <a href=\"https://raw.githubusercontent.com/rubygems/rubygems/master/lib/rubygems/ssl_certs/AddTrustExternalCARoot-2048.pem\" rel=\"nofollow\">here</a></li>\n<li>Locate <code>GeoTrustGlobalCA.pem</code> file. The easiest way is to run <code>gem which rubygems</code>, navigate to given folder and then to <code>rubygems/ssl_cert</code>.</li>\n<li>Edit the content of file above with the certificate from step 1.</li>\n<li>Party</li>\n</ol>\n\n<h2>Hacky one, not recommended:</h2>\n\n<p>Another solution, edit your Gemfile. On top you'll find:</p>\n\n<p><code>source 'https://rubygems.org'</code>\nChange it to:</p>\n\n<p><code>source 'http://rubygems.org'</code></p>\n\n<p>And all should work (for a while. Ruby is not designed to work smoothly with Windows)</p>\n"}], "owner": {"reputation": 3, "user_id": 5313820, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5jT7q.png?s=128&g=1", "display_name": "Michel Ortega", "link": "https://stackoverflow.com/users/5313820/michel-ortega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1441732219, "creation_date": 1441730850, "last_edit_date": 1441732219, "question_id": 32463125, "link": "https://stackoverflow.com/questions/32463125/rails-error-bundle-install-on-w8", "title": "Rails error &quot;bundle install&quot; on W8", "body": "<p>i just installed rails, the Run 'bundle install' message keeps showing in the screen.\n How do i fix it>? Please help me\nWhen i write the command bundle install rails says that there are some missing gems.</p>\n\n<p>I am running the command 'bundle install' in the C:\\sites\\sample></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-admin"], "comments": [{"owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "edited": false, "score": 0, "creation_date": 1441730669, "post_id": 32463048, "comment_id": 52788121, "body": "Are you sure that&#39;s the exact error, with <code>klass</code>? Have you mistyped something somewhere, or is <code>klass</code> actually one of your models?"}, {"owner": {"reputation": 771, "user_id": 2785476, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4e9456a7b85e0365e83bd857668b0255?s=128&d=identicon&r=PG", "display_name": "Max Alcala", "link": "https://stackoverflow.com/users/2785476/max-alcala"}, "edited": false, "score": 0, "creation_date": 1441731127, "post_id": 32463048, "comment_id": 52788356, "body": "<code>klass</code> could actually indicate some error with AR wiring - Rails uses <code>klass</code> internally to avoid the keyword, like <a href=\"https://github.com/rails/rails/blob/3e36db4406beea32772b1db1e9a16cc1e8aea14c/activerecord/lib/active_record/translation.rb\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 103, "user_id": 2556669, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45d63a5e0d17732c1296672c3494471f?s=128&d=identicon&r=PG", "display_name": "Jabawack81", "link": "https://stackoverflow.com/users/2556669/jabawack81"}, "reply_to_user": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "edited": false, "score": 0, "creation_date": 1441787781, "post_id": 32463048, "comment_id": 52810302, "body": "@undo I&#39;m sure of it because is a direct ctrl+c ctrl+v from the error page I had the same reaction on the first time i saw the error but then I reached the conclusion proposed by max-alcala"}], "owner": {"reputation": 103, "user_id": 2556669, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45d63a5e0d17732c1296672c3494471f?s=128&d=identicon&r=PG", "display_name": "Jabawack81", "link": "https://stackoverflow.com/users/2556669/jabawack81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441730554, "creation_date": 1441730554, "question_id": 32463048, "link": "https://stackoverflow.com/questions/32463048/rails-admin-error", "title": "Rails admin error", "body": "<p>I'm building a rails app and now I would like to add the rails_admin gem I've added the gem to the gemfile and generated the initializers and configure it to use cancan and devise The app works as before I've added the gem I can see the main page of the admin console at:</p>\n\n<pre><code>http://127.0.0.1:3000/admin/\n</code></pre>\n\n<p>I can manage all the other model but when i try to show and edit an instance of the model aircraft i get this error:</p>\n\n<pre><code>undefined method `klass' for nil:NilClass\n</code></pre>\n\n<p>full output: <a href=\"http://pastebin.com/Z2xDAmSc\" rel=\"nofollow\">http://pastebin.com/Z2xDAmSc</a></p>\n\n<p>after a little investigation I've discovered that the problem is the association between the aircraft model and the user through the pilot aircraft model:</p>\n\n<p>this is my code:</p>\n\n<p>aircraft.rb</p>\n\n<pre><code>class Aircraft &lt; ActiveRecord::Base\n\n scope :without_other,         -&gt; { where(\"name &lt;&gt; 'Other'\").order('name ASC') }\n has_many  :pilot_aircrafts\n has_many  :authorised_pilots, -&gt; { uniq }, through: :pilot_aircrafts, source: :user\n</code></pre>\n\n<p>pilot_aircraft.rb</p>\n\n<pre><code>class PilotAircraft &lt; ActiveRecord::Base\n belongs_to :user\n belongs_to :aircraft\n validates_uniqueness_of :user_id, scope: :aircraft_id\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n has_many :pilot_aircrafts\n has_many :authorised_aircrafts, -&gt; { without_other }, through: :pilot_aircrafts, source: :aircraft\n has_many :all_authorised_aircrafts, through: :pilot_aircrafts, source: :aircraft\n accepts_nested_attributes_for :pilot_aircrafts, :allow_destroy =&gt; true,:reject_if =&gt; :all_blank\n</code></pre>\n\n<p>and the schema.rb</p>\n\n<pre><code>create_table \"pilot_aircrafts\", force: :cascade do |t|\n t.integer  \"user_id\"\n t.integer  \"aircraft_id\"\n ....\n t.datetime \"created_at\"\n t.datetime \"updated_at\"\nend\n</code></pre>\n\n<p>I've spent all the afternoon experimenting but I couldn't find the problem,</p>\n\n<p>other useful info:</p>\n\n<p>ruby: 2.2.2\nrails: 4.2.0\nrails_admin: 0.7.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "google-api-client"], "answers": [{"tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": true, "score": 4, "last_activity_date": 1441730787, "last_edit_date": 1441730787, "creation_date": 1441730341, "answer_id": 32462988, "question_id": 32462707, "link": "https://stackoverflow.com/questions/32462707/best-place-to-configure-a-global-setting-for-a-gem-rails/32462988#32462988", "title": "best place to configure a global setting for a gem Rails", "body": "<p>If the option depends on application instance running, say you need 1 retry on local machine or staging, but want to have 5 retries on production, preferable way to handle this is to keep it in environment variable and fetch it on application startup. </p>\n\n<p>So place following code in your initializer(say <code>./config/initializers/google_api_client.rb</code>):</p>\n\n<pre><code>Google::Apis::RequestOptions.default.retries = ENV['google_api_client_retries']\n</code></pre>\n\n<p>then you can start application specifying it with:</p>\n\n<pre><code>google_api_client_retries=1 bundle exec rails s\n</code></pre>\n\n<p>You can keep environment variables in file(to keep things simple in development environment) using <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow\">dotenv gem</a>, just place it in <code>./.env</code> file:</p>\n\n<pre><code>google_api_client_retries: 1\n</code></pre>\n\n<p>and it will be fetched automatically, so you start app with just</p>\n\n<pre><code>bundle exec rails s\n</code></pre>\n\n<hr>\n\n<p>If you want to just have it 5 on any application instance, you can just explicitly set it to 5 in initializer.</p>\n"}], "owner": {"reputation": 57, "user_id": 5313763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70bec1123b32f6a4227ee1c08d295de7?s=128&d=identicon&r=PG&f=1", "display_name": "noob", "link": "https://stackoverflow.com/users/5313763/noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "accepted_answer_id": 32462988, "answer_count": 1, "score": 2, "last_activity_date": 1441733093, "creation_date": 1441729225, "last_edit_date": 1441733093, "question_id": 32462707, "link": "https://stackoverflow.com/questions/32462707/best-place-to-configure-a-global-setting-for-a-gem-rails", "title": "best place to configure a global setting for a gem Rails", "body": "<p>I am using the <a href=\"https://github.com/google/google-api-ruby-client\" rel=\"nofollow\">Google Api Client</a> gem in a rails application.</p>\n\n<p>I need to set the following configuration globally:</p>\n\n<pre><code>Google::Apis::RequestOptions.default.retries = 5\n</code></pre>\n\n<p>What is the best practice/location for doing that.</p>\n\n<p><em>Note to others having issues setting this option:</em> The Google::Apis class does not exist until 0.9.x versions of the google_api_client gem which are not compatible with prior releases.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "libraries", "require"], "comments": [{"owner": {"reputation": 83, "user_id": 5104407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff39172e34f2d0a50558652ed9139468?s=128&d=identicon&r=PG&f=1", "display_name": "gingerEd", "link": "https://stackoverflow.com/users/5104407/gingered"}, "edited": false, "score": 0, "creation_date": 1441727971, "post_id": 32462333, "comment_id": 52786560, "body": "P/S: I found [this][1] and [this][2] questions but they talk about Ruby and though it might be useful to this case, I don&#39;t know if Rails already handles it.     [1]: <a href=\"http://stackoverflow.com/questions/19753060/is-it-possible-to-unload-un-require-a-ruby-library\" title=\"is it possible to unload un require a ruby library\">stackoverflow.com/questions/19753060/&hellip;</a>   [2]: <a href=\"http://stackoverflow.com/questions/3424663/unload-a-ruby-class\">stackoverflow.com/questions/3424663/unload-a-ruby-class</a>"}, {"owner": {"reputation": 14194, "user_id": 290338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86f90bd8375fa7f611f43ee03cebcd10?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/290338/anatoly"}, "edited": false, "score": 0, "creation_date": 1441734037, "post_id": 32462333, "comment_id": 52789929, "body": "Have you heard that Rails preloads every library in the app in production environment? Why do you care of loading/unloading certain classes/modules?"}, {"owner": {"reputation": 83, "user_id": 5104407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff39172e34f2d0a50558652ed9139468?s=128&d=identicon&r=PG&f=1", "display_name": "gingerEd", "link": "https://stackoverflow.com/users/5104407/gingered"}, "reply_to_user": {"reputation": 14194, "user_id": 290338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86f90bd8375fa7f611f43ee03cebcd10?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/290338/anatoly"}, "edited": false, "score": 0, "creation_date": 1442235467, "post_id": 32462333, "comment_id": 52985708, "body": "Thank you for answering. I didn&#39;t know that, I&#39;m currently working in development mode. I just asked because I don&#39;t like the idea of having unrequired libraries consuming memory. You know if there&#39;s a way of avoiding this preload?"}], "owner": {"reputation": 83, "user_id": 5104407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff39172e34f2d0a50558652ed9139468?s=128&d=identicon&r=PG&f=1", "display_name": "gingerEd", "link": "https://stackoverflow.com/users/5104407/gingered"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441727944, "creation_date": 1441727944, "question_id": 32462333, "link": "https://stackoverflow.com/questions/32462333/ruby-on-rails-unload-libraries-in-the-lib-path", "title": "Ruby on Rails - unload libraries in the /lib path", "body": "<p><strong>The situation</strong></p>\n\n<p>The general idea is this: in the <code>create</code> method (in the controller) depending on a parameter, I have to run one of three methods as following:</p>\n\n<pre><code>case a\nwhen 1..5\n  runMethod1(a)\nwhen 6\n  runMethod2\nwhen String\n  runMethod3(a)\nelse\n  puts \"I have no idea what to do with that.\"\nend\n</code></pre>\n\n<p>These methods are also defined in the same controller. Now, each method calls a particular library by using <code>require</code>. Those libraries aren't gems, they are files coded by me and located in the  framework <code>/lib</code> path.</p>\n\n<pre><code>def runMethod1(a)\n    require 'my_first_library'\n    ...\nend\n</code></pre>\n\n<p>What I am trying to do here is calling the library only when I need it, because each method might have an important processing and/or memory load on the system and I don't want to call all the libraries at the beginnig because I don't know if they all are gonna be used.</p>\n\n<p><strong>The Question</strong></p>\n\n<p>I'd like to know if Rails takes care of unloading this libraries when the method has finished or if it keeps it after the first call.</p>\n"}, {"tags": ["ruby", "gem"], "answers": [{"tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": false, "score": 0, "last_activity_date": 1441731272, "creation_date": 1441731272, "answer_id": 32463245, "question_id": 32462256, "link": "https://stackoverflow.com/questions/32462256/important-remember-to-use-the-included-executable-certifed-update-regularly-t/32463245#32463245", "title": "IMPORTANT: Remember to use the included executable `certifed-update` regularly to keep your certificate bundle up to date", "body": "<p>It seems you're using <a href=\"https://github.com/stevegraham/certified\" rel=\"nofollow\">this gem</a> and it's getting run somehow after <code>gem install bundler</code>. Try deleting it via <code>gem uninstall certified</code> and rerun <code>gem install bundler</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 370, "user_id": 10421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f782ed193dc153003d7944ce830ca42?s=128&d=identicon&r=PG", "display_name": "olegueret", "link": "https://stackoverflow.com/users/10421/olegueret"}, "is_accepted": true, "score": 0, "last_activity_date": 1441798676, "creation_date": 1441798676, "answer_id": 32478525, "question_id": 32462256, "link": "https://stackoverflow.com/questions/32462256/important-remember-to-use-the-included-executable-certifed-update-regularly-t/32478525#32478525", "title": "IMPORTANT: Remember to use the included executable `certifed-update` regularly to keep your certificate bundle up to date", "body": "<p>There is a typo in the message: <code>certifed-update</code> does not exist, it's <code>certified-update</code> (notice the missing \"i\"). It's strange as this typo is <a href=\"https://github.com/stevegraham/certified/commit/fb9ec7ee6d7451b836c5103a72558a0ee071f434\" rel=\"nofollow\">fixed</a> in latest gem code (maybe the author forgot to publish a new version, who knows)</p>\n\n<p>You can run this tool manually with:</p>\n\n<pre><code>bundle exec certified-update\n</code></pre>\n\n<p>Which yields this message:</p>\n\n<blockquote>\n  <p>Updating ca-bundle from\n  <a href=\"https://raw.githubusercontent.com/bagder/ca-bundle/master/ca-bundle.crt\" rel=\"nofollow\">https://raw.githubusercontent.com/bagder/ca-bundle/master/ca-bundle.crt</a>\n  Certificate bundle updated. Remember to do this regularly!</p>\n</blockquote>\n\n<p>In order to remember to update the certificates you can configure a periodic reminder in your calendar, or you can setup a cron job or similar to make it automatically ;-)</p>\n"}], "owner": {"reputation": 65650, "user_id": 343204, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/uOZYt.jpg?s=128&g=1", "display_name": "Snowcrash", "link": "https://stackoverflow.com/users/343204/snowcrash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 32478525, "answer_count": 2, "score": 0, "last_activity_date": 1441798676, "creation_date": 1441727739, "question_id": 32462256, "link": "https://stackoverflow.com/questions/32462256/important-remember-to-use-the-included-executable-certifed-update-regularly-t", "title": "IMPORTANT: Remember to use the included executable `certifed-update` regularly to keep your certificate bundle up to date", "body": "<pre><code>$ gem install bundler\n</code></pre>\n\n<p>gives me (at the end of the successful install):</p>\n\n<pre><code>Post-install message from certified:\nIMPORTANT: Remember to use the included executable `certifed-update` regularly to keep your certificate bundle up to date.\n</code></pre>\n\n<p>I can't see how I'm going to remember to keep this executable indefinitely up to date. Any suggestions?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 3458, "user_id": 693854, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6c2f0695e0ca4445a223ce325c7fb970?s=128&d=identicon&r=PG", "display_name": "Mark Meyer", "link": "https://stackoverflow.com/users/693854/mark-meyer"}, "edited": false, "score": 0, "creation_date": 1441727275, "post_id": 32461996, "comment_id": 52786131, "body": "A more standard regex might be to use <code>&#47;\\d+&#47;</code> so you won&#39;t have the 0 or more times match"}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 7, "last_activity_date": 1441731973, "last_edit_date": 1441731973, "creation_date": 1441727221, "answer_id": 32462079, "question_id": 32461996, "link": "https://stackoverflow.com/questions/32461996/why-does-scan-match-characters-when-i-ask-it-to-match-digits/32462079#32462079", "title": "Why does scan match &quot;&quot; characters when I ask it to match digits?", "body": "<p>It is due to the fact that <code>*</code> repeats <strong><em>zero</strong> or more times</em>. Hence, at positions with no digits, it will match an empty string. Use <code>+</code> instead (repeat <strong><em>one</strong> or more times</em>).</p>\n"}], "owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 32462079, "answer_count": 1, "score": 2, "last_activity_date": 1441731973, "creation_date": 1441726999, "last_edit_date": 1441727326, "question_id": 32461996, "link": "https://stackoverflow.com/questions/32461996/why-does-scan-match-characters-when-i-ask-it-to-match-digits", "title": "Why does scan match &quot;&quot; characters when I ask it to match digits?", "body": "<p>If I run:</p>\n\n<pre><code>\"607.807-000\".scan(/([[:digit:]]*)/)\n</code></pre>\n\n<p>Then I get back the Array:</p>\n\n<pre><code>[\"607\", \"\", \"807\", \"\", \"000\", \"\"]\n</code></pre>\n\n<p>Why does scan match these <code>\"\"</code> characters?</p>\n"}, {"tags": ["ruby", "aws-sdk", "sidekiq", "shoryuken"], "answers": [{"tags": [], "owner": {"reputation": 5872, "user_id": 464685, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1e9ce2c15d24684d45ae475c5d9fc4d4?s=128&d=identicon&r=PG", "display_name": "Pablo Cantero", "link": "https://stackoverflow.com/users/464685/pablo-cantero"}, "is_accepted": true, "score": 3, "last_activity_date": 1442453445, "creation_date": 1442453445, "answer_id": 32621257, "question_id": 32461435, "link": "https://stackoverflow.com/questions/32461435/customizing-retry-delays-with-amazon-sqs-from-shoryuken-ruby/32621257#32621257", "title": "Customizing retry delays with Amazon SQS from Shoryuken (ruby)", "body": "<p>Currently Shoryuken only supports fixed values for exponential backoff, but you can submit a PR changing <a href=\"https://github.com/phstc/shoryuken/blob/master/lib/shoryuken/middleware/server/exponential_backoff_retry.rb\" rel=\"nofollow\">ExponentialBackoffRetry</a> with:</p>\n\n<pre><code># https://github.com/phstc/shoryuken/blob/290b1cb4c4c40f34881d7f7b7a3beda949099cf5/lib/shoryuken/middleware/server/exponential_backoff_retry.rb#L11\n\nretry_intervals = worker.class.get_shoryuken_options['retry_intervals']\n\nretry_intervals = if retry_intervals.respond_to? :call\n                    retry_intervals.call(worker, queue, sqs_msg, body)\n                  else\n                    Array(retry_intervals)\n                  end\n</code></pre>\n\n<p>So you will be able to use a proc or fixed values to set <code>retry_intervals</code>, i.e.:</p>\n\n<pre><code>class MyWorker\n  include Shoryuken::Worker\n\n  shoryuken_options queue: 'default', \n    retry_intervals: -&gt; (worker, queue, sqs_msg, body) { worker.your_method(...) }\nend\n</code></pre>\n\n<p>OR you can remove the default <code>ExponentialBackoffRetry</code> and add yours:</p>\n\n<pre><code>Shoryuken.configure_server do |config|\n  config.server_middleware do |chain|\n    chain.remove Middleware::Server::ExponentialBackoffRetry\n    chain.add YourExponentialBackoffRetry\n  end\nend\n</code></pre>\n\n<p>But keep in mind that SQS does not officially support exponential backoff, it's something implemented in Shoryuken using the Visibility Timeout, which can extended to a maximum of 12 hours.</p>\n\n<blockquote>\n  <p><a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_ChangeMessageVisibility.html\" rel=\"nofollow\">https://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_ChangeMessageVisibility.html</a></p>\n  \n  <p>You can continue to call ChangeMessageVisibility to extend the visibility timeout to a maximum of 12 hours. If you try to extend beyond 12 hours, the request will be rejected.</p>\n</blockquote>\n"}], "owner": {"reputation": 455, "user_id": 1531472, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/95503e45a62c50082690d4ed5b5c4d8b?s=128&d=identicon&r=PG", "display_name": "JPG", "link": "https://stackoverflow.com/users/1531472/jpg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1515, "favorite_count": 0, "accepted_answer_id": 32621257, "answer_count": 1, "score": 2, "last_activity_date": 1486631558, "creation_date": 1441725268, "last_edit_date": 1486631558, "question_id": 32461435, "link": "https://stackoverflow.com/questions/32461435/customizing-retry-delays-with-amazon-sqs-from-shoryuken-ruby", "title": "Customizing retry delays with Amazon SQS from Shoryuken (ruby)", "body": "<p>I am migrating a background job processing service made with <a href=\"https://github.com/mperham/sidekiq\" rel=\"nofollow\">sidekiq</a> to <a href=\"https://github.com/phstc/shoryuken\" rel=\"nofollow\">shoryuken</a>, which is based on <a href=\"https://aws.amazon.com/sqs/\" rel=\"nofollow\">Amazon SQS</a>.\nWith <strong>sidekiq</strong> you can customize the retries pattern by using <code>sidekiq_retry_in</code>:</p>\n\n<pre><code>class WorkerWithCustomRetry\n    include Sidekiq::Worker\n    sidekiq_options :retry =&gt; 5\n\n    sidekiq_retry_in do |count|\n        retry_count(count)\n    end\n\n    def self.retry_count(count)\n    ...\n    end\nend\n</code></pre>\n\n<p>where, in my case, <code>retry_count</code>returns the delay for the next retry based on external configuration.\nWith <strong>shoryuken</strong> retries are yielded to SQS which handle retries automatically as long as the message is not deleted by the consumer application. However with <strong>shoryuken</strong> you can change the delay by using <code>retry_intervals</code> but <a href=\"https://github.com/phstc/shoryuken/wiki/Worker-options#retry_intervals\" rel=\"nofollow\">documentation</a> only explains how to set fixed values:</p>\n\n<pre><code>class MyWorker\n    include Shoryuken::Worker\n\n    shoryuken_options queue: 'default', retry_intervals: [360, 1200, 3600] # 5.minutes, 20.minutes and 1.hour\n\nend\n</code></pre>\n\n<p>I need to customize the delay for retries the same way as with <strong>sidekiq</strong>, using a <code>retry_count</code> method which returns different values depending on external data. Is this possible or does exist a workaround to do that with <strong>shoryuken</strong>?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "is_accepted": true, "score": 1, "last_activity_date": 1441734078, "last_edit_date": 1441734078, "creation_date": 1441727172, "answer_id": 32462054, "question_id": 32461120, "link": "https://stackoverflow.com/questions/32461120/rail-save-to-database-encoded-html-and-show-in-view/32462054#32462054", "title": "Rail save to database encoded html and show in view", "body": "<p>use rails sanitizer helpers</p>\n\n<pre><code>=simple_format @question.question_text\n=h @question.question_text\n</code></pre>\n\n<p>btw: \ninstead of </p>\n\n<pre><code>format.html { render :html =&gt; \"&lt;div class='col-md-12 portfolio-item' id='question_#{@question.id}'&gt; #{@question.question_text} at &lt;i&gt;#{@question.created_at}&lt;/i&gt;&lt;/div&gt;\" } \n</code></pre>\n\n<p>you can do</p>\n\n<pre><code>html: render_to_string \"path/to/template\"\n</code></pre>\n\n<p>which is way more cool and flexible. can use whatever you want in your template, regular hml stuff for example</p>\n"}], "owner": {"reputation": 1312, "user_id": 2280562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3a1ecbfd6f642d6f18eaa9a51edbed89?s=128&d=identicon&r=PG", "display_name": "Sebastian Corneliu V&#238;rlan", "link": "https://stackoverflow.com/users/2280562/sebastian-corneliu-v%c3%aerlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32462054, "answer_count": 1, "score": 2, "last_activity_date": 1441734078, "creation_date": 1441724414, "question_id": 32461120, "link": "https://stackoverflow.com/questions/32461120/rail-save-to-database-encoded-html-and-show-in-view", "title": "Rail save to database encoded html and show in view", "body": "<p>I have a made with form_for with a textarea. After I press SEND button , with ajax gets the value and go to create method witch is:</p>\n\n<pre><code>def create\n    @question = Question.create(question_params)\n        respond_to do |format|\n            if @question.save\n                #format.json { render :json =&gt; @question.to_json, :status =&gt; 202 } \n                format.html { render :html =&gt; \"&lt;div class='col-md-12 portfolio-item' id='question_#{@question.id}'&gt; #{@question.question_text} at &lt;i&gt;#{@question.created_at}&lt;/i&gt;&lt;/div&gt;\" } \n          else\n                    format.json { render :json =&gt; @question.errors, :status =&gt; 403 }\n          end\n    end\nend\n\n\ndef question_params\n    params.require(:question).permit(:question_text)\nend\n</code></pre>\n\n<p>The problem is that if I type alert(\"ok\") the inserted data on the database is not encoded. So next time when I refresh the page a OK popup appear. How can I encode?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "routing", "rails-routing"], "answers": [{"comments": [{"owner": {"reputation": 2359, "user_id": 405454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IDzwW.png?s=128&g=1", "display_name": "mhutter", "link": "https://stackoverflow.com/users/405454/mhutter"}, "edited": false, "score": 1, "creation_date": 1441727773, "post_id": 32461122, "comment_id": 52786445, "body": "Why is it better to do it in nginx or apache?"}, {"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1441781922, "post_id": 32461122, "comment_id": 52806813, "body": "Because further you may face a problem of redirecting from http to https for example. Because nginx is written using C with focusing on such tasks, so it will be faster than Rails."}], "tags": [], "owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1441724422, "last_edit_date": 1495540293, "creation_date": 1441724422, "answer_id": 32461122, "question_id": 32461029, "link": "https://stackoverflow.com/questions/32461029/add-www-to-url-when-its-not-present-on-ruby-on-rails/32461122#32461122", "title": "Add WWW to URL when it&#39;s not present on Ruby on Rails", "body": "<p>It's better to do it in nginx or apache (depends on what you're using). Please see these topics:</p>\n\n<p><strong>For nginx</strong>\n<a href=\"https://stackoverflow.com/questions/7947030/nginx-no-www-to-www-and-www-to-no-www\">Nginx no-www to www and www to no-www</a></p>\n\n<p><strong>For Apache</strong>\n<a href=\"https://stackoverflow.com/questions/1100343/apache-redirect-from-non-www-to-www\">apache redirect from non www to www</a></p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1441729664, "last_edit_date": 1441729664, "creation_date": 1441726984, "answer_id": 32461992, "question_id": 32461029, "link": "https://stackoverflow.com/questions/32461029/add-www-to-url-when-its-not-present-on-ruby-on-rails/32461992#32461992", "title": "Add WWW to URL when it&#39;s not present on Ruby on Rails", "body": "<p>You might consider a rack middleware like <a href=\"https://github.com/stjhimy/rack-www\" rel=\"nofollow\">rack-www</a> or <a href=\"https://github.com/jtrupiano/rack-rewrite\" rel=\"nofollow\">rack-rewrite</a>. Setup of <code>rack-www</code> is only two steps: </p>\n\n<pre><code># Add to Gemfile (and run `bundler`)\ngem 'rack-www'\n\n# configure middleware via `application.rb` (for all environments)\n# or the environment specific configuration file\n# `environments/&lt;environment&gt;.rb`\nconfig.middleware.use Rack::WWW, :www =&gt; true\n</code></pre>\n"}], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1441729664, "creation_date": 1441724087, "question_id": 32461029, "link": "https://stackoverflow.com/questions/32461029/add-www-to-url-when-its-not-present-on-ruby-on-rails", "title": "Add WWW to URL when it&#39;s not present on Ruby on Rails", "body": "<p>I want to force my URL to start with <code>www.</code> when it's not present. </p>\n\n<p>I tried the <code>match</code> method, but it seems to ignore the start of the URL, it seems to do something called Route Globbing, that appearently just works with route segments <a href=\"http://guides.rubyonrails.org/routing.html#route-globbing-and-wildcard-segments\" rel=\"nofollow\">http://guides.rubyonrails.org/routing.html#route-globbing-and-wildcard-segments</a></p>\n\n<p>How do I make my application in RoR always start with www. ?\n-> www.foo.com must remain as it is\n-> foo.com must be redirected to www.foo.com</p>\n"}, {"tags": ["ruby", "bash", "rvm", "bundler"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1441723370, "post_id": 32460649, "comment_id": 52783440, "body": "Does <code>&#47;System&#47;Library&#47;Frameworks&#47;Ruby.framework&#47;Versions&#47;1.8&#47;usr&#47;b&zwnj;&#8203;in&#47;ruby</code> exist?"}], "answers": [{"comments": [{"owner": {"reputation": 65650, "user_id": 343204, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/uOZYt.jpg?s=128&g=1", "display_name": "Snowcrash", "link": "https://stackoverflow.com/users/343204/snowcrash"}, "edited": false, "score": 0, "creation_date": 1441726267, "post_id": 32461055, "comment_id": 52785487, "body": "Yes. That was it. But I had <code>bundler</code> installed before which is why I didn&#39;t even think to install it. I&#39;ve been using it for ever. So some update since  must have removed it."}], "tags": [], "owner": {"reputation": 481, "user_id": 1419464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FlZVa.jpg?s=128&g=1", "display_name": "LukeS", "link": "https://stackoverflow.com/users/1419464/lukes"}, "is_accepted": true, "score": 3, "last_activity_date": 1441724181, "creation_date": 1441724181, "answer_id": 32461055, "question_id": 32460649, "link": "https://stackoverflow.com/questions/32460649/bash-usr-bin-bundle-system-library-frameworks-ruby-framework-versions-1-8-u/32461055#32461055", "title": "-bash: /usr/bin/bundle: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby: bad interpreter: No such file or directory", "body": "<p>You probably didn't install bundler. Try running <code>gem install bundler</code> assuming you installed rubygem!</p>\n"}], "owner": {"reputation": 65650, "user_id": 343204, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/uOZYt.jpg?s=128&g=1", "display_name": "Snowcrash", "link": "https://stackoverflow.com/users/343204/snowcrash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1413, "favorite_count": 0, "accepted_answer_id": 32461055, "answer_count": 1, "score": 3, "last_activity_date": 1441724181, "creation_date": 1441723189, "question_id": 32460649, "link": "https://stackoverflow.com/questions/32460649/bash-usr-bin-bundle-system-library-frameworks-ruby-framework-versions-1-8-u", "title": "-bash: /usr/bin/bundle: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby: bad interpreter: No such file or directory", "body": "<p>When running </p>\n\n<pre><code> $ bundle install\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>-bash: /usr/bin/bundle: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby: bad interpreter: No such file or directory\n</code></pre>\n\n<p>I assume it's something to do with my rvm setup. Or my <code>.bash_profile</code> $PATH setup.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 0, "creation_date": 1441723404, "post_id": 32460598, "comment_id": 52783467, "body": "when I try to reproduce this, I get: <code>plans[1][&#39;price&#39;].class =&gt; Float</code> using ruby 2.0.0 with psych 2.0.6, which confuses me to no end, since I thought I would obtain a string."}, {"owner": {"reputation": 14586, "user_id": 222151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbbe2adedf4308c5978d92fa1a8dbbff?s=128&d=identicon&r=PG", "display_name": "cjm2671", "link": "https://stackoverflow.com/users/222151/cjm2671"}, "edited": false, "score": 0, "creation_date": 1441724540, "post_id": 32460598, "comment_id": 52784345, "body": "Didn&#39;t seem to work for me; the error remains. I think the issue is in the hash part, not the comparison."}], "tags": [], "owner": {"reputation": 14848, "user_id": 206914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qpJw1.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/206914/steve"}, "is_accepted": false, "score": 2, "last_activity_date": 1441723030, "creation_date": 1441723030, "answer_id": 32460598, "question_id": 32460444, "link": "https://stackoverflow.com/questions/32460444/ruby-hash-select/32460598#32460598", "title": "Ruby Hash Select", "body": "<p>YAML values are just strings so <code>plan[1]['price']</code> returns <code>'9.99'</code>, so I think you will need to convert the value to a numeric type before doing the comparison. e.g. <code>plan[1]['price'].to_f &gt; 0</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "edited": false, "score": 0, "creation_date": 1441723211, "post_id": 32460635, "comment_id": 52783331, "body": "ya, and even name it 0: and 1: is bad approaching. we just troubled there in rails."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 14586, "user_id": 222151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbbe2adedf4308c5978d92fa1a8dbbff?s=128&d=identicon&r=PG", "display_name": "cjm2671", "link": "https://stackoverflow.com/users/222151/cjm2671"}, "edited": false, "score": 0, "creation_date": 1441724806, "post_id": 32460635, "comment_id": 52784555, "body": "@cjm2671, what do you mean? <code>plan[&#39;1&#39;][&#39;price&#39;]</code> outside of the <code>select</code> fails?"}, {"owner": {"reputation": 14586, "user_id": 222151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbbe2adedf4308c5978d92fa1a8dbbff?s=128&d=identicon&r=PG", "display_name": "cjm2671", "link": "https://stackoverflow.com/users/222151/cjm2671"}, "edited": false, "score": 0, "creation_date": 1441725131, "post_id": 32460635, "comment_id": 52784769, "body": "No, it actually works even without the plan[1][&#39;price&#39;] outside the select. I tried it in an each and it works just fine; seems the select breaks it."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 14586, "user_id": 222151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbbe2adedf4308c5978d92fa1a8dbbff?s=128&d=identicon&r=PG", "display_name": "cjm2671", "link": "https://stackoverflow.com/users/222151/cjm2671"}, "edited": false, "score": 0, "creation_date": 1441725246, "post_id": 32460635, "comment_id": 52784833, "body": "@cjm2671, could you add the <code>each</code> that you used and what was it&#39;s output so it will be easier to reason about the <code>select</code>?"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1441723786, "last_edit_date": 1441723786, "creation_date": 1441723159, "answer_id": 32460635, "question_id": 32460444, "link": "https://stackoverflow.com/questions/32460444/ruby-hash-select/32460635#32460635", "title": "Ruby Hash Select", "body": "<p><code>0:</code>, <code>1:</code> and so on can be strings. Either use <a href=\"https://en.wikipedia.org/wiki/YAML#Lists\" rel=\"nofollow\">YAML lists</a> or search for a string key:</p>\n\n<pre><code>plan['1']['price']\n</code></pre>\n\n<p>Also note that your select doesn't make much sense anyway, as it will always check the N1 plan.</p>\n"}, {"tags": [], "owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "is_accepted": false, "score": 0, "last_activity_date": 1441723170, "creation_date": 1441723170, "answer_id": 32460639, "question_id": 32460444, "link": "https://stackoverflow.com/questions/32460444/ruby-hash-select/32460639#32460639", "title": "Ruby Hash Select", "body": "<p>Its a string not a float/int/number. You need to cast it. And why not using I18n enginge?</p>\n"}, {"tags": [], "owner": {"reputation": 14586, "user_id": 222151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbbe2adedf4308c5978d92fa1a8dbbff?s=128&d=identicon&r=PG", "display_name": "cjm2671", "link": "https://stackoverflow.com/users/222151/cjm2671"}, "is_accepted": false, "score": 2, "last_activity_date": 1441725604, "creation_date": 1441725604, "answer_id": 32461540, "question_id": 32460444, "link": "https://stackoverflow.com/questions/32460444/ruby-hash-select/32461540#32461540", "title": "Ruby Hash Select", "body": "<p>The problem was related to the structure of the select; it takes a key/value pair. It should have been:</p>\n\n<pre><code>@plans.select {|k,v| v['price']&gt;0}\n</code></pre>\n"}], "owner": {"reputation": 14586, "user_id": 222151, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbbe2adedf4308c5978d92fa1a8dbbff?s=128&d=identicon&r=PG", "display_name": "cjm2671", "link": "https://stackoverflow.com/users/222151/cjm2671"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1441725604, "creation_date": 1441722585, "question_id": 32460444, "link": "https://stackoverflow.com/questions/32460444/ruby-hash-select", "title": "Ruby Hash Select", "body": "<p>I have a YAML file:</p>\n\n<pre><code>0:\n  price: 0\n  storage: 8\n  instances: 1\n  hours: 2\n1:\n  price: 9.99\n  storage: 8\n  instances: 2\n  hours: 25\n</code></pre>\n\n<p>I'm attempting to select all paid plans only as such:</p>\n\n<pre><code>@plans = YAML.load_file(\"#{Rails.root}/config/plans.yml\")\n@paid_plans = @plans.select {|plan| plan[1]['price'] &gt; 0}\n</code></pre>\n\n<p>But it says</p>\n\n<pre><code>no implicit conversion of string into integer\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "json"], "comments": [{"owner": {"reputation": 1628, "user_id": 1788508, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9472263545564d9fc34fbf2d4c62035c?s=128&d=identicon&r=PG", "display_name": "mr. Holiday", "link": "https://stackoverflow.com/users/1788508/mr-holiday"}, "edited": false, "score": 0, "creation_date": 1441723713, "post_id": 32460383, "comment_id": 52783713, "body": "the posted result is already an array, if it is not an array you can split it on carriage return comments[0].split(&quot;\\r&quot;), and you will get the array of each line"}, {"owner": {"reputation": 1717, "user_id": 287836, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b1bba35174ffab9b676b7f8cecda1fe?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/287836/kyle"}, "reply_to_user": {"reputation": 1628, "user_id": 1788508, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9472263545564d9fc34fbf2d4c62035c?s=128&d=identicon&r=PG", "display_name": "mr. Holiday", "link": "https://stackoverflow.com/users/1788508/mr-holiday"}, "edited": false, "score": 0, "creation_date": 1441724261, "post_id": 32460383, "comment_id": 52784149, "body": "thats where my problem lies, it looks like an array but functions like a string"}, {"owner": {"reputation": 1628, "user_id": 1788508, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9472263545564d9fc34fbf2d4c62035c?s=128&d=identicon&r=PG", "display_name": "mr. Holiday", "link": "https://stackoverflow.com/users/1788508/mr-holiday"}, "edited": false, "score": 0, "creation_date": 1441724502, "post_id": 32460383, "comment_id": 52784317, "body": "can you post the exact output of comments[0]"}, {"owner": {"reputation": 1717, "user_id": 287836, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b1bba35174ffab9b676b7f8cecda1fe?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/287836/kyle"}, "reply_to_user": {"reputation": 1628, "user_id": 1788508, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9472263545564d9fc34fbf2d4c62035c?s=128&d=identicon&r=PG", "display_name": "mr. Holiday", "link": "https://stackoverflow.com/users/1788508/mr-holiday"}, "edited": false, "score": 0, "creation_date": 1441725159, "post_id": 32460383, "comment_id": 52784785, "body": "I did, it&#39;s a string of <code>[&quot;hdfdhgdfgdfg\\r&quot;, &quot;This is just a test\\r&quot;, &quot;Thanks!\\r&quot;, &quot;- Kyle&quot;]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1717, "user_id": 287836, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b1bba35174ffab9b676b7f8cecda1fe?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/287836/kyle"}, "edited": false, "score": 0, "creation_date": 1441723272, "post_id": 32460499, "comment_id": 52783373, "body": "I tried this, unfortunately it still gives the same result"}, {"owner": {"reputation": 1717, "user_id": 287836, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b1bba35174ffab9b676b7f8cecda1fe?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/287836/kyle"}, "edited": false, "score": 0, "creation_date": 1441724136, "post_id": 32460499, "comment_id": 52784054, "body": "Thanks, but still no luck. <code>params[&quot;Comment&quot;]</code> is still being interpreted as a string, even though it looks like an array."}, {"owner": {"reputation": 1169, "user_id": 3286645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EKAp2.png?s=128&g=1", "display_name": "nextstep", "link": "https://stackoverflow.com/users/3286645/nextstep"}, "reply_to_user": {"reputation": 1717, "user_id": 287836, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b1bba35174ffab9b676b7f8cecda1fe?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/287836/kyle"}, "edited": false, "score": 0, "creation_date": 1441726055, "post_id": 32460499, "comment_id": 52785349, "body": "You&#39;ll probably need the workaround, explained at the bottom of the answer"}], "tags": [], "owner": {"reputation": 1169, "user_id": 3286645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EKAp2.png?s=128&g=1", "display_name": "nextstep", "link": "https://stackoverflow.com/users/3286645/nextstep"}, "is_accepted": false, "score": 0, "last_activity_date": 1441725744, "last_edit_date": 1441725744, "creation_date": 1441722769, "answer_id": 32460499, "question_id": 32460383, "link": "https://stackoverflow.com/questions/32460383/how-to-format-a-text-area-sent-as-an-array-via-json/32460499#32460499", "title": "How to format a text area sent as an array via JSON?", "body": "<p>You should be able to parse the JSON and populate a hash with all of the values:</p>\n\n<pre><code>require 'json' \n\nhash = JSON.parse(params[\"Comment\"])\n\nputs hash\n\n=&gt; {\"Comment\"=&gt;['all', 'of', 'your', 'values']}\n</code></pre>\n\n<p><strong>This should work for all valid json</strong>. One of the rules of json syntax is that </p>\n\n<blockquote>\n  <p>Data is in name/value pairs</p>\n</blockquote>\n\n<p>The json you provided doesn't supply names for the values, therefore this method might not work.  If this is the case, parsing the raw string and extracting values would do the job as well (although more messy).</p>\n\n<p>How you might go about doing that:</p>\n\n<pre><code>json = params[\"Comment\"]\nnewArray = []\n\njson.split(\" \").each do |element|\n  if element.length &gt; 1\n    newArray &lt;&lt; element\n  end\nend\n</code></pre>\n\n<p>This would at least give you an array with all of your values.</p>\n"}, {"comments": [{"owner": {"reputation": 1717, "user_id": 287836, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b1bba35174ffab9b676b7f8cecda1fe?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/287836/kyle"}, "edited": false, "score": 0, "creation_date": 1441730605, "post_id": 32462635, "comment_id": 52788075, "body": "Perfect, this did it. Thank you very much!"}], "tags": [], "owner": {"reputation": 2359, "user_id": 405454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IDzwW.png?s=128&g=1", "display_name": "mhutter", "link": "https://stackoverflow.com/users/405454/mhutter"}, "is_accepted": true, "score": 1, "last_activity_date": 1441728958, "creation_date": 1441728958, "answer_id": 32462635, "question_id": 32460383, "link": "https://stackoverflow.com/questions/32460383/how-to-format-a-text-area-sent-as-an-array-via-json/32462635#32462635", "title": "How to format a text area sent as an array via JSON?", "body": "<p>First, get rid of those ugly <code>\\r</code>s:</p>\n\n<pre><code>comments.map!(&amp;:chomp)\n</code></pre>\n\n<p>Then, join the lines together:</p>\n\n<pre><code>comment = comments.join(\"\\n\") # using a newline\n# OR, for HTML output:\ncomment = comments.join('&lt;br&gt;')\n</code></pre>\n"}], "owner": {"reputation": 1717, "user_id": 287836, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b1bba35174ffab9b676b7f8cecda1fe?s=128&d=identicon&r=PG", "display_name": "Kyle", "link": "https://stackoverflow.com/users/287836/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 32462635, "answer_count": 2, "score": 1, "last_activity_date": 1441728958, "creation_date": 1441722451, "question_id": 32460383, "link": "https://stackoverflow.com/questions/32460383/how-to-format-a-text-area-sent-as-an-array-via-json", "title": "How to format a text area sent as an array via JSON?", "body": "<p>I'm pretty new to Ruby, and I'm using it work with an API. Text area's sent over the API are converted to the format below before being sent to me via a JSON POST request:</p>\n\n<pre><code>\"Comment\": [\n        \"hdfdhgdfgdfg\\r\",\n        \"This is just a test\\r\",\n        \"Thanks!\\r\",\n        \"- Kyle\"\n    ]\n</code></pre>\n\n<p>And I'm getting the value like this:</p>\n\n<pre><code>comments = params[\"Comment\"]\n</code></pre>\n\n<p>So each line is broken down into what looks like an array. My issue is, it functions just like one big string instead of an array with 4 values. I tried using <code>comments[0]</code> and just printing <code>comments</code> but both return the same result, it just displays everything as a string, ie </p>\n\n<pre><code>[\"hdfdhgdfgdfg\\r\", \"This is just a test\\r\", \"Thanks!\\r\", \"- Kyle\"]\n</code></pre>\n\n<p>But I need to display it as it appears in the text area, ie</p>\n\n<pre><code>hdfdhgdfgdfg\nThis is just a test\nThanks!\n- Kyle\n</code></pre>\n\n<p>I know I could just strip out all the extra characters, but I feel like there has to be a better way. Is there a good way to convert this back to the original format of a text area, or at least to convert it to an array so I can loop through each item and re-format it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "centos", "centos7"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1441721719, "post_id": 32460089, "comment_id": 52782313, "body": "what happens when you type: <code>rvm use 2.2.2</code> ?"}, {"owner": {"reputation": 3592, "user_id": 1951139, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/g8cGg.png?s=128&g=1", "display_name": "Jean Y.C. Yang", "link": "https://stackoverflow.com/users/1951139/jean-y-c-yang"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1441721791, "post_id": 32460089, "comment_id": 52782354, "body": "@shivam <code>[ycyang@study projects]$ rvm use 2.2.2 bash: rvm: command not found...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1441722538, "creation_date": 1441722538, "answer_id": 32460422, "question_id": 32460089, "link": "https://stackoverflow.com/questions/32460089/ruby-not-found-when-login-as-user-on-centos7/32460422#32460422", "title": "Ruby Not Found When login as user on Centos7", "body": "<p>This is because rvm is not running. You can load it by:</p>\n\n<pre><code>source ~/.rvm/script/rvm\nruby -v\n# ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]\n</code></pre>\n\n<p>If the above solution works, you should add following in your <code>.bashrc</code> file to load rvm everytime by default:</p>\n\n<pre><code>[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\"\n</code></pre>\n\n<p>If it still doesnot work, it may be because you installed rvm as root and now you are facing permission issues. In that case you may want to reinstall rvm is your current user <em>(and not as root)</em></p>\n"}, {"tags": [], "owner": {"reputation": 481, "user_id": 1419464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FlZVa.jpg?s=128&g=1", "display_name": "LukeS", "link": "https://stackoverflow.com/users/1419464/lukes"}, "is_accepted": true, "score": 1, "last_activity_date": 1441722559, "creation_date": 1441722559, "answer_id": 32460432, "question_id": 32460089, "link": "https://stackoverflow.com/questions/32460089/ruby-not-found-when-login-as-user-on-centos7/32460432#32460432", "title": "Ruby Not Found When login as user on Centos7", "body": "<p>This is probably because your path doesn't include rvm when you are under your user.</p>\n\n<p>You can edit your .bashrc or .bash_profile file and add the following:</p>\n\n<p><code>[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\"</code> </p>\n\n<p>Then you need to reload your profile with <code>source ~/.bashrc</code> or <code>source ~/.bash_profile</code> depending on which one you modified! </p>\n"}], "owner": {"reputation": 3592, "user_id": 1951139, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/g8cGg.png?s=128&g=1", "display_name": "Jean Y.C. Yang", "link": "https://stackoverflow.com/users/1951139/jean-y-c-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 32460432, "answer_count": 2, "score": 0, "last_activity_date": 1441722559, "creation_date": 1441721536, "question_id": 32460089, "link": "https://stackoverflow.com/questions/32460089/ruby-not-found-when-login-as-user-on-centos7", "title": "Ruby Not Found When login as user on Centos7", "body": "<p>I login in Centos 7 as root, installed Ruby via rvm and installed rails via gem.</p>\n\n<p>I followed all the steps in this article:\n<a href=\"http://tecadmin.net/install-ruby-2-2-on-centos-rhel/\" rel=\"nofollow\">How to Install Ruby 2.2.2 on CentOS/RHEL with RVM</a></p>\n\n<p>And when I login as user, ruby, gem and rails are all not found.</p>\n\n<pre><code>    [ycyang@study projects]$ ruby -v\n    bash: ruby: command not found...\n    [ycyang@study projects]$ gem -v\n    bash: gem: command not found...\n    [ycyang@study projects]$ sudo gem -v\n    [sudo] password for ycyang: \n    sudo: gem: command not found\n</code></pre>\n\n<p>and it works as root:</p>\n\n<pre><code>    [root@study projects]# ruby -v\n    ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]\n    [root@study projects]# gem -v\n    2.4.8\n</code></pre>\n\n<p>How to set up my ruby and make it available to all users? </p>\n"}, {"tags": ["ruby", "json", "gem", "bundler"], "comments": [{"owner": {"reputation": 5368, "user_id": 786062, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5dbb7a37b65f9e4ed415a97ab39300e5?s=128&d=identicon&r=PG", "display_name": "asfallows", "link": "https://stackoverflow.com/users/786062/asfallows"}, "edited": false, "score": 0, "creation_date": 1441721435, "post_id": 32459990, "comment_id": 52782097, "body": "Not sure if it is relevant, so I&#39;ll add it as a comment: the host in question is a DigitalOcean VPS"}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 1099939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d98c735eb598e728560d0ef402523040?s=128&d=identicon&r=PG", "display_name": "user1099939", "link": "https://stackoverflow.com/users/1099939/user1099939"}, "is_accepted": false, "score": 1, "last_activity_date": 1443616964, "creation_date": 1443616964, "answer_id": 32866433, "question_id": 32459990, "link": "https://stackoverflow.com/questions/32459990/unable-to-install-json-1-8-3-in-ruby-2-2-1/32866433#32866433", "title": "Unable to install json 1.8.3 in ruby 2.2.1", "body": "<p>Install the following package in ubuntu</p>\n\n<p>sudo apt-get install libgmp3-dev</p>\n\n<p>For more information\n<a href=\"https://github.com/flori/json/issues/253\" rel=\"nofollow\">https://github.com/flori/json/issues/253</a></p>\n"}, {"tags": [], "owner": {"reputation": 2151, "user_id": 3635467, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/VCVh3.jpg?s=128&g=1", "display_name": "Jonathan Wheeler", "link": "https://stackoverflow.com/users/3635467/jonathan-wheeler"}, "is_accepted": false, "score": 1, "last_activity_date": 1472826171, "creation_date": 1472826171, "answer_id": 39294719, "question_id": 32459990, "link": "https://stackoverflow.com/questions/32459990/unable-to-install-json-1-8-3-in-ruby-2-2-1/39294719#39294719", "title": "Unable to install json 1.8.3 in ruby 2.2.1", "body": "<p>In OSX, do the following</p>\n\n<pre><code>brew install coreutils\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3146, "user_id": 3622415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/873e6fd319032200fd5dc359f5d897eb?s=128&d=identicon&r=PG", "display_name": "kangkyu", "link": "https://stackoverflow.com/users/3622415/kangkyu"}, "edited": false, "score": 2, "creation_date": 1517352309, "post_id": 44766466, "comment_id": 84059047, "body": "Thank you! I found the answers helpful. I ended up simply doing &quot;bundle update json&quot;"}], "tags": [], "owner": {"reputation": 129, "user_id": 6256690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1jwZh.jpg?s=128&g=1", "display_name": "Matt Lee", "link": "https://stackoverflow.com/users/6256690/matt-lee"}, "is_accepted": false, "score": 13, "last_activity_date": 1498502247, "creation_date": 1498502247, "answer_id": 44766466, "question_id": 32459990, "link": "https://stackoverflow.com/questions/32459990/unable-to-install-json-1-8-3-in-ruby-2-2-1/44766466#44766466", "title": "Unable to install json 1.8.3 in ruby 2.2.1", "body": "<p>simple fix delete your gem.lock file and run bundle install this should rebuild the gemlock file and fix the issue, i was getting the same error when trying to move my development environment from nitrous.io to cloud9,. hope this help</p>\n\n<p>copy from migs120's answer <a href=\"https://github.com/flori/json/issues/253\" rel=\"noreferrer\">https://github.com/flori/json/issues/253</a></p>\n\n<p>I use macOS sierra, it's work fine.</p>\n"}, {"tags": [], "owner": {"reputation": 880, "user_id": 7516788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2124a4abf91fc3ac4e4a08c8536f882f?s=128&d=identicon&r=PG", "display_name": "shubham mishra", "link": "https://stackoverflow.com/users/7516788/shubham-mishra"}, "is_accepted": false, "score": 3, "last_activity_date": 1592841587, "creation_date": 1592841587, "answer_id": 62518598, "question_id": 32459990, "link": "https://stackoverflow.com/questions/32459990/unable-to-install-json-1-8-3-in-ruby-2-2-1/62518598#62518598", "title": "Unable to install json 1.8.3 in ruby 2.2.1", "body": "<p>I would suggest try this for MacOS,</p>\n<pre><code>bundle update json --conservative\n</code></pre>\n<p>It will resolve the error.</p>\n"}], "owner": {"reputation": 5368, "user_id": 786062, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5dbb7a37b65f9e4ed415a97ab39300e5?s=128&d=identicon&r=PG", "display_name": "asfallows", "link": "https://stackoverflow.com/users/786062/asfallows"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5776, "favorite_count": 0, "answer_count": 4, "score": 7, "last_activity_date": 1592841587, "creation_date": 1441721238, "last_edit_date": 1495542310, "question_id": 32459990, "link": "https://stackoverflow.com/questions/32459990/unable-to-install-json-1-8-3-in-ruby-2-2-1", "title": "Unable to install json 1.8.3 in ruby 2.2.1", "body": "<p>I am running <code>bundle install</code> in <code>Ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-linux]</code> (installed with rvm 1.25.33) and <code>bundler 1.10.6</code></p>\n\n<p>When it tries to install json 1.8.3, I get the following:</p>\n\n<pre><code>Installing json 1.8.3 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n/home/andrew/.rvm/rubies/ruby-2.2.1/bin/ruby -r ./siteconf20150905-31357-cgs3dn.rb extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling generator.c\nlinking shared-object json/ext/generator.so\n\nmake \"DESTDIR=\" install\n./install -m 0755 generator.so ./.gem.20150905-31357-199esvy/json/ext\nmake: ./install: Command not found\nmake: *** [install-so] Error 127\n\nmake install failed, exit code 2\n</code></pre>\n\n<p>On the same host, I am able to install json 1.8.3 in ruby 2.1.3.</p>\n\n<p>In <a href=\"https://stackoverflow.com/questions/17444777/make-install-command-not-found\">another SO question</a> I see the suggestion to make sure that <code>install</code> is available. I get valid output when I do <code>install --help</code>.</p>\n\n<p>What should I do? Why is the gem able to install in 2.1.3 and not 2.2.1?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "paperclip"], "answers": [{"tags": [], "owner": {"reputation": 29107, "user_id": 122080, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6fa1cdda524d49996a8bc6917328de3d?s=128&d=identicon&r=PG", "display_name": "Damien MATHIEU", "link": "https://stackoverflow.com/users/122080/damien-mathieu"}, "is_accepted": true, "score": 3, "last_activity_date": 1441722027, "creation_date": 1441722027, "answer_id": 32460231, "question_id": 32459959, "link": "https://stackoverflow.com/questions/32459959/heroku-paperclip-images-appear-but-then-disappear/32460231#32460231", "title": "heroku paperclip images appear but then disappear", "body": "<p>Heroku has an <a href=\"https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem\" rel=\"nofollow\">ephemeral filesystem</a>.<br>\nThat is because each running dyno is an independent container (much like docker) which shared nothing with other dynos, and is destroyed when the app is restarted/deployed.</p>\n\n<p>So any file written on disk will be lost when the dyno is restarted, and is not recoverable.</p>\n\n<p>You need to configure paperclip to upload images to a dedicated file storage system like <a href=\"https://aws.amazon.com/s3/\" rel=\"nofollow\">Amazon S3</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "is_accepted": false, "score": 0, "last_activity_date": 1441722271, "creation_date": 1441722271, "answer_id": 32460321, "question_id": 32459959, "link": "https://stackoverflow.com/questions/32459959/heroku-paperclip-images-appear-but-then-disappear/32460321#32460321", "title": "heroku paperclip images appear but then disappear", "body": "<p>You can't store images on heroku, or anything for that matter.  Your uploaded files are available for temporary use only, long enough to process them away to cloud storage elsewhere.</p>\n\n<p><a href=\"http://cloudinary.com/\" rel=\"nofollow\">http://cloudinary.com/</a>  offers development accounts for free; <a href=\"https://aws.amazon.com/s3/\" rel=\"nofollow\">https://aws.amazon.com/s3/</a> has become ridiculously cheap and gives new devs a long free trial.  There are other resources but ultimately you have to choose storage which isn't transient.</p>\n\n<p>You can use gems like carrierwave, or attachinary to easily access and store with either of those storage locations.</p>\n"}], "owner": {"reputation": 117, "user_id": 4559611, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/297060a87f617caf204311d1280a6748?s=128&d=identicon&r=PG&f=1", "display_name": "prolog12345", "link": "https://stackoverflow.com/users/4559611/prolog12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 1, "accepted_answer_id": 32460231, "answer_count": 2, "score": 0, "last_activity_date": 1441722271, "creation_date": 1441721168, "question_id": 32459959, "link": "https://stackoverflow.com/questions/32459959/heroku-paperclip-images-appear-but-then-disappear", "title": "heroku paperclip images appear but then disappear", "body": "<p>I uploaded my app to heroku. The app was built with ruby on rails and had the activeadmin and paperclip gem installed. The files are configured properly and i was able to upload images using he active admin gem. this worked perfectly loaclly and worked fine on heroku until i uploaded more images, now all the images have disappeared. Any ideas on how this can be sorted?</p>\n"}, {"tags": ["ruby", "json", "api", "etsy"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1441721588, "post_id": 32459954, "comment_id": 52782218, "body": "<code>puts response_request.inspect</code>"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1441721696, "post_id": 32459954, "comment_id": 52782297, "body": "@mudasobwa thanks for your interest the response I got was #&lt;Etsy::Response:0x007fb2fa1a1e18 @raw_response=#&lt;Net::HTTPNotFound 404 Not Found readbody=true&gt;&gt;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1441721808, "post_id": 32459954, "comment_id": 52782362, "body": "<code>404</code> means there is no such endpoint at this service. You should call an existing endpoint and then you\u2019ll get the response parsed (likely.)"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1441722084, "post_id": 32459954, "comment_id": 52782554, "body": "I changed the request to                                                           response_request = Etsy::Request.get(&#39;/listings/127179505/transactions&#39;, access.merge(:limit =&gt; 5))"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1441722137, "post_id": 32459954, "comment_id": 52782585, "body": "response was                                                                                                 #&lt;Etsy::Response:0x007ff2d197c3b0 @raw_response=#&lt;Net::HTTPOK 200 OK readbody=true&gt;&gt;"}, {"owner": {"reputation": 481, "user_id": 1419464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FlZVa.jpg?s=128&g=1", "display_name": "LukeS", "link": "https://stackoverflow.com/users/1419464/lukes"}, "edited": false, "score": 1, "creation_date": 1441723096, "post_id": 32459954, "comment_id": 52783256, "body": "Well it looks like you are using some kind of gem encapsulating Etsy&#39;s api. You should look at the doc for that gem. Or tell us which gem you use so we can have a look at it ourselves."}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "edited": false, "score": 0, "creation_date": 1441723527, "post_id": 32459954, "comment_id": 52783571, "body": "Ok I figured it out when I use print instead of puts I get all the JSON data I need printed to a file as a string I think. So now all I need to do is convert the string to JSON?"}, {"owner": {"reputation": 2817, "user_id": 1963973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5364da37e0b8fcf0af75906ee36b84fd?s=128&d=identicon&r=PG", "display_name": "marianosimone", "link": "https://stackoverflow.com/users/1963973/marianosimone"}, "reply_to_user": {"reputation": 481, "user_id": 1419464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FlZVa.jpg?s=128&g=1", "display_name": "LukeS", "link": "https://stackoverflow.com/users/1419464/lukes"}, "edited": false, "score": 0, "creation_date": 1441724372, "post_id": 32459954, "comment_id": 52784236, "body": "follow @LukeS&#39; advice: look at the documentation of the gem you are using to interact with Etsy&#39;s API"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "edited": false, "score": 0, "creation_date": 1441731438, "post_id": 32459954, "comment_id": 52788541, "body": "Ok guys I have updated it with the latest code. The gem I am using is the Etsy Gem <a href=\"https://github.com/kytrinyx/etsy\" rel=\"nofollow noreferrer\">github.com/kytrinyx/etsy</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1441744760, "post_id": 32459954, "comment_id": 52795653, "body": "@MichaelOMeara the JSON is being parsed for you by the gem <a href=\"https://github.com/kytrinyx/etsy/blob/master/lib/etsy/response.rb#L82\" rel=\"nofollow noreferrer\">Here</a>. Can I ask why you want the raw JSON? If you must have the Raw JSON i would recommend <code>Etsy::Request.get(&#39;&#47;private&#47;shops&#47;UrbanMooseApparel&#47;receipts&zwnj;&#8203;&#39;, access.merge(:limit =&gt; 2)).body</code> AS Referenced <a href=\"https://github.com/kytrinyx/etsy/blob/master/lib/etsy/response.rb#L35\" rel=\"nofollow noreferrer\">Here</a>. If you can use the Hash (recommended) you can access it via <code>etsy_response.result</code> <a href=\"https://github.com/kytrinyx/etsy/blob/master/lib/etsy/model.rb#L119\" rel=\"nofollow noreferrer\">Reference</a>"}, {"owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1441749580, "post_id": 32459954, "comment_id": 52797787, "body": "@engineersmnky That worked a treat thank you for you help.... Did you just figure that out by looking a the code? Thats fairly impressive :)"}], "owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1441731212, "creation_date": 1441721152, "last_edit_date": 1441731212, "question_id": 32459954, "link": "https://stackoverflow.com/questions/32459954/api-response-in-hash-form-and-not-json", "title": "API response in Hash form and not JSON?", "body": "<p>I am still in the early stages of learning to code and I am having some difficulty with the format of my API response. Below is my code and the response I am getting from console.</p>\n\n<pre><code>def etsy_response\n#    Reading the access tokens from a text file\n     auth = File.open(\"access_hash.txt\", \"r\").read\n     access = eval(auth)\n\n#    Making the API request\n     response_request = Etsy::Request.get('private/shops/MYSTORE/transactions', access.merge(:limit =&gt; 5))\n\n     puts response_request\nend\netsy_response\n</code></pre>\n\n<p>Here is the response I am getting in the console </p>\n\n<pre><code>#&lt;Etsy::User:0x007f8bb3c30cf8&gt;\n</code></pre>\n\n<p>I think I could be either completly wrong or else it might be something small that I am missing in my code. Ideally I would like the response returned in JSON format.</p>\n\n<p>Any help or guidance would be really appreciated as I have searched all over this website already.</p>\n\n<p>Many thanks\nMike :)</p>\n\n<p>Tried a new request as the first one had no valid endpoint</p>\n\n<pre><code> response_request = Etsy::Request.get('/listings/127178505/transactions', access.merge(:limit =&gt; 5))\n</code></pre>\n\n<p>The response in console is \n    #></p>\n\n<p>So this confirms that the endpoint is valid. However my response still does not return JSON formated data.</p>\n\n<p>................UPDATE....................</p>\n\n<p>Ok I got the it to return some data from using the API however I cant figure out what format the data is below is the updated working code</p>\n\n<pre><code> def etsy_response\n #    Reading the access tokens from a text file\nauth = File.open(\"access_hash.txt\", \"r\").read\naccess = eval(auth)\n#    Making the API request\nresponse_request = Etsy::Transaction.get('/private/shops/UrbanMooseApparel/receipts', access.merge(:limit =&gt; 2))\nauth_file = File.open(\"data.txt\", \"w\")\nauth_file.print response_request\nauth_file.close \nprint response_request.inspect\nend\netsy_response\n</code></pre>\n\n<p>And here is the response </p>\n\n<pre><code>[#&lt;Etsy::Transaction:0x007fc143b82110 @result={\"receipt_id\"=&gt;1039333045, \"order_id\"=&gt;344455819, \"seller_user_id\"=&gt;31058936, \"buyer_user_id\"=&gt;1234456, \"creation_tsz\"=&gt;354354, \"last_modified_tsz\"=&gt;1441662724, \"name\"=&gt;\"reretrt\", \"first_line\"=&gt;\"rggfdgfdg\", \"second_line\"=&gt;nil, \"city\"=&gt;\"aaaaa\", \"state\"=&gt;\"OH\", \"zip\"=&gt;\"34324\", \"country_id\"=&gt;209, \"payment_method\"=&gt;\"pp\", \"payment_email\"=&gt;\"MY@EMAIL.com\", \"message_from_seller\"=&gt;nil, \"message_from_buyer\"=&gt;\"\", \"was_paid\"=&gt;true, \"total_tax_cost\"=&gt;\"0.00\", \"total_vat_cost\"=&gt;\"0.00\", \"total_price\"=&gt;\"5.99\", \"total_shipping_cost\"=&gt;\"0.00\", \"currency_code\"=&gt;\"EUR\", \"message_from_payment\"=&gt;\"\", \"was_shipped\"=&gt;true, \"buyer_email\"=&gt;\"SELLEREMAIL\", \"seller_email\"=&gt;\"MY@EMAIL.com\", \"discount_amt\"=&gt;\"0.00\", \"subtotal\"=&gt;\"5.99\", \"grandtotal\"=&gt;\"5.99\", \"adjusted_grandtotal\"=&gt;\"5.99\", \"shipping_tracking_code\"=&gt;\"\", \"shipping_tracking_url\"=&gt;nil, \"shipping_carrier\"=&gt;\"\", \"shipping_note\"=&gt;\"fgfdgsdgvfvfgvfk\", \"shipping_notification_date\"=&gt;1441662724, \"shipments\"=&gt;[{\"receipt_shipping_id\"=&gt;nil, \"mailing_date\"=&gt;1441641600, \"carrier_name\"=&gt;nil, \"tracking_code\"=&gt;nil, \"current_step\"=&gt;nil, \"current_step_date\"=&gt;nil, \"mail_class\"=&gt;nil, \"buyer_note\"=&gt;\"fdgfdgfdgfgf\", \"notification_date\"=&gt;1441662724, \"tracking_url\"=&gt;nil}], \"has_local_delivery\"=&gt;false, \"shipping_details\"=&gt;{\"can_mark_as_shipped\"=&gt;false, \"was_shipped\"=&gt;true, \"is_future_shipment\"=&gt;false, \"shipment_date\"=&gt;1441662724, \"shipping_method\"=&gt;\"Standard Shipping\", \"requested_start_time\"=&gt;\"8:00pm\", \"requested_end_time\"=&gt;\"11:00pm\", \"requested_time_formatted\"=&gt;\"8-11pm, Dec 31\", \"requested_time_is_now\"=&gt;false, \"requested_time_is_today\"=&gt;false}}, @token=\"MyToken\", @secret=\"MySecret\"&gt;, #&lt;Etsy::Transaction:0x007fc143b82070 @result={\"receipt_id\"=&gt;103698249df0, \"order_id\"=&gt;343127fdsf3689, \"seller_user_id\"=&gt;310358976, \"buyer_user_id\"=&gt;37428099, \"creation_tsz\"=&gt;1441019886, \"last_modified_tsz\"=&gt;1441027632, \"name\"=&gt;\"3243\", \"first_line\"=&gt;\"3423\", \"second_line\"=&gt;\"A3326\", \"city\"=&gt;\"RE342G\", \"state\"=&gt;\"ID\", \"zip\"=&gt;\"8334440\", \"country_id\"=&gt;209, \"payment_method\"=&gt;\"pp\", \"payment_email\"=&gt;\"MY@EMAIL.com\", \"message_from_seller\"=&gt;nil, \"message_from_buyer\"=&gt;nil, \"was_paid\"=&gt;true, \"total_tax_cost\"=&gt;\"0.00\", \"total_vat_cost\"=&gt;\"0.00\", \"total_price\"=&gt;\"7.99\", \"total_shipping_cost\"=&gt;\"0.00\", \"currency_code\"=&gt;\"EUR\", \"message_from_payment\"=&gt;\"\", \"was_shipped\"=&gt;true, \"buyer_email\"=&gt;\"SELLEREMAIL\", \"seller_email\"=&gt;\"MY@EMAIL.com\", \"discount_amt\"=&gt;\"0.00\", \"subtotal\"=&gt;\"7.99\", \"grandtotal\"=&gt;\"7.99\", \"adjusted_grandtotal\"=&gt;\"7.99\", \"shipping_tracking_code\"=&gt;\"\", \"shipping_tracking_url\"=&gt;nil, \"shipping_carrier\"=&gt;\"\", \"shipping_note\"=&gt;\"dsffdsfdsfds\", \"shipping_notification_date\"=&gt;1441027632, \"shipments\"=&gt;[{\"receipt_shipping_id\"=&gt;nil, \"mailing_date\"=&gt;1441036800, \"carrier_name\"=&gt;nil, \"tracking_code\"=&gt;nil, \"current_step\"=&gt;nil, \"current_step_date\"=&gt;nil, \"mail_class\"=&gt;nil, \"buyer_note\"=&gt;\"ff dfdfd\", \"notification_date\"=&gt;1441027632, \"tracking_url\"=&gt;nil}], \"has_local_delivery\"=&gt;false, \"shipping_details\"=&gt;{\"can_mark_as_shipped\"=&gt;false, \"was_shipped\"=&gt;true, \"is_future_shipment\"=&gt;false, \"shipment_date\"=&gt;1441027632, \"shipping_method\"=&gt;\"Standard Shipping\", \"requested_start_time\"=&gt;\"8:00pm\", \"requested_end_time\"=&gt;\"11:00pm\", \"requested_time_formatted\"=&gt;\"8-11pm, Dec 31\", \"requested_time_is_now\"=&gt;false, \"requested_time_is_today\"=&gt;false}}, @token=\"TOKEN\", @secret=\"Secret\"&gt;]\n</code></pre>\n\n<p>Any help or guidance with converting this to JSON would be really appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "factory-bot"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1441721029, "post_id": 32459873, "comment_id": 52781804, "body": "Show your product model"}, {"owner": {"reputation": 14464, "user_id": 50419, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/S1nop.jpg?s=128&g=1", "display_name": "Navaneeth K N", "link": "https://stackoverflow.com/users/50419/navaneeth-k-n"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1441721387, "post_id": 32459873, "comment_id": 52782061, "body": "@SergioTulentsev Included product model"}, {"owner": {"reputation": 1219, "user_id": 2463608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/71a718079ab00b87628fd52df9eb6e42?s=128&d=identicon&r=PG", "display_name": "Daiku", "link": "https://stackoverflow.com/users/2463608/daiku"}, "edited": false, "score": 0, "creation_date": 1441725070, "post_id": 32459873, "comment_id": 52784721, "body": "How about the relevant section of schema.rb, which shows the table structure?"}], "answers": [{"tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": false, "score": 11, "last_activity_date": 1441750548, "last_edit_date": 1441750548, "creation_date": 1441749215, "answer_id": 32467854, "question_id": 32459873, "link": "https://stackoverflow.com/questions/32459873/how-to-assign-a-hash-in-factory-girl/32467854#32467854", "title": "How to assign a hash in factory girl?", "body": "<p>I tried this out locally and it appears to work with jsonb fields:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :product do\n    title \"MyString\"\n    category_paths { { some_key: some_value } }\n  end\nend\n</code></pre>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 692466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b164e00c2c1beeff87b2c770ce4b537?s=128&d=identicon&r=PG", "display_name": "Jason Deppen", "link": "https://stackoverflow.com/users/692466/jason-deppen"}, "is_accepted": false, "score": 1, "last_activity_date": 1461254022, "creation_date": 1461254022, "answer_id": 36774748, "question_id": 32459873, "link": "https://stackoverflow.com/questions/32459873/how-to-assign-a-hash-in-factory-girl/36774748#36774748", "title": "How to assign a hash in factory girl?", "body": "<p>This worked for me</p>\n\n<pre><code>FactoryGirl.define do\n  factory(:agent) do\n    mls_data({\n      :summary =&gt; {\n        :first =&gt; 'Jane',\n        :last =&gt; 'Doe',\n      }\n    })\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3045, "user_id": 1333999, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/163b47af024db6763d5ad0c885db117c?s=128&d=identicon&r=PG", "display_name": "grepsedawk", "link": "https://stackoverflow.com/users/1333999/grepsedawk"}, "is_accepted": false, "score": 1, "last_activity_date": 1541177592, "last_edit_date": 1541177592, "creation_date": 1509384547, "answer_id": 47021039, "question_id": 32459873, "link": "https://stackoverflow.com/questions/32459873/how-to-assign-a-hash-in-factory-girl/47021039#47021039", "title": "How to assign a hash in factory girl?", "body": "<p>If you want to execute the hash without a block, you simply have to use parenthesis.</p>\n\n<p>So it'd be like this:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :product do\n    title \"MyString\"\n    category_paths({ some_key: some_value })\n  end\nend\n</code></pre>\n\n<p>But you can also drop the <code>{}</code> for hash args like so:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :product do\n    title \"MyString\"\n    category_paths(some_key: some_value)\n  end\nend\n</code></pre>\n\n<p>As a note, in future releases, literals won't be supported, so you'll have to use:</p>\n\n<pre><code>FactoryBot.define do\n  factory :product do\n    title { \"MyString\" }\n    category_paths { { some_key: some_value } }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 14464, "user_id": 50419, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/S1nop.jpg?s=128&g=1", "display_name": "Navaneeth K N", "link": "https://stackoverflow.com/users/50419/navaneeth-k-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4734, "favorite_count": 1, "answer_count": 3, "score": 9, "last_activity_date": 1541177592, "creation_date": 1441720912, "last_edit_date": 1441721355, "question_id": 32459873, "link": "https://stackoverflow.com/questions/32459873/how-to-assign-a-hash-in-factory-girl", "title": "How to assign a hash in factory girl?", "body": "<p>I have a model which has a field called <code>category_paths</code>. It is <code>JSONB</code> in postgres. </p>\n\n<p>When I set the <code>category_paths</code> from factory_girl, factory_girl is changing the value type to <code>String</code>. Consider the following code, even though I am assigning a <code>Hash</code>, it gets changed to <code>String</code>.</p>\n\n<pre><code>FactoryGirl.define do\n  factory :product do\n    title \"MyString\"\n    after(:build) do |p|\n        p.category_paths = Hash.new\n        puts p.category_paths.class # This prints as String\n    end\n  end\nend\n</code></pre>\n\n<p>This is weird and I am not able to figure out what is happening. This works fine when tried from Rails console. The problem happens only when used in factory. Is this how factory_girl works? Or is there a way to control this behavior?</p>\n\n<p>Here is the product model</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n    acts_as_copy_target\n    searchkick autocomplete: ['brand'], callbacks: :async\n    scope :search_import, -&gt; { includes(:product_offers) }\n    has_many :product_offers, autosave: true\n    validates :title, presence: true\n    validate :validate_category_paths\nend\n</code></pre>\n\n<p>Any help would be appreciated</p>\n"}]