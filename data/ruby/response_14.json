[{"tags": ["ruby-on-rails", "ruby", "mongodb", "ruby-on-rails-4", "mongoid"], "comments": [{"owner": {"reputation": 1669, "user_id": 1178226, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/62a86385791e645b3152240671c86fbc?s=128&d=identicon&r=PG", "display_name": "Dunes Buggy", "link": "https://stackoverflow.com/users/1178226/dunes-buggy"}, "edited": false, "score": 0, "creation_date": 1429141849, "post_id": 29662934, "comment_id": 47465350, "body": "Is your b valid? You should check for that first."}, {"owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "reply_to_user": {"reputation": 1669, "user_id": 1178226, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/62a86385791e645b3152240671c86fbc?s=128&d=identicon&r=PG", "display_name": "Dunes Buggy", "link": "https://stackoverflow.com/users/1178226/dunes-buggy"}, "edited": false, "score": 0, "creation_date": 1429141971, "post_id": 29662934, "comment_id": 47465381, "body": "What do you mean by valid ?"}, {"owner": {"reputation": 1669, "user_id": 1178226, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/62a86385791e645b3152240671c86fbc?s=128&d=identicon&r=PG", "display_name": "Dunes Buggy", "link": "https://stackoverflow.com/users/1178226/dunes-buggy"}, "edited": false, "score": 0, "creation_date": 1429142171, "post_id": 29662934, "comment_id": 47465447, "body": "Assuming you are loading your <code>b</code>from database, have you performed this check <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/active_record_validations.html</a> . If you can tell how you are creating the b object, its more easy to understand whats causing the trouble."}, {"owner": {"reputation": 1699, "user_id": 229143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z6pEl.jpg?s=128&g=1", "display_name": "Bob.", "link": "https://stackoverflow.com/users/229143/bob"}, "edited": false, "score": 0, "creation_date": 1429143101, "post_id": 29662934, "comment_id": 47465715, "body": "What happens if you try to do the update_attributes with those objects in the Rails console?"}, {"owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "reply_to_user": {"reputation": 1699, "user_id": 229143, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z6pEl.jpg?s=128&g=1", "display_name": "Bob.", "link": "https://stackoverflow.com/users/229143/bob"}, "edited": false, "score": 0, "creation_date": 1429144125, "post_id": 29662934, "comment_id": 47466018, "body": "it updates the b object but does not effects the database @Bob."}], "answers": [{"comments": [{"owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "edited": false, "score": 0, "creation_date": 1429285940, "post_id": 29663782, "comment_id": 47543464, "body": "can you please tell me how puts&#39;ing or the binding.pry method works because I&#39;ve never tried it. Thanks"}, {"owner": {"reputation": 631, "user_id": 4534959, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cZiJjzmwu88/AAAAAAAAAAI/AAAAAAAAAD0/zDFGSxrSBkU/photo.jpg?sz=128", "display_name": "Jeremy_inPDX", "link": "https://stackoverflow.com/users/4534959/jeremy-inpdx"}, "reply_to_user": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "edited": false, "score": 0, "creation_date": 1429315626, "post_id": 29663782, "comment_id": 47558236, "body": "Hi James, if you have a Gemfile, add a line for <code>gem &#39;pry&#39;</code>. Other wise you can just <code>gem install pry</code> from the command line. Then you can add <code>binding.pry</code> inside any method code that you want to investigate. It&#39;s similar to adding <code>debugger</code> in Javascript code. Check out <a href=\"http://pryrepl.org/\" rel=\"nofollow noreferrer\">pryrepl.org</a> for more details on how to use Pry. It&#39;s super handy!"}, {"owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "edited": false, "score": 0, "creation_date": 1429334079, "post_id": 29663782, "comment_id": 47561578, "body": "Yeah it helped but the object is in the correct state. The object does not have any garbage or anything like this"}], "tags": [], "owner": {"reputation": 631, "user_id": 4534959, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cZiJjzmwu88/AAAAAAAAAAI/AAAAAAAAAD0/zDFGSxrSBkU/photo.jpg?sz=128", "display_name": "Jeremy_inPDX", "link": "https://stackoverflow.com/users/4534959/jeremy-inpdx"}, "is_accepted": false, "score": 1, "last_activity_date": 1429147462, "creation_date": 1429147462, "answer_id": 29663782, "question_id": 29662934, "link": "https://stackoverflow.com/questions/29662934/rails-update-method-not-working/29663782#29663782", "title": "rails update method not working", "body": "<p>The Update method will fail if the object is invalid in any way. See: <a href=\"http://apidock.com/rails/v4.1.8/ActiveRecord/Persistence/update\" rel=\"nofollow\">http://apidock.com/rails/v4.1.8/ActiveRecord/Persistence/update</a></p>\n\n<p>Have you tried checking to see if there are any errors preventing the save from happening? Try checking b.errors by puts'ing it or by sticking a binding.pry in right before your update happens. </p>\n"}], "owner": {"reputation": 2054, "user_id": 4468132, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/IHE5A.jpg?s=128&g=1", "display_name": "Gardezi", "link": "https://stackoverflow.com/users/4468132/gardezi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3381, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429419338, "creation_date": 1429141639, "last_edit_date": 1429419338, "question_id": 29662934, "link": "https://stackoverflow.com/questions/29662934/rails-update-method-not-working", "title": "rails update method not working", "body": "<p>I ma trying to update the b object. Whenever I run the update method it updates the b object but does not effects the database. I have tried to find the solution but I was not unable to find it's solution. Please tell me what am I doing wrong and if any of you guys who views this question was able to find it's solution please refer that solution to me.</p>\n\n<pre><code>    data = params[:d]\n    #data1 = params[:d1]\n    data2 = data1\n    request_bookmarked = Request.getRequest(data)\n    bookmarked_against_Request = Request.first\n    request_bookmarked_2 = request_bookmarked\n    bookmarked_against_Request_2 = bookmarked_against_Request\n    b = Bookmark.where(request_id: bookmarked_against_Request[:_id]).first()\n\n    if b !=  nil\n      flag = false\n      ind = 0;\n      b[:corsponding_requests].each.with_index do |t , index|\n        if t == request_bookmarked[:id]\n          flag = true\n          ind = index\n        end\n      end\n      if flag ==  true \n    b1 = b\n    #b1.delete_at(ind)#request_bookmarked[:_id])\n    b1[:corsponding_requests].delete(request_bookmarked[:id])\n    bookmarked_against_Request_2[:favourites].delete(request_bookmarked[:_d])\n    request_bookmarked[:favourites_of].delete(bookmarked_against_Request[:_id])\n\n    b2 = Hash.new\n    b2['corsponding_requests'] = Array.new\n    b2['corsponding_requests'].push(*b1[:corsponding_requests])\n    #b.update(Hash['corsponding_requests' , b1[:corsponding_requests]])\n    if b.update_attributes(b2)\n      flash[:notice] = \"Request has been un bookmarked .\"\n    end\n</code></pre>\n\n<p>Bookmark.rb(Bookmark Model Class)</p>\n\n<pre><code>class Bookmark\n  include Mongoid::Document\n  include Mongoid::Timestamps\n  field :owner_req, type: String\n  field :request_id, type: String\n  field :corsponding_requests, type: Array\n\nclass &lt;&lt; self\n    def createBookmark ( title)\n          bookmark = self.new(title);\n          if bookmark.save\n            bookmark\n          end\n    end\n\n\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 4663917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6624bc240dea43cc2312b733ad03238e?s=128&d=identicon&r=PG", "display_name": "Papaya Labs", "link": "https://stackoverflow.com/users/4663917/papaya-labs"}, "edited": false, "score": 2, "creation_date": 1429148732, "post_id": 29663748, "comment_id": 47467201, "body": "Also I think you need to put the end_date --&gt;  end_date = date.end_of_month + (6-date.end_of_month.wday) to make the perfect rectangle view"}], "tags": [], "owner": {"reputation": 857, "user_id": 1186250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13aee8d7d659e1d9b92cd305ced1a4c4?s=128&d=identicon&r=PG", "display_name": "QMFNP", "link": "https://stackoverflow.com/users/1186250/qmfnp"}, "is_accepted": true, "score": 1, "last_activity_date": 1429196046, "last_edit_date": 1429196046, "creation_date": 1429147279, "answer_id": 29663748, "question_id": 29662918, "link": "https://stackoverflow.com/questions/29662918/making-a-custom-calendar-month-view-how-to-align-days-properly/29663748#29663748", "title": "Making a custom Calendar month view...How to align days properly?", "body": "<p>In order to get your calendar to start at the beginning of the week in the way you described, you can do something like this:</p>\n\n<pre><code># Controller\n\ndef calendar\n   @days_of_month = current_month    \nend\n\ndef current_month\n  date = Date.today.beginning_of_month\n  start_date = date - date.wday\n  end_date = date.end_of_month + (6 - date.end_of_month.wday)\n  return (start_date..end_date).to_a\nend\n</code></pre>\n\n<p>Since the <code>Date#wday</code> method returns the day of the week as a number (0-6, Sunday is zero), you can use it to quickly find the starting day of the week. More info on this method can be found here: <a href=\"http://ruby-doc.org/stdlib-2.2.1/libdoc/date/rdoc/Date.html#method-i-wday\" rel=\"nofollow\">http://ruby-doc.org/stdlib-2.2.1/libdoc/date/rdoc/Date.html#method-i-wday</a></p>\n"}], "owner": {"reputation": 673, "user_id": 3704250, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/1ZYH3.png?s=128&g=1", "display_name": "mikeymurph77", "link": "https://stackoverflow.com/users/3704250/mikeymurph77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 29663748, "answer_count": 1, "score": 0, "last_activity_date": 1429196046, "creation_date": 1429141524, "question_id": 29662918, "link": "https://stackoverflow.com/questions/29662918/making-a-custom-calendar-month-view-how-to-align-days-properly", "title": "Making a custom Calendar month view...How to align days properly?", "body": "<p>I am creating my own calendar and bumped into a bit of an issue... Right now I am using <code>Date.today.beginning_of_month</code> to get the current month. My controller is set up like so...</p>\n\n<pre><code>#Controller\n  def calendar\n     @day_of_month = current_month    \n  end\n\n  def current_month\n    date = Date.today.beginning_of_month\n    return (date..date + 31.days).to_a\n  end\n</code></pre>\n\n<p>In my view I have the following....</p>\n\n<pre><code>&lt;% @days_of_month.each_slice(7) do |slice| %&gt;\n  &lt;div class=\"week_row_in_month\"&gt;\n    &lt;% slice.each do |day| %&gt;\n      &lt;div class=\"month_day\" id=\"&lt;%= day %&gt;\"&gt;\n        &lt;div class=\"header\"&gt;\n          &lt;%= day.strftime(\"%A\") %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The issue is my \"calendar\" starts on the first day of the month (I understand why... because of the <code>beginning_of_month</code> method)... But if April 1st fell on a Wednesday... how would I get it aligned so it fell on a Wednesday div and not aligned like it was on a Sunday div?</p>\n\n<p>I hope that makes sense. If there is any confusing let me know and I will edit to clarify. </p>\n"}, {"tags": ["ruby", "git", "jekyll", "liquid"], "answers": [{"comments": [{"owner": {"reputation": 3564, "user_id": 3126753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/569bc1e18b86464e58e542663cb4cfd4?s=128&d=identicon&r=PG", "display_name": "Chemical Programmer", "link": "https://stackoverflow.com/users/3126753/chemical-programmer"}, "edited": false, "score": 2, "creation_date": 1463987079, "post_id": 29666241, "comment_id": 62279284, "body": "You can put this code block at the top of html file."}, {"owner": {"reputation": 1579, "user_id": 2079130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bEVoB.jpg?s=128&g=1", "display_name": "jwehrle", "link": "https://stackoverflow.com/users/2079130/jwehrle"}, "edited": false, "score": 2, "creation_date": 1545872194, "post_id": 29666241, "comment_id": 94717164, "body": "Thank you for this. The official, step-by-step Jekyll intro does not include this important detail. <a href=\"https://jekyllrb.com/docs/step-by-step/02-liquid/\" rel=\"nofollow noreferrer\">jekyllrb.com/docs/step-by-step/02-liquid</a>"}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1545885400, "post_id": 29666241, "comment_id": 94719058, "body": "It&#39;s <a href=\"https://jekyllrb.com/docs/step-by-step/03-front-matter/\" rel=\"nofollow noreferrer\">on the third page of the guide</a>."}, {"owner": {"reputation": 324, "user_id": 3130277, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3dd3636241f303b10a94a9663152214f?s=128&d=identicon&r=PG&f=1", "display_name": "kidCoder", "link": "https://stackoverflow.com/users/3130277/kidcoder"}, "edited": false, "score": 0, "creation_date": 1580967796, "post_id": 29666241, "comment_id": 106273581, "body": "^ Not explicitly. Also, worth mentioning that the most bare-bones FrontMatter you can include is just 6 dashes with a newline between 3 and 4, no need for a comment or anything."}, {"owner": {"reputation": 4731, "user_id": 160968, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/83bcda00f1bffcad1deb5f2112bb5c3e?s=128&d=identicon&r=PG", "display_name": "Urs", "link": "https://stackoverflow.com/users/160968/urs"}, "edited": false, "score": 0, "creation_date": 1581106930, "post_id": 29666241, "comment_id": 106332774, "body": "I landed here because of the same issue. My includes are in <code>_includes&#47;</code> and I use <code>{% include navigation.html %}</code>. If I have a front matter they are parsed on <code>jekyll build</code>, if not, not. Jekyll is at 4.0.0! Is there a special command I have to add? like <code>jekyll build --also-without-front-matter</code>:-) ?"}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "reply_to_user": {"reputation": 4731, "user_id": 160968, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/83bcda00f1bffcad1deb5f2112bb5c3e?s=128&d=identicon&r=PG", "display_name": "Urs", "link": "https://stackoverflow.com/users/160968/urs"}, "edited": false, "score": 1, "creation_date": 1581136345, "post_id": 29666241, "comment_id": 106338970, "body": "@Urs no front matter no proccessing."}], "tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": true, "score": 32, "last_activity_date": 1429163066, "creation_date": 1429163066, "answer_id": 29666241, "question_id": 29662793, "link": "https://stackoverflow.com/questions/29662793/using-liquid-tags-in-a-jekyll-page-not-working/29666241#29666241", "title": "Using Liquid tags in a Jekyll page not working", "body": "<p>If you want Jekyll to process your page, you must add a Front matter to your page (<a href=\"http://jekyllrb.com/docs/frontmatter/\">see dedicated page in Jekyll documentation</a>).</p>\n\n<p>The minimum front matter is an empty one. That means that your page will use default configuration for layout, etc ..</p>\n\n<pre><code>---\n# this is an empty front matter\n---\nYour content here\n</code></pre>\n"}], "owner": {"reputation": 1848, "user_id": 1583273, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/4A1pC.jpg?s=128&g=1", "display_name": "nVentimiglia", "link": "https://stackoverflow.com/users/1583273/nventimiglia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5345, "favorite_count": 2, "accepted_answer_id": 29666241, "answer_count": 1, "score": 18, "last_activity_date": 1429163066, "creation_date": 1429140672, "question_id": 29662793, "link": "https://stackoverflow.com/questions/29662793/using-liquid-tags-in-a-jekyll-page-not-working", "title": "Using Liquid tags in a Jekyll page not working", "body": "<p>I am attempting to setup a small blog using Jekyll. My work so far is as follows.</p>\n\n<ul>\n<li>Setup a Github pages repository</li>\n<li>Cloned the repo locally</li>\n<li>Installed Ruby vs 2 and the sdk (windows)</li>\n<li>Installed jekyll</li>\n<li>'serve' the local website.</li>\n<li>Validated that I could view my website localhost:4000</li>\n</ul>\n\n<p>Everything worked fine however the liquid syntax is not working as expected. All syntax is output as plane text. I am not sure how to continue. This error happens both locally as well as on my github hosted page.</p>\n\n<p>Here is my index.html file</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en-us\"&gt;\n&lt;head&gt;\n  {% include meta %}{{ site.time | date_to_xmlschema }}\n&lt;/head&gt;\n&lt;body&gt;\n  {% include header.html %}\n  {% include header.html %}\n  {% include header.html %}\n  {% foo %}\n  {{ foo }}\n\n  &lt;section class=\"main-content\"&gt;\n    {% include footer.html %}\n  &lt;/section&gt;\n  {% include scripts.html %}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My _config.yml has foo defined. =(</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7051, "user_id": 848668, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/JQcC4.jpg?s=128&g=1", "display_name": "br3nt", "link": "https://stackoverflow.com/users/848668/br3nt"}, "edited": false, "score": 0, "creation_date": 1429151871, "post_id": 29662518, "comment_id": 105859828, "body": "Your best bet might be to look at <code>Rails.application.railties</code>, whichs holds the list of initializers. <code>Rails.application.eager_load!</code> calls <code>eager_load!</code> on each of these. Possibly just a matter of finding the right one. If you&#39;re planning on making a rails plugin, then there is probably a really easy way to access the the initializers that your plugin creates. <a href=\"https://blog.engineyard.com/2010/extending-rails-3-with-railties/\" rel=\"nofollow noreferrer\">This blog</a> discusses creating initializers for plugins, so that may help."}], "answers": [{"comments": [{"owner": {"reputation": 1961, "user_id": 1308979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/899f97295621824a5f482a286f5062ca?s=128&d=identicon&r=PG", "display_name": "jeremywoertink", "link": "https://stackoverflow.com/users/1308979/jeremywoertink"}, "edited": false, "score": 0, "creation_date": 1429208961, "post_id": 29664463, "comment_id": 47503152, "body": "Thanks. This was what I ended up doing. I&#39;m just grabbing all of the controllers in the api and eager loading them. I don&#39;t think this will affect performance, just boot time is increased slightly. I basically just ripped out what the <code>eager_load!</code> method does, and altered the path"}, {"owner": {"reputation": 566, "user_id": 5883927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d707215203e361e3598351571149ff4d?s=128&d=identicon&r=PG", "display_name": "jean-baptiste", "link": "https://stackoverflow.com/users/5883927/jean-baptiste"}, "edited": false, "score": 4, "creation_date": 1518881187, "post_id": 29664463, "comment_id": 84689784, "body": "If you&#39;re using Rails 5, the reloading part should now look like :      Rails.application.reloader.to_prepare do       Dir[&quot;path/to/files/*.rb&quot;].each {|file| require_dependency file}     end"}], "tags": [], "owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "is_accepted": true, "score": 5, "last_activity_date": 1551037493, "last_edit_date": 1551037493, "creation_date": 1429152317, "answer_id": 29664463, "question_id": 29662518, "link": "https://stackoverflow.com/questions/29662518/loading-class-descendants-in-rails-development/29664463#29664463", "title": "Loading class descendants in rails development", "body": "<p>I found the following post: <a href=\"http://avinmathew.com/using-rails-descendants-method-in-development/\" rel=\"nofollow noreferrer\">http://avinmathew.com/using-rails-descendants-method-in-development/</a></p>\n\n<p>In short it says the following:</p>\n\n<p>In <code>enviroments/development.rb</code> add the following:</p>\n\n<pre><code>config.eager_load_paths += Dir['path/to/files/*.rb']\nActionDispatch::Reloader.to_prepare do\n  Dir['path/to/files/*.rb'].each {|file| require_dependency file}\nend\n</code></pre>\n\n<p>The first line adds the path that should be loaded when you start your app (or console)\nand the rest tells rails to reload the classes on each request.</p>\n"}], "owner": {"reputation": 1961, "user_id": 1308979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/899f97295621824a5f482a286f5062ca?s=128&d=identicon&r=PG", "display_name": "jeremywoertink", "link": "https://stackoverflow.com/users/1308979/jeremywoertink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3228, "favorite_count": 2, "accepted_answer_id": 29664463, "answer_count": 1, "score": 7, "last_activity_date": 1551037493, "creation_date": 1429139327, "last_edit_date": 1429140721, "question_id": 29662518, "link": "https://stackoverflow.com/questions/29662518/loading-class-descendants-in-rails-development", "title": "Loading class descendants in rails development", "body": "<p>I need to be able to see all of the class descendants from a controller when I go into the rails console locally. I have this <code>Api::BaseController</code> which all my Api controller inherit from. The issue I have is when I hop in to the rails console to check which Api controller are in the descendants, it comes up empty until I call them. This probably has something to do with how the classes in development aren't eager loaded, and they're not cached locally. </p>\n\n<pre><code>sample_app$ rails c\nLoading development environment (Rails 4.2.0)\n2.1.5 :001 &gt; Api::BaseController.descendants\n =&gt; []\n2.1.5 :002 &gt; Api::V1::FoosController\n =&gt; Api::V1::FoosController\n2.1.5 :003 &gt; Api::BaseController.descendants\n =&gt; [Api::V1::FoosController]\n</code></pre>\n\n<p>From this example, you can see when I call descendants on the <code>Api::BaseController</code> the first time, it's an empty array. After calling one of the controllers that class will be then loaded and will show up as a descendant. In this case, there could be an any number of controllers in V1 as well as V2, V3, etc... </p>\n\n<p>As a stupid ugly hack, I could do</p>\n\n<pre><code>Dir.glob(\"#{Rails.root.join('app', 'controllers', 'api', 'v1')}/**/*.rb\").each(&amp;method(:require_dependency))\n</code></pre>\n\n<p>but I don't want to have to write that each time I enter the console. I'm also working on a gem, and definitely don't want to put this sort of code in my gem.</p>\n\n<p>The other option is caching classes in development, but that causes a huge issues on it's own. Anyone have any ideas?</p>\n\n<p><strong>Edit</strong>\nAnother option would be to call <code>Rails.application.eager_load!</code>. This option would work fine if I could specify only controllers in my API folder. Then I wouldn't have to eager load the entire app, but just a small subset of controllers that I need. </p>\n"}, {"tags": ["ruby", "windows", "twitter", "parameters", "tweets"], "comments": [{"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1429140683, "post_id": 29662377, "comment_id": 47464945, "body": "What&#39;s the version of gem you use?"}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1429142250, "post_id": 29662377, "comment_id": 47465472, "body": "Ruby 2.1.5 x64 for windows... should I use the 2.1.5 without x64? Or a different version maybe? @Maxim"}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1429150220, "post_id": 29662377, "comment_id": 47467597, "body": "or do you mean version of twitter gem? @Maxim"}, {"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1429164370, "post_id": 29662377, "comment_id": 47471847, "body": "yes, i was asking about gem version."}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1429182354, "post_id": 29662377, "comment_id": 47483232, "body": "gem is twitter-5.14.0 @Maxim"}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "is_accepted": false, "score": 0, "last_activity_date": 1429151828, "creation_date": 1429151828, "answer_id": 29664407, "question_id": 29662377, "link": "https://stackoverflow.com/questions/29662377/how-to-add-ruby-twitter-status-parameter-to-update/29664407#29664407", "title": "How to add Ruby Twitter status parameter to update", "body": "<pre><code>File.open(\"tweets.txt\") do |line|\n  line.each_line do |item|\n    tweets = item\n    puts tweets\n    client.update(\"#{tweets}\")\n    sleep((rand*1800 +900).to_i)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429151828, "creation_date": 1429138563, "question_id": 29662377, "link": "https://stackoverflow.com/questions/29662377/how-to-add-ruby-twitter-status-parameter-to-update", "title": "How to add Ruby Twitter status parameter to update", "body": "<p>I get an error that says \"Missing required parameter: status. Twitter::Error::Forbidden\" How do I add the status param to \"client.update()\" ? </p>\n\n<p>If I replace \"update\" with \"status\", my tweet doesn't post and I get an error saying No status found with that ID. My code is below:</p>\n\n<pre><code>def post \n    client = Twitter::REST::Client.new do |config|\n        config.consumer_key = \"...\"\n        config.consumer_secret = \"...\"\n        config.access_token = \"...\"\n        config.access_token_secret = \"...\"\n    end\n  File.open(\"tweets.txt\") do |line|\n    line.each do |item|\n      tweets = item\n      puts tweets\n      client.update(\"#{tweets}\").to_s\n      sleep((rand*1800 +900).to_i)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "reply_to_user": {"reputation": 25, "user_id": 3935150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26466f23fe529485da90243ea29bf66d?s=128&d=identicon&r=PG&f=1", "display_name": "aiven", "link": "https://stackoverflow.com/users/3935150/aiven"}, "edited": false, "score": 0, "creation_date": 1429138888, "post_id": 29662348, "comment_id": 47464309, "body": "Glad to help. Imagine it was seeming very strange :)"}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": true, "score": 4, "last_activity_date": 1429138761, "last_edit_date": 1429138761, "creation_date": 1429138425, "answer_id": 29662348, "question_id": 29662119, "link": "https://stackoverflow.com/questions/29662119/array-find-index-returning-nil-even-though-value-is-clearly-in-array/29662348#29662348", "title": "Array find_index returning nil even though value is clearly in array", "body": "<p>You're doing:</p>\n\n<pre><code>c = alphabet[idx]\n</code></pre>\n\n<p>which is taking one of the characters from <code>alphabet</code></p>\n\n<p>and then doing <code>c.upcase!</code> which will modify that entry in <code>alphabet</code> so after the \"d\" of \"coderbyte\" <code>alphabet[4]</code> (the \"e\") has been changed to \"E\" so when you try to find \"e\" in <code>alphabet</code> it isn't there any more.</p>\n\n<p>Lots of ways to rework the code slightly to solve this but one would be to change to use <code>c = alphabet[idx].dup</code> or to change to an approach where you can use <code>upcase</code> instead of <code>upcase!</code></p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 3935150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26466f23fe529485da90243ea29bf66d?s=128&d=identicon&r=PG&f=1", "display_name": "aiven", "link": "https://stackoverflow.com/users/3935150/aiven"}, "edited": false, "score": 1, "creation_date": 1429141032, "post_id": 29662492, "comment_id": 47465064, "body": "Oh, okay. Thanks for clarifying."}], "tags": [], "owner": {"reputation": 1632, "user_id": 2872978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f03d7a08bc26d141bd7cd50d6377dc12?s=128&d=identicon&r=PG", "display_name": "nickcen", "link": "https://stackoverflow.com/users/2872978/nickcen"}, "is_accepted": false, "score": 2, "last_activity_date": 1429139168, "creation_date": 1429139168, "answer_id": 29662492, "question_id": 29662119, "link": "https://stackoverflow.com/questions/29662119/array-find-index-returning-nil-even-though-value-is-clearly-in-array/29662492#29662492", "title": "Array find_index returning nil even though value is clearly in array", "body": "<p>a simpler implementation</p>\n\n<pre><code>def LetterChanges(str)\n    str.tr('a-z','b-zA').gsub(/[aeiou]/){|c| c.capitalize}\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 3935150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26466f23fe529485da90243ea29bf66d?s=128&d=identicon&r=PG&f=1", "display_name": "aiven", "link": "https://stackoverflow.com/users/3935150/aiven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 1, "accepted_answer_id": 29662348, "answer_count": 2, "score": 2, "last_activity_date": 1429139168, "creation_date": 1429137373, "last_edit_date": 1429138169, "question_id": 29662119, "link": "https://stackoverflow.com/questions/29662119/array-find-index-returning-nil-even-though-value-is-clearly-in-array", "title": "Array find_index returning nil even though value is clearly in array", "body": "<p>I'm working on this programming challenge from Coderbyte: </p>\n\n<blockquote>\n  <p>Using the Ruby language, have the function LetterChanges(str) take the str parameter being passed and modify it using the following algorithm. Replace every letter in the string with the letter following it in the alphabet (ie. c becomes d, z becomes a). Then capitalize every vowel in this new string (a, e, i, o, u) and finally return this modified string. </p>\n</blockquote>\n\n<p>My code is as follows: </p>\n\n<pre><code>def LetterChanges(str)\n  alphabet = ('a'..'z').to_a\n  result = \"\"\n  str = str.each_char do |c|\n    idx = alphabet.find_index(c)\n    if idx != nil\n      idx == 25 ? idx = 0 : idx += 1\n      c = alphabet[idx]\n      c.upcase! if [\"a\",\"e\",\"i\",\"o\",\"u\"].include?(c)\n    end\n    result &lt;&lt; c\n  end\n  return result \nend\n</code></pre>\n\n<p>When I run the code for LetterChanges(\"coderbyte\") it returns 'dpEesczUe'. I did some testing and realized alphabet.find_index(\"e\") would return nil. However when I run the code LetterChanges(\"eeeee\") it returns 'fffff' as expected. There must be something I'm missing I just can't figure out what!</p>\n"}, {"tags": ["ruby", "bash", "rvm"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1429135274, "post_id": 29661675, "comment_id": 47462995, "body": "That comment probably was talking about <code>rvm</code>/<code>ruby</code> profiles and not shell profiles but I don&#39;t know anything about all of this so that could be wrong."}, {"owner": {"reputation": 1833, "user_id": 4561925, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NqlRJ.png?s=128&g=1", "display_name": "HolyMoly", "link": "https://stackoverflow.com/users/4561925/holymoly"}, "edited": false, "score": 0, "creation_date": 1429142784, "post_id": 29661675, "comment_id": 47465626, "body": "until you figure it out, if you just need something running the current version right now, try using nitrous. it&#39;s free, and uses the newest ruby. google their site,  take 2 mins to set up an account and set up a box, and your ready to go"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1429142956, "post_id": 29661675, "comment_id": 47465674, "body": "I just uninstalled rvm and reinstalled it, then grabbed 2.2-head.  This is what it give me now:  &quot;rvm list Warning! PATH is not properly set up, &#39;/Users/rich/.rvm/gems/ruby-2.2-head/bin&#39; is not at first place,          usually this is caused by shell initialization files - check them for &#39;PATH=...&#39; entries,          it might also help to re-add RVM to your dotfiles: &#39;rvm get stable --auto-dotfiles&#39;,          to fix temporarily in this shell session run: &#39;rvm use ruby-2.2-head&#39;.  rvm rubies  =* ruby-2.2-head [ x86_64 ]    ruby-2.2.2 [ x86_64 ]&quot;"}, {"owner": {"reputation": 1921, "user_id": 2529285, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/I32t7.png?s=128&g=1", "display_name": "NateW", "link": "https://stackoverflow.com/users/2529285/natew"}, "edited": false, "score": 0, "creation_date": 1429223828, "post_id": 29661675, "comment_id": 47511352, "body": "Does this help? <a href=\"http://stackoverflow.com/questions/12134469/rvm-is-loading-with-the-wrong-version-of-ruby\" title=\"rvm is loading with the wrong version of ruby\">stackoverflow.com/questions/12134469/&hellip;</a>"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1429223986, "post_id": 29661675, "comment_id": 47511388, "body": "Unfortunately no.  It&#39;s completely within the area that I&#39;m researching, but it hasn&#39;t worked so far.  I&#39;m flushing out options for ~/.bash_profile and ~/.bashrc at the moment."}], "answers": [{"tags": [], "owner": {"reputation": 4312, "user_id": 166034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/311eb5cf1152752fafbed2a2c85aff5d?s=128&d=identicon&r=PG", "display_name": "Kerby82", "link": "https://stackoverflow.com/users/166034/kerby82"}, "is_accepted": false, "score": 0, "last_activity_date": 1429135471, "creation_date": 1429135471, "answer_id": 29661737, "question_id": 29661675, "link": "https://stackoverflow.com/questions/29661675/rvm-issues-wrong-version-of-ruby/29661737#29661737", "title": "RVM Issues - Wrong Version of Ruby", "body": "<p>If you installed ruby with rvm try:</p>\n\n<pre><code>rbenv rehash\n</code></pre>\n\n<p>Or if you want to set up a particular version of ruby use</p>\n\n<pre><code>rvm use 2.1.1\nrbenv rehash\n</code></pre>\n"}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 415, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429135471, "creation_date": 1429135164, "question_id": 29661675, "link": "https://stackoverflow.com/questions/29661675/rvm-issues-wrong-version-of-ruby", "title": "RVM Issues - Wrong Version of Ruby", "body": "<p>For some time now I've not been able to get the proper version of Ruby functioning automatically with RVM.  New terminals show a version of 2.0.0p481 whilst RVM current and default is set to =* ruby-2.2-head [ x86_64 ].  I've updated rvm (rvm get stable) and new terminals still choose the ancient version.  </p>\n\n<pre><code>$ which ruby\n/Users/rich/.rvm/rubies/ruby-2.2-head/bin/ruby\n</code></pre>\n\n<p>So it isn't making much sense.  I don't mind starting over from the start, but I'm not sure what to look at.  It's been suggested all my profiles are messed up, but I thought there was only one profile read upon startup, and that's ~/.bash_profile.  </p>\n\n<p>Any advice appreciated.  Cheers</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "edited": false, "score": 2, "creation_date": 1429141490, "post_id": 29661490, "comment_id": 47465216, "body": "FWIW, native support for foreign keys is new in Rails 4.2. See <a href=\"http://edgeapi.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-add_foreign_key\" rel=\"nofollow noreferrer\">add_foreign_key</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 2, "last_activity_date": 1429135167, "creation_date": 1429135167, "answer_id": 29661676, "question_id": 29661490, "link": "https://stackoverflow.com/questions/29661490/rails-4-validation-do-i-ensure-that-an-association-is-present-with-the-foreign/29661676#29661676", "title": "Rails 4 Validation: Do I ensure that an association is present with the foreign key or the association variable itself?", "body": "<p>I took a look at validates_associated, thinking that would be what would work best here.</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_associated\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_associated</a></p>\n\n<p>In the notes for validates_associated is this tidbit:</p>\n\n<blockquote>\n  <p>NOTE: This validation will not fail if the association hasn't been\n  assigned. If you want to ensure that the association is both present\n  and guaranteed to be valid, you also need to use\n  validates_presence_of.</p>\n</blockquote>\n\n<p>So it looks like if you're just after verifying the association is assigned, validates_presence_of should work. If you also want to verify the association is valid, validates_presence_of and validates_associated could be used together.</p>\n"}], "owner": {"reputation": 2343, "user_id": 2905173, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/65bf7c9fa62e4d6306d27c7dcdc7d2b8?s=128&d=identicon&r=PG&f=1", "display_name": "user12121234", "link": "https://stackoverflow.com/users/2905173/user12121234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429135167, "creation_date": 1429134316, "question_id": 29661490, "link": "https://stackoverflow.com/questions/29661490/rails-4-validation-do-i-ensure-that-an-association-is-present-with-the-foreign", "title": "Rails 4 Validation: Do I ensure that an association is present with the foreign key or the association variable itself?", "body": "<p>In Rails 4, what is the best way to ensure that an association is present?\nIt looks like you can test with the foreign key or the association variable itself.\nI am still fairly new to Rails and so this could be a stupid question.\nI am also thinking that both methods below might work.</p>\n\n<pre><code># method 1:\n\nclass Region &lt; ActiveRecord::Base\n  # In order to validate associated records whose presence is required, \n  # you must specify the :inverse_of option for the association:\n  has_many :flags, inverse_of: :region\nend\n\nclass Flag &lt; ActiveRecord::Base\n  # If you want to be sure that an association is present, \n  # you'll need to test whether the associated object itself is present, \n  # and not the foreign key used to map the association.\n  belongs_to :region\n  validates :region, :presence =&gt; true\nend\n\n# method 2:\n\nclass Region &lt; ActiveRecord::Base\n  has_many :flags\nend\n\nclass Flag &lt; ActiveRecord::Base\n  # Rails 4 Way book: \"when you're trying to ensure that an association is present, \n  # pass its foreign key attribute, not the association variable itself\"\n  validates :region_id, :presence =&gt; true\n  validate :region_exists\n\n  def region_exists\n    errors.add(:region_id, \"does not exist\") unless Region.exists?(region_id)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "capybara", "capybara-webkit"], "answers": [{"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 1, "last_activity_date": 1429137729, "creation_date": 1429137729, "answer_id": 29662208, "question_id": 29661102, "link": "https://stackoverflow.com/questions/29661102/how-to-extract-html-from-updated-dom-using-capybara-webkit-driver/29662208#29662208", "title": "How to extract HTML from updated DOM using Capybara Webkit driver?", "body": "<p>Found one workaround which is OK:</p>\n\n<pre><code>html = page.evaluate_script( 'document.documentElement.innerHTML' )\n</code></pre>\n\n<p>I guess one could use JS or jQuery finder to find the expected <code>&lt;div&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1453049495, "post_id": 34833108, "comment_id": 57422451, "body": "I think I tried this. I don&#39;t think it works when JS updates the DOM after the page loads."}, {"owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1453063384, "post_id": 34833108, "comment_id": 57427458, "body": "It works with the things I&#39;m doing with lots of dynamic js dom updates. There may be something else going on. I&#39;ve dug through the Webkit source and I can see it invokes a getInnerHTML call to the Webkit server, which delegates to capybara.js call of this.getNodes[index].innerHTML. So as long as the node is there in the dom, it should work."}, {"owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1453063722, "post_id": 34833108, "comment_id": 57427591, "body": "Also, another tip: For some reason in our app, we had automatic_reload = false. When we recently upgraded to the latest(1.4.x-&gt;1.7.x) we had all sorts of weird issues that were ultimately solved by removing this setting, which defaults to true I believe.  This setting affects whether you can have unattached nodes in the dom."}], "tags": [], "owner": {"reputation": 2718, "user_id": 1490262, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/afc8915df9cbb5c119ea0057d17fabd2?s=128&d=identicon&r=PG", "display_name": "Peter P.", "link": "https://stackoverflow.com/users/1490262/peter-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1452985889, "last_edit_date": 1452985889, "creation_date": 1452985225, "answer_id": 34833108, "question_id": 29661102, "link": "https://stackoverflow.com/questions/29661102/how-to-extract-html-from-updated-dom-using-capybara-webkit-driver/34833108#34833108", "title": "How to extract HTML from updated DOM using Capybara Webkit driver?", "body": "<p>For the entire page body you can do this:</p>\n\n<pre><code>page.body\n</code></pre>\n\n<p>For any element in particular</p>\n\n<pre><code>page.find(\".my-div\").base.inner_html\n</code></pre>\n\n<p>Check out the full API here: <a href=\"https://github.com/thoughtbot/capybara-webkit/blob/master/lib/capybara/webkit/node.rb\" rel=\"nofollow\">https://github.com/thoughtbot/capybara-webkit/blob/master/lib/capybara/webkit/node.rb</a></p>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1078, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452985889, "creation_date": 1429132693, "last_edit_date": 1429135685, "question_id": 29661102, "link": "https://stackoverflow.com/questions/29661102/how-to-extract-html-from-updated-dom-using-capybara-webkit-driver", "title": "How to extract HTML from updated DOM using Capybara Webkit driver?", "body": "<p>I have a page that injects some text into the DOM: <code>'Success!'</code>.</p>\n\n<p>The Javascript code works because I see the expected text in the screenshot, and the spec passes:</p>\n\n<pre><code>page.visit '/'\n\nsave_and_open_screenshot\n\nexpect( page).to have_content 'Success!'\n\nputs page.html\n</code></pre>\n\n<p>However, the <code>page.html</code> is not updated. It does not have the injected text.</p>\n\n<p>How do I get the HTML for the updated DOM?</p>\n\n<p>EDIT: I found that the issue is caused by an iframe. The iframe is not added to the page.html, but it is added to the page.</p>\n\n<p>EDIT #2: It turns out that the 'Success!' content is not in the iframe. So maybe the context is switching to the iframe.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "strong-parameters", "activemodel"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 1, "creation_date": 1429136789, "post_id": 29661095, "comment_id": 47463576, "body": "Are you accidentally using the copy of the parameters from before you&#39;ve called <code>required</code> and <code>permit</code>? What makes me think that is, if you&#39;ve set up a method to return the safe parameters where you&#39;ve done <code>params.required(:buncha_data).permit...</code> then that params object will now begin at the <code>foo_data</code> level rather than where you&#39;ve been doing <code>posted_data[&#39;buncha_data&#39;][&#39;foo_data&#39;].map...</code>"}, {"owner": {"reputation": 307, "user_id": 334743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ca67f28c684ac9798e35ca7561d8e680?s=128&d=identicon&r=PG", "display_name": "Mojowen", "link": "https://stackoverflow.com/users/334743/mojowen"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1429141026, "post_id": 29661095, "comment_id": 47465062, "body": "I&#39;ve updated to show what my controller and parameter method looks like - not sure I&#39;m totally following. I don&#39;t believe I&#39;m using a copy"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 1, "creation_date": 1429141742, "post_id": 29661095, "comment_id": 47465312, "body": "Am away from the laptop now but I&#39;m almost certain <code>permit</code> returns a new copy of the parameters and doesn&#39;t update the existing object. So if you end your <code>import_params</code> method with the line that just reads  <code>params</code> that is returning the original params object that <code>permit</code> hasn&#39;t been called on."}, {"owner": {"reputation": 307, "user_id": 334743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ca67f28c684ac9798e35ca7561d8e680?s=128&d=identicon&r=PG", "display_name": "Mojowen", "link": "https://stackoverflow.com/users/334743/mojowen"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1429144196, "post_id": 29661095, "comment_id": 47466042, "body": "Ah that seems to be the trick - setting the params hash object to the required value. Which I&#39;ve <b>never</b> seen the documentation - e.g. <code>params[:buncha_data] = params.require(:buncha_data).permit(foo_data: [:bar, :baz])</code>"}, {"owner": {"reputation": 307, "user_id": 334743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ca67f28c684ac9798e35ca7561d8e680?s=128&d=identicon&r=PG", "display_name": "Mojowen", "link": "https://stackoverflow.com/users/334743/mojowen"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1429197166, "post_id": 29661095, "comment_id": 47495125, "body": "@mikej Feel free to answer if you&#39;d like, otherwise I&#39;ll add a summary of what I was doing wrong"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 1, "creation_date": 1429440552, "post_id": 29661095, "comment_id": 47591246, "body": "your summary looks good."}], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 334743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ca67f28c684ac9798e35ca7561d8e680?s=128&d=identicon&r=PG", "display_name": "Mojowen", "link": "https://stackoverflow.com/users/334743/mojowen"}, "is_accepted": false, "score": 1, "last_activity_date": 1429555951, "last_edit_date": 1429555951, "creation_date": 1429221004, "answer_id": 29686593, "question_id": 29661095, "link": "https://stackoverflow.com/questions/29661095/rails-strong-parameters-not-marking-arrays-hashes-as-permitted/29686593#29686593", "title": "Rail&#39;s strong_parameters not marking Array&#39;s Hashes as Permitted", "body": "<p>As MikeJ pointed out - <code>require</code> and <code>permit</code> do not update the object.</p>\n\n<p>I rewrote my controller to be:</p>\n\n<pre><code>def import_params\n    params[:different_property] = params.require(:different_property)\n    params[:buncha_data] = params.require(:buncha_data).permit(foo_data: [:bar, :baz])\n    params\nend\n</code></pre>\n\n<p>And everything worked great. This is somewhat apparent if you read the <a href=\"http://Phttps://github.com/rails/strong_parameters/blob/e012729c9b50192f04277220001026b9129bb8ae/lib/action_controller/parameters.rb#L45-L55\" rel=\"nofollow\">source code</a>. </p>\n"}], "owner": {"reputation": 307, "user_id": 334743, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ca67f28c684ac9798e35ca7561d8e680?s=128&d=identicon&r=PG", "display_name": "Mojowen", "link": "https://stackoverflow.com/users/334743/mojowen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429555951, "creation_date": 1429132680, "last_edit_date": 1429141158, "question_id": 29661095, "link": "https://stackoverflow.com/questions/29661095/rails-strong-parameters-not-marking-arrays-hashes-as-permitted", "title": "Rail&#39;s strong_parameters not marking Array&#39;s Hashes as Permitted", "body": "<p>I've got a bit of a puzzler on for strong_parameters.</p>\n\n<p>I'm posting a large array of JSON to get processed and added as relational models to a central model. It looks something like this:</p>\n\n<pre><code>{\n   \"buncha_data\": {\n       \"foo_data\" [\n           { \"bar\": 1, \"baz\": 3 },\n           ...\n       ]\n   },\n   ...\n}\n</code></pre>\n\n<p>And I've got a require/permit flow that looks like it should work:</p>\n\n<pre><code>class TheController &lt; ApplicationController\n    def create\n        mymodel = MyModel.create import_params\n    end\n\n    def import_params\n        params.require(:different_property)\n        params.require(:buncha_data).permit(foo_data: [:bar, :baz])\n        params\n    end\nend\n</code></pre>\n\n<p>Yet in the create method when I iterate through this data to create the related model:</p>\n\n<pre><code>self.relatables = posted_data['buncha_data']['foo_data'].map do |raw|\n    RelatedModel.new raw\nend\n</code></pre>\n\n<p>I get a <code>ActiveModel::ForbiddenAttributesError</code>. What I've ended up having to do is iterate through the array on my own and call <code>permit</code> on each hash in the array, like so:</p>\n\n<pre><code>params.required(:buncha_data).each do |_, list|\n    list.each{ |row| row.permit [:bar, :baz] }\nend\n</code></pre>\n\n<p>What gives?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "partials", "jbuilder"], "answers": [{"comments": [{"owner": {"reputation": 6399, "user_id": 5800592, "user_type": "registered", "accept_rate": 93, "profile_image": "https://graph.facebook.com/783606718977/picture?type=large", "display_name": "Wylliam Judd", "link": "https://stackoverflow.com/users/5800592/wylliam-judd"}, "edited": false, "score": 2, "creation_date": 1469306302, "post_id": 29661160, "comment_id": 64484199, "body": "There&#39;s a shortcut: `json.profile do json.partial! &#39;users/user_reduced&#39;, user: @request.user&#39;"}, {"owner": {"reputation": 6399, "user_id": 5800592, "user_type": "registered", "accept_rate": 93, "profile_image": "https://graph.facebook.com/783606718977/picture?type=large", "display_name": "Wylliam Judd", "link": "https://stackoverflow.com/users/5800592/wylliam-judd"}, "edited": false, "score": 2, "creation_date": 1469306328, "post_id": 29661160, "comment_id": 64484205, "body": "It&#39;s not necessary to include partial: or locals:"}, {"owner": {"reputation": 331, "user_id": 6649757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0eb01cc2fc982a1d3a0f998f313df1?s=128&d=identicon&r=PG", "display_name": "Thiago Silva Ferreira", "link": "https://stackoverflow.com/users/6649757/thiago-silva-ferreira"}, "edited": false, "score": 0, "creation_date": 1508764527, "post_id": 29661160, "comment_id": 80727725, "body": "but if you need to pass more variables, this shortcut not works. Example:  <code>json.partial! partial: &#39;users&#47;user_reduced&#39;, locals: { user: @request.user, other: &#39;value&#39; }</code>"}], "tags": [], "owner": {"reputation": 5036, "user_id": 1223595, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/770fb9d9d0c71f2c21de84c60653c230?s=128&d=identicon&r=PG", "display_name": "steventnorris", "link": "https://stackoverflow.com/users/1223595/steventnorris"}, "is_accepted": true, "score": 11, "last_activity_date": 1429132883, "creation_date": 1429132883, "answer_id": 29661160, "question_id": 29661073, "link": "https://stackoverflow.com/questions/29661073/jbuilder-partial-with-path/29661160#29661160", "title": "Jbuilder Partial With Path", "body": "<p>I have tried to fix this for hours, and found, finally, that the syntax (thought listed on the jbuilder readme) above does not work. You must format your partials like the below:</p>\n\n<pre><code>json.partial! 'partials/partial_path', locals: {local_var: my_local_var}\n</code></pre>\n\n<p>So in my case, it would be:</p>\n\n<pre><code>json.(@request, :id)\n\njson.profile do\n    json.partial! partial: 'users/user_reduced', locals: {user: @request.user}\nend\n</code></pre>\n"}], "owner": {"reputation": 5036, "user_id": 1223595, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/770fb9d9d0c71f2c21de84c60653c230?s=128&d=identicon&r=PG", "display_name": "steventnorris", "link": "https://stackoverflow.com/users/1223595/steventnorris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6683, "favorite_count": 1, "accepted_answer_id": 29661160, "answer_count": 1, "score": 7, "last_activity_date": 1429132883, "creation_date": 1429132621, "question_id": 29661073, "link": "https://stackoverflow.com/questions/29661073/jbuilder-partial-with-path", "title": "Jbuilder Partial With Path", "body": "<p>I am attempting to render a partial jbuilder file using the below</p>\n\n<pre><code>json.(@request, :id)\n\njson.profile do\n    json.partial! partial: 'users/user_reduced', user: @request.user\nend\n</code></pre>\n\n<p>the partial is below (users/_user_reduced.json.jbuilder)</p>\n\n<pre><code>json.(user, :id, :name, :sex)\n</code></pre>\n\n<p>However, I get the error:</p>\n\n<pre><code>ActionView::Template::Error (undefined local variable or method `user' for #&lt;#&lt;Class:0x007fe4ebc91878&gt;:0x007fe4ebe599f8&gt;):\n</code></pre>\n\n<p>It's as if the local user variable is not being set. What is the syntax for setting a local variable to a jbuilder partial path?</p>\n"}, {"tags": ["ruby", "cucumber", "watir-webdriver", "pageobjects"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 3, "last_activity_date": 1429132357, "creation_date": 1429132357, "answer_id": 29661009, "question_id": 29660908, "link": "https://stackoverflow.com/questions/29660908/page-objects-as-variables-in-ruby-watir/29661009#29661009", "title": "Page Objects as variables in Ruby/Watir", "body": "<p>Add an <code>=</code> to the method name when using send:</p>\n\n<pre><code>page.send(\"#{some_field}=\", 'hello')\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4271352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf26baedb1d1df01f189962cca204013?s=128&d=identicon&r=PG&f=1", "display_name": "moejello", "link": "https://stackoverflow.com/users/4271352/moejello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429132357, "creation_date": 1429131978, "question_id": 29660908, "link": "https://stackoverflow.com/questions/29660908/page-objects-as-variables-in-ruby-watir", "title": "Page Objects as variables in Ruby/Watir", "body": "<p>I know that you can do something like this:</p>\n\n<pre><code>class MyPage  \n    include PageObject\n    text_field(:field_1, :id =&gt; 'field_1')  \n    text_field(:field_2, :id =&gt; 'field_2')  \nend\n\npage = new MyPage  \npage.field1 = 'foo'  \npage.field2 = 'bar'\n</code></pre>\n\n<p>What I would like to do is be able to pass in a variable as the field using cucumber:  </p>\n\n<pre><code>When(/^I set \"([^\"]*)\" field to 'hello'$/) do |some_field|  \n    page.some_field = 'hello'  \nend  \n</code></pre>\n\n<p>I know you can use <code>page.send(variable)</code> to call a method, but <code>page.send(variable) = 'hello'</code> does not work or other variations of that that I have tried so far. Is there a way to do what I am asking?</p>\n"}, {"tags": ["ruby", "windows", "loops", "twitter", "status"], "comments": [{"owner": {"reputation": 632, "user_id": 1858676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6712b50d0987d75709bf882bb38aa542?s=128&d=identicon&r=PG", "display_name": "Rosa", "link": "https://stackoverflow.com/users/1858676/rosa"}, "edited": false, "score": 0, "creation_date": 1429131769, "post_id": 29660799, "comment_id": 47461151, "body": "It says you are missing a required parameter called &quot;status,&quot; have you looked into that?"}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "reply_to_user": {"reputation": 632, "user_id": 1858676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6712b50d0987d75709bf882bb38aa542?s=128&d=identicon&r=PG", "display_name": "Rosa", "link": "https://stackoverflow.com/users/1858676/rosa"}, "edited": false, "score": 0, "creation_date": 1429131931, "post_id": 29660799, "comment_id": 47461246, "body": "Yeah I don&#39;t know how to add that parameter...or why...it tweets normally at first.. plus the code that tweets says I use &quot;client.update(&quot;text&quot;)&quot; in order to tweet. So I thought that would be work. :\\ @cantido"}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "reply_to_user": {"reputation": 632, "user_id": 1858676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6712b50d0987d75709bf882bb38aa542?s=128&d=identicon&r=PG", "display_name": "Rosa", "link": "https://stackoverflow.com/users/1858676/rosa"}, "edited": false, "score": 0, "creation_date": 1429135382, "post_id": 29660799, "comment_id": 47463034, "body": "do you know how to add that param? @cantido"}], "answers": [{"comments": [{"owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "reply_to_user": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1429158227, "post_id": 29664511, "comment_id": 47469713, "body": "also, Perhaps #{tweets} is over 140 character?"}, {"owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "reply_to_user": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1429158334, "post_id": 29664511, "comment_id": 47469744, "body": "watch out twitter character limit."}], "tags": [], "owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "is_accepted": false, "score": 0, "last_activity_date": 1429152644, "creation_date": 1429152644, "answer_id": 29664511, "question_id": 29660799, "link": "https://stackoverflow.com/questions/29660799/keep-getting-ruby-twittererrorforbidden/29664511#29664511", "title": "Keep getting Ruby Twitter::Error::Forbidden", "body": "<pre><code>require 'Twitter'\n\ndef repeat_every(interval)\n  loop do\n    start_time = Time.now\n    yield\n    elapsed = Time.now - start_time\n    sleep([interval - elapsed, 0].max)\n  end\nend\n\n\ndef post \n    client = Twitter::REST::Client.new do |config|\n      config.consumer_key = \"xxxx\"\n      config.consumer_secret = \"xxxx\"\n      config.access_token = \"xxxx\"\n      config.access_token_secret = \"xxxx\"\n    end\n  File.open(\"tweets.txt\") do |line|\n    line.each_line do |item|\n      tweets = item\n      puts tweets\n      client.update(\"#{tweets}\")\n      sleep((rand*10 + 10).to_i)\n    end\n  end\n\nend\n\n\nrepeat_every(81000){\n    post\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4310, "user_id": 826898, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9c1b4c0ad311db7d75f31654ce387ceb?s=128&d=identicon&r=PG&f=1", "display_name": "Yagnesh Agola", "link": "https://stackoverflow.com/users/826898/yagnesh-agola"}, "edited": false, "score": 0, "creation_date": 1429159071, "post_id": 29665158, "comment_id": 47469937, "body": "Add some description rather providing only link to reference."}, {"owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "edited": false, "score": 0, "creation_date": 1429159489, "post_id": 29665158, "comment_id": 47470044, "body": "Sorry. I not good at English. Do not know well explanation possible.  I thought ssl certificate is not set well. So, I have disabled the authentication of certificate."}, {"owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "edited": false, "score": 0, "creation_date": 1429162869, "post_id": 29665158, "comment_id": 47471206, "body": "I have no confidence that has been described well. Do you could understand? And pray that you are transmitted successfully."}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1429182032, "post_id": 29665158, "comment_id": 47482998, "body": "I get a &quot;warning: already initialized constant OpenSSL::SSL::VERIFY_PEER&quot;  ...whatever that means @rainwont"}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1429182071, "post_id": 29665158, "comment_id": 47483025, "body": "and then it does not post the tweet @rainwont"}, {"owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "reply_to_user": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1429185625, "post_id": 29665158, "comment_id": 47485764, "body": "Is difficult to understand the problem becomes complicated. Let&#39;s look at one by one. 1. consumerkey, consumersecretkey, accesstoken, aceestokensecret Do not mistake these? <a href=\"http://apps.twitter.com\" rel=\"nofollow noreferrer\">link</a> 2. What you originally posted itself can be? Specifies the string directly. Do you can post in this? <code>post.client (&quot;test tweet&quot;)</code> 3. Are you retrieve one row at a time string from accurately file? <code>File.open (&quot;tweets.txt&quot;) do | line | line.each_line do | item | tweets = item puts tweets</code> I want you to check.\u3000@marriedjane875"}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1429221172, "post_id": 29665158, "comment_id": 47510329, "body": "The keys are correct, the original strings are correct and post as they are. Retrieving one row at a time works fine...it prints them in order. I used puts and did not try to tweet from the file so it was displayed in the command prompt. The only issue is &quot;post.client(&quot;&quot;test tweet&quot;)&quot; &lt;&lt; this will not work, and i get an error that reads: &#39;&lt;main&gt;&#39; : undefined method &#39;client&#39; for #&lt;Twitter::REST::Client:0x000000037b4438&gt; (NoMethodError) @rainwont"}, {"owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "edited": false, "score": 0, "creation_date": 1429223245, "post_id": 29665158, "comment_id": 47511157, "body": "sorry. type miss is <code>post.client</code> \u3000<code>client.update</code> is correct."}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1429228951, "post_id": 29665158, "comment_id": 47512993, "body": "yeah i think the problem is the version of Ruby I&#39;m using (Ruby 2.1.5-x64) and the gem, twitter-5.14.0 ...but i&#39;m not sure. it doesn&#39;t have this problem in mac. only windows. @rainwont"}, {"owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "edited": false, "score": 0, "creation_date": 1429229644, "post_id": 29665158, "comment_id": 47513205, "body": "this code inserted? <code>OpenSSL :: SSL :: VERIFY_PEER = OpenSSL :: SSL :: VERIFY_NONE</code>  And I also use Windows, and although I think for ssl certificate setting is wrong error occurs If you do not insert before connecting this one line to Twitter.\u3000For more information on this link\u3000<a href=\"https://github.com/intridea/omniauth/issues/404\" rel=\"nofollow noreferrer\">link</a>  I because only read Japanese well, the contents of this site can not be explained well. I&#39;m referring to the Japanese site. To say whether, you probably will not to read Japanese site. . ."}], "tags": [], "owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "is_accepted": false, "score": 0, "last_activity_date": 1429157225, "creation_date": 1429157225, "answer_id": 29665158, "question_id": 29660799, "link": "https://stackoverflow.com/questions/29660799/keep-getting-ruby-twittererrorforbidden/29665158#29665158", "title": "Keep getting Ruby Twitter::Error::Forbidden", "body": "<p>insert this code on the second line</p>\n\n<pre><code>OpenSSL :: SSL :: VERIFY_PEER = OpenSSL :: SSL :: VERIFY_NONE\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429157225, "creation_date": 1429131556, "question_id": 29660799, "link": "https://stackoverflow.com/questions/29660799/keep-getting-ruby-twittererrorforbidden", "title": "Keep getting Ruby Twitter::Error::Forbidden", "body": "<p>I'm pulling tweets from a text file and tweeting them in timed intervals. As the first tweet is posted, everything is fine. When its time for the next tweet to post I get an error that reads:</p>\n\n<p><img src=\"https://i.stack.imgur.com/sQaMO.png\" alt=\"enter image description here\"></p>\n\n<p>I got my four keys, but I can always renew them or get new ones...Here is the code I'm using:</p>\n\n<pre><code>require 'Twitter'\n\nclient = Twitter::REST::Client.new do |config|\n  config.consumer_key = \"...\"\n  config.consumer_secret = \"...\"\n  config.access_token = \"...\"\n  config.access_token_secret = \"...\"\nend\n\n\ndef repeat_every(interval)\n  loop do\n    start_time = Time.now\n    yield\n    elapsed = Time.now - start_time\n    sleep([interval - elapsed, 0].max)\n  end\nend\n\n\nblog_post = []\ntweet_img = []\n\n\ndef post \n    client = Twitter::REST::Client.new do |config|\n        config.consumer_key = \"...\"\n        config.consumer_secret = \"...\"\n        config.access_token = \"...\"\n        config.access_token_secret = \"...\"\n    end\n  File.open(\"tweets.txt\") do |line|\n    line.each do |item|\n      tweets = item\n      puts tweets\n      client.update(\"#{tweets}\").to_s\n      sleep((rand*1800 +900).to_i)\n    end\n  end\nend\n\n\nrepeat_every(81000){\n    post\n}\n</code></pre>\n"}, {"tags": ["ruby", "regex", "splat"], "answers": [{"comments": [{"owner": {"reputation": 445, "user_id": 4368245, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/h0TDk.jpg?s=128&g=1", "display_name": "spectre6000", "link": "https://stackoverflow.com/users/4368245/spectre6000"}, "edited": false, "score": 0, "creation_date": 1429131872, "post_id": 29660825, "comment_id": 47461211, "body": "That&#39;s the one. That said, I&#39;m not sure I completely understand why each doesn&#39;t work... I guess I&#39;ll have to noodle on it a bit."}, {"owner": {"reputation": 725, "user_id": 3613829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhaFN.jpg?s=128&g=1", "display_name": "Alexis Andersen", "link": "https://stackoverflow.com/users/3613829/alexis-andersen"}, "edited": false, "score": 1, "creation_date": 1429132495, "post_id": 29660825, "comment_id": 47461580, "body": "The return value of the each method is the list it is iterating over. So the return value of that method call is <code>[&quot;b1&quot;, &quot;c1&quot;, &quot;d1&quot;]</code>"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 1, "creation_date": 1429132620, "post_id": 29660825, "comment_id": 47461651, "body": "Which means that <code>if emptyii?</code> would always be true."}, {"owner": {"reputation": 445, "user_id": 4368245, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/h0TDk.jpg?s=128&g=1", "display_name": "spectre6000", "link": "https://stackoverflow.com/users/4368245/spectre6000"}, "edited": false, "score": 0, "creation_date": 1429137043, "post_id": 29660825, "comment_id": 47463676, "body": "...because non-nil/non-false is evaluated as truthy."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 2, "last_activity_date": 1429131665, "creation_date": 1429131665, "answer_id": 29660825, "question_id": 29660700, "link": "https://stackoverflow.com/questions/29660700/splat-operator-or-regex-not-working/29660825#29660825", "title": "Splat operator or regex not working?", "body": "<p>Instead of using <code>each</code>, use <code>all?</code> to test that all positions return true:</p>\n\n<pre><code>positions.all? { |position| get_space(position).token =~ /_/ }\n</code></pre>\n\n<p><code>positions.all?</code> will only be true if the block returns true for each of the positions.  </p>\n"}, {"tags": [], "owner": {"reputation": 1164, "user_id": 1288869, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/o0Ced.jpg?s=128&g=1", "display_name": "Tony DiNitto", "link": "https://stackoverflow.com/users/1288869/tony-dinitto"}, "is_accepted": false, "score": 1, "last_activity_date": 1429132907, "creation_date": 1429132907, "answer_id": 29661169, "question_id": 29660700, "link": "https://stackoverflow.com/questions/29660700/splat-operator-or-regex-not-working/29661169#29661169", "title": "Splat operator or regex not working?", "body": "<p>The other answers are right here in terms of what you need to do, but you should understand why your current solution doesn't work.</p>\n\n<p>You're on the right path, but you simply need to observe your logic in a deeper way. Let's consider the two lines from your code:</p>\n\n<pre><code>@available_moves &lt;&lt; \"c1\" if empty?(\"b1\") &amp;&amp; empty?(\"c1\") &amp;&amp; empty?(\"d1\")\n</code></pre>\n\n<p>This says, \"Take c1 and put it into @available_moves IF you get a truth result to b1, c1, and d1 being returned from empty as true. This looks good and clearly works.</p>\n\n<p>However, look at your other line where things break down: </p>\n\n<pre><code>@available_moves &lt;&lt; \"c1\" if emptyii?(\"b1\", \"c1\", \"d1\")\n</code></pre>\n\n<p>This says, \"Shovel c1 into available_moves if...well, what exactly?\" Do you consider emptyii true if b1 is true, but c1 and d1 aren't? Is it true if only ALL of them are true? Which is it exactly? </p>\n\n<p>In your first example, you had a great clear expression. This one however, is not. That's why you're getting the suggestion to use <code>.all?</code> Because that's so much clearer on what you're trying to do, and of course will actually work (as opposed to this statement you have). </p>\n"}], "owner": {"reputation": 445, "user_id": 4368245, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/h0TDk.jpg?s=128&g=1", "display_name": "spectre6000", "link": "https://stackoverflow.com/users/4368245/spectre6000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 29660825, "answer_count": 2, "score": 2, "last_activity_date": 1429132907, "creation_date": 1429131224, "last_edit_date": 1429131559, "question_id": 29660700, "link": "https://stackoverflow.com/questions/29660700/splat-operator-or-regex-not-working", "title": "Splat operator or regex not working?", "body": "<p>I'm new to Ruby and building Chess as a learning exercise. I'm attempting to refactor some code, and I'm stymied.</p>\n\n<p>Why does this work:</p>\n\n<pre><code>@available_moves = []\n\n#part of castling logic\n@available_moves &lt;&lt; \"c1\" if empty?(\"b1\") &amp;&amp; empty?(\"c1\") &amp;&amp; empty?(\"d1\")\n\ndef empty?(position)\n  get_space(position).token =~ /_/\nend\n# sample tokens: \"_e4\", \"ka2\", \"_b3\"\n</code></pre>\n\n<p>...and this doesn't?:</p>\n\n<pre><code>@available_moves = []\n\n@available_moves &lt;&lt; \"c1\" if emptyii?(\"b1\", \"c1\", \"d1\")\n\ndef emptyii?(*positions)\n  positions.each { |position| get_space(position).token =~ /_/ }\nend\n</code></pre>\n\n<p>It's probably something pretty stupid, but I can't figure out what I'm doing wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "heroku", "group-by"], "comments": [{"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1429132384, "post_id": 29660396, "comment_id": 47461525, "body": "The error is telling you what you&#39;re trying to do can&#39;t be done this way. In this query only one row will be returned for each distinct patient_id. There may be multiple Comment rows with this patient_id. Say there are 10 comments with the same patient_id - if we select a column (eg it&#39;s id) that we are not grouping by, which row of the 10 should this value come from? It&#39;s ambiguous, so SQL doesn&#39;t let you do it. You can only use a column you&#39;re grouping over or the output of a function which aggregates the grouped rows, like COUNT or SUM."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 4630110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/hDsTU.jpg?s=128&g=1", "display_name": "Skiapex", "link": "https://stackoverflow.com/users/4630110/skiapex"}, "edited": false, "score": 1, "creation_date": 1429199497, "post_id": 29661654, "comment_id": 47496962, "body": "Thanks Erwin, that was a very helpful answer. I have switched to use PostreSQL locally and <code>DISTINCT ON</code> is giving me a list of unique patients: <code>@comments.order(&quot;patient_id, created_at DESC&quot;).select(&#39;ON (patient_id) *&#39;).uniq.each_with_index do |comment, index|</code> The patients are now ordered in the order they were created in my <code>seed.rb</code> file - so in the order in which they were created. Do you have a recommendation for how to get them ordered by the <code>created_at</code> of their latest comment?"}, {"owner": {"reputation": 473266, "user_id": 939860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed7cecf2bd835cf5670d271d0d104f51?s=128&d=identicon&r=PG", "display_name": "Erwin Brandstetter", "link": "https://stackoverflow.com/users/939860/erwin-brandstetter"}, "reply_to_user": {"reputation": 133, "user_id": 4630110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/hDsTU.jpg?s=128&g=1", "display_name": "Skiapex", "link": "https://stackoverflow.com/users/4630110/skiapex"}, "edited": false, "score": 0, "creation_date": 1429214640, "post_id": 29661654, "comment_id": 47506651, "body": "@Skiapex: Wrap this query into an outer query with a different <code>ORDER BY</code>. Here are detailed instructions: <a href=\"http://stackoverflow.com/questions/24619117/select-all-threads-and-order-by-the-latest-one/24623210#24623210\" title=\"select all threads and order by the latest one\">stackoverflow.com/questions/24619117/&hellip;</a>"}], "tags": [], "owner": {"reputation": 473266, "user_id": 939860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed7cecf2bd835cf5670d271d0d104f51?s=128&d=identicon&r=PG", "display_name": "Erwin Brandstetter", "link": "https://stackoverflow.com/users/939860/erwin-brandstetter"}, "is_accepted": true, "score": 9, "last_activity_date": 1429135738, "last_edit_date": 1495541372, "creation_date": 1429135058, "answer_id": 29661654, "question_id": 29660396, "link": "https://stackoverflow.com/questions/29660396/groupingerror-error-column-must-appear-in-the-group-by-clause-or-be-used-i/29661654#29661654", "title": "GroupingError: ERROR: column &quot; &quot; must appear in the GROUP BY clause or be used in an aggregate function", "body": "<p>You cannot combine <code>SELECT *</code> with <code>GROUP BY some_column</code> in Postgres (unless <code>some_column</code> is the PK), because that's a contradiction. All non-aggregated columns (used in the <code>SELECT</code>, <code>HAVING</code> or <code>ORDER BY</code> clause outside an aggregate function) must be in the <code>GROUP BY</code> list - where the primary key column can replace all columns of a table. Else it is undefined <em>which</em> value to pick from the aggregated set.</p>\n\n<p><a href=\"http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-GROUPBY\" rel=\"nofollow noreferrer\">Per documentation:</a></p>\n\n<blockquote>\n  <p>When <code>GROUP BY</code> is present, or any aggregate functions are present, it\n  is not valid for the <code>SELECT</code> list expressions to refer to ungrouped\n  columns except within aggregate functions or when the ungrouped column\n  is functionally dependent on the grouped columns, since there would\n  otherwise be more than one possible value to return for an ungrouped\n  column. A functional dependency exists if the grouped columns (or a\n  subset thereof) are the primary key of the table containing the\n  ungrouped column.</p>\n</blockquote>\n\n<p><sub>A certain other RDBMS is known to play dirty tricks here and allow this and pick arbitrary values... </sub></p>\n\n<p>You seem to want a list of unique patients that have commented, with the <em>latest</em> comment each. The simplest way in Postgres is with <code>DISTINCT ON</code>:</p>\n\n<pre><code>SELECT DISTINCT ON (patient_id) *\nFROM   comments\nWHERE  clinician_id = $1\nORDER  BY patient_id, created_at DESC NULLS LAST;\n</code></pre>\n\n<p>But this won't fly with SQLite - which should not be in the loop to begin with:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/11249059/generic-ruby-solution-for-sqlite3-like-or-postgresql-ilike/11278943#11278943\">Generic Ruby solution for SQLite3 &quot;LIKE&quot; or PostgreSQL &quot;ILIKE&quot;?</a></li>\n</ul>\n\n<p><code>NULLS LAST</code> is only relevant if <code>created_at</code> can be NULL:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/9510509/postgresql-sort-by-datetime-asc-null-first/9511492#9511492\">PostgreSQL sort by datetime asc, null first?</a></li>\n</ul>\n\n<p>Details for <code>DISTINCT ON</code>:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564\">Select first row in each GROUP BY group?</a></li>\n</ul>\n"}], "owner": {"reputation": 133, "user_id": 4630110, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/hDsTU.jpg?s=128&g=1", "display_name": "Skiapex", "link": "https://stackoverflow.com/users/4630110/skiapex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5974, "favorite_count": 2, "accepted_answer_id": 29661654, "answer_count": 1, "score": 4, "last_activity_date": 1429135738, "creation_date": 1429130161, "last_edit_date": 1495542319, "question_id": 29660396, "link": "https://stackoverflow.com/questions/29660396/groupingerror-error-column-must-appear-in-the-group-by-clause-or-be-used-i", "title": "GroupingError: ERROR: column &quot; &quot; must appear in the GROUP BY clause or be used in an aggregate function", "body": "<p>I am trying to create a list of unique patients who have left comments.  The code words fine until I upload to heroku where it doesnt work in postgresql.</p>\n\n<p>This is my Ruby .erb code to create the list:</p>\n\n<pre><code>&lt;% @comments.group(:patient_id).each_with_index do |comment, index| %&gt;\n    &lt;div class=\"profile-post color-one\"&gt;\n       &lt;span class=\"profile-post-numb\"&gt;&lt;%= index+1 %&gt;&lt;/span&gt;\n        &lt;div class=\"profile-post-in\"&gt;\n            &lt;h3 class=\"heading-xs\"&gt;&lt;a&gt;&lt;%= link_to \"#{comment.patient.first_name} #{comment.patient.last_name}\", comment_path(comment) %&gt;&lt;/a&gt;&lt;/h3&gt;\n            &lt;p&gt;Lastest comment from &lt;%= time_ago_in_words(comment.created_at) %&gt; ago&lt;i class=\"pull-right\"&gt;&lt;%= link_to \"Edit\", edit_comment_path(comment) %&gt; &lt;%= link_to \"Delete\", comment_path(comment), method: :delete, data: {confirm: 'Are you sure you want to delete'} %&gt;&lt;/i&gt;&lt;/p&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>@comments is defined in the controller as:</p>\n\n<pre><code>def index\n  @comments = current_clinician.comments.order(\"created_at desc\")\nend\n</code></pre>\n\n<p>heroku logs give me this as the error message:</p>\n\n<blockquote>\n<pre><code>PG::GroupingError: ERROR:  column \"comments.id\" must appear in the GROUP BY clause or be used in an aggregate function\n\nLINE 1: SELECT \"comments\".* FROM \"comments\"  WHERE  comments\".\"clini...\n               ^\nSELECT \"comments\".* *FROM \"comments\"  WHERE \"comments\".\"clinician_id\" = $1 GROUP BY patient_id  ORDER BY created_at desc\n</code></pre>\n</blockquote>\n\n<p>I have tried the solutions from a other SO questions, such as <a href=\"https://stackoverflow.com/questions/20942477/groupingerror-error-column-must-appear-in-the-group-by-clause-or-be-used-in-an\">20942477</a>. Which said that I should add the field comments.id to my group clause:</p>\n\n<pre><code>&lt;% @comments.group(:patient_id, :\"comments.id\").each_with_index do |comment, index| %&gt;\n</code></pre>\n\n<p>This gets rid of the error on heroku but defeats the purpose of the group command - it no longer only shows unique patients but instead lists all of them.</p>\n\n<p>I also tried the solutions from  <a href=\"https://stackoverflow.com/questions/1780893/postgres-partial-column-in-select-group-by-column-must-appear-in-the-group-b\">1780893</a>.  Which said that I should change the ORDER BY:</p>\n\n<pre><code>@comments = current_clinician.comments.order(\"substring(created_at,1.8) desc\")\n</code></pre>\n\n<p>Which gives this error locally:</p>\n\n<blockquote>\n  <p>SQLite3::SQLException: no such function: substring: SELECT\n  \"comments\".* FROM \"comments\" WHERE \"comments\".\"clinician_id\" = ? ORDER\n  BY substring(created_at,1.8) desc</p>\n</blockquote>\n\n<p>I realize this is a common problem, I am inexperienced with SQL so I am having trouble getting the code so it will work in both my development and production environments.  The answers I have read on SO aren't using Ruby to get SQL and go over my experience level.</p>\n"}, {"tags": ["ruby", "sass", "middleman"], "comments": [{"owner": {"reputation": 62282, "user_id": 1652962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2cf5a0741f183379686fe0995ffc27ae?s=128&d=identicon&r=PG", "display_name": "cimmanon", "link": "https://stackoverflow.com/users/1652962/cimmanon"}, "edited": false, "score": 0, "creation_date": 1429133374, "post_id": 29660379, "comment_id": 47462082, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/16584729/is-it-possible-to-exclude-ignore-certain-css-files-from-the-sass-processor\">Is it possible to exclude/ignore certain CSS-files from the Sass Processor?</a>"}, {"owner": {"reputation": 31, "user_id": 2680722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9039b626e32645e504b68904ebba42e7?s=128&d=identicon&r=PG&f=1", "display_name": "sternobicep", "link": "https://stackoverflow.com/users/2680722/sternobicep"}, "reply_to_user": {"reputation": 62282, "user_id": 1652962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2cf5a0741f183379686fe0995ffc27ae?s=128&d=identicon&r=PG", "display_name": "cimmanon", "link": "https://stackoverflow.com/users/1652962/cimmanon"}, "edited": false, "score": 0, "creation_date": 1429194473, "post_id": 29660379, "comment_id": 47492895, "body": "@cimmanon it&#39;s similar in nature, but unlike that question, which is more along the line of &quot;ignore this file during the compilation&quot;, this question is specific to middleman, which is &quot;ignore this file during the compilation, but do not ignore it during the build process&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 821938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b9982a63d2f6e8f8f2631b52372bc9?s=128&d=identicon&r=PG", "display_name": "erotte", "link": "https://stackoverflow.com/users/821938/erotte"}, "is_accepted": false, "score": 1, "last_activity_date": 1438202415, "creation_date": 1438202415, "answer_id": 31710664, "question_id": 29660379, "link": "https://stackoverflow.com/questions/29660379/middleman-include-a-scss-file-in-the-build-but-do-not-compile-it/31710664#31710664", "title": "Middleman: Include a .scss file in the build, but do not compile it", "body": "<p>Yoy may use the <code>_underscore</code> prefix to exclude files from Sass compilation. It's intended for usage with includes/partials, but will do the job. Sass won't compile those files until you @include them. </p>\n\n<p>After that, simply copy the needed files to your build directory. The  <code>:after_build</code> hook should be the right place for that:</p>\n\n<p><a href=\"https://middlemanapp.com/advanced/custom_extensions/#after_build\" rel=\"nofollow\">https://middlemanapp.com/advanced/custom_extensions/#after_build</a>   </p>\n"}], "owner": {"reputation": 31, "user_id": 2680722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9039b626e32645e504b68904ebba42e7?s=128&d=identicon&r=PG&f=1", "display_name": "sternobicep", "link": "https://stackoverflow.com/users/2680722/sternobicep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1048, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1438202415, "creation_date": 1429130119, "last_edit_date": 1429279884, "question_id": 29660379, "link": "https://stackoverflow.com/questions/29660379/middleman-include-a-scss-file-in-the-build-but-do-not-compile-it", "title": "Middleman: Include a .scss file in the build, but do not compile it", "body": "<p>When running the <code>middleman build</code> command, all the stylesheet files specified in the <code>set :css_dir</code> are compiled to <code>.css</code> extensions.</p>\n\n<p><strong>My question is:</strong> How can I exclude a <code>.scss</code> file from the compilation process (so that the content remains the same and doesn't compile to CSS), but can it be available in the build directory after <code>middleman build</code>?</p>\n\n<hr>\n\n<p>A question was raised whether it's similar to ignoring the <code>.scss</code> files in Compass compilation: It's similar in nature, but unlike that process, which is more along the line of \"ignore this file during the compilation\", this question is specific to middleman, which is \"ignore this file during the compilation, but do not ignore it during the build process\".</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1429132353, "last_edit_date": 1429132353, "creation_date": 1429131316, "answer_id": 29660734, "question_id": 29660213, "link": "https://stackoverflow.com/questions/29660213/belongs-to-and-has-many-association-problems/29660734#29660734", "title": "belongs_to and has_many association problems", "body": "<p>A standard <code>has_many</code> : <code>belongs_to</code> relationship in rails will only allow a single <code>user</code> per <code>hobby</code>.</p>\n\n<p>This is due to the fact that the relationship is defined by a single integer column (<code>user_id</code>) on the <code>hobby</code> table. The following image from the Rails Guides illustrates this relationship:</p>\n\n<p><img src=\"https://i.stack.imgur.com/MmPQS.png\" alt=\"has_many relationship illustration\"></p>\n\n<p>What you most likely are looking for is a <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow noreferrer\"><code>has_and_belongs_to_many</code> relationsship</a>:</p>\n\n<p><img src=\"https://i.stack.imgur.com/S6s29.png\" alt=\"Image from Rails Guides\"></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_and_belongs_to_many :hobbies\nend\n\nclass Hobby &lt; ActiveRecord::Base\n  has_and_belongs_to_many :users\nend\n\nclass CreateUsersAndHobbies &lt; ActiveRecord::Migration\n  def change\n    create_table :users do |t|\n      t.string :name\n      t.timestamps null: false\n    end\n\n    create_table :hobbies do |t|\n      t.string :name\n      t.timestamps null: false\n    end\n\n    create_table :users_hobbies, id: false do |t|\n      t.belongs_to :user, index: true\n      t.belongs_to :hobby, index: true\n    end\n  end\nend\n</code></pre>\n\n<p>The key difference here being that the relationship between hobby and user is stored in the <code>users_hobbies</code> join table.</p>\n"}], "owner": {"reputation": 851, "user_id": 1460362, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7684f2f794624fcdce2f9406e6234bf3?s=128&d=identicon&r=PG", "display_name": "Edgars", "link": "https://stackoverflow.com/users/1460362/edgars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 29660734, "answer_count": 1, "score": 2, "last_activity_date": 1429132353, "creation_date": 1429129594, "question_id": 29660213, "link": "https://stackoverflow.com/questions/29660213/belongs-to-and-has-many-association-problems", "title": "belongs_to and has_many association problems", "body": "<p>I have two models <strong>User</strong>  and Hobbie model. Hobbie has already 4 records like music, sports, books and other.</p>\n\n<p>Then I have form where I can create User and there  I can select from checkboxes those Hobbies at least 2.</p>\n\n<p><strong>User.rb</strong></p>\n\n<pre><code>has_many: hobbies\n</code></pre>\n\n<p><strong>Hobbie.rb</strong> </p>\n\n<pre><code>belongs_to :user\n</code></pre>\n\n<p><strong>Form:</strong></p>\n\n<pre><code> &lt;%= form_for(@user,  :remote=&gt;\"true\",:html =&gt; {:id=&gt;\"new_user\",\"data-parsley-validate\" =&gt; true,:multipart =&gt; true}, remote: true ,format: :json) do |f| %&gt;\n               ...\n\n         &lt;% @hobbies.each do |hobbie| %&gt;\n              &lt;li&gt;\n\n                &lt;%= check_box_tag 'hobbie_ids[]',hobbie.id%&gt; &lt;%= h hobbie.name %&gt;                       \n              &lt;/li&gt;        \n                 &lt;%= f.submit %&gt;\n         &lt;% end %&gt;\n     &lt;% end %&gt;\n</code></pre>\n\n<p>When I create user with hobbies like music and sports it saves without problems.</p>\n\n<pre><code>t= User.last\nt.hobbies =&gt; \"music\", \"sports\"\n</code></pre>\n\n<p><strong>Problem</strong>: When I go for second user and select hobbies like sports and books and save. </p>\n\n<p>Then in console:</p>\n\n<pre><code>t.User.last\nt.hobbies =&gt; \"sports\" and \"books\"\n</code></pre>\n\n<p>But for first User there is just \"music\" left.</p>\n\n<p>I can't figure it out. Do I need to use other assocciation type to get this to work? </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "neo4j", "neo4j.rb"], "answers": [{"comments": [{"owner": {"reputation": 4778, "user_id": 249323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/47bfbc203d66cd6a3ac563e7b84e8151?s=128&d=identicon&r=PG", "display_name": "David Chouinard", "link": "https://stackoverflow.com/users/249323/david-chouinard"}, "edited": false, "score": 0, "creation_date": 1429234590, "post_id": 29663002, "comment_id": 47514531, "body": "I&#39;m getting <code>undefined method &#39;update&#39;</code> when I call  <code>update</code> on an ActiveNode object \u2014 what am I doing wrong?"}, {"owner": {"reputation": 4762, "user_id": 2105069, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2c107e06ab979c6ef456d76b98e8d114?s=128&d=identicon&r=PG", "display_name": "subvertallchris", "link": "https://stackoverflow.com/users/2105069/subvertallchris"}, "reply_to_user": {"reputation": 4778, "user_id": 249323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/47bfbc203d66cd6a3ac563e7b84e8151?s=128&d=identicon&r=PG", "display_name": "David Chouinard", "link": "https://stackoverflow.com/users/249323/david-chouinard"}, "edited": false, "score": 0, "creation_date": 1429457661, "post_id": 29663002, "comment_id": 47597009, "body": "What is the full error? <code>undefined method &#39;update&#39; for</code>... what kind of object?"}, {"owner": {"reputation": 4778, "user_id": 249323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/47bfbc203d66cd6a3ac563e7b84e8151?s=128&d=identicon&r=PG", "display_name": "David Chouinard", "link": "https://stackoverflow.com/users/249323/david-chouinard"}, "edited": false, "score": 0, "creation_date": 1429558170, "post_id": 29663002, "comment_id": 47645644, "body": "I was expecting <code>update</code> to be a static method and was calling it on the ActiveRel class, like ActiveRecord&#39;s interface. Now correctly calling it on the instance. All good, thank you!"}], "tags": [], "owner": {"reputation": 4762, "user_id": 2105069, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/2c107e06ab979c6ef456d76b98e8d114?s=128&d=identicon&r=PG", "display_name": "subvertallchris", "link": "https://stackoverflow.com/users/2105069/subvertallchris"}, "is_accepted": true, "score": 1, "last_activity_date": 1429142129, "creation_date": 1429142129, "answer_id": 29663002, "question_id": 29659966, "link": "https://stackoverflow.com/questions/29659966/neo4jrb-updating-node-data/29663002#29663002", "title": "Neo4jRB: updating node data?", "body": "<p><code>update</code> comes from <code>Neo4j::Shared::Persistence</code>, not ActiveNode. You can find it <a href=\"https://github.com/neo4jrb/neo4j/blob/master/lib/neo4j/shared/persistence.rb#L114\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 4778, "user_id": 249323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/47bfbc203d66cd6a3ac563e7b84e8151?s=128&d=identicon&r=PG", "display_name": "David Chouinard", "link": "https://stackoverflow.com/users/249323/david-chouinard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 29663002, "answer_count": 1, "score": 0, "last_activity_date": 1429142129, "creation_date": 1429128745, "question_id": 29659966, "link": "https://stackoverflow.com/questions/29659966/neo4jrb-updating-node-data", "title": "Neo4jRB: updating node data?", "body": "<p>Looking at ActiveNode's <a href=\"https://github.com/neo4jrb/neo4j/blob/0888cd3132792802b7983e1047f4bf07bfc49d38/lib/neo4j/active_node/persistence.rb\" rel=\"nofollow\"><code>persistence.rb</code></a>, it seems like there's no <code>update()</code> or equivalent. How does one update the data of a particular node?</p>\n"}, {"tags": ["ruby", "linux", "macos", "applescript", "home-automation"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429133843, "post_id": 29659832, "comment_id": 47462332, "body": "You want to use Ruby to send the command? What have you tried? There are many ways to move a script to another machine and then launch it, so we need to know what protocol(s) you have available to you, such as FTP, SFTP, SSH, etc., because those determine how you move the file and execute it. As is there are a lot of unknowns and it&#39;d take a book to cover the possibilities making this question WAY too broad."}, {"owner": {"reputation": 1, "user_id": 4793390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3c3135ed71d61d7c00564ca13ee9c4?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4793390/david"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429134644, "post_id": 29659832, "comment_id": 47462718, "body": "I haven&#39;t tried anything yet. Im trying to gather a little more info so I know I&#39;m doing the right thing. As I said, I&#39;m not familiar with any scripting outside of applescript. This is what I got from the company I purchased the Linux box through &quot;sclibridge is a command line program on the host used to interact with the Savant control system for advanced customization.&quot;"}, {"owner": {"reputation": 1, "user_id": 4793390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3c3135ed71d61d7c00564ca13ee9c4?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4793390/david"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429134854, "post_id": 29659832, "comment_id": 47462804, "body": "Sorry for the lack of info. I&#39;m a newbie lol. SSH is I believe the protocol they are using. Everything else they described to me about adding scripts to the system was using SSH."}, {"owner": {"reputation": 1, "user_id": 4793390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3c3135ed71d61d7c00564ca13ee9c4?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4793390/david"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429135072, "post_id": 29659832, "comment_id": 47462889, "body": "They also sent this to me."}, {"owner": {"reputation": 1, "user_id": 4793390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3c3135ed71d61d7c00564ca13ee9c4?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4793390/david"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429135104, "post_id": 29659832, "comment_id": 47462907, "body": "Smart Host (Linux OS) Location: /usr/local/bin/sclibridge Custom scripts and workflows need to be aware of this difference. You can use a common UNIX utility called &#39;uname&#39; to determine which platform your script is running on and adjust accordingly."}, {"owner": {"reputation": 1, "user_id": 4793390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3c3135ed71d61d7c00564ca13ee9c4?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4793390/david"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429135109, "post_id": 29659832, "comment_id": 47462911, "body": "#!/usr/bin/perl -w             $osType = <code>uname</code>;             chomp($osType);             $sclibridge = undef;             if($osType eq &quot;Linux OS&quot;)             {                 print &quot;Running on Linux\\n&quot;;                 $sclibridge = &quot;/usr/local/bin/sclibridge&quot;;             }             elsif($osType eq &quot;Mac OS&quot;)             {                 print &quot;Running on Darwin\\n&quot;;                 $sclibridge = &quot;/Users/RPM/Applications/RacePointMedia/sclibridge&quot;;             } else {                 print &quot;Running on Unknown: $sclibridge\\n&quot;;             }"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429142191, "post_id": 29659832, "comment_id": 47465457, "body": "Don&#39;t add that information as a comment, edit your question and add that information, formatting it for readability. Comments are for... comments."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1429133958, "post_id": 29660076, "comment_id": 47462384, "body": "Don&#39;t say &quot;here&quot;. Instead, give people some information about where they&#39;ll land if they click the link. It&#39;s a kinder and gentler way to use hypertext."}], "tags": [], "owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "is_accepted": false, "score": 0, "last_activity_date": 1429133889, "last_edit_date": 1429133889, "creation_date": 1429129086, "answer_id": 29660076, "question_id": 29659832, "link": "https://stackoverflow.com/questions/29659832/send-a-ruby-script-from-a-linux-box-to-a-remote-mac-mini-to-open-and-close-an-ap/29660076#29660076", "title": "Send a Ruby script from a linux box to a remote mac mini to open and close an application", "body": "<p>I found the script below at \"<a href=\"http://porkrind.org/missives/calling-applescript-from-ruby/\" rel=\"nofollow\">Calling Applescript from Ruby</a>.\"</p>\n\n<pre><code>def osascript(script)\n  system 'osascript', *script.split(/\\n/).map { |line| ['-e', line] }.flatten\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2903, "user_id": 2298645, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/cc6f5a47ef78ea35e2d6fcb4441078e1?s=128&d=identicon&r=PG", "display_name": "foo", "link": "https://stackoverflow.com/users/2298645/foo"}, "is_accepted": false, "score": 0, "last_activity_date": 1429181209, "creation_date": 1429181209, "answer_id": 29672398, "question_id": 29659832, "link": "https://stackoverflow.com/questions/29659832/send-a-ruby-script-from-a-linux-box-to-a-remote-mac-mini-to-open-and-close-an-ap/29672398#29672398", "title": "Send a Ruby script from a linux box to a remote mac mini to open and close an application", "body": "<p>OP's question is very poorly phrased. From a bit of web searching:</p>\n\n<p>Savant is a home automation system that's hosted on OS X. Unfortunately, the website is all flash and no substance, so I gave up looking for documentation there. </p>\n\n<p><a href=\"http://manpages.ubuntu.com/manpages/utopic/man1/scli.1.html\" rel=\"nofollow\"><code>scli</code></a> is a command line-based remote management program, used to control networked devices such as routers (and, presumably, a headless Mac Mini running a Savant server) via <a href=\"http://en.wikipedia.org/wiki/Simple_Network_Management_Protocol\" rel=\"nofollow\">SNMP</a>. Presumably <code>sclibridge</code> is a vendor-specific implementation; it's not a common term. </p>\n\n<p>Whether <code>scli[bridge]</code> is used to control Savant directly is unclear, but I'm guessing probably not: it seems a bit low-level and general-purpose for that, so may just be for managing the Mac itself. It may well be that it includes an option for sending shell commands to the remote machine, avoiding the need to hop between <code>scli</code> and <code>ssh</code> all the time, but I didn't bother reading up in detail.</p>\n\n<p>Quite how the OP got from there to wanting to run Ruby scripts I don't know, nor why their example code wants to talk to their Mac via Remote Apple Events, which aren't available on Linux. I suspect it's a mess of confusion largely due to lousy vendor docs. </p>\n\n<p>At any rate, assuming they can use <code>scli</code> or <code>ssh</code> to run remote *nix commands, the simplest thing would be to add a bunch of executable AppleScripts to the Mac which the Linux box can then remote-execute just as it would any other shell command. e.g. Save the following as a plain-text (uncompiled AppleScript) file named <code>kodi-remote</code>:</p>\n\n<pre><code>#!/usr/bin/osascript\n\non run argv \n    -- argv : list of string -- any arguments to `kodi-remote` command\n\n    if argv is {} or item 1 of argv is \"help\" then\n        log \"Usage: kodi-remote [ run | quit | help ]\"\n        return\n    end if\n\n    set cmd to item 1 of argv\n    if cmd is \"run\" then\n        tell application \"Kodi\" to run\n    else if cmd is \"quit\" then\n        tell application \"Kodi\" to quit\n    else\n        error \"Unknown command: \" &amp; cmd number 1\n    end if\nend run\n</code></pre>\n\n<p>Use <code>chmod +x kodi-remote</code> to make it executable and put it somewhere that the remote shell can find it (e.g. <code>/usr/local/bin</code>). </p>\n\n<p>You can test it locally by opening a new window in Terminal.app and running:</p>\n\n<pre><code>kodi-remote run\nkodi-remote quit\n</code></pre>\n\n<p>The same commands should then work in whatever you use to run remote shell commands on the Linux box.</p>\n"}], "owner": {"reputation": 1, "user_id": 4793390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c3c3135ed71d61d7c00564ca13ee9c4?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4793390/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429264618, "creation_date": 1429128286, "last_edit_date": 1429264618, "question_id": 29659832, "link": "https://stackoverflow.com/questions/29659832/send-a-ruby-script-from-a-linux-box-to-a-remote-mac-mini-to-open-and-close-an-ap", "title": "Send a Ruby script from a linux box to a remote mac mini to open and close an application", "body": "<p>I need to send a Ruby script from a Linux box to a remote Mac Mini to open and close an application.</p>\n\n<p>I\u2019m not too familiar with Ruby, mostly AppleScript. Is there a way to embed my AppleScript into the Ruby script? Or is there a way to use just Ruby?</p>\n\n<p>Here is the AppleScript I want to send:</p>\n\n<pre><code>cat  osascript -e 'tell application \"Finder\" of machine \"eppc://USERNAME:PASSWORD@IP\" open file \"Macintosh HD:Applications:Kodi\" end tell'\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1429128722, "creation_date": 1429128722, "answer_id": 29659958, "question_id": 29659563, "link": "https://stackoverflow.com/questions/29659563/cant-get-a-response-using-rubys-nethttp-with-headers/29659958#29659958", "title": "can&#39;t get a response using Ruby&#39;s Net::HTTP with headers", "body": "<p>Here an example how to do that with a POST</p>\n\n<pre><code>require 'net/http'\n\nhttp = Net::HTTP.new('nl3.forgeofempires.com')\npath = '/game/json?h=c29e13c18d3'\ndata = [\n  %{5a6029226f[{\"clientIdentification\":{\"requiredBackendVersion\":\"1.17\",\"appType\":null,\"deviceId\":null,\"registrationId\":null,\"platform\":\"bro\",\"androidDeviceId\":null,\"platformVersion\":\"web\",\"clientVersionNumber\":\"1.17\",\"__class__\":\"ClientIdentification\"}, etc...}]}\n]\n\nheaders = {\n  'Cookie' =&gt; cookie,\n  \"Content-Length\" =&gt; l,\n  'Connection' =&gt; 'keep-alive',\n  \"Origin\" =&gt; \"http://cdn.nl.forgeofempires.com\",\n  'Referer' =&gt; \"http://cdn.nl.forgeofempires.com/swf/Preloader.swf?1389689898\",\n  'Content-Type' =&gt; 'application/x-www-form-urlencoded'\n}\nresp = http.post(path, data, headers)\nFile.write('response.json', resp.body)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 775, "user_id": 4515792, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/605f6133397d0ca6823060b919eebdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff F", "link": "https://stackoverflow.com/users/4515792/jeff-f"}, "edited": false, "score": 0, "creation_date": 1429131934, "post_id": 29660168, "comment_id": 47461247, "body": "Now I get this:<code>&lt;main&gt;&#39;: undefined method </code>request&#39; for #&lt;Net::HTTPUnauthorized 401 Unauthorized readbody=true&gt; (NoMethodError)"}, {"owner": {"reputation": 74, "user_id": 1970952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c22cfafc2bcda6d1ba61b466aa8449df?s=128&d=identicon&r=PG", "display_name": "pepegasca", "link": "https://stackoverflow.com/users/1970952/pepegasca"}, "reply_to_user": {"reputation": 775, "user_id": 4515792, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/605f6133397d0ca6823060b919eebdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff F", "link": "https://stackoverflow.com/users/4515792/jeff-f"}, "edited": false, "score": 0, "creation_date": 1429134193, "post_id": 29660168, "comment_id": 47462503, "body": "that&#39;s because the key in authorization header you are using. Check this: <a href=\"https://www.lendingclub.com/developers/authentication.action\" rel=\"nofollow noreferrer\">lendingclub.com/developers/authentication.action</a>"}], "tags": [], "owner": {"reputation": 74, "user_id": 1970952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c22cfafc2bcda6d1ba61b466aa8449df?s=128&d=identicon&r=PG", "display_name": "pepegasca", "link": "https://stackoverflow.com/users/1970952/pepegasca"}, "is_accepted": false, "score": 0, "last_activity_date": 1429129404, "creation_date": 1429129404, "answer_id": 29660168, "question_id": 29659563, "link": "https://stackoverflow.com/questions/29659563/cant-get-a-response-using-rubys-nethttp-with-headers/29660168#29660168", "title": "can&#39;t get a response using Ruby&#39;s Net::HTTP with headers", "body": "<p>Try with this:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'net/http'\n\nuri = URI.parse('https://api.lendingclub.com/api/investor/v1/loans/listing')\nrequest = Net::HTTP::Get.new uri.request_uri\n\nres = Net::HTTP.start(uri.host, uri.port,\n     :use_ssl =&gt; uri.scheme == 'https') {|http| http.request request}\n\nrequest.initialize_http_header({'Authorization' =&gt;    'exampleQd0ddDKREKgdpeDOKsdfs3434aA='})\nrequest.initialize_http_header({'Accept' =&gt; 'application/json'})\nrequest.initialize_http_header({'Content-Type' =&gt; 'application/json'})\n\nresponse = res.request(request)\n</code></pre>\n\n<p>If you want to write the response into a file</p>\n\n<pre><code>File.write('filename', response)\n</code></pre>\n"}], "owner": {"reputation": 775, "user_id": 4515792, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/605f6133397d0ca6823060b919eebdcf?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff F", "link": "https://stackoverflow.com/users/4515792/jeff-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1414, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429129404, "creation_date": 1429127470, "question_id": 29659563, "link": "https://stackoverflow.com/questions/29659563/cant-get-a-response-using-rubys-nethttp-with-headers", "title": "can&#39;t get a response using Ruby&#39;s Net::HTTP with headers", "body": "<p>Here's my code:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'net/http'\n\nuri = URI.parse('https://api.lendingclub.com/api/investor/v1/loans/listing')\nhttp = Net::HTTP.new(uri.host, uri.port)\nrequest = Net::HTTP::Get.new(uri.request_uri)\nrequest.initialize_http_header({'Authorization' =&gt; 'exampleQd0ddDKREKgdpeDOKsdfs3434aA='})\nrequest.initialize_http_header({'Accept' =&gt; 'application/json'})\nrequest.initialize_http_header({'Content-Type' =&gt; 'application/json'})\n\nresponse = http.request(request)\n</code></pre>\n\n<p>Here's where I end up:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:153:in `read_nonblock': end of file reached (EOFError)\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:153:in `rbuf_fill'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:134:in `readuntil'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/protocol.rb:144:in `readline'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http/response.rb:39:in `read_status_line'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http/response.rb:28:in `read_new'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1406:in `block in transport_request'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1403:in `catch'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1403:in `transport_request'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1376:in `request'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1369:in `block in request'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:852:in `start'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:1367:in `request'\nfrom /Users/jeff/Documents/My Synched Cloud Files/Documents/My Scripts/Python/Development/Lending Club/ruby/LC_get_notes_new.rb:12:in `&lt;main&gt;'\n</code></pre>\n\n<p>Not sure why all the errors are from Frameworks/Ruby.  I am just trying to run this from a file (it's a script), not as any part of a website.  Bonus points if you can then tell me how to save the response to a file once I get this part of the code working.  By the way, I have all this working fine in Python but I am trying to port this to Ruby (which is new for me).  Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "railstutorial.org"], "answers": [{"tags": [], "owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "is_accepted": true, "score": 1, "last_activity_date": 1429127923, "last_edit_date": 1429127923, "creation_date": 1429127618, "answer_id": 29659607, "question_id": 29659475, "link": "https://stackoverflow.com/questions/29659475/undefined-local-variable-or-method-object-for-error-messages/29659607#29659607", "title": "undefined local variable or method `object&#39; for error_messages", "body": "<p>You have to pass an object to the error messages template when you render it. Your call to render the error messages template should now include <code>object: f.object</code>, like so: </p>\n\n<p><code>&lt;%= render \"shared/error_messages\", object: f.object %&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 1563797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33503c1442a0eea88a538637be9e1922?s=128&d=identicon&r=PG", "display_name": "Ajit Singh", "link": "https://stackoverflow.com/users/1563797/ajit-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1429127777, "creation_date": 1429127777, "answer_id": 29659680, "question_id": 29659475, "link": "https://stackoverflow.com/questions/29659475/undefined-local-variable-or-method-object-for-error-messages/29659680#29659680", "title": "undefined local variable or method `object&#39; for error_messages", "body": "<p>Your partial doesnt know anything about \"object\". You have to pass @user object to the partial:</p>\n\n<pre><code>&lt;%= render 'shared/error_messages', locals: {object: @user %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2585, "favorite_count": 0, "accepted_answer_id": 29659607, "answer_count": 2, "score": 0, "last_activity_date": 1429127923, "creation_date": 1429127181, "question_id": 29659475, "link": "https://stackoverflow.com/questions/29659475/undefined-local-variable-or-method-object-for-error-messages", "title": "undefined local variable or method `object&#39; for error_messages", "body": "<p>I'm not sure where this error message is coming from. I'm following Hartl's railtutorial but adapting it to my own app. I'm working on chapter 10 and am adding password resets.</p>\n\n<p>When I get the error: After on the server sending the email with the link to reset the password. I then enter the link in my browser and get the following error message: </p>\n\n<pre><code>undefined local variable or method `object'\nExtracted source (around line #2):\n&lt;% if object.errors.any? %&gt;\n</code></pre>\n\n<p>This refers to the shared error messages file, which hasn't changed and didn't cause problems before.\nI'm not sure what to send you to see what could be the cause.</p>\n\n<p>\\views\\shared_error_messages.html.erb</p>\n\n<pre><code>&lt;% if object.errors.any? %&gt;\n  &lt;div id=\"error_explanation\"&gt;\n    &lt;div class=\"alert alert-danger\"&gt;\n      The form contains &lt;%= pluralize(object.errors.count, \"error\") %&gt;.\n    &lt;/div&gt;\n    &lt;ul&gt;\n    &lt;% object.errors.full_messages.each do |msg| %&gt;\n      &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>views\\passwords_resets\\edit.html.erb (the page that is called upon when following the link):</p>\n\n<pre><code>&lt;% provide(:title, 'Reset password') %&gt;\n&lt;h1 class=\"center\"&gt;Reset password&lt;/h1&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n    &lt;%= form_for(@user, url: password_reset_path(params[:id])) do |f| %&gt;\n      &lt;%= render 'shared/error_messages' %&gt;\n\n      &lt;%= hidden_field_tag :email, @user.email %&gt;\n\n      &lt;%= f.label :password %&gt;\n      &lt;%= f.password_field :password, class: 'form-control' %&gt;\n\n      &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n      &lt;%= f.password_field :password_confirmation, class: 'form-control' %&gt;\n\n      &lt;%= f.submit \"Update password\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>app\\controllers\\password_resets_controller.rb:</p>\n\n<pre><code>class PasswordResetsController &lt; ApplicationController\n  before_action :get_user,   only: [:edit, :update]\n  before_action :valid_user, only: [:edit, :update]\n\n  def new\n  end\n\n  def create\n    @user = User.find_by(email: params[:password_reset][:email].downcase)\n    if @user\n      @user.create_reset_digest\n      @user.send_password_reset_email\n      flash[:info] = \"An email is sent to you with password reset instructions\"\n      redirect_to root_url\n    else\n      flash.now[:danger] = \"Email address not found\"\n      render 'new'\n    end\n  end\n\n  def edit\n  end\n\n  def update\n    if password_blank?\n      flash.now[:danger] = \"Password can't be blank\"\n      render 'edit'\n    elsif @user.update_attributes(user_params)\n      log_in @user\n      flash[:success] = \"Password has been reset.\"\n      redirect_to @user\n    else\n      render 'edit'\n    end\n  end\n\n  private\n\n    def user_params\n      params.require(:user).permit(:password, :password_confirmation)\n    end\n\n    # Returns true if password is blank.\n    def password_blank?\n      params[:user][:password].blank?\n    end\n\n    # Before filters\n\n    def get_user\n      @user = User.find_by(email: params[:email])\n    end\n\n    # Confirms a valid user.\n    def valid_user\n      unless (@user &amp;&amp; @user.activated? &amp;&amp; @user.authenticated?(:reset, params[:id]))\n        redirect_to root_url\n      end\n\n    # Checks expiration of reset token.\n    def check_expiration\n      if @user.password_reset_expired?\n        flash[:danger] = \"Password reset has expired.\"\n        redirect_to new_password_reset_url\n      end\n    end\nend\n</code></pre>\n\n<p><strong>Update</strong>: While writing this question I found out that when I remove the line <code>&lt;%= render 'shared/error_messages' %&gt;</code> from \\views\\shared_error_messages.html.erb I no longer have the problem and the new view shows correctly. It then works correctly in that I can change the password. However, the error messages then don't show up anymore (e.g., when password and password confirmation don't match). What to do?</p>\n"}, {"tags": ["ruby", "json", "api", "parsing", "twitter"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 1, "creation_date": 1429127717, "post_id": 29659400, "comment_id": 47458825, "body": "Code looks fine. Could you tell that what&#39;s on line number 61?"}, {"owner": {"reputation": 520, "user_id": 3788832, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c6daa6f68ae949153497e48b649e6e65?s=128&d=identicon&r=PG&f=1", "display_name": "nikunjM", "link": "https://stackoverflow.com/users/3788832/nikunjm"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1429128127, "post_id": 29659400, "comment_id": 47459063, "body": "hello @Surya ,below is code to print json                                                                                               json[&#39;statuses&#39;][&#39;user&#39;].each do |alerts|   # do whatever you want with these... line 61 &gt;&gt;print json.first[&#39;statuses&#39;][&#39;user&#39;][&#39;screen_name&#39;]; end"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429134334, "post_id": 29659400, "comment_id": 47462577, "body": "Welcome to Stack Overflow. Instead of giving us the entire JSON string, reduce it to the <i>bare</i> minimum necessary to demonstrate the problem you&#39;re seeing. Anything more and you&#39;re wasting space and time as we wade through a lot of unnecessary information."}, {"owner": {"reputation": 520, "user_id": 3788832, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c6daa6f68ae949153497e48b649e6e65?s=128&d=identicon&r=PG&f=1", "display_name": "nikunjM", "link": "https://stackoverflow.com/users/3788832/nikunjm"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429157558, "post_id": 29659400, "comment_id": 47469553, "body": "@theTinMan sorry, i editied my code and i am able to get correct solution. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 2423, "user_id": 4143605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51efa7bcbb6ea62cb6d024d1b8f2d56d?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/4143605/sid"}, "is_accepted": true, "score": 1, "last_activity_date": 1429134256, "last_edit_date": 1429134256, "creation_date": 1429128542, "answer_id": 29659913, "question_id": 29659400, "link": "https://stackoverflow.com/questions/29659400/how-do-i-parse-a-json-string-and-print-a-particular-element/29659913#29659913", "title": "How do I parse a JSON string and print a particular element?", "body": "<p>You shouldn't be using <code>.first</code> as you are already getting the hash you need. Using <code>.first</code> in this case is getting you the first key-value pair from that hash in the form of an array. </p>\n\n<p>The reason that TypeError is happening is because it thinks you are trying to call an index of that array using the string <code>'user'</code> instead of an integer.</p>\n\n<p>Just use:</p>\n\n<pre><code>print json['user']['screen_name'];\n</code></pre>\n\n<p>on line 61 instead of</p>\n\n<pre><code>print json.first['user']['screen_name'];\n</code></pre>\n"}], "owner": {"reputation": 520, "user_id": 3788832, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c6daa6f68ae949153497e48b649e6e65?s=128&d=identicon&r=PG&f=1", "display_name": "nikunjM", "link": "https://stackoverflow.com/users/3788832/nikunjm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "accepted_answer_id": 29659913, "answer_count": 1, "score": 0, "last_activity_date": 1429157496, "creation_date": 1429126984, "last_edit_date": 1429157496, "question_id": 29659400, "link": "https://stackoverflow.com/questions/29659400/how-do-i-parse-a-json-string-and-print-a-particular-element", "title": "How do I parse a JSON string and print a particular element?", "body": "<p>I tried get the value from some JSON using Ruby but got:</p>\n\n<pre><code>[]': no implicit conversion of String into Integer (TypeError)\n    from jsonpars.rb:61:in `&lt;main&gt;'\n</code></pre>\n\n<p>This is the code I am using for parsing and printing a particular element.\nCan you tell me how can I print specific values like <code>screen_name</code> or <code>url</code> or <code>text</code>?</p>\n\n<pre><code>json = JSON.parse(response.body)\n\n#json['user'].each do |alerts|\n  # do whatever you want with these...\nprint json.first['user']['screen_name'];\n#end\n</code></pre>\n\n<p>This is the JSON:</p>\n\n<pre><code>[\n  {\n    \"metadata\"=&gt;{\n      \"iso_language_code\"=&gt;\"en\",\n      \"result_type\"=&gt;\"recent\"\n    },\n    \"created_at\"=&gt;\"Wed Apr 15 19:02:27 +0000 2015\",\n    \"id\"=&gt;588417116358848512,\n    \"id_str\"=&gt;\"588417116358848512\",\n    \"text\"=&gt;\"@BTS_twt i love India.arie too. My favourite is 'This Too Shall Pass' \ud83d\ude0a\",\n    \"source\"=&gt;\"&lt;a href=\\\"http://twitter.com/download/iphone\\\" rel=\\\"nofollow\\\"&gt;Twitter for iPhone&lt;/a&gt;\",\n    \"truncated\"=&gt;false,\n    \"in_reply_to_status_id\"=&gt;588412513093431296,\n    \"in_reply_to_status_id_str\"=&gt;\"588412513093431296\",\n    \"in_reply_to_user_id\"=&gt;335141638,\n   }\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays"], "comments": [{"owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1429127260, "post_id": 29659296, "comment_id": 47458546, "body": "What do you mean by saying it doesn&#39;t work?  Please give some info about that, does it fail or what?"}, {"owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1429127572, "post_id": 29659296, "comment_id": 47458723, "body": "it doesn&#39;t work it doesn&#39;t bring an array of ids to be searched later in the library, brings some super random number like 15 every time you search...."}, {"owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "reply_to_user": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "edited": false, "score": 0, "creation_date": 1429128841, "post_id": 29659296, "comment_id": 47459456, "body": "i added .flatten.uniq and now it searches for all the items in the library even if i search one word.... must be something wrong with the logic i think"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429134789, "post_id": 29660147, "comment_id": 47462782, "body": "Welcome. Please don&#39;t use exclamation marks (&quot;!&quot;) to terminate all your sentences. That&#39;s equivalent to yelling, running around and banging pans together. Also, please take the time to use proper capitalization for &quot;I&quot;. Stack Overflow aims to be a reference book on programming problems, so consider your question and entries to be written for a reference book."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429134925, "post_id": 29660147, "comment_id": 47462840, "body": "Instead of using <code>Array.new</code>, it&#39;s idiomatic to simply use <code>[]</code> unless we need some of the special behaviors of <code>Array.new</code>."}, {"owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1429193651, "post_id": 29660147, "comment_id": 47492260, "body": "ok, i apologize i&#39;m new to Stack Overflow.... wont happen again, the yelling thing i mean...."}], "tags": [], "owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "is_accepted": true, "score": 2, "last_activity_date": 1429134864, "last_edit_date": 1429134864, "creation_date": 1429129346, "answer_id": 29660147, "question_id": 29659296, "link": "https://stackoverflow.com/questions/29659296/search-function-looking-for-multiple-words/29660147#29660147", "title": "Search function looking for multiple words", "body": "<p>I was calling an <code>array = Array.new</code> when I should've been initializing <code>ids = Array.new</code>:</p>\n\n<pre><code>ids = Array.new\n       key_words = search.to_s.split(\" \")\n       key_words.count.times do |i|\n           ids[i] = PalabrasClave.where(\"palabra like ?\", \"%#{key_words[i]}%\").pluck(:daw_mate_acad_id)\n       end\n       where(\"id in (?)\", ids.flatten.uniq)\n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 4765956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e155555b252bec6ff16ee04b42bf37fa?s=128&d=identicon&r=PG&f=1", "display_name": "fr3d0", "link": "https://stackoverflow.com/users/4765956/fr3d0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 29660147, "answer_count": 1, "score": 2, "last_activity_date": 1429134864, "creation_date": 1429126648, "last_edit_date": 1429134411, "question_id": 29659296, "link": "https://stackoverflow.com/questions/29659296/search-function-looking-for-multiple-words", "title": "Search function looking for multiple words", "body": "<p>I have a problem with a search form that searches for multiple words.</p>\n\n<p>I have this function in my model. First, I search the <code>KeyWords</code> table for the foreign IDs that I need to search the library table.</p>\n\n<p>This works OK when I search for one word on my <code>KeyWords</code> table but I don't know how to search for multiple words given that each of those words will return a group of ids. I don't know how to collapse them together to search in the library.</p>\n\n<p>This is my search function in my library model:</p>\n\n<pre><code>def self.search(search)\n    if search\n        where(\"id in (?)\", KeyWords.where(\"word like ?\", \"%#{search}%\").pluck(:library_id))\n    else\n        all\n    end\nend\n</code></pre>\n\n<p>What I tried to do was something like spliting the search param, and, for each word in there, search the <code>key_words</code>:</p>\n\n<pre><code>#       array = Array.new\n#       key_words = search.to_s.split(\" \")\n#       key_words.count.times do |i|\n#           ids[i] = PalabrasClave.where(\"palabra like ?\", \"%#{key_words[i]}%\").pluck(:daw_mate_acad_id)\n#       end\n#       where(\"id in (?)\", ids.flatten.uniq)\n</code></pre>\n\n<p>but that does NOT work. I thought the search gave me an array of IDs that I could later collapse together with a <code>join</code> method, but sadly that does not work. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 2249001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bw0ht.png?s=128&g=1", "display_name": "aspencer8111", "link": "https://stackoverflow.com/users/2249001/aspencer8111"}, "is_accepted": false, "score": 3, "last_activity_date": 1429126590, "creation_date": 1429126590, "answer_id": 29659278, "question_id": 29659181, "link": "https://stackoverflow.com/questions/29659181/how-to-change-a-sentence-into-a-model-name-in-rails/29659278#29659278", "title": "How to change a sentence into a model name in rails", "body": "<p><code>modelize = \"This is a string\".titleize.delete(' ')</code></p>\n"}, {"tags": [], "owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "is_accepted": false, "score": 2, "last_activity_date": 1429126592, "creation_date": 1429126592, "answer_id": 29659282, "question_id": 29659181, "link": "https://stackoverflow.com/questions/29659181/how-to-change-a-sentence-into-a-model-name-in-rails/29659282#29659282", "title": "How to change a sentence into a model name in rails", "body": "<p>One way to do it:</p>\n\n<pre><code>&gt; s = \"product on sale\"\n&gt;  s.titleize.gsub(' ', '')\n =&gt; \"ProductOnSale\" \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "is_accepted": false, "score": 5, "last_activity_date": 1429166561, "last_edit_date": 1429166561, "creation_date": 1429126602, "answer_id": 29659285, "question_id": 29659181, "link": "https://stackoverflow.com/questions/29659181/how-to-change-a-sentence-into-a-model-name-in-rails/29659285#29659285", "title": "How to change a sentence into a model name in rails", "body": "<p>In case you have a model/class with this name, you can use <a href=\"http://apidock.com/rails/String/constantize\" rel=\"nofollow\">constantize</a> to convert it to class name, just by doing:</p>\n\n<pre><code>\"product on sale\".constantize\n</code></pre>\n\n<p>otherwise, for general <code>String</code>, you can do:</p>\n\n<pre><code>\"product on sale\".split(' ').collect(&amp;:capitalize).join\n</code></pre>\n\n<p>In Rails env, you can do it in following way as well:</p>\n\n<pre><code>\"product on sale\".camelize.delete(' ')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2423, "user_id": 4143605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51efa7bcbb6ea62cb6d024d1b8f2d56d?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/4143605/sid"}, "is_accepted": false, "score": 0, "last_activity_date": 1429133470, "creation_date": 1429133470, "answer_id": 29661302, "question_id": 29659181, "link": "https://stackoverflow.com/questions/29659181/how-to-change-a-sentence-into-a-model-name-in-rails/29661302#29661302", "title": "How to change a sentence into a model name in rails", "body": "<p>Another way to do this:</p>\n\n<pre><code>&gt; string = \"product on sale\"\n&gt; string.gsub(' ','_').classify\n  =&gt; \"ProductOnSale\"\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 3442206, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/9659217554071ce1ac213edef5f95ac2?s=128&d=identicon&r=PG&f=1", "display_name": "user3442206", "link": "https://stackoverflow.com/users/3442206/user3442206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1429166561, "creation_date": 1429126290, "question_id": 29659181, "link": "https://stackoverflow.com/questions/29659181/how-to-change-a-sentence-into-a-model-name-in-rails", "title": "How to change a sentence into a model name in rails", "body": "<p>I want to transform the string <code>product on sale</code> into <code>ProductOnSale</code> as a model name.</p>\n\n<p>How to achieve that ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "class", "methods"], "comments": [{"owner": {"reputation": 543, "user_id": 4428430, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/--mtskBlCsJw/AAAAAAAAAAI/AAAAAAAAAC0/wB-zNnzOybg/photo.jpg?sz=128", "display_name": "dec", "link": "https://stackoverflow.com/users/4428430/dec"}, "edited": false, "score": 0, "creation_date": 1429125747, "post_id": 29658887, "comment_id": 47457613, "body": "second_method can not be called inside a class method, cause it lacks an instance. Methods of a class always needs an instance of the class, otherwise you can not call it.  Read also this <a href=\"http://www.railstips.org/blog/archives/2009/05/11/class-and-instance-methods-in-ruby/\" rel=\"nofollow noreferrer\">railstips.org/blog/archives/2009/05/11/&hellip;</a>"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1429131784, "post_id": 29658887, "comment_id": 47461157, "body": "wouldn&#39;t do the monkeypatching of class Array, that&#39;s gonna give errors when called on arrays that contain non-strings, also it is a functionality needed in your class, not in array"}, {"owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "reply_to_user": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1429132011, "post_id": 29658887, "comment_id": 47461288, "body": "@peter so I will follow your advices below then, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "is_accepted": false, "score": 0, "last_activity_date": 1429125742, "creation_date": 1429125742, "answer_id": 29658993, "question_id": 29658887, "link": "https://stackoverflow.com/questions/29658887/ruby-class-vs-instance-variable-methods/29658993#29658993", "title": "Ruby. Class vs instance variable methods", "body": "<p>You've defined <code>second_method</code> as an instance method on <code>MyClass</code>, which means it can only be called on an instance of <code>MyClass</code> - not on the class itself (that's why the second version works, where you define both methods as class methods using the <code>self.</code> operator.</p>\n\n<p>To get your existing code to work, you could call <code>MyClass.new.second_method(variable)</code> inside <code>self.create_array</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "is_accepted": false, "score": 0, "last_activity_date": 1429125839, "creation_date": 1429125839, "answer_id": 29659028, "question_id": 29658887, "link": "https://stackoverflow.com/questions/29658887/ruby-class-vs-instance-variable-methods/29659028#29659028", "title": "Ruby. Class vs instance variable methods", "body": "<p>In Ruby only class methods can be called from an class method. when you are calling <code>create_array</code> in first snippet, you can not call a instance methds from inside it.</p>\n"}, {"comments": [{"owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "edited": false, "score": 0, "creation_date": 1429130770, "post_id": 29659722, "comment_id": 47460562, "body": "It looks like something I want to achieve. But I&#39;m not sure if I can initialize my array. Need to test it on my code. Thank you for a hint."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "edited": false, "score": 0, "creation_date": 1429131600, "post_id": 29659722, "comment_id": 47461051, "body": "you can give the array as parameter when instantiating your class, added that in the answer, also forgot to store the result of second_method to @variable"}, {"owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "edited": false, "score": 0, "creation_date": 1429131856, "post_id": 29659722, "comment_id": 47461205, "body": "My code is a bit more complex.. I need a while to test it. In meantime it would be great if you could take a look at my question in edit section =)"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1429131363, "last_edit_date": 1429131363, "creation_date": 1429127902, "answer_id": 29659722, "question_id": 29658887, "link": "https://stackoverflow.com/questions/29658887/ruby-class-vs-instance-variable-methods/29659722#29659722", "title": "Ruby. Class vs instance variable methods", "body": "<p>Like the others pointed out, class methods can only be called directly on the class itself.</p>\n\n<p>Is it this you want to achieve ?</p>\n\n<pre><code>class MyClass\n  attr_accessor :variable\n\n  def initialize\n    @variable = ['one', 'two', 'three']\n    second_method @variable\n  end\n\n  def second_method var\n    @variable = var.map {|v| v.upcase}\n  end\nend\n\n\nMyClass.new\n\n#&lt;MyClass:0x292fda0 @variable=[\"ONE\", \"TWO\", \"THREE\"]&gt;\n</code></pre>\n\n<p>Or you can give the array as a parameters when instantiating the class like this</p>\n\n<pre><code>class MyClass\n  attr_accessor :variable\n\n  def initialize variable\n    @variable = variable\n    second_method @variable\n  end\n\n  def second_method var\n    @variable = var.map {|v| v.upcase}\n  end\nend\n\n\nMyClass.new ['one', 'two', 'three']\n\n#&lt;MyClass:0x292fda0 @variable=[\"ONE\", \"TWO\", \"THREE\"]&gt;\n</code></pre>\n"}], "owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1456532945, "creation_date": 1429125383, "last_edit_date": 1456532945, "question_id": 29658887, "link": "https://stackoverflow.com/questions/29658887/ruby-class-vs-instance-variable-methods", "title": "Ruby. Class vs instance variable methods", "body": "<p>I have a class: </p>\n\n<pre><code>class MyClass\n  def self.create_array\n    variable = ['one', 'two', 'three']\n\n    # I had:\n    # variable.each {|v| v.upcase}\n    # but want to do:\n\n    second_method(variable)\n    # or like this:\n    variable.second_method\n    # of course without parameter 'var' in second option\n  end\n\n  def second_method (var)\n    var.map {|v| v.upcase}\n  end\nend\n\n\nputs MyClass.create_array\n# of course:\n=&gt; undefined method `second_method' for MyClass:Class (NoMethodError)\n</code></pre>\n\n<p>So I am just wondering how to incorporate second_method into first one.</p>\n\n<p>It only worked when I did:</p>\n\n<pre><code>class MyClass\n  def self.create_array\n    variable = ['one', 'two', 'three']\n\n    MyClass.second_method(variable)\n  end\n\n  def self.second_method (var)\n    var.map {|v| v.upcase}\n  end\nend\n\n\nputs MyClass.create_array\n</code></pre>\n\n<p>Why it works only when I call it on class? I would like to just call it on my variable. Please, enlighten me!</p>\n\n<h2>Edit</h2>\n\n<p>Would it make any sense to create method in:</p>\n\n<pre><code>class Array\n  def second_method\n    #content\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "file-io"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429135120, "post_id": 29658689, "comment_id": 47462914, "body": "Because of wildcards this is more easily done at the command-line than it is in Ruby. Why not stick with the easy way?"}], "answers": [{"tags": [], "owner": {"reputation": 2607, "user_id": 4470392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvLjT.jpg?s=128&g=1", "display_name": "Maxim Pontyushenko", "link": "https://stackoverflow.com/users/4470392/maxim-pontyushenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1429129599, "last_edit_date": 1429129599, "creation_date": 1429126180, "answer_id": 29659137, "question_id": 29658689, "link": "https://stackoverflow.com/questions/29658689/how-to-add-the-content-of-two-files-with-ruby/29659137#29659137", "title": "How to add the content of two files with Ruby", "body": "<p>Run this from your project folder or change \"file.csv\" etc. with full paths.</p>\n\n<pre><code> File.open(\"file.csv\", \"w\") do |f|\n   f.puts(File.read(\"File1.csv\"), File.read(\"File2.csv\"))\n end\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4793481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10794e9474a8eeeea5d0e853d3ced00b?s=128&d=identicon&r=PG&f=1", "display_name": "hvegar", "link": "https://stackoverflow.com/users/4793481/hvegar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1429134971, "creation_date": 1429124735, "last_edit_date": 1429134971, "question_id": 29658689, "link": "https://stackoverflow.com/questions/29658689/how-to-add-the-content-of-two-files-with-ruby", "title": "How to add the content of two files with Ruby", "body": "<p>Hello there I have two files in CSV format before processing I need to have the content of the two in a single file. \nI do this in ms-dos like this</p>\n\n<pre><code>d:\\project\\&gt;copy file?.csv file3\n\nFile1.csv\n\nFile2.csv\n\n1 archivo(s) copiado(s).\n</code></pre>\n\n<p>then </p>\n\n<pre><code>rename file3 file.csv\n</code></pre>\n\n<p>but I need to do this in Ruby, the files have only text in tabulated format.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 4788295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/896e46255cd8b651450a1446a393cffc?s=128&d=identicon&r=PG", "display_name": "amongmany", "link": "https://stackoverflow.com/users/4788295/amongmany"}, "edited": false, "score": 0, "creation_date": 1429125434, "post_id": 29658809, "comment_id": 47457402, "body": "Perhaps I&#39;m asking the wrong question then... I only included <code>puts edit.inspect</code> so that I could see what the result was because the transformation (the commented code) wasn&#39;t acting as I expected...  I expected the code above to result in an output of  0010 0111 0010 0000  Instead I get something very different."}, {"owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "reply_to_user": {"reputation": 87, "user_id": 4788295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/896e46255cd8b651450a1446a393cffc?s=128&d=identicon&r=PG", "display_name": "amongmany", "link": "https://stackoverflow.com/users/4788295/amongmany"}, "edited": false, "score": 0, "creation_date": 1429126514, "post_id": 29658809, "comment_id": 47458114, "body": "Try this: move all of the commented code outside of both loops (so you&#39;re not adding new 1s while you&#39;re searching for them), then flip the <code>x</code> and <code>y</code> variables in the <code>edit.each</code> loop (since the y variable indexes which array the x variable index is in, the former is first). Edited the answer to show what I mean."}, {"owner": {"reputation": 87, "user_id": 4788295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/896e46255cd8b651450a1446a393cffc?s=128&d=identicon&r=PG", "display_name": "amongmany", "link": "https://stackoverflow.com/users/4788295/amongmany"}, "edited": false, "score": 0, "creation_date": 1429126932, "post_id": 29658809, "comment_id": 47458380, "body": "Thanks Rob... That points out a mistake I had made earlier (by flipping the x &amp; y in the each_with_index loops above). I&#39;m still getting four arrays output where I expected one..."}, {"owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "reply_to_user": {"reputation": 87, "user_id": 4788295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/896e46255cd8b651450a1446a393cffc?s=128&d=identicon&r=PG", "display_name": "amongmany", "link": "https://stackoverflow.com/users/4788295/amongmany"}, "edited": false, "score": 0, "creation_date": 1429127159, "post_id": 29658809, "comment_id": 47458492, "body": "if you want to consolidate the 4 arrays into 1 array of 16 values, you could add a call to <code>.flatten!</code> after your <code>.each</code>/<code>.join</code> block"}, {"owner": {"reputation": 87, "user_id": 4788295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/896e46255cd8b651450a1446a393cffc?s=128&d=identicon&r=PG", "display_name": "amongmany", "link": "https://stackoverflow.com/users/4788295/amongmany"}, "edited": false, "score": 0, "creation_date": 1429127455, "post_id": 29658809, "comment_id": 47458635, "body": "Got it. Thanks so much for bearing with a beginner! I had a loop in the wrong place, so it was looping back through the methods too many times. Was looking for an output of <code>0010 0111 0010 0000</code>"}], "tags": [], "owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "is_accepted": true, "score": 1, "last_activity_date": 1429126933, "last_edit_date": 1429126933, "creation_date": 1429125128, "answer_id": 29658809, "question_id": 29658645, "link": "https://stackoverflow.com/questions/29658645/unexpected-result-determining-coordinates-on-a-nested-grid-array-in-rails/29658809#29658809", "title": "Unexpected result determining coordinates on a nested (grid) array in rails", "body": "<p>You're not clearing the edit variable before each run of the outer loop. So each time you print it, it's still storing the initial coordinate where you found a 1.</p>\n\n<p>You'll get the expected result if you insert <code>edit = []</code> after <code>puts edit.inspect</code>.</p>\n\n<p>This does what you want:</p>\n\n<pre><code>def output_image\n    x_size = @image.first.length\n    y_size = @image.length\n    edit = []\n    @image.each_with_index do | row , y |\n        row.each_with_index do |cell, x |\n            edit &lt;&lt; [x,y] if cell == 1\n        end\n    end\n    edit.each do |pair|   \n        y = pair.first\n        x = pair.last\n        @image[x-1][y] = 1 if x &gt; 0 \n        @image[x+1][y] = 1 if x &lt; (x_size - 1)\n        @image[x][y-1] = 1 if y &gt; 0\n        @image[x][y+1] = 1 if y &lt; (y_size - 1)\n    end\n    @image.each { |x| puts x.join }\n    puts edit.inspect\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 4788295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/896e46255cd8b651450a1446a393cffc?s=128&d=identicon&r=PG", "display_name": "amongmany", "link": "https://stackoverflow.com/users/4788295/amongmany"}, "is_accepted": false, "score": 0, "last_activity_date": 1429127523, "creation_date": 1429127523, "answer_id": 29659576, "question_id": 29658645, "link": "https://stackoverflow.com/questions/29658645/unexpected-result-determining-coordinates-on-a-nested-grid-array-in-rails/29659576#29659576", "title": "Unexpected result determining coordinates on a nested (grid) array in rails", "body": "<p>Thanks again to Rob for the help. This was the solution I was looking for:</p>\n\n<pre><code>def output_image\n        x_size = @image.first.length\n        y_size = @image.length\n\n\n        edit = []\n        @image.each_with_index do | row , x |\n            row.each_with_index do |cell, y |\n                edit &lt;&lt; [x,y] if cell == 1\n            end\n        end\n        edit.each do |x,y|  \n                @image[x-1][y] = 1 if x &gt; 0 \n                @image[x+1][y] = 1 if x &lt; (x_size - 1)\n                @image[x][y-1] = 1 if y &gt; 0\n                @image[x][y+1] = 1 if y &lt; (y_size - 1)\n        end\n\n        @image.each { |x| puts x.join }\nend\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 4788295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/896e46255cd8b651450a1446a393cffc?s=128&d=identicon&r=PG", "display_name": "amongmany", "link": "https://stackoverflow.com/users/4788295/amongmany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 29658809, "answer_count": 2, "score": 0, "last_activity_date": 1429127523, "creation_date": 1429124579, "question_id": 29658645, "link": "https://stackoverflow.com/questions/29658645/unexpected-result-determining-coordinates-on-a-nested-grid-array-in-rails", "title": "Unexpected result determining coordinates on a nested (grid) array in rails", "body": "<p>I have a nested array representing an \"image\" (a map of 0's and 1's). My end goal is to transform the 4 numbers surrounding any \"1\" to also be 1's. </p>\n\n<p>The approach I've taken is to map the x,y coordinates of any existing 1 in the initial grid and add those coordinates to a new array so I can later use them to perform the transformation on the original. </p>\n\n<p>To simplify, I'm trying to get this to work, initially, on an array that includes only one \"1\" \u2014 however, the result is unexpected in that it's storing multiple sets of x,y coordinates for the one \"1\" in the array, instead of a single set. I'm sure the solution is simple, but as a beginner, I'm stumped as to why this is happening. </p>\n\n<p>(Please ignore the commented code; it's the beginnings of the transformation, but I'll bring it back once I solve this issue.)</p>\n\n<pre><code>class Image\ndef initialize(image)\n    @image = image\nend\n\ndef output_image\n    x_size = @image.first.length\n    y_size = @image.length\n\n\n    edit = []\n    @image.each_with_index do | row , y |\n        row.each_with_index do |cell, x |\n            edit &lt;&lt; [x,y] if cell == 1\n        end\n        # edit.each do |pair|   \n        #   x = pair.first\n        #   y = pair.last\n        #       @image[x-1][y] = 1 if x &gt; 0 \n        #       @image[x+1][y] = 1 if x &lt; (x_size - 1)\n        #       @image[x][y-1] = 1 if y &gt; 0\n        #       @image[x][y+1] = 1 if y &lt; (y_size - 1)\n        # end\n        puts edit.inspect\n        #puts @image.inspect\n        # @image.each { |x| puts x.join }\n    end\nend\nend\n\nimage = Image.new([\n        [0, 0, 0, 0],\n        [0, 0, 1, 0],\n        [0, 0, 0, 0],\n        [0, 0, 0, 0]\n        ])\nimage.output_image\n</code></pre>\n\n<p>This results in:</p>\n\n<pre><code>[]\n[[2, 1]]\n[[2, 1]]\n[[2, 1]]\n</code></pre>\n\n<p>Rather than the expected:</p>\n\n<pre><code>[]\n[[2,1]]\n[]\n[]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1429124161, "post_id": 29658410, "comment_id": 47456625, "body": "<code>result.to_s.gsub!</code>?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1429124524, "post_id": 29658410, "comment_id": 47456844, "body": "It&#39;s not clear precisely what data you&#39;re operating on, you have an array of text nodes, not a string. It doesn&#39;t &quot;get added&quot;, it&#39;s what&#39;s in the html. Which is funky anyway since there&#39;s a meta tag in the body. You almost never want to work with the string representation of a parsed document anyway, it&#39;s not what the document is, it&#39;s the string output of each Nokogiri element node."}, {"owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1429124947, "post_id": 29658410, "comment_id": 47457088, "body": "@orde - result.to_s.gsub!(/\\n/, &#39;&#39;) is still giving me the same output."}, {"owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1429125074, "post_id": 29658410, "comment_id": 47457177, "body": "@DaveNewton - Thats what I am getting after I do Nokogiri::HTML(existing_html). The nodes comes back in an array. Am I not doing the parse right way? Sorry I am learning Nokogiri and this is just my sample project to learn."}, {"owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "edited": false, "score": 0, "creation_date": 1429127985, "post_id": 29658410, "comment_id": 47458982, "body": "Okay I realized what is going wrong here. The problem is not with Nokogiri, but the way I am collecting data inside &#39;existing_html&#39; variable from the file which has original html. I was doing existing_html = (html_file.readlines()) and this was storing the data within an array. Doing Nokogiri::HTML(open(existing_file)) doesn&#39;t add any \\n and extra spaces."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1429143940, "post_id": 29658410, "comment_id": 47465963, "body": "And that&#39;s exactly why you need to include the minimal code necessary to demonstrate the problem you&#39;re seeing. We have NO idea what you were doing, and can&#39;t help you unless you show us."}], "owner": {"reputation": 5412, "user_id": 697033, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b9a174a1c104593989507de16c8bb769?s=128&d=identicon&r=PG", "display_name": "tech_human", "link": "https://stackoverflow.com/users/697033/tech-human"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1431636710, "answer_count": 0, "score": 0, "last_activity_date": 1430437131, "creation_date": 1429123744, "last_edit_date": 1430437131, "question_id": 29658410, "link": "https://stackoverflow.com/questions/29658410/remove-extra-spaces-and-n-from-nokogiri-result", "closed_reason": "Duplicate", "title": "Remove extra spaces and \\n from Nokogiri result", "body": "<p>Parsing my existing HTML using <code>Nokogiri::HTML(existing_html)</code> and after performing some operations on it, Nokogiri returns this output:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n   &lt;body&gt;\n      &lt;p&gt;[\"\\n\", \"\\n\", \"   &lt;/p&gt;\n      \\n\", \"      \n      &lt;meta http-equiv='\\\"Content-Type\\\"' content='\\\"text/html;' charset='UTF-8\\\"'&gt;\n      \\n\", \"      \n      &lt;title&gt;My Html&lt;/title&gt;\n      \\n\", \"   \\n\", \"   \\n\", \"      \n      &lt;div valign='\\\"top\\\"'&gt;\n      \\n\", \"         \n      &lt;div class='\\\"myclass\\\"'&gt;\n         \\n\", \"            \n         &lt;div class='\\\"content\\\"' style='\\\"white-space:' pre-wrap&gt;\\n\", \"               &lt;img src=\"%5C%22MyImageSource%5C%22\"&gt;\\n\", \"           &lt;/div&gt;\n         \\n\", \"      \n      &lt;/div&gt;\n      \\n\", \"   \\n\", \"\"]\n   &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I wish to remove the extra space and '\\n' characters. So suppose this is stored in the <code>result</code> variable, and I tried <code>result.to_s.gsub(/\\n/, '')</code> and <code>result.to_s.gsub(/\\n/, '').strip</code>, but am getting the same stuff back.</p>\n\n<p>How do I remove the extra space and \"\\n\"? Also I am curious to learn why it gets added? </p>\n\n<p>Let me know if any code is needed to show how am I getting the result.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 806, "user_id": 2057928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0d54eb9311d61feb3e8ba4b597ea71?s=128&d=identicon&r=PG", "display_name": "RPinel", "link": "https://stackoverflow.com/users/2057928/rpinel"}, "edited": false, "score": 0, "creation_date": 1429128012, "post_id": 29658246, "comment_id": 47459001, "body": "What would you like to achieve? Could you add a sample with how you would reuse that part?"}, {"owner": {"reputation": 1504, "user_id": 1208166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HWLcG.jpg?s=128&g=1", "display_name": "creativereason", "link": "https://stackoverflow.com/users/1208166/creativereason"}, "edited": false, "score": 0, "creation_date": 1429304904, "post_id": 29658246, "comment_id": 47554382, "body": "did my example below help at all? Just curious if it fits what you are looking for."}], "answers": [{"comments": [{"owner": {"reputation": 24422, "user_id": 190623, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ded2adc034647d0e934806583137ecdd?s=128&d=identicon&r=PG", "display_name": "Gandalf StormCrow", "link": "https://stackoverflow.com/users/190623/gandalf-stormcrow"}, "edited": false, "score": 0, "creation_date": 1429125138, "post_id": 29658560, "comment_id": 47457215, "body": "Thanks for the response, but this is not what I had in mind. There has to be something that turns .joins into a join statement and .where to where statement, I&#39;d rather not do this like you suggested, simply because this is not flexible enough solution."}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "reply_to_user": {"reputation": 24422, "user_id": 190623, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ded2adc034647d0e934806583137ecdd?s=128&d=identicon&r=PG", "display_name": "Gandalf StormCrow", "link": "https://stackoverflow.com/users/190623/gandalf-stormcrow"}, "edited": false, "score": 0, "creation_date": 1429125404, "post_id": 29658560, "comment_id": 47457378, "body": "OK no worries.  Good luck!"}], "tags": [], "owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "is_accepted": false, "score": 0, "last_activity_date": 1429126363, "last_edit_date": 1429126363, "creation_date": 1429124264, "answer_id": 29658560, "question_id": 29658246, "link": "https://stackoverflow.com/questions/29658246/rails-active-record-query-to-string/29658560#29658560", "title": "Rails active record query to string", "body": "<pre><code>foo = MyModel.joins(:related_model).where('related_model.some_column = ?', 'somevalue').to_sql`\n\ncore_sql = foo.sub(/^SELECT * FROM MY_MODEL /,'')`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1504, "user_id": 1208166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HWLcG.jpg?s=128&g=1", "display_name": "creativereason", "link": "https://stackoverflow.com/users/1208166/creativereason"}, "is_accepted": false, "score": 0, "last_activity_date": 1429133743, "creation_date": 1429133743, "answer_id": 29661363, "question_id": 29658246, "link": "https://stackoverflow.com/questions/29658246/rails-active-record-query-to-string/29661363#29661363", "title": "Rails active record query to string", "body": "<p>I think will end up needing to be a method of some sort with arrays (or a <code>struct</code> or <code>hash</code> if you want to get more complex). </p>\n\n<p>Using the <code>table_name</code> method to access the underlying table behind a model you could do something like this.  </p>\n\n<pre><code>def auto_joins (primary_model, related_models, values)\n   search = primary_model + '.table_name'\n   primary_table_name = eval(search)\n   primary_id = primary_table_name + '_id'\n   output_sql = \"SELECT * FROM #{primary_table_name}\"\n   related_models.each do |model|\n       search = model + '.table_name'\n       table_name = eval(search)\n       output_sql += \" INNER JOIN #{table_name} ON #{table_name}.#{primary_id} = #{primary_table_name}.id \"\n   end\n   output_sql += \"WHERE 1 = 1 \" #overcome no values passed in...\n   values.each do |where|\n        output_sql += \"AND #{where}\"\n   end\n   output_sql\nend\n</code></pre>\n\n<p>And in my test database I had contact that <code>had_many</code> <code>leads</code> and <code>prospects</code> I called it like this: </p>\n\n<pre><code>auto_joins('Contact', ['Lead', 'Prospect'], [\"contact.first_name = 'Brian'\"])\n</code></pre>\n\n<p>and it generated this:</p>\n\n<pre><code>SELECT * FROM contacts \n  INNER JOIN leads ON leads.contacts_id = contacts.id  \n  INNER JOIN prospects ON prospects.contacts_id = contacts.id \n  WHERE 1 = 1 AND contact.first_name = 'Brian'\n</code></pre>\n\n<p>If you wanted to take it further you could have a hash for <code>{model: 'Contact', where: \"first_name = 'Brian'\"}</code> and both the where and joins together based on that. </p>\n\n<p><strong>Edit Note:</strong> Evals are unsafe if you are exposing any of this to user input. You could find another way to access these models through <code>activerecord</code> and accomplish the same goal.</p>\n"}], "owner": {"reputation": 24422, "user_id": 190623, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ded2adc034647d0e934806583137ecdd?s=128&d=identicon&r=PG", "display_name": "Gandalf StormCrow", "link": "https://stackoverflow.com/users/190623/gandalf-stormcrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 657, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429133743, "creation_date": 1429123258, "question_id": 29658246, "link": "https://stackoverflow.com/questions/29658246/rails-active-record-query-to-string", "title": "Rails active record query to string", "body": "<p>When I have the AR query like this :</p>\n\n<pre><code>MyModel.joins(:related_model).where('related_model.some_column = ?', 'somevalue')\n</code></pre>\n\n<p>If I used <code>to_sql</code> on the above code it would generate something like :</p>\n\n<pre><code>\"SELECT * FROM MY_MODEL INNER JOIN RELATED_MODEL ON RELATED_MODEL.SOME_ID = MY_MODEL.SOME_ID WHERE RELATED_MODEL.SOME_COLUMN = 'SOMEVALUE'\"\n</code></pre>\n\n<p>I'm creating a slightly, or way more complex query, and I hate to duplicate code. Is there are way that I can get this part with some command to alter the generated SQL below?</p>\n\n<pre><code>INNER JOIN RELATED_MODEL ON RELATED_MODEL.SOME_ID = MY_MODEL.SOME_ID WHERE RELATED_MODEL.SOME_COLUMN = 'SOMEVALUE'\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1429122505, "post_id": 29657820, "comment_id": 47455607, "body": "It&#39;s hard to tell what your question is saying exactly. Can you give a specific error message thats preventing you from continuing on in your code? Sound like you have a pretty complex domain model. I would take a step back, figure out exactly what it is you need, and then try and scope your question. I think as it stands right now, its too broad."}, {"owner": {"reputation": 77, "user_id": 4575694, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10152566373105946/picture?type=large", "display_name": "Rafael Flores", "link": "https://stackoverflow.com/users/4575694/rafael-flores"}, "reply_to_user": {"reputation": 2409, "user_id": 4008366, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a9f80535627f21ba4191fea0c6a0771?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kim", "link": "https://stackoverflow.com/users/4008366/andrew-kim"}, "edited": false, "score": 0, "creation_date": 1429127805, "post_id": 29657820, "comment_id": 47458884, "body": "Thanks for reaching out. I am trying to make an estimates feature. I need to be able to create a new estimate being estimate a model ( I need to make reference to customers, their vehicle, and the employee who is preparing the estimate. This info is sitting on other models and what I would like is to give the employee the ability to make an estimate by just selecting the name then of course a list of the (customer&#39;s vehicles is going to come up in the list. Of course the estimate needs me to enter the employee who is preparing the estimate."}], "answers": [{"tags": [], "owner": {"reputation": 1094, "user_id": 1606865, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/825f854201e78dd47e4a4bd79851d7fe?s=128&d=identicon&r=PG", "display_name": "Matt Stevens", "link": "https://stackoverflow.com/users/1606865/matt-stevens"}, "is_accepted": false, "score": 0, "last_activity_date": 1429179415, "creation_date": 1429179415, "answer_id": 29671734, "question_id": 29657820, "link": "https://stackoverflow.com/questions/29657820/i-want-to-populate-a-model-using-foreign-keys-from-other-models-using-select-bo/29671734#29671734", "title": "I want to populate a model using foreign keys from other models (using select boxes)", "body": "<p>If I understand your use case correctly, a customer has many vehicles and a vehicle has many estimates. With setting up your Rails models correctly, you can call <code>customer.vehicles</code> to return an array of vehicles owned by that customer. Iterating through that you can then call <code>vehicle.estimates</code> to get an array of estimates per vehicle.</p>\n\n<pre><code>class Customer &lt;&lt; ActiveRecord::Base\n    has_many :vehicles\nend\n\nclass Vehicle &lt;&lt; ActiveRecord::Base\n    belongs_to :customer\n    has_many :estimates\nend\n\nclass Estimate &lt;&lt; ActiveRecord::Base\n    belongs_to :vehicle\nend\n</code></pre>\n\n<p>In your create_table migrations for vehicles and estimates, you need respectively <code>t.belongs_to :customer</code> and <code>t.belongs_to :vehicle</code> so the foreign keys are created in your db that allow Rails to make the connection.</p>\n\n<p>Use plural names when using <code>has_many</code> and when naming your tables.</p>\n\n<p>Once this is set up and working, to get all estimates for a customer, I think all you need to do is add <code>has_many :estimates, through :vehicles</code> to your customers model. Which will enable <code>customer.estimates</code> to return all estimates. I'm a little less sure of my ground here though so get the rest working first.</p>\n\n<p>Some light reading on this <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 77, "user_id": 4575694, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10152566373105946/picture?type=large", "display_name": "Rafael Flores", "link": "https://stackoverflow.com/users/4575694/rafael-flores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429179415, "creation_date": 1429121916, "question_id": 29657820, "link": "https://stackoverflow.com/questions/29657820/i-want-to-populate-a-model-using-foreign-keys-from-other-models-using-select-bo", "title": "I want to populate a model using foreign keys from other models (using select boxes)", "body": "<p>I want to create an estimate form which happens to be a model. This form has \nCustomer info which is a model as well, vehicle information which is another model nested inside customer on resources. Employee name as well(also a model). I want to be able to select using select boxes on customer, which leads me to a list of the customer vehicles and then being able to populate who is the employee performing the estimate also from a list of the model employee. (I am learning ROR as I go so please I apologize the lack of maybe the right lingo to explain: Also Iwas able to be able to generate the select box for the customer but can't go past that. In other words no even able to access the vehicles for each customer on a selet box. Please help. </p>\n\n<p>Models:</p>\n\n<pre><code>class Estimate &lt; ActiveRecord::Base\n    belongs_to :customer\n    belongs_to :vehicle\n    belongs_to  :employee\n    has_many :lines_in_estimates\nend\n\nclass Customer &lt; ActiveRecord::Base\n    has_many :vehicles\n    has_many :estimates\n    validates :first_name, presence: true\n    validates :last_name, presence: true\n    validates :h_phone, presence: true\n    validates :c_phone, presence: true\n    validates_format_of :email, with: /\\A[\\w]([^@\\s,;]+)@(([\\w-]+\\.)+          (com|edu|org|net|gov|mil|biz|info))\\z/i\n\n   def first_name_and_last_name\n    \"#{first_name} #{last_name}\"\n  end\n end\n\nclass Vehicle &lt; ActiveRecord::Base\n    belongs_to :customer\nend\n\nclass Employee &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>    class EstimatesController &lt; ApplicationController\n    before_action :set_estimate, only: [:show, :edit, :update, :destroy]\n    before_action :set_customer, only: [:show, :edit, :update, :destroy]\n\n\n    def index\n        @estimates = Estimate.all\n    end\n\n    def show\n    end\n\n    def new\n        @estimate = Estimate.new\n    end\n\n\n\n\n    private\n\n        def set_estimate \n             @estimate = Estimate.find(params[:id])\n        end\n\n        def set_customer\n            @estimate = Estimate.find(params[:id])\n        end\n\n        def set_vehicle\n            @vehicle = @customer.vehicles.find(params[:id])\n        end\n\n        def estimate_params\n            params.require(:estimate).permit(:statetax, :muntax, :subtotal,     :total, :created_at, :updated_at, \n                                        :customer_id, :vehicle_id,     :employee_id)\n    end\n\n        def customer_params\n            params.require(:customer).permit(:first_name, :last_name, :addr1,     :addr2, :city, :state, :zip, :h_phone, :c_phone, :email)\n    end\nend\n</code></pre>\n\n<p>Form:</p>\n\n<pre><code>    &lt;%= form_for(@estimate) do |f| %&gt;\n\n    &lt;% if @estimate.errors.any? %&gt;\n      &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@estimate.errors.count, \"error\") %&gt; prohibited this     employee from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @estimate.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n\n\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :Choose_Customer %&gt;&lt;br&gt; \n    &lt;%= collection_select(:estimate, :customer_id, Customer.all, :id,        :first_name_and_last_name, prompt: true ) %&gt;\n  &lt;/div&gt;\n\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-analytics-api"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 2, "creation_date": 1429121613, "post_id": 29657674, "comment_id": 47455064, "body": "Call as <code>::Google::APIClient.new(...)</code>..."}, {"owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1429121673, "post_id": 29657674, "comment_id": 47455101, "body": "<code>uninitialized constant Google</code> now. How do I go up two levels?"}], "answers": [{"tags": [], "owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "is_accepted": false, "score": 1, "last_activity_date": 1429124064, "creation_date": 1429124064, "answer_id": 29658497, "question_id": 29657674, "link": "https://stackoverflow.com/questions/29657674/uninitialized-constant-in-module-in-controller/29658497#29658497", "title": "Uninitialized constant in module in controller", "body": "<p>adding <code>require 'google/api_client'</code> in the <code>class</code> does the trick. Interesting that in the module the <code>require</code> statement is -- pardon the pun -- required since in a regular controller it is not.</p>\n"}], "owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429124064, "creation_date": 1429121461, "question_id": 29657674, "link": "https://stackoverflow.com/questions/29657674/uninitialized-constant-in-module-in-controller", "title": "Uninitialized constant in module in controller", "body": "<p>I have this controller</p>\n\n<pre><code>  module GaReporting\n    module Api\n\n      class GaGatheringController &lt; ApplicationController\n        client = Google::APIClient.new(...)\n      end\n    end\n  end\n</code></pre>\n\n<p>However I get an uninitialized constant error for the <code>\nuninitialized constant GaReporting::Api::GaGatheringController::Google</code></p>\n\n<p>This is curious since this line works fine when I just call it in a \"normal\" controller that is not inside any modules.</p>\n\n<p>How do I fix this and why is it not working?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "transactions"], "answers": [{"comments": [{"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429121720, "post_id": 29657718, "comment_id": 47455126, "body": "1) So basically I can remove all of the else ActiveRecord::Rollback code? 2) Will I still get output to the console? 3) I&#39;m good so long as I leave the Game.transaction and Competitor.transaction code then, correct? What if those were removed, and I was just doing the .save&#39;s?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429123484, "post_id": 29657718, "comment_id": 47456201, "body": "If you want output to the console, just <code>raise &quot;custom error message&quot;</code> or whatever seems necessary. It may not be necessary to nest transactions like that if they&#39;re both on the same database, either, so test how it works in both a success and failure state. You can also clean this up a lot by using <code>save!</code> which automatically throws an exception on failure."}, {"owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "edited": false, "score": 0, "creation_date": 1429123691, "post_id": 29657718, "comment_id": 47456312, "body": "will <code>save!</code> stop everything dead in its tracks? I&#39;m looping through creating hundreds of events. If one event fails, I don&#39;t want the code to terminate and not create the remaining events."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1429121582, "creation_date": 1429121582, "answer_id": 29657718, "question_id": 29657664, "link": "https://stackoverflow.com/questions/29657664/how-can-i-rollback-many-transactions-in-rails-together/29657718#29657718", "title": "How can I rollback many transactions in Rails together?", "body": "<p>Uncaught exceptions will automatically roll back any transactions that are affected.</p>\n\n<p>It's not necessary to raise any particular kind of exception, so you can raise something that describes your error more accurately. Throwing exceptions from another class seems dishonest here.</p>\n\n<p>Note that depending on your database engine certain kinds of operations may not be captured in a transaction. For example, MySQL does not transactionalize changes to the schema. Certain engines may not even support transactions at all, like MySQL + MyISAM.</p>\n"}], "owner": {"reputation": 5691, "user_id": 1652166, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4da8f502012ef8003af59bf5f4ddad0c?s=128&d=identicon&r=PG", "display_name": "chris P", "link": "https://stackoverflow.com/users/1652166/chris-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429121582, "creation_date": 1429121432, "question_id": 29657664, "link": "https://stackoverflow.com/questions/29657664/how-can-i-rollback-many-transactions-in-rails-together", "title": "How can I rollback many transactions in Rails together?", "body": "<p>Let's say we have an app that allows users to create a schedule for intramural sports.</p>\n\n<p>Alice wants to schedule Team A vs Team B on Jan 1 at 6:00pm.</p>\n\n<p>So let's say we have two models. </p>\n\n<p>a <strong>Game</strong> model that holds <strong>id, date</strong></p>\n\n<p>a <strong>Competitor</strong> model that <strong>holds id, game_id, team_id, home</strong></p>\n\n<p>Let's Team A is team_id 100 and Team B is team_id 101.</p>\n\n<p>Our game model will create a new entry, </p>\n\n<pre><code>game.id = 1, date = Jan 1 6:00pm.\n</code></pre>\n\n<p>Our competitor model will create 2 new entries. </p>\n\n<pre><code>id = assigned, game_id: 1, team_id: 100, home: true\nid = assigned, game_id: 1, team_id: 101, home: false\n</code></pre>\n\n<p>Let's say I'm saving this together. How can I roll back the game entry, and competitor entry if say there is an error on the save of the second competitor entry.</p>\n\n<p>Should I have something like this?...</p>\n\n<pre><code>Game.transaction do\n  Competitor.transaction do\n    ...\n    team = ...\n    opponent_team = ...\n    home = home?(team)\n    ...\n    game = Game.new(date: game_start_date)\n    if game.save\n      competitor_team = Competitor.new(game_id: game.id, team_id: team.id, home: home)\n      if competitor_team.save\n        competitor_opponent = Competitor.new(game_id: game.id, team_id: opponent_team.id, home: !home)\n        if competitor_opponent.save\n          #Do nothing\n        else\n          raise ActiveRecord::Rollback, competitor_opponent.errors.full_messages\n        end\n      else\n        raise ActiveRecord::Rollback, competitor_team.errors.full_messages\n      end\n    else\n      raise ActiveRecord::Rollback, game.errors.full_messages\n    end\n  end\nend\n</code></pre>\n\n<p>Will those rollbacks roll back every transactions committed? If competitor_opponent.save fails, will it roll back the game.save and the competitor_team.save?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1429121150, "post_id": 29657416, "comment_id": 47454740, "body": "Try <code>Room.includes(:galleries).where(id: id_number).each { |room| room.galleries }</code> in your console and you will see that there is only one SQL query triggered to gather all <code>Gallery</code> records having <code>room_id</code> equal to your room(s)&#39;s id(s)."}], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 4423225, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/100002385910850/picture?type=large", "display_name": "Juan Dela Cruz", "link": "https://stackoverflow.com/users/4423225/juan-dela-cruz"}, "edited": false, "score": 0, "creation_date": 1429147081, "post_id": 29657634, "comment_id": 47466760, "body": "Thank you sir.. How I can get both information in the two tables? room with galleries of photo?"}, {"owner": {"reputation": 219, "user_id": 4325180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EdrS-4y3wKg/AAAAAAAAAAI/AAAAAAAABvM/b0A5f7hhe_s/photo.jpg?sz=128", "display_name": "PoloniculMov", "link": "https://stackoverflow.com/users/4325180/poloniculmov"}, "reply_to_user": {"reputation": 211, "user_id": 4423225, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/100002385910850/picture?type=large", "display_name": "Juan Dela Cruz", "link": "https://stackoverflow.com/users/4423225/juan-dela-cruz"}, "edited": false, "score": 0, "creation_date": 1429170983, "post_id": 29657634, "comment_id": 47475658, "body": "You&#39;re getting it in one query. Calling <code>room.galleries</code> will not touch the database."}], "tags": [], "owner": {"reputation": 219, "user_id": 4325180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EdrS-4y3wKg/AAAAAAAAAAI/AAAAAAAABvM/b0A5f7hhe_s/photo.jpg?sz=128", "display_name": "PoloniculMov", "link": "https://stackoverflow.com/users/4325180/poloniculmov"}, "is_accepted": false, "score": 1, "last_activity_date": 1429121350, "creation_date": 1429121350, "answer_id": 29657634, "question_id": 29657416, "link": "https://stackoverflow.com/questions/29657416/rails-includes-not-working-on-rails-console/29657634#29657634", "title": "Rails includes not working on rails console", "body": "<p>If you just want to load the room and the galleries it has in one query, then </p>\n\n<p><code>room = Room.includes(:galleries).find(id_number)</code> will do the trick.</p>\n\n<p>But I think you are misunderstanding what <code>joins</code> and <code>includes</code> are doing. You will always get one room object. If you want to access the galleries you'll have to call <code>room.galleries</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "is_accepted": false, "score": 0, "last_activity_date": 1429154402, "creation_date": 1429154402, "answer_id": 29664756, "question_id": 29657416, "link": "https://stackoverflow.com/questions/29657416/rails-includes-not-working-on-rails-console/29664756#29664756", "title": "Rails includes not working on rails console", "body": "<p>You can try with something like:</p>\n\n<pre><code>room = Room.find(id_number).eager_load(:galleries)\n</code></pre>\n\n<p><a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/eager_load\" rel=\"nofollow\">http://apidock.com/rails/ActiveRecord/QueryMethods/eager_load</a></p>\n"}], "owner": {"reputation": 211, "user_id": 4423225, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/100002385910850/picture?type=large", "display_name": "Juan Dela Cruz", "link": "https://stackoverflow.com/users/4423225/juan-dela-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1823, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1429154402, "creation_date": 1429120626, "last_edit_date": 1429146899, "question_id": 29657416, "link": "https://stackoverflow.com/questions/29657416/rails-includes-not-working-on-rails-console", "title": "Rails includes not working on rails console", "body": "<p>I have to model where Room has many galleries and galleries belongs to room .. I want to get the two table information which is I used the includes active record .. </p>\n\n<p><code>room = Room.includes(:galleries).where(id: id_number)</code></p>\n\n<p><code>room = Room.joins(:galleries).select(\"room.*, galleries.name\").where(id: id_number</code></p>\n\n<p>the above code query is not getting the gallery part, it only get the room information. I am confused how to used the <code>includes</code> . I already watch the this ==> <a href=\"http://railscasts.com/episodes/181-include-vs-joins\" rel=\"nofollow\">http://railscasts.com/episodes/181-include-vs-joins</a>. </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby", "oop"], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 2733697, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7edd33c5b7435cddbc142b68626d09d8?s=128&d=identicon&r=PG", "display_name": "Hell0", "link": "https://stackoverflow.com/users/2733697/hell0"}, "edited": false, "score": 0, "creation_date": 1429123830, "post_id": 29657999, "comment_id": 47456409, "body": "The solution you suggest does not work at all. The error is gone, but the written text in the hash is not printed. Moreover, the variable is already initialized in the module. I do not understand why I should re-initialize &#191;?"}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": -1, "last_activity_date": 1429122555, "creation_date": 1429122555, "answer_id": 29657999, "question_id": 29657212, "link": "https://stackoverflow.com/questions/29657212/game-text-based-on-ruby-language-oop/29657999#29657999", "title": "Game text based on ruby language - OOP", "body": "<p>The problem is that in the following line you are trying to use <code>eng</code>, but that variable does not exist:</p>\n\n<pre><code>puts \"#{Language.get(eng, 'sc_enter')}\"\n</code></pre>\n\n<p>So, based on the code you use elsewhere it looks like you could just assign to <code>eng</code> right before that line:</p>\n\n<pre><code>eng = Language.new\nputs \"#{Language.get(eng, 'sc_enter')}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 269, "user_id": 2733697, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7edd33c5b7435cddbc142b68626d09d8?s=128&d=identicon&r=PG", "display_name": "Hell0", "link": "https://stackoverflow.com/users/2733697/hell0"}, "edited": false, "score": 0, "creation_date": 1429164341, "post_id": 29661878, "comment_id": 47471833, "body": "The problem is that I need a transfusion of brain and no doctor is up."}, {"owner": {"reputation": 269, "user_id": 2733697, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7edd33c5b7435cddbc142b68626d09d8?s=128&d=identicon&r=PG", "display_name": "Hell0", "link": "https://stackoverflow.com/users/2733697/hell0"}, "edited": false, "score": 0, "creation_date": 1429168247, "post_id": 29661878, "comment_id": 47474047, "body": "The <code>eng</code> variable must work within the module. I&#39;m not sure what I say, but I could swear that the variable must be an argument in the constructor that works with the method to print the hash value.  I think the problem would be solved if I build a method that is able to print the opposite value passed as an argument. I&#39;ll edit the query, and add the entire code from the dictionary."}], "tags": [], "owner": {"reputation": 486, "user_id": 1111295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1acdbce982b8943826d29ebcd033e822?s=128&d=identicon&r=PG", "display_name": "erasing", "link": "https://stackoverflow.com/users/1111295/erasing"}, "is_accepted": false, "score": 1, "last_activity_date": 1429136116, "last_edit_date": 1495541194, "creation_date": 1429136116, "answer_id": 29661878, "question_id": 29657212, "link": "https://stackoverflow.com/questions/29657212/game-text-based-on-ruby-language-oop/29661878#29661878", "title": "Game text based on ruby language - OOP", "body": "<p>The issue comes from the fact that you defined <code>eng</code> as a <strong>local variable</strong> in <code>hash_compos.rb</code>.</p>\n\n<p>As stated in <a href=\"https://stackoverflow.com/a/2699998/1111295\">this answer</a> to a related question</p>\n\n<blockquote>\n  <p>you cannot access local variables defined in required files</p>\n</blockquote>\n\n<p>A quick fix to this scope issue is to define <code>eng</code> as a <strong>constant</strong> in <code>hash_compos.rb</code>. To achieve that, just rename the variable to <code>ENG</code> and update all the files referencing it accordingly.</p>\n\n<p>This will make the variable accessible from files requiring <code>hash_compos.rb</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 269, "user_id": 2733697, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7edd33c5b7435cddbc142b68626d09d8?s=128&d=identicon&r=PG", "display_name": "Hell0", "link": "https://stackoverflow.com/users/2733697/hell0"}, "is_accepted": true, "score": 0, "last_activity_date": 1429267740, "creation_date": 1429267740, "answer_id": 29697143, "question_id": 29657212, "link": "https://stackoverflow.com/questions/29657212/game-text-based-on-ruby-language-oop/29697143#29697143", "title": "Game text based on ruby language - OOP", "body": "<p>Ok, the solution was much simpler than I thought at first.\nI have chosen to follow the signs that both have suggested, so first things first. Thanks to both of you.</p>\n\n<p>The problem was that I was working with rigid methods that were built to solve a particular problem.\nI created a new hash, and I've put into it, the text needed.\nThen I indicated in the \"main\" <code>.rb</code> file name.\nI'll write the nomenclature of the dictionary, in case anyone cares. The padding is always optional !!!</p>\n\n<pre><code>#!/path/to/your_bin\n</code></pre>\n\n<p>Indicating that in the file, is not the best way to print text. So I recommend,\nencode the file as if we wanted to apply a markdown for a post.\na simple:</p>\n\n<pre><code># Encoding: utf-8\n</code></pre>\n\n<p>I implemented the hash, declaring a constant variable, as indicated erasing.</p>\n\n<pre><code>VARIABLE = {\"key\" =&gt; \"value\"}\n</code></pre>\n\n<p>Then you just have to call the variable by name. Directly. Ruby is responsible for extracting the indicated value when the hash key.</p>\n\n<pre><code>VARIABLE[\"key\"]\n</code></pre>\n\n<p>Text formatting, fits encoded into the file. Escape sequences are not necessary.</p>\n\n<p>Problem solved.</p>\n"}], "owner": {"reputation": 269, "user_id": 2733697, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7edd33c5b7435cddbc142b68626d09d8?s=128&d=identicon&r=PG", "display_name": "Hell0", "link": "https://stackoverflow.com/users/2733697/hell0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 29697143, "answer_count": 3, "score": 1, "last_activity_date": 1429267740, "creation_date": 1429119997, "question_id": 29657212, "link": "https://stackoverflow.com/questions/29657212/game-text-based-on-ruby-language-oop", "title": "Game text based on ruby language - OOP", "body": "<p>I'm trying to integrate text, for a game written in Ruby. To do this, I thought I could save the text itself in a hash.\nI want the user to choose the language in which to play. (two languages).</p>\n\n<p>I have written the game code, the dictionary and I have separated the call that prints text in another file. In this way I keep the code clean.</p>\n\n<p>I intend to keep the hash, only to contain texts in different languages.</p>\n\n<p>I get the following error when I run the main file(<code>my_game.rb</code>) from the console.</p>\n\n<pre><code>my_game.rb:62:in `enter': undefined local variable or method `eng' for\n#&lt;CentralCorridor:0xb7d73d74&gt; (NameError)\n           from my_game.rb:35:in `play'\n           from my_game.rb:257:in `&lt;main&gt;' code here\n</code></pre>\n\n<p>I modified the original code, which can be seen as the first paragraph in the comment block.The first line commented out block is equivalent to the text, written in another file.</p>\n\n<pre><code>class CentralCorridor &lt; Scene\n\ndef enter()\n    puts \"#{Language.get(eng, 'sc_enter')}\"\n=begin\n    puts \"The Gothons of Planet Percal #25 have invaded your ship and destroyed\"\n    puts \"your entire crew. You are the last survivieng member and your last\"\n    puts \"mission is to get the neutron destruct bomb from the Weapon Armory,\"\n    puts \"put it in the bridge, and blow the ship up after getting into an \"\n    puts \"escape pod.\"\n    puts \"\\n\"\n=end\n</code></pre>\n\n<p>This is the method that seems to be the one that returns the error. I am not sure if I should modify it to accept written arguments from the module. \nIt is implemented within <code>my_game.rb</code></p>\n\n<pre><code>def play()\n    current_scene = @scene_map.opening_scene()\n    last_scene = @scene_map.next_scene('finished')\n\n    while current_scene != last_scene\n      next_scene_name = current_scene.enter()\n      current_scene = @scene_map.next_scene(next_scene_name)\n    end\n\n    # be sure to print out the last scene\n    current_scene.enter()\n  end\nend\n</code></pre>\n\n<p>I have written the code of the hash inside the module and I've referenced in <code>my_game.rb</code></p>\n\n<pre><code>require \"./hash_compos\"\nrequire \"./language.rb\"\n\nclass Scene\n  def enter()\n    puts \"This scene is not yet configured. Subclass it and implement enter.\"\n    exit(1)\n  end\nend\n...\n</code></pre>\n\n<p>The following code is part of the Dictionary which I implemented in the module. The file is called <code>language.rb</code>. And the module has the same name <code>Language</code></p>\n\n<pre><code>...\n      def Language.get(miDict, key, default=nil)\n        # Gets the value in a container for the given key, or the default.\n        i, k, v = Language.get_slot(miDict, key, default=default)\n        return v\n      end\n\n      def Language.set(miDict, key, value)\n        # Sets the key to the value, replacing any existing value.\n        container = Language.get_container(miDict, key)\n        i, k, v = Language.get_slot(miDict, key)\n\n        if i &gt;=0\n          container[i] = [key, value]\n        else\n          container.push([key, value])\n        end\n      end\n...\n</code></pre>\n\n<p>This is the hash. Written in <code>hash_compos.rb</code>. By the functions created in <code>Language.rb</code> I implement a dictionary to try to contain the minimum code.</p>\n\n<pre><code>require './language.rb'\n\n# create a mapping of a scene to text\neng = Language.new()\nLanguage.set(eng, 'The Gothons of Planet Percal #25 have invaded your ship\nand destroyed\\nyour entire crew. You are the last survivieng member and your\nlast\\nmission is to get the neutron destruct bomb from the Weapon Armory,\\nput \nit in the bridge, and blow the ship up after getting into an \n\\nescape pod.\\n', 'sc_enter')\nLanguage.set(eng, 'txt', 'sc_cc')\n...\n</code></pre>\n"}, {"tags": ["ruby", "gem"], "answers": [{"tags": [], "owner": {"reputation": 3126, "user_id": 85010, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5a1b964e34cc2b1d3e233fa387b791b0?s=128&d=identicon&r=PG", "display_name": "fiskeben", "link": "https://stackoverflow.com/users/85010/fiskeben"}, "is_accepted": false, "score": 0, "last_activity_date": 1429788901, "creation_date": 1429788901, "answer_id": 29822237, "question_id": 29657107, "link": "https://stackoverflow.com/questions/29657107/why-does-bundle-exec-fail-but-it-works-fine-without/29822237#29822237", "title": "Why does bundle exec fail but it works fine without?", "body": "<p>Figured it out. My <code>version.rb</code> declared <code>class WaffleCal</code> while other files declared <code>module WaffleCal</code>. Settling on one of them fixed the problem.</p>\n"}], "owner": {"reputation": 3126, "user_id": 85010, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5a1b964e34cc2b1d3e233fa387b791b0?s=128&d=identicon&r=PG", "display_name": "fiskeben", "link": "https://stackoverflow.com/users/85010/fiskeben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429788901, "creation_date": 1429119681, "question_id": 29657107, "link": "https://stackoverflow.com/questions/29657107/why-does-bundle-exec-fail-but-it-works-fine-without", "title": "Why does bundle exec fail but it works fine without?", "body": "<p>I'm writing a simple gem and have some trouble with Bundler.</p>\n\n<p>I've created a Rspec spec which runs fine with both <code>rspec spec</code> and <code>rake spec</code>.</p>\n\n<p>However, if I run these commands with <code>bundle exec</code> I get an error saying my gem is not a module:</p>\n\n<pre><code>/Users/fiskeben/kode/waffle_cal/lib/waffle_cal/calendar.rb:1:in `&lt;top (required)&gt;': WaffleCal is not a module (TypeError)\n    from /Users/fiskeben/kode/waffle_cal/lib/waffle_cal.rb:1:in `require'\n    from /Users/fiskeben/kode/waffle_cal/lib/waffle_cal.rb:1:in `&lt;top (required)&gt;'\n    from /Users/fiskeben/kode/waffle_cal/spec/spec_helper.rb:1:in `require'\n</code></pre>\n\n<p>My gem is defined like this:</p>\n\n<pre><code>require 'waffle_cal/calendar'\nrequire 'waffle_cal/event'\n\nmodule WaffleCal\n\nend\n</code></pre>\n\n<p><code>calendar</code> and <code>event</code> implement two classes (simplified):</p>\n\n<pre><code>module WaffleCal\n\n  class Calendar\n    #stuff\n  end\nend\n</code></pre>\n\n<p>My Gemfile just contains <code>gemspec</code> and I have run <code>bundle install</code>. I also deleted <code>.bundle</code> and <code>Gemfile.lock</code> to see if it made any difference.</p>\n"}, {"tags": ["ruby", "web-scraping", "screen-scraping", "webpage"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 1327211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c9d2ddd71032af8b16eb56878dc806?s=128&d=identicon&r=PG", "display_name": "gilbertek", "link": "https://stackoverflow.com/users/1327211/gilbertek"}, "is_accepted": false, "score": 1, "last_activity_date": 1438208443, "creation_date": 1438208443, "answer_id": 31712175, "question_id": 29657046, "link": "https://stackoverflow.com/questions/29657046/loaderror-cannot-load-such-file-capybara-stand-alone-code/31712175#31712175", "title": "LoadError: cannot load such file -- capybara Stand Alone Code", "body": "<p>Add poltergeist to your Gemfile\ngem 'poltergeist'</p>\n"}, {"tags": [], "owner": {"reputation": 9917, "user_id": 1586221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/96ab4c67eb62b315a8e7584f7dfd547a?s=128&d=identicon&r=PG", "display_name": "tompave", "link": "https://stackoverflow.com/users/1586221/tompave"}, "is_accepted": false, "score": 5, "last_activity_date": 1438211322, "creation_date": 1438211322, "answer_id": 31712667, "question_id": 29657046, "link": "https://stackoverflow.com/questions/29657046/loaderror-cannot-load-such-file-capybara-stand-alone-code/31712667#31712667", "title": "LoadError: cannot load such file -- capybara Stand Alone Code", "body": "<p>Have you installed <code>capybara</code> and <code>poltergeist</code>?</p>\n\n<p>I just checked the tutorial you linked, and it doesn't seem to mention Gemfiles.<br>\nAlso, if that is your script, you don't need a Gemfile.</p>\n\n<p>All you need are the gems installed on your system and available in the ruby load path, and <code>require</code> will find them.</p>\n\n<p>Try in a terminal:</p>\n\n<pre><code>$ gem list capybara\n</code></pre>\n\n<p>To see if it's installed.\nIf it isn't, install them both with:</p>\n\n<pre><code>$ gem install poltergeist\n</code></pre>\n\n<p>Capybara is a dependency of Poltergeist, and will be installed automatically.</p>\n\n<p>Do that, and the script should work.</p>\n"}], "owner": {"reputation": 87, "user_id": 3385972, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/HS0su.jpg?s=128&g=1", "display_name": "DillonCarter", "link": "https://stackoverflow.com/users/3385972/dilloncarter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5446, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1438211322, "creation_date": 1429119447, "question_id": 29657046, "link": "https://stackoverflow.com/questions/29657046/loaderror-cannot-load-such-file-capybara-stand-alone-code", "title": "LoadError: cannot load such file -- capybara Stand Alone Code", "body": "<p>I'm working on building a simple post miner using Ruby and the following tutorial (<a href=\"http://ngauthier.com/2014/06/scraping-the-web-with-ruby.html\" rel=\"noreferrer\">http://ngauthier.com/2014/06/scraping-the-web-with-ruby.html</a>)</p>\n\n<p>Here is my code I currently have:</p>\n\n<pre><code>#!/usr/bin/ruby\n\nrequire 'capybara'\nrequire 'capybara/poltergeist'\n\ninclude Capybara::DSL\nCapybara.default_driver = :poltergeist\n\nvisit \"http://dilloncarter.com\"\n\nall(\".posts .post \").each do |post|\n    title = post.find(\"h1 a\").text\n    url   = post.find(\"h1 a\")[\"href\"]\n    date  = post.find(\"a\")[\"datetime\"]\n    summary = post.find(\"p.preview\").text\n\n\n    puts title\n    puts url\n    puts date\n    puts summary\n    puts \" \"\n\nend\n</code></pre>\n\n<p>and i'm getting errors loading the gemfiles like the following:</p>\n\n<pre><code>LoadError: cannot load such file -- capybara\nfrom /Users/dilloncarter/.rvm/rubies/ruby-2.0.0-p353/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom /Users/dilloncarter/.rvm/rubies/ruby-2.0.0-p353/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom WP_Miner.rb:3\nfrom /Users/dilloncarter/.rvm/rubies/ruby-2.0.0-p353/bin/irb:12:in `&lt;main&gt;'\n</code></pre>\n\n<p>How can I get my gems to load properly?</p>\n"}, {"tags": ["ruby", "sitemap"], "comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1429118561, "post_id": 29656537, "comment_id": 47453135, "body": "What <code>open-uri</code> does is it monkey patches <code>Kernel.open</code>, to allow it to open remote files. The error you get indicates that <code>open</code> treats your URL as a path to a file on the local file system, in turn indicating that the <code>open-uri</code> module was not loaded. If you can figure out why, you can solve this problem."}, {"owner": {"reputation": 5, "user_id": 4072488, "user_type": "registered", "profile_image": "https://graph.facebook.com/677691672/picture?type=large", "display_name": "Andrew Corbett", "link": "https://stackoverflow.com/users/4072488/andrew-corbett"}, "reply_to_user": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1429119371, "post_id": 29656537, "comment_id": 47453576, "body": "Thanks for the tip. I&#39;ll work on troubleshooting, but it might be a bit beyond my skill level. Any ideas on where to start would be awesome. Thanks for your time."}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1429119509, "post_id": 29656537, "comment_id": 47453676, "body": "How are you running the script? Using <code>ruby imgsm.rb</code>? Is the code you posted all the code contained in <code>imgsm.rb</code>?"}, {"owner": {"reputation": 5, "user_id": 4072488, "user_type": "registered", "profile_image": "https://graph.facebook.com/677691672/picture?type=large", "display_name": "Andrew Corbett", "link": "https://stackoverflow.com/users/4072488/andrew-corbett"}, "reply_to_user": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1429119810, "post_id": 29656537, "comment_id": 47453883, "body": "Yes to both questions. I&#39;m using <code>ruby imgsm.rb</code> and the code is everything that is contained."}, {"owner": {"reputation": 486, "user_id": 1111295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1acdbce982b8943826d29ebcd033e822?s=128&d=identicon&r=PG", "display_name": "erasing", "link": "https://stackoverflow.com/users/1111295/erasing"}, "edited": false, "score": 0, "creation_date": 1429137778, "post_id": 29656537, "comment_id": 47463928, "body": "Could you check that the version of ruby underlying pry is the same as the one you use to run the script? Try  <code>pry --version</code> and <code>ruby --version</code>"}, {"owner": {"reputation": 5, "user_id": 4072488, "user_type": "registered", "profile_image": "https://graph.facebook.com/677691672/picture?type=large", "display_name": "Andrew Corbett", "link": "https://stackoverflow.com/users/4072488/andrew-corbett"}, "edited": false, "score": 0, "creation_date": 1429660932, "post_id": 29656537, "comment_id": 47700383, "body": "<code>Andrews-MacBook-Pro:ruby andrewcorbett$ pry -v Pry version 0.10.1 on Ruby 2.1.1</code>"}], "owner": {"reputation": 5, "user_id": 4072488, "user_type": "registered", "profile_image": "https://graph.facebook.com/677691672/picture?type=large", "display_name": "Andrew Corbett", "link": "https://stackoverflow.com/users/4072488/andrew-corbett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1429118851, "creation_date": 1429117860, "last_edit_date": 1429118851, "question_id": 29656537, "link": "https://stackoverflow.com/questions/29656537/program-works-in-pry-but-nowhere-else-errnoen0ent-no-such-file-or-directory", "title": "Program works in Pry but nowhere else (Errno::EN0ENT) No such File or directory", "body": "<p>Here is the code I'm working with. Trying to do some cool stuff. At the moment I just want this portion to work.</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\nrequire 'colorize'\nputs \"Image sitemap generator\".colorize(:blue)\nputs \"Not compatibile with tiered sitemaps\".colorize(:red)\nputs \"v.0.1\".colorize(:blue)\nputs \"-----------------------------------------------------------------\"\nputs \"Enter the site you'd like an image sitemap for?\"\nsite = gets.chomp\npath = \"/sitemap.xml\"\ntarget = \"#{site}#{path}\"\nsitemap = Nokogiri::HTML(open(target))\nlinks = sitemap.xpath('//url/loc')\nlinks.each do |link|\n    puts link\nend\n</code></pre>\n\n<p>It doesn't work on my machine and gives the error: </p>\n\n<pre><code>imgsm.rb:12:in `initialize': No such file or directory - http://website.com/sitemap.xml (Errno::ENOENT)\n    from imgsm.rb:12:in `open'\n    from imgsm.rb:12:in `&lt;main&gt;'`\n</code></pre>\n\n<p>However it works perfectly fine in pry and irb. What's happening and how do I fix this? It's incredibly frustrating. I've tried removing Ruby, updating Ruby and going back to a previous version. Nothing has worked at fixing the issue. </p>\n"}, {"tags": ["html", "css", "ruby", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1429145286, "last_edit_date": 1429145286, "creation_date": 1429144822, "answer_id": 29663393, "question_id": 29656223, "link": "https://stackoverflow.com/questions/29656223/replace-tags-using-nokogiri-quicker-way/29663393#29663393", "title": "Replace tags using Nokogiri - quicker way?", "body": "<p>First, please strip your sample data (HTML) to the barest amount necessary to demonstrate the problem.</p>\n\n<p>Here's the basics of doing what you want:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n   &lt;body&gt;\n     &lt;img src=\"apple.png\" alt=\"Apple\" height=\"42\" width=\"42\"&gt;\n   &lt;/body&gt;\n&lt;/html&gt;\nEOT\n\ndoc.search('img').each do |img|\n  src, alt = %w[src alt].map{ |p| img[p] }\n  img.replace(\"&lt;a href='#{ src }'&gt;#{ alt }&lt;/a&gt;\")\nend\n\ndoc.to_html\n# =&gt; \"&lt;!DOCTYPE html&gt;\\n&lt;html&gt;\\n   &lt;body&gt;\\n     &lt;a href=\\\"apple.png\\\"&gt;Apple&lt;/a&gt;\\n   &lt;/body&gt;\\n&lt;/html&gt;\\n\"\n\nputs doc.to_html\n# &gt;&gt; &lt;!DOCTYPE html&gt;\n# &gt;&gt; &lt;html&gt;\n# &gt;&gt;    &lt;body&gt;\n# &gt;&gt;      &lt;a href=\"apple.png\"&gt;Apple&lt;/a&gt;\n# &gt;&gt;    &lt;/body&gt;\n# &gt;&gt; &lt;/html&gt;\n</code></pre>\n\n<p>Doing it this way allows Nokogiri to replace nodes cleanly. </p>\n\n<p>It's not necessary to do all this rigamarole:</p>\n\n<pre><code>a_tag = Nokogiri::XML::Node.new(\"a\", nokogiri_html)\na_tag[\"href\"] = tag[\"src\"]\ntag.add_next_sibling(a_tag)\ntag.remove()\n</code></pre>\n\n<p>Instead, create a string that is the tag you want to use and let Nokogiri convert the string to a node and replace the old node:</p>\n\n<pre><code>src, alt = %w[src alt].map{ |p| img[p] }\nimg.replace(\"&lt;a href='#{ src }'&gt;#{ alt }&lt;/a&gt;\")\n</code></pre>\n\n<p>It's not necessary to strip extraneous whitespace between nodes. It can affect the look of the HTML but browsers will gobble that extra whitespace and not display it. </p>\n\n<p>Nokogiri can be told to not output the inter-node whitespace, resulting in a compressed/fugly output, but how to do that is a separate question.</p>\n"}], "owner": {"reputation": 77, "user_id": 4792598, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/621b365b6109164762252005d4f3aa22?s=128&d=identicon&r=PG&f=1", "display_name": "hello_world", "link": "https://stackoverflow.com/users/4792598/hello-world"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1089, "favorite_count": 0, "accepted_answer_id": 29663393, "answer_count": 1, "score": 0, "last_activity_date": 1429145286, "creation_date": 1429116797, "last_edit_date": 1429144332, "question_id": 29656223, "link": "https://stackoverflow.com/questions/29656223/replace-tags-using-nokogiri-quicker-way", "title": "Replace tags using Nokogiri - quicker way?", "body": "<p>I have the following HTML in a variable named <code>html_data</code> where I wish to replace <code>&lt;img&gt;</code> tags with <code>&lt;a&gt;</code> tags and the <code>src</code> parameters of the \"img\" tags becomes <code>href</code> of the \"a\" tags.</p>\n\n<p>Existing HTML:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n   &lt;head&gt;\n      &lt;title&gt;Learning Nokogiri&lt;/title&gt;\n   &lt;/head&gt;\n   &lt;body marginwidth=\"6\"&gt;\n      &lt;div valign=\"top\"&gt;\n         &lt;div class=\"some_class\"&gt;\n            &lt;div class=\"test\"&gt;\n               &lt;img src=\"apple.png\" alt=\"Apple\" height=\"42\" width=\"42\"&gt;\n               &lt;div style=\"white-space: pre-wrap;\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n         &lt;/div&gt;\n      &lt;/div&gt;\n   &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This is my solution A:</p>\n\n<pre><code>nokogiri_html = Nokogiri::HTML(html_data)\nnokogiri_html(\"img\").each { |tag|\n        a_tag = Nokogiri::XML::Node.new(\"a\", nokogiri_html)\n        a_tag[\"href\"] = tag[\"src\"]\n        tag.add_next_sibling(a_tag)\n        tag.remove()\n}\n\nputs 'nokogiri_html is', nokogiri_html\n</code></pre>\n\n<p>This is my solution B:</p>\n\n<pre><code>nokogiri_html = Nokogiri::HTML(html_data)\nnokogiri_html(\"img\").each { |tag|\n        tag.name= \"a\";\n        tag.set_attribute(\"href\" , tag[\"src\"])\n}\n\nputs 'nokogiri_html is', nokogiri_html\n</code></pre>\n\n<p>While solution A works fine, I am looking if there is a quicker/direct way to replace the tags using Nokogiri. With solution B, my \"img\" tag does get replaced with the \"a\" tag, but the properties of the \"img\" tag still remains inside the \"a\" tag. Below is the result of Solution B:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n   &lt;body&gt;\n      &lt;p&gt;[\"\\n\", \"\\n\", \"   &lt;/p&gt;\n      \\n\", \"      \n      &lt;title&gt;Learning Nokogiri&lt;/title&gt;\n      \\n\", \"   \\n\", \"   \\n\", \"      \n      &lt;div valign='\\\"top\\\"'&gt;\n         \\n\", \"         \n         &lt;div class='\\\"some_class\\\"'&gt;\n            \\n\", \"            \n            &lt;div class='\\\"test\\\"'&gt;\n               \\n\", \"               &lt;a src=\"%5C%22apple.png%5C%22\" alt='\\\"Apple\\\"' height='\\\"42\\\"' width='\\\"42\\\"' href=\"%5C%22apple.png%5C%22\"&gt;&lt;/a&gt;\\n\", \"               \n               &lt;div style='\\\"white-space:' pre-wrap&gt;&lt;/div&gt;\n               \\n\", \"            \n            &lt;/div&gt;\n            \\n\", \"         \n         &lt;/div&gt;\n         \\n\", \"      \n      &lt;/div&gt;\n      \\n\", \"   \\n\", \"\"]\n   &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Is there a way to replace the tags faster in HTML using Nokogiri? Also how can remove the \"\\n\"s am getting in the result?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "capybara", "middleman"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 1957888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf2f024655c5d959aa7e3e576434519c?s=128&d=identicon&r=PG", "display_name": "kikonen", "link": "https://stackoverflow.com/users/1957888/kikonen"}, "is_accepted": true, "score": 0, "last_activity_date": 1429208360, "creation_date": 1429208360, "answer_id": 29682941, "question_id": 29656129, "link": "https://stackoverflow.com/questions/29656129/trying-to-automate-with-capybara-angular-capybara-ng-gems-help-examples/29682941#29682941", "title": "Trying to automate with capybara-angular &amp; capybara-ng gems - Help &amp; Examples.-", "body": "<p>\"uninitialized constant Capybara::Angular (NameError)\" indicates some trouble in initialization order.</p>\n\n<p>I just created small example, which may help you:</p>\n\n<p><a href=\"https://github.com/kikonen/capybara-ng/blob/master/spec/dummy/features/test.feature\" rel=\"nofollow\">https://github.com/kikonen/capybara-ng/blob/master/spec/dummy/features/test.feature</a></p>\n"}], "owner": {"reputation": 606, "user_id": 4651582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0Irok.png?s=128&g=1", "display_name": "Bruno Soko", "link": "https://stackoverflow.com/users/4651582/bruno-soko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 0, "accepted_answer_id": 29682941, "answer_count": 1, "score": 1, "last_activity_date": 1450267348, "creation_date": 1429116504, "last_edit_date": 1450267348, "question_id": 29656129, "link": "https://stackoverflow.com/questions/29656129/trying-to-automate-with-capybara-angular-capybara-ng-gems-help-examples", "title": "Trying to automate with capybara-angular &amp; capybara-ng gems - Help &amp; Examples.-", "body": "<p><strong>Hello!</strong></p>\n\n<p>I'm trying to automate the following piece of code:</p>\n\n<pre><code>&lt;form class=\"form ng-pristine ng-valid ng-scope ng-valid-email\" ng-controller=\"SubscribeController\" subscribe-directive=\"\"&gt;\n&lt;input class=\"ng-pristine ng-valid ng-valid-email ng-touched\" ng-model=\"subscription.email\" placeholder=\"Email Address\" ng-disabled=\"working || subscription.done\" type=\"email\"&gt;\n&lt;button disabled=\"disabled\" type=\"submit\" ng-class=\"{'working': working}\" ng-disabled=\"working || !subscription.email || subscription.done\" ng-click=\"submit(subscription.email)\"&gt;\n&lt;span class=\"ng-binding\" ng-bind-html=\"submitBtn\"&gt;Click&lt;/span&gt;\n&lt;/button&gt; &lt;p ng-bind-html=\"callback_message\" class=\"msg ng-binding ng-hide\" ng-show=\"callback_message\"&gt;&lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Although I can reach them when executing Javascripts commands on the page (Using @javascript tag with the cucumber set up), I cannot make it to work due to the property that the input field has, since only changes to enabled when entering the email manually or even when I trigger to change the state, but when I click the button, the email that I entered seems not to be sending over.</p>\n\n<p>I'm using Cucumber + Capybara + Rake + Rails and some other Gems, and the site was built with Middleman.</p>\n\n<p><strong>Here's the code I've implemented with pure JS to test:</strong></p>\n\n<pre><code>page.execute_script(\"$('input[type=email]').val('#@random_email}').trigger('blur')\")\npage.execute_script(\" $('button[type=submit]').prop('disabled', false).trigger('click') \")\n</code></pre>\n\n<p>When included the <code>capybara-ng</code> gem and adding the line</p>\n\n<pre><code>include Capybara::Angular::DSL\n</code></pre>\n\n<p>I got:</p>\n\n<pre><code>cucumber\nuninitialized constant Capybara::Angular (NameError)\n</code></pre>\n\n<p>and I've included the <code>spec/spec_helper.rb</code> but I'm getting that the file could not be loaded! </p>\n\n<p>Can someone point me to any good example and usage of any or both mentioned gems? or how could I test Angular? do someone have a reason that this won't work?</p>\n\n<p>I'm kinda of a newbie in the Ruby world so please let me know if the question is too silly!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "comments": [{"owner": {"reputation": 5434, "user_id": 974389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0ebd5b49987227c5a7a8830011e744?s=128&d=identicon&r=PG", "display_name": "Liyali", "link": "https://stackoverflow.com/users/974389/liyali"}, "edited": false, "score": 0, "creation_date": 1429117802, "post_id": 29656124, "comment_id": 47452688, "body": "What is <code>{stripe_account: &#39;client_account_id&#39;}</code>, shouldn&#39;t it be <code>:customer =&gt; &#39;xxxxxxxxxxx&#39;</code> in your list of options instead?"}, {"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "reply_to_user": {"reputation": 5434, "user_id": 974389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0ebd5b49987227c5a7a8830011e744?s=128&d=identicon&r=PG", "display_name": "Liyali", "link": "https://stackoverflow.com/users/974389/liyali"}, "edited": false, "score": 0, "creation_date": 1429118964, "post_id": 29656124, "comment_id": 47453347, "body": "@Liyali that&#39;s for stripe connect. I&#39;m taking payments on behalf of my customers. That&#39;s where their uid would go.  <a href=\"https://stripe.com/docs/connect/payments-fees\" rel=\"nofollow noreferrer\">stripe.com/docs/connect/payments-fees</a>"}, {"owner": {"reputation": 5434, "user_id": 974389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0ebd5b49987227c5a7a8830011e744?s=128&d=identicon&r=PG", "display_name": "Liyali", "link": "https://stackoverflow.com/users/974389/liyali"}, "edited": false, "score": 0, "creation_date": 1429119657, "post_id": 29656124, "comment_id": 47453777, "body": "Also, isn&#39;t the <code>source</code> missing in the Customer class stripe API request?"}, {"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "reply_to_user": {"reputation": 5434, "user_id": 974389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0ebd5b49987227c5a7a8830011e744?s=128&d=identicon&r=PG", "display_name": "Liyali", "link": "https://stackoverflow.com/users/974389/liyali"}, "edited": false, "score": 0, "creation_date": 1429120696, "post_id": 29656124, "comment_id": 47454456, "body": "I added the full log that Stripe gives...honestly it&#39;s not much but it&#39;s all that&#39;s showing up in their logs for this.  &#39;source&#39; and &#39;card&#39; are inter-changable right now. I believe &#39;card&#39; is going to be deprecated soon. but for this question it shouldn&#39;t matter because I&#39;m not hitting that. But thank you for pointing that out I will correct that."}, {"owner": {"reputation": 5434, "user_id": 974389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0ebd5b49987227c5a7a8830011e744?s=128&d=identicon&r=PG", "display_name": "Liyali", "link": "https://stackoverflow.com/users/974389/liyali"}, "edited": false, "score": 0, "creation_date": 1429124564, "post_id": 29656124, "comment_id": 47456875, "body": "Yes I saw it wasn&#39;t called but just wanted to flag that. Have you tried to inspect the options hash sent to <code>Stripe::Charge.create</code> before the <code>begin</code> block? Can you also give us your code for the method <code>payment_params</code>? Thanks."}, {"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "reply_to_user": {"reputation": 5434, "user_id": 974389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0ebd5b49987227c5a7a8830011e744?s=128&d=identicon&r=PG", "display_name": "Liyali", "link": "https://stackoverflow.com/users/974389/liyali"}, "edited": false, "score": 0, "creation_date": 1429133791, "post_id": 29656124, "comment_id": 47462302, "body": "I added payment params. How do I inspect the hash?"}, {"owner": {"reputation": 5434, "user_id": 974389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0ebd5b49987227c5a7a8830011e744?s=128&d=identicon&r=PG", "display_name": "Liyali", "link": "https://stackoverflow.com/users/974389/liyali"}, "edited": false, "score": 0, "creation_date": 1429182553, "post_id": 29656124, "comment_id": 47483361, "body": "Add <code>:stripeToken</code> into the <code>permit</code> method of <code>payment_params</code>, does that fix the issue?"}, {"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "reply_to_user": {"reputation": 5434, "user_id": 974389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f0ebd5b49987227c5a7a8830011e744?s=128&d=identicon&r=PG", "display_name": "Liyali", "link": "https://stackoverflow.com/users/974389/liyali"}, "edited": false, "score": 0, "creation_date": 1429195106, "post_id": 29656124, "comment_id": 47493429, "body": "now I&#39;m receiving this error...which makes 0 sense: Received both source and customer parameters. Please pass in only one. (my code hasn&#39;t changed from what&#39;s above)"}], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 0, "creation_date": 1429120603, "post_id": 29657329, "comment_id": 47454393, "body": "I did have that in there with the connected accounts publishable key...which did work when I inspected element it was showing the correct publishable key. I edited my question to reflect this. Thanks for pointing that out."}, {"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 0, "creation_date": 1429120956, "post_id": 29657329, "comment_id": 47454633, "body": "for the stripe secret I have that in an initializer and it&#39;s not giving me any indication that it&#39;s causing a problem. I have everything working except for the charge part. Connecting the accounts through oauth works, even creating customers works, but I can&#39;t charge and I can&#39;t figure out why."}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "reply_to_user": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 0, "creation_date": 1429120964, "post_id": 29657329, "comment_id": 47454636, "body": "I still don&#39;t see where you set your Stripe.api_key"}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "reply_to_user": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 0, "creation_date": 1429121158, "post_id": 29657329, "comment_id": 47454745, "body": "set the Stripe.api_key before the call to StripeWrapper and see that it should work"}, {"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 0, "creation_date": 1429121310, "post_id": 29657329, "comment_id": 47454842, "body": "Just tried that and it&#39;s still giving the same error."}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "reply_to_user": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 0, "creation_date": 1429124108, "post_id": 29657329, "comment_id": 47456593, "body": "Can you add a <code>binding.pry</code> in the controller before the call to StripeWrapper and check to see if <code>Stripe.api_key</code> and <code>params[:stripeToken]</code> give the correct values?"}, {"owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 0, "creation_date": 1429135246, "post_id": 29657329, "comment_id": 47462984, "body": "I added binding.pry but I didn&#39;t see anything about Stripe.api_key or params[:stripeToken] when I stepped through. Not sure what that means."}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "reply_to_user": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "edited": false, "score": 0, "creation_date": 1429152754, "post_id": 29657329, "comment_id": 47468290, "body": "if they were both nil, that means your form isn&#39;t submitting correctly and you didn&#39;t set the Stripe.api_key. What do you see if you just type <code>params</code>"}], "tags": [], "owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "is_accepted": false, "score": 0, "last_activity_date": 1429120344, "creation_date": 1429120344, "answer_id": 29657329, "question_id": 29656124, "link": "https://stackoverflow.com/questions/29656124/rails-stripe-connect-token-issue/29657329#29657329", "title": "Rails Stripe Connect Token Issue", "body": "<p>Did you include Stripe.js? Add this at the top of new.html.erb</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n  Stripe.setPublishableKey(\"#{ENV['STRIPE_PUBLISHABLE_KEY']}\");\n&lt;/script&gt;\n&lt;%= javascript_include_tag 'payment' %&gt;\n</code></pre>\n\n<p>ENV['STRIPE_PUBLISHABLE_KEY'] should be set in application.yml or similar location. You also need to put this in the create controller before you call StripeWrapper</p>\n\n<pre><code>Stripe.api_key = ENV['STRIPE_SECRET_KEY']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "is_accepted": true, "score": 0, "last_activity_date": 1430153369, "creation_date": 1430153369, "answer_id": 29901585, "question_id": 29656124, "link": "https://stackoverflow.com/questions/29656124/rails-stripe-connect-token-issue/29901585#29901585", "title": "Rails Stripe Connect Token Issue", "body": "<p>After hopping on the stripe freenode channel and getting some help we figured out the problem and I wanted to leave the result here for anyone else having this problem.</p>\n\n<p>It turns out that it was a javascript error from the morris.js charts library that was causing the rest of the javscript (namely the payment.js file) from not being executed and therefore not token was created. </p>\n\n<p>The morris.js error was caused because the jquery was called to display a graph (from the asset pipeline), but there was no div container for the graph. I solved this by simply putting a div with the correct id, but no data element so no data is displayed and a style display:none so nothing is shown to the user.</p>\n"}], "owner": {"reputation": 385, "user_id": 1350408, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/RqWVL.jpg?s=128&g=1", "display_name": "Steve Q", "link": "https://stackoverflow.com/users/1350408/steve-q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 1, "accepted_answer_id": 29901585, "answer_count": 2, "score": 0, "last_activity_date": 1430153369, "creation_date": 1429116491, "last_edit_date": 1429127143, "question_id": 29656124, "link": "https://stackoverflow.com/questions/29656124/rails-stripe-connect-token-issue", "title": "Rails Stripe Connect Token Issue", "body": "<p>It seems that either a token is not being created properly or it's never being passed to stripe and I have no idea why. I've already removed turbolinks bc I've seen problems with that on SO. I've followed every guide I can. I've hooked up stripe payments before no problem and I can't solve this one after days of trying. Please help!</p>\n\n<p>It's a simple payment form for my customers, so it just needs to be a one time charge. Not even setting up customers as of now.</p>\n\n<p>The error I'm getting: You must supply either a source or a customer id</p>\n\n<p>Error response from stripe:</p>\n\n<pre><code>error:\n    type: \"invalid_request_error\"\n    message: \"You must supply either a source or a customer id\"\n</code></pre>\n\n<p>new.html.erb</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n  // This identifies your website in the createToken call below\n  Stripe.setPublishableKey('&lt;%= @user.publishable_key %&gt;');\n  // ...\n&lt;/script&gt;\n\n\n&lt;%= javascript_include_tag 'payment' %&gt;\n\n&lt;%= form_for @payment, html: {id: \"payment-form\"} do |f| %&gt;\n&lt;div class=\"input-group\"&gt;\n  &lt;span class=\"input-group-addon\"&gt;&lt;i class=\"fa fa-user\"&gt;&lt;/i&gt;&lt;/span&gt;\n  &lt;%= f.text_field :amount, autofocus: true, placeholder: \"Amount\", class: \"form-control\" %&gt;\n&lt;/div&gt;\n&lt;div class=\"input-group\"&gt;\n  &lt;span class=\"input-group-addon\"&gt;&lt;i class=\"fa fa-user\"&gt;&lt;/i&gt;&lt;/span&gt;\n  &lt;input class=\"form-control\" data-stripe=\"number\" maxlength=\"20\" placeholder=\"Credit Card Number\" type=\"text\"&gt;&lt;/input&gt;\n&lt;/div&gt;\n&lt;div class=\"input-group\"&gt;\n  &lt;span class=\"input-group-addon\"&gt;&lt;i class=\"fa fa-user\"&gt;&lt;/i&gt;&lt;/span&gt;\n  &lt;input class=\"form-control\" data-stripe=\"cvc\" size=\"10\" placeholder=\"Security Number\" type=\"text\"&gt;&lt;/input&gt;\n&lt;/div&gt;\n&lt;div class=\"input-group\"&gt;\n    &lt;center&gt;&lt;p&gt;Expiration Date:&lt;/p&gt;&lt;/center&gt;\n    &lt;ul class=\"dates\"&gt;\n        &lt;li&gt;&lt;%= select_month(Date.today, {add_month_numbers: true},  class: 'form-control', data: {stripe: \"exp-month\"}, style: \"height: 46px;\") %&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;%= select_year(Date.today.year, {start_year: Date.today.year, end_year: Date.today.year + 4}, class: 'form-control', data: {stripe: \"exp-year\"}, style: \"height: 46px;\") %&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n&lt;div class=\"row\"&gt;\n&lt;div class=\"col-xs-12\"&gt;\n  &lt;%= f.submit \"Submit Payment\", class: \"btn btn-success col-xs-12\" %&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Payments Controller:</p>\n\n<pre><code>def new\n    @company = Company.find(params[:id])\n    @user = @company.users.first\n    @payment = Payment.new\nend\n\ndef create\n    @result = StripeWrapper::Charge.create(source: params[:stripeToken])\n    if @result.present?\n      @payment = Payment.create(payment_params)\n      flash[:success] = \"Thank you for your payment\"\n      redirect_to thank_you_path\n    else\n      flash[:danger] = @result.error_message\n      render :new\n    end\nend\n\nprivate\n\ndef payment_params\n  params.require(:payment).permit(:user_id, :company_id, :reference_id)\nend\n</code></pre>\n\n<p>Stripe_wrapper.rb</p>\n\n<pre><code>module StripeWrapper\nclass Charge\n    attr_reader :error_message, :response\n\n    def initialize(options={})\n        @response = options[:response]\n        @error_message = options[:error_message]\n    end\n\n    def self.create(options={})\n        begin\n            response = Stripe::Charge.create({\n                amount: 1000,\n                currency: 'usd',\n                source:  options[:source],\n                description: \"test charge\",\n                application_fee: 123\n            }, {stripe_account: 'client_account_id'}\n            )\n            new(response: response)\n        rescue Stripe::CardError =&gt; e\n            new(error_message: e.message)\n        end\n    end\n\n    def successful?\n        response.present?\n    end\nend\n\nclass Customer\n    attr_reader :response, :error_message\n\n    def initialize(options={})\n        @response = options[:response]\n        @error_message = options[:error_message]\n    end\n\n    def self.create(options={})\n        begin\n        response = Stripe::Customer.create({\n            card: options[:card],\n            email: options[:user_email],\n            description: \"Service Pay\"\n            },\n            {stripe_account: 'connect_client_id'}\n        )\n        new(response: response)\n        rescue Stripe::CardError =&gt; e\n          new(error_message: e.message)\n        end\n    end\n\n    def successful?\n        response.present?\n    end\n\n    def customer_token\n        response.id\n    end\nend\nend\n</code></pre>\n\n<p>payment.js</p>\n\n<pre><code>jQuery(function($) {\n  $('#payment-form').submit(function(event) {\n    var $form = $(this);\n    $form.find('button').prop('disabled', true);\n    Stripe.card.createToken($form, stripeResponseHandler);\n    return false;\n  });\n});\n\nvar stripeResponseHandler = function(status, response) {\n  var $form = $('#payment-form');\n\n  if (response.error) {\n    $form.find('.payment-errors').text(response.error.message);\n    $form.find('button').prop('disabled', false);\n  } else {\n    var token = response.id;\n    $form.append($('&lt;input type=\"hidden\" name=\"stripeToken\" /&gt;').val(token));\n    $form.get(0).submit();\n  }\n};\n</code></pre>\n"}, {"tags": ["ruby", "clojure"], "comments": [{"owner": {"reputation": 293, "user_id": 3300063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/985a39804a671f50f71b5a6526487185?s=128&d=identicon&r=PG", "display_name": "SurrealAnalysis", "link": "https://stackoverflow.com/users/3300063/surrealanalysis"}, "edited": false, "score": 1, "creation_date": 1429120487, "post_id": 29655824, "comment_id": 47454320, "body": "Not positive why they are different, but it is worth noting that both results are correct. The last three numbers are the same, and 1^2 + 1^2 + 2^2 + 3^2 + 11^2 = 136 = 6^2 + 10^2."}, {"owner": {"reputation": 200, "user_id": 3166747, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afe5665fb3761f2ede322f84f8d43fd7?s=128&d=identicon&r=PG&f=1", "display_name": "user3166747", "link": "https://stackoverflow.com/users/3166747/user3166747"}, "reply_to_user": {"reputation": 293, "user_id": 3300063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/985a39804a671f50f71b5a6526487185?s=128&d=identicon&r=PG", "display_name": "SurrealAnalysis", "link": "https://stackoverflow.com/users/3300063/surrealanalysis"}, "edited": false, "score": 0, "creation_date": 1429121662, "post_id": 29655824, "comment_id": 47455093, "body": "Yes the two decompositions are correct but why not the same with the &quot;pretended&quot; same algorithm? I wanted to avoid same numbers (1 1 ...) in Clojure as they are all different in Ruby."}, {"owner": {"reputation": 761, "user_id": 1132938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea437f578ebd85df89edb3a5e5d5a06?s=128&d=identicon&r=PG", "display_name": "Tassilo Horn", "link": "https://stackoverflow.com/users/1132938/tassilo-horn"}, "edited": false, "score": 0, "creation_date": 1429126938, "post_id": 29655824, "comment_id": 47458386, "body": "Your Clojure version loops as long as <code>i</code> is <code>&gt;= 1</code>, your Ruby version only as long as <code>i</code> is <code>&gt;= Math.sqrt(nb &#47; 2.0).to_i</code>."}, {"owner": {"reputation": 200, "user_id": 3166747, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afe5665fb3761f2ede322f84f8d43fd7?s=128&d=identicon&r=PG&f=1", "display_name": "user3166747", "link": "https://stackoverflow.com/users/3166747/user3166747"}, "edited": false, "score": 0, "creation_date": 1429128205, "post_id": 29655824, "comment_id": 47459103, "body": "I know but here that makes no difference in the result so I simplified the test in Clojure. Furthermore it seems that Clojure never uses this part with &quot;recur&quot;... Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 200, "user_id": 3166747, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afe5665fb3761f2ede322f84f8d43fd7?s=128&d=identicon&r=PG&f=1", "display_name": "user3166747", "link": "https://stackoverflow.com/users/3166747/user3166747"}, "edited": false, "score": 0, "creation_date": 1429159495, "post_id": 29663472, "comment_id": 47470045, "body": "Wonderful! Lots of thanks! Additional question: do you think that this result with a <b>strictly increasing sequence</b> is unique?"}, {"owner": {"reputation": 7975, "user_id": 1455243, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/99716e02429624201ec8f85f820a81ce?s=128&d=identicon&r=PG", "display_name": "Mars", "link": "https://stackoverflow.com/users/1455243/mars"}, "edited": false, "score": 0, "creation_date": 1429160583, "post_id": 29663472, "comment_id": 47470387, "body": "Sounds like a question for math.stackexchange."}, {"owner": {"reputation": 80640, "user_id": 232707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd08ebe63b175a3f2e11ae9edf796b2a?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Marczyk", "link": "https://stackoverflow.com/users/232707/micha%c5%82-marczyk"}, "edited": false, "score": 0, "creation_date": 1429162403, "post_id": 29663472, "comment_id": 47471020, "body": "No, you can evaluate <code>decompose_aux(7654321*7654321, 7654319)</code> to obtain an alternative strictly increasing sequence \u2013 <code>[3, 6, 11, 55, 5533, 7654319]</code>. The simplest example of a square having multiple such decompositions (strictly increasing and longer than the trivial decomposition with itself as the only member) is probably 169 = 13*13 = 3*3 + 4*4 + 12*12 = 5*5 + 12*12."}, {"owner": {"reputation": 12615, "user_id": 1562315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db68e51797a2382e185b42ce6534b7a4?s=128&d=identicon&r=PG", "display_name": "Thumbnail", "link": "https://stackoverflow.com/users/1562315/thumbnail"}, "reply_to_user": {"reputation": 200, "user_id": 3166747, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afe5665fb3761f2ede322f84f8d43fd7?s=128&d=identicon&r=PG&f=1", "display_name": "user3166747", "link": "https://stackoverflow.com/users/3166747/user3166747"}, "edited": false, "score": 0, "creation_date": 1429179633, "post_id": 29663472, "comment_id": 47481326, "body": "@user3166747 Accept the answer. Give him a tick!"}], "tags": [], "owner": {"reputation": 80640, "user_id": 232707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd08ebe63b175a3f2e11ae9edf796b2a?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Marczyk", "link": "https://stackoverflow.com/users/232707/micha%c5%82-marczyk"}, "is_accepted": true, "score": 5, "last_activity_date": 1429145331, "creation_date": 1429145331, "answer_id": 29663472, "question_id": 29655824, "link": "https://stackoverflow.com/questions/29655824/ruby-and-clojure-same-algorith-but-different-results/29663472#29663472", "title": "Ruby and Clojure: same algorith (?) but different results", "body": "<p>The two algorithms are not actually the same.</p>\n\n<p>The difference is that in Clojure you have a different loop condition (as pointed out by Tassilo Horn in the comments) and you check it at a different point in your computation. Consequently, the Clojure version can basically add as many 1s as necessary on to any candidate result which is not \"complete\" (that is, where the squares of the numbers add up to a number less than your target).</p>\n\n<p>Actually this phenomenon is not limited to 1s \u2013 <code>decompose_aux(8, 2)</code> returns <code>nil</code>, whereas <code>(decompAux 8 2)</code> returns <code>(2 2)</code> \u2013 but the fact that you can always count down to the point where <code>i</code> is <code>1</code> means that <code>decompAux</code> is guaranteed to return an answer for any positive <code>nb</code> and <code>rac</code> inputs (an answer which might involve many 1s).</p>\n\n<p>Here's a fairly direct translation of your Ruby to Clojure:</p>\n\n<pre><code>(defn decompose [n]\n  (letfn [(decompose-aux [nb rac]\n            (if (zero? nb)\n              []\n              (loop [i rac l nil]\n                (if (&gt;= i (inc (int (Math/sqrt (/ nb 2.0)))))\n                  (let [diff (- nb (* i i))\n                        rac  (int (Math/sqrt diff))\n                        l    (decompose-aux diff rac)]\n                    (if (some? l)\n                      (conj l i)\n                      (recur (dec i) l)))\n                  l))))]       ; unnecessary line\n    (decomp-aux (* n n) (int (Math/sqrt (dec (* n n)))))))\n</code></pre>\n\n<p>It matches the Ruby version on your example:</p>\n\n<pre><code>(decompose 7654321)\n;= [6 10 69 3912 7654320]\n</code></pre>\n"}], "owner": {"reputation": 200, "user_id": 3166747, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/afe5665fb3761f2ede322f84f8d43fd7?s=128&d=identicon&r=PG&f=1", "display_name": "user3166747", "link": "https://stackoverflow.com/users/3166747/user3166747"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 29663472, "answer_count": 1, "score": 3, "last_activity_date": 1429145331, "creation_date": 1429115510, "last_edit_date": 1429117038, "question_id": 29655824, "link": "https://stackoverflow.com/questions/29655824/ruby-and-clojure-same-algorith-but-different-results", "title": "Ruby and Clojure: same algorith (?) but different results", "body": "<p>I'm trying to decompose the square of a number into a sum of squares:\nIn Ruby:</p>\n\n<pre><code>    def decompose(n)\n      def decompose_aux(nb, rac)\n        return [] if (nb == 0)\n        i, l = rac, nil\n        while (i &gt;= Math.sqrt(nb / 2.0).to_i + 1) do\n            diff = nb - i * i\n            rac = Math.sqrt(diff).to_i\n            l = decompose_aux(diff, rac);\n            if l != nil then \n                l  &lt;&lt; i; return l\n            end\n            i -= 1\n        end\n        l\n    end  \n\n    l = decompose_aux(n * n, Math.sqrt(n * n - 1).to_i);\n    if l then return l else return nil end \nend\n</code></pre>\n\n<p>In Clojure:</p>\n\n<pre><code>(defn decompAux [nb rac]\n  (if (= 0 nb)\n    ()\n    (loop [i rac l nil]\n      (let [diff (- nb (* i i)) rac (int (Math/sqrt diff)) l (decompAux diff rac)]\n        (if (not= l nil) \n          (conj l i)\n          (if (&gt;= i 1)\n            (recur (dec i) nil)\n            nil))))))\n(defn decompose [n]\n  (let [l (decompAux (* n n) (- n 1))]\n    (if l\n      (reverse l)\n      nil)))\n</code></pre>\n\n<p>In Ruby I get</p>\n\n<pre><code>decompose(7654321) --&gt; [6, 10, 69, 3912, 7654320].\n</code></pre>\n\n<p>In Clojure:</p>\n\n<pre><code>(decompose 7654321) --&gt; (1 1 2 3 11 69 3912 7654320)\n</code></pre>\n\n<p>The Clojure one is a tracing of the Ruby one but the results are different. Where is the default? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-4", "partials"], "comments": [{"owner": {"reputation": 5008, "user_id": 1387338, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e030cb95a6159e7996c4264ffd38f010?s=128&d=identicon&r=PG", "display_name": "steakchaser", "link": "https://stackoverflow.com/users/1387338/steakchaser"}, "edited": false, "score": 0, "creation_date": 1429114767, "post_id": 29655496, "comment_id": 47450847, "body": "Could you please post the contents of the form partial?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1429114773, "post_id": 29655496, "comment_id": 47450856, "body": "It&#39;d be nice if you amend your question to include the form code."}, {"owner": {"reputation": 10364, "user_id": 877472, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e73a159e3f7790ee019673c37da48a59?s=128&d=identicon&r=PG", "display_name": "Paul Richter", "link": "https://stackoverflow.com/users/877472/paul-richter"}, "edited": false, "score": 1, "creation_date": 1429115214, "post_id": 29655496, "comment_id": 47451112, "body": "Your indentation seems to be messed up a bit, but from the looks of it, you&#39;ve got a form within a form. Any reason for that?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1429115700, "post_id": 29655496, "comment_id": 47451392, "body": "The second <code>&lt;form&gt;</code> has no <code>action</code>, so it&#39;s incapable of doing anything."}, {"owner": {"reputation": 103, "user_id": 4489013, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/rswoK.png?s=128&g=1", "display_name": "Jos&#233; Toy", "link": "https://stackoverflow.com/users/4489013/jos%c3%a9-toy"}, "edited": false, "score": 0, "creation_date": 1429205104, "post_id": 29655496, "comment_id": 47500746, "body": "I have simplified the partial and I still do not get any type of action from the submit button."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4489013, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/rswoK.png?s=128&g=1", "display_name": "Jos&#233; Toy", "link": "https://stackoverflow.com/users/4489013/jos%c3%a9-toy"}, "edited": false, "score": 0, "creation_date": 1429116897, "post_id": 29655950, "comment_id": 47452097, "body": "Removing that &#39;end&#39; brings up an error:  syntax error, unexpected end-of-input, expecting keyword_end"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 2, "creation_date": 1429117175, "post_id": 29655950, "comment_id": 47452271, "body": "The &lt;% end %&gt; for the iteration over @inquery.error_messages is misplaced (as it was in the question) - another good reason to switch to haml"}, {"owner": {"reputation": 55, "user_id": 420958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdf2c94aca2b0e95cd68fed9535c4ca?s=128&d=identicon&r=PG", "display_name": "Kaushik", "link": "https://stackoverflow.com/users/420958/kaushik"}, "edited": false, "score": 0, "creation_date": 1429117348, "post_id": 29655950, "comment_id": 47452373, "body": "Updated the code snippet to add an &lt;% end %&gt; for those pesky full_messages"}, {"owner": {"reputation": 103, "user_id": 4489013, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/rswoK.png?s=128&g=1", "display_name": "Jos&#233; Toy", "link": "https://stackoverflow.com/users/4489013/jos%c3%a9-toy"}, "edited": false, "score": 0, "creation_date": 1429171320, "post_id": 29655950, "comment_id": 47475838, "body": "I&#39;ve played with the code quite a bit, including trying to pull the error messages out as well. However, no matter what change I make to that partial regarding the &#39;ends&#39; I still can&#39;t get the button to submit. There is still no action happening in the terminal"}], "tags": [], "owner": {"reputation": 55, "user_id": 420958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdf2c94aca2b0e95cd68fed9535c4ca?s=128&d=identicon&r=PG", "display_name": "Kaushik", "link": "https://stackoverflow.com/users/420958/kaushik"}, "is_accepted": false, "score": 1, "last_activity_date": 1429117269, "last_edit_date": 1429117269, "creation_date": 1429115878, "answer_id": 29655950, "question_id": 29655496, "link": "https://stackoverflow.com/questions/29655496/my-rendered-partial-form-appears-but-is-not-submitting/29655950#29655950", "title": "My rendered partial &#39;_form&#39; appears, but is not submitting", "body": "<p>Your partial has 2 forms. The one which submits to inqueries#create is an empty form with no submit button, the other which has no action contains the text fields and the submit action.</p>\n\n<p>The form_for tag will create the html  tags, you dont need to specify them again.</p>\n\n<p>Tip - Switch to <a href=\"http://haml.info/\" rel=\"nofollow\">haml</a>. You won't ever look back at erb :)</p>\n\n<p>This should work (not tested) -</p>\n\n<pre><code>&lt;%= form_for(@inquery) do |f| %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n        &lt;% if @inquery.errors.any? %&gt;\n            &lt;h2&gt;\n                &lt;%= pluralize(@inquery.errors.count, \"error\") %&gt; prohibited this inquery from being saved:\n            &lt;/h2&gt;\n            &lt;ul&gt;\n                &lt;% @inquery.errors.full_messages.each do |message| %&gt;\n                  &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n                &lt;% end %&gt;\n            &lt;/ul&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n    &lt;br /&gt;\n    &lt;div class=\"col-lg-12\"&gt;\n        &lt;div class=\"form-group col-lg-4\"&gt;\n            &lt;%= f.label t('.name') %&gt;&lt;br&gt;\n            &lt;%= f.text_field :name, class: \"form-control\" %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"form-group col-lg-4\"&gt;\n          &lt;%= f.label t('.email') %&gt;&lt;br&gt;\n          &lt;%= f.text_field :email, class: \"form-control\" %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"form-group col-lg-4\"&gt;\n          &lt;%= f.label t('.phone') %&gt;&lt;br&gt;\n          &lt;%= f.text_field :phone, class: \"form-control\" %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"clearfix\"&gt;&lt;/div&gt;\n        &lt;div class=\"form-group col-lg-12\"&gt;\n            &lt;%= f.label t('.message') %&gt;&lt;br&gt;\n            &lt;%= f.text_area :message, rows: 8, class: \"form-control\"%&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-group col-lg-12\"&gt;\n            &lt;input type=\"hidden\" name=\"save\" value=\"contact\"&gt;\n            &lt;%= f.submit t('.submit'), class: \"btn btn-primary\" %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 4489013, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/rswoK.png?s=128&g=1", "display_name": "Jos&#233; Toy", "link": "https://stackoverflow.com/users/4489013/jos%c3%a9-toy"}, "is_accepted": false, "score": 0, "last_activity_date": 1429279616, "creation_date": 1429279616, "answer_id": 29701538, "question_id": 29655496, "link": "https://stackoverflow.com/questions/29655496/my-rendered-partial-form-appears-but-is-not-submitting/29701538#29701538", "title": "My rendered partial &#39;_form&#39; appears, but is not submitting", "body": "<p>Figured it out. Foolish error,\nMy welcome page is a bootstrap theme that I hadn't fully gone over. I had imported some unnecessary javascript files that I think were blocking the form.</p>\n"}], "owner": {"reputation": 103, "user_id": 4489013, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/rswoK.png?s=128&g=1", "display_name": "Jos&#233; Toy", "link": "https://stackoverflow.com/users/4489013/jos%c3%a9-toy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429279616, "creation_date": 1429114540, "last_edit_date": 1429205065, "question_id": 29655496, "link": "https://stackoverflow.com/questions/29655496/my-rendered-partial-form-appears-but-is-not-submitting", "title": "My rendered partial &#39;_form&#39; appears, but is not submitting", "body": "<p>Ruby 2.1.5 on Rails 4.2.0:</p>\n\n<p>I have two directories. One directory is a rails-generate scaffold named 'inqueries'. The other directory is named 'welcome', which only houses a landing paged named index.html.erb. The inquery form works &amp; submits fine as long as I'm using the view from the actual 'inquery' scaffold/directory. </p>\n\n<p>I am able to render the inquery _form on my index.html.erb landing page using : </p>\n\n<pre><code> &lt;%= render partial: \"inqueries/form\", locals: {inquery: @Inquery} %&gt;\n</code></pre>\n\n<p>However, this JUST renders the form. When I hit the submit button, no errors, flash messages, or inquery is submitted. It is complete non-action, including on my rails terminal.</p>\n\n<p>How can I properly make the form work on my landing page?</p>\n\n<p>Here is my welcome_controller.rb file. This controller handles the landing page where I am trying to render the inquery scaffold's form:</p>\n\n<pre><code>class WelcomeController &lt; ApplicationController\n\n      def index\n        @inquery = Inquery.new\n        render layout: false\n      end\n    end\n</code></pre>\n\n<p>This is my new rails scaffold-generated method in the inqueries_controller.rb:</p>\n\n<pre><code>  def new\n    @inquery = Inquery.new\n    respond_with(@inquery)\n  end\n</code></pre>\n\n<p>Sorry, Here is the Inquery _form itself:</p>\n\n<pre><code>&lt;%= form_for(@inquery) do |f| %&gt;\n        &lt;div class=\"form-group col-lg-4\"&gt;\n            &lt;%= f.label t('.name') %&gt;&lt;br&gt;\n            &lt;%= f.text_field :name, class: \"form-control\" %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"form-group col-lg-4\"&gt;\n          &lt;%= f.label t('.email') %&gt;&lt;br&gt;\n          &lt;%= f.text_field :email, class: \"form-control\" %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"form-group col-lg-4\"&gt;\n          &lt;%= f.label t('.phone') %&gt;&lt;br&gt;\n          &lt;%= f.text_field :phone, class: \"form-control\" %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"clearfix\"&gt;&lt;/div&gt;\n        &lt;div class=\"form-group col-lg-12\"&gt;\n            &lt;%= f.label t('.message') %&gt;&lt;br&gt;\n            &lt;%= f.text_area :message, rows: 8, class: \"form-control\"%&gt;\n        &lt;/div&gt;\n            &lt;%= f.submit t('.submit'), class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>EDIT 2: I saw there were a couple of suggestions with the logic. I have simplified the partial just to see if I could get it to work and it still does not submit properly outside of its directory. I am new to rails, do I need to render a new action in the second directory that I am calling it into?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "import-from-excel"], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 3738653, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/SdwJX.jpg?s=128&g=1", "display_name": "Christina Leuci", "link": "https://stackoverflow.com/users/3738653/christina-leuci"}, "edited": false, "score": 0, "creation_date": 1429115658, "post_id": 29655683, "comment_id": 47451371, "body": "Hi! Sorry if the picture could have used more context but I think it&#39;s under the main models folder, not the concerns subfolder. If I&#39;m understanding you correctly I just put in this <code>s = File.join(Rails.root, &#39;app&#39;,&#39;models&#39;, &#39;properties.xslx&#39;)</code> which produces <code>&quot;&#47;Users&#47;christinaleuci&#47;Programming&#47;Curate&#47;Curate&#47;app&#47;models&#47;&zwnj;&#8203;properties.xslx&quot;</code>. When I ran this as an Excelx I got <code>use Roo::Excelx.new to handle .xlsx spreadsheet files. This has .xslx TypeError: &#47;Users&#47;christinaleuci&#47;Programming&#47;Curate&#47;Curate&#47;app&#47;models&#47;p&zwnj;&#8203;roperties.xslx is not an Excel-xlsx file</code>."}, {"owner": {"reputation": 31, "user_id": 4788029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dzQ2iPZ69Ks/AAAAAAAAAAI/AAAAAAAAAE8/yZBVOVpKg2E/photo.jpg?sz=128", "display_name": "Christopher Gross", "link": "https://stackoverflow.com/users/4788029/christopher-gross"}, "reply_to_user": {"reputation": 203, "user_id": 3738653, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/SdwJX.jpg?s=128&g=1", "display_name": "Christina Leuci", "link": "https://stackoverflow.com/users/3738653/christina-leuci"}, "edited": false, "score": 1, "creation_date": 1429117187, "post_id": 29655683, "comment_id": 47452277, "body": "You are correct, I saw the folder and just assumed it was open instead of looking more closely. You are getting the file now so at this point you just need to get the file in the correct format or use the correct Roo module. Just in case it needs to be mentioned: naming something &quot;*.xlsx&quot; does not automatically make it a valid Excel XSLX file."}, {"owner": {"reputation": 203, "user_id": 3738653, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/SdwJX.jpg?s=128&g=1", "display_name": "Christina Leuci", "link": "https://stackoverflow.com/users/3738653/christina-leuci"}, "edited": false, "score": 0, "creation_date": 1429120751, "post_id": 29655683, "comment_id": 47454490, "body": "Yes I&#39;m aware, I&#39;ve double and triple checked the file. It&#39;s an Open Office XML spreadsheet xlsx file. I&#39;ve just converted it into an xsl file with the same error. I&#39;ll probably look into another gem file since Roo isn&#39;t working properly at the moment. Thanks for your help!"}, {"owner": {"reputation": 31, "user_id": 4788029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dzQ2iPZ69Ks/AAAAAAAAAAI/AAAAAAAAAE8/yZBVOVpKg2E/photo.jpg?sz=128", "display_name": "Christopher Gross", "link": "https://stackoverflow.com/users/4788029/christopher-gross"}, "reply_to_user": {"reputation": 203, "user_id": 3738653, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/SdwJX.jpg?s=128&g=1", "display_name": "Christina Leuci", "link": "https://stackoverflow.com/users/3738653/christina-leuci"}, "edited": false, "score": 1, "creation_date": 1429122728, "post_id": 29655683, "comment_id": 47455748, "body": "Open Office may be able to read and save to xlsx in a way that Excel would understand it but Roo may not. I would submit this information to the Roo developers or at the very least check their issue tracker to see if anyone else has issues with Excel formats exported from Open Office."}, {"owner": {"reputation": 203, "user_id": 3738653, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/SdwJX.jpg?s=128&g=1", "display_name": "Christina Leuci", "link": "https://stackoverflow.com/users/3738653/christina-leuci"}, "edited": false, "score": 0, "creation_date": 1429122947, "post_id": 29655683, "comment_id": 47455891, "body": "Thanks Chris, I will continue researching!"}], "tags": [], "owner": {"reputation": 31, "user_id": 4788029, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dzQ2iPZ69Ks/AAAAAAAAAAI/AAAAAAAAAE8/yZBVOVpKg2E/photo.jpg?sz=128", "display_name": "Christopher Gross", "link": "https://stackoverflow.com/users/4788029/christopher-gross"}, "is_accepted": false, "score": 3, "last_activity_date": 1609797151, "last_edit_date": 1609797151, "creation_date": 1429115080, "answer_id": 29655683, "question_id": 29655384, "link": "https://stackoverflow.com/questions/29655384/xlsx-file-not-found-rails-file-format-not-correct/29655683#29655683", "title": "XLSX file not found Rails, file format not correct", "body": "<p>The correct path to your file is, assuming this models/concerns directory is within app:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>File.join(Rails.root, 'app','models','concerns', 'properties.xslx')\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 3738653, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/SdwJX.jpg?s=128&g=1", "display_name": "Christina Leuci", "link": "https://stackoverflow.com/users/3738653/christina-leuci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1125, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1609797151, "creation_date": 1429114234, "last_edit_date": 1429116514, "question_id": 29655384, "link": "https://stackoverflow.com/questions/29655384/xlsx-file-not-found-rails-file-format-not-correct", "title": "XLSX file not found Rails, file format not correct", "body": "<p>I'm working on a Rails application that will be reading into an XLSX file called properties. I constantly get the error that the file does not exist.</p>\n\n<p>Here is my Wardrobe model that is reading into the spreadsheet:</p>\n\n<pre><code>require 'rubygems'\nrequire 'roo'\nrequire 'json'\n\ndef\n    ...\n    find_properties\n  self.save!\nend\n\ndef find_properties\n  binding.pry\n  # xlsx = Roo::Spreadsheet.open('./Properties.xlsx')\n  # xlsx = Roo::Excelx.new(\"./Properties.xlsx\")\n  book = Roo::Spreadsheet.open('./Properties.csv')\n  book = Roo::CSV.new('Properties.csv')\n  sheets = book.sheets\nend\n</code></pre>\n\n<p>My Gemfile contains the 'roo' gem and two gems I gathered from similar questions</p>\n\n<p><code>gem 'roo'\ngem 'rubyXL'\ngem 'rubyzip'</code></p>\n\n<p><img src=\"https://i.stack.imgur.com/Sczfg.png\" alt=\"\">\nAbove you can see I'm attempting to access the properties.xlsx file but it can not be found.</p>\n\n<p><img src=\"https://i.stack.imgur.com/mqMdM.png\" alt=\"\">\nHere you can see the Properties.CSV file can be accessed but nothing is shown to be inside it</p>\n\n<p>Currently these two files are in my \"models\" folder, I'm planning on placing them inside my public folder once I've solved this file access issue.</p>\n\n<p><img src=\"https://i.stack.imgur.com/LUdUD.png\" alt=\"enter image description here\"></p>\n\n<p>I've also just used RubyXL as another option, no bueno, it reads there is a file format error and it cannot be read as an XLSX file.</p>\n\n<p><img src=\"https://i.stack.imgur.com/6uO0T.png\" alt=\"RubyXL error\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/6egHu.png\" alt=\"enter image description here\"></p>\n\n<p>From my research I've come across these questions: <a href=\"https://github.com/rubyzip/rubyzip/issues/105\" rel=\"nofollow noreferrer\">unzipping problems xlsx</a>, <a href=\"https://groups.google.com/forum/#!topic/ruby-roo/MJLL9zbcvNo\" rel=\"nofollow noreferrer\">reading issues XLSX</a>, <a href=\"http://community.spiceworks.com/topic/331441-excel-cannot-open-file-file-xlsx-because-file-format-or-extension-is-not-valid\" rel=\"nofollow noreferrer\">file format error</a></p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1429113812, "post_id": 29655171, "comment_id": 47450193, "body": "The href is where you link to, I assume you still want to link <a href=\"http://limanueva.cl/item/acd-website-html-template/5689597?ref=imagestudio\" rel=\"nofollow noreferrer\">here</a> but with the image as the link?  So you want <code>&lt;a class=&#39;btn btn-contrast btn-lg fadeInRight animated&#39; href=&#39;http:&#47;&#47;limanueva.cl&#47;item&#47;acd-website-html-template&#47;568&zwnj;&#8203;9597?ref=imagestudio&zwnj;&#8203;&#39; &gt;&lt;%= image_tag &#39;fondos&#47;fondo1.png&#39; %&gt;&lt;&#47;a&gt;</code>"}, {"owner": {"reputation": 11, "user_id": 3601815, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9e89ca7f92a253d05b510cad3a4727c3?s=128&d=identicon&r=PG&f=1", "display_name": "jmfernandez", "link": "https://stackoverflow.com/users/3601815/jmfernandez"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1429114198, "post_id": 29655171, "comment_id": 47450474, "body": "The <code>href=&#39;http:&#47;&#47;limanueva.cl&#47;item&#47;acd-website-html-template&#47;568&zwnj;&#8203;9597?ref=imagestudio&zwnj;&#8203;\u200c\u200b&#39; </code> need to replace the following code: <code>&lt;%= image_tag &#39;fondos&#47;fondo1.png&#39; %&gt;</code>"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1429114336, "post_id": 29655171, "comment_id": 47450581, "body": "Then I don&#39;t understand what you&#39;re trying to do."}, {"owner": {"reputation": 11, "user_id": 3601815, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9e89ca7f92a253d05b510cad3a4727c3?s=128&d=identicon&r=PG&f=1", "display_name": "jmfernandez", "link": "https://stackoverflow.com/users/3601815/jmfernandez"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1429114630, "post_id": 29655171, "comment_id": 47450774, "body": "I need you in the href can display an image on a route: <b>fondos/ fondo1.jpg</b> and no longer to the next test route: <b><a href=\"http://limanueva.cl/item/acd-website-html-template/5689597?ref=\" rel=\"nofollow noreferrer\">limanueva.cl/item/acd-website-html-template/5689597?ref=</a> Imagestudio</b>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3601815, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9e89ca7f92a253d05b510cad3a4727c3?s=128&d=identicon&r=PG&f=1", "display_name": "jmfernandez", "link": "https://stackoverflow.com/users/3601815/jmfernandez"}, "edited": false, "score": 0, "creation_date": 1429115742, "post_id": 29655511, "comment_id": 47451410, "body": "This HTML code: <b><code>&lt;a class=&#39;btn btn-contrast btn-lg fadeInRight animated&#39; href=&#39;http:&#47;&#47;www.fondos&#47;fondo1&#39;&gt;                       Fondo 1                     &lt;&#47;a&gt; </code></b>  I need to convert the syntax rails 4 and the href that directs to a page I want change it to be routed to a picture of my project."}], "tags": [], "owner": {"reputation": 634, "user_id": 3407381, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/KqiQt.jpg?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3407381/joshua"}, "is_accepted": true, "score": 0, "last_activity_date": 1429116823, "last_edit_date": 1429116823, "creation_date": 1429114581, "answer_id": 29655511, "question_id": 29655171, "link": "https://stackoverflow.com/questions/29655171/html-code-syntax-pass-rails-4/29655511#29655511", "title": "HTML code syntax pass rails 4", "body": "<p><code>&lt;%= image_tag 'fondos/fondo1.png %&gt;</code> - Outputs an html image tag.<br>\n<strong>Example:</strong> <code>&lt;img src='path/to/fondos/fondo1.png'/&gt;</code></p>\n\n<p><code>&lt;%= image_path 'fondos/fondo1.png%&gt;</code> - Outputs the path to your image.<br>\n<strong>Example:</strong> <code>path/to/fondos/fondo1.png</code></p>\n\n<p><strong>If I understand correctly,</strong> you want to display an image that links to a site.</p>\n\n<pre><code> &lt;a href='http://lima... ...9597?ref=imagestudio' class='classes for link'&gt;\n      &lt;%= image_tag 'fondos/fondo1.png', :class =&gt; 'classes for image' %&gt;\n &lt;/a&gt;\n</code></pre>\n\n<p><strong>I did not understand correctly,</strong> you want link to the image.</p>\n\n<pre><code>  &lt;a href='&lt;%= image_url 'fondos/fondo1.png'%&gt;'&gt;Link&lt;/a&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3601815, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9e89ca7f92a253d05b510cad3a4727c3?s=128&d=identicon&r=PG&f=1", "display_name": "jmfernandez", "link": "https://stackoverflow.com/users/3601815/jmfernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 29655511, "answer_count": 1, "score": -3, "last_activity_date": 1429116823, "creation_date": 1429113600, "question_id": 29655171, "link": "https://stackoverflow.com/questions/29655171/html-code-syntax-pass-rails-4", "title": "HTML code syntax pass rails 4", "body": "<p>I need to make the following statement to code rails 4.1 <code>&lt;a class='btn btn-contrast btn-lg fadeInRight animated' href='http://limanueva.cl/item/acd-website-html-template/5689597?ref=imagestudio'&gt;</code>  </p>\n\n<p>Make the following change:</p>\n\n<p><code>&lt;a class='btn btn-contrast btn-lg fadeInRight animated' href='&lt;%= image_tag \"fondos/fondo1.png\" %&gt;'&gt;</code>  </p>\n\n<p>And does not show me the picture, please help</p>\n"}, {"tags": ["ruby", "gem", "twitter-gem"], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 4639556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1379204003a667857ef9c2510d516581?s=128&d=identicon&r=PG&f=1", "display_name": "ams", "link": "https://stackoverflow.com/users/4639556/ams"}, "is_accepted": false, "score": 0, "last_activity_date": 1429115778, "creation_date": 1429115778, "answer_id": 29655911, "question_id": 29655149, "link": "https://stackoverflow.com/questions/29655149/fetching-retweet-using-twitter-gem-in-ruby/29655911#29655911", "title": "Fetching retweet using twitter gem in ruby", "body": "<p>The <code>retweet_count</code> method returns a <em>read only</em> integer. As shown is the documentation <a href=\"http://www.rubydoc.info/gems/twitter/Twitter/Tweet\" rel=\"nofollow\">Ruby's Tweet documentation</a>. It is immutable, I suppose.</p>\n\n<p>You should try this <code>puts  \"retweets: #{object.retweet_count}\"</code>.</p>\n\n<p>Also, you don't need to change every attribute to string to print it. Just use it as shown above and you should do good.</p>\n"}], "owner": {"reputation": 295, "user_id": 1482084, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/dc47677120f124a7ad817c36b3d1b072?s=128&d=identicon&r=PG", "display_name": "user1482084", "link": "https://stackoverflow.com/users/1482084/user1482084"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429115778, "creation_date": 1429113559, "question_id": 29655149, "link": "https://stackoverflow.com/questions/29655149/fetching-retweet-using-twitter-gem-in-ruby", "title": "Fetching retweet using twitter gem in ruby", "body": "<p>I have been using twitter gem in ruby to fetch various attributes of a tweet. I have been successful in fetching all the attributes. However when i try to fetch retweet, it always gives me the value of 0.</p>\n\n<pre><code>require 'twitter'\ngeolocate = Twitter::Geo.new\nclient = Twitter::Streaming::Client.new do |config|\n   config.consumer_secret   =\"XXXXXXXXXXXXXXXXX\" \n   config.consumer_key       = \"YYYYYYYYYYYYYYYYY\"\n   config.access_token        =\"ZZZZZZZZZZZZZZZZZ\"\n   config.access_token_secret =\"AAAAAAAAAAAAAAAAA\"\nend\nclient.filter(:locations =&gt; \"-122.75,36.8,-121.75,37.8,-74,40,-73,41,-84.32,33.84,-75.45,36.58\") do |object| \nif(object.is_a?(Twitter::Entities))\n if (object.geo.longitude.nil? == false)\n   if(object.hashtags?) \n      puts  \"Tweet: \" +object.text.to_s if object.is_a?(Twitter::Tweet)\n      puts  \"Created At: \" +object.created_at.to_s\n      puts  \"UserName: \" +object.user.name.to_s\n      puts  \"retweets: \" +object.retweet_count.to_s\n     end\n   end\n  end\nend\n</code></pre>\n\n<p>The retweet always gives me the value of zero<br/>\n<strong>Below is the sample output for some users.</strong></p>\n\n<pre><code>Tweet: #stevienicks #vibez champagne satin shirt/vest with tail... Has back waist tie, small/medium $32\u2026 https://t.co/m7I1rTEUeM\nCreated At: 2015-04-15 08:03:20 -0400\nUserName: MAHPs Vintage \nretweets: 0\n______________________________________________\n\nTweet: Kicking off day 2 of our spring leadership conference with a continuation of @JohnCMaxwell 's 5 levels of #leadership http://t.co/hNNC0tdYni\nCreated At: 2015-04-15 08:03:20 -0400\nUserName: Hendrick Automotive \nretweets: 0\n_____________________________________________\n\nTweet: Thanks God for another day!\nObrigado Deus por mais um dia \n#GoodMorning\u2026 https://t.co/klMwtfr7w3\nCreated At: 2015-04-15 08:03:29 -0400\nUserName: Leonnardo Lima\nretweets: 0\n______________________________________________\nTweet: \ud83c\udfc0\ud83d\udc99\ud83d\ude08 #duke #whereisthegiraffeemoji #champs @ Monroe your Boat \ud83c\udfe1\u26f5\ufe0f https://t.co/bw1AV67GMY\nCreated At: 2015-04-15 08:03:30 -0400\nUserName: Gossip Garner\nretweets: 0\n</code></pre>\n\n<p>So is there a way to get <strong> retweets by a particular user </strong><br/>\nAny help is much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 2249001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bw0ht.png?s=128&g=1", "display_name": "aspencer8111", "link": "https://stackoverflow.com/users/2249001/aspencer8111"}, "is_accepted": true, "score": 3, "last_activity_date": 1429113831, "creation_date": 1429113831, "answer_id": 29655250, "question_id": 29655068, "link": "https://stackoverflow.com/questions/29655068/ruby-on-rails-generate-devise/29655250#29655250", "title": "Ruby on Rails - generate devise", "body": "<p>As to the warning about rubygems, you can run:</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>Then make sure you do the following in order:</p>\n\n<ol>\n<li>Add devise to your Gemfile</li>\n<li>Run <code>bundle</code> in the command line</li>\n<li>Run <code>rails g devise:install</code> in the command line</li>\n<li>Run <code>rails generate devise User</code> in the command line.</li>\n</ol>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 3405, "user_id": 146745, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fda91509e401365df43fe5eba3fa190b?s=128&d=identicon&r=PG", "display_name": "andrej", "link": "https://stackoverflow.com/users/146745/andrej"}, "is_accepted": false, "score": 0, "last_activity_date": 1431511594, "creation_date": 1431511594, "answer_id": 30211643, "question_id": 29655068, "link": "https://stackoverflow.com/questions/29655068/ruby-on-rails-generate-devise/30211643#30211643", "title": "Ruby on Rails - generate devise", "body": "<p>Rubygems update:</p>\n\n<pre><code>gem install rubygems-update\nupdate_rubygems\n</code></pre>\n\n<p>should help to get rid of that rubygems 2.0.14 warning.</p>\n"}], "owner": {"reputation": 3135, "user_id": 999885, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/bcb4c25d35f72623890eb3eda86a8f3a?s=128&d=identicon&r=PG", "display_name": "omarsafwany", "link": "https://stackoverflow.com/users/999885/omarsafwany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 29655250, "answer_count": 2, "score": 1, "last_activity_date": 1431511594, "creation_date": 1429113325, "question_id": 29655068, "link": "https://stackoverflow.com/questions/29655068/ruby-on-rails-generate-devise", "title": "Ruby on Rails - generate devise", "body": "<p>I am new to Ruby on Rails. Just installed it and upgraded rubygems as well. When I type <code>ruby new project</code> I get the following at the end:</p>\n\n<pre><code>Use `bundle show [gemname]` to see where a bundled gem is installed.\n         run  bundle exec spring binstub --all\nWarning: You're using Rubygems 2.0.14 with Spring. Upgrade to at least Rubygems 2.1.0 and run `gem pristine --all` for better startup performance.\n* bin/rake: spring inserted\n* bin/rails: spring inserted\n</code></pre>\n\n<p>I checked ruby version and it was: </p>\n\n<pre><code>ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin14]\n</code></pre>\n\n<p>Rails version:</p>\n\n<pre><code>Rails 4.2.0\n</code></pre>\n\n<p>I tried to install <code>devise</code> by adding the following command <code>gem 'devise'</code> to <code>Gemfile</code>, then ran <code>gem install devise</code> to get the following:</p>\n\n<pre><code>Fetching: thor-0.19.1.gem (100%)\nSuccessfully installed thor-0.19.1\nFetching: thread_safe-0.3.5.gem (100%)\nSuccessfully installed thread_safe-0.3.5\nFetching: tzinfo-1.2.2.gem (100%)\nSuccessfully installed tzinfo-1.2.2\nFetching: i18n-0.7.0.gem (100%)\nSuccessfully installed i18n-0.7.0\nFetching: activesupport-4.2.1.gem (100%)\nSuccessfully installed activesupport-4.2.1\nFetching: rails-deprecated_sanitizer-1.0.3.gem (100%)\nSuccessfully installed rails-deprecated_sanitizer-1.0.3\nFetching: mini_portile-0.6.2.gem (100%)\nSuccessfully installed mini_portile-0.6.2\nFetching: nokogiri-1.6.6.2.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed nokogiri-1.6.6.2\nFetching: rails-dom-testing-1.0.6.gem (100%)\nSuccessfully installed rails-dom-testing-1.0.6\nFetching: loofah-2.0.1.gem (100%)\nSuccessfully installed loofah-2.0.1\nFetching: rails-html-sanitizer-1.0.2.gem (100%)\nSuccessfully installed rails-html-sanitizer-1.0.2\nFetching: erubis-2.7.0.gem (100%)\nSuccessfully installed erubis-2.7.0\nFetching: builder-3.2.2.gem (100%)\nSuccessfully installed builder-3.2.2\nFetching: actionview-4.2.1.gem (100%)\nSuccessfully installed actionview-4.2.1\nFetching: rack-1.6.0.gem (100%)\nSuccessfully installed rack-1.6.0\nFetching: rack-test-0.6.3.gem (100%)\nSuccessfully installed rack-test-0.6.3\nFetching: actionpack-4.2.1.gem (100%)\nSuccessfully installed actionpack-4.2.1\nFetching: railties-4.2.1.gem (100%)\nSuccessfully installed railties-4.2.1\nFetching: responders-2.1.0.gem (100%)\nSuccessfully installed responders-2.1.0\nFetching: bcrypt-3.1.10.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed bcrypt-3.1.10\nFetching: orm_adapter-0.5.0.gem (100%)\nSuccessfully installed orm_adapter-0.5.0\nFetching: warden-1.2.3.gem (100%)\nSuccessfully installed warden-1.2.3\nFetching: devise-3.4.1.gem (100%)\nSuccessfully installed devise-3.4.1\nParsing documentation for thor-0.19.1\nInstalling ri documentation for thor-0.19.1\nParsing documentation for thread_safe-0.3.5\nInstalling ri documentation for thread_safe-0.3.5\nParsing documentation for tzinfo-1.2.2\nInstalling ri documentation for tzinfo-1.2.2\nParsing documentation for i18n-0.7.0\nInstalling ri documentation for i18n-0.7.0\nParsing documentation for activesupport-4.2.1\nInstalling ri documentation for activesupport-4.2.1\nParsing documentation for rails-deprecated_sanitizer-1.0.3\nInstalling ri documentation for rails-deprecated_sanitizer-1.0.3\nParsing documentation for mini_portile-0.6.2\nInstalling ri documentation for mini_portile-0.6.2\nParsing documentation for nokogiri-1.6.6.2\nInstalling ri documentation for nokogiri-1.6.6.2\nParsing documentation for rails-dom-testing-1.0.6\nInstalling ri documentation for rails-dom-testing-1.0.6\nParsing documentation for loofah-2.0.1\nInstalling ri documentation for loofah-2.0.1\nParsing documentation for rails-html-sanitizer-1.0.2\nInstalling ri documentation for rails-html-sanitizer-1.0.2\nParsing documentation for erubis-2.7.0\nInstalling ri documentation for erubis-2.7.0\nParsing documentation for builder-3.2.2\nInstalling ri documentation for builder-3.2.2\nParsing documentation for actionview-4.2.1\nInstalling ri documentation for actionview-4.2.1\nParsing documentation for rack-1.6.0\nInstalling ri documentation for rack-1.6.0\nParsing documentation for rack-test-0.6.3\nInstalling ri documentation for rack-test-0.6.3\nParsing documentation for actionpack-4.2.1\nInstalling ri documentation for actionpack-4.2.1\nParsing documentation for railties-4.2.1\nInstalling ri documentation for railties-4.2.1\nParsing documentation for responders-2.1.0\nInstalling ri documentation for responders-2.1.0\nParsing documentation for bcrypt-3.1.10\nInstalling ri documentation for bcrypt-3.1.10\nParsing documentation for orm_adapter-0.5.0\nInstalling ri documentation for orm_adapter-0.5.0\nParsing documentation for warden-1.2.3\nInstalling ri documentation for warden-1.2.3\nParsing documentation for devise-3.4.1\nInstalling ri documentation for devise-3.4.1\nDone installing documentation for thor, thread_safe, tzinfo, i18n, activesupport, rails-deprecated_sanitizer, mini_portile, nokogiri, rails-dom-testing, loofah, rails-html-sanitizer, erubis, builder, actionview, rack, rack-test, actionpack, railties, responders, bcrypt, orm_adapter, warden, devise after 21 seconds\n23 gems installed\n</code></pre>\n\n<p>I tried then to run the following command: <code>rails g devise user</code> but I still keep getting the following: <code>Warning: You're using Rubygems 2.0.14 with Spring. Upgrade to at least Rubygems 2.1.0 and run</code>gem pristine --all<code>for better startup performance.</code> and nothing happens.</p>\n\n<p>How can I proceed?!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "soap", "savon"], "answers": [{"tags": [], "owner": {"reputation": 383, "user_id": 3968501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24deee5accf2f7bc2e6376a751cb0001?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Smith", "link": "https://stackoverflow.com/users/3968501/brian-smith"}, "is_accepted": true, "score": 4, "last_activity_date": 1509639584, "last_edit_date": 1509639584, "creation_date": 1429113740, "answer_id": 29655225, "question_id": 29654837, "link": "https://stackoverflow.com/questions/29654837/modifying-soap-xml-namespace-with-savon-gem/29655225#29655225", "title": "Modifying SOAP XML namespace with Savon gem", "body": "<p>I finally figured it out. All I needed to do was add the following line to my Savon call:</p>\n\n<pre><code>namespace: \"\"\n</code></pre>\n\n<p>So my final Savon call looks like:</p>\n\n<pre><code>apiClient = Savon.client(\n    endpoint: \"https://www.intg.pathway.verosapps.com/VerosPathway.svc\",\n    namespace: \"\", \n    env_namespace: :soapenv, \n    namespace_identifier: nil, \n    logger: Rails.logger, \n    log_level: :debug, \n    log: true, \n    :pretty_print_xml =&gt; true, \n    ssl_version: :TLSv1, \n    wsdl: 'https://www.intg.pathway.verosapps.com/VerosPathway.svc?wsdl'\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 693, "user_id": 2282559, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ZSiw7.jpg?s=128&g=1", "display_name": "Abid Iqbal", "link": "https://stackoverflow.com/users/2282559/abid-iqbal"}, "is_accepted": false, "score": 4, "last_activity_date": 1449493665, "last_edit_date": 1449493665, "creation_date": 1449493536, "answer_id": 34134311, "question_id": 29654837, "link": "https://stackoverflow.com/questions/29654837/modifying-soap-xml-namespace-with-savon-gem/34134311#34134311", "title": "Modifying SOAP XML namespace with Savon gem", "body": "<p>you can simply pass the hash with the options as below:</p>\n\n<pre><code>client = Savon.client(\n     wsdl: \"https://example.com?wsdl\",\n     log: true,\n     log_level: :debug,\n     pretty_print_xml: true,\n     namespace_identifier: :mes,\n     namespaces: {\"xmlns:mes\" =&gt; \"http://example.com/messages/\",\"xmlns:glob\"=&gt;\"http://example.com/globals\"}                      \n) \n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 3968501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24deee5accf2f7bc2e6376a751cb0001?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Smith", "link": "https://stackoverflow.com/users/3968501/brian-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2265, "favorite_count": 0, "accepted_answer_id": 29655225, "answer_count": 2, "score": 4, "last_activity_date": 1509639584, "creation_date": 1429112799, "question_id": 29654837, "link": "https://stackoverflow.com/questions/29654837/modifying-soap-xml-namespace-with-savon-gem", "title": "Modifying SOAP XML namespace with Savon gem", "body": "<p>I'm attempting to modify one of the namespaces in my Savon SOAP call. Here is how my request looks:</p>\n\n<pre><code>HTTPI GET request to www.intg.pathway.verosapps.com (excon)\nSOAP request: https://www.intg.pathway.verosapps.com/VerosPathway.svc\nSOAPAction: \"urn:IVerosPathway/VerosPathway_Ping\", Content-Type: text/xml;charset=UTF-8, Content-Length: 434\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;soapenv:Envelope xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://tempuri.org/\" xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n  &lt;soapenv:Body&gt;\n    &lt;VerosPathway_Ping&gt;\n      &lt;request&gt;\n        &lt;Credentials&gt;\n          &lt;UserId&gt;*username*&lt;/UserId&gt;\n          &lt;Password&gt;*password*&lt;/Password&gt;\n        &lt;/Credentials&gt;\n      &lt;/request&gt;\n    &lt;/VerosPathway_Ping&gt;\n  &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>I've had to do a ton of tweaking since this company expects it's clients to use .NET for their SOAP interaction and we are using Ruby. I am extremely close to getting the format correct, but I need to do one of two things in the Envelope section:</p>\n\n<ol>\n<li>Change \"xmlns=\"http://tempuri.org/\" to \"xmlns:wsdl=\"http://tempuri.org/\"</li>\n<li><strong>OR</strong> remove \"xmlns=\"http://tempuri.org/\" completely.</li>\n</ol>\n\n<p>Here is my Savon call:</p>\n\n<pre><code>apiClient = Savon.client(endpoint: \"https://www.intg.pathway.verosapps.com/VerosPathway.svc\", env_namespace: :soapenv, namespace_identifier: nil, logger: Rails.logger, log_level: :debug, log: true, :pretty_print_xml =&gt; true, ssl_version: :TLSv1, wsdl: 'https://www.intg.pathway.verosapps.com/VerosPathway.svc?wsdl')\n</code></pre>\n\n<p>If I add the following line to my Savon call:</p>\n\n<pre><code>namespaces: {\"xmlns:wsdl\" =&gt; \"http://tempuri.org/\"}\n</code></pre>\n\n<p>then my request looks like this:</p>\n\n<pre><code>HTTPI GET request to www.intg.pathway.verosapps.com (excon)\n    SOAP request: https://www.intg.pathway.verosapps.com/VerosPathway.svc\n    SOAPAction: \"urn:IVerosPathway/VerosPathway_Ping\", Content-Type: text/xml;charset=UTF-8, Content-Length: 434\n    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;soapenv:Envelope xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://tempuri.org/\" xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:wsdl=\"http://tempuri.org/\"&gt;\n      &lt;soapenv:Body&gt;\n        &lt;VerosPathway_Ping&gt;\n          &lt;request&gt;\n            &lt;Credentials&gt;\n              &lt;UserId&gt;*username*&lt;/UserId&gt;\n              &lt;Password&gt;*password*&lt;/Password&gt;\n            &lt;/Credentials&gt;\n          &lt;/request&gt;\n        &lt;/VerosPathway_Ping&gt;\n      &lt;/soapenv:Body&gt;\n    &lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>So in this case I would just need to remove the \"xmlns=\"http://tempuri.org/\" line.</p>\n\n<p>Any suggestions would be greatly appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "arrays", "if-statement", "while-loop"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 4787780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80a90081b1a7d98a050552bc90c15b30?s=128&d=identicon&r=PG", "display_name": "dubu2", "link": "https://stackoverflow.com/users/4787780/dubu2"}, "edited": false, "score": 0, "creation_date": 1429113763, "post_id": 29655016, "comment_id": 47450163, "body": "Very useful, thank you for taking the time to help me learn a little more!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1429113197, "creation_date": 1429113197, "answer_id": 29655016, "question_id": 29654694, "link": "https://stackoverflow.com/questions/29654694/how-do-you-direct-a-user-back-to-the-beginning-of-a-nested-if-statement/29655016#29655016", "title": "How do you direct a user back to the beginning of a nested if statement?", "body": "<pre><code>fruits = []\n\nloop do # endless loop; see break\n  puts \"Type your fave fruit or \u201cdone\u201d to exit:\"\n  input = gets.chomp\n\n  break if input == 'done' # break a loop if \u201cdone\u201d was entered\n  fruits &lt;&lt; input\nend\n\nputs \"Would you like to see a list of you most favorite fruits?\"\nif gets.chomp.downcase == \"yes\"\n  puts \"These are your most dilectably delicious favorite fruits: #{fruits}\"\nend\n</code></pre>\n\n<p>Run:</p>\n\n<pre><code># Type your fave fruit or \u201cdone\u201d to exit:\nApple\n# Type your fave fruit or \u201cdone\u201d to exit:\nOrange\n# Type your fave fruit or \u201cdone\u201d to exit:\ndone\n# Would you like to see a list of you most favorite fruits?\nyes\n# These are your most dilectably delicious favorite fruits: [\"Apple\", \"Orange\"]\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 57, "user_id": 4787780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80a90081b1a7d98a050552bc90c15b30?s=128&d=identicon&r=PG", "display_name": "dubu2", "link": "https://stackoverflow.com/users/4787780/dubu2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 29655016, "answer_count": 1, "score": 0, "last_activity_date": 1429113197, "creation_date": 1429112485, "question_id": 29654694, "link": "https://stackoverflow.com/questions/29654694/how-do-you-direct-a-user-back-to-the-beginning-of-a-nested-if-statement", "title": "How do you direct a user back to the beginning of a nested if statement?", "body": "<p>I'm trying to create one of my first apps to help me work through understanding some core concepts of Ruby. This is pretty simple and self explanatory to most of you guys, I have no doubt. Any help is greatly appreciated. I apologize if this seems silly, I am just starting out and doing my best to figure this out. I want to add the option to see the list if they answer \"no\" to the \"Do you want to keep adding fruits to your list?\". I would also like the app, at the end, the final else statement, to bring the user back up to the \"Then tell me another of you favorite fruits! (Type 'done' to get out)\" message.  How do I do this?   </p>\n\n<pre><code># This app was created by: Daniel Horowitz\n\nfruits = []\n\nputs \"Please tell me what one of your favorite fruits are... Do tell.\"\ninput = gets.chomp\nfruits &lt;&lt; input\n\nputs \"Yummy, that sounds delicious. You must tell me another!\"\ninput = gets.chomp\nfruits &lt;&lt; input\n\nputs \"Do you want to keep adding fruits to your list?\"\nanswer = gets.chomp.downcase\n\nif answer == \"yes\"\n  puts \"Then tell me another of your favorites fruits! (Type 'done' to get out)\"\n  input = gets.chomp\n  while input != \"done\"\n    fruits &lt;&lt; input\n    puts \"Would you like to see a list of you most favorite fruits?\"\n    input2 = gets.chomp.downcase\n    if input2 == \"yes\"\n      puts \"These are your most dilectably delicious favorite fruits: #{fruits}\"\n    else\n\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 988, "user_id": 4384619, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l7-7H3MFzcY/AAAAAAAAAAI/AAAAAAAAAP8/K6ILQ-kg8T4/photo.jpg?sz=128", "display_name": "J&#233;r&#233;my Buttice", "link": "https://stackoverflow.com/users/4384619/j%c3%a9r%c3%a9my-buttice"}, "edited": false, "score": 0, "creation_date": 1429112050, "post_id": 29654323, "comment_id": 47448781, "body": "Can you post the error messages?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1429112603, "post_id": 29654323, "comment_id": 47449198, "body": "Are you modifying and inspecting the same database? E.g. <code>development</code>, or <code>test</code>?"}, {"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 1, "creation_date": 1429114490, "post_id": 29654323, "comment_id": 47450687, "body": "As an aside, I would recommend not using the word &quot;applications&quot; or &quot;application&quot; as a model, variable or column name."}], "answers": [{"tags": [], "owner": {"reputation": 988, "user_id": 4384619, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l7-7H3MFzcY/AAAAAAAAAAI/AAAAAAAAAP8/K6ILQ-kg8T4/photo.jpg?sz=128", "display_name": "J&#233;r&#233;my Buttice", "link": "https://stackoverflow.com/users/4384619/j%c3%a9r%c3%a9my-buttice"}, "is_accepted": false, "score": 0, "last_activity_date": 1429112799, "creation_date": 1429112799, "answer_id": 29654838, "question_id": 29654323, "link": "https://stackoverflow.com/questions/29654323/cant-fix-rails-error-pgstringdatarighttruncation-error-value-too-long-for-t/29654838#29654838", "title": "Can&#39;t fix rails error PG::StringDataRightTruncation: ERROR: Value too long for type character varying(255)", "body": "<pre><code>class ChangeColumnType &lt; ActiveRecord::Migration\n  def up\n    execute 'ALTER TABLE applications ALTER COLUMN address      TYPE text USING (address::text)'\n    execute 'ALTER TABLE applications ALTER COLUMN mortAddress  TYPE text USING (mortAddress::text)'\n    execute 'ALTER TABLE applications ALTER COLUMN employer     TYPE text USING (employer::text)'\n    execute 'ALTER TABLE applications ALTER COLUMN title        TYPE text USING (title::text)'\n    execute 'ALTER TABLE applications ALTER COLUMN empAddress   TYPE text USING (empAddress::text)'\n    execute 'ALTER TABLE applications ALTER COLUMN coAddress    TYPE text USING (coAddress::text)'\n    execute 'ALTER TABLE applications ALTER COLUMN coTitle      TYPE text USING (coTitle::text)'\n    execute 'ALTER TABLE applications ALTER COLUMN coEmpAddress TYPE text USING (coEmpAddress::text)'\n    execute 'ALTER TABLE applications ALTER COLUMN rrsp         TYPE text USING (rrsp::text)'\n    execute 'ALTER TABLE applications ALTER COLUMN nonrrsp      TYPE text USING (nonrrsp::text)'\n    execute 'ALTER TABLE applications ALTER COLUMN otherAssets  TYPE text USING (otherAssets::text)'\n  end\n\n  def down\n    execute 'ALTER TABLE applications ALTER COLUMN address      TYPE string USING (address::string)'\n    execute 'ALTER TABLE applications ALTER COLUMN mortAddress  TYPE string USING (mortAddress::string)'\n    execute 'ALTER TABLE applications ALTER COLUMN employer     TYPE string USING (employer::string)'\n    execute 'ALTER TABLE applications ALTER COLUMN title        TYPE string USING (title::string)'\n    execute 'ALTER TABLE applications ALTER COLUMN empAddress   TYPE string USING (empAddress::string)'\n    execute 'ALTER TABLE applications ALTER COLUMN coAddress    TYPE string USING (coAddress::string)'\n    execute 'ALTER TABLE applications ALTER COLUMN coTitle      TYPE string USING (coTitle::string)'\n    execute 'ALTER TABLE applications ALTER COLUMN coEmpAddress TYPE string USING (coEmpAddress::string)'\n    execute 'ALTER TABLE applications ALTER COLUMN rrsp         TYPE string USING (rrsp::string)'\n    execute 'ALTER TABLE applications ALTER COLUMN nonrrsp      TYPE string USING (nonrrsp::string)'\n    execute 'ALTER TABLE applications ALTER COLUMN otherAssets  TYPE string USING (otherAssets::string)'\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 305, "user_id": 4330160, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/cb6d376d9fbeed0562e8e69f8e52c5c0?s=128&d=identicon&r=PG&f=1", "display_name": "chiccaboom", "link": "https://stackoverflow.com/users/4330160/chiccaboom"}, "is_accepted": true, "score": 0, "last_activity_date": 1429119915, "creation_date": 1429119915, "answer_id": 29657191, "question_id": 29654323, "link": "https://stackoverflow.com/questions/29654323/cant-fix-rails-error-pgstringdatarighttruncation-error-value-too-long-for-t/29657191#29657191", "title": "Can&#39;t fix rails error PG::StringDataRightTruncation: ERROR: Value too long for type character varying(255)", "body": "<p>thanks everyone. I figured out what the problem was. I didn't run heroku run db:migrate!!!!</p>\n\n<p>problem solved. </p>\n"}], "owner": {"reputation": 305, "user_id": 4330160, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/cb6d376d9fbeed0562e8e69f8e52c5c0?s=128&d=identicon&r=PG&f=1", "display_name": "chiccaboom", "link": "https://stackoverflow.com/users/4330160/chiccaboom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 29657191, "answer_count": 2, "score": -1, "last_activity_date": 1429119915, "creation_date": 1429111586, "question_id": 29654323, "link": "https://stackoverflow.com/questions/29654323/cant-fix-rails-error-pgstringdatarighttruncation-error-value-too-long-for-t", "title": "Can&#39;t fix rails error PG::StringDataRightTruncation: ERROR: Value too long for type character varying(255)", "body": "<p>I'm not super familiar with rails so I would appreciate some really dumbed down answer if possible!</p>\n\n<p>I'm getting the PG::StringDataRightTruncation: ERROR:  value too long for type character varying(255) error. I've read online that the solution is to create a migration file and set the field to :text and then :limit => nil.</p>\n\n<p>these are the steps I have taken:\n1. Rails g migration\n2. edited the migration file with the following code:</p>\n\n<pre><code>def up\n    change_column :applications, :address, :text, :limit =&gt; nil\n    change_column :applications, :mortAddress, :text, :limit =&gt; nil\n    change_column :applications, :employer, :text, :limit =&gt; nil\n    change_column :applications, :title, :text, :limit =&gt; nil\n    change_column :applications, :empAddress, :text, :limit =&gt; nil\n    change_column :applications, :coAddress, :text, :limit =&gt; nil\n    change_column :applications, :coTitle, :text, :limit =&gt; nil\n    change_column :applications, :coEmpAddress, :text, :limit =&gt; nil\n    change_column :applications, :rrsp, :text, :limit =&gt; nil\n    change_column :applications, :nonrrsp, :text, :limit =&gt; nil\n    change_column :applications, :otherAssets, :text\n  end\n\n  def down\n    change_column :applications, :address, :string\n    change_column :applications, :mortAddress, :string\n    change_column :applications, :employer, :string\n    change_column :applications, :title, :string\n    change_column :applications, :empAddress, :string\n    change_column :applications, :coAddress, :string\n    change_column :applications, :coTitle, :string\n    change_column :applications, :coEmpAddress, :string\n    change_column :applications, :rrsp, :string\n    change_column :applications, :nonrrsp, :string\n    change_column :applications, :otherAssets, :string\n  end\nend\n</code></pre>\n\n<ol start=\"3\">\n<li>rake db:migrate</li>\n</ol>\n\n<p>I have also tried doing removing the :limit => nil for field :otherAssets as you can see from the code. however this is still not working.</p>\n\n<p>Am I doing something wrong??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "foreign-key-relationship"], "comments": [{"owner": {"reputation": 3035, "user_id": 61130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89008a72cacb75012d70c97040fcc039?s=128&d=identicon&r=PG", "display_name": "John Paul Ashenfelter", "link": "https://stackoverflow.com/users/61130/john-paul-ashenfelter"}, "edited": false, "score": 1, "creation_date": 1429109296, "post_id": 29653312, "comment_id": 47446628, "body": "More code would certainly help. But one thing to check is that you&#39;re saving the parent (invoice) before trying to save the line_iterms which depend on that value."}, {"owner": {"reputation": 1512, "user_id": 2920617, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7oqRC.jpg?s=128&g=1", "display_name": "Joel Brewer", "link": "https://stackoverflow.com/users/2920617/joel-brewer"}, "edited": false, "score": 0, "creation_date": 1429109332, "post_id": 29653312, "comment_id": 47446658, "body": "We need to see some code in order to help you."}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1429109391, "post_id": 29653312, "comment_id": 47446703, "body": "Show how are you building <b>Invoice_line_item</b> on creating <b>Invoice</b>"}], "owner": {"reputation": 103, "user_id": 4708669, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/86e927af287dc805419ce303842a7191?s=128&d=identicon&r=PG&f=1", "display_name": "davefogo", "link": "https://stackoverflow.com/users/4708669/davefogo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1429112507, "creation_date": 1429108921, "last_edit_date": 1429112507, "question_id": 29653312, "link": "https://stackoverflow.com/questions/29653312/how-to-change-existing-model-attribute-through-association", "title": "How to change existing model attribute through association", "body": "<p>I have two tables: invoices and Invoice_Line_Items , invoice has_many Invoice_Line_items. Invoice_Line_Items belongs_to Invoice. Invoice has its foreign key in Invoice_line_items. When I create a new invoice, I choose the different Invoice_line_items and then save. However when I go and check the Invoice_line_item its invoice_id: is nil. It does not update the invoice_id foreign key in each of the Invoice_line_item.</p>\n\n<p><em>update</em></p>\n\n<p>It is true I am saving the child item before the parent (invoice).</p>\n\n<p><strong>models</strong></p>\n\n<pre><code>class Invoice &lt; ActiveRecord::Base\n  belongs_to :client\n  has_many :proposal_line_items, dependent: :destroy\n  has_many :suppliers, :through =&gt; :proposal_line_items\nend\n\n\nclass Proposal_Line_Item &lt; ActiveRecord::Base\n  belongs_to :proposal\n  belongs_to :supplier\n  belongs_to :invoice\nend\n</code></pre>\n\n<p><strong>form_for Invoice</strong></p>\n\n<pre><code>&lt;%= form_for(@invoice) do |f| %&gt;\n  &lt;% if @invoice.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@invoice.errors.count, \"error\") %&gt; prohibited this invoice from being saved:&lt;/h2&gt;\n      &lt;ul&gt;\n      &lt;% @invoice.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n   &lt;div class=\"field\"&gt;\n    &lt;%= f.label :fecha_de_expedicion %&gt;&lt;br&gt;\n    &lt;%= f.datetime_select :fecha_de_expedicion %&gt;\n  &lt;/div&gt;\n    &lt;div class=\"field\"&gt;\n    &lt;%= f.label :invoice_line_item %&gt;&lt;br&gt;\n    &lt;%= collection_select( :invoice_line_item, :invoice_line_item_id, @invoice_line_items, :id, :supplier_id,  {}, {:multiple =&gt; true}) %&gt;\n    &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>thank you</p>\n"}, {"tags": ["ruby", "google-api", "google-drive-api"], "comments": [{"owner": {"reputation": 18507, "user_id": 2213940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NEbb2.jpg?s=128&g=1", "display_name": "Zig Mandel", "link": "https://stackoverflow.com/users/2213940/zig-mandel"}, "edited": false, "score": 0, "creation_date": 1429111173, "post_id": 29653190, "comment_id": 47448102, "body": "Service accounts are not for this (which is 2legged oauth2). You want a client flow (3 legged oauth2) where you end up storing each users refresh tokens and use them to access data in THEIR drive. Sorry im not familiar with the ruby side."}, {"owner": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "edited": false, "score": 0, "creation_date": 1435917216, "post_id": 29653190, "comment_id": 50410016, "body": "@Pezholio ... Did you get a solution for this? Having the same issue"}], "answers": [{"tags": [], "owner": {"reputation": 792, "user_id": 699982, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/76695a89b5799f9bf432829712d1e8be?s=128&d=identicon&r=PG", "display_name": "Sandip Karanjekar", "link": "https://stackoverflow.com/users/699982/sandip-karanjekar"}, "is_accepted": false, "score": 1, "last_activity_date": 1440506715, "creation_date": 1440506715, "answer_id": 32204383, "question_id": 29653190, "link": "https://stackoverflow.com/questions/29653190/google-drive-ruby-accessing-files-via-a-service-account/32204383#32204383", "title": "Google Drive Ruby - accessing files via a service account", "body": "<p>You have to share your spreadsheet with this client mail id - <code>ENV['GAPPS_SERVICE_ACCOUNT_EMAIL']</code></p>\n\n<p>Otherwise you won't be able to access anything even though you have a valid token.</p>\n"}], "owner": {"reputation": 1501, "user_id": 452684, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/75830be2998f0ae905c0b5daf4e1214b?s=128&d=identicon&r=PG", "display_name": "Pezholio", "link": "https://stackoverflow.com/users/452684/pezholio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440506715, "creation_date": 1429108648, "question_id": 29653190, "link": "https://stackoverflow.com/questions/29653190/google-drive-ruby-accessing-files-via-a-service-account", "title": "Google Drive Ruby - accessing files via a service account", "body": "<p>I've been using the <a href=\"https://github.com/gimite/google-drive-ruby\" rel=\"nofollow\">Google Drive Ruby</a> gem to access information from Google spreadsheets, and, with the impending deprecation of a lot of stuff, have been forced to upgrade, and can now no longer log on with a simple username and password (I understand this is being deprecated too)</p>\n\n<p>After flipping various options and making certain incantations, I've managed to get logged in via Oauth like so:</p>\n\n<pre><code>client = Google::APIClient.new(application_name: 'Google Drive Ruby test', application_version: '0.0.1')\nkey = Google::APIClient::KeyUtils.load_from_pkcs12(\n  'config/key.p12',\n  ENV['GAPPS_KEY_PASSWORD']\n)\n\nasserter = Google::APIClient::JWTAsserter.new(\n  ENV['GAPPS_SERVICE_ACCOUNT_EMAIL'],\n  ['https://www.googleapis.com/auth/drive'],\n  key\n)\n\nclient.authorization = asserter.authorize\nauth_token = client.authorization.access_token\n\ngoogle_drive = GoogleDrive.login_with_oauth(access_token)\n</code></pre>\n\n<p>This works fine, however, I only seem to be able to act as my service account, so don't have access to the files that other users have access to. For example:</p>\n\n<pre><code>google_drive.spreadsheet_by_key(\"18rNqAz3R0hhp7OYEPLU8thGHsUR0jgYgHk3zQ8CWL-4\")\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>Google::APIClient::ClientError: File not found: 18rNqAz3R0hhp7OYEPLU8thGHsUR0jgYgHk3zQ8CWL-4\n</code></pre>\n\n<p>I understand that you can act as a given user, but despite trawling through the docs, I don't seem to be able to get this to work. Any ideas?</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1429109306, "post_id": 29653396, "comment_id": 47446635, "body": "From the <a href=\"http://ruby-doc.org/core-2.1.1/Regexp.html#method-i-3D-7E\" rel=\"nofollow noreferrer\">documentation</a>: <i>&quot;The regexp must be a literal without interpolation and placed at left hand side.&quot;</i>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 10611, "user_id": 973810, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc35612d4cb8ba65f31a6d028bcf138e?s=128&d=identicon&r=PG", "display_name": "Darth Egregious", "link": "https://stackoverflow.com/users/973810/darth-egregious"}, "edited": false, "score": 0, "creation_date": 1429111578, "post_id": 29653396, "comment_id": 47448412, "body": "@Fuser97381 My name is not Matz, btw."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1429109437, "last_edit_date": 1429109437, "creation_date": 1429109186, "answer_id": 29653396, "question_id": 29653135, "link": "https://stackoverflow.com/questions/29653135/named-group-x-modifier/29653396#29653396", "title": "Named group + x modifier", "body": "<p>You are mixing things up. <code>puts number</code> in the latter example does not work not because it\u2019s extended regexp, but because it\u2019s not inline.</p>\n\n<p><code>$~[:number]</code> or <code>Regexp.last_match[:number]</code> work always.</p>\n\n<p>Direct reference works only for inline regexps:</p>\n\n<pre><code>\u25b6 /\n\u25b7   number  # this is a word\n\u25b7   \\s      # this is a space\n\u25b7   (?&lt;number&gt;\\d+)   # this is a bunch of numbers\n\u25b7 /x =~ 'hello here is a number 11111'\n#\u21d2 16\n\u25b6 number\n#\u21d2 \"11111\"\n</code></pre>\n\n<p>Here it perfectly works for extended regexp, because it\u2019s inline.</p>\n\n<p><strong>UPD</strong> Thanks @Stefan, here is more precise requirement from the <a href=\"http://ruby-doc.org/core-2.1.1/Regexp.html#method-i-3D-7E\" rel=\"nofollow\">documentation</a>: </p>\n\n<blockquote>\n  <p>This assignment is implemented in the Ruby parser. The parser detects <code>regexp-literal =~ expression</code> for the assignment. The regexp must be a literal without interpolation and placed at left hand side.</p>\n</blockquote>\n"}], "owner": {"reputation": 10611, "user_id": 973810, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc35612d4cb8ba65f31a6d028bcf138e?s=128&d=identicon&r=PG", "display_name": "Darth Egregious", "link": "https://stackoverflow.com/users/973810/darth-egregious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429109437, "creation_date": 1429108462, "question_id": 29653135, "link": "https://stackoverflow.com/questions/29653135/named-group-x-modifier", "title": "Named group + x modifier", "body": "<p>How can I use a named group in conjunction with the <code>x</code> regex modifier?</p>\n\n<p>Works:</p>\n\n<pre><code>/(?&lt;number&gt;\\d+)/ =~ 'hello here is a number 3298472398723'\nputs number\n</code></pre>\n\n<p>Works:</p>\n\n<pre><code>regexp = /\n  number  # this is a word\n  \\s      # this is a space\n  (\\d+)   # this is a bunch of numbers\n/x\nregexp =~ 'hello here is a number 3298472398723'\nputs $1\n</code></pre>\n\n<p>Doesn't work:</p>\n\n<pre><code>regexp = /\n  number  # this is a word\n  \\s      # this is a space\n  (?&lt;number&gt;\\d+)   # this is a bunch of numbers\n/x\nregexp =~ 'hello here is a number 3298472398723'\nputs number\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "path", "routes"], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 4510197, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d753761b391498fd817f1cef2b23cabe?s=128&d=identicon&r=PG&f=1", "display_name": "ikanyu", "link": "https://stackoverflow.com/users/4510197/ikanyu"}, "edited": false, "score": 0, "creation_date": 1429106807, "post_id": 29652199, "comment_id": 47444702, "body": "Solved my problem but I am faced with &#39;Resource not found&#39;.  :( I have this link &lt;li&gt;&lt;%= link_to &#39;My Products&#39;, showall_products_path %&gt;&lt;/li&gt; but Resource not found :( :( :("}, {"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "reply_to_user": {"reputation": 195, "user_id": 4510197, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d753761b391498fd817f1cef2b23cabe?s=128&d=identicon&r=PG&f=1", "display_name": "ikanyu", "link": "https://stackoverflow.com/users/4510197/ikanyu"}, "edited": false, "score": 0, "creation_date": 1429107058, "post_id": 29652199, "comment_id": 47444854, "body": "Could you provide more information about the new error? Where does it come from? Is it from controller? If you have stack trace - it would also help."}, {"owner": {"reputation": 195, "user_id": 4510197, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d753761b391498fd817f1cef2b23cabe?s=128&d=identicon&r=PG&f=1", "display_name": "ikanyu", "link": "https://stackoverflow.com/users/4510197/ikanyu"}, "edited": false, "score": 0, "creation_date": 1429107070, "post_id": 29652199, "comment_id": 47444863, "body": "Found my problem. Stupid me who put showall in before_action :set_product, only: [:show, :edit, :update, :destroy] . Thanks for the solutions you gave earlier! Really helpful!!!!"}], "tags": [], "owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "is_accepted": true, "score": 5, "last_activity_date": 1429106078, "creation_date": 1429106078, "answer_id": 29652199, "question_id": 29652146, "link": "https://stackoverflow.com/questions/29652146/modify-url-pattern-ruby-rails/29652199#29652199", "title": "Modify URL Pattern Ruby Rails", "body": "<p>You should change your route definition as follows:</p>\n\n<pre><code>resources :products do\n  collection do \n    get :showall\n  end\nend\n</code></pre>\n\n<p>Check corresponding <a href=\"http://guides.rubyonrails.org/routing.html#adding-collection-routes\">documentation</a>.</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 195, "user_id": 4510197, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d753761b391498fd817f1cef2b23cabe?s=128&d=identicon&r=PG&f=1", "display_name": "ikanyu", "link": "https://stackoverflow.com/users/4510197/ikanyu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 29652199, "answer_count": 1, "score": 3, "last_activity_date": 1429106078, "creation_date": 1429105956, "question_id": 29652146, "link": "https://stackoverflow.com/questions/29652146/modify-url-pattern-ruby-rails", "title": "Modify URL Pattern Ruby Rails", "body": "<p>I am trying to display a page to show all products by current user. Because of this, I have created a new page showall.html.erb under products view.</p>\n\n<p>I have done the following:</p>\n\n<p>ProductsController</p>\n\n<pre><code>def showall\n  @products = current_user.products\nend\n</code></pre>\n\n<p>routes</p>\n\n<pre><code>resources :products do\n  get :showall\nend\n</code></pre>\n\n<p>I am aware that because of the nested resources the URL Pattern became</p>\n\n<pre><code> /products/:product_id/showall(.:format)\n</code></pre>\n\n<p>How do I actually get rid of the product_id part to achieve /products/showall to have one special page to render all products by the current user.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "is_accepted": true, "score": 13, "last_activity_date": 1451316310, "last_edit_date": 1451316310, "creation_date": 1430176367, "answer_id": 29907583, "question_id": 29651981, "link": "https://stackoverflow.com/questions/29651981/before-and-after-hooks-for-a-spec-directory-in-rspec/29907583#29907583", "title": "Before and After hooks for a spec directory in RSpec", "body": "<p>Are you using RSpec 3+?</p>\n\n<p>You can use <code>#define_derived_metadata</code> to add custom metadata based on file path matchers. </p>\n\n<pre><code>RSpec.configure do |config|\n  config.define_derived_metadata(file_path: %r{spec/truncation}) do |metadata|\n    metadata[:truncation] = true\n  end\n\n  config.before(:all, :truncation) do\n    # truncate that bad boy\n  end\nend\n</code></pre>\n\n<p>This is the <a href=\"https://github.com/rspec/rspec-rails/blob/a09a6231ceecefa177ec08b27c3066d5947e5899/lib/rspec/rails/configuration.rb#L85\" rel=\"noreferrer\">same method</a> used in <code>rspec-rails</code> to add custom behavior to specs in the specific directories, e.g. <code>spec/controllers</code>.</p>\n\n<p><a href=\"http://www.rubydoc.info/github/rspec/rspec-core/RSpec/Core/Configuration:define_derived_metadata\" rel=\"noreferrer\">Docs</a></p>\n"}], "owner": {"reputation": 2497, "user_id": 805156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/223e8b9ef11b631699db15c26d48fdac?s=128&d=identicon&r=PG", "display_name": "Optimus", "link": "https://stackoverflow.com/users/805156/optimus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 0, "accepted_answer_id": 29907583, "answer_count": 1, "score": 6, "last_activity_date": 1451316310, "creation_date": 1429105585, "question_id": 29651981, "link": "https://stackoverflow.com/questions/29651981/before-and-after-hooks-for-a-spec-directory-in-rspec", "title": "Before and After hooks for a spec directory in RSpec", "body": "<p>We have quite a bit of tests in our RSpec test suite. directory structure looks something like -</p>\n\n<pre><code>spec/\n  truncation/\n    example1_spec.rb\n    example2_spec.rb\n    ...\n  transaction/\n    example1_spec.rb\n    example2_spec.rb\n    ...\n</code></pre>\n\n<p>I wanted to restore a test database dump, before all of the spec files in <code>transaction/</code> folder are run and empty it after all tests finish.</p>\n\n<p>Is there a way to do this?</p>\n\n<p>There are <code>before(:suite)</code> and <code>after(:suite)</code> hooks but these work for individual spec files.</p>\n\n<p>Is there a way to provide before and after hooks for directories in RSpec?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4107333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RuL5k.jpg?s=128&g=1", "display_name": "Kenton", "link": "https://stackoverflow.com/users/4107333/kenton"}, "edited": false, "score": 0, "creation_date": 1429104387, "post_id": 29651511, "comment_id": 47442748, "body": "ok, I&#39;m new so that is totally possible I did confuse this. How would I go about deleting the the content in the datebase?"}, {"owner": {"reputation": 6569, "user_id": 371530, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UJz1r.jpg?s=128&g=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/371530/robin"}, "reply_to_user": {"reputation": 1, "user_id": 4107333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RuL5k.jpg?s=128&g=1", "display_name": "Kenton", "link": "https://stackoverflow.com/users/4107333/kenton"}, "edited": false, "score": 0, "creation_date": 1429104572, "post_id": 29651511, "comment_id": 47442903, "body": "Login into your PostgreSQL server and truncate the table, which is storing the data. <a href=\"http://www.postgresql.org/docs/9.4/static/sql-truncate.html\" rel=\"nofollow noreferrer\">postgresql.org/docs/9.4/static/sql-truncate.html</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 1, "user_id": 4107333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RuL5k.jpg?s=128&g=1", "display_name": "Kenton", "link": "https://stackoverflow.com/users/4107333/kenton"}, "edited": false, "score": 1, "creation_date": 1429105413, "post_id": 29651511, "comment_id": 47443579, "body": "@Kenton while technically robin is correct. You could also create a small script in ruby and execute it in the console. I always prefer this method as you can make sure to keep the validations and referential integrity enforced in the ORM in tact. To run a console it is just <code>rails c</code> you can even test your script using <code>rails c --sandbox</code> (this will roll back changes on exit)."}, {"owner": {"reputation": 1, "user_id": 4107333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RuL5k.jpg?s=128&g=1", "display_name": "Kenton", "link": "https://stackoverflow.com/users/4107333/kenton"}, "edited": false, "score": 0, "creation_date": 1429192684, "post_id": 29651511, "comment_id": 47491474, "body": "I ended up doing  rake db:reset and it worked as well."}], "tags": [], "owner": {"reputation": 6569, "user_id": 371530, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UJz1r.jpg?s=128&g=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/371530/robin"}, "is_accepted": false, "score": 0, "last_activity_date": 1429104652, "last_edit_date": 1429104652, "creation_date": 1429104300, "answer_id": 29651511, "question_id": 29651290, "link": "https://stackoverflow.com/questions/29651290/rails-server-not-reflecting-changes-to-seed-rb-file/29651511#29651511", "title": "rails server not reflecting changes to seed.rb file", "body": "<p>I think you have understood the idea of seeding wrong. <strong>It should only be used to add initial data</strong> to the database. When you run <code>rake db:seed</code>, it will add the data you defined in your <code>seed.rb</code> file to the database, which is associated with the environment you are currently running.</p>\n\n<p>So you have to truncate/delete the content of the database and seed it again to get the changes in your <code>seed.rb</code> file reflected.</p>\n"}], "owner": {"reputation": 1, "user_id": 4107333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RuL5k.jpg?s=128&g=1", "display_name": "Kenton", "link": "https://stackoverflow.com/users/4107333/kenton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 589, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429104652, "creation_date": 1429103692, "question_id": 29651290, "link": "https://stackoverflow.com/questions/29651290/rails-server-not-reflecting-changes-to-seed-rb-file", "title": "rails server not reflecting changes to seed.rb file", "body": "<p>new to rails and programming in general. </p>\n\n<p>I have a rails app I'm working on that I cannot figure out what's going on. </p>\n\n<p>My index.rb file displays a set of pins. These pins are created and stored under db > seeds.rb</p>\n\n<p>When I want to add a new pin, I create it in seeds.rb and it comes up on my index.rb file (after running rake db:seed).</p>\n\n<p>However, once I delete it, and rake again, it's still there and will never go away.</p>\n\n<p>I can make other changes and those are reflected no problem, it's just with my seed.rb file that the issues happens. </p>\n\n<p>I've tried restarting my rails server, nothing works. </p>\n\n<p>This is on localhost (rails s)\nUsing postgresql \nUsing latest version of rails</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3.2"], "answers": [{"tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": true, "score": 1, "last_activity_date": 1429103054, "creation_date": 1429103054, "answer_id": 29651040, "question_id": 29651002, "link": "https://stackoverflow.com/questions/29651002/adding-value-in-input-text-field-using-rails-3/29651040#29651040", "title": "Adding value in input text field using Rails 3", "body": "<p>Try this,</p>\n\n<pre><code>&lt;input type=\"text\" class=\"form-control\" placeholder=\"Receipt No\" value=\"&lt;%= @user.Receipt_No %&gt;\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 29651040, "answer_count": 1, "score": 1, "last_activity_date": 1429103054, "creation_date": 1429102949, "question_id": 29651002, "link": "https://stackoverflow.com/questions/29651002/adding-value-in-input-text-field-using-rails-3", "title": "Adding value in input text field using Rails 3", "body": "<p>I have a small problem.I want to add value inside the input text field which is fetching from DB.</p>\n\n<p>Suppose i have a input field like below.</p>\n\n<pre><code>&lt;input type=\"text\" class=\"form-control\" placeholder=\"Receipt No\"&gt; \n</code></pre>\n\n<p>I have to add <code>@user.Receipt_No</code> inside it as its value.This value is fetching from user table of DB.Please help me resolve this problem.</p>\n"}, {"tags": ["ruby", "neo4j", "neo4j.rb"], "answers": [{"comments": [{"owner": {"reputation": 4778, "user_id": 249323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/47bfbc203d66cd6a3ac563e7b84e8151?s=128&d=identicon&r=PG", "display_name": "David Chouinard", "link": "https://stackoverflow.com/users/249323/david-chouinard"}, "edited": false, "score": 0, "creation_date": 1429120007, "post_id": 29651091, "comment_id": 47454010, "body": "Very interesting. I&#39;m adding an <code>attr_accessor</code> and a <code>..._attributes</code> method to the model and using <code>fields_for</code> in the view. The nested fields don&#39;t appear. However, if I remove the  <code>..._attributes</code> method (but keep the <code>attr_accessor</code>), the fields appear. I believe I&#39;m doing this right, I&#39;ll open an issue."}], "tags": [], "owner": {"reputation": 10388, "user_id": 632454, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94593f750fbdbcfe459d7d16f45780e1?s=128&d=identicon&r=PG", "display_name": "Brian Underwood", "link": "https://stackoverflow.com/users/632454/brian-underwood"}, "is_accepted": true, "score": 1, "last_activity_date": 1429103189, "creation_date": 1429103189, "answer_id": 29651091, "question_id": 29650529, "link": "https://stackoverflow.com/questions/29650529/neo4jrb-replicating-accepts-nested-attributes-for-functionality-in-activenode/29651091#29651091", "title": "Neo4jRB: replicating accepts_nested_attributes_for functionality in ActiveNode?", "body": "<p>Interesting.  I'd have to look deeper to say for sure, but since <code>ActiveNode</code> uses <code>ActiveModel</code>, it seems like setting a <code>&lt;attribute&gt;_attributes=</code> method might help.  See these links:</p>\n\n<p><a href=\"https://coderwall.com/p/kvsbfa/nested-forms-with-activemodel-model-objects\" rel=\"nofollow\">https://coderwall.com/p/kvsbfa/nested-forms-with-activemodel-model-objects</a></p>\n\n<p><a href=\"https://github.com/plataformatec/simple_form/wiki/Use-with-ActiveModel-compliant-models\" rel=\"nofollow\">https://github.com/plataformatec/simple_form/wiki/Use-with-ActiveModel-compliant-models</a></p>\n\n<p>I haven't tried it myself, but if that doesn't help then <a href=\"https://github.com/neo4jrb/neo4j/issues/new\" rel=\"nofollow\">open an issue</a> on the repo and we can take a look</p>\n"}], "owner": {"reputation": 4778, "user_id": 249323, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/47bfbc203d66cd6a3ac563e7b84e8151?s=128&d=identicon&r=PG", "display_name": "David Chouinard", "link": "https://stackoverflow.com/users/249323/david-chouinard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 29651091, "answer_count": 1, "score": 2, "last_activity_date": 1429103189, "creation_date": 1429101740, "question_id": 29650529, "link": "https://stackoverflow.com/questions/29650529/neo4jrb-replicating-accepts-nested-attributes-for-functionality-in-activenode", "title": "Neo4jRB: replicating accepts_nested_attributes_for functionality in ActiveNode?", "body": "<p>I'd love to be able to use Rails' native form infrastructure for managing nested relationships.</p>\n\n<p>The <a href=\"https://github.com/neo4jrb/neo4j/blob/c82285907a223456160145185f736f87359b7c71/CHANGELOG\" rel=\"nofollow\">Changelog</a> makes reference to <code>accepts_nested_attributes_for</code>, but it does not seem to work.</p>\n\n<p>Can I add properties to ActiveNode that are functions instead and manually manage the creation of related models?</p>\n"}, {"tags": ["html", "ruby", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1429102785, "post_id": 29650328, "comment_id": 47441503, "body": "There is no <code>tbody</code> in the HTML sample you give. Is it in the real HTML? Where did you get the XPath from (with <code>tbody</code>)?"}], "answers": [{"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 1, "last_activity_date": 1429101542, "creation_date": 1429101542, "answer_id": 29650473, "question_id": 29650328, "link": "https://stackoverflow.com/questions/29650328/how-to-get-value-of-data-from-td-in-ruby/29650473#29650473", "title": "How to get value of data from td in ruby", "body": "<p>If you want only one <code>&lt;td&gt;</code>(s) <code>data</code> attribute's value, use like </p>\n\n<pre><code>doc.at('//*[@id=\"main-panel\"]/table[1]/tbody/tr[2]/td[2]')['data']\n</code></pre>\n\n<p><a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node#at-instance_method\" rel=\"nofollow\">at</a> <em>search for the first occurrence of path. Returns nil if nothing is found, otherwise a Node.</em></p>\n\n<p>To get the attribute value for the attribute <code>name</code>, use <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node#%5B%5D-instance_method\" rel=\"nofollow\"><code>[](name)</code></a> method.</p>\n"}], "owner": {"reputation": 3429, "user_id": 1263837, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/9ef64b65329c6ef1919f6b027fa8af6d?s=128&d=identicon&r=PG", "display_name": "Kundan Atre", "link": "https://stackoverflow.com/users/1263837/kundan-atre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429101542, "creation_date": 1429101156, "question_id": 29650328, "link": "https://stackoverflow.com/questions/29650328/how-to-get-value-of-data-from-td-in-ruby", "title": "How to get value of data from td in ruby", "body": "<p>I have following html table where in I want to fetch data value of  using </p>\n\n<pre><code>   &lt;table&gt;\n     &lt;tr&gt;\n      &lt;td data=\"1\"&gt;Hello 1&lt;/td&gt;\n      &lt;td data=\"2\"&gt;Hello 2&lt;/td&gt;\n      &lt;td data=\"3\"&gt;Hello 3&lt;/td&gt;\n      &lt;td data=\"4\"&gt;Hello 4&lt;/td&gt;\n      &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p><br>\nI'm using nokogiri to read xpath of html as below </p>\n\n<p><br></p>\n\n<pre><code># Crawl a HTML elements using Nokogiri  \ndef crawlTableData()\n  require 'open-uri' \n  require 'nokogiri' \n  open(\"http://localhost:/somepage\",http_basic_authentication: [\"username\", \"somepassword\"]) do |f|\n    doc = Nokogiri::HTML(f.read) \n    return doc.xpath('//*[@id=\"main-panel\"]/table[1]/tbody/tr[2]/td[2]').text\n  end  \nend\n</code></pre>\n\n<p>So finally it return nothing to me.\ncan anyone suggest what is correct way to fetch data value of </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "edited": false, "score": 1, "creation_date": 1429101134, "post_id": 29650296, "comment_id": 47440373, "body": "Can you open <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a> from browser??"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1429102332, "post_id": 29650296, "comment_id": 47441214, "body": "<code>gem install -s http:&#47;&#47;rubygems.org haml</code> and optionally <code>-p YOUR_PROXY</code>."}, {"owner": {"reputation": 1337, "user_id": 634586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/57393d7d5571d727ed8a52dc4f0a1295?s=128&d=identicon&r=PG", "display_name": "covard", "link": "https://stackoverflow.com/users/634586/covard"}, "reply_to_user": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "edited": false, "score": 0, "creation_date": 1429108539, "post_id": 29650296, "comment_id": 47446063, "body": "The firewall the company has would be my bet. Had a friend with that issue. Could install gems from home but at work it was blocked by the company firewall. I agree with @saurabh try and visit the ruby gems website. If you can&#39;t get to the site talk to your network admin about unblocking it."}], "answers": [{"tags": [], "owner": {"reputation": 118, "user_id": 4792408, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A4uRoCkJlnM/AAAAAAAAAAI/AAAAAAAAABI/KPljUtXSt0Y/photo.jpg?sz=128", "display_name": "Fabien Dobat", "link": "https://stackoverflow.com/users/4792408/fabien-dobat"}, "is_accepted": false, "score": 0, "last_activity_date": 1429109020, "creation_date": 1429109020, "answer_id": 29653342, "question_id": 29650296, "link": "https://stackoverflow.com/questions/29650296/i-cannot-install-haml-using-gem-install-haml/29653342#29653342", "title": "i cannot install haml using &quot;gem install haml&quot;", "body": "<p>If it's a rails project, you can try to change the first line of your Gemfile from <code>source 'https://rubygems.org'</code> to <code>source 'http://rubygems.org'</code>.</p>\n\n<p>If you are using a ruby project, try to download gem without <strong>https</strong>, like : <code>gem install -s http://rubygems.org haml</code></p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4791833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9841d2dd3d88f8bb88cb9ead8fbc1e0e?s=128&d=identicon&r=PG&f=1", "display_name": "sajal", "link": "https://stackoverflow.com/users/4791833/sajal"}, "edited": false, "score": 0, "creation_date": 1429195645, "post_id": 29656661, "comment_id": 47493867, "body": "thanx for ur reply ..it worked by using the command ..set http_proxy=addrss:port"}], "tags": [], "owner": {"reputation": 1066, "user_id": 1449926, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0d203a22a644907b1352a7de11a4a73e?s=128&d=identicon&r=PG", "display_name": "Mikey T.K.", "link": "https://stackoverflow.com/users/1449926/mikey-t-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1429118259, "last_edit_date": 1592644375, "creation_date": 1429118259, "answer_id": 29656661, "question_id": 29650296, "link": "https://stackoverflow.com/questions/29650296/i-cannot-install-haml-using-gem-install-haml/29656661#29656661", "title": "i cannot install haml using &quot;gem install haml&quot;", "body": "<p>Company firewalls, the bane of many a developer's existence.</p>\n<h1>The best thing you can do:</h1>\n<p>Talk to the local networking team and get it unblocked for direct access.</p>\n<h2>If that fails:</h2>\n<p>Do they have a proxy you can use? <code>gem</code> will honor proxy variables, so if you get access to one, you can do an <code>export https_proxy=&quot;http://someaddress:someport&quot;</code>, and then your command should work.</p>\n<h3>If that also fails</h3>\n<p>Now we're left with circumventing the network policies - <strong>Be careful, as this could get you in trouble</strong>.</p>\n<p>Options include:</p>\n<ul>\n<li><p>Getting an external proxy that allows port 80 (it sounds like 80 works from your question). You could set up a <code>squid</code> instance on your home machine and access it that way via the variable method above.</p>\n</li>\n<li><p>Doing an SSH tunnel through a machine that does have unrestricted internet access, and using <a href=\"http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CB8QFjAA&amp;url=http%3A%2F%2Ftsocks.sourceforge.net%2F&amp;ei=tpwuVcrSEpL0oATchYDYBw&amp;usg=AFQjCNGYdBTq1CIRlrQyqalOeV04RbhL3Q&amp;sig2=8A9lmjQIDjs5GGH3AjNlxg\" rel=\"nofollow noreferrer\">tsocks</a> to tunnel through there.</p>\n</li>\n</ul>\n<p>There are others, but these two are relatively easy to set up.</p>\n<p>I must emphasize here, <em>be careful!</em> Even if your networking group is impeding your ability to do your job, either get your boss's support, or be as stealthy as possible and discontinue use of these tools once you have what you need.</p>\n"}], "owner": {"reputation": 1, "user_id": 4791833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9841d2dd3d88f8bb88cb9ead8fbc1e0e?s=128&d=identicon&r=PG&f=1", "display_name": "sajal", "link": "https://stackoverflow.com/users/4791833/sajal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429118259, "creation_date": 1429101079, "last_edit_date": 1429101192, "question_id": 29650296, "link": "https://stackoverflow.com/questions/29650296/i-cannot-install-haml-using-gem-install-haml", "title": "i cannot install haml using &quot;gem install haml&quot;", "body": "<p>i have already downloaded ruby 2.2.1 and in command prompt i hv tried the command</p>\n\n<pre><code>gem install haml\n</code></pre>\n\n<p>but error is coming like:</p>\n\n<blockquote>\n  <p>ERROR:  Could not find a valid gem 'haml' (>= 0), here is why:\n            Unable to download data from <a href=\"https://rubygems.org/\" rel=\"nofollow\">https://rubygems.org/</a> - Errno::ECONNREFUS ED: No connection could be made because the target\n  machine actively refused it.\n  - connect(2) for \"api.rubygems.org\" port 443 (<a href=\"https://api.rubygems.org/specs.4.8\" rel=\"nofollow\">https://api.rubygems.org/specs.4.8</a> .gz)</p>\n</blockquote>\n\n<p>It might be because of the firewall company have put up in every system. I have gone through trying different proxies picked up from different websites. Can anybody tell how to install or use haml/sass?</p>\n"}, {"tags": ["ruby", "rack", "middleware", "rack-middleware"], "answers": [{"comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 1, "creation_date": 1429112342, "post_id": 29654481, "comment_id": 47449009, "body": "OK, thanks. I thought since you can do it in Rails, it might be possible to do it in Rack. I am currently using a separate Rack build for the tests, but that creates duplication. I think it is better than polluting the production build with test code."}, {"owner": {"reputation": 765, "user_id": 1087002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8107f48d4471a40de325151d589b6d?s=128&d=identicon&r=PG", "display_name": "Noah Gibbs", "link": "https://stackoverflow.com/users/1087002/noah-gibbs"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 1, "creation_date": 1429134500, "post_id": 29654481, "comment_id": 47462646, "body": "Separate Rack builder for the tests is probably as clean a solution as you&#39;ll get here."}, {"owner": {"reputation": 765, "user_id": 1087002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8107f48d4471a40de325151d589b6d?s=128&d=identicon&r=PG", "display_name": "Noah Gibbs", "link": "https://stackoverflow.com/users/1087002/noah-gibbs"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 1, "creation_date": 1429134526, "post_id": 29654481, "comment_id": 47462659, "body": "Rails keeps a different non-Builder stack. If you need that for other things, great. But if you needed to build/copy that just for this problem, it would be too much code and complexity for the result."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1429135199, "post_id": 29654481, "comment_id": 47462953, "body": "Is there any special reason that the middleware cannot be changed after the build? I mean, if the middlewares are stored in <code>@use</code>, can you just update <code>@use</code>? Or is there more going on?"}, {"owner": {"reputation": 765, "user_id": 1087002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8107f48d4471a40de325151d589b6d?s=128&d=identicon&r=PG", "display_name": "Noah Gibbs", "link": "https://stackoverflow.com/users/1087002/noah-gibbs"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 1, "creation_date": 1429196407, "post_id": 29654481, "comment_id": 47494502, "body": "More going on. Each middleware is constructed before it can be used, and takes a reference to its nearest (inward) neighbor to that constructor. You need to remake the middleware stack from the <code>@use</code> stack. That&#39;s fine if you&#39;re sure you can do that, but any reference to the old stack will behave incorrectly. Normally you only make one &quot;run&quot; call, which would foil your changes to <code>@use</code>."}], "tags": [], "owner": {"reputation": 765, "user_id": 1087002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e8107f48d4471a40de325151d589b6d?s=128&d=identicon&r=PG", "display_name": "Noah Gibbs", "link": "https://stackoverflow.com/users/1087002/noah-gibbs"}, "is_accepted": false, "score": 1, "last_activity_date": 1429111968, "creation_date": 1429111968, "answer_id": 29654481, "question_id": 29650231, "link": "https://stackoverflow.com/questions/29650231/how-to-inject-a-rack-middleware-into-an-existing-rack-app/29654481#29654481", "title": "How to inject a Rack middleware into an existing Rack app?", "body": "<p>If you're using Builder (with use, run, etc.) it does <em>not</em> look like you can easily inject or remove middleware at runtime. Here's the code: <a href=\"https://github.com/rack/rack/blob/master/lib/rack/builder.rb\" rel=\"nofollow\">https://github.com/rack/rack/blob/master/lib/rack/builder.rb</a></p>\n\n<p>Notice that it builds the stack of middleware, and when you call run it instantiates the stack (called \"@use\") in a tree of middleware objects which each have a reference to the next one - see methods \"use\" and \"to_app\".</p>\n\n<p>So: don't think Builder is designed to allow dynamically adding and subtracting middleware in the stack.</p>\n\n<p>You could rebuild a new dynamic stack, or use multiple Rack apps with and without testing middleware, or do some backflips like Rails does to dynamically reconfigure the stack.</p>\n\n<p>You could also add a testing middleware only in test mode, or one that can be deactivated easily so it becomes a pass-through middleware. Then your spec_helper would just set and clear the variable telling it to pass through.</p>\n"}, {"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 0, "last_activity_date": 1430759239, "creation_date": 1430759239, "answer_id": 30035818, "question_id": 29650231, "link": "https://stackoverflow.com/questions/29650231/how-to-inject-a-rack-middleware-into-an-existing-rack-app/30035818#30035818", "title": "How to inject a Rack middleware into an existing Rack app?", "body": "<p>Since I want to <strong><em>prepend</em></strong> to the middleware stack, solving for this particular use case was easy.</p>\n\n<p>Given a app defined as above named \"app\", add the new middleware: <code>use ...</code></p>\n\n<pre><code>def new_app\n  Rack::Builder.new do\n    use ...\n    use ...\n\n    run app\n  end.to_app\nend\n</code></pre>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1430759239, "creation_date": 1429100918, "question_id": 29650231, "link": "https://stackoverflow.com/questions/29650231/how-to-inject-a-rack-middleware-into-an-existing-rack-app", "title": "How to inject a Rack middleware into an existing Rack app?", "body": "<p>Given a Rack app that is not Rails,</p>\n\n<p>builder.rb:</p>\n\n<pre><code>def app\n  Rack::Builder.new{\n    use Rack::Static, urls:static_paths, root:'public'\n\n    run ThaApp\n  }.to_app\nend\n</code></pre>\n\n<p>How to inject a testing middleware using the spec_helper?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-i18n"], "comments": [{"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1429102454, "post_id": 29650094, "comment_id": 47441274, "body": "Post the exact error msg. What is the full path of your <code>about.en.yml</code>?"}, {"owner": {"reputation": 1613, "user_id": 2575922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e40b01fafb13c0596a6ee63c6acec0?s=128&d=identicon&r=PG", "display_name": "santosh", "link": "https://stackoverflow.com/users/2575922/santosh"}, "reply_to_user": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1429158200, "post_id": 29650094, "comment_id": 47469703, "body": "Please look at that error message"}], "answers": [{"comments": [{"owner": {"reputation": 1613, "user_id": 2575922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e40b01fafb13c0596a6ee63c6acec0?s=128&d=identicon&r=PG", "display_name": "santosh", "link": "https://stackoverflow.com/users/2575922/santosh"}, "edited": false, "score": 0, "creation_date": 1429158927, "post_id": 29653547, "comment_id": 47469902, "body": "I have my .yml in locales folder only.Its loading but not applying the changes. It works works fine for plural name controller(s) like abouts,en,yml.  After changing it to about.en.yml , it is not able to recognize."}, {"owner": {"reputation": 3035, "user_id": 61130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89008a72cacb75012d70c97040fcc039?s=128&d=identicon&r=PG", "display_name": "John Paul Ashenfelter", "link": "https://stackoverflow.com/users/61130/john-paul-ashenfelter"}, "reply_to_user": {"reputation": 1613, "user_id": 2575922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e40b01fafb13c0596a6ee63c6acec0?s=128&d=identicon&r=PG", "display_name": "santosh", "link": "https://stackoverflow.com/users/2575922/santosh"}, "edited": false, "score": 0, "creation_date": 1429552894, "post_id": 29653547, "comment_id": 47642316, "body": "Are you restarting the rails server every time you change the locale file? If not, the changes won&#39;t get picked up."}], "tags": [], "owner": {"reputation": 3035, "user_id": 61130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89008a72cacb75012d70c97040fcc039?s=128&d=identicon&r=PG", "display_name": "John Paul Ashenfelter", "link": "https://stackoverflow.com/users/61130/john-paul-ashenfelter"}, "is_accepted": false, "score": 0, "last_activity_date": 1429109541, "creation_date": 1429109541, "answer_id": 29653547, "question_id": 29650094, "link": "https://stackoverflow.com/questions/29650094/add-locales-to-singular-controller-in-rails4/29653547#29653547", "title": "Add locales to Singular controller in rails4", "body": "<p>By default Rails is going to look for <code>en.yml</code> in the <code>config/locales</code> directory. </p>\n\n<p>If you're using <code>about.en.yml</code> as the filename, then Rails is not going to find it unless you've configured things otherwise.</p>\n"}, {"tags": [], "owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1429177959, "creation_date": 1429177959, "answer_id": 29671184, "question_id": 29650094, "link": "https://stackoverflow.com/questions/29650094/add-locales-to-singular-controller-in-rails4/29671184#29671184", "title": "Add locales to Singular controller in rails4", "body": "<p>Try to specify name of the controller in the locale file like this:</p>\n\n<pre><code>en:\n  controllers:\n    about:\n      home:\n        discover_message: 'Discover, Track and Compare Open Source'\n        join_now: 'Join Now'\n        whats_new: \"What's New\"\n        popular_projects: 'Most Popular Projects'\n        active_projects: 'Most Active Projects'\n</code></pre>\n\n<p>I have also changed 1 space indentation to 2 space indentation, which is standard.</p>\n"}], "owner": {"reputation": 1613, "user_id": 2575922, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c3e40b01fafb13c0596a6ee63c6acec0?s=128&d=identicon&r=PG", "display_name": "santosh", "link": "https://stackoverflow.com/users/2575922/santosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1429177959, "creation_date": 1429100541, "last_edit_date": 1429158169, "question_id": 29650094, "link": "https://stackoverflow.com/questions/29650094/add-locales-to-singular-controller-in-rails4", "title": "Add locales to Singular controller in rails4", "body": "<p>I have a singular controller i want to add locales to that. It looks like</p>\n\n<pre><code>class AboutController &lt; ApplicationController\n    def home\n    end\n\n   def markdown_syntax\n   end\n end\n</code></pre>\n\n<p>And my <code>about.en.yml</code> looks like</p>\n\n<pre><code>en:\n about:\n   home:\n    discover_message: 'Discover, Track and Compare Open Source'\n    join_now: 'Join Now'\n    whats_new: \"What's New\"\n    popular_projects: 'Most Popular Projects'\n    active_projects: 'Most Active Projects'\n</code></pre>\n\n<p>I am getting translation missing error because it doesn't recognizing from <code>about.en.yml</code></p>\n\n<p>Error Message:</p>\n\n<pre><code>translation missing: en.about.home.discover_message\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 4817, "user_id": 3817025, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/02fd68a33285e876c0b9652ccb9fbc3a?s=128&d=identicon&r=PG", "display_name": "Jeff Sloyer", "link": "https://stackoverflow.com/users/3817025/jeff-sloyer"}, "edited": false, "score": 0, "creation_date": 1429100865, "post_id": 29650056, "comment_id": 47440148, "body": "Can you post some more information abut what you are doing?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1429101010, "post_id": 29650056, "comment_id": 47440269, "body": "<code>touch spec_helper.rb</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1429105659, "post_id": 29650056, "comment_id": 47443753, "body": "I don&#39;t see a <code>spec_helper</code> file at all. This does not even look like a rails app. Sinatra maybe? You also look like you need to run <code>rspec --init</code> at the root of your project. This will create files like <code>spec_helper</code>. <a href=\"https://relishapp.com/rspec/docs/gettingstarted\" rel=\"nofollow noreferrer\">See Here</a> for more info."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1429106780, "post_id": 29650056, "comment_id": 47444678, "body": "Those tutorials are pretty badly out of date - I would recommend something like <a href=\"https://www.codeschool.com/courses/testing-with-rspec\" rel=\"nofollow noreferrer\">codeschool.com/courses/testing-with-rspec</a>. You definitely don&#180;t want to get started with RSpec 2 and then have to learn the new RSpec 3 syntax."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1429106453, "last_edit_date": 1429106453, "creation_date": 1429105777, "answer_id": 29652064, "question_id": 29650056, "link": "https://stackoverflow.com/questions/29650056/getting-errors-when-using-rspec/29652064#29652064", "title": "Getting errors when using rspec", "body": "<p>You are giving RSpec the wrong path to your spec file.</p>\n\n<p>The current working directory is <code>00_hello</code>. </p>\n\n<pre><code>mes-mbp:00_hello Me$ rspec 00_hello/hello_spec.rb\n</code></pre>\n\n<p>Will cause RSpec to look for <code>00_hello\\00_hello\\hello_spec.rb</code>.</p>\n\n<p>If you have run <code>rspec --init</code> may have a <code>.rspec</code> file which will require <code>spec_helper.rb</code> if it contains the line:</p>\n\n<pre><code>--require spec_helper\n</code></pre>\n\n<p>The most common practice when writing specs is to place specs in a directory named <code>spec</code>. That way you can run all the project specs by </p>\n\n<pre><code> $ rspec specs\n</code></pre>\n\n<h3>Added:</h3>\n\n<p>This is a very common structure for gems and other ruby projects:</p>\n\n<pre><code>lib/\n   hello.rb\nspec/\n   spec_helper.rb\n   hello_spec.rb\n</code></pre>\n\n<p>Its so common that RSpec will add the <code>/lib</code> and <code>/spec</code> directory to the load path automatically.</p>\n\n<p>So you can do:</p>\n\n<pre><code># spec/hello_spec.rb\nrequire 'spec_helper'\nrequire 'lib/hello' # instead of a relative path! Wehoo.\n\nRSpec.describe Hello do\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4625181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b8c74ec2be542aec97293666f6131d8?s=128&d=identicon&r=PG&f=1", "display_name": "M.Larzo", "link": "https://stackoverflow.com/users/4625181/m-larzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429106453, "creation_date": 1429100440, "last_edit_date": 1429101518, "question_id": 29650056, "link": "https://stackoverflow.com/questions/29650056/getting-errors-when-using-rspec", "title": "Getting errors when using rspec", "body": "<p>I'm doing a tutorial on rspec and keep getting errors whenever I try to perform rake tests or run rspec manually through the terminal. Here's what I get:</p>\n\n<pre><code>mes-mbp:00_hello Me$ ls\nhello.rb    hello_spec.rb   index.html\nmes-mbp:00_hello Me$ rspec 00_hello/hello_spec.rb\n/Users/Me/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- spec_helper (LoadError)\n    from /Users/Me/.rvm/rubies/ruby-2.2.0/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/configuration.rb:1181:in `block in requires='\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/configuration.rb:1181:in `each'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/configuration.rb:1181:in `requires='\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/configuration_options.rb:110:in `block in process_options_into'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/configuration_options.rb:109:in `each'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/configuration_options.rb:109:in `process_options_into'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/configuration_options.rb:22:in `configure'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:96:in `setup'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:85:in `run'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:70:in `run'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:38:in `invoke'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.2.3/exe/rspec:4:in `&lt;top (required)&gt;'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `load'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/bin/rspec:23:in `&lt;main&gt;'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `eval'\n    from /Users/Me/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>Can anyone tell me what I'm doing wrong?</p>\n\n<p>Edit: More information on what I'm doing as requested:\nI'm following along with <a href=\"http://testfirst.org/learn_ruby\" rel=\"nofollow\">this</a> tutorial. In the code above I'm trying to run tests on the hello.rb file that are in the hello_spec.rb file which has the 'require hello' code in it. </p>\n"}, {"tags": ["html", "ruby", "parsing", "mechanize"], "comments": [{"owner": {"reputation": 1036, "user_id": 2692173, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ff748bb6d3ea07a823b46e8d48fe2842?s=128&d=identicon&r=PG&f=1", "display_name": "neo-code", "link": "https://stackoverflow.com/users/2692173/neo-code"}, "edited": false, "score": 0, "creation_date": 1429100344, "post_id": 29649213, "comment_id": 47439788, "body": "Not able to understand your second question."}, {"owner": {"reputation": 21, "user_id": 1255740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87b2034001a1dd95ef98509dcf5d2a3?s=128&d=identicon&r=PG", "display_name": "Duncan Idaho", "link": "https://stackoverflow.com/users/1255740/duncan-idaho"}, "reply_to_user": {"reputation": 1036, "user_id": 2692173, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ff748bb6d3ea07a823b46e8d48fe2842?s=128&d=identicon&r=PG&f=1", "display_name": "neo-code", "link": "https://stackoverflow.com/users/2692173/neo-code"}, "edited": false, "score": 0, "creation_date": 1429101113, "post_id": 29649213, "comment_id": 47440358, "body": "My idea was to let mechanize download the website and access it using page.body. Then remove there the characters that i need and then ask the page to re-load/re-parser itself so that i have the forms and links accessible again."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 1255740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87b2034001a1dd95ef98509dcf5d2a3?s=128&d=identicon&r=PG", "display_name": "Duncan Idaho", "link": "https://stackoverflow.com/users/1255740/duncan-idaho"}, "edited": false, "score": 0, "creation_date": 1429103724, "post_id": 29651145, "comment_id": 47442196, "body": "Well, i want to use mechanize to parse the html data and give me the list of links, forms, nokogiri output, etc... But, Mechanize (and Nokogiri) cannot parse the html at all due to those 2 special characters so what i need/want to do is just remove them."}], "tags": [], "owner": {"reputation": 1243, "user_id": 1891599, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a1beeb83f38d8dc7c1499b686161613?s=128&d=identicon&r=PG", "display_name": "AshwinKumarS", "link": "https://stackoverflow.com/users/1891599/ashwinkumars"}, "is_accepted": false, "score": 0, "last_activity_date": 1429103341, "creation_date": 1429103341, "answer_id": 29651145, "question_id": 29649213, "link": "https://stackoverflow.com/questions/29649213/ruby-mechanize-how-to-parse-the-site-response-before-mechanize-parses-it/29651145#29651145", "title": "Ruby Mechanize - How to parse the site response before Mechanize parses it?", "body": "<p>Do not use mechanize to grab the html data if you want to handle parsing yourself. Use some other gem to just get the html and then parse it manually. What is the point using mechanize if you are not going to use its parsing ? :|</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 1255740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87b2034001a1dd95ef98509dcf5d2a3?s=128&d=identicon&r=PG", "display_name": "Duncan Idaho", "link": "https://stackoverflow.com/users/1255740/duncan-idaho"}, "is_accepted": false, "score": 1, "last_activity_date": 1429106358, "creation_date": 1429106358, "answer_id": 29652309, "question_id": 29649213, "link": "https://stackoverflow.com/questions/29649213/ruby-mechanize-how-to-parse-the-site-response-before-mechanize-parses-it/29652309#29652309", "title": "Ruby Mechanize - How to parse the site response before Mechanize parses it?", "body": "<p>ok, I found the solution:\nYou can define your own html parser so that it can act like a hook.</p>\n\n<pre><code>class MyParser\n  def self.parse(thing, url = nil, encoding = nil, options = Nokogiri::XML::ParseOptions::DEFAULT_HTML, &amp;block)\n    thing = thing.gsub(/\\x00/,\"\")\n    Nokogiri::HTML::Document.parse(thing, url, encoding, options, &amp;block)\n  end\nend\nagent.html_parser = MyParser\nsearch_page = agent.get \"https://www.example.com\"\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 1255740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87b2034001a1dd95ef98509dcf5d2a3?s=128&d=identicon&r=PG", "display_name": "Duncan Idaho", "link": "https://stackoverflow.com/users/1255740/duncan-idaho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1429106358, "creation_date": 1429097908, "question_id": 29649213, "link": "https://stackoverflow.com/questions/29649213/ruby-mechanize-how-to-parse-the-site-response-before-mechanize-parses-it", "title": "Ruby Mechanize - How to parse the site response before Mechanize parses it?", "body": "<p><strong>Problem:</strong></p>\n\n<p>When parsing a website there are some characters that make Mechanize do not parse it correctly.</p>\n\n<p><strong>Solution Proposed</strong> </p>\n\n<ul>\n<li>Parse out the response from the website to remove those characters\nBEFORE mechanize tries to parse it.</li>\n<li>Or, remove those characters after Mechanize has parsed the web and then make Mechanize re-parse it to get the links, forms, etc...</li>\n</ul>\n\n<p><strong>Question</strong></p>\n\n<ul>\n<li><p>How can I access the website response BEFORE it is parsed?</p></li>\n<li><p>Or, how can I parse it afterwards and then ask Mechanize to reload it?</p></li>\n</ul>\n\n<p>thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1429096907, "post_id": 29648859, "comment_id": 47437517, "body": "You can&#39;t name your variable <code>def</code> - it&#39;s keyword reserved for method definitions."}, {"owner": {"reputation": 585, "user_id": 3752389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/478fc2395b897f8c9b7b6131950ea5ef?s=128&d=identicon&r=PG", "display_name": "Vinay Kashyap T S", "link": "https://stackoverflow.com/users/3752389/vinay-kashyap-t-s"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1429097126, "post_id": 29648859, "comment_id": 47437633, "body": "For illustrating i just used as def. I have updated my question."}], "answers": [{"comments": [{"owner": {"reputation": 585, "user_id": 3752389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/478fc2395b897f8c9b7b6131950ea5ef?s=128&d=identicon&r=PG", "display_name": "Vinay Kashyap T S", "link": "https://stackoverflow.com/users/3752389/vinay-kashyap-t-s"}, "edited": false, "score": 0, "creation_date": 1429097199, "post_id": 29648942, "comment_id": 47437680, "body": "For illustrating i just used as def. I have updated my question."}, {"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "reply_to_user": {"reputation": 585, "user_id": 3752389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/478fc2395b897f8c9b7b6131950ea5ef?s=128&d=identicon&r=PG", "display_name": "Vinay Kashyap T S", "link": "https://stackoverflow.com/users/3752389/vinay-kashyap-t-s"}, "edited": false, "score": 0, "creation_date": 1429097916, "post_id": 29648942, "comment_id": 47438151, "body": "Good to know @user3752389"}], "tags": [], "owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1429098065, "last_edit_date": 1495539817, "creation_date": 1429097100, "answer_id": 29648942, "question_id": 29648859, "link": "https://stackoverflow.com/questions/29648859/ruby-on-rails-accessing-custom-class-attributes-from-its-object/29648942#29648942", "title": "ruby on rails accessing custom class attributes from its object", "body": "<p>As you are using <code>def</code> as a keyword to define the method, that means <code>def</code> is a reserved keyword. You can't use reserved keywords as a variable.</p>\n\n<p>You just need to rename your variable name from <code>def</code> to <code>something_else</code> and it should work! Your code will look like this:</p>\n\n<pre><code>def updateDefaultValues\n  obj = Defaults.new\n  obj.value_2 = Table.maximum(\"price\") \n  obj.data.data_1\nend\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p><strong>As per OP's <a href=\"https://stackoverflow.com/questions/29648859/ruby-on-rails-accessing-custom-class-attributes-from-its-object#comment47437680_29648942\">comment</a> &amp; updated question, he had used <code>def</code> just as an example, here is the updated answer:</strong></p>\n\n<p>You may need <a href=\"http://apidock.com/ruby/Module/attr_accessor\" rel=\"nofollow noreferrer\">attr_accessor</a> to make attrs accessible:</p>\n\n<pre><code>class Defaults\n  attr_accessor :value_1, :value_2, :data\n\n  ...\n  ...\nend\n\nclass Data\n  attr_accessor :data_1\n\n  ...\n  ...\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1429097305, "post_id": 29648990, "comment_id": 47437738, "body": "BTW, it&#39;s very basic stuff, so I advice you to go through some Ruby tutorial."}, {"owner": {"reputation": 585, "user_id": 3752389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/478fc2395b897f8c9b7b6131950ea5ef?s=128&d=identicon&r=PG", "display_name": "Vinay Kashyap T S", "link": "https://stackoverflow.com/users/3752389/vinay-kashyap-t-s"}, "edited": false, "score": 0, "creation_date": 1429097695, "post_id": 29648990, "comment_id": 47437981, "body": "This worked for me. I am new to rails. Thank you @Marek"}, {"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "reply_to_user": {"reputation": 585, "user_id": 3752389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/478fc2395b897f8c9b7b6131950ea5ef?s=128&d=identicon&r=PG", "display_name": "Vinay Kashyap T S", "link": "https://stackoverflow.com/users/3752389/vinay-kashyap-t-s"}, "edited": false, "score": 0, "creation_date": 1429098000, "post_id": 29648990, "comment_id": 47438217, "body": "Good choice @user3752389 :)"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 4, "last_activity_date": 1429097209, "creation_date": 1429097209, "answer_id": 29648990, "question_id": 29648859, "link": "https://stackoverflow.com/questions/29648859/ruby-on-rails-accessing-custom-class-attributes-from-its-object/29648990#29648990", "title": "ruby on rails accessing custom class attributes from its object", "body": "<p>You should use <a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-i-attr_accessor\" rel=\"nofollow\"><code>attr_accessor</code></a>:</p>\n\n<pre><code>class Defaults\n  attr_accessor :value_1, :value_2, :data\n  # ...\nend\ndefaults = Defaults.new\ndefaults.value_1 = 1\n# =&gt; 1\ndefaults.value_1\n# =&gt; 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1429099173, "post_id": 29649206, "comment_id": 47439019, "body": "What&#39;s the advantage of adding this method by hand?"}], "tags": [], "owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "is_accepted": false, "score": -1, "last_activity_date": 1429097893, "creation_date": 1429097893, "answer_id": 29649206, "question_id": 29648859, "link": "https://stackoverflow.com/questions/29648859/ruby-on-rails-accessing-custom-class-attributes-from-its-object/29649206#29649206", "title": "ruby on rails accessing custom class attributes from its object", "body": "<p>Add <code>value_2</code> method in Defaults class</p>\n\n<pre><code>class Defaults\n  def initialize\n    @value_1 = \"1234\"\n    @value_2 = nil\n    @data = Data.new\n  end\n\n  def value_2\n    @value_2\n  end\nend\n\nclass Data\n   def initialize\n     @data_1 = nil\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 585, "user_id": 3752389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/478fc2395b897f8c9b7b6131950ea5ef?s=128&d=identicon&r=PG", "display_name": "Vinay Kashyap T S", "link": "https://stackoverflow.com/users/3752389/vinay-kashyap-t-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1049, "favorite_count": 0, "accepted_answer_id": 29648990, "answer_count": 3, "score": 0, "last_activity_date": 1429098065, "creation_date": 1429096854, "last_edit_date": 1429096984, "question_id": 29648859, "link": "https://stackoverflow.com/questions/29648859/ruby-on-rails-accessing-custom-class-attributes-from-its-object", "title": "ruby on rails accessing custom class attributes from its object", "body": "<p>I have a custom class in my application controller. Like below:</p>\n\n<pre><code>class Defaults\n  def initialize\n    @value_1 = \"1234\"\n    @value_2 = nil\n    @data = Data.new\n  end\nend\n\nclass Data\n   def initialize\n     @data_1 = nil\n   end\nend\n</code></pre>\n\n<p>Now in my controller method i have created an object of type Defaults <br/></p>\n\n<pre><code>def updateDefaultValues\n  defaults = Defaults.new\n\n  # i am unable to update the value, it says undefined method\n  defaults.value_2 = Table.maximum(\"price\") \n  defaults.data.data_1 = defaults.value_2 * 0.3\n\nend\n</code></pre>\n\n<p>How to access value_2 from defaults object? <br/></p>\n\n<pre><code>defaults.value_2\n</code></pre>\n\n<p>Also, how to access data_1 attribute from data object within defaults object?<br/></p>\n\n<pre><code>defaults.data.data_1\n</code></pre>\n"}, {"tags": ["ruby", "postgresql", "gem"], "comments": [{"owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "edited": false, "score": 0, "creation_date": 1429099121, "post_id": 29648461, "comment_id": 47438986, "body": "Please post your database.yml file. (Be sure to first remove any passwords in it)"}, {"owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 0, "creation_date": 1429099660, "post_id": 29648461, "comment_id": 47439372, "body": "Have you required activerecord-jdbcpostgresql-adaptor anywhere?"}, {"owner": {"reputation": 4100, "user_id": 436014, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/530533c54778b2615fb573a89ce8abb1?s=128&d=identicon&r=PG", "display_name": "waffl", "link": "https://stackoverflow.com/users/436014/waffl"}, "edited": false, "score": 0, "creation_date": 1429100556, "post_id": 29648461, "comment_id": 47439934, "body": "I&#39;ll add my database.yml, i didn&#39;t require that adaptor anywhere."}], "answers": [{"tags": [], "owner": {"reputation": 4100, "user_id": 436014, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/530533c54778b2615fb573a89ce8abb1?s=128&d=identicon&r=PG", "display_name": "waffl", "link": "https://stackoverflow.com/users/436014/waffl"}, "is_accepted": false, "score": 0, "last_activity_date": 1429100727, "creation_date": 1429100727, "answer_id": 29650166, "question_id": 29648461, "link": "https://stackoverflow.com/questions/29648461/could-not-load-active-record-connection-adapters-postgresql-adapter/29650166#29650166", "title": "Could not load &#39;active_record/connection_adapters/postgresql_adapter&#39;", "body": "<p>A next debugging step I took was to try using rvm to install a whole new version of ruby. This worked, so I used rvm to completely remove my old version of ruby with <code>rvm remove 2.0.0-p598</code> and reinstall it again <code>rvm install 2.0.0-p598</code>.</p>\n\n<p>I still have no idea what may have happened, but perhaps somehow something in the gem caches/builds were corrupted, so if anyone runs into a weird error like this where everything is in place but still doesn't work, try clearing everything with rvm and reinstalling.</p>\n"}], "owner": {"reputation": 4100, "user_id": 436014, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/530533c54778b2615fb573a89ce8abb1?s=128&d=identicon&r=PG", "display_name": "waffl", "link": "https://stackoverflow.com/users/436014/waffl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2003, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429103343, "creation_date": 1429095634, "last_edit_date": 1429103343, "question_id": 29648461, "link": "https://stackoverflow.com/questions/29648461/could-not-load-active-record-connection-adapters-postgresql-adapter", "title": "Could not load &#39;active_record/connection_adapters/postgresql_adapter&#39;", "body": "<p>I have a Sinatra app using Postgres via Activerecord. I'm using RVM on a Mac and a number of gems including:</p>\n\n<pre><code>activerecord\nactivesupport\n</code></pre>\n\n<p>When I run the server (thin), I get an error:</p>\n\n<blockquote>\n  <p>Could not load 'active_record/connection_adapters/postgresql_adapter'.\n  Make sure that the adapter in config/database.yml is valid. If you use\n  an adapter other than 'mysql', 'mysql2', 'postgresql' or 'sqlite3' add\n  the necessary adapter gem to the Gemfile.</p>\n</blockquote>\n\n<p>The adapter is set to <code>postgresql</code> in the config, and I've checked my RVM and paths: My Gem install path is set properly, and I can see the appropriate gems installed properly, and the specific adapter is there too, so really not sure what could be happening or how to further troubleshoot this?</p>\n\n<p>Using Ruby 2.0.0-p598, activerecord and activesupport 4.1.4</p>\n\n<p>--</p>\n\n<p>Further debugging attempts:</p>\n\n<p><code>ruby -v</code></p>\n\n<blockquote>\n  <p>ruby 2.0.0p598 (2014-11-13 revision 48408) [x86_64-darwin14.0.0]</p>\n</blockquote>\n\n<p><code>which ruby</code></p>\n\n<blockquote>\n  <p>/Users/user/.rvm/rubies/ruby-2.0.0-p598/bin/ruby</p>\n</blockquote>\n\n<p><code>gem env</code> (relevant parts):</p>\n\n<blockquote>\n  <ul>\n  <li>EXECUTABLE DIRECTORY: /Users/user/.rvm/gems/ruby-2.0.0-p598/bin</li>\n  <li><p>GEM PATHS:</p>\n  \n  <ul>\n  <li>/Users/user/.rvm/gems/ruby-2.0.0-p598</li>\n  <li>/Users/user/.rvm/gems/ruby-2.0.0-p598@global</li>\n  </ul></li>\n  <li><p>SHELL PATH:</p>\n  \n  <ul>\n  <li>/Users/user/.rvm/gems/ruby-2.0.0-p598/bin</li>\n  <li>/Users/user/.rvm/gems/ruby-2.0.0-p598@global/bin</li>\n  <li>/Users/user/.rvm/rubies/ruby-2.0.0-p598/bin</li>\n  </ul></li>\n  </ul>\n</blockquote>\n\n<p><code>ls $GEM_HOME/gems</code></p>\n\n<blockquote>\n  <p>activerecord-4.1.4\n  activesupport-4.1.4</p>\n</blockquote>\n\n<p>Really at a loss for what else I can look into</p>\n\n<hr>\n\n<p><code>database.yml</code></p>\n\n<pre><code>development:\n  adapter: postgresql\n  database: example_db\n  username: example_user\n  password: example_password\n  host: localhost\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "paperclip"], "comments": [{"owner": {"reputation": 9917, "user_id": 100342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af270ac26bf744c2ef2534a138bf7f67?s=128&d=identicon&r=PG", "display_name": "janfoeh", "link": "https://stackoverflow.com/users/100342/janfoeh"}, "edited": false, "score": 1, "creation_date": 1429095461, "post_id": 29647970, "comment_id": 47436640, "body": "Looks to me as if you named your <code>&lt;input type=&quot;file&quot;&gt;</code> form element wrong (<code>uploaded_data</code> instead of <code>image</code>). Please add the form partial and a log entry showing the POSTed parameters from the form submit."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1429095532, "post_id": 29647970, "comment_id": 47436682, "body": "Is <i>BLUBBBBBBBBBBBBBBBBBBBBBBBBBBB</i> relevant to your question? ;-)"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429099828, "post_id": 29647970, "comment_id": 47439481, "body": "yes thats absolutely essential ;)"}, {"owner": {"reputation": 971, "user_id": 2301404, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a58cf6b9f5d523fa29d55b184ad630ba?s=128&d=identicon&r=PG", "display_name": "Sagar.Patil", "link": "https://stackoverflow.com/users/2301404/sagar-patil"}, "edited": false, "score": 0, "creation_date": 1429103630, "post_id": 29647970, "comment_id": 47442119, "body": "can you show the output of params[:upload]"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "reply_to_user": {"reputation": 971, "user_id": 2301404, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a58cf6b9f5d523fa29d55b184ad630ba?s=128&d=identicon&r=PG", "display_name": "Sagar.Patil", "link": "https://stackoverflow.com/users/2301404/sagar-patil"}, "edited": false, "score": 0, "creation_date": 1429108384, "post_id": 29647970, "comment_id": 47445935, "body": "@Sagar.Patil thanks, when you see my initial question added code there is also a puts for the purams. --- I&#39;ve added the output of <code>puts param[:upload]</code> above"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429133240, "post_id": 29647970, "comment_id": 47461998, "body": "have you seen my post?"}], "answers": [{"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429179241, "post_id": 29671081, "comment_id": 47481066, "body": "hi, thanks, for this solution, but now i got this error <code>Upload model missing required attr_accessor for &#39;image_file_name&#39;</code>"}, {"owner": {"reputation": 971, "user_id": 2301404, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a58cf6b9f5d523fa29d55b184ad630ba?s=128&d=identicon&r=PG", "display_name": "Sagar.Patil", "link": "https://stackoverflow.com/users/2301404/sagar-patil"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 1, "creation_date": 1429179623, "post_id": 29671081, "comment_id": 47481316, "body": "have u used the paperclip generator to generate required migration and migrated them. Because it looks like u dont have required columns in or model/table"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429275805, "post_id": 29671081, "comment_id": 47535799, "body": "Hi Thanks. I run <code>rails generate paperclip upload [image]</code> .. so then there was a migrate file created <code>db&#47;migrate&#47;20150417125122_add_attachment_[image]_to_uploads.&zwnj;&#8203;rb</code> but when I run this i got this error: <code>ActiveRecord::IllegalMigrationNameError: Illegal name for migration file: &#47;var&#47;www&#47;xyz&#47;xyz&#47;db&#47;migrate&#47;20150417125122_add_attachment_[i&zwnj;&#8203;mage]_to_uploads.rb         (only lower case letters, numbers, and &#39;_&#39; allowed)</code>"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429481260, "post_id": 29671081, "comment_id": 47606071, "body": "Thanks, worked now, but I have a second question as well :) ... can you help me with this as well? <a href=\"http://stackoverflow.com/questions/29736467/ruby-on-rails-paperclip-questions\" title=\"ruby on rails paperclip questions\">stackoverflow.com/questions/29736467/&hellip;</a>"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429482350, "post_id": 29671081, "comment_id": 47606387, "body": "I&#39;ve done the migration ... but now I have new colums in my upload table in db .. thats not that what I wanted. I&#39;ve added a screenshot in itial question"}], "tags": [], "owner": {"reputation": 971, "user_id": 2301404, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a58cf6b9f5d523fa29d55b184ad630ba?s=128&d=identicon&r=PG", "display_name": "Sagar.Patil", "link": "https://stackoverflow.com/users/2301404/sagar-patil"}, "is_accepted": false, "score": 1, "last_activity_date": 1429182151, "last_edit_date": 1429182151, "creation_date": 1429177685, "answer_id": 29671081, "question_id": 29647970, "link": "https://stackoverflow.com/questions/29647970/errors-while-using-paperclip-in-rails-app/29671081#29671081", "title": "Errors while using paperclip in rails app", "body": "<p>your column for image is <code>image</code> from your model structure. But the data in params the image is coming in <code>params[:model_name][uploaded_data]</code>. \nYour model doesnt contain any column with name <code>uploaded_data</code> that too for a attached_file</p>\n\n<p>In your <code>form_for</code> you should have this</p>\n\n<pre><code>= f.file_field :image\n</code></pre>\n\n<p>not</p>\n\n<pre><code>= f.file_field :uploaded_data\n</code></pre>\n\n<p>In this way your params would look like </p>\n\n<pre><code>{\"name\"=&gt;\"TEST\", \"image\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x00000005518a38 @original_filename=\"2014-09-26 18.14.22.jpg\", @content_type=\"image/jpeg\", @headers=\"Content-Disposition: form-data; name=\\\"upload[uploaded_data]\\\"; filename=\\\"2014-09-26 18.14.22.jpg\\\"\\r\\nContent-Type: image/jpeg\\r\\n\", @tempfile=#&lt;Tempfile:/tmp/RackMultipart20150415-12671-190wpi5&gt;&gt;}\n</code></pre>\n\n<p>And it wont give you any error</p>\n\n<p>GO through the gem on github <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow\">paperclip</a></p>\n\n<p>You nee to create migration file like this:</p>\n\n<pre><code>class AddAvatarColumnsToUsers &lt; ActiveRecord::Migration\n  def self.up\n    add_attachment :model_name, :[image]\n  end\n\n  def self.down\n    remove_attachment :model_name, :[image]\n  end\nend\n</code></pre>\n\n<p>Or use the generator:</p>\n\n<pre><code>rails generate paperclip model_name [image]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429509415, "post_id": 29740144, "comment_id": 47613491, "body": "can I add this in the migrattion file?"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429520864, "post_id": 29740144, "comment_id": 47619804, "body": "thanks, I have done what you have said ... but without any effect. I called <code>sudo rake db:migrate</code> after changing the migration file. but nothing changed in database..."}, {"owner": {"reputation": 1099, "user_id": 4762756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rm0a3.jpg?s=128&g=1", "display_name": "davidwessman", "link": "https://stackoverflow.com/users/4762756/davidwessman"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 1, "creation_date": 1429520949, "post_id": 29740144, "comment_id": 47619872, "body": "Did you rollback before? Was the new migration run? Why do you use sudo? Are you doing this directly on the server? In that case - ALWAYS make this things as the server-user running the railsapp, for example www-data."}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429521248, "post_id": 29740144, "comment_id": 47620087, "body": "yes i&#39;ve done the rollback before. Hope so. My server is at the moment a virtual debian server on my computer."}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429521357, "post_id": 29740144, "comment_id": 47620152, "body": "I tried it with <code>sudo rake db:migrate 20150417125122_changeuploadtopaperclip.rb</code> again and got this error:  <code>Don&#39;t know how to build task &#39;20150417125122_changeuploadtopaperclip.rb&#39;</code>"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429521766, "post_id": 29740144, "comment_id": 47620434, "body": "thanks, but nothing changed. <code>Don&#39;t know how to build task &#39;20150417125122_change_upload_to_paperclip.rb&#39; </code>"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429522032, "post_id": 29740144, "comment_id": 47620602, "body": "okay now it runs without error, bot nothing changed on database"}, {"owner": {"reputation": 1099, "user_id": 4762756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rm0a3.jpg?s=128&g=1", "display_name": "davidwessman", "link": "https://stackoverflow.com/users/4762756/davidwessman"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429522185, "post_id": 29740144, "comment_id": 47620700, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/75694/discussion-between-davidwessman-and-felix\">continue this discussion in chat</a>."}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429565312, "post_id": 29740144, "comment_id": 47649737, "body": "Hi Sorry, was the whole day on road. Thanks for your help. I&#39;ve checked it up and renamed the file like in your post. I got this error: ` ActiveRecord::UnknownMigrationVersionError: No migration with version number 20150417125122`"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429689958, "post_id": 29740144, "comment_id": 47711473, "body": "Hi now I got this error: <code>Upload model missing required attr_accessor for &#39;upload_file_name&#39;</code>"}, {"owner": {"reputation": 1099, "user_id": 4762756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rm0a3.jpg?s=128&g=1", "display_name": "davidwessman", "link": "https://stackoverflow.com/users/4762756/davidwessman"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 1, "creation_date": 1429690865, "post_id": 29740144, "comment_id": 47712050, "body": "Go into the chat: <a href=\"http://chat.stackoverflow.com/rooms/75694/discussion-between-davidwessman-and-felix\">chat.stackoverflow.com/rooms/75694/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1099, "user_id": 4762756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rm0a3.jpg?s=128&g=1", "display_name": "davidwessman", "link": "https://stackoverflow.com/users/4762756/davidwessman"}, "is_accepted": true, "score": 1, "last_activity_date": 1429521617, "last_edit_date": 1429521617, "creation_date": 1429509031, "answer_id": 29740144, "question_id": 29647970, "link": "https://stackoverflow.com/questions/29647970/errors-while-using-paperclip-in-rails-app/29740144#29740144", "title": "Errors while using paperclip in rails app", "body": "<p>To revert the migration from Paperclip you can use either:</p>\n\n<pre><code>rake db:migrate:down VERSION=_current_migration_number\n</code></pre>\n\n<p>or</p>\n\n<pre><code>rake db:rollback\n</code></pre>\n\n<p>Until your previous state. Then you can create a new migration like this:</p>\n\n<pre><code>class ChangeUploadToPaperclip &lt; ActiveRecord::Migration\n  change do\n    rename_column :uploads, :content_type, :upload_content_type \n    rename_column :uploads, :filename, :upload_filename\n    rename_column :uploads, :size, :upload_file_size\n    add_column :uploads, :upload_updated_at, :datetime\n    # Warning: the following will remove your old data, irreversible.\n    remove_column :uploads, :width \n    remove_column :uploads, :height \n    remove_column :uploads, :thumbnail \n  end\nend\n</code></pre>\n\n<p>But there could be potential errors between your old storage and Paperclips way of storing files.</p>\n\n<p>In this answer I assumed that your model <code>has_attached_file :upload</code>.</p>\n\n<p>If you have another name for the attached file, update every <code>upload</code> and <code>uploads</code> accordingly.</p>\n\n<p><strong>Edit</strong>\nThe migration file needs to have a certain name:</p>\n\n<pre><code>20150417125122_change_upload_to_paperclip.rb\n</code></pre>\n\n<p>(the date-string is auto generated, I copied this from comment below.)</p>\n\n<p>This is because Rails will look for <code>ChangeUploadToPaperclip</code> only if there is underscore between. </p>\n\n<p>If you have <code>changeuploadtopaperclip.rb</code> it would look for <code>Changeuploadtopaperclip</code>.</p>\n\n<p><strong>Running special migration</strong></p>\n\n<pre><code>rake db:migrate:up VERSION=20150417125122\n</code></pre>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 29740144, "answer_count": 2, "score": 0, "last_activity_date": 1429521617, "creation_date": 1429094198, "last_edit_date": 1429482412, "question_id": 29647970, "link": "https://stackoverflow.com/questions/29647970/errors-while-using-paperclip-in-rails-app", "title": "Errors while using paperclip in rails app", "body": "<p>At the moment I try to replace attachment_fu fileuploading plugin with paperclip.</p>\n\n<p>But there are some errors while uploading:</p>\n\n<p>My controller looks like this:</p>\n\n<pre><code>def create\nadd_breadcrumb 'breadcrumb.upload_file', {:action =&gt; :new}\n\nputs \"BLUBBBBBBBBBBBBBBBBBBBBBBBBBBB\"\nputs params[:upload]\n\n    @upload = Upload.create(params[:upload])\n    @upload.lecturer_id = current_user.id\n    if @upload.save\n        flash[:notice] = I18n.t(\"flash.saved\")\n        redirect_to :action =&gt; :index\n    else\n        render :action =&gt; :new\n    end\nend\n</code></pre>\n\n<p>and my model like this:</p>\n\n<pre><code>puts has_attached_file :image, :default_url =&gt; :file_system\nvalidates_attachment_content_type :image, :content_type =&gt; [:image, 'audio/mpeg', 'application/mp3', 'application/octet-stream']\n</code></pre>\n\n<p>While uploading I got this error:</p>\n\n<pre><code>ActiveRecord::UnknownAttributeError in UploadsController#create\n\nunknown attribute: uploaded_data\n\napp/controllers/uploads_controller.rb:24:in `create'\n</code></pre>\n\n<p>Update:</p>\n\n<pre><code>{\"name\"=&gt;\"TEST\", \"uploaded_data\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x00000005518a38 @original_filename=\"2014-09-26 18.14.22.jpg\", @content_type=\"image/jpeg\", @headers=\"Content-Disposition: form-data; name=\\\"upload[uploaded_data]\\\"; filename=\\\"2014-09-26 18.14.22.jpg\\\"\\r\\nContent-Type: image/jpeg\\r\\n\", @tempfile=#&lt;Tempfile:/tmp/RackMultipart20150415-12671-190wpi5&gt;&gt;}\n</code></pre>\n\n<p>Update: thats not that what I wanted. The migration generetad some new columns in database, how can I return to the previus version? is there a demigrate coammand?</p>\n\n<p><img src=\"https://i.stack.imgur.com/kvI4L.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1429095924, "post_id": 29647961, "comment_id": 47436931, "body": "You should handle editable/non-editable attrs in same <code>update</code> action instead of creating different <code>update_*</code> action"}], "answers": [{"comments": [{"owner": {"reputation": 6788, "user_id": 1035375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9FOS.jpg?s=128&g=1", "display_name": "dre-hh", "link": "https://stackoverflow.com/users/1035375/dre-hh"}, "edited": false, "score": 0, "creation_date": 1429098339, "post_id": 29648575, "comment_id": 47438444, "body": "i would use form objects instead, but okeish"}], "tags": [], "owner": {"reputation": 713, "user_id": 4788075, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/03ac1d3de35f9e5531559aad52bcd72c?s=128&d=identicon&r=PG", "display_name": "Gena  Shumilkin", "link": "https://stackoverflow.com/users/4788075/gena-shumilkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1429095998, "creation_date": 1429095998, "answer_id": 29648575, "question_id": 29647961, "link": "https://stackoverflow.com/questions/29647961/how-can-i-make-two-versions-of-def-update-in-the-controller-to-work/29648575#29648575", "title": "How can I make two versions of def update in the controller to work?", "body": "<p>I recommend to use forms in this case. Forms is special abstraction layer for representation of model. This is term of php-frameworks (as Zend and so on). In my projects I call it \"type\" usually. For example:</p>\n\n<p>Model:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n\n  validates :body, presence: true\n  validates :title, presence: true\n\nend\n</code></pre>\n\n<p>Types:</p>\n\n<pre><code>module BaseType\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n\n    def model_name\n      superclass.model_name\n    end\n\n    def name\n      superclass.name\n    end\n  end\nend\n\nclass PostEditAdminType &lt; Post # model Post is parent class for type\n  include BaseType\n\n  attr_accessor :current_user\n  attr_accessible :title, :body # can edit both field title and body\nend\n\nclass PostEditRegularType &lt; Post\n  include BaseType\n\n  attr_accessor :current_user\n  attr_accessible :body # can edit body field only\nend\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>def update\n  post = Post.find(params[:id])\n  @post = if current_user.admin?\n    post.becomes PostEditAdminType\n  else\n    post.becomes PostEditRegularType\n  end\n\n  if @post.update_attributes(params[:post])\n    redirect_to past_path(@past)\n  else\n    f(:error)\n    render :edit\n  end\nend\n</code></pre>\n\n<p>It's really good practice and the best architecture in same cases in my opinion.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 4681394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sf2Yk.jpg?s=128&g=1", "display_name": "FunTimeFreddie", "link": "https://stackoverflow.com/users/4681394/funtimefreddie"}, "is_accepted": false, "score": 1, "last_activity_date": 1429096724, "creation_date": 1429096724, "answer_id": 29648813, "question_id": 29647961, "link": "https://stackoverflow.com/questions/29647961/how-can-i-make-two-versions-of-def-update-in-the-controller-to-work/29648813#29648813", "title": "How can I make two versions of def update in the controller to work?", "body": "<p>The form_for can only send to one controller action.  You will therefore require a third action which the form_for sends to, and have this action first determine whether you are admin/non-admin and then send you to either of your two 'def update methods' accordingly (taking the parameters with it).  E.g., (and this is entirely pseudo-code)</p>\n\n<pre><code>def receive_form\n\n# create variable 'type' that returns whether you are an admin or non-admin\n\n   if type = \"Admin\"\n      # send to your 'def update' for admins, whatever you've named this\n      redirect_to admin_update_path\n   else\n      # send to your 'def update' for non-admins\n      redirect_to non_admin_update_path\n   end\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2180, "user_id": 1659807, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KzDNe.png?s=128&g=1", "display_name": "duykhoa", "link": "https://stackoverflow.com/users/1659807/duykhoa"}, "is_accepted": false, "score": 1, "last_activity_date": 1429098865, "last_edit_date": 1429098865, "creation_date": 1429097461, "answer_id": 29649076, "question_id": 29647961, "link": "https://stackoverflow.com/questions/29647961/how-can-i-make-two-versions-of-def-update-in-the-controller-to-work/29649076#29649076", "title": "How can I make two versions of def update in the controller to work?", "body": "<p>You can use strong parameter gem, it will only permit some attributes. So you can write some code relates to</p>\n\n<pre><code>if current_user.admin?\n  params.require(:user).allow :name, :role\nelse\n  params.require(:user).allow :name\nend\n</code></pre>\n\n<p>So, if you are an admin user, you can change the role of an user, otherwise, you can edit the name only.</p>\n\n<p>If you want an normal user can only edit his/her account, checkout <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow\">cancancan</a> gem. It makes more sense, right? If you are a normal user, you should only update your account only.</p>\n\n<p>Sample code using cancancan:</p>\n\n<pre><code>class Ability\n  include CanCan::Ability\n\n  def initialize(user)\n    user ||= User.new\n    if user.admin?\n      can :manage, :all\n    else\n      can :manage, User, id: user.id\n    end\n  end\nend\n</code></pre>\n\n<p>If you use rails 4 with strong parameter, please don't forget <a href=\"https://github.com/CanCanCommunity/cancancan#strong-parameters\" rel=\"nofollow\">sanitize your params</a>. </p>\n\n<p>Let me know if you want more details.</p>\n"}, {"tags": [], "owner": {"reputation": 659, "user_id": 4535724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fead491311677ae61a6ecb1863e0ed?s=128&d=identicon&r=PG", "display_name": "Tucker", "link": "https://stackoverflow.com/users/4535724/tucker"}, "is_accepted": false, "score": 0, "last_activity_date": 1429098393, "last_edit_date": 1429098393, "creation_date": 1429097588, "answer_id": 29649113, "question_id": 29647961, "link": "https://stackoverflow.com/questions/29647961/how-can-i-make-two-versions-of-def-update-in-the-controller-to-work/29649113#29649113", "title": "How can I make two versions of def update in the controller to work?", "body": "<p>My solution would to have two separate models, one for the <code>User</code> and one for the <code>Role</code> the user has. You may at some point have more classes than just a regular user and admin, so this method simplifies adding more roles in the long run. </p>\n\n<p>How this is done:</p>\n\n<ol>\n<li>Create <code>Roles</code> model that has one column which is <code>name</code></li>\n<li>The <code>User</code> model will have a <code>has_and_belongs_to_many :roles</code> relationship </li>\n<li>The <code>Role</code> model will have a <code>has_and_belongs_to_many :users</code> relationship</li>\n<li>Because of the many-to-many relationship you should create a join table. The join table should be named after the models in alpha-numeric order. Therefore your migration should look like this <code>rails g migration CreateRolesUsersTable</code></li>\n<li>The <code>has_and_belongs_to_many</code> statements create variables that automatically use the join table to look up their values. You can look into these.</li>\n<li><p>You can check if things are set up properly by writing:</p>\n\n<p><code>admin_role = Role.find_by(name: \u201cadmin\u201d)\nuser.roles.include?(admin_role)</code></p></li>\n<li><p>You can also add your own methods to the <code>User</code> model for your own use. Here is a sample of mine:</p>\n\n<p><pre><code>\ndef admin?\n    self.is_role_by_name?(\"admin\")\nend </p>\n\n<p>def add_role(role)\n    roles &lt;&lt; role\nend</p>\n\n<p>def add_role_by_name(role_name)\n    role = Role.find_by(name: role_name)\n    add_role(role)\nend</p>\n\n<p>def remove_role(role)\n    roles.delete(role)\nend</p>\n\n<p>def remove_role_by_name(role_name)\n    role = Role.find_by(name: role_name)\n    remove_role(role)\nend</p>\n\n<p>def is_role?(role)\n    roles.to_a.include?(role)\nend</p>\n\n<p>def is_role_by_name?(role_name)\n    role = Role.find_by(name: role_name)\n    is_role?(role)\nend\n</pre></code></p></li>\n<li><p>Now in your view you can have the following to show certain fields of the form: </p>\n\n<p><pre><code>&lt;% if @user.admin? %>\n   input whatever here...\n&lt;% end %></pre></code></p></li>\n</ol>\n"}], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1429098865, "creation_date": 1429094159, "question_id": 29647961, "link": "https://stackoverflow.com/questions/29647961/how-can-i-make-two-versions-of-def-update-in-the-controller-to-work", "title": "How can I make two versions of def update in the controller to work?", "body": "<p>How can I make two versions of def update in the controller to work?</p>\n\n<p>I have a form and admins should be allowed to edit more variables than regular users. Both use the same edit view. Currently I have a form and <code>def update</code> in the controller that work but don't distinguish between admins and non-admins. </p>\n\n<p>So now I have added two different strong_params versions to the controller. But how to apply these different versions depending on the type of user?</p>\n\n<p>One way that sort of works is to rewrite def update with an if else statement where it takes one stong_params version if an admin and another strong_params version if non-admin. However, the problem here is that I can't call a before_action on this def update that would test if it's an admin. For security reasons this is probably necessary.</p>\n\n<p>So I'm thinking I need two different def update methods in the controller: 1 for the admin that calls one version of strong_params and for which a before_action is added. And another for non-admins with another version of strong_params (and a different before_action). </p>\n\n<p><strong>I know how to build this in the controller but don't know how to tell the form in the edit view which def update to use</strong> (or should this be specified in the def edit in the controller?). (In fact, I don't even know how Rails knows that it should call def update (perhaps through resources :users in routes?).) Should I somehow edit the <code>&lt;%= f.submit \"Save changes\"</code> line in the edit view?</p>\n"}, {"tags": ["ruby", "selenium", "cucumber", "watir"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1429092629, "post_id": 29647016, "comment_id": 47434840, "body": "Unless you are expecting to get an answer from a fortuneteller, please share the content of your <code>Rakefile</code>."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1429655376, "post_id": 29647016, "comment_id": 47698445, "body": "wow, so many differences, different ruby, but most importantly, very different cucumber.   as a first step I might try using the same version of cucumber.  barring that we really need to see the specific line where the error occurs"}, {"owner": {"reputation": 1, "user_id": 4791184, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IX9UITWTxxI/AAAAAAAAAAI/AAAAAAAAANk/jooqIatdIE4/photo.jpg?sz=128", "display_name": "Mahabalesh Patige", "link": "https://stackoverflow.com/users/4791184/mahabalesh-patige"}, "edited": false, "score": 1, "creation_date": 1438174928, "post_id": 29647016, "comment_id": 51341267, "body": "This issue got resolved after I updated code to refer --out from --o for generating html report."}], "owner": {"reputation": 1, "user_id": 4791184, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IX9UITWTxxI/AAAAAAAAAAI/AAAAAAAAANk/jooqIatdIE4/photo.jpg?sz=128", "display_name": "Mahabalesh Patige", "link": "https://stackoverflow.com/users/4791184/mahabalesh-patige"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1288, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1429092017, "creation_date": 1429091490, "last_edit_date": 1429092017, "question_id": 29647016, "link": "https://stackoverflow.com/questions/29647016/ambiguous-option-o-optionparserambiguousoption-error-received-when-runnin", "title": "ambiguous option: --o (OptionParser::AmbiguousOption) error received when running Selenium, ruby script", "body": "<p>I am trying to run the project which is built using Watir, Ruby and Cucumber which was previously working on different version of software/system details. </p>\n\n<p>Current System details which is facing issue :</p>\n\n<pre><code>Windows 8\nCucumber version : 2.0.0\ngem version : 2.4.6\nRuby version: ruby 2.2.1p85 (2015-02-26 revision 49769) [x64-mingw32]\n</code></pre>\n\n<p>the pack was working on below configuration:</p>\n\n<pre><code>Windows XP/7\nCucumber 1.3.17\nGem : 2.0.14\nRuby: 2.0.0p481\n</code></pre>\n\n<p><strong>When I run my script using rake command, I get below mentioned error:</strong> </p>\n\n<pre><code>ambiguous option: --o (OptionParser::AmbiguousOption)\nC:/Automation/SeleniumAutomationUsingRuby/Ruby221/lib/ruby/gems/2.2.0/gems/cucum\nber-2.0.0/lib/cucumber/cli/options.rb:253:in `parse!'\nC:/Automation/SeleniumAutomationUsingRuby/Ruby221/lib/ruby/gems/2.2.0/gems/cucum\nber-2.0.0/lib/cucumber/cli/configuration.rb:25:in `parse!'\nC:/Automation/SeleniumAutomationUsingRuby/Ruby221/lib/ruby/gems/2.2.0/gems/cucum\nber-2.0.0/lib/cucumber/cli/main.rb:64:in `block in configuration'\nC:/Automation/SeleniumAutomationUsingRuby/Ruby221/lib/ruby/gems/2.2.0/gems/cucum\nber-2.0.0/lib/cucumber/cli/main.rb:63:in `tap'\nC:/Automation/SeleniumAutomationUsingRuby/Ruby221/lib/ruby/gems/2.2.0/gems/cucum\nber-2.0.0/lib/cucumber/cli/main.rb:63:in `configuration'\nC:/Automation/SeleniumAutomationUsingRuby/Ruby221/lib/ruby/gems/2.2.0/gems/cucum\nber-2.0.0/lib/cucumber/cli/main.rb:35:in `execute!'\nC:/Automation/SeleniumAutomationUsingRuby/Ruby221/lib/ruby/gems/2.2.0/gems/cucum\nber-2.0.0/bin/cucumber:9:in `&lt;top (required)&gt;'\nC:/Automation/SeleniumAutomationUsingRuby/Ruby221/bin/cucumber:23:in `load'\nC:/Automation/SeleniumAutomationUsingRuby/Ruby221/bin/cucumber:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>I tried searching for some answers to this, but looks like no one faced this before. So could you please help me in trying to identifying what has gone wrong</p>\n"}, {"tags": ["ruby", "multithreading", "debugging"], "comments": [{"owner": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "edited": false, "score": 0, "creation_date": 1429098278, "post_id": 29646434, "comment_id": 47438398, "body": "I can&#39;t get markdown formatting to properly show the ruby output as code. I have no idea why."}], "answers": [{"comments": [{"owner": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "edited": false, "score": 1, "creation_date": 1429097217, "post_id": 29646852, "comment_id": 47437688, "body": "Doesn&#39;t really work that way for me.  First, you&#39;re suggesting that &quot;glitches in the code&quot; prevent a debugger from working properly.  Do you know how absurd that sounds?   I&#39;m editing my original question to illustrate the problem with Pry and threads."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "edited": false, "score": 0, "creation_date": 1429098701, "post_id": 29646852, "comment_id": 47438678, "body": "This does not sound absurd at all. E.g. deadlock will ruin any debugger attempt (I\u2019m aware this is not your case, just an example.) My guess would by to try to remove <code>byebug</code> dependency and test what happens on the dry gemset with pry installed. I never met the behaviour you described (pry steps into it\u2019s own context), though I have some experience with thread debugging. That\u2019s why I suggested some glitches within your code/env."}, {"owner": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "edited": false, "score": 0, "creation_date": 1429099168, "post_id": 29646852, "comment_id": 47439016, "body": "Of <i>course</i> there are glitches. That&#39;s what debuggers <i>are for</i> :P  Without <code>byebug</code>, how do I <code>step</code> through code?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "edited": false, "score": 1, "creation_date": 1429100138, "post_id": 29646852, "comment_id": 47439649, "body": "Well, you out-argued me, debugger should not surrender to glitches, but nobody\u2019s perfect :) Anyway, you muddled me up. I was concern, <code>step</code> is pry\u2019s own feature, since ruby2. And I have tried the code I provided with <code>byebug</code> \u2014 it works (steps into etc.) like a charm. I think, the main difference between working example above and your development code is that equipment design usually has no mutices, other thread is still running, possibly ends up and that mixes the things in pry\u2019s mind up. I would suggest you to set breakpoints in each thread, to prevent race conditions in debug env."}, {"owner": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "edited": false, "score": 0, "creation_date": 1429104491, "post_id": 29646852, "comment_id": 47442829, "body": "&quot; I would suggest you to set breakpoints in each thread, to prevent race conditions in debug env&quot; Oooh that&#39;s an idea. And it depressingly sounds like I must start from scratch in testing Threads. Thanks. I&#39;ll follow up."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "edited": false, "score": 0, "creation_date": 1429107727, "post_id": 29646852, "comment_id": 47445377, "body": "Hopefully you\u2019ll succeed this way. <i>Sidenote</i>: SO\u2019s parser does not like codeblocks right after lists. Lines \u201cPry output\u201d save formatting."}, {"owner": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "edited": false, "score": 0, "creation_date": 1431119686, "post_id": 29646852, "comment_id": 48375861, "body": "I gave up on pry again because it seemed incapable of handling the basic task of actually stopping execution where requested. I&#39;m going to try to find someone locally who can help me through this."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1429090998, "creation_date": 1429090998, "answer_id": 29646852, "question_id": 29646434, "link": "https://stackoverflow.com/questions/29646434/debugging-threaded-ruby-applications/29646852#29646852", "title": "Debugging threaded ruby applications", "body": "<p><code>pry</code> is just fine working with threads. There are probably glitches in your code.</p>\n\n<p>Let\u2019s try to examine the following thread switcher (example was taken <a href=\"http://rocket-science.ru/hacking/2013/09/05/sequentional-execution-example-of-reactor-pattern-impl/\" rel=\"nofollow\">here</a>):</p>\n\n<pre><code>require 'pry'\n\nmodule SeqExec\n  class Seqs\n    attr_reader :init\n    def synch_prior mx, cv\n      Thread.new {\n        mx.synchronize {\n          @init[:prior] = true\n          loop do\n            cv.wait mx\n            # binding.pry\n            yield if block_given?\n            cv.broadcast\n          end\n        }\n      }\n    end\n\n    def synch_posterior mx, cv\n      Thread.new {\n        mx.synchronize {\n          @init[:posterior] = true\n          loop do\n            cv.wait mx\n            yield if block_given?\n            cv.broadcast\n          end\n        }\n      }\n    end\n\n    def synch \u03bb1, \u03bb2\n      @init = {}\n\n      mx = Mutex.new\n      cv = ConditionVariable.new\n\n      synch_prior(mx, cv, &amp;\u03bb1)     # prior function\n      Thread.pass until {:prior=&gt;true} == @init\n\n      synch_posterior(mx, cv, &amp;\u03bb2) # posterior function\n      Thread.pass until {:prior=&gt;true,:posterior=&gt;true} == @init\n\n      cv.signal                    # we are ready to start\n    end\n  end\nend\n\nmodule SeqExec\n  Thread.abort_on_exception = true\n  def pre &amp;cb\n    @prior = cb\n  end\n  def post &amp;cb\n    @posterior = cb\n  end\n  def run \u03bb1 = nil, \u03bb2 = nil\n    pre &amp;\u03bb1 if \u03bb1\n    post &amp;\u03bb2 if \u03bb2\n    raise ArgumentError.new \"Cannot run sequential execution, lambdas are not set\" \\\n      unless (@prior &amp;&amp; @posterior)\n    Seqs.new.synch @prior, @posterior\n  end\nend\n\ninclude SeqExec\n\n@i=0\n@stack = []\npre { sleep 0.3; print \"-#{@i += 1}-\"; @stack.push(@i) }\npost { print \"|#{@stack.pop}|\" }\nrun\n\n10.times { sleep 0.1 }\nsleep 30000\n</code></pre>\n\n<p>With <code>binding.pry</code> commented out, it prints:</p>\n\n<pre><code>#\u21d2 -1-|1|-2-|2|-3-|3|-4-|4|-5-|5|-6-|6|-7-........\n</code></pre>\n\n<p>With <code>binding.pry</code> uncommented, we yield:</p>\n\n<pre><code>Frame number: 0/2\nFrom: /tmp/a.rb @ line 12 SeqExec::Seqs#synch_prior:\n\n     6: def synch_prior mx, cv\n     7:   Thread.new {\n     8:     mx.synchronize {\n     9:       @init[:prior] = true\n    10:       loop do\n    11:         cv.wait mx\n =&gt; 12:         binding.pry\n    13:         yield if block_given?\n    14:         cv.broadcast\n    15:       end\n    16:     }\n    17:   }\n    18: end\n\n\u25b6 mx\n=&gt; #&lt;Mutex:0xb21f204&gt;\n\u25b6 exit\n-1-|1|\nFrame number: 0/2\n\nFrom: /tmp/a.rb @ line 12 SeqExec::Seqs#synch_prior:\n\n     6: def synch_prior mx, cv\n     7:   Thread.new {\n     8:     mx.synchronize {\n     9:       @init[:prior] = true\n    10:       loop do\n    11:         cv.wait mx\n =&gt; 12:         binding.pry\n    13:         yield if block_given?\n    14:         cv.broadcast\n    15:       end\n    16:     }\n    17:   }\n    18: end\n\n\u25b6 exit\n-2-|2|\nFrame number: 0/2\n...\n</code></pre>\n\n<p>Needless to say, the above means that threads stopped until <code>pry</code> is resumed.</p>\n"}], "owner": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1605, "favorite_count": 0, "accepted_answer_id": 29646852, "answer_count": 1, "score": 2, "last_activity_date": 1429107642, "creation_date": 1429089907, "last_edit_date": 1429107642, "question_id": 29646434, "link": "https://stackoverflow.com/questions/29646434/debugging-threaded-ruby-applications", "title": "Debugging threaded ruby applications", "body": "<p>I am developing a ruby application which uses threads. I am having difficulty debugging it. The main problem is that I want to step through a particular thread. I set the breakpoint and run, but nothing happens until I use something like <code>thr sw 2</code>. But then subsequent input is FUBAR'd. I have tried pry, but pry seems no better at dealing with threads.</p>\n\n<p>Solutions? Work-arounds?</p>\n\n<p>EDIT 1:</p>\n\n<p>FYI: <code>Pry version 0.10.1 on Ruby 2.0.0</code> with <code>byebug</code></p>\n\n<p>So here is what I experience with Pry. Try 1:I set the thread-specific breakpoint using <code>break</code></p>\n\n<ol>\n<li>Let program run. </li>\n<li>Breakpoint is triggered.</li>\n<li>Pry correctly shows me the breakpoint and surrounding code.</li>\n<li>Now nothing. <em>I have no prompt</em>. Control-C doesn't work. In fact, I have to kill -9 the process from outside. </li>\n</ol>\n\n<p>Try 2:  Using the \"binding.pry\" method above. </p>\n\n<ol>\n<li>same</li>\n<li>same</li>\n<li>same! </li>\n<li>I get a Pry prompt! I can yield expressions. </li>\n<li>I try to use \"step\" or \"next\" and suddenly I'm in \"Pry::history#load\" . So now the debugger has jumped to the thread that is processing the input itself.  This is not functional. </li>\n</ol>\n\n<p>Pry output:</p>\n\n<pre><code>[2] pry(#&lt;QDS::Node::Primary&gt;)&gt; step\n\nFrom: /usr/local/rvm/gems/ruby-2.0.0-p598/gems/pry-0.10.1/lib/pry/history.rb @ line 37 Pry::History#load:\n\n    35: def load\n    36:   @loader.call do |line|\n =&gt; 37:     @pusher.call(line.chomp)\n    38:     @history &lt;&lt; line.chomp\n    39:     @original_lines += 1\n    40:   end\n    41: end\n\n[2] pry(#&lt;Pry::History&gt;)&gt;\n</code></pre>\n\n<ol start=\"6\">\n<li>I try \"exit\" and now I'm at \"pry(main)\" without anything else working.</li>\n</ol>\n\n<p>Pry output:</p>\n\n<pre><code>[1] pry(main)&gt; continue\nError: Cannot find local context. Did you use `binding.pry`?\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree-auth-devise"], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 4729820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c77da4549b46b096625a1eb67d40b0f?s=128&d=identicon&r=PG&f=1", "display_name": "Rastee", "link": "https://stackoverflow.com/users/4729820/rastee"}, "is_accepted": false, "score": 0, "last_activity_date": 1429097849, "creation_date": 1429097849, "answer_id": 29649193, "question_id": 29646370, "link": "https://stackoverflow.com/questions/29646370/401-unauthorized-response-empty-in-ios-if-sent-via-custom-failure-app/29649193#29649193", "title": "401 unauthorized response empty in ios if sent via custom failure app", "body": "<p>I found out that there is nothing wrong with this code , on the contrary the ios response handler was faulty. </p>\n"}], "owner": {"reputation": 73, "user_id": 4729820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c77da4549b46b096625a1eb67d40b0f?s=128&d=identicon&r=PG&f=1", "display_name": "Rastee", "link": "https://stackoverflow.com/users/4729820/rastee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429097849, "creation_date": 1429089692, "last_edit_date": 1429090236, "question_id": 29646370, "link": "https://stackoverflow.com/questions/29646370/401-unauthorized-response-empty-in-ios-if-sent-via-custom-failure-app", "title": "401 unauthorized response empty in ios if sent via custom failure app", "body": "<pre><code>class CustomFailureApp &lt; Devise::FailureApp\n# You need to override respond to eliminate recall\ndef respond\n  if http_auth?\n    http_auth\n  else\n    if request.format == \"application/json\"\n      self.status = 401 \n      self.content_type = \"json\"\n      self.headers['WWW-Authenticate']=\"Please Confirm Your Account To Continue\"\n      self.response_body = {error: I18n.t(\"devise.failure.inactive\")}.to_json\n    else\n      redirect          \n    end\n  end\nend\nend\n</code></pre>\n\n<p>whenever the user is unconfirmed spree_auth_devise respond with unauthorized  which is handled by my custom failure app but the response object received by the ios app is empty.\nios app is using AFNetworking and is updated to latestmaster\nI can't get what I am doing wrong.</p>\n"}, {"tags": ["ruby", "file", "fclose", "learn-ruby-the-hard-way"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1429103837, "post_id": 29646132, "comment_id": 47442293, "body": "while the answer is technically correct for your usage <code>File.read(txt)</code> or <code>File.open(txt,&amp;:read)</code> are both self closing. This means you can open and read the file without having to ensure that it closed afterwards."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1429106380, "post_id": 29646132, "comment_id": 47444377, "body": "@engineersmnky I never saw this syntax <code>File.open(txt,&amp;:read)</code> :D"}, {"owner": {"reputation": 2482, "user_id": 4131237, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pIs3L.jpg?s=128&g=1", "display_name": "Prashanth Chandra", "link": "https://stackoverflow.com/users/4131237/prashanth-chandra"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1429152918, "post_id": 29646132, "comment_id": 47468334, "body": "@engineersmnky According to this <a href=\"http://stackoverflow.com/questions/5545068/what-are-all-the-common-ways-to-read-a-file-in-ruby\" title=\"what are all the common ways to read a file in ruby\">stackoverflow.com/questions/5545068/&hellip;</a>, Only File.open(txt,&amp;:read) is self-closing, File.read(txt) isn&#39;t. The open method has to be passed a block for it to be self-closing"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1429189864, "post_id": 29646132, "comment_id": 47489087, "body": "@Coolshanth according to the Official Docs on <a href=\"http://ruby-doc.org/core-2.0.0/IO.html#method-c-read\" rel=\"nofollow noreferrer\">File#read</a>. <b>Opens the file, optionally seeks to the given offset, then returns length bytes (defaulting to the rest of the file). read ensures the file is closed before returning.</b>."}], "answers": [{"tags": [], "owner": {"reputation": 3126, "user_id": 85010, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5a1b964e34cc2b1d3e233fa387b791b0?s=128&d=identicon&r=PG", "display_name": "fiskeben", "link": "https://stackoverflow.com/users/85010/fiskeben"}, "is_accepted": true, "score": 5, "last_activity_date": 1429089199, "creation_date": 1429089199, "answer_id": 29646208, "question_id": 29646132, "link": "https://stackoverflow.com/questions/29646132/undefined-method-close-for-mainobject-nomethoderror-in-ruby/29646208#29646208", "title": "Undefined method &#39;close&#39; for main:Object (NoMethodError) in Ruby", "body": "<p>You need to call <code>close</code> on the file object:</p>\n\n<pre><code>txt.close\n</code></pre>\n"}], "owner": {"reputation": 2482, "user_id": 4131237, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pIs3L.jpg?s=128&g=1", "display_name": "Prashanth Chandra", "link": "https://stackoverflow.com/users/4131237/prashanth-chandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "accepted_answer_id": 29646208, "answer_count": 1, "score": 0, "last_activity_date": 1429089199, "creation_date": 1429089008, "question_id": 29646132, "link": "https://stackoverflow.com/questions/29646132/undefined-method-close-for-mainobject-nomethoderror-in-ruby", "title": "Undefined method &#39;close&#39; for main:Object (NoMethodError) in Ruby", "body": "<pre><code>filename = ARGV.first\n\ntxt = open filename\n\nputs \"Here's your file #{filename}:\"\nprint txt.read\n\nputs \"Type the filename again: \"\nfile_again = $stdin.gets.chomp\n\ntxt_again = open file_again\n\nprint txt_again.read\n\nclose(txt)\nclose(txt_again)\n</code></pre>\n\n<p>The program runs fine till the end, but crashes with the titled error message right after printing the contents of the second file.</p>\n\n<p>I checked the txt, txt_again using (.class) and confirmed that both are File objects. Why isn't close working?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1429088594, "post_id": 29645918, "comment_id": 47432277, "body": "Not sure what you want. If you convert <code>0830</code>, do you get <code>8.30</code> or <code>8.50</code>?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1429088801, "post_id": 29645918, "comment_id": 47432405, "body": "<code>0800</code> itself is a non-valid identifier. <code>&quot;0800&quot;</code> is valid."}, {"owner": {"reputation": 2635, "user_id": 1177575, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147cbbdcb918ccf00a5d662d9e3077ad?s=128&d=identicon&r=PG", "display_name": "Abibullah Rahamathulah", "link": "https://stackoverflow.com/users/1177575/abibullah-rahamathulah"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1429088869, "post_id": 29645918, "comment_id": 47432447, "body": "@Amadan, I want it 8.30"}], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1429090026, "last_edit_date": 1429090026, "creation_date": 1429089013, "answer_id": 29646136, "question_id": 29645918, "link": "https://stackoverflow.com/questions/29645918/convert-0800-to-8-00-in-ruby/29646136#29646136", "title": "Convert 0800 to 8.00 in ruby", "body": "<pre><code>time = \"0830\"\nsprintf(\"%.2f\", time.to_f / 100)\n# =&gt; 8.30\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2635, "user_id": 1177575, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147cbbdcb918ccf00a5d662d9e3077ad?s=128&d=identicon&r=PG", "display_name": "Abibullah Rahamathulah", "link": "https://stackoverflow.com/users/1177575/abibullah-rahamathulah"}, "edited": false, "score": 0, "creation_date": 1429089871, "post_id": 29646140, "comment_id": 47433097, "body": "I like the simplicity of this."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1429090980, "post_id": 29646140, "comment_id": 47433789, "body": "This returns <code>&quot;08:00&quot;</code>, not <code>&quot;8.00&quot;</code>"}], "tags": [], "owner": {"reputation": 3126, "user_id": 85010, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5a1b964e34cc2b1d3e233fa387b791b0?s=128&d=identicon&r=PG", "display_name": "fiskeben", "link": "https://stackoverflow.com/users/85010/fiskeben"}, "is_accepted": true, "score": 2, "last_activity_date": 1429089015, "creation_date": 1429089015, "answer_id": 29646140, "question_id": 29645918, "link": "https://stackoverflow.com/questions/29645918/convert-0800-to-8-00-in-ruby/29646140#29646140", "title": "Convert 0800 to 8.00 in ruby", "body": "<p>If your input is always a <code>String</code> (and I think it has to be), you can do this:</p>\n\n<pre><code>input = \"0800\"\ninput.insert(2, \":\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1429091091, "post_id": 29646146, "comment_id": 47433859, "body": "Use <code>strftime(&#39;%-H.%M hrs&#39;)</code> instead of appending <code>&#39; hrs&#39;</code>"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1429091809, "post_id": 29646146, "comment_id": 47434277, "body": "@Stefan. much better now. Thanks :)"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 2, "last_activity_date": 1429091783, "last_edit_date": 1429091783, "creation_date": 1429089022, "answer_id": 29646146, "question_id": 29645918, "link": "https://stackoverflow.com/questions/29645918/convert-0800-to-8-00-in-ruby/29646146#29646146", "title": "Convert 0800 to 8.00 in ruby", "body": "<pre><code>require 'time'    \nTime.strptime(\"0800\", \"%H%M\").strftime(\"%-H.%M hrs\")\n#  =&gt; \"8.00 hrs\"\nTime.strptime(\"0830\", \"%H%M\").strftime(\"%-H.%M hrs\")\n# =&gt; \"8.30 hrs\"\n</code></pre>\n"}], "owner": {"reputation": 2635, "user_id": 1177575, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147cbbdcb918ccf00a5d662d9e3077ad?s=128&d=identicon&r=PG", "display_name": "Abibullah Rahamathulah", "link": "https://stackoverflow.com/users/1177575/abibullah-rahamathulah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1429892465, "accepted_answer_id": 29646140, "answer_count": 3, "score": -3, "last_activity_date": 1429096037, "creation_date": 1429088407, "last_edit_date": 1429096037, "question_id": 29645918, "link": "https://stackoverflow.com/questions/29645918/convert-0800-to-8-00-in-ruby", "closed_reason": "Needs details or clarity", "title": "Convert 0800 to 8.00 in ruby", "body": "<p>How can I convert <code>0800</code> to <code>8.00 hrs</code> in ruby? I have been trying to split at index <code>2</code> and <code>join</code>, but am not able to do so.</p>\n"}, {"tags": ["ruby", "stripe-payments"], "answers": [{"comments": [{"owner": {"reputation": 11172, "user_id": 74243, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ddcb67dc4378c7d82d4ea8de932f541e?s=128&d=identicon&r=PG", "display_name": "Martin Peck", "link": "https://stackoverflow.com/users/74243/martin-peck"}, "edited": false, "score": 1, "creation_date": 1429168118, "post_id": 29658658, "comment_id": 47473975, "body": "While I&#39;ve marked your question as correct (because that certainly appears to be the case) this used to work. I have transactions through Stripe that didn&#39;t carry the &quot;receipt_email&quot; parameter that DID generate receipts. This used to work (circa August 2014)"}, {"owner": {"reputation": 19272, "user_id": 1606729, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SZetZ.png?s=128&g=1", "display_name": "koopajah", "link": "https://stackoverflow.com/users/1606729/koopajah"}, "reply_to_user": {"reputation": 11172, "user_id": 74243, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ddcb67dc4378c7d82d4ea8de932f541e?s=128&d=identicon&r=PG", "display_name": "Martin Peck", "link": "https://stackoverflow.com/users/74243/martin-peck"}, "edited": false, "score": 0, "creation_date": 1429196468, "post_id": 29658658, "comment_id": 47494561, "body": "@MartinPeck I added a bit more to the answer in case that helps"}], "tags": [], "owner": {"reputation": 19272, "user_id": 1606729, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SZetZ.png?s=128&g=1", "display_name": "koopajah", "link": "https://stackoverflow.com/users/1606729/koopajah"}, "is_accepted": true, "score": 6, "last_activity_date": 1429196453, "last_edit_date": 1429196453, "creation_date": 1429124618, "answer_id": 29658658, "question_id": 29645463, "link": "https://stackoverflow.com/questions/29645463/e-mail-receipts-not-generated-with-stripe-payment/29658658#29658658", "title": "E-mail Receipts Not Generated with Stripe Payment", "body": "<p>Stripe doesn't retrieve the email address from the token. When you create a one-time charge you have to set the email in the <code>receipt_email</code> field so that a receipt is sent to that email address if the charge succeeds.</p>\n\n<p>You would either retrieve the email from the <code>stripeEmail</code> parameter if you're using Simple Checkout or otherwise from the parameter you stored it into and your code would just be:</p>\n\n<pre><code>Stripe::Charge.create(\n  currency: 'gbp',\n  amount: some_amount,\n  card: token,\n  description: 'Payment for awesome thing',\n  receipt_email: email\n)\n</code></pre>\n\n<p>Small warning, the email receipt will never be send in Test mode even if you provide that field.</p>\n\n<p><strong>EDIT</strong> I focused on why it wouldn't work before and not in which case you would get an email receipt.</p>\n\n<p>First off, you need to check the settings to \"Email customers for successful payments\" in your dashboard <a href=\"https://dashboard.stripe.com/account/emails\" rel=\"noreferrer\">settings</a>. Then the customer needs to have the <code>email</code> field set. If those two are true, then when you create a charge for that customer, an email receipt will also be sent to that customer for you (in Live mode). The same would happen with non-free subscription where each invoice with a charge associated would email a receipt.</p>\n"}], "owner": {"reputation": 11172, "user_id": 74243, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ddcb67dc4378c7d82d4ea8de932f541e?s=128&d=identicon&r=PG", "display_name": "Martin Peck", "link": "https://stackoverflow.com/users/74243/martin-peck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1592, "favorite_count": 0, "accepted_answer_id": 29658658, "answer_count": 1, "score": 4, "last_activity_date": 1429196453, "creation_date": 1429087048, "question_id": 29645463, "link": "https://stackoverflow.com/questions/29645463/e-mail-receipts-not-generated-with-stripe-payment", "title": "E-mail Receipts Not Generated with Stripe Payment", "body": "<p>I have an application that uses Stripe Payments. We are creating one-off payments and not storing the customer as an object. So, we have server side Ruby code that looks something like this...</p>\n\n<pre><code>Stripe::Charge.create(\n  currency: 'gbp',\n  amount: some_amount,\n  card: token,\n  description: 'Payment for awesome thing'\n)\n</code></pre>\n\n<p>The token is generated client side, using the Stripe JS libraries and contains (or, rather, represents) all the info the customer supplied, which is e-mail address, card number etc.</p>\n\n<p>When the transaction hits Stripe it takes money from the customer, and in my Stripe dashboard I see all of the details that the customer supplied, such as code expiry etc. Against the card I see their name, but the name is set to an e-mail address.</p>\n\n<p>Below all of this I'm then told...</p>\n\n<p><code>No receipts sent \u2014 No email address for this payment</code></p>\n\n<p>Am I missing something with regards to the way this API should be called. The token clearly contains that e-mail address (I see it as the card name on the Stripe dashboard). </p>\n\n<p>Do I have to call this API in another way if I want Stripe to use the e-mail address that they've already captured to generate receipts?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 3, "creation_date": 1429086306, "post_id": 29645064, "comment_id": 47430922, "body": "please post some code"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1429087018, "post_id": 29645064, "comment_id": 47431365, "body": "An email client can&#39;t be redirected. You can show a plain-text version in a browser."}], "answers": [{"tags": [], "owner": {"reputation": 713, "user_id": 4788075, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/03ac1d3de35f9e5531559aad52bcd72c?s=128&d=identicon&r=PG", "display_name": "Gena  Shumilkin", "link": "https://stackoverflow.com/users/4788075/gena-shumilkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1429087206, "creation_date": 1429087206, "answer_id": 29645501, "question_id": 29645064, "link": "https://stackoverflow.com/questions/29645064/generate-a-link-to-plain-text-version-of-email-in-html-version-of-email/29645501#29645501", "title": "Generate a link to plain text version of email in html version of email", "body": "<p>I think this is impossible without using javascript. But js is disabled in email's html. Instead, you can try emulate the behavior you want by including multiple copies of the text further down in your email. For example:</p>\n\n<pre><code>&lt;a href=\"#section1\"&gt;Click here!&lt;/a&gt;\n&lt;p&gt;HTML content&lt;/p&gt;\n&lt;h2 id=\"section1\"&gt;Simple text&lt;/h2&gt;\n</code></pre>\n"}], "owner": {"reputation": 1810, "user_id": 3078630, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5a853b560f56e60ba05073e5b121ef1b?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen Kumar", "link": "https://stackoverflow.com/users/3078630/naveen-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 29645501, "answer_count": 1, "score": -1, "last_activity_date": 1429087206, "creation_date": 1429085893, "question_id": 29645064, "link": "https://stackoverflow.com/questions/29645064/generate-a-link-to-plain-text-version-of-email-in-html-version-of-email", "title": "Generate a link to plain text version of email in html version of email", "body": "<p>I want link \"Click here\" in html version of email.\nAfter clicking link, it will redirect to plain text version of email.\nHow can we do that ?</p>\n\n<p>I am using ruby.\nThanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1429086019, "post_id": 29645043, "comment_id": 47430726, "body": "thanks, Am I right that attachment_fu is only for validating?"}, {"owner": {"reputation": 301, "user_id": 4790516, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BE6sLlnCck0/AAAAAAAAAAI/AAAAAAAALtQ/HGVJWyCmkqc/photo.jpg?sz=128", "display_name": "Anshul Mengi", "link": "https://stackoverflow.com/users/4790516/anshul-mengi"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 2, "creation_date": 1429086180, "post_id": 29645043, "comment_id": 47430835, "body": "it is more than just for validating. It is a full file upload solution which supports various providers like S3, Racksapce, etc. Details here: <a href=\"https://github.com/technoweenie/attachment_fu\" rel=\"nofollow noreferrer\">github.com/technoweenie/attachment_fu</a>. It is just that active development has stopped on this plugin and it will not store Rails 4. You can always create a fork and start maintaining it. I am sure the community will appreciate."}], "tags": [], "owner": {"reputation": 301, "user_id": 4790516, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BE6sLlnCck0/AAAAAAAAAAI/AAAAAAAALtQ/HGVJWyCmkqc/photo.jpg?sz=128", "display_name": "Anshul Mengi", "link": "https://stackoverflow.com/users/4790516/anshul-mengi"}, "is_accepted": true, "score": 5, "last_activity_date": 1429085830, "creation_date": 1429085830, "answer_id": 29645043, "question_id": 29644887, "link": "https://stackoverflow.com/questions/29644887/file-uploading-with-ruby-on-rails/29645043#29645043", "title": "File Uploading with ruby on rails", "body": "<p>attachment_fu is a very old plugin and from the github page it appears as if the development has stopped, so I doubt it will support Rails 4+</p>\n\n<p>These are some good alternatives:\n<a href=\"https://www.ruby-toolbox.com/categories/rails_file_uploads\">https://www.ruby-toolbox.com/categories/rails_file_uploads</a></p>\n\n<p>Carrierwave and paperclip are the most faous ones and pretty easy to setup.</p>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 2862476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KA9y.jpg?s=128&g=1", "display_name": "Xeeshan", "link": "https://stackoverflow.com/users/2862476/xeeshan"}, "is_accepted": false, "score": 1, "last_activity_date": 1429092601, "creation_date": 1429092601, "answer_id": 29647460, "question_id": 29644887, "link": "https://stackoverflow.com/questions/29644887/file-uploading-with-ruby-on-rails/29647460#29647460", "title": "File Uploading with ruby on rails", "body": "<p><a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow\">Paperclip</a> is a smart choice for file uploading. You can use it in rails 3 &amp; 4.</p>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 29645043, "answer_count": 2, "score": 0, "last_activity_date": 1429092601, "creation_date": 1429085346, "question_id": 29644887, "link": "https://stackoverflow.com/questions/29644887/file-uploading-with-ruby-on-rails", "title": "File Uploading with ruby on rails", "body": "<p>at the moment I'm using this: <a href=\"https://github.com/technoweenie/attachment_fu\" rel=\"nofollow\">https://github.com/technoweenie/attachment_fu</a> for uploading files.</p>\n\n<p>at the moment i'm running with rails 3.2.12 but soon I want to upgrade to 4.2 </p>\n\n<p>can I use this plugin with 4.2 or do I need to use another one?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "edited": false, "score": 0, "creation_date": 1429083660, "post_id": 29644250, "comment_id": 47429403, "body": "I think some gem have dependency for oauth-0.4.7 or greater version. Please check Gemfile.lock"}, {"owner": {"reputation": 676, "user_id": 4548969, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/de72c949e09b546f74ccbb2f33aa6c29?s=128&d=identicon&r=PG&f=1", "display_name": "venkat", "link": "https://stackoverflow.com/users/4548969/venkat"}, "reply_to_user": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "edited": false, "score": 0, "creation_date": 1429085296, "post_id": 29644250, "comment_id": 47430316, "body": "In Gemfile.lock it is <code>oauth (0.4.7)</code>, so I changed in the Gemfile as <code>gem &#39;oauth&#39;, &#39;0.4.7&#39;</code> and run bundle install but no luck. The error is coming when i am adding the above table and running rake db:migrate."}, {"owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "edited": false, "score": 0, "creation_date": 1429088221, "post_id": 29644250, "comment_id": 47432071, "body": "uninstall   &quot;gem uninstall oauth-0.3.6&quot;  version"}, {"owner": {"reputation": 676, "user_id": 4548969, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/de72c949e09b546f74ccbb2f33aa6c29?s=128&d=identicon&r=PG&f=1", "display_name": "venkat", "link": "https://stackoverflow.com/users/4548969/venkat"}, "reply_to_user": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "edited": false, "score": 0, "creation_date": 1429089946, "post_id": 29644250, "comment_id": 47433135, "body": "It is saying gem &quot;oauth-0.3.6&quot; is not installed"}], "answers": [{"tags": [], "owner": {"reputation": 3798, "user_id": 2567967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c86d57edbba8babbb00e83b9a28d46f?s=128&d=identicon&r=PG", "display_name": "Rails Guy", "link": "https://stackoverflow.com/users/2567967/rails-guy"}, "is_accepted": false, "score": 0, "last_activity_date": 1429083646, "creation_date": 1429083646, "answer_id": 29644329, "question_id": 29644250, "link": "https://stackoverflow.com/questions/29644250/raise-if-conflicts-when-running-migration-with-rails-2-3-18/29644329#29644329", "title": "`raise_if_conflicts&#39; when running migration with rails 2.3.18", "body": "<p>Can you please run your rake command like below:</p>\n\n<pre><code>bundle exec rake db:migrate\n</code></pre>\n\n<p>Let me know if it works or not. Thanks</p>\n"}], "owner": {"reputation": 676, "user_id": 4548969, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/de72c949e09b546f74ccbb2f33aa6c29?s=128&d=identicon&r=PG&f=1", "display_name": "venkat", "link": "https://stackoverflow.com/users/4548969/venkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429088548, "creation_date": 1429083422, "last_edit_date": 1429088548, "question_id": 29644250, "link": "https://stackoverflow.com/questions/29644250/raise-if-conflicts-when-running-migration-with-rails-2-3-18", "title": "`raise_if_conflicts&#39; when running migration with rails 2.3.18", "body": "<p>I am trying to run the maintenance application with oldest rails version '2.3.18'. and ree-1.8.7-2012.02 [ x86_64 ]. <code>bundle install</code> and <code>rake db:create</code> are working fine, and when I run <code>rake db:migrate</code> I get the following error:</p>\n\n<pre><code>rake aborted!\nCould not find table 'comments'\n</code></pre>\n\n<p>With Comments I have 3 dependent tables, so I did:</p>\n\n<pre><code>ruby script/generate migration CreateComments commentable_type:string commentable_id:integer body:text member_id:integer created_at:datettime \n</code></pre>\n\n<p>and when I run <code>rake db:migrate</code>. I am get this error:</p>\n\n<pre><code>/usr/local/rvm/rubies/ree-1.8.7-2012.02/lib/ruby/site_ruby/1.8/rubygems/specification.rb:1613:in `raise_if_conflicts': can't activate oauth-0.4.7, already activated oauth-0.3.6 (Gem::LoadError)\n    from /usr/local/rvm/rubies/ree-1.8.7-2012.02/lib/ruby/site_ruby/1.8/rubygems/specification.rb:740:in `activate'\n    from /usr/local/rvm/rubies/ree-1.8.7-2012.02/lib/ruby/site_ruby/1.8/rubygems.rb:1209:in `gem'\n    from /root/Desktop/Projects/community/vendor/plugins/oauth-plugin/rails/init.rb:1:in `evaluate_init_rb'\n    from ./script/../config/../vendor/rails/railties/lib/rails/plugin.rb:158:in `evaluate_init_rb'\n    from /root/Desktop/Projects/community/vendor/rails/activesupport/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'\n    from ./script/../config/../vendor/rails/railties/lib/rails/plugin.rb:154:in `evaluate_init_rb'\n    from ./script/../config/../vendor/rails/railties/lib/rails/plugin.rb:48:in `load'\n    from ./script/../config/../vendor/rails/railties/lib/rails/plugin/loader.rb:38:in `load_plugins'\n    from ./script/../config/../vendor/rails/railties/lib/rails/plugin/loader.rb:37:in `each'\n    from ./script/../config/../vendor/rails/railties/lib/rails/plugin/loader.rb:37:in `load_plugins'\n    from ./script/../config/../vendor/rails/railties/lib/initializer.rb:369:in `load_plugins'\n    from ./script/../config/../vendor/rails/railties/lib/initializer.rb:165:in `process'\n    from ./script/../config/../vendor/rails/railties/lib/initializer.rb:113:in `send'\n    from ./script/../config/../vendor/rails/railties/lib/initializer.rb:113:in `run'\n    from /root/Desktop/Projects/community/config/environment.rb:15\n    from /usr/local/rvm/rubies/ree-1.8.7-2012.02/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'\n    from /usr/local/rvm/rubies/ree-1.8.7-2012.02/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'\n    from /root/Desktop/Projects/community/vendor/rails/railties/lib/commands/generate.rb:1\n    from /usr/local/rvm/rubies/ree-1.8.7-2012.02/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'\n    from /usr/local/rvm/rubies/ree-1.8.7-2012.02/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'\n    from script/generate:3\n</code></pre>\n\n<p>In my Gemfile, I have the following line:</p>\n\n<pre><code>gem 'oauth', '0.3.6'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "api", "twitter"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1429082161, "post_id": 29643562, "comment_id": 47428575, "body": "If those are your real secret tokens, you may want to change them, now..."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1429088199, "post_id": 29643562, "comment_id": 47432062, "body": "Also you should be using <code>url = request_uri  + URI::encode(phrase_value)</code> to actually escape the search query instead of just replacing spaces..."}, {"owner": {"reputation": 520, "user_id": 3788832, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c6daa6f68ae949153497e48b649e6e65?s=128&d=identicon&r=PG&f=1", "display_name": "nikunjM", "link": "https://stackoverflow.com/users/3788832/nikunjm"}, "edited": false, "score": 0, "creation_date": 1429089249, "post_id": 29643562, "comment_id": 47432683, "body": "@BradWterth no its not, but thanks for suggestion."}, {"owner": {"reputation": 520, "user_id": 3788832, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c6daa6f68ae949153497e48b649e6e65?s=128&d=identicon&r=PG&f=1", "display_name": "nikunjM", "link": "https://stackoverflow.com/users/3788832/nikunjm"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1429089302, "post_id": 29643562, "comment_id": 47432718, "body": "@papirtiger i have to do exact match , and for that i am using twitter search api with double quotes. But its not returning proper values. Still its returning keyword search. Can you please suggest any way to do that."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1429103747, "post_id": 29643562, "comment_id": 47442216, "body": "The <a href=\"https://dev.twitter.com/rest/reference/get/search/tweets\" rel=\"nofollow noreferrer\">Twitter Search API</a> does not take the <code>q</code> parameter wrapped in quotes. Try on <a href=\"https://dev.twitter.com/rest/tools/console\" rel=\"nofollow noreferrer\">dev.twitter.com/rest/tools/console</a>"}], "answers": [{"comments": [{"owner": {"reputation": 520, "user_id": 3788832, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c6daa6f68ae949153497e48b649e6e65?s=128&d=identicon&r=PG&f=1", "display_name": "nikunjM", "link": "https://stackoverflow.com/users/3788832/nikunjm"}, "edited": false, "score": 0, "creation_date": 1429123313, "post_id": 29651425, "comment_id": 47456105, "body": "thank you for your help sir,  i have used same method . it really helped me"}], "tags": [], "owner": {"reputation": 66, "user_id": 4786357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3fbe9d71903507d476dff426a50d11?s=128&d=identicon&r=PG&f=1", "display_name": "rainwont", "link": "https://stackoverflow.com/users/4786357/rainwont"}, "is_accepted": true, "score": 0, "last_activity_date": 1429104068, "creation_date": 1429104068, "answer_id": 29651425, "question_id": 29643562, "link": "https://stackoverflow.com/questions/29643562/not-able-to-get-authentication-token/29651425#29651425", "title": "not able to get authentication token", "body": "<pre><code>require 'json'\nrequire 'oauth'\nrequire 'pp'\n\nconsumer_key        = 'xxxx'\nconsumer_secret     = 'xxxx'\naccess_token        = 'xxxx'\naccess_token_secret = 'xxxx'\n\nconsumer = OAuth::Consumer.new(\n  consumer_key,\n  consumer_secret,\n  site:'https://api.twitter.com/'\n)\nendpoint = OAuth::AccessToken.new(consumer, access_token, access_token_secret)\n\n\nputs \"please enter phrase you want to search\"\nphrase_value=gets.chomp;\n\n\nrequest_uri = \"https://api.twitter.com/1.1/search/tweets.json?q=#{phrase_value}\";\n\n# GET\nresponse = endpoint.get(\"#{request_uri}\")\nresult = JSON.parse(response.body)\n\npp result\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 520, "user_id": 3788832, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c6daa6f68ae949153497e48b649e6e65?s=128&d=identicon&r=PG&f=1", "display_name": "nikunjM", "link": "https://stackoverflow.com/users/3788832/nikunjm"}, "edited": false, "score": 0, "creation_date": 1429123277, "post_id": 29651826, "comment_id": 47456080, "body": "thanks sir, sir i have done it in same way . But thry want json file and to store some where so i have used search api call. Thanks for your help"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1429105236, "creation_date": 1429105236, "answer_id": 29651826, "question_id": 29643562, "link": "https://stackoverflow.com/questions/29643562/not-able-to-get-authentication-token/29651826#29651826", "title": "not able to get authentication token", "body": "<p>Since you already are using the Twitter gem why not use its search methods instead of rolling your own:</p>\n\n<pre><code>require 'twitter'\n\nclient = Twitter::REST::Client.new do |config|\n  config.consumer_key = \"3OpBStixWSMAzBttp6UWON7QA\"\n  config.consumer_secret = \"MBmfQXoHLY61hYHzGYU8n69sQRQPheXJDejP1SKE2LBdgaqRg4\"\n  config.access_token = \"322718806-qScub4diRzggWUO9DaLKMVKwXZcgrqHD2OFbwQTr\"\n  config.access_token_secret = \"aWAIxQVnqF3nracQ0cC0HbRbSDxlCAaUIICorEAPlxIub\"\nend \n\nprint \"please enter phrase you want to search\"\nsearch_query = gets.chomp;\n\n# @see https://github.com/sferik/twitter/blob/master/examples/Search.md\nclient.search(search_query, result_type: \"recent\").each do |tweet|\n  puts \"Count       Username                tweet\"           \n  puts \"(#{tweet.url})    #{tweet.user.screen_name} #{tweet.text}\";\nend\n</code></pre>\n"}], "owner": {"reputation": 520, "user_id": 3788832, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/c6daa6f68ae949153497e48b649e6e65?s=128&d=identicon&r=PG&f=1", "display_name": "nikunjM", "link": "https://stackoverflow.com/users/3788832/nikunjm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 29651425, "answer_count": 2, "score": 0, "last_activity_date": 1429105236, "creation_date": 1429081200, "last_edit_date": 1429081798, "question_id": 29643562, "link": "https://stackoverflow.com/questions/29643562/not-able-to-get-authentication-token", "title": "not able to get authentication token", "body": "<p>I tried to use twitter api with ruby for exact search. But because of new twitter api i am not able to access the json file.</p>\n\n<p>this is link \n<a href=\"https://api.twitter.com/1.1/search/tweets.json?q=%23superbowl&amp;result_type=recent\" rel=\"nofollow\">https://api.twitter.com/1.1/search/tweets.json?q=%23superbowl&amp;result_type=recent</a></p>\n\n<p>Can you please tell me how to fetch json file.</p>\n\n<p>I have posted my rb file , plz help</p>\n\n<pre><code># http://ruby-doc.org/stdlib-2.0.0/libdoc/open-uri/rdoc/OpenURI.html \nrequire 'open-uri'\n# https://github.com/flori/json\nrequire 'json'\n# http://stackoverflow.com/questions/9008847/what-is-difference-between-p-and-pp\nrequire 'pp'\nrequire 'twitter'\n#load 'twitter_config.rb'\n#Create seprate config file.\n#Encrprty ur keys using md5.\n\nclient = Twitter::REST::Client.new do |config|\n  config.consumer_key = \"3OpBStixWSMAzBttp6UWON7QA\"\n  config.consumer_secret = \"MBmfQXoHLY61hYHzGYU8n69sQRQPheXJDejP1SKE2LBdgaqRg4\"\n  config.access_token = \"322718806-qScub4diRzggWUO9DaLKMVKwXZcgrqHD2OFbwQTr\"\n  config.access_token_secret = \"aWAIxQVnqF3nracQ0cC0HbRbSDxlCAaUIICorEAPlxIub\"\nend \n# Construct the URL we'll be calling\nprint \"please enter phrase you want to search\"\nphrase_value=gets.chomp;\n#pets = File.open(\"https://api.twitter.com/1.1/search/tweets.json?q=#{phrase_value}\", \"r\");\n\nrequest_uri = \"https://api.twitter.com/1.1/search/tweets.json?q=\";\nrequest_query = ''\nurl = \"#{request_uri}#{phrase_value}\"\nurl.gsub!(' ','%20')\nprint url;\n\n# Actually fetch the contents of the remote URL as a String.\nbuffer = open(url).read\n\n# Convert the String response into a plain old Ruby array. It is faster and saves you time compared to the standard Ruby libraries too.\nresult = JSON.parse(buffer)\n# An example of how to take a random sample of elements from an array. Pass the number of elements you want into .sample() method. It's probably a better idea for the server to limit the results before sending, but you can use basic Ruby skills to trim &amp; modify the data however you'd like.\nresult = result.sample(5)\n\n# Loop through each of the elements in the 'result' Array &amp; print some of their attributes.\n result.each do |tweet|\n  puts \"Count       Username                tweet\"           \n  puts \"(#{tweet.url})    #{tweet.user.screen_name} #{tweet.text}\";\n  #sleep(3);\n  #count=count+1;\n  #before following user check if its alreay in list using bollean. \n  client.follow(\"#{tweet.user.screen_name}\")\nend\nputs \"Finished!\\n\\n\"\n</code></pre>\n"}, {"tags": ["css", "ruby", "sass"], "comments": [{"owner": {"reputation": 1820, "user_id": 1482553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KY2PI.jpg?s=128&g=1", "display_name": "mzgajner", "link": "https://stackoverflow.com/users/1482553/mzgajner"}, "edited": false, "score": 1, "creation_date": 1429170545, "post_id": 29643314, "comment_id": 47475413, "body": "There&#39;s no way to do it by just running the command once and somehow specifying two different styles, but why not just run two commands in two separate terminals?"}, {"owner": {"reputation": 4122, "user_id": 2642351, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GJKms.jpg?s=128&g=1", "display_name": "Temp O&#39;rary", "link": "https://stackoverflow.com/users/2642351/temp-orary"}, "reply_to_user": {"reputation": 1820, "user_id": 1482553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KY2PI.jpg?s=128&g=1", "display_name": "mzgajner", "link": "https://stackoverflow.com/users/1482553/mzgajner"}, "edited": false, "score": 0, "creation_date": 1429616558, "post_id": 29643314, "comment_id": 47672823, "body": "@mzgajner, OK so do you mean that there is no option in SASS command line commands where we can combine multiple styles. Right?"}], "answers": [{"comments": [{"owner": {"reputation": 4122, "user_id": 2642351, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GJKms.jpg?s=128&g=1", "display_name": "Temp O&#39;rary", "link": "https://stackoverflow.com/users/2642351/temp-orary"}, "edited": false, "score": 0, "creation_date": 1429616504, "post_id": 29694016, "comment_id": 47672775, "body": "Thanks @FranzHeidl. This explanation is very detailed and helpful. However, I was looking at a SASS -watch kind of solution which is a SASS command line command. However your answer is helpful. But can you confirm that whether we can combine 2 or more styles in sass command itself."}, {"owner": {"reputation": 56, "user_id": 3601209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d07616c3cc869cb594bf35d23d7270c?s=128&d=identicon&r=PG&f=1", "display_name": "FranzHeidl", "link": "https://stackoverflow.com/users/3601209/franzheidl"}, "reply_to_user": {"reputation": 4122, "user_id": 2642351, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GJKms.jpg?s=128&g=1", "display_name": "Temp O&#39;rary", "link": "https://stackoverflow.com/users/2642351/temp-orary"}, "edited": false, "score": 0, "creation_date": 1429779283, "post_id": 29694016, "comment_id": 47763513, "body": "You won&#39;t be able to get two different compilation output styles at the same time using vanilla Sass (or Compass for that matter) from the CLI alone. Sass takes one style option (nested, compressed, expanded, \u2026) and compiles once according to the specified style option."}, {"owner": {"reputation": 56, "user_id": 3601209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d07616c3cc869cb594bf35d23d7270c?s=128&d=identicon&r=PG&f=1", "display_name": "FranzHeidl", "link": "https://stackoverflow.com/users/3601209/franzheidl"}, "reply_to_user": {"reputation": 4122, "user_id": 2642351, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GJKms.jpg?s=128&g=1", "display_name": "Temp O&#39;rary", "link": "https://stackoverflow.com/users/2642351/temp-orary"}, "edited": false, "score": 1, "creation_date": 1429779410, "post_id": 29694016, "comment_id": 47763599, "body": "In order to get two different kinds of compilates you&#39;ll need a task runner to run two different compilation tasks (as outlined above), or, run one compilation task first and one minify/uglify task afterwards (which should be faster than running two compile tasks)."}, {"owner": {"reputation": 4122, "user_id": 2642351, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GJKms.jpg?s=128&g=1", "display_name": "Temp O&#39;rary", "link": "https://stackoverflow.com/users/2642351/temp-orary"}, "edited": false, "score": 0, "creation_date": 1429801083, "post_id": 29694016, "comment_id": 47780702, "body": "@FranxHeidl, Yes, this is what I wanted to know."}], "tags": [], "owner": {"reputation": 56, "user_id": 3601209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d07616c3cc869cb594bf35d23d7270c?s=128&d=identicon&r=PG&f=1", "display_name": "FranzHeidl", "link": "https://stackoverflow.com/users/3601209/franzheidl"}, "is_accepted": false, "score": 2, "last_activity_date": 1429259572, "last_edit_date": 1429259572, "creation_date": 1429259133, "answer_id": 29694016, "question_id": 29643314, "link": "https://stackoverflow.com/questions/29643314/how-to-watch-over-sass-to-generate-compressed-as-well-as-expanded-or-a-combinati/29694016#29694016", "title": "How to watch over SASS to generate compressed as well as expanded or a combination of other styles?", "body": "<p>If (for whatever reason?) you need both output variants to exist at the same time, you could use a task runner like <a href=\"http://gruntjs.com/\" rel=\"nofollow\">Grunt</a> and define two different tasks and then run them both at once. You would need to specify two seperate output directories though, otherwise the second task would overwrite the result of the first task, like so:</p>\n\n<pre><code>sass: {\n    expanded: {\n        options: {\n             style: 'expanded'\n        },\n        files: {\n             'css-expanded/*.css': 'sass/*.scss'\n        }\n    }\n    compressed: {\n        options: {\n             style: 'compressed'\n        }\n        files: {\n             'css-compressed/*.css': 'sass/*.scss'\n        }\n    }\n}\n\ngrunt.registerTask('compile': ['sass:expanded', 'sass:compressed']);\n</code></pre>\n\n<p>Presumably, you probably don't want/need both versions of the css output of the same time though, I guess you want expanded output during development for debugging, and compressed output when building your project? \nIf that's the case, you'd still need to specify two sass tasks/targets, but define a separate grunt task for each (but use the same output directory):</p>\n\n<pre><code>sass: {\n    expanded: {\n        options: {\n             style: 'expanded'\n        },\n        files: {\n             'css': 'sass/*.scss'\n        }\n    }\n    compressed: {\n        options: {\n             style: 'compressed'\n        }\n        files: {\n             'css': 'sass/*.scss'\n        }\n    }\n}\n\ngrunt.registerTask('dev': ['sass:expanded']);\ngrunt.registerTask('build': ['sass:compressed'];\n</code></pre>\n\n<p><strong>Edit:</strong>\nIf you want both version to live in the same output directory at the same time and the output css files don't need the same name for both versions, you could of course use a specific name for one of them <code>*.css</code> and <code>*.min.css</code>:</p>\n\n<pre><code>sass: {\n    expanded: {\n        options: {\n             style: 'expanded'\n        },\n        files: {\n             'css-expanded/*.css': 'sass/*.scss'\n        }\n    }\n    compressed: {\n        options: {\n             style: 'compressed'\n        }\n        files: {\n             'css-compressed/*.min.css': 'sass/*.scss'\n        }\n    }\n}\n\ngrunt.registerTask('compile': ['sass:expanded', 'sass:compressed']);\n</code></pre>\n"}], "owner": {"reputation": 4122, "user_id": 2642351, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/GJKms.jpg?s=128&g=1", "display_name": "Temp O&#39;rary", "link": "https://stackoverflow.com/users/2642351/temp-orary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429259572, "creation_date": 1429080317, "question_id": 29643314, "link": "https://stackoverflow.com/questions/29643314/how-to-watch-over-sass-to-generate-compressed-as-well-as-expanded-or-a-combinati", "title": "How to watch over SASS to generate compressed as well as expanded or a combination of other styles?", "body": "<p>I am using SASS. </p>\n\n<p>But how to watch over SASS files (*.scss) from the root of the project folder to generate compressed (minified) as well as expanded (prettified) or a combination of other styles? </p>\n\n<p>The reference in the SASS documentation does not seem to be (new) user friendly. </p>\n"}, {"tags": ["ruby", "recursion", "fibonacci", "ternary"], "comments": [{"owner": {"reputation": 1615, "user_id": 4387657, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/rNInF.jpg?s=128&g=1", "display_name": "Santhucool", "link": "https://stackoverflow.com/users/4387657/santhucool"}, "edited": false, "score": 0, "creation_date": 1429079274, "post_id": 29642890, "comment_id": 47427059, "body": "def fibonacci( n )     return  n  if n &lt;= 1      fibonacci( n - 1 ) + fibonacci( n - 2 ) end  puts fibonacci( 10 ) # =&gt; 55"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1429080106, "post_id": 29642890, "comment_id": 47427469, "body": "Just a short note on conding style: <code>array.include?(num)</code> already returns <code>true</code> or <code>false</code>. You can replace the whole <code>if ... else ... end</code> block with just <code>return array.include?(num)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 2, "creation_date": 1429129691, "post_id": 29643256, "comment_id": 47459970, "body": "Not to mention you should never use the pattern <code>boolean ? true : false</code> as the Boolean can speak for itself."}, {"owner": {"reputation": 14194, "user_id": 290338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86f90bd8375fa7f611f43ee03cebcd10?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/290338/anatoly"}, "edited": false, "score": 0, "creation_date": 1443915356, "post_id": 29643256, "comment_id": 53683208, "body": "Without use of  memoization your algorithm complexity is exponential, do you really need that?"}], "tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 1, "last_activity_date": 1429301594, "last_edit_date": 1429301594, "creation_date": 1429080076, "answer_id": 29643256, "question_id": 29642890, "link": "https://stackoverflow.com/questions/29642890/how-to-write-fibonacci-sequence-using-recrusion-in-ruby/29643256#29643256", "title": "How to write fibonacci-sequence using recrusion in Ruby?", "body": "<p>The reason <code>array.include?(num) ? true : false</code> does not work is because you have no <code>return</code> statement. Change it to <code>return array.include?(num) ? true : false</code>. WIthout it will just call another level of the recursion algorithm and in the end run too deep into into the stack.</p>\n\n<p>And just as a bonus, here is the famous one-liner using a hash:</p>\n\n<pre><code>fibonacci = Hash.new{ |h,k| h[k] = k &lt; 2 ? k : h[k-1] + h[k-2] }\n\np fibonacci[2]  # =&gt; 1\np fibonacci[23] # =&gt; 28657\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1429128426, "last_edit_date": 1429128426, "creation_date": 1429080340, "answer_id": 29643323, "question_id": 29642890, "link": "https://stackoverflow.com/questions/29642890/how-to-write-fibonacci-sequence-using-recrusion-in-ruby/29643323#29643323", "title": "How to write fibonacci-sequence using recrusion in Ruby?", "body": "<blockquote>\n  <p>Why can't I use <code>array.include?(num) ? true : false</code></p>\n</blockquote>\n\n<p>Syntactically there is nothing wrong in this statement and it should work fine. (it may return <code>SystemStackError: stack level too deep</code> though in context of your code as you are not returning any value).</p>\n\n<p>Here is an example:</p>\n\n<pre><code>array = [0,1]\nnum = 1\narray.include?(num) ? true : false\n# =&gt; true\nnum = 3\narray.include?(num) ? true : false\n# =&gt; false\n</code></pre>\n\n<p>However this is horrible code. Official documentation for <a href=\"http://apidock.com/ruby/Array/include%3F\" rel=\"nofollow\"><code>.include?</code></a> clearly states:</p>\n\n<blockquote>\n  <p>Returns true if the given object is present in self (that is, if any\n  object == anObject), false otherwise.</p>\n</blockquote>\n\n<p>Which means:</p>\n\n<pre><code>num = 1\narray.include?(num)\n# =&gt; true\nnum = 3\narray.include?(num)\n# =&gt; false\n</code></pre>\n\n<p>Again you are repeating the same mistake in the following code:</p>\n\n<pre><code> if array.include?(num)\n    return true\n else\n    return false\n end\n</code></pre>\n\n<p>All of the above code can be replaced with just one line:</p>\n\n<pre><code>return array.include?(num)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429081750, "post_id": 29643599, "comment_id": 47428339, "body": "creating lots of temp arrays is not super-efficient either :)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429082089, "post_id": 29643599, "comment_id": 47428533, "body": "@SergioTulentsev: You are right. Do you like this better?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429082297, "post_id": 29643599, "comment_id": 47428665, "body": "yeah, this is better, but: 1) you don&#39;t recurse (which is kinda the requirement, I think) 2) because of that you don&#39;t need the array in the signature (or even you don&#39;t need it at all). Something like this is even better: <a href=\"http://pastebin.com/1ew7Tktp\" rel=\"nofollow noreferrer\">pastebin.com/1ew7Tktp</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429082902, "post_id": 29643599, "comment_id": 47428967, "body": "I like your pastebin example. I am not sure about the recursion. Because this is a really bad example for recusion, because it makes the problem bigger in each recursion instead not smaller. Therefore recursion is a bad choice to solve the problem. If the recursion is requirement because it is a homework exercise, then I don&#39;t care..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429083302, "post_id": 29643599, "comment_id": 47429196, "body": "BTW, I agree that recursion should not be used here (if we&#39;re being practical). Or even loop, for that matter. There&#39;s a O(1) formula for calculating Nth fibonacci term. So we can use that and a binary search, I think."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429083465, "post_id": 29643599, "comment_id": 47429290, "body": "There aren&#39;t many good examples to teach recursion. I can&#39;t think of one off the top of my head."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1429083714, "post_id": 29643599, "comment_id": 47429429, "body": "Some sorting algorithms like Merge or Quicksort are great examples."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429086442, "post_id": 29643599, "comment_id": 47431007, "body": "But sorting is way more complicated than fibonacci :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429086525, "post_id": 29643599, "comment_id": 47431070, "body": "Maybe some tree-walking examples. Like turning AST into bytecode or whatever :)"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1429111166, "post_id": 29643599, "comment_id": 47448094, "body": "@SergioTulentsev The complexity of more realistic examples is why professors start off with toy examples like Fibonacci, factorials, and integer exponentiation, and towers of Hanoi."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1429113964, "post_id": 29643599, "comment_id": 47450311, "body": "@pjs: I understand. But students not always understand that using recursion <i>here</i> is a bad idea."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1429083228, "last_edit_date": 1429083228, "creation_date": 1429081301, "answer_id": 29643599, "question_id": 29642890, "link": "https://stackoverflow.com/questions/29642890/how-to-write-fibonacci-sequence-using-recrusion-in-ruby/29643599#29643599", "title": "How to write fibonacci-sequence using recrusion in Ruby?", "body": "<p>Shivam already gave an good answer to the question why your first version does not work. </p>\n\n<p>I just want to note that there is no reason to keep all calculated fibonacci numbers in the array. That is a waste of space and probably a bit inefficient. Therefore you could simplify your method to:</p>\n\n<pre><code>def fibonacci?(number)\n  fibos = [0, 1]\n  fibos &lt;&lt; (fibos.shift + fibos.last) while fibos.last &lt; number\n  fibos.include?(number)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 1053071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b509a31fbeaf1b890d38d1d47e88be9?s=128&d=identicon&r=PG", "display_name": "Jkarayusuf", "link": "https://stackoverflow.com/users/1053071/jkarayusuf"}, "is_accepted": false, "score": 0, "last_activity_date": 1429087716, "last_edit_date": 1429087716, "creation_date": 1429085043, "answer_id": 29644783, "question_id": 29642890, "link": "https://stackoverflow.com/questions/29642890/how-to-write-fibonacci-sequence-using-recrusion-in-ruby/29644783#29644783", "title": "How to write fibonacci-sequence using recrusion in Ruby?", "body": "<p>Using the hash concept by @hirolau we can do this in two lines.</p>\n\n<pre><code>def fib?(n)\n  @fibonacci ||= Hash.new{ |h,k| h[k] = k &lt; 2 ? k : h[k-1] + h[k-2] }\n  (0..n+1).any? { |x| @fibonacci[x] == n }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 1, "last_activity_date": 1429119723, "last_edit_date": 1429119723, "creation_date": 1429110027, "answer_id": 29653757, "question_id": 29642890, "link": "https://stackoverflow.com/questions/29642890/how-to-write-fibonacci-sequence-using-recrusion-in-ruby/29653757#29653757", "title": "How to write fibonacci-sequence using recrusion in Ruby?", "body": "<p>In your first version, the block</p>\n\n<pre><code>if array[n] &gt; num\n  array.include?(num) ? true : false\nend\n</code></pre>\n\n<p>is <em>syntactically</em> correct (although nasty), but <em>semantically</em> incorrect for your program because you don't return the result.  You can either add an explicit <code>return</code> on that statement, or make the rest of your program an <code>else</code> clause.  The following version works because by default Ruby returns the result on the last statement executed and only one branch of the if/else gets evaluated: </p>\n\n<pre><code>def is_fibonacci?(num, array=[0,1])\n  n = array.length - 1\n  if array[n] &gt; num\n    array.include?(num)\n  else\n    array &lt;&lt; array[n] + array[n-1]\n    is_fibonacci?(num, array)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14194, "user_id": 290338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86f90bd8375fa7f611f43ee03cebcd10?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/290338/anatoly"}, "is_accepted": false, "score": 0, "last_activity_date": 1443903893, "creation_date": 1443903893, "answer_id": 32927136, "question_id": 29642890, "link": "https://stackoverflow.com/questions/29642890/how-to-write-fibonacci-sequence-using-recrusion-in-ruby/32927136#32927136", "title": "How to write fibonacci-sequence using recrusion in Ruby?", "body": "<p>Fibonacci numbers algorithm can be done two ways: with and w/o recursion. Recursion version must have a memoization implemented to avoid exponential complexity of algorithm.</p>\n\n<p>Variant 1:</p>\n\n<pre><code>class Fibonacci\n  def initialize(num)\n    @num = num\n    @array = [0,1]\n  end\n\n  def process\n    return @num if [0,1].include?(@num)\n    2.upto(@num).each do |i|\n      @array[i] = @array[i-1] + @array[i-2]\n    end\n    @array[@num]\n  end\nend\n</code></pre>\n\n<p>Variant 2:</p>\n\n<pre><code>class FibonacciMemoizedRecursion\n  def initialize(num)\n    @num = num\n    @memo = {0 =&gt; 0, 1 =&gt; 1, 2 =&gt; 1}\n  end\n\n  def process\n    recursion(@num)\n  end\n\n  private\n\n  def recursion(a)\n    return @memo[a] if @memo.include?(a)\n    @memo[a] = recursion(a-1) + recursion(a-2)\n  end\nend\n</code></pre>\n\n<p>To test we can use MiniTest library:</p>\n\n<pre><code>require 'minitest/autorun'\n\nclass FibonacciTest &lt; Minitest::Unit::TestCase\n  def test_process_1\n    assert_equal 0, Fibonacci.new(0).process\n  end\n\n  def test_process_2\n    assert_equal 1, Fibonacci.new(1).process\n  end\n\n  def test_process_3\n    assert_equal 1, Fibonacci.new(2).process\n  end\n\n  def test_process_4\n    assert_equal 2, Fibonacci.new(3).process\n  end\n\n  def test_process_5\n    assert_equal 3, Fibonacci.new(4).process\n  end\n\n  def test_process_6\n    assert_equal 5, Fibonacci.new(5).process\n  end\n\n  def test_process_7\n    assert_equal 8, Fibonacci.new(6).process\n  end\n\n  def test_process_8\n    assert_equal 13, Fibonacci.new(7).process\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4069050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 1, "answer_count": 6, "score": 2, "last_activity_date": 1443903893, "creation_date": 1429078790, "last_edit_date": 1429079178, "question_id": 29642890, "link": "https://stackoverflow.com/questions/29642890/how-to-write-fibonacci-sequence-using-recrusion-in-ruby", "title": "How to write fibonacci-sequence using recrusion in Ruby?", "body": "<p>I have tried to create a method in Ruby which returns true if number is included fibonacci-sequence or false if it's not.</p>\n\n<p>I think I got a problem when I return true or false.</p>\n\n<p>Could anybody tell me why the first code doesn't work please?</p>\n\n<pre><code>def is_fibonacci?(num, array=[0,1])\n\n  n = array.length - 1\n\n  if array[n] &gt; num\n    array.include?(num) ? true : false\n  end\n\n  array &lt;&lt; array[n] + array[n-1]\n  is_fibonacci?(num, array)\n\nend\n</code></pre>\n\n<p>When I run this code, I got this error message.</p>\n\n<p>=>filename.rb:36:in `include?': Interrupt</p>\n\n<pre><code>def is_fibonacci?(num, array=[0,1])\n  n = array.length - 1\n\n  if array[n] &gt; num\n    if array.include?(num)\n        return true\n    else\n        return false\n    end\n  end\n\n  array &lt;&lt; array[n] + array[n-1]\n  is_fibonacci?(num, array)\n\nend\n</code></pre>\n\n<p>Second code worked.</p>\n\n<p>Why can't I use </p>\n\n<pre><code>array.include?(num) ? true : false \n</code></pre>\n\n<p>in the code?</p>\n\n<p>Thank you for helping.</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1429077659, "post_id": 29642560, "comment_id": 47426400, "body": "there are some ways, but nothing that cannot be circumvented with 5 minutes of effort."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1429078686, "post_id": 29642560, "comment_id": 47426804, "body": "@KarolyHorvath thanks."}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1429091762, "post_id": 29642560, "comment_id": 47434244, "body": "It is worth noting that hiding your code does not make it more secure. See this answer for more information: <a href=\"http://stackoverflow.com/questions/29529822/should-i-disclose-database-ids-in-the-url/29532281#29532281\" title=\"should i disclose database ids in the url\">stackoverflow.com/questions/29529822/&hellip;</a>"}, {"owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 0, "creation_date": 1429129554, "post_id": 29642560, "comment_id": 47459885, "body": "Three different requirements in your question.  Locking folders, hiding code, and security, are all very different questions."}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1429165503, "post_id": 29642560, "comment_id": 47472404, "body": "I know all are very different question, but my motto was whether any of the way could help me to achieve what&#39;s required."}], "answers": [{"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1429078902, "post_id": 29642752, "comment_id": 47426890, "body": "AFAIK none of these are obfuscators."}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1429079195, "post_id": 29642752, "comment_id": 47427028, "body": "true. But thats closest to Ruby obfuscation Ruby that I know of. I have also provided a link to other SO on same topic that might help OP point in right direction."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1429078337, "last_edit_date": 1495540452, "creation_date": 1429078337, "answer_id": 29642752, "question_id": 29642560, "link": "https://stackoverflow.com/questions/29642560/is-there-any-way-to-hide-my-code/29642752#29642752", "title": "Is there any way to hide my code?", "body": "<p>Code obfuscation is one option. You can use tools like <a href=\"http://www.erikveen.dds.nl/rubyscript2exe/\" rel=\"nofollow noreferrer\">RubyScript2Exe</a> or <a href=\"http://www.erikveen.dds.nl/allinoneruby/index.html\" rel=\"nofollow noreferrer\">AllInOneRuby</a> to obfuscate your code or make them difficult to understand. However these tools have their own flaws which are nicely discussed <a href=\"https://stackoverflow.com/a/2123468/3035830\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 16971, "user_id": 555690, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Ygbs5.jpg?s=128&g=1", "display_name": "Voldemort", "link": "https://stackoverflow.com/users/555690/voldemort"}, "edited": false, "score": 0, "creation_date": 1429085234, "post_id": 29644755, "comment_id": 47430286, "body": "I don&#39;t remember well, but doesn&#39;t Ocra temporarily extract all necessary files to run the program? The source files become visible, if the user knows where to search."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 16971, "user_id": 555690, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Ygbs5.jpg?s=128&g=1", "display_name": "Voldemort", "link": "https://stackoverflow.com/users/555690/voldemort"}, "edited": false, "score": 0, "creation_date": 1429089002, "post_id": 29644755, "comment_id": 47432528, "body": "yes I believe it does, I would put it in the same category as the first solution for non-geek users"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1429096927, "post_id": 29644755, "comment_id": 47437529, "body": "@peter I need to run WATIR scripts as well, Do JRuby supports WATIR? If it supports, Can I do everything what I do using Ruby?"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1429101158, "post_id": 29644755, "comment_id": 47440392, "body": "@RAJ, it should, i added a link to the response"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1429101194, "last_edit_date": 1492087306, "creation_date": 1429084969, "answer_id": 29644755, "question_id": 29642560, "link": "https://stackoverflow.com/questions/29642560/is-there-any-way-to-hide-my-code/29644755#29644755", "title": "Is there any way to hide my code?", "body": "<p>You could use jRuby and create a JAR using <a href=\"https://github.com/jruby/warbler\" rel=\"nofollow noreferrer\">Warbler</a> but that will only stop non-geek users. <a href=\"https://sqa.stackexchange.com/questions/5364/watir-webdriver-in-conjunction-with-java\">Here</a> a link about using watir in jRuby </p>\n\n<p>Converting the script to an executable file like with <a href=\"http://rubyonwindows.blogspot.be/2009/05/ocra-one-click-ruby-application-builder.html\" rel=\"nofollow noreferrer\">Ocra</a> is also an option.</p>\n\n<p>Securing the script and let it run in another security context could work.</p>\n\n<p>But what I would do is make it a web-app that can be run anywhere while nobody can see the source code. With a nice framework like <a href=\"http://www.sinatrarb.com/\" rel=\"nofollow noreferrer\">Sinatra</a> that shouldn't be that hard.</p>\n"}], "owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1429101194, "creation_date": 1429077499, "last_edit_date": 1429087229, "question_id": 29642560, "link": "https://stackoverflow.com/questions/29642560/is-there-any-way-to-hide-my-code", "title": "Is there any way to hide my code?", "body": "<p>I usually do a project and deploy it on the client machine, but all the Ruby/WATIR scripts are clearly visible to everyone. Is there any way to hide my code? Or is there any way I can secure my code? Or Is there any way to lock a folder through Ruby?</p>\n"}, {"tags": ["ruby", "json", "drb"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1429104161, "post_id": 29642403, "comment_id": 47442562, "body": "I have not tested full integration with python before but <a href=\"http://www.decalage.info/python/ruby_bridge\" rel=\"nofollow noreferrer\">This Article</a> offers some ideas for running Ruby in Python so the reverse should be applicable as well. Also there are a few libraries such as <code>RubyPython</code> and <code>rupy</code> that might be of some interest to you since this is such a limited use case. Beyond that you could compile the python into a <code>dll</code> or com and then use <code>Win32Api</code> or <code>Win32Ole</code> to handle the calls to the <code>dll</code>."}], "answers": [{"tags": [], "owner": {"reputation": 863, "user_id": 453280, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/da112c06610e649fd431a155d9a261de?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/453280/jason"}, "is_accepted": false, "score": 0, "last_activity_date": 1495078223, "last_edit_date": 1495078223, "creation_date": 1444769801, "answer_id": 33112483, "question_id": 29642403, "link": "https://stackoverflow.com/questions/29642403/drb-marshal-via-json-to-accommodate-a-non-ruby-remote-object/33112483#33112483", "title": "DRb -- Marshal via JSON to accommodate a non-ruby remote object", "body": "<p>We implemented the Ruby side of a JSON Drb server for the <a href=\"http://cosmosrb.com/\" rel=\"nofollow noreferrer\" title=\"COSMOS\">COSMOS</a> command and control system here: <a href=\"https://github.com/BallAerospace/COSMOS/blob/master/lib/cosmos/io/json_drb.rb\" rel=\"nofollow noreferrer\">json_drb.rb</a>. We also have a Python interface which talks to that JSON Drb server at <a href=\"https://github.com/BallAerospace/python-ballcosmos\" rel=\"nofollow noreferrer\">python-ballcosmos</a>.</p>\n"}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495078223, "creation_date": 1429076631, "last_edit_date": 1445121074, "question_id": 29642403, "link": "https://stackoverflow.com/questions/29642403/drb-marshal-via-json-to-accommodate-a-non-ruby-remote-object", "title": "DRb -- Marshal via JSON to accommodate a non-ruby remote object", "body": "<p>I need communication between a couple of process types, most of which will be ruby processes, but a very important process type I'll need to communicate with will be a python process.</p>\n\n<p>I came across DRb and I think it might be suitable for that as an alternative to using my own communication protocol.</p>\n\n<p>I wonder, is there a straightforward way to accommodate the python process type.</p>\n\n<p>The python process type would only need to respond to messages of the type \n<code>message_id, *JSONifiable_params</code>.</p>\n\n<p>In other words, I'd like to do something like (in ruby):</p>\n\n<p><code>python_server = DRbObject.new_with_uri(PYTHON_SERVER_URI, marshalling: :json)</code></p>\n\n<p>and then in python, handle whatever JSON gets sent for the method calls I want it to support.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1429082450, "post_id": 29642428, "comment_id": 47428748, "body": "@CarySwoveland: I like it improves readability and makes it really obvious that it returns <code>true</code>/<code>false</code> not just a trueish or falseish value."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1429083108, "post_id": 29642428, "comment_id": 47429091, "body": "@spickerman, that converts the method <code>magical?</code> to a proc, but we haven&#39;t been told about a method by that name. Am I missing something? I&#39;ll check back in the morning."}], "tags": [], "owner": {"reputation": 7188, "user_id": 597358, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/549be4b1e60fe2cbf6b0724802961705?s=128&d=identicon&r=PG", "display_name": "messanjah", "link": "https://stackoverflow.com/users/597358/messanjah"}, "is_accepted": true, "score": 2, "last_activity_date": 1429076799, "creation_date": 1429076799, "answer_id": 29642428, "question_id": 29642391, "link": "https://stackoverflow.com/questions/29642391/create-new-array-of-objects-that-have-a-specific-property-attribute-in-ruby/29642428#29642428", "title": "Create new array of objects that have a specific property/attribute in ruby", "body": "<p>Are you looking for <a href=\"http://ruby-doc.org/core-2.2.1/Enumerable.html%23method-i-select\" rel=\"nofollow\">Enumerable#select</a>?</p>\n\n<pre><code>a = [#&lt;Animal id: 1, type: \"narwhal\", magical: false&gt;, #&lt;Animal id: 2, type: \"unicorn\", magical: true&gt;]\nb = a.select(&amp;:magical?)\nb\n=&gt; [#&lt;Animal id: 2, type: \"unicorn\", magical: true&gt;]\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 3709088, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pKcJc.jpg?s=128&g=1", "display_name": "Corinne", "link": "https://stackoverflow.com/users/3709088/corinne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 29642428, "answer_count": 1, "score": 0, "last_activity_date": 1429076799, "creation_date": 1429076578, "question_id": 29642391, "link": "https://stackoverflow.com/questions/29642391/create-new-array-of-objects-that-have-a-specific-property-attribute-in-ruby", "title": "Create new array of objects that have a specific property/attribute in ruby", "body": "<p>I have an array of objects with a boolean attribute: </p>\n\n<pre><code>[#&lt;Animal id: 1, type: \"narwhal\", magical: false&gt;, #&lt;Animal id: 2, type: \"unicorn\", magical: true&gt;]\n</code></pre>\n\n<p>How do I create a new array with only the objects where the boolean <code>:magical?</code> is true?</p>\n"}, {"tags": ["ruby", "curl", "web-scraping"], "comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1429075699, "post_id": 29642094, "comment_id": 47425729, "body": "Can you paste the error message?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1429080556, "post_id": 29642094, "comment_id": 47427691, "body": "just to nitpick, your second require shouldn&#39;t have a capital &quot;R&quot;. I also think you should use the URI#request_uri method instead of URI#path when instantiating the request. And because you specify the content type as urlencoded, I think you shouldn&#39;t call #to_json on params when you encode it."}, {"owner": {"reputation": 3374, "user_id": 461640, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/20199b7748890e8d48375146a4860238?s=128&d=identicon&r=PG", "display_name": "The Lazy Log", "link": "https://stackoverflow.com/users/461640/the-lazy-log"}, "edited": false, "score": 0, "creation_date": 1429085495, "post_id": 29642094, "comment_id": 47430414, "body": "Yeah, thanks, the typos was because of the stupid spelling corrector on my browser. Also, this is just one of several attempt I made so let me try your suggestion and see how it would go"}, {"owner": {"reputation": 3374, "user_id": 461640, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/20199b7748890e8d48375146a4860238?s=128&d=identicon&r=PG", "display_name": "The Lazy Log", "link": "https://stackoverflow.com/users/461640/the-lazy-log"}, "edited": false, "score": 0, "creation_date": 1429085640, "post_id": 29642094, "comment_id": 47430497, "body": "Ok. just tried and did not work. And one more thing, URI.encode does not accept Hash, it only accept string. That&#39;s why I use to_json"}, {"owner": {"reputation": 3374, "user_id": 461640, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/20199b7748890e8d48375146a4860238?s=128&d=identicon&r=PG", "display_name": "The Lazy Log", "link": "https://stackoverflow.com/users/461640/the-lazy-log"}, "reply_to_user": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1429085914, "post_id": 29642094, "comment_id": 47430665, "body": "@MikeSlutsky: I have just updated the error message. It looks the same like when you copy the URL and paste it into your browser"}], "answers": [{"comments": [{"owner": {"reputation": 3374, "user_id": 461640, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/20199b7748890e8d48375146a4860238?s=128&d=identicon&r=PG", "display_name": "The Lazy Log", "link": "https://stackoverflow.com/users/461640/the-lazy-log"}, "edited": false, "score": 0, "creation_date": 1429085700, "post_id": 29642285, "comment_id": 47430543, "body": "Actually, the original CURL request was POST, but then I started removing extra things from the CURL request and realize that it works with GET as well.  And your suggestion does not work"}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1429076006, "creation_date": 1429076006, "answer_id": 29642285, "question_id": 29642094, "link": "https://stackoverflow.com/questions/29642094/can-not-convert-curl-to-ruby-request-properly/29642285#29642285", "title": "Can not convert CURL to Ruby request properly", "body": "<p>Your Ruby code is specifying a <code>Post</code> request but your curl is not. Try replacing this line:</p>\n\n<pre><code>req = Net::HTTP::Post.new(uri.path)\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>req = Net::HTTP::Get.new(uri.path)\n</code></pre>\n"}], "owner": {"reputation": 3374, "user_id": 461640, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/20199b7748890e8d48375146a4860238?s=128&d=identicon&r=PG", "display_name": "The Lazy Log", "link": "https://stackoverflow.com/users/461640/the-lazy-log"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1429085856, "creation_date": 1429075027, "last_edit_date": 1429085856, "question_id": 29642094, "link": "https://stackoverflow.com/questions/29642094/can-not-convert-curl-to-ruby-request-properly", "title": "Can not convert CURL to Ruby request properly", "body": "<p>I am trying to scrape data from Yahoo News as much as I can. And because Yahoo is using infinite pagination, I will need to find a way to simulate that behavior on Ruby. I think it is easier to see which URL is called when more news are loaded when scrolling down. Here are what I found:</p>\n\n<p>URL: <a href=\"http://news.yahoo.com/hjsal?m_mode=multipart&amp;site=news&amp;region=US&amp;lang=en-US&amp;pagetype=minihome\" rel=\"nofollow\">http://news.yahoo.com/hjsal?m_mode=multipart&amp;site=news&amp;region=US&amp;lang=en-US&amp;pagetype=minihome</a></p>\n\n<p>Header: there are many, but only few of them are important. They includes: Referer, Host, Origin, Cookie, Content-Type</p>\n\n<p>Data: there are 4 keys: _json, _mode, _txnid and _crumb</p>\n\n<pre><code>params = {\"_json\" =&gt; [{\"_action\"=&gt;\"show\",\"batch\"=&gt;2,\"cat\"=&gt;\"\",\"catName\"=&gt;\"\",\"sb\"=&gt;0,\"ccode\"=&gt;\"grandSlam_news\",\"woeid\"=&gt;28379204,\"_subAction\"=&gt;\"more\",\"items\"=&gt;[{\"u\"=&gt;\"18fdc929-d35a-3b57-a253-435b0c9fa1e8\",\"i\"=&gt;\"4000010183\"},{\"u\"=&gt;\"52a2961d-441f-34b7-bfa2-60ee2dae1001\",\"i\"=&gt;\"4000006954\"},{\"u\"=&gt;\"0a6e7572-9eda-3c34-9052-ae58fbf009a2\",\"i\"=&gt;\"4000006504\"},{\"u\"=&gt;\"ba9832a7-30a8-3e58-9a82-667c980db5ef\",\"i\"=&gt;\"4000009705\"},{\"u\"=&gt;\"ff37c89f-4146-310c-ac28-68dea7626396\",\"i\"=&gt;\"4000007878\"},{\"u\"=&gt;\"772cd139-7fec-3107-9bf6-e789c51e333c\",\"i\"=&gt;\"4000009780\"},{\"u\"=&gt;\"20598ae3-7581-3c0d-94b3-55f15e0cace9\",\"i\"=&gt;\"4000007760\"},{\"u\"=&gt;\"a98a5581-a0aa-3e4b-9f7b-b6a8ba16ff2b\",\"i\"=&gt;\"4000006306\"},{\"u\"=&gt;\"00d23e7a-9b03-39ed-b669-f612e051d49f\",\"i\"=&gt;\"4000005248\"},{\"u\"=&gt;\"f5c4f020-c608-32ed-aab2-dca6f20e62e1\",\"i\"=&gt;\"4000005770\"},{\"u\"=&gt;\"ba6ac04c-a94c-3eec-a18a-63c98dabc926\",\"i\"=&gt;\"4000007324\"},{\"u\"=&gt;\"f5a82053-132e-3c5d-abff-1026de72addd\",\"i\"=&gt;\"4000004708\"},{\"u\"=&gt;\"86024916-08d3-3162-b158-9947a7eaeb6e\",\"i\"=&gt;\"4000009721\"},{\"u\"=&gt;\"2486b22c-e8fc-3195-8ad9-26c2c4d1ac4b\",\"i\"=&gt;\"4000006895\"},{\"u\"=&gt;\"9fd886b1-0708-3c75-a70c-5384c3bf2d6e\",\"i\"=&gt;\"4000008879\"},{\"u\"=&gt;\"942dea9b-4686-30a9-b59a-95d4c7c69580\",\"i\"=&gt;\"4000004912\"},{\"u\"=&gt;\"88d6a345-cc86-3c42-a975-729852551041\",\"i\"=&gt;\"4000004711\"},{\"u\"=&gt;\"d2021342-2066-3bdc-8d67-2b07b5051888\",\"i\"=&gt;\"4000007372\"},{\"u\"=&gt;\"b2c80259-6ef9-3622-9016-4625f3d7bf67\",\"i\"=&gt;\"4000005337\"},{\"u\"=&gt;\"071008c4-4fe3-3b98-8695-b8e8ff15c599\",\"i\"=&gt;\"4000003388\"}],\"listid\"=&gt;\"\",\"blogtype\"=&gt;\"\",\"left\"=&gt;130,\"key\"=&gt;\"1\",\"cpos\"=&gt;23,\"prid\"=&gt;\"evecfmlai6o1o\",\"_container\"=&gt;0,\"_id\"=&gt;\"u_30345786\",\"_txnid\"=&gt;1428381836200}],\n  \"_mode\" =&gt; \"json\",\n  \"_crumb\" =&gt; \"NugJjVjNCWa\",\n  \"_txnid\" =&gt; 1428381836200\n}\n</code></pre>\n\n<p>I got all above info from the Network tab of Developer tool in Chrome. And the corresponding CURL (generated by Developer Tool) for this request is:</p>\n\n<pre><code>curl 'http://news.yahoo.com/hjsal?m_mode=multipart&amp;site=news&amp;region=US&amp;lang=en-US&amp;pagetype=minihome' -H 'Cookie: ucs=sfcTs=1425628433&amp;sfc=1; AO=u=1; B=b6dveila7ac17&amp;b=4&amp;d=c_ArSSppYEH6SFcrdazmtHDka6k-&amp;s=b6&amp;i=gQmslnXVPGkRceH.mrGk; F=a=RZpcadUMvSym7INq.f8fhle0_OQ0LB4p7I.8J.56OYwNqahr5jVi6DZsH5vjMWANCHUIoF0-&amp;b=U8Fw; PH=fn=muyarBFoN154nhRrjzs-&amp;i=us; DSS=cnt=1&amp;ts=1425628533; ywandp=10001393120079%3A2763408991; fpc=10001393120079%3AZWeFxmga%7C%7C; ugccmt_comment_usortoptv1=highestRated; ywadp115488662=2349330862; fpms=; yvapF=%7B%22cc%22%3A1%2C%22rcc%22%3A1%2C%22vl%22%3A47.129999999999995%2C%22rvl%22%3A47.129999999999995%7D' -H 'Origin: http://news.yahoo.com' -H 'Content-Type: application/x-www-form-urlencoded; charset=UTF-8' -H 'Referer: http://news.yahoo.com/' --data '_crumb=NugJjVjNCWa&amp;_mode=json&amp;_txnid=1428540838640&amp;_json=%5B%7B%22_action%22%3A%22show%22%2C%22batch%22%3A2%2C%22cat%22%3A%22%22%2C%22catName%22%3A%22%22%2C%22sb%22%3A0%2C%22ccode%22%3A%22grandSlam_news%22%2C%22woeid%22%3A28289488%2C%22_subAction%22%3A%22more%22%2C%22items%22%3A%5B%7B%22u%22%3A%220d9b1c7e-bfe6-3d71-b0fc-e31aa6a4ac78%22%2C%22i%22%3A%224000006886%22%7D%2C%7B%22u%22%3A%22d6291cfc-70e2-331d-b202-7d3e89d43275%22%2C%22i%22%3A%224000009863%22%7D%2C%7B%22u%22%3A%22d3c3af9f-cf8f-3d4e-a642-0070528819e0%22%2C%22i%22%3A%224000006408%22%7D%2C%7B%22u%22%3A%22104e5284-2998-3d7c-aaf6-9ceda966699d%22%2C%22i%22%3A%224000008669%22%7D%2C%7B%22u%22%3A%225f5e58cd-4e73-34f0-b1e3-59b8ed0d6dd2%22%2C%22i%22%3A%224000006338%22%7D%2C%7B%22u%22%3A%228f9ce219-79e9-33f8-baa1-1ddea51aed5a%22%2C%22i%22%3A%224000005997%22%7D%2C%7B%22u%22%3A%22683a22bb-e622-31b9-8c1d-d872db4dbf71%22%2C%22i%22%3A%224000007873%22%7D%2C%7B%22u%22%3A%222bd68c78-9645-34cf-8ba4-08ac328ffc60%22%2C%22i%22%3A%224000005723%22%7D%2C%7B%22u%22%3A%2261ed0f69-1e95-3264-baae-0d635606c9c4%22%2C%22i%22%3A%224000006596%22%7D%2C%7B%22u%22%3A%22e86ec903-edf8-3f46-a27a-4c10cdee8f19%22%2C%22i%22%3A%224000007547%22%7D%2C%7B%22u%22%3A%22d4f5eaea-3d28-36de-89a3-b9bb3fc79834%22%2C%22i%22%3A%224000009036%22%7D%2C%7B%22u%22%3A%228a05f4f4-e162-3586-96f1-0b7212a1ebd9%22%2C%22i%22%3A%224000006790%22%7D%2C%7B%22u%22%3A%22b49da9d0-a9ec-3c49-afbe-da1da9c3dfc5%22%2C%22i%22%3A%224000007305%22%7D%2C%7B%22u%22%3A%22f5fe6bcf-77fb-3e9e-bd56-a62027d604f1%22%2C%22i%22%3A%224000005595%22%7D%2C%7B%22u%22%3A%22b644c626-a6a4-3ab7-9d5d-737ee62fa492%22%2C%22i%22%3A%224000007357%22%7D%2C%7B%22u%22%3A%22bfa50721-be1b-38e2-94d1-e8728d112b0c%22%2C%22i%22%3A%224000008326%22%7D%2C%7B%22u%22%3A%22b9e49778-e5dd-3d84-9eb4-6a2681d81a93%22%2C%22i%22%3A%224000006213%22%7D%2C%7B%22u%22%3A%226073c345-05da-3fba-a6d0-f8699fe0e961%22%2C%22i%22%3A%224000005885%22%7D%2C%7B%22u%22%3A%22104a6bec-1244-39f8-ab7c-0586a1a5bd6d%22%2C%22i%22%3A%224000007645%22%7D%2C%7B%22u%22%3A%221280a6da-4b77-3543-8ded-ee62fcef6f9e%22%2C%22i%22%3A%224000007605%22%7D%5D%2C%22listid%22%3A%22%22%2C%22blogtype%22%3A%22%22%2C%22left%22%3A130%2C%22key%22%3A%221%22%2C%22cpos%22%3A24%2C%22prid%22%3A%223mmkn1daibjbe%22%2C%22_container%22%3A0%2C%22_id%22%3A%22u_30345786%22%2C%22_txnid%22%3A1428540838640%7D%5D' --compressed\n</code></pre>\n\n<p>Based on this CURL request, I have come up with the following Ruby code to crawl the data:</p>\n\n<pre><code>require 'net/http'\nRequire 'json'\n\nparams = {\"_json\" =&gt; URI.encode([{\"_action\"=&gt;\"show\",\"batch\"=&gt;2,\"cat\"=&gt;\"\",\"catName\"=&gt;\"\",\"sb\"=&gt;0,\"ccode\"=&gt;\"grandSlam_news\",\"woeid\"=&gt;28379204,\"_subAction\"=&gt;\"more\",\"items\"=&gt;[{\"u\"=&gt;\"18fdc929-d35a-3b57-a253-435b0c9fa1e8\",\"i\"=&gt;\"4000010183\"},{\"u\"=&gt;\"52a2961d-441f-34b7-bfa2-60ee2dae1001\",\"i\"=&gt;\"4000006954\"},{\"u\"=&gt;\"0a6e7572-9eda-3c34-9052-ae58fbf009a2\",\"i\"=&gt;\"4000006504\"},{\"u\"=&gt;\"ba9832a7-30a8-3e58-9a82-667c980db5ef\",\"i\"=&gt;\"4000009705\"},{\"u\"=&gt;\"ff37c89f-4146-310c-ac28-68dea7626396\",\"i\"=&gt;\"4000007878\"},{\"u\"=&gt;\"772cd139-7fec-3107-9bf6-e789c51e333c\",\"i\"=&gt;\"4000009780\"},{\"u\"=&gt;\"20598ae3-7581-3c0d-94b3-55f15e0cace9\",\"i\"=&gt;\"4000007760\"},{\"u\"=&gt;\"a98a5581-a0aa-3e4b-9f7b-b6a8ba16ff2b\",\"i\"=&gt;\"4000006306\"},{\"u\"=&gt;\"00d23e7a-9b03-39ed-b669-f612e051d49f\",\"i\"=&gt;\"4000005248\"},{\"u\"=&gt;\"f5c4f020-c608-32ed-aab2-dca6f20e62e1\",\"i\"=&gt;\"4000005770\"},{\"u\"=&gt;\"ba6ac04c-a94c-3eec-a18a-63c98dabc926\",\"i\"=&gt;\"4000007324\"},{\"u\"=&gt;\"f5a82053-132e-3c5d-abff-1026de72addd\",\"i\"=&gt;\"4000004708\"},{\"u\"=&gt;\"86024916-08d3-3162-b158-9947a7eaeb6e\",\"i\"=&gt;\"4000009721\"},{\"u\"=&gt;\"2486b22c-e8fc-3195-8ad9-26c2c4d1ac4b\",\"i\"=&gt;\"4000006895\"},{\"u\"=&gt;\"9fd886b1-0708-3c75-a70c-5384c3bf2d6e\",\"i\"=&gt;\"4000008879\"},{\"u\"=&gt;\"942dea9b-4686-30a9-b59a-95d4c7c69580\",\"i\"=&gt;\"4000004912\"},{\"u\"=&gt;\"88d6a345-cc86-3c42-a975-729852551041\",\"i\"=&gt;\"4000004711\"},{\"u\"=&gt;\"d2021342-2066-3bdc-8d67-2b07b5051888\",\"i\"=&gt;\"4000007372\"},{\"u\"=&gt;\"b2c80259-6ef9-3622-9016-4625f3d7bf67\",\"i\"=&gt;\"4000005337\"},{\"u\"=&gt;\"071008c4-4fe3-3b98-8695-b8e8ff15c599\",\"i\"=&gt;\"4000003388\"}],\"listid\"=&gt;\"\",\"blogtype\"=&gt;\"\",\"left\"=&gt;130,\"key\"=&gt;\"1\",\"cpos\"=&gt;23,\"prid\"=&gt;\"evecfmlai6o1o\",\"_container\"=&gt;0,\"_id\"=&gt;\"u_30345786\",\"_txnid\"=&gt;1428381836200}].to_json),\n  \"_mode\" =&gt; \"json\",\n  \"_crumb\" =&gt; \"NugJjVjNCWa\",\n  \"_txnid\" =&gt; 1428381836200\n}\n\ncookie = 'ucs=sfcTs=1425628433&amp;sfc=1; AO=u=1; B=b6dveila7ac17&amp;b=4&amp;d=c_ArSSppYEH6SFcrdazmtHDka6k-&amp;s=b6&amp;i=gQmslnXVPGkRceH.mrGk; F=a=RZpcadUMvSym7INq.f8fhle0_OQ0LB4p7I.8J.56OYwNqahr5jVi6DZsH5vjMWANCHUIoF0-&amp;b=U8Fw; PH=fn=muyarBFoN154nhRrjzs-&amp;i=us; DSS=cnt=1&amp;ts=1425628533; ywandp=10001393120079%3A2763408991; fpc=10001393120079%3AZWeFxmga%7C%7C; ugccmt_comment_usortoptv1=highestRated; ywadp115488662=2349330862; fpms=; yvapF=%7B%22cc%22%3A1%2C%22rcc%22%3A1%2C%22vl%22%3A47.129999999999995%2C%22rvl%22%3A47.129999999999995%7D'\n\nuri = URI('http://news.yahoo.com/hjsal?m_mode=multipart&amp;site=news&amp;region=US&amp;lang=en-US&amp;pagetype=minihome')\n\nreq = Net::HTTP::Post.new(uri.path)\n\nreq.add_field('Referer', 'http://news.yahoo.com/')\nreq.add_field('Origin', 'http://news.yahoo.com')\nreq.add_field('Host', 'news.yahoo.com')\nreq.add_field('Cookie', cookie)\nreq.add_field('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8')\n\nreq.body = URI.encode(params.to_json)\n\nhttp = Net::HTTP.new(uri.host,uri.port)\n\nres = http.request(req)\n\np res.body\n</code></pre>\n\n<p>But it always returns error message in response when running above Ruby code (the CURL request works perfectly). I am not quite sure what is wrong here and I do hope you guys can give me some hints to resolve this issue.</p>\n\n<p>The response (this error is the same if you copy the URL and paste it on your browser):</p>\n\n<pre><code>&lt;div class=\\\"oops-msg\\\" role=\\\"alertdialog\\\"&gt;\\n&lt;span class=\\\"icon icon-error y-glbl-universal\\\"&gt;&lt;/span&gt;\\n&lt;h3 class=\\\"oops\\\"&gt;The module encountered a problem while trying to load&lt;/h3&gt;\\n                &lt;p class=\\\"oops\\\"&gt;App is currently not available. Please, try again.&lt;/p&gt;\\n                \\n            &lt;/div&gt;&lt;!-- hdf50.fp.gq1.yahoo.com compressed/chunked Wed Apr 15 08:15:39 UTC 2015 --&gt;\\n\n</code></pre>\n\n<p>Also, I can not even simulate this request in Postman Client(new version with Interceptor enabled).</p>\n\n<p>Thank you very much</p>\n"}, {"tags": ["ruby", "sql-server", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "edited": false, "score": 0, "creation_date": 1429080138, "post_id": 29642819, "comment_id": 47427484, "body": "Hi jkarayusuf ,what i want,Suppose table T_SDF is already is present in SQL server.I have to access all the values present in that table.How should the model created like &quot;rails g model .......&quot;."}, {"owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "edited": false, "score": 0, "creation_date": 1429087319, "post_id": 29642819, "comment_id": 47431543, "body": "Can i access the field values by creating object for This TSdf class ?"}, {"owner": {"reputation": 341, "user_id": 1053071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b509a31fbeaf1b890d38d1d47e88be9?s=128&d=identicon&r=PG", "display_name": "Jkarayusuf", "link": "https://stackoverflow.com/users/1053071/jkarayusuf"}, "reply_to_user": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "edited": false, "score": 0, "creation_date": 1429087929, "post_id": 29642819, "comment_id": 47431912, "body": "Yes. Image the T_SDF table has a the field <code>name</code> which is a <code>varchar(255)</code>. You could then access the data by executing: <code>TSdf.find(id).name</code>"}, {"owner": {"reputation": 341, "user_id": 1053071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b509a31fbeaf1b890d38d1d47e88be9?s=128&d=identicon&r=PG", "display_name": "Jkarayusuf", "link": "https://stackoverflow.com/users/1053071/jkarayusuf"}, "reply_to_user": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "edited": false, "score": 0, "creation_date": 1429088088, "post_id": 29642819, "comment_id": 47431990, "body": "Rails will generate a method on the TSdf class for each column in the table."}], "tags": [], "owner": {"reputation": 341, "user_id": 1053071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b509a31fbeaf1b890d38d1d47e88be9?s=128&d=identicon&r=PG", "display_name": "Jkarayusuf", "link": "https://stackoverflow.com/users/1053071/jkarayusuf"}, "is_accepted": true, "score": 0, "last_activity_date": 1429083038, "last_edit_date": 1495542129, "creation_date": 1429078539, "answer_id": 29642819, "question_id": 29642025, "link": "https://stackoverflow.com/questions/29642025/create-class-name-in-rails-for-existing-table-name-present-in-sql-server/29642819#29642819", "title": "Create class name in Rails for existing table name present in SQL server", "body": "<p>I believe you are looking for <code>self.table_name =</code>\nDocumentation: <a href=\"http://apidock.com/rails/v3.2.8/ActiveRecord/ModelSchema/ClassMethods/table_name%3D\" rel=\"nofollow noreferrer\">http://apidock.com/rails/v3.2.8/ActiveRecord/ModelSchema/ClassMethods/table_name%3D</a></p>\n\n<p>Example:</p>\n\n<pre><code>class SomeModel\n  self.table_name = 'T_SDF'\nend\n</code></pre>\n\n<h2>Update</h2>\n\n<p>To generate a model for an existing table.</p>\n\n<p>Run <code>rails g model t_sdf</code>. We don't want to pass any parameters to this since the table already exists.</p>\n\n<h3>Preparing the Migration</h3>\n\n<p>The previous command should have generated a file such as: <code>db/migrate/20150415071801_create_t_sdfs.rb</code>.</p>\n\n<p>We will want to update it to create the table exactly as it already exists.\nIn MySQL I tend to execute the command <code>show create table {{table_name}}</code>\nIn SQL Server you should be able to follow the instructions here: <a href=\"https://stackoverflow.com/questions/3526982/show-create-table-tablename-how-do-i-do-this-in-sql-server\">show create table tablename (how do i do this in sql server)?</a></p>\n\n<p>Once you have the string to create the table, paste the string into the execute statement in the example below.</p>\n\n<pre><code>class CreateTSdfs &lt; ActiveRecord::Migration\n  def up\n    # We wrap the command in an unless statement because we\n    # don't want to run it on production. However, it is important for\n    # the table to be created for developers working on local databases.\n    unless table_exists?('T_SDF')\n      execute \"paste the create table sql statement here\"\n    end\n  end\n\n  def down\n    remove_table 'T_SDF'\n  end\nend\n</code></pre>\n\n<h3>Preparing the Model</h3>\n\n<p>You should just need to set the table name of model file.\n<code>app/models/t_sdf.rb</code></p>\n\n<pre><code>class TSdf\n  self.table_name = 'T_SDF'\nend\n</code></pre>\n"}], "owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "accepted_answer_id": 29642819, "answer_count": 1, "score": 0, "last_activity_date": 1429083038, "creation_date": 1429074650, "last_edit_date": 1429080976, "question_id": 29642025, "link": "https://stackoverflow.com/questions/29642025/create-class-name-in-rails-for-existing-table-name-present-in-sql-server", "title": "Create class name in Rails for existing table name present in SQL server", "body": "<p>I want to use SQL server table in rails.<br>\nSuppose I already have one table T_SDF in SQL server and I want to fetch all data from this table.</p>\n\n<p>How can I create a model or class in Rails?</p>\n\n<p>I am using Rails version 3.2.9 and Ruby version 1.9.3.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance"], "comments": [{"owner": {"reputation": 3558, "user_id": 2559490, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/20wjg.jpg?s=128&g=1", "display_name": "Hardik", "link": "https://stackoverflow.com/users/2559490/hardik"}, "edited": false, "score": 0, "creation_date": 1429074752, "post_id": 29641964, "comment_id": 47425443, "body": "I had experienced similar issue!!!"}], "answers": [{"comments": [{"owner": {"reputation": 19142, "user_id": 166484, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X1d72.jpg?s=128&g=1", "display_name": "firedev", "link": "https://stackoverflow.com/users/166484/firedev"}, "edited": false, "score": 0, "creation_date": 1429088664, "post_id": 29642852, "comment_id": 47432319, "body": "Would it behave the same way in production?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "reply_to_user": {"reputation": 19142, "user_id": 166484, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X1d72.jpg?s=128&g=1", "display_name": "firedev", "link": "https://stackoverflow.com/users/166484/firedev"}, "edited": false, "score": 0, "creation_date": 1429088814, "post_id": 29642852, "comment_id": 47432414, "body": "@Nick In production everything is loaded upfront so I would hope not but I suppose that if the files were loaded in a certain order it could still happen - I don&#39;t know if rails tries to avoid this."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 4, "last_activity_date": 1429088837, "last_edit_date": 1429088837, "creation_date": 1429078631, "answer_id": 29642852, "question_id": 29641964, "link": "https://stackoverflow.com/questions/29641964/rails-module-scope/29642852#29642852", "title": "Rails module scope", "body": "<p>The problem here is rails' development mode code loading: in general code is loaded when you try to do something with a constant (eg subclass from it) and that constant doesn't exist. This results in <code>const_missing</code> being called and rails uses it this to try to load the class (for a detailed description see <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" rel=\"nofollow\">the guide</a>).</p>\n\n<p>If neither ApplicationController nor Admin::ApplicationController exist then when you access your admin pages controller ruby will hit that const_missing and try to load admin/application_controller.rb</p>\n\n<p>However if ApplicationController is already loaded then ruby won't fire <code>const_missing</code> since it perfectly legal for a class in the admin module to inherit from something at the toplevel.</p>\n\n<p>The solution as you say is to make explicit what you are inheriting from. Personally in my own apps I use <code>Admin::BaseController</code> as the base class.</p>\n"}, {"comments": [{"owner": {"reputation": 19142, "user_id": 166484, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X1d72.jpg?s=128&g=1", "display_name": "firedev", "link": "https://stackoverflow.com/users/166484/firedev"}, "edited": false, "score": 0, "creation_date": 1429088648, "post_id": 29643610, "comment_id": 47432312, "body": "I guess in that case it is better to use a unique name like <code>AdminController</code> or explicitly state scope like <code>Admin::ApplicationController</code>"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1429081334, "creation_date": 1429081334, "answer_id": 29643610, "question_id": 29641964, "link": "https://stackoverflow.com/questions/29641964/rails-module-scope/29643610#29643610", "title": "Rails module scope", "body": "<p>Another option is to use <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#require-dependency\" rel=\"nofollow\"><code>require_dependency</code></a> to point Rails to the correct file:</p>\n\n<pre><code># admin/application_controller.rb\n\nrequire_dependency 'admin/application_controller'\n\nmodule Admin\n  class PagesController &lt; ApplicationController\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 19142, "user_id": 166484, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/X1d72.jpg?s=128&g=1", "display_name": "firedev", "link": "https://stackoverflow.com/users/166484/firedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 29642852, "answer_count": 2, "score": 5, "last_activity_date": 1429088837, "creation_date": 1429074357, "last_edit_date": 1429076618, "question_id": 29641964, "link": "https://stackoverflow.com/questions/29641964/rails-module-scope", "title": "Rails module scope", "body": "<p>Given the following controller structure:</p>\n\n<pre><code># application_controller.rb\nclass ApplicationController &lt; ActiveController::Base; end\n\n# pages_controller.rb\nclass PagesController &lt; ApplicationController; end\n\n# admin/application_controller.rb\nmodule Admin\n  class ApplicationController &lt; ::ApplicationController; end\nend\n\n# admin/pages_controller.rb\nmodule Admin\n  class PagesController &lt; ApplicationController; end\nend\n</code></pre>\n\n<p>One would expect <code>Admin::PagesController</code> to inherit from <code>Admin::ApplicationController</code> and it does. But I have noticed that sometimes it inherits from <code>::ApplicationController</code>.</p>\n\n<p>So I decided not to risk it and changed declaration of all controllers in <code>/admin</code> to specifically target <code>Admin::ApplicationController</code></p>\n\n<pre><code># admin/pages_controller.rb\nmodule Admin\n  class PagesController &lt; Admin::ApplicationController; end\nend\n</code></pre>\n\n<p>Okay that works, but from what I know it was correct in the first place. Why Rails inherits from a wrong controller sometimes?</p>\n\n<p><code>Admin::PagesController</code> <em>sometimes</em> inherits from <code>ApplicationController</code> instead of <code>Admin::ApplicationController</code> despite both being in the same <code>module Admin</code></p>\n"}, {"tags": ["javascript", "python", "ruby", "google-analytics", "google-analytics-api"], "comments": [{"owner": {"reputation": 29201, "user_id": 761212, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6980d628cf95cf2e91658b89a29bdd63?s=128&d=identicon&r=PG&f=1", "display_name": "Eike Pierstorff", "link": "https://stackoverflow.com/users/761212/eike-pierstorff"}, "edited": false, "score": 1, "creation_date": 1429076426, "post_id": 29641869, "comment_id": 47425989, "body": "You can add ga:date to your dimensions, that will give you the numbers per day for the specified timeframe."}, {"owner": {"reputation": 269, "user_id": 4210244, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ab29cecaa78a545b1c383454d3907b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Mario Honse", "link": "https://stackoverflow.com/users/4210244/mario-honse"}, "reply_to_user": {"reputation": 29201, "user_id": 761212, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6980d628cf95cf2e91658b89a29bdd63?s=128&d=identicon&r=PG&f=1", "display_name": "Eike Pierstorff", "link": "https://stackoverflow.com/users/761212/eike-pierstorff"}, "edited": false, "score": 0, "creation_date": 1429084479, "post_id": 29641869, "comment_id": 47429855, "body": "@EikePierstorff, thanks."}], "owner": {"reputation": 269, "user_id": 4210244, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/ab29cecaa78a545b1c383454d3907b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Mario Honse", "link": "https://stackoverflow.com/users/4210244/mario-honse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1429073753, "creation_date": 1429073753, "question_id": 29641869, "link": "https://stackoverflow.com/questions/29641869/drawing-a-chart-like-at-google-analytics-ecommerce", "title": "Drawing a chart like at Google Analytics Ecommerce", "body": "<p>I need to retrieve ecommerce data via API from Google Analytics to be able to draw the following chart on my website:</p>\n\n<p><img src=\"https://i.stack.imgur.com/6YZ2a.png\" alt=\"enter image description here\"></p>\n\n<p>I know how to retrieve revenue and ecommerce conversion rate via API but how to make them connected to the dates? When I request the data, I only specify the data range and the response from Google Analytics also contains only the date range.</p>\n\n<p>I'm aware about Embedded API but I need to do that via Reporting API.</p>\n\n<p>P.S. The figures are fake.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1429074048, "creation_date": 1429074048, "answer_id": 29641916, "question_id": 29641793, "link": "https://stackoverflow.com/questions/29641793/find-activerecord-object-by-class-name-and-id/29641916#29641916", "title": "Find ActiveRecord object by class name and id", "body": "<p>Would the <a href=\"http://ruby-doc.org/core-2.1.5/Module.html#method-i-const_get\" rel=\"nofollow\"><code>const_get</code></a> work for you?</p>\n\n<pre><code>if const_defined? params[:vote][:voteable_type]\n  votable = const_get params[:vote][:voteable_type]\n  votable.find params[:vote][:voteable_id]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "is_accepted": false, "score": 6, "last_activity_date": 1429074064, "creation_date": 1429074064, "answer_id": 29641920, "question_id": 29641793, "link": "https://stackoverflow.com/questions/29641793/find-activerecord-object-by-class-name-and-id/29641920#29641920", "title": "Find ActiveRecord object by class name and id", "body": "<p>You might want to use </p>\n\n<pre><code>params[:vote][:voteable_type].classify.constantize.find(params[:vote][:voteable_id])\n</code></pre>\n\n<p>or also</p>\n\n<pre><code>Object.const_get(params[:vote][:voteable_type]).find(params[:vote][:voteable_id])\n</code></pre>\n\n<p>also check</p>\n\n<p><a href=\"http://apidock.com/rails/String/constantize\" rel=\"noreferrer\">http://apidock.com/rails/String/constantize</a></p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1429075118, "post_id": 29642090, "comment_id": 47425562, "body": "I would definitely choose this approach."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 6, "last_activity_date": 1429104875, "last_edit_date": 1429104875, "creation_date": 1429075011, "answer_id": 29642090, "question_id": 29641793, "link": "https://stackoverflow.com/questions/29641793/find-activerecord-object-by-class-name-and-id/29642090#29642090", "title": "Find ActiveRecord object by class name and id", "body": "<p>This isn't a direct answer your question, but I would like to challenge your design and suggest a different approach: I would add two independent <code>vote</code> methods to both controllers (<code>posts_controller</code> and <code>comments_controller</code>), something like:</p>\n\n<pre><code># in posts_controller.rb\ndef vote\n  Post.find(params[:id]).vote\nend\n</code></pre>\n\n<p>I think this is much easier to read and to understand. Furthermore it allows simple and clear restful URLs. Define routes like this in your <code>routes.rb</code></p>\n\n<pre><code>resources :posts do\n  post 'vote', on: :member\nend\n</code></pre>\n\n<p>Plus it gives you path helpers like <code>vote_post_path(@post)</code> which build nice readable URLs like <code>/posts/1/vote</code>.</p>\n"}], "owner": {"reputation": 1542, "user_id": 3680995, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6f3afb75cc49428b9fbc907b02a78fda?s=128&d=identicon&r=PG&f=1", "display_name": "madstap", "link": "https://stackoverflow.com/users/3680995/madstap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1651, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1429104875, "creation_date": 1429073266, "question_id": 29641793, "link": "https://stackoverflow.com/questions/29641793/find-activerecord-object-by-class-name-and-id", "title": "Find ActiveRecord object by class name and id", "body": "<p>I have a polymorphic association with votes, comments and posts, like this:</p>\n\n<pre><code>class Vote &lt; ActiveRecord::Base\n  belongs_to :voteable, polymorphic: true\nend\n\nclass Post &lt; ActiveRecord::Base\n  has_many :votes, as: :voteable\nend\n\nclass Comment &lt; ActiveRecord::Base\n  has_many :votes, as: :voteable\nend\n</code></pre>\n\n<p>When I click on the upvote link, I send <code>voteable_type</code> and <code>voteable_id</code> in the params. In the votes controller I want to find the voteable object using these two strings, but the only solution I've found is eval. I figure that evaling strings from the params is not a great idea.</p>\n\n<pre><code>class VotesController &lt; ApplicationController\n  def find_voteable\n    @voteable = eval(\"#{params[:vote][:voteable_type]}.find(params[:vote][:voteable_id])\")\n  end\nend\n</code></pre>\n\n<p>Any suggestions on how to find an ActiveRecord object by class name and id? Or alternatively, is there a better way to go about doing this that is not sending stuff in the params?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-many-through"], "comments": [{"owner": {"reputation": 1094, "user_id": 1606865, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/825f854201e78dd47e4a4bd79851d7fe?s=128&d=identicon&r=PG", "display_name": "Matt Stevens", "link": "https://stackoverflow.com/users/1606865/matt-stevens"}, "edited": false, "score": 0, "creation_date": 1429070931, "post_id": 29641164, "comment_id": 47424386, "body": "Looking at your pastebin models, you do not need a many to many relationship. You need one to one relationship between date-weather-location, where weather is dependent on date and location. If no-one else answers this, I will amend my answer later tonight."}, {"owner": {"reputation": 1094, "user_id": 1606865, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/825f854201e78dd47e4a4bd79851d7fe?s=128&d=identicon&r=PG", "display_name": "Matt Stevens", "link": "https://stackoverflow.com/users/1606865/matt-stevens"}, "edited": false, "score": 0, "creation_date": 1429071116, "post_id": 29641164, "comment_id": 47424433, "body": "PS. your models are lacking foreign keys."}], "answers": [{"comments": [{"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "reply_to_user": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "edited": false, "score": 0, "creation_date": 1429070774, "post_id": 29641324, "comment_id": 47424342, "body": "@ManoelRibeiro, I&#39;m confused, that pastebin shows that you already have a weather_conditions table. Do you want to add the location and year_month_day id?"}, {"owner": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "edited": false, "score": 0, "creation_date": 1429070930, "post_id": 29641324, "comment_id": 47424385, "body": "Do I have to add it? I thought this ID came when I had the has_many thing"}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "edited": false, "score": 0, "creation_date": 1429071075, "post_id": 29641324, "comment_id": 47424419, "body": "you have to add it. the has_many thing does not affect the schema, only migration does"}, {"owner": {"reputation": 110, "user_id": 4271517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/n2UTY.jpg?s=128&g=1", "display_name": "virtual_monk", "link": "https://stackoverflow.com/users/4271517/virtual-monk"}, "edited": false, "score": 0, "creation_date": 1429071342, "post_id": 29641324, "comment_id": 47424481, "body": "Instead of the create table, just drop in two add_columns"}, {"owner": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "edited": false, "score": 0, "creation_date": 1429072266, "post_id": 29641324, "comment_id": 47424708, "body": "im following exactly what is said in <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/association_basics.html</a>"}], "tags": [], "owner": {"reputation": 110, "user_id": 4271517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/n2UTY.jpg?s=128&g=1", "display_name": "virtual_monk", "link": "https://stackoverflow.com/users/4271517/virtual-monk"}, "is_accepted": false, "score": 0, "last_activity_date": 1429070138, "creation_date": 1429070138, "answer_id": 29641324, "question_id": 29641164, "link": "https://stackoverflow.com/questions/29641164/problems-with-has-many-through-association-rails-4/29641324#29641324", "title": "Problems with has_many through Association Rails 4", "body": "<p>Rails is particular about plural tables. It may not understand how to pluralize year_month_day. What does your schema look like?</p>\n"}, {"comments": [{"owner": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "edited": false, "score": 0, "creation_date": 1429070869, "post_id": 29641347, "comment_id": 47424368, "body": "You can also have as I did but with through, look in the same guide!"}, {"owner": {"reputation": 1094, "user_id": 1606865, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/825f854201e78dd47e4a4bd79851d7fe?s=128&d=identicon&r=PG", "display_name": "Matt Stevens", "link": "https://stackoverflow.com/users/1606865/matt-stevens"}, "reply_to_user": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "edited": false, "score": 0, "creation_date": 1429071019, "post_id": 29641347, "comment_id": 47424407, "body": "Yes, but as you have found it is far more complex and error prone."}, {"owner": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "edited": false, "score": 0, "creation_date": 1429071942, "post_id": 29641347, "comment_id": 47424619, "body": "I need attributes in between though :/"}], "tags": [], "owner": {"reputation": 1094, "user_id": 1606865, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/825f854201e78dd47e4a4bd79851d7fe?s=128&d=identicon&r=PG", "display_name": "Matt Stevens", "link": "https://stackoverflow.com/users/1606865/matt-stevens"}, "is_accepted": false, "score": 0, "last_activity_date": 1429070356, "creation_date": 1429070356, "answer_id": 29641347, "question_id": 29641164, "link": "https://stackoverflow.com/questions/29641164/problems-with-has-many-through-association-rails-4/29641347#29641347", "title": "Problems with has_many through Association Rails 4", "body": "<p>Creating a many to many relationship, you need a has_and_belongs_to_many notation.</p>\n\n<pre><code>class YearMonthDay &lt; ActiveRecord::Base\n    has_and_belongs_to_many :locations\nend\n\nclass Location &lt; ActiveRecord::Base\n    has_and_belongs_to_many :year_month_days\nend\n</code></pre>\n\n<p>Drop the class for WeatherConditions, you only need the join table which has to be named to match the two models. The names have to be in alphabetical order.</p>\n\n<pre><code>create_table :locations_year_month_days, id: false do |t|\n    t.belongs_to :location, index: true\n    t.belongs_to :year_month_day, index: true\n\n  t.timestamps null: false\nend\n</code></pre>\n\n<p>Once you have relationship working, you can then call my_date.locations to get an array of location objects tied to that date, or my_location.year_month_dates for vice versa.</p>\n\n<p>This <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow\">Rails guide</a> has a longer explanation.</p>\n"}, {"comments": [{"owner": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "edited": false, "score": 0, "creation_date": 1429071969, "post_id": 29641505, "comment_id": 47424628, "body": "that didn&#39;t made sense to me :/"}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "reply_to_user": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "edited": false, "score": 0, "creation_date": 1429072060, "post_id": 29641505, "comment_id": 47424657, "body": "can you explain what doesn&#39;t make sense?"}, {"owner": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "edited": false, "score": 0, "creation_date": 1429072486, "post_id": 29641505, "comment_id": 47424776, "body": "you have two ifs in your sentence, can you detail a bit more?"}, {"owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "reply_to_user": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "edited": false, "score": 0, "creation_date": 1429073374, "post_id": 29641505, "comment_id": 47425034, "body": "use one or the other depending on if you already have the table or not."}], "tags": [], "owner": {"reputation": 348, "user_id": 4755698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3444a529022605b18b39a49d1b09bf?s=128&d=identicon&r=PG&f=1", "display_name": "forthowin", "link": "https://stackoverflow.com/users/4755698/forthowin"}, "is_accepted": true, "score": 2, "last_activity_date": 1429073319, "last_edit_date": 1429073319, "creation_date": 1429071467, "answer_id": 29641505, "question_id": 29641164, "link": "https://stackoverflow.com/questions/29641164/problems-with-has-many-through-association-rails-4/29641505#29641505", "title": "Problems with has_many through Association Rails 4", "body": "<p>You still have to add the foreign keys to WeatherConditions:</p>\n\n<p>If you are creating a new table:</p>\n\n<pre><code>class CreateWeatherConditions &lt; ActiveRecord::Migration\n  def change\n    create_table :weather_conditions do |t|\n        t.integer :location_id\n        t.integer :year_month_day_id\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>If you already have the table:</p>\n\n<pre><code>class CreateWeatherConditions &lt; ActiveRecord::Migration\n  def change\n    add_column :weather_conditions, :location_id, :integer\n    add_column :weather_conditions, :year_month_day_id, :integer\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 29641505, "answer_count": 3, "score": 0, "last_activity_date": 1429073319, "creation_date": 1429068980, "question_id": 29641164, "link": "https://stackoverflow.com/questions/29641164/problems-with-has-many-through-association-rails-4", "title": "Problems with has_many through Association Rails 4", "body": "<p>So i'm trying to do a database that stores the current weather:</p>\n\n<pre><code> --------------             ------------------            ----------\n|              | 1       * |                  |*       1 |          | \n| YearMonthDay |-----------| WeatherCondition |----------| Location |\n|              |           |                  |          |          |\n --------------             ------------------            ----------\n</code></pre>\n\n<p>I generated models using belongs_to and has_many :through</p>\n\n<pre><code>class WeatherCondition &lt; ActiveRecord::Base\n    belongs_to :year_month_day\n    belongs_to :location\nend\n\nclass YearMonthDay &lt; ActiveRecord::Base\n    has_many :weather_conditions\n    has_many :locations, :through =&gt; :weather_conditions\n end\n\nclass Location &lt; ActiveRecord::Base\n    has_many :weather_conditions\n    has_many :year_month_days, :through =&gt; :weather_conditions\nend\n</code></pre>\n\n<p>And also created a migration for each of them, the YearMonthDay and the Locations ones are just normal and the WeatherConditions is as follows:</p>\n\n<pre><code>class CreateWeatherConditions &lt; ActiveRecord::Migration\n  def change\n    create_table :weather_conditions do |t|\n        t.belongs_to :location, index: true\n        t.belongs_to :year_month_day, index: true\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>I have no idea what I am doing wrong, but I am getting an error:</p>\n\n<pre><code> unknown attribute 'year_month_day_id' for WeatherCondition.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activeadmin", "rails-admin"], "answers": [{"tags": [], "owner": {"reputation": 3149, "user_id": 1824574, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c8d60dff241dab156fcfa3003e0f3ad7?s=128&d=identicon&r=PG", "display_name": "makhan", "link": "https://stackoverflow.com/users/1824574/makhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1429072077, "creation_date": 1429072077, "answer_id": 29641597, "question_id": 29640959, "link": "https://stackoverflow.com/questions/29640959/using-activeadmin-in-rails-to-create-user-specific-admin-pages/29641597#29641597", "title": "Using ActiveAdmin in Rails to create user specific admin pages", "body": "<p>I haven't tried this myself but it should be easily achievable in <code>ActiveAdmin</code>\neither by changing the <a href=\"http://activeadmin.info/docs/3-index-pages.html#index-scopes\" rel=\"nofollow\">default scope</a> on per controller basis or by using <a href=\"http://activeadmin.info/docs/13-authorization-adapter.html#scoping-collections-in-authorization-adapters\" rel=\"nofollow\">AuthorizationAdapter</a>. </p>\n"}], "owner": {"reputation": 1, "user_id": 4701575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87311f5a88a2aa539a7e574c83e1142d?s=128&d=identicon&r=PG&f=1", "display_name": "Jeong Woo Park", "link": "https://stackoverflow.com/users/4701575/jeong-woo-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429072077, "creation_date": 1429067333, "question_id": 29640959, "link": "https://stackoverflow.com/questions/29640959/using-activeadmin-in-rails-to-create-user-specific-admin-pages", "title": "Using ActiveAdmin in Rails to create user specific admin pages", "body": "<p>To explain it in a sentence, I am asking if it is possible to use the ActiveAdmin gem to create admin pages specific to admin users, i.e. each admin user only gets to see models and associating models specific to him. If so, how would I implement this? </p>\n\n<p>To further explain my situation, I have a model called Sponsor(who would essentially be the admin users), and they put up different offers(another model that belongs to Sponsor) for users to redeem. So what I am trying to do is create an admin page where each sponsor gets his own admin credentials, and the admin page only shows the information that relates to this sponsor, i.e. the information regarding the offers this sponsor put up, and all relating models and its details. Is this possible to implement using the ActiveAdmin gem or any other gems for that matter? </p>\n\n<p>I would rather not implement this from scratch if there are gems out there that I could use. Any suggestions? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "qt", "installation", "gem"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 3565807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54ed129b33f958e22f41ceda920ce1e?s=128&d=identicon&r=PG&f=1", "display_name": "akb", "link": "https://stackoverflow.com/users/3565807/akb"}, "is_accepted": false, "score": 1, "last_activity_date": 1429756844, "last_edit_date": 1495540265, "creation_date": 1429756844, "answer_id": 29812654, "question_id": 29640870, "link": "https://stackoverflow.com/questions/29640870/thoughtbot-suspenders-gem-bundle-install-fails-with-capybara-webkit-even-aft/29812654#29812654", "title": "thoughtbot Suspenders gem - &#39;bundle install&#39; fails with capybara-webkit even after installing Qt", "body": "<p>Check the App Store to see if you recently updated to Command Line Tools 6.3.  If so, you'll need to install 6.3.1 which is now available on Apple's developer site: <a href=\"https://developer.apple.com/downloads/index.action#\" rel=\"nofollow noreferrer\">https://developer.apple.com/downloads/index.action#</a></p>\n\n<p>Also, here's another StackOverflow issue that helped me solve this problem:\n<a href=\"https://stackoverflow.com/questions/29529455/missing-c-header-debug-after-updating-osx-command-line-tools-6-3\">Missing C++ header &lt;__debug&gt; after updating OSX Command Line Tools 6.3</a></p>\n"}], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429756844, "creation_date": 1429066735, "last_edit_date": 1429068546, "question_id": 29640870, "link": "https://stackoverflow.com/questions/29640870/thoughtbot-suspenders-gem-bundle-install-fails-with-capybara-webkit-even-aft", "title": "thoughtbot Suspenders gem - &#39;bundle install&#39; fails with capybara-webkit even after installing Qt", "body": "<p>I'm trying to use the Suspenders gem by ThoughtBot to start out a personal project and ran into an error with capybara-webkit when running <code>bundle install</code>. Google turned up a few similar reports and most seemed to be solved by installing Qt per the instructions at the capybara-webkit GitHub <a href=\"https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit\" rel=\"nofollow\">here</a> (I noticed the instructions are for OSX 10.9 Mavericks and 10.8 Mountain Lion, whereas I'm using 10.10 Yosemite, but I don't see anything for 10.10 specifically).</p>\n\n<blockquote>\n  <p>If you get an error when building, along the lines of fatal error:\n  QObject: No such file or directory, you might be attempting the build\n  against Qt3, or an earlier version of Qt4. Make sure that the qmake in\n  your PATH links to Qt4.8.</p>\n\n<pre><code>which qmake # to see where it links\nrm `which qmake` # IF it is linking to an old version\n</code></pre>\n</blockquote>\n\n<p>Instructions for OSX are:</p>\n\n<blockquote>\n  <p>Go to the QT website (general downloads site, 4.8.6 installers) and\n  download Qt libraries 4.8.6 for Mac (185 MB) and debug libraries (480\n  MB).</p>\n</blockquote>\n\n<p>So I downloaded and installed the two Qt libraries at the link. I get the following output from my command line:</p>\n\n<pre><code>Davids-MBP:app david$ which qmake\n/usr/bin/qmake\nDavids-MBP:app david$ qmake --version\nQMake version 2.01a\nUsing Qt version 4.8.6 in /Library/Frameworks\n</code></pre>\n\n<p>However, when I run <code>bundle install</code> from within my app, I get this output:</p>\n\n<pre><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /Users/david/.rbenv/versions/2.2.1/bin/ruby -r ./siteconf20150414-16090-1y906xu.rb extconf.rb \nWARNING: Ignored (not found) '/Users/david/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/capybara-webkit-1.5.0/src/webkit_server.pbproj'\nmake: *** No rule to make target `qmake'.  Stop.\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/david/.rbenv/versions/2.2.1/bin/$(RUBY_BASE_NAME)\n    --with-gl-dir\n    --without-gl-dir\n    --with-gl-include\n    --without-gl-include=${gl-dir}/include\n    --with-gl-lib\n    --without-gl-lib=${gl-dir}/lib\n    --with-zlib-dir\n    --without-zlib-dir\n    --with-zlib-include\n    --without-zlib-include=${zlib-dir}/include\n    --with-zlib-lib\n    --without-zlib-lib=${zlib-dir}/lib\nCommand 'make qmake' failed\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/david/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/capybara-webkit-1.5.0 for inspection.\nResults logged to /Users/david/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-14/2.2.0-static/capybara-webkit-1.5.0/gem_make.out\nAn error occurred while installing capybara-webkit (1.5.0), and Bundler cannot continue.\nMake sure that `gem install capybara-webkit -v '1.5.0'` succeeds before bundling.\n</code></pre>\n\n<p>I went back and removed Qt, then tried building it from source per the linked doc. That process errored out like so:</p>\n\n<pre><code>Davids-MBP:app david$ brew install qt --build-from-source\n==&gt; Downloading https://download.qt.io/official_releases/qt/4.8/4.8.6/qt-everywhere-opensource-src-4.8.6.tar.gz\n######################################################################## 100.0%\n==&gt; Downloading https://raw.githubusercontent.com/DomT4/scripts/440e3cafde5bf6ec6f50cd28fa5bf89c280f1b53/Homebrew_R\n######################################################################## 100.0%\n==&gt; Patching\npatching file src/gui/dialogs/qcolordialog_mac.mm\npatching file src/gui/dialogs/qfiledialog_mac.mm\npatching file src/gui/dialogs/qfontdialog_mac.mm\npatching file src/gui/kernel/qapplication_mac.mm\npatching file src/gui/kernel/qcocoaapplication_mac.mm\npatching file src/gui/kernel/qcocoaapplicationdelegate_mac.mm\nHunk #4 succeeded at 295 (offset -13 lines).\nHunk #5 succeeded at 342 (offset -13 lines).\npatching file src/gui/kernel/qcocoaapplicationdelegate_mac_p.h\npatching file src/gui/kernel/qcocoamenuloader_mac.mm\npatching file src/gui/kernel/qcocoasharedwindowmethods_mac_p.h\npatching file src/gui/kernel/qeventdispatcher_mac.mm\npatching file src/gui/kernel/qt_cocoa_helpers_mac.mm\npatching file src/gui/kernel/qwidget_mac.mm\npatching file src/gui/styles/qmacstyle_mac.mm\npatching file src/gui/util/qsystemtrayicon_mac.mm\npatching file src/gui/widgets/qcocoamenu_mac.mm\npatching file src/gui/widgets/qmenu_mac.mm\n==&gt; ./configure -prefix /usr/local/Cellar/qt/4.8.6 -system-zlib -qt-libtiff -qt-libpng -qt-libjpeg -confirm-license\n==&gt; make\n1 error generated.\nmake[2]: *** [.obj/release-shared/qglobal.o] Error 1\nmake[2]: *** Waiting for unfinished jobs....\nmake[1]: *** [release] Error 2\nmake: *** [sub-corelib-make_default-ordered] Error 2\nREAD THIS: https://git.io/brew-troubleshooting\n</code></pre>\n\n<p>Can anyone help?</p>\n\n<p>I'm using ruby 2.2.1 through rbenv.  </p>\n"}, {"tags": ["ruby", "arrays", "csv"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1429068807, "post_id": 29640525, "comment_id": 47423828, "body": "Explain the logic. It is not clear."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1429096079, "post_id": 29640525, "comment_id": 47437035, "body": "Your result contains <code>4</code> twice, is this a typo?"}], "answers": [{"tags": [], "owner": {"reputation": 53706, "user_id": 3001736, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j4wN2.jpg?s=128&g=1", "display_name": "Amit Joki", "link": "https://stackoverflow.com/users/3001736/amit-joki"}, "is_accepted": false, "score": 0, "last_activity_date": 1429064768, "creation_date": 1429064768, "answer_id": 29640573, "question_id": 29640525, "link": "https://stackoverflow.com/questions/29640525/ruby-csv-re-arranging-array/29640573#29640573", "title": "Ruby CSV re-arranging Array", "body": "<p>You can use <code>group_by</code>, which groups by the <em>return</em> value of the block passed to it, in this case, it's the ID.</p>\n\n<pre><code>ary = ary.group_by { |v| v[0] }\n</code></pre>\n\n<p>P.S That file ain't looking like a CSV.</p>\n"}], "owner": {"reputation": 127, "user_id": 1737266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XhGLs.jpg?s=128&g=1", "display_name": "Rok", "link": "https://stackoverflow.com/users/1737266/rok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429067745, "creation_date": 1429064395, "question_id": 29640525, "link": "https://stackoverflow.com/questions/29640525/ruby-csv-re-arranging-array", "title": "Ruby CSV re-arranging Array", "body": "<p>I'm not sure what the appropriate title for this question so if someone could help me with that also, it would be nice.</p>\n\n<p>-\nI have a CSV file that looks something like</p>\n\n<pre><code>ID | Num\na  | 1\na  | 2\na  | 3\nb  | 4\nb  | 5\nc  | 6\nc  | 7\n</code></pre>\n\n<p>I need the result to be:</p>\n\n<pre><code>ID | Num\na  | 1,2,3,4\nb  | 4,5\nc  | 6,7\n</code></pre>\n\n<p>Currently, my solution is:</p>\n\n<pre><code>ary = CSV.open('some_file')\n\nfinal = Array.new\nid = ary[1][0] # ary[0] is \"id\"\nnumJoin = ary[1][1]\n\n(1..ary.length).each do |i|\n  if id == ary[i+1][0]\n    numJoin = numJoin + \",\" + ary[i+1][1]\n  else\n    final &lt;&lt; [id,numJoin]\n    id = ary[i+1][0]\n    numJoin = ary[i+1]]1]\n  end\nend\n</code></pre>\n\n<p>It works, but I would like to have the opportunity to learn other ways to solve this, as I think there should be simpler ways to do this..</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "docker", "bundler", "docker-compose"], "answers": [{"tags": [], "owner": {"reputation": 1211, "user_id": 464489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfe035e5c2a413ee21f584c10c2f24a0?s=128&d=identicon&r=PG", "display_name": "Gigablah", "link": "https://stackoverflow.com/users/464489/gigablah"}, "is_accepted": false, "score": 4, "last_activity_date": 1429065583, "creation_date": 1429065583, "answer_id": 29640698, "question_id": 29640425, "link": "https://stackoverflow.com/questions/29640425/docker-do-i-need-to-rebuild-the-container-from-scratch-whenever-i-need-to-add-s/29640698#29640698", "title": "Docker: Do I need to rebuild the container from scratch whenever I need to add software?", "body": "<p>If you want, you can also update an existing image by \"committing\" the changes you've made to a container. The syntax is <code>docker commit &lt;container ID&gt; &lt;image&gt;</code>.</p>\n\n<p>Alternatively you can take advantage of the build cache, by separating your bundle install command into individual gem installs. Then you can add your new gem to the end and it'll reuse all the previous layers when you rebuild the image. This may not be ideal considering that there may be overlapping dependencies.</p>\n"}], "owner": {"reputation": 16696, "user_id": 359380, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b1f5969eb9f627f7d596552079d9ce57?s=128&d=identicon&r=PG", "display_name": "DVG", "link": "https://stackoverflow.com/users/359380/dvg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1206, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1429065583, "creation_date": 1429063702, "question_id": 29640425, "link": "https://stackoverflow.com/questions/29640425/docker-do-i-need-to-rebuild-the-container-from-scratch-whenever-i-need-to-add-s", "title": "Docker: Do I need to rebuild the container from scratch whenever I need to add software?", "body": "<p>So I'm experimenting with Docker, and I set up a Rails App talking to postgres. Everything works, I'm able to access the app, migrate the database, etc.</p>\n\n<pre><code>Dockerfile\nFROM ruby:2.2.1\n\nRUN apt-get update -qq &amp;&amp; apt-get install -y build-essential\nRUN apt-get install -y libxml2-dev libxslt1-dev\nRUN apt-get install -y libqt4-webkit libqt4-dev xvfb\nRUN apt-get install -y nodejs\n\nENV APP_HOME /code\nRUN mkdir $APP_HOME\nWORKDIR $APP_HOME\n\nADD . $APP_HOME\nRUN bundle install\n\ndocker-compose.yml\nweb:\n  build: .\n  command: bin/rails server --port 3000 --binding 0.0.0.0\n  ports:\n   - \"3000:3000\"\n  volumes:\n   - .:/code\n  links:\n   - db\ndb:\n  image: postgres\n  ports:\n    - \"5432:5432\"\n</code></pre>\n\n<p>After making a couple models and a controller, I decided to use Slim templates for the project and added it to my Gemfile</p>\n\n<pre><code>gem 'slim'\n</code></pre>\n\n<p>I would have expected to be able to update this dependency on the web container by running bundle install on it:</p>\n\n<pre><code>docker-compose run web bundle install\n</code></pre>\n\n<p>Which appears to work at first, it installs the gem and it's dependencies. However these are just on a throw-away copy of the built container. IT doesn't stick around when I run docker-compose up the next time.</p>\n\n<p>The only way to get the gem in permanently is to build web from scratch again, which can take 3-4 minutes to install all the gems from scratch again, mostly due to nokigiri.</p>\n\n<p>Is this the only way to \"update\" a base image? I would expect I would only need to rebuild if I'm modifying the Dockerfile itself, when it would make sense to rebuild from scratch.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3474200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/337d200a2d6e19328c5b3bc27a0662ce?s=128&d=identicon&r=PG", "display_name": "Andres", "link": "https://stackoverflow.com/users/3474200/andres"}, "edited": false, "score": 0, "creation_date": 1429132046, "post_id": 29641532, "comment_id": 47461307, "body": "thank you for your answer. I think I will go the namespaces path due to time constraints and also due to the fact that I am just getting started with rails. I really appreciate your insights!"}], "tags": [], "owner": {"reputation": 341, "user_id": 1053071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b509a31fbeaf1b890d38d1d47e88be9?s=128&d=identicon&r=PG", "display_name": "Jkarayusuf", "link": "https://stackoverflow.com/users/1053071/jkarayusuf"}, "is_accepted": true, "score": 7, "last_activity_date": 1429071603, "creation_date": 1429071603, "answer_id": 29641532, "question_id": 29640296, "link": "https://stackoverflow.com/questions/29640296/rails-namespacing-vs-engines/29641532#29641532", "title": "Rails : Namespacing vs Engines?", "body": "<p>Both namespaces and engines have pros and cons. Which one to use will come down to your particular use case. For the most part, I recommend using namespaces as it tends to be easier and saves some headaches. Especially when sharing a data model. However, engines are great when you want to share common isolated behavior in multiple applications.</p>\n\n<h2>Engines</h2>\n\n<p>Pros</p>\n\n<ul>\n<li>Isolate related functionality. This is especially good if you have some tables that are only used by one of the engines as they can manage their own database migrations with prefixed table names.</li>\n<li>Can be reused in multiple Rails applications. (In some cases)</li>\n<li>Good starting point when extracting code out of a monolithic Rails application.</li>\n<li>Reduces the chance that developers working on different engines of a large codebase will break functionality in one of the other engines.</li>\n</ul>\n\n<p>Cons</p>\n\n<ul>\n<li>Not a common pattern to have an application that is made up entirely of engines. So it will take new engineers some time to get used to how everything is setup.</li>\n<li>Can be frustrating to share common functionality. E.g. stylesheets</li>\n<li>You will most likely end up sharing code between the two engines in unexpected ways. Which takes away some value of the <code>Isolate related functionality</code> benefit.</li>\n<li>Text editors with Rails plugins tend to have odd behavior. For example, the vim plugin shortcuts sometimes don't work when inside of a plugin directory</li>\n</ul>\n\n<h2>Namespaces</h2>\n\n<p>Pros</p>\n\n<ul>\n<li>Simple to use and already plenty of Rails conventions to follow.</li>\n<li>Sharing assets and other common functionality tends to be very straightforward.</li>\n<li>Fully supported by text editor rails plugins.</li>\n</ul>\n\n<p>Cons</p>\n\n<ul>\n<li>Unclear which models or libraries are important to different namespaces.</li>\n</ul>\n"}], "owner": {"reputation": 63, "user_id": 3474200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/337d200a2d6e19328c5b3bc27a0662ce?s=128&d=identicon&r=PG", "display_name": "Andres", "link": "https://stackoverflow.com/users/3474200/andres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "accepted_answer_id": 29641532, "answer_count": 1, "score": 3, "last_activity_date": 1429071603, "creation_date": 1429062945, "question_id": 29640296, "link": "https://stackoverflow.com/questions/29640296/rails-namespacing-vs-engines", "title": "Rails : Namespacing vs Engines?", "body": "<p>I am just getting started in a Rails project after a long time in the PHP world. </p>\n\n<p>This project is in a very early stage, meaning that is a good time to do major changes, and currently comprises two different rails modules, one for administrators and one for users, both in separate rails instances. What I would like to do is to merge both projects into a single rails instance, which I believe it will improve the manageability of the application in the long run. </p>\n\n<p>Both instances share the same database and each of them has a devise model for authentication. I have been documenting myself about ways of merging both projects and I came up with two alternatives: the first would be to create two namespaces, one for users and another one for admins, and share the model and framework logic. the second one would be to create engines for admins and users, which seems to be cleaner but much more complex. </p>\n\n<p>I have read a lot documentation and I am experimenting with rails, but at this point I am in need of a more experienced opinion. </p>\n\n<p>Thank you in advance, and I appreciate your thoughts on this. </p>\n"}, {"tags": ["ruby", "list", "zip", "tuples"], "comments": [{"owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1429070186, "post_id": 29640174, "comment_id": 47424196, "body": "@muistooshort sorry, I use python too much recently, I make a mistake"}], "answers": [{"tags": [], "owner": {"reputation": 112, "user_id": 1109171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe129bbbd392d145df6e686b6feeca1?s=128&d=identicon&r=PG", "display_name": "johnnadeau", "link": "https://stackoverflow.com/users/1109171/johnnadeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1429063288, "creation_date": 1429063288, "answer_id": 29640360, "question_id": 29640174, "link": "https://stackoverflow.com/questions/29640174/how-can-i-deal-with-this-list-with-ruby/29640360#29640360", "title": "How can I deal with this list with ruby?", "body": "<p>Try <a href=\"http://ruby-doc.org/core-2.2.1/Enumerable.html#method-i-each_slice\" rel=\"nofollow\">Enumberable#each_slice</a></p>\n\n<pre><code>list = ['Daisy', '80', '90', 'Amy', '90', '100', 'Anna', '88', '99']\nlist.each_slice(3).to_a\n=&gt; [[\"Daisy\", \"80\", \"90\"], [\"Amy\", \"90\", \"100\"], [\"Anna\", \"88\", \"99\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 1, "last_activity_date": 1429080901, "creation_date": 1429080901, "answer_id": 29643477, "question_id": 29640174, "link": "https://stackoverflow.com/questions/29640174/how-can-i-deal-with-this-list-with-ruby/29643477#29643477", "title": "How can I deal with this list with ruby?", "body": "<p>Another solution that does not require you to know how many numbers you have for each person:</p>\n\n<pre><code>my_list = ['Daisy', '80', '90', 'Amy', '90', '100', 'Anna', '88', '99']\n\nnon_digit_word = -&gt; x{x[/\\D+/]}\n\np my_list.slice_before(&amp;non_digit_word).to_a #=&gt; [[\"Daisy\", \"80\", \"90\"], [\"Amy\", \"90\", \"100\"], [\"Anna\", \"88\", \"99\"]]\n</code></pre>\n"}], "owner": {"reputation": 6317, "user_id": 2849157, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81de56159f8a6f58c78e3e7d88d7fbe5?s=128&d=identicon&r=PG&f=1", "display_name": "roger", "link": "https://stackoverflow.com/users/2849157/roger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 29640360, "answer_count": 2, "score": 2, "last_activity_date": 1429129332, "creation_date": 1429062124, "last_edit_date": 1429129332, "question_id": 29640174, "link": "https://stackoverflow.com/questions/29640174/how-can-i-deal-with-this-list-with-ruby", "title": "How can I deal with this list with ruby?", "body": "<p>I want to make a list as follow to be a list of <strike>tuples</strike> arrays:</p>\n\n<pre><code>['Daisy', '80', '90', 'Amy', '90', '100', 'Anna', '88', '99']\n</code></pre>\n\n<p>change to:</p>\n\n<pre><code>[['Daisy', '80', '90'], ['Amy', '90', '100'], ['Anna', '88', '99']]\n</code></pre>\n\n<p>how can I do this elegantly with ruby?</p>\n"}, {"tags": ["ruby", "arrays", "variable-assignment"], "comments": [{"owner": {"reputation": 168, "user_id": 3921354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/L1Zci.jpg?s=128&g=1", "display_name": "Andrea.cabral", "link": "https://stackoverflow.com/users/3921354/andrea-cabral"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1429061088, "post_id": 29639913, "comment_id": 47421963, "body": "Thx Cary, it works..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1429061426, "post_id": 29639913, "comment_id": 47422039, "body": "Now that your code is working, consider posting it at <a href=\"http://codereview.stackexchange.com/\">Code Review</a> to get suggestions for improvements. If you&#39;ve not been there before, I think you&#39;d be impressed by the advice dispensed there. Many of the questions posted there are from newbies, so it&#39;s not the least bit intimidating."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1429061874, "last_edit_date": 1429061874, "creation_date": 1429061099, "answer_id": 29640049, "question_id": 29639913, "link": "https://stackoverflow.com/questions/29639913/assigning-values-to-a-2d-array-using-each-method/29640049#29640049", "title": "Assigning values to a 2D array using &quot;each&quot; method", "body": "<p>You need to make only one wee change and your method will work fine. Replace:</p>\n\n<pre><code>transposed_arr = Array.new(n, Array.new(m))\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>transposed_arr = Array.new(n) { Array.new(m) }\n</code></pre>\n\n<p>The former makes <code>transposed_arr[i]</code> the same object (an array of size <code>m</code>) for all <code>i</code>. The latter creates a separate array of size <code>m</code> for each <code>i</code></p>\n\n<p>Case 1:</p>\n\n<pre><code>transposed_arr = Array.new(2, Array.new(2))\ntransposed_arr[0].object_id\n  #=&gt; 70235487747860 \ntransposed_arr[1].object_id\n  #=&gt; 70235487747860\n</code></pre>\n\n<p>Case 2:</p>\n\n<pre><code>transposed_arr = Array.new(2) { Array.new(2) }\ntransposed_arr[0].object_id\n  #=&gt; 70235478805680 \ntransposed_arr[1].object_id\n  #=&gt; 70235478805660\n</code></pre>\n\n<p>With that change your method returns:</p>\n\n<pre><code>[[0, 1, 2],\n [3, 4, 5],\n [6, 7, 8]]\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 3921354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/L1Zci.jpg?s=128&g=1", "display_name": "Andrea.cabral", "link": "https://stackoverflow.com/users/3921354/andrea-cabral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 29640049, "answer_count": 1, "score": 0, "last_activity_date": 1429061874, "creation_date": 1429059915, "last_edit_date": 1429060217, "question_id": 29639913, "link": "https://stackoverflow.com/questions/29639913/assigning-values-to-a-2d-array-using-each-method", "title": "Assigning values to a 2D array using &quot;each&quot; method", "body": "<p>I'm trying to transpose <code>[[0, 1, 2], [3, 4, 5], [6, 7, 8]]</code>. I get <code>[[2, 5, 8], [2, 5, 8], [2, 5, 8]]</code>.</p>\n\n<p>I can see what is happening with the line <code>p transposed_arr</code> but do not understand why this is happening. At every iteration it changes every row instead of only one.</p>\n\n<pre><code>def my_transpose(arr)\n  # number of rows\n  m = arr.count\n\n  #number of columns\n  n = arr[0].count\n\n  transposed_arr = Array.new(n, Array.new(m))\n\n  # loop through the rows\n  arr.each_with_index do |row, index1|\n\n      # loop through the colons of one row\n      row.each_with_index do |num, index2|\n\n          # swap indexes to transpose the initial array\n          transposed_arr[index2][index1] = num\n          p transposed_arr\n      end\n  end\n  transposed_arr\nend\n</code></pre>\n"}, {"tags": ["ruby", "if-statement", "case", "dry"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1429065322, "post_id": 29639818, "comment_id": 47423037, "body": "It&#39;s a small thing, but I don&#39;t think the printing of the result within the method is good programming practice. It would be better to remove the <code>state</code> argument and return the number of deaths, which would then be printed outside the method. That way, if you later needed number of deaths elsewhere in your code, you wouldn&#39;t have to change the method."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 4740291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-Ort8vBGTR5g/AAAAAAAAAAI/AAAAAAAAAEg/utI9bmJMXsM/photo.jpg?sz=128", "display_name": "Kyle Snow Schwartz", "link": "https://stackoverflow.com/users/4740291/kyle-snow-schwartz"}, "edited": false, "score": 0, "creation_date": 1429063312, "post_id": 29639979, "comment_id": 47422536, "body": "Yeah about my reference to instance variables, sorry about that. I took this snippet of code from a larger instance with more methods, and it makes more sense in context. Perhaps I should remove the @&#39;s in my post just for clarity?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 91, "user_id": 4740291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-Ort8vBGTR5g/AAAAAAAAAAI/AAAAAAAAAEg/utI9bmJMXsM/photo.jpg?sz=128", "display_name": "Kyle Snow Schwartz", "link": "https://stackoverflow.com/users/4740291/kyle-snow-schwartz"}, "edited": false, "score": 0, "creation_date": 1429125239, "post_id": 29639979, "comment_id": 47457277, "body": "Your code in the question <i>MUST</i> accurately reflect the code in your program. Otherwise, it defeats the purpose of asking a question here as we&#39;ll have no basis for accurate answers."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1429061263, "last_edit_date": 1429061263, "creation_date": 1429060517, "answer_id": 29639979, "question_id": 29639818, "link": "https://stackoverflow.com/questions/29639818/making-repetitive-if-else-or-case-statements-more-dry/29639979#29639979", "title": "Making repetitive if/else or case statements more DRY", "body": "<p>Consider this untested code:</p>\n\n<pre><code>def predicted_deaths(population_density, population, state)\n  pct = case\n        when population_density &gt;= 200 \n          0.4\n        when population_density &gt;= 150 \n          0.3\n        when population_density &gt;= 100 \n          0.2\n        when population_density &gt;= 50 \n          0.1\n        else\n          0.05\n        end\n\n  ap \"#{state} will lose #{ (population * pct).floor } people in this outbreak\"\nend\n</code></pre>\n\n<hr>\n\n<p>There are several steps I go through to refactor code like this, starting with looking for the repetitive parts and trying to move them down/out of the conditional tests (the <code>case</code> statement in this... uh... case).</p>\n\n<p>Here's the first pass:</p>\n\n<pre><code>def predicted_deaths(population_density, population, state)\n  number_of_deaths = case\n                     when @population_density &gt;= 200 \n                       (@population * 0.4).floor\n                     when @population_density &gt;= 150 \n                       (@population * 0.3).floor\n                     when @population_density &gt;= 100 \n                       (@population * 0.2).floor\n                     when @population_density &gt;= 50 \n                       (@population * 0.1).floor\n                     else \n                       (@population * 0.05).floor\n                     end\n  ap \"#{@state} will lose #{number_of_deaths} people in this outbreak\"\nend\n</code></pre>\n\n<p>At this point it's obvious that <code>@population *</code> and <code>floor</code> are redundant so I moved those down.</p>\n\n<p>There are problems with your use of instance variables and local variables though. You reference <code>@population_density</code>, <code>@population</code> and <code>@state</code> but have local variables in the method's parameters which are being used to pass in the values. You can't do that. Remove the <code>@</code> to turn the variables into local variables.</p>\n"}, {"tags": [], "owner": {"reputation": 659, "user_id": 4535724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0fead491311677ae61a6ecb1863e0ed?s=128&d=identicon&r=PG", "display_name": "Tucker", "link": "https://stackoverflow.com/users/4535724/tucker"}, "is_accepted": false, "score": 0, "last_activity_date": 1429060915, "last_edit_date": 1429060915, "creation_date": 1429060605, "answer_id": 29639987, "question_id": 29639818, "link": "https://stackoverflow.com/questions/29639818/making-repetitive-if-else-or-case-statements-more-dry/29639987#29639987", "title": "Making repetitive if/else or case statements more DRY", "body": "<pre><code>    def predicted_death(population_density, population, state)\n      number_of_death = (@population * 0.05).floor\n      for i in 1..4 \n        number_of_death = (0.1 * i * @population).floor if @population_density.between?(50*i, 50*(i+1)) || @population_density &gt;= 200\n      end\n      ap \"#{@state} will lose #{number_of_deaths} people in this outbreak\"\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "is_accepted": false, "score": 1, "last_activity_date": 1429063462, "last_edit_date": 1429063462, "creation_date": 1429061035, "answer_id": 29640039, "question_id": 29639818, "link": "https://stackoverflow.com/questions/29639818/making-repetitive-if-else-or-case-statements-more-dry/29640039#29640039", "title": "Making repetitive if/else or case statements more DRY", "body": "<p>A few things:</p>\n\n<p>1) You can make the case statement use a single assignment:</p>\n\n<pre><code>state = case(city)\nwhen \"Miami\" then \"Florida\"\nwhen \"Omaha\" then \"Nebraska\"\n...\nend\n</code></pre>\n\n<p>2) You can make a helper function that encompasses the logic that isn't common (this will help show what isn't DRY):</p>\n\n<pre><code>def percentage_of_deaths_for_population_density(population_density)\n  case\n  when population_density &gt;= 200 then 0.4\n  when population_density &gt;= 150 then 0.3\n  when population_density &gt;= 100 then 0.2\n  when population_density &gt;= 50 then 0.1\n  else 0.05\nend\n</code></pre>\n\n<p>Then you can rewrite the snippet as:</p>\n\n<pre><code>def predicted_deaths(population_density, population, state)\n  number_of_deaths = (population * percentage_of_deaths_for_population_density(population_density)).floor\n  ap \"#{state} will lose #{number_of_deaths} people in this outbreak\"\nend\n</code></pre>\n\n<p>3) Finally if you care you can refactor the <code>percentage_of_deaths_for_population</code> further (but I think it is pretty readable and would probably leave it - this is really just if you have a huge statement):</p>\n\n<pre><code>def percentage_of_deaths_for_population(population)\n  { 200 =&gt; 0.4, 150 =&gt; 0.3, 100 =&gt; 0.2, 50 =&gt; 0.1 }.each do |limit, ratio|\n    return ratio if population &gt;= limit\n  end\n  return 0.05\nend\n</code></pre>\n\n<p>4) Don't use instance variables if you are passing in the same variables! Very confusing.</p>\n"}, {"comments": [{"owner": {"reputation": 13923, "user_id": 10569, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/af9aee43b719fa9bfcf5e85fab83f03c?s=128&d=identicon&r=PG", "display_name": "andrewdotnich", "link": "https://stackoverflow.com/users/10569/andrewdotnich"}, "edited": false, "score": 0, "creation_date": 1429061308, "post_id": 29640047, "comment_id": 47422010, "body": "This would be my first refactoring step."}, {"owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "edited": false, "score": 0, "creation_date": 1429061799, "post_id": 29640047, "comment_id": 47422125, "body": "I believe the range queries are slightly off. For example, if the population density is 50, 100, 150, 200 then the factor will be 0.05, 0.1, 0.2, 0.3 (respectively). For example: <code>(150..200).include?(200)</code> is <code>true</code> but <code>(150...200).include?(200)</code> is <code>false</code>."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "edited": false, "score": 0, "creation_date": 1429062016, "post_id": 29640047, "comment_id": 47422176, "body": "@KevinSylvestre you are correct, I needed the non-inclusive range. Fixed."}, {"owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "edited": false, "score": 0, "creation_date": 1429062028, "post_id": 29640047, "comment_id": 47422182, "body": "@MarkThomas I think so. It will fail for negative population densities (probably not possible?) and will also fail for float population densities (never mind - thought it wouldn&#39;t match the edge but that was because I tested with the .. and changing the index). Again, while I like the look of this code, it isn&#39;t very robust in some sense."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1429062064, "post_id": 29640047, "comment_id": 47422189, "body": "(0...50).include? 49.5 #=&gt; true"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1429064838, "post_id": 29640047, "comment_id": 47422896, "body": "As you only need the upper end of each range, it might make sense to have them all start at zero,. That way, if you want to change a limit, you only need change a single number."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "edited": false, "score": 0, "creation_date": 1429067219, "post_id": 29640047, "comment_id": 47423507, "body": "@Kevin, if this were production code, you would want to make all sorts of checks for bad data, but that&#39;s really a different question, and addressing that here, or in most other questions posted on SO, would just be a diversion. Your point about the treatment of range endpoints is valid, of course. Hey, I just noticed you&#39;re in Victoria. I&#39;m in Cook St. Village."}, {"owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1429074294, "post_id": 29640047, "comment_id": 47425300, "body": "@CarySwoveland Ah, very cool. I just moved out to Victoria. Haven&#39;t noticed a big tech scene in the area; any other Rubyists on the island?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1429075739, "post_id": 29640047, "comment_id": 47425739, "body": "Sorry, I don&#39;t know, but I&#39;ve made no effort look. Drop me an email. The address is on my profile."}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1429061905, "last_edit_date": 1429061905, "creation_date": 1429061095, "answer_id": 29640047, "question_id": 29639818, "link": "https://stackoverflow.com/questions/29639818/making-repetitive-if-else-or-case-statements-more-dry/29640047#29640047", "title": "Making repetitive if/else or case statements more DRY", "body": "<p>One way to do it is to shorten your case statement:</p>\n\n<pre><code>def predicted_deaths(population_density, population, state)\n  factor = case population_density\n    when 0...50 then 0.05\n    when 50...100 then 0.1\n    when 100...150 then 0.2\n    when 150...200 then 0.3\n    else 0.4\n   end\n  number_of_deaths = (population * factor).floor\n  ap \"#{state} will lose #{number_of_deaths} people in this outbreak\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1429065938, "last_edit_date": 1429065938, "creation_date": 1429063346, "answer_id": 29640372, "question_id": 29639818, "link": "https://stackoverflow.com/questions/29639818/making-repetitive-if-else-or-case-statements-more-dry/29640372#29640372", "title": "Making repetitive if/else or case statements more DRY", "body": "<p>You can boil me in oil, but I'd use a hash instead of a <code>case</code> statement.</p>\n\n<pre><code>FACTORS_BY_DENSITY = { 200=&gt;0.4, 150=&gt;0.3, 100=&gt;0.2, 50=&gt;0.1, 0=&gt;0.05 }\n\n@data_by_state = {..., \"Utah\"=&gt;{pop: 4_325_641, pop_density: 126 },...}\n\ndef predicted_deaths(state)\n  state_data = @data_by_state[state]\n  (state_data[:pop] * factor(state_data[:pop_density])).to_i\nend\n\ndef factor(density)\n  FACTORS_BY_DENSITY.find { |d,_| density &gt;= d }.pop\nend\n\nstate = \"Utah\"\ndeaths = predicted_deaths(state)\n  #=&gt; 865128 \nputs \"#{state} will lose #{deaths} people in this outbreak\"\n  # Utah will lose 865128 people in this outbreak\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 4740291, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-Ort8vBGTR5g/AAAAAAAAAAI/AAAAAAAAAEg/utI9bmJMXsM/photo.jpg?sz=128", "display_name": "Kyle Snow Schwartz", "link": "https://stackoverflow.com/users/4740291/kyle-snow-schwartz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "accepted_answer_id": 29640047, "answer_count": 5, "score": 1, "last_activity_date": 1429065938, "creation_date": 1429059169, "last_edit_date": 1429063572, "question_id": 29639818, "link": "https://stackoverflow.com/questions/29639818/making-repetitive-if-else-or-case-statements-more-dry", "title": "Making repetitive if/else or case statements more DRY", "body": "<p>I often find myself with if/else statements that are essentially the same line repeated while comparing to a different value. Here I'm writing code to the predict the amount of deaths from a deadly influenza outbreak. It has been refactored into a case statement, that still is very WET:</p>\n\n<pre><code>  def predicted_deaths(population_density, population, state)\n    case\n      when population_density &gt;= 200 then number_of_deaths = (population * 0.4).floor\n      when population_density &gt;= 150 then number_of_deaths = (population * 0.3).floor\n      when population_density &gt;= 100 then number_of_deaths = (population * 0.2).floor\n      when population_density &gt;= 50 then number_of_deaths = (population * 0.1).floor\n      else number_of_deaths = (population * 0.05).floor\n    end\n    ap \"#{state} will lose #{number_of_deaths} people in this outbreak\"\n  end\n</code></pre>\n\n<p>I tried getting something to work with </p>\n\n<pre><code>j = 0.4\ni = 200\n  until i &lt;= 50 do\n    @population_density &gt;= i then number_of_deaths = (@population * j).floor\n    i -= 50\n    j -= 0.1\n  end\n</code></pre>\n\n<p>But that doesn't really do the same thing.</p>\n\n<p>How can I make the repetitive case statement more DRY?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Two suggestions here that seem like two very different but equally good refactors:</p>\n\n<p>For readability's sake:</p>\n\n<pre><code>def predicted_deaths(population_density, population, state)\n  factor = case population_density\n    when 0...50 then 0.05\n    when 50...100 then 0.1\n    when 100...150 then 0.2\n    when 150...200 then 0.3\n    else 0.4\n   end\n  number_of_deaths = (population * factor).floor\n  ap \"#{state} will lose #{number_of_deaths} people in this outbreak\"\nend\n</code></pre>\n\n<p>more condensed but less readable:</p>\n\n<pre><code>def predicted_deaths(population_density, population, state)\n  number_of_deaths = (population * 0.05).floor\n  for i in 1..4\n    number_of_deaths = (0.1 * i * population).floor if population_density.between?(50*i, 50*(i+1)) || population_density &gt;= 200\n  end\n  ap \"#{state} will lose #{number_of_deaths} people in this outbreak\"\nend\n</code></pre>\n"}, {"tags": ["ruby", "user-interface", "shoes"], "answers": [{"tags": [], "owner": {"reputation": 184, "user_id": 3800524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7478fdb5e644d85e0875f8200b33a279?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastjan Hribar", "link": "https://stackoverflow.com/users/3800524/sebastjan-hribar"}, "is_accepted": false, "score": 0, "last_activity_date": 1433969943, "creation_date": 1433969943, "answer_id": 30767183, "question_id": 29639732, "link": "https://stackoverflow.com/questions/29639732/im-trying-to-figure-out-how-to-display-different-outputs-based-on-what-was-sele/30767183#30767183", "title": "I&#39;m trying to figure out how to display different outputs based on what was selected in a list box. I&#39;m doing something wrong I just don&#39;t know what", "body": "<p>try this and let me know if it works like you expected. I hope I got your question right.</p>\n\n<pre><code>require 'green_shoes'\n\nShoes.app do\npara \"Choose which child:\"\nlist_box items: [\"child 1\", \"child 2\", \"child 3\"],\n:width =&gt; 120, choose: \"child 1\" do |list|\n@child.text = list.text\n\nif @child.text == \"child 1\"\n  @test_stack.clear\n  @test_stack.append {para \"you got this\"}\nelsif @child.text == \"child 2\"\n  @test_stack.clear\n  @test_stack.append {para \"yes\"}\nelse\n  @test_stack.clear\n  @test_stack.append {para \"think..think\"}\nend\nend\n\n@child = para \"child 1\"\n\n@test_stack = stack width: 0.5, height: 0.5 do\n  para \"you got this\"\nend\nend\n</code></pre>\n\n<p>Also, use double equals for condition checking. And you have to call the conditions inside the list box changes. As for the slot manipulation I usually clear it and then append to it, like above.</p>\n\n<p>I'm using green shoes, but that shouldn't matter, just ignore the require.</p>\n\n<p>regards,</p>\n\n<p>seba</p>\n"}], "owner": {"reputation": 1, "user_id": 4789288, "user_type": "registered", "profile_image": "https://graph.facebook.com/602984503169841/picture?type=large", "display_name": "Mickey Mondesir", "link": "https://stackoverflow.com/users/4789288/mickey-mondesir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433969943, "creation_date": 1429058467, "question_id": 29639732, "link": "https://stackoverflow.com/questions/29639732/im-trying-to-figure-out-how-to-display-different-outputs-based-on-what-was-sele", "title": "I&#39;m trying to figure out how to display different outputs based on what was selected in a list box. I&#39;m doing something wrong I just don&#39;t know what", "body": "<p>It is suppose to put different outcomes based on what child is chosen from the list group, this is me just trying to figure out the basics. Eventually a similar structure will populate multiple flows with different data based on what child is selected from the list box\nHere is my code:</p>\n\n<pre><code>       Shoes.app do\n       para \"Choose which child:\"\n       list_box :items =&gt; [\"child 1\", \"child 2\", \"child 3\"],\n       :width =&gt; 120,\n       :choose =&gt; \"child 1\" do |list|\n       @child.text = list.text\n       end\n\n       @child = para \"child 1\"\n\n\n flow width:0.5, height: 0.5 do\n  if @child.text = choose(item: \"child 1\") \n  para \"you got this\"\n  elsif @child.text = \"child 2\"\n  para \"yes!!!\"\n  else\n  para \"think..think\"\n  end\nend\nend\n</code></pre>\n"}, {"tags": ["ruby", "docker", "listener", "unicorn"], "comments": [{"owner": {"reputation": 11620, "user_id": 1832301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dfe654f47e3de2384ffd4e2165c575c?s=128&d=identicon&r=PG", "display_name": "BraveNewCurrency", "link": "https://stackoverflow.com/users/1832301/bravenewcurrency"}, "edited": false, "score": 0, "creation_date": 1429064641, "post_id": 29639492, "comment_id": 47422840, "body": "How are you running your container? I.e. are you using BootToDocker? I&#39;ve heard there are problems with the extra layer of indirection caused by BootToDocker.  (Also double-check the permissions on that socket, and remove it if it&#39;s already there.)"}, {"owner": {"reputation": 1213, "user_id": 3574992, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1398750823/picture?type=large", "display_name": "Karim", "link": "https://stackoverflow.com/users/3574992/karim"}, "reply_to_user": {"reputation": 11620, "user_id": 1832301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dfe654f47e3de2384ffd4e2165c575c?s=128&d=identicon&r=PG", "display_name": "BraveNewCurrency", "link": "https://stackoverflow.com/users/1832301/bravenewcurrency"}, "edited": false, "score": 0, "creation_date": 1429075712, "post_id": 29639492, "comment_id": 47425733, "body": "Thanks! I am, indeed, using Boot2Docker - will try pushing to docker on Digital Ocean and see if that works better there. For the permissions, would I just use chmod to set the permissions on the socket folder?"}, {"owner": {"reputation": 11620, "user_id": 1832301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dfe654f47e3de2384ffd4e2165c575c?s=128&d=identicon&r=PG", "display_name": "BraveNewCurrency", "link": "https://stackoverflow.com/users/1832301/bravenewcurrency"}, "edited": false, "score": 1, "creation_date": 1429131593, "post_id": 29639492, "comment_id": 47461044, "body": "My guess is that the socket is in a remote folder that is shared from your Mac. If you move it to somewhere that is &quot;local to Linux&quot;, it should work fine.  You can try chmod, but I imagine the error would be different if that were the case. Removing the file might help if the file got created as a non-socket somehow."}], "owner": {"reputation": 1213, "user_id": 3574992, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/1398750823/picture?type=large", "display_name": "Karim", "link": "https://stackoverflow.com/users/3574992/karim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1097, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1429056559, "creation_date": 1429056559, "question_id": 29639492, "link": "https://stackoverflow.com/questions/29639492/unicorn-error-adding-listener", "title": "Unicorn error adding listener", "body": "<p>I am having issues getting a unicorn server up and running. I try to run unicorn using:</p>\n\n<pre><code>bundle exec unicorn -c /var/www/docninja/unicorn.rb -E development -D -p 8080\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>I, [2015-04-14T23:54:52.117609 #123]  INFO -- : listening on addr=/var/www/docninja/tmp/sockets/unicorn.docninja.sock fd=10\nI, [2015-04-14T23:54:52.118624 #123]  INFO -- : listening on addr=0.0.0.0:8080 fd=11\nI, [2015-04-14T23:54:52.119553 #123]  INFO -- : worker=0 spawning...\nI, [2015-04-14T23:54:52.127642 #123]  INFO -- : master process ready\nI, [2015-04-14T23:54:52.129109 #126]  INFO -- : worker=0 spawned pid=126\nI, [2015-04-14T23:54:52.129559 #126]  INFO -- : Refreshing Gem list\nF, [2015-04-14T23:59:07.536943 #130] FATAL -- : error adding listener addr=/var/www/docninja/tmp/sockets/unicorn.docninja.sock\n/usr/local/rvm/gems/ruby-2.1.2/gems/unicorn-4.8.3/lib/unicorn/socket_helper.rb:152:in `bind_listen': socket=/var/www/docninja/tmp/sockets/unicorn.docninja.sock specified but it is not a socket! (Argument$\n        from /usr/local/rvm/gems/ruby-2.1.2/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:242:in `listen'\n        from /usr/local/rvm/gems/ruby-2.1.2/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:809:in `block in bind_new_listeners!'\n        from /usr/local/rvm/gems/ruby-2.1.2/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:809:in `each'\n        from /usr/local/rvm/gems/ruby-2.1.2/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:809:in `bind_new_listeners!'\n        from /usr/local/rvm/gems/ruby-2.1.2/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:138:in `start'\n        from /usr/local/rvm/gems/ruby-2.1.2/gems/unicorn-4.8.3/bin/unicorn:126:in `&lt;top (required)&gt;'\n        from /usr/local/rvm/gems/ruby-2.1.2/bin/unicorn:23:in `load'\n        from /usr/local/rvm/gems/ruby-2.1.2/bin/unicorn:23:in `&lt;main&gt;'\n        from /usr/local/rvm/gems/ruby-2.1.2/bin/ruby_executable_hooks:15:in `eval'\n        from /usr/local/rvm/gems/ruby-2.1.2/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>Here is my unicorn.rb file located in my main app directory (/var/www/docninja):</p>\n\n<pre><code>app_dir = \"/var/www/docninja\"\n\n# Set the working application directory\nworking_directory app_dir\n\n# Unicorn PID file location\npid \"#{app_dir}/tmp/pids/unicorn.pid\"\n\n# Path to logs\nstderr_path \"#{app_dir}/log/unicorn.stderr.log\"\nstdout_path \"#{app_dir}/log/unicorn.stdout.log\"\n\n# Path to socket file for nginx\nlisten \"#{app_dir}/tmp/sockets/unicorn.docninja.sock\", :backlog =&gt; 64\n\nworker_processes 1\n\ntimeout 30\n</code></pre>\n\n<p>All the paths here seem to be correct because it finds the sockets directory and the logs are where they should be; however, it just is not able to add some listener on that?</p>\n\n<p>I'm not sure if this helps but I am also setting this up in a Docker container using a Dockerfile.</p>\n\n<p>Would really appreciate any help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string-interpolation"], "comments": [{"owner": {"reputation": 1433, "user_id": 3717289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F548c.jpg?s=128&g=1", "display_name": "bmpasini", "link": "https://stackoverflow.com/users/3717289/bmpasini"}, "edited": false, "score": 0, "creation_date": 1429057778, "post_id": 29639316, "comment_id": 47421132, "body": "Are you using <code>erb</code> in your view?"}], "answers": [{"tags": [], "owner": {"reputation": 1329, "user_id": 137744, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/378c94a15126e7edd17d3f47058a1ac9?s=128&d=identicon&r=PG", "display_name": "H&#233;l&#232;ne Martin", "link": "https://stackoverflow.com/users/137744/h%c3%a9l%c3%a8ne-martin"}, "is_accepted": false, "score": 1, "last_activity_date": 1429056812, "creation_date": 1429056812, "answer_id": 29639518, "question_id": 29639316, "link": "https://stackoverflow.com/questions/29639316/display-variable-content-not-variable-name-in-ruby-on-rails/29639518#29639518", "title": "Display variable content, not variable name in Ruby on Rails", "body": "<p>The <a href=\"https://github.com/Shopify/liquid\" rel=\"nofollow\">Liquid template engine</a> was created just for this kind of use case.  You could have the backend user include a special string in double curly braces such as <code>{{name}}</code> that you then populate at render time.  For example, the backend user would set the welcome message to \"<code>Welcome to {{name}}, our latest member.</code>\" which would be stored in your database.  Assuming that the <code>current_user</code> variable represents the user that's currently logged in, you could render the customized message with the following code:</p>\n\n<pre><code>template = Liquid::Template.parse(messages.welcomeMessage) \ntemplate.render('name' =&gt; current_user.name)              \n</code></pre>\n\n<p>Another, more dangerous strategy is to use <code>eval</code> which will interpret the string as code:</p>\n\n<pre><code>puts eval(\"\\\"\" + messages.welcomeMessage + \"\\\"\")\n</code></pre>\n\n<p>This isn't recommended because it could allow a malicious user to run arbitrary code.  By using Liquid, you maintain control of the exact value that gets used in place of <code>{{name}}</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1505896967, "post_id": 29639656, "comment_id": 79595793, "body": "This wouldn&#39;t automagically work, though. The other part of the solution is missing."}], "tags": [], "owner": {"reputation": 1433, "user_id": 3717289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/F548c.jpg?s=128&g=1", "display_name": "bmpasini", "link": "https://stackoverflow.com/users/3717289/bmpasini"}, "is_accepted": false, "score": 1, "last_activity_date": 1429060060, "last_edit_date": 1429060060, "creation_date": 1429057839, "answer_id": 29639656, "question_id": 29639316, "link": "https://stackoverflow.com/questions/29639316/display-variable-content-not-variable-name-in-ruby-on-rails/29639656#29639656", "title": "Display variable content, not variable name in Ruby on Rails", "body": "<p>Try this:</p>\n\n<pre><code>Welcome to &lt;%= userInfo[\"name\"] %&gt;, our latest member\n</code></pre>\n"}], "owner": {"reputation": 352, "user_id": 3075435, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mihAT.jpg?s=128&g=1", "display_name": "Emmanuel Orozco", "link": "https://stackoverflow.com/users/3075435/emmanuel-orozco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1505896914, "creation_date": 1429055485, "last_edit_date": 1505896914, "question_id": 29639316, "link": "https://stackoverflow.com/questions/29639316/display-variable-content-not-variable-name-in-ruby-on-rails", "title": "Display variable content, not variable name in Ruby on Rails", "body": "<p>I want to customize a message where from the back end the user can modify a Welcome Message. Something like:</p>\n\n<blockquote>\n  <p>Welcome to #{userInfo[\"name\"]}, out latest member</p>\n</blockquote>\n\n<p>Where <code>userInfo[\"name\"]</code> is a GET Variable. </p>\n\n<p>I store this message on a model column called <code>welcomeMsj</code>.</p>\n\n<p>Then I am trying to display the message using the model. Something like:</p>\n\n<pre><code>messages = Model.first\n\nputs messages.welcomeMessage\n</code></pre>\n\n<p>I have an output like:</p>\n\n<pre><code>Welcome to #{userInfo[\"name\"]}, out latest member\n</code></pre>\n\n<p>But I want to display:</p>\n\n<blockquote>\n  <p>Welcome to Emmanuel, out latest member</p>\n</blockquote>\n\n<p>What's the correct syntax for this?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "comments": [{"owner": {"reputation": 810, "user_id": 2891803, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/21111c8914f4004462e294b6a6a937e9?s=128&d=identicon&r=PG&f=1", "display_name": "NorCalKnockOut", "link": "https://stackoverflow.com/users/2891803/norcalknockout"}, "edited": false, "score": 0, "creation_date": 1429055414, "post_id": 29639184, "comment_id": 47420496, "body": "<a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/association_basics.html</a>"}, {"owner": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "reply_to_user": {"reputation": 810, "user_id": 2891803, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/21111c8914f4004462e294b6a6a937e9?s=128&d=identicon&r=PG&f=1", "display_name": "NorCalKnockOut", "link": "https://stackoverflow.com/users/2891803/norcalknockout"}, "edited": false, "score": 0, "creation_date": 1429055440, "post_id": 29639184, "comment_id": 47420502, "body": "I&#39;ve read that, but I still don&#39;t understand :/"}], "answers": [{"tags": [], "owner": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "is_accepted": false, "score": 1, "last_activity_date": 1429058105, "creation_date": 1429058105, "answer_id": 29639690, "question_id": 29639184, "link": "https://stackoverflow.com/questions/29639184/has-and-belong-to-many-rails-4/29639690#29639690", "title": "Has and belong to many Rails 4", "body": "<p>As suggested by ruby tutorial, we generate a new migration:</p>\n\n<pre><code>rails g migration CreateDatetimesAndLocations\n</code></pre>\n\n<p>Inside this migration i have:</p>\n\n<pre><code>class CreateDatetimesAndLocations &lt; ActiveRecord::Migration\n    def change\n      create_table :locations_datetimes, id:false do |t|\n        t.belongs_to :datetime, index: true\n        t.belongs_to :location, index: true\n      end\n    end\nend\n</code></pre>\n\n<p>This is done exactly like the ruby tutorial. Now I have this controller, that i'm testing on and it goes like that:</p>\n\n<pre><code>class WeatherController &lt; ApplicationController\n  def data\n     @location = Location.new\n     @location.name = \"test\"\n     @datetime = Datetime.new\n     @datetime.date = DateTime.new(2001,2,3)\n     @location.datetimes &lt;&lt; @datetime // **PROBLEM ON THIS LINE**\n     @location.save\n\n     @location = Location.new\n     @location.name = \"teste2\"\n     @location.locations &lt;&lt; @location\n     @locations = Location.all //(show locations in view)\n  end\nend\n</code></pre>\n\n<p>The problem I was having was because the locations_datetimes have to be datetimes_locations (in alphabetic order apparently).</p>\n"}], "owner": {"reputation": 243, "user_id": 2679649, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/100001919470041/picture?type=large", "display_name": "Manoel Ribeiro", "link": "https://stackoverflow.com/users/2679649/manoel-ribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1429058105, "creation_date": 1429054770, "question_id": 29639184, "link": "https://stackoverflow.com/questions/29639184/has-and-belong-to-many-rails-4", "title": "Has and belong to many Rails 4", "body": "<p>I want to create a many to many relationship between two models, and I'd like to know step by step what to do. I'd like to have a explanation on HOW to do the migrations and HOW to ideally create the models. The way i'm trying to do right now is:</p>\n\n<p>I create two models in the Ruby command line:</p>\n\n<pre><code>rails g model Location name:string\nrails g model Datetime date:datetime\n</code></pre>\n\n<p>Now I have to open the recently created models and add:</p>\n\n<pre><code>//models/location.rb\nclass Location &lt; ActiveRecord::Base\n    has_and_belong_to_many :datetimes\nend\n\n//models/datetime.rb\nclass Datetime&lt; ActiveRecord::Base\n    has_and_belong_to_many :locations\nend\n</code></pre>\n\n<p>Now apparently I have to do a migration, but I don't understand what it is, and the I guess some sources for oldest versions really got me confused. Can someone please explain in details?</p>\n\n<p>Obs: There are some similar questions <strong>but</strong> they do not answer my question because they don't explain in depth what to do.</p>\n"}]